const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./raw-Dt1HMqYc.js","./basedecoder-DvumDe3Y.js","./lzw-DpvbRwG5.js","./jpeg-CdeCw_eT.js","./deflate-CUkHh1nh.js","./pako.esm-CPws4d4z.js","./packbits-DQnG8s9w.js","./lerc-gr1KLh9S.js","./index-DjTz9BGS.js","./chunk-L4EGOTBX-BALMY2cf.js","./entry-preview-BErytJoa.js","./lit-element-Dh4_iwrW.js","./index-DrFu-skq.js","./index-Dw69Wm5F.js","./index-Dn5dGb_h.js","./iframe-BIbxRrLc.js","./index-DPS9-N-h.js","./directive-DUGPADuw.js","./main-CqylYIBO.js","./core-C4kcdPvA.js","./webimage-BcnuJlio.js"])))=>i.map(i=>d[i]);
var BBe=Object.defineProperty;var Sve=e=>{throw TypeError(e)};var zBe=(e,t,n)=>t in e?BBe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tn=(e,t,n)=>zBe(e,typeof t!="symbol"?t+"":t,n),XR=(e,t,n)=>t.has(e)||Sve("Cannot "+n);var Gt=(e,t,n)=>(XR(e,t,"read from private field"),n?n.call(e):t.get(e)),yn=(e,t,n)=>t.has(e)?Sve("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),as=(e,t,n,r)=>(XR(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),mn=(e,t,n)=>(XR(e,t,"access private method"),n);import{s as jBe}from"./chunk-L4EGOTBX-BALMY2cf.js";import{m as rI,p as UBe,v as Qm,r as ew,M as ZR,f as qBe}from"./entry-preview-BErytJoa.js";import{g as sa,j as bu,c as Yi,b as bCe}from"./index-DjTz9BGS.js";import{useMDXComponents as xCe}from"./index-Dw69Wm5F.js";import{ap as HBe,aq as GBe,ar as VBe,as as WBe,at as YBe,au as XBe,av as ZBe}from"./index-Dn5dGb_h.js";import{r as Zr,x as Qe,E as Xr,T as lv,i as iI,b as Dy}from"./lit-element-Dh4_iwrW.js";import{c as z_,n as KBe,d as JBe,I as i3,R as wCe,r as QBe,g as eze,h as tze,j as nze,C as rze,k as ize,m as Ave,u as Cve,v as sI,w as vg,x as B4,y as Cu,z as z4,A as oI,B as sze,D as oze,E as aze,F as lze,i as uze,G as cze,H as fze,J as dze,K as hze,L as pze,M as mze,N as aI,O as gze,p as lI,P as kve,Q as _Ce,S as uI,T as j_,U as tD,V as Zg,W as yze,X as vze,Y as bze,Z as ECe,_ as nD,$ as rD,a0 as xze,a1 as wze,a2 as _ze,a3 as Eze,a4 as Tve,a5 as Sze,a6 as Aze,a7 as Cze,f as kze,a8 as Tze,l as Dze,a9 as Lze,aa as Rze,ab as Fze,ac as Oze,s as SCe,ad as Mze,ae as $ze,af as Ize,ag as Pze,q as Nze,t as Bze,o as ACe,ah as zze,ai as jze,aj as s3,ak as Uze,al as qze,e as J2,a as iD,b as np}from"./directive-DUGPADuw.js";import{m as U_,g as Hze,C as Gze,a as oi,b as o3,s as Vze,S as q_,V as cI,d as Dve,c as p_,T as Lve,F as j4,R as bg,e as Q2,f as Wze,w as Yze,h as Xze,i as Kg,j as H_,k as fI,l as Dp,n as mC,o as au,p as Gv,P as mc,q as eu,r as a3,t as As,u as Vv,v as uv,L as Ff,I as CCe,x as xg,J as Zze,y as Kze,z as Oo,A as Jze,B as U4,D as Qze,M as N1,E as sD,G as eE,H as tE,X as oD,K as kn,N as Rn,O as Rt,Q as dI,U as l3,W as eje,Y as tje,Z as Lp,_ as u3,$ as kCe,a0 as er,a1 as Ge,a2 as yr,a3 as Oi,a4 as tu,a5 as B1,a6 as mp,a7 as G_,a8 as TCe,a9 as Xt,aa as c3,ab as f3,ac as Ue,ad as Dt,ae as aD,af as Ds,ag as Ea,ah as d3,ai as DCe,aj as eg,ak as nje,al as hI,am as LCe,an as Td,ao as kc,ap as mi,aq as rje,ar as ije,as as Bp,at as Rve,au as gc,av as pf,aw as sje,ax as pI,ay as lD,az as oje,aA as RCe,aB as aje,aC as lje,aD as Ei,aE as FCe,aF as Ko,aG as mI,aH as h3,aI as gI,aJ as uje,aK as cje,aL as q4,aM as KR,aN as fje,aO as uD,aP as V_,aQ as gp,aR as yp,aS as zp,aT as cD,aU as yI,aV as eh,aW as vI,aX as OCe,aY as dje,aZ as kl,a_ as Ts,a$ as bI,b0 as wc,b1 as xI,b2 as MCe,b3 as Fve,b4 as Jg,b5 as Ove,b6 as Jy,b7 as hje,b8 as H4,b9 as $Ce,ba as pje,bb as Mve,bc as mje,bd as wI,be as gje,bf as ICe,bg as W_,bh as yje,bi as vje,bj as Si,bk as PCe,bl as Y_,bm as Tl,bn as jp,bo as z1,bp as bje,bq as cr,br as xje,bs as wje,bt as NCe,bu as Up,bv as _je,bw as Eje,bx as Sje,by as Aje,bz as _I,bA as Cje,bB as kje,bC as Tje,bD as BCe,bE as Dje,bF as p3,bG as EI,bH as m3,bI as zCe,bJ as hh,bK as nE,bL as rE,bM as SI,bN as AI,bO as X_,bP as Lje,bQ as Rje,bR as Fje,bS as fD,bT as Oje,bU as Mje,bV as $je,bW as JR,bX as Z_,bY as dD,bZ as Ije,b_ as Pje,b$ as $ve,c0 as Ive,c1 as Nje,c2 as Pve,c3 as Bje,c4 as zje,c5 as G4,c6 as jCe,c7 as jje,c8 as j1,c9 as UCe,ca as Nve,cb as g3,cc as Bve,cd as k0,ce as CI,cf as Uje,cg as qCe,ch as hD,ci as qje,cj as kI,ck as HCe,cl as Hje,cm as Gje,cn as Vje,co as Wje,cp as GCe,cq as Yje,cr as Xje,cs as Zje,ct as Kje,cu as Jje,cv as VCe,cw as Qje,cx as WCe,cy as eUe,cz as K_,cA as V4,cB as tUe,cC as nUe,cD as YCe,cE as XCe,cF as rUe,cG as iUe}from"./main-CqylYIBO.js";import{A as ZCe,J as Ow,S as sUe}from"./core-C4kcdPvA.js";import{_ as om}from"./iframe-BIbxRrLc.js";const zve={duration:750},jve={type:"FeatureCollection",features:[]};function oUe(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function aUe(e,t){const n=oUe(e,t);return n&&Math.sqrt(n)}class Ja{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function lUe(e,t){return Array.from(t,n=>e[n])}function uUe(e=z_){if(e===z_)return KCe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function KCe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Pg(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function W4(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function JCe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?KCe:uUe(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),c=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*c*(l-c)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*c/l+d)),p=Math.min(r,Math.floor(t+(l-u)*c/l+d));JCe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(tw(e,n,t),i(e[r],s)>0&&tw(e,n,r);o<a;){for(tw(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?tw(e,n,a):(++a,tw(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function tw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Y4(e,t,n){if(e=Float64Array.from(KBe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return W4(e);if(t>=1)return Pg(e);var r,i=(r-1)*t,s=Math.floor(i),o=Pg(JCe(e,s).subarray(0,s+1)),a=W4(e.subarray(s+1));return o+(a-o)*(i-s)}}function QCe(e,t,n=JBe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function cUe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function e3e(e,t){return Y4(e,.5,t)}function*fUe(e){for(const t of e)yield*t}function t3e(e){return Array.from(fUe(e))}function Kl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function n3e(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function dUe(e,...t){e=new i3(e),t=t.map(hUe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function hUe(e){return e instanceof i3?e:new i3(e)}function pUe(...e){const t=new i3;for(const n of e)for(const r of n)t.add(r);return t}var r3e=-.14861,TI=1.78277,DI=-.29227,pD=-.90649,J_=1.97294,Uve=J_*pD,qve=J_*TI,Hve=TI*DI-pD*r3e;function mUe(e){if(e instanceof Ng)return new Ng(e.h,e.s,e.l,e.opacity);e instanceof wCe||(e=QBe(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Hve*r+Uve*t-qve*n)/(Hve+Uve-qve),s=r-i,o=(J_*(n-i)-DI*s)/pD,a=Math.sqrt(o*o+s*s)/(J_*i*(1-i)),l=a?Math.atan2(o,s)*ize-120:NaN;return new Ng(l<0?l+360:l,a,i,e.opacity)}function X4(e,t,n,r){return arguments.length===1?mUe(e):new Ng(e,t,n,r??1)}function Ng(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}eze(Ng,X4,tze(rze,{brighter(e){return e=e==null?Ave:Math.pow(Ave,e),new Ng(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cve:Math.pow(Cve,e),new Ng(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*nze,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new wCe(255*(t+n*(r3e*r+TI*i)),255*(t+n*(DI*r+pD*i)),255*(t+n*(J_*r)),this.opacity)}}));function gUe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function yUe(e,t){var n=sI(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}var Gve=180/Math.PI,Z4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function i3e(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Gve,skewX:Math.atan(l)*Gve,scaleX:o,scaleY:a}}var YS;function vUe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Z4:i3e(t.a,t.b,t.c,t.d,t.e,t.f)}function bUe(e){return e==null||(YS||(YS=document.createElementNS("http://www.w3.org/2000/svg","g")),YS.setAttribute("transform",e),!(e=YS.transform.baseVal.consolidate()))?Z4:(e=e.matrix,i3e(e.a,e.b,e.c,e.d,e.e,e.f))}function s3e(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,f,c,d,h,p){if(u!==c||f!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:vg(u,c)},{i:g-2,x:vg(f,d)})}else(c||d)&&h.push("translate("+c+t+d+n)}function o(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:vg(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function a(u,f,c,d){u!==f?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:vg(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function l(u,f,c,d,h,p){if(u!==c||f!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:vg(u,c)},{i:g-2,x:vg(f,d)})}else(c!==1||d!==1)&&h.push(i(h)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=e(u),f=e(f),s(u.translateX,u.translateY,f.translateX,f.translateY,c,d),o(u.rotate,f.rotate,c,d),a(u.skewX,f.skewX,c,d),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(h){for(var p=-1,g=d.length,v;++p<g;)c[(v=d[p]).i]=v.x(h);return c.join("")}}}var xUe=s3e(vUe,"px, ","px)","deg)"),wUe=s3e(bUe,", ",")",")"),_Ue=1e-12;function Vve(e){return((e=Math.exp(e))+1/e)/2}function EUe(e){return((e=Math.exp(e))-1/e)/2}function SUe(e){return((e=Math.exp(2*e))-1)/(e+1)}const AUe=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],f=o[0],c=o[1],d=o[2],h=f-a,p=c-l,g=h*h+p*p,v,y;if(g<_Ue)y=Math.log(d/u)/t,v=function(D){return[a+D*h,l+D*p,u*Math.exp(t*D*y)]};else{var b=Math.sqrt(g),w=(d*d-u*u+r*g)/(2*u*n*b),E=(d*d-u*u-r*g)/(2*d*n*b),A=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(E*E+1)-E);y=(T-A)/t,v=function(D){var k=D*y,R=Vve(A),O=u/(n*b)*(R*SUe(t*k+A)-EUe(A));return[a+O*h,l+O*p,u*R/Vve(t*k+A)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function o3e(e){return function(t,n){var r=e((t=B4(t)).h,(n=B4(n)).h),i=Cu(t.s,n.s),s=Cu(t.l,n.l),o=Cu(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const CUe=o3e(sI);var kUe=o3e(Cu);function TUe(e,t){var n=Cu((e=z4(e)).l,(t=z4(t)).l),r=Cu(e.a,t.a),i=Cu(e.b,t.b),s=Cu(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function a3e(e){return function t(n){n=+n;function r(i,s){var o=e((i=X4(i)).h,(s=X4(s)).h),a=Cu(i.s,s.s),l=Cu(i.l,s.l),u=Cu(i.opacity,s.opacity);return function(f){return i.h=o(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}const DUe=a3e(sI);var LUe=a3e(Cu);function RUe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const FUe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:oI,interpolateArray:sze,interpolateBasis:oze,interpolateBasisClosed:aze,interpolateCubehelix:DUe,interpolateCubehelixLong:LUe,interpolateDate:lze,interpolateDiscrete:gUe,interpolateHcl:uze,interpolateHclLong:cze,interpolateHsl:CUe,interpolateHslLong:kUe,interpolateHue:yUe,interpolateLab:TUe,interpolateNumber:vg,interpolateNumberArray:fze,interpolateObject:dze,interpolateRgb:hze,interpolateRgbBasis:pze,interpolateRgbBasisClosed:mze,interpolateRound:aI,interpolateString:gze,interpolateTransformCss:xUe,interpolateTransformSvg:wUe,interpolateZoom:AUe,piecewise:lI,quantize:RUe},Symbol.toStringTag,{value:"Module"}));function l3e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,kve),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return l3e(e).unknown(t)},e=arguments.length?Array.from(e,kve):[0,1],_Ce(n)}function u3e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=QCe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[j_(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(z_),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return u3e().domain(e).range(t).unknown(r)},uI.apply(s,arguments)}const QR=new Date,eF=new Date;function vo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>vo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(QR.setTime(+s),eF.setTime(+o),e(QR),e(eF),Math.floor(n(QR,eF))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Wv=vo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Wv);Wv.range;const Id=1e3,ku=Id*60,Pd=ku*60,th=Pd*24,LI=th*7,Wve=th*30,tF=th*365,Nd=vo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Id)},(e,t)=>(t-e)/Id,e=>e.getUTCSeconds());Nd.range;const mD=vo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Id)},(e,t)=>{e.setTime(+e+t*ku)},(e,t)=>(t-e)/ku,e=>e.getMinutes());mD.range;const gD=vo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ku)},(e,t)=>(t-e)/ku,e=>e.getUTCMinutes());gD.range;const yD=vo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Id-e.getMinutes()*ku)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getHours());yD.range;const vD=vo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getUTCHours());vD.range;const Gd=vo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ku)/th,e=>e.getDate()-1);Gd.range;const Rp=vo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/th,e=>e.getUTCDate()-1);Rp.range;const c3e=vo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/th,e=>Math.floor(e/th));c3e.range;function T0(e){return vo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ku)/LI)}const U1=T0(0),y3=T0(1),OUe=T0(2),MUe=T0(3),Yv=T0(4),$Ue=T0(5),IUe=T0(6);U1.range;y3.range;OUe.range;MUe.range;Yv.range;$Ue.range;IUe.range;function D0(e){return vo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/LI)}const q1=D0(0),v3=D0(1),PUe=D0(2),NUe=D0(3),Xv=D0(4),BUe=D0(5),zUe=D0(6);q1.range;v3.range;PUe.range;NUe.range;Xv.range;BUe.range;zUe.range;const Q_=vo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Q_.range;const e2=vo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());e2.range;const Of=vo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Of.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Of.range;const Mf=vo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Mf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Mf.range;function f3e(e,t,n,r,i,s){const o=[[Nd,1,Id],[Nd,5,5*Id],[Nd,15,15*Id],[Nd,30,30*Id],[s,1,ku],[s,5,5*ku],[s,15,15*ku],[s,30,30*ku],[i,1,Pd],[i,3,3*Pd],[i,6,6*Pd],[i,12,12*Pd],[r,1,th],[r,2,2*th],[n,1,LI],[t,1,Wve],[t,3,3*Wve],[e,1,tF]];function a(u,f,c){const d=f<u;d&&([u,f]=[f,u]);const h=c&&typeof c.range=="function"?c:l(u,f,c),p=h?h.range(u,+f+1):[];return d?p.reverse():p}function l(u,f,c){const d=Math.abs(f-u)/c,h=tD(([,,v])=>v).right(o,d);if(h===o.length)return e.every(Zg(u/tF,f/tF,c));if(h===0)return Wv.every(Math.max(Zg(u,f,c),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[jUe,UUe]=f3e(Mf,e2,q1,c3e,vD,gD),[qUe,HUe]=f3e(Of,Q_,U1,Gd,yD,mD);function nF(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function rF(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nw(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function d3e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=rw(i),f=iw(i),c=rw(s),d=iw(s),h=rw(o),p=iw(o),g=rw(a),v=iw(a),y=rw(l),b=iw(l),w={a:q,A:Y,b:X,B:te,c:null,d:Qve,e:Qve,f:hqe,g:Eqe,G:Aqe,H:cqe,I:fqe,j:dqe,L:h3e,m:pqe,M:mqe,p:le,q:ee,Q:n1e,s:r1e,S:gqe,u:yqe,U:vqe,V:bqe,w:xqe,W:wqe,x:null,X:null,y:_qe,Y:Sqe,Z:Cqe,"%":t1e},E={a:z,A:he,b:de,B:ze,c:null,d:e1e,e:e1e,f:Lqe,g:zqe,G:Uqe,H:kqe,I:Tqe,j:Dqe,L:m3e,m:Rqe,M:Fqe,p:He,q:je,Q:n1e,s:r1e,S:Oqe,u:Mqe,U:$qe,V:Iqe,w:Pqe,W:Nqe,x:null,X:null,y:Bqe,Y:jqe,Z:qqe,"%":t1e},A={a:O,A:B,b:K,B:L,c:$,d:Kve,e:Kve,f:oqe,g:Zve,G:Xve,H:Jve,I:Jve,j:nqe,L:sqe,m:tqe,M:rqe,p:R,q:eqe,Q:lqe,s:uqe,S:iqe,u:XUe,U:ZUe,V:KUe,w:YUe,W:JUe,x:I,X:U,y:Zve,Y:Xve,Z:QUe,"%":aqe};w.x=T(n,w),w.X=T(r,w),w.c=T(t,w),E.x=T(n,E),E.X=T(r,E),E.c=T(t,E);function T(we,Ie){return function(qe){var Pe=[],At=-1,ht=0,nn=we.length,Vt,Mn,Ze;for(qe instanceof Date||(qe=new Date(+qe));++At<nn;)we.charCodeAt(At)===37&&(Pe.push(we.slice(ht,At)),(Mn=Yve[Vt=we.charAt(++At)])!=null?Vt=we.charAt(++At):Mn=Vt==="e"?" ":"0",(Ze=Ie[Vt])&&(Vt=Ze(qe,Mn)),Pe.push(Vt),ht=At+1);return Pe.push(we.slice(ht,At)),Pe.join("")}}function D(we,Ie){return function(qe){var Pe=nw(1900,void 0,1),At=k(Pe,we,qe+="",0),ht,nn;if(At!=qe.length)return null;if("Q"in Pe)return new Date(Pe.Q);if("s"in Pe)return new Date(Pe.s*1e3+("L"in Pe?Pe.L:0));if(Ie&&!("Z"in Pe)&&(Pe.Z=0),"p"in Pe&&(Pe.H=Pe.H%12+Pe.p*12),Pe.m===void 0&&(Pe.m="q"in Pe?Pe.q:0),"V"in Pe){if(Pe.V<1||Pe.V>53)return null;"w"in Pe||(Pe.w=1),"Z"in Pe?(ht=rF(nw(Pe.y,0,1)),nn=ht.getUTCDay(),ht=nn>4||nn===0?v3.ceil(ht):v3(ht),ht=Rp.offset(ht,(Pe.V-1)*7),Pe.y=ht.getUTCFullYear(),Pe.m=ht.getUTCMonth(),Pe.d=ht.getUTCDate()+(Pe.w+6)%7):(ht=nF(nw(Pe.y,0,1)),nn=ht.getDay(),ht=nn>4||nn===0?y3.ceil(ht):y3(ht),ht=Gd.offset(ht,(Pe.V-1)*7),Pe.y=ht.getFullYear(),Pe.m=ht.getMonth(),Pe.d=ht.getDate()+(Pe.w+6)%7)}else("W"in Pe||"U"in Pe)&&("w"in Pe||(Pe.w="u"in Pe?Pe.u%7:"W"in Pe?1:0),nn="Z"in Pe?rF(nw(Pe.y,0,1)).getUTCDay():nF(nw(Pe.y,0,1)).getDay(),Pe.m=0,Pe.d="W"in Pe?(Pe.w+6)%7+Pe.W*7-(nn+5)%7:Pe.w+Pe.U*7-(nn+6)%7);return"Z"in Pe?(Pe.H+=Pe.Z/100|0,Pe.M+=Pe.Z%100,rF(Pe)):nF(Pe)}}function k(we,Ie,qe,Pe){for(var At=0,ht=Ie.length,nn=qe.length,Vt,Mn;At<ht;){if(Pe>=nn)return-1;if(Vt=Ie.charCodeAt(At++),Vt===37){if(Vt=Ie.charAt(At++),Mn=A[Vt in Yve?Ie.charAt(At++):Vt],!Mn||(Pe=Mn(we,qe,Pe))<0)return-1}else if(Vt!=qe.charCodeAt(Pe++))return-1}return Pe}function R(we,Ie,qe){var Pe=u.exec(Ie.slice(qe));return Pe?(we.p=f.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function O(we,Ie,qe){var Pe=h.exec(Ie.slice(qe));return Pe?(we.w=p.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function B(we,Ie,qe){var Pe=c.exec(Ie.slice(qe));return Pe?(we.w=d.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function K(we,Ie,qe){var Pe=y.exec(Ie.slice(qe));return Pe?(we.m=b.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function L(we,Ie,qe){var Pe=g.exec(Ie.slice(qe));return Pe?(we.m=v.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function $(we,Ie,qe){return k(we,t,Ie,qe)}function I(we,Ie,qe){return k(we,n,Ie,qe)}function U(we,Ie,qe){return k(we,r,Ie,qe)}function q(we){return o[we.getDay()]}function Y(we){return s[we.getDay()]}function X(we){return l[we.getMonth()]}function te(we){return a[we.getMonth()]}function le(we){return i[+(we.getHours()>=12)]}function ee(we){return 1+~~(we.getMonth()/3)}function z(we){return o[we.getUTCDay()]}function he(we){return s[we.getUTCDay()]}function de(we){return l[we.getUTCMonth()]}function ze(we){return a[we.getUTCMonth()]}function He(we){return i[+(we.getUTCHours()>=12)]}function je(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Ie=T(we+="",w);return Ie.toString=function(){return we},Ie},parse:function(we){var Ie=D(we+="",!1);return Ie.toString=function(){return we},Ie},utcFormat:function(we){var Ie=T(we+="",E);return Ie.toString=function(){return we},Ie},utcParse:function(we){var Ie=D(we+="",!0);return Ie.toString=function(){return we},Ie}}}var Yve={"-":"",_:" ",0:"0"},$o=/^\s*\d+/,GUe=/^%/,VUe=/[\\^$*+?|[\]().{}]/g;function ai(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function WUe(e){return e.replace(VUe,"\\$&")}function rw(e){return new RegExp("^(?:"+e.map(WUe).join("|")+")","i")}function iw(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function YUe(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function XUe(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ZUe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function KUe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function JUe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xve(e,t,n){var r=$o.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Zve(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function QUe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function eqe(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function tqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kve(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function nqe(e,t,n){var r=$o.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Jve(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function iqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function sqe(e,t,n){var r=$o.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function oqe(e,t,n){var r=$o.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function aqe(e,t,n){var r=GUe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lqe(e,t,n){var r=$o.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function uqe(e,t,n){var r=$o.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Qve(e,t){return ai(e.getDate(),t,2)}function cqe(e,t){return ai(e.getHours(),t,2)}function fqe(e,t){return ai(e.getHours()%12||12,t,2)}function dqe(e,t){return ai(1+Gd.count(Of(e),e),t,3)}function h3e(e,t){return ai(e.getMilliseconds(),t,3)}function hqe(e,t){return h3e(e,t)+"000"}function pqe(e,t){return ai(e.getMonth()+1,t,2)}function mqe(e,t){return ai(e.getMinutes(),t,2)}function gqe(e,t){return ai(e.getSeconds(),t,2)}function yqe(e){var t=e.getDay();return t===0?7:t}function vqe(e,t){return ai(U1.count(Of(e)-1,e),t,2)}function p3e(e){var t=e.getDay();return t>=4||t===0?Yv(e):Yv.ceil(e)}function bqe(e,t){return e=p3e(e),ai(Yv.count(Of(e),e)+(Of(e).getDay()===4),t,2)}function xqe(e){return e.getDay()}function wqe(e,t){return ai(y3.count(Of(e)-1,e),t,2)}function _qe(e,t){return ai(e.getFullYear()%100,t,2)}function Eqe(e,t){return e=p3e(e),ai(e.getFullYear()%100,t,2)}function Sqe(e,t){return ai(e.getFullYear()%1e4,t,4)}function Aqe(e,t){var n=e.getDay();return e=n>=4||n===0?Yv(e):Yv.ceil(e),ai(e.getFullYear()%1e4,t,4)}function Cqe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ai(t/60|0,"0",2)+ai(t%60,"0",2)}function e1e(e,t){return ai(e.getUTCDate(),t,2)}function kqe(e,t){return ai(e.getUTCHours(),t,2)}function Tqe(e,t){return ai(e.getUTCHours()%12||12,t,2)}function Dqe(e,t){return ai(1+Rp.count(Mf(e),e),t,3)}function m3e(e,t){return ai(e.getUTCMilliseconds(),t,3)}function Lqe(e,t){return m3e(e,t)+"000"}function Rqe(e,t){return ai(e.getUTCMonth()+1,t,2)}function Fqe(e,t){return ai(e.getUTCMinutes(),t,2)}function Oqe(e,t){return ai(e.getUTCSeconds(),t,2)}function Mqe(e){var t=e.getUTCDay();return t===0?7:t}function $qe(e,t){return ai(q1.count(Mf(e)-1,e),t,2)}function g3e(e){var t=e.getUTCDay();return t>=4||t===0?Xv(e):Xv.ceil(e)}function Iqe(e,t){return e=g3e(e),ai(Xv.count(Mf(e),e)+(Mf(e).getUTCDay()===4),t,2)}function Pqe(e){return e.getUTCDay()}function Nqe(e,t){return ai(v3.count(Mf(e)-1,e),t,2)}function Bqe(e,t){return ai(e.getUTCFullYear()%100,t,2)}function zqe(e,t){return e=g3e(e),ai(e.getUTCFullYear()%100,t,2)}function jqe(e,t){return ai(e.getUTCFullYear()%1e4,t,4)}function Uqe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Xv(e):Xv.ceil(e),ai(e.getUTCFullYear()%1e4,t,4)}function qqe(){return"+0000"}function t1e(){return"%"}function n1e(e){return+e}function r1e(e){return Math.floor(+e/1e3)}var Ly,RI,y3e,FI,v3e;Hqe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Hqe(e){return Ly=d3e(e),RI=Ly.format,y3e=Ly.parse,FI=Ly.utcFormat,v3e=Ly.utcParse,Ly}function Gqe(e){return new Date(e)}function Vqe(e){return e instanceof Date?+e:+new Date(+e)}function OI(e,t,n,r,i,s,o,a,l,u){var f=yze(),c=f.invert,d=f.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),b=u("%b %d"),w=u("%B"),E=u("%Y");function A(T){return(l(T)<T?h:a(T)<T?p:o(T)<T?g:s(T)<T?v:r(T)<T?i(T)<T?y:b:n(T)<T?w:E)(T)}return f.invert=function(T){return new Date(c(T))},f.domain=function(T){return arguments.length?d(Array.from(T,Vqe)):d().map(Gqe)},f.ticks=function(T){var D=d();return e(D[0],D[D.length-1],T??10)},f.tickFormat=function(T,D){return D==null?A:u(D)},f.nice=function(T){var D=d();return(!T||typeof T.range!="function")&&(T=t(D[0],D[D.length-1],T??10)),T?d(vze(D,T)):f},f.copy=function(){return bze(f,OI(e,t,n,r,i,s,o,a,l,u))},f}function Wqe(){return uI.apply(OI(qUe,HUe,Of,Q_,U1,Gd,yD,mD,Nd,RI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Yqe(){return uI.apply(OI(jUe,UUe,Mf,e2,q1,Rp,vD,gD,Nd,FI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bD(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=ECe,f,c=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+f(g))-s)*(r*g<r*s?a:l),u(c?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=f(e=+e),s=f(t=+t),o=f(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(c=!!g,h):c},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(v){var y,b,w;return arguments.length?([y,b,w]=v,u=lI(g,[y,b,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(oI),h.rangeRound=p(aI),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return f=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function b3e(){var e=_Ce(bD()(ECe));return e.copy=function(){return nD(e,b3e())},rD.apply(e,arguments)}function x3e(){var e=xze(bD()).domain([.1,1,10]);return e.copy=function(){return nD(e,x3e()).base(e.base())},rD.apply(e,arguments)}function w3e(){var e=wze(bD());return e.copy=function(){return nD(e,w3e()).constant(e.constant())},rD.apply(e,arguments)}function MI(){var e=_ze(bD());return e.copy=function(){return nD(e,MI()).exponent(e.exponent())},rD.apply(e,arguments)}function Xqe(){return MI.apply(null,arguments).exponent(.5)}function Zqe(e){if(!(e.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const t=e.inversePixelTransform[0],n=e.inversePixelTransform[1],r=Math.sqrt(t*t+n*n),i=e.frameState,s=U_(e.inversePixelTransform.slice(),i.coordinateToPixelTransform),o=Hze(i.viewState.resolution,r);let a;return new Gze(e.context,r,i.extent,s,i.viewState.rotation,o,a)}function _3e(e,t,n){const r=[];let i=e(0),s=e(1),o=t(i),a=t(s);const l=[s,i],u=[a,o],f=[1,0],c={};let d=1e5,h,p,g,v,y,b;for(;--d>0&&f.length>0;)g=f.pop(),i=l.pop(),o=u.pop(),b=g.toString(),b in c||(r.push(o[0],o[1]),c[b]=!0),v=f.pop(),s=l.pop(),a=u.pop(),y=(g+v)/2,h=e(y),p=t(h),Vze(p[0],p[1],o[0],o[1],a[0],a[1])<n?(r.push(a[0],a[1]),b=v.toString(),c[b]=!0):(f.push(v,y,y,g),u.push(a,p,p,o),l.push(s,h,h,i));return r}function Kqe(e,t,n,r,i){const s=oi("EPSG:4326");return _3e(function(o){return[e,t+(n-t)*o]},o3(s,r),i)}function Jqe(e,t,n,r,i){const s=oi("EPSG:4326");return _3e(function(o){return[t+(n-t)*o,e]},o3(s,r),i)}const Qqe=new q_({color:"rgba(0,0,0,0.2)"}),eHe=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];let tHe=class extends cI{constructor(t){t=t||{};const n=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,super(n),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=t.targetSize!==void 0?t.targetSize:100,this.maxLines_=t.maxLines!==void 0?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=t.strokeStyle!==void 0?t.strokeStyle:Qqe,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=t.lonLabelFormatter==null?Dve.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=t.latLabelFormatter==null?Dve.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=t.lonLabelPosition==null?0:t.lonLabelPosition,this.latLabelPosition_=t.latLabelPosition==null?1:t.latLabelPosition,this.lonLabelStyleBase_=new p_({text:t.lonLabelStyle!==void 0?t.lonLabelStyle.clone():new Lve({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new j4({color:"rgba(0,0,0,1)"}),stroke:new q_({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const i=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(i),this.lonLabelStyleBase_},this.latLabelStyleBase_=new p_({text:t.latLabelStyle!==void 0?t.latLabelStyle.clone():new Lve({font:"12px Calibri,sans-serif",textAlign:"right",fill:new j4({color:"rgba(0,0,0,1)"}),stroke:new q_({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const i=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(i),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(bg.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=t.intervals!==void 0?t.intervals:eHe,this.setSource(new Q2({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new Wze,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new p_({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,n){let r=t.slice();return this.projection_&&this.getSource().getWrapX()&&Yze(r,this.projection_),this.loadedExtent_&&(Xze(this.loadedExtent_,r,n)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(t,n,r){this.loadedExtent_=t;const i=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=Kg(s,t);if(this.renderedExtent_&&H_(this.renderedExtent_,o)&&this.renderedResolution_===n||(this.renderedExtent_=o,this.renderedResolution_=n,fI(o)))return;const a=Dp(o),l=n*n/4;(!this.projection_||!mC(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,n,l);let f=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(f+=this.meridians_.length),this.parallelsLabels_&&(f+=this.parallels_.length);let c;for(;f>this.featurePool_.length;)c=new au,this.featurePool_.push(c);const d=i.getFeaturesCollection();d.clear();let h=0,p,g;for(p=0,g=this.meridians_.length;p<g;++p)c=this.featurePool_[h++],c.setGeometry(this.meridians_[p]),c.setStyle(this.lineStyle_),d.push(c);for(p=0,g=this.parallels_.length;p<g;++p)c=this.featurePool_[h++],c.setGeometry(this.parallels_[p]),c.setStyle(this.lineStyle_),d.push(c)}addMeridian_(t,n,r,i,s,o){const a=this.getMeridian_(t,n,r,i,o);if(Gv(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new mc([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(t,n,r,i,s,o){const a=this.getParallel_(t,n,r,i,o);if(Gv(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new mc([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(t){const n=t.frameState.viewState.rotation,r=t.frameState.viewState.resolution,i=t.frameState.size,s=t.frameState.extent,o=Dp(s);let a=s;if(n){const p=i[0]*r,g=i[1]*r;a=[o[0]-p/2,o[1]-g/2,o[0]+p/2,o[1]+g/2]}let l=0,u=0,f=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),d=eu(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!a3(c,s)){l=Math.floor((s[0]-c[0])/d),u=Math.ceil((s[2]-c[2])/d);const p=Math.abs(n)>Math.PI/2;f=f!==p}const h=Zqe(t);for(let p=l;p<=u;++p){let g=this.meridians_.length+this.parallels_.length,v,y,b,w;if(this.meridiansLabels_)for(y=0,b=this.meridiansLabels_.length;y<b;++y){const E=this.meridians_[y];if(!n&&p===0)w=this.getMeridianPoint_(E,s,y);else{const A=E.clone();A.translate(p*d,0),A.rotate(-n,o),w=this.getMeridianPoint_(A,a,y),w.rotate(n,o)}v=this.featurePool_[g++],v.setGeometry(w),v.set("graticule_label",this.meridiansLabels_[y].text),h.drawFeature(v,this.lonLabelStyle_(v))}if(this.parallelsLabels_&&(p===l&&f||p===u&&!f))for(y=0,b=this.parallels_.length;y<b;++y){const E=this.parallels_[y];if(!n&&p===0)w=this.getParallelPoint_(E,s,y);else{const A=E.clone();A.translate(p*d,0),A.rotate(-n,o),w=this.getParallelPoint_(A,a,y),w.rotate(n,o)}v=this.featurePool_[g++],v.setGeometry(w),v.set("graticule_label",this.parallelsLabels_[y].text),h.drawFeature(v,this.latLabelStyle_(v))}}}createGraticule_(t,n,r,i){const s=this.getInterval_(r);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=eu(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!a3(a,t)&&(eu(t)>=l?(t[0]=a[0],t[2]=a[2]):o=!0);const u=[As(n[0],this.minX_,this.maxX_),As(n[1],this.minY_,this.maxY_)],f=this.toLonLatTransform_(u);isNaN(f[1])&&(f[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=As(f[0],this.minLon_,this.maxLon_),d=As(f[1],this.minLat_,this.maxLat_);const h=this.maxLines_;let p,g,v,y,b=t;o||(b=[As(t[0],this.minX_,this.maxX_),As(t[1],this.minY_,this.maxY_),As(t[2],this.minX_,this.maxX_),As(t[3],this.minY_,this.maxY_)]);const w=Vv(b,this.toLonLatTransform_,void 0,8);let E=w[3],A=w[2],T=w[1],D=w[0];if(o||(uv(b,this.bottomLeft_)&&(D=this.minLon_,T=this.minLat_),uv(b,this.bottomRight_)&&(A=this.maxLon_,T=this.minLat_),uv(b,this.topLeft_)&&(D=this.minLon_,E=this.maxLat_),uv(b,this.topRight_)&&(A=this.maxLon_,E=this.maxLat_),E=As(E,d,this.maxLat_),A=As(A,c,this.maxLon_),T=As(T,this.minLat_,d),D=As(D,this.minLon_,c)),c=Math.floor(c/s)*s,y=As(c,this.minLon_,this.maxLon_),g=this.addMeridian_(y,T,E,i,t,0),p=0,o)for(;(y-=s)>=D&&p++<h;)g=this.addMeridian_(y,T,E,i,t,g);else for(;y!=this.minLon_&&p++<h;)y=Math.max(y-s,this.minLon_),g=this.addMeridian_(y,T,E,i,t,g);if(y=As(c,this.minLon_,this.maxLon_),p=0,o)for(;(y+=s)<=A&&p++<h;)g=this.addMeridian_(y,T,E,i,t,g);else for(;y!=this.maxLon_&&p++<h;)y=Math.min(y+s,this.maxLon_),g=this.addMeridian_(y,T,E,i,t,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),d=Math.floor(d/s)*s,v=As(d,this.minLat_,this.maxLat_),g=this.addParallel_(v,D,A,i,t,0),p=0;v!=this.minLat_&&p++<h;)v=Math.max(v-s,this.minLat_),g=this.addParallel_(v,D,A,i,t,g);for(v=As(d,this.minLat_,this.maxLat_),p=0;v!=this.maxLat_&&p++<h;)v=Math.min(v+s,this.maxLat_),g=this.addParallel_(v,D,A,i,t,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(t){const n=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let i=-1;const s=Math.pow(this.targetSize_*t,2),o=[],a=[];for(let l=0,u=this.intervals_.length;l<u;++l){const f=As(this.intervals_[l]/2,0,90),c=As(r,-90+f,90-f);if(o[0]=n-f,o[1]=c-f,a[0]=n+f,a[1]=c+f,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;i=this.intervals_[l]}return i}getMeridian_(t,n,r,i,s){const o=Kqe(t,n,r,this.projection_,i);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new Ff(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(t,n,r){const i=t.getFlatCoordinates();let s=1,o=i.length-1;i[s]>i[o]&&(s=o,o=1);const a=Math.max(n[1],i[s]),l=Math.min(n[3],i[o]),u=As(n[1]+Math.abs(n[1]-n[3])*this.lonLabelPosition_,a,l),c=[i[s-1]+(i[o-1]-i[s-1])*(u-i[s])/(i[o]-i[s]),u],d=this.meridiansLabels_[r].geom;return d.setCoordinates(c),d}getMeridians(){return this.meridians_}getParallel_(t,n,r,i,s){const o=Jqe(t,n,r,this.projection_,i);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new Ff(o,"XY"),a}getParallelPoint_(t,n,r){const i=t.getFlatCoordinates();let s=0,o=i.length-2;i[s]>i[o]&&(s=o,o=0);const a=Math.max(n[0],i[s]),l=Math.min(n[2],i[o]),u=As(n[0]+Math.abs(n[0]-n[2])*this.latLabelPosition_,a,l),f=i[s+1]+(i[o+1]-i[s+1])*(u-i[s])/(i[o]-i[s]),c=[u,f],d=this.parallelsLabels_[r].geom;return d.setCoordinates(c),d}getParallels(){return this.parallels_}updateProjectionInfo_(t){const n=oi("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const i=o3(t,n);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,u){u=u||2;const f=i(a,l,u);for(let c=0,d=f.length;c<d;c+=u)f[c]<o&&(f[c]+=360);return f}}this.fromLonLatTransform_=o3(n,t);const s=Vv([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Dp(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}};class $I extends CCe{constructor(t,n,r,i,s){const o=s!==void 0?xg.IDLE:xg.LOADED;super(t,n,r,o),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=xg.ERROR):this.state=xg.LOADED,this.changed()}load(){this.state==xg.IDLE&&(this.state=xg.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const nHe={Point:oHe,LineString:aHe,Polygon:fHe,MultiPoint:uHe,MultiLineString:lHe,MultiPolygon:cHe},rHe={Point:dHe,LineString:hHe,Polygon:pHe,MultiPoint:gHe,MultiLineString:mHe,MultiPolygon:yHe};class iHe extends Zze{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,n,r){const i=t,s=i1e(i.geometry,n),o=new au;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),i.attributes){o.setProperties(i.attributes,!0);const a=i.attributes[r];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(t,n){if(n=n||{},t.features){const r=t,i=[],s=r.features;for(let o=0,a=s.length;o<a;++o)i.push(this.readFeatureFromObject(s[o],n,t.objectIdFieldName));return i}return[this.readFeatureFromObject(t,n)]}readGeometryFromObject(t,n){return i1e(t,n)}readProjectionFromObject(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){const r=t.spatialReference.wkid;return oi("EPSG:"+r)}return null}writeGeometryObject(t,n){return s1e(t,this.adaptOptions(n))}writeFeatureObject(t,n){n=this.adaptOptions(n);const r={};if(!t.hasProperties())return r.attributes={},r;const i=t.getProperties(),s=t.getGeometry();if(s){r.geometry=s1e(s,n);const o=n&&(n.dataProjection||n.featureProjection);o&&(r.geometry.spatialReference={wkid:Number(oi(o).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return Kze(i)?r.attributes={}:r.attributes=i,r}writeFeaturesObject(t,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=t.length;i<s;++i)r.push(this.writeFeatureObject(t[i],n));return{features:r}}}function i1e(e,t){if(!e)return null;let n;if(typeof e.x=="number"&&typeof e.y=="number")n="Point";else if(e.points)n="MultiPoint";else if(e.paths)e.paths.length===1?n="LineString":n="MultiLineString";else if(e.rings){const i=e,s=H1(i),o=sHe(i.rings,s);o.length===1?(n="Polygon",e=Object.assign({},e,{rings:o[0]})):(n="MultiPolygon",e=Object.assign({},e,{rings:o}))}const r=nHe[n];return Oo(r(e),!1,t)}function sHe(e,t){const n=[],r=[],i=[];let s,o;for(s=0,o=e.length;s<o;++s)n.length=0,Jze(n,0,e[s],t.length),Qze(n,0,n.length,t.length)?r.push([e[s]]):i.push(e[s]);for(;i.length;){const a=i.shift();let l=!1;for(s=r.length-1;s>=0;s--){const u=r[s][0];if(a3(new U4(u).getExtent(),new U4(a).getExtent())){r[s].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function oHe(e){let t;return e.m!==void 0&&e.z!==void 0?t=new mc([e.x,e.y,e.z,e.m],"XYZM"):e.z!==void 0?t=new mc([e.x,e.y,e.z],"XYZ"):e.m!==void 0?t=new mc([e.x,e.y,e.m],"XYM"):t=new mc([e.x,e.y]),t}function aHe(e){const t=H1(e);return new Ff(e.paths[0],t)}function lHe(e){const t=H1(e);return new N1(e.paths,t)}function H1(e){let t="XY";return e.hasZ===!0&&e.hasM===!0?t="XYZM":e.hasZ===!0?t="XYZ":e.hasM===!0&&(t="XYM"),t}function uHe(e){const t=H1(e);return new sD(e.points,t)}function cHe(e){const t=H1(e);return new eE(e.rings,t)}function fHe(e){const t=H1(e);return new tE(e.rings,t)}function dHe(e,t){const n=e.getCoordinates();let r;const i=e.getLayout();if(i==="XYZ")r={x:n[0],y:n[1],z:n[2]};else if(i==="XYM")r={x:n[0],y:n[1],m:n[2]};else if(i==="XYZM")r={x:n[0],y:n[1],z:n[2],m:n[3]};else if(i==="XY")r={x:n[0],y:n[1]};else throw new Error("Invalid geometry layout");return r}function iE(e){const t=e.getLayout();return{hasZ:t==="XYZ"||t==="XYZM",hasM:t==="XYM"||t==="XYZM"}}function hHe(e,t){const n=iE(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:[e.getCoordinates()]}}function pHe(e,t){const n=iE(e);return{hasZ:n.hasZ,hasM:n.hasM,rings:e.getCoordinates(!1)}}function mHe(e,t){const n=iE(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:e.getCoordinates()}}function gHe(e,t){const n=iE(e);return{hasZ:n.hasZ,hasM:n.hasM,points:e.getCoordinates()}}function yHe(e,t){const n=iE(e),r=e.getCoordinates(!1),i=[];for(let s=0;s<r.length;s++)for(let o=r[s].length-1;o>=0;o--)i.push(r[s][o]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}}function s1e(e,t){const n=rHe[e.getType()];return n(Oo(e,!0,t),t)}const Vd="http://www.opengis.net/gml",vHe=/^\s*$/;class un extends oD{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:kn(this.readFeaturesInternal),featureMembers:Rn(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,n){const r=t.localName;let i=null;if(r=="FeatureCollection")i=Rt([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const s=n[0];let o=s.featureType,a=s.featureNS;const l="p",u="p0";if(!o&&t.childNodes){o=[],a={};for(let d=0,h=t.childNodes.length;d<h;++d){const p=t.childNodes[d];if(p.nodeType===1){const g=p.nodeName.split(":").pop();if(!o.includes(g)){let v="",y=0;const b=p.namespaceURI;for(const w in a){if(a[w]===b){v=w;break}++y}v||(v=l+y,a[v]=b),o.push(v+":"+g)}}}r!="featureMember"&&(s.featureType=o,s.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[u]=d}const f={},c=Array.isArray(o)?o:[o];for(const d in a){const h={};for(let p=0,g=c.length;p<g;++p)(c[p].includes(":")?c[p].split(":")[0]:u)===d&&(h[c[p].split(":").pop()]=r=="featureMembers"?kn(this.readFeatureElement,this):Rn(this.readFeatureElement,this));f[a[d]]=h}r=="featureMember"||r=="member"?i=Rt(void 0,f,t,n):i=Rt([],f,t,n)}return i===null&&(i=[]),i}readGeometryOrExtent(t,n){const r=n[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Rt(null,this.GEOMETRY_PARSERS,t,n,this)}readExtentElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?dI(i,r):void 0}readGeometryElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?Oo(i,!1,r):void 0}readFeatureElementInternal(t,n,r){let i;const s={};for(let l=t.firstElementChild;l;l=l.nextElementSibling){let u;const f=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=l3(l,!1),vHe.test(u)&&(u=void 0)):(r&&(u=f==="boundedBy"?this.readExtentElement(l,n):this.readGeometryElement(l,n)),u?f!=="boundedBy"&&(i=f):u=this.readFeatureElementInternal(l,n,!1));const c=l.attributes.length;if(c>0&&!(u instanceof eje)){u={_content_:u};for(let d=0;d<c;d++){const h=l.attributes[d].name;u[h]=l.attributes[d].value}}s[f]?(s[f]instanceof Array||(s[f]=[s[f]]),s[f].push(u)):s[f]=u}if(!r)return s;const o=new au(s);i&&o.setGeometryName(i);const a=t.getAttribute("fid")||tje(t,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(t,n){return this.readFeatureElementInternal(t,n,!0)}readPoint(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new mc(r,"XYZ")}readMultiPoint(t,n){const r=Rt([],this.MULTIPOINT_PARSERS,t,n,this);if(r)return new sD(r)}readMultiLineString(t,n){const r=Rt([],this.MULTILINESTRING_PARSERS,t,n,this);if(r)return new N1(r)}readMultiPolygon(t,n){const r=Rt([],this.MULTIPOLYGON_PARSERS,t,n,this);if(r)return new eE(r)}pointMemberParser(t,n){Lp(this.POINTMEMBER_PARSERS,t,n,this)}lineStringMemberParser(t,n){Lp(this.LINESTRINGMEMBER_PARSERS,t,n,this)}polygonMemberParser(t,n){Lp(this.POLYGONMEMBER_PARSERS,t,n,this)}readLineString(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new Ff(r,"XYZ")}readFlatLinearRing(t,n){const r=Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);if(r)return r}readLinearRing(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new U4(r,"XYZ")}readPolygon(t,n){const r=Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let o,a;for(o=1,a=r.length;o<a;++o)u3(i,r[o]),s.push(i.length);return new tE(i,"XYZ",s)}}readFlatCoordinatesFromNode(t,n){return Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}readGeometryFromNode(t,n){const r=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return r||null}readFeaturesFromNode(t,n){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[r])||[]}readProjectionFromNode(t){return oi(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}un.prototype.namespace=Vd;un.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:kn(un.prototype.pointMemberParser),pointMembers:kn(un.prototype.pointMemberParser)}};un.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:kn(un.prototype.lineStringMemberParser),lineStringMembers:kn(un.prototype.lineStringMemberParser)}};un.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:kn(un.prototype.polygonMemberParser),polygonMembers:kn(un.prototype.polygonMemberParser)}};un.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:kn(un.prototype.readFlatCoordinatesFromNode)}};un.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kn(un.prototype.readLineString)}};un.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kn(un.prototype.readPolygon)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing)}};const bHe=Vd+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",xHe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class hr extends un{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[Vd].featureMember=kn(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:bHe}readFlatCoordinates(t,n){const r=l3(t,!1).replace(/^\s*|\s*$/g,""),s=n[0].srsName;let o="enu";if(s){const u=oi(s);u&&(o=u.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let u=0,f=a.length;u<f;u++){const c=a[u].split(/,+/),d=parseFloat(c[0]),h=parseFloat(c[1]),p=c.length===3?parseFloat(c[2]):0;o.startsWith("en")?l.push(d,h,p):l.push(h,d,p)}return l}readBox(t,n){const r=Rt([null],this.BOX_PARSERS_,t,n,this);return kCe(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}outerBoundaryIsParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.multiSurface,o=i.surface,a=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),er("http://www.opengis.net/gml",r)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const s=r[r.length-1],o=s.featureNS,a=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const h=c[d];h!=null&&(l.push(d),u.push(h),d==a||typeof h.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=Ge(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=Ge(yr)))}}const f=Object.assign({},s);f.node=t,Oi(f,s.serializers,tu(void 0,o),u,r,l)}writeCurveOrLineString(t,n,r){const s=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&s&&t.setAttribute("srsName",s),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,n,r)}else if(t.nodeName==="Curve"){const o=er(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.curve;o&&t.setAttribute("srsName",o);const l=n.getLineStrings();Oi({node:t,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(t,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=t;let o;Array.isArray(n)?o=dI(n,i):o=Oo(n,!0,i),Oi(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}createCoordinatesNode_(t){const n=er(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n}writeCoordinates_(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=n.getCoordinates(),l=a.length,u=new Array(l);for(let f=0;f<l;++f){const c=a[f];u[f]=this.getCoords_(c,o,s)}yr(t,u.join(" "))}writeCurveSegments_(t,n,r){const i=er(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Oi({node:t,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=er(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),er(s.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,n,r){const i=er(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeRing(t,n,r){const i=er(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}getCoords_(t,n,r){let s=(n?oi(n).getAxisOrientation():"enu").startsWith("en")?t[0]+","+t[1]:t[1]+","+t[0];if(r){const o=t[2]||0;s+=","+o}return s}writePoint(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);const a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);const l=n.getCoordinates(),u=this.getCoords_(l,o,s);yr(a,u)}writeMultiPoint(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);const a=n.getPoints();Oi({node:t,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,tu("pointMember"),a,r,void 0,this)}writePointMember(t,n,r){const i=er(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLinearRing(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,n,r)}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.surface;o&&t.setAttribute("srsName",o);const l=n.getPolygons();Oi({node:t,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writeEnvelope(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Oi({node:t},this.ENVELOPE_SERIALIZERS,B1,a,r,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return er("http://www.opengis.net/gml",xHe[i.nodeName])}}hr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Rn(hr.prototype.readFlatCoordinates)}};hr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:hr.prototype.innerBoundaryIsParser,outerBoundaryIs:hr.prototype.outerBoundaryIsParser}};hr.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:kn(hr.prototype.readFlatCoordinates)}};hr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Box:Rn(hr.prototype.readBox)}};hr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(hr.prototype.writeCurveOrLineString),MultiCurve:Ge(hr.prototype.writeMultiCurveOrLineString),Point:Ge(hr.prototype.writePoint),MultiPoint:Ge(hr.prototype.writeMultiPoint),LineString:Ge(hr.prototype.writeCurveOrLineString),MultiLineString:Ge(hr.prototype.writeMultiCurveOrLineString),LinearRing:Ge(hr.prototype.writeLinearRing),Polygon:Ge(hr.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(hr.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(hr.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(hr.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(hr.prototype.writeEnvelope)}};hr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(hr.prototype.writeLineStringOrCurveMember),curveMember:Ge(hr.prototype.writeLineStringOrCurveMember)}};hr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Ge(hr.prototype.writeRing),innerBoundaryIs:Ge(hr.prototype.writeRing)}};hr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(hr.prototype.writePointMember)}};hr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(hr.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(hr.prototype.writeSurfaceOrPolygonMember)}};hr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};const wHe=Vd+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",_He={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class bt extends un{constructor(t){t=t||{},super(t),this.surface_=t.surface!==void 0?t.surface:!1,this.curve_=t.curve!==void 0?t.curve:!1,this.multiCurve_=t.multiCurve!==void 0?t.multiCurve:!0,this.multiSurface_=t.multiSurface!==void 0?t.multiSurface:!0,this.schemaLocation=t.schemaLocation?t.schemaLocation:wHe,this.hasZ=t.hasZ!==void 0?t.hasZ:!1}readMultiCurve(t,n){const r=Rt([],this.MULTICURVE_PARSERS,t,n,this);if(r)return new N1(r)}readFlatCurveRing(t,n){const r=Rt([],this.MULTICURVE_PARSERS,t,n,this),i=[];for(let s=0,o=r.length;s<o;++s)u3(i,r[s].getFlatCoordinates());return i}readMultiSurface(t,n){const r=Rt([],this.MULTISURFACE_PARSERS,t,n,this);if(r)return new eE(r)}curveMemberParser(t,n){Lp(this.CURVEMEMBER_PARSERS,t,n,this)}surfaceMemberParser(t,n){Lp(this.SURFACEMEMBER_PARSERS,t,n,this)}readPatch(t,n){return Rt([null],this.PATCHES_PARSERS,t,n,this)}readSegment(t,n){return Rt([],this.SEGMENTS_PARSERS,t,n,this)}readPolygonPatch(t,n){return Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)}readLineStringSegment(t,n){return Rt([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}interiorParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}exteriorParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}readSurface(t,n){const r=Rt([null],this.SURFACE_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let o,a;for(o=1,a=r.length;o<a;++o)u3(i,r[o]),s.push(i.length);return new tE(i,"XYZ",s)}}readCurve(t,n){const r=Rt([null],this.CURVE_PARSERS,t,n,this);if(r)return new Ff(r,"XYZ")}readEnvelope(t,n){const r=Rt([null],this.ENVELOPE_PARSERS,t,n,this);return kCe(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(t,n){let r=l3(t,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let o;for(;o=i.exec(r);)s.push(parseFloat(o[1])),r=r.substr(o[0].length);if(r!=="")return;const l=n[0].srsName;if((l?oi(l).getAxisOrientation():"enu")==="neu")for(let c=0,d=s.length;c<d;c+=3){const h=s[c],p=s[c+1];s[c]=p,s[c+1]=h}const f=s.length;if(f==2&&s.push(0),f!==0)return s}readFlatPosList(t,n){const r=l3(t,!1).replace(/^\s*|\s*$/g,""),i=n[0],s=i.srsName,o=i.srsDimension,a=s?oi(s).getAxisOrientation():"enu",l=r.split(/\s+/);let u=2;t.getAttribute("srsDimension")?u=mp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?u=mp(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?u=mp(t.parentNode.getAttribute("srsDimension")):o&&(u=mp(o));const f=a.startsWith("en");let c,d,h;const p=[];for(let g=0,v=l.length;g<v;g+=u)c=parseFloat(l[g]),d=parseFloat(l[g+1]),h=u===3?parseFloat(l[g+2]):0,f?p.push(c,d,h):p.push(d,c,h);return p}writePos_(t,n,r){const i=r[r.length-1],s=i.hasZ,o=s?"3":"2";t.setAttribute("srsDimension",o);const a=i.srsName,l=a?oi(a).getAxisOrientation():"enu",u=n.getCoordinates();let f=l.startsWith("en")?u[0]+" "+u[1]:u[1]+" "+u[0];if(s){const c=u[2]||0;f+=" "+c}yr(t,f)}getCoords_(t,n,r){let s=(n?oi(n).getAxisOrientation():"enu").startsWith("en")?t[0]+" "+t[1]:t[1]+" "+t[0];if(r){const o=t[2]||0;s+=" "+o}return s}writePosList_(t,n,r){const i=r[r.length-1],s=i.hasZ,o=s?"3":"2";t.setAttribute("srsDimension",o);const a=i.srsName,l=n.getCoordinates(),u=l.length,f=new Array(u);let c;for(let d=0;d<u;++d)c=l[d],f[d]=this.getCoords_(c,a,s);yr(t,f.join(" "))}writePoint(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=er(t.namespaceURI,"pos");t.appendChild(o),this.writePos_(o,n,r)}writeEnvelope(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Oi({node:t},this.ENVELOPE_SERIALIZERS,B1,a,r,o,this)}writeLinearRing(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=er(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,n,r)}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),er(s.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Oi({node:t,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=er(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}writeCurveOrLineString(t,n,r){const s=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&s&&t.setAttribute("srsName",s),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=er(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,n,r)}else if(t.nodeName==="Curve"){const o=er(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.surface;o&&t.setAttribute("srsName",o);const l=n.getPolygons();Oi({node:t,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(t,n,r){const i=r[r.length-1],s=i.srsName,o=i.hasZ;s&&t.setAttribute("srsName",s);const a=n.getPoints();Oi({node:t,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,tu("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.curve;o&&t.setAttribute("srsName",o);const l=n.getLineStrings();Oi({node:t,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(t,n,r){const i=er(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writePointMember(t,n,r){const i=er(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeSurfacePatches_(t,n,r){const i=er(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeCurveSegments_(t,n,r){const i=er(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeGeometryElement(t,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=t;let o;Array.isArray(n)?o=dI(n,i):o=Oo(n,!0,i),Oi(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const s=r[r.length-1],o=s.featureNS,a=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const h=c[d];h!=null&&(l.push(d),u.push(h),d==a||typeof h.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=Ge(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=Ge(yr)))}}const f=Object.assign({},s);f.node=t,Oi(f,s.serializers,tu(void 0,o),u,r,l)}writeFeatureMembers_(t,n,r){const i=r[r.length-1],s=i.featureType,o=i.featureNS,a={};a[o]={},a[o][s]=Ge(this.writeFeatureElement,this);const l=Object.assign({},i);l.node=t,Oi(l,a,tu(s,o),n,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return er(this.namespace,_He[i.nodeName])}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.multiSurface,o=i.surface,a=i.curve,l=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),er(this.namespace,r)}writeGeometryNode(t,n){n=this.adaptOptions(n);const r=er(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return n&&Object.assign(i,n),this.writeGeometryElement(r,t,[i]),r}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=er(this.namespace,"featureMembers");r.setAttributeNS(G_,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return n&&Object.assign(i,n),this.writeFeatureMembers_(r,t,[i]),r}}bt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Rn(bt.prototype.readFlatPos),posList:Rn(bt.prototype.readFlatPosList),coordinates:Rn(hr.prototype.readFlatCoordinates)}};bt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:bt.prototype.interiorParser,exterior:bt.prototype.exteriorParser}};bt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(bt.prototype.readSurface),MultiSurface:Rn(bt.prototype.readMultiSurface),Curve:Rn(bt.prototype.readCurve),MultiCurve:Rn(bt.prototype.readMultiCurve),Envelope:Rn(bt.prototype.readEnvelope)}};bt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:kn(bt.prototype.curveMemberParser),curveMembers:kn(bt.prototype.curveMemberParser)}};bt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:kn(bt.prototype.surfaceMemberParser),surfaceMembers:kn(bt.prototype.surfaceMemberParser)}};bt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kn(un.prototype.readLineString),Curve:kn(bt.prototype.readCurve)}};bt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kn(un.prototype.readPolygon),Surface:kn(bt.prototype.readSurface)}};bt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Rn(bt.prototype.readPatch)}};bt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Rn(bt.prototype.readSegment)}};bt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:kn(bt.prototype.readFlatPosList),upperCorner:kn(bt.prototype.readFlatPosList)}};bt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Rn(bt.prototype.readPolygonPatch)}};bt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:TCe(bt.prototype.readLineStringSegment)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(bt.prototype.readFlatCurveRing)}};bt.prototype.writeFeatures;bt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Ge(bt.prototype.writeRing),interior:Ge(bt.prototype.writeRing)}};bt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};bt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(bt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(bt.prototype.writeSurfaceOrPolygonMember)}};bt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(bt.prototype.writePointMember)}};bt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(bt.prototype.writeLineStringOrCurveMember),curveMember:Ge(bt.prototype.writeLineStringOrCurveMember)}};bt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(bt.prototype.writeCurveOrLineString),MultiCurve:Ge(bt.prototype.writeMultiCurveOrLineString),Point:Ge(bt.prototype.writePoint),MultiPoint:Ge(bt.prototype.writeMultiPoint),LineString:Ge(bt.prototype.writeCurveOrLineString),MultiLineString:Ge(bt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(bt.prototype.writeLinearRing),Polygon:Ge(bt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(bt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(bt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(bt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(bt.prototype.writeEnvelope)}};const II=bt;II.prototype.writeFeatures;II.prototype.writeFeaturesNode;const os=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],EHe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",SHe={rte:E3e,trk:S3e,wpt:A3e},AHe=Xt(os,{rte:kn(E3e),trk:kn(S3e),wpt:kn(A3e)}),CHe=Xt(os,{text:Ue(Dt,"linkText"),type:Ue(Dt,"linkType")}),kHe=Xt(os,{name:Ue(Dt),email:eGe,link:sE}),THe=Xt(os,{name:Ue(Dt),desc:Ue(Dt),author:Ue(KHe),copyright:Ue(JHe),link:sE,time:Ue(aD),keywords:Ue(Dt),bounds:QHe,extensions:xD}),DHe=Xt(os,{year:Ue(Ds),license:Ue(Dt)}),LHe=Xt(os,{rte:Ge(iGe),trk:Ge(sGe),wpt:Ge(aGe)});class RHe extends oD{constructor(t){super(),t=t||{},this.dataProjection=oi("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let n=0,r=t.length;n<r;++n){const i=t[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(t){return t?typeof t=="string"?this.readMetadataFromDocument(c3(t)):f3(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(t){if(!os.includes(t.namespaceURI))return null;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(os.includes(n.namespaceURI)&&n.localName==="metadata")return Rt({},THe,n,[]);return null}readFeatureFromNode(t,n){if(!os.includes(t.namespaceURI))return null;const r=SHe[t.localName];if(!r)return null;const i=r(t,[this.getReadOptions(t,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(t,n){if(!os.includes(t.namespaceURI))return[];if(t.localName=="gpx"){const r=Rt([],AHe,t,[this.getReadOptions(t,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=er("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",G_),r.setAttributeNS(G_,"xsi:schemaLocation",EHe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Oi({node:r},LHe,ZHe,t,[n]),r}}const FHe=Xt(os,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:sE,number:Ue(Ds),extensions:xD,type:Ue(Dt),rtept:tGe}),OHe=Xt(os,{ele:Ue(Ea),time:Ue(aD)}),MHe=Xt(os,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:sE,number:Ue(Ds),type:Ue(Dt),extensions:xD,trkseg:rGe}),$He=Xt(os,{trkpt:nGe}),IHe=Xt(os,{ele:Ue(Ea),time:Ue(aD)}),PHe=Xt(os,{ele:Ue(Ea),time:Ue(aD),magvar:Ue(Ea),geoidheight:Ue(Ea),name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:sE,sym:Ue(Dt),type:Ue(Dt),fix:Ue(Dt),sat:Ue(Ds),hdop:Ue(Ea),vdop:Ue(Ea),pdop:Ue(Ea),ageofdgpsdata:Ue(Ea),dgpsid:Ue(Ds),extensions:xD}),NHe=["text","type"],BHe=Xt(os,{text:Ge(yr),type:Ge(yr)}),zHe=Xt(os,["name","cmt","desc","src","link","number","type","rtept"]),jHe=Xt(os,{name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(BI),number:Ge(d3),type:Ge(yr),rtept:DCe(Ge(zI))}),UHe=Xt(os,["ele","time"]),qHe=Xt(os,["name","cmt","desc","src","link","number","type","trkseg"]),HHe=Xt(os,{name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(BI),number:Ge(d3),type:Ge(yr),trkseg:DCe(Ge(oGe))}),GHe=tu("trkpt"),VHe=Xt(os,{trkpt:Ge(zI)}),WHe=Xt(os,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),YHe=Xt(os,{ele:Ge(eg),time:Ge(nje),magvar:Ge(eg),geoidheight:Ge(eg),name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(BI),sym:Ge(yr),type:Ge(yr),fix:Ge(yr),sat:Ge(d3),hdop:Ge(eg),vdop:Ge(eg),pdop:Ge(eg),ageofdgpsdata:Ge(eg),dgpsid:Ge(d3)}),XHe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function ZHe(e,t,n){const r=e.getGeometry();if(r){const i=XHe[r.getType()];if(i){const s=t[t.length-1].node;return er(s.namespaceURI,i)}}}function PI(e,t,n,r){return e.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(e.push(r.ele),delete r.ele,t.hasZ=!0):e.push(0),"time"in r?(e.push(r.time),delete r.time,t.hasM=!0):e.push(0),e}function NI(e,t,n){let r="XY",i=2;if(e.hasZ&&e.hasM?(r="XYZM",i=4):e.hasZ?(r="XYZ",i=3):e.hasM&&(r="XYM",i=3),i!==4){for(let s=0,o=t.length/4;s<o;s++)t[s*i]=t[s*4],t[s*i+1]=t[s*4+1],e.hasZ&&(t[s*i+2]=t[s*4+2]),e.hasM&&(t[s*i+2]=t[s*4+3]);if(t.length=t.length/4*i,n)for(let s=0,o=n.length;s<o;s++)n[s]=n[s]/4*i}return r}function KHe(e,t){const n=Rt({},kHe,e,t);if(n)return n}function JHe(e,t){const n=Rt({},DHe,e,t);if(n){const r=e.getAttribute("author");return r!==null&&(n.author=r),n}}function QHe(e,t){const n=t[t.length-1],r=e.getAttribute("minlat"),i=e.getAttribute("minlon"),s=e.getAttribute("maxlat"),o=e.getAttribute("maxlon");i!==null&&r!==null&&o!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function eGe(e,t){const n=t[t.length-1],r=e.getAttribute("id"),i=e.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function sE(e,t){const n=t[t.length-1],r=e.getAttribute("href");r!==null&&(n.link=r),Lp(CHe,e,t)}function xD(e,t){const n=t[t.length-1];n.extensionsNode_=e}function tGe(e,t){const n=Rt({},OHe,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,s=r.layoutOptions;PI(i,s,e,n)}}function nGe(e,t){const n=Rt({},IHe,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,s=r.layoutOptions;PI(i,s,e,n)}}function rGe(e,t){const n=t[t.length-1];Lp($He,e,t);const r=n.flatCoordinates;n.ends.push(r.length)}function E3e(e,t){const n=t[0],r=Rt({flatCoordinates:[],layoutOptions:{}},FHe,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=NI(s,i),a=new Ff(i,o);Oo(a,!1,n);const l=new au(a);return l.setProperties(r,!0),l}function S3e(e,t){const n=t[0],r=Rt({flatCoordinates:[],ends:[],layoutOptions:{}},MHe,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=NI(o,i,s),l=new N1(i,a,s);Oo(l,!1,n);const u=new au(l);return u.setProperties(r,!0),u}function A3e(e,t){const n=t[0],r=Rt({},PHe,e,t);if(!r)return;const i={},s=PI([],i,e,r),o=NI(i,s),a=new mc(s,o);Oo(a,!1,n);const l=new au(a);return l.setProperties(r,!0),l}function BI(e,t,n){e.setAttribute("href",t);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];Oi({node:e},BHe,B1,s,n,NHe)}function zI(e,t,n){const r=n[n.length-1],s=r.node.namespaceURI,o=r.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),r.geometryLayout){case"XYZM":t[3]!==0&&(o.time=t[3]);case"XYZ":t[2]!==0&&(o.ele=t[2]);break;case"XYM":t[2]!==0&&(o.time=t[2]);break}const l=e.nodeName=="rtept"?UHe[s]:WHe[s],u=hI(o,l);Oi({node:e,properties:o},YHe,B1,u,n,l)}function iGe(e,t,n){const r=n[0],i=t.getProperties(),s={node:e};s.properties=i;const o=t.getGeometry();if(o.getType()=="LineString"){const f=Oo(o,!0,r);s.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}const a=n[n.length-1].node,l=zHe[a.namespaceURI],u=hI(i,l);Oi(s,jHe,B1,u,n,l)}function sGe(e,t,n){const r=n[0],i=t.getProperties(),s={node:e};s.properties=i;const o=t.getGeometry();if(o.getType()=="MultiLineString"){const f=Oo(o,!0,r);i.trkseg=f.getLineStrings()}const a=n[n.length-1].node,l=qHe[a.namespaceURI],u=hI(i,l);Oi(s,HHe,B1,u,n,l)}function oGe(e,t,n){const r={node:e};r.geometryLayout=t.getLayout(),r.properties={},Oi(r,VHe,GHe,t.getCoordinates(),n)}function aGe(e,t,n){const r=n[0],i=n[n.length-1];i.properties=t.getProperties();const s=t.getGeometry();if(s.getType()=="Point"){const o=Oo(s,!0,r);i.geometryLayout=o.getLayout(),zI(e,o.getCoordinates(),n)}}class jI extends LCe{constructor(){super()}getType(){return"text"}readFeature(t,n){return this.readFeatureFromText(XS(t),this.adaptOptions(n))}readFeatureFromText(t,n){return Td()}readFeatures(t,n){return this.readFeaturesFromText(XS(t),this.adaptOptions(n))}readFeaturesFromText(t,n){return Td()}readGeometry(t,n){return this.readGeometryFromText(XS(t),this.adaptOptions(n))}readGeometryFromText(t,n){return Td()}readProjection(t){return this.readProjectionFromText(XS(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,n){return this.writeFeatureText(t,this.adaptOptions(n))}writeFeatureText(t,n){return Td()}writeFeatures(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))}writeFeaturesText(t,n){return Td()}writeGeometry(t,n){return this.writeGeometryText(t,this.adaptOptions(n))}writeGeometryText(t,n){return Td()}}function XS(e){return typeof e=="string"?e:""}const lGe=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,uGe=/^H.([A-Z]{3}).*?:(.*)/,cGe=/^HFDTE(\d{2})(\d{2})(\d{2})/,fGe=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,dGe=/\r\n|\r|\n/;class hGe extends jI{constructor(t){super(),t=t||{},this.dataProjection=oi("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(t,n){const r=this.altitudeMode_,i=t.split(dGe),s={},o=[];let a=2e3,l=0,u=1,f=-1,c,d;for(c=0,d=i.length;c<d;++c){const v=i[c];let y;if(v.charAt(0)=="B"){if(y=lGe.exec(v),y){const b=parseInt(y[1],10),w=parseInt(y[2],10),E=parseInt(y[3],10);let A=parseInt(y[4],10)+parseInt(y[5],10)/6e4;this.lad_&&(A+=parseInt(v.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),y[6]=="S"&&(A=-A);let T=parseInt(y[7],10)+parseInt(y[8],10)/6e4;if(this.lod_&&(T+=parseInt(v.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),y[9]=="W"&&(T=-T),o.push(T,A),r!="none"){let k;r=="gps"?k=parseInt(y[11],10):r=="barometric"?k=parseInt(y[12],10):k=0,o.push(k)}let D=Date.UTC(a,l,u,b,w,E);D<f&&(D=Date.UTC(a,l,u+1,b,w,E)),o.push(D/1e3),f=D}}else if(v.charAt(0)=="H")y=fGe.exec(v),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=cGe.exec(v),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=uGe.exec(v),y&&(s[y[1]]=y[2].trim())));else if(v.charAt(0)=="I"){const b=parseInt(v.slice(1,3),10);for(let w=0;w<b;w++){const E=v.slice(7+w*7,10+w*7);if(E==="LAD"||E==="LOD"){const A=parseInt(v.slice(3+w*7,5+w*7),10)-1,T=parseInt(v.slice(5+w*7,7+w*7),10);E==="LAD"?(this.lad_=!0,this.ladStart_=A,this.ladStop_=T):E==="LOD"&&(this.lod_=!0,this.lodStart_=A,this.lodStop_=T)}}}}if(o.length===0)return null;const h=r=="none"?"XYM":"XYZM",p=new Ff(o,h),g=new au(Oo(p,!1,n));return g.setProperties(s,!0),g}readFeaturesFromText(t,n){const r=this.readFeatureFromText(t,n);return r?[r]:[]}}const Zs={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},Qg={};Qg[Zs.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};Qg[Zs.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};Qg[Zs.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};Qg.none={none:{supports:[],formats:[],qualities:[]}};const pGe=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,o1e=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,mGe=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function gGe(e){let t=e.getComplianceLevelSupportedFeatures();return t===void 0&&(t=Qg[Zs.VERSION1].level0),{url:e.imageInfo["@id"]===void 0?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[...t.formats,e.imageInfo.formats===void 0?[]:e.imageInfo.formats],qualities:[...t.qualities,e.imageInfo.qualities===void 0?[]:e.imageInfo.qualities],resolutions:e.imageInfo.scale_factors,tileSize:e.imageInfo.tile_width!==void 0?e.imageInfo.tile_height!==void 0?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:e.imageInfo.tile_height!=null?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}}function yGe(e){const t=e.getComplianceLevelSupportedFeatures(),n=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,r=n&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],i=n&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],s=n&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(o){return o.width})[0],e.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...t.supports,...r],formats:[...t.formats,...i],qualities:[...t.qualities,...s]}}function vGe(e){const t=e.getComplianceLevelSupportedFeatures(),n=e.imageInfo.extraFormats===void 0?t.formats:[...t.formats,...e.imageInfo.extraFormats],r=e.imageInfo.preferredFormats!==void 0&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter(function(i){return["jpg","png","gif"].includes(i)}).reduce(function(i,s){return i===void 0&&n.includes(s)?s:i},void 0):void 0;return{url:e.imageInfo.id,sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(i){return[i.width,i.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(i){return i.width})[0],e.imageInfo.tiles.map(function(i){return i.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(i){return i.scaleFactors})[0],supports:e.imageInfo.extraFeatures===void 0?t.supports:[...t.supports,...e.imageInfo.extraFeatures],formats:n,qualities:e.imageInfo.extraQualities===void 0?t.qualities:[...t.qualities,...e.imageInfo.extraQualities],preferredFormat:r}}const wD={};wD[Zs.VERSION1]=gGe;wD[Zs.VERSION2]=yGe;wD[Zs.VERSION3]=vGe;class bGe{constructor(t){this.setImageInfo(t)}setImageInfo(t){typeof t=="string"?this.imageInfo=JSON.parse(t):this.imageInfo=t}getImageApiVersion(){if(this.imageInfo===void 0)return;let t=this.imageInfo["@context"]||"ol-no-context";typeof t=="string"&&(t=[t]);for(let n=0;n<t.length;n++)switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Zs.VERSION1;case"http://iiif.io/api/image/2/context.json":return Zs.VERSION2;case"http://iiif.io/api/image/3/context.json":return Zs.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Zs.VERSION1)&&this.imageInfo.identifier)return Zs.VERSION1;break}kc(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(t){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(t===void 0&&(t=this.getImageApiVersion()),t){case Zs.VERSION1:if(pGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Zs.VERSION3:if(mGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Zs.VERSION2:if(typeof this.imageInfo.profile=="string"&&o1e.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&o1e.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(t){const n=this.getComplianceLevelEntryFromProfile(t);if(n===void 0)return;const r=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return n===void 0?Qg.none.none:Qg[t][n]}getTileSourceOptions(t){const n=t||{},r=this.getImageApiVersion();if(r===void 0)return;const i=r===void 0?void 0:wD[r](this);if(i!==void 0)return{url:i.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:n.format!==void 0&&i.formats.includes(n.format)?n.format:i.preferredFormat!==void 0?i.preferredFormat:"jpg",supports:i.supports,quality:n.quality&&i.qualities.includes(n.quality)?n.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort(function(s,o){return o-s}):void 0,tileSize:i.tileSize}}}class UI{read(t){if(!t)return null;if(typeof t=="string"){const n=c3(t);return this.readFromDocument(n)}return f3(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null}readFromNode(t){Td()}}const xGe="http://www.w3.org/1999/xlink";function G1(e){return e.getAttributeNS(xGe,"href")}const Bl=[null,"http://www.opengis.net/ows/1.1"],wGe=Xt(Bl,{ServiceIdentification:Ue(GGe),ServiceProvider:Ue(WGe),OperationsMetadata:Ue(qGe)});class C3e extends UI{constructor(){super()}readFromNode(t){const n=Rt({},wGe,t,[]);return n||null}}const _Ge=Xt(Bl,{DeliveryPoint:Ue(Dt),City:Ue(Dt),AdministrativeArea:Ue(Dt),PostalCode:Ue(Dt),Country:Ue(Dt),ElectronicMailAddress:Ue(Dt)}),EGe=Xt(Bl,{Value:mi(YGe)}),SGe=Xt(Bl,{AllowedValues:Ue(IGe)}),AGe=Xt(Bl,{Phone:Ue(HGe),Address:Ue($Ge)}),CGe=Xt(Bl,{HTTP:Ue(jGe)}),kGe=Xt(Bl,{Get:mi(zGe),Post:void 0}),TGe=Xt(Bl,{DCP:Ue(BGe)}),DGe=Xt(Bl,{Operation:UGe}),LGe=Xt(Bl,{Voice:Ue(Dt),Facsimile:Ue(Dt)}),RGe=Xt(Bl,{Constraint:mi(PGe)}),FGe=Xt(Bl,{IndividualName:Ue(Dt),PositionName:Ue(Dt),ContactInfo:Ue(NGe)}),OGe=Xt(Bl,{Abstract:Ue(Dt),AccessConstraints:Ue(Dt),Fees:Ue(Dt),Title:Ue(Dt),ServiceTypeVersion:Ue(Dt),ServiceType:Ue(Dt)}),MGe=Xt(Bl,{ProviderName:Ue(Dt),ProviderSite:Ue(G1),ServiceContact:Ue(VGe)});function $Ge(e,t){return Rt({},_Ge,e,t)}function IGe(e,t){return Rt({},EGe,e,t)}function PGe(e,t){const n=e.getAttribute("name");if(n)return Rt({name:n},SGe,e,t)}function NGe(e,t){return Rt({},AGe,e,t)}function BGe(e,t){return Rt({},CGe,e,t)}function zGe(e,t){const n=G1(e);if(n)return Rt({href:n},RGe,e,t)}function jGe(e,t){return Rt({},kGe,e,t)}function UGe(e,t){const n=e.getAttribute("name"),r=Rt({},TGe,e,t);if(!r)return;const i=t[t.length-1];i[n]=r}function qGe(e,t){return Rt({},DGe,e,t)}function HGe(e,t){return Rt({},LGe,e,t)}function GGe(e,t){return Rt({},OGe,e,t)}function VGe(e,t){return Rt({},FGe,e,t)}function WGe(e,t){return Rt({},MGe,e,t)}function YGe(e,t){return Dt(e)}function a1e(e,t,n,r,i,s){i!==void 0?(i=i,s=s!==void 0?s:0):(i=[],s=0);let o=t;for(;o<n;){const a=e[o++];i[s++]=e[o++],i[s++]=a;for(let l=2;l<r;++l)i[s++]=e[o++]}return i.length=s,i}class XGe extends jI{constructor(t){super(),t=t||{},this.dataProjection=oi("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n);return new au(r)}readFeaturesFromText(t,n){return[this.readFeatureFromText(t,n)]}readGeometryFromText(t,n){const r=rje(this.geometryLayout_),i=KGe(t,r,this.factor_);a1e(i,0,i.length,r,i);const s=ije(i,0,i.length,r),o=new Ff(s,this.geometryLayout_);return Oo(o,!1,this.adaptOptions(n))}writeFeatureText(t,n){const r=t.getGeometry();if(r)return this.writeGeometryText(r,n);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(t,n){return this.writeFeatureText(t[0],n)}writeGeometryText(t,n){t=Oo(t,!0,this.adaptOptions(n));const r=t.getFlatCoordinates(),i=t.getStride();return a1e(r,0,r.length,i,r),ZGe(r,i,this.factor_)}}function ZGe(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;for(let s=0,o=e.length;s<o;)for(r=0;r<t;++r,++s){const a=e[s],l=a-i[r];i[r]=a,e[s]=l}return JGe(e,n)}function KGe(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;const s=QGe(e,n);for(let o=0,a=s.length;o<a;)for(r=0;r<t;++r,++o)i[r]+=s[o],s[o]=i[r];return s}function JGe(e,t){t=t||1e5;for(let n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*t);return eVe(e)}function QGe(e,t){t=t||1e5;const n=tVe(e);for(let r=0,i=n.length;r<i;++r)n[r]/=t;return n}function eVe(e){for(let t=0,n=e.length;t<n;++t){const r=e[t];e[t]=r<0?~(r<<1):r<<1}return nVe(e)}function tVe(e){const t=rVe(e);for(let n=0,r=t.length;n<r;++n){const i=t[n];t[n]=i&1?~(i>>1):i>>1}return t}function nVe(e){let t="";for(let n=0,r=e.length;n<r;++n)t+=iVe(e[n]);return t}function rVe(e){const t=[];let n=0,r=0;for(let i=0,s=e.length;i<s;++i){const o=e.charCodeAt(i)-63;n|=(o&31)<<r,o<32?(t.push(n),n=0,r=0):r+=5}return t}function iVe(e){let t,n="";for(;e>=32;)t=(32|e&31)+63,n+=String.fromCharCode(t),e>>=5;return t=e+63,n+=String.fromCharCode(t),n}class Yr extends bt{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,n,r){const i=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(t,n,r)}}Yr.prototype.namespace="http://www.opengis.net/gml/3.2";Yr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Rn(bt.prototype.readFlatPos),posList:Rn(bt.prototype.readFlatPosList),coordinates:Rn(hr.prototype.readFlatCoordinates)}};Yr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:bt.prototype.interiorParser,exterior:bt.prototype.exteriorParser}};Yr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(Yr.prototype.readSurface),MultiSurface:Rn(bt.prototype.readMultiSurface),Curve:Rn(Yr.prototype.readCurve),MultiCurve:Rn(bt.prototype.readMultiCurve),Envelope:Rn(Yr.prototype.readEnvelope)}};Yr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:kn(bt.prototype.curveMemberParser),curveMembers:kn(bt.prototype.curveMemberParser)}};Yr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:kn(bt.prototype.surfaceMemberParser),surfaceMembers:kn(bt.prototype.surfaceMemberParser)}};Yr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kn(un.prototype.readLineString),Curve:kn(bt.prototype.readCurve)}};Yr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kn(un.prototype.readPolygon),Surface:kn(bt.prototype.readSurface)}};Yr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Rn(bt.prototype.readPatch)}};Yr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Rn(bt.prototype.readSegment)}};Yr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:kn(bt.prototype.readFlatPosList),upperCorner:kn(bt.prototype.readFlatPosList)}};Yr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Rn(bt.prototype.readPolygonPatch)}};Yr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:TCe(bt.prototype.readLineStringSegment)}};Yr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:kn(un.prototype.pointMemberParser),pointMembers:kn(un.prototype.pointMemberParser)}};Yr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:kn(un.prototype.lineStringMemberParser),lineStringMembers:kn(un.prototype.lineStringMemberParser)}};Yr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:kn(un.prototype.polygonMemberParser),polygonMembers:kn(un.prototype.polygonMemberParser)}};Yr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:kn(un.prototype.readFlatCoordinatesFromNode)}};Yr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kn(un.prototype.readLineString)}};Yr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kn(un.prototype.readPolygon)}};Yr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(Yr.prototype.readFlatCurveRing)}};Yr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Ge(bt.prototype.writeRing),interior:Ge(bt.prototype.writeRing)}};Yr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};Yr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ge(bt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(bt.prototype.writeSurfaceOrPolygonMember)}};Yr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Ge(bt.prototype.writePointMember)}};Yr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ge(bt.prototype.writeLineStringOrCurveMember),curveMember:Ge(bt.prototype.writeLineStringOrCurveMember)}};Yr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Ge(bt.prototype.writeCurveOrLineString),MultiCurve:Ge(bt.prototype.writeMultiCurveOrLineString),Point:Ge(Yr.prototype.writePoint),MultiPoint:Ge(bt.prototype.writeMultiPoint),LineString:Ge(bt.prototype.writeCurveOrLineString),MultiLineString:Ge(bt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(bt.prototype.writeLinearRing),Polygon:Ge(bt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(bt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(bt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(bt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(bt.prototype.writeEnvelope)}};let k3e=class{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}};class sVe extends k3e{constructor(t,n){super(t),this.conditions=n,kc(this.conditions.length>=2,"At least 2 conditions are required")}}let oVe=class extends sVe{constructor(t){super("And",Array.prototype.slice.call(arguments))}};class aVe extends k3e{constructor(t,n,r){if(super("BBOX"),this.geometryName=t,this.extent=n,n.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function lVe(e){const t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(oVe,t))}function uVe(e,t,n){return new aVe(e,t,n)}const l1e={"http://www.opengis.net/gml":{boundedBy:Ue(un.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:kn(un.prototype.readFeaturesInternal)}},cVe={"http://www.opengis.net/wfs":{totalInserted:Ue(Ds),totalUpdated:Ue(Ds),totalDeleted:Ue(Ds)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ue(Ds),totalUpdated:Ue(Ds),totalDeleted:Ue(Ds)}},fVe={"http://www.opengis.net/wfs":{TransactionSummary:Ue(c1e,"transactionSummary"),InsertResults:Ue(d1e,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ue(c1e,"transactionSummary"),InsertResults:Ue(d1e,"insertIds")}},dVe={"http://www.opengis.net/wfs":{PropertyName:Ge(yr)},"http://www.opengis.net/wfs/2.0":{PropertyName:Ge(yr)}},T3e={"http://www.opengis.net/wfs":{Insert:Ge(h1e),Update:Ge(m1e),Delete:Ge(p1e),Property:Ge(g1e),Native:Ge(y1e)},"http://www.opengis.net/wfs/2.0":{Insert:Ge(h1e),Update:Ge(m1e),Delete:Ge(p1e),Property:Ge(g1e),Native:Ge(y1e)}},D3e="feature",qI="http://www.w3.org/2000/xmlns/",HI={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},K4={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},GI={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},u1e={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},VI={"2.0.0":Yr,"1.1.0":bt,"1.0.0":hr},hVe="1.1.0";class pVe extends oD{constructor(t){super(),t=t||{},this.version_=t.version?t.version:hVe,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new VI[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:u1e[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,n){const r={node:t};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(t,n||{}));const i=[r];let s;this.version_==="2.0.0"?s=l1e:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=Rt([],s,t,i,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(t){if(t){if(typeof t=="string"){const n=c3(t);return this.readTransactionResponseFromDocument(n)}return f3(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if(typeof t=="string"){const n=c3(t);return this.readFeatureCollectionMetadataFromDocument(n)}return f3(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)}readFeatureCollectionMetadataFromNode(t){const n={},r=mp(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=r,Rt(n,l1e,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)}readTransactionResponseFromNode(t){return Rt({},fVe,t,[])}writeGetFeature(t){const n=er(K4[this.version_],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.version_),t.handle&&n.setAttribute("handle",t.handle),t.outputFormat&&n.setAttribute("outputFormat",t.outputFormat),t.maxFeatures!==void 0&&n.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&n.setAttribute("resultType",t.resultType),t.startIndex!==void 0&&n.setAttribute("startIndex",String(t.startIndex)),t.count!==void 0&&n.setAttribute("count",String(t.count)),t.viewParams!==void 0&&n.setAttribute("viewParams",t.viewParams),n.setAttributeNS(G_,"xsi:schemaLocation",this.schemaLocation_);const r={node:n};if(Object.assign(r,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),kc(Array.isArray(t.featureTypes),"`options.featureTypes` must be an Array"),typeof t.featureTypes[0]=="string"){let i=t.filter;t.bbox&&(kc(t.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Object.assign(r,{geometryName:t.geometryName,filter:i}),k1e(n,t.featureTypes,[r])}else t.featureTypes.forEach(i=>{const s=this.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Object.assign(r,{geometryName:i.geometryName,filter:s}),k1e(n,[i.name],[r])});return n}combineBboxAndFilter(t,n,r,i){const s=uVe(t,n,r);return i?lVe(i,s):s}writeTransaction(t,n,r,i){const s=[],o=i.version?i.version:this.version_,a=er(K4[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let l;i&&(l=i.gmlOptions?i.gmlOptions:{},i.handle&&a.setAttribute("handle",i.handle)),a.setAttributeNS(G_,"xsi:schemaLocation",u1e[o]);const u=mVe(a,l,o,i);return t&&ZS("Insert",t,s,u),n&&ZS("Update",n,s,u),r&&ZS("Delete",r,s,u),i.nativeElements&&ZS("Native",i.nativeElements,s,u),a}readProjectionFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(!(n.childNodes.length===0||n.childNodes.length===1&&n.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(n,r),oi(r.pop().srsName)}}return null}}function mVe(e,t,n,r){const i=r.featurePrefix?r.featurePrefix:D3e;let s;return n==="1.0.0"?s=2:n==="1.1.0"?s=3:n==="2.0.0"&&(s=3.2),Object.assign({node:e},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:i,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},t)}function ZS(e,t,n,r){Oi(r,T3e,tu(e),t,n)}function c1e(e,t){return Rt({},cVe,e,t)}const gVe={"http://www.opengis.net/ogc":{FeatureId:kn(function(e,t){return e.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:kn(function(e,t){return e.getAttribute("fid")})}};function f1e(e,t){Lp(gVe,e,t)}const yVe={"http://www.opengis.net/wfs":{Feature:f1e},"http://www.opengis.net/wfs/2.0":{Feature:f1e}};function d1e(e,t){return Rt([],yVe,e,t)}function h1e(e,t,n){const r=n[n.length-1],i=r.featureType,s=r.featureNS,o=r.gmlVersion,a=er(s,i);e.appendChild(a),o===2?hr.prototype.writeFeatureElement(a,t,n):o===3?bt.prototype.writeFeatureElement(a,t,n):Yr.prototype.writeFeatureElement(a,t,n)}function L3e(e,t,n){const i=n[n.length-1].version,s=HI[i],o=er(s,"Filter"),a=er(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",t),e.appendChild(o)}function WI(e,t){e=e||D3e;const n=e+":";return t.startsWith(n)?t:n+t}function p1e(e,t,n){const r=n[n.length-1];kc(t.getId()!==void 0,"Features must have an id set");const i=r.featureType,s=r.featurePrefix,o=r.featureNS,a=WI(s,i);e.setAttribute("typeName",a),e.setAttributeNS(qI,"xmlns:"+s,o);const l=t.getId();l!==void 0&&L3e(e,l,n)}function m1e(e,t,n){const r=n[n.length-1];kc(t.getId()!==void 0,"Features must have an id set");const i=r.version,s=r.featureType,o=r.featurePrefix,a=r.featureNS,l=WI(o,s),u=t.getGeometryName();e.setAttribute("typeName",l),e.setAttributeNS(qI,"xmlns:"+o,a);const f=t.getId();if(f!==void 0){const c=t.getKeys(),d=[];for(let h=0,p=c.length;h<p;h++){const g=t.get(c[h]);if(g!==void 0){let v=c[h];g&&typeof g.getSimplifiedGeometry=="function"&&(v=u),d.push({name:v,value:g})}}Oi({version:i,gmlVersion:r.gmlVersion,node:e,hasZ:r.hasZ,srsName:r.srsName},T3e,tu("Property"),d,n),L3e(e,f,n)}}function g1e(e,t,n){const r=n[n.length-1],i=r.version,s=K4[i],a=er(s,i==="2.0.0"?"ValueReference":"Name"),l=r.gmlVersion;if(e.appendChild(a),yr(a,t.name),t.value!==void 0&&t.value!==null){const u=er(s,"Value");e.appendChild(u),t.value&&typeof t.value.getSimplifiedGeometry=="function"?l===2?hr.prototype.writeGeometryElement(u,t.value,n):l===3?bt.prototype.writeGeometryElement(u,t.value,n):Yr.prototype.writeGeometryElement(u,t.value,n):yr(u,t.value)}}function y1e(e,t,n){t.vendorId&&e.setAttribute("vendorId",t.vendorId),t.safeToIgnore!==void 0&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),t.value!==void 0&&yr(e,t.value)}const _D={"http://www.opengis.net/wfs":{Query:Ge(v1e)},"http://www.opengis.net/wfs/2.0":{Query:Ge(v1e)},"http://www.opengis.net/ogc":{During:Ge(w1e),And:Ge(KS),Or:Ge(KS),Not:Ge(_1e),BBOX:Ge(b1e),Contains:Ge(Jh),Intersects:Ge(Jh),Within:Ge(Jh),DWithin:Ge(x1e),PropertyIsEqualTo:Ge(gu),PropertyIsNotEqualTo:Ge(gu),PropertyIsLessThan:Ge(gu),PropertyIsLessThanOrEqualTo:Ge(gu),PropertyIsGreaterThan:Ge(gu),PropertyIsGreaterThanOrEqualTo:Ge(gu),PropertyIsNull:Ge(E1e),PropertyIsBetween:Ge(S1e),PropertyIsLike:Ge(A1e)},"http://www.opengis.net/fes/2.0":{During:Ge(w1e),And:Ge(KS),Or:Ge(KS),Not:Ge(_1e),BBOX:Ge(b1e),Contains:Ge(Jh),Disjoint:Ge(Jh),Intersects:Ge(Jh),ResourceId:Ge(bVe),Within:Ge(Jh),DWithin:Ge(x1e),PropertyIsEqualTo:Ge(gu),PropertyIsNotEqualTo:Ge(gu),PropertyIsLessThan:Ge(gu),PropertyIsLessThanOrEqualTo:Ge(gu),PropertyIsGreaterThan:Ge(gu),PropertyIsGreaterThanOrEqualTo:Ge(gu),PropertyIsNull:Ge(E1e),PropertyIsBetween:Ge(S1e),PropertyIsLike:Ge(A1e)}};function v1e(e,t,n){const r=n[n.length-1],i=r.version,s=r.featurePrefix,o=r.featureNS,a=r.propertyNames,l=r.srsName;let u;s?u=WI(s,t):u=t;let f;i==="2.0.0"?f="typeNames":f="typeName",e.setAttribute(f,u),l&&e.setAttribute("srsName",l),o&&e.setAttributeNS(qI,"xmlns:"+s,o);const c=Object.assign({},r);c.node=e,Oi(c,dVe,tu("PropertyName"),a,n);const d=r.filter;if(d){const h=er(ED(i),"Filter");e.appendChild(h),vVe(h,d,n)}}function vVe(e,t,n){const r=n[n.length-1],i={node:e};Object.assign(i,{context:r}),Oi(i,_D,tu(t.getTagName()),[t],n)}function b1e(e,t,n){const r=n[n.length-1],s=r.context.version;r.srsName=t.srsName;const o=VI[s];V1(s,e,t.geometryName),o.prototype.writeGeometryElement(e,t.extent,n)}function bVe(e,t,n){e.setAttribute("rid",t.rid)}function Jh(e,t,n){const r=n[n.length-1],s=r.context.version;r.srsName=t.srsName;const o=VI[s];V1(s,e,t.geometryName),o.prototype.writeGeometryElement(e,t.geometry,n)}function x1e(e,t,n){const s=n[n.length-1].context.version;Jh(e,t,n);const o=er(ED(s),"Distance");yr(o,t.distance.toString()),s==="2.0.0"?o.setAttribute("uom",t.unit):o.setAttribute("units",t.unit),e.appendChild(o)}function w1e(e,t,n){const s=n[n.length-1].context.version;b3(GI[s],"ValueReference",e,t.propertyName);const o=er(Vd,"TimePeriod");e.appendChild(o);const a=er(Vd,"begin");o.appendChild(a),C1e(a,t.begin);const l=er(Vd,"end");o.appendChild(l),C1e(l,t.end)}function KS(e,t,n){const i=n[n.length-1].context,s={node:e};Object.assign(s,{context:i});const o=t.conditions;for(let a=0,l=o.length;a<l;++a){const u=o[a];Oi(s,_D,tu(u.getTagName()),[u],n)}}function _1e(e,t,n){const i=n[n.length-1].context,s={node:e};Object.assign(s,{context:i});const o=t.condition;Oi(s,_D,tu(o.getTagName()),[o],n)}function gu(e,t,n){const s=n[n.length-1].context.version;t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),V1(s,e,t.propertyName),x3(s,e,""+t.expression)}function E1e(e,t,n){const s=n[n.length-1].context.version;V1(s,e,t.propertyName)}function S1e(e,t,n){const s=n[n.length-1].context.version,o=ED(s);V1(s,e,t.propertyName);const a=er(o,"LowerBoundary");e.appendChild(a),x3(s,a,""+t.lowerBoundary);const l=er(o,"UpperBoundary");e.appendChild(l),x3(s,l,""+t.upperBoundary)}function A1e(e,t,n){const s=n[n.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),V1(s,e,t.propertyName),x3(s,e,""+t.pattern)}function b3(e,t,n,r){const i=er(e,t);yr(i,r),n.appendChild(i)}function x3(e,t,n){b3(ED(e),"Literal",t,n)}function V1(e,t,n){e==="2.0.0"?b3(GI[e],"ValueReference",t,n):b3(HI[e],"PropertyName",t,n)}function C1e(e,t){const n=er(Vd,"TimeInstant");e.appendChild(n);const r=er(Vd,"timePosition");n.appendChild(r),yr(r,t)}function k1e(e,t,n){const r=n[n.length-1],i=Object.assign({},r);i.node=e,Oi(i,_D,tu("Query"),t,n)}function ED(e){let t;return e==="2.0.0"?t=GI[e]:t=HI[e],t}const wi={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class T1e{constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,t!==void 0?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,t!==void 0?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readPoint());return n}readPolygon(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readLineString());return n}readWkbHeader(t){const r=this.readUint8()>0,i=this.readUint32(r),s=Math.floor((i&268435455)/1e3),o=!!(i&2147483648)||s===1||s===3,a=!!(i&1073741824)||s===2||s===3,l=!!(i&536870912),u=(i&268435455)%1e3,f=["XY",o?"Z":"",a?"M":""].join(""),c=l?this.readUint32(r):null;if(t!==void 0&&t!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==f)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=o,this.hasM_=a,this.layout_=f,this.srid_=c,this.initialized_=!0;return u}readWkbPayload(t){switch(t){case wi.POINT:return this.readPoint();case wi.LINE_STRING:return this.readLineString();case wi.POLYGON:case wi.TRIANGLE:return this.readPolygon();case wi.MULTI_POINT:return this.readMultiPoint();case wi.MULTI_LINE_STRING:return this.readMultiLineString();case wi.MULTI_POLYGON:case wi.POLYHEDRAL_SURFACE:case wi.TIN:return this.readMultiPolygon();case wi.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,n){const r=this.readUint32(),i=[];for(let s=0;s<r;s++){const o=t.call(this,n);o&&i.push(o)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,wi.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,wi.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,wi.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case wi.POINT:return new mc(n,this.layout_);case wi.LINE_STRING:return new Ff(n,this.layout_);case wi.POLYGON:case wi.TRIANGLE:return new tE(n,this.layout_);case wi.MULTI_POINT:return new sD(n,this.layout_);case wi.MULTI_LINE_STRING:return new N1(n,this.layout_);case wi.MULTI_POLYGON:case wi.POLYHEDRAL_SURFACE:case wi.TIN:return new eE(n,this.layout_);case wi.GEOMETRY_COLLECTION:return new Bp(n);default:return null}}getSrid(){return this.srid_}}class xVe{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=t.littleEndian!==!1,this.isEWKB_=t.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,n){const r=Object.assign.apply(null,n.split("").map((i,s)=>({[i]:t[s]})));for(const i of this.layout_)this.writeDouble(i in r?r[i]:this.nodata_[i])}writeLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writePoint(t[r],n)}writePolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeLineString(t[r],n)}writeWkbHeader(t,n){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(n)&&this.writeUint32(n)}writeMultiPoint(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(1),this.writePoint(t[r],n)}writeMultiLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(2),this.writeLineString(t[r],n)}writeMultiPolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(3),this.writePolygon(t[r],n)}writeGeometryCollection(t){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeGeometry(t[n])}findMinimumLayout(t,n="XYZM"){const r=(i,s)=>i===s?i:i==="XYZM"?s:s==="XYZM"?i:"XY";if(t instanceof Rve)return r(t.getLayout(),n);if(t instanceof Bp){const i=t.getGeometriesArray();for(let s=0;s<i.length&&n!=="XY";s++)n=this.findMinimumLayout(i[s],n)}return n}writeGeometry(t,n){const r={Point:wi.POINT,LineString:wi.LINE_STRING,Polygon:wi.POLYGON,MultiPoint:wi.MULTI_POINT,MultiLineString:wi.MULTI_LINE_STRING,MultiPolygon:wi.MULTI_POLYGON,GeometryCollection:wi.GEOMETRY_COLLECTION},i=t.getType(),s=r[i];if(!s)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(s,n),t instanceof Rve?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,t.getCoordinates(),t.getLayout()):t instanceof Bp&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce((s,o)=>s+o[0],0),n=new ArrayBuffer(t),r=new DataView(n);let i=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:r.setUint8(i,s[1]);break;case 4:r.setUint32(i,s[1],this.isLittleEndian_);break;case 8:r.setFloat64(i,s[1],this.isLittleEndian_);break}i+=s[0]}),n}}class wVe extends LCe{constructor(t){super(),t=t||{},this.splitCollection=!!t.splitCollection,this.viewCache_=null,this.hex_=t.hex!==!1,this.littleEndian_=t.littleEndian!==!1,this.ewkb_=t.ewkb!==!1,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,n){return new au({geometry:this.readGeometry(t,n)})}readFeatures(t,n){let r=[];const i=this.readGeometry(t,n);return this.splitCollection&&i instanceof Bp?r=i.getGeometriesArray():r=[i],r.map(s=>new au({geometry:s}))}readGeometry(t,n){const r=D1e(t);if(!r)return null;const s=new T1e(r).readGeometry();return this.viewCache_=r,n=this.getReadOptions(t,n),this.viewCache_=null,Oo(s,!1,n)}readProjection(t){const n=this.viewCache_||D1e(t);if(!n)return;const r=new T1e(n);return r.readWkbHeader(),r.getSrid()&&oi("EPSG:"+r.getSrid())||void 0}writeFeature(t,n){return this.writeGeometry(t.getGeometry(),n)}writeFeatures(t,n){return this.writeGeometry(new Bp(t.map(r=>r.getGeometry())),n)}writeGeometry(t,n){n=this.adaptOptions(n);const r=new xVe({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=n.dataProjection&&oi(n.dataProjection);if(o){const a=o.getCode();a.startsWith("EPSG:")&&(i=Number(a.substring(5)))}}r.writeGeometry(Oo(t,!0,n),i);const s=r.getBuffer();return this.hex_?_Ve(s):s}}function _Ve(e){const t=new Uint8Array(e);return Array.from(t.values()).map(n=>(n<16?"0":"")+Number(n).toString(16).toUpperCase()).join("")}function EVe(e){const t=new Uint8Array(e.length/2);for(let n=0;n<e.length/2;n++)t[n]=parseInt(e.substr(n*2,2),16);return new DataView(t.buffer)}function D1e(e){return typeof e=="string"?EVe(e):ArrayBuffer.isView(e)?e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new DataView(e):null}const SVe={POINT:mc,LINESTRING:Ff,POLYGON:tE,MULTIPOINT:sD,MULTILINESTRING:N1,MULTIPOLYGON:eE},R3e="EMPTY",F3e="Z",O3e="M",AVe="ZM",pi={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},CVe={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class kVe{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,n){return n=n!==void 0?n:!1,t>="0"&&t<="9"||t=="."&&!n}isWhiteSpace_(t){return t==" "||t=="	"||t=="\r"||t==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),n=this.index_;let r=t,i;if(t=="(")i=pi.LEFT_PAREN;else if(t==",")i=pi.COMMA;else if(t==")")i=pi.RIGHT_PAREN;else if(this.isNumeric_(t)||t=="-")i=pi.NUMBER,r=this.readNumber_();else if(this.isAlpha_(t))i=pi.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t==="")i=pi.EOF;else throw new Error("Unexpected character: "+t)}return{position:n,value:r,type:i}}readNumber_(){let t;const n=this.index_;let r=!1,i=!1;do t=="."?r=!0:(t=="e"||t=="E")&&(i=!0),t=this.nextChar_();while(this.isNumeric_(t,r)||!i&&(t=="e"||t=="E")||i&&(t=="-"||t=="+"));return parseFloat(this.wkt.substring(n,this.index_--))}readText_(){let t;const n=this.index_;do t=this.nextChar_();while(this.isAlpha_(t));return this.wkt.substring(n,this.index_--).toUpperCase()}}class TVe{constructor(t){this.lexer_=t,this.token_={position:0,type:pi.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const n=this.isTokenType(t);return n&&this.consume_(),n}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const n=this.token_;if(this.isTokenType(pi.TEXT)){const r=n.value;r===F3e?t="XYZ":r===O3e?t="XYM":r===AVe&&(t="XYZM"),t!=="XY"&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(pi.LEFT_PAREN)){const t=[];do t.push(this.parseGeometry_());while(this.match(pi.COMMA));if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePoint_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePointList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(pi.LEFT_PAREN)){let t;if(this.token_.type==pi.LEFT_PAREN?t=this.parsePointTextList_():t=this.parsePointList_(),this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePolygonTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],n=this.layout_.length;for(let r=0;r<n;++r){const i=this.token_;if(this.match(pi.NUMBER))t.push(i.value);else break}if(t.length==n)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(pi.COMMA);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(pi.COMMA);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(pi.COMMA);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(pi.COMMA);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(pi.TEXT)&&this.token_.value==R3e;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.token_;if(this.match(pi.TEXT)){const n=t.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(n=="GEOMETRYCOLLECTION"){if(r)return new Bp([]);const o=this.parseGeometryCollectionText_();return new Bp(o)}const i=SVe[n];if(!i)throw new Error("Invalid geometry type: "+n);let s;if(r)n=="POINT"?s=[NaN,NaN]:s=[];else switch(n){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new i(s,this.layout_)}throw new Error(this.formatErrorMessage_())}}class M3e extends jI{constructor(t){super(),t=t||{},this.splitCollection_=t.splitCollection!==void 0?t.splitCollection:!1}parse_(t){const n=new kVe(t);return new TVe(n).parse()}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n),i=new au;return i.setGeometry(r),i}readFeaturesFromText(t,n){let r=[];const i=this.readGeometryFromText(t,n);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];const s=[];for(let o=0,a=r.length;o<a;++o){const l=new au;l.setGeometry(r[o]),s.push(l)}return s}readGeometryFromText(t,n){const r=this.parse_(t);return Oo(r,!1,n)}writeFeatureText(t,n){const r=t.getGeometry();return r?this.writeGeometryText(r,n):""}writeFeaturesText(t,n){if(t.length==1)return this.writeFeatureText(t[0],n);const r=[];for(let s=0,o=t.length;s<o;++s)r.push(t[s].getGeometry());const i=new Bp(r);return this.writeGeometryText(i,n)}writeGeometryText(t,n){return P3e(Oo(t,!0,n))}}function $3e(e){const t=e.getCoordinates();return t.length===0?"":t.join(" ")}function DVe(e){const t=[],n=e.getPoints();for(let r=0,i=n.length;r<i;++r)t.push("("+$3e(n[r])+")");return t.join(",")}function LVe(e){const t=[],n=e.getGeometries();for(let r=0,i=n.length;r<i;++r)t.push(P3e(n[r]));return t.join(",")}function YI(e){const t=e.getCoordinates(),n=[];for(let r=0,i=t.length;r<i;++r)n.push(t[r].join(" "));return n.join(",")}function RVe(e){const t=[],n=e.getLineStrings();for(let r=0,i=n.length;r<i;++r)t.push("("+YI(n[r])+")");return t.join(",")}function I3e(e){const t=[],n=e.getLinearRings();for(let r=0,i=n.length;r<i;++r)t.push("("+YI(n[r])+")");return t.join(",")}function FVe(e){const t=[],n=e.getPolygons();for(let r=0,i=n.length;r<i;++r)t.push("("+I3e(n[r])+")");return t.join(",")}function OVe(e){const t=e.getLayout();let n="";return(t==="XYZ"||t==="XYZM")&&(n+=F3e),(t==="XYM"||t==="XYZM")&&(n+=O3e),n}const MVe={Point:$3e,LineString:YI,Polygon:I3e,MultiPoint:DVe,MultiLineString:RVe,MultiPolygon:FVe,GeometryCollection:LVe};function P3e(e){const t=e.getType(),n=MVe[t],r=n(e);let i=CVe[t];if(typeof e.getFlatCoordinates=="function"){const s=OVe(e);s.length>0&&(i+=" "+s)}return r.length===0?i+" "+R3e:i+"("+r+")"}const eo=[null,"http://www.opengis.net/wms"];function W1(e){return sje(e[0].version,"1.3")>=0}const $Ve=Xt(eo,{Service:Ue(iWe),Capability:Ue(rWe)}),N3e={Request:Ue(hWe),Exception:Ue(lWe),Layer:Ue(uWe)},IVe=Xt(eo,{...N3e,UserDefinedSymbolization:Ue(tWe)}),PVe=Xt(eo,N3e);class NVe extends UI{constructor(){super(),this.version=void 0}readFromNode(t){this.version=t.getAttribute("version").trim();const n=Rt({version:this.version},$Ve,t,[]);return n||null}}const B3e={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(G3e),OnlineResource:Ue(G1),ContactInformation:Ue(sWe),Fees:Ue(Dt),AccessConstraints:Ue(Dt)},BVe=Xt(eo,B3e),zVe=Xt(eo,{...B3e,LayerLimit:Ue(Ds),MaxWidth:Ue(Ds),MaxHeight:Ue(Ds)}),jVe=Xt(eo,{ContactPersonPrimary:Ue(oWe),ContactPosition:Ue(Dt),ContactAddress:Ue(aWe),ContactVoiceTelephone:Ue(Dt),ContactFacsimileTelephone:Ue(Dt),ContactElectronicMailAddress:Ue(Dt)}),UVe=Xt(eo,{ContactPerson:Ue(Dt),ContactOrganization:Ue(Dt)}),qVe=Xt(eo,{AddressType:Ue(Dt),Address:Ue(Dt),City:Ue(Dt),StateOrProvince:Ue(Dt),PostCode:Ue(Dt),Country:Ue(Dt)}),HVe=Xt(eo,{Format:kn(Dt)}),z3e={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(G3e),BoundingBox:mi(q3e),Dimension:mi(cWe),Attribution:Ue(eWe),AuthorityURL:mi(gWe),Identifier:mi(Dt),MetadataURL:mi(yWe),DataURL:mi(nh),FeatureListURL:mi(nh),Style:mi(vWe),Layer:mi(SD)},j3e=Xt(eo,{...z3e,SRS:mi(Dt),Extent:Ue(fWe),ScaleHint:mi(dWe),LatLonBoundingBox:Ue((e,t)=>q3e(e,t,!1)),Layer:mi(SD)}),U3e=Xt(eo,{...z3e,CRS:mi(Dt),EX_GeographicBoundingBox:Ue(nWe),MinScaleDenominator:Ue(Ea),MaxScaleDenominator:Ue(Ea),Layer:mi(SD)}),GVe=Xt(eo,{Title:Ue(Dt),OnlineResource:Ue(G1),LogoURL:Ue(H3e)}),VVe=Xt(eo,{westBoundLongitude:Ue(Ea),eastBoundLongitude:Ue(Ea),southBoundLatitude:Ue(Ea),northBoundLatitude:Ue(Ea)}),WVe=Xt(eo,{GetCapabilities:Ue(iF),GetMap:Ue(iF),GetFeatureInfo:Ue(iF)}),YVe=Xt(eo,{Format:mi(Dt),DCPType:mi(pWe)}),XVe=Xt(eo,{HTTP:Ue(mWe)}),ZVe=Xt(eo,{Get:Ue(nh),Post:Ue(nh)}),KVe=Xt(eo,{Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),LegendURL:mi(H3e),StyleSheetURL:Ue(nh),StyleURL:Ue(nh)}),JVe=Xt(eo,{Format:Ue(Dt),OnlineResource:Ue(G1)}),QVe=Xt(eo,{Keyword:kn(Dt)});function eWe(e,t){return Rt({},GVe,e,t)}function tWe(e,t){return{SupportSLD:!!gc(e.getAttribute("UserDefinedSymbolization")),UserLayer:!!gc(e.getAttribute("UserLayer")),UserStyle:!!gc(e.getAttribute("UserStyle")),RemoteWFS:!!gc(e.getAttribute("RemoteWFS"))}}function q3e(e,t,n=!0){const r=[pf(e.getAttribute("minx")),pf(e.getAttribute("miny")),pf(e.getAttribute("maxx")),pf(e.getAttribute("maxy"))],i=[pf(e.getAttribute("resx")),pf(e.getAttribute("resy"))],s={extent:r,res:i};return n&&(W1(t)?s.crs=e.getAttribute("CRS"):s.srs=e.getAttribute("SRS")),s}function nWe(e,t){const n=Rt({},VVe,e,t);if(!n)return;const r=n.westBoundLongitude,i=n.southBoundLatitude,s=n.eastBoundLongitude,o=n.northBoundLatitude;if(!(r===void 0||i===void 0||s===void 0||o===void 0))return[r,i,s,o]}function rWe(e,t){return Rt({},W1(t)?PVe:IVe,e,t)}function iWe(e,t){return Rt({},W1(t)?zVe:BVe,e,t)}function sWe(e,t){return Rt({},jVe,e,t)}function oWe(e,t){return Rt({},UVe,e,t)}function aWe(e,t){return Rt({},qVe,e,t)}function lWe(e,t){return Rt([],HVe,e,t)}function uWe(e,t){const n=Rt({},W1(t)?U3e:j3e,e,t);return n.Layer===void 0?Object.assign(n,SD(e,t)):n}function SD(e,t){const n=W1(t),r=t[t.length-1],i=Rt({},n?U3e:j3e,e,t);if(!i)return;let s=gc(e.getAttribute("queryable"));s===void 0&&(s=r.queryable),i.queryable=s!==void 0?s:!1;let o=mp(e.getAttribute("cascaded"));o===void 0&&(o=r.cascaded),i.cascaded=o;let a=gc(e.getAttribute("opaque"));a===void 0&&(a=r.opaque),i.opaque=a!==void 0?a:!1;let l=gc(e.getAttribute("noSubsets"));l===void 0&&(l=r.noSubsets),i.noSubsets=l!==void 0?l:!1;let u=pf(e.getAttribute("fixedWidth"));u||(u=r.fixedWidth),i.fixedWidth=u;let f=pf(e.getAttribute("fixedHeight"));f||(f=r.fixedHeight),i.fixedHeight=f;const c=["Style","AuthorityURL"];n?c.push("CRS"):c.push("SRS","Dimension"),c.forEach(function(h){if(h in r){const p=i[h]||[];i[h]=p.concat(r[h])}});const d=["BoundingBox","Attribution"];return n?d.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):d.push("LatLonBoundingBox","ScaleHint","Extent"),d.forEach(function(h){if(!(h in i)){const p=r[h];i[h]=p}}),i}function cWe(e,t){const n={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol")};return W1(t)&&Object.assign(n,{default:e.getAttribute("default"),multipleValues:gc(e.getAttribute("multipleValues")),nearestValue:gc(e.getAttribute("nearestValue")),current:gc(e.getAttribute("current")),values:Dt(e)}),n}function fWe(e,t){return{name:e.getAttribute("name"),default:e.getAttribute("default"),nearestValue:gc(e.getAttribute("nearestValue"))}}function dWe(e,t){return{min:pf(e.getAttribute("min")),max:pf(e.getAttribute("max"))}}function nh(e,t){return Rt({},JVe,e,t)}function hWe(e,t){return Rt({},WVe,e,t)}function pWe(e,t){return Rt({},XVe,e,t)}function mWe(e,t){return Rt({},ZVe,e,t)}function iF(e,t){return Rt({},YVe,e,t)}function H3e(e,t){const n=nh(e,t);if(n){const r=[mp(e.getAttribute("width")),mp(e.getAttribute("height"))];return n.size=r,n}}function gWe(e,t){const n=nh(e,t);if(n)return n.name=e.getAttribute("name"),n}function yWe(e,t){const n=nh(e,t);if(n)return n.type=e.getAttribute("type"),n}function vWe(e,t){return Rt({},KVe,e,t)}function G3e(e,t){return Rt([],QVe,e,t)}const bWe="_feature",xWe="_layer";class wWe extends oD{constructor(t){super(),t=t||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new hr,this.layers_=t.layers?t.layers:null}getLayers(){return this.layers_}setLayers(t){this.layers_=t}readFeatures_(t,n){t.setAttribute("namespaceURI",this.featureNS_);const r=t.localName;let i=[];if(t.childNodes.length===0)return i;if(r=="msGMLOutput")for(let s=0,o=t.childNodes.length;s<o;s++){const a=t.childNodes[s];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,u=n[0],f=xWe,c=l.localName.replace(f,"");if(this.layers_&&!this.layers_.includes(c))continue;const d=c+bWe;u.featureType=d,u.featureNS=this.featureNS_;const h={};h[d]=kn(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const p=Xt([u.featureNS,null],h);l.setAttribute("namespaceURI",this.featureNS_);const g=Rt([],p,l,n,this.gmlFormat_);g&&u3(i,g)}if(r=="FeatureCollection"){const s=Rt([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);s&&(i=s)}return i}readFeaturesFromNode(t,n){const r={};return n&&Object.assign(r,this.getReadOptions(t,n)),this.readFeatures_(t,[r])}}const Hf=[null,"http://www.opengis.net/wmts/1.0"],Y1=[null,"http://www.opengis.net/ows/1.1"],_We=Xt(Hf,{Contents:Ue(FWe)});let XI=class extends UI{constructor(){super(),this.owsParser_=new C3e}readFromNode(t){let n=t.getAttribute("version");n&&(n=n.trim());let r=this.owsParser_.readFromNode(t);return r?(r.version=n,r=Rt(r,_We,t,[]),r||null):null}};const EWe=Xt(Hf,{Layer:mi(OWe),TileMatrixSet:mi(MWe)}),SWe=Xt(Hf,{Style:mi($We),Format:mi(Dt),TileMatrixSetLink:mi(IWe),Dimension:mi(PWe),ResourceURL:mi(NWe)},Xt(Y1,{Title:Ue(Dt),Abstract:Ue(Dt),WGS84BoundingBox:Ue(W3e),BoundingBox:mi(BWe),Identifier:Ue(Dt)})),AWe=Xt(Hf,{LegendURL:mi(zWe)},Xt(Y1,{Title:Ue(Dt),Identifier:Ue(Dt)})),CWe=Xt(Hf,{TileMatrixSet:Ue(Dt),TileMatrixSetLimits:Ue(UWe)}),kWe=Xt(Hf,{TileMatrixLimits:kn(qWe)}),TWe=Xt(Hf,{TileMatrix:Ue(Dt),MinTileRow:Ue(Ds),MaxTileRow:Ue(Ds),MinTileCol:Ue(Ds),MaxTileCol:Ue(Ds)}),DWe=Xt(Hf,{Default:Ue(Dt),Value:mi(Dt)},Xt(Y1,{Identifier:Ue(Dt)})),V3e=Xt(Y1,{LowerCorner:kn(J4),UpperCorner:kn(J4)}),LWe=Xt(Hf,{WellKnownScaleSet:Ue(Dt),TileMatrix:mi(jWe)},Xt(Y1,{SupportedCRS:Ue(Dt),Identifier:Ue(Dt),BoundingBox:Ue(W3e)})),RWe=Xt(Hf,{TopLeftCorner:Ue(J4),ScaleDenominator:Ue(Ea),TileWidth:Ue(Ds),TileHeight:Ue(Ds),MatrixWidth:Ue(Ds),MatrixHeight:Ue(Ds)},Xt(Y1,{Identifier:Ue(Dt)}));function FWe(e,t){return Rt({},EWe,e,t)}function OWe(e,t){return Rt({},SWe,e,t)}function MWe(e,t){return Rt({},LWe,e,t)}function $We(e,t){const n=Rt({},AWe,e,t);if(!n)return;const r=e.getAttribute("isDefault")==="true";return n.isDefault=r,n}function IWe(e,t){return Rt({},CWe,e,t)}function PWe(e,t){return Rt({},DWe,e,t)}function NWe(e,t){const n=e.getAttribute("format"),r=e.getAttribute("template"),i=e.getAttribute("resourceType"),s={};return n&&(s.format=n),r&&(s.template=r),i&&(s.resourceType=i),s}function W3e(e,t){const n=Rt([],V3e,e,t);if(n.length==2)return pI(n)}function BWe(e,t){const n=e.getAttribute("crs"),r=Rt([],V3e,e,t);if(r.length==2)return{extent:pI(r),crs:n}}function zWe(e,t){const n={};return n.format=e.getAttribute("format"),n.href=G1(e),n}function J4(e,t){const n=Dt(e).split(/\s+/);if(!n||n.length!=2)return;const r=+n[0],i=+n[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function jWe(e,t){return Rt({},RWe,e,t)}function UWe(e,t){return Rt([],kWe,e,t)}function qWe(e,t){return Rt({},TWe,e,t)}const HWe=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:iHe,GML:II,GPX:RHe,GeoJSON:lD,IGC:hGe,IIIFInfo:bGe,KML:oje,MVT:RCe,OWS:C3e,Polyline:XGe,TopoJSON:aje,WFS:pVe,WKB:wVe,WKT:M3e,WMSCapabilities:NVe,WMSGetFeatureInfo:wWe,WMTSCapabilities:XI},Symbol.toStringTag,{value:"Module"})),oE=34962,aE=34963,GWe=35040,ZI=35044,t2=35048,VWe=5121,WWe=5123,YWe=5125,Y3e=5126,L1e=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function XWe(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!lje},t);const n=L1e.length;for(let r=0;r<n;++r)try{const i=e.getContext(L1e[r],t);if(i)return i}catch{}return null}const ZWe={STATIC_DRAW:ZI,STREAM_DRAW:GWe,DYNAMIC_DRAW:t2};class Zv{constructor(t,n){this.array_=null,this.type_=t,kc(t===oE||t===aE,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:ZWe.STATIC_DRAW}ofSize(t){return this.array_=new(JS(this.type_))(t),this}fromArray(t){return this.array_=JS(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(JS(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}setArray(t){const n=JS(this.type_);if(!(t instanceof n))throw new Error(`Expected ${n}`);this.array_=t}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function JS(e){switch(e){case oE:return Float32Array;case aE:return Uint32Array;default:return Float32Array}}const QS={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},KWe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,JWe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class R1e{constructor(t){this.gl_=t.webGlContext;const n=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,t.vertexShader||KWe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,t.fragmentShader||JWe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(o=>{this.uniforms_.push({value:t.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(t){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,u=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],o,a,l,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(t,n,r,i){const s=this.getGL(),o=t.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=Ei(s.canvas);if(!t.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),t.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=t.layerStatesArray[t.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(t),r&&r(s,t),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(t):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}const cf={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},$s={UNSIGNED_BYTE:VWe,UNSIGNED_SHORT:WWe,UNSIGNED_INT:YWe,FLOAT:Y3e},w3={};function F1e(e){return"shared/"+e}let O1e=0;function QWe(){const e="unique/"+O1e;return O1e+=1,e}function eYe(e){let t=w3[e];if(!t){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",t={users:0,context:XWe(n)},w3[e]=t}return t.users+=1,t.context}function tYe(e){const t=w3[e];if(!t||(t.users-=1,t.users>0))return;const n=t.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete w3[e]}class nYe extends FCe{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?F1e(t.canvasCacheKey):QWe(),this.gl_=eYe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(QS.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(QS.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Ko(),this.offsetScaleMatrix_=Ko(),this.tmpMat4_=mI(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(r=>new R1e({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new R1e({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const n in t)this.uniforms_.push({name:n,value:t[n]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===F1e(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n}bindBuffer(t){const n=this.gl_,r=Ei(t);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:t,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const n=this.gl_;this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const n=Ei(t);delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(QS.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(QS.RESTORED,this.boundHandleWebGLContextRestored_),tYe(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,n,r){const i=this.gl_,s=this.getCanvas(),o=t.size,a=t.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(t,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,t),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const t=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();t.bindFramebuffer(t.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}bindTexture(t,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(t,n,r){const i=this.getGL();this.bindBuffer(t);const s=this.getAttributeLocation(n);i.enableVertexAttribArray(s),i.vertexAttribPointer(s,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(t,n,r,i){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(t,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,o=n-t,a=t*s;r.drawElements(r.TRIANGLES,o,i,a)}finalizeDraw(t,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(t,null,n,r):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const n=t.size,r=t.viewState.rotation,i=t.pixelRatio;this.setUniformFloatValue(cf.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(cf.ZOOM,t.viewState.zoom),this.setUniformFloatValue(cf.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(cf.PIXEL_RATIO,i),this.setUniformFloatVec2(cf.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(cf.ROTATION,r)}applyHitDetectionUniform(t){const n=this.getUniformLocation(cf.HIT_DETECTION);this.getGL().uniform1i(n,t?1:0),t&&this.setUniformFloatValue(cf.PIXEL_RATIO,.5)}applyUniforms(t){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(t):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,h3(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(t,n){this.gl_.useProgram(t),this.currentProgram_=t,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(t,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,t),r.compileShader(i),i}getProgram(t,n){const r=this.gl_,i=this.compileShader(t,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(t){const n=Ei(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][t]===void 0&&(this.uniformLocationsByProgram_[n][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[n][t]}getAttributeLocation(t){const n=Ei(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][t]===void 0&&(this.attribLocationsByProgram_[n][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[n][t]}makeProjectionTransform(t,n){const r=t.size,i=t.viewState.rotation,s=t.viewState.resolution,o=t.viewState.center;return gI(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-o[0],-o[1]),n}setUniformFloatValue(t,n){this.gl_.uniform1f(this.getUniformLocation(t),n)}setUniformFloatVec2(t,n){this.gl_.uniform2fv(this.getUniformLocation(t),n)}setUniformFloatVec4(t,n){this.gl_.uniform4fv(this.getUniformLocation(t),n)}setUniformMatrixValue(t,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,n)}enableAttributeArray_(t,n,r,i,s){const o=this.getAttributeLocation(t);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,n,r,!1,i,s))}enableAttributes(t){const n=rYe(t);let r=0;for(let i=0;i<t.length;i++){const s=t[i];this.enableAttributeArray_(s.name,s.size,s.type||Y3e,n,r),r+=s.size*X3e(s.type)}}handleWebGLContextLost(t){uje(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,n,r,i){const s=this.gl_;r=r||s.createTexture();const o=i?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,u=0,f=s.RGBA,c=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,t[0],t[1],u,f,c,n):n?s.texImage2D(s.TEXTURE_2D,a,l,f,c,n):s.texImage2D(s.TEXTURE_2D,a,l,t[0],t[1],u,f,c,null),r}}function rYe(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];t+=r.size*X3e(r.type)}return t}function X3e(e){switch(e){case $s.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case $s.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case $s.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case $s.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class lE extends cje{constructor(t,n){super(t),n=n||{},this.inversePixelTransform_=Ko(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(q4.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(bg.PRECOMPOSE)){const i=new KR(bg.PRECOMPOSE,void 0,n,t);r.dispatchEvent(i)}}dispatchPostComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(bg.POSTCOMPOSE)){const i=new KR(bg.POSTCOMPOSE,void 0,n,t);r.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let o=0,a=t.layerStatesArray.length;o<a;o++){const l=t.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof lE)){n=!0;continue}const f=l.getClassName();if((n||f!==i)&&(r+=1,n=!1),i=f,u===this)break}const s="map/"+t.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new nYe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){var t;this.clearCache(),this.removeHelper(),(t=this.getLayer())==null||t.removeChangeListener(q4.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,n,r){const i=this.getLayer();if(i.hasListener(t)){gI(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new KR(t,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(t,n){this.dispatchRenderEvent_(bg.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(bg.POSTRENDER,t,n)}}const tf=new Uint8Array(4);class Z3e{constructor(t,n){this.helper_=t;const r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){fje(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,n){if(t<0||n<0||t>this.size_[0]||n>=this.size_[1])return tf[0]=0,tf[1]=0,tf[2]=0,tf[3]=0,tf;this.readAll();const r=Math.floor(t)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return tf[0]=this.data_[r*4],tf[1]=this.data_[r*4+1],tf[2]=this.data_[r*4+2],tf[3]=this.data_[r*4+3],tf}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t[0],t[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}const m_={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"},M1e=.985;function K3e(e,t){t=t||[];const n=256,r=n-1;return t[0]=Math.floor(e/n/n/n)/r,t[1]=Math.floor(e/n/n)%n/r,t[2]=Math.floor(e/n)%n/r,t[3]=e%n/r,t}function J3e(e){let t=0;const n=256,r=n-1;return t+=Math.round(e[0]*n*n*n*r),t+=Math.round(e[1]*n*n*r),t+=Math.round(e[2]*n*r),t+=Math.round(e[3]*r),t}function Q3e(){const e='const t="GENERATE_POLYGON_BUFFERS",e="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function x(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],u=e[2],i=e[3],f=e[4],s=e[5];return t[0]=i/n,t[1]=-o/n,t[2]=-u/n,t[3]=x/n,t[4]=(u*s-i*f)/n,t[5]=-(x*s-o*f)/n,t}function o(t,e,n=2){const r=e&&e.length,x=r?e[0]*n:t.length;let o=u(t,0,x,n,!0);const i=[];if(!o||o.next===o.prev)return i;let s,l,c;if(r&&(o=function(t,e,n,r){const x=[];for(let n=0,o=e.length;n<o;n++){const i=u(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1);i===i.next&&(i.steiner=!0),x.push(g(i))}x.sort(y);for(let t=0;t<x.length;t++)n=h(x[t],n);return n}(t,e,o,n)),t.length>80*n){s=1/0,l=1/0;let e=-1/0,r=-1/0;for(let o=n;o<x;o+=n){const n=t[o],x=t[o+1];n<s&&(s=n),x<l&&(l=x),n>e&&(e=n),x>r&&(r=x)}c=Math.max(e-s,r-l),c=0!==c?32767/c:0}return f(o,i,n,s,l,c,0),i}function u(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,u=n-r;o<n;o+=r)x+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=z(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=z(x/r|0,t[x],t[x+1],o);return o&&M(o,o.next)&&(F(o),o=o.next),o}function i(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(F(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function f(t,e,n,r,x,o,u){if(!t)return;!u&&o&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=v(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let u=x,i=0;for(let t=0;t<n&&(i++,u=u.nextZ,u);t++);let f=n;for(;i>0||f>0&&u;)0!==i&&(0===f||!u||x.z<=u.z)?(r=x,x=x.nextZ,i--):(r=u,u=u.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=u}o.nextZ=null,n*=2}while(e>1)}(x)}(t,r,x,o);let y=t;for(;t.prev!==t.next;){const h=t.prev,p=t.next;if(o?l(t,r,x,o):s(t))e.push(h.i,t.i,p.i),F(t),t=p.next,y=p.next;else if((t=p)===y){u?1===u?f(t=c(i(t),e),e,n,r,x,o,2):2===u&&a(t,e,n,r,x,o):f(i(t),e,n,r,x,o,1);break}}}function s(t){const e=t.prev,n=t,r=t.next;if(d(e,n,r)>=0)return!1;const x=e.x,o=n.x,u=r.x,i=e.y,f=n.y,s=r.y,l=x<o?x<u?x:u:o<u?o:u,c=i<f?i<s?i:s:f<s?f:s,a=x>o?x>u?x:u:o>u?o:u,y=i>f?i>s?i:s:f>s?f:s;let h=r.next;for(;h!==e;){if(h.x>=l&&h.x<=a&&h.y>=c&&h.y<=y&&b(x,i,o,f,u,s,h.x,h.y)&&d(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function l(t,e,n,r){const x=t.prev,o=t,u=t.next;if(d(x,o,u)>=0)return!1;const i=x.x,f=o.x,s=u.x,l=x.y,c=o.y,a=u.y,y=i<f?i<s?i:s:f<s?f:s,h=l<c?l<a?l:a:c<a?c:a,p=i>f?i>s?i:s:f>s?f:s,g=l>c?l>a?l:a:c>a?c:a,Z=v(y,h,e,n,r),M=v(p,g,e,n,r);let w=t.prevZ,m=t.nextZ;for(;w&&w.z>=Z&&m&&m.z<=M;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;w&&w.z>=Z;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;m&&m.z<=M;){if(m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(t,e){let n=t;do{const r=n.prev,x=n.next.next;!M(r,x)&&w(r,n,n.next,x)&&E(r,x)&&E(x,r)&&(e.push(r.i,n.i,x.i),F(n),F(n.next),n=t=x),n=n.next}while(n!==t);return i(n)}function a(t,e,n,r,x,o){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&Z(u,t)){let s=I(u,t);return u=i(u,u.next),s=i(s,s.next),f(u,e,n,r,x,o,0),void f(s,e,n,r,x,o,0)}t=t.next}u=u.next}while(u!==t)}function y(t,e){return t.x-e.x}function h(t,e){const n=function(t,e){let n=e;const r=t.x,x=t.y;let o,u=-1/0;do{if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>u&&(u=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const i=o,f=o.x,s=o.y;let l=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&b(x<s?r:u,x,f,s,x<s?u:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);E(n,t)&&(e<l||e===l&&(n.x>o.x||n.x===o.x&&p(o,n)))&&(o=n,l=e)}n=n.next}while(n!==i);return o}(t,e);if(!n)return e;const r=I(n,t);return i(r,r.next),i(n,n.next)}function p(t,e){return d(t.prev,t,e.prev)<0&&d(e.next,t,t.next)<0}function v(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,x,o,u,i){return(x-u)*(e-i)>=(t-u)*(o-i)&&(t-u)*(r-i)>=(n-u)*(e-i)&&(n-u)*(o-i)>=(x-u)*(r-i)}function Z(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(d(t.prev,t,e.prev)||d(t,e.prev,e))||M(t,e)&&d(t.prev,t,t.next)>0&&d(e.prev,e,e.next)>0)}function d(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function M(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,r){const x=A(d(t,e,n)),o=A(d(t,e,r)),u=A(d(n,r,t)),i=A(d(n,r,e));return x!==o&&u!==i||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==u||!m(n,t,r))||!(0!==i||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function E(t,e){return d(t.prev,t,t.next)<0?d(t,e,t.next)>=0&&d(t,t.prev,e)>=0:d(t,e,t.prev)<0||d(t,t.next,e)<0}function I(t,e){const n=P(t.i,t.x,t.y),r=P(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function z(t,e,n,r){const x=P(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function F(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}new Array(6);const B=[],N={vertexPosition:0,indexPosition:0};function R(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function S(t,e,n,r,x,o){const u=3+x,i=t[e+0],f=t[e+1],s=B;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/u;return R(n,l,i,f,0),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,1),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,2),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,3),s.length&&n.set(s,l+3),l+=u,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,N.vertexPosition=l,N.indexPosition=c,N}function T(t,e,n,x,o,u,i,f,s,l,c){const a=10+f.length,y=u.length/a,h=[t[e+0],t[e+1]],p=[t[n],t[n+1]],v=t[e+2],g=t[n+2],b=r(s,[...h]),Z=r(s,[...p]);function d(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],u=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),i=[(n[0]-t[0])/u,(n[1]-t[1])/u],f=0===r||0===u?0:Math.acos((s=i[0]*x[0]+i[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return i[0]*o[0]+i[1]*o[1]>0?f:2*Math.PI-f}let M=-1,w=-1,m=c;const A=null!==o;if(null!==x){M=d(b,Z,r(s,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((M-Math.PI)/2))}if(A){w=d(Z,b,r(s,[...[t[o],t[o+1]]])),Math.cos(w)<=.985&&(m+=Math.tan((Math.PI-w)/2))}function E(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(0,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(1,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(2,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(3,c)),u.push(...f),i.push(y,y+1,y+2,y+1,y+3,y+2),{length:l+Math.sqrt((Z[0]-b[0])*(Z[0]-b[0])+(Z[1]-b[1])*(Z[1]-b[1])),angle:m}}function _(t,e,n,r,x){const u=2+x;let i=e;const f=t.slice(i,i+x);i+=x;const s=t[i++];let l=0;const c=new Array(s-1);for(let e=0;e<s;e++)l+=t[i++],e<s-1&&(c[e]=l);const a=t.slice(i,i+2*l),y=o(a,c,2);for(let t=0;t<y.length;t++)r.push(y[t]+n.length/u);for(let t=0;t<a.length;t+=2)n.push(a[t],a[t+1],...f);return i+2*l}const O=self;O.onmessage=r=>{const o=r.data;switch(o.type){case e:{const t=3,e=2,n=o.customAttributesSize,r=e+n,x=new Float32Array(o.renderInstructions),u=x.length/r,i=4*u*(n+t),f=new Uint32Array(6*u),s=new Float32Array(i);let l;for(let t=0;t<x.length;t+=r)l=S(x,t,s,f,n,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},o);O.postMessage(c,[s.buffer,f.buffer,x.buffer]);break}case n:{const t=[],e=[],n=o.customAttributesSize,r=3,u=new Float32Array(o.renderInstructions);let i=0;const f=[1,0,0,1,0,0];let s,l;for(x(f,o.renderInstructionsTransform);i<u.length;){l=Array.from(u.slice(i,i+n)),i+=n,s=u[i++];const x=i,o=i+(s-1)*r,c=u[x]===u[o]&&u[x+1]===u[o+1];let a=0,y=0;for(let n=0;n<s-1;n++){let h=null;n>0?h=i+(n-1)*r:c&&(h=o-r);let p=null;n<s-2?p=i+(n+2)*r:c&&(p=x+r);const v=T(u,i+n*r,i+(n+1)*r,h,p,t,e,l,f,a,y);a=v.length,y=v.angle}i+=s*r}const c=Uint32Array.from(e),a=Float32Array.from(t),y=Object.assign({vertexBuffer:a.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},o);O.postMessage(y,[a.buffer,c.buffer,u.buffer]);break}case t:{const t=[],e=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let x=0;for(;x<r.length;)x=_(r,x,t,e,n);const u=Uint32Array.from(e),i=Float32Array.from(t),f=Object.assign({vertexBuffer:i.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},o);O.postMessage(f,[i.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}function eke(e,t){const n=e.viewState.projection,i=t.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),o=e.extent,a=i?eu(s):null,l=i?Math.ceil((o[2]-s[2])/a)+1:1;return[i?Math.floor((o[0]-s[0])/a):0,l,a]}class tke extends lE{constructor(t,n){const r=n.uniforms||{},i=Ko();r[cf.PROJECTION_MATRIX]=i,super(t,{uniforms:r,postProcesses:n.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Zv(oE,t2),this.indicesBuffer_=new Zv(aE,t2),this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.program_,this.hitDetectionEnabled_=n.hitDetectionEnabled??!0;const s=n.attributes?n.attributes.map(function(a){return{name:"a_"+a.name,size:1,type:$s.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:$s.FLOAT},{name:"a_index",size:1,type:$s.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:$s.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:$s.FLOAT})),this.attributes.push(...s),this.customAttributes=n.attributes?n.attributes:[],this.previousExtent_=uD(),this.currentTransform_=i,this.renderTransform_=Ko(),this.invertRenderTransform_=Ko(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=Q3e(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===m_.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,V_(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[gp(o,yp.ADDFEATURE,this.handleSourceFeatureAdded_,this),gp(o,yp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),gp(o,yp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),gp(o,yp.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{this.featureCache_[Ei(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Z3e(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(t){const n=t.feature;this.featureCache_[Ei(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const n=t.feature;this.featureCache_[Ei(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}}handleSourceFeatureDelete_(t){const n=t.feature;delete this.featureCache_[Ei(n)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,s]=eke(t,this.getLayer());return this.renderWorlds(t,!1,r,i,s),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),this.helper.getCanvas()}prepareFrameInternal(t){const n=this.getLayer(),r=n.getSource(),i=t.viewState,s=!t.viewHints[zp.ANIMATING]&&!t.viewHints[zp.INTERACTING],o=!H_(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,u=i.resolution,f=n instanceof cD?n.getRenderBuffer():0,c=yI(t.extent,f*u);r.loadFeatures(c,u,l),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const n=Ko();this.helper.makeProjectionTransform(t,n);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=i*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let o,a;const l=[],u=[];let f=-1;for(const d in this.featureCache_)if(o=this.featureCache_[d],a=o.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],eh(n,l),this.renderInstructions_[++f]=l[0],this.renderInstructions_[++f]=l[1],this.hitDetectionEnabled_){const h=K3e(f+5,u);this.renderInstructions_[++f]=h[0],this.renderInstructions_[++f]=h[1],this.renderInstructions_[++f]=h[2],this.renderInstructions_[++f]=h[3],this.renderInstructions_[++f]=Number(d)}for(let h=0;h<this.customAttributes.length;h++){const p=this.customAttributes[h].callback(o.feature,o.properties);this.renderInstructions_[++f]=p}}const c={id:++this.lastSentId,type:m_.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};c.projectionTransform=n,this.ready=!1,this.worker_.postMessage(c,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,n,r,i,s){if(kc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=eh(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=J3e(l),f=this.renderInstructions_[u],c=Math.floor(f).toString(),h=this.getLayer().getSource().getFeatureByUid(c);if(h)return i(h,this.getLayer(),null)}renderWorlds(t,n,r,i,s){let o=r;this.helper.useProgram(this.program_,t),n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),vI(this.currentTransform_,o*s,0),U_(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(n);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<i)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(t){OCe(t)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class iYe{constructor(t,n){this.name=t,this.data=n,this.texture_=null}getTexture(t){if(!this.texture_){const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}}class sYe extends dje{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(kl.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===Ts.LOADED,this.loaded)this.uploadTile();else{if(t instanceof bI){const n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(kl.CHANGE,this.handleTileChange_)}}uploadTile(){Td()}setReady(){this.ready=!0,this.dispatchEvent(kl.CHANGE)}handleTileChange_(){this.tile.getState()===Ts.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(kl.CHANGE,this.handleTileChange_)}}function nke(e,t,n){const r=n?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r)}function oYe(e,t,n,r){nke(e,t,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}function $1e(e,t,n,r,i,s){const o=e.getGL();let a,l;n instanceof Float32Array?(a=o.FLOAT,e.getExtension("OES_texture_float"),l=e.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),nke(o,t,s&&l);const u=n.byteLength/r[1];let f=1;u%8===0?f=8:u%4===0?f=4:u%2===0&&(f=2);let c;switch(i){case 1:{c=o.LUMINANCE;break}case 2:{c=o.LUMINANCE_ALPHA;break}case 3:{c=o.RGB;break}case 4:{c=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,f),o.texImage2D(o.TEXTURE_2D,0,c,r[0],r[1],0,c,a,n),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let Qy=null;function aYe(){Qy=Jg(1,1,void 0,{willReadFrequently:!0})}class lYe extends sYe{constructor(t){super(t),this.textures=[],this.renderSize_=wc(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const n=new Zv(oE,ZI);n.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(n),this.coords=n,this.setTile(t.tile)}setHelper(t){var r;const n=(r=this.helper)==null?void 0:r.getGL();if(n){this.helper.deleteBuffer(this.coords);for(let i=0;i<this.textures.length;++i)n.deleteTexture(this.textures[i])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,n=t.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof bI||r instanceof xI?i=r.getImage():i=r.getData();const s=Fve(i);if(s){const b=n.createTexture();this.textures.push(b),this.bandCount=4,oYe(n,b,s,r.interpolate),this.setReady();return}i=Ove(i);const o=r.getSize(),a=[o[0]+2*this.gutter,o[1]+2*this.gutter],l=i instanceof Float32Array,u=a[0]*a[1],f=l?Float32Array:Uint8Array,c=f.BYTES_PER_ELEMENT,d=i.byteLength/a[1];this.bandCount=Math.floor(d/c/a[0]);const h=Math.ceil(this.bandCount/4);if(h===1){const b=n.createTexture();this.textures.push(b),$1e(t,b,i,a,this.bandCount,r.interpolate),this.setReady();return}const p=new Array(h);for(let b=0;b<h;++b){const w=n.createTexture();this.textures.push(w);const E=b<h-1?4:(this.bandCount-1)%4+1;p[b]=new f(u*E)}let g=0,v=0;const y=a[0]*this.bandCount;for(let b=0;b<a[1];++b){for(let w=0;w<y;++w){const E=i[v+w],A=Math.floor(g/this.bandCount),T=w%this.bandCount,D=Math.floor(T/4),k=p[D],R=k.length/u,O=T%4;k[A*R+O]=E,++g}v+=d/c}for(let b=0;b<h;++b){const w=this.textures[b],E=p[b],A=E.length/u;$1e(t,w,E,a,A,r.interpolate)}this.setReady()}getImagePixelData_(t,n,r){const i=this.gutter,s=this.renderSize_[0],o=this.renderSize_[1];Qy||aYe(),Qy.clearRect(0,0,1,1);const a=t.width,l=t.height,u=a-2*i,f=l-2*i,c=i+Math.floor(u*(n/s)),d=i+Math.floor(f*(r/o));let h;try{Qy.drawImage(t,c,d,1,1,0,0,1,1),h=Qy.getImageData(0,0,1,1).data}catch{return Qy=null,null}return h}getArrayPixelData_(t,n,r,i){const s=this.gutter,o=this.renderSize_[0],a=this.renderSize_[1],l=n[0],u=n[1],f=l+2*s,c=u+2*s,d=s+Math.floor(l*(r/o)),h=s+Math.floor(u*(i/a));if(t instanceof DataView){const g=t.byteLength/(f*c),v=g*(h*f+d),y=t.buffer.slice(v,v+g);return new DataView(y)}const p=this.bandCount*(h*f+d);return t.slice(p,p+this.bandCount)}getPixelData(t,n){if(!this.loaded)return null;if(this.tile instanceof MCe){const r=this.tile.getData(),i=Ove(r);if(i){const s=this.tile.getSize();return this.getArrayPixelData_(i,s,t,n)}return this.getImagePixelData_(Fve(r),t,n)}return this.getImagePixelData_(this.tile.getImage(),t,n)}}const uYe={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function I1e(e){return 1/(e+2)}function cYe(){return{tileIds:new Set,representationsByZ:{}}}function P1e(e,t){return e.tileIds.has(Ei(t))}function N1e(e,t,n){const r=e.representationsByZ;n in r||(r[n]=new Set),r[n].add(t),e.tileIds.add(Ei(t.tile))}function sF(e,t){const n=e.layerStatesArray[e.layerIndex];n.extent&&(t=Kg(t,ICe(n.extent,e.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=Kg(t,i))}return t}function Q4(e,t){return`${e.getKey()},${e.getRevision()},${Jy(t)}`}class fYe extends lE{constructor(t,n){super(t,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=Ko(),this.tempMat4=mI(),this.tempTileRange_=new hje(0,0,0,0),this.tempTileCoord_=H4(0,0,0),this.tempSize_=[0,0];const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new $Ce(r),this.frameState=null,this.renderedProjection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const r=this.getLayer().getRenderSource();return!r||fI(sF(t,t.extent))?!1:r.getState()==="ready"}createTileRepresentation(t){return Td()}enqueueTiles(t,n,r,i,s){const o=t.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),f=l.getGutterForProjection(o.projection),c=Ei(l);c in t.wantedTiles||(t.wantedTiles[c]={});const d=t.wantedTiles[c],h=this.tileRepresentationCache,p=a.getMapInternal(),g=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let v=r;v>=g;--v){const y=u.getTileRangeForExtentAndZ(n,v,this.tempTileRange_),b=u.getResolution(v);for(let w=y.minX;w<=y.maxX;++w)for(let E=y.minY;E<=y.maxY;++E){const A=H4(v,w,E,this.tempTileCoord_),T=Q4(l,A);let D,k;if(h.containsKey(T)&&(D=h.get(T),k=D.tile),(!D||D.tile.key!==l.getKey())&&(k=l.getTile(v,w,E,t.pixelRatio,o.projection),!k)||P1e(i,k))continue;D?D.setTile(k):(D=this.createTileRepresentation({tile:k,grid:u,helper:this.helper,gutter:f}),h.set(T,D)),N1e(i,D,v);const R=k.getKey();d[R]=!0,k.getState()===Ts.IDLE&&(t.tileQueue.isKeyQueued(R)||t.tileQueue.enqueue([k,c,u.getTileCoordCenter(A),b]))}}}beforeTilesRender(t,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,n,r,i,s,o,a,l,u,f,c){}renderTileMask(t,n,r,i){}drawTile_(t,n,r,i,s,o,a){if(!n.ready)return;const u=n.tile.tileCoord,f=Jy(u),c=f in o?o[f]:1,d=a.getResolution(r),h=wc(a.getTileSize(r),this.tempSize_),p=a.getOrigin(r),g=a.getTileCoordExtent(u),v=c<1?-1:I1e(r);c<1&&(t.animate=!0);const y=t.viewState,b=y.center[0],w=y.center[1],E=h[0]+2*i,A=h[1]+2*i,T=E/A,D=(b-p[0])/(h[0]*d),k=(p[1]-w)/(h[1]*d),R=y.resolution/d,O=u[1],B=u[2];pje(this.tileTransform_),Mve(this.tileTransform_,2/(t.size[0]*R/E),-2/(t.size[1]*R/E)),mje(this.tileTransform_,y.rotation),Mve(this.tileTransform_,1,1/T),vI(this.tileTransform_,(h[0]*(O-D)-i)/E,(h[1]*(B-k)-i)/A),this.renderTile(n,this.tileTransform_,t,s,d,h,p,g,v,i,c)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,t);const r=t.viewState,i=this.getLayer(),s=i.getRenderSource(),o=s.getTileGridForProjection(r.projection),a=s.getGutterForProjection(r.projection),l=sF(t,t.extent),u=o.getZForResolution(r.resolution,s.zDirection),f=cYe(),c=i.getPreload();if(t.nextExtent){const w=o.getZForResolution(r.nextResolution,s.zDirection),E=sF(t,t.nextExtent);this.enqueueTiles(t,E,w,f,c)}this.enqueueTiles(t,l,u,f,0),c>0&&setTimeout(()=>{this.enqueueTiles(t,l,u-1,f,c-1)},0);const d={};let h=!1;const p=f.representationsByZ;if(u in p){const w=Ei(this),E=t.time;for(const A of p[u]){const T=A.tile;if((T instanceof xI||T instanceof wI)&&T.getState()===Ts.EMPTY)continue;const D=T.tileCoord;if(A.ready){const O=T.getAlpha(w,E);if(O===1){T.endTransition(w);continue}h=!0;const B=Jy(D);d[B]=O}if(this.renderComplete=!1,this.findAltTiles_(o,D,u+1,f))continue;const R=o.getMinZoom();for(let O=u-1;O>=R&&!this.findAltTiles_(o,D,O,f);--O);}}const g=Object.keys(p).map(Number).sort(gje);if(this.beforeTilesMaskRender(t))for(let w=0,E=g.length;w<E;++w){const A=g[w];for(const T of p[A]){const D=T.tile.tileCoord;if(Jy(D)in d)continue;const R=o.getTileCoordExtent(D);this.renderTileMask(T,A,R,I1e(A))}}this.beforeTilesRender(t,h);for(let w=0,E=g.length;w<E;++w){const A=g[w];for(const T of p[A]){const D=T.tile.tileCoord;Jy(D)in d||this.drawTile_(t,T,A,a,l,d,o)}}if(u in p)for(const w of p[u]){const E=w.tile.tileCoord;Jy(E)in d&&this.drawTile_(t,w,u,a,l,d,o)}this.beforeFinalize(t),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const y=this.helper.getCanvas(),b=this.tileRepresentationCache;for(;b.canExpireCache();)b.pop().dispose();return this.postRender(n,t),y}beforeFinalize(t){}findAltTiles_(t,n,r,i){const s=t.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=s.minX;u<=s.maxX;++u)for(let f=s.minY;f<=s.maxY;++f){const c=Q4(l,[r,u,f]);let d=!1;if(a.containsKey(c)){const h=a.get(c);h.ready&&!P1e(i,h.tile)&&(N1e(i,h,r),d=!0)}d||(o=!1)}return o}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach(n=>n.dispose()),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(t=>t.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const Qn={...uYe,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},gC={TEXTURE_COORD:"a_textureCoord"},dYe=[{name:gC.TEXTURE_COORD,size:2,type:$s.FLOAT}];class hYe extends fYe{constructor(t,n){super(t,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new Zv(aE,ZI),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const n=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(n)}if(this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const n=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(n)}}afterHelperCreated(){super.afterHelperCreated();const t=this.helper.getGL();for(const n of this.paletteTextures_)n.getTexture(t);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(t)}super.removeHelper()}createTileRepresentation(t){return new lYe(t)}beforeTilesRender(t,n){super.beforeTilesRender(t,n),this.helper.useProgram(this.program_,t)}renderTile(t,n,r,i,s,o,a,l,u,f,c){const d=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(dYe);let h=0;for(;h<t.textures.length;){const T=`${Qn.TILE_TEXTURE_ARRAY}[${h}]`;this.helper.bindTexture(t.textures[h],h,T),++h}for(let T=0;T<this.paletteTextures_.length;++T){const D=this.paletteTextures_[T],k=D.getTexture(d);this.helper.bindTexture(k,h,D.name),++h}const p=r.viewState,g=o[0]+2*f,v=o[1]+2*f,b=t.tile.tileCoord,w=b[1],E=b[2];this.helper.setUniformMatrixValue(Qn.TILE_TRANSFORM,h3(this.tempMat4,n)),this.helper.setUniformFloatValue(Qn.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(Qn.DEPTH,u);let A=i;f>0&&(A=l,Kg(A,i,A)),this.helper.setUniformFloatVec4(Qn.RENDER_EXTENT,A),this.helper.setUniformFloatValue(Qn.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(Qn.ZOOM,p.zoom),this.helper.setUniformFloatValue(Qn.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(Qn.TEXTURE_PIXEL_HEIGHT,v),this.helper.setUniformFloatValue(Qn.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(Qn.TEXTURE_ORIGIN_X,a[0]+w*o[0]*s-f*s),this.helper.setUniformFloatValue(Qn.TEXTURE_ORIGIN_Y,a[1]-E*o[1]*s+f*s),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const i=this.getLayer(),s=eh(r.pixelToCoordinateTransform,t.slice()),o=r.viewState,a=i.getExtent();if(a&&!uv(ICe(a,o.projection),s))return null;const l=i.getSources(pI([s]),o.resolution);let u,f,c;for(u=l.length-1;u>=0;--u)if(f=l[u],f.getState()==="ready"){if(c=f.getTileGridForProjection(o.projection),f.getWrapX())break;const h=c.getExtent();if(!h||uv(h,s))break}if(u<0)return null;const d=this.tileRepresentationCache;for(let h=c.getZForResolution(o.resolution);h>=c.getMinZoom();--h){const p=c.getTileCoordForCoordAndZ(s,h),g=Q4(f,p);if(!d.containsKey(g))continue;const v=d.get(g),y=v.tile;if((y instanceof xI||y instanceof wI)&&y.getState()===Ts.EMPTY)return null;if(!v.loaded)continue;const b=c.getOrigin(h),w=wc(c.getTileSize(h)),E=c.getResolution(h),A=(s[0]-b[0])/E-p[1]*w[0],T=(b[1]-s[1])/E-p[2]*w[1];return v.getPixelData(A,T)}return null}disposeInternal(){const t=this.helper;if(t){const n=t.getGL();for(const r of this.paletteTextures_)r.delete(n);this.paletteTextures_.length=0,n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}function pYe(e,t){return`operator_${e}_${Object.keys(t.functions).length}`}function Bg(e){const t=e.toString();return t.includes(".")?t:t+".0"}function KI(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${e.length}(${e.map(Bg).join(", ")})`}function yC(e){const t=W_(e),n=t.length>3?t[3]:1;return KI([t[0]/255,t[1]/255,t[2]/255,n])}function mYe(e){const t=wc(e);return KI(t)}const oF={};let gYe=0;function cv(e){return e in oF||(oF[e]=gYe++),oF[e]}function Dd(e){return Bg(cv(e))}function JI(e){return"u_var_"+e}function e6(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const aF="getBandValue",rke="u_paletteTextures",ike="featureId",ske="geometryType";function yYe(e,t,n,r){const i=yje(e,t,n);return QI(i,t,r)}function ri(e){return(t,n,r)=>{const i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=QI(n.args[o],r,t);return e(s,t)}}const vYe={[cr.Get]:(e,t)=>{const r=t.args[0].value;return r in e.properties||(e.properties[r]={name:r,type:t.type}),(e.inFragmentShader?"v_prop_":"a_prop_")+r},[cr.Id]:e=>(e.featureId=!0,(e.inFragmentShader?"v_":"a_")+ike),[cr.GeometryType]:e=>(e.geometryType=!0,(e.inFragmentShader?"v_":"a_")+ske),[cr.LineMetric]:()=>"currentLineMetric",[cr.Var]:(e,t)=>{const r=t.args[0].value;return r in e.variables||(e.variables[r]={name:r,type:t.type}),JI(r)},[cr.Resolution]:()=>"u_resolution",[cr.Zoom]:()=>"u_zoom",[cr.Time]:()=>"u_time",[cr.Any]:ri(e=>`(${e.join(" || ")})`),[cr.All]:ri(e=>`(${e.join(" && ")})`),[cr.Not]:ri(([e])=>`(!${e})`),[cr.Equal]:ri(([e,t])=>`(${e} == ${t})`),[cr.NotEqual]:ri(([e,t])=>`(${e} != ${t})`),[cr.GreaterThan]:ri(([e,t])=>`(${e} > ${t})`),[cr.GreaterThanOrEqualTo]:ri(([e,t])=>`(${e} >= ${t})`),[cr.LessThan]:ri(([e,t])=>`(${e} < ${t})`),[cr.LessThanOrEqualTo]:ri(([e,t])=>`(${e} <= ${t})`),[cr.Multiply]:ri(e=>`(${e.join(" * ")})`),[cr.Divide]:ri(([e,t])=>`(${e} / ${t})`),[cr.Add]:ri(e=>`(${e.join(" + ")})`),[cr.Subtract]:ri(([e,t])=>`(${e} - ${t})`),[cr.Clamp]:ri(([e,t,n])=>`clamp(${e}, ${t}, ${n})`),[cr.Mod]:ri(([e,t])=>`mod(${e}, ${t})`),[cr.Pow]:ri(([e,t])=>`pow(${e}, ${t})`),[cr.Abs]:ri(([e])=>`abs(${e})`),[cr.Floor]:ri(([e])=>`floor(${e})`),[cr.Ceil]:ri(([e])=>`ceil(${e})`),[cr.Round]:ri(([e])=>`floor(${e} + 0.5)`),[cr.Sin]:ri(([e])=>`sin(${e})`),[cr.Cos]:ri(([e])=>`cos(${e})`),[cr.Atan]:ri(([e,t])=>t!==void 0?`atan(${e}, ${t})`:`atan(${e})`),[cr.Sqrt]:ri(([e])=>`sqrt(${e})`),[cr.Match]:ri(e=>{const t=e[0],n=e[e.length-1];let r=null;for(let i=e.length-3;i>=1;i-=2){const s=e[i],o=e[i+1];r=`(${t} == ${s} ? ${o} : ${r||n})`}return r}),[cr.Between]:ri(([e,t,n])=>`(${e} >= ${t} && ${e} <= ${n})`),[cr.Interpolate]:ri(([e,t,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],o=r||n[i+1],a=n[i+2],l=n[i+3];let u;e===Bg(1)?u=`(${t} - ${s}) / (${a} - ${s})`:u=`(pow(${e}, (${t} - ${s})) - 1.0) / (pow(${e}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return r}),[cr.Case]:ri(e=>{const t=e[e.length-1];let n=null;for(let r=e.length-3;r>=0;r-=2){const i=e[r],s=e[r+1];n=`(${i} ? ${s} : ${n||t})`}return n}),[cr.In]:ri(([e,...t],n)=>{const r=pYe("in",n),i=[];for(let s=0;s<t.length;s+=1)i.push(`  if (inputValue == ${t[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${e})`}),[cr.Array]:ri(e=>`vec${e.length}(${e.join(", ")})`),[cr.Color]:ri(e=>{if(e.length===1)return`vec4(vec3(${e[0]} / 255.0), 1.0)`;if(e.length===2)return`vec4(vec3(${e[0]} / 255.0), ${e[1]})`;const t=e.slice(0,3).map(r=>`${r} / 255.0`);if(e.length===3)return`vec4(${t.join(", ")}, 1.0)`;const n=e[3];return`vec4(${t.join(", ")}, ${n})`}),[cr.Band]:ri(([e,t,n],r)=>{if(!(aF in r.functions)){let i="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const u=`${Qn.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[aF]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${Qn.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${Qn.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${aF}(${e}, ${t??"0.0"}, ${n??"0.0"})`}),[cr.Palette]:(e,t)=>{const[n,...r]=t.args,i=r.length,s=new Uint8Array(i*4);for(let u=0;u<r.length;u++){const f=r[u].value,c=W_(f),d=u*4;s[d]=c[0],s[d+1]=c[1],s[d+2]=c[2],s[d+3]=c[3]*255}e.paletteTextures||(e.paletteTextures=[]);const o=`${rke}[${e.paletteTextures.length}]`,a=new iYe(o,s);e.paletteTextures.push(a);const l=QI(n,Si,e);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function QI(e,t,n){if(e instanceof vje){const r=vYe[e.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(e.operator)}`);return r(n,e,t)}if((e.type&Si)>0)return Bg(e.value);if((e.type&PCe)>0)return e.value.toString();if((e.type&Y_)>0)return Dd(e.value.toString());if((e.type&Tl)>0)return yC(e.value);if((e.type&jp)>0)return KI(e.value);if((e.type&z1)>0)return mYe(e.value);throw new Error(`Unexpected expression ${e.value} (expected type ${bje(t)})`)}function bYe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const Ry=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders
`,Fy=bYe();class oke{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Bg(Fy["circle-radius"])} + ${Bg(Fy["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=yC(Fy["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Bg(Fy["stroke-width"]),this.strokeColorExpression_=yC(Fy["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Dd("round"),this.strokeJoinExpression_=Dd("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=yC(Fy["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,n,r){return this.varyings_.push({name:t,type:n,expression:r}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${M1e} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${M1e}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Dd("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Dd("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Dd("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Dd("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));
  float currentLengthPx = lengthToPoint + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPoint / segmentLength);

  if (${this.discardExpression_}) { discard; }

  vec4 color = ${this.strokeColorExpression_};
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  color.a *= smoothstep(0.5, -0.5, distance);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}const tc={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},xYe=["#00f","#0ff","#0f0","#ff0","#f00"];let wYe=class extends cD{constructor(t){t=t||{};const n=Object.assign({},t);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.gradient_=null,this.addChangeListener(tc.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:xYe),this.setBlur(t.blur!==void 0?t.blur:15),this.setRadius(t.radius!==void 0?t.radius:8);const r=t.weight?t.weight:"weight";this.weightFunction_=typeof r=="string"?i=>i.get(r):r,this.setRenderOrder(null)}getBlur(){return this.get(tc.BLUR)}getGradient(){return this.get(tc.GRADIENT)}getRadius(){return this.get(tc.RADIUS)}handleGradientChanged_(){this.gradient_=_Ye(this.getGradient())}setBlur(t){this.set(tc.BLUR,t)}setGradient(t){this.set(tc.GRADIENT,t)}setRadius(t){this.set(tc.RADIUS,t)}createRenderer(){const t=new oke().addAttribute("float a_weight").addVarying("v_weight","float","a_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_weight)");return new tke(this,{className:this.getClassName(),attributes:[{name:"weight",callback:n=>{const r=this.weightFunction_(n);return r!==void 0?As(r,0,1):1}}],uniforms:{u_size:()=>(this.get(tc.RADIUS)+this.get(tc.BLUR))*2,u_blurSlope:()=>this.get(tc.RADIUS)/Math.max(1,this.get(tc.BLUR))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}};function _Ye(e){const r=Jg(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(e.length-1);for(let o=0,a=e.length;o<a;++o)i.addColorStop(o*s,e[o]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class EYe extends xje{constructor(t){super(t),this.vectorRenderer_=new wje(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Ko(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=eh(this.coordinateToVectorPixelTransform_,eh(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,r=t.viewState,i=r.resolution,s=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),NCe(a,this.layerImageRatio_));const l=eu(a)/i,u=Up(a)/i;if(!s[zp.ANIMATING]&&!s[zp.INTERACTING]&&!fI(a)){o.useContainer(null,null);const f=o.context,c=t.layerStatesArray[t.layerIndex],d=Object.assign({},c,{opacity:1}),h=Object.assign({},t,{extent:a,size:[l,u],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),p=this.getLayer().getDeclutter();p&&(h.declutter={[p]:new _je(9)});let g=!0;const v=new $I(a,i,n,f.canvas,function(y){o.prepareFrame(h)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(h,null)&&(o.renderDeclutter(h),o.renderDeferred(h),g=!1),y())});v.addEventListener(kl.CHANGE,()=>{if(v.getState()!==xg.LOADED)return;this.image=g?null:v;const y=v.getPixelRatio(),b=Eje(v.getResolution())*n/y;this.renderedResolution=b,this.coordinateToVectorPixelTransform_=gI(this.coordinateToVectorPixelTransform_,l/2,u/2,1/b,-1/b,0,-r.center[0],-r.center[1])}),v.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,r,i,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,r,i,s):super.forEachFeatureAtCoordinate(t,n,r,i,s)}}class SYe extends cD{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new EYe(this)}}function jn(e,t,n){const r=Aje();return yYe(t,n,r,e)}function AYe(e){const t=W_(e),n=t[0]*256,r=t[1],i=t[2]*256,s=Math.round(t[3]*255);return[n+r,i+s]}const CYe=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    fract(packedColor[1] / 256.0)
  );
}`;function t6(e){return e===Tl||e===z1?2:e===jp?4:1}function eA(e){const t=t6(e);return t>1?`vec${t}`:"float"}function _3(e){return(JSON.stringify(e).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function eP(e,t,n,r){if(`${r}radius`in e&&r!=="icon-"){let i=jn(n,e[`${r}radius`],Si);if(`${r}radius2`in e){const s=jn(n,e[`${r}radius2`],Si);i=`max(${i}, ${s})`}`${r}stroke-width`in e&&(i=`(${i} + ${jn(n,e[`${r}stroke-width`],Si)} * 0.5)`),t.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in e){const i=jn(n,e[`${r}scale`],z1);t.setSymbolSizeExpression(`${t.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in e&&t.setSymbolOffsetExpression(jn(n,e[`${r}displacement`],jp)),`${r}rotation`in e&&t.setSymbolRotationExpression(jn(n,e[`${r}rotation`],Si)),`${r}rotate-with-view`in e&&t.setSymbolRotateWithView(!!e[`${r}rotate-with-view`])}function ake(e,t,n,r,i){let s="vec4(0.)";if(t!==null&&(s=t),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${e})`;s=`mix(${n}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${e}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function tP(e,t,n,r,i){const s=new Image;s.crossOrigin=e[`${r}cross-origin`]===void 0?"anonymous":e[`${r}cross-origin`],s.src=e[`${r}src`],n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],t.addUniform(`vec2 u_texture${i}_size`);const o=`u_texture${i}_size`;return n[`u_texture${i}`]=s,t.addUniform(`sampler2D u_texture${i}`),o}function nP(e,t,n,r,i){let s=jn(n,e[`${t}offset`],jp);if(`${t}offset-origin`in e)switch(e[`${t}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function kYe(e,t,n,r,i){i.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,eP(e,t,r,"circle-");let s=null;"circle-opacity"in e&&(s=jn(i,e["circle-opacity"],Si));let o="coordsPx";"circle-scale"in e&&(o=`coordsPx / ${jn(i,e["circle-scale"],z1)}`);let a=null;"circle-fill-color"in e&&(a=jn(i,e["circle-fill-color"],Tl));let l=null;"circle-stroke-color"in e&&(l=jn(i,e["circle-stroke-color"],Tl));let u=jn(i,e["circle-radius"],Si),f=null;"circle-stroke-width"in e&&(f=jn(i,e["circle-stroke-width"],Si),u=`(${u} + ${f} * 0.5)`);const c=`circleDistanceField(${o}, ${u})`,d=ake(c,a,l,f,s);t.setSymbolColorExpression(d)}function TYe(e,t,n,r,i){i.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,i.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,i.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,eP(e,t,r,"shape-");let s=null;"shape-opacity"in e&&(s=jn(i,e["shape-opacity"],Si));let o="coordsPx";"shape-scale"in e&&(o=`coordsPx / ${jn(i,e["shape-scale"],z1)}`);let a=null;"shape-fill-color"in e&&(a=jn(i,e["shape-fill-color"],Tl));let l=null;"shape-stroke-color"in e&&(l=jn(i,e["shape-stroke-color"],Tl));let u=null;"shape-stroke-width"in e&&(u=jn(i,e["shape-stroke-width"],Si));const f=jn(i,e["shape-points"],Si);let c="0.";"shape-angle"in e&&(c=jn(i,e["shape-angle"],Si));let d,h=jn(i,e["shape-radius"],Si);if(u!==null&&(h=`${h} + ${u} * 0.5`),"shape-radius2"in e){let g=jn(i,e["shape-radius2"],Si);u!==null&&(g=`${g} + ${u} * 0.5`),d=`starDistanceField(${o}, ${f}, ${h}, ${g}, ${c})`}else d=`regularDistanceField(${o}, ${f}, ${h}, ${c})`;const p=ake(d,a,l,u,s);t.setSymbolColorExpression(p)}function DYe(e,t,n,r,i){let s="vec4(1.0)";"icon-color"in e&&(s=jn(i,e["icon-color"],Tl)),"icon-opacity"in e&&(s=`${s} * vec4(1.0, 1.0, 1.0, ${jn(i,e["icon-opacity"],Si)})`);const o=_3(e["icon-src"]),a=tP(e,t,n,"icon-",o);if(t.setSymbolColorExpression(`${s} * texture2D(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in e&&"icon-height"in e&&t.setSymbolSizeExpression(`vec2(${jn(r,e["icon-width"],Si)}, ${jn(r,e["icon-height"],Si)})`),"icon-offset"in e&&"icon-size"in e){const l=jn(r,e["icon-size"],jp),u=t.getSymbolSizeExpression();t.setSymbolSizeExpression(l);const f=nP(e,"icon-",r,"v_quadSizePx",l);t.setTextureCoordinateExpression(`(vec4((${f}).xyxy) + vec4(0., 0., ${l})) / (${u}).xyxy`)}if(eP(e,t,r,"icon-"),"icon-anchor"in e){const l=jn(r,e["icon-anchor"],jp);let u="1.0";"icon-scale"in e&&(u=jn(r,e["icon-scale"],z1));let f;e["icon-anchor-x-units"]==="pixels"&&e["icon-anchor-y-units"]==="pixels"?f=`${l} * ${u}`:e["icon-anchor-x-units"]==="pixels"?f=`${l} * vec2(vec2(${u}).x, v_quadSizePx.y)`:e["icon-anchor-y-units"]==="pixels"?f=`${l} * vec2(v_quadSizePx.x, vec2(${u}).x)`:f=`${l} * v_quadSizePx`;let c=`v_quadSizePx * vec2(0.5, -0.5) + ${f} * vec2(-1., 1.)`;if("icon-anchor-origin"in e)switch(e["icon-anchor-origin"]){case"top-right":c=`v_quadSizePx * -0.5 + ${f}`;break;case"bottom-left":c=`v_quadSizePx * 0.5 - ${f}`;break;case"bottom-right":c=`v_quadSizePx * vec2(-0.5, 0.5) + ${f} * vec2(1., -1.)`;break}t.setSymbolOffsetExpression(`${t.getSymbolOffsetExpression()} + ${c}`)}}function LYe(e,t,n,r,i){if("stroke-color"in e&&t.setStrokeColorExpression(jn(i,e["stroke-color"],Tl)),"stroke-pattern-src"in e){const s=_3(e["stroke-pattern-src"]),o=tP(e,t,n,"stroke-pattern-",s);let a=o,l="vec2(0.)";"stroke-pattern-offset"in e&&"stroke-pattern-size"in e&&(a=jn(i,e["stroke-pattern-size"],jp),l=nP(e,"stroke-pattern-",i,o,a));let u="0.";"stroke-pattern-spacing"in e&&(u=jn(i,e["stroke-pattern-spacing"],Si)),i.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord);
}`;const f=`u_texture${s}`;let c="1.";"stroke-color"in e&&(c=t.getStrokeColorExpression()),t.setStrokeColorExpression(`${c} * sampleStrokePattern(${f}, ${o}, ${l}, ${a}, ${u}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in e&&t.setStrokeWidthExpression(jn(r,e["stroke-width"],Si)),"stroke-offset"in e&&t.setStrokeOffsetExpression(jn(r,e["stroke-offset"],Si)),"stroke-line-cap"in e&&t.setStrokeCapExpression(jn(r,e["stroke-line-cap"],Y_)),"stroke-line-join"in e&&t.setStrokeJoinExpression(jn(r,e["stroke-line-join"],Y_)),"stroke-miter-limit"in e&&t.setStrokeMiterLimitExpression(jn(r,e["stroke-miter-limit"],Si)),"stroke-line-dash"in e){i.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Dd("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${Dd("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let s=e["stroke-line-dash"].map(h=>jn(i,h,Si));s.length%2===1&&(s=[...s,...s]);let o="0.";"stroke-line-dash-offset"in e&&(o=jn(r,e["stroke-line-dash-offset"],Si));const l=`dashDistanceField_${_3(e["stroke-line-dash"])}`,u=s.map((h,p)=>`float dashLength${p} = ${h};`),f=s.map((h,p)=>`dashLength${p}`).join(" + ");let c="0.",d=`getSingleDashDistance(distance, radius, ${c}, dashLength0, totalDashLength, capType)`;for(let h=2;h<s.length;h+=2)c=`${c} + dashLength${h-2} + dashLength${h-1}`,d=`min(${d}, getSingleDashDistance(distance, radius, ${c}, dashLength${h}, totalDashLength, capType))`;i.functions[l]=`float ${l}(float distance, float radius, float capType) {
  ${u.join(`
  `)}
  float totalDashLength = ${f};
  return ${d};
}`,t.setStrokeDistanceFieldExpression(`${l}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}function RYe(e,t,n,r,i){if("fill-color"in e&&t.setFillColorExpression(jn(i,e["fill-color"],Tl)),"fill-pattern-src"in e){const s=_3(e["fill-pattern-src"]),o=tP(e,t,n,"fill-pattern-",s);let a=o,l="vec2(0.)";"fill-pattern-offset"in e&&"fill-pattern-size"in e&&(a=jn(i,e["fill-pattern-size"],jp),l=nP(e,"fill-pattern-",i,o,a)),i.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const u=`u_texture${s}`;let f="1.";"fill-color"in e&&(f=t.getFillColorExpression()),t.setFillColorExpression(`${f} * sampleFillPattern(${u}, ${o}, ${l}, ${a}, pxOrigin, pxPos)`)}}function lke(e,t){const n=e6(),r={...e6(),inFragmentShader:!0,variables:n.variables},i=new oke,s={};if("icon-src"in e?DYe(e,i,s,n,r):"shape-points"in e?TYe(e,i,s,n,r):"circle-radius"in e&&kYe(e,i,s,n,r),LYe(e,i,s,n,r),RYe(e,i,s,n,r),e.filter){const l=jn(r,e.filter,PCe);i.setFragmentDiscardExpression(`!${l}`)}for(const l in r.variables){const u=r.variables[l],f=JI(u.name);let c=eA(u.type);u.type===Tl&&(c="vec4"),i.addUniform(`${c} ${f}`),s[f]=()=>{const d=t[u.name];return typeof d=="number"?d:typeof d=="boolean"?d?1:0:u.type===Tl?W_(d||"#eee"):typeof d=="string"?cv(d):d}}for(const l in r.properties){const u=r.properties[l];n.properties[l]||(n.properties[l]=u);let f=eA(u.type),c=`a_prop_${u.name}`;u.type===Tl&&(f="vec4",c=`unpackColor(${c})`,i.addVertexShaderFunction(CYe)),i.addVarying(`v_prop_${u.name}`,f,c)}for(const l in n.properties){const u=n.properties[l];i.addAttribute(`${eA(u.type)} a_prop_${u.name}`)}for(const l in n.functions)i.addVertexShaderFunction(n.functions[l]);for(const l in r.functions)i.addFragmentShaderFunction(r.functions[l]);const o={};for(const l in n.properties){const u=n.properties[l],f=c=>{const d=c.get(u.name);return u.type===Tl?AYe([...W_(d||"#eee")]):typeof d=="string"?cv(d):typeof d=="boolean"?d?1:0:d};o[`prop_${u.name}`]={size:t6(u.type),callback:f}}function a(l,u,f,c){const d=n[l],h=r[l];if(!d&&!h)return;const p=eA(f),g=t6(f);i.addAttribute(`${p} a_${u}`),h&&i.addVarying(`v_${u}`,p,`a_${u}`),o[u]={size:g,callback:c}}return a("geometryType",ske,Y_,l=>cv(Sje(l.getGeometry()))),a("featureId",ike,Y_|Si,l=>{const u=l.getId()??null;return typeof u=="string"?cv(u):u}),{builder:i,attributes:o,uniforms:s}}class FYe extends _I{constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.parseResult_=lke(t.style,this.styleVariables_),this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map(n=>({name:n,...this.parseResult_.attributes[n]}));return new tke(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}function B1e(e,t){const n=`
    attribute vec2 ${gC.TEXTURE_COORD};
    uniform mat4 ${Qn.TILE_TRANSFORM};
    uniform float ${Qn.TEXTURE_PIXEL_WIDTH};
    uniform float ${Qn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Qn.TEXTURE_RESOLUTION};
    uniform float ${Qn.TEXTURE_ORIGIN_X};
    uniform float ${Qn.TEXTURE_ORIGIN_Y};
    uniform float ${Qn.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${gC.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Qn.TEXTURE_ORIGIN_X} + ${Qn.TEXTURE_RESOLUTION} * ${Qn.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Qn.TEXTURE_ORIGIN_Y} - ${Qn.TEXTURE_RESOLUTION} * ${Qn.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Qn.TILE_TRANSFORM} * vec4(${gC.TEXTURE_COORD}, ${Qn.DEPTH}, 1.0);
    }
  `,r={...e6(),inFragmentShader:!0,bandCount:t},i=[];if(e.color!==void 0){const c=jn(r,e.color,Tl);i.push(`color = ${c};`)}if(e.contrast!==void 0){const c=jn(r,e.contrast,Si);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb - (${c} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.exposure!==void 0){const c=jn(r,e.exposure,Si);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.saturation!==void 0){const c=jn(r,e.saturation,Si);i.push(`
      float saturation = ${c} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(e.gamma!==void 0){const c=jn(r,e.gamma,Si);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${c}));`)}if(e.brightness!==void 0){const c=jn(r,e.brightness,Si);i.push(`color.rgb = clamp(color.rgb + ${c}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(r.variables).length;if(o>1&&!e.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let c=0;c<o;++c){const d=r.variables[Object.keys(r.variables)[c]];if(!(d.name in e.variables))throw new Error(`Missing '${d.name}' in style variables`);const h=JI(d.name);s[h]=function(){let p=e.variables[d.name];return typeof p=="string"&&(p=cv(p)),p!==void 0?p:-9999999}}const a=Object.keys(s).map(function(c){return`uniform float ${c};`}),l=Math.ceil(t/4);a.push(`uniform sampler2D ${Qn.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${rke}[${r.paletteTextures.length}];`);const u=Object.keys(r.functions).map(function(c){return r.functions[c]}),f=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Qn.RENDER_EXTENT};
    uniform float ${Qn.TRANSITION_ALPHA};
    uniform float ${Qn.TEXTURE_PIXEL_WIDTH};
    uniform float ${Qn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Qn.RESOLUTION};
    uniform float ${Qn.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Qn.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Qn.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Qn.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Qn.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Qn.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Qn.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:f,uniforms:s,paletteTextures:r.paletteTextures}}class E3 extends Cje{constructor(t){t=t?Object.assign({},t):{};const n=t.style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(q4.SOURCE,this.handleSourceUpdate_)}getSources(t,n){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const t=this.getSource();if(t)if(t.getState()==="loading"){const n=()=>{t.getState()==="ready"&&(t.removeEventListener("change",n),this.setStyle(this.style_))};t.addEventListener("change",n)}else this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const t=B1e(this.style_,this.getSourceBandCount_());return new hYe(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,n){const r=this.getRenderer();let i;for(let s=0,o=n.length;s<o;++s)this.renderedSource_=n[s],r.prepareFrame(t)&&(i=r.renderFrame(t));return i}render(t,n){this.rendered=!0;const r=t.viewState,i=this.getSources(t.extent,r.resolution);let s=!0;for(let a=0,l=i.length;a<l;++a){const u=i[a],f=u.getState();if(f=="loading"){const c=()=>{u.getState()=="ready"&&(u.removeEventListener("change",c),this.changed())};u.addEventListener("change",c)}s=s&&f=="ready"}const o=this.renderSources(t,i);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=r.resolution,o;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(t.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(a.length>0)return this.renderSources(t,a)}return o}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const n=B1e(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}E3.prototype.dispose;class OYe{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(t,n){for(let r=0;r<t.length;r++)this.addFeature(t[r],n)}addFeature(t,n){let r=t.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,t))}clearFeatureEntryInPointBatch_(t){const n=Ei(t),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(t){const n=Ei(t),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(t){const n=Ei(t),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(t,n){var i;const r=t.getType();switch(r){case"GeometryCollection":{const s=t.getGeometriesArray();for(const o of s)this.addGeometry_(o,n);break}case"MultiPolygon":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEndss(),n,Ei(n),s.getStride());break}case"MultiLineString":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEnds(),n,Ei(n),s.getStride());break}case"MultiPoint":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Ei(n),s.getStride());break}case"Polygon":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEnds(),n,Ei(n),s.getStride());break}case"Point":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Ei(n),s.getStride());break}case"LineString":case"LinearRing":{const s=t,o=s.getStride();this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Ei(n),o,(i=s.getLayout)==null?void 0:i.call(s));break}}}addCoordinates_(t,n,r,i,s,o,a){let l;switch(t){case"MultiPolygon":{const u=r;for(let f=0,c=u.length;f<c;f++){let d=u[f];const h=f>0?u[f-1]:null,p=h?h[h.length-1]:0,g=d[d.length-1];d=p>0?d.map(v=>v-p):d,this.addCoordinates_("Polygon",n.slice(p,g),d,i,s,o,a)}break}case"MultiLineString":{const u=r;for(let f=0,c=u.length;f<c;f++){const d=f>0?u[f-1]:0;this.addCoordinates_("LineString",n.slice(d,u[f]),null,i,s,o,a)}break}case"MultiPoint":for(let u=0,f=n.length;u<f;u+=o)this.addCoordinates_("Point",n.slice(u,u+2),null,i,s,null,null);break;case"Polygon":{const u=r;if(i instanceof kje){const d=Tje(n,u);if(d.length>1){this.addCoordinates_("MultiPolygon",n,d,i,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/o;const f=r.length,c=r.map((d,h,p)=>h>0?(d-p[h-1])/o:d/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=f,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(MYe(n,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(c),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=f;for(let d=0,h=u.length;d<h;d++){const p=d>0?u[d-1]:0;this.addCoordinates_("LinearRing",n.slice(p,u[d]),null,i,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push($Ye(n,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(t,n){const r=this.uidToRef_.get(t),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(t,i)),n}returnRef_(t,n){if(!t)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(t),this.uidToRef_.delete(n),this.freeGlobalRef_.push(t)}changeFeature(t){this.removeFeature(t);const n=t.getGeometry();n&&this.addGeometry_(n,t)}removeFeature(t){let n;n=this.clearFeatureEntryInPointBatch_(t)||n,n=this.clearFeatureEntryInPolygonBatch_(t)||n,n=this.clearFeatureEntryInLineStringBatch_(t)||n,n&&this.returnRef_(n.ref,Ei(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(t){return this.refToFeature_.get(t)}}function MYe(e,t){return t===2?e:e.filter((n,r)=>r%t<2)}function $Ye(e,t,n){return t===3&&n==="XYM"?e:t===4?e.filter((r,i)=>i%t!==2):t===3?e.map((r,i)=>i%t!==2?r:0):new Array(e.length*1.5).fill(0).map((r,i)=>i%3===2?0:e[Math.round(i/1.5)])}function rP(e,t,n,r){let i=0;for(const s in t){const o=t[s],a=o.callback.call(n,n.feature);e[r+i++]=a[0]??a,!(!o.size||o.size===1)&&(e[r+i++]=a[1],!(o.size<3)&&(e[r+i++]=a[2],!(o.size<4)&&(e[r+i++]=a[3])))}return i}function AD(e){return Object.keys(e).reduce((t,n)=>t+(e[n].size||1),0)}function IYe(e,t,n,r){const i=(2+AD(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const s=[];let o=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++)s[0]=l.flatCoordss[u][0],s[1]=l.flatCoordss[u][1],eh(r,s),t[o++]=s[0],t[o++]=s[1],o+=rP(t,n,l,o)}return t}function PYe(e,t,n,r){const i=3*e.verticesCount+(1+AD(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const s=[];let o=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){s.length=l.flatCoordss[u].length,BCe(l.flatCoordss[u],0,s.length,3,r,s,3),o+=rP(t,n,l,o),t[o++]=s.length/3;for(let c=0,d=s.length;c<d;c+=3)t[o++]=s[c],t[o++]=s[c+1],t[o++]=s[c+2]}}return t}function NYe(e,t,n,r){const i=2*e.verticesCount+(1+AD(n))*e.geometriesCount+e.ringsCount;(!t||t.length!==i)&&(t=new Float32Array(i));const s=[];let o=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){s.length=l.flatCoordss[u].length,BCe(l.flatCoordss[u],0,s.length,2,r,s),o+=rP(t,n,l,o),t[o++]=l.ringsVerticesCounts[u].length;for(let c=0,d=l.ringsVerticesCounts[u].length;c<d;c++)t[o++]=l.ringsVerticesCounts[u][c];for(let c=0,d=s.length;c<d;c+=2)t[o++]=s[c],t[o++]=s[c+1]}}return t}const BYe=[],lF=Q3e();let zYe=0;const nf={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class jYe{constructor(t,n,r,i){this.helper_,this.hitDetectionEnabled_=i;let s=t;if(!("builder"in t)){const u=lke(t,n);s={builder:u.builder,attributes:u.attributes,uniforms:u.uniforms}}this.fillProgram_,this.strokeProgram_,this.symbolProgram_,this.hasFill_=!!s.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=s.builder.getFillVertexShader(),this.fillFragmentShader_=s.builder.getFillFragmentShader()),this.hasStroke_=!!s.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=s.builder.getStrokeVertexShader(),this.strokeFragmentShader_=s.builder.getStrokeFragmentShader()),this.hasSymbol_=!!s.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=s.builder.getSymbolVertexShader(),this.symbolFragmentShader_=s.builder.getSymbolFragmentShader());const a=this.hitDetectionEnabled_?{hitColor:{callback(){return K3e(this.ref,BYe)},size:4}}:{};this.customAttributes_=Object.assign({},a,s.attributes),this.uniforms_=s.uniforms;const l=Object.entries(this.customAttributes_).map(([u,f])=>({name:`a_${u}`,size:f.size||1,type:$s.FLOAT}));this.polygonAttributesDesc_=[{name:nf.POSITION,size:2,type:$s.FLOAT},...l],this.lineStringAttributesDesc_=[{name:nf.SEGMENT_START,size:2,type:$s.FLOAT},{name:nf.MEASURE_START,size:1,type:$s.FLOAT},{name:nf.SEGMENT_END,size:2,type:$s.FLOAT},{name:nf.MEASURE_END,size:1,type:$s.FLOAT},{name:nf.JOIN_ANGLES,size:2,type:$s.FLOAT},{name:nf.DISTANCE,size:1,type:$s.FLOAT},{name:nf.PARAMETERS,size:1,type:$s.FLOAT},...l],this.pointAttributesDesc_=[{name:nf.POSITION,size:2,type:$s.FLOAT},{name:nf.INDEX,size:1,type:$s.FLOAT},...l],this.setHelper(r)}async generateBuffers(t,n){const r=this.generateRenderInstructions_(t,n),[i,s,o]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=V_(Ko(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(t,n){const r=this.hasFill_?NYe(t.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?PYe(t.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?IYe(t.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(t,n,r){if(t===null)return null;const i=zYe++;let s;switch(n){case"Polygon":s=m_.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=m_.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=m_.GENERATE_POINT_BUFFERS;break}const o={id:i,type:s,renderInstructions:t.buffer,renderInstructionsTransform:r,customAttributesSize:AD(this.customAttributes_)};return lF.postMessage(o,[t.buffer]),t=null,new Promise(a=>{const l=u=>{const f=u.data;if(f.id!==i||(lF.removeEventListener("message",l),!this.helper_.getGL()))return;const c=new Zv(oE,t2).fromArrayBuffer(f.vertexBuffer),d=new Zv(aE,t2).fromArrayBuffer(f.indexBuffer);this.helper_.flushBufferData(c),this.helper_.flushBufferData(d),a([d,c])};lF.addEventListener("message",l)})}render(t,n,r){this.hasFill_&&this.renderInternal_(t.polygonBuffers[0],t.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,n,r),this.hasStroke_&&this.renderInternal_(t.lineStringBuffers[0],t.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,n,r),this.hasSymbol_&&this.renderInternal_(t.pointBuffers[0],t.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,n,r)}renderInternal_(t,n,r,i,s,o){const a=t.getSize();a!==0&&(this.helper_.useProgram(r,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(t),this.helper_.enableAttributes(i),o(),this.helper_.drawElements(0,a))}setHelper(t,n=null){this.helper_=t,this.hasFill_&&(this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_&&(this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_&&(this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_)),this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1])))}}const Oy={...cf,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class UYe extends lE{constructor(t,n){const r={[Oy.RENDER_EXTENT]:[0,0,0,0],[Oy.PATTERN_ORIGIN]:[0,0],[Oy.GLOBAL_ALPHA]:1};super(t,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=uD(),this.currentTransform_=Ko(),this.tmpCoords_=[0,0],this.tmpTransform_=Ko(),this.tmpMat4_=mI(),this.currentFrameStateTransform_=Ko(),this.styleVariables_={},this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(n),this.batch_=new OYe,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(t){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[gp(n,yp.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),gp(n,yp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),gp(n,yp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),gp(n,yp.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(t){this.styleVariables_=t.variables,this.styles_=Array.isArray(t.style)?t.style:[t.style]}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map(t=>new jYe(t,this.styleVariables_,this.helper,this.hitDetectionEnabled_))}reset(t){this.applyOptions_(t),this.helper&&this.createRenderers_(),super.reset(t)}afterHelperCreated(){this.styleRenderers_.length?this.styleRenderers_.forEach((t,n)=>t.setHelper(this.helper,this.buffers_[n])):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Z3e(this.helper))}handleSourceFeatureAdded_(t,n){const r=n.feature;this.batch_.addFeature(r,t)}handleSourceFeatureChanged_(t){const n=t.feature;this.batch_.changeFeature(n)}handleSourceFeatureDelete_(t){const n=t.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(t){Dje(this.tmpTransform_,this.currentFrameStateTransform_),U_(this.tmpTransform_,t),this.helper.setUniformMatrixValue(Oy.PROJECTION_MATRIX,h3(this.tmpMat4_,this.tmpTransform_)),V_(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(Oy.SCREEN_TO_WORLD_MATRIX,h3(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,V_(this.tmpTransform_,t),eh(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(Oy.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,s]=eke(t,this.getLayer());this.helper.prepareDraw(t),this.renderWorlds(t,!1,r,i,s),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),o}prepareFrameInternal(t){this.initialFeaturesAdded_||(this.addInitialFeatures_(t),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=t.viewState,s=!t.viewHints[zp.ANIMATING]&&!t.viewHints[zp.INTERACTING],o=!H_(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,u=i.resolution,f=n instanceof cD?n.getRenderBuffer():0,c=yI(t.extent,f*u);r.loadFeatures(c,u,l),this.ready=!1;const d=this.helper.makeProjectionTransform(t,Ko()),h=this.styleRenderers_.map((p,g)=>p.generateBuffers(this.batch_,d).then(v=>{this.buffers_[g]&&this.disposeBuffers(this.buffers_[g]),this.buffers_[g]=v}));Promise.all(h).then(()=>{this.ready=!0,this.getLayer().changed()}),this.previousExtent_=t.extent.slice()}return!0}renderWorlds(t,n,r,i,s){let o=r;n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0));do{this.helper.makeProjectionTransform(t,this.currentFrameStateTransform_),vI(this.currentFrameStateTransform_,o*s,0);for(let a=0,l=this.styleRenderers_.length;a<l;a++){const u=this.styleRenderers_[a],f=this.buffers_[a];f&&u.render(f,t,()=>{this.applyUniforms_(f.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)})}}while(++o<i)}forEachFeatureAtCoordinate(t,n,r,i,s){if(kc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const o=eh(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=J3e(l),f=this.batch_.getFeatureFromRef(u);if(f)return i(f,this.getLayer(),null)}disposeBuffers(t){t.pointBuffers&&t.pointBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),t.lineStringBuffers&&t.lineStringBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),t.polygonBuffers&&t.polygonBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n))}disposeInternal(){this.buffers_.forEach(t=>{this.disposeBuffers(t)}),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(t){OCe(t)}),this.sourceListenKeys_=null),super.disposeInternal()}}class qYe extends _I{constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.style_=t.style,this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){return new UYe(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}setStyle(t){this.style=t,this.clearRenderer(),this.changed()}}const HYe=Object.freeze(Object.defineProperty({__proto__:null,Graticule:tHe,Group:p3,Heatmap:wYe,Image:EI,Layer:_I,Tile:m3,Vector:cI,VectorImage:SYe,VectorTile:zCe,WebGLPoints:FYe,WebGLTile:E3,WebGLVector:qYe},Symbol.toStringTag,{value:"Module"}));function GYe(e){const t=e[0],n=new Array(t);let r=1<<t-1,i,s;for(i=0;i<t;++i)s=48,e[1]&r&&(s+=1),e[2]&r&&(s+=2),n[i]=String.fromCharCode(s),r>>=1;return n.join("")}const VYe='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class WYe extends hh{constructor(t){const n=t.hidpi!==void 0?t.hidpi:!1;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:oi("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=n,this.culture_=t.culture!==void 0?t.culture:"en-us",this.maxZoom_=t.maxZoom!==void 0?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(i=>i.json()).then(i=>this.handleImageryMetadataResponse(i))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(t.statusCode!=200||t.statusDescription!="OK"||t.authenticationResultCode!="ValidCredentials"||t.resourceSets.length!=1||t.resourceSets[0].resources.length!=1){this.setState("error");return}const n=t.resourceSets[0].resources[0],r=this.maxZoom_==-1?n.zoomMax:this.maxZoom_,i=this.getProjection(),s=nE(i),o=this.hidpi_?2:1,a=n.imageWidth==n.imageHeight?n.imageWidth/o:[n.imageWidth/o,n.imageHeight/o],l=rE({extent:s,minZoom:n.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const u=this.culture_,f=this.hidpi_,c=this.placeholderTiles_;if(this.tileUrlFunction=SI(n.imageUrlSubdomains.map(function(d){const h=[0,0,0],p=n.imageUrl.replace("{subdomain}",d).replace("{culture}",u);return function(g,v,y){if(!g)return;H4(g[0],g[1],g[2],h);const b=new URL(p.replace("{quadkey}",GYe(h))),w=b.searchParams;return f&&(w.set("dpi","d1"),w.set("device","mobile")),c===!0?w.delete("n"):c===!1&&w.set("n","z"),b.toString()}})),n.imageryProviders){const d=AI(oi("EPSG:4326"),this.getProjection());this.setAttributions(h=>{const p=[],g=h.viewState,v=this.getTileGrid(),y=v.getZForResolution(g.resolution,this.zDirection),w=v.getTileCoordForCoordAndZ(g.center,y)[0];return n.imageryProviders.map(function(E){let A=!1;const T=E.coverageAreas;for(let D=0,k=T.length;D<k;++D){const R=T[D];if(w>=R.zoomMin&&w<=R.zoomMax){const O=R.bbox,B=[O[1],O[0],O[3],O[2]],K=Vv(B,d);if(Gv(K,h.extent)){A=!0;break}}}A&&p.push(E.attribution)}),p.push(VYe),p})}this.setState("ready")}}class YYe extends X_{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:t.maxZoom!==void 0?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_);if(this.templateCache_[t]){this.applyTemplate_(this.templateCache_[t]);return}let n="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(n+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",n),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(t,n){const r=n.target;if(!r.status||r.status>=200&&r.status<300){let i;try{i=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(i),this.templateCache_[t]=i,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const n="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)}}class XYe extends Q2{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(n){const r=n.getGeometry();return kc(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,n,r){var i;(i=this.source)==null||i.loadFeatures(t,n,r),n!==this.resolution&&(this.resolution=n,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(kl.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(kl.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,n){const r=t===0?0:Math.min(n,t)/t,i=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=n,this.interpolationRatio=r,i&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=uD(),n=this.distance*this.resolution,r=this.source.getFeatures(),i={};for(let s=0,o=r.length;s<o;s++){const a=r[s];if(!(Ei(a)in i)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();Lje(u,t),yI(t,n,t);const f=this.source.getFeaturesInExtent(t).filter(function(c){const d=Ei(c);return d in i?!1:(i[d]=!0,!0)});this.features.push(this.createCluster(f,t))}}}}createCluster(t,n){const r=[0,0];for(let a=t.length-1;a>=0;--a){const l=this.geometryFunction(t[a]);l?Rje(r,l.getCoordinates()):t.splice(a,1)}Fje(r,1/t.length);const i=Dp(n),s=this.interpolationRatio,o=new mc([r[0]*(1-s)+i[0]*s,r[1]*(1-s)+i[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,t):new au({geometry:o,features:t})}}class uE extends fD{constructor(t){const n=t.projection===void 0?"EPSG:3857":t.projection;let r=t.tileGrid;r===void 0&&n&&(r=rE({extent:nE(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:n,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.tileSize_=t.tileSize?wc(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=t.bandCount===void 0?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?wc(n.getTileSize(t)):[256,256]}getGutterForProjection(t){const n=this.getProjection();return(!n||mC(n,t))&&!this.transformMatrix?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,n,r,i,s){const o=this.tileGrid||this.getTileGridForProjection(s||i),a=Math.max.apply(null,o.getResolutions().map((h,p)=>{const g=wc(o.getTileSize(p)),v=this.getTileSize(p);return Math.max(v[0]/g[0],v[1]/g[1])})),l=this.getTileGridForProjection(i),u=[t,n,r],f=this.getTileCoordForTileUrlFunction(u,i),c=Object.assign({sourceProj:s||i,sourceTileGrid:o,targetProj:i,targetTileGrid:l,tileCoord:u,wrappedTileCoord:f,pixelRatio:a,gutter:this.gutter_,getTileFunction:(h,p,g,v)=>this.getTile(h,p,g,v),transformMatrix:this.transformMatrix},this.tileOptions),d=new wI(c);return d.key=this.getKey(),d}getTile(t,n,r,i,s){var w;const o=this.getProjection();if(s&&(o&&!mC(o,s)||this.transformMatrix))return this.getReprojTile_(t,n,r,s,o);const a=this.getTileSize(t),l=this.loader_,u=new AbortController,f={signal:u.signal,crossOrigin:this.crossOrigin_},c=this.getTileCoordForTileUrlFunction([t,n,r]);if(!c)return null;const d=c[0],h=c[1],p=c[2],g=(w=this.getTileGrid())==null?void 0:w.getFullTileRange(d);g&&(f.maxY=g.getHeight()-1);function v(){return $je(function(){return l(d,h,p,f)})}const y=Object.assign({tileCoord:[t,n,r],loader:v,size:a,controller:u},this.tileOptions),b=new MCe(y);return b.key=this.getKey(),b.addEventListener(kl.CHANGE,this.handleTileChange_),b}handleTileChange_(t){const n=t.target,r=Ei(n),i=n.getState();let s;i==Ts.LOADING?(this.tileLoadingKeys_[r]=!0,s=JR.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Ts.ERROR?JR.TILELOADERROR:i==Ts.LOADED?JR.TILELOADEND:void 0),s&&this.dispatchEvent(new Oje(s,n))}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||mC(n,t))&&!this.transformMatrix)return this.tileGrid;const r=Ei(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=Mje(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,n){const r=oi(t);if(r){const i=Ei(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=n)}}}function oa(e){return(t,...n)=>ZYe(e,t,n)}function X1(e,t){return oa(uke(e,t).get)}const{apply:ZYe,construct:wjt,defineProperty:_jt,get:Ejt,getOwnPropertyDescriptor:uke,getPrototypeOf:iP,has:Sjt,ownKeys:KYe,set:Ajt,setPrototypeOf:Cjt}=Reflect,{iterator:cE,species:kjt,toStringTag:JYe,for:Tjt}=Symbol,QYe=Object,{create:sP,defineProperty:eXe,freeze:Djt,is:Ljt}=QYe,tXe=Array,nXe=tXe.prototype,cke=nXe[cE],rXe=oa(cke),fke=ArrayBuffer,iXe=fke.prototype;X1(iXe,"byteLength");const z1e=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;z1e&&X1(z1e.prototype,"byteLength");const dke=iP(Uint8Array);dke.from;const rl=dke.prototype;rl[cE];oa(rl.keys);oa(rl.values);oa(rl.entries);oa(rl.set);oa(rl.reverse);oa(rl.fill);oa(rl.copyWithin);oa(rl.sort);oa(rl.slice);oa(rl.subarray);X1(rl,"buffer");X1(rl,"byteOffset");X1(rl,"length");X1(rl,JYe);const sXe=Uint8Array,hke=Uint16Array,oP=Uint32Array,oXe=Float32Array,n2=iP([][cE]()),pke=oa(n2.next),aXe=oa(function*(){}().next),lXe=iP(n2),uXe=DataView.prototype,cXe=oa(uXe.getUint16),aP=WeakMap,mke=aP.prototype,gke=oa(mke.get),fXe=oa(mke.set),yke=new aP,dXe=sP(null,{next:{value:function(){const t=gke(yke,this);return pke(t)}},[cE]:{value:function(){return this}}});function hXe(e){if(e[cE]===cke&&n2.next===pke)return e;const t=sP(dXe);return fXe(yke,t,rXe(e)),t}const pXe=new aP,mXe=sP(lXe,{next:{value:function(){const t=gke(pXe,this);return aXe(t)},writable:!0,configurable:!0}});for(const e of KYe(n2))e!=="next"&&eXe(mXe,e,uke(n2,e));const vke=new fke(4),gXe=new oXe(vke),yXe=new oP(vke),rf=new hke(512),sf=new sXe(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(rf[e]=0,rf[e|256]=32768,sf[e]=24,sf[e|256]=24):t<-14?(rf[e]=1024>>-t-14,rf[e|256]=1024>>-t-14|32768,sf[e]=-t-1,sf[e|256]=-t-1):t<=15?(rf[e]=t+15<<10,rf[e|256]=t+15<<10|32768,sf[e]=13,sf[e|256]=13):t<128?(rf[e]=31744,rf[e|256]=64512,sf[e]=24,sf[e|256]=24):(rf[e]=31744,rf[e|256]=64512,sf[e]=13,sf[e|256]=13)}const lP=new oP(2048);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(t&8388608);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,lP[e]=t|n}for(let e=1024;e<2048;++e)lP[e]=939524096+(e-1024<<13);const Z1=new oP(64);for(let e=1;e<31;++e)Z1[e]=e<<23;Z1[31]=1199570944;Z1[32]=2147483648;for(let e=33;e<63;++e)Z1[e]=2147483648+(e-32<<23);Z1[63]=3347054592;const bke=new hke(64);for(let e=1;e<64;++e)e!==32&&(bke[e]=1024);function vXe(e){const t=e>>10;return yXe[0]=lP[bke[t]+(e&1023)]+Z1[t],gXe[0]}function xke(e,t,...n){return vXe(cXe(e,t,...hXe(n)))}var tA={exports:{}},j1e;function bXe(){if(j1e)return tA.exports;j1e=1;function e(t,n,r){const i=r&&r.debug||!1;i&&console.log("[xml-utils] getting "+n+" in "+t);const s=typeof t=="object"?t.outer:t,o=s.slice(0,s.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const u=a[l],f=n+"\\="+u+"([^"+u+"]*)"+u;i&&console.log("[xml-utils] pattern:",f);const d=new RegExp(f).exec(o);if(i&&console.log("[xml-utils] match:",d),d)return d[1]}}return tA.exports=e,tA.exports.default=e,tA.exports}var xXe=bXe();const uF=sa(xXe);var nA={exports:{}},rA={exports:{}},iA={exports:{}},U1e;function wXe(){if(U1e)return iA.exports;U1e=1;function e(t,n,r){const s=new RegExp(n).exec(t.slice(r));return s?r+s.index:-1}return iA.exports=e,iA.exports.default=e,iA.exports}var sA={exports:{}},q1e;function _Xe(){if(q1e)return sA.exports;q1e=1;function e(t,n,r){const s=new RegExp(n).exec(t.slice(r));return s?r+s.index+s[0].length-1:-1}return sA.exports=e,sA.exports.default=e,sA.exports}var oA={exports:{}},H1e;function EXe(){if(H1e)return oA.exports;H1e=1;function e(t,n){const r=new RegExp(n,"g"),i=t.match(r);return i?i.length:0}return oA.exports=e,oA.exports.default=e,oA.exports}var G1e;function SXe(){if(G1e)return rA.exports;G1e=1;const e=wXe(),t=_Xe(),n=EXe();function r(i,s,o){const a=o&&o.debug||!1,l=!(o&&typeof o.nested===!1),u=o&&o.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",s," and ",o);const f=e(i,`<${s}[ 
>/]`,u);if(a&&console.log("[xml-utils] start:",f),f===-1)return;const c=i.slice(f+s.length);let d=t(c,"^[^<]*[ /]>",0);const h=d!==-1&&c[d-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",h),h===!1)if(l){let y=0,b=1,w=0;for(;(d=t(c,"[ /]"+s+">",y))!==-1;){const E=c.substring(y,d+1);if(b+=n(E,"<"+s+`[ 
	>]`),w+=n(E,"</"+s+">"),w>=b)break;y=d}}else d=t(c,"[ /]"+s+">",0);const p=f+s.length+d+1;if(a&&console.log("[xml-utils] end:",p),p===-1)return;const g=i.slice(f,p);let v;return h?v=null:v=g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:v,outer:g,start:f,end:p}}return rA.exports=r,rA.exports.default=r,rA.exports}var V1e;function AXe(){if(V1e)return nA.exports;V1e=1;const e=SXe();function t(n,r,i){const s=[],o=i&&i.debug||!1,a=i&&typeof i.nested=="boolean"?i.nested:!0;let l=i&&i.startIndex||0,u;for(;u=e(n,r,{debug:o,startIndex:l});)a?l=u.start+1+r.length:l=u.end,s.push(u);return o&&console.log("findTagsByName found",s.length,"tags"),s}return nA.exports=t,nA.exports.default=t,nA.exports}var CXe=AXe();const kXe=sa(CXe),g_={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},lf={};for(const e in g_)g_.hasOwnProperty(e)&&(lf[g_[e]]=parseInt(e,10));const TXe=[lf.BitsPerSample,lf.ExtraSamples,lf.SampleFormat,lf.StripByteCounts,lf.StripOffsets,lf.StripRowCounts,lf.TileByteCounts,lf.TileOffsets,lf.SubIFDs],cF={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fr={};for(const e in cF)cF.hasOwnProperty(e)&&(fr[cF[e]]=parseInt(e,10));const yl={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},DXe={Unspecified:0,Assocalpha:1,Unassalpha:2},Rjt={Version:0,AddCompression:1},Fjt={None:0,Deflate:1,Zstandard:2},LXe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function RXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let s;for(let o=0,a=0;o<e.length;++o,a+=3)s=256-e[o]/t*256,i[a]=s,i[a+1]=s,i[a+2]=s;return i}function FXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let s;for(let o=0,a=0;o<e.length;++o,a+=3)s=e[o]/t*256,i[a]=s,i[a+1]=s,i[a+2]=s;return i}function OXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3),s=t.length/3,o=t.length/3*2;for(let a=0,l=0;a<e.length;++a,l+=3){const u=e[a];i[l]=t[u]/65536*256,i[l+1]=t[u+s]/65536*256,i[l+2]=t[u+o]/65536*256}return i}function MXe(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,s=0;i<e.length;i+=4,s+=3){const o=e[i],a=e[i+1],l=e[i+2],u=e[i+3];r[s]=255*((255-o)/256)*((255-u)/256),r[s+1]=255*((255-a)/256)*((255-u)/256),r[s+2]=255*((255-l)/256)*((255-u)/256)}return r}function $Xe(e){const{width:t,height:n}=e,r=new Uint8ClampedArray(t*n*3);for(let i=0,s=0;i<e.length;i+=3,s+=3){const o=e[i],a=e[i+1],l=e[i+2];r[s]=o+1.402*(l-128),r[s+1]=o-.34414*(a-128)-.71414*(l-128),r[s+2]=o+1.772*(a-128)}return r}const IXe=.95047,PXe=1,NXe=1.08883;function BXe(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,s=0;i<e.length;i+=3,s+=3){const o=e[i+0],a=e[i+1]<<24>>24,l=e[i+2]<<24>>24;let u=(o+16)/116,f=a/500+u,c=u-l/200,d,h,p;f=IXe*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),u=PXe*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),c=NXe*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),d=f*3.2406+u*-1.5372+c*-.4986,h=f*-.9689+u*1.8758+c*.0415,p=f*.0557+u*-.204+c*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,r[s]=Math.max(0,Math.min(1,d))*255,r[s+1]=Math.max(0,Math.min(1,h))*255,r[s+2]=Math.max(0,Math.min(1,p))*255}return r}const wke=new Map;function am(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>wke.set(n,t))}async function _ke(e){const t=wke.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const n=await t();return new n(e)}am([void 0,1],()=>om(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default));am(5,()=>om(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1]),import.meta.url).then(e=>e.default));am(6,()=>{throw new Error("old style JPEG compression is not supported.")});am(7,()=>om(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1]),import.meta.url).then(e=>e.default));am([8,32946],()=>om(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(e=>e.default));am(32773,()=>om(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1]),import.meta.url).then(e=>e.default));am(34887,()=>om(()=>import("./lerc-gr1KLh9S.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url).then(async e=>(await e.zstd.init(),e)).then(e=>e.default));am(50001,()=>om(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([20,1]),import.meta.url).then(e=>e.default));function CD(e,t,n,r=1){return new(Object.getPrototypeOf(e)).constructor(t*n*r)}function zXe(e,t,n,r,i){const s=t/r,o=n/i;return e.map(a=>{const l=CD(a,r,i);for(let u=0;u<i;++u){const f=Math.min(Math.round(o*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(s*c),t-1),h=a[f*t+d];l[u*r+c]=h}}return l})}function Ev(e,t,n){return(1-n)*e+n*t}function jXe(e,t,n,r,i){const s=t/r,o=n/i;return e.map(a=>{const l=CD(a,r,i);for(let u=0;u<i;++u){const f=o*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let h=0;h<r;++h){const p=s*h,g=p%1,v=Math.floor(p),y=Math.min(Math.ceil(p),t-1),b=a[c*t+v],w=a[c*t+y],E=a[d*t+v],A=a[d*t+y],T=Ev(Ev(b,w,g),Ev(E,A,g),f%1);l[u*r+h]=T}}return l})}function UXe(e,t,n,r,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return zXe(e,t,n,r,i);case"bilinear":case"linear":return jXe(e,t,n,r,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function qXe(e,t,n,r,i,s){const o=t/r,a=n/i,l=CD(e,r,i,s);for(let u=0;u<i;++u){const f=Math.min(Math.round(a*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(o*c),t-1);for(let h=0;h<s;++h){const p=e[f*t*s+d*s+h];l[u*r*s+c*s+h]=p}}}return l}function HXe(e,t,n,r,i,s){const o=t/r,a=n/i,l=CD(e,r,i,s);for(let u=0;u<i;++u){const f=a*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let h=0;h<r;++h){const p=o*h,g=p%1,v=Math.floor(p),y=Math.min(Math.ceil(p),t-1);for(let b=0;b<s;++b){const w=e[c*t*s+v*s+b],E=e[c*t*s+y*s+b],A=e[d*t*s+v*s+b],T=e[d*t*s+y*s+b],D=Ev(Ev(w,E,g),Ev(A,T,g),f%1);l[u*r*s+h*s+b]=D}}}return l}function GXe(e,t,n,r,i,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return qXe(e,t,n,r,i,s);case"bilinear":case"linear":return HXe(e,t,n,r,i,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function VXe(e,t,n){let r=0;for(let i=t;i<n;++i)r+=e[i];return r}function n6(e,t,n){switch(e){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(t===8)return new Int8Array(n);if(t===16)return new Int16Array(n);if(t===32)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function WXe(e,t){return(e===1||e===2)&&t<=32&&t%8===0?!1:!(e===3&&(t===16||t===32||t===64))}function YXe(e,t,n,r,i,s,o){const a=new DataView(e),l=n===2?o*s:o*s*r,u=n===2?1:r,f=n6(t,i,l),c=parseInt("1".repeat(i),2);if(t===1){let d;n===1?d=r*i:d=i;let h=s*d;h&7&&(h=h+7&-8);for(let p=0;p<o;++p){const g=p*h;for(let v=0;v<s;++v){const y=g+v*u*i;for(let b=0;b<u;++b){const w=y+b*i,E=(p*s+v)*u+b,A=Math.floor(w/8),T=w%8;if(T+i<=8)f[E]=a.getUint8(A)>>8-i-T&c;else if(T+i<=16)f[E]=a.getUint16(A)>>16-i-T&c;else if(T+i<=24){const D=a.getUint16(A)<<8|a.getUint8(A+2);f[E]=D>>24-i-T&c}else f[E]=a.getUint32(A)>>32-i-T&c}}}}return f.buffer}class Eke{constructor(t,n,r,i,s,o){this.fileDirectory=t,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=s?{}:null,this.isTiled=!t.StripOffsets;const a=t.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,s){return xke(this,i,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,n){const r=this.getSampleFormat(t),i=this.getBitsPerSample(t);return n6(r,i,n)}async getTileOrStrip(t,n,r,i,s){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=n*o+t:this.planarConfiguration===2&&(l=r*o*a+n*o+t);let f,c;this.isTiled?(f=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:f,length:c}],s))[0];let h;return u===null||!u[l]?(h=(async()=>{let p=await i.decode(this.fileDirectory,d);const g=this.getSampleFormat(),v=this.getBitsPerSample();return WXe(g,v)&&(p=YXe(p,g,this.planarConfiguration,this.getSamplesPerPixel(),v,this.getTileWidth(),this.getBlockHeight(n))),p})(),u!==null&&(u[l]=h)):h=u[l],{x:t,y:n,sample:r,data:await h}}async _readRaster(t,n,r,i,s,o,a,l,u){const f=this.getTileWidth(),c=this.getTileHeight(),d=this.getWidth(),h=this.getHeight(),p=Math.max(Math.floor(t[0]/f),0),g=Math.min(Math.ceil(t[2]/f),Math.ceil(d/f)),v=Math.max(Math.floor(t[1]/c),0),y=Math.min(Math.ceil(t[3]/c),Math.ceil(h/c)),b=t[2]-t[0];let w=this.getBytesPerPixel();const E=[],A=[];for(let k=0;k<n.length;++k)this.planarConfiguration===1?E.push(VXe(this.fileDirectory.BitsPerSample,0,n[k])/8):E.push(0),A.push(this.getReaderForSample(n[k]));const T=[],{littleEndian:D}=this;for(let k=v;k<y;++k)for(let R=p;R<g;++R){let O;this.planarConfiguration===1&&(O=this.getTileOrStrip(R,k,0,s,u));for(let B=0;B<n.length;++B){const K=B,L=n[B];this.planarConfiguration===2&&(w=this.getSampleByteSize(L),O=this.getTileOrStrip(R,k,L,s,u));const $=O.then(I=>{const U=I.data,q=new DataView(U),Y=this.getBlockHeight(I.y),X=I.y*c,te=I.x*f,le=X+Y,ee=(I.x+1)*f,z=A[K],he=Math.min(Y,Y-(le-t[3]),h-X),de=Math.min(f,f-(ee-t[2]),d-te);for(let ze=Math.max(0,t[1]-X);ze<he;++ze)for(let He=Math.max(0,t[0]-te);He<de;++He){const je=(ze*f+He)*w,we=z.call(q,je+E[K],D);let Ie;i?(Ie=(ze+X-t[1])*b*n.length+(He+te-t[0])*n.length+K,r[Ie]=we):(Ie=(ze+X-t[1])*b+He+te-t[0],r[K][Ie]=we)}});T.push($)}}if(await Promise.all(T),o&&t[2]-t[0]!==o||a&&t[3]-t[1]!==a){let k;return i?k=GXe(r,t[2]-t[0],t[3]-t[1],o,a,n.length,l):k=UXe(r,t[2]-t[0],t[3]-t[1],o,a,l),k.width=o,k.height=a,k}return r.width=o||t[2]-t[0],r.height=a||t[3]-t[1],r}async readRasters({window:t,samples:n=[],interleave:r,pool:i=null,width:s,height:o,resampleMethod:a,fillValue:l,signal:u}={}){const f=t||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");const c=f[2]-f[0],d=f[3]-f[1],h=c*d,p=this.getSamplesPerPixel();if(!n||!n.length)for(let b=0;b<p;++b)n.push(b);else for(let b=0;b<n.length;++b)if(n[b]>=p)return Promise.reject(new RangeError(`Invalid sample index '${n[b]}'.`));let g;if(r){const b=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,w=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=n6(b,w,h*n.length),l&&g.fill(l)}else{g=[];for(let b=0;b<n.length;++b){const w=this.getArrayForSample(n[b],h);Array.isArray(l)&&b<l.length?w.fill(l[b]):l&&!Array.isArray(l)&&w.fill(l),g.push(w)}}const v=i||await _ke(this.fileDirectory);return await this._readRaster(f,n,g,r,v,s,o,a,u)}async readRGB({window:t,interleave:n=!0,pool:r=null,width:i,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const f=this.fileDirectory.PhotometricInterpretation;if(f===yl.RGB){let y=[0,1,2];if(this.fileDirectory.ExtraSamples!==DXe.Unspecified&&a){y=[];for(let b=0;b<this.fileDirectory.BitsPerSample.length;b+=1)y.push(b)}return this.readRasters({window:t,interleave:n,samples:y,pool:r,width:i,height:s,resampleMethod:o,signal:l})}let c;switch(f){case yl.WhiteIsZero:case yl.BlackIsZero:case yl.Palette:c=[0];break;case yl.CMYK:c=[0,1,2,3];break;case yl.YCbCr:case yl.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:u,interleave:!0,samples:c,pool:r,width:i,height:s,resampleMethod:o,signal:l},{fileDirectory:h}=this,p=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let v;switch(f){case yl.WhiteIsZero:v=RXe(p,g);break;case yl.BlackIsZero:v=FXe(p,g);break;case yl.Palette:v=OXe(p,h.ColorMap);break;case yl.CMYK:v=MXe(p);break;case yl.YCbCr:v=$Xe(p);break;case yl.CIELab:v=BXe(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const y=new Uint8Array(v.length/3),b=new Uint8Array(v.length/3),w=new Uint8Array(v.length/3);for(let E=0,A=0;E<v.length;E+=3,++A)y[A]=v[E],b[A]=v[E+1],w[A]=v[E+2];v=[y,b,w]}return v.width=p.width,v.height=p.height,v}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}getGDALMetadata(t=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=kXe(r,"Item");t===null?i=i.filter(s=>uF(s,"sample")===void 0):i=i.filter(s=>Number(uF(s,"sample"))===t);for(let s=0;s<i.length;++s){const o=i[s];n[uF(o,"name")]=o.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[i,s,o]=t.getResolution();return[i*t.getWidth()/this.getWidth(),s*t.getHeight()/this.getHeight(),o*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const n=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[i,s,o,a,l,u,f,c]=this.fileDirectory.ModelTransformation,h=[[0,0],[0,n],[r,0],[r,n]].map(([v,y])=>[a+i*v+s*y,c+l*v+u*y]),p=h.map(v=>v[0]),g=h.map(v=>v[1]);return[Math.min(...p),Math.min(...g),Math.max(...p),Math.max(...g)]}else{const i=this.getOrigin(),s=this.getResolution(),o=i[0],a=i[1],l=o+s[0]*r,u=a+s[1]*n;return[Math.min(o,l),Math.min(a,u),Math.max(o,l),Math.max(a,u)]}}}class XXe{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,n){const r=this.getUint32(t,n),i=this.getUint32(t+4,n);let s;if(n){if(s=r+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*r+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(t,n){let r=0;const i=(this._dataView.getUint8(t+(n?7:0))&128)>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(t+(n?o:7-o));i&&(s?a!==0&&(a=~(a-1)&255,s=!1):a=~a&255),r+=a*256**o}return i&&(r=-r),r}getUint8(t,n){return this._dataView.getUint8(t,n)}getInt8(t,n){return this._dataView.getInt8(t,n)}getUint16(t,n){return this._dataView.getUint16(t,n)}getInt16(t,n){return this._dataView.getInt16(t,n)}getUint32(t,n){return this._dataView.getUint32(t,n)}getInt32(t,n){return this._dataView.getInt32(t,n)}getFloat16(t,n){return xke(this._dataView,t,n)}getFloat32(t,n){return this._dataView.getFloat32(t,n)}getFloat64(t,n){return this._dataView.getFloat64(t,n)}}class ZXe{constructor(t,n,r,i){this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const n=this.readUint32(t),r=this.readUint32(t+4);let i;if(this._littleEndian){if(i=n+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*n+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let n=0;const r=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let i=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(t+(this._littleEndian?s:7-s));r&&(i?o!==0&&(o=~(o-1)&255,i=!1):o=~o&255),n+=o*256**s}return r&&(n=-n),n}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const KXe=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class JXe{constructor(t=KXe,n){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(r=>{om(()=>import("./decoder-CaSv2t6h.js"),[],import.meta.url).then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:r(),idle:!0})}))}async decode(t,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?_ke(t).then(r=>r.decode(t,n)):new Promise(r=>{const i=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const s=this.messageId++,o=a=>{a.data.id===s&&(i.idle=!0,r(a.data.decoded),i.worker.removeEventListener("message",o))};i.worker.addEventListener("message",o),i.worker.postMessage({fileDirectory:t,buffer:n,id:s},[n])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const W1e=`\r
\r
`;function Ske(e){if(typeof Object.fromEntries<"u")return Object.fromEntries(e);const t={};for(const[n,r]of e)t[n.toLowerCase()]=r;return t}function QXe(e){const t=e.split(`\r
`).map(n=>{const r=n.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return Ske(t)}function eZe(e){const[t,...n]=e.split(";").map(i=>i.trim()),r=n.map(i=>i.split("="));return{type:t,params:Ske(r)}}function r6(e){let t,n,r;return e&&([,t,n,r]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10)),{start:t,end:n,total:r}}function tZe(e,t){let n=null;const r=new TextDecoder("ascii"),i=[],s=`--${t}`,o=`${s}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(e,a,s.length))===s&&(n=a);if(n===null)throw new Error("Could not find initial boundary");for(;n<e.byteLength;){const a=r.decode(new Uint8Array(e,n,Math.min(s.length+1024,e.byteLength-n)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const l=a.substr(s.length+2);if(l.length===0)break;const u=l.indexOf(W1e),f=QXe(l.substr(0,u)),{start:c,end:d,total:h}=r6(f["content-range"]),p=n+s.length+u+W1e.length,g=parseInt(d,10)+1-parseInt(c,10);i.push({headers:f,data:e.slice(p,p+g),offset:c,length:g,fileSize:h}),n=p+g+4}return i}class uP{async fetch(t,n=void 0){return Promise.all(t.map(r=>this.fetchSlice(r,n)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class nZe extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[n,r]of t)this.onEviction(n,r.value)}_deleteIfExpired(t,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,n.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,n){if(this._deleteIfExpired(t,n)===!1)return n.value}_getItemValue(t,n){return n.expiry?this._getOrDeleteIfExpired(t,n):n.value}_peek(t,n){const r=n.get(t);return this._getItemValue(t,r)}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,n){this.oldCache.delete(t),this._set(t,n)}*_entriesAscending(){for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield t)}for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const n=this.cache.get(t);return this._getItemValue(t,n)}if(this.oldCache.has(t)){const n=this.oldCache.get(t);if(this._deleteIfExpired(t,n)===!1)return this._moveToRecent(t,n),n.value}}set(t,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:n,expiry:i}):this._set(t,{value:n,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-t;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let t=[...this.cache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,s]=r;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}t=[...this.oldCache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,s]=r;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[t,n]of this._entriesAscending())yield[t,n.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,n=this){for(const[r,i]of this.entriesAscending())t.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function rZe(e){return new Promise(t=>setTimeout(t,e))}function iZe(e,t){const n=Array.isArray(e)?e:Array.from(e),r=Array.isArray(t)?t:Array.from(t);return n.map((i,s)=>[i,r[s]])}class Kv extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Kv),this.name="AbortError"}}class sZe extends Error{constructor(t,n){super(n),this.errors=t,this.message=n,this.name="AggregateError"}}const oZe=sZe;class aZe{constructor(t,n,r=null){this.offset=t,this.length=n,this.data=r}get top(){return this.offset+this.length}}class Y1e{constructor(t,n,r){this.offset=t,this.length=n,this.blockIds=r}}class lZe extends uP{constructor(t,{blockSize:n=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=n,this.blockCache=new nZe({maxSize:r,onEviction:(i,s)=>{this.evictedBlocks.set(i,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,n){const r=[],i=[],s=[];this.evictedBlocks.clear();for(const{offset:d,length:h}of t){let p=d+h;const{fileSize:g}=this;g!==null&&(p=Math.min(p,g));const v=Math.floor(d/this.blockSize)*this.blockSize;for(let y=v;y<p;y+=this.blockSize){const b=Math.floor(y/this.blockSize);!this.blockCache.has(b)&&!this.blockRequests.has(b)&&(this.blockIdsToFetch.add(b),i.push(b)),this.blockRequests.has(b)&&r.push(this.blockRequests.get(b)),s.push(b)}}await rZe(),this.fetchBlocks(n);const o=[];for(const d of i)this.blockRequests.has(d)&&o.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(o);const a=[],l=s.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const d of l){const h=this.blockRequests.get(d);if(!h)throw new Error(`Block ${d} is not in the block requests`);a.push(h)}await Promise.allSettled(a)}if(n&&n.aborted)throw new Kv("Request was aborted");const u=s.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),f=u.filter(d=>!d);if(f.length)throw new oZe(f,"Request failed");const c=new Map(iZe(s,u));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(n,t);for(let i=0;i<n.length;++i){const s=n[i];for(const o of s.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await r)[i],l=o*this.blockSize,u=l-a.offset,f=Math.min(u+this.blockSize,a.data.byteLength),c=a.data.slice(u,f),d=new aZe(l,c.byteLength,c,o);this.blockCache.set(o,d),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=t,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const n=Array.from(t).sort((o,a)=>o-a);if(n.length===0)return[];let r=[],i=null;const s=[];for(const o of n)i===null||i+1===o?(r.push(o),i=o):(s.push(new Y1e(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[o],i=o);return s.push(new Y1e(r[0]*this.blockSize,r.length*this.blockSize,r)),s}readSliceData(t,n){return t.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const s=Math.floor(r.offset/this.blockSize),o=Math.floor(i/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let u=s;u<=o;++u){const f=n.get(u),c=f.offset-r.offset,d=f.top-i;let h=0,p=0,g;c<0?h=-c:c>0&&(p=c),d<0?g=f.length-h:g=i-f.offset-h;const v=new Uint8Array(f.data,h,g);l.set(v,p)}return a})}}class cP{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class fP{constructor(t){this.url=t}async request({headers:t,signal:n}={}){throw new Error("request is not implemented")}}class uZe extends cP{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class cZe extends fP{constructor(t,n){super(t),this.credentials=n}async request({headers:t,signal:n}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:n});return new uZe(r)}}class fZe extends cP{constructor(t,n){super(),this.xhr=t,this.data=n}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class dZe extends fP{constructRequest(t,n){return new Promise((r,i)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(t))s.setRequestHeader(o,a);s.onload=()=>{const o=s.response;r(new fZe(s,o))},s.onerror=i,s.onabort=()=>i(new Kv("Request aborted")),s.send(),n&&(n.aborted&&s.abort(),n.addEventListener("abort",()=>s.abort()))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}const fF={};class hZe extends cP{constructor(t,n){super(),this.response=t,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class pZe extends fP{constructor(t){super(t),this.parsedUrl=fF.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",fF)}constructRequest(t,n){return new Promise((r,i)=>{const s=this.httpApi.get({...this.parsedUrl,headers:t},o=>{const a=new Promise(l=>{const u=[];o.on("data",f=>{u.push(f)}),o.on("end",()=>{const f=Buffer.concat(u).buffer;l(f)}),o.on("error",i)});r(new hZe(o,a))});s.on("error",i),n&&(n.aborted&&s.destroy(new Kv("Request aborted")),n.addEventListener("abort",()=>s.destroy(new Kv("Request aborted"))))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}class dP extends uP{constructor(t,n,r,i){super(),this.client=t,this.headers=n,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(t,n){return this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length>1,Promise.all(t.map(r=>this.fetchSlice(r,n))))}async fetchSlices(t,n){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:i,length:s})=>`${i}-${i+s}`).join(",")}`},signal:n});if(r.ok)if(r.status===206){const{type:i,params:s}=eZe(r.getHeader("content-type"));if(i==="multipart/byteranges"){const c=tZe(await r.getData(),s.boundary);return this._fileSize=c[0].fileSize||null,c}const o=await r.getData(),{start:a,end:l,total:u}=r6(r.getHeader("content-range"));this._fileSize=u||null;const f=[{data:o,offset:a,length:l-a}];if(t.length>1){const c=await Promise.all(t.slice(1).map(d=>this.fetchSlice(d,n)));return f.concat(c)}return f}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,n){const{offset:r,length:i}=t,s=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:n});if(s.ok)if(s.status===206){const o=await s.getData(),{total:a}=r6(s.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await s.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function hP(e,{blockSize:t,cacheSize:n}){return t===null?e:new lZe(e,{blockSize:t,cacheSize:n})}function mZe(e,{headers:t={},credentials:n,maxRanges:r=0,allowFullFile:i=!1,...s}={}){const o=new cZe(e,n),a=new dP(o,t,r,i);return hP(a,s)}function gZe(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new dZe(e),o=new dP(s,t,n,r);return hP(o,i)}function yZe(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new pZe(e),o=new dP(s,t,n,r);return hP(o,i)}function i6(e,{forceXHR:t=!1,...n}={}){return typeof fetch=="function"&&!t?mZe(e,n):typeof XMLHttpRequest<"u"?gZe(e,n):yZe(e,n)}class vZe extends uP{constructor(t){super(),this.file=t}async fetchSlice(t,n){return new Promise((r,i)=>{const s=this.file.slice(t.offset,t.offset+t.length),o=new FileReader;o.onload=a=>r(a.target.result),o.onerror=i,o.onabort=i,o.readAsArrayBuffer(s),n&&n.addEventListener("abort",()=>o.abort())})}}function bZe(e){return new vZe(e)}function s6(e){switch(e){case fr.BYTE:case fr.ASCII:case fr.SBYTE:case fr.UNDEFINED:return 1;case fr.SHORT:case fr.SSHORT:return 2;case fr.LONG:case fr.SLONG:case fr.FLOAT:case fr.IFD:return 4;case fr.RATIONAL:case fr.SRATIONAL:case fr.DOUBLE:case fr.LONG8:case fr.SLONG8:case fr.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function xZe(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let r=4;r<=t[3]*4;r+=4){const i=LXe[t[r]],s=t[r+1]?g_[t[r+1]]:null,o=t[r+2],a=t[r+3];let l=null;if(!s)l=a;else{if(l=e[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}n[i]=l}return n}function My(e,t,n,r){let i=null,s=null;const o=s6(t);switch(t){case fr.BYTE:case fr.ASCII:case fr.UNDEFINED:i=new Uint8Array(n),s=e.readUint8;break;case fr.SBYTE:i=new Int8Array(n),s=e.readInt8;break;case fr.SHORT:i=new Uint16Array(n),s=e.readUint16;break;case fr.SSHORT:i=new Int16Array(n),s=e.readInt16;break;case fr.LONG:case fr.IFD:i=new Uint32Array(n),s=e.readUint32;break;case fr.SLONG:i=new Int32Array(n),s=e.readInt32;break;case fr.LONG8:case fr.IFD8:i=new Array(n),s=e.readUint64;break;case fr.SLONG8:i=new Array(n),s=e.readInt64;break;case fr.RATIONAL:i=new Uint32Array(n*2),s=e.readUint32;break;case fr.SRATIONAL:i=new Int32Array(n*2),s=e.readInt32;break;case fr.FLOAT:i=new Float32Array(n),s=e.readFloat32;break;case fr.DOUBLE:i=new Float64Array(n),s=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===fr.RATIONAL||t===fr.SRATIONAL)for(let a=0;a<n;a+=2)i[a]=s.call(e,r+a*o),i[a+1]=s.call(e,r+(a*o+4));else for(let a=0;a<n;++a)i[a]=s.call(e,r+a*o);return t===fr.ASCII?new TextDecoder("utf-8").decode(i):i}class wZe{constructor(t,n,r){this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=r}}class aA extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class Ake{async readRasters(t={}){const{window:n,width:r,height:i}=t;let{resX:s,resY:o,bbox:a}=t;const l=await this.getImage();let u=l;const f=await this.getImageCount(),c=l.getBoundingBox();if(n&&a)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(n){const[p,g]=l.getOrigin(),[v,y]=l.getResolution();a=[p+n[0]*v,g+n[1]*y,p+n[2]*v,g+n[3]*y]}const h=a||c;if(r){if(s)throw new Error("Both width and resX passed");s=(h[2]-h[0])/r}if(i){if(o)throw new Error("Both width and resY passed");o=(h[3]-h[1])/i}}if(s||o){const h=[];for(let p=0;p<f;++p){const g=await this.getImage(p),{SubfileType:v,NewSubfileType:y}=g.fileDirectory;(p===0||v===2||y&1)&&h.push(g)}h.sort((p,g)=>p.getWidth()-g.getWidth());for(let p=0;p<h.length;++p){const g=h[p],v=(c[2]-c[0])/g.getWidth(),y=(c[3]-c[1])/g.getHeight();if(u=g,s&&s>v||o&&o>y)break}}let d=n;if(a){const[h,p]=l.getOrigin(),[g,v]=u.getResolution(l);d=[Math.round((a[0]-h)/g),Math.round((a[1]-p)/v),Math.round((a[2]-h)/g),Math.round((a[3]-p)/v)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return u.readRasters({...t,window:d})}}class Jv extends Ake{constructor(t,n,r,i,s={}){super(),this.source=t,this.littleEndian=n,this.bigTiff=r,this.firstIFDOffset=i,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,n){const r=this.bigTiff?4048:1024;return new ZXe((await this.source.fetch([{offset:t,length:typeof n<"u"?n:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const n=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(t);const s=this.bigTiff?i.readUint64(t):i.readUint16(t),o=s*n+(this.bigTiff?16:6);i.covers(t,o)||(i=await this.getSlice(t,o));const a={};let l=t+(this.bigTiff?8:2);for(let c=0;c<s;l+=n,++c){const d=i.readUint16(l),h=i.readUint16(l+2),p=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let g,v;const y=s6(h),b=l+(this.bigTiff?12:8);if(y*p<=(this.bigTiff?8:4))g=My(i,h,p,b);else{const w=i.readOffset(b),E=s6(h)*p;if(i.covers(w,E))g=My(i,h,p,w);else{const A=await this.getSlice(w,E);g=My(A,h,p,w)}}p===1&&TXe.indexOf(d)===-1&&!(h===fr.RATIONAL||h===fr.SRATIONAL)?v=g[0]:v=g,a[g_[d]]=v}const u=xZe(a),f=i.readOffset(t+r+n*s);return new wZe(a,u,f)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(n){throw n instanceof aA?new aA(t):n}return this.ifdRequests[t]=(async()=>{const n=await this.ifdRequests[t-1];if(n.nextIFDByteOffset===0)throw new aA(t);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const n=await this.requestIFD(t);return new Eke(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,n=!0;for(;n;)try{await this.requestIFD(t),++t}catch(r){if(r instanceof aA)n=!1;else throw r}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",r=n.length+100;let i=await this.getSlice(t,r);if(n===My(i,fr.ASCII,n.length,t)){const o=My(i,fr.ASCII,r,t).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>r&&(i=await this.getSlice(t,a));const l=My(i,fr.ASCII,a,t);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,f])=>{this.ghostValues[u]=f})}return this.ghostValues}static async fromSource(t,n,r){const i=(await t.fetch([{offset:0,length:1024}],r))[0],s=new XXe(i),o=s.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,s.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const f=u?s.getUint64(8,a):s.getUint32(4,a);return new Jv(t,a,u,f,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class _Ze extends Ake{constructor(t,n){super(),this.mainFile=t,this.overviewFiles=n,this.imageFiles=[t].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,r=0;for(let i=0;i<this.imageFiles.length;i++){const s=this.imageFiles[i];for(let o=0;o<this.imageCounts[i];o++){if(t===n){const a=await s.requestIFD(r);return new Eke(a.fileDirectory,a.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}n++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((n,r)=>n+r,0),this.imageCount}}async function EZe(e,t={},n){return Jv.fromSource(i6(e,t),n)}async function SZe(e,t){return Jv.fromSource(bZe(e),t)}async function AZe(e,t=[],n={},r){const i=await Jv.fromSource(i6(e,n),r),s=await Promise.all(t.map(o=>Jv.fromSource(i6(o,n))));return new _Ze(i,s)}function CZe(e){return((e.fileDirectory.NewSubfileType||0)&4)===4}function kZe(e,t){if(!e)return!1;if(e===!0)return!0;if(t.getSamplesPerPixel()!==3)return!1;const n=t.fileDirectory.PhotometricInterpretation,r=yl;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const X1e="STATISTICS_MAXIMUM",Z1e="STATISTICS_MINIMUM",dF=256;let hF;function TZe(){return hF||(hF=new JXe),hF}function DZe(e){try{return e.getBoundingBox(!0)}catch{return[0,0,e.getWidth(),e.getHeight()]}}function LZe(e){try{return e.getOrigin().slice(0,2)}catch{return[0,e.getHeight()]}}function RZe(e,t){try{return e.getResolution(t)}catch{return[t.getWidth()/e.getWidth(),t.getHeight()/e.getHeight()]}}function FZe(e){const t=e.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&t.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+t.ProjectedCSTypeGeoKey;let r=oi(n);if(!r){const i=$ve(t.ProjLinearUnitsGeoKey);i&&(r=new Ive({code:n,units:i}))}return r}if(t.GeographicTypeGeoKey&&t.GeographicTypeGeoKey!==32767){const n="EPSG:"+t.GeographicTypeGeoKey;let r=oi(n);if(!r){const i=$ve(t.GeogAngularUnitsGeoKey);i&&(r=new Ive({code:n,units:i}))}return r}return null}function OZe(e){return e.getImageCount().then(function(t){const n=new Array(t);for(let r=0;r<t;++r)n[r]=e.getImage(r);return Promise.all(n)})}function MZe(e,t){let n;return e.blob?n=SZe(e.blob):e.overviews?n=AZe(e.url,e.overviews,t):n=EZe(e.url,t),n.then(OZe)}function Mw(e,t,n,r,i){if(Array.isArray(e)){const s=e.length;if(!Array.isArray(t)||s!=t.length){const o=new Error(r);throw i(o),o}for(let o=0;o<s;++o)Mw(e[o],t[o],n,r,i);return}if(t=t,Math.abs(e-t)>n*e)throw new Error(r)}function $Ze(e){return e instanceof Int8Array?-128:e instanceof Int16Array?-32768:e instanceof Int32Array?-2147483648:e instanceof Float32Array?12e-39:0}function IZe(e){return e instanceof Int8Array?127:e instanceof Uint8Array||e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?34e37:255}class pP extends uE{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:t.interpolate!==!1,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const n=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=t.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const r=this,i=new Array(n);for(let s=0;s<n;++s)i[s]=MZe(this.sourceInfo_[s],this.sourceOptions_);Promise.all(i).then(function(s){r.configure_(s)}).catch(function(s){Z_(s),r.error_=s,r.setState("error")})}getError(){return this.error_}determineProjection(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const i=n[r],s=FZe(i);if(s){this.projection=s;break}}}determineTransformMatrix(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const s=n[r].fileDirectory.ModelTransformation;if(s){const[o,a,l,u,f,c,d,h]=s,p=U_(U_([1/Math.sqrt(o*o+f*f),0,0,-1/Math.sqrt(a*a+c*c),u,h],[o,f,a,c,0,0]),[1,0,0,1,-u,-h]);this.transformMatrix=p,this.addAlpha_=!0;break}}}configure_(t){let n,r,i,s,o;const a=new Array(t.length),l=new Array(t.length),u=new Array(t.length);let f=0;const c=t.length;for(let v=0;v<c;++v){const y=[],b=[];t[v].forEach(R=>{CZe(R)?b.push(R):y.push(R)});const w=y.length;if(b.length>0&&b.length!==w)throw new Error(`Expected one mask per image found ${b.length} masks and ${w} images`);let E,A;const T=new Array(w),D=new Array(w),k=new Array(w);l[v]=new Array(w),u[v]=new Array(w);for(let R=0;R<w;++R){const O=y[R],B=O.getGDALNoData();u[v][R]=O.getGDALMetadata(0),l[v][R]=B;const K=this.sourceInfo_[v].bands;a[v]=K?K.length:O.getSamplesPerPixel();const L=w-(R+1);E||(E=DZe(O)),A||(A=LZe(O));const $=RZe(O,y[0]);k[L]=$[0];const I=[O.getTileWidth(),O.getTileHeight()];I[0]!==I[1]&&I[1]<dF&&(I[0]=dF,I[1]=dF),T[L]=I;const U=$[0]/Math.abs($[1]);D[L]=[I[0],I[1]/U]}if(n?Kg(n,E,n):n=E,!r)r=A;else{const R=`Origin mismatch for source ${v}, got [${A}] but expected [${r}]`;Mw(r,A,0,R,this.viewRejector)}if(!o)o=k,this.resolutionFactors_[v]=1;else{o.length-f>k.length&&(f=o.length-k.length);const R=o[o.length-1]/k[k.length-1];this.resolutionFactors_[v]=R;const O=k.map(K=>K*=R),B=`Resolution mismatch for source ${v}, got [${O}] but expected [${o}]`;Mw(o.slice(f,o.length),O,.02,B,this.viewRejector)}i?Mw(i.slice(f,i.length),D,.01,`Tile size mismatch for source ${v}`,this.viewRejector):i=D,s?Mw(s.slice(f,s.length),T,0,`Tile size mismatch for source ${v}`,this.viewRejector):s=T,this.sourceImagery_[v]=y.reverse(),this.sourceMasks_[v]=b.reverse()}for(let v=0,y=this.sourceImagery_.length;v<y;++v){const b=this.sourceImagery_[v];for(;b.length<o.length;)b.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let v=0;v<c;++v){if(this.sourceInfo_[v].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[v].length){this.addAlpha_=!0;break}const y=l[v],b=this.sourceInfo_[v].bands;if(b){for(let w=0;w<b.length;++w)if(y[b[w]-1]!==null){this.addAlpha_=!0;break e}continue}for(let w=0;w<y.length;++w)if(y[w]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let v=0;v<c;++v)d+=a[v];this.bandCount=d;const h=new dD({extent:n,minZoom:f,origin:r,resolutions:o,tileSizes:i});this.tileGrid=h,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const p=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]);let g=n;if(this.transformMatrix){const v=V_(Ko(),this.transformMatrix.slice()),y=Nje(b=>eh(v,b));g=Vv(n,y)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:Ije(Dp(g),this.projection),extent:Pje(g,this.projection),zoom:p})}loadTile_(t,n,r,i){const s=this.getTileSize(t),o=this.sourceImagery_.length,a=new Array(o*2),l=this.nodataValues_,u=this.sourceInfo_,f=TZe();for(let c=0;c<o;++c){const d=u[c],h=this.resolutionFactors_[c],p=[Math.round(n*(s[0]*h)),Math.round(r*(s[1]*h)),Math.round((n+1)*(s[0]*h)),Math.round((r+1)*(s[1]*h))],g=this.sourceImagery_[c][t];let v;d.bands&&(v=d.bands.map(function(A){return A-1}));let y;"nodata"in d&&d.nodata!==null?y=d.nodata:v?y=v.map(function(A){return l[c][A]}):y=l[c];const b={window:p,width:s[0],height:s[1],samples:v,fillValue:y,pool:f,interleave:!1,signal:i.signal};kZe(this.convertToRGB_,g)?a[c]=g.readRGB(b):a[c]=g.readRasters(b);const w=o+c,E=this.sourceMasks_[c][t];if(!E){a[w]=Promise.resolve(null);continue}a[w]=E.readRasters({window:p,width:s[0],height:s[1],samples:[0],pool:f,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,s)).catch(function(c){throw Z_(c),c})}composeTile_(t,n){const r=this.metadata_,i=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,f=this.addAlpha_,c=t[0]*t[1],d=c*o;let h;u?h=new Uint8Array(d):h=new Float32Array(d);let p=0;for(let g=0;g<c;++g){let v=f;for(let y=0;y<s;++y){const b=i[y];let w=b.min,E=b.max,A,T;if(u){const D=r[y][0];w===void 0&&(D&&Z1e in D?w=parseFloat(D[Z1e]):w=$Ze(n[y][0])),E===void 0&&(D&&X1e in D?E=parseFloat(D[X1e]):E=IZe(n[y][0])),A=255/(E-w),T=-w*A}for(let D=0;D<a[y];++D){const k=n[y][D][g];let R;if(u?R=As(A*k+T,0,255):R=k,!f)h[p]=R;else{let O=b.nodata;if(O===void 0){let K;b.bands?K=b.bands[D]-1:K=D,O=l[y][K]}const B=isNaN(O);(!B&&k!==O||B&&!isNaN(k))&&(v=!1,h[p]=R)}p++}if(!v){const D=s+y,k=n[D];k&&!k[0][g]&&(v=!0)}}f&&(v||(h[p]=255),p++)}return h}}pP.prototype.getView;const PZe="https://tile.googleapis.com/v1/createSession",NZe="https://tile.googleapis.com/v1/2dtiles",BZe="https://tile.googleapis.com/tile/v1/viewport",zZe=22;class jZe extends hh{constructor(t){const n=!!t.highDpi;super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null;const r={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"};t.imageFormat&&(r.imageFormat=t.imageFormat),t.scale&&(r.scale=t.scale),n&&(r.highDpi=!0),t.layerTypes&&(r.layerTypes=t.layerTypes),t.styles&&(r.styles=t.styles),t.overlay===!0&&(r.overlay=!0),t.apiOptions&&(r.apiOptions=t.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,n){return fetch(t,n)}async createSession_(){const t=PZe+"?key="+this.apiKey_,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(t,n);if(!r.ok){try{const c=await r.json();this.error_=new Error(c.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const i=await r.json(),s=this.getTilePixelRatio(1),o=[i.tileWidth/s,i.tileHeight/s];this.tileGrid=rE({extent:nE(this.getProjection()),maxZoom:zZe,tileSize:o});const a=i.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(c,d,h){const p=c[0],g=c[1],v=c[2];return`${NZe}/${p}/${g}/${v}?session=${a}&key=${l}`};const u=parseInt(i.expiry,10)*1e3,f=Math.max(u-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),f),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[zp.ANIMATING]||t.viewHints[zp.INTERACTING]||t.animate)return this.previousViewportAttribution_;const[n,r]=Pve(Bje(t.extent),t.viewState.projection),[i,s]=Pve(zje(t.extent),t.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(t.viewState.resolution,this.zDirection)}&north=${s}&south=${r}&east=${i}&west=${n}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const u=this.sessionTokenValue_,f=this.apiKey_,c=`${BZe}?session=${u}&key=${f}&${l}`;return this.previousViewportAttribution_=await fetch(c).then(d=>d.json()).then(d=>d.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let Cke=class extends bI{constructor(t,n,r,i,s,o,a){super(n,r,i,s,o,a),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const t=super.getImage();if(this.state==Ts.LOADED){const n=this.tileSize_;if(t.width==n[0]&&t.height==n[1])return this.zoomifyImage_=t,t;const r=Jg(n[0],n[1]);return r.drawImage(t,0,0),this.zoomifyImage_=r.canvas,r.canvas}return t}};class UZe extends hh{constructor(t){const n=t.size,r=t.tierSizeCalculation!==void 0?t.tierSizeCalculation:"default",i=t.tilePixelRatio||1,s=n[0],o=n[1],a=[],l=t.tileSize||G4;let u=l*i;switch(r){case"default":for(;s>u||o>u;)a.push([Math.ceil(s/u),Math.ceil(o/u)]),u+=u;break;case"truncated":let T=s,D=o;for(;T>u||D>u;)a.push([Math.ceil(T/u),Math.ceil(D/u)]),T>>=1,D>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const f=[i],c=[0];for(let T=1,D=a.length;T<D;T++)f.push(i<<T),c.push(a[T-1][0]*a[T-1][1]+c[T-1]);f.reverse();const d=new dD({tileSize:l,extent:t.extent||[0,-o,s,0],resolutions:f});let h=t.url;h&&!h.includes("{TileGroup}")&&!h.includes("{tileIndex}")&&(h+="{TileGroup}/{z}-{x}-{y}.jpg");const p=jCe(h);let g=l*i;function v(T){return function(D,k,R){if(!D)return;const O=D[0],B=D[1],K=D[2],L=B+K*a[O][0],$=(L+c[O])/g|0,I={z:O,x:B,y:K,tileIndex:L,TileGroup:"TileGroup"+$};return T.replace(/\{(\w+?)\}/g,function(U,q){return I[q]})}}const y=SI(p.map(v)),b=Cke.bind(null,wc(l*i));super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:b,tileGrid:d,tileUrlFunction:y,transition:t.transition}),this.zDirection=t.zDirection;const w=d.getTileCoordForCoordAndResolution(Dp(d.getExtent()),f[f.length-1]),E=y(w,1,null),A=new Image;A.addEventListener("error",()=>{g=l,this.changed()}),A.src=E}}function sw(e){return e.toLocaleString("en",{maximumFractionDigits:10})}class qZe extends hh{constructor(t){const n=t||{};let r=n.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const i=n.version||Zs.VERSION2,s=n.sizes||[],o=n.size;kc(o!=null&&Array.isArray(o)&&o.length==2&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,"Missing or invalid `size`");const a=o[0],l=o[1],u=n.tileSize,f=n.tilePixelRatio||1,c=n.format||"jpg",d=n.quality||(n.version==Zs.VERSION1?"native":"default");let h=n.resolutions||[];const p=n.supports||[],g=n.extent||[0,-l,a,0],v=s!=null&&Array.isArray(s)&&s.length>0,y=u!==void 0&&(typeof u=="number"&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),b=p!=null&&Array.isArray(p)&&(p.includes("regionByPx")||p.includes("regionByPct"))&&(p.includes("sizeByWh")||p.includes("sizeByH")||p.includes("sizeByW")||p.includes("sizeByPct"));let w,E,A;if(h.sort(function(R,O){return O-R}),y||b)if(u!=null&&(typeof u=="number"&&Number.isInteger(u)&&u>0?(w=u,E=u):Array.isArray(u)&&u.length>0&&((u.length==1||u[1]==null&&Number.isInteger(u[0]))&&(w=u[0],E=u[0]),u.length==2&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(w=u[0],E=u[1]):u[0]==null&&Number.isInteger(u[1])&&(w=u[1],E=u[1])))),(w===void 0||E===void 0)&&(w=G4,E=G4),h.length==0){A=Math.max(Math.ceil(Math.log(a/w)/Math.LN2),Math.ceil(Math.log(l/E)/Math.LN2));for(let R=A;R>=0;R--)h.push(Math.pow(2,R))}else{const R=Math.max(...h);A=Math.round(Math.log(R)/Math.LN2)}else if(w=a,E=l,h=[],v){s.sort(function(O,B){return O[0]-B[0]}),A=-1;const R=[];for(let O=0;O<s.length;O++){const B=a/s[O][0];if(h.length>0&&h[h.length-1]==B){R.push(O);continue}h.push(B),A++}if(R.length>0)for(let O=0;O<R.length;O++)s.splice(R[O]-O,1)}else h.push(1),s.push([a,l]),A=0;const T=new dD({tileSize:[w,E],extent:g,origin:jje(g),resolutions:h}),D=function(R,O,B){let K,L;const $=R[0];if($>A)return;const I=R[1],U=R[2],q=h[$];if(!(I===void 0||U===void 0||q===void 0||I<0||Math.ceil(a/q/w)<=I||U<0||Math.ceil(l/q/E)<=U)){if(b||y){const Y=I*w*q,X=U*E*q;let te=w*q,le=E*q,ee=w,z=E;if(Y+te>a&&(te=a-Y),X+le>l&&(le=l-X),Y+w*q>a&&(ee=Math.floor((a-Y+q-1)/q)),X+E*q>l&&(z=Math.floor((l-X+q-1)/q)),Y==0&&te==a&&X==0&&le==l)K="full";else if(!b||p.includes("regionByPx"))K=Y+","+X+","+te+","+le;else if(p.includes("regionByPct")){const he=sw(Y/a*100),de=sw(X/l*100),ze=sw(te/a*100),He=sw(le/l*100);K="pct:"+he+","+de+","+ze+","+He}i==Zs.VERSION3&&(!b||p.includes("sizeByWh"))?L=ee+","+z:!b||p.includes("sizeByW")?L=ee+",":p.includes("sizeByH")?L=","+z:p.includes("sizeByWh")?L=ee+","+z:p.includes("sizeByPct")&&(L="pct:"+sw(100/q))}else if(K="full",v){const Y=s[$][0],X=s[$][1];i==Zs.VERSION3?Y==a&&X==l?L="max":L=Y+","+X:Y==a?L="full":L=Y+","}else L=i==Zs.VERSION3?"max":"full";return r+K+"/"+L+"/0/"+d+"."+c}},k=Cke.bind(null,wc(u||256).map(function(R){return R*f}));super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:k,tileGrid:T,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:D,transition:n.transition}),this.zDirection=n.zDirection}}function kke(e,t,n,r,i,s){const o=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[Nve(eu(t)/a,Bve),Nve(Up(t)/a,Bve)];s.SIZE=l[0]+","+l[1],s.BBOX=t.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return g3(u,s)}function Tke(e){const t=e.load?e.load:j1,n=oi(e.projection||"EPSG:3857"),r=e.ratio??1.5,i=e.crossOrigin??null;return function(s,o,a){a=e.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,e.params),s=UCe(s,o,a,r);const u=kke(e.url,s,o,a,n,l),f=new Image;return f.crossOrigin=i,t(f,u).then(c=>{const d=eu(s)/c.width*a;return{image:c,extent:s,resolution:d,pixelRatio:a}})}}class HZe extends k0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:CI,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=Tke({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),j1(s))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}class GZe extends k0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5}getImageInternal(t,n,r,i){n=this.findNearestResolution(n);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==r&&a3(s.getExtent(),t))return s;t=t.slice(),NCe(t,this.ratio_);const o=eu(t)/n,a=Up(t)/n,l=[o*r,a*r],u=this.canvasFunction_.call(this,t,n,r,l,i);return u&&(s=new $I(t,n,r,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}function VZe(e,t,n,r){const i=eu(e),s=Up(e),o=t[0],a=t[1],l=.0254/r;return a*i>o*s?i*n/(o*l):s*n/(a*l)}function WZe(e,t,n,r,i,s,o){const a=VZe(n,r,s,o),l=Dp(n),u={OPERATION:i?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:o,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,t),g3(e,u)}function Dke(e){const t=e.load||j1,n=e.useOverlay??!1,r=e.metersPerUnit||1,i=e.displayDpi||96,s=e.ratio??1,o=e.crossOrigin??null;return function(a,l,u){const f=new Image;f.crossOrigin=o,a=UCe(a,l,u,s);const c=eu(a)/l,d=Up(a)/l,h=[c*u,d*u],p=WZe(e.url,e.params,a,h,n,r,i);return t(f,p).then(g=>({image:g,extent:a,pixelRatio:u}))}}class YZe extends k0{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.displayDpi_=t.displayDpi!==void 0?t.displayDpi:96,this.params_=Object.assign({},t.params),this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:CI,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.metersPerUnit_=t.metersPerUnit!==void 0?t.metersPerUnit:1,this.ratio_=t.ratio!==void 0?t.ratio:1,this.useOverlay_=t.useOverlay!==void 0?t.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=Dke({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),j1(s))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(t){Object.assign(this.params_,t),this.changed()}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}changed(){this.image=null,super.changed()}}function Lke(e){const t=e.load||j1,n=e.imageExtent,r=e.crossOrigin??null;return()=>{const i=new Image;return i.crossOrigin=r,t(i,e.url).then(s=>{const o=eu(n)/s.width,a=Up(n)/s.height;return{image:s,extent:n,resolution:o!==a?[o,a]:a,pixelRatio:1}})}}class Rke extends k0{constructor(t){const n=t.crossOrigin!==void 0?t.crossOrigin:null,r=t.imageLoadFunction!==void 0?t.imageLoadFunction:CI;super({attributions:t.attributions,interpolate:t.interpolate,projection:oi(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new CCe(this.imageExtent_,void 0,1,Lke({url:t.url,imageExtent:t.imageExtent,crossOrigin:n,load:(i,s)=>(this.image.setImage(i),r(this.image,s),j1(i))})),this.image.addEventListener(kl.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,n,r,i){return Gv(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const XZe=new Error("Image failed to load");function Fke(e,t,n,r,i){return new Promise((s,o)=>{const a=new Image;a.crossOrigin=i.crossOrigin??null,a.addEventListener("load",()=>s(a)),a.addEventListener("error",()=>o(XZe)),a.src=qCe(e,t,n,r,i.maxY)})}function K1e(e){return function(t,n,r,i){const s=Uje(e,t,n,r);return Fke(s,t,n,r,i)}}function ZZe(e){return function(t,n,r,i){const s=e(t,n,r,i);return Fke(s,t,n,r,i)}}function J1e(e){let t;if(Array.isArray(e))t=K1e(e);else if(typeof e=="string"){const n=jCe(e);t=K1e(n)}else if(typeof e=="function")t=ZZe(e);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return t}let Q1e=0;function ebe(e){return Array.isArray(e)?e.join(`
`):typeof e=="string"?e:(++Q1e,"url-function-key-"+Q1e)}class Oke extends uE{constructor(t){t=t||{};let n=t.loader,r;t.url&&(n=J1e(t.url),r=ebe(t.url));const i=n?t.state:"loading",s=t.wrapX===void 0?!0:t.wrapX;super({loader:n,key:r,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize,gutter:t.gutter,maxResolution:t.maxResolution,projection:t.projection,tileGrid:t.tileGrid,state:i,wrapX:s,transition:t.transition,interpolate:t.interpolate!==!1,crossOrigin:t.crossOrigin,zDirection:t.zDirection})}setUrl(t){const n=J1e(t);this.setLoader(n),this.setKey(ebe(t)),this.getState()!=="ready"&&this.setState("ready")}}function mP(e,t,n,r){const i=document.createElement("script"),s="olc_"+Ei(t);function o(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(e.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),n&&n()},1e4);window[s]=function(l){clearTimeout(a),o(),t(l)},document.head.appendChild(i)}class KZe extends Error{constructor(t){const n="Unexpected response status: "+t.status;super(n),this.name="ResponseError",this.response=t}}class JZe extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function Mke(e){return new Promise(function(t,n){function r(o){const a=o.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(u){const f="Error parsing response text as JSON: "+u.message;n(new Error(f));return}t(l);return}n(new KZe(a))}function i(o){n(new JZe(o.target))}const s=new XMLHttpRequest;s.addEventListener("load",r),s.addEventListener("error",i),s.open("GET",e),s.setRequestHeader("Accept","application/json"),s.send()})}function $ke(e,t){return t.includes("://")?t:new URL(t,e).href}const QZe={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},eKe={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function Ike(e,t){if(!t.length)return e;const n=new URL(e,"file:/");if(n.pathname.split("/").includes("collections"))return Z_('The "collections" query parameter cannot be added to collection endpoints'),e;const r=t.map(o=>encodeURIComponent(o)).join(",");n.searchParams.append("collections",r);const i=e.split("?")[0],s=decodeURIComponent(n.searchParams.toString());return`${i}?${s}`}function tKe(e,t,n){let r,i;for(let s=0;s<e.length;++s){const o=e[s];if(o.rel==="item"){if(o.type===t){r=o.href;break}(QZe[o.type]||!i&&o.type.startsWith("image/"))&&(i=o.href)}}if(!r)if(i)r=i;else throw new Error('Could not find "item" link');return n&&(r=Ike(r,n)),r}function nKe(e,t,n,r){let i,s;const o={};for(let a=0;a<e.length;++a){const l=e[a];if(o[l.type]=l.href,l.rel==="item"){if(l.type===t){i=l.href;break}eKe[l.type]&&(s=l.href)}}if(!i&&n)for(let a=0;a<n.length;++a){const l=n[a];if(o[l]){i=o[l];break}}if(!i)if(s)i=s;else throw new Error('Could not find "item" link');return r&&(i=Ike(i,r)),i}function tbe(e,t,n,r){let i=e.projection;if(!i&&(typeof t.crs=="string"?i=oi(t.crs):"uri"in t.crs&&(i=oi(t.crs.uri)),!i))throw new Error(`Unsupported CRS: ${JSON.stringify(t.crs)}`);const s=t.orderedAxes,a=!(s?s.slice(0,2).map(T=>T.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):i.getAxisOrientation()).startsWith("en"),l=t.tileMatrices,u={};for(let T=0;T<l.length;++T){const D=l[T];u[D.id]=D}const f={},c=[];if(r)for(let T=0;T<r.length;++T){const D=r[T],k=D.tileMatrix;c.push(k),f[k]=D}else for(let T=0;T<l.length;++T){const D=l[T].id;c.push(D)}const d=c.length,h=new Array(d),p=new Array(d),g=new Array(d),v=new Array(d),y=[-1/0,-1/0,1/0,1/0];for(let T=0;T<d;++T){const D=c[T],k=u[D],R=k.pointOfOrigin;a?h[T]=[R[1],R[0]]:h[T]=R,p[T]=k.cellSize,g[T]=[k.matrixWidth,k.matrixHeight],v[T]=[k.tileWidth,k.tileHeight];const O=f[D];if(O){const B=k.cellSize*k.tileWidth,K=h[T][0]+O.minTileCol*B,L=h[T][0]+(O.maxTileCol+1)*B,$=k.cellSize*k.tileHeight,I=k.cornerOfOrigin==="bottomLeft";let U,q;I?(U=h[T][1]+O.minTileRow*$,q=h[T][1]+(O.maxTileRow+1)*$):(U=h[T][1]-(O.maxTileRow+1)*$,q=h[T][1]-O.minTileRow*$),Kg(y,[K,U,L,q],y)}}const b=new dD({origins:h,resolutions:p,sizes:g,tileSizes:v,extent:r?y:void 0}),w=e.context,E=e.url;function A(T,D,k){if(!T)return;const R=c[T[0]],O=u[R],B=O.cornerOfOrigin==="bottomLeft",K={tileMatrix:R,tileCol:T[1],tileRow:B?-T[2]-1:T[2]};if(r){const $=f[O.id];if(K.tileCol<$.minTileCol||K.tileCol>$.maxTileCol||K.tileRow<$.minTileRow||K.tileRow>$.maxTileRow)return}Object.assign(K,w);const L=n.replace(/\{(\w+?)\}/g,function($,I){return K[I]});return $ke(E,L)}return{grid:b,projection:i,urlTemplate:n,urlFunction:A}}function rKe(e,t){const n=t.tileMatrixSetLimits;let r;if(t.dataType==="map")r=tKe(t.links,e.mediaType,e.collections);else if(t.dataType==="vector")r=nKe(t.links,e.mediaType,e.supportedMediaTypes,e.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(t.tileMatrixSet)return tbe(e,t.tileMatrixSet,r,n);const i=t.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!i)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const s=i.href,o=$ke(e.url,s);return Mke(o).then(function(a){return tbe(e,a,r,n)})}function Pke(e){return Mke(e.url).then(function(t){return rKe(e,t)})}class iKe extends hh{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null,collections:t.collections};Pke(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){Z_(t),this.setState("error")}}class sKe extends hD{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null,collections:t.collections};Pke(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){Z_(t),this.setState("error")}}function Nke(e){return function(t){const n=t.buffers,r=t.meta,i=t.imageOps,s=t.width,o=t.height,a=n.length,l=n[0].byteLength;if(i){const d=new Array(a);for(let p=0;p<a;++p)d[p]=new ImageData(new Uint8ClampedArray(n[p]),s,o);return e(d,r).data.buffer}const u=new Uint8ClampedArray(l),f=new Array(a),c=new Array(a);for(let d=0;d<a;++d)f[d]=new Uint8ClampedArray(n[d]),c[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let p=0;p<a;++p){const g=f[p];c[p][0]=g[d],c[p][1]=g[d+1],c[p][2]=g[d+2],c[p][3]=g[d+3]}const h=e(c,r);u[d]=h[0],u[d+1]=h[1],u[d+2]=h[2],u[d+3]=h[3]}return u.buffer}}function oKe(e,t){const r=Object.keys(e.lib||{}).map(function(s){return"const "+s+" = "+e.lib[s].toString()+";"}).concat(["const __minion__ = ("+Nke.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",t),i}function aKe(e,t){const n=Nke(e.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||t({data:{buffer:n(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class lKe extends FCe{constructor(t){super(),this.imageOps_=!!t.imageOps;let n;t.threads===0?n=0:this.imageOps_?n=1:n=t.threads||1;const r=new Array(n);if(n)for(let i=0;i<n;++i)r[i]=oKe(t,this.onWorkerMessage_.bind(this,i));else r[0]=aKe(t,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=t.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(t,n,r){this.enqueue_({inputs:t,meta:n,callback:r}),this.dispatch_()}enqueue_(t){for(this.queue_.push(t);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const t=this.queue_.shift();this.job_=t;const n=t.inputs[0].width,r=t.inputs[0].height,i=t.inputs.map(function(l){return l.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},i);return}const o=t.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const u=l*a,f=[];for(let c=0,d=i.length;c<d;++c)f.push(i[c].slice(u,u+a));this.workers_[l].postMessage({buffers:f,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},f)}}onWorkerMessage_(t,n){this.disposed||(this.dataLookup_[t]=n.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const t=this.job_,n=this.workers_.length;let r,i;if(n===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=t.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(n);const o=4*Math.ceil(s/4/n);for(let a=0;a<n;++a){const l=this.dataLookup_[a].buffer,u=a*o;r.set(new Uint8ClampedArray(l),u),i[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},t.callback(null,new ImageData(r,t.inputs[0].width,t.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let t=0;t<this.workers_.length;++t)this.workers_[t].terminate();this.workers_.length=0}}const nbe={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class rbe extends HCe{constructor(t,n,r){super(t),this.extent=n.extent,this.resolution=n.viewState.resolution/n.pixelRatio,this.data=r}}class Bke extends k0{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=t.operationType!==void 0?t.operationType:"pixel",this.threads_=t.threads!==void 0?t.threads:1,this.layers_=fKe(t.sources);const n=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(kl.CHANGE,n);this.useResolutions_=t.resolutions!==null,this.tileQueue_=new qje(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Ko(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:cKe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Ko(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Ei(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let o=0,a=t.sources.length;o<a;++o){const l=t.sources[o],u=l instanceof kI?l:l.getSource();if(!u)continue;const f=(s=u.getAttributions())==null?void 0:s(r);typeof f=="string"?i.push(f):f!==void 0&&i.push(...f)}return i}),t.operation!==void 0&&this.setOperation(t.operation,t.lib)}setOperation(t,n){this.processor_&&this.processor_.dispose(),this.processor_=new lKe({operation:t,imageOps:this.operationType_==="image",queue:1,lib:n,threads:this.threads_}),this.changed()}updateFrameState_(t,n,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Dp(t);i.size[0]=Math.ceil(eu(t)/n),i.size[1]=Math.ceil(Up(t)/n),i.extent=[s[0]-i.size[0]*n/2,s[1]-i.size[1]*n/2,s[0]+i.size[0]*n/2,s[1]+i.size[1]*n/2],i.time=Date.now();const o=i.viewState;return o.center=s,o.projection=r,o.resolution=n,i}allSourcesReady_(){let t=!0,n;for(let r=0,i=this.layers_.length;r<i;++r)if(n=this.layers_[r].getSource(),!n||n.getState()!=="ready"){t=!1;break}return t}getImage(t,n,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),n=this.findNearestResolution(n);const s=this.updateFrameState_(t,n,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(n!==o||!H_(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,n=this.layers_.length,r=new Array(n);for(let s=0;s<n;++s){t.layerIndex=s,t.renderTargets={};const o=uKe(this.layers_[s],t);if(o)r[s]=o;else return}const i={};this.dispatchEvent(new rbe(nbe.BEFOREOPERATIONS,t,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,n,r,i){if(n||!r)return;const s=t.extent,o=t.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!H_(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(eu(s)/o),u=Math.round(Up(s)/o);a=Jg(l,u),this.renderedImageCanvas_=new $I(s,o,1,a.canvas)}a.putImageData(r,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new rbe(nbe.AFTEROPERATIONS,t,i))}getResolutions(t){if(!this.useResolutions_)return null;let n=super.getResolutions();if(!n)for(let r=0,i=this.layers_.length;r<i&&(n=this.layers_[r].getSource().getResolutions(t),!n);++r);return n}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Bke.prototype.dispose;let tg=null;function uKe(e,t){const n=e.getRenderer();if(!n)throw new Error("Unsupported layer type: "+e);if(!n.prepareFrame(t))return null;const r=t.size[0],i=t.size[1];if(r===0||i===0)return null;const s=n.renderFrame(t,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===i)return o.getContext("2d").getImageData(0,0,r,i)}if(!tg)tg=Jg(r,i,void 0,{willReadFrequently:!0});else{const a=tg.canvas;a.width!==r||a.height!==i?tg=Jg(r,i,void 0,{willReadFrequently:!0}):tg.clearRect(0,0,r,i)}return tg.drawImage(o,0,0,r,i),tg.getImageData(0,0,r,i)}function cKe(e){return e.map(function(t){return t.getLayerState()})}function fKe(e){const t=e.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=dKe(e[r]);return n}function dKe(e){let t;return e instanceof kI?e instanceof fD?t=new m3({source:e}):e instanceof k0&&(t=new EI({source:e})):t=e,t}const hKe='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',pKe='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',mKe='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',gKe={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},yKe={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class vKe extends X_{constructor(t){const n=t.layer.indexOf("-"),r=n==-1?t.layer:t.layer.slice(0,n),i=yKe[r]||{minZoom:0,maxZoom:20,retina:!0},s=gKe[t.layer],o=t.apiKey?"?api_key="+t.apiKey:"",a=i.retina&&t.retina?"@2x":"",l=t.url!==void 0?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+a+"."+s.extension+o,u=[hKe,pKe,Hje];t.layer.startsWith("stamen_")&&u.splice(1,0,mKe),super({attributions:u,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:i.maxZoom,minZoom:t.minZoom!==void 0?t.minZoom:i.minZoom,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:l,tilePixelRatio:a?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}}class bKe extends hh{constructor(t){t=t||{},super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=uD(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const n=[];for(const r in this.params_)n[t++]=r+"-"+this.params_[r];return n.join("/")}getParams(){return this.params_}getRequestUrl_(t,n,r,i,s,o){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const u=Gje(Vje(t),a.length);l=a[u]}return kke(l,r,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(t[0]),i,s,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=t[0])return;n!=1&&!this.hidpi_&&(n=1);const s=i.getTileCoordExtent(t,this.tmpExtent_);let o=wc(i.getTileSize(t[0]),this.tmpSize);n!=1&&(o=Wje(o,n,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,o,s,n,r,a)}}class xKe extends Oke{constructor(t){t=t||{};const n=t.template||"z:{z} x:{x} y:{y}",r=t.source;super({transition:0,wrapX:t.wrapX!==void 0?t.wrapX:r!==void 0?r.getWrapX():void 0});const i=()=>{var o;this.projection=t.projection!==void 0?oi(t.projection):r!==void 0?r.getProjection():this.projection,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:r!==void 0?r.getTileGrid():this.tileGrid,this.zDirection=t.zDirection!==void 0?t.zDirection:r!==void 0?r.zDirection:this.zDirection,r instanceof uE&&(this.transformMatrix=((o=r.transformMatrix)==null?void 0:o.slice())||null);const s=this.tileGrid;s&&this.setTileSizes(s.getResolutions().map((a,l)=>wc(s.getTileSize(l)).map(u=>Math.max(Math.floor(u),1)))),this.setLoader((a,l,u,f)=>{const c=qCe(n,a,l,u,f.maxY),[d,h]=this.getTileSize(a),p=Jg(d,h);return p.strokeStyle="grey",p.strokeRect(.5,.5,d+.5,h+.5),p.fillStyle="grey",p.strokeStyle="white",p.textAlign="center",p.textBaseline="middle",p.font="24px sans-serif",p.lineWidth=4,p.strokeText(c,d/2,h/2,d),p.fillText(c,d/2,h/2,d),p.canvas}),this.setState("ready")};if(r===void 0||r.getState()==="ready")i();else{const s=()=>{r.getState()==="ready"&&(r.removeEventListener(kl.CHANGE,s),i())};r.addEventListener(kl.CHANGE,s)}}}class zke extends hh{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:oi("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)mP(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const n=oi("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const u=AI(n,r);i=Vv(t.bounds,u)}const s=nE(r),o=t.minzoom||0,a=t.maxzoom||22,l=rE({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=GCe(t.tiles,l),t.attribution&&!this.getAttributions()){const u=i!==void 0?i:s;this.setAttributions(function(f){return Gv(u,f.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class wKe extends Xje{constructor(t,n,r,i,s,o){super(t,n),this.src_=r,this.extent_=i,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const n=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof i!="string")return null;let s=i.charCodeAt(Math.floor(n*i.length));s>=93&&s--,s>=35&&s--,s-=32;let o=null;if(s in this.keys_){const a=this.keys_[s];this.data_&&a in this.data_?o=this.data_[a]:o=a}return o}forDataAtCoordinate(t,n,r){this.state==Ts.EMPTY&&r===!0?(this.state=Ts.IDLE,Zje(this,kl.CHANGE,i=>{n(this.getData(t))}),this.loadInternal_()):r===!0?setTimeout(()=>{n(this.getData(t))},0):n(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=Ts.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=Ts.LOADED,this.changed()}loadInternal_(){if(this.state==Ts.IDLE)if(this.state=Ts.LOADING,this.jsonp_)mP(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(Ts.EMPTY)}}class _Ke extends fD{constructor(t){if(super({projection:oi("EPSG:3857"),state:"loading",wrapX:t.wrapX!==void 0?t.wrapX:!0,zDirection:t.zDirection}),this.preemptive_=t.preemptive!==void 0?t.preemptive:!0,this.tileUrlFunction_=Yje,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)mP(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,n,r,i){if(this.tileGrid){const s=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,s);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,i)}else i===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const n=oi("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const f=AI(n,r);i=Vv(t.bounds,f)}const s=nE(r),o=t.minzoom||0,a=t.maxzoom||22,l=rE({extent:s,maxZoom:a,minZoom:o});this.tileGrid=l,this.template_=t.template;const u=t.grids;if(!u){this.setState("error");return}if(this.tileUrlFunction_=GCe(u,l),t.attribution){const f=i!==void 0?i:s;this.setAttributions(function(c){return Gv(f,c.extent)?[t.attribution]:null})}this.setState("ready")}getTile(t,n,r,i,s){const o=[t,n,r],a=this.getTileCoordForTileUrlFunction(o,s),l=this.tileUrlFunction_(a,i,s);return new wKe(o,l!==void 0?Ts.IDLE:Ts.EMPTY,l!==void 0?l:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_)}}function EKe(e,t){const n=new $Ce(32),r=e.getExtent();return function(i,s){n.expireCache(),r&&(i=Kg(r,i));const o=e.getZForResolution(s),a=[];return e.forEachTileCoord(i,o,l=>{const u=l.toString();if(!n.containsKey(u)){const f=t(l);n.set(u,f)}a.push(n.get(u))}),a}}const SKe=Object.freeze(Object.defineProperty({__proto__:null,BingMaps:WYe,CartoDB:YYe,Cluster:XYe,DataTile:uE,GeoTIFF:pP,Google:jZe,IIIF:qZe,Image:k0,ImageArcGISRest:HZe,ImageCanvas:GZe,ImageMapGuide:YZe,ImageStatic:Rke,ImageTile:Oke,ImageWMS:Kje,OGCMapTile:iKe,OGCVectorTile:sKe,OSM:Jje,Raster:Bke,Source:kI,StadiaMaps:vKe,Tile:fD,TileArcGISRest:bKe,TileDebug:xKe,TileImage:hh,TileJSON:zke,TileWMS:VCe,UTFGrid:_Ke,UrlTile:Qje,Vector:Q2,VectorTile:hD,WMTS:WCe,XYZ:X_,Zoomify:UZe,createArcGISRestLoader:Tke,createMapGuideLoader:Dke,createStaticLoader:Lke,createWMSLoader:eUe,sourcesFromTileGrid:EKe},Symbol.toStringTag,{value:"Module"})),AKe="1.0.0",CKe="",kKe=JSON.parse('[{"kind":"javascript-module","path":"elements/chart/src/main.js","declarations":[{"kind":"class","description":"Chart component based on [Vega-Lite](https://vega.github.io/vega-lite/)/[Vega-Embed](https://github.com/vega/vega-embed).\\nPass a valid Vega spec as `spec` property in order to render a chart.\\n\\nThe `eox-chart` provides some default `spec` settings (merged with the provided `spec` property) and helper functionalities on top of Vega-Lite.","name":"EOxChart","members":[{"kind":"field","name":"spec","privacy":"public","type":{"text":"VisualizationSpec"},"description":"[Vega-Lite spec](https://vega.github.io/vega-lite/docs/spec.html)","default":"undefined"},{"kind":"field","name":"dataValues","privacy":"public","type":{"text":"{[dataSourceName: string]: InlineData}"},"description":"Data values passed on runtime. Requires a [named data source](https://vega.github.io/vega-lite/docs/data.html#named) in the provided `spec`","default":"undefined"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-chart","customElement":true}],"exports":[{"kind":"js","name":"EOxChart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}},{"kind":"custom-element-definition","name":"eox-chart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}}]},{"kind":"javascript-module","path":"elements/drawtools/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxDrawTools","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"field","name":"#olMap","privacy":"private","type":{"text":"Map"}},{"kind":"field","name":"#geoJSON","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"#layerId","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"layerId","privacy":"public","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","attribute":"layer-id"},{"kind":"method","name":"startDrawing"},{"kind":"method","name":"discardDrawing"},{"kind":"method","name":"handleFeatureChange","parameters":[{"name":"text","description":"The string representation of the features to be parsed.","type":{"text":"string"}},{"name":"replaceFeatures","default":"false","description":"A boolean flag indicating whether to replace the existing features.","type":{"text":"boolean"}}]},{"kind":"method","name":"handleFilesChange","parameters":[{"name":"evt","description":"The event object from the file input interaction.","type":{"text":"DragEvent | Event"}}]},{"kind":"method","name":"onModifyEnd"},{"kind":"method","name":"updateGeoJSON","description":"Update #geoJSON with stringify feature."},{"kind":"method","name":"emitDrawnFeatures","description":"Triggers different events when the drawing of a shape is completed."},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"allowModify","privacy":"public","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","attribute":"allow-modify"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"currentlyDrawing","privacy":"public","type":{"text":"boolean"},"description":"Whether the user is currently in the process of drawing or not","default":"false"},{"kind":"field","name":"draw","privacy":"public","type":{"text":"Draw | EOxSelectInteraction"},"description":"The current native OpenLayers `draw` interaction","default":"null"},{"kind":"field","name":"drawLayer","privacy":"public","type":{"text":"default"},"description":"The current native OpenLayers draw `layer` (initialized with a `zIndex` of 100)","default":"null"},{"kind":"field","name":"drawnFeatures","privacy":"public","type":{"text":"Array<Feature>"},"description":"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.","default":"[]"},{"kind":"field","name":"modify","privacy":"public","type":{"text":"Modify"},"description":"The current native OpenLayers `modify` interaction","default":"null"},{"kind":"field","name":"multipleFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","attribute":"multiple-features"},{"kind":"field","name":"importFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","attribute":"import-features"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","attribute":"show-editor"},{"kind":"field","name":"showList","privacy":"public","type":{"text":"boolean"},"description":"Show list of features","default":"false","attribute":"show-list"},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","attribute":"projection"},{"kind":"field","name":"type","privacy":"public","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","attribute":"type"},{"kind":"field","name":"selectionEvents","type":{"text":"ReturnType<typeof default>"},"default":"null"},{"kind":"field","name":"format","privacy":"public","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","attribute":"format"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"noShadow"}],"events":[{"name":"drawupdate","type":{"text":"Array<Feature>"},"description":"Fires whenever features are added, modified or discarded, where the event detail\\nis the `drawnFeatures` array"}],"attributes":[{"name":"allow-modify","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","fieldName":"allowModify"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer-id","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","fieldName":"layerId"},{"name":"multiple-features","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","fieldName":"multipleFeatures"},{"name":"import-features","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","fieldName":"importFeatures"},{"name":"show-editor","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","fieldName":"showEditor"},{"name":"show-list","type":{"text":"boolean"},"description":"Show list of features","default":"false","fieldName":"showList"},{"name":"projection","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","fieldName":"projection"},{"name":"noShadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"format","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","fieldName":"format"},{"name":"type","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","fieldName":"type"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-drawtools","customElement":true}],"exports":[{"kind":"js","name":"EOxDrawTools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}},{"kind":"custom-element-definition","name":"eox-drawtools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}}]},{"kind":"javascript-module","path":"elements/geosearch/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxGeoSearch","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"method","name":"onInput","parameters":[{"name":"e"}]},{"kind":"method","name":"onInputBlur"},{"kind":"method","name":"onButtonClick"},{"kind":"method","name":"getFlexDirection"},{"kind":"method","name":"getResultsDirection"},{"kind":"method","name":"getVerticalAlign"},{"kind":"method","name":"getMarginDirection","parameters":[{"name":"direction"}]},{"kind":"method","name":"handleSelect","parameters":[{"name":"event"}]},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"_data","privacy":"private","description":"Internal storage of OpenCage API data after a successful API request.","type":{"text":"array"},"default":"[]"},{"kind":"field","name":"_isListVisible","privacy":"private","description":"Whether or not the list dropdown is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_isInputVisible","privacy":"private","description":"Whether or not the input field is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_query","privacy":"private","description":"The search query, which is bound to the input field.","type":{"text":"string"},"default":"\\"\\""},{"kind":"field","name":"_isLoading","privacy":"private","description":"Returns true if the element is currently loading data from the API.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"listDirection","type":{"text":"string"},"default":"\\"right\\""},{"kind":"field","name":"resultsDirection","privacy":"public","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","attribute":"results-direction"},{"kind":"field","name":"interval","privacy":"public","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","attribute":"interval"},{"kind":"field","name":"loaderSvg","privacy":"public","type":{"text":"string"},"default":"` <svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 100 100\\" preserveAspectRatio=\\"xMidYMid\\" width=\\"50\\" height=\\"50\\" style=\\"shape-rendering: auto; display: block; background: transparent;\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" > <g> <circle stroke-dasharray=\\"164.93361431346415 56.97787143782138\\" r=\\"35\\" stroke-width=\\"12\\" stroke=\\"#1a467c\\" fill=\\"none\\" cy=\\"50\\" cx=\\"50\\" > <animateTransform keyTimes=\\"0;1\\" values=\\"0 50 50;360 50 50\\" dur=\\"1.2222222222222223s\\" repeatCount=\\"indefinite\\" type=\\"rotate\\" attributeName=\\"transform\\" ></animateTransform> </circle> <g></g> </g> </svg> `","attribute":"loader-svg"},{"kind":"field","name":"fetchDebounced"},{"kind":"field","name":"endpoint","privacy":"public","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","attribute":"endpoint"},{"kind":"field","name":"queryParameter","privacy":"public","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","attribute":"queryParameter"},{"kind":"field","name":"button","privacy":"public","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","attribute":"button"},{"kind":"field","name":"small","privacy":"public","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","attribute":"small"},{"kind":"field","name":"label","privacy":"public","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","attribute":"label"},{"kind":"field","name":"direction","privacy":"public","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","attribute":"list-direction"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"events":[{"name":"geosearchSelect","type":{"text":"CustomEvent"},"description":"The select event, including the details of the selected item"}],"attributes":[{"name":"endpoint","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","fieldName":"endpoint"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"queryParameter","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","fieldName":"queryParameter"},{"name":"button","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","fieldName":"button"},{"name":"interval","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","fieldName":"interval"},{"name":"small","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","fieldName":"small"},{"name":"label","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","fieldName":"label"},{"name":"list-direction","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","fieldName":"direction"},{"name":"results-direction","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","fieldName":"resultsDirection"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"},{"name":"loader-svg","type":{"text":"string"},"default":"loaderSvg","fieldName":"loaderSvg"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch","customElement":true},{"kind":"class","description":"","name":"EOxGeoSearchItem","members":[{"kind":"field","name":"item","privacy":"public","type":{"text":"object"},"attribute":"item"},{"kind":"field","name":"onClick","privacy":"public","type":{"text":"function"},"attribute":"onClick"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"attributes":[{"name":"item","type":{"text":"object"},"fieldName":"item"},{"name":"onClick","type":{"text":"function"},"fieldName":"onClick"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch-item","customElement":true}],"exports":[{"kind":"custom-element-definition","name":"eox-geosearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}},{"kind":"custom-element-definition","name":"eox-geosearch-item","declaration":{"name":"EOxGeoSearchItem","module":"elements/geosearch/src/main.js"}},{"kind":"js","name":"EOxGeoSearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}}]},{"kind":"javascript-module","path":"elements/itemfilter/src/main.js","declarations":[{"kind":"class","description":"EOxItemFilter is a custom web component that provides a comprehensive item filtering system.\\nIt includes methods for applying filters, searching, sorting results, and resetting filters.\\nThe component supports both inline and dropdown modes for filter display.","name":"EOxItemFilter","members":[{"kind":"field","name":"#resultAggregation","privacy":"private","type":{"text":"Array<string>"},"default":"[]"},{"kind":"field","name":"#items","privacy":"private","type":{"text":"Array<object>"},"default":"[]"},{"kind":"field","name":"#config","privacy":"private","default":"ELEMENT_CONFIG","type":{"text":"Object"}},{"kind":"method","name":"apply","description":"Applies the filters to the items and updates the result aggregation."},{"kind":"method","name":"searchHandler","description":"Performs a search based on the current configuration and items.\\nRequests an update after the search completes."},{"kind":"method","name":"sortResults","parameters":[{"name":"items","description":"The items to be sorted.","type":{"text":"Array<object>"}}],"description":"Sorts the given items based on the current configuration.","return":{"type":{"text":"Array<object>"}}},{"kind":"method","name":"#createFilter","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the filter element.","type":{"text":"number"}}],"description":"Creates a filter element based on the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"#createReset","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the reset element.","type":{"text":"number"}}],"description":"Creates a reset element for the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"resetFilters","description":"Resets all applied filters."},{"kind":"method","name":"updateResult","parameters":[{"name":"evt","description":"\\"result\\" event triggered by result component","type":{"text":"{detail: Object}"}}],"description":"Updates selected result when result component triggers the \\"result\\" event."},{"kind":"field","name":"items","privacy":"public","type":{"text":"Array<Object>"},"description":"The items to be filtered","default":"null"},{"kind":"field","name":"filters","privacy":"public","type":{"text":"Object"},"description":"The state object containing the applied filters.","default":"{}"},{"kind":"field","name":"results","privacy":"public","type":{"text":"Array<Object>"},"description":"The state object containing the filtered results.","default":"[]"},{"kind":"field","name":"selectedResult","privacy":"public","type":{"text":"Object"},"description":"The currently selected result","default":"null"},{"kind":"field","name":"search","type":{"text":"Function"},"privacy":"private"},{"kind":"field","name":"aggregateResults","privacy":"public","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","attribute":"aggregate-results"},{"kind":"field","name":"autoSpreadSingle","privacy":"public","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","attribute":"auto-spread-single"},{"kind":"field","name":"enableHighlighting","privacy":"public","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","attribute":"enable-highlighting"},{"kind":"field","name":"externalFilter","privacy":"public","type":{"text":"Function"},"description":"Use an external search endpoint instead of fuse search.\\nPassed properties: input string, filters object","default":"null"},{"kind":"field","name":"filterProperties","privacy":"public","type":{"text":"Array<{key?: String, keys?: Array<String>, title: String, type: String, placeholder?: String, format?: String, state?: Object}>"},"description":"The filter properties.","default":"[]"},{"kind":"field","name":"fuseConfig","privacy":"public","type":{"text":"Object"},"description":"Native fuse.js config override","default":"{}"},{"kind":"field","name":"inlineMode","privacy":"public","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","attribute":"inline-mode"},{"kind":"field","name":"matchAllWhenEmpty","privacy":"public","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","attribute":"match-all-when-empty"},{"kind":"field","name":"showResults","privacy":"public","type":{"text":"Boolean"},"description":"Display results list","default":"true","attribute":"show-result"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"subTitleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","attribute":"sub-title-property"},{"kind":"field","name":"imageProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","attribute":"image-property"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"expandMultipleFilters","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","attribute":"enable-multiple-filter"},{"kind":"field","name":"expandResults","privacy":"public","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","attribute":"expand-result"},{"kind":"field","name":"expandMultipleResults","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","attribute":"expand-multiple-results"},{"kind":"field","name":"resultType","privacy":"public","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","attribute":"result-type"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"filter","type":{"text":"CustomEvent"},"description":"Fires when the filters are changed; event detail includes `filters` and `results`"},{"name":"select","type":{"text":"CustomEvent"},"description":"Fires when a result is selected; event detail is `selectedResult`"}],"attributes":[{"name":"aggregate-results","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","fieldName":"aggregateResults"},{"name":"auto-spread-single","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","fieldName":"autoSpreadSingle"},{"name":"enable-highlighting","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","fieldName":"enableHighlighting"},{"name":"inline-mode","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","fieldName":"inlineMode"},{"name":"match-all-when-empty","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","fieldName":"matchAllWhenEmpty"},{"name":"show-result","type":{"text":"Boolean"},"description":"Display results list","default":"true","fieldName":"showResults"},{"name":"id-property","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"sub-title-property","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","fieldName":"subTitleProperty"},{"name":"image-property","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","fieldName":"imageProperty"},{"name":"enable-multiple-filter","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","fieldName":"expandMultipleFilters"},{"name":"expand-result","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","fieldName":"expandResults"},{"name":"expand-multiple-results","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","fieldName":"expandMultipleResults"},{"name":"result-type","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","fieldName":"resultType"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-itemfilter","customElement":true}],"exports":[{"kind":"js","name":"EOxItemFilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}},{"kind":"custom-element-definition","name":"eox-itemfilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}}]},{"kind":"javascript-module","path":"elements/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"customEditorInterfaces","privacy":"public","type":{"text":"Array"},"description":"List of custom editor interface\\nRead more about the implementation of custom editor interfaces here:\\nhttps://github.com/json-editor/json-editor/blob/master/docs/custom-editor.html","default":"[]"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/src/main.js","declarations":[{"kind":"class","description":"Display layers and groups of a connected OpenLayers map\\n\\n## Layer properties\\nIn order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. `layer.set(property, value)`).\\n\\n#### `id?: string`\\nThe layer id. Not required but recommended. Can also be any other layer property (defined via the `idProperty` property or `id-property`attribute - see API).\\n\\n#### `title?: string`\\nThe title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the `titleProperty` property or `title-property`attribute - see API).\\n\\n#### `layerControlHide?: Boolean`\\nCompletely hide a layer from the layer control.\\n\\n#### `layerControlOptional?: Boolean`\\nInitially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.\\n\\n#### `layerControlExclusive?: Boolean`\\nMake layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.\\n\\n#### `layerControlExpand?: Boolean`\\nPre-expand a layer dropdown so that it is always open when the component initializes.\\n\\n#### `layerControlToolsExpand?: Boolean`\\nPre-expand the layer tools so they are visible when the component initializes.\\n\\n#### `layerConfig?: Object`\\nConfiguration options for the layer (displayed in the layer tools\' \\"config\\" tab)\\n\\n#### `layerDateTime?: Object`\\nPartial eox-timecontrol config passed to the \\"datetime\\" tool\\n\\n### `layerLegend`?: Object\\nCreates a dynamic color legend based on range & domain of values. Extenteds partial config of `color-legend-element`","name":"EOxLayerControl","members":[{"kind":"field","name":"#eoxMap","privacy":"private","description":"Instance of `eox-map` which is a wrapper for the OL","type":{"text":"EOxMap"}},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"#handleLayerControlLayerListChange","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent & {target: Element}"}}],"description":"Event handler for changes in the layer list"},{"kind":"method","name":"#handleDatetimeUpdate","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent"}}],"description":"Dispatches datetime updates from layer datetime to the layercontrol"},{"kind":"field","name":"#styleEOX","privacy":"private","default":"` :host, :root { font-family: Roboto, sans-serif; --padding: 0.5rem; --padding-vertical: .2rem; --list-padding: 48px; --layer-input-visibility: flex; --layer-summary-visibility: flex; --layer-type-visibility: block; --layer-title-visibility: flex; --layer-visibility: block; --layer-tools-button-visibility: flex; display: block; padding: var(--padding) 0; --background-color: var(--eox-background-color, transparent); background-color: var(--background-color, transparent); } select { background-color: var(--background-color); } `"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"map","privacy":"public","type":{"text":"Map"},"description":"The native OL map instance","default":"null"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"showLayerZoomState","privacy":"public","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","attribute":"show-layer-zoom-state"},{"kind":"field","name":"tools","privacy":"public","type":{"text":"Array<String>"},"description":"Layer tools","default":"[\\"info\\", \\"opacity\\", \\"datetime\\", \\"config\\", \\"remove\\", \\"sort\\"]"},{"kind":"field","name":"addExternalLayers","privacy":"public","type":{"text":"Boolean"},"description":"Enable-disable external layer","default":"false"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"styleOverride","privacy":"public","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","attribute":"styleOverride"},{"kind":"field","name":"toolsAsList","privacy":"public","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","attribute":"toolsAsList"}],"events":[{"name":"layerchange","type":{"text":"CustomEvent"},"description":"A generic layer change event; could be a layer visibility, group length updates and others.\\nPasses the changed layer in the `detail`."},{"name":"datetime:updated","type":{"text":"CustomEvent"}}],"attributes":[{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"id-property","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"show-layer-zoom-state","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","fieldName":"showLayerZoomState"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"styleOverride","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","fieldName":"styleOverride"},{"name":"toolsAsList","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","fieldName":"toolsAsList"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-layercontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxLayerControl","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layercontrol","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layout/src/main.js","declarations":[{"kind":"class","description":"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\\n- `eox-layout`: the container holding all the items\\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight)","name":"EOxLayout","members":[],"attributes":[{"name":"gap"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout","customElement":true},{"kind":"class","description":"","name":"EOxLayoutItem","members":[],"attributes":[{"name":"x"},{"name":"y"},{"name":"w"},{"name":"h"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout-item","customElement":true}],"exports":[{"kind":"js","name":"EOxLayout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"js","name":"EOxLayoutItem","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout-item","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}}]},{"kind":"javascript-module","path":"elements/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string | number"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/stacinfo/src/main.js","declarations":[{"kind":"class","description":"### Introduction\\nWorking with STAC catalogs, collections and items often times requires\\nto fetch a JSON file, parse its contents and display some of its fields\\nin some formatted way. To make these steps reusable, the `eox-stacinfo`\\nelement offers a set of functionalities:\\n- **automatically fetch a STAC file** as soon as the element loads\\n- offer a **property whitelist** functionality to choose which properties to display\\n- display the properties in **configurable sections** (header, body, featured, footer)\\n- allow to **override** any property display for application-specific custom needs\\n\\nThe use case for this element is alongside a map which displays STAC files\\nor in a catalog browsing scenario where a quick look at the most important properties\\nis needed.\\n\\n#### Technology\\nUnder the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.","name":"EOxStacInfo","members":[{"kind":"field","name":"allowHtml","privacy":"public","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","attribute":"allow-html"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","attribute":"unstyled"},{"kind":"field","name":"for","privacy":"public","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","attribute":"for"},{"kind":"field","name":"header","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the header","default":"[]"},{"kind":"field","name":"tags","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display as tags","default":"[]"},{"kind":"field","name":"body","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display in the main body","default":"[]"},{"kind":"field","name":"featured","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the featured section","default":"[]"},{"kind":"field","name":"footer","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the footer","default":"[]"},{"kind":"field","name":"stacInfo","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the fetched STAC information","default":"[]"},{"kind":"field","name":"stacProperties","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the parsed STAC properties","default":"[]"}],"attributes":[{"name":"allow-html","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","fieldName":"allowHtml"},{"name":"unstyled","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","fieldName":"unstyled"},{"name":"for","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","fieldName":"for"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-stacinfo","customElement":true}],"exports":[{"kind":"js","name":"EOxStacInfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}},{"kind":"custom-element-definition","name":"eox-stacinfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}}]},{"kind":"javascript-module","path":"elements/storytelling/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxStoryTelling","members":[{"kind":"field","name":"#html","privacy":"private","description":"Generated HTML string using markdown","type":{"text":"String"},"default":"undefined"},{"kind":"field","name":"#config","privacy":"private","type":{"text":"Object"},"default":"{}","description":"Basic config"},{"kind":"field","name":"#debounceUpdateMarkdown","privacy":"private","type":{"text":"Object"},"default":"null","description":"Debounce update markdown"},{"kind":"method","name":"#dispatchInitEvent","privacy":"private","parameters":[{"name":"element","description":"Dom element","type":{"text":"Element"}}]},{"kind":"method","name":"handleSlotChange","description":"Handles changes to the slot\'s content, updating the component\'s internal state."},{"kind":"method","name":"waitForHtmlInitialization"},{"kind":"field","name":"markdown","privacy":"public","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","attribute":"markdown"},{"kind":"field","name":"markdownURL","privacy":"public","type":{"text":"String"},"description":"Markdown Content URL","default":"null","attribute":"markdown-url"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"disableAutosave","privacy":"public","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","attribute":"disable-autosave"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","attribute":"show-editor"},{"kind":"field","name":"showNav","privacy":"public","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","attribute":"show-nav"},{"kind":"field","name":"nav","privacy":"public","type":{"text":"Array<Object>"},"description":"List of items in navigation","default":"[]"},{"kind":"field","name":"addCustomSectionIndex","privacy":"public","type":{"text":"Number"},"description":"custom section index","default":"-1","attribute":"addCustomSectionIndex"},{"kind":"field","name":"selectedCustomElement","privacy":"public","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","attribute":"selectedCustomElement"}],"events":[{"name":"init","type":{"text":"CustomEvent"}},{"name":"changed","type":{"text":"CustomEvent"}}],"attributes":[{"name":"markdown","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","fieldName":"markdown"},{"name":"markdown-url","type":{"text":"String"},"description":"Markdown Content URL","default":"null","fieldName":"markdownURL"},{"name":"show-nav","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","fieldName":"showNav"},{"name":"show-editor","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","fieldName":"showEditor"},{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"disable-autosave","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","fieldName":"disableAutosave"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"addCustomSectionIndex","type":{"text":"Number"},"description":"custom section index","default":"-1","fieldName":"addCustomSectionIndex"},{"name":"selectedCustomElement","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","fieldName":"selectedCustomElement"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-storytelling","customElement":true}],"exports":[{"kind":"js","name":"EOxStoryTelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}},{"kind":"custom-element-definition","name":"eox-storytelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}}]},{"kind":"javascript-module","path":"elements/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"play","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"play"},{"kind":"field","name":"navigation","privacy":"public","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","attribute":"navigation"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"displayFormat","privacy":"public","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","attribute":"display-format"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"navigation","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","fieldName":"navigation"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"play"},{"name":"display-format","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","fieldName":"displayFormat"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"disablePlay","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"disable-play"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"disable-play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"disablePlay"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}}]}]'),TKe={schemaVersion:AKe,readme:CKe,modules:kKe};function ibe(e){const t={h3:"h3",...xCe(),...e.components};return bu.jsxs(bu.Fragment,{children:[`
`,`
`,bu.jsx(HBe,{isTemplate:!0}),`
`,bu.jsx(GBe,{}),`
`,bu.jsx(VBe,{}),`
`,bu.jsx(WBe,{}),`
`,bu.jsx(YBe,{}),`
`,bu.jsx(t.h3,{id:"api",children:"API"}),`
`,bu.jsx(XBe,{}),`
`,bu.jsx(ZBe,{includePrimary:!1})]})}function DKe(e={}){const{wrapper:t}={...xCe(),...e.components};return t?bu.jsx(t,{...e,children:bu.jsx(ibe,{...e})}):ibe(e)}const LKe=`
  :root, :host, eox-chart {
    display: block;
  }
  #vis {
    width: 100%;
    height: 100%;
  }
`,RKe=`
  eox-chart {
    font-family: Roboto, sans-serif;
  }
`,kD=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, transparent); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { /* TODO: why does this only work here and not from :root? */ --primary-color: #004170; --primary-color-hover: #004170cc; --error-color: #ff5252; display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0px;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input,input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004; background-color: var(--background-color);}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}:root,:host { --range-slider-height: 6px; --range-slider-thumb-size: 15px; --range-slider-thumb-border-radius: 50%; --range-slider-color: #004170; --range-slider-track-color: #d7dcdf; --range-slider-track-border-radius: 0;}input[type="range"] { -webkit-appearance: none; border: none; color: var(--range-slider-color); overflow: hidden; padding-left: 0; margin-left: 7px;}/*webkit*/input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; margin-top: calc( var(--range-slider-height) * 0.5 - var(--range-slider-thumb-size) * 0.5 );}input[type="range"]::-webkit-slider-runnable-track { height: var(--range-slider-height); border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-webkit-slider-thumb { cursor: grab; --clip-edges: 4px; --clip-top: calc( (var(--range-slider-thumb-size) - var(--range-slider-height)) * 0.5 ); --clip-bottom: calc(var(--range-slider-thumb-size) - var(--clip-top)); --clip-further: calc(100% + 1px); --box-fill: calc( -100vmax - var(--range-slider-thumb-size, var(--range-slider-thumb-size)) + 1px ) 0 0 100vmax currentColor; background: linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--range-slider-height) + 1px); background-color: currentColor; box-shadow: var(--box-fill); border-radius: var(--range-slider-thumb-size, var(--range-slider-thumb-size)); filter: brightness(100%); clip-path: polygon( 100% -1px, var(--clip-edges) -1px, 0 var(--clip-top), -100vmax var(--clip-top), -100vmax var(--clip-bottom), 0 var(--clip-bottom), var(--clip-edges) 100%, var(--clip-further) var(--clip-further) );}/*mozilla*/input[type="range"]::-moz-range-thumb { width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; cursor: grab;}input[type="range"]::-moz-range-track { border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-moz-range-progress { appearance: none; background: currentColor; transition-delay: 30ms;}input[type="range"]::-moz-range-track,input[type="range"]::-moz-range-progress { height: calc(var(--range-slider-height)); border-radius: var(--range-slider-track-border-radius);}/*toolcool slider*/tc-range-slider { --height: var(--range-slider-height); --panel-bg: var(--range-slider-track-color); --panel-bg-hover: var(--range-slider-track-color); --panel-bg-fill: var(--range-slider-color); --panel-bg-border-radius: var(--range-slider-track-border-radius); --pointer-bg: var(--range-slider-color); --pointer-bg-hover: var(--range-slider-color); --pointer-bg-focus: var(--range-slider-color); --pointer-width: var(--range-slider-thumb-size); --pointer-height: var(--range-slider-thumb-size); --pointer-shadow: none; --pointer-shadow-hover: none; --pointer-shadow-focus: none; --pointer-border: none; --pointer-border-hover: 0; --pointer-border-focus: 0; --pointer-border-radius: var(--range-slider-thumb-border-radius);}`,FKe=/("(?:[^\\"]|\\.)*")|[:,]/g;function pF(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function s(o,a,l){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const u=JSON.stringify(o,i);if(u===void 0)return u;const f=r-a.length-l;if(u.length<=f){const c=u.replace(FKe,(d,h)=>h||`${d} `);if(c.length<=f)return c}if(i!=null&&(o=JSON.parse(u),i=void 0),typeof o=="object"&&o!==null){const c=a+n,d=[];let h=0,p,g;if(Array.isArray(o)){p="[",g="]";const{length:v}=o;for(;h<v;h++)d.push(s(o[h],c,h===v-1?0:1)||"null")}else{p="{",g="}";const v=Object.keys(o),{length:y}=v;for(;h<y;h++){const b=v[h],w=`${JSON.stringify(b)}: `,E=s(o[b],c,w.length+(h===y-1?0:1));E!==void 0&&d.push(w+E)}}if(d.length>0)return[p,n+d.join(`,
${c}`),g].join(`
${a}`)}return u}(e,"",0)}function zl(e,t,n){return e.fields=t||[],e.fname=n,e}function Rs(e){return e==null?null:e.fname}function ka(e){return e==null?null:e.fields}function jke(e){return e.length===1?OKe(e[0]):MKe(e)}const OKe=e=>function(t){return t[e]},MKe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ot(e){throw Error(e)}function Gf(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||ot("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&ot("Access path missing closing bracket: "+e),r&&ot("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function Mu(e,t,n){const r=Gf(e);return e=r.length===1?r[0]:e,zl((n&&n.get||jke)(r),[e],t||e)}const fE=Mu("id"),Ra=zl(e=>e,[],"identity"),fp=zl(()=>0,[],"zero"),K1=zl(()=>1,[],"one"),$u=zl(()=>!0,[],"true"),Qh=zl(()=>!1,[],"false");function $Ke(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const Uke=0,gP=1,yP=2,qke=3,Hke=4;function vP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$Ke,r=e||Uke;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=gP&&n(t||"error","ERROR",arguments),this},warn(){return r>=yP&&n(t||"warn","WARN",arguments),this},info(){return r>=qke&&n(t||"log","INFO",arguments),this},debug(){return r>=Hke&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function $t(e){return e===Object(e)}const sbe=e=>e!=="__proto__";function J1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=IKe(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;Q1(r,s,i[s],o)}return r},{})}function Q1(e,t,n,r){if(!sbe(t))return;let i,s;if($t(n)&&!at(n)){s=$t(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Q1(s,i,n[i]):sbe(i)&&(s[i]=n[i])}else e[t]=n}function IKe(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function qr(e){return e[e.length-1]}function Aa(e){return e==null||e===""?null:+e}const Gke=e=>t=>e*Math.exp(t),Vke=e=>t=>Math.log(e*t),Wke=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Yke=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,S3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function TD(e,t,n,r){const i=n(e[0]),s=n(qr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function Xke(e,t){return TD(e,t,Aa,Ra)}function Zke(e,t){var n=Math.sign(e[0]);return TD(e,t,Vke(n),Gke(n))}function Kke(e,t,n){return TD(e,t,S3(n),S3(1/n))}function Jke(e,t,n){return TD(e,t,Wke(n),Yke(n))}function DD(e,t,n,r,i){const s=r(e[0]),o=r(qr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function bP(e,t,n){return DD(e,t,n,Aa,Ra)}function xP(e,t,n){const r=Math.sign(e[0]);return DD(e,t,n,Vke(r),Gke(r))}function A3(e,t,n,r){return DD(e,t,n,S3(r),S3(1/r))}function wP(e,t,n,r){return DD(e,t,n,Wke(r),Yke(r))}function Qke(e){return 1+~~(new Date(e).getMonth()/3)}function eTe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Pt(e){return e!=null?at(e)?e:[e]:[]}function tTe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function ir(e){return typeof e=="function"}const PKe="descending";function _P(e,t,n){n=n||{},t=Pt(t)||[];const r=[],i=[],s={},o=n.comparator||NKe;return Pt(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===PKe?-1:1),i.push(a=ir(a)?a:Mu(a,null,n)),(ka(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:zl(o(i,r),Object.keys(s))}const LD=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),NKe=(e,t)=>e.length===1?BKe(e[0],t[0]):zKe(e,t,e.length),BKe=(e,t)=>function(n,r){return LD(e(n),e(r))*t},zKe=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=LD(s(r),s(i));return o*t[a]});function Fa(e){return ir(e)?e:()=>e}function EP(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function rr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function $f(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function nTe(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}const jKe=Object.prototype.hasOwnProperty;function Yt(e,t){return jKe.call(e,t)}const lA={};function eb(e){let t={},n;function r(s){return Yt(t,s)&&t[s]!==lA}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===lA&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=lA),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==lA&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function rTe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=qr(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const f=Math.abs(l-t);return u<f&&u<=o?r:f<=o?i:s}function Lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),rr(r,n)}function fv(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function lm(e){return typeof e=="boolean"}function Fp(e){return Object.prototype.toString.call(e)==="[object Date]"}function iTe(e){return e&&ir(e[Symbol.iterator])}function li(e){return typeof e=="number"}function sTe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Nt(e){return typeof e=="string"}function SP(e,t,n){e&&(e=t?Pt(e).map(a=>a.replace(/\\(.)/g,"$1")):Pt(e));const r=e&&e.length,i=n&&n.get||jke,s=a=>i(t?[a]:Gf(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),f=0;for(;++f<r;)u+="|"+a[f](l);return u}}return zl(o,e,"key")}function oTe(e,t){const n=e[0],r=qr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const UKe=1e4;function aTe(e){e=+e||UKe;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Yt(t,o)||Yt(n,o),get:o=>Yt(t,o)?t[o]:Yt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Yt(t,o)?t[o]=a:s(o,a)}}function lTe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function $w(e,t){let n="";for(;--t>=0;)n+=e;return n}function uTe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?$w(i,o)+s:r==="center"?$w(i,~~(o/2))+s+$w(i,Math.ceil(o/2)):s+$w(i,o)}function dE(e){return e&&qr(e)-e[0]||0}function Tt(e){return at(e)?"["+e.map(Tt)+"]":$t(e)||Nt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function AP(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const qKe=e=>li(e)||Fp(e)?e:Date.parse(e);function CP(e,t){return t=t||qKe,e==null||e===""?null:t(e)}function kP(e){return e==null||e===""?null:e+""}function Tc(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function cTe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function rp(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}var obe={},mF={},gF=34,ow=10,yF=13;function fTe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function HKe(e,t){var n=fTe(e);return function(r,i){return t(n(r),i,e)}}function abe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function vl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function GKe(e){return e<0?"-"+vl(-e,6):e>9999?"+"+vl(e,6):vl(e,4)}function VKe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":GKe(e.getUTCFullYear())+"-"+vl(e.getUTCMonth()+1,2)+"-"+vl(e.getUTCDate(),2)+(i?"T"+vl(t,2)+":"+vl(n,2)+":"+vl(r,2)+"."+vl(i,3)+"Z":r?"T"+vl(t,2)+":"+vl(n,2)+":"+vl(r,2)+"Z":n||t?"T"+vl(t,2)+":"+vl(n,2)+"Z":"")}function WKe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,d){var h,p,g=i(c,function(v,y){if(h)return h(v,y-1);p=v,h=d?HKe(v,d):fTe(v)});return g.columns=p||[],g}function i(c,d){var h=[],p=c.length,g=0,v=0,y,b=p<=0,w=!1;c.charCodeAt(p-1)===ow&&--p,c.charCodeAt(p-1)===yF&&--p;function E(){if(b)return mF;if(w)return w=!1,obe;var T,D=g,k;if(c.charCodeAt(D)===gF){for(;g++<p&&c.charCodeAt(g)!==gF||c.charCodeAt(++g)===gF;);return(T=g)>=p?b=!0:(k=c.charCodeAt(g++))===ow?w=!0:k===yF&&(w=!0,c.charCodeAt(g)===ow&&++g),c.slice(D+1,T-1).replace(/""/g,'"')}for(;g<p;){if((k=c.charCodeAt(T=g++))===ow)w=!0;else if(k===yF)w=!0,c.charCodeAt(g)===ow&&++g;else if(k!==n)continue;return c.slice(D,T)}return b=!0,c.slice(D,p)}for(;(y=E())!==mF;){for(var A=[];y!==obe&&y!==mF;)A.push(y),y=E();d&&(A=d(A,v++))==null||h.push(A)}return h}function s(c,d){return c.map(function(h){return d.map(function(p){return f(h[p])}).join(e)})}function o(c,d){return d==null&&(d=abe(c)),[d.map(f).join(e)].concat(s(c,d)).join(`
`)}function a(c,d){return d==null&&(d=abe(c)),s(c,d).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(f).join(e)}function f(c){return c==null?"":c instanceof Date?VKe(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:f}}function YKe(e){return e}function XKe(e){if(e==null)return YKe;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,f=a.length,c=new Array(f);for(c[0]=(t+=a[0])*r+s,c[1]=(n+=a[1])*i+o;u<f;)c[u]=a[u],++u;return c}}function ZKe(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function KKe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return lbe(e,n)})}:lbe(e,t)}function lbe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=dTe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function dTe(e,t){var n=XKe(e.transform),r=e.arcs;function i(f,c){c.length&&c.pop();for(var d=r[f<0?~f:f],h=0,p=d.length;h<p;++h)c.push(n(d[h],h));f<0&&ZKe(c,p)}function s(f){return n(f)}function o(f){for(var c=[],d=0,h=f.length;d<h;++d)i(f[d],c);return c.length<2&&c.push(c[0]),c}function a(f){for(var c=o(f);c.length<4;)c.push(c[0]);return c}function l(f){return f.map(a)}function u(f){var c=f.type,d;switch(c){case"GeometryCollection":return{type:c,geometries:f.geometries.map(u)};case"Point":d=s(f.coordinates);break;case"MultiPoint":d=f.coordinates.map(s);break;case"LineString":d=o(f.arcs);break;case"MultiLineString":d=f.arcs.map(o);break;case"Polygon":d=l(f.arcs);break;case"MultiPolygon":d=f.arcs.map(l);break;default:return null}return{type:c,coordinates:d}}return u(t)}function JKe(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,f){var c=e.arcs[u<0?~u:u],d;c.length<3&&!c[1][0]&&!c[1][1]&&(d=t[++o],t[o]=u,t[f]=d)}),t.forEach(function(u){var f=a(u),c=f[0],d=f[1],h,p;if(h=i[c])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=c,p=i[c]){delete i[p.end];var v=p===h?h:p.concat(h);r[v.start=p.start]=i[v.end=h.end]=v}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=c]=i[h.end=d]=h});function a(u){var f=e.arcs[u<0?~u:u],c=f[0],d;return e.transform?(d=[0,0],f.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=f[f.length-1],u<0?[d,c]:[c,d]}function l(u,f){for(var c in u){var d=u[c];delete f[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function QKe(e){return dTe(e,eJe.apply(this,arguments))}function eJe(e,t,n){var r,i,s;if(arguments.length>1)r=tJe(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:JKe(e,r)}}function tJe(e,t,n){var r=[],i=[],s;function o(c){var d=c<0?~c:c;(i[d]||(i[d]=[])).push({i:c,g:s})}function a(c){c.forEach(o)}function l(c){c.forEach(a)}function u(c){c.forEach(l)}function f(c){switch(s=c,c.type){case"GeometryCollection":c.geometries.forEach(f);break;case"LineString":a(c.arcs);break;case"MultiLineString":case"Polygon":l(c.arcs);break;case"MultiPolygon":u(c.arcs);break}}return f(t),i.forEach(n==null?function(c){r.push(c[0].i)}:function(c){n(c[0].g,c[c.length-1].g)&&r.push(c[0].i)}),r}const ea="year",Fl="quarter",Ta="month",mo="week",Ol="date",Sa="day",If="dayofyear",lu="hours",uu="minutes",Iu="seconds",Dc="milliseconds",TP=[ea,Fl,Ta,mo,Ol,Sa,If,lu,uu,Iu,Dc],vF=TP.reduce((e,t,n)=>(e[t]=1+n,e),{});function DP(e){const t=Pt(e).slice(),n={};return t.length||ot("Missing time unit."),t.forEach(i=>{Yt(vF,i)?n[i]=1:ot(`Invalid time unit: ${i}.`)}),(n[mo]||n[Sa]?1:0)+(n[Fl]||n[Ta]||n[Ol]?1:0)+(n[If]?1:0)>1&&ot(`Incompatible time units: ${e}`),t.sort((i,s)=>vF[i]-vF[s]),t}const nJe={[ea]:"%Y ",[Fl]:"Q%q ",[Ta]:"%b ",[Ol]:"%d ",[mo]:"W%U ",[Sa]:"%a ",[If]:"%j ",[lu]:"%H:00",[uu]:"00:%M",[Iu]:":%S",[Dc]:".%L",[`${ea}-${Ta}`]:"%Y-%m ",[`${ea}-${Ta}-${Ol}`]:"%Y-%m-%d ",[`${lu}-${uu}`]:"%H:%M"};function hTe(e,t){const n=rr({},nJe,t),r=DP(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const Cg=new Date;function LP(e){return Cg.setFullYear(e),Cg.setMonth(0),Cg.setDate(1),Cg.setHours(0,0,0,0),Cg}function pTe(e){return gTe(new Date(e))}function mTe(e){return o6(new Date(e))}function gTe(e){return Gd.count(LP(e.getFullYear())-1,e)}function o6(e){return U1.count(LP(e.getFullYear())-1,e)}function a6(e){return LP(e).getDay()}function rJe(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function yTe(e){return bTe(new Date(e))}function vTe(e){return l6(new Date(e))}function bTe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Rp.count(t-1,e)}function l6(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return q1.count(t-1,e)}function u6(e){return Cg.setTime(Date.UTC(e,0,1)),Cg.getUTCDay()}function iJe(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function xTe(e,t,n,r,i){const s=t||1,o=qr(e),a=(y,b,w)=>(w=w||y,sJe(n[w],r[w],y===o&&s,b)),l=new Date,u=Tc(e),f=u[ea]?a(ea):Fa(2012),c=u[Ta]?a(Ta):u[Fl]?a(Fl):fp,d=u[mo]&&u[Sa]?a(Sa,1,mo+Sa):u[mo]?a(mo,1):u[Sa]?a(Sa,1):u[Ol]?a(Ol,1):u[If]?a(If,1):K1,h=u[lu]?a(lu):fp,p=u[uu]?a(uu):fp,g=u[Iu]?a(Iu):fp,v=u[Dc]?a(Dc):fp;return function(y){l.setTime(+y);const b=f(l);return i(b,c(l),d(l,b),h(l),p(l),g(l),v(l))}}function sJe(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Qv(e,t,n){return t+e*7-(n+6)%7}const oJe={[ea]:e=>e.getFullYear(),[Fl]:e=>Math.floor(e.getMonth()/3),[Ta]:e=>e.getMonth(),[Ol]:e=>e.getDate(),[lu]:e=>e.getHours(),[uu]:e=>e.getMinutes(),[Iu]:e=>e.getSeconds(),[Dc]:e=>e.getMilliseconds(),[If]:e=>gTe(e),[mo]:e=>o6(e),[mo+Sa]:(e,t)=>Qv(o6(e),e.getDay(),a6(t)),[Sa]:(e,t)=>Qv(1,e.getDay(),a6(t))},aJe={[Fl]:e=>3*e,[mo]:(e,t)=>Qv(e,0,a6(t))};function wTe(e,t){return xTe(e,t||1,oJe,aJe,rJe)}const lJe={[ea]:e=>e.getUTCFullYear(),[Fl]:e=>Math.floor(e.getUTCMonth()/3),[Ta]:e=>e.getUTCMonth(),[Ol]:e=>e.getUTCDate(),[lu]:e=>e.getUTCHours(),[uu]:e=>e.getUTCMinutes(),[Iu]:e=>e.getUTCSeconds(),[Dc]:e=>e.getUTCMilliseconds(),[If]:e=>bTe(e),[mo]:e=>l6(e),[Sa]:(e,t)=>Qv(1,e.getUTCDay(),u6(t)),[mo+Sa]:(e,t)=>Qv(l6(e),e.getUTCDay(),u6(t))},uJe={[Fl]:e=>3*e,[mo]:(e,t)=>Qv(e,0,u6(t))};function _Te(e,t){return xTe(e,t||1,lJe,uJe,iJe)}const cJe={[ea]:Of,[Fl]:Q_.every(3),[Ta]:Q_,[mo]:U1,[Ol]:Gd,[Sa]:Gd,[If]:Gd,[lu]:yD,[uu]:mD,[Iu]:Nd,[Dc]:Wv},fJe={[ea]:Mf,[Fl]:e2.every(3),[Ta]:e2,[mo]:q1,[Ol]:Rp,[Sa]:Rp,[If]:Rp,[lu]:vD,[uu]:gD,[Iu]:Nd,[Dc]:Wv};function tb(e){return cJe[e]}function nb(e){return fJe[e]}function ETe(e,t,n){return e?e.offset(t,n):void 0}function STe(e,t,n){return ETe(tb(e),t,n)}function ATe(e,t,n){return ETe(nb(e),t,n)}function CTe(e,t,n,r){return e?e.range(t,n,r):void 0}function kTe(e,t,n,r){return CTe(tb(e),t,n,r)}function TTe(e,t,n,r){return CTe(nb(e),t,n,r)}const Iw=1e3,Pw=Iw*60,Nw=Pw*60,RD=Nw*24,dJe=RD*7,ube=RD*30,c6=RD*365,DTe=[ea,Ta,Ol,lu,uu,Iu,Dc],Bw=DTe.slice(0,-1),zw=Bw.slice(0,-1),jw=zw.slice(0,-1),hJe=jw.slice(0,-1),pJe=[ea,mo],cbe=[ea,Ta],LTe=[ea],aw=[[Bw,1,Iw],[Bw,5,5*Iw],[Bw,15,15*Iw],[Bw,30,30*Iw],[zw,1,Pw],[zw,5,5*Pw],[zw,15,15*Pw],[zw,30,30*Pw],[jw,1,Nw],[jw,3,3*Nw],[jw,6,6*Nw],[jw,12,12*Nw],[hJe,1,RD],[pJe,1,dJe],[cbe,1,ube],[cbe,3,3*ube],[LTe,1,c6]];function RTe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(dE(t))/n;let i=tD(a=>a[2]).right(aw,r),s,o;return i===aw.length?(s=LTe,o=Zg(t[0]/c6,t[1]/c6,n)):i?(i=aw[r/aw[i-1][2]<aw[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=DTe,o=Math.max(Zg(t[0],t[1],n),1)),{units:s,step:o}}function Uw(e){const t={};return n=>t[n]||(t[n]=e(n))}function mJe(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=gJe(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function gJe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function FTe(e){const t=Uw(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Tve(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return mJe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Tve(o??",f");const a=Zg(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=Cze(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=Aze(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=Sze(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let f6;OTe();function OTe(){return f6=FTe({format:kze,formatPrefix:Tze})}function MTe(e){return FTe(Eze(e))}function C3(e){return arguments.length?f6=MTe(e):f6}function fbe(e,t,n){n=n||{},$t(n)||ot(`Invalid time multi-format specifier: ${n}`);const r=t(Iu),i=t(uu),s=t(lu),o=t(Ol),a=t(mo),l=t(Ta),u=t(Fl),f=t(ea),c=e(n[Dc]||".%L"),d=e(n[Iu]||":%S"),h=e(n[uu]||"%I:%M"),p=e(n[lu]||"%I %p"),g=e(n[Ol]||n[Sa]||"%a %d"),v=e(n[mo]||"%b %d"),y=e(n[Ta]||"%B"),b=e(n[Fl]||"%B"),w=e(n[ea]||"%Y");return E=>(r(E)<E?c:i(E)<E?d:s(E)<E?h:o(E)<E?p:l(E)<E?a(E)<E?g:v:f(E)<E?u(E)<E?y:b:w)(E)}function $Te(e){const t=Uw(e.format),n=Uw(e.utcFormat);return{timeFormat:r=>Nt(r)?t(r):fbe(t,tb,r),utcFormat:r=>Nt(r)?n(r):fbe(n,nb,r),timeParse:Uw(e.parse),utcParse:Uw(e.utcParse)}}let d6;ITe();function ITe(){return d6=$Te({format:RI,parse:y3e,utcFormat:FI,utcParse:v3e})}function PTe(e){return $Te(d3e(e))}function r2(e){return arguments.length?d6=PTe(e):d6}const h6=(e,t)=>rr({},e,t);function NTe(e,t){const n=e?MTe(e):C3(),r=t?PTe(t):r2();return h6(n,r)}function RP(e,t){const n=arguments.length;return n&&n!==2&&ot("defaultLocale expects either zero or two arguments."),n?h6(C3(e),r2(t)):h6(C3(),r2())}function yJe(){return OTe(),ITe(),RP()}const vJe=/^(data:|([A-Za-z]+:)?\/\/)/,bJe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,xJe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,dbe="file://";function wJe(e,t){return n=>({options:n||{},sanitize:EJe,load:_Je,fileAccess:!!t,file:SJe(t),http:CJe(e)})}async function _Je(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function EJe(e,t){t=rr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=bJe.test(e.replace(xJe,""));(e==null||typeof e!="string"||!a)&&ot("Sanitize failure, invalid URI: "+Tt(e));const l=vJe.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(dbe))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(dbe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function SJe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):AJe}async function AJe(){ot("No file system access.")}function CJe(e){return e?async function(t,n){const r=rr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?ir(s[i])?s[i]():s.text():ot(s.status+""+s.statusText)}:kJe}async function kJe(){ot("No HTTP fetch method available.")}const TJe=e=>e!=null&&e===e,DJe=e=>e==="true"||e==="false"||e===!0||e===!1,LJe=e=>!Number.isNaN(Date.parse(e)),BTe=e=>!Number.isNaN(+e)&&!(e instanceof Date),RJe=e=>BTe(e)&&Number.isInteger(+e),p6={boolean:AP,integer:Aa,number:Aa,date:CP,string:kP,unknown:Ra},uA=[DJe,RJe,BTe,LJe],FJe=["boolean","integer","number","date"];function zTe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=uA.length,i=uA.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&TJe(l)&&!uA[a](l)&&(i[a]=0,++o,o===uA.length))return"string";return FJe[i.reduce((s,o)=>s===0?o:s,0)-1]}function jTe(e,t){return t.reduce((n,r)=>(n[r]=zTe(e,r),n),{})}function hbe(e){const t=function(n,r){const i={delimiter:e};return FP(n,r?rr(r,i):i)};return t.responseType="text",t}function FP(e,t){return t.header&&(e=t.header.map(Tt).join(t.delimiter)+`
`+e),WKe(t.delimiter).parse(e+"")}FP.responseType="text";function OJe(e){return typeof Buffer=="function"&&ir(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function OP(e,t){const n=t&&t.property?Mu(t.property):Ra;return $t(e)&&!OJe(e)?MJe(n(e),t):n(JSON.parse(e))}OP.responseType="json";function MJe(e,t){return!at(e)&&iTe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const $Je={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function UTe(e,t){let n,r,i,s;return e=OP(e,t),t&&t.feature?(n=KKe,i=t.feature):t&&t.mesh?(n=QKe,i=t.mesh,s=$Je[t.filter]):ot("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):ot("Invalid TopoJSON object: "+i),r&&r.features||[r]}UTe.responseType="json";const vC={dsv:FP,csv:hbe(","),tsv:hbe("	"),json:OP,topojson:UTe};function MP(e,t){return arguments.length>1?(vC[e]=t,this):Yt(vC,e)?vC[e]:null}function qTe(e){const t=MP(e);return t&&t.responseType||"text"}function HTe(e,t,n,r){t=t||{};const i=MP(t.type||"json");return i||ot("Unknown data format type: "+t.type),e=i(e,t),t.parse&&IJe(e,t.parse,n,r),Yt(e,"columns")&&delete e.columns,e}function IJe(e,t,n,r){if(!e.length)return;const i=r2();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,f,c;t==="auto"&&(t=jTe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let g,v;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),v=g[1],(v[0]==="'"&&v[v.length-1]==="'"||v[0]==='"'&&v[v.length-1]==='"')&&(v=v.slice(1,-1)),(g[0]==="utc"?r:n)(v);if(!p6[p])throw Error("Illegal format pattern: "+h+":"+p);return p6[p]});for(l=0,f=e.length,c=s.length;l<f;++l)for(o=e[l],u=0;u<c;++u)a=s[u],o[a]=d[u](o[a])}const FD=wJe(typeof fetch<"u"&&fetch,null);function OD(e){const t=e||Ra,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function bC(e,t){try{await t(e)}catch(n){e.error(n)}}const GTe=Symbol("vega_id");let PJe=1;function MD(e){return!!(e&&wn(e))}function wn(e){return e[GTe]}function VTe(e,t){return e[GTe]=t,e}function yi(e){const t=e===Object(e)?e:{data:e};return wn(t)?t:VTe(t,PJe++)}function $P(e){return $D(e,yi({}))}function $D(e,t){for(const n in e)t[n]=e[n];return t}function WTe(e,t){return VTe(t,wn(e))}function L0(e,t){return e?t?(n,r)=>e(n,r)||wn(t(n))-wn(t(r)):(n,r)=>e(n,r)||wn(n)-wn(r):null}function YTe(e){return e&&e.constructor===R0}function R0(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:R0,insert(a){const l=Pt(a),u=l.length;for(let f=0;f<u;++f)e.push(l[f]);return this},remove(a){const l=ir(a)?r:t,u=Pt(a),f=u.length;for(let c=0;c<f;++c)l.push(u[c]);return this},modify(a,l,u){const f={field:l,value:Fa(u)};return ir(a)?(f.filter=a,i.push(f)):(f.tuple=a,n.push(f)),this},encode(a,l){return ir(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},f={};let c,d,h,p,g,v;for(c=0,d=l.length;c<d;++c)u[wn(l[c])]=1;for(c=0,d=t.length;c<d;++c)g=t[c],u[wn(g)]=-1;for(c=0,d=r.length;c<d;++c)p=r[c],l.forEach(b=>{p(b)&&(u[wn(b)]=-1)});for(c=0,d=e.length;c<d;++c)g=e[c],v=wn(g),u[v]?u[v]=1:a.add.push(yi(e[c]));for(c=0,d=l.length;c<d;++c)g=l[c],u[wn(g)]<0&&a.rem.push(g);function y(b,w,E){E?b[w]=E(b):a.encode=w,o||(f[wn(b)]=b)}for(c=0,d=n.length;c<d;++c)h=n[c],g=h.tuple,p=h.field,v=u[wn(g)],v>0&&(y(g,p,h.value),a.modifies(p));for(c=0,d=i.length;c<d;++c)h=i[c],p=h.filter,l.forEach(b=>{p(b)&&u[wn(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(b=>u[wn(b)]>0):l.slice();else for(v in f)a.mod.push(f[v]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const xC="_:mod:_";function ID(){Object.defineProperty(this,xC,{writable:!0,value:{}})}ID.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[xC];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[xC];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[xC]={},this}};let NJe=0;const BJe="pulse",zJe=new ID,jJe=1,UJe=2;function Ui(e,t,n,r){this.id=++NJe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function pbe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ui.prototype={targets(){return this._targets||(this._targets=OD(fE))},set(e){return this.value!==e?(this.value=e,1):0},skip:pbe(jJe),modified:pbe(UJe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new ID,i=this._argops=this._argops||[],s=[];let o,a,l,u;const f=(c,d,h)=>{h instanceof Ui?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:c,index:d})):r.set(c,d,h)};for(o in e)if(a=e[o],o===BJe)Pt(a).forEach(c=>{c instanceof Ui?c!==this&&(c.targets().add(this),s.push(c)):ot("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)f(o,u,a[u]);else f(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||zJe,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function qJe(e,t,n,r){let i=1,s;return e instanceof Ui?s=e:e&&e.prototype instanceof Ui?s=new e:ir(e)?s=new Ui(null,e):(i=0,s=new Ui(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function HJe(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let GJe=0;function PD(e,t,n){this.id=++GJe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function ep(e,t,n){return new PD(e,t,n)}PD.prototype={_filter:$u,_apply:Ra,targets(){return this._targets||(this._targets=OD(fE))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=ep(e);return this.targets().add(t),t},apply(e){const t=ep(null,e);return this.targets().add(t),t},merge(){const e=ep();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=ep();return this.targets().add(ep(null,null,EP(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(ep(null,null,()=>n=!0)),t.targets().add(ep(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=$u,this._targets=null}};function VJe(e,t,n,r){const i=this,s=ep(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(f){i.error(f)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Pt(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function WJe(e,t){const n=this.locale();return HTe(e,t,n.timeParse,n.utcParse)}function YJe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function XJe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:qTe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function ZJe(e,t,n){const r=this,i=r._pending||KJe(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove($u).insert(s.data||[])),i.done(),s}function KJe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const JJe={skip:!0};function QJe(e,t,n,r,i){return(e instanceof Ui?tQe:eQe)(this,e,t,n,r,i),this}function eQe(e,t,n,r,i,s){const o=rr({},s,JJe);let a,l;ir(n)||(n=Fa(n)),r===void 0?a=u=>e.touch(n(u)):ir(r)?(l=new Ui(null,r,i,!1),a=u=>{l.evaluate(u);const f=n(u),c=l.value;YTe(c)?e.pulse(f,c,s):e.update(f,c,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function tQe(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Ui(null,nQe(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function nQe(e,t){return t=ir(t)?t:Fa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function rQe(e){e.rank=++this._rank}function iQe(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ot("Cycle detected in dataflow graph.")}const k3={},df=1,ip=2,kd=4,sQe=df|ip,mbe=df|kd,$y=df|ip|kd,gbe=8,lw=16,ybe=32,vbe=64;function Op(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function bF(e,t){const n=[];return rp(e,t,r=>n.push(r)),n}function bbe(e,t){const n={};return e.visit(t,r=>{n[wn(r)]=1}),r=>n[wn(r)]?null:r}function cA(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Op.prototype={StopPropagation:k3,ADD:df,REM:ip,MOD:kd,ADD_REM:sQe,ADD_MOD:mbe,ALL:$y,REFLOW:gbe,SOURCE:lw,NO_SOURCE:ybe,NO_FIELDS:vbe,fork(e){return new Op(this.dataflow).init(this,e)},clone(){const e=this.fork($y);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize($y|lw)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Op(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&vbe)&&(n.fields=e.fields),t&df?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&ip?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&kd?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&ybe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||$y;return t&df&&this.add.length||t&ip&&this.rem.length||t&kd&&this.mod.length},reflow(e){if(e)return this.fork($y).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(kd,bbe(this,df))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&df&&(n.addF=cA(n.addF,t)),e&ip&&(n.remF=cA(n.remF,t)),e&kd&&(n.modF=cA(n.modF,t)),e&lw&&(n.srcF=cA(n.srcF,t)),n},materialize(e){e=e||$y;const t=this;return e&df&&t.addF&&(t.add=bF(t.add,t.addF),t.addF=null),e&ip&&t.remF&&(t.rem=bF(t.rem,t.remF),t.remF=null),e&kd&&t.modF&&(t.mod=bF(t.mod,t.modF),t.modF=null),e&lw&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&lw)return rp(n.source,n.srcF,r),n;e&df&&rp(n.add,n.addF,r),e&ip&&rp(n.rem,n.remF,r),e&kd&&rp(n.mod,n.modF,r);const i=n.source;if(e&gbe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?rp(i,bbe(n,mbe),r):rp(i,n.srcF,r))}return n}};function IP(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Lt(IP,Op,{fork(e){const t=new Op(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){ot("MultiPulse does not support filtering.")},materialize(){ot("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function oQe(e,t,n){const r=this,i=[];if(r._pulse)return XTe(r);if(r._pending&&await r._pending,t&&await bC(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Op(r,s,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=OD(fE);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=k3),l!==k3&&a._targets&&a._targets.forEach(f=>r._enqueue(f)),++o}}catch(f){r._heap.clear(),u=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const f=r._postrun.sort((c,d)=>d.priority-c.priority);r._postrun=[];for(let c=0;c<f.length;++c)await bC(r,f[c].callback)}return n&&await bC(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(c=>{try{c(r)}catch(d){r.error(d)}})})),r}async function aQe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function lQe(e,t,n){return this._pulse?XTe(this):(this.evaluate(e,t,n),this)}function uQe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function XTe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function cQe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function fQe(e,t){const n=e.source,r=this._clock;return n&&at(n)?new IP(this,r,n.map(i=>i.pulse),t):this._input[e.id]||dQe(this._pulse,n&&n.pulse)}function dQe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==k3&&(e.source=t.source),e)}const PP={skip:!1,force:!1};function hQe(e,t){const n=t||PP;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function pQe(e,t,n){const r=n||PP;return(e.set(t)||r.force)&&this.touch(e,r),this}function mQe(e,t,n){this.touch(e,n||PP);const r=new Op(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function gQe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),ZTe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,yQe(t,0,e)):r=n,r}}}function ZTe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function yQe(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,ZTe(e,r,t,n)}function Sv(){this.logger(vP()),this.logLevel(gP),this._clock=0,this._rank=0,this._locale=RP();try{this._loader=FD()}catch{}this._touched=OD(fE),this._input={},this._pulse=null,this._heap=gQe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function uw(e){return function(){return this._log[e].apply(this,arguments)}}Sv.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:uw("error"),warn:uw("warn"),info:uw("info"),debug:uw("debug"),logLevel:uw("level"),cleanThreshold:1e4,add:qJe,connect:HJe,rank:rQe,rerank:iQe,pulse:mQe,touch:hQe,update:pQe,changeset:R0,ingest:YJe,parse:WJe,preload:ZJe,request:XJe,events:VJe,on:QJe,evaluate:oQe,run:lQe,runAsync:aQe,runAfter:uQe,_enqueue:cQe,_getPulse:fQe};function rt(e,t){Ui.call(this,e,null,t)}Lt(rt,Ui,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const e1={};function KTe(e){const t=JTe(e);return t&&t.Definition||null}function JTe(e){return e=e&&e.toLowerCase(),Yt(e1,e)?e1[e]:null}function*QTe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function NP(e,t,n){const r=Float64Array.from(QTe(e,n));return r.sort(z_),t.map(i=>QCe(r,i))}function BP(e,t){return NP(e,[.25,.5,.75],t)}function zP(e,t){const n=e.length,r=aUe(e,t),i=BP(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function eDe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,f,c,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(f=h/t,c=0,d=e.steps.length;c<d&&e.steps[c]<f;++c);a=e.steps[Math.max(0,c-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(c=0,d=i.length;c<d;++c)f=a/i[c],f>=u&&h/f<=t&&(a=f)}f=Math.log(a);const p=f>=0?0:~~(-f/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(s/a+g)*a,s=s<f?f-a:f,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Pu=Math.random;function vQe(e){Pu=e}function tDe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(QTe(e,r)),s=i.length,o=t;let a,l,u,f;for(u=0,f=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(Pu()*s)];f[u]=a/s}return f.sort(z_),[Y4(f,n/2),Y4(f,1-n/2)]}function nDe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,f=l+t,c;for(;a<i;++a){if(c=r(e[a]),c>=f){for(u=(l+u)/2;o<a;++o)s[o]=u;f=c+t,l=c}u=c}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?bQe(s,t+t/4):s}function bQe(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function xQe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function wQe(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Pu())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const rDe=Math.sqrt(2*Math.PI),_Qe=Math.SQRT2;let cw=NaN;function ND(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(cw===cw)n=cw,cw=NaN;else{do n=Pu()*2-1,r=Pu()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,cw=r*s}return e+n*t}function jP(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*rDe)}function BD(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function zD(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*_Qe*EQe(2*e-1)}function EQe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function UP(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>ND(n,r),pdf:s=>jP(s,n,r),cdf:s=>BD(s,n,r),icdf:s=>zD(s,n,r)};return i.mean(e).stdev(t)}function qP(e,t){const n=UP();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=zP(e)),i):t},sample(){return e[~~(Pu()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function HP(e,t){return e=e||0,t=t??1,Math.exp(e+ND()*t)}function GP(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*rDe*e)}function VP(e,t,n){return BD(Math.log(e),t,n)}function WP(e,t,n){return Math.exp(zD(e,t,n))}function iDe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>HP(n,r),pdf:s=>GP(s,n,r),cdf:s=>VP(s,n,r),icdf:s=>WP(s,n,r)};return i.mean(e).stdev(t)}function sDe(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Pu();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function YP(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Pu()}function XP(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function ZP(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function KP(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function oDe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>YP(n,r),pdf:s=>XP(s,n,r),cdf:s=>ZP(s,n,r),icdf:s=>KP(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function JP(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function hE(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function jD(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,f,c,d;for(d of e)s[a]=f=+t(d),o[a]=c=+n(d),++a,l+=(f-l)/a,u+=(c-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function pE(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function rb(e,t,n,r,i){let s=0,o=0;return pE(e,t,n,(a,l)=>{const u=l-i(a),f=l-r;s+=u*u,o+=f*f}),1-s/o}function QP(e,t,n){let r=0,i=0,s=0,o=0,a=0;pE(e,t,n,(f,c)=>{++a,r+=(f-r)/a,i+=(c-i)/a,s+=(f*c-s)/a,o+=(f*f-o)/a});const l=hE(r,i,s,o),u=f=>l[0]+l[1]*f;return{coef:l,predict:u,rSquared:rb(e,t,n,i,u)}}function aDe(e,t,n){let r=0,i=0,s=0,o=0,a=0;pE(e,t,n,(f,c)=>{++a,f=Math.log(f),r+=(f-r)/a,i+=(c-i)/a,s+=(f*c-s)/a,o+=(f*f-o)/a});const l=hE(r,i,s,o),u=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:u,rSquared:rb(e,t,n,i,u)}}function lDe(e,t,n){const[r,i,s,o]=jD(e,t,n);let a=0,l=0,u=0,f=0,c=0,d,h,p;pE(e,t,n,(b,w)=>{d=r[c++],h=Math.log(w),p=d*w,a+=(w*h-a)/c,l+=(p-l)/c,u+=(p*h-u)/c,f+=(d*p-f)/c});const[g,v]=hE(l/o,a/o,u/o,f/o),y=b=>Math.exp(g+v*(b-s));return{coef:[Math.exp(g-v*s),v],predict:y,rSquared:rb(e,t,n,o,y)}}function uDe(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;pE(e,t,n,(c,d)=>{const h=Math.log(c),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(d-a)/l});const u=hE(r,i,s,o),f=c=>u[0]*Math.pow(c,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:f,rSquared:rb(e,t,n,a,f)}}function e8(e,t,n){const[r,i,s,o]=jD(e,t,n),a=r.length;let l=0,u=0,f=0,c=0,d=0,h,p,g,v;for(h=0;h<a;)p=r[h],g=i[h++],v=p*p,l+=(v-l)/h,u+=(v*p-u)/h,f+=(v*v-f)/h,c+=(p*g-c)/h,d+=(v*g-d)/h;const y=f-l*l,b=l*y-u*u,w=(d*l-c*u)/b,E=(c*y-d*u)/b,A=-w*l,T=D=>(D=D-s,w*D*D+E*D+A+o);return{coef:[A-E*s+w*s*s+o,E-2*w*s,w],predict:T,rSquared:rb(e,t,n,o,T)}}function cDe(e,t,n,r){if(r===0)return JP(e,t,n);if(r===1)return QP(e,t,n);if(r===2)return e8(e,t,n);const[i,s,o,a]=jD(e,t,n),l=i.length,u=[],f=[],c=r+1;let d,h,p,g,v;for(d=0;d<c;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*s[p];for(u.push(g),v=new Float64Array(c),h=0;h<c;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);v[h]=g}f.push(v)}f.push(u);const y=AQe(f),b=w=>{w-=o;let E=a+y[0]+y[1]*w+y[2]*w*w;for(d=3;d<c;++d)E+=y[d]*Math.pow(w,d);return E};return{coef:SQe(c,y,-o,a),predict:b,rSquared:rb(e,t,n,a,b)}}function SQe(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function AQe(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const xbe=2,wbe=1e-12;function fDe(e,t,n,r){const[i,s,o,a]=jD(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),f=new Float64Array(l),c=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=xbe;){const p=[0,u-1];for(let v=0;v<l;++v){const y=i[v],b=p[0],w=p[1],E=y-i[b]>i[w]-y?b:w;let A=0,T=0,D=0,k=0,R=0;const O=1/Math.abs(i[E]-y||1);for(let L=b;L<=w;++L){const $=i[L],I=s[L],U=CQe(Math.abs(y-$)*O)*d[L],q=$*U;A+=U,T+=q,D+=I*U,k+=I*q,R+=$*q}const[B,K]=hE(T/A,D/A,k/A,R/A);f[v]=B+K*y,c[v]=Math.abs(s[v]-f[v]),kQe(i,v+1,p)}if(h===xbe)break;const g=e3e(c);if(Math.abs(g)<wbe)break;for(let v=0,y,b;v<l;++v)y=c[v]/(6*g),d[v]=y>=1?wbe:(b=1-y*y)*b}return TQe(i,f,o,a)}function CQe(e){return(e=1-e*e*e)*e*e}function kQe(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function TQe(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const DQe=.5*Math.PI/180;function UD(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],f=[];if(n===r){for(let g=1;g<r;++g)u.push(i(s+g/n*a));return u.push(i(o)),u}else{f.push(i(o));for(let g=n;--g>0;)f.push(i(s+g/n*a))}let c=u[0],d=f[f.length-1];const h=1/a,p=LQe(c[1],f);for(;d;){const g=i((c[0]+d[0])/2);g[0]-c[0]>=l&&RQe(c,g,d,h,p)>DQe?f.push(g):(c=d,u.push(d),f.pop()),d=f[f.length-1]}return u}function LQe(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function RQe(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function FQe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function m6(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:FQe(e)}function dDe(e,t,n){return n||e+(t?"_"+t:"")}const xF=()=>{},OQe={init:xF,add:xF,rem:xF,idx:0},i2={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},mE=Object.keys(i2).filter(e=>e!=="__count__");function MQe(e,t){return(n,r)=>rr({name:e,aggregate_param:r,out:n||e},OQe,t)}[...mE,"__count__"].forEach(e=>{i2[e]=MQe(e,i2[e])});function hDe(e,t,n){return i2[e](n,t)}function pDe(e,t){return e.idx-t.idx}function $Qe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=i2[i]())})};return e.forEach(n),Object.values(t).sort(pDe)}function IQe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function PQe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function NQe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function BQe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function mDe(e,t){const n=t||Ra,r=$Qe(e),i=e.slice().sort(pDe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=IQe,s.prototype.add=PQe,s.prototype.rem=NQe,s.prototype.set=BQe,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function t8(e){this._key=e?Mu(e):wn,this.reset()}const aa=t8.prototype;aa.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};aa.add=function(e){this._add.push(e)};aa.rem=function(e){this._rem.push(e)};aa.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};aa.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Yt(n,s)||(n[s]=1,++i);return i};aa.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=nTe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};aa.argmin=function(e){return this.extent(e)[0]||{}};aa.argmax=function(e){return this.extent(e)[1]||{}};aa.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};aa.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};aa.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=BP(this.values(),e),this._get=e),this._q};aa.q1=function(e){return this.quartile(e)[0]};aa.q2=function(e){return this.quartile(e)[1]};aa.q3=function(e){return this.quartile(e)[2]};aa.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=tDe(this.values(),1e3,.05,e),this._get=e),this._ci};aa.ci0=function(e){return this.ci(e)[0]};aa.ci1=function(e){return this.ci(e)[1]};function qp(e){rt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}qp.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:mE},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Lt(qp,rt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,f,c;for(l in a)for(f=a[l].tuple,u=0;u<i;++u)r[u][c=f[n[u]]]=c}s(e._prev),s(t);function o(a,l,u){const f=n[u],c=r[u++];for(const d in c){const h=a?a+"|"+d:d;l[f]=c[d],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Pt(ka(b)),E=w.length;let A=0,T;for(;A<E;++A)r[T=w[A]]||(r[T]=1,t.push(T))}this._dims=Pt(e.groupby),this._dnames=this._dims.map(b=>{const w=Rs(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:m6(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,f={};let c,d,h,p,g,v,y;for(u!==o.length&&ot("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(c=s[y],d=o[y],h=a[y]||null,c==null&&d!=="count"&&ot("Null aggregate field specified."),g=Rs(c),v=dDe(d,g,l[y]),n.push(v),d==="count"){this._counts.push(v);continue}p=f[g],p||(i(c),p=f[g]=[],p.field=c,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(hDe(d,h,v))}return this._measures=this._measures.map(b=>mDe(b,b.field)),Object.create(null)},cellkey:m6(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new t8),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?WTe(t.tuple,s):yi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,f,c;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(f=0,c=this._alen;f<c;++f)s.push(this.celltuple(t[f])),t[f]=null;for(f=0,c=this._mlen;f<c;++f)l=n[f],(l.num===0&&i?o:a).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const zQe=1e-14;function n8(e){rt.call(this,null,e)}n8.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Lt(n8,rt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(ka(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?f=>{const c=r(f);f[a]=c,f[l]=c==null?null:i+s*(1+(c-i)/s)}:f=>f[a]=r(f)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=eDe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let f=Aa(t(u));return f==null?null:f<i?-1/0:f>s?1/0:(f=Math.max(i,Math.min(f,s-r)),i+r*Math.floor(zQe+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=zl(l,ka(t),e.name||"bin_"+Rs(t))}});function gDe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(f=>!o[r(f)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?lTe(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function r8(e){rt.call(this,[],e)}r8.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Lt(r8,rt,{transform(e,t){const n=t.fork(t.ALL),r=gDe(wn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(L0(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function yDe(e){Ui.call(this,null,jQe,e)}Lt(yDe,Ui);function jQe(e){return this.value&&!e.modified()?this.value:_P(e.fields,e.orders)}function i8(e){rt.call(this,null,e)}i8.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function UQe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Lt(i8,rt,{transform(e,t){const n=c=>d=>{for(var h=UQe(a(d),e.case,s)||[],p,g=0,v=h.length;g<v;++g)o.test(p=h[g])||c(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(c=>i[c]=1+(i[c]||0)),f=n(c=>i[c]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=yi({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function s8(e){rt.call(this,null,e)}s8.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Lt(s8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=qQe(a,i,s,e.filter||$u)):n.mod=a,n.source=this.value,n.modifies(r)}});function qQe(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push(yi(s)),s={},s[t]=u);return i}const _be={kde:qP,mixture:sDe,normal:UP,lognormal:iDe,uniform:oDe},HQe="distributions",Ebe="function",GQe="field";function vDe(e,t){const n=e[Ebe];Yt(_be,n)||ot("Unknown distribution function: "+n);const r=_be[n]();for(const i in e)i===GQe?r.data((e.from||t()).map(e[i])):i===HQe?r[i](e[i].map(s=>vDe(s,t))):typeof r[i]===Ebe&&r[i](e[i]);return r}function o8(e){rt.call(this,null,e)}const bDe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],VQe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:bDe},{name:"weights",type:"number",array:!0}]};o8.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:bDe.concat(VQe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(o8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=vDe(e.distribution,WQe(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ot("Invalid density method: "+o),!e.extent&&!r.data&&ot("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||$f(r.data()),u=UD(o,l,i,s).map(f=>{const c={};return c[a[0]]=f[0],c[a[1]]=f[1],yi(c)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function WQe(e){return()=>e.materialize(e.SOURCE).source}function xDe(e,t){return e?e.map((n,r)=>t[r]||Rs(n)):null}function a8(e,t,n){const r=[],i=c=>c(l);let s,o,a,l,u,f;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),f=s[u],f||(s[u]=f=[],f.dims=u,r.push(f)),f.push(n(l));return r}const wDe="bin";function l8(e){rt.call(this,null,e)}l8.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:wDe}]};const YQe=(e,t)=>dE($f(e,t))/30;Lt(l8,rt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=a8(t.source,e.groupby,Ra),i=e.smooth||!1,s=e.field,o=e.step||YQe(n,s),a=L0((p,g)=>s(p)-s(g)),l=e.as||wDe,u=r.length;let f=1/0,c=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of nDe(p,o,i,s))g<f&&(f=g),g>c&&(c=g),p[++h][l]=g}return this.value={start:f,stop:c,step:o},t.reflow(!0).modifies(l)}});function _De(e){Ui.call(this,null,XQe,e),this.modified(!0)}Lt(_De,Ui);function XQe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:zl(n=>t(n,e),ka(t),Rs(t))}function u8(e){rt.call(this,[void 0,void 0],e)}u8.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Lt(u8,rt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Aa(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Rs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function c8(e,t){Ui.call(this,e),this.parent=t,this.count=0}Lt(c8,Ui,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function qD(e){rt.call(this,{},e),this._keys=eb();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Lt(qD,rt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Yt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new c8(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=wn(l),f=s.get(u);f!==void 0&&(s.delete(u),a(f).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(wn(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=wn(l),f=s.get(u),c=r(l);f===c?a(c).mod(l):(s.set(u,c),a(f).rem(l),a(c).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get(wn(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=wn(l),f=s.get(u),c=r(l);f!==c&&(s.set(u,c),a(f).rem(l),a(c).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function EDe(e){Ui.call(this,null,ZQe,e)}Lt(EDe,Ui);function ZQe(e){return this.value&&!e.modified()?this.value:at(e.name)?Pt(e.name).map(t=>Mu(t)):Mu(e.name,e.as)}function f8(e){rt.call(this,eb(),e)}f8.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Lt(f8,rt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,c=>{const d=wn(c);r.has(d)?r.delete(d):o.push(c)}),t.visit(t.ADD,c=>{l(c,e)?s.push(c):r.set(wn(c),1)});function f(c){const d=wn(c),h=l(c,e),p=r.get(d);h&&p?(r.delete(d),s.push(c)):!h&&!p?(r.set(d,1),o.push(c)):u&&h&&!p&&a.push(c)}return t.visit(t.MOD,f),e.modified()&&(u=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function d8(e){rt.call(this,[],e)}d8.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Lt(d8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=xDe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let f=0,c,d,h;for(;f<u;++f){for(d=$P(a),c=0;c<o;++c)d[i[c]]=(h=l[c][f])==null?null:h;s&&(d[s]=f),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function h8(e){rt.call(this,[],e)}h8.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Lt(h8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Rs),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let f=0,c;f<l;++f)c=$P(u),c[o]=i[f],c[a]=r[f](u),n.add.push(c)}),this.value=n.source=n.add,n.modifies(s)}});function p8(e){rt.call(this,null,e)}p8.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Lt(p8,rt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function SDe(e){rt.call(this,[],e)}Lt(SDe,rt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=yi(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const fA={value:"value",median:e3e,mean:cUe,min:W4,max:Pg},KQe=[];function m8(e){rt.call(this,[],e)}m8.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function JQe(e){var t=e.method||fA.value,n;if(fA[t]==null)ot("Unrecognized imputation method: "+t);else return t===fA.value?(n=e.value!==void 0?e.value:0,()=>n):fA[t]}function QQe(e){const t=e.field;return n=>n?t(n):NaN}Lt(m8,rt,{transform(e,t){var n=t.fork(t.ALL),r=JQe(e),i=QQe(e),s=Rs(e.field),o=Rs(e.key),a=(e.groupby||[]).map(Rs),l=eet(t.source,e.groupby,e.key,e.keyvals),u=[],f=this.value,c=l.domain.length,d,h,p,g,v,y,b,w,E,A;for(v=0,w=l.length;v<w;++v)for(d=l[v],p=d.values,h=NaN,b=0;b<c;++b)if(d[b]==null){for(g=l.domain[b],A={_impute:!0},y=0,E=p.length;y<E;++y)A[a[y]]=p[y];A[o]=g,A[s]=Number.isNaN(h)?h=r(d,i):h,u.push(yi(A))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=u,n}});function eet(e,t,n,r){var i=y=>y(v),s=[],o=r?r.slice():[],a={},l={},u,f,c,d,h,p,g,v;for(o.forEach((y,b)=>a[y]=b+1),d=0,g=e.length;d<g;++d)v=e[d],p=n(v),h=a[p]||(a[p]=o.push(p)),f=(u=t?t.map(i):KQe)+"",(c=l[f])||(c=l[f]=[],s.push(c),c.values=u),c[h-1]=v;return s.domain=o,s}function g8(e){qp.call(this,e)}g8.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:mE},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Lt(g8,qp,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{rr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function y8(e){rt.call(this,null,e)}y8.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(y8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=a8(r,e.groupby,e.field),s=(e.groupby||[]).map(Rs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let f=e.extent,c=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ot("Invalid density method: "+a),e.resolve==="shared"&&(f||(f=$f(r,e.field)),c=d=e.steps||d),i.forEach(h=>{const p=qP(h,o)[a],g=e.counts?h.length:1,v=f||$f(h);UD(p,v,c,d).forEach(y=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=y[0],b[l[1]]=y[1]*g,u.push(yi(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function ADe(e){Ui.call(this,null,tet,e)}Lt(ADe,Ui);function tet(e){return this.value&&!e.modified()?this.value:SP(e.fields,e.flat)}function CDe(e){rt.call(this,[],e),this._pending=null}Lt(CDe,rt,{transform(e,t){const n=t.dataflow;return this._pending?wF(this,t,this._pending):net(e)?t.StopPropagation:e.values?wF(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>wF(this,t,Pt(r.data)))}});function net(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function wF(e,t,n){n.forEach(yi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function v8(e){rt.call(this,{},e)}v8.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Lt(v8,rt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,f=e.as,c,d,h;return i?(d=i.length,a>1&&!f&&ot('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*d&&ot('The "as" parameter has too few output field names.'),f=f||i.map(Rs),c=function(p){for(var g=0,v=0,y,b;g<a;++g)if(b=r.get(n[g](p)),b==null)for(y=0;y<d;++y,++v)p[f[v]]=s;else for(y=0;y<d;++y,++v)p[f[v]]=i[y](b)}):(f||ot("Missing output field names."),c=function(p){for(var g=0,v;g<a;++g)v=r.get(n[g](p)),p[f[g]]=v??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,c),u.modifies(f)}});function kDe(e){Ui.call(this,null,ret,e)}Lt(kDe,Ui);function ret(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function TDe(e){Ui.call(this,null,iet,e)}Lt(TDe,Ui);function iet(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function DDe(e){rt.call(this,null,e)}Lt(DDe,rt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function b8(e){qp.call(this,e)}b8.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:mE,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Lt(b8,qp,{_transform:qp.prototype.transform,transform(e,t){return this._transform(set(e,t),t)}});function set(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ka(n).concat(ka(r)),o=aet(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>oet(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function oet(e,t,n,r){return zl(i=>t(i)===e?n(i):NaN,r,e+"")}function aet(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(LD),t?i.slice(0,t):i}function LDe(e){qD.call(this,e)}Lt(LDe,qD,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(wn(s),n,t,s);return(e.modified("field")||r&&t.modified(ka(r)))&&ot("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(yi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function x8(e){rt.call(this,null,e)}x8.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Lt(x8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=xDe(e.fields,e.as||[]),s=r?(a,l)=>uet(a,l,r,i):$D;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=wn(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,yi({}));o[wn(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[wn(a)]))}),n}});function uet(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function RDe(e){rt.call(this,null,e)}Lt(RDe,rt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function w8(e){rt.call(this,null,e)}w8.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const cet=1e-14;Lt(w8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=a8(i,e.groupby,e.field),o=(e.groupby||[]).map(Rs),a=[],l=e.step||.01,u=e.probs||Kl(l/2,1-cet,l),f=u.length;return s.forEach(c=>{const d=NP(c,u);for(let h=0;h<f;++h){const p={};for(let g=0;g<o.length;++g)p[o[g]]=c.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(yi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function FDe(e){rt.call(this,null,e)}Lt(FDe,rt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=wn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=$P(i);r[wn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[wn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function _8(e){rt.call(this,[],e),this.count=0}_8.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Lt(_8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((f,c)=>(f[wn(c)]=1,f),{});let o=this.value,a=this.count,l=0;function u(f){let c,d;o.length<i?o.push(f):(d=~~((a+1)*Pu()),d<o.length&&d>=l&&(c=o[d],s[wn(c)]&&n.rem.push(c),o[d]=f)),++a}if(t.rem.length&&(t.visit(t.REM,f=>{const c=wn(f);s[c]&&(s[c]=-1,n.rem.push(f)),--a}),o=o.filter(f=>s[wn(f)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,f=>{s[wn(f)]||u(f)}),l=-1),r&&o.length>i){const f=o.length-i;for(let c=0;c<f;++c)s[wn(o[c])]=-1,n.rem.push(o[c]);o=o.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{s[wn(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(f=>!s[wn(f)])),this.count=a,this.value=n.source=o,n}});function E8(e){rt.call(this,null,e)}E8.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Lt(E8,rt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,yi(s)}),n.add=t.add.concat(this.value),n}});function ODe(e){rt.call(this,null,e),this.modified(!0)}Lt(ODe,rt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function S8(e){rt.call(this,null,e)}const MDe=["unit0","unit1"];S8.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:TP,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:MDe}]};Lt(S8,rt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?nb:tb)(s.unit).offset,a=e.as||MDe,l=a[0],u=a[1],f=s.step;let c=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ka(n)))&&(t=t.reflow(!0),h=t.SOURCE,c=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let v,y;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=v=y=s(g),r&&(p[u]=y=o(v,f)),v<c&&(c=v),y>d&&(d=y))}),s.start=c,s.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:RTe({extent:e.extent||$f(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=DP(r),o=this.value||{},a=(n?_Te:wTe)(s,i);return a.unit=qr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function $De(e){rt.call(this,eb(),e)}Lt($De,rt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function IDe(e){rt.call(this,null,e)}Lt(IDe,rt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(L0(e.sort)):t.source).map(e.field))}});function fet(e,t,n,r){const i=s2[e](t,n);return{init:i.init||fp,update:function(s,o){o[r]=i.next(s)}}}const s2={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=s2.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ot("ntile num must be greater than zero.");const n=s2.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ot("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=det(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function det(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const het=Object.keys(s2);function PDe(e){const t=Pt(e.ops),n=Pt(e.fields),r=Pt(e.params),i=Pt(e.aggregate_params),s=Pt(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},f=[],c=[];let d=!0;function h(p){Pt(ka(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const v=n[g],y=r[g],b=i[g]||null,w=Rs(v),E=dDe(p,w,s[g]);if(h(v),o.push(E),Yt(s2,p))a.push(fet(p,v,y,E));else{if(v==null&&p!=="count"&&ot("Null aggregate field specified."),p==="count"){f.push(E);return}d=!1;let A=u[w];A||(A=u[w]=[],A.field=v,c.push(A)),A.push(hDe(p,b,E))}}),(f.length||c.length)&&(this.cell=pet(c,f,d)),this.inputs=Object.keys(l)}const NDe=PDe.prototype;NDe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};NDe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function pet(e,t,n){e=e.map(l=>mDe(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new t8;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,f;for(a&&a.values(),u=0,f=t.length;u<f;++u)l[t[u]]=r.num;if(!n)for(u=0,f=s.length;u<f;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function A8(e){rt.call(this,{},e),this._mlen=0,this._mods=[]}A8.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:het.concat(mE)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Lt(A8,rt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=L0(e.sort),i=m6(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new PDe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)met(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=gDe(wn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function met(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?tD(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Fa(-1)};t.init();for(let c=0;c<l;++c)get(f,o,c,l),s&&yet(f,u),t.update(f,a[c])}function get(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function yet(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const vet=Object.freeze(Object.defineProperty({__proto__:null,aggregate:qp,bin:n8,collect:r8,compare:yDe,countpattern:i8,cross:s8,density:o8,dotbin:l8,expression:_De,extent:u8,facet:qD,field:EDe,filter:f8,flatten:d8,fold:h8,formula:p8,generate:SDe,impute:m8,joinaggregate:g8,kde:y8,key:ADe,load:CDe,lookup:v8,multiextent:kDe,multivalues:TDe,params:DDe,pivot:b8,prefacet:LDe,project:x8,proxy:RDe,quantile:w8,relay:FDe,sample:_8,sequence:E8,sieve:ODe,subflow:c8,timeunit:S8,tupleindex:$De,values:IDe,window:A8},Symbol.toStringTag,{value:"Module"}));function _i(e){return function(){return e}}const Sbe=Math.abs,ma=Math.atan2,ng=Math.cos,bet=Math.max,_F=Math.min,of=Math.sin,Og=Math.sqrt,ba=1e-12,t1=Math.PI,T3=t1/2,BDe=2*t1;function xet(e){return e>1?0:e<-1?t1:Math.acos(e)}function Abe(e){return e>=1?T3:e<=-1?-T3:Math.asin(e)}const g6=Math.PI,y6=2*g6,wg=1e-6,wet=y6-wg;function zDe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _et(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zDe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let C8=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zDe:_et(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,f=o-t,c=a-n,d=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>wg)if(!(Math.abs(c*l-u*f)>wg)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+u*u,v=h*h+p*p,y=Math.sqrt(g),b=Math.sqrt(d),w=s*Math.tan((g6-Math.acos((g+d-v)/(2*y*b)))/2),E=w/b,A=w/y;Math.abs(E-1)>wg&&this._append`L${t+E*f},${n+E*c}`,this._append`A${s},${s},0,0,${+(c*h>f*p)},${this._x1=t+A*l},${this._y1=n+A*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,f=n+l,c=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>wg||Math.abs(this._y1-f)>wg)&&this._append`L${u},${f}`,r&&(d<0&&(d=d%y6+y6),d>wet?this._append`A${r},${r},0,1,${c},${t-a},${n-l}A${r},${r},0,1,${c},${this._x1=u},${this._y1=f}`:d>wg&&this._append`A${r},${r},0,${+(d>=g6)},${c},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function HD(){return new C8}HD.prototype=C8.prototype;function GD(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new C8(t)}function Eet(e){return e.innerRadius}function Aet(e){return e.outerRadius}function Cet(e){return e.startAngle}function ket(e){return e.endAngle}function Tet(e){return e&&e.padAngle}function Det(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,f=o-i,c=a-s,d=c*l-f*u;if(!(d*d<ba))return d=(f*(t-s)-c*(e-i))/d,[e+d*l,t+d*u]}function dA(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/Og(a*a+l*l),f=u*l,c=-u*a,d=e+f,h=t+c,p=n+f,g=r+c,v=(d+p)/2,y=(h+g)/2,b=p-d,w=g-h,E=b*b+w*w,A=i-s,T=d*g-p*h,D=(w<0?-1:1)*Og(bet(0,A*A*E-T*T)),k=(T*w-b*D)/E,R=(-T*b-w*D)/E,O=(T*w+b*D)/E,B=(-T*b+w*D)/E,K=k-v,L=R-y,$=O-v,I=B-y;return K*K+L*L>$*$+I*I&&(k=O,R=B),{cx:k,cy:R,x01:-f,y01:-c,x11:k*(i/A-1),y11:R*(i/A-1)}}function Let(){var e=Eet,t=Aet,n=_i(0),r=null,i=Cet,s=ket,o=Tet,a=null,l=GD(u);function u(){var f,c,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-T3,g=s.apply(this,arguments)-T3,v=Sbe(g-p),y=g>p;if(a||(a=f=l()),h<d&&(c=h,h=d,d=c),!(h>ba))a.moveTo(0,0);else if(v>BDe-ba)a.moveTo(h*ng(p),h*of(p)),a.arc(0,0,h,p,g,!y),d>ba&&(a.moveTo(d*ng(g),d*of(g)),a.arc(0,0,d,g,p,y));else{var b=p,w=g,E=p,A=g,T=v,D=v,k=o.apply(this,arguments)/2,R=k>ba&&(r?+r.apply(this,arguments):Og(d*d+h*h)),O=_F(Sbe(h-d)/2,+n.apply(this,arguments)),B=O,K=O,L,$;if(R>ba){var I=Abe(R/d*of(k)),U=Abe(R/h*of(k));(T-=I*2)>ba?(I*=y?1:-1,E+=I,A-=I):(T=0,E=A=(p+g)/2),(D-=U*2)>ba?(U*=y?1:-1,b+=U,w-=U):(D=0,b=w=(p+g)/2)}var q=h*ng(b),Y=h*of(b),X=d*ng(A),te=d*of(A);if(O>ba){var le=h*ng(w),ee=h*of(w),z=d*ng(E),he=d*of(E),de;if(v<t1)if(de=Det(q,Y,z,he,le,ee,X,te)){var ze=q-de[0],He=Y-de[1],je=le-de[0],we=ee-de[1],Ie=1/of(xet((ze*je+He*we)/(Og(ze*ze+He*He)*Og(je*je+we*we)))/2),qe=Og(de[0]*de[0]+de[1]*de[1]);B=_F(O,(d-qe)/(Ie-1)),K=_F(O,(h-qe)/(Ie+1))}else B=K=0}D>ba?K>ba?(L=dA(z,he,q,Y,h,K,y),$=dA(le,ee,X,te,h,K,y),a.moveTo(L.cx+L.x01,L.cy+L.y01),K<O?a.arc(L.cx,L.cy,K,ma(L.y01,L.x01),ma($.y01,$.x01),!y):(a.arc(L.cx,L.cy,K,ma(L.y01,L.x01),ma(L.y11,L.x11),!y),a.arc(0,0,h,ma(L.cy+L.y11,L.cx+L.x11),ma($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,K,ma($.y11,$.x11),ma($.y01,$.x01),!y))):(a.moveTo(q,Y),a.arc(0,0,h,b,w,!y)):a.moveTo(q,Y),!(d>ba)||!(T>ba)?a.lineTo(X,te):B>ba?(L=dA(X,te,le,ee,d,-B,y),$=dA(q,Y,z,he,d,-B,y),a.lineTo(L.cx+L.x01,L.cy+L.y01),B<O?a.arc(L.cx,L.cy,B,ma(L.y01,L.x01),ma($.y01,$.x01),!y):(a.arc(L.cx,L.cy,B,ma(L.y01,L.x01),ma(L.y11,L.x11),!y),a.arc(0,0,d,ma(L.cy+L.y11,L.cx+L.x11),ma($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,B,ma($.y11,$.x11),ma($.y01,$.x01),!y))):a.arc(0,0,d,A,E,y)}if(a.closePath(),f)return a=null,f+""||null}return u.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-t1/2;return[ng(c)*f,of(c)*f]},u.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:_i(+f),u):e},u.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:_i(+f),u):t},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:_i(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_i(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:_i(+f),u):i},u.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:_i(+f),u):s},u.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:_i(+f),u):o},u.context=function(f){return arguments.length?(a=f??null,u):a},u}function jDe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UDe(e){this._context=e}UDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function k8(e){return new UDe(e)}function qDe(e){return e[0]}function HDe(e){return e[1]}function GDe(e,t){var n=_i(!0),r=null,i=k8,s=null,o=GD(a);e=typeof e=="function"?e:e===void 0?qDe:_i(e),t=typeof t=="function"?t:t===void 0?HDe:_i(t);function a(l){var u,f=(l=jDe(l)).length,c,d=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=f;++u)!(u<f&&n(c=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(c,u,l),+t(c,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:_i(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:_i(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:_i(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function VDe(e,t,n){var r=null,i=_i(!0),s=null,o=k8,a=null,l=GD(u);e=typeof e=="function"?e:e===void 0?qDe:_i(+e),t=typeof t=="function"?t:_i(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?HDe:_i(+n);function u(c){var d,h,p,g=(c=jDe(c)).length,v,y=!1,b,w=new Array(g),E=new Array(g);for(s==null&&(a=o(b=l())),d=0;d<=g;++d){if(!(d<g&&i(v=c[d],d,c))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}y&&(w[d]=+e(v,d,c),E[d]=+t(v,d,c),a.point(r?+r(v,d,c):w[d],n?+n(v,d,c):E[d]))}if(b)return a=null,b+""||null}function f(){return GDe().defined(i).curve(o).context(s)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:_i(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:_i(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_i(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:_i(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:_i(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:_i(+c),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:_i(!!c),u):i},u.curve=function(c){return arguments.length?(o=c,s!=null&&(a=o(s)),u):o},u.context=function(c){return arguments.length?(c==null?s=a=null:a=o(s=c),u):s},u}const Ret={draw(e,t){const n=Og(t/t1);e.moveTo(n,0),e.arc(0,0,n,0,BDe)}};function Fet(e,t){let n=null,r=GD(i);e=typeof e=="function"?e:_i(e||Ret),t=typeof t=="function"?t:_i(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:_i(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:_i(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Hp(){}function D3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function VD(e){this._context=e}VD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:D3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:D3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Oet(e){return new VD(e)}function WDe(e){this._context=e}WDe.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:D3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Met(e){return new WDe(e)}function YDe(e){this._context=e}YDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:D3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $et(e){return new YDe(e)}function XDe(e,t){this._basis=new VD(e),this._beta=t}XDe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Iet=function e(t){function n(r){return t===1?new VD(r):new XDe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function L3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function T8(e,t){this._context=e,this._k=(1-t)/6}T8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:L3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:L3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pet=function e(t){function n(r){return new T8(r,t)}return n.tension=function(r){return e(+r)},n}(0);function D8(e,t){this._context=e,this._k=(1-t)/6}D8.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:L3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Net=function e(t){function n(r){return new D8(r,t)}return n.tension=function(r){return e(+r)},n}(0);function L8(e,t){this._context=e,this._k=(1-t)/6}L8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:L3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bet=function e(t){function n(r){return new L8(r,t)}return n.tension=function(r){return e(+r)},n}(0);function R8(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ba){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ba){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/f,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function ZDe(e,t){this._context=e,this._alpha=t}ZDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:R8(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zet=function e(t){function n(r){return t?new ZDe(r,t):new T8(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function KDe(e,t){this._context=e,this._alpha=t}KDe.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:R8(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jet=function e(t){function n(r){return t?new KDe(r,t):new D8(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function JDe(e,t){this._context=e,this._alpha=t}JDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:R8(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Uet=function e(t){function n(r){return t?new JDe(r,t):new L8(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function QDe(e){this._context=e}QDe.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function qet(e){return new QDe(e)}function Cbe(e){return e<0?-1:1}function kbe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Cbe(s)+Cbe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Tbe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function EF(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function R3(e){this._context=e}R3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:EF(this,this._t0,Tbe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,EF(this,Tbe(this,n=kbe(this,e,t)),n);break;default:EF(this,this._t0,n=kbe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function eLe(e){this._context=new tLe(e)}(eLe.prototype=Object.create(R3.prototype)).point=function(e,t){R3.prototype.point.call(this,t,e)};function tLe(e){this._context=e}tLe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Het(e){return new R3(e)}function Get(e){return new eLe(e)}function nLe(e){this._context=e}nLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Dbe(e),i=Dbe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Dbe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Vet(e){return new nLe(e)}function WD(e,t){this._context=e,this._t=t}WD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Wet(e){return new WD(e,.5)}function Yet(e){return new WD(e,0)}function Xet(e){return new WD(e,1)}function Mp(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Zet=()=>typeof Image<"u"?Image:null;function Vf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Ket=Vf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Jet=Vf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Qet=Vf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ett=Vf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),ttt=Vf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ntt=Vf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),rtt=Vf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),itt=Vf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),stt=Vf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ott=Vf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function F8(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const att="identity",n1="linear",rh="log",gE="pow",yE="sqrt",YD="symlog",e0="time",t0="utc",Af="sequential",ib="diverging",r1="quantile",XD="quantize",ZD="threshold",O8="ordinal",v6="point",rLe="band",M8="bin-ordinal",bo="continuous",vE="discrete",bE="discretizing",Uu="interpolating",$8="temporal";function ltt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function utt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function I8(){const e=ACe().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function f(){const c=t().length,d=r[1]<r[0],h=r[1-d],p=F8(c,a,l);let g=r[d-0];i=(h-g)/(p||1),o&&(i=Math.floor(i)),g+=(h-g-i*(c-a))*u,s=i*(1-a),o&&(g=Math.round(g),s=Math.round(s));const v=Kl(c).map(y=>g+i*y);return n(d?v.reverse():v)}return e.domain=function(c){return arguments.length?(t(c),f()):t()},e.range=function(c){return arguments.length?(r=[+c[0],+c[1]],f()):r.slice()},e.rangeRound=function(c){return r=[+c[0],+c[1]],o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(c){return arguments.length?(o=!!c,f()):o},e.padding=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),a=l,f()):a},e.paddingInner=function(c){return arguments.length?(a=Math.max(0,Math.min(1,c)),f()):a},e.paddingOuter=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),f()):l},e.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),f()):u},e.invertRange=function(c){if(c[0]==null||c[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+c[0],v=+c[1],y,b,w;if(!(g!==g||v!==v)&&(v<g&&(w=g,g=v,v=w),!(v<h[0]||g>r[1-d])))return y=Math.max(0,j_(h,g)-1),b=g===v?y:j_(h,v)-1,g-h[y]>s+1e-10&&++y,d&&(w=y,y=p-b,b=p-w),y>b?void 0:t().slice(y,b+1)},e.invert=function(c){const d=e.invertRange([c,c]);return d&&d[0]},e.copy=function(){return I8().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},f()}function iLe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return iLe(t())},e}function ctt(){return iLe(I8().paddingInner(1))}var ftt=Array.prototype.map;function dtt(e){return ftt.call(e,Aa)}const htt=Array.prototype.slice;function sLe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(j_(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=dtt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=htt.call(r),n):t.slice()},n.tickFormat=function(r,i){return zze(e[0],qr(e),r??10,i)},n.copy=function(){return sLe().domain(n.domain()).range(n.range())},n}const F3=new Map,oLe=Symbol("vega_scale");function aLe(e){return e[oLe]=!0,e}function ptt(e){return e&&e[oLe]===!0}function mtt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?ltt(s):s.invertExtent?utt(s):void 0),s.type=e,aLe(s)};return r.metadata=Tc(Pt(n)),r}function ui(e,t,n){return arguments.length>1?(F3.set(e,mtt(e,t,n)),this):lLe(e)?F3.get(e):void 0}ui(att,l3e);ui(n1,Dze,bo);ui(rh,Lze,[bo,rh]);ui(gE,Rze,bo);ui(yE,Fze,bo);ui(YD,Oze,bo);ui(e0,Wqe,[bo,$8]);ui(t0,Yqe,[bo,$8]);ui(Af,SCe,[bo,Uu]);ui(`${Af}-${n1}`,SCe,[bo,Uu]);ui(`${Af}-${rh}`,Mze,[bo,Uu,rh]);ui(`${Af}-${gE}`,$ze,[bo,Uu]);ui(`${Af}-${yE}`,Ize,[bo,Uu]);ui(`${Af}-${YD}`,Pze,[bo,Uu]);ui(`${ib}-${n1}`,b3e,[bo,Uu]);ui(`${ib}-${rh}`,x3e,[bo,Uu,rh]);ui(`${ib}-${gE}`,MI,[bo,Uu]);ui(`${ib}-${yE}`,Xqe,[bo,Uu]);ui(`${ib}-${YD}`,w3e,[bo,Uu]);ui(r1,u3e,[bE,r1]);ui(XD,Nze,bE);ui(ZD,Bze,bE);ui(M8,sLe,[vE,bE]);ui(O8,ACe,vE);ui(rLe,I8,vE);ui(v6,ctt,vE);function lLe(e){return F3.has(e)}function F0(e,t){const n=F3.get(e);return n&&n.metadata[t]}function P8(e){return F0(e,bo)}function i1(e){return F0(e,vE)}function b6(e){return F0(e,bE)}function uLe(e){return F0(e,rh)}function gtt(e){return F0(e,$8)}function cLe(e){return F0(e,Uu)}function fLe(e){return F0(e,r1)}const ytt=["clamp","base","constant","exponent"];function dLe(e,t){const n=t[0],r=qr(t)-n;return function(i){return e(n+i*r)}}function KD(e,t,n){return lI(N8(t||"rgb",n),e)}function hLe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function pLe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Fa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ui(s)().domain([t,n]).range([0,1]),ytt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function N8(e,t){const n=FUe[vtt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function vtt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const btt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},xtt={accent:Jet,category10:Ket,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Qet,observable10:ett,paired:ttt,pastel1:ntt,pastel2:rtt,set1:itt,set2:stt,set3:ott,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function mLe(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function gLe(e,t){for(const n in e)B8(n,t(e[n]))}const Lbe={};gLe(xtt,mLe);gLe(btt,e=>KD(mLe(e)));function B8(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Lbe[e]=t,this):Lbe[e]}const wC="symbol",wtt="discrete",_tt="gradient",Ett=e=>at(e)?e.map(t=>String(t)):String(e),Stt=(e,t)=>e[1]-t[1],Att=(e,t)=>t[1]-e[1];function z8(e,t,n){let r;return li(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(dE(e.domain())/n||1)+1))),$t(t)&&(r=t.step,t=t.interval),Nt(t)&&(t=e.type===e0?tb(t):e.type==t0?nb(t):ot("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function yLe(e,t,n){let r=e.range(),i=r[0],s=qr(r),o=Stt;if(i>s&&(r=s,s=i,i=r,o=Att),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],qr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function j8(e,t){return e.bins?yLe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function vLe(e,t,n,r,i,s){const o=t.type;let a=Ett;if(o===e0||i===e0)a=e.timeFormat(r);else if(o===t0||i===t0)a=e.utcFormat(r);else if(uLe(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=bLe(t,n,!1);a=f=>u(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function bLe(e,t,n){const r=j8(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const x6={[r1]:"quantiles",[XD]:"thresholds",[ZD]:"domain"},xLe={[r1]:"quantiles",[XD]:"domain"};function wLe(e,t){return e.bins?Ttt(e.bins):e.type===rh?bLe(e,t,!0):x6[e.type]?ktt(e[x6[e.type]]()):j8(e,t)}function Ctt(e,t,n){const r=t[xLe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function ktt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Ttt(e){const t=e.slice(0,-1);return t.max=qr(e),t}const Dtt=e=>x6[e.type]||e.bins;function _Le(e,t,n,r,i,s,o){const a=xLe[t.type]&&s!==e0&&s!==t0?Ctt(e,t,i):vLe(e,t,n,i,s,o);return r===wC&&Dtt(t)?Ltt(a):r===wtt?Rtt(a):Ftt(a)}const Ltt=e=>(t,n,r)=>{const i=Rbe(r[n+1],Rbe(r.max,1/0)),s=Fbe(t,e),o=Fbe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Rbe=(e,t)=>e??t,Rtt=e=>(t,n)=>n?e(t):null,Ftt=e=>t=>e(t),Fbe=(e,t)=>Number.isFinite(e)?t(e):null;function Ott(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+qr(t),s=i-r;if(e.type===ZD){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Mtt(e,t,n,r){const i=r||t.type;return Nt(n)&&gtt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===e0?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===t0?e.utcFormat("%A, %d %B %Y, %X UTC"):_Le(e,t,5,null,n,r,!0)}function ELe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Mtt(e,t,n.format,n.formatType);if(b6(t.type)){const s=wLe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(i1(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(qr(s))}`}}let SLe=0;function $tt(){SLe=0}const O3="p_";function U8(e){return e&&e.gradient}function ALe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?O3:"";return i||(i=e.id="gradient_"+SLe++,r==="radial"?(e.x1=af(e.x1,.5),e.y1=af(e.y1,.5),e.r1=af(e.r1,0),e.x2=af(e.x2,.5),e.y2=af(e.y2,.5),e.r2=af(e.r2,.5),s=O3):(e.x1=af(e.x1,0),e.y1=af(e.y1,0),e.x2=af(e.x2,1),e.y2=af(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function af(e,t){return e??t}function CLe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Obe={basis:{curve:Oet},"basis-closed":{curve:Met},"basis-open":{curve:$et},bundle:{curve:Iet,tension:"beta",value:.85},cardinal:{curve:Pet,tension:"tension",value:0},"cardinal-open":{curve:Bet,tension:"tension",value:0},"cardinal-closed":{curve:Net,tension:"tension",value:0},"catmull-rom":{curve:zet,tension:"alpha",value:.5},"catmull-rom-closed":{curve:jet,tension:"alpha",value:.5},"catmull-rom-open":{curve:Uet,tension:"alpha",value:.5},linear:{curve:k8},"linear-closed":{curve:qet},monotone:{horizontal:Get,vertical:Het},natural:{curve:Vet},step:{curve:Wet},"step-after":{curve:Xet},"step-before":{curve:Yet}};function q8(e,t,n){var r=Yt(Obe,e)&&Obe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Itt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Ptt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ntt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Btt=/^((\s+,?\s*)|(,\s*))/,ztt=/^[01]/;function s1(e){const t=[];return(e.match(Ptt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Itt[s],a=jtt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function jtt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?ztt:Ntt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(Btt);l!==null&&(i+=l[0].length)}return r}const Gp=Math.PI/180,Utt=1e-14,kg=Math.PI/2,gf=Math.PI*2,Iy=Math.sqrt(3)/2;var SF={},AF={},kLe=[].join;function qtt(e,t,n,r,i,s,o,a,l){const u=kLe.call(arguments);if(SF[u])return SF[u];const f=o*Gp,c=Math.sin(f),d=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+c*(l-t)*.5,p=d*(l-t)*.5-c*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const v=d/n,y=c/n,b=-c/r,w=d/r,E=v*a+y*l,A=b*a+w*l,T=v*e+y*t,D=b*e+w*t;let R=1/((T-E)*(T-E)+(D-A)*(D-A))-.25;R<0&&(R=0);let O=Math.sqrt(R);s==i&&(O=-O);const B=.5*(E+T)-O*(D-A),K=.5*(A+D)+O*(T-E),L=Math.atan2(A-K,E-B);let I=Math.atan2(D-K,T-B)-L;I<0&&s===1?I+=gf:I>0&&s===0&&(I-=gf);const U=Math.ceil(Math.abs(I/(kg+.001))),q=[];for(let Y=0;Y<U;++Y){const X=L+Y*I/U,te=L+(Y+1)*I/U;q[Y]=[B,K,X,te,n,r,c,d]}return SF[u]=q}function Htt(e){const t=kLe.call(e);if(AF[t])return AF[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const f=u*o,c=-l*a,d=l*o,h=u*a,p=Math.cos(i),g=Math.sin(i),v=Math.cos(s),y=Math.sin(s),b=.5*(s-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),A=n+p-E*g,T=r+g+E*p,D=n+v,k=r+y,R=D+E*y,O=k-E*v;return AF[t]=[f*A+c*T,d*A+h*T,f*R+c*O,d*R+h*O,f*D+c*k,d*D+h*k]}const yu=["l",0,0,0,0,0,0,0];function Gtt(e,t,n){const r=yu[0]=e[0];if(r==="a"||r==="A")yu[1]=t*e[1],yu[2]=n*e[2],yu[3]=e[3],yu[4]=e[4],yu[5]=e[5],yu[6]=t*e[6],yu[7]=n*e[7];else if(r==="h"||r==="H")yu[1]=t*e[1];else if(r==="v"||r==="V")yu[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)yu[i]=(i%2==1?t:n)*e[i];return yu}function o2(e,t,n,r,i,s){var o,a=null,l=0,u=0,f=0,c=0,d,h,p,g,v=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(o=t[b],(i!==1||s!==1)&&(o=Gtt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],v=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],v=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+o[5],h=u+o[6],f=l+o[3],c=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,f+n,c+r,d+n,h+r),l=d,u=h;break;case"C":l=o[5],u=o[6],f=o[3],c=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,f+n,c+r,l+n,u+r);break;case"s":d=l+o[3],h=u+o[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,l+o[1]+n,u+o[2]+r,d+n,h+r),f=l+o[1],c=u+o[2],l=d,u=h;break;case"S":d=o[3],h=o[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,o[1]+n,o[2]+r,d+n,h+r),l=d,u=h,f=o[1],c=o[2];break;case"q":d=l+o[3],h=u+o[4],f=l+o[1],c=u+o[2],e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),l=d,u=h,f=o[1],c=o[2];break;case"t":d=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(f=l,c=u):a[0]==="t"?(f=2*l-p,c=2*u-g):a[0]==="q"&&(f=2*l-f,c=2*u-c),p=f,g=c,e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h,f=l+o[1],c=u+o[2];break;case"T":d=o[1],h=o[2],f=2*l-f,c=2*u-c,e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h;break;case"a":Mbe(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":Mbe(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=v,u=y,e.closePath();break}a=o}}function Mbe(e,t,n,r){const i=qtt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Htt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const $be=.5773502691896257,Ibe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,gf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n,i=r-n*$be,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n,i=r-n*$be;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function TLe(e){return Yt(Ibe,e)?Ibe[e]:Vtt(e)}var CF={};function Vtt(e){if(!Yt(CF,e)){const t=s1(e);CF[e]={draw:function(n,r){o2(n,t,0,0,Math.sqrt(r)/2)}}}return CF[e]}const Zh=.448084975506;function Wtt(e){return e.x}function Ytt(e){return e.y}function Xtt(e){return e.width}function Ztt(e){return e.height}function _d(e){return typeof e=="function"?e:()=>+e}function hA(e,t,n){return Math.max(t,Math.min(e,n))}function DLe(){var e=Wtt,t=Ytt,n=Xtt,r=Ztt,i=_d(0),s=i,o=i,a=i,l=null;function u(f,c,d){var h,p=c??+e.call(this,f),g=d??+t.call(this,f),v=+n.call(this,f),y=+r.call(this,f),b=Math.min(v,y)/2,w=hA(+i.call(this,f),0,b),E=hA(+s.call(this,f),0,b),A=hA(+o.call(this,f),0,b),T=hA(+a.call(this,f),0,b);if(l||(l=h=HD()),w<=0&&E<=0&&A<=0&&T<=0)l.rect(p,g,v,y);else{var D=p+v,k=g+y;l.moveTo(p+w,g),l.lineTo(D-E,g),l.bezierCurveTo(D-Zh*E,g,D,g+Zh*E,D,g+E),l.lineTo(D,k-T),l.bezierCurveTo(D,k-Zh*T,D-Zh*T,k,D-T,k),l.lineTo(p+A,k),l.bezierCurveTo(p+Zh*A,k,p,k-Zh*A,p,k-A),l.lineTo(p,g+w),l.bezierCurveTo(p,g+Zh*w,p+Zh*w,g,p+w,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(f){return arguments.length?(e=_d(f),u):e},u.y=function(f){return arguments.length?(t=_d(f),u):t},u.width=function(f){return arguments.length?(n=_d(f),u):n},u.height=function(f){return arguments.length?(r=_d(f),u):r},u.cornerRadius=function(f,c,d,h){return arguments.length?(i=_d(f),s=c!=null?_d(c):i,a=d!=null?_d(d):i,o=h!=null?_d(h):s,u):i},u.context=function(f){return arguments.length?(l=f??null,u):l},u}function LLe(){var e,t,n,r,i=null,s,o,a,l;function u(c,d,h){const p=h/2;if(s){var g=a-d,v=c-o;if(g||v){var y=Math.hypot(g,v),b=(g/=y)*l,w=(v/=y)*l,E=Math.atan2(v,g);i.moveTo(o-b,a-w),i.lineTo(c-g*p,d-v*p),i.arc(c,d,p,E-Math.PI,E),i.lineTo(o+b,a+w),i.arc(o,a,l,E,E+Math.PI)}else i.arc(c,d,p,0,gf);i.closePath()}else s=1;o=c,a=d,l=p}function f(c){var d,h=c.length,p,g=!1,v;for(i==null&&(i=v=HD()),d=0;d<=h;++d)!(d<h&&r(p=c[d],d,c))===g&&(g=!g)&&(s=0),g&&u(+e(p,d,c),+t(p,d,c),+n(p,d,c));if(v)return i=null,v+""||null}return f.x=function(c){return arguments.length?(e=c,f):e},f.y=function(c){return arguments.length?(t=c,f):t},f.size=function(c){return arguments.length?(n=c,f):n},f.defined=function(c){return arguments.length?(r=c,f):r},f.context=function(c){return arguments.length?(c==null?i=null:i=c,f):i},f}function xE(e,t){return e??t}const wE=e=>e.x||0,_E=e=>e.y||0,Ktt=e=>e.width||0,Jtt=e=>e.height||0,Qtt=e=>(e.x||0)+(e.width||0),ent=e=>(e.y||0)+(e.height||0),tnt=e=>e.startAngle||0,nnt=e=>e.endAngle||0,rnt=e=>e.padAngle||0,int=e=>e.innerRadius||0,snt=e=>e.outerRadius||0,ont=e=>e.cornerRadius||0,ant=e=>xE(e.cornerRadiusTopLeft,e.cornerRadius)||0,lnt=e=>xE(e.cornerRadiusTopRight,e.cornerRadius)||0,unt=e=>xE(e.cornerRadiusBottomRight,e.cornerRadius)||0,cnt=e=>xE(e.cornerRadiusBottomLeft,e.cornerRadius)||0,fnt=e=>xE(e.size,64),dnt=e=>e.size||1,JD=e=>e.defined!==!1,hnt=e=>TLe(e.shape||"circle"),pnt=Let().startAngle(tnt).endAngle(nnt).padAngle(rnt).innerRadius(int).outerRadius(snt).cornerRadius(ont),mnt=VDe().x(wE).y1(_E).y0(ent).defined(JD),gnt=VDe().y(_E).x1(wE).x0(Qtt).defined(JD),ynt=GDe().x(wE).y(_E).defined(JD),vnt=DLe().x(wE).y(_E).width(Ktt).height(Jtt).cornerRadius(ant,lnt,unt,cnt),bnt=Fet().type(hnt).size(fnt),xnt=LLe().x(wE).y(_E).defined(JD).size(dnt);function H8(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function wnt(e,t){return pnt.context(e)(t)}function _nt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?gnt:mnt).curve(q8(r,n.orient,n.tension)).context(e)(t)}function Ent(e,t){const n=t[0],r=n.interpolate||"linear";return ynt.curve(q8(r,n.orient,n.tension)).context(e)(t)}function sb(e,t,n,r){return vnt.context(e)(t,n,r)}function Snt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Ant(e,t){return bnt.context(e)(t)}function Cnt(e,t){return xnt.context(e)(t)}var RLe=1;function FLe(){RLe=1}function G8(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+RLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return ir(r)?o.path=r(null):H8(n)?o.path=sb(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Qs(e){this.clear(),e&&this.union(e)}Qs.prototype={clone(){return new Qs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,f=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+f,a*r-l*o+u,l*r+a*o+f,a*s-l*i+u,l*s+a*i+f,a*s-l*o+u,l*s+a*o+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function QD(e){this.mark=e,this.bounds=this.bounds||new Qs}function eL(e){QD.call(this,e),this.items=this.items||[]}Lt(eL,QD);class OLe{constructor(t){this._pending=0,this._loader=t||FD()}pending(){return this._pending}sanitizeURL(t){const n=this;return Pbe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(fw(n),r)).catch(()=>(fw(n),null))}loadImage(t){const n=this,r=Zet();return Pbe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Yt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>fw(n),o.onerror=()=>fw(n),o.src=s,o}).catch(i=>(fw(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Pbe(e){e._pending+=1}function fw(e){e._pending-=1}function ph(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?knt(t,r):0))}return e}function knt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Tnt=gf-1e-8;let tL,_C,EC,Mg,w6,SC,_6,E6;const vp=(e,t)=>tL.add(e,t),AC=(e,t)=>vp(_C=e,EC=t),Nbe=e=>vp(e,tL.y1),Bbe=e=>vp(tL.x1,e),Tg=(e,t)=>w6*e+_6*t,Dg=(e,t)=>SC*e+E6*t,kF=(e,t)=>vp(Tg(e,t),Dg(e,t)),TF=(e,t)=>AC(Tg(e,t),Dg(e,t));function EE(e,t){return tL=e,t?(Mg=t*Gp,w6=E6=Math.cos(Mg),SC=Math.sin(Mg),_6=-SC):(w6=E6=1,Mg=SC=_6=0),Dnt}const Dnt={beginPath(){},closePath(){},moveTo:TF,lineTo:TF,rect(e,t,n,r){Mg?(kF(e+n,t),kF(e+n,t+r),kF(e,t+r),TF(e,t)):(vp(e+n,t+r),AC(e,t))},quadraticCurveTo(e,t,n,r){const i=Tg(e,t),s=Dg(e,t),o=Tg(n,r),a=Dg(n,r);zbe(_C,i,o,Nbe),zbe(EC,s,a,Bbe),AC(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Tg(e,t),a=Dg(e,t),l=Tg(n,r),u=Dg(n,r),f=Tg(i,s),c=Dg(i,s);jbe(_C,o,l,f,Nbe),jbe(EC,a,u,c,Bbe),AC(f,c)},arc(e,t,n,r,i,s){if(r+=Mg,i+=Mg,_C=n*Math.cos(i)+e,EC=n*Math.sin(i)+t,Math.abs(i-r)>Tnt)vp(e-n,t-n),vp(e+n,t+n);else{const o=u=>vp(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%gf,r<0&&(r+=gf),i=i%gf,i<0&&(i+=gf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=gf,a=r-r%kg,l=0;l<4&&a>i;++l,a-=kg)o(a);else for(a=r-r%kg+kg,l=0;l<4&&a<i;++l,a=a+kg)o(a)}}};function zbe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function jbe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,f;Math.abs(s)>Utt?(f=o*o+a*s,f>=0&&(f=Math.sqrt(f),l=(-o+f)/s,u=(-o-f)/s)):l=.5*a/o,0<l&&l<1&&i(Ube(l,e,t,n,r)),0<u&&u<1&&i(Ube(u,e,t,n,r))}function Ube(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var $p=($p=Mp(1,1))?$p.getContext("2d"):null;const S6=new Qs;function V8(e){return function(t,n){if(!$p)return!0;e($p,t),S6.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=S6;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if($p.isPointInPath(l,a))return!0;return!1}}function W8(e,t){return t.contains(e.x||0,e.y||0)}function MLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(S6.set(n,r,n+i,r+s))}function $Le(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return dv(t,n,r,i,s)}function dv(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,f=i-n;let c=0,d=1,h,p,g,v;for(v=0;v<4;++v){if(v===0&&(h=-u,p=-(s-t)),v===1&&(h=u,p=a-t),v===2&&(h=-f,p=-(o-n)),v===3&&(h=f,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>c&&(c=g)}else if(h>0){if(g<c)return!1;g<d&&(d=g)}}return!0}function o1(e,t){e.globalCompositeOperation=t.blend||"source-over"}function oc(e,t){return e??t}function qbe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Lnt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+oc(t.x1,.5)*r,n.y1+oc(t.y1,.5)*i,Math.max(r,i)*oc(t.r1,0),n.x1+oc(t.x2,.5)*r,n.y1+oc(t.y2,.5)*i,Math.max(r,i)*oc(t.r2,.5));else{const o=oc(t.x1,0),a=oc(t.y1,0),l=oc(t.x2,1),u=oc(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const f=Mp(Math.ceil(r),Math.ceil(i)),c=f.getContext("2d");return c.scale(r,i),c.fillStyle=qbe(c.createLinearGradient(o,a,l,u),t.stops),c.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return qbe(s,t.stops)}function ILe(e,t,n){return U8(n)?Lnt(e,n,t.bounds):n}function M3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=ILe(e,t,t.fill),!0):!1}var Rnt=[];function a1(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=ILe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Rnt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Fnt(e,t){return e.zindex-t.zindex||e.index-t.index}function Y8(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Fnt)}function Lc(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Y8(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function $3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Y8(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function X8(e){return function(t,n,r){Lc(n,i=>{(!r||r.intersects(i.bounds))&&PLe(e,t,i,i)})}}function Ont(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&PLe(e,t,n.items[0],n.items)}}function PLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(o1(t,n),n.fill&&M3(t,n,i)&&t.fill(),n.stroke&&a1(t,n,i)&&t.stroke()))}function nL(e){return e=e||$u,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,$3(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function SE(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,f;return l&&(u=o.strokeWidth,f=o.strokeCap,n.lineWidth=u??1,n.lineCap=f??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function Z8(e){return nL(SE(e))}function zg(e,t){return"translate("+e+","+t+")"}function K8(e){return"rotate("+e+")"}function Mnt(e,t){return"scale("+e+","+t+")"}function NLe(e){return zg(e.x||0,e.y||0)}function $nt(e){return zg(e.x||0,e.y||0)+(e.angle?" "+K8(e.angle):"")}function Int(e){return zg(e.x||0,e.y||0)+(e.angle?" "+K8(e.angle):"")+(e.scaleX||e.scaleY?" "+Mnt(e.scaleX||1,e.scaleY||1):"")}function J8(e,t,n){function r(o,a){o("transform",$nt(a)),o("d",t(null,a))}function i(o,a){return t(EE(o,a.angle),a),ph(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,f=a.angle||0;o.translate(l,u),f&&o.rotate(f*=Gp),o.beginPath(),t(o,a),f&&o.rotate(-f),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:X8(s),pick:Z8(s),isect:n||V8(s)}}var Pnt=J8("arc",wnt);function Nnt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Bnt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function znt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Q8(e,t,n){function r(l,u){var f=u.mark.items;f.length&&l("d",t(null,f))}function i(l,u){var f=u.items;return f.length===0?l:(t(EE(l),f),ph(l,f[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=SE(s);function a(l,u,f,c,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(f*=l.pixelRatio,c*=l.pixelRatio,o(l,p,f,c)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Ont(s),pick:a,isect:W8,tip:n}}var jnt=Q8("area",_nt,Nnt);function Unt(e,t){var n=t.clip;e.save(),ir(n)?(e.beginPath(),n(e),e.clip()):BLe(e,t.group)}function BLe(e,t){e.beginPath(),H8(t)?sb(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function zLe(e){const t=oc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function qnt(e,t){e("transform",NLe(t))}function jLe(e,t){const n=zLe(t);e("d",sb(null,t,n,n))}function Hnt(e,t){e("class","background"),e("aria-hidden",!0),jLe(e,t)}function Gnt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?jLe(e,t):e("d","")}function Vnt(e,t,n){const r=t.clip?G8(n,t,t):null;e("clip-path",r)}function Wnt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ph(e,t),e.translate(t.x||0,t.y||0)}function a2(e,t,n,r){const i=zLe(t);e.beginPath(),sb(e,t,(n||0)+i,(r||0)+i)}const Ynt=SE(a2),Xnt=SE(a2,!1),Znt=SE(a2,!0);function Knt(e,t,n,r){Lc(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(a2(e,i,s,o),o1(e,i),i.fill&&M3(e,i,l)&&e.fill(),i.stroke&&!a&&a1(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&BLe(e,i),n&&n.translate(-s,-o),Lc(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(a2(e,i,s,o),o1(e,i),a1(e,i,l)&&e.stroke())})}function Jnt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return $3(t,l=>{let u,f,c;const d=l.bounds;if(d&&!d.contains(i,s))return;f=l.x||0,c=l.y||0;const h=f+(l.width||0),p=c+(l.height||0),g=l.clip;if(g&&(i<f||i>h||s<c||s>p))return;if(e.save(),e.translate(f,c),f=i-f,c=s-c,g&&H8(l)&&!Znt(e,l,o,a))return e.restore(),null;const v=l.strokeForeground,y=t.interactive!==!1;return y&&v&&l.stroke&&Xnt(e,l,o,a)?(e.restore(),l):(u=$3(l,b=>Qnt(b,f,c)?this.pick(b,n,r,f,c):null),!u&&y&&(l.fill||!v&&l.stroke)&&Ynt(e,l,o,a)&&(u=l),e.restore(),u||null)})}function Qnt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var ert={type:"group",tag:"g",nested:!1,attr:qnt,bound:Wnt,draw:Knt,pick:Jnt,isect:MLe,content:Vnt,background:Hnt,foreground:Gnt},l2={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function eN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function tN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function nN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function rL(e,t){return e==="center"?t/2:e==="right"?t:0}function iL(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function trt(e,t,n){const r=eN(t,n),i=tN(t,r),s=nN(t,r),o=(t.x||0)-rL(t.align,i),a=(t.y||0)-iL(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,l2["xmlns:xlink"],"xlink:href"),e("transform",zg(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function nrt(e,t){const n=t.image,r=tN(t,n),i=nN(t,n),s=(t.x||0)-rL(t.align,r),o=(t.y||0)-iL(t.baseline,i);return e.set(s,o,s+r,o+i)}function rrt(e,t,n){Lc(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=eN(r,this);let s=tN(r,i),o=nN(r,i);if(s===0||o===0)return;let a=(r.x||0)-rL(r.align,s),l=(r.y||0)-iL(r.baseline,o),u,f,c,d;r.aspect!==!1&&(f=i.width/i.height,c=r.width/r.height,f===f&&c===c&&f!==c&&(c<f?(d=s/f,l+=(o-d)/2,o=d):(d=o*f,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(o1(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var irt={type:"image",tag:"image",nested:!1,attr:trt,bound:nrt,draw:rrt,pick:nL(),isect:$u,get:eN,xOffset:rL,yOffset:iL},srt=Q8("line",Ent,Bnt);function ort(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Int(t)),e("d",t.path)}function CC(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Gp,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=s1(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),o2(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):o2(e,l,r,i,s,o)}function art(e,t){return CC(EE(e,t.angle),t)?e.set(0,0,0,0):ph(e,t,!0)}var lrt={type:"path",tag:"path",nested:!1,attr:ort,bound:art,draw:X8(CC),pick:Z8(CC),isect:V8(CC)};function urt(e,t){e("d",sb(null,t))}function crt(e,t){var n,r;return ph(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Hbe(e,t){e.beginPath(),sb(e,t)}var frt={type:"rect",tag:"path",nested:!1,attr:urt,bound:crt,draw:X8(Hbe),pick:Z8(Hbe),isect:MLe};function drt(e,t){e("transform",NLe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function hrt(e,t){var n,r;return ph(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function ULe(e,t,n){var r,i,s,o;return t.stroke&&a1(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function prt(e,t,n){Lc(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&ULe(e,r,i)&&(o1(e,r),e.stroke())}})}function mrt(e,t,n,r){return e.isPointInStroke?ULe(e,t,1)&&e.isPointInStroke(n,r):!1}var grt={type:"rule",tag:"line",nested:!1,attr:drt,bound:hrt,draw:prt,pick:nL(mrt),isect:$Le},yrt=J8("shape",Snt),vrt=J8("symbol",Ant,W8);const Gbe=aTe();var nu={height:Wf,measureWidth:rN,estimateWidth:I3,width:I3,canvas:qLe};qLe(!0);function qLe(e){nu.width=e&&$p?rN:I3}function I3(e,t){return HLe(Wp(e,t),Wf(e))}function HLe(e,t){return~~(.8*e.length*t)}function rN(e,t){return Wf(e)<=0||!(t=Wp(e,t))?0:GLe(t,sL(e))}function GLe(e,t){const n=`(${t}) ${e}`;let r=Gbe.get(n);return r===void 0&&($p.font=t,r=$p.measureText(e).width,Gbe.set(n,r)),r}function Wf(e){return e.fontSize!=null?+e.fontSize||0:11}function Vp(e){return e.lineHeight!=null?e.lineHeight:Wf(e)+2}function brt(e){return at(e)?e.length>1?e:e[0]:e}function AE(e){return brt(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function iN(e){const t=AE(e);return(at(t)?t.length-1:0)*Vp(e)}function Wp(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?wrt(e,n):n}function xrt(e){if(nu.width===rN){const t=sL(e);return n=>GLe(n,t)}else if(nu.width===I3){const t=Wf(e);return n=>HLe(n,t)}else return t=>nu.width(e,t)}function wrt(e,t){var n=+e.limit,r=xrt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function CE(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function sL(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Wf(e)+"px "+CE(e,t)}function sN(e){var t=e.baseline,n=Wf(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Vp(e):t==="line-bottom"?.29*n-.5*Vp(e):0)}const _rt={left:"start",center:"middle",right:"end"},y_=new Qs;function oL(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-kg,t+=r*Math.cos(i),n+=r*Math.sin(i)),y_.x1=t,y_.y1=n,y_}function Ert(e,t){var n=t.dx||0,r=(t.dy||0)+sN(t),i=oL(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",_rt[t.align]||"start"),a?(l=zg(s,o)+" "+K8(a),(n||r)&&(l+=" "+zg(n,r))):l=zg(s+n,o+r),e("transform",l)}function oN(e,t,n){var r=nu.height(t),i=t.align,s=oL(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+sN(t)-Math.round(.8*r),f=AE(t),c;if(at(f)?(r+=Vp(t)*(f.length-1),c=f.reduce((d,h)=>Math.max(d,nu.width(t,h)),0)):c=nu.width(t,f),i==="center"?l-=c/2:i==="right"&&(l-=c),e.set(l+=o,u+=a,l+c,u+r),t.angle&&!n)e.rotate(t.angle*Gp,o,a);else if(n===2)return e.rotatedPoints(t.angle*Gp,o,a);return e}function Srt(e,t,n){Lc(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,f,c;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=sL(r),e.textAlign=r.align||"left",s=oL(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Gp),o=a=0),o+=r.dx||0,a+=(r.dy||0)+sN(r),f=AE(r),o1(e,r),at(f))for(u=Vp(r),l=0;l<f.length;++l)c=Wp(r,f[l]),r.fill&&M3(e,r,i)&&e.fillText(c,o,a),r.stroke&&a1(e,r,i)&&e.strokeText(c,o,a),a+=u;else c=Wp(r,f),r.fill&&M3(e,r,i)&&e.fillText(c,o,a),r.stroke&&a1(e,r,i)&&e.strokeText(c,o,a);r.angle&&e.restore()}})}function Art(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=oL(t),a=o.x1,l=o.y1,u=oN(y_,t,1),f=-t.angle*Gp,c=Math.cos(f),d=Math.sin(f),h=c*i-d*s+(a-c*a+d*l),p=d*i+c*s+(l-d*a-c*l);return u.contains(h,p)}function Crt(e,t){const n=oN(y_,e,2);return dv(t,n[0],n[1],n[2],n[3])||dv(t,n[0],n[1],n[4],n[5])||dv(t,n[4],n[5],n[6],n[7])||dv(t,n[2],n[3],n[6],n[7])}var krt={type:"text",tag:"text",nested:!1,attr:Ert,bound:oN,draw:Srt,pick:nL(Art),isect:Crt},Trt=Q8("trail",Cnt,znt),cu={arc:Pnt,area:jnt,group:ert,image:irt,line:srt,path:lrt,rect:frt,rule:grt,shape:yrt,symbol:vrt,text:krt,trail:Trt};function A6(e,t,n){var r=cu[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Qs),e,n)}var Vbe={mark:null};function VLe(e,t,n){var r=cu[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,f;if(r.nested)return o?u=s[0]:(Vbe.mark=e,u=Vbe),f=A6(u,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new Qs,o)for(a=0,l=s.length;a<l;++a)t.union(A6(s[a],i,n));return e.bounds=t}const Drt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function WLe(e,t){return JSON.stringify(e,Drt,t)}function YLe(e){const t=typeof e=="string"?JSON.parse(e):e;return XLe(t)}function XLe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&XLe(n[i]);return t&&VLe(e),e}class ZLe{constructor(t){arguments.length?this.root=YLe(t):(this.root=Wbe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new eL(this.root)])}toJSON(t){return WLe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Wbe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Wbe(e,t){const n={bounds:new Qs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function bp(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function aN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ho(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=bp(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Eu(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function KLe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function aL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Lrt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=cu[i.marktype]).tip){for(o=aL(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let lN=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||FD(),this._tooltip=n||Rrt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=bp(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Lrt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function Rrt(e,t,n,r){e.element().setAttribute("title",r||"")}let kE=class{constructor(t){this._el=null,this._bgcolor=null,this._loader=new OLe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}};const Frt="keydown",Ort="keypress",Mrt="keyup",JLe="dragenter",kC="dragleave",QLe="dragover",C6="pointerdown",$rt="pointerup",P3="pointermove",TC="pointerout",eRe="pointerover",k6="mousedown",Irt="mouseup",tRe="mousemove",N3="mouseout",nRe="mouseover",B3="click",Prt="dblclick",Nrt="wheel",rRe="mousewheel",z3="touchstart",j3="touchmove",U3="touchend",Brt=[Frt,Ort,Mrt,JLe,kC,QLe,C6,$rt,P3,TC,eRe,k6,Irt,tRe,N3,nRe,B3,Prt,Nrt,rRe,z3,j3,U3],T6=P3,v_=N3,D6=B3;class TE extends lN{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Brt,this.pointermove=Xbe([P3,tRe],[eRe,nRe],[TC,N3]),this.dragover=Xbe([QLe],[JLe],[kC]),this.pointerout=Zbe([TC,N3]),this.dragleave=Zbe([kC])}initialize(t,n,r){return this._canvas=t&&aN(t,"canvas"),[B3,k6,C6,P3,TC,kC].forEach(i=>Ybe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(rRe,t)}pointerdown(t){this._down=this._active,this.fire(C6,t)}mousedown(t){this._down=this._active,this.fire(k6,t)}click(t){this._down===this._active&&(this.fire(B3,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(z3,t,!0)}touchmove(t){this.fire(j3,t,!0)}touchend(t){this.fire(U3,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===D6&&i&&i.href?this.handleHref(n,i,i.href):(t===T6||t===v_)&&this.handleTooltip(n,i,t!==v_),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Ybe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=aL(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return cu[t.marktype].pick.call(this,o,t,n,r,i,s)}}const zrt=e=>e===z3||e===j3||e===U3?[z3,j3,U3]:[e];function Ybe(e,t){zrt(t).forEach(n=>jrt(e,n))}function jrt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function qw(e,t,n){t.forEach(r=>e.fire(r,n))}function Xbe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?qw(this,e,r):((!i||!i.exit)&&qw(this,n,r),this._active=s,qw(this,t,r),qw(this,e,r))}}function Zbe(e){return function(t){qw(this,e,t),this._active=null}}function Urt(){return typeof window<"u"&&window.devicePixelRatio||1}function qrt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?Urt():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class q3 extends kE{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Qs,this._tempb=new Qs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Mp(1,1,this._options.type),t&&this._canvas&&(Eu(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)qrt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ot("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=Hrt(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):Grt(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=cu[n.marktype];n.clip&&Unt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const Hrt=(e,t,n)=>new Qs().set(0,0,t,n).translate(-e[0],-e[1]);function Grt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class iRe extends lN{constructor(t,n){super(t,n);const r=this;r._hrefHandler=DF(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=DF(r,(i,s)=>{r.handleTooltip(i,s,i.type!==v_)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(D6,this._hrefHandler),i.removeEventListener(T6,this._tooltipHandler),i.removeEventListener(v_,this._tooltipHandler)),this._svg=i=t&&aN(t,"svg"),i&&(i.addEventListener(D6,this._hrefHandler),i.addEventListener(T6,this._tooltipHandler),i.addEventListener(v_,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:DF(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const DF=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},sRe="aria-hidden",uN="aria-label",cN="role",fN="aria-roledescription",oRe="graphics-object",dN="graphics-symbol",aRe=(e,t,n)=>({[cN]:e,[fN]:t,[uN]:n||void 0}),Vrt=Tc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Kbe={axis:{desc:"axis",caption:Xrt},legend:{desc:"legend",caption:Zrt},"title-text":{desc:"title",caption:e=>`Title text '${Qbe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Qbe(e)}'`}},Jbe={ariaRole:cN,ariaRoleDescription:fN,description:uN};function lRe(e,t){const n=t.aria===!1;if(e(sRe,n||void 0),n||t.description==null)for(const r in Jbe)e(Jbe[r],void 0);else{const r=t.mark.marktype;e(uN,t.description),e(cN,t.ariaRole||(r==="group"?oRe:dN)),e(fN,t.ariaRoleDescription||`${r} mark`)}}function uRe(e){return e.aria===!1?{[sRe]:!0}:Vrt[e.role]?null:Kbe[e.role]?Yrt(e,Kbe[e.role]):Wrt(e)}function Wrt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return aRe(n?oRe:dN,`${t} mark container`,e.description)}function Yrt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return aRe(t.role||dN,t.desc,n.description||r(n))}catch{return null}}function Qbe(e){return Pt(e.text).join(" ")}function Xrt(e){const t=e.datum,n=e.orient,r=t.title?cRe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${i1(a)?"discrete":a} scale with ${ELe(o,s,e)}`}function Zrt(e){const t=e.datum,n=t.title?cRe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return Jrt(r)+(n?` titled '${n}'`:"")+` for ${Krt(s)} with ${ELe(l,a,e)}`}function cRe(e){try{return Pt(qr(e.items).items[0].text).join(" ")}catch{return null}}function Krt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+qr(e)}function Jrt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const fRe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Qrt=e=>fRe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function hN(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${Qrt(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];for(const d of f)for(const h in d)o(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=fRe(l),a),toString:()=>e};return a}const dRe=e=>hRe(hN(),e)+"";function hRe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):hRe(e,r)}return e.close()}const H3={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},G3={blend:"mix-blend-mode"},pRe={fill:"none","stroke-miterlimit":10},dw=0,exe="http://www.w3.org/2000/xmlns/",fo=l2.xmlns;class pN extends kE{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ho(t,0,"svg",fo),this._svg.setAttributeNS(exe,"xmlns",fo),this._svg.setAttributeNS(exe,"xmlns:xlink",l2["xmlns:xlink"]),this._svg.setAttribute("version",l2.version),this._svg.setAttribute("class","marks"),Eu(t,1),this._root=ho(this._svg,dw,"g",fo),xp(this._root,pRe),Eu(this._svg,dw+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(xp(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ho(t,dw,"rect",fo),xp(r,{width:this._width,height:this._height,fill:n}));const i=dRe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Eu(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=cu[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,txe(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,txe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=cu[o],l=n.interactive===!1?"none":null,u=a.tag==="g",f=nxe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Eu(f,0),n._svg;f.setAttribute("class",KLe(n));const c=uRe(n);for(const g in c)Ua(f,g,c[g]);u||Ua(f,"pointer-events",l),Ua(f,"clip-path",n.clip?G8(this,n,n.group):null);let d=null,h=0;const p=g=>{const v=this.isDirty(g),y=nxe(g,f,d,a.tag,s);v&&(this._update(a,y,g),u&&nit(this,y,g,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Lc(n,p),Eu(f,h),f}_update(t,n,r){Bd=n,_a=n.__values__,lRe(b_,r),t.attr(b_,r,this);const i=iit[t.type];i&&i.call(this,t,n,r),Bd&&this.style(Bd,r)}style(t,n){if(n!=null){for(const r in H3){let i=r==="font"?CE(n):n[r];if(i===_a[r])continue;const s=H3[r];i==null?t.removeAttribute(s):(U8(i)&&(i=ALe(i,this._defs.gradient,mRe())),t.setAttribute(s,i+"")),_a[r]=i}for(const r in G3)DC(t,G3[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ho(t,dw+1,"defs",fo)),i=eit(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ho(t,dw+1,"defs",fo)),i=tit(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Eu(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function txe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function eit(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ho(e,n++,"pattern",fo);xp(o,{id:O3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ho(o,0,"rect",fo),xp(o,{width:1,height:1,fill:`url(${mRe()}#${t.id})`}),e=ho(e,n++,"radialGradient",fo),xp(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ho(e,n++,"linearGradient",fo),xp(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ho(e,r,"stop",fo),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Eu(e,r),n}function tit(e,t,n){let r;return e=ho(e,n,"clipPath",fo),e.setAttribute("id",t.id),t.path?(r=ho(e,0,"path",fo),r.setAttribute("d",t.path)):(r=ho(e,0,"rect",fo),xp(r,{x:0,y:0,width:t.width,height:t.height})),Eu(e,1),n+1}function nit(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Lc(n,o=>{i=e.mark(t,o,i,r),++s}),Eu(t,1+s)}function nxe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=bp(o,r,fo),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=bp(o,"path",fo);s.appendChild(a),a.__data__=e;const l=bp(o,"g",fo);s.appendChild(l),l.__data__=e;const u=bp(o,"path",fo);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||rit(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function rit(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bd=null,_a=null;const iit={group(e,t,n){const r=Bd=t.childNodes[2];_a=r.__values__,e.foreground(b_,n,this),_a=t.__values__,Bd=t.childNodes[1],e.content(b_,n,this);const i=Bd=t.childNodes[0];e.background(b_,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==_a.events&&(Ua(r,"pointer-events",s),Ua(i,"pointer-events",s),_a.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ua(r,"display",null),this.style(i,n),Ua(i,"stroke",null),o&&(n.fill=null),_a=r.__values__,this.style(r,n),o&&(n.fill=o),Bd=null}else Ua(r,"display","none")},image(e,t,n){n.smooth===!1?(DC(t,"image-rendering","optimizeSpeed"),DC(t,"image-rendering","pixelated")):DC(t,"image-rendering",null)},text(e,t,n){const r=AE(n);let i,s,o,a;at(r)?(s=r.map(l=>Wp(n,l)),i=s.join(`
`),i!==_a.text&&(Eu(t,0),o=t.ownerDocument,a=Vp(n),s.forEach((l,u)=>{const f=bp(o,"tspan",fo);f.__data__=n,f.textContent=l,u&&(f.setAttribute("x",0),f.setAttribute("dy",a)),t.appendChild(f)}),_a.text=i)):(s=Wp(n,r),s!==_a.text&&(t.textContent=s,_a.text=s)),Ua(t,"font-family",CE(n)),Ua(t,"font-size",Wf(n)+"px"),Ua(t,"font-style",n.fontStyle),Ua(t,"font-variant",n.fontVariant),Ua(t,"font-weight",n.fontWeight)}};function b_(e,t,n){t!==_a[e]&&(n?sit(Bd,e,t,n):Ua(Bd,e,t),_a[e]=t)}function DC(e,t,n){n!==_a[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),_a[t]=n)}function xp(e,t){for(const n in t)Ua(e,n,t[n])}function Ua(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function sit(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function mRe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class gRe extends kE{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=hN();n.open("svg",rr({},l2,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",pRe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=cu[n.marktype],i=r.tag,s=[lRe,r.attr];t.open("g",{class:KLe(n),"clip-path":n.clip?G8(this,n,n.group):null},uRe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=AE(a);if(at(u)){const f={x:0,dy:Vp(a)};for(let c=0;c<u.length;++c)t.open("tspan",c?f:null).text(Wp(a,u[c])).close()}else t.text(Wp(a,u))}else if(i==="g"){const u=a.strokeForeground,f=a.fill,c=a.stroke;u&&c&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Lc(a,d=>this.mark(t,d)),t.close(),u&&c?(f&&(a.fill=null),a.stroke=c,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),f&&(a.fill=f)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Lc(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,f)=>{s[f||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&oit(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:O3+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function oit(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=CE(t),e["font-size"]=Wf(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in H3){let a=t[o];const l=H3[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(U8(a)&&(a=ALe(a,i.gradient,"")),e[l]=a)}for(const o in G3){const a=t[o];a!=null&&(s=s||[],s.push(`${G3[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const uc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function ait(e){uc.svgMarkTypes=e.svgMarkTypes??["text"],uc.svgOnTop=e.svgOnTop??!0,uc.debug=e.debug??!1}class L6 extends kE{constructor(t){super(t),this._svgRenderer=new pN(t),this._canvasRenderer=new q3(t)}initialize(t,n,r,i,s){this._root_el=ho(t,0,"div");const o=ho(this._root_el,0,"div"),a=ho(this._root_el,1,"div");return this._root_el.style.position="relative",uc.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=uc.svgOnTop?a:o,this._canvasEl=uc.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return uc.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!uc.svgMarkTypes.includes(s));this._svgRenderer.render(t,uc.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return uc.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class yRe extends TE{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ho(ho(t,0,"div"),uc.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const vRe="canvas",bRe="hybrid",xRe="png",wRe="svg",_Re="none",wp={Canvas:vRe,PNG:xRe,SVG:wRe,Hybrid:bRe,None:_Re},n0={};n0[vRe]=n0[xRe]={renderer:q3,headless:q3,handler:TE};n0[wRe]={renderer:pN,headless:gRe,handler:iRe};n0[bRe]={renderer:L6,headless:L6,handler:yRe};n0[_Re]={};function lL(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(n0[e]=t,this):n0[e]}function ERe(e,t,n){const r=[],i=new Qs().union(t),s=e.marktype;return s?SRe(e,i,n,r):s==="group"?ARe(e,i,n,r):ot("Intersect scene must be mark node or group item.")}function SRe(e,t,n,r){if(lit(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)ARe(i[a],t,n,r);else for(const l=cu[s].isect;a<o;++a){const u=i[a];CRe(u,t,l)&&r.push(u)}}return r}function lit(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function ARe(e,t,n,r){n&&n(e.mark)&&CRe(e,t,cu.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)SRe(i[l],t,n,r);t.translate(o,a)}return r}function CRe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const LF=new Qs;function kRe(e){const t=e.clip;if(ir(t))t(EE(LF.clear()));else if(t)LF.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(LF)}const uit=1e-9;function mN(e,t,n){return e===t?!0:n==="path"?TRe(e,t):e instanceof Date&&t instanceof Date?+e==+t:li(e)&&li(t)?Math.abs(e-t)<=uit:!e||!t||!$t(e)&&!$t(t)?e==t:cit(e,t)}function TRe(e,t){return mN(s1(e),s1(t))}function cit(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!mN(e[i],t[i],i))return!1;return typeof e==typeof t}function fit(){FLe(),$tt()}const l1="top",pc="left",yc="right",Yp="bottom",dit="top-left",hit="top-right",pit="bottom-left",mit="bottom-right",gN="start",R6="middle",qa="end",git="x",yit="y",uL="group",yN="axis",vN="title",vit="frame",bit="scope",bN="legend",DRe="row-header",LRe="row-footer",RRe="row-title",FRe="column-header",ORe="column-footer",MRe="column-title",xit="padding",wit="symbol",$Re="fit",IRe="fit-x",PRe="fit-y",_it="pad",xN="none",pA="all",F6="each",wN="flush",_p="column",Ep="row";function NRe(e){rt.call(this,null,e)}Lt(NRe,rt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=cu[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=mA(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===uL||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(mA(u,o))),r.role){case yN:case bN:case vN:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(mA(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(mA(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return kRe(r),t.modifies("bounds")}});function mA(e,t,n){return t(e.bounds.clear(),e,n)}const rxe=":vega_identifier:";function _N(e){rt.call(this,0,e)}_N.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Lt(_N,rt,{transform(e,t){const n=Eit(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Eit(e){return e._signals[rxe]||(e._signals[rxe]=e.add(0))}function BRe(e){rt.call(this,null,e)}Lt(BRe,rt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Sit(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===uL?eL:QD;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Sit(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function zRe(e){rt.call(this,null,e)}const ixe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!jRe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},jRe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),sxe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(jRe(i,s=e[n].bounds,t))return!0},Ait=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Cit=(e,t,n)=>{var r=e.range(),i=new Qs;return t===l1||t===Yp?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},oxe=e=>(e.forEach(t=>t.opacity=1),e),axe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Lt(zRe,rt,{transform(e,t){const n=ixe[e.method]||ixe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(oxe(i),t=axe(t,e)),t;if(i=i.filter(Ait),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=oxe(i),t=axe(t,e),s.length>=3&&sxe(s,r)){do s=n(s,r);while(s.length>=3&&sxe(s,r));s.length<3&&!qr(i).opacity&&(s.length>1&&(qr(s).opacity=0),qr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Cit(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function URe(e){rt.call(this,null,e)}Lt(URe,rt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const xa=new Qs;function hv(e,t,n){return e[t]===n?0:(e[t]=n,1)}function kit(e){var t=e.items[0].orient;return t===pc||t===yc}function Tit(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Dit(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=Tit(s),u=i.range,f=i.offset,c=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],g=i.titlePadding,v=i.bounds,y=p&&iN(p),b=0,w=0,E,A;switch(xa.clear().union(v),v.clear(),(E=l[0])>-1&&v.union(i.items[E].bounds),(E=l[1])>-1&&v.union(i.items[E].bounds),a){case l1:b=c||0,w=-f,A=Math.max(d,Math.min(h,-v.y1)),v.add(0,-A).add(u,0),p&&gA(e,p,A,g,y,0,-1,v);break;case pc:b=-f,w=c||0,A=Math.max(d,Math.min(h,-v.x1)),v.add(-A,0).add(0,u),p&&gA(e,p,A,g,y,1,-1,v);break;case yc:b=n+f,w=c||0,A=Math.max(d,Math.min(h,v.x2)),v.add(0,0).add(A,u),p&&gA(e,p,A,g,y,1,1,v);break;case Yp:b=c||0,w=r+f,A=Math.max(d,Math.min(h,v.y2)),v.add(0,0).add(u,A),p&&gA(e,p,A,g,0,0,1,v);break;default:b=i.x,w=i.y}return ph(v.translate(b,w),i),hv(i,"x",b+o)|hv(i,"y",w+o)&&(i.bounds=xa,e.dirty(i),i.bounds=v,e.dirty(i)),i.mark.bounds.clear().union(v)}function gA(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let f=0,c=0;e.dirty(t),s?f=(t.x||0)-(t.x=u):c=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-f,-c)),e.dirty(t)}a.union(l)}const lxe=(e,t)=>Math.floor(Math.min(e,t)),uxe=(e,t)=>Math.ceil(Math.max(e,t));function Lit(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===uL)switch(i.role){case yN:case bN:case vN:break;case DRe:o.rowheaders.push(...s);break;case LRe:o.rowfooters.push(...s);break;case FRe:o.colheaders.push(...s);break;case ORe:o.colfooters.push(...s);break;case RRe:o.rowtitle=s[0];break;case MRe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Rit(e){return new Qs().set(0,0,e.width||0,e.height||0)}function Fit(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function us(e,t,n){const r=$t(e)?e[t]:e;return r??(n!==void 0?n:0)}function cxe(e){return e<0?Math.ceil(-e):0}function qRe(e,t,n){var r=!n.nodirty,i=n.bounds===wN?Rit:Fit,s=xa.set(0,0,0,0),o=us(n.align,_p),a=us(n.align,Ep),l=us(n.padding,_p),u=us(n.padding,Ep),f=n.columns||t.length,c=f<=0?1:Math.ceil(t.length/f),d=t.length,h=Array(d),p=Array(f),g=0,v=Array(d),y=Array(c),b=0,w=Array(d),E=Array(d),A=Array(d),T,D,k,R,O,B,K,L,$,I,U;for(D=0;D<f;++D)p[D]=0;for(D=0;D<c;++D)y[D]=0;for(D=0;D<d;++D)B=t[D],O=A[D]=i(B),B.x=B.x||0,w[D]=0,B.y=B.y||0,E[D]=0,k=D%f,R=~~(D/f),g=Math.max(g,K=Math.ceil(O.x2)),b=Math.max(b,L=Math.ceil(O.y2)),p[k]=Math.max(p[k],K),y[R]=Math.max(y[R],L),h[D]=l+cxe(O.x1),v[D]=u+cxe(O.y1),r&&e.dirty(t[D]);for(D=0;D<d;++D)D%f===0&&(h[D]=0),D<f&&(v[D]=0);if(o===F6)for(k=1;k<f;++k){for(U=0,D=k;D<d;D+=f)U<h[D]&&(U=h[D]);for(D=k;D<d;D+=f)h[D]=U+p[k-1]}else if(o===pA){for(U=0,D=0;D<d;++D)D%f&&U<h[D]&&(U=h[D]);for(D=0;D<d;++D)D%f&&(h[D]=U+g)}else for(o=!1,k=1;k<f;++k)for(D=k;D<d;D+=f)h[D]+=p[k-1];if(a===F6)for(R=1;R<c;++R){for(U=0,D=R*f,T=D+f;D<T;++D)U<v[D]&&(U=v[D]);for(D=R*f;D<T;++D)v[D]=U+y[R-1]}else if(a===pA){for(U=0,D=f;D<d;++D)U<v[D]&&(U=v[D]);for(D=f;D<d;++D)v[D]=U+b}else for(a=!1,R=1;R<c;++R)for(D=R*f,T=D+f;D<T;++D)v[D]+=y[R-1];for($=0,D=0;D<d;++D)$=h[D]+(D%f?$:0),w[D]+=$-t[D].x;for(k=0;k<f;++k)for(I=0,D=k;D<d;D+=f)I+=v[D],E[D]+=I-t[D].y;if(o&&us(n.center,_p)&&c>1)for(D=0;D<d;++D)O=o===pA?g:p[D%f],$=O-A[D].x2-t[D].x-w[D],$>0&&(w[D]+=$/2);if(a&&us(n.center,Ep)&&f!==1)for(D=0;D<d;++D)O=a===pA?b:y[~~(D/f)],I=O-A[D].y2-t[D].y-E[D],I>0&&(E[D]+=I/2);for(D=0;D<d;++D)s.union(A[D].translate(w[D],E[D]));switch($=us(n.anchor,git),I=us(n.anchor,yit),us(n.anchor,_p)){case qa:$-=s.width();break;case R6:$-=s.width()/2}switch(us(n.anchor,Ep)){case qa:I-=s.height();break;case R6:I-=s.height()/2}for($=Math.round($),I=Math.round(I),s.clear(),D=0;D<d;++D)t[D].mark.bounds.clear();for(D=0;D<d;++D)B=t[D],B.x+=w[D]+=$,B.y+=E[D]+=I,s.union(B.mark.bounds.union(B.bounds.translate(w[D],E[D]))),r&&e.dirty(B);return s}function Oit(e,t,n){var r=Lit(t),i=r.marks,s=n.bounds===wN?Mit:$it,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,f,c,d,h,p,g,v;const y=qRe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=us(n.headerBand,Ep,null),f=yA(e,r.rowheaders,i,a,l,-us(o,"rowHeader"),lxe,0,s,"x1",0,a,1,g)),r.colheaders&&(g=us(n.headerBand,_p,null),c=yA(e,r.colheaders,i,a,a,-us(o,"columnHeader"),lxe,1,s,"y1",0,1,a,g)),r.rowfooters&&(g=us(n.footerBand,Ep,null),d=yA(e,r.rowfooters,i,a,l,us(o,"rowFooter"),uxe,0,s,"x2",a-1,a,1,g)),r.colfooters&&(g=us(n.footerBand,_p,null),h=yA(e,r.colfooters,i,a,a,us(o,"columnFooter"),uxe,1,s,"y2",u-a,1,a,g)),r.rowtitle&&(p=us(n.titleAnchor,Ep),v=us(o,"rowTitle"),v=p===qa?d+v:f-v,g=us(n.titleBand,Ep,.5),fxe(e,r.rowtitle,v,0,y,g)),r.coltitle&&(p=us(n.titleAnchor,_p),v=us(o,"columnTitle"),v=p===qa?h+v:c-v,g=us(n.titleBand,_p,.5),fxe(e,r.coltitle,v,1,y,g))}function Mit(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function $it(e,t){return e.bounds[t]}function yA(e,t,n,r,i,s,o,a,l,u,f,c,d,h){var p=n.length,g=0,v=0,y,b,w,E,A,T,D,k,R;if(!p)return g;for(y=f;y<p;y+=c)n[y]&&(g=o(g,l(n[y],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=f,b=0,E=t.length;b<E;++b,y+=c){for(T=t[b],A=T.mark.bounds,w=y;w>=0&&(D=n[w])==null;w-=d);a?(k=h==null?D.x:Math.round(D.bounds.x1+h*D.bounds.width()),R=g):(k=g,R=h==null?D.y:Math.round(D.bounds.y1+h*D.bounds.height())),A.union(T.bounds.translate(k-(T.x||0),R-(T.y||0))),T.x=k,T.y=R,e.dirty(T),v=o(v,A[u])}return v}function fxe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Iit(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Pit(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Nit(e,t,n,r,i,s,o){const a=Iit(n,t),l=Pit(e,a("offset",0)),u=a("anchor",gN),f=u===qa?1:u===R6?.5:0,c={align:F6,bounds:a("bounds",wN),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case pc:c.anchor={x:Math.floor(r.x1)-l,column:qa,y:f*(o||r.height()+2*r.y1),row:u};break;case yc:c.anchor={x:Math.ceil(r.x2)+l,y:f*(o||r.height()+2*r.y1),row:u};break;case l1:c.anchor={y:Math.floor(i.y1)-l,row:qa,x:f*(s||i.width()+2*i.x1),column:u};break;case Yp:c.anchor={y:Math.ceil(i.y2)+l,x:f*(s||i.width()+2*i.x1),column:u};break;case dit:c.anchor={x:l,y:l};break;case hit:c.anchor={x:s-l,y:l,column:qa};break;case pit:c.anchor={x:l,y:o-l,row:qa};break;case mit:c.anchor={x:s-l,y:o-l,column:qa,row:qa};break}return c}function Bit(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),jit(e,n,n.items[0].items[0]),s=zit(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===wit&&Uit(n.items[0].items[0].items[0].items),i!==xN&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,ph(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function zit(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function jit(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&hw(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,f=r-o.y;switch(o.orient){case pc:i+=Math.ceil(o.bounds.width())+l;break;case yc:case Yp:break;default:s+=o.bounds.height()+l}switch((i||s)&&hw(e,n,i,s),o.orient){case pc:f+=Py(t,n,o,a,1,1);break;case yc:u+=Py(t,n,o,qa,0,0)+l,f+=Py(t,n,o,a,1,1);break;case Yp:u+=Py(t,n,o,a,0,0),f+=Py(t,n,o,qa,-1,0,1)+l;break;default:u+=Py(t,n,o,a,0,0)}(u||f)&&hw(e,o,u,f),(u=Math.round(o.bounds.x1-r))<0&&(hw(e,n,-u,0),hw(e,o,-u,0))}}function Py(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,f=u.bounds[i?"y2":"x2"]-e.padding,c=l&&s?f:0,d=l&&s?0:f,h=i<=0?0:iN(n);return Math.round(r===gN?c:r===qa?d-h:.5*(f-h))}function hw(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Uit(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function qit(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,f=s.padding,c=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===pc||a===yc?r:n,p=0,g=0,v=0,y=0,b=0,w;if(o!==uL?a===pc?(p=i.y2,h=i.y1):a===yc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===pc&&(p=r,h=0),w=l===gN?p:l===qa?h:(p+h)/2,d&&d.text){switch(a){case l1:case Yp:b=c.bounds.height()+f;break;case pc:y=c.bounds.width()+f;break;case yc:y=-c.bounds.width()-f;break}xa.clear().union(d.bounds),xa.translate(y-(d.x||0),b-(d.y||0)),hv(d,"x",y)|hv(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(xa),d.mark.bounds.clear().union(xa),e.dirty(d)),xa.clear().union(d.bounds)}else xa.clear();switch(xa.union(c.bounds),a){case l1:g=w,v=i.y1-xa.height()-u;break;case pc:g=i.x1-xa.width()-u,v=w;break;case yc:g=i.x2+xa.width()+u,v=w;break;case Yp:g=w,v=i.y2+u;break;default:g=s.x,v=s.y}return hv(s,"x",g)|hv(s,"y",v)&&(xa.translate(g,v),e.dirty(s),s.bounds.clear().union(xa),t.bounds.clear().union(xa),e.dirty(s)),s.bounds}function HRe(e){rt.call(this,null,e)}Lt(HRe,rt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Oit(n,r,e.layout),Git(n,r,e)}),Hit(e.mark.group)?t.reflow():t}});function Hit(e){return e&&e.mark.role!=="legend-entry"}function Git(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Qs().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],f,c,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(c=r[p],c.role){case yN:h=kit(c)?a:l,h.union(Dit(e,c,i,s));break;case vN:f=c;break;case bN:u.push(Bit(e,c));break;case vit:case bit:case DRe:case LRe:case RRe:case FRe:case ORe:case MRe:a.union(c.bounds),l.union(c.bounds);break;default:o.union(c.bounds)}if(u.length){const v={};u.forEach(y=>{d=y.orient||yc,d!==xN&&(v[d]||(v[d]=[])).push(y)});for(const y in v){const b=v[y];qRe(e,b,Nit(b,y,n.legends,a,l,i,s))}u.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===$Re||n.autosize.type===IRe||n.autosize.type===PRe))switch(y.orient){case pc:case yc:o.add(b.x1,0).add(b.x2,0);break;case l1:case Yp:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(l),f&&o.union(qit(e,f,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Vit(e,t,o,n)}function Vit(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),c=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-f));if(i.contains===xit){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===xN?(u=0,c=0,l=o,f=a):s===$Re?(l=Math.max(0,o-u-d),f=Math.max(0,a-c-h)):s===IRe?(l=Math.max(0,o-u-d),a=f+c+h):s===PRe?(o=l+u+d,f=Math.max(0,a-c-h)):s===_it&&(o=l+u+d,a=f+c+h),e._resizeView(o,a,l,f,[u,c],i.resize)}const Wit=Object.freeze(Object.defineProperty({__proto__:null,bound:NRe,identifier:_N,mark:BRe,overlap:zRe,render:URe,viewlayout:HRe},Symbol.toStringTag,{value:"Module"}));function GRe(e){rt.call(this,null,e)}Lt(GRe,rt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=z8(s,o,e.minstep),l=e.format||vLe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?yLe(s,e.values,a):j8(s,a);return i&&(r.rem=i),i=u.map((f,c)=>yi({index:c/(u.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(yi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function VRe(e){rt.call(this,null,e)}function Yit(){return yi({})}function Xit(e){const t=eb().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Lt(VRe,rt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Yit,s=e.key||wn,o=this.value;return at(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&ot("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Xit(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function WRe(e){rt.call(this,null,e)}Lt(WRe,rt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(at(s))if(n.changed()||s.every(c=>i[c]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Qh,l=i.enter||Qh,u=i.exit||Qh,f=(s&&!o?i[s]:a)||Qh;if(t.changed(t.ADD)&&(t.visit(t.ADD,c=>{l(c,e),a(c,e)}),n.modifies(l.output),n.modifies(a.output),f!==Qh&&f!==a&&(t.visit(t.ADD,c=>{f(c,e)}),n.modifies(f.output))),t.changed(t.REM)&&u!==Qh&&(t.visit(t.REM,c=>{u(c,e)}),n.modifies(u.output)),o||f!==Qh){const c=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(c,d=>{const h=l(d,e)||r;(f(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(c,d=>{(f(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function YRe(e){rt.call(this,[],e)}Lt(YRe,rt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||wC,o=e.scale,a=+e.limit,l=z8(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===wC,f=e.format||_Le(n,o,l,s,e.formatSpecifier,e.formatType,u),c=e.values||wLe(o,l),d,h,p,g,v;return i&&(r.rem=i),s===wC?(a&&c.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=c.slice(0,a-1),v=!0):i=c,ir(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=Fa(g=p||8),i=i.map((y,b)=>yi({index:b,label:f(y,b,i),value:y,offset:g,size:p(y,e)})),v&&(v=c[i.length],i.push(yi({index:i.length,label:`${c.length-i.length} entries`,value:v,offset:g,size:p(v,e)})))):s===_tt?(d=o.domain(),h=pLe(o,d[0],qr(d)),c.length<3&&!e.values&&d[0]!==qr(d)&&(c=[d[0],qr(d)]),i=c.map((y,b)=>yi({index:b,label:f(y,b,c),value:y,perc:h(y)}))):(p=c.length-1,h=Ott(o),i=c.map((y,b)=>yi({index:b,label:f(y,b,c),value:y,perc:b?h(y):0,perc2:b===p?1:h(c[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const Zit=e=>e.source.x,Kit=e=>e.source.y,Jit=e=>e.target.x,Qit=e=>e.target.y;function EN(e){rt.call(this,{},e)}EN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Lt(EN,rt,{transform(e,t){var n=e.sourceX||Zit,r=e.sourceY||Kit,i=e.targetX||Jit,s=e.targetY||Qit,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=dxe.get(l+"-"+a)||dxe.get(l);return u||ot("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[o]=u(n(f),r(f),i(f),s(f))}),t.reflow(e.modified()).modifies(o)}});const XRe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,est=(e,t,n,r)=>XRe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ZRe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},tst=(e,t,n,r)=>ZRe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),KRe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},nst=(e,t,n,r)=>KRe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),rst=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,ist=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,sst=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},ost=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ast=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},lst=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},dxe=eb({line:XRe,"line-radial":est,arc:ZRe,"arc-radial":tst,curve:KRe,"curve-radial":nst,"orthogonal-horizontal":rst,"orthogonal-vertical":ist,"orthogonal-radial":sst,"diagonal-horizontal":ost,"diagonal-vertical":ast,"diagonal-radial":lst});function SN(e){rt.call(this,null,e)}SN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Lt(SN,rt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||K1,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),f=u.length,c=o,d=(a-o)/n3e(u),h=Kl(f),p,g,v;for(e.sort&&h.sort((y,b)=>u[y]-u[b]),p=0;p<f;++p)v=u[h[p]],g=l[h[p]],g[r]=c,g[i]=c+=v*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const ust=5;function cst(e){const t=e.type;return!e.bins&&(t===n1||t===gE||t===yE)}function JRe(e){return P8(e)&&e!==Af}const fst=Tc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function QRe(e){rt.call(this,null,e),this.modified(!0)}Lt(QRe,rt,{transform(e,t){var n=t.dataflow,r=this.value,i=dst(e);(!r||i!==r.type)&&(this.value=r=ui(i)());for(i in e)if(!fst[i]){if(i==="padding"&&JRe(r.type))continue;ir(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return vst(r,e,yst(r,e,pst(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function dst(e){var t=e.type,n="",r;return t===Af?Af+"-"+n1:(hst(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Af+"-":r===3?ib+"-":""),(n+t||n1).toLowerCase())}function hst(e){const t=e.type;return P8(t)&&t!==e0&&t!==t0&&(e.scheme||e.range&&e.range.length&&e.range.every(Nt))}function pst(e,t,n){const r=mst(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&cst(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return JRe(s)&&t.padding&&i[0]!==qr(i)&&(i=gst(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(eFe(s,i,n)),s===O8&&e.unknown(t.domainImplicit?jze:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&z8(e,t.nice)||null),i.length}function mst(e,t,n){return t?(e.domain(eFe(e.type,t,n)),t.length):-1}function gst(e,t,n,r,i,s){var o=Math.abs(qr(n)-n[0]),a=o/(o-2*r),l=e===rh?xP(t,null,a):e===yE?A3(t,null,a,.5):e===gE?A3(t,null,a,i||1):e===YD?wP(t,null,a,s||1):bP(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function eFe(e,t,n){if(uLe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Tt(t))}return t}function yst(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),s=i[0],o=qr(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||ot("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=Kl(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===M8&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function vst(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=bst(r,t,n);else if(t.scheme&&(s=xst(r,t,n),ir(s))){if(e.interpolator)return e.interpolator(s);ot(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&cLe(r))return e.interpolator(KD(O6(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(N8(t.interpolate,t.interpolateGamma)):ir(e.round)?e.round(i):ir(e.rangeRound)&&e.interpolate(i?aI:oI),s&&e.range(O6(s,t.reverse))}function bst(e,t,n){e!==rLe&&e!==v6&&ot("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===v6?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*F8(n,i,r)]}function xst(e,t,n){var r=t.schemeExtent,i,s;return at(t.scheme)?s=KD(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=B8(i),s||ot(`Unrecognized scheme name: ${t.scheme}`)),n=e===ZD?n+1:e===M8?n-1:e===r1||e===XD?+t.schemeCount||ust:n,cLe(e)?hxe(s,r,t.reverse):ir(s)?hLe(hxe(s,r),n):e===O8?s:s.slice(0,n)}function hxe(e,t,n){return ir(e)&&(t||n)?dLe(e,O6(t||[0,1],n)):e}function O6(e,t){return t?e.slice().reverse():e}function tFe(e){rt.call(this,null,e)}Lt(tFe,rt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(L0(e.sort)),this.modified(n),t}});const pxe="zero",nFe="center",rFe="normalize",iFe=["y0","y1"];function AN(e){rt.call(this,null,e)}AN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:pxe,values:[pxe,nFe,rFe]},{name:"as",type:"string",array:!0,length:2,default:iFe}]};Lt(AN,rt,{transform(e,t){var n=e.as||iFe,r=n[0],i=n[1],s=L0(e.sort),o=e.field||K1,a=e.offset===nFe?wst:e.offset===rFe?_st:Est,l,u,f,c;for(l=Sst(t.source,e.groupby,s,o),u=0,f=l.length,c=l.max;u<f;++u)a(l[u],c,o,r,i);return t.reflow(e.modified()).modifies(n)}});function wst(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function _st(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,f;l<a;++l)f=e[l],f[r]=o,f[i]=o=s*(u+=Math.abs(n(f)))}function Est(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,f;l<a;++l)f=e[l],u=+n(f),u<0?(f[r]=o,f[i]=o+=u):(f[r]=s,f[i]=s+=u)}function Sst(e,t,n,r){var i=[],s=g=>g(f),o,a,l,u,f,c,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)f=e[a],c=t.map(s),d=o[c],d||(o[c]=d=[],i.push(d)),d.push(f);for(c=0,p=0,u=i.length;c<u;++c){for(d=i[c],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Ast=Object.freeze(Object.defineProperty({__proto__:null,axisticks:GRe,datajoin:VRe,encode:WRe,legendentries:YRe,linkpath:EN,pie:SN,scale:QRe,sortitems:tFe,stack:AN},Symbol.toStringTag,{value:"Module"}));var Cn=1e-6,V3=1e-12,wr=Math.PI,Ls=wr/2,W3=wr/4,el=wr*2,Is=180/wr,gr=wr/180,Ur=Math.abs,ob=Math.atan,Nu=Math.atan2,Dn=Math.cos,vA=Math.ceil,sFe=Math.exp,M6=Math.hypot,Y3=Math.log,RF=Math.pow,En=Math.sin,Tu=Math.sign||function(e){return e>0?1:e<0?-1:0},tl=Math.sqrt,CN=Math.tan;function oFe(e){return e>1?0:e<-1?wr:Math.acos(e)}function Ml(e){return e>1?Ls:e<-1?-Ls:Math.asin(e)}function Jo(){}function X3(e,t){e&&gxe.hasOwnProperty(e.type)&&gxe[e.type](e,t)}var mxe={Feature:function(e,t){X3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)X3(n[r].geometry,t)}},gxe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){$6(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$6(n[r],t,0)},Polygon:function(e,t){yxe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)yxe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)X3(n[r],t)}};function $6(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function yxe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)$6(e[n],t,1);t.polygonEnd()}function Md(e,t){e&&mxe.hasOwnProperty(e.type)?mxe[e.type](e,t):X3(e,t)}var Z3=new Ja,K3=new Ja,aFe,lFe,I6,P6,N6,Pf={point:Jo,lineStart:Jo,lineEnd:Jo,polygonStart:function(){Z3=new Ja,Pf.lineStart=Cst,Pf.lineEnd=kst},polygonEnd:function(){var e=+Z3;K3.add(e<0?el+e:e),this.lineStart=this.lineEnd=this.point=Jo},sphere:function(){K3.add(el)}};function Cst(){Pf.point=Tst}function kst(){uFe(aFe,lFe)}function Tst(e,t){Pf.point=uFe,aFe=e,lFe=t,e*=gr,t*=gr,I6=e,P6=Dn(t=t/2+W3),N6=En(t)}function uFe(e,t){e*=gr,t*=gr,t=t/2+W3;var n=e-I6,r=n>=0?1:-1,i=r*n,s=Dn(t),o=En(t),a=N6*o,l=P6*s+a*Dn(i),u=a*r*En(i);Z3.add(Nu(u,l)),I6=e,P6=s,N6=o}function Dst(e){return K3=new Ja,Md(e,Pf),K3*2}function J3(e){return[Nu(e[1],e[0]),Ml(e[2])]}function r0(e){var t=e[0],n=e[1],r=Dn(n);return[r*Dn(t),r*En(t),En(n)]}function bA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function u1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function FF(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function xA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Q3(e){var t=tl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var gs,El,Cs,Wl,_g,cFe,fFe,Av,x_,sp,ih,Ld={point:B6,lineStart:vxe,lineEnd:bxe,polygonStart:function(){Ld.point=hFe,Ld.lineStart=Lst,Ld.lineEnd=Rst,x_=new Ja,Pf.polygonStart()},polygonEnd:function(){Pf.polygonEnd(),Ld.point=B6,Ld.lineStart=vxe,Ld.lineEnd=bxe,Z3<0?(gs=-(Cs=180),El=-(Wl=90)):x_>Cn?Wl=90:x_<-Cn&&(El=-90),ih[0]=gs,ih[1]=Cs},sphere:function(){gs=-(Cs=180),El=-(Wl=90)}};function B6(e,t){sp.push(ih=[gs=e,Cs=e]),t<El&&(El=t),t>Wl&&(Wl=t)}function dFe(e,t){var n=r0([e*gr,t*gr]);if(Av){var r=u1(Av,n),i=[r[1],-r[0],0],s=u1(i,r);Q3(s),s=J3(s);var o=e-_g,a=o>0?1:-1,l=s[0]*Is*a,u,f=Ur(o)>180;f^(a*_g<l&&l<a*e)?(u=s[1]*Is,u>Wl&&(Wl=u)):(l=(l+360)%360-180,f^(a*_g<l&&l<a*e)?(u=-s[1]*Is,u<El&&(El=u)):(t<El&&(El=t),t>Wl&&(Wl=t))),f?e<_g?Gl(gs,e)>Gl(gs,Cs)&&(Cs=e):Gl(e,Cs)>Gl(gs,Cs)&&(gs=e):Cs>=gs?(e<gs&&(gs=e),e>Cs&&(Cs=e)):e>_g?Gl(gs,e)>Gl(gs,Cs)&&(Cs=e):Gl(e,Cs)>Gl(gs,Cs)&&(gs=e)}else sp.push(ih=[gs=e,Cs=e]);t<El&&(El=t),t>Wl&&(Wl=t),Av=n,_g=e}function vxe(){Ld.point=dFe}function bxe(){ih[0]=gs,ih[1]=Cs,Ld.point=B6,Av=null}function hFe(e,t){if(Av){var n=e-_g;x_.add(Ur(n)>180?n+(n>0?360:-360):n)}else cFe=e,fFe=t;Pf.point(e,t),dFe(e,t)}function Lst(){Pf.lineStart()}function Rst(){hFe(cFe,fFe),Pf.lineEnd(),Ur(x_)>Cn&&(gs=-(Cs=180)),ih[0]=gs,ih[1]=Cs,Av=null}function Gl(e,t){return(t-=e)<0?t+360:t}function Fst(e,t){return e[0]-t[0]}function xxe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Ost(e){var t,n,r,i,s,o,a;if(Wl=Cs=-(gs=El=1/0),sp=[],Md(e,Ld),n=sp.length){for(sp.sort(Fst),t=1,r=sp[0],s=[r];t<n;++t)i=sp[t],xxe(r,i[0])||xxe(r,i[1])?(Gl(r[0],i[1])>Gl(r[0],r[1])&&(r[1]=i[1]),Gl(i[0],r[1])>Gl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Gl(r[1],i[0]))>o&&(o=a,gs=i[0],Cs=r[1])}return sp=ih=null,gs===1/0||El===1/0?[[NaN,NaN],[NaN,NaN]]:[[gs,El],[Cs,Wl]]}var Hw,ek,tk,nk,rk,ik,sk,ok,z6,j6,U6,pFe,mFe,Ha,Ga,Va,vc={sphere:Jo,point:kN,lineStart:wxe,lineEnd:_xe,polygonStart:function(){vc.lineStart=Ist,vc.lineEnd=Pst},polygonEnd:function(){vc.lineStart=wxe,vc.lineEnd=_xe}};function kN(e,t){e*=gr,t*=gr;var n=Dn(t);DE(n*Dn(e),n*En(e),En(t))}function DE(e,t,n){++Hw,tk+=(e-tk)/Hw,nk+=(t-nk)/Hw,rk+=(n-rk)/Hw}function wxe(){vc.point=Mst}function Mst(e,t){e*=gr,t*=gr;var n=Dn(t);Ha=n*Dn(e),Ga=n*En(e),Va=En(t),vc.point=$st,DE(Ha,Ga,Va)}function $st(e,t){e*=gr,t*=gr;var n=Dn(t),r=n*Dn(e),i=n*En(e),s=En(t),o=Nu(tl((o=Ga*s-Va*i)*o+(o=Va*r-Ha*s)*o+(o=Ha*i-Ga*r)*o),Ha*r+Ga*i+Va*s);ek+=o,ik+=o*(Ha+(Ha=r)),sk+=o*(Ga+(Ga=i)),ok+=o*(Va+(Va=s)),DE(Ha,Ga,Va)}function _xe(){vc.point=kN}function Ist(){vc.point=Nst}function Pst(){gFe(pFe,mFe),vc.point=kN}function Nst(e,t){pFe=e,mFe=t,e*=gr,t*=gr,vc.point=gFe;var n=Dn(t);Ha=n*Dn(e),Ga=n*En(e),Va=En(t),DE(Ha,Ga,Va)}function gFe(e,t){e*=gr,t*=gr;var n=Dn(t),r=n*Dn(e),i=n*En(e),s=En(t),o=Ga*s-Va*i,a=Va*r-Ha*s,l=Ha*i-Ga*r,u=M6(o,a,l),f=Ml(u),c=u&&-f/u;z6.add(c*o),j6.add(c*a),U6.add(c*l),ek+=f,ik+=f*(Ha+(Ha=r)),sk+=f*(Ga+(Ga=i)),ok+=f*(Va+(Va=s)),DE(Ha,Ga,Va)}function Bst(e){Hw=ek=tk=nk=rk=ik=sk=ok=0,z6=new Ja,j6=new Ja,U6=new Ja,Md(e,vc);var t=+z6,n=+j6,r=+U6,i=M6(t,n,r);return i<V3&&(t=ik,n=sk,r=ok,ek<Cn&&(t=tk,n=nk,r=rk),i=M6(t,n,r),i<V3)?[NaN,NaN]:[Nu(n,t)*Is,Ml(r/i)*Is]}function q6(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function H6(e,t){return Ur(e)>wr&&(e-=Math.round(e/el)*el),[e,t]}H6.invert=H6;function yFe(e,t,n){return(e%=el)?t||n?q6(Sxe(e),Axe(t,n)):Sxe(e):t||n?Axe(t,n):H6}function Exe(e){return function(t,n){return t+=e,Ur(t)>wr&&(t-=Math.round(t/el)*el),[t,n]}}function Sxe(e){var t=Exe(e);return t.invert=Exe(-e),t}function Axe(e,t){var n=Dn(e),r=En(e),i=Dn(t),s=En(t);function o(a,l){var u=Dn(l),f=Dn(a)*u,c=En(a)*u,d=En(l),h=d*n+f*r;return[Nu(c*i-h*s,f*n-d*r),Ml(h*i+c*s)]}return o.invert=function(a,l){var u=Dn(l),f=Dn(a)*u,c=En(a)*u,d=En(l),h=d*i-c*s;return[Nu(c*i+d*s,f*n+h*r),Ml(h*n-f*r)]},o}function zst(e){e=yFe(e[0]*gr,e[1]*gr,e.length>2?e[2]*gr:0);function t(n){return n=e(n[0]*gr,n[1]*gr),n[0]*=Is,n[1]*=Is,n}return t.invert=function(n){return n=e.invert(n[0]*gr,n[1]*gr),n[0]*=Is,n[1]*=Is,n},t}function jst(e,t,n,r,i,s){if(n){var o=Dn(t),a=En(t),l=r*n;i==null?(i=t+r*el,s=t-l/2):(i=Cxe(o,i),s=Cxe(o,s),(r>0?i<s:i>s)&&(i+=r*el));for(var u,f=i;r>0?f>s:f<s;f-=l)u=J3([o,-a*Dn(f),-a*En(f)]),e.point(u[0],u[1])}}function Cxe(e,t){t=r0(t),t[0]-=e,Q3(t);var n=oFe(-t[1]);return((-t[2]<0?-n:n)+el-Cn)%el}function vFe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Jo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function LC(e,t){return Ur(e[0]-t[0])<Cn&&Ur(e[1]-t[1])<Cn}function wA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function bFe(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],y=p[g],b;if(LC(v,y)){if(!v[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((v=p[a])[0],v[1]);i.lineEnd();return}y[0]+=2*Cn}s.push(b=new wA(v,p,null,!0)),o.push(b.o=new wA(v,null,b,!1)),s.push(b=new wA(y,p,null,!1)),o.push(b.o=new wA(y,null,b,!0))}}),!!s.length){for(o.sort(t),kxe(s),kxe(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],f,c;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=f.length;a<l;++a)i.point((c=f[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,h=!h}while(!d.v);i.lineEnd()}}}function kxe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function OF(e){return Ur(e[0])<=wr?e[0]:Tu(e[0])*((Ur(e[0])+wr)%el-wr)}function Ust(e,t){var n=OF(t),r=t[1],i=En(r),s=[En(n),-Dn(n),0],o=0,a=0,l=new Ja;i===1?r=Ls+Cn:i===-1&&(r=-Ls-Cn);for(var u=0,f=e.length;u<f;++u)if(d=(c=e[u]).length)for(var c,d,h=c[d-1],p=OF(h),g=h[1]/2+W3,v=En(g),y=Dn(g),b=0;b<d;++b,p=E,v=T,y=D,h=w){var w=c[b],E=OF(w),A=w[1]/2+W3,T=En(A),D=Dn(A),k=E-p,R=k>=0?1:-1,O=R*k,B=O>wr,K=v*T;if(l.add(Nu(K*R*En(O),y*D+K*Dn(O))),o+=B?k+R*el:k,B^p>=n^E>=n){var L=u1(r0(h),r0(w));Q3(L);var $=u1(s,L);Q3($);var I=(B^k>=0?-1:1)*Ml($[2]);(r>I||r===I&&(L[0]||L[1]))&&(a+=B^k>=0?1:-1)}}return(o<-Cn||o<Cn&&l<-V3)^a&1}function xFe(e,t,n,r){return function(i){var s=t(i),o=vFe(),a=t(o),l=!1,u,f,c,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=w,f=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,f=t3e(f);var E=Ust(u,r);f.length?(l||(i.polygonStart(),l=!0),bFe(f,Hst,E,n,i)):E&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,A){e(E,A)&&i.point(E,A)}function p(E,A){s.point(E,A)}function g(){d.point=p,s.lineStart()}function v(){d.point=h,s.lineEnd()}function y(E,A){c.push([E,A]),a.point(E,A)}function b(){a.lineStart(),c=[]}function w(){y(c[0][0],c[0][1]),a.lineEnd();var E=a.clean(),A=o.result(),T,D=A.length,k,R,O;if(c.pop(),u.push(c),c=null,!!D){if(E&1){if(R=A[0],(k=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),T=0;T<k;++T)i.point((O=R[T])[0],O[1]);i.lineEnd()}return}D>1&&E&2&&A.push(A.pop().concat(A.shift())),f.push(A.filter(qst))}}return d}}function qst(e){return e.length>1}function Hst(e,t){return((e=e.x)[0]<0?e[1]-Ls-Cn:Ls-e[1])-((t=t.x)[0]<0?t[1]-Ls-Cn:Ls-t[1])}const Txe=xFe(function(){return!0},Gst,Wst,[-wr,-Ls]);function Gst(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?wr:-wr,l=Ur(s-t);Ur(l-wr)<Cn?(e.point(t,n=(n+o)/2>0?Ls:-Ls),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=wr&&(Ur(t-r)<Cn&&(t-=r*Cn),Ur(s-a)<Cn&&(s-=a*Cn),n=Vst(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Vst(e,t,n,r){var i,s,o=En(e-n);return Ur(o)>Cn?ob((En(t)*(s=Dn(r))*En(n)-En(r)*(i=Dn(t))*En(e))/(i*s*o)):(t+r)/2}function Wst(e,t,n,r){var i;if(e==null)i=n*Ls,r.point(-wr,i),r.point(0,i),r.point(wr,i),r.point(wr,0),r.point(wr,-i),r.point(0,-i),r.point(-wr,-i),r.point(-wr,0),r.point(-wr,i);else if(Ur(e[0]-t[0])>Cn){var s=e[0]<t[0]?wr:-wr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Yst(e){var t=Dn(e),n=2*gr,r=t>0,i=Ur(t)>Cn;function s(f,c,d,h){jst(h,e,n,d,f,c)}function o(f,c){return Dn(f)*Dn(c)>t}function a(f){var c,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,y){var b=[v,y],w,E=o(v,y),A=r?E?0:u(v,y):E?u(v+(v<0?wr:-wr),y):0;if(!c&&(p=h=E)&&f.lineStart(),E!==h&&(w=l(c,b),(!w||LC(c,w)||LC(b,w))&&(b[2]=1)),E!==h)g=0,E?(f.lineStart(),w=l(b,c),f.point(w[0],w[1])):(w=l(c,b),f.point(w[0],w[1],2),f.lineEnd()),c=w;else if(i&&c&&r^E){var T;!(A&d)&&(T=l(b,c,!0))&&(g=0,r?(f.lineStart(),f.point(T[0][0],T[0][1]),f.point(T[1][0],T[1][1]),f.lineEnd()):(f.point(T[1][0],T[1][1]),f.lineEnd(),f.lineStart(),f.point(T[0][0],T[0][1],3)))}E&&(!c||!LC(c,b))&&f.point(b[0],b[1]),c=b,h=E,d=A},lineEnd:function(){h&&f.lineEnd(),c=null},clean:function(){return g|(p&&h)<<1}}}function l(f,c,d){var h=r0(f),p=r0(c),g=[1,0,0],v=u1(h,p),y=bA(v,v),b=v[0],w=y-b*b;if(!w)return!d&&f;var E=t*y/w,A=-t*b/w,T=u1(g,v),D=xA(g,E),k=xA(v,A);FF(D,k);var R=T,O=bA(D,R),B=bA(R,R),K=O*O-B*(bA(D,D)-1);if(!(K<0)){var L=tl(K),$=xA(R,(-O-L)/B);if(FF($,D),$=J3($),!d)return $;var I=f[0],U=c[0],q=f[1],Y=c[1],X;U<I&&(X=I,I=U,U=X);var te=U-I,le=Ur(te-wr)<Cn,ee=le||te<Cn;if(!le&&Y<q&&(X=q,q=Y,Y=X),ee?le?q+Y>0^$[1]<(Ur($[0]-I)<Cn?q:Y):q<=$[1]&&$[1]<=Y:te>wr^(I<=$[0]&&$[0]<=U)){var z=xA(R,(-O+L)/B);return FF(z,D),[$,J3(z)]}}}function u(f,c){var d=r?e:wr-e,h=0;return f<-d?h|=1:f>d&&(h|=2),c<-d?h|=4:c>d&&(h|=8),h}return xFe(o,a,s,r?[0,-e]:[-wr,e-wr])}function Xst(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],f=0,c=1,d=l-o,h=u-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<f)return;p<c&&(c=p)}else if(d>0){if(p>c)return;p>f&&(f=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>c)return;p>f&&(f=p)}else if(d>0){if(p<f)return;p<c&&(c=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<f)return;p<c&&(c=p)}else if(h>0){if(p>c)return;p>f&&(f=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>c)return;p>f&&(f=p)}else if(h>0){if(p<f)return;p<c&&(c=p)}return f>0&&(e[0]=o+f*d,e[1]=a+f*h),c<1&&(t[0]=o+c*d,t[1]=a+c*h),!0}}}}}var Gw=1e9,_A=-Gw;function wFe(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function s(u,f,c,d){var h=0,p=0;if(u==null||(h=o(u,c))!==(p=o(f,c))||l(u,f)<0^c>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+c+4)%4)!==p);else d.point(f[0],f[1])}function o(u,f){return Ur(u[0]-e)<Cn?f>0?0:3:Ur(u[0]-n)<Cn?f>0?2:1:Ur(u[1]-t)<Cn?f>0?1:0:f>0?3:2}function a(u,f){return l(u.x,f.x)}function l(u,f){var c=o(u,1),d=o(f,1);return c!==d?c-d:c===0?f[1]-u[1]:c===1?u[0]-f[0]:c===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,c=vFe(),d,h,p,g,v,y,b,w,E,A,T,D={point:k,lineStart:K,lineEnd:L,polygonStart:O,polygonEnd:B};function k(I,U){i(I,U)&&f.point(I,U)}function R(){for(var I=0,U=0,q=h.length;U<q;++U)for(var Y=h[U],X=1,te=Y.length,le=Y[0],ee,z,he=le[0],de=le[1];X<te;++X)ee=he,z=de,le=Y[X],he=le[0],de=le[1],z<=r?de>r&&(he-ee)*(r-z)>(de-z)*(e-ee)&&++I:de<=r&&(he-ee)*(r-z)<(de-z)*(e-ee)&&--I;return I}function O(){f=c,d=[],h=[],T=!0}function B(){var I=R(),U=T&&I,q=(d=t3e(d)).length;(U||q)&&(u.polygonStart(),U&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),q&&bFe(d,a,I,s,u),u.polygonEnd()),f=u,d=h=p=null}function K(){D.point=$,h&&h.push(p=[]),A=!0,E=!1,b=w=NaN}function L(){d&&($(g,v),y&&E&&c.rejoin(),d.push(c.result())),D.point=k,E&&f.lineEnd()}function $(I,U){var q=i(I,U);if(h&&p.push([I,U]),A)g=I,v=U,y=q,A=!1,q&&(f.lineStart(),f.point(I,U));else if(q&&E)f.point(I,U);else{var Y=[b=Math.max(_A,Math.min(Gw,b)),w=Math.max(_A,Math.min(Gw,w))],X=[I=Math.max(_A,Math.min(Gw,I)),U=Math.max(_A,Math.min(Gw,U))];Xst(Y,X,e,t,n,r)?(E||(f.lineStart(),f.point(Y[0],Y[1])),f.point(X[0],X[1]),q||f.lineEnd(),T=!1):q&&(f.lineStart(),f.point(I,U),T=!1)}b=I,w=U,E=q}return D}}function Dxe(e,t,n){var r=Kl(e,t-Cn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Lxe(e,t,n){var r=Kl(e,t-Cn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Zst(){var e,t,n,r,i,s,o,a,l=10,u=l,f=90,c=360,d,h,p,g,v=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Kl(vA(r/f)*f,n,f).map(p).concat(Kl(vA(a/c)*c,o,c).map(g)).concat(Kl(vA(t/l)*l,e,l).filter(function(w){return Ur(w%f)>Cn}).map(d)).concat(Kl(vA(s/u)*u,i,u).filter(function(w){return Ur(w%c)>Cn}).map(h))}return y.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(w){return arguments.length?y.extentMajor(w).extentMinor(w):y.extentMinor()},y.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),y.precision(v)):[[r,a],[n,o]]},y.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),y.precision(v)):[[t,s],[e,i]]},y.step=function(w){return arguments.length?y.stepMajor(w).stepMinor(w):y.stepMinor()},y.stepMajor=function(w){return arguments.length?(f=+w[0],c=+w[1],y):[f,c]},y.stepMinor=function(w){return arguments.length?(l=+w[0],u=+w[1],y):[l,u]},y.precision=function(w){return arguments.length?(v=+w,d=Dxe(s,i,90),h=Lxe(t,e,v),p=Dxe(a,o,90),g=Lxe(r,n,v),y):v},y.extentMajor([[-180,-90+Cn],[180,90-Cn]]).extentMinor([[-180,-80-Cn],[180,80+Cn]])}const u2=e=>e;var MF=new Ja,G6=new Ja,_Fe,EFe,V6,W6,$d={point:Jo,lineStart:Jo,lineEnd:Jo,polygonStart:function(){$d.lineStart=Kst,$d.lineEnd=Qst},polygonEnd:function(){$d.lineStart=$d.lineEnd=$d.point=Jo,MF.add(Ur(G6)),G6=new Ja},result:function(){var e=MF/2;return MF=new Ja,e}};function Kst(){$d.point=Jst}function Jst(e,t){$d.point=SFe,_Fe=V6=e,EFe=W6=t}function SFe(e,t){G6.add(W6*e-V6*t),V6=e,W6=t}function Qst(){SFe(_Fe,EFe)}var c1=1/0,ak=c1,c2=-c1,lk=c2,uk={point:eot,lineStart:Jo,lineEnd:Jo,polygonStart:Jo,polygonEnd:Jo,result:function(){var e=[[c1,ak],[c2,lk]];return c2=lk=-(ak=c1=1/0),e}};function eot(e,t){e<c1&&(c1=e),e>c2&&(c2=e),t<ak&&(ak=t),t>lk&&(lk=t)}var Y6=0,X6=0,Vw=0,ck=0,fk=0,pv=0,Z6=0,K6=0,Ww=0,AFe,CFe,yf,vf,Su={point:i0,lineStart:Rxe,lineEnd:Fxe,polygonStart:function(){Su.lineStart=rot,Su.lineEnd=iot},polygonEnd:function(){Su.point=i0,Su.lineStart=Rxe,Su.lineEnd=Fxe},result:function(){var e=Ww?[Z6/Ww,K6/Ww]:pv?[ck/pv,fk/pv]:Vw?[Y6/Vw,X6/Vw]:[NaN,NaN];return Y6=X6=Vw=ck=fk=pv=Z6=K6=Ww=0,e}};function i0(e,t){Y6+=e,X6+=t,++Vw}function Rxe(){Su.point=tot}function tot(e,t){Su.point=not,i0(yf=e,vf=t)}function not(e,t){var n=e-yf,r=t-vf,i=tl(n*n+r*r);ck+=i*(yf+e)/2,fk+=i*(vf+t)/2,pv+=i,i0(yf=e,vf=t)}function Fxe(){Su.point=i0}function rot(){Su.point=sot}function iot(){kFe(AFe,CFe)}function sot(e,t){Su.point=kFe,i0(AFe=yf=e,CFe=vf=t)}function kFe(e,t){var n=e-yf,r=t-vf,i=tl(n*n+r*r);ck+=i*(yf+e)/2,fk+=i*(vf+t)/2,pv+=i,i=vf*e-yf*t,Z6+=i*(yf+e),K6+=i*(vf+t),Ww+=i*3,i0(yf=e,vf=t)}function TFe(e){this._context=e}TFe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,el);break}}},result:Jo};var J6=new Ja,$F,DFe,LFe,Yw,Xw,f2={point:Jo,lineStart:function(){f2.point=oot},lineEnd:function(){$F&&RFe(DFe,LFe),f2.point=Jo},polygonStart:function(){$F=!0},polygonEnd:function(){$F=null},result:function(){var e=+J6;return J6=new Ja,e}};function oot(e,t){f2.point=RFe,DFe=Yw=e,LFe=Xw=t}function RFe(e,t){Yw-=e,Xw-=t,J6.add(tl(Yw*Yw+Xw*Xw)),Yw=e,Xw=t}let Oxe,dk,Mxe,$xe;class Ixe{constructor(t){this._append=t==null?FFe:aot(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Mxe||this._append!==dk){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Mxe=r,dk=this._append,$xe=this._,this._=i}this._+=$xe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function FFe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function aot(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return FFe;if(t!==Oxe){const n=10**t;Oxe=t,dk=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return dk}function OFe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Md(a,i(s))),s.result()}return o.area=function(a){return Md(a,i($d)),$d.result()},o.measure=function(a){return Md(a,i(f2)),f2.result()},o.bounds=function(a){return Md(a,i(uk)),uk.result()},o.centroid=function(a){return Md(a,i(Su)),Su.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,u2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Ixe(n)):new TFe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new Ixe(n)),o},o.projection(e).digits(n).context(t)}function cL(e){return function(t){var n=new Q6;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Q6(){}Q6.prototype={constructor:Q6,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function TN(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Md(n,e.stream(uk)),t(uk.result()),r!=null&&e.clipExtent(r),e}function fL(e,t,n){return TN(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function DN(e,t,n){return fL(e,[[0,0],t],n)}function LN(e,t,n){return TN(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function RN(e,t,n){return TN(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Pxe=16,lot=Dn(30*gr);function Nxe(e,t){return+t?cot(e,t):uot(e)}function uot(e){return cL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function cot(e,t){function n(r,i,s,o,a,l,u,f,c,d,h,p,g,v){var y=u-r,b=f-i,w=y*y+b*b;if(w>4*t&&g--){var E=o+d,A=a+h,T=l+p,D=tl(E*E+A*A+T*T),k=Ml(T/=D),R=Ur(Ur(T)-1)<Cn||Ur(s-c)<Cn?(s+c)/2:Nu(A,E),O=e(R,k),B=O[0],K=O[1],L=B-r,$=K-i,I=b*L-y*$;(I*I/w>t||Ur((y*L+b*$)/w-.5)>.3||o*d+a*h+l*p<lot)&&(n(r,i,s,o,a,l,B,K,R,E/=D,A/=D,T,g,v),v.point(B,K),n(B,K,R,E,A,T,u,f,c,d,h,p,g,v))}}return function(r){var i,s,o,a,l,u,f,c,d,h,p,g,v={point:y,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),v.lineStart=A},polygonEnd:function(){r.polygonEnd(),v.lineStart=b}};function y(k,R){k=e(k,R),r.point(k[0],k[1])}function b(){c=NaN,v.point=w,r.lineStart()}function w(k,R){var O=r0([k,R]),B=e(k,R);n(c,d,f,h,p,g,c=B[0],d=B[1],f=k,h=O[0],p=O[1],g=O[2],Pxe,r),r.point(c,d)}function E(){v.point=y,r.lineEnd()}function A(){b(),v.point=T,v.lineEnd=D}function T(k,R){w(i=k,R),s=c,o=d,a=h,l=p,u=g,v.point=w}function D(){n(c,d,f,h,p,g,s,o,i,a,l,u,Pxe,r),v.lineEnd=E,E()}return v}}var fot=cL({point:function(e,t){this.stream.point(e*gr,t*gr)}});function dot(e){return cL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function hot(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Bxe(e,t,n,r,i,s){if(!s)return hot(e,t,n,r,i);var o=Dn(s),a=En(s),l=o*e,u=a*e,f=o/e,c=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,v){return g*=r,v*=i,[l*g-u*v+t,n-u*g-l*v]}return p.invert=function(g,v){return[r*(f*g-c*v+d),i*(h-c*g-f*v)]},p}function Yf(e){return MFe(function(){return e})()}function MFe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,f,c=0,d=1,h=1,p=null,g=Txe,v=null,y,b,w,E=u2,A=.5,T,D,k,R,O;function B(I){return k(I[0]*gr,I[1]*gr)}function K(I){return I=k.invert(I[0],I[1]),I&&[I[0]*Is,I[1]*Is]}B.stream=function(I){return R&&O===I?R:R=fot(dot(f)(g(T(E(O=I)))))},B.preclip=function(I){return arguments.length?(g=I,p=void 0,$()):g},B.postclip=function(I){return arguments.length?(E=I,v=y=b=w=null,$()):E},B.clipAngle=function(I){return arguments.length?(g=+I?Yst(p=I*gr):(p=null,Txe),$()):p*Is},B.clipExtent=function(I){return arguments.length?(E=I==null?(v=y=b=w=null,u2):wFe(v=+I[0][0],y=+I[0][1],b=+I[1][0],w=+I[1][1]),$()):v==null?null:[[v,y],[b,w]]},B.scale=function(I){return arguments.length?(n=+I,L()):n},B.translate=function(I){return arguments.length?(r=+I[0],i=+I[1],L()):[r,i]},B.center=function(I){return arguments.length?(s=I[0]%360*gr,o=I[1]%360*gr,L()):[s*Is,o*Is]},B.rotate=function(I){return arguments.length?(a=I[0]%360*gr,l=I[1]%360*gr,u=I.length>2?I[2]%360*gr:0,L()):[a*Is,l*Is,u*Is]},B.angle=function(I){return arguments.length?(c=I%360*gr,L()):c*Is},B.reflectX=function(I){return arguments.length?(d=I?-1:1,L()):d<0},B.reflectY=function(I){return arguments.length?(h=I?-1:1,L()):h<0},B.precision=function(I){return arguments.length?(T=Nxe(D,A=I*I),$()):tl(A)},B.fitExtent=function(I,U){return fL(B,I,U)},B.fitSize=function(I,U){return DN(B,I,U)},B.fitWidth=function(I,U){return LN(B,I,U)},B.fitHeight=function(I,U){return RN(B,I,U)};function L(){var I=Bxe(n,0,0,d,h,c).apply(null,t(s,o)),U=Bxe(n,r-I[0],i-I[1],d,h,c);return f=yFe(a,l,u),D=q6(t,U),k=q6(f,D),T=Nxe(D,A),$()}function $(){return R=O=null,B}return function(){return t=e.apply(this,arguments),B.invert=t.invert&&K,L()}}function FN(e){var t=0,n=wr/3,r=MFe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*gr,n=s[1]*gr):[t*Is,n*Is]},i}function pot(e){var t=Dn(e);function n(r,i){return[r*t,En(i)/t]}return n.invert=function(r,i){return[r/t,Ml(i*t)]},n}function mot(e,t){var n=En(e),r=(n+En(t))/2;if(Ur(r)<Cn)return pot(e);var i=1+n*(2*r-n),s=tl(i)/r;function o(a,l){var u=tl(i-2*r*En(l))/r;return[u*En(a*=r),s-u*Dn(a)]}return o.invert=function(a,l){var u=s-l,f=Nu(a,Ur(u))*Tu(u);return u*r<0&&(f-=wr*Tu(a)*Tu(u)),[f/r,Ml((i-(a*a+u*u)*r*r)/(2*r))]},o}function hk(){return FN(mot).scale(155.424).center([0,33.6442])}function $Fe(){return hk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function got(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function yot(){var e,t,n=$Fe(),r,i=hk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=hk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function f(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}f.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},f.stream=function(d){return e&&t===d?e:e=got([n.stream(t=d),i.stream(d),o.stream(d)])},f.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),c()):n.precision()},f.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),f.translate(n.translate())):n.scale()},f.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+Cn,g+.12*h+Cn],[p-.214*h-Cn,g+.234*h-Cn]]).stream(u),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+Cn,g+.166*h+Cn],[p-.115*h-Cn,g+.234*h-Cn]]).stream(u),c()},f.fitExtent=function(d,h){return fL(f,d,h)},f.fitSize=function(d,h){return DN(f,d,h)},f.fitWidth=function(d,h){return LN(f,d,h)},f.fitHeight=function(d,h){return RN(f,d,h)};function c(){return e=t=null,f}return f.scale(1070)}function IFe(e){return function(t,n){var r=Dn(t),i=Dn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*En(t),s*En(n)]}}function LE(e){return function(t,n){var r=tl(t*t+n*n),i=e(r),s=En(i),o=Dn(i);return[Nu(t*s,r*o),Ml(r&&n*s/r)]}}var PFe=IFe(function(e){return tl(2/(1+e))});PFe.invert=LE(function(e){return 2*Ml(e/2)});function vot(){return Yf(PFe).scale(124.75).clipAngle(180-.001)}var NFe=IFe(function(e){return(e=oFe(e))&&e/En(e)});NFe.invert=LE(function(e){return e});function bot(){return Yf(NFe).scale(79.4188).clipAngle(180-.001)}function dL(e,t){return[e,Y3(CN((Ls+t)/2))]}dL.invert=function(e,t){return[e,2*ob(sFe(t))-Ls]};function xot(){return BFe(dL).scale(961/el)}function BFe(e){var t=Yf(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(c){return arguments.length?(r(c),f()):r()},t.translate=function(c){return arguments.length?(i(c),f()):i()},t.center=function(c){return arguments.length?(n(c),f()):n()},t.clipExtent=function(c){return arguments.length?(c==null?o=a=l=u=null:(o=+c[0][0],a=+c[0][1],l=+c[1][0],u=+c[1][1]),f()):o==null?null:[[o,a],[l,u]]};function f(){var c=wr*r(),d=t(zst(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-c,d[1]-c],[d[0]+c,d[1]+c]]:e===dL?[[Math.max(d[0]-c,o),a],[Math.min(d[0]+c,l),u]]:[[o,Math.max(d[1]-c,a)],[l,Math.min(d[1]+c,u)]])}return f()}function EA(e){return CN((Ls+e)/2)}function wot(e,t){var n=Dn(e),r=e===t?En(e):Y3(n/Dn(t))/Y3(EA(t)/EA(e)),i=n*RF(EA(e),r)/r;if(!r)return dL;function s(o,a){i>0?a<-Ls+Cn&&(a=-Ls+Cn):a>Ls-Cn&&(a=Ls-Cn);var l=i/RF(EA(a),r);return[l*En(r*o),i-l*Dn(r*o)]}return s.invert=function(o,a){var l=i-a,u=Tu(r)*tl(o*o+l*l),f=Nu(o,Ur(l))*Tu(l);return l*r<0&&(f-=wr*Tu(o)*Tu(l)),[f/r,2*ob(RF(i/u,1/r))-Ls]},s}function _ot(){return FN(wot).scale(109.5).parallels([30,30])}function pk(e,t){return[e,t]}pk.invert=pk;function Eot(){return Yf(pk).scale(152.63)}function Sot(e,t){var n=Dn(e),r=e===t?En(e):(n-Dn(t))/(t-e),i=n/r+e;if(Ur(r)<Cn)return pk;function s(o,a){var l=i-a,u=r*o;return[l*En(u),i-l*Dn(u)]}return s.invert=function(o,a){var l=i-a,u=Nu(o,Ur(l))*Tu(l);return l*r<0&&(u-=wr*Tu(o)*Tu(l)),[u/r,i-Tu(r)*tl(o*o+l*l)]},s}function Aot(){return FN(Sot).scale(131.154).center([0,13.9389])}var w_=1.340264,__=-.081106,E_=893e-6,S_=.003796,mk=tl(3)/2,Cot=12;function zFe(e,t){var n=Ml(mk*En(t)),r=n*n,i=r*r*r;return[e*Dn(n)/(mk*(w_+3*__*r+i*(7*E_+9*S_*r))),n*(w_+__*r+i*(E_+S_*r))]}zFe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<Cot&&(a=n*(w_+__*r+i*(E_+S_*r))-t,l=w_+3*__*r+i*(7*E_+9*S_*r),n-=o=a/l,r=n*n,i=r*r*r,!(Ur(o)<V3));++s);return[mk*e*(w_+3*__*r+i*(7*E_+9*S_*r))/Dn(n),Ml(En(n)/mk)]};function kot(){return Yf(zFe).scale(177.158)}function jFe(e,t){var n=Dn(t),r=Dn(e)*n;return[n*En(e)/r,En(t)/r]}jFe.invert=LE(ob);function Tot(){return Yf(jFe).scale(144.049).clipAngle(60)}function Dot(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,f,c,d=1,h=1,p=cL({point:function(E,A){var T=w([E,A]);this.stream.point(T[0],T[1])}}),g=u2,v,y;function b(){return d=e*r,h=e*i,v=y=null,w}function w(E){var A=E[0]*d,T=E[1]*h;if(s){var D=T*o-A*a;A=A*o+T*a,T=D}return[A+t,T+n]}return w.invert=function(E){var A=E[0]-t,T=E[1]-n;if(s){var D=T*o+A*a;A=A*o-T*a,T=D}return[A/d,T/h]},w.stream=function(E){return v&&y===E?v:v=p(g(y=E))},w.postclip=function(E){return arguments.length?(g=E,l=u=f=c=null,b()):g},w.clipExtent=function(E){return arguments.length?(g=E==null?(l=u=f=c=null,u2):wFe(l=+E[0][0],u=+E[0][1],f=+E[1][0],c=+E[1][1]),b()):l==null?null:[[l,u],[f,c]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(s=E%360*gr,a=En(s),o=Dn(s),b()):s*Is},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,A){return fL(w,E,A)},w.fitSize=function(E,A){return DN(w,E,A)},w.fitWidth=function(E,A){return LN(w,E,A)},w.fitHeight=function(E,A){return RN(w,E,A)},w}function UFe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}UFe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Ur(i)>Cn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Lot(){return Yf(UFe).scale(175.295)}function qFe(e,t){return[Dn(t)*En(e),En(t)]}qFe.invert=LE(Ml);function Rot(){return Yf(qFe).scale(249.5).clipAngle(90+Cn)}function HFe(e,t){var n=Dn(t),r=1+Dn(e)*n;return[n*En(e)/r,En(t)/r]}HFe.invert=LE(function(e){return 2*ob(e)});function Fot(){return Yf(HFe).scale(250).clipAngle(142)}function GFe(e,t){return[Y3(CN((Ls+t)/2)),-e]}GFe.invert=function(e,t){return[-t,2*ob(sFe(e))-Ls]};function Oot(){var e=BFe(GFe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Mot=Math.abs,e5=Math.cos,gk=Math.sin,$ot=1e-6,VFe=Math.PI,t5=VFe/2,zxe=Iot(2);function jxe(e){return e>1?t5:e<-1?-t5:Math.asin(e)}function Iot(e){return e>0?Math.sqrt(e):0}function Pot(e,t){var n=e*gk(t),r=30,i;do t-=i=(t+gk(t)-n)/(1+e5(t));while(Mot(i)>$ot&&--r>0);return t/2}function Not(e,t,n){function r(i,s){return[e*i*e5(s=Pot(n,s)),t*gk(s)]}return r.invert=function(i,s){return s=jxe(s/t),[i/(e*e5(s)),jxe((2*s+gk(2*s))/n)]},r}var Bot=Not(zxe/t5,zxe,VFe);function zot(){return Yf(Bot).scale(169.529)}const jot=OFe(),n5=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Uot(e,t){return function n(){const r=t();return r.type=e,r.path=OFe().projection(r),r.copy=r.copy||function(){const i=n();return n5.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},aLe(r)}}function ON(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(yk[e]=Uot(e,t),this):yk[e]||null}function WFe(e){return e&&e.path||jot}const yk={albers:$Fe,albersusa:yot,azimuthalequalarea:vot,azimuthalequidistant:bot,conicconformal:_ot,conicequalarea:hk,conicequidistant:Aot,equalEarth:kot,equirectangular:Eot,gnomonic:Tot,identity:Dot,mercator:xot,mollweide:zot,naturalEarth1:Lot,orthographic:Rot,stereographic:Fot,transversemercator:Oot};for(const e in yk)ON(e,yk[e]);function qot(){}const Ed=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function YFe(){var e=1,t=1,n=a;function r(l,u){return u.map(f=>i(l,f))}function i(l,u){var f=[],c=[];return s(l,u,d=>{n(d,l,u),Hot(d)>0?f.push([d]):c.push(d)}),c.forEach(d=>{for(var h=0,p=f.length,g;h<p;++h)if(Got((g=f[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function s(l,u,f){var c=[],d=[],h,p,g,v,y,b;for(h=p=-1,v=l[0]>=u,Ed[v<<1].forEach(w);++h<e-1;)g=v,v=l[h+1]>=u,Ed[g|v<<1].forEach(w);for(Ed[v<<0].forEach(w);++p<t-1;){for(h=-1,v=l[p*e+e]>=u,y=l[p*e]>=u,Ed[v<<1|y<<2].forEach(w);++h<e-1;)g=v,v=l[p*e+e+h+1]>=u,b=y,y=l[p*e+h+1]>=u,Ed[g|v<<1|y<<2|b<<3].forEach(w);Ed[v|y<<3].forEach(w)}for(h=-1,y=l[p*e]>=u,Ed[y<<2].forEach(w);++h<e-1;)b=y,y=l[p*e+h+1]>=u,Ed[y<<2|b<<3].forEach(w);Ed[y<<3].forEach(w);function w(E){var A=[E[0][0]+h,E[0][1]+p],T=[E[1][0]+h,E[1][1]+p],D=o(A),k=o(T),R,O;(R=d[D])?(O=c[k])?(delete d[R.end],delete c[O.start],R===O?(R.ring.push(T),f(R.ring)):c[R.start]=d[O.end]={start:R.start,end:O.end,ring:R.ring.concat(O.ring)}):(delete d[R.end],R.ring.push(T),d[R.end=k]=R):(R=c[k])?(O=d[D])?(delete c[R.start],delete d[O.end],R===O?(R.ring.push(T),f(R.ring)):c[O.start]=d[R.end]={start:O.start,end:R.end,ring:O.ring.concat(R.ring)}):(delete c[R.start],R.ring.unshift(A),c[R.start=D]=R):c[D]=d[k]={start:D,end:k,ring:[A,T]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,f){l.forEach(c=>{var d=c[0],h=c[1],p=d|0,g=h|0,v,y=u[g*e+p];d>0&&d<e&&p===d&&(v=u[g*e+p-1],c[0]=d+(f-v)/(y-v)-.5),h>0&&h<t&&g===h&&(v=u[(g-1)*e+p],c[1]=h+(f-v)/(y-v)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);return u>=0&&f>=0||ot("invalid size"),e=u,t=f,r},r.smooth=function(l){return arguments.length?(n=l?a:qot,r):n===a},r}function Hot(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Got(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Vot(e,t[n]))return i;return 0}function Vot(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],f=l[1],c=e[a],d=c[0],h=c[1];if(Wot(l,c,t))return 0;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(i=-i)}return i}function Wot(e,t,n){var r;return Yot(e,t,n)&&Xot(e[r=+(e[0]===t[0])],n[r],t[r])}function Yot(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Xot(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function XFe(e,t,n){return function(r){var i=$f(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?Zg(s,o,e):a/(e+1);return Kl(s+l,o,l)}}function MN(e){rt.call(this,null,e)}MN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Lt(MN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ra,s=YFe().smooth(e.smooth!==!1),o=e.thresholds||Zot(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const f=i(u),c=s.size([f.width,f.height])(f.values,at(o)?o:o(f.values));Kot(c,f,u,e),c.forEach(d=>{l.push($D(u,yi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Zot(e,t,n){const r=XFe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Pg(t(i).values)))}function Kot(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(ir(i)&&(i=i(n,r)),ir(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(li(i)?i:i[0])||1,a=(li(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(ZFe(t,o,a,l,u))}function ZFe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(c){c.forEach(u)}function u(c){a&&c.reverse(),c.forEach(f)}function f(c){c[0]=(c[0]-s)*t+r,c[1]=(c[1]-o)*n+i}return function(c){return c.coordinates.forEach(l),c}}function Uxe(e,t,n){const r=e>=0?e:zP(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function IF(e){return ir(e)?e:Fa(+e)}function KFe(){var e=l=>l[0],t=l=>l[1],n=K1,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const f=Uxe(r[0],l,e)>>o,c=Uxe(r[1],l,t)>>o,d=f?f+2:0,h=c?c+2:0,p=2*d+(i>>o),g=2*h+(s>>o),v=new Float32Array(p*g),y=new Float32Array(p*g);let b=v;l.forEach(E=>{const A=d+(+e(E)>>o),T=h+(+t(E)>>o);A>=0&&A<p&&T>=0&&T<g&&(v[A+T*p]+=+n(E))}),f>0&&c>0?(Ny(p,g,v,y,f),By(p,g,y,v,c),Ny(p,g,v,y,f),By(p,g,y,v,c),Ny(p,g,v,y,f),By(p,g,y,v,c)):f>0?(Ny(p,g,v,y,f),Ny(p,g,y,v,f),Ny(p,g,v,y,f),b=y):c>0&&(By(p,g,v,y,c),By(p,g,y,v,c),By(p,g,v,y,c),b=y);const w=u?Math.pow(2,-2*o):1/n3e(b);for(let E=0,A=p*g;E<A;++E)b[E]*=w;return{values:b,scale:1<<o,width:p,height:g,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=IF(l),a):e},a.y=function(l){return arguments.length?(t=IF(l),a):t},a.weight=function(l){return arguments.length?(n=IF(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],f=+l[1];return u>=0&&f>=0||ot("invalid size"),i=u,s=f,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||ot("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=Pt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&ot("invalid bandwidth"),r=l,a):r},a}function Ny(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function By(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function $N(e){rt.call(this,null,e)}$N.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Jot=["x","y","weight","size","cellSize","bandwidth"];function JFe(e,t){return Jot.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Lt($N,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Qot(r,e.groupby),s=(e.groupby||[]).map(Rs),o=JFe(KFe(),e),a=e.as||"grid",l=[];function u(f,c){for(let d=0;d<s.length;++d)f[s[d]]=c[d];return f}return l=i.map(f=>yi(u({[a]:o(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Qot(e,t){var n=[],r=f=>f(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function IN(e){rt.call(this,null,e)}IN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Lt(IN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=YFe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||XFe(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=JFe(KFe(),e)(i,!0),l=ZFe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(yi),n}});const r5="Feature",PN="FeatureCollection",eat="MultiPoint";function NN(e){rt.call(this,null,e)}NN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Lt(NN,rt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ra,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(ka(a))||s&&t.modified(ka(s))||o&&t.modified(ka(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,f=>n.push(a(f))),s&&o&&(t.visit(l,f=>{var c=s(f),d=o(f);c!=null&&d!=null&&(c=+c)===c&&(d=+d)===d&&r.push([c,d])}),n=n.concat({type:r5,geometry:{type:eat,coordinates:r}})),this.value={type:PN,features:n}}});function BN(e){rt.call(this,null,e)}BN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Lt(BN,rt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ra,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=WFe(e.projection),n.materialize().reflow()):o=i===Ra||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=tat(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function tat(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function zN(e){rt.call(this,null,e)}zN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Lt(zN,rt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(f){const c=n([r(f),i(f)]);c?(f[o]=c[0],f[a]=c[1]):(f[o]=void 0,f[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function jN(e){rt.call(this,null,e)}jN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Lt(jN,rt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=nat(WFe(e.projection),e.field||Mu("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function nat(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function UN(e){rt.call(this,[],e),this.generator=Zst()}UN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Lt(UN,rt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)ir(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(WTe(n[0],i)):t.add.push(yi(i)),n[0]=i,t}});function qN(e){rt.call(this,null,e)}qN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Lt(qN,rt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ra,s=iat(e.opacity,e),o=rat(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Pg(n.map(u=>Pg(i(u).values))):0};return n.forEach(u=>{const f=i(u),c=rr({},u,l);r||(c.$max=Pg(f.values||[])),u[a]=sat(f,c,o.dep?o:Fa(o(c)),s.dep?s:Fa(s(c)))}),t.reflow(!0).modifies(a)}});function rat(e,t){let n;return ir(e)?(n=r=>s3(e(r,t)),n.dep=QFe(e)):n=Fa(s3(e||"#888")),n}function iat(e,t){let n;return ir(e)?(n=r=>e(r,t),n.dep=QFe(e)):e?n=Fa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function QFe(e){if(!ir(e))return!1;const t=Tc(ka(e));return t.$x||t.$y||t.$value||t.$max}function sat(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,f=e.values,c=f?v=>f[v]:fp,d=Mp(l-o,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),g=p.data;for(let v=a,y=0;v<u;++v){t.$y=v-a;for(let b=o,w=v*i;b<l;++b,y+=4){t.$x=b-o,t.$value=c(b+w);const E=n(t);g[y+0]=E.r,g[y+1]=E.g,g[y+2]=E.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function eOe(e){rt.call(this,null,e),this.modified(!0)}Lt(eOe,rt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=aat(e.type),n5.forEach(r=>{e[r]!=null&&qxe(n,r,e[r])})):n5.forEach(r=>{e.modified(r)&&qxe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&oat(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function oat(e,t){const n=lat(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function aat(e){const t=ON((e||"mercator").toLowerCase());return t||ot("Unrecognized projection type: "+e),t()}function qxe(e,t,n){ir(e[t])&&e[t](n)}function lat(e){return e=Pt(e),e.length===1?e[0]:{type:PN,features:e.reduce((t,n)=>t.concat(uat(n)),[])}}function uat(e){return e.type===PN?e.features:Pt(e).filter(t=>t!=null).map(t=>t.type===r5?t:{type:r5,geometry:t})}const cat=Object.freeze(Object.defineProperty({__proto__:null,contour:IN,geojson:NN,geopath:BN,geopoint:zN,geoshape:jN,graticule:UN,heatmap:qN,isocontour:MN,kde2d:$N,projection:eOe},Symbol.toStringTag,{value:"Module"}));function fat(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function dat(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return tOe(this.cover(t,n),t,n,e)}function tOe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,f=e._y1,c,d,h,p,g,v,y,b;if(!s)return e._root=o,e;for(;s.length;)if((g=t>=(c=(a+u)/2))?a=c:u=c,(v=n>=(d=(l+f)/2))?l=d:f=d,i=s,!(s=s[y=v<<1|g]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(c=(a+u)/2))?a=c:u=c,(v=n>=(d=(l+f)/2))?l=d:f=d;while((y=v<<1|g)===(b=(p>=d)<<1|h>=c));return i[b]=s,i[y]=o,e}function hat(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,f=-1/0,c=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>f&&(f=i),s<u&&(u=s),s>c&&(c=s));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),n=0;n<r;++n)tOe(this,o[n],a[n],e[n]);return this}function pat(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function mat(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function gat(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Wa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function yat(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,f=this._x1,c=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Wa(h,i,s,f,c)),n==null?n=1/0:(i=e-n,s=t-n,f=e+n,c=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>f||(a=p.y0)>c||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var v=(o+l)/2,y=(a+u)/2;d.push(new Wa(h[3],v,y,l,u),new Wa(h[2],o,y,v,u),new Wa(h[1],v,a,l,y),new Wa(h[0],o,a,v,y)),(g=(t>=y)<<1|e>=v)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var A=Math.sqrt(n=E);i=e-A,s=t-A,f=e+A,c=t+A,r=h.data}}return r}function vat(e){if(isNaN(f=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,f,c,d,h,p,g,v,y;if(!n)return this;if(n.length)for(;;){if((p=f>=(d=(o+l)/2))?o=d:l=d,(g=c>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[v=g<<1|p]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(r=t,y=v)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[v]=s:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function bat(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function xat(){return this._root}function wat(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function _at(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new Wa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,f=(o+l)/2;(i=r[3])&&t.push(new Wa(i,u,f,a,l)),(i=r[2])&&t.push(new Wa(i,s,f,u,l)),(i=r[1])&&t.push(new Wa(i,u,o,a,f)),(i=r[0])&&t.push(new Wa(i,s,o,u,f))}return this}function Eat(e){var t=[],n=[],r;for(this._root&&t.push(new Wa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,f=(o+l)/2,c=(a+u)/2;(s=i[0])&&t.push(new Wa(s,o,a,f,c)),(s=i[1])&&t.push(new Wa(s,f,a,l,c)),(s=i[2])&&t.push(new Wa(s,o,c,f,u)),(s=i[3])&&t.push(new Wa(s,f,c,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Sat(e){return e[0]}function Aat(e){return arguments.length?(this._x=e,this):this._x}function Cat(e){return e[1]}function kat(e){return arguments.length?(this._y=e,this):this._y}function HN(e,t,n){var r=new GN(t??Sat,n??Cat,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function GN(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Hxe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var il=HN.prototype=GN.prototype;il.copy=function(){var e=new GN(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Hxe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Hxe(r));return e};il.add=dat;il.addAll=hat;il.cover=pat;il.data=mat;il.extent=gat;il.find=yat;il.remove=vat;il.removeAll=bat;il.root=xat;il.size=wat;il.visit=_at;il.visitAfter=Eat;il.x=Aat;il.y=kat;function Za(e){return function(){return e}}function Sp(e){return(e()-.5)*1e-6}function Tat(e){return e.x+e.vx}function Dat(e){return e.y+e.vy}function Lat(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Za(e==null?1:+e));function o(){for(var u,f=t.length,c,d,h,p,g,v,y=0;y<s;++y)for(c=HN(t,Tat,Dat).visitAfter(a),u=0;u<f;++u)d=t[u],g=n[d.index],v=g*g,h=d.x+d.vx,p=d.y+d.vy,c.visit(b);function b(w,E,A,T,D){var k=w.data,R=w.r,O=g+R;if(k){if(k.index>d.index){var B=h-k.x-k.vx,K=p-k.y-k.vy,L=B*B+K*K;L<O*O&&(B===0&&(B=Sp(r),L+=B*B),K===0&&(K=Sp(r),L+=K*K),L=(O-(L=Math.sqrt(L)))/L*i,d.vx+=(B*=L)*(O=(R*=R)/(v+R)),d.vy+=(K*=L)*O,k.vx-=B*(O=1-O),k.vy-=K*O)}return}return E>h+O||T<h-O||A>p+O||D<p-O}}function a(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,c;for(n=new Array(f),u=0;u<f;++u)c=t[u],n[c.index]=+e(c,u,t)}}return o.initialize=function(u,f){t=u,r=f,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Za(+u),l(),o):e},o}function Rat(e){return e.index}function Gxe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Fat(e){var t=Rat,n=c,r,i=Za(30),s,o,a,l,u,f=1;e==null&&(e=[]);function c(v){return 1/Math.min(a[v.source.index],a[v.target.index])}function d(v){for(var y=0,b=e.length;y<f;++y)for(var w=0,E,A,T,D,k,R,O;w<b;++w)E=e[w],A=E.source,T=E.target,D=T.x+T.vx-A.x-A.vx||Sp(u),k=T.y+T.vy-A.y-A.vy||Sp(u),R=Math.sqrt(D*D+k*k),R=(R-s[w])/R*v*r[w],D*=R,k*=R,T.vx-=D*(O=l[w]),T.vy-=k*O,A.vx+=D*(O=1-O),A.vy+=k*O}function h(){if(o){var v,y=o.length,b=e.length,w=new Map(o.map((A,T)=>[t(A,T,o),A])),E;for(v=0,a=new Array(y);v<b;++v)E=e[v],E.index=v,typeof E.source!="object"&&(E.source=Gxe(w,E.source)),typeof E.target!="object"&&(E.target=Gxe(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(v=0,l=new Array(b);v<b;++v)E=e[v],l[v]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),p(),s=new Array(b),g()}}function p(){if(o)for(var v=0,y=e.length;v<y;++v)r[v]=+n(e[v],v,e)}function g(){if(o)for(var v=0,y=e.length;v<y;++v)s[v]=+i(e[v],v,e)}return d.initialize=function(v,y){o=v,u=y,h()},d.links=function(v){return arguments.length?(e=v,h(),d):e},d.id=function(v){return arguments.length?(t=v,d):t},d.iterations=function(v){return arguments.length?(f=+v,d):f},d.strength=function(v){return arguments.length?(n=typeof v=="function"?v:Za(+v),p(),d):n},d.distance=function(v){return arguments.length?(i=typeof v=="function"?v:Za(+v),g(),d):i},d}var Oat={value:()=>{}};function nOe(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new RC(n)}function RC(e){this._=e}function Mat(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}RC.prototype=nOe.prototype={constructor:RC,on:function(e,t){var n=this._,r=Mat(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=$at(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Vxe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Vxe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new RC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function $at(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Vxe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Oat,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var f1=0,Zw=0,pw=0,rOe=1e3,vk,Kw,bk=0,s0=0,hL=0,d2=typeof performance=="object"&&performance.now?performance:Date,iOe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function VN(){return s0||(iOe(Iat),s0=d2.now()+hL)}function Iat(){s0=0}function xk(){this._call=this._time=this._next=null}xk.prototype=sOe.prototype={constructor:xk,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?VN():+n)+(t==null?0:+t),!this._next&&Kw!==this&&(Kw?Kw._next=this:vk=this,Kw=this),this._call=e,this._time=n,i5()},stop:function(){this._call&&(this._call=null,this._time=1/0,i5())}};function sOe(e,t,n){var r=new xk;return r.restart(e,t,n),r}function Pat(){VN(),++f1;for(var e=vk,t;e;)(t=s0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--f1}function Wxe(){s0=(bk=d2.now())+hL,f1=Zw=0;try{Pat()}finally{f1=0,Bat(),s0=0}}function Nat(){var e=d2.now(),t=e-bk;t>rOe&&(hL-=t,bk=e)}function Bat(){for(var e,t=vk,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vk=n);Kw=e,i5(r)}function i5(e){if(!f1){Zw&&(Zw=clearTimeout(Zw));var t=e-s0;t>24?(e<1/0&&(Zw=setTimeout(Wxe,e-d2.now()-hL)),pw&&(pw=clearInterval(pw))):(pw||(bk=d2.now(),pw=setInterval(Nat,rOe)),f1=1,iOe(Wxe))}}function zat(e,t,n){var r=new xk,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?VN():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}const jat=1664525,Uat=1013904223,Yxe=4294967296;function qat(){let e=1;return()=>(e=(jat*e+Uat)%Yxe)/Yxe}function Hat(e){return e.x}function Gat(e){return e.y}var Vat=10,Wat=Math.PI*(3-Math.sqrt(5));function Yat(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=sOe(c),u=nOe("tick","end"),f=qat();e==null&&(e=[]);function c(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var v,y=e.length,b;g===void 0&&(g=1);for(var w=0;w<g;++w)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),v=0;v<y;++v)b=e[v],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var g=0,v=e.length,y;g<v;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=Vat*Math.sqrt(.5+g),w=g*Wat;y.x=b*Math.cos(w),y.y=b*Math.sin(w)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,f),g}return h(),t={tick:d,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(o=1-g,t):1-o},randomSource:function(g){return arguments.length?(f=g,a.forEach(p),t):f},force:function(g,v){return arguments.length>1?(v==null?a.delete(g):a.set(g,p(v)),t):a.get(g)},find:function(g,v,y){var b=0,w=e.length,E,A,T,D,k;for(y==null?y=1/0:y*=y,b=0;b<w;++b)D=e[b],E=g-D.x,A=v-D.y,T=E*E+A*A,T<y&&(k=D,y=T);return k},on:function(g,v){return arguments.length>1?(u.on(g,v),t):u.on(g)}}}function Xat(){var e,t,n,r,i=Za(-30),s,o=1,a=1/0,l=.81;function u(h){var p,g=e.length,v=HN(e,Hat,Gat).visitAfter(c);for(r=h,p=0;p<g;++p)t=e[p],v.visit(d)}function f(){if(e){var h,p=e.length,g;for(s=new Array(p),h=0;h<p;++h)g=e[h],s[g.index]=+i(g,h,e)}}function c(h){var p=0,g,v,y=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(g=h[E])&&(v=Math.abs(g.value))&&(p+=g.value,y+=v,b+=v*g.x,w+=v*g.y);h.x=b/y,h.y=w/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,v){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,w=v-p,E=y*y+b*b;if(w*w/l<E)return E<a&&(y===0&&(y=Sp(n),E+=y*y),b===0&&(b=Sp(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)),t.vx+=y*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Sp(n),E+=y*y),b===0&&(b=Sp(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(w=s[h.data.index]*r/E,t.vx+=y*w,t.vy+=b*w);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,f()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Za(+h),f(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function Zat(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function s(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),o(),s):e},s}function Kat(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function s(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),o(),s):e},s}const Xxe={center:fat,collide:Lat,nbody:Xat,link:Fat,x:Zat,y:Kat},Jw="forces",s5=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Jat=["static","iterations"],oOe=["x","y","vx","vy"];function WN(e){rt.call(this,null,e)}WN.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:oOe}]};Lt(WN,rt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(s5),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&aOe(n,e,0,t)):(this.value=n=elt(t.source,e),n.on("tick",Qat(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Jat)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,f;l<u;++l)if(f=a[l],!(f.name!==Jw||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(oOe)}});function Qat(e,t){return()=>e.touch(t).run()}function elt(e,t){const n=Yat(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),aOe(n,t,!0).on("end",()=>s=!0)}function aOe(e,t,n,r){var i=Pt(t.forces),s,o,a,l;for(s=0,o=s5.length;s<o;++s)a=s5[s],a!==Jw&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=Jw+s,a=n||t.modified(Jw,s)?nlt(i[s]):r&&tlt(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(Jw+s,null);return e.numForces=i.length,e}function tlt(e,t){var n,r;for(n in e)if(ir(r=e[n])&&t.modified(ka(r)))return 1;return 0}function nlt(e){var t,n;Yt(Xxe,e.force)||ot("Unrecognized force: "+e.force),t=Xxe[e.force]();for(n in e)ir(t[n])&&rlt(t[n],e[n],e);return t}function rlt(e,t,n){e(ir(t)?r=>t(r,n):t)}const ilt=Object.freeze(Object.defineProperty({__proto__:null,force:WN},Symbol.toStringTag,{value:"Module"}));function slt(e,t){return e.parent===t.parent?1:2}function olt(e){return e.reduce(alt,0)/e.length}function alt(e,t){return e+t.x}function llt(e){return 1+e.reduce(ult,0)}function ult(e,t){return Math.max(e,t.y)}function clt(e){for(var t;t=e.children;)e=t[0];return e}function flt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function dlt(){var e=slt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=olt(h),d.y=llt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=clt(s),u=flt(s),f=l.x-e(l,u)/2,c=u.x+e(u,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-f)/(c-f)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function hlt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function plt(){return this.eachAfter(hlt)}function mlt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function glt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function ylt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function vlt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function blt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function xlt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function wlt(e){for(var t=this,n=_lt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function _lt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Elt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Slt(){return Array.from(this)}function Alt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Clt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*klt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function YN(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Llt)):t===void 0&&(t=Dlt);for(var n=new d1(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new d1(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(lOe)}function Tlt(){return YN(this).eachBefore(Rlt)}function Dlt(e){return e.children}function Llt(e){return Array.isArray(e)?e[1]:null}function Rlt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function lOe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function d1(e){this.data=e,this.depth=this.height=0,this.parent=null}d1.prototype=YN.prototype={constructor:d1,count:plt,each:mlt,eachAfter:ylt,eachBefore:glt,find:vlt,sum:blt,sort:xlt,path:wlt,ancestors:Elt,descendants:Slt,leaves:Alt,links:Clt,copy:Tlt,[Symbol.iterator]:klt};function FC(e){return e==null?null:uOe(e)}function uOe(e){if(typeof e!="function")throw new Error;return e}function Lg(){return 0}function ev(e){return function(){return e}}const Flt=1664525,Olt=1013904223,Zxe=4294967296;function Mlt(){let e=1;return()=>(e=(Flt*e+Olt)%Zxe)/Zxe}function $lt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ilt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Plt(e,t){for(var n=0,r=(e=Ilt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&cOe(o,s)?++n:(o=Blt(i=Nlt(i,s)),n=0);return o}function Nlt(e,t){var n,r;if(PF(t,e))return[t];for(n=0;n<e.length;++n)if(SA(t,e[n])&&PF(Qw(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(SA(Qw(e[n],e[r]),t)&&SA(Qw(e[n],t),e[r])&&SA(Qw(e[r],t),e[n])&&PF(fOe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function SA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function cOe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function PF(e,t){for(var n=0;n<t.length;++n)if(!cOe(e,t[n]))return!1;return!0}function Blt(e){switch(e.length){case 1:return zlt(e[0]);case 2:return Qw(e[0],e[1]);case 3:return fOe(e[0],e[1],e[2])}}function zlt(e){return{x:e.x,y:e.y,r:e.r}}function Qw(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,f=a-i,c=Math.sqrt(l*l+u*u);return{x:(n+s+l/c*f)/2,y:(r+o+u/c*f)/2,r:(c+i+a)/2}}function fOe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,f=n.y,c=n.r,d=r-o,h=r-u,p=i-a,g=i-f,v=l-s,y=c-s,b=r*r+i*i-s*s,w=b-o*o-a*a+l*l,E=b-u*u-f*f+c*c,A=h*p-d*g,T=(p*E-g*w)/(A*2)-r,D=(g*v-p*y)/A,k=(h*w-d*E)/(A*2)-i,R=(d*y-h*v)/A,O=D*D+R*R-1,B=2*(s+T*D+k*R),K=T*T+k*k-s*s,L=-(Math.abs(O)>1e-6?(B+Math.sqrt(B*B-4*O*K))/(2*O):K/B);return{x:r+T+D*L,y:i+k+R*L,r:L}}function Kxe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Jxe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Qxe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function AA(e){this._=e,this.next=null,this.previous=null}function jlt(e,t){if(!(s=(e=$lt(e)).length))return 0;var n,r,i,s,o,a,l,u,f,c,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Kxe(r,n,i=e[2]),n=new AA(n),r=new AA(r),i=new AA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){Kxe(n._,r._,i=e[l]),i=new AA(i),u=r.next,f=n.previous,c=r._.r,d=n._.r;do if(c<=d){if(Jxe(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}c+=u._.r,u=u.next}else{if(Jxe(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}d+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Qxe(n);(i=i.next)!==r;)(a=Qxe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Plt(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function Ult(e){return Math.sqrt(e.value)}function qlt(){var e=null,t=1,n=1,r=Lg;function i(s){const o=Mlt();return s.x=t/2,s.y=n/2,e?s.eachBefore(ewe(e)).eachAfter(NF(r,.5,o)).eachBefore(twe(1)):s.eachBefore(ewe(Ult)).eachAfter(NF(Lg,1,o)).eachAfter(NF(r,s.r/Math.min(t,n),o)).eachBefore(twe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=FC(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:ev(+s),i):r},i}function ewe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function NF(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=jlt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function twe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function dOe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function RE(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function Hlt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(dOe),o}function s(o,a){return function(l){l.children&&RE(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,f=l.y0,c=l.x1-n,d=l.y1-n;c<u&&(u=c=(u+c)/2),d<f&&(f=d=(f+d)/2),l.x0=u,l.y0=f,l.x1=c,l.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Glt={depth:-1},nwe={},BF={};function Vlt(e){return e.id}function Wlt(e){return e.parentId}function rwe(){var e=Vlt,t=Wlt,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,f,c,d,h,p,g,v=new Map;if(n!=null){const y=s.map((E,A)=>Ylt(n(E,A,i))),b=y.map(iwe),w=new Set(y).add("");for(const E of b)w.has(E)||(w.add(E),y.push(E),b.push(iwe(E)),s.push(BF));o=(E,A)=>y[A],a=(E,A)=>b[A]}for(f=0,l=s.length;f<l;++f)u=s[f],h=s[f]=new d1(u),(p=o(u,f,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?nwe:h)),(p=a(u,f,i))!=null&&(p+="")&&(h.parent=p);for(f=0;f<l;++f)if(h=s[f],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===nwe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(c)throw new Error("multiple roots");c=h}if(!c)throw new Error("no root");if(n!=null){for(;c.data===BF&&c.children.length===1;)c=c.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===BF);--y)h.data=null}if(c.parent=Glt,c.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(lOe),c.parent=null,l>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=FC(i),r):e},r.parentId=function(i){return arguments.length?(t=FC(i),r):t},r.path=function(i){return arguments.length?(n=FC(i),r):n},r}function Ylt(e){e=`${e}`;let t=e.length;return o5(e,t-1)&&!o5(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function iwe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!o5(e,t););return e.slice(0,t)}function o5(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Xlt(e,t){return e.parent===t.parent?1:2}function zF(e){var t=e.children;return t?t[0]:e.t}function jF(e){var t=e.children;return t?t[t.length-1]:e.t}function Zlt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Klt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Jlt(e,t,n){return e.a.parent===t.parent?e.a:n}function OC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}OC.prototype=Object.create(d1.prototype);function Qlt(e){for(var t=new OC(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new OC(s[o],o)),i.parent=n;return(t.parent=new OC(null,0)).children=[t],t}function eut(){var e=Xlt,t=1,n=1,r=null;function i(u){var f=Qlt(u);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(o),r)u.eachBefore(l);else{var c=u,d=u,h=u;u.eachBefore(function(b){b.x<c.x&&(c=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=c===d?1:e(c,d)/2,g=p-c.x,v=t/(d.x+p+g),y=n/(h.depth||1);u.eachBefore(function(b){b.x=(b.x+g)*v,b.y=b.depth*y})}return u}function s(u){var f=u.children,c=u.parent.children,d=u.i?c[u.i-1]:null;if(f){Klt(u);var h=(f[0].z+f[f.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||c[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,f,c){if(f){for(var d=u,h=u,p=f,g=d.parent.children[0],v=d.m,y=h.m,b=p.m,w=g.m,E;p=jF(p),d=zF(d),p&&d;)g=zF(g),h=jF(h),h.a=u,E=p.z+b-d.z-v+e(p._,d._),E>0&&(Zlt(Jlt(p,u,c),u,E),v+=E,y+=E),b+=p.m,v+=d.m,w+=g.m,y+=h.m;p&&!jF(h)&&(h.t=p,h.m+=b-y),d&&!zF(g)&&(g.t=d,g.m+=v-w,c=u)}return c}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function pL(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var hOe=(1+Math.sqrt(5))/2;function pOe(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,f=0,c=0,d=a.length,h,p,g=t.value,v,y,b,w,E,A,T;f<d;){h=i-n,p=s-r;do v=a[c++].value;while(!v&&c<d);for(y=b=v,A=Math.max(p/h,h/p)/(g*e),T=v*v*A,E=Math.max(b/T,T/y);c<d;++c){if(v+=u=a[c].value,u<y&&(y=u),u>b&&(b=u),T=v*v*A,w=Math.max(b/T,T/y),w>E){v-=u;break}E=w}o.push(l={value:v,dice:h<p,children:a.slice(f,c)}),l.dice?RE(l,n,r,i,g?r+=p*v/g:s):pL(l,n,r,g?n+=h*v/g:i,s),g-=v,f=c}return o}const mOe=function e(t){function n(r,i,s,o,a){pOe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(hOe);function tut(){var e=mOe,t=!1,n=1,r=1,i=[0],s=Lg,o=Lg,a=Lg,l=Lg,u=Lg;function f(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(c),i=[0],t&&d.eachBefore(dOe),d}function c(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,v=d.x1-h,y=d.y1-h;v<p&&(p=v=(p+v)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=v,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=u(d)-h,g+=o(d)-h,v-=a(d)-h,y-=l(d)-h,v<p&&(p=v=(p+v)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,v,y))}return f.round=function(d){return arguments.length?(t=!!d,f):t},f.size=function(d){return arguments.length?(n=+d[0],r=+d[1],f):[n,r]},f.tile=function(d){return arguments.length?(e=uOe(d),f):e},f.padding=function(d){return arguments.length?f.paddingInner(d).paddingOuter(d):f.paddingInner()},f.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:ev(+d),f):s},f.paddingOuter=function(d){return arguments.length?f.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):f.paddingTop()},f.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:ev(+d),f):o},f.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:ev(+d),f):a},f.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:ev(+d),f):l},f.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:ev(+d),f):u},f}function nut(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;f(0,a,e.value,t,n,r,i);function f(c,d,h,p,g,v,y){if(c>=d-1){var b=s[c];b.x0=p,b.y0=g,b.x1=v,b.y1=y;return}for(var w=u[c],E=h/2+w,A=c+1,T=d-1;A<T;){var D=A+T>>>1;u[D]<E?A=D+1:T=D}E-u[A-1]<u[A]-E&&c+1<A&&--A;var k=u[A]-w,R=h-k;if(v-p>y-g){var O=h?(p*R+v*k)/h:v;f(c,A,k,p,g,O,y),f(A,d,R,O,g,v,y)}else{var B=h?(g*R+y*k)/h:y;f(c,A,k,p,g,v,B),f(A,d,R,p,B,v,y)}}}function rut(e,t,n,r,i){(e.depth&1?pL:RE)(e,t,n,r,i)}const iut=function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,f,c,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],f=u.children,c=u.value=0,h=f.length;c<h;++c)u.value+=f[c].value;u.dice?RE(u,i,s,o,g?s+=(a-s)*u.value/g:a):pL(u,i,s,g?i+=(o-i)*u.value/g:o,a),g-=u.value}else r._squarify=l=pOe(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(hOe);function a5(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function XN(e){rt.call(this,null,e)}XN.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const sut=e=>e.values;Lt(XN,rt,{transform(e,t){t.source||ot("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&MD(o.data)&&i.rem.push(o.data)}),this.value=s=YN({values:Pt(e.keys).reduce((o,a)=>(o.key(a),o),out()).entries(i.source)},sut),n&&s.each(o=>{o.children&&(o=yi(o.data),i.add.push(o),i.source.push(o))}),a5(s,wn,wn)),i.source.root=s,i}});function out(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let f=-1,c,d,h;for(;++f<o;)c=a(d=i[f])+"",(h=l[c])?h.push(d):l[c]=[d];for(c in l)u[c]=n(l[c],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function mh(e){rt.call(this,null,e)}const aut=(e,t)=>e.parent===t.parent?1:2;Lt(mh,rt,{transform(e,t){(!t.source||!t.source.root)&&ot(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(L0(e.sort,o=>o.data)),lut(n,this.params,e),n.separation&&n.separation(e.separation!==!1?aut:K1);try{this.value=n(i)}catch(o){ot(o)}return i.each(o=>uut(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function lut(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function uut(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const l5=["x","y","r","depth","children"];function ZN(e){mh.call(this,e)}ZN.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:l5.length,default:l5}]};Lt(ZN,mh,{layout:qlt,params:["radius","size","padding"],fields:l5});const u5=["x0","y0","x1","y1","depth","children"];function KN(e){mh.call(this,e)}KN.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:u5.length,default:u5}]};Lt(KN,mh,{layout:Hlt,params:["size","round","padding"],fields:u5});function JN(e){rt.call(this,null,e)}JN.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Lt(JN,rt,{transform(e,t){t.source||ot("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?a5(rwe().id(e.key).parentId(e.parentKey)(i.source),e.key,$u):a5(rwe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const swe={tidy:eut,cluster:dlt},c5=["x","y","depth","children"];function QN(e){mh.call(this,e)}QN.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:c5.length,default:c5}]};Lt(QN,mh,{layout(e){const t=e||"tidy";if(Yt(swe,t))return swe[t]();ot("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:c5});function e9(e){rt.call(this,[],e)}e9.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Lt(e9,rt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||ot("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[wn(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[wn(a)]&&s[wn(l)]&&i.add.push(yi({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[wn(o)]=1),n.forEach(o=>{(s[wn(o.source)]||s[wn(o.target)])&&i.mod.push(o)})),i}});const owe={binary:nut,dice:RE,slice:pL,slicedice:rut,squarify:mOe,resquarify:iut},f5=["x0","y0","x1","y1","depth","children"];function t9(e){mh.call(this,e)}t9.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:f5.length,default:f5}]};Lt(t9,mh,{layout(){const e=tut();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Yt(owe,t)?e.tile(owe[t]):ot("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:f5});const cut=Object.freeze(Object.defineProperty({__proto__:null,nest:XN,pack:ZN,partition:KN,stratify:JN,tree:QN,treelinks:e9,treemap:t9},Symbol.toStringTag,{value:"Module"})),UF=4278190080;function fut(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function dut(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=Mp(s,o).getContext("2d"),u=Mp(s,o).getContext("2d"),f=a&&Mp(s,o).getContext("2d");n.forEach(k=>MC(l,k,!1)),MC(u,t,!1),a&&MC(f,t,!0);const c=qF(l,s,o),d=qF(u,s,o),h=a&&qF(f,s,o),p=e.bitmap(),g=a&&e.bitmap();let v,y,b,w,E,A,T,D;for(y=0;y<o;++y)for(v=0;v<s;++v)E=y*s+v,A=c[E]&UF,D=d[E]&UF,T=a&&h[E]&UF,(A||T||D)&&(b=e(v),w=e(y),!i&&(A||D)&&p.set(b,w),a&&(A||T)&&g.set(b,w));return[p,g]}function qF(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function MC(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>MC(e,s.items,n))}):cu[r].draw(e,{items:n?t.map(hut):t})}function hut(e){const t=$D(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Sd=5,Pa=31,h2=32,op=new Uint32Array(h2+1),hc=new Uint32Array(h2+1);hc[0]=0;op[0]=~hc[0];for(let e=1;e<=h2;++e)hc[e]=hc[e-1]<<1|1,op[e]=~hc[e];function put(e,t){const n=new Uint32Array(~~((e*t+h2)/h2));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Sd]&1<<(a&Pa)},set:(s,o)=>{const a=o*e+s;r(a>>>Sd,1<<(a&Pa))},clear:(s,o)=>{const a=o*e+s;i(a>>>Sd,~(1<<(a&Pa)))},getRange:(s,o,a,l)=>{let u=l,f,c,d,h;for(;u>=o;--u)if(f=u*e+s,c=u*e+a,d=f>>>Sd,h=c>>>Sd,d===h){if(n[d]&op[f&Pa]&hc[(c&Pa)+1])return!0}else{if(n[d]&op[f&Pa]||n[h]&hc[(c&Pa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,f,c,d,h;for(;o<=l;++o)if(u=o*e+s,f=o*e+a,c=u>>>Sd,d=f>>>Sd,c===d)r(c,op[u&Pa]&hc[(f&Pa)+1]);else for(r(c,op[u&Pa]),r(d,hc[(f&Pa)+1]),h=c+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,f,c,d,h;for(;o<=l;++o)if(u=o*e+s,f=o*e+a,c=u>>>Sd,d=f>>>Sd,c===d)i(c,hc[u&Pa]|op[(f&Pa)+1]);else for(i(c,hc[u&Pa]),i(d,op[(f&Pa)+1]),h=c+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function mut(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>put(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function gut(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,f=nu.width(o.datum,o.datum.text);let c=0,d,h,p,g,v,y,b;for(let w=0;w<l;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,g=a[w].y2===void 0?p:a[w].y2,v=(d+h)/2,y=(p+g)/2,b=Math.abs(h-d+g-p),b>=c&&(c=b,o.x=v,o.y=y);return v=f/2,y=u/2,d=o.x-v,h=o.x+v,p=o.y-y,g=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function wk(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Ap(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),f=e(t+l),c=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(u,c,f,d)||o.getRange(u,c,f,d)||a&&a.getRange(u,c,f,d)}function yut(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,f,c,d,h){const p=e.invert(u),g=e.invert(f);let v=c,y=s,b;if(!wk(p,g,d,h,i,s)&&!Ap(e,p,g,h,d,v,o,a)&&!Ap(e,p,g,h,d,h,o,null)){for(;y-v>=1;)b=(v+y)/2,Ap(e,p,g,h,d,b,o,a)?y=b:v=b;if(v>c)return[p,g,v,!0]}}return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,h=nu.width(u.datum,u.datum.text);let p=n?d:0,g=!1,v=!1,y=0,b,w,E,A,T,D,k,R,O,B,K,L,$,I,U,q,Y;for(let X=0;X<c;++X){for(b=f[X].x,E=f[X].y,w=f[X].x2===void 0?b:f[X].x2,A=f[X].y2===void 0?E:f[X].y2,b>w&&(Y=b,b=w,w=Y),E>A&&(Y=E,E=A,A=Y),O=e(b),K=e(w),B=~~((O+K)/2),L=e(E),I=e(A),$=~~((L+I)/2),k=B;k>=O;--k)for(R=$;R>=L;--R)q=l(k,R,p,h,d),q&&([u.x,u.y,p,g]=q);for(k=B;k<=K;++k)for(R=$;R<=I;++R)q=l(k,R,p,h,d),q&&([u.x,u.y,p,g]=q);!g&&!n&&(U=Math.abs(w-b+A-E),T=(b+w)/2,D=(E+A)/2,U>=y&&!wk(T,D,h,d,i,s)&&!Ap(e,T,D,d,h,d,o,null)&&(y=U,u.x=T,u.y=D,v=!0))}return g||v?(T=h/2,D=d/2,o.setRange(e(u.x-T),e(u.y-D),e(u.x+T),e(u.y+D)),u.align="center",u.baseline="middle",!0):!1}}const vut=[-1,-1,1,1],but=[-1,1,-1,1];function xut(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,h=nu.width(u.datum,u.datum.text),p=[];let g=n?d:0,v=!1,y=!1,b=0,w,E,A,T,D,k,R,O,B,K,L,$;for(let I=0;I<c;++I){for(w=f[I].x,A=f[I].y,E=f[I].x2===void 0?w:f[I].x2,T=f[I].y2===void 0?A:f[I].y2,p.push([e((w+E)/2),e((A+T)/2)]);p.length;)if([R,O]=p.pop(),!(o.get(R,O)||a.get(R,O)||l.get(R,O))){l.set(R,O);for(let U=0;U<4;++U)D=R+vut[U],k=O+but[U],l.outOfBounds(D,k,D,k)||p.push([D,k]);if(D=e.invert(R),k=e.invert(O),B=g,K=s,!wk(D,k,h,d,i,s)&&!Ap(e,D,k,d,h,B,o,a)&&!Ap(e,D,k,d,h,d,o,null)){for(;K-B>=1;)L=(B+K)/2,Ap(e,D,k,d,h,L,o,a)?K=L:B=L;B>g&&(u.x=D,u.y=k,g=B,v=!0)}}!v&&!n&&($=Math.abs(E-w+T-A),D=(w+E)/2,k=(A+T)/2,$>=b&&!wk(D,k,h,d,i,s)&&!Ap(e,D,k,d,h,d,o,null)&&(b=$,u.x=D,u.y=k,y=!0))}return v||y?(D=h/2,k=d/2,o.setRange(e(u.x-D),e(u.y-k),e(u.x+D),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const wut=["right","center","left"],_ut=["bottom","middle","top"];function Eut(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const f=u.boundary,c=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>s)return!1;let d=u.textWidth??0,h,p,g,v,y,b,w,E,A,T,D,k,R,O,B;for(let K=0;K<l;++K){if(h=(n[K]&3)-1,p=(n[K]>>>2&3)-1,g=h===0&&p===0||r[K]<0,v=h&&p?Math.SQRT1_2:1,y=r[K]<0?-1:1,b=f[1+h]+r[K]*h*v,D=f[4+p]+y*c*p/2+r[K]*p*v,E=D-c/2,A=D+c/2,k=e(b),O=e(E),B=e(A),!d)if(awe(k,k,O,B,o,a,b,b,E,A,f,g))d=nu.width(u.datum,u.datum.text);else continue;if(T=b+y*d*h/2,b=T-d/2,w=T+d/2,k=e(b),R=e(w),awe(k,R,O,B,o,a,b,w,E,A,f,g))return u.x=h?h*y<0?w:b:T,u.y=p?p*y<0?A:E:D,u.align=wut[h*y+1],u.baseline=_ut[p*y+1],o.setRange(k,O,R,B),!0}return!1}}function awe(e,t,n,r,i,s,o,a,l,u,f,c){return!(i.outOfBounds(e,n,t,r)||(c&&s||i).getRange(e,n,t,r))}const HF=0,GF=4,VF=8,WF=0,YF=1,XF=2,Sut={"top-left":HF+WF,top:HF+YF,"top-right":HF+XF,left:GF+WF,middle:GF+YF,right:GF+XF,"bottom-left":VF+WF,bottom:VF+YF,"bottom-right":VF+XF},Aut={naive:gut,"reduced-search":yut,floodfill:xut};function Cut(e,t,n,r,i,s,o,a,l,u,f){if(!e.length)return e;const c=Math.max(r.length,i.length),d=kut(r,c),h=Tut(i,c),p=Dut(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,v=g==="area",y=Lut(p,g,a,l),b=u===null||u===1/0,w=v&&f==="naive";let E=-1,A=-1;const T=e.map(O=>{const B=b?nu.width(O,O.text):void 0;return E=Math.max(E,B),A=Math.max(A,O.fontSize),{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(O),textWidth:B}});u=u===null||u===1/0?Math.max(E,A)+Math.max(...r):u;const D=mut(t[0],t[1],u);let k;if(!w){n&&T.sort((K,L)=>n(K.datum,L.datum));let O=!1;for(let K=0;K<h.length&&!O;++K)O=h[K]===5||d[K]<0;const B=(p&&o||v)&&e.map(K=>K.datum);k=s.length||B?dut(D,B||[],s,O,v):fut(D,o&&T)}const R=v?Aut[f](D,k,o,l):Eut(D,k,h,d);return T.forEach(O=>O.opacity=+R(O)),T}function kut(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Tut(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Sut[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Dut(e){return e&&e.mark&&e.mark.marktype}function Lut(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const d5=["x","y","opacity","align","baseline"],gOe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function n9(e){rt.call(this,null,e)}n9.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:gOe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:d5.length,default:d5}]};Lt(n9,rt,{transform(e,t){function n(s){const o=e[s];return ir(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ot("Size parameter should be specified as a [width, height] array.");const i=e.as||d5;return Cut(t.materialize(t.SOURCE).source||[],e.size,e.sort,Pt(e.offset==null?1:e.offset),Pt(e.anchor||gOe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Rut=Object.freeze(Object.defineProperty({__proto__:null,label:n9},Symbol.toStringTag,{value:"Module"}));function yOe(e,t){var n=[],r=function(f){return f(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function r9(e){rt.call(this,null,e)}r9.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Lt(r9,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=yOe(r,e.groupby),s=(e.groupby||[]).map(Rs),o=s.length,a=e.as||[Rs(e.x),Rs(e.y)],l=[];i.forEach(u=>{fDe(u,e.x,e.y,e.bandwidth||.3).forEach(f=>{const c={};for(let d=0;d<o;++d)c[s[d]]=u.dims[d];c[a[0]]=f[0],c[a[1]]=f[1],l.push(yi(c))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const h5={constant:JP,linear:QP,log:aDe,exp:lDe,pow:uDe,quad:e8,poly:cDe},Fut=(e,t)=>e==="poly"?t:e==="quad"?2:1;function i9(e){rt.call(this,null,e)}i9.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(h5)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Lt(i9,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=yOe(r,e.groupby),s=(e.groupby||[]).map(Rs),o=e.method||"linear",a=e.order==null?3:e.order,l=Fut(o,a),u=e.as||[Rs(e.x),Rs(e.y)],f=h5[o],c=[];let d=e.extent;Yt(h5,o)||ot("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=f(h,e.x,e.y,a);if(e.params){c.push(yi({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const v=d||$f(h,e.x),y=b=>{const w={};for(let E=0;E<s.length;++E)w[s[E]]=h.dims[E];w[u[0]]=b[0],w[u[1]]=b[1],c.push(yi(w))};o==="linear"||o==="constant"?v.forEach(b=>y([b,g.predict(b)])):UD(g.predict,v,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const Out=Object.freeze(Object.defineProperty({__proto__:null,loess:r9,regression:i9},Symbol.toStringTag,{value:"Module"})),Wd=11102230246251565e-32,ga=134217729,Mut=(3+8*Wd)*Wd;function ZF(e,t,n,r,i){let s,o,a,l,u=t[0],f=r[0],c=0,d=0;f>u==f>-u?(s=u,u=t[++c]):(s=f,f=r[++d]);let h=0;if(c<e&&d<n)for(f>u==f>-u?(o=u+s,a=s-(o-u),u=t[++c]):(o=f+s,a=s-(o-f),f=r[++d]),s=o,a!==0&&(i[h++]=a);c<e&&d<n;)f>u==f>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++c]):(o=s+f,l=o-s,a=s-(o-l)+(f-l),f=r[++d]),s=o,a!==0&&(i[h++]=a);for(;c<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++c],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+f,l=o-s,a=s-(o-l)+(f-l),f=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function $ut(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function FE(e){return new Float64Array(e)}const Iut=(3+16*Wd)*Wd,Put=(2+12*Wd)*Wd,Nut=(9+64*Wd)*Wd*Wd,zy=FE(4),lwe=FE(8),uwe=FE(12),cwe=FE(16),Na=FE(4);function But(e,t,n,r,i,s,o){let a,l,u,f,c,d,h,p,g,v,y,b,w,E,A,T,D,k;const R=e-i,O=n-i,B=t-s,K=r-s;E=R*K,d=ga*R,h=d-(d-R),p=R-h,d=ga*K,g=d-(d-K),v=K-g,A=p*v-(E-h*g-p*g-h*v),T=B*O,d=ga*B,h=d-(d-B),p=B-h,d=ga*O,g=d-(d-O),v=O-g,D=p*v-(T-h*g-p*g-h*v),y=A-D,c=A-y,zy[0]=A-(y+c)+(c-D),b=E+y,c=b-E,w=E-(b-c)+(y-c),y=w-T,c=w-y,zy[1]=w-(y+c)+(c-T),k=b+y,c=k-b,zy[2]=b-(k-c)+(y-c),zy[3]=k;let L=$ut(4,zy),$=Put*o;if(L>=$||-L>=$||(c=e-R,a=e-(R+c)+(c-i),c=n-O,u=n-(O+c)+(c-i),c=t-B,l=t-(B+c)+(c-s),c=r-K,f=r-(K+c)+(c-s),a===0&&l===0&&u===0&&f===0)||($=Nut*o+Mut*Math.abs(L),L+=R*f+K*a-(B*u+O*l),L>=$||-L>=$))return L;E=a*K,d=ga*a,h=d-(d-a),p=a-h,d=ga*K,g=d-(d-K),v=K-g,A=p*v-(E-h*g-p*g-h*v),T=l*O,d=ga*l,h=d-(d-l),p=l-h,d=ga*O,g=d-(d-O),v=O-g,D=p*v-(T-h*g-p*g-h*v),y=A-D,c=A-y,Na[0]=A-(y+c)+(c-D),b=E+y,c=b-E,w=E-(b-c)+(y-c),y=w-T,c=w-y,Na[1]=w-(y+c)+(c-T),k=b+y,c=k-b,Na[2]=b-(k-c)+(y-c),Na[3]=k;const I=ZF(4,zy,4,Na,lwe);E=R*f,d=ga*R,h=d-(d-R),p=R-h,d=ga*f,g=d-(d-f),v=f-g,A=p*v-(E-h*g-p*g-h*v),T=B*u,d=ga*B,h=d-(d-B),p=B-h,d=ga*u,g=d-(d-u),v=u-g,D=p*v-(T-h*g-p*g-h*v),y=A-D,c=A-y,Na[0]=A-(y+c)+(c-D),b=E+y,c=b-E,w=E-(b-c)+(y-c),y=w-T,c=w-y,Na[1]=w-(y+c)+(c-T),k=b+y,c=k-b,Na[2]=b-(k-c)+(y-c),Na[3]=k;const U=ZF(I,lwe,4,Na,uwe);E=a*f,d=ga*a,h=d-(d-a),p=a-h,d=ga*f,g=d-(d-f),v=f-g,A=p*v-(E-h*g-p*g-h*v),T=l*u,d=ga*l,h=d-(d-l),p=l-h,d=ga*u,g=d-(d-u),v=u-g,D=p*v-(T-h*g-p*g-h*v),y=A-D,c=A-y,Na[0]=A-(y+c)+(c-D),b=E+y,c=b-E,w=E-(b-c)+(y-c),y=w-T,c=w-y,Na[1]=w-(y+c)+(c-T),k=b+y,c=k-b,Na[2]=b-(k-c)+(y-c),Na[3]=k;const q=ZF(U,uwe,4,Na,cwe);return cwe[q-1]}function CA(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=Iut*u?l:-But(e,t,n,r,i,s,u)}const fwe=Math.pow(2,-52),kA=new Uint32Array(512);class _k{static from(t,n=Hut,r=Gut){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new _k(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,f=-1/0;for(let R=0;R<o;R++){const O=t[2*R],B=t[2*R+1];O<a&&(a=O),B<l&&(l=B),O>u&&(u=O),B>f&&(f=B),this._ids[R]=R}const c=(a+u)/2,d=(l+f)/2;let h,p,g;for(let R=0,O=1/0;R<o;R++){const B=KF(c,d,t[2*R],t[2*R+1]);B<O&&(h=R,O=B)}const v=t[2*h],y=t[2*h+1];for(let R=0,O=1/0;R<o;R++){if(R===h)continue;const B=KF(v,y,t[2*R],t[2*R+1]);B<O&&B>0&&(p=R,O=B)}let b=t[2*p],w=t[2*p+1],E=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const O=Uut(v,y,b,w,t[2*R],t[2*R+1]);O<E&&(g=R,E=O)}let A=t[2*g],T=t[2*g+1];if(E===1/0){for(let B=0;B<o;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];mv(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let O=0;for(let B=0,K=-1/0;B<o;B++){const L=this._ids[B],$=this._dists[L];$>K&&(R[O++]=L,K=$)}this.hull=R.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(CA(v,y,b,w,A,T)<0){const R=p,O=b,B=w;p=g,b=A,w=T,g=R,A=O,T=B}const D=qut(v,y,b,w,A,T);this._cx=D.x,this._cy=D.y;for(let R=0;R<o;R++)this._dists[R]=KF(t[2*R],t[2*R+1],D.x,D.y);mv(this._ids,this._dists,0,o-1),this._hullStart=h;let k=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(v,y)]=h,s[this._hashKey(b,w)]=p,s[this._hashKey(A,T)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let R=0,O,B;R<this._ids.length;R++){const K=this._ids[R],L=t[2*K],$=t[2*K+1];if(R>0&&Math.abs(L-O)<=fwe&&Math.abs($-B)<=fwe||(O=L,B=$,K===h||K===p||K===g))continue;let I=0;for(let te=0,le=this._hashKey(L,$);te<this._hashSize&&(I=s[(le+te)%this._hashSize],!(I!==-1&&I!==r[I]));te++);I=n[I];let U=I,q;for(;q=r[U],CA(L,$,t[2*U],t[2*U+1],t[2*q],t[2*q+1])>=0;)if(U=q,U===I){U=-1;break}if(U===-1)continue;let Y=this._addTriangle(U,K,r[U],-1,-1,i[U]);i[K]=this._legalize(Y+2),i[U]=Y,k++;let X=r[U];for(;q=r[X],CA(L,$,t[2*X],t[2*X+1],t[2*q],t[2*q+1])<0;)Y=this._addTriangle(X,K,q,i[K],-1,i[X]),i[K]=this._legalize(Y+2),r[X]=X,k--,X=q;if(U===I)for(;q=n[U],CA(L,$,t[2*q],t[2*q+1],t[2*U],t[2*U+1])<0;)Y=this._addTriangle(q,K,U,-1,i[U],i[q]),this._legalize(Y+2),i[q]=Y,r[U]=U,k--,U=q;this._hullStart=n[K]=U,r[U]=n[X]=K,r[K]=X,s[this._hashKey(L,$)]=K,s[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(k);for(let R=0,O=this._hullStart;R<k;R++)this.hull[R]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(zut(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=kA[--s];continue}const u=a-a%3,f=l+(t+1)%3,c=u+(a+2)%3,d=n[o],h=n[t],p=n[f],g=n[c];if(jut(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[c];if(y===-1){let w=this._hullStart;do{if(this._hullTri[w]===c){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,c);const b=u+(a+1)%3;s<kA.length&&(kA[s++]=b)}else{if(s===0)break;t=kA[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function zut(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function KF(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function jut(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,f=n-o,c=r-a,d=i-o,h=s-a,p=l*l+u*u,g=f*f+c*c,v=d*d+h*h;return l*(c*v-g*h)-u*(f*v-g*d)+p*(f*h-c*d)<0}function Uut(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,f=o*o+a*a,c=l*l+u*u,d=.5/(o*u-a*l),h=(u*f-a*c)*d,p=(o*c-l*f)*d;return h*h+p*p}function qut(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,f=o*o+a*a,c=l*l+u*u,d=.5/(o*u-a*l),h=e+(u*f-a*c)*d,p=t+(o*c-l*f)*d;return{x:h,y:p}}function mv(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;mw(e,i,s),t[e[n]]>t[e[r]]&&mw(e,n,r),t[e[s]]>t[e[r]]&&mw(e,s,r),t[e[n]]>t[e[s]]&&mw(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;mw(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(mv(e,t,s,r),mv(e,t,n,o-1)):(mv(e,t,n,o-1),mv(e,t,s,r))}}function mw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Hut(e){return e[0]}function Gut(e){return e[1]}const dwe=1e-6;class $g{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>dwe||Math.abs(this._y1-s)>dwe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class p5{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Vut=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,v=0,y=r.length,b,w;g<y;g+=3,v+=2){const E=r[g]*2,A=r[g+1]*2,T=r[g+2]*2,D=t[E],k=t[E+1],R=t[A],O=t[A+1],B=t[T],K=t[T+1],L=R-D,$=O-k,I=B-D,U=K-k,q=(L*U-$*I)*2;if(Math.abs(q)<1e-9){if(s===void 0){s=o=0;for(const X of n)s+=t[X*2],o+=t[X*2+1];s/=n.length,o/=n.length}const Y=1e9*Math.sign((s-D)*U-(o-k)*I);b=(D+B)/2-Y*U,w=(k+K)/2+Y*I}else{const Y=1/q,X=L*L+$*$,te=I*I+U*U;b=D+(U*X-$*te)*Y,w=k+(L*te-I*X)*Y}a[v]=b,a[v+1]=w}let l=n[n.length-1],u,f=l*4,c,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=f,c=d,h=p,f=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[f]=h-p,i[u+3]=i[f+1]=d-c}render(t){const n=t==null?t=new $g:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let f=0,c=r.length;f<c;++f){const d=r[f];if(d<f)continue;const h=Math.floor(f/3)*2,p=Math.floor(d/3)*2,g=o[h],v=o[h+1],y=o[p],b=o[p+1];this._renderSegment(g,v,y,b,t)}let l,u=s[s.length-1];for(let f=0;f<s.length;++f){l=u,u=s[f];const c=Math.floor(i[u]/3)*2,d=o[c],h=o[c+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new $g:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new $g:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new p5;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,f=this._regioncode(a,l),c,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=f,f=this._regioncode(a,l),u===0&&f===0)c=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,v,y,b;if(u===0){if((p=this._clipSegment(s,o,a,l,u,f))===null)continue;[g,v,y,b]=p}else{if((p=this._clipSegment(a,l,s,o,f,u))===null)continue;[y,b,g,v]=p,c=d,d=this._edgecode(g,v),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(g,v):i=[g,v]}c=d,d=this._edgecode(y,b),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(y,b):i=[y,b]}if(i)c=d,d=this._edgecode(i[0],i[1]),c&&d&&this._edge(t,c,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,f=s||o;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,f=a.length,c,d=this._edgecode(a[f-2],a[f-1]);u<f;u+=2)c=d,d=this._edgecode(a[u],a[u+1]),c&&d&&(u=this._edge(t,c,d,a,u),f=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Wut=2*Math.PI,jy=Math.pow;function Yut(e){return e[0]}function Xut(e){return e[1]}function Zut(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Kut(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class s9{static from(t,n=Yut,r=Xut,i){return new s9("length"in t?Jut(t,n,r,i):Float64Array.from(Qut(t,n,r,i)))}constructor(t){this._delaunator=new _k(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Zut(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],c=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Kut(n[2*d],n[2*d+1],c);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new _k(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const f=s[l%3===2?l-2:l+1];(r[l]===-1||o[f]===-1)&&(o[f]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Vut(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const c=a.indexOf(t);c>0&&(yield a[c-1]),c<a.length-1&&(yield a[c+1]);return}const l=n[t];if(l===-1)return;let u=l,f=-1;do{if(yield f=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const c=r[(i[t]+1)%r.length];c!==f&&(yield c);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let f=t,c=jy(n-u[t*2],2)+jy(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=jy(n-u[p*2],2)+jy(r-u[p*2+1],2);if(g<c&&(c=g,f=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&jy(n-u[h*2],2)+jy(r-u[h*2+1],2)<c)return h;break}}while(h!==d);return f}render(t){const n=t==null?t=new $g:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,f=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new $g:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,Wut)}return r&&r.value()}renderHull(t){const n=t==null?t=new $g:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new p5;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new $g:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new p5;return this.renderTriangle(t,n),n.value()}}function Jut(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Qut(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function o9(e){rt.call(this,null,e)}o9.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const ect=[-1e5,-1e5,1e5,1e5];Lt(o9,rt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:ect;const s=this.value=s9.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!nct(l)?tct(l):null}return t.reflow(e.modified()).modifies(n)}});function tct(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function nct(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const rct=Object.freeze(Object.defineProperty({__proto__:null,voronoi:o9},Symbol.toStringTag,{value:"Module"}));var JF=Math.PI/180,e_=64,$C=2048;function ict(){var e=[256,256],t,n,r,i,s,o,a,l=vOe,u=[],f=Math.random,c={};c.layout=function(){for(var p=d(Mp()),g=cct((e[0]>>5)*e[1]),v=null,y=u.length,b=-1,w=[],E=u.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,D)=>D.size-T.size);++b<y;){var A=E[b];A.x=e[0]*(f()+.5)>>1,A.y=e[1]*(f()+.5)>>1,sct(p,A,E,b),A.hasText&&h(g,A,v)&&(w.push(A),v?act(v,A):v=[{x:A.x+A.x0,y:A.y+A.y0},{x:A.x+A.x1,y:A.y+A.y1}],A.x-=e[0]>>1,A.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(e_<<5)/g,p.height=$C/g;var v=p.getContext("2d");return v.fillStyle=v.strokeStyle="red",v.textAlign="center",{context:v,ratio:g}}function h(p,g,v){for(var y=g.x,b=g.y,w=Math.hypot(e[0],e[1]),E=l(e),A=f()<.5?1:-1,T=-A,D,k,R;(D=E(T+=A))&&(k=~~D[0],R=~~D[1],!(Math.min(Math.abs(k),Math.abs(R))>=w));)if(g.x=y+k,g.y=b+R,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!v||!oct(g,p,e[0]))&&(!v||lct(g,v))){for(var O=g.sprite,B=g.width>>5,K=e[0]>>5,L=g.x-(B<<4),$=L&127,I=32-$,U=g.y1-g.y0,q=(g.y+g.y0)*K+(L>>5),Y,X=0;X<U;X++){Y=0;for(var te=0;te<=B;te++)p[q+te]|=Y<<I|(te<B?(Y=O[X*B+te])>>>$:0);q+=K}return g.sprite=null,!0}return!1}return c.words=function(p){return arguments.length?(u=p,c):u},c.size=function(p){return arguments.length?(e=[+p[0],+p[1]],c):e},c.font=function(p){return arguments.length?(n=rg(p),c):n},c.fontStyle=function(p){return arguments.length?(i=rg(p),c):i},c.fontWeight=function(p){return arguments.length?(s=rg(p),c):s},c.rotate=function(p){return arguments.length?(o=rg(p),c):o},c.text=function(p){return arguments.length?(t=rg(p),c):t},c.spiral=function(p){return arguments.length?(l=fct[p]||p,c):l},c.fontSize=function(p){return arguments.length?(r=rg(p),c):r},c.padding=function(p){return arguments.length?(a=rg(p),c):a},c.random=function(p){return arguments.length?(f=p,c):f},c}function sct(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(e_<<5)/s,$C/s);var o=0,a=0,l=0,u=n.length,f,c,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,f=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*JF),v=Math.cos(t.rotate*JF),y=f*v,b=f*g,w=d*v,E=d*g;f=Math.max(Math.abs(y+E),Math.abs(y-E))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else f=f+31>>5<<5;if(d>l&&(l=d),o+f>=e_<<5&&(o=0,a+=l,l=0),a+d>=$C)break;i.translate((o+(f>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*JF),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=d,t.xoff=o,t.yoff=a,t.x1=f>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=f}for(var A=i.getImageData(0,0,(e_<<5)/s,$C/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,c=f>>5,d=t.y1-t.y0,h=0;h<d*c;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var D=0,k=-1;for(p=0;p<d;p++){for(h=0;h<f;h++){var R=c*p+(h>>5),O=A[(a+p)*(e_<<5)+(o+h)<<2]?1<<31-h%32:0;T[R]|=O,D|=O}D?k=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+k,t.sprite=T.slice(0,(t.y1-t.y0)*c)}}}function oct(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),f,c=0;c<l;c++){f=0;for(var d=0;d<=i;d++)if((f<<a|(d<i?(f=r[c*i+d])>>>o:0))&t[u+d])return!0;u+=n}return!1}function act(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function lct(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function vOe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function uct(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function cct(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function rg(e){return typeof e=="function"?e:function(){return e}}var fct={archimedean:vOe,rectangular:uct};const bOe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],dct=["text","font","rotate","fontSize","fontStyle","fontWeight"];function a9(e){rt.call(this,ict(),e)}a9.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:bOe}]};Lt(a9,rt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ot("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return ir(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||dct.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||bOe;let a=e.fontSize||14,l;if(ir(a)?l=e.fontSizeRange:a=Fa(a),l){const p=a,g=ui("sqrt")().domain($f(i,p)).range(l);a=v=>g(p(v))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Pu).layout(),f=s.size(),c=f[0]>>1,d=f[1]>>1,h=u.length;for(let p=0,g,v;p<h;++p)g=u[p],v=g.datum,v[o[0]]=g.x+c,v[o[1]]=g.y+d,v[o[2]]=g.font,v[o[3]]=g.size,v[o[4]]=g.style,v[o[5]]=g.weight,v[o[6]]=g.rotate;return t.reflow(r).modifies(o)}});const hct=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:a9},Symbol.toStringTag,{value:"Module"})),pct=e=>new Uint8Array(e),mct=e=>new Uint16Array(e),A_=e=>new Uint32Array(e);function gct(){let e=8,t=[],n=A_(0),r=TA(0,e),i=TA(0,e);return{data:()=>t,seen:()=>n=yct(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let f,c,d;for(c=0;!o[c]&&c<a;++c)l[c]=t[c],u[c]=c;for(d=c;c<a;++c)f=t[c],o[c]?u[c]=-1:(u[c]=d,r[d]=r[c],i[d]=i[c],l[d]=f,f._index=d++),r[c]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=TA(s,e,r),i=TA(s,e))}}}function yct(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function TA(e,t,n){const r=(t<257?pct:t<65537?mct:A_)(e);return n&&r.set(n),r}function hwe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],f=a[1],c=l.length;let d;for(d=0;d<u;++d)s[l[d]]|=r;for(d=f;d<c;++d)s[l[d]]|=r;return o}}}function pwe(){let e=A_(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const f=n,c=l.length,d=A_(c);let h=Array(c),p,g,v;for(v=0;v<c;++v)h[v]=a(l[v]),d[v]=v;if(h=vct(h,d),f)p=t,g=e,t=Array(f+c),e=A_(f+c),bct(u,p,g,f,h,d,c,t,e);else{if(u>0)for(v=0;v<c;++v)d[v]+=u;t=h,e=d}return n=f+c,{index:d,value:h}}function i(a,l){const u=n;let f,c,d;for(c=0;!l[e[c]]&&c<u;++c);for(d=c;c<u;++c)l[f=e[c]]||(e[d]=f,t[d]=t[c],++d);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[Uze(l,a[0],0,u),j_(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function vct(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),lUe(e,t)}function bct(e,t,n,r,i,s,o,a,l){let u=0,f=0,c;for(c=0;u<r&&f<o;++c)t[u]<i[f]?(a[c]=t[u],l[c]=n[u++]):(a[c]=i[f],l[c]=s[f++]+e);for(;u<r;++u,++c)a[c]=t[u],l[c]=n[u];for(;f<o;++f,++c)a[c]=i[f],l[c]=s[f]+e}function l9(e){rt.call(this,gct(),e),this._indices=null,this._dims=null}l9.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Lt(l9,rt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=pwe()),s.push(hwe(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),f=a.all(),c=n.rem=n.add,d=n.mod,h=i.length,p={};let g,v,y,b,w,E,A,T,D;if(u.set(l),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,A=0,T=b.length;A<T;++A)E[b[A]._index]=1;for(A=0;A<h;++A)D=r[A],(!o[A]||e.modified("fields",A)||t.modified(D.fields))&&(y=D.fname,(g=p[y])||(s[y]=v=pwe(),p[y]=g=v.insert(D,t.source,0)),o[A]=hwe(v,A,i[A]).onAdd(g,l));for(A=0,T=a.data().length;A<T;++A)w[A]||(u[A]!==l[A]?c.push(A):E[A]&&l[A]!==f&&d.push(A));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,f=i.size()+r.length,c=s.length;let d=i.size(),h,p,g;i.resize(f,c),i.add(r);const v=i.curr(),y=i.prev(),b=i.all();for(h=0;h<c;++h)p=a[h].fname,g=l[p]||(l[p]=o[p].insert(a[h],r,d)),s[h].onAdd(g,v);for(;d<f;++d)y[d]=b,v[d]!==b&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,f=t.rem;let c,d,h,p;for(c=0,d=f.length;c<d;++c)h=f[c]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),f=e.bisect(t),c=f[0],d=f[1],h=u[0],p=u[1],g=e.one;let v,y,b;if(c<h)for(v=c,y=Math.min(h,d);v<y;++v)b=l[v],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;else if(c>h)for(v=h,y=Math.min(c,p);v<y;++v)b=l[v],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;if(d>p)for(v=Math.max(c,p),y=d;v<y;++v)b=l[v],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;else if(d<p)for(v=Math.max(h,d),y=p;v<y;++v)b=l[v],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],f=l[1],c=a[0],d=a[1],h=e.one;let p,g,v;if(u<c)for(p=u,g=Math.min(c,f);p<g;++p)v=o[p],s[v]^=h,n.push(v);else if(u>c)for(p=c,g=Math.min(u,d);p<g;++p)v=o[p],s[v]^=h,r.push(v);if(f>d)for(p=Math.max(u,d),g=f;p<g;++p)v=o[p],s[v]^=h,n.push(v);else if(f<d)for(p=Math.max(c,f),g=d;p<g;++p)v=o[p],s[v]^=h,r.push(v);e.range=t.slice()}});function u9(e){rt.call(this,null,e)}u9.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Lt(u9,rt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=f=>a[f]&n?null:o[f];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,f=>{const c=a[f]&n;return!c&&c^l[f]&n?o[f]:null}),s.filter(s.REM,f=>{const c=a[f]&n;return c&&!(c^(c^l[f]&n))?o[f]:null})):(s.filter(s.ADD,u),s.filter(s.REM,f=>(a[f]&n)===i?o[f]:null)),s.filter(s.SOURCE,f=>u(f._index))}});const xct=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:l9,resolvefilter:u9},Symbol.toStringTag,{value:"Module"})),wct="RawCode",o0="Literal",_ct="Property",Ect="Identifier",Sct="ArrayExpression",Act="BinaryExpression",xOe="CallExpression",Cct="ConditionalExpression",kct="LogicalExpression",Tct="MemberExpression",Dct="ObjectExpression",Lct="UnaryExpression";function Pc(e){this.type=e}Pc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Rct(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Rct(e){switch(e.type){case Sct:return e.elements;case Act:case kct:return[e.left,e.right];case xOe:return[e.callee].concat(e.arguments);case Cct:return[e.test,e.consequent,e.alternate];case Tct:return[e.object,e.property];case Dct:return e.properties;case _ct:return[e.key,e.value];case Lct:return[e.argument];case Ect:case o0:case wct:default:return[]}}var Xf,ln,st,Da,Ti,mL=1,OE=2,a0=3,um=4,gL=5,O0=6,wl=7,ME=8,Fct=9;Xf={};Xf[mL]="Boolean";Xf[OE]="<end>";Xf[a0]="Identifier";Xf[um]="Keyword";Xf[gL]="Null";Xf[O0]="Numeric";Xf[wl]="Punctuator";Xf[ME]="String";Xf[Fct]="RegularExpression";var Oct="ArrayExpression",Mct="BinaryExpression",$ct="CallExpression",Ict="ConditionalExpression",wOe="Identifier",Pct="Literal",Nct="LogicalExpression",Bct="MemberExpression",zct="ObjectExpression",jct="Property",Uct="UnaryExpression",Do="Unexpected token %0",qct="Unexpected number",Hct="Unexpected string",Gct="Unexpected identifier",Vct="Unexpected reserved word",Wct="Unexpected end of input",m5="Invalid regular expression",QF="Invalid regular expression: missing /",_Oe="Octal literals are not allowed in strict mode.",Yct="Duplicate data property in object literal not allowed in strict mode",Qo="ILLEGAL",p2="Disabled.",Xct=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Zct=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function yL(e,t){if(!e)throw new Error("ASSERT: "+t)}function Rd(e){return e>=48&&e<=57}function c9(e){return"0123456789abcdefABCDEF".includes(e)}function C_(e){return"01234567".includes(e)}function Kct(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function m2(e){return e===10||e===13||e===8232||e===8233}function $E(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Xct.test(String.fromCharCode(e))}function Ek(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Zct.test(String.fromCharCode(e))}const Jct={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function EOe(){for(;st<Da;){const e=ln.charCodeAt(st);if(Kct(e)||m2(e))++st;else break}}function g5(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)st<Da&&c9(ln[st])?(r=ln[st++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ii({},Do,Qo);return String.fromCharCode(i)}function Qct(){var e,t,n,r;for(e=ln[st],t=0,e==="}"&&ii({},Do,Qo);st<Da&&(e=ln[st++],!!c9(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ii({},Do,Qo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function SOe(){var e,t;for(e=ln.charCodeAt(st++),t=String.fromCharCode(e),e===92&&(ln.charCodeAt(st)!==117&&ii({},Do,Qo),++st,e=g5("u"),(!e||e==="\\"||!$E(e.charCodeAt(0)))&&ii({},Do,Qo),t=e);st<Da&&(e=ln.charCodeAt(st),!!Ek(e));)++st,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ln.charCodeAt(st)!==117&&ii({},Do,Qo),++st,e=g5("u"),(!e||e==="\\"||!Ek(e.charCodeAt(0)))&&ii({},Do,Qo),t+=e);return t}function eft(){var e,t;for(e=st++;st<Da;){if(t=ln.charCodeAt(st),t===92)return st=e,SOe();if(Ek(t))++st;else break}return ln.slice(e,st)}function tft(){var e,t,n;return e=st,t=ln.charCodeAt(st)===92?SOe():eft(),t.length===1?n=a0:Jct.hasOwnProperty(t)?n=um:t==="null"?n=gL:t==="true"||t==="false"?n=mL:n=a0,{type:n,value:t,start:e,end:st}}function eO(){var e=st,t=ln.charCodeAt(st),n,r=ln[st],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++st,{type:wl,value:String.fromCharCode(t),start:e,end:st};default:if(n=ln.charCodeAt(st+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return st+=2,{type:wl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:st};case 33:case 61:return st+=2,ln.charCodeAt(st)===61&&++st,{type:wl,value:ln.slice(e,st),start:e,end:st}}}if(o=ln.substr(st,4),o===">>>=")return st+=4,{type:wl,value:o,start:e,end:st};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return st+=3,{type:wl,value:s,start:e,end:st};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return st+=2,{type:wl,value:i,start:e,end:st};if(i==="//"&&ii({},Do,Qo),"<>=!+-*%&|^/".includes(r))return++st,{type:wl,value:r,start:e,end:st};ii({},Do,Qo)}function nft(e){let t="";for(;st<Da&&c9(ln[st]);)t+=ln[st++];return t.length===0&&ii({},Do,Qo),$E(ln.charCodeAt(st))&&ii({},Do,Qo),{type:O0,value:parseInt("0x"+t,16),start:e,end:st}}function rft(e){let t="0"+ln[st++];for(;st<Da&&C_(ln[st]);)t+=ln[st++];return($E(ln.charCodeAt(st))||Rd(ln.charCodeAt(st)))&&ii({},Do,Qo),{type:O0,value:parseInt(t,8),octal:!0,start:e,end:st}}function mwe(){var e,t,n;if(n=ln[st],yL(Rd(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=st,e="",n!=="."){if(e=ln[st++],n=ln[st],e==="0"){if(n==="x"||n==="X")return++st,nft(t);if(C_(n))return rft(t);n&&Rd(n.charCodeAt(0))&&ii({},Do,Qo)}for(;Rd(ln.charCodeAt(st));)e+=ln[st++];n=ln[st]}if(n==="."){for(e+=ln[st++];Rd(ln.charCodeAt(st));)e+=ln[st++];n=ln[st]}if(n==="e"||n==="E")if(e+=ln[st++],n=ln[st],(n==="+"||n==="-")&&(e+=ln[st++]),Rd(ln.charCodeAt(st)))for(;Rd(ln.charCodeAt(st));)e+=ln[st++];else ii({},Do,Qo);return $E(ln.charCodeAt(st))&&ii({},Do,Qo),{type:O0,value:parseFloat(e),start:t,end:st}}function ift(){var e="",t,n,r,i,s=!1;for(t=ln[st],yL(t==="'"||t==='"',"String literal must starts with a quote"),n=st,++st;st<Da;)if(r=ln[st++],r===t){t="";break}else if(r==="\\")if(r=ln[st++],!r||!m2(r.charCodeAt(0)))switch(r){case"u":case"x":ln[st]==="{"?(++st,e+=Qct()):e+=g5(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:C_(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),st<Da&&C_(ln[st])&&(s=!0,i=i*8+"01234567".indexOf(ln[st++]),"0123".includes(r)&&st<Da&&C_(ln[st])&&(i=i*8+"01234567".indexOf(ln[st++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ln[st]===`
`&&++st;else{if(m2(r.charCodeAt(0)))break;e+=r}return t!==""&&ii({},Do,Qo),{type:ME,value:e,octal:s,start:n,end:st}}function sft(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ii({},m5)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ii({},m5)}try{return new RegExp(e,t)}catch{return null}}function oft(){var e,t,n,r,i;for(e=ln[st],yL(e==="/","Regular expression literal must start with a slash"),t=ln[st++],n=!1,r=!1;st<Da;)if(e=ln[st++],t+=e,e==="\\")e=ln[st++],m2(e.charCodeAt(0))&&ii({},QF),t+=e;else if(m2(e.charCodeAt(0)))ii({},QF);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ii({},QF),i=t.substr(1,t.length-2),{value:i,literal:t}}function aft(){var e,t,n;for(t="",n="";st<Da&&(e=ln[st],!!Ek(e.charCodeAt(0)));)++st,e==="\\"&&st<Da?ii({},Do,Qo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ii({},m5,n),{value:n,literal:t}}function lft(){var e,t,n,r;return Ti=null,EOe(),e=st,t=oft(),n=aft(),r=sft(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:st}}function uft(e){return e.type===a0||e.type===um||e.type===mL||e.type===gL}function AOe(){if(EOe(),st>=Da)return{type:OE,start:st,end:st};const e=ln.charCodeAt(st);return $E(e)?tft():e===40||e===41||e===59?eO():e===39||e===34?ift():e===46?Rd(ln.charCodeAt(st+1))?mwe():eO():Rd(e)?mwe():eO()}function Sl(){const e=Ti;return st=e.end,Ti=AOe(),st=e.end,e}function COe(){const e=st;Ti=AOe(),st=e}function cft(e){const t=new Pc(Oct);return t.elements=e,t}function gwe(e,t,n){const r=new Pc(e==="||"||e==="&&"?Nct:Mct);return r.operator=e,r.left=t,r.right=n,r}function fft(e,t){const n=new Pc($ct);return n.callee=e,n.arguments=t,n}function dft(e,t,n){const r=new Pc(Ict);return r.test=e,r.consequent=t,r.alternate=n,r}function f9(e){const t=new Pc(wOe);return t.name=e,t}function t_(e){const t=new Pc(Pct);return t.value=e.value,t.raw=ln.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function ywe(e,t,n){const r=new Pc(Bct);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function hft(e){const t=new Pc(zct);return t.properties=e,t}function vwe(e,t,n){const r=new Pc(jct);return r.key=t,r.value=n,r.kind=e,r}function pft(e,t){const n=new Pc(Uct);return n.operator=e,n.argument=t,n.prefix=!0,n}function ii(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(yL(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=st,n.description=i,n}function vL(e){e.type===OE&&ii(e,Wct),e.type===O0&&ii(e,qct),e.type===ME&&ii(e,Hct),e.type===a0&&ii(e,Gct),e.type===um&&ii(e,Vct),ii(e,Do,e.value)}function La(e){const t=Sl();(t.type!==wl||t.value!==e)&&vL(t)}function is(e){return Ti.type===wl&&Ti.value===e}function tO(e){return Ti.type===um&&Ti.value===e}function mft(){const e=[];for(st=Ti.start,La("[");!is("]");)is(",")?(Sl(),e.push(null)):(e.push(l0()),is("]")||La(","));return Sl(),cft(e)}function bwe(){st=Ti.start;const e=Sl();return e.type===ME||e.type===O0?(e.octal&&ii(e,_Oe),t_(e)):f9(e.value)}function gft(){var e,t,n,r;if(st=Ti.start,e=Ti,e.type===a0)return n=bwe(),La(":"),r=l0(),vwe("init",n,r);if(e.type===OE||e.type===wl)vL(e);else return t=bwe(),La(":"),r=l0(),vwe("init",t,r)}function yft(){var e=[],t,n,r,i={},s=String;for(st=Ti.start,La("{");!is("}");)t=gft(),t.key.type===wOe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ii({},Yct):i[r]=!0,e.push(t),is("}")||La(",");return La("}"),hft(e)}function vft(){La("(");const e=d9();return La(")"),e}const bft={if:1};function xft(){var e,t,n;if(is("("))return vft();if(is("["))return mft();if(is("{"))return yft();if(e=Ti.type,st=Ti.start,e===a0||bft[Ti.value])n=f9(Sl().value);else if(e===ME||e===O0)Ti.octal&&ii(Ti,_Oe),n=t_(Sl());else{if(e===um)throw new Error(p2);e===mL?(t=Sl(),t.value=t.value==="true",n=t_(t)):e===gL?(t=Sl(),t.value=null,n=t_(t)):is("/")||is("/=")?(n=t_(lft()),COe()):vL(Sl())}return n}function wft(){const e=[];if(La("("),!is(")"))for(;st<Da&&(e.push(l0()),!is(")"));)La(",");return La(")"),e}function _ft(){st=Ti.start;const e=Sl();return uft(e)||vL(e),f9(e.value)}function Eft(){return La("."),_ft()}function Sft(){La("[");const e=d9();return La("]"),e}function Aft(){var e,t,n;for(e=xft();;)if(is("."))n=Eft(),e=ywe(".",e,n);else if(is("("))t=wft(),e=fft(e,t);else if(is("["))n=Sft(),e=ywe("[",e,n);else break;return e}function xwe(){const e=Aft();if(Ti.type===wl&&(is("++")||is("--")))throw new Error(p2);return e}function IC(){var e,t;if(Ti.type!==wl&&Ti.type!==um)t=xwe();else{if(is("++")||is("--"))throw new Error(p2);if(is("+")||is("-")||is("~")||is("!"))e=Sl(),t=IC(),t=pft(e.value,t);else{if(tO("delete")||tO("void")||tO("typeof"))throw new Error(p2);t=xwe()}}return t}function wwe(e){let t=0;if(e.type!==wl&&e.type!==um)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Cft(){var e,t,n,r,i,s,o,a,l,u;if(e=Ti,l=IC(),r=Ti,i=wwe(r),i===0)return l;for(r.prec=i,Sl(),t=[e,Ti],o=IC(),s=[l,r,o];(i=wwe(Ti))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=gwe(a,l,o),s.push(n);r=Sl(),r.prec=i,s.push(r),t.push(Ti),n=IC(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=gwe(s[u-1].value,s[u-2],n),u-=2;return n}function l0(){var e,t,n;return e=Cft(),is("?")&&(Sl(),t=l0(),La(":"),n=l0(),e=dft(e,t,n)),e}function d9(){const e=l0();if(is(","))throw new Error(p2);return e}function h9(e){ln=e,st=0,Da=ln.length,Ti=null,COe();const t=d9();if(Ti.type!==OE)throw new Error("Unexpect token after expression.");return t}var kOe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function TOe(e){function t(o,a,l,u){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ot("Missing arguments to clamp function."),o.length>3&&ot("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ot("Missing arguments to if function."),o.length>3&&ot("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function kft(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function DOe(e){e=e||{};const t=e.allowed?Tc(e.allowed):{},n=e.forbidden?Tc(e.forbidden):{},r=e.constants||kOe,i=(e.functions||TOe)(c),s=e.globalvar,o=e.fieldvar,a=ir(s)?s:p=>`${s}["${p}"]`;let l={},u={},f=0;function c(p){if(Nt(p))return p;const g=d[p.type];return g==null&&ot("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return f>0?g:Yt(n,g)?ot("Illegal identifier: "+g):Yt(r,g)?r[g]:Yt(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,v=c(p.object);g&&(f+=1);const y=c(p.property);return v===o&&(u[kft(y)]=1),g&&(f-=1),v+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ot("Illegal callee type: "+p.callee.type);const g=p.callee.name,v=p.arguments,y=Yt(i,g)&&i[g];return y||ot("Unrecognized function: "+g),ir(y)?y(v):y+"("+v.map(c).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(c).join(",")+"]",BinaryExpression:p=>"("+c(p.left)+" "+p.operator+" "+c(p.right)+")",UnaryExpression:p=>"("+p.operator+c(p.argument)+")",ConditionalExpression:p=>"("+c(p.test)+"?"+c(p.consequent)+":"+c(p.alternate)+")",LogicalExpression:p=>"("+c(p.left)+p.operator+c(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(c).join(",")+"}",Property:p=>{f+=1;const g=c(p.key);return f-=1,g+":"+c(p.value)}};function h(p){const g={code:c(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const _we=Symbol("vega_selection_getter");function LOe(e){return(!e.getter||!e.getter[_we])&&(e.getter=Mu(e.field),e.getter[_we]=!0),e.getter}const p9="intersect",Ewe="union",Tft="vlMulti",Dft="vlPoint",Swe="or",Lft="and",mf="_vgsid_",g2=Mu(mf),Rft="E",Fft="R",Oft="R-E",Mft="R-LE",$ft="R-RE",Sk="index:unit";function Awe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=LOe(a)(e),Fp(o)&&(o=Aa(o)),Fp(r[s])&&(r[s]=Aa(r[s])),at(r[s])&&Fp(r[s][0])&&(r[s]=r[s].map(Aa)),a.type===Rft){if(at(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===Fft){if(!fv(o,r[s]))return!1}else if(a.type===$ft){if(!fv(o,r[s],!0,!1))return!1}else if(a.type===Oft){if(!fv(o,r[s],!1,!1))return!1}else if(a.type===Mft&&!fv(o,r[s],!1,!0))return!1;return!0}function Ift(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[Sk]&&r[Sk].value:void 0,o=n===p9,a=i.length,l=0,u,f,c,d,h;l<a;++l)if(u=i[l],s&&o){if(f=f||{},c=f[d=u.unit]||0,c===-1)continue;if(h=Awe(t,u),f[d]=h?-1:++c,h&&s.size===1)return!0;if(!h&&c===s.get(d).count)return!1}else if(h=Awe(t,u),o^h)return h;return a&&o}const ROe=tD(g2),Pft=ROe.left,Nft=ROe.right;function Bft(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[Sk]&&r[Sk].value:void 0,o=n===p9,a=g2(t),l=Pft(i,a);if(l===i.length||g2(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Nft(i,a)-l<s.size)return!1}return!0}function zft(e,t){return e.map(n=>rr(t.fields?{values:t.fields.map(r=>LOe(r)(n.datum))}:{[mf]:g2(n.datum)},t))}function jft(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,f,c,d,h,p,g,v,y,b,w=s.length,E=0,A,T;E<w;++E)if(u=s[E],d=u.unit,f=u.fields,c=u.values,f&&c){for(A=0,T=f.length;A<T;++A)h=f[A],g=o[h.field]||(o[h.field]={}),v=g[d]||(g[d]=[]),l[h.field]=y=h.type.charAt(0),b=nO[`${y}_union`],g[d]=b(v,Pt(c[A]));n&&(v=a[d]||(a[d]=[]),v.push(Pt(c).reduce((D,k,R)=>(D[f[R].field]=k,D),{})))}else h=mf,p=g2(u),g=o[h]||(o[h]={}),v=g[d]||(g[d]=[]),v.push(p),n&&(v=a[d]||(a[d]=[]),v.push({[mf]:p}));if(t=t||Ewe,o[mf]?o[mf]=nO[`${mf}_${t}`](...Object.values(o[mf])):Object.keys(o).forEach(D=>{o[D]=Object.keys(o[D]).map(k=>o[D][k]).reduce((k,R)=>k===void 0?R:nO[`${l[D]}_${t}`](k,R))}),s=Object.keys(a),n&&s.length){const D=r?Dft:Tft;o[D]=t===Ewe?{[Swe]:s.reduce((k,R)=>(k.push(...a[R]),k),[])}:{[Lft]:s.map(k=>({[Swe]:a[k]}))}}return o}var nO={[`${mf}_union`]:pUe,[`${mf}_intersect`]:dUe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Aa(t[0]),r=Aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Aa(t[0]),r=Aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Uft=":",qft="@";function m9(e,t,n,r){t[0].type!==o0&&ot("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&qr(t).value,o="unit",a=qft+o,l=Uft+i;s===p9&&!Yt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Yt(r,l)||(r[l]=n.getData(i).tuplesRef())}function FOe(e){const t=this.context.data[e];return t?t.values.value:[]}function Hft(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Gft(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove($u).insert(t)),1}function Vft(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const IE=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},Wft=IE("format"),OOe=IE("timeFormat"),Yft=IE("utcFormat"),Xft=IE("timeParse"),Zft=IE("utcParse"),DA=new Date(2e3,0,1);function bL(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(DA.setYear(2e3),DA.setMonth(e),DA.setDate(t),OOe.call(this,DA,n))}function Kft(e){return bL.call(this,e,1,"%B")}function Jft(e){return bL.call(this,e,1,"%b")}function Qft(e){return bL.call(this,0,2+e,"%A")}function edt(e){return bL.call(this,0,2+e,"%a")}const tdt=":",ndt="@",y5="%",MOe="$";function g9(e,t,n,r){t[0].type!==o0&&ot("First argument to data functions must be a string literal.");const i=t[0].value,s=tdt+i;if(!Yt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function rdt(e,t,n,r){t[0].type!==o0&&ot("First argument to indata must be a string literal."),t[1].type!==o0&&ot("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=ndt+s;Yt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Qa(e,t,n,r){if(t[0].type===o0)Cwe(n,r,t[0].value);else for(e in n.scales)Cwe(n,r,e)}function Cwe(e,t,n){const r=y5+n;if(!Yt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Zf(e,t){if(ir(e))return e;if(Nt(e)){const n=t.scales[e];return n&&ptt(n.value)?n.value:void 0}}function idt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Qa,n._range=Qa,n._scale=Qa;const r=i=>"_["+(i.type===o0?Tt(y5+i.value):Tt(y5)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function y9(e,t){return function(n,r,i){if(n){const s=Zf(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const sdt=y9("area",Dst),odt=y9("bounds",Ost),adt=y9("centroid",Bst);function ldt(e,t){const n=Zf(e,(t||this).context);return n&&n.scale()}function udt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function v9(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function cdt(){return v9(this.context.dataflow,"warn",arguments)}function fdt(){return v9(this.context.dataflow,"info",arguments)}function ddt(){return v9(this.context.dataflow,"debug",arguments)}function rO(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function v5(e){const t=s3(e),n=rO(t.r),r=rO(t.g),i=rO(t.b);return .2126*n+.7152*r+.0722*i}function hdt(e,t){const n=v5(e),r=v5(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function pdt(){const e=[].slice.call(arguments);return e.unshift({}),rr(...e)}function $Oe(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?mdt(e,t):!1:$t(e)&&$t(t)?IOe(e,t):!1}function mdt(e,t){for(let n=0,r=e.length;n<r;++n)if(!$Oe(e[n],t[n]))return!1;return!0}function IOe(e,t){for(const n in e)if(!$Oe(e[n],t[n]))return!1;return!0}function kwe(e){return t=>IOe(e,t)}function gdt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let f=a.changes,c,d;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(a.changes=f=o.changeset(),f.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,f).run()},!0,1)),n&&(c=n===!0?$u:at(n)||MD(n)?n:kwe(n),f.remove(c)),t&&f.insert(t),r&&(c=kwe(r),l.value.some(c)?f.remove(c):f.insert(r)),i)for(d in s)f.modify(i,d,s[d]);return 1}function ydt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function vdt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Twe={};function bdt(e,t){const n=Twe[t]||(Twe[t]=Mu(t));return at(e)?e.map(n):n(e)}function b9(e){return at(e)||ArrayBuffer.isView(e)?e:null}function x9(e){return b9(e)||(Nt(e)?e:null)}function xdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return b9(e).join(...n)}function wdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x9(e).indexOf(...n)}function _dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x9(e).lastIndexOf(...n)}function Edt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x9(e).slice(...n)}function Sdt(e,t,n){return ir(n)&&ot("Function argument passed to replace."),String(e).replace(t,n)}function Adt(e){return b9(e).slice().reverse()}function Cdt(e,t,n){return F8(e||0,t||0,n||0)}function kdt(e,t){const n=Zf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Tdt(e,t){const n=Zf(e,(t||this).context);return n?n.copy():void 0}function Ddt(e,t){const n=Zf(e,(t||this).context);return n?n.domain():[]}function Ldt(e,t,n){const r=Zf(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Rdt(e,t){const n=Zf(e,(t||this).context);return n&&n.range?n.range():[]}function Fdt(e,t,n){const r=Zf(e,(n||this).context);return r?r(t):void 0}function Odt(e,t,n,r,i){e=Zf(e,(i||this).context);const s=CLe(t,n);let o=e.domain(),a=o[0],l=qr(o),u=Ra;return l-a?u=pLe(e,a,l):e=(e.interpolator?ui("sequential")().interpolator(e.interpolator()):ui("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==qr(o)&&o.push(l)),o.forEach(f=>s.stop(u(f),e(f))),s}function Mdt(e,t,n){const r=Zf(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function $dt(e){let t=null;return function(n){return n?o2(n,t=t||s1(e)):e}}const POe=e=>e.data;function NOe(e,t){const n=FOe.call(t,e);return n.root&&n.root.lookup||{}}function Idt(e,t,n){const r=NOe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(POe):void 0}function Pdt(e,t){const n=NOe(e,this)[t];return n?n.ancestors().map(POe):void 0}const BOe=()=>typeof window<"u"&&window||null;function Ndt(){const e=BOe();return e?e.screen:{}}function Bdt(){const e=BOe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function zdt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function zOe(e,t,n){if(!e)return[];const[r,i]=e,s=new Qs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return ERe(o,s,jdt(t))}function jdt(e){let t=null;if(e){const n=Pt(e.marktype),r=Pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Udt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function qdt(e){return Pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Hdt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Qs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),zOe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>Gdt(l.x,l.y,t))}function Gdt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const y2={random(){return Pu()},cumulativeNormal:BD,cumulativeLogNormal:VP,cumulativeUniform:ZP,densityNormal:jP,densityLogNormal:GP,densityUniform:XP,quantileNormal:zD,quantileLogNormal:WP,quantileUniform:KP,sampleNormal:ND,sampleLogNormal:HP,sampleUniform:YP,isArray:at,isBoolean:lm,isDate:Fp,isDefined(e){return e!==void 0},isNumber:li,isObject:$t,isRegExp:sTe,isString:Nt,isTuple:MD,isValid(e){return e!=null&&e===e},toBoolean:AP,toDate(e){return CP(e)},toNumber:Aa,toString:kP,indexof:wdt,join:xdt,lastindexof:_dt,replace:Sdt,reverse:Adt,slice:Edt,flush:rTe,lerp:oTe,merge:pdt,pad:uTe,peek:qr,pluck:bdt,span:dE,inrange:fv,truncate:cTe,rgb:s3,lab:z4,hcl:qze,hsl:B4,luminance:v5,contrast:hdt,sequence:Kl,format:Wft,utcFormat:Yft,utcParse:Zft,utcOffset:ATe,utcSequence:TTe,timeFormat:OOe,timeParse:Xft,timeOffset:STe,timeSequence:kTe,timeUnitSpecifier:hTe,monthFormat:Kft,monthAbbrevFormat:Jft,dayFormat:Qft,dayAbbrevFormat:edt,quarter:Qke,utcquarter:eTe,week:mTe,utcweek:vTe,dayofyear:pTe,utcdayofyear:yTe,warn:cdt,info:fdt,debug:ddt,extent(e){return $f(e)},inScope:udt,intersect:zOe,clampRange:tTe,pinchDistance:ydt,pinchAngle:vdt,screen:Ndt,containerSize:zdt,windowSize:Bdt,bandspace:Cdt,setdata:Gft,pathShape:$dt,panLinear:Xke,panLog:Zke,panPow:Kke,panSymlog:Jke,zoomLinear:bP,zoomLog:xP,zoomPow:A3,zoomSymlog:wP,encode:Vft,modify:gdt,lassoAppend:Udt,lassoPath:qdt,intersectLasso:Hdt},Vdt=["view","item","group","xy","x","y"],Wdt="event.vega.",jOe="this.",w9={},UOe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Tt(MOe+e)}]`,functions:Ydt,constants:kOe,visitors:w9},b5=DOe(UOe);function Ydt(e){const t=TOe(e);Vdt.forEach(n=>t[n]=Wdt+n);for(const n in y2)t[n]=jOe+n;return rr(t,idt(e,y2,w9)),t}function zs(e,t,n){return arguments.length===1?y2[e]:(y2[e]=t,n&&(w9[e]=n),b5&&(b5.functions[e]=jOe+e),this)}zs("bandwidth",kdt,Qa);zs("copy",Tdt,Qa);zs("domain",Ddt,Qa);zs("range",Rdt,Qa);zs("invert",Ldt,Qa);zs("scale",Fdt,Qa);zs("gradient",Odt,Qa);zs("geoArea",sdt,Qa);zs("geoBounds",odt,Qa);zs("geoCentroid",adt,Qa);zs("geoShape",Mdt,Qa);zs("geoScale",ldt,Qa);zs("indata",Hft,rdt);zs("data",FOe,g9);zs("treePath",Idt,g9);zs("treeAncestors",Pdt,g9);zs("vlSelectionTest",Ift,m9);zs("vlSelectionIdTest",Bft,m9);zs("vlSelectionResolve",jft,m9);zs("vlSelectionTuples",zft);function Nf(e,t){const n={};let r;try{e=Nt(e)?e:Tt(e)+"",r=h9(e)}catch{ot("Expression parse error: "+e)}r.visit(s=>{if(s.type!==xOe)return;const o=s.callee.name,a=UOe.visitors[o];a&&a(o,s.arguments,t,n)});const i=b5(r);return i.globals.forEach(s=>{const o=MOe+s;!Yt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:rr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Xdt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Zdt=Tc(["rule"]),Dwe=Tc(["group","image","rect"]);function Kdt(e,t){let n="";return Zdt[t]||(e.x2&&(e.x?(Dwe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Dwe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function _9(e){return(e+"").toLowerCase()}function Jdt(e){return _9(e)==="operator"}function Qdt(e){return _9(e)==="collect"}function gw(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function eht(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var tht={operator:(e,t)=>gw(e,["_"],t.code),parameter:(e,t)=>gw(e,["datum","_"],t.code),event:(e,t)=>gw(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return gw(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Tt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Kdt(r,n),i+="return m;",gw(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Tt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),eht(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function nht(e){const t=this;Jdt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function rht(e){const t=this;if(e.params){const n=t.get(e.id);n||ot("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function iht(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(s=>Lwe(s,n,t)):Lwe(i,n,t)}return t}function Lwe(e,t,n){if(!e||!$t(e))return e;for(let r=0,i=Rwe.length,s;r<i;++r)if(s=Rwe[r],Yt(e,s.key))return s.parse(e,t,n);return e}var Rwe=[{key:"$ref",parse:sht},{key:"$key",parse:aht},{key:"$expr",parse:oht},{key:"$field",parse:lht},{key:"$encode",parse:cht},{key:"$compare",parse:uht},{key:"$context",parse:fht},{key:"$subflow",parse:dht},{key:"$tupleid",parse:hht}];function sht(e,t){return t.get(e.$ref)||ot("Operator not defined: "+e.$ref)}function oht(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=zl(t.parameterExpression(e.$expr),e.$fields))}function aht(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=SP(e.$key,e.$flat,t.expr.codegen))}function lht(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Mu(e.$field,e.$name,t.expr.codegen))}function uht(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Pt(e.$compare).map(i=>i&&i.$tupleid?wn:i);return t.fn[n]||(t.fn[n]=_P(r,e.$order,t.expr.codegen))}function cht(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=zl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function fht(e,t){return t}function dht(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function hht(){return wn}function pht(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ot("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function mht(e){var t=this,n=$t(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||ot("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const ght={skip:!0};function yht(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function vht(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],ght)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove($u).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function qOe(e,t,n,r){return new HOe(e,t,n,r)}function HOe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||tht,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Fwe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}HOe.prototype=Fwe.prototype={fork(){const e=new Fwe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Qdt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[_9(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Xdt,parseOperator:nht,parseOperatorParameters:rht,parseParameters:iht,parseStream:pht,parseUpdate:mht,getState:yht,setState:vht};function bht(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),GOe(t,e.description()))}function GOe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function xht(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const iO="default";function wht(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:iO,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Nt(i)?i:i.user:iO,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Nt(r)||(i=r.item,r=r.user),x5(e,r&&r!==iO?r:i||r),i},{cursor:t})}function x5(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Ak(e,t){var n=e._runtime.data;return Yt(n,t)||ot("Unrecognized data set: "+t),n[t]}function _ht(e,t){return arguments.length<2?Ak(this,e).values.value:xL.call(this,e,R0().remove($u).insert(t))}function xL(e,t){YTe(t)||ot("Second argument to changes must be a changeset.");const n=Ak(this,e);return n.modified=!0,this.pulse(n.input,t)}function Eht(e,t){return xL.call(this,e,R0().insert(t))}function Sht(e,t){return xL.call(this,e,R0().remove(t))}function VOe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function WOe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function wL(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Aht(e){var t=wL(e),n=VOe(e),r=WOe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Cht(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=wL(e),o=t.changedTouches?t.changedTouches[0]:t,s=aL(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=kht(e,n,s),t}function kht(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Nt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Fa(e),item:Fa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Owe="view",Tht="timer",Dht="window",Lht={trap:!1};function Rht(e){const t=rr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=Tc(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function YOe(e,t,n,r){e._eventListeners.push({type:n,sources:Pt(t),handler:r})}function Fht(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function LA(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||$t(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Oht(e,t,n){var r=this,i=new PD(n),s=function(u,f){r.runAsync(null,()=>{e===Owe&&Fht(r,t)&&u.preventDefault(),i.receive(Cht(r,u,f))})},o;if(e===Tht)LA(r,"timer",t)&&r.timer(s,t);else if(e===Owe)LA(r,"view",t)&&r.addEventListener(t,s,Lht);else if(e===Dht?LA(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&LA(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);YOe(r,o,t,s)}return i}function Mwe(e){return e.item}function $we(e){return e.item.mark.source}function Iwe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Mht(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Mwe),$we,Iwe(e)),this.on(this.events("view","pointerout",Mwe),$we,Iwe(t)),this}function $ht(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function ru(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Iht="vega-bind",Pht="vega-bind-name",Nht="vega-bind-radio";function Bht(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=EP(r.debounce,i.update))),(r.input==null&&r.element?zht:Uht)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function zht(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),YOe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(jht(i))}}function jht(e){return typeof Event<"u"?new Event(e):{type:e}}function Uht(e,t,n,r){const i=r.signal(n.signal),s=ru("div",{class:Iht}),o=n.input==="radio"?s:s.appendChild(ru("label"));o.appendChild(ru("span",{class:Pht},n.name||n.signal)),t.appendChild(s);let a=qht;switch(n.input){case"checkbox":a=Hht;break;case"select":a=Ght;break;case"radio":a=Vht;break;case"range":a=Wht;break}a(e,o,n,i)}function qht(e,t,n,r){const i=ru("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Hht(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=ru("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Ght(e,t,n,r){const i=ru("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};Ck(o,r)&&(l.selected=!0),i.appendChild(ru("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(Ck(n.options[a],o)){i.selectedIndex=a;return}}}function Vht(e,t,n,r){const i=ru("span",{class:Nht}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};Ck(o,r)&&(l.checked=!0);const u=ru("input",l);u.addEventListener("change",()=>e.update(o));const f=ru("label",{},(s[a]||o)+"");return f.prepend(u),i.appendChild(f),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)Ck(a[u].value,o)&&(a[u].checked=!0)}}function Wht(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Zg(s,i,100),a=ru("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=ru("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=f=>{a.value=f,l.textContent=f}}function Ck(e,t){return e===t||e+""==t+""}function XOe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,VOe(e),WOe(e),wL(e),i,s).background(e.background())}function E9(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Yht(e,t,n,r){const i=new r(e.loader(),E9(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,wL(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Xht(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=lL(r);e=n._el=e?sO(n,e,!0):null,bht(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||TE,a=e?s.renderer:s.headless;return n._renderer=a?XOe(n,n._renderer,e,a):null,n._handler=Yht(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=sO(n,t,!0):e.appendChild(ru("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=sO(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Bht(n,l.element||t,l)})),n}function sO(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const yw=e=>+e||0,Zht=e=>({top:e,bottom:e,left:e,right:e});function Pwe(e){return $t(e)?{top:yw(e.top),bottom:yw(e.bottom),left:yw(e.left),right:yw(e.right)}:Zht(yw(e))}async function S9(e,t,n,r){const i=lL(t),s=i&&i.headless;return s||ot("Unrecognized renderer type: "+t),await e.runAsync(),XOe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Kht(e,t){e!==wp.Canvas&&e!==wp.SVG&&e!==wp.PNG&&ot("Unrecognized image type: "+e);const n=await S9(this,e,t);return e===wp.SVG?Jht(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Jht(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Qht(e,t){return(await S9(this,wp.Canvas,e,t)).canvas()}async function ept(e){return(await S9(this,wp.SVG,e)).svg()}function tpt(e,t,n){return qOe(e,e1,y2,n).parse(t)}function npt(e){var t=this._runtime.scales;return Yt(t,e)||ot("Unrecognized scale or projection: "+e),t[e].value}var ZOe="width",KOe="height",A9="padding",Nwe={skip:!0};function JOe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===A9?r.left+r.right:0)}function QOe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===A9?r.top+r.bottom:0)}function rpt(e){var t=e._signals,n=t[ZOe],r=t[KOe],i=t[A9];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=JOe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=QOe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function ipt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(ZOe,n,Nwe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(KOe,r,Nwe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function spt(e){return this._runtime.getState(e||{data:opt,signals:apt,recurse:!0})}function opt(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function apt(e,t){return!(e==="parent"||t instanceof e1.proxy)}function lpt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function upt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(zat(n,t))}function cpt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",fpt(r))}function fpt(e){return e==null?"":at(e)?eMe(e):$t(e)&&!Fp(e)?dpt(e):e+""}function dpt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?eMe(n):tMe(n))}).join(`
`)}function eMe(e){return"["+e.map(tMe).join(", ")+"]"}function tMe(e){return at(e)?"[]":$t(e)&&!Fp(e)?"{}":e}function hpt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function nMe(e,t){const n=this;if(t=t||{},Sv.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=rr({},e.locale,t.locale);n.locale(NTe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||wp.Canvas,n._scenegraph=new ZLe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||cpt,n._redraw=!0,n._handler=new TE().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Rht(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=tpt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:rr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=JOe(n,n._width),n._viewHeight=QOe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,rpt(n),xht(n),wht(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function RA(e,t){return Yt(e._signals,t)?e._signals[t]:ot("Unrecognized signal name: "+Tt(t))}function rMe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Bwe(e,t,n,r){let i=rMe(n,r);return i||(i=E9(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function zwe(e,t,n){const r=rMe(t,n);return r&&t._targets.remove(r),e}Lt(nMe,Sv,{async evaluate(e,t,n){if(await Sv.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Aht(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&bC(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&GOe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=RA(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Pwe(e)):Pwe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(lL(e)||ot("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Sv.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(RA(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:ipt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=E9(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Bwe(this,e,RA(this,e),t)},removeSignalListener(e,t){return zwe(this,RA(this,e),t)},addDataListener(e,t){return Bwe(this,e,Ak(this,e).values,t)},removeDataListener(e,t){return zwe(this,Ak(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=x5(this,null);this._globalCursor=!!e,t&&x5(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:upt,events:Oht,finalize:$ht,hover:Mht,data:_ht,change:xL,insert:Eht,remove:Sht,scale:npt,initialize:Xht,toImageURL:Kht,toCanvas:Qht,toSVG:ept,getState:spt,setState:lpt,_watchPixelRatio:hpt});const ppt="view",kk="[",Tk="]",iMe="{",sMe="}",mpt=":",oMe=",",gpt="@",ypt=">",vpt=/[[\]{}]/,bpt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let aMe,lMe;function cm(e,t,n){return aMe=t||ppt,lMe=n||bpt,uMe(e.trim()).map(w5)}function xpt(e){return lMe[e]}function k_(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function uMe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=k_(e,i,oMe,kk+iMe,Tk+sMe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function w5(e){return e[0]==="["?wpt(e):_pt(e)}function wpt(e){const t=e.length;let n=1,r;if(n=k_(e,n,Tk,kk,Tk),n===t)throw"Empty between selector: "+e;if(r=uMe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ypt)throw"Expected '>' after between selector: "+e;r=r.map(w5);const i=w5(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function _pt(e){const t={source:aMe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===sMe){if(a=e.lastIndexOf(iMe),a>=0){try{r=Ept(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===gpt&&(i=++a),l=k_(e,a,mpt),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=k_(e,a,kk),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=k_(e,a,Tk),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==kk)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||vpt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):xpt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Ept(e){const t=e.split(oMe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Spt(e){return $t(e)?e:{type:e||"pad"}}const vw=e=>+e||0,Apt=e=>({top:e,bottom:e,left:e,right:e});function Cpt(e){return $t(e)?e.signal?e:{top:vw(e.top),bottom:vw(e.bottom),left:vw(e.left),right:vw(e.right)}:Apt(vw(e))}const Lo=e=>$t(e)&&!at(e)?rr({},e):{value:e};function jwe(e,t,n,r){return n!=null?($t(n)&&!at(n)||at(n)&&n.length&&$t(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ia(e,t,n){for(const r in t)jwe(e,r,t[r]);for(const r in n)jwe(e,r,n[r],"update")}function ab(e,t,n){for(const r in t)n&&Yt(n,r)||(e[r]=rr(e[r]||{},t[r]));return e}function tv(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const C9="mark",k9="frame",T9="scope",kpt="axis",Tpt="axis-domain",Dpt="axis-grid",Lpt="axis-label",Rpt="axis-tick",Fpt="axis-title",Opt="legend",Mpt="legend-band",$pt="legend-entry",Ipt="legend-gradient",cMe="legend-label",Ppt="legend-symbol",Npt="legend-title",Bpt="title",zpt="title-text",jpt="title-subtitle";function Upt(e,t,n,r,i){const s={},o={};let a,l,u,f;l="lineBreak",t==="text"&&i[l]!=null&&!tv(l,e)&&oO(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===k9?i.group:n===C9?rr({},i.mark,i[t]):null;for(l in f)u=tv(l,e)||(l==="fill"||l==="stroke")&&(tv("fill",e)||tv("stroke",e)),u||oO(s,l,f[l]);Pt(r).forEach(c=>{const d=i.style&&i.style[c];for(const h in d)tv(h,e)||oO(s,h,d[h])}),e=rr({},e);for(l in s)f=s[l],f.signal?(a=a||{})[l]=f:o[l]=f;return e.enter=rr(o,e.enter),a&&(e.update=rr(a,e.update)),e}function oO(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const fMe=e=>Nt(e)?Tt(e):e.signal?`(${e.signal})`:dMe(e);function _L(e){if(e.gradient!=null)return Hpt(e);let t=e.signal?`(${e.signal})`:e.color?qpt(e.color):e.field!=null?dMe(e.field):e.value!==void 0?Tt(e.value):void 0;return e.scale!=null&&(t=Gpt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${PC(e.exponent)})`),e.mult!=null&&(t+=`*${PC(e.mult)}`),e.offset!=null&&(t+=`+${PC(e.offset)}`),e.round&&(t=`round(${t})`),t}const FA=(e,t,n,r)=>`(${e}(${[t,n,r].map(_L).join(",")})+'')`;function qpt(e){return e.c?FA("hcl",e.h,e.c,e.l):e.h||e.s?FA("hsl",e.h,e.s,e.l):e.l||e.a?FA("lab",e.l,e.a,e.b):e.r||e.g||e.b?FA("rgb",e.r,e.g,e.b):null}function Hpt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Tt(n));for(;t.length&&qr(t)==null;)t.pop();return t.unshift(fMe(e.gradient)),`gradient(${t.join(",")})`}function PC(e){return $t(e)?"("+_L(e)+")":e}function dMe(e){return hMe($t(e)?e:{datum:e})}function hMe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ot("Invalid field reference: "+Tt(e));return e.signal||(r=Nt(r)?Gf(r).map(Tt).join("]["):hMe(r)),t+"["+r+"]"}function Gpt(e,t){const n=fMe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+PC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Vpt(e){let t="";return e.forEach(n=>{const r=_L(n);t+=n.test?`(${n.test})?${r}:`:r}),qr(t)===":"&&(t+="null"),t}function pMe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Upt(e,t,n,r,i.config);for(const a in e)o[a]=Wpt(e[a],t,s,i);return s}function Wpt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Xpt(Ypt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Ypt(e){return at(e)?Vpt(e):_L(e)}function Xpt(e,t,n,r){const i=Nf(e,t);return i.$fields.forEach(s=>r[s]=1),rr(n,i.$params),i.$expr}const Zpt="outer",Kpt=["value","update","init","react","bind"];function Uwe(e,t){ot(e+' for "outer" push: '+Tt(t))}function mMe(e,t){const n=e.name;if(e.push===Zpt)t.signals[n]||Uwe("No prior signal definition",n),Kpt.forEach(r=>{e[r]!==void 0&&Uwe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _5(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function EL(e,t,n,r){return new _5(e,t,n,r)}function Dk(e,t){return EL("operator",e,t)}function xn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function v2(e,t){return t?{$field:e,$name:t}:{$field:e}}const E5=v2("key");function qwe(e,t){return{$compare:e,$order:t}}function Jpt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Qpt="ascending",emt="descending";function tmt(e){return $t(e)?(e.order===emt?"-":"+")+SL(e.op,e.field):""}function SL(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const D9="scope",S5="view";function yo(e){return e&&e.signal}function nmt(e){return e&&e.expr}function NC(e){if(yo(e))return!0;if($t(e)){for(const t in e)if(NC(e[t]))return!0}return!1}function cc(e,t){return e??t}function jg(e){return e&&e.signal||e}const Hwe="timer";function b2(e,t){return(e.merge?imt:e.stream?smt:e.type?omt:ot("Invalid stream specification: "+Tt(e)))(e,t)}function rmt(e){return e===D9?S5:e||S5}function imt(e,t){const n=e.merge.map(i=>b2(i,t)),r=L9({merge:n},e,t);return t.addStream(r).id}function smt(e,t){const n=b2(e.stream,t),r=L9({stream:n},e,t);return t.addStream(r).id}function omt(e,t){let n;e.type===Hwe?(n=t.event(Hwe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(rmt(e.source),e.type);const r=L9({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function L9(e,t,n){let r=t.between;return r&&(r.length!==2&&ot('Stream "between" parameter must have 2 entries: '+Tt(t)),e.between=[b2(r[0],n),b2(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(amt(t.marktype,t.markname,t.markrole)),t.source===D9&&r.push("inScope(event.item)"),r.length&&(e.filter=Nf("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function amt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const lmt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function umt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||ot("Signal update missing events specification."),Nt(s)&&(s=cm(s,t.isSubscope()?D9:S5)),s=Pt(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[fmt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ot("Signal encode and update are mutually exclusive."),o="encode(item(),"+Tt(r)+")"),i.update=Nt(o)?Nf(o,t):o.expr!=null?Nf(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:lmt,$params:{$value:t.signalRef(o.signal)}}:ot("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(rr(cmt(l,t),i)))}function cmt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):b2(e,t)}}function fmt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function dmt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ot("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Nf(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>umt(i,t,n.id))}const Pi=e=>(t,n,r)=>EL(e,n,t||void 0,r),gMe=Pi("aggregate"),hmt=Pi("axisticks"),yMe=Pi("bound"),Nc=Pi("collect"),Gwe=Pi("compare"),pmt=Pi("datajoin"),vMe=Pi("encode"),mmt=Pi("expression"),gmt=Pi("facet"),ymt=Pi("field"),vmt=Pi("key"),bmt=Pi("legendentries"),xmt=Pi("load"),wmt=Pi("mark"),_mt=Pi("multiextent"),Emt=Pi("multivalues"),Smt=Pi("overlap"),Amt=Pi("params"),bMe=Pi("prefacet"),Cmt=Pi("projection"),kmt=Pi("proxy"),Tmt=Pi("relay"),xMe=Pi("render"),Dmt=Pi("scale"),M0=Pi("sieve"),Lmt=Pi("sortitems"),wMe=Pi("viewlayout"),Rmt=Pi("values");let Fmt=0;const _Me={min:"min",max:"max",count:"sum"};function Omt(e,t){const n=e.type||"linear";lLe(n)||ot("Unrecognized scale type: "+Tt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Mmt(e,t){const n=t.getScale(e.name).params;let r;n.domain=EMe(e.domain,e,t),e.range!=null&&(n.range=AMe(e,t,n)),e.interpolate!=null&&Hmt(e.interpolate,n),e.nice!=null&&(n.nice=qmt(e.nice,t)),e.bins!=null&&(n.bins=Umt(e.bins,t));for(r in e)Yt(n,r)||r==="name"||(n[r]=Du(e[r],t))}function Du(e,t){return $t(e)?e.signal?t.signalRef(e.signal):ot("Unsupported object: "+Tt(e)):e}function BC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Du(n,t))}function AL(e){ot("Can not find data set: "+Tt(e))}function EMe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ot("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?$mt:e.fields?Pmt:Imt)(e,t,n)}function $mt(e,t,n){return e.map(r=>Du(r,n))}function Imt(e,t,n){const r=n.getData(e.data);return r||AL(e.data),i1(t.type)?r.valuesRef(n,e.field,SMe(e.sort,!1)):fLe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Pmt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Nt(o)?{data:r,field:o}:at(o)||o.signal?Nmt(o,n):o,s.push(o),s),[]);return(i1(t.type)?Bmt:fLe(t.type)?zmt:jmt)(e,n,i)}function Nmt(e,t){const n="_:vega:_"+Fmt++,r=Nc({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Tt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,M0({})]),{data:n,field:"data"}}function Bmt(e,t,n){const r=SMe(e.sort,!0);let i,s;const o=n.map(u=>{const f=t.getData(u.data);return f||AL(u.data),f.countsRef(t,u.field,r)}),a={groupby:E5,pulse:o};r&&(i=r.op||"count",s=r.field?SL(i,r.field):"count",a.ops=[_Me[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(gMe(a));const l=t.add(Nc({pulse:xn(i)}));return s=t.add(Rmt({field:E5,sort:t.sortRef(r),pulse:xn(l)})),xn(s)}function SMe(e,t){return e&&(!e.field&&!e.op?$t(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ot("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!_Me[e.op]&&ot("Multiple domain scales can not be sorted using "+e.op)),e}function zmt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||AL(i.data),s.domainRef(t,i.field)});return xn(t.add(Emt({values:r})))}function jmt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||AL(i.data),s.extentRef(t,i.field)});return xn(t.add(_mt({extents:r})))}function Umt(e,t){return e.signal||at(e)?BC(e,t):t.objectProperty(e)}function qmt(e,t){return e.signal?t.signalRef(e.signal):$t(e)?{interval:Du(e.interval),step:Du(e.step)}:Du(e)}function Hmt(e,t){t.interpolate=Du(e.type||e),e.gamma!=null&&(t.interpolateGamma=Du(e.gamma))}function AMe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Nt(i)){if(r&&Yt(r,i))return e=rr({},e,{range:r[i]}),AMe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=i1(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ot("Unrecognized scale range value: "+Tt(i))}else if(i.scheme){n.scheme=at(i.scheme)?BC(i.scheme,t):Du(i.scheme,t),i.extent&&(n.schemeExtent=BC(i.extent,t)),i.count&&(n.schemeCount=Du(i.count,t));return}else if(i.step){n.rangeStep=Du(i.step,t);return}else{if(i1(e.type)&&!at(i))return EMe(i,e,t);at(i)||ot("Unsupported range type: "+Tt(i))}return i.map(s=>(at(s)?BC:Du)(s,t))}function Gmt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=A5(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=A5(n[i],i,t));t.addProjection(e.name,r)}function A5(e,t,n){return at(e)?e.map(r=>A5(r,t,n)):$t(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ot("Unsupported parameter object: "+Tt(e)):e}const Bc="top",lb="left",ub="right",Xp="bottom",CMe="center",Vmt="vertical",Wmt="start",Ymt="middle",Xmt="end",C5="index",R9="label",Zmt="offset",h1="perc",Kmt="perc2",Ru="value",PE="guide-label",F9="guide-title",Jmt="group-title",Qmt="group-subtitle",Vwe="symbol",zC="gradient",k5="discrete",T5="size",egt="shape",tgt="fill",ngt="stroke",rgt="strokeWidth",igt="strokeDash",sgt="opacity",O9=[T5,egt,tgt,ngt,rgt,igt,sgt],NE={name:1,style:1,interactive:1},Wr={value:0},Fu={value:1},CL="group",kMe="rect",M9="rule",ogt="symbol",$0="text";function x2(e){return e.type=CL,e.interactive=e.interactive||!1,e}function jl(e,t){const n=(r,i)=>cc(e[r],cc(t[r],i));return n.isVertical=r=>Vmt===cc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>cc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>cc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>cc(e.columns,cc(t.columns,+n.isVertical(!0))),n}function TMe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function agt(e,t,n){const r=t.config.style[n];return r&&r[e]}function kL(e,t,n){return`item.anchor === '${Wmt}' ? ${e} : item.anchor === '${Xmt}' ? ${t} : ${n}`}const $9=kL(Tt(lb),Tt(ub),Tt(CMe));function lgt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},$t(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function DMe(e,t){return t?e?$t(e)?Object.assign({},e,{offset:DMe(e.offset,t)}):{value:e,offset:t}:t:e}function fu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=ab(e.encode,t,NE)):e.interactive=!1,e}function ugt(e,t,n,r){const i=jl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,f,c,d;s?(u=[0,1],f=[0,0],c=o,d=a):(u=[0,0],f=[1,0],c=a,d=o);const h={enter:l={opacity:Wr,x:Wr,y:Wr,width:Lo(c),height:Lo(d)},update:rr({},l,{opacity:Fu,fill:{gradient:t,start:u,stop:f}}),exit:{opacity:Wr}};return ia(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fu({type:kMe,role:Ipt,encode:h},r)}function cgt(e,t,n,r,i){const s=jl(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,f,c,d,h="";o?(u="y",c="y2",f="x",d="width",h="1-"):(u="x",c="x2",f="y",d="height");const p={opacity:Wr,fill:{scale:t,field:Ru}};p[u]={signal:h+"datum."+h1,mult:l},p[f]=Wr,p[c]={signal:h+"datum."+Kmt,mult:l},p[d]=Lo(a);const g={enter:p,update:rr({},p,{opacity:Fu}),exit:{opacity:Wr}};return ia(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),fu({type:kMe,role:Mpt,key:Ru,from:i,encode:g},r)}const fgt=`datum.${h1}<=0?"${lb}":datum.${h1}>=1?"${ub}":"${CMe}"`,dgt=`datum.${h1}<=0?"${Xp}":datum.${h1}>=1?"${Bc}":"${Ymt}"`;function Wwe(e,t,n,r){const i=jl(e,t),s=i.isVertical(),o=Lo(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,f,c,d,h="";const p={enter:u={opacity:Wr},update:f={opacity:Fu,text:{field:R9}},exit:{opacity:Wr}};return ia(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:cc(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=f.baseline={signal:dgt},c="y",d="x",h="1-"):(u.align=f.align={signal:fgt},u.baseline={value:"top"},c="x",d="y"),u[c]=f[c]={signal:h+"datum."+h1,mult:a},u[d]=f[d]=o,o.offset=cc(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+C5}:void 0,fu({type:$0,role:cMe,style:PE,key:Ru,from:r,encode:p,overlap:l},n)}function hgt(e,t,n,r,i){const s=jl(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),f=s("symbolOffset"),c={data:"value"},d=`(${i}) ? datum.${Zmt} : datum.${T5}`,h=u?Lo(u):{field:T5},p=`datum.${C5}`,g=`max(1, ${i})`;let v,y,b,w,E;h.mult=.5,v={enter:y={opacity:Wr,x:{signal:d,mult:.5,offset:f},y:h},update:b={opacity:Fu,x:y.x,y:y.y},exit:{opacity:Wr}};let A=null,T=null;e.fill||(A=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),ia(v,{fill:s("symbolFillColor",A),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),O9.forEach(O=>{e[O]&&(b[O]=y[O]={scale:e[O],field:Ru})});const D=fu({type:ogt,role:Ppt,key:Ru,from:c,clip:u?!0:void 0,encode:v},n.symbols),k=Lo(f);k.offset=s("labelOffset"),v={enter:y={opacity:Wr,x:{signal:d,offset:k},y:h},update:b={opacity:Fu,text:{field:R9},x:y.x,y:y.y},exit:{opacity:Wr}},ia(v,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=fu({type:$0,role:cMe,style:PE,key:Ru,from:c,encode:v},n.labels);return v={enter:{noBound:{value:!u},width:Wr,height:u?Lo(u):Wr,opacity:Wr},exit:{opacity:Wr},update:b={opacity:Fu,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${g})`,b.row.signal=`${p}%${w}`,b.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(b.row.signal=`floor(${p} / ${g})`,b.column.signal=`${p} % ${g}`,E={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:C5}},x2({role:T9,from:r,encode:ab(v,o,NE),marks:[D,R],name:l,interactive:a,sort:E})}function pgt(e,t){const n=jl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const I9='item.orient === "left"',P9='item.orient === "right"',TL=`(${I9} || ${P9})`,mgt=`datum.vgrad && ${TL}`,ggt=kL('"top"','"bottom"','"middle"'),ygt=kL('"right"','"left"','"center"'),vgt=`datum.vgrad && ${P9} ? (${ygt}) : (${TL} && !(datum.vgrad && ${I9})) ? "left" : ${$9}`,bgt=`item._anchor || (${TL} ? "middle" : "start")`,xgt=`${mgt} ? (${I9} ? -90 : 90) : 0`,wgt=`${TL} ? (datum.vgrad ? (${P9} ? "bottom" : "top") : ${ggt}) : "top"`;function _gt(e,t,n,r){const i=jl(e,t),s={enter:{opacity:Wr},update:{opacity:Fu,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Wr}};return ia(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:bgt},angle:{signal:xgt},align:{signal:vgt},baseline:{signal:wgt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fu({type:$0,role:Npt,style:F9,from:r,encode:s},n)}function Egt(e,t){let n;return $t(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ywe(e.path)+")":e.sphere&&(n="geoShape("+Ywe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ywe(e){return $t(e)&&e.signal?e.signal:Tt(e)}function LMe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===CL?T9:t||C9}function Sgt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||LMe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Agt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function N9(e,t){const n=KTe(e.type);n||ot("Unrecognized transform type: "+Tt(e.type));const r=EL(n.type.toLowerCase(),null,RMe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function RMe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Cgt(o,t,n)}return r}function Cgt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return kgt(e,t,n);if(i===void 0){e.required&&ot("Missing required "+Tt(t.type)+" parameter: "+Tt(e.name));return}else{if(r==="param")return Tgt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!yo(i)?i.map(s=>Xwe(e,s,n)):Xwe(e,i,n)}function Xwe(e,t,n){const r=e.type;if(yo(t))return Kwe(r)?ot("Expression references can not be signals."):aO(r)?n.fieldRef(t):Jwe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||aO(r);return i&&Dgt(t)?n.exprRef(t.expr,t.as):i&&Lgt(t)?v2(t.field,t.as):Kwe(r)?Nf(t,n):Rgt(r)?xn(n.getData(t).values):aO(r)?v2(t):Jwe(r)?n.compareRef(t):t}}function kgt(e,t,n){return Nt(t.from)||ot('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Tgt(e,t,n){const r=t[e.name];return e.array?(at(r)||ot("Expected an array of sub-parameters. Instead: "+Tt(r)),r.map(i=>Zwe(e,i,n))):Zwe(e,r,n)}function Zwe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ot("Unsupported parameter: "+Tt(t));const s=rr(RMe(i,t,n),i.key);return xn(n.add(Amt(s)))}const Dgt=e=>e&&e.expr,Lgt=e=>e&&e.field,Rgt=e=>e==="data",Kwe=e=>e==="expr",aO=e=>e==="field",Jwe=e=>e==="compare";function Fgt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||ot("Only group marks can be faceted."),r.field!=null?o=a=jC(r,n):(e.data?a=xn(n.getData(e.data).aggregate):(s=N9(rr({type:"aggregate",groupby:Pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=jC(r,n),o=a=xn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=xn(n.add(Nc(null,[{}]))),o||(o=jC(e,n)),{key:i,pulse:o,parent:a}}function jC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:xn(t.getData(e.data).output)}function u0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}u0.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=xn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new u0(e,s,i,r,o)};function FMe(e){return Nt(e)?e:null}function Qwe(e,t,n){const r=SL(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function bw(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=tmt(s);let u=FMe(i),f,c;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),f=a[u]),!f){const d=s?{field:E5,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:xn(t.output)};l&&(d.sort=e.sortRef(s)),c=e.add(EL(r,void 0,d)),o&&(t.index[i]=c),f=xn(c),u!=null&&(a[u]=f)}return f}u0.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=FMe(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Qwe(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:xn(r.output)},n&&n.field&&Qwe(e,l,n),a=e.add(gMe(l)),o=e.add(Nc({pulse:xn(a)})),o={agg:a,ref:xn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return xn(this.values)},extentRef(e,t){return bw(e,this,"extent","extent",t,!1)},domainRef(e,t){return bw(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return bw(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return bw(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return bw(e,this,"indata","tupleindex",t,!0,!0)}};function Ogt(e,t,n){const r=e.from.facet,i=r.name,s=jC(r,t);let o;r.name||ot("Facet must have a name: "+Tt(r)),r.data||ot("Facet must reference a data set: "+Tt(r)),r.field?o=t.add(bMe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(gmt({key:t.keyRef(r.groupby),group:xn(t.proxy(n.parent)),pulse:s})):ot("Facet must specify groupby or field: "+Tt(r));const a=t.fork(),l=a.add(Nc()),u=a.add(M0({pulse:xn(l)}));a.addData(i,new u0(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Mgt(e,t,n){const r=t.add(bMe({pulse:n.pulse})),i=t.fork();i.add(M0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function OMe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(Dk()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(c=>c??"null").join(",")+"),0)",f=Nf(u,t);l.update=f.$expr,l.params=f.$params}function DL(e,t){const n=LMe(e),r=e.type===CL,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===T9||n===k9,a,l,u,f,c,d,h;const p=n===C9||o||i,g=Fgt(e.from,r,t);l=t.add(pmt({key:g.key||(e.key?v2(e.key):void 0),pulse:g.pulse,clean:!r}));const v=xn(l);l=u=t.add(Nc({pulse:v})),l=t.add(wmt({markdef:Sgt(e),interactive:Agt(e.interactive,t),clip:Egt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:xn(l)}));const y=xn(l);l=f=t.add(vMe(pMe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const D=N9(T,t),k=D.metadata;(k.generates||k.changes)&&ot("Mark transforms should not generate new data."),k.nomod||(f.params.mod=!0),D.params.pulse=xn(l),t.add(l=D)}),e.sort&&(l=t.add(Lmt({sort:t.compareRef(e.sort),pulse:xn(l)})));const b=xn(l);(i||o)&&(o=t.add(wMe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=xn(o));const w=t.add(yMe({mark:y,pulse:d||b}));h=xn(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,v),i?Ogt(e,t,g):p?Mgt(e,t,g):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=$gt(s,h,t));const E=t.add(xMe({pulse:h})),A=t.add(M0({pulse:xn(E)},void 0,t.parent()));e.name!=null&&(c=e.name,t.addData(c,new u0(t,u,E,A)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&ot("Marks only support modify triggers."),OMe(T,t,c)}))}function $gt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:yo(s)?n.signalRef(s.signal):s,method:yo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=yo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return xn(n.add(Smt(o)))}function Igt(e,t){const n=t.config.legend,r=e.encode||{},i=jl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let f=0,c,d,h;O9.forEach(w=>e[w]?(u[w]=e[w],f=f||e[w]):0),f||ot("Missing valid scale for legend.");const p=Pgt(e,t.scaleType(f)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},v=xn(t.add(Nc(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},b=xn(t.add(bmt(d={type:p,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===zC?(h=[ugt(e,f,n,r.gradient),Wwe(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${jg(i.gradientLength())})/100))`)):p===k5?h=[cgt(e,f,n,r.gradient,b),Wwe(e,n,r.labels,b)]:(c=pgt(e,n),h=[hgt(e,n,r,b,jg(c.columns))],d.size=zgt(e,t,h[0].marks)),h=[x2({role:$pt,from:v,encode:y,marks:h,layout:c,interactive:a})],g.title&&h.push(_gt(e,n,r.title,v)),DL(x2({role:Opt,from:v,encode:ab(Bgt(i,e,n),s,NE),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function Pgt(e,t){let n=e.type||Vwe;return!e.type&&Ngt(e)===1&&(e.fill||e.stroke)&&(n=P8(t)?zC:b6(t)?k5:Vwe),n!==zC?n:b6(t)?k5:zC}function Ngt(e){return O9.reduce((t,n)=>t+(e[n]?1:0),0)}function Bgt(e,t,n){const r={enter:{},update:{}};return ia(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function zgt(e,t,n){const r=jg(e_e("size",e,n)),i=jg(e_e("strokeWidth",e,n)),s=jg(jgt(n[1].encode,t,PE));return Nf(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function e_e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:TMe(e,n[0].encode)}function jgt(e,t,n){return TMe("fontSize",e)||agt("fontSize",t,n)}const Ugt=`item.orient==="${lb}"?-90:item.orient==="${ub}"?90:0`;function qgt(e,t){e=Nt(e)?{text:e}:e;const n=jl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},f=xn(t.add(Nc(null,[u])));return l.push(Vgt(e,n,Hgt(e),f)),e.subtitle&&l.push(Wgt(e,n,r.subtitle,f)),DL(x2({role:Bpt,from:f,encode:Ggt(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Hgt(e){const t=e.encode;return t&&t.title||rr({name:e.name,interactive:e.interactive,style:e.style},t)}function Ggt(e,t){const n={enter:{},update:{}};return ia(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:$9},angle:{signal:Ugt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),ab(n,t,NE)}function Vgt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ia(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fu({type:$0,role:zpt,style:Jmt,from:r,encode:o},n)}function Wgt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ia(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fu({type:$0,role:jpt,style:Qmt,from:r,encode:o},n)}function Ygt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(N9(r,t))}),e.on&&e.on.forEach(r=>{OMe(r,t,e.name)}),t.addDataPipeline(e.name,Xgt(e,t,n))}function Xgt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,f,c;for(e.values?yo(e.values)||NC(e.format)?(r.push(t_e(t,e)),r.push(i=ig())):r.push(i=ig({$ingest:e.values,$format:e.format})):e.url?NC(e.url)||NC(e.format)?(r.push(t_e(t,e)),r.push(i=ig())):r.push(i=ig({$request:e.url,$format:e.format})):e.source&&(i=a=Pt(e.source).map(d=>xn(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)f=n[l],c=f.metadata,!i&&!c.source&&r.push(i=ig()),r.push(f),c.generates&&(o=!0),c.modifies&&!o&&(s=!0),c.source?i=f:c.changes&&(i=null);return a&&(u=a.length-1,r[0]=Tmt({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,ig())),i||r.push(ig()),r.push(M0({})),r}function ig(e){const t=Nc({},e);return t.metadata={source:!0},t}function t_e(e,t){return xmt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const MMe=e=>e===Xp||e===Bc,LL=(e,t,n)=>yo(e)?Qgt(e.signal,t,n):e===lb||e===Bc?t:n,Ro=(e,t,n)=>yo(e)?Kgt(e.signal,t,n):MMe(e)?t:n,_c=(e,t,n)=>yo(e)?Jgt(e.signal,t,n):MMe(e)?n:t,$Me=(e,t,n)=>yo(e)?e0t(e.signal,t,n):e===Bc?{value:t}:{value:n},Zgt=(e,t,n)=>yo(e)?t0t(e.signal,t,n):e===ub?{value:t}:{value:n},Kgt=(e,t,n)=>IMe(`${e} === '${Bc}' || ${e} === '${Xp}'`,t,n),Jgt=(e,t,n)=>IMe(`${e} !== '${Bc}' && ${e} !== '${Xp}'`,t,n),Qgt=(e,t,n)=>B9(`${e} === '${lb}' || ${e} === '${Bc}'`,t,n),e0t=(e,t,n)=>B9(`${e} === '${Bc}'`,t,n),t0t=(e,t,n)=>B9(`${e} === '${ub}'`,t,n),IMe=(e,t,n)=>(t=t!=null?Lo(t):t,n=n!=null?Lo(n):n,n_e(t)&&n_e(n)?(t=t?t.signal||Tt(t.value):null,n=n?n.signal||Tt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[rr({test:e},t)].concat(n||[])),n_e=e=>e==null||Object.keys(e).length===1,B9=(e,t,n)=>({signal:`${e} ? (${gv(t)}) : (${gv(n)})`}),n0t=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${lb}' ? (${gv(r)}) : `:"")+(n!=null?`${e} === '${Xp}' ? (${gv(n)}) : `:"")+(i!=null?`${e} === '${ub}' ? (${gv(i)}) : `:"")+(t!=null?`${e} === '${Bc}' ? (${gv(t)}) : `:"")+"(null)"}),gv=e=>yo(e)?e.signal:e==null?null:Tt(e),r0t=(e,t)=>t===0?0:yo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Cv=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Uy(e,t,n,r){let i;if(t&&Yt(t,e))return t[e];if(Yt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[F9][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[PE][i]}return null}function r_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function i0t(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(yo(o)){const c=r_e([n.axisX,n.axisY]),d=r_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of c)a[u]=Ro(o,Uy(u,n.axisX,i,r),Uy(u,n.axisY,i,r));l={};for(u of d)l[u]=n0t(o.signal,Uy(u,n.axisTop,i,r),Uy(u,n.axisBottom,i,r),Uy(u,n.axisLeft,i,r),Uy(u,n.axisRight,i,r))}else a=o===Bc||o===Xp?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?rr({},i,a,l,s):i}function s0t(e,t,n,r){const i=jl(e,t),s=e.orient;let o,a;const l={enter:o={opacity:Wr},update:a={opacity:Fu},exit:{opacity:Wr}};ia(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=i_e(e,0),f=i_e(e,1);return o.x=a.x=Ro(s,u,Wr),o.x2=a.x2=Ro(s,f),o.y=a.y=_c(s,u,Wr),o.y2=a.y2=_c(s,f),fu({type:M9,role:Tpt,from:r,encode:l},n)}function i_e(e,t){return{scale:e.scale,range:t}}function o0t(e,t,n,r,i){const s=jl(e,t),o=e.orient,a=e.gridScale,l=LL(o,1,-1),u=a0t(e.offset,l);let f,c,d;const h={enter:f={opacity:Wr},update:d={opacity:Fu},exit:c={opacity:Wr}};ia(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ru,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=Ro(o,{signal:"height"},{signal:"width"}),v=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:rr(g,{mult:l,offset:u});return f.x=d.x=Ro(o,p,v),f.y=d.y=_c(o,p,v),f.x2=d.x2=_c(o,y),f.y2=d.y2=Ro(o,y),c.x=Ro(o,p),c.y=_c(o,p),fu({type:M9,role:Dpt,key:Ru,from:r,encode:h},n)}function a0t(e,t){if(t!==1)if(!$t(e))e=yo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=rr({},e);for(;n.mult!=null;)if($t(n.mult))n=n.mult=rr({},n.mult);else return n.mult=yo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function l0t(e,t,n,r,i,s){const o=jl(e,t),a=e.orient,l=LL(a,-1,1);let u,f,c;const d={enter:u={opacity:Wr},update:c={opacity:Fu},exit:f={opacity:Wr}};ia(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Lo(i);h.mult=l;const p={scale:e.scale,field:Ru,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return c.y=u.y=Ro(a,Wr,p),c.y2=u.y2=Ro(a,h),f.x=Ro(a,p),c.x=u.x=_c(a,Wr,p),c.x2=u.x2=_c(a,h),f.y=_c(a,p),fu({type:M9,role:Rpt,key:Ru,from:r,encode:d},n)}function lO(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function u0t(e,t,n,r,i,s){const o=jl(e,t),a=e.orient,l=e.scale,u=LL(a,-1,1),f=jg(o("labelFlush")),c=jg(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=f===0||!!f,g;const v=Lo(i);v.mult=u,v.offset=Lo(o("labelPadding")||0),v.offset.mult=u;const y={scale:l,field:Ru,band:.5,offset:DMe(s.offset,o("labelOffset"))},b=Ro(a,p?lO(l,f,'"left"','"right"','"center"'):{value:"center"},Zgt(a,"left","right")),w=Ro(a,$Me(a,"bottom","top"),p?lO(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),E=lO(l,f,`-(${c})`,c,0);p=p&&c;const A={opacity:Wr,x:Ro(a,y,v),y:_c(a,y,v)},T={enter:A,update:g={opacity:Fu,text:{field:R9},x:A.x,y:A.y,align:b,baseline:w},exit:{opacity:Wr,x:A.x,y:A.y}};ia(T,{dx:!d&&p?Ro(a,E):null,dy:!h&&p?_c(a,E):null}),ia(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const D=o("labelBound");let k=o("labelOverlap");return k=k||D?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:D?{scale:l,orient:a,tolerance:D}:null}:void 0,g.align!==b&&(g.align=Cv(g.align,b)),g.baseline!==w&&(g.baseline=Cv(g.baseline,w)),fu({type:$0,role:Lpt,style:PE,key:Ru,from:r,encode:T,overlap:k},n)}function c0t(e,t,n,r){const i=jl(e,t),s=e.orient,o=LL(s,-1,1);let a,l;const u={enter:a={opacity:Wr,anchor:Lo(i("titleAnchor",null)),align:{signal:$9}},update:l=rr({},a,{opacity:Fu,text:Lo(e.title)}),exit:{opacity:Wr}},f={signal:`lerp(range("${e.scale}"), ${kL(0,1,.5)})`};return l.x=Ro(s,f),l.y=_c(s,f),a.angle=Ro(s,Wr,r0t(o,90)),a.baseline=Ro(s,$Me(s,Xp,Bc),{value:Xp}),l.angle=a.angle,l.baseline=a.baseline,ia(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),f0t(i,s,u,n),u.update.align=Cv(u.update.align,a.align),u.update.angle=Cv(u.update.angle,a.angle),u.update.baseline=Cv(u.update.baseline,a.baseline),fu({type:$0,role:Fpt,style:F9,from:r,encode:u},n)}function f0t(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Cv(Lo(a),n.update[l]),!1):!tv(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Lo(o):Ro(t,Lo(o),Lo(s))}function d0t(e,t){const n=i0t(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=jl(e,n),u=lgt(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},c=xn(t.add(Nc({},[f]))),d=xn(t.add(hmt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return f.grid&&h.push(o0t(e,n,r.grid,d,u)),f.ticks&&(p=l("tickSize"),h.push(l0t(e,n,r.ticks,d,p,u))),f.labels&&(p=f.ticks?p:0,h.push(u0t(e,n,r.labels,d,p,u))),f.domain&&h.push(s0t(e,n,r.domain,c)),f.title&&h.push(c0t(e,n,r.title,c)),DL(x2({role:kpt,from:c,encode:ab(h0t(l,e),i,NE),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function h0t(e,t){const n={enter:{},update:{}};return ia(n,{orient:e("orient"),offset:e("offset")||0,position:cc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function PMe(e,t,n){const r=Pt(e.signals),i=Pt(e.scales);return n||r.forEach(s=>mMe(s,t)),Pt(e.projections).forEach(s=>Gmt(s,t)),i.forEach(s=>Omt(s,t)),Pt(e.data).forEach(s=>Ygt(s,t)),i.forEach(s=>Mmt(s,t)),(n||r).forEach(s=>dmt(s,t)),Pt(e.axes).forEach(s=>d0t(s,t)),Pt(e.marks).forEach(s=>DL(s,t)),Pt(e.legends).forEach(s=>Igt(s,t)),e.title&&qgt(e.title,t),t.parseLambdas(),t}const p0t=e=>ab({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function m0t(e,t){const n=t.config,r=xn(t.root=t.add(Dk())),i=g0t(e,n);i.forEach(u=>mMe(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Nc()),o=t.add(vMe(pMe(p0t(e.encode),CL,k9,e.style,t,{pulse:xn(s)}))),a=t.add(wMe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:xn(o)}));t.operators.pop(),t.pushState(xn(o),xn(a),null),PMe(e,t,i),t.operators.push(a);let l=t.add(yMe({mark:r,pulse:xn(a)}));return l=t.add(xMe({pulse:xn(l)})),l=t.add(M0({pulse:xn(l)})),t.addData("root",new u0(t,s,s,l)),t}function xw(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function g0t(e,t){const n=o=>cc(e[o],t[o]),r=[xw("background",n("background")),xw("autosize",Spt(n("autosize"))),xw("padding",Cpt(n("padding"))),xw("width",n("width")||0),xw("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Pt(e.signals).forEach(o=>{Yt(i,o.name)?o=rr(i[o.name],o):r.push(o),s[o.name]=o}),Pt(t.signals).forEach(o=>{!Yt(s,o.name)&&!Yt(i,o.name)&&r.push(o)}),r}function NMe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function s_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}NMe.prototype=s_e.prototype={parse(e){return PMe(e,this)},fork(){return new s_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof _5?xn(e):e;return this.add(kmt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(xn(this.add(M0({pulse:e})))),this._parent.push(t),this._lookup.push(n?xn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return qr(this._parent)},encode(){return qr(this._encode)},lookup(){return qr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Nt(e))return v2(e,t);e.signal||ot("Unsupported field reference: "+Tt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=xn(this.add(ymt(i)))}return r},compareRef(e){let t=!1;const n=s=>yo(s)?(t=!0,this.signalRef(s.signal)):nmt(s)?(t=!0,this.exprRef(s.expr)):s,r=Pt(e.field).map(n),i=Pt(e.order).map(n);return t?xn(this.add(Gwe({fields:r,orders:i}))):qwe(r,i)},keyRef(e,t){let n=!1;const r=s=>yo(s)?(n=!0,xn(i[s.signal])):s,i=this.signals;return e=Pt(e).map(r),n?xn(this.add(vmt({fields:e,flat:t}))):Jpt(e,t)},sortRef(e){if(!e)return e;const t=SL(e.op,e.field),n=e.order||Qpt;return n.signal?xn(this.add(Gwe({fields:t,orders:this.signalRef(n.signal)}))):qwe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Yt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ot("Duplicate signal name: "+Tt(e));const n=t instanceof _5?t:this.add(Dk(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ot("Unrecognized signal name: "+Tt(e)),this.signals[e]},signalRef(e){return this.signals[e]?xn(this.signals[e]):(Yt(this.lambdas,e)||(this.lambdas[e]=this.add(Dk(null))),xn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Nf(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!$t(e)?e:this.signalRef(e.signal||z9(e))},exprRef(e,t){const n={expr:Nf(e,this)};return t&&(n.expr.$name=t),xn(this.add(mmt(n)))},addBinding(e,t){this.bindings||ot("Nested signals do not support binding: "+Tt(e)),this.bindings.push(rr({signal:e},t))},addScaleProj(e,t){Yt(this.scales,e)&&ot("Duplicate scale or projection name: "+Tt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Dmt(t))},addProjection(e,t){this.addScaleProj(e,Cmt(t))},getScale(e){return this.scales[e]||ot("Unrecognized scale name: "+Tt(e)),this.scales[e]},scaleRef(e){return xn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Yt(this.data,e)&&ot("Duplicate data set name: "+Tt(e)),this.data[e]=t},getData(e){return this.data[e]||ot("Undefined data set name: "+Tt(e)),this.data[e]},addDataPipeline(e,t){return Yt(this.data,e)&&ot("Duplicate data set name: "+Tt(e)),this.addData(e,u0.fromEntries(this,t))}};function z9(e){return(at(e)?y0t:v0t)(e)}function y0t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+($t(i)?i.signal||z9(i):Tt(i))}return n+"]"}function v0t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Tt(r)+":"+($t(i)?i.signal||z9(i):Tt(i));return t+"}"}function b0t(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function x0t(e,t,n){return $t(e)||ot("Input Vega specification must be an object."),t=J1(b0t(),t,e.config),m0t(e,new NMe(t,n)).toRuntime()}var w0t="5.30.0";rr(e1,vet,Wit,Ast,cat,ilt,Rut,cut,Out,rct,hct,xct);const _0t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Qs,CanvasHandler:TE,CanvasRenderer:q3,DATE:Ol,DAY:Sa,DAYOFYEAR:If,Dataflow:Sv,Debug:Hke,Error:gP,EventStream:PD,Gradient:CLe,GroupItem:eL,HOURS:lu,Handler:lN,HybridHandler:yRe,HybridRenderer:L6,Info:qke,Item:QD,MILLISECONDS:Dc,MINUTES:uu,MONTH:Ta,Marks:cu,MultiPulse:IP,None:Uke,Operator:Ui,Parameters:ID,Pulse:Op,QUARTER:Fl,RenderType:wp,Renderer:kE,ResourceLoader:OLe,SECONDS:Iu,SVGHandler:iRe,SVGRenderer:pN,SVGStringRenderer:gRe,Scenegraph:ZLe,TIME_UNITS:TP,Transform:rt,View:nMe,WEEK:mo,Warn:yP,YEAR:ea,accessor:zl,accessorFields:ka,accessorName:Rs,array:Pt,ascending:LD,bandwidthNRD:zP,bin:eDe,bootstrapCI:tDe,boundClip:kRe,boundContext:EE,boundItem:A6,boundMark:VLe,boundStroke:ph,changeset:R0,clampRange:tTe,codegenExpression:DOe,compare:_P,constant:Fa,cumulativeLogNormal:VP,cumulativeNormal:BD,cumulativeUniform:ZP,dayofyear:pTe,debounce:EP,defaultLocale:RP,definition:KTe,densityLogNormal:GP,densityNormal:jP,densityUniform:XP,domChild:ho,domClear:Eu,domCreate:bp,domFind:aN,dotbin:nDe,error:ot,expressionFunction:zs,extend:rr,extent:$f,extentIndex:nTe,falsy:Qh,fastmap:eb,field:Mu,flush:rTe,font:sL,fontFamily:CE,fontSize:Wf,format:vC,formatLocale:C3,formats:MP,hasOwnProperty:Yt,id:fE,identity:Ra,inferType:zTe,inferTypes:jTe,ingest:yi,inherits:Lt,inrange:fv,interpolate:N8,interpolateColors:KD,interpolateRange:dLe,intersect:ERe,intersectBoxLine:dv,intersectPath:V8,intersectPoint:W8,intersectRule:$Le,isArray:at,isBoolean:lm,isDate:Fp,isFunction:ir,isIterable:iTe,isNumber:li,isObject:$t,isRegExp:sTe,isString:Nt,isTuple:MD,key:SP,lerp:oTe,lineHeight:Vp,loader:FD,locale:NTe,logger:vP,lruCache:aTe,markup:hN,merge:lTe,mergeConfig:J1,multiLineOffset:iN,one:K1,pad:uTe,panLinear:Xke,panLog:Zke,panPow:Kke,panSymlog:Jke,parse:x0t,parseExpression:h9,parseSelector:cm,path:HD,pathCurves:q8,pathEqual:TRe,pathParse:s1,pathRectangle:DLe,pathRender:o2,pathSymbols:TLe,pathTrail:LLe,peek:qr,point:aL,projection:ON,quantileLogNormal:WP,quantileNormal:zD,quantileUniform:KP,quantiles:NP,quantizeInterpolator:hLe,quarter:Qke,quartiles:BP,get random(){return Pu},randomInteger:wQe,randomKDE:qP,randomLCG:xQe,randomLogNormal:iDe,randomMixture:sDe,randomNormal:UP,randomUniform:oDe,read:HTe,regressionConstant:JP,regressionExp:lDe,regressionLinear:QP,regressionLoess:fDe,regressionLog:aDe,regressionPoly:cDe,regressionPow:uDe,regressionQuad:e8,renderModule:lL,repeat:$w,resetDefaultLocale:yJe,resetSVGClipId:FLe,resetSVGDefIds:fit,responseType:qTe,runtimeContext:qOe,sampleCurve:UD,sampleLogNormal:HP,sampleNormal:ND,sampleUniform:YP,scale:ui,sceneEqual:mN,sceneFromJSON:YLe,scenePickVisit:$3,sceneToJSON:WLe,sceneVisit:Lc,sceneZOrder:Y8,scheme:B8,serializeXML:dRe,setHybridRendererOptions:ait,setRandom:vQe,span:dE,splitAccessPath:Gf,stringValue:Tt,textMetrics:nu,timeBin:RTe,timeFloor:wTe,timeFormatLocale:r2,timeInterval:tb,timeOffset:STe,timeSequence:kTe,timeUnitSpecifier:hTe,timeUnits:DP,toBoolean:AP,toDate:CP,toNumber:Aa,toSet:Tc,toString:kP,transform:JTe,transforms:e1,truncate:cTe,truthy:$u,tupleid:wn,typeParsers:p6,utcFloor:_Te,utcInterval:nb,utcOffset:ATe,utcSequence:TTe,utcdayofyear:yTe,utcquarter:eTe,utcweek:vTe,version:w0t,visitArray:rp,week:mTe,writeConfig:Q1,zero:fp,zoomLinear:bP,zoomLog:xP,zoomPow:A3,zoomSymlog:wP},Symbol.toStringTag,{value:"Module"}));function E0t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var S0t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},A0t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},C0t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const k0t=Array.prototype.slice,sg=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,k0t.call(t,1))},T0t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var D0t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:T0t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return sg("join",arguments)},indexof:function(){return sg("indexOf",arguments)},lastindexof:function(){return sg("lastIndexOf",arguments)},slice:function(){return sg("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return sg("substring",arguments,String)},split:function(){return sg("split",arguments,String)},replace:function(){return sg("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const L0t=["view","item","group","xy","x","y"],D5=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&D5.add(setImmediate);const R0t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:S0t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),D5.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||D0t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>A0t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>C0t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,D5.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function ww(e,t,n,r,i,s){const o=a=>R0t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,L0t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var F0t={operator(e,t){const n=t.ast,r=e.functions;return i=>ww(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>ww(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>ww(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return ww(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,f;for(const c in r)f=ww(r[c].ast,i,a,l,void 0,o),o[c]!==f&&(o[c]=f,u=1);return n!=="rule"&&E0t(o,r,s),u}}};const O0t="vega-lite",M0t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',$0t="5.23.0",I0t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],P0t="https://vega.github.io/vega-lite/",N0t="Vega-Lite is a concise high-level language for interactive visualization.",B0t=["vega","chart","visualization"],z0t="build/vega-lite.js",j0t="build/vega-lite.min.js",U0t="build/vega-lite.min.js",q0t="build/src/index",H0t="build/src/index.d.ts",G0t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},V0t=["bin","build","src","vega-lite*","tsconfig.json"],W0t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Y0t={type:"git",url:"https://github.com/vega/vega-lite.git"},X0t="BSD-3-Clause",Z0t={url:"https://github.com/vega/vega-lite/issues"},K0t={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},J0t={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},Q0t={vega:"^5.24.0"},eyt={node:">=18"},tyt="yarn@1.22.22",nyt={name:O0t,author:M0t,version:$0t,collaborators:I0t,homepage:P0t,description:N0t,keywords:B0t,main:z0t,unpkg:j0t,jsdelivr:U0t,module:q0t,types:H0t,bin:G0t,files:V0t,scripts:W0t,repository:Y0t,license:X0t,bugs:Z0t,devDependencies:K0t,dependencies:J0t,peerDependencies:Q0t,engines:eyt,packageManager:tyt};function j9(e){return St(e,"or")}function U9(e){return St(e,"and")}function q9(e){return St(e,"not")}function UC(e,t){if(q9(e))UC(e.not,t);else if(U9(e))for(const n of e.and)UC(n,t);else if(j9(e))for(const n of e.or)UC(n,t);else t(e)}function kv(e,t){return q9(e)?{not:kv(e.not,t)}:U9(e)?{and:e.and.map(n=>kv(n,t))}:j9(e)?{or:e.or.map(n=>kv(n,t))}:t(e)}const Gn=structuredClone;function BMe(e){throw new Error(e)}function p1(e,t){const n={};for(const r of t)Yt(e,r)&&(n[r]=e[r]);return n}function Ll(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ii(e)).join(",")})`};function Or(e){if(li(e))return e;const t=Nt(e)?e:Ii(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function L5(e){return e===!1||e===null}function _r(e,t){return e.includes(t)}function m1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function H9(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function zMe(e,...t){for(const n of t)ryt(e,n??{});return e}function ryt(e,t){for(const n of _t(t))Q1(e,n,t[n],!0)}function xf(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function iyt(e,t){const n=_t(e),r=_t(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function jMe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function G9(e,t){for(const n of e)if(t.has(n))return!0;return!1}function R5(e){const t=new Set;for(const n of e){const i=Gf(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function V9(e,t){return e===void 0||t===void 0?!0:G9(R5(e),R5(t))}function $i(e){return _t(e).length===0}const _t=Object.keys,ta=Object.values,Zp=Object.entries;function w2(e){return e===!0||e===!1}function cs(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function T_(e,t){return q9(e)?`!(${T_(e.not,t)})`:U9(e)?`(${e.and.map(n=>T_(n,t)).join(") && (")})`:j9(e)?`(${e.or.map(n=>T_(n,t)).join(") || (")})`:t(e)}function Lk(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Lk(e[n],t)&&delete e[n],$i(e)}function BE(e){return e.charAt(0).toUpperCase()+e.substr(1)}function W9(e,t="datum"){const n=Gf(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Tt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function UMe(e,t="datum"){return`${t}[${Tt(Gf(e).join("."))}]`}function ki(e){return`datum['${e.replaceAll("'","\\'")}']`}function syt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Bu(e){return`${Gf(e).map(syt).join("\\.")}`}function c0(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function cb(e){return`${Gf(e).join(".")}`}function g1(e){return e?Gf(e).length:0}function Ns(...e){return e.find(t=>t!==void 0)}let qMe=42;function HMe(e){const t=++qMe;return e?String(e)+t:t}function oyt(){qMe=42}function GMe(e){return VMe(e)?e:`__${e}`}function VMe(e){return e.startsWith("__")}function _2(e){if(e!==void 0)return(e%360+360)%360}function RL(e){return li(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const o_e=Object.getPrototypeOf(structuredClone({}));function Jl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Jl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Jl(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==o_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==o_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Jl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ii(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`}(e)}function St(e,t){return $t(e)&&Yt(e,t)&&e[t]!==void 0}const Yd="row",Xd="column",FL="facet",fs="x",Io="y",zc="x2",Kf="y2",fm="xOffset",fb="yOffset",jc="radius",gh="radius2",qu="theta",yh="theta2",Uc="latitude",qc="longitude",Hc="latitude2",zu="longitude2",dm="time",$l="color",Jf="fill",Qf="stroke",Il="shape",vh="size",I0="angle",bh="opacity",hm="fillOpacity",pm="strokeOpacity",mm="strokeWidth",gm="strokeDash",zE="text",y1="order",jE="detail",OL="key",f0="tooltip",ML="href",$L="url",IL="description",ayt={x:1,y:1,x2:1,y2:1},WMe={theta:1,theta2:1,radius:1,radius2:1};function YMe(e){return Yt(WMe,e)}const Y9={longitude:1,longitude2:1,latitude:1,latitude2:1};function XMe(e){switch(e){case Uc:return"y";case Hc:return"y2";case qc:return"x";case zu:return"x2"}}function ZMe(e){return Yt(Y9,e)}const lyt=_t(Y9),X9={...ayt,...WMe,...Y9,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Tv(e){return e===$l||e===Jf||e===Qf}const KMe={row:1,column:1,facet:1},Lu=_t(KMe),Z9={...X9,...KMe},uyt=_t(Z9),{order:Njt,detail:Bjt,tooltip:zjt,...cyt}=Z9,{row:jjt,column:Ujt,facet:qjt,...fyt}=cyt;function dyt(e){return Yt(fyt,e)}function JMe(e){return Yt(Z9,e)}const hyt=[zc,Kf,Hc,zu,yh,gh];function QMe(e){return P0(e)!==e}function P0(e){switch(e){case zc:return fs;case Kf:return Io;case Hc:return Uc;case zu:return qc;case yh:return qu;case gh:return jc}return e}function Kp(e){if(YMe(e))switch(e){case qu:return"startAngle";case yh:return"endAngle";case jc:return"outerRadius";case gh:return"innerRadius"}return e}function ed(e){switch(e){case fs:return zc;case Io:return Kf;case Uc:return Hc;case qc:return zu;case qu:return yh;case jc:return gh}}function Pl(e){switch(e){case fs:case zc:return"width";case Io:case Kf:return"height"}}function e4e(e){switch(e){case fs:return"xOffset";case Io:return"yOffset";case zc:return"x2Offset";case Kf:return"y2Offset";case qu:return"thetaOffset";case jc:return"radiusOffset";case yh:return"theta2Offset";case gh:return"radius2Offset"}}function K9(e){switch(e){case fs:return"xOffset";case Io:return"yOffset"}}function pyt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const myt=_t(X9),{x:Hjt,y:Gjt,x2:Vjt,y2:Wjt,xOffset:Yjt,yOffset:Xjt,latitude:Zjt,longitude:Kjt,latitude2:Jjt,longitude2:Qjt,theta:eUt,theta2:tUt,radius:nUt,radius2:rUt,...J9}=X9,gyt=_t(J9),Q9={x:1,y:1},xh=_t(Q9);function Bs(e){return Yt(Q9,e)}const e7={theta:1,radius:1},yyt=_t(e7);function PL(e){return e==="width"?fs:Io}const t4e={xOffset:1,yOffset:1};function UE(e){return Yt(t4e,e)}const vyt={time:1};function uO(e){return e in vyt}const{text:iUt,tooltip:sUt,href:oUt,url:aUt,description:lUt,detail:uUt,key:cUt,order:fUt,...n4e}=J9,byt=_t(n4e);function xyt(e){return Yt(J9,e)}function wyt(e){switch(e){case $l:case Jf:case Qf:case vh:case Il:case bh:case mm:case gm:return!0;case hm:case pm:case I0:case dm:return!1}}const r4e={...Q9,...e7,...t4e,...n4e},t7=_t(r4e);function td(e){return Yt(r4e,e)}function _yt(e,t){return Syt(e)[t]}const i4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:dUt,...Eyt}=i4e;function Syt(e){switch(e){case $l:case Jf:case Qf:case IL:case jE:case OL:case f0:case ML:case y1:case bh:case hm:case pm:case mm:case FL:case Yd:case Xd:return i4e;case fs:case Io:case fm:case fb:case Uc:case qc:case dm:return Eyt;case zc:case Kf:case Hc:case zu:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case vh:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case gm:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Il:return{point:"always",geoshape:"always"};case zE:return{text:"always"};case I0:return{point:"always",square:"always",text:"always"};case $L:return{image:"always"};case qu:return{text:"always",arc:"always"};case jc:return{text:"always",arc:"always"};case yh:case gh:return{arc:"always"}}}function cO(e){switch(e){case fs:case Io:case qu:case jc:case fm:case fb:case vh:case I0:case mm:case bh:case hm:case pm:case dm:case zc:case Kf:case yh:case gh:return;case FL:case Yd:case Xd:case Il:case gm:case zE:case f0:case ML:case $L:case IL:return"discrete";case $l:case Jf:case Qf:return"flexible";case Uc:case qc:case Hc:case zu:case jE:case OL:case y1:return}}const Ayt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Cyt={count:1,min:1,max:1};function sh(e){return St(e,"argmin")}function ym(e){return St(e,"argmax")}function n7(e){return Nt(e)&&Yt(Ayt,e)}const kyt=new Set(["count","valid","missing","distinct"]);function NL(e){return Nt(e)&&kyt.has(e)}function Tyt(e){return Nt(e)&&_r(["min","max"],e)}const Dyt=new Set(["count","sum","distinct","valid","missing"]),Lyt=new Set(["mean","average","median","q1","q3","min","max"]);function s4e(e){return lm(e)&&(e=ZL(e,void 0)),"bin"+_t(e).map(t=>BL(e[t])?cs(`_${t}_${Zp(e[t])}`):cs(`_${t}_${e[t]}`)).join("")}function Zi(e){return e===!0||N0(e)&&!e.binned}function Wo(e){return e==="binned"||N0(e)&&e.binned===!0}function N0(e){return $t(e)}function BL(e){return St(e,"param")}function a_e(e){switch(e){case Yd:case Xd:case vh:case $l:case Jf:case Qf:case mm:case bh:case hm:case pm:case Il:return 6;case gm:return 4;default:return 10}}function qE(e){return St(e,"expr")}function Yo(e,{level:t}={level:0}){const n=_t(e||{}),r={};for(const i of n)r[i]=t===0?Xl(e[i]):Yo(e[i],{level:t-1});return r}function o4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:f,subtitleFontStyle:c,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,v={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...f?{subtitleFontSize:f}:{},...c?{subtitleFontStyle:c}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=p1(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:v,subtitleMarkConfig:w,nonMarkTitleProperties:y,subtitle:b}}function ap(e){return Nt(e)||at(e)&&Nt(e[0])}function cn(e){return St(e,"signal")}function B0(e){return St(e,"step")}function Ryt(e){return at(e)?!1:St(e,"fields")&&!St(e,"data")}function Fyt(e){return at(e)?!1:St(e,"fields")&&St(e,"data")}function zd(e){return at(e)?!1:St(e,"field")&&St(e,"data")}const Oyt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Myt=_t(Oyt),$yt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},F5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function a4e(e){const t=at(e.condition)?e.condition.map(l_e):l_e(e.condition);return{...Xl(e),condition:t}}function Xl(e){if(qE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function l_e(e){if(qE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ss(e){if(qE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return cn(e)?e:e!==void 0?{value:e}:void 0}function Iyt(e){return cn(e)?e.signal:Tt(e)}function u_e(e){return cn(e)?e.signal:Tt(e.value)}function bc(e){return cn(e)?e.signal:e==null?null:Tt(e)}function Pyt(e,t,n){for(const r of n){const i=Bf(r,t.markDef,t.config);i!==void 0&&(e[r]=ss(i))}return e}function l4e(e){return[].concat(e.type,e.style??[])}function Mi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&St(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Bf(e,t,n,r)}function Bf(e,t,n,{vgChannel:r}={}){const i=O5(e,t,n.style);return Ns(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function O5(e,t,n){return u4e(e,l4e(t),n)}function u4e(e,t,n){t=Pt(t);let r;for(const i of t){const s=n[i];St(s,e)&&(r=s[e])}return r}function c4e(e,t){return Pt(e).reduce((n,r)=>(n.field.push(Ft(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function f4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Jl(i,r))return;n.push(r)}),n}function d4e(e,t){return Jl(e,t)||!t?e:e?[...Pt(e),...Pt(t)].join(", "):t}function h4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ap(n)||cn(n))&&(ap(r)||cn(r)))return{explicit:e.explicit,value:d4e(n,r)};if(ap(n)||cn(n))return{explicit:e.explicit,value:n};if(ap(r)||cn(r))return{explicit:e.explicit,value:r};if(!ap(n)&&!cn(n)&&!ap(r)&&!cn(r))return{explicit:e.explicit,value:f4e(n,r)};throw new Error("It should never reach here")}function r7(e){return`Invalid specification ${Ii(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Nyt='Autosize "fit" only works for single views and layered views.';function c_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function f_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function d_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Pl(e)}.`:'Dropping "fit" because spec has discrete size.'}function i7(e){return`Unknown field for ${e}. Cannot calculate view size.`}function h_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Byt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function zyt(e){return`The "nearest" transform is not supported for ${e} marks.`}function p4e(e){return`Selection not supported for ${e} yet.`}function jyt(e){return`Cannot find a selection named "${e}".`}const Uyt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",qyt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Hyt="Legend bindings are only supported for selections over an individual field or encoding channel.";function Gyt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Vyt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Wyt="The same selection must be used to override scale domains in a layered view.",Yyt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Xyt(e){return`Unknown repeated value "${e}".`}function p_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Zyt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",s7="Animation involving facet, layer, or concat is currently unsupported.";function Kyt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Tt(e)}.`}function Jyt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Tt(t)} encoding found for selection ${Tt(n.param)}. Using "field": ${Tt(r)}.`}const Qyt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function evt(e){return`Unrecognized parse "${e}".`}function m_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const tvt="Attempt to add the same child twice.";function nvt(e){return`Ignoring an invalid transform: ${Ii(e)}.`}const rvt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function g_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function ivt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ii(t)} is overridden by a child projection ${Ii(n)}.`}const svt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ovt(e){return`${e}Offset dropped because ${e} is continuous`}function avt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ii(n)}}.`}function m4e(e){return`Invalid field type "${e}".`}function lvt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function uvt(e){return`Invalid aggregation operator "${e}".`}function g4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function cvt(e){return`Position range does not support relative band size for ${e}.`}function M5(e,t){return`Dropping ${Ii(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const fvt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function zL(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function dvt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function hvt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function pvt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function mvt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function fO(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function gvt(e){return`The ${e} for range marks cannot be an expression`}function yvt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function vvt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function bvt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function xvt(e){return`Cannot use the relative band size with ${e} scale.`}function wvt(e){return`Using unaggregated domain with raw field has no effect (${Ii(e)}).`}function _vt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Evt(e){return`Unaggregated domain is currently unsupported for log scale (${Ii(e)}).`}function Svt(e){return`Cannot apply size to non-oriented mark "${e}".`}function Avt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Cvt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function y4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function v4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function kvt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ii(n)} and ${Ii(r)}). Using ${Ii(n)}.`}function Tvt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ii(n)} and ${Ii(r)}). Using the union of the two domains.`}function Dvt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Lvt(e){return`Dropping sort property ${Ii(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const y_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Rvt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Fvt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Ovt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Mvt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function $vt(e){return`Stack is applied to a non-linear scale (${e}).`}function Ivt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Rk(e,t){return`Invalid ${e}: ${Ii(t)}.`}function Pvt(e){return`Dropping day from datetime ${Ii(e)} as day cannot be combined with other units.`}function Nvt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Bvt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function zvt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function v_e(e){return`1D error band does not support ${e}.`}function b4e(e){return`Channel ${e} is required for "binned" bin.`}function jvt(e){return`Channel ${e} should not be used with "binned" bin.`}function Uvt(e){return`Domain for ${e} is required for threshold scale.`}const x4e=vP(yP);let d0=x4e;function qvt(e){return d0=e,d0}function Hvt(){return d0=x4e,d0}function o7(...e){d0.error(...e)}function Ct(...e){d0.warn(...e)}function Gvt(...e){d0.debug(...e)}function z0(e){if(e&&$t(e)){for(const t of l7)if(St(e,t))return!0}return!1}const w4e=["january","february","march","april","may","june","july","august","september","october","november","december"],Vvt=w4e.map(e=>e.substr(0,3)),_4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Wvt=_4e.map(e=>e.substr(0,3));function Yvt(e){if(RL(e)&&(e=+e),li(e))return e>4&&Ct(Rk("quarter",e)),e-1;throw new Error(Rk("quarter",e))}function Xvt(e){if(RL(e)&&(e=+e),li(e))return e-1;{const t=e.toLowerCase(),n=w4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Vvt.indexOf(r);if(i!==-1)return i;throw new Error(Rk("month",e))}}function Zvt(e){if(RL(e)&&(e=+e),li(e))return e%7;{const t=e.toLowerCase(),n=_4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Wvt.indexOf(r);if(i!==-1)return i;throw new Error(Rk("day",e))}}function a7(e,t){const n=[];if(t&&e.day!==void 0&&_t(e).length>1&&(Ct(Pvt(e)),e=Gn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Xvt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Yvt(e.quarter):e.quarter;n.push(li(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Zvt(e.day):e.day;n.push(li(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function h0(e){const n=a7(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Kvt(e){const n=a7(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Jvt(e){const t=a7(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const E4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},l7=_t(E4e);function Qvt(e){return Yt(E4e,e)}function j0(e){return $t(e)?e.binned:S4e(e)}function S4e(e){return e&&e.startsWith("binned")}function u7(e){return e.startsWith("utc")}function e1t(e){return e.substring(3)}const t1t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function jL(e){return l7.filter(t=>C4e(e,t))}function A4e(e){const t=jL(e);return t[t.length-1]}function C4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function n1t(e,t,{end:n}={end:!1}){const r=W9(t),i=u7(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of l7)C4e(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),Kvt(a)}function k4e(e){if(!e)return;const t=jL(e);return`timeUnitSpecifier(${Ii(t)}, ${Ii(t1t)})`}function r1t(e,t,n){if(!e)return;const r=k4e(e);return`${n||u7(e)?"utc":"time"}Format(${t}, ${r})`}function Fo(e){if(!e)return;let t;return Nt(e)?S4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:$t(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),u7(t.unit)&&(t.utc=!0,t.unit=e1t(t.unit)),t}function i1t(e){const{utc:t,...n}=Fo(e);return n.unit?(t?"utc":"")+_t(n).map(r=>cs(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+_t(n).map(r=>cs(`_${r}_${n[r]}`)).join("")}function T4e(e,t=n=>n){const n=Fo(e),r=A4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=D4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(h0(a))} - ${t(h0(i))}`}}const s1t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function o1t(e){return Yt(s1t,e)}function D4e(e,t=1){if(o1t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function a1t(e){return St(e,"param")}function c7(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function f7(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function d7(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function h7(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function p7(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function m7(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(cn(e.range))return!0}return!1}function g7(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function l1t(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function L4e(e){return g7(e)||c7(e)||m7(e)||f7(e)||h7(e)||d7(e)||p7(e)}function uf(e,t){return KL(e,{timeUnit:t,wrapTime:!0})}function u1t(e,t){return e.map(n=>uf(n,t))}function R4e(e,t=!0){const{field:n}=e,r=Fo(e.timeUnit),{unit:i,binned:s}=r||{},o=Ft(e,{expr:"datum"}),a=i?`time(${s?o:n1t(i,n)})`:o;if(c7(e))return`${a}===${uf(e.equal,i)}`;if(f7(e)){const l=e.lt;return`${a}<${uf(l,i)}`}else if(h7(e)){const l=e.gt;return`${a}>${uf(l,i)}`}else if(d7(e)){const l=e.lte;return`${a}<=${uf(l,i)}`}else if(p7(e)){const l=e.gte;return`${a}>=${uf(l,i)}`}else{if(g7(e))return`indexof([${u1t(e.oneOf,i).join(",")}], ${a}) !== -1`;if(l1t(e))return UL(a,e.valid);if(m7(e)){const{range:l}=Yo(e),u=cn(l)?{signal:`${l.signal}[0]`}:l[0],f=cn(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&f!==null&&t)return"inrange("+a+", ["+uf(u,i)+", "+uf(f,i)+"])";const c=[];return u!==null&&c.push(`${a} >= ${uf(u,i)}`),f!==null&&c.push(`${a} <= ${uf(f,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ii(e)}`)}function UL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function c1t(e){return L4e(e)&&e.timeUnit?{...e,timeUnit:Fo(e.timeUnit)}:e}const HE={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function f1t(e){return e==="quantitative"||e==="temporal"}function F4e(e){return e==="ordinal"||e==="nominal"}const p0=HE.quantitative,y7=HE.ordinal,v1=HE.temporal,v7=HE.nominal,db=HE.geojson;function d1t(e){if(e)switch(e=e.toLowerCase(),e){case"q":case p0:return"quantitative";case"t":case v1:return"temporal";case"o":case y7:return"ordinal";case"n":case v7:return"nominal";case db:return"geojson"}}const Xo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},$5={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function h1t(e,t){const n=$5[e],r=$5[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const p1t={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function b_e(e){return p1t[e]}const O4e=new Set(["linear","log","pow","sqrt","symlog"]),M4e=new Set([...O4e,"time","utc"]);function $4e(e){return O4e.has(e)}const I4e=new Set(["quantile","quantize","threshold"]),m1t=new Set([...M4e,...I4e,"sequential","identity"]),g1t=new Set(["ordinal","bin-ordinal","point","band"]);function Mo(e){return g1t.has(e)}function Rc(e){return m1t.has(e)}function wf(e){return M4e.has(e)}function b1(e){return I4e.has(e)}const y1t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function v1t(e){return!Nt(e)&&St(e,"name")}function P4e(e){return St(e,"param")}function b1t(e){return St(e,"unionWith")}function x1t(e){return $t(e)&&"field"in e}const w1t={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:hUt,domain:pUt,range:mUt,rangeMax:gUt,rangeMin:yUt,scheme:vUt,..._1t}=w1t,E1t=_t(_1t);function I5(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return wf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return wf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return wf(e);case"nice":return wf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Rc(e)&&!_r(["log","time","utc","threshold","quantile"],e)}}function N4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Tv(e)?void 0:bvt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function S1t(e,t){return _r([y7,v7],t)?e===void 0||Mo(e):t===v1?_r([Xo.TIME,Xo.UTC,void 0],e):t===p0?$4e(e)||b1(e)||e===void 0:!0}function A1t(e,t,n=!1){if(!td(e))return!1;switch(e){case fs:case Io:case fm:case fb:case qu:case jc:return wf(t)||t==="band"?!0:t==="point"?!n:!1;case dm:return _r(["linear","band"],t);case vh:case mm:case bh:case hm:case pm:case I0:return wf(t)||b1(t)||_r(["band","point","ordinal"],t);case $l:case Jf:case Qf:return t!=="band";case gm:case Il:return t==="ordinal"||b1(t)}}function C1t(e){return $t(e)&&"value"in e}const sl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},B4e=sl.arc,qL=sl.area,HL=sl.bar,k1t=sl.image,GL=sl.line,VL=sl.point,T1t=sl.rect,Fk=sl.rule,z4e=sl.text,b7=sl.tick,D1t=sl.trail,x7=sl.circle,w7=sl.square,j4e=sl.geoshape;function vm(e){return["line","area","trail"].includes(e)}function E2(e){return["rect","bar","image","arc","tick"].includes(e)}const L1t=new Set(_t(sl));function zf(e){return St(e,"type")}const R1t=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],F1t=["fill","fillOpacity"],O1t=[...R1t,...F1t],M1t={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},x_e=_t(M1t),dO=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],$1t={area:["line","point"],bar:dO,rect:dO,line:["point"],tick:["bandSize","thickness",...dO]},I1t={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},P1t={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},U4e=_t(P1t);function m0(e){return St(e,"band")}const N1t={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},B1t=5,_7={binSpacing:0,continuousBandSize:B1t,minBandSize:.25,timeUnitBandPosition:.5},z1t={..._7,binSpacing:1},j1t={..._7,thickness:1};function U1t(e){return zf(e)?e.type:e}function q4e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function E7({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Rc(r)||i)return"always-valid";const s=q4e(Mi("invalid",e,t),{isPath:vm(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function q1t(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function H4e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function G4e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var f;const o=n==null?void 0:n.get("type"),a=Oc(t),l=NL(a==null?void 0:a.aggregate),u=E7({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const c=((f=s.scale.invalid)==null?void 0:f[e])??"zero-or-min";return{test:UL(Ft(a,{expr:"datum"}),!1),...H1t(c,n,r)}}}function H1t(e,t,n){if(C1t(e)){const{value:r}=e;return cn(r)?{signal:r.signal}:{value:r}}return H4e({scale:t,scaleName:n,mode:"zeroOrMin"})}function S7(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=P0(t),l=A7(e),u=G4e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function G1t(e){const{datum:t}=e;return z0(t)?h0(t):`${Ii(t)}`}function Ug(e,t,n,r){const i={};if(t&&(i.scale=t),nd(e)){const{datum:s}=e;z0(s)?i.signal=h0(s):cn(s)?i.signal=s.signal:qE(s)?i.signal=s.expr:i.value=s}else i.field=Ft(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function Ok({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!cn(o)&&0<o&&o<1?"datum":void 0,l=Ft(t,{expr:a,suffix:i}),u=n!==void 0?Ft(n,{expr:a}):Ft(t,{suffix:s,expr:a}),f={};if(o===0||o===1){f.scale=e;const c=o===0?l:u;f.field=c}else{const c=cn(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;f.signal=`scale("${e}", ${c})`}return r&&(f.offset=r),f}function V1t({scaleName:e,fieldDef:t}){const n=Ft(t,{expr:"datum"}),r=Ft(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function A7({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:f}){if(t){if(Wn(t)){const c=o==null?void 0:o.get("type");if(nl(t)){f??(f=Jp({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Zi(d)||f&&h&&p===v1)return a!=null&&a.impute?Ug(t,s,{binSuffix:"mid"},{offset:l}):f&&!Mo(c)?Ok({scaleName:s,fieldOrDatumDef:t,bandPosition:f,offset:l}):Ug(t,s,XE(t,e)?{binSuffix:"range"}:{},{offset:l});if(Wo(d)){if(kt(n))return Ok({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});Ct(b4e(e===fs?zc:Kf))}}return Ug(t,s,Mo(c)?{binSuffix:"range"}:{},{offset:l,band:c==="band"?f??t.bandPosition??.5:void 0})}else if(Fc(t)){const c=t.value,d=l?{offset:l}:{};return{...D_(e,c),...d}}}return ir(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function D_(e,t){return _r(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:_r(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ss(t)}function g0(e){return e&&e!=="number"&&e!=="time"}function V4e(e,t,n){return`${e}(${t}${n?`, ${Ii(n)}`:""})`}const W1t="  ";function C7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if(g0(n))return xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=W4e(e,r,i),a=x1(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return xc({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return xc({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&kt(e)&&e.timeUnit===void 0)return xc({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(_1(e)){const f=X1t({field:o,timeUnit:kt(e)?(l=Fo(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:U0(e)&&((u=e.scale)==null?void 0:u.type)===Xo.UTC});return f?{signal:f}:void 0}if(t=P5({type:a,specifiedFormat:t,config:s,normalizeStack:i}),kt(e)&&Zi(e.bin)){const f=Ft(e,{expr:r,binSuffix:"end"});return{signal:GE(o,f,t,n,s)}}else return t||x1(e)==="quantitative"?{signal:`${Z4e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function W4e(e,t,n){return kt(e)?n?`${Ft(e,{expr:t,suffix:"end"})}-${Ft(e,{expr:t,suffix:"start"})}`:Ft(e,{expr:t}):G1t(e)}function xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=W4e(e,r,i)),o!=="datum.value"&&kt(e)&&Zi(e.bin)){const a=Ft(e,{expr:r,binSuffix:"end"});return{signal:GE(o,a,t,n,s)}}return{signal:V4e(n,o,t)}}function Y4e(e,t,n,r,i,s){var o;if(!(Nt(r)&&g0(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&x1(e)==="quantitative"&&(i.normalizedNumberFormatType&&w1(e)&&e.stack==="normalize"||i.numberFormatType))){if(w1(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return P5({type:"quantitative",config:i,normalizeStack:!0});if(_1(e)){const a=kt(e)?(o=Fo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Y1t({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return P5({type:t,specifiedFormat:n,config:i})}}function X4e(e,t,n){var r;if(e&&(cn(e)||e==="number"||e==="time"))return e;if(_1(t)&&n!=="time"&&n!=="utc")return kt(t)&&((r=Fo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function P5({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Nt(t))return t;if(e===p0)return r?n.normalizedNumberFormat:n.numberFormat}function Y1t({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:k4e(t)}:r?void 0:n.timeFormat)}function Z4e(e,t){return`format(${e}, "${t||""}")`}function w_e(e,t,n,r){return g0(n)?V4e(n,e,t):Z4e(e,(Nt(t)?t:void 0)??r.numberFormat)}function GE(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return GE(e,t,i.numberFormat,i.numberFormatType,i);const s=w_e(e,n,r,i),o=w_e(t,n,r,i);return`${UL(e,!1)} ? "null" : ${s} + "${W1t}" + ${o}`}function X1t({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Nt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):r1t(t,e,s)}const WL="min",Z1t={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function __e(e){return Yt(Z1t,e)}function K1t(e){return St(e,"encoding")}function Zd(e){return e&&(e.op==="count"||St(e,"field"))}function K4e(e){return e&&at(e)}function VE(e){return St(e,"row")||St(e,"column")}function k7(e){return St(e,"header")}function YL(e){return St(e,"facet")}function J1t(e){return St(e,"param")}function Q1t(e){return!Nt(e)&&St(e,"repeat")}function E_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function T7(e){return St(e,"sort")}function Jp({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Wn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(kt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Bf("timeUnitBandPosition",n,r);if(Zi(s))return .5}}function J4e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,f,c;const a=Pl(e),l=Mi(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(kt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Bf("timeUnitBandSize",r,i)};if(Zi(h)&&!Mo(s))return{band:1}}if(E2(r.type))return s?Mo(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(f=i[r.type])==null?void 0:f.continuousBandSize:(c=i[r.type])==null?void 0:c.discreteBandSize}function Q4e(e,t,n,r){return Zi(e.bin)||e.timeUnit&&nl(e)&&e.type==="temporal"?Jp({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function e6e(e){return St(e,"sort")&&!St(e,"field")}function WE(e){return St(e,"condition")}function XL(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&kt(t)}function YE(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Wn(t)}function ebt(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||Fc(t))}function kt(e){return St(e,"field")||(e==null?void 0:e.aggregate)==="count"}function x1(e){return e==null?void 0:e.type}function nd(e){return St(e,"datum")}function Cp(e){return nl(e)&&!$k(e)||Mk(e)}function S_e(e){return nl(e)&&e.type==="quantitative"&&!e.bin||Mk(e)}function Mk(e){return nd(e)&&li(e.datum)}function Wn(e){return kt(e)||nd(e)}function nl(e){return e&&(St(e,"field")||e.aggregate==="count")&&St(e,"type")}function Fc(e){return St(e,"value")}function U0(e){return St(e,"scale")||St(e,"sort")}function w1(e){return St(e,"axis")||St(e,"stack")||St(e,"impute")}function t6e(e){return St(e,"legend")}function n6e(e){return St(e,"format")||St(e,"formatType")}function tbt(e){return Ll(e,["legend","axis","header","scale"])}function nbt(e){return St(e,"op")}function Ft(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(ibt(e))n=GMe("count");else{let o;if(!t.nofn)if(nbt(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Zi(a)?(o=s4e(a),i=(t.binSuffix??"")+(t.suffix??"")):l?ym(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):sh(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!j0(u)&&(o=i1t(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?cb(n):t.expr?UMe(n,t.expr)+s:Bu(n)+s}function $k(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return kt(e)&&!!e.bin;case"temporal":return!1}throw new Error(m4e(e.type))}function rbt(e){var t;return U0(e)&&b1((t=e.scale)==null?void 0:t.type)}function ibt(e){return e.aggregate==="count"}function sbt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Zi(r))return`${n} (binned)`;if(i&&!j0(i)){const a=(o=Fo(i))==null?void 0:o.unit;if(a)return`${n} (${jL(a).join("-")})`}else if(s)return ym(s)?`${n} for max ${s.argmax}`:sh(s)?`${n} for min ${s.argmin}`:`${BE(s)} of ${n}`;return n}function obt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(ym(t))return`${i} for argmax(${t.argmax})`;if(sh(t))return`${i} for argmin(${t.argmin})`;const s=r&&!j0(r)?Fo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Zi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const r6e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return obt(e);default:return sbt(e,t)}};let i6e=r6e;function s6e(e){i6e=e}function abt(){s6e(r6e)}function Dv(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=D7(e))==null?void 0:a.title;if(!kt(e))return i??e.title;const s=e,o=r?L7(s,t):void 0;return n?Ns(i,s.title,o):i??s.title??o}function D7(e){if(w1(e)&&e.axis)return e.axis;if(t6e(e)&&e.legend)return e.legend;if(k7(e)&&e.header)return e.header}function L7(e,t){return i6e(e,t)}function Ik(e){if(n6e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=D7(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function lbt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(T7(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!ym(n)&&!sh(n))return"quantitative";if(U0(e)&&((s=e.scale)!=null&&s.type))switch($5[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Oc(e){if(kt(e))return e;if(XL(e))return e.condition}function go(e){if(Wn(e))return e;if(YE(e))return e.condition}function o6e(e,t,n,r={}){if(Nt(e)||li(e)||lm(e)){const i=Nt(e)?"string":li(e)?"number":"boolean";return Ct(avt(t,i,e)),{value:e}}return Wn(e)?Pk(e,t,n,r):YE(e)?{...e,condition:Pk(e.condition,t,n,r)}:e}function Pk(e,t,n,r){if(n6e(e)){const{format:i,formatType:s,...o}=e;if(g0(s)&&!n.customFormatTypes)return Ct(g_e(t)),Pk(o,t,n,r)}else{const i=w1(e)?"axis":t6e(e)?"legend":k7(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(g0(o)&&!n.customFormatTypes)return Ct(g_e(t)),Pk({...e,[i]:a},t,n,r)}}return kt(e)?R7(e,t,r):ubt(e)}function ubt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=li(n)?"quantitative":Nt(n)?"nominal":z0(n)?"temporal":void 0,{...e,type:t}}function R7(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!n7(r)&&!ym(r)&&!sh(r)&&(Ct(uvt(r)),delete a.aggregate),i&&(a.timeUnit=Fo(i)),o&&(a.field=`${o}`),Zi(s)&&(a.bin=ZL(s,t)),Wo(s)&&!Bs(t)&&Ct(jvt(t)),nl(a)){const{type:l}=a,u=d1t(l);l!==u&&(a.type=u),l!=="quantitative"&&NL(r)&&(Ct(lvt(l,r)),a.type="quantitative")}else if(!QMe(t)){const l=lbt(a,t);a.type=l}if(nl(a)){const{compatible:l,warning:u}=cbt(a,t)||{};l===!1&&Ct(u)}if(T7(a)&&Nt(a.sort)){const{sort:l}=a;if(__e(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&__e(u))return{...a,sort:{encoding:u,order:"descending"}}}if(k7(a)){const{header:l}=a;if(l){const{orient:u,...f}=l;if(u)return{...a,header:{...f,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function ZL(e,t){return lm(e)?{maxbins:a_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:a_e(t)}:e}const qy={compatible:!0};function cbt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Yd:case Xd:case FL:return $k(e)?qy:{compatible:!1,warning:hvt(t)};case fs:case Io:case fm:case fb:case $l:case Jf:case Qf:case zE:case jE:case OL:case f0:case ML:case $L:case I0:case qu:case jc:case IL:return qy;case qc:case zu:case Uc:case Hc:return n!==p0?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:qy;case bh:case hm:case pm:case mm:case vh:case yh:case gh:case zc:case Kf:case dm:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:qy;case Il:case gm:return!$k(e)&&!rbt(e)?{compatible:!1,warning:pvt(t)}:qy;case y1:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:qy}}function _1(e){const{formatType:t}=Ik(e);return t==="time"||!t&&fbt(e)}function fbt(e){return e&&(e.type==="temporal"||kt(e)&&!!e.timeUnit)}function KL(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=Fo(t))==null?void 0:l.unit);let o=s||n==="temporal",a;return qE(e)?a=e.expr:cn(e)?a=e.signal:z0(e)?(o=!0,a=h0(e)):(Nt(e)||li(e))&&o&&(a=`datetime(${Ii(e)})`,Qvt(s)&&(li(e)&&e<1e4||Nt(e)&&isNaN(Date.parse(e)))&&(a=h0({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ii(e)}function a6e(e,t){const{type:n}=e;return t.map(r=>{const i=kt(e)&&!j0(e.timeUnit)?e.timeUnit:void 0,s=KL(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function XE(e,t){return Zi(e.bin)?td(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const A_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ZE(e){return e==null?void 0:e.condition}const l6e=["domain","grid","labels","ticks","title"],dbt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},u6e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},hbt={...u6e,style:1,labelExpr:1,encoding:1};function C_e(e){return Yt(hbt,e)}const pbt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},c6e=_t(pbt);function wh(e){return St(e,"mark")}class JL{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return wh(t)?U1t(t.mark)===this.name:!1}}function qg(e,t){const n=e&&e[t];return n?at(n)?m1(n,r=>!!r.field):kt(n)||XL(n):!1}function f6e(e,t){const n=e&&e[t];return n?at(n)?m1(n,r=>!!r.field):kt(n)||nd(n)||YE(n):!1}function d6e(e,t){if(Bs(t)){const n=e[t];if((kt(n)||nd(n))&&(F4e(n.type)||kt(n)&&n.timeUnit)){const r=K9(t);return f6e(e,r)}}return!1}function h6e(e){return m1(uyt,t=>{if(qg(e,t)){const n=e[t];if(at(n))return m1(n,r=>!!r.aggregate);{const r=Oc(n);return r&&!!r.aggregate}}return!1})}function p6e(e,t){const n=[],r=[],i=[],s=[],o={};return F7(e,(a,l)=>{if(kt(a)){const{field:u,aggregate:f,bin:c,timeUnit:d,...h}=a;if(f||d||c){const p=D7(a),g=p==null?void 0:p.title;let v=Ft(a,{forAs:!0});const y={...g?[]:{title:Dv(a,t,{allowDisabling:!0})},...h,field:v};if(f){let b;if(ym(f)?(b="argmax",v=Ft({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${v}.${u}`):sh(f)?(b="argmin",v=Ft({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(b=f),b){const w={op:b,as:v};u&&(w.field=u),s.push(w)}}else if(n.push(v),nl(a)&&Zi(c)){if(r.push({bin:c,field:u,as:v}),n.push(Ft(a,{binSuffix:"end"})),XE(a,l)&&n.push(Ft(a,{binSuffix:"range"})),Bs(l)){const b={field:`${v}_end`};o[`${l}2`]=b}y.bin="binned",QMe(l)||(y.type=p0)}else if(d&&!j0(d)){i.push({timeUnit:d,field:u,as:v});const b=nl(a)&&a.type!==v1&&"time";b&&(l===zE||l===f0?y.formatType=b:xyt(l)?y.legend={formatType:b,...y.legend}:Bs(l)&&(y.axis={formatType:b,...y.axis}))}o[l]=y}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function mbt(e,t,n){const r=_yt(t,n);if(r){if(r==="binned"){const i=e[t===zc?fs:Io];return!!(kt(i)&&kt(e[t])&&Wo(i.bin))}}else return!1;return!0}function gbt(e,t,n,r){const i={};for(const s of _t(e))JMe(s)||Ct(dvt(s));for(let s of myt){if(!e[s])continue;const o=e[s];if(UE(s)){const a=pyt(s),l=i[a];if(kt(l)&&f1t(l.type)&&kt(o)&&!l.timeUnit){Ct(ovt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ct(svt),s=qu),!mbt(e,s,t)){Ct(zL(s,t));continue}if(s===vh&&t==="line"){const a=Oc(e[s]);if(a!=null&&a.aggregate){Ct(fvt);continue}}if(s===$l&&(n?"fill"in e:"stroke"in e)){Ct(g4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===jE||s===y1&&!at(o)&&!Fc(o)||s===f0&&at(o)){if(o){if(s===y1){const a=e[s];if(e6e(a)){i[s]=a;continue}}i[s]=Pt(o).reduce((a,l)=>(kt(l)?a.push(R7(l,s)):Ct(M5(l,s)),a),[])}}else{if(s===f0&&o===null)i[s]=null;else if(!kt(o)&&!nd(o)&&!Fc(o)&&!WE(o)&&!cn(o)){Ct(M5(o,s));continue}i[s]=o6e(o,s,r)}}return i}function QL(e,t){const n={};for(const r of _t(e)){const i=o6e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function ybt(e){const t=[];for(const n of _t(e))if(qg(e,n)){const r=e[n],i=Pt(r);for(const s of i)kt(s)?t.push(s):XL(s)&&t.push(s.condition)}return t}function F7(e,t,n){if(e)for(const r of _t(e)){const i=e[r];if(at(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function vbt(e,t,n,r){return e?_t(e).reduce((i,s)=>{const o=e[s];return at(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function m6e(e,t){return _t(t).reduce((n,r)=>{switch(r){case fs:case Io:case ML:case IL:case $L:case zc:case Kf:case fm:case fb:case qu:case yh:case jc:case gh:case dm:case Uc:case qc:case Hc:case zu:case zE:case Il:case I0:case f0:return n;case y1:if(e==="line"||e==="trail")return n;case jE:case OL:{const i=t[r];if(at(i)||kt(i))for(const s of Pt(i))s.aggregate||n.push(Ft(s,{}));return n}case vh:if(e==="trail")return n;case $l:case Jf:case Qf:case bh:case hm:case pm:case gm:case mm:{const i=Oc(t[r]);return i&&!i.aggregate&&n.push(Ft(i,{})),n}}},[])}function bbt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function N5(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${O7(t)}`:"";return{field:o+t.field,type:t.type,title:cn(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=ybt(n).map(tbt);return{tooltip:[...i,...xf(s,Or)]}}function O7(e){const{title:t,field:n}=e;return Ns(t,n)}function M7(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:f=void 0,extraEncoding:c={}})=>{const d=O7(n);return g6e(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Nt(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...c}})}}function g6e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...zf(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...lm(e[t])?{}:e[t]}}]:[]}function y6e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:OA(s,n),continuousAxisChannelDef2:OA(o,n),continuousAxisChannelDefError:OA(a,n),continuousAxisChannelDefError2:OA(l,n),continuousAxis:i}}function OA(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ct(zvt(n,t)),r}else return e}function v6e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(zf(n)&&n.orient)return n.orient;if(Cp(i)){if(Cp(s)){const o=kt(i)&&i.aggregate,a=kt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return _1(s)&&!_1(i)?"horizontal":"vertical"}return"horizontal"}else{if(Cp(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Nk="boxplot",xbt=["box","median","outliers","rule","ticks"],wbt=new JL(Nk,x6e);function b6e(e){return li(e)?"tukey":e}function x6e(e,{config:t}){e={...e,encoding:QL(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=zf(n)?n:{type:n};i&&Ct(p4e("boxplot"));const l=a.extent??t.boxplot.extent,u=Mi("size",a,t),f=a.invalid,c=b6e(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:v,groupby:y,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:A,customTooltipWithoutAggregatedField:T}=_bt(e,l,t),D=cb(g.field),{color:k,size:R,...O}=w,B=Ze=>M7(a,v,g,Ze,t.boxplot),K=B(O),L=B(w),$=($t(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",I=B({...O,...R?{size:R}:{},color:{condition:{test:`${ki(`lower_box_${g.field}`)} >= ${ki(`upper_box_${g.field}`)}`,...k||{value:$}}}}),U=N5([{fieldPrefix:c==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:c==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,w),q={type:"tick",color:"black",opacity:1,orient:E,invalid:f,aria:!1},Y=c==="min-max"?U:N5([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,w),X=[...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:Y})],te=[...c!=="tukey"?X:[],...L({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:A,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...I({partName:"median",mark:{type:"tick",invalid:f,...$t(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(c==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:te};const le=ki(`lower_box_${g.field}`),ee=ki(`upper_box_${g.field}`),z=`(${ee} - ${le})`,he=`${le} - ${l} * ${z}`,de=`${ee} + ${l} * ${z}`,ze=ki(g.field),He={joinaggregate:w6e(g.field),groupby:y},je={transform:[{filter:`(${he} <= ${ze}) && (${ze} <= ${de})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${D}`},{op:"max",field:g.field,as:`upper_whisker_${D}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${D}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${D}`},...b],groupby:y}],layer:X},{tooltip:we,...Ie}=O,{scale:qe,axis:Pe}=g,At=O7(g),ht=Ll(Pe,["title"]),nn=g6e(a,"outliers",t.boxplot,{transform:[{filter:`(${ze} < ${he}) || (${ze} > ${de})`}],mark:"point",encoding:{[v]:{field:g.field,type:g.type,...At!==void 0?{title:At}:{},...qe!==void 0?{scale:qe}:{},...$i(ht)?{}:{axis:ht}},...Ie,...k?{color:k}:{},...T?{tooltip:T}:{}}})[0];let Vt;const Mn=[...d,...h,He];return nn?Vt={transform:Mn,layer:[nn,je]}:(Vt=je,Vt.transform.unshift(...Mn)),{...o,layer:[Vt,{transform:p,layer:te}]}}function w6e(e){const t=cb(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function _bt(e,t,n){const r=v6e(e,Nk),{continuousAxisChannelDef:i,continuousAxis:s}=y6e(e,r,Nk),o=i.field,a=cb(o),l=b6e(t),u=[...w6e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${ki(`upper_box_${a}`)} - ${ki(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${ki(`upper_box_${a}`)} + ${ki(`iqr_${a}`)} * ${t}, ${ki(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${ki(`lower_box_${a}`)} - ${ki(`iqr_${a}`)} * ${t}, ${ki(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:c,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=bbt(d),{bins:g,timeUnits:v,aggregate:y,groupby:b,encoding:w}=p6e(p,n),E=r==="vertical"?"horizontal":"vertical",A=r,T=[...g,...v,{aggregate:[...y,...u],groupby:b},...f];return{bins:g,timeUnits:v,transform:T,groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:A,customTooltipWithoutAggregatedField:h}}const $7="errorbar",Ebt=["ticks","rule"],Sbt=new JL($7,_6e);function _6e(e,{config:t}){e={...e,encoding:QL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=E6e(e,$7,t);delete s.size;const f=M7(a,i,r,s,t.errorbar),c=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...c!==void 0?{thickness:c}:{},...d!==void 0?{size:d}:{}},p=[...f({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...f({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...c!==void 0?{size:c}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Abt(e,t){const{encoding:n}=e;if(Cbt(n))return{orient:v6e(e,t),inputType:"raw"};const r=kbt(n),i=Tbt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Wn(a)&&Wn(l))throw new Error(`${t} cannot have both x2 and y2`);if(Wn(a)){if(Cp(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Wn(l)){if(Cp(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,f=n.yError2;if(Wn(l)&&!Wn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Wn(f)&&!Wn(u))throw new Error(`${t} cannot have yError2 without yError`);if(Wn(a)&&Wn(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Wn(a)){if(Cp(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Wn(u)){if(Cp(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Cbt(e){return(Wn(e.x)||Wn(e.y))&&!Wn(e.x2)&&!Wn(e.y2)&&!Wn(e.xError)&&!Wn(e.xError2)&&!Wn(e.yError)&&!Wn(e.yError2)}function kbt(e){return Wn(e.x2)||Wn(e.y2)}function Tbt(e){return Wn(e.xError)||Wn(e.xError2)||Wn(e.yError)||Wn(e.yError2)}function E6e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=zf(r)?r:{type:r};s&&Ct(p4e(t));const{orient:u,inputType:f}=Abt(e,t),{continuousAxisChannelDef:c,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=y6e(e,u,t),{errorBarSpecificAggregate:v,postAggregateCalculates:y,tooltipSummary:b,tooltipTitleWithFieldName:w}=Dbt(l,c,d,h,p,f,t,n),{[g]:E,[g==="x"?"x2":"y2"]:A,[g==="x"?"xError":"yError"]:T,[g==="x"?"xError2":"yError2"]:D,...k}=i,{bins:R,timeUnits:O,aggregate:B,groupby:K,encoding:L}=p6e(k,n),$=[...B,...v],I=f!=="raw"?[]:K,U=N5(b,c,L,w);return{transform:[...a.transform??[],...R,...O,...$.length===0?[]:[{aggregate:$,groupby:I}],...y],groupby:I,continuousAxisChannelDef:c,continuousAxis:g,encodingWithoutContinuousAxis:L,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:U}}function Dbt(e,t,n,r,i,s,o,a){let l=[],u=[];const f=t.field;let c,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ct(Bvt(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:f,as:`extent_${f}`},{op:h,field:f,as:`center_${f}`}],u=[{calculate:`${ki(`center_${f}`)} + ${ki(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${ki(`center_${f}`)} - ${ki(`extent_${f}`)}`,as:`lower_${f}`}],c=[{fieldPrefix:"center_",titlePrefix:BE(h)},{fieldPrefix:"upper_",titlePrefix:k_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:k_e(h,p,"-")}],d=!0;else{let g,v,y;p==="ci"?(g="mean",v="ci0",y="ci1"):(g="median",v="q1",y="q3"),l=[{op:v,field:f,as:`lower_${f}`},{op:y,field:f,as:`upper_${f}`},{op:g,field:f,as:`center_${f}`}],c=[{fieldPrefix:"upper_",titlePrefix:Dv({field:f,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Dv({field:f,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Dv({field:f,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ct(Nvt(e.center,e.extent)),s==="aggregated-upper-lower"?(c=[],u=[{calculate:ki(n.field),as:`upper_${f}`},{calculate:ki(f),as:`lower_${f}`}]):s==="aggregated-error"&&(c=[{fieldPrefix:"",titlePrefix:f}],u=[{calculate:`${ki(f)} + ${ki(r.field)}`,as:`upper_${f}`}],i?u.push({calculate:`${ki(f)} + ${ki(i.field)}`,as:`lower_${f}`}):u.push({calculate:`${ki(f)} - ${ki(r.field)}`,as:`lower_${f}`}));for(const h of u)c.push({fieldPrefix:h.as.substring(0,6),titlePrefix:c0(c0(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:c,tooltipTitleWithFieldName:d}}function k_e(e,t,n){return`${BE(e)} ${n} ${t}`}const I7="errorband",Lbt=["band","borders"],Rbt=new JL(I7,S6e);function S6e(e,{config:t}){e={...e,encoding:QL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=E6e(e,I7,t),u=o,f=M7(u,i,r,s,t.errorband),c=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:c?"area":"rect"},h={type:c?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return c?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Ct(v_e("interpolate")):u.tension&&Ct(v_e("tension")),{...a,transform:n,layer:[...f({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const A6e={};function P7(e,t,n){const r=new JL(e,t);A6e[e]={normalizer:r,parts:n}}function Fbt(){return _t(A6e)}P7(Nk,x6e,xbt);P7($7,_6e,Ebt);P7(I7,S6e,Lbt);const Obt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],C6e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},k6e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Mbt=_t(C6e),$bt=_t(k6e),Ibt={header:1,headerRow:1,headerColumn:1,headerFacet:1},T6e=_t(Ibt),D6e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Pbt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Nbt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Mc="_vgsid_",Bbt={point:{on:"click",fields:[Mc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function N7(e){return e==="legend"||!!(e!=null&&e.legend)}function hO(e){return N7(e)&&$t(e)}function B7(e){return!!(e!=null&&e.select)}function L6e(e){const t=[];for(const n of e||[]){if(B7(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function zbt(e){return eR(e)||j7(e)||z7(e)}function z7(e){return St(e,"concat")}function eR(e){return St(e,"vconcat")}function j7(e){return St(e,"hconcat")}function R6e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function jf(e){return St(e,"step")}function T_e(e){return St(e,"view")||St(e,"width")||St(e,"height")}const D_e=20,jbt={align:1,bounds:1,center:1,columns:1,spacing:1},Ubt=_t(jbt);function qbt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(YL(e)&&!VE(e.facet)||z7(e))&&(i.columns=o),eR(e)&&(i.columns=1);for(const a of Ubt)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=li(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function B5(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function z5(e,t){const n=Bk(e,t);return jf(n)?n.step:F6e}function Bk(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ns(n,{step:e.step})}const F6e=20,Hbt={continuousWidth:200,continuousHeight:200,step:F6e},Gbt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Hbt,mark:I1t,arc:{},area:{},bar:z1t,circle:{},geoshape:{},image:{},line:{},point:{},rect:_7,rule:{color:"black"},square:{},text:{color:"black"},tick:j1t,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:y1t,projection:{},legend:Pbt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Bbt,style:{},title:{},facet:{spacing:D_e},concat:{spacing:D_e},normalizedNumberFormat:".0%"},Ad=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],L_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},R_e={blue:Ad[0],orange:Ad[1],red:Ad[2],teal:Ad[3],green:Ad[4],yellow:Ad[5],purple:Ad[6],pink:Ad[7],brown:Ad[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Vbt(e={}){return{signals:[{name:"color",value:$t(e)?{...R_e,...e}:R_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Wbt(e){return{signals:[{name:"fontSize",value:$t(e)?{...L_e,...e}:L_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Ybt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function O6e(e){const t=_t(e||{}),n={};for(const r of t){const i=e[r];n[r]=ZE(i)?a4e(i):Xl(i)}return n}function Xbt(e){const t=_t(e),n={};for(const r of t)n[r]=O6e(e[r]);return n}const Zbt=[...U4e,...c6e,...T6e,"background","padding","legend","lineBreak","scale","style","title","view"];function M6e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=J1({},Gn(Gbt),n?Ybt(n):{},t?Vbt(t):{},r?Wbt(r):{},s||{});i&&Q1(o,"selection",i,!0);const a=Ll(o,Zbt);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=Xl(o[l]));for(const l of U4e)o[l]&&(a[l]=Yo(o[l]));for(const l of c6e)o[l]&&(a[l]=O6e(o[l]));for(const l of T6e)o[l]&&(a[l]=Yo(o[l]));if(o.legend&&(a.legend=Yo(o.legend)),o.scale){const{invalid:l,...u}=o.scale,f=Yo(l,{level:1});a.scale={...Yo(u),..._t(f).length>0?{invalid:f}:{}}}return o.style&&(a.style=Xbt(o.style)),o.title&&(a.title=Yo(o.title)),o.view&&(a.view=Yo(o.view)),a}const Kbt=new Set(["view",...L1t]),Jbt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Qbt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...$1t};function ext(e){e=Gn(e);for(const t of Jbt)delete e[t];if(e.axis)for(const t in e.axis)ZE(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Obt)delete e.legend[t];if(e.mark){for(const t of x_e)delete e.mark[t];e.mark.tooltip&&$t(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(L6e(e.params)),delete e.params);for(const t of Kbt){for(const r of x_e)delete e[t][r];const n=Qbt[t];if(n)for(const r of n)delete e[t][r];nxt(e,t)}for(const t of Fbt())delete e[t];txt(e);for(const t in e)$t(e[t])&&$i(e[t])&&delete e[t];return $i(e)?void 0:e}function txt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=o4e(e.title);$i(t)||(e.style["group-title"]={...e.style["group-title"],...t}),$i(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),$i(r)?delete e.title:e.title=r}function nxt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};$i(s)||(e.style[n??t]=s),delete e[t]}function tR(e){return St(e,"layer")}function rxt(e){return St(e,"repeat")}function ixt(e){return!at(e.repeat)&&St(e.repeat,"layer")}class U7{map(t,n){return YL(t)?this.mapFacet(t,n):rxt(t)?this.mapRepeat(t,n):j7(t)?this.mapHConcat(t,n):eR(t)?this.mapVConcat(t,n):z7(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(tR(t))return this.mapLayer(t,n);if(wh(t))return this.mapUnit(t,n);throw new Error(r7(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const sxt={zero:1,center:1,normalize:1};function oxt(e){return Yt(sxt,e)}const axt=new Set([B4e,HL,qL,Fk,VL,x7,w7,GL,z4e,b7]),lxt=new Set([HL,qL,B4e]);function Hy(e){return kt(e)&&x1(e)==="quantitative"&&!e.bin}function F_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(kt(o)&&kt(a))if(Hy(o)&&Hy(a)){if(o.stack)return t;if(a.stack)return i;const l=kt(o)&&!!o.aggregate,u=kt(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Hy(o))return t;if(Hy(a))return i}else{if(Hy(o))return s&&n==="vertical"?void 0:t;if(Hy(a))return s&&n==="horizontal"?void 0:i}}function uxt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function $6e(e,t){var g,v;const n=zf(e)?e:{type:e},r=n.type;if(!axt.has(r))return null;const i=F_e(t,"x",n)||F_e(t,"theta",n);if(!i)return null;const s=t[i],o=kt(s)?Ft(s,{}):void 0,a=uxt(i),l=[],u=new Set;if(t[a]){const y=t[a],b=kt(y)?Ft(y,{}):void 0;b&&b!==o&&(l.push(a),u.add(b))}const f=a==="x"?"xOffset":"yOffset",c=t[f],d=kt(c)?Ft(c,{}):void 0;d&&d!==o&&(l.push(f),u.add(d));const h=gyt.reduce((y,b)=>{if(b!=="tooltip"&&qg(t,b)){const w=t[b];for(const E of Pt(w)){const A=Oc(E);if(A.aggregate)continue;const T=Ft(A,{});(!T||!u.has(T))&&y.push({channel:b,fieldDef:A})}}return y},[]);let p;return s.stack!==void 0?lm(s.stack)?p=s.stack?"zero":null:p=s.stack:lxt.has(r)&&(p="zero"),!p||!oxt(p)||h6e(t)&&h.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((v=s==null?void 0:s.scale)==null?void 0:v.type)!==Xo.LINEAR&&s!=null&&s.stack&&Ct($vt(s.scale.type)),Wn(t[ed(i)])?(s.stack!==void 0&&Ct(Mvt(i)),null):(kt(s)&&s.aggregate&&!Dyt.has(s.aggregate)&&Ct(Ivt(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:vm(r),stackBy:h,offset:p}))}function I6e(e,t,n){const r=Yo(e),i=Mi("orient",r,n);if(r.orient=hxt(r.type,t,i),i!==void 0&&i!==r.orient&&Ct(vvt(r.orient,i)),r.type==="bar"&&r.orient){const l=Mi("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:N1t[r.orient];for(const f of u)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Mi("opacity",r,n),o=Mi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=fxt(r.type,t)),Mi("cursor",r,n)===void 0&&(r.cursor=cxt(r,t,n)),r}function cxt(e,t,n){return t.href||e.href||Mi("href",e,n)?"pointer":e.cursor}function fxt(e,t){if(_r([VL,b7,x7,w7],e)&&!h6e(t))return .7}function dxt(e,t,{graticule:n}){if(n)return!1;const r=Bf("filled",e,t),i=e.type;return Ns(r,i!==VL&&i!==GL&&i!==Fk)}function hxt(e,t,n){switch(e){case VL:case x7:case w7:case z4e:case T1t:case k1t:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case HL:if(kt(r)&&(Wo(r.bin)||kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(kt(i)&&(Wo(i.bin)||kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(kt(r)&&r.type===p0&&!Zi(r.bin)||Mk(r))&&kt(i)&&Wo(i.bin)?"horizontal":"vertical";if(!o)return(kt(i)&&i.type===p0&&!Zi(i.bin)||Mk(i))&&kt(r)&&Wo(r.bin)?"vertical":"horizontal"}case Fk:if(s&&!(kt(r)&&Wo(r.bin))&&o&&!(kt(i)&&Wo(i.bin)))return;case qL:if(o)return kt(i)&&Wo(i.bin)?"horizontal":"vertical";if(s)return kt(r)&&Wo(r.bin)?"vertical":"horizontal";if(e===Fk){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case GL:case b7:{const a=S_e(r),l=S_e(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=nl(r)&&r.type===v1,f=nl(i)&&i.type===v1;if(u&&!f)return"vertical";if(!u&&f)return"horizontal"}return}}return"vertical"}function pxt(e){const{point:t,line:n,...r}=e;return _t(r).length>1?r:r.type}function mxt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ll(e[t],["point","line"])});return e}function pO(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?$t(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?$t(t.point)?t.point:{}:void 0}function O_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class gxt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(wh(t)){const{mark:r,encoding:i}=t,s=zf(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!pO(s,n[s.type],i);case"area":return!!pO(s,n[s.type],i)||!!O_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...f}=t,c=QL(u,i),d=zf(a)?a:{type:a},h=pO(d,i[d.type],c),p=d.type==="area"&&O_e(d,i[d.type]),g=[{name:l,...s?{params:s}:{},mark:pxt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Ll(c,["shape"])}],v=$6e(I6e(d,c,i),c);let y=c;if(v){const{fieldChannel:b,offset:w}=v;y={...c,[b]:{...c[b],...w?{stack:w}:{}}}}return y=Ll(y,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",...p1(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...p1(d,["clip","tooltip"]),...h},encoding:y}),r({...f,layer:g},{...n,config:mxt(i)})}}function yxt(e,t){return t?VE(e)?N6e(e,t):P6e(e,t):e}function mO(e,t){return t?N6e(e,t):e}function j5(e,t,n){const r=t[e];if(Q1t(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ct(Xyt(r.repeat));return}return t}function P6e(e,t){if(e=j5("field",e,t),e!==void 0){if(e===null)return null;if(T7(e)&&Zd(e.sort)){const n=j5("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function M_e(e,t){if(kt(e))return P6e(e,t);{const n=j5("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function $_e(e,t){if(Wn(e)){const n=M_e(e,t);if(n)return n;if(WE(e))return{condition:e.condition}}else{if(YE(e)){const n=M_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function N6e(e,t){const n={};for(const r in e)if(St(e,r)){const i=e[r];if(at(i))n[r]=i.map(s=>$_e(s,t)).filter(s=>s);else{const s=$_e(i,t);s!==void 0&&(n[r]=s)}}return n}class vxt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(wh(t)){const{encoding:n,mark:r}=t;if(r==="line"||zf(r)&&r.type==="line")for(const i of hyt){const s=P0(i),o=n[s];if(n[i]&&(kt(o)&&!Wo(o.bin)||nd(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ct(yvt(!!i.x2,!!i.y2)),r({...t,mark:$t(s)?{...s,type:"rule"}:"rule"},n)}}class bxt extends U7{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[wbt,Sbt,Rbt,new gxt,new vxt]}map(t,n){if(wh(t)){const r=qg(t.encoding,Yd),i=qg(t.encoding,Xd),s=qg(t.encoding,FL);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=mO(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return ixt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:f=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(c=>{const d={...u,layer:c},h=`${(i.name?`${i.name}_`:"")+f}child__layer_${cs(c)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!at(r)&&t.columns&&(t=Ll(t,["columns"]),Ct(p_e("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,f=!at(r)&&r.row||[l?l.row:null],c=!at(r)&&r.column||[l?l.column:null],d=at(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of f)for(const v of c){const y={repeat:p,row:g,column:v,layer:l.layer},b=(i.name?`${i.name}_`:"")+u+"child__"+(at(r)?`${cs(p)}`:(r.row?`row_${cs(g)}`:"")+(r.column?`column_${cs(v)}`:"")),w=this.map(i,{...n,repeater:y,repeaterPrefix:b});w.name=b,a.push(Ll(w,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return VE(r)&&t.columns&&(t=Ll(t,["columns"]),Ct(p_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=P_e({parentProjection:o,projection:i}),u=I_e({parentEncoding:s,encoding:mO(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:f,view:c,params:d,encoding:h,...p}=t,{facetMapping:g,layout:v}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=mO(o,n.repeater);return this.mapFacet({...p,...v,facet:g,spec:{...l?{width:l}:{},...f?{height:f}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ct(mvt([...r?[Yd]:[],...i?[Xd]:[]]));const o={},a={};for(const l of[Yd,Xd]){const u=t[l];if(u){const{align:f,center:c,spacing:d,columns:h,...p}=u;o[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...f}=s;return{facetMapping:yxt(f,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:I_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:P_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function I_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([..._t(e),..._t(t)]);for(const s of i){const o=t[s],a=e[s];if(Wn(o)){const l={...a,...o};r[s]=l}else YE(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Fc(a)||cn(a)||Wn(a)||at(a))&&(r[s]=a)}}else r=t;return!r||$i(r)?void 0:r}function P_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ct(ivt({parentProjection:t,projection:n})),n??t}function q7(e){return St(e,"filter")}function xxt(e){return St(e,"stop")}function B6e(e){return St(e,"lookup")}function wxt(e){return St(e,"data")}function _xt(e){return St(e,"param")}function Ext(e){return St(e,"pivot")}function Sxt(e){return St(e,"density")}function Axt(e){return St(e,"quantile")}function Cxt(e){return St(e,"regression")}function kxt(e){return St(e,"loess")}function Txt(e){return St(e,"sample")}function Dxt(e){return St(e,"window")}function Lxt(e){return St(e,"joinaggregate")}function Rxt(e){return St(e,"flatten")}function Fxt(e){return St(e,"calculate")}function z6e(e){return St(e,"bin")}function Oxt(e){return St(e,"impute")}function Mxt(e){return St(e,"timeUnit")}function $xt(e){return St(e,"aggregate")}function Ixt(e){return St(e,"stack")}function Pxt(e){return St(e,"fold")}function Nxt(e){return St(e,"extent")&&!St(e,"density")&&!St(e,"regression")}function Bxt(e){return e.map(t=>q7(t)?{filter:kv(t.filter,c1t)}:t)}class zxt extends U7{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=N_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=N_e(t,n),t.encoding){const r={};for(const[i,s]of Zp(t.encoding))r[i]=j6e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Zp(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...f}=o;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[s]=u!=="none";for(const c of ta(n.selectionPredicates[s]??{}))c.empty=u!=="none";return{name:s,value:a,select:f,bind:l}})}:t}}function N_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(q7(s))return{filter:U5(s,t)};if(z6e(s)&&N0(s.bin))return{...s,bin:U6e(s.bin)};if(B6e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function j6e(e,t){var r,i;const n=Gn(e);if(kt(n)&&N0(n.bin)&&(n.bin=U6e(n.bin)),U0(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(WE(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:U5(s,t)}});else{const{selection:s,param:o,test:a,...l}=j6e(n.condition,t);n.condition=o?n.condition:{...l,test:U5(n.condition,t)}}return n}function U6e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function U5(e,t){const n=r=>kv(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):kv(e.test||e.filter,r=>r.selection?n(r.selection):r)}class q5 extends U7{map(t,n){const r=n.selections??[];if(t.params&&!wh(t)){const i=[];for(const s of t.params)B7(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Nt(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(l=>i.indexOf(l)).every((l,u,f)=>l!==-1&&(u===0||l>f[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=q5.prototype[e];q5.prototype[e]=function(n,r){return t.call(this,n,jxt(n,r))}}function jxt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function q6e(e,t){t===void 0&&(t=M6e(e.config));const n=Gxt(e,t),{width:r,height:i}=e,s=Vxt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Uxt=new bxt,qxt=new zxt,Hxt=new q5;function Gxt(e,t={}){const n={config:t};return Hxt.map(Uxt.map(qxt.map(e,n),n),n)}function B_e(e){return Nt(e)?{type:e}:e??{}}function Vxt(e,t,n){let{width:r,height:i}=t;const s=wh(e)||tR(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ct(c_e("width")),r=void 0),i=="container"&&(Ct(c_e("height")),i=void 0));const a={type:"pad",...o,...n?B_e(n.autosize):{},...B_e(e.autosize)};if(a.type==="fit"&&!s&&(Ct(Nyt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ct(f_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ct(f_e("height")),!Jl(a,{type:"pad"}))return a}function Wxt(e){return["fit","fit-x","fit-y"].includes(e)}function Yxt(e){return e?`fit-${PL(e)}`:"fit"}const Xxt=["background","padding"];function z_e(e,t){const n={};for(const r of Xxt)e&&e[r]!==void 0&&(n[r]=Xl(e[r]));return t&&(n.params=e.params),n}class _h{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new _h(Gn(this.explicit),Gn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ns(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of _t(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function hf(e){return{explicit:!0,value:e}}function ql(e){return{explicit:!1,value:e}}function H6e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:nR(t,n,r,i)}}function nR(e,t,n,r){return e.explicit&&t.explicit&&Ct(kvt(n,r,e.value,t.value)),e}function Qp(e,t,n,r,i=nR){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Jl(e.value,t.value)?e:i(e,t,n,r)}class Zxt extends _h{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function E1(e){return St(e,"url")}function S2(e){return St(e,"values")}function G6e(e){return St(e,"name")&&!E1(e)&&!S2(e)&&!Ip(e)}function Ip(e){return e&&(V6e(e)||W6e(e)||H7(e))}function V6e(e){return St(e,"sequence")}function W6e(e){return St(e,"sphere")}function H7(e){return St(e,"graticule")}var vs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(vs||(vs={}));function Y6e({invalid:e,isPath:t}){switch(q4e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Kxt(e){const{marks:t,scales:n}=Y6e(e);return t===n?vs.Main:n==="include-invalid-values"?vs.PreFilterInvalid:vs.PostFilterInvalid}class Di{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ct(tvt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Rl extends Di{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${HMe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function gO(e){return e.as!==void 0}function j_e(e){return`${e}_end`}class Cf extends Di{clone(){return new Cf(null,Gn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(j0(l)){if(ys(n)){const{mark:f,markDef:c,config:d}=n,h=Jp({fieldDef:s,markDef:c,config:d});(E2(f)||h)&&(u={timeUnit:Fo(l),field:a})}}else u={as:Ft(s,{forAs:!0}),field:a,timeUnit:l};if(ys(n)){const{mark:f,markDef:c,config:d}=n,h=Jp({fieldDef:s,markDef:c,config:d});E2(f)&&Bs(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Or(u)]=u)}return i},{});return $i(r)?null:new Cf(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Fo(r),o={...i,timeUnit:s};return new Cf(t,{[Or(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Zp(this.timeUnits)){const s=gO(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(ta(this.timeUnits).map(t=>gO(t)?t.as:j_e(t.field)))}dependentFields(){return new Set(ta(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Or(this.timeUnits)}`}assemble(){const t=[];for(const n of ta(this.timeUnits)){const{rectBandPosition:r}=n,i=Fo(n.timeUnit);if(gO(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,f=[o,`${o}_end`];t.push({field:Bu(s),type:"timeunit",...a?{units:jL(a)}:{},...l?{timezone:"utc"}:{},...u,as:f}),t.push(...U_e(f,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=X6e({timeUnit:i,field:o}),l=j_e(o);t.push({type:"formula",expr:a,as:l}),t.push(...U_e([o,l],r,i))}}return t}}const rR="offsetted_rect_start",iR="offsetted_rect_end";function X6e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=A4e(r),{part:o,step:a}=D4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${ki(t)}, ${n?-a:a})`}function U_e([e,t],n,r){if(n!==void 0&&n!==.5){const i=ki(e),s=ki(t);return[{type:"formula",expr:q_e([X6e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${rR}`},{type:"formula",expr:q_e([i,s],n+.5),as:`${e}_${iR}`}]}return[]}function q_e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const KE="_tuple_fields";class Jxt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Qxt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Jxt),s={},o={},a=new Set,l=(p,g)=>{const v=g==="visual"?p.channel:p.field;let y=cs(`${r}_${v}`);for(let b=1;a.has(y);b++)y=cs(`${r}_${v}_${b}`);return a.add(y),{[g]:y}},u=t.type,f=e.config.selection[u],c=n.value!==void 0?Pt(n.value):null;let{fields:d,encodings:h}=$t(n.select)?n.select:{};if(!d&&!h&&c){for(const p of c)if($t(p))for(const g of _t(p))dyt(g)?(h||(h=[])).push(g):u==="interval"?(Ct(Yyt),h=f.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=f.encodings,"fields"in f&&(d=f.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let v=g.field;if(g.aggregate){Ct(Byt(p,g.aggregate));continue}else if(!v){Ct(h_e(p));continue}if(g.timeUnit&&!j0(g.timeUnit)){v=e.vgField(p);const y={timeUnit:g.timeUnit,as:v,field:g.field};o[Or(y)]=y}if(!s[v]){const y=u==="interval"&&td(p)&&Rc(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",b={field:v,channel:p,type:y,index:i.items.length};b.signals={...l(b,"data"),...l(b,"visual")},i.items.push(s[v]=b),i.hasField[v]=s[v],i.hasSelectionId=i.hasSelectionId||v===Mc,ZMe(p)?(b.geoChannel=p,b.channel=XMe(p),i.hasChannel[b.channel]=s[v]):i.hasChannel[p]=s[v]}}else Ct(h_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===Mc}c&&(t.init=c.map(p=>i.items.map(g=>$t(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),$i(o)||(i.timeUnit=new Cf(null,o))},signals:(e,t,n)=>{const r=t.name+KE;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(Q6e)})}},Z6e="_curr",qC="anim_value",nv="anim_clock",H5="eased_anim_clock",K6e="min_extent",J6e="max_range_extent",yO="last_tick_at",vO="is_playing",ewt=1/60*1e3,twt=(e,t)=>[{name:H5,update:nv},{name:`${e}_domain`,init:`domain('${t}')`},{name:K6e,init:`extent(${e}_domain)[0]`},{name:J6e,init:`extent(range('${t}'))[1]`},{name:qC,update:`invert('${t}', ${H5})`}],nwt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(kf(t)&&(n=n.concat([{name:nv,init:"0",on:[{events:{type:"timer",throttle:ewt},update:`${vO} ? (${nv} + (now() - ${yO}) > ${J6e} ? 0 : ${nv} + (now() - ${yO})) : ${nv}`}]},{name:yO,init:"now()",on:[{events:[{signal:nv},{signal:vO}],update:"now()"}]},{name:vO,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+KE,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=ta(e.component.selection??{}).reduce((f,c)=>c.type==="interval"?f.concat(c.name+Lv):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Hg(e)}, `;if(t.project.hasSelectionId)u+=`${Mc}: ${o}[${Tt(Mc)}]`;else if(kf(t))u+=`fields: ${i}, values: [${qC} ? ${qC} : ${K6e}]`;else{const f=s.items.map(c=>{const d=e.fieldDef(c.channel);return d!=null&&d.bin?`[${o}[${Tt(e.vgField(c.channel,{}))}], ${o}[${Tt(e.vgField(c.channel,{binSuffix:"end"}))}]]`:`${o}[${Tt(c.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}if(kf(t))return n.concat(twt(t.name,e.scaleName(dm)),[{name:r+ah,on:[{events:[{signal:H5},{signal:qC}],update:`{${u}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+ah,on:f?[{events:f,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function Q6e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Bu(i.field),i}function y0(e,t=!0,n=Ra){if(at(e)){const r=e.map(i=>y0(i,t,n));return t?`[${r.join(", ")}]`:r}else if(z0(e))return n(t?h0(e):Jvt(e));return t?n(Ii(e)):e}function rwt(e,t){for(const n of ta(e.component.selection??{})){const r=n.name;let i=`${r}${ah}, ${n.resolve==="global"?"true":`{unit: ${Hg(e)}}`}`;for(const s of oR)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Lwt,on:[{events:{signal:n.name+ah},update:`modify(${Tt(n.name+v0)}, ${i})`}]})}return G7(t)}function iwt(e,t){if(e.component.selection&&_t(e.component.selection).length){const n=Tt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:cm("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return G7(t)}function swt(e,t){let n=!1;for(const r of ta(e.component.selection??{})){const i=r.name,s=Tt(i+v0);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${g5e}(${s}, ${Tt(a)}${l}`})}n=!0;for(const a of oR)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),G7(t)}function owt(e,t){const n=[],r=[],i=Hg(e,{escape:!1});for(const s of ta(e.component.selection??{})){const o={name:s.name+v0};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Mc}}]),s.init){const l=s.project.items.map(Q6e);o.values=s.project.hasSelectionId?s.init.map(u=>({unit:i,[Mc]:y0(u,!1)[0]})):s.init.map(u=>({unit:i,fields:l,values:y0(u,!1)}))}if([...n,...t].filter(l=>l.name===s.name+v0).length||n.push(o),kf(s)&&t.length){const l=e.lookupDataSource(e.getDataName(vs.Main)),u=t.find(c=>c.name===l),f=u.transform.find(c=>c.type==="filter"&&c.expr.includes("vlSelectionTest"));if(f){u.transform=u.transform.filter(d=>d!==f);const c={name:u.name+Z6e,source:u.name,transform:[f]};r.push(c)}}}return n.concat(t,r)}function e5e(e,t){for(const n of ta(e.component.selection??{}))for(const r of oR)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function awt(e,t){for(const n of e.children)ys(n)&&(t=e5e(n,t));return t}function lwt(e,t,n,r){const i=w5e(e,t.param,t);return{signal:Rc(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function G7(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Kd={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!td(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ct(qyt),!s||!Rc(o)){Ct(Uyt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||V5(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(g5e))i.update=`{${r.map(o=>`${Tt(Bu(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Tt(Bu(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!V5(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function G5(e,t){return`domain(${Tt(e.scaleName(t))})`}function V5(e){return e.parent&&yb(e.parent)&&(!e.parent.parent||V5(e.parent.parent))}const Lv="_brush",t5e="_scale_trigger",_w="geo_interval_init_tick",n5e="_init",uwt="_center",cwt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...$t(n.select)?n.select:{}};i.fields=[Mc],i.encodings||(i.encodings=n.value?_t(n.value):[qc,Uc]),n.select={type:"interval",...i}}if(t.translate&&!Kd.defined(t)){const i=`!event.item || event.item.mark.name !== ${Tt(t.name+Lv)}`;for(const s of t.events){if(!s.between){Ct(`${s} is not an ordered event stream for interval selections.`);continue}const o=Pt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ah,s=ta(t.project.hasChannel).filter(a=>a.channel===fs||a.channel===Io),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(fwt(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=Tt(e.projectionName()),l=e.projectionName()+uwt,{x:u,y:f}=t.project.hasChannel,c=u&&u.signals.visual,d=f&&f.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=f?o&&o[f.index]:`${l}[1]`,g=A=>e.getSizeSignalRef(A).signal,v=`[[${c?c+"[0]":"0"}, ${d?d+"[0]":"0"}],[${c?c+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;o&&(n.unshift({name:r+n5e,init:`[scale(${a}, [${u?h[0]:h}, ${f?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${f?p[1]:p}])]`}),(!u||!f)&&(n.find(T=>T.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${v}, {markname: ${Tt(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Hg(e)}}`,w=`vlSelectionTuples(${y}, ${b})`,E=s.map(A=>A.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:_w}]:[]],update:w}]})}else{if(!Kd.defined(t)){const u=r+t5e,f=s.map(c=>{const d=c.channel,{data:h,visual:p}=c.signals,g=Tt(e.scaleName(d)),v=e.getScaleComponent(d).get("type"),y=Rc(v)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});f.length&&n.push({name:u,value:{},on:[{events:s.map(c=>({scale:e.scaleName(c.channel)})),update:f.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${Hg(e)}, fields: ${r+KE}, values`;return n.concat({name:i,...o?{init:`{${l}: ${y0(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(ys(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===_w).length||n.unshift({name:_w,value:null,on:[{events:"timer{1}",update:`${_w} === null ? {} : ${_w}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${Tt(t.name+v0)})`;if(Kd.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const v of _t(u))u[v]=[{test:`${l}.length && ${l}[0].unit === ${Hg(e)}`,...u[v]},{value:0}];const{fill:f,fillOpacity:c,cursor:d,...h}=t.mark,p=_t(h).reduce((v,y)=>(v[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[y]},{value:null}],v),{}),g=d??(t.translate?"move":null);return[{name:`${r+Lv}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:c}},update:u}},...n,{name:r+Lv,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function fwt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Tt(i?e.scaleName(s):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(s===fs?"width":"height").signal,f=`${s}(unit)`,c=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${f}, ${f}]`},{events:h,update:`[${o}[0], clamp(${f}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=Kd.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,v=r?{init:y0(r,!0,l)}:{value:[]};return c.push({events:{signal:t.name+t5e},update:Rc(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...v,on:c},{name:d,...r?{init:y0(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===fs?0:1,h=t.name+n5e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:c}]}}function hb({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=WE(t)&&t.condition;let o=[];s&&(o=Pt(s).map(u=>{const f=i(u);if(J1t(u)){const{param:c,empty:d}=u;return{test:x5e(e,{param:c,empty:d}),...f}}else return{test:Uk(e,u.test),...f}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function V7(e,t="text"){const n=e.encoding[t];return hb({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>sR(r,e.config),invalidValueRef:void 0})}function sR(e,t,n="datum"){if(e){if(Fc(e))return ss(e.value);if(Wn(e)){const{format:r,formatType:i}=Ik(e);return C7({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function r5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(at(o))return{tooltip:H_e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return hb({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const f=sR(u,i,a);if(f)return f;if(u===null)return;let c=Mi("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Nt(c))return{value:c};if($t(c))return cn(c)?c:c.content==="encoding"?H_e(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function i5e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(f,c){const d=P0(c),h=nl(f)?f:{...f,type:e[d].type},p=h.title||L7(h,i),g=Pt(p).join(", ").replaceAll(/"/g,'\\"');let v;if(Bs(c)){const y=c==="x"?"x2":"y2",b=Oc(e[y]);if(Wo(h.bin)&&b){const w=Ft(h,{expr:o}),E=Ft(b,{expr:o}),{format:A,formatType:T}=Ik(h);v=GE(w,E,A,T,i),s.add(y)}}if((Bs(c)||c===qu||c===jc)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:y,formatType:b}=Ik(h);v=C7({fieldOrDatumDef:h,format:y,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}v??(v=sR(h,i,o).signal),a.push({channel:c,key:g,value:v})}F7(e,(f,c)=>{kt(f)?l(f,c):XL(f)&&l(f.condition,c)});const u={};for(const{channel:f,key:c,value:d}of a)!s.has(f)&&!u[c]&&(u[c]=d);return u}function H_e(e,t,n,{reactiveGeom:r}={}){const i=i5e(e,t,n,{reactiveGeom:r}),s=Zp(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function dwt(e){const{markDef:t,config:n}=e,r=Mi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...hwt(e),...pwt(e)}}function hwt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Mi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Yt($yt,t)?{}:{ariaRoleDescription:{value:t}}}function pwt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return hb({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>sR(l,e.config),invalidValueRef:void 0});const o=Mi("description",n,r);if(o!=null)return{description:ss(o)};if(r.aria===!1)return{};const a=i5e(t,i,r);if(!$i(a))return{description:{signal:Zp(a).map(([l,u],f)=>`"${f>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Zo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Mi(e,r,s,{vgChannel:o,ignoreVgConfig:!WE(u)})),l!==void 0&&(a=ss(l)));const f={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},c=G4e({...f,scaleChannel:e,channelDef:u});return hb({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:c,mainRefFn:h=>A7({...f,channel:e,channelDef:h,stack:null,defaultRef:a})})}function s5e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Mi("filled",n,i),a=_r(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Mi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=Mi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],f=o?"fill":"stroke",c={...l?{fill:ss(l)}:{},...u?{stroke:ss(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ct(g4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...c,...Zo("color",e,{vgChannel:f,defaultValue:o?l:u}),...Zo("fill",e,{defaultValue:r.fill?l:void 0}),...Zo("stroke",e,{defaultValue:r.stroke?u:void 0})}}function mwt(e){const{encoding:t,mark:n}=e,r=t.order;return!vm(n)&&Fc(r)?hb({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>ss(i.value),invalidValueRef:void 0}):{}}function S1({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:A7({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ss(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function Ka(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[ed(e)],f=t.scaleName(e),c=t.getScaleComponent(e),{offset:d,offsetType:h}=S1({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=W7({model:t,defaultPos:n,channel:e,scaleName:f,scale:c}),g=!l&&Bs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:gwt({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:f,scale:c,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function gwt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Wn(n)&&i&&t===i.fieldChannel){if(kt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Ok({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Ug(n,r,{suffix:"end"},{offset:s})}return S7(e)}function W7({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=P0(n),l=Kp(n),u=Mi(n,s,o,{vgChannel:l});if(u!==void 0)return D_(n,u);switch(t){case"zeroOrMin":return G_e({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return G_e({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[Pl(n)],mult:.5}}}}function G_e({mainChannel:e,config:t,...n}){const r=H4e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const ywt={left:"x",center:"xc",right:"x2"},vwt={top:"y",middle:"yc",bottom:"y2"};function o5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Kp(e);const i=e==="x"?"align":"baseline",s=Mi(i,t,n);let o;return cn(s)?(Ct(gvt(i)),o=void 0):o=s,e==="x"?ywt[o||(r==="top"?"left":"center")]:vwt[o||r]}function zk(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?a5e(e,t,{defaultPos:n,defaultPos2:r}):Ka(e,t,{defaultPos:n})}function a5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=ed(e),a=Pl(e),l=bwt(t,r,o),u=l[a]?o5e(e,i,s):Kp(e);return{...Ka(e,t,{defaultPos:n,vgChannel:u}),...l}}function bwt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=P0(n),u=Pl(n),f=Kp(n),c=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?S1({channel:n,markDef:s,encoding:r,model:e}):S1({channel:l,markDef:s,encoding:r,model:e});if(!c&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const v=Pl(n),y=e.markDef[v];return y!=null?{[v]:{value:y}}:{[f]:{field:e.getName(n)}}}const g=xwt({channel:n,channelDef:c,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[f]:g}:MA(n,s)||MA(n,{[n]:O5(n,s,a.style),[u]:O5(u,s,a.style)})||MA(n,a[i])||MA(n,a.mark)||{[f]:W7({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function xwt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return Wn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Ug(t,s,{suffix:"start"},{offset:l}):S7({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function MA(e,t){const n=Pl(e),r=Kp(e);if(t[r]!==void 0)return{[r]:D_(e,t[r])};if(t[e]!==void 0)return{[r]:D_(e,t[e])};if(t[n]){const i=t[n];if(m0(i))Ct(cvt(n));else return{[n]:D_(e,i)}}}function oh(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=ed(t),a=Pl(t),l=r[t],u=r[o],f=e.getScaleComponent(t),c=f?f.get("type"):void 0,d=i.orient,h=r[a]??r.size??Mi("size",i,n,{vgChannel:a}),p=e4e(t),g=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return kt(l)&&(Zi(l.bin)||Wo(l.bin)||l.timeUnit&&!u)&&!(h&&!m0(h))&&!r[p]&&!Mo(c)?Ewt({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Wn(l)&&Mo(c)||g)&&!u?_wt(l,t,e):a5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function wwt(e,t,n,r,i,s,o){if(m0(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const f=Bf("minBandSize",{type:o},r);return{signal:f?`max(${bc(f)}, ${u})`:u}}else i.band!==1&&(Ct(xvt(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(cn(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(B0(l)&&li(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:f,tickBandPaddingInner:c}=r.scale,d=Ns(l,o==="tick"?c:o==="bar"?u:f);if(cn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(li(d))return{signal:`${1-d} * ${e}`}}return{value:z5(r.view,e)-2}}function _wt(e,t,n){var R,O;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),f=Pl(t),c=ed(t),d=e4e(t),h=n.scaleName(d),p=n.getScaleComponent(K9(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let v;(i.size||r.size)&&(g?v=Zo("size",n,{vgChannel:f,defaultRef:ss(r.size)}):Ct(Svt(r.type)));const y=!!v,b=J4e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(R=u||p)==null?void 0:R.get("type"),useVlSizeChannel:g});v=v||{[f]:wwt(f,h||l,p||u,s,b,!!e,r.type)};const w=((O=u||p)==null?void 0:O.get("type"))==="band"&&m0(b)&&!y?"top":"middle",E=o5e(t,r,s,w),A=E==="xc"||E==="yc",{offset:T,offsetType:D}=S1({channel:t,markDef:r,encoding:i,model:n,bandPosition:A?.5:0}),k=S7({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:T,defaultRef:W7({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:A?D==="encoding"?0:.5:cn(b)?{signal:`(1-${b})/2`}:m0(b)?(1-b.band)/2:0});if(f)return{[E]:k,...v};{const B=Kp(c),K=v[f],L=T?{...K,offset:T}:K;return{[E]:k,[B]:at(k)?[k[0],{...k[1],offset:L}]:{...k,offset:L}}}}function V_e(e,t,n,r,i,s,o){if(YMe(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(cn(n)||cn(i)||cn(r)||s){const u=bc(n),f=bc(i),c=bc(r),d=bc(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${l})`:l,g=c?`${c} + `:"",v=u?`(${u} ? -1 : 1) * `:"",y=f?`(${f} + ${p})`:p;return{signal:g+v+y}}else return i=i||0,r+(n?-i-l:+i+l)}function Ewt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var O;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,f=a.get("reverse"),c=J4e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),d=(O=r.component.axes[n])==null?void 0:O[0],h=(d==null?void 0:d.get("translate"))??.5,p=Bs(n)?Mi("binSpacing",s,i)??0:0,g=ed(n),v=Kp(n),y=Kp(g),b=Bf("minBandSize",s,i),{offset:w}=S1({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=S1({channel:g,markDef:s,encoding:o,model:r,bandPosition:0}),A=V1t({fieldDef:e,scaleName:l}),T=V_e(n,p,f,h,w,b,A),D=V_e(g,p,f,h,E??w,b,A),k=cn(c)?{signal:`(1-${c.signal})/2`}:m0(c)?(1-c.band)/2:.5,R=Jp({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Zi(e.bin)||e.timeUnit){const B=e.timeUnit&&R!==.5;return{[y]:W_e({fieldDef:e,scaleName:l,bandPosition:k,offset:D,useRectOffsetField:B}),[v]:W_e({fieldDef:e,scaleName:l,bandPosition:cn(k)?{signal:`1-${k.signal}`}:1-k,offset:T,useRectOffsetField:B})}}else if(Wo(e.bin)){const B=Ug(e,l,{},{offset:D});if(kt(t))return{[y]:B,[v]:Ug(t,l,{},{offset:T})};if(N0(e.bin)&&e.bin.step)return{[y]:B,[v]:{signal:`scale("${l}", ${Ft(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Ct(b4e(g))}function W_e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Ok({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:rR,endSuffix:iR}:{}})}const Swt=new Set(["aria","width","height"]);function Hu(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?s5e(e):{};return{...Awt(e.markDef,t),...Y_e("fill",n),...Y_e("stroke",r),...Zo("opacity",e),...Zo("fillOpacity",e),...Zo("strokeOpacity",e),...Zo("strokeWidth",e),...Zo("strokeDash",e),...mwt(e),...r5e(e),...V7(e,"href"),...dwt(e)}}function Y_e(e,t){return t?{[e]:t}:{}}function Awt(e,t){return Myt.reduce((n,r)=>(!Swt.has(r)&&St(e,r)&&t[r]!=="ignore"&&(n[r]=ss(e[r])),n),{})}function Y7(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var u;let o;if(!td(s)||!(o=e.getScaleType(s)))return;const a=NL(i.aggregate),l=E7({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(q1t(l)){const f=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});f&&r.add(f)}}),r.size>0)return{defined:{signal:[...r].map(s=>UL(s,!0)).join(" && ")}}}function X_e(e,t){if(t!==void 0)return{[e]:ss(t)}}const bO="voronoi",l5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(bO)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(vm(s))return Ct(zyt(s)),n;const o={name:e.getName(bO),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...r5e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,f)=>{const c=u.name??"";c===e.component.mark[0].name?a=f:c.includes(bO)&&(l=!0)}),l||n.splice(a+1,0,o),n}},u5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!N7(e.bind),parse:(e,t,n)=>y5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=l5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const f=cs(`${r}_${l.field}`);n.filter(d=>d.name===f).length||n.unshift({name:f,...o?{init:y0(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Tt(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(u=>u.name===r+ah),o=r+KE,a=i.items.map(u=>cs(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},jk="_toggle",c5e={defined:e=>e.type==="point"&&!kf(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+jk,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ah,r=t.name+jk;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Hg(e)}}, `)+`${r} ? ${n} : null`}},Cwt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!kf(e),parse:(e,t)=>{t.clear&&(t.clear=Nt(t.clear)?cm(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(u5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===cs(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ah);r(i,"null"),c5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+jk),r(i,"false"))}return n}},f5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&N7(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Mc;return t&&!n&&Ct(Hyt),t&&n},parse:(e,t,n)=>{const r=Gn(n);if(r.select=Nt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},y5e(t,r),$t(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=hO(t.bind)?t.bind.legend:"click",s=Nt(i)?cm(i,"view"):Pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=hO(t.bind)&&t.bind.legend,s=o=>a=>{const l=Gn(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${cs(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ah),o=r+KE,a=i.items.filter(d=>d.hasLegend).map(d=>cs(`${r}_${cs(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const f=n.find(d=>d.name===r+jk),c=hO(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:c}):f.on[0].events=c),n}};function kwt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of ta(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&f5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const d5e="_translate_anchor",h5e="_translate_delta",Twt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Kd.defined(t),s=r+d5e,{x:o,y:a}=t.project.hasChannel;let l=cm(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Lv,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?G5(e,fs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?G5(e,Io):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+h5e,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Z_e(e,t,o,"width",n),a!==void 0&&Z_e(e,t,a,"height",n),n}};function Z_e(e,t,n,r,i){const s=t.name,o=s+d5e,a=s+h5e,l=n.channel,u=Kd.defined(t),f=i.find(A=>A.name===n.signals[u?"data":"visual"]),c=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===fs?p?"":"-":p?"-":"":"",v=`${o}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${c}`:`span(${v})`}`,b=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${v}, ${y}${w})`;f.on.push({events:{signal:a},update:u?E:`clampRange(${E}, 0, ${c})`})}const p5e="_zoom_anchor",m5e="_zoom_delta",Dwt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Kd.defined(t),s=r+m5e,{x:o,y:a}=t.project.hasChannel,l=Tt(e.scaleName(fs)),u=Tt(e.scaleName(Io));let f=cm(t.zoom,"scope");return i||(f=f.map(c=>(c.markname=r+Lv,c))),n.push({name:r+p5e,on:[{events:f,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(c=>c).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&K_e(e,t,o,"width",n),a!==void 0&&K_e(e,t,a,"height",n),n}};function K_e(e,t,n,r,i){const s=t.name,o=n.channel,a=Kd.defined(t),l=i.find(b=>b.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(o),c=f&&f.get("type"),d=a?G5(e,o):l.name,h=s+m5e,p=`${s}${p5e}.${o}`,g=!a||!f?"zoomLinear":c==="log"?"zoomLog":c==="symlog"?"zoomSymlog":c==="pow"?"zoomPow":"zoomLinear",v=a?c==="pow"?`, ${f.get("exponent")??1}`:c==="symlog"?`, ${f.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${v})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const v0="_store",ah="_tuple",Lwt="_modify",g5e="vlSelectionResolve",oR=[nwt,cwt,Qxt,c5e,u5e,Kd,f5e,Cwt,Twt,Dwt,l5e];function Rwt(e){let t=e.parent;for(;t&&!iu(t);)t=t.parent;return t}function Hg(e,{escape:t}={escape:!0}){let n=t?Tt(e.name):e.name;const r=Rwt(e);if(r){const{facet:i}=r;for(const s of Lu)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Tt(r.vgField(s))}])`)}return n}function X7(e){return ta(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function y5e(e,t){(Nt(t.select)||!t.select.on)&&delete e.events,(Nt(t.select)||!t.select.clear)&&delete e.clear,(Nt(t.select)||!t.select.toggle)&&delete e.toggle}function kf(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function W5(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...W5(e.object)),t.push(...W5(e.property))),t)}function v5e(e){return e.object.type==="MemberExpression"?v5e(e.object):e.object.name==="datum"}function b5e(e){const t=h9(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&v5e(r)&&n.add(W5(r).slice(1).join("."))}),n}class pb extends Di{clone(){return new pb(null,this.model,Gn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=Uk(this.model,this.filter,this),this._dependentFields=b5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Fwt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=cs(s.name),a=s.select,l=Nt(a)?a:a.type,u=$t(a)?Gn(a):{type:l},f=r[l];for(const h in f)h==="fields"||h==="encodings"||(h==="mark"&&(u.mark={...f.mark,...u.mark}),(u[h]===void 0||u[h]===!0)&&(u[h]=Gn(f[h]??u[h])));const c=n[o]={...u,name:o,type:l,init:s.value,bind:s.bind,events:Nt(u.on)?cm(u.on,"scope"):Pt(Gn(u.on))};if(kf(c)&&(i++,i>1)){delete n[o];continue}const d=Gn(s);for(const h of oR)h.defined(c)&&h.parse&&h.parse(e,c,d)}return i>1&&Ct(Zyt),n}function x5e(e,t,n,r="datum"){const i=Nt(t)?t:t.param,s=cs(i),o=Tt(s+v0);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Tt(a.resolve)})`,f=`${l}${o}, ${r}${u}`,c=`length(data(${o}))`;return t.empty===!1?`${c} && ${f}`:`!${c} || ${f}`}function w5e(e,t,n){const r=cs(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ct(Kyt(s));else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ct(Jyt(a,i,n,s))):s=a[0].field}return`${o.name}[${Tt(Bu(s))}]`}function Owt(e,t){for(const[n,r]of Zp(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Rl(new pb(t,e,{param:n}),i,vs.Lookup,e.component.data.outputNodeRefCounts)}}function Uk(e,t,n){return T_(t,r=>Nt(r)?r:a1t(r)?x5e(e,r,n):R4e(r))}function Mwt(e,t){if(e)return at(e)&&!ap(e)?e.map(n=>L7(n,t)).join(", "):e}function xO(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function n_(e,t,n,r={header:!1}){var c,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...f}=e.combine();if(!i){for(const h in f){const p=h,g=dbt[p],v=f[p];if(g&&g!==t&&g!=="both")delete f[p];else if(ZE(v)){const{condition:y,...b}=v,w=Pt(y),E=A_e[p];if(E){const{vgProp:A,part:T}=E,D=[...w.map(k=>{const{test:R,...O}=k;return{test:Uk(null,R),...O}}),b];xO(f,T,A,D),delete f[p]}else if(E===null){const A={signal:w.map(T=>{const{test:D,...k}=T;return`${Uk(null,D)} ? ${u_e(k)} : `}).join("")+u_e(b)};f[p]=A}}else if(cn(v)){const y=A_e[p];if(y){const{vgProp:b,part:w}=y;xO(f,w,b,v),delete f[p]}}_r(["labelAlign","labelBaseline"],p)&&f[p]===null&&delete f[p]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:h}=f.encode;f.encode={...h?{grid:h}:{}},$i(f.encode)&&delete f.encode}return{scale:o,orient:s,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ns(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(c=f.encode)==null?void 0:c.labels)!=null&&d.update&&cn(f.encode.labels.update.text)&&(p=c0(a,"datum.label",f.encode.labels.update.text.signal)),xO(f,"labels","text",{signal:p})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const p of l6e)e.hasAxisPart(p)||delete f.encode[p];$i(f.encode)&&delete f.encode}const h=Mwt(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:Ns(u,0)}}}}function _5e(e){const{axes:t}=e.component,n=[];for(const r of xh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function $wt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>n_(i,"grid",t)),...r.map(i=>n_(i,"grid",t)),...n.map(i=>n_(i,"main",t)),...r.map(i=>n_(i,"main",t))].filter(i=>i)}function J_e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([..._t(o),..._t(a)]),u={};for(const f of l.values())u[f]={signal:`${r.signal} === "${s}" ? ${bc(o[f])} : ${bc(a[f])}`};return u}return t[i]})])}function Iwt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:$4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=cn(n)?"axisOrient":`axis${BE(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:J_e(a,r,e,n),vgAxisConfig:J_e(l,r,e,n),axisConfigStyle:Pwt([...l,...a],r)}}function Pwt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Y5(e,t,n,r={}){var s;const i=u4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Q_e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Nwt(n,e),gridScale:({model:e,channel:t})=>Bwt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||S5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||E5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??jwt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Uwt(t.type,n,kt(t)&&!!t.timeUnit,kt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Hwt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Gwt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=A5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return f4e(i?[E_e(i)]:[],kt(o)?[E_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Vwt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Wwt(n,t)};function Nwt(e,t){return!Mo(e)&&kt(t)&&!Zi(t==null?void 0:t.bin)&&!Wo(t==null?void 0:t.bin)}function Bwt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function zwt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return cn(s)?s:_2(s);{const{configValue:o}=Y5("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?_2(o):n===fs&&_r([v7,y7],e.type)&&!(kt(e)&&e.timeUnit)?270:void 0}}function X5(e){return`(((${e.signal} % 360) + 360) % 360)`}function E5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(cn(e)){const i=X5(e),s=cn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(cn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(cn(e)){const i=X5(e),s=cn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(cn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function S5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(cn(e)){const o=X5(e),a=cn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(cn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function jwt(e,t){if(t==="x"&&_r(["quantitative","temporal"],e))return!0}function Uwt(e,t,n,r){if(n&&!$t(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function qwt(e){return e==="x"?"bottom":"left"}function Hwt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Mo(t)&&t!=="log"){if(kt(e)){if(Zi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&_r(["month","hours","day","quarter"],(i=Fo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Gwt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(kt(t)){const{timeUnit:n}=t;if(n){const r=T4e(n);if(r)return{signal:r}}}}function A5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return d4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Vwt(e,t){const n=e.values;if(at(n))return a6e(t,n);if(cn(n))return n}function Wwt(e,t){return e==="rect"&&$k(t)?1:0}class A1 extends Di{clone(){return new A1(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=b5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(U0(r)&&K4e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,f)=>`${R4e({field:s,timeUnit:o,equal:u})} ? ${f} : `).join("")+a.length;t=new A1(t,{calculate:l,as:C1(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Or(this.transform)}`}}function C1(e,t,n){return Ft(e,{prefix:t,suffix:"sort_index",...n})}function aR(e,t){return _r(["top","bottom"],t)?"column":_r(["left","right"],t)||e==="row"?"row":"column"}function k1(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ns((t||{})[e],i[e],n.header[e])}function lR(e,t,n,r){const i={};for(const s of e){const o=k1(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Z7=["row","column"],K7=["header","footer"];function Ywt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=lR(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=aR(t,a),u=_2(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...k5e(u,l),...C5e(l,u,s),...T5e(r,i,t,Mbt,C6e)}}}function C5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=S5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function k5e(e,t){const n=E5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Xwt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of K7)if(n[i])for(const s of n[i]){const o=Kwt(e,t,i,n,s);o!=null&&r.push(o)}return r}function Zwt(e,t){const{sort:n}=e;return Zd(n)?{field:Ft(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:C1(e,t,{expr:"datum"}),order:"ascending"}:{field:Ft(e,{expr:"datum"}),order:n??"ascending"}}function Z5(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=lR(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=C7({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=aR(t,a);return{text:{signal:l?c0(c0(l,"datum.label",u),"datum.value",Ft(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...k5e(s,f),...C5e(f,s,o),...T5e(n,e,t,$bt,k6e)}}function Kwt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:c}=lR(["labelOrient"],o.header,a,t);(t==="row"&&!_r(["top","bottom"],c)||t==="column"&&!_r(["left","right"],c))&&(s=Z5(o,t,a))}const l=iu(e)&&!VE(e.facet),u=i.axes,f=(u==null?void 0:u.length)>0;if(s||f){const c=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Zwt(o,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[c]:i.sizeSignal}}}:{},...f?{axes:u}:{}}}}return null}const Jwt={column:{start:0,end:1},row:{start:1,end:0}};function Qwt(e,t){return Jwt[t][e]}function e_t(e,t){const n={};for(const r of Lu){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=lR(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=aR(r,o),l=Qwt(s,a);l!==void 0&&(n[a]=l)}}return $i(n)?void 0:n}function T5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=k1(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function J7(e){return[...$A(e,"width"),...$A(e,"height"),...$A(e,"childWidth"),...$A(e,"childHeight")]}function $A(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Mo(o)&&B0(a)){const l=e.scaleName(n);return iu(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[e2e(l,a)]:[e2e(l,a),{name:i,update:D5e(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=B5(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function e2e(e,t){const n=`${e}_step`;return cn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function D5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Ns(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${bc(o)}, ${bc(s)}) * ${e}_step`}function L5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function R5e(e,t){return _t(e).reduce((n,r)=>({...n,...hb({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>ss(i.value),invalidValueRef:void 0})}),{})}function F5e(e,t){if(iu(t))return e==="theta"?"independent":"shared";if(yb(t))return"shared";if(sB(t))return Bs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Q7(e,t){const n=e.scale[t],r=Bs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ct(Dvt(t)),"independent"):e[r][t]||"shared"}const t_t={...Nbt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},O5e=_t(t_t);class n_t extends _h{}const t2e={symbols:r_t,gradient:i_t,labels:s_t,entries:o_t};function r_t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,f=o.filled&&u!=="trail";let c={...Pyt({},n,O1t),...s5e(n,{filled:f})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?M5e(a.opacity)??o.opacity:void 0;if(c.fill){if(r==="fill"||f&&r===$l)delete c.fill;else if(St(c.fill,"field"))h?delete c.fill:(c.fill=ss(l.legend.symbolBaseFillColor??"black"),c.fillOpacity=ss(g??1));else if(at(c.fill)){const v=K5(a.fill??a.color)??o.fill??(f&&o.color);v&&(c.fill=ss(v))}}if(c.stroke){if(r==="stroke"||!f&&r===$l)delete c.stroke;else if(St(c.stroke,"field")||p)delete c.stroke;else if(at(c.stroke)){const v=Ns(K5(a.stroke||a.color),o.stroke,f?o.color:void 0);v&&(c.stroke={value:v})}}if(r!==bh){const v=kt(t)&&I5e(n,i,t);v?c.opacity=[{test:v,...ss(g??1)},ss(l.legend.unselectedOpacity)]:g&&(c.opacity=ss(g))}return c={...c,...e},$i(c)?void 0:c}function i_t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?M5e(o.opacity)||s.opacity:void 0;return u&&(a.opacity=ss(u)),a={...a,...e},$i(a)?void 0:a}function s_t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=kt(t)?I5e(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:f}=s;let c;g0(f)?c=xc({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:f,config:o}):u===void 0&&f===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?c=xc({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&kt(t)&&t.timeUnit===void 0&&(c=xc({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...l?{opacity:l}:{},...c?{text:c}:{},...e};return $i(d)?void 0:d}function o_t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function M5e(e){return $5e(e,(t,n)=>Math.max(t,n.value))}function K5(e){return $5e(e,(t,n)=>Ns(t,n.value))}function $5e(e,t){if(ebt(e))return Pt(e.condition).reduce(t,e.value);if(Fc(e))return e.value}function I5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Tt(n.field);return r.map(s=>`(!length(data(${Tt(cs(s)+v0)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const n2e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Y4e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return X4e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??h_t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??p_t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??l_t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Dv(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Tv(n)&&wf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>a_t(t,e)};function a_t(e,t){const n=e.values;if(at(n))return a6e(t,n);if(cn(n))return n}function l_t(e,t,n,r){if(t!=="shape"){const i=K5(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function u_t(e){const{legend:t}=e;return Ns(t.type,c_t(e))}function c_t({channel:e,timeUnit:t,scaleType:n}){if(Tv(e)){if(_r(["quarter","month","day"],t))return"symbol";if(wf(n))return"gradient"}return"symbol"}function f_t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??d_t(n,t)}function d_t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function h_t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(wf(i))return n==="horizontal"?r==="top"||r==="bottom"?r2e(t,"width",o,s):o:r2e(t,"height",l,a)}function r2e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function p_t(e){if(_r(["quantile","threshold","log","symlog"],e))return"greedy"}function P5e(e){const t=ys(e)?m_t(e):b_t(e);return e.component.legends=t,t}function m_t(e){const{encoding:t}=e,n={};for(const r of[$l,...D6e]){const i=go(t[r]);!i||!e.getScaleComponent(r)||r===Il&&kt(i)&&i.type===db||(n[r]=v_t(e,r))}return n}function g_t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function y_t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function v_t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new n_t({},g_t(e,t));kwt(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),f=go(i[t]),c=kt(f)?(E=Fo(f.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=u_t({legend:n,channel:t,timeUnit:c,scaleType:u}),p=f_t({legend:n,legendType:h,orient:d,legendConfig:o}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:o,config:s,scaleType:u,orient:d,legendType:h,direction:p};for(const A of O5e){if(h==="gradient"&&A.startsWith("symbol")||h==="symbol"&&A.startsWith("gradient"))continue;const T=A in n2e?n2e[A](g):n[A];if(T!==void 0){const D=y_t(T,A,n,e.fieldDef(t));(D||s.legend[A]===void 0)&&a.set(A,T,D)}}const v=(n==null?void 0:n.encoding)??{},y=a.get("selections"),b={},w={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:a,legendType:h};for(const A of["labels","legend","title","symbols","gradient","entries"]){const T=R5e(v[A]??{},e),D=A in t2e?t2e[A](T,w):T;D!==void 0&&!$i(D)&&(b[A]={...y!=null&&y.length&&kt(f)?{name:`${cs(f.field)}_legend_${A}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:D})}return $i(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function b_t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){P5e(r);for(const i of _t(r.component.legends))n.legend[i]=Q7(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=N5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of _t(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function N5e(e,t){var s,o,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of O5e){const f=Qp(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(c,d)=>{switch(u){case"symbolType":return x_t(c,d);case"title":return h4e(c,d);case"type":return i=!0,ql("symbol")}return nR(c,d,u,"legend")});e.setWithExplicit(u,f)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&Lk(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Lk(e.explicit,["encode","gradient"])),e}function x_t(e,t){return t.value==="circle"?t:e}function w_t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function B5e(e){const t=e.component.legends,n={};for(const i of _t(t)){const s=e.getScaleComponent(i),o=Ii(s.get("domains"));if(n[o])for(const a of n[o])N5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return ta(n).flat().map(i=>__t(i,e.config)).filter(i=>i!==void 0)}function __t(e,t){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const f of D6e)s[f]&&delete u[f]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&cn(s.encode.labels.update.text)&&(u=c0(r,"datum.label",s.encode.labels.update.text.signal)),w_t(s,"labels","text",{signal:u})}return s}}function E_t(e){return yb(e)||sB(e)?S_t(e):z5e(e)}function S_t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),z5e(e))}function z5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=cn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return _r(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const A_t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class j5e extends _h{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function U5e(e){e.component.projection=ys(e)?C_t(e):D_t(e)}function C_t(e){if(e.hasProjection){const t=Yo(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?k_t(e):void 0,s=new j5e(e.projectionName(!0),{...Yo(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function k_t(e){const t=[],{encoding:n}=e;for(const r of[[qc,Uc],[zu,Hc]])(go(n[r[0]])||go(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Il)&&e.typedFieldDef(Il).type===db&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(vs.Main)),t}function T_t(e,t){const n=H9(A_t,i=>!!(!Yt(e.explicit,i)&&!Yt(t.explicit,i)||Yt(e.explicit,i)&&Yt(t.explicit,i)&&Jl(e.get(i),t.get(i))));if(Jl(e.size,t.size)){if(n)return e;if(Jl(e.explicit,{}))return t;if(Jl(t.explicit,{}))return e}return null}function D_t(e){if(e.children.length===0)return;let t;for(const r of e.children)U5e(r);const n=H9(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=T_t(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new j5e(r,t.specifiedProjection,t.size,Gn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function L_t(e,t,n,r){if(XE(t,n)){const i=ys(e)?e.axis(n)??e.legend(n)??{}:{},s=Ft(t,{expr:"datum"}),o=Ft(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ft(t,{binSuffix:"range",forAs:!0}),formula:GE(s,o,i.format,i.formatType,r)}}return{}}function q5e(e,t){return`${s4e(e)}_${t}`}function R_t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function eB(e,t,n){const r=ZL(n,void 0)??{},i=q5e(r,t);return e.getName(`${i}_bins`)}function F_t(e){return"as"in e}function i2e(e,t,n){let r,i;F_t(e)?r=Nt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ft(e,{forAs:!0}),Ft(e,{binSuffix:"end",forAs:!0})];const s={...ZL(t,void 0)},o=q5e(s,e.field),{signal:a,extentSignal:l}=R_t(n,o);if(BL(s.extent)){const f=s.extent;i=w5e(n,f.param,f),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class Tf extends Di{clone(){return new Tf(null,Gn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(nl(s)&&Zi(s.bin)){const{key:a,binComponent:l}=i2e(s,s.bin,n);i[a]={...l,...i[a],...L_t(n,s,o,n.config)}}return i},{});return $i(r)?null:new Tf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=i2e(n,n.bin,r);return new Tf(t,{[i]:s})}merge(t,n){for(const r of _t(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=xf([...this.bins[r].as,...t.bins[r].as],Or)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(ta(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ta(this.bins).map(t=>t.field))}hash(){return`Bin ${Or(this.bins)}`}assemble(){return ta(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Bu(t.field),as:r,signal:t.signal,...BL(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Bu(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:Ft({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function O_t(e,t,n,r){var s;const i=ys(r)?r.encoding[ed(t)]:void 0;if(nl(n)&&ys(r)&&Q4e(n,i,r.markDef,r.config)){e.add(Ft(n,{})),e.add(Ft(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=Jp({fieldDef:n,markDef:a,config:l});E2(o)&&u!==.5&&Bs(t)&&(e.add(Ft(n,{suffix:rR})),e.add(Ft(n,{suffix:iR}))),n.bin&&XE(n,t)&&e.add(Ft(n,{binSuffix:"range"}))}else if(ZMe(t)){const o=XMe(t);e.add(r.getName(o))}else e.add(Ft(n));return U0(n)&&x1t((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function M_t(e,t){for(const n of _t(t)){const r=t[n];for(const i of _t(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ec extends Di{clone(){return new Ec(null,new Set(this.dimensions),Gn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Ft(o,{forAs:!0})]);else{if(sh(l)||ym(l)){const f=sh(l)?"argmin":"argmax",c=l[f];i[c]??(i[c]={}),i[c][f]=new Set([Ft({op:f,field:c},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([Ft(o,{forAs:!0})]);td(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([Ft({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([Ft({field:u,aggregate:"max"},{forAs:!0})]))}else O_t(s,a,o,n)}),s.size+_t(i).length===0)?null:new Ec(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||Ft(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||Ft(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+_t(s).length===0?null:new Ec(t,i,s)}merge(t){return jMe(this.dimensions,t.dimensions)?(M_t(this.measures,t.measures),!0):(Gvt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,..._t(this.measures)])}producedFields(){const t=new Set;for(const n of _t(this.measures))for(const r of _t(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Or({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of _t(this.measures))for(const o of _t(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Bu(s));return{type:"aggregate",groupby:[...this.dimensions].map(Bu),ops:t,fields:n,as:r}}}class mb extends Di{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Lu){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Ft(o),...Zi(a)?[Ft(o,{binSuffix:"end"})]:[]],...Zd(l)?{sortField:l}:at(l)?{sortIndexField:C1(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Lu)this[n]&&(t+=` ${n.charAt(0)}:${Or(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Lu)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Lu)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of xh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Mo(i)&&B0(s)){const o=uR(this.childModel,n),a=iB(o);a?t[n]=a:Ct(i7(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:f=WL,field:c}=l;s.push(c),o.push(f),a.push(Ft(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of Z7){for(const f of K7){const c=(r[u]&&r[u][f])??[];for(const d of c)if(((l=d.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const f=`length(data("${this.facet.name}"))`,c=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:c}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Xd,Yd])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function s2e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function $_t(e,t){const n=W9(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=s2e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=s2e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ct(evt(t)),null}function I_t(e){const t={};return UC(e.filter,n=>{if(L4e(n)){let r=null;c7(n)?r=Xl(n.equal):d7(n)?r=Xl(n.lte):f7(n)?r=Xl(n.lt):h7(n)?r=Xl(n.gt):p7(n)?r=Xl(n.gte):m7(n)?r=n.range[0]:g7(n)&&(r=(n.oneOf??n.in)[0]),r&&(z0(r)?t[n.field]="date":li(r)?t[n.field]="number":Nt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function P_t(e){const t={};function n(r){_1(r)?t[r.field]="date":r.type==="quantitative"&&Tyt(r.aggregate)?t[r.field]="number":g1(r.field)>1?r.field in t||(t[r.field]="flatten"):U0(r)&&Zd(r.sort)&&g1(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((ys(e)||iu(e))&&e.forEachFieldDef((r,i)=>{if(nl(r))n(r);else{const s=P0(i),o=e.fieldDef(s);n({...r,type:o.type})}}),ys(e)){const{mark:r,markDef:i,encoding:s}=e;if(vm(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];kt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function N_t(e){const t={};if(ys(e)&&e.component.selection)for(const n of _t(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&g1(i.field)>1&&(t[i.field]="flatten")}return t}class Ca extends Di{clone(){return new Ca(null,Gn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Or(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Ip(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of _t(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Ct(m_e(a,r[a],l.value)))}for(const a of _t(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Ct(m_e(a,n[a],l)))}const s=new _h(n,r);i.copyAll(s);const o={};for(const a of _t(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return _t(o).length===0||i.parseNothing?null:new Ca(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of _t(this._parse)){const r=this._parse[n];g1(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(_t(this._parse))}dependentFields(){return new Set(_t(this._parse))}assembleTransforms(t=!1){return _t(this._parse).filter(n=>t?g1(n)>1:!0).map(n=>{const r=$_t(n,this._parse[n]);return r?{type:"formula",expr:r,as:cb(n)}:null}).filter(n=>n!==null)}}class em extends Di{clone(){return new em(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Mc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Mc}}}class JE extends Di{clone(){return new JE(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Or(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class QE extends Di{clone(){return new QE(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Or(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class b0 extends Di{constructor(t){super(null),t??(t={name:"source"});let n;if(Ip(t)||(n=t.format?{...Ll(t.format,["parse"])}:{}),S2(t))this._data={values:t.values};else if(E1(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];_r(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else W6e(t)?this._data={values:[{type:"Sphere"}]}:(G6e(t)||Ip(t))&&(this._data={});this._generator=Ip(t),t.name&&(this._name=t.name),n&&!$i(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var o2e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},B_t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},r_;function tB(e){return e instanceof b0||e instanceof JE||e instanceof QE}class nB{constructor(){r_.set(this,void 0),o2e(this,r_,!1,"f")}setModified(){o2e(this,r_,!0,"f")}get modifiedFlag(){return B_t(this,r_,"f")}}r_=new WeakMap;class q0 extends nB{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class rB extends nB{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class z_t extends rB{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of _t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class j_t extends rB{constructor(t){super(),this.requiresSelectionId=t&&X7(t)}run(t){t instanceof em&&(this.requiresSelectionId&&(tB(t.parent)||t.parent instanceof Ec||t.parent instanceof Ca)||(this.setModified(),t.remove()))}}class U_t extends nB{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Cf&&(r=t.producedFields(),G9(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class q_t extends rB{constructor(){super()}run(t){t instanceof Rl&&!t.isRequired()&&(this.setModified(),t.remove())}}class H_t extends q0{run(t){if(!tB(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Ca)if(t instanceof Ca)this.setModified(),t.merge(n);else{if(V9(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class G_t extends q0{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Ca);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of _t(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!$i(i)){this.setModified();const o=new Ca(t,i);for(const a of n){if(a instanceof Ca)for(const l of _t(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof Ca&&_t(a.parse).length===0&&a.remove()}}}}}class V_t extends q0{run(t){t instanceof Rl||t.numChildren()>0||t instanceof mb||t instanceof b0||(this.setModified(),t.remove())}}class W_t extends q0{run(t){const n=t.children.filter(i=>i instanceof Cf),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Y_t extends q0{run(t){const n=t.children.filter(i=>i instanceof Ec),r={};for(const i of n){const s=Or(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of _t(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class X_t extends q0{constructor(t){super(),this.model=t}run(t){const n=!(tB(t)||t instanceof pb||t instanceof Ca||t instanceof em),r=[],i=[];for(const s of t.children)s instanceof Tf&&(n&&!V9(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Tf?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Z_t extends q0{run(t){const n=[...t.children];if(!m1(n,o=>o instanceof Rl)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Rl){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Rl)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class H0 extends Di{clone(){return new H0(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`JoinAggregateTransform ${Or(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class T1 extends Di{clone(){return new T1(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,f,c)=>{const d=td(c)&&n.getScaleComponent(c);if(d){const h=d.get("type"),{aggregate:p}=f,g=E7({scaleChannel:c,markDef:s,config:i,scaleType:h,isCountAggregate:NL(p)});g!=="show"&&g!=="always-valid"&&(u[f.field]=f)}return u},{});return _t(l).length?new T1(t,l):null}dependentFields(){return new Set(_t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Or(this.filter)}`}assemble(){const t=_t(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Ft(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${J5(s)}))`):i.type==="quantitative"&&n.push(J5(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function J5(e){return`isValid(${e}) && isFinite(+${e})`}function K_t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ft(r);return i&&t.push(i),t},[])}function J_t(e){return at(e)&&e.every(t=>Nt(t))&&e.length>1}class Jd extends Di{clone(){return new Jd(null,Gn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const c of n.sort)a.push(c.field),l.push(Ns(c.order,"ascending"));const u={field:a,order:l};let f;return J_t(s)?f=s:Nt(s)?f=[s,`${s}_end`]:f=[`${n.stack}_start`,`${n.stack}_end`],new Jd(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:f})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return Oc(p)}).filter(h=>!!h),f=K_t(n),c=n.encoding.order;let d;if(at(c)||kt(c))d=c4e(c);else{const h=e6e(c)?c.sort:o==="y"?"descending":"ascending";d=f.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new Jd(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:f,sort:d,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Or(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Ft(i,{binSuffix:"mid"})]:[Ft(i,{}),Ft(i,{binSuffix:"end"})]:[Ft(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const f of r){const{bandPosition:c=.5,bin:d}=f;if(d){const h=Ft(f,{expr:"datum"}),p=Ft(f,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${J5(h)} ? ${c}*${h}+${1-c}*${p} : ${h}`,as:Ft(f,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Ft(f,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class gb extends Di{clone(){return new gb(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`WindowTransform ${Or(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const c of this.transform.window)n.push(c.op),r.push(this.getDefaultName(c)),i.push(c.param===void 0?null:c.param),t.push(c.field===void 0?null:c.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(c=>n7(c)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const c of this.transform.sort)a.push(c.field),l.push(c.order??"ascending");const u={field:a,order:l},f=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...f!==void 0?{ignorePeers:f}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Q_t(e){function t(n){if(!(n instanceof mb)){const r=n.clone();if(r instanceof Rl){const i=e$+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ec||r instanceof Jd||r instanceof gb||r instanceof H0)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Q5(e){if(e instanceof mb)if(e.numChildren()===1&&!(e.children[0]instanceof Rl)){const t=e.children[0];(t instanceof Ec||t instanceof Jd||t instanceof gb||t instanceof H0)&&t.addDimensions(e.fields),t.swapWithParent(),Q5(e)}else{const t=e.model.component.data.main;H5e(t);const n=Q_t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Q5)}function H5e(e){if(e instanceof Rl&&e.type===vs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof mb||(t.swapWithParent(),H5e(e))}}const e$="scale_",IA=5;function t$(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!t$(t.children))return!1}return!0}function nc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function a2e(e,t,n){let r=e.sources,i=!1;return i=nc(new q_t,r)||i,i=nc(new j_t(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=nc(new V_t,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=nc(new H_t,r)||i,i=nc(new X_t(t),r)||i,i=nc(new U_t,r)||i,i=nc(new G_t,r)||i,i=nc(new Y_t,r)||i,i=nc(new W_t,r)||i,i=nc(new z_t,r)||i,i=nc(new Z_t,r)||i),e.sources=r,i}function e2t(e,t){t$(e.sources);let n=0,r=0;for(let i=0;i<IA&&a2e(e,t,!0);i++)n++;e.sources.map(Q5);for(let i=0;i<IA&&a2e(e,t,!1);i++)r++;t$(e.sources),Math.max(n,r)===IA&&Ct(`Maximum optimization runs(${IA}) reached.`)}class ko{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ko(()=>t(n))}}function G5e(e){ys(e)?t2t(e):n2t(e)}function t2t(e){const t=e.component.scales;for(const n of _t(t)){const r=i2t(e,n);if(t[n].setWithExplicit("domains",r),o2t(e,n),e.component.data.isFaceted){let s=e;for(;!iu(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)zd(a)&&(a.data=e$+a.data.replace(e$,""))}}}function n2t(e){for(const n of e.children)G5e(n);const t=e.component.scales;for(const n of _t(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Qp(r,o.getWithExplicit("domains"),"domains","scale",n$);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ct(Wyt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function r2t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=l2e(t,n);if(!i){Ct(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=l2e(t,n);if(i)return"unaggregated"}return e}function i2t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=r2t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&go(r.x2)?go(r.x)?Qp(tp(n,i,e,"x"),tp(n,i,e,"x2"),"domain","scale",n$):tp(n,i,e,"x2"):t==="y"&&go(r.y2)?go(r.y)?Qp(tp(n,i,e,"y"),tp(n,i,e,"y2"),"domain","scale",n$):tp(n,i,e,"y2"):tp(n,i,e,t)}function s2t(e,t,n){return e.map(r=>({signal:`{data: ${KL(r,{timeUnit:n,type:t})}}`}))}function wO(e,t,n){var i;const r=(i=Fo(n))==null?void 0:i.unit;return t==="temporal"||r?s2t(e,t,r):[e]}function tp(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=go(i[r]),{type:f}=u,c=u.timeUnit,d=Kxt({invalid:Bf("invalid",s,a),isPath:vm(o)});if(b1t(t)){const g=tp(e,void 0,n,r),v=wO(t.unionWith,f,c);return hf([...v,...g.value])}else{if(cn(t))return hf([t]);if(t&&t!=="unaggregated"&&!P4e(t))return hf(wO(t,f,c))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return ql([[0,1]]);const g=n.requestDataName(d);return ql([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=td(r)&&kt(u)?a2t(n,r,e):void 0;if(nd(u)){const g=wO([u.datum],f,c);return ql(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return ql([{data:n.requestDataName(d),field:Ft({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:Ft({field:g,aggregate:"max"})}])}else if(Zi(p.bin)){if(Mo(e))return ql(e==="bin-ordinal"?[]:[{data:w2(h)?n.requestDataName(d):n.requestDataName(vs.Raw),field:n.vgField(r,XE(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!$t(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Zi(g)){const v=eB(n,p.field,g);return ql([new ko(()=>{const y=n.getSignalName(v);return`[${y}.start, ${y}.stop]`})])}else return ql([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&_r(["time","utc"],e)){const g=i[ed(r)];if(Q4e(p,g,s,a)){const v=n.requestDataName(d),y=Jp({fieldDef:p,fieldDef2:g,markDef:s,config:a}),b=E2(o)&&y!==.5&&Bs(r);return ql([{data:v,field:n.vgField(r,b?{suffix:rR}:{})},{data:v,field:n.vgField(r,{suffix:b?iR:"end"})}])}}return ql(h?[{data:w2(h)?n.requestDataName(d):n.requestDataName(vs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function _O(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":WL),...r?{field:Bu(r)}:{},...i?{order:i}:{}}}function o2t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=P4e(r)?r:void 0,o=N0(i)&&BL(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function a2t(e,t,n){if(!Mo(n))return;const r=e.fieldDef(t),i=r.sort;if(K4e(i))return{op:"min",field:C1(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Zd(i)){const a=s&&!o.has(i.field);return _O(i,a)}else if(K1t(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:f,field:c}=u,d=s&&!o.has(c);if(sh(f)||ym(f))return _O({field:Ft(u),order:l},d);if(n7(f)||!f)return _O({op:f,field:c,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(_r(["ascending",void 0],i))return!0}}function l2e(e,t){const{aggregate:n,type:r}=e;return n?Nt(n)&&!Lyt.has(n)?{valid:!1,reason:_vt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Evt(e)}:{valid:!0}:{valid:!1,reason:wvt(e)}}function n$(e,t,n,r){return e.explicit&&t.explicit&&Ct(Tvt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function l2t(e){const t=xf(e.map(o=>{if(zd(o)){const{sort:a,...l}=o;return l}return o}),Or),n=xf(e.map(o=>{if(zd(o)){const a=o.sort;return a!==void 0&&!w2(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Or);if(t.length===0)return;if(t.length===1){const o=e[0];if(zd(o)&&n.length>0){let a=n[0];if(n.length>1){Ct(y_e);const l=n.filter(u=>$t(u)&&"op"in u&&u.op!=="min");n.every(u=>$t(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if($t(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=xf(n.map(o=>w2(o)||!("op"in o)||Nt(o.op)&&Yt(Cyt,o.op)?o:(Ct(Lvt(o)),!0)),Or);let i;r.length===1?i=r[0]:r.length>1&&(Ct(y_e),i=!0);const s=xf(e.map(o=>zd(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function iB(e){if(zd(e)&&Nt(e.field))return e.field;if(Ryt(e)){let t;for(const n of e.fields)if(zd(n)&&Nt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ct(Rvt),t}return Ct(Fvt),t}else if(Fyt(e)){Ct(Ovt);const t=e.fields[0];return Nt(t)?t:void 0}}function uR(e,t){const r=e.component.scales[t].get("domains").map(i=>(zd(i)&&(i.data=e.lookupDataSource(i.data)),i));return l2t(r)}function V5e(e){return yb(e)||sB(e)?e.children.reduce((t,n)=>t.concat(V5e(n)),u2e(e)):u2e(e)}function u2e(e){return _t(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:f,...c}=i,d=u2t(i.range,s,n,e),h=uR(e,n),p=a?lwt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...f!==void 0?{reverse:f}:{},...c}),t},[])}function u2t(e,t,n,r){if(Bs(n)){if(B0(e))return{step:{signal:`${t}_step`}}}else if($t(e)&&zd(e))return{...e,data:r.lookupDataSource(e.data)};return e}class W5e extends _h{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(_r([Xo.LOG,Xo.TIME,Xo.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&_r([Xo.LINEAR,Xo.SQRT,Xo.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(at(a)){const l=a[0],u=a[a.length-1];if(li(l)&&li(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const c2t=["range","scheme"];function f2t(e){const t=e.component.scales;for(const n of t7){const r=t[n];if(!r)continue;const i=d2t(n,e);r.setWithExplicit("range",i)}}function c2e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Pl(t),o=e.getName(s);if($t(r)&&r.binned&&r.step!==void 0)return new ko(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(Zi(r)){const a=eB(e,i,r);return new ko(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function d2t(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const c of c2t)if(n[c]!==void 0){const d=I5(s,c),h=N4e(e,c);if(!d)Ct(y4e(s,c,e));else if(h)Ct(h);else switch(c){case"range":{const p=n.range;if(at(p)){if(Bs(e))return hf(p.map(g=>{if(g==="width"||g==="height"){const v=t.getName(g),y=t.getSignalName.bind(t);return ko.fromName(y,v)}return g}))}else if($t(p))return hf({data:t.requestDataName(vs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return hf(p)}case"scheme":return hf(h2t(n[c]))}}const o=e===fs||e==="xOffset"?"width":"height",a=r[o];if(jf(a)){if(Bs(e))if(Mo(s)){const c=X5e(a,t,e);if(c)return hf({step:c})}else Ct(v4e(o));else if(UE(e)){const c=e===fm?"x":"y";if(t.getScaleComponent(c).get("type")==="band"){const p=Z5e(a,s);if(p)return hf(p)}}}const{rangeMin:l,rangeMax:u}=n,f=p2t(e,t);return(l!==void 0||u!==void 0)&&I5(s,"rangeMin")&&at(f)&&f.length===2?hf([l??f[0],u??f[1]]):ql(f)}function h2t(e){return v1t(e)?{scheme:e.name,...Ll(e,["name"])}:{scheme:e}}function Y5e(e,t,n,{center:r}={}){const i=Pl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Io&&Rc(n)?r?[ko.fromName(a=>`${o(a)}/2`,s),ko.fromName(a=>`-${o(a)}/2`,s)]:[ko.fromName(o,s),0]:r?[ko.fromName(a=>`-${o(a)}/2`,s),ko.fromName(a=>`${o(a)}/2`,s)]:[0,ko.fromName(o,s)]}function p2t(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=go(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:f}=t.specifiedScales[e];switch(e){case fs:case Io:{if(_r(["point","band"],l)){const c=K5e(e,n,r.view);if(jf(c))return{step:X5e(c,t,e)}}return Y5e(e,t,l)}case fm:case fb:return m2t(e,t,l);case vh:{const c=v2t(i,r),d=b2t(i,n,t,r);return b1(l)?y2t(c,d,g2t(l,r,u,e)):[c,d]}case qu:return[0,Math.PI*2];case I0:return[0,360];case jc:return[0,new ko(()=>{const c=t.getSignalName(iu(t.parent)?"child_width":"width"),d=t.getSignalName(iu(t.parent)?"child_height":"height");return`min(${c},${d})/2`})];case dm:return{step:1e3/r.scale.framesPerSecond};case mm:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case gm:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Il:return"symbol";case $l:case Jf:case Qf:return l==="ordinal"?o==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case bh:case hm:case pm:return[r.scale.minOpacity,r.scale.maxOpacity]}}function X5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=K9(n),o=r[s];if(R6e({step:e,offsetIsDiscrete:Wn(o)&&F4e(o.type)})==="offset"&&f6e(r,s)){const l=t.getScaleComponent(s);let f=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${d}, ${h})`}const c=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${Iyt(c)})`}}else return e.step}function Z5e(e,t){if(R6e({step:e,offsetIsDiscrete:Mo(t)})==="offset")return{step:e.step}}function m2t(e,t,n){const r=e===fm?"x":"y",i=t.getScaleComponent(r);if(!i)return Y5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=K5e(r,t.size,t.config.view);if(jf(u)){const f=Z5e(u,n);if(f)return f}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(kt(u)&&u.timeUnit){const f=T4e(u.timeUnit,p=>`scale('${o}', ${p})`),c=t.config.scale.bandWithNestedOffsetPaddingInner,d=Jp({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(c){const p=cn(c)?`${c.signal}/2`+h:`${c/2+d}`,g=cn(c)?`(1 - ${c.signal}/2)`+h:`${1-c/2+d}`;return[{signal:`${p} * (${f})`},{signal:`${g} * (${f})`}]}return[0,{signal:f}]}return BMe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function K5e(e,t,n){const r=e===fs?"width":"height",i=t[r];return i||Bk(n,r)}function g2t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(Ct(Uvt(r)),3)}}function y2t(e,t,n){const r=()=>{const i=bc(t),s=bc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return cn(t)?new ko(r):{signal:r()}}function v2t(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(zL("size",e))}const f2e=.95;function b2t(e,t,n,r){const i={x:c2e(n,"x"),y:c2e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=d2e(t,i,r.view);return li(s)?s-1:new ko(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=d2e(t,i,r.view);return li(s)?Math.pow(f2e*s,2):new ko(()=>`pow(${f2e} * ${s.signal}, 2)`)}}throw new Error(zL("size",e))}function d2e(e,t,n){const r=jf(e.width)?e.width.step:z5(n,"width"),i=jf(e.height)?e.height.step:z5(n,"height");return t.x||t.y?new ko(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function J5e(e,t){ys(e)?x2t(e,t):e$e(e,t)}function x2t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of _t(n)){const l=o[a],u=n[a],f=e.getScaleComponent(a),c=go(i[a]),d=l[t],h=f.get("type"),p=f.get("padding"),g=f.get("paddingInner"),v=I5(h,t),y=N4e(a,t);if(d!==void 0&&(v?y&&Ct(y):Ct(y4e(h,t,a))),v&&y===void 0)if(d!==void 0){const b=c.timeUnit,w=c.type;switch(t){case"domainMax":case"domainMin":z0(l[t])||w==="temporal"||b?u.set(t,{signal:KL(l[t],{type:w,timeUnit:b})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const b=St(h2e,t)?h2e[t]({model:e,channel:a,fieldOrDatumDef:c,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:d6e(i,a),hasSecondaryRangeChannel:!!i[ed(a)]}):r.scale[t];b!==void 0&&u.set(t,b,!1)}}}const h2e={bins:({model:e,fieldOrDatumDef:t})=>kt(t)?w2t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>_2t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>E2t(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>S2t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>A2t(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>C2t(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=kt(e)?e.sort:void 0;return k2t(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>T2t(e,t,n,r,i,s.scale,o)};function Q5e(e){ys(e)?f2t(e):e$e(e,"range")}function e$e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Q5e(r):J5e(r,t);for(const r of _t(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Qp(i,a,t,"scale",H6e((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function w2t(e,t){const n=t.bin;if(Zi(n)){const r=eB(e,t.field,n);return new ko(()=>e.getSignalName(r))}else if(Wo(n)&&N0(n)&&n.step!==void 0)return{step:n.step}}function _2t(e,t){if(_r([$l,Jf,Qf],e)&&t!=="nominal")return"hcl"}function E2t(e,t,n,r,i,s){var o;if(!((o=Oc(s))!=null&&o.bin||at(n)||i!=null||r!=null||_r([Xo.TIME,Xo.UTC],e)))return Bs(t)?!0:void 0}function S2t(e,t,n,r,i,s){if(Bs(e)){if(wf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Xo.POINT)return n.pointPadding}}function A2t(e,t,n,r,i,s=!1){if(e===void 0){if(Bs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:f}=i;return s?f:Ns(o,n==="bar"?a:n==="tick"?u:l)}else if(UE(t)&&r===Xo.BAND)return i.offsetBandPaddingInner}}function C2t(e,t,n,r,i,s=!1){if(e===void 0){if(Bs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Xo.BAND)return Ns(o,cn(r)?{signal:`${r.signal}/2`}:r/2)}else if(UE(t)){if(n===Xo.POINT)return .5;if(n===Xo.BAND)return i.offsetBandPaddingOuter}}}function k2t(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Rc(e)&&t==="descending"?cn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Rc(e)&&t==="descending")return!0}function T2t(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Rc(i)){if(at(n)){const l=n[0],u=n[n.length-1];if(li(l)&&l<=0&&li(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!b1(i))return!0;if(!(kt(t)&&t.bin)&&_r([...xh,...yyt],e)){const{orient:l,type:u}=r;return _r(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:_r(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function D2t(e,t,n,r,i=!1){const s=L2t(t,n,r,i),{type:o}=e;return td(t)?o!==void 0?A1t(t,o)?kt(n)&&!S1t(o,n.type)?(Ct(Cvt(o,s)),s):o:(Ct(Avt(t,o,s)),s):s:null}function L2t(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Tv(e)||cO(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ct(fO(e,"ordinal")),"ordinal";if(uO(e))return"band";if(Bs(e)||UE(e)){if(_r(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in e7)return"band";const s=n[Pl(e)];return m0(s)||w1(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Tv(e)?"time":cO(e)==="discrete"?(Ct(fO(e,"temporal")),"ordinal"):kt(t)&&t.timeUnit&&Fo(t.timeUnit).utc?"utc":uO(e)?"band":"time";case"quantitative":return Tv(e)?kt(t)&&Zi(t.bin)?"bin-ordinal":"linear":cO(e)==="discrete"?(Ct(fO(e,"quantitative")),"ordinal"):uO(e)?"band":"linear";case"geojson":return}throw new Error(m4e(t.type))}function R2t(e,{ignoreRange:t}={}){t$e(e),G5e(e);for(const n of E1t)J5e(e,n);t||Q5e(e)}function t$e(e){ys(e)?e.component.scales=F2t(e):e.component.scales=M2t(e)}function F2t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of t7){const o=go(t[s]);if(o&&n===j4e&&s===Il&&o.type===db)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=d6e(t,s),u=D2t(a,s,o,r,l);i[s]=new W5e(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const O2t=H6e((e,t)=>b_e(e)-b_e(t));function M2t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){t$e(s);for(const o of _t(s.component.scales))if((t=i.scale)[o]??(t[o]=F5e(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?h1t(a.value,l.value)?r[o]=Qp(a,l,"type","scale",O2t):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of _t(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new W5e(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class EO{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function ys(e){return(e==null?void 0:e.type)==="unit"}function iu(e){return(e==null?void 0:e.type)==="facet"}function sB(e){return(e==null?void 0:e.type)==="concat"}function yb(e){return(e==null?void 0:e.type)==="layer"}class oB{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=Yo(a),this.name=t.name??i,this.title=ap(t.title)?{text:t.title}:t.title?Yo(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new EO,this.projectionNameMap=r?r.projectionNameMap:new EO,this.signalNameMap=r?r.signalNameMap:new EO,this.data=t.data,this.description=t.description,this.transforms=Bxt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:qbt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:YL(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new _h,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Gn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){R2t(this)}parseProjection(){U5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){P5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of _t(r)){const o=r[s];o!==void 0&&(i[s]=ss(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ss(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:$i(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=e_t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Lu)t[r].title&&n.push(Ywt(this,r));for(const r of Z7)n=n.concat(Xwt(this,r));return n}assembleAxes(){return $wt(this.component.axes,this.config)}assembleLegends(){return B5e(this)}assembleProjections(){return E_t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...o4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return _r(["unit","layer"],this.type)?_r(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),$i(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||iu(this.parent)?V5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return cs((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(vs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(iu(this.parent)){const n=L5e(t),r=PL(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Mo(s)&&B0(o)){const a=i.get("name"),l=uR(this,r),u=iB(l);if(u){const f=Ft({aggregate:"distinct",field:u},{expr:"datum"});return{signal:D5e(a,i,f)}}else return Ct(i7(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(JMe(t)&&td(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(jyt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class n$e extends oB{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ft(r,n)}reduceFieldDef(t,n){return vbt(this.getMapping(),(r,i,s)=>{const o=Oc(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){F7(this.getMapping(),(r,i)=>{const s=Oc(r);s&&t(s,i)},n)}}class cR extends Di{clone(){return new cR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Or(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class fR extends Di{clone(){return new fR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Or(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class dR extends Di{clone(){return new dR(this.parent,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Or(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class hR extends Di{clone(){return new hR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Or(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Rv extends Di{clone(){return new Rv(null,Gn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[qc,Uc],[zu,Hc]]){const s=i.map(o=>{const a=go(n.encoding[o]);return kt(a)?a.field:nd(a)?{expr:`${a.datum}`}:Fc(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Rv(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Il)){const i=n.typedFieldDef(Il);i.type===db&&(t=new Rv(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Nt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Or(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class A2 extends Di{clone(){return new A2(null,this.projection,Gn(this.fields),Gn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[qc,Uc],[zu,Hc]]){const i=r.map(o=>{const a=go(n.encoding[o]);return kt(a)?a.field:nd(a)?{expr:`${a.datum}`}:Fc(a)?{expr:`${a.value}`}:void 0}),s=r[0]===zu?"2":"";(i[0]||i[1])&&(t=new A2(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Nt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Or(this.fields)} ${Or(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Gg extends Di{clone(){return new Gg(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Gg(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(kt(i)&&kt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:f,keyvals:c}=o.impute,d=m6e(n.mark,r);return new Gg(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...f?{frame:f}:{},...c!==void 0?{keyvals:c}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Or(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:xxt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},f={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,f]}else return[l]}}class pR extends Di{clone(){return new pR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Or(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class C2 extends Di{clone(){return new C2(null,Gn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(wxt(o)){let l=s$e(o.data,s);l||(l=new b0(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new Rl(l,u,vs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(_xt(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(cs(l),l)}catch{throw new Error(Gyt(l))}if(a=u.materialized,!a)throw new Error(Vyt(l))}return new C2(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Or({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Pt(this.transform.as)}:{}};else{let n=this.transform.as;Nt(n)||(Ct(rvt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class mR extends Di{clone(){return new mR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Or(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class gR extends Di{clone(){return new gR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Or(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class yR extends Di{clone(){return new yR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xf((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Or(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class vR extends Di{clone(){return new vR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Or(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function r$e(e){let t=0;function n(r,i){if(r instanceof b0&&!r.isGenerator&&!E1(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ca&&(r.parent instanceof b0&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof mb){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof JE||r instanceof QE||r instanceof T1||r instanceof pb||r instanceof A1||r instanceof A2||r instanceof Ec||r instanceof C2||r instanceof gb||r instanceof H0||r instanceof hR||r instanceof dR||r instanceof cR||r instanceof pR||r instanceof mR||r instanceof gR||r instanceof em||r instanceof vR||r instanceof yR||r instanceof fR)&&i.transform.push(r.assemble()),(r instanceof Tf||r instanceof Cf||r instanceof Gg||r instanceof Jd||r instanceof Rv)&&i.transform.push(...r.assemble()),r instanceof Rl&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Rl?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Rl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function $2t(e){const t=[],n=r$e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function I2t(e,t){const n=[],r=r$e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function P2t(e){return e==="top"||e==="left"||cn(e)?"header":"footer"}function N2t(e){for(const t of Lu)B2t(e,t);p2e(e,"x"),p2e(e,"y")}function B2t(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],l=k1("title",null,r,t);let u=Dv(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=at(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const f=k1("labelOrient",a.header,r,t),c=a.header!==null?Ns((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=_r(["bottom","right"],f)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[i$e(e,t,c)]}}}function i$e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function p2e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Q7(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=P2t(a.get("orient"));o[l]??(o[l]=[i$e(e,s,!1)]);const u=n_(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function z2t(e){aB(e),qk(e,"width"),qk(e,"height")}function j2t(e){aB(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";qk(e,t),qk(e,n)}function aB(e){for(const t of e.children)t.parseLayoutSize()}function qk(e,t){const n=L5e(t),r=PL(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??F5e(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Qp(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function U2t(e){const{size:t,component:n}=e;for(const r of xh){const i=Pl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,jf(s)?"step":s,!0)}else{const s=q2t(e,i);n.layoutSize.set(i,s,!1)}}}function q2t(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Mo(s)){const a=Bk(r.view,t);return B0(o)||jf(a)?"step":a}else return B5(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return B5(r.view,t);{const s=Bk(r.view,t);return jf(s)?s.step:s}}}function r$(e,t,n){return Ft(t,{suffix:`by_${Ft(e)}`,...n})}class L_ extends n$e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=dB(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!VE(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=_t(t),r={};for(const i of n){if(![Yd,Xd].includes(i)){Ct(zL(i,"facet"));break}const s=t[i];if(s.field===void 0){Ct(M5(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=R7(t,n);return r.header?r.header=Yo(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return St(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=bR(this),this.child.parseData()}parseLayoutSize(){aB(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>kf(t))&&o7(s7)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),N2t(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Lu)for(const r of K7){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=k1("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=aR(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof L_))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof L_?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ft(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof L_){if(this.child.channelHasField("column")){const i=Ft(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of xh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Mo(o)&&B0(a)){const l=uR(this.child,i),u=iB(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Ct(i7(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const f of Lu){const c=this.facet[f];if(c){l.push(Ft(c));const{bin:d,sort:h}=c;if(Zi(d)&&l.push(Ft(c,{binSuffix:"end"})),Zd(h)){const{field:p,op:g=WL}=h,v=r$(c,h);r&&i?(s.push(v),o.push("max"),a.push(v)):(s.push(p),o.push(g),a.push(v))}else if(at(h)){const p=C1(c,f);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Zd(r.sort)?[r$(r,r.sort,{expr:"datum"})]:at(r.sort)?[C1(r,t,{expr:"datum"})]:[Ft(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Zd(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Z5(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Z7)if(t[s]){const o=k1("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Z5(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=$2t(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Lu.map(l=>this.facetSortFields(l)).flat(),order:Lu.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(iwt(this,[]))}]}getMapping(){return this.facet}}function H2t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Zd(s.sort)){const{field:o,op:a=WL}=s.sort;e=i=new H0(e,{joinaggregate:[{op:a,field:o,as:r$(s,s.sort,{forAs:!0})}],groupby:[Ft(s)]})}return i}return null}function s$e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const f=(i=e.format)==null?void 0:i.feature;if((f||u)&&f!==u)continue;const c=(s=a.format)==null?void 0:s.mesh;if(!((l||c)&&l!==c)){if(S2(e)&&S2(a)){if(Jl(e.values,a.values))return o}else if(E1(e)&&E1(a)){if(e.url===a.url)return o}else if(G6e(e)&&e.name===o.dataName)return o}}return null}function G2t(e,t){if(e.data||!e.parent){if(e.data===null){const r=new b0({values:[]});return t.push(r),r}const n=s$e(e.data,t);if(n)return Ip(e.data)||(n.data.format=zMe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new b0(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function V2t(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Fxt(i))o=e=new A1(e,i),s="derived";else if(q7(i)){const a=I_t(i);o=e=Ca.makeWithAncestors(e,{},a,n)??e,e=new pb(e,t,i.filter)}else if(z6e(i))o=e=Tf.makeFromTransform(e,i,t),s="number";else if(Mxt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Ca(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Cf.makeFromTransform(e,i);else if($xt(i))o=e=Ec.makeFromTransform(e,i),s="number",X7(t)&&(e=new em(e));else if(B6e(i))o=e=C2.make(e,t,i,r++),s="derived";else if(Dxt(i))o=e=new gb(e,i),s="number";else if(Lxt(i))o=e=new H0(e,i),s="number";else if(Ixt(i))o=e=Jd.makeFromTransform(e,i),s="derived";else if(Pxt(i))o=e=new hR(e,i),s="derived";else if(Nxt(i))o=e=new fR(e,i),s="derived";else if(Rxt(i))o=e=new dR(e,i),s="derived";else if(Ext(i))o=e=new yR(e,i),s="derived";else if(Txt(i))e=new vR(e,i);else if(Oxt(i))o=e=Gg.makeFromTransform(e,i),s="derived";else if(Sxt(i))o=e=new cR(e,i),s="derived";else if(Axt(i))o=e=new mR(e,i),s="derived";else if(Cxt(i))o=e=new gR(e,i),s="derived";else if(kxt(i))o=e=new pR(e,i),s="derived";else{Ct(nvt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function bR(e){var v;let t=G2t(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Ip(i)||E1(i)||S2(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Zxt;Ip(i)?(V6e(i)?t=new QE(t,i.sequence):H7(i)&&(t=new JE(t,i.graticule)),o.parseNothing=!0):((v=i==null?void 0:i.format)==null?void 0:v.parse)===null&&(o.parseNothing=!0),t=Ca.makeExplicit(t,e,o)??t,t=new em(t);const a=e.parent&&yb(e.parent);(ys(e)||iu(e))&&a&&(t=Tf.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=V2t(t,e,o));const l=N_t(e),u=P_t(e);t=Ca.makeWithAncestors(t,{},{...l,...u},o)??t,ys(e)&&(t=Rv.parseAll(t,e),t=A2.parseAll(t,e)),(ys(e)||iu(e))&&(a||(t=Tf.makeFromEncoding(t,e)??t),t=Cf.makeFromEncoding(t,e)??t,t=A1.parseAllForSortIndex(t,e));const f=t=PA(vs.Raw,e,t);if(ys(e)){const y=Ec.makeFromEncoding(t,e);y&&(t=y,X7(e)&&(t=new em(t))),t=Gg.makeFromEncoding(t,e)??t,t=Jd.makeFromEncoding(t,e)??t}let c,d;if(ys(e)){const{markDef:y,mark:b,config:w}=e,E=Mi("invalid",y,w),{marks:A,scales:T}=d=Y6e({invalid:E,isPath:vm(b)});A!==T&&T==="include-invalid-values"&&(c=t=PA(vs.PreFilterInvalid,e,t)),A==="exclude-invalid-values"&&(t=T1.make(t,e,d)??t)}const h=t=PA(vs.Main,e,t);let p;if(ys(e)&&d){const{marks:y,scales:b}=d;y==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=T1.make(t,e,d)??t,p=t=PA(vs.PostFilterInvalid,e,t))}ys(e)&&Owt(e,h);let g=null;if(iu(e)){const y=e.getName("facet");t=H2t(t,e.facet)??t,g=new mb(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:g,ancestorParse:o,preFilterInvalid:c,postFilterInvalid:p}}function PA(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Rl(n,s,e,i);return r[s]=o,o}class W2t extends oB{constructor(t,n,r,i){var s,o,a,l;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Ct(Qyt),this.children=this.getChildren(t).map((u,f)=>dB(u,this,this.getName(`concat_${f}`),void 0,i))}parseData(){this.component.data=bR(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>kf(t))&&o7(s7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return eR(t)?t.vconcat:j7(t)?t.hconcat:t.concat}parseLayoutSize(){j2t(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=J7(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Y2t(e){return e===!1||e===null}const X2t={disable:1,gridScale:1,scale:1,...u6e,labelExpr:1,encode:1},o$e=_t(X2t);class lB extends _h{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new lB(Gn(this.explicit),Gn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Y2t(this.get(t))}hasOrientSignalRef(){return cn(this.explicit.orient)}}function Z2t(e,t,n){const{encoding:r,config:i}=e,s=go(r[t])??go(r[ed(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if(g0(l))return{text:xc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(x1(s)==="quantitative"){if(w1(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:xc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:xc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(x1(s)==="temporal"&&i.timeFormatType&&kt(s)&&!s.timeUnit)return{text:xc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function K2t(e){return xh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[iEt(n,e)]),t),{})}const J2t={bottom:"top",top:"bottom",left:"right",right:"left"};function Q2t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of _t(i.component.axes))n.axis[s]=Q7(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=eEt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of xh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!cn(a)){if(r[a]>0&&!l){const u=J2t[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function eEt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=tEt(i,s)}}}else return t.map(n=>n.clone());return e}function tEt(e,t){for(const n of o$e){const r=Qp(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return h4e(i,s);case"gridScale":return{explicit:i.explicit,value:Ns(i.value,s.value)}}return nR(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function nEt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(cn(n.labelAngle)?n.labelAngle:_2(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===A5e(r,i))return!0}return e===n[t]}const rEt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function iEt(e,t){var y,b;let n=t.axis(e);const r=new lB,i=go(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((b=o.axis)==null?void 0:b.orient)||qwt(e),l=t.getScaleComponent(e).get("type"),u=Iwt(e,l,a,t.config),f=n!==void 0?!n:Y5("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const c=zwt(i,n,e,o.style,u),d=X4e(n.formatType,i,l),h=Y4e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:c,format:h,formatType:d,mark:s,config:o};for(const w of o$e){const E=w in Q_e?Q_e[w](p):C_e(w)?n[w]:void 0,A=E!==void 0,T=nEt(E,w,n,t,e);if(A&&T)r.set(w,E,T);else{const{configValue:D=void 0,configFrom:k=void 0}=C_e(w)&&w!=="values"?Y5(w,o.style,n.style,u):{},R=D!==void 0;A&&!R?r.set(w,E,T):(k!=="vgAxisConfig"||rEt.has(w)&&R||ZE(D)||cn(D))&&r.set(w,D,!1)}}const g=n.encoding??{},v=l6e.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const A=R5e(g[E]??{},t),T=E==="labels"?Z2t(t,e,A):A;return T!==void 0&&!$i(T)&&(w[E]={update:T}),w},{});return $i(v)||r.set("encode",v,!!n.encoding||n.labelAngle!==void 0),r}function sEt({encoding:e,size:t}){for(const n of xh){const r=Pl(n);jf(t[r])&&Cp(e[n])&&(delete t[r],Ct(v4e(r)))}return t}const oEt={vgMark:"arc",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...oh(e,"radius"),...oh(e,"theta")})},aEt={vgMark:"area",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...zk("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...zk("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Y7(e)})},lEt={vgMark:"rect",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...oh(e,"x"),...oh(e,"y")})},uEt={vgMark:"shape",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&kt(n)&&n.type===db?{field:Ft(n,{expr:"datum"})}:{}}]}},cEt={vgMark:"image",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...oh(e,"x"),...oh(e,"y"),...V7(e,"url")})},fEt={vgMark:"line",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zo("size",e,{vgChannel:"strokeWidth"}),...Y7(e)})},dEt={vgMark:"trail",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zo("size",e),...Y7(e)})};function uB(e,t){const{config:n}=e;return{...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zo("size",e),...Zo("angle",e),...hEt(e,n,t)}}function hEt(e,t,n){return n?{shape:{value:n}}:Zo("shape",e)}const pEt={vgMark:"symbol",encodeEntry:e=>uB(e)},mEt={vgMark:"symbol",encodeEntry:e=>uB(e,"circle")},gEt={vgMark:"symbol",encodeEntry:e=>uB(e,"square")},yEt={vgMark:"rect",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...oh(e,"x"),...oh(e,"y")})},vEt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...zk("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...zk("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Zo("size",e,{vgChannel:"strokeWidth"})}}},bEt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hu(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...V7(e),...Zo("size",e,{vgChannel:"fontSize"}),...Zo("angle",e),...X_e("align",xEt(e.markDef,n,t)),...X_e("baseline",wEt(e.markDef,n,t)),...Ka("radius",e,{defaultPos:null}),...Ka("theta",e,{defaultPos:null})}}};function xEt(e,t,n){if(Mi("align",e,n)===void 0)return"center"}function wEt(e,t,n){if(Mi("baseline",e,n)===void 0)return"middle"}const _Et={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...oh(e,i),...Ka(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:ss(Mi("thickness",n,t))}}},NA={arc:oEt,area:aEt,bar:lEt,circle:mEt,geoshape:uEt,image:cEt,line:fEt,point:pEt,rect:yEt,rule:vEt,square:gEt,text:bEt,tick:_Et,trail:dEt};function EEt(e){if(_r([GL,qL,D1t],e.mark)){const t=m6e(e.mark,e.encoding);if(t.length>0)return SEt(e,t)}else if(e.mark===HL){const t=F5.some(n=>Mi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return AEt(e)}return cB(e)}const m2e="faceted_path_";function SEt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:m2e+e.requestDataName(vs.Main),data:e.requestDataName(vs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:cB(e,{fromPrefix:m2e})}]}const g2e="stack_group_";function AEt(e){var u;const[t]=cB(e,{fromPrefix:g2e}),n=e.scaleName(e.stack.fieldChannel),r=(f={})=>e.vgField(e.stack.fieldChannel,f),i=(f,c)=>{const d=[r({prefix:"min",suffix:"start",expr:c}),r({prefix:"max",suffix:"start",expr:c}),r({prefix:"min",suffix:"end",expr:c}),r({prefix:"max",suffix:"end",expr:c})];return`${f}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...p1(t.encode.update,["y","yc","y2","height",...F5]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ll(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...p1(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ll(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of F5){const c=Bf(f,e.markDef,e.config);t.encode.update[f]?(s[f]=t.encode.update[f],delete t.encode.update[f]):c&&(s[f]=ss(c)),c&&(t.encode.update[f]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const f of e.stack.groupbyChannels){const c=e.fieldDef(f),d=Ft(c);d&&a.push(d),(c!=null&&c.bin||c!=null&&c.timeUnit)&&a.push(Ft(c,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,c)=>{if(t.encode.update[c])return{...f,[c]:t.encode.update[c]};{const d=Bf(c,e.markDef,e.config);return d!==void 0?{...f,[c]:ss(d)}:f}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(vs.Main),name:g2e+e.requestDataName(vs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function CEt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!at(o)&&Fc(o)&&L5(o.value)||!o&&L5(Mi("order",i,s)))){if((at(o)||kt(o))&&!n)return c4e(o,{expr:"datum"});if(vm(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(kt(l))return{field:a}}}}function cB(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Ns(r.clip,kEt(e),TEt(e)),a=l4e(r),l=i.key,u=CEt(e),f=DEt(e),c=Mi("aria",r,s),d=NA[n].postEncodingTransform?NA[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:NA[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...f||{},...c===!1?{aria:c}:{},from:{data:t.fromPrefix+e.requestDataName(vs.Main)},encode:{update:NA[n].encodeEntry(e)},...d?{transform:d}:{}}]}function kEt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function TEt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function DEt(e){if(!e.component.selection)return null;const t=_t(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=_t(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class a$e extends n$e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,T_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>{var f,c,d;return(f=u.from)!=null&&f.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+Z6e)),(d=(c=u.from)==null?void 0:c.facet)!=null&&d.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u};const o=zf(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=dxt(o,s,{graticule:t.data&&H7(t.data)}));const l=this.encoding=gbt(t.encoding||{},a,o.filled,s);this.markDef=I6e(o,l,s),this.size=sEt({encoding:l,size:T_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=$6e(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>B7(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===j4e,r=t&&lyt.some(i=>Wn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return t7.reduce((r,i)=>{const s=go(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Yo(t);return at(n)&&(i.domain=n.map(Xl)),at(r)&&(i.range=r.map(Xl)),i}initAxes(t){return xh.reduce((n,r)=>{const i=t[r];if(Wn(i)||r===fs&&Wn(t.x2)||r===Io&&Wn(t.y2)){const s=Wn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=_t(t),r={};for(const i of n){const s=t[i];r[i]=ZE(s)?a4e(s):Xl(s)}return r}initLegends(t){return byt.reduce((n,r)=>{const i=go(t[r]);if(i&&wyt(r)){const s=i.legend;n[r]=s&&Yo(s)}return n},{})}parseData(){this.component.data=bR(this)}parseLayoutSize(){U2t(this)}parseSelections(){this.component.selection=Fwt(this,this.selection)}parseMarkGroup(){this.component.mark=EEt(this)}parseAxesAndHeaders(){this.component.axes=K2t(this)}assembleSelectionTopLevelSignals(t){return swt(this,t)}assembleSignals(){return[..._5e(this),...rwt(this,[])]}assembleSelectionData(t){return owt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return J7(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!yb(this.parent))&&(t=e5e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return qg(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Oc(n)}typedFieldDef(t){const n=this.fieldDef(t);return nl(n)?n:null}}class fB extends oB{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(tR(a))return new fB(a,this,this.getName(`layer_${l}`),o,s);if(wh(a))return new a$e(a,this,this.getName(`layer_${l}`),o,s);throw new Error(r7(a))})}parseData(){this.component.data=bR(this);for(const t of this.children)t.parseData()}parseLayoutSize(){z2t(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>kf(t))&&o7(s7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Q2t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),_5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),J7(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return awt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),B5e(this))}}function dB(e,t,n,r,i){if(YL(e))return new L_(e,t,n,i);if(tR(e))return new fB(e,t,n,r,i);if(wh(e))return new a$e(e,t,n,r,i);if(zbt(e))return new W2t(e,t,n,i);throw new Error(r7(e))}function LEt(e,t={}){t.logger&&qvt(t.logger),t.fieldTitle&&s6e(t.fieldTitle);try{const n=M6e(J1(t.config,e.config)),r=q6e(e,n),i=dB(r,null,"",void 0,n);return i.parse(),e2t(i.component.data,i),{spec:FEt(i,REt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Hvt(),t.fieldTitle&&abt()}}function REt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Nt(t)&&(t={type:t}),i&&s&&Wxt(t.type)){if(i==="step"&&s==="step")Ct(d_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ct(d_e(PL(o)));const a=o==="width"?"height":"width";t.type=Yxt(a)}}return{..._t(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...z_e(n,!1),...z_e(e,!0)}}function FEt(e,t,n={},r){const i=e.config?ext(e.config):void 0,s=I2t(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...l?{title:l}:{},...u?{style:u}:{},...f?{encode:{update:f}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...L6e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const OEt=nyt.version,MEt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:g1,accessPathWithDatum:W9,accessWithDatumToUnescapedPath:ki,compile:LEt,contains:_r,deepEqual:Jl,deleteNestedProperty:Lk,duplicate:Gn,entries:Zp,every:H9,fieldIntersection:V9,flatAccessWithDatum:UMe,getFirstDefined:Ns,hasIntersection:G9,hasProperty:St,hash:Or,internalField:GMe,isBoolean:w2,isEmpty:$i,isEqual:iyt,isInternalField:VMe,isNullOrFalse:L5,isNumeric:RL,keys:_t,logicalExpr:T_,mergeDeep:zMe,never:BMe,normalize:q6e,normalizeAngle:_2,omit:Ll,pick:p1,prefixGenerator:R5,removePathFromField:cb,replaceAll:c0,replacePathInField:Bu,resetIdCounter:oyt,setEqual:jMe,some:m1,stringify:Ii,titleCase:BE,unique:xf,uniqueId:HMe,vals:ta,varName:cs,version:OEt},Symbol.toStringTag,{value:"Module"}));function l$e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var $Et="vega-themes",IEt="2.15.0",PEt="Themes for stylized Vega and Vega-Lite visualizations.",NEt=["vega","vega-lite","themes","style"],BEt="BSD-3-Clause",zEt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},jEt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],UEt="build/vega-themes.js",qEt="build/vega-themes.module.js",HEt="build/vega-themes.min.js",GEt="build/vega-themes.min.js",VEt="build/vega-themes.module.d.ts",WEt={type:"git",url:"https://github.com/vega/vega-themes.git"},YEt=["src","build"],XEt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},ZEt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},KEt={vega:"*","vega-lite":"*"},JEt={},QEt={name:$Et,version:IEt,description:PEt,keywords:NEt,license:BEt,author:zEt,contributors:jEt,main:UEt,module:qEt,unpkg:HEt,jsdelivr:GEt,types:VEt,repository:WEt,files:YEt,scripts:XEt,devDependencies:ZEt,peerDependencies:KEt,dependencies:JEt};const Gy="#fff",y2e="#888",eSt={background:"#333",view:{stroke:y2e},title:{color:Gy,subtitleColor:Gy},style:{"guide-label":{fill:Gy},"guide-title":{fill:Gy}},axis:{domainColor:Gy,gridColor:y2e,tickColor:Gy}},og="#4572a7",tSt={background:"#fff",arc:{fill:og},area:{fill:og},line:{stroke:og,strokeWidth:2},path:{stroke:og},rect:{fill:og},shape:{stroke:og},symbol:{fill:og,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ag="#30a2da",SO="#cbcbcb",nSt="#999",rSt="#333",v2e="#f0f0f0",b2e="#333",iSt={arc:{fill:ag},area:{fill:ag},axis:{domainColor:SO,grid:!0,gridColor:SO,gridWidth:1,labelColor:nSt,labelFontSize:10,titleColor:rSt,tickColor:SO,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:v2e,group:{fill:v2e},legend:{labelColor:b2e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:b2e,titleFontSize:14,titlePadding:10},line:{stroke:ag,strokeWidth:2},path:{stroke:ag,strokeWidth:.5},rect:{fill:ag},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ag},bar:{binSpacing:2,fill:ag,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},lg="#000",sSt={group:{fill:"#e5e5e5"},arc:{fill:lg},area:{fill:lg},line:{stroke:lg},path:{stroke:lg},rect:{fill:lg},shape:{stroke:lg},symbol:{fill:lg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},oSt=22,aSt="normal",x2e="Benton Gothic, sans-serif",w2e=11.5,lSt="normal",ug="#82c6df",AO="Benton Gothic Bold, sans-serif",_2e="normal",E2e=13,Ew={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},uSt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:AO,fontSize:oSt,fontWeight:aSt},arc:{fill:ug},area:{fill:ug},line:{stroke:ug,strokeWidth:2},path:{stroke:ug},rect:{fill:ug},shape:{stroke:ug},symbol:{fill:ug,size:30},axis:{labelFont:x2e,labelFontSize:w2e,labelFontWeight:lSt,titleFont:AO,titleFontSize:E2e,titleFontWeight:_2e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:x2e,labelFontSize:w2e,symbolType:"square",titleFont:AO,titleFontSize:E2e,titleFontWeight:_2e},range:{category:Ew["category-6"],diverging:Ew["fireandice-6"],heatmap:Ew["fire-7"],ordinal:Ew["fire-7"],ramp:Ew["fire-7"]}},cg="#ab5787",BA="#979797",cSt={background:"#f9f9f9",arc:{fill:cg},area:{fill:cg},line:{stroke:cg},path:{stroke:cg},rect:{fill:cg},shape:{stroke:cg},symbol:{fill:cg,size:30},axis:{domainColor:BA,domainWidth:.5,gridWidth:.2,labelColor:BA,tickColor:BA,tickWidth:.2,titleColor:BA},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},fg="#3e5c69",fSt={background:"#fff",arc:{fill:fg},area:{fill:fg},line:{stroke:fg},path:{stroke:fg},rect:{fill:fg},shape:{stroke:fg},symbol:{fill:fg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},vu="#1696d2",S2e="#000000",dSt="#FFFFFF",zA="Lato",CO="Lato",hSt="Lato",pSt="#DEDDDD",mSt=18,Sw={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},gSt={background:dSt,title:{anchor:"start",fontSize:mSt,font:zA},axisX:{domain:!0,domainColor:S2e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:CO,labelAngle:0,tickColor:S2e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:zA},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:pSt,gridWidth:1,labelFontSize:12,labelFont:CO,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:zA,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:CO,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:zA,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Sw["six-groups-cat-1"],diverging:Sw["diverging-colors"],heatmap:Sw["diverging-colors"],ordinal:Sw["six-groups-seq"],ramp:Sw["shades-blue"]},area:{fill:vu},rect:{fill:vu},line:{color:vu,stroke:vu,strokeWidth:5},trail:{color:vu,stroke:vu,strokeWidth:0,size:1},path:{stroke:vu,strokeWidth:.5},point:{filled:!0},text:{font:hSt,color:vu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:vu,stroke:null}},arc:{fill:vu},shape:{stroke:vu},symbol:{fill:vu,size:30}},dg="#3366CC",A2e="#ccc",jA="Arial, sans-serif",ySt={arc:{fill:dg},area:{fill:dg},path:{stroke:dg},rect:{fill:dg},shape:{stroke:dg},symbol:{stroke:dg},circle:{fill:dg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:jA,fontSize:12},"guide-title":{font:jA,fontSize:12},"group-title":{font:jA,fontSize:12}},title:{font:jA,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:A2e,tickColor:A2e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},hB=e=>e*(1/3+1),C2e=hB(9),k2e=hB(10),T2e=hB(12),Aw="Segoe UI",D2e="wf_standard-font, helvetica, arial, sans-serif",L2e="#252423",Cw="#605E5C",R2e="transparent",vSt="#C8C6C4",ac="#118DFF",bSt="#12239E",xSt="#E66C37",wSt="#6B007B",_St="#E044A7",ESt="#744EC2",SSt="#D9B300",ASt="#D64550",u$e=ac,c$e="#DEEFFF",F2e=[c$e,u$e],CSt=[c$e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",u$e],kSt={view:{stroke:R2e},background:R2e,font:Aw,header:{titleFont:D2e,titleFontSize:T2e,titleColor:L2e,labelFont:Aw,labelFontSize:k2e,labelColor:Cw},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Cw,labelFontSize:C2e,titleFont:D2e,titleColor:L2e,titleFontSize:T2e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:vSt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ac},line:{stroke:ac,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Aw,fontSize:C2e,fill:Cw},arc:{fill:ac},area:{fill:ac,line:!0,opacity:.6},path:{stroke:ac},rect:{fill:ac},point:{fill:ac,filled:!0,size:75},shape:{stroke:ac},symbol:{fill:ac,strokeWidth:1.5,size:50},legend:{titleFont:Aw,titleFontWeight:"bold",titleColor:Cw,labelFont:Aw,labelFontSize:k2e,labelColor:Cw,symbolType:"circle",symbolSize:75},range:{category:[ac,bSt,xSt,wSt,_St,ESt,SSt,ASt],diverging:F2e,heatmap:F2e,ordinal:CSt}},kO='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',TSt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',TO=400,UA={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},DSt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],LSt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function xR({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=UA.gridBg[e],i=UA.textPrimary[e],s=UA.textSecondary[e],o=n==="dark"?DSt:LSt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:kO,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:TSt,labelFontWeight:TO,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:UA.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:kO,fill:s,fontWeight:TO},"guide-title":{font:kO,fill:s,fontWeight:TO}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const RSt=xR({theme:"white",background:"#ffffff"}),FSt=xR({theme:"g10",background:"#f4f4f4"}),OSt=xR({theme:"g90",background:"#262626"}),MSt=xR({theme:"g100",background:"#161616"}),$St=QEt.version,ISt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:FSt,carbong100:MSt,carbong90:OSt,carbonwhite:RSt,dark:eSt,excel:tSt,fivethirtyeight:iSt,ggplot2:sSt,googlecharts:ySt,latimes:uSt,powerbi:kSt,quartz:cSt,urbaninstitute:gSt,version:$St,vox:fSt},Symbol.toStringTag,{value:"Module"}));function PSt(e,t,n,r){if(at(e))return`[${e.map(i=>t(Nt(i)?i:O2e(i,n))).join(", ")}]`;if($t(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let f=a[u];f!==void 0&&($t(f)&&(f=O2e(f,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function NSt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function O2e(e,t){return JSON.stringify(e,NSt(t))}var BSt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const f$e="vg-tooltip-element",zSt={offsetX:10,offsetY:10,id:f$e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:jSt,maxDepth:2,formatTooltip:PSt,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function jSt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function USt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return BSt.toString().replace(f$e,e)}function d$e(e,t,{offsetX:n,offsetY:r}){const i=h$e({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),s=["bottom-right","bottom-left","top-right","top-left"];for(const o of s)if(p$e(i[o],t))return i[o];return i["top-left"]}function qSt(e,t,n,r,i){const{position:s,offsetX:o,offsetY:a}=i,l=e._el.getBoundingClientRect(),u=e._origin,f=HSt(l,u,n),c=h$e(f,r,o,a),d=Array.isArray(s)?s:[s];for(const h of d)if(p$e(c[h],r)&&!GSt(t,c[h],r))return c[h];return d$e(t,r,i)}function HSt(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,s=e.top+t[1]+r.y1,o=n;for(;o.mark.group;)o=o.mark.group,i+=o.x??0,s+=o.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:s,y2:s+l}}function h$e(e,t,n,r){const i=(e.x1+e.x2)/2,s=(e.y1+e.y2)/2,o=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,u=e.y1-t.height-r,f=s-t.height/2,c=e.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:c},left:{x:o,y:f},right:{x:l,y:f},"top-left":{x:o,y:u},"top-right":{x:l,y:u},"bottom-left":{x:o,y:c},"bottom-right":{x:l,y:c}}}function p$e(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function GSt(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class VSt{constructor(t){this.options={...zSt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=USt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=this.options.anchor==="mark"?qSt(t,n,r,this.el.getBoundingClientRect(),this.options):d$e(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var DO={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var WSt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YSt=Object.prototype.hasOwnProperty;function i$(e,t){return YSt.call(e,t)}function s$(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)i$(e,i)&&r.push(i);return r}function Ql(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function o$(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Eg(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function m$e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function a$(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(a$(e[t]))return!0}else if(typeof e=="object"){for(var r=s$(e),i=r.length,s=0;s<i;s++)if(a$(e[r[s]]))return!0}}return!1}function M2e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var g$e=function(e){WSt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,M2e(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=M2e(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),ks=g$e,XSt=Ql,yv={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Hk(n,this.path);r&&(r=Ql(r));var i=Vg(n,{op:"remove",path:this.from}).removed;return Vg(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Hk(n,this.from);return Vg(n,{op:"add",path:this.path,value:Ql(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:k2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ZSt={add:function(e,t,n){return o$(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:yv.move,copy:yv.copy,test:yv.test,_get:yv._get};function Hk(e,t){if(t=="")return e;var n={op:"_get",path:t};return Vg(e,n),n.value}function Vg(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Gk(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Hk(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=k2(e,t.value),o.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ks("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ql(e));var a=t.path||"",l=a.split("/"),u=e,f=1,c=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Gk;;){if(h=l[f],h&&h.indexOf("~")!=-1&&(h=m$e(h)),i&&(h=="__proto__"||h=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,f).join("/"):f==c-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),f++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!o$(h))throw new ks("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);o$(h)&&(h=~~h)}if(f>=c){if(n&&t.op==="add"&&h>u.length)throw new ks("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=ZSt[t.op].call(t,u,h,e);if(o.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(f>=c){var o=yv[t.op].call(t,u,h,e);if(o.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&f<c&&(!u||typeof u!="object"))throw new ks("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function wR(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ks("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ql(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Vg(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function KSt(e,t,n){var r=Vg(e,t);if(r.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Gk(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ks("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(yv[e.op]){if(typeof e.path!="string")throw new ks("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ks('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ks("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ks("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&a$(e.value))throw new ks("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ks("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ks("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=y$e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ks("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ks("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function y$e(e,t,n){try{if(!Array.isArray(e))throw new ks("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)wR(Ql(t),Ql(e),n||!0);else{n=n||Gk;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ks)return i;throw i}}function k2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!k2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!k2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var JSt=Object.freeze({__proto__:null,JsonPatchError:ks,_areEquals:k2,applyOperation:Vg,applyPatch:wR,applyReducer:KSt,deepClone:XSt,getValueByPointer:Hk,validate:y$e,validator:Gk});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var pB=new WeakMap,QSt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),eAt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function tAt(e){return pB.get(e)}function nAt(e,t){return e.observers.get(t)}function rAt(e,t){e.observers.delete(t.callback)}function iAt(e,t){t.unobserve()}function sAt(e,t){var n=[],r,i=tAt(e);if(!i)i=new QSt(e),pB.set(e,i);else{var s=nAt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ql(e),t){r.callback=t,r.next=null;var o=function(){l$(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){l$(r),clearTimeout(r.next),rAt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new eAt(t,r)),r}function l$(e,t){t===void 0&&(t=!1);var n=pB.get(e.object);mB(n.value,e.object,e.patches,"",t),e.patches.length&&wR(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function mB(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=s$(t),o=s$(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],f=e[u];if(i$(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var c=t[u];typeof f=="object"&&f!=null&&typeof c=="object"&&c!=null&&Array.isArray(f)===Array.isArray(c)?mB(f,c,n,r+"/"+Eg(u),i):f!==c&&(i&&n.push({op:"test",path:r+"/"+Eg(u),value:Ql(f)}),n.push({op:"replace",path:r+"/"+Eg(u),value:Ql(c)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Eg(u),value:Ql(f)}),n.push({op:"remove",path:r+"/"+Eg(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!i$(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Eg(u),value:Ql(t[u])})}}}function oAt(e,t,n){n===void 0&&(n=!1);var r=[];return mB(e,t,r,"",n),r}var aAt=Object.freeze({__proto__:null,compare:oAt,generate:l$,observe:sAt,unobserve:iAt});Object.assign({},JSt,aAt,{JsonPatchError:g$e,deepClone:Ql,escapePathComponent:Eg,unescapePathComponent:m$e});function lAt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LO,$2e;function uAt(){if($2e)return LO;$2e=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,r)}return this}}return LO=e,LO}var RO,I2e;function gB(){if(I2e)return RO;I2e=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return RO=r=>r?typeof r!="object"?e:r:t,RO}var qA={exports:{}},FO,P2e;function yB(){if(P2e)return FO;P2e=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return FO={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},FO}var OO,N2e;function _R(){return N2e||(N2e=1,OO=typeof process=="object"&&DO&&DO.NODE_DEBUG&&/\bsemver\b/i.test(DO.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),OO}var B2e;function vB(){return B2e||(B2e=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=yB(),s=_R();t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let f=0;const c="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[c,r]],h=g=>{for(const[v,y]of d)g=g.split(`${v}*`).join(`${v}{0,${y}}`).split(`${v}+`).join(`${v}{1,${y}}`);return g},p=(g,v,y)=>{const b=h(v),w=f++;s(g,w,v),u[g]=w,l[w]=v,o[w]=new RegExp(v,y?"g":void 0),a[w]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${c}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(qA,qA.exports)),qA.exports}var MO,z2e;function cAt(){if(z2e)return MO;z2e=1;const e=/^[0-9]+$/,t=(r,i)=>{const s=e.test(r),o=e.test(i);return s&&o&&(r=+r,i=+i),r===i?0:s&&!o?-1:o&&!s?1:r<i?-1:1};return MO={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},MO}var $O,j2e;function bB(){if(j2e)return $O;j2e=1;const e=_R(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=yB(),{safeRe:r,t:i}=vB(),s=gB(),{compareIdentifiers:o}=cAt();class a{constructor(u,f){if(f=s(f),u instanceof a){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const c=u.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!c)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<n)return h}return d}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const c=this.prerelease[f],d=u.prerelease[f];if(e("prerelease compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return o(c,d)}while(++f)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let f=0;do{const c=this.build[f],d=u.build[f];if(e("build compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return o(c,d)}while(++f)}inc(u,f,c){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,c),this.inc("pre",f,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,c),this.inc("pre",f,c);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(c)?1:0;if(!f&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(f===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(f){let h=[f,d];c===!1&&(h=[f]),o(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return $O=a,$O}var IO,U2e;function vb(){if(U2e)return IO;U2e=1;const e=bB();return IO=(n,r,i)=>new e(n,i).compare(new e(r,i)),IO}var PO,q2e;function fAt(){if(q2e)return PO;q2e=1;const e=vb();return PO=(n,r,i)=>e(n,r,i)===0,PO}var NO,H2e;function dAt(){if(H2e)return NO;H2e=1;const e=vb();return NO=(n,r,i)=>e(n,r,i)!==0,NO}var BO,G2e;function hAt(){if(G2e)return BO;G2e=1;const e=vb();return BO=(n,r,i)=>e(n,r,i)>0,BO}var zO,V2e;function pAt(){if(V2e)return zO;V2e=1;const e=vb();return zO=(n,r,i)=>e(n,r,i)>=0,zO}var jO,W2e;function mAt(){if(W2e)return jO;W2e=1;const e=vb();return jO=(n,r,i)=>e(n,r,i)<0,jO}var UO,Y2e;function gAt(){if(Y2e)return UO;Y2e=1;const e=vb();return UO=(n,r,i)=>e(n,r,i)<=0,UO}var qO,X2e;function yAt(){if(X2e)return qO;X2e=1;const e=fAt(),t=dAt(),n=hAt(),r=pAt(),i=mAt(),s=gAt();return qO=(a,l,u,f)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,f);case"!=":return t(a,u,f);case">":return n(a,u,f);case">=":return r(a,u,f);case"<":return i(a,u,f);case"<=":return s(a,u,f);default:throw new TypeError(`Invalid operator: ${l}`)}},qO}var HO,Z2e;function vAt(){if(Z2e)return HO;Z2e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,c){if(c=n(c),f instanceof t){if(f.loose===!!c.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),o("comparator",f,c),this.options=c,this.loose=!!c.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(f){const c=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=f.match(c);if(!d)throw new TypeError(`Invalid comparator: ${f}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(o("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return s(f,this.operator,this.semver,this.options)}intersects(f,c){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,c).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,c).test(f.semver):(c=n(c),c.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||s(this.semver,"<",f.semver,c)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||s(this.semver,">",f.semver,c)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}HO=t;const n=gB(),{safeRe:r,t:i}=vB(),s=yAt(),o=_R(),a=bB(),l=v$e();return HO}var GO,K2e;function v$e(){if(K2e)return GO;K2e=1;const e=/\s+/g;class t{constructor(I,U){if(U=i(U),I instanceof t)return I.loose===!!U.loose&&I.includePrerelease===!!U.includePrerelease?I:new t(I.raw,U);if(I instanceof s)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=I.trim().replace(e," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(Y=>!g(Y[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&v(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const U=this.set[I];for(let q=0;q<U.length;q++)q>0&&(this.formatted+=" "),this.formatted+=U[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const q=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+I,Y=r.get(q);if(Y)return Y;const X=this.options.loose,te=X?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];I=I.replace(te,K(this.options.includePrerelease)),o("hyphen replace",I),I=I.replace(l[u.COMPARATORTRIM],f),o("comparator trim",I),I=I.replace(l[u.TILDETRIM],c),o("tilde trim",I),I=I.replace(l[u.CARETTRIM],d),o("caret trim",I);let le=I.split(" ").map(de=>b(de,this.options)).join(" ").split(/\s+/).map(de=>B(de,this.options));X&&(le=le.filter(de=>(o("loose invalid filter",de,this.options),!!de.match(l[u.COMPARATORLOOSE])))),o("range list",le);const ee=new Map,z=le.map(de=>new s(de,this.options));for(const de of z){if(g(de))return[de];ee.set(de.value,de)}ee.size>1&&ee.has("")&&ee.delete("");const he=[...ee.values()];return r.set(q,he),he}intersects(I,U){if(!(I instanceof t))throw new TypeError("a Range is required");return this.set.some(q=>y(q,U)&&I.set.some(Y=>y(Y,U)&&q.every(X=>Y.every(te=>X.intersects(te,U)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new a(I,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(L(this.set[U],I,this.options))return!0;return!1}}GO=t;const n=uAt(),r=new n,i=gB(),s=vAt(),o=_R(),a=bB(),{safeRe:l,t:u,comparatorTrimReplace:f,tildeTrimReplace:c,caretTrimReplace:d}=vB(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=yB(),g=$=>$.value==="<0.0.0-0",v=$=>$.value==="",y=($,I)=>{let U=!0;const q=$.slice();let Y=q.pop();for(;U&&q.length;)U=q.every(X=>Y.intersects(X,I)),Y=q.pop();return U},b=($,I)=>(o("comp",$,I),$=T($,I),o("caret",$),$=E($,I),o("tildes",$),$=k($,I),o("xrange",$),$=O($,I),o("stars",$),$),w=$=>!$||$.toLowerCase()==="x"||$==="*",E=($,I)=>$.trim().split(/\s+/).map(U=>A(U,I)).join(" "),A=($,I)=>{const U=I.loose?l[u.TILDELOOSE]:l[u.TILDE];return $.replace(U,(q,Y,X,te,le)=>{o("tilde",$,q,Y,X,te,le);let ee;return w(Y)?ee="":w(X)?ee=`>=${Y}.0.0 <${+Y+1}.0.0-0`:w(te)?ee=`>=${Y}.${X}.0 <${Y}.${+X+1}.0-0`:le?(o("replaceTilde pr",le),ee=`>=${Y}.${X}.${te}-${le} <${Y}.${+X+1}.0-0`):ee=`>=${Y}.${X}.${te} <${Y}.${+X+1}.0-0`,o("tilde return",ee),ee})},T=($,I)=>$.trim().split(/\s+/).map(U=>D(U,I)).join(" "),D=($,I)=>{o("caret",$,I);const U=I.loose?l[u.CARETLOOSE]:l[u.CARET],q=I.includePrerelease?"-0":"";return $.replace(U,(Y,X,te,le,ee)=>{o("caret",$,Y,X,te,le,ee);let z;return w(X)?z="":w(te)?z=`>=${X}.0.0${q} <${+X+1}.0.0-0`:w(le)?X==="0"?z=`>=${X}.${te}.0${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.0${q} <${+X+1}.0.0-0`:ee?(o("replaceCaret pr",ee),X==="0"?te==="0"?z=`>=${X}.${te}.${le}-${ee} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}-${ee} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le}-${ee} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?te==="0"?z=`>=${X}.${te}.${le}${q} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le} <${+X+1}.0.0-0`),o("caret return",z),z})},k=($,I)=>(o("replaceXRanges",$,I),$.split(/\s+/).map(U=>R(U,I)).join(" ")),R=($,I)=>{$=$.trim();const U=I.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return $.replace(U,(q,Y,X,te,le,ee)=>{o("xRange",$,q,Y,X,te,le,ee);const z=w(X),he=z||w(te),de=he||w(le),ze=de;return Y==="="&&ze&&(Y=""),ee=I.includePrerelease?"-0":"",z?Y===">"||Y==="<"?q="<0.0.0-0":q="*":Y&&ze?(he&&(te=0),le=0,Y===">"?(Y=">=",he?(X=+X+1,te=0,le=0):(te=+te+1,le=0)):Y==="<="&&(Y="<",he?X=+X+1:te=+te+1),Y==="<"&&(ee="-0"),q=`${Y+X}.${te}.${le}${ee}`):he?q=`>=${X}.0.0${ee} <${+X+1}.0.0-0`:de&&(q=`>=${X}.${te}.0${ee} <${X}.${+te+1}.0-0`),o("xRange return",q),q})},O=($,I)=>(o("replaceStars",$,I),$.trim().replace(l[u.STAR],"")),B=($,I)=>(o("replaceGTE0",$,I),$.trim().replace(l[I.includePrerelease?u.GTE0PRE:u.GTE0],"")),K=$=>(I,U,q,Y,X,te,le,ee,z,he,de,ze)=>(w(q)?U="":w(Y)?U=`>=${q}.0.0${$?"-0":""}`:w(X)?U=`>=${q}.${Y}.0${$?"-0":""}`:te?U=`>=${U}`:U=`>=${U}${$?"-0":""}`,w(z)?ee="":w(he)?ee=`<${+z+1}.0.0-0`:w(de)?ee=`<${z}.${+he+1}.0-0`:ze?ee=`<=${z}.${he}.${de}-${ze}`:$?ee=`<${z}.${he}.${+de+1}-0`:ee=`<=${ee}`,`${U} ${ee}`.trim()),L=($,I,U)=>{for(let q=0;q<$.length;q++)if(!$[q].test(I))return!1;if(I.prerelease.length&&!U.includePrerelease){for(let q=0;q<$.length;q++)if(o($[q].semver),$[q].semver!==s.ANY&&$[q].semver.prerelease.length>0){const Y=$[q].semver;if(Y.major===I.major&&Y.minor===I.minor&&Y.patch===I.patch)return!0}return!1}return!0};return GO}var VO,J2e;function bAt(){if(J2e)return VO;J2e=1;const e=v$e();return VO=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},VO}var xAt=bAt(),b$e=lAt(xAt);function wAt(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function l(f){f.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var _At=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function x$e(e,...t){for(const n of t)EAt(e,n);return e}function EAt(e,t){for(const n of Object.keys(t))Q1(e,n,t[n],!0)}const ff=_0t;let T2=MEt;const HA=typeof window<"u"?window:void 0;var vCe;T2===void 0&&((vCe=HA==null?void 0:HA.vl)!=null&&vCe.compile)&&(T2=HA.vl);const SAt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},AAt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},i_={vega:"Vega","vega-lite":"Vega-Lite"},Vk={vega:ff.version,"vega-lite":T2?T2.version:"not available"},CAt={vega:e=>e,"vega-lite":(e,t)=>T2.compile(e,{config:t}).spec},kAt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,TAt="chart-wrapper";function DAt(e){return typeof e=="function"}function Q2e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${i_[r]} JSON Source`}function LAt(e,t){if(e.$schema){const n=l$e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${i_[n.library]}, but mode argument sets ${i_[t]??t}.`);const r=n.library;return b$e(Vk[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${i_[r]} ${n.version}, but the current version of ${i_[r]} is v${Vk[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function w$e(e){return!!(e&&"load"in e)}function eEe(e){return w$e(e)?e:ff.loader(e)}function RAt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Nt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function FAt(e,t,n={}){let r,i;Nt(t)?(i=eEe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=RAt(r),o=s.loader;(!i||o)&&(i=eEe(n.loader??o));const a=await tEe(s,i),l=await tEe(n,i),u={...x$e(l,a),config:J1(l.config??{},a.config??{})};return await MAt(e,r,u,i)}async function tEe(e,t){const n=Nt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Nt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function OAt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function MAt(e,t,n={},r){const i=n.theme?J1(ISt[n.theme],n.config??{}):n.config,s=lm(n.actions)?n.actions:x$e({},SAt,n.actions??{}),o={...AAt,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??ff.Warn,u=n.downloadFileName??"visualization",f=typeof e=="string"?document.querySelector(e):e;if(!f)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const A="vega-embed-style",{root:T,rootContainer:D}=OAt(f);if(!T.getElementById(A)){const k=document.createElement("style");k.id=A,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?_At.toString():n.defaultStyle,D.appendChild(k)}}const c=LAt(t,n.mode);let d=CAt[c](t,i);if(c==="vega-lite"&&d.$schema){const A=l$e(d.$schema);b$e(Vk.vega,`^${A.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${A.version}, but current version is v${Vk.vega}.`)}f.classList.add("vega-embed"),s&&f.classList.add("has-actions"),f.innerHTML="";let h=f;if(s){const A=document.createElement("div");A.classList.add(TAt),f.appendChild(A),h=A}const p=n.patch;if(p&&(d=p instanceof Function?p(d):wR(d,p,!0,!1).newDocument),n.formatLocale&&ff.formatLocale(n.formatLocale),n.timeFormatLocale&&ff.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const A in n.expressionFunctions){const T=n.expressionFunctions[A];"fn"in T?ff.expressionFunction(A,T.fn,T.visitor):T instanceof Function&&ff.expressionFunction(A,T)}const{ast:g}=n,v=ff.parse(d,c==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||ff.View)(v,{loader:r,logLevel:l,renderer:a,...g?{expr:ff.expressionInterpreter??n.expr??F0t}:{}});if(y.addSignalListener("autosize",(A,T)=>{const{type:D}=T;D=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):D=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):D=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:A,tooltip:T}=n,D=A&&!w$e(A)?A==null?void 0:A.baseURL:void 0,k=DAt(T)?T:new VSt({baseURL:D,...T===!0?{}:T}).call;y.tooltip(k)}let{hover:b}=n;if(b===void 0&&(b=c==="vega"),b){const{hoverSet:A,updateSet:T}=typeof b=="boolean"?{}:b;y.hover(A,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let w;if(s!==!1){let A=f;if(n.defaultStyle!==!1||n.forceActionsMenu){const D=document.createElement("details");D.title=o.CLICK_TO_VIEW_ACTIONS,f.append(D),A=D;const k=document.createElement("summary");k.innerHTML=kAt,D.append(k),w=R=>{D.contains(R.target)||D.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if(A.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){const k=o[`${D.toUpperCase()}_ACTION`],R=document.createElement("a"),O=$t(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;R.text=k,R.href="#",R.target="_blank",R.download=`${u}.${D}`,R.addEventListener("mousedown",async function(B){B.preventDefault();const K=await y.toImageURL(D,O);this.href=K}),T.append(R)}}if(s===!0||s.source!==!1){const D=document.createElement("a");D.text=o.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(k){Q2e(pF(t),n.sourceHeader??"",n.sourceFooter??"",c),k.preventDefault()}),T.append(D)}if(c==="vega-lite"&&(s===!0||s.compiled!==!1)){const D=document.createElement("a");D.text=o.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(k){Q2e(pF(d),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),T.append(D)}if(s===!0||s.editor!==!1){const D=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=o.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(R){wAt(window,D,{config:i,mode:p?"vega":c,renderer:a,spec:pF(p?d:t)}),R.preventDefault()}),T.append(k)}}function E(){w&&document.removeEventListener("click",w),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:E,embedOptions:n}}const bm={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};bm.defaultMerge;function $At(e,t){return t}function IAt(e,t){return e.filter(n=>n!==void 0)}var nEe;(function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"})(nEe||(nEe={}));function rEe(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:BAt(e)?1:e instanceof Set?3:e instanceof Map?4:5}function PAt(e){const t=new Set;for(const n of e)for(const r of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(r);return t}function NAt(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function _$e(e){var r;let t=0,n=(r=e[0])==null?void 0:r[Symbol.iterator]();return{[Symbol.iterator](){return{next(){var i;do{if(n===void 0)return{done:!0,value:void 0};const s=n.next();if(s.done===!0){t+=1,n=(i=e[t])==null?void 0:i[Symbol.iterator]();continue}return{done:!1,value:s.value}}while(!0)}}}}}const iEe=["[object Object]","[object Module]"];function BAt(e){if(!iEe.includes(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(t===void 0)return!0;const n=t.prototype;return!(n===null||typeof n!="object"||!iEe.includes(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function zAt(e,t,n){const r={};for(const i of PAt(e)){const s=[];for(const l of e)NAt(l,i)&&s.push(l[i]);if(s.length===0)continue;const o=t.metaDataUpdater(n,{key:i,parents:e}),a=E$e(s,t,o);a!==bm.skip&&(i==="__proto__"?Object.defineProperty(r,i,{value:a,configurable:!0,enumerable:!0,writable:!0}):r[i]=a)}return r}function jAt(e){return e.flat()}function UAt(e){return new Set(_$e(e))}function qAt(e){return new Map(_$e(e))}function HAt(e){return e.at(-1)}const GA={mergeRecords:zAt,mergeArrays:jAt,mergeSets:UAt,mergeMaps:qAt,mergeOthers:HAt};function GAt(...e){return VAt({})(...e)}function VAt(e,t){const n=WAt(e,r);function r(...i){return E$e(i,n,t)}return r}function WAt(e,t){return{defaultMergeFunctions:GA,mergeFunctions:{...GA,...Object.fromEntries(Object.entries(e).filter(([n,r])=>Object.hasOwn(GA,n)).map(([n,r])=>r===!1?[n,GA.mergeOthers]:[n,r]))},metaDataUpdater:e.metaDataUpdater??$At,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,filterValues:e.filterValues===!1?void 0:e.filterValues??IAt,actions:bm}}function E$e(e,t,n){var s;const r=((s=t.filterValues)==null?void 0:s.call(t,e,n))??e;if(r.length===0)return;if(r.length===1)return WO(r,t,n);const i=rEe(r[0]);if(i!==0&&i!==5){for(let o=1;o<r.length;o++)if(rEe(r[o])!==i)return WO(r,t,n)}switch(i){case 1:return YAt(r,t,n);case 2:return XAt(r,t,n);case 3:return ZAt(r,t,n);case 4:return KAt(r,t,n);default:return WO(r,t,n)}}function YAt(e,t,n){const r=t.mergeFunctions.mergeRecords(e,t,n);return r===bm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):r}function XAt(e,t,n){const r=t.mergeFunctions.mergeArrays(e,t,n);return r===bm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):r}function ZAt(e,t,n){const r=t.mergeFunctions.mergeSets(e,t,n);return r===bm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):r}function KAt(e,t,n){const r=t.mergeFunctions.mergeMaps(e,t,n);return r===bm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):r}function WO(e,t,n){const r=t.mergeFunctions.mergeOthers(e,t,n);return r===bm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):r}const JAt={width:"container",height:"container",autosize:"fit",resize:!0},QAt=(e,t,n)=>{const r=GAt(JAt,t);FAt(e.renderRoot.querySelector("#vis"),r).then(i=>{n&&(Object.keys(n).forEach(s=>{i.view.insert(s,n[s])}),i.view.run())})};class S$e extends Zr{constructor(){super(),this.spec=void 0,this.dataValues=void 0,this.noShadow=!1,this.unstyled=!1}async updated(t){(t.has("spec")||t.has("dataValues"))&&QAt(this,this.spec,this.dataValues)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Qe`
      <style>
        ${LKe}
        ${!this.unstyled&&kD}
        ${!this.unstyled&&RKe}
      </style>
      <div id="vis"></div>
    `}}tn(S$e,"properties",{dataValues:{attribute:!1,type:Object},spec:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-chart",S$e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eCt=J2(class extends iD{constructor(){super(...arguments),this.key=Xr}render(e,t){return this.key=e,t}update(e,[t,n]){return t!==this.key&&(rI(e),this.key=t),n}}),tCt=e=>{e.hoverInteraction=e.eoxMap.selectInteractions.selectHover,e.clickInteraction=e.eoxMap.selectInteractions.selectClick;const t=()=>{e.requestUpdate()};e.hoverInteraction.selectStyleLayer.on("change",t),e.clickInteraction.selectStyleLayer.on("change",t)},nCt=(e,t,n)=>{if(e.clickId===t)return;const r=n?[]:[t];e.hoverInteraction.highlightById(r)},rCt=(e,t)=>{e.stopPropagation();const n=Number(e.target.getAttribute("index")),r=t.drawnFeatures[n];t.drawLayer.getSource().removeFeature(r),t.drawnFeatures.splice(n,1),t.requestUpdate()},iCt=(e,t)=>{const n=e.getId(),{clickId:r,drawLayer:i,olMap:s,clickInteraction:o}=t,a=r===n,l=e.getGeometry();if(a){const u=i.getSource().getExtent();s.getView().fit(u,zve),o.highlightById([])}else{const u=l.getExtent();o.highlightById([n]),s.getView().fit(u,zve)}t.requestUpdate()},sCt="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class A$e extends Zr{constructor(){super();tn(this,"hoverInteraction");tn(this,"clickInteraction");tn(this,"hoverId");tn(this,"clickId");this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.unstyled=!1}_handleDelete(n){rCt(n,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(n){iCt(n,this)}_handleHoverFeature(n,r=!1){nCt(this,n,r)}firstUpdated(){tCt(this)}createRenderRoot(){return this}render(){var n,r;return this.hoverId=(n=this.hoverInteraction)==null?void 0:n.selectedFids[0],this.clickId=(r=this.clickInteraction)==null?void 0:r.selectedFids[0],Qe`
      <style>
        ${!this.unstyled&&sCt}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((i,s)=>{const o=s+1,a=i.getId(),l=this.hoverId===a,u=this.clickId===a;return eCt(o,Qe`
              <li
                class="${l||u?"selected":Xr}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(i)}"
                >
                  <span class="title">Feature #${o}</span>
                  <button
                    index=${s}
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}tn(A$e,"properties",{eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",A$e);const oCt=e=>{const{multipleFeatures:t,drawnFeatures:n,currentlyDrawing:r}=e,i=!t&&(n==null?void 0:n.length)>0||r,s=!(n!=null&&n.length)&&!r;return{drawDisabled:i,discardDisabled:s}},eS="button,.button { /* TODO: why does this only work here and not from :root? */ --primary-color: #004170; --primary-color-hover: #004170cc; --error-color: #ff5252; display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0px;}",aCt='textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input,input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004; background-color: var(--background-color);}';function lCt(e){navigator.clipboard.writeText(e).then(function(){},function(t){console.error("Could not copy text: ",t)})}const uCt=(e,t)=>new lD().writeFeaturesObject(e,t),cCt=(e,t)=>new M3e().writeFeatures(e,t);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Un(e,t,n){return e?t(e):n==null?void 0:n(e)}var H2,G2;class C$e extends Zr{constructor(){super();yn(this,H2,!0);yn(this,G2,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1,this.select=!1}updateButtonStates(){const{drawDisabled:n,discardDisabled:r}=oCt(this);as(this,H2,n),as(this,G2,r)}createRenderRoot(){return this}render(){this.updateButtonStates();const n=this.currentlyDrawing?"drawing":"draw";return Qe`
      <style>
        ${!this.unstyled&&eS}
        ${!this.unstyled&&aCt}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="${this.select?"pointer":"polygon"} icon"
            ?disabled="${Gt(this,H2)||Xr}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${n}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${Gt(this,G2)||Xr}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${Un(this.importFeatures,()=>Qe`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${Un(this.showEditor,()=>Qe`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>lCt(this.geoJSON)}
            >
              ${this.unstyled?"copy":Xr}
            </button>
          </div>
        `)}
    `}}H2=new WeakMap,G2=new WeakMap,tn(C$e,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},select:{type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",C$e);const fCt=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.pointer:before {
    content:  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Ecursor-default-click%3C/title%3E%3Cpath d='M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10' /%3E%3C/svg%3E");
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,dCt=e=>{(()=>{e.emitDrawnFeatures(),e.multipleFeatures||(e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.currentlyDrawing=!1)})(),e.requestUpdate()},hCt=e=>{const t=()=>{e.drawLayer.set("isDrawingEnabled",!0),e.draw.setActive(!0),e.selectionEvents.addSelectionEvent()},n=()=>{e.currentlyDrawing=!0,e.requestUpdate()};t(),n()},sEe=(e,t)=>{var s;const r=K_(e.for),i=r.map;return e.drawLayer=r.addOrUpdateLayer({zIndex:100,type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:t},source:{type:"Vector"},interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:e.type,modify:e.allowModify,stopClick:!0}},{type:"select",options:{id:"selectHover",condition:"pointermove",style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5},tooltip:!1}},{type:"select",options:{id:"selectClick",condition:"click",panIn:!0,style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),e.draw=r.interactions.drawInteraction,e.modify=r.interactions.drawInteractionmodify,u$(e,r,e.layerId),(s=e.modify)==null||s.on("modifyend",()=>e.onModifyEnd()),r.addEventListener("addfeatures",()=>dCt(e)),{EoxMap:r,OlMap:i}},pCt=e=>{const t=()=>{e.drawnFeatures=[],e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.drawLayer.getSource().clear(),e.geoJSON=null},n=()=>{e.emitDrawnFeatures(),e.currentlyDrawing=!1,e.requestUpdate()};t(),n()},mCt=(e,t)=>{setTimeout(()=>{const r=e.drawLayer.getSource().getFeatures(),i=e.eoxMap.projection||"EPSG:3857",s=e.projection;e.drawnFeatures=s?r.map(a=>{a=a.clone();const l=a.getGeometry().transform(i,s);return a.setGeometry(l),a}):r;let o;switch(e.format){case"geojson":o=uCt(e.drawnFeatures);break;case"wkt":o=cCt(e.drawnFeatures);break;case"feature":o=e.drawnFeatures;break;default:o=e.drawnFeatures;break}e.updateGeoJSON(),e.requestUpdate(),t(o)},0)},gCt=e=>{const t=i=>{(i==null?void 0:i.detail.id)!=="SelectLayerClickInteraction"||!i.detail.feature||(e.drawLayer.getSource().addFeature(i.detail.feature),e.eoxMap.dispatchEvent(new CustomEvent("addfeatures",{detail:i.detail})))};return{addSelectionEvent:()=>{e.layerId&&(e.eoxMap.selectInteractions.SelectLayerHoverInteraction.setActive(!0),e.eoxMap.addEventListener("select",t))},removeSelectionEvent:()=>{var s;const i=(s=e.eoxMap.selectInteractions)==null?void 0:s.SelectLayerHoverInteraction;i&&(i.selectedFids=[],i.setActive(!1)),e.eoxMap.removeEventListener("select",t)}}},u$=(e,t,n)=>{if(!n||!t)return;const r=JSON.parse(JSON.stringify(t.getLayerById(n).get("_jsonDefinition")))||null;if(!r){console.error(`Layer with id ${n} not found`);return}const i={type:"select",active:!1,options:{id:"SelectLayerHoverInteraction",condition:"pointermove",active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"#3399CC","stroke-width":2.5}}},s={type:"select",options:{id:"SelectLayerClickInteraction",condition:"click",multi:e.multipleFeatures,modify:e.allowModify,active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"rgba(0, 0, 0,0.0)"}}};r.interactions=[i,s],t.addOrUpdateLayer(r);const o=e.draw;e.draw=t.selectInteractions.SelectLayerClickInteraction,o.setActive(!1),t.selectInteractions.SelectLayerClickInteraction.setActive(!1),t.selectInteractions.SelectLayerHoverInteraction.setActive(!1)},yCt=(e,t,n,r)=>{if(t){if(n){r&&n!==r&&oEe(e,t),u$(e,t,n);return}if(!n&&r){oEe(e,t);return}}};function oEe(e,t){t&&(e.discardDrawing(),e.selectionEvents.removeSelectionEvent(),e.draw=t.interactions.drawInteraction,t.selectInteractions.SelectLayerClickInteraction.remove(),t.selectInteractions.SelectLayerHoverInteraction.remove())}const ER=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, transparent); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}';function vCt(e,t){function n(s){s.preventDefault(),s.stopPropagation()}function r(s){s.srcElement.style.opacity="0.4"}function i(s){s.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(s=>{t.addEventListener(s,n,!1),["dragenter","dragover"].includes(s)?t.addEventListener(s,r,!1):t.addEventListener(s,i,!1)}),t.addEventListener("drop",s=>k$e(s,e),!1)}function bCt(e){e.preventDefault(),e.stopPropagation()}function k$e(e,t){bCt(e);const n=e.dataTransfer?e.dataTransfer.files:e.target.files;Array.from(n).forEach(r=>xCt(r,t))}function xCt(e,t){const n=new FileReader;n.readAsText(e),n.onloadend=function(){typeof n.result=="string"&&t.handleFeatureChange(n.result)}}var Nv,Bv,V2,zv;class wCt extends Zr{constructor(){super();yn(this,Nv);yn(this,Bv);yn(this,V2);yn(this,zv);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.layerId="",this.drawnFeatures=[],this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.projection="EPSG:4326",this.type="Polygon",this.selectionEvents=null,this.format="feature",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},layerId:{attribute:"layer-id",type:String},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},projection:{type:String},noShadow:{type:Boolean},format:{type:String},type:{type:String},unstyled:{type:Boolean}}}set layerId(n){yCt(this,this.eoxMap,n,Gt(this,zv)),as(this,zv,n)}get layerId(){return Gt(this,zv)}startDrawing(){hCt(this)}discardDrawing(){pCt(this)}handleFeatureChange(n,r=!1){this.eoxMap.parseTextToFeature(n||JSON.stringify(jve),this.drawLayer,this.eoxMap,r)}handleFilesChange(n){k$e(n,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){as(this,V2,JSON.stringify(this.eoxMap.parseFeature(this.drawnFeatures)||jve,void 0,2))}emitDrawnFeatures(){mCt(this,r=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:r}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:n,OlMap:r}=sEe(this,this.multipleFeatures);this.eoxMap=n,as(this,Bv,r),this.selectionEvents=gCt(this),this.importFeatures&&vCt(this,this.eoxMap),this.updateGeoJSON(),this.requestUpdate()}updated(n){if(n.has("for")){const{EoxMap:r,OlMap:i}=sEe(this,this.multipleFeatures);this.eoxMap=r,as(this,Bv,i)}}get eoxMap(){return Gt(this,Nv)}set eoxMap(n){const r=Gt(this,Nv);as(this,Nv,n),this.requestUpdate("eoxMap",r)}disconnectedCallback(){var n;(n=this.eoxMap)==null||n.map.removeLayer(this.drawLayer),super.disconnectedCallback()}render(){var n;return Qe`
      <style>
        :host { display: block; }
        ${!this.unstyled&&ER}
        ${!this.unstyled&&fCt}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.startDrawing(),discard:()=>this.discardDrawing(),editor:r=>this.handleFeatureChange(r.target.value,!0),import:r=>this.handleFilesChange(r)}}
        ?select=${!!this.layerId}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${Gt(this,V2)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((n=this.drawnFeatures)!=null&&n.length)?Qe`<eox-drawtools-list
            .eoxMap=${this.eoxMap}
            .olMap=${Gt(this,Bv)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:Xr}
    `}}Nv=new WeakMap,Bv=new WeakMap,V2=new WeakMap,zv=new WeakMap;customElements.define("eox-drawtools",wCt);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Wk=class extends iD{constructor(t){if(super(t),this.it=Xr,t.type!==np.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===Xr||t==null)return this._t=void 0,this.it=t;if(t===lv)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const n=[t];return n.raw=n,this._t={_$litType$:this.constructor.resultType,strings:n,values:[]}}};Wk.directiveName="unsafeHTML",Wk.resultType=1;const Sc=J2(Wk);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class c$ extends Wk{}c$.directiveName="unsafeSVG",c$.resultType=2;const _Ct=J2(c$);var YO,aEe;function ECt(){if(aEe)return YO;aEe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,h=Math.max,p=Math.min,g=function(){return f.Date.now()};function v(A,T,D){var k,R,O,B,K,L,$=0,I=!1,U=!1,q=!0;if(typeof A!="function")throw new TypeError(e);T=E(T)||0,y(D)&&(I=!!D.leading,U="maxWait"in D,O=U?h(E(D.maxWait)||0,T):O,q="trailing"in D?!!D.trailing:q);function Y(He){var je=k,we=R;return k=R=void 0,$=He,B=A.apply(we,je),B}function X(He){return $=He,K=setTimeout(ee,T),I?Y(He):B}function te(He){var je=He-L,we=He-$,Ie=T-je;return U?p(Ie,O-we):Ie}function le(He){var je=He-L,we=He-$;return L===void 0||je>=T||je<0||U&&we>=O}function ee(){var He=g();if(le(He))return z(He);K=setTimeout(ee,te(He))}function z(He){return K=void 0,q&&k?Y(He):(k=R=void 0,B)}function he(){K!==void 0&&clearTimeout(K),$=0,k=L=R=K=void 0}function de(){return K===void 0?B:z(g())}function ze(){var He=g(),je=le(He);if(k=arguments,R=this,L=He,je){if(K===void 0)return X(L);if(U)return K=setTimeout(ee,T),Y(L)}return K===void 0&&(K=setTimeout(ee,T)),B}return ze.cancel=he,ze.flush=de,ze}function y(A){var T=typeof A;return!!A&&(T=="object"||T=="function")}function b(A){return!!A&&typeof A=="object"}function w(A){return typeof A=="symbol"||b(A)&&d.call(A)==n}function E(A){if(typeof A=="number")return A;if(w(A))return t;if(y(A)){var T=typeof A.valueOf=="function"?A.valueOf():A;A=y(T)?T+"":T}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var D=s.test(A);return D||o.test(A)?a(A.slice(2),D?2:8):i.test(A)?t:+A}return YO=v,YO}var SCt=ECt();const G0=sa(SCt),T$e=iI`
  .geosearch {
    display: flex;
    flex-direction: row;
    align-items: start;
  }

  .search-container {
    display: flex;
    flex-direction: column;
    align-items: start;
  }
  .hidden {
    display: none;
    pointer-events: none;
  }
  .results-container {
    min-height: 100px;
    width: 332px;
    background: var(--results-bg, #eaf1f5);
    overflow: hidden;
    border-radius: 6px;
    box-shadow:
      0px 3px 5px -2px rgba(0, 0, 0, 0.08),
      0px 2px 2px 0px rgba(0, 0, 0, 0.08),
      0px 1px 5px 0px rgba(0, 0, 0, 0.08);
    padding: 0;
    margin: 0;
  }
  .results-container.too-short {
    height: 64px;
  }

  .results-container.too-short span {
    color: #00f;
    width: 100%;
    text-align: center;
  }

  input {
    background: var(--input-bg, #c6d4dd);
    color: var(--input-fg, #333);
    height: 48px;
    border-radius: 6px;
    padding: 0 16px;
    min-width: 300px;
    border: none;
    box-shadow:
      0px 3px 1px -2px rgba(0, 0, 0, 0.05),
      0px 2px 2px 0px rgba(0, 0, 0, 0.05),
      0px 1px 5px 0px rgba(0, 0, 0, 0.05);
  }
  input::before {
    background: url("_data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' color='%23999999' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
    width: 48px;
    height: 48px;
    display: inline-block;
  }
  button {
    height: auto;
    background: var(--button-bg, #fff);
  }

  .geosearch.small button {
    height: var(--button-size, 32px);
    width: var(--button-size, 32px);
    padding: calc((var(--button-size, 32px) - 20px) / 2);
  }

  .geosearch.small button .icon {
    width: 20px;
    height: 20px;
    transform: translateX(1px);
    fill: var(--button-fg, #fff);
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
  }

  .geosearch.small button .chevron {
    display: none;
  }

  .geosearch input {
    background: #fff;
  }

  .chevron {
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left%3C/title%3E%3Cpath d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/svg%3E");
    margin-right: 9px;
  }

  .chevron.right {
    transform: rotate(180deg);
    margin-left: 9px;
  }

  .chevron.top {
    transform: rotate(90deg);
    margin-bottom: 9px;
  }

  .chevron.bottom {
    transform: rotate(-90deg);
    margin-top: 9px;
  }

  .chevron.right.active {
    transform: rotate(180deg);
  }

  .search-result {
    padding: 10px;
    border-bottom: 1px solid var(--results-border-color, #aaa);
    color: var(--results-fg, #000);
    cursor: pointer;
    font-size: 0.9rem;
    list-style: none;
  }

  .search-result:hover {
    background: #0001;
  }

  .hint {
    display: flex;
    color: #0008;
    height: 40px;
    width: 100%;
    margin: 30px 0;
    text-align: center;
    justify-content: center;
    flex-direction: row;
    align-items: center;
  }
`,ACt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    preserveAspectRatio="xMidYMid"
    width="50"
    height="50"
    style="shape-rendering: auto; display: block; background: transparent;"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
    <g>
      <circle
        stroke-dasharray="164.93361431346415 56.97787143782138"
        r="35"
        stroke-width="12"
        stroke="#1a467c"
        fill="none"
        cy="50"
        cx="50"
      >
        <animateTransform
          keyTimes="0;1"
          values="0 50 50;360 50 50"
          dur="1.2222222222222223s"
          repeatCount="indefinite"
          type="rotate"
          attributeName="transform"
        ></animateTransform>
      </circle>
      <g></g>
    </g>
  </svg>
`;var jv;class CCt extends Zr{constructor(){super();yn(this,jv);this._data=[],this._isListVisible=!1,this._isInputVisible=!1,this._query="",this._isLoading=!1,this.for="eox-map",this.listDirection="right",this.resultsDirection="down",this.interval=800,this.loaderSvg=ACt,this.fetchDebounced=G0(async()=>{if(!(this._query.length<2)){this._isLoading=!0;try{const n=`${this.endpoint}${this.endpoint.includes("?")?"&":"?"}${this.queryParameter??"q"}=${this._query}`,i=await(await fetch(encodeURI(n))).json();this._data=i.results,this._isLoading=!1}catch{console.log("Error setting up or requesting from geosearch endpoint")}}},this.interval)}static get properties(){return{_data:{attribute:!1},_isListVisible:{attribute:!1},_isInputVisible:{attribute:!1},_query:{attribute:!1},_isLoading:{attribute:!1},endpoint:{type:String},for:{type:String},queryParameter:{type:String,default:"q"},button:{type:Boolean},interval:{type:Number,default:800},small:{type:Boolean},label:{type:String},direction:{type:String,attribute:"list-direction"},resultsDirection:{type:String,attribute:"results-direction"},unstyled:{type:Boolean},loaderSvg:{type:String,attribute:"loader-svg"}}}async onInput(n){if(this._query=n.target.value,this._query.length==0){this._isListVisible=!1;return}else this._query.length>=2&&(this._isLoading=!0),this._isListVisible=!0;this.fetchDebounced()}onInputBlur(){this._isInputVisible=!1,this._isListVisible=!1,this._query=""}onButtonClick(){this._isInputVisible=!this._isInputVisible,this._isInputVisible&&setTimeout(()=>this.renderRoot.querySelector("#gazetteer").focus())}getFlexDirection(){return this.direction==="up"?"column-reverse":this.direction==="left"?"row-reverse":this.direction==="down"?"column":(this.direction==="right","row")}getResultsDirection(){return this.resultsDirection==="up"?"column-reverse":this.resultsDirection==="left"?"row-reverse":this.resultsDirection==="down"?"column":(this.resultsDirection==="right","row")}getVerticalAlign(){return this.resultsDirection==="up"?"end":"start"}getMarginDirection(n){return n==="up"?"top":n==="left"?"left":n==="down"?"bottom":n==="right"?"right":"row"}handleSelect(n){this._isInputVisible=!1,this._isListVisible=!1,this._query="";const r=this.eoxMap.map.getView().getProjection().getCode();let i=V4("EPSG:4326",r,[n.bounds.southwest.lng,n.bounds.southwest.lat]),s=V4("EPSG:4326",r,[n.bounds.northeast.lng,n.bounds.northeast.lat]);const o=[i[0],i[1],s[0],s[1]];this.eoxMap.zoomExtent=o,this.dispatchEvent(new CustomEvent("geosearchSelect",n))}updateMap(){const n=K_(this.for);if(n){const r=n;this.eoxMap=r}}firstUpdated(){this.updateMap()}updated(n){n.has("for")&&this.updateMap()}get eoxMap(){return Gt(this,jv)}set eoxMap(n){const r=Gt(this,jv);as(this,jv,n),this.requestUpdate("eoxMap",r)}render(){return Qe`
      <style>
        .hidden {
          display: none;
        }
        ${!this.unstyled&&ER}
          ${!this.unstyled&&eS}
          ${!this.unstyled&&T$e}
          .fill {
          width: 100%;
          height: 100%;
          min-height: 100px;
          display: flex;
          justify-content: center;
          align-items: center;
        }
      </style>
      <div
        class="geosearch ${this.small?"small":""}"
        style="
            flex-direction: ${this.getFlexDirection()};
            align-items: ${this.getVerticalAlign()};
        "
      >
        <button
          class="${this.button?"":"hidden"} ${this._isInputVisible?"active":""}"
          style="
            margin-${this.getMarginDirection(this.direction)}: 12px;
            flex-direction: ${this.getFlexDirection()};
          "
          @click="${this.onButtonClick}"
        >
          <span class="icon"></span>
          <span
            class="chevron ${this.direction??"right"} ${this._isInputVisible?"active":""}"
          ></span>
          <span
            style="display: ${this.small&&!this.unstyled?"none":"flex"}"
            >${(this.label||this.unstyled)??"Search"}</span
          >
        </button>
        <div
          class="search-container ${this.button?this._isInputVisible?"":"hidden":""}"
          style="flex-direction: ${this.getResultsDirection()};"
        >
          <input
            id="gazetteer"
            type="text"
            placeholder="Type to search"
            .value="${this._query}"
            style="margin-${this.getMarginDirection(this.resultsDirection)}: ${this._isListVisible?12:0}px"
            @input="${this.onInput}"
          />
          <ul class="results-container ${this._isListVisible?"":"hidden"}">
            ${this._isLoading?Qe`<div class="fill">${_Ct(this.loaderSvg)}</div>`:this._query.length<2?Qe`<span class="hint"
                    >Enter at least two characters to search</span
                  >`:this._data.map(n=>Qe`
                      <eox-geosearch-item
                        .item="${n}"
                        .onClick="${r=>{this.handleSelect(r)}}"
                        .unstyled=${this.unstyled}
                      />
                    `)}
          </ul>
        </div>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}jv=new WeakMap;class kCt extends Zr{static get properties(){return{item:{type:Object},onClick:{type:Function},unstyled:{type:Boolean}}}constructor(){super()}render(){return Qe`
      <style>
        ${!this.unstyled&&ER}
        ${!this.unstyled&&T$e}
      </style>
      <li class="search-result" @click="${()=>this.onClick(this.item)}">
        <span class="name">${this.item.formatted}</span>
      </li>
    `}}customElements.define("eox-geosearch",CCt);customElements.define("eox-geosearch-item",kCt);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*su(e,t){if(e!==void 0){let n=0;for(const r of e)yield t(r,n++)}}const TCt=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
form#itemfilter:not(.inline) {
  overflow-y: auto;
}
details {
  width: 100%;
}
`,tS=`
:host, :root {
  --item-color: color-mix(
    in srgb,
    var(--primary-color) 10%,
    transparent
  );
  --item-hover-color: color-mix(
    in srgb,
    var(--secondary-color) 30%,
    transparent
  );
  --item-select-color: var(--primary-color);
  --inline-bg-color: color-mix(
    in srgb,
    var(--secondary-color) 10%,
    transparent
  );
  --border-color: color-mix(
    in srgb,
    #000000 20%,
    transparent
  );
  --background-color: var(--eox-background-color, transparent);
  --padding: 0.5rem;
  --text-transform: capitalize;
  --form-flex-direction: column;
  --filter-display: block;
  background-color: var(--background-color);
}
* {
  font-family: Roboto, sans-serif;
}
form#itemfilter {
  flex-direction: var(--form-flex-direction);
}
eox-itemfilter-container {
  min-width: 200px;
  display: var(--filter-display);
}
eox-itemfilter-results {
  flex-grow: 1;
}
ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  text-overflow: ellipsis;
  white-space: nowrap;
  display: flex;
  align-items: center;
}
.cards li span {
  display: block;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem var(--padding);
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: 13px;
  align-items: center;
  text-transform: var(--text-transform);
}
.cards .title {
  font-size: 16px;
  font-weight: 600;
  text-wrap: auto;
  line-height: 19px;
}
.subtitle {
  font-size: 11px;
  opacity: .7;
  margin-top: 6px;
}
.cards .subtitle {
  font-size: 14px;
  color: #757575;
  text-wrap: auto;
  line-height: 19px;
}
.image {
  width: 24px;
  height: 24px;
  object-fit: cover;
  overflow: hidden;
  margin-right: 8px;
}
.cards .image {
  width: 100%;
  height: 190px;
  margin-bottom: 8px;
}
.title-container {
  display: flex;
  flex-direction: column;
}
h6.main-heading {
  font-size: 1rem;
  margin-block-start: 1.33em;
  margin-block-end: 1.33em;
  margin-top: var(--padding);
  padding: 0 var(--padding);
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  margin-left: auto;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 var(--padding);
}
[data-type=filter] .title,
details summary {
  text-transform: var(--text-transform);
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul:not(#filters) > li {
  padding: 5px 0;
}
ul#results li {
  padding: 5px var(--padding);
}
ul#results ul.cards {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  gap: 40px;
  margin: 20px 0;
  cursor: initial;
}
ul#results ul.cards li {
  flex-basis: calc(33.3% - 77px);
  min-width: 0;
  align-self: flex-start;
}
@media screen and (max-width: 768px) {
  ul#results ul.cards li {
    flex-basis: calc(50% - 70px);
  }
}
@media screen and (max-width: 480px) {
  ul#results ul.cards li {
    flex-basis: 100%;
  }
}
section {
  position: relative;
  background-color: var(--background-color);
}
button#filter-reset {
  position: absolute;
  top: 0;
  right: var(--padding);
  padding: 2px 10px;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--secondary-color);
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: var(--primary-color);
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range,
tc-range-slider {
  align-items: center;
  display: block;
}
tc-range-slider {
  width: calc(100% - 16px);
  margin-left: 8px;
  margin-right: 8px;
  --width: 100%;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before,
.range-after {
  margin: 1rem 0px;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: -5px;
  height: 14px;
  width: 14px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 14px;
  width: 14px;
}
.inline-content {
  border: 1.5px solid var(--secondary-color);
  border-radius: 4px;
  max-height: 300px;
  overflow-y: auto;
  background: var(--inline-bg-color);
  margin-top: 4px;
  padding: 8px;
}
.inline-container {
  position: relative;
  align-items: center;
}
.inline-container-wrapper {
  width: 100%;
  position: relative;
}
.inline-container {
  position: relative;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  height: 24px;
  padding: 8px;
  flex: 1;
  justify-content: space-between;
  cursor: text;
  transition: all 0.2s ease-in-out;
  display: flex;
}
.inline-container:hover {
  border: 1px solid var(--primary-color);
}
[popover] {
  position: fixed;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  background-color: var(--background-color);
  border: none;
}
.input-container {
  display: flex;
  flex: 1;
  align-items: center;
}
.input-container input,
.input-container input:focus {
  height: 100%;
  border: none;
  outline: none;
  border: 0;
  min-width: 25%;
}
.button-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 1px;
  top: 5px;
  height: calc(100% - 10px);
  width: 34px;
  background: white;
}
button.icon {
  color: #004170;
  height: 24px;
  font-size: large;
  width: unset;
}
.inline-container::-webkit-scrollbar {
  height: 2px;
}
.inline-container::-webkit-scrollbar-thumb {
  background: lightgrey;
  border-radius: 2px;
}
.hidden {
  height: 0;
  padding: 0;
  border: none;
}
.hidden:hover {
  border: none;
}
.chip-title {
  pointer-events: none;
  text-transform: var(--text-transform);
}
.chip {
  display: flex;
  align-items: center;
  background: var(--item-color);
  border-radius: 30px;
  margin-right: 4px;
  padding: 5px 10px;
  font-size: small;
  cursor: default;
  white-space: nowrap;
}
.chip.highlighted {
  background: var(--primary-color);
  color: white;
}
.chip-close {
  cursor: pointer;
  font-weight: 600;
  position: absolute;
  right: -25px;
  background: white;
  top: 0;
  height: 100%;
  display: flex;
  align-items: center;
  height: 24px;
  width: 24px;
}
.chip-close:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
  height: 24px;
  width: 24px;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
.chip-container {
  position: relative;
  max-width: 75%;
}
.autocomplete-container,
.text-container {
  position: relative;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  justify-content: space-between;
  cursor: text;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  background: white;
}
.autocomplete-container-wrapper,
.text-container-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  flex: 1;
  overflow-x: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.autocomplete-container-wrapper::-webkit-scrollbar {
  display: none;
}
.chip-wrapper {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.chip-wrapper::-webkit-scrollbar {
  display: none;
  width: 0;
  background: transparent;
}
.autocomplete-input,
.text-input {
  flex: 1;
  border: 1px solid var(--border-color);
  outline: none;
  box-sizing: border-box;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  min-width: 150px;
}
input[type="text"].text-input,
input[type="text"].autocomplete-input {
  padding: 9px 6px !important;
  border-radius: 4px;
}
.text-input:hover,
.autocomplete-input:hover {
  border: 1px solid var(--primary-color);
}
.text-input:invalid {
  border: 1px solid red;
}
.selected-items {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
}
.select li:hover,
.multiselect li:hover,
eox-itemfilter-results li:hover {
  background: var(--item-hover-color);
}
eox-itemfilter-results li.highlighted {
  color: var(--background-color);
  background: var(--item-select-color);
}
.selected-item span {
  margin-right: 8px;
}
.selected-item button {
  background: none;
  border: none;
  color: #fff;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.multiselect-container,
.select-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.multiselect-container label,
.select-container label {
  display: flex;
  align-items: center;
  cursor: pointer;
}
.multiselect-container input,
.select-container input {
  margin-right: 8px;
}
.select-overflow {
  max-height: 185px;
  overflow-y: auto;
}
.chip-title strong {
  font-weight: 500;
}
.chip-wrapper {
  max-width: 100%;
  overflow-x: scroll;
}
.chip-container {
  display: flex;
  flex: 0;
}
.input-container.dirty-filter-input {
  margin-left: 25px;
}
.error-validation {
  position: relative;
  color: red;
  font-size: x-small;
  top: -8px;
}
input {
  background-color: var(--background-color);
}
`;var kT,D$e;class DCt extends Zr{constructor(){super();yn(this,kT);this.filterObject={},this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},unstyled:{type:Boolean}}}render(){return Qe`
      <style>
        ${!this.unstyled&&tS}
      </style>

      ${Un(this.filterObject.featured,()=>Qe`<slot name="filter"></slot>`,()=>Qe`<details
            @toggle="${mn(this,kT,D$e)}"
            class="details-filter"
            ?open=${this.filterObject.expanded||Xr}
          >
            <summary>
              <span
                class="title"
                style="${!this.filterObject.title&&"text-transform: var(--text-transform)"}"
              >
                ${this.filterObject.title||this.filterObject.key||"Filter"}
                <slot name="reset-button"></slot>
              </span>
            </summary>
            <div>
              <slot name="filter"></slot>
            </div>
          </details>`)}
    `}}kT=new WeakSet,D$e=function(n){this.dispatchEvent(new CustomEvent("details-toggled",{detail:n,bubbles:!0,composed:!0}))};customElements.define("eox-itemfilter-expandcontainer",DCt);function lh(e){return Array.isArray?Array.isArray(e):F$e(e)==="[object Array]"}const LCt=1/0;function RCt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-LCt?"-0":t}function FCt(e){return e==null?"":RCt(e)}function _f(e){return typeof e=="string"}function L$e(e){return typeof e=="number"}function OCt(e){return e===!0||e===!1||MCt(e)&&F$e(e)=="[object Boolean]"}function R$e(e){return typeof e=="object"}function MCt(e){return R$e(e)&&e!==null}function Yl(e){return e!=null}function XO(e){return!e.trim().length}function F$e(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const $Ct="Incorrect 'index' type",ICt=e=>`Invalid value for key ${e}`,PCt=e=>`Pattern length exceeds max of ${e}.`,NCt=e=>`Missing ${e} property in key`,BCt=e=>`Property 'weight' in key '${e}' must be a positive integer`,lEe=Object.prototype.hasOwnProperty;class zCt{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=O$e(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function O$e(e){let t=null,n=null,r=null,i=1,s=null;if(_f(e)||lh(e))r=e,t=uEe(e),n=f$(e);else{if(!lEe.call(e,"name"))throw new Error(NCt("name"));const o=e.name;if(r=o,lEe.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(BCt(o));t=uEe(o),n=f$(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function uEe(e){return lh(e)?e:e.split(".")}function f$(e){return lh(e)?e.join("."):e}function jCt(e,t){let n=[],r=!1;const i=(s,o,a)=>{if(Yl(s))if(!o[a])n.push(s);else{let l=o[a];const u=s[l];if(!Yl(u))return;if(a===o.length-1&&(_f(u)||L$e(u)||OCt(u)))n.push(FCt(u));else if(lh(u)){r=!0;for(let f=0,c=u.length;f<c;f+=1)i(u[f],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,_f(t)?t.split("."):t,0),r?n:n[0]}const UCt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},qCt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},HCt={location:0,threshold:.6,distance:100},GCt={useExtendedSearch:!1,getFn:jCt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Yn={...qCt,...UCt,...HCt,...GCt};const VCt=/[^ ]+/g;function WCt(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(VCt).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(s,a),a},clear(){n.clear()}}}class xB{constructor({getFn:t=Yn.getFn,fieldNormWeight:n=Yn.fieldNormWeight}={}){this.norm=WCt(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,_f(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();_f(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Yl(t)||XO(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Yl(o)){if(lh(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(Yl(f))if(_f(f)&&!XO(f)){let c={v:f,i:u,n:this.norm.get(f)};a.push(c)}else lh(f)&&f.forEach((c,d)=>{l.push({nestedArrIndex:d,value:c})})}r.$[s]=a}else if(_f(o)&&!XO(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function M$e(e,t,{getFn:n=Yn.getFn,fieldNormWeight:r=Yn.fieldNormWeight}={}){const i=new xB({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(O$e)),i.setSources(t),i.create(),i}function YCt(e,{getFn:t=Yn.getFn,fieldNormWeight:n=Yn.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new xB({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function VA(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Yn.distance,ignoreLocation:s=Yn.ignoreLocation}={}){const o=t/e.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}function XCt(e=[],t=Yn.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&r===-1?r=s:!a&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Rg=32;function ZCt(e,t,n,{location:r=Yn.location,distance:i=Yn.distance,threshold:s=Yn.threshold,findAllMatches:o=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,includeMatches:l=Yn.includeMatches,ignoreLocation:u=Yn.ignoreLocation}={}){if(t.length>Rg)throw new Error(PCt(Rg));const f=t.length,c=e.length,d=Math.max(0,Math.min(r,c));let h=s,p=d;const g=a>1||l,v=g?Array(c):[];let y;for(;(y=e.indexOf(t,p))>-1;){let D=VA(t,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:u});if(h=Math.min(D,h),p=y+f,g){let k=0;for(;k<f;)v[y+k]=1,k+=1}}p=-1;let b=[],w=1,E=f+c;const A=1<<f-1;for(let D=0;D<f;D+=1){let k=0,R=E;for(;k<R;)VA(t,{errors:D,currentLocation:d+R,expectedLocation:d,distance:i,ignoreLocation:u})<=h?k=R:E=R,R=Math.floor((E-k)/2+k);E=R;let O=Math.max(1,d-R+1),B=o?c:Math.min(d+R,c)+f,K=Array(B+2);K[B+1]=(1<<D)-1;for(let $=B;$>=O;$-=1){let I=$-1,U=n[e.charAt(I)];if(g&&(v[I]=+!!U),K[$]=(K[$+1]<<1|1)&U,D&&(K[$]|=(b[$+1]|b[$])<<1|1|b[$+1]),K[$]&A&&(w=VA(t,{errors:D,currentLocation:I,expectedLocation:d,distance:i,ignoreLocation:u}),w<=h)){if(h=w,p=I,p<=d)break;O=Math.max(1,2*d-p)}}if(VA(t,{errors:D+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>h)break;b=K}const T={isMatch:p>=0,score:Math.max(.001,w)};if(g){const D=XCt(v,a);D.length?l&&(T.indices=D):T.isMatch=!1}return T}function KCt(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class $$e{constructor(t,{location:n=Yn.location,threshold:r=Yn.threshold,distance:i=Yn.distance,includeMatches:s=Yn.includeMatches,findAllMatches:o=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,isCaseSensitive:l=Yn.isCaseSensitive,ignoreLocation:u=Yn.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(d,h)=>{this.chunks.push({pattern:d,alphabet:KCt(d),startIndex:h})},c=this.pattern.length;if(c>Rg){let d=0;const h=c%Rg,p=c-h;for(;d<p;)f(this.pattern.substr(d,Rg),d),d+=Rg;if(h){const g=c-Rg;f(this.pattern.substr(g),g)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],c=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:v})=>{const{isMatch:y,score:b,indices:w}=ZCt(t,p,g,{location:i+v,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});y&&(d=!0),c+=b,y&&w&&(f=[...f,...w])});let h={isMatch:d,score:d?c/this.chunks.length:1};return d&&r&&(h.indices=f),h}}class xm{constructor(t){this.pattern=t}static isMultiMatch(t){return cEe(t,this.multiRegex)}static isSingleMatch(t){return cEe(t,this.singleRegex)}search(){}}function cEe(e,t){const n=e.match(t);return n?n[1]:null}class JCt extends xm{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class QCt extends xm{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class e3t extends xm{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class t3t extends xm{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class n3t extends xm{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class r3t extends xm{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class I$e extends xm{constructor(t,{location:n=Yn.location,threshold:r=Yn.threshold,distance:i=Yn.distance,includeMatches:s=Yn.includeMatches,findAllMatches:o=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,isCaseSensitive:l=Yn.isCaseSensitive,ignoreLocation:u=Yn.ignoreLocation}={}){super(t),this._bitapSearch=new $$e(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class P$e extends xm{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const d$=[JCt,P$e,e3t,t3t,r3t,n3t,QCt,I$e],fEe=d$.length,i3t=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,s3t="|";function o3t(e,t={}){return e.split(s3t).map(n=>{let r=n.trim().split(i3t).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,u=-1;for(;!l&&++u<fEe;){const f=d$[u];let c=f.isMultiMatch(a);c&&(i.push(new f(c,t)),l=!0)}if(!l)for(u=-1;++u<fEe;){const f=d$[u];let c=f.isSingleMatch(a);if(c){i.push(new f(c,t));break}}}return i})}const a3t=new Set([I$e.type,P$e.type]);class l3t{constructor(t,{isCaseSensitive:n=Yn.isCaseSensitive,includeMatches:r=Yn.includeMatches,minMatchCharLength:i=Yn.minMatchCharLength,ignoreLocation:s=Yn.ignoreLocation,findAllMatches:o=Yn.findAllMatches,location:a=Yn.location,threshold:l=Yn.threshold,distance:u=Yn.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=o3t(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const f=n[l];o.length=0,s=0;for(let c=0,d=f.length;c<d;c+=1){const h=f[c],{isMatch:p,indices:g,score:v}=h.search(t);if(p){if(s+=1,a+=v,r){const y=h.constructor.type;a3t.has(y)?o=[...o,...g]:o.push(g)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return r&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const h$=[];function u3t(...e){h$.push(...e)}function p$(e,t){for(let n=0,r=h$.length;n<r;n+=1){let i=h$[n];if(i.condition(e,t))return new i(e,t)}return new $$e(e,t)}const Yk={AND:"$and",OR:"$or"},m$={PATH:"$path",PATTERN:"$val"},g$=e=>!!(e[Yk.AND]||e[Yk.OR]),c3t=e=>!!e[m$.PATH],f3t=e=>!lh(e)&&R$e(e)&&!g$(e),dEe=e=>({[Yk.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function N$e(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=c3t(i);if(!o&&s.length>1&&!g$(i))return r(dEe(i));if(f3t(i)){const l=o?i[m$.PATH]:s[0],u=o?i[m$.PATTERN]:i[l];if(!_f(u))throw new Error(ICt(l));const f={keyId:f$(l),pattern:u};return n&&(f.searcher=p$(u,t)),f}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];lh(u)&&u.forEach(f=>{a.children.push(r(f))})}),a};return g$(e)||(e=dEe(e)),r(e)}function d3t(e,{ignoreFieldNorm:t=Yn.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),n.score=r})}function h3t(e,t){const n=e.matches;t.matches=[],Yl(n)&&n.forEach(r=>{if(!Yl(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function p3t(e,t){t.score=e.score}function m3t(e,t,{includeMatches:n=Yn.includeMatches,includeScore:r=Yn.includeScore}={}){const i=[];return n&&i.push(h3t),r&&i.push(p3t),e.map(s=>{const{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class wm{constructor(t,n={},r){this.options={...Yn,...n},this.options.useExtendedSearch,this._keyStore=new zCt(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof xB))throw new Error($Ct);this._myIndex=n||M$e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Yl(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=_f(t)?_f(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return d3t(l,{ignoreFieldNorm:a}),s&&l.sort(o),L$e(n)&&n>-1&&(l=l.slice(0,n)),m3t(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=p$(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:a})=>{if(!Yl(s))return;const{isMatch:l,score:u,indices:f}=n.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:f}]})}),i}_searchLogical(t){const n=N$e(t,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:d});return h&&h.length?[{idx:u,item:l,matches:h}]:[]}const f=[];for(let c=0,d=a.children.length;c<d;c+=1){const h=a.children[c],p=r(h,l,u);if(p.length)f.push(...p);else if(a.operator===Yk.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Yl(a)){let u=r(n,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:f})=>{s[l].matches.push(...f)}))}}),o}_searchObjectList(t){const n=p$(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Yl(o))return;let l=[];r.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:o[f],searcher:n}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Yl(n))return[];let i=[];if(lh(n))n.forEach(({v:s,i:o,n:a})=>{if(!Yl(s))return;const{isMatch:l,score:u,indices:f}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,idx:o,norm:a,indices:f})});else{const{v:s,n:o}=n,{isMatch:a,score:l,indices:u}=r.searchIn(s);a&&i.push({score:l,key:t,value:s,norm:o,indices:u})}return i}}wm.version="7.0.0";wm.createIndex=M$e;wm.parseIndex=YCt;wm.config=Yn;wm.parseQuery=N$e;u3t(l3t);function B$e(e,t){const n=new wm(t.filterProperties,{keys:["title"]}),r=e.target.value,s=n.search(r).map(o=>o.item.key||o.item.keys.join("|"));Object.keys(t.filters).forEach(o=>{t.querySelector(`[data-details="${o}"]`).parentElement.style.display=s.includes(o)||!r?"":"none"})}function g3t(e,t){const n=e.target.getAttribute("data-close").replace("|","-");t.querySelector(`#filter-${n}`).reset(),t.dispatchEvent(new CustomEvent("filter")),t.requestUpdate()}const y$=Math.min,Fv=Math.max,Xk=Math.round,WA=Math.floor,Df=e=>({x:e,y:e});function z$e(e){return e.split("-")[0]}function y3t(e){return e.split("-")[1]}function v3t(e){return e==="x"?"y":"x"}function b3t(e){return e==="y"?"height":"width"}function j$e(e){return["top","bottom"].includes(z$e(e))?"y":"x"}function x3t(e){return v3t(j$e(e))}function U$e(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function hEe(e,t,n){let{reference:r,floating:i}=e;const s=j$e(t),o=x3t(t),a=b3t(o),l=z$e(t),u=s==="y",f=r.x+r.width/2-i.width/2,c=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:f,y:r.y-i.height};break;case"bottom":h={x:f,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:c};break;case"left":h={x:r.x-i.width,y:c};break;default:h={x:r.x,y:r.y}}switch(y3t(t)){case"start":h[o]-=d*(n&&u?-1:1);break;case"end":h[o]+=d*(n&&u?-1:1);break}return h}const w3t=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:c}=hEe(u,r,l),d=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:v,fn:y}=a[g],{x:b,y:w,data:E,reset:A}=await y({x:f,y:c,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});f=b??f,c=w??c,h={...h,[v]:{...h[v],...E}},A&&p<=50&&(p++,typeof A=="object"&&(A.placement&&(d=A.placement),A.rects&&(u=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):A.rects),{x:f,y:c}=hEe(u,d,l)),g=-1)}return{x:f,y:c,placement:d,strategy:i,middlewareData:h}};function SR(){return typeof window<"u"}function bb(e){return q$e(e)?(e.nodeName||"").toLowerCase():"#document"}function ou(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function rd(e){var t;return(t=(q$e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function q$e(e){return SR()?e instanceof Node||e instanceof ou(e).Node:!1}function $c(e){return SR()?e instanceof Element||e instanceof ou(e).Element:!1}function Uf(e){return SR()?e instanceof HTMLElement||e instanceof ou(e).HTMLElement:!1}function pEe(e){return!SR()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ou(e).ShadowRoot}function nS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ic(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function _3t(e){return["table","td","th"].includes(bb(e))}function AR(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function wB(e){const t=_B(),n=$c(e)?Ic(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function E3t(e){let t=tm(e);for(;Uf(t)&&!D1(t);){if(wB(t))return t;if(AR(t))return null;t=tm(t)}return null}function _B(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function D1(e){return["html","body","#document"].includes(bb(e))}function Ic(e){return ou(e).getComputedStyle(e)}function CR(e){return $c(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function tm(e){if(bb(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pEe(e)&&e.host||rd(e);return pEe(t)?t.host:t}function H$e(e){const t=tm(e);return D1(t)?e.ownerDocument?e.ownerDocument.body:e.body:Uf(t)&&nS(t)?t:H$e(t)}function D2(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=H$e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ou(i);if(s){const a=v$(o);return t.concat(o,o.visualViewport||[],nS(i)?i:[],a&&n?D2(a):[])}return t.concat(i,D2(i,[],n))}function v$(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function G$e(e){const t=Ic(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Uf(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=Xk(n)!==s||Xk(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function EB(e){return $c(e)?e:e.contextElement}function Ov(e){const t=EB(e);if(!Uf(t))return Df(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=G$e(t);let o=(s?Xk(n.width):n.width)/r,a=(s?Xk(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const S3t=Df(0);function V$e(e){const t=ou(e);return!_B()||!t.visualViewport?S3t:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function A3t(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ou(e)?!1:t}function x0(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=EB(e);let o=Df(1);t&&(r?$c(r)&&(o=Ov(r)):o=Ov(e));const a=A3t(s,n,r)?V$e(s):Df(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,f=i.width/o.x,c=i.height/o.y;if(s){const d=ou(s),h=r&&$c(r)?ou(r):r;let p=d,g=v$(p);for(;g&&r&&h!==p;){const v=Ov(g),y=g.getBoundingClientRect(),b=Ic(g),w=y.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,E=y.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,u*=v.y,f*=v.x,c*=v.y,l+=w,u+=E,p=ou(g),g=v$(p)}}return U$e({width:f,height:c,x:l,y:u})}function SB(e,t){const n=CR(e).scrollLeft;return t?t.left+n:x0(rd(e)).left+n}function W$e(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:SB(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function C3t(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=rd(r),a=t?AR(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Df(1);const f=Df(0),c=Uf(r);if((c||!c&&!s)&&((bb(r)!=="body"||nS(o))&&(l=CR(r)),Uf(r))){const h=x0(r);u=Ov(r),f.x=h.x+r.clientLeft,f.y=h.y+r.clientTop}const d=o&&!c&&!s?W$e(o,l,!0):Df(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+d.x,y:n.y*u.y-l.scrollTop*u.y+f.y+d.y}}function k3t(e){return Array.from(e.getClientRects())}function T3t(e){const t=rd(e),n=CR(e),r=e.ownerDocument.body,i=Fv(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Fv(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+SB(e);const a=-n.scrollTop;return Ic(r).direction==="rtl"&&(o+=Fv(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function D3t(e,t){const n=ou(e),r=rd(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=_B();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function L3t(e,t){const n=x0(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Uf(e)?Ov(e):Df(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function mEe(e,t,n){let r;if(t==="viewport")r=D3t(e,n);else if(t==="document")r=T3t(rd(e));else if($c(t))r=L3t(t,n);else{const i=V$e(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return U$e(r)}function Y$e(e,t){const n=tm(e);return n===t||!$c(n)||D1(n)?!1:Ic(n).position==="fixed"||Y$e(n,t)}function R3t(e,t){const n=t.get(e);if(n)return n;let r=D2(e,[],!1).filter(a=>$c(a)&&bb(a)!=="body"),i=null;const s=Ic(e).position==="fixed";let o=s?tm(e):e;for(;$c(o)&&!D1(o);){const a=Ic(o),l=wB(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||nS(o)&&!l&&Y$e(e,o))?r=r.filter(f=>f!==o):i=a,o=tm(o)}return t.set(e,r),r}function F3t(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?AR(t)?[]:R3t(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,f)=>{const c=mEe(t,f,i);return u.top=Fv(c.top,u.top),u.right=y$(c.right,u.right),u.bottom=y$(c.bottom,u.bottom),u.left=Fv(c.left,u.left),u},mEe(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function O3t(e){const{width:t,height:n}=G$e(e);return{width:t,height:n}}function M3t(e,t,n){const r=Uf(t),i=rd(t),s=n==="fixed",o=x0(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Df(0);if(r||!r&&!s)if((bb(t)!=="body"||nS(i))&&(a=CR(t)),r){const d=x0(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=SB(i));const u=i&&!r&&!s?W$e(i,a):Df(0),f=o.left+a.scrollLeft-l.x-u.x,c=o.top+a.scrollTop-l.y-u.y;return{x:f,y:c,width:o.width,height:o.height}}function ZO(e){return Ic(e).position==="static"}function gEe(e,t){if(!Uf(e)||Ic(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return rd(e)===n&&(n=n.ownerDocument.body),n}function X$e(e,t){const n=ou(e);if(AR(e))return n;if(!Uf(e)){let i=tm(e);for(;i&&!D1(i);){if($c(i)&&!ZO(i))return i;i=tm(i)}return n}let r=gEe(e,t);for(;r&&_3t(r)&&ZO(r);)r=gEe(r,t);return r&&D1(r)&&ZO(r)&&!wB(r)?n:r||E3t(e)||n}const $3t=async function(e){const t=this.getOffsetParent||X$e,n=this.getDimensions,r=await n(e.floating);return{reference:M3t(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function I3t(e){return Ic(e).direction==="rtl"}const P3t={convertOffsetParentRelativeRectToViewportRelativeRect:C3t,getDocumentElement:rd,getClippingRect:F3t,getOffsetParent:X$e,getElementRects:$3t,getClientRects:k3t,getDimensions:O3t,getScale:Ov,isElement:$c,isRTL:I3t};function N3t(e,t){let n=null,r;const i=rd(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:f,width:c,height:d}=e.getBoundingClientRect();if(a||t(),!c||!d)return;const h=WA(f),p=WA(i.clientWidth-(u+c)),g=WA(i.clientHeight-(f+d)),v=WA(u),b={rootMargin:-h+"px "+-p+"px "+-g+"px "+-v+"px",threshold:Fv(0,y$(1,l))||1};let w=!0;function E(A){const T=A[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function B3t(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=EB(e),f=i||s?[...u?D2(u):[],...D2(t)]:[];f.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const c=u&&a?N3t(u,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,g=l?x0(e):null;l&&v();function v(){const y=x0(e);g&&(y.x!==g.x||y.y!==g.y||y.width!==g.width||y.height!==g.height)&&n(),g=y,p=requestAnimationFrame(v)}return n(),()=>{var y;f.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),c==null||c(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const z3t=(e,t,n)=>{const r=new Map,i={platform:P3t,...n},s={...i.platform,_c:r};return w3t(e,t,{...i,platform:s})};function j3t(e){const t=e.renderRoot.querySelector(".inline-container-wrapper"),n=e.renderRoot.querySelector("[popover]");return B3t(t,n,()=>{n.matches(":popover-open")&&z3t(t,n,{strategy:"fixed"}).then(({x:i,y:s})=>{Object.assign(n.style,{left:`${i}px`,top:`${s}px`,width:`${t.getBoundingClientRect().width}px`})})},{animationFrame:!0})}function Z$e(e){e.renderRoot.querySelector("#eox-itemfilter-input-search").value="",B$e({target:{value:""}},e)}function U3t(e,t){t.inlineMode&&e.stopPropagation()}function q3t(e){e.inlineMode&&(e.showDropdown=!0)}function H3t(e,t){t.inlineMode&&(e.stopPropagation(),t.showDropdown=!0)}function G3t(e,t){t.inlineMode&&e.key==="Escape"&&t.showDropdown&&(Z$e(t),t.showDropdown=!1)}function V3t(e,t){t.inlineMode&&e.target.tagName!=="DROPDOWN-FORM"&&e.target.tagName!=="EOX-ITEMFILTER"&&t.showDropdown&&(Z$e(t),t.showDropdown=!1)}function W3t(e,t){var n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0,f=null,c=null,d=e[0],h=e[1],p=t.length;for(n;n<p;n++){r=0;var g=t[n].length-1,v=t[n];if(f=v[0],f[0]!==v[g][0]&&f[1]!==v[g][1])throw new Error("First and last coordinates in a ring must be the same");for(o=f[0]-d,a=f[1]-h,r;r<g;r++){if(c=v[r+1],u=c[1]-h,a<0&&u<0||a>0&&u>0){f=c,a=u,o=f[0]-d;continue}if(l=c[0]-e[0],u>0&&a<=0){if(s=o*u-l*a,s>0)i=i+1;else if(s===0)return 0}else if(a>0&&u<=0){if(s=o*u-l*a,s<0)i=i+1;else if(s===0)return 0}else if(u===0&&a<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u===0){if(l<=0&&o>=0)return 0;if(o<=0&&l>=0)return 0}f=c,a=u,o=l}}return i%2!==0}function w0(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Y3t(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!yEe(e[0])||!yEe(e[1]))throw new Error("coordinates must contain numbers");return w0({type:"Point",coordinates:e},t,n)}function X3t(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return w0({type:"LineString",coordinates:e},t,n)}function b$(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function Z3t(e,t,n={}){return w0({type:"MultiLineString",coordinates:e},t,n)}function yEe(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function K$e(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function K3t(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function L1(e){return e.type==="Feature"?e.geometry:e}function Ou(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const r=K$e(e),i=L1(t),s=i.type,o=t.bbox;let a=i.coordinates;if(o&&J3t(r,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const f=W3t(r,a[u]);if(f===0)return!n.ignoreBoundary;f&&(l=!0)}return l}function J3t(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}class J$e{constructor(t=[],n=Q3t){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,i=n[t];for(;t>0;){const s=t-1>>1,o=n[s];if(r(i,o)>=0)break;n[t]=o,t=s}n[t]=i}_down(t){const{data:n,compare:r}=this,i=this.length>>1,s=n[t];for(;t<i;){let o=(t<<1)+1,a=n[o];const l=o+1;if(l<this.length&&r(n[l],a)<0&&(o=l,a=n[l]),r(a,s)>=0)break;n[t]=a,t=o}n[t]=s}}function Q3t(e,t){return e<t?-1:e>t?1:0}function Q$e(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y!==t.p.y?e.p.y>t.p.y?1:-1:1}function ekt(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let vEe=class{constructor(t,n,r,i){this.p={x:t[0],y:t[1]},this.featureId=n,this.ringId=r,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}};function tkt(e,t){if(e.type==="FeatureCollection"){const n=e.features;for(let r=0;r<n.length;r++)bEe(n[r],t)}else bEe(e,t)}let YA=0,XA=0,ZA=0;function bEe(e,t){const n=e.type==="Feature"?e.geometry:e;let r=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(r=[r]),n.type==="LineString"&&(r=[[r]]);for(let i=0;i<r.length;i++)for(let s=0;s<r[i].length;s++){let o=r[i][s][0],a=null;XA=XA+1;for(let l=0;l<r[i][s].length-1;l++){a=r[i][s][l+1];const u=new vEe(o,YA,XA,ZA),f=new vEe(a,YA,XA,ZA+1);u.otherEvent=f,f.otherEvent=u,Q$e(u,f)>0?(f.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,f.isLeftEndpoint=!1),t.push(u),t.push(f),o=a,ZA=ZA+1}}YA=YA+1}class nkt{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}function rkt(e,t){if(e===null||t===null||e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const n=e.leftSweepEvent.p.x,r=e.leftSweepEvent.p.y,i=e.rightSweepEvent.p.x,s=e.rightSweepEvent.p.y,o=t.leftSweepEvent.p.x,a=t.leftSweepEvent.p.y,l=t.rightSweepEvent.p.x,u=t.rightSweepEvent.p.y,f=(u-a)*(i-n)-(l-o)*(s-r),c=(l-o)*(r-a)-(u-a)*(n-o),d=(i-n)*(r-a)-(s-r)*(n-o);if(f===0)return!1;const h=c/f,p=d/f;if(h>=0&&h<=1&&p>=0&&p<=1){const g=n+h*(i-n),v=r+h*(s-r);return[g,v]}return!1}function ikt(e,t){t=t||!1;const n=[],r=new J$e([],ekt);for(;e.length;){const i=e.pop();if(i.isLeftEndpoint){const s=new nkt(i);for(let o=0;o<r.data.length;o++){const a=r.data[o];if(t&&a.leftSweepEvent.featureId===i.featureId)continue;const l=rkt(s,a);l!==!1&&n.push(l)}r.push(s)}else i.isLeftEndpoint===!1&&r.pop()}return n}function skt(e,t){const n=new J$e([],Q$e);return tkt(e,n),ikt(n,t)}var okt=skt;function AB(e,t,n={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:i=!0}=n;let s=[];e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(w0(e)),t.type==="FeatureCollection"?s=s.concat(t.features):t.type==="Feature"?s.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&s.push(w0(t));const o=okt(b$(s),i);let a=[];if(r){const l={};o.forEach(u=>{const f=u.join(",");l[f]||(l[f]=!0,a.push(u))})}else a=o;return b$(a.map(l=>Y3t(l)))}function eIe(e,t,n){if(e!==null)for(var r,i,s,o,a,l,u,f=0,c=0,d,h=e.type,p=h==="FeatureCollection",g=h==="Feature",v=p?e.features.length:1,y=0;y<v;y++){u=p?e.features[y].geometry:g?e.geometry:e,d=u?u.type==="GeometryCollection":!1,a=d?u.geometries.length:1;for(var b=0;b<a;b++){var w=0,E=0;if(o=d?u.geometries[b]:u,o!==null){l=o.coordinates;var A=o.type;switch(f=0,A){case null:break;case"Point":if(t(l,c,y,w,E)===!1)return!1;c++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(t(l[r],c,y,w,E)===!1)return!1;c++,A==="MultiPoint"&&w++}A==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(t(l[r][i],c,y,w,E)===!1)return!1;c++}A==="MultiLineString"&&w++,A==="Polygon"&&E++}A==="Polygon"&&w++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(E=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(t(l[r][i][s],c,y,w,E)===!1)return!1;c++}E++}w++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(eIe(o.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function akt(e,t){var n,r,i,s,o,a,l,u,f,c,d=0,h=e.type==="FeatureCollection",p=e.type==="Feature",g=h?e.features.length:1;for(n=0;n<g;n++){for(a=h?e.features[n].geometry:p?e.geometry:e,u=h?e.features[n].properties:p?e.properties:{},f=h?e.features[n].bbox:p?e.bbox:void 0,c=h?e.features[n].id:p?e.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(t(null,d,u,f,c)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,d,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],d,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function Zk(e,t){akt(e,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(w0(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var f=n.coordinates[u],c={type:l,coordinates:f};if(t(w0(c,i),r,u)===!1)return!1}})}function x$(e,t={}){const n=L1(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return lkt(n,t);case"MultiPolygon":return ukt(n,t);default:throw new Error("invalid poly")}}function lkt(e,t={}){const r=L1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return tIe(r,i)}function ukt(e,t={}){const r=L1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},s=[];return r.forEach(o=>{s.push(tIe(o,i))}),b$(s)}function tIe(e,t){return e.length>1?Z3t(e,t):X3t(e[0],t)}function ckt(e,t,{ignoreSelfIntersections:n=!0}={ignoreSelfIntersections:!0}){let r=!0;return Zk(e,i=>{Zk(t,s=>{if(r===!1)return!1;r=fkt(i.geometry,s.geometry,n)})}),r}function fkt(e,t,n){switch(e.type){case"Point":switch(t.type){case"Point":return!mkt(e.coordinates,t.coordinates);case"LineString":return!xEe(t,e);case"Polygon":return!Ou(e,t)}break;case"LineString":switch(t.type){case"Point":return!xEe(e,t);case"LineString":return!dkt(e,t,n);case"Polygon":return!wEe(t,e,n)}break;case"Polygon":switch(t.type){case"Point":return!Ou(t,e);case"LineString":return!wEe(e,t,n);case"Polygon":return!hkt(t,e,n)}}return!1}function xEe(e,t){for(let n=0;n<e.coordinates.length-1;n++)if(pkt(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function dkt(e,t,n){return AB(e,t,{ignoreSelfIntersections:n}).features.length>0}function wEe(e,t,n){for(const i of t.coordinates)if(Ou(i,e))return!0;return AB(t,x$(e),{ignoreSelfIntersections:n}).features.length>0}function hkt(e,t,n){for(const i of e.coordinates[0])if(Ou(i,t))return!0;for(const i of t.coordinates[0])if(Ou(i,e))return!0;return AB(x$(e),x$(t),{ignoreSelfIntersections:n}).features.length>0}function pkt(e,t,n){const r=n[0]-e[0],i=n[1]-e[1],s=t[0]-e[0],o=t[1]-e[1];return r*o-i*s!==0?!1:Math.abs(s)>=Math.abs(o)?s>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:o>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function mkt(e,t){return e[0]===t[0]&&e[1]===t[1]}function gkt(e,t,{ignoreSelfIntersections:n=!0}={}){let r=!1;return Zk(e,i=>{Zk(t,s=>{if(r===!0)return!0;r=!ckt(i.geometry,s.geometry,{ignoreSelfIntersections:n})})}),r}var ykt=gkt;function Kk(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return eIe(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function Jk(e,t,n={}){const r=K$e(e),i=K3t(t);for(let s=0;s<i.length-1;s++){let o=!1;if(n.ignoreEndVertices&&(s===0&&(o="start"),s===i.length-2&&(o="end"),s===0&&s+1===i.length-1&&(o="both")),vkt(i[s],i[s+1],r,o,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function vkt(e,t,n,r,i){const s=n[0],o=n[1],a=e[0],l=e[1],u=t[0],f=t[1],c=n[0]-a,d=n[1]-l,h=u-a,p=f-l,g=c*p-d*h;if(i!==null){if(Math.abs(g)>i)return!1}else if(g!==0)return!1;if(Math.abs(h)===Math.abs(p)&&Math.abs(h)===0)return r?!1:n[0]===e[0]&&n[1]===e[1];if(r){if(r==="start")return Math.abs(h)>=Math.abs(p)?h>0?a<s&&s<=u:u<=s&&s<a:p>0?l<o&&o<=f:f<=o&&o<l;if(r==="end")return Math.abs(h)>=Math.abs(p)?h>0?a<=s&&s<u:u<s&&s<=a:p>0?l<=o&&o<f:f<o&&o<=l;if(r==="both")return Math.abs(h)>=Math.abs(p)?h>0?a<s&&s<u:u<s&&s<a:p>0?l<o&&o<f:f<o&&o<l}else return Math.abs(h)>=Math.abs(p)?h>0?a<=s&&s<=u:u<=s&&s<=a:p>0?l<=o&&o<=f:f<=o&&o<=l;return!1}function bkt(e,t){var n=L1(e),r=L1(t),i=n.type,s=r.type;switch(i){case"Point":switch(s){case"MultiPoint":return xkt(n,r);case"LineString":return Jk(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Ou(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"MultiPoint":return wkt(n,r);case"LineString":return _kt(n,r);case"Polygon":case"MultiPolygon":return Ekt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"LineString":return Skt(n,r);case"Polygon":case"MultiPolygon":return Akt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Polygon":case"MultiPolygon":return Ckt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function xkt(e,t){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(rIe(t.coordinates[n],e.coordinates)){r=!0;break}return r}function wkt(e,t){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)rIe(e.coordinates[n],t.coordinates[i])&&(r=!0);if(!r)return!1}return!0}function _kt(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++){if(!Jk(e.coordinates[r],t))return!1;n||(n=Jk(e.coordinates[r],t,{ignoreEndVertices:!0}))}return n}function Ekt(e,t){for(var n=!0,r=!1,i=0;i<e.coordinates.length;i++){if(r=Ou(e.coordinates[i],t),!r){n=!1;break}r=Ou(e.coordinates[i],t,{ignoreBoundary:!0})}return n&&r}function Skt(e,t){for(var n=0;n<e.coordinates.length;n++)if(!Jk(e.coordinates[n],t))return!1;return!0}function Akt(e,t){var n=Kk(t),r=Kk(e);if(!nIe(n,r))return!1;for(var i=!1,s=0;s<e.coordinates.length;s++){if(!Ou(e.coordinates[s],t))return!1;if(i||(i=Ou(e.coordinates[s],t,{ignoreBoundary:!0})),!i&&s<e.coordinates.length-1){var o=kkt(e.coordinates[s],e.coordinates[s+1]);i=Ou(o,t,{ignoreBoundary:!0})}}return i}function Ckt(e,t){var n=Kk(e),r=Kk(t);if(!nIe(r,n))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Ou(e.coordinates[0][i],t))return!1;return!0}function nIe(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function rIe(e,t){return e[0]===t[0]&&e[1]===t[1]}function kkt(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var Tkt=bkt;const Dkt=(e,t)=>t?ykt(e,t):!0,Lkt=(e,t)=>t?Tkt(e,t):!0;function Rkt(e,t="highlight",n="title"){const r=(s,o,a)=>{const l=o.split(".");let u;for(u=0;u<l.length-1;u++)s=s[l[u]];s[l[u]]=a},i=(s,o=[])=>{let a="",l=0;return o.forEach(u=>{const f=u[1]+1;a+=[s.substring(l,u[0]),`<mark class="${t}">`,s.substring(u[0],f),"</mark>"].join(""),l=f}),a+=s.substring(l),a};return e.filter(({matches:s})=>s&&s.length).map(({item:s,matches:o})=>{const a={...s};return o.forEach(l=>{l.key===n&&r(a,l.key,i(l.value,l.indices))}),a})}var HC={exports:{}},Fkt=HC.exports,_Ee;function Okt(){return _Ee||(_Ee=1,function(e,t){(function(n,r){e.exports=r()})(Fkt,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",f="week",c="month",d="quarter",h="year",p="date",g="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var I=["th","st","nd","rd"],U=$%100;return"["+$+(I[(U-20)%10]||I[U]||I[0])+"]"}},w=function($,I,U){var q=String($);return!q||q.length>=I?$:""+Array(I+1-q.length).join(U)+$},E={s:w,z:function($){var I=-$.utcOffset(),U=Math.abs(I),q=Math.floor(U/60),Y=U%60;return(I<=0?"+":"-")+w(q,2,"0")+":"+w(Y,2,"0")},m:function $(I,U){if(I.date()<U.date())return-$(U,I);var q=12*(U.year()-I.year())+(U.month()-I.month()),Y=I.clone().add(q,c),X=U-Y<0,te=I.clone().add(q+(X?-1:1),c);return+(-(q+(U-Y)/(X?Y-te:te-Y))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:c,y:h,w:f,d:u,D:p,h:l,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},A="en",T={};T[A]=b;var D="$isDayjsObject",k=function($){return $ instanceof K||!(!$||!$[D])},R=function $(I,U,q){var Y;if(!I)return A;if(typeof I=="string"){var X=I.toLowerCase();T[X]&&(Y=X),U&&(T[X]=U,Y=X);var te=I.split("-");if(!Y&&te.length>1)return $(te[0])}else{var le=I.name;T[le]=I,Y=le}return!q&&Y&&(A=Y),Y||!q&&A},O=function($,I){if(k($))return $.clone();var U=typeof I=="object"?I:{};return U.date=$,U.args=arguments,new K(U)},B=E;B.l=R,B.i=k,B.w=function($,I){return O($,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var K=function(){function $(U){this.$L=R(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[D]=!0}var I=$.prototype;return I.parse=function(U){this.$d=function(q){var Y=q.date,X=q.utc;if(Y===null)return new Date(NaN);if(B.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var te=Y.match(v);if(te){var le=te[2]-1||0,ee=(te[7]||"0").substring(0,3);return X?new Date(Date.UTC(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)):new Date(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)}}return new Date(Y)}(U),this.init()},I.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},I.$utils=function(){return B},I.isValid=function(){return this.$d.toString()!==g},I.isSame=function(U,q){var Y=O(U);return this.startOf(q)<=Y&&Y<=this.endOf(q)},I.isAfter=function(U,q){return O(U)<this.startOf(q)},I.isBefore=function(U,q){return this.endOf(q)<O(U)},I.$g=function(U,q,Y){return B.u(U)?this[q]:this.set(Y,U)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(U,q){var Y=this,X=!!B.u(q)||q,te=B.p(U),le=function(we,Ie){var qe=B.w(Y.$u?Date.UTC(Y.$y,Ie,we):new Date(Y.$y,Ie,we),Y);return X?qe:qe.endOf(u)},ee=function(we,Ie){return B.w(Y.toDate()[we].apply(Y.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(Ie)),Y)},z=this.$W,he=this.$M,de=this.$D,ze="set"+(this.$u?"UTC":"");switch(te){case h:return X?le(1,0):le(31,11);case c:return X?le(1,he):le(0,he+1);case f:var He=this.$locale().weekStart||0,je=(z<He?z+7:z)-He;return le(X?de-je:de+(6-je),he);case u:case p:return ee(ze+"Hours",0);case l:return ee(ze+"Minutes",1);case a:return ee(ze+"Seconds",2);case o:return ee(ze+"Milliseconds",3);default:return this.clone()}},I.endOf=function(U){return this.startOf(U,!1)},I.$set=function(U,q){var Y,X=B.p(U),te="set"+(this.$u?"UTC":""),le=(Y={},Y[u]=te+"Date",Y[p]=te+"Date",Y[c]=te+"Month",Y[h]=te+"FullYear",Y[l]=te+"Hours",Y[a]=te+"Minutes",Y[o]=te+"Seconds",Y[s]=te+"Milliseconds",Y)[X],ee=X===u?this.$D+(q-this.$W):q;if(X===c||X===h){var z=this.clone().set(p,1);z.$d[le](ee),z.init(),this.$d=z.set(p,Math.min(this.$D,z.daysInMonth())).$d}else le&&this.$d[le](ee);return this.init(),this},I.set=function(U,q){return this.clone().$set(U,q)},I.get=function(U){return this[B.p(U)]()},I.add=function(U,q){var Y,X=this;U=Number(U);var te=B.p(q),le=function(he){var de=O(X);return B.w(de.date(de.date()+Math.round(he*U)),X)};if(te===c)return this.set(c,this.$M+U);if(te===h)return this.set(h,this.$y+U);if(te===u)return le(1);if(te===f)return le(7);var ee=(Y={},Y[a]=r,Y[l]=i,Y[o]=n,Y)[te]||1,z=this.$d.getTime()+U*ee;return B.w(z,this)},I.subtract=function(U,q){return this.add(-1*U,q)},I.format=function(U){var q=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||g;var X=U||"YYYY-MM-DDTHH:mm:ssZ",te=B.z(this),le=this.$H,ee=this.$m,z=this.$M,he=Y.weekdays,de=Y.months,ze=Y.meridiem,He=function(Ie,qe,Pe,At){return Ie&&(Ie[qe]||Ie(q,X))||Pe[qe].slice(0,At)},je=function(Ie){return B.s(le%12||12,Ie,"0")},we=ze||function(Ie,qe,Pe){var At=Ie<12?"AM":"PM";return Pe?At.toLowerCase():At};return X.replace(y,function(Ie,qe){return qe||function(Pe){switch(Pe){case"YY":return String(q.$y).slice(-2);case"YYYY":return B.s(q.$y,4,"0");case"M":return z+1;case"MM":return B.s(z+1,2,"0");case"MMM":return He(Y.monthsShort,z,de,3);case"MMMM":return He(de,z);case"D":return q.$D;case"DD":return B.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return He(Y.weekdaysMin,q.$W,he,2);case"ddd":return He(Y.weekdaysShort,q.$W,he,3);case"dddd":return he[q.$W];case"H":return String(le);case"HH":return B.s(le,2,"0");case"h":return je(1);case"hh":return je(2);case"a":return we(le,ee,!0);case"A":return we(le,ee,!1);case"m":return String(ee);case"mm":return B.s(ee,2,"0");case"s":return String(q.$s);case"ss":return B.s(q.$s,2,"0");case"SSS":return B.s(q.$ms,3,"0");case"Z":return te}return null}(Ie)||te.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(U,q,Y){var X,te=this,le=B.p(q),ee=O(U),z=(ee.utcOffset()-this.utcOffset())*r,he=this-ee,de=function(){return B.m(te,ee)};switch(le){case h:X=de()/12;break;case c:X=de();break;case d:X=de()/3;break;case f:X=(he-z)/6048e5;break;case u:X=(he-z)/864e5;break;case l:X=he/i;break;case a:X=he/r;break;case o:X=he/n;break;default:X=he}return Y?X:B.a(X)},I.daysInMonth=function(){return this.endOf(c).$D},I.$locale=function(){return T[this.$L]},I.locale=function(U,q){if(!U)return this.$L;var Y=this.clone(),X=R(U,q,!0);return X&&(Y.$L=X),Y},I.clone=function(){return B.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},$}(),L=K.prototype;return O.prototype=L,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",c],["$y",h],["$D",p]].forEach(function($){L[$[1]]=function(I){return this.$g(I,$[0],$[1])}}),O.extend=function($,I){return $.$i||($(I,K,O),$.$i=!0),O},O.locale=R,O.isDayjs=k,O.unix=function($){return O(1e3*$)},O.en=T[A],O.Ls=T,O.p={},O})}(HC)),HC.exports}var Mkt=Okt();const Ac=sa(Mkt);let iIe;const $kt=(e,t)=>{iIe=new wm(e,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...t})},Ikt=async(e,t,n)=>{const r=Object.entries(t).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,u])=>{const f="$or",c=[],d=(h,p)=>{const g={};u.type==="text"?g[h]=`${p}`:g[l]=`="${h}"`,c.push(g)};return Object.entries(u.state).filter(([,h])=>h).forEach(([h,p])=>d(h,p)),c.length>0&&a.push({[f]:c}),a},[]);let i;if(!(r.length>0)&&n.matchAllWhenEmpty!==!1)i=e;else{const a={$and:[...r]},l=iIe.search(a);i=n.enableHighlighting?Rkt(l,"highlight",n.titleProperty):l.map(u=>u.item)}const s=Object.entries(t).filter(([,a])=>a.type==="range").reduce((a,[l,u])=>(a[l]={min:u.state.min,max:u.state.max,format:u.format},a),{});if(Object.keys(s).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const[f,c]of Object.entries(s)){const d=p=>c.format==="date"?Ac(p).unix():p,h=L2(f,i[l]);h?Array.isArray(h)?u[f]=s[f].min<=d(h[1])&&d(h[0])<=s[f].max:d(h)>=s[f].min&&d(h)<=s[f].max?u[f]=!0:u[f]=!1:u[f]=!0}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}const o=Object.entries(t).filter(([,a])=>a.type==="spatial").reduce((a,[l,u])=>(a[l]={geometry:u.state.geometry,mode:u.state.mode},a),{});if(Object.values(o).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const f of Object.keys(o)){const c=L2(f,i[l]),d=o[f].mode||"within";c&&(d==="within"?Lkt(c,o[f].geometry):Dkt(c,o[f].geometry))?u[f]=!0:u[f]=!1}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}return i};function Pkt(e,t){return[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...e&&{format:"GeoJSON"},...e&&{url:t}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://tiles.maps.eox.at/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}]}function kR(e){if(!e.dirty)return null;switch(e.type){case"multiselect":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"range":e.state.min=e.min,e.state.max=e.max;break;case"select":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"spatial":e.state.geometry=void 0;break;case"text":e.keys.forEach(n=>{e.state[n]=void 0});break}return delete e.stringifiedState,delete e.dirty,e}function EEe(e,t){return e*2+t}function Nkt(e){return Object.keys(e).map(t=>({title:Qe`${e[t].title||e[t].key}:
        <strong>${e[t].stringifiedState}</strong>`,key:t})).filter(t=>e[t.key].dirty)}function w$(e){return Object.values(e).map(t=>t.dirty).filter(t=>t).length>0}async function Bkt(e,t,n){return await(await fetch(`${n.externalFilter(e,t)}`)).json()}function sIe(e,t,n){let r;if(e.detail?r=e.detail.target:r=e.target,r!=null&&r.classList.contains("details-filter")){if(!r.open||t!=null&&t.expandMultipleFilters)return;n.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(i=>{const s=i.shadowRoot.querySelector(".details-filter");s&&s!==r&&s.removeAttribute("open")})}else{if(!(r!=null&&r.open)||t!=null&&t.expandMultipleResults)return;n.querySelectorAll("details").forEach(i=>{i!==r&&i.removeAttribute("open")})}}function L2(e,t){return e!=null&&e.includes(".")?e.split(".").reduce((n,r)=>n&&n[r],t):t[e]}var qi,oIe,_$,E$,aIe,S$,A$,lIe,C$,uIe,cIe;class zkt extends Zr{constructor(){super();yn(this,qi);this.filterProperties={},this.unstyled=!1,this.inlineMode=!1,this.filters={},this._handleClickOutside=mn(this,qi,aIe).bind(this),this._handleKeyDown=mn(this,qi,S$).bind(this)}static get properties(){return{filterProperties:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},unstyled:{type:Boolean},filters:{state:!0,type:Object}}}set showDropdown(n){this.renderRoot.querySelector("[popover]").togglePopover(n)}get showDropdown(){var n;return(n=this.renderRoot.querySelector("[popover]"))==null?void 0:n.matches(":popover-open")}connectedCallback(){super.connectedCallback(),this.inlineMode&&mn(this,qi,_$).call(this)}disconnectedCallback(){this.inlineMode&&mn(this,qi,E$).call(this),super.disconnectedCallback()}_overlayCleanup(){}updateInline(){this.inlineMode&&this.requestUpdate()}updated(n){n.has("inlineMode")&&(this.inlineMode?mn(this,qi,_$).call(this):mn(this,qi,E$).call(this))}render(){return Qe`
      <style>
        ${!this.unstyled&&tS}
      </style>
      ${this.inlineMode?Qe`
            <div
              class="inline-container-wrapper"
              @click="${mn(this,qi,A$)}"
            >
              <div class="inline-container" part="container">
                <div class="chip-container">
                  <div class="chip-wrapper">
                    <eox-itemfilter-chips
                      .items=${Nkt(this.filters)}
                      .controller=${{remove:n=>mn(this,qi,uIe).call(this,n)}}
                    >
                    </eox-itemfilter-chips>
                  </div>

                  ${Un(w$(this.filters),()=>Qe`
                      <span
                        class="chip-close"
                        @click=${()=>this.dispatchEvent(new CustomEvent("reset"))}
                      ></span>
                    `)}
                </div>
                <div
                  class="input-container ${w$(this.filters)?"dirty-filter-input":""}"
                >
                  <input
                    autocomplete="off"
                    id="eox-itemfilter-input-search"
                    type="text"
                    @click="${mn(this,qi,A$)}"
                    @focus="${mn(this,qi,lIe)}"
                    @input="${mn(this,qi,cIe)}"
                    placeholder="Search and add filter"
                    aria-haspopup="true"
                    aria-expanded="${this.showDropdown}"
                  />
                </div>
              </div>
              <div popover="manual">
                <div
                  class="inline-content"
                  slot="content"
                  @keydown="${mn(this,qi,S$)}"
                  @click="${mn(this,qi,C$)}"
                  @focus="${mn(this,qi,C$)}"
                >
                  <slot name="section"></slot>
                </div>
              </div>
            </div>
          `:Qe`<slot name="section"></slot>`}
    `}}qi=new WeakSet,oIe=function(){setTimeout(()=>this._overlayCleanup=j3t(this))},_$=function(){document.addEventListener("click",this._handleClickOutside),document.addEventListener("focusout",this._handleClickOutside),document.addEventListener("keydown",this._handleKeyDown),mn(this,qi,oIe).call(this)},E$=function(){document.removeEventListener("click",this._handleClickOutside),document.removeEventListener("focusout",this._handleClickOutside),document.removeEventListener("keydown",this._handleKeyDown),this._overlayCleanup()},aIe=function(n){V3t(n,this)},S$=function(n){G3t(n,this)},A$=function(n){H3t(n,this)},lIe=function(){q3t(this)},C$=function(n){U3t(n,this)},uIe=function(n){g3t(n,this)},cIe=function(n){B$e(n,this)};customElements.define("eox-itemfilter-container",zkt);function jkt(e){const t=e.renderRoot.querySelector("input[type='text']");t.value="",kR(e.filterObject),e.requestUpdate()}function Ukt(e){const t=e.renderRoot.querySelector("input[type='text']");e.isValid=t.checkValidity(),e.filterObject.keys.forEach(n=>{e.filterObject.state[n]=t.value}),e.filterObject.dirty=!0,e.filterObject.stringifiedState=t.value,e.dispatchEvent(new CustomEvent("filter")),t.value===""&&e.reset()}const k$="ddd, D MMM YYYY HH:mm:ss";function qkt(e){if(e.filterObject=kR(e.filterObject),e.filterObject){const t=e.querySelector("tc-range-slider"),n=e.filterObject.min,r=e.filterObject.max;t.value1!==n&&(t.value1=n),t.value2!==r&&(t.value2=r)}e.requestUpdate()}function Hkt(e,t){const[n,r]=e.detail.values;(n!==t.filterObject.state.min||r!==t.filterObject.state.max)&&([t.filterObject.state.min,t.filterObject.state.max]=[n,r],t.filterObject.dirty=!0),t.filterObject.dirty&&(t.filterObject.stringifiedState=t.filterObject.format==="date"?`${Ac.unix(n).format(k$)} - ${Ac.unix(r).format(k$)}`:`${n} - ${r}`),t.dispatchEvent(new CustomEvent("filter")),n===t.filterObject.min&&r===t.filterObject.max?t.reset():t.requestUpdate()}function Gkt(e,t,n){const r=n.filterObject.format==="date",i=n.filterObject.state[e],s=r?Ac.unix(i).format(k$):i;return Qe`<div class="range-${t}">${s}</div>`}function Vkt(e){Wkt(-1,e),kR(e.filterObject),e.requestUpdate()}function Wkt(e,t){t.selectedItems=[],CB(t),dIe(t)}function fIe(e,t){const n=t.selectedItems.indexOf(e);n>=0?t.selectedItems=t.selectedItems.filter((r,i)=>i!==n):t.type==="multiselect"?t.selectedItems=[...t.selectedItems,e]:(t.selectedItems=[e],t.showSuggestions=!1),CB(t),dIe(t)}function Ykt(e,t){t.query=e.target.value,t.showSuggestions=!0}function Xkt(e,t){switch(e.key){case"ArrowDown":t.highlightedIndex=Math.min(t.highlightedIndex+1,t.filteredSuggestions.length-1);break;case"ArrowUp":t.highlightedIndex=Math.max(t.highlightedIndex-1,0);break;case"Enter":t.highlightedIndex>=0&&fIe(t.filteredSuggestions[t.highlightedIndex],t);break;case"Escape":t.showSuggestions=!1;break}}function Zkt(e,t){(e.has("suggestions")||e.has("query"))&&CB(t)}function Kkt(e,t){var r;const n=((r=e.filterObject)==null?void 0:r.sort)||((i,s)=>i.localeCompare(s));return t.sort(n).map(i=>i)}function CB(e){var n,r,i;let t;e.query&&(t=new wm(e.suggestions,{threshold:.4}).search(e.query).map(o=>o.item)),e.filteredSuggestions=Kkt(e,t||e.suggestions),(n=e.filterObject)!=null&&n.filterKeys&&(e.filteredSuggestions=(r=e.filterObject)==null?void 0:r.filterKeys.map(s=>`${s}`),e.filterObject.state=(i=e.filterObject)==null?void 0:i.filterKeys.map(s=>`${s}`).reduce((s,o)=>(o in s||(s[o]=void 0),s),e.filterObject.state)),e.highlightedIndex=-1}function dIe(e){Object.keys(e.filterObject.state).forEach(t=>{e.filterObject.state[t]=e.selectedItems.includes(t)}),e.filterObject.stringifiedState=Object.keys(e.filterObject.state).filter(t=>e.filterObject.state[t]).join(", ")||"",e.filterObject.dirty=e.filterObject.stringifiedState.length>0,e.dispatchEvent(new CustomEvent("filter")),e.requestUpdate()}function Jkt(e){kR(e.filterObject),e.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),e.requestUpdate()}function Qkt(e){e.renderRoot.querySelector("#eox-map").innerHTML="",hIe(e)}function eTt(e,t){t.filterObject.state.mode=e;const n=new CustomEvent("filter",{detail:{[t.filterObject.key]:{}}});t.dispatchEvent(n)}function hIe(e){const t=e.renderRoot.querySelector("#eox-map");t.innerHTML===""&&(t.innerHTML='<eox-map part="map" style="height: 400px"></eox-map>');const n=e.geometry&&tTt(e.geometry),r=Pkt(e.geometry,n);e.eoxMap=e.renderRoot.querySelector("eox-map"),setTimeout(()=>{e.eoxMap.layers=r;const i=s=>{const o=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:s.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});e.dispatchEvent(o)};e.eoxMap.interactions.drawInteraction.on("drawend",s=>{i(s.feature),e.eoxMap.removeInteraction("drawInteraction")}),e.eoxMap.interactions.drawInteraction_modify.on("modifyend",s=>{i(s.features.getArray()[0])})},1e3)}function tTt(e){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:e}]}))}`}var TT;class nTt extends Zr{constructor(){super();yn(this,TT,()=>{Ukt(this)});tn(this,"debouncedInputHandler",G0(Gt(this,TT),500,{leading:!0}));this.filterObject={},this.unstyled=!1,this.tabIndex=0,this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number},unstyled:{type:Boolean},isValid:{state:!0,type:Boolean}}}reset(){jkt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>{var n;return Qe`
        <style></style>
        <div class="text-container">
          <div class="text-container-wrapper">
            <input
              type="text"
              placeholder=${this.filterObject.placeholder}
              data-cy="search"
              class="text-input"
              part="input-search"
              value="${Object.values(this.filterObject.state)[0]}"
              tabindex=${this.tabIndex}
              pattern="${((n=this.filterObject.validation)==null?void 0:n.pattern)||".*"}"
              @input="${this.debouncedInputHandler}"
              @click=${r=>r.stopPropagation()}
            />
          </div>
        </div>
        <small class="error-validation"
          >${this.filterObject.validation&&this.isValid===!1?this.filterObject.validation.message:""}</small
        >
      `})}}TT=new WeakMap;customElements.define("eox-itemfilter-text",nTt);function rTt(e,t,n){return e.filter(r=>{const i=r[n.config.aggregateResults];let s;return n.filters[n.config.aggregateResults]&&(s=Object.keys(n.filters[n.config.aggregateResults]).filter(a=>n.filters[n.config.aggregateResults].state[a])),(s!=null&&s.length?s.includes(t):!0)&&Array.isArray(i)?i.includes(t):i===t})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const SEe=(e,t,n)=>{const r=new Map;for(let i=t;i<=n;i++)r.set(e[i],i);return r},pIe=J2(class extends iD{constructor(e){if(super(e),e.type!==np.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,n){let r;n===void 0?n=t:t!==void 0&&(r=t);const i=[],s=[];let o=0;for(const a of e)i[o]=r?r(a,o):o,s[o]=n(a,o),o++;return{values:s,keys:i}}render(e,t,n){return this.dt(e,t,n).values}update(e,[t,n,r]){const i=UBe(e),{values:s,keys:o}=this.dt(t,n,r);if(!Array.isArray(i))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let u,f,c=0,d=i.length-1,h=0,p=s.length-1;for(;c<=d&&h<=p;)if(i[c]===null)c++;else if(i[d]===null)d--;else if(a[c]===o[h])l[h]=Qm(i[c],s[h]),c++,h++;else if(a[d]===o[p])l[p]=Qm(i[d],s[p]),d--,p--;else if(a[c]===o[p])l[p]=Qm(i[c],s[p]),ew(e,l[p+1],i[c]),c++,p--;else if(a[d]===o[h])l[h]=Qm(i[d],s[h]),ew(e,i[c],i[d]),d--,h++;else if(u===void 0&&(u=SEe(o,h,p),f=SEe(a,c,d)),u.has(a[c]))if(u.has(a[d])){const g=f.get(o[h]),v=g!==void 0?i[g]:null;if(v===null){const y=ew(e,i[c]);Qm(y,s[h]),l[h]=y}else l[h]=Qm(v,s[h]),ew(e,i[c],v),i[g]=null;h++}else ZR(i[d]),d--;else ZR(i[c]),c++;for(;h<=p;){const g=ew(e,l[p+1]);Qm(g,s[h]),l[h++]=g}for(;c<=d;){const g=i[c++];g!==null&&ZR(g)}return this.ut=o,rI(e,l),lv}});function iTt(e,t){return Qe`
    <details
      class="details-results"
      @toggle=${t.handleAccordion}
      ?open=${t.config.expandResults||Xr}
    >
      <summary>
        <span class="title">
          ${e}
          <span class="count"
            >${t.aggregateResults(t.results,e).length}</span
          >
        </span>
      </summary>
      <div>
        ${mIe(e,t)}
      </div>
    </details>
  `}function mIe(e,t){const n=t.results,r=e?t.aggregateResults(n,e):n,i=t.config,s=o=>{var a;return((a=t.selectedResult)==null?void 0:a[i.idProperty])===o[i.idProperty]?"highlighted":Xr};return Qe`
    <ul class=${t.resultType}>
      ${pIe(r,o=>o.id,o=>Qe`
          <li
            class=${s(o)}
            @click=${()=>{t.selectedResult===o?t.selectedResult=null:t.selectedResult=o,t.dispatchEvent(new CustomEvent("result",{detail:t.selectedResult}))}}
          >
            <span id="${o.id}">
              ${Un(i.subTitleProperty||i.imageProperty,()=>Qe`
                  ${L2(i.imageProperty,o)?Qe`
                        <img
                          class="image"
                          src="${L2(i.imageProperty,o)}"
                        />
                      `:Qe`
                        <svg
                          class="image"
                          width="800"
                          height="600"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <rect
                            width="800"
                            height="600"
                            fill="var(--primary-color)"
                          />
                        </svg>
                      `}
                  <div class="title-container">
                    <span class="title"
                      >${Sc(o[i.titleProperty])}</span
                    >
                    <span class="subtitle"
                      >${Sc(o[i.subTitleProperty])}</span
                    >
                  </div>
                `,()=>Qe`
                  <span class="title"
                    >${Sc(o[i.titleProperty])}</span
                  >
                `)}
            </span>
          </li>
        `)}
    </ul>
  `}var E0,T$,gIe;class sTt extends Zr{constructor(){super();yn(this,E0);this.config=null,this.filters={},this.resultAggregation=[],this.selectedResult=null,this.resultType="list"}static get properties(){return{config:{attribute:!1,type:Object},results:{state:!0,type:Object},filters:{state:!0,type:Object},resultAggregation:{attribute:!1,type:Array},selectedResult:{state:!0,type:Object},resultType:{attribute:"result-type",type:String}}}aggregateResults(n,r){return rTt(n,r,this)}createRenderRoot(){return this}handleAccordion(n){sIe(n,this.config,this)}render(){return Qe`
      <section id="section-results">
        <div slot="resultstitle"></div>
        <div id="container-results" class="scroll">
          ${Un(this.results.length<1,()=>Qe`<small class="no-results">No matching items</small>`,()=>Xr)}
          <ul id="results" part="results">
            ${Un(this.config.aggregateResults,()=>su(this.resultAggregation.filter(n=>this.aggregateResults(this.results,n).length),n=>Qe`${Un(this.aggregateResults(this.results,n).length===1&&this.config.autoSpreadSingle,()=>Qe`<div style="margin-left: -8px">
                          ${mn(this,E0,T$).call(this,n)}
                        </div>`,()=>mn(this,E0,gIe).call(this,n))}`),()=>mn(this,E0,T$).call(this))}
          </ul>
        </div>
      </section>
    `}}E0=new WeakSet,T$=function(n){return mIe(n,this)},gIe=function(n){return iTt(n,this)};customElements.define("eox-itemfilter-results",sTt);const TR=`input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}`,kB=`input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}`;var sm,vIe,bIe,xIe;class yIe extends Zr{constructor(){super();yn(this,sm);tn(this,"debouncedInputHandler",G0(mn(this,sm,xIe),500,{leading:!0}));this.filterObject={},this.suggestions=[],this.selectedItems=[],this.query="",this.showSuggestions=!1,this.highlightedIndex=-1,this.filteredSuggestions=[],this.type="select",this.unstyled=!1,this.tabIndex=0,this.inlineMode=!1}updated(n){Zkt(n,this)}reset(){Vkt(this)}firstUpdated(){this.filterObject.state&&(this.selectedItems=Object.keys(this.filterObject.state).map(n=>this.filterObject.state[n]?n:null).filter(n=>!!n),this.filterObject.stringifiedState=this.selectedItems.join(", ")||"",this.requestUpdate())}render(){const n=this.type.includes("multi")?"checkbox":"radio",r=this.filteredSuggestions.length>5?"select-overflow":Xr;return Qe`
      <style>
        ${!this.unstyled&&tS}
        ${!this.unstyled&&TR}
        ${!this.unstyled&&kB}
      </style>
      ${Un(this.suggestions.length>10,()=>Qe`<div class="autocomplete-container">
            <div class="autocomplete-container-wrapper">
              <input
                autocomplete="off"
                tabindex=${this.tabIndex}
                class="autocomplete-input"
                type="text"
                .value=${this.query}
                placeholder="${this.filterObject.placeholder||""}"
                @input=${mn(this,sm,vIe)}
                @keydown=${mn(this,sm,bIe)}
                @blur=${()=>this.showSuggestions=!1}
                @focus=${()=>this.showSuggestions=!0}
              />
            </div>
          </div>`)}
      <div class="select-container ${r}">
        <ul class="${this.type}">
          ${this.filteredSuggestions.map(i=>Qe`
              <li
                data-identifier="${i.toString().toLowerCase()}"
                data-title="${i}"
              >
                <label>
                  <input
                    type="${n}"
                    name=${i}
                    .checked=${this.selectedItems.includes(i)}
                    @change=${()=>this.debouncedInputHandler(i)}
                    @keydown=${s=>{s.key===" "&&this.inlineMode&&this.debouncedInputHandler(i)}}
                    tabindex=${this.tabIndex+1}
                  />
                  <span class="title">${i}</span>
                </label>
              </li>
            `)}
        </ul>
      </div>
    `}}sm=new WeakSet,vIe=function(n){Ykt(n,this)},bIe=function(n){Xkt(n,this)},xIe=function(n){fIe(n,this)},tn(yIe,"properties",{filterObject:{attribute:!1,type:Object},suggestions:{attribute:!1,type:Array},selectedItems:{state:!0,type:Array},query:{state:!0,type:String},showSuggestions:{state:!0,type:Boolean},highlightedIndex:{state:!0,type:Number},filteredSuggestions:{state:!0,type:Array},type:{attribute:!0,type:String},unstyled:{type:Boolean},tabIndex:{attribute:!1,type:Number},inlineMode:{attribute:"inline-mode",type:Boolean}});customElements.define("eox-itemfilter-select",yIe);(()=>{var e=Object.defineProperty,t=Math.pow,n=(ge,Le,it)=>Le in ge?e(ge,Le,{enumerable:!0,configurable:!0,writable:!0,value:it}):ge[Le]=it,r=(ge,Le,it)=>(n(ge,typeof Le!="symbol"?Le+"":Le,it),it),i=(ge,Le)=>` ${Le&&Le.length>0?Le.map(it=>`<link rel="stylesheet" href="${it}" />`).join(""):""} <style> ${ge} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,s=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",u="range-dragging",f="data",c="min",d="max",h="step",p="round",g="type",v="theme",y="rtl",b="btt",w="disabled",E="keyboard-disabled",A="mousewheel-disabled",T="slider-width",D="slider-height",k="slider-radius",R="slider-bg",O="slider-bg-hover",B="slider-bg-fill",K="pointer-width",L="pointer-height",$="pointer-radius",I="pointer-bg",U="pointer-bg-hover",q="pointer-bg-focus",Y="pointer-shadow",X="pointer-shadow-hover",te="pointer-shadow-focus",le="pointer-border",ee="pointer-border-hover",z="pointer-border-focus",he="animate-onclick",de="css-links",ze="vertical",He="horizontal",je=(ge,Le,it,Ke,Et)=>{let an=Le-ge;return an===0?it:(Ke-it)*(Et-ge)/an+it},we=ge=>!isNaN(parseFloat(ge))&&isFinite(ge),Ie=(ge,Le)=>we(ge)?Number(ge):Le,qe=(ge,Le)=>Le===0?0:Math.round(ge/Le)*Le,Pe=(ge,Le=1/0)=>{if(Le===1/0)return ge;let it=t(10,Le);return Math.round(ge*it)/it},At=ge=>ge==null?!1:typeof ge=="boolean"?ge:ge.trim().toLowerCase()==="true",ht=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:Le}}))},nn=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:Le}}))},Vt=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:Le}}))},Mn=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:Le}}))},Ze=(ge,Le)=>{if(!Le||Le.length<=0)return;let it=Le.map(Et=>we(Et)?Ie(Et,Et):Et),Ke={values:it||[]};Ke.value=it[0],Ke.value0=it[0],Ke.value1=it[0];for(let Et=1;Et<it.length;Et++)Ke[`value${Et+1}`]=it[Et];ge.dispatchEvent(new CustomEvent("change",{detail:Ke}))},pe=(ge,Le,it)=>{let Ke=0,Et,an,en,wt,et=!1,hn=(pt,Xn,ni,Ar,Rr,nr)=>{let qt=Ke;ni!==void 0&&pt>ni&&(pt=ni),Xn!==void 0&&pt<Xn&&(pt=Xn),Ke=pt;let vi=Ke;return(Ar===ze&&nr||Ar===He&&Rr)&&(vi=100-vi),Ar===ze?Le.style.top=`${vi}%`:Le.style.left=`${vi}%`,qt!==Ke},An=pt=>pt===Le||Le.contains(pt),zt=(pt,Xn,ni,Ar)=>{Et=pt,an=Xn,en=ni,wt=Ar},jt=pt=>{et=pt,Le.classList.toggle("disabled",et),et?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Sr=(pt,Xn)=>{Xn==null?Le.removeAttribute(pt):Le.setAttribute(pt,Xn)},ci=pt=>Le.getAttribute(pt),Zt=pt=>{if(!et){switch(pt.key){case"ArrowLeft":{pt.preventDefault(),typeof Et=="function"&&Et(it);break}case"ArrowRight":{pt.preventDefault(),typeof an=="function"&&an(it);break}case"ArrowUp":{pt.preventDefault(),typeof en=="function"&&en(it);break}case"ArrowDown":{pt.preventDefault(),typeof wt=="function"&&wt(it);break}}Mn(ge,pt)}},Xe=()=>{et||ht(ge,Le)};return Le.className=`pointer pointer-${it}`,Le.addEventListener("keydown",Zt),Le.addEventListener("click",Xe),{$pointer:Le,get percent(){return Ke},get disabled(){return et},set disabled(pt){jt(pt)},updatePosition:hn,isClicked:An,setCallbacks:zt,setAttr:Sr,getAttr:ci,destroy:()=>{Le.removeEventListener("keydown",Zt),Le.removeEventListener("click",Xe),Le.remove()}}},ie=ge=>{if(ge==null)return;if(Array.isArray(ge))return ge;if(ge.trim()==="")return;let Le=ge.split(","),it=[],Ke=!0;for(let Et=0;Et<Le.length;Et++){let an=Le[Et].trim();an!==""&&(it.push(an),we(an)||(Ke=!1))}return Ke?it.map(Et=>Number(Et)):it},oe=(ge,Le)=>Le?Le.findIndex(it=>it===ge||it.toString().trim()===ge.toString().trim()):-1,be=ge=>({updatePosition:(Le,it,Ke,Et)=>{if(it.length<=0)return;let an=it.length===1,en=it[0],wt=it[it.length-1];Le===ze?(ge.style.removeProperty("width"),ge.style.removeProperty("right"),ge.style.removeProperty("left"),an?ge.style.height=`${en}%`:ge.style.height=`${Math.abs(en-wt)}%`,Et?(ge.style.bottom="0%",an?ge.style.top="auto":ge.style.top=`${Math.min(100-wt,100-en)}%`):(ge.style.bottom="auto",an?ge.style.top="0%":ge.style.top=`${Math.min(en,wt)}%`)):(ge.style.removeProperty("height"),ge.style.removeProperty("top"),ge.style.removeProperty("bottom"),an?ge.style.width=`${en}%`:ge.style.width=`${Math.abs(en-wt)}%`,Ke?(ge.style.right="0%",an?ge.style.left="auto":ge.style.left=`${Math.min(100-wt,100-en)}%`):(ge.style.right="auto",an?ge.style.left="0%":ge.style.left=`${Math.min(en,wt)}%`))}}),F="--animate-onclick",H="--width",J="--height",re="--panel-bg-border-radius",ye="--panel-bg",xe="--panel-bg-hover",Re="--panel-bg-fill",P="--pointer-width",Q="--pointer-height",se="--pointer-border-radius",ae="--pointer-bg",ke="--pointer-bg-hover",Ce="--pointer-bg-focus",Ee="--pointer-shadow",De="--pointer-shadow-hover",Oe="--pointer-shadow-focus",We="--pointer-border",tt="--pointer-border-hover",dt="--pointer-border-focus",Kt=(ge,Le,it)=>{let Ke=new Map;for(let Et of ge.attributes){let an=Et.nodeName.trim().toLowerCase();if(!Le.test(an))continue;let en=an.replace(/\D/g,"").trim(),wt=en===""||en==="0"||en==="1"?0:Ie(en,0)-1,et=it&&typeof it=="function"?it(Et.value):Et.value;Ke.set(wt,et)}return Ke},xt=ge=>{if(!ge)return null;let Le=ge.getAttribute(de);if(!Le)return null;let it=Le.split(";"),Ke=[];for(let Et of it)Et.trim()!==""&&Ke.push(Et.trim());return Ke},Qt=[[H,T,"sliderWidth",null],[J,D,"sliderHeight",null],[re,k,"sliderRadius",null],[ye,R,"sliderBg",null],[xe,O,"sliderBgHover",null],[Re,B,"sliderBgFill",null],[P,K,"pointer#Width",/^pointer([0-9]*)-width$/],[Q,L,"pointer#Height",/^pointer([0-9]*)-height$/],[se,$,"pointer#Radius",/^pointer([0-9]*)-radius$/],[ae,I,"pointer#Bg",/^pointer([0-9]*)-bg$/],[ke,U,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Ce,q,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Ee,Y,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[De,X,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Oe,te,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[We,le,"pointer#Border",/^pointer([0-9]*)-border$/],[tt,ee,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[dt,z,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],rn=(ge,Le,it)=>{let Ke=null,Et=[],an=new Map,en=(Zt,Xe=Le)=>{let pt=[...Xe.classList];for(let Xn of pt)Xn.startsWith(Zt)&&Le.classList.remove(Xn)},wt=()=>{en("shape");let Zt=Le.querySelectorAll(".pointer");for(let Xe of Zt)en("shape",Xe)},et=Zt=>{Ke=Zt,en("theme-"),typeof Zt=="string"&&Le.classList.add(`theme-${Zt}`)},hn=()=>{if(wt(),!(Et.length<=0)){Le.classList.add("shape",`shape-${Et[0]}`);for(let Zt=1;Zt<Et.length;Zt++){let Xe=Et[Zt];if(!Xe)continue;let pt=Le.querySelector(`.pointer-${Zt}`);!pt||pt.classList.add("shape",`shape-${Xe}`)}}},An=(Zt,Xe)=>{Et[Zt]=Xe,hn()},zt=()=>{wt();let Zt=Kt(ge,/^pointer([0-9]*)-shape$/);if(!(Zt.size<=0)){for(let Xe of Zt){let pt=Xe[0];Et[pt]=Xe[1]}hn()}},jt=(Zt,Xe)=>`${Zt}-${Xe}`,Sr=(Zt,Xe,pt)=>{let Xn=it[pt];if(!Xn)return;let ni=pt===0?Le:Xn.$pointer;if(Xe==null){an.has(jt(Zt,pt))&&an.delete(jt(Zt,pt)),ni.style.removeProperty(Zt);return}an.set(jt(Zt,pt),Xe),ni.style.setProperty(Zt,Xe)},ci=(Zt,Xe)=>an.get(jt(Zt,Xe));return(()=>{for(let Zt of Qt){let[Xe,pt,Xn,ni]=Zt;if(ni){let Rr=Kt(ge,ni);for(let nr of Rr){let qt=nr[0],vi=nr[1];Sr(Xe,vi,qt)}}else{let Rr=ge.getAttribute(pt);Sr(Xe,Rr,0)}let Ar=[];if(Xn.indexOf("#")===-1)Ar.push([Xn,0]);else{Ar.push([Xn.replace("#",""),0]),Ar.push([Xn.replace("#","0"),0]),Ar.push([Xn.replace("#","1"),0]);for(let Rr=1;Rr<it.length;Rr++)Ar.push([Xn.replace("#",(Rr+1).toString()),Rr])}for(let Rr of Ar)try{let nr=Rr[0],qt=Rr[1];Object.prototype.hasOwnProperty.call(ge,nr)||Object.defineProperty(ge,nr,{get(){return ci(Xe,qt)},set:vi=>{Sr(Xe,vi,qt)}})}catch(nr){console.error(nr)}}et(ge.getAttribute(v)),zt()})(),{setStyle:Sr,getStyle:ci,get theme(){return Ke},set theme(Zt){et(Zt)},get pointerShapes(){return Et},setPointerShape:An}},sn="animate-on-click",on="range-dragging",Tn=(ge,Le,it,Ke)=>{let Et=[],an=An=>{for(let zt of Et)zt.update&&typeof zt.update=="function"&&zt.update(An)},en=()=>{for(let An of Et)An.destroy&&typeof An.destroy=="function"&&An.destroy()},wt=(An,zt)=>{for(let jt of Et)jt.onAttrChange&&typeof jt.onAttrChange=="function"&&jt.onAttrChange(An,zt)},et=An=>{if(An.gettersAndSetters){for(let zt of An.gettersAndSetters)if(!(!zt.name||!zt.attributes))try{Object.prototype.hasOwnProperty.call(ge,zt.name)||Object.defineProperty(ge,zt.name,zt.attributes)}catch(jt){console.error("defineSettersGetters error:",jt)}}},hn=An=>{var zt;if(!An.css)return;let jt=(zt=ge.shadowRoot)==null?void 0:zt.querySelector("style");!jt||(jt.innerHTML+=An.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let An of window.tcRangeSliderPlugins){let zt=An();Et.push(zt),zt.init&&typeof zt.init=="function"&&(zt.init(ge,Le,it,Ke),et(zt),hn(zt))}},update:an,onAttrChange:wt,destroy:en}},Er=10,Ki=20,ds=(ge,Le)=>{let it=new Map,Ke=/^value([0-9]*)$/;for(let wt of ge.attributes){let et=wt.nodeName.trim().toLowerCase();if(!Ke.test(et))continue;let hn=et.replace("value","").trim(),An=hn===""||hn==="0"||hn==="1"?0:Ie(hn,0)-1,zt=we(wt.value)?Ie(wt.value,0):wt.value;it.set(An,zt)}let Et=Math.max(...Array.from(it.keys())),an=[];an.push([pe(ge,Le,0),it.get(0)]);let en=Le;for(let wt=1;wt<=Et;wt++){let et=Le.cloneNode(!0);en.after(et),en=et,an.push([pe(ge,et,wt),it.get(wt)])}return an},Hi=(ge,Le,it,Ke,Et,an,en)=>{try{Object.defineProperty(ge,Ke,{configurable:!0,get(){if(!Le)return;let wt=Le.pointers[it];if(!wt)return;let et=Le.getTextValue(wt.percent);return we(et)?Ie(et,et):et},set:wt=>{Le.pointers[it]?Le==null||Le.setValue(wt,it):Le==null||Le.addPointer(wt)}}),Object.defineProperty(ge,Et,{configurable:!0,get(){var wt,et;return(et=(wt=Le==null?void 0:Le.pointers[it])==null?void 0:wt.getAttr("aria-label"))!=null?et:void 0},set:wt=>{!Le||Le.setAriaLabel(it,wt)}}),Object.defineProperty(ge,an,{configurable:!0,get(){var wt,et;return(et=(wt=Le==null?void 0:Le.styles)==null?void 0:wt.pointerShapes[it])!=null?et:null},set:wt=>{!Le||!Le.styles||Le.styles.setPointerShape(it,wt)}}),Object.defineProperty(ge,en,{configurable:!0,get(){var wt;return(wt=Le==null?void 0:Le.pointers[it].disabled)!=null?wt:!1},set:wt=>{if(!Le)return;let et=Le==null?void 0:Le.pointers[it];!et||(et.disabled=wt)}})}catch(wt){console.error(wt)}},No=(ge,Le)=>{let it=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let Ke=2;Ke<Er;Ke++)it.push([`value${Ke}`,`ariaLabel${Ke}`,`pointer${Ke}Shape`,`pointer${Ke}Disabled`,Ke-1]);for(let Ke of it)Hi(ge,Le,Ke[4],Ke[0],Ke[1],Ke[2],Ke[3])},qn=(ge,Le,it)=>{var Ke;let Et=(Ke=it.shadowRoot)==null?void 0:Ke.querySelector(".container");if(Et)for(let an of ge)Le?Et.prepend(an.$pointer):Et.append(an.$pointer)},Mr=(ge,Le)=>{if(!(!Le||ge.length<=1)){for(let it of ge)it.$pointer.style.zIndex=Ki.toString();Le.$pointer.style.zIndex=(Ki*2).toString()}},Lr=0,gn=100,Kr=2,sr="0.3s",Ni=(ge,Le,it)=>{let Ke=it.map(Te=>Te[0]),Et=null,an=null,en=null,wt=null,et=Lr,hn=gn,An,zt,jt=He,Sr=Kr,ci=!1,Zt=!1,Xe=!1,pt=0,Xn=1/0,ni=!1,Ar,Rr,nr=!1,qt=!1,vi=!1,Ji=sr,bi=[],js=Te=>{nr||(Te.preventDefault&&Te.preventDefault(),bs(Te),window.addEventListener("mousemove",bs),window.addEventListener("mouseup",xo),nn(ge,Te))},xo=Te=>{nr||(Ar=void 0,Rr=void 0,window.removeEventListener("mousemove",bs),window.removeEventListener("mouseup",xo),Ji&&Le.classList.add(sn),Vt(ge,Te))},no=(Te,ut)=>{if(Ke.length<=0)return;if(Ke.length===1)return Ke[0].isClicked(Te)&&Ji&&Le.classList.remove(sn),Ke[0];let Wt=Qi(Te);if(ni){let Pn=ut,ji=Gi(Pn);ji!==void 0&&(Pn=qe(Pn,ji)),Wt?(Ar=Pn,Rr=0,Ji&&Le.classList.remove(sn)):Ar!==void 0&&(Rr=Pn-Ar,Ar=Pn)}if(!Cr(Te)&&!Wt){for(let Pn of Ke)if(!(!Pn.isClicked(Te)||Pn.disabled))return Ji&&Le.classList.remove(sn),Pn;for(let Pn of Ke)if(Et===Pn)return Pn}let Vn=1/0,mr=null;for(let Pn of Ke){if(Pn.disabled)continue;let ji=Math.abs(ut-Pn.percent);ji<Vn&&(Vn=ji,mr=Pn)}return mr},Bo=()=>Ke.findIndex(Te=>Et===Te&&!Te.disabled),bs=Te=>{let ut;if(jt===ze){let{height:Vn,top:mr}=Le.getBoundingClientRect(),Pn=Te.type.indexOf("mouse")!==-1?Te.clientY:Te.touches[0].clientY;ut=Math.min(Math.max(0,Pn-mr),Vn)*100/Vn}else{let{width:Vn,left:mr}=Le.getBoundingClientRect(),Pn=Te.type.indexOf("mouse")!==-1?Te.clientX:Te.touches[0].clientX;ut=Math.min(Math.max(0,Pn-mr),Vn)*100/Vn}if((ci||Zt)&&(ut=100-ut),Et=no(Te.target,ut),Et&&Mr(Ke,Et),ni&&Ke.length>1&&Rr!==void 0){let Vn=Ke[0],mr=Ke[Ke.length-1],Pn=Vn.percent+Rr<0,ji=mr.percent+Rr>100;if(Pn||ji)return;for(let $a=0;$a<Ke.length;$a++)or($a,Ke[$a].percent+Rr);return}let Wt=Bo();Wt!==-1&&(or(Wt,ut),Et==null||Et.$pointer.focus())},Fs=Te=>{if(nr||document.activeElement!==ge||Et!=null&&Et.disabled)return;Te.stopPropagation(),Te.preventDefault();let ut=Te.deltaY<0,Wt=ci||Zt,Vn=ut?!Wt:Wt,mr=Bo();mr!==-1&&(Vn?ro(mr,Ke[mr].percent):Os(mr,Ke[mr].percent))},zo=Te=>{nr||qt||(jt===ze?Zt?or(Te,100):or(Te,0):ci?Os(Te,Ke[Te].percent):ro(Te,Ke[Te].percent))},hs=Te=>{nr||qt||(jt===ze?Zt?or(Te,0):or(Te,100):ci?ro(Te,Ke[Te].percent):Os(Te,Ke[Te].percent))},ol=Te=>{nr||qt||(jt===ze?Zt?Os(Te,Ke[Te].percent):ro(Te,Ke[Te].percent):ci?or(Te,100):or(Te,0))},al=Te=>{nr||qt||(jt===ze?Zt?ro(Te,Ke[Te].percent):Os(Te,Ke[Te].percent):ci?or(Te,0):or(Te,100))},Cr=Te=>Te.classList.contains("panel"),Qi=Te=>Te.classList.contains("panel-fill"),ro=(Te,ut)=>{if(ut===void 0)return;let Wt=Gi(ut);Wt==null&&(Wt=1),ut-=Wt,ut<0&&(ut=0),or(Te,ut)},Os=(Te,ut)=>{if(ut===void 0)return;let Wt=Gi(ut);Wt==null&&(Wt=1),ut+=Wt,ut>100&&(ut=100),or(Te,ut)},Us=()=>{!wt||wt.update({percents:Ma(),values:so(),$pointers:Wi(),min:oo(),max:ul(),data:Ht(),step:jo(),round:me(),type:Z(),textMin:io(),textMax:ps(),rightToLeft:It(),bottomToTop:In(),pointersOverlap:Ai(),pointersMinDistance:Be(),pointersMaxDistance:yt(),rangeDragging:Jr(),disabled:dr(),keyboardDisabled:kr(),mousewheelDisabled:Ln()})},fa=()=>{Us()},qs=Te=>{if(!(Xe||Ke.length<=1||hn===et))if(Te===0){let ut=Xn*100/(hn-et);return Math.max(0,Ke[Te+1].percent-ut)}else{let ut=pt*100/(hn-et);return Math.min(Ke[Te-1].percent+ut,100)}},ll=Te=>{if(!(Xe||Ke.length<=1||hn===et))if(Te===Ke.length-1){let ut=Xn*100/(hn-et);return Math.min(Ke[Te-1].percent+ut,100)}else{let ut=pt*100/(hn-et);return Math.max(0,Ke[Te+1].percent-ut)}},Gi=Te=>{let ut;if(typeof An=="function"){let Wt=je(0,100,et,hn,Te);ut=An(Wt,Te)}else ut=An;if(we(ut)){let Wt=hn-et;return ut=Wt===0?0:ut*100/Wt,ut}},Vi=Te=>{if(Te===void 0)return;let ut=je(0,100,et,hn,Te);return zt!==void 0?zt[Math.round(ut)]:Pe(ut,Sr)},io=()=>zt!==void 0?zt[et]:et,ps=()=>zt!==void 0?zt[hn]:hn,jo=()=>An,Hs=Te=>{var ut;return Te<=0||Xe?io():(ut=Vi(Ke[Te-1].percent))!=null?ut:""},fi=Te=>{var ut;return Ke.length<=1||Te>=Ke.length-1||Xe?ps():(ut=Vi(Ke[Te+1].percent))!=null?ut:""},Ma=()=>Ke.map(Te=>Te.percent),so=()=>Ke.map(Te=>Vi(Te.percent)),Wi=()=>Ke.map(Te=>Te.$pointer),oo=()=>et,ul=()=>hn,Ht=()=>zt,Z=()=>jt,me=()=>Sr,Be=()=>pt,yt=()=>Xn,pn=Te=>bi[Te],It=()=>ci,In=()=>Zt,dr=()=>nr,kr=()=>qt,Ln=()=>vi,Ai=()=>Xe,Jr=()=>ni,or=(Te,ut)=>{if(ut===void 0)return;let Wt=Gi(ut);Wt!==void 0&&(ut=qe(ut,Wt));let Vn=Ke[Te];if(!Vn)return;let mr=Vn.updatePosition(ut,qs(Te),ll(Te),jt,ci,Zt);an==null||an.updatePosition(jt,Ke.map(Pn=>Pn.percent),ci,Zt),Us();for(let Pn of Ke){let ji=Vi(Pn.percent);ji!==void 0&&(Pn.setAttr("aria-valuenow",ji.toString()),Pn.setAttr("aria-valuetext",ji.toString()))}Gs(),mr&&Ze(ge,Ke.map(Pn=>Vi(Pn.percent)))},di=()=>{for(let Te=0;Te<Ke.length;Te++)or(Te,Ke[Te].percent)},xs=(Te,ut)=>{et=zt!==void 0?0:Ie(Te,Lr),hn=zt!==void 0?zt.length-1:Ie(ut,gn),Bi(et),zi(hn)},Gs=()=>{var Te,ut;for(let Wt=0;Wt<Ke.length;Wt++){let Vn=Ke[Wt];Vn.setAttr("aria-valuemin",((Te=Hs(Wt))!=null?Te:"").toString()),Vn.setAttr("aria-valuemax",((ut=fi(Wt))!=null?ut:"").toString())}},Bi=Te=>{et=Ie(Te,Lr),et>hn&&(hn=et+gn),di()},zi=Te=>{hn=Ie(Te,gn),hn<et&&(hn=et+gn),di()},wo=Te=>{Xe=!0;for(let ut=0;ut<Te.length;ut++)Hr(Te[ut],ut);Xe=!1;for(let ut=0;ut<Te.length;ut++)Hr(Te[ut],ut)},Hr=(Te,ut)=>{let Wt;zt!==void 0?(Wt=Te==null?0:oe(Te,zt),Wt===-1&&(Wt=0)):(Wt=Ie(Te,et),Wt<et&&(Wt=et),Wt>hn&&(Wt=hn));let Vn=je(et,hn,0,100,Wt);or(ut,Vn)},da=Te=>{if(Te==null){An=void 0;return}if(typeof Te=="function"){An=Te,di();return}if(we(Te)){An=Ie(Te,1);let ut=Math.abs(hn-et);An>ut&&(An=void 0),di();return}An=void 0},Gu=Te=>{Xe=Te,di()},cl=Te=>{(!we(Te)||Te<0)&&(Te=0),pt=Te},fl=Te=>{(!we(Te)||Te<0)&&(Te=1/0),Xn=Te},Vc=Te=>{nr=Te,Le.classList.toggle("disabled",nr),nr?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Vu=Te=>{qt=Te},ne=Te=>{vi=Te,vi?document.removeEventListener("wheel",Fs):document.addEventListener("wheel",Fs,{passive:!1})},_e=Te=>{if(Te==null){zt=void 0;return}if(zt=ie(Te),zt===void 0||zt.length<=0){zt=void 0;return}Bi(0),zi(zt.length-1),An===void 0&&da(1)},Ye=Te=>{var ut;typeof Te=="string"?jt=Te.trim().toLowerCase()===ze?ze:He:jt=He;let Wt=(ut=ge.shadowRoot)==null?void 0:ut.querySelector(".range-slider-box");if(!Wt)return;Wt.className=`range-slider-box type-${jt}`,di();let Vn=jt===ze?"vertical":"horizontal";for(let mr of Ke)mr.setAttr("aria-orientation",Vn)},vt=Te=>{ci=Te,Ke.length>1&&qn(Ke,ci,ge),di(),Us()},Jt=Te=>{Zt=Te,Ke.length>1&&qn(Ke,Zt,ge),di(),Us()},Ut=Te=>{Sr=Ie(Te,Kr),Sr<0&&(Sr=Kr),Us()},Sn=Te=>{Te==null||Te.toString().trim().toLowerCase()==="false"?(Ji=void 0,Le.style.removeProperty(F),Le.classList.remove(sn)):(Ji=Te.toString(),Le.style.setProperty(F,Ji),Le.classList.add(sn))},pr=(Te,ut)=>{let Wt=Ke[Te];!Wt||(Wt.setAttr("aria-label",ut),bi[Te]=ut)},Ir=Te=>{if(Ar=void 0,Ke.length<=1){ni=!1,Le.classList.remove(on);return}ni=Te,Le.classList.toggle(on,ni)},es=()=>{Vc(At(ge.getAttribute(w))),qt=At(ge.getAttribute(E)),vi=At(ge.getAttribute(A));let Te=Kt(ge,/^pointer([0-9]*)-disabled$/,ut=>At(ut));for(let ut of Te){let Wt=ut[0];!Ke[Wt]||(Ke[Wt].disabled=ut[1])}},ws=()=>{let Te=Kt(ge,/^aria-label([0-9]*)$/);for(let ut of Te){let Wt=ut[0];pr(Wt,ut[1])}},xi=Te=>{let ut=Ke.length,Wt=Ke[ut-1].$pointer,Vn=Wt.cloneNode(!0);Wt.after(Vn);let mr=pe(ge,Vn,ut);return mr.setCallbacks(zo,hs,ol,al),Ke.push(mr),Hr(Te,ut),di(),Us(),ut},Li=()=>{let Te=Ke.length,ut=Ke[Te-1];return ut?(ut.destroy(),Ke.pop(),Ke.length<=1&&Ir(!1),di(),Us(),Te-1):-1};return(()=>{var Te,ut;for(let Vn of Ke)Vn.setCallbacks(zo,hs,ol,al);let Wt=(Te=ge.shadowRoot)==null?void 0:Te.querySelector(".panel-fill");Wt&&(an=be(Wt)),Ye(ge.getAttribute(g)),vt(At(ge.getAttribute(y))),Jt(At(ge.getAttribute(b))),xs(ge.getAttribute(c),ge.getAttribute(d)),da(ge.getAttribute(h)),_e(ge.getAttribute(f)),wo(it.map(Vn=>Vn[1])),Gu(At(ge.getAttribute(o))),cl(Ie(ge.getAttribute(a),0)),fl(Ie(ge.getAttribute(l),1/0)),Ir(At(ge.getAttribute(u))),Ut(Ie(ge.getAttribute(p),Kr)),es(),ws(),en=rn(ge,Le,Ke),Sn((ut=ge.getAttribute(he))!=null?ut:sr),Le.addEventListener("mousedown",js),Le.addEventListener("mouseup",xo),Le.addEventListener("touchmove",bs),Le.addEventListener("touchstart",bs),vi||document.addEventListener("wheel",Fs,{passive:!1}),wt=Tn(ge,fa,{setValues:wo,setMin:Bi,setMax:zi,setStep:da,setPointersOverlap:Gu,setPointersMinDistance:cl,setPointersMaxDistance:fl,setDisabled:Vc,setType:Ye,setRightToLeft:vt,setBottomToTop:Jt,setRound:Ut,setKeyboardDisabled:Vu,setMousewheelDisabled:ne,setRangeDragging:Ir,setData:_e},{getPercents:Ma,getValues:so,getPointerElements:Wi,getMin:oo,getMax:ul,getStep:jo,getData:Ht,getType:Z,getRound:me,getTextMin:io,getTextMax:ps,isRightToLeft:It,isBottomToTop:In,isDisabled:dr,isKeyboardDisabled:kr,isMousewheelDisabled:Ln,isPointersOverlap:Ai,isRangeDraggingEnabled:Jr,getPointersMinDistance:Be,getPointersMaxDistance:yt}),wt.init()})(),{get pointers(){return Ke},get styles(){return en},get pluginsManager(){return wt},get min(){return io()},get max(){return ps()},get step(){return jo()},get pointersOverlap(){return Ai()},set pointersOverlap(Te){Gu(Te)},get pointersMinDistance(){return Be()},set pointersMinDistance(Te){cl(Te)},get pointersMaxDistance(){return yt()},set pointersMaxDistance(Te){fl(Te)},get disabled(){return dr()},set disabled(Te){Vc(Te)},get data(){return Ht()},get type(){return Z()},set type(Te){Ye(Te)},get rightToLeft(){return It()},set rightToLeft(Te){vt(Te)},get bottomToTop(){return In()},set bottomToTop(Te){Jt(Te)},get round(){return me()},set round(Te){Ut(Te)},get animateOnClick(){return Ji},set animateOnClick(Te){Sn(Te)},get keyboardDisabled(){return kr()},set keyboardDisabled(Te){Vu(Te)},get mousewheelDisabled(){return Ln()},set mousewheelDisabled(Te){ne(Te)},get rangeDragging(){return Jr()},set rangeDragging(Te){Ir(Te)},setMin:Bi,setMax:zi,setValue:Hr,setStep:da,setData:_e,getTextValue:Vi,setAriaLabel:pr,getAriaLabel:pn,addPointer:xi,removePointer:Li,destroy:()=>{Le.removeEventListener("mousedown",js),Le.removeEventListener("mouseup",xo),Le.removeEventListener("touchmove",bs),Le.removeEventListener("touchstart",bs),document.removeEventListener("wheel",Fs);for(let Te of Ke)Te.destroy();wt==null||wt.destroy()}}},tr=(ge,Le,it)=>{let Ke=Qt.find(([wt,et,hn,An])=>et.replace("#","")===Le.replace(/\d+/g,""));if(Ke&&ge.styles){let[wt,et,hn,An]=Ke,zt=Le.replace(/\D/g,"").trim(),jt=zt===""||zt==="0"||zt==="1"?0:Ie(zt,0)-1;ge.styles.setStyle(wt,it,jt);return}switch(ge&&ge.pluginsManager&&ge.pluginsManager.onAttrChange(Le,it),Le){case c:{ge.setMin(it);break}case d:{ge.setMax(it);break}case h:{ge.setStep(it);break}case o:{ge.pointersOverlap=At(it);break}case a:{ge.pointersMinDistance=Ie(it,0);break}case u:{ge.rangeDragging=At(it);break}case l:{ge.pointersMaxDistance=Ie(it,1/0);break}case w:{ge.disabled=At(it);break}case E:{ge.keyboardDisabled=At(it);break}case A:{ge.mousewheelDisabled=At(it);break}case f:{ge.setData(it);break}case g:{ge.type=it;break}case y:{ge.rightToLeft=At(it);break}case b:{ge.bottomToTop=At(it);break}case p:{ge.round=Ie(it,Kr);break}case v:{ge.styles&&(ge.styles.theme=it);break}case he:{ge.animateOnClick=it;break}}let Et=null;if(/^value([0-9]*)$/.test(Le)&&(Et="value"),/^pointer([0-9]*)-disabled$/.test(Le)&&(Et="pointer-disabled"),/^aria-label([0-9]*)$/.test(Le)&&(Et="aria-label"),/^pointer([0-9]*)-shape$/.test(Le)&&(Et="pointer-shape"),!Et)return;let an=Le.replace(/\D/g,"").trim(),en=an===""||an==="0"||an==="1"?0:Ie(an,0)-1;switch(Et){case"value":{ge.setValue(it,en);break}case"pointer-disabled":{let wt=ge==null?void 0:ge.pointers[en];if(!wt)return;wt.disabled=At(it);break}case"aria-label":{ge.setAriaLabel(en,it);break}case"pointer-shape":{ge.styles&&ge.styles.setPointerShape(en,it);break}}},$r=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(ge){this.slider&&this.slider.setStep(ge)}get step(){var ge;return(ge=this.slider)==null?void 0:ge.step}set disabled(ge){this.slider&&(this.slider.disabled=ge)}get disabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.disabled)!=null?Le:!1}set data(ge){var Le;(Le=this.slider)==null||Le.setData(ge)}get data(){var ge;return(ge=this.slider)==null?void 0:ge.data}set min(ge){var Le;(Le=this.slider)==null||Le.setMin(ge)}get min(){var ge;return(ge=this.slider)==null?void 0:ge.min}set max(ge){var Le;(Le=this.slider)==null||Le.setMax(ge)}get max(){var ge;return(ge=this.slider)==null?void 0:ge.max}set round(ge){!this.slider||(this.slider.round=ge)}get round(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.round)!=null?Le:Kr}set type(ge){!this.slider||(this.slider.type=ge??He)}get type(){var ge;return((ge=this.slider)==null?void 0:ge.type)||He}set pointersOverlap(ge){!this.slider||(this.slider.pointersOverlap=ge)}get pointersOverlap(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersOverlap)!=null?Le:!1}set pointersMinDistance(ge){!this.slider||(this.slider.pointersMinDistance=ge)}get pointersMinDistance(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersMinDistance)!=null?Le:0}set pointersMaxDistance(ge){!this.slider||(this.slider.pointersMaxDistance=ge)}get pointersMaxDistance(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersMaxDistance)!=null?Le:1/0}set theme(ge){!this.slider||!this.slider.styles||(this.slider.styles.theme=ge)}get theme(){var ge,Le,it;return(it=(Le=(ge=this.slider)==null?void 0:ge.styles)==null?void 0:Le.theme)!=null?it:null}set rtl(ge){!this.slider||(this.slider.rightToLeft=ge)}get rtl(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.rightToLeft)!=null?Le:!1}set btt(ge){!this.slider||(this.slider.bottomToTop=ge)}get btt(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.bottomToTop)!=null?Le:!1}set keyboardDisabled(ge){!this.slider||(this.slider.keyboardDisabled=ge)}get keyboardDisabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.keyboardDisabled)!=null?Le:!1}set mousewheelDisabled(ge){!this.slider||(this.slider.mousewheelDisabled=ge)}get mousewheelDisabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.mousewheelDisabled)!=null?Le:!1}set animateOnClick(ge){!this.slider||(this.slider.animateOnClick=ge)}get animateOnClick(){var ge;return(ge=this.slider)==null?void 0:ge.animateOnClick}get rangeDragging(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.rangeDragging)!=null?Le:!1}set rangeDragging(ge){this.slider&&(this.slider.rangeDragging=At(ge))}get externalCSSList(){return this._externalCSSList}addPointer(ge){var Le,it;if(!this.slider)return;let Ke=(it=(Le=this.slider)==null?void 0:Le.addPointer(ge))!=null?it:0;Hi(this,this.slider,Ke,`value${Ke+1}`,`ariaLabel${Ke+1}`,`pointerShape${Ke+1}`,`pointer${Ke+1}Disabled`)}removePointer(){var ge;!this.slider||(ge=this.slider)==null||ge.removePointer()}addCSS(ge){if(!this.shadowRoot)return;let Le=document.createElement("style");Le.textContent=ge,this.shadowRoot.appendChild(Le)}connectedCallback(){var ge,Le;if(!this.shadowRoot)return;this._externalCSSList=xt(this),this.shadowRoot.innerHTML=i(s,this._externalCSSList);let it=(ge=this.shadowRoot)==null?void 0:ge.querySelector(".pointer");if(!it)return;let Ke=(Le=this.shadowRoot)==null?void 0:Le.getElementById("range-slider");if(!Ke)return;let Et=ds(this,it);this.slider=Ni(this,Ke,Et),No(this,this.slider),this._observer=new MutationObserver(an=>{an.forEach(en=>{var wt;if(!this.slider||en.type!=="attributes")return;let et=en.attributeName;!et||tr(this.slider,et,(wt=this.getAttribute(et))!=null?wt:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},to=$r;window.tcRangeSlider=to,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",to),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends to{})})();var S0,_Ie,D$;class wIe extends Zr{constructor(){super();yn(this,S0);this.filterObject={},this.tabIndex=0,this.inputHandler=mn(this,S0,_Ie).bind(this),this.debouncedInputHandler=G0(this.inputHandler,500,{leading:!1})}reset(){qkt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>Qe`
        ${mn(this,S0,D$).call(this,"min","before")}
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min||this.filterObject.min}"
          value2="${this.filterObject.state.max||this.filterObject.max}"
          step="${this.filterObject.step||1}"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        ${mn(this,S0,D$).call(this,"max","after")}
      `)}}S0=new WeakSet,_Ie=function(n){Hkt(n,this)},D$=function(n,r){return Gkt(n,r,this)},tn(wIe,"properties",{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number}});customElements.define("eox-itemfilter-range",wIe);var DT,EIe;class oTt extends Zr{constructor(){super();yn(this,DT);this.filterObject={},this.tabIndex=0}static get properties(){return{filterObject:{type:Object},tabIndex:{attribute:!1,type:Number}}}reset(){Jkt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>{var n;return Qe`
        <form style="display: inline">
          ${su(["intersects","within"],r=>Qe`
              <label>
                <input
                  tabindex=${this.tabIndex}
                  type="radio"
                  name="mode"
                  .checked="${(this.filterObject.state.mode||"")===r||Xr}"
                  value="${r}"
                  @click=${()=>mn(this,DT,EIe).call(this,r)}
                />
                <small>${r} filter geometry</small>
              </label>
            `)}
        </form>
        <eox-itemfilter-spatial-filter
          exportparts="map: spatial-filter-map"
          .geometry="${(n=this.filterObject.state)==null?void 0:n.geometry}"
          @filter="${r=>{this.filterObject.state.geometry=r.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
        ></eox-itemfilter-spatial>
      `})}}DT=new WeakSet,EIe=function(n){eTt(n,this)};customElements.define("eox-itemfilter-spatial",oTt);var LT,SIe;class aTt extends Zr{constructor(){super();yn(this,LT);this.geometry=null,this.eoxMap=null}static get properties(){return{geometry:{type:Object},eoxMap:{type:Object}}}firstUpdated(){mn(this,LT,SIe).call(this)}reset(){Qkt(this)}render(){return Qe`<div id="eox-map"></div>`}}LT=new WeakSet,SIe=function(){hIe(this)};customElements.define("eox-itemfilter-spatial-filter",aTt);function lTt(e,t){t.renderRoot.querySelectorAll(".chip").forEach(n=>{n.classList.remove("highlighted")}),e.target.classList.add("highlighted"),t.requestUpdate()}function uTt(e,t){const{code:n,target:r}=e;r.id==="eox-itemfilter-input-search"&&(t.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(n)||(n==="Space"&&e.preventDefault(),["Escape","Space","Enter"].includes(n)||e.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(n)&&cTt(n,e.target.value??"",t)))}function cTt(e,t,n){const r=n.renderRoot.querySelector(".chip.highlighted");if((e==="Escape"||t)&&r&&r.classList.remove("highlighted"),e==="Backspace"&&!t){if(n.items.length){r&&(r.querySelector(".chip-item-close").click(),n.items.splice(Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(r),1));const i=n.renderRoot.querySelectorAll(".chip")[n.renderRoot.querySelectorAll(".chip").length-1];i.classList.contains("highlighted")||i.classList.add("highlighted"),n.requestUpdate()}n._dispatchEvent()}if((e==="ArrowLeft"||e==="ArrowRight")&&!t){if(n.renderRoot.querySelectorAll(".chip").length<1)return;let i=0;const s=n.renderRoot.querySelector(".chip.highlighted");s&&(i=Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(s),s.classList.remove("highlighted")),i=i+(e==="ArrowLeft"?-1:1),e==="ArrowLeft"&&i<0&&(i=n.renderRoot.querySelectorAll(".chip").length-1),e==="ArrowRight"&&i>n.renderRoot.querySelectorAll(".chip").length-1&&(i=0),Array.from(n.renderRoot.querySelectorAll(".chip"))[i].classList.add("highlighted")}}var A0,L$,AIe;class fTt extends Zr{constructor(){super();yn(this,A0);this.items={},this.controller={}}static get properties(){return{items:{attribute:!1,type:Object},controller:{attribute:!1,type:Object}}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",mn(this,A0,L$).bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",mn(this,A0,L$).bind(this))}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}render(){return Qe`
      <style>
        ${tS}
      </style>
      <span class="chip-container">
        ${su(this.items,n=>Qe`
            <span class="chip" @click=${mn(this,A0,AIe).bind(this)}>
              <span class="chip-title">${n.title}</span>
                <span
                  class="chip-item-close hidden"
                  data-close=${n.key}
                  @click=${r=>{r.stopPropagation(),this.controller.remove(r),this.requestUpdate()}}
                ></span>
            </span>
            </span>
          `)}
      </span>
    `}}A0=new WeakSet,L$=function(n){uTt(n,this)},AIe=function(n){lTt(n,this)};customElements.define("eox-itemfilter-chips",fTt);const dTt=Object.freeze({aggregateResults:void 0,autoSpreadSingle:!1,enableHighlighting:!1,externalFilter:()=>{},filterProperties:[],fuseConfig:{},inlineMode:!1,matchAllWhenEmpty:!0,showResults:!0,idProperty:"id",titleProperty:"title",subTitleProperty:void 0,imageProperty:void 0,expandMultipleFilters:!0,expandResults:!0,expandMultipleResults:!0}),AEe=["aggregateResults","autoSpreadSingle","enableHighlighting","externalFilter","filterProperties","fuseConfig","inlineMode","matchAllWhenEmpty","showResults","titleProperty","subTitleProperty","imageProperty","idProperty","expandMultipleFilters","expandResults","expandMultipleResults","items"];var KO,CEe;function hTt(){if(CEe)return KO;CEe=1;var e=200,t="__lodash_hash_undefined__",n=1/0,r="[object Function]",i="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,l=typeof self=="object"&&self&&self.Object===Object&&self,u=a||l||Function("return this")();function f(P,Q){var se=P?P.length:0;return!!se&&d(P,Q,0)>-1}function c(P,Q,se,ae){for(var ke=P.length,Ce=se+-1;++Ce<ke;)if(Q(P[Ce],Ce,P))return Ce;return-1}function d(P,Q,se){if(Q!==Q)return c(P,h,se);for(var ae=se-1,ke=P.length;++ae<ke;)if(P[ae]===Q)return ae;return-1}function h(P){return P!==P}function p(P,Q){return P.has(Q)}function g(P,Q){return P==null?void 0:P[Q]}function v(P){var Q=!1;if(P!=null&&typeof P.toString!="function")try{Q=!!(P+"")}catch{}return Q}function y(P){var Q=-1,se=Array(P.size);return P.forEach(function(ae){se[++Q]=ae}),se}var b=Array.prototype,w=Function.prototype,E=Object.prototype,A=u["__core-js_shared__"],T=function(){var P=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),D=w.toString,k=E.hasOwnProperty,R=E.toString,O=RegExp("^"+D.call(k).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=b.splice,K=oe(u,"Map"),L=oe(u,"Set"),$=oe(Object,"create");function I(P){var Q=-1,se=P?P.length:0;for(this.clear();++Q<se;){var ae=P[Q];this.set(ae[0],ae[1])}}function U(){this.__data__=$?$(null):{}}function q(P){return this.has(P)&&delete this.__data__[P]}function Y(P){var Q=this.__data__;if($){var se=Q[P];return se===t?void 0:se}return k.call(Q,P)?Q[P]:void 0}function X(P){var Q=this.__data__;return $?Q[P]!==void 0:k.call(Q,P)}function te(P,Q){var se=this.__data__;return se[P]=$&&Q===void 0?t:Q,this}I.prototype.clear=U,I.prototype.delete=q,I.prototype.get=Y,I.prototype.has=X,I.prototype.set=te;function le(P){var Q=-1,se=P?P.length:0;for(this.clear();++Q<se;){var ae=P[Q];this.set(ae[0],ae[1])}}function ee(){this.__data__=[]}function z(P){var Q=this.__data__,se=Vt(Q,P);if(se<0)return!1;var ae=Q.length-1;return se==ae?Q.pop():B.call(Q,se,1),!0}function he(P){var Q=this.__data__,se=Vt(Q,P);return se<0?void 0:Q[se][1]}function de(P){return Vt(this.__data__,P)>-1}function ze(P,Q){var se=this.__data__,ae=Vt(se,P);return ae<0?se.push([P,Q]):se[ae][1]=Q,this}le.prototype.clear=ee,le.prototype.delete=z,le.prototype.get=he,le.prototype.has=de,le.prototype.set=ze;function He(P){var Q=-1,se=P?P.length:0;for(this.clear();++Q<se;){var ae=P[Q];this.set(ae[0],ae[1])}}function je(){this.__data__={hash:new I,map:new(K||le),string:new I}}function we(P){return ie(this,P).delete(P)}function Ie(P){return ie(this,P).get(P)}function qe(P){return ie(this,P).has(P)}function Pe(P,Q){return ie(this,P).set(P,Q),this}He.prototype.clear=je,He.prototype.delete=we,He.prototype.get=Ie,He.prototype.has=qe,He.prototype.set=Pe;function At(P){var Q=-1,se=P?P.length:0;for(this.__data__=new He;++Q<se;)this.add(P[Q])}function ht(P){return this.__data__.set(P,t),this}function nn(P){return this.__data__.has(P)}At.prototype.add=At.prototype.push=ht,At.prototype.has=nn;function Vt(P,Q){for(var se=P.length;se--;)if(re(P[se][0],Q))return se;return-1}function Mn(P){if(!xe(P)||F(P))return!1;var Q=ye(P)||v(P)?O:o;return Q.test(H(P))}function Ze(P,Q,se){var ae=-1,ke=f,Ce=P.length,Ee=!0,De=[],Oe=De;if(Ce>=e){var We=pe(P);if(We)return y(We);Ee=!1,ke=p,Oe=new At}else Oe=De;e:for(;++ae<Ce;){var tt=P[ae],dt=tt;if(tt=tt!==0?tt:0,Ee&&dt===dt){for(var Kt=Oe.length;Kt--;)if(Oe[Kt]===dt)continue e;De.push(tt)}else ke(Oe,dt,se)||(Oe!==De&&Oe.push(dt),De.push(tt))}return De}var pe=L&&1/y(new L([,-0]))[1]==n?function(P){return new L(P)}:Re;function ie(P,Q){var se=P.__data__;return be(Q)?se[typeof Q=="string"?"string":"hash"]:se.map}function oe(P,Q){var se=g(P,Q);return Mn(se)?se:void 0}function be(P){var Q=typeof P;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?P!=="__proto__":P===null}function F(P){return!!T&&T in P}function H(P){if(P!=null){try{return D.call(P)}catch{}try{return P+""}catch{}}return""}function J(P){return P&&P.length?Ze(P):[]}function re(P,Q){return P===Q||P!==P&&Q!==Q}function ye(P){var Q=xe(P)?R.call(P):"";return Q==r||Q==i}function xe(P){var Q=typeof P;return!!P&&(Q=="object"||Q=="function")}function Re(){}return KO=J,KO}var pTt=hTt();const CIe=sa(pTt);var s_={exports:{}};s_.exports;var kEe;function mTt(){return kEe||(kEe=1,function(e,t){var n=200,r="Expected a function",i="__lodash_hash_undefined__",s=1,o=2,a=1/0,l=9007199254740991,u="[object Arguments]",f="[object Array]",c="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",g="[object GeneratorFunction]",v="[object Map]",y="[object Number]",b="[object Object]",w="[object Promise]",E="[object RegExp]",A="[object Set]",T="[object String]",D="[object Symbol]",k="[object WeakMap]",R="[object ArrayBuffer]",O="[object DataView]",B="[object Float32Array]",K="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",I="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",Y="[object Uint16Array]",X="[object Uint32Array]",te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/,ee=/^\./,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,he=/[\\^$.*+?()[\]{}|]/g,de=/\\(\\)?/g,ze=/^\[object .+?Constructor\]$/,He=/^(?:0|[1-9]\d*)$/,je={};je[B]=je[K]=je[L]=je[$]=je[I]=je[U]=je[q]=je[Y]=je[X]=!0,je[u]=je[f]=je[R]=je[c]=je[O]=je[d]=je[h]=je[p]=je[v]=je[y]=je[b]=je[E]=je[A]=je[T]=je[k]=!1;var we=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,Ie=typeof self=="object"&&self&&self.Object===Object&&self,qe=we||Ie||Function("return this")(),Pe=t&&!t.nodeType&&t,At=Pe&&!0&&e&&!e.nodeType&&e,ht=At&&At.exports===Pe,nn=ht&&we.process,Vt=function(){try{return nn&&nn.binding("util")}catch{}}(),Mn=Vt&&Vt.isTypedArray;function Ze(ne,_e){for(var Ye=-1,vt=ne?ne.length:0,Jt=Array(vt);++Ye<vt;)Jt[Ye]=_e(ne[Ye],Ye,ne);return Jt}function pe(ne,_e){for(var Ye=-1,vt=_e.length,Jt=ne.length;++Ye<vt;)ne[Jt+Ye]=_e[Ye];return ne}function ie(ne,_e){for(var Ye=-1,vt=ne?ne.length:0;++Ye<vt;)if(_e(ne[Ye],Ye,ne))return!0;return!1}function oe(ne){return function(_e){return _e==null?void 0:_e[ne]}}function be(ne,_e){for(var Ye=-1,vt=Array(ne);++Ye<ne;)vt[Ye]=_e(Ye);return vt}function F(ne){return function(_e){return ne(_e)}}function H(ne,_e){return ne==null?void 0:ne[_e]}function J(ne){var _e=!1;if(ne!=null&&typeof ne.toString!="function")try{_e=!!(ne+"")}catch{}return _e}function re(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(vt,Jt){Ye[++_e]=[Jt,vt]}),Ye}function ye(ne,_e){return function(Ye){return ne(_e(Ye))}}function xe(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(vt){Ye[++_e]=vt}),Ye}var Re=Array.prototype,P=Function.prototype,Q=Object.prototype,se=qe["__core-js_shared__"],ae=function(){var ne=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),ke=P.toString,Ce=Q.hasOwnProperty,Ee=Q.toString,De=RegExp("^"+ke.call(Ce).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=qe.Symbol,We=qe.Uint8Array,tt=Q.propertyIsEnumerable,dt=Re.splice,Kt=Oe?Oe.isConcatSpreadable:void 0,xt=ye(Object.keys,Object),Qt=Hs(qe,"DataView"),rn=Hs(qe,"Map"),sn=Hs(qe,"Promise"),on=Hs(qe,"Set"),Tn=Hs(qe,"WeakMap"),Er=Hs(Object,"create"),Ki=It(Qt),ds=It(rn),Hi=It(sn),No=It(on),qn=It(Tn),Mr=Oe?Oe.prototype:void 0,Lr=Mr?Mr.valueOf:void 0,gn=Mr?Mr.toString:void 0;function Kr(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var vt=ne[_e];this.set(vt[0],vt[1])}}function sr(){this.__data__=Er?Er(null):{}}function Ni(ne){return this.has(ne)&&delete this.__data__[ne]}function tr(ne){var _e=this.__data__;if(Er){var Ye=_e[ne];return Ye===i?void 0:Ye}return Ce.call(_e,ne)?_e[ne]:void 0}function $r(ne){var _e=this.__data__;return Er?_e[ne]!==void 0:Ce.call(_e,ne)}function to(ne,_e){var Ye=this.__data__;return Ye[ne]=Er&&_e===void 0?i:_e,this}Kr.prototype.clear=sr,Kr.prototype.delete=Ni,Kr.prototype.get=tr,Kr.prototype.has=$r,Kr.prototype.set=to;function ge(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var vt=ne[_e];this.set(vt[0],vt[1])}}function Le(){this.__data__=[]}function it(ne){var _e=this.__data__,Ye=nr(_e,ne);if(Ye<0)return!1;var vt=_e.length-1;return Ye==vt?_e.pop():dt.call(_e,Ye,1),!0}function Ke(ne){var _e=this.__data__,Ye=nr(_e,ne);return Ye<0?void 0:_e[Ye][1]}function Et(ne){return nr(this.__data__,ne)>-1}function an(ne,_e){var Ye=this.__data__,vt=nr(Ye,ne);return vt<0?Ye.push([ne,_e]):Ye[vt][1]=_e,this}ge.prototype.clear=Le,ge.prototype.delete=it,ge.prototype.get=Ke,ge.prototype.has=Et,ge.prototype.set=an;function en(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var vt=ne[_e];this.set(vt[0],vt[1])}}function wt(){this.__data__={hash:new Kr,map:new(rn||ge),string:new Kr}}function et(ne){return ps(this,ne).delete(ne)}function hn(ne){return ps(this,ne).get(ne)}function An(ne){return ps(this,ne).has(ne)}function zt(ne,_e){return ps(this,ne).set(ne,_e),this}en.prototype.clear=wt,en.prototype.delete=et,en.prototype.get=hn,en.prototype.has=An,en.prototype.set=zt;function jt(ne){var _e=-1,Ye=ne?ne.length:0;for(this.__data__=new en;++_e<Ye;)this.add(ne[_e])}function Sr(ne){return this.__data__.set(ne,i),this}function ci(ne){return this.__data__.has(ne)}jt.prototype.add=jt.prototype.push=Sr,jt.prototype.has=ci;function Zt(ne){this.__data__=new ge(ne)}function Xe(){this.__data__=new ge}function pt(ne){return this.__data__.delete(ne)}function Xn(ne){return this.__data__.get(ne)}function ni(ne){return this.__data__.has(ne)}function Ar(ne,_e){var Ye=this.__data__;if(Ye instanceof ge){var vt=Ye.__data__;if(!rn||vt.length<n-1)return vt.push([ne,_e]),this;Ye=this.__data__=new en(vt)}return Ye.set(ne,_e),this}Zt.prototype.clear=Xe,Zt.prototype.delete=pt,Zt.prototype.get=Xn,Zt.prototype.has=ni,Zt.prototype.set=Ar;function Rr(ne,_e){var Ye=Jr(ne)||Ai(ne)?be(ne.length,String):[],vt=Ye.length,Jt=!!vt;for(var Ut in ne)Ce.call(ne,Ut)&&!(Jt&&(Ut=="length"||Wi(Ut,vt)))&&Ye.push(Ut);return Ye}function nr(ne,_e){for(var Ye=ne.length;Ye--;)if(Ln(ne[Ye][0],_e))return Ye;return-1}var qt=qs(bi);function vi(ne,_e,Ye,vt,Jt){var Ut=-1,Sn=ne.length;for(Ye||(Ye=so),Jt||(Jt=[]);++Ut<Sn;){var pr=ne[Ut];Ye(pr)?pe(Jt,pr):Jt[Jt.length]=pr}return Jt}var Ji=ll();function bi(ne,_e){return ne&&Ji(ne,_e,fl)}function js(ne,_e){_e=oo(_e,ne)?[_e]:fa(_e);for(var Ye=0,vt=_e.length;ne!=null&&Ye<vt;)ne=ne[pn(_e[Ye++])];return Ye&&Ye==vt?ne:void 0}function xo(ne){return Ee.call(ne)}function no(ne,_e){return ne!=null&&_e in Object(ne)}function Bo(ne,_e,Ye,vt,Jt){return ne===_e?!0:ne==null||_e==null||!Bi(ne)&&!zi(_e)?ne!==ne&&_e!==_e:bs(ne,_e,Bo,Ye,vt,Jt)}function bs(ne,_e,Ye,vt,Jt,Ut){var Sn=Jr(ne),pr=Jr(_e),Ir=f,es=f;Sn||(Ir=fi(ne),Ir=Ir==u?b:Ir),pr||(es=fi(_e),es=es==u?b:es);var ws=Ir==b&&!J(ne),xi=es==b&&!J(_e),Li=Ir==es;if(Li&&!ws)return Ut||(Ut=new Zt),Sn||Hr(ne)?Gi(ne,_e,Ye,vt,Jt,Ut):Vi(ne,_e,Ir,Ye,vt,Jt,Ut);if(!(Jt&o)){var Te=ws&&Ce.call(ne,"__wrapped__"),ut=xi&&Ce.call(_e,"__wrapped__");if(Te||ut){var Wt=Te?ne.value():ne,Vn=ut?_e.value():_e;return Ut||(Ut=new Zt),Ye(Wt,Vn,vt,Jt,Ut)}}return Li?(Ut||(Ut=new Zt),io(ne,_e,Ye,vt,Jt,Ut)):!1}function Fs(ne,_e,Ye,vt){var Jt=Ye.length,Ut=Jt;if(ne==null)return!Ut;for(ne=Object(ne);Jt--;){var Sn=Ye[Jt];if(Sn[2]?Sn[1]!==ne[Sn[0]]:!(Sn[0]in ne))return!1}for(;++Jt<Ut;){Sn=Ye[Jt];var pr=Sn[0],Ir=ne[pr],es=Sn[1];if(Sn[2]){if(Ir===void 0&&!(pr in ne))return!1}else{var ws=new Zt,xi;if(!(xi===void 0?Bo(es,Ir,vt,s|o,ws):xi))return!1}}return!0}function zo(ne){if(!Bi(ne)||Ht(ne))return!1;var _e=xs(ne)||J(ne)?De:ze;return _e.test(It(ne))}function hs(ne){return zi(ne)&&Gs(ne.length)&&!!je[Ee.call(ne)]}function ol(ne){return typeof ne=="function"?ne:ne==null?Vc:typeof ne=="object"?Jr(ne)?ro(ne[0],ne[1]):Qi(ne):Vu(ne)}function al(ne){if(!Z(ne))return xt(ne);var _e=[];for(var Ye in Object(ne))Ce.call(ne,Ye)&&Ye!="constructor"&&_e.push(Ye);return _e}function Cr(ne,_e){var Ye=-1,vt=or(ne)?Array(ne.length):[];return qt(ne,function(Jt,Ut,Sn){vt[++Ye]=_e(Jt,Ut,Sn)}),vt}function Qi(ne){var _e=jo(ne);return _e.length==1&&_e[0][2]?Be(_e[0][0],_e[0][1]):function(Ye){return Ye===ne||Fs(Ye,ne,_e)}}function ro(ne,_e){return oo(ne)&&me(_e)?Be(pn(ne),_e):function(Ye){var vt=Gu(Ye,ne);return vt===void 0&&vt===_e?cl(Ye,ne):Bo(_e,vt,void 0,s|o)}}function Os(ne){return function(_e){return js(_e,ne)}}function Us(ne){if(typeof ne=="string")return ne;if(wo(ne))return gn?gn.call(ne):"";var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function fa(ne){return Jr(ne)?ne:yt(ne)}function qs(ne,_e){return function(Ye,vt){if(Ye==null)return Ye;if(!or(Ye))return ne(Ye,vt);for(var Jt=Ye.length,Ut=-1,Sn=Object(Ye);++Ut<Jt&&vt(Sn[Ut],Ut,Sn)!==!1;);return Ye}}function ll(ne){return function(_e,Ye,vt){for(var Jt=-1,Ut=Object(_e),Sn=vt(_e),pr=Sn.length;pr--;){var Ir=Sn[++Jt];if(Ye(Ut[Ir],Ir,Ut)===!1)break}return _e}}function Gi(ne,_e,Ye,vt,Jt,Ut){var Sn=Jt&o,pr=ne.length,Ir=_e.length;if(pr!=Ir&&!(Sn&&Ir>pr))return!1;var es=Ut.get(ne);if(es&&Ut.get(_e))return es==_e;var ws=-1,xi=!0,Li=Jt&s?new jt:void 0;for(Ut.set(ne,_e),Ut.set(_e,ne);++ws<pr;){var Te=ne[ws],ut=_e[ws];if(vt)var Wt=Sn?vt(ut,Te,ws,_e,ne,Ut):vt(Te,ut,ws,ne,_e,Ut);if(Wt!==void 0){if(Wt)continue;xi=!1;break}if(Li){if(!ie(_e,function(Vn,mr){if(!Li.has(mr)&&(Te===Vn||Ye(Te,Vn,vt,Jt,Ut)))return Li.add(mr)})){xi=!1;break}}else if(!(Te===ut||Ye(Te,ut,vt,Jt,Ut))){xi=!1;break}}return Ut.delete(ne),Ut.delete(_e),xi}function Vi(ne,_e,Ye,vt,Jt,Ut,Sn){switch(Ye){case O:if(ne.byteLength!=_e.byteLength||ne.byteOffset!=_e.byteOffset)return!1;ne=ne.buffer,_e=_e.buffer;case R:return!(ne.byteLength!=_e.byteLength||!vt(new We(ne),new We(_e)));case c:case d:case y:return Ln(+ne,+_e);case h:return ne.name==_e.name&&ne.message==_e.message;case E:case T:return ne==_e+"";case v:var pr=re;case A:var Ir=Ut&o;if(pr||(pr=xe),ne.size!=_e.size&&!Ir)return!1;var es=Sn.get(ne);if(es)return es==_e;Ut|=s,Sn.set(ne,_e);var ws=Gi(pr(ne),pr(_e),vt,Jt,Ut,Sn);return Sn.delete(ne),ws;case D:if(Lr)return Lr.call(ne)==Lr.call(_e)}return!1}function io(ne,_e,Ye,vt,Jt,Ut){var Sn=Jt&o,pr=fl(ne),Ir=pr.length,es=fl(_e),ws=es.length;if(Ir!=ws&&!Sn)return!1;for(var xi=Ir;xi--;){var Li=pr[xi];if(!(Sn?Li in _e:Ce.call(_e,Li)))return!1}var Te=Ut.get(ne);if(Te&&Ut.get(_e))return Te==_e;var ut=!0;Ut.set(ne,_e),Ut.set(_e,ne);for(var Wt=Sn;++xi<Ir;){Li=pr[xi];var Vn=ne[Li],mr=_e[Li];if(vt)var Pn=Sn?vt(mr,Vn,Li,_e,ne,Ut):vt(Vn,mr,Li,ne,_e,Ut);if(!(Pn===void 0?Vn===mr||Ye(Vn,mr,vt,Jt,Ut):Pn)){ut=!1;break}Wt||(Wt=Li=="constructor")}if(ut&&!Wt){var ji=ne.constructor,$a=_e.constructor;ji!=$a&&"constructor"in ne&&"constructor"in _e&&!(typeof ji=="function"&&ji instanceof ji&&typeof $a=="function"&&$a instanceof $a)&&(ut=!1)}return Ut.delete(ne),Ut.delete(_e),ut}function ps(ne,_e){var Ye=ne.__data__;return ul(_e)?Ye[typeof _e=="string"?"string":"hash"]:Ye.map}function jo(ne){for(var _e=fl(ne),Ye=_e.length;Ye--;){var vt=_e[Ye],Jt=ne[vt];_e[Ye]=[vt,Jt,me(Jt)]}return _e}function Hs(ne,_e){var Ye=H(ne,_e);return zo(Ye)?Ye:void 0}var fi=xo;(Qt&&fi(new Qt(new ArrayBuffer(1)))!=O||rn&&fi(new rn)!=v||sn&&fi(sn.resolve())!=w||on&&fi(new on)!=A||Tn&&fi(new Tn)!=k)&&(fi=function(ne){var _e=Ee.call(ne),Ye=_e==b?ne.constructor:void 0,vt=Ye?It(Ye):void 0;if(vt)switch(vt){case Ki:return O;case ds:return v;case Hi:return w;case No:return A;case qn:return k}return _e});function Ma(ne,_e,Ye){_e=oo(_e,ne)?[_e]:fa(_e);for(var vt,Jt=-1,Sn=_e.length;++Jt<Sn;){var Ut=pn(_e[Jt]);if(!(vt=ne!=null&&Ye(ne,Ut)))break;ne=ne[Ut]}if(vt)return vt;var Sn=ne?ne.length:0;return!!Sn&&Gs(Sn)&&Wi(Ut,Sn)&&(Jr(ne)||Ai(ne))}function so(ne){return Jr(ne)||Ai(ne)||!!(Kt&&ne&&ne[Kt])}function Wi(ne,_e){return _e=_e??l,!!_e&&(typeof ne=="number"||He.test(ne))&&ne>-1&&ne%1==0&&ne<_e}function oo(ne,_e){if(Jr(ne))return!1;var Ye=typeof ne;return Ye=="number"||Ye=="symbol"||Ye=="boolean"||ne==null||wo(ne)?!0:le.test(ne)||!te.test(ne)||_e!=null&&ne in Object(_e)}function ul(ne){var _e=typeof ne;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ne!=="__proto__":ne===null}function Ht(ne){return!!ae&&ae in ne}function Z(ne){var _e=ne&&ne.constructor,Ye=typeof _e=="function"&&_e.prototype||Q;return ne===Ye}function me(ne){return ne===ne&&!Bi(ne)}function Be(ne,_e){return function(Ye){return Ye==null?!1:Ye[ne]===_e&&(_e!==void 0||ne in Object(Ye))}}var yt=kr(function(ne){ne=da(ne);var _e=[];return ee.test(ne)&&_e.push(""),ne.replace(z,function(Ye,vt,Jt,Ut){_e.push(Jt?Ut.replace(de,"$1"):vt||Ye)}),_e});function pn(ne){if(typeof ne=="string"||wo(ne))return ne;var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function It(ne){if(ne!=null){try{return ke.call(ne)}catch{}try{return ne+""}catch{}}return""}function In(ne,_e){return vi(dr(ne,_e))}function dr(ne,_e){var Ye=Jr(ne)?Ze:Cr;return Ye(ne,ol(_e))}function kr(ne,_e){if(typeof ne!="function"||_e&&typeof _e!="function")throw new TypeError(r);var Ye=function(){var vt=arguments,Jt=_e?_e.apply(this,vt):vt[0],Ut=Ye.cache;if(Ut.has(Jt))return Ut.get(Jt);var Sn=ne.apply(this,vt);return Ye.cache=Ut.set(Jt,Sn),Sn};return Ye.cache=new(kr.Cache||en),Ye}kr.Cache=en;function Ln(ne,_e){return ne===_e||ne!==ne&&_e!==_e}function Ai(ne){return di(ne)&&Ce.call(ne,"callee")&&(!tt.call(ne,"callee")||Ee.call(ne)==u)}var Jr=Array.isArray;function or(ne){return ne!=null&&Gs(ne.length)&&!xs(ne)}function di(ne){return zi(ne)&&or(ne)}function xs(ne){var _e=Bi(ne)?Ee.call(ne):"";return _e==p||_e==g}function Gs(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=l}function Bi(ne){var _e=typeof ne;return!!ne&&(_e=="object"||_e=="function")}function zi(ne){return!!ne&&typeof ne=="object"}function wo(ne){return typeof ne=="symbol"||zi(ne)&&Ee.call(ne)==D}var Hr=Mn?F(Mn):hs;function da(ne){return ne==null?"":Us(ne)}function Gu(ne,_e,Ye){var vt=ne==null?void 0:js(ne,_e);return vt===void 0?Ye:vt}function cl(ne,_e){return ne!=null&&Ma(ne,_e,no)}function fl(ne){return or(ne)?Rr(ne):al(ne)}function Vc(ne){return ne}function Vu(ne){return oo(ne)?oe(pn(ne)):Os(ne)}e.exports=In}(s_,s_.exports)),s_.exports}var gTt=mTt();const kIe=sa(gTt);function yTt(e,t,n){let r=[];e.filterProperties.length&&e.filterProperties.forEach(s=>{const o={},a=u=>s.format==="date"?Ac(u).unix():parseFloat(u);t.forEach(u=>{var f,c;if(s.type==="range"){const d=L2(s.key,u);if(Array.isArray(d)){const h=[a(d[0]),a(d[1])];o.min=o.min!==void 0?Math.min(o.min,h[0]):h[0],o.max=o.max!==void 0?Math.max(o.max,h[1]):h[1]}else{const h=a(d);o.min=o.min!==void 0?Math.min(o.min,h):h,o.max=o.max!==void 0?Math.max(o.max,h):h}return}Array.isArray(u[s.key])?u[s.key].forEach(d=>{o[d]=void 0}):s.type==="spatial"?(o.geometry=((f=s==null?void 0:s.state)==null?void 0:f.geometry)||void 0,o.geometry&&(s.stringifiedState=o.geometry.type),o.mode=s.mode||"intersects"):(c=s.key)!=null&&c.includes(".")?CIe(kIe(n.items,s.key)).filter(d=>d).forEach(d=>{o[d]=void 0}):o[u[s.key]]=void 0});const l=s.key||s.keys.join("|");n.filters[l]=Object.assign({type:s.type||"multiselect",dirty:s.state?Object.values(s.state).some(u=>u):void 0,key:l},s.type==="range"?{min:o.min,max:o.max,format:s.format}:{},s),n.filters[l].state=Object.assign({},o,s.state)}),e.matchAllWhenEmpty!==!1&&(n.results=n.sortResults(t),n.requestUpdate()),e.aggregateResults&&(r=Array.from(new Set(t.reduce((s,o)=>s.concat(o[e.aggregateResults]),[]))).sort((s,o)=>s.localeCompare(o)));const i=[];return Object.values(n.filters).forEach(s=>{s.type==="text"?s.keys.forEach(o=>{i.includes(o)||i.push(o)}):(s.type==="select"||s.type==="multiselect")&&(i.includes(s.key)||i.push(s.key))}),$kt(t,Object.assign({keys:i},e.fuseConfig)),r}async function vTt(e,t,n){let r;n.externalFilter?r=await Bkt(t,n.filters,e):r=await Ikt(t,n.filters,e),n.results=n.sortResults(r)}function bTt(e,t,n){const r=`filter-${e.key}`.replace("|","-");switch(e.type){case"text":return Qe`<eox-itemfilter-text
        data-type="filter"
        data-cy="text-filter"
        slot="filter"
        id="${r}"
        .tabIndex=${t}
        .filterObject=${e}
        .unstyled=${n.unstyled}
        @filter=${()=>n.search()}
      ></eox-itemfilter-text>`;case"multiselect":case"select":return Qe`
        <eox-itemfilter-select
          .inlineMode=${n.inlineMode||!1}
          data-type="filter"
          id="${r}"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .suggestions="${CIe(kIe(n.items,e.key)).filter(i=>i)}"
          type="${e.type}"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-select>
      `;case"range":return Qe`
        <eox-itemfilter-range
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-range>
      `;case"spatial":return Qe`
        <eox-itemfilter-spatial
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          @filter=${()=>n.search()}
        ></eox-itemfilter-spatial>
      `;default:return Qe``}}function xTt(e,t){return[...e].sort((n,r)=>n[t.titleProperty].localeCompare(r[t.titleProperty]))}function wTt(e,t,n){return Qe`
    ${Un(e.dirty,()=>Qe`
        <button
          type="button"
          tabindex=${t}
          slot="reset-button"
          class="reset-icon icon"
          @click=${r=>{const i=r.target.parentElement.querySelector("[slot=filter]");i&&typeof i.reset=="function"&&i.reset(),n.search(),n.requestUpdate()}}
        >
          ${n.unstyled?"Reset":Xr}
        </button>
      `)}
  `}function _Tt(e){e.renderRoot.querySelectorAll("[data-type='filter']").forEach(t=>{typeof t.reset=="function"&&t.reset()}),e.search()}var W2,Uv,_u,I1,TIe,DIe;class ETt extends Zr{constructor(){super();yn(this,I1);yn(this,W2,[]);yn(this,Uv,[]);yn(this,_u,dTt);this.items=null,this.filters={},this.results=[],this.selectedResult=null,this.search=G0(this.searchHandler,100,{leading:!0}),this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.externalFilter=null,this.filterProperties=[],this.fuseConfig={},this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.showResults=!0,this.titleProperty="title",this.subTitleProperty=void 0,this.imageProperty=void 0,this.idProperty="id",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0,this.resultType="list",this.unstyled=!1}static get properties(){return{items:{attribute:!1,type:Object},results:{state:!0,attribute:!1,type:Object},filters:{state:!0,attribute:!1,type:Object},selectedResult:{attribute:!1,type:Object},aggregateResults:{attribute:"aggregate-results",type:String},autoSpreadSingle:{attribute:"auto-spread-single",type:Boolean},enableHighlighting:{attribute:"enable-highlighting",type:Boolean},filterProperties:{attribute:!1,type:Array},fuseConfig:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},matchAllWhenEmpty:{attribute:"match-all-when-empty",type:Boolean},showResults:{attribute:"show-result",type:Boolean},idProperty:{attribute:"id-property",type:String},titleProperty:{attribute:"title-property",type:String},subTitleProperty:{attribute:"sub-title-property",type:String},imageProperty:{attribute:"image-property",type:String},expandMultipleFilters:{attribute:"enable-multiple-filter",type:Boolean},expandResults:{attribute:"expand-result",type:Boolean},expandMultipleResults:{attribute:"expand-multiple-results",type:Boolean},externalFilter:{attribute:!1,type:Function},resultType:{attribute:"result-type",type:String},unstyled:{type:Boolean}}}apply(){as(this,W2,yTt(Gt(this,_u),Gt(this,Uv),this)),this.search()}async searchHandler(){await vTt(Gt(this,_u),Gt(this,Uv),this),this.dispatchEvent(new CustomEvent("filter",{detail:{results:this.results,filters:this.filters},bubbles:!0,composed:!0})),this.inlineMode&&this.renderRoot.querySelector("eox-itemfilter-container").updateInline(),this.requestUpdate()}sortResults(n){return xTt(n,Gt(this,_u))}resetFilters(){_Tt(this)}firstUpdated(n){var i;let r={};AEe.map(s=>{r={...r,[s]:this[s]}}),as(this,_u,r),as(this,Uv,((i=this.items)==null?void 0:i.map((s,o)=>Object.assign({id:s[this.idProperty]||`item-${o}`},s)))||[]),this.apply()}updated(n){AEe.map(r=>{if(n.has(r))return this.firstUpdated(),!0})}updateResult(n){this.selectedResult=n.detail,this.dispatchEvent(new CustomEvent("select",{detail:this.selectedResult,bubbles:!0,composed:!0})),this.requestUpdate()}render(){var n;return Qe`
      <style>
        ${TCt}
        ${!this.unstyled&&tS}
        ${!this.unstyled&&kD}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        class=${this.inlineMode?"inline":Xr}
        @submit="${r=>r.preventDefault()}"
      >
        ${Un(this.filterProperties,()=>Qe`
            <eox-itemfilter-container
              .filters=${this.filters}
              .filterProperties=${this.filterProperties}
              .inlineMode=${this.inlineMode||!1}
              @reset=${()=>this.resetFilters()}
              @filter=${()=>this.search()}
            >
              <section slot="section">
                ${Un(!this.inlineMode,()=>Qe`
                    <slot name="filterstitle"
                      ><h6 class="main-heading">Filters</h6></slot
                    >
                  `)}
                <ul id="filters">
                  ${su(Object.values(this.filters),(r,i)=>Qe` <li>
                        <eox-itemfilter-expandcontainer
                          .filterObject=${r}
                          @details-toggled=${s=>sIe(s,Gt(this,_u),this)}
                          data-details="${r.key}"
                        >
                          ${mn(this,I1,DIe).call(this,r,EEe(i,1))}
                          ${mn(this,I1,TIe).call(this,r,EEe(i,2))}
                        </eox-itemfilter-expandcontainer>
                      </li>`)}
                </ul>
                ${Un(!this.inlineMode&&Gt(this,_u).filterProperties&&!this.inlineMode&&Gt(this,_u).filterProperties&&w$(this.filters),()=>Qe`
                    <button
                      type="button"
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
              </section>
            </eox-itemfilter-container>
          `)}
        ${Un(((n=Gt(this,_u))==null?void 0:n.showResults)&&this.results,()=>Qe`
            <eox-itemfilter-results
              .config=${Gt(this,_u)}
              .results=${this.results}
              .filters=${this.filters}
              .resultAggregation=${Gt(this,W2)}
              .selectedResult=${this.selectedResult}
              .resultType=${this.resultType}
              @result=${this.updateResult}
            >
              <slot name="resultstitle"
                ><h6 class="main-heading">Results</h6></slot
              >
            </eox-itemfilter-results>
          `)}
      </form>
    `}}W2=new WeakMap,Uv=new WeakMap,_u=new WeakMap,I1=new WeakSet,TIe=function(n,r){return bTt(n,r,this)},DIe=function(n,r){return wTt(n,r,this)};customElements.define("eox-itemfilter",ETt);function KA(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var JO={exports:{}};/**
 * easymde v2.18.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */var TEe;function STt(){return TEe||(TEe=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(u,f){if(!i[u]){if(!r[u]){var c=typeof KA=="function"&&KA;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){return o(r[u][1][p]||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof KA=="function"&&KA,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){},{}],2:[function(n,r,i){var s=n("typo-js");function o(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!o.aff_loading){o.aff_loading=!0;var u=new XMLHttpRequest;u.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),u.onload=function(){u.readyState===4&&u.status===200&&(o.aff_data=u.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},u.send(null)}if(!o.dic_loading){o.dic_loading=!0;var f=new XMLHttpRequest;f.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),f.onload=function(){f.readyState===4&&f.status===200&&(o.dic_data=f.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},f.send(null)}var c='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(p){var g=p.peek(),v="";if(c.includes(g))return p.next(),null;for(;(g=p.peek())!=null&&!c.includes(g);)v+=g,p.next();return o.typo&&!o.typo.check(v)?"spell-error":null}},h=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(h,d,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}o.num_loaded=0,o.aff_loading=!1,o.dic_loading=!1,o.aff_data="",o.dic_data="",o.typo,r.exports=o},{"typo-js":16}],3:[function(n,r,i){(function(s){function o(a,l){clearTimeout(l.timeout),s.off(window,"mouseup",l.hurry),s.off(window,"keyup",l.hurry)}s.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(o(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(u,f){function c(){u.display.wrapper.offsetHeight?(o(0,f),u.display.lastWrapHeight!=u.display.wrapper.clientHeight&&u.refresh()):f.timeout=setTimeout(c,f.delay)}f.timeout=setTimeout(c,f.delay),f.hurry=function(){clearTimeout(f.timeout),f.timeout=setTimeout(c,50)},s.on(window,"mouseup",f.hurry),s.on(window,"keyup",f.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(n,r,i){(function(s){s.defineOption("fullScreen",!1,function(o,a,l){l==s.Init&&(l=!1),!l!=!a&&(a?function(u){var f=u.getWrapperElement();u.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:f.style.width,height:f.style.height},f.style.width="",f.style.height="auto",f.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",u.refresh()}(o):function(u){var f=u.getWrapperElement();f.className=f.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var c=u.state.fullScreenRestore;f.style.width=c.width,f.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop),u.refresh()}(o))})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(n,r,i){(function(s){function o(c){c.state.placeholder&&(c.state.placeholder.parentNode.removeChild(c.state.placeholder),c.state.placeholder=null)}function a(c){o(c);var d=c.state.placeholder=document.createElement("pre");d.style.cssText="height: 0; overflow: visible",d.style.direction=c.getOption("direction"),d.className="CodeMirror-placeholder CodeMirror-line-like";var h=c.getOption("placeholder");typeof h=="string"&&(h=document.createTextNode(h)),d.appendChild(h),c.display.lineSpace.insertBefore(d,c.display.lineSpace.firstChild)}function l(c){f(c)&&a(c)}function u(c){var d=c.getWrapperElement(),h=f(c);d.className=d.className.replace(" CodeMirror-empty","")+(h?" CodeMirror-empty":""),h?a(c):o(c)}function f(c){return c.lineCount()===1&&c.getLine(0)===""}s.defineOption("placeholder","",function(c,d,h){var p=h&&h!=s.Init;if(d&&!p)c.on("blur",l),c.on("change",u),c.on("swapDoc",u),s.on(c.getInputField(),"compositionupdate",c.state.placeholderCompose=function(){(function(v){setTimeout(function(){var y=!1;if(v.lineCount()==1){var b=v.getInputField();y=b.nodeName=="TEXTAREA"?!v.getLine(0).length:!/[^\u200b]/.test(b.querySelector(".CodeMirror-line").textContent)}y?a(v):o(v)},20)})(c)}),u(c);else if(!d&&p){c.off("blur",l),c.off("change",u),c.off("swapDoc",u),s.off(c.getInputField(),"compositionupdate",c.state.placeholderCompose),o(c);var g=c.getWrapperElement();g.className=g.className.replace(" CodeMirror-empty","")}d&&!c.hasFocus()&&l(c)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(n,r,i){(function(s){var o=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function u(f,c){var d=c.line,h=0,p=0,g=o.exec(f.getLine(d)),v=g[1];do{var y=d+(h+=1),b=f.getLine(y),w=o.exec(b);if(w){var E=w[1],A=parseInt(g[3],10)+h-p,T=parseInt(w[3],10),D=T;if(v!==E||isNaN(T)){if(v.length>E.length||v.length<E.length&&h===1)return;p+=1}else A===T&&(D=T+1),A>T&&(D=A+1),f.replaceRange(b.replace(o,E+D+w[4]+w[5]),{line:y,ch:0},{line:y,ch:b.length})}}while(w)}s.commands.newlineAndIndentContinueMarkdownList=function(f){if(f.getOption("disableInput"))return s.Pass;for(var c=f.listSelections(),d=[],h=0;h<c.length;h++){var p=c[h].head,g=f.getStateAfter(p.line),v=s.innerMode(f.getMode(),g);if(v.mode.name!=="markdown"&&v.mode.helperType!=="markdown")return void f.execCommand("newlineAndIndent");var y=(g=v.state).list!==!1,b=g.quote!==0,w=f.getLine(p.line),E=o.exec(w),A=/^\s*$/.test(w.slice(0,p.ch));if(!c[h].empty()||!y&&!b||!E||A)return void f.execCommand("newlineAndIndent");if(a.test(w)){var T=b&&/>\s*$/.test(w),D=!/>\s*$/.test(w);(T||D)&&f.replaceRange("",{line:p.line,ch:0},{line:p.line,ch:p.ch+1}),d[h]=`
`}else{var k=E[1],R=E[5],O=!(l.test(E[2])||E[2].indexOf(">")>=0),B=O?parseInt(E[3],10)+1+E[4]:E[2].replace("x"," ");d[h]=`
`+k+B+R,O&&u(f,p)}}f.replaceSelections(d)}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(n,r,i){(function(s){s.overlayMode=function(o,a,l){return{startState:function(){return{base:s.startState(o),overlay:s.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(u){return{base:s.copyState(o,u.base),overlay:s.copyState(a,u.overlay),basePos:u.basePos,baseCur:null,overlayPos:u.overlayPos,overlayCur:null}},token:function(u,f){return(u!=f.streamSeen||Math.min(f.basePos,f.overlayPos)<u.start)&&(f.streamSeen=u,f.basePos=f.overlayPos=u.start),u.start==f.basePos&&(f.baseCur=o.token(u,f.base),f.basePos=u.pos),u.start==f.overlayPos&&(u.pos=u.start,f.overlayCur=a.token(u,f.overlay),f.overlayPos=u.pos),u.pos=Math.min(f.basePos,f.overlayPos),f.overlayCur==null?f.baseCur:f.baseCur!=null&&f.overlay.combineTokens||l&&f.overlay.combineTokens==null?f.baseCur+" "+f.overlayCur:f.overlayCur},indent:o.indent&&function(u,f,c){return o.indent(u.base,f,c)},electricChars:o.electricChars,innerMode:function(u){return{state:u.base,mode:o}},blankLine:function(u){var f,c;return o.blankLine&&(f=o.blankLine(u.base)),a.blankLine&&(c=a.blankLine(u.overlay)),c==null?f:l&&f!=null?f+" "+c:c}}}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(n,r,i){(function(s){var o,a,l=s.Pos;function u(E,A){for(var T=function(R){var O=R.flags;return O??(R.ignoreCase?"i":"")+(R.global?"g":"")+(R.multiline?"m":"")}(E),D=T,k=0;k<A.length;k++)D.indexOf(A.charAt(k))==-1&&(D+=A.charAt(k));return T==D?E:new RegExp(E.source,D)}function f(E){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(E.source)}function c(E,A,T){A=u(A,"g");for(var D=T.line,k=T.ch,R=E.lastLine();D<=R;D++,k=0){A.lastIndex=k;var O=E.getLine(D),B=A.exec(O);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function d(E,A,T){if(!f(A))return c(E,A,T);A=u(A,"gm");for(var D,k=1,R=T.line,O=E.lastLine();R<=O;){for(var B=0;B<k&&!(R>O);B++){var K=E.getLine(R++);D=D==null?K:D+`
`+K}k*=2,A.lastIndex=T.ch;var L=A.exec(D);if(L){var $=D.slice(0,L.index).split(`
`),I=L[0].split(`
`),U=T.line+$.length-1,q=$[$.length-1].length;return{from:l(U,q),to:l(U+I.length-1,I.length==1?q+I[0].length:I[I.length-1].length),match:L}}}}function h(E,A,T){for(var D,k=0;k<=E.length;){A.lastIndex=k;var R=A.exec(E);if(!R)break;var O=R.index+R[0].length;if(O>E.length-T)break;(!D||O>D.index+D[0].length)&&(D=R),k=R.index+1}return D}function p(E,A,T){A=u(A,"g");for(var D=T.line,k=T.ch,R=E.firstLine();D>=R;D--,k=-1){var O=E.getLine(D),B=h(O,A,k<0?0:O.length-k);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function g(E,A,T){if(!f(A))return p(E,A,T);A=u(A,"gm");for(var D,k=1,R=E.getLine(T.line).length-T.ch,O=T.line,B=E.firstLine();O>=B;){for(var K=0;K<k&&O>=B;K++){var L=E.getLine(O--);D=D==null?L:L+`
`+D}k*=2;var $=h(D,A,R);if($){var I=D.slice(0,$.index).split(`
`),U=$[0].split(`
`),q=O+I.length,Y=I[I.length-1].length;return{from:l(q,Y),to:l(q+U.length-1,U.length==1?Y+U[0].length:U[U.length-1].length),match:$}}}}function v(E,A,T,D){if(E.length==A.length)return T;for(var k=0,R=T+Math.max(0,E.length-A.length);;){if(k==R)return k;var O=k+R>>1,B=D(E.slice(0,O)).length;if(B==T)return O;B>T?R=O:k=O+1}}function y(E,A,T,D){if(!A.length)return null;var k=D?o:a,R=k(A).split(/\r|\n\r?/);e:for(var O=T.line,B=T.ch,K=E.lastLine()+1-R.length;O<=K;O++,B=0){var L=E.getLine(O).slice(B),$=k(L);if(R.length==1){var I=$.indexOf(R[0]);if(I==-1)continue e;return T=v(L,$,I,k)+B,{from:l(O,v(L,$,I,k)+B),to:l(O,v(L,$,I+R[0].length,k)+B)}}var U=$.length-R[0].length;if($.slice(U)==R[0]){for(var q=1;q<R.length-1;q++)if(k(E.getLine(O+q))!=R[q])continue e;var Y=E.getLine(O+R.length-1),X=k(Y),te=R[R.length-1];if(X.slice(0,te.length)==te)return{from:l(O,v(L,$,U,k)+B),to:l(O+R.length-1,v(Y,X,te.length,k))}}}}function b(E,A,T,D){if(!A.length)return null;var k=D?o:a,R=k(A).split(/\r|\n\r?/);e:for(var O=T.line,B=T.ch,K=E.firstLine()-1+R.length;O>=K;O--,B=-1){var L=E.getLine(O);B>-1&&(L=L.slice(0,B));var $=k(L);if(R.length==1){var I=$.lastIndexOf(R[0]);if(I==-1)continue e;return{from:l(O,v(L,$,I,k)),to:l(O,v(L,$,I+R[0].length,k))}}var U=R[R.length-1];if($.slice(0,U.length)==U){var q=1;for(T=O-R.length+1;q<R.length-1;q++)if(k(E.getLine(T+q))!=R[q])continue e;var Y=E.getLine(O+1-R.length),X=k(Y);if(X.slice(X.length-R[0].length)==R[0])return{from:l(O+1-R.length,v(Y,X,Y.length-R[0].length,k)),to:l(O,v(L,$,U.length,k))}}}}function w(E,A,T,D){var k;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=E,T=T?E.clipPos(T):l(0,0),this.pos={from:T,to:T},typeof D=="object"?k=D.caseFold:(k=D,D=null),typeof A=="string"?(k==null&&(k=!1),this.matches=function(R,O){return(R?b:y)(E,A,O,k)}):(A=u(A,"gm"),D&&D.multiline===!1?this.matches=function(R,O){return(R?p:c)(E,A,O)}:this.matches=function(R,O){return(R?g:d)(E,A,O)})}String.prototype.normalize?(o=function(E){return E.normalize("NFD").toLowerCase()},a=function(E){return E.normalize("NFD")}):(o=function(E){return E.toLowerCase()},a=function(E){return E}),w.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(E){var A=this.doc.clipPos(E?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(A=l(A.line,A.ch),E?(A.ch--,A.ch<0&&(A.line--,A.ch=(this.doc.getLine(A.line)||"").length)):(A.ch++,A.ch>(this.doc.getLine(A.line)||"").length&&(A.ch=0,A.line++)),s.cmpPos(A,this.doc.clipPos(A))!=0))return this.atOccurrence=!1;var T=this.matches(E,A);if(this.afterEmptyMatch=T&&s.cmpPos(T.from,T.to)==0,T)return this.pos=T,this.atOccurrence=!0,this.pos.match||!0;var D=l(E?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:D,to:D},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(E,A){if(this.atOccurrence){var T=s.splitLines(E);this.doc.replaceRange(T,this.pos.from,this.pos.to,A),this.pos.to=l(this.pos.from.line+T.length-1,T[T.length-1].length+(T.length==1?this.pos.from.ch:0))}}},s.defineExtension("getSearchCursor",function(E,A,T){return new w(this.doc,E,A,T)}),s.defineDocExtension("getSearchCursor",function(E,A,T){return new w(this,E,A,T)}),s.defineExtension("selectMatches",function(E,A){for(var T=[],D=this.getSearchCursor(E,this.getCursor("from"),A);D.findNext()&&!(s.cmpPos(D.to(),this.getCursor("to"))>0);)T.push({anchor:D.from(),head:D.to()});T.length&&this.setSelections(T,0)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(n,r,i){(function(s){function o(h){h.state.markedSelection&&h.operation(function(){(function(p){if(!p.somethingSelected())return c(p);if(p.listSelections().length>1)return d(p);var g=p.getCursor("start"),v=p.getCursor("end"),y=p.state.markedSelection;if(!y.length)return f(p,g,v);var b=y[0].find(),w=y[y.length-1].find();if(!b||!w||v.line-g.line<=8||u(g,w.to)>=0||u(v,b.from)<=0)return d(p);for(;u(g,b.from)>0;)y.shift().clear(),b=y[0].find();for(u(g,b.from)<0&&(b.to.line-g.line<8?(y.shift().clear(),f(p,g,b.to,0)):f(p,g,b.from,0));u(v,w.to)<0;)y.pop().clear(),w=y[y.length-1].find();u(v,w.to)>0&&(v.line-w.from.line<8?(y.pop().clear(),f(p,w.from,v)):f(p,w.to,v))})(h)})}function a(h){h.state.markedSelection&&h.state.markedSelection.length&&h.operation(function(){c(h)})}s.defineOption("styleSelectedText",!1,function(h,p,g){var v=g&&g!=s.Init;p&&!v?(h.state.markedSelection=[],h.state.markedSelectionStyle=typeof p=="string"?p:"CodeMirror-selectedtext",d(h),h.on("cursorActivity",o),h.on("change",a)):!p&&v&&(h.off("cursorActivity",o),h.off("change",a),c(h),h.state.markedSelection=h.state.markedSelectionStyle=null)});var l=s.Pos,u=s.cmpPos;function f(h,p,g,v){if(u(p,g)!=0)for(var y=h.state.markedSelection,b=h.state.markedSelectionStyle,w=p.line;;){var E=w==p.line?p:l(w,0),A=w+8,T=A>=g.line,D=T?g:l(A,0),k=h.markText(E,D,{className:b});if(v==null?y.push(k):y.splice(v++,0,k),T)break;w=A}}function c(h){for(var p=h.state.markedSelection,g=0;g<p.length;++g)p[g].clear();p.length=0}function d(h){c(h);for(var p=h.listSelections(),g=0;g<p.length;g++)f(h,p[g].from(),p[g].to())}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(n,r,i){(function(s,o){typeof i=="object"&&r!==void 0?r.exports=o():(s=s||self).CodeMirror=o()})(this,function(){var s=navigator.userAgent,o=navigator.platform,a=/gecko\/\d/i.test(s),l=/MSIE \d/.test(s),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(s),f=/Edge\/(\d+)/.exec(s),c=l||u||f,d=c&&(l?document.documentMode||6:+(f||u)[1]),h=!f&&/WebKit\//.test(s),p=h&&/Qt\/\d+\.\d+/.test(s),g=!f&&/Chrome\/(\d+)/.exec(s),v=g&&+g[1],y=/Opera\//.test(s),b=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(s),E=/PhantomJS/.test(s),A=b&&(/Mobile\/\w+/.test(s)||navigator.maxTouchPoints>2),T=/Android/.test(s),D=A||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(s),k=A||/Mac/.test(o),R=/\bCrOS\b/.test(s),O=/win/i.test(o),B=y&&s.match(/Version\/(\d*\.\d*)/);B&&(B=Number(B[1])),B&&B>=15&&(y=!1,h=!0);var K=k&&(p||y&&(B==null||B<12.11)),L=a||c&&d>=9;function $(m){return new RegExp("(^|\\s)"+m+"(?:$|\\s)\\s*")}var I,U=function(m,x){var S=m.className,_=$(x).exec(S);if(_){var C=S.slice(_.index+_[0].length);m.className=S.slice(0,_.index)+(C?_[1]+C:"")}};function q(m){for(var x=m.childNodes.length;x>0;--x)m.removeChild(m.firstChild);return m}function Y(m,x){return q(m).appendChild(x)}function X(m,x,S,_){var C=document.createElement(m);if(S&&(C.className=S),_&&(C.style.cssText=_),typeof x=="string")C.appendChild(document.createTextNode(x));else if(x)for(var M=0;M<x.length;++M)C.appendChild(x[M]);return C}function te(m,x,S,_){var C=X(m,x,S,_);return C.setAttribute("role","presentation"),C}function le(m,x){if(x.nodeType==3&&(x=x.parentNode),m.contains)return m.contains(x);do if(x.nodeType==11&&(x=x.host),x==m)return!0;while(x=x.parentNode)}function ee(m){var x;try{x=m.activeElement}catch{x=m.body||null}for(;x&&x.shadowRoot&&x.shadowRoot.activeElement;)x=x.shadowRoot.activeElement;return x}function z(m,x){var S=m.className;$(x).test(S)||(m.className+=(S?" ":"")+x)}function he(m,x){for(var S=m.split(" "),_=0;_<S.length;_++)S[_]&&!$(S[_]).test(x)&&(x+=" "+S[_]);return x}I=document.createRange?function(m,x,S,_){var C=document.createRange();return C.setEnd(_||m,S),C.setStart(m,x),C}:function(m,x,S){var _=document.body.createTextRange();try{_.moveToElementText(m.parentNode)}catch{return _}return _.collapse(!0),_.moveEnd("character",S),_.moveStart("character",x),_};var de=function(m){m.select()};function ze(m){return m.display.wrapper.ownerDocument}function He(m){return ze(m).defaultView}function je(m){var x=Array.prototype.slice.call(arguments,1);return function(){return m.apply(null,x)}}function we(m,x,S){for(var _ in x||(x={}),m)!m.hasOwnProperty(_)||S===!1&&x.hasOwnProperty(_)||(x[_]=m[_]);return x}function Ie(m,x,S,_,C){x==null&&(x=m.search(/[^\s\u00a0]/))==-1&&(x=m.length);for(var M=_||0,N=C||0;;){var j=m.indexOf("	",M);if(j<0||j>=x)return N+(x-M);N+=j-M,N+=S-N%S,M=j+1}}A?de=function(m){m.selectionStart=0,m.selectionEnd=m.value.length}:c&&(de=function(m){try{m.select()}catch{}});var qe=function(){this.id=null,this.f=null,this.time=0,this.handler=je(this.onTimeout,this)};function Pe(m,x){for(var S=0;S<m.length;++S)if(m[S]==x)return S;return-1}qe.prototype.onTimeout=function(m){m.id=0,m.time<=+new Date?m.f():setTimeout(m.handler,m.time-+new Date)},qe.prototype.set=function(m,x){this.f=x;var S=+new Date+m;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,m),this.time=S)};var At={toString:function(){return"CodeMirror.Pass"}},ht={scroll:!1},nn={origin:"*mouse"},Vt={origin:"+move"};function Mn(m,x,S){for(var _=0,C=0;;){var M=m.indexOf("	",_);M==-1&&(M=m.length);var N=M-_;if(M==m.length||C+N>=x)return _+Math.min(N,x-C);if(C+=M-_,_=M+1,(C+=S-C%S)>=x)return _}}var Ze=[""];function pe(m){for(;Ze.length<=m;)Ze.push(ie(Ze)+" ");return Ze[m]}function ie(m){return m[m.length-1]}function oe(m,x){for(var S=[],_=0;_<m.length;_++)S[_]=x(m[_],_);return S}function be(){}function F(m,x){var S;return Object.create?S=Object.create(m):(be.prototype=m,S=new be),x&&we(x,S),S}var H=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(m){return/\w/.test(m)||m>""&&(m.toUpperCase()!=m.toLowerCase()||H.test(m))}function re(m,x){return x?!!(x.source.indexOf("\\w")>-1&&J(m))||x.test(m):J(m)}function ye(m){for(var x in m)if(m.hasOwnProperty(x)&&m[x])return!1;return!0}var xe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Re(m){return m.charCodeAt(0)>=768&&xe.test(m)}function P(m,x,S){for(;(S<0?x>0:x<m.length)&&Re(m.charAt(x));)x+=S;return x}function Q(m,x,S){for(var _=x>S?-1:1;;){if(x==S)return x;var C=(x+S)/2,M=_<0?Math.ceil(C):Math.floor(C);if(M==x)return m(M)?x:S;m(M)?S=M:x=M+_}}var se=null;function ae(m,x,S){var _;se=null;for(var C=0;C<m.length;++C){var M=m[C];if(M.from<x&&M.to>x)return C;M.to==x&&(M.from!=M.to&&S=="before"?_=C:se=C),M.from==x&&(M.from!=M.to&&S!="before"?_=C:se=C)}return _??se}var ke=function(){var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,x=/[stwN]/,S=/[LRr]/,_=/[Lb1n]/,C=/[1n]/;function M(N,j,V){this.level=N,this.from=j,this.to=V}return function(N,j){var V=j=="ltr"?"L":"R";if(N.length==0||j=="ltr"&&!m.test(N))return!1;for(var W,ce=N.length,fe=[],Se=0;Se<ce;++Se)fe.push((W=N.charCodeAt(Se))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(W):1424<=W&&W<=1524?"R":1536<=W&&W<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(W-1536):1774<=W&&W<=2220?"r":8192<=W&&W<=8203?"w":W==8204?"b":"L");for(var ve=0,$e=V;ve<ce;++ve){var Ne=fe[ve];Ne=="m"?fe[ve]=$e:$e=Ne}for(var Me=0,Ve=V;Me<ce;++Me){var nt=fe[Me];nt=="1"&&Ve=="r"?fe[Me]="n":S.test(nt)&&(Ve=nt,nt=="r"&&(fe[Me]="R"))}for(var Je=1,mt=fe[0];Je<ce-1;++Je){var ct=fe[Je];ct=="+"&&mt=="1"&&fe[Je+1]=="1"?fe[Je]="1":ct!=","||mt!=fe[Je+1]||mt!="1"&&mt!="n"||(fe[Je]=mt),mt=ct}for(var gt=0;gt<ce;++gt){var vn=fe[gt];if(vn==",")fe[gt]="N";else if(vn=="%"){var Mt=void 0;for(Mt=gt+1;Mt<ce&&fe[Mt]=="%";++Mt);for(var Hn=gt&&fe[gt-1]=="!"||Mt<ce&&fe[Mt]=="1"?"1":"N",fn=gt;fn<Mt;++fn)fe[fn]=Hn;gt=Mt-1}}for(var ar=0,Nr=V;ar<ce;++ar){var lr=fe[ar];Nr=="L"&&lr=="1"?fe[ar]="L":S.test(lr)&&(Nr=lr)}for(var Zn=0;Zn<ce;++Zn)if(x.test(fe[Zn])){var ur=void 0;for(ur=Zn+1;ur<ce&&x.test(fe[ur]);++ur);for(var $n=(Zn?fe[Zn-1]:V)=="L",Br=$n==((ur<ce?fe[ur]:V)=="L")?$n?"L":"R":V,Fn=Zn;Fn<ur;++Fn)fe[Fn]=Br;Zn=ur-1}for(var Jn,Nn=[],vr=0;vr<ce;)if(_.test(fe[vr])){var lo=vr;for(++vr;vr<ce&&_.test(fe[vr]);++vr);Nn.push(new M(0,lo,vr))}else{var zr=vr,Ws=Nn.length,Ys=j=="rtl"?1:0;for(++vr;vr<ce&&fe[vr]!="L";++vr);for(var Ci=zr;Ci<vr;)if(C.test(fe[Ci])){zr<Ci&&(Nn.splice(Ws,0,new M(1,zr,Ci)),Ws+=Ys);var uo=Ci;for(++Ci;Ci<vr&&C.test(fe[Ci]);++Ci);Nn.splice(Ws,0,new M(2,uo,Ci)),Ws+=Ys,zr=Ci}else++Ci;zr<vr&&Nn.splice(Ws,0,new M(1,zr,vr))}return j=="ltr"&&(Nn[0].level==1&&(Jn=N.match(/^\s+/))&&(Nn[0].from=Jn[0].length,Nn.unshift(new M(0,0,Jn[0].length))),ie(Nn).level==1&&(Jn=N.match(/\s+$/))&&(ie(Nn).to-=Jn[0].length,Nn.push(new M(0,ce-Jn[0].length,ce)))),j=="rtl"?Nn.reverse():Nn}}();function Ce(m,x){var S=m.order;return S==null&&(S=m.order=ke(m.text,x)),S}var Ee=[],De=function(m,x,S){if(m.addEventListener)m.addEventListener(x,S,!1);else if(m.attachEvent)m.attachEvent("on"+x,S);else{var _=m._handlers||(m._handlers={});_[x]=(_[x]||Ee).concat(S)}};function Oe(m,x){return m._handlers&&m._handlers[x]||Ee}function We(m,x,S){if(m.removeEventListener)m.removeEventListener(x,S,!1);else if(m.detachEvent)m.detachEvent("on"+x,S);else{var _=m._handlers,C=_&&_[x];if(C){var M=Pe(C,S);M>-1&&(_[x]=C.slice(0,M).concat(C.slice(M+1)))}}}function tt(m,x){var S=Oe(m,x);if(S.length)for(var _=Array.prototype.slice.call(arguments,2),C=0;C<S.length;++C)S[C].apply(null,_)}function dt(m,x,S){return typeof x=="string"&&(x={type:x,preventDefault:function(){this.defaultPrevented=!0}}),tt(m,S||x.type,m,x),on(x)||x.codemirrorIgnore}function Kt(m){var x=m._handlers&&m._handlers.cursorActivity;if(x)for(var S=m.curOp.cursorActivityHandlers||(m.curOp.cursorActivityHandlers=[]),_=0;_<x.length;++_)Pe(S,x[_])==-1&&S.push(x[_])}function xt(m,x){return Oe(m,x).length>0}function Qt(m){m.prototype.on=function(x,S){De(this,x,S)},m.prototype.off=function(x,S){We(this,x,S)}}function rn(m){m.preventDefault?m.preventDefault():m.returnValue=!1}function sn(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=!0}function on(m){return m.defaultPrevented!=null?m.defaultPrevented:m.returnValue==0}function Tn(m){rn(m),sn(m)}function Er(m){return m.target||m.srcElement}function Ki(m){var x=m.which;return x==null&&(1&m.button?x=1:2&m.button?x=3:4&m.button&&(x=2)),k&&m.ctrlKey&&x==1&&(x=3),x}var ds,Hi,No=function(){if(c&&d<9)return!1;var m=X("div");return"draggable"in m||"dragDrop"in m}();function qn(m){if(ds==null){var x=X("span","");Y(m,X("span",[x,document.createTextNode("x")])),m.firstChild.offsetHeight!=0&&(ds=x.offsetWidth<=1&&x.offsetHeight>2&&!(c&&d<8))}var S=ds?X("span",""):X("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}function Mr(m){if(Hi!=null)return Hi;var x=Y(m,document.createTextNode("AA")),S=I(x,0,1).getBoundingClientRect(),_=I(x,1,2).getBoundingClientRect();return q(m),!(!S||S.left==S.right)&&(Hi=_.right-S.right<3)}var Lr,gn=`

b`.split(/\n/).length!=3?function(m){for(var x=0,S=[],_=m.length;x<=_;){var C=m.indexOf(`
`,x);C==-1&&(C=m.length);var M=m.slice(x,m.charAt(C-1)=="\r"?C-1:C),N=M.indexOf("\r");N!=-1?(S.push(M.slice(0,N)),x+=N+1):(S.push(M),x=C+1)}return S}:function(m){return m.split(/\r\n?|\n/)},Kr=window.getSelection?function(m){try{return m.selectionStart!=m.selectionEnd}catch{return!1}}:function(m){var x;try{x=m.ownerDocument.selection.createRange()}catch{}return!(!x||x.parentElement()!=m)&&x.compareEndPoints("StartToEnd",x)!=0},sr="oncopy"in(Lr=X("div"))||(Lr.setAttribute("oncopy","return;"),typeof Lr.oncopy=="function"),Ni=null,tr={},$r={};function to(m,x){arguments.length>2&&(x.dependencies=Array.prototype.slice.call(arguments,2)),tr[m]=x}function ge(m){if(typeof m=="string"&&$r.hasOwnProperty(m))m=$r[m];else if(m&&typeof m.name=="string"&&$r.hasOwnProperty(m.name)){var x=$r[m.name];typeof x=="string"&&(x={name:x}),(m=F(x,m)).name=x.name}else{if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(m))return ge("application/xml");if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(m))return ge("application/json")}return typeof m=="string"?{name:m}:m||{name:"null"}}function Le(m,x){x=ge(x);var S=tr[x.name];if(!S)return Le(m,"text/plain");var _=S(m,x);if(it.hasOwnProperty(x.name)){var C=it[x.name];for(var M in C)C.hasOwnProperty(M)&&(_.hasOwnProperty(M)&&(_["_"+M]=_[M]),_[M]=C[M])}if(_.name=x.name,x.helperType&&(_.helperType=x.helperType),x.modeProps)for(var N in x.modeProps)_[N]=x.modeProps[N];return _}var it={};function Ke(m,x){we(x,it.hasOwnProperty(m)?it[m]:it[m]={})}function Et(m,x){if(x===!0)return x;if(m.copyState)return m.copyState(x);var S={};for(var _ in x){var C=x[_];C instanceof Array&&(C=C.concat([])),S[_]=C}return S}function an(m,x){for(var S;m.innerMode&&(S=m.innerMode(x))&&S.mode!=m;)x=S.state,m=S.mode;return S||{mode:m,state:x}}function en(m,x,S){return!m.startState||m.startState(x,S)}var wt=function(m,x,S){this.pos=this.start=0,this.string=m,this.tabSize=x||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};function et(m,x){if((x-=m.first)<0||x>=m.size)throw new Error("There is no line "+(x+m.first)+" in the document.");for(var S=m;!S.lines;)for(var _=0;;++_){var C=S.children[_],M=C.chunkSize();if(x<M){S=C;break}x-=M}return S.lines[x]}function hn(m,x,S){var _=[],C=x.line;return m.iter(x.line,S.line+1,function(M){var N=M.text;C==S.line&&(N=N.slice(0,S.ch)),C==x.line&&(N=N.slice(x.ch)),_.push(N),++C}),_}function An(m,x,S){var _=[];return m.iter(x,S,function(C){_.push(C.text)}),_}function zt(m,x){var S=x-m.height;if(S)for(var _=m;_;_=_.parent)_.height+=S}function jt(m){if(m.parent==null)return null;for(var x=m.parent,S=Pe(x.lines,m),_=x.parent;_;x=_,_=_.parent)for(var C=0;_.children[C]!=x;++C)S+=_.children[C].chunkSize();return S+x.first}function Sr(m,x){var S=m.first;e:do{for(var _=0;_<m.children.length;++_){var C=m.children[_],M=C.height;if(x<M){m=C;continue e}x-=M,S+=C.chunkSize()}return S}while(!m.lines);for(var N=0;N<m.lines.length;++N){var j=m.lines[N].height;if(x<j)break;x-=j}return S+N}function ci(m,x){return x>=m.first&&x<m.first+m.size}function Zt(m,x){return String(m.lineNumberFormatter(x+m.firstLineNumber))}function Xe(m,x,S){if(S===void 0&&(S=null),!(this instanceof Xe))return new Xe(m,x,S);this.line=m,this.ch=x,this.sticky=S}function pt(m,x){return m.line-x.line||m.ch-x.ch}function Xn(m,x){return m.sticky==x.sticky&&pt(m,x)==0}function ni(m){return Xe(m.line,m.ch)}function Ar(m,x){return pt(m,x)<0?x:m}function Rr(m,x){return pt(m,x)<0?m:x}function nr(m,x){return Math.max(m.first,Math.min(x,m.first+m.size-1))}function qt(m,x){if(x.line<m.first)return Xe(m.first,0);var S=m.first+m.size-1;return x.line>S?Xe(S,et(m,S).text.length):function(_,C){var M=_.ch;return M==null||M>C?Xe(_.line,C):M<0?Xe(_.line,0):_}(x,et(m,x.line).text.length)}function vi(m,x){for(var S=[],_=0;_<x.length;_++)S[_]=qt(m,x[_]);return S}wt.prototype.eol=function(){return this.pos>=this.string.length},wt.prototype.sol=function(){return this.pos==this.lineStart},wt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},wt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},wt.prototype.eat=function(m){var x=this.string.charAt(this.pos);if(typeof m=="string"?x==m:x&&(m.test?m.test(x):m(x)))return++this.pos,x},wt.prototype.eatWhile=function(m){for(var x=this.pos;this.eat(m););return this.pos>x},wt.prototype.eatSpace=function(){for(var m=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>m},wt.prototype.skipToEnd=function(){this.pos=this.string.length},wt.prototype.skipTo=function(m){var x=this.string.indexOf(m,this.pos);if(x>-1)return this.pos=x,!0},wt.prototype.backUp=function(m){this.pos-=m},wt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ie(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},wt.prototype.indentation=function(){return Ie(this.string,null,this.tabSize)-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},wt.prototype.match=function(m,x,S){if(typeof m!="string"){var _=this.string.slice(this.pos).match(m);return _&&_.index>0?null:(_&&x!==!1&&(this.pos+=_[0].length),_)}var C=function(M){return S?M.toLowerCase():M};if(C(this.string.substr(this.pos,m.length))==C(m))return x!==!1&&(this.pos+=m.length),!0},wt.prototype.current=function(){return this.string.slice(this.start,this.pos)},wt.prototype.hideFirstChars=function(m,x){this.lineStart+=m;try{return x()}finally{this.lineStart-=m}},wt.prototype.lookAhead=function(m){var x=this.lineOracle;return x&&x.lookAhead(m)},wt.prototype.baseToken=function(){var m=this.lineOracle;return m&&m.baseToken(this.pos)};var Ji=function(m,x){this.state=m,this.lookAhead=x},bi=function(m,x,S,_){this.state=x,this.doc=m,this.line=S,this.maxLookAhead=_||0,this.baseTokens=null,this.baseTokenPos=1};function js(m,x,S,_){var C=[m.state.modeGen],M={};al(m,x.text,m.doc.mode,S,function(W,ce){return C.push(W,ce)},M,_);for(var N=S.state,j=function(W){S.baseTokens=C;var ce=m.state.overlays[W],fe=1,Se=0;S.state=!0,al(m,x.text,ce.mode,S,function(ve,$e){for(var Ne=fe;Se<ve;){var Me=C[fe];Me>ve&&C.splice(fe,1,ve,C[fe+1],Me),fe+=2,Se=Math.min(ve,Me)}if($e)if(ce.opaque)C.splice(Ne,fe-Ne,ve,"overlay "+$e),fe=Ne+2;else for(;Ne<fe;Ne+=2){var Ve=C[Ne+1];C[Ne+1]=(Ve?Ve+" ":"")+"overlay "+$e}},M),S.state=N,S.baseTokens=null,S.baseTokenPos=1},V=0;V<m.state.overlays.length;++V)j(V);return{styles:C,classes:M.bgClass||M.textClass?M:null}}function xo(m,x,S){if(!x.styles||x.styles[0]!=m.state.modeGen){var _=no(m,jt(x)),C=x.text.length>m.options.maxHighlightLength&&Et(m.doc.mode,_.state),M=js(m,x,_);C&&(_.state=C),x.stateAfter=_.save(!C),x.styles=M.styles,M.classes?x.styleClasses=M.classes:x.styleClasses&&(x.styleClasses=null),S===m.doc.highlightFrontier&&(m.doc.modeFrontier=Math.max(m.doc.modeFrontier,++m.doc.highlightFrontier))}return x.styles}function no(m,x,S){var _=m.doc,C=m.display;if(!_.mode.startState)return new bi(_,!0,x);var M=function(V,W,ce){for(var fe,Se,ve=V.doc,$e=ce?-1:W-(V.doc.mode.innerMode?1e3:100),Ne=W;Ne>$e;--Ne){if(Ne<=ve.first)return ve.first;var Me=et(ve,Ne-1),Ve=Me.stateAfter;if(Ve&&(!ce||Ne+(Ve instanceof Ji?Ve.lookAhead:0)<=ve.modeFrontier))return Ne;var nt=Ie(Me.text,null,V.options.tabSize);(Se==null||fe>nt)&&(Se=Ne-1,fe=nt)}return Se}(m,x,S),N=M>_.first&&et(_,M-1).stateAfter,j=N?bi.fromSaved(_,N,M):new bi(_,en(_.mode),M);return _.iter(M,x,function(V){Bo(m,V.text,j);var W=j.line;V.stateAfter=W==x-1||W%5==0||W>=C.viewFrom&&W<C.viewTo?j.save():null,j.nextLine()}),S&&(_.modeFrontier=j.line),j}function Bo(m,x,S,_){var C=m.doc.mode,M=new wt(x,m.options.tabSize,S);for(M.start=M.pos=_||0,x==""&&bs(C,S.state);!M.eol();)Fs(C,M,S.state),M.start=M.pos}function bs(m,x){if(m.blankLine)return m.blankLine(x);if(m.innerMode){var S=an(m,x);return S.mode.blankLine?S.mode.blankLine(S.state):void 0}}function Fs(m,x,S,_){for(var C=0;C<10;C++){_&&(_[0]=an(m,S).mode);var M=m.token(x,S);if(x.pos>x.start)return M}throw new Error("Mode "+m.name+" failed to advance stream.")}bi.prototype.lookAhead=function(m){var x=this.doc.getLine(this.line+m);return x!=null&&m>this.maxLookAhead&&(this.maxLookAhead=m),x},bi.prototype.baseToken=function(m){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=m;)this.baseTokenPos+=2;var x=this.baseTokens[this.baseTokenPos+1];return{type:x&&x.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-m}},bi.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},bi.fromSaved=function(m,x,S){return x instanceof Ji?new bi(m,Et(m.mode,x.state),S,x.lookAhead):new bi(m,Et(m.mode,x),S)},bi.prototype.save=function(m){var x=m!==!1?Et(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ji(x,this.maxLookAhead):x};var zo=function(m,x,S){this.start=m.start,this.end=m.pos,this.string=m.current(),this.type=x||null,this.state=S};function hs(m,x,S,_){var C,M,N=m.doc,j=N.mode,V=et(N,(x=qt(N,x)).line),W=no(m,x.line,S),ce=new wt(V.text,m.options.tabSize,W);for(_&&(M=[]);(_||ce.pos<x.ch)&&!ce.eol();)ce.start=ce.pos,C=Fs(j,ce,W.state),_&&M.push(new zo(ce,C,Et(N.mode,W.state)));return _?M:new zo(ce,C,W.state)}function ol(m,x){if(m)for(;;){var S=m.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;m=m.slice(0,S.index)+m.slice(S.index+S[0].length);var _=S[1]?"bgClass":"textClass";x[_]==null?x[_]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(x[_])||(x[_]+=" "+S[2])}return m}function al(m,x,S,_,C,M,N){var j=S.flattenSpans;j==null&&(j=m.options.flattenSpans);var V,W=0,ce=null,fe=new wt(x,m.options.tabSize,_),Se=m.options.addModeClass&&[null];for(x==""&&ol(bs(S,_.state),M);!fe.eol();){if(fe.pos>m.options.maxHighlightLength?(j=!1,N&&Bo(m,x,_,fe.pos),fe.pos=x.length,V=null):V=ol(Fs(S,fe,_.state,Se),M),Se){var ve=Se[0].name;ve&&(V="m-"+(V?ve+" "+V:ve))}if(!j||ce!=V){for(;W<fe.start;)C(W=Math.min(fe.start,W+5e3),ce);ce=V}fe.start=fe.pos}for(;W<fe.pos;){var $e=Math.min(fe.pos,W+5e3);C($e,ce),W=$e}}var Cr=!1,Qi=!1;function ro(m,x,S){this.marker=m,this.from=x,this.to=S}function Os(m,x){if(m)for(var S=0;S<m.length;++S){var _=m[S];if(_.marker==x)return _}}function Us(m,x){for(var S,_=0;_<m.length;++_)m[_]!=x&&(S||(S=[])).push(m[_]);return S}function fa(m,x){if(x.full)return null;var S=ci(m,x.from.line)&&et(m,x.from.line).markedSpans,_=ci(m,x.to.line)&&et(m,x.to.line).markedSpans;if(!S&&!_)return null;var C=x.from.ch,M=x.to.ch,N=pt(x.from,x.to)==0,j=function(ct,gt,vn){var Mt;if(ct)for(var Hn=0;Hn<ct.length;++Hn){var fn=ct[Hn],ar=fn.marker;if(fn.from==null||(ar.inclusiveLeft?fn.from<=gt:fn.from<gt)||fn.from==gt&&ar.type=="bookmark"&&(!vn||!fn.marker.insertLeft)){var Nr=fn.to==null||(ar.inclusiveRight?fn.to>=gt:fn.to>gt);(Mt||(Mt=[])).push(new ro(ar,fn.from,Nr?null:fn.to))}}return Mt}(S,C,N),V=function(ct,gt,vn){var Mt;if(ct)for(var Hn=0;Hn<ct.length;++Hn){var fn=ct[Hn],ar=fn.marker;if(fn.to==null||(ar.inclusiveRight?fn.to>=gt:fn.to>gt)||fn.from==gt&&ar.type=="bookmark"&&(!vn||fn.marker.insertLeft)){var Nr=fn.from==null||(ar.inclusiveLeft?fn.from<=gt:fn.from<gt);(Mt||(Mt=[])).push(new ro(ar,Nr?null:fn.from-gt,fn.to==null?null:fn.to-gt))}}return Mt}(_,M,N),W=x.text.length==1,ce=ie(x.text).length+(W?C:0);if(j)for(var fe=0;fe<j.length;++fe){var Se=j[fe];if(Se.to==null){var ve=Os(V,Se.marker);ve?W&&(Se.to=ve.to==null?null:ve.to+ce):Se.to=C}}if(V)for(var $e=0;$e<V.length;++$e){var Ne=V[$e];Ne.to!=null&&(Ne.to+=ce),Ne.from==null?Os(j,Ne.marker)||(Ne.from=ce,W&&(j||(j=[])).push(Ne)):(Ne.from+=ce,W&&(j||(j=[])).push(Ne))}j&&(j=qs(j)),V&&V!=j&&(V=qs(V));var Me=[j];if(!W){var Ve,nt=x.text.length-2;if(nt>0&&j)for(var Je=0;Je<j.length;++Je)j[Je].to==null&&(Ve||(Ve=[])).push(new ro(j[Je].marker,null,null));for(var mt=0;mt<nt;++mt)Me.push(Ve);Me.push(V)}return Me}function qs(m){for(var x=0;x<m.length;++x){var S=m[x];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&m.splice(x--,1)}return m.length?m:null}function ll(m){var x=m.markedSpans;if(x){for(var S=0;S<x.length;++S)x[S].marker.detachLine(m);m.markedSpans=null}}function Gi(m,x){if(x){for(var S=0;S<x.length;++S)x[S].marker.attachLine(m);m.markedSpans=x}}function Vi(m){return m.inclusiveLeft?-1:0}function io(m){return m.inclusiveRight?1:0}function ps(m,x){var S=m.lines.length-x.lines.length;if(S!=0)return S;var _=m.find(),C=x.find(),M=pt(_.from,C.from)||Vi(m)-Vi(x);if(M)return-M;var N=pt(_.to,C.to)||io(m)-io(x);return N||x.id-m.id}function jo(m,x){var S,_=Qi&&m.markedSpans;if(_)for(var C=void 0,M=0;M<_.length;++M)(C=_[M]).marker.collapsed&&(x?C.from:C.to)==null&&(!S||ps(S,C.marker)<0)&&(S=C.marker);return S}function Hs(m){return jo(m,!0)}function fi(m){return jo(m,!1)}function Ma(m,x){var S,_=Qi&&m.markedSpans;if(_)for(var C=0;C<_.length;++C){var M=_[C];M.marker.collapsed&&(M.from==null||M.from<x)&&(M.to==null||M.to>x)&&(!S||ps(S,M.marker)<0)&&(S=M.marker)}return S}function so(m,x,S,_,C){var M=et(m,x),N=Qi&&M.markedSpans;if(N)for(var j=0;j<N.length;++j){var V=N[j];if(V.marker.collapsed){var W=V.marker.find(0),ce=pt(W.from,S)||Vi(V.marker)-Vi(C),fe=pt(W.to,_)||io(V.marker)-io(C);if(!(ce>=0&&fe<=0||ce<=0&&fe>=0)&&(ce<=0&&(V.marker.inclusiveRight&&C.inclusiveLeft?pt(W.to,S)>=0:pt(W.to,S)>0)||ce>=0&&(V.marker.inclusiveRight&&C.inclusiveLeft?pt(W.from,_)<=0:pt(W.from,_)<0)))return!0}}}function Wi(m){for(var x;x=Hs(m);)m=x.find(-1,!0).line;return m}function oo(m,x){var S=et(m,x),_=Wi(S);return S==_?x:jt(_)}function ul(m,x){if(x>m.lastLine())return x;var S,_=et(m,x);if(!Ht(m,_))return x;for(;S=fi(_);)_=S.find(1,!0).line;return jt(_)+1}function Ht(m,x){var S=Qi&&x.markedSpans;if(S){for(var _=void 0,C=0;C<S.length;++C)if((_=S[C]).marker.collapsed&&(_.from==null||!_.marker.widgetNode&&_.from==0&&_.marker.inclusiveLeft&&Z(m,x,_)))return!0}}function Z(m,x,S){if(S.to==null){var _=S.marker.find(1,!0);return Z(m,_.line,Os(_.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==x.text.length)return!0;for(var C=void 0,M=0;M<x.markedSpans.length;++M)if((C=x.markedSpans[M]).marker.collapsed&&!C.marker.widgetNode&&C.from==S.to&&(C.to==null||C.to!=S.from)&&(C.marker.inclusiveLeft||S.marker.inclusiveRight)&&Z(m,x,C))return!0}function me(m){for(var x=0,S=(m=Wi(m)).parent,_=0;_<S.lines.length;++_){var C=S.lines[_];if(C==m)break;x+=C.height}for(var M=S.parent;M;M=(S=M).parent)for(var N=0;N<M.children.length;++N){var j=M.children[N];if(j==S)break;x+=j.height}return x}function Be(m){if(m.height==0)return 0;for(var x,S=m.text.length,_=m;x=Hs(_);){var C=x.find(0,!0);_=C.from.line,S+=C.from.ch-C.to.ch}for(_=m;x=fi(_);){var M=x.find(0,!0);S-=_.text.length-M.from.ch,S+=(_=M.to.line).text.length-M.to.ch}return S}function yt(m){var x=m.display,S=m.doc;x.maxLine=et(S,S.first),x.maxLineLength=Be(x.maxLine),x.maxLineChanged=!0,S.iter(function(_){var C=Be(_);C>x.maxLineLength&&(x.maxLineLength=C,x.maxLine=_)})}var pn=function(m,x,S){this.text=m,Gi(this,x),this.height=S?S(this):1};function It(m){m.parent=null,ll(m)}pn.prototype.lineNo=function(){return jt(this)},Qt(pn);var In={},dr={};function kr(m,x){if(!m||/^\s*$/.test(m))return null;var S=x.addModeClass?dr:In;return S[m]||(S[m]=m.replace(/\S+/g,"cm-$&"))}function Ln(m,x){var S=te("span",null,null,h?"padding-right: .1px":null),_={pre:te("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:m,trailingSpace:!1,splitSpaces:m.getOption("lineWrapping")};x.measure={};for(var C=0;C<=(x.rest?x.rest.length:0);C++){var M=C?x.rest[C-1]:x.line,N=void 0;_.pos=0,_.addToken=Jr,Mr(m.display.measure)&&(N=Ce(M,m.doc.direction))&&(_.addToken=or(_.addToken,N)),_.map=[],xs(M,_,xo(m,M,x!=m.display.externalMeasured&&jt(M))),M.styleClasses&&(M.styleClasses.bgClass&&(_.bgClass=he(M.styleClasses.bgClass,_.bgClass||"")),M.styleClasses.textClass&&(_.textClass=he(M.styleClasses.textClass,_.textClass||""))),_.map.length==0&&_.map.push(0,0,_.content.appendChild(qn(m.display.measure))),C==0?(x.measure.map=_.map,x.measure.cache={}):((x.measure.maps||(x.measure.maps=[])).push(_.map),(x.measure.caches||(x.measure.caches=[])).push({}))}if(h){var j=_.content.lastChild;(/\bcm-tab\b/.test(j.className)||j.querySelector&&j.querySelector(".cm-tab"))&&(_.content.className="cm-tab-wrap-hack")}return tt(m,"renderLine",m,x.line,_.pre),_.pre.className&&(_.textClass=he(_.pre.className,_.textClass||"")),_}function Ai(m){var x=X("span","","cm-invalidchar");return x.title="\\u"+m.charCodeAt(0).toString(16),x.setAttribute("aria-label",x.title),x}function Jr(m,x,S,_,C,M,N){if(x){var j,V=m.splitSpaces?function(ct,gt){if(ct.length>1&&!/  /.test(ct))return ct;for(var vn=gt,Mt="",Hn=0;Hn<ct.length;Hn++){var fn=ct.charAt(Hn);fn!=" "||!vn||Hn!=ct.length-1&&ct.charCodeAt(Hn+1)!=32||(fn=""),Mt+=fn,vn=fn==" "}return Mt}(x,m.trailingSpace):x,W=m.cm.state.specialChars,ce=!1;if(W.test(x)){j=document.createDocumentFragment();for(var fe=0;;){W.lastIndex=fe;var Se=W.exec(x),ve=Se?Se.index-fe:x.length-fe;if(ve){var $e=document.createTextNode(V.slice(fe,fe+ve));c&&d<9?j.appendChild(X("span",[$e])):j.appendChild($e),m.map.push(m.pos,m.pos+ve,$e),m.col+=ve,m.pos+=ve}if(!Se)break;fe+=ve+1;var Ne=void 0;if(Se[0]=="	"){var Me=m.cm.options.tabSize,Ve=Me-m.col%Me;(Ne=j.appendChild(X("span",pe(Ve),"cm-tab"))).setAttribute("role","presentation"),Ne.setAttribute("cm-text","	"),m.col+=Ve}else Se[0]=="\r"||Se[0]==`
`?((Ne=j.appendChild(X("span",Se[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",Se[0]),m.col+=1):((Ne=m.cm.options.specialCharPlaceholder(Se[0])).setAttribute("cm-text",Se[0]),c&&d<9?j.appendChild(X("span",[Ne])):j.appendChild(Ne),m.col+=1);m.map.push(m.pos,m.pos+1,Ne),m.pos++}}else m.col+=x.length,j=document.createTextNode(V),m.map.push(m.pos,m.pos+x.length,j),c&&d<9&&(ce=!0),m.pos+=x.length;if(m.trailingSpace=V.charCodeAt(x.length-1)==32,S||_||C||ce||M||N){var nt=S||"";_&&(nt+=_),C&&(nt+=C);var Je=X("span",[j],nt,M);if(N)for(var mt in N)N.hasOwnProperty(mt)&&mt!="style"&&mt!="class"&&Je.setAttribute(mt,N[mt]);return m.content.appendChild(Je)}m.content.appendChild(j)}}function or(m,x){return function(S,_,C,M,N,j,V){C=C?C+" cm-force-border":"cm-force-border";for(var W=S.pos,ce=W+_.length;;){for(var fe=void 0,Se=0;Se<x.length&&!((fe=x[Se]).to>W&&fe.from<=W);Se++);if(fe.to>=ce)return m(S,_,C,M,N,j,V);m(S,_.slice(0,fe.to-W),C,M,null,j,V),M=null,_=_.slice(fe.to-W),W=fe.to}}}function di(m,x,S,_){var C=!_&&S.widgetNode;C&&m.map.push(m.pos,m.pos+x,C),!_&&m.cm.display.input.needsContentAttribute&&(C||(C=m.content.appendChild(document.createElement("span"))),C.setAttribute("cm-marker",S.id)),C&&(m.cm.display.input.setUneditable(C),m.content.appendChild(C)),m.pos+=x,m.trailingSpace=!1}function xs(m,x,S){var _=m.markedSpans,C=m.text,M=0;if(_)for(var N,j,V,W,ce,fe,Se,ve=C.length,$e=0,Ne=1,Me="",Ve=0;;){if(Ve==$e){V=W=ce=j="",Se=null,fe=null,Ve=1/0;for(var nt=[],Je=void 0,mt=0;mt<_.length;++mt){var ct=_[mt],gt=ct.marker;if(gt.type=="bookmark"&&ct.from==$e&&gt.widgetNode)nt.push(gt);else if(ct.from<=$e&&(ct.to==null||ct.to>$e||gt.collapsed&&ct.to==$e&&ct.from==$e)){if(ct.to!=null&&ct.to!=$e&&Ve>ct.to&&(Ve=ct.to,W=""),gt.className&&(V+=" "+gt.className),gt.css&&(j=(j?j+";":"")+gt.css),gt.startStyle&&ct.from==$e&&(ce+=" "+gt.startStyle),gt.endStyle&&ct.to==Ve&&(Je||(Je=[])).push(gt.endStyle,ct.to),gt.title&&((Se||(Se={})).title=gt.title),gt.attributes)for(var vn in gt.attributes)(Se||(Se={}))[vn]=gt.attributes[vn];gt.collapsed&&(!fe||ps(fe.marker,gt)<0)&&(fe=ct)}else ct.from>$e&&Ve>ct.from&&(Ve=ct.from)}if(Je)for(var Mt=0;Mt<Je.length;Mt+=2)Je[Mt+1]==Ve&&(W+=" "+Je[Mt]);if(!fe||fe.from==$e)for(var Hn=0;Hn<nt.length;++Hn)di(x,0,nt[Hn]);if(fe&&(fe.from||0)==$e){if(di(x,(fe.to==null?ve+1:fe.to)-$e,fe.marker,fe.from==null),fe.to==null)return;fe.to==$e&&(fe=!1)}}if($e>=ve)break;for(var fn=Math.min(ve,Ve);;){if(Me){var ar=$e+Me.length;if(!fe){var Nr=ar>fn?Me.slice(0,fn-$e):Me;x.addToken(x,Nr,N?N+V:V,ce,$e+Nr.length==Ve?W:"",j,Se)}if(ar>=fn){Me=Me.slice(fn-$e),$e=fn;break}$e=ar,ce=""}Me=C.slice(M,M=S[Ne++]),N=kr(S[Ne++],x.cm.options)}}else for(var lr=1;lr<S.length;lr+=2)x.addToken(x,C.slice(M,M=S[lr]),kr(S[lr+1],x.cm.options))}function Gs(m,x,S){this.line=x,this.rest=function(_){for(var C,M;C=fi(_);)_=C.find(1,!0).line,(M||(M=[])).push(_);return M}(x),this.size=this.rest?jt(ie(this.rest))-S+1:1,this.node=this.text=null,this.hidden=Ht(m,x)}function Bi(m,x,S){for(var _,C=[],M=x;M<S;M=_){var N=new Gs(m.doc,et(m.doc,M),M);_=M+N.size,C.push(N)}return C}var zi=null,wo=null;function Hr(m,x){var S=Oe(m,x);if(S.length){var _,C=Array.prototype.slice.call(arguments,2);zi?_=zi.delayedCallbacks:wo?_=wo:(_=wo=[],setTimeout(da,0));for(var M=function(j){_.push(function(){return S[j].apply(null,C)})},N=0;N<S.length;++N)M(N)}}function da(){var m=wo;wo=null;for(var x=0;x<m.length;++x)m[x]()}function Gu(m,x,S,_){for(var C=0;C<x.changes.length;C++){var M=x.changes[C];M=="text"?Vc(m,x):M=="gutter"?ne(m,x,S,_):M=="class"?Vu(m,x):M=="widget"&&_e(m,x,_)}x.changes=null}function cl(m){return m.node==m.text&&(m.node=X("div",null,null,"position: relative"),m.text.parentNode&&m.text.parentNode.replaceChild(m.node,m.text),m.node.appendChild(m.text),c&&d<8&&(m.node.style.zIndex=2)),m.node}function fl(m,x){var S=m.display.externalMeasured;return S&&S.line==x.line?(m.display.externalMeasured=null,x.measure=S.measure,S.built):Ln(m,x)}function Vc(m,x){var S=x.text.className,_=fl(m,x);x.text==x.node&&(x.node=_.pre),x.text.parentNode.replaceChild(_.pre,x.text),x.text=_.pre,_.bgClass!=x.bgClass||_.textClass!=x.textClass?(x.bgClass=_.bgClass,x.textClass=_.textClass,Vu(m,x)):S&&(x.text.className=S)}function Vu(m,x){(function(_,C){var M=C.bgClass?C.bgClass+" "+(C.line.bgClass||""):C.line.bgClass;if(M&&(M+=" CodeMirror-linebackground"),C.background)M?C.background.className=M:(C.background.parentNode.removeChild(C.background),C.background=null);else if(M){var N=cl(C);C.background=N.insertBefore(X("div",null,M),N.firstChild),_.display.input.setUneditable(C.background)}})(m,x),x.line.wrapClass?cl(x).className=x.line.wrapClass:x.node!=x.text&&(x.node.className="");var S=x.textClass?x.textClass+" "+(x.line.textClass||""):x.line.textClass;x.text.className=S||""}function ne(m,x,S,_){if(x.gutter&&(x.node.removeChild(x.gutter),x.gutter=null),x.gutterBackground&&(x.node.removeChild(x.gutterBackground),x.gutterBackground=null),x.line.gutterClass){var C=cl(x);x.gutterBackground=X("div",null,"CodeMirror-gutter-background "+x.line.gutterClass,"left: "+(m.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px; width: "+_.gutterTotalWidth+"px"),m.display.input.setUneditable(x.gutterBackground),C.insertBefore(x.gutterBackground,x.text)}var M=x.line.gutterMarkers;if(m.options.lineNumbers||M){var N=cl(x),j=x.gutter=X("div",null,"CodeMirror-gutter-wrapper","left: "+(m.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px");if(j.setAttribute("aria-hidden","true"),m.display.input.setUneditable(j),N.insertBefore(j,x.text),x.line.gutterClass&&(j.className+=" "+x.line.gutterClass),!m.options.lineNumbers||M&&M["CodeMirror-linenumbers"]||(x.lineNumber=j.appendChild(X("div",Zt(m.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+m.display.lineNumInnerWidth+"px"))),M)for(var V=0;V<m.display.gutterSpecs.length;++V){var W=m.display.gutterSpecs[V].className,ce=M.hasOwnProperty(W)&&M[W];ce&&j.appendChild(X("div",[ce],"CodeMirror-gutter-elt","left: "+_.gutterLeft[W]+"px; width: "+_.gutterWidth[W]+"px"))}}}function _e(m,x,S){x.alignable&&(x.alignable=null);for(var _=$("CodeMirror-linewidget"),C=x.node.firstChild,M=void 0;C;C=M)M=C.nextSibling,_.test(C.className)&&x.node.removeChild(C);vt(m,x,S)}function Ye(m,x,S,_){var C=fl(m,x);return x.text=x.node=C.pre,C.bgClass&&(x.bgClass=C.bgClass),C.textClass&&(x.textClass=C.textClass),Vu(m,x),ne(m,x,S,_),vt(m,x,_),x.node}function vt(m,x,S){if(Jt(m,x.line,x,S,!0),x.rest)for(var _=0;_<x.rest.length;_++)Jt(m,x.rest[_],x,S,!1)}function Jt(m,x,S,_,C){if(x.widgets)for(var M=cl(S),N=0,j=x.widgets;N<j.length;++N){var V=j[N],W=X("div",[V.node],"CodeMirror-linewidget"+(V.className?" "+V.className:""));V.handleMouseEvents||W.setAttribute("cm-ignore-events","true"),Ut(V,W,S,_),m.display.input.setUneditable(W),C&&V.above?M.insertBefore(W,S.gutter||S.text):M.appendChild(W),Hr(V,"redraw")}}function Ut(m,x,S,_){if(m.noHScroll){(S.alignable||(S.alignable=[])).push(x);var C=_.wrapperWidth;x.style.left=_.fixedPos+"px",m.coverGutter||(C-=_.gutterTotalWidth,x.style.paddingLeft=_.gutterTotalWidth+"px"),x.style.width=C+"px"}m.coverGutter&&(x.style.zIndex=5,x.style.position="relative",m.noHScroll||(x.style.marginLeft=-_.gutterTotalWidth+"px"))}function Sn(m){if(m.height!=null)return m.height;var x=m.doc.cm;if(!x)return 0;if(!le(document.body,m.node)){var S="position: relative;";m.coverGutter&&(S+="margin-left: -"+x.display.gutters.offsetWidth+"px;"),m.noHScroll&&(S+="width: "+x.display.wrapper.clientWidth+"px;"),Y(x.display.measure,X("div",[m.node],null,S))}return m.height=m.node.parentNode.offsetHeight}function pr(m,x){for(var S=Er(x);S!=m.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==m.sizer&&S!=m.mover)return!0}function Ir(m){return m.lineSpace.offsetTop}function es(m){return m.mover.offsetHeight-m.lineSpace.offsetHeight}function ws(m){if(m.cachedPaddingH)return m.cachedPaddingH;var x=Y(m.measure,X("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(x):x.currentStyle,_={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return isNaN(_.left)||isNaN(_.right)||(m.cachedPaddingH=_),_}function xi(m){return 50-m.display.nativeBarWidth}function Li(m){return m.display.scroller.clientWidth-xi(m)-m.display.barWidth}function Te(m){return m.display.scroller.clientHeight-xi(m)-m.display.barHeight}function ut(m,x,S){if(m.line==x)return{map:m.measure.map,cache:m.measure.cache};if(m.rest){for(var _=0;_<m.rest.length;_++)if(m.rest[_]==x)return{map:m.measure.maps[_],cache:m.measure.caches[_]};for(var C=0;C<m.rest.length;C++)if(jt(m.rest[C])>S)return{map:m.measure.maps[C],cache:m.measure.caches[C],before:!0}}}function Wt(m,x,S,_){return Pn(m,mr(m,x),S,_)}function Vn(m,x){if(x>=m.display.viewFrom&&x<m.display.viewTo)return m.display.view[Yc(m,x)];var S=m.display.externalMeasured;return S&&x>=S.lineN&&x<S.lineN+S.size?S:void 0}function mr(m,x){var S=jt(x),_=Vn(m,S);_&&!_.text?_=null:_&&_.changes&&(Gu(m,_,S,K0(m)),m.curOp.forceUpdate=!0),_||(_=function(M,N){var j=jt(N=Wi(N)),V=M.display.externalMeasured=new Gs(M.doc,N,j);V.lineN=j;var W=V.built=Ln(M,V);return V.text=W.pre,Y(M.display.lineMeasure,W.pre),V}(m,x));var C=ut(_,x,S);return{line:x,view:_,rect:null,map:C.map,cache:C.cache,before:C.before,hasHeights:!1}}function Pn(m,x,S,_,C){x.before&&(S=-1);var M,N=S+(_||"");return x.cache.hasOwnProperty(N)?M=x.cache[N]:(x.rect||(x.rect=x.view.text.getBoundingClientRect()),x.hasHeights||(function(j,V,W){var ce=j.options.lineWrapping,fe=ce&&Li(j);if(!V.measure.heights||ce&&V.measure.width!=fe){var Se=V.measure.heights=[];if(ce){V.measure.width=fe;for(var ve=V.text.firstChild.getClientRects(),$e=0;$e<ve.length-1;$e++){var Ne=ve[$e],Me=ve[$e+1];Math.abs(Ne.bottom-Me.bottom)>2&&Se.push((Ne.bottom+Me.top)/2-W.top)}}Se.push(W.bottom-W.top)}}(m,x.view,x.rect),x.hasHeights=!0),M=function(j,V,W,ce){var fe,Se=Sb(V.map,W,ce),ve=Se.node,$e=Se.start,Ne=Se.end,Me=Se.collapse;if(ve.nodeType==3){for(var Ve=0;Ve<4;Ve++){for(;$e&&Re(V.line.text.charAt(Se.coverStart+$e));)--$e;for(;Se.coverStart+Ne<Se.coverEnd&&Re(V.line.text.charAt(Se.coverStart+Ne));)++Ne;if((fe=c&&d<9&&$e==0&&Ne==Se.coverEnd-Se.coverStart?ve.parentNode.getBoundingClientRect():mS(I(ve,$e,Ne).getClientRects(),ce)).left||fe.right||$e==0)break;Ne=$e,$e-=1,Me="right"}c&&d<11&&(fe=function(Nr,lr){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function($n){if(Ni!=null)return Ni;var Br=Y($n,X("span","x")),Fn=Br.getBoundingClientRect(),Jn=I(Br,0,1).getBoundingClientRect();return Ni=Math.abs(Fn.left-Jn.left)>1}(Nr))return lr;var Zn=screen.logicalXDPI/screen.deviceXDPI,ur=screen.logicalYDPI/screen.deviceYDPI;return{left:lr.left*Zn,right:lr.right*Zn,top:lr.top*ur,bottom:lr.bottom*ur}}(j.display.measure,fe))}else{var nt;$e>0&&(Me=ce="right"),fe=j.options.lineWrapping&&(nt=ve.getClientRects()).length>1?nt[ce=="right"?nt.length-1:0]:ve.getBoundingClientRect()}if(c&&d<9&&!$e&&(!fe||!fe.left&&!fe.right)){var Je=ve.parentNode.getClientRects()[0];fe=Je?{left:Je.left,right:Je.left+ad(j.display),top:Je.top,bottom:Je.bottom}:$a}for(var mt=fe.top-V.rect.top,ct=fe.bottom-V.rect.top,gt=(mt+ct)/2,vn=V.view.measure.heights,Mt=0;Mt<vn.length-1&&!(gt<vn[Mt]);Mt++);var Hn=Mt?vn[Mt-1]:0,fn=vn[Mt],ar={left:(Me=="right"?fe.right:fe.left)-V.rect.left,right:(Me=="left"?fe.left:fe.right)-V.rect.left,top:Hn,bottom:fn};return fe.left||fe.right||(ar.bogus=!0),j.options.singleCursorHeightPerLine||(ar.rtop=mt,ar.rbottom=ct),ar}(m,x,S,_),M.bogus||(x.cache[N]=M)),{left:M.left,right:M.right,top:C?M.rtop:M.top,bottom:C?M.rbottom:M.bottom}}var ji,$a={left:0,right:0,top:0,bottom:0};function Sb(m,x,S){for(var _,C,M,N,j,V,W=0;W<m.length;W+=3)if(j=m[W],V=m[W+1],x<j?(C=0,M=1,N="left"):x<V?M=(C=x-j)+1:(W==m.length-3||x==V&&m[W+3]>x)&&(C=(M=V-j)-1,x>=V&&(N="right")),C!=null){if(_=m[W+2],j==V&&S==(_.insertLeft?"left":"right")&&(N=S),S=="left"&&C==0)for(;W&&m[W-2]==m[W-3]&&m[W-1].insertLeft;)_=m[2+(W-=3)],N="left";if(S=="right"&&C==V-j)for(;W<m.length-3&&m[W+3]==m[W+4]&&!m[W+5].insertLeft;)_=m[(W+=3)+2],N="right";break}return{node:_,start:C,end:M,collapse:N,coverStart:j,coverEnd:V}}function mS(m,x){var S=$a;if(x=="left")for(var _=0;_<m.length&&(S=m[_]).left==S.right;_++);else for(var C=m.length-1;C>=0&&(S=m[C]).left==S.right;C--);return S}function Ab(m){if(m.measure&&(m.measure.cache={},m.measure.heights=null,m.rest))for(var x=0;x<m.rest.length;x++)m.measure.caches[x]={}}function Cb(m){m.display.externalMeasure=null,q(m.display.lineMeasure);for(var x=0;x<m.display.view.length;x++)Ab(m.display.view[x])}function Sh(m){Cb(m),m.display.cachedCharWidth=m.display.cachedTextHeight=m.display.cachedPaddingH=null,m.options.lineWrapping||(m.display.maxLineChanged=!0),m.display.lineNumChars=null}function kb(m){return g&&T?-(m.body.getBoundingClientRect().left-parseInt(getComputedStyle(m.body).marginLeft)):m.defaultView.pageXOffset||(m.documentElement||m.body).scrollLeft}function Tb(m){return g&&T?-(m.body.getBoundingClientRect().top-parseInt(getComputedStyle(m.body).marginTop)):m.defaultView.pageYOffset||(m.documentElement||m.body).scrollTop}function W0(m){var x=Wi(m).widgets,S=0;if(x)for(var _=0;_<x.length;++_)x[_].above&&(S+=Sn(x[_]));return S}function _m(m,x,S,_,C){if(!C){var M=W0(x);S.top+=M,S.bottom+=M}if(_=="line")return S;_||(_="local");var N=me(x);if(_=="local"?N+=Ir(m.display):N-=m.display.viewOffset,_=="page"||_=="window"){var j=m.display.lineSpace.getBoundingClientRect();N+=j.top+(_=="window"?0:Tb(ze(m)));var V=j.left+(_=="window"?0:kb(ze(m)));S.left+=V,S.right+=V}return S.top+=N,S.bottom+=N,S}function Db(m,x,S){if(S=="div")return x;var _=x.left,C=x.top;if(S=="page")_-=kb(ze(m)),C-=Tb(ze(m));else if(S=="local"||!S){var M=m.display.sizer.getBoundingClientRect();_+=M.left,C+=M.top}var N=m.display.lineSpace.getBoundingClientRect();return{left:_-N.left,top:C-N.top}}function Em(m,x,S,_,C){return _||(_=et(m.doc,x.line)),_m(m,_,Wt(m,_,x.ch,C),S)}function dl(m,x,S,_,C,M){function N($e,Ne){var Me=Pn(m,C,$e,Ne?"right":"left",M);return Ne?Me.left=Me.right:Me.right=Me.left,_m(m,_,Me,S)}_=_||et(m.doc,x.line),C||(C=mr(m,_));var j=Ce(_,m.doc.direction),V=x.ch,W=x.sticky;if(V>=_.text.length?(V=_.text.length,W="before"):V<=0&&(V=0,W="after"),!j)return N(W=="before"?V-1:V,W=="before");function ce($e,Ne,Me){return N(Me?$e-1:$e,j[Ne].level==1!=Me)}var fe=ae(j,V,W),Se=se,ve=ce(V,fe,W=="before");return Se!=null&&(ve.other=ce(V,Se,W!="before")),ve}function Lb(m,x){var S=0;x=qt(m.doc,x),m.options.lineWrapping||(S=ad(m.display)*x.ch);var _=et(m.doc,x.line),C=me(_)+Ir(m.display);return{left:S,right:S,top:C,bottom:C+_.height}}function Y0(m,x,S,_,C){var M=Xe(m,x,S);return M.xRel=C,_&&(M.outside=_),M}function X0(m,x,S){var _=m.doc;if((S+=m.display.viewOffset)<0)return Y0(_.first,0,null,-1,-1);var C=Sr(_,S),M=_.first+_.size-1;if(C>M)return Y0(_.first+_.size-1,et(_,M).text.length,null,1,1);x<0&&(x=0);for(var N=et(_,C);;){var j=gS(m,N,C,x,S),V=Ma(N,j.ch+(j.xRel>0||j.outside>0?1:0));if(!V)return j;var W=V.find(1);if(W.line==C)return W;N=et(_,C=W.line)}}function Rb(m,x,S,_){_-=W0(x);var C=x.text.length,M=Q(function(N){return Pn(m,S,N-1).bottom<=_},C,0);return{begin:M,end:C=Q(function(N){return Pn(m,S,N).top>_},M,C)}}function Fb(m,x,S,_){return S||(S=mr(m,x)),Rb(m,x,S,_m(m,x,Pn(m,S,_),"line").top)}function Z0(m,x,S,_){return!(m.bottom<=S)&&(m.top>S||(_?m.left:m.right)>x)}function gS(m,x,S,_,C){C-=me(x);var M=mr(m,x),N=W0(x),j=0,V=x.text.length,W=!0,ce=Ce(x,m.doc.direction);if(ce){var fe=(m.options.lineWrapping?vS:yS)(m,x,S,M,ce,_,C);j=(W=fe.level!=1)?fe.from:fe.to-1,V=W?fe.to:fe.from-1}var Se,ve,$e=null,Ne=null,Me=Q(function(ct){var gt=Pn(m,M,ct);return gt.top+=N,gt.bottom+=N,!!Z0(gt,_,C,!1)&&(gt.top<=C&&gt.left<=_&&($e=ct,Ne=gt),!0)},j,V),Ve=!1;if(Ne){var nt=_-Ne.left<Ne.right-_,Je=nt==W;Me=$e+(Je?0:1),ve=Je?"after":"before",Se=nt?Ne.left:Ne.right}else{W||Me!=V&&Me!=j||Me++,ve=Me==0?"after":Me==x.text.length?"before":Pn(m,M,Me-(W?1:0)).bottom+N<=C==W?"after":"before";var mt=dl(m,Xe(S,Me,ve),"line",x,M);Se=mt.left,Ve=C<mt.top?-1:C>=mt.bottom?1:0}return Y0(S,Me=P(x.text,Me,1),ve,Ve,_-Se)}function yS(m,x,S,_,C,M,N){var j=Q(function(fe){var Se=C[fe],ve=Se.level!=1;return Z0(dl(m,Xe(S,ve?Se.to:Se.from,ve?"before":"after"),"line",x,_),M,N,!0)},0,C.length-1),V=C[j];if(j>0){var W=V.level!=1,ce=dl(m,Xe(S,W?V.from:V.to,W?"after":"before"),"line",x,_);Z0(ce,M,N,!0)&&ce.top>N&&(V=C[j-1])}return V}function vS(m,x,S,_,C,M,N){var j=Rb(m,x,_,N),V=j.begin,W=j.end;/\s/.test(x.text.charAt(W-1))&&W--;for(var ce=null,fe=null,Se=0;Se<C.length;Se++){var ve=C[Se];if(!(ve.from>=W||ve.to<=V)){var $e=Pn(m,_,ve.level!=1?Math.min(W,ve.to)-1:Math.max(V,ve.from)).right,Ne=$e<M?M-$e+1e9:$e-M;(!ce||fe>Ne)&&(ce=ve,fe=Ne)}}return ce||(ce=C[C.length-1]),ce.from<V&&(ce={from:V,to:ce.to,level:ce.level}),ce.to>W&&(ce={from:ce.from,to:W,level:ce.level}),ce}function od(m){if(m.cachedTextHeight!=null)return m.cachedTextHeight;if(ji==null){ji=X("pre",null,"CodeMirror-line-like");for(var x=0;x<49;++x)ji.appendChild(document.createTextNode("x")),ji.appendChild(X("br"));ji.appendChild(document.createTextNode("x"))}Y(m.measure,ji);var S=ji.offsetHeight/50;return S>3&&(m.cachedTextHeight=S),q(m.measure),S||1}function ad(m){if(m.cachedCharWidth!=null)return m.cachedCharWidth;var x=X("span","xxxxxxxxxx"),S=X("pre",[x],"CodeMirror-line-like");Y(m.measure,S);var _=x.getBoundingClientRect(),C=(_.right-_.left)/10;return C>2&&(m.cachedCharWidth=C),C||10}function K0(m){for(var x=m.display,S={},_={},C=x.gutters.clientLeft,M=x.gutters.firstChild,N=0;M;M=M.nextSibling,++N){var j=m.display.gutterSpecs[N].className;S[j]=M.offsetLeft+M.clientLeft+C,_[j]=M.clientWidth}return{fixedPos:J0(x),gutterTotalWidth:x.gutters.offsetWidth,gutterLeft:S,gutterWidth:_,wrapperWidth:x.wrapper.clientWidth}}function J0(m){return m.scroller.getBoundingClientRect().left-m.sizer.getBoundingClientRect().left}function Ob(m){var x=od(m.display),S=m.options.lineWrapping,_=S&&Math.max(5,m.display.scroller.clientWidth/ad(m.display)-3);return function(C){if(Ht(m.doc,C))return 0;var M=0;if(C.widgets)for(var N=0;N<C.widgets.length;N++)C.widgets[N].height&&(M+=C.widgets[N].height);return S?M+(Math.ceil(C.text.length/_)||1)*x:M+x}}function Q0(m){var x=m.doc,S=Ob(m);x.iter(function(_){var C=S(_);C!=_.height&&zt(_,C)})}function Wc(m,x,S,_){var C=m.display;if(!S&&Er(x).getAttribute("cm-not-content")=="true")return null;var M,N,j=C.lineSpace.getBoundingClientRect();try{M=x.clientX-j.left,N=x.clientY-j.top}catch{return null}var V,W=X0(m,M,N);if(_&&W.xRel>0&&(V=et(m.doc,W.line).text).length==W.ch){var ce=Ie(V,V.length,m.options.tabSize)-V.length;W=Xe(W.line,Math.max(0,Math.round((M-ws(m.display).left)/ad(m.display))-ce))}return W}function Yc(m,x){if(x>=m.display.viewTo||(x-=m.display.viewFrom)<0)return null;for(var S=m.display.view,_=0;_<S.length;_++)if((x-=S[_].size)<0)return _}function _o(m,x,S,_){x==null&&(x=m.doc.first),S==null&&(S=m.doc.first+m.doc.size),_||(_=0);var C=m.display;if(_&&S<C.viewTo&&(C.updateLineNumbers==null||C.updateLineNumbers>x)&&(C.updateLineNumbers=x),m.curOp.viewChanged=!0,x>=C.viewTo)Qi&&oo(m.doc,x)<C.viewTo&&Yu(m);else if(S<=C.viewFrom)Qi&&ul(m.doc,S+_)>C.viewFrom?Yu(m):(C.viewFrom+=_,C.viewTo+=_);else if(x<=C.viewFrom&&S>=C.viewTo)Yu(m);else if(x<=C.viewFrom){var M=Sm(m,S,S+_,1);M?(C.view=C.view.slice(M.index),C.viewFrom=M.lineN,C.viewTo+=_):Yu(m)}else if(S>=C.viewTo){var N=Sm(m,x,x,-1);N?(C.view=C.view.slice(0,N.index),C.viewTo=N.lineN):Yu(m)}else{var j=Sm(m,x,x,-1),V=Sm(m,S,S+_,1);j&&V?(C.view=C.view.slice(0,j.index).concat(Bi(m,j.lineN,V.lineN)).concat(C.view.slice(V.index)),C.viewTo+=_):Yu(m)}var W=C.externalMeasured;W&&(S<W.lineN?W.lineN+=_:x<W.lineN+W.size&&(C.externalMeasured=null))}function Wu(m,x,S){m.curOp.viewChanged=!0;var _=m.display,C=m.display.externalMeasured;if(C&&x>=C.lineN&&x<C.lineN+C.size&&(_.externalMeasured=null),!(x<_.viewFrom||x>=_.viewTo)){var M=_.view[Yc(m,x)];if(M.node!=null){var N=M.changes||(M.changes=[]);Pe(N,S)==-1&&N.push(S)}}}function Yu(m){m.display.viewFrom=m.display.viewTo=m.doc.first,m.display.view=[],m.display.viewOffset=0}function Sm(m,x,S,_){var C,M=Yc(m,x),N=m.display.view;if(!Qi||S==m.doc.first+m.doc.size)return{index:M,lineN:S};for(var j=m.display.viewFrom,V=0;V<M;V++)j+=N[V].size;if(j!=x){if(_>0){if(M==N.length-1)return null;C=j+N[M].size-x,M++}else C=j-x;x+=C,S+=C}for(;oo(m.doc,S)!=S;){if(M==(_<0?0:N.length-1))return null;S+=_*N[M-(_<0?1:0)].size,M+=_}return{index:M,lineN:S}}function Mb(m){for(var x=m.display.view,S=0,_=0;_<x.length;_++){var C=x[_];C.hidden||C.node&&!C.changes||++S}return S}function Ah(m){m.display.input.showSelection(m.display.input.prepareSelection())}function $b(m,x){x===void 0&&(x=!0);var S=m.doc,_={},C=_.cursors=document.createDocumentFragment(),M=_.selection=document.createDocumentFragment(),N=m.options.$customCursor;N&&(x=!0);for(var j=0;j<S.sel.ranges.length;j++)if(x||j!=S.sel.primIndex){var V=S.sel.ranges[j];if(!(V.from().line>=m.display.viewTo||V.to().line<m.display.viewFrom)){var W=V.empty();if(N){var ce=N(m,V);ce&&ey(m,ce,C)}else(W||m.options.showCursorWhenSelecting)&&ey(m,V.head,C);W||bS(m,V,M)}}return _}function ey(m,x,S){var _=dl(m,x,"div",null,null,!m.options.singleCursorHeightPerLine),C=S.appendChild(X("div","","CodeMirror-cursor"));if(C.style.left=_.left+"px",C.style.top=_.top+"px",C.style.height=Math.max(0,_.bottom-_.top)*m.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(m.getWrapperElement().className)){var M=Em(m,x,"div",null,null),N=M.right-M.left;C.style.width=(N>0?N:m.defaultCharWidth())+"px"}if(_.other){var j=S.appendChild(X("div","","CodeMirror-cursor CodeMirror-secondarycursor"));j.style.display="",j.style.left=_.other.left+"px",j.style.top=_.other.top+"px",j.style.height=.85*(_.other.bottom-_.other.top)+"px"}}function Am(m,x){return m.top-x.top||m.left-x.left}function bS(m,x,S){var _=m.display,C=m.doc,M=document.createDocumentFragment(),N=ws(m.display),j=N.left,V=Math.max(_.sizerWidth,Li(m)-_.sizer.offsetLeft)-N.right,W=C.direction=="ltr";function ce(Je,mt,ct,gt){mt<0&&(mt=0),mt=Math.round(mt),gt=Math.round(gt),M.appendChild(X("div",null,"CodeMirror-selected","position: absolute; left: "+Je+`px;
                             top: `+mt+"px; width: "+(ct??V-Je)+`px;
                             height: `+(gt-mt)+"px"))}function fe(Je,mt,ct){var gt,vn,Mt=et(C,Je),Hn=Mt.text.length;function fn(lr,Zn){return Em(m,Xe(Je,lr),"div",Mt,Zn)}function ar(lr,Zn,ur){var $n=Fb(m,Mt,null,lr),Br=Zn=="ltr"==(ur=="after")?"left":"right";return fn(ur=="after"?$n.begin:$n.end-(/\s/.test(Mt.text.charAt($n.end-1))?2:1),Br)[Br]}var Nr=Ce(Mt,C.direction);return function(lr,Zn,ur,$n){if(!lr)return $n(Zn,ur,"ltr",0);for(var Br=!1,Fn=0;Fn<lr.length;++Fn){var Jn=lr[Fn];(Jn.from<ur&&Jn.to>Zn||Zn==ur&&Jn.to==Zn)&&($n(Math.max(Jn.from,Zn),Math.min(Jn.to,ur),Jn.level==1?"rtl":"ltr",Fn),Br=!0)}Br||$n(Zn,ur,"ltr")}(Nr,mt||0,ct??Hn,function(lr,Zn,ur,$n){var Br=ur=="ltr",Fn=fn(lr,Br?"left":"right"),Jn=fn(Zn-1,Br?"right":"left"),Nn=mt==null&&lr==0,vr=ct==null&&Zn==Hn,lo=$n==0,zr=!Nr||$n==Nr.length-1;if(Jn.top-Fn.top<=3){var Ws=(W?vr:Nn)&&zr,Ys=(W?Nn:vr)&&lo?j:(Br?Fn:Jn).left,Ci=Ws?V:(Br?Jn:Fn).right;ce(Ys,Fn.top,Ci-Ys,Fn.bottom)}else{var uo,Ia,Ms,ml;Br?(uo=W&&Nn&&lo?j:Fn.left,Ia=W?V:ar(lr,ur,"before"),Ms=W?j:ar(Zn,ur,"after"),ml=W&&vr&&zr?V:Jn.right):(uo=W?ar(lr,ur,"before"):j,Ia=!W&&Nn&&lo?V:Fn.right,Ms=!W&&vr&&zr?j:Jn.left,ml=W?ar(Zn,ur,"after"):V),ce(uo,Fn.top,Ia-uo,Fn.bottom),Fn.bottom<Jn.top&&ce(j,Fn.bottom,null,Jn.top),ce(Ms,Jn.top,ml-Ms,Jn.bottom)}(!gt||Am(Fn,gt)<0)&&(gt=Fn),Am(Jn,gt)<0&&(gt=Jn),(!vn||Am(Fn,vn)<0)&&(vn=Fn),Am(Jn,vn)<0&&(vn=Jn)}),{start:gt,end:vn}}var Se=x.from(),ve=x.to();if(Se.line==ve.line)fe(Se.line,Se.ch,ve.ch);else{var $e=et(C,Se.line),Ne=et(C,ve.line),Me=Wi($e)==Wi(Ne),Ve=fe(Se.line,Se.ch,Me?$e.text.length+1:null).end,nt=fe(ve.line,Me?0:null,ve.ch).start;Me&&(Ve.top<nt.top-2?(ce(Ve.right,Ve.top,null,Ve.bottom),ce(j,nt.top,nt.left,nt.bottom)):ce(Ve.right,Ve.top,nt.left-Ve.right,Ve.bottom)),Ve.bottom<nt.top&&ce(j,Ve.bottom,null,nt.top)}S.appendChild(M)}function ty(m){if(m.state.focused){var x=m.display;clearInterval(x.blinker);var S=!0;x.cursorDiv.style.visibility="",m.options.cursorBlinkRate>0?x.blinker=setInterval(function(){m.hasFocus()||ld(m),x.cursorDiv.style.visibility=(S=!S)?"":"hidden"},m.options.cursorBlinkRate):m.options.cursorBlinkRate<0&&(x.cursorDiv.style.visibility="hidden")}}function Ib(m){m.hasFocus()||(m.display.input.focus(),m.state.focused||ry(m))}function ny(m){m.state.delayingBlurEvent=!0,setTimeout(function(){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1,m.state.focused&&ld(m))},100)}function ry(m,x){m.state.delayingBlurEvent&&!m.state.draggingText&&(m.state.delayingBlurEvent=!1),m.options.readOnly!="nocursor"&&(m.state.focused||(tt(m,"focus",m,x),m.state.focused=!0,z(m.display.wrapper,"CodeMirror-focused"),m.curOp||m.display.selForContextMenu==m.doc.sel||(m.display.input.reset(),h&&setTimeout(function(){return m.display.input.reset(!0)},20)),m.display.input.receivedFocus()),ty(m))}function ld(m,x){m.state.delayingBlurEvent||(m.state.focused&&(tt(m,"blur",m,x),m.state.focused=!1,U(m.display.wrapper,"CodeMirror-focused")),clearInterval(m.display.blinker),setTimeout(function(){m.state.focused||(m.display.shift=!1)},150))}function Cm(m){for(var x=m.display,S=x.lineDiv.offsetTop,_=Math.max(0,x.scroller.getBoundingClientRect().top),C=x.lineDiv.getBoundingClientRect().top,M=0,N=0;N<x.view.length;N++){var j=x.view[N],V=m.options.lineWrapping,W=void 0,ce=0;if(!j.hidden){if(C+=j.line.height,c&&d<8){var fe=j.node.offsetTop+j.node.offsetHeight;W=fe-S,S=fe}else{var Se=j.node.getBoundingClientRect();W=Se.bottom-Se.top,!V&&j.text.firstChild&&(ce=j.text.firstChild.getBoundingClientRect().right-Se.left-1)}var ve=j.line.height-W;if((ve>.005||ve<-.005)&&(C<_&&(M-=ve),zt(j.line,W),Pb(j.line),j.rest))for(var $e=0;$e<j.rest.length;$e++)Pb(j.rest[$e]);if(ce>m.display.sizerWidth){var Ne=Math.ceil(ce/ad(m.display));Ne>m.display.maxLineLength&&(m.display.maxLineLength=Ne,m.display.maxLine=j.line,m.display.maxLineChanged=!0)}}}Math.abs(M)>2&&(x.scroller.scrollTop+=M)}function Pb(m){if(m.widgets)for(var x=0;x<m.widgets.length;++x){var S=m.widgets[x],_=S.node.parentNode;_&&(S.height=_.offsetHeight)}}function km(m,x,S){var _=S&&S.top!=null?Math.max(0,S.top):m.scroller.scrollTop;_=Math.floor(_-Ir(m));var C=S&&S.bottom!=null?S.bottom:_+m.wrapper.clientHeight,M=Sr(x,_),N=Sr(x,C);if(S&&S.ensure){var j=S.ensure.from.line,V=S.ensure.to.line;j<M?(M=j,N=Sr(x,me(et(x,j))+m.wrapper.clientHeight)):Math.min(V,x.lastLine())>=N&&(M=Sr(x,me(et(x,V))-m.wrapper.clientHeight),N=V)}return{from:M,to:Math.max(N,M+1)}}function iy(m,x){var S=m.display,_=od(m.display);x.top<0&&(x.top=0);var C=m.curOp&&m.curOp.scrollTop!=null?m.curOp.scrollTop:S.scroller.scrollTop,M=Te(m),N={};x.bottom-x.top>M&&(x.bottom=x.top+M);var j=m.doc.height+es(S),V=x.top<_,W=x.bottom>j-_;if(x.top<C)N.scrollTop=V?0:x.top;else if(x.bottom>C+M){var ce=Math.min(x.top,(W?j:x.bottom)-M);ce!=C&&(N.scrollTop=ce)}var fe=m.options.fixedGutter?0:S.gutters.offsetWidth,Se=m.curOp&&m.curOp.scrollLeft!=null?m.curOp.scrollLeft:S.scroller.scrollLeft-fe,ve=Li(m)-S.gutters.offsetWidth,$e=x.right-x.left>ve;return $e&&(x.right=x.left+ve),x.left<10?N.scrollLeft=0:x.left<Se?N.scrollLeft=Math.max(0,x.left+fe-($e?0:10)):x.right>ve+Se-3&&(N.scrollLeft=x.right+($e?0:10)-ve),N}function sy(m,x){x!=null&&(Tm(m),m.curOp.scrollTop=(m.curOp.scrollTop==null?m.doc.scrollTop:m.curOp.scrollTop)+x)}function ud(m){Tm(m);var x=m.getCursor();m.curOp.scrollToPos={from:x,to:x,margin:m.options.cursorScrollMargin}}function Ch(m,x,S){x==null&&S==null||Tm(m),x!=null&&(m.curOp.scrollLeft=x),S!=null&&(m.curOp.scrollTop=S)}function Tm(m){var x=m.curOp.scrollToPos;x&&(m.curOp.scrollToPos=null,Nb(m,Lb(m,x.from),Lb(m,x.to),x.margin))}function Nb(m,x,S,_){var C=iy(m,{left:Math.min(x.left,S.left),top:Math.min(x.top,S.top)-_,right:Math.max(x.right,S.right),bottom:Math.max(x.bottom,S.bottom)+_});Ch(m,C.scrollLeft,C.scrollTop)}function kh(m,x){Math.abs(m.doc.scrollTop-x)<2||(a||ay(m,{top:x}),Bb(m,x,!0),a&&ay(m),Lh(m,100))}function Bb(m,x,S){x=Math.max(0,Math.min(m.display.scroller.scrollHeight-m.display.scroller.clientHeight,x)),(m.display.scroller.scrollTop!=x||S)&&(m.doc.scrollTop=x,m.display.scrollbars.setScrollTop(x),m.display.scroller.scrollTop!=x&&(m.display.scroller.scrollTop=x))}function Xc(m,x,S,_){x=Math.max(0,Math.min(x,m.display.scroller.scrollWidth-m.display.scroller.clientWidth)),(S?x==m.doc.scrollLeft:Math.abs(m.doc.scrollLeft-x)<2)&&!_||(m.doc.scrollLeft=x,Hb(m),m.display.scroller.scrollLeft!=x&&(m.display.scroller.scrollLeft=x),m.display.scrollbars.setScrollLeft(x))}function Th(m){var x=m.display,S=x.gutters.offsetWidth,_=Math.round(m.doc.height+es(m.display));return{clientHeight:x.scroller.clientHeight,viewHeight:x.wrapper.clientHeight,scrollWidth:x.scroller.scrollWidth,clientWidth:x.scroller.clientWidth,viewWidth:x.wrapper.clientWidth,barLeft:m.options.fixedGutter?S:0,docHeight:_,scrollHeight:_+xi(m)+x.barHeight,nativeBarWidth:x.nativeBarWidth,gutterWidth:S}}var Zc=function(m,x,S){this.cm=S;var _=this.vert=X("div",[X("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),C=this.horiz=X("div",[X("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");_.tabIndex=C.tabIndex=-1,m(_),m(C),De(_,"scroll",function(){_.clientHeight&&x(_.scrollTop,"vertical")}),De(C,"scroll",function(){C.clientWidth&&x(C.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Zc.prototype.update=function(m){var x=m.scrollWidth>m.clientWidth+1,S=m.scrollHeight>m.clientHeight+1,_=m.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=x?_+"px":"0";var C=m.viewHeight-(x?_:0);this.vert.firstChild.style.height=Math.max(0,m.scrollHeight-m.clientHeight+C)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(x){this.horiz.style.display="block",this.horiz.style.right=S?_+"px":"0",this.horiz.style.left=m.barLeft+"px";var M=m.viewWidth-m.barLeft-(S?_:0);this.horiz.firstChild.style.width=Math.max(0,m.scrollWidth-m.clientWidth+M)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&m.clientHeight>0&&(_==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?_:0,bottom:x?_:0}},Zc.prototype.setScrollLeft=function(m){this.horiz.scrollLeft!=m&&(this.horiz.scrollLeft=m),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Zc.prototype.setScrollTop=function(m){this.vert.scrollTop!=m&&(this.vert.scrollTop=m),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Zc.prototype.zeroWidthHack=function(){var m=k&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=m,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new qe,this.disableVert=new qe},Zc.prototype.enableZeroWidthBar=function(m,x,S){m.style.visibility="",x.set(1e3,function _(){var C=m.getBoundingClientRect();(S=="vert"?document.elementFromPoint(C.right-1,(C.top+C.bottom)/2):document.elementFromPoint((C.right+C.left)/2,C.bottom-1))!=m?m.style.visibility="hidden":x.set(1e3,_)})},Zc.prototype.clear=function(){var m=this.horiz.parentNode;m.removeChild(this.horiz),m.removeChild(this.vert)};var Dh=function(){};function cd(m,x){x||(x=Th(m));var S=m.display.barWidth,_=m.display.barHeight;zb(m,x);for(var C=0;C<4&&S!=m.display.barWidth||_!=m.display.barHeight;C++)S!=m.display.barWidth&&m.options.lineWrapping&&Cm(m),zb(m,Th(m)),S=m.display.barWidth,_=m.display.barHeight}function zb(m,x){var S=m.display,_=S.scrollbars.update(x);S.sizer.style.paddingRight=(S.barWidth=_.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=_.bottom)+"px",S.heightForcer.style.borderBottom=_.bottom+"px solid transparent",_.right&&_.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=_.bottom+"px",S.scrollbarFiller.style.width=_.right+"px"):S.scrollbarFiller.style.display="",_.bottom&&m.options.coverGutterNextToScrollbar&&m.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=_.bottom+"px",S.gutterFiller.style.width=x.gutterWidth+"px"):S.gutterFiller.style.display=""}Dh.prototype.update=function(){return{bottom:0,right:0}},Dh.prototype.setScrollLeft=function(){},Dh.prototype.setScrollTop=function(){},Dh.prototype.clear=function(){};var jb={native:Zc,null:Dh};function Ub(m){m.display.scrollbars&&(m.display.scrollbars.clear(),m.display.scrollbars.addClass&&U(m.display.wrapper,m.display.scrollbars.addClass)),m.display.scrollbars=new jb[m.options.scrollbarStyle](function(x){m.display.wrapper.insertBefore(x,m.display.scrollbarFiller),De(x,"mousedown",function(){m.state.focused&&setTimeout(function(){return m.display.input.focus()},0)}),x.setAttribute("cm-not-content","true")},function(x,S){S=="horizontal"?Xc(m,x):kh(m,x)},m),m.display.scrollbars.addClass&&z(m.display.wrapper,m.display.scrollbars.addClass)}var xS=0;function Kc(m){var x;m.curOp={cm:m,viewChanged:!1,startHeight:m.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++xS,markArrays:null},x=m.curOp,zi?zi.ops.push(x):x.ownsGroup=zi={ops:[x],delayedCallbacks:[]}}function Jc(m){var x=m.curOp;x&&function(S,_){var C=S.ownsGroup;if(C)try{(function(M){var N=M.delayedCallbacks,j=0;do{for(;j<N.length;j++)N[j].call(null);for(var V=0;V<M.ops.length;V++){var W=M.ops[V];if(W.cursorActivityHandlers)for(;W.cursorActivityCalled<W.cursorActivityHandlers.length;)W.cursorActivityHandlers[W.cursorActivityCalled++].call(null,W.cm)}}while(j<N.length)})(C)}finally{zi=null,_(C)}}(x,function(S){for(var _=0;_<S.ops.length;_++)S.ops[_].cm.curOp=null;(function(C){for(var M=C.ops,N=0;N<M.length;N++)wS(M[N]);for(var j=0;j<M.length;j++)_S(M[j]);for(var V=0;V<M.length;V++)ES(M[V]);for(var W=0;W<M.length;W++)SS(M[W]);for(var ce=0;ce<M.length;ce++)AS(M[ce])})(S)})}function wS(m){var x=m.cm,S=x.display;(function(_){var C=_.display;!C.scrollbarsClipped&&C.scroller.offsetWidth&&(C.nativeBarWidth=C.scroller.offsetWidth-C.scroller.clientWidth,C.heightForcer.style.height=xi(_)+"px",C.sizer.style.marginBottom=-C.nativeBarWidth+"px",C.sizer.style.borderRightWidth=xi(_)+"px",C.scrollbarsClipped=!0)})(x),m.updateMaxLine&&yt(x),m.mustUpdate=m.viewChanged||m.forceUpdate||m.scrollTop!=null||m.scrollToPos&&(m.scrollToPos.from.line<S.viewFrom||m.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&x.options.lineWrapping,m.update=m.mustUpdate&&new Dm(x,m.mustUpdate&&{top:m.scrollTop,ensure:m.scrollToPos},m.forceUpdate)}function _S(m){m.updatedDisplay=m.mustUpdate&&oy(m.cm,m.update)}function ES(m){var x=m.cm,S=x.display;m.updatedDisplay&&Cm(x),m.barMeasure=Th(x),S.maxLineChanged&&!x.options.lineWrapping&&(m.adjustWidthTo=Wt(x,S.maxLine,S.maxLine.text.length).left+3,x.display.sizerWidth=m.adjustWidthTo,m.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+m.adjustWidthTo+xi(x)+x.display.barWidth),m.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+m.adjustWidthTo-Li(x))),(m.updatedDisplay||m.selectionChanged)&&(m.preparedSelection=S.input.prepareSelection())}function SS(m){var x=m.cm;m.adjustWidthTo!=null&&(x.display.sizer.style.minWidth=m.adjustWidthTo+"px",m.maxScrollLeft<x.doc.scrollLeft&&Xc(x,Math.min(x.display.scroller.scrollLeft,m.maxScrollLeft),!0),x.display.maxLineChanged=!1);var S=m.focus&&m.focus==ee(ze(x));m.preparedSelection&&x.display.input.showSelection(m.preparedSelection,S),(m.updatedDisplay||m.startHeight!=x.doc.height)&&cd(x,m.barMeasure),m.updatedDisplay&&uy(x,m.barMeasure),m.selectionChanged&&ty(x),x.state.focused&&m.updateInput&&x.display.input.reset(m.typing),S&&Ib(m.cm)}function AS(m){var x=m.cm,S=x.display,_=x.doc;if(m.updatedDisplay&&qb(x,m.update),S.wheelStartX==null||m.scrollTop==null&&m.scrollLeft==null&&!m.scrollToPos||(S.wheelStartX=S.wheelStartY=null),m.scrollTop!=null&&Bb(x,m.scrollTop,m.forceScroll),m.scrollLeft!=null&&Xc(x,m.scrollLeft,!0,!0),m.scrollToPos){var C=function(W,ce,fe,Se){var ve;Se==null&&(Se=0),W.options.lineWrapping||ce!=fe||(fe=ce.sticky=="before"?Xe(ce.line,ce.ch+1,"before"):ce,ce=ce.ch?Xe(ce.line,ce.sticky=="before"?ce.ch-1:ce.ch,"after"):ce);for(var $e=0;$e<5;$e++){var Ne=!1,Me=dl(W,ce),Ve=fe&&fe!=ce?dl(W,fe):Me,nt=iy(W,ve={left:Math.min(Me.left,Ve.left),top:Math.min(Me.top,Ve.top)-Se,right:Math.max(Me.left,Ve.left),bottom:Math.max(Me.bottom,Ve.bottom)+Se}),Je=W.doc.scrollTop,mt=W.doc.scrollLeft;if(nt.scrollTop!=null&&(kh(W,nt.scrollTop),Math.abs(W.doc.scrollTop-Je)>1&&(Ne=!0)),nt.scrollLeft!=null&&(Xc(W,nt.scrollLeft),Math.abs(W.doc.scrollLeft-mt)>1&&(Ne=!0)),!Ne)break}return ve}(x,qt(_,m.scrollToPos.from),qt(_,m.scrollToPos.to),m.scrollToPos.margin);(function(W,ce){if(!dt(W,"scrollCursorIntoView")){var fe=W.display,Se=fe.sizer.getBoundingClientRect(),ve=null,$e=fe.wrapper.ownerDocument;if(ce.top+Se.top<0?ve=!0:ce.bottom+Se.top>($e.defaultView.innerHeight||$e.documentElement.clientHeight)&&(ve=!1),ve!=null&&!E){var Ne=X("div","",null,`position: absolute;
                         top: `+(ce.top-fe.viewOffset-Ir(W.display))+`px;
                         height: `+(ce.bottom-ce.top+xi(W)+fe.barHeight)+`px;
                         left: `+ce.left+"px; width: "+Math.max(2,ce.right-ce.left)+"px;");W.display.lineSpace.appendChild(Ne),Ne.scrollIntoView(ve),W.display.lineSpace.removeChild(Ne)}}})(x,C)}var M=m.maybeHiddenMarkers,N=m.maybeUnhiddenMarkers;if(M)for(var j=0;j<M.length;++j)M[j].lines.length||tt(M[j],"hide");if(N)for(var V=0;V<N.length;++V)N[V].lines.length&&tt(N[V],"unhide");S.wrapper.offsetHeight&&(_.scrollTop=x.display.scroller.scrollTop),m.changeObjs&&tt(x,"changes",x,m.changeObjs),m.update&&m.update.finish()}function Uo(m,x){if(m.curOp)return x();Kc(m);try{return x()}finally{Jc(m)}}function _s(m,x){return function(){if(m.curOp)return x.apply(m,arguments);Kc(m);try{return x.apply(m,arguments)}finally{Jc(m)}}}function ao(m){return function(){if(this.curOp)return m.apply(this,arguments);Kc(this);try{return m.apply(this,arguments)}finally{Jc(this)}}}function Es(m){return function(){var x=this.cm;if(!x||x.curOp)return m.apply(this,arguments);Kc(x);try{return m.apply(this,arguments)}finally{Jc(x)}}}function Lh(m,x){m.doc.highlightFrontier<m.display.viewTo&&m.state.highlight.set(x,je(CS,m))}function CS(m){var x=m.doc;if(!(x.highlightFrontier>=m.display.viewTo)){var S=+new Date+m.options.workTime,_=no(m,x.highlightFrontier),C=[];x.iter(_.line,Math.min(x.first+x.size,m.display.viewTo+500),function(M){if(_.line>=m.display.viewFrom){var N=M.styles,j=M.text.length>m.options.maxHighlightLength?Et(x.mode,_.state):null,V=js(m,M,_,!0);j&&(_.state=j),M.styles=V.styles;var W=M.styleClasses,ce=V.classes;ce?M.styleClasses=ce:W&&(M.styleClasses=null);for(var fe=!N||N.length!=M.styles.length||W!=ce&&(!W||!ce||W.bgClass!=ce.bgClass||W.textClass!=ce.textClass),Se=0;!fe&&Se<N.length;++Se)fe=N[Se]!=M.styles[Se];fe&&C.push(_.line),M.stateAfter=_.save(),_.nextLine()}else M.text.length<=m.options.maxHighlightLength&&Bo(m,M.text,_),M.stateAfter=_.line%5==0?_.save():null,_.nextLine();if(+new Date>S)return Lh(m,m.options.workDelay),!0}),x.highlightFrontier=_.line,x.modeFrontier=Math.max(x.modeFrontier,_.line),C.length&&Uo(m,function(){for(var M=0;M<C.length;M++)Wu(m,C[M],"text")})}}var Dm=function(m,x,S){var _=m.display;this.viewport=x,this.visible=km(_,m.doc,x),this.editorIsHidden=!_.wrapper.offsetWidth,this.wrapperHeight=_.wrapper.clientHeight,this.wrapperWidth=_.wrapper.clientWidth,this.oldDisplayWidth=Li(m),this.force=S,this.dims=K0(m),this.events=[]};function kS(m){if(m.hasFocus())return null;var x=ee(ze(m));if(!x||!le(m.display.lineDiv,x))return null;var S={activeElt:x};if(window.getSelection){var _=He(m).getSelection();_.anchorNode&&_.extend&&le(m.display.lineDiv,_.anchorNode)&&(S.anchorNode=_.anchorNode,S.anchorOffset=_.anchorOffset,S.focusNode=_.focusNode,S.focusOffset=_.focusOffset)}return S}function oy(m,x){var S=m.display,_=m.doc;if(x.editorIsHidden)return Yu(m),!1;if(!x.force&&x.visible.from>=S.viewFrom&&x.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&Mb(m)==0)return!1;Gb(m)&&(Yu(m),x.dims=K0(m));var C=_.first+_.size,M=Math.max(x.visible.from-m.options.viewportMargin,_.first),N=Math.min(C,x.visible.to+m.options.viewportMargin);S.viewFrom<M&&M-S.viewFrom<20&&(M=Math.max(_.first,S.viewFrom)),S.viewTo>N&&S.viewTo-N<20&&(N=Math.min(C,S.viewTo)),Qi&&(M=oo(m.doc,M),N=ul(m.doc,N));var j=M!=S.viewFrom||N!=S.viewTo||S.lastWrapHeight!=x.wrapperHeight||S.lastWrapWidth!=x.wrapperWidth;(function(ce,fe,Se){var ve=ce.display;ve.view.length==0||fe>=ve.viewTo||Se<=ve.viewFrom?(ve.view=Bi(ce,fe,Se),ve.viewFrom=fe):(ve.viewFrom>fe?ve.view=Bi(ce,fe,ve.viewFrom).concat(ve.view):ve.viewFrom<fe&&(ve.view=ve.view.slice(Yc(ce,fe))),ve.viewFrom=fe,ve.viewTo<Se?ve.view=ve.view.concat(Bi(ce,ve.viewTo,Se)):ve.viewTo>Se&&(ve.view=ve.view.slice(0,Yc(ce,Se)))),ve.viewTo=Se})(m,M,N),S.viewOffset=me(et(m.doc,S.viewFrom)),m.display.mover.style.top=S.viewOffset+"px";var V=Mb(m);if(!j&&V==0&&!x.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var W=kS(m);return V>4&&(S.lineDiv.style.display="none"),function(ce,fe,Se){var ve=ce.display,$e=ce.options.lineNumbers,Ne=ve.lineDiv,Me=Ne.firstChild;function Ve(Mt){var Hn=Mt.nextSibling;return h&&k&&ce.display.currentWheelTarget==Mt?Mt.style.display="none":Mt.parentNode.removeChild(Mt),Hn}for(var nt=ve.view,Je=ve.viewFrom,mt=0;mt<nt.length;mt++){var ct=nt[mt];if(!ct.hidden)if(ct.node&&ct.node.parentNode==Ne){for(;Me!=ct.node;)Me=Ve(Me);var gt=$e&&fe!=null&&fe<=Je&&ct.lineNumber;ct.changes&&(Pe(ct.changes,"gutter")>-1&&(gt=!1),Gu(ce,ct,Je,Se)),gt&&(q(ct.lineNumber),ct.lineNumber.appendChild(document.createTextNode(Zt(ce.options,Je)))),Me=ct.node.nextSibling}else{var vn=Ye(ce,ct,Je,Se);Ne.insertBefore(vn,Me)}Je+=ct.size}for(;Me;)Me=Ve(Me)}(m,S.updateLineNumbers,x.dims),V>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,function(ce){if(ce&&ce.activeElt&&ce.activeElt!=ee(ce.activeElt.ownerDocument)&&(ce.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(ce.activeElt.nodeName)&&ce.anchorNode&&le(document.body,ce.anchorNode)&&le(document.body,ce.focusNode))){var fe=ce.activeElt.ownerDocument,Se=fe.defaultView.getSelection(),ve=fe.createRange();ve.setEnd(ce.anchorNode,ce.anchorOffset),ve.collapse(!1),Se.removeAllRanges(),Se.addRange(ve),Se.extend(ce.focusNode,ce.focusOffset)}}(W),q(S.cursorDiv),q(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,j&&(S.lastWrapHeight=x.wrapperHeight,S.lastWrapWidth=x.wrapperWidth,Lh(m,400)),S.updateLineNumbers=null,!0}function qb(m,x){for(var S=x.viewport,_=!0;;_=!1){if(_&&m.options.lineWrapping&&x.oldDisplayWidth!=Li(m))_&&(x.visible=km(m.display,m.doc,S));else if(S&&S.top!=null&&(S={top:Math.min(m.doc.height+es(m.display)-Te(m),S.top)}),x.visible=km(m.display,m.doc,S),x.visible.from>=m.display.viewFrom&&x.visible.to<=m.display.viewTo)break;if(!oy(m,x))break;Cm(m);var C=Th(m);Ah(m),cd(m,C),uy(m,C),x.force=!1}x.signal(m,"update",m),m.display.viewFrom==m.display.reportedViewFrom&&m.display.viewTo==m.display.reportedViewTo||(x.signal(m,"viewportChange",m,m.display.viewFrom,m.display.viewTo),m.display.reportedViewFrom=m.display.viewFrom,m.display.reportedViewTo=m.display.viewTo)}function ay(m,x){var S=new Dm(m,x);if(oy(m,S)){Cm(m),qb(m,S);var _=Th(m);Ah(m),cd(m,_),uy(m,_),S.finish()}}function ly(m){var x=m.gutters.offsetWidth;m.sizer.style.marginLeft=x+"px",Hr(m,"gutterChanged",m)}function uy(m,x){m.display.sizer.style.minHeight=x.docHeight+"px",m.display.heightForcer.style.top=x.docHeight+"px",m.display.gutters.style.height=x.docHeight+m.display.barHeight+xi(m)+"px"}function Hb(m){var x=m.display,S=x.view;if(x.alignWidgets||x.gutters.firstChild&&m.options.fixedGutter){for(var _=J0(x)-x.scroller.scrollLeft+m.doc.scrollLeft,C=x.gutters.offsetWidth,M=_+"px",N=0;N<S.length;N++)if(!S[N].hidden){m.options.fixedGutter&&(S[N].gutter&&(S[N].gutter.style.left=M),S[N].gutterBackground&&(S[N].gutterBackground.style.left=M));var j=S[N].alignable;if(j)for(var V=0;V<j.length;V++)j[V].style.left=M}m.options.fixedGutter&&(x.gutters.style.left=_+C+"px")}}function Gb(m){if(!m.options.lineNumbers)return!1;var x=m.doc,S=Zt(m.options,x.first+x.size-1),_=m.display;if(S.length!=_.lineNumChars){var C=_.measure.appendChild(X("div",[X("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),M=C.firstChild.offsetWidth,N=C.offsetWidth-M;return _.lineGutter.style.width="",_.lineNumInnerWidth=Math.max(M,_.lineGutter.offsetWidth-N)+1,_.lineNumWidth=_.lineNumInnerWidth+N,_.lineNumChars=_.lineNumInnerWidth?S.length:-1,_.lineGutter.style.width=_.lineNumWidth+"px",ly(m.display),!0}return!1}function cy(m,x){for(var S=[],_=!1,C=0;C<m.length;C++){var M=m[C],N=null;if(typeof M!="string"&&(N=M.style,M=M.className),M=="CodeMirror-linenumbers"){if(!x)continue;_=!0}S.push({className:M,style:N})}return x&&!_&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function Vb(m){var x=m.gutters,S=m.gutterSpecs;q(x),m.lineGutter=null;for(var _=0;_<S.length;++_){var C=S[_],M=C.className,N=C.style,j=x.appendChild(X("div",null,"CodeMirror-gutter "+M));N&&(j.style.cssText=N),M=="CodeMirror-linenumbers"&&(m.lineGutter=j,j.style.width=(m.lineNumWidth||1)+"px")}x.style.display=S.length?"":"none",ly(m)}function Rh(m){Vb(m.display),_o(m),Hb(m)}function TS(m,x,S,_){var C=this;this.input=S,C.scrollbarFiller=X("div",null,"CodeMirror-scrollbar-filler"),C.scrollbarFiller.setAttribute("cm-not-content","true"),C.gutterFiller=X("div",null,"CodeMirror-gutter-filler"),C.gutterFiller.setAttribute("cm-not-content","true"),C.lineDiv=te("div",null,"CodeMirror-code"),C.selectionDiv=X("div",null,null,"position: relative; z-index: 1"),C.cursorDiv=X("div",null,"CodeMirror-cursors"),C.measure=X("div",null,"CodeMirror-measure"),C.lineMeasure=X("div",null,"CodeMirror-measure"),C.lineSpace=te("div",[C.measure,C.lineMeasure,C.selectionDiv,C.cursorDiv,C.lineDiv],null,"position: relative; outline: none");var M=te("div",[C.lineSpace],"CodeMirror-lines");C.mover=X("div",[M],null,"position: relative"),C.sizer=X("div",[C.mover],"CodeMirror-sizer"),C.sizerWidth=null,C.heightForcer=X("div",null,null,"position: absolute; height: 50px; width: 1px;"),C.gutters=X("div",null,"CodeMirror-gutters"),C.lineGutter=null,C.scroller=X("div",[C.sizer,C.heightForcer,C.gutters],"CodeMirror-scroll"),C.scroller.setAttribute("tabIndex","-1"),C.wrapper=X("div",[C.scrollbarFiller,C.gutterFiller,C.scroller],"CodeMirror"),g&&v>=105&&(C.wrapper.style.clipPath="inset(0px)"),C.wrapper.setAttribute("translate","no"),c&&d<8&&(C.gutters.style.zIndex=-1,C.scroller.style.paddingRight=0),h||a&&D||(C.scroller.draggable=!0),m&&(m.appendChild?m.appendChild(C.wrapper):m(C.wrapper)),C.viewFrom=C.viewTo=x.first,C.reportedViewFrom=C.reportedViewTo=x.first,C.view=[],C.renderedView=null,C.externalMeasured=null,C.viewOffset=0,C.lastWrapHeight=C.lastWrapWidth=0,C.updateLineNumbers=null,C.nativeBarWidth=C.barHeight=C.barWidth=0,C.scrollbarsClipped=!1,C.lineNumWidth=C.lineNumInnerWidth=C.lineNumChars=null,C.alignWidgets=!1,C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.maxLine=null,C.maxLineLength=0,C.maxLineChanged=!1,C.wheelDX=C.wheelDY=C.wheelStartX=C.wheelStartY=null,C.shift=!1,C.selForContextMenu=null,C.activeTouch=null,C.gutterSpecs=cy(_.gutters,_.lineNumbers),Vb(C),S.init(C)}Dm.prototype.signal=function(m,x){xt(m,x)&&this.events.push(arguments)},Dm.prototype.finish=function(){for(var m=0;m<this.events.length;m++)tt.apply(null,this.events[m])};var Lm=0,hu=null;function Wb(m){var x=m.wheelDeltaX,S=m.wheelDeltaY;return x==null&&m.detail&&m.axis==m.HORIZONTAL_AXIS&&(x=m.detail),S==null&&m.detail&&m.axis==m.VERTICAL_AXIS?S=m.detail:S==null&&(S=m.wheelDelta),{x,y:S}}function DS(m){var x=Wb(m);return x.x*=hu,x.y*=hu,x}function Yb(m,x){g&&v==102&&(m.display.chromeScrollHack==null?m.display.sizer.style.pointerEvents="none":clearTimeout(m.display.chromeScrollHack),m.display.chromeScrollHack=setTimeout(function(){m.display.chromeScrollHack=null,m.display.sizer.style.pointerEvents=""},100));var S=Wb(x),_=S.x,C=S.y,M=hu;x.deltaMode===0&&(_=x.deltaX,C=x.deltaY,M=1);var N=m.display,j=N.scroller,V=j.scrollWidth>j.clientWidth,W=j.scrollHeight>j.clientHeight;if(_&&V||C&&W){if(C&&k&&h){e:for(var ce=x.target,fe=N.view;ce!=j;ce=ce.parentNode)for(var Se=0;Se<fe.length;Se++)if(fe[Se].node==ce){m.display.currentWheelTarget=ce;break e}}if(_&&!a&&!y&&M!=null)return C&&W&&kh(m,Math.max(0,j.scrollTop+C*M)),Xc(m,Math.max(0,j.scrollLeft+_*M)),(!C||C&&W)&&rn(x),void(N.wheelStartX=null);if(C&&M!=null){var ve=C*M,$e=m.doc.scrollTop,Ne=$e+N.wrapper.clientHeight;ve<0?$e=Math.max(0,$e+ve-50):Ne=Math.min(m.doc.height,Ne+ve+50),ay(m,{top:$e,bottom:Ne})}Lm<20&&x.deltaMode!==0&&(N.wheelStartX==null?(N.wheelStartX=j.scrollLeft,N.wheelStartY=j.scrollTop,N.wheelDX=_,N.wheelDY=C,setTimeout(function(){if(N.wheelStartX!=null){var Me=j.scrollLeft-N.wheelStartX,Ve=j.scrollTop-N.wheelStartY,nt=Ve&&N.wheelDY&&Ve/N.wheelDY||Me&&N.wheelDX&&Me/N.wheelDX;N.wheelStartX=N.wheelStartY=null,nt&&(hu=(hu*Lm+nt)/(Lm+1),++Lm)}},200)):(N.wheelDX+=_,N.wheelDY+=C))}}c?hu=-.53:a?hu=15:g?hu=-.7:b&&(hu=-1/3);var ha=function(m,x){this.ranges=m,this.primIndex=x};ha.prototype.primary=function(){return this.ranges[this.primIndex]},ha.prototype.equals=function(m){if(m==this)return!0;if(m.primIndex!=this.primIndex||m.ranges.length!=this.ranges.length)return!1;for(var x=0;x<this.ranges.length;x++){var S=this.ranges[x],_=m.ranges[x];if(!Xn(S.anchor,_.anchor)||!Xn(S.head,_.head))return!1}return!0},ha.prototype.deepCopy=function(){for(var m=[],x=0;x<this.ranges.length;x++)m[x]=new Pr(ni(this.ranges[x].anchor),ni(this.ranges[x].head));return new ha(m,this.primIndex)},ha.prototype.somethingSelected=function(){for(var m=0;m<this.ranges.length;m++)if(!this.ranges[m].empty())return!0;return!1},ha.prototype.contains=function(m,x){x||(x=m);for(var S=0;S<this.ranges.length;S++){var _=this.ranges[S];if(pt(x,_.from())>=0&&pt(m,_.to())<=0)return S}return-1};var Pr=function(m,x){this.anchor=m,this.head=x};function hl(m,x,S){var _=m&&m.options.selectionsMayTouch,C=x[S];x.sort(function(Se,ve){return pt(Se.from(),ve.from())}),S=Pe(x,C);for(var M=1;M<x.length;M++){var N=x[M],j=x[M-1],V=pt(j.to(),N.from());if(_&&!N.empty()?V>0:V>=0){var W=Rr(j.from(),N.from()),ce=Ar(j.to(),N.to()),fe=j.empty()?N.from()==N.head:j.from()==j.head;M<=S&&--S,x.splice(--M,2,new Pr(fe?ce:W,fe?W:ce))}}return new ha(x,S)}function Xu(m,x){return new ha([new Pr(m,x||m)],0)}function Zu(m){return m.text?Xe(m.from.line+m.text.length-1,ie(m.text).length+(m.text.length==1?m.from.ch:0)):m.to}function Xb(m,x){if(pt(m,x.from)<0)return m;if(pt(m,x.to)<=0)return Zu(x);var S=m.line+x.text.length-(x.to.line-x.from.line)-1,_=m.ch;return m.line==x.to.line&&(_+=Zu(x).ch-x.to.ch),Xe(S,_)}function fy(m,x){for(var S=[],_=0;_<m.sel.ranges.length;_++){var C=m.sel.ranges[_];S.push(new Pr(Xb(C.anchor,x),Xb(C.head,x)))}return hl(m.cm,S,m.sel.primIndex)}function Zb(m,x,S){return m.line==x.line?Xe(S.line,m.ch-x.ch+S.ch):Xe(S.line+(m.line-x.line),m.ch)}function dy(m){m.doc.mode=Le(m.options,m.doc.modeOption),Fh(m)}function Fh(m){m.doc.iter(function(x){x.stateAfter&&(x.stateAfter=null),x.styles&&(x.styles=null)}),m.doc.modeFrontier=m.doc.highlightFrontier=m.doc.first,Lh(m,100),m.state.modeGen++,m.curOp&&_o(m)}function Kb(m,x){return x.from.ch==0&&x.to.ch==0&&ie(x.text)==""&&(!m.cm||m.cm.options.wholeLineUpdateBefore)}function hy(m,x,S,_){function C(nt){return S?S[nt]:null}function M(nt,Je,mt){(function(ct,gt,vn,Mt){ct.text=gt,ct.stateAfter&&(ct.stateAfter=null),ct.styles&&(ct.styles=null),ct.order!=null&&(ct.order=null),ll(ct),Gi(ct,vn);var Hn=Mt?Mt(ct):1;Hn!=ct.height&&zt(ct,Hn)})(nt,Je,mt,_),Hr(nt,"change",nt,x)}function N(nt,Je){for(var mt=[],ct=nt;ct<Je;++ct)mt.push(new pn(W[ct],C(ct),_));return mt}var j=x.from,V=x.to,W=x.text,ce=et(m,j.line),fe=et(m,V.line),Se=ie(W),ve=C(W.length-1),$e=V.line-j.line;if(x.full)m.insert(0,N(0,W.length)),m.remove(W.length,m.size-W.length);else if(Kb(m,x)){var Ne=N(0,W.length-1);M(fe,fe.text,ve),$e&&m.remove(j.line,$e),Ne.length&&m.insert(j.line,Ne)}else if(ce==fe)if(W.length==1)M(ce,ce.text.slice(0,j.ch)+Se+ce.text.slice(V.ch),ve);else{var Me=N(1,W.length-1);Me.push(new pn(Se+ce.text.slice(V.ch),ve,_)),M(ce,ce.text.slice(0,j.ch)+W[0],C(0)),m.insert(j.line+1,Me)}else if(W.length==1)M(ce,ce.text.slice(0,j.ch)+W[0]+fe.text.slice(V.ch),C(0)),m.remove(j.line+1,$e);else{M(ce,ce.text.slice(0,j.ch)+W[0],C(0)),M(fe,Se+fe.text.slice(V.ch),ve);var Ve=N(1,W.length-1);$e>1&&m.remove(j.line+1,$e-1),m.insert(j.line+1,Ve)}Hr(m,"change",m,x)}function Ku(m,x,S){(function _(C,M,N){if(C.linked)for(var j=0;j<C.linked.length;++j){var V=C.linked[j];if(V.doc!=M){var W=N&&V.sharedHist;S&&!W||(x(V.doc,W),_(V.doc,C,W))}}})(m,null,!0)}function Jb(m,x){if(x.cm)throw new Error("This document is already in use.");m.doc=x,x.cm=m,Q0(m),dy(m),Qb(m),m.options.direction=x.direction,m.options.lineWrapping||yt(m),m.options.mode=x.modeOption,_o(m)}function Qb(m){(m.doc.direction=="rtl"?z:U)(m.display.lineDiv,"CodeMirror-rtl")}function Rm(m){this.done=[],this.undone=[],this.undoDepth=m?m.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=m?m.maxGeneration:1}function py(m,x){var S={from:ni(x.from),to:Zu(x),text:hn(m,x.from,x.to)};return nx(m,S,x.from.line,x.to.line+1),Ku(m,function(_){return nx(_,S,x.from.line,x.to.line+1)},!0),S}function ex(m){for(;m.length&&ie(m).ranges;)m.pop()}function tx(m,x,S,_){var C=m.history;C.undone.length=0;var M,N,j=+new Date;if((C.lastOp==_||C.lastOrigin==x.origin&&x.origin&&(x.origin.charAt(0)=="+"&&C.lastModTime>j-(m.cm?m.cm.options.historyEventDelay:500)||x.origin.charAt(0)=="*"))&&(M=function(W,ce){return ce?(ex(W.done),ie(W.done)):W.done.length&&!ie(W.done).ranges?ie(W.done):W.done.length>1&&!W.done[W.done.length-2].ranges?(W.done.pop(),ie(W.done)):void 0}(C,C.lastOp==_)))N=ie(M.changes),pt(x.from,x.to)==0&&pt(x.from,N.to)==0?N.to=Zu(x):M.changes.push(py(m,x));else{var V=ie(C.done);for(V&&V.ranges||Fm(m.sel,C.done),M={changes:[py(m,x)],generation:C.generation},C.done.push(M);C.done.length>C.undoDepth;)C.done.shift(),C.done[0].ranges||C.done.shift()}C.done.push(S),C.generation=++C.maxGeneration,C.lastModTime=C.lastSelTime=j,C.lastOp=C.lastSelOp=_,C.lastOrigin=C.lastSelOrigin=x.origin,N||tt(m,"historyAdded")}function LS(m,x,S,_){var C=m.history,M=_&&_.origin;S==C.lastSelOp||M&&C.lastSelOrigin==M&&(C.lastModTime==C.lastSelTime&&C.lastOrigin==M||function(N,j,V,W){var ce=j.charAt(0);return ce=="*"||ce=="+"&&V.ranges.length==W.ranges.length&&V.somethingSelected()==W.somethingSelected()&&new Date-N.history.lastSelTime<=(N.cm?N.cm.options.historyEventDelay:500)}(m,M,ie(C.done),x))?C.done[C.done.length-1]=x:Fm(x,C.done),C.lastSelTime=+new Date,C.lastSelOrigin=M,C.lastSelOp=S,_&&_.clearRedo!==!1&&ex(C.undone)}function Fm(m,x){var S=ie(x);S&&S.ranges&&S.equals(m)||x.push(m)}function nx(m,x,S,_){var C=x["spans_"+m.id],M=0;m.iter(Math.max(m.first,S),Math.min(m.first+m.size,_),function(N){N.markedSpans&&((C||(C=x["spans_"+m.id]={}))[M]=N.markedSpans),++M})}function RS(m){if(!m)return null;for(var x,S=0;S<m.length;++S)m[S].marker.explicitlyCleared?x||(x=m.slice(0,S)):x&&x.push(m[S]);return x?x.length?x:null:m}function rx(m,x){var S=function(ce,fe){var Se=fe["spans_"+ce.id];if(!Se)return null;for(var ve=[],$e=0;$e<fe.text.length;++$e)ve.push(RS(Se[$e]));return ve}(m,x),_=fa(m,x);if(!S)return _;if(!_)return S;for(var C=0;C<S.length;++C){var M=S[C],N=_[C];if(M&&N)e:for(var j=0;j<N.length;++j){for(var V=N[j],W=0;W<M.length;++W)if(M[W].marker==V.marker)continue e;M.push(V)}else N&&(S[C]=N)}return S}function fd(m,x,S){for(var _=[],C=0;C<m.length;++C){var M=m[C];if(M.ranges)_.push(S?ha.prototype.deepCopy.call(M):M);else{var N=M.changes,j=[];_.push({changes:j});for(var V=0;V<N.length;++V){var W=N[V],ce=void 0;if(j.push({from:W.from,to:W.to,text:W.text}),x)for(var fe in W)(ce=fe.match(/^spans_(\d+)$/))&&Pe(x,Number(ce[1]))>-1&&(ie(j)[fe]=W[fe],delete W[fe])}}}return _}function my(m,x,S,_){if(_){var C=m.anchor;if(S){var M=pt(x,C)<0;M!=pt(S,C)<0?(C=x,x=S):M!=pt(x,S)<0&&(x=S)}return new Pr(C,x)}return new Pr(S||x,x)}function Om(m,x,S,_,C){C==null&&(C=m.cm&&(m.cm.display.shift||m.extend)),Vs(m,new ha([my(m.sel.primary(),x,S,C)],0),_)}function ix(m,x,S){for(var _=[],C=m.cm&&(m.cm.display.shift||m.extend),M=0;M<m.sel.ranges.length;M++)_[M]=my(m.sel.ranges[M],x[M],null,C);Vs(m,hl(m.cm,_,m.sel.primIndex),S)}function gy(m,x,S,_){var C=m.sel.ranges.slice(0);C[x]=S,Vs(m,hl(m.cm,C,m.sel.primIndex),_)}function sx(m,x,S,_){Vs(m,Xu(x,S),_)}function ox(m,x,S){var _=m.history.done,C=ie(_);C&&C.ranges?(_[_.length-1]=x,Mm(m,x,S)):Vs(m,x,S)}function Vs(m,x,S){Mm(m,x,S),LS(m,m.sel,m.cm?m.cm.curOp.id:NaN,S)}function Mm(m,x,S){(xt(m,"beforeSelectionChange")||m.cm&&xt(m.cm,"beforeSelectionChange"))&&(x=function(C,M,N){var j={ranges:M.ranges,update:function(V){this.ranges=[];for(var W=0;W<V.length;W++)this.ranges[W]=new Pr(qt(C,V[W].anchor),qt(C,V[W].head))},origin:N&&N.origin};return tt(C,"beforeSelectionChange",C,j),C.cm&&tt(C.cm,"beforeSelectionChange",C.cm,j),j.ranges!=M.ranges?hl(C.cm,j.ranges,j.ranges.length-1):M}(m,x,S));var _=S&&S.bias||(pt(x.primary().head,m.sel.primary().head)<0?-1:1);ax(m,ux(m,x,_,!0)),S&&S.scroll===!1||!m.cm||m.cm.getOption("readOnly")=="nocursor"||ud(m.cm)}function ax(m,x){x.equals(m.sel)||(m.sel=x,m.cm&&(m.cm.curOp.updateInput=1,m.cm.curOp.selectionChanged=!0,Kt(m.cm)),Hr(m,"cursorActivity",m))}function lx(m){ax(m,ux(m,m.sel,null,!1))}function ux(m,x,S,_){for(var C,M=0;M<x.ranges.length;M++){var N=x.ranges[M],j=x.ranges.length==m.sel.ranges.length&&m.sel.ranges[M],V=$m(m,N.anchor,j&&j.anchor,S,_),W=N.head==N.anchor?V:$m(m,N.head,j&&j.head,S,_);(C||V!=N.anchor||W!=N.head)&&(C||(C=x.ranges.slice(0,M)),C[M]=new Pr(V,W))}return C?hl(m.cm,C,x.primIndex):x}function dd(m,x,S,_,C){var M=et(m,x.line);if(M.markedSpans)for(var N=0;N<M.markedSpans.length;++N){var j=M.markedSpans[N],V=j.marker,W="selectLeft"in V?!V.selectLeft:V.inclusiveLeft,ce="selectRight"in V?!V.selectRight:V.inclusiveRight;if((j.from==null||(W?j.from<=x.ch:j.from<x.ch))&&(j.to==null||(ce?j.to>=x.ch:j.to>x.ch))){if(C&&(tt(V,"beforeCursorEnter"),V.explicitlyCleared)){if(M.markedSpans){--N;continue}break}if(!V.atomic)continue;if(S){var fe=V.find(_<0?1:-1),Se=void 0;if((_<0?ce:W)&&(fe=cx(m,fe,-_,fe&&fe.line==x.line?M:null)),fe&&fe.line==x.line&&(Se=pt(fe,S))&&(_<0?Se<0:Se>0))return dd(m,fe,x,_,C)}var ve=V.find(_<0?-1:1);return(_<0?W:ce)&&(ve=cx(m,ve,_,ve.line==x.line?M:null)),ve?dd(m,ve,x,_,C):null}}return x}function $m(m,x,S,_,C){var M=_||1,N=dd(m,x,S,M,C)||!C&&dd(m,x,S,M,!0)||dd(m,x,S,-M,C)||!C&&dd(m,x,S,-M,!0);return N||(m.cantEdit=!0,Xe(m.first,0))}function cx(m,x,S,_){return S<0&&x.ch==0?x.line>m.first?qt(m,Xe(x.line-1)):null:S>0&&x.ch==(_||et(m,x.line)).text.length?x.line<m.first+m.size-1?Xe(x.line+1,0):null:new Xe(x.line,x.ch+S)}function fx(m){m.setSelection(Xe(m.firstLine(),0),Xe(m.lastLine()),ht)}function dx(m,x,S){var _={canceled:!1,from:x.from,to:x.to,text:x.text,origin:x.origin,cancel:function(){return _.canceled=!0}};return S&&(_.update=function(C,M,N,j){C&&(_.from=qt(m,C)),M&&(_.to=qt(m,M)),N&&(_.text=N),j!==void 0&&(_.origin=j)}),tt(m,"beforeChange",m,_),m.cm&&tt(m.cm,"beforeChange",m.cm,_),_.canceled?(m.cm&&(m.cm.curOp.updateInput=2),null):{from:_.from,to:_.to,text:_.text,origin:_.origin}}function hd(m,x,S){if(m.cm){if(!m.cm.curOp)return _s(m.cm,hd)(m,x,S);if(m.cm.state.suppressEdits)return}if(!(xt(m,"beforeChange")||m.cm&&xt(m.cm,"beforeChange"))||(x=dx(m,x,!0))){var _=Cr&&!S&&function(M,N,j){var V=null;if(M.iter(N.line,j.line+1,function(nt){if(nt.markedSpans)for(var Je=0;Je<nt.markedSpans.length;++Je){var mt=nt.markedSpans[Je].marker;!mt.readOnly||V&&Pe(V,mt)!=-1||(V||(V=[])).push(mt)}}),!V)return null;for(var W=[{from:N,to:j}],ce=0;ce<V.length;++ce)for(var fe=V[ce],Se=fe.find(0),ve=0;ve<W.length;++ve){var $e=W[ve];if(!(pt($e.to,Se.from)<0||pt($e.from,Se.to)>0)){var Ne=[ve,1],Me=pt($e.from,Se.from),Ve=pt($e.to,Se.to);(Me<0||!fe.inclusiveLeft&&!Me)&&Ne.push({from:$e.from,to:Se.from}),(Ve>0||!fe.inclusiveRight&&!Ve)&&Ne.push({from:Se.to,to:$e.to}),W.splice.apply(W,Ne),ve+=Ne.length-3}}return W}(m,x.from,x.to);if(_)for(var C=_.length-1;C>=0;--C)hx(m,{from:_[C].from,to:_[C].to,text:C?[""]:x.text,origin:x.origin});else hx(m,x)}}function hx(m,x){if(x.text.length!=1||x.text[0]!=""||pt(x.from,x.to)!=0){var S=fy(m,x);tx(m,x,S,m.cm?m.cm.curOp.id:NaN),Oh(m,x,S,fa(m,x));var _=[];Ku(m,function(C,M){M||Pe(_,C.history)!=-1||(yx(C.history,x),_.push(C.history)),Oh(C,x,null,fa(C,x))})}}function Im(m,x,S){var _=m.cm&&m.cm.state.suppressEdits;if(!_||S){for(var C,M=m.history,N=m.sel,j=x=="undo"?M.done:M.undone,V=x=="undo"?M.undone:M.done,W=0;W<j.length&&(C=j[W],S?!C.ranges||C.equals(m.sel):C.ranges);W++);if(W!=j.length){for(M.lastOrigin=M.lastSelOrigin=null;;){if(!(C=j.pop()).ranges){if(_)return void j.push(C);break}if(Fm(C,V),S&&!C.equals(m.sel))return void Vs(m,C,{clearRedo:!1});N=C}var ce=[];Fm(N,V),V.push({changes:ce,generation:M.generation}),M.generation=C.generation||++M.maxGeneration;for(var fe=xt(m,"beforeChange")||m.cm&&xt(m.cm,"beforeChange"),Se=function(Ne){var Me=C.changes[Ne];if(Me.origin=x,fe&&!dx(m,Me,!1))return j.length=0,{};ce.push(py(m,Me));var Ve=Ne?fy(m,Me):ie(j);Oh(m,Me,Ve,rx(m,Me)),!Ne&&m.cm&&m.cm.scrollIntoView({from:Me.from,to:Zu(Me)});var nt=[];Ku(m,function(Je,mt){mt||Pe(nt,Je.history)!=-1||(yx(Je.history,Me),nt.push(Je.history)),Oh(Je,Me,null,rx(Je,Me))})},ve=C.changes.length-1;ve>=0;--ve){var $e=Se(ve);if($e)return $e.v}}}}function px(m,x){if(x!=0&&(m.first+=x,m.sel=new ha(oe(m.sel.ranges,function(C){return new Pr(Xe(C.anchor.line+x,C.anchor.ch),Xe(C.head.line+x,C.head.ch))}),m.sel.primIndex),m.cm)){_o(m.cm,m.first,m.first-x,x);for(var S=m.cm.display,_=S.viewFrom;_<S.viewTo;_++)Wu(m.cm,_,"gutter")}}function Oh(m,x,S,_){if(m.cm&&!m.cm.curOp)return _s(m.cm,Oh)(m,x,S,_);if(x.to.line<m.first)px(m,x.text.length-1-(x.to.line-x.from.line));else if(!(x.from.line>m.lastLine())){if(x.from.line<m.first){var C=x.text.length-1-(m.first-x.from.line);px(m,C),x={from:Xe(m.first,0),to:Xe(x.to.line+C,x.to.ch),text:[ie(x.text)],origin:x.origin}}var M=m.lastLine();x.to.line>M&&(x={from:x.from,to:Xe(M,et(m,M).text.length),text:[x.text[0]],origin:x.origin}),x.removed=hn(m,x.from,x.to),S||(S=fy(m,x)),m.cm?function(N,j,V){var W=N.doc,ce=N.display,fe=j.from,Se=j.to,ve=!1,$e=fe.line;N.options.lineWrapping||($e=jt(Wi(et(W,fe.line))),W.iter($e,Se.line+1,function(Je){if(Je==ce.maxLine)return ve=!0,!0})),W.sel.contains(j.from,j.to)>-1&&Kt(N),hy(W,j,V,Ob(N)),N.options.lineWrapping||(W.iter($e,fe.line+j.text.length,function(Je){var mt=Be(Je);mt>ce.maxLineLength&&(ce.maxLine=Je,ce.maxLineLength=mt,ce.maxLineChanged=!0,ve=!1)}),ve&&(N.curOp.updateMaxLine=!0)),function(Je,mt){if(Je.modeFrontier=Math.min(Je.modeFrontier,mt),!(Je.highlightFrontier<mt-10)){for(var ct=Je.first,gt=mt-1;gt>ct;gt--){var vn=et(Je,gt).stateAfter;if(vn&&(!(vn instanceof Ji)||gt+vn.lookAhead<mt)){ct=gt+1;break}}Je.highlightFrontier=Math.min(Je.highlightFrontier,ct)}}(W,fe.line),Lh(N,400);var Ne=j.text.length-(Se.line-fe.line)-1;j.full?_o(N):fe.line!=Se.line||j.text.length!=1||Kb(N.doc,j)?_o(N,fe.line,Se.line+1,Ne):Wu(N,fe.line,"text");var Me=xt(N,"changes"),Ve=xt(N,"change");if(Ve||Me){var nt={from:fe,to:Se,text:j.text,removed:j.removed,origin:j.origin};Ve&&Hr(N,"change",N,nt),Me&&(N.curOp.changeObjs||(N.curOp.changeObjs=[])).push(nt)}N.display.selForContextMenu=null}(m.cm,x,_):hy(m,x,_),Mm(m,S,ht),m.cantEdit&&$m(m,Xe(m.firstLine(),0))&&(m.cantEdit=!1)}}function pd(m,x,S,_,C){var M;_||(_=S),pt(_,S)<0&&(S=(M=[_,S])[0],_=M[1]),typeof x=="string"&&(x=m.splitLines(x)),hd(m,{from:S,to:_,text:x,origin:C})}function mx(m,x,S,_){S<m.line?m.line+=_:x<m.line&&(m.line=x,m.ch=0)}function gx(m,x,S,_){for(var C=0;C<m.length;++C){var M=m[C],N=!0;if(M.ranges){M.copied||((M=m[C]=M.deepCopy()).copied=!0);for(var j=0;j<M.ranges.length;j++)mx(M.ranges[j].anchor,x,S,_),mx(M.ranges[j].head,x,S,_)}else{for(var V=0;V<M.changes.length;++V){var W=M.changes[V];if(S<W.from.line)W.from=Xe(W.from.line+_,W.from.ch),W.to=Xe(W.to.line+_,W.to.ch);else if(x<=W.to.line){N=!1;break}}N||(m.splice(0,C+1),C=0)}}}function yx(m,x){var S=x.from.line,_=x.to.line,C=x.text.length-(_-S)-1;gx(m.done,S,_,C),gx(m.undone,S,_,C)}function Mh(m,x,S,_){var C=x,M=x;return typeof x=="number"?M=et(m,nr(m,x)):C=jt(x),C==null?null:(_(M,C)&&m.cm&&Wu(m.cm,C,S),M)}function $h(m){this.lines=m,this.parent=null;for(var x=0,S=0;S<m.length;++S)m[S].parent=this,x+=m[S].height;this.height=x}function Ih(m){this.children=m;for(var x=0,S=0,_=0;_<m.length;++_){var C=m[_];x+=C.chunkSize(),S+=C.height,C.parent=this}this.size=x,this.height=S,this.parent=null}Pr.prototype.from=function(){return Rr(this.anchor,this.head)},Pr.prototype.to=function(){return Ar(this.anchor,this.head)},Pr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},$h.prototype={chunkSize:function(){return this.lines.length},removeInner:function(m,x){for(var S=m,_=m+x;S<_;++S){var C=this.lines[S];this.height-=C.height,It(C),Hr(C,"delete")}this.lines.splice(m,x)},collapse:function(m){m.push.apply(m,this.lines)},insertInner:function(m,x,S){this.height+=S,this.lines=this.lines.slice(0,m).concat(x).concat(this.lines.slice(m));for(var _=0;_<x.length;++_)x[_].parent=this},iterN:function(m,x,S){for(var _=m+x;m<_;++m)if(S(this.lines[m]))return!0}},Ih.prototype={chunkSize:function(){return this.size},removeInner:function(m,x){this.size-=x;for(var S=0;S<this.children.length;++S){var _=this.children[S],C=_.chunkSize();if(m<C){var M=Math.min(x,C-m),N=_.height;if(_.removeInner(m,M),this.height-=N-_.height,C==M&&(this.children.splice(S--,1),_.parent=null),(x-=M)==0)break;m=0}else m-=C}if(this.size-x<25&&(this.children.length>1||!(this.children[0]instanceof $h))){var j=[];this.collapse(j),this.children=[new $h(j)],this.children[0].parent=this}},collapse:function(m){for(var x=0;x<this.children.length;++x)this.children[x].collapse(m)},insertInner:function(m,x,S){this.size+=x.length,this.height+=S;for(var _=0;_<this.children.length;++_){var C=this.children[_],M=C.chunkSize();if(m<=M){if(C.insertInner(m,x,S),C.lines&&C.lines.length>50){for(var N=C.lines.length%25+25,j=N;j<C.lines.length;){var V=new $h(C.lines.slice(j,j+=25));C.height-=V.height,this.children.splice(++_,0,V),V.parent=this}C.lines=C.lines.slice(0,N),this.maybeSpill()}break}m-=M}},maybeSpill:function(){if(!(this.children.length<=10)){var m=this;do{var x=new Ih(m.children.splice(m.children.length-5,5));if(m.parent){m.size-=x.size,m.height-=x.height;var S=Pe(m.parent.children,m);m.parent.children.splice(S+1,0,x)}else{var _=new Ih(m.children);_.parent=m,m.children=[_,x],m=_}x.parent=m.parent}while(m.children.length>10);m.parent.maybeSpill()}},iterN:function(m,x,S){for(var _=0;_<this.children.length;++_){var C=this.children[_],M=C.chunkSize();if(m<M){var N=Math.min(x,M-m);if(C.iterN(m,N,S))return!0;if((x-=N)==0)break;m=0}else m-=M}}};var Ph=function(m,x,S){if(S)for(var _ in S)S.hasOwnProperty(_)&&(this[_]=S[_]);this.doc=m,this.node=x};function vx(m,x,S){me(x)<(m.curOp&&m.curOp.scrollTop||m.doc.scrollTop)&&sy(m,S)}Ph.prototype.clear=function(){var m=this.doc.cm,x=this.line.widgets,S=this.line,_=jt(S);if(_!=null&&x){for(var C=0;C<x.length;++C)x[C]==this&&x.splice(C--,1);x.length||(S.widgets=null);var M=Sn(this);zt(S,Math.max(0,S.height-M)),m&&(Uo(m,function(){vx(m,S,-M),Wu(m,_,"widget")}),Hr(m,"lineWidgetCleared",m,this,_))}},Ph.prototype.changed=function(){var m=this,x=this.height,S=this.doc.cm,_=this.line;this.height=null;var C=Sn(this)-x;C&&(Ht(this.doc,_)||zt(_,_.height+C),S&&Uo(S,function(){S.curOp.forceUpdate=!0,vx(S,_,C),Hr(S,"lineWidgetChanged",S,m,jt(_))}))},Qt(Ph);var bx=0,Ju=function(m,x){this.lines=[],this.type=x,this.doc=m,this.id=++bx};function md(m,x,S,_,C){if(_&&_.shared)return function(fe,Se,ve,$e,Ne){($e=we($e)).shared=!1;var Me=[md(fe,Se,ve,$e,Ne)],Ve=Me[0],nt=$e.widgetNode;return Ku(fe,function(Je){nt&&($e.widgetNode=nt.cloneNode(!0)),Me.push(md(Je,qt(Je,Se),qt(Je,ve),$e,Ne));for(var mt=0;mt<Je.linked.length;++mt)if(Je.linked[mt].isParent)return;Ve=ie(Me)}),new Nh(Me,Ve)}(m,x,S,_,C);if(m.cm&&!m.cm.curOp)return _s(m.cm,md)(m,x,S,_,C);var M=new Ju(m,C),N=pt(x,S);if(_&&we(_,M,!1),N>0||N==0&&M.clearWhenEmpty!==!1)return M;if(M.replacedWith&&(M.collapsed=!0,M.widgetNode=te("span",[M.replacedWith],"CodeMirror-widget"),_.handleMouseEvents||M.widgetNode.setAttribute("cm-ignore-events","true"),_.insertLeft&&(M.widgetNode.insertLeft=!0)),M.collapsed){if(so(m,x.line,x,S,M)||x.line!=S.line&&so(m,S.line,x,S,M))throw new Error("Inserting collapsed marker partially overlapping an existing one");Qi=!0}M.addToHistory&&tx(m,{from:x,to:S,origin:"markText"},m.sel,NaN);var j,V=x.line,W=m.cm;if(m.iter(V,S.line+1,function(fe){W&&M.collapsed&&!W.options.lineWrapping&&Wi(fe)==W.display.maxLine&&(j=!0),M.collapsed&&V!=x.line&&zt(fe,0),function(Se,ve,$e){var Ne=$e&&window.WeakSet&&($e.markedSpans||($e.markedSpans=new WeakSet));Ne&&Se.markedSpans&&Ne.has(Se.markedSpans)?Se.markedSpans.push(ve):(Se.markedSpans=Se.markedSpans?Se.markedSpans.concat([ve]):[ve],Ne&&Ne.add(Se.markedSpans)),ve.marker.attachLine(Se)}(fe,new ro(M,V==x.line?x.ch:null,V==S.line?S.ch:null),m.cm&&m.cm.curOp),++V}),M.collapsed&&m.iter(x.line,S.line+1,function(fe){Ht(m,fe)&&zt(fe,0)}),M.clearOnEnter&&De(M,"beforeCursorEnter",function(){return M.clear()}),M.readOnly&&(Cr=!0,(m.history.done.length||m.history.undone.length)&&m.clearHistory()),M.collapsed&&(M.id=++bx,M.atomic=!0),W){if(j&&(W.curOp.updateMaxLine=!0),M.collapsed)_o(W,x.line,S.line+1);else if(M.className||M.startStyle||M.endStyle||M.css||M.attributes||M.title)for(var ce=x.line;ce<=S.line;ce++)Wu(W,ce,"text");M.atomic&&lx(W.doc),Hr(W,"markerAdded",W,M)}return M}Ju.prototype.clear=function(){if(!this.explicitlyCleared){var m=this.doc.cm,x=m&&!m.curOp;if(x&&Kc(m),xt(this,"clear")){var S=this.find();S&&Hr(this,"clear",S.from,S.to)}for(var _=null,C=null,M=0;M<this.lines.length;++M){var N=this.lines[M],j=Os(N.markedSpans,this);m&&!this.collapsed?Wu(m,jt(N),"text"):m&&(j.to!=null&&(C=jt(N)),j.from!=null&&(_=jt(N))),N.markedSpans=Us(N.markedSpans,j),j.from==null&&this.collapsed&&!Ht(this.doc,N)&&m&&zt(N,od(m.display))}if(m&&this.collapsed&&!m.options.lineWrapping)for(var V=0;V<this.lines.length;++V){var W=Wi(this.lines[V]),ce=Be(W);ce>m.display.maxLineLength&&(m.display.maxLine=W,m.display.maxLineLength=ce,m.display.maxLineChanged=!0)}_!=null&&m&&this.collapsed&&_o(m,_,C+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,m&&lx(m.doc)),m&&Hr(m,"markerCleared",m,this,_,C),x&&Jc(m),this.parent&&this.parent.clear()}},Ju.prototype.find=function(m,x){var S,_;m==null&&this.type=="bookmark"&&(m=1);for(var C=0;C<this.lines.length;++C){var M=this.lines[C],N=Os(M.markedSpans,this);if(N.from!=null&&(S=Xe(x?M:jt(M),N.from),m==-1))return S;if(N.to!=null&&(_=Xe(x?M:jt(M),N.to),m==1))return _}return S&&{from:S,to:_}},Ju.prototype.changed=function(){var m=this,x=this.find(-1,!0),S=this,_=this.doc.cm;x&&_&&Uo(_,function(){var C=x.line,M=jt(x.line),N=Vn(_,M);if(N&&(Ab(N),_.curOp.selectionChanged=_.curOp.forceUpdate=!0),_.curOp.updateMaxLine=!0,!Ht(S.doc,C)&&S.height!=null){var j=S.height;S.height=null;var V=Sn(S)-j;V&&zt(C,C.height+V)}Hr(_,"markerChanged",_,m)})},Ju.prototype.attachLine=function(m){if(!this.lines.length&&this.doc.cm){var x=this.doc.cm.curOp;x.maybeHiddenMarkers&&Pe(x.maybeHiddenMarkers,this)!=-1||(x.maybeUnhiddenMarkers||(x.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(m)},Ju.prototype.detachLine=function(m){if(this.lines.splice(Pe(this.lines,m),1),!this.lines.length&&this.doc.cm){var x=this.doc.cm.curOp;(x.maybeHiddenMarkers||(x.maybeHiddenMarkers=[])).push(this)}},Qt(Ju);var Nh=function(m,x){this.markers=m,this.primary=x;for(var S=0;S<m.length;++S)m[S].parent=this};function xx(m){return m.findMarks(Xe(m.first,0),m.clipPos(Xe(m.lastLine())),function(x){return x.parent})}function FS(m){for(var x=function(_){var C=m[_],M=[C.primary.doc];Ku(C.primary.doc,function(V){return M.push(V)});for(var N=0;N<C.markers.length;N++){var j=C.markers[N];Pe(M,j.doc)==-1&&(j.parent=null,C.markers.splice(N--,1))}},S=0;S<m.length;S++)x(S)}Nh.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var m=0;m<this.markers.length;++m)this.markers[m].clear();Hr(this,"clear")}},Nh.prototype.find=function(m,x){return this.primary.find(m,x)},Qt(Nh);var OS=0,Eo=function(m,x,S,_,C){if(!(this instanceof Eo))return new Eo(m,x,S,_,C);S==null&&(S=0),Ih.call(this,[new $h([new pn("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var M=Xe(S,0);this.sel=Xu(M),this.history=new Rm(null),this.id=++OS,this.modeOption=x,this.lineSep=_,this.direction=C=="rtl"?"rtl":"ltr",this.extend=!1,typeof m=="string"&&(m=this.splitLines(m)),hy(this,{from:M,to:M,text:m}),Vs(this,Xu(M),ht)};Eo.prototype=F(Ih.prototype,{constructor:Eo,iter:function(m,x,S){S?this.iterN(m-this.first,x-m,S):this.iterN(this.first,this.first+this.size,m)},insert:function(m,x){for(var S=0,_=0;_<x.length;++_)S+=x[_].height;this.insertInner(m-this.first,x,S)},remove:function(m,x){this.removeInner(m-this.first,x)},getValue:function(m){var x=An(this,this.first,this.first+this.size);return m===!1?x:x.join(m||this.lineSeparator())},setValue:Es(function(m){var x=Xe(this.first,0),S=this.first+this.size-1;hd(this,{from:x,to:Xe(S,et(this,S).text.length),text:this.splitLines(m),origin:"setValue",full:!0},!0),this.cm&&Ch(this.cm,0,0),Vs(this,Xu(x),ht)}),replaceRange:function(m,x,S,_){pd(this,m,x=qt(this,x),S=S?qt(this,S):x,_)},getRange:function(m,x,S){var _=hn(this,qt(this,m),qt(this,x));return S===!1?_:S===""?_.join(""):_.join(S||this.lineSeparator())},getLine:function(m){var x=this.getLineHandle(m);return x&&x.text},getLineHandle:function(m){if(ci(this,m))return et(this,m)},getLineNumber:function(m){return jt(m)},getLineHandleVisualStart:function(m){return typeof m=="number"&&(m=et(this,m)),Wi(m)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(m){return qt(this,m)},getCursor:function(m){var x=this.sel.primary();return m==null||m=="head"?x.head:m=="anchor"?x.anchor:m=="end"||m=="to"||m===!1?x.to():x.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Es(function(m,x,S){sx(this,qt(this,typeof m=="number"?Xe(m,x||0):m),null,S)}),setSelection:Es(function(m,x,S){sx(this,qt(this,m),qt(this,x||m),S)}),extendSelection:Es(function(m,x,S){Om(this,qt(this,m),x&&qt(this,x),S)}),extendSelections:Es(function(m,x){ix(this,vi(this,m),x)}),extendSelectionsBy:Es(function(m,x){ix(this,vi(this,oe(this.sel.ranges,m)),x)}),setSelections:Es(function(m,x,S){if(m.length){for(var _=[],C=0;C<m.length;C++)_[C]=new Pr(qt(this,m[C].anchor),qt(this,m[C].head||m[C].anchor));x==null&&(x=Math.min(m.length-1,this.sel.primIndex)),Vs(this,hl(this.cm,_,x),S)}}),addSelection:Es(function(m,x,S){var _=this.sel.ranges.slice(0);_.push(new Pr(qt(this,m),qt(this,x||m))),Vs(this,hl(this.cm,_,_.length-1),S)}),getSelection:function(m){for(var x,S=this.sel.ranges,_=0;_<S.length;_++){var C=hn(this,S[_].from(),S[_].to());x=x?x.concat(C):C}return m===!1?x:x.join(m||this.lineSeparator())},getSelections:function(m){for(var x=[],S=this.sel.ranges,_=0;_<S.length;_++){var C=hn(this,S[_].from(),S[_].to());m!==!1&&(C=C.join(m||this.lineSeparator())),x[_]=C}return x},replaceSelection:function(m,x,S){for(var _=[],C=0;C<this.sel.ranges.length;C++)_[C]=m;this.replaceSelections(_,x,S||"+input")},replaceSelections:Es(function(m,x,S){for(var _=[],C=this.sel,M=0;M<C.ranges.length;M++){var N=C.ranges[M];_[M]={from:N.from(),to:N.to(),text:this.splitLines(m[M]),origin:S}}for(var j=x&&x!="end"&&function(W,ce,fe){for(var Se=[],ve=Xe(W.first,0),$e=ve,Ne=0;Ne<ce.length;Ne++){var Me=ce[Ne],Ve=Zb(Me.from,ve,$e),nt=Zb(Zu(Me),ve,$e);if(ve=Me.to,$e=nt,fe=="around"){var Je=W.sel.ranges[Ne],mt=pt(Je.head,Je.anchor)<0;Se[Ne]=new Pr(mt?nt:Ve,mt?Ve:nt)}else Se[Ne]=new Pr(Ve,Ve)}return new ha(Se,W.sel.primIndex)}(this,_,x),V=_.length-1;V>=0;V--)hd(this,_[V]);j?ox(this,j):this.cm&&ud(this.cm)}),undo:Es(function(){Im(this,"undo")}),redo:Es(function(){Im(this,"redo")}),undoSelection:Es(function(){Im(this,"undo",!0)}),redoSelection:Es(function(){Im(this,"redo",!0)}),setExtending:function(m){this.extend=m},getExtending:function(){return this.extend},historySize:function(){for(var m=this.history,x=0,S=0,_=0;_<m.done.length;_++)m.done[_].ranges||++x;for(var C=0;C<m.undone.length;C++)m.undone[C].ranges||++S;return{undo:x,redo:S}},clearHistory:function(){var m=this;this.history=new Rm(this.history),Ku(this,function(x){return x.history=m.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(m){return m&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(m){return this.history.generation==(m||this.cleanGeneration)},getHistory:function(){return{done:fd(this.history.done),undone:fd(this.history.undone)}},setHistory:function(m){var x=this.history=new Rm(this.history);x.done=fd(m.done.slice(0),null,!0),x.undone=fd(m.undone.slice(0),null,!0)},setGutterMarker:Es(function(m,x,S){return Mh(this,m,"gutter",function(_){var C=_.gutterMarkers||(_.gutterMarkers={});return C[x]=S,!S&&ye(C)&&(_.gutterMarkers=null),!0})}),clearGutter:Es(function(m){var x=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[m]&&Mh(x,S,"gutter",function(){return S.gutterMarkers[m]=null,ye(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(m){var x;if(typeof m=="number"){if(!ci(this,m)||(x=m,!(m=et(this,m))))return null}else if((x=jt(m))==null)return null;return{line:x,handle:m,text:m.text,gutterMarkers:m.gutterMarkers,textClass:m.textClass,bgClass:m.bgClass,wrapClass:m.wrapClass,widgets:m.widgets}},addLineClass:Es(function(m,x,S){return Mh(this,m,x=="gutter"?"gutter":"class",function(_){var C=x=="text"?"textClass":x=="background"?"bgClass":x=="gutter"?"gutterClass":"wrapClass";if(_[C]){if($(S).test(_[C]))return!1;_[C]+=" "+S}else _[C]=S;return!0})}),removeLineClass:Es(function(m,x,S){return Mh(this,m,x=="gutter"?"gutter":"class",function(_){var C=x=="text"?"textClass":x=="background"?"bgClass":x=="gutter"?"gutterClass":"wrapClass",M=_[C];if(!M)return!1;if(S==null)_[C]=null;else{var N=M.match($(S));if(!N)return!1;var j=N.index+N[0].length;_[C]=M.slice(0,N.index)+(N.index&&j!=M.length?" ":"")+M.slice(j)||null}return!0})}),addLineWidget:Es(function(m,x,S){return function(_,C,M,N){var j=new Ph(_,M,N),V=_.cm;return V&&j.noHScroll&&(V.display.alignWidgets=!0),Mh(_,C,"widget",function(W){var ce=W.widgets||(W.widgets=[]);if(j.insertAt==null?ce.push(j):ce.splice(Math.min(ce.length,Math.max(0,j.insertAt)),0,j),j.line=W,V&&!Ht(_,W)){var fe=me(W)<_.scrollTop;zt(W,W.height+Sn(j)),fe&&sy(V,j.height),V.curOp.forceUpdate=!0}return!0}),V&&Hr(V,"lineWidgetAdded",V,j,typeof C=="number"?C:jt(C)),j}(this,m,x,S)}),removeLineWidget:function(m){m.clear()},markText:function(m,x,S){return md(this,qt(this,m),qt(this,x),S,S&&S.type||"range")},setBookmark:function(m,x){var S={replacedWith:x&&(x.nodeType==null?x.widget:x),insertLeft:x&&x.insertLeft,clearWhenEmpty:!1,shared:x&&x.shared,handleMouseEvents:x&&x.handleMouseEvents};return md(this,m=qt(this,m),m,S,"bookmark")},findMarksAt:function(m){var x=[],S=et(this,(m=qt(this,m)).line).markedSpans;if(S)for(var _=0;_<S.length;++_){var C=S[_];(C.from==null||C.from<=m.ch)&&(C.to==null||C.to>=m.ch)&&x.push(C.marker.parent||C.marker)}return x},findMarks:function(m,x,S){m=qt(this,m),x=qt(this,x);var _=[],C=m.line;return this.iter(m.line,x.line+1,function(M){var N=M.markedSpans;if(N)for(var j=0;j<N.length;j++){var V=N[j];V.to!=null&&C==m.line&&m.ch>=V.to||V.from==null&&C!=m.line||V.from!=null&&C==x.line&&V.from>=x.ch||S&&!S(V.marker)||_.push(V.marker.parent||V.marker)}++C}),_},getAllMarks:function(){var m=[];return this.iter(function(x){var S=x.markedSpans;if(S)for(var _=0;_<S.length;++_)S[_].from!=null&&m.push(S[_].marker)}),m},posFromIndex:function(m){var x,S=this.first,_=this.lineSeparator().length;return this.iter(function(C){var M=C.text.length+_;if(M>m)return x=m,!0;m-=M,++S}),qt(this,Xe(S,x))},indexFromPos:function(m){var x=(m=qt(this,m)).ch;if(m.line<this.first||m.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,m.line,function(_){x+=_.text.length+S}),x},copy:function(m){var x=new Eo(An(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return x.scrollTop=this.scrollTop,x.scrollLeft=this.scrollLeft,x.sel=this.sel,x.extend=!1,m&&(x.history.undoDepth=this.history.undoDepth,x.setHistory(this.getHistory())),x},linkedDoc:function(m){m||(m={});var x=this.first,S=this.first+this.size;m.from!=null&&m.from>x&&(x=m.from),m.to!=null&&m.to<S&&(S=m.to);var _=new Eo(An(this,x,S),m.mode||this.modeOption,x,this.lineSep,this.direction);return m.sharedHist&&(_.history=this.history),(this.linked||(this.linked=[])).push({doc:_,sharedHist:m.sharedHist}),_.linked=[{doc:this,isParent:!0,sharedHist:m.sharedHist}],function(C,M){for(var N=0;N<M.length;N++){var j=M[N],V=j.find(),W=C.clipPos(V.from),ce=C.clipPos(V.to);if(pt(W,ce)){var fe=md(C,W,ce,j.primary,j.primary.type);j.markers.push(fe),fe.parent=j}}}(_,xx(this)),_},unlinkDoc:function(m){if(m instanceof Ri&&(m=m.doc),this.linked){for(var x=0;x<this.linked.length;++x)if(this.linked[x].doc==m){this.linked.splice(x,1),m.unlinkDoc(this),FS(xx(this));break}}if(m.history==this.history){var S=[m.id];Ku(m,function(_){return S.push(_.id)},!0),m.history=new Rm(null),m.history.done=fd(this.history.done,S),m.history.undone=fd(this.history.undone,S)}},iterLinkedDocs:function(m){Ku(this,m)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(m){return this.lineSep?m.split(this.lineSep):gn(m)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Es(function(m){var x;m!="rtl"&&(m="ltr"),m!=this.direction&&(this.direction=m,this.iter(function(S){return S.order=null}),this.cm&&Uo(x=this.cm,function(){Qb(x),_o(x)}))})}),Eo.prototype.eachLine=Eo.prototype.iter;var wx=0;function MS(m){var x=this;if(_x(x),!dt(x,m)&&!pr(x.display,m)){rn(m),c&&(wx=+new Date);var S=Wc(x,m,!0),_=m.dataTransfer.files;if(S&&!x.isReadOnly())if(_&&_.length&&window.FileReader&&window.File)for(var C=_.length,M=Array(C),N=0,j=function(){++N==C&&_s(x,function(){var ve={from:S=qt(x.doc,S),to:S,text:x.doc.splitLines(M.filter(function($e){return $e!=null}).join(x.doc.lineSeparator())),origin:"paste"};hd(x.doc,ve),ox(x.doc,Xu(qt(x.doc,S),qt(x.doc,Zu(ve))))})()},V=function(ve,$e){if(x.options.allowDropFileTypes&&Pe(x.options.allowDropFileTypes,ve.type)==-1)j();else{var Ne=new FileReader;Ne.onerror=function(){return j()},Ne.onload=function(){var Me=Ne.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Me)||(M[$e]=Me),j()},Ne.readAsText(ve)}},W=0;W<_.length;W++)V(_[W],W);else{if(x.state.draggingText&&x.doc.sel.contains(S)>-1)return x.state.draggingText(m),void setTimeout(function(){return x.display.input.focus()},20);try{var ce=m.dataTransfer.getData("Text");if(ce){var fe;if(x.state.draggingText&&!x.state.draggingText.copy&&(fe=x.listSelections()),Mm(x.doc,Xu(S,S)),fe)for(var Se=0;Se<fe.length;++Se)pd(x.doc,"",fe[Se].anchor,fe[Se].head,"drag");x.replaceSelection(ce,"around","paste"),x.display.input.focus()}}catch{}}}}function _x(m){m.display.dragCursor&&(m.display.lineSpace.removeChild(m.display.dragCursor),m.display.dragCursor=null)}function Ex(m){if(document.getElementsByClassName){for(var x=document.getElementsByClassName("CodeMirror"),S=[],_=0;_<x.length;_++){var C=x[_].CodeMirror;C&&S.push(C)}S.length&&S[0].operation(function(){for(var M=0;M<S.length;M++)m(S[M])})}}var Sx=!1;function $S(){var m;Sx||(De(window,"resize",function(){m==null&&(m=setTimeout(function(){m=null,Ex(IS)},100))}),De(window,"blur",function(){return Ex(ld)}),Sx=!0)}function IS(m){var x=m.display;x.cachedCharWidth=x.cachedTextHeight=x.cachedPaddingH=null,x.scrollbarsClipped=!1,m.setSize()}for(var Qu={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Bh=0;Bh<10;Bh++)Qu[Bh+48]=Qu[Bh+96]=String(Bh);for(var Pm=65;Pm<=90;Pm++)Qu[Pm]=String.fromCharCode(Pm);for(var zh=1;zh<=12;zh++)Qu[zh+111]=Qu[zh+63235]="F"+zh;var pu={};function PS(m){var x,S,_,C,M=m.split(/-(?!$)/);m=M[M.length-1];for(var N=0;N<M.length-1;N++){var j=M[N];if(/^(cmd|meta|m)$/i.test(j))C=!0;else if(/^a(lt)?$/i.test(j))x=!0;else if(/^(c|ctrl|control)$/i.test(j))S=!0;else{if(!/^s(hift)?$/i.test(j))throw new Error("Unrecognized modifier name: "+j);_=!0}}return x&&(m="Alt-"+m),S&&(m="Ctrl-"+m),C&&(m="Cmd-"+m),_&&(m="Shift-"+m),m}function NS(m){var x={};for(var S in m)if(m.hasOwnProperty(S)){var _=m[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(_=="..."){delete m[S];continue}for(var C=oe(S.split(" "),PS),M=0;M<C.length;M++){var N=void 0,j=void 0;M==C.length-1?(j=C.join(" "),N=_):(j=C.slice(0,M+1).join(" "),N="...");var V=x[j];if(V){if(V!=N)throw new Error("Inconsistent bindings for "+j)}else x[j]=N}delete m[S]}for(var W in x)m[W]=x[W];return m}function gd(m,x,S,_){var C=(x=Nm(x)).call?x.call(m,_):x[m];if(C===!1)return"nothing";if(C==="...")return"multi";if(C!=null&&S(C))return"handled";if(x.fallthrough){if(Object.prototype.toString.call(x.fallthrough)!="[object Array]")return gd(m,x.fallthrough,S,_);for(var M=0;M<x.fallthrough.length;M++){var N=gd(m,x.fallthrough[M],S,_);if(N)return N}}}function Ax(m){var x=typeof m=="string"?m:Qu[m.keyCode];return x=="Ctrl"||x=="Alt"||x=="Shift"||x=="Mod"}function Cx(m,x,S){var _=m;return x.altKey&&_!="Alt"&&(m="Alt-"+m),(K?x.metaKey:x.ctrlKey)&&_!="Ctrl"&&(m="Ctrl-"+m),(K?x.ctrlKey:x.metaKey)&&_!="Mod"&&(m="Cmd-"+m),!S&&x.shiftKey&&_!="Shift"&&(m="Shift-"+m),m}function kx(m,x){if(y&&m.keyCode==34&&m.char)return!1;var S=Qu[m.keyCode];return S!=null&&!m.altGraphKey&&(m.keyCode==3&&m.code&&(S=m.code),Cx(S,m,x))}function Nm(m){return typeof m=="string"?pu[m]:m}function yd(m,x){for(var S=m.doc.sel.ranges,_=[],C=0;C<S.length;C++){for(var M=x(S[C]);_.length&&pt(M.from,ie(_).to)<=0;){var N=_.pop();if(pt(N.from,M.from)<0){M.from=N.from;break}}_.push(M)}Uo(m,function(){for(var j=_.length-1;j>=0;j--)pd(m.doc,"",_[j].from,_[j].to,"+delete");ud(m)})}function yy(m,x,S){var _=P(m.text,x+S,S);return _<0||_>m.text.length?null:_}function vy(m,x,S){var _=yy(m,x.ch,S);return _==null?null:new Xe(x.line,_,S<0?"after":"before")}function by(m,x,S,_,C){if(m){x.doc.direction=="rtl"&&(C=-C);var M=Ce(S,x.doc.direction);if(M){var N,j=C<0?ie(M):M[0],V=C<0==(j.level==1)?"after":"before";if(j.level>0||x.doc.direction=="rtl"){var W=mr(x,S);N=C<0?S.text.length-1:0;var ce=Pn(x,W,N).top;N=Q(function(fe){return Pn(x,W,fe).top==ce},C<0==(j.level==1)?j.from:j.to-1,N),V=="before"&&(N=yy(S,N,1))}else N=C<0?j.to:j.from;return new Xe(_,N,V)}}return new Xe(_,C<0?S.text.length:0,C<0?"before":"after")}pu.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pu.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},pu.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},pu.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},pu.default=k?pu.macDefault:pu.pcDefault;var jh={selectAll:fx,singleSelection:function(m){return m.setSelection(m.getCursor("anchor"),m.getCursor("head"),ht)},killLine:function(m){return yd(m,function(x){if(x.empty()){var S=et(m.doc,x.head.line).text.length;return x.head.ch==S&&x.head.line<m.lastLine()?{from:x.head,to:Xe(x.head.line+1,0)}:{from:x.head,to:Xe(x.head.line,S)}}return{from:x.from(),to:x.to()}})},deleteLine:function(m){return yd(m,function(x){return{from:Xe(x.from().line,0),to:qt(m.doc,Xe(x.to().line+1,0))}})},delLineLeft:function(m){return yd(m,function(x){return{from:Xe(x.from().line,0),to:x.from()}})},delWrappedLineLeft:function(m){return yd(m,function(x){var S=m.charCoords(x.head,"div").top+5;return{from:m.coordsChar({left:0,top:S},"div"),to:x.from()}})},delWrappedLineRight:function(m){return yd(m,function(x){var S=m.charCoords(x.head,"div").top+5,_=m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:S},"div");return{from:x.from(),to:_}})},undo:function(m){return m.undo()},redo:function(m){return m.redo()},undoSelection:function(m){return m.undoSelection()},redoSelection:function(m){return m.redoSelection()},goDocStart:function(m){return m.extendSelection(Xe(m.firstLine(),0))},goDocEnd:function(m){return m.extendSelection(Xe(m.lastLine()))},goLineStart:function(m){return m.extendSelectionsBy(function(x){return Tx(m,x.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(m){return m.extendSelectionsBy(function(x){return Dx(m,x.head)},{origin:"+move",bias:1})},goLineEnd:function(m){return m.extendSelectionsBy(function(x){return function(S,_){var C=et(S.doc,_),M=function(N){for(var j;j=fi(N);)N=j.find(1,!0).line;return N}(C);return M!=C&&(_=jt(M)),by(!0,S,C,_,-1)}(m,x.head.line)},{origin:"+move",bias:-1})},goLineRight:function(m){return m.extendSelectionsBy(function(x){var S=m.cursorCoords(x.head,"div").top+5;return m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:S},"div")},Vt)},goLineLeft:function(m){return m.extendSelectionsBy(function(x){var S=m.cursorCoords(x.head,"div").top+5;return m.coordsChar({left:0,top:S},"div")},Vt)},goLineLeftSmart:function(m){return m.extendSelectionsBy(function(x){var S=m.cursorCoords(x.head,"div").top+5,_=m.coordsChar({left:0,top:S},"div");return _.ch<m.getLine(_.line).search(/\S/)?Dx(m,x.head):_},Vt)},goLineUp:function(m){return m.moveV(-1,"line")},goLineDown:function(m){return m.moveV(1,"line")},goPageUp:function(m){return m.moveV(-1,"page")},goPageDown:function(m){return m.moveV(1,"page")},goCharLeft:function(m){return m.moveH(-1,"char")},goCharRight:function(m){return m.moveH(1,"char")},goColumnLeft:function(m){return m.moveH(-1,"column")},goColumnRight:function(m){return m.moveH(1,"column")},goWordLeft:function(m){return m.moveH(-1,"word")},goGroupRight:function(m){return m.moveH(1,"group")},goGroupLeft:function(m){return m.moveH(-1,"group")},goWordRight:function(m){return m.moveH(1,"word")},delCharBefore:function(m){return m.deleteH(-1,"codepoint")},delCharAfter:function(m){return m.deleteH(1,"char")},delWordBefore:function(m){return m.deleteH(-1,"word")},delWordAfter:function(m){return m.deleteH(1,"word")},delGroupBefore:function(m){return m.deleteH(-1,"group")},delGroupAfter:function(m){return m.deleteH(1,"group")},indentAuto:function(m){return m.indentSelection("smart")},indentMore:function(m){return m.indentSelection("add")},indentLess:function(m){return m.indentSelection("subtract")},insertTab:function(m){return m.replaceSelection("	")},insertSoftTab:function(m){for(var x=[],S=m.listSelections(),_=m.options.tabSize,C=0;C<S.length;C++){var M=S[C].from(),N=Ie(m.getLine(M.line),M.ch,_);x.push(pe(_-N%_))}m.replaceSelections(x)},defaultTab:function(m){m.somethingSelected()?m.indentSelection("add"):m.execCommand("insertTab")},transposeChars:function(m){return Uo(m,function(){for(var x=m.listSelections(),S=[],_=0;_<x.length;_++)if(x[_].empty()){var C=x[_].head,M=et(m.doc,C.line).text;if(M){if(C.ch==M.length&&(C=new Xe(C.line,C.ch-1)),C.ch>0)C=new Xe(C.line,C.ch+1),m.replaceRange(M.charAt(C.ch-1)+M.charAt(C.ch-2),Xe(C.line,C.ch-2),C,"+transpose");else if(C.line>m.doc.first){var N=et(m.doc,C.line-1).text;N&&(C=new Xe(C.line,1),m.replaceRange(M.charAt(0)+m.doc.lineSeparator()+N.charAt(N.length-1),Xe(C.line-1,N.length-1),C,"+transpose"))}}S.push(new Pr(C,C))}m.setSelections(S)})},newlineAndIndent:function(m){return Uo(m,function(){for(var x=m.listSelections(),S=x.length-1;S>=0;S--)m.replaceRange(m.doc.lineSeparator(),x[S].anchor,x[S].head,"+input");x=m.listSelections();for(var _=0;_<x.length;_++)m.indentLine(x[_].from().line,null,!0);ud(m)})},openLine:function(m){return m.replaceSelection(`
`,"start")},toggleOverwrite:function(m){return m.toggleOverwrite()}};function Tx(m,x){var S=et(m.doc,x),_=Wi(S);return _!=S&&(x=jt(_)),by(!0,m,_,x,1)}function Dx(m,x){var S=Tx(m,x.line),_=et(m.doc,S.line),C=Ce(_,m.doc.direction);if(!C||C[0].level==0){var M=Math.max(S.ch,_.text.search(/\S/)),N=x.line==S.line&&x.ch<=M&&x.ch;return Xe(S.line,N?0:M,S.sticky)}return S}function Bm(m,x,S){if(typeof x=="string"&&!(x=jh[x]))return!1;m.display.input.ensurePolled();var _=m.display.shift,C=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),S&&(m.display.shift=!1),C=x(m)!=At}finally{m.display.shift=_,m.state.suppressEdits=!1}return C}var BS=new qe;function Uh(m,x,S,_){var C=m.state.keySeq;if(C){if(Ax(x))return"handled";if(/\'$/.test(x)?m.state.keySeq=null:BS.set(50,function(){m.state.keySeq==C&&(m.state.keySeq=null,m.display.input.reset())}),Lx(m,C+" "+x,S,_))return!0}return Lx(m,x,S,_)}function Lx(m,x,S,_){var C=function(M,N,j){for(var V=0;V<M.state.keyMaps.length;V++){var W=gd(N,M.state.keyMaps[V],j,M);if(W)return W}return M.options.extraKeys&&gd(N,M.options.extraKeys,j,M)||gd(N,M.options.keyMap,j,M)}(m,x,_);return C=="multi"&&(m.state.keySeq=x),C=="handled"&&Hr(m,"keyHandled",m,x,S),C!="handled"&&C!="multi"||(rn(S),ty(m)),!!C}function Rx(m,x){var S=kx(x,!0);return!!S&&(x.shiftKey&&!m.state.keySeq?Uh(m,"Shift-"+S,x,function(_){return Bm(m,_,!0)})||Uh(m,S,x,function(_){if(typeof _=="string"?/^go[A-Z]/.test(_):_.motion)return Bm(m,_)}):Uh(m,S,x,function(_){return Bm(m,_)}))}var xy=null;function Fx(m){var x=this;if(!(m.target&&m.target!=x.display.input.getField()||(x.curOp.focus=ee(ze(x)),dt(x,m)))){c&&d<11&&m.keyCode==27&&(m.returnValue=!1);var S=m.keyCode;x.display.shift=S==16||m.shiftKey;var _=Rx(x,m);y&&(xy=_?S:null,_||S!=88||sr||!(k?m.metaKey:m.ctrlKey)||x.replaceSelection("",null,"cut")),a&&!k&&!_&&S==46&&m.shiftKey&&!m.ctrlKey&&document.execCommand&&document.execCommand("cut"),S!=18||/\bCodeMirror-crosshair\b/.test(x.display.lineDiv.className)||function(C){var M=C.display.lineDiv;function N(j){j.keyCode!=18&&j.altKey||(U(M,"CodeMirror-crosshair"),We(document,"keyup",N),We(document,"mouseover",N))}z(M,"CodeMirror-crosshair"),De(document,"keyup",N),De(document,"mouseover",N)}(x)}}function Ox(m){m.keyCode==16&&(this.doc.sel.shift=!1),dt(this,m)}function Mx(m){var x=this;if(!(m.target&&m.target!=x.display.input.getField()||pr(x.display,m)||dt(x,m)||m.ctrlKey&&!m.altKey||k&&m.metaKey)){var S=m.keyCode,_=m.charCode;if(y&&S==xy)return xy=null,void rn(m);if(!y||m.which&&!(m.which<10)||!Rx(x,m)){var C=String.fromCharCode(_??S);C!="\b"&&(function(M,N,j){return Uh(M,"'"+j+"'",N,function(V){return Bm(M,V,!0)})}(x,m,C)||x.display.input.onKeyPress(m))}}}var qh,Hh,wy=function(m,x,S){this.time=m,this.pos=x,this.button=S};function $x(m){var x=this,S=x.display;if(!(dt(x,m)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=m.shiftKey,pr(S,m))h||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));else if(!_y(x,m)){var _=Wc(x,m),C=Ki(m),M=_?function(N,j){var V=+new Date;return Hh&&Hh.compare(V,N,j)?(qh=Hh=null,"triple"):qh&&qh.compare(V,N,j)?(Hh=new wy(V,N,j),qh=null,"double"):(qh=new wy(V,N,j),Hh=null,"single")}(_,C):"single";He(x).focus(),C==1&&x.state.selectingText&&x.state.selectingText(m),_&&function(N,j,V,W,ce){var fe="Click";return W=="double"?fe="Double"+fe:W=="triple"&&(fe="Triple"+fe),Uh(N,Cx(fe=(j==1?"Left":j==2?"Middle":"Right")+fe,ce),ce,function(Se){if(typeof Se=="string"&&(Se=jh[Se]),!Se)return!1;var ve=!1;try{N.isReadOnly()&&(N.state.suppressEdits=!0),ve=Se(N,V)!=At}finally{N.state.suppressEdits=!1}return ve})}(x,C,_,M,m)||(C==1?_?function(N,j,V,W){c?setTimeout(je(Ib,N),0):N.curOp.focus=ee(ze(N));var ce,fe=function(ve,$e,Ne){var Me=ve.getOption("configureMouse"),Ve=Me?Me(ve,$e,Ne):{};if(Ve.unit==null){var nt=R?Ne.shiftKey&&Ne.metaKey:Ne.altKey;Ve.unit=nt?"rectangle":$e=="single"?"char":$e=="double"?"word":"line"}return(Ve.extend==null||ve.doc.extend)&&(Ve.extend=ve.doc.extend||Ne.shiftKey),Ve.addNew==null&&(Ve.addNew=k?Ne.metaKey:Ne.ctrlKey),Ve.moveOnDrag==null&&(Ve.moveOnDrag=!(k?Ne.altKey:Ne.ctrlKey)),Ve}(N,V,W),Se=N.doc.sel;N.options.dragDrop&&No&&!N.isReadOnly()&&V=="single"&&(ce=Se.contains(j))>-1&&(pt((ce=Se.ranges[ce]).from(),j)<0||j.xRel>0)&&(pt(ce.to(),j)>0||j.xRel<0)?function(ve,$e,Ne,Me){var Ve=ve.display,nt=!1,Je=_s(ve,function(gt){h&&(Ve.scroller.draggable=!1),ve.state.draggingText=!1,ve.state.delayingBlurEvent&&(ve.hasFocus()?ve.state.delayingBlurEvent=!1:ny(ve)),We(Ve.wrapper.ownerDocument,"mouseup",Je),We(Ve.wrapper.ownerDocument,"mousemove",mt),We(Ve.scroller,"dragstart",ct),We(Ve.scroller,"drop",Je),nt||(rn(gt),Me.addNew||Om(ve.doc,Ne,null,null,Me.extend),h&&!b||c&&d==9?setTimeout(function(){Ve.wrapper.ownerDocument.body.focus({preventScroll:!0}),Ve.input.focus()},20):Ve.input.focus())}),mt=function(gt){nt=nt||Math.abs($e.clientX-gt.clientX)+Math.abs($e.clientY-gt.clientY)>=10},ct=function(){return nt=!0};h&&(Ve.scroller.draggable=!0),ve.state.draggingText=Je,Je.copy=!Me.moveOnDrag,De(Ve.wrapper.ownerDocument,"mouseup",Je),De(Ve.wrapper.ownerDocument,"mousemove",mt),De(Ve.scroller,"dragstart",ct),De(Ve.scroller,"drop",Je),ve.state.delayingBlurEvent=!0,setTimeout(function(){return Ve.input.focus()},20),Ve.scroller.dragDrop&&Ve.scroller.dragDrop()}(N,W,j,fe):function(ve,$e,Ne,Me){c&&ny(ve);var Ve=ve.display,nt=ve.doc;rn($e);var Je,mt,ct=nt.sel,gt=ct.ranges;if(Me.addNew&&!Me.extend?(mt=nt.sel.contains(Ne),Je=mt>-1?gt[mt]:new Pr(Ne,Ne)):(Je=nt.sel.primary(),mt=nt.sel.primIndex),Me.unit=="rectangle")Me.addNew||(Je=new Pr(Ne,Ne)),Ne=Wc(ve,$e,!0,!0),mt=-1;else{var vn=Ix(ve,Ne,Me.unit);Je=Me.extend?my(Je,vn.anchor,vn.head,Me.extend):vn}Me.addNew?mt==-1?(mt=gt.length,Vs(nt,hl(ve,gt.concat([Je]),mt),{scroll:!1,origin:"*mouse"})):gt.length>1&&gt[mt].empty()&&Me.unit=="char"&&!Me.extend?(Vs(nt,hl(ve,gt.slice(0,mt).concat(gt.slice(mt+1)),0),{scroll:!1,origin:"*mouse"}),ct=nt.sel):gy(nt,mt,Je,nn):(mt=0,Vs(nt,new ha([Je],0),nn),ct=nt.sel);var Mt=Ne;function Hn($n){if(pt(Mt,$n)!=0)if(Mt=$n,Me.unit=="rectangle"){for(var Br=[],Fn=ve.options.tabSize,Jn=Ie(et(nt,Ne.line).text,Ne.ch,Fn),Nn=Ie(et(nt,$n.line).text,$n.ch,Fn),vr=Math.min(Jn,Nn),lo=Math.max(Jn,Nn),zr=Math.min(Ne.line,$n.line),Ws=Math.min(ve.lastLine(),Math.max(Ne.line,$n.line));zr<=Ws;zr++){var Ys=et(nt,zr).text,Ci=Mn(Ys,vr,Fn);vr==lo?Br.push(new Pr(Xe(zr,Ci),Xe(zr,Ci))):Ys.length>Ci&&Br.push(new Pr(Xe(zr,Ci),Xe(zr,Mn(Ys,lo,Fn))))}Br.length||Br.push(new Pr(Ne,Ne)),Vs(nt,hl(ve,ct.ranges.slice(0,mt).concat(Br),mt),{origin:"*mouse",scroll:!1}),ve.scrollIntoView($n)}else{var uo,Ia=Je,Ms=Ix(ve,$n,Me.unit),ml=Ia.anchor;pt(Ms.anchor,ml)>0?(uo=Ms.head,ml=Rr(Ia.from(),Ms.anchor)):(uo=Ms.anchor,ml=Ar(Ia.to(),Ms.head));var Hm=ct.ranges.slice(0);Hm[mt]=function(Yx,Qc){var qo=Qc.anchor,ec=Qc.head,HS=et(Yx.doc,qo.line);if(pt(qo,ec)==0&&qo.sticky==ec.sticky)return Qc;var xd=Ce(HS);if(!xd)return Qc;var Cy=ae(xd,qo.ch,qo.sticky),Vh=xd[Cy];if(Vh.from!=qo.ch&&Vh.to!=qo.ch)return Qc;var Gm,Wh=Cy+(Vh.from==qo.ch==(Vh.level!=1)?0:1);if(Wh==0||Wh==xd.length)return Qc;if(ec.line!=qo.line)Gm=(ec.line-qo.line)*(Yx.doc.direction=="ltr"?1:-1)>0;else{var ky=ae(xd,ec.ch,ec.sticky),Xx=ky-Cy||(ec.ch-qo.ch)*(Vh.level==1?-1:1);Gm=ky==Wh-1||ky==Wh?Xx<0:Xx>0}var Ty=xd[Wh+(Gm?-1:0)],Zx=Gm==(Ty.level==1),Kx=Zx?Ty.from:Ty.to,Jx=Zx?"after":"before";return qo.ch==Kx&&qo.sticky==Jx?Qc:new Pr(new Xe(qo.line,Kx,Jx),ec)}(ve,new Pr(qt(nt,ml),uo)),Vs(nt,hl(ve,Hm,mt),nn)}}var fn=Ve.wrapper.getBoundingClientRect(),ar=0;function Nr($n){var Br=++ar,Fn=Wc(ve,$n,!0,Me.unit=="rectangle");if(Fn)if(pt(Fn,Mt)!=0){ve.curOp.focus=ee(ze(ve)),Hn(Fn);var Jn=km(Ve,nt);(Fn.line>=Jn.to||Fn.line<Jn.from)&&setTimeout(_s(ve,function(){ar==Br&&Nr($n)}),150)}else{var Nn=$n.clientY<fn.top?-20:$n.clientY>fn.bottom?20:0;Nn&&setTimeout(_s(ve,function(){ar==Br&&(Ve.scroller.scrollTop+=Nn,Nr($n))}),50)}}function lr($n){ve.state.selectingText=!1,ar=1/0,$n&&(rn($n),Ve.input.focus()),We(Ve.wrapper.ownerDocument,"mousemove",Zn),We(Ve.wrapper.ownerDocument,"mouseup",ur),nt.history.lastSelOrigin=null}var Zn=_s(ve,function($n){$n.buttons!==0&&Ki($n)?Nr($n):lr($n)}),ur=_s(ve,lr);ve.state.selectingText=ur,De(Ve.wrapper.ownerDocument,"mousemove",Zn),De(Ve.wrapper.ownerDocument,"mouseup",ur)}(N,W,j,fe)}(x,_,M,m):Er(m)==S.scroller&&rn(m):C==2?(_&&Om(x.doc,_),setTimeout(function(){return S.input.focus()},20)):C==3&&(L?x.display.input.onContextMenu(m):ny(x)))}}}function Ix(m,x,S){if(S=="char")return new Pr(x,x);if(S=="word")return m.findWordAt(x);if(S=="line")return new Pr(Xe(x.line,0),qt(m.doc,Xe(x.line+1,0)));var _=S(m,x);return new Pr(_.from,_.to)}function Px(m,x,S,_){var C,M;if(x.touches)C=x.touches[0].clientX,M=x.touches[0].clientY;else try{C=x.clientX,M=x.clientY}catch{return!1}if(C>=Math.floor(m.display.gutters.getBoundingClientRect().right))return!1;_&&rn(x);var N=m.display,j=N.lineDiv.getBoundingClientRect();if(M>j.bottom||!xt(m,S))return on(x);M-=j.top-N.viewOffset;for(var V=0;V<m.display.gutterSpecs.length;++V){var W=N.gutters.childNodes[V];if(W&&W.getBoundingClientRect().right>=C)return tt(m,S,m,Sr(m.doc,M),m.display.gutterSpecs[V].className,x),on(x)}}function _y(m,x){return Px(m,x,"gutterClick",!0)}function Nx(m,x){pr(m.display,x)||function(S,_){return xt(S,"gutterContextMenu")?Px(S,_,"gutterContextMenu",!1):!1}(m,x)||dt(m,x,"contextmenu")||L||m.display.input.onContextMenu(x)}function Bx(m){m.display.wrapper.className=m.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+m.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Sh(m)}wy.prototype.compare=function(m,x,S){return this.time+400>m&&pt(x,this.pos)==0&&S==this.button};var vd={toString:function(){return"CodeMirror.Init"}},zx={},zm={};function zS(m,x,S){if(!x!=!(S&&S!=vd)){var _=m.display.dragFunctions,C=x?De:We;C(m.display.scroller,"dragstart",_.start),C(m.display.scroller,"dragenter",_.enter),C(m.display.scroller,"dragover",_.over),C(m.display.scroller,"dragleave",_.leave),C(m.display.scroller,"drop",_.drop)}}function jS(m){m.options.lineWrapping?(z(m.display.wrapper,"CodeMirror-wrap"),m.display.sizer.style.minWidth="",m.display.sizerWidth=null):(U(m.display.wrapper,"CodeMirror-wrap"),yt(m)),Q0(m),_o(m),Sh(m),setTimeout(function(){return cd(m)},100)}function Ri(m,x){var S=this;if(!(this instanceof Ri))return new Ri(m,x);this.options=x=x?we(x):{},we(zx,x,!1);var _=x.value;typeof _=="string"?_=new Eo(_,x.mode,null,x.lineSeparator,x.direction):x.mode&&(_.modeOption=x.mode),this.doc=_;var C=new Ri.inputStyles[x.inputStyle](this),M=this.display=new TS(m,_,C,x);for(var N in M.wrapper.CodeMirror=this,Bx(this),x.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ub(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qe,keySeq:null,specialChars:null},x.autofocus&&!D&&M.input.focus(),c&&d<11&&setTimeout(function(){return S.display.input.reset(!0)},20),function(V){var W=V.display;De(W.scroller,"mousedown",_s(V,$x)),De(W.scroller,"dblclick",c&&d<11?_s(V,function(Me){if(!dt(V,Me)){var Ve=Wc(V,Me);if(Ve&&!_y(V,Me)&&!pr(V.display,Me)){rn(Me);var nt=V.findWordAt(Ve);Om(V.doc,nt.anchor,nt.head)}}}):function(Me){return dt(V,Me)||rn(Me)}),De(W.scroller,"contextmenu",function(Me){return Nx(V,Me)}),De(W.input.getField(),"contextmenu",function(Me){W.scroller.contains(Me.target)||Nx(V,Me)});var ce,fe={end:0};function Se(){W.activeTouch&&(ce=setTimeout(function(){return W.activeTouch=null},1e3),(fe=W.activeTouch).end=+new Date)}function ve(Me){if(Me.touches.length!=1)return!1;var Ve=Me.touches[0];return Ve.radiusX<=1&&Ve.radiusY<=1}function $e(Me,Ve){if(Ve.left==null)return!0;var nt=Ve.left-Me.left,Je=Ve.top-Me.top;return nt*nt+Je*Je>400}De(W.scroller,"touchstart",function(Me){if(!dt(V,Me)&&!ve(Me)&&!_y(V,Me)){W.input.ensurePolled(),clearTimeout(ce);var Ve=+new Date;W.activeTouch={start:Ve,moved:!1,prev:Ve-fe.end<=300?fe:null},Me.touches.length==1&&(W.activeTouch.left=Me.touches[0].pageX,W.activeTouch.top=Me.touches[0].pageY)}}),De(W.scroller,"touchmove",function(){W.activeTouch&&(W.activeTouch.moved=!0)}),De(W.scroller,"touchend",function(Me){var Ve=W.activeTouch;if(Ve&&!pr(W,Me)&&Ve.left!=null&&!Ve.moved&&new Date-Ve.start<300){var nt,Je=V.coordsChar(W.activeTouch,"page");nt=!Ve.prev||$e(Ve,Ve.prev)?new Pr(Je,Je):!Ve.prev.prev||$e(Ve,Ve.prev.prev)?V.findWordAt(Je):new Pr(Xe(Je.line,0),qt(V.doc,Xe(Je.line+1,0))),V.setSelection(nt.anchor,nt.head),V.focus(),rn(Me)}Se()}),De(W.scroller,"touchcancel",Se),De(W.scroller,"scroll",function(){W.scroller.clientHeight&&(kh(V,W.scroller.scrollTop),Xc(V,W.scroller.scrollLeft,!0),tt(V,"scroll",V))}),De(W.scroller,"mousewheel",function(Me){return Yb(V,Me)}),De(W.scroller,"DOMMouseScroll",function(Me){return Yb(V,Me)}),De(W.wrapper,"scroll",function(){return W.wrapper.scrollTop=W.wrapper.scrollLeft=0}),W.dragFunctions={enter:function(Me){dt(V,Me)||Tn(Me)},over:function(Me){dt(V,Me)||(function(Ve,nt){var Je=Wc(Ve,nt);if(Je){var mt=document.createDocumentFragment();ey(Ve,Je,mt),Ve.display.dragCursor||(Ve.display.dragCursor=X("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),Ve.display.lineSpace.insertBefore(Ve.display.dragCursor,Ve.display.cursorDiv)),Y(Ve.display.dragCursor,mt)}}(V,Me),Tn(Me))},start:function(Me){return function(Ve,nt){if(c&&(!Ve.state.draggingText||+new Date-wx<100))Tn(nt);else if(!dt(Ve,nt)&&!pr(Ve.display,nt)&&(nt.dataTransfer.setData("Text",Ve.getSelection()),nt.dataTransfer.effectAllowed="copyMove",nt.dataTransfer.setDragImage&&!b)){var Je=X("img",null,null,"position: fixed; left: 0; top: 0;");Je.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(Je.width=Je.height=1,Ve.display.wrapper.appendChild(Je),Je._top=Je.offsetTop),nt.dataTransfer.setDragImage(Je,0,0),y&&Je.parentNode.removeChild(Je)}}(V,Me)},drop:_s(V,MS),leave:function(Me){dt(V,Me)||_x(V)}};var Ne=W.input.getField();De(Ne,"keyup",function(Me){return Ox.call(V,Me)}),De(Ne,"keydown",_s(V,Fx)),De(Ne,"keypress",_s(V,Mx)),De(Ne,"focus",function(Me){return ry(V,Me)}),De(Ne,"blur",function(Me){return ld(V,Me)})}(this),$S(),Kc(this),this.curOp.forceUpdate=!0,Jb(this,_),x.autofocus&&!D||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&ry(S)},20):ld(this),zm)zm.hasOwnProperty(N)&&zm[N](this,x[N],vd);Gb(this),x.finishInit&&x.finishInit(this);for(var j=0;j<Ey.length;++j)Ey[j](this);Jc(this),h&&x.lineWrapping&&getComputedStyle(M.lineDiv).textRendering=="optimizelegibility"&&(M.lineDiv.style.textRendering="auto")}Ri.defaults=zx,Ri.optionHandlers=zm;var Ey=[];function Gh(m,x,S,_){var C,M=m.doc;S==null&&(S="add"),S=="smart"&&(M.mode.indent?C=no(m,x).state:S="prev");var N=m.options.tabSize,j=et(M,x),V=Ie(j.text,null,N);j.stateAfter&&(j.stateAfter=null);var W,ce=j.text.match(/^\s*/)[0];if(_||/\S/.test(j.text)){if(S=="smart"&&((W=M.mode.indent(C,j.text.slice(ce.length),j.text))==At||W>150)){if(!_)return;S="prev"}}else W=0,S="not";S=="prev"?W=x>M.first?Ie(et(M,x-1).text,null,N):0:S=="add"?W=V+m.options.indentUnit:S=="subtract"?W=V-m.options.indentUnit:typeof S=="number"&&(W=V+S),W=Math.max(0,W);var fe="",Se=0;if(m.options.indentWithTabs)for(var ve=Math.floor(W/N);ve;--ve)Se+=N,fe+="	";if(Se<W&&(fe+=pe(W-Se)),fe!=ce)return pd(M,fe,Xe(x,0),Xe(x,ce.length),"+input"),j.stateAfter=null,!0;for(var $e=0;$e<M.sel.ranges.length;$e++){var Ne=M.sel.ranges[$e];if(Ne.head.line==x&&Ne.head.ch<ce.length){var Me=Xe(x,ce.length);gy(M,$e,new Pr(Me,Me));break}}}Ri.defineInitHook=function(m){return Ey.push(m)};var pl=null;function jm(m){pl=m}function Sy(m,x,S,_,C){var M=m.doc;m.display.shift=!1,_||(_=M.sel);var N=+new Date-200,j=C=="paste"||m.state.pasteIncoming>N,V=gn(x),W=null;if(j&&_.ranges.length>1)if(pl&&pl.text.join(`
`)==x){if(_.ranges.length%pl.text.length==0){W=[];for(var ce=0;ce<pl.text.length;ce++)W.push(M.splitLines(pl.text[ce]))}}else V.length==_.ranges.length&&m.options.pasteLinesPerSelection&&(W=oe(V,function(Ve){return[Ve]}));for(var fe=m.curOp.updateInput,Se=_.ranges.length-1;Se>=0;Se--){var ve=_.ranges[Se],$e=ve.from(),Ne=ve.to();ve.empty()&&(S&&S>0?$e=Xe($e.line,$e.ch-S):m.state.overwrite&&!j?Ne=Xe(Ne.line,Math.min(et(M,Ne.line).text.length,Ne.ch+ie(V).length)):j&&pl&&pl.lineWise&&pl.text.join(`
`)==V.join(`
`)&&($e=Ne=Xe($e.line,0)));var Me={from:$e,to:Ne,text:W?W[Se%W.length]:V,origin:C||(j?"paste":m.state.cutIncoming>N?"cut":"+input")};hd(m.doc,Me),Hr(m,"inputRead",m,Me)}x&&!j&&Ux(m,x),ud(m),m.curOp.updateInput<2&&(m.curOp.updateInput=fe),m.curOp.typing=!0,m.state.pasteIncoming=m.state.cutIncoming=-1}function jx(m,x){var S=m.clipboardData&&m.clipboardData.getData("Text");if(S)return m.preventDefault(),x.isReadOnly()||x.options.disableInput||!x.hasFocus()||Uo(x,function(){return Sy(x,S,0,null,"paste")}),!0}function Ux(m,x){if(m.options.electricChars&&m.options.smartIndent)for(var S=m.doc.sel,_=S.ranges.length-1;_>=0;_--){var C=S.ranges[_];if(!(C.head.ch>100||_&&S.ranges[_-1].head.line==C.head.line)){var M=m.getModeAt(C.head),N=!1;if(M.electricChars){for(var j=0;j<M.electricChars.length;j++)if(x.indexOf(M.electricChars.charAt(j))>-1){N=Gh(m,C.head.line,"smart");break}}else M.electricInput&&M.electricInput.test(et(m.doc,C.head.line).text.slice(0,C.head.ch))&&(N=Gh(m,C.head.line,"smart"));N&&Hr(m,"electricInput",m,C.head.line)}}}function qx(m){for(var x=[],S=[],_=0;_<m.doc.sel.ranges.length;_++){var C=m.doc.sel.ranges[_].head.line,M={anchor:Xe(C,0),head:Xe(C+1,0)};S.push(M),x.push(m.getRange(M.anchor,M.head))}return{text:x,ranges:S}}function Hx(m,x,S,_){m.setAttribute("autocorrect",S?"":"off"),m.setAttribute("autocapitalize",_?"":"off"),m.setAttribute("spellcheck",!!x)}function Gx(){var m=X("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),x=X("div",[m],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return h?m.style.width="1000px":m.setAttribute("wrap","off"),A&&(m.style.border="1px solid black"),Hx(m),x}function Ay(m,x,S,_,C){var M=x,N=S,j=et(m,x.line),V=C&&m.direction=="rtl"?-S:S;function W(Ve){var nt,Je;if(_=="codepoint"){var mt=j.text.charCodeAt(x.ch+(S>0?0:-1));if(isNaN(mt))nt=null;else{var ct=S>0?mt>=55296&&mt<56320:mt>=56320&&mt<57343;nt=new Xe(x.line,Math.max(0,Math.min(j.text.length,x.ch+S*(ct?2:1))),-S)}}else nt=C?function(gt,vn,Mt,Hn){var fn=Ce(vn,gt.doc.direction);if(!fn)return vy(vn,Mt,Hn);Mt.ch>=vn.text.length?(Mt.ch=vn.text.length,Mt.sticky="before"):Mt.ch<=0&&(Mt.ch=0,Mt.sticky="after");var ar=ae(fn,Mt.ch,Mt.sticky),Nr=fn[ar];if(gt.doc.direction=="ltr"&&Nr.level%2==0&&(Hn>0?Nr.to>Mt.ch:Nr.from<Mt.ch))return vy(vn,Mt,Hn);var lr,Zn=function(zr,Ws){return yy(vn,zr instanceof Xe?zr.ch:zr,Ws)},ur=function(zr){return gt.options.lineWrapping?(lr=lr||mr(gt,vn),Fb(gt,vn,lr,zr)):{begin:0,end:vn.text.length}},$n=ur(Mt.sticky=="before"?Zn(Mt,-1):Mt.ch);if(gt.doc.direction=="rtl"||Nr.level==1){var Br=Nr.level==1==Hn<0,Fn=Zn(Mt,Br?1:-1);if(Fn!=null&&(Br?Fn<=Nr.to&&Fn<=$n.end:Fn>=Nr.from&&Fn>=$n.begin)){var Jn=Br?"before":"after";return new Xe(Mt.line,Fn,Jn)}}var Nn=function(zr,Ws,Ys){for(var Ci=function(ml,Hm){return Hm?new Xe(Mt.line,Zn(ml,1),"before"):new Xe(Mt.line,ml,"after")};zr>=0&&zr<fn.length;zr+=Ws){var uo=fn[zr],Ia=Ws>0==(uo.level!=1),Ms=Ia?Ys.begin:Zn(Ys.end,-1);if(uo.from<=Ms&&Ms<uo.to||(Ms=Ia?uo.from:Zn(uo.to,-1),Ys.begin<=Ms&&Ms<Ys.end))return Ci(Ms,Ia)}},vr=Nn(ar+Hn,Hn,$n);if(vr)return vr;var lo=Hn>0?$n.end:Zn($n.begin,-1);return lo==null||Hn>0&&lo==vn.text.length||!(vr=Nn(Hn>0?0:fn.length-1,Hn,ur(lo)))?null:vr}(m.cm,j,x,S):vy(j,x,S);if(nt==null){if(Ve||(Je=x.line+V)<m.first||Je>=m.first+m.size||(x=new Xe(Je,x.ch,x.sticky),!(j=et(m,Je))))return!1;x=by(C,m.cm,j,x.line,V)}else x=nt;return!0}if(_=="char"||_=="codepoint")W();else if(_=="column")W(!0);else if(_=="word"||_=="group")for(var ce=null,fe=_=="group",Se=m.cm&&m.cm.getHelper(x,"wordChars"),ve=!0;!(S<0)||W(!ve);ve=!1){var $e=j.text.charAt(x.ch)||`
`,Ne=re($e,Se)?"w":fe&&$e==`
`?"n":!fe||/\s/.test($e)?null:"p";if(!fe||ve||Ne||(Ne="s"),ce&&ce!=Ne){S<0&&(S=1,W(),x.sticky="after");break}if(Ne&&(ce=Ne),S>0&&!W(!ve))break}var Me=$m(m,x,M,N,!0);return Xn(M,Me)&&(Me.hitSide=!0),Me}function Vx(m,x,S,_){var C,M,N=m.doc,j=x.left;if(_=="page"){var V=Math.min(m.display.wrapper.clientHeight,He(m).innerHeight||N(m).documentElement.clientHeight),W=Math.max(V-.5*od(m.display),3);C=(S>0?x.bottom:x.top)+S*W}else _=="line"&&(C=S>0?x.bottom+3:x.top-3);for(;(M=X0(m,j,C)).outside;){if(S<0?C<=0:C>=N.height){M.hitSide=!0;break}C+=5*S}return M}var Qr=function(m){this.cm=m,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Wx(m,x){var S=Vn(m,x.line);if(!S||S.hidden)return null;var _=et(m.doc,x.line),C=ut(S,_,x.line),M=Ce(_,m.doc.direction),N="left";M&&(N=ae(M,x.ch)%2?"right":"left");var j=Sb(C.map,x.ch,N);return j.offset=j.collapse=="right"?j.end:j.start,j}function bd(m,x){return x&&(m.bad=!0),m}function Um(m,x,S){var _;if(x==m.display.lineDiv){if(!(_=m.display.lineDiv.childNodes[S]))return bd(m.clipPos(Xe(m.display.viewTo-1)),!0);x=null,S=0}else for(_=x;;_=_.parentNode){if(!_||_==m.display.lineDiv)return null;if(_.parentNode&&_.parentNode==m.display.lineDiv)break}for(var C=0;C<m.display.view.length;C++){var M=m.display.view[C];if(M.node==_)return US(M,x,S)}}function US(m,x,S){var _=m.text.firstChild,C=!1;if(!x||!le(_,x))return bd(Xe(jt(m.line),0),!0);if(x==_&&(C=!0,x=_.childNodes[S],S=0,!x)){var M=m.rest?ie(m.rest):m.line;return bd(Xe(jt(M),M.text.length),C)}var N=x.nodeType==3?x:null,j=x;for(N||x.childNodes.length!=1||x.firstChild.nodeType!=3||(N=x.firstChild,S&&(S=N.nodeValue.length));j.parentNode!=_;)j=j.parentNode;var V=m.measure,W=V.maps;function ce(Me,Ve,nt){for(var Je=-1;Je<(W?W.length:0);Je++)for(var mt=Je<0?V.map:W[Je],ct=0;ct<mt.length;ct+=3){var gt=mt[ct+2];if(gt==Me||gt==Ve){var vn=jt(Je<0?m.line:m.rest[Je]),Mt=mt[ct]+nt;return(nt<0||gt!=Me)&&(Mt=mt[ct+(nt?1:0)]),Xe(vn,Mt)}}}var fe=ce(N,j,S);if(fe)return bd(fe,C);for(var Se=j.nextSibling,ve=N?N.nodeValue.length-S:0;Se;Se=Se.nextSibling){if(fe=ce(Se,Se.firstChild,0))return bd(Xe(fe.line,fe.ch-ve),C);ve+=Se.textContent.length}for(var $e=j.previousSibling,Ne=S;$e;$e=$e.previousSibling){if(fe=ce($e,$e.firstChild,-1))return bd(Xe(fe.line,fe.ch+Ne),C);Ne+=$e.textContent.length}}Qr.prototype.init=function(m){var x=this,S=this,_=S.cm,C=S.div=m.lineDiv;function M(j){for(var V=j.target;V;V=V.parentNode){if(V==C)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(V.className))break}return!1}function N(j){if(M(j)&&!dt(_,j)){if(_.somethingSelected())jm({lineWise:!1,text:_.getSelections()}),j.type=="cut"&&_.replaceSelection("",null,"cut");else{if(!_.options.lineWiseCopyCut)return;var V=qx(_);jm({lineWise:!0,text:V.text}),j.type=="cut"&&_.operation(function(){_.setSelections(V.ranges,0,ht),_.replaceSelection("",null,"cut")})}if(j.clipboardData){j.clipboardData.clearData();var W=pl.text.join(`
`);if(j.clipboardData.setData("Text",W),j.clipboardData.getData("Text")==W)return void j.preventDefault()}var ce=Gx(),fe=ce.firstChild;_.display.lineSpace.insertBefore(ce,_.display.lineSpace.firstChild),fe.value=pl.text.join(`
`);var Se=ee(C.ownerDocument);de(fe),setTimeout(function(){_.display.lineSpace.removeChild(ce),Se.focus(),Se==C&&S.showPrimarySelection()},50)}}C.contentEditable=!0,Hx(C,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize),De(C,"paste",function(j){!M(j)||dt(_,j)||jx(j,_)||d<=11&&setTimeout(_s(_,function(){return x.updateFromDOM()}),20)}),De(C,"compositionstart",function(j){x.composing={data:j.data,done:!1}}),De(C,"compositionupdate",function(j){x.composing||(x.composing={data:j.data,done:!1})}),De(C,"compositionend",function(j){x.composing&&(j.data!=x.composing.data&&x.readFromDOMSoon(),x.composing.done=!0)}),De(C,"touchstart",function(){return S.forceCompositionEnd()}),De(C,"input",function(){x.composing||x.readFromDOMSoon()}),De(C,"copy",N),De(C,"cut",N)},Qr.prototype.screenReaderLabelChanged=function(m){m?this.div.setAttribute("aria-label",m):this.div.removeAttribute("aria-label")},Qr.prototype.prepareSelection=function(){var m=$b(this.cm,!1);return m.focus=ee(this.div.ownerDocument)==this.div,m},Qr.prototype.showSelection=function(m,x){m&&this.cm.display.view.length&&((m.focus||x)&&this.showPrimarySelection(),this.showMultipleSelections(m))},Qr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qr.prototype.showPrimarySelection=function(){var m=this.getSelection(),x=this.cm,S=x.doc.sel.primary(),_=S.from(),C=S.to();if(x.display.viewTo==x.display.viewFrom||_.line>=x.display.viewTo||C.line<x.display.viewFrom)m.removeAllRanges();else{var M=Um(x,m.anchorNode,m.anchorOffset),N=Um(x,m.focusNode,m.focusOffset);if(!M||M.bad||!N||N.bad||pt(Rr(M,N),_)!=0||pt(Ar(M,N),C)!=0){var j=x.display.view,V=_.line>=x.display.viewFrom&&Wx(x,_)||{node:j[0].measure.map[2],offset:0},W=C.line<x.display.viewTo&&Wx(x,C);if(!W){var ce=j[j.length-1].measure,fe=ce.maps?ce.maps[ce.maps.length-1]:ce.map;W={node:fe[fe.length-1],offset:fe[fe.length-2]-fe[fe.length-3]}}if(V&&W){var Se,ve=m.rangeCount&&m.getRangeAt(0);try{Se=I(V.node,V.offset,W.offset,W.node)}catch{}Se&&(!a&&x.state.focused?(m.collapse(V.node,V.offset),Se.collapsed||(m.removeAllRanges(),m.addRange(Se))):(m.removeAllRanges(),m.addRange(Se)),ve&&m.anchorNode==null?m.addRange(ve):a&&this.startGracePeriod()),this.rememberSelection()}else m.removeAllRanges()}}},Qr.prototype.startGracePeriod=function(){var m=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){m.gracePeriod=!1,m.selectionChanged()&&m.cm.operation(function(){return m.cm.curOp.selectionChanged=!0})},20)},Qr.prototype.showMultipleSelections=function(m){Y(this.cm.display.cursorDiv,m.cursors),Y(this.cm.display.selectionDiv,m.selection)},Qr.prototype.rememberSelection=function(){var m=this.getSelection();this.lastAnchorNode=m.anchorNode,this.lastAnchorOffset=m.anchorOffset,this.lastFocusNode=m.focusNode,this.lastFocusOffset=m.focusOffset},Qr.prototype.selectionInEditor=function(){var m=this.getSelection();if(!m.rangeCount)return!1;var x=m.getRangeAt(0).commonAncestorContainer;return le(this.div,x)},Qr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&ee(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qr.prototype.blur=function(){this.div.blur()},Qr.prototype.getField=function(){return this.div},Qr.prototype.supportsTouch=function(){return!0},Qr.prototype.receivedFocus=function(){var m=this,x=this;this.selectionInEditor()?setTimeout(function(){return m.pollSelection()},20):Uo(this.cm,function(){return x.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function S(){x.cm.state.focused&&(x.pollSelection(),x.polling.set(x.cm.options.pollInterval,S))})},Qr.prototype.selectionChanged=function(){var m=this.getSelection();return m.anchorNode!=this.lastAnchorNode||m.anchorOffset!=this.lastAnchorOffset||m.focusNode!=this.lastFocusNode||m.focusOffset!=this.lastFocusOffset},Qr.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var m=this.getSelection(),x=this.cm;if(T&&g&&this.cm.display.gutterSpecs.length&&function(C){for(var M=C;M;M=M.parentNode)if(/CodeMirror-gutter-wrapper/.test(M.className))return!0;return!1}(m.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var S=Um(x,m.anchorNode,m.anchorOffset),_=Um(x,m.focusNode,m.focusOffset);S&&_&&Uo(x,function(){Vs(x.doc,Xu(S,_),ht),(S.bad||_.bad)&&(x.curOp.selectionChanged=!0)})}}},Qr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var m,x,S,_=this.cm,C=_.display,M=_.doc.sel.primary(),N=M.from(),j=M.to();if(N.ch==0&&N.line>_.firstLine()&&(N=Xe(N.line-1,et(_.doc,N.line-1).length)),j.ch==et(_.doc,j.line).text.length&&j.line<_.lastLine()&&(j=Xe(j.line+1,0)),N.line<C.viewFrom||j.line>C.viewTo-1)return!1;N.line==C.viewFrom||(m=Yc(_,N.line))==0?(x=jt(C.view[0].line),S=C.view[0].node):(x=jt(C.view[m].line),S=C.view[m-1].node.nextSibling);var V,W,ce=Yc(_,j.line);if(ce==C.view.length-1?(V=C.viewTo-1,W=C.lineDiv.lastChild):(V=jt(C.view[ce+1].line)-1,W=C.view[ce+1].node.previousSibling),!S)return!1;for(var fe=_.doc.splitLines(function(vn,Mt,Hn,fn,ar){var Nr="",lr=!1,Zn=vn.doc.lineSeparator(),ur=!1;function $n(Nn){return function(vr){return vr.id==Nn}}function Br(){lr&&(Nr+=Zn,ur&&(Nr+=Zn),lr=ur=!1)}function Fn(Nn){Nn&&(Br(),Nr+=Nn)}function Jn(Nn){if(Nn.nodeType==1){var vr=Nn.getAttribute("cm-text");if(vr)return void Fn(vr);var lo,zr=Nn.getAttribute("cm-marker");if(zr){var Ws=vn.findMarks(Xe(fn,0),Xe(ar+1,0),$n(+zr));return void(Ws.length&&(lo=Ws[0].find(0))&&Fn(hn(vn.doc,lo.from,lo.to).join(Zn)))}if(Nn.getAttribute("contenteditable")=="false")return;var Ys=/^(pre|div|p|li|table|br)$/i.test(Nn.nodeName);if(!/^br$/i.test(Nn.nodeName)&&Nn.textContent.length==0)return;Ys&&Br();for(var Ci=0;Ci<Nn.childNodes.length;Ci++)Jn(Nn.childNodes[Ci]);/^(pre|p)$/i.test(Nn.nodeName)&&(ur=!0),Ys&&(lr=!0)}else Nn.nodeType==3&&Fn(Nn.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Jn(Mt),Mt!=Hn;)Mt=Mt.nextSibling,ur=!1;return Nr}(_,S,W,x,V)),Se=hn(_.doc,Xe(x,0),Xe(V,et(_.doc,V).text.length));fe.length>1&&Se.length>1;)if(ie(fe)==ie(Se))fe.pop(),Se.pop(),V--;else{if(fe[0]!=Se[0])break;fe.shift(),Se.shift(),x++}for(var ve=0,$e=0,Ne=fe[0],Me=Se[0],Ve=Math.min(Ne.length,Me.length);ve<Ve&&Ne.charCodeAt(ve)==Me.charCodeAt(ve);)++ve;for(var nt=ie(fe),Je=ie(Se),mt=Math.min(nt.length-(fe.length==1?ve:0),Je.length-(Se.length==1?ve:0));$e<mt&&nt.charCodeAt(nt.length-$e-1)==Je.charCodeAt(Je.length-$e-1);)++$e;if(fe.length==1&&Se.length==1&&x==N.line)for(;ve&&ve>N.ch&&nt.charCodeAt(nt.length-$e-1)==Je.charCodeAt(Je.length-$e-1);)ve--,$e++;fe[fe.length-1]=nt.slice(0,nt.length-$e).replace(/^\u200b+/,""),fe[0]=fe[0].slice(ve).replace(/\u200b+$/,"");var ct=Xe(x,ve),gt=Xe(V,Se.length?ie(Se).length-$e:0);return fe.length>1||fe[0]||pt(ct,gt)?(pd(_.doc,fe,ct,gt,"+input"),!0):void 0},Qr.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qr.prototype.reset=function(){this.forceCompositionEnd()},Qr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qr.prototype.readFromDOMSoon=function(){var m=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(m.readDOMTimeout=null,m.composing){if(!m.composing.done)return;m.composing=null}m.updateFromDOM()},80))},Qr.prototype.updateFromDOM=function(){var m=this;!this.cm.isReadOnly()&&this.pollContent()||Uo(this.cm,function(){return _o(m.cm)})},Qr.prototype.setUneditable=function(m){m.contentEditable="false"},Qr.prototype.onKeyPress=function(m){m.charCode==0||this.composing||(m.preventDefault(),this.cm.isReadOnly()||_s(this.cm,Sy)(this.cm,String.fromCharCode(m.charCode==null?m.keyCode:m.charCode),0))},Qr.prototype.readOnlyChanged=function(m){this.div.contentEditable=String(m!="nocursor")},Qr.prototype.onContextMenu=function(){},Qr.prototype.resetPosition=function(){},Qr.prototype.needsContentAttribute=!0;var ts=function(m){this.cm=m,this.prevInput="",this.pollingFast=!1,this.polling=new qe,this.hasSelection=!1,this.composing=null,this.resetting=!1};ts.prototype.init=function(m){var x=this,S=this,_=this.cm;this.createField(m);var C=this.textarea;function M(N){if(!dt(_,N)){if(_.somethingSelected())jm({lineWise:!1,text:_.getSelections()});else{if(!_.options.lineWiseCopyCut)return;var j=qx(_);jm({lineWise:!0,text:j.text}),N.type=="cut"?_.setSelections(j.ranges,null,ht):(S.prevInput="",C.value=j.text.join(`
`),de(C))}N.type=="cut"&&(_.state.cutIncoming=+new Date)}}m.wrapper.insertBefore(this.wrapper,m.wrapper.firstChild),A&&(C.style.width="0px"),De(C,"input",function(){c&&d>=9&&x.hasSelection&&(x.hasSelection=null),S.poll()}),De(C,"paste",function(N){dt(_,N)||jx(N,_)||(_.state.pasteIncoming=+new Date,S.fastPoll())}),De(C,"cut",M),De(C,"copy",M),De(m.scroller,"paste",function(N){if(!pr(m,N)&&!dt(_,N)){if(!C.dispatchEvent)return _.state.pasteIncoming=+new Date,void S.focus();var j=new Event("paste");j.clipboardData=N.clipboardData,C.dispatchEvent(j)}}),De(m.lineSpace,"selectstart",function(N){pr(m,N)||rn(N)}),De(C,"compositionstart",function(){var N=_.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:N,range:_.markText(N,_.getCursor("to"),{className:"CodeMirror-composing"})}}),De(C,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},ts.prototype.createField=function(m){this.wrapper=Gx(),this.textarea=this.wrapper.firstChild},ts.prototype.screenReaderLabelChanged=function(m){m?this.textarea.setAttribute("aria-label",m):this.textarea.removeAttribute("aria-label")},ts.prototype.prepareSelection=function(){var m=this.cm,x=m.display,S=m.doc,_=$b(m);if(m.options.moveInputWithCursor){var C=dl(m,S.sel.primary().head,"div"),M=x.wrapper.getBoundingClientRect(),N=x.lineDiv.getBoundingClientRect();_.teTop=Math.max(0,Math.min(x.wrapper.clientHeight-10,C.top+N.top-M.top)),_.teLeft=Math.max(0,Math.min(x.wrapper.clientWidth-10,C.left+N.left-M.left))}return _},ts.prototype.showSelection=function(m){var x=this.cm.display;Y(x.cursorDiv,m.cursors),Y(x.selectionDiv,m.selection),m.teTop!=null&&(this.wrapper.style.top=m.teTop+"px",this.wrapper.style.left=m.teLeft+"px")},ts.prototype.reset=function(m){if(!(this.contextMenuPending||this.composing&&m)){var x=this.cm;if(this.resetting=!0,x.somethingSelected()){this.prevInput="";var S=x.getSelection();this.textarea.value=S,x.state.focused&&de(this.textarea),c&&d>=9&&(this.hasSelection=S)}else m||(this.prevInput=this.textarea.value="",c&&d>=9&&(this.hasSelection=null));this.resetting=!1}},ts.prototype.getField=function(){return this.textarea},ts.prototype.supportsTouch=function(){return!1},ts.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!D||ee(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},ts.prototype.blur=function(){this.textarea.blur()},ts.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ts.prototype.receivedFocus=function(){this.slowPoll()},ts.prototype.slowPoll=function(){var m=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){m.poll(),m.cm.state.focused&&m.slowPoll()})},ts.prototype.fastPoll=function(){var m=!1,x=this;x.pollingFast=!0,x.polling.set(20,function S(){x.poll()||m?(x.pollingFast=!1,x.slowPoll()):(m=!0,x.polling.set(60,S))})},ts.prototype.poll=function(){var m=this,x=this.cm,S=this.textarea,_=this.prevInput;if(this.contextMenuPending||this.resetting||!x.state.focused||Kr(S)&&!_&&!this.composing||x.isReadOnly()||x.options.disableInput||x.state.keySeq)return!1;var C=S.value;if(C==_&&!x.somethingSelected())return!1;if(c&&d>=9&&this.hasSelection===C||k&&/[\uf700-\uf7ff]/.test(C))return x.display.input.reset(),!1;if(x.doc.sel==x.display.selForContextMenu){var M=C.charCodeAt(0);if(M!=8203||_||(_=""),M==8666)return this.reset(),this.cm.execCommand("undo")}for(var N=0,j=Math.min(_.length,C.length);N<j&&_.charCodeAt(N)==C.charCodeAt(N);)++N;return Uo(x,function(){Sy(x,C.slice(N),_.length-N,null,m.composing?"*compose":null),C.length>1e3||C.indexOf(`
`)>-1?S.value=m.prevInput="":m.prevInput=C,m.composing&&(m.composing.range.clear(),m.composing.range=x.markText(m.composing.start,x.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ts.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ts.prototype.onKeyPress=function(){c&&d>=9&&(this.hasSelection=null),this.fastPoll()},ts.prototype.onContextMenu=function(m){var x=this,S=x.cm,_=S.display,C=x.textarea;x.contextMenuPending&&x.contextMenuPending();var M=Wc(S,m),N=_.scroller.scrollTop;if(M&&!y){S.options.resetSelectionOnContextMenu&&S.doc.sel.contains(M)==-1&&_s(S,Vs)(S.doc,Xu(M),ht);var j,V=C.style.cssText,W=x.wrapper.style.cssText,ce=x.wrapper.offsetParent.getBoundingClientRect();if(x.wrapper.style.cssText="position: static",C.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(m.clientY-ce.top-5)+"px; left: "+(m.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,h&&(j=C.ownerDocument.defaultView.scrollY),_.input.focus(),h&&C.ownerDocument.defaultView.scrollTo(null,j),_.input.reset(),S.somethingSelected()||(C.value=x.prevInput=" "),x.contextMenuPending=ve,_.selForContextMenu=S.doc.sel,clearTimeout(_.detectingSelectAll),c&&d>=9&&Se(),L){Tn(m);var fe=function(){We(window,"mouseup",fe),setTimeout(ve,20)};De(window,"mouseup",fe)}else setTimeout(ve,50)}function Se(){if(C.selectionStart!=null){var $e=S.somethingSelected(),Ne=""+($e?C.value:"");C.value="",C.value=Ne,x.prevInput=$e?"":"",C.selectionStart=1,C.selectionEnd=Ne.length,_.selForContextMenu=S.doc.sel}}function ve(){if(x.contextMenuPending==ve&&(x.contextMenuPending=!1,x.wrapper.style.cssText=W,C.style.cssText=V,c&&d<9&&_.scrollbars.setScrollTop(_.scroller.scrollTop=N),C.selectionStart!=null)){(!c||c&&d<9)&&Se();var $e=0,Ne=function(){_.selForContextMenu==S.doc.sel&&C.selectionStart==0&&C.selectionEnd>0&&x.prevInput==""?_s(S,fx)(S):$e++<10?_.detectingSelectAll=setTimeout(Ne,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(Ne,200)}}},ts.prototype.readOnlyChanged=function(m){m||this.reset(),this.textarea.disabled=m=="nocursor",this.textarea.readOnly=!!m},ts.prototype.setUneditable=function(){},ts.prototype.needsContentAttribute=!1,function(m){var x=m.optionHandlers;function S(_,C,M,N){m.defaults[_]=C,M&&(x[_]=N?function(j,V,W){W!=vd&&M(j,V,W)}:M)}m.defineOption=S,m.Init=vd,S("value","",function(_,C){return _.setValue(C)},!0),S("mode",null,function(_,C){_.doc.modeOption=C,dy(_)},!0),S("indentUnit",2,dy,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(_){Fh(_),Sh(_),_o(_)},!0),S("lineSeparator",null,function(_,C){if(_.doc.lineSep=C,C){var M=[],N=_.doc.first;_.doc.iter(function(V){for(var W=0;;){var ce=V.text.indexOf(C,W);if(ce==-1)break;W=ce+C.length,M.push(Xe(N,ce))}N++});for(var j=M.length-1;j>=0;j--)pd(_.doc,C,M[j],Xe(M[j].line,M[j].ch+C.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(_,C,M){_.state.specialChars=new RegExp(C.source+(C.test("	")?"":"|	"),"g"),M!=vd&&_.refresh()}),S("specialCharPlaceholder",Ai,function(_){return _.refresh()},!0),S("electricChars",!0),S("inputStyle",D?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(_,C){return _.getInputField().spellcheck=C},!0),S("autocorrect",!1,function(_,C){return _.getInputField().autocorrect=C},!0),S("autocapitalize",!1,function(_,C){return _.getInputField().autocapitalize=C},!0),S("rtlMoveVisually",!O),S("wholeLineUpdateBefore",!0),S("theme","default",function(_){Bx(_),Rh(_)},!0),S("keyMap","default",function(_,C,M){var N=Nm(C),j=M!=vd&&Nm(M);j&&j.detach&&j.detach(_,N),N.attach&&N.attach(_,j||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,jS,!0),S("gutters",[],function(_,C){_.display.gutterSpecs=cy(C,_.options.lineNumbers),Rh(_)},!0),S("fixedGutter",!0,function(_,C){_.display.gutters.style.left=C?J0(_.display)+"px":"0",_.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(_){return cd(_)},!0),S("scrollbarStyle","native",function(_){Ub(_),cd(_),_.display.scrollbars.setScrollTop(_.doc.scrollTop),_.display.scrollbars.setScrollLeft(_.doc.scrollLeft)},!0),S("lineNumbers",!1,function(_,C){_.display.gutterSpecs=cy(_.options.gutters,C),Rh(_)},!0),S("firstLineNumber",1,Rh,!0),S("lineNumberFormatter",function(_){return _},Rh,!0),S("showCursorWhenSelecting",!1,Ah,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(_,C){C=="nocursor"&&(ld(_),_.display.input.blur()),_.display.input.readOnlyChanged(C)}),S("screenReaderLabel",null,function(_,C){C=C===""?null:C,_.display.input.screenReaderLabelChanged(C)}),S("disableInput",!1,function(_,C){C||_.display.input.reset()},!0),S("dragDrop",!0,zS),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,Ah,!0),S("singleCursorHeightPerLine",!0,Ah,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,Fh,!0),S("addModeClass",!1,Fh,!0),S("pollInterval",100),S("undoDepth",200,function(_,C){return _.doc.history.undoDepth=C}),S("historyEventDelay",1250),S("viewportMargin",10,function(_){return _.refresh()},!0),S("maxHighlightLength",1e4,Fh,!0),S("moveInputWithCursor",!0,function(_,C){C||_.display.input.resetPosition()}),S("tabindex",null,function(_,C){return _.display.input.getField().tabIndex=C||""}),S("autofocus",null),S("direction","ltr",function(_,C){return _.doc.setDirection(C)},!0),S("phrases",null)}(Ri),function(m){var x=m.optionHandlers,S=m.helpers={};m.prototype={constructor:m,focus:function(){He(this).focus(),this.display.input.focus()},setOption:function(_,C){var M=this.options,N=M[_];M[_]==C&&_!="mode"||(M[_]=C,x.hasOwnProperty(_)&&_s(this,x[_])(this,C,N),tt(this,"optionChange",this,_))},getOption:function(_){return this.options[_]},getDoc:function(){return this.doc},addKeyMap:function(_,C){this.state.keyMaps[C?"push":"unshift"](Nm(_))},removeKeyMap:function(_){for(var C=this.state.keyMaps,M=0;M<C.length;++M)if(C[M]==_||C[M].name==_)return C.splice(M,1),!0},addOverlay:ao(function(_,C){var M=_.token?_:m.getMode(this.options,_);if(M.startState)throw new Error("Overlays may not be stateful.");(function(N,j,V){for(var W=0,ce=V(j);W<N.length&&V(N[W])<=ce;)W++;N.splice(W,0,j)})(this.state.overlays,{mode:M,modeSpec:_,opaque:C&&C.opaque,priority:C&&C.priority||0},function(N){return N.priority}),this.state.modeGen++,_o(this)}),removeOverlay:ao(function(_){for(var C=this.state.overlays,M=0;M<C.length;++M){var N=C[M].modeSpec;if(N==_||typeof _=="string"&&N.name==_)return C.splice(M,1),this.state.modeGen++,void _o(this)}}),indentLine:ao(function(_,C,M){typeof C!="string"&&typeof C!="number"&&(C=C==null?this.options.smartIndent?"smart":"prev":C?"add":"subtract"),ci(this.doc,_)&&Gh(this,_,C,M)}),indentSelection:ao(function(_){for(var C=this.doc.sel.ranges,M=-1,N=0;N<C.length;N++){var j=C[N];if(j.empty())j.head.line>M&&(Gh(this,j.head.line,_,!0),M=j.head.line,N==this.doc.sel.primIndex&&ud(this));else{var V=j.from(),W=j.to(),ce=Math.max(M,V.line);M=Math.min(this.lastLine(),W.line-(W.ch?0:1))+1;for(var fe=ce;fe<M;++fe)Gh(this,fe,_);var Se=this.doc.sel.ranges;V.ch==0&&C.length==Se.length&&Se[N].from().ch>0&&gy(this.doc,N,new Pr(V,Se[N].to()),ht)}}}),getTokenAt:function(_,C){return hs(this,_,C)},getLineTokens:function(_,C){return hs(this,Xe(_),C,!0)},getTokenTypeAt:function(_){_=qt(this.doc,_);var C,M=xo(this,et(this.doc,_.line)),N=0,j=(M.length-1)/2,V=_.ch;if(V==0)C=M[2];else for(;;){var W=N+j>>1;if((W?M[2*W-1]:0)>=V)j=W;else{if(!(M[2*W+1]<V)){C=M[2*W+2];break}N=W+1}}var ce=C?C.indexOf("overlay "):-1;return ce<0?C:ce==0?null:C.slice(0,ce-1)},getModeAt:function(_){var C=this.doc.mode;return C.innerMode?m.innerMode(C,this.getTokenAt(_).state).mode:C},getHelper:function(_,C){return this.getHelpers(_,C)[0]},getHelpers:function(_,C){var M=[];if(!S.hasOwnProperty(C))return M;var N=S[C],j=this.getModeAt(_);if(typeof j[C]=="string")N[j[C]]&&M.push(N[j[C]]);else if(j[C])for(var V=0;V<j[C].length;V++){var W=N[j[C][V]];W&&M.push(W)}else j.helperType&&N[j.helperType]?M.push(N[j.helperType]):N[j.name]&&M.push(N[j.name]);for(var ce=0;ce<N._global.length;ce++){var fe=N._global[ce];fe.pred(j,this)&&Pe(M,fe.val)==-1&&M.push(fe.val)}return M},getStateAfter:function(_,C){var M=this.doc;return no(this,(_=nr(M,_??M.first+M.size-1))+1,C).state},cursorCoords:function(_,C){var M=this.doc.sel.primary();return dl(this,_==null?M.head:typeof _=="object"?qt(this.doc,_):_?M.from():M.to(),C||"page")},charCoords:function(_,C){return Em(this,qt(this.doc,_),C||"page")},coordsChar:function(_,C){return X0(this,(_=Db(this,_,C||"page")).left,_.top)},lineAtHeight:function(_,C){return _=Db(this,{top:_,left:0},C||"page").top,Sr(this.doc,_+this.display.viewOffset)},heightAtLine:function(_,C,M){var N,j=!1;if(typeof _=="number"){var V=this.doc.first+this.doc.size-1;_<this.doc.first?_=this.doc.first:_>V&&(_=V,j=!0),N=et(this.doc,_)}else N=_;return _m(this,N,{top:0,left:0},C||"page",M||j).top+(j?this.doc.height-me(N):0)},defaultTextHeight:function(){return od(this.display)},defaultCharWidth:function(){return ad(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(_,C,M,N,j){var V,W,ce,fe=this.display,Se=(_=dl(this,qt(this.doc,_))).bottom,ve=_.left;if(C.style.position="absolute",C.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(C),fe.sizer.appendChild(C),N=="over")Se=_.top;else if(N=="above"||N=="near"){var $e=Math.max(fe.wrapper.clientHeight,this.doc.height),Ne=Math.max(fe.sizer.clientWidth,fe.lineSpace.clientWidth);(N=="above"||_.bottom+C.offsetHeight>$e)&&_.top>C.offsetHeight?Se=_.top-C.offsetHeight:_.bottom+C.offsetHeight<=$e&&(Se=_.bottom),ve+C.offsetWidth>Ne&&(ve=Ne-C.offsetWidth)}C.style.top=Se+"px",C.style.left=C.style.right="",j=="right"?(ve=fe.sizer.clientWidth-C.offsetWidth,C.style.right="0px"):(j=="left"?ve=0:j=="middle"&&(ve=(fe.sizer.clientWidth-C.offsetWidth)/2),C.style.left=ve+"px"),M&&(V=this,W={left:ve,top:Se,right:ve+C.offsetWidth,bottom:Se+C.offsetHeight},(ce=iy(V,W)).scrollTop!=null&&kh(V,ce.scrollTop),ce.scrollLeft!=null&&Xc(V,ce.scrollLeft))},triggerOnKeyDown:ao(Fx),triggerOnKeyPress:ao(Mx),triggerOnKeyUp:Ox,triggerOnMouseDown:ao($x),execCommand:function(_){if(jh.hasOwnProperty(_))return jh[_].call(null,this)},triggerElectric:ao(function(_){Ux(this,_)}),findPosH:function(_,C,M,N){var j=1;C<0&&(j=-1,C=-C);for(var V=qt(this.doc,_),W=0;W<C&&!(V=Ay(this.doc,V,j,M,N)).hitSide;++W);return V},moveH:ao(function(_,C){var M=this;this.extendSelectionsBy(function(N){return M.display.shift||M.doc.extend||N.empty()?Ay(M.doc,N.head,_,C,M.options.rtlMoveVisually):_<0?N.from():N.to()},Vt)}),deleteH:ao(function(_,C){var M=this.doc.sel,N=this.doc;M.somethingSelected()?N.replaceSelection("",null,"+delete"):yd(this,function(j){var V=Ay(N,j.head,_,C,!1);return _<0?{from:V,to:j.head}:{from:j.head,to:V}})}),findPosV:function(_,C,M,N){var j=1,V=N;C<0&&(j=-1,C=-C);for(var W=qt(this.doc,_),ce=0;ce<C;++ce){var fe=dl(this,W,"div");if(V==null?V=fe.left:fe.left=V,(W=Vx(this,fe,j,M)).hitSide)break}return W},moveV:ao(function(_,C){var M=this,N=this.doc,j=[],V=!this.display.shift&&!N.extend&&N.sel.somethingSelected();if(N.extendSelectionsBy(function(ce){if(V)return _<0?ce.from():ce.to();var fe=dl(M,ce.head,"div");ce.goalColumn!=null&&(fe.left=ce.goalColumn),j.push(fe.left);var Se=Vx(M,fe,_,C);return C=="page"&&ce==N.sel.primary()&&sy(M,Em(M,Se,"div").top-fe.top),Se},Vt),j.length)for(var W=0;W<N.sel.ranges.length;W++)N.sel.ranges[W].goalColumn=j[W]}),findWordAt:function(_){var C=et(this.doc,_.line).text,M=_.ch,N=_.ch;if(C){var j=this.getHelper(_,"wordChars");_.sticky!="before"&&N!=C.length||!M?++N:--M;for(var V=C.charAt(M),W=re(V,j)?function(ce){return re(ce,j)}:/\s/.test(V)?function(ce){return/\s/.test(ce)}:function(ce){return!/\s/.test(ce)&&!re(ce)};M>0&&W(C.charAt(M-1));)--M;for(;N<C.length&&W(C.charAt(N));)++N}return new Pr(Xe(_.line,M),Xe(_.line,N))},toggleOverwrite:function(_){_!=null&&_==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):U(this.display.cursorDiv,"CodeMirror-overwrite"),tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ee(ze(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ao(function(_,C){Ch(this,_,C)}),getScrollInfo:function(){var _=this.display.scroller;return{left:_.scrollLeft,top:_.scrollTop,height:_.scrollHeight-xi(this)-this.display.barHeight,width:_.scrollWidth-xi(this)-this.display.barWidth,clientHeight:Te(this),clientWidth:Li(this)}},scrollIntoView:ao(function(_,C){_==null?(_={from:this.doc.sel.primary().head,to:null},C==null&&(C=this.options.cursorScrollMargin)):typeof _=="number"?_={from:Xe(_,0),to:null}:_.from==null&&(_={from:_,to:null}),_.to||(_.to=_.from),_.margin=C||0,_.from.line!=null?function(M,N){Tm(M),M.curOp.scrollToPos=N}(this,_):Nb(this,_.from,_.to,_.margin)}),setSize:ao(function(_,C){var M=this,N=function(V){return typeof V=="number"||/^\d+$/.test(String(V))?V+"px":V};_!=null&&(this.display.wrapper.style.width=N(_)),C!=null&&(this.display.wrapper.style.height=N(C)),this.options.lineWrapping&&Cb(this);var j=this.display.viewFrom;this.doc.iter(j,this.display.viewTo,function(V){if(V.widgets){for(var W=0;W<V.widgets.length;W++)if(V.widgets[W].noHScroll){Wu(M,j,"widget");break}}++j}),this.curOp.forceUpdate=!0,tt(this,"refresh",this)}),operation:function(_){return Uo(this,_)},startOperation:function(){return Kc(this)},endOperation:function(){return Jc(this)},refresh:ao(function(){var _=this.display.cachedTextHeight;_o(this),this.curOp.forceUpdate=!0,Sh(this),Ch(this,this.doc.scrollLeft,this.doc.scrollTop),ly(this.display),(_==null||Math.abs(_-od(this.display))>.5||this.options.lineWrapping)&&Q0(this),tt(this,"refresh",this)}),swapDoc:ao(function(_){var C=this.doc;return C.cm=null,this.state.selectingText&&this.state.selectingText(),Jb(this,_),Sh(this),this.display.input.reset(),Ch(this,_.scrollLeft,_.scrollTop),this.curOp.forceScroll=!0,Hr(this,"swapDoc",this,C),C}),phrase:function(_){var C=this.options.phrases;return C&&Object.prototype.hasOwnProperty.call(C,_)?C[_]:_},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Qt(m),m.registerHelper=function(_,C,M){S.hasOwnProperty(_)||(S[_]=m[_]={_global:[]}),S[_][C]=M},m.registerGlobalHelper=function(_,C,M,N){m.registerHelper(_,C,N),S[_]._global.push({pred:M,val:N})}}(Ri);var qS="iter insert remove copy getEditor constructor".split(" ");for(var qm in Eo.prototype)Eo.prototype.hasOwnProperty(qm)&&Pe(qS,qm)<0&&(Ri.prototype[qm]=function(m){return function(){return m.apply(this.doc,arguments)}}(Eo.prototype[qm]));return Qt(Eo),Ri.inputStyles={textarea:ts,contenteditable:Qr},Ri.defineMode=function(m){Ri.defaults.mode||m=="null"||(Ri.defaults.mode=m),to.apply(this,arguments)},Ri.defineMIME=function(m,x){$r[m]=x},Ri.defineMode("null",function(){return{token:function(m){return m.skipToEnd()}}}),Ri.defineMIME("text/plain","null"),Ri.defineExtension=function(m,x){Ri.prototype[m]=x},Ri.defineDocExtension=function(m,x){Eo.prototype[m]=x},Ri.fromTextArea=function(m,x){if((x=x?we(x):{}).value=m.value,!x.tabindex&&m.tabIndex&&(x.tabindex=m.tabIndex),!x.placeholder&&m.placeholder&&(x.placeholder=m.placeholder),x.autofocus==null){var S=ee(m.ownerDocument);x.autofocus=S==m||m.getAttribute("autofocus")!=null&&S==document.body}function _(){m.value=j.getValue()}var C;if(m.form&&(De(m.form,"submit",_),!x.leaveSubmitMethodAlone)){var M=m.form;C=M.submit;try{var N=M.submit=function(){_(),M.submit=C,M.submit(),M.submit=N}}catch{}}x.finishInit=function(V){V.save=_,V.getTextArea=function(){return m},V.toTextArea=function(){V.toTextArea=isNaN,_(),m.parentNode.removeChild(V.getWrapperElement()),m.style.display="",m.form&&(We(m.form,"submit",_),x.leaveSubmitMethodAlone||typeof m.form.submit!="function"||(m.form.submit=C))}},m.style.display="none";var j=Ri(function(V){return m.parentNode.insertBefore(V,m.nextSibling)},x);return j},function(m){m.off=We,m.on=De,m.wheelEventPixels=DS,m.Doc=Eo,m.splitLines=gn,m.countColumn=Ie,m.findColumn=Mn,m.isWordChar=J,m.Pass=At,m.signal=tt,m.Line=pn,m.changeEnd=Zu,m.scrollbarModel=jb,m.Pos=Xe,m.cmpPos=pt,m.modes=tr,m.mimeModes=$r,m.resolveMode=ge,m.getMode=Le,m.modeExtensions=it,m.extendMode=Ke,m.copyState=Et,m.startState=en,m.innerMode=an,m.commands=jh,m.keyMap=pu,m.keyName=kx,m.isModifierKey=Ax,m.lookupKey=gd,m.normalizeKeyMap=NS,m.StringStream=wt,m.SharedTextMarker=Nh,m.TextMarker=Ju,m.LineWidget=Ph,m.e_preventDefault=rn,m.e_stopPropagation=sn,m.e_stop=Tn,m.addClass=z,m.contains=le,m.rmClass=U,m.keyNames=Qu}(Ri),Ri.version="5.65.9",Ri})},{}],11:[function(n,r,i){var s;s=function(o){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;o.defineMode("gfm",function(l,u){var f=0,c={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(p){return{code:p.code,codeBlock:p.codeBlock,ateSpace:p.ateSpace}},token:function(p,g){if(g.combineTokens=null,g.codeBlock)return p.match(/^```+/)?(g.codeBlock=!1,null):(p.skipToEnd(),null);if(p.sol()&&(g.code=!1),p.sol()&&p.match(/^```+/))return p.skipToEnd(),g.codeBlock=!0,null;if(p.peek()==="`"){p.next();var v=p.pos;p.eatWhile("`");var y=1+p.pos-v;return g.code?y===f&&(g.code=!1):(f=y,g.code=!0),null}return g.code?(p.next(),null):p.eatSpace()?(g.ateSpace=!0,null):(p.sol()||g.ateSpace)&&(g.ateSpace=!1,u.gitHubSpice!==!1)&&(p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||p.match(a)&&p.string.slice(p.start-2,p.start)!="]("&&(p.start==0||/\W/.test(p.string.charAt(p.start-1)))?(g.combineTokens=!0,"link"):(p.next(),null)},blankLine:function(p){return p.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var h in u)d[h]=u[h];return d.name="markdown",o.overlayMode(o.getMode(l,d),c)},"markdown"),o.defineMIME("text/x-gfm","gfm")},typeof i=="object"&&typeof r=="object"?s(n("../../lib/codemirror"),n("../markdown/markdown"),n("../../addon/mode/overlay")):s(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(n,r,i){var s;s=function(o){o.defineMode("markdown",function(a,l){var u=o.getMode(a,"text/html"),f=u.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var c={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var d in c)c.hasOwnProperty(d)&&l.tokenTypeOverrides[d]&&(c[d]=l.tokenTypeOverrides[d]);var h=/^([*\-_])(?:\s*\1){2,}\s*$/,p=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,g=/^\[(x| )\](?=\s)/i,v=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ {0,3}(?:\={1,}|-{2,})\s*$/,b=/^[^#!\[\]*_\\<>` "'(~:]+/,w=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,E=/^\s*\[[^\]]+?\]:.*$/,A=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function T(ee,z,he){return z.f=z.inline=he,he(ee,z)}function D(ee,z,he){return z.f=z.block=he,he(ee,z)}function k(ee){if(ee.linkTitle=!1,ee.linkHref=!1,ee.linkText=!1,ee.em=!1,ee.strong=!1,ee.strikethrough=!1,ee.quote=0,ee.indentedCode=!1,ee.f==O){var z=f;if(!z){var he=o.innerMode(u,ee.htmlState);z=he.mode.name=="xml"&&he.state.tagStart===null&&!he.state.context&&he.state.tokenize.isInText}z&&(ee.f=$,ee.block=R,ee.htmlState=null)}return ee.trailingSpace=0,ee.trailingSpaceNewLine=!1,ee.prevLine=ee.thisLine,ee.thisLine={stream:null},null}function R(ee,z){var he,de=ee.column()===z.indentation,ze=!(he=z.prevLine.stream)||!/\S/.test(he.string),He=z.indentedCode,je=z.prevLine.hr,we=z.list!==!1,Ie=(z.listStack[z.listStack.length-1]||0)+3;z.indentedCode=!1;var qe=z.indentation;if(z.indentationDiff===null&&(z.indentationDiff=z.indentation,we)){for(z.list=null;qe<z.listStack[z.listStack.length-1];)z.listStack.pop(),z.listStack.length?z.indentation=z.listStack[z.listStack.length-1]:z.list=!1;z.list!==!1&&(z.indentationDiff=qe-z.listStack[z.listStack.length-1])}var Pe=!(ze||je||z.prevLine.header||we&&He||z.prevLine.fencedCodeEnd),At=(z.list===!1||je||ze)&&z.indentation<=Ie&&ee.match(h),ht=null;if(z.indentationDiff>=4&&(He||z.prevLine.fencedCodeEnd||z.prevLine.header||ze))return ee.skipToEnd(),z.indentedCode=!0,c.code;if(ee.eatSpace())return null;if(de&&z.indentation<=Ie&&(ht=ee.match(v))&&ht[1].length<=6)return z.quote=0,z.header=ht[1].length,z.thisLine.header=!0,l.highlightFormatting&&(z.formatting="header"),z.f=z.inline,K(z);if(z.indentation<=Ie&&ee.eat(">"))return z.quote=de?1:z.quote+1,l.highlightFormatting&&(z.formatting="quote"),ee.eatSpace(),K(z);if(!At&&!z.setext&&de&&z.indentation<=Ie&&(ht=ee.match(p))){var nn=ht[1]?"ol":"ul";return z.indentation=qe+ee.current().length,z.list=!0,z.quote=0,z.listStack.push(z.indentation),z.em=!1,z.strong=!1,z.code=!1,z.strikethrough=!1,l.taskLists&&ee.match(g,!1)&&(z.taskList=!0),z.f=z.inline,l.highlightFormatting&&(z.formatting=["list","list-"+nn]),K(z)}return de&&z.indentation<=Ie&&(ht=ee.match(w,!0))?(z.quote=0,z.fencedEndRE=new RegExp(ht[1]+"+ *$"),z.localMode=l.fencedCodeBlockHighlighting&&function(Vt){if(o.findModeByName){var Mn=o.findModeByName(Vt);Mn&&(Vt=Mn.mime||Mn.mimes[0])}var Ze=o.getMode(a,Vt);return Ze.name=="null"?null:Ze}(ht[2]||l.fencedCodeBlockDefaultMode),z.localMode&&(z.localState=o.startState(z.localMode)),z.f=z.block=B,l.highlightFormatting&&(z.formatting="code-block"),z.code=-1,K(z)):z.setext||!(Pe&&we||z.quote||z.list!==!1||z.code||At||E.test(ee.string))&&(ht=ee.lookAhead(1))&&(ht=ht.match(y))?(z.setext?(z.header=z.setext,z.setext=0,ee.skipToEnd(),l.highlightFormatting&&(z.formatting="header")):(z.header=ht[0].charAt(0)=="="?1:2,z.setext=z.header),z.thisLine.header=!0,z.f=z.inline,K(z)):At?(ee.skipToEnd(),z.hr=!0,z.thisLine.hr=!0,c.hr):ee.peek()==="["?T(ee,z,Y):T(ee,z,z.inline)}function O(ee,z){var he=u.token(ee,z.htmlState);if(!f){var de=o.innerMode(u,z.htmlState);(de.mode.name=="xml"&&de.state.tagStart===null&&!de.state.context&&de.state.tokenize.isInText||z.md_inside&&ee.current().indexOf(">")>-1)&&(z.f=$,z.block=R,z.htmlState=null)}return he}function B(ee,z){var he,de=z.listStack[z.listStack.length-1]||0,ze=z.indentation<de,He=de+3;return z.fencedEndRE&&z.indentation<=He&&(ze||ee.match(z.fencedEndRE))?(l.highlightFormatting&&(z.formatting="code-block"),ze||(he=K(z)),z.localMode=z.localState=null,z.block=R,z.f=$,z.fencedEndRE=null,z.code=0,z.thisLine.fencedCodeEnd=!0,ze?D(ee,z,z.block):he):z.localMode?z.localMode.token(ee,z.localState):(ee.skipToEnd(),c.code)}function K(ee){var z=[];if(ee.formatting){z.push(c.formatting),typeof ee.formatting=="string"&&(ee.formatting=[ee.formatting]);for(var he=0;he<ee.formatting.length;he++)z.push(c.formatting+"-"+ee.formatting[he]),ee.formatting[he]==="header"&&z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.header),ee.formatting[he]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.quote):z.push("error"))}if(ee.taskOpen)return z.push("meta"),z.length?z.join(" "):null;if(ee.taskClosed)return z.push("property"),z.length?z.join(" "):null;if(ee.linkHref?z.push(c.linkHref,"url"):(ee.strong&&z.push(c.strong),ee.em&&z.push(c.em),ee.strikethrough&&z.push(c.strikethrough),ee.emoji&&z.push(c.emoji),ee.linkText&&z.push(c.linkText),ee.code&&z.push(c.code),ee.image&&z.push(c.image),ee.imageAltText&&z.push(c.imageAltText,"link"),ee.imageMarker&&z.push(c.imageMarker)),ee.header&&z.push(c.header,c.header+"-"+ee.header),ee.quote&&(z.push(c.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.quote+"-"+ee.quote):z.push(c.quote+"-"+l.maxBlockquoteDepth)),ee.list!==!1){var de=(ee.listStack.length-1)%3;de?de===1?z.push(c.list2):z.push(c.list3):z.push(c.list1)}return ee.trailingSpaceNewLine?z.push("trailing-space-new-line"):ee.trailingSpace&&z.push("trailing-space-"+(ee.trailingSpace%2?"a":"b")),z.length?z.join(" "):null}function L(ee,z){if(ee.match(b,!0))return K(z)}function $(ee,z){var he=z.text(ee,z);if(he!==void 0)return he;if(z.list)return z.list=null,K(z);if(z.taskList)return ee.match(g,!0)[1]===" "?z.taskOpen=!0:z.taskClosed=!0,l.highlightFormatting&&(z.formatting="task"),z.taskList=!1,K(z);if(z.taskOpen=!1,z.taskClosed=!1,z.header&&ee.match(/^#+$/,!0))return l.highlightFormatting&&(z.formatting="header"),K(z);var de=ee.next();if(z.linkTitle){z.linkTitle=!1;var ze=de;de==="("&&(ze=")");var He="^\\s*(?:[^"+(ze=(ze+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+ze;if(ee.match(new RegExp(He),!0))return c.linkHref}if(de==="`"){var je=z.formatting;l.highlightFormatting&&(z.formatting="code"),ee.eatWhile("`");var we=ee.current().length;if(z.code!=0||z.quote&&we!=1){if(we==z.code){var Ie=K(z);return z.code=0,Ie}return z.formatting=je,K(z)}return z.code=we,K(z)}if(z.code)return K(z);if(de==="\\"&&(ee.next(),l.highlightFormatting)){var qe=K(z),Pe=c.formatting+"-escape";return qe?qe+" "+Pe:Pe}if(de==="!"&&ee.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return z.imageMarker=!0,z.image=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(de==="["&&z.imageMarker&&ee.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return z.imageMarker=!1,z.imageAltText=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(de==="]"&&z.imageAltText){l.highlightFormatting&&(z.formatting="image");var qe=K(z);return z.imageAltText=!1,z.image=!1,z.inline=z.f=U,qe}if(de==="["&&!z.image)return z.linkText&&ee.match(/^.*?\]/)||(z.linkText=!0,l.highlightFormatting&&(z.formatting="link")),K(z);if(de==="]"&&z.linkText){l.highlightFormatting&&(z.formatting="link");var qe=K(z);return z.linkText=!1,z.inline=z.f=ee.match(/\(.*?\)| ?\[.*?\]/,!1)?U:$,qe}if(de==="<"&&ee.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=I,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkInline;if(de==="<"&&ee.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=I,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkEmail;if(l.xml&&de==="<"&&ee.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var At=ee.string.indexOf(">",ee.pos);if(At!=-1){var ht=ee.string.substring(ee.start,At);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(ht)&&(z.md_inside=!0)}return ee.backUp(1),z.htmlState=o.startState(u),D(ee,z,O)}if(l.xml&&de==="<"&&ee.match(/^\/\w*?>/))return z.md_inside=!1,"tag";if(de==="*"||de==="_"){for(var nn=1,Vt=ee.pos==1?" ":ee.string.charAt(ee.pos-2);nn<3&&ee.eat(de);)nn++;var Mn=ee.peek()||" ",Ze=!/\s/.test(Mn)&&(!A.test(Mn)||/\s/.test(Vt)||A.test(Vt)),pe=!/\s/.test(Vt)&&(!A.test(Vt)||/\s/.test(Mn)||A.test(Mn)),ie=null,oe=null;if(nn%2&&(z.em||!Ze||de!=="*"&&pe&&!A.test(Vt)?z.em!=de||!pe||de!=="*"&&Ze&&!A.test(Mn)||(ie=!1):ie=!0),nn>1&&(z.strong||!Ze||de!=="*"&&pe&&!A.test(Vt)?z.strong!=de||!pe||de!=="*"&&Ze&&!A.test(Mn)||(oe=!1):oe=!0),oe!=null||ie!=null)return l.highlightFormatting&&(z.formatting=ie==null?"strong":oe==null?"em":"strong em"),ie===!0&&(z.em=de),oe===!0&&(z.strong=de),Ie=K(z),ie===!1&&(z.em=!1),oe===!1&&(z.strong=!1),Ie}else if(de===" "&&(ee.eat("*")||ee.eat("_"))){if(ee.peek()===" ")return K(z);ee.backUp(1)}if(l.strikethrough){if(de==="~"&&ee.eatWhile(de)){if(z.strikethrough)return l.highlightFormatting&&(z.formatting="strikethrough"),Ie=K(z),z.strikethrough=!1,Ie;if(ee.match(/^[^\s]/,!1))return z.strikethrough=!0,l.highlightFormatting&&(z.formatting="strikethrough"),K(z)}else if(de===" "&&ee.match("~~",!0)){if(ee.peek()===" ")return K(z);ee.backUp(2)}}if(l.emoji&&de===":"&&ee.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){z.emoji=!0,l.highlightFormatting&&(z.formatting="emoji");var be=K(z);return z.emoji=!1,be}return de===" "&&(ee.match(/^ +$/,!1)?z.trailingSpace++:z.trailingSpace&&(z.trailingSpaceNewLine=!0)),K(z)}function I(ee,z){if(ee.next()===">"){z.f=z.inline=$,l.highlightFormatting&&(z.formatting="link");var he=K(z);return he?he+=" ":he="",he+c.linkInline}return ee.match(/^[^>]+/,!0),c.linkInline}function U(ee,z){if(ee.eatSpace())return null;var he,de=ee.next();return de==="("||de==="["?(z.f=z.inline=(he=de==="("?")":"]",function(ze,He){if(ze.next()===he){He.f=He.inline=$,l.highlightFormatting&&(He.formatting="link-string");var je=K(He);return He.linkHref=!1,je}return ze.match(q[he]),He.linkHref=!0,K(He)}),l.highlightFormatting&&(z.formatting="link-string"),z.linkHref=!0,K(z)):"error"}var q={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Y(ee,z){return ee.match(/^([^\]\\]|\\.)*\]:/,!1)?(z.f=X,ee.next(),l.highlightFormatting&&(z.formatting="link"),z.linkText=!0,K(z)):T(ee,z,$)}function X(ee,z){if(ee.match("]:",!0)){z.f=z.inline=te,l.highlightFormatting&&(z.formatting="link");var he=K(z);return z.linkText=!1,he}return ee.match(/^([^\]\\]|\\.)+/,!0),c.linkText}function te(ee,z){return ee.eatSpace()?null:(ee.match(/^[^\s]+/,!0),ee.peek()===void 0?z.linkTitle=!0:ee.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),z.f=z.inline=$,c.linkHref+" url")}var le={startState:function(){return{f:R,prevLine:{stream:null},thisLine:{stream:null},block:R,htmlState:null,indentation:0,inline:$,text:L,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(ee){return{f:ee.f,prevLine:ee.prevLine,thisLine:ee.thisLine,block:ee.block,htmlState:ee.htmlState&&o.copyState(u,ee.htmlState),indentation:ee.indentation,localMode:ee.localMode,localState:ee.localMode?o.copyState(ee.localMode,ee.localState):null,inline:ee.inline,text:ee.text,formatting:!1,linkText:ee.linkText,linkTitle:ee.linkTitle,linkHref:ee.linkHref,code:ee.code,em:ee.em,strong:ee.strong,strikethrough:ee.strikethrough,emoji:ee.emoji,header:ee.header,setext:ee.setext,hr:ee.hr,taskList:ee.taskList,list:ee.list,listStack:ee.listStack.slice(0),quote:ee.quote,indentedCode:ee.indentedCode,trailingSpace:ee.trailingSpace,trailingSpaceNewLine:ee.trailingSpaceNewLine,md_inside:ee.md_inside,fencedEndRE:ee.fencedEndRE}},token:function(ee,z){if(z.formatting=!1,ee!=z.thisLine.stream){if(z.header=0,z.hr=!1,ee.match(/^\s*$/,!0))return k(z),null;if(z.prevLine=z.thisLine,z.thisLine={stream:ee},z.taskList=!1,z.trailingSpace=0,z.trailingSpaceNewLine=!1,!z.localState&&(z.f=z.block,z.f!=O)){var he=ee.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(z.indentation=he,z.indentationDiff=null,he>0)return null}}return z.f(ee,z)},innerMode:function(ee){return ee.block==O?{state:ee.htmlState,mode:u}:ee.localState?{state:ee.localState,mode:ee.localMode}:{state:ee,mode:le}},indent:function(ee,z,he){return ee.block==O&&u.indent?u.indent(ee.htmlState,z,he):ee.localState&&ee.localMode.indent?ee.localMode.indent(ee.localState,z,he):o.Pass},blankLine:k,getType:K,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return le},"xml"),o.defineMIME("text/markdown","markdown"),o.defineMIME("text/x-markdown","markdown")},typeof i=="object"&&typeof r=="object"?s(n("../../lib/codemirror"),n("../xml/xml"),n("../meta")):s(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(n,r,i){(function(s){s.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var o=0;o<s.modeInfo.length;o++){var a=s.modeInfo[o];a.mimes&&(a.mime=a.mimes[0])}s.findModeByMIME=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.mime==l)return f;if(f.mimes){for(var c=0;c<f.mimes.length;c++)if(f.mimes[c]==l)return f}}return/\+xml$/.test(l)?s.findModeByMIME("application/xml"):/\+json$/.test(l)?s.findModeByMIME("application/json"):void 0},s.findModeByExtension=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.ext){for(var c=0;c<f.ext.length;c++)if(f.ext[c]==l)return f}}},s.findModeByFileName=function(l){for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.file&&f.file.test(l))return f}var c=l.lastIndexOf("."),d=c>-1&&l.substring(c+1,l.length);if(d)return s.findModeByExtension(d)},s.findModeByName=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.name.toLowerCase()==l)return f;if(f.alias){for(var c=0;c<f.alias.length;c++)if(f.alias[c].toLowerCase()==l)return f}}}})(typeof i=="object"&&typeof r=="object"?n("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(n,r,i){(function(s){var o={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};s.defineMode("xml",function(l,u){var f,c,d=l.indentUnit,h={},p=u.htmlMode?o:a;for(var g in p)h[g]=p[g];for(var g in u)h[g]=u[g];function v(q,Y){function X(le){return Y.tokenize=le,le(q,Y)}var te=q.next();return te=="<"?q.eat("!")?q.eat("[")?q.match("CDATA[")?X(b("atom","]]>")):null:q.match("--")?X(b("comment","-->")):q.match("DOCTYPE",!0,!0)?(q.eatWhile(/[\w\._\-]/),X(w(1))):null:q.eat("?")?(q.eatWhile(/[\w\._\-]/),Y.tokenize=b("meta","?>"),"meta"):(f=q.eat("/")?"closeTag":"openTag",Y.tokenize=y,"tag bracket"):te=="&"?(q.eat("#")?q.eat("x")?q.eatWhile(/[a-fA-F\d]/)&&q.eat(";"):q.eatWhile(/[\d]/)&&q.eat(";"):q.eatWhile(/[\w\.\-:]/)&&q.eat(";"))?"atom":"error":(q.eatWhile(/[^&<]/),null)}function y(q,Y){var X,te,le=q.next();if(le==">"||le=="/"&&q.eat(">"))return Y.tokenize=v,f=le==">"?"endTag":"selfcloseTag","tag bracket";if(le=="=")return f="equals",null;if(le=="<"){Y.tokenize=v,Y.state=k,Y.tagName=Y.tagStart=null;var ee=Y.tokenize(q,Y);return ee?ee+" tag error":"tag error"}return/[\'\"]/.test(le)?(Y.tokenize=(X=le,te=function(z,he){for(;!z.eol();)if(z.next()==X){he.tokenize=y;break}return"string"},te.isInAttribute=!0,te),Y.stringStartCol=q.column(),Y.tokenize(q,Y)):(q.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function b(q,Y){return function(X,te){for(;!X.eol();){if(X.match(Y)){te.tokenize=v;break}X.next()}return q}}function w(q){return function(Y,X){for(var te;(te=Y.next())!=null;){if(te=="<")return X.tokenize=w(q+1),X.tokenize(Y,X);if(te==">"){if(q==1){X.tokenize=v;break}return X.tokenize=w(q-1),X.tokenize(Y,X)}}return"meta"}}function E(q){return q&&q.toLowerCase()}function A(q,Y,X){this.prev=q.context,this.tagName=Y||"",this.indent=q.indented,this.startOfLine=X,(h.doNotIndent.hasOwnProperty(Y)||q.context&&q.context.noIndent)&&(this.noIndent=!0)}function T(q){q.context&&(q.context=q.context.prev)}function D(q,Y){for(var X;;){if(!q.context||(X=q.context.tagName,!h.contextGrabbers.hasOwnProperty(E(X))||!h.contextGrabbers[E(X)].hasOwnProperty(E(Y))))return;T(q)}}function k(q,Y,X){return q=="openTag"?(X.tagStart=Y.column(),R):q=="closeTag"?O:k}function R(q,Y,X){return q=="word"?(X.tagName=Y.current(),c="tag",L):h.allowMissingTagName&&q=="endTag"?(c="tag bracket",L(q,0,X)):(c="error",R)}function O(q,Y,X){if(q=="word"){var te=Y.current();return X.context&&X.context.tagName!=te&&h.implicitlyClosed.hasOwnProperty(E(X.context.tagName))&&T(X),X.context&&X.context.tagName==te||h.matchClosing===!1?(c="tag",B):(c="tag error",K)}return h.allowMissingTagName&&q=="endTag"?(c="tag bracket",B(q,0,X)):(c="error",K)}function B(q,Y,X){return q!="endTag"?(c="error",B):(T(X),k)}function K(q,Y,X){return c="error",B(q,0,X)}function L(q,Y,X){if(q=="word")return c="attribute",$;if(q=="endTag"||q=="selfcloseTag"){var te=X.tagName,le=X.tagStart;return X.tagName=X.tagStart=null,q=="selfcloseTag"||h.autoSelfClosers.hasOwnProperty(E(te))?D(X,te):(D(X,te),X.context=new A(X,te,le==X.indented)),k}return c="error",L}function $(q,Y,X){return q=="equals"?I:(h.allowMissing||(c="error"),L(q,0,X))}function I(q,Y,X){return q=="string"?U:q=="word"&&h.allowUnquoted?(c="string",L):(c="error",L(q,0,X))}function U(q,Y,X){return q=="string"?U:L(q,0,X)}return v.isInText=!0,{startState:function(q){var Y={tokenize:v,state:k,indented:q||0,tagName:null,tagStart:null,context:null};return q!=null&&(Y.baseIndent=q),Y},token:function(q,Y){if(!Y.tagName&&q.sol()&&(Y.indented=q.indentation()),q.eatSpace())return null;f=null;var X=Y.tokenize(q,Y);return(X||f)&&X!="comment"&&(c=null,Y.state=Y.state(f||X,q,Y),c&&(X=c=="error"?X+" error":c)),X},indent:function(q,Y,X){var te=q.context;if(q.tokenize.isInAttribute)return q.tagStart==q.indented?q.stringStartCol+1:q.indented+d;if(te&&te.noIndent)return s.Pass;if(q.tokenize!=y&&q.tokenize!=v)return X?X.match(/^(\s*)/)[0].length:0;if(q.tagName)return h.multilineTagIndentPastTag!==!1?q.tagStart+q.tagName.length+2:q.tagStart+d*(h.multilineTagIndentFactor||1);if(h.alignCDATA&&/<!\[CDATA\[/.test(Y))return 0;var le=Y&&/^<(\/)?([\w_:\.-]*)/.exec(Y);if(le&&le[1])for(;te;){if(te.tagName==le[2]){te=te.prev;break}if(!h.implicitlyClosed.hasOwnProperty(E(te.tagName)))break;te=te.prev}else if(le)for(;te;){var ee=h.contextGrabbers[E(te.tagName)];if(!ee||!ee.hasOwnProperty(E(le[2])))break;te=te.prev}for(;te&&te.prev&&!te.startOfLine;)te=te.prev;return te?te.indent+d:q.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:h.htmlMode?"html":"xml",helperType:h.htmlMode?"html":"xml",skipAttribute:function(q){q.state==I&&(q.state=L)},xmlCurrentTag:function(q){return q.tagName?{name:q.tagName,close:q.type=="closeTag"}:null},xmlCurrentContext:function(q){for(var Y=[],X=q.context;X;X=X.prev)Y.push(X.tagName);return Y.reverse()}}}),s.defineMIME("text/xml","xml"),s.defineMIME("application/xml","xml"),s.mimeModes.hasOwnProperty("text/html")||s.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(n,r,i){(function(s,o){o(typeof i=="object"&&r!==void 0?i:(s=typeof globalThis<"u"?globalThis:s||self).marked={})})(this,function(s){function o(Ze,pe){for(var ie=0;ie<pe.length;ie++){var oe=pe[ie];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Ze,oe.key,oe)}}function a(Ze,pe){(pe==null||pe>Ze.length)&&(pe=Ze.length);for(var ie=0,oe=new Array(pe);ie<pe;ie++)oe[ie]=Ze[ie];return oe}function l(Ze,pe){var ie=typeof Symbol<"u"&&Ze[Symbol.iterator]||Ze["@@iterator"];if(ie)return(ie=ie.call(Ze)).next.bind(ie);if(Array.isArray(Ze)||(ie=function(be,F){if(be){if(typeof be=="string")return a(be,F);var H=Object.prototype.toString.call(be).slice(8,-1);return H==="Object"&&be.constructor&&(H=be.constructor.name),H==="Map"||H==="Set"?Array.from(be):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?a(be,F):void 0}}(Ze))||pe){ie&&(Ze=ie);var oe=0;return function(){return oe>=Ze.length?{done:!0}:{done:!1,value:Ze[oe++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}s.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var f=/[&<>"']/,c=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(Ze){return p[Ze]};function v(Ze,pe){if(pe){if(f.test(Ze))return Ze.replace(c,g)}else if(d.test(Ze))return Ze.replace(h,g);return Ze}var y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function b(Ze){return Ze.replace(y,function(pe,ie){return(ie=ie.toLowerCase())==="colon"?":":ie.charAt(0)==="#"?ie.charAt(1)==="x"?String.fromCharCode(parseInt(ie.substring(2),16)):String.fromCharCode(+ie.substring(1)):""})}var w=/(^|[^\[])\^/g;function E(Ze,pe){Ze=typeof Ze=="string"?Ze:Ze.source,pe=pe||"";var ie={replace:function(oe,be){return be=(be=be.source||be).replace(w,"$1"),Ze=Ze.replace(oe,be),ie},getRegex:function(){return new RegExp(Ze,pe)}};return ie}var A=/[^\w:]/g,T=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function D(Ze,pe,ie){if(Ze){var oe;try{oe=decodeURIComponent(b(ie)).replace(A,"").toLowerCase()}catch{return null}if(oe.indexOf("javascript:")===0||oe.indexOf("vbscript:")===0||oe.indexOf("data:")===0)return null}pe&&!T.test(ie)&&(ie=function(be,F){k[" "+be]||(R.test(be)?k[" "+be]=be+"/":k[" "+be]=I(be,"/",!0));var H=(be=k[" "+be]).indexOf(":")===-1;return F.substring(0,2)==="//"?H?F:be.replace(O,"$1")+F:F.charAt(0)==="/"?H?F:be.replace(B,"$1")+F:be+F}(pe,ie));try{ie=encodeURI(ie).replace(/%25/g,"%")}catch{return null}return ie}var k={},R=/^[^:]+:\/*[^/]*$/,O=/^([^:]+:)[\s\S]*$/,B=/^([^:]+:\/*[^/]*)[\s\S]*$/,K={exec:function(){}};function L(Ze){for(var pe,ie,oe=1;oe<arguments.length;oe++)for(ie in pe=arguments[oe])Object.prototype.hasOwnProperty.call(pe,ie)&&(Ze[ie]=pe[ie]);return Ze}function $(Ze,pe){var ie=Ze.replace(/\|/g,function(be,F,H){for(var J=!1,re=F;--re>=0&&H[re]==="\\";)J=!J;return J?"|":" |"}).split(/ \|/),oe=0;if(ie[0].trim()||ie.shift(),ie.length>0&&!ie[ie.length-1].trim()&&ie.pop(),ie.length>pe)ie.splice(pe);else for(;ie.length<pe;)ie.push("");for(;oe<ie.length;oe++)ie[oe]=ie[oe].trim().replace(/\\\|/g,"|");return ie}function I(Ze,pe,ie){var oe=Ze.length;if(oe===0)return"";for(var be=0;be<oe;){var F=Ze.charAt(oe-be-1);if(F!==pe||ie){if(F===pe||!ie)break;be++}else be++}return Ze.slice(0,oe-be)}function U(Ze){Ze&&Ze.sanitize&&!Ze.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function q(Ze,pe){if(pe<1)return"";for(var ie="";pe>1;)1&pe&&(ie+=Ze),pe>>=1,Ze+=Ze;return ie+Ze}function Y(Ze,pe,ie,oe){var be=pe.href,F=pe.title?v(pe.title):null,H=Ze[1].replace(/\\([\[\]])/g,"$1");if(Ze[0].charAt(0)!=="!"){oe.state.inLink=!0;var J={type:"link",raw:ie,href:be,title:F,text:H,tokens:oe.inlineTokens(H)};return oe.state.inLink=!1,J}return{type:"image",raw:ie,href:be,title:F,text:v(H)}}var X=function(){function Ze(ie){this.options=ie||s.defaults}var pe=Ze.prototype;return pe.space=function(ie){var oe=this.rules.block.newline.exec(ie);if(oe&&oe[0].length>0)return{type:"space",raw:oe[0]}},pe.code=function(ie){var oe=this.rules.block.code.exec(ie);if(oe){var be=oe[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:oe[0],codeBlockStyle:"indented",text:this.options.pedantic?be:I(be,`
`)}}},pe.fences=function(ie){var oe=this.rules.block.fences.exec(ie);if(oe){var be=oe[0],F=function(H,J){var re=H.match(/^(\s+)(?:```)/);if(re===null)return J;var ye=re[1];return J.split(`
`).map(function(xe){var Re=xe.match(/^\s+/);return Re===null?xe:Re[0].length>=ye.length?xe.slice(ye.length):xe}).join(`
`)}(be,oe[3]||"");return{type:"code",raw:be,lang:oe[2]?oe[2].trim():oe[2],text:F}}},pe.heading=function(ie){var oe=this.rules.block.heading.exec(ie);if(oe){var be=oe[2].trim();if(/#$/.test(be)){var F=I(be,"#");this.options.pedantic?be=F.trim():F&&!/ $/.test(F)||(be=F.trim())}return{type:"heading",raw:oe[0],depth:oe[1].length,text:be,tokens:this.lexer.inline(be)}}},pe.hr=function(ie){var oe=this.rules.block.hr.exec(ie);if(oe)return{type:"hr",raw:oe[0]}},pe.blockquote=function(ie){var oe=this.rules.block.blockquote.exec(ie);if(oe){var be=oe[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:oe[0],tokens:this.lexer.blockTokens(be,[]),text:be}}},pe.list=function(ie){var oe=this.rules.block.list.exec(ie);if(oe){var be,F,H,J,re,ye,xe,Re,P,Q,se,ae,ke=oe[1].trim(),Ce=ke.length>1,Ee={type:"list",raw:"",ordered:Ce,start:Ce?+ke.slice(0,-1):"",loose:!1,items:[]};ke=Ce?"\\d{1,9}\\"+ke.slice(-1):"\\"+ke,this.options.pedantic&&(ke=Ce?ke:"[*+-]");for(var De=new RegExp("^( {0,3}"+ke+")((?:[	 ][^\\n]*)?(?:\\n|$))");ie&&(ae=!1,oe=De.exec(ie))&&!this.rules.block.hr.test(ie);){if(be=oe[0],ie=ie.substring(be.length),Re=oe[2].split(`
`,1)[0],P=ie.split(`
`,1)[0],this.options.pedantic?(J=2,se=Re.trimLeft()):(J=(J=oe[2].search(/[^ ]/))>4?1:J,se=Re.slice(J),J+=oe[1].length),ye=!1,!Re&&/^ *$/.test(P)&&(be+=P+`
`,ie=ie.substring(P.length+1),ae=!0),!ae)for(var Oe=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),We=new RegExp("^ {0,"+Math.min(3,J-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),tt=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:```|~~~)"),dt=new RegExp("^ {0,"+Math.min(3,J-1)+"}#");ie&&(Re=Q=ie.split(`
`,1)[0],this.options.pedantic&&(Re=Re.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!tt.test(Re))&&!dt.test(Re)&&!Oe.test(Re)&&!We.test(ie);){if(Re.search(/[^ ]/)>=J||!Re.trim())se+=`
`+Re.slice(J);else{if(ye)break;se+=`
`+Re}ye||Re.trim()||(ye=!0),be+=Q+`
`,ie=ie.substring(Q.length+1)}Ee.loose||(xe?Ee.loose=!0:/\n *\n *$/.test(be)&&(xe=!0)),this.options.gfm&&(F=/^\[[ xX]\] /.exec(se))&&(H=F[0]!=="[ ] ",se=se.replace(/^\[[ xX]\] +/,"")),Ee.items.push({type:"list_item",raw:be,task:!!F,checked:H,loose:!1,text:se}),Ee.raw+=be}Ee.items[Ee.items.length-1].raw=be.trimRight(),Ee.items[Ee.items.length-1].text=se.trimRight(),Ee.raw=Ee.raw.trimRight();var Kt=Ee.items.length;for(re=0;re<Kt;re++){this.lexer.state.top=!1,Ee.items[re].tokens=this.lexer.blockTokens(Ee.items[re].text,[]);var xt=Ee.items[re].tokens.filter(function(rn){return rn.type==="space"}),Qt=xt.every(function(rn){for(var sn,on=0,Tn=l(rn.raw.split(""));!(sn=Tn()).done;)if(sn.value===`
`&&(on+=1),on>1)return!0;return!1});!Ee.loose&&xt.length&&Qt&&(Ee.loose=!0,Ee.items[re].loose=!0)}return Ee}},pe.html=function(ie){var oe=this.rules.block.html.exec(ie);if(oe){var be={type:"html",raw:oe[0],pre:!this.options.sanitizer&&(oe[1]==="pre"||oe[1]==="script"||oe[1]==="style"),text:oe[0]};if(this.options.sanitize){var F=this.options.sanitizer?this.options.sanitizer(oe[0]):v(oe[0]);be.type="paragraph",be.text=F,be.tokens=this.lexer.inline(F)}return be}},pe.def=function(ie){var oe=this.rules.block.def.exec(ie);if(oe)return oe[3]&&(oe[3]=oe[3].substring(1,oe[3].length-1)),{type:"def",tag:oe[1].toLowerCase().replace(/\s+/g," "),raw:oe[0],href:oe[2],title:oe[3]}},pe.table=function(ie){var oe=this.rules.block.table.exec(ie);if(oe){var be={type:"table",header:$(oe[1]).map(function(xe){return{text:xe}}),align:oe[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:oe[3]&&oe[3].trim()?oe[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(be.header.length===be.align.length){be.raw=oe[0];var F,H,J,re,ye=be.align.length;for(F=0;F<ye;F++)/^ *-+: *$/.test(be.align[F])?be.align[F]="right":/^ *:-+: *$/.test(be.align[F])?be.align[F]="center":/^ *:-+ *$/.test(be.align[F])?be.align[F]="left":be.align[F]=null;for(ye=be.rows.length,F=0;F<ye;F++)be.rows[F]=$(be.rows[F],be.header.length).map(function(xe){return{text:xe}});for(ye=be.header.length,H=0;H<ye;H++)be.header[H].tokens=this.lexer.inline(be.header[H].text);for(ye=be.rows.length,H=0;H<ye;H++)for(re=be.rows[H],J=0;J<re.length;J++)re[J].tokens=this.lexer.inline(re[J].text);return be}}},pe.lheading=function(ie){var oe=this.rules.block.lheading.exec(ie);if(oe)return{type:"heading",raw:oe[0],depth:oe[2].charAt(0)==="="?1:2,text:oe[1],tokens:this.lexer.inline(oe[1])}},pe.paragraph=function(ie){var oe=this.rules.block.paragraph.exec(ie);if(oe){var be=oe[1].charAt(oe[1].length-1)===`
`?oe[1].slice(0,-1):oe[1];return{type:"paragraph",raw:oe[0],text:be,tokens:this.lexer.inline(be)}}},pe.text=function(ie){var oe=this.rules.block.text.exec(ie);if(oe)return{type:"text",raw:oe[0],text:oe[0],tokens:this.lexer.inline(oe[0])}},pe.escape=function(ie){var oe=this.rules.inline.escape.exec(ie);if(oe)return{type:"escape",raw:oe[0],text:v(oe[1])}},pe.tag=function(ie){var oe=this.rules.inline.tag.exec(ie);if(oe)return!this.lexer.state.inLink&&/^<a /i.test(oe[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(oe[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(oe[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(oe[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:oe[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(oe[0]):v(oe[0]):oe[0]}},pe.link=function(ie){var oe=this.rules.inline.link.exec(ie);if(oe){var be=oe[2].trim();if(!this.options.pedantic&&/^</.test(be)){if(!/>$/.test(be))return;var F=I(be.slice(0,-1),"\\");if((be.length-F.length)%2==0)return}else{var H=function(Re,P){if(Re.indexOf(P[1])===-1)return-1;for(var Q=Re.length,se=0,ae=0;ae<Q;ae++)if(Re[ae]==="\\")ae++;else if(Re[ae]===P[0])se++;else if(Re[ae]===P[1]&&--se<0)return ae;return-1}(oe[2],"()");if(H>-1){var J=(oe[0].indexOf("!")===0?5:4)+oe[1].length+H;oe[2]=oe[2].substring(0,H),oe[0]=oe[0].substring(0,J).trim(),oe[3]=""}}var re=oe[2],ye="";if(this.options.pedantic){var xe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(re);xe&&(re=xe[1],ye=xe[3])}else ye=oe[3]?oe[3].slice(1,-1):"";return re=re.trim(),/^</.test(re)&&(re=this.options.pedantic&&!/>$/.test(be)?re.slice(1):re.slice(1,-1)),Y(oe,{href:re&&re.replace(this.rules.inline._escapes,"$1"),title:ye&&ye.replace(this.rules.inline._escapes,"$1")},oe[0],this.lexer)}},pe.reflink=function(ie,oe){var be;if((be=this.rules.inline.reflink.exec(ie))||(be=this.rules.inline.nolink.exec(ie))){var F=(be[2]||be[1]).replace(/\s+/g," ");if(!(F=oe[F.toLowerCase()])||!F.href){var H=be[0].charAt(0);return{type:"text",raw:H,text:H}}return Y(be,F,be[0],this.lexer)}},pe.emStrong=function(ie,oe,be){be===void 0&&(be="");var F=this.rules.inline.emStrong.lDelim.exec(ie);if(F&&(!F[3]||!be.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var H=F[1]||F[2]||"";if(!H||H&&(be===""||this.rules.inline.punctuation.exec(be))){var J,re,ye=F[0].length-1,xe=ye,Re=0,P=F[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(P.lastIndex=0,oe=oe.slice(-1*ie.length+ye);(F=P.exec(oe))!=null;)if(J=F[1]||F[2]||F[3]||F[4]||F[5]||F[6])if(re=J.length,F[3]||F[4])xe+=re;else if(!((F[5]||F[6])&&ye%3)||(ye+re)%3){if(!((xe-=re)>0)){if(re=Math.min(re,re+xe+Re),Math.min(ye,re)%2){var Q=ie.slice(1,ye+F.index+re);return{type:"em",raw:ie.slice(0,ye+F.index+re+1),text:Q,tokens:this.lexer.inlineTokens(Q)}}var se=ie.slice(2,ye+F.index+re-1);return{type:"strong",raw:ie.slice(0,ye+F.index+re+1),text:se,tokens:this.lexer.inlineTokens(se)}}}else Re+=re}}},pe.codespan=function(ie){var oe=this.rules.inline.code.exec(ie);if(oe){var be=oe[2].replace(/\n/g," "),F=/[^ ]/.test(be),H=/^ /.test(be)&&/ $/.test(be);return F&&H&&(be=be.substring(1,be.length-1)),be=v(be,!0),{type:"codespan",raw:oe[0],text:be}}},pe.br=function(ie){var oe=this.rules.inline.br.exec(ie);if(oe)return{type:"br",raw:oe[0]}},pe.del=function(ie){var oe=this.rules.inline.del.exec(ie);if(oe)return{type:"del",raw:oe[0],text:oe[2],tokens:this.lexer.inlineTokens(oe[2])}},pe.autolink=function(ie,oe){var be,F,H=this.rules.inline.autolink.exec(ie);if(H)return F=H[2]==="@"?"mailto:"+(be=v(this.options.mangle?oe(H[1]):H[1])):be=v(H[1]),{type:"link",raw:H[0],text:be,href:F,tokens:[{type:"text",raw:be,text:be}]}},pe.url=function(ie,oe){var be;if(be=this.rules.inline.url.exec(ie)){var F,H;if(be[2]==="@")H="mailto:"+(F=v(this.options.mangle?oe(be[0]):be[0]));else{var J;do J=be[0],be[0]=this.rules.inline._backpedal.exec(be[0])[0];while(J!==be[0]);F=v(be[0]),H=be[1]==="www."?"http://"+F:F}return{type:"link",raw:be[0],text:F,href:H,tokens:[{type:"text",raw:F,text:F}]}}},pe.inlineText=function(ie,oe){var be,F=this.rules.inline.text.exec(ie);if(F)return be=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(F[0]):v(F[0]):F[0]:v(this.options.smartypants?oe(F[0]):F[0]),{type:"text",raw:F[0],text:be}},Ze}(),te={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:K,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};te.def=E(te.def).replace("label",te._label).replace("title",te._title).getRegex(),te.bullet=/(?:[*+-]|\d{1,9}[.)])/,te.listItemStart=E(/^( *)(bull) */).replace("bull",te.bullet).getRegex(),te.list=E(te.list).replace(/bull/g,te.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+te.def.source+")").getRegex(),te._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",te._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,te.html=E(te.html,"i").replace("comment",te._comment).replace("tag",te._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),te.paragraph=E(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.blockquote=E(te.blockquote).replace("paragraph",te.paragraph).getRegex(),te.normal=L({},te),te.gfm=L({},te.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),te.gfm.table=E(te.gfm.table).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.gfm.paragraph=E(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",te.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.pedantic=L({},te.normal,{html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",te._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:K,paragraph:E(te.normal._paragraph).replace("hr",te.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",te.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var le={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:K,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:K,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function ee(Ze){return Ze.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function z(Ze){var pe,ie,oe="",be=Ze.length;for(pe=0;pe<be;pe++)ie=Ze.charCodeAt(pe),Math.random()>.5&&(ie="x"+ie.toString(16)),oe+="&#"+ie+";";return oe}le._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",le.punctuation=E(le.punctuation).replace(/punctuation/g,le._punctuation).getRegex(),le.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,le.escapedEmSt=/\\\*|\\_/g,le._comment=E(te._comment).replace("(?:-->|$)","-->").getRegex(),le.emStrong.lDelim=E(le.emStrong.lDelim).replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimAst=E(le.emStrong.rDelimAst,"g").replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimUnd=E(le.emStrong.rDelimUnd,"g").replace(/punct/g,le._punctuation).getRegex(),le._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,le._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,le._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,le.autolink=E(le.autolink).replace("scheme",le._scheme).replace("email",le._email).getRegex(),le._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,le.tag=E(le.tag).replace("comment",le._comment).replace("attribute",le._attribute).getRegex(),le._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,le._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,le._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,le.link=E(le.link).replace("label",le._label).replace("href",le._href).replace("title",le._title).getRegex(),le.reflink=E(le.reflink).replace("label",le._label).replace("ref",te._label).getRegex(),le.nolink=E(le.nolink).replace("ref",te._label).getRegex(),le.reflinkSearch=E(le.reflinkSearch,"g").replace("reflink",le.reflink).replace("nolink",le.nolink).getRegex(),le.normal=L({},le),le.pedantic=L({},le.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",le._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",le._label).getRegex()}),le.gfm=L({},le.normal,{escape:E(le.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),le.gfm.url=E(le.gfm.url,"i").replace("email",le.gfm._extended_email).getRegex(),le.breaks=L({},le.gfm,{br:E(le.br).replace("{2,}","*").getRegex(),text:E(le.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var he=function(){function Ze(F){this.tokens=[],this.tokens.links=Object.create(null),this.options=F||s.defaults,this.options.tokenizer=this.options.tokenizer||new X,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var H={block:te.normal,inline:le.normal};this.options.pedantic?(H.block=te.pedantic,H.inline=le.pedantic):this.options.gfm&&(H.block=te.gfm,this.options.breaks?H.inline=le.breaks:H.inline=le.gfm),this.tokenizer.rules=H}Ze.lex=function(F,H){return new Ze(H).lex(F)},Ze.lexInline=function(F,H){return new Ze(H).inlineTokens(F)};var pe,ie,oe,be=Ze.prototype;return be.lex=function(F){var H;for(F=F.replace(/\r\n|\r/g,`
`),this.blockTokens(F,this.tokens);H=this.inlineQueue.shift();)this.inlineTokens(H.src,H.tokens);return this.tokens},be.blockTokens=function(F,H){var J,re,ye,xe,Re=this;for(H===void 0&&(H=[]),F=this.options.pedantic?F.replace(/\t/g,"    ").replace(/^ +$/gm,""):F.replace(/^( *)(\t+)/gm,function(Q,se,ae){return se+"    ".repeat(ae.length)});F;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Q){return!!(J=Q.call({lexer:Re},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)}))){if(J=this.tokenizer.space(F))F=F.substring(J.raw.length),J.raw.length===1&&H.length>0?H[H.length-1].raw+=`
`:H.push(J);else if(J=this.tokenizer.code(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?H.push(J):(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.fences(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.heading(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.hr(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.blockquote(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.list(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.html(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.def(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?this.tokens.links[J.tag]||(this.tokens.links[J.tag]={href:J.href,title:J.title}):(re.raw+=`
`+J.raw,re.text+=`
`+J.raw,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.table(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.lheading(F))F=F.substring(J.raw.length),H.push(J);else if(ye=F,this.options.extensions&&this.options.extensions.startBlock&&function(){var Q=1/0,se=F.slice(1),ae=void 0;Re.options.extensions.startBlock.forEach(function(ke){typeof(ae=ke.call({lexer:this},se))=="number"&&ae>=0&&(Q=Math.min(Q,ae))}),Q<1/0&&Q>=0&&(ye=F.substring(0,Q+1))}(),this.state.top&&(J=this.tokenizer.paragraph(ye)))re=H[H.length-1],xe&&re.type==="paragraph"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J),xe=ye.length!==F.length,F=F.substring(J.raw.length);else if(J=this.tokenizer.text(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&re.type==="text"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J);else if(F){var P="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(P);break}throw new Error(P)}}return this.state.top=!0,H},be.inline=function(F,H){return H===void 0&&(H=[]),this.inlineQueue.push({src:F,tokens:H}),H},be.inlineTokens=function(F,H){var J,re,ye,xe=this;H===void 0&&(H=[]);var Re,P,Q,se=F;if(this.tokens.links){var ae=Object.keys(this.tokens.links);if(ae.length>0)for(;(Re=this.tokenizer.rules.inline.reflinkSearch.exec(se))!=null;)ae.includes(Re[0].slice(Re[0].lastIndexOf("[")+1,-1))&&(se=se.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+se.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Re=this.tokenizer.rules.inline.blockSkip.exec(se))!=null;)se=se.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+se.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Re=this.tokenizer.rules.inline.escapedEmSt.exec(se))!=null;)se=se.slice(0,Re.index)+"++"+se.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;F;)if(P||(Q=""),P=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ce){return!!(J=Ce.call({lexer:xe},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)})))if(J=this.tokenizer.escape(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.tag(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.link(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.reflink(F,this.tokens.links))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.emStrong(F,se,Q))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.codespan(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.br(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.del(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.autolink(F,z))F=F.substring(J.raw.length),H.push(J);else if(this.state.inLink||!(J=this.tokenizer.url(F,z))){if(ye=F,this.options.extensions&&this.options.extensions.startInline&&function(){var Ce=1/0,Ee=F.slice(1),De=void 0;xe.options.extensions.startInline.forEach(function(Oe){typeof(De=Oe.call({lexer:this},Ee))=="number"&&De>=0&&(Ce=Math.min(Ce,De))}),Ce<1/0&&Ce>=0&&(ye=F.substring(0,Ce+1))}(),J=this.tokenizer.inlineText(ye,ee))F=F.substring(J.raw.length),J.raw.slice(-1)!=="_"&&(Q=J.raw.slice(-1)),P=!0,(re=H[H.length-1])&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(F){var ke="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(ke);break}throw new Error(ke)}}else F=F.substring(J.raw.length),H.push(J);return H},pe=Ze,oe=[{key:"rules",get:function(){return{block:te,inline:le}}}],(ie=null)&&o(pe.prototype,ie),oe&&o(pe,oe),Object.defineProperty(pe,"prototype",{writable:!1}),Ze}(),de=function(){function Ze(ie){this.options=ie||s.defaults}var pe=Ze.prototype;return pe.code=function(ie,oe,be){var F=(oe||"").match(/\S*/)[0];if(this.options.highlight){var H=this.options.highlight(ie,F);H!=null&&H!==ie&&(be=!0,ie=H)}return ie=ie.replace(/\n$/,"")+`
`,F?'<pre><code class="'+this.options.langPrefix+v(F,!0)+'">'+(be?ie:v(ie,!0))+`</code></pre>
`:"<pre><code>"+(be?ie:v(ie,!0))+`</code></pre>
`},pe.blockquote=function(ie){return`<blockquote>
`+ie+`</blockquote>
`},pe.html=function(ie){return ie},pe.heading=function(ie,oe,be,F){return this.options.headerIds?"<h"+oe+' id="'+(this.options.headerPrefix+F.slug(be))+'">'+ie+"</h"+oe+`>
`:"<h"+oe+">"+ie+"</h"+oe+`>
`},pe.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},pe.list=function(ie,oe,be){var F=oe?"ol":"ul";return"<"+F+(oe&&be!==1?' start="'+be+'"':"")+`>
`+ie+"</"+F+`>
`},pe.listitem=function(ie){return"<li>"+ie+`</li>
`},pe.checkbox=function(ie){return"<input "+(ie?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},pe.paragraph=function(ie){return"<p>"+ie+`</p>
`},pe.table=function(ie,oe){return oe&&(oe="<tbody>"+oe+"</tbody>"),`<table>
<thead>
`+ie+`</thead>
`+oe+`</table>
`},pe.tablerow=function(ie){return`<tr>
`+ie+`</tr>
`},pe.tablecell=function(ie,oe){var be=oe.header?"th":"td";return(oe.align?"<"+be+' align="'+oe.align+'">':"<"+be+">")+ie+"</"+be+`>
`},pe.strong=function(ie){return"<strong>"+ie+"</strong>"},pe.em=function(ie){return"<em>"+ie+"</em>"},pe.codespan=function(ie){return"<code>"+ie+"</code>"},pe.br=function(){return this.options.xhtml?"<br/>":"<br>"},pe.del=function(ie){return"<del>"+ie+"</del>"},pe.link=function(ie,oe,be){if((ie=D(this.options.sanitize,this.options.baseUrl,ie))===null)return be;var F='<a href="'+v(ie)+'"';return oe&&(F+=' title="'+oe+'"'),F+=">"+be+"</a>"},pe.image=function(ie,oe,be){if((ie=D(this.options.sanitize,this.options.baseUrl,ie))===null)return be;var F='<img src="'+ie+'" alt="'+be+'"';return oe&&(F+=' title="'+oe+'"'),F+=this.options.xhtml?"/>":">"},pe.text=function(ie){return ie},Ze}(),ze=function(){function Ze(){}var pe=Ze.prototype;return pe.strong=function(ie){return ie},pe.em=function(ie){return ie},pe.codespan=function(ie){return ie},pe.del=function(ie){return ie},pe.html=function(ie){return ie},pe.text=function(ie){return ie},pe.link=function(ie,oe,be){return""+be},pe.image=function(ie,oe,be){return""+be},pe.br=function(){return""},Ze}(),He=function(){function Ze(){this.seen={}}var pe=Ze.prototype;return pe.serialize=function(ie){return ie.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},pe.getNextSafeSlug=function(ie,oe){var be=ie,F=0;if(this.seen.hasOwnProperty(be)){F=this.seen[ie];do be=ie+"-"+ ++F;while(this.seen.hasOwnProperty(be))}return oe||(this.seen[ie]=F,this.seen[be]=0),be},pe.slug=function(ie,oe){oe===void 0&&(oe={});var be=this.serialize(ie);return this.getNextSafeSlug(be,oe.dryrun)},Ze}(),je=function(){function Ze(ie){this.options=ie||s.defaults,this.options.renderer=this.options.renderer||new de,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ze,this.slugger=new He}Ze.parse=function(ie,oe){return new Ze(oe).parse(ie)},Ze.parseInline=function(ie,oe){return new Ze(oe).parseInline(ie)};var pe=Ze.prototype;return pe.parse=function(ie,oe){oe===void 0&&(oe=!0);var be,F,H,J,re,ye,xe,Re,P,Q,se,ae,ke,Ce,Ee,De,Oe,We,tt,dt="",Kt=ie.length;for(be=0;be<Kt;be++)if(Q=ie[be],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Q.type])||(tt=this.options.extensions.renderers[Q.type].call({parser:this},Q))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Q.type))switch(Q.type){case"space":continue;case"hr":dt+=this.renderer.hr();continue;case"heading":dt+=this.renderer.heading(this.parseInline(Q.tokens),Q.depth,b(this.parseInline(Q.tokens,this.textRenderer)),this.slugger);continue;case"code":dt+=this.renderer.code(Q.text,Q.lang,Q.escaped);continue;case"table":for(Re="",xe="",J=Q.header.length,F=0;F<J;F++)xe+=this.renderer.tablecell(this.parseInline(Q.header[F].tokens),{header:!0,align:Q.align[F]});for(Re+=this.renderer.tablerow(xe),P="",J=Q.rows.length,F=0;F<J;F++){for(xe="",re=(ye=Q.rows[F]).length,H=0;H<re;H++)xe+=this.renderer.tablecell(this.parseInline(ye[H].tokens),{header:!1,align:Q.align[H]});P+=this.renderer.tablerow(xe)}dt+=this.renderer.table(Re,P);continue;case"blockquote":P=this.parse(Q.tokens),dt+=this.renderer.blockquote(P);continue;case"list":for(se=Q.ordered,ae=Q.start,ke=Q.loose,J=Q.items.length,P="",F=0;F<J;F++)De=(Ee=Q.items[F]).checked,Oe=Ee.task,Ce="",Ee.task&&(We=this.renderer.checkbox(De),ke?Ee.tokens.length>0&&Ee.tokens[0].type==="paragraph"?(Ee.tokens[0].text=We+" "+Ee.tokens[0].text,Ee.tokens[0].tokens&&Ee.tokens[0].tokens.length>0&&Ee.tokens[0].tokens[0].type==="text"&&(Ee.tokens[0].tokens[0].text=We+" "+Ee.tokens[0].tokens[0].text)):Ee.tokens.unshift({type:"text",text:We}):Ce+=We),Ce+=this.parse(Ee.tokens,ke),P+=this.renderer.listitem(Ce,Oe,De);dt+=this.renderer.list(P,se,ae);continue;case"html":dt+=this.renderer.html(Q.text);continue;case"paragraph":dt+=this.renderer.paragraph(this.parseInline(Q.tokens));continue;case"text":for(P=Q.tokens?this.parseInline(Q.tokens):Q.text;be+1<Kt&&ie[be+1].type==="text";)P+=`
`+((Q=ie[++be]).tokens?this.parseInline(Q.tokens):Q.text);dt+=oe?this.renderer.paragraph(P):P;continue;default:var xt='Token with "'+Q.type+'" type was not found.';if(this.options.silent)return void console.error(xt);throw new Error(xt)}else dt+=tt||"";return dt},pe.parseInline=function(ie,oe){oe=oe||this.renderer;var be,F,H,J="",re=ie.length;for(be=0;be<re;be++)if(F=ie[be],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[F.type])||(H=this.options.extensions.renderers[F.type].call({parser:this},F))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(F.type))switch(F.type){case"escape":case"text":J+=oe.text(F.text);break;case"html":J+=oe.html(F.text);break;case"link":J+=oe.link(F.href,F.title,this.parseInline(F.tokens,oe));break;case"image":J+=oe.image(F.href,F.title,F.text);break;case"strong":J+=oe.strong(this.parseInline(F.tokens,oe));break;case"em":J+=oe.em(this.parseInline(F.tokens,oe));break;case"codespan":J+=oe.codespan(F.text);break;case"br":J+=oe.br();break;case"del":J+=oe.del(this.parseInline(F.tokens,oe));break;default:var ye='Token with "'+F.type+'" type was not found.';if(this.options.silent)return void console.error(ye);throw new Error(ye)}else J+=H||"";return J},Ze}();function we(Ze,pe,ie){if(Ze==null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");if(typeof pe=="function"&&(ie=pe,pe=null),U(pe=L({},we.defaults,pe||{})),ie){var oe,be=pe.highlight;try{oe=he.lex(Ze,pe)}catch(ye){return ie(ye)}var F=function(ye){var xe;if(!ye)try{pe.walkTokens&&we.walkTokens(oe,pe.walkTokens),xe=je.parse(oe,pe)}catch(Re){ye=Re}return pe.highlight=be,ye?ie(ye):ie(null,xe)};if(!be||be.length<3||(delete pe.highlight,!oe.length))return F();var H=0;return we.walkTokens(oe,function(ye){ye.type==="code"&&(H++,setTimeout(function(){be(ye.text,ye.lang,function(xe,Re){if(xe)return F(xe);Re!=null&&Re!==ye.text&&(ye.text=Re,ye.escaped=!0),--H===0&&F()})},0))}),void(H===0&&F())}function J(ye){if(ye.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+v(ye.message+"",!0)+"</pre>";throw ye}try{var re=he.lex(Ze,pe);if(pe.walkTokens){if(pe.async)return Promise.all(we.walkTokens(re,pe.walkTokens)).then(function(){return je.parse(re,pe)}).catch(J);we.walkTokens(re,pe.walkTokens)}return je.parse(re,pe)}catch(ye){J(ye)}}we.options=we.setOptions=function(Ze){var pe;return L(we.defaults,Ze),pe=we.defaults,s.defaults=pe,we},we.getDefaults=u,we.defaults=s.defaults,we.use=function(){for(var Ze=arguments.length,pe=new Array(Ze),ie=0;ie<Ze;ie++)pe[ie]=arguments[ie];var oe,be=L.apply(void 0,[{}].concat(pe)),F=we.defaults.extensions||{renderers:{},childTokens:{}};pe.forEach(function(H){if(H.extensions&&(oe=!0,H.extensions.forEach(function(re){if(!re.name)throw new Error("extension name required");if(re.renderer){var ye=F.renderers?F.renderers[re.name]:null;F.renderers[re.name]=ye?function(){for(var xe=arguments.length,Re=new Array(xe),P=0;P<xe;P++)Re[P]=arguments[P];var Q=re.renderer.apply(this,Re);return Q===!1&&(Q=ye.apply(this,Re)),Q}:re.renderer}if(re.tokenizer){if(!re.level||re.level!=="block"&&re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");F[re.level]?F[re.level].unshift(re.tokenizer):F[re.level]=[re.tokenizer],re.start&&(re.level==="block"?F.startBlock?F.startBlock.push(re.start):F.startBlock=[re.start]:re.level==="inline"&&(F.startInline?F.startInline.push(re.start):F.startInline=[re.start]))}re.childTokens&&(F.childTokens[re.name]=re.childTokens)})),H.renderer&&function(){var re=we.defaults.renderer||new de,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,se=new Array(Q),ae=0;ae<Q;ae++)se[ae]=arguments[ae];var ke=H.renderer[Re].apply(re,se);return ke===!1&&(ke=P.apply(re,se)),ke}};for(var xe in H.renderer)ye(xe);be.renderer=re}(),H.tokenizer&&function(){var re=we.defaults.tokenizer||new X,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,se=new Array(Q),ae=0;ae<Q;ae++)se[ae]=arguments[ae];var ke=H.tokenizer[Re].apply(re,se);return ke===!1&&(ke=P.apply(re,se)),ke}};for(var xe in H.tokenizer)ye(xe);be.tokenizer=re}(),H.walkTokens){var J=we.defaults.walkTokens;be.walkTokens=function(re){var ye=[];return ye.push(H.walkTokens.call(this,re)),J&&(ye=ye.concat(J.call(this,re))),ye}}oe&&(be.extensions=F),we.setOptions(be)})},we.walkTokens=function(Ze,pe){for(var ie,oe=[],be=function(){var H=ie.value;switch(oe=oe.concat(pe.call(we,H)),H.type){case"table":for(var J,re=l(H.header);!(J=re()).done;){var ye=J.value;oe=oe.concat(we.walkTokens(ye.tokens,pe))}for(var xe,Re=l(H.rows);!(xe=Re()).done;)for(var P,Q=l(xe.value);!(P=Q()).done;){var se=P.value;oe=oe.concat(we.walkTokens(se.tokens,pe))}break;case"list":oe=oe.concat(we.walkTokens(H.items,pe));break;default:we.defaults.extensions&&we.defaults.extensions.childTokens&&we.defaults.extensions.childTokens[H.type]?we.defaults.extensions.childTokens[H.type].forEach(function(ae){oe=oe.concat(we.walkTokens(H[ae],pe))}):H.tokens&&(oe=oe.concat(we.walkTokens(H.tokens,pe)))}},F=l(Ze);!(ie=F()).done;)be();return oe},we.parseInline=function(Ze,pe){if(Ze==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");U(pe=L({},we.defaults,pe||{}));try{var ie=he.lexInline(Ze,pe);return pe.walkTokens&&we.walkTokens(ie,pe.walkTokens),je.parseInline(ie,pe)}catch(oe){if(oe.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+v(oe.message+"",!0)+"</pre>";throw oe}},we.Parser=je,we.parser=je.parse,we.Renderer=de,we.TextRenderer=ze,we.Lexer=he,we.lexer=he.lex,we.Tokenizer=X,we.Slugger=He,we.parse=we;var Ie=we.options,qe=we.setOptions,Pe=we.use,At=we.walkTokens,ht=we.parseInline,nn=we,Vt=je.parse,Mn=he.lex;s.Lexer=he,s.Parser=je,s.Renderer=de,s.Slugger=He,s.TextRenderer=ze,s.Tokenizer=X,s.getDefaults=u,s.lexer=Mn,s.marked=we,s.options=Ie,s.parse=nn,s.parseInline=ht,s.parser=Vt,s.setOptions=qe,s.use=Pe,s.walkTokens=At,Object.defineProperty(s,"__esModule",{value:!0})})},{}],16:[function(n,r,i){(function(s){(function(){var o;(function(){(o=function(a,l,u,f){f=f||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=f.flags||{},this.memoized={},this.loaded=!1;var c,d,h,p,g,v=this;function y(A,T){var D=v._readFile(A,null,f.asyncLoad);f.asyncLoad?D.then(function(k){T(k)}):T(D)}function b(A){l=A,u&&E()}function w(A){u=A,l&&E()}function E(){for(v.rules=v._parseAFF(l),v.compoundRuleCodes={},d=0,p=v.compoundRules.length;d<p;d++){var A=v.compoundRules[d];for(h=0,g=A.length;h<g;h++)v.compoundRuleCodes[A[h]]=[]}for(d in"ONLYINCOMPOUND"in v.flags&&(v.compoundRuleCodes[v.flags.ONLYINCOMPOUND]=[]),v.dictionaryTable=v._parseDIC(u),v.compoundRuleCodes)v.compoundRuleCodes[d].length===0&&delete v.compoundRuleCodes[d];for(d=0,p=v.compoundRules.length;d<p;d++){var T=v.compoundRules[d],D="";for(h=0,g=T.length;h<g;h++){var k=T[h];k in v.compoundRuleCodes?D+="("+v.compoundRuleCodes[k].join("|")+")":D+=k}v.compoundRules[d]=new RegExp(D,"i")}v.loaded=!0,f.asyncLoad&&f.loadedCallback&&f.loadedCallback(v)}return a&&(v.dictionary=a,l&&u?E():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(c=f.dictionaryPath?f.dictionaryPath:"typo/dictionaries",l||y(chrome.extension.getURL(c+"/"+a+"/"+a+".aff"),b),u||y(chrome.extension.getURL(c+"/"+a+"/"+a+".dic"),w)):(c=f.dictionaryPath?f.dictionaryPath:s!==void 0?s+"/dictionaries":"./dictionaries",l||y(c+"/"+a+"/"+a+".aff",b),u||y(c+"/"+a+"/"+a+".dic",w))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,u){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var f,c=new XMLHttpRequest;return c.open("GET",a,u),u&&(f=new Promise(function(h,p){c.onload=function(){c.status===200?h(c.responseText):p(c.statusText)},c.onerror=function(){p(c.statusText)}})),c.overrideMimeType&&c.overrideMimeType("text/plain; charset="+l),c.send(null),u?f:c.responseText}if(n!==void 0){var d=n("fs");try{if(d.existsSync(a))return d.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(h){return console.log(h),""}}},_parseAFF:function(a){var l,u,f,c,d,h,p,g={},v=a.split(/\r?\n/);for(c=0,h=v.length;c<h;c++)if(l=(l=this._removeAffixComments(v[c])).trim()){var y=l.split(/\s+/),b=y[0];if(b=="PFX"||b=="SFX"){var w=y[1],E=y[2],A=[];for(d=c+1,p=c+1+(u=parseInt(y[3],10));d<p;d++){var T=(f=v[d].split(/\s+/))[2],D=f[3].split("/"),k=D[0];k==="0"&&(k="");var R=this.parseRuleCodes(D[1]),O=f[4],B={};B.add=k,R.length>0&&(B.continuationClasses=R),O!=="."&&(B.match=b==="SFX"?new RegExp(O+"$"):new RegExp("^"+O)),T!="0"&&(B.remove=b==="SFX"?new RegExp(T+"$"):T),A.push(B)}g[w]={type:b,combineable:E=="Y",entries:A},c+=u}else if(b==="COMPOUNDRULE"){for(d=c+1,p=c+1+(u=parseInt(y[1],10));d<p;d++)f=(l=v[d]).split(/\s+/),this.compoundRules.push(f[1]);c+=u}else b==="REP"?(f=l.split(/\s+/)).length===3&&this.replacementTable.push([f[1],f[2]]):this.flags[b]=y[1]}return g},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),u={};function f(I,U){u.hasOwnProperty(I)||(u[I]=null),U.length>0&&(u[I]===null&&(u[I]=[]),u[I].push(U))}for(var c=1,d=l.length;c<d;c++){var h=l[c];if(h){var p=h.split("/",2),g=p[0];if(p.length>1){var v=this.parseRuleCodes(p[1]);"NEEDAFFIX"in this.flags&&v.indexOf(this.flags.NEEDAFFIX)!=-1||f(g,v);for(var y=0,b=v.length;y<b;y++){var w=v[y],E=this.rules[w];if(E)for(var A=this._applyRule(g,E),T=0,D=A.length;T<D;T++){var k=A[T];if(f(k,[]),E.combineable)for(var R=y+1;R<b;R++){var O=v[R],B=this.rules[O];if(B&&B.combineable&&E.type!=B.type)for(var K=this._applyRule(k,B),L=0,$=K.length;L<$;L++)f(K[L],[])}}w in this.compoundRuleCodes&&this.compoundRuleCodes[w].push(g)}}else f(g.trim(),[])}}return u},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],u=0,f=a.length;u<f;u+=2)l.push(a.substr(u,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var u=l.entries,f=[],c=0,d=u.length;c<d;c++){var h=u[c];if(!h.match||a.match(h.match)){var p=a;if(h.remove&&(p=p.replace(h.remove,"")),l.type==="SFX"?p+=h.add:p=h.add+p,f.push(p),"continuationClasses"in h)for(var g=0,v=h.continuationClasses.length;g<v;g++){var y=this.rules[h.continuationClasses[g]];y&&(f=f.concat(this._applyRule(p,y)))}}}return f},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var u=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(u,"KEEPCASE"))return!1;if(this.checkExact(u)||this.checkExact(l.toLowerCase()))return!0}var f=l[0].toLowerCase()+l.substring(1);if(f!==l){if(this.hasFlag(f,"KEEPCASE"))return!1;if(this.checkExact(f))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,u,f=this.dictionaryTable[a];if(f===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,u=this.compoundRules.length;l<u;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(f===null)return!0;if(typeof f=="object"){for(l=0,u=f.length;l<u;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",f[l]))return!0}}return!1},hasFlag:function(a,l,u){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(u===void 0&&(u=Array.prototype.concat.apply([],this.dictionaryTable[a])),!u||u.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var u=this.memoized[a].limit;if(l<=u||this.memoized[a].suggestions.length<u)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var f=0,c=this.replacementTable.length;f<c;f++){var d=this.replacementTable[f];if(a.indexOf(d[0])!==-1){var h=a.replace(d[0],d[1]);if(this.check(h))return[h]}}var p=this;function g(v,y){var b,w,E,A,T={},D=p.alphabet.length;if(typeof v=="string"){var k=v;(v={})[k]=!0}for(var k in v)for(b=0,E=k.length+1;b<E;b++){var R=[k.substring(0,b),k.substring(b)];if(R[1]&&(A=R[0]+R[1].substring(1),y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)),R[1].length>1&&R[1][1]!==R[1][0]&&(A=R[0]+R[1][1]+R[1][0]+R[1].substring(2),y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)),R[1]){var O=R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase";for(w=0;w<D;w++){var B=p.alphabet[w];O==="uppercase"&&(B=B.toUpperCase()),B!=R[1].substring(0,1)&&(A=R[0]+B+R[1].substring(1),y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1))}}if(R[1])for(w=0;w<D;w++)O=R[0].substring(-1).toUpperCase()===R[0].substring(-1)&&R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase",B=p.alphabet[w],O==="uppercase"&&(B=B.toUpperCase()),A=R[0]+B+R[1],y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)}return T}return p.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(v){var y,b=g(v),w=g(b,!0);for(var E in b)p.check(E)&&(E in w?w[E]+=b[E]:w[E]=b[E]);var A=[];for(y in w)w.hasOwnProperty(y)&&A.push([y,w[y]]);A.sort(function(R,O){var B=R[1],K=O[1];return B<K?-1:B>K?1:O[0].localeCompare(R[0])}).reverse();var T=[],D="lowercase";v.toUpperCase()===v?D="uppercase":v.substr(0,1).toUpperCase()+v.substr(1).toLowerCase()===v&&(D="capitalized");var k=l;for(y=0;y<Math.min(k,A.length);y++)D==="uppercase"?A[y][0]=A[y][0].toUpperCase():D==="capitalized"&&(A[y][0]=A[y][0].substr(0,1).toUpperCase()+A[y][0].substr(1)),p.hasFlag(A[y][0],"NOSUGGEST")||T.indexOf(A[y][0])!=-1?k++:T.push(A[y][0]);return T}(a),limit:l},this.memoized[a].suggestions}}})(),r!==void 0&&(r.exports=o)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(n,r,i){var s=n("codemirror");s.commands.tabAndIndentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentMore");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}},s.commands.shiftTabAndUnindentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentLess");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}}},{codemirror:10}],18:[function(n,r,i){var s=n("codemirror");n("codemirror/addon/edit/continuelist.js"),n("./codemirror/tablist"),n("codemirror/addon/display/fullscreen.js"),n("codemirror/mode/markdown/markdown.js"),n("codemirror/addon/mode/overlay.js"),n("codemirror/addon/display/placeholder.js"),n("codemirror/addon/display/autorefresh.js"),n("codemirror/addon/selection/mark-selection.js"),n("codemirror/addon/search/searchcursor.js"),n("codemirror/mode/gfm/gfm.js"),n("codemirror/mode/xml/xml.js");var o=n("codemirror-spell-checker"),a=n("marked").marked,l=/Mac/.test(navigator.platform),u=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),f={toggleBold:E,toggleItalic:A,drawLink:te,toggleHeadingSmaller:R,toggleHeadingBigger:O,drawImage:le,toggleBlockquote:k,toggleOrderedList:Y,toggleUnorderedList:q,toggleCodeBlock:D,togglePreview:Ie,toggleStrikethrough:T,toggleHeading1:B,toggleHeading2:K,toggleHeading3:L,toggleHeading4:$,toggleHeading5:I,toggleHeading6:U,cleanBlock:X,drawTable:de,drawHorizontalRule:ze,undo:He,redo:je,toggleSideBySide:we,toggleFullScreen:w},c={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(){var P,Q=!1;return P=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(P)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(P.substr(0,4)))&&(Q=!0),Q};function h(P){return P=l?P.replace("Ctrl","Cmd"):P.replace("Cmd","Ctrl")}function p(P,Q,se,ae){var ke=g(P,!1,Q,se,"button",ae);ke.classList.add("easymde-dropdown"),ke.onclick=function(){ke.focus()};var Ce=document.createElement("div");Ce.className="easymde-dropdown-content";for(var Ee=0;Ee<P.children.length;Ee++){var De,Oe=P.children[Ee];(De=g(typeof Oe=="string"&&Oe in oe?oe[Oe]:Oe,!0,Q,se,"button",ae)).addEventListener("click",function(We){We.stopPropagation()},!1),Ce.appendChild(De)}return ke.appendChild(Ce),ke}function g(P,Q,se,ae,ke,Ce){P=P||{};var Ee=document.createElement(ke);if(P.attributes)for(var De in P.attributes)Object.prototype.hasOwnProperty.call(P.attributes,De)&&Ee.setAttribute(De,P.attributes[De]);var Oe=Ce.options.toolbarButtonClassPrefix?Ce.options.toolbarButtonClassPrefix+"-":"";Ee.className=Oe+P.name,Ee.setAttribute("type",ke),se=se==null||se,P.text&&(Ee.innerText=P.text),P.name&&P.name in ae&&(f[P.name]=P.action),P.title&&se&&(Ee.title=function(sn,on,Tn){var Er,Ki=sn;return on&&Tn[Er=function(ds){for(var Hi in f)if(f[Hi]===ds)return Hi;return null}(on)]&&(Ki+=" ("+h(Tn[Er])+")"),Ki}(P.title,P.action,ae),l&&(Ee.title=Ee.title.replace("Ctrl",""),Ee.title=Ee.title.replace("Alt",""))),P.title&&Ee.setAttribute("aria-label",P.title),P.noDisable&&Ee.classList.add("no-disable"),P.noMobile&&Ee.classList.add("no-mobile");var We=[];P.className!==void 0&&(We=P.className.split(" "));for(var tt=[],dt=0;dt<We.length;dt++){var Kt=We[dt];Kt.match(/^fa([srlb]|(-[\w-]*)|$)/)?tt.push(Kt):Ee.classList.add(Kt)}if(Ee.tabIndex=-1,tt.length>0){for(var xt=document.createElement("i"),Qt=0;Qt<tt.length;Qt++){var rn=tt[Qt];xt.classList.add(rn)}Ee.appendChild(xt)}return P.icon!==void 0&&(Ee.innerHTML=P.icon),P.action&&Q&&(typeof P.action=="function"?Ee.onclick=function(sn){sn.preventDefault(),P.action(Ce)}:typeof P.action=="string"&&(Ee.onclick=function(sn){sn.preventDefault(),window.open(P.action,"_blank")})),Ee}function v(){var P=document.createElement("i");return P.className="separator",P.innerHTML="|",P}function y(P,Q){Q=Q||P.getCursor("start");var se=P.getTokenAt(Q);if(!se.type)return{};for(var ae,ke,Ce=se.type.split(" "),Ee={},De=0;De<Ce.length;De++)(ae=Ce[De])==="strong"?Ee.bold=!0:ae==="variable-2"?(ke=P.getLine(Q.line),/^\s*\d+\.\s/.test(ke)?Ee["ordered-list"]=!0:Ee["unordered-list"]=!0):ae==="atom"?Ee.quote=!0:ae==="em"?Ee.italic=!0:ae==="quote"?Ee.quote=!0:ae==="strikethrough"?Ee.strikethrough=!0:ae==="comment"?Ee.code=!0:ae!=="link"||Ee.image?ae==="image"?Ee.image=!0:ae.match(/^header(-[1-6])?$/)&&(Ee[ae.replace("header","heading")]=!0):Ee.link=!0;return Ee}var b="";function w(P){var Q=P.codemirror;Q.setOption("fullScreen",!Q.getOption("fullScreen")),Q.getOption("fullScreen")?(b=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=b;var se=Q.getWrapperElement(),ae=se.nextSibling;if(ae.classList.contains("editor-preview-active-side"))if(P.options.sideBySideFullscreen===!1){var ke=se.parentNode;Q.getOption("fullScreen")?ke.classList.remove("sided--no-fullscreen"):ke.classList.add("sided--no-fullscreen")}else we(P);P.options.onToggleFullScreen&&P.options.onToggleFullScreen(Q.getOption("fullScreen")||!1),P.options.maxHeight!==void 0&&(Q.getOption("fullScreen")?(Q.getScrollerElement().style.removeProperty("height"),ae.style.removeProperty("height")):(Q.getScrollerElement().style.height=P.options.maxHeight,P.setPreviewMaxHeight())),P.toolbar_div.classList.toggle("fullscreen"),P.toolbarElements&&P.toolbarElements.fullscreen&&P.toolbarElements.fullscreen.classList.toggle("active")}function E(P){nn(P,"bold",P.options.blockStyles.bold)}function A(P){nn(P,"italic",P.options.blockStyles.italic)}function T(P){nn(P,"strikethrough","~~")}function D(P){var Q=P.options.blockStyles.code;function se(gn){if(typeof gn!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof gn+": "+gn;return gn.styles&&gn.styles[2]&&gn.styles[2].indexOf("formatting-code-block")!==-1}function ae(gn){return gn.state.base.base||gn.state.base}function ke(gn,Kr,sr,Ni,tr){sr=sr||gn.getLineHandle(Kr),Ni=Ni||gn.getTokenAt({line:Kr,ch:1}),tr=tr||!!sr.text&&gn.getTokenAt({line:Kr,ch:sr.text.length-1});var $r=Ni.type?Ni.type.split(" "):[];return tr&&ae(tr).indentedCode?"indented":$r.indexOf("comment")!==-1&&(ae(Ni).fencedChars||ae(tr).fencedChars||se(sr)?"fenced":"single")}var Ce,Ee,De,Oe=P.codemirror,We=Oe.getCursor("start"),tt=Oe.getCursor("end"),dt=Oe.getTokenAt({line:We.line,ch:We.ch||1}),Kt=Oe.getLineHandle(We.line),xt=ke(Oe,We.line,Kt,dt);if(xt==="single"){var Qt=Kt.text.slice(0,We.ch).replace("`",""),rn=Kt.text.slice(We.ch).replace("`","");Oe.replaceRange(Qt+rn,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),We.ch--,We!==tt&&tt.ch--,Oe.setSelection(We,tt),Oe.focus()}else if(xt==="fenced")if(We.line!==tt.line||We.ch!==tt.ch){for(Ce=We.line;Ce>=0&&!se(Kt=Oe.getLineHandle(Ce));Ce--);var sn,on,Tn,Er,Ki=ae(Oe.getTokenAt({line:Ce,ch:1})).fencedChars;se(Oe.getLineHandle(We.line))?(sn="",on=We.line):se(Oe.getLineHandle(We.line-1))?(sn="",on=We.line-1):(sn=Ki+`
`,on=We.line),se(Oe.getLineHandle(tt.line))?(Tn="",Er=tt.line,tt.ch===0&&(Er+=1)):tt.ch!==0&&se(Oe.getLineHandle(tt.line+1))?(Tn="",Er=tt.line+1):(Tn=Ki+`
`,Er=tt.line+1),tt.ch===0&&(Er-=1),Oe.operation(function(){Oe.replaceRange(Tn,{line:Er,ch:0},{line:Er+(Tn?0:1),ch:0}),Oe.replaceRange(sn,{line:on,ch:0},{line:on+(sn?0:1),ch:0})}),Oe.setSelection({line:on+(sn?1:0),ch:0},{line:Er+(sn?1:-1),ch:0}),Oe.focus()}else{var ds=We.line;if(se(Oe.getLineHandle(We.line))&&(ke(Oe,We.line+1)==="fenced"?(Ce=We.line,ds=We.line+1):(Ee=We.line,ds=We.line-1)),Ce===void 0)for(Ce=ds;Ce>=0&&!se(Kt=Oe.getLineHandle(Ce));Ce--);if(Ee===void 0)for(De=Oe.lineCount(),Ee=ds;Ee<De&&!se(Kt=Oe.getLineHandle(Ee));Ee++);Oe.operation(function(){Oe.replaceRange("",{line:Ce,ch:0},{line:Ce+1,ch:0}),Oe.replaceRange("",{line:Ee-1,ch:0},{line:Ee,ch:0})}),Oe.focus()}else if(xt==="indented"){if(We.line!==tt.line||We.ch!==tt.ch)Ce=We.line,Ee=tt.line,tt.ch===0&&Ee--;else{for(Ce=We.line;Ce>=0;Ce--)if(!(Kt=Oe.getLineHandle(Ce)).text.match(/^\s*$/)&&ke(Oe,Ce,Kt)!=="indented"){Ce+=1;break}for(De=Oe.lineCount(),Ee=We.line;Ee<De;Ee++)if(!(Kt=Oe.getLineHandle(Ee)).text.match(/^\s*$/)&&ke(Oe,Ee,Kt)!=="indented"){Ee-=1;break}}var Hi=Oe.getLineHandle(Ee+1),No=Hi&&Oe.getTokenAt({line:Ee+1,ch:Hi.text.length-1});No&&ae(No).indentedCode&&Oe.replaceRange(`
`,{line:Ee+1,ch:0});for(var qn=Ce;qn<=Ee;qn++)Oe.indentLine(qn,"subtract");Oe.focus()}else{var Mr=We.line===tt.line&&We.ch===tt.ch&&We.ch===0,Lr=We.line!==tt.line;Mr||Lr?function(gn,Kr,sr,Ni){var tr=Kr.line+1,$r=sr.line+1,to=Kr.line!==sr.line,ge=Ni+`
`,Le=`
`+Ni;to&&$r++,to&&sr.ch===0&&(Le=Ni+`
`,$r--),qe(gn,!1,[ge,Le]),gn.setSelection({line:tr,ch:0},{line:$r,ch:0})}(Oe,We,tt,Q):qe(Oe,!1,["`","`"])}}function k(P){At(P.codemirror,"quote")}function R(P){Pe(P.codemirror,"smaller")}function O(P){Pe(P.codemirror,"bigger")}function B(P){Pe(P.codemirror,void 0,1)}function K(P){Pe(P.codemirror,void 0,2)}function L(P){Pe(P.codemirror,void 0,3)}function $(P){Pe(P.codemirror,void 0,4)}function I(P){Pe(P.codemirror,void 0,5)}function U(P){Pe(P.codemirror,void 0,6)}function q(P){var Q=P.codemirror,se="*";["-","+","*"].includes(P.options.unorderedListStyle)&&(se=P.options.unorderedListStyle),At(Q,"unordered-list",se)}function Y(P){At(P.codemirror,"ordered-list")}function X(P){(function(Q){if(!Q.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var se,ae=Q.getCursor("start"),ke=Q.getCursor("end"),Ce=ae.line;Ce<=ke.line;Ce++)se=(se=Q.getLine(Ce)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),Q.replaceRange(se,{line:Ce,ch:0},{line:Ce,ch:99999999999999})})(P.codemirror)}function te(P){var Q=P.options,se="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.link,se);if(!ae)return!1;se=ee(ae)}ht(P,"link",Q.insertTexts.link,se)}function le(P){var Q=P.options,se="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.image,se);if(!ae)return!1;se=ee(ae)}ht(P,"image",Q.insertTexts.image,se)}function ee(P){return encodeURI(P).replace(/([\\()])/g,"\\$1")}function z(P){P.openBrowseFileWindow()}function he(P,Q){var se=P.codemirror,ae=y(se),ke=P.options,Ce=Q.substr(Q.lastIndexOf("/")+1),Ee=Ce.substring(Ce.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Ee))qe(se,ae.image,ke.insertTexts.uploadedImage,Q);else{var De=ke.insertTexts.link;De[0]="["+Ce,qe(se,ae.link,De,Q)}P.updateStatusBar("upload-image",P.options.imageTexts.sbOnUploaded.replace("#image_name#",Ce)),setTimeout(function(){P.updateStatusBar("upload-image",P.options.imageTexts.sbInit)},1e3)}function de(P){var Q=P.codemirror,se=y(Q),ae=P.options;qe(Q,se.table,ae.insertTexts.table)}function ze(P){var Q=P.codemirror,se=y(Q),ae=P.options;qe(Q,se.image,ae.insertTexts.horizontalRule)}function He(P){var Q=P.codemirror;Q.undo(),Q.focus()}function je(P){var Q=P.codemirror;Q.redo(),Q.focus()}function we(P){var Q=P.codemirror,se=Q.getWrapperElement(),ae=se.nextSibling,ke=P.toolbarElements&&P.toolbarElements["side-by-side"],Ce=!1,Ee=se.parentNode;ae.classList.contains("editor-preview-active-side")?(P.options.sideBySideFullscreen===!1&&Ee.classList.remove("sided--no-fullscreen"),ae.classList.remove("editor-preview-active-side"),ke&&ke.classList.remove("active"),se.classList.remove("CodeMirror-sided")):(setTimeout(function(){Q.getOption("fullScreen")||(P.options.sideBySideFullscreen===!1?Ee.classList.add("sided--no-fullscreen"):w(P)),ae.classList.add("editor-preview-active-side")},1),ke&&ke.classList.add("active"),se.classList.add("CodeMirror-sided"),Ce=!0);var De=se.lastChild;if(De.classList.contains("editor-preview-active")){De.classList.remove("editor-preview-active");var Oe=P.toolbarElements.preview,We=P.toolbar_div;Oe.classList.remove("active"),We.classList.remove("disabled-for-preview")}if(Q.sideBySideRenderingFunction||(Q.sideBySideRenderingFunction=function(){var dt=P.options.previewRender(P.value(),ae);dt!=null&&(ae.innerHTML=dt)}),Ce){var tt=P.options.previewRender(P.value(),ae);tt!=null&&(ae.innerHTML=tt),Q.on("update",Q.sideBySideRenderingFunction)}else Q.off("update",Q.sideBySideRenderingFunction);Q.refresh()}function Ie(P){var Q=P.codemirror,se=Q.getWrapperElement(),ae=P.toolbar_div,ke=!!P.options.toolbar&&P.toolbarElements.preview,Ce=se.lastChild;if(Q.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&we(P),!Ce||!Ce.classList.contains("editor-preview-full")){if((Ce=document.createElement("div")).className="editor-preview-full",P.options.previewClass)if(Array.isArray(P.options.previewClass))for(var Ee=0;Ee<P.options.previewClass.length;Ee++)Ce.classList.add(P.options.previewClass[Ee]);else typeof P.options.previewClass=="string"&&Ce.classList.add(P.options.previewClass);se.appendChild(Ce)}Ce.classList.contains("editor-preview-active")?(Ce.classList.remove("editor-preview-active"),ke&&(ke.classList.remove("active"),ae.classList.remove("disabled-for-preview"))):(setTimeout(function(){Ce.classList.add("editor-preview-active")},1),ke&&(ke.classList.add("active"),ae.classList.add("disabled-for-preview")));var De=P.options.previewRender(P.value(),Ce);De!==null&&(Ce.innerHTML=De)}function qe(P,Q,se,ae){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var ke,Ce=se[0],Ee=se[1],De={},Oe={};Object.assign(De,P.getCursor("start")),Object.assign(Oe,P.getCursor("end")),ae&&(Ce=Ce.replace("#url#",ae),Ee=Ee.replace("#url#",ae)),Q?(Ce=(ke=P.getLine(De.line)).slice(0,De.ch),Ee=ke.slice(De.ch),P.replaceRange(Ce+Ee,{line:De.line,ch:0})):(ke=P.getSelection(),P.replaceSelection(Ce+ke+Ee),De.ch+=Ce.length,De!==Oe&&(Oe.ch+=Ce.length)),P.setSelection(De,Oe),P.focus()}}function Pe(P,Q,se){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=P.getCursor("start"),ke=P.getCursor("end"),Ce=ae.line;Ce<=ke.line;Ce++)(function(Ee){var De=P.getLine(Ee),Oe=De.search(/[^#]/);De=Q!==void 0?Oe<=0?Q=="bigger"?"###### "+De:"# "+De:Oe==6&&Q=="smaller"?De.substr(7):Oe==1&&Q=="bigger"?De.substr(2):Q=="bigger"?De.substr(1):"#"+De:Oe<=0?"#".repeat(se)+" "+De:Oe==se?De.substr(Oe+1):"#".repeat(se)+" "+De.substr(Oe+1),P.replaceRange(De,{line:Ee,ch:0},{line:Ee,ch:99999999999999})})(Ce);P.focus()}}function At(P,Q,se){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,ke=/^\s*/,Ce=y(P),Ee=P.getCursor("start"),De=P.getCursor("end"),Oe={quote:/^(\s*)>\s+/,"unordered-list":ae,"ordered-list":ae},We=function(Kt,xt,Qt){var rn=ae.exec(xt),sn=function(on,Tn){return{quote:">","unordered-list":se,"ordered-list":"%%i."}[on].replace("%%i",Tn)}(Kt,tt);return rn!==null?(function(on,Tn){var Er=new RegExp({quote:">","unordered-list":"\\"+se,"ordered-list":"\\d+."}[on]);return Tn&&Er.test(Tn)}(Kt,rn[2])&&(sn=""),xt=rn[1]+sn+rn[3]+xt.replace(ke,"").replace(Oe[Kt],"$1")):Qt==0&&(xt=sn+" "+xt),xt},tt=1,dt=Ee.line;dt<=De.line;dt++)(function(Kt){var xt=P.getLine(Kt);Ce[Q]?xt=xt.replace(Oe[Q],"$1"):(Q=="unordered-list"&&(xt=We("ordered-list",xt,!0)),xt=We(Q,xt,!1),tt+=1),P.replaceRange(xt,{line:Kt,ch:0},{line:Kt,ch:99999999999999})})(dt);P.focus()}}function ht(P,Q,se,ae){if(P.codemirror&&!P.isPreviewActive()){var ke=P.codemirror,Ce=y(ke)[Q];if(Ce){var Ee=ke.getCursor("start"),De=ke.getCursor("end"),Oe=ke.getLine(Ee.line),We=Oe.slice(0,Ee.ch),tt=Oe.slice(Ee.ch);Q=="link"?We=We.replace(/(.*)[^!]\[/,"$1"):Q=="image"&&(We=We.replace(/(.*)!\[$/,"$1")),tt=tt.replace(/]\(.*?\)/,""),ke.replaceRange(We+tt,{line:Ee.line,ch:0},{line:Ee.line,ch:99999999999999}),Ee.ch-=se[0].length,Ee!==De&&(De.ch-=se[0].length),ke.setSelection(Ee,De),ke.focus()}else qe(ke,Ce,se,ae)}}function nn(P,Q,se,ae){if(P.codemirror&&!P.isPreviewActive()){ae=ae===void 0?se:ae;var ke,Ce=P.codemirror,Ee=y(Ce),De=se,Oe=ae,We=Ce.getCursor("start"),tt=Ce.getCursor("end");Ee[Q]?(De=(ke=Ce.getLine(We.line)).slice(0,We.ch),Oe=ke.slice(We.ch),Q=="bold"?(De=De.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),Oe=Oe.replace(/(\*\*|__)/,"")):Q=="italic"?(De=De.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),Oe=Oe.replace(/(\*|_)/,"")):Q=="strikethrough"&&(De=De.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),Oe=Oe.replace(/(\*\*|~~)/,"")),Ce.replaceRange(De+Oe,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),Q=="bold"||Q=="strikethrough"?(We.ch-=2,We!==tt&&(tt.ch-=2)):Q=="italic"&&(We.ch-=1,We!==tt&&(tt.ch-=1))):(ke=Ce.getSelection(),Q=="bold"?ke=(ke=ke.split("**").join("")).split("__").join(""):Q=="italic"?ke=(ke=ke.split("*").join("")).split("_").join(""):Q=="strikethrough"&&(ke=ke.split("~~").join("")),Ce.replaceSelection(De+ke+Oe),We.ch+=se.length,tt.ch=We.ch+ke.length),Ce.setSelection(We,tt),Ce.focus()}}function Vt(P,Q){if(Math.abs(P)<1024)return""+P+Q[0];var se=0;do P/=1024,++se;while(Math.abs(P)>=1024&&se<Q.length);return""+P.toFixed(1)+Q[se]}function Mn(P,Q){for(var se in Q)Object.prototype.hasOwnProperty.call(Q,se)&&(Q[se]instanceof Array?P[se]=Q[se].concat(P[se]instanceof Array?P[se]:[]):Q[se]!==null&&typeof Q[se]=="object"&&Q[se].constructor===Object?P[se]=Mn(P[se]||{},Q[se]):P[se]=Q[se]);return P}function Ze(P){for(var Q=1;Q<arguments.length;Q++)P=Mn(P,arguments[Q]);return P}function pe(P){var Q=P.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),se=0;if(Q===null)return se;for(var ae=0;ae<Q.length;ae++)Q[ae].charCodeAt(0)>=19968?se+=Q[ae].length:se+=1;return se}var ie={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},oe={bold:{name:"bold",action:E,className:ie.bold,title:"Bold",default:!0},italic:{name:"italic",action:A,className:ie.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:T,className:ie.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:R,className:ie.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:R,className:ie["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:O,className:ie["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:B,className:ie["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:K,className:ie["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:L,className:ie["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:D,className:ie.code,title:"Code"},quote:{name:"quote",action:k,className:ie.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:q,className:ie["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:Y,className:ie["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:X,className:ie["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:te,className:ie.link,title:"Create Link",default:!0},image:{name:"image",action:le,className:ie.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:z,className:ie["upload-image"],title:"Import an image"},table:{name:"table",action:de,className:ie.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:ze,className:ie["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:Ie,className:ie.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:we,className:ie["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:w,className:ie.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:ie.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:He,className:ie.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:je,className:ie.redo,noDisable:!0,title:"Redo"}},be={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},F={link:"URL for the link:",image:"URL of the image:"},H={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},J={bold:"**",code:"```",italic:"*"},re={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},ye={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function xe(P){(P=P||{}).parent=this;var Q=!0;if(P.autoDownloadFontAwesome===!1&&(Q=!1),P.autoDownloadFontAwesome!==!0)for(var se=document.styleSheets,ae=0;ae<se.length;ae++)se[ae].href&&se[ae].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(Q=!1);if(Q){var ke=document.createElement("link");ke.rel="stylesheet",ke.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(ke)}if(P.element)this.element=P.element;else if(P.element===null)return void console.log("EasyMDE: Error. No element was found.");if(P.toolbar===void 0)for(var Ce in P.toolbar=[],oe)Object.prototype.hasOwnProperty.call(oe,Ce)&&(Ce.indexOf("separator-")!=-1&&P.toolbar.push("|"),(oe[Ce].default===!0||P.showIcons&&P.showIcons.constructor===Array&&P.showIcons.indexOf(Ce)!=-1)&&P.toolbar.push(Ce));if(Object.prototype.hasOwnProperty.call(P,"previewClass")||(P.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(P,"status")||(P.status=["autosave","lines","words","cursor"],P.uploadImage&&P.status.unshift("upload-image")),P.previewRender||(P.previewRender=function(De){return this.parent.markdown(De)}),P.parsingConfig=Ze({highlightFormatting:!0},P.parsingConfig||{}),P.insertTexts=Ze({},be,P.insertTexts||{}),P.promptTexts=Ze({},F,P.promptTexts||{}),P.blockStyles=Ze({},J,P.blockStyles||{}),P.autosave!=null&&(P.autosave.timeFormat=Ze({},H,P.autosave.timeFormat||{})),P.iconClassMap=Ze({},ie,P.iconClassMap||{}),P.shortcuts=Ze({},c,P.shortcuts||{}),P.maxHeight=P.maxHeight||void 0,P.direction=P.direction||"ltr",P.maxHeight!==void 0?P.minHeight=P.maxHeight:P.minHeight=P.minHeight||"300px",P.errorCallback=P.errorCallback||function(De){alert(De)},P.uploadImage=P.uploadImage||!1,P.imageMaxSize=P.imageMaxSize||2097152,P.imageAccept=P.imageAccept||"image/png, image/jpeg, image/gif, image/avif",P.imageTexts=Ze({},re,P.imageTexts||{}),P.errorMessages=Ze({},ye,P.errorMessages||{}),P.imagePathAbsolute=P.imagePathAbsolute||!1,P.imageCSRFName=P.imageCSRFName||"csrfmiddlewaretoken",P.imageCSRFHeader=P.imageCSRFHeader||!1,P.autosave!=null&&P.autosave.unique_id!=null&&P.autosave.unique_id!=""&&(P.autosave.uniqueId=P.autosave.unique_id),P.overlayMode&&P.overlayMode.combine===void 0&&(P.overlayMode.combine=!0),this.options=P,this.render(),!P.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(P.initialValue),P.uploadImage){var Ee=this;this.codemirror.on("dragenter",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragend",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragleave",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragover",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("drop",function(De,Oe){Oe.stopPropagation(),Oe.preventDefault(),P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Oe.dataTransfer.files):Ee.uploadImages(Oe.dataTransfer.files)}),this.codemirror.on("paste",function(De,Oe){P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Oe.clipboardData.files):Ee.uploadImages(Oe.clipboardData.files)})}}function Re(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}xe.prototype.uploadImages=function(P,Q,se){if(P.length!==0){for(var ae=[],ke=0;ke<P.length;ke++)ae.push(P[ke].name),this.uploadImage(P[ke],Q,se);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",ae.join(", ")))}},xe.prototype.uploadImagesUsingCustomFunction=function(P,Q){if(Q.length!==0){for(var se=[],ae=0;ae<Q.length;ae++)se.push(Q[ae].name),this.uploadImageUsingCustomFunction(P,Q[ae]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",se.join(", ")))}},xe.prototype.updateStatusBar=function(P,Q){if(this.gui.statusbar){var se=this.gui.statusbar.getElementsByClassName(P);se.length===1?this.gui.statusbar.getElementsByClassName(P)[0].textContent=Q:se.length===0?console.log("EasyMDE: status bar item "+P+" was not found."):console.log("EasyMDE: Several status bar items named "+P+" was found.")}},xe.prototype.markdown=function(P){if(a){var Q;if(Q=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?Q.breaks=!1:Q.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var se=this.options.renderingConfig.hljs||window.hljs;se&&(Q.highlight=function(ke,Ce){return Ce&&se.getLanguage(Ce)?se.highlight(Ce,ke).value:se.highlightAuto(ke).value})}a.setOptions(Q);var ae=a.parse(P);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(ae=this.options.renderingConfig.sanitizerFunction.call(this,ae)),ae=function(ke){for(var Ce=new DOMParser().parseFromString(ke,"text/html"),Ee=Ce.getElementsByTagName("li"),De=0;De<Ee.length;De++)for(var Oe=Ee[De],We=0;We<Oe.children.length;We++){var tt=Oe.children[We];tt instanceof HTMLInputElement&&tt.type==="checkbox"&&(Oe.style.marginLeft="-1.5em",Oe.style.listStyleType="none")}return Ce.documentElement.innerHTML}(ae=function(ke){for(var Ce;(Ce=u.exec(ke))!==null;){var Ee=Ce[0];if(Ee.indexOf("target=")===-1){var De=Ee.replace(/>$/,' target="_blank">');ke=ke.replace(Ee,De)}}return ke}(ae))}},xe.prototype.render=function(P){if(P||(P=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==P){this.element=P;var Q,se,ae=this.options,ke=this,Ce={};for(var Ee in ae.shortcuts)ae.shortcuts[Ee]!==null&&f[Ee]!==null&&function(xt){Ce[h(ae.shortcuts[xt])]=function(){var Qt=f[xt];typeof Qt=="function"?Qt(ke):typeof Qt=="string"&&window.open(Qt,"_blank")}}(Ee);if(Ce.Enter="newlineAndIndentContinueMarkdownList",Ce.Tab="tabAndIndentMarkdownList",Ce["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Ce.Esc=function(xt){xt.getOption("fullScreen")&&w(ke)},this.documentOnKeyDown=function(xt){(xt=xt||window.event).keyCode==27&&ke.codemirror.getOption("fullScreen")&&w(ke)},document.addEventListener("keydown",this.documentOnKeyDown,!1),ae.overlayMode?(s.defineMode("overlay-mode",function(xt){return s.overlayMode(s.getMode(xt,ae.spellChecker!==!1?"spell-checker":"gfm"),ae.overlayMode.mode,ae.overlayMode.combine)}),Q="overlay-mode",(se=ae.parsingConfig).gitHubSpice=!1):((Q=ae.parsingConfig).name="gfm",Q.gitHubSpice=!1),ae.spellChecker!==!1&&(Q="spell-checker",(se=ae.parsingConfig).name="gfm",se.gitHubSpice=!1,typeof ae.spellChecker=="function"?ae.spellChecker({codeMirrorInstance:s}):o({codeMirrorInstance:s})),this.codemirror=s.fromTextArea(P,{mode:Q,backdrop:se,theme:ae.theme!=null?ae.theme:"easymde",tabSize:ae.tabSize!=null?ae.tabSize:2,indentUnit:ae.tabSize!=null?ae.tabSize:2,indentWithTabs:ae.indentWithTabs!==!1,lineNumbers:ae.lineNumbers===!0,autofocus:ae.autofocus===!0,extraKeys:Ce,direction:ae.direction,lineWrapping:ae.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:ae.placeholder||P.getAttribute("placeholder")||"",styleSelectedText:ae.styleSelectedText!=null?ae.styleSelectedText:!d(),scrollbarStyle:ae.scrollbarStyle!=null?ae.scrollbarStyle:"native",configureMouse:function(xt,Qt,rn){return{addNew:!1}},inputStyle:ae.inputStyle!=null?ae.inputStyle:d()?"contenteditable":"textarea",spellcheck:ae.nativeSpellcheck==null||ae.nativeSpellcheck,autoRefresh:ae.autoRefresh!=null&&ae.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=ae.minHeight,ae.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=ae.maxHeight),ae.forceSync===!0){var De=this.codemirror;De.on("change",function(){De.save()})}this.gui={};var Oe=document.createElement("div");Oe.classList.add("EasyMDEContainer"),Oe.setAttribute("role","application");var We=this.codemirror.getWrapperElement();We.parentNode.insertBefore(Oe,We),Oe.appendChild(We),ae.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),ae.status!==!1&&(this.gui.statusbar=this.createStatusbar()),ae.autosave!=null&&ae.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(ke._autosave_timeout),ke._autosave_timeout=setTimeout(function(){ke.autosave()},ke.options.autosave.submit_delay||ke.options.autosave.delay||1e3)}));var tt=this;this.codemirror.on("update",function(){ae.previewImagesInEditor&&Oe.querySelectorAll(".cm-image-marker").forEach(function(xt){var Qt=xt.parentElement;if(Qt.innerText.match(/^!\[.*?\]\(.*\)/g)&&!Qt.hasAttribute("data-img-src")){var rn=Qt.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),rn&&rn.length>=2){var sn=rn[1];if(ae.imagesPreviewHandler){var on=ae.imagesPreviewHandler(rn[1]);typeof on=="string"&&(sn=on)}if(window.EMDEimagesCache[sn])Kt(Qt,window.EMDEimagesCache[sn]);else{var Tn=document.createElement("img");Tn.onload=function(){window.EMDEimagesCache[sn]={naturalWidth:Tn.naturalWidth,naturalHeight:Tn.naturalHeight,url:sn},Kt(Qt,window.EMDEimagesCache[sn])},Tn.src=sn}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(ae.autofocus===!0||P.autofocus)&&this.codemirror.focus();var dt=this.codemirror;setTimeout((function(){dt.refresh()}).bind(dt),0)}function Kt(xt,Qt){var rn,sn;xt.setAttribute("data-img-src",Qt.url),xt.setAttribute("style","--bg-image:url("+Qt.url+");--width:"+Qt.naturalWidth+"px;--height:"+(rn=Qt.naturalWidth,sn=Qt.naturalHeight,rn<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?sn+"px":sn/rn*100+"%")),tt.codemirror.setSize()}},xe.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},xe.prototype.autosave=function(){if(Re()){var P=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(P.element.form!=null&&P.element.form!=null&&P.element.form.addEventListener("submit",function(){clearTimeout(P.autosaveTimeoutId),P.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+P.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var Q=P.value();Q!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,Q):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var se=document.getElementById("autosaved");if(se!=null&&se!=null&&se!=""){var ae=new Date,ke=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(ae),Ce=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;se.innerHTML=Ce+ke}}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.clearAutosavedValue=function(){if(Re()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.openBrowseFileWindow=function(P,Q){var se=this,ae=this.gui.toolbar.getElementsByClassName("imageInput")[0];ae.click(),ae.addEventListener("change",function ke(Ce){se.options.imageUploadFunction?se.uploadImagesUsingCustomFunction(se.options.imageUploadFunction,Ce.target.files):se.uploadImages(Ce.target.files,P,Q),ae.removeEventListener("change",ke)})},xe.prototype.uploadImage=function(P,Q,se){var ae=this;function ke(Oe){ae.updateStatusBar("upload-image",Oe),setTimeout(function(){ae.updateStatusBar("upload-image",ae.options.imageTexts.sbInit)},1e4),se&&typeof se=="function"&&se(Oe),ae.options.errorCallback(Oe)}function Ce(Oe){var We=ae.options.imageTexts.sizeUnits.split(",");return Oe.replace("#image_name#",P.name).replace("#image_size#",Vt(P.size,We)).replace("#image_max_size#",Vt(ae.options.imageMaxSize,We))}if(Q=Q||function(Oe){he(ae,Oe)},P.size>this.options.imageMaxSize)ke(Ce(this.options.errorMessages.fileTooLarge));else{var Ee=new FormData;Ee.append("image",P),ae.options.imageCSRFToken&&!ae.options.imageCSRFHeader&&Ee.append(ae.options.imageCSRFName,ae.options.imageCSRFToken);var De=new XMLHttpRequest;De.upload.onprogress=function(Oe){if(Oe.lengthComputable){var We=""+Math.round(100*Oe.loaded/Oe.total);ae.updateStatusBar("upload-image",ae.options.imageTexts.sbProgress.replace("#file_name#",P.name).replace("#progress#",We))}},De.open("POST",this.options.imageUploadEndpoint),ae.options.imageCSRFToken&&ae.options.imageCSRFHeader&&De.setRequestHeader(ae.options.imageCSRFName,ae.options.imageCSRFToken),De.onload=function(){try{var Oe=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void ke(Ce(ae.options.errorMessages.importError))}this.status===200&&Oe&&!Oe.error&&Oe.data&&Oe.data.filePath?Q((ae.options.imagePathAbsolute?"":window.location.origin+"/")+Oe.data.filePath):Oe.error&&Oe.error in ae.options.errorMessages?ke(Ce(ae.options.errorMessages[Oe.error])):Oe.error?ke(Ce(Oe.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),ke(Ce(ae.options.errorMessages.importError)))},De.onerror=function(Oe){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+Oe.target.status+" ("+Oe.target.statusText+")"),ke(ae.options.errorMessages.importError)},De.send(Ee)}},xe.prototype.uploadImageUsingCustomFunction=function(P,Q){var se=this;P.apply(this,[Q,function(ae){he(se,ae)},function(ae){var ke=function(Ce){var Ee=se.options.imageTexts.sizeUnits.split(",");return Ce.replace("#image_name#",Q.name).replace("#image_size#",Vt(Q.size,Ee)).replace("#image_max_size#",Vt(se.options.imageMaxSize,Ee))}(ae);se.updateStatusBar("upload-image",ke),setTimeout(function(){se.updateStatusBar("upload-image",se.options.imageTexts.sbInit)},1e4),se.options.errorCallback(ke)}])},xe.prototype.setPreviewMaxHeight=function(){var P=this.codemirror.getWrapperElement(),Q=P.nextSibling,se=parseInt(window.getComputedStyle(P).paddingTop),ae=parseInt(window.getComputedStyle(P).borderTopWidth),ke=(parseInt(this.options.maxHeight)+2*se+2*ae).toString()+"px";Q.style.height=ke},xe.prototype.createSideBySide=function(){var P=this.codemirror,Q=P.getWrapperElement(),se=Q.nextSibling;if(!se||!se.classList.contains("editor-preview-side")){if((se=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var ae=0;ae<this.options.previewClass.length;ae++)se.classList.add(this.options.previewClass[ae]);else typeof this.options.previewClass=="string"&&se.classList.add(this.options.previewClass);Q.parentNode.insertBefore(se,Q.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return se;var ke=!1,Ce=!1;return P.on("scroll",function(Ee){if(ke)ke=!1;else{Ce=!0;var De=Ee.getScrollInfo().height-Ee.getScrollInfo().clientHeight,Oe=parseFloat(Ee.getScrollInfo().top)/De,We=(se.scrollHeight-se.clientHeight)*Oe;se.scrollTop=We}}),se.onscroll=function(){if(Ce)Ce=!1;else{ke=!0;var Ee=se.scrollHeight-se.clientHeight,De=parseFloat(se.scrollTop)/Ee,Oe=(P.getScrollInfo().height-P.getScrollInfo().clientHeight)*De;P.scrollTo(0,Oe)}},se},xe.prototype.createToolbar=function(P){if((P=P||this.options.toolbar)&&P.length!==0){var Q;for(Q=0;Q<P.length;Q++)oe[P[Q]]!=null&&(P[Q]=oe[P[Q]]);var se=document.createElement("div");se.className="editor-toolbar",se.setAttribute("role","toolbar");var ae=this,ke={};for(ae.toolbar=P,Q=0;Q<P.length;Q++)if((P[Q].name!="guide"||ae.options.toolbarGuideIcon!==!1)&&!(ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Q].name)!=-1||(P[Q].name=="fullscreen"||P[Q].name=="side-by-side")&&d())){if(P[Q]==="|"){for(var Ce=!1,Ee=Q+1;Ee<P.length;Ee++)P[Ee]==="|"||ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Ee].name)!=-1||(Ce=!0);if(!Ce)continue}(function(We){var tt;if(tt=We==="|"?v():We.children?p(We,ae.options.toolbarTips,ae.options.shortcuts,ae):g(We,!0,ae.options.toolbarTips,ae.options.shortcuts,"button",ae),ke[We.name||We]=tt,se.appendChild(tt),We.name==="upload-image"){var dt=document.createElement("input");dt.className="imageInput",dt.type="file",dt.multiple=!0,dt.name="image",dt.accept=ae.options.imageAccept,dt.style.display="none",dt.style.opacity=0,se.appendChild(dt)}})(P[Q])}ae.toolbar_div=se,ae.toolbarElements=ke;var De=this.codemirror;De.on("cursorActivity",function(){var We=y(De);for(var tt in ke)(function(dt){var Kt=ke[dt];We[dt]?Kt.classList.add("active"):dt!="fullscreen"&&dt!="side-by-side"&&Kt.classList.remove("active")})(tt)});var Oe=De.getWrapperElement();return Oe.parentNode.insertBefore(se,Oe),se}},xe.prototype.createStatusbar=function(P){P=P||this.options.status;var Q=this.options,se=this.codemirror;if(P&&P.length!==0){var ae,ke,Ce,Ee,De=[];for(ae=0;ae<P.length;ae++)if(ke=void 0,Ce=void 0,Ee=void 0,typeof P[ae]=="object")De.push({className:P[ae].className,defaultValue:P[ae].defaultValue,onUpdate:P[ae].onUpdate,onActivity:P[ae].onActivity});else{var Oe=P[ae];Oe==="words"?(Ee=function(xt){xt.innerHTML=pe(se.getValue())},ke=function(xt){xt.innerHTML=pe(se.getValue())}):Oe==="lines"?(Ee=function(xt){xt.innerHTML=se.lineCount()},ke=function(xt){xt.innerHTML=se.lineCount()}):Oe==="cursor"?(Ee=function(xt){xt.innerHTML="1:1"},Ce=function(xt){var Qt=se.getCursor(),rn=Qt.line+1,sn=Qt.ch+1;xt.innerHTML=rn+":"+sn}):Oe==="autosave"?Ee=function(xt){Q.autosave!=null&&Q.autosave.enabled===!0&&xt.setAttribute("id","autosaved")}:Oe==="upload-image"&&(Ee=function(xt){xt.innerHTML=Q.imageTexts.sbInit}),De.push({className:Oe,defaultValue:Ee,onUpdate:ke,onActivity:Ce})}var We=document.createElement("div");for(We.className="editor-statusbar",ae=0;ae<De.length;ae++){var tt=De[ae],dt=document.createElement("span");dt.className=tt.className,typeof tt.defaultValue=="function"&&tt.defaultValue(dt),typeof tt.onUpdate=="function"&&this.codemirror.on("update",function(xt,Qt){return function(){Qt.onUpdate(xt)}}(dt,tt)),typeof tt.onActivity=="function"&&this.codemirror.on("cursorActivity",function(xt,Qt){return function(){Qt.onActivity(xt)}}(dt,tt)),We.appendChild(dt)}var Kt=this.codemirror.getWrapperElement();return Kt.parentNode.insertBefore(We,Kt.nextSibling),We}},xe.prototype.value=function(P){var Q=this.codemirror;if(P===void 0)return Q.getValue();if(Q.getDoc().setValue(P),this.isPreviewActive()){var se=Q.getWrapperElement().lastChild,ae=this.options.previewRender(P,se);ae!==null&&(se.innerHTML=ae)}return this},xe.toggleBold=E,xe.toggleItalic=A,xe.toggleStrikethrough=T,xe.toggleBlockquote=k,xe.toggleHeadingSmaller=R,xe.toggleHeadingBigger=O,xe.toggleHeading1=B,xe.toggleHeading2=K,xe.toggleHeading3=L,xe.toggleHeading4=$,xe.toggleHeading5=I,xe.toggleHeading6=U,xe.toggleCodeBlock=D,xe.toggleUnorderedList=q,xe.toggleOrderedList=Y,xe.cleanBlock=X,xe.drawLink=te,xe.drawImage=le,xe.drawUploadedImage=z,xe.drawTable=de,xe.drawHorizontalRule=ze,xe.undo=He,xe.redo=je,xe.togglePreview=Ie,xe.toggleSideBySide=we,xe.toggleFullScreen=w,xe.prototype.toggleBold=function(){E(this)},xe.prototype.toggleItalic=function(){A(this)},xe.prototype.toggleStrikethrough=function(){T(this)},xe.prototype.toggleBlockquote=function(){k(this)},xe.prototype.toggleHeadingSmaller=function(){R(this)},xe.prototype.toggleHeadingBigger=function(){O(this)},xe.prototype.toggleHeading1=function(){B(this)},xe.prototype.toggleHeading2=function(){K(this)},xe.prototype.toggleHeading3=function(){L(this)},xe.prototype.toggleHeading4=function(){$(this)},xe.prototype.toggleHeading5=function(){I(this)},xe.prototype.toggleHeading6=function(){U(this)},xe.prototype.toggleCodeBlock=function(){D(this)},xe.prototype.toggleUnorderedList=function(){q(this)},xe.prototype.toggleOrderedList=function(){Y(this)},xe.prototype.cleanBlock=function(){X(this)},xe.prototype.drawLink=function(){te(this)},xe.prototype.drawImage=function(){le(this)},xe.prototype.drawUploadedImage=function(){z(this)},xe.prototype.drawTable=function(){de(this)},xe.prototype.drawHorizontalRule=function(){ze(this)},xe.prototype.undo=function(){He(this)},xe.prototype.redo=function(){je(this)},xe.prototype.togglePreview=function(){Ie(this)},xe.prototype.toggleSideBySide=function(){we(this)},xe.prototype.toggleFullScreen=function(){w(this)},xe.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},xe.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},xe.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},xe.prototype.getState=function(){return y(this.codemirror)},xe.prototype.toTextArea=function(){var P=this.codemirror,Q=P.getWrapperElement(),se=Q.parentNode;se&&(this.gui.toolbar&&se.removeChild(this.gui.toolbar),this.gui.statusbar&&se.removeChild(this.gui.statusbar),this.gui.sideBySide&&se.removeChild(this.gui.sideBySide)),se.parentNode.insertBefore(Q,se),se.remove(),P.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},r.exports=xe},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})}(JO)),JO.exports}var ATt=STt();const CTt=sa(ATt);(()=>{var e=s=>s==null?!1:typeof s=="boolean"?s:s.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var t="min-label",n="max-label",r="#1E293B",i=()=>{let s=null,o=null,a=null,l,u=!1,f=r,c="",d,h=null,p=null,g=null,v=[],y=()=>{var O;let B=(O=s==null?void 0:s.shadowRoot)==null?void 0:O.querySelector(".range-slider-box");h=document.createElement("div"),h.classList.add("labels-row"),B.prepend(h)},b=O=>{let B=document.createElement("label");return B.className=O,B.setAttribute("for","range-slider"),B},w=()=>{p=b(t),p.textContent=R(a==null?void 0:a.getTextMin(),c),g=b(n),g.textContent=R(a==null?void 0:a.getTextMax(),c),o==null||o.before(p),o==null||o.after(g);let O=a==null?void 0:a.getValues();if(O)for(let B=0;B<O.length;B++){let K=b(`value${B+1}-label generated-label`);K.textContent=R(O[B],c),v.push(K),h==null||h.append(K)}},E=()=>{for(let O of v)!O||O.remove();p==null||p.remove(),g==null||g.remove(),h==null||h.remove(),v=[]},A=O=>{u=O,u?(y(),w()):E()},T=O=>{f=O;for(let B of v)!B||(B.style.color=f??r);p&&(p.style.color=f??r),g&&(g.style.color=f??r)},D=O=>{c=O,l&&l()},k=()=>{!a||!h||h.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},R=(O,B)=>{let K=`${(O??"").toString()}${B}`;return d&&typeof d=="function"?d(O):K};return{get name(){return"Generated Labels"},init:(O,B,K,L)=>{var $,I,U;s=O,a=L,o=($=O.shadowRoot)==null?void 0:$.getElementById("range-slider"),l=B,f=(I=s.getAttribute("generate-labels-text-color"))!=null?I:r,c=(U=s.getAttribute("generate-labels-units"))!=null?U:"",A(e(s.getAttribute("generate-labels"))),k(),T(f)},update:O=>{if(!(!u||!O.values)){k();for(let B=0;B<O.values.length;B++){let K=O.values[B],L=v[B];if(K===void 0&&L){L.remove(),v[B]=void 0;continue}if(K!==void 0&&!L){let $=b(`value${B+1}-label generated-label`);if($.textContent=R(K,c),v[B]=$,O.values.length<=0)h==null||h.append($);else if(B===0)h==null||h.append($);else{let I=v[B-1];I==null||I.after($)}continue}!L||(L.textContent=R(K,c))}p&&(p.textContent=R(O.textMin,c)),g&&(g.textContent=R(O.textMax,c)),T(f)}},onAttrChange:(O,B)=>{O==="generate-labels"&&A(e(B)),O==="generate-labels-text-color"&&T(B),O==="generate-labels-units"&&D(B)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return u??!1},set:O=>{A(e(O))}}},{name:"textColor",attributes:{get(){return f??""},set:O=>{T(O)}}},{name:"generateLabelsTextColor",attributes:{get(){return f??""},set:O=>{T(O)}}},{name:"units",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"generateLabelsUnits",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:O=>{d=O,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:E}};window.tcRangeSliderPlugins.push(i)})();function kTt(e,t){Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])})}class TTt extends ZCe{register(){super.register()}unregister(){super.unregister()}build(){const t=this.schema.properties,n=this.options,r=this.schema.description,i=this.theme,s=this.defaults.startVals[this.key];n.compact||(this.header=this.label=i.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=i.getFormInputDescription(this.translateProperty(r))),n.infoText&&(this.infoButton=i.getInfoButton(this.translateProperty(n.infoText)));const o=document.createElement("tc-range-slider"),a=Object.keys(t).find(f=>f.includes("min")),l=Object.keys(t).find(f=>f.includes("max")),u={min:t[a].minimum,max:t[l].maximum,value1:(s==null?void 0:s[a])||t[a].default,value2:(s==null?void 0:s[l])||t[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};kTt(o,u),this.input=o,this.input.id=this.formname,this.control=i.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",f=>{f.preventDefault(),f.stopPropagation(),this.value={[a]:f.detail.value1,[l]:f.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const Qk=e=>["feature","features"].some(t=>(e==null?void 0:e.format)===t),eT=e=>["polygon","polygons"].includes(e==null?void 0:e.format),tT=e=>["point","points"].includes(e==null?void 0:e.format),nT=e=>["bounding-boxes","bounding-box"].includes(e==null?void 0:e.format),rT=e=>["lines","line"].includes(e==null?void 0:e.format),R$=e=>(e==null?void 0:e.type)==="wkt",F$=e=>(e==null?void 0:e.type)==="geojson",Mv=e=>["bounding-boxes","polygons","features","points","lines"].includes(e==null?void 0:e.format),DTt=e=>Qk(e)||eT(e)||nT(e)||tT(e)||rT(e);function DEe(e,t){Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])})}const LTt=(e,t)=>{if(!e||!t)return!1;switch(t){case"string":return typeof e=="string";case"number":return!isNaN(e);case"boolean":return typeof e=="boolean";case"array":return Array.isArray(e);case"object":return typeof e=="object"&&!!Object.keys(e).length}return!1};class Fi extends ZCe{register(){super.register()}unregister(){super.unregister()}build(){var c,d,h,p;const t=this.options,n=this.schema.description,r=this.theme;t.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),t.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(t.infoText)));const i=document.createElement("eox-drawtools");let s;switch(!0){case eT(this.schema):s="Polygon";break;case nT(this.schema):s="Box";break;case tT(this.schema):s="Point";break;case rT(this.schema):s="LineString";break;default:s="Box";break}let o;switch(!0){case R$(this.schema):o="wkt";break;case F$(this.schema):o="geojson";break;default:o="feature";break}const a={type:s,format:o};if((d=(c=this.schema)==null?void 0:c.options)!=null&&d.projection&&(a.projection=this.schema.options.projection),Qk(this.schema)&&(a["layer-id"]=this.schema.options.layerId),Mv(this.schema)&&(a["multiple-features"]=!0,a["show-list"]=!0),"for"in(this.schema.options??{}))a.for=this.options.for;else{const g=document.createElement("eox-map");g.projection="EPSG:4326";const v="map-"+this.formname.replace(/[^\w\s]/gi,"");g.layers=[{type:"Tile",source:{type:"OSM"}}],DEe(g,{id:v,style:"width: 100%; height: 300px;"}),this.container.appendChild(g),i.for=g}DEe(i,a),t.autoStartSelection!==!1&&i.updateComplete.then(()=>{i.startDrawing()}),this.input=i,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0);const u=(p=(h=this.schema)==null?void 0:h.options)==null?void 0:p.featureProperty,f=(g,v)=>g.length?!Mv(this.schema)&&g.length===1?v(g[0]):g.map(v):v(g);this.input.addEventListener("drawupdate",g=>{var v;switch(g.preventDefault(),g.stopPropagation(),!0){case!g.detail:{this.value=null;break}case R$(this.schema):{this.value=g.detail;break}case F$(this.schema):{const y=g.detail;if(Mv(this.schema)){this.value=y;break}this.value=((v=y.features)==null?void 0:v[0])??null;break}case rT(this.schema):{this.value=f(g.detail,y=>y.getGeometry().getCoordinates());break}case Qk(this.schema):{if(!g.detail.length){this.value=null;break}const y=b=>u?b.get(u)??b:b;this.value=f(g.detail,y);break}case nT(this.schema):{if(!g.detail.length){this.value=null;break}const y=b=>b.getGeometry().getExtent();this.value=f(g.detail,y);break}case eT(this.schema):{if(!g.detail.length){this.value=null;break}this.value=f(g.detail,y=>y);break}case tT(this.schema):{if(!g.detail.length){this.value=null;break}this.value=f(g.detail,y=>{var b;return(b=y.getGeometry())==null?void 0:b.getCoordinates()});break}}this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&(this.input.parentNode.removeChild(this.input),this.input.discardDrawing(),this.input.remove()),super.destroy()}}function RTt(e){return function(t,n,r){let i=[];return t.properties&&Object.keys(t.properties).forEach(s=>{const o=t.properties[s];if(!(DTt(o)&&(o.format==="feature"||e.some(u=>u.format===o.format&&u.type===o.type))))return;const l=PTt(s,n[s],r);if(l.length){i.push(...l);return}switch(!0){case R$(o):{i.push(...NTt(s,n[s],r));break}case F$(o):{i.push(...BTt(s,n[s],r,o));break}case Qk(o):{i.push(...kw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:OTt}));break}case nT(o):{i.push(...kw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:FTt}));break}case eT(o):{i.push(...kw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:MTt}));break}case tT(o):{i.push(...kw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:$Tt}));break}case rT(o):{i.push(...kw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:ITt}));break}}}),i}}function kw({key:e,subValue:t,path:n,subSchema:r,validationFn:i}){if(Mv(r)){if(Array.isArray(t)){if(!t.length)return[{path:`${n}.${e}`,message:"Value is expected to have at least one value",property:"format"}]}else return[{path:`${n}.${e}`,message:`Value is expected to be an array but got typeof ${typeof t}`,property:"format"}];return t==null?void 0:t.flatMap((s,o)=>i(`${e}.${o}`,s,n,r))}else return i(e,t,n,r)}function FTt(e,t,n){const r=[];return t.length!==4?[{path:`${n}.${e}`,message:`Value is expected to have 4 items but got ${t.length}`,property:"format"}]:(t.forEach((i,s)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${s}`,message:`extent is expected to be of type number but got ${i}`,property:"format"})}),r)}function OTt(e,t,n,r){var s;let i;return Mv(r)?i=(s=r==null?void 0:r.items)==null?void 0:s.type:i=r.type,i?LTt(t,i)?[]:[{path:`${n}.${e}`,message:`Value is expected to be a valid ${i}`,property:"format"}]:[]}function MTt(e,t,n){return typeof t!="object"||!Object.keys(t).length?[{path:`${n}.${e}`,message:"Value was expected to be a feature object ",property:"format"}]:[]}function $Tt(e,t,n){const r=[];return t.length!==2?[{path:`${n}.${e}`,message:`Value is expected to have 2 items but got ${t.length}`,property:"format"}]:(t.forEach((i,s)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${s}`,message:`coordinates is expected to be of type number but got ${i}`,property:"format"})}),r)}function ITt(e,t,n){const r=[];return t.length<2?[{path:`${n}.${e}`,message:`Value is expected to have at least 2 points but got ${t.length}`,property:"format"}]:(t.forEach((i,s)=>{i.forEach((o,a)=>{typeof o!="number"&&r.push({path:`${n}.${e}.${s}.${a}`,message:`coordinates is expected to be of type number but got ${o}`,property:"format"})})}),r)}function PTt(e,t,n){return t?[]:[{path:`${n}.${e}`,message:`invalid value ${JSON.stringify(t)}`,property:"type"}]}function NTt(e,t,n){return typeof t!="string"?[{path:`${n}.${e}`,message:"Value is expected to be a valid wkt string",property:"type"}]:t==="GEOMETRYCOLLECTION EMPTY"?[{path:`${n}.${e}`,message:"Should have at least 1 Geometry",property:"type"}]:[]}function BTt(e,t,n,r){var i;if(typeof t!="object"||!Object.keys(t).length)return[{path:`${n}.${e}`,message:"Value is expected to be a valid geojson object",property:"type"}];if(Mv(r)){if(t.type!=="FeatureCollection")return[{path:`${n}.${e}`,message:"Value is expected to be a valid FeaturesCollection geojson",property:"type"}];if(!((i=t==null?void 0:t.features)!=null&&i.length))return[{path:`${n}.${e}`,message:"Value is expected to have at least one feature",property:"type"}]}else if(!(t!=null&&t.geometry.type))return[{path:`${n}.${e}`,message:"Value is expected to have a valid geometry",property:"type"}];return[]}const zTt=[{type:"object",format:"minmax",func:TTt},{type:"array",format:"bounding-boxes",func:Fi},{type:"wkt",format:"bounding-boxes",func:Fi},{type:"geojson",format:"bounding-boxes",func:Fi},{type:"array",format:"bounding-box",func:Fi},{type:"wkt",format:"bounding-box",func:Fi},{type:"geojson",format:"bounding-box",func:Fi},{type:"array",format:"polygons",func:Fi},{type:"wkt",format:"polygons",func:Fi},{type:"geojson",format:"polygons",func:Fi},{type:"object",format:"polygon",func:Fi},{type:"wkt",format:"polygon",func:Fi},{type:"geojson",format:"polygon",func:Fi},{type:"array",format:"points",func:Fi},{type:"wkt",format:"points",func:Fi},{type:"geojson",format:"points",func:Fi},{type:"array",format:"point",func:Fi},{type:"wkt",format:"point",func:Fi},{type:"geojson",format:"point",func:Fi},{format:"feature",func:Fi},{type:"array",format:"features",func:Fi},{type:"wkt",format:"features",func:Fi},{type:"geojson",format:"features",func:Fi},{type:"array",format:"line",func:Fi},{type:"wkt",format:"line",func:Fi},{type:"geojson",format:"line",func:Fi},{type:"array",format:"lines",func:Fi},{type:"wkt",format:"lines",func:Fi},{type:"geojson",format:"lines",func:Fi}],jTt=(e,t)=>{const n=[...zTt,...t];Ow.defaults.custom_validators.push(RTt(n)),n.map(({type:r,format:i,func:s})=>{Ow.defaults.startVals=e,Ow.defaults.editors[i]=s,Ow.defaults.resolvers.unshift(o=>{if(o.type===r&&o.format===i||o.format==="feature")return i})})};window.SimpleMDE=CTt;const LEe=e=>{jTt(e.value||{},e.customEditorInterfaces||[]);const t=e.renderRoot.querySelector("form");let r=new Ow(t,{schema:e.schema,...e.value?{startval:e.value}:{},theme:"html",ajax:!0,...e.options});return r.on("ready",()=>{if(Object.values(r.editors).some(i=>i instanceof sUe)){const i=document.createElement("style");i.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,e.renderRoot.insertBefore(i,e.renderRoot.firstChild)}}),r};async function REe(e){if(e&&typeof e!="object")try{const t=await fetch(e);if(t.ok)return await t.json();console.error("Failed to fetch schema from URL: ",t.status)}catch(t){console.error("Error fetching schema: ",t)}return e}const UTt=`
  * {
    font-family: Roboto, sans-serif;
  }
`,qTt=`
  :host, :root {
    --background-color: var(--eox-background-color, transparent);
    background-color: var(--background-color, transparent);
  }
  form {
    background-color: var(--background-color, transparent);
  }
  .CodeMirror {
    background-color: var(--background-color, transparent);
  }
  select {
    background-color: var(--background-color);
  }
  [data-schemaid=root] > .je-header {
    display: none;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
  .je-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #0002;
    padding: 0.5rem 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
  }
  .je-indented-panel span {
    display: flex;
    align-items: center;
  }
  .je-header span:first-of-type, form[data-theme="html"] .je-form-input-label {
    font-size: 14px;
    font-weight: 600;
  }
  form[data-theme="html"] .je-indented-panel {
    border: none !important;
    margin: 0.4rem;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    text-indent: 0px;
    margin: 0px;
    display: flex;
  }
  .json-editor-btntype-toggle::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
   .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
    margin: 0px 0.5rem !important;
  }
  .json-editor-btntype-add:hover,
   .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }
  .je-indented-panel .row {
    margin-top: 10px;
  }
  .je-object__controls {
    margin: 0 !important;
  }
  .EasyMDEContainer span {
    display: unset;
  }
  .editor-toolbar button {
    box-shadow: none;
    color: #2c3e50 !important;
  }
  .editor-toolbar button:hover:not([disabled]):not(.icon),
  .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
  }
  .editor-toolbar button i {
    font-size: 17px;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }
`;var o_={exports:{}};o_.exports;var FEe;function HTt(){return FEe||(FEe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",v="[object Number]",y="[object Null]",b="[object Object]",w="[object Promise]",E="[object Proxy]",A="[object RegExp]",T="[object Set]",D="[object String]",k="[object Symbol]",R="[object Undefined]",O="[object WeakMap]",B="[object ArrayBuffer]",K="[object DataView]",L="[object Float32Array]",$="[object Float64Array]",I="[object Int8Array]",U="[object Int16Array]",q="[object Int32Array]",Y="[object Uint8Array]",X="[object Uint8ClampedArray]",te="[object Uint16Array]",le="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,de={};de[L]=de[$]=de[I]=de[U]=de[q]=de[Y]=de[X]=de[te]=de[le]=!0,de[a]=de[l]=de[B]=de[f]=de[K]=de[c]=de[d]=de[h]=de[g]=de[v]=de[b]=de[A]=de[T]=de[D]=de[O]=!1;var ze=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,He=typeof self=="object"&&self&&self.Object===Object&&self,je=ze||He||Function("return this")(),we=t&&!t.nodeType&&t,Ie=we&&!0&&e&&!e.nodeType&&e,qe=Ie&&Ie.exports===we,Pe=qe&&ze.process,At=function(){try{return Pe&&Pe.binding&&Pe.binding("util")}catch{}}(),ht=At&&At.isTypedArray;function nn(Z,me){for(var Be=-1,yt=Z==null?0:Z.length,pn=0,It=[];++Be<yt;){var In=Z[Be];me(In,Be,Z)&&(It[pn++]=In)}return It}function Vt(Z,me){for(var Be=-1,yt=me.length,pn=Z.length;++Be<yt;)Z[pn+Be]=me[Be];return Z}function Mn(Z,me){for(var Be=-1,yt=Z==null?0:Z.length;++Be<yt;)if(me(Z[Be],Be,Z))return!0;return!1}function Ze(Z,me){for(var Be=-1,yt=Array(Z);++Be<Z;)yt[Be]=me(Be);return yt}function pe(Z){return function(me){return Z(me)}}function ie(Z,me){return Z.has(me)}function oe(Z,me){return Z==null?void 0:Z[me]}function be(Z){var me=-1,Be=Array(Z.size);return Z.forEach(function(yt,pn){Be[++me]=[pn,yt]}),Be}function F(Z,me){return function(Be){return Z(me(Be))}}function H(Z){var me=-1,Be=Array(Z.size);return Z.forEach(function(yt){Be[++me]=yt}),Be}var J=Array.prototype,re=Function.prototype,ye=Object.prototype,xe=je["__core-js_shared__"],Re=re.toString,P=ye.hasOwnProperty,Q=function(){var Z=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),se=ye.toString,ae=RegExp("^"+Re.call(P).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=qe?je.Buffer:void 0,Ce=je.Symbol,Ee=je.Uint8Array,De=ye.propertyIsEnumerable,Oe=J.splice,We=Ce?Ce.toStringTag:void 0,tt=Object.getOwnPropertySymbols,dt=ke?ke.isBuffer:void 0,Kt=F(Object.keys,Object),xt=hs(je,"DataView"),Qt=hs(je,"Map"),rn=hs(je,"Promise"),sn=hs(je,"Set"),on=hs(je,"WeakMap"),Tn=hs(Object,"create"),Er=qs(xt),Ki=qs(Qt),ds=qs(rn),Hi=qs(sn),No=qs(on),qn=Ce?Ce.prototype:void 0,Mr=qn?qn.valueOf:void 0;function Lr(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var yt=Z[me];this.set(yt[0],yt[1])}}function gn(){this.__data__=Tn?Tn(null):{},this.size=0}function Kr(Z){var me=this.has(Z)&&delete this.__data__[Z];return this.size-=me?1:0,me}function sr(Z){var me=this.__data__;if(Tn){var Be=me[Z];return Be===r?void 0:Be}return P.call(me,Z)?me[Z]:void 0}function Ni(Z){var me=this.__data__;return Tn?me[Z]!==void 0:P.call(me,Z)}function tr(Z,me){var Be=this.__data__;return this.size+=this.has(Z)?0:1,Be[Z]=Tn&&me===void 0?r:me,this}Lr.prototype.clear=gn,Lr.prototype.delete=Kr,Lr.prototype.get=sr,Lr.prototype.has=Ni,Lr.prototype.set=tr;function $r(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var yt=Z[me];this.set(yt[0],yt[1])}}function to(){this.__data__=[],this.size=0}function ge(Z){var me=this.__data__,Be=Ar(me,Z);if(Be<0)return!1;var yt=me.length-1;return Be==yt?me.pop():Oe.call(me,Be,1),--this.size,!0}function Le(Z){var me=this.__data__,Be=Ar(me,Z);return Be<0?void 0:me[Be][1]}function it(Z){return Ar(this.__data__,Z)>-1}function Ke(Z,me){var Be=this.__data__,yt=Ar(Be,Z);return yt<0?(++this.size,Be.push([Z,me])):Be[yt][1]=me,this}$r.prototype.clear=to,$r.prototype.delete=ge,$r.prototype.get=Le,$r.prototype.has=it,$r.prototype.set=Ke;function Et(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var yt=Z[me];this.set(yt[0],yt[1])}}function an(){this.size=0,this.__data__={hash:new Lr,map:new(Qt||$r),string:new Lr}}function en(Z){var me=zo(this,Z).delete(Z);return this.size-=me?1:0,me}function wt(Z){return zo(this,Z).get(Z)}function et(Z){return zo(this,Z).has(Z)}function hn(Z,me){var Be=zo(this,Z),yt=Be.size;return Be.set(Z,me),this.size+=Be.size==yt?0:1,this}Et.prototype.clear=an,Et.prototype.delete=en,Et.prototype.get=wt,Et.prototype.has=et,Et.prototype.set=hn;function An(Z){var me=-1,Be=Z==null?0:Z.length;for(this.__data__=new Et;++me<Be;)this.add(Z[me])}function zt(Z){return this.__data__.set(Z,r),this}function jt(Z){return this.__data__.has(Z)}An.prototype.add=An.prototype.push=zt,An.prototype.has=jt;function Sr(Z){var me=this.__data__=new $r(Z);this.size=me.size}function ci(){this.__data__=new $r,this.size=0}function Zt(Z){var me=this.__data__,Be=me.delete(Z);return this.size=me.size,Be}function Xe(Z){return this.__data__.get(Z)}function pt(Z){return this.__data__.has(Z)}function Xn(Z,me){var Be=this.__data__;if(Be instanceof $r){var yt=Be.__data__;if(!Qt||yt.length<n-1)return yt.push([Z,me]),this.size=++Be.size,this;Be=this.__data__=new Et(yt)}return Be.set(Z,me),this.size=Be.size,this}Sr.prototype.clear=ci,Sr.prototype.delete=Zt,Sr.prototype.get=Xe,Sr.prototype.has=pt,Sr.prototype.set=Xn;function ni(Z,me){var Be=Vi(Z),yt=!Be&&Gi(Z),pn=!Be&&!yt&&ps(Z),It=!Be&&!yt&&!pn&&Wi(Z),In=Be||yt||pn||It,dr=In?Ze(Z.length,String):[],kr=dr.length;for(var Ln in Z)P.call(Z,Ln)&&!(In&&(Ln=="length"||pn&&(Ln=="offset"||Ln=="parent")||It&&(Ln=="buffer"||Ln=="byteLength"||Ln=="byteOffset")||Qi(Ln,kr)))&&dr.push(Ln);return dr}function Ar(Z,me){for(var Be=Z.length;Be--;)if(ll(Z[Be][0],me))return Be;return-1}function Rr(Z,me,Be){var yt=me(Z);return Vi(Z)?yt:Vt(yt,Be(Z))}function nr(Z){return Z==null?Z===void 0?R:y:We&&We in Object(Z)?ol(Z):fa(Z)}function qt(Z){return so(Z)&&nr(Z)==a}function vi(Z,me,Be,yt,pn){return Z===me?!0:Z==null||me==null||!so(Z)&&!so(me)?Z!==Z&&me!==me:Ji(Z,me,Be,yt,vi,pn)}function Ji(Z,me,Be,yt,pn,It){var In=Vi(Z),dr=Vi(me),kr=In?l:Cr(Z),Ln=dr?l:Cr(me);kr=kr==a?b:kr,Ln=Ln==a?b:Ln;var Ai=kr==b,Jr=Ln==b,or=kr==Ln;if(or&&ps(Z)){if(!ps(me))return!1;In=!0,Ai=!1}if(or&&!Ai)return It||(It=new Sr),In||Wi(Z)?no(Z,me,Be,yt,pn,It):Bo(Z,me,kr,Be,yt,pn,It);if(!(Be&i)){var di=Ai&&P.call(Z,"__wrapped__"),xs=Jr&&P.call(me,"__wrapped__");if(di||xs){var Gs=di?Z.value():Z,Bi=xs?me.value():me;return It||(It=new Sr),pn(Gs,Bi,Be,yt,It)}}return or?(It||(It=new Sr),bs(Z,me,Be,yt,pn,It)):!1}function bi(Z){if(!Ma(Z)||Os(Z))return!1;var me=Hs(Z)?ae:z;return me.test(qs(Z))}function js(Z){return so(Z)&&fi(Z.length)&&!!de[nr(Z)]}function xo(Z){if(!Us(Z))return Kt(Z);var me=[];for(var Be in Object(Z))P.call(Z,Be)&&Be!="constructor"&&me.push(Be);return me}function no(Z,me,Be,yt,pn,It){var In=Be&i,dr=Z.length,kr=me.length;if(dr!=kr&&!(In&&kr>dr))return!1;var Ln=It.get(Z);if(Ln&&It.get(me))return Ln==me;var Ai=-1,Jr=!0,or=Be&s?new An:void 0;for(It.set(Z,me),It.set(me,Z);++Ai<dr;){var di=Z[Ai],xs=me[Ai];if(yt)var Gs=In?yt(xs,di,Ai,me,Z,It):yt(di,xs,Ai,Z,me,It);if(Gs!==void 0){if(Gs)continue;Jr=!1;break}if(or){if(!Mn(me,function(Bi,zi){if(!ie(or,zi)&&(di===Bi||pn(di,Bi,Be,yt,It)))return or.push(zi)})){Jr=!1;break}}else if(!(di===xs||pn(di,xs,Be,yt,It))){Jr=!1;break}}return It.delete(Z),It.delete(me),Jr}function Bo(Z,me,Be,yt,pn,It,In){switch(Be){case K:if(Z.byteLength!=me.byteLength||Z.byteOffset!=me.byteOffset)return!1;Z=Z.buffer,me=me.buffer;case B:return!(Z.byteLength!=me.byteLength||!It(new Ee(Z),new Ee(me)));case f:case c:case v:return ll(+Z,+me);case d:return Z.name==me.name&&Z.message==me.message;case A:case D:return Z==me+"";case g:var dr=be;case T:var kr=yt&i;if(dr||(dr=H),Z.size!=me.size&&!kr)return!1;var Ln=In.get(Z);if(Ln)return Ln==me;yt|=s,In.set(Z,me);var Ai=no(dr(Z),dr(me),yt,pn,It,In);return In.delete(Z),Ai;case k:if(Mr)return Mr.call(Z)==Mr.call(me)}return!1}function bs(Z,me,Be,yt,pn,It){var In=Be&i,dr=Fs(Z),kr=dr.length,Ln=Fs(me),Ai=Ln.length;if(kr!=Ai&&!In)return!1;for(var Jr=kr;Jr--;){var or=dr[Jr];if(!(In?or in me:P.call(me,or)))return!1}var di=It.get(Z);if(di&&It.get(me))return di==me;var xs=!0;It.set(Z,me),It.set(me,Z);for(var Gs=In;++Jr<kr;){or=dr[Jr];var Bi=Z[or],zi=me[or];if(yt)var wo=In?yt(zi,Bi,or,me,Z,It):yt(Bi,zi,or,Z,me,It);if(!(wo===void 0?Bi===zi||pn(Bi,zi,Be,yt,It):wo)){xs=!1;break}Gs||(Gs=or=="constructor")}if(xs&&!Gs){var Hr=Z.constructor,da=me.constructor;Hr!=da&&"constructor"in Z&&"constructor"in me&&!(typeof Hr=="function"&&Hr instanceof Hr&&typeof da=="function"&&da instanceof da)&&(xs=!1)}return It.delete(Z),It.delete(me),xs}function Fs(Z){return Rr(Z,oo,al)}function zo(Z,me){var Be=Z.__data__;return ro(me)?Be[typeof me=="string"?"string":"hash"]:Be.map}function hs(Z,me){var Be=oe(Z,me);return bi(Be)?Be:void 0}function ol(Z){var me=P.call(Z,We),Be=Z[We];try{Z[We]=void 0;var yt=!0}catch{}var pn=se.call(Z);return yt&&(me?Z[We]=Be:delete Z[We]),pn}var al=tt?function(Z){return Z==null?[]:(Z=Object(Z),nn(tt(Z),function(me){return De.call(Z,me)}))}:ul,Cr=nr;(xt&&Cr(new xt(new ArrayBuffer(1)))!=K||Qt&&Cr(new Qt)!=g||rn&&Cr(rn.resolve())!=w||sn&&Cr(new sn)!=T||on&&Cr(new on)!=O)&&(Cr=function(Z){var me=nr(Z),Be=me==b?Z.constructor:void 0,yt=Be?qs(Be):"";if(yt)switch(yt){case Er:return K;case Ki:return g;case ds:return w;case Hi:return T;case No:return O}return me});function Qi(Z,me){return me=me??o,!!me&&(typeof Z=="number"||he.test(Z))&&Z>-1&&Z%1==0&&Z<me}function ro(Z){var me=typeof Z;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?Z!=="__proto__":Z===null}function Os(Z){return!!Q&&Q in Z}function Us(Z){var me=Z&&Z.constructor,Be=typeof me=="function"&&me.prototype||ye;return Z===Be}function fa(Z){return se.call(Z)}function qs(Z){if(Z!=null){try{return Re.call(Z)}catch{}try{return Z+""}catch{}}return""}function ll(Z,me){return Z===me||Z!==Z&&me!==me}var Gi=qt(function(){return arguments}())?qt:function(Z){return so(Z)&&P.call(Z,"callee")&&!De.call(Z,"callee")},Vi=Array.isArray;function io(Z){return Z!=null&&fi(Z.length)&&!Hs(Z)}var ps=dt||Ht;function jo(Z,me){return vi(Z,me)}function Hs(Z){if(!Ma(Z))return!1;var me=nr(Z);return me==h||me==p||me==u||me==E}function fi(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function Ma(Z){var me=typeof Z;return Z!=null&&(me=="object"||me=="function")}function so(Z){return Z!=null&&typeof Z=="object"}var Wi=ht?pe(ht):js;function oo(Z){return io(Z)?ni(Z):xo(Z)}function ul(){return[]}function Ht(){return!1}e.exports=jo}(o_,o_.exports)),o_.exports}var GTt=HTt();const OEe=sa(GTt);var ja,C0,RIe,O$;class LIe extends Zr{constructor(){super();yn(this,C0);yn(this,ja,null);this.schema=null,this.value=null,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1,this.customEditorInterfaces=[]}get editor(){return Gt(this,ja)}get schema(){return this._schema}set schema(n){Gt(this,ja)&&!OEe(this._schema,n)&&Gt(this,ja).destroy(),this._schema=n}get value(){return this._value}set value(n){Gt(this,ja)&&Gt(this,ja).ready&&!OEe(this._value,n)&&Gt(this,ja).setValue(n),this._value=n}async updated(n){this._value=await REe(this.value),n.has("schema")?(this._schema=await REe(this.schema),(!Gt(this,ja)||Gt(this,ja).destroyed)&&(as(this,ja,await LEe(this)),mn(this,C0,O$).call(this))):n.has("customEditorInterfaces")&&this.customEditorInterfaces&&(as(this,ja,await LEe(this)),mn(this,C0,O$).call(this))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Qe`
      <style>
        ${UTt}
        ${!this.unstyled&&kD}
        ${!this.unstyled&&qTt}
      </style>
      <form></form>
    `}}ja=new WeakMap,C0=new WeakSet,RIe=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},O$=function(){["ready","change"].map(r=>{Gt(this,ja).on(r,()=>{this._value=Gt(this,ja).getValue(),mn(this,C0,RIe).call(this)})})},tn(LIe,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},customEditorInterfaces:{attribute:!1,type:Array},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",LIe);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Dr=e=>e!==void 0,FIe=(e,t,n)=>t in e?e[t]:e[t]=n;const R2={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};class VTt{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,n){return DR(t,n).join("")}}function DR(e,t){return OIe(e,t,[]).join("")}function OIe(e,t,n){if(e.nodeType===R2.CDATA_SECTION||e.nodeType===R2.TEXT)t?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var r;for(r=e.firstChild;r;r=r.nextSibling)OIe(r,t,n)}return n}function WTt(e,t,n,r){for(var i=YTt(t);i;i=XTt(i)){var s=i.namespaceURI||null,o=e[s];if(Dr(o)){var a=o[i.localName];Dr(a)&&a.call(r,i,n)}}}function YTt(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==R2.ELEMENT;)t=t.nextSibling;return t}function XTt(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==R2.ELEMENT;)t=t.nextSibling;return t}function la(e,t,n){return ZTt(e,t,n)}function ZTt(e,t,n){var r=Dr(n)?n:{},i,s;for(i=0,s=e.length;i<s;++i)r[e[i]]=t;return r}function MIe(e,t){return function(n,r){var i=e.call(Dr(t)?t:this,n,r);if(Dr(i)){var s=r[r.length-1];s.push(i)}}}function Po(e,t,n,r,i){return r.push(e),WTt(t,n,r,i),r.pop()}function dn(e,t,n){return function(r,i){let s=e.call(Dr(n)?n:this,r,i);if(Dr(s)){var o=i[i.length-1],a=Dr(t)?t:r.localName;o[a]=s}}}function bl(e,t,n){return function(r,i){var s=e.call(Dr(n)?n:this,r,i);if(Dr(s)){var o=i[i.length-1],a=Dr(t)?t:r.localName,l=FIe(o,a,[]);l.push(s)}}}const KTt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function JTt(e){return e.replace(KTt,"")}function Wg(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Dr(t[1])||!1}function vv(e){return jd(DR(e,!1))}function jd(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function QO(e){return iT(DR(e,!1))}function iT(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function si(e){return JTt(DR(e,!1))}const QTt="http://www.w3.org/1999/xlink";function TB(e){return e.getAttributeNS(QTt,"href")}function eDt(e,t){return Po({},kDt,e,t)}function $Ie(e){return[jd(e.getAttribute("minx")),jd(e.getAttribute("miny")),jd(e.getAttribute("maxx")),jd(e.getAttribute("maxy"))]}function tDt(e,t){const n=$Ie(e),r=[jd(e.getAttribute("resx")),jd(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:n,res:r}}function nDt(e,t){const n=$Ie(e);if(!(!Dr(n[0])||!Dr(n[1])||!Dr(n[2])||!Dr(n[3])))return n}function rDt(e,t){const n=parseFloat(e.getAttribute("min")),r=parseFloat(e.getAttribute("max"));return{min:n,max:r}}function iDt(e,t){const n=Po({},TDt,e,t);if(!Dr(n))return;const r=n.westBoundLongitude,i=n.southBoundLatitude,s=n.eastBoundLongitude,o=n.northBoundLatitude;if(!(!Dr(r)||!Dr(i)||!Dr(s)||!Dr(o)))return[r,i,s,o]}function sDt(e,t){return Po({},wDt,e,t)}function oDt(e,t){return Po({},_Dt,e,t)}function aDt(e,t){return Po({},EDt,e,t)}function lDt(e,t){return Po({},SDt,e,t)}function uDt(e,t){return Po({},ADt,e,t)}function cDt(e,t){return Po([],CDt,e,t)}function fDt(e,t){const n=Wg(e.getAttribute("queryable"));return Po({queryable:Dr(n)?n:!1},NIe,e,t)}function dDt(e,t){var n=t[t.length-1];const r=Po({},NIe,e,t);if(!Dr(r))return;let i=Wg(e.getAttribute("queryable"));Dr(i)||(i=n.queryable),r.queryable=Dr(i)?i:!1;let s=iT(e.getAttribute("cascaded"));Dr(s)||(s=n.cascaded),r.cascaded=s;let o=Wg(e.getAttribute("opaque"));Dr(o)||(o=n.opaque),r.opaque=Dr(o)?o:!1;let a=Wg(e.getAttribute("noSubsets"));Dr(a)||(a=n.noSubsets),r.noSubsets=Dr(a)?a:!1;let l=jd(e.getAttribute("fixedWidth"));Dr(l)||(l=n.fixedWidth),r.fixedWidth=l;let u=jd(e.getAttribute("fixedHeight"));Dr(u)||(u=n.fixedHeight),r.fixedHeight=u;const f=["Style","CRS","AuthorityURL"];for(let d=0,h=f.length;d<h;d++){const p=f[d],g=n[p];if(Dr(g)){let v=FIe(r,p,[]);v=v.concat(g),r[p]=v}}const c=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,h=c.length;d<h;d++){const p=c[d],g=r[p];if(!Dr(g)){const v=n[p];r[p]=v}}return r}function hDt(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Wg(e.getAttribute("multipleValues")),nearestValue:Wg(e.getAttribute("nearestValue")),current:Wg(e.getAttribute("current")),values:si(e)}}function uh(e,t){return Po({},MDt,e,t)}function pDt(e,t){return Po({},DDt,e,t)}function mDt(e,t){return Po({},RDt,e,t)}function gDt(e,t){return Po({},FDt,e,t)}function eM(e,t){return Po({},LDt,e,t)}function IIe(e,t){var n=uh(e,t);if(Dr(n)){const r=[iT(e.getAttribute("width")),iT(e.getAttribute("height"))];return n.size=r,n}}function yDt(e,t){var n=uh(e,t);if(Dr(n))return n.name=e.getAttribute("name"),n}function vDt(e,t){var n=uh(e,t);if(Dr(n))return n.type=e.getAttribute("type"),n}function bDt(e,t){return Po({},ODt,e,t)}function PIe(e,t){return Po([],$Dt,e,t)}const ua=[null,"http://www.opengis.net/wms"],xDt=la(ua,{Service:dn(oDt),Capability:dn(sDt)}),wDt=la(ua,{Request:dn(pDt),Exception:dn(cDt),Layer:dn(fDt)}),_Dt=la(ua,{Name:dn(si),Title:dn(si),Abstract:dn(si),KeywordList:dn(PIe),OnlineResource:dn(TB),ContactInformation:dn(aDt),Fees:dn(si),AccessConstraints:dn(si),LayerLimit:dn(QO),MaxWidth:dn(QO),MaxHeight:dn(QO)}),EDt=la(ua,{ContactPersonPrimary:dn(lDt),ContactPosition:dn(si),ContactAddress:dn(uDt),ContactVoiceTelephone:dn(si),ContactFacsimileTelephone:dn(si),ContactElectronicMailAddress:dn(si)}),SDt=la(ua,{ContactPerson:dn(si),ContactOrganization:dn(si)}),ADt=la(ua,{AddressType:dn(si),Address:dn(si),City:dn(si),StateOrProvince:dn(si),PostCode:dn(si),Country:dn(si)}),CDt=la(ua,{Format:MIe(si)}),NIe=la(ua,{Name:dn(si),Title:dn(si),Abstract:dn(si),KeywordList:dn(PIe),CRS:bl(si),SRS:bl(si),EX_GeographicBoundingBox:dn(iDt),LatLonBoundingBox:dn(nDt),BoundingBox:bl(tDt),Dimension:bl(hDt),Attribution:dn(eDt),AuthorityURL:bl(yDt),Identifier:bl(si),MetadataURL:bl(vDt),DataURL:bl(uh),FeatureListURL:bl(uh),Style:bl(bDt),MinScaleDenominator:dn(vv),MaxScaleDenominator:dn(vv),ScaleHint:dn(rDt),Layer:bl(dDt)}),kDt=la(ua,{Title:dn(si),OnlineResource:dn(TB),LogoURL:dn(IIe)}),TDt=la(ua,{westBoundLongitude:dn(vv),eastBoundLongitude:dn(vv),southBoundLatitude:dn(vv),northBoundLatitude:dn(vv)}),DDt=la(ua,{GetCapabilities:dn(eM),GetMap:dn(eM),GetFeatureInfo:dn(eM)}),LDt=la(ua,{Format:bl(si),DCPType:bl(mDt)}),RDt=la(ua,{HTTP:dn(gDt)}),FDt=la(ua,{Get:dn(uh),Post:dn(uh)}),ODt=la(ua,{Name:dn(si),Title:dn(si),Abstract:dn(si),LegendURL:bl(IIe),StyleSheetURL:dn(uh),StyleURL:dn(uh)}),MDt=la(ua,{Format:dn(si),OnlineResource:dn(TB)}),$Dt=la(ua,{Keyword:MIe(si)});class IDt{constructor(t,n){!n&&typeof window<"u"&&(n=window.DOMParser),this.version=void 0,this._parser=new VTt(n),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==R2.ELEMENT)return this.readFromNode(n);return null}readFromNode(t){return this.version=t.getAttribute("version"),Po({version:this.version},xDt,t,[])||null}}async function PDt(e){let t=new URL(e),n=t.searchParams;n.set("SERVICE","WMS"),n.set("REQUEST","GetCapabilities");let r=t.toString();const i=await fetch(r);if(i.ok){const s=await i.text();return new IDt(s).toJSON()}else throw new Error(`Error: ${i.status}`)}function DB(e){const t=/\b(?:wms|ows)\b/i,n=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return t.test(e)?"TileWMS":n.test(e)?"XYZ":!1}function NDt(e){const n=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(e),r=DB(e);return!!(e&&n&&r)}function BIe(e){return e.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function BDt(e){try{return JSON.parse(BIe(e)),!!e}catch{return!1}}function zDt(e,t){const n=new URL(e).searchParams;Object.entries(t).forEach(([o,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{n.set(l,a[l])}):n.set(o,a)});const r=e.split("?")[0],i=n.toString();return`${r}?${i}`}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function MEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MEe(Object(n),!0).forEach(function(r){jDt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MEe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GC(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?GC=function(t){return typeof t}:GC=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GC(e)}function jDt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ch(){return ch=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ch.apply(this,arguments)}function UDt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function qDt(e,t){if(e==null)return{};var n=UDt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var HDt="1.15.6";function Qd(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Eh=Qd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),rS=Qd(/Edge/i),$Ee=Qd(/firefox/i),R_=Qd(/safari/i)&&!Qd(/chrome/i)&&!Qd(/android/i),LB=Qd(/iP(ad|od|hone)/i),zIe=Qd(/chrome/i)&&Qd(/android/i),jIe={capture:!1,passive:!1};function jr(e,t,n){e.addEventListener(t,n,!Eh&&jIe)}function Fr(e,t,n){e.removeEventListener(t,n,!Eh&&jIe)}function sT(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function UIe(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function fc(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&sT(e,t):sT(e,t))||r&&e===n)return e;if(e===n)break}while(e=UIe(e))}return null}var IEe=/\s+/g;function Ul(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(IEe," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(IEe," ")}}function Bn(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function $v(e,t){var n="";if(typeof e=="string")n=e;else do{var r=Bn(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function qIe(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Lf(){var e=document.scrollingElement;return e||document.documentElement}function Ks(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,a,l,u,f,c;if(e!==window&&e.parentNode&&e!==Lf()?(s=e.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,f=s.height,c=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Eh))do if(i&&i.getBoundingClientRect&&(Bn(i,"transform")!=="none"||n&&Bn(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(Bn(i,"border-top-width")),a-=d.left+parseInt(Bn(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&e!==window){var h=$v(i||e),p=h&&h.a,g=h&&h.d;h&&(o/=g,a/=p,c/=p,f/=g,l=o+f,u=a+c)}return{top:o,left:a,bottom:l,right:u,width:c,height:f}}}function PEe(e,t,n){for(var r=kp(e,!0),i=Ks(e)[t];r;){var s=Ks(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Lf())break;r=kp(r,!1)}return!1}function R1(e,t,n,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==zn.ghost&&(r||o[s]!==zn.dragged)&&fc(o[s],n.draggable,e,!1)){if(i===t)return o[s];i++}s++}return null}function RB(e,t){for(var n=e.lastElementChild;n&&(n===zn.ghost||Bn(n,"display")==="none"||t&&!sT(n,t));)n=n.previousElementSibling;return n||null}function wu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==zn.clone&&(!t||sT(e,t))&&n++;return n}function NEe(e){var t=0,n=0,r=Lf();if(e)do{var i=$v(e),s=i.a,o=i.d;t+=e.scrollLeft*s,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function GDt(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function kp(e,t){if(!e||!e.getBoundingClientRect)return Lf();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Bn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Lf();if(r||t)return n;r=!0}}while(n=n.parentNode);return Lf()}function VDt(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function tM(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var F_;function HIe(e,t){return function(){if(!F_){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),F_=setTimeout(function(){F_=void 0},t)}}}function WDt(){clearTimeout(F_),F_=void 0}function GIe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function VIe(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function WIe(e,t,n){var r={};return Array.from(e.children).forEach(function(i){var s,o,a,l;if(!(!fc(i,t.draggable,e,!1)||i.animated||i===n)){var u=Ks(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,u.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,u.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Al="Sortable"+new Date().getTime();function YDt(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Bn(i,"display")==="none"||i===zn.ghost)){e.push({target:i,rect:Ks(i)});var s=qf({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=$v(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(GDt(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(a){var l=0,u=a.target,f=u.fromRect,c=Ks(u),d=u.prevFromRect,h=u.prevToRect,p=a.rect,g=$v(u,!0);g&&(c.top-=g.f,c.left-=g.e),u.toRect=c,u.thisAnimationDuration&&tM(d,c)&&!tM(f,c)&&(p.top-c.top)/(p.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(l=ZDt(p,d,h,i.options)),tM(c,f)||(u.prevFromRect=f,u.prevToRect=c,l||(l=i.options.animation),i.animate(u,p,c,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),s?t=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){Bn(r,"transition",""),Bn(r,"transform","");var a=$v(this.el),l=a&&a.a,u=a&&a.d,f=(i.left-s.left)/(l||1),c=(i.top-s.top)/(u||1);r.animatingX=!!f,r.animatingY=!!c,Bn(r,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=XDt(r),Bn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Bn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Bn(r,"transition",""),Bn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function XDt(e){return e.offsetWidth}function ZDt(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Vy=[],nM={initializeByDefault:!0},iS={mount:function(t){for(var n in nM)nM.hasOwnProperty(n)&&!(n in t)&&(t[n]=nM[n]);Vy.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Vy.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=t+"Global";Vy.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](qf({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][t]&&n[o.pluginName][t](qf({sortable:n},r)))})},initializePlugins:function(t,n,r,i){Vy.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var u=new a(t,n,t.options);u.sortable=t,u.options=t.options,t[l]=u,ch(r,u.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var o=this.modifyOption(t,s,t.options[s]);typeof o<"u"&&(t.options[s]=o)}},getEventProperties:function(t,n){var r={};return Vy.forEach(function(i){typeof i.eventProperties=="function"&&ch(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return Vy.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(t[s.pluginName],r))}),i}};function KDt(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,a=e.fromEl,l=e.oldIndex,u=e.newIndex,f=e.oldDraggableIndex,c=e.newDraggableIndex,d=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[Al],!!t){var g,v=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Eh&&!rS?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||n,g.from=a||n,g.item=i||n,g.clone=s,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=f,g.newDraggableIndex=c,g.originalEvent=d,g.pullMode=h?h.lastPutMode:void 0;var b=qf(qf({},p),iS.getEventProperties(r,t));for(var w in b)g[w]=b[w];n&&n.dispatchEvent(g),v[y]&&v[y].call(t,g)}}var JDt=["evt"],gl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=qDt(r,JDt);iS.pluginEvent.bind(zn)(t,n,qf({dragEl:Ot,parentEl:Ss,ghostEl:Kn,rootEl:ls,nextEl:Sg,lastDownEl:VC,cloneEl:ms,cloneHidden:dp,dragStarted:a_,putSortable:Go,activeSortable:zn.active,originalEvent:i,oldIndex:bv,oldDraggableIndex:O_,newIndex:Hl,newDraggableIndex:lp,hideGhostForTarget:KIe,unhideGhostForTarget:JIe,cloneNowHidden:function(){dp=!0},cloneNowShown:function(){dp=!1},dispatchSortableEvent:function(a){Ba({sortable:n,name:a,originalEvent:i})}},s))};function Ba(e){KDt(qf({putSortable:Go,cloneEl:ms,targetEl:Ot,rootEl:ls,oldIndex:bv,oldDraggableIndex:O_,newIndex:Hl,newDraggableIndex:lp},e))}var Ot,Ss,Kn,ls,Sg,VC,ms,dp,bv,Hl,O_,lp,JA,Go,rv=!1,oT=!1,aT=[],hg,rc,rM,iM,BEe,zEe,a_,Wy,M_,$_=!1,QA=!1,WC,ya,sM=[],M$=!1,lT=[],LR=typeof document<"u",eC=LB,jEe=rS||Eh?"cssFloat":"float",QDt=LR&&!zIe&&!LB&&"draggable"in document.createElement("div"),YIe=function(){if(LR){if(Eh)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),XIe=function(t,n){var r=Bn(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=R1(t,0,n),o=R1(t,1,n),a=s&&Bn(s),l=o&&Bn(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ks(s).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ks(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[jEe]==="none"||o&&r[jEe]==="none"&&u+f>i)?"vertical":"horizontal"},eLt=function(t,n,r){var i=r?t.left:t.top,s=r?t.right:t.bottom,o=r?t.width:t.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||s===l||i+o/2===a+u/2},tLt=function(t,n){var r;return aT.some(function(i){var s=i[Al].options.emptyInsertThreshold;if(!(!s||RB(i))){var o=Ks(i),a=t>=o.left-s&&t<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},ZIe=function(t){function n(s,o){return function(a,l,u,f){var c=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||c))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,u,f),o)(a,l,u,f);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=t.group;(!i||GC(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},KIe=function(){!YIe&&Kn&&Bn(Kn,"display","none")},JIe=function(){!YIe&&Kn&&Bn(Kn,"display","")};LR&&!zIe&&document.addEventListener("click",function(e){if(oT)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),oT=!1,!1},!0);var pg=function(t){if(Ot){t=t.touches?t.touches[0]:t;var n=tLt(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Al]._onDragOver(r)}}},nLt=function(t){Ot&&Ot.parentNode[Al]._isOutsideThisEl(t.target)};function zn(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ch({},t),e[Al]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return XIe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:zn.supportPointer!==!1&&"PointerEvent"in window&&(!R_||LB),emptyInsertThreshold:5};iS.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);ZIe(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:QDt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?jr(e,"pointerdown",this._onTapStart):(jr(e,"mousedown",this._onTapStart),jr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(jr(e,"dragover",this),jr(e,"dragenter",this)),aT.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ch(this,YDt())}zn.prototype={constructor:zn,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Wy=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Ot):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,f=i.filter;if(cLt(r),!Ot&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&R_&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=fc(l,i.draggable,r,!1),!(l&&l.animated)&&VC!==l)){if(bv=wu(l),O_=wu(l,i.draggable),typeof f=="function"){if(f.call(this,t,l,this)){Ba({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),gl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=fc(u,c.trim(),r,!1),c)return Ba({sortable:n,rootEl:c,name:"filter",targetEl:l,fromEl:r,toEl:r}),gl("filter",n,{evt:t}),!0}),f)){s&&t.preventDefault();return}i.handle&&!fc(u,i.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Ot&&r.parentNode===s){var u=Ks(r);if(ls=s,Ot=r,Ss=Ot.parentNode,Sg=Ot.nextSibling,VC=r,JA=o.group,zn.dragged=Ot,hg={target:Ot,clientX:(n||t).clientX,clientY:(n||t).clientY},BEe=hg.clientX-u.left,zEe=hg.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Ot.style["will-change"]="all",l=function(){if(gl("delayEnded",i,{evt:t}),zn.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!$Ee&&i.nativeDraggable&&(Ot.draggable=!0),i._triggerDragStart(t,n),Ba({sortable:i,name:"choose",originalEvent:t}),Ul(Ot,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){qIe(Ot,f.trim(),oM)}),jr(a,"dragover",pg),jr(a,"mousemove",pg),jr(a,"touchmove",pg),o.supportPointer?(jr(a,"pointerup",i._onDrop),!this.nativeDraggable&&jr(a,"pointercancel",i._onDrop)):(jr(a,"mouseup",i._onDrop),jr(a,"touchend",i._onDrop),jr(a,"touchcancel",i._onDrop)),$Ee&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ot.draggable=!0),gl("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(rS||Eh))){if(zn.eventCanceled){this._onDrop();return}o.supportPointer?(jr(a,"pointerup",i._disableDelayedDrag),jr(a,"pointercancel",i._disableDelayedDrag)):(jr(a,"mouseup",i._disableDelayedDrag),jr(a,"touchend",i._disableDelayedDrag),jr(a,"touchcancel",i._disableDelayedDrag)),jr(a,"mousemove",i._delayedDragTouchMoveHandler),jr(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&jr(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ot&&oM(Ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Fr(t,"mouseup",this._disableDelayedDrag),Fr(t,"touchend",this._disableDelayedDrag),Fr(t,"touchcancel",this._disableDelayedDrag),Fr(t,"pointerup",this._disableDelayedDrag),Fr(t,"pointercancel",this._disableDelayedDrag),Fr(t,"mousemove",this._delayedDragTouchMoveHandler),Fr(t,"touchmove",this._delayedDragTouchMoveHandler),Fr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?jr(document,"pointermove",this._onTouchMove):n?jr(document,"touchmove",this._onTouchMove):jr(document,"mousemove",this._onTouchMove):(jr(Ot,"dragend",this),jr(ls,"dragstart",this._onDragStart));try{document.selection?YC(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(rv=!1,ls&&Ot){gl("dragStarted",this,{evt:n}),this.nativeDraggable&&jr(document,"dragover",nLt);var r=this.options;!t&&Ul(Ot,r.dragClass,!1),Ul(Ot,r.ghostClass,!0),zn.active=this,t&&this._appendGhost(),Ba({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(rc){this._lastX=rc.clientX,this._lastY=rc.clientY,KIe();for(var t=document.elementFromPoint(rc.clientX,rc.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(rc.clientX,rc.clientY),t!==n);)n=t;if(Ot.parentNode[Al]._isOutsideThisEl(t),n)do{if(n[Al]){var r=void 0;if(r=n[Al]._onDragOver({clientX:rc.clientX,clientY:rc.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=UIe(n));JIe()}},_onTouchMove:function(t){if(hg){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=t.touches?t.touches[0]:t,o=Kn&&$v(Kn,!0),a=Kn&&o&&o.a,l=Kn&&o&&o.d,u=eC&&ya&&NEe(ya),f=(s.clientX-hg.clientX+i.x)/(a||1)+(u?u[0]-sM[0]:0)/(a||1),c=(s.clientY-hg.clientY+i.y)/(l||1)+(u?u[1]-sM[1]:0)/(l||1);if(!zn.active&&!rv){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Kn){o?(o.e+=f-(rM||0),o.f+=c-(iM||0)):o={a:1,b:0,c:0,d:1,e:f,f:c};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Bn(Kn,"webkitTransform",d),Bn(Kn,"mozTransform",d),Bn(Kn,"msTransform",d),Bn(Kn,"transform",d),rM=f,iM=c,rc=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Kn){var t=this.options.fallbackOnBody?document.body:ls,n=Ks(Ot,!0,eC,!0,t),r=this.options;if(eC){for(ya=t;Bn(ya,"position")==="static"&&Bn(ya,"transform")==="none"&&ya!==document;)ya=ya.parentNode;ya!==document.body&&ya!==document.documentElement?(ya===document&&(ya=Lf()),n.top+=ya.scrollTop,n.left+=ya.scrollLeft):ya=Lf(),sM=NEe(ya)}Kn=Ot.cloneNode(!0),Ul(Kn,r.ghostClass,!1),Ul(Kn,r.fallbackClass,!0),Ul(Kn,r.dragClass,!0),Bn(Kn,"transition",""),Bn(Kn,"transform",""),Bn(Kn,"box-sizing","border-box"),Bn(Kn,"margin",0),Bn(Kn,"top",n.top),Bn(Kn,"left",n.left),Bn(Kn,"width",n.width),Bn(Kn,"height",n.height),Bn(Kn,"opacity","0.8"),Bn(Kn,"position",eC?"absolute":"fixed"),Bn(Kn,"zIndex","100000"),Bn(Kn,"pointerEvents","none"),zn.ghost=Kn,t.appendChild(Kn),Bn(Kn,"transform-origin",BEe/parseInt(Kn.style.width)*100+"% "+zEe/parseInt(Kn.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,s=r.options;if(gl("dragStart",this,{evt:t}),zn.eventCanceled){this._onDrop();return}gl("setupClone",this),zn.eventCanceled||(ms=VIe(Ot),ms.removeAttribute("id"),ms.draggable=!1,ms.style["will-change"]="",this._hideClone(),Ul(ms,this.options.chosenClass,!1),zn.clone=ms),r.cloneId=YC(function(){gl("clone",r),!zn.eventCanceled&&(r.options.removeCloneOnHide||ls.insertBefore(ms,Ot),r._hideClone(),Ba({sortable:r,name:"clone"}))}),!n&&Ul(Ot,s.dragClass,!0),n?(oT=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Fr(document,"mouseup",r._onDrop),Fr(document,"touchend",r._onDrop),Fr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Ot)),jr(document,"drop",r),Bn(Ot,"transform","translateZ(0)")),rv=!0,r._dragStartId=YC(r._dragStarted.bind(r,n,t)),jr(document,"selectstart",r),a_=!0,window.getSelection().removeAllRanges(),R_&&Bn(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,s,o,a=this.options,l=a.group,u=zn.active,f=JA===l,c=a.sort,d=Go||u,h,p=this,g=!1;if(M$)return;function v(Y,X){gl(Y,p,qf({evt:t,isOwner:f,axis:h?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:c,fromSortable:d,target:r,completed:b,onMove:function(le,ee){return tC(ls,n,Ot,i,le,Ks(le),t,ee)},changed:w},X))}function y(){v("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function b(Y){return v("dragOverCompleted",{insertion:Y}),Y&&(f?u._hideClone():u._showClone(p),p!==d&&(Ul(Ot,Go?Go.options.ghostClass:u.options.ghostClass,!1),Ul(Ot,a.ghostClass,!0)),Go!==p&&p!==zn.active?Go=p:p===zn.active&&Go&&(Go=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){v("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===Ot&&!Ot.animated||r===n&&!r.animated)&&(Wy=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(Ot.parentNode[Al]._isOutsideThisEl(t.target),!Y&&pg(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function w(){Hl=wu(Ot),lp=wu(Ot,a.draggable),Ba({sortable:p,name:"change",toEl:n,newIndex:Hl,newDraggableIndex:lp,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=fc(r,a.draggable,n,!0),v("dragOver"),zn.eventCanceled)return g;if(Ot.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return b(!1);if(oT=!1,u&&!a.disabled&&(f?c||(o=Ss!==ls):Go===this||(this.lastPutMode=JA.checkPull(this,u,Ot,t))&&l.checkPut(this,u,Ot,t))){if(h=this._getDirection(t,r)==="vertical",i=Ks(Ot),v("dragOverValid"),zn.eventCanceled)return g;if(o)return Ss=ls,y(),this._hideClone(),v("revert"),zn.eventCanceled||(Sg?ls.insertBefore(Ot,Sg):ls.appendChild(Ot)),b(!0);var E=RB(n,a.draggable);if(!E||oLt(t,h,this)&&!E.animated){if(E===Ot)return b(!1);if(E&&n===t.target&&(r=E),r&&(s=Ks(r)),tC(ls,n,Ot,i,r,s,t,!!r)!==!1)return y(),E&&E.nextSibling?n.insertBefore(Ot,E.nextSibling):n.appendChild(Ot),Ss=n,w(),b(!0)}else if(E&&sLt(t,h,this)){var A=R1(n,0,a,!0);if(A===Ot)return b(!1);if(r=A,s=Ks(r),tC(ls,n,Ot,i,r,s,t,!1)!==!1)return y(),n.insertBefore(Ot,A),Ss=n,w(),b(!0)}else if(r.parentNode===n){s=Ks(r);var T=0,D,k=Ot.parentNode!==n,R=!eLt(Ot.animated&&Ot.toRect||i,r.animated&&r.toRect||s,h),O=h?"top":"left",B=PEe(r,"top","top")||PEe(Ot,"top","top"),K=B?B.scrollTop:void 0;Wy!==r&&(D=s[O],$_=!1,QA=!R&&a.invertSwap||k),T=aLt(t,r,s,h,R?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,QA,Wy===r);var L;if(T!==0){var $=wu(Ot);do $-=T,L=Ss.children[$];while(L&&(Bn(L,"display")==="none"||L===Kn))}if(T===0||L===r)return b(!1);Wy=r,M_=T;var I=r.nextElementSibling,U=!1;U=T===1;var q=tC(ls,n,Ot,i,r,s,t,U);if(q!==!1)return(q===1||q===-1)&&(U=q===1),M$=!0,setTimeout(iLt,30),y(),U&&!I?n.appendChild(Ot):r.parentNode.insertBefore(Ot,U?I:r),B&&GIe(B,0,K-B.scrollTop),Ss=Ot.parentNode,D!==void 0&&!QA&&(WC=Math.abs(D-Ks(r)[O])),w(),b(!0)}if(n.contains(Ot))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Fr(document,"mousemove",this._onTouchMove),Fr(document,"touchmove",this._onTouchMove),Fr(document,"pointermove",this._onTouchMove),Fr(document,"dragover",pg),Fr(document,"mousemove",pg),Fr(document,"touchmove",pg)},_offUpEvents:function(){var t=this.el.ownerDocument;Fr(t,"mouseup",this._onDrop),Fr(t,"touchend",this._onDrop),Fr(t,"pointerup",this._onDrop),Fr(t,"pointercancel",this._onDrop),Fr(t,"touchcancel",this._onDrop),Fr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(Hl=wu(Ot),lp=wu(Ot,r.draggable),gl("drop",this,{evt:t}),Ss=Ot&&Ot.parentNode,Hl=wu(Ot),lp=wu(Ot,r.draggable),zn.eventCanceled){this._nulling();return}rv=!1,QA=!1,$_=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$$(this.cloneId),$$(this._dragStartId),this.nativeDraggable&&(Fr(document,"drop",this),Fr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),R_&&Bn(document.body,"user-select",""),Bn(Ot,"transform",""),t&&(a_&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Kn&&Kn.parentNode&&Kn.parentNode.removeChild(Kn),(ls===Ss||Go&&Go.lastPutMode!=="clone")&&ms&&ms.parentNode&&ms.parentNode.removeChild(ms),Ot&&(this.nativeDraggable&&Fr(Ot,"dragend",this),oM(Ot),Ot.style["will-change"]="",a_&&!rv&&Ul(Ot,Go?Go.options.ghostClass:this.options.ghostClass,!1),Ul(Ot,this.options.chosenClass,!1),Ba({sortable:this,name:"unchoose",toEl:Ss,newIndex:null,newDraggableIndex:null,originalEvent:t}),ls!==Ss?(Hl>=0&&(Ba({rootEl:Ss,name:"add",toEl:Ss,fromEl:ls,originalEvent:t}),Ba({sortable:this,name:"remove",toEl:Ss,originalEvent:t}),Ba({rootEl:Ss,name:"sort",toEl:Ss,fromEl:ls,originalEvent:t}),Ba({sortable:this,name:"sort",toEl:Ss,originalEvent:t})),Go&&Go.save()):Hl!==bv&&Hl>=0&&(Ba({sortable:this,name:"update",toEl:Ss,originalEvent:t}),Ba({sortable:this,name:"sort",toEl:Ss,originalEvent:t})),zn.active&&((Hl==null||Hl===-1)&&(Hl=bv,lp=O_),Ba({sortable:this,name:"end",toEl:Ss,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){gl("nulling",this),ls=Ot=Ss=Kn=Sg=ms=VC=dp=hg=rc=a_=Hl=lp=bv=O_=Wy=M_=Go=JA=zn.dragged=zn.ghost=zn.clone=zn.active=null,lT.forEach(function(t){t.checked=!0}),lT.length=rM=iM=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Ot&&(this._onDragOver(t),rLt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],fc(n,o.draggable,this.el,!1)&&t.push(n.getAttribute(o.dataIdAttr)||uLt(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];fc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),t.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return fc(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=iS.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&ZIe(r)},destroy:function(){gl("destroy",this);var t=this.el;t[Al]=null,Fr(t,"mousedown",this._onTapStart),Fr(t,"touchstart",this._onTapStart),Fr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Fr(t,"dragover",this),Fr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),aT.splice(aT.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!dp){if(gl("hideClone",this),zn.eventCanceled)return;Bn(ms,"display","none"),this.options.removeCloneOnHide&&ms.parentNode&&ms.parentNode.removeChild(ms),dp=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(dp){if(gl("showClone",this),zn.eventCanceled)return;Ot.parentNode==ls&&!this.options.group.revertClone?ls.insertBefore(ms,Ot):Sg?ls.insertBefore(ms,Sg):ls.appendChild(ms),this.options.group.revertClone&&this.animate(Ot,ms),Bn(ms,"display",""),dp=!1}}};function rLt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function tC(e,t,n,r,i,s,o,a){var l,u=e[Al],f=u.options.onMove,c;return window.CustomEvent&&!Eh&&!rS?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=s||Ks(t),l.willInsertAfter=a,l.originalEvent=o,e.dispatchEvent(l),f&&(c=f.call(u,l,o)),c}function oM(e){e.draggable=!1}function iLt(){M$=!1}function sLt(e,t,n){var r=Ks(R1(n.el,0,n.options,!0)),i=WIe(n.el,n.options,Kn),s=10;return t?e.clientX<i.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-s||e.clientY<r.bottom&&e.clientX<r.left}function oLt(e,t,n){var r=Ks(RB(n.el,n.options.draggable)),i=WIe(n.el,n.options,Kn),s=10;return t?e.clientX>i.right+s||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+s||e.clientX>r.right&&e.clientY>r.top}function aLt(e,t,n,r,i,s,o,a){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,f=r?n.top:n.left,c=r?n.bottom:n.right,d=!1;if(!o){if(a&&WC<u*i){if(!$_&&(M_===1?l>f+u*s/2:l<c-u*s/2)&&($_=!0),$_)d=!0;else if(M_===1?l<f+WC:l>c-WC)return-M_}else if(l>f+u*(1-i)/2&&l<c-u*(1-i)/2)return lLt(t)}return d=d||o,d&&(l<f+u*s/2||l>c-u*s/2)?l>f+u/2?1:-1:0}function lLt(e){return wu(Ot)<wu(e)?1:-1}function uLt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function cLt(e){lT.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&lT.push(r)}}function YC(e){return setTimeout(e,0)}function $$(e){return clearTimeout(e)}LR&&jr(document,"touchmove",function(e){(zn.active||rv)&&e.cancelable&&e.preventDefault()});zn.utils={on:jr,off:Fr,css:Bn,find:qIe,is:function(t,n){return!!fc(t,n,t,!1)},extend:VDt,throttle:HIe,closest:fc,toggleClass:Ul,clone:VIe,index:wu,nextTick:YC,cancelNextTick:$$,detectDirection:XIe,getChild:R1,expando:Al};zn.get=function(e){return e[Al]};zn.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(zn.utils=qf(qf({},zn.utils),r.utils)),iS.mount(r)})};zn.create=function(e,t){return new zn(e,t)};zn.version=HDt;var Xs=[],l_,I$,P$=!1,aM,lM,uT,u_;function fLt(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?jr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?jr(document,"pointermove",this._handleFallbackAutoScroll):r.touches?jr(document,"touchmove",this._handleFallbackAutoScroll):jr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Fr(document,"dragover",this._handleAutoScroll):(Fr(document,"pointermove",this._handleFallbackAutoScroll),Fr(document,"touchmove",this._handleFallbackAutoScroll),Fr(document,"mousemove",this._handleFallbackAutoScroll)),UEe(),XC(),WDt()},nulling:function(){uT=I$=l_=P$=u_=aM=lM=null,Xs.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(uT=n,r||this.options.forceAutoScrollFallback||rS||Eh||R_){uM(n,this.options,a,r);var l=kp(a,!0);P$&&(!u_||s!==aM||o!==lM)&&(u_&&UEe(),u_=setInterval(function(){var u=kp(document.elementFromPoint(s,o),!0);u!==l&&(l=u,XC()),uM(n,i.options,u,r)},10),aM=s,lM=o)}else{if(!this.options.bubbleScroll||kp(a,!0)===Lf()){XC();return}uM(n,this.options,kp(a,!1),!1)}}},ch(e,{pluginName:"scroll",initializeByDefault:!0})}function XC(){Xs.forEach(function(e){clearInterval(e.pid)}),Xs=[]}function UEe(){clearInterval(u_)}var uM=HIe(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,a=t.scrollSpeed,l=Lf(),u=!1,f;I$!==n&&(I$=n,XC(),l_=t.scroll,f=t.scrollFn,l_===!0&&(l_=kp(n,!0)));var c=0,d=l_;do{var h=d,p=Ks(h),g=p.top,v=p.bottom,y=p.left,b=p.right,w=p.width,E=p.height,A=void 0,T=void 0,D=h.scrollWidth,k=h.scrollHeight,R=Bn(h),O=h.scrollLeft,B=h.scrollTop;h===l?(A=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),T=E<k&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(A=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"),T=E<k&&(R.overflowY==="auto"||R.overflowY==="scroll"));var K=A&&(Math.abs(b-i)<=o&&O+w<D)-(Math.abs(y-i)<=o&&!!O),L=T&&(Math.abs(v-s)<=o&&B+E<k)-(Math.abs(g-s)<=o&&!!B);if(!Xs[c])for(var $=0;$<=c;$++)Xs[$]||(Xs[$]={});(Xs[c].vx!=K||Xs[c].vy!=L||Xs[c].el!==h)&&(Xs[c].el=h,Xs[c].vx=K,Xs[c].vy=L,clearInterval(Xs[c].pid),(K!=0||L!=0)&&(u=!0,Xs[c].pid=setInterval((function(){r&&this.layer===0&&zn.active._onTouchMove(uT);var I=Xs[this.layer].vy?Xs[this.layer].vy*a:0,U=Xs[this.layer].vx?Xs[this.layer].vx*a:0;typeof f=="function"&&f.call(zn.dragged.parentNode[Al],U,I,e,uT,Xs[this.layer].el)!=="continue"||GIe(Xs[this.layer].el,U,I)}).bind({layer:c}),24))),c++}while(t.bubbleScroll&&d!==l&&(d=kp(d,!1)));P$=u}},30),QIe=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,s=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var u=r||s;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);l(),u&&!u.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function FB(){}FB.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=R1(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:QIe};ch(FB,{pluginName:"revertOnSpill"});function OB(){}OB.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:QIe};ch(OB,{pluginName:"removeOnSpill"});zn.mount(new fLt);zn.mount(OB,FB);const dLt=e=>{const t=e.item;let n=Array.prototype.slice.call(t.parentNode.childNodes);return n=n.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),n},hLt=(e,t,n,r,i,s)=>{const a=e.item.parentNode;for(const g of n)a.appendChild(g);if(e.oldIndex==e.newIndex)return;const l=r.getArray(),u=e.item.querySelector("eox-layercontrol-layer").layer.get(i),f=l.find(g=>g.get(i)===u),c=s.dataset.layer,d=l.find(g=>g.get(i)==c);let h,p;for(h=0;h<l.length;h++)if(l[h]==f){r.removeAt(h);break}for(p=0;p<l.length;p++)if(l[p]===d){h>p?r.insertAt(p,f):r.insertAt(p+1,f);break}t.requestUpdate()};function pLt(e,t,n,r){let i=[],s=null;e._sortable=zn.create(e,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:o=>i=dLt(o),onMove:o=>{s=o.related},onEnd:o=>hLt(o,r,i,t,n,s)})}function mLt(e,t,n,r){const i=e.getArray();let s=!1;i.forEach(o=>{const a=o.ol_uid;o.get(t)||(o.set(t,a),s=!0),o.get(n)||(o.set(n,`layer ${a}`),s=!0),s&&r.requestUpdate()})}function MB(e,t,n){let r=[];const i=(s,o,a)=>{r=[...r,...s.filter(u=>u.get(o)===a)];const l=s.filter(u=>u.getLayers);return l.length>0&&l.forEach(u=>i(u.getLayers().getArray(),o,a)),r};return i(e,t,n),r}function gLt(e,t,n){if(!e||!t)return!1;if(!ePe(e,n))return!0;const r=e.get("minZoom"),i=e.get("maxZoom"),s=t.getView().getZoom();return s>r&&s<i}function ePe(e,t){const n=e.get("minZoom"),r=e.get("maxZoom");return!!(t&&(n!==-1/0||r!==1/0))}function yLt(e,t){var i,s,o;return!e||!t?void 0:e.getLayers?"group":((o=(i=t.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:i.ol_uid)==null?void 0:o.includes(e.getSource?(s=e.getSource())==null?void 0:s.ol_uid:void 0))?"draw":e.declutter_!==void 0?"vector":"raster"}const vLt=(e,t,n)=>{let r=t;return n.layer.getSource().getTileUrlFunction()&&(r||(r=n.layer.getSource().getTileUrlFunction()),n.layer.getSource().setTileUrlFunction((...i)=>zDt(r(...i),e)),n.layer.getSource().setKey(new Date)),r};function bLt(e,t,n){const r="updateStyleVariables"in t,i="setStyle"in t,s=r?t.style_:n.style;let o=s==null?void 0:s.variables;if(o){const a=$B(e);if(s.variables={...o,...a},r)t.updateStyleVariables(a);else if(i){const l=xLt(s);t.setStyle(l)}}}const $B=e=>{const t={};for(const n in e)if(typeof e[n]=="object"&&e[n]!==null){const r=$B(e[n]);for(const i in r)t[i]=r==null?void 0:r[i]}else t[n]=e==null?void 0:e[n];return t};function xLt(e){let t=e;if("variables"in e){let n=JSON.stringify(e);const{variables:r}=e;for(const i in r)typeof r[i]=="number"?n=n.replaceAll(`["var","${i}"]`,r[i]):n=n.replaceAll(`["var","${i}"]`,`"${r[i]}"`);t=JSON.parse(n)}return t}const wLt=(e,t)=>{var n;if(e)return!("domainProperties"in e)||"domain"in e?{...e}:(n=Object.keys(e))==null?void 0:n.reduce((r,i)=>{if(i==="domainProperties"){const s=$B(t);r.domain=e[i].map(o=>s[o])}else r[i]=e[i];return r},{})};function tPe(e,t){var r;let n={};for(const i in e){const s=e[i].type;if(s&&s!=="object")n[i]=s==="number"?Number(t[i]):t[i];else if(typeof e[i]=="object"&&((r=e[i])!=null&&r.properties)){const o=tPe(e[i].properties,t);Object.keys(o).length>0&&(n[i]=o)}}return n}function _Lt(e,t){var s,o,a,l,u;if(!t)return null;let n={},r="updateStyleVariables"in e?(s=e.style_)==null?void 0:s.variables:(o=t.style)==null?void 0:o.variables;if((t.type==="style"||t.style)&&r)n=r;else if((l=(a=e.getSource())==null?void 0:a.getTileUrlFunction)!=null&&l.call(a)){const f=new URL(e.getSource().getTileUrlFunction()([0,0,0]));n=Object.fromEntries(f.searchParams.entries())}else return null;const i=tPe(((u=t.schema)==null?void 0:u.properties)||t.schema,n);return Object.keys(i).length?i:null}const ELt=(e,t)=>e==null?void 0:e.filter(n=>["remove","sort"].filter(r=>t!=null&&t.get("layerControlDisable")?r!=="sort":!0).includes(n)),SLt=(e,t)=>e==null?void 0:e.filter(n=>{let r=!0;return["remove","sort"].includes(n)&&(r=!1),n==="info"&&(r=t.get("description")),n==="config"&&(r=t.get("layerConfig")),n==="datetime"&&(r=t.get("layerDatetime")),n==="legend"&&(r=t.get("layerLegend")),r}),ALt=(e,t)=>Qe`
  <button slot="${e}-icon" class="icon">${t?e:Xr}</button>
`,CLt=e=>Qe`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:t}=e;t==null||t.set("layerControlOptional",!0),t==null||t.setVisible(!1),e.dispatchEvent(new CustomEvent("changed",{detail:t,bubbles:!0}))}}
  >
    ${e.unstyled?"x":Xr}
  </button>
`,kLt=e=>Qe`
  <span class="button sort-icon icon drag-handle">
    ${e?"":Xr}
  </span>
`,nPe=e=>{var n;const t=["layerControlHide","layerControlOptional"];return(n=e==null?void 0:e.getArray())==null?void 0:n.filter(r=>t.every(i=>!r.get(i)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rPe=J2(class extends iD{constructor(e){if(super(e),e.type!==np.PROPERTY&&e.type!==np.ATTRIBUTE&&e.type!==np.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!qBe(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===lv||t===Xr)return t;const n=e.element,r=e.name;if(e.type===np.PROPERTY){if(t===n[r])return lv}else if(e.type===np.BOOLEAN_ATTRIBUTE){if(!!t===n.hasAttribute(r))return lv}else if(e.type===np.ATTRIBUTE&&n.getAttribute(r)===t+"")return lv;return rI(e),t}});var cM,qEe;function TLt(){if(qEe)return cM;qEe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,h=Math.max,p=Math.min,g=function(){return f.Date.now()};function v(T,D,k){var R,O,B,K,L,$,I=0,U=!1,q=!1,Y=!0;if(typeof T!="function")throw new TypeError(e);D=A(D)||0,b(k)&&(U=!!k.leading,q="maxWait"in k,B=q?h(A(k.maxWait)||0,D):B,Y="trailing"in k?!!k.trailing:Y);function X(je){var we=R,Ie=O;return R=O=void 0,I=je,K=T.apply(Ie,we),K}function te(je){return I=je,L=setTimeout(z,D),U?X(je):K}function le(je){var we=je-$,Ie=je-I,qe=D-we;return q?p(qe,B-Ie):qe}function ee(je){var we=je-$,Ie=je-I;return $===void 0||we>=D||we<0||q&&Ie>=B}function z(){var je=g();if(ee(je))return he(je);L=setTimeout(z,le(je))}function he(je){return L=void 0,Y&&R?X(je):(R=O=void 0,K)}function de(){L!==void 0&&clearTimeout(L),I=0,R=$=O=L=void 0}function ze(){return L===void 0?K:he(g())}function He(){var je=g(),we=ee(je);if(R=arguments,O=this,$=je,we){if(L===void 0)return te($);if(q)return L=setTimeout(z,D),X($)}return L===void 0&&(L=setTimeout(z,D)),K}return He.cancel=de,He.flush=ze,He}function y(T,D,k){var R=!0,O=!0;if(typeof T!="function")throw new TypeError(e);return b(k)&&(R="leading"in k?!!k.leading:R,O="trailing"in k?!!k.trailing:O),v(T,D,{leading:R,maxWait:D,trailing:O})}function b(T){var D=typeof T;return!!T&&(D=="object"||D=="function")}function w(T){return!!T&&typeof T=="object"}function E(T){return typeof T=="symbol"||w(T)&&d.call(T)==n}function A(T){if(typeof T=="number")return T;if(E(T))return t;if(b(T)){var D=typeof T.valueOf=="function"?T.valueOf():T;T=b(D)?D+"":D}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var k=s.test(T);return k||o.test(T)?a(T.slice(2),k?2:8):i.test(T)?t:+T}return cM=y,cM}var DLt=TLt();const HEe=sa(DLt);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const nC=e=>e??Xr;var RT,FT;class iPe extends Zr{constructor(){super();yn(this,RT,iI`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
      --cle-padding: 0;
    }
  `);yn(this,FT,"");this.unstyled=!1,this.noShadow=!1,this.layerLegend=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){this.layerLegend.width||new ResizeObserver(()=>{this.offsetWidth!==this.layerLegend.width&&(this.layerLegend.width=this.offsetWidth,this.requestUpdate())}).observe(this.renderRoot.querySelector(".legend-container"))}render(){return customElements.get("color-legend")||console.error("Please import `color-legend-element` in order to use layerLegend"),Qe`
      <style>
        ${Gt(this,RT)}
        ${!this.unstyled&&Gt(this,FT)}
      </style>
      ${Un(this.layerLegend,()=>Qe`
          <div class="legend-container">
            <!-- Render color-legend-->
            <color-legend
              id="${this.layer.get("id")}"
              width=${this.layerLegend.width??325}
              scaleType="${nC(this.layerLegend.scaleType)}"
              markType="${nC(this.layerLegend.markType)}"
              titleText="${nC(this.layerLegend.title)}"
              .range=${this.layerLegend.range}
              .domain=${this.layerLegend.domain}
              tickFormat="${nC(this.layerLegend.tickFormat)}"
              .ticks=${this.layerLegend.ticks??5}
              .tickValues=${this.layerLegend.tickValues}
              .marginLeft=${0}
              .marginRight=${0}
            >
            </color-legend>
          </div>
        `)}
    `}}RT=new WeakMap,FT=new WeakMap,tn(iPe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerLegend:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-legend",iPe);var Od,qv,Y2,X2,N$,OT,MT;class sPe extends Zr{constructor(){super();yn(this,X2);yn(this,Od,{});yn(this,qv,null);yn(this,Y2);yn(this,OT,iI`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
    }
  `);yn(this,MT,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.throttleDataChange=HEe(mn(this,X2,N$),1e3)}updated(n){if(n.has("layerConfig")){const r=this.layerConfig.type==="style"||this.layerConfig.style?100:1e3;this.throttleDataChange=HEe(mn(this,X2,N$),r),this.requestUpdate()}}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){as(this,qv,_Lt(this.layer,this.layerConfig)),Object.keys(Gt(this,Od)).length!==0&&as(this,qv,Gt(this,Od)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const n={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return Qe`
      <style>
        ${Gt(this,OT)}
        ${!this.unstyled&&Gt(this,MT)}
      </style>
      ${Un(this.layerConfig,()=>Qe`
          ${Un(this.layerConfig.legend,()=>Qe`
              <eox-layercontrol-layer-legend
                .noShadow=${!0}
                .unstyled=${this.unstyled}
                .layer=${this.layer}
                .layerLegend=${wLt(this.layerConfig.legend,Gt(this,Od))}
              ></eox-layercontrol-layer-legend>
            `)}
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${Gt(this,qv)}
            .options=${n}
            @change=${this.throttleDataChange}
          ></eox-jsonform>
        `)}
    `}}Od=new WeakMap,qv=new WeakMap,Y2=new WeakMap,X2=new WeakSet,N$=function(n){as(this,Od,n.detail),this.layerConfig.type==="style"||this.layerConfig.style?"setStyle"in this.layer||"updateStyleVariables"in this.layer?bLt(Gt(this,Od),this.layer,this.layerConfig):console.error(`Layer type ${this.layer.get("type")??""} does not support styles configuration`):as(this,Y2,vLt(Gt(this,Od),Gt(this,Y2),this)),this.requestUpdate()},OT=new WeakMap,MT=new WeakMap,tn(sPe,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",sPe);var $T,aPe,IT,PT;class oPe extends Zr{constructor(){super();yn(this,$T);yn(this,IT,"");yn(this,PT,"");this.unstyled=!1,this.noShadow=!1,this.layerDatetime=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return customElements.get("eox-timecontrol")||console.error("Please import @eox/timecontrol in order to use layerDatetime"),Qe`
      <style>
        ${Gt(this,IT)}
        ${!this.unstyled&&Gt(this,PT)}
      </style>
      ${Un(this.layerDatetime,()=>Qe`
          <!-- Render a Timecontrol for layer date time -->
          <eox-timecontrol
            ?unstyled=${this.unstyled}
            .for=${void 0}
            .layer=${void 0}
            .navigation=${this.layerDatetime.navigation??!1}
            .slider=${this.layerDatetime.slider??!1}
            .play=${this.layerDatetime.play??!1}
            .controlValues=${this.layerDatetime.controlValues}
            .controlProperty=${void 0}
            current-step=${this.layerDatetime.currentStep}
            .displayFormat=${this.layerDatetime.displayFormat}
            @stepchange=${mn(this,$T,aPe)}
          ></eox-timecontrol>
        `)}
    `}}$T=new WeakSet,aPe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{bubbles:!0,detail:{datetime:n.detail.currentStep,layer:this.layer}})),this.layerDatetime.currentStep=n.detail.currentStep,this.requestUpdate()},IT=new WeakMap,PT=new WeakMap,tn(oPe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerDatetime:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-datetime",oPe);var Z2,NT,BT;class lPe extends Zr{constructor(){super();yn(this,Z2,n=>(this.selectedTab===n||this.toolsAsList)&&"highlighted");yn(this,NT,`
    .tabbed figure,
    .listed figure {
      margin: 0;
    }
    .tabbed nav,
    .listed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div,
    .listed nav div {
      display: flex;
    }
    .tabbed .tab,
    .listed .tab {
      display: none;
    }
    .tabbed .tab.highlighted,
    .listed .tab.highlighted {
      display: block;
    }
  `);yn(this,BT,`
    .listed label {
      display: flex;
      justify-content: start;
      align-items: center;
      background: var(--background-color) !important;
    }
    .listed label:not(:first-of-type) {
      margin-top: 10px;
    }
    .listed label span {
      text-transform: capitalize;
      font-weight: 300;
    }
    .tabbed, .listed {
      font-size: small;
    }
    .tabbed label.highlighted {
      border: 1px solid #0041701a;
      border-radius: 2px;
      border-bottom: none;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: var(--background-color);
      border: 1px solid #0041701a;
      border-radius: 2px;
      padding: var(--padding-vertical) var(--padding);
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.tabs,r=this.actions,i=r.length+n.length>1;return Qe`
      <style>
        ${Gt(this,NT)}
        ${!this.unstyled&&Gt(this,BT)}
      </style>
      <div class="${this.toolsAsList?"listed":"tabbed"}">
        <!-- Navigation for tabs and actions -->
        ${Un(i,()=>Qe`
            <nav>
              ${Un(!this.toolsAsList,()=>Qe`
                  <div>
                    <!-- Labels for tabs -->
                    ${su(n,(s,o)=>Qe`
                        <label
                          class=${Gt(this,Z2).call(this,o)}
                          @click=${()=>this.selectedTab=o}
                        >
                          <!-- Customizable icon for each tab -->
                          <slot name=${`${s}-icon`}>${s}</slot>
                        </label>
                      `)}
                  </div>
                  <div>
                    <!-- Icons for actions -->
                    ${su(r,s=>Qe`
                        <span>
                          <!-- Customizable icon for each action -->
                          <slot name=${`${s}-icon`}>${s}</slot>
                        </span>
                      `)}
                  </div>
                `)}
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${su(n,(s,o)=>Qe`
              ${Un(this.toolsAsList,()=>Qe`
                  <label>
                    <!-- Customizable icon for each tab -->
                    <slot name=${`${s}-icon`}>${s}</slot>
                    <span>${s}</span>
                  </label>
                `)}
              <div class="tab ${Gt(this,Z2).call(this,o)}">
                <!-- Content slot for each tab -->
                <slot name=${`${s}-content`}>${s}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}Z2=new WeakMap,NT=new WeakMap,BT=new WeakMap,tn(lPe,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-tools-items",lPe);const IB=':root,:host { --range-slider-height: 6px; --range-slider-thumb-size: 15px; --range-slider-thumb-border-radius: 50%; --range-slider-color: #004170; --range-slider-track-color: #d7dcdf; --range-slider-track-border-radius: 0;}input[type="range"] { -webkit-appearance: none; border: none; color: var(--range-slider-color); overflow: hidden; padding-left: 0; margin-left: 7px;}/*webkit*/input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; margin-top: calc( var(--range-slider-height) * 0.5 - var(--range-slider-thumb-size) * 0.5 );}input[type="range"]::-webkit-slider-runnable-track { height: var(--range-slider-height); border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-webkit-slider-thumb { cursor: grab; --clip-edges: 4px; --clip-top: calc( (var(--range-slider-thumb-size) - var(--range-slider-height)) * 0.5 ); --clip-bottom: calc(var(--range-slider-thumb-size) - var(--clip-top)); --clip-further: calc(100% + 1px); --box-fill: calc( -100vmax - var(--range-slider-thumb-size, var(--range-slider-thumb-size)) + 1px ) 0 0 100vmax currentColor; background: linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--range-slider-height) + 1px); background-color: currentColor; box-shadow: var(--box-fill); border-radius: var(--range-slider-thumb-size, var(--range-slider-thumb-size)); filter: brightness(100%); clip-path: polygon( 100% -1px, var(--clip-edges) -1px, 0 var(--clip-top), -100vmax var(--clip-top), -100vmax var(--clip-bottom), 0 var(--clip-bottom), var(--clip-edges) 100%, var(--clip-further) var(--clip-further) );}/*mozilla*/input[type="range"]::-moz-range-thumb { width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; cursor: grab;}input[type="range"]::-moz-range-track { border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-moz-range-progress { appearance: none; background: currentColor; transition-delay: 30ms;}input[type="range"]::-moz-range-track,input[type="range"]::-moz-range-progress { height: calc(var(--range-slider-height)); border-radius: var(--range-slider-track-border-radius);}/*toolcool slider*/tc-range-slider { --height: var(--range-slider-height); --panel-bg: var(--range-slider-track-color); --panel-bg-hover: var(--range-slider-track-color); --panel-bg-fill: var(--range-slider-color); --panel-bg-border-radius: var(--range-slider-track-border-radius); --pointer-bg: var(--range-slider-color); --pointer-bg-hover: var(--range-slider-color); --pointer-bg-focus: var(--range-slider-color); --pointer-width: var(--range-slider-thumb-size); --pointer-height: var(--range-slider-thumb-size); --pointer-shadow: none; --pointer-shadow-hover: none; --pointer-shadow-focus: none; --pointer-border: none; --pointer-border-hover: 0; --pointer-border-focus: 0; --pointer-border-radius: var(--range-slider-thumb-border-radius);}';var zT,jT;class uPe extends Zr{constructor(){super();tn(this,"_removeButton",()=>CLt(this));tn(this,"_sortButton",()=>kLt(this.unstyled));tn(this,"_button",n=>ALt(n,this.unstyled));tn(this,"_getDefaultTools",()=>{var n;return Qe`
      <div slot="info-content">
        ${Sc(this.layer.get("description"))}
      </div>
      <div slot="opacity-content">
        <!-- Input for opacity -->
        <input
          type="range"
          min="0"
          max="1"
          step="0.01"
          value=${rPe((n=this.layer)==null?void 0:n.getOpacity())}
          @input=${r=>this.layer.setOpacity(parseFloat(r.target.value))}
        />
      </div>
      <div slot="config-content">
        <!-- Layer configuration -->
        ${Un(this.layer.get("layerConfig"),()=>Qe`
            <eox-layercontrol-layerconfig
              slot="config-content"
              .layer=${this.layer}
              .noShadow=${!0}
              .layerConfig=${this.layer.get("layerConfig")}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layerconfig>
          `)}
      </div>
      <div slot="datetime-content">
        <!-- Layer datetime -->
        ${Un(this.layer.get("layerDatetime"),()=>Qe`
            <eox-layercontrol-layer-datetime
              slot="datetime-content"
              .noShadow=${!0}
              .layerDatetime=${this.layer.get("layerDatetime")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-datetime>
          `)}
      </div>
      <div slot="legend-content">
        <!-- Layer legend -->
        ${Un(this.layer.get("layerLegend"),()=>Qe`
            <eox-layercontrol-layer-legend
              slot="legend-content"
              .noShadow=${!0}
              .layerLegend=${this.layer.get("layerLegend")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-legend>
          `)}
      </div>
      <div slot="remove-icon">${this._removeButton()}</div>
      <div slot="sort-icon">${this._sortButton()}</div>
    `});yn(this,zT,"");yn(this,jT,`
    ${eS}  
    ${kB}
    ${TR}
    ${IB}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      height: 24px;
      cursor: pointer;
      display: var(--layer-tools-button-visibility);
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tools-items button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tools-items button.icon {
      opacity: .7;
    }
    eox-layercontrol-tools-items.tools-list button.icon {
      cursor: auto;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tools-items button.icon:hover {
      opacity: 1;
    }
    eox-layercontrol-tools-items.tools-list button.icon:hover {
      opacity: .7;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
      margin-right: var(--padding);
    }
    eox-layercontrol-tools-items button.icon,
    eox-layercontrol-tools-items .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tools-items.tools-list button.icon,
    eox-layercontrol-tools-items.tools-list .button.icon {
      margin-left: -6px;
    }
    eox-layercontrol-tools-items button.icon::before,
    eox-layercontrol-tools-items .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    details.tools summary .datetime-icon,
    button.icon[slot=datetime-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eclock-outline%3C/title%3E%3Cpath d='M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z' /%3E%3C/svg%3E");
    }
    details.tools summary .legend-icon,
    button.icon[slot=legend-icon]::before {
      content: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Ctitle%3Emap-legend%3C%2Ftitle%3E%3Cpath%20d%3D%22M9%2C3L3.36%2C4.9C3.15%2C4.97%203%2C5.15%203%2C5.38V20.5A0.5%2C0.5%200%200%2C0%203.5%2C21L3.66%2C20.97L9%2C18.9L15%2C21L20.64%2C19.1C20.85%2C19.03%2021%2C18.85%2021%2C18.62V3.5A0.5%2C0.5%200%200%2C0%2020.5%2C3L20.34%2C3.03L15%2C5.1L9%2C3M8%2C5.45V17.15L5%2C18.31V6.46L8%2C5.45M10%2C5.47L14%2C6.87V18.53L10%2C17.13V5.47M19%2C5.7V17.54L16%2C18.55V6.86L19%2C5.7M7.46%2C6.3L5.57%2C6.97V9.12L7.46%2C8.45V6.3M7.46%2C9.05L5.57%2C9.72V11.87L7.46%2C11.2V9.05M7.46%2C11.8L5.57%2C12.47V14.62L7.46%2C13.95V11.8M7.46%2C14.55L5.57%2C15.22V17.37L7.46%2C16.7V14.55Z%22%20%2F%3E%3C%2Fsvg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content],
    [slot=config-content],
    [slot=datetime-content],
    [slot=legend-content] {
      padding: 6px 0;
    }
    [slot=info-content] * {
      max-width: 100%;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const n=ELt(this.tools,this.layer),r=SLt(this.tools,this.layer),i=this[`_${n==null?void 0:n[0]}Button`]?this[`_${n==null?void 0:n[0]}Button`]():Xr,s=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",o=n==null?void 0:n.length,a=r==null?void 0:r.length;return Qe`
      <style>
        ${Gt(this,zT)}
        ${!this.unstyled&&Gt(this,jT)}
      </style>
      ${Un(o+a>0,()=>Qe`
          ${Un(o===1&&a===0,()=>Qe`
              <div class="single-action-container">
                <div class="single-action">${i}</div>
              </div>
            `,()=>Qe`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||Xr}
              >
                <summary>
                  <button class="icon ${s}">Tools</button>
                </summary>
                <eox-layercontrol-tools-items
                  class="${this.toolsAsList?"tools-list":"tools-tab"}"
                  .noShadow=${!1}
                  .actions=${n}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                  .toolsAsList=${this.toolsAsList}
                >
                  <!-- Rendering tabs and content -->
                  ${su(r,u=>this._button(u))}
                  <!-- Including default tools -->
                  ${this._getDefaultTools()}
                </eox-layercontrol-tools-items>
              </details>
            `)}
        `)}
    `}}zT=new WeakMap,jT=new WeakMap,tn(uPe,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",uPe);const LLt=e=>{const t=()=>{const n=gLt(e.layer,e.map,e.showLayerZoomState);let r=!1;!n&&e.currLayerVisibilityBasedOnZoom?(e.currLayerVisibilityBasedOnZoom=!1,r=!0):n&&!e.currLayerVisibilityBasedOnZoom&&(e.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(e.requestUpdate(),e.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};ePe(e.layer,e.showLayerZoomState)&&(t(),e.map.getView().on("change:resolution",()=>t()))},RLt=(e,t)=>{const n=t.layer;n.setVisible(e.target.checked),e.target.checked&&n.get("layerControlExclusive")&&t.closest(".layers > ul").querySelectorAll("eox-layercontrol-layer").forEach(i=>{var s;i.layer!==n&&((s=i.layer)!=null&&s.get("layerControlExclusive"))&&(i.layer.setVisible(!1),i.requestUpdate())}),t.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:n})),t.requestUpdate()};var bf,iv,fPe,UT,qT;class cPe extends Zr{constructor(){super();yn(this,bf);tn(this,"currLayerVisibilityBasedOnZoom",!0);yn(this,UT,"");yn(this,qT,`
    ${TR}
    eox-layercontrol-layer {
      width: 100%;
      position: relative;
    }
    .layer input[type=checkbox],
    .layer input[type=radio] {
      display: var(--layer-input-visibility);
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: var(--padding-vertical) 0;
      display: var(--layer-visibility);
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .title {
      display: var(--layer-title-visibility);
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
      display: var(--layer-type-visibility);
    }
    [data-type] .title.color-swatch::before {
      background: var(--layer-color);
      border-radius: 3px;
      content: "" !important;
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){LLt(this)}render(){var l;const n=this.layer.getVisible(),r=n?"visible":"",i=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",s=mn(this,bf,iv).call(this,"layerControlDisable")?"disabled":"",o=mn(this,bf,iv).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return Qe`
      <style>
        ${Gt(this,UT)}
        ${!this.unstyled&&Gt(this,qT)}
      </style>
      ${Un(this.layer,()=>Qe`
          <!-- Render the layer -->
          <div class="layer ${r} ${i}">
            <label class="drag-handle ${s}">
              <!-- Input element for layer visibility -->
              <input
                type=${o}
                .checked=${rPe(n)}
                @click=${mn(this,bf,fPe)}
              />

              <!-- Layer title -->
              <span
                class="title ${mn(this,bf,iv).call(this,"color")?"color-swatch":""}"
                style="--layer-color: ${mn(this,bf,iv).call(this,"color")}"
              >
                ${mn(this,bf,iv).call(this,this.titleProperty)}
              </span>
              ${Un(a,()=>Qe`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}bf=new WeakSet,iv=function(n){var r;return(r=this.layer)==null?void 0:r.get(n)},fPe=function(n){RLt(n,this)},UT=new WeakMap,qT=new WeakMap,tn(cPe,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer",cPe);var HT,GT;class dPe extends Zr{constructor(){super();yn(this,HT,"");yn(this,GT,`
    details summary {
      cursor: pointer;
      display: var(--layer-summary-visibility);
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: var(--layer-visibility);
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var i,s;const n=!!((i=this.group)!=null&&i.get("layerControlExpand")),r=(s=nPe(this.group.getLayers()))==null?void 0:s.length;return Qe`
      <style>
        ${Gt(this,HT)}
        ${!this.unstyled&&Gt(this,GT)}
      </style>
      ${Un(this.group,()=>Qe`
          <!-- Render the details element with the layer control -->
          <details
            open=${n||Xr}
            data-children-length=${r}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                .toolsAsList=${this.toolsAsList}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              .toolsAsList=${this.toolsAsList}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}HT=new WeakMap,GT=new WeakMap,tn(dPe,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",dPe);const FLt=e=>{const{layers:t,idProperty:n,titleProperty:r,renderRoot:i}=e,s=G0(()=>{e.requestUpdate(),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),o=()=>s();if(t&&(t.hasListener("change:length")&&(t==null||t.un("change:length",o)),t.on("change:length",o),t)){const a=i.querySelector("ul");mLt(t,n,r,e),pLt(a,t,n,e)}};var VT,WT;class hPe extends Zr{constructor(){super();yn(this,VT,"");yn(this,WT,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: var(--list-padding);
    }
    li:not(li li) {
      padding-left: var(--padding);
    }
    li {
      list-style: none;
      border-bottom: 1px solid #0041703a;
      border: var(--layer-visibility);
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}firstUpdated(){FLt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.layers?nPe(this.layers).reverse():[];return Qe`
      <style>
        ${Gt(this,VT)}
        ${!this.unstyled&&Gt(this,WT)}
      </style>
      <ul>
        ${Un(this.layers,()=>Qe`
            ${pIe(n,r=>r,r=>Qe`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${yLt(r,this.map)}"
                >
                  ${r.getLayers?Qe`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:Qe`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}VT=new WeakMap,WT=new WeakMap,tn(hPe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",hPe);const OLt=e=>{const t=e.querySelector("select[name=optional]"),n=t?t.value:null,r=MB(e.layers.getArray(),"layerControlOptional",!0).find(i=>(i.get(e.idProperty)||i.ol_uid)===n);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),e.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(i=>i.requestUpdate()),e.requestUpdate()};var YT,mPe;class pPe extends Zr{constructor(){super();yn(this,YT);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=MB(this.layers.getArray(),"layerControlOptional",!0);return Qe`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${n.map(r=>{const i=r.get(this.idProperty)||r.ol_uid,s=r.get(this.titleProperty),o=`layer ${r.get(this.idProperty)}`;return Qe` <option value="${i}">${s||o}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${mn(this,YT,mPe)}">add</button>
    `}}YT=new WeakSet,mPe=function(){OLt(this)},tn(pPe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",pPe);const MLt=(e,t)=>{t.jsonInput=e.target.value,t.requestUpdate()},GEe=e=>{const t=JSON.parse(`{"data":${BIe(e.jsonInput)}}`);Array.isArray(t.data)?t.data.forEach(n=>{e.eoxMap.addOrUpdateLayer(n)}):e.eoxMap.addOrUpdateLayer(t.data),e.jsonInput=null,e.requestUpdate()},$Lt=(e,t)=>{t.urlInput=e.target.value,t.requestUpdate()};async function ILt(e){const t=e.urlInput;if(e.wmsCapabilities=null,e.searchLoad=!0,e.requestUpdate(),!t)return!1;if(DB(t)==="XYZ")return{Name:t};try{const n=await PDt(t);e.wmsCapabilities=n}catch{}finally{e.searchLoad=!1,e.requestUpdate()}return!1}const PLt=(e,t)=>{const{Name:n}=e,r=DB(t.urlInput)||"XYZ",i={type:"Tile",properties:{id:n,title:n},source:{type:r,url:t.urlInput,params:{LAYERS:n}}};t.jsonInput=JSON.stringify(i)},NLt=(e,t)=>{t.open=e||null,t.urlInput=null,t.jsonInput=null,t.wmsCapabilities=null,t.requestUpdate()};var ra,yPe,vPe,B$,bPe,xPe,ZC,XT,ZT;class gPe extends Zr{constructor(){super();yn(this,ra);tn(this,"urlInput",null);tn(this,"jsonInput",null);tn(this,"open",null);tn(this,"searchLoad",!1);tn(this,"wmsCapabilities",null);yn(this,XT,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);yn(this,ZT,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.open?"open":"close",r=this.open==="url",i=this.open==="json",s=!NDt(this.urlInput)||this.searchLoad?!0:Xr;return Qe`
      <style>
        ${Gt(this,XT)}
        ${!this.unstyled&&Gt(this,ZT)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${n}">
            <li
              @click=${()=>mn(this,ra,ZC).call(this,"url")}
              class="${r?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>mn(this,ra,ZC).call(this,"json")}
              class="${i?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>mn(this,ra,ZC).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${n}">
          ${r?Qe`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${mn(this,ra,yPe)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${s} 
                  @click=${mn(this,ra,vPe)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?Qe`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(o=>{const a=o.Name;return Qe`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>mn(this,ra,B$).call(this,o)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:Xr}
            `:Qe`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${mn(this,ra,xPe)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${BDt(this.jsonInput)?Xr:!0}
                  @click=${mn(this,ra,bPe)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}ra=new WeakSet,yPe=function(n){$Lt(n,this)},vPe=async function(){const n=await ILt(this);n&&mn(this,ra,B$).call(this,n)},B$=function(n){PLt(n,this),GEe(this)},bPe=function(){GEe(this)},xPe=function(n){MLt(n,this)},ZC=function(n){NLt(n,this)},XT=new WeakMap,ZT=new WeakMap,tn(gPe,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",gPe);const BLt=(e,t)=>{if(t.requestUpdate(),e.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const n=t.renderRoot.querySelector("eox-layercontrol-optional-list");n==null||n.requestUpdate()}},VEe=e=>{const t=K_(e.for);return t&&t.map!==e.map&&(e.map=t.map),t};var pp,P1,_Pe,EPe,KT;class wPe extends Zr{constructor(){super();yn(this,P1);yn(this,pp);yn(this,KT,`
    :host, :root {
      font-family: Roboto, sans-serif;
      --padding: 0.5rem;
      --padding-vertical: .2rem;
      --list-padding: 48px;
      --layer-input-visibility: flex;
      --layer-summary-visibility: flex;
      --layer-type-visibility: block;
      --layer-title-visibility: flex;
      --layer-visibility: block;
      --layer-tools-button-visibility: flex;

      display: block;
      padding: var(--padding) 0;
      --background-color: var(--eox-background-color, transparent);
      background-color: var(--background-color, transparent);
    }
    select {
      background-color: var(--background-color);
    }
  `);this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","datetime","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride="",this.toolsAsList=!1}firstUpdated(){this.eoxMap=VEe(this)}updated(n){n.has("for")&&(this.eoxMap=VEe(this))}get eoxMap(){return Gt(this,pp)}set eoxMap(n){const r=Gt(this,pp);as(this,pp,n),this.requestUpdate("eoxMap",r)}render(){var i,s,o;const n=(i=this.map)==null?void 0:i.getLayers().getArray(),r=n&&((s=MB(n,"layerControlOptional",!0))==null?void 0:s.length)>0;return Qe`
      <style>
        ${!this.unstyled&&Gt(this,KT)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${Un(this.addExternalLayers&&((o=Gt(this,pp))==null?void 0:o.addOrUpdateLayer),()=>Qe`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${Gt(this,pp)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${Un(this.map,()=>Qe`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
            @changed=${mn(this,P1,_Pe)}
            @datetime:updated=${mn(this,P1,EPe)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${Un(r,()=>Qe`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}pp=new WeakMap,P1=new WeakSet,_Pe=function(n){BLt(n,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:n.detail}))},EPe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{detail:n.detail}))},KT=new WeakMap,tn(wPe,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol",wPe);class zLt extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(12, 1fr);
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}class jLt extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          overflow: hidden;

          grid-column: ${parseInt(this.getAttribute("x"))+1} / span ${this.getAttribute("w")};
          grid-row: ${parseInt(this.getAttribute("y"))+1} / span ${this.getAttribute("h")};
        }
      </style>
      <slot></slot>
    `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}customElements.define("eox-layout",zLt);customElements.define("eox-layout-item",jLt);window.eoxMapAdvancedOlFormats=HWe;var Ya=(e,t,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(e,t)).next())}),Zl=Uint8Array,I_=Uint16Array,ULt=Int32Array,SPe=new Zl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),APe=new Zl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qLt=new Zl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),CPe=function(e,t){for(var n=new I_(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new ULt(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},kPe=CPe(SPe,2),TPe=kPe.b,HLt=kPe.r;TPe[28]=258,HLt[258]=28;var GLt=CPe(APe,0),VLt=GLt.b,DPe=new I_(32768);for(gi=0;gi<32768;++gi)Cd=(gi&43690)>>1|(gi&21845)<<1,Cd=(Cd&52428)>>2|(Cd&13107)<<2,Cd=(Cd&61680)>>4|(Cd&3855)<<4,DPe[gi]=((Cd&65280)>>8|(Cd&255)<<8)>>1;var Cd,gi,P_=function(e,t,n){for(var r=e.length,i=0,s=new I_(t);i<r;++i)e[i]&&++s[e[i]-1];var o=new I_(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var a;{a=new I_(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],f=t-e[i],c=o[e[i]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)a[DPe[c]>>l]=u}return a},sS=new Zl(288);for(gi=0;gi<144;++gi)sS[gi]=8;var gi;for(gi=144;gi<256;++gi)sS[gi]=9;var gi;for(gi=256;gi<280;++gi)sS[gi]=7;var gi;for(gi=280;gi<288;++gi)sS[gi]=8;var gi,LPe=new Zl(32);for(gi=0;gi<32;++gi)LPe[gi]=5;var gi,WLt=P_(sS,9),YLt=P_(LPe,5),fM=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ic=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},dM=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},XLt=function(e){return(e+7)/8|0},ZLt=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new Zl(n-t);return r.set(e.subarray(t,n)),r},KLt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vl=function(e,t,n){var r=new Error(t||KLt[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Vl),!n)throw r;return r},PB=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Zl(0);var o=!n||t.i!=2,a=t.i;n||(n=new Zl(i*3));var l=function(Ie){var qe=n.length;if(Ie>qe){var Pe=new Zl(Math.max(qe*2,Ie));Pe.set(n),n=Pe}},u=t.f||0,f=t.p||0,c=t.b||0,d=t.l,h=t.d,p=t.m,g=t.n,v=i*8;do{if(!d){u=ic(e,f,1);var y=ic(e,f+1,3);if(f+=3,y)if(y==1)d=WLt,h=YLt,p=9,g=5;else if(y==2){var A=ic(e,f,31)+257,T=ic(e,f+10,15)+4,D=A+ic(e,f+5,31)+1;f+=14;for(var k=new Zl(D),R=new Zl(19),O=0;O<T;++O)R[qLt[O]]=ic(e,f+O*3,7);f+=T*3;for(var B=fM(R),K=(1<<B)-1,L=P_(R,B),O=0;O<D;){var $=L[ic(e,f,K)];f+=$&15;var b=$>>4;if(b<16)k[O++]=b;else{var I=0,U=0;for(b==16?(U=3+ic(e,f,3),f+=2,I=k[O-1]):b==17?(U=3+ic(e,f,7),f+=3):b==18&&(U=11+ic(e,f,127),f+=7);U--;)k[O++]=I}}var q=k.subarray(0,A),Y=k.subarray(A);p=fM(q),g=fM(Y),d=P_(q,p),h=P_(Y,g)}else Vl(1);else{var b=XLt(f)+4,w=e[b-4]|e[b-3]<<8,E=b+w;if(E>i){a&&Vl(0);break}o&&l(c+w),n.set(e.subarray(b,E),c),t.b=c+=w,t.p=f=E*8,t.f=u;continue}if(f>v){a&&Vl(0);break}}o&&l(c+131072);for(var X=(1<<p)-1,te=(1<<g)-1,le=f;;le=f){var I=d[dM(e,f)&X],ee=I>>4;if(f+=I&15,f>v){a&&Vl(0);break}if(I||Vl(2),ee<256)n[c++]=ee;else if(ee==256){le=f,d=null;break}else{var z=ee-254;if(ee>264){var O=ee-257,he=SPe[O];z=ic(e,f,(1<<he)-1)+TPe[O],f+=he}var de=h[dM(e,f)&te],ze=de>>4;de||Vl(3),f+=de&15;var Y=VLt[ze];if(ze>3){var he=APe[ze];Y+=dM(e,f)&(1<<he)-1,f+=he}if(f>v){a&&Vl(0);break}o&&l(c+131072);var He=c+z;if(c<Y){var je=s-Y,we=Math.min(Y,He);for(je+c<0&&Vl(3);c<we;++c)n[c]=r[je+c]}for(;c<He;c+=4)n[c]=n[c-Y],n[c+1]=n[c+1-Y],n[c+2]=n[c+2-Y],n[c+3]=n[c+3-Y];c=He}}t.l=d,t.p=le,t.b=c,t.f=u,d&&(u=1,t.m=p,t.d=h,t.n=g)}while(!u);return c==n.length?n:ZLt(n,0,c)},JLt=new Zl(0),QLt=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Vl(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},eRt=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},tRt=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Vl(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Vl(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function nRt(e,t){return PB(e,{i:2},t,t)}function rRt(e,t){var n=QLt(e);return n+8>e.length&&Vl(6,"invalid gzip data"),PB(e.subarray(n,-8),{i:2},new Zl(eRt(e)),t)}function iRt(e,t){return PB(e.subarray(tRt(e,t),-4),{i:2},t,t)}function z$(e,t){return e[0]==31&&e[1]==139&&e[2]==8?rRt(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?nRt(e,t):iRt(e,t)}var sRt=typeof TextDecoder<"u"&&new TextDecoder,oRt=0;try{sRt.decode(JLt,{stream:!0}),oRt=1}catch{}var RPe=(e,t)=>e*Math.pow(2,t),Tw=(e,t)=>Math.floor(e/Math.pow(2,t)),cT=(e,t)=>RPe(e.getUint16(t+1,!0),8)+e.getUint8(t),FPe=(e,t)=>RPe(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),aRt=(e,t,n,r,i)=>{if(e!=r.getUint8(i))return e-r.getUint8(i);const s=cT(r,i+1);if(t!=s)return t-s;const o=cT(r,i+4);return n!=o?n-o:0},lRt=(e,t,n,r)=>{const i=OPe(e,t|128,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!0}:null},WEe=(e,t,n,r)=>{const i=OPe(e,t,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!1}:null},OPe=(e,t,n,r)=>{let i=0,s=e.byteLength/17-1;for(;i<=s;){const o=s+i>>1,a=aRt(t,n,r,e,o*17);if(a>0)i=o+1;else if(a<0)s=o-1;else return[FPe(e,o*17+7),e.getUint32(o*17+13,!0)]}return null},uRt=(e,t)=>e.is_dir&&!t.is_dir?1:!e.is_dir&&t.is_dir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,MPe=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:cT(e,t*17+1),y:cT(e,t*17+4),offset:FPe(e,t*17+7),length:e.getUint32(t*17+13,!0),is_dir:n>>7===1}},YEe=e=>{const t=[],n=new DataView(e);for(let r=0;r<n.byteLength/17;r++)t.push(MPe(n,r));return cRt(t)},cRt=e=>{e.sort(uRt);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++){const i=e[r];let s=i.z;i.is_dir&&(s=s|128),n[r*17]=s,n[r*17+1]=i.x&255,n[r*17+2]=i.x>>8&255,n[r*17+3]=i.x>>16&255,n[r*17+4]=i.y&255,n[r*17+5]=i.y>>8&255,n[r*17+6]=i.y>>16&255,n[r*17+7]=i.offset&255,n[r*17+8]=Tw(i.offset,8)&255,n[r*17+9]=Tw(i.offset,16)&255,n[r*17+10]=Tw(i.offset,24)&255,n[r*17+11]=Tw(i.offset,32)&255,n[r*17+12]=Tw(i.offset,48)&255,n[r*17+13]=i.length&255,n[r*17+14]=i.length>>8&255,n[r*17+15]=i.length>>16&255,n[r*17+16]=i.length>>24&255}return t},fRt=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,r=MPe(e,n-1);if(r.is_dir){const i=r.z,s=t.z-i,o=Math.trunc(t.x/(1<<s)),a=Math.trunc(t.y/(1<<s));return{z:i,x:o,y:a}}return null};function dRt(e){return Ya(this,null,function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),r=n.getUint32(4,!0),i=n.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(t.data,10,r)));let a=0;o.compression==="gzip"&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let u=0;"maxzoom"in o&&(u=+o.maxzoom);let f=0,c=0,d=0,h=-180,p=-85,g=180,v=85;if(o.bounds){const b=o.bounds.split(",");h=+b[0],p=+b[1],g=+b[2],v=+b[3]}if(o.center){const b=o.center.split(",");f=+b[0],c=+b[1],d=+b[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:h,minLat:p,maxLon:g,maxLat:v,centerZoom:d,centerLon:f,centerLat:c,etag:t.etag}})}function hRt(e,t,n,r,i,s,o){return Ya(this,null,function*(){let a=yield n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(a=YEe(a));const l=WEe(new DataView(a),r,i,s);if(l){let c=(yield t.getBytes(l.offset,l.length,o)).data;const d=new DataView(c);return d.getUint8(0)==31&&d.getUint8(1)==139&&(c=z$(new Uint8Array(c))),{data:c}}const u=fRt(new DataView(a),{z:r,x:i,y:s});if(u){const f=lRt(new DataView(a),u.z,u.x,u.y);if(f){let c=yield n.getArrayBuffer(t,f.offset,f.length,e);e.specVersion===1&&(c=YEe(c));const d=WEe(new DataView(c),r,i,s);if(d){let p=(yield t.getBytes(d.offset,d.length,o)).data;const g=new DataView(p);return g.getUint8(0)==31&&g.getUint8(1)==139&&(p=z$(new Uint8Array(p))),{data:p}}}}})}var $Pe={getHeader:dRt,getZxy:hRt};function Yy(e,t){return(t>>>0)*4294967296+(e>>>0)}function pRt(e,t){const n=t.buf;let r,i;if(i=n[t.pos++],r=(i&112)>>4,i<128||(i=n[t.pos++],r|=(i&127)<<3,i<128)||(i=n[t.pos++],r|=(i&127)<<10,i<128)||(i=n[t.pos++],r|=(i&127)<<17,i<128)||(i=n[t.pos++],r|=(i&127)<<24,i<128)||(i=n[t.pos++],r|=(i&1)<<31,i<128))return Yy(e,r);throw new Error("Expected varint not more than 10 bytes")}function Dw(e){const t=e.buf;let n,r;return r=t[e.pos++],n=r&127,r<128||(r=t[e.pos++],n|=(r&127)<<7,r<128)||(r=t[e.pos++],n|=(r&127)<<14,r<128)||(r=t[e.pos++],n|=(r&127)<<21,r<128)?n:(r=t[e.pos],n|=(r&15)<<28,pRt(n,e))}function mRt(e,t,n,r){if(r==0){n==1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const i=t[0];t[0]=t[1],t[1]=i}}var gRt=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function yRt(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,e)-1||n>Math.pow(2,e)-1)throw Error("tile x/y outside zoom level bounds");const r=gRt[e],i=Math.pow(2,e);let s=0,o=0,a=0;const l=[t,n];let u=i/2;for(;u>0;)s=(l[0]&u)>0?1:0,o=(l[1]&u)>0?1:0,a+=u*u*(3*s^o),mRt(u,l,s,o),u=u/2;return r+a}function IPe(e,t){return Ya(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return z$(new Uint8Array(e));{let r=new Response(e).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var sv=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(sv||{}),vRt=127;function bRt(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=r+n>>1,s=t-e[i].tileId;if(s>0)n=i+1;else if(s<0)r=i-1;else return e[i]}return r>=0&&(e[r].runLength===0||t-e[r].tileId<e[r].runLength)?e[r]:null}var xRt=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n){return Ya(this,null,function*(){let r;n||(r=new AbortController,n=r.signal);const i=new Headers(this.customHeaders);i.set("Range","bytes="+e+"-"+(e+t-1));let s=yield fetch(this.url,{signal:n,headers:i});if(s.status===416&&e===0){const l=s.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const u=+l.substr(8);s=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(u-1)}})}if(s.status>=300)throw Error("Bad response code: "+s.status);const o=s.headers.get("Content-Length");if(s.status===200&&(!o||+o>t))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield s.arrayBuffer(),etag:s.headers.get("ETag")||void 0,cacheControl:s.headers.get("Cache-Control")||void 0,expires:s.headers.get("Expires")||void 0}})}};function sc(e,t){const n=e.getUint32(t+4,!0),r=e.getUint32(t+0,!0);return n*Math.pow(2,32)+r}function wRt(e,t){const n=new DataView(e),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:sc(n,8),rootDirectoryLength:sc(n,16),jsonMetadataOffset:sc(n,24),jsonMetadataLength:sc(n,32),leafDirectoryOffset:sc(n,40),leafDirectoryLength:sc(n,48),tileDataOffset:sc(n,56),tileDataLength:sc(n,64),numAddressedTiles:sc(n,72),numTileEntries:sc(n,80),numTileContents:sc(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function PPe(e){const t={buf:new Uint8Array(e),pos:0},n=Dw(t),r=[];let i=0;for(let s=0;s<n;s++){const o=Dw(t);r.push({tileId:i+o,offset:0,length:0,runLength:1}),i+=o}for(let s=0;s<n;s++)r[s].runLength=Dw(t);for(let s=0;s<n;s++)r[s].length=Dw(t);for(let s=0;s<n;s++){const o=Dw(t);o===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=o-1}return r}function _Rt(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var xv=class extends Error{};function ERt(e,t,n,r){return Ya(this,null,function*(){const i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(_Rt(i.data)<3)return[yield $Pe.getHeader(e)];const o=i.data.slice(0,vRt);let a=i.etag;r&&i.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),a=void 0);const l=wRt(o,a);if(n){const u=i.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),f=e.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,c=PPe(yield t(u,l.internalCompression));return[l,[f,c.length,c]]}return[l,void 0]})}function SRt(e,t,n,r,i){return Ya(this,null,function*(){const s=yield e.getBytes(n,r);if(i.etag&&i.etag!==s.etag)throw new xv(s.etag);const o=yield t(s.data,i.internalCompression),a=PPe(o);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var ARt=class{constructor(e=100,t=!0,n=IPe){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.prefetch=t,this.decompress=n}getHeader(e,t){return Ya(this,null,function*(){const n=e.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const r=new Promise((i,s)=>{ERt(e,this.decompress,this.prefetch,t).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),i(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(n,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,n,r){return Ya(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const s=new Promise((o,a)=>{SRt(e,this.decompress,t,n,r).then(l=>{o(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(e,t,n,r){return Ya(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const s=new Promise((o,a)=>{e.getBytes(t,n).then(l=>{if(r.etag&&r.etag!==l.etag)throw new xv(l.etag);o(l.data),this.cache.has(i),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,r)=>{n.lastUsed<e&&(e=n.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e,t){return Ya(this,null,function*(){this.cache.delete(e.getKey()),yield this.getHeader(e,t)})}},NB=class{constructor(e,t,n){typeof e=="string"?this.source=new xRt(e):this.source=e,n?this.decompress=n:this.decompress=IPe,t?this.cache=t:this.cache=new ARt}getHeader(){return Ya(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,n,r){return Ya(this,null,function*(){const i=yRt(e,t,n),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return $Pe.getZxy(s,this.source,this.cache,e,t,n,r);if(e<s.minZoom||e>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,o,a,s),f=bRt(u,i);if(f)if(f.runLength>0){const c=yield this.source.getBytes(s.tileDataOffset+f.offset,f.length,r);if(s.etag&&s.etag!==c.etag)throw new xv(c.etag);return{data:yield this.decompress(c.data,s.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else o=s.leafDirectoryOffset+f.offset,a=f.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,n,r){return Ya(this,null,function*(){try{return yield this.getZxyAttempt(e,t,n,r)}catch(i){if(i instanceof xv)return this.cache.invalidate(this.source,i.message),yield this.getZxyAttempt(e,t,n,r);throw i}})}getMetadataAttempt(){return Ya(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength);if(e.etag&&e.etag!==t.etag)throw new xv(t.etag);const n=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))})}getMetadata(){return Ya(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof xv)return this.cache.invalidate(this.source,e.message),yield this.getMetadataAttempt();throw e}})}};class CRt extends HCe{constructor(t){super(kl.ERROR),this.error=t}}class rs{constructor(t){this.name=t}toString(){return this.name}}rs.GeoTIFF=new rs("GeoTIFF");rs.ImageStatic=new rs("ImageStatic");rs.PMTilesRaster=new rs("PMTilesRaster");rs.PMTilesVector=new rs("PMTilesVector");rs.TileJSON=new rs("TileJSON");rs.TileWMS=new rs("TileWMS");rs.WMTS=new rs("WMTS");rs.XYZ=new rs("XYZ");var KC={exports:{}},kRt=KC.exports,XEe;function TRt(){return XEe||(XEe=1,function(e,t){(function(n,r){e.exports=r()})(kRt,function(){var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(c,d){return c.indexOf(d)===-1?c.length:c.indexOf(d)}function i(c){var d=c.replace(/^v/,"").replace(/\+.*$/,""),h=r(d,"-"),p=d.substring(0,h).split(".");return p.push(d.substring(h+1)),p}function s(c){return isNaN(Number(c))?c:Number(c)}function o(c){if(typeof c!="string")throw new TypeError("Invalid argument expected string");if(!n.test(c))throw new Error("Invalid argument not valid semver ('"+c+"' received)")}function a(c,d){[c,d].forEach(o);for(var h=i(c),p=i(d),g=0;g<Math.max(h.length-1,p.length-1);g++){var v=parseInt(h[g]||0,10),y=parseInt(p[g]||0,10);if(v>y)return 1;if(y>v)return-1}var b=h[h.length-1],w=p[p.length-1];if(b&&w){var E=b.split(".").map(s),A=w.split(".").map(s);for(g=0;g<Math.max(E.length,A.length);g++){if(E[g]===void 0||typeof A[g]=="string"&&typeof E[g]=="number")return-1;if(A[g]===void 0||typeof E[g]=="string"&&typeof A[g]=="number"||E[g]>A[g])return 1;if(A[g]>E[g])return-1}}else if(b||w)return b?-1:1;return 0}var l=[">",">=","=","<","<="],u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function f(c){if(typeof c!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof c);if(l.indexOf(c)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(c){return typeof c=="string"&&n.test(c)},a.compare=function(c,d,h){f(h);var p=a(c,d);return u[h].indexOf(p)>-1},a})}(KC)),KC.exports}var hM,ZEe;function DRt(){if(ZEe)return hM;ZEe=1;var e=TRt();const t="1.0.0",n=!0,r={classification:"https://stac-extensions.github.io/classification/v1.1.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.1.0/schema.json",eo:"https://stac-extensions.github.io/eo/v1.0.0/schema.json",file:"https://stac-extensions.github.io/file/v1.0.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.1.0/schema.json",projection:"https://stac-extensions.github.io/projection/v1.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v1.1.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.0.0/schema.json",version:"https://stac-extensions.github.io/version/v1.0.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},i={itemAndCollection:{"cube:":r.datacube,"eo:":r.eo,"file:":r.file,"label:":r.label,"pc:":r.pointcloud,"processing:":r.processing,"proj:":r.projection,"raster:":r.raster,"sar:":r.sar,"sat:":r.sat,"sci:":r.scientific,"view:":r.view,version:r.version,deprecated:r.version,published:r.timestamps,expires:r.timestamps,unpublished:r.timestamps},catalog:{},collection:{item_assets:r["item-assets"]},item:{}};i.collection=Object.assign(i.collection,i.itemAndCollection),i.item=Object.assign(i.item,i.itemAndCollection);var s={parseUrl(y){let b=y.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(b)return{id:b[1],version:b[2]}}},o={version:t,extensions:{},set(y){if(typeof y.stac_version!="string"?o.version="0.6.0":o.version=y.stac_version,Array.isArray(y.stac_extensions))for(let b of y.stac_extensions){let w=s.parseUrl(b);w&&(o.extensions[w.id]=w.version)}},before(y,b=null){let w=b?o.extensions[b]:o.version;return typeof w>"u"?!1:e.compare(w,y,"<")}},a={type(y){let b=typeof y;if(b==="object"){if(y===null)return"null";if(Array.isArray(y))return"array"}return b},is(y,b){return a.type(y)===b},isDefined(y){return typeof y<"u"},isObject(y){return typeof y=="object"&&y===Object(y)&&!Array.isArray(y)},rename(y,b,w){return typeof y[b]<"u"&&typeof y[w]>"u"?(y[w]=y[b],delete y[b],!0):!1},forAll(y,b,w){if(y[b]&&typeof y[b]=="object")for(let E in y[b])w(y[b][E])},toArray(y,b){return typeof y[b]<"u"&&!Array.isArray(y[b])?(y[b]=[y[b]],!0):!1},flattenArray(y,b,w,E=!1){if(Array.isArray(y[b])){for(let A in y[b])if(typeof w[A]=="string"){let T=y[b][A];y[w[A]]=E?[T]:T}return delete y[b],!0}return!1},flattenOneElementArray(y,b,w=!1){return!w&&Array.isArray(y[b])?y[b].length===1?(y[b]=y[b][0],!0):!1:!0},removeFromArray(y,b,w){if(Array.isArray(y[b])){let E=y[b].indexOf(w);return E>-1&&y[b].splice(E,1),!0}return!1},ensure(y,b,w){return a.type(w)!==a.type(y[b])&&(y[b]=w),!0},upgradeExtension(y,b){let{id:w,version:E}=s.parseUrl(b),A=y.stac_extensions.findIndex(T=>{let D=s.parseUrl(T);return D&&D.id===w&&e.compare(D.version,E,"<")});return A!==-1?(y.stac_extensions[A]=b,!0):!1},addExtension(y,b){let{id:w,version:E}=s.parseUrl(b),A=y.stac_extensions.findIndex(T=>{if(T===b)return!0;let D=s.parseUrl(T);return!!(D&&D.id===w&&e.compare(D.version,E,"<"))});return A===-1?y.stac_extensions.push(b):y.stac_extensions[A]=b,y.stac_extensions.sort(),!0},removeExtension(y,b){return a.removeFromArray(y,"stac_extensions",b)},migrateExtensionShortnames(y){let b=Object.keys(r),w=Object.values(r);return a.mapValues(y,"stac_extensions",b,w)},populateExtensions(y,b){let w=[];(b=="catalog"||b=="collection")&&w.push(y),(b=="item"||b=="collection")&&a.isObject(y.assets)&&(w=w.concat(Object.values(y.assets))),b=="collection"&&a.isObject(y.item_assets)&&(w=w.concat(Object.values(y.item_assets))),b=="collection"&&a.isObject(y.summaries)&&w.push(y.summaries),b=="item"&&a.isObject(y.properties)&&w.push(y.properties);for(let E of w)Object.keys(E).forEach(A=>{let T=A.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(T)){let D=i[b][T[0]];a.is(D,"string")&&a.addExtension(y,D)}})},mapValues(y,b,w,E){let A=T=>{let D=w.indexOf(T);return D>=0?E[D]:T};return Array.isArray(y[b])?y[b]=y[b].map(A):typeof y[b]<"u"&&(y[b]=A(y[b])),!0},mapObject(y,b){for(let w in y)y[w]=b(y[w],w)},moveTo(y,b,w,E=!1,A=!1){let T;return E?A?T=D=>Array.isArray(D):T=D=>Array.isArray(D)&&D.length===1:T=a.isDefined,T(y[b])?(w[b]=E&&!A?y[b][0]:y[b],delete y[b],!0):!1},runAll(y,b,w,E){for(let A in y)A.startsWith("migrate")||y[A](b,w,E)},toUTC(y,b){if(typeof y[b]=="string")try{return y[b]=this.toISOString(y[b]),!0}catch{}return delete y[b],!1},toISOString(y){return y instanceof Date||(y=new Date(y)),y.toISOString().replace(".000","")}},l={multihash:null,hexToUint8(y){if(y.length===0||y.length%2!==0)throw new Error(`The string "${y}" is not valid hex.`);return new Uint8Array(y.match(/.{1,2}/g).map(b=>parseInt(b,16)))},uint8ToHex(y){return y.reduce((b,w)=>b+w.toString(16).padStart(2,"0"),"")},toMultihash(y,b,w){if(!l.multihash||!a.is(y[b],"string"))return!1;try{const E=l.multihash.encode(l.hexToUint8(y[b]),w);return y[b]=l.uint8ToHex(E),!0}catch(E){return console.warn(E),!1}}},u={migrate(y,b=!0){return o.set(y),b&&(y.stac_version=t),y.type="Catalog",a.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"description",""),a.ensure(y,"links",[]),a.runAll(u,y,y),o.before("0.8.0")&&a.populateExtensions(y,"catalog"),y}},f={migrate(y,b=!0){return u.migrate(y,b),y.type="Collection",o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"license","proprietary"),a.ensure(y,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),a.runAll(f,y,y),a.isObject(y.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),delete y.properties),o.before("0.8.0")&&a.populateExtensions(y,"collection"),o.before("1.0.0-beta.1")&&a.mapValues(y,"stac_extensions",["assets"],["item-assets"]),y},extent(y){if(a.ensure(y,"extent",{}),o.before("0.8.0")&&(Array.isArray(y.extent.spatial)&&(y.extent.spatial={bbox:[y.extent.spatial]}),Array.isArray(y.extent.temporal)&&(y.extent.temporal={interval:[y.extent.temporal]})),a.ensure(y.extent,"spatial",{}),a.ensure(y.extent.spatial,"bbox",[]),a.ensure(y.extent,"temporal",{}),a.ensure(y.extent.temporal,"interval",[]),o.before("1.0.0-rc.3")){if(y.extent.temporal.interval.length>1){let b,w;for(let E of y.extent.temporal.interval){if(E[0]===null)b=null;else if(typeof E[0]=="string"&&b!==null)try{let A=new Date(E[0]);(typeof b>"u"||A<b)&&(b=A)}catch{}if(E[1]===null)w=null;else if(typeof E[1]=="string"&&w!==null)try{let A=new Date(E[1]);(typeof w>"u"||A>w)&&(w=A)}catch{}}y.extent.temporal.interval.unshift([b?a.toISOString(b):null,w?a.toISOString(w):null])}if(y.extent.spatial.bbox.length>1){let b=y.extent.spatial.bbox.reduce((w,E)=>Array.isArray(E)?Math.max(E.length,w):w,4);if(b>=4){let w=new Array(b).fill(null),E=b/2;for(let A of y.extent.spatial.bbox){if(!Array.isArray(A)||A.length<4)break;for(let T in A){let D=A[T];w[T]===null?w[T]=D:T<E?w[T]=Math.min(D,w[T]):w[T]=Math.max(D,w[T])}}w.findIndex(A=>A===null)===-1&&y.extent.spatial.bbox.unshift(w)}}}},collectionAssets(y){o.before("1.0.0-rc.1")&&a.removeExtension(y,"collection-assets"),p.migrateAll(y)},itemAsset(y){o.before("1.0.0-beta.2")&&a.rename(y,"item_assets","assets"),p.migrateAll(y,"item_assets")},summaries(y){if(a.ensure(y,"summaries",{}),o.before("0.8.0")&&a.isObject(y.other_properties)){for(let b in y.other_properties){let w=y.other_properties[b];Array.isArray(w.extent)&&w.extent.length===2?y.summaries[b]={minimum:w.extent[0],maximum:w.extent[1]}:Array.isArray(w.values)&&(w.values.filter(E=>Array.isArray(E)).length===w.values.length?y.summaries[b]=w.values.reduce((E,A)=>E.concat(A),[]):y.summaries[b]=w.values)}delete y.other_properties}if(o.before("1.0.0-beta.1")&&a.isObject(y.properties)&&!y.links.find(b=>["child","item"].includes(b.rel)))for(let b in y.properties){let w=y.properties[b];Array.isArray(w)||(w=[w]),y.summaries[b]=w}o.before("1.0.0-rc.1")&&a.mapObject(y.summaries,b=>(a.rename(b,"min","minimum"),a.rename(b,"max","maximum"),b)),g.migrate(y.summaries,y,!0),a.moveTo(y.summaries,"sci:doi",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:publications",y,!0,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:citation",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"cube:dimensions",y,!0)&&a.addExtension(y,r.datacube),Object.keys(y.summaries).length===0&&delete y.summaries}},c={migrate(y,b=null,w=!0){o.set(y),w&&(y.stac_version=t),a.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"type","Feature"),a.isObject(y.geometry)||(y.geometry=null),y.geometry!==null&&a.ensure(y,"bbox",[]),a.ensure(y,"properties",{}),a.ensure(y,"links",[]),a.ensure(y,"assets",{});let E=!1;return a.isObject(b)&&a.isObject(b.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),y.properties=Object.assign({},b.properties,y.properties),E=!0),a.runAll(c,y,y),g.migrate(y.properties,y),p.migrateAll(y),(o.before("0.8.0")||E)&&a.populateExtensions(y,"item"),y}},d={migrate(y,b=!0){return a.ensure(y,"collections",[]),a.ensure(y,"links",[]),a.runAll(d,y,y),y.collections=y.collections.map(w=>f.migrate(w,b)),y}},h={migrate(y,b=!0){return a.ensure(y,"type","FeatureCollection"),a.ensure(y,"features",[]),a.ensure(y,"links",[]),a.runAll(h,y,y),y.features=y.features.map(w=>c.migrate(w,null,b)),y}},p={migrateAll(y,b="assets"){for(let w in y[b])p.migrate(y[b][w],y)},migrate(y,b){return a.runAll(p,y,b),g.migrate(y,b),y},mediaTypes(y){a.is(y.type,"string")&&a.mapValues(y,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])},eo(y,b){let w=a.isObject(b.properties)&&Array.isArray(b.properties["eo:bands"])?b.properties["eo:bands"]:[];if(Array.isArray(y["eo:bands"]))for(let E in y["eo:bands"]){let A=y["eo:bands"][E];a.is(A,"number")&&a.isObject(w[A])?A=w[A]:a.isObject(A)||(A={}),y["eo:bands"][E]=A}}},g={migrate(y,b,w=!1){return a.runAll(g,y,b,w),y},_commonMetadata(y){o.before("1.0.0-rc.3")&&(a.toUTC(y,"created"),a.toUTC(y,"updated"))},_timestamps(y,b){a.toUTC(y,"published"),a.toUTC(y,"expires"),a.toUTC(y,"unpublished"),a.upgradeExtension(b,r.timestamps)},_versioningIndicator(y,b){a.upgradeExtension(b,r.version)},checksum(y,b){o.before("0.9.0")&&l.multihash&&(a.rename(y,"checksum:md5","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","md5"),a.rename(y,"checksum:sha1","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha1"),a.rename(y,"checksum:sha2","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha2-256"),a.rename(y,"checksum:sha3","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha3-256")),o.before("1.0.0-rc.1")&&a.rename(y,"checksum:multihash","file:checksum")&&a.addExtension(b,r.file),a.removeExtension(b,"checksum")},classification(y,b){o.before("1.1.0","classification")&&a.forAll(y,"classification:classes",w=>a.rename(w,"color-hint","color_hint")),a.upgradeExtension(b,r.classification)},cube(y,b){a.upgradeExtension(b,r.datacube)},dtr(y,b){o.before("0.9.0")&&(a.rename(y,"dtr:start_datetime","start_datetime"),a.rename(y,"dtr:end_datetime","end_datetime"),a.removeExtension(b,"datetime-range"))},eo(y,b){o.before("0.9.0")&&(a.rename(y,"eo:epsg","proj:epsg")&&a.addExtension(b,r.projection),a.rename(y,"eo:platform","platform"),a.rename(y,"eo:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"eo:constellation","constellation"),a.rename(y,"eo:off_nadir","view:off_nadir")&&a.addExtension(b,r.view),a.rename(y,"eo:azimuth","view:azimuth")&&a.addExtension(b,r.view),a.rename(y,"eo:incidence_angle","view:incidence_angle")&&a.addExtension(b,r.view),a.rename(y,"eo:sun_azimuth","view:sun_azimuth")&&a.addExtension(b,r.view),a.rename(y,"eo:sun_elevation","view:sun_elevation")&&a.addExtension(b,r.view)),o.before("1.0.0-beta.1")&&a.rename(y,"eo:gsd","gsd"),a.upgradeExtension(b,r.eo)},file(y,b){a.upgradeExtension(b,r.file)},label(y,b){o.before("0.8.0")&&(a.rename(y,"label:property","label:properties"),a.rename(y,"label:task","label:tasks"),a.rename(y,"label:overview","label:overviews")&&a.toArray(y,"label:overviews"),a.rename(y,"label:method","label:methods"),a.toArray(y,"label:classes")),a.upgradeExtension(b,r.label)},pc(y,b){o.before("0.8.0")&&a.rename(y,"pc:schema","pc:schemas"),a.upgradeExtension(b,r.pointcloud)},processing(y,b){a.upgradeExtension(b,r.processing)},proj(y,b){a.upgradeExtension(b,r.projection)},raster(y,b){a.upgradeExtension(b,r.raster)},sar(y,b,w){a.rename(y,"sar:incidence_angle","view:incidence_angle")&&a.addExtension(b,r.view),a.rename(y,"sar:pass_direction","sat:orbit_state")&&a.mapValues(y,"sat:orbit_state",[null],["geostationary"])&&a.addExtension(b,r.sat),o.before("0.7.0")&&(a.flattenArray(y,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],w),a.flattenArray(y,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],w),a.flattenArray(y,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],w),a.rename(y,"sar:off_nadir","view:off_nadir")&&a.addExtension(b,r.view)),o.before("0.9.0")&&(a.rename(y,"sar:platform","platform"),a.rename(y,"sar:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"sar:constellation","constellation"),a.rename(y,"sar:type","sar:product_type"),a.rename(y,"sar:polarization","sar:polarizations"),a.flattenOneElementArray(y,"sar:absolute_orbit",w)&&a.rename(y,"sar:absolute_orbit","sat:absolute_orbit")&&a.addExtension(b,r.sat),a.flattenOneElementArray(y,"sar:relative_orbit",w)&&a.rename(y,"sar:relative_orbit","sat:relative_orbit")&&a.addExtension(b,r.sat)),a.upgradeExtension(b,r.sar)},sat(y,b){o.before("0.9.0")&&(a.rename(y,"sat:off_nadir_angle","sat:off_nadir"),a.rename(y,"sat:azimuth_angle","sat:azimuth"),a.rename(y,"sat:sun_azimuth_angle","sat:sun_azimuth"),a.rename(y,"sat:sun_elevation_angle","sat:sun_elevation")),a.upgradeExtension(b,r.sat)},sci(y,b){a.upgradeExtension(b,r.scientific)},item(y){o.before("0.8.0")&&(a.rename(y,"item:license","license"),a.rename(y,"item:providers","providers"))},table(y,b){a.upgradeExtension(b,r.table)},view(y,b){a.upgradeExtension(b,r.view)}},v={item(y,b=null,w=!0){return c.migrate(y,b,w)},catalog(y,b=!0){return u.migrate(y,b)},collection(y,b=!0){return f.migrate(y,b)},collectionCollection(y,b=!0){return d.migrate(y,b)},itemCollection(y,b=!0){return h.migrate(y,b)},stac(y,b=!0){return y.type==="Feature"?v.item(y,null,b):y.type==="FeatureCollection"?v.itemCollection(y,b):y.type==="Collection"||!y.type&&a.isDefined(y.extent)&&a.isDefined(y.license)?v.collection(y,b):!y.type&&Array.isArray(y.collections)?v.collectionCollection(y,b):v.catalog(y,b)},enableMultihash(y){l.multihash=y}};return hM=v,hM}var LRt=DRt();const RRt=sa(LRt);function xb(e){let t=e.length>=6,n=e[0],r=e[t?3:2],i=e[1],s=e[t?4:3],o={west:n,east:r,south:i,north:s};return t&&(o.base=e[2],o.height=e[5]),o}function pM(e){let{west:t,east:n,south:r,north:i}=xb(e);return[[[t,i],[t,r],[n,r],[n,i],[t,i]]]}function FRt(e){if(!Cc(e))return null;let t=xb(e),n=[];if(BPe(e)){let r=(t.west+360+t.east)/2;r>180&&(r-=360),n.push(r)}else n.push((t.west+t.east)/2);return n.push((t.south+t.north)/2),typeof t.base<"u"&&n.push((t.base+t.height)/2),n}function NPe(e){if(Cc(e)?e=[e]:Array.isArray(e)&&(e=e.filter(r=>Cc(r))),!Array.isArray(e)||e.length===0)return null;let t=e.reduce((r,i)=>{if(BPe(i)){let{west:s,east:o,south:a,north:l}=xb(i);r.push(pM([-180,a,o,l])),r.push(pM([s,a,180,l]))}else r.push(pM(i));return r},[]),n=null;if(t.length===1?n={type:"Polygon",coordinates:t[0]}:t.length>1&&(n={type:"MultiPolygon",coordinates:t}),n)return{type:"Feature",geometry:n,properties:{}}}function Cc(e){if(!Array.isArray(e)||![4,6].includes(e.length)||e.some(s=>typeof s!="number"))return!1;let{west:t,east:n,south:r,north:i}=xb(e);return r<=i&&t>=-180&&t<=180&&r>=-90&&n<=180&&n>=-180&&i<=90}function BPe(e){if(!Cc(e))return!1;let{west:t,east:n}=xb(e);return t>n}function zPe(e){if(!Array.isArray(e)||e.length===0)return null;let t={west:180,south:90,east:-180,north:-90};e.forEach(r=>{if(!Cc(r))return;let i=xb(r),s=["west","south"];for(let o in i){let a=s.includes(o)?Math.min:Math.max;t[o]=a(t[o],i[o])}});let n=[t.west,t.south,t.east,t.north];return Cc(n)?n:null}function Cl(e){return typeof e=="string"&&e.length>0}function xl(e){return typeof e=="object"&&e===Object(e)&&!Array.isArray(e)}function jPe(...e){if(e=e.filter(t=>Array.isArray(t)),e.length>1){let t=Math.max(...e.map(r=>r.length)),n=[];for(let r=0;r<t;r++)n.push(Object.assign({},...e.map(i=>i[r])));return n}else if(e.length===1)return e[0];return[]}function ORt(e){switch(e){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return e.startsWith("u")?0:null}function MRt(e){switch(e){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}class RR{constructor(t,n={},r=[]){if(!xl(t))throw new Error("Given data is not an object");if(t instanceof RR){for(let i of r)this[i]=t[i];t=t.toJSON()}this._keyMap=n,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let i in t)typeof this[i]>"u"&&(i in n?this[i]=n[i](t[i],this):this[i]=t[i])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(t){return this[t]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return FRt(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let t={};return Object.keys(this).forEach(n=>{if(typeof this[n]=="function"||this._privateKeys.includes(n))return;let r=this[n];if(n in this._keyMap){let i=Array.isArray(r)?[]:{};for(let s in r)i[s]=r[s].toJSON();r=i}t[n]=r}),t}}var JC={exports:{}},c_={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */var $Rt=c_.exports,KEe;function IRt(){return KEe||(KEe=1,function(e,t){(function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,s=typeof Yi=="object"&&Yi;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,u=1,f=26,c=38,d=700,h=72,p=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-u,A=Math.floor,T=String.fromCharCode,D;function k(te){throw new RangeError(w[te])}function R(te,le){for(var ee=te.length,z=[];ee--;)z[ee]=le(te[ee]);return z}function O(te,le){var ee=te.split("@"),z="";ee.length>1&&(z=ee[0]+"@",te=ee[1]),te=te.replace(b,".");var he=te.split("."),de=R(he,le).join(".");return z+de}function B(te){for(var le=[],ee=0,z=te.length,he,de;ee<z;)he=te.charCodeAt(ee++),he>=55296&&he<=56319&&ee<z?(de=te.charCodeAt(ee++),(de&64512)==56320?le.push(((he&1023)<<10)+(de&1023)+65536):(le.push(he),ee--)):le.push(he);return le}function K(te){return R(te,function(le){var ee="";return le>65535&&(le-=65536,ee+=T(le>>>10&1023|55296),le=56320|le&1023),ee+=T(le),ee}).join("")}function L(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:l}function $(te,le){return te+22+75*(te<26)-((le!=0)<<5)}function I(te,le,ee){var z=0;for(te=ee?A(te/d):te>>1,te+=A(te/le);te>E*f>>1;z+=l)te=A(te/E);return A(z+(E+1)*te/(te+c))}function U(te){var le=[],ee=te.length,z,he=0,de=p,ze=h,He,je,we,Ie,qe,Pe,At,ht,nn;for(He=te.lastIndexOf(g),He<0&&(He=0),je=0;je<He;++je)te.charCodeAt(je)>=128&&k("not-basic"),le.push(te.charCodeAt(je));for(we=He>0?He+1:0;we<ee;){for(Ie=he,qe=1,Pe=l;we>=ee&&k("invalid-input"),At=L(te.charCodeAt(we++)),(At>=l||At>A((a-he)/qe))&&k("overflow"),he+=At*qe,ht=Pe<=ze?u:Pe>=ze+f?f:Pe-ze,!(At<ht);Pe+=l)nn=l-ht,qe>A(a/nn)&&k("overflow"),qe*=nn;z=le.length+1,ze=I(he-Ie,z,Ie==0),A(he/z)>a-de&&k("overflow"),de+=A(he/z),he%=z,le.splice(he++,0,de)}return K(le)}function q(te){var le,ee,z,he,de,ze,He,je,we,Ie,qe,Pe=[],At,ht,nn,Vt;for(te=B(te),At=te.length,le=p,ee=0,de=h,ze=0;ze<At;++ze)qe=te[ze],qe<128&&Pe.push(T(qe));for(z=he=Pe.length,he&&Pe.push(g);z<At;){for(He=a,ze=0;ze<At;++ze)qe=te[ze],qe>=le&&qe<He&&(He=qe);for(ht=z+1,He-le>A((a-ee)/ht)&&k("overflow"),ee+=(He-le)*ht,le=He,ze=0;ze<At;++ze)if(qe=te[ze],qe<le&&++ee>a&&k("overflow"),qe==le){for(je=ee,we=l;Ie=we<=de?u:we>=de+f?f:we-de,!(je<Ie);we+=l)Vt=je-Ie,nn=l-Ie,Pe.push(T($(Ie+Vt%nn,0))),je=A(Vt/nn);Pe.push(T($(je,0))),de=I(ee,ht,z==he),ee=0,++z}++ee,++le}return Pe.join("")}function Y(te){return O(te,function(le){return v.test(le)?U(le.slice(4).toLowerCase()):le})}function X(te){return O(te,function(le){return y.test(le)?"xn--"+q(le):le})}if(o={version:"1.3.2",ucs2:{decode:B,encode:K},decode:U,encode:q,toASCII:X,toUnicode:Y},r&&i)if(e.exports==r)i.exports=o;else for(D in o)o.hasOwnProperty(D)&&(r[D]=o[D]);else n.punycode=o})($Rt)}(c_,c_.exports)),c_.exports}var QC={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var PRt=QC.exports,JEe;function NRt(){return JEe||(JEe=1,function(e){(function(t,n){e.exports?e.exports=n():t.IPv6=n(t)})(PRt,function(t){var n=t&&t.IPv6;function r(s){var o=s.toLowerCase(),a=o.split(":"),l=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(u=7);var f;for(f=0;f<l&&a[f]!=="";f++);if(f<u)for(a.splice(f,1,"0000");a.length<u;)a.splice(f,0,"0000");for(var c,d=0;d<u;d++){c=a[d].split("");for(var h=0;h<3&&(c[0]==="0"&&c.length>1);h++)c.splice(0,1);a[d]=c.join("")}var p=-1,g=0,v=0,y=-1,b=!1;for(d=0;d<u;d++)b?a[d]==="0"?v+=1:(b=!1,v>g&&(p=y,g=v)):a[d]==="0"&&(b=!0,y=d,v=1);v>g&&(p=y,g=v),g>1&&a.splice(p,g,""),l=a.length;var w="";for(a[0]===""&&(w=":"),d=0;d<l&&(w+=a[d],d!==l-1);d++)w+=":";return a[l-1]===""&&(w+=":"),w}function i(){return t.IPv6===this&&(t.IPv6=n),this}return{best:r,noConflict:i}})}(QC)),QC.exports}var e3={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var BRt=e3.exports,QEe;function zRt(){return QEe||(QEe=1,function(e){(function(t,n){e.exports?e.exports=n():t.SecondLevelDomains=n(t)})(BRt,function(t){var n=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return!1;var o=i.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return!1;var a=r.list[i.slice(s+1)];return a?a.indexOf(" "+i.slice(o+1,s)+" ")>=0:!1},is:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return!1;var o=i.lastIndexOf(".",s-1);if(o>=0)return!1;var a=r.list[i.slice(s+1)];return a?a.indexOf(" "+i.slice(0,s)+" ")>=0:!1},get:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return null;var o=i.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return null;var a=r.list[i.slice(s+1)];return!a||a.indexOf(" "+i.slice(o+1,s)+" ")<0?null:i.slice(o+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=n),this}};return r})}(e3)),e3.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var jRt=JC.exports,eSe;function URt(){return eSe||(eSe=1,function(e){(function(t,n){e.exports?e.exports=n(IRt(),NRt(),zRt()):t.URI=n(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(jRt,function(t,n,r,i){var s=i&&i.URI;function o(L,$){var I=arguments.length>=1,U=arguments.length>=2;if(!(this instanceof o))return I?U?new o(L,$):new o(L):new o;if(L===void 0){if(I)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?L=location.href+"":L=""}if(L===null&&I)throw new TypeError("null is not a valid argument for URI");return this.href(L),$!==void 0?this.absoluteTo($):this}function a(L){return/^[0-9]+$/.test(L)}o.version="1.19.11";var l=o.prototype,u=Object.prototype.hasOwnProperty;function f(L){return L.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(L){return L===void 0?"Undefined":String(Object.prototype.toString.call(L)).slice(8,-1)}function d(L){return c(L)==="Array"}function h(L,$){var I={},U,q;if(c($)==="RegExp")I=null;else if(d($))for(U=0,q=$.length;U<q;U++)I[$[U]]=!0;else I[$]=!0;for(U=0,q=L.length;U<q;U++){var Y=I&&I[L[U]]!==void 0||!I&&$.test(L[U]);Y&&(L.splice(U,1),q--,U--)}return L}function p(L,$){var I,U;if(d($)){for(I=0,U=$.length;I<U;I++)if(!p(L,$[I]))return!1;return!0}var q=c($);for(I=0,U=L.length;I<U;I++)if(q==="RegExp"){if(typeof L[I]=="string"&&L[I].match($))return!0}else if(L[I]===$)return!0;return!1}function g(L,$){if(!d(L)||!d($)||L.length!==$.length)return!1;L.sort(),$.sort();for(var I=0,U=L.length;I<U;I++)if(L[I]!==$[I])return!1;return!0}function v(L){var $=/^\/+|\/+$/g;return L.replace($,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(L){if(!(!L||!L.nodeName)){var $=L.nodeName.toLowerCase();if(!($==="input"&&L.type!=="image"))return o.domAttributes[$]}};function y(L){return escape(L)}function b(L){return encodeURIComponent(L).replace(/[!'()*]/g,y).replace(/\*/g,"%2A")}o.encode=b,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=b,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(L,$){var I=o.encode(L+"");return $===void 0&&($=o.escapeQuerySpace),$?I.replace(/%20/g,"+"):I},o.decodeQuery=function(L,$){L+="",$===void 0&&($=o.escapeQuerySpace);try{return o.decode($?L.replace(/\+/g,"%20"):L)}catch{return L}};var w={encode:"encode",decode:"decode"},E,A=function(L,$){return function(I){try{return o[$](I+"").replace(o.characters[L][$].expression,function(U){return o.characters[L][$].map[U]})}catch{return I}}};for(E in w)o[E+"PathSegment"]=A("pathname",w[E]),o[E+"UrnPathSegment"]=A("urnpath",w[E]);var T=function(L,$,I){return function(U){var q;I?q=function(le){return o[$](o[I](le))}:q=o[$];for(var Y=(U+"").split(L),X=0,te=Y.length;X<te;X++)Y[X]=q(Y[X]);return Y.join(L)}};o.decodePath=T("/","decodePathSegment"),o.decodeUrnPath=T(":","decodeUrnPathSegment"),o.recodePath=T("/","encodePathSegment","decode"),o.recodeUrnPath=T(":","encodeUrnPathSegment","decode"),o.encodeReserved=A("reserved","encode"),o.parse=function(L,$){var I;return $||($={preventInvalidHostname:o.preventInvalidHostname}),L=L.replace(o.leading_whitespace_expression,""),L=L.replace(o.ascii_tab_whitespace,""),I=L.indexOf("#"),I>-1&&($.fragment=L.substring(I+1)||null,L=L.substring(0,I)),I=L.indexOf("?"),I>-1&&($.query=L.substring(I+1)||null,L=L.substring(0,I)),L=L.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),L=L.replace(/^[/\\]{2,}/i,"//"),L.substring(0,2)==="//"?($.protocol=null,L=L.substring(2),L=o.parseAuthority(L,$)):(I=L.indexOf(":"),I>-1&&($.protocol=L.substring(0,I)||null,$.protocol&&!$.protocol.match(o.protocol_expression)?$.protocol=void 0:L.substring(I+1,I+3).replace(/\\/g,"/")==="//"?(L=L.substring(I+3),L=o.parseAuthority(L,$)):(L=L.substring(I+1),$.urn=!0))),$.path=L,$},o.parseHost=function(L,$){L||(L=""),L=L.replace(/\\/g,"/");var I=L.indexOf("/"),U,q;if(I===-1&&(I=L.length),L.charAt(0)==="[")U=L.indexOf("]"),$.hostname=L.substring(1,U)||null,$.port=L.substring(U+2,I)||null,$.port==="/"&&($.port=null);else{var Y=L.indexOf(":"),X=L.indexOf("/"),te=L.indexOf(":",Y+1);te!==-1&&(X===-1||te<X)?($.hostname=L.substring(0,I)||null,$.port=null):(q=L.substring(0,I).split(":"),$.hostname=q[0]||null,$.port=q[1]||null)}return $.hostname&&L.substring(I).charAt(0)!=="/"&&(I++,L="/"+L),$.preventInvalidHostname&&o.ensureValidHostname($.hostname,$.protocol),$.port&&o.ensureValidPort($.port),L.substring(I)||"/"},o.parseAuthority=function(L,$){return L=o.parseUserinfo(L,$),o.parseHost(L,$)},o.parseUserinfo=function(L,$){var I=L,U=L.indexOf("\\");U!==-1&&(L=L.replace(/\\/g,"/"));var q=L.indexOf("/"),Y=L.lastIndexOf("@",q>-1?q:L.length-1),X;return Y>-1&&(q===-1||Y<q)?(X=L.substring(0,Y).split(":"),$.username=X[0]?o.decode(X[0]):null,X.shift(),$.password=X[0]?o.decode(X.join(":")):null,L=I.substring(Y+1)):($.username=null,$.password=null),L},o.parseQuery=function(L,$){if(!L)return{};if(L=L.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!L)return{};for(var I={},U=L.split("&"),q=U.length,Y,X,te,le=0;le<q;le++)Y=U[le].split("="),X=o.decodeQuery(Y.shift(),$),te=Y.length?o.decodeQuery(Y.join("="),$):null,X!=="__proto__"&&(u.call(I,X)?((typeof I[X]=="string"||I[X]===null)&&(I[X]=[I[X]]),I[X].push(te)):I[X]=te);return I},o.build=function(L){var $="",I=!1;return L.protocol&&($+=L.protocol+":"),!L.urn&&($||L.hostname)&&($+="//",I=!0),$+=o.buildAuthority(L)||"",typeof L.path=="string"&&(L.path.charAt(0)!=="/"&&I&&($+="/"),$+=L.path),typeof L.query=="string"&&L.query&&($+="?"+L.query),typeof L.fragment=="string"&&L.fragment&&($+="#"+L.fragment),$},o.buildHost=function(L){var $="";if(L.hostname)o.ip6_expression.test(L.hostname)?$+="["+L.hostname+"]":$+=L.hostname;else return"";return L.port&&($+=":"+L.port),$},o.buildAuthority=function(L){return o.buildUserinfo(L)+o.buildHost(L)},o.buildUserinfo=function(L){var $="";return L.username&&($+=o.encode(L.username)),L.password&&($+=":"+o.encode(L.password)),$&&($+="@"),$},o.buildQuery=function(L,$,I){var U="",q,Y,X,te;for(Y in L)if(Y!=="__proto__"&&u.call(L,Y))if(d(L[Y]))for(q={},X=0,te=L[Y].length;X<te;X++)L[Y][X]!==void 0&&q[L[Y][X]+""]===void 0&&(U+="&"+o.buildQueryParameter(Y,L[Y][X],I),$!==!0&&(q[L[Y][X]+""]=!0));else L[Y]!==void 0&&(U+="&"+o.buildQueryParameter(Y,L[Y],I));return U.substring(1)},o.buildQueryParameter=function(L,$,I){return o.encodeQuery(L,I)+($!==null?"="+o.encodeQuery($,I):"")},o.addQuery=function(L,$,I){if(typeof $=="object")for(var U in $)u.call($,U)&&o.addQuery(L,U,$[U]);else if(typeof $=="string"){if(L[$]===void 0){L[$]=I;return}else typeof L[$]=="string"&&(L[$]=[L[$]]);d(I)||(I=[I]),L[$]=(L[$]||[]).concat(I)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(L,$,I){if(typeof $=="object")for(var U in $)u.call($,U)&&o.setQuery(L,U,$[U]);else if(typeof $=="string")L[$]=I===void 0?null:I;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(L,$,I){var U,q,Y;if(d($))for(U=0,q=$.length;U<q;U++)L[$[U]]=void 0;else if(c($)==="RegExp")for(Y in L)$.test(Y)&&(L[Y]=void 0);else if(typeof $=="object")for(Y in $)u.call($,Y)&&o.removeQuery(L,Y,$[Y]);else if(typeof $=="string")I!==void 0?c(I)==="RegExp"?!d(L[$])&&I.test(L[$])?L[$]=void 0:L[$]=h(L[$],I):L[$]===String(I)&&(!d(I)||I.length===1)?L[$]=void 0:d(L[$])&&(L[$]=h(L[$],I)):L[$]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(L,$,I,U){switch(c($)){case"String":break;case"RegExp":for(var q in L)if(u.call(L,q)&&$.test(q)&&(I===void 0||o.hasQuery(L,q,I)))return!0;return!1;case"Object":for(var Y in $)if(u.call($,Y)&&!o.hasQuery(L,Y,$[Y]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(I)){case"Undefined":return $ in L;case"Boolean":var X=!!(d(L[$])?L[$].length:L[$]);return I===X;case"Function":return!!I(L[$],$,L);case"Array":if(!d(L[$]))return!1;var te=U?p:g;return te(L[$],I);case"RegExp":return d(L[$])?U?p(L[$],I):!1:!!(L[$]&&L[$].match(I));case"Number":I=String(I);case"String":return d(L[$])?U?p(L[$],I):!1:L[$]===I;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var L=[],$=[],I=0,U=0;U<arguments.length;U++){var q=new o(arguments[U]);L.push(q);for(var Y=q.segment(),X=0;X<Y.length;X++)typeof Y[X]=="string"&&$.push(Y[X]),Y[X]&&I++}if(!$.length||!I)return new o("");var te=new o("").segment($);return(L[0].path()===""||L[0].path().slice(0,1)==="/")&&te.path("/"+te.path()),te.normalize()},o.commonPath=function(L,$){var I=Math.min(L.length,$.length),U;for(U=0;U<I;U++)if(L.charAt(U)!==$.charAt(U)){U--;break}return U<1?L.charAt(0)===$.charAt(0)&&L.charAt(0)==="/"?"/":"":((L.charAt(U)!=="/"||$.charAt(U)!=="/")&&(U=L.substring(0,U).lastIndexOf("/")),L.substring(0,U+1))},o.withinString=function(L,$,I){I||(I={});var U=I.start||o.findUri.start,q=I.end||o.findUri.end,Y=I.trim||o.findUri.trim,X=I.parens||o.findUri.parens,te=/[a-z0-9-]=["']?$/i;for(U.lastIndex=0;;){var le=U.exec(L);if(!le)break;var ee=le.index;if(I.ignoreHtml){var z=L.slice(Math.max(ee-3,0),ee);if(z&&te.test(z))continue}for(var he=ee+L.slice(ee).search(q),de=L.slice(ee,he),ze=-1;;){var He=X.exec(de);if(!He)break;var je=He.index+He[0].length;ze=Math.max(ze,je)}if(ze>-1?de=de.slice(0,ze)+de.slice(ze).replace(Y,""):de=de.replace(Y,""),!(de.length<=le[0].length)&&!(I.ignore&&I.ignore.test(de))){he=ee+de.length;var we=$(de,ee,he,L);if(we===void 0){U.lastIndex=he;continue}we=String(we),L=L.slice(0,ee)+we+L.slice(he),U.lastIndex=ee+we.length}}return U.lastIndex=0,L},o.ensureValidHostname=function(L,$){var I=!!L,U=!!$,q=!1;if(U&&(q=p(o.hostProtocols,$)),q&&!I)throw new TypeError("Hostname cannot be empty, if protocol is "+$);if(L&&L.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(L).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(L){if(L){var $=Number(L);if(!(a($)&&$>0&&$<65536))throw new TypeError('Port "'+L+'" is not a valid port')}},o.noConflict=function(L){if(L){var $={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&($.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&($.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&($.SecondLevelDomains=i.SecondLevelDomains.noConflict()),$}else i.URI===this&&(i.URI=s);return this},l.build=function(L){return L===!0?this._deferred_build=!0:(L===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new o(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function D(L){return function($,I){return $===void 0?this._parts[L]||"":(this._parts[L]=$||null,this.build(!I),this)}}function k(L,$){return function(I,U){return I===void 0?this._parts[L]||"":(I!==null&&(I=I+"",I.charAt(0)===$&&(I=I.substring(1))),this._parts[L]=I,this.build(!U),this)}}l.protocol=D("protocol"),l.username=D("username"),l.password=D("password"),l.hostname=D("hostname"),l.port=D("port"),l.query=k("query","?"),l.fragment=k("fragment","#"),l.search=function(L,$){var I=this.query(L,$);return typeof I=="string"&&I.length?"?"+I:I},l.hash=function(L,$){var I=this.fragment(L,$);return typeof I=="string"&&I.length?"#"+I:I},l.pathname=function(L,$){if(L===void 0||L===!0){var I=this._parts.path||(this._parts.hostname?"/":"");return L?(this._parts.urn?o.decodeUrnPath:o.decodePath)(I):I}else return this._parts.urn?this._parts.path=L?o.recodeUrnPath(L):"":this._parts.path=L?o.recodePath(L):"/",this.build(!$),this},l.path=l.pathname,l.href=function(L,$){var I;if(L===void 0)return this.toString();this._string="",this._parts=o._parts();var U=L instanceof o,q=typeof L=="object"&&(L.hostname||L.path||L.pathname);if(L.nodeName){var Y=o.getDomAttribute(L);L=L[Y]||"",q=!1}if(!U&&q&&L.pathname!==void 0&&(L=L.toString()),typeof L=="string"||L instanceof String)this._parts=o.parse(String(L),this._parts);else if(U||q){var X=U?L._parts:L;for(I in X)I!=="query"&&u.call(this._parts,I)&&(this._parts[I]=X[I]);X.query&&this.query(X.query,!1)}else throw new TypeError("invalid input");return this.build(!$),this},l.is=function(L){var $=!1,I=!1,U=!1,q=!1,Y=!1,X=!1,te=!1,le=!this._parts.urn;switch(this._parts.hostname&&(le=!1,I=o.ip4_expression.test(this._parts.hostname),U=o.ip6_expression.test(this._parts.hostname),$=I||U,q=!$,Y=q&&r&&r.has(this._parts.hostname),X=q&&o.idn_expression.test(this._parts.hostname),te=q&&o.punycode_expression.test(this._parts.hostname)),L.toLowerCase()){case"relative":return le;case"absolute":return!le;case"domain":case"name":return q;case"sld":return Y;case"ip":return $;case"ip4":case"ipv4":case"inet4":return I;case"ip6":case"ipv6":case"inet6":return U;case"idn":return X;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return te}return null};var R=l.protocol,O=l.port,B=l.hostname;l.protocol=function(L,$){if(L&&(L=L.replace(/:(\/\/)?$/,""),!L.match(o.protocol_expression)))throw new TypeError('Protocol "'+L+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return R.call(this,L,$)},l.scheme=l.protocol,l.port=function(L,$){return this._parts.urn?L===void 0?"":this:(L!==void 0&&(L===0&&(L=null),L&&(L+="",L.charAt(0)===":"&&(L=L.substring(1)),o.ensureValidPort(L))),O.call(this,L,$))},l.hostname=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L!==void 0){var I={preventInvalidHostname:this._parts.preventInvalidHostname},U=o.parseHost(L,I);if(U!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');L=I.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(L,this._parts.protocol)}return B.call(this,L,$)},l.origin=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var I=this.protocol(),U=this.authority();return U?(I?I+"://":"")+this.authority():""}else{var q=o(L);return this.protocol(q.protocol()).authority(q.authority()).build(!$),this}},l.host=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var I=o.parseHost(L,this._parts);if(I!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},l.authority=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var I=o.parseAuthority(L,this._parts);if(I!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},l.userinfo=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var I=o.buildUserinfo(this._parts);return I&&I.substring(0,I.length-1)}else return L[L.length-1]!=="@"&&(L+="@"),o.parseUserinfo(L,this._parts),this.build(!$),this},l.resource=function(L,$){var I;return L===void 0?this.path()+this.search()+this.hash():(I=o.parse(L),this._parts.path=I.path,this._parts.query=I.query,this._parts.fragment=I.fragment,this.build(!$),this)},l.subdomain=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,I)||""}else{var U=this._parts.hostname.length-this.domain().length,q=this._parts.hostname.substring(0,U),Y=new RegExp("^"+f(q));if(L&&L.charAt(L.length-1)!=="."&&(L+="."),L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return L&&o.ensureValidHostname(L,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(Y,L),this.build(!$),this}},l.domain=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&($=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.match(/\./g);if(I&&I.length<2)return this._parts.hostname;var U=this._parts.hostname.length-this.tld($).length-1;return U=this._parts.hostname.lastIndexOf(".",U-1)+1,this._parts.hostname.substring(U)||""}else{if(!L)throw new TypeError("cannot set domain empty");if(L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(L,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=L;else{var q=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(q,L)}return this.build(!$),this}},l.tld=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&($=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.lastIndexOf("."),U=this._parts.hostname.substring(I+1);return $!==!0&&r&&r.list[U.toLowerCase()]&&r.get(this._parts.hostname)||U}else{var q;if(L)if(L.match(/[^a-zA-Z0-9-]/))if(r&&r.is(L))q=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L);else throw new TypeError('TLD "'+L+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");q=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L)}else throw new TypeError("cannot set TLD empty");return this.build(!$),this}},l.directory=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var I=this._parts.path.length-this.filename().length-1,U=this._parts.path.substring(0,I)||(this._parts.hostname?"/":"");return L?o.decodePath(U):U}else{var q=this._parts.path.length-this.filename().length,Y=this._parts.path.substring(0,q),X=new RegExp("^"+f(Y));return this.is("relative")||(L||(L="/"),L.charAt(0)!=="/"&&(L="/"+L)),L&&L.charAt(L.length-1)!=="/"&&(L+="/"),L=o.recodePath(L),this._parts.path=this._parts.path.replace(X,L),this.build(!$),this}},l.filename=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L!="string"){if(!this._parts.path||this._parts.path==="/")return"";var I=this._parts.path.lastIndexOf("/"),U=this._parts.path.substring(I+1);return L?o.decodePathSegment(U):U}else{var q=!1;L.charAt(0)==="/"&&(L=L.substring(1)),L.match(/\.?\//)&&(q=!0);var Y=new RegExp(f(this.filename())+"$");return L=o.recodePath(L),this._parts.path=this._parts.path.replace(Y,L),q?this.normalizePath($):this.build(!$),this}},l.suffix=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path||this._parts.path==="/")return"";var I=this.filename(),U=I.lastIndexOf("."),q,Y;return U===-1?"":(q=I.substring(U+1),Y=/^[a-z0-9%]+$/i.test(q)?q:"",L?o.decodePathSegment(Y):Y)}else{L.charAt(0)==="."&&(L=L.substring(1));var X=this.suffix(),te;if(X)L?te=new RegExp(f(X)+"$"):te=new RegExp(f("."+X)+"$");else{if(!L)return this;this._parts.path+="."+o.recodePath(L)}return te&&(L=o.recodePath(L),this._parts.path=this._parts.path.replace(te,L)),this.build(!$),this}},l.segment=function(L,$,I){var U=this._parts.urn?":":"/",q=this.path(),Y=q.substring(0,1)==="/",X=q.split(U);if(L!==void 0&&typeof L!="number"&&(I=$,$=L,L=void 0),L!==void 0&&typeof L!="number")throw new Error('Bad segment "'+L+'", must be 0-based integer');if(Y&&X.shift(),L<0&&(L=Math.max(X.length+L,0)),$===void 0)return L===void 0?X:X[L];if(L===null||X[L]===void 0)if(d($)){X=[];for(var te=0,le=$.length;te<le;te++)!$[te].length&&(!X.length||!X[X.length-1].length)||(X.length&&!X[X.length-1].length&&X.pop(),X.push(v($[te])))}else($||typeof $=="string")&&($=v($),X[X.length-1]===""?X[X.length-1]=$:X.push($));else $?X[L]=v($):X.splice(L,1);return Y&&X.unshift(""),this.path(X.join(U),I)},l.segmentCoded=function(L,$,I){var U,q,Y;if(typeof L!="number"&&(I=$,$=L,L=void 0),$===void 0){if(U=this.segment(L,$,I),!d(U))U=U!==void 0?o.decode(U):void 0;else for(q=0,Y=U.length;q<Y;q++)U[q]=o.decode(U[q]);return U}if(!d($))$=typeof $=="string"||$ instanceof String?o.encode($):$;else for(q=0,Y=$.length;q<Y;q++)$[q]=o.encode($[q]);return this.segment(L,$,I)};var K=l.query;return l.query=function(L,$){if(L===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="function"){var I=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),U=L.call(this,I);return this._parts.query=o.buildQuery(U||I,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this}else return L!==void 0&&typeof L!="string"?(this._parts.query=o.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this):K.call(this,L,$)},l.setQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="string"||L instanceof String)U[L]=$!==void 0?$:null;else if(typeof L=="object")for(var q in L)u.call(L,q)&&(U[q]=L[q]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.addQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(U,L,$===void 0?null:$),this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.removeQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(U,L,$),this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.hasQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(U,L,$,I)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(L){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!L)),this},l.normalizeHostname=function(L){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&n&&(this._parts.hostname=n.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!L)),this},l.normalizePort=function(L){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!L)),this},l.normalizePath=function(L){var $=this._parts.path;if(!$)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!L),this;if(this._parts.path==="/")return this;$=o.recodePath($);var I,U="",q,Y;for($.charAt(0)!=="/"&&(I=!0,$="/"+$),($.slice(-3)==="/.."||$.slice(-2)==="/.")&&($+="/"),$=$.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),I&&(U=$.substring(1).match(/^(\.\.\/)+/)||"",U&&(U=U[0]));q=$.search(/\/\.\.(\/|$)/),q!==-1;){if(q===0){$=$.substring(3);continue}Y=$.substring(0,q).lastIndexOf("/"),Y===-1&&(Y=q),$=$.substring(0,Y)+$.substring(q+3)}return I&&this.is("relative")&&($=U+$.substring(1)),this._parts.path=$,this.build(!L),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(L){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!L)),this},l.normalizeFragment=function(L){return this._parts.fragment||(this._parts.fragment=null,this.build(!L)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var L=o.encode,$=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=L,o.decode=$}return this},l.unicode=function(){var L=o.encode,$=o.decode;o.encode=b,o.decode=unescape;try{this.normalize()}finally{o.encode=L,o.decode=$}return this},l.readable=function(){var L=this.clone();L.username("").password("").normalize();var $="";if(L._parts.protocol&&($+=L._parts.protocol+"://"),L._parts.hostname&&(L.is("punycode")&&t?($+=t.toUnicode(L._parts.hostname),L._parts.port&&($+=":"+L._parts.port)):$+=L.host()),L._parts.hostname&&L._parts.path&&L._parts.path.charAt(0)!=="/"&&($+="/"),$+=L.path(!0),L._parts.query){for(var I="",U=0,q=L._parts.query.split("&"),Y=q.length;U<Y;U++){var X=(q[U]||"").split("=");I+="&"+o.decodeQuery(X[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),X[1]!==void 0&&(I+="="+o.decodeQuery(X[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}$+="?"+I.substring(1)}return $+=o.decodeQuery(L.hash(),!0),$},l.absoluteTo=function(L){var $=this.clone(),I=["protocol","username","password","hostname","port"],U,q,Y;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L instanceof o||(L=new o(L)),$._parts.protocol||($._parts.protocol=L._parts.protocol,this._parts.hostname))return $;for(q=0;Y=I[q];q++)$._parts[Y]=L._parts[Y];return $._parts.path?($._parts.path.substring(-2)===".."&&($._parts.path+="/"),$.path().charAt(0)!=="/"&&(U=L.directory(),U=U||(L.path().indexOf("/")===0?"/":""),$._parts.path=(U?U+"/":"")+$._parts.path,$.normalizePath())):($._parts.path=L._parts.path,$._parts.query||($._parts.query=L._parts.query)),$.build(),$},l.relativeTo=function(L){var $=this.clone().normalize(),I,U,q,Y,X;if($._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L=new o(L).normalize(),I=$._parts,U=L._parts,Y=$.path(),X=L.path(),Y.charAt(0)!=="/")throw new Error("URI is already relative");if(X.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(I.protocol===U.protocol&&(I.protocol=null),I.username!==U.username||I.password!==U.password||I.protocol!==null||I.username!==null||I.password!==null)return $.build();if(I.hostname===U.hostname&&I.port===U.port)I.hostname=null,I.port=null;else return $.build();if(Y===X)return I.path="",$.build();if(q=o.commonPath(Y,X),!q)return $.build();var te=U.path.substring(q.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return I.path=te+I.path.substring(q.length)||"./",$.build()},l.equals=function(L){var $=this.clone(),I=new o(L),U={},q={},Y={},X,te,le;if($.normalize(),I.normalize(),$.toString()===I.toString())return!0;if(X=$.query(),te=I.query(),$.query(""),I.query(""),$.toString()!==I.toString()||X.length!==te.length)return!1;U=o.parseQuery(X,this._parts.escapeQuerySpace),q=o.parseQuery(te,this._parts.escapeQuerySpace);for(le in U)if(u.call(U,le)){if(d(U[le])){if(!g(U[le],q[le]))return!1}else if(U[le]!==q[le])return!1;Y[le]=!0}for(le in q)if(u.call(q,le)&&!Y[le])return!1;return!0},l.preventInvalidHostname=function(L){return this._parts.preventInvalidHostname=!!L,this},l.duplicateQueryParameters=function(L){return this._parts.duplicateQueryParameters=!!L,this},l.escapeQuerySpace=function(L){return this._parts.escapeQuerySpace=!!L,this},o})}(JC)),JC.exports}var qRt=URt();const j$=sa(qRt),tSe=["http","https"];function HRt(e){return typeof e=="string"&&e.startsWith("/vsi")&&!e.startsWith("/vsicurl/")}function GRt(e,t,n=!0){return VRt(e,t,!1,n)}function VRt(e,t=null,n=!1,r=!0){typeof e=="string"&&e.startsWith("/vsicurl/")&&(e=e.replace(/^\/vsicurl\//,""));let i=j$(e);if(t&&i.is("relative")&&!HRt(e)){let s=j$(t),o=s.path();!o.endsWith("/")&&!o.endsWith(".json")&&s.path(o+"/"),i=i.absoluteTo(s)}return i.normalize(),n&&(i.query(""),i.fragment("")),r?i.toString():i}const WRt="application/geo+json",YRt=["application/json",WRt,"text/json"],nSe=["image/gif","image/jpeg","image/apng","image/png","image/webp"],UPe=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],qPe=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(UPe);function BB(e,t,n=!1){return Array.isArray(t)||(t=[t]),n&&typeof e>"u"?!0:typeof e!="string"?!1:(t=t.map(r=>r.toLowerCase()),t.includes(e.toLowerCase()))}function XRt(e,t=!1){return BB(e,YRt,t)}class HPe extends RR{constructor(t,n=null,r={},i=[]){super(t,r,["_context"].concat(i)),this._context||(this._context=n)}getAbsoluteUrl(t=!0){return this._context?GRt(this.href,this._context.getAbsoluteUrl(),t):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(t=!1){if(typeof this.href!="string")return!1;if(!t&&typeof this.type>"u")return!1;let n=new j$(this.href),r=n.protocol().toLowerCase(),i=n.suffix().toLowerCase();return Cl(r)&&!tSe.includes(r)?!1:Cl(this.type)&&nSe.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&Cl(i)&&(i==="jpg"||nSe.includes("image/"+i)))}isType(t){return Cl(this.type)&&BB(this.type,t)}isGeoTIFF(){return this.isType(qPe)}isCOG(){return this.isType(UPe)}isHTTP(){let n=this.getAbsoluteUrl(!1).protocol().toLowerCase();return Cl(n)&&tSe.includes(n)}}class zB extends HPe{constructor(t,n=null){super(t,n)}isLink(){return!0}getObjectType(){return"Link"}static fromLinks(t,n=null){return Array.isArray(t)?t.map(r=>xl(r)?new zB(r,n):r):[]}}class GPe extends RR{constructor(t,n=null,r={},i=[]){if(super(t,Object.assign({links:zB.fromLinks},r),["_url"].concat(i)),!this._url&&(this._url=n,!this._url)){let s=this.getSelfLink();s&&(this._url=s.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(t){this._url=t}getStacLinksWithRel(t,n=!0){return this.getLinksWithRels([t]).filter(r=>XRt(r.type,n))}getStacLinkWithRel(t,n=!0){const r=this.getStacLinksWithRel(t,n);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(t=>xl(t)&&Cl(t.href)):[]}getLinkWithRel(t){return this.getLinks().find(n=>n.rel===t)||null}getLinksWithRels(t){return this.getLinks().filter(n=>t.includes(n.rel))}getLinksWithOtherRels(t){return this.getLinks().filter(n=>!t.includes(n.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class VPe extends GPe{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getAll(){return[]}}class Pp extends HPe{constructor(t,n=null,r=null){super(t,r,{},["_key"]),this._key||(this._key=n)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(t=!0){return this.isDefinition()?null:super.getAbsoluteUrl(t)}getKey(){return this._key}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context)return this._context.getMetadata(t)}getBands(){return jPe(this["eo:bands"],this["raster:bands"])}findVisualBands(){let t={red:null,green:null,blue:null},n=this.getBands();for(let i in n){let s=parseInt(i,10),o=n[s];xl(o)&&Cl(o.common_name)&&o.common_name in t&&(t[o.common_name]={index:s,band:o})}return Object.values(t).every(i=>i!==null)?t:null}findBand(t,n="name",r=null){Array.isArray(t)||(t=[t]),xl(r)||(r=this.getBands());let i=r.findIndex(s=>xl(s)&&t.includes(s[n]));return i>=0?{index:i,band:r[i]}:null}getBand(t){return xl(t)||t===null?t:this.getBands()[t]||null}getMinMaxValues(t=null){t=this.getBand(t);const n={minimum:null,maximum:null},r=a=>a.minimum!==null&&a.maximum!==null;if(t&&(xl(t.statistics)&&(typeof t.statistics.minimum=="number"&&(n.minimum=t.statistics.minimum),typeof t.statistics.maximum=="number"&&(n.maximum=t.statistics.maximum),r(n))||xl(t.histogram)&&(typeof t.histogram.min=="number"&&(n.minimum=t.histogram.min),typeof t.histogram.max=="number"&&(n.maximum=t.histogram.max),r(n))))return n;let i=this.getMetadata("classification:classes");if(Array.isArray(i)&&(i.reduce((a,l)=>(a.minimum=Math.min(a.minimum,l.value),a.maximum=Math.max(a.maximum,l.value),a),n),r(n)))return n;let s=this.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((a,l)=>(a.minimum=Math.min(a.minimum,...l.values),a.maximum=Math.max(a.maximum,...l.values),a),n),r(n)))return n;let o=xl(t)&&t.data_type||this.getMetadata("file:data_type");return o&&(n.minimum=ORt(o),n.maximum=MRt(o)),n}getNoDataValues(t=null){t=this.getBand(t);let n=[];if(t&&typeof t.nodata<"u")n.push(t.nodata);else{let r=this.getMetadata("file:nodata");if(typeof r<"u")n=r;else{let i=this.getMetadata("classification:classes");Array.isArray(i)&&(n=i.filter(s=>!!s.nodata).map(s=>s.value))}}return n.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}isDefinition(){return!Cl(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}hasRole(t,n=!1){return Array.isArray(t)||(t=[t]),n&&t.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>t.includes(r))}static fromAssets(t,n=null){let r={};if(xl(t))for(let i in t)r[i]=new Pp(t[i],i,n);return r}}class oS extends GPe{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(t=!0){return this.getLinksWithRels(["icon"]).filter(n=>n.canBrowserDisplayImage(t))}getThumbnails(t=!0,n=null){let r=this.getAssetsWithRoles(["thumbnail","overview"],!0);if(r.length===0&&(r=this.getLinksWithRels(["preview"])),t&&(r=r.filter(i=>i.canBrowserDisplayImage())),n&&r.length>1){let i=s=>Array.isArray(s.roles)&&s.roles.includes(n)||s.getKey()===n;r=r.filter(i).concat(r.filter(s=>!i(s)))}return r}getDefaultGeoTIFF(t=!0,n=!1){var i;return(i=this.rankGeoTIFFs(t,n)[0])==null?void 0:i.asset}rankGeoTIFFs(t=!0,n=!1,r=null,i=null){xl(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let s=[],o=this.getAssetsByTypes(qPe);t&&(o=o.filter(l=>l.isHTTP()&&(!n||l.isCOG())));let a=Object.entries(r);for(let l of o){let u=0;if(a.length>0){let f=a.filter(([c])=>l.hasRole(c,!0)).map(([,c])=>c);f.length>0&&(u+=Math.max(...f))}!n&&l.isCOG()&&(u+=2),l.findVisualBands()&&(u+=1),typeof i=="function"&&(u+=i(l)),s.push({asset:l,score:u})}return s.sort((l,u)=>u.score-l.score),s}findVisualAssets(){let t={red:null,green:null,blue:null},n=Object.keys(t),r=this.getAssets();for(let s of r){let o=s.getBands();if(o.length!==1)continue;let a=s.findBand(n,"common_name",o);a&&(t[a.band.common_name]=s)}return Object.values(t).every(s=>s!==null)?t:null}getAsset(t){return xl(this.assets)&&this.assets[t]||null}getAssets(){return xl(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(t,n=!1){return this.getAssets().filter(r=>r.hasRole(t,n))}getAssetWithRole(t,n=!1){return this.getAssetsWithRoles([t],n)[0]||null}getAssetsByTypes(t){return this.getAssets().filter(n=>BB(n.type,t))}equals(t){return this===t?!0:!(t instanceof oS)||this.getObjectType()!==t.getObjectType()?!1:!!(this.id&&this.id===t.id)}}class WPe extends oS{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getObjectType(){return this.type}getSearchLink(t=null){let n=this.getStacLinksWithRel("search");return t?n[0]||null:n.find(r=>r.method===t||!t&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class ZRt extends WPe{constructor(t,n=null){super(t,n)}}function f_(e){if(Cl(e)&&e.length>=10)try{let n=e.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5],n[6]||0))}catch{return null}return null}function KRt(e,t){return new Date(e.valueOf()+(t-e)/2)}function YPe(e){if(!Array.isArray(e)||e.length===0)return null;let t,n;const r=(i,s,o)=>typeof i>"u"?s:i===null||s===null?null:o(i,s);return e.forEach(([i,s])=>{t=r(t,i,Math.min),n=r(n,s,Math.max)}),[t===null?null:new Date(t),n===null?null:new Date(n)]}class XPe extends WPe{constructor(t,n=null){const r={assets:Pp.fromAssets,item_assets:Pp.fromAssets};super(t,n,r)}toGeoJSON(){let t=NPe(this.getBoundingBoxes());return t&&(t.id=this.id),t}getBoundingBox(){let t=this.getRawBoundingBoxes();return t.length>0&&Cc(t[0])?t[0]:null}getBoundingBoxes(){let t=this.getRawBoundingBoxes();return t.length===1&&Cc(t[0])?t:t.length>1?t.filter((n,r)=>r>0&&Cc(n)):[]}getRawBoundingBoxes(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.spatial)==null?void 0:r.bbox;return Array.isArray(t)&&t.length>0?t:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.temporal)==null?void 0:r.interval;return Array.isArray(t)&&t.length>0?t.filter(i=>Array.isArray(i)&&(Cl(i[0])||Cl(i[1]))).map(i=>i.map(s=>f_(s))):[]}getSummary(t){return this.summaries[t]}getBands(){let t=this.getSummary("eo:bands"),n=this.getSummary("raster:bands"),r=[t,n].filter(i=>Array.isArray(i));return r.length>=2?jPe(...r):r.length===1?r[0]:[]}}class JRt extends VPe{constructor(t,n=null){const r={collections:i=>i.map(s=>new XPe(s))};super(t,n,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(n=>n.toGeoJSON()).filter(n=>n!==null)}}getBoundingBox(){return zPe(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(t=>t.getBoundingBox())}getTemporalExtent(){return YPe(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(t=>t.getTemporalExtent())}}class ZPe extends oS{constructor(t,n=null){super(t,n,{assets:Pp.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Cc(this.bbox)?this.bbox:null}getBoundingBoxes(){return Cc(this.bbox)?[this.bbox]:[]}getDateTime(){let t=f_(this.properties.datetime);if(!t){let n=f_(this.properties.start_datetime),r=f_(this.properties.end_datetime);return n&&r?KRt(n,r):n||r}return t}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let t=[];return Cl(this.properties.start_datetime)||Cl(this.properties.end_datetime)?t=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:Cl(this.properties.datetime)&&(t=[[this.properties.datetime,this.properties.datetime]]),t.map(n=>n.map(r=>f_(r)))}getMetadata(t){return this.properties[t]}getBands(){let t=this.getMetadata("eo:bands");return Array.isArray(t)?t:[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class QRt extends VPe{constructor(t,n=null){const r={features:i=>i.map(s=>new ZPe(s))};super(t,n,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return zPe(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(t=>t.getBoundingBox())}getTemporalExtent(){return YPe(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(t=>t.getTemporalExtent())}}function eFt(e,t=!0,n=!1){return t&&(e=RRt.stac(e,n)),e.type==="Feature"?new ZPe(e):e.type==="FeatureCollection"?new QRt(e):e.type==="Collection"||!e.type&&typeof e.extent<"u"&&typeof e.license<"u"?new XPe(e):!e.type&&Array.isArray(e.collections)?new JRt(e):new ZRt(e)}class rSe extends uE{constructor(n){super({...n,state:"loading"});tn(this,"loadImage",n=>new Promise((r,i)=>{const s=new Image;s.addEventListener("load",()=>r(s)),s.addEventListener("error",()=>i(new Error("load failed"))),s.src=n}));const r=new NB(n.url);r.getHeader().then(i=>{this.tileGrid.minZoom=i.minZoom,this.tileGrid.maxZoom=i.maxZoom,this.setLoader(async(s,o,a)=>{const l=await r.getZxy(s,o,a),u=URL.createObjectURL(new Blob([l.data])),f=await this.loadImage(u);return URL.revokeObjectURL(u),f}),this.setState("ready")})}}class tFt extends hD{constructor(n){super({...n,state:"loading",url:"pmtiles://"+n.url+"/{z}/{x}/{y}",format:new RCe});tn(this,"tileLoadFunction",(n,r)=>{const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=r.match(i),o=+s[2],a=+s[3],l=+s[4];n.setLoader((u,f,c)=>{n.setState(Ts.LOADING),this.pmtiles_.getZxy(o,a,l).then(d=>{if(d){const h=n.getFormat();n.setFeatures(h.readFeatures(d.data,{extent:u,featureProjection:c})),n.setState(Ts.LOADED)}else n.setFeatures([]),n.setState(Ts.EMPTY)}).catch(d=>{n.setFeatures([]),n.setState(Ts.ERROR)})})});this.pmtiles_=new NB(n.url),this.pmtiles_.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}const nFt=new p_({fill:new j4({color:"rgba(255,255,255,0.4)"}),stroke:new q_({color:"#3399CC",width:3})}),rFt=new p_({stroke:new q_({color:"#ff9933",width:1})});function iFt(e,t){const n={url:e.getAbsoluteUrl()};let r=null;e.getBands().length===1&&(r=0);const{minimum:i,maximum:s}=e.getMinMaxValues(r);typeof i=="number"&&(n.min=i),typeof s=="number"&&(n.max=s);const o=e.getNoDataValues(r);return o.length>0&&(n.nodata=o[0]),t.length>0&&(n.bands=t),n}async function iSe(e,t=void 0){let n=t;if(tUe()){const r=e.getMetadata("proj:epsg");if(r)try{n=await nUe(r)}catch{}}return n}function sSe(e,t){const n=e.clone();return t.hasOnlyBounds()||n.setFill(null),n}function sFt(e){let t=e.href;if(t.includes("{s}"))if(Array.isArray(e["href:servers"])&&e["href:servers"].length>0){const n=Math.random()*e["href:servers"].length|0;t=t.replace("{s}",e["href:servers"][n])}else return null;return t}async function oFt(e){try{const t=new URL(e);t.searchParams.set("service","wmts"),t.searchParams.set("request","GetCapabilities");const n=await fetch(t);return new XI().read(await n.text())}catch{return null}}class jB extends p3{constructor(t){const n={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>n[r]=t[r]),super(n),this.getSourceOptions_=t.getSourceOptions,this.data_,this.assets_=null,this.bands_=[],this.crossOrigin_=t.crossOrigin||null,this.displayFootprint_=t.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!t.displayGeoTiffByDefault,this.displayPreview_=!!t.displayPreview,this.displayOverview_=t.displayOverview!==!1,this.displayWebMapLink_=t.displayWebMapLink||!1,this.buildTileUrlTemplate_=t.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=t.useTileLayerAsFallback||!1,this.boundsStyle_=t.boundsStyle||nFt,this.collectionStyle_=t.collectionStyle||rFt,this.boundsLayer_=null,t.data){try{this.configure_(t.data,t.url,t.assets,t.bands)}catch(r){this.handleError_(r)}return}if(!t.url)throw new Error("Either url or data must be provided");fetch(t.url).then(r=>r.json()).then(r=>this.configure_(r,t.url,t.assets,t.bands)).catch(r=>this.handleError_(r))}getBoundsLayer(){return this.boundsLayer_}handleError_(t){this.dispatchEvent(new CRt(t))}configure_(t,n=null,r=null,i=[]){t instanceof Pp||t instanceof oS?this.data_=t:this.data_=eFt(t),n&&n.includes("://")&&this.data_.setAbsoluteUrl(n),this.bands_=i,this.boundsLayer_=this.addFootprint_();const s=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(sSe(this.boundsStyle_,this))};this.getLayers().on("add",s),this.getLayers().on("remove",s),this.setAssets(r).then(()=>this.dispatchEvent("assetsready")).catch(o=>this.handleError_(o)),this.dispatchEvent("sourceready")}async addApiCollection_(){const t=this.getData().getAll().map(n=>{const r=new jB({data:n,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_});return this.addLayer_(r),r});return await Promise.all(t)}async addStacAssets_(){let t=this.getAssets();if(t===null){t=[];const r=this.getData().getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);if(r)t.push(r);else{const i=this.getData().getThumbnails().filter(s=>!Array.isArray(s.roles)||!s.roles.includes("example"));i.length>0&&t.push(i[0])}}const n=t.map(r=>this.addImagery_(r));return await Promise.all(n)}async addImagery_(t){if(t){if(t.isGeoTIFF())return await this.addGeoTiff_(t);if(t.canBrowserDisplayImage())return await this.addThumbnail_(t)}}async addThumbnail_(t){if(!this.displayPreview_)return;let n={url:t.getAbsoluteUrl(),projection:await iSe(t,"EPSG:4326"),imageExtent:t.getContext().getBoundingBox(),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(n=await this.getSourceOptions_(rs.ImageStatic,n,t));const r=new EI({source:new Rke(n)});return this.addLayer_(r,t),r}async addWebMapLinks_(){const t=this.getWebMapLinks();if(t.length>0)return await this.addLayerForLink(t[0])}async addLayerForLink(t){const n=sFt(t);if(!n)return;const r={attributions:t.getMetadata("attribution")||this.data_.getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:n},i=async(o,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(o,a,t)),a),s=[];switch(t.rel){case"pmtiles":const a=await new NB(r.url).getHeader();let l;switch(a.tileType){case sv.Mvt:l=new tFt(await i(rs.PMTilesVector,r));break;case sv.Avif:case sv.Jpeg:case sv.Png:case sv.Webp:l=new rSe(await i(rs.PMTilesRaster,r));break;default:return}s.push(l);break;case"tilejson":s.push(new zke(await i(rs.TileJSON,r)));break;case"wms":if(!Array.isArray(t["wms:layers"]))break;for(const c in t["wms:layers"]){const d=t["wms:layers"][c]||"";let h="";Array.isArray(t["wms:styles"])&&typeof t["wms:styles"][c]=="string"&&(h=t["wms:styles"][c]);const p=Object.assign({LAYERS:d,STYLES:h},t["wms:dimensions"]);typeof t["wms:transparent"]=="boolean"&&(p.TRANSPARENT=String(t["wms:transparent"])),typeof t.type=="string"&&t.type.startsWith("image/")&&(p.FORMAT=t.type);const g=await i(rs.TileWMS,Object.assign({},r,{params:p}));s.push(new VCe(g))}break;case"wmts":const u=await oFt(n);if(!u)return;const f=Array.isArray(t["wmts:layer"])?t["wmts:layer"]:[t["wmts:layer"]];for(const c of f){let d=Object.assign({},r,{layer:c});typeof t.type=="string"&&t.type.startsWith("image/")&&(d.format=t.type),d=await i(rs.WMTS,d),s.push(new WCe(YCe(u,d)))}break;case"xyz":s.push(new X_(await i(rs.XYZ,r)));break;default:return}return s.map(o=>{let a;return o instanceof hD?a=new zCe({source:o,declutter:!0}):o instanceof rSe?a=new E3({source:o}):a=new m3({source:o}),this.addLayer_(a,t),a})}async addGeoTiff_(t){if(!this.displayOverview_)return;if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);let r={sources:[iFt(t,this.bands_)]};const i=await iSe(t);i&&(r.projection=i),this.getSourceOptions_&&(r=await this.getSourceOptions_(rs.GeoTIFF,r,t));const s=async(o,a)=>(a&&this.getLayers().remove(a),await this.addTileLayerForImagery_(o));try{const o=new pP(r),a=new E3({source:o});if(this.useTileLayerAsFallback_){const l=()=>s(t,a);o.on("error",l),o.on("tileloaderror",l),o.on("change",()=>{o.getState()==="error"&&s(t,a)}),a.on("error",l),await o.getView()}return this.addLayer_(a,t),a}catch(o){if(this.useTileLayerAsFallback_)return await s(t,null);this.handleError_(o)}}async addTileLayerForImagery_(t){let n={crossOrigin:this.crossOrigin_,url:this.buildTileUrlTemplate_(t)};this.getSourceOptions_&&(n=await this.getSourceOptions_(rs.XYZ,n,t));const r=new m3({source:new X_(n)});return this.addLayer_(r,t),r}addLayer_(t,n,r=0){t.set("stac",n),t.setZIndex(r),this.getLayers().push(t)}addFootprint_(){let t=null;const n=this.getData();if(n.isItemCollection()||n.isCollectionCollection()?t=NPe(n.getBoundingBox()):t=n.toGeoJSON(),t){const r=new lD,i=new Q2({format:r,loader:(o,a,l)=>{const u=r.readFeatures(t,{featureProjection:l});i.addFeatures(u)}}),s=new cI({source:i,style:sSe(this.boundsStyle_,this),visible:this.displayFootprint_});return s.set("bounds",!0),this.addLayer_(s,n,1),s}return null}async updateLayers_(){const t=this.getLayers();for(let r=t.getLength()-1;r>=0;r--){const s=t.item(r).get("stac");s&&(s.isLink()||s.isAsset())&&t.removeAt(r)}const n=this.getData();n.isItemCollection()||n.isCollectionCollection()?await this.addApiCollection_():(n.isItem()||n.isCollection())&&await this.addStacAssets_(),this.displayWebMapLink_&&(Array.isArray(this.displayWebMapLink_)||this.hasOnlyBounds())&&await this.addWebMapLinks_()}hasOnlyBounds(){const t=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==t)>"u"}getWebMapLinks(){let t=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(t=[this.displayWebMapLink_]);let n=this.data_.getLinksWithRels(t);return Array.isArray(this.displayWebMapLink_)?n=this.displayWebMapLink_.map(r=>{if(typeof r=="string"){const i=n.find(s=>s.id===r);return i||null}return r}).filter(r=>!!r):n.sort((r,i)=>{const s=t.indexOf(r.rel),o=t.indexOf(i.rel);return s-o}),n}async setAssets(t){Array.isArray(t)?this.assets_=t.map(n=>typeof n=="string"?this.getData().getAsset(n):n instanceof Pp?n:new Pp(n)):this.assets_=null,await this.updateLayers_()}getData(){return this.data_}getAssets(){return this.assets_}getExtent(){if(!this.boundsLayer_)return;const t=this.boundsLayer_.getMapInternal();if(!t)return;const n=t.getView();if(!n)return;const r=this.getData();if(!r)return;const i=r.getBoundingBox();if(i)return XCe(i,"EPSG:4326",n.getProjection())}}rUe(V4);window.eoxMapAdvancedOlLayers={...HYe,STAC:jB};class aFt extends hh{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,tilePixelRatio:t.tilePixelRatio,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection,wrapX:t.wrapX}),this.version_=t.version!==void 0?t.version:"1.0.0",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,fetch(t.url).then(n=>n.text()).then(n=>new window.DOMParser().parseFromString(n,"application/xml")).then(n=>{this.handleCapabilitiesResponse(n,t)})}handleCapabilitiesResponse(t,n){const i=new XI().read(t),s=YCe(i,n);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=SI(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(t){const n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n==="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=n==="KVP"?g3(t,r):t.replace(/\{(\w+?)\}/g,(o,a)=>a.toLowerCase()in r?r[a.toLowerCase()]:o);const i=this.tileGrid,s=this.dimensions_;return function(o){if(!o)return;const a={TileMatrix:i.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(a,s);let l=t;return n==="KVP"?l=g3(l,a):l=l.replace(/\{(\w+?)\}/g,(u,f)=>a[f]),l}}}var Tr,wa=((Tr={})[Tr.Unknown=0]="Unknown",Tr[Tr.Point=1]="Point",Tr[Tr.LineString=2]="LineString",Tr[Tr.Polygon=3]="Polygon",Tr[Tr.MultiPoint=4]="MultiPoint",Tr[Tr.MultiLineString=5]="MultiLineString",Tr[Tr.MultiPolygon=6]="MultiPolygon",Tr[Tr.GeometryCollection=7]="GeometryCollection",Tr[Tr.CircularString=8]="CircularString",Tr[Tr.CompoundCurve=9]="CompoundCurve",Tr[Tr.CurvePolygon=10]="CurvePolygon",Tr[Tr.MultiCurve=11]="MultiCurve",Tr[Tr.MultiSurface=12]="MultiSurface",Tr[Tr.Curve=13]="Curve",Tr[Tr.Surface=14]="Surface",Tr[Tr.PolyhedralSurface=15]="PolyhedralSurface",Tr[Tr.TIN=16]="TIN",Tr[Tr.Triangle=17]="Triangle",Tr);const Lw=4,Rw=4,aS=4,up=new Int32Array(2),oSe=new Float32Array(up.buffer),aSe=new Float64Array(up.buffer),rC=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var U$;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(U$||(U$={}));class fh{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new fh(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return up[0]=this.readInt32(t),oSe[0]}readFloat64(t){return up[rC?0:1]=this.readInt32(t),up[rC?1:0]=this.readInt32(t+4),aSe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){oSe[0]=n,this.writeInt32(t,up[0])}writeFloat64(t,n){aSe[0]=n,this.writeInt32(t,up[rC?0:1]),this.writeInt32(t+4,up[rC?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Lw+Rw)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Rw;n++)t+=String.fromCharCode(this.readInt8(this.position_+Lw+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Lw;const i=this.bytes_.subarray(t,t+r);return n===U$.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Lw}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Rw)throw new Error("FlatBuffers: file identifier must be length "+Rw);for(let n=0;n<Rw;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Lw+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}}class za{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsGeometry(t,n){return(n||new za).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,n){return t.setPosition(t.position()+aS),(n||new za).__init(t.readInt32(t.position())+t.position(),t)}ends(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb.__vector(this.bb_pos+n)+4*t):0}endsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}xyLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}zLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){let t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}mLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}tLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readUint64(this.bb.__vector(this.bb_pos+n)+8*t):BigInt(0)}tmLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):wa.Unknown}parts(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new za).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}partsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,n){t.addFieldOffset(0,n,0)}static createEndsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startEndsVector(t,n){t.startVector(4,n,4)}static addXy(t,n){t.addFieldOffset(1,n,0)}static createXyVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startXyVector(t,n){t.startVector(8,n,8)}static addZ(t,n){t.addFieldOffset(2,n,0)}static createZVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startZVector(t,n){t.startVector(8,n,8)}static addM(t,n){t.addFieldOffset(3,n,0)}static createMVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startMVector(t,n){t.startVector(8,n,8)}static addT(t,n){t.addFieldOffset(4,n,0)}static createTVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startTVector(t,n){t.startVector(8,n,8)}static addTm(t,n){t.addFieldOffset(5,n,0)}static createTmVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startTmVector(t,n){t.startVector(8,n,8)}static addType(t,n){t.addFieldInt8(6,n,wa.Unknown)}static addParts(t,n){t.addFieldOffset(7,n,0)}static createPartsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startPartsVector(t,n){t.startVector(4,n,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,n,r,i,s,o,a,l,u){return za.startGeometry(t),za.addEnds(t,n),za.addXy(t,r),za.addZ(t,i),za.addM(t,s),za.addT(t,o),za.addTm(t,a),za.addType(t,l),za.addParts(t,u),za.endGeometry(t)}}function mM(e,t){let n=[];for(let r=0;r<e.length;r+=2){let i=[e[r],e[r+1]];t&&i.push(t[r>>1]),n.push(i)}return n}function q$(e,t){let n=t;if(n===wa.Unknown&&(n=e.type()),n===wa.GeometryCollection){let i=[];for(let s=0;s<e.partsLength();s++){let o=e.parts(s),a=o.type();i.push(q$(o,a))}return{type:wa[n],geometries:i}}if(n===wa.MultiPolygon){let i=[];for(let s=0;s<e.partsLength();s++)i.push(q$(e.parts(s),wa.Polygon));return{type:wa[n],coordinates:i.map(s=>s.coordinates)}}let r=function(i,s){let o=i.xyArray(),a=i.zArray();switch(s){case wa.Point:{let l=Array.from(o);return a&&l.push(a[0]),l}case wa.MultiPoint:case wa.LineString:return mM(o,a);case wa.MultiLineString:case wa.Polygon:return function(l,u,f){let c;if(!f||f.length===0)return[mM(l,u)];let d=0,h=Array.from(f).map(p=>l.slice(d,d=p<<1));return u&&(d=0,c=Array.from(f).map(p=>u.slice(d,d=p))),h.map((p,g)=>mM(p,c?c[g]:void 0))}(o,a,i.endsArray())}}(e,n);return{type:wa[n],coordinates:r}}var hi,Vo=((hi={})[hi.Byte=0]="Byte",hi[hi.UByte=1]="UByte",hi[hi.Bool=2]="Bool",hi[hi.Short=3]="Short",hi[hi.UShort=4]="UShort",hi[hi.Int=5]="Int",hi[hi.UInt=6]="UInt",hi[hi.Long=7]="Long",hi[hi.ULong=8]="ULong",hi[hi.Float=9]="Float",hi[hi.Double=10]="Double",hi[hi.String=11]="String",hi[hi.Json=12]="Json",hi[hi.DateTime=13]="DateTime",hi[hi.Binary=14]="Binary",hi);class Co{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsColumn(t,n){return(n||new Co).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,n){return t.setPosition(t.position()+aS),(n||new Co).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}type(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Vo.Byte}title(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}width(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){let t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){let t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){let t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb_pos+n,t):null}static startColumn(t){t.startObject(11)}static addName(t,n){t.addFieldOffset(0,n,0)}static addType(t,n){t.addFieldInt8(1,n,Vo.Byte)}static addTitle(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWidth(t,n){t.addFieldInt32(4,n,-1)}static addPrecision(t,n){t.addFieldInt32(5,n,-1)}static addScale(t,n){t.addFieldInt32(6,n,-1)}static addNullable(t,n){t.addFieldInt8(7,+n,1)}static addUnique(t,n){t.addFieldInt8(8,+n,0)}static addPrimaryKey(t,n){t.addFieldInt8(9,+n,0)}static addMetadata(t,n){t.addFieldOffset(10,n,0)}static endColumn(t){let n=t.endObject();return t.requiredField(n,4),n}static createColumn(t,n,r,i,s,o,a,l,u,f,c,d){return Co.startColumn(t),Co.addName(t,n),Co.addType(t,r),Co.addTitle(t,i),Co.addDescription(t,s),Co.addWidth(t,o),Co.addPrecision(t,a),Co.addScale(t,l),Co.addNullable(t,u),Co.addUnique(t,f),Co.addPrimaryKey(t,c),Co.addMetadata(t,d),Co.endColumn(t)}}class dc{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFeature(t,n){return(n||new dc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,n){return t.setPosition(t.position()+aS),(n||new dc).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){let n=this.bb.__offset(this.bb_pos,4);return n?(t||new za).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}properties(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb.__vector(this.bb_pos+n)+t):0}propertiesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new Co).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,n){t.addFieldOffset(0,n,0)}static addProperties(t,n){t.addFieldOffset(1,n,0)}static createPropertiesVector(t,n){t.startVector(1,n.length,1);for(let r=n.length-1;r>=0;r--)t.addInt8(n[r]);return t.endVector()}static startPropertiesVector(t,n){t.startVector(1,n,1)}static addColumns(t,n){t.addFieldOffset(2,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,n){t.finish(n)}static finishSizePrefixedFeatureBuffer(t,n){t.finish(n,void 0,!0)}static createFeature(t,n,r,i){return dc.startFeature(t),dc.addGeometry(t,n),dc.addProperties(t,r),dc.addColumns(t,i),dc.endFeature(t)}}new TextEncoder;let lSe=new TextDecoder;function lFt(e,t){let n={};if(!t||t.length===0)return n;let r=e.propertiesArray();if(!r)return n;let i=new DataView(r.buffer,r.byteOffset),s=e.propertiesLength(),o=0;for(;o<s;){let a=i.getUint16(o,!0);o+=2;let l=t[a],u=l.name;switch(l.type){case Vo.Bool:n[u]=!!i.getUint8(o),o+=1;break;case Vo.Byte:n[u]=i.getInt8(o),o+=1;break;case Vo.UByte:n[u]=i.getUint8(o),o+=1;break;case Vo.Short:n[u]=i.getInt16(o,!0),o+=2;break;case Vo.UShort:n[u]=i.getUint16(o,!0),o+=2;break;case Vo.Int:n[u]=i.getInt32(o,!0),o+=4;break;case Vo.UInt:n[u]=i.getUint32(o,!0),o+=4;break;case Vo.Long:n[u]=Number(i.getBigInt64(o,!0)),o+=8;break;case Vo.ULong:n[u]=Number(i.getBigUint64(o,!0)),o+=8;break;case Vo.Float:n[u]=i.getFloat32(o,!0),o+=4;break;case Vo.Double:n[u]=i.getFloat64(o,!0),o+=8;break;case Vo.DateTime:case Vo.String:{let f=i.getUint32(o,!0);o+=4,n[u]=lSe.decode(r.subarray(o,o+f)),o+=f;break}case Vo.Json:{let f=i.getUint32(o,!0);o+=4;let c=lSe.decode(r.subarray(o,o+f));n[u]=JSON.parse(c),o+=f;break}case Vo.Binary:{let f=i.getUint32(o,!0);o+=4,n[u]=r.subarray(o,o+f),o+=f;break}default:throw Error("Unknown type "+l.type)}}return n}function UB(e,t,n){let r=n.columns;return{type:"Feature",id:e,geometry:q$(t.geometry(),n.geometryType),properties:lFt(t,r)}}const qB=new Uint8Array(0);function uFt(){return this._source.cancel()}function cFt(e,t){if(!e.length)return t;if(!t.length)return e;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function fFt(){var e=this,t=e._array.subarray(e._index);return e._source.read().then(function(n){return e._array=qB,e._index=0,n.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:cFt(t,n.value)}})}function dFt(e){if((e|=0)<0)throw new Error("invalid length");var t=this,n=this._array.length-this._index;if(this._index+e<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=e));var r=new Uint8Array(e);return r.set(this._array.subarray(this._index)),function i(){return t._source.read().then(function(s){return s.done?(t._array=qB,t._index=0,n>0?r.subarray(0,n):null):n+s.value.length>=e?(t._array=s.value,t._index=e-n,r.set(s.value.subarray(0,e-n),n),r):(r.set(s.value,n),n+=s.value.length,i())})}()}function hFt(e){return typeof e.slice=="function"?e:new FR(typeof e.read=="function"?e:e.getReader())}function FR(e){this._source=e,this._array=qB,this._index=0}FR.prototype.read=fFt;FR.prototype.slice=dFt;FR.prototype.cancel=uFt;class xu{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsCrs(t,n){return(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,n){return t.setPosition(t.position()+aS),(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}org(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}code(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}wkt(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__string(this.bb_pos+n,t):null}codeString(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb_pos+n,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,n){t.addFieldOffset(0,n,0)}static addCode(t,n){t.addFieldInt32(1,n,0)}static addName(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWkt(t,n){t.addFieldOffset(4,n,0)}static addCodeString(t,n){t.addFieldOffset(5,n,0)}static endCrs(t){return t.endObject()}static createCrs(t,n,r,i,s,o,a){return xu.startCrs(t),xu.addOrg(t,n),xu.addCode(t,r),xu.addName(t,i),xu.addDescription(t,s),xu.addWkt(t,o),xu.addCodeString(t,a),xu.endCrs(t)}}class fT{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsHeader(t,n){return(n||new fT).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,n){return t.setPosition(t.position()+aS),(n||new fT).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}envelope(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}envelopeLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wa.Unknown}hasZ(){let t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){let t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){let t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){let t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new Co).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){let n=this.bb.__offset(this.bb_pos,24);return n?(t||new xu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}title(t){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb_pos+n,t):null}metadata(t){let n=this.bb.__offset(this.bb_pos,30);return n?this.bb.__string(this.bb_pos+n,t):null}static startHeader(t){t.startObject(14)}static addName(t,n){t.addFieldOffset(0,n,0)}static addEnvelope(t,n){t.addFieldOffset(1,n,0)}static createEnvelopeVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startEnvelopeVector(t,n){t.startVector(8,n,8)}static addGeometryType(t,n){t.addFieldInt8(2,n,wa.Unknown)}static addHasZ(t,n){t.addFieldInt8(3,+n,0)}static addHasM(t,n){t.addFieldInt8(4,+n,0)}static addHasT(t,n){t.addFieldInt8(5,+n,0)}static addHasTm(t,n){t.addFieldInt8(6,+n,0)}static addColumns(t,n){t.addFieldOffset(7,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static addFeaturesCount(t,n){t.addFieldInt64(8,n,BigInt("0"))}static addIndexNodeSize(t,n){t.addFieldInt16(9,n,16)}static addCrs(t,n){t.addFieldOffset(10,n,0)}static addTitle(t,n){t.addFieldOffset(11,n,0)}static addDescription(t,n){t.addFieldOffset(12,n,0)}static addMetadata(t,n){t.addFieldOffset(13,n,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,n){t.finish(n)}static finishSizePrefixedHeaderBuffer(t,n){t.finish(n,void 0,!0)}}function HB(e){let t=fT.getRootAsHeader(e),n=t.featuresCount(),r=t.indexNodeSize(),i=[];for(let a=0;a<t.columnsLength();a++){let l=t.columns(a);if(!l)throw Error("Column unexpectedly missing");if(!l.name())throw Error("Column name unexpectedly missing");i.push({name:l.name(),type:l.type(),title:l.title(),description:l.description(),width:l.width(),precision:l.precision(),scale:l.scale(),nullable:l.nullable(),unique:l.unique(),primary_key:l.primaryKey()})}let s=t.crs(),o=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:t.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:o,title:t.title(),description:t.description(),metadata:t.metadata()}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H$=function(e,t){return H$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},H$(e,t)};function pFt(e,t){H$(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function F1(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(f){try{u(r.next(f))}catch(c){o(c)}}function l(f){try{u(r.throw(f))}catch(c){o(c)}}function u(f){f.done?s(f.value):i(f.value).then(a,l)}u((r=r.apply(e,[])).next())})}function nm(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function wb(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function F2(e){return this instanceof F2?(this.v=e,this):new F2(e)}function mFt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){c(s[0][3],p)}}function l(d){d.value instanceof F2?Promise.resolve(d.value.v).then(u,f):c(s[0][2],d)}function u(d){a("next",d)}function f(d){a("throw",d)}function c(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}var KPe=function(e){pFt(t,e);function t(n){var r=e.call(this,n)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return t}(Error);(function(){function e(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();function G$(e){e!=null&&typeof e.then=="function"&&e.then(pT,pT)}var gM=0,uSe=1,_0=2,dT=3,V$=4,hT=1024,pT=function(){};function Iv(e){var t=e.err,n=Promise.resolve(e.execution).then(function(r){if(t!=null)throw t;return r});return e.err=void 0,e.execution=n.then(function(){},function(){}),e.pending===void 0?n:e.pending.then(function(){return n})}function Fg(e,t){var n=e.state>=dT;return Promise.resolve(t).then(function(r){return!n&&e.state>=V$?Iv(e).then(function(i){return{value:i,done:!0}}):{value:r,done:n}})}function GB(e,t){var n,r;if(!(e.state>=_0))if(e.state=_0,e.onnext(),e.onstop(),e.err==null&&(e.err=t),e.pushes.length===0&&(typeof e.buffer>"u"||e.buffer.empty))N_(e);else try{for(var i=wb(e.pushes),s=i.next();!s.done;s=i.next()){var o=s.value;o.resolve()}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function N_(e){var t,n;if(!(e.state>=dT)){e.state<_0&&GB(e),e.state=dT,e.buffer=void 0;try{for(var r=wb(e.nexts),i=r.next();!i.done;i=r.next()){var s=i.value,o=e.pending===void 0?Iv(e):e.pending.then(function(){return Iv(e)});s.resolve(Fg(e,o))}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function cSe(e){e.state>=V$||(e.state<dT&&N_(e),e.state=V$)}function gFt(e,t){if(G$(t),e.pushes.length>=hT)throw new KPe("No more than "+hT+" pending calls to push are allowed on a single repeater.");if(e.state>=_0)return Promise.resolve(void 0);var n=e.pending===void 0?Promise.resolve(t):e.pending.then(function(){return t});n=n.catch(function(l){e.state<_0&&(e.err=l),cSe(e)});var r;if(e.nexts.length){var i=e.nexts.shift();i.resolve(Fg(e,n)),e.nexts.length?r=Promise.resolve(e.nexts[0].value):typeof e.buffer<"u"&&!e.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(l){return e.onnext=l})}else typeof e.buffer<"u"&&!e.buffer.full?(e.buffer.add(n),r=Promise.resolve(void 0)):r=new Promise(function(l){return e.pushes.push({resolve:l,value:n})});var s=!0,o={},a=r.catch(function(l){if(s)throw l});return o.then=function(l,u){return s=!1,Promise.prototype.then.call(r,l,u)},o.catch=function(l){return s=!1,Promise.prototype.catch.call(r,l)},o.finally=r.finally.bind(r),e.pending=n.then(function(){return a}).catch(function(l){e.err=l,cSe(e)}),o}function yFt(e){var t=GB.bind(null,e),n=new Promise(function(r){return e.onstop=r});return t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),t}function vFt(e){if(!(e.state>=uSe)){e.state=uSe;var t=gFt.bind(null,e),n=yFt(e);e.execution=new Promise(function(r){return r(e.executor(t,n))}),e.execution.catch(function(){return GB(e)})}}var iC=new WeakMap,lS=function(){function e(t,n){iC.set(this,{executor:t,buffer:n,err:void 0,state:gM,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:pT,onstop:pT})}return e.prototype.next=function(t){G$(t);var n=iC.get(this);if(n===void 0)throw new Error("WeakMap error");if(n.nexts.length>=hT)throw new KPe("No more than "+hT+" pending calls to next are allowed on a single repeater.");if(n.state<=gM&&vFt(n),n.onnext(t),typeof n.buffer<"u"&&!n.buffer.empty){var r=Fg(n,n.buffer.remove());if(n.pushes.length){var i=n.pushes.shift();n.buffer.add(i.value),n.onnext=i.resolve}return r}else if(n.pushes.length){var s=n.pushes.shift();return n.onnext=s.resolve,Fg(n,s.value)}else if(n.state>=_0)return N_(n),Fg(n,Iv(n));return new Promise(function(o){return n.nexts.push({resolve:o,value:t})})},e.prototype.return=function(t){G$(t);var n=iC.get(this);if(n===void 0)throw new Error("WeakMap error");return N_(n),n.execution=Promise.resolve(n.execution).then(function(){return t}),Fg(n,Iv(n))},e.prototype.throw=function(t){var n=iC.get(this);if(n===void 0)throw new Error("WeakMap error");return n.state<=gM||n.state>=_0||typeof n.buffer<"u"&&!n.buffer.empty?(N_(n),n.err==null&&(n.err=t),Fg(n,Iv(n))):this.next(Promise.reject(t))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=bFt,e.merge=xFt,e.zip=wFt,e.latest=_Ft,e}();function OR(e,t){var n,r,i=[],s=function(u){u!=null&&typeof u[Symbol.asyncIterator]=="function"?i.push(u[Symbol.asyncIterator]()):u!=null&&typeof u[Symbol.iterator]=="function"?i.push(u[Symbol.iterator]()):i.push(function(){return mFt(this,arguments,function(){return nm(this,function(d){switch(d.label){case 0:return t.yieldValues?[4,F2(u)]:[3,3];case 1:return[4,d.sent()];case 2:d.sent(),d.label=3;case 3:return t.returnValues?[4,F2(u)]:[3,5];case 4:return[2,d.sent()];case 5:return[2]}})})}())};try{for(var o=wb(e),a=o.next();!a.done;a=o.next()){var l=a.value;s(l)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function bFt(e){var t=this,n=OR(e,{returnValues:!0});return new lS(function(r,i){return F1(t,void 0,void 0,function(){var s,o,a,l,u,f;return nm(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2];o=!1,i.then(function(){s(),o=!0}),c.label=1;case 1:c.trys.push([1,,5,7]),l=void 0,u=0,f=function(){var d,h,p,g,v,y;return nm(this,function(b){switch(b.label){case 0:d=u;try{for(h=(v=void 0,wb(n)),p=h.next();!p.done;p=h.next())g=p.value,Promise.resolve(g.next()).then(function(w){w.done?(i(),a===void 0&&(a=w)):u===d&&(u++,s(w))},function(w){return i(w)})}catch(w){v={error:w}}finally{try{p&&!p.done&&(y=h.return)&&y.call(h)}finally{if(v)throw v.error}}return[4,new Promise(function(w){return s=w})];case 1:return l=b.sent(),l===void 0?[3,3]:[4,r(l.value)];case 2:b.sent(),b.label=3;case 3:return[2]}})},c.label=2;case 2:return o?[3,4]:[5,f()];case 3:return c.sent(),[3,2];case 4:return[2,a&&a.value];case 5:return i(),[4,Promise.race(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}function xFt(e){var t=this,n=OR(e,{yieldValues:!0});return new lS(function(r,i){return F1(t,void 0,void 0,function(){var s,o,a,l=this;return nm(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2];s=[],o=!1,i.then(function(){var f,c;o=!0;try{for(var d=wb(s),h=d.next();!h.done;h=d.next()){var p=h.value;p()}}catch(g){f={error:g}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(f)throw f.error}}}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.all(n.map(function(f,c){return F1(l,void 0,void 0,function(){var d,h;return nm(this,function(p){switch(p.label){case 0:p.trys.push([0,,6,9]),p.label=1;case 1:return o?[3,5]:(Promise.resolve(f.next()).then(function(g){return s[c](g)},function(g){return i(g)}),[4,new Promise(function(g){s[c]=g})]);case 2:return d=p.sent(),d===void 0?[3,4]:d.done?(a=d,[2]):[4,r(d.value)];case 3:p.sent(),p.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return h=f.return,h?[4,f.return()]:[3,8];case 7:h=p.sent(),p.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return u.sent(),[2,a&&a.value];case 3:return i(),[7];case 4:return[2]}})})})}function wFt(e){var t=this,n=OR(e,{returnValues:!0});return new lS(function(r,i){return F1(t,void 0,void 0,function(){var s,o,a,l;return nm(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2,[]];o=!1,i.then(function(){s(),o=!0}),u.label=1;case 1:u.trys.push([1,,6,8]),u.label=2;case 2:return o?[3,5]:(Promise.all(n.map(function(f){return f.next()})).then(function(f){return s(f)},function(f){return i(f)}),[4,new Promise(function(f){return s=f})]);case 3:return a=u.sent(),a===void 0?[2]:(l=a.map(function(f){return f.value}),a.some(function(f){return f.done})?[2,l]:[4,r(l)]);case 4:return u.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(n.map(function(f){return f.return&&f.return()}))];case 7:return u.sent(),[7];case 8:return[2]}})})})}function _Ft(e){var t=this,n=OR(e,{yieldValues:!0,returnValues:!0});return new lS(function(r,i){return F1(t,void 0,void 0,function(){var s,o,a,l,u,f=this;return nm(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2,[]];o=[],a=!1,i.then(function(){var d,h;s();try{for(var p=wb(o),g=p.next();!g.done;g=p.next()){var v=g.value;v()}}catch(y){d={error:y}}finally{try{g&&!g.done&&(h=p.return)&&h.call(p)}finally{if(d)throw d.error}}a=!0}),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map(function(d){return d.next()})).then(function(d){return s(d)},function(d){return i(d)}),[4,new Promise(function(d){return s=d})];case 2:return l=c.sent(),l===void 0?[2]:(u=l.map(function(d){return d.value}),l.every(function(d){return d.done})?[2,u]:[4,r(u.slice())]);case 3:return c.sent(),[4,Promise.all(n.map(function(d,h){return F1(f,void 0,void 0,function(){var p;return nm(this,function(g){switch(g.label){case 0:if(l[h].done)return[2,l[h].value];g.label=1;case 1:return a?[3,4]:(Promise.resolve(d.next()).then(function(v){return o[h](v)},function(v){return i(v)}),[4,new Promise(function(v){return o[h]=v})]);case 2:return p=g.sent(),p===void 0?[2,l[h].value]:p.done?[2,p.value]:(u[h]=p.value,[4,r(u.slice())]);case 3:return g.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,c.sent()];case 5:return i(),[4,Promise.all(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}const JT=class JT{constructor(){tn(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}};tn(JT,"global",new JT);let mT=JT;const EFt=40,SFt=16;function VB(e,t){t=Math.min(Math.max(+t,2),65535);let n=e,r=n;do r+=n=Math.ceil(n/t);while(n!==1);return 40*r}function AFt(e,t){if(t<2)throw Error("Node size must be at least 2");if(e===0)throw Error("Number of items must be greater than 0");let n=e,r=n,i=[n];do r+=n=Math.ceil(n/t),i.push(n);while(n!==1);let s=[];for(let a of(n=r,i))s.push(n-a),n-=a;let o=[];for(let a=0;a<i.length;a++)o.push([s[a],s[a]+i[a]]);return o}async function*CFt(e,t,n,r){class i{constructor(h,p){tn(this,"_level");tn(this,"nodes");this._level=p,this.nodes=h}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(h){this.nodes[1]=h}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:s,minY:o,maxX:a,maxY:l}=n,u=AFt(e,t),f=u[0][0],c=[new i([0,1],u.length-1)];for(;c.length!=0;){let d=c.shift(),h=d.startNodeIdx(),p=h>=f,g=(()=>{let[,b]=u[d.level()],w=Math.min(d.endNodeIdx()+t,b);return p&&w<b?w+1:w})(),v=g-h,y=new DataView(await r(40*h,40*v));for(let b=h;b<g;b++){let w=b-h,E=40*w;if(a<y.getFloat64(E+0,!0)||l<y.getFloat64(E+8,!0)||s>y.getFloat64(E+16,!0)||o>y.getFloat64(E+24,!0))continue;let A=y.getBigUint64(E+32,!0);if(p){let R=(()=>{if(!(b<e-1))return null;{let B=(w+1)*40;return y.getBigUint64(B+32,!0)-A}})(),O=b-f;yield[Number(A),O,Number(R)];continue}let T=mT.global.extraRequestThreshold()/40,D=c[c.length-1];if(D!==void 0&&D.level()==d.level()-1&&A<D.endNodeIdx()+T){D.extendEndNodeIdx(Number(A));continue}let k=(()=>{let R=d.level()-1;return new i([Number(A),Number(A)+1],R)})();D!==void 0&&(D.level(),k.level()),c.push(k)}}}const Ig=new Uint8Array([102,103,98,3,102,103,98,0]),Ud=4;class WB{constructor(t,n,r,i,s){tn(this,"headerClient");tn(this,"header");tn(this,"headerLength");tn(this,"indexLength");tn(this,"nocache");this.headerClient=t,this.header=n,this.headerLength=r,this.indexLength=i,this.nocache=s}static async open(t,n){let r,i=new fSe(t,n),s=2024+(()=>{let u,f=0;for(u=0;u<3;u++)f+=SFt**u*EFt;return f})();if(!new Uint8Array(await i.getRange(0,8,s,"header")).subarray(0,3).every((u,f)=>Ig[f]===u))throw Error("Not a FlatGeobuf file");if((r=new DataView(await i.getRange(8,4,s,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");let o=await i.getRange(12,r,s,"header"),a=HB(new fh(new Uint8Array(o))),l=VB(a.featuresCount,a.indexNodeSize);return new WB(i,a,r,l,n)}async*selectBbox(t){let n=this.lengthBeforeTree(),r=this.headerClient,i=async function(l,u){return r.getRange(n+l,u,0,"index")},s=[],o=[];for await(let l of CFt(this.header.featuresCount,this.header.indexNodeSize,t,i)){let[u,f]=l,[,,c]=l;if(c||(c=4),o.length==0){o.push([u,c,f]);continue}let d=o[o.length-1];u-(d[0]+d[1])>mT.global.extraRequestThreshold()&&(s.push(o),o=[]),o.push([u,c,f])}this.headerClient.logUsage("header+index"),o.length>0&&s.push(o);let a=s.flatMap(l=>this.readFeatureBatch(l,this.nocache));yield*lS.merge(a)}lengthBeforeTree(){return Ig.length+Ud+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(t){return new fSe(this.headerClient.httpClient,t)}async*readFeatureBatch(t,n){let[r]=t[0],[i,s]=t[t.length-1],o=this.buildFeatureClient(n),a=i+s-r;for(let[l,,u]of t){let f=await this.readFeature(o,l,a);yield{id:u,feature:f},a=0}o.logUsage("feature")}async readFeature(t,n,r){let i,s=n+this.lengthBeforeFeatures();i=new DataView(await t.getRange(s,4,r,"feature length")).getUint32(0,!0);let o=new Uint8Array(await t.getRange(s+4,i,r,"feature data")),a=new Uint8Array(i+Ud);a.set(o,Ud);let l=new fh(a);return l.setPosition(Ud),dc.getRootAsFeature(l)}}let fSe=class{constructor(t,n){tn(this,"httpClient");tn(this,"bytesEverUsed",0);tn(this,"bytesEverFetched",0);tn(this,"buffer",new ArrayBuffer(0));tn(this,"head",0);if(typeof t=="string")this.httpClient=new dSe(t,n);else if(t instanceof dSe)this.httpClient=t;else throw Error("Unknown source ")}async getRange(t,n,r,i){this.bytesEverUsed+=n;let s=t-this.head,o=s+n;if(s>=0&&o<=this.buffer.byteLength)return this.buffer.slice(s,o);let a=Math.max(n,r);return this.bytesEverFetched+=a,this.buffer=await this.httpClient.getRange(t,a,i),this.head=t,this.buffer.slice(0,n)}logUsage(t){t.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}};class dSe{constructor(t,n){tn(this,"url");tn(this,"nocache");tn(this,"requestsEverMade",0);tn(this,"bytesEverRequested",0);this.url=t,this.nocache=n}async getRange(t,n,r){this.requestsEverMade+=1,this.bytesEverRequested+=n;let i={Range:`bytes=${t}-${t+n-1}`};return this.nocache&&(i["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:i})).arrayBuffer()}}function kFt(e,t,n){if(!e.subarray(0,3).every((f,c)=>Ig[c]===f))throw Error("Not a FlatGeobuf file");let r=new fh(e),i=r.readUint32(Ig.length);r.setPosition(Ig.length+Ud);let s=HB(r),o=Ig.length+Ud+i,{indexNodeSize:a,featuresCount:l}=s;a>0&&(o+=VB(l,a));let u=[];for(;o<r.capacity();){let f=r.readUint32(o);r.setPosition(o+Ud);let c=dc.getRootAsFeature(r);u.push(t(u.length,c,s)),o+=Ud+f}return u}async function*TFt(e,t,n){let r,i=hFt(e),s=async h=>await i.slice(h),o=new Uint8Array(await s(8));if(!o.subarray(0,3).every((h,p)=>Ig[p]===h))throw Error("Not a FlatGeobuf file");o=new Uint8Array(await s(4));let a=new fh(o),l=a.readUint32(0);o=new Uint8Array(await s(l));let u=HB(a=new fh(o)),{indexNodeSize:f,featuresCount:c}=u;if(f>0){let h=VB(c,f);await s(h)}let d=0;for(;r=await LFt(s,u,t,d++);)yield r}async function*DFt(e,t,n,r,i=!1){let s=await WB.open(e,i);for await(let o of s.selectBbox(t))yield n(o.id,o.feature,s.header)}async function LFt(e,t,n,r){let i=new Uint8Array(await e(4,"feature length"));if(i.byteLength===0)return;let s=new fh(i),o=s.readUint32(0);i=new Uint8Array(await e(o,"feature data"));let a=new Uint8Array(o+4);return a.set(i,4),(s=new fh(a)).setPosition(Ud),n(r,dc.getRootAsFeature(s),t)}function RFt(e,t){return{type:"FeatureCollection",features:kFt(e,UB)}}function FFt(e,t){return TFt(e,UB)}function OFt(e,t,n,r=!1){return DFt(e,t,UB,n,r)}function MFt(e,t,n,r=!1){return e instanceof Uint8Array?RFt(e):e instanceof ReadableStream?FFt(e):OFt(e,t,n,r)}const hSe=new lD({featureProjection:"EPSG:3857"});class $Ft extends Q2{constructor(t){super({url:t.url,attributions:t.attributions,wrapX:t.wrapX,format:hSe,strategy:iUe}),this.ressourceURL=t.url,super.setLoader(this.loader)}fgbBoundingBox(t,n){const r=XCe(t,n.getCode(),"EPSG:4326");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}}async loader(t,n,r,i,s){const o=this.fgbBoundingBox(t,r);try{if(o.minX!==-1/0){const a=[],l=MFt(this.ressourceURL,o);for await(const u of l){const f=hSe.readFeature(u);a.push(f)}super.clear(),super.addFeatures(a),i(a)}}catch{s()}}}window.eoxMapAdvancedOlSources={...SKe,WMTSCapabilities:aFt,FlatGeoBuf:$Ft};function IFt(e,t="property"){return e.map(([n,r])=>{var s,o;if(n==="extent"&&((o=(s=r.value)==null?void 0:s.temporal)==null?void 0:o.interval.length)>0){const a=r.value.temporal.interval[0];Array.isArray(a)&&(typeof a[0]=="string"||typeof a[1]=="string")&&(r.formatted=`${new Date(a[0]).toISOString().substring(0,10)} - ${new Date(a[1]).toISOString().substring(0,10)}`)}r.formatted=r.formatted.replace(new RegExp('(?<!href="|src=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),a=>`<a target="_blank" href="${a}">${a}</a>`);const i=a=>Object.entries(a).filter(([l,u])=>{let f=!0;return u.roles&&(f=u.roles.includes("metadata")),u.rel&&(f=u.rel==="example"),f});return(n==="assets"||n==="links"||n==="providers")&&(t==="property"?r.formatted=`<ul>${i(r.value).map(([a,l])=>`<li>
                <a target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}</a
                >
              </li>`).join("")}</ul>`:t==="featured"&&(r.formatted=i(r.value).map(([a,l])=>`<div class="button-container">
                ${l.description?`<div><p>${l.description}</p></div>`:""}
                <a class="button icon-text small block" target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}
                  </a>
              </div>`).join(""))),["providers","assets","links"].includes(n)&&(r.length=i(r.value).length),[n,r]})}function PFt(e){e.stacInfo.length&&(e.stacProperties=e.stacInfo.reduce((t,n)=>({...t,...n.properties}),{}),e.requestUpdate())}var yM,pSe;function _b(){if(pSe)return yM;pSe=1;const e={collatorOptions:{},numberFormatterOptions:{maximumFractionDigits:10},dateFormatterOptions:{day:"numeric",month:"numeric",year:"numeric"},dateTimeFormatterOptions:{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC",timeZoneName:"short"}};return yM={locales:[],collator:new Intl.Collator(e.collatorOptions),dateFormatter:new Intl.DateTimeFormat(e.dateFormatterOptions),dateTimeFormatter:new Intl.DateTimeFormat(e.dateTimeFormatterOptions),numberFormatter:new Intl.NumberFormat(e.numberFormatterOptions),translate:null,getDefaults(){return e},setLocales(n,r={},i={},s={},o={}){this.locales=n,o=Object.assign({},e.collatorOptions,o),this.collator=new Intl.Collator(n,o),r=Object.assign({},e.dateFormatterOptions,r),this.dateFormatter=new Intl.DateTimeFormat(n,r),i=Object.assign({},e.dateTimeFormatterOptions,i),this.dateTimeFormatter=new Intl.DateTimeFormat(n,i),s=Object.assign({},e.numberFormatterOptions,s),this.numberFormatter=new Intl.NumberFormat(n,s)},setTranslator(n){this.translate=n},format(n,r=null){if(r)for(let i in r)n=n.replaceAll(`{${i}}`,r[i]);return n}},yM}var vM,mSe;function uS(){if(mSe)return vM;mSe=1;const e=_b(),t={e(n){return typeof n!="string"&&(n=String(n)),n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(n,r=null){return typeof e.translate=="function"?e.translate(n,r):e.format(n,r)},toNothing(n=null){return n===null&&(n=t.t("n/a")),`<i class="null">${n}</i>`},toList(n,r=!1,i=null,s=null){let o=s===!0?"ol":"ul";return Array.isArray(n)||(n=[n]),r&&(n=n.slice(0),typeof r=="function"?n.sort(r):n.sort(),s===null&&(o="ol")),typeof i=="function"&&(n=n.map(i)),n.length===0?t.toNothing():n.length===1?n[0]:`<${o}><li>${n.join("</li><li>")}</li></${o}>`},toLink(n,r="",i="",s="_blank"){return r||(n.length>50?r=n.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...o){return o[4]?o[1]+"/[]/"+o[4]:o[1]}):r=n.replace(/^\w+:\/\//i,"")),`<a href="${t.e(n)}" rel="${t.e(i)}" target="${t.e(s)}">${t.e(r)}</a>`},toObject(n,r=null,i=null,s=[],o=null,a=[]){let l="<dl>",u=Array.isArray(s)&&s.length>=2?s:Object.keys(n);for(let f of u){if(!(f in n)||typeof o=="function"&&a.length>0&&!o(a[0],a.concat([f])))continue;let c;typeof i=="function"?c=i(f,n):c=t.formatKey(f,!0);let d=n[f];typeof r=="function"&&(d=r(d,f,n)),l+=`<dt>${c}</dt><dd>${d}</dd>`}return l+="</dl>",l},abbrev(n,r){return`<abbr title="${t.e(r)}">${t.e(n)}</abbr>`},isObject(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)},formatKey(n,r=!1){if(n.includes("/"))return t.e(t.t(n));r===!1&&(n=n.replace(/^[\w-]+:/i,""));let i=n.split(/[:_\-\s]/g).map(s=>s.substr(0,1).toUpperCase()+s.substr(1)).join(" ");return t.e(t.t(i))},hexToUint8(n){if(n.length===0||n.length%2!==0)throw new Error(`The string "${n}" is not valid hex.`);return new Uint8Array(n.match(/.{1,2}/g).map(r=>parseInt(r,16)))},uint8ToHex(n){return n.reduce((r,i)=>r+i.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(n){return n.reduce((r,i)=>Object.keys(i).reduce((s,o)=>(s.indexOf(o)==-1&&s.push(o),s),r),[])},unit(n,r=""){return typeof r=="string"&&r.length>0?(r=t.t(r),`${n}&nbsp;<span class="unit">${r}</unit>`):n}};return vM=t,vM}var bM,gSe;function NFt(){if(gSe)return bM;gSe=1;const e=uS(),t=_b(),n={fields(r){let i=["extensions","metadata","links","assets"];for(let s of i)for(let o in r[s])r[s][o]=n.field(r[s][o],r[s],r);return r},field(r,i={},s={}){if(typeof r=="string")return{label:r};if(typeof r.alias=="string"){let o=i[r.alias]||s.metadata[r.alias];if(!o)throw new Error("Alias is invalid: "+r.alias);return Object.assign(r,n.field(o,i,s))}if(e.isObject(r.items)){let o=[];for(let a in r.items)r.items[a]=n.field(r.items[a],i,s),o.push(Object.assign({key:a},r.items[a]));r.itemOrder=o.sort((a,l)=>a.id===!0?-1:l.id===!0?1:typeof a.order=="number"&&typeof l.order=="number"?a.order-l.order:t.collator.compare(e.t(a.label),e.t(l.label))).map(a=>a.key)}if(e.isObject(r.properties))for(let o in r.properties)r.properties[o]=n.field(r.properties[o],i,s);return r}};return bM=n,bM}var xM,ySe;function YB(){if(ySe)return xM;ySe=1;const e=NFt(),t={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(n){n=e.fields(n);for(let r in this.fields)Object.assign(this.fields[r],n[r])},getDependency(n){return this.dependencies[n]||console.warn(`Dependency '${n}' not registered.`),this.dependencies[n]},addDependency(n,r){this.dependencies[n]=r},addExtension(n,r){this.fields.extensions[n]=e.field(r,this.fields.extensions)},addMetadataField(n,r){this.fields.metadata[n]=e.field(r,this.fields.metadata)},addLinkField(n,r){this.fields.links[n]=e.field(r,this.fields.links)},addAssetField(n,r){this.fields.assets[n]=e.field(r,this.fields.assets)},addMetadataFields(n){for(var r in n)t.addMetadataField(r,n[r])},getExtension(n){return this.fields.extensions[n]?this.fields.extensions[n]:{}},getSpecification(n,r=null){let i={};return r==="assets"&&this.fields.assets[n]?i=this.fields.assets[n]:r==="links"&&this.fields.links[n]?i=this.fields.links[n]:this.fields.metadata[n]&&(i=this.fields.metadata[n]),i}};return xM=t,xM}const BFt={alternate:"Alternative Access Methods",anon:"Anonymized Location",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",product:"Product",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},zFt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},method:"HTTP Method",headers:"HTTP Headers",body:"Request Body"},jFt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},UFt=JSON.parse('{"id":"Identifier","keywords":"Keywords","datetime":{"label":"Time of Data","format":"Timestamp","summary":false},"title":{"label":"Title","summary":false},"description":{"label":"Description","format":"CommonMark","summary":false},"roles":"Purpose","start_datetime":{"label":"Time of Data begins","format":"Timestamp","summary":false},"end_datetime":{"label":"Time of Data ends","format":"Timestamp","summary":false},"created":{"label":"Created","format":"Timestamp","summary":"r"},"updated":{"label":"Updated","format":"Timestamp","summary":"r"},"published":{"label":"Published","format":"Timestamp","summary":"r"},"expires":{"label":"Expires","format":"Timestamp","summary":"r"},"unpublished":{"label":"Unpublished","format":"Timestamp","summary":"r"},"license":{"label":"License","format":"License","summary":false},"providers":{"label":"Providers","format":"Providers","summary":false},"platform":"Platform","instruments":{"label":"Instruments","format":"CSV"},"constellation":"Constellation","mission":"Mission","gsd":{"label":"GSD","explain":"Ground Sample Distance","unit":"m"},"bands":{"label":"Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"alias":"description","order":2},"gsd":{"alias":"gsd","sortable":true},"nodata":{"alias":"nodata"},"data_type":{"alias":"data_type","sortable":true},"statistics":{"alias":"statistics"},"eo:common_name":{"alias":"eo:common_name","sortable":true,"order":1},"eo:center_wavelength":{"alias":"eo:center_wavelength","sortable":true},"eo:full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true},"eo:solar_illumination":{"alias":"eo:solar_illumination","sortable":true},"raster:sampling":{"alias":"raster:sampling","sortable":true},"unit":{"alias":"unit","sortable":true},"raster:bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"raster:spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"raster:scale":{"alias":"raster:scale","sortable":true},"raster:offset":{"alias":"raster:offset","sortable":true},"raster:histogram":{"alias":"raster:histogram"},"classification:classes":{"alias":"classification:classes"},"classification:bitfields":{"alias":"classification:bitfields"}}},"nodata":{"label":"No-Data Values","format":"CSV","summary":false},"data_type":{"label":"Data Type of Values","format":"FileDataType"},"unit":"Unit of Values","statistics":{"label":"Statistics","listWithKeys":true,"items":{"mean":"Average","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stdev":{"label":"Std. Dev.","explain":"Standard Deviation"},"count":{"label":"Count","explain":"Total number of values"},"valid_percent":{"label":"Valid","explain":"Percentage of valid values","unit":"%"}}},"version":{"label":"Data Version","summary":false},"deprecated":{"label":"Deprecated","summary":false},"experimental":{"label":"Experimental","summary":false},"language":{"label":"Current Language","ext":"language","summary":"v","properties":{"name":{"label":"Name"},"alternate":{"label":"Alternate Name"},"code":{"label":"Code"},"dir":{"label":"Direction","explain":"Reading and writing direction","mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"languages":{"label":"Available Languages","ext":"language","summary":false,"items":{"name":{"label":"Name","sortable":true,"order":0},"alternate":{"label":"Alternate Name","sortable":true,"order":1},"code":{"label":"Code","sortable":true,"order":2},"dir":{"label":"Direction","explain":"Reading and writing direction","sortable":true,"order":3,"mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"contacts":{"label":"Contacts","ext":"contacts","summary":"v","items":{"name":{"label":"Name"},"identifier":{"label":"Identifier"},"position":{"label":"Position"},"organization":{"label":"Organization"},"logo":{"label":"Logo","format":"Image"},"phones":{"label":"Phone","items":{"value":{"label":"Number","format":"Phone","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal","fax":"Fax"}}}},"emails":{"label":"Email","items":{"value":{"label":"Address","format":"Email","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal"}}}},"addresses":{"label":"Postal Addresses","format":"Address","items":{"deliveryPoint":{"label":"Street / House","order":0},"city":{"label":"City","order":1},"administrativeArea":{"label":"State / Province","order":2},"postalCode":{"label":"Postal Code","order":3},"country":{"label":"Country","order":4}}},"links":{"label":"Additional Resources","format":"Link"},"contactInstructions":"Further Instructions","roles":{"label":"Types","format":"CSV"}}},"themes":{"label":"Themes","ext":"themes","summary":false,"items":{"scheme":{"label":"Vocabulary","order":0,"format":"Url"},"concepts":{"label":"Terms","order":1,"format":"Concepts","items":{"id":{"label":"Identifier","order":0},"title":{"label":"Title","order":1},"description":{"label":"Description","order":2},"url":{"label":"URL","order":3,"format":"Url"}}}}},"crs":{"label":"CRS","format":"CRS","explain":"Coordinate Reference System"},"anon:size":{"label":"Uncertainty","unit":"","explain":"The size of one side of the anonymized bounding box"},"anon:warning":{"label":"Warning","summary":false},"classification:classes":{"summary":false,"label":"Classes","items":{"color_hint":{"label":"Color","order":0,"format":"HexColor"},"value":{"label":"Value","sortable":true,"order":1},"title":{"label":"Title","sortable":true,"order":2},"name":{"label":"Identifier","sortable":true,"order":3},"description":{"label":"Description","order":4,"format":"CommonMark"},"percentage":{"label":"Percentage of samples","sortable":true,"order":5,"unit":"%"},"count":{"label":"Number of samples","sortable":true,"order":6},"nodata":{"label":"No-data value","order":7,"default":false}}},"classification:bitfields":{"summary":false,"label":"Bit Mask","items":{"name":{"label":"Name","sortable":true,"order":0},"offset":{"label":"Offset","explain":"Offset to the first bit","order":1},"length":{"label":"Number of bits","order":2},"description":{"label":"Description","order":3,"format":"CommonMark"},"classes":{"alias":"classification:classes"},"roles":{"label":"Purpose"}}},"cube:dimensions":{"label":"Dimensions","summary":false,"listWithKeys":true,"items":{"type":{"label":"Type","order":0},"axis":{"label":"Axis","order":1},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"bbox":{"alias":"proj:bbox","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":5},"geometry_types":{"label":"Geometry Types","order":5},"reference_system":{"label":"Reference System","explain":"Coordinate / Temporal / Other Reference System","order":6}}},"cube:variables":{"label":"Variables","summary":false,"listWithKeys":true,"items":{"dimensions":{"label":"Dimensions","order":0},"type":{"label":"Type","order":1,"mapping":{"data":"Measured values","auxiliary":"Coordinate data"}},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":6}}},"eo:bands":{"label":"Spectral Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"common_name":{"alias":"eo:common_name","sortable":true,"order":1},"center_wavelength":{"alias":"eo:center_wavelength","sortable":true,"order":2},"full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true,"order":3},"solar_illumination":{"alias":"eo:solar_illumination","sortable":true,"order":7},"description":{"alias":"description"},"gsd":{"alias":"gsd","sortable":true},"cloud_cover":{"alias":"eo:cloud_cover","sortable":true}}},"eo:cloud_cover":{"label":"Cloud Cover","unit":"%"},"eo:snow_cover":{"label":"Snow/Ice Cover","unit":"%"},"eo:common_name":"Common Name","eo:center_wavelength":{"label":"Wavelength","explain":"The center wavelength of the band","unit":"m"},"eo:full_width_half_max":{"label":"FWHM","explain":"Full Width Half Max","unit":"m"},"eo:solar_illumination":{"label":"Solar Illumination","unit":"W/m/m"},"forecast:reference_datetime":{"label":"Reference Time","format":"Timestamp","summary":"r"},"forecast:horizon":{"label":"Forecast Horizon","explain":"The time between the reference time and the forecast time","format":"Duration"},"forecast:duration":{"label":"Forecast Length","format":"Duration"},"file:bits_per_sample":{"alias":"raster:bits_per_sample"},"file:byte_order":"Byte Order","file:checksum":{"label":"Checksum","format":"Checksum","summary":false},"file:data_type":{"alias":"data_type"},"file:header_size":{"label":"Header Size","format":"FileSize","summary":false},"file:nodata":{"alias":"nodata"},"file:size":{"label":"Size","format":"FileSize","summary":false},"file:unit":{"alias":"unit"},"file:values":{"label":"Map of Values","summary":false,"items":{"values":{"label":"Values","format":"CSV","order":1},"summary":{"label":"Summary","order":0}}},"file:local_path":{"label":"Local Path","summary":false},"nodata:values":{"alias":"nodata"},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{"label":"System Environment","mapping":{"OR":"Operational system, real-time data","OT":"Operational system, test data","IR":"Test system, real-time data","IT":"Test system, test data","IP":"Test system, playback data","IS":"Test system, simulated data"}},"goes:image_type":{"label":"Area","mapping":{"FULL DISK":"The Americas (full disk)","CONUS":"North America (continental US)","MESOSCALE":"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{"label":"Area in Central/South America","mapping":{"1":"Region 1","2":"Region 2"}},"goes:mode":{"label":"Capture Mode","mapping":{"3":"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)","4":"4: 1x full disk (every 5 minutes)","6":"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{"label":"Time Threshold in a Group","explain":"Lightning group maximum time difference among lightning events in a group","unit":"s"},"goes:flash_time_threshold":{"label":"Time Threshold in a Flash","explain":"Lightning flash maximum time difference among lightning events in a flash","unit":"s"},"goes:lightning_wavelength":{"label":"Central Wavelength","unit":"nm"},"goes:yaw_flip_flag":{"label":"Yaw Flip Configuration","explain":"Flag indicating that the spacecraft is operating in yaw flip configuration.","mapping":{"0":"Upright","1":"Neither","2":"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{"label":"Satellite Subpoint Latitude","unit":"N"},"goes:nominal_satellite_subpoint_lon":{"label":"Satellite Subpoint Longitude","unit":"E"},"goes:nominal_satellite_height":{"label":"Satellite Height","explain":"Nominal satellite height above GRS 80 ellipsoid","unit":"km"},"goes:percent_navigated_L1b_events":{"label":"Events navigated by Instrument","format":"Percent0to1","unit":"%"},"goes:percent_uncorrectable_L0_errors":{"label":"Data Lost","format":"Percent0to1","unit":"%"},"grid:code":{"label":"Grid","format":"GridCode"},"raster:bands":{"label":"Layers","items":{"nodata":{"alias":"nodata"},"sampling":{"alias":"raster:sampling","sortable":true},"data_type":{"alias":"data_type","sortable":true},"bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"statistics":{"alias":"statistics"},"unit":{"alias":"unit","sortable":true},"scale":{"alias":"raster:scale","sortable":true},"offset":{"alias":"raster:offset","sortable":true},"histogram":{"alias":"raster:histogram"}}},"raster:sampling":{"label":"Sampling","mapping":{"area":"Area","point":"Point (at pixel center)"}},"raster:bits_per_sample":"Bits per Sample","raster:spatial_resolution":{"label":"Resolution","explain":"Average spatial resolution","unit":"m"},"raster:scale":"Scale","raster:offset":"Offset","raster:histogram":{"label":"Histogram","custom":true},"label:properties":{"label":"Properties","null":"raster data"},"label:classes":{"label":"Classes","items":{"name":{"label":"Name","null":"raster-formatted","sortable":true,"id":true},"classes":"Classes"}},"label:description":{"label":"Description","format":"CommonMark","summary":false},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{"label":"Overviews","summary":false,"items":{"property_key":{"label":"Property Key","id":true},"counts":{"label":"Counts","custom":true},"statistics":{"label":"Statistics","custom":true}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{"label":"Pass Number","mapping":{"1":"1 (less latency / less gauges)","2":"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{"label":"Accumulation Period","unit":"h"},"noaa_mrms_qpe:region":{"label":"Region","mapping":{"CONUS":"Continental US","HAWAII":"Hawaii","GUAM":"Guam","ALASKA":"Alaska","CARIB":"Caribbean Islands"}},"openeo:status":"Processing Status","api_version":{"label":"API Version","ext":"openeo"},"backend_version":{"label":"Back-End Version","ext":"openeo"},"production":{"label":"Production-Ready","ext":"openeo"},"endpoints":{"label":"Supported Endpoints","ext":"openeo","summary":false,"items":{"path":{"label":"Path Template","order":0},"methods":{"label":"HTTP Methods","order":1,"format":"CSV"}}},"billing":{"label":"Billing","ext":"openeo","custom":true,"summary":false},"order:status":{"label":"Status","mapping":{"orderable":"Orderable (data can be ordered)","ordered":"Ordered (preparing to deliver data)","pending":"Pending (waiting for activation)","shipping":"Shipping (data is getting processed)","succeeded":"Delivered (data is available)","failed":"Failed (unable to deliver)","canceled":"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{"label":"Submitted","format":"Timestamp","summary":"r"},"order:expiration_date":{"alias":"expires"},"pc:count":{"label":"Points","explain":"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{"label":"Schemas","summary":false,"items":{"name":{"label":"Name","sortable":true,"id":true},"size":{"label":"Size","unit":"bytes","sortable":true},"type":{"label":"Type","sortable":true}}},"pc:density":"Density","pc:statistics":{"label":"Statistics","summary":"s","items":{"name":{"label":"Name","id":true},"position":"Position","average":"Average","count":"Count","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stddev":{"label":"Std. Dev.","explain":"Standard Deviation"},"variance":"Variance"}},"processing:expression":{"label":"Processing Instructions","summary":false},"processing:lineage":{"label":"Lineage","format":"CommonMark","summary":false},"processing:level":"Level","processing:facility":"Facility","processing:software":{"label":"Software","format":"Software","summary":false},"processing:version":"Processor Version","processing:datetime":{"label":"Processing Time","format":"Timestamp","summary":"r"},"product:type":"Product Type","product:timeliness":{"label":"Timeliness","format":"Duration"},"product:timeliness_category":"Timeliness Category","product:acquisition_type":{"label":"Acquisition Type","mapping":{"nominal":"Nominal","calibration":"Calibration","other":"Other"}},"proj:epsg":{"label":"EPSG Code","format":"EPSG","summary":"v"},"proj:code":{"label":"Code","format":"CrsCode","summary":"v"},"proj:wkt2":{"label":"WKT2","explain":"Well-Known Text, version 2","format":"WKT2","summary":false},"proj:projjson":{"label":"PROJJSON","explain":"JSON encoding of WKT2","format":"PROJJSON","summary":false},"proj:geometry":{"label":"Footprint","custom":true,"summary":false},"proj:bbox":{"label":"Bounding Box","custom":true,"summary":false},"proj:centroid":{"label":"Centroid","custom":true,"summary":false},"proj:shape":{"label":"Image Dimensions","format":"Shape","summary":false},"proj:transform":{"label":"Transformation Matrix","format":"Transform","summary":false},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{"label":"Center Frequency","unit":"GHz"},"sar:polarizations":{"label":"Polarizations","format":"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{"label":"Range Resolution","unit":"m"},"sar:resolution_azimuth":{"label":"Azimuth Resolution","unit":"m"},"sar:pixel_spacing_range":{"label":"Range Pixel Spacing","unit":"m"},"sar:pixel_spacing_azimuth":{"label":"Azimuth Pixel Spacing","unit":"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{"label":"ENL","explain":"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{"label":"Int. Designator","explain":"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{"label":"Abs. Orbit Number","explain":"Absolute Orbit Number"},"sat:relative_orbit":{"label":"Rel. Orbit Number","explain":"Relative Orbit Number"},"sat:anx_datetime":{"label":"ANX Time","format":"Timestamp","explain":"Ascending Node Crossing time","summary":"r"},"sci:doi":{"label":"DOI","format":"DOI"},"sci:citation":"Citation","sci:publications":{"label":"Publications","summary":false,"items":{"citation":{"label":"Publication","sortable":true,"order":0},"doi":{"label":"DOI","format":"DOI","sortable":true,"order":1}}},"ssys:targets":"Target Body","storage:platform":{"label":"Provider","mapping":{"ALIBABA":"Alibaba Cloud","AWS":"Amazon AWS","AZURE":"Microsoft Azure","GCP":"Google Cloud Platform","IBM":"IBM Cloud","ORACLE":"Oracle Cloud"}},"storage:region":"Region","storage:requester_pays":"Requester Pays","storage:tier":"Tier Type","table:columns":{"label":"Columns","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"type":{"label":"Data Type","sortable":true,"order":1},"description":{"label":"Description","format":"CommonMark","order":2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{"label":"Tables","summary":false,"listWithKeys":true,"items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"label":"Description","format":"CommonMark","order":1}}},"tiles:tile_matrix_sets":{"label":"Tile Matrix Sets","custom":true,"summary":false},"tiles:tile_matrix_set_links":{"label":"Tile Matrix Set Links","custom":true,"summary":false},"view:off_nadir":{"label":"Off-Nadir Angle","unit":""},"view:incidence_angle":{"label":"Incidence Angle","unit":""},"view:azimuth":{"label":"Viewing Azimuth","unit":""},"view:sun_azimuth":{"label":"Sun Azimuth","unit":""},"view:sun_elevation":{"label":"Sun Elevation","unit":""},"pl:black_fill":{"label":"Unfilled Image Parts","unit":"%"},"pl:clear_percent":{"label":"Clear Sky","unit":"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{"label":"Spatial Resolution","unit":"m"},"pl:publishing_stage":{"label":"Publishing Stage","mapping":{"preview":"Preview","standard":"Standard","finalized":"Finalized"}},"pl:quality_category":{"label":"Quality Category","mapping":{"standard":"Standard","test":"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{"label":"Type","mapping":{"image":"Single image","image_collection":"Image collection","table":"Table"}},"gee:cadence":"Cadence","gee:schema":{"label":"Variables","items":{"name":"Name","description":"Description","type":"Data Type"},"summary":false},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{"label":"Terms of Use","format":"CommonMark","summary":false},"gee:visualizations":{"label":"Visualizations","custom":true,"summary":false},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{"label":"WRS Type","explain":"Worldwide Reference System Type"},"landsat:wrs_path":{"label":"WRS Path","explain":"Worldwide Reference System Path"},"landsat:wrs_row":{"label":"WRS Row","explain":"Worldwide Reference System Row"},"landsat:cloud_cover_land":{"label":"Land Cloud Cover","unit":"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{"label":"Summary","summary":false},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{"label":"Product ID","summary":"s"},"sentinel:data_coverage":{"label":"Data Coverage","unit":"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{"label":"Processing Level","explain":"Geolocation precision level","mapping":{"L2":"Geolocation using only satellite telemetry","L3":"Control points used to geolocate image, no terrain correction","L4":"Control points used to geolocate image, orthorectified"},"summary":"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{"label":"Specification","mapping":{"SR":"Surface Reflectance (Optical)","ST":"Surface Temperature (Optical)","NRB":"Normalized Radar Backscatter (SAR)","POL":"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{"label":"Platform Altitude","unit":"m"},"card4l:incidence_angle_near_range":{"label":"Incidence Angle (near)","unit":""},"card4l:incidence_angle_far_range":{"label":"Incidence Angle (far)","unit":""},"card4l:noise_equivalent_intensity":{"label":"Noise Equivalent Intensity","unit":"dB"},"card4l:mean_faraday_rotation_angle":{"label":"Mean Faraday Rotation","unit":""},"card4l:speckle_filtering":{"label":"Speckle Filtering","custom":true,"summary":false,"null":"not applied"},"card4l:relative_rtc_accuracy":{"label":"Rel. RTC Accuracy","explain":"Relative accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:absolute_rtc_accuracy":{"label":"Abs. RTC Accuracy","explain":"Absolute accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:northern_geometric_accuracy":{"label":"Northern Geometric Accuracy","unit":"m"},"card4l:eastern_geometric_accuracy":{"label":"Eastern Geometric Accuracy","unit":"m"},"card4l:ellipsoidal_height":{"label":"Ellipsoidal Height","unit":"m"},"geoadmin:variant":{"label":"Product Variant","mapping":{"krel":"RGB color with relief","komb":"RGB color without relief","kgrel":"Grayscale with relief","kgrs":"Grayscale without relief"}},"href:servers":{"label":"Servers","ext":"web-map-links"},"pmtiles:layers":{"label":"Layers","ext":"web-map-links"},"wms:layers":{"label":"Layers","ext":"web-map-links"},"wms:styles":{"label":"Styles","ext":"web-map-links"},"wms:dimensions":{"label":"Dimensions","ext":"web-map-links"},"wms:transparent":{"label":"Transparency","ext":"web-map-links"},"wmts:layer":{"label":"Layers","ext":"web-map-links"},"wmts:dimensions":{"label":"Dimensions","ext":"web-map-links"}}'),qFt={extensions:BFt,links:zFt,assets:jFt,metadata:UFt};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var qd=function(){return qd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},qd.apply(this,arguments)},Yg="\\d+(?:[\\.,]\\d+)?",HFt="("+Yg+"W)",GFt="("+Yg+"Y)?("+Yg+"M)?("+Yg+"D)?",VFt="T("+Yg+"H)?("+Yg+"M)?("+Yg+"S)?",WFt="^P(?:"+HFt+"|"+GFt+"(?:"+VFt+")?)$",YFt=new RegExp(WFt),JPe=["weeks","years","months","days","hours","minutes","seconds"],QPe={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},XFt=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),ZFt=function(e){var t=e.match(YFt);if(!t)throw new Error("Invalid duration string");var n=t.slice(1).reduce(function(r,i,s){return r[JPe[s]]=parseFloat(i)||0,r},{});return n},KFt=function(e){return e.weeks&&e.weeks>0?Object.assign({},XFt,{weeks:e.weeks}):JPe.reduce(function(t,n){var r;return qd(qd({},t),(r={},r[n]=e[n]||0,r))},{})},XB={locales:{},options:{},setLocales:function(e,t){this.locales=qd(qd({},this.locales),e),t&&(this.options=qd(qd({},this.options),t))},getLangConfig:function(e){var t=this.locales[e];if(!t&&this.options.fallbackLocale&&(t=this.locales[this.options.fallbackLocale]),!t)throw new Error("isoDuration: Translations for language: "+e+" are not provided");return t}},JFt=function(e){for(var t=["years","months","days"],n="",r=0,i=t;r<i.length;r++){var s=i[r];e[s]&&(n+=""+e[s]+QPe[s])}return n},QFt=function(e){for(var t=["hours","minutes","seconds"],n="",r=0,i=t;r<i.length;r++){var s=i[r];e[s]&&(n+=""+e[s]+QPe[s])}return n},eOt=function(e){if(e.weeks>0)return"P"+e.weeks+"W";var t="P",n=JFt(e);n&&(t+=n);var r=QFt(e);return r&&(t+="T"+r),!n&&!r&&(t+="0D"),t},tOt=function(e,t){var n=XB.getLangConfig(t);return e.weeks+" "+n.weeks(e.weeks)},nOt=function(e,t,n){for(var r=XB.getLangConfig(t),i="",s=["years","months","days","hours","minutes","seconds"],o=0,a=0;a<s.length;a++){var l=s[a],u=e[l];if(u&&(i!==""&&(i+=" "),i+=u+" "+r[l](u),o++,n&&n.largest&&n.largest<=o))break}return i},rOt=function(e,t,n){return e.weeks>0?tOt(e,t):nOt(e,t,n)},wM=["seconds","minutes","hours","days","months"],sC=function(e){return function(t){return{nextUnitValue:Math.floor(t/e),value:t%e}}},vSe=function(e,t){return new Date(t,e+1,0).getDate()},iOt={seconds:sC(60),minutes:sC(60),hours:sC(24),days:function(e,t){for(var n=t?new Date(t.getTime()):new Date,r=e,i=0,s=vSe(n.getMonth(),n.getFullYear());r>s;)r=r-s,i++,n.setMonth(n.getMonth()+1),s=vSe(n.getMonth(),n.getFullYear());return{nextUnitValue:i,value:r}},months:sC(12)},sOt=function(e,t){for(var n=qd({},e),r=0;r<wM.length;r++){var i=wM[r],s=n[i];if(s>0){var o=iOt[i](s,t);if(n[i]=o.value,o.nextUnitValue){var a=i==="months"?"years":wM[r+1];n[a]=n[a]+o.nextUnitValue}}}return n},bSe=function(){function e(t){this.durationObj=t}return e.prototype.parse=function(){return this.durationObj},e.prototype.toString=function(){return eOt(this.durationObj)},e.prototype.humanize=function(t,n){return rOt(this.durationObj,t,n)},e.prototype.normalize=function(t){return this.durationObj=sOt(this.durationObj,t),this},e.prototype.isEmpty=function(){var t=this;return Object.keys(this.durationObj).every(function(n){return t.durationObj[n]===0})},e}();function oOt(e){return e<=2?0:e>2&&e<11?1:0}var aOt={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return["",""][oOt(e)]},seconds:function(e){return e===1?"":""},decimal:","};function Ps(e){return Math.floor(e)!==e?2:e%100>=5&&e%100<=20||e%10>=5&&e%10<=9||e%10===0?0:e%10===1?1:e>1?2:0}var lOt={years:function(e){return["","",""][Ps(e)]},months:function(e){return["","",""][Ps(e)]},weeks:function(e){return["","",""][Ps(e)]},days:function(e){return["","",""][Ps(e)]},hours:function(e){return["","",""][Ps(e)]},minutes:function(e){return["","",""][Ps(e)]},seconds:function(e){return["","",""][Ps(e)]},decimal:","},uOt={years:function(e){return"any"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"os")},weeks:function(e){return"setman"+(e===1?"a":"es")},days:function(e){return"di"+(e===1?"a":"es")},hours:function(e){return"hor"+(e===1?"a":"es")},minutes:function(e){return"minut"+(e===1?"":"s")},seconds:function(e){return"segon"+(e===1?"":"s")},decimal:","};function _l(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&e%100<10?2:3}var cOt={years:function(e){return["rok","roku","roky","let"][_l(e)]},months:function(e){return["msc","msce","msce","msc"][_l(e)]},weeks:function(e){return["tden","tdne","tdny","tdn"][_l(e)]},days:function(e){return["den","dne","dny","dn"][_l(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodin"][_l(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][_l(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][_l(e)]},decimal:","},fOt={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uge"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"e")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minut"+(e===1?"":"ter")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},dOt={years:function(e){return"Jahr"+(e===1?"":"e")},months:function(e){return"Monat"+(e===1?"":"e")},weeks:function(e){return"Woche"+(e===1?"":"n")},days:function(e){return"Tag"+(e===1?"":"e")},hours:function(e){return"Stunde"+(e===1?"":"n")},minutes:function(e){return"Minute"+(e===1?"":"n")},seconds:function(e){return"Sekunde"+(e===1?"":"n")},decimal:","},hOt={years:function(e){return"year"+(e===1?"":"s")},months:function(e){return"month"+(e===1?"":"s")},weeks:function(e){return"week"+(e===1?"":"s")},days:function(e){return"day"+(e===1?"":"s")},hours:function(e){return"hour"+(e===1?"":"s")},minutes:function(e){return"minute"+(e===1?"":"s")},seconds:function(e){return"second"+(e===1?"":"s")},decimal:"."},pOt={years:function(e){return"ao"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"es")},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"da"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},mOt={years:function(e){return"aasta"+(e===1?"":"t")},months:function(e){return"kuu"+(e===1?"":"d")},weeks:function(e){return"ndal"+(e===1?"":"at")},days:function(e){return"pev"+(e===1?"":"a")},hours:function(e){return"tund"+(e===1?"":"i")},minutes:function(e){return"minut"+(e===1?"":"it")},seconds:function(e){return"sekund"+(e===1?"":"it")},decimal:","},gOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},yOt={years:function(e){return e===1?"vuosi":"vuotta"},months:function(e){return e===1?"kuukausi":"kuukautta"},weeks:function(e){return"viikko"+(e===1?"":"a")},days:function(e){return"piv"+(e===1?"":"")},hours:function(e){return"tunti"+(e===1?"":"a")},minutes:function(e){return"minuutti"+(e===1?"":"a")},seconds:function(e){return"sekunti"+(e===1?"":"a")},decimal:","},vOt={years:function(){return"r"},months:function(e){return e===1?"mnaur":"mnair"},weeks:function(e){return e===1?"vika":"vikur"},days:function(e){return e===1?"dagur":"dagar"},hours:function(e){return e===1?"tmi":"tmar"},minutes:function(e){return e===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},bOt={years:function(e){return"an"+(e>=2?"s":"")},months:function(){return"mois"},weeks:function(e){return"semaine"+(e>=2?"s":"")},days:function(e){return"jour"+(e>=2?"s":"")},hours:function(e){return"heure"+(e>=2?"s":"")},minutes:function(e){return"minute"+(e>=2?"s":"")},seconds:function(e){return"seconde"+(e>=2?"s":"")},decimal:","},xOt={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:","},wOt={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:"."},_Ot={years:function(e){return e%10===2||e%10===3||e%10===4?"godine":"godina"},months:function(e){return e===1?"mjesec":e===2||e===3||e===4?"mjeseca":"mjeseci"},weeks:function(e){return e%10===1&&e!==11?"tjedan":"tjedna"},days:function(e){return e===1?"dan":"dana"},hours:function(e){return e===1?"sat":e===2||e===3||e===4?"sata":"sati"},minutes:function(e){var t=e%10;return(t===2||t===3||t===4)&&(e<10||e>14)?"minute":"minuta"},seconds:function(e){return e===10||e===11||e===12||e===13||e===14||e===16||e===17||e===18||e===19||e%10===5?"sekundi":e%10===1?"sekunda":e%10===2||e%10===3||e%10===4?"sekunde":"sekundi"},decimal:","},EOt={years:function(){return"v"},months:function(){return"hnap"},weeks:function(){return"ht"},days:function(){return"nap"},hours:function(){return"ra"},minutes:function(){return"perc"},seconds:function(){return"msodperc"},decimal:","},SOt={years:function(){return"r"},months:function(e){return"mnu"+(e===1?"ur":"ir")},weeks:function(e){return"vik"+(e===1?"a":"ur")},days:function(e){return"dag"+(e===1?"ur":"ar")},hours:function(e){return"klukkutm"+(e===1?"i":"ar")},minutes:function(e){return"mnt"+(e===1?"a":"ur")},seconds:function(e){return"seknd"+(e===1?"a":"ur")},decimal:"."},AOt={years:function(e){return"ann"+(e===1?"o":"i")},months:function(e){return"mes"+(e===1?"e":"i")},weeks:function(e){return"settiman"+(e===1?"a":"e")},days:function(e){return"giorn"+(e===1?"o":"i")},hours:function(e){return"or"+(e===1?"a":"e")},minutes:function(e){return"minut"+(e===1?"o":"i")},seconds:function(e){return"second"+(e===1?"o":"i")},decimal:","},COt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},kOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},TOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:","};function Xy(e){return e===1||e%10===1&&e%100>20?0:Math.floor(e)!==e||e%10>=2&&e%100>20||e%10>=2&&e%100<10?1:2}var DOt={years:function(e){return e%10===0||e%100>=10&&e%100<=20?"met":"metai"},months:function(e){return["mnuo","mnesiai","mnesi"][Xy(e)]},weeks:function(e){return["savait","savaits","savaii"][Xy(e)]},days:function(e){return["diena","dienos","dien"][Xy(e)]},hours:function(e){return["valanda","valandos","valand"][Xy(e)]},minutes:function(e){return["minut","minuts","minui"][Xy(e)]},seconds:function(e){return["sekund","sekunds","sekundi"][Xy(e)]},decimal:","};function mg(e){return e===1||e%10===1&&e%100!==11?0:1}var LOt={years:function(e){return["gads","gadi"][mg(e)]},months:function(e){return["mnesis","mnei"][mg(e)]},weeks:function(e){return["neda","nedas"][mg(e)]},days:function(e){return["diena","dienas"][mg(e)]},hours:function(e){return["stunda","stundas"][mg(e)]},minutes:function(e){return["minte","mintes"][mg(e)]},seconds:function(e){return["sekunde","sekundes"][mg(e)]},decimal:","},ROt={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},FOt={years:function(){return"jaar"},months:function(e){return e===1?"maand":"maanden"},weeks:function(e){return e===1?"week":"weken"},days:function(e){return e===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(e){return e===1?"minuut":"minuten"},seconds:function(e){return e===1?"seconde":"seconden"},decimal:","},OOt={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uke"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"er")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minutt"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","};function gg(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&!(e%100>10&&e%100<20)?2:3}var MOt={years:function(e){return["rok","roku","lata","lat"][gg(e)]},months:function(e){return["miesic","miesica","miesice","miesicy"][gg(e)]},weeks:function(e){return["tydzie","tygodnia","tygodnie","tygodni"][gg(e)]},days:function(e){return["dzie","dnia","dni","dni"][gg(e)]},hours:function(e){return["godzina","godziny","godziny","godzin"][gg(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][gg(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][gg(e)]},decimal:","},$Ot={years:function(e){return"ano"+(e===1?"":"s")},months:function(e){return e===1?"ms":"meses"},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"dia"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},IOt={years:function(e){return e===1?"an":"ani"},months:function(e){return e===1?"lun":"luni"},weeks:function(e){return e===1?"sptmn":"sptmni"},days:function(e){return e===1?"zi":"zile"},hours:function(e){return e===1?"or":"ore"},minutes:function(e){return e===1?"minut":"minute"},seconds:function(e){return e===1?"secund":"secunde"},decimal:","},POt={years:function(e){return["","",""][Ps(e)]},months:function(e){return["","",""][Ps(e)]},weeks:function(e){return["","",""][Ps(e)]},days:function(e){return["","",""][Ps(e)]},hours:function(e){return["","",""][Ps(e)]},minutes:function(e){return["","",""][Ps(e)]},seconds:function(e){return["","",""][Ps(e)]},decimal:","},NOt={years:function(e){return["rok","roky","roky","rokov"][_l(e)]},months:function(e){return["mesiac","mesiace","mesiace","mesiacov"][_l(e)]},weeks:function(e){return["tde","tdne","tdne","tdov"][_l(e)]},days:function(e){return["de","dni","dni","dn"][_l(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodn"][_l(e)]},minutes:function(e){return["minta","minty","minty","mint"][_l(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","seknd"][_l(e)]},decimal:","},BOt={years:function(){return"r"},months:function(e){return"mnad"+(e===1?"":"er")},weeks:function(e){return"veck"+(e===1?"a":"or")},days:function(e){return"dag"+(e===1?"":"ar")},hours:function(e){return"timm"+(e===1?"e":"ar")},minutes:function(e){return"minut"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},zOt={years:function(){return"yl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gn"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},jOt={years:function(e){return["","",""][Ps(e)]},months:function(e){return["","",""][Ps(e)]},weeks:function(e){return["","",""][Ps(e)]},days:function(e){return["","",""][Ps(e)]},hours:function(e){return["","",""][Ps(e)]},minutes:function(e){return["","",""][Ps(e)]},seconds:function(e){return["","",""][Ps(e)]},decimal:","},UOt={years:function(){return""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(){return""},hours:function(e){return e===1?"":""},minutes:function(){return""},seconds:function(){return""},decimal:"."},qOt={years:function(){return"nm"},months:function(){return"thng"},weeks:function(){return"tun"},days:function(){return"ngy"},hours:function(){return"gi"},minutes:function(){return"pht"},seconds:function(){return"giy"},decimal:","},HOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},GOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."};function e8e(e){return typeof e=="string"?new bSe(ZFt(e)):new bSe(KFt(e))}e8e.setLocales=function(e,t){XB.setLocales(e,t)};const VOt=Object.freeze(Object.defineProperty({__proto__:null,ar:aOt,bg:lOt,ca:uOt,cs:cOt,da:fOt,de:dOt,en:hOt,es:pOt,et:mOt,fa:gOt,fi:yOt,fo:vOt,fr:bOt,gr:xOt,he:wOt,hr:_Ot,hu:EOt,is:SOt,isoDuration:e8e,it:AOt,ja:COt,ko:kOt,lo:TOt,lt:DOt,lv:LOt,ms:ROt,nl:FOt,no:OOt,pl:MOt,pt:$Ot,ro:IOt,ru:POt,sk:NOt,sv:BOt,tr:zOt,uk:jOt,ur:UOt,vi:qOt,zhCN:HOt,zhTW:GOt},Symbol.toStringTag,{value:"Module"})),WOt=bCe(VOt);var oC={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var xSe;function YOt(){if(xSe)return oC;xSe=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;oC.format=o,oC.parse=a;function o(c){if(!c||typeof c!="object")throw new TypeError("argument obj is required");var d=c.parameters,h=c.type;if(!h||!s.test(h))throw new TypeError("invalid type");var p=h;if(d&&typeof d=="object")for(var g,v=Object.keys(d).sort(),y=0;y<v.length;y++){if(g=v[y],!n.test(g))throw new TypeError("invalid parameter name");p+="; "+g+"="+u(d[g])}return p}function a(c){if(!c)throw new TypeError("argument string is required");var d=typeof c=="object"?l(c):c;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var h=d.indexOf(";"),p=h!==-1?d.slice(0,h).trim():d.trim();if(!s.test(p))throw new TypeError("invalid media type");var g=new f(p.toLowerCase());if(h!==-1){var v,y,b;for(e.lastIndex=h;y=e.exec(d);){if(y.index!==h)throw new TypeError("invalid parameter format");h+=y[0].length,v=y[1].toLowerCase(),b=y[2],b.charCodeAt(0)===34&&(b=b.slice(1,-1),b.indexOf("\\")!==-1&&(b=b.replace(r,"$1"))),g.parameters[v]=b}if(h!==d.length)throw new TypeError("invalid parameter format")}return g}function l(c){var d;if(typeof c.getHeader=="function"?d=c.getHeader("content-type"):typeof c.headers=="object"&&(d=c.headers&&c.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function u(c){var d=String(c);if(n.test(d))return d;if(d.length>0&&!t.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(i,"\\$1")+'"'}function f(c){this.parameters=Object.create(null),this.type=c}return oC}var d_={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var XOt=d_.exports,wSe;function ZOt(){return wSe||(wSe=1,function(e,t){(function(n,r){r(t)})(XOt,function(n){function r(G){switch(G._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var i=function(G,ue){this.current=G,this.entering=ue===!0},s=function(){var G=this.current,ue=this.entering;if(G===null)return null;var Ae=r(G);return ue&&Ae?G._firstChild?(this.current=G._firstChild,this.entering=!0):this.entering=!1:G===this.root?this.current=null:G._next===null?(this.current=G._parent,this.entering=!1):(this.current=G._next,this.entering=!0),{entering:ue,node:G}},o=function(G){return{current:G,root:G,entering:!0,next:s,resumeAt:i}},a=function(G,ue){this._type=G,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=ue,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(G){this._literal=G}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(G){this._destination=G}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(G){this._title=G}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(G){this._info=G}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(G){this._level=G}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(G){this._listData.type=G}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(G){this._listData.tight=G}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(G){this._listData.start=G}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(G){this._listData.delimiter=G}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(G){this._onEnter=G}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(G){this._onExit=G}}),a.prototype.appendChild=function(G){G.unlink(),G._parent=this,this._lastChild?(this._lastChild._next=G,G._prev=this._lastChild,this._lastChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.prependChild=function(G){G.unlink(),G._parent=this,this._firstChild?(this._firstChild._prev=G,G._next=this._firstChild,this._firstChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(G){G.unlink(),G._next=this._next,G._next&&(G._next._prev=G),G._prev=this,this._next=G,G._parent=this._parent,G._next||(G._parent._lastChild=G)},a.prototype.insertBefore=function(G){G.unlink(),G._prev=this._prev,G._prev&&(G._prev._next=G),G._next=this,this._prev=G,G._parent=this._parent,G._prev||(G._parent._firstChild=G)},a.prototype.walker=function(){var G=new o(this);return G};var u={};function f(G){var ue,Ae,Fe=u[G];if(Fe)return Fe;for(Fe=u[G]=[],ue=0;ue<128;ue++)Ae=String.fromCharCode(ue),/^[0-9a-z]$/i.test(Ae)?Fe.push(Ae):Fe.push("%"+("0"+ue.toString(16).toUpperCase()).slice(-2));for(ue=0;ue<G.length;ue++)Fe[G.charCodeAt(ue)]=G[ue];return Fe}function c(G,ue,Ae){var Fe,ft,lt,bn,Bt,On="";for(typeof ue!="string"&&(Ae=ue,ue=c.defaultChars),typeof Ae>"u"&&(Ae=!0),Bt=f(ue),Fe=0,ft=G.length;Fe<ft;Fe++){if(lt=G.charCodeAt(Fe),Ae&&lt===37&&Fe+2<ft&&/^[0-9a-f]{2}$/i.test(G.slice(Fe+1,Fe+3))){On+=G.slice(Fe,Fe+3),Fe+=2;continue}if(lt<128){On+=Bt[lt];continue}if(lt>=55296&&lt<=57343){if(lt>=55296&&lt<=56319&&Fe+1<ft&&(bn=G.charCodeAt(Fe+1),bn>=56320&&bn<=57343)){On+=encodeURIComponent(G[Fe]+G[Fe+1]),Fe++;continue}On+="%EF%BF%BD";continue}On+=encodeURIComponent(G[Fe])}return On}c.defaultChars=";/?:@&=+$,-_.!~*'()#",c.componentChars="-_.!~*'()";var d=c,h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Yi<"u"?Yi:typeof self<"u"?self:{};function p(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}function g(G,ue){return ue={exports:{}},G(ue,ue.exports),ue.exports}function v(G){return G&&G.default||G}var y="",b="",w="",E="",A="",T="",D="",k="",R="",O="",B="",K="",L="",$="",I="",U="",q="",Y="",X="",te="",le="",ee="",z="",he="",de="",ze="",He="&",je="&",we="",Ie="",qe="",Pe="",At="",ht="",nn="",Vt="",Mn="",Ze="",pe="",ie="",oe="",be="",F="",H="",J="",re="",ye="",xe="",Re="",P="",Q="",se="",ae="",ke="",Ce="",Ee="",De="",Oe="",We="",tt="",dt="",Kt="'",xt="",Qt="",rn="",sn="",on="",Tn="",Er="",Ki="",ds="*",Hi="",No="",qn="",Mr="",Lr="",gn="",Kr="",sr="",Ni="",tr="",$r="",to="",ge="",Le="",it="",Ke="",Et="",an="",en="",wt="",et="",hn="",An="",zt="",jt="",Sr="",ci="",Zt="",Xe="",pt="",Xn="",ni="",Ar="",Rr="",nr="",qt="",vi="",Ji="",bi="",js="",xo="",no="",Bo="",bs="",Fs="",zo="",hs="",ol="",al="",Cr="",Qi="",ro="",Os="",Us="",fa="",qs="",ll="",Gi="",Vi="",io="",ps="",jo="",Hs="",fi="=",Ma="",so="",Wi="",oo="",ul="",Ht="",Z="",me="",Be="",yt="",pn="",It="",In="",dr="",kr="",Ln="",Ai="",Jr="",or="",di="",xs="",Gs="",Bi="",zi="",wo="",Hr="",da="",Gu="",cl="",fl="",Vc="",Vu="",ne="",_e="",Ye="",vt="",Jt="",Ut="",Sn="",pr="",Ir="",es="",ws="",xi="",Li="",Te="",ut="",Wt="",Vn="",mr="",Pn="",ji="",$a="",Sb="",mS="",Ab="",Cb="",Sh="",kb="",Tb="",W0="",_m="",Db="\\",Em="",dl="",Lb="",Y0="",X0="",Rb="",Fb="",Z0="",gS="",yS="",vS="",od="",ad="",K0="",J0="",Ob="",Q0="",Wc="",Yc="",_o="",Wu="",Yu="",Sm="",Mb="",Ah="",$b="",ey="",Am="",bS="",ty="",Ib="",ny="",ry="",ld="",Cm="",Pb="",km="",iy="",sy="",ud="",Ch="",Tm="",Nb="",kh="",Bb="",Xc="",Th="",Zc="",Dh="",cd="",zb="",jb="",Ub="",xS="",Kc="",Jc="",wS="",_S="",ES="",SS="",AS="",Uo="",_s="",ao="",Es="",Lh="",CS="",Dm="",kS="",oy="",qb="",ay="",ly=":",uy="",Hb="",Gb="",cy="",Vb=",",Rh="@",TS="",Lm="",hu="",Wb="",DS="",Yb="",ha="",Pr="",hl="",Xu="",Zu="",Xb="",fy="",Zb="",dy="",Fh="",Kb="",hy="",Ku="",Jb="",Qb="",Rm="",py="",ex="",tx="",LS="",Fm="",nx="",RS="",rx="",fd="",my="",Om="",ix="",gy="",sx="",ox="",Vs="",Mm="",ax="",lx="",ux="",dd="",$m="",cx="",fx="",dx="",hd="",hx="",Im="",px="",Oh="",pd="",mx="",gx="",yx="",Mh="",$h="",Ih="",Ph="",vx="",bx="",Ju="",md="",Nh="",xx="",FS="",OS="",Eo="",wx="",MS="",_x="",Ex="",Sx="",$S="",IS="",Qu="",Bh="",Pm="",zh="",pu="",PS="",NS="",gd="",Ax="",Cx="",kx="",Nm="",yd="",yy="",vy="",by="",jh="`",Tx="",Dx="",Bm="",BS="",Uh="",Lx="",Rx="",xy="",Fx="",Ox="",Mx="",qh="",Hh="",wy="",$x="",Ix="",Px="",_y="",Nx="$",Bx="",vd="",zx="",zm="",zS="",jS="",Ri="",Ey="",Gh="",pl="",jm="",Sy="",jx="",Ux="",qx="",Hx="",Gx="",Ay="",Vx="",Qr="",Wx="",bd="",Um="",US="",ts="",qS="",qm="",m="",x="",S="",_="",C="",M="",N="",j="",V="",W="",ce="",fe="",Se="",ve="",$e="",Ne="",Me="",Ve="",nt="",Je="",mt="",ct="",gt="",vn="",Mt="",Hn="",fn="",ar="",Nr="",lr="",Zn="",ur="",$n="",Br="",Fn="",Jn="",Nn="",vr="",lo="",zr="",Ws="",Ys="",Ci="",uo="",Ia="",Ms="",ml="",Hm="",Yx="",Qc="",qo="",ec="",HS="",xd="",Cy="",Vh="",Gm="",Wh="",ky="",Xx="",Ty="",Zx="",Kx="",Jx="",bz="",xz="",wz="",_z="",Ez="",Sz="",Az="",Cz="",kz="",Tz="",Dz="",Lz="",Rz="",Fz="",Oz="",Mz="",$z="",Iz="",Pz="",Nz="",Bz="",zz="",jz="",Uz="",qz="",Hz="",Gz="",Vz="",Wz="",Yz="",Xz="",Zz="",Kz="=",Jz="",Qz="",ej="",tj="",nj="",rj="",ij="",sj="",oj="",aj="",lj="",uj="",cj="",fj="",dj="",hj="",pj="",mj="",gj="",yj="",vj="!",bj="",xj="",wj="",_j="",Ej="",Sj="",Aj="",Cj="",kj="",Tj="",Dj="",Lj="",Rj="",Fj="",Oj="",Mj="",$j="",Ij="fj",Pj="",Nj="",Bj="",zj="",jj="",Uj="",qj="",Hj="",Gj="",Vj="",Wj="",Yj="",Xj="",Zj="",Kj="",Jj="",Qj="",eU="",tU="",nU="",rU="",iU="",sU="",oU="",aU="",lU="",uU="",cU="",fU="",dU="",hU="",pU="",mU="",gU="",yU="",vU="",bU="",xU="",wU="",_U="",EU="",SU="",AU="",CU="",kU="",TU="",DU="",LU="",RU="",FU="",OU="",MU="",$U="",IU="",PU="",NU="",BU="",zU="",jU="",UU="",qU="",HU="",GU="",VU="",WU="",YU="",XU="",ZU="",KU="",JU="",QU="",eq="",tq="",nq="",rq="",iq="",sq="",oq="",aq="",lq="",uq="",cq="`",fq="",dq="",hq="",pq="",mq="",gq="",yq="",vq="",bq="",xq="",wq="",_q="",Eq="",Sq="",Aq=">",Cq=">",kq="",Tq="",Dq="",Lq="",Rq="",Fq="",Oq="",Mq="",$q="",Iq="",Pq="",Nq="",Bq="",zq="",jq="",Uq="",qq="",Hq="",Gq="",Vq="",Wq="",Yq="",Xq="",Zq="^",Kq="",Jq="",Qq="",eH="",tH="",nH="",rH="",iH="",sH="",oH="",aH="",lH="",uH="",cH="",fH="",dH="",hH="",pH="",mH="",gH="",yH="",vH="",bH="",xH="",wH="",_H="",EH="",SH="",AH="",CH="",kH="",TH="",DH="",LH="",RH="",FH="",OH="",MH="",$H="",IH="",PH="",NH="",BH="",zH="",jH="",UH="",qH="",HH="",GH="",VH="",WH="",YH="",XH="",ZH="",KH="",JH="",QH="",eG="",tG="",nG="",rG="",iG="",sG="",oG="",aG="",lG="",uG="",cG="",fG="",dG="",hG="",pG="",mG="",gG="",yG="",vG="",bG="",xG="",wG="",_G="",EG="",SG="",AG="",CG="",kG="",TG="",DG="",LG="",RG="",FG="",OG="",MG="",$G="",IG="",PG="",NG="",BG="",zG="",jG="",UG="",qG="",HG="",GG="",VG="",WG="",YG="",XG="",ZG="",KG="",JG="",QG="",eV="",tV="",nV="",rV="",iV="",sV="",oV="",aV="",lV="",uV="",cV="",fV="",dV="",hV="",pV="",mV="",gV="",yV="",vV="",bV="",xV="",wV="",_V="",EV="",SV="",AV="",CV="",kV="",TV="",DV="",LV="",RV="",FV="",OV="",MV="",$V="",IV="",PV="",NV="",BV="",zV="",jV="",UV="",qV="",HV="",GV="",VV="",WV="",YV="",XV="",ZV="",KV="",JV="",QV="",eW="",tW="",nW="",rW="",iW="{",sW="[",oW="",aW="",lW="",uW="",cW="",fW="",dW="",hW="",pW="{",mW="",gW="",yW="",vW="",bW="",xW="",wW="",_W="",EW="",SW="",AW="",CW="",kW="",TW="",DW="",LW="",RW="",FW="",OW="",MW="",$W="",IW="",PW="",NW="",BW="",zW="",jW="",UW="",qW="",HW="",GW="",VW="",WW="",YW="",XW="",ZW="",KW="",JW="",QW="",eY="",tY="",nY="",rY="",iY="",sY="",oY="",aY="",lY="",uY="",cY="",fY="",dY="",hY="",pY="",mY="",gY="",yY="",vY="",bY="",xY="",wY="",_Y="",EY="",SY="",AY="",CY="",kY="",TY="",DY="",LY="",RY="",FY="",OY="",MY="",$Y="",IY="",PY="",NY="",BY="",zY="",jY="",UY="",qY="",HY="",GY="",VY="",WY="",YY="",XY="",ZY="",KY="",JY="",QY="",eX="",tX="",nX="",rX="",iX="",sX="",oX="",aX="",lX="",uX="",cX="",fX="",dX="",hX="",pX="",mX="",gX="",yX="",vX="",bX="",xX="",wX="",_X="",EX="",SX="",AX="",CX="",kX="",TX="",DX="_",LX="",RX="",FX="",OX="",MX="",$X="(",IX="",PX="",NX="",BX="",zX="",jX="",UX="",qX="",HX="",GX="",VX="",WX="",YX="",XX="",ZX="",KX="[",JX="",QX="",eZ="",tZ="",nZ="",rZ="",iZ="<",sZ="<",oZ="",aZ="",lZ="",uZ="",cZ="",fZ="",dZ="",hZ="",pZ="",mZ="",gZ="",yZ="",vZ="",bZ="",xZ="",wZ="",_Z="",EZ="",SZ="",AZ="",CZ="",kZ="",TZ="",DZ="",LZ="",RZ="",FZ="",OZ="",MZ="",$Z="",IZ="",PZ="",NZ="",BZ="",zZ="",jZ="",UZ="*",qZ="",HZ="",GZ="",VZ="",WZ="",YZ="",XZ="",ZZ="",KZ="",JZ="",QZ="",eK="",tK="",nK="",rK="",iK="",sK="",oK="",aK="",lK="",uK="",cK="",fK="",dK="",hK="",pK="",mK="",gK="",yK="",vK="",bK="",xK="",wK="",_K="",EK="",SK="",AK="",CK="",kK="",TK="",DK="",LK="",RK="",FK="",OK="",MK="",$K="",IK="",PK="",NK="",BK="",zK="",jK="",UK="",qK="",HK="",GK="",VK="",WK="",YK="",XK="",ZK="",KK="",JK=`
`,QK="",eJ="",tJ="",nJ="",rJ="",iJ="",sJ="",oJ="",aJ="",lJ="",uJ="",cJ="",fJ="",dJ="",hJ="",pJ="",mJ="",gJ="",yJ="",vJ="",bJ="",xJ="",wJ="",_J="",EJ="",SJ="",AJ="",CJ="",kJ="",TJ="",DJ="",LJ="",RJ="",FJ="",OJ="",MJ="",$J="",IJ="",PJ="",NJ="",BJ="",zJ="",jJ="",UJ="",qJ="",HJ="",GJ="",VJ="",WJ="",YJ="",XJ="",ZJ="",KJ="",JJ="",QJ="",eQ="",tQ="",nQ="",rQ="",iQ="",sQ="",oQ="",aQ="",lQ="",uQ="",cQ="",fQ="",dQ="",hQ="",pQ="",mQ="",gQ="",yQ="",vQ="",bQ="",xQ="",wQ="",_Q="",EQ="",SQ="",AQ="",CQ="",kQ="",TQ="",DQ="",LQ="",RQ="",FQ="",OQ="",MQ="",$Q="",IQ="",PQ="",NQ="",BQ="",zQ="",jQ="",UQ="",qQ="",HQ="",GQ="",VQ="",WQ="",YQ="",XQ="",ZQ="",KQ="",JQ="",QQ="",eee="",tee="",nee="",ree="",iee="",see="",oee="",aee="",lee="",uee="",cee="",fee="",dee="",hee="",pee="",mee="",gee="",yee="",vee="",bee="",xee="",wee="",_ee="",Eee="",See="",Aee="",Cee="",kee="",Tee="",Dee="",Lee="",Ree="",Fee="",Oee="",Mee="",$ee="",Iee="",Pee="",Nee="",Bee="",zee="",jee="",Uee="",qee="",Hee="",Gee="",Vee="",Wee="",Yee="",Xee="",Zee="",Kee="",Jee="",Qee="",ete="",tte="",nte="",rte="",ite="",ste="",ote="",ate="#",lte="",ute="",cte="",fte="",dte="",hte="",pte="",mte="",gte=">",yte="",vte="",bte="",xte="",wte="<",_te="",Ete="",Ste="",Ate="",Cte="",kte="",Tte="",Dte="",Lte="",Rte="",Fte="",Ote="",Mte="",$te="",Ite="",Pte="",Nte="",Bte="",zte="",jte="",Ute="",qte="",Hte="",Gte="",Vte="",Wte="",Yte="",Xte="",Zte="",Kte="",Jte="",Qte="",ene="",tne="",nne="",rne="",ine="",sne="",one="",ane="",lne="",une="",cne="",fne="",dne="",hne="",pne="",mne="",gne="",yne="",vne="",bne="",xne="",wne="",_ne="",Ene="",Sne="",Ane="",Cne="",kne="",Tne="",Dne="",Lne="",Rne="",Fne="",One="",Mne="",$ne="",Ine="",Pne="",Nne="",Bne="",zne="",jne="",Une="",qne="",Hne="",Gne="",Vne="",Wne="",Yne="",Xne="",Zne="",Kne="",Jne="",Qne="",ere="",tre="",nre="",rre="",ire="",sre="",ore="",are="",lre="%",ure=".",cre="",fre="",dre="",hre="",pre="",mre="",gre="",yre="",vre="",bre="",xre="",wre="",_re="",Ere="",Sre="",Are="",Cre="",kre="",Tre="",Dre="",Lre="+",Rre="",Fre="",Ore="",Mre="",$re="",Ire="",Pre="",Nre="",Bre="",zre="",jre="",Ure="",qre="",Hre="",Gre="",Vre="",Wre="",Yre="",Xre="",Zre="",Kre="",Jre="",Qre="",eie="",tie="",nie="",rie="",iie="",sie="",oie="",aie="",lie="",uie="",cie="",fie="",die="",hie="",pie="",mie="",gie="",yie="",vie="",bie="",xie="",wie="",_ie="",Eie="",Sie="",Aie="",Cie="",kie="",Tie="",Die="",Lie="",Rie="",Fie="",Oie="",Mie="",$ie="",Iie="",Pie="",Nie="",Bie="",zie="?",jie="",Uie='"',qie='"',Hie="",Gie="",Vie="",Wie="",Yie="",Xie="",Zie="",Kie="",Jie="",Qie="",ese="",tse="",nse="",rse="",ise="",sse="",ose="",ase="",lse="",use="",cse="",fse="",dse="",hse="",pse="",mse="",gse="",yse="",vse="",bse="",xse="",wse="",_se="",Ese="",Sse="",Ase="}",Cse="]",kse="",Tse="",Dse="",Lse="",Rse="",Fse="",Ose="",Mse="",$se="}",Ise="",Pse="",Nse="",Bse="",zse="",jse="",Use="",qse="",Hse="",Gse="",Vse="",Wse="",Yse="",Xse="",Zse="",Kse="",Jse="",Qse="",eoe="",toe="",noe="",roe="",ioe="",soe="",ooe="",aoe="",loe="",uoe="",coe="",foe="",doe="",hoe="",poe="",moe="",goe="",yoe="",voe="",boe="",xoe="",woe="",_oe="",Eoe="",Soe="",Aoe="",Coe="",koe="",Toe="",Doe="",Loe="",Roe="",Foe="",Ooe="",Moe="",$oe="",Ioe="",Poe="",Noe="",Boe="",zoe="",joe="",Uoe="",qoe="",Hoe="",Goe="",Voe="",Woe="",Yoe="",Xoe="",Zoe="",Koe="",Joe="",Qoe="",eae="",tae="",nae="",rae="",iae="",sae="",oae=")",aae="",lae="",uae="",cae="",fae="",dae="",hae="",pae="",mae="",gae="]",yae="",vae="",bae="",xae="",wae="",_ae="",Eae="",Sae="",Aae="",Cae="",kae="",Tae="",Dae="",Lae="",Rae="",Fae="",Oae="",Mae="",$ae="",Iae="",Pae="",Nae="",Bae="",zae="",jae="",Uae="",qae="",Hae="",Gae="",Vae="",Wae="",Yae="",Xae="",Zae="",Kae="",Jae="",Qae="",ele="",tle="",nle="",rle="",ile=";",sle="",ole="",ale="",lle="",ule="",cle="",fle="",dle="",hle="",ple="",mle="",gle="",yle="",vle="",ble="",xle="",wle="",_le="",Ele="",Sle="",Ale="",Cle="",kle="",Tle="",Dle="",Lle="",Rle="",Fle="",Ole="",Mle="",$le="",Ile="",Ple="",Nle="",Ble="",zle="",jle="",Ule="",qle="",Hle="",Gle="",Vle="",Wle="",Yle="",Xle="",Zle="",Kle="",Jle="",Qle="/",eue="",tue="",nue="",rue="",iue="",sue="",oue="",aue="",lue="",uue="",cue="",fue="",due="",hue="",pue="",mue="",gue="",yue="",vue="",bue="",xue="",wue="",_ue="",Eue="",Sue="",Aue="",Cue="",kue="",Tue="",Due="",Lue="",Rue="",Fue="",Oue="",Mue="",$ue="",Iue="",Pue="",Nue="",Bue="",zue="",jue="",Uue="",que="",Hue="",Gue="",Vue="",Wue="",Yue="",Xue="",Zue="",Kue="",Jue="",Que="",ece="",tce="",nce="",rce="",ice="",sce="",oce="",ace="",lce="",uce="",cce="",fce="",dce="",hce="",pce="",mce="",gce="",yce="",vce="",bce="",xce="",wce="",_ce="",Ece="",Sce="",Ace="",Cce="",kce="",Tce="",Dce="",Lce="",Rce="",Fce="",Oce="",Mce="",$ce="",Ice="",Pce="",Nce="",Bce="",zce="",jce="",Uce="",qce="",Hce="",Gce="",Vce="",Wce="",Yce="",Xce="",Zce="",Kce="",Jce="",Qce="",efe="",tfe="",nfe="",rfe="",ife="	",sfe="",ofe="",afe="",lfe="",ufe="",cfe="",ffe="",dfe="",hfe="",pfe="",mfe="",gfe="",yfe="",vfe="",bfe="",xfe="",wfe="",_fe="",Efe="",Sfe="",Afe="",Cfe="",kfe="",Tfe="",Dfe="",Lfe="",Rfe="",Ffe="",Ofe="",Mfe="",$fe="",Ife="",Pfe="",Nfe="",Bfe="",zfe="",jfe="",Ufe="",qfe="",Hfe="",Gfe="",Vfe="",Wfe="",Yfe="",Xfe="",Zfe="",Kfe="",Jfe="",Qfe="",ede="",tde="",nde="",rde="",ide="",sde="",ode="",ade="",lde="",ude="",cde="",fde="",dde="",hde="",pde="",mde="",gde="",yde="",vde="",bde="",xde="",wde="",_de="",Ede="",Sde="",Ade="",Cde="",kde="",Tde="",Dde="",Lde="",Rde="",Fde="",Ode="",Mde="",$de="",Ide="",Pde="",Nde="",Bde="",zde="",jde="",Ude="",qde="",Hde="",Gde="",Vde="",Wde="",Yde="",Xde="",Zde="",Kde="",Jde="",Qde="",ehe="",the="",nhe="",rhe="",ihe="",she="",ohe="",ahe="",lhe="_",uhe="",che="",fhe="",dhe="",hhe="",phe="",mhe="",ghe="",yhe="",vhe="",bhe="",xhe="",whe="",_he="",Ehe="",She="",Ahe="",Che="",khe="",The="",Dhe="",Lhe="",Rhe="",Fhe="",Ohe="",Mhe="",$he="",Ihe="",Phe="",Nhe="",Bhe="",zhe="",jhe="",Uhe="",qhe="",Hhe="",Ghe="",Vhe="",Whe="",Yhe="",Xhe="",Zhe="",Khe="",Jhe="",Qhe="",epe="",tpe="",npe="",rpe="",ipe="",spe="",ope="",ape="",lpe="",upe="",cpe="",fpe="",dpe="",hpe="",ppe="",mpe="",gpe="",ype="",vpe="",bpe="",xpe="",wpe="",_pe="",Epe="",Spe="",Ape="",Cpe="",kpe="",Tpe="",Dpe="",Lpe="",Rpe="",Fpe="",Ope="",Mpe="",$pe="",Ipe="|",Ppe="",Npe="|",Bpe="",zpe="",jpe="|",Upe="",qpe="",Hpe="",Gpe="",Vpe="",Wpe="",Ype="",Xpe="",Zpe="",Kpe="",Jpe="",Qpe="",eme="",tme="",nme="",rme="",ime="",sme="",ome="",ame="",lme="",ume="",cme="",fme="",dme="",hme="",pme="",mme="",gme="",yme="",vme="",bme="",xme="",wme="",_me="",Eme="",Sme="",Ame="",Cme="",kme="",Tme="",Dme="",Lme="",Rme="",Fme="",Ome="",Mme="",$me="",Ime="",Pme="",Nme="",Bme="",zme="",jme="",Ume="",qme="",Hme="",Gme="",Vme="",Wme="",Yme="",Xme="",Zme="",Kme="",Jme="",Qme="",ege="",tge="",nge="",rge="",ige="",sge="",oge="",age="",lge="",uge="",cge="",fge="",dge="",hge="",pge="",mge="",gge="",yge="",vge="",bge="",xge="",wge="",_ge="",Ege="",Sge="",Age="",Cge="",kge="",Tge="",Dge="",Lge="",Rge="",Fge="",Oge="",Mge="",$ge="",Ige="",Pge="",Nge="",Bge="",zge="",jge="",r9e={Aacute:y,aacute:b,Abreve:w,abreve:E,ac:A,acd:T,acE:D,Acirc:k,acirc:R,acute:O,Acy:B,acy:K,AElig:L,aelig:$,af:I,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:de,amalg:ze,amp:He,AMP:je,andand:we,And:Ie,and:qe,andd:Pe,andslope:At,andv:ht,ang:nn,ange:Vt,angle:Mn,angmsdaa:Ze,angmsdab:pe,angmsdac:ie,angmsdad:oe,angmsdae:be,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:se,Aogon:ae,aogon:ke,Aopf:Ce,aopf:Ee,apacir:De,ap:Oe,apE:We,ape:tt,apid:dt,apos:Kt,ApplyFunction:xt,approx:Qt,approxeq:rn,Aring:sn,aring:on,Ascr:Tn,ascr:Er,Assign:Ki,ast:ds,asymp:Hi,asympeq:No,Atilde:qn,atilde:Mr,Auml:Lr,auml:gn,awconint:Kr,awint:sr,backcong:Ni,backepsilon:tr,backprime:$r,backsim:to,backsimeq:ge,Backslash:Le,Barv:it,barvee:Ke,barwed:Et,Barwed:an,barwedge:en,bbrk:wt,bbrktbrk:et,bcong:hn,Bcy:An,bcy:zt,bdquo:jt,becaus:Sr,because:ci,Because:Zt,bemptyv:Xe,bepsi:pt,bernou:Xn,Bernoullis:ni,Beta:Ar,beta:Rr,beth:nr,between:qt,Bfr:vi,bfr:Ji,bigcap:bi,bigcirc:js,bigcup:xo,bigodot:no,bigoplus:Bo,bigotimes:bs,bigsqcup:Fs,bigstar:zo,bigtriangledown:hs,bigtriangleup:ol,biguplus:al,bigvee:Cr,bigwedge:Qi,bkarow:ro,blacklozenge:Os,blacksquare:Us,blacktriangle:fa,blacktriangledown:qs,blacktriangleleft:ll,blacktriangleright:Gi,blank:Vi,blk12:io,blk14:ps,blk34:jo,block:Hs,bne:fi,bnequiv:Ma,bNot:so,bnot:Wi,Bopf:oo,bopf:ul,bot:Ht,bottom:Z,bowtie:me,boxbox:Be,boxdl:yt,boxdL:pn,boxDl:It,boxDL:In,boxdr:dr,boxdR:kr,boxDr:Ln,boxDR:Ai,boxh:Jr,boxH:or,boxhd:di,boxHd:xs,boxhD:Gs,boxHD:Bi,boxhu:zi,boxHu:wo,boxhU:Hr,boxHU:da,boxminus:Gu,boxplus:cl,boxtimes:fl,boxul:Vc,boxuL:Vu,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:vt,boxUr:Jt,boxUR:Ut,boxv:Sn,boxV:pr,boxvh:Ir,boxvH:es,boxVh:ws,boxVH:xi,boxvl:Li,boxvL:Te,boxVl:ut,boxVL:Wt,boxvr:Vn,boxvR:mr,boxVr:Pn,boxVR:ji,bprime:$a,breve:Sb,Breve:mS,brvbar:Ab,bscr:Cb,Bscr:Sh,bsemi:kb,bsim:Tb,bsime:W0,bsolb:_m,bsol:Db,bsolhsub:Em,bull:dl,bullet:Lb,bump:Y0,bumpE:X0,bumpe:Rb,Bumpeq:Fb,bumpeq:Z0,Cacute:gS,cacute:yS,capand:vS,capbrcup:od,capcap:ad,cap:K0,Cap:J0,capcup:Ob,capdot:Q0,CapitalDifferentialD:Wc,caps:Yc,caret:_o,caron:Wu,Cayleys:Yu,ccaps:Sm,Ccaron:Mb,ccaron:Ah,Ccedil:$b,ccedil:ey,Ccirc:Am,ccirc:bS,Cconint:ty,ccups:Ib,ccupssm:ny,Cdot:ry,cdot:ld,cedil:Cm,Cedilla:Pb,cemptyv:km,cent:iy,centerdot:sy,CenterDot:ud,cfr:Ch,Cfr:Tm,CHcy:Nb,chcy:kh,check:Bb,checkmark:Xc,Chi:Th,chi:Zc,circ:Dh,circeq:cd,circlearrowleft:zb,circlearrowright:jb,circledast:Ub,circledcirc:xS,circleddash:Kc,CircleDot:Jc,circledR:wS,circledS:_S,CircleMinus:ES,CirclePlus:SS,CircleTimes:AS,cir:Uo,cirE:_s,cire:ao,cirfnint:Es,cirmid:Lh,cirscir:CS,ClockwiseContourIntegral:Dm,CloseCurlyDoubleQuote:kS,CloseCurlyQuote:oy,clubs:qb,clubsuit:ay,colon:ly,Colon:uy,Colone:Hb,colone:Gb,coloneq:cy,comma:Vb,commat:Rh,comp:TS,compfn:Lm,complement:hu,complexes:Wb,cong:DS,congdot:Yb,Congruent:ha,conint:Pr,Conint:hl,ContourIntegral:Xu,copf:Zu,Copf:Xb,coprod:fy,Coproduct:Zb,copy:dy,COPY:Fh,copysr:Kb,CounterClockwiseContourIntegral:hy,crarr:Ku,cross:Jb,Cross:Qb,Cscr:Rm,cscr:py,csub:ex,csube:tx,csup:LS,csupe:Fm,ctdot:nx,cudarrl:RS,cudarrr:rx,cuepr:fd,cuesc:my,cularr:Om,cularrp:ix,cupbrcap:gy,cupcap:sx,CupCap:ox,cup:Vs,Cup:Mm,cupcup:ax,cupdot:lx,cupor:ux,cups:dd,curarr:$m,curarrm:cx,curlyeqprec:fx,curlyeqsucc:dx,curlyvee:hd,curlywedge:hx,curren:Im,curvearrowleft:px,curvearrowright:Oh,cuvee:pd,cuwed:mx,cwconint:gx,cwint:yx,cylcty:Mh,dagger:$h,Dagger:Ih,daleth:Ph,darr:vx,Darr:bx,dArr:Ju,dash:md,Dashv:Nh,dashv:xx,dbkarow:FS,dblac:OS,Dcaron:Eo,dcaron:wx,Dcy:MS,dcy:_x,ddagger:Ex,ddarr:Sx,DD:$S,dd:IS,DDotrahd:Qu,ddotseq:Bh,deg:Pm,Del:zh,Delta:pu,delta:PS,demptyv:NS,dfisht:gd,Dfr:Ax,dfr:Cx,dHar:kx,dharl:Nm,dharr:yd,DiacriticalAcute:yy,DiacriticalDot:vy,DiacriticalDoubleAcute:by,DiacriticalGrave:jh,DiacriticalTilde:Tx,diam:Dx,diamond:Bm,Diamond:BS,diamondsuit:Uh,diams:Lx,die:Rx,DifferentialD:xy,digamma:Fx,disin:Ox,div:Mx,divide:qh,divideontimes:Hh,divonx:wy,DJcy:$x,djcy:Ix,dlcorn:Px,dlcrop:_y,dollar:Nx,Dopf:Bx,dopf:vd,Dot:zx,dot:zm,DotDot:zS,doteq:jS,doteqdot:Ri,DotEqual:Ey,dotminus:Gh,dotplus:pl,dotsquare:jm,doublebarwedge:Sy,DoubleContourIntegral:jx,DoubleDot:Ux,DoubleDownArrow:qx,DoubleLeftArrow:Hx,DoubleLeftRightArrow:Gx,DoubleLeftTee:Ay,DoubleLongLeftArrow:Vx,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:Wx,DoubleRightArrow:bd,DoubleRightTee:Um,DoubleUpArrow:US,DoubleUpDownArrow:ts,DoubleVerticalBar:qS,DownArrowBar:qm,downarrow:m,DownArrow:x,Downarrow:S,DownArrowUpArrow:_,DownBreve:C,downdownarrows:M,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:fe,DownRightTeeVector:Se,DownRightVectorBar:ve,DownRightVector:$e,DownTeeArrow:Ne,DownTee:Me,drbkarow:Ve,drcorn:nt,drcrop:Je,Dscr:mt,dscr:ct,DScy:gt,dscy:vn,dsol:Mt,Dstrok:Hn,dstrok:fn,dtdot:ar,dtri:Nr,dtrif:lr,duarr:Zn,duhar:ur,dwangle:$n,DZcy:Br,dzcy:Fn,dzigrarr:Jn,Eacute:Nn,eacute:vr,easter:lo,Ecaron:zr,ecaron:Ws,Ecirc:Ys,ecirc:Ci,ecir:uo,ecolon:Ia,Ecy:Ms,ecy:ml,eDDot:Hm,Edot:Yx,edot:Qc,eDot:qo,ee:ec,efDot:HS,Efr:xd,efr:Cy,eg:Vh,Egrave:Gm,egrave:Wh,egs:ky,egsdot:Xx,el:Ty,Element:Zx,elinters:Kx,ell:Jx,els:bz,elsdot:xz,Emacr:wz,emacr:_z,empty:Ez,emptyset:Sz,EmptySmallSquare:Az,emptyv:Cz,EmptyVerySmallSquare:kz,emsp13:Tz,emsp14:Dz,emsp:Lz,ENG:Rz,eng:Fz,ensp:Oz,Eogon:Mz,eogon:$z,Eopf:Iz,eopf:Pz,epar:Nz,eparsl:Bz,eplus:zz,epsi:jz,Epsilon:Uz,epsilon:qz,epsiv:Hz,eqcirc:Gz,eqcolon:Vz,eqsim:Wz,eqslantgtr:Yz,eqslantless:Xz,Equal:Zz,equals:Kz,EqualTilde:Jz,equest:Qz,Equilibrium:ej,equiv:tj,equivDD:nj,eqvparsl:rj,erarr:ij,erDot:sj,escr:oj,Escr:aj,esdot:lj,Esim:uj,esim:cj,Eta:fj,eta:dj,ETH:hj,eth:pj,Euml:mj,euml:gj,euro:yj,excl:vj,exist:bj,Exists:xj,expectation:wj,exponentiale:_j,ExponentialE:Ej,fallingdotseq:Sj,Fcy:Aj,fcy:Cj,female:kj,ffilig:Tj,fflig:Dj,ffllig:Lj,Ffr:Rj,ffr:Fj,filig:Oj,FilledSmallSquare:Mj,FilledVerySmallSquare:$j,fjlig:Ij,flat:Pj,fllig:Nj,fltns:Bj,fnof:zj,Fopf:jj,fopf:Uj,forall:qj,ForAll:Hj,fork:Gj,forkv:Vj,Fouriertrf:Wj,fpartint:Yj,frac12:Xj,frac13:Zj,frac14:Kj,frac15:Jj,frac16:Qj,frac18:eU,frac23:tU,frac25:nU,frac34:rU,frac35:iU,frac38:sU,frac45:oU,frac56:aU,frac58:lU,frac78:uU,frasl:cU,frown:fU,fscr:dU,Fscr:hU,gacute:pU,Gamma:mU,gamma:gU,Gammad:yU,gammad:vU,gap:bU,Gbreve:xU,gbreve:wU,Gcedil:_U,Gcirc:EU,gcirc:SU,Gcy:AU,gcy:CU,Gdot:kU,gdot:TU,ge:DU,gE:LU,gEl:RU,gel:FU,geq:OU,geqq:MU,geqslant:$U,gescc:IU,ges:PU,gesdot:NU,gesdoto:BU,gesdotol:zU,gesl:jU,gesles:UU,Gfr:qU,gfr:HU,gg:GU,Gg:VU,ggg:WU,gimel:YU,GJcy:XU,gjcy:ZU,gla:KU,gl:JU,glE:QU,glj:eq,gnap:tq,gnapprox:nq,gne:rq,gnE:iq,gneq:sq,gneqq:oq,gnsim:aq,Gopf:lq,gopf:uq,grave:cq,GreaterEqual:fq,GreaterEqualLess:dq,GreaterFullEqual:hq,GreaterGreater:pq,GreaterLess:mq,GreaterSlantEqual:gq,GreaterTilde:yq,Gscr:vq,gscr:bq,gsim:xq,gsime:wq,gsiml:_q,gtcc:Eq,gtcir:Sq,gt:Aq,GT:Cq,Gt:kq,gtdot:Tq,gtlPar:Dq,gtquest:Lq,gtrapprox:Rq,gtrarr:Fq,gtrdot:Oq,gtreqless:Mq,gtreqqless:$q,gtrless:Iq,gtrsim:Pq,gvertneqq:Nq,gvnE:Bq,Hacek:zq,hairsp:jq,half:Uq,hamilt:qq,HARDcy:Hq,hardcy:Gq,harrcir:Vq,harr:Wq,hArr:Yq,harrw:Xq,Hat:Zq,hbar:Kq,Hcirc:Jq,hcirc:Qq,hearts:eH,heartsuit:tH,hellip:nH,hercon:rH,hfr:iH,Hfr:sH,HilbertSpace:oH,hksearow:aH,hkswarow:lH,hoarr:uH,homtht:cH,hookleftarrow:fH,hookrightarrow:dH,hopf:hH,Hopf:pH,horbar:mH,HorizontalLine:gH,hscr:yH,Hscr:vH,hslash:bH,Hstrok:xH,hstrok:wH,HumpDownHump:_H,HumpEqual:EH,hybull:SH,hyphen:AH,Iacute:CH,iacute:kH,ic:TH,Icirc:DH,icirc:LH,Icy:RH,icy:FH,Idot:OH,IEcy:MH,iecy:$H,iexcl:IH,iff:PH,ifr:NH,Ifr:BH,Igrave:zH,igrave:jH,ii:UH,iiiint:qH,iiint:HH,iinfin:GH,iiota:VH,IJlig:WH,ijlig:YH,Imacr:XH,imacr:ZH,image:KH,ImaginaryI:JH,imagline:QH,imagpart:eG,imath:tG,Im:nG,imof:rG,imped:iG,Implies:sG,incare:oG,in:"",infin:aG,infintie:lG,inodot:uG,intcal:cG,int:fG,Int:dG,integers:hG,Integral:pG,intercal:mG,Intersection:gG,intlarhk:yG,intprod:vG,InvisibleComma:bG,InvisibleTimes:xG,IOcy:wG,iocy:_G,Iogon:EG,iogon:SG,Iopf:AG,iopf:CG,Iota:kG,iota:TG,iprod:DG,iquest:LG,iscr:RG,Iscr:FG,isin:OG,isindot:MG,isinE:$G,isins:IG,isinsv:PG,isinv:NG,it:BG,Itilde:zG,itilde:jG,Iukcy:UG,iukcy:qG,Iuml:HG,iuml:GG,Jcirc:VG,jcirc:WG,Jcy:YG,jcy:XG,Jfr:ZG,jfr:KG,jmath:JG,Jopf:QG,jopf:eV,Jscr:tV,jscr:nV,Jsercy:rV,jsercy:iV,Jukcy:sV,jukcy:oV,Kappa:aV,kappa:lV,kappav:uV,Kcedil:cV,kcedil:fV,Kcy:dV,kcy:hV,Kfr:pV,kfr:mV,kgreen:gV,KHcy:yV,khcy:vV,KJcy:bV,kjcy:xV,Kopf:wV,kopf:_V,Kscr:EV,kscr:SV,lAarr:AV,Lacute:CV,lacute:kV,laemptyv:TV,lagran:DV,Lambda:LV,lambda:RV,lang:FV,Lang:OV,langd:MV,langle:$V,lap:IV,Laplacetrf:PV,laquo:NV,larrb:BV,larrbfs:zV,larr:jV,Larr:UV,lArr:qV,larrfs:HV,larrhk:GV,larrlp:VV,larrpl:WV,larrsim:YV,larrtl:XV,latail:ZV,lAtail:KV,lat:JV,late:QV,lates:eW,lbarr:tW,lBarr:nW,lbbrk:rW,lbrace:iW,lbrack:sW,lbrke:oW,lbrksld:aW,lbrkslu:lW,Lcaron:uW,lcaron:cW,Lcedil:fW,lcedil:dW,lceil:hW,lcub:pW,Lcy:mW,lcy:gW,ldca:yW,ldquo:vW,ldquor:bW,ldrdhar:xW,ldrushar:wW,ldsh:_W,le:EW,lE:SW,LeftAngleBracket:AW,LeftArrowBar:CW,leftarrow:kW,LeftArrow:TW,Leftarrow:DW,LeftArrowRightArrow:LW,leftarrowtail:RW,LeftCeiling:FW,LeftDoubleBracket:OW,LeftDownTeeVector:MW,LeftDownVectorBar:$W,LeftDownVector:IW,LeftFloor:PW,leftharpoondown:NW,leftharpoonup:BW,leftleftarrows:zW,leftrightarrow:jW,LeftRightArrow:UW,Leftrightarrow:qW,leftrightarrows:HW,leftrightharpoons:GW,leftrightsquigarrow:VW,LeftRightVector:WW,LeftTeeArrow:YW,LeftTee:XW,LeftTeeVector:ZW,leftthreetimes:KW,LeftTriangleBar:JW,LeftTriangle:QW,LeftTriangleEqual:eY,LeftUpDownVector:tY,LeftUpTeeVector:nY,LeftUpVectorBar:rY,LeftUpVector:iY,LeftVectorBar:sY,LeftVector:oY,lEg:aY,leg:lY,leq:uY,leqq:cY,leqslant:fY,lescc:dY,les:hY,lesdot:pY,lesdoto:mY,lesdotor:gY,lesg:yY,lesges:vY,lessapprox:bY,lessdot:xY,lesseqgtr:wY,lesseqqgtr:_Y,LessEqualGreater:EY,LessFullEqual:SY,LessGreater:AY,lessgtr:CY,LessLess:kY,lesssim:TY,LessSlantEqual:DY,LessTilde:LY,lfisht:RY,lfloor:FY,Lfr:OY,lfr:MY,lg:$Y,lgE:IY,lHar:PY,lhard:NY,lharu:BY,lharul:zY,lhblk:jY,LJcy:UY,ljcy:qY,llarr:HY,ll:GY,Ll:VY,llcorner:WY,Lleftarrow:YY,llhard:XY,lltri:ZY,Lmidot:KY,lmidot:JY,lmoustache:QY,lmoust:eX,lnap:tX,lnapprox:nX,lne:rX,lnE:iX,lneq:sX,lneqq:oX,lnsim:aX,loang:lX,loarr:uX,lobrk:cX,longleftarrow:fX,LongLeftArrow:dX,Longleftarrow:hX,longleftrightarrow:pX,LongLeftRightArrow:mX,Longleftrightarrow:gX,longmapsto:yX,longrightarrow:vX,LongRightArrow:bX,Longrightarrow:xX,looparrowleft:wX,looparrowright:_X,lopar:EX,Lopf:SX,lopf:AX,loplus:CX,lotimes:kX,lowast:TX,lowbar:DX,LowerLeftArrow:LX,LowerRightArrow:RX,loz:FX,lozenge:OX,lozf:MX,lpar:$X,lparlt:IX,lrarr:PX,lrcorner:NX,lrhar:BX,lrhard:zX,lrm:jX,lrtri:UX,lsaquo:qX,lscr:HX,Lscr:GX,lsh:VX,Lsh:WX,lsim:YX,lsime:XX,lsimg:ZX,lsqb:KX,lsquo:JX,lsquor:QX,Lstrok:eZ,lstrok:tZ,ltcc:nZ,ltcir:rZ,lt:iZ,LT:sZ,Lt:oZ,ltdot:aZ,lthree:lZ,ltimes:uZ,ltlarr:cZ,ltquest:fZ,ltri:dZ,ltrie:hZ,ltrif:pZ,ltrPar:mZ,lurdshar:gZ,luruhar:yZ,lvertneqq:vZ,lvnE:bZ,macr:xZ,male:wZ,malt:_Z,maltese:EZ,Map:"",map:SZ,mapsto:AZ,mapstodown:CZ,mapstoleft:kZ,mapstoup:TZ,marker:DZ,mcomma:LZ,Mcy:RZ,mcy:FZ,mdash:OZ,mDDot:MZ,measuredangle:$Z,MediumSpace:IZ,Mellintrf:PZ,Mfr:NZ,mfr:BZ,mho:zZ,micro:jZ,midast:UZ,midcir:qZ,mid:HZ,middot:GZ,minusb:VZ,minus:WZ,minusd:YZ,minusdu:XZ,MinusPlus:ZZ,mlcp:KZ,mldr:JZ,mnplus:QZ,models:eK,Mopf:tK,mopf:nK,mp:rK,mscr:iK,Mscr:sK,mstpos:oK,Mu:aK,mu:lK,multimap:uK,mumap:cK,nabla:fK,Nacute:dK,nacute:hK,nang:pK,nap:mK,napE:gK,napid:yK,napos:vK,napprox:bK,natural:xK,naturals:wK,natur:_K,nbsp:EK,nbump:SK,nbumpe:AK,ncap:CK,Ncaron:kK,ncaron:TK,Ncedil:DK,ncedil:LK,ncong:RK,ncongdot:FK,ncup:OK,Ncy:MK,ncy:$K,ndash:IK,nearhk:PK,nearr:NK,neArr:BK,nearrow:zK,ne:jK,nedot:UK,NegativeMediumSpace:qK,NegativeThickSpace:HK,NegativeThinSpace:GK,NegativeVeryThinSpace:VK,nequiv:WK,nesear:YK,nesim:XK,NestedGreaterGreater:ZK,NestedLessLess:KK,NewLine:JK,nexist:QK,nexists:eJ,Nfr:tJ,nfr:nJ,ngE:rJ,nge:iJ,ngeq:sJ,ngeqq:oJ,ngeqslant:aJ,nges:lJ,nGg:uJ,ngsim:cJ,nGt:fJ,ngt:dJ,ngtr:hJ,nGtv:pJ,nharr:mJ,nhArr:gJ,nhpar:yJ,ni:vJ,nis:bJ,nisd:xJ,niv:wJ,NJcy:_J,njcy:EJ,nlarr:SJ,nlArr:AJ,nldr:CJ,nlE:kJ,nle:TJ,nleftarrow:DJ,nLeftarrow:LJ,nleftrightarrow:RJ,nLeftrightarrow:FJ,nleq:OJ,nleqq:MJ,nleqslant:$J,nles:IJ,nless:PJ,nLl:NJ,nlsim:BJ,nLt:zJ,nlt:jJ,nltri:UJ,nltrie:qJ,nLtv:HJ,nmid:GJ,NoBreak:VJ,NonBreakingSpace:WJ,nopf:YJ,Nopf:XJ,Not:ZJ,not:KJ,NotCongruent:JJ,NotCupCap:QJ,NotDoubleVerticalBar:eQ,NotElement:tQ,NotEqual:nQ,NotEqualTilde:rQ,NotExists:iQ,NotGreater:sQ,NotGreaterEqual:oQ,NotGreaterFullEqual:aQ,NotGreaterGreater:lQ,NotGreaterLess:uQ,NotGreaterSlantEqual:cQ,NotGreaterTilde:fQ,NotHumpDownHump:dQ,NotHumpEqual:hQ,notin:pQ,notindot:mQ,notinE:gQ,notinva:yQ,notinvb:vQ,notinvc:bQ,NotLeftTriangleBar:xQ,NotLeftTriangle:wQ,NotLeftTriangleEqual:_Q,NotLess:EQ,NotLessEqual:SQ,NotLessGreater:AQ,NotLessLess:CQ,NotLessSlantEqual:kQ,NotLessTilde:TQ,NotNestedGreaterGreater:DQ,NotNestedLessLess:LQ,notni:RQ,notniva:FQ,notnivb:OQ,notnivc:MQ,NotPrecedes:$Q,NotPrecedesEqual:IQ,NotPrecedesSlantEqual:PQ,NotReverseElement:NQ,NotRightTriangleBar:BQ,NotRightTriangle:zQ,NotRightTriangleEqual:jQ,NotSquareSubset:UQ,NotSquareSubsetEqual:qQ,NotSquareSuperset:HQ,NotSquareSupersetEqual:GQ,NotSubset:VQ,NotSubsetEqual:WQ,NotSucceeds:YQ,NotSucceedsEqual:XQ,NotSucceedsSlantEqual:ZQ,NotSucceedsTilde:KQ,NotSuperset:JQ,NotSupersetEqual:QQ,NotTilde:eee,NotTildeEqual:tee,NotTildeFullEqual:nee,NotTildeTilde:ree,NotVerticalBar:iee,nparallel:see,npar:oee,nparsl:aee,npart:lee,npolint:uee,npr:cee,nprcue:fee,nprec:dee,npreceq:hee,npre:pee,nrarrc:mee,nrarr:gee,nrArr:yee,nrarrw:vee,nrightarrow:bee,nRightarrow:xee,nrtri:wee,nrtrie:_ee,nsc:Eee,nsccue:See,nsce:Aee,Nscr:Cee,nscr:kee,nshortmid:Tee,nshortparallel:Dee,nsim:Lee,nsime:Ree,nsimeq:Fee,nsmid:Oee,nspar:Mee,nsqsube:$ee,nsqsupe:Iee,nsub:Pee,nsubE:Nee,nsube:Bee,nsubset:zee,nsubseteq:jee,nsubseteqq:Uee,nsucc:qee,nsucceq:Hee,nsup:Gee,nsupE:Vee,nsupe:Wee,nsupset:Yee,nsupseteq:Xee,nsupseteqq:Zee,ntgl:Kee,Ntilde:Jee,ntilde:Qee,ntlg:ete,ntriangleleft:tte,ntrianglelefteq:nte,ntriangleright:rte,ntrianglerighteq:ite,Nu:ste,nu:ote,num:ate,numero:lte,numsp:ute,nvap:cte,nvdash:fte,nvDash:dte,nVdash:hte,nVDash:pte,nvge:mte,nvgt:gte,nvHarr:yte,nvinfin:vte,nvlArr:bte,nvle:xte,nvlt:wte,nvltrie:_te,nvrArr:Ete,nvrtrie:Ste,nvsim:Ate,nwarhk:Cte,nwarr:kte,nwArr:Tte,nwarrow:Dte,nwnear:Lte,Oacute:Rte,oacute:Fte,oast:Ote,Ocirc:Mte,ocirc:$te,ocir:Ite,Ocy:Pte,ocy:Nte,odash:Bte,Odblac:zte,odblac:jte,odiv:Ute,odot:qte,odsold:Hte,OElig:Gte,oelig:Vte,ofcir:Wte,Ofr:Yte,ofr:Xte,ogon:Zte,Ograve:Kte,ograve:Jte,ogt:Qte,ohbar:ene,ohm:tne,oint:nne,olarr:rne,olcir:ine,olcross:sne,oline:one,olt:ane,Omacr:lne,omacr:une,Omega:cne,omega:fne,Omicron:dne,omicron:hne,omid:pne,ominus:mne,Oopf:gne,oopf:yne,opar:vne,OpenCurlyDoubleQuote:bne,OpenCurlyQuote:xne,operp:wne,oplus:_ne,orarr:Ene,Or:Sne,or:Ane,ord:Cne,order:kne,orderof:Tne,ordf:Dne,ordm:Lne,origof:Rne,oror:Fne,orslope:One,orv:Mne,oS:$ne,Oscr:Ine,oscr:Pne,Oslash:Nne,oslash:Bne,osol:zne,Otilde:jne,otilde:Une,otimesas:qne,Otimes:Hne,otimes:Gne,Ouml:Vne,ouml:Wne,ovbar:Yne,OverBar:Xne,OverBrace:Zne,OverBracket:Kne,OverParenthesis:Jne,para:Qne,parallel:ere,par:tre,parsim:nre,parsl:rre,part:ire,PartialD:sre,Pcy:ore,pcy:are,percnt:lre,period:ure,permil:cre,perp:fre,pertenk:dre,Pfr:hre,pfr:pre,Phi:mre,phi:gre,phiv:yre,phmmat:vre,phone:bre,Pi:xre,pi:wre,pitchfork:_re,piv:Ere,planck:Sre,planckh:Are,plankv:Cre,plusacir:kre,plusb:Tre,pluscir:Dre,plus:Lre,plusdo:Rre,plusdu:Fre,pluse:Ore,PlusMinus:Mre,plusmn:$re,plussim:Ire,plustwo:Pre,pm:Nre,Poincareplane:Bre,pointint:zre,popf:jre,Popf:Ure,pound:qre,prap:Hre,Pr:Gre,pr:Vre,prcue:Wre,precapprox:Yre,prec:Xre,preccurlyeq:Zre,Precedes:Kre,PrecedesEqual:Jre,PrecedesSlantEqual:Qre,PrecedesTilde:eie,preceq:tie,precnapprox:nie,precneqq:rie,precnsim:iie,pre:sie,prE:oie,precsim:aie,prime:lie,Prime:uie,primes:cie,prnap:fie,prnE:die,prnsim:hie,prod:pie,Product:mie,profalar:gie,profline:yie,profsurf:vie,prop:bie,Proportional:xie,Proportion:wie,propto:_ie,prsim:Eie,prurel:Sie,Pscr:Aie,pscr:Cie,Psi:kie,psi:Tie,puncsp:Die,Qfr:Lie,qfr:Rie,qint:Fie,qopf:Oie,Qopf:Mie,qprime:$ie,Qscr:Iie,qscr:Pie,quaternions:Nie,quatint:Bie,quest:zie,questeq:jie,quot:Uie,QUOT:qie,rAarr:Hie,race:Gie,Racute:Vie,racute:Wie,radic:Yie,raemptyv:Xie,rang:Zie,Rang:Kie,rangd:Jie,range:Qie,rangle:ese,raquo:tse,rarrap:nse,rarrb:rse,rarrbfs:ise,rarrc:sse,rarr:ose,Rarr:ase,rArr:lse,rarrfs:use,rarrhk:cse,rarrlp:fse,rarrpl:dse,rarrsim:hse,Rarrtl:pse,rarrtl:mse,rarrw:gse,ratail:yse,rAtail:vse,ratio:bse,rationals:xse,rbarr:wse,rBarr:_se,RBarr:Ese,rbbrk:Sse,rbrace:Ase,rbrack:Cse,rbrke:kse,rbrksld:Tse,rbrkslu:Dse,Rcaron:Lse,rcaron:Rse,Rcedil:Fse,rcedil:Ose,rceil:Mse,rcub:$se,Rcy:Ise,rcy:Pse,rdca:Nse,rdldhar:Bse,rdquo:zse,rdquor:jse,rdsh:Use,real:qse,realine:Hse,realpart:Gse,reals:Vse,Re:Wse,rect:Yse,reg:Xse,REG:Zse,ReverseElement:Kse,ReverseEquilibrium:Jse,ReverseUpEquilibrium:Qse,rfisht:eoe,rfloor:toe,rfr:noe,Rfr:roe,rHar:ioe,rhard:soe,rharu:ooe,rharul:aoe,Rho:loe,rho:uoe,rhov:coe,RightAngleBracket:foe,RightArrowBar:doe,rightarrow:hoe,RightArrow:poe,Rightarrow:moe,RightArrowLeftArrow:goe,rightarrowtail:yoe,RightCeiling:voe,RightDoubleBracket:boe,RightDownTeeVector:xoe,RightDownVectorBar:woe,RightDownVector:_oe,RightFloor:Eoe,rightharpoondown:Soe,rightharpoonup:Aoe,rightleftarrows:Coe,rightleftharpoons:koe,rightrightarrows:Toe,rightsquigarrow:Doe,RightTeeArrow:Loe,RightTee:Roe,RightTeeVector:Foe,rightthreetimes:Ooe,RightTriangleBar:Moe,RightTriangle:$oe,RightTriangleEqual:Ioe,RightUpDownVector:Poe,RightUpTeeVector:Noe,RightUpVectorBar:Boe,RightUpVector:zoe,RightVectorBar:joe,RightVector:Uoe,ring:qoe,risingdotseq:Hoe,rlarr:Goe,rlhar:Voe,rlm:Woe,rmoustache:Yoe,rmoust:Xoe,rnmid:Zoe,roang:Koe,roarr:Joe,robrk:Qoe,ropar:eae,ropf:tae,Ropf:nae,roplus:rae,rotimes:iae,RoundImplies:sae,rpar:oae,rpargt:aae,rppolint:lae,rrarr:uae,Rrightarrow:cae,rsaquo:fae,rscr:dae,Rscr:hae,rsh:pae,Rsh:mae,rsqb:gae,rsquo:yae,rsquor:vae,rthree:bae,rtimes:xae,rtri:wae,rtrie:_ae,rtrif:Eae,rtriltri:Sae,RuleDelayed:Aae,ruluhar:Cae,rx:kae,Sacute:Tae,sacute:Dae,sbquo:Lae,scap:Rae,Scaron:Fae,scaron:Oae,Sc:Mae,sc:$ae,sccue:Iae,sce:Pae,scE:Nae,Scedil:Bae,scedil:zae,Scirc:jae,scirc:Uae,scnap:qae,scnE:Hae,scnsim:Gae,scpolint:Vae,scsim:Wae,Scy:Yae,scy:Xae,sdotb:Zae,sdot:Kae,sdote:Jae,searhk:Qae,searr:ele,seArr:tle,searrow:nle,sect:rle,semi:ile,seswar:sle,setminus:ole,setmn:ale,sext:lle,Sfr:ule,sfr:cle,sfrown:fle,sharp:dle,SHCHcy:hle,shchcy:ple,SHcy:mle,shcy:gle,ShortDownArrow:yle,ShortLeftArrow:vle,shortmid:ble,shortparallel:xle,ShortRightArrow:wle,ShortUpArrow:_le,shy:Ele,Sigma:Sle,sigma:Ale,sigmaf:Cle,sigmav:kle,sim:Tle,simdot:Dle,sime:Lle,simeq:Rle,simg:Fle,simgE:Ole,siml:Mle,simlE:$le,simne:Ile,simplus:Ple,simrarr:Nle,slarr:Ble,SmallCircle:zle,smallsetminus:jle,smashp:Ule,smeparsl:qle,smid:Hle,smile:Gle,smt:Vle,smte:Wle,smtes:Yle,SOFTcy:Xle,softcy:Zle,solbar:Kle,solb:Jle,sol:Qle,Sopf:eue,sopf:tue,spades:nue,spadesuit:rue,spar:iue,sqcap:sue,sqcaps:oue,sqcup:aue,sqcups:lue,Sqrt:uue,sqsub:cue,sqsube:fue,sqsubset:due,sqsubseteq:hue,sqsup:pue,sqsupe:mue,sqsupset:gue,sqsupseteq:yue,square:vue,Square:bue,SquareIntersection:xue,SquareSubset:wue,SquareSubsetEqual:_ue,SquareSuperset:Eue,SquareSupersetEqual:Sue,SquareUnion:Aue,squarf:Cue,squ:kue,squf:Tue,srarr:Due,Sscr:Lue,sscr:Rue,ssetmn:Fue,ssmile:Oue,sstarf:Mue,Star:$ue,star:Iue,starf:Pue,straightepsilon:Nue,straightphi:Bue,strns:zue,sub:jue,Sub:Uue,subdot:que,subE:Hue,sube:Gue,subedot:Vue,submult:Wue,subnE:Yue,subne:Xue,subplus:Zue,subrarr:Kue,subset:Jue,Subset:Que,subseteq:ece,subseteqq:tce,SubsetEqual:nce,subsetneq:rce,subsetneqq:ice,subsim:sce,subsub:oce,subsup:ace,succapprox:lce,succ:uce,succcurlyeq:cce,Succeeds:fce,SucceedsEqual:dce,SucceedsSlantEqual:hce,SucceedsTilde:pce,succeq:mce,succnapprox:gce,succneqq:yce,succnsim:vce,succsim:bce,SuchThat:xce,sum:wce,Sum:_ce,sung:Ece,sup1:Sce,sup2:Ace,sup3:Cce,sup:kce,Sup:Tce,supdot:Dce,supdsub:Lce,supE:Rce,supe:Fce,supedot:Oce,Superset:Mce,SupersetEqual:$ce,suphsol:Ice,suphsub:Pce,suplarr:Nce,supmult:Bce,supnE:zce,supne:jce,supplus:Uce,supset:qce,Supset:Hce,supseteq:Gce,supseteqq:Vce,supsetneq:Wce,supsetneqq:Yce,supsim:Xce,supsub:Zce,supsup:Kce,swarhk:Jce,swarr:Qce,swArr:efe,swarrow:tfe,swnwar:nfe,szlig:rfe,Tab:ife,target:sfe,Tau:ofe,tau:afe,tbrk:lfe,Tcaron:ufe,tcaron:cfe,Tcedil:ffe,tcedil:dfe,Tcy:hfe,tcy:pfe,tdot:mfe,telrec:gfe,Tfr:yfe,tfr:vfe,there4:bfe,therefore:xfe,Therefore:wfe,Theta:_fe,theta:Efe,thetasym:Sfe,thetav:Afe,thickapprox:Cfe,thicksim:kfe,ThickSpace:Tfe,ThinSpace:Dfe,thinsp:Lfe,thkap:Rfe,thksim:Ffe,THORN:Ofe,thorn:Mfe,tilde:$fe,Tilde:Ife,TildeEqual:Pfe,TildeFullEqual:Nfe,TildeTilde:Bfe,timesbar:zfe,timesb:jfe,times:Ufe,timesd:qfe,tint:Hfe,toea:Gfe,topbot:Vfe,topcir:Wfe,top:Yfe,Topf:Xfe,topf:Zfe,topfork:Kfe,tosa:Jfe,tprime:Qfe,trade:ede,TRADE:tde,triangle:nde,triangledown:rde,triangleleft:ide,trianglelefteq:sde,triangleq:ode,triangleright:ade,trianglerighteq:lde,tridot:ude,trie:cde,triminus:fde,TripleDot:dde,triplus:hde,trisb:pde,tritime:mde,trpezium:gde,Tscr:yde,tscr:vde,TScy:bde,tscy:xde,TSHcy:wde,tshcy:_de,Tstrok:Ede,tstrok:Sde,twixt:Ade,twoheadleftarrow:Cde,twoheadrightarrow:kde,Uacute:Tde,uacute:Dde,uarr:Lde,Uarr:Rde,uArr:Fde,Uarrocir:Ode,Ubrcy:Mde,ubrcy:$de,Ubreve:Ide,ubreve:Pde,Ucirc:Nde,ucirc:Bde,Ucy:zde,ucy:jde,udarr:Ude,Udblac:qde,udblac:Hde,udhar:Gde,ufisht:Vde,Ufr:Wde,ufr:Yde,Ugrave:Xde,ugrave:Zde,uHar:Kde,uharl:Jde,uharr:Qde,uhblk:ehe,ulcorn:the,ulcorner:nhe,ulcrop:rhe,ultri:ihe,Umacr:she,umacr:ohe,uml:ahe,UnderBar:lhe,UnderBrace:uhe,UnderBracket:che,UnderParenthesis:fhe,Union:dhe,UnionPlus:hhe,Uogon:phe,uogon:mhe,Uopf:ghe,uopf:yhe,UpArrowBar:vhe,uparrow:bhe,UpArrow:xhe,Uparrow:whe,UpArrowDownArrow:_he,updownarrow:Ehe,UpDownArrow:She,Updownarrow:Ahe,UpEquilibrium:Che,upharpoonleft:khe,upharpoonright:The,uplus:Dhe,UpperLeftArrow:Lhe,UpperRightArrow:Rhe,upsi:Fhe,Upsi:Ohe,upsih:Mhe,Upsilon:$he,upsilon:Ihe,UpTeeArrow:Phe,UpTee:Nhe,upuparrows:Bhe,urcorn:zhe,urcorner:jhe,urcrop:Uhe,Uring:qhe,uring:Hhe,urtri:Ghe,Uscr:Vhe,uscr:Whe,utdot:Yhe,Utilde:Xhe,utilde:Zhe,utri:Khe,utrif:Jhe,uuarr:Qhe,Uuml:epe,uuml:tpe,uwangle:npe,vangrt:rpe,varepsilon:ipe,varkappa:spe,varnothing:ope,varphi:ape,varpi:lpe,varpropto:upe,varr:cpe,vArr:fpe,varrho:dpe,varsigma:hpe,varsubsetneq:ppe,varsubsetneqq:mpe,varsupsetneq:gpe,varsupsetneqq:ype,vartheta:vpe,vartriangleleft:bpe,vartriangleright:xpe,vBar:wpe,Vbar:_pe,vBarv:Epe,Vcy:Spe,vcy:Ape,vdash:Cpe,vDash:kpe,Vdash:Tpe,VDash:Dpe,Vdashl:Lpe,veebar:Rpe,vee:Fpe,Vee:Ope,veeeq:Mpe,vellip:$pe,verbar:Ipe,Verbar:Ppe,vert:Npe,Vert:Bpe,VerticalBar:zpe,VerticalLine:jpe,VerticalSeparator:Upe,VerticalTilde:qpe,VeryThinSpace:Hpe,Vfr:Gpe,vfr:Vpe,vltri:Wpe,vnsub:Ype,vnsup:Xpe,Vopf:Zpe,vopf:Kpe,vprop:Jpe,vrtri:Qpe,Vscr:eme,vscr:tme,vsubnE:nme,vsubne:rme,vsupnE:ime,vsupne:sme,Vvdash:ome,vzigzag:ame,Wcirc:lme,wcirc:ume,wedbar:cme,wedge:fme,Wedge:dme,wedgeq:hme,weierp:pme,Wfr:mme,wfr:gme,Wopf:yme,wopf:vme,wp:bme,wr:xme,wreath:wme,Wscr:_me,wscr:Eme,xcap:Sme,xcirc:Ame,xcup:Cme,xdtri:kme,Xfr:Tme,xfr:Dme,xharr:Lme,xhArr:Rme,Xi:Fme,xi:Ome,xlarr:Mme,xlArr:$me,xmap:Ime,xnis:Pme,xodot:Nme,Xopf:Bme,xopf:zme,xoplus:jme,xotime:Ume,xrarr:qme,xrArr:Hme,Xscr:Gme,xscr:Vme,xsqcup:Wme,xuplus:Yme,xutri:Xme,xvee:Zme,xwedge:Kme,Yacute:Jme,yacute:Qme,YAcy:ege,yacy:tge,Ycirc:nge,ycirc:rge,Ycy:ige,ycy:sge,yen:oge,Yfr:age,yfr:lge,YIcy:uge,yicy:cge,Yopf:fge,yopf:dge,Yscr:hge,yscr:pge,YUcy:mge,yucy:gge,yuml:yge,Yuml:vge,Zacute:bge,zacute:xge,Zcaron:wge,zcaron:_ge,Zcy:Ege,zcy:Sge,Zdot:Age,zdot:Cge,zeetrf:kge,ZeroWidthSpace:Tge,Zeta:Dge,zeta:Lge,zfr:Rge,Zfr:Fge,ZHcy:Oge,zhcy:Mge,zigrarr:$ge,zopf:Ige,Zopf:Pge,Zscr:Nge,zscr:Bge,zwj:zge,zwnj:jge},i9e=Object.freeze({__proto__:null,Aacute:y,aacute:b,Abreve:w,abreve:E,ac:A,acd:T,acE:D,Acirc:k,acirc:R,acute:O,Acy:B,acy:K,AElig:L,aelig:$,af:I,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:de,amalg:ze,amp:He,AMP:je,andand:we,And:Ie,and:qe,andd:Pe,andslope:At,andv:ht,ang:nn,ange:Vt,angle:Mn,angmsdaa:Ze,angmsdab:pe,angmsdac:ie,angmsdad:oe,angmsdae:be,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:se,Aogon:ae,aogon:ke,Aopf:Ce,aopf:Ee,apacir:De,ap:Oe,apE:We,ape:tt,apid:dt,apos:Kt,ApplyFunction:xt,approx:Qt,approxeq:rn,Aring:sn,aring:on,Ascr:Tn,ascr:Er,Assign:Ki,ast:ds,asymp:Hi,asympeq:No,Atilde:qn,atilde:Mr,Auml:Lr,auml:gn,awconint:Kr,awint:sr,backcong:Ni,backepsilon:tr,backprime:$r,backsim:to,backsimeq:ge,Backslash:Le,Barv:it,barvee:Ke,barwed:Et,Barwed:an,barwedge:en,bbrk:wt,bbrktbrk:et,bcong:hn,Bcy:An,bcy:zt,bdquo:jt,becaus:Sr,because:ci,Because:Zt,bemptyv:Xe,bepsi:pt,bernou:Xn,Bernoullis:ni,Beta:Ar,beta:Rr,beth:nr,between:qt,Bfr:vi,bfr:Ji,bigcap:bi,bigcirc:js,bigcup:xo,bigodot:no,bigoplus:Bo,bigotimes:bs,bigsqcup:Fs,bigstar:zo,bigtriangledown:hs,bigtriangleup:ol,biguplus:al,bigvee:Cr,bigwedge:Qi,bkarow:ro,blacklozenge:Os,blacksquare:Us,blacktriangle:fa,blacktriangledown:qs,blacktriangleleft:ll,blacktriangleright:Gi,blank:Vi,blk12:io,blk14:ps,blk34:jo,block:Hs,bne:fi,bnequiv:Ma,bNot:so,bnot:Wi,Bopf:oo,bopf:ul,bot:Ht,bottom:Z,bowtie:me,boxbox:Be,boxdl:yt,boxdL:pn,boxDl:It,boxDL:In,boxdr:dr,boxdR:kr,boxDr:Ln,boxDR:Ai,boxh:Jr,boxH:or,boxhd:di,boxHd:xs,boxhD:Gs,boxHD:Bi,boxhu:zi,boxHu:wo,boxhU:Hr,boxHU:da,boxminus:Gu,boxplus:cl,boxtimes:fl,boxul:Vc,boxuL:Vu,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:vt,boxUr:Jt,boxUR:Ut,boxv:Sn,boxV:pr,boxvh:Ir,boxvH:es,boxVh:ws,boxVH:xi,boxvl:Li,boxvL:Te,boxVl:ut,boxVL:Wt,boxvr:Vn,boxvR:mr,boxVr:Pn,boxVR:ji,bprime:$a,breve:Sb,Breve:mS,brvbar:Ab,bscr:Cb,Bscr:Sh,bsemi:kb,bsim:Tb,bsime:W0,bsolb:_m,bsol:Db,bsolhsub:Em,bull:dl,bullet:Lb,bump:Y0,bumpE:X0,bumpe:Rb,Bumpeq:Fb,bumpeq:Z0,Cacute:gS,cacute:yS,capand:vS,capbrcup:od,capcap:ad,cap:K0,Cap:J0,capcup:Ob,capdot:Q0,CapitalDifferentialD:Wc,caps:Yc,caret:_o,caron:Wu,Cayleys:Yu,ccaps:Sm,Ccaron:Mb,ccaron:Ah,Ccedil:$b,ccedil:ey,Ccirc:Am,ccirc:bS,Cconint:ty,ccups:Ib,ccupssm:ny,Cdot:ry,cdot:ld,cedil:Cm,Cedilla:Pb,cemptyv:km,cent:iy,centerdot:sy,CenterDot:ud,cfr:Ch,Cfr:Tm,CHcy:Nb,chcy:kh,check:Bb,checkmark:Xc,Chi:Th,chi:Zc,circ:Dh,circeq:cd,circlearrowleft:zb,circlearrowright:jb,circledast:Ub,circledcirc:xS,circleddash:Kc,CircleDot:Jc,circledR:wS,circledS:_S,CircleMinus:ES,CirclePlus:SS,CircleTimes:AS,cir:Uo,cirE:_s,cire:ao,cirfnint:Es,cirmid:Lh,cirscir:CS,ClockwiseContourIntegral:Dm,CloseCurlyDoubleQuote:kS,CloseCurlyQuote:oy,clubs:qb,clubsuit:ay,colon:ly,Colon:uy,Colone:Hb,colone:Gb,coloneq:cy,comma:Vb,commat:Rh,comp:TS,compfn:Lm,complement:hu,complexes:Wb,cong:DS,congdot:Yb,Congruent:ha,conint:Pr,Conint:hl,ContourIntegral:Xu,copf:Zu,Copf:Xb,coprod:fy,Coproduct:Zb,copy:dy,COPY:Fh,copysr:Kb,CounterClockwiseContourIntegral:hy,crarr:Ku,cross:Jb,Cross:Qb,Cscr:Rm,cscr:py,csub:ex,csube:tx,csup:LS,csupe:Fm,ctdot:nx,cudarrl:RS,cudarrr:rx,cuepr:fd,cuesc:my,cularr:Om,cularrp:ix,cupbrcap:gy,cupcap:sx,CupCap:ox,cup:Vs,Cup:Mm,cupcup:ax,cupdot:lx,cupor:ux,cups:dd,curarr:$m,curarrm:cx,curlyeqprec:fx,curlyeqsucc:dx,curlyvee:hd,curlywedge:hx,curren:Im,curvearrowleft:px,curvearrowright:Oh,cuvee:pd,cuwed:mx,cwconint:gx,cwint:yx,cylcty:Mh,dagger:$h,Dagger:Ih,daleth:Ph,darr:vx,Darr:bx,dArr:Ju,dash:md,Dashv:Nh,dashv:xx,dbkarow:FS,dblac:OS,Dcaron:Eo,dcaron:wx,Dcy:MS,dcy:_x,ddagger:Ex,ddarr:Sx,DD:$S,dd:IS,DDotrahd:Qu,ddotseq:Bh,deg:Pm,Del:zh,Delta:pu,delta:PS,demptyv:NS,dfisht:gd,Dfr:Ax,dfr:Cx,dHar:kx,dharl:Nm,dharr:yd,DiacriticalAcute:yy,DiacriticalDot:vy,DiacriticalDoubleAcute:by,DiacriticalGrave:jh,DiacriticalTilde:Tx,diam:Dx,diamond:Bm,Diamond:BS,diamondsuit:Uh,diams:Lx,die:Rx,DifferentialD:xy,digamma:Fx,disin:Ox,div:Mx,divide:qh,divideontimes:Hh,divonx:wy,DJcy:$x,djcy:Ix,dlcorn:Px,dlcrop:_y,dollar:Nx,Dopf:Bx,dopf:vd,Dot:zx,dot:zm,DotDot:zS,doteq:jS,doteqdot:Ri,DotEqual:Ey,dotminus:Gh,dotplus:pl,dotsquare:jm,doublebarwedge:Sy,DoubleContourIntegral:jx,DoubleDot:Ux,DoubleDownArrow:qx,DoubleLeftArrow:Hx,DoubleLeftRightArrow:Gx,DoubleLeftTee:Ay,DoubleLongLeftArrow:Vx,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:Wx,DoubleRightArrow:bd,DoubleRightTee:Um,DoubleUpArrow:US,DoubleUpDownArrow:ts,DoubleVerticalBar:qS,DownArrowBar:qm,downarrow:m,DownArrow:x,Downarrow:S,DownArrowUpArrow:_,DownBreve:C,downdownarrows:M,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:fe,DownRightTeeVector:Se,DownRightVectorBar:ve,DownRightVector:$e,DownTeeArrow:Ne,DownTee:Me,drbkarow:Ve,drcorn:nt,drcrop:Je,Dscr:mt,dscr:ct,DScy:gt,dscy:vn,dsol:Mt,Dstrok:Hn,dstrok:fn,dtdot:ar,dtri:Nr,dtrif:lr,duarr:Zn,duhar:ur,dwangle:$n,DZcy:Br,dzcy:Fn,dzigrarr:Jn,Eacute:Nn,eacute:vr,easter:lo,Ecaron:zr,ecaron:Ws,Ecirc:Ys,ecirc:Ci,ecir:uo,ecolon:Ia,Ecy:Ms,ecy:ml,eDDot:Hm,Edot:Yx,edot:Qc,eDot:qo,ee:ec,efDot:HS,Efr:xd,efr:Cy,eg:Vh,Egrave:Gm,egrave:Wh,egs:ky,egsdot:Xx,el:Ty,Element:Zx,elinters:Kx,ell:Jx,els:bz,elsdot:xz,Emacr:wz,emacr:_z,empty:Ez,emptyset:Sz,EmptySmallSquare:Az,emptyv:Cz,EmptyVerySmallSquare:kz,emsp13:Tz,emsp14:Dz,emsp:Lz,ENG:Rz,eng:Fz,ensp:Oz,Eogon:Mz,eogon:$z,Eopf:Iz,eopf:Pz,epar:Nz,eparsl:Bz,eplus:zz,epsi:jz,Epsilon:Uz,epsilon:qz,epsiv:Hz,eqcirc:Gz,eqcolon:Vz,eqsim:Wz,eqslantgtr:Yz,eqslantless:Xz,Equal:Zz,equals:Kz,EqualTilde:Jz,equest:Qz,Equilibrium:ej,equiv:tj,equivDD:nj,eqvparsl:rj,erarr:ij,erDot:sj,escr:oj,Escr:aj,esdot:lj,Esim:uj,esim:cj,Eta:fj,eta:dj,ETH:hj,eth:pj,Euml:mj,euml:gj,euro:yj,excl:vj,exist:bj,Exists:xj,expectation:wj,exponentiale:_j,ExponentialE:Ej,fallingdotseq:Sj,Fcy:Aj,fcy:Cj,female:kj,ffilig:Tj,fflig:Dj,ffllig:Lj,Ffr:Rj,ffr:Fj,filig:Oj,FilledSmallSquare:Mj,FilledVerySmallSquare:$j,fjlig:Ij,flat:Pj,fllig:Nj,fltns:Bj,fnof:zj,Fopf:jj,fopf:Uj,forall:qj,ForAll:Hj,fork:Gj,forkv:Vj,Fouriertrf:Wj,fpartint:Yj,frac12:Xj,frac13:Zj,frac14:Kj,frac15:Jj,frac16:Qj,frac18:eU,frac23:tU,frac25:nU,frac34:rU,frac35:iU,frac38:sU,frac45:oU,frac56:aU,frac58:lU,frac78:uU,frasl:cU,frown:fU,fscr:dU,Fscr:hU,gacute:pU,Gamma:mU,gamma:gU,Gammad:yU,gammad:vU,gap:bU,Gbreve:xU,gbreve:wU,Gcedil:_U,Gcirc:EU,gcirc:SU,Gcy:AU,gcy:CU,Gdot:kU,gdot:TU,ge:DU,gE:LU,gEl:RU,gel:FU,geq:OU,geqq:MU,geqslant:$U,gescc:IU,ges:PU,gesdot:NU,gesdoto:BU,gesdotol:zU,gesl:jU,gesles:UU,Gfr:qU,gfr:HU,gg:GU,Gg:VU,ggg:WU,gimel:YU,GJcy:XU,gjcy:ZU,gla:KU,gl:JU,glE:QU,glj:eq,gnap:tq,gnapprox:nq,gne:rq,gnE:iq,gneq:sq,gneqq:oq,gnsim:aq,Gopf:lq,gopf:uq,grave:cq,GreaterEqual:fq,GreaterEqualLess:dq,GreaterFullEqual:hq,GreaterGreater:pq,GreaterLess:mq,GreaterSlantEqual:gq,GreaterTilde:yq,Gscr:vq,gscr:bq,gsim:xq,gsime:wq,gsiml:_q,gtcc:Eq,gtcir:Sq,gt:Aq,GT:Cq,Gt:kq,gtdot:Tq,gtlPar:Dq,gtquest:Lq,gtrapprox:Rq,gtrarr:Fq,gtrdot:Oq,gtreqless:Mq,gtreqqless:$q,gtrless:Iq,gtrsim:Pq,gvertneqq:Nq,gvnE:Bq,Hacek:zq,hairsp:jq,half:Uq,hamilt:qq,HARDcy:Hq,hardcy:Gq,harrcir:Vq,harr:Wq,hArr:Yq,harrw:Xq,Hat:Zq,hbar:Kq,Hcirc:Jq,hcirc:Qq,hearts:eH,heartsuit:tH,hellip:nH,hercon:rH,hfr:iH,Hfr:sH,HilbertSpace:oH,hksearow:aH,hkswarow:lH,hoarr:uH,homtht:cH,hookleftarrow:fH,hookrightarrow:dH,hopf:hH,Hopf:pH,horbar:mH,HorizontalLine:gH,hscr:yH,Hscr:vH,hslash:bH,Hstrok:xH,hstrok:wH,HumpDownHump:_H,HumpEqual:EH,hybull:SH,hyphen:AH,Iacute:CH,iacute:kH,ic:TH,Icirc:DH,icirc:LH,Icy:RH,icy:FH,Idot:OH,IEcy:MH,iecy:$H,iexcl:IH,iff:PH,ifr:NH,Ifr:BH,Igrave:zH,igrave:jH,ii:UH,iiiint:qH,iiint:HH,iinfin:GH,iiota:VH,IJlig:WH,ijlig:YH,Imacr:XH,imacr:ZH,image:KH,ImaginaryI:JH,imagline:QH,imagpart:eG,imath:tG,Im:nG,imof:rG,imped:iG,Implies:sG,incare:oG,infin:aG,infintie:lG,inodot:uG,intcal:cG,int:fG,Int:dG,integers:hG,Integral:pG,intercal:mG,Intersection:gG,intlarhk:yG,intprod:vG,InvisibleComma:bG,InvisibleTimes:xG,IOcy:wG,iocy:_G,Iogon:EG,iogon:SG,Iopf:AG,iopf:CG,Iota:kG,iota:TG,iprod:DG,iquest:LG,iscr:RG,Iscr:FG,isin:OG,isindot:MG,isinE:$G,isins:IG,isinsv:PG,isinv:NG,it:BG,Itilde:zG,itilde:jG,Iukcy:UG,iukcy:qG,Iuml:HG,iuml:GG,Jcirc:VG,jcirc:WG,Jcy:YG,jcy:XG,Jfr:ZG,jfr:KG,jmath:JG,Jopf:QG,jopf:eV,Jscr:tV,jscr:nV,Jsercy:rV,jsercy:iV,Jukcy:sV,jukcy:oV,Kappa:aV,kappa:lV,kappav:uV,Kcedil:cV,kcedil:fV,Kcy:dV,kcy:hV,Kfr:pV,kfr:mV,kgreen:gV,KHcy:yV,khcy:vV,KJcy:bV,kjcy:xV,Kopf:wV,kopf:_V,Kscr:EV,kscr:SV,lAarr:AV,Lacute:CV,lacute:kV,laemptyv:TV,lagran:DV,Lambda:LV,lambda:RV,lang:FV,Lang:OV,langd:MV,langle:$V,lap:IV,Laplacetrf:PV,laquo:NV,larrb:BV,larrbfs:zV,larr:jV,Larr:UV,lArr:qV,larrfs:HV,larrhk:GV,larrlp:VV,larrpl:WV,larrsim:YV,larrtl:XV,latail:ZV,lAtail:KV,lat:JV,late:QV,lates:eW,lbarr:tW,lBarr:nW,lbbrk:rW,lbrace:iW,lbrack:sW,lbrke:oW,lbrksld:aW,lbrkslu:lW,Lcaron:uW,lcaron:cW,Lcedil:fW,lcedil:dW,lceil:hW,lcub:pW,Lcy:mW,lcy:gW,ldca:yW,ldquo:vW,ldquor:bW,ldrdhar:xW,ldrushar:wW,ldsh:_W,le:EW,lE:SW,LeftAngleBracket:AW,LeftArrowBar:CW,leftarrow:kW,LeftArrow:TW,Leftarrow:DW,LeftArrowRightArrow:LW,leftarrowtail:RW,LeftCeiling:FW,LeftDoubleBracket:OW,LeftDownTeeVector:MW,LeftDownVectorBar:$W,LeftDownVector:IW,LeftFloor:PW,leftharpoondown:NW,leftharpoonup:BW,leftleftarrows:zW,leftrightarrow:jW,LeftRightArrow:UW,Leftrightarrow:qW,leftrightarrows:HW,leftrightharpoons:GW,leftrightsquigarrow:VW,LeftRightVector:WW,LeftTeeArrow:YW,LeftTee:XW,LeftTeeVector:ZW,leftthreetimes:KW,LeftTriangleBar:JW,LeftTriangle:QW,LeftTriangleEqual:eY,LeftUpDownVector:tY,LeftUpTeeVector:nY,LeftUpVectorBar:rY,LeftUpVector:iY,LeftVectorBar:sY,LeftVector:oY,lEg:aY,leg:lY,leq:uY,leqq:cY,leqslant:fY,lescc:dY,les:hY,lesdot:pY,lesdoto:mY,lesdotor:gY,lesg:yY,lesges:vY,lessapprox:bY,lessdot:xY,lesseqgtr:wY,lesseqqgtr:_Y,LessEqualGreater:EY,LessFullEqual:SY,LessGreater:AY,lessgtr:CY,LessLess:kY,lesssim:TY,LessSlantEqual:DY,LessTilde:LY,lfisht:RY,lfloor:FY,Lfr:OY,lfr:MY,lg:$Y,lgE:IY,lHar:PY,lhard:NY,lharu:BY,lharul:zY,lhblk:jY,LJcy:UY,ljcy:qY,llarr:HY,ll:GY,Ll:VY,llcorner:WY,Lleftarrow:YY,llhard:XY,lltri:ZY,Lmidot:KY,lmidot:JY,lmoustache:QY,lmoust:eX,lnap:tX,lnapprox:nX,lne:rX,lnE:iX,lneq:sX,lneqq:oX,lnsim:aX,loang:lX,loarr:uX,lobrk:cX,longleftarrow:fX,LongLeftArrow:dX,Longleftarrow:hX,longleftrightarrow:pX,LongLeftRightArrow:mX,Longleftrightarrow:gX,longmapsto:yX,longrightarrow:vX,LongRightArrow:bX,Longrightarrow:xX,looparrowleft:wX,looparrowright:_X,lopar:EX,Lopf:SX,lopf:AX,loplus:CX,lotimes:kX,lowast:TX,lowbar:DX,LowerLeftArrow:LX,LowerRightArrow:RX,loz:FX,lozenge:OX,lozf:MX,lpar:$X,lparlt:IX,lrarr:PX,lrcorner:NX,lrhar:BX,lrhard:zX,lrm:jX,lrtri:UX,lsaquo:qX,lscr:HX,Lscr:GX,lsh:VX,Lsh:WX,lsim:YX,lsime:XX,lsimg:ZX,lsqb:KX,lsquo:JX,lsquor:QX,Lstrok:eZ,lstrok:tZ,ltcc:nZ,ltcir:rZ,lt:iZ,LT:sZ,Lt:oZ,ltdot:aZ,lthree:lZ,ltimes:uZ,ltlarr:cZ,ltquest:fZ,ltri:dZ,ltrie:hZ,ltrif:pZ,ltrPar:mZ,lurdshar:gZ,luruhar:yZ,lvertneqq:vZ,lvnE:bZ,macr:xZ,male:wZ,malt:_Z,maltese:EZ,map:SZ,mapsto:AZ,mapstodown:CZ,mapstoleft:kZ,mapstoup:TZ,marker:DZ,mcomma:LZ,Mcy:RZ,mcy:FZ,mdash:OZ,mDDot:MZ,measuredangle:$Z,MediumSpace:IZ,Mellintrf:PZ,Mfr:NZ,mfr:BZ,mho:zZ,micro:jZ,midast:UZ,midcir:qZ,mid:HZ,middot:GZ,minusb:VZ,minus:WZ,minusd:YZ,minusdu:XZ,MinusPlus:ZZ,mlcp:KZ,mldr:JZ,mnplus:QZ,models:eK,Mopf:tK,mopf:nK,mp:rK,mscr:iK,Mscr:sK,mstpos:oK,Mu:aK,mu:lK,multimap:uK,mumap:cK,nabla:fK,Nacute:dK,nacute:hK,nang:pK,nap:mK,napE:gK,napid:yK,napos:vK,napprox:bK,natural:xK,naturals:wK,natur:_K,nbsp:EK,nbump:SK,nbumpe:AK,ncap:CK,Ncaron:kK,ncaron:TK,Ncedil:DK,ncedil:LK,ncong:RK,ncongdot:FK,ncup:OK,Ncy:MK,ncy:$K,ndash:IK,nearhk:PK,nearr:NK,neArr:BK,nearrow:zK,ne:jK,nedot:UK,NegativeMediumSpace:qK,NegativeThickSpace:HK,NegativeThinSpace:GK,NegativeVeryThinSpace:VK,nequiv:WK,nesear:YK,nesim:XK,NestedGreaterGreater:ZK,NestedLessLess:KK,NewLine:JK,nexist:QK,nexists:eJ,Nfr:tJ,nfr:nJ,ngE:rJ,nge:iJ,ngeq:sJ,ngeqq:oJ,ngeqslant:aJ,nges:lJ,nGg:uJ,ngsim:cJ,nGt:fJ,ngt:dJ,ngtr:hJ,nGtv:pJ,nharr:mJ,nhArr:gJ,nhpar:yJ,ni:vJ,nis:bJ,nisd:xJ,niv:wJ,NJcy:_J,njcy:EJ,nlarr:SJ,nlArr:AJ,nldr:CJ,nlE:kJ,nle:TJ,nleftarrow:DJ,nLeftarrow:LJ,nleftrightarrow:RJ,nLeftrightarrow:FJ,nleq:OJ,nleqq:MJ,nleqslant:$J,nles:IJ,nless:PJ,nLl:NJ,nlsim:BJ,nLt:zJ,nlt:jJ,nltri:UJ,nltrie:qJ,nLtv:HJ,nmid:GJ,NoBreak:VJ,NonBreakingSpace:WJ,nopf:YJ,Nopf:XJ,Not:ZJ,not:KJ,NotCongruent:JJ,NotCupCap:QJ,NotDoubleVerticalBar:eQ,NotElement:tQ,NotEqual:nQ,NotEqualTilde:rQ,NotExists:iQ,NotGreater:sQ,NotGreaterEqual:oQ,NotGreaterFullEqual:aQ,NotGreaterGreater:lQ,NotGreaterLess:uQ,NotGreaterSlantEqual:cQ,NotGreaterTilde:fQ,NotHumpDownHump:dQ,NotHumpEqual:hQ,notin:pQ,notindot:mQ,notinE:gQ,notinva:yQ,notinvb:vQ,notinvc:bQ,NotLeftTriangleBar:xQ,NotLeftTriangle:wQ,NotLeftTriangleEqual:_Q,NotLess:EQ,NotLessEqual:SQ,NotLessGreater:AQ,NotLessLess:CQ,NotLessSlantEqual:kQ,NotLessTilde:TQ,NotNestedGreaterGreater:DQ,NotNestedLessLess:LQ,notni:RQ,notniva:FQ,notnivb:OQ,notnivc:MQ,NotPrecedes:$Q,NotPrecedesEqual:IQ,NotPrecedesSlantEqual:PQ,NotReverseElement:NQ,NotRightTriangleBar:BQ,NotRightTriangle:zQ,NotRightTriangleEqual:jQ,NotSquareSubset:UQ,NotSquareSubsetEqual:qQ,NotSquareSuperset:HQ,NotSquareSupersetEqual:GQ,NotSubset:VQ,NotSubsetEqual:WQ,NotSucceeds:YQ,NotSucceedsEqual:XQ,NotSucceedsSlantEqual:ZQ,NotSucceedsTilde:KQ,NotSuperset:JQ,NotSupersetEqual:QQ,NotTilde:eee,NotTildeEqual:tee,NotTildeFullEqual:nee,NotTildeTilde:ree,NotVerticalBar:iee,nparallel:see,npar:oee,nparsl:aee,npart:lee,npolint:uee,npr:cee,nprcue:fee,nprec:dee,npreceq:hee,npre:pee,nrarrc:mee,nrarr:gee,nrArr:yee,nrarrw:vee,nrightarrow:bee,nRightarrow:xee,nrtri:wee,nrtrie:_ee,nsc:Eee,nsccue:See,nsce:Aee,Nscr:Cee,nscr:kee,nshortmid:Tee,nshortparallel:Dee,nsim:Lee,nsime:Ree,nsimeq:Fee,nsmid:Oee,nspar:Mee,nsqsube:$ee,nsqsupe:Iee,nsub:Pee,nsubE:Nee,nsube:Bee,nsubset:zee,nsubseteq:jee,nsubseteqq:Uee,nsucc:qee,nsucceq:Hee,nsup:Gee,nsupE:Vee,nsupe:Wee,nsupset:Yee,nsupseteq:Xee,nsupseteqq:Zee,ntgl:Kee,Ntilde:Jee,ntilde:Qee,ntlg:ete,ntriangleleft:tte,ntrianglelefteq:nte,ntriangleright:rte,ntrianglerighteq:ite,Nu:ste,nu:ote,num:ate,numero:lte,numsp:ute,nvap:cte,nvdash:fte,nvDash:dte,nVdash:hte,nVDash:pte,nvge:mte,nvgt:gte,nvHarr:yte,nvinfin:vte,nvlArr:bte,nvle:xte,nvlt:wte,nvltrie:_te,nvrArr:Ete,nvrtrie:Ste,nvsim:Ate,nwarhk:Cte,nwarr:kte,nwArr:Tte,nwarrow:Dte,nwnear:Lte,Oacute:Rte,oacute:Fte,oast:Ote,Ocirc:Mte,ocirc:$te,ocir:Ite,Ocy:Pte,ocy:Nte,odash:Bte,Odblac:zte,odblac:jte,odiv:Ute,odot:qte,odsold:Hte,OElig:Gte,oelig:Vte,ofcir:Wte,Ofr:Yte,ofr:Xte,ogon:Zte,Ograve:Kte,ograve:Jte,ogt:Qte,ohbar:ene,ohm:tne,oint:nne,olarr:rne,olcir:ine,olcross:sne,oline:one,olt:ane,Omacr:lne,omacr:une,Omega:cne,omega:fne,Omicron:dne,omicron:hne,omid:pne,ominus:mne,Oopf:gne,oopf:yne,opar:vne,OpenCurlyDoubleQuote:bne,OpenCurlyQuote:xne,operp:wne,oplus:_ne,orarr:Ene,Or:Sne,or:Ane,ord:Cne,order:kne,orderof:Tne,ordf:Dne,ordm:Lne,origof:Rne,oror:Fne,orslope:One,orv:Mne,oS:$ne,Oscr:Ine,oscr:Pne,Oslash:Nne,oslash:Bne,osol:zne,Otilde:jne,otilde:Une,otimesas:qne,Otimes:Hne,otimes:Gne,Ouml:Vne,ouml:Wne,ovbar:Yne,OverBar:Xne,OverBrace:Zne,OverBracket:Kne,OverParenthesis:Jne,para:Qne,parallel:ere,par:tre,parsim:nre,parsl:rre,part:ire,PartialD:sre,Pcy:ore,pcy:are,percnt:lre,period:ure,permil:cre,perp:fre,pertenk:dre,Pfr:hre,pfr:pre,Phi:mre,phi:gre,phiv:yre,phmmat:vre,phone:bre,Pi:xre,pi:wre,pitchfork:_re,piv:Ere,planck:Sre,planckh:Are,plankv:Cre,plusacir:kre,plusb:Tre,pluscir:Dre,plus:Lre,plusdo:Rre,plusdu:Fre,pluse:Ore,PlusMinus:Mre,plusmn:$re,plussim:Ire,plustwo:Pre,pm:Nre,Poincareplane:Bre,pointint:zre,popf:jre,Popf:Ure,pound:qre,prap:Hre,Pr:Gre,pr:Vre,prcue:Wre,precapprox:Yre,prec:Xre,preccurlyeq:Zre,Precedes:Kre,PrecedesEqual:Jre,PrecedesSlantEqual:Qre,PrecedesTilde:eie,preceq:tie,precnapprox:nie,precneqq:rie,precnsim:iie,pre:sie,prE:oie,precsim:aie,prime:lie,Prime:uie,primes:cie,prnap:fie,prnE:die,prnsim:hie,prod:pie,Product:mie,profalar:gie,profline:yie,profsurf:vie,prop:bie,Proportional:xie,Proportion:wie,propto:_ie,prsim:Eie,prurel:Sie,Pscr:Aie,pscr:Cie,Psi:kie,psi:Tie,puncsp:Die,Qfr:Lie,qfr:Rie,qint:Fie,qopf:Oie,Qopf:Mie,qprime:$ie,Qscr:Iie,qscr:Pie,quaternions:Nie,quatint:Bie,quest:zie,questeq:jie,quot:Uie,QUOT:qie,rAarr:Hie,race:Gie,Racute:Vie,racute:Wie,radic:Yie,raemptyv:Xie,rang:Zie,Rang:Kie,rangd:Jie,range:Qie,rangle:ese,raquo:tse,rarrap:nse,rarrb:rse,rarrbfs:ise,rarrc:sse,rarr:ose,Rarr:ase,rArr:lse,rarrfs:use,rarrhk:cse,rarrlp:fse,rarrpl:dse,rarrsim:hse,Rarrtl:pse,rarrtl:mse,rarrw:gse,ratail:yse,rAtail:vse,ratio:bse,rationals:xse,rbarr:wse,rBarr:_se,RBarr:Ese,rbbrk:Sse,rbrace:Ase,rbrack:Cse,rbrke:kse,rbrksld:Tse,rbrkslu:Dse,Rcaron:Lse,rcaron:Rse,Rcedil:Fse,rcedil:Ose,rceil:Mse,rcub:$se,Rcy:Ise,rcy:Pse,rdca:Nse,rdldhar:Bse,rdquo:zse,rdquor:jse,rdsh:Use,real:qse,realine:Hse,realpart:Gse,reals:Vse,Re:Wse,rect:Yse,reg:Xse,REG:Zse,ReverseElement:Kse,ReverseEquilibrium:Jse,ReverseUpEquilibrium:Qse,rfisht:eoe,rfloor:toe,rfr:noe,Rfr:roe,rHar:ioe,rhard:soe,rharu:ooe,rharul:aoe,Rho:loe,rho:uoe,rhov:coe,RightAngleBracket:foe,RightArrowBar:doe,rightarrow:hoe,RightArrow:poe,Rightarrow:moe,RightArrowLeftArrow:goe,rightarrowtail:yoe,RightCeiling:voe,RightDoubleBracket:boe,RightDownTeeVector:xoe,RightDownVectorBar:woe,RightDownVector:_oe,RightFloor:Eoe,rightharpoondown:Soe,rightharpoonup:Aoe,rightleftarrows:Coe,rightleftharpoons:koe,rightrightarrows:Toe,rightsquigarrow:Doe,RightTeeArrow:Loe,RightTee:Roe,RightTeeVector:Foe,rightthreetimes:Ooe,RightTriangleBar:Moe,RightTriangle:$oe,RightTriangleEqual:Ioe,RightUpDownVector:Poe,RightUpTeeVector:Noe,RightUpVectorBar:Boe,RightUpVector:zoe,RightVectorBar:joe,RightVector:Uoe,ring:qoe,risingdotseq:Hoe,rlarr:Goe,rlhar:Voe,rlm:Woe,rmoustache:Yoe,rmoust:Xoe,rnmid:Zoe,roang:Koe,roarr:Joe,robrk:Qoe,ropar:eae,ropf:tae,Ropf:nae,roplus:rae,rotimes:iae,RoundImplies:sae,rpar:oae,rpargt:aae,rppolint:lae,rrarr:uae,Rrightarrow:cae,rsaquo:fae,rscr:dae,Rscr:hae,rsh:pae,Rsh:mae,rsqb:gae,rsquo:yae,rsquor:vae,rthree:bae,rtimes:xae,rtri:wae,rtrie:_ae,rtrif:Eae,rtriltri:Sae,RuleDelayed:Aae,ruluhar:Cae,rx:kae,Sacute:Tae,sacute:Dae,sbquo:Lae,scap:Rae,Scaron:Fae,scaron:Oae,Sc:Mae,sc:$ae,sccue:Iae,sce:Pae,scE:Nae,Scedil:Bae,scedil:zae,Scirc:jae,scirc:Uae,scnap:qae,scnE:Hae,scnsim:Gae,scpolint:Vae,scsim:Wae,Scy:Yae,scy:Xae,sdotb:Zae,sdot:Kae,sdote:Jae,searhk:Qae,searr:ele,seArr:tle,searrow:nle,sect:rle,semi:ile,seswar:sle,setminus:ole,setmn:ale,sext:lle,Sfr:ule,sfr:cle,sfrown:fle,sharp:dle,SHCHcy:hle,shchcy:ple,SHcy:mle,shcy:gle,ShortDownArrow:yle,ShortLeftArrow:vle,shortmid:ble,shortparallel:xle,ShortRightArrow:wle,ShortUpArrow:_le,shy:Ele,Sigma:Sle,sigma:Ale,sigmaf:Cle,sigmav:kle,sim:Tle,simdot:Dle,sime:Lle,simeq:Rle,simg:Fle,simgE:Ole,siml:Mle,simlE:$le,simne:Ile,simplus:Ple,simrarr:Nle,slarr:Ble,SmallCircle:zle,smallsetminus:jle,smashp:Ule,smeparsl:qle,smid:Hle,smile:Gle,smt:Vle,smte:Wle,smtes:Yle,SOFTcy:Xle,softcy:Zle,solbar:Kle,solb:Jle,sol:Qle,Sopf:eue,sopf:tue,spades:nue,spadesuit:rue,spar:iue,sqcap:sue,sqcaps:oue,sqcup:aue,sqcups:lue,Sqrt:uue,sqsub:cue,sqsube:fue,sqsubset:due,sqsubseteq:hue,sqsup:pue,sqsupe:mue,sqsupset:gue,sqsupseteq:yue,square:vue,Square:bue,SquareIntersection:xue,SquareSubset:wue,SquareSubsetEqual:_ue,SquareSuperset:Eue,SquareSupersetEqual:Sue,SquareUnion:Aue,squarf:Cue,squ:kue,squf:Tue,srarr:Due,Sscr:Lue,sscr:Rue,ssetmn:Fue,ssmile:Oue,sstarf:Mue,Star:$ue,star:Iue,starf:Pue,straightepsilon:Nue,straightphi:Bue,strns:zue,sub:jue,Sub:Uue,subdot:que,subE:Hue,sube:Gue,subedot:Vue,submult:Wue,subnE:Yue,subne:Xue,subplus:Zue,subrarr:Kue,subset:Jue,Subset:Que,subseteq:ece,subseteqq:tce,SubsetEqual:nce,subsetneq:rce,subsetneqq:ice,subsim:sce,subsub:oce,subsup:ace,succapprox:lce,succ:uce,succcurlyeq:cce,Succeeds:fce,SucceedsEqual:dce,SucceedsSlantEqual:hce,SucceedsTilde:pce,succeq:mce,succnapprox:gce,succneqq:yce,succnsim:vce,succsim:bce,SuchThat:xce,sum:wce,Sum:_ce,sung:Ece,sup1:Sce,sup2:Ace,sup3:Cce,sup:kce,Sup:Tce,supdot:Dce,supdsub:Lce,supE:Rce,supe:Fce,supedot:Oce,Superset:Mce,SupersetEqual:$ce,suphsol:Ice,suphsub:Pce,suplarr:Nce,supmult:Bce,supnE:zce,supne:jce,supplus:Uce,supset:qce,Supset:Hce,supseteq:Gce,supseteqq:Vce,supsetneq:Wce,supsetneqq:Yce,supsim:Xce,supsub:Zce,supsup:Kce,swarhk:Jce,swarr:Qce,swArr:efe,swarrow:tfe,swnwar:nfe,szlig:rfe,Tab:ife,target:sfe,Tau:ofe,tau:afe,tbrk:lfe,Tcaron:ufe,tcaron:cfe,Tcedil:ffe,tcedil:dfe,Tcy:hfe,tcy:pfe,tdot:mfe,telrec:gfe,Tfr:yfe,tfr:vfe,there4:bfe,therefore:xfe,Therefore:wfe,Theta:_fe,theta:Efe,thetasym:Sfe,thetav:Afe,thickapprox:Cfe,thicksim:kfe,ThickSpace:Tfe,ThinSpace:Dfe,thinsp:Lfe,thkap:Rfe,thksim:Ffe,THORN:Ofe,thorn:Mfe,tilde:$fe,Tilde:Ife,TildeEqual:Pfe,TildeFullEqual:Nfe,TildeTilde:Bfe,timesbar:zfe,timesb:jfe,times:Ufe,timesd:qfe,tint:Hfe,toea:Gfe,topbot:Vfe,topcir:Wfe,top:Yfe,Topf:Xfe,topf:Zfe,topfork:Kfe,tosa:Jfe,tprime:Qfe,trade:ede,TRADE:tde,triangle:nde,triangledown:rde,triangleleft:ide,trianglelefteq:sde,triangleq:ode,triangleright:ade,trianglerighteq:lde,tridot:ude,trie:cde,triminus:fde,TripleDot:dde,triplus:hde,trisb:pde,tritime:mde,trpezium:gde,Tscr:yde,tscr:vde,TScy:bde,tscy:xde,TSHcy:wde,tshcy:_de,Tstrok:Ede,tstrok:Sde,twixt:Ade,twoheadleftarrow:Cde,twoheadrightarrow:kde,Uacute:Tde,uacute:Dde,uarr:Lde,Uarr:Rde,uArr:Fde,Uarrocir:Ode,Ubrcy:Mde,ubrcy:$de,Ubreve:Ide,ubreve:Pde,Ucirc:Nde,ucirc:Bde,Ucy:zde,ucy:jde,udarr:Ude,Udblac:qde,udblac:Hde,udhar:Gde,ufisht:Vde,Ufr:Wde,ufr:Yde,Ugrave:Xde,ugrave:Zde,uHar:Kde,uharl:Jde,uharr:Qde,uhblk:ehe,ulcorn:the,ulcorner:nhe,ulcrop:rhe,ultri:ihe,Umacr:she,umacr:ohe,uml:ahe,UnderBar:lhe,UnderBrace:uhe,UnderBracket:che,UnderParenthesis:fhe,Union:dhe,UnionPlus:hhe,Uogon:phe,uogon:mhe,Uopf:ghe,uopf:yhe,UpArrowBar:vhe,uparrow:bhe,UpArrow:xhe,Uparrow:whe,UpArrowDownArrow:_he,updownarrow:Ehe,UpDownArrow:She,Updownarrow:Ahe,UpEquilibrium:Che,upharpoonleft:khe,upharpoonright:The,uplus:Dhe,UpperLeftArrow:Lhe,UpperRightArrow:Rhe,upsi:Fhe,Upsi:Ohe,upsih:Mhe,Upsilon:$he,upsilon:Ihe,UpTeeArrow:Phe,UpTee:Nhe,upuparrows:Bhe,urcorn:zhe,urcorner:jhe,urcrop:Uhe,Uring:qhe,uring:Hhe,urtri:Ghe,Uscr:Vhe,uscr:Whe,utdot:Yhe,Utilde:Xhe,utilde:Zhe,utri:Khe,utrif:Jhe,uuarr:Qhe,Uuml:epe,uuml:tpe,uwangle:npe,vangrt:rpe,varepsilon:ipe,varkappa:spe,varnothing:ope,varphi:ape,varpi:lpe,varpropto:upe,varr:cpe,vArr:fpe,varrho:dpe,varsigma:hpe,varsubsetneq:ppe,varsubsetneqq:mpe,varsupsetneq:gpe,varsupsetneqq:ype,vartheta:vpe,vartriangleleft:bpe,vartriangleright:xpe,vBar:wpe,Vbar:_pe,vBarv:Epe,Vcy:Spe,vcy:Ape,vdash:Cpe,vDash:kpe,Vdash:Tpe,VDash:Dpe,Vdashl:Lpe,veebar:Rpe,vee:Fpe,Vee:Ope,veeeq:Mpe,vellip:$pe,verbar:Ipe,Verbar:Ppe,vert:Npe,Vert:Bpe,VerticalBar:zpe,VerticalLine:jpe,VerticalSeparator:Upe,VerticalTilde:qpe,VeryThinSpace:Hpe,Vfr:Gpe,vfr:Vpe,vltri:Wpe,vnsub:Ype,vnsup:Xpe,Vopf:Zpe,vopf:Kpe,vprop:Jpe,vrtri:Qpe,Vscr:eme,vscr:tme,vsubnE:nme,vsubne:rme,vsupnE:ime,vsupne:sme,Vvdash:ome,vzigzag:ame,Wcirc:lme,wcirc:ume,wedbar:cme,wedge:fme,Wedge:dme,wedgeq:hme,weierp:pme,Wfr:mme,wfr:gme,Wopf:yme,wopf:vme,wp:bme,wr:xme,wreath:wme,Wscr:_me,wscr:Eme,xcap:Sme,xcirc:Ame,xcup:Cme,xdtri:kme,Xfr:Tme,xfr:Dme,xharr:Lme,xhArr:Rme,Xi:Fme,xi:Ome,xlarr:Mme,xlArr:$me,xmap:Ime,xnis:Pme,xodot:Nme,Xopf:Bme,xopf:zme,xoplus:jme,xotime:Ume,xrarr:qme,xrArr:Hme,Xscr:Gme,xscr:Vme,xsqcup:Wme,xuplus:Yme,xutri:Xme,xvee:Zme,xwedge:Kme,Yacute:Jme,yacute:Qme,YAcy:ege,yacy:tge,Ycirc:nge,ycirc:rge,Ycy:ige,ycy:sge,yen:oge,Yfr:age,yfr:lge,YIcy:uge,yicy:cge,Yopf:fge,yopf:dge,Yscr:hge,yscr:pge,YUcy:mge,yucy:gge,yuml:yge,Yuml:vge,Zacute:bge,zacute:xge,Zcaron:wge,zcaron:_ge,Zcy:Ege,zcy:Sge,Zdot:Age,zdot:Cge,zeetrf:kge,ZeroWidthSpace:Tge,Zeta:Dge,zeta:Lge,zfr:Rge,Zfr:Fge,ZHcy:Oge,zhcy:Mge,zigrarr:$ge,zopf:Ige,Zopf:Pge,Zscr:Nge,zscr:Bge,zwj:zge,zwnj:jge,default:r9e}),Uge="",qge="",Hge="",Gge="",Vge="",Wge="",Yge="",Xge="",Zge="",Kge="&",Jge="&",Qge="",e0e="",t0e="",n0e="",r0e="",i0e="",s0e="",o0e="",a0e="",l0e="",u0e="",c0e="",f0e="",d0e="",h0e="",p0e="",m0e="",g0e="",y0e="",v0e="",b0e="",x0e="",w0e="",_0e="",E0e="",S0e="",A0e="",C0e="",k0e="",T0e=">",D0e=">",L0e="",R0e="",F0e="",O0e="",M0e="",$0e="",I0e="",P0e="",N0e="",B0e="",z0e="",j0e="<",U0e="<",q0e="",H0e="",G0e="",V0e="",W0e="",Y0e="",X0e="",Z0e="",K0e="",J0e="",Q0e="",eye="",tye="",nye="",rye="",iye="",sye="",oye="",aye="",lye="",uye="",cye="",fye="",dye="",hye='"',pye='"',mye="",gye="",yye="",vye="",bye="",xye="",wye="",_ye="",Eye="",Sye="",Aye="",Cye="",kye="",Tye="",Dye="",Lye="",Rye="",Fye="",Oye="",Mye="",$ye="",Iye="",Pye="",Nye="",Bye="",s9e={Aacute:Uge,aacute:qge,Acirc:Hge,acirc:Gge,acute:Vge,AElig:Wge,aelig:Yge,Agrave:Xge,agrave:Zge,amp:Kge,AMP:Jge,Aring:Qge,aring:e0e,Atilde:t0e,atilde:n0e,Auml:r0e,auml:i0e,brvbar:s0e,Ccedil:o0e,ccedil:a0e,cedil:l0e,cent:u0e,copy:c0e,COPY:f0e,curren:d0e,deg:h0e,divide:p0e,Eacute:m0e,eacute:g0e,Ecirc:y0e,ecirc:v0e,Egrave:b0e,egrave:x0e,ETH:w0e,eth:_0e,Euml:E0e,euml:S0e,frac12:A0e,frac14:C0e,frac34:k0e,gt:T0e,GT:D0e,Iacute:L0e,iacute:R0e,Icirc:F0e,icirc:O0e,iexcl:M0e,Igrave:$0e,igrave:I0e,iquest:P0e,Iuml:N0e,iuml:B0e,laquo:z0e,lt:j0e,LT:U0e,macr:q0e,micro:H0e,middot:G0e,nbsp:V0e,not:W0e,Ntilde:Y0e,ntilde:X0e,Oacute:Z0e,oacute:K0e,Ocirc:J0e,ocirc:Q0e,Ograve:eye,ograve:tye,ordf:nye,ordm:rye,Oslash:iye,oslash:sye,Otilde:oye,otilde:aye,Ouml:lye,ouml:uye,para:cye,plusmn:fye,pound:dye,quot:hye,QUOT:pye,raquo:mye,reg:gye,REG:yye,sect:vye,shy:bye,sup1:xye,sup2:wye,sup3:_ye,szlig:Eye,THORN:Sye,thorn:Aye,times:Cye,Uacute:kye,uacute:Tye,Ucirc:Dye,ucirc:Lye,Ugrave:Rye,ugrave:Fye,uml:Oye,Uuml:Mye,uuml:$ye,Yacute:Iye,yacute:Pye,yen:Nye,yuml:Bye},o9e=Object.freeze({__proto__:null,Aacute:Uge,aacute:qge,Acirc:Hge,acirc:Gge,acute:Vge,AElig:Wge,aelig:Yge,Agrave:Xge,agrave:Zge,amp:Kge,AMP:Jge,Aring:Qge,aring:e0e,Atilde:t0e,atilde:n0e,Auml:r0e,auml:i0e,brvbar:s0e,Ccedil:o0e,ccedil:a0e,cedil:l0e,cent:u0e,copy:c0e,COPY:f0e,curren:d0e,deg:h0e,divide:p0e,Eacute:m0e,eacute:g0e,Ecirc:y0e,ecirc:v0e,Egrave:b0e,egrave:x0e,ETH:w0e,eth:_0e,Euml:E0e,euml:S0e,frac12:A0e,frac14:C0e,frac34:k0e,gt:T0e,GT:D0e,Iacute:L0e,iacute:R0e,Icirc:F0e,icirc:O0e,iexcl:M0e,Igrave:$0e,igrave:I0e,iquest:P0e,Iuml:N0e,iuml:B0e,laquo:z0e,lt:j0e,LT:U0e,macr:q0e,micro:H0e,middot:G0e,nbsp:V0e,not:W0e,Ntilde:Y0e,ntilde:X0e,Oacute:Z0e,oacute:K0e,Ocirc:J0e,ocirc:Q0e,Ograve:eye,ograve:tye,ordf:nye,ordm:rye,Oslash:iye,oslash:sye,Otilde:oye,otilde:aye,Ouml:lye,ouml:uye,para:cye,plusmn:fye,pound:dye,quot:hye,QUOT:pye,raquo:mye,reg:gye,REG:yye,sect:vye,shy:bye,sup1:xye,sup2:wye,sup3:_ye,szlig:Eye,THORN:Sye,thorn:Aye,times:Cye,Uacute:kye,uacute:Tye,Ucirc:Dye,ucirc:Lye,Ugrave:Rye,ugrave:Fye,uml:Oye,Uuml:Mye,uuml:$ye,Yacute:Iye,yacute:Pye,yen:Nye,yuml:Bye,default:s9e}),zye="&",jye="'",Uye=">",qye="<",Hye='"',a9e={amp:zye,apos:jye,gt:Uye,lt:qye,quot:Hye},l9e=Object.freeze({__proto__:null,amp:zye,apos:jye,gt:Uye,lt:qye,quot:Hye,default:a9e}),u9e={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},c9e=Object.freeze({__proto__:null,default:u9e}),f9e=v(c9e),Gye=g(function(G,ue){var Ae=h&&h.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(f9e);function ft(lt){if(lt>=55296&&lt<=57343||lt>1114111)return"";lt in Fe.default&&(lt=Fe.default[lt]);var bn="";return lt>65535&&(lt-=65536,bn+=String.fromCharCode(lt>>>10&1023|55296),lt=56320|lt&1023),bn+=String.fromCharCode(lt),bn}ue.default=ft});p(Gye);var Vye=v(i9e),d9e=v(o9e),Wye=v(l9e),wd=g(function(G,ue){var Ae=h&&h.__importDefault||function(br){return br&&br.__esModule?br:{default:br}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(Vye),ft=Ae(d9e),lt=Ae(Wye),bn=Ae(Gye);ue.decodeXML=Bt(lt.default),ue.decodeHTMLStrict=Bt(Fe.default);function Bt(br){var xr=Object.keys(br).join("|"),ei=Gr(br);xr+="|#[xX][\\da-fA-F]+|#\\d+";var ti=new RegExp("&(?:"+xr+");","g");return function(co){return String(co).replace(ti,ei)}}var On=function(br,xr){return br<xr?1:-1};ue.decodeHTML=function(){for(var br=Object.keys(ft.default).sort(On),xr=Object.keys(Fe.default).sort(On),ei=0,ti=0;ei<xr.length;ei++)br[ti]===xr[ei]?(xr[ei]+=";?",ti++):xr[ei]+=";";var co=new RegExp("&(?:"+xr.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Zm=Gr(Fe.default);function YR(Km){return Km.substr(-1)!==";"&&(Km+=";"),Zm(Km)}return function(Km){return String(Km).replace(co,YR)}}();function Gr(br){return function(ei){return ei.charAt(1)==="#"?ei.charAt(2)==="X"||ei.charAt(2)==="x"?bn.default(parseInt(ei.substr(3),16)):bn.default(parseInt(ei.substr(2),10)):br[ei.slice(1,-1)]}}});p(wd),wd.decodeXML,wd.decodeHTMLStrict,wd.decodeHTML;var Vm=g(function(G,ue){var Ae=h&&h.__importDefault||function(So){return So&&So.__esModule?So:{default:So}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(Wye),ft=Gr(Fe.default),lt=br(ft);ue.encodeXML=Zm(ft,lt);var bn=Ae(Vye),Bt=Gr(bn.default),On=br(Bt);ue.encodeHTML=Zm(Bt,On);function Gr(So){return Object.keys(So).sort().reduce(function(Xh,ef){return Xh[So[ef]]="&"+ef+";",Xh},{})}function br(So){var Xh=[],ef=[];return Object.keys(So).forEach(function(Jm){return Jm.length===1?Xh.push("\\"+Jm):ef.push(Jm)}),ef.unshift("["+Xh.join("")+"]"),new RegExp(ef.join("|"),"g")}var xr=/[^\0-\x7F]/g,ei=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function ti(So){return"&#x"+So.charCodeAt(0).toString(16).toUpperCase()+";"}function co(So,Xh){var ef=So.charCodeAt(0),Jm=So.charCodeAt(1),NBe=(ef-55296)*1024+Jm-56320+65536;return"&#x"+NBe.toString(16).toUpperCase()+";"}function Zm(So,Xh){return function(ef){return ef.replace(Xh,function(Jm){return So[Jm]}).replace(ei,co).replace(xr,ti)}}var YR=br(ft);function Km(So){return So.replace(YR,ti).replace(ei,co).replace(xr,ti)}ue.escape=Km});p(Vm),Vm.encodeXML,Vm.encodeHTML,Vm.escape;var Ho=g(function(G,ue){Object.defineProperty(ue,"__esModule",{value:!0});function Ae(Bt,On){return(!On||On<=0?wd.decodeXML:wd.decodeHTML)(Bt)}ue.decode=Ae;function Fe(Bt,On){return(!On||On<=0?wd.decodeXML:wd.decodeHTMLStrict)(Bt)}ue.decodeStrict=Fe;function ft(Bt,On){return(!On||On<=0?Vm.encodeXML:Vm.encodeHTML)(Bt)}ue.encode=ft;var lt=Vm;ue.encodeXML=lt.encodeXML,ue.encodeHTML=lt.encodeHTML,ue.escape=lt.escape,ue.encodeHTML4=lt.encodeHTML,ue.encodeHTML5=lt.encodeHTML;var bn=wd;ue.decodeXML=bn.decodeXML,ue.decodeHTML=bn.decodeHTML,ue.decodeHTMLStrict=bn.decodeHTMLStrict,ue.decodeHTML4=bn.decodeHTML,ue.decodeHTML5=bn.decodeHTML,ue.decodeHTML4Strict=bn.decodeHTMLStrict,ue.decodeHTML5Strict=bn.decodeHTMLStrict,ue.decodeXMLStrict=bn.decodeXML});p(Ho),Ho.decode,Ho.decodeStrict,Ho.encode,Ho.encodeXML,Ho.encodeHTML,Ho.escape,Ho.encodeHTML4,Ho.encodeHTML5,Ho.decodeXML;var Yye=Ho.decodeHTML;Ho.decodeHTMLStrict,Ho.decodeHTML4,Ho.decodeHTML5,Ho.decodeHTML4Strict,Ho.decodeHTML5Strict,Ho.decodeXMLStrict;var h9e=92,Xye="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",Zye="[A-Za-z][A-Za-z0-9-]*",p9e="[a-zA-Z_:][a-zA-Z0-9:._-]*",m9e="[^\"'=<>`\\x00-\\x20]+",g9e="'[^']*'",y9e='"[^"]*"',v9e="(?:"+m9e+"|"+g9e+"|"+y9e+")",b9e="(?:\\s*=\\s*"+v9e+")",x9e="(?:\\s+"+p9e+b9e+"?)",Kye="<"+Zye+x9e+"*\\s*/?>",Jye="</"+Zye+"\\s*[>]",w9e="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",_9e="[<][?][\\s\\S]*?[?][>]",E9e="<![A-Z]+\\s+[^>]*>",S9e="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",A9e="(?:"+Kye+"|"+Jye+"|"+w9e+"|"+_9e+"|"+E9e+"|"+S9e+")",C9e=new RegExp("^"+A9e),k9e=/[\\&]/,Qye="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",T9e=new RegExp("\\\\"+Qye+"|"+Xye,"gi"),D9e='[&<>"]',eve=new RegExp(D9e,"g"),L9e=function(G){return G.charCodeAt(0)===h9e?G.charAt(1):Yye(G)},tve=function(G){return k9e.test(G)?G.replace(T9e,L9e):G},R9e=function(G){try{return d(G)}catch{return G}},F9e=function(G){switch(G){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return G}},nve=function(G){return eve.test(G)?G.replace(eve,F9e):G};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var UR;function qR(G){return UR(G)}if(String.fromCodePoint)UR=function(G){try{return String.fromCodePoint(G)}catch(ue){if(ue instanceof RangeError)return"";throw ue}};else{var O9e=String.fromCharCode,M9e=Math.floor;UR=function(){var G=16384,ue=[],Ae,Fe,ft=-1,lt=arguments.length;if(!lt)return"";for(var bn="";++ft<lt;){var Bt=Number(arguments[ft]);if(!isFinite(Bt)||Bt<0||Bt>1114111||M9e(Bt)!==Bt)return"";Bt<=65535?ue.push(Bt):(Bt-=65536,Ae=(Bt>>10)+55296,Fe=Bt%1024+56320,ue.push(Ae,Fe)),(ft+1===lt||ue.length>G)&&(bn+=O9e.apply(null,ue),ue.length=0)}return bn}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var G=function(){try{var Ae={},Fe=Object.defineProperty,ft=Fe(Ae,Ae,Ae)&&Fe}catch{}return ft}(),ue=function(Ae){if(this==null)throw TypeError();var Fe=String(this),ft=Ae?Number(Ae):0;if(ft!=ft&&(ft=0),ft<0||ft==1/0)throw RangeError();for(var lt="";ft;)ft%2==1&&(lt+=Fe),ft>1&&(Fe+=Fe),ft>>=1;return lt};G?G(String.prototype,"repeat",{value:ue,configurable:!0,writable:!0}):String.prototype.repeat=ue}();var GS=R9e,HR=tve,rve=10,GR=42,VS=95,$9e=96,ive=91,I9e=93,sve=60,P9e=33,ove=92,N9e=38,ave=40,VR=41,B9e=58,Wm=39,Ym=34,lve=Qye,WR="\\\\"+lve,z9e=Xye,j9e=C9e,uve=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),U9e=new RegExp('^(?:"('+WR+`|[^"\\x00])*"|'(`+WR+"|[^'\\x00])*'|\\(("+WR+"|[^()\\x00])*\\))"),q9e=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,cve=new RegExp("^"+lve),H9e=new RegExp("^"+z9e,"i"),G9e=/`+/,V9e=/^`+/,W9e=/\.\.\./g,Y9e=/--+/g,X9e=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Z9e=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,K9e=/^ *(?:\n *)?/,fve=/^[ \t\n\x0b\x0c\x0d]/,dve=/^\s/,J9e=/ *$/,Q9e=/^ */,hve=/^ *(?:\n|$)/,e7e=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,t7e=/^[^\n`\[\]\\!<&*_'"]+/m,pa=function(G){var ue=new a("text");return ue._literal=G,ue},pve=function(G){return G.slice(1,G.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},n7e=function(G){var ue=G.exec(this.subject.slice(this.pos));return ue===null?null:(this.pos+=ue.index+ue[0].length,ue[0])},r7e=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},i7e=function(){return this.match(K9e),!0},s7e=function(G){var ue=this.match(V9e);if(ue===null)return!1;for(var Ae=this.pos,Fe,ft,lt;(Fe=this.match(G9e))!==null;)if(Fe===ue)return ft=new a("code"),lt=this.subject.slice(Ae,this.pos-ue.length).replace(/\n/gm," "),lt.length>0&&lt.match(/[^ ]/)!==null&&lt[0]==" "&&lt[lt.length-1]==" "?ft._literal=lt.slice(1,lt.length-1):ft._literal=lt,G.appendChild(ft),!0;return this.pos=Ae,G.appendChild(pa(ue)),!0},o7e=function(G){var ue=this.subject,Ae;return this.pos+=1,this.peek()===rve?(this.pos+=1,Ae=new a("linebreak"),G.appendChild(Ae)):cve.test(ue.charAt(this.pos))?(G.appendChild(pa(ue.charAt(this.pos))),this.pos+=1):G.appendChild(pa("\\")),!0},a7e=function(G){var ue,Ae,Fe;return(ue=this.match(X9e))?(Ae=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=GS("mailto:"+Ae),Fe._title="",Fe.appendChild(pa(Ae)),G.appendChild(Fe),!0):(ue=this.match(Z9e))?(Ae=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=GS(Ae),Fe._title="",Fe.appendChild(pa(Ae)),G.appendChild(Fe),!0):!1},l7e=function(G){var ue=this.match(j9e);if(ue===null)return!1;var Ae=new a("html_inline");return Ae._literal=ue,G.appendChild(Ae),!0},u7e=function(G){var ue=0,Ae,Fe,ft,lt=this.pos,bn,Bt,On,Gr,br,xr,ei,ti;if(G===Wm||G===Ym)ue++,this.pos++;else for(;this.peek()===G;)ue++,this.pos++;return ue===0?null:(Ae=lt===0?`
`:this.subject.charAt(lt-1),ft=this.peek(),ft===-1?Fe=`
`:Fe=qR(ft),br=dve.test(Fe),xr=uve.test(Fe),ei=dve.test(Ae),ti=uve.test(Ae),bn=!br&&(!xr||ei||ti),Bt=!ei&&(!ti||br||xr),G===VS?(On=bn&&(!Bt||ti),Gr=Bt&&(!bn||xr)):G===Wm||G===Ym?(On=bn&&!Bt,Gr=Bt):(On=bn,Gr=Bt),this.pos=lt,{numdelims:ue,can_open:On,can_close:Gr})},c7e=function(G,ue){var Ae=this.scanDelims(G);if(!Ae)return!1;var Fe=Ae.numdelims,ft=this.pos,lt;this.pos+=Fe,G===Wm?lt="":G===Ym?lt="":lt=this.subject.slice(ft,this.pos);var bn=pa(lt);return ue.appendChild(bn),(Ae.can_open||Ae.can_close)&&(this.options.smart||G!==Wm&&G!==Ym)&&(this.delimiters={cc:G,numdelims:Fe,origdelims:Fe,node:bn,previous:this.delimiters,next:null,can_open:Ae.can_open,can_close:Ae.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},f7e=function(G){G.previous!==null&&(G.previous.next=G.next),G.next===null?this.delimiters=G.previous:G.next.previous=G.previous},d7e=function(G,ue){G.next!==ue&&(G.next=ue,ue.previous=G)},h7e=function(G){for(var ue,Ae,Fe,ft,lt,bn,Bt,On,Gr,br,xr=[[],[],[]],ei=!1,ti=0;ti<3;ti++)xr[ti][VS]=G,xr[ti][GR]=G,xr[ti][Wm]=G,xr[ti][Ym]=G;for(Ae=this.delimiters;Ae!==null&&Ae.previous!==G;)Ae=Ae.previous;for(;Ae!==null;){var co=Ae.cc;if(!Ae.can_close)Ae=Ae.next;else{for(ue=Ae.previous,br=!1;ue!==null&&ue!==G&&ue!==xr[Ae.origdelims%3][co];){if(ei=(Ae.can_open||ue.can_close)&&Ae.origdelims%3!==0&&(ue.origdelims+Ae.origdelims)%3===0,ue.cc===Ae.cc&&ue.can_open&&!ei){br=!0;break}ue=ue.previous}if(Fe=Ae,co===GR||co===VS)if(!br)Ae=Ae.next;else{Bt=Ae.numdelims>=2&&ue.numdelims>=2?2:1,ft=ue.node,lt=Ae.node,ue.numdelims-=Bt,Ae.numdelims-=Bt,ft._literal=ft._literal.slice(0,ft._literal.length-Bt),lt._literal=lt._literal.slice(0,lt._literal.length-Bt);var Zm=new a(Bt===1?"emph":"strong");for(On=ft._next;On&&On!==lt;)Gr=On._next,On.unlink(),Zm.appendChild(On),On=Gr;ft.insertAfter(Zm),d7e(ue,Ae),ue.numdelims===0&&(ft.unlink(),this.removeDelimiter(ue)),Ae.numdelims===0&&(lt.unlink(),bn=Ae.next,this.removeDelimiter(Ae),Ae=bn)}else co===Wm?(Ae.node._literal="",br&&(ue.node._literal=""),Ae=Ae.next):co===Ym&&(Ae.node._literal="",br&&(ue.node.literal=""),Ae=Ae.next);br||(xr[Fe.origdelims%3][co]=Fe.previous,Fe.can_open||this.removeDelimiter(Fe))}}for(;this.delimiters!==null&&this.delimiters!==G;)this.removeDelimiter(this.delimiters)},p7e=function(){var G=this.match(U9e);return G===null?null:HR(G.substr(1,G.length-2))},m7e=function(){var G=this.match(q9e);if(G===null){if(this.peek()===sve)return null;for(var ue=this.pos,Ae=0,Fe;(Fe=this.peek())!==-1;)if(Fe===ove&&cve.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(Fe===ave)this.pos+=1,Ae+=1;else if(Fe===VR){if(Ae<1)break;this.pos+=1,Ae-=1}else{if(fve.exec(qR(Fe))!==null)break;this.pos+=1}return this.pos===ue&&Fe!==VR||Ae!==0?null:(G=this.subject.substr(ue,this.pos-ue),GS(HR(G)))}else return GS(HR(G.substr(1,G.length-2)))},g7e=function(){var G=this.match(e7e);return G===null||G.length>1001?0:G.length},y7e=function(G){var ue=this.pos;this.pos+=1;var Ae=pa("[");return G.appendChild(Ae),this.addBracket(Ae,ue,!1),!0},v7e=function(G){var ue=this.pos;if(this.pos+=1,this.peek()===ive){this.pos+=1;var Ae=pa("![");G.appendChild(Ae),this.addBracket(Ae,ue+1,!0)}else G.appendChild(pa("!"));return!0},b7e=function(G){var ue,Ae,Fe,ft,lt=!1,bn,Bt;if(this.pos+=1,ue=this.pos,Bt=this.brackets,Bt===null)return G.appendChild(pa("]")),!0;if(!Bt.active)return G.appendChild(pa("]")),this.removeBracket(),!0;Ae=Bt.image;var On=this.pos;if(this.peek()===ave&&(this.pos++,this.spnl()&&(Fe=this.parseLinkDestination())!==null&&this.spnl()&&(fve.test(this.subject.charAt(this.pos-1))&&(ft=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===VR?(this.pos+=1,lt=!0):this.pos=On),!lt){var Gr=this.pos,br=this.parseLinkLabel();if(br>2?bn=this.subject.slice(Gr,Gr+br):Bt.bracketAfter||(bn=this.subject.slice(Bt.index,ue)),br===0&&(this.pos=On),bn){var xr=this.refmap[pve(bn)];xr&&(Fe=xr.destination,ft=xr.title,lt=!0)}}if(lt){var ei=new a(Ae?"image":"link");ei._destination=Fe,ei._title=ft||"";var ti,co;for(ti=Bt.node._next;ti;)co=ti._next,ti.unlink(),ei.appendChild(ti),ti=co;if(G.appendChild(ei),this.processEmphasis(Bt.previousDelimiter),this.removeBracket(),Bt.node.unlink(),!Ae)for(Bt=this.brackets;Bt!==null;)Bt.image||(Bt.active=!1),Bt=Bt.previous;return!0}else return this.removeBracket(),this.pos=ue,G.appendChild(pa("]")),!0},x7e=function(G,ue,Ae){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:G,previous:this.brackets,previousDelimiter:this.delimiters,index:ue,image:Ae,active:!0}},w7e=function(){this.brackets=this.brackets.previous},_7e=function(G){var ue;return(ue=this.match(H9e))?(G.appendChild(pa(Yye(ue))),!0):!1},E7e=function(G){var ue;return(ue=this.match(t7e))?(this.options.smart?G.appendChild(pa(ue.replace(W9e,"").replace(Y9e,function(Ae){var Fe=0,ft=0;return Ae.length%3===0?ft=Ae.length/3:Ae.length%2===0?Fe=Ae.length/2:Ae.length%3===2?(Fe=1,ft=(Ae.length-2)/3):(Fe=2,ft=(Ae.length-4)/3),"".repeat(ft)+"".repeat(Fe)}))):G.appendChild(pa(ue)),!0):!1},S7e=function(G){this.pos+=1;var ue=G._lastChild;if(ue&&ue.type==="text"&&ue._literal[ue._literal.length-1]===" "){var Ae=ue._literal[ue._literal.length-2]===" ";ue._literal=ue._literal.replace(J9e,""),G.appendChild(new a(Ae?"linebreak":"softbreak"))}else G.appendChild(new a("softbreak"));return this.match(Q9e),!0},A7e=function(G,ue){this.subject=G,this.pos=0;var Ae,Fe,ft,lt,bn=this.pos;if(lt=this.parseLinkLabel(),lt===0)return 0;if(Ae=this.subject.substr(0,lt),this.peek()===B9e)this.pos++;else return this.pos=bn,0;if(this.spnl(),Fe=this.parseLinkDestination(),Fe===null)return this.pos=bn,0;var Bt=this.pos;this.spnl(),this.pos!==Bt&&(ft=this.parseLinkTitle()),ft===null&&(ft="",this.pos=Bt);var On=!0;if(this.match(hve)===null&&(ft===""?On=!1:(ft="",this.pos=Bt,On=this.match(hve)!==null)),!On)return this.pos=bn,0;var Gr=pve(Ae);return Gr===""?(this.pos=bn,0):(ue[Gr]||(ue[Gr]={destination:Fe,title:ft}),this.pos-bn)},C7e=function(G){var ue=!1,Ae=this.peek();if(Ae===-1)return!1;switch(Ae){case rve:ue=this.parseNewline(G);break;case ove:ue=this.parseBackslash(G);break;case $9e:ue=this.parseBackticks(G);break;case GR:case VS:ue=this.handleDelim(Ae,G);break;case Wm:case Ym:ue=this.options.smart&&this.handleDelim(Ae,G);break;case ive:ue=this.parseOpenBracket(G);break;case P9e:ue=this.parseBang(G);break;case I9e:ue=this.parseCloseBracket(G);break;case sve:ue=this.parseAutolink(G)||this.parseHtmlTag(G);break;case N9e:ue=this.parseEntity(G);break;default:ue=this.parseString(G);break}return ue||(this.pos+=1,G.appendChild(pa(qR(Ae)))),!0},k7e=function(G){for(this.subject=G._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(G););G._string_content=null,this.processEmphasis(null)};function T7e(G){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:n7e,peek:r7e,spnl:i7e,parseBackticks:s7e,parseBackslash:o7e,parseAutolink:a7e,parseHtmlTag:l7e,scanDelims:u7e,handleDelim:c7e,parseLinkTitle:p7e,parseLinkDestination:m7e,parseLinkLabel:g7e,parseOpenBracket:y7e,parseBang:v7e,parseCloseBracket:b7e,addBracket:x7e,removeBracket:w7e,parseEntity:_7e,parseString:E7e,parseNewline:S7e,parseReference:A7e,parseInline:C7e,processEmphasis:h7e,removeDelimiter:f7e,options:G||{},parse:k7e}}var WS=4,mve=9,D7e=10,gve=62,L7e=60,yve=32,vve=91,R7e=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+Kye+"|"+Jye+")\\s*$","i")],F7e=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],O7e=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,M7e=/^[#`~*+_=<>0-9-]/,bve=/[^ \t\f\v\r\n]/,$7e=/^[*+-]/,I7e=/^(\d{1,9})([.)])/,P7e=/^#{1,6}(?:[ \t]+|$)/,N7e=/^`{3,}(?!.*`)|^~{3,}/,B7e=/^(?:`{3,}|~{3,})(?= *$)/,z7e=/^(?:=+|-+)[ \t]*$/,j7e=/\r\n|\n|\r/,U7e=function(G){return!bve.test(G)},Qx=function(G){return G===yve||G===mve},mu=function(G,ue){return ue<G.length?G.charCodeAt(ue):-1},xve=function(G){for(;G;){if(G._lastLineBlank)return!0;var ue=G.type;if(!G._lastLineChecked&&(ue==="list"||ue==="item"))G._lastLineChecked=!0,G=G._lastChild;else{G._lastLineChecked=!0;break}}return!1},q7e=function(){if(this.partiallyConsumedTab){this.offset+=1;var G=4-this.column%4;this.tip._string_content+=" ".repeat(G)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},H7e=function(G,ue){for(;!this.blocks[this.tip.type].canContain(G);)this.finalize(this.tip,this.lineNumber-1);var Ae=ue+1,Fe=new a(G,[[this.lineNumber,Ae],[0,0]]);return Fe._string_content="",this.tip.appendChild(Fe),this.tip=Fe,Fe},G7e=function(G,ue){var Ae=G.currentLine.slice(G.nextNonspace),Fe,ft,lt,bn,Bt={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:G.indent};if(G.indent>=4)return null;if(Fe=Ae.match($7e))Bt.type="bullet",Bt.bulletChar=Fe[0][0];else if((Fe=Ae.match(I7e))&&(ue.type!=="paragraph"||Fe[1]==="1"))Bt.type="ordered",Bt.start=parseInt(Fe[1]),Bt.delimiter=Fe[2];else return null;if(ft=mu(G.currentLine,G.nextNonspace+Fe[0].length),!(ft===-1||ft===mve||ft===yve)||ue.type==="paragraph"&&!G.currentLine.slice(G.nextNonspace+Fe[0].length).match(bve))return null;G.advanceNextNonspace(),G.advanceOffset(Fe[0].length,!0),lt=G.column,bn=G.offset;do G.advanceOffset(1,!0),ft=mu(G.currentLine,G.offset);while(G.column-lt<5&&Qx(ft));var On=mu(G.currentLine,G.offset)===-1,Gr=G.column-lt;return Gr>=5||Gr<1||On?(Bt.padding=Fe[0].length+1,G.column=lt,G.offset=bn,Qx(mu(G.currentLine,G.offset))&&G.advanceOffset(1,!0)):Bt.padding=Fe[0].length+Gr,Bt},V7e=function(G,ue){return G.type===ue.type&&G.delimiter===ue.delimiter&&G.bulletChar===ue.bulletChar},W7e=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var G=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=G}this.allClosed=!0}},wve={document:{continue:function(){return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(G,ue){for(var Ae=ue._firstChild;Ae;){if(xve(Ae)&&Ae._next){ue._listData.tight=!1;break}for(var Fe=Ae._firstChild;Fe;){if(xve(Fe)&&(Ae._next||Fe._next)){ue._listData.tight=!1;break}Fe=Fe._next}Ae=Ae._next}},canContain:function(G){return G==="item"},acceptsLines:!1},block_quote:{continue:function(G){var ue=G.currentLine;if(!G.indented&&mu(ue,G.nextNonspace)===gve)G.advanceNextNonspace(),G.advanceOffset(1,!1),Qx(mu(ue,G.offset))&&G.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},item:{continue:function(G,ue){if(G.blank){if(ue._firstChild==null)return 1;G.advanceNextNonspace()}else if(G.indent>=ue._listData.markerOffset+ue._listData.padding)G.advanceOffset(ue._listData.markerOffset+ue._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(G,ue){var Ae=G.currentLine,Fe=G.indent;if(ue._isFenced){var ft=Fe<=3&&Ae.charAt(G.nextNonspace)===ue._fenceChar&&Ae.slice(G.nextNonspace).match(B7e);if(ft&&ft[0].length>=ue._fenceLength)return G.lastLineLength=G.offset+Fe+ft[0].length,G.finalize(ue,G.lineNumber),2;for(var lt=ue._fenceOffset;lt>0&&Qx(mu(Ae,G.offset));)G.advanceOffset(1,!0),lt--}else if(Fe>=WS)G.advanceOffset(WS,!0);else if(G.blank)G.advanceNextNonspace();else return 1;return 0},finalize:function(G,ue){if(ue._isFenced){var Ae=ue._string_content,Fe=Ae.indexOf(`
`),ft=Ae.slice(0,Fe),lt=Ae.slice(Fe+1);ue.info=tve(ft.trim()),ue._literal=lt}else ue._literal=ue._string_content.replace(/(\n *)+$/,`
`);ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(G,ue){return G.blank&&(ue._htmlBlockType===6||ue._htmlBlockType===7)?1:0},finalize:function(G,ue){ue._literal=ue._string_content.replace(/(\n *)+$/,""),ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(G){return G.blank?1:0},finalize:function(G,ue){for(var Ae,Fe=!1;mu(ue._string_content,0)===vve&&(Ae=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Ae),Fe=!0;Fe&&U7e(ue._string_content)&&ue.unlink()},canContain:function(){return!1},acceptsLines:!0}},Y7e=[function(G){return!G.indented&&mu(G.currentLine,G.nextNonspace)===gve?(G.advanceNextNonspace(),G.advanceOffset(1,!1),Qx(mu(G.currentLine,G.offset))&&G.advanceOffset(1,!0),G.closeUnmatchedBlocks(),G.addChild("block_quote",G.nextNonspace),1):0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(P7e))){G.advanceNextNonspace(),G.advanceOffset(ue[0].length,!1),G.closeUnmatchedBlocks();var Ae=G.addChild("heading",G.nextNonspace);return Ae.level=ue[0].trim().length,Ae._string_content=G.currentLine.slice(G.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),G.advanceOffset(G.currentLine.length-G.offset),2}else return 0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(N7e))){var Ae=ue[0].length;G.closeUnmatchedBlocks();var Fe=G.addChild("code_block",G.nextNonspace);return Fe._isFenced=!0,Fe._fenceLength=Ae,Fe._fenceChar=ue[0][0],Fe._fenceOffset=G.indent,G.advanceNextNonspace(),G.advanceOffset(Ae,!1),2}else return 0},function(G,ue){if(!G.indented&&mu(G.currentLine,G.nextNonspace)===L7e){var Ae=G.currentLine.slice(G.nextNonspace),Fe;for(Fe=1;Fe<=7;Fe++)if(R7e[Fe].test(Ae)&&(Fe<7||ue.type!=="paragraph")){G.closeUnmatchedBlocks();var ft=G.addChild("html_block",G.offset);return ft._htmlBlockType=Fe,2}}return 0},function(G,ue){var Ae;if(!G.indented&&ue.type==="paragraph"&&(Ae=G.currentLine.slice(G.nextNonspace).match(z7e))){G.closeUnmatchedBlocks();for(var Fe;mu(ue._string_content,0)===vve&&(Fe=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Fe);if(ue._string_content.length>0){var ft=new a("heading",ue.sourcepos);return ft.level=Ae[0][0]==="="?1:2,ft._string_content=ue._string_content,ue.insertAfter(ft),ue.unlink(),G.tip=ft,G.advanceOffset(G.currentLine.length-G.offset,!1),2}else return 0}else return 0},function(G){return!G.indented&&O7e.test(G.currentLine.slice(G.nextNonspace))?(G.closeUnmatchedBlocks(),G.addChild("thematic_break",G.nextNonspace),G.advanceOffset(G.currentLine.length-G.offset,!1),2):0},function(G,ue){var Ae;return(!G.indented||ue.type==="list")&&(Ae=G7e(G,ue))?(G.closeUnmatchedBlocks(),(G.tip.type!=="list"||!V7e(ue._listData,Ae))&&(ue=G.addChild("list",G.nextNonspace),ue._listData=Ae),ue=G.addChild("item",G.nextNonspace),ue._listData=Ae,1):0},function(G){return G.indented&&G.tip.type!=="paragraph"&&!G.blank?(G.advanceOffset(WS,!0),G.closeUnmatchedBlocks(),G.addChild("code_block",G.offset),2):0}],X7e=function(G,ue){for(var Ae=this.currentLine,Fe,ft,lt;G>0&&(lt=Ae[this.offset]);)lt==="	"?(Fe=4-this.column%4,ue?(this.partiallyConsumedTab=Fe>G,ft=Fe>G?G:Fe,this.column+=ft,this.offset+=this.partiallyConsumedTab?0:1,G-=ft):(this.partiallyConsumedTab=!1,this.column+=Fe,this.offset+=1,G-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,G-=1)},Z7e=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},K7e=function(){for(var G=this.currentLine,ue=this.offset,Ae=this.column,Fe;(Fe=G.charAt(ue))!=="";)if(Fe===" ")ue++,Ae++;else if(Fe==="	")ue++,Ae+=4-Ae%4;else break;this.blank=Fe===`
`||Fe==="\r"||Fe==="",this.nextNonspace=ue,this.nextNonspaceColumn=Ae,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=WS},J7e=function(G){var ue=!0,Ae,Fe=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,G.indexOf("\0")!==-1&&(G=G.replace(/\0/g,"")),this.currentLine=G;for(var ft;(ft=Fe._lastChild)&&ft._open;){switch(Fe=ft,this.findNextNonspace(),this.blocks[Fe.type].continue(this,Fe)){case 0:break;case 1:ue=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!ue){Fe=Fe._parent;break}}this.allClosed=Fe===this.oldtip,this.lastMatchedContainer=Fe;for(var lt=Fe.type!=="paragraph"&&wve[Fe.type].acceptsLines,bn=this.blockStarts,Bt=bn.length;!lt;){if(this.findNextNonspace(),!this.indented&&!M7e.test(G.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var On=0;On<Bt;){var Gr=bn[On](this,Fe);if(Gr===1){Fe=this.tip;break}else if(Gr===2){Fe=this.tip,lt=!0;break}else On++}if(On===Bt){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&Fe.lastChild&&(Fe.lastChild._lastLineBlank=!0),Ae=Fe.type;for(var br=this.blank&&!(Ae==="block_quote"||Ae==="code_block"&&Fe._isFenced||Ae==="item"&&!Fe._firstChild&&Fe.sourcepos[0][0]===this.lineNumber),xr=Fe;xr;)xr._lastLineBlank=br,xr=xr._parent;this.blocks[Ae].acceptsLines?(this.addLine(),Ae==="html_block"&&Fe._htmlBlockType>=1&&Fe._htmlBlockType<=5&&F7e[Fe._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=G.length,this.finalize(Fe,this.lineNumber))):this.offset<G.length&&!this.blank&&(Fe=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=G.length},Q7e=function(G,ue){var Ae=G._parent;G._open=!1,G.sourcepos[1]=[ue,this.lastLineLength],this.blocks[G.type].finalize(this,G),this.tip=Ae},eBe=function(G){var ue,Ae,Fe,ft=G.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;Ae=ft.next();)ue=Ae.node,Fe=ue.type,!Ae.entering&&(Fe==="paragraph"||Fe==="heading")&&this.inlineParser.parse(ue)},_ve=function(){var G=new a("document",[[1,1],[0,0]]);return G},tBe=function(G){this.doc=new _ve,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var ue=G.split(j7e),Ae=ue.length;G.charCodeAt(G.length-1)===D7e&&(Ae-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var Fe=0;Fe<Ae;Fe++)this.incorporateLine(ue[Fe]);for(;this.tip;)this.finalize(this.tip,Ae);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function nBe(G){return{doc:new _ve,blocks:wve,blockStarts:Y7e,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new T7e(G),findNextNonspace:K7e,advanceOffset:X7e,advanceNextNonspace:Z7e,addLine:q7e,addChild:H7e,incorporateLine:J7e,finalize:Q7e,processInlines:eBe,closeUnmatchedBlocks:W7e,parse:tBe,options:G||{}}}function Yh(){}function rBe(G){var ue=G.walker(),Ae,Fe;for(this.buffer="",this.lastOut=`
`;Ae=ue.next();)Fe=Ae.node.type,this[Fe]&&this[Fe](Ae.node,Ae.entering);return this.buffer}function iBe(G){this.buffer+=G,this.lastOut=G}function sBe(){this.lastOut!==`
`&&this.lit(`
`)}function oBe(G){this.lit(G)}function aBe(G){return G}Yh.prototype.render=rBe,Yh.prototype.out=oBe,Yh.prototype.lit=iBe,Yh.prototype.cr=sBe,Yh.prototype.esc=aBe;var lBe=/^javascript:|vbscript:|file:|data:/i,uBe=/^data:image\/(?:png|gif|jpeg|webp)/i,Eve=function(G){return lBe.test(G)&&!uBe.test(G)};function cBe(G,ue,Ae){if(!(this.disableTags>0)){if(this.buffer+="<"+G,ue&&ue.length>0)for(var Fe=0,ft;(ft=ue[Fe])!==void 0;)this.buffer+=" "+ft[0]+'="'+ft[1]+'"',Fe++;Ae&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function ns(G){G=G||{},G.softbreak=G.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=G}function fBe(G){this.out(G.literal)}function dBe(){this.lit(this.options.softbreak)}function hBe(){this.tag("br",[],!0),this.cr()}function pBe(G,ue){var Ae=this.attrs(G);ue?(this.options.safe&&Eve(G.destination)||Ae.push(["href",this.esc(G.destination)]),G.title&&Ae.push(["title",this.esc(G.title)]),this.tag("a",Ae)):this.tag("/a")}function mBe(G,ue){ue?(this.disableTags===0&&(this.options.safe&&Eve(G.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(G.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(G.title&&this.lit('" title="'+this.esc(G.title)),this.lit('" />')))}function gBe(G,ue){this.tag(ue?"em":"/em")}function yBe(G,ue){this.tag(ue?"strong":"/strong")}function vBe(G,ue){var Ae=G.parent.parent,Fe=this.attrs(G);Ae!==null&&Ae.type==="list"&&Ae.listTight||(ue?(this.cr(),this.tag("p",Fe)):(this.tag("/p"),this.cr()))}function bBe(G,ue){var Ae="h"+G.level,Fe=this.attrs(G);ue?(this.cr(),this.tag(Ae,Fe)):(this.tag("/"+Ae),this.cr())}function xBe(G){this.tag("code"),this.out(G.literal),this.tag("/code")}function wBe(G){var ue=G.info?G.info.split(/\s+/):[],Ae=this.attrs(G);ue.length>0&&ue[0].length>0&&Ae.push(["class","language-"+this.esc(ue[0])]),this.cr(),this.tag("pre"),this.tag("code",Ae),this.out(G.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function _Be(G){var ue=this.attrs(G);this.cr(),this.tag("hr",ue,!0),this.cr()}function EBe(G,ue){var Ae=this.attrs(G);ue?(this.cr(),this.tag("blockquote",Ae),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function SBe(G,ue){var Ae=G.listType==="bullet"?"ul":"ol",Fe=this.attrs(G);if(ue){var ft=G.listStart;ft!==null&&ft!==1&&Fe.push(["start",ft.toString()]),this.cr(),this.tag(Ae,Fe),this.cr()}else this.cr(),this.tag("/"+Ae),this.cr()}function ABe(G,ue){var Ae=this.attrs(G);ue?this.tag("li",Ae):(this.tag("/li"),this.cr())}function CBe(G){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal)}function kBe(G){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal),this.cr()}function TBe(G,ue){ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit)}function DBe(G,ue){this.cr(),ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit),this.cr()}function LBe(G){this.lit(this.esc(G))}function RBe(G){var ue=[];if(this.options.sourcepos){var Ae=G.sourcepos;Ae&&ue.push(["data-sourcepos",String(Ae[0][0])+":"+String(Ae[0][1])+"-"+String(Ae[1][0])+":"+String(Ae[1][1])])}return ue}ns.prototype=Object.create(Yh.prototype),ns.prototype.text=fBe,ns.prototype.html_inline=CBe,ns.prototype.html_block=kBe,ns.prototype.softbreak=dBe,ns.prototype.linebreak=hBe,ns.prototype.link=pBe,ns.prototype.image=mBe,ns.prototype.emph=gBe,ns.prototype.strong=yBe,ns.prototype.paragraph=vBe,ns.prototype.heading=bBe,ns.prototype.code=xBe,ns.prototype.code_block=wBe,ns.prototype.thematic_break=_Be,ns.prototype.block_quote=EBe,ns.prototype.list=SBe,ns.prototype.item=ABe,ns.prototype.custom_inline=TBe,ns.prototype.custom_block=DBe,ns.prototype.esc=nve,ns.prototype.out=LBe,ns.prototype.tag=cBe,ns.prototype.attrs=RBe;var FBe=/\<[^>]*\>/;function OBe(G){return G.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function Xm(G){G=G||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=G}function MBe(G){this.buffer="";var ue,Ae,Fe=G.walker(),ft,lt,bn,Bt,On,Gr,br=this.options;for(br.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;ft=Fe.next();)if(bn=ft.entering,lt=ft.node,Gr=lt.type,Bt=lt.isContainer,On=Gr==="thematic_break"||Gr==="linebreak"||Gr==="softbreak",Ae=OBe(Gr),bn){switch(ue=[],Gr){case"document":ue.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":lt.listType!==null&&ue.push(["type",lt.listType.toLowerCase()]),lt.listStart!==null&&ue.push(["start",String(lt.listStart)]),lt.listTight!==null&&ue.push(["tight",lt.listTight?"true":"false"]);var xr=lt.listDelimiter;if(xr!==null){var ei="";xr==="."?ei="period":ei="paren",ue.push(["delimiter",ei])}break;case"code_block":lt.info&&ue.push(["info",lt.info]);break;case"heading":ue.push(["level",String(lt.level)]);break;case"link":case"image":ue.push(["destination",lt.destination]),ue.push(["title",lt.title]);break;case"custom_inline":case"custom_block":ue.push(["on_enter",lt.onEnter]),ue.push(["on_exit",lt.onExit]);break}if(br.sourcepos){var ti=lt.sourcepos;ti&&ue.push(["sourcepos",String(ti[0][0])+":"+String(ti[0][1])+"-"+String(ti[1][0])+":"+String(ti[1][1])])}if(this.cr(),this.out(this.tag(Ae,ue,On)),Bt)this.indentLevel+=1;else if(!Bt&&!On){var co=lt.literal;co&&this.out(this.esc(co)),this.out(this.tag("/"+Ae))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+Ae));return br.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function $Be(G){this.disableTags>0?this.buffer+=G.replace(FBe,""):this.buffer+=G,this.lastOut=G}function IBe(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var G=this.indentLevel;G>0;G--)this.buffer+=this.indent}}function PBe(G,ue,Ae){var Fe="<"+G;if(ue&&ue.length>0)for(var ft=0,lt;(lt=ue[ft])!==void 0;)Fe+=" "+lt[0]+'="'+this.esc(lt[1])+'"',ft++;return Ae&&(Fe+=" /"),Fe+=">",Fe}Xm.prototype=Object.create(Yh.prototype),Xm.prototype.render=MBe,Xm.prototype.out=$Be,Xm.prototype.cr=IBe,Xm.prototype.tag=PBe,Xm.prototype.esc=nve,n.HtmlRenderer=ns,n.Node=a,n.Parser=nBe,n.Renderer=Yh,n.XmlRenderer=Xm,Object.defineProperty(n,"__esModule",{value:!0})})}(d_,d_.exports)),d_.exports}var aC={exports:{}},_M,_Se;function KOt(){if(_Se)return _M;_Se=1;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,l=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var w=(b-y)*f+1>>>0,E=new Uint8Array(w);y!==b;){for(var A=p[y],T=0,D=w-1;(A!==0||T<v)&&D!==-1;D--,T++)A+=256*E[D]>>>0,E[D]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");v=T,y++}for(var k=w-v;k!==w&&E[k]===0;)k++;for(var R=l.repeat(g);k<w;++k)R+=t.charAt(E[k]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,y=0;p[g]===l;)v++,g++;for(var b=(p.length-g)*u+1>>>0,w=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var A=0,T=b-1;(E!==0||A<y)&&T!==-1;T--,A++)E+=a*w[T]>>>0,w[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=A,g++}if(p[g]!==" "){for(var D=b-y;D!==b&&w[D]===0;)D++;for(var k=new Uint8Array(v+(b-D)),R=v;D!==b;)k[R++]=w[D++];return k}}}function h(p){var g=d(p);if(g)return g;throw new Error("Non-base"+a+" character")}return{encode:c,decodeUnsafe:d,decode:h}}return _M=e,_M}var lC={},EM={},SM={},AM,ESe;function t8e(){return ESe||(ESe=1,AM=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),AM}var CM,SSe;function ZB(){if(SSe)return CM;SSe=1;var e=t8e();return CM=function(){return e()&&!!Symbol.toStringTag},CM}var kM,ASe;function JOt(){return ASe||(ASe=1,kM=Error),kM}var TM,CSe;function QOt(){return CSe||(CSe=1,TM=EvalError),TM}var DM,kSe;function eMt(){return kSe||(kSe=1,DM=RangeError),DM}var LM,TSe;function tMt(){return TSe||(TSe=1,LM=ReferenceError),LM}var RM,DSe;function n8e(){return DSe||(DSe=1,RM=SyntaxError),RM}var FM,LSe;function MR(){return LSe||(LSe=1,FM=TypeError),FM}var OM,RSe;function nMt(){return RSe||(RSe=1,OM=URIError),OM}var MM,FSe;function rMt(){if(FSe)return MM;FSe=1;var e=typeof Symbol<"u"&&Symbol,t=t8e();return MM=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},MM}var $M,OSe;function iMt(){if(OSe)return $M;OSe=1;var e={__proto__:null,foo:{}},t=Object;return $M=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof t)},$M}var IM,MSe;function sMt(){if(MSe)return IM;MSe=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,u){for(var f=[],c=0;c<l.length;c+=1)f[c]=l[c];for(var d=0;d<u.length;d+=1)f[d+l.length]=u[d];return f},s=function(l,u){for(var f=[],c=u,d=0;c<l.length;c+=1,d+=1)f[d]=l[c];return f},o=function(a,l){for(var u="",f=0;f<a.length;f+=1)u+=a[f],f+1<a.length&&(u+=l);return u};return IM=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==r)throw new TypeError(e+u);for(var f=s(arguments,1),c,d=function(){if(this instanceof c){var y=u.apply(this,i(f,arguments));return Object(y)===y?y:this}return u.apply(l,i(f,arguments))},h=n(0,u.length-f.length),p=[],g=0;g<h;g++)p[g]="$"+g;if(c=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var v=function(){};v.prototype=u.prototype,c.prototype=new v,v.prototype=null}return c},IM}var PM,$Se;function KB(){if($Se)return PM;$Se=1;var e=sMt();return PM=Function.prototype.bind||e,PM}var NM,ISe;function oMt(){if(ISe)return NM;ISe=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,n=KB();return NM=n.call(e,t),NM}var BM,PSe;function cS(){if(PSe)return BM;PSe=1;var e,t=JOt(),n=QOt(),r=eMt(),i=tMt(),s=n8e(),o=MR(),a=nMt(),l=Function,u=function(q){try{return l('"use strict"; return ('+q+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var c=function(){throw new o},d=f?function(){try{return arguments.callee,c}catch{try{return f(arguments,"callee").get}catch{return c}}}():c,h=rMt()(),p=iMt()(),g=Object.getPrototypeOf||(p?function(q){return q.__proto__}:null),v={},y=typeof Uint8Array>"u"||!g?e:g(Uint8Array),b={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":h&&g?g([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&g?g(g([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!h||!g?e:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":r,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!h||!g?e:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&g?g(""[Symbol.iterator]()):e,"%Symbol%":h?Symbol:e,"%SyntaxError%":s,"%ThrowTypeError%":d,"%TypedArray%":y,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet};if(g)try{null.error}catch(q){var w=g(g(q));b["%Error.prototype%"]=w}var E=function q(Y){var X;if(Y==="%AsyncFunction%")X=u("async function () {}");else if(Y==="%GeneratorFunction%")X=u("function* () {}");else if(Y==="%AsyncGeneratorFunction%")X=u("async function* () {}");else if(Y==="%AsyncGenerator%"){var te=q("%AsyncGeneratorFunction%");te&&(X=te.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var le=q("%AsyncGenerator%");le&&g&&(X=g(le.prototype))}return b[Y]=X,X},A={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=KB(),D=oMt(),k=T.call(Function.call,Array.prototype.concat),R=T.call(Function.apply,Array.prototype.splice),O=T.call(Function.call,String.prototype.replace),B=T.call(Function.call,String.prototype.slice),K=T.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,I=function(Y){var X=B(Y,0,1),te=B(Y,-1);if(X==="%"&&te!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(te==="%"&&X!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var le=[];return O(Y,L,function(ee,z,he,de){le[le.length]=he?O(de,$,"$1"):z||ee}),le},U=function(Y,X){var te=Y,le;if(D(A,te)&&(le=A[te],te="%"+le[0]+"%"),D(b,te)){var ee=b[te];if(ee===v&&(ee=E(te)),typeof ee>"u"&&!X)throw new o("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:le,name:te,value:ee}}throw new s("intrinsic "+Y+" does not exist!")};return BM=function(Y,X){if(typeof Y!="string"||Y.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof X!="boolean")throw new o('"allowMissing" argument must be a boolean');if(K(/^%?[^%]*%?$/,Y)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var te=I(Y),le=te.length>0?te[0]:"",ee=U("%"+le+"%",X),z=ee.name,he=ee.value,de=!1,ze=ee.alias;ze&&(le=ze[0],R(te,k([0,1],ze)));for(var He=1,je=!0;He<te.length;He+=1){var we=te[He],Ie=B(we,0,1),qe=B(we,-1);if((Ie==='"'||Ie==="'"||Ie==="`"||qe==='"'||qe==="'"||qe==="`")&&Ie!==qe)throw new s("property names with quotes must have matching quotes");if((we==="constructor"||!je)&&(de=!0),le+="."+we,z="%"+le+"%",D(b,z))he=b[z];else if(he!=null){if(!(we in he)){if(!X)throw new o("base intrinsic for "+Y+" exists, but the property is not available.");return}if(f&&He+1>=te.length){var Pe=f(he,we);je=!!Pe,je&&"get"in Pe&&!("originalValue"in Pe.get)?he=Pe.get:he=he[we]}else je=D(he,we),he=he[we];je&&!de&&(b[z]=he)}}return he},BM}var zM={exports:{}},jM,NSe;function JB(){if(NSe)return jM;NSe=1;var e=cS(),t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return jM=t,jM}var UM,BSe;function QB(){if(BSe)return UM;BSe=1;var e=cS(),t=e("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return UM=t,UM}var qM,zSe;function aMt(){if(zSe)return qM;zSe=1;var e=JB(),t=n8e(),n=MR(),r=QB();return qM=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new n("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,d=!!r&&r(s,o);if(e)e(s,o,{configurable:f===null&&d?d.configurable:!f,enumerable:l===null&&d?d.enumerable:!l,value:a,writable:u===null&&d?d.writable:!u});else if(c||!l&&!u&&!f)s[o]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},qM}var HM,jSe;function lMt(){if(jSe)return HM;jSe=1;var e=JB(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},HM=t,HM}var GM,USe;function uMt(){if(USe)return GM;USe=1;var e=cS(),t=aMt(),n=lMt()(),r=QB(),i=MR(),s=e("%Math.floor%");return GM=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],f=!0,c=!0;if("length"in a&&r){var d=r(a,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(c=!1)}return(f||c||!u)&&(n?t(a,"length",l,!0,!0):t(a,"length",l)),a},GM}var qSe;function r8e(){return qSe||(qSe=1,function(e){var t=KB(),n=cS(),r=uMt(),i=MR(),s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(o,s),l=JB(),u=n("%Math.max%");e.exports=function(d){if(typeof d!="function")throw new i("a function is required");var h=a(t,o,arguments);return r(h,1+u(0,d.length-(arguments.length-1)),!0)};var f=function(){return a(t,s,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f}(zM)),zM.exports}var VM,HSe;function i8e(){if(HSe)return VM;HSe=1;var e=cS(),t=r8e(),n=t(e("String.prototype.indexOf"));return VM=function(i,s){var o=e(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?t(o):o},VM}var WM,GSe;function cMt(){if(GSe)return WM;GSe=1;var e=ZB()(),t=i8e(),n=t("Object.prototype.toString"),r=function(a){return e&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:n(a)==="[object Arguments]"},i=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&n(a)!=="[object Array]"&&n(a.callee)==="[object Function]"},s=function(){return r(arguments)}();return r.isLegacyArguments=i,WM=s?r:i,WM}var YM,VSe;function fMt(){if(VSe)return YM;VSe=1;var e=Object.prototype.toString,t=Function.prototype.toString,n=/^\s*(?:function)?\*/,r=ZB()(),i=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return YM=function(l){if(typeof l!="function")return!1;if(n.test(t.call(l)))return!0;if(!r){var u=e.call(l);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof o>"u"){var f=s();o=f?i(f):!1}return i(l)===o},YM}var XM,WSe;function dMt(){if(WSe)return XM;WSe=1;var e=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},t(function(){throw 42},null,n)}catch(b){b!==r&&(t=null)}else t=null;var i=/^\s*class\b/,s=function(w){try{var E=e.call(w);return i.test(E)}catch{return!1}},o=function(w){try{return s(w)?!1:(e.call(w),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",f="[object GeneratorFunction]",c="[object HTMLAllCollection]",d="[object HTML document.all class]",h="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,g=!(0 in[,]),v=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(v=function(w){if((g||!w)&&(typeof w>"u"||typeof w=="object"))try{var E=a.call(w);return(E===c||E===d||E===h||E===l)&&w("")==null}catch{}return!1})}return XM=t?function(w){if(v(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;try{t(w,null,n)}catch(E){if(E!==r)return!1}return!s(w)&&o(w)}:function(w){if(v(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;if(p)return o(w);if(s(w))return!1;var E=a.call(w);return E!==u&&E!==f&&!/^\[object HTML/.test(E)?!1:o(w)},XM}var ZM,YSe;function hMt(){if(YSe)return ZM;YSe=1;var e=dMt(),t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(l,u,f){for(var c=0,d=l.length;c<d;c++)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},i=function(l,u,f){for(var c=0,d=l.length;c<d;c++)f==null?u(l.charAt(c),c,l):u.call(f,l.charAt(c),c,l)},s=function(l,u,f){for(var c in l)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},o=function(l,u,f){if(!e(u))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=f),t.call(l)==="[object Array]"?r(l,u,c):typeof l=="string"?i(l,u,c):s(l,u,c)};return ZM=o,ZM}var KM,XSe;function pMt(){return XSe||(XSe=1,KM=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),KM}var JM,ZSe;function mMt(){if(ZSe)return JM;ZSe=1;var e=pMt(),t=typeof globalThis>"u"?Yi:globalThis;return JM=function(){for(var r=[],i=0;i<e.length;i++)typeof t[e[i]]=="function"&&(r[r.length]=e[i]);return r},JM}var QM,KSe;function s8e(){if(KSe)return QM;KSe=1;var e=hMt(),t=mMt(),n=r8e(),r=i8e(),i=QB(),s=r("Object.prototype.toString"),o=ZB()(),a=typeof globalThis>"u"?Yi:globalThis,l=t(),u=r("String.prototype.slice"),f=Object.getPrototypeOf,c=r("Array.prototype.indexOf",!0)||function(v,y){for(var b=0;b<v.length;b+=1)if(v[b]===y)return b;return-1},d={__proto__:null};o&&i&&f?e(l,function(g){var v=new a[g];if(Symbol.toStringTag in v){var y=f(v),b=i(y,Symbol.toStringTag);if(!b){var w=f(y);b=i(w,Symbol.toStringTag)}d["$"+g]=n(b.get)}}):e(l,function(g){var v=new a[g],y=v.slice||v.set;y&&(d["$"+g]=n(y))});var h=function(v){var y=!1;return e(d,function(b,w){if(!y)try{"$"+b(v)===w&&(y=u(w,1))}catch{}}),y},p=function(v){var y=!1;return e(d,function(b,w){if(!y)try{b(v),y=u(w,1)}catch{}}),y};return QM=function(v){if(!v||typeof v!="object")return!1;if(!o){var y=u(s(v),8,-1);return c(l,y)>-1?y:y!=="Object"?!1:p(v)}return i?h(v):null},QM}var e4,JSe;function gMt(){if(JSe)return e4;JSe=1;var e=s8e();return e4=function(n){return!!e(n)},e4}var QSe;function yMt(){return QSe||(QSe=1,function(e){var t=cMt(),n=fMt(),r=s8e(),i=gMt();function s(pe){return pe.call.bind(pe)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),u=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),c=s(Boolean.prototype.valueOf);if(o)var d=s(BigInt.prototype.valueOf);if(a)var h=s(Symbol.prototype.valueOf);function p(pe,ie){if(typeof pe!="object")return!1;try{return ie(pe),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=n,e.isTypedArray=i;function g(pe){return typeof Promise<"u"&&pe instanceof Promise||pe!==null&&typeof pe=="object"&&typeof pe.then=="function"&&typeof pe.catch=="function"}e.isPromise=g;function v(pe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(pe):i(pe)||z(pe)}e.isArrayBufferView=v;function y(pe){return r(pe)==="Uint8Array"}e.isUint8Array=y;function b(pe){return r(pe)==="Uint8ClampedArray"}e.isUint8ClampedArray=b;function w(pe){return r(pe)==="Uint16Array"}e.isUint16Array=w;function E(pe){return r(pe)==="Uint32Array"}e.isUint32Array=E;function A(pe){return r(pe)==="Int8Array"}e.isInt8Array=A;function T(pe){return r(pe)==="Int16Array"}e.isInt16Array=T;function D(pe){return r(pe)==="Int32Array"}e.isInt32Array=D;function k(pe){return r(pe)==="Float32Array"}e.isFloat32Array=k;function R(pe){return r(pe)==="Float64Array"}e.isFloat64Array=R;function O(pe){return r(pe)==="BigInt64Array"}e.isBigInt64Array=O;function B(pe){return r(pe)==="BigUint64Array"}e.isBigUint64Array=B;function K(pe){return l(pe)==="[object Map]"}K.working=typeof Map<"u"&&K(new Map);function L(pe){return typeof Map>"u"?!1:K.working?K(pe):pe instanceof Map}e.isMap=L;function $(pe){return l(pe)==="[object Set]"}$.working=typeof Set<"u"&&$(new Set);function I(pe){return typeof Set>"u"?!1:$.working?$(pe):pe instanceof Set}e.isSet=I;function U(pe){return l(pe)==="[object WeakMap]"}U.working=typeof WeakMap<"u"&&U(new WeakMap);function q(pe){return typeof WeakMap>"u"?!1:U.working?U(pe):pe instanceof WeakMap}e.isWeakMap=q;function Y(pe){return l(pe)==="[object WeakSet]"}Y.working=typeof WeakSet<"u"&&Y(new WeakSet);function X(pe){return Y(pe)}e.isWeakSet=X;function te(pe){return l(pe)==="[object ArrayBuffer]"}te.working=typeof ArrayBuffer<"u"&&te(new ArrayBuffer);function le(pe){return typeof ArrayBuffer>"u"?!1:te.working?te(pe):pe instanceof ArrayBuffer}e.isArrayBuffer=le;function ee(pe){return l(pe)==="[object DataView]"}ee.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ee(new DataView(new ArrayBuffer(1),0,1));function z(pe){return typeof DataView>"u"?!1:ee.working?ee(pe):pe instanceof DataView}e.isDataView=z;var he=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function de(pe){return l(pe)==="[object SharedArrayBuffer]"}function ze(pe){return typeof he>"u"?!1:(typeof de.working>"u"&&(de.working=de(new he)),de.working?de(pe):pe instanceof he)}e.isSharedArrayBuffer=ze;function He(pe){return l(pe)==="[object AsyncFunction]"}e.isAsyncFunction=He;function je(pe){return l(pe)==="[object Map Iterator]"}e.isMapIterator=je;function we(pe){return l(pe)==="[object Set Iterator]"}e.isSetIterator=we;function Ie(pe){return l(pe)==="[object Generator]"}e.isGeneratorObject=Ie;function qe(pe){return l(pe)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=qe;function Pe(pe){return p(pe,u)}e.isNumberObject=Pe;function At(pe){return p(pe,f)}e.isStringObject=At;function ht(pe){return p(pe,c)}e.isBooleanObject=ht;function nn(pe){return o&&p(pe,d)}e.isBigIntObject=nn;function Vt(pe){return a&&p(pe,h)}e.isSymbolObject=Vt;function Mn(pe){return Pe(pe)||At(pe)||ht(pe)||nn(pe)||Vt(pe)}e.isBoxedPrimitive=Mn;function Ze(pe){return typeof Uint8Array<"u"&&(le(pe)||ze(pe))}e.isAnyArrayBuffer=Ze,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(pe){Object.defineProperty(e,pe,{enumerable:!1,value:function(){throw new Error(pe+" is not supported in userland")}})})}(SM)),SM}var t4,eAe;function vMt(){return eAe||(eAe=1,t4=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),t4}var uC={exports:{}},tAe;function bMt(){return tAe||(tAe=1,typeof Object.create=="function"?uC.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:uC.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),uC.exports}var nAe;function rAe(){return nAe||(nAe=1,function(e){var t={},n=Object.getOwnPropertyDescriptors||function(he){for(var de=Object.keys(he),ze={},He=0;He<de.length;He++)ze[de[He]]=Object.getOwnPropertyDescriptor(he,de[He]);return ze},r=/%[sdj%]/g;e.format=function(z){if(!T(z)){for(var he=[],de=0;de<arguments.length;de++)he.push(a(arguments[de]));return he.join(" ")}for(var de=1,ze=arguments,He=ze.length,je=String(z).replace(r,function(Ie){if(Ie==="%%")return"%";if(de>=He)return Ie;switch(Ie){case"%s":return String(ze[de++]);case"%d":return Number(ze[de++]);case"%j":try{return JSON.stringify(ze[de++])}catch{return"[Circular]"}default:return Ie}}),we=ze[de];de<He;we=ze[++de])w(we)||!O(we)?je+=" "+we:je+=" "+a(we);return je},e.deprecate=function(z,he){if(typeof process<"u"&&process.noDeprecation===!0)return z;if(typeof process>"u")return function(){return e.deprecate(z,he).apply(this,arguments)};var de=!1;function ze(){if(!de){if(process.throwDeprecation)throw new Error(he);process.traceDeprecation?console.trace(he):console.error(he),de=!0}return z.apply(this,arguments)}return ze};var i={},s=/^$/;if(t.NODE_DEBUG){var o=t.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}e.debuglog=function(z){if(z=z.toUpperCase(),!i[z])if(s.test(z)){var he=process.pid;i[z]=function(){var de=e.format.apply(e,arguments);console.error("%s %d: %s",z,he,de)}}else i[z]=function(){};return i[z]};function a(z,he){var de={seen:[],stylize:u};return arguments.length>=3&&(de.depth=arguments[2]),arguments.length>=4&&(de.colors=arguments[3]),b(he)?de.showHidden=he:he&&e._extend(de,he),k(de.showHidden)&&(de.showHidden=!1),k(de.depth)&&(de.depth=2),k(de.colors)&&(de.colors=!1),k(de.customInspect)&&(de.customInspect=!0),de.colors&&(de.stylize=l),c(de,z,de.depth)}e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(z,he){var de=a.styles[he];return de?"\x1B["+a.colors[de][0]+"m"+z+"\x1B["+a.colors[de][1]+"m":z}function u(z,he){return z}function f(z){var he={};return z.forEach(function(de,ze){he[de]=!0}),he}function c(z,he,de){if(z.customInspect&&he&&L(he.inspect)&&he.inspect!==e.inspect&&!(he.constructor&&he.constructor.prototype===he)){var ze=he.inspect(de,z);return T(ze)||(ze=c(z,ze,de)),ze}var He=d(z,he);if(He)return He;var je=Object.keys(he),we=f(je);if(z.showHidden&&(je=Object.getOwnPropertyNames(he)),K(he)&&(je.indexOf("message")>=0||je.indexOf("description")>=0))return h(he);if(je.length===0){if(L(he)){var Ie=he.name?": "+he.name:"";return z.stylize("[Function"+Ie+"]","special")}if(R(he))return z.stylize(RegExp.prototype.toString.call(he),"regexp");if(B(he))return z.stylize(Date.prototype.toString.call(he),"date");if(K(he))return h(he)}var qe="",Pe=!1,At=["{","}"];if(y(he)&&(Pe=!0,At=["[","]"]),L(he)){var ht=he.name?": "+he.name:"";qe=" [Function"+ht+"]"}if(R(he)&&(qe=" "+RegExp.prototype.toString.call(he)),B(he)&&(qe=" "+Date.prototype.toUTCString.call(he)),K(he)&&(qe=" "+h(he)),je.length===0&&(!Pe||he.length==0))return At[0]+qe+At[1];if(de<0)return R(he)?z.stylize(RegExp.prototype.toString.call(he),"regexp"):z.stylize("[Object]","special");z.seen.push(he);var nn;return Pe?nn=p(z,he,de,we,je):nn=je.map(function(Vt){return g(z,he,de,we,Vt,Pe)}),z.seen.pop(),v(nn,qe,At)}function d(z,he){if(k(he))return z.stylize("undefined","undefined");if(T(he)){var de="'"+JSON.stringify(he).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(de,"string")}if(A(he))return z.stylize(""+he,"number");if(b(he))return z.stylize(""+he,"boolean");if(w(he))return z.stylize("null","null")}function h(z){return"["+Error.prototype.toString.call(z)+"]"}function p(z,he,de,ze,He){for(var je=[],we=0,Ie=he.length;we<Ie;++we)X(he,String(we))?je.push(g(z,he,de,ze,String(we),!0)):je.push("");return He.forEach(function(qe){qe.match(/^\d+$/)||je.push(g(z,he,de,ze,qe,!0))}),je}function g(z,he,de,ze,He,je){var we,Ie,qe;if(qe=Object.getOwnPropertyDescriptor(he,He)||{value:he[He]},qe.get?qe.set?Ie=z.stylize("[Getter/Setter]","special"):Ie=z.stylize("[Getter]","special"):qe.set&&(Ie=z.stylize("[Setter]","special")),X(ze,He)||(we="["+He+"]"),Ie||(z.seen.indexOf(qe.value)<0?(w(de)?Ie=c(z,qe.value,null):Ie=c(z,qe.value,de-1),Ie.indexOf(`
`)>-1&&(je?Ie=Ie.split(`
`).map(function(Pe){return"  "+Pe}).join(`
`).slice(2):Ie=`
`+Ie.split(`
`).map(function(Pe){return"   "+Pe}).join(`
`))):Ie=z.stylize("[Circular]","special")),k(we)){if(je&&He.match(/^\d+$/))return Ie;we=JSON.stringify(""+He),we.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(we=we.slice(1,-1),we=z.stylize(we,"name")):(we=we.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),we=z.stylize(we,"string"))}return we+": "+Ie}function v(z,he,de){var ze=z.reduce(function(He,je){return je.indexOf(`
`)>=0,He+je.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ze>60?de[0]+(he===""?"":he+`
 `)+" "+z.join(`,
  `)+" "+de[1]:de[0]+he+" "+z.join(", ")+" "+de[1]}e.types=yMt();function y(z){return Array.isArray(z)}e.isArray=y;function b(z){return typeof z=="boolean"}e.isBoolean=b;function w(z){return z===null}e.isNull=w;function E(z){return z==null}e.isNullOrUndefined=E;function A(z){return typeof z=="number"}e.isNumber=A;function T(z){return typeof z=="string"}e.isString=T;function D(z){return typeof z=="symbol"}e.isSymbol=D;function k(z){return z===void 0}e.isUndefined=k;function R(z){return O(z)&&I(z)==="[object RegExp]"}e.isRegExp=R,e.types.isRegExp=R;function O(z){return typeof z=="object"&&z!==null}e.isObject=O;function B(z){return O(z)&&I(z)==="[object Date]"}e.isDate=B,e.types.isDate=B;function K(z){return O(z)&&(I(z)==="[object Error]"||z instanceof Error)}e.isError=K,e.types.isNativeError=K;function L(z){return typeof z=="function"}e.isFunction=L;function $(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}e.isPrimitive=$,e.isBuffer=vMt();function I(z){return Object.prototype.toString.call(z)}function U(z){return z<10?"0"+z.toString(10):z.toString(10)}var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Y(){var z=new Date,he=[U(z.getHours()),U(z.getMinutes()),U(z.getSeconds())].join(":");return[z.getDate(),q[z.getMonth()],he].join(" ")}e.log=function(){console.log("%s - %s",Y(),e.format.apply(e,arguments))},e.inherits=bMt(),e._extend=function(z,he){if(!he||!O(he))return z;for(var de=Object.keys(he),ze=de.length;ze--;)z[de[ze]]=he[de[ze]];return z};function X(z,he){return Object.prototype.hasOwnProperty.call(z,he)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(he){if(typeof he!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&he[te]){var de=he[te];if(typeof de!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(de,te,{value:de,enumerable:!1,writable:!1,configurable:!0}),de}function de(){for(var ze,He,je=new Promise(function(qe,Pe){ze=qe,He=Pe}),we=[],Ie=0;Ie<arguments.length;Ie++)we.push(arguments[Ie]);we.push(function(qe,Pe){qe?He(qe):ze(Pe)});try{he.apply(this,we)}catch(qe){He(qe)}return je}return Object.setPrototypeOf(de,Object.getPrototypeOf(he)),te&&Object.defineProperty(de,te,{value:de,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(de,n(he))},e.promisify.custom=te;function le(z,he){if(!z){var de=new Error("Promise was rejected with a falsy value");de.reason=z,z=de}return he(z)}function ee(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function he(){for(var de=[],ze=0;ze<arguments.length;ze++)de.push(arguments[ze]);var He=de.pop();if(typeof He!="function")throw new TypeError("The last argument must be of type Function");var je=this,we=function(){return He.apply(je,arguments)};z.apply(this,de).then(function(Ie){process.nextTick(we.bind(null,null,Ie))},function(Ie){process.nextTick(le.bind(null,Ie,we))})}return Object.setPrototypeOf(he,Object.getPrototypeOf(z)),Object.defineProperties(he,n(z)),he}e.callbackify=ee}(EM)),EM}var iAe;function xMt(){return iAe||(iAe=1,lC.TextEncoder=typeof TextEncoder<"u"?TextEncoder:rAe().TextEncoder,lC.TextDecoder=typeof TextDecoder<"u"?TextDecoder:rAe().TextDecoder),lC}var n4,sAe;function ez(){if(sAe)return n4;sAe=1;const{TextEncoder:e,TextDecoder:t}=xMt(),n=new t,r=a=>n.decode(a),i=new e,s=a=>i.encode(a);function o(a,l){const u=new Uint8Array(l);let f=0;for(const c of a)u.set(c,f),f+=c.length;return u}return n4={decodeText:r,encodeText:s,concat:o},n4}var r4,oAe;function wMt(){if(oAe)return r4;oAe=1;const{encodeText:e}=ez();class t{constructor(r,i,s,o){this.name=r,this.code=i,this.codeBuf=e(this.code),this.alphabet=o,this.codec=s(o)}encode(r){return this.codec.encode(r)}decode(r){for(const i of r)if(this.alphabet&&this.alphabet.indexOf(i)<0)throw new Error(`invalid character '${i}' in '${r}'`);return this.codec.decode(r)}}return r4=t,r4}var i4,aAe;function _Mt(){if(aAe)return i4;aAe=1;const e=(r,i,s)=>{const o={};for(let d=0;d<i.length;++d)o[i[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*s/8|0);let u=0,f=0,c=0;for(let d=0;d<a;++d){const h=o[r[d]];if(h===void 0)throw new SyntaxError("Invalid character "+r[d]);f=f<<s|h,u+=s,u>=8&&(u-=8,l[c++]=255&f>>u)}if(u>=s||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return l},t=(r,i,s)=>{const o=i[i.length-1]==="=",a=(1<<s)-1;let l="",u=0,f=0;for(let c=0;c<r.length;++c)for(f=f<<8|r[c],u+=8;u>s;)u-=s,l+=i[a&f>>u];if(u&&(l+=i[a&f<<s-u]),o)for(;l.length*s&7;)l+="=";return l};return i4={rfc4648:r=>i=>({encode(s){return t(s,i,r)},decode(s){return e(s,i,r)}})},i4}var s4,lAe;function EMt(){if(lAe)return s4;lAe=1;const e=KOt(),t=wMt(),{rfc4648:n}=_Mt(),{decodeText:r,encodeText:i}=ez(),o=[["identity","\0",()=>({encode:r,decode:i}),""],["base2","0",n(1),"01"],["base8","7",n(3),"01234567"],["base10","9",e,"0123456789"],["base16","f",n(4),"0123456789abcdef"],["base16upper","F",n(4),"0123456789ABCDEF"],["base32hex","v",n(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",n(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",n(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",n(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",n(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",e,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",e,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=o.reduce((u,f)=>(u[f[0]]=new t(f[0],f[1],f[2],f[3]),u),{}),l=o.reduce((u,f)=>(u[f[1]]=a[f[0]],u),{});return s4={names:a,codes:l},s4}var uAe;function SMt(){return uAe||(uAe=1,function(e,t){const n=EMt(),{encodeText:r,decodeText:i,concat:s}=ez();function o(h,p){if(!p)throw new Error("requires an encoded Uint8Array");const{name:g,codeBuf:v}=c(h);return f(g,p),s([v,p],v.length+p.length)}function a(h,p){const g=c(h),v=r(g.encode(p));return s([g.codeBuf,v],g.codeBuf.length+v.length)}function l(h){h instanceof Uint8Array&&(h=i(h));const p=h[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(p)&&(h=h.toLowerCase()),c(h[0]).decode(h.substring(1))}function u(h){if(h instanceof Uint8Array&&(h=i(h)),Object.prototype.toString.call(h)!=="[object String]")return!1;try{return c(h[0]).name}catch{return!1}}function f(h,p){c(h).decode(i(p))}function c(h){if(Object.prototype.hasOwnProperty.call(n.names,h))return n.names[h];if(Object.prototype.hasOwnProperty.call(n.codes,h))return n.codes[h];throw new Error(`Unsupported encoding: ${h}`)}function d(h){return h instanceof Uint8Array&&(h=i(h)),c(h[0])}t=e.exports=o,t.encode=a,t.decode=l,t.isEncoded=u,t.encoding=c,t.encodingFromData=d,t.names=Object.freeze(n.names),t.codes=Object.freeze(n.codes)}(aC,aC.exports)),aC.exports}var o4,cAe;function AMt(){if(cAe)return o4;cAe=1,o4=i;var e=128,t=127,n=~t,r=Math.pow(2,31);function i(s,o,a){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw i.bytes=0,new RangeError("Could not encode varint");o=o||[],a=a||0;for(var l=a;s>=r;)o[a++]=s&255|e,s/=128;for(;s&n;)o[a++]=s&255|e,s>>>=7;return o[a]=s|0,i.bytes=a-l+1,o}return o4}var a4,fAe;function CMt(){if(fAe)return a4;fAe=1,a4=n;var e=128,t=127;function n(r,o){var s=0,o=o||0,a=0,l=o,u,f=r.length;do{if(l>=f||a>49)throw n.bytes=0,new RangeError("Could not decode varint");u=r[l++],s+=a<28?(u&t)<<a:(u&t)*Math.pow(2,a),a+=7}while(u>=e);return n.bytes=l-o,s}return a4}var l4,dAe;function kMt(){if(dAe)return l4;dAe=1;var e=Math.pow(2,7),t=Math.pow(2,14),n=Math.pow(2,21),r=Math.pow(2,28),i=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return l4=function(u){return u<e?1:u<t?2:u<n?3:u<r?4:u<i?5:u<s?6:u<o?7:u<a?8:u<l?9:10},l4}var u4,hAe;function TMt(){return hAe||(hAe=1,u4={encode:AMt(),decode:CMt(),encodingLength:kMt()}),u4}var c4,pAe;function DMt(){return pAe||(pAe=1,c4={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),c4}function LMt(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var w=(b-y)*f+1>>>0,E=new Uint8Array(w);y!==b;){for(var A=p[y],T=0,D=w-1;(A!==0||T<v)&&D!==-1;D--,T++)A+=256*E[D]>>>0,E[D]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");v=T,y++}for(var k=w-v;k!==w&&E[k]===0;)k++;for(var R=l.repeat(g);k<w;++k)R+=e.charAt(E[k]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,y=0;p[g]===l;)v++,g++;for(var b=(p.length-g)*u+1>>>0,w=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var A=0,T=b-1;(E!==0||A<y)&&T!==-1;T--,A++)E+=a*w[T]>>>0,w[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=A,g++}if(p[g]!==" "){for(var D=b-y;D!==b&&w[D]===0;)D++;for(var k=new Uint8Array(v+(b-D)),R=v;D!==b;)k[R++]=w[D++];return k}}}function h(p){var g=d(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:c,decodeUnsafe:d,decode:h}}var RMt=LMt,FMt=RMt;const o8e=new Uint8Array(0),OMt=e=>e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),""),MMt=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map(n=>parseInt(n,16))):o8e},a8e=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},V0=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},$Mt=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),l8e=e=>new TextEncoder().encode(e),u8e=e=>new TextDecoder().decode(e),IMt=Object.freeze(Object.defineProperty({__proto__:null,coerce:V0,empty:o8e,equals:a8e,fromHex:MMt,fromString:l8e,isBinary:$Mt,toHex:OMt,toString:u8e},Symbol.toStringTag,{value:"Module"}));class PMt{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class NMt{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return c8e(this,t)}}class BMt{constructor(t){this.decoders=t}or(t){return c8e(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const c8e=(e,t)=>new BMt({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class zMt{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new PMt(t,n,r),this.decoder=new NMt(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const $R=({name:e,prefix:t,encode:n,decode:r})=>new zMt(e,t,n,r),fS=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=FMt(n,t);return $R({prefix:e,name:t,encode:r,decode:s=>V0(i(s))})},jMt=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,l=0,u=0;for(let f=0;f<s;++f){const c=i[e[f]];if(c===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|c,a+=n,a>=8&&(a-=8,o[u++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},UMt=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let l=0;l<e.length;++l)for(a=a<<8|e[l],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ca=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>$R({prefix:t,name:e,encode(i){return UMt(i,r,n)},decode(i){return jMt(i,r,n,e)}}),qMt=$R({prefix:"\0",name:"identity",encode:e=>u8e(e),decode:e=>l8e(e)}),HMt=Object.freeze(Object.defineProperty({__proto__:null,identity:qMt},Symbol.toStringTag,{value:"Module"})),GMt=ca({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),VMt=Object.freeze(Object.defineProperty({__proto__:null,base2:GMt},Symbol.toStringTag,{value:"Module"})),WMt=ca({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),YMt=Object.freeze(Object.defineProperty({__proto__:null,base8:WMt},Symbol.toStringTag,{value:"Module"})),XMt=fS({prefix:"9",name:"base10",alphabet:"0123456789"}),ZMt=Object.freeze(Object.defineProperty({__proto__:null,base10:XMt},Symbol.toStringTag,{value:"Module"})),KMt=ca({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),JMt=ca({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),QMt=Object.freeze(Object.defineProperty({__proto__:null,base16:KMt,base16upper:JMt},Symbol.toStringTag,{value:"Module"})),B_=ca({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),e4t=ca({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),t4t=ca({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),n4t=ca({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),r4t=ca({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),i4t=ca({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),s4t=ca({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),o4t=ca({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),a4t=ca({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),l4t=Object.freeze(Object.defineProperty({__proto__:null,base32:B_,base32hex:r4t,base32hexpad:s4t,base32hexpadupper:o4t,base32hexupper:i4t,base32pad:t4t,base32padupper:n4t,base32upper:e4t,base32z:a4t},Symbol.toStringTag,{value:"Module"})),u4t=fS({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),c4t=fS({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),f4t=Object.freeze(Object.defineProperty({__proto__:null,base36:u4t,base36upper:c4t},Symbol.toStringTag,{value:"Module"})),Fd=fS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),d4t=fS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),h4t=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Fd,base58flickr:d4t},Symbol.toStringTag,{value:"Module"})),p4t=ca({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),m4t=ca({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),g4t=ca({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),y4t=ca({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),v4t=Object.freeze(Object.defineProperty({__proto__:null,base64:p4t,base64pad:m4t,base64url:g4t,base64urlpad:y4t},Symbol.toStringTag,{value:"Module"})),f8e=Array.from(""),b4t=f8e.reduce((e,t,n)=>(e[n]=t,e),[]),x4t=f8e.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function w4t(e){return e.reduce((t,n)=>(t+=b4t[n],t),"")}function _4t(e){const t=[];for(const n of e){const r=x4t[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const E4t=$R({prefix:"",name:"base256emoji",encode:w4t,decode:_4t}),S4t=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:E4t},Symbol.toStringTag,{value:"Module"}));var A4t=d8e,mAe=128,C4t=127,k4t=~C4t,T4t=Math.pow(2,31);function d8e(e,t,n){t=t||[],n=n||0;for(var r=n;e>=T4t;)t[n++]=e&255|mAe,e/=128;for(;e&k4t;)t[n++]=e&255|mAe,e>>>=7;return t[n]=e|0,d8e.bytes=n-r+1,t}var D4t=W$,L4t=128,gAe=127;function W$(e,r){var n=0,r=r||0,i=0,s=r,o,a=e.length;do{if(s>=a)throw W$.bytes=0,new RangeError("Could not decode varint");o=e[s++],n+=i<28?(o&gAe)<<i:(o&gAe)*Math.pow(2,i),i+=7}while(o>=L4t);return W$.bytes=s-r,n}var R4t=Math.pow(2,7),F4t=Math.pow(2,14),O4t=Math.pow(2,21),M4t=Math.pow(2,28),$4t=Math.pow(2,35),I4t=Math.pow(2,42),P4t=Math.pow(2,49),N4t=Math.pow(2,56),B4t=Math.pow(2,63),z4t=function(e){return e<R4t?1:e<F4t?2:e<O4t?3:e<M4t?4:e<$4t?5:e<I4t?6:e<P4t?7:e<N4t?8:e<B4t?9:10},j4t={encode:A4t,decode:D4t,encodingLength:z4t},gT=j4t;const yT=(e,t=0)=>[gT.decode(e,t),gT.decode.bytes],O2=(e,t,n=0)=>(gT.encode(e,t,n),t),M2=e=>gT.encodingLength(e),U4t=Object.freeze(Object.defineProperty({__proto__:null,decode:yT,encodeTo:O2,encodingLength:M2},Symbol.toStringTag,{value:"Module"})),$2=(e,t)=>{const n=t.byteLength,r=M2(e),i=r+M2(n),s=new Uint8Array(i+n);return O2(e,s,0),O2(n,s,r),s.set(t,i),new IR(e,n,t,s)},h8e=e=>{const t=V0(e),[n,r]=yT(t),[i,s]=yT(t.subarray(r)),o=t.subarray(r+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new IR(n,i,o,t)},p8e=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&a8e(e.bytes,t.bytes);class IR{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const q4t=Object.freeze(Object.defineProperty({__proto__:null,Digest:IR,create:$2,decode:h8e,equals:p8e},Symbol.toStringTag,{value:"Module"})),tz=({name:e,code:t,encode:n})=>new m8e(e,t,n);class m8e{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?$2(this.code,n):n.then(r=>$2(this.code,r))}else throw Error("Unknown type, must be binary type")}}const H4t=Object.freeze(Object.defineProperty({__proto__:null,Hasher:m8e,from:tz},Symbol.toStringTag,{value:"Module"})),g8e=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),G4t=tz({name:"sha2-256",code:18,encode:g8e("SHA-256")}),V4t=tz({name:"sha2-512",code:19,encode:g8e("SHA-512")}),W4t=Object.freeze(Object.defineProperty({__proto__:null,sha256:G4t,sha512:V4t},Symbol.toStringTag,{value:"Module"})),y8e=0,Y4t="identity",v8e=V0,X4t=e=>$2(y8e,v8e(e)),Z4t={code:y8e,name:Y4t,encode:v8e,digest:X4t},K4t=Object.freeze(Object.defineProperty({__proto__:null,identity:Z4t},Symbol.toStringTag,{value:"Module"})),J4t="raw",Q4t=85,e6t=e=>V0(e),t6t=e=>V0(e),n6t=Object.freeze(Object.defineProperty({__proto__:null,code:Q4t,decode:t6t,encode:e6t,name:J4t},Symbol.toStringTag,{value:"Module"})),r6t=new TextEncoder,i6t=new TextDecoder,s6t="json",o6t=512,a6t=e=>r6t.encode(JSON.stringify(e)),l6t=e=>JSON.parse(i6t.decode(e)),u6t=Object.freeze(Object.defineProperty({__proto__:null,code:o6t,decode:l6t,encode:a6t,name:s6t},Symbol.toStringTag,{value:"Module"}));class va{constructor(t,n,r,i){this.code=n,this.version=t,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:fC,byteLength:fC,code:cC,version:cC,multihash:cC,bytes:cC,_baseCache:fC,asCID:fC})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:n}=this;if(t!==Fw)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==h6t)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return va.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=$2(t,n);return va.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&p8e(this.multihash,t.multihash)}toString(t){const{bytes:n,version:r,_baseCache:i}=this;switch(r){case 0:return f6t(n,i,t||Fd.encoder);default:return d6t(n,i,t||B_.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return m6t(/^0\.0/,g6t),!!(t&&(t[vAe]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof va)return t;if(t!=null&&t.asCID===t){const{version:n,code:r,multihash:i,bytes:s}=t;return new va(n,r,i,s||yAe(n,r,i.bytes))}else if(t!=null&&t[vAe]===!0){const{version:n,multihash:r,code:i}=t,s=h8e(r);return va.create(n,i,s)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(n!==Fw)throw new Error(`Version 0 CID must use dag-pb (code: ${Fw}) block encoding`);return new va(t,n,r,r.bytes)}case 1:{const i=yAe(t,n,r.bytes);return new va(t,n,r,i)}default:throw new Error("Invalid version")}}static createV0(t){return va.create(0,Fw,t)}static createV1(t,n){return va.create(1,t,n)}static decode(t){const[n,r]=va.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=va.inspectBytes(t),r=n.size-n.multihashSize,i=V0(t.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");const s=i.subarray(n.multihashSize-n.digestSize),o=new IR(n.multihashCode,n.digestSize,s,i);return[n.version===0?va.createV0(o):va.createV1(n.codec,o),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[c,d]=yT(t.subarray(n));return n+=d,c};let i=r(),s=Fw;if(i===18?(i=0,n=0):i===1&&(s=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=n,a=r(),l=r(),u=n+l,f=u-o;return{version:i,codec:s,multihashCode:a,digestSize:l,multihashSize:f,size:u}}static parse(t,n){const[r,i]=c6t(t,n),s=va.decode(i);return s._baseCache.set(r,t),s}}const c6t=(e,t)=>{switch(e[0]){case"Q":{const n=t||Fd;return[Fd.prefix,n.decode(`${Fd.prefix}${e}`)]}case Fd.prefix:{const n=t||Fd;return[Fd.prefix,n.decode(e)]}case B_.prefix:{const n=t||B_;return[B_.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},f6t=(e,t,n)=>{const{prefix:r}=n;if(r!==Fd.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=t.get(r);if(i==null){const s=n.encode(e).slice(1);return t.set(r,s),s}else return i},d6t=(e,t,n)=>{const{prefix:r}=n,i=t.get(r);if(i==null){const s=n.encode(e);return t.set(r,s),s}else return i},Fw=112,h6t=18,yAe=(e,t,n)=>{const r=M2(e),i=r+M2(t),s=new Uint8Array(i+n.byteLength);return O2(e,s,0),O2(t,s,r),s.set(n,i),s},vAe=Symbol.for("@ipld/js-cid/CID"),cC={writable:!1,configurable:!1,enumerable:!0},fC={writable:!1,enumerable:!1,configurable:!1},p6t="0.0.0-dev",m6t=(e,t)=>{if(e.test(p6t))console.warn(t);else throw new Error(t)},g6t=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,y6t={...HMt,...VMt,...YMt,...ZMt,...QMt,...l4t,...f4t,...h4t,...v4t,...S4t},v6t={...W4t,...K4t},b6t={raw:n6t,json:u6t},x6t=Object.freeze(Object.defineProperty({__proto__:null,CID:va,bases:y6t,bytes:IMt,codecs:b6t,digest:q4t,hasher:H4t,hashes:v6t,varint:U4t},Symbol.toStringTag,{value:"Module"})),w6t=bCe(x6t);var f4,bAe;function b8e(){if(bAe)return f4;bAe=1;const{bases:e}=w6t;function t(s,o,a,l){return{name:s,prefix:o,encoder:{name:s,prefix:o,encode:a},decoder:{decode:l}}}const n=t("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),r=t("ascii","a",s=>{let o="a";for(let a=0;a<s.length;a++)o+=String.fromCharCode(s[a]);return o},s=>{s=s.substring(1);const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o});return f4={utf8:n,"utf-8":n,hex:e.base16,latin1:r,ascii:r,binary:r,...e},f4}var d4,xAe;function _6t(){if(xAe)return d4;xAe=1;const e=b8e();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.encoder.encode(n).substring(1)}return d4=t,d4}var h4,wAe;function E6t(){if(wAe)return h4;wAe=1;const e=b8e();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.decoder.decode(`${i.prefix}${n}`)}return h4=t,h4}var p4,_Ae;function S6t(){if(_Ae)return p4;_Ae=1;function e(t,n){n||(n=t.reduce((s,o)=>s+o.length,0));const r=new Uint8Array(n);let i=0;for(const s of t)r.set(s,i),i+=s.length;return r}return p4=e,p4}var m4,EAe;function A6t(){if(EAe)return m4;EAe=1;const e=SMt(),t=TMt(),{names:n}=DMt(),r=_6t(),i=E6t(),s=S6t(),o={};for(const b in n){const w=b;o[n[w]]=w}function a(b){if(!(b instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(b,"base16")}function l(b){return i(b,"base16")}function u(b){if(!(b instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(e.encode("base58btc",b)).slice(1)}function f(b){const w=b instanceof Uint8Array?r(b):b;return e.decode("z"+w)}function c(b){if(!(b instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(b.length<2)throw new Error("multihash too short. must be > 2 bytes.");const w=t.decode(b);if(!g(w))throw new Error(`multihash unknown function code: 0x${w.toString(16)}`);b=b.slice(t.decode.bytes);const E=t.decode(b);if(E<0)throw new Error(`multihash invalid length: ${E}`);if(b=b.slice(t.decode.bytes),b.length!==E)throw new Error(`multihash length inconsistent: 0x${r(b,"base16")}`);return{code:w,name:o[w],length:E,digest:b}}function d(b,w,E){if(!b||w===void 0)throw new Error("multihash encode requires at least two args: digest, code");const A=h(w);if(!(b instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(E==null&&(E=b.length),E&&b.length!==E)throw new Error("digest length should be equal to specified length.");const T=t.encode(A),D=t.encode(E);return s([T,D,b],T.length+D.length+b.length)}function h(b){let w=b;if(typeof b=="string"){if(n[b]===void 0)throw new Error(`Unrecognized hash function named: ${b}`);w=n[b]}if(typeof w!="number")throw new Error(`Hash function code should be a number. Got: ${w}`);if(o[w]===void 0&&!p(w))throw new Error(`Unrecognized function code: ${w}`);return w}function p(b){return b>0&&b<16}function g(b){return!!(p(b)||o[b])}function v(b){c(b)}function y(b){return v(b),b.subarray(0,2)}return m4={names:n,codes:Object.freeze(o),toHexString:a,fromHexString:l,toB58String:u,fromB58String:f,decode:c,encode:d,coerceCode:h,isAppCode:p,validate:v,prefix:y,isValidCode:g},m4}var g4,SAe;function nz(){if(SAe)return g4;SAe=1;const e=uS(),t=_b(),n={array(r,i=!1,s=""){return e.toList(r,i,o=>n.format(o,s))},object(r){return e.toObject(r,i=>n.format(i))},null(r=null){return r===null&&(r=e.t("n/a")),e.toNothing(r)},number(r,i=""){return typeof r!="number"&&(r=parseFloat(r)),e.unit(t.numberFormatter.format(r),i)},string(r,i=""){return e.unit(e.e(r).replace(/(\r\n|\r|\n){2,}/g,"<br>"),i)},boolean(r){return r?"":""},format(r,i=""){return typeof r=="boolean"?n.boolean(r):typeof r=="number"?n.number(r,i):typeof r=="string"?n.string(r,i):Array.isArray(r)?n.array(r,i):e.isObject(r)?n.object(r):n.null()}};return g4=n,g4}const C6t="Afar",k6t="Abkhazian",T6t="Afrikaans",D6t="Akan",L6t="Amharic",R6t="Aragonese",F6t="Arabic",O6t="Assamese",M6t="Avar",$6t="Aymara",I6t="Azerbaijani",P6t="Bashkir",N6t="Belarusian",B6t="Bulgarian",z6t="Bihari",j6t="Bislama",U6t="Bambara",q6t="Bengali",H6t="Tibetan",G6t="Breton",V6t="Bosnian",W6t="Catalan",Y6t="Chechen",X6t="Chamorro",Z6t="Corsican",K6t="Cree",J6t="Czech",Q6t="Old Bulgarian",e5t="Chuvash",t5t="Welsh",n5t="Danish",r5t="German",i5t="Divehi",s5t="Dzongkha",o5t="Ewe",a5t="Greek",l5t="English",u5t="Esperanto",c5t="Spanish",f5t="Estonian",d5t="Basque",h5t="Persian",p5t="Peul",m5t="Finnish",g5t="Fijian",y5t="Faroese",v5t="French",b5t="West Frisian",x5t="Irish",w5t="Scottish Gaelic",_5t="Galician",E5t="Guarani",S5t="Gujarati",A5t="Manx",C5t="Hausa",k5t="Hebrew",T5t="Hindi",D5t="Hiri Motu",L5t="Croatian",R5t="Haitian",F5t="Hungarian",O5t="Armenian",M5t="Herero",$5t="Interlingua",I5t="Indonesian",P5t="Interlingue",N5t="Igbo",B5t="Sichuan Yi",z5t="Inupiak",j5t="Ido",U5t="Icelandic",q5t="Italian",H5t="Inuktitut",G5t="Japanese",V5t="Javanese",W5t="Georgian",Y5t="Kongo",X5t="Kikuyu",Z5t="Kuanyama",K5t="Kazakh",J5t="Greenlandic",Q5t="Cambodian",e$t="Kannada",t$t="Korean",n$t="Kanuri",r$t="Kashmiri",i$t="Kurdish",s$t="Komi",o$t="Cornish",a$t="Kirghiz",l$t="Latin",u$t="Luxembourgish",c$t="Ganda",f$t="Limburgian",d$t="Lingala",h$t="Laotian",p$t="Lithuanian",m$t="Latvian",g$t="Malagasy",y$t="Marshallese",v$t="Maori",b$t="Macedonian",x$t="Malayalam",w$t="Mongolian",_$t="Moldovan",E$t="Marathi",S$t="Malay",A$t="Maltese",C$t="Burmese",k$t="Nauruan",T$t="North Ndebele",D$t="Nepali",L$t="Ndonga",R$t="Dutch",F$t="Norwegian Nynorsk",O$t="Norwegian",M$t="South Ndebele",$$t="Navajo",I$t="Chichewa",P$t="Occitan",N$t="Ojibwa",B$t="Oromo",z$t="Oriya",j$t="Ossetian",U$t="Punjabi",q$t="Pali",H$t="Polish",G$t="Pashto",V$t="Portuguese",W$t="Quechua",Y$t="Raeto Romance",X$t="Kirundi",Z$t="Romanian",K$t="Russian",J$t="Rwandi",Q$t="Sanskrit",eIt="Sardinian",tIt="Sindhi",nIt="Sango",rIt="Serbo-Croatian",iIt="Sinhalese",sIt="Slovak",oIt="Slovenian",aIt="Samoan",lIt="Shona",uIt="Somalia",cIt="Albanian",fIt="Serbian",dIt="Swati",hIt="Southern Sotho",pIt="Sundanese",mIt="Swedish",gIt="Swahili",yIt="Tamil",vIt="Telugu",bIt="Tajik",xIt="Thai",wIt="Tigrinya",_It="Turkmen",EIt="Tagalog",SIt="Tswana",AIt="Tonga",CIt="Turkish",kIt="Tsonga",TIt="Tatar",DIt="Twi",LIt="Tahitian",RIt="Uyghur",FIt="Ukrainian",OIt="Urdu",MIt="Venda",$It="Vietnamese",IIt="Volapk",PIt="Walloon",NIt="Wolof",BIt="Xhosa",zIt="Yiddish",jIt="Yoruba",UIt="Zhuang",qIt="Chinese",HIt="Zulu",GIt={aa:C6t,ab:k6t,af:T6t,ak:D6t,am:L6t,an:R6t,ar:F6t,as:O6t,av:M6t,ay:$6t,az:I6t,ba:P6t,be:N6t,bg:B6t,bh:z6t,bi:j6t,bm:U6t,bn:q6t,bo:H6t,br:G6t,bs:V6t,ca:W6t,ce:Y6t,ch:X6t,co:Z6t,cr:K6t,cs:J6t,cu:Q6t,cv:e5t,cy:t5t,da:n5t,de:r5t,dv:i5t,dz:s5t,ee:o5t,el:a5t,en:l5t,eo:u5t,es:c5t,et:f5t,eu:d5t,fa:h5t,ff:p5t,fi:m5t,fj:g5t,fo:y5t,fr:v5t,fy:b5t,ga:x5t,gd:w5t,gl:_5t,gn:E5t,gu:S5t,gv:A5t,ha:C5t,he:k5t,hi:T5t,ho:D5t,hr:L5t,ht:R5t,hu:F5t,hy:O5t,hz:M5t,ia:$5t,id:I5t,ie:P5t,ig:N5t,ii:B5t,ik:z5t,io:j5t,is:U5t,it:q5t,iu:H5t,ja:G5t,jv:V5t,ka:W5t,kg:Y5t,ki:X5t,kj:Z5t,kk:K5t,kl:J5t,km:Q5t,kn:e$t,ko:t$t,kr:n$t,ks:r$t,ku:i$t,kv:s$t,kw:o$t,ky:a$t,la:l$t,lb:u$t,lg:c$t,li:f$t,ln:d$t,lo:h$t,lt:p$t,lv:m$t,mg:g$t,mh:y$t,mi:v$t,mk:b$t,ml:x$t,mn:w$t,mo:_$t,mr:E$t,ms:S$t,mt:A$t,my:C$t,na:k$t,nd:T$t,ne:D$t,ng:L$t,nl:R$t,nn:F$t,no:O$t,nr:M$t,nv:$$t,ny:I$t,oc:P$t,oj:N$t,om:B$t,or:z$t,os:j$t,pa:U$t,pi:q$t,pl:H$t,ps:G$t,pt:V$t,qu:W$t,rm:Y$t,rn:X$t,ro:Z$t,ru:K$t,rw:J$t,sa:Q$t,sc:eIt,sd:tIt,sg:nIt,sh:rIt,si:iIt,sk:sIt,sl:oIt,sm:aIt,sn:lIt,so:uIt,sq:cIt,sr:fIt,ss:dIt,st:hIt,su:pIt,sv:mIt,sw:gIt,ta:yIt,te:vIt,tg:bIt,th:xIt,ti:wIt,tk:_It,tl:EIt,tn:SIt,to:AIt,tr:CIt,ts:kIt,tt:TIt,tw:DIt,ty:LIt,ug:RIt,uk:FIt,ur:OIt,ve:MIt,vi:$It,vo:IIt,wa:PIt,wo:NIt,xh:BIt,yi:zIt,yo:jIt,za:UIt,zh:qIt,zu:HIt};var y4,AAe;function x8e(){if(AAe)return y4;AAe=1;const e=uS(),t=nz(),n=_b(),r=YB(),i={allowHtmlInCommonMark:!1,formatUrl(s,o,a={},l=null,u=null){let f=e.isObject(u)&&typeof u=="string"?u.title:s;return e.toLink(s,f,u.rel||"")},formatLink(s){return e.toList(s,!1,o=>e.toLink(o.href,o.title,o.rel))},formatMediaType(s,o,a={}){return e.e(e.t(i._formatMediaType(s,o,a)))},_formatMediaType(s,o,a={}){let l=!!a.shorten;const u=r.getDependency("content-type");if(!u)return l?"":e.e(s);let f;try{f=u.parse(s)}catch(c){return console.warn(c),l?"":e.e(s)}switch(f.type){case"image/tiff":return f.parameters.application==="geotiff"?f.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB 2";case"application/grib":return`GRIB ${f.parameters.edition||""}`.trim();case"application/bufr":return`BUFR ${f.parameters.edition||""}`.trim();case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";case"application/x-filegdb":return l?"Geodatabase":"Esri File Geodatabase";case"application/vnd.nitf":return l?"NITF":"National Imagery Transmission Format";case"application/3dtiles+json":return"3D Tiles";default:{let[c,d]=f.type.split("/");if(d=e.formatKey(d.replace(/^(vnd|x)[.+-]/,"")),l)return d;switch(c){case"audio":return`${d} audio`;case"image":return`${d} image`;case"font":return"Font";case"model":return`${d} 3D model`;case"video":return`${d} video`;case"text":case"application":return d;default:return s}}}},formatTimestamp(s){if(typeof s=="string")try{return n.dateTimeFormatter.format(new Date(s))}catch{}return t.null()},formatPercent0to1(s,o,a={}){return t.number(s*100,a.unit)},formatDate(s){if(typeof s=="string")try{return n.dateFormatter.format(new Date(s))}catch{}return t.null()},formatDuration(s){if(typeof s=="string"){const o=r.getDependency("@musement/iso-duration");if(!o)return e.e(s);const{isoDuration:a,en:l}=o;a.setLocales({en:l},{fallbackLocale:"en"});let u=a(s).humanize("en");return u.length===0?e.e(e.t("none")):e.e(u)}return t.null()},formatLanguageCode(s){if(Array.isArray(s))return e.toList(s,!0,i.formatLanguageCode,!1);if(typeof s!="string"||s.length<2)return t.null();const o=GIt,[a,...l]=s.split("-");if(a in o){const u=o[a];return l.length>0?e.e(e.t(`${u} (${l.join(" ")})`)):e.e(e.t(u))}return e.e(e.t(s))},formatLicense(s,o,a={},l=null){if(typeof s!="string"||s.length===0)return t.null();if(s!=="other"&&s!=="proprietary"&&s!=="various"&&s.match(/^[\w\.\-]+$/i))return e.toLink(`https://spdx.org/licenses/${s}.html`,s,"license");let u=Array.isArray(l.links)?l.links.filter(f=>e.isObject(f)&&typeof f.href=="string"&&f.rel==="license"):[];return u.length>0?e.toList(u,!1,f=>e.toLink(f.href,f.title||s,"license")):t.string(s)},formatProviders(s){return e.toList(s,!1,o=>{let a=o.name,l="",u="";return typeof o.url=="string"&&o.url.length>0&&(a=e.toLink(o.url,a)),Array.isArray(o.roles)&&o.roles.length>0&&(l=o.roles.map(f=>t.format(f)).join(", "),l=` (<em>${l}</em>)`),typeof o.description=="string"&&o.description.length>0&&(u=i.formatCommonMark(o.description)),`${a}${l}${u}`})},formatCommonMark(s){if(typeof s!="string"||s.length===0)return t.null();const o=r.getDependency("commonmark");let a;if(o){let l=new o.Parser;a=new o.HtmlRenderer({safe:!i.allowHtmlInCommonMark,smart:!0}).render(l.parse(s))}else i.allowHtmlInCommonMark?a=s:a=e.e(s);return`<div class="description">${a}</div>`},formatSoftware(s){if(!e.isObject(s))return t.null();let o=[];for(let a in s){let l=s[a];typeof l=="string"&&l.length>0||typeof l=="number"?o.push(`${a} (${l})`):o.push(a)}return e.toList(o,!0,null,!1)},formatDOI(s){return s=t.format(s),e.toLink(`http://doi.org/${s}`,s)},formatCRS(s){return e.toList(s,!1,o=>{if(typeof o=="string"){let a=o.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return e.toLink(o,a)}return t.format(o)})},formatCrsCode(s){if(typeof s=="string"){const[o,a]=s.split(":",2);switch(o.toUpperCase()){case"EPSG":case"ESRI":case"IAU_2015":case"IGNF":case"MKG":case"OGC":return e.toLink(`https://spatialreference.org/ref/${o.toLowerCase()}/${a}/`,s);default:return t.string(s)}}return t.null()},formatEPSG(s){return typeof s=="number"?i.formatCrsCode(`EPSG:${s}`):typeof s=="string"?i.formatCrsCode(s):t.null()},formatExtent(s,o,a={}){return!Array.isArray(s)||s.length<2?t.null():s[0]===s[1]?t.format(s[0],a.unit):s[0]===null?`< ${t.format(s[1],a.unit)}`:s[1]===null?`> ${t.format(s[0],a.unit)}`:s.map(l=>t.format(l,a.unit)).join("  ")},formatHexColor(s){return typeof s!="string"||!s.match(/^#?[\dA-F]{3,8}$/i)?t.null():(s.startsWith("#")&&(s=s.substring(1)),`<div class="color" style="background-color: #${s}"><code class="color-code">#${s}</code></div>`)},formatPROJJSON(s){return e.isObject(s)?e.isObject(s.id)&&s.id.authority==="EPSG"&&typeof s.code=="number"&&s.code>0?"EPSG "+i.formatEPSG(s):typeof s.name=="string"?t.string(s.name):t.object(s):t.null()},formatTemporalExtent(s,o,a={}){if(!Array.isArray(s)||s.length!==2)return t.null();s=s.map(l=>{try{return l?new Date(l):null}catch{return null}});try{const[l,u]=s;if(l||u){const f=a.shorten?n.dateFormatter:n.dateTimeFormatter;return l?u?f.formatRange(l,u):e.t("{0} until present",[f.format(l)]):e.t("Until {0}",[f.format(u)])}}catch{}return t.null()},formatTemporalExtents(s,o,a={}){let l=(u,f)=>u[0]===null?-1:n.collator.compare(u[0],f[0]);return e.toList(s,l,u=>i.formatTemporalExtent(u,o,a))},formatWKT2(s){if(typeof s!="string")return t.null();let o=-1,a;try{a=s.replace(/([A-Z]+)\[|\]/ig,(l,u)=>l==="]"?(o--,l):(o++,`
${"  ".repeat(o)}${u}[`))}catch{a=s}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(s){if(typeof s!="number")return t.format(s);var o=s==0?0:Math.floor(Math.log(s)/Math.log(1024));return e.unit((s/Math.pow(1024,o)).toFixed(2)*1,i.fileSizeUnits[o])},formatChecksum(s){if(typeof s!="string")return t.null();const o=r.getDependency("multihashes");if(!o)return e.e(s);try{const a=o.decode(e.hexToUint8(s)),l=e.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${e.e(e.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${e.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return t.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(s){return s==="other"?e.t("non-standard"):typeof s=="string"&&s in i.fileDataTypes?e.abbrev(e.t(s),e.t(i.fileDataTypes[s])):t.null()},formatTransform(s){if(Array.isArray(s)&&s.length%3===0){let o=[];for(let a=0;a<s.length;a=a+3){let l=s.slice(a,a+3);o.push(`[${i.formatCSV(l)}]`)}return o.join("<br>")}else return i.formatCSV(s)},formatShape(s,o,a={}){return Array.isArray(s)?s.map(l=>t.format(l,a.unit)).join("  "):t.format(s,a.unit)},formatCSV(s){if(Array.isArray(s)){let o=s.find(a=>typeof a=="number")!==void 0;return s.map(t.format).join(o?"; ":", ")}else return t.format(s)},formatImage(s,o){let a="",l=null;if(e.isObject(s))l=s.href,a=s.title||"";else if(typeof s=="string")l=s;else return t.format(l);return`<img src="${e.e(l)}" title="${e.e(a)}" class="${e.e(o.replace(":","_"))}">`},formatPhone(s){return e.toLink(`tel:${s}`,s)},formatEmail(s){return e.toLink(`mailto:${s}`,s)},formatConcepts(s){return e.toList(s,!1,o=>{if(!e.isObject(o))return t.format(o);let a="";if(o.title){let l=o.title;o.url&&(l=e.toLink(o.url,o.title)),a+=`<strong>${l}</strong> (<code>${e.e(o.id)}</code>)`}else{let l=o.id;o.url&&(l=e.toLink(o.url,o.id)),a+=`<strong><code>${l}</code></strong>`}return o.description&&(a+=`<br><small>${e.e(o.description)}</small>`),a})},formatAddress(s){return e.toList(s,!1,o=>{if(!e.isObject(o))return t.format(o);let a=Array.isArray(o.deliveryPoint)?o.deliveryPoint.slice(0):[];if(o.postalCode&&o.city){let l=`${o.postalCode} ${o.city}`;o.administrativeArea&&(l+=` (${o.administrativeArea})`),typeof o.country=="string"&&o.country.length>0&&(o.country.length===2&&o.country.toUpperCase()===o.country?(l=o.country+"-"+l,a.push(l)):(a.push(l),a.push(o.country.toUpperCase())))}else o.city&&a.push(o.city),o.administrativeArea&&a.push(o.administrativeArea),o.postalCode&&a.push(o.postalCode),typeof o.country=="string"&&o.country.length>0&&a.push(o.country.toUpperCase());return t.string(a.join(`

`))})},formatGridCode(s){if(typeof s!="string")return t.format(s);let o=function(f,c,d,h){let p=c.length;if(p%2===1)f.push(`Code: ${c}`);else{let g=p/2,v=c.substring(0,g);f.push(`${d}: ${v}`);let y=c.substring(g,p);f.push(`${h}: ${y}`)}},[a,l]=s.split(/-(.*)/),u=[];switch(a){case"MGRS":u.push(e.abbrev(e.t(a),e.t("Military Grid Reference System")));let[,f,c,d,h]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);u.push(`${e.t("UTM Zone")}: ${f}`),u.push(`${e.t("Latitude Band")}: ${c}`),u.push(`${e.t("Square Identifier")}: ${d}`),h&&o(u,h,e.t("Easting"),e.t("Northing"));break;case"MSIN":u.push(e.t("MODIS Sinusoidal Tile Grid")),o(u,l,e.t("Horizontal"),e.t("Vertical"));break;case"WRS1":case"WRS2":let p=a.substring(3,4);u.push(e.abbrev(e.t("WRS-"+p),e.t("Worldwide Reference System "+p))),o(u,l,e.t("Path"),e.t("Row"));break;case"DOQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quadrangle"))),u.push(`${e.t("Quadrangle")}: ${l}`);break;case"DOQQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quarter Quadrangle")));let g=l.substr(0,l.length-2);u.push(`${e.t("Quadrangle")}: ${g}`);let v=l.substr(-2),y=v[0]==="N"?e.t("North"):e.t("South"),b=v[1]==="E"?e.t("East"):e.t("West");u.push(`${e.t("Quarter")}: ${y} ${b}`);break;case"MXRA":u.push(e.t("Maxar ARD Tile Grid"));let[w,E]=l.split(/-(.*)/);w.startsWith("Z")&&(w=w.substring(1)),u.push(`${e.t("UTM Zone")}: ${w}`),u.push(`${e.t("Quadkey")}: ${E}`);break;case"EASE":let[A,T]=l.split("-");if(A==="DGGS"){u.push(e.t("EASE-DGGS"));let[R,O,...B]=T.split(".");if(u.push(`${e.t("Level")}: ${R}`),O.length===6){u.push(`${e.t("Level 0 row cell")}: ${O.substring(0,3)}`),u.push(`${e.t("Level 0 column cell")}: ${O.substring(3,6)}`);for(let K in B){let L=B[K];L.length===2&&(u.push(`${e.t("Fraction of level {i} row cell",{i:K})}: ${L[0]}`),u.push(`${e.t("Fraction of level {i} column cell",{i:K})}: ${L[1]}`))}}break}case"CDEM":let[,D,k]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);u.push(e.t("Copernicus Digital Elevation Model Grid")),u.push(`${e.t("Easting")}: ${k}`),u.push(`${e.t("Northing")}: ${D}`);default:u.push(s)}return u.join("<br>")}};return y4=i,y4}var v4,CAe;function VIt(){if(CAe)return v4;CAe=1;const e=YB(),t=uS(),n=_b(),r=nz(),i=x8e();function s(v,y,b,w,E){let A={};for(let T in y){let D;try{let k=T.split(/:(.*)/);k.length===1&&k.unshift(E);let R=k[0];if(typeof w=="function"&&!w(T,[T]))continue;D=y[T];let O=e.getSpecification(T,b);O.ext&&(R=O.ext);let B=!1;b==="summaries"&&O.listWithKeys&&Array.isArray(D)&&D.length>0&&(D=D[0],B=!0);let K=null,L=[];if(t.isObject(O.items)){let I=D;O.listWithKeys&&(I=Object.values(I));let U=[];Array.isArray(I)?U=t.keysFromListOfObjects(I):t.isObject(I)&&(U=Object.keys(I)),K={},L=O.itemOrder.filter(q=>U.includes(q)),U.forEach(q=>{typeof O.items[q]>"u"?(K[q]={label:t.formatKey(q),explain:q},L.push(q)):(K[q]=Object.assign({},O.items[q]),K[q].label=p(q,O.items[q]))})}let $;if(b==="summaries")if(!B&&t.isObject(D))if(typeof D.minimum<"u"&&typeof D.maximum<"u"){const I=U=>h(U,T,v,y,O,w,[T]);D.minimum===D.maximum?$=I(D.minimum):D.minimum===null?$=`< ${I(D.maximum)}`:D.maximum===null?$=`> ${I(D.minimum)}`:$=`${I(D.minimum)}  ${I(D.maximum)}`}else $=r.object(D);else if(e.externalRenderer&&K){let I=B?Object.assign({},D):D.slice(0);for(let U in I){let q=t.isObject(I[U])?{}:[];for(let Y in K)q[Y]=h(I[U][Y],Y,v,y,K[Y]);I[U]=q}}else Array.isArray(D)?$=t.toList(D,!O.custom&&!O.items,I=>h(I,T,v,y,O)):console.warn(`Invalid summary value: ${D}`);typeof $>"u"&&($=h(D,T,v,y,O,w,[T])),t.isObject(A[R])||(A[R]={extension:R,label:g(R),properties:{}}),A[R].properties[T]={label:p(T,O),value:D,formatted:$,items:K,itemOrder:L,spec:O}}catch(k){console.error(`Field '${T}' with value '${D}' resulted in an error`,k)}}return Object.values(A).sort((T,D)=>n.collator.compare(T.extension,D.extension))}function o(v,y,b=null,w=""){return s(y,v,"assets",b,w)}function a(v,y,b=null,w=""){return s(y,v,"links",b,w)}function l(v,y,b=null,w=""){return s(y,v,"providers",b,w)}function u(v,y=null,b=""){return s(v,v.summaries,"summaries",y,b)}function f(v,y=null,b=""){return s(v,v,"collection",y,b)}function c(v,y=null,b=""){return s(v,v,"catalog",y,b)}function d(v,y=null,b=""){return s(v,v.properties,"metadata",y,b)}function h(v,y,b=null,w=null,E=null,A=null,T=[]){if(t.isObject(E)||(E=e.getSpecification(y)),typeof E.format=="string"){let D=i[`format${E.format}`];return D||console.warn(`Formatter '${E.format}' not available.`),D(v,y,E,b,w)}else{if(typeof E.formatter=="function")return E.formatter(v,y,E,b,w);if(t.isObject(E.mapping)){let D=String(v);return typeof E.mapping[D]<"u"?v=E.mapping[D]:typeof E.mapping[D.toLowerCase()]<"u"?v=E.mapping[D.toLowerCase()]:typeof E.mapping[D.toUpperCase()]<"u"&&(v=E.mapping[D.toUpperCase()]),r.format(t.t(v),E.unit)}else{if(v===null&&E.null)return r.null(E.null);if(Array.isArray(v)){let D=(k,R)=>h(k,y,b,w,E,A,T.concat([R]));return typeof A=="function"&&T.length>0&&(v=v.filter((k,R)=>A(T[0],T.concat([R])))),e.externalRenderer&&(E.custom||E.items)?v.map(D):t.toList(v,!1,D)}else if(t.isObject(v)){let D=R=>t.isObject(E.items)?E.listWithKeys?{items:E.items,itemOrder:E.itemOrder}:E.items[R]:t.isObject(E.properties)?E.properties[R]:{},k=(R,O,B)=>h(R,O,b,B,D(O),A,T.concat([O]));if(e.externalRenderer&&(E.custom||E.items||E.properties)){let R={};for(let O in v)typeof A=="function"&&T.length>0&&!A(T[0],T.concat([O]))||(R[O]=k(v[O],O,v));return R}else{let R=B=>p(B,D(B)),O=E.listWithKeys?[]:E.itemOrder;return t.toObject(v,k,R,O,A,T)}}else return r.format(v,E.unit)}}}function p(v,y=null){if(t.isObject(y)||(y=e.getSpecification(v)),t.isObject(y)&&typeof y.label=="string"){if(typeof y.explain=="string")return y.explain.match(/^https?:\/\//i)?t.toLink(y.explain,t.t(y.label),"about"):t.abbrev(t.t(y.label),t.t(y.explain));if(typeof y.label=="string")return t.t(y.label)}return t.formatKey(v)}function g(v){return p(v,e.getExtension(v))}return v4={format:h,label:p,extension:g,formatCatalog:c,formatCollection:f,formatSummaries:u,formatItemProperties:d,formatAsset:o,formatLink:a,formatProvider:l,formatGrouped:s},v4}var b4,kAe;function WIt(){if(kAe)return b4;kAe=1;const e=YB();return e.importFields(qFt),e.addDependency("@musement/iso-duration",WOt),e.addDependency("content-type",YOt()),e.addDependency("commonmark",ZOt()),e.addDependency("multihashes",A6t()),b4={...VIt(),Fields:e.exportFields(),Registry:e,Helper:uS(),DataTypes:nz(),Formatters:x8e(),I18N:_b()},b4}var w8e=WIt();const x4=sa(w8e);function YIt(e){if(e.type==="Catalog")return x4.formatCatalog(e);if(e.type==="Collection")return x4.formatCollection(e);if(e.type==="Feature")return x4.formatItemProperties(e)}async function XIt(e){const n=await(await fetch(`${e.for}?ts=${Date.now()}`)).json();e.stacInfo=YIt(n),e.dispatchEvent(new CustomEvent("loaded"))}function yg(e,t,n){return IFt(Object.entries(t.stacProperties).filter(([r])=>e==null?void 0:e.includes(r)).reverse().sort(([r],[i])=>(e==null?void 0:e.indexOf(r))>(e==null?void 0:e.indexOf(i))?1:-1),n)}const ZIt=`
:host {
  --color-primary-lighter: color-mix(in srgb, var(--primary-color), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
h1 {
  margin-block-start: 0.67em;
  margin-block-end: 0.67em;
  line-height: 1.5;
}
header h1 {
  font-size: 24px;
  color: var(--primary-color);
}
header h2 {
  font-size: 22px;
  color: var(--primary-color);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#body ul {
  padding: 0;
}
section#body > ul:not(.single-property) {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#body li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#body .value li {
  margin-bottom: 0px;    
}
section#body slot:not([name=description]) ul li {
  list-style: none;
}
section#body .colon {
  margin-right: 4px;
}
section#body .label {
  font-weight: bold;
}
section#body ul li,
section#body ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#body ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--primary-color);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a,
footer h1 {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`;function KIt(e=[]){return Qe`
    <section id="body" part="body">
      <ul class=${e.length===1?"single-property":Xr}>
        ${su(e,([,t])=>Qe`
            <slot name=${t.label.toLowerCase()}>
              <li>
                ${Un(e.length>1,()=>Qe` <span class="label"> ${t.label}</span
                      ><span class="colon">:</span>`)}
                <span class="value">
                  ${Un(t.label.toLowerCase()==="description",()=>Qe`
                      <eox-stacinfo-shadow .content=${t.formatted}>
                      </eox-stacinfo-shadow>
                    `,()=>Qe`${Sc(t.formatted)}`)}
                </span>
              </li>
            </slot>
          `)}
      </ul>
    </section>
  `}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _8e=Symbol.for(""),JIt=e=>{if((e==null?void 0:e.r)===_8e)return e==null?void 0:e._$litStatic$},vT=e=>({_$litStatic$:e,r:_8e}),TAe=new Map,QIt=e=>(t,...n)=>{const r=n.length;let i,s;const o=[],a=[];let l,u=0,f=!1;for(;u<r;){for(l=t[u];u<r&&(s=n[u],(i=JIt(s))!==void 0);)l+=i+t[++u],f=!0;u!==r&&a.push(s),o.push(l),u++}if(u===r&&o.push(t[r]),f){const c=o.join("$$lit$$");(t=TAe.get(c))===void 0&&(o.raw=o,TAe.set(c,t=o)),n=a}return e(t,...n)},E8e=QIt(Qe);function ePt(e=[]){return Qe`
    ${e.length>0?Qe`
          <header part="header">
            <slot name="header">
              ${su(e,([,t],n)=>E8e`
              <h${vT((n+1).toString())}>${Sc(t.formatted)}</h${vT((n+1).toString())}>
              `)}
            </slot>
          </header>
        `:Xr}
  `}function tPt(e=[]){return Qe`
    <section id="tags" part="tags">
      <ul>
        ${su(e,([,t])=>Qe`<slot name=${t.label.toLowerCase()}
              ><li>
                <span class="label">${Sc(t.formatted)}</span>
              </li></slot
            >`)}
      </ul>
    </section>
  `}function nPt(e=[]){return Qe`
    ${Un(e.length>0,()=>Qe`
        <section id="featured" part="featured">
          ${su(e,([,t])=>Qe`
              <details>
                <summary>
                  <slot
                    name="featured-${t.label.toLowerCase()}-summary"
                    class="title"
                  >
                    ${t.label}
                    ${Un(t.length,()=>Qe` <span class="count">${t.length}</span> `)}
                  </slot>
                </summary>
                <div class="featured-container">
                  <slot name="featured-${t.label.toLowerCase()}">
                    ${Un(t.label.toLowerCase()==="description",()=>Qe`
                        <eox-stacinfo-shadow .content=${t.formatted}>
                        </eox-stacinfo-shadow>
                      `,()=>Qe`${Sc(t.formatted)}`)}
                  </slot>
                </div>
              </details>
            `)}
        </section>
      `)}
  `}function rPt(e=[]){return Qe`
    ${Un(e.length>0,()=>Qe`
        <footer part="footer">
          <slot name="footer">
            ${su(e,([t,n],r)=>E8e`
                  <div class="footer-container">
                    <h${vT((r+1).toString())}>
                      ${Sc(n.label)}
                    </h${vT((r+1).toString())}>
                    <small>${Sc(n.formatted)}</small>
                  </div>
                  ${Un(t==="sci:citation",()=>Qe`
                      <button
                        class="copy icon"
                        @click=${()=>navigator.clipboard.writeText(n.formatted)}
                      >
                        copy
                      </button>
                    `)}
                `)}
          </slot>
        </footer>
      `)}
  `}class iPt extends Zr{static get properties(){return{content:{type:String}}}constructor(){super(),this.content=null}render(){return Qe`<style>
        img,
        video,
        iframe {
          max-width: 100%;
        }
      </style>
      <div>${Sc(this.content)}</div>`}}customElements.define("eox-stacinfo-shadow",iPt);class sPt extends Zr{static get properties(){return{allowHtml:{attribute:"allow-html",type:Boolean},unstyled:{attribute:"unstyled",type:Boolean},for:{attribute:"for",type:String},header:{attribute:!1,type:Array},tags:{attribute:!1,type:Array},body:{attribute:!1,type:Array},featured:{attribute:!1,type:Array},footer:{attribute:!1,type:Array},stacInfo:{attribute:!1,state:!0,type:Array},stacProperties:{attribute:!1,state:!0,type:Array}}}constructor(){super(),this.allowHtml=!1,this.unstyled=!1,this.for="",this.header=[],this.tags=[],this.body=[],this.featured=[],this.footer=[],this.stacInfo=[],this.stacProperties=[]}updated(t){t.has("for")&&XIt(this),t.has("stacInfo")&&(w8e.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0,PFt(this))}render(){return Qe`
      <style>
        :host {
          display: block;
        }
        ${!this.unstyled&&kD}
        ${!this.unstyled&&ZIt}
      </style>
      <slot></slot>
      ${Un(this.stacInfo.length,()=>Qe`
          <!-- Header Component-->
          ${ePt(yg(this.header,this))}
          <main>
            ${yg(this.tags,this).length+yg(this.body,this).length>0?Qe`
                  <!-- Tags Component-->
                  ${tPt(yg(this.tags,this))}

                  <!-- Body Component-->
                  ${KIt(yg(this.body,this))}
                `:Xr}

            <!-- Featured Component-->
            ${nPt(yg(this.featured,this,"featured"))}
          </main>

          <!-- Footer Component-->
          ${rPt(yg(this.footer,this))}
        `,()=>Qe`${Xr}`)}
    `}}customElements.define("eox-stacinfo",sPt);const DAe={};function oPt(e){let t=DAe[e];if(t)return t;t=DAe[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function O1(e,t){typeof t!="string"&&(t=O1.defaultChars);const n=oPt(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(u&192)===128){const f=a<<12&61440|l<<6&4032|u&63;f<2048||f>=55296&&f<=57343?i+="":i+=String.fromCharCode(f),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16),f=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(u&192)===128&&(f&192)===128){let c=a<<18&1835008|l<<12&258048|u<<6&4032|f&63;c<65536||c>1114111?i+="":(c-=65536,i+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),s+=9;continue}}i+=""}return i})}O1.defaultChars=";/?:@&=+$,#";O1.componentChars="";const LAe={};function aPt(e){let t=LAe[e];if(t)return t;t=LAe[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function dS(e,t,n){typeof t!="string"&&(n=t,t=dS.defaultChars),typeof n>"u"&&(n=!0);const r=aPt(t);let i="";for(let s=0,o=e.length;s<o;s++){const a=e.charCodeAt(s);if(n&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(s+1,s+3))){i+=e.slice(s,s+3),s+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=e.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(e[s]+e[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[s])}return i}dS.defaultChars=";/?:@&=+$,-_.!~*'()#";dS.componentChars="-_.!~*'()";function rz(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function bT(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const lPt=/^([a-z0-9.+-]+:)/i,uPt=/:[0-9]*$/,cPt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fPt=["<",">",'"',"`"," ","\r",`
`,"	"],dPt=["{","}","|","\\","^","`"].concat(fPt),hPt=["'"].concat(dPt),RAe=["%","/","?",";","#"].concat(hPt),FAe=["/","?","#"],pPt=255,OAe=/^[+a-z0-9A-Z_-]{0,63}$/,mPt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,MAe={javascript:!0,"javascript:":!0},$Ae={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function iz(e,t){if(e&&e instanceof bT)return e;const n=new bT;return n.parse(e,t),n}bT.prototype.parse=function(e,t){let n,r,i,s=e;if(s=s.trim(),!t&&e.split("#").length===1){const u=cPt.exec(s);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=lPt.exec(s);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(t||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&MAe[o])&&(s=s.substr(2),this.slashes=!0)),!MAe[o]&&(i||o&&!$Ae[o])){let u=-1;for(let p=0;p<FAe.length;p++)r=s.indexOf(FAe[p]),r!==-1&&(u===-1||r<u)&&(u=r);let f,c;u===-1?c=s.lastIndexOf("@"):c=s.lastIndexOf("@",u),c!==-1&&(f=s.slice(0,c),s=s.slice(c+1),this.auth=f),u=-1;for(let p=0;p<RAe.length;p++)r=s.indexOf(RAe[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=s.length),s[u-1]===":"&&u--;const d=s.slice(0,u);s=s.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let g=0,v=p.length;g<v;g++){const y=p[g];if(y&&!y.match(OAe)){let b="";for(let w=0,E=y.length;w<E;w++)y.charCodeAt(w)>127?b+="x":b+=y[w];if(!b.match(OAe)){const w=p.slice(0,g),E=p.slice(g+1),A=y.match(mPt);A&&(w.push(A[1]),E.unshift(A[2])),E.length&&(s=E.join(".")+s),this.hostname=w.join(".");break}}}}this.hostname.length>pPt&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),$Ae[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};bT.prototype.parseHost=function(e){let t=uPt.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const gPt=Object.freeze(Object.defineProperty({__proto__:null,decode:O1,encode:dS,format:rz,parse:iz},Symbol.toStringTag,{value:"Module"})),S8e=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,A8e=/[\0-\x1F\x7F-\x9F]/,yPt=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,sz=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,C8e=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,k8e=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,vPt=Object.freeze(Object.defineProperty({__proto__:null,Any:S8e,Cc:A8e,Cf:yPt,P:sz,S:C8e,Z:k8e},Symbol.toStringTag,{value:"Module"})),bPt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xPt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var w4;const wPt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),_Pt=(w4=String.fromCodePoint)!==null&&w4!==void 0?w4:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function EPt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=wPt.get(e))!==null&&t!==void 0?t:e}var To;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(To||(To={}));const SPt=32;var Tp;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Tp||(Tp={}));function Y$(e){return e>=To.ZERO&&e<=To.NINE}function APt(e){return e>=To.UPPER_A&&e<=To.UPPER_F||e>=To.LOWER_A&&e<=To.LOWER_F}function CPt(e){return e>=To.UPPER_A&&e<=To.UPPER_Z||e>=To.LOWER_A&&e<=To.LOWER_Z||Y$(e)}function kPt(e){return e===To.EQUALS||CPt(e)}var Ao;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ao||(Ao={}));var hp;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(hp||(hp={}));class TPt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ao.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=hp.Strict}startEntity(t){this.decodeMode=t,this.state=Ao.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ao.EntityStart:return t.charCodeAt(n)===To.NUM?(this.state=Ao.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ao.NamedEntity,this.stateNamedEntity(t,n));case Ao.NumericStart:return this.stateNumericStart(t,n);case Ao.NumericDecimal:return this.stateNumericDecimal(t,n);case Ao.NumericHex:return this.stateNumericHex(t,n);case Ao.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|SPt)===To.LOWER_X?(this.state=Ao.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ao.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Y$(i)||APt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Y$(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===To.SEMI)this.consumed+=1;else if(this.decodeMode===hp.Strict)return 0;return this.emitCodePoint(EPt(this.result),this.consumed),this.errors&&(t!==To.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Tp.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=DPt(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===hp.Attribute&&(s===0||kPt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Tp.VALUE_LENGTH)>>14,s!==0){if(o===To.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==hp.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Tp.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Tp.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ao.NamedEntity:return this.result!==0&&(this.decodeMode!==hp.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ao.NumericDecimal:return this.emitNumericEntity(0,2);case Ao.NumericHex:return this.emitNumericEntity(0,3);case Ao.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ao.EntityStart:return 0}}}function T8e(e){let t="";const n=new TPt(e,r=>t+=_Pt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function DPt(e,t,n,r){const i=(t&Tp.BRANCH_LENGTH)>>7,s=t&Tp.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}const LPt=T8e(bPt);T8e(xPt);function D8e(e,t=hp.Legacy){return LPt(e,t)}function RPt(e){return Object.prototype.toString.call(e)}function oz(e){return RPt(e)==="[object String]"}const FPt=Object.prototype.hasOwnProperty;function OPt(e,t){return FPt.call(e,t)}function PR(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function L8e(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function az(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function xT(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const R8e=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,MPt=/&([a-z#][a-z0-9]{1,31});/gi,$Pt=new RegExp(R8e.source+"|"+MPt.source,"gi"),IPt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function PPt(e,t){if(t.charCodeAt(0)===35&&IPt.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return az(r)?xT(r):e}const n=D8e(e);return n!==e?n:e}function NPt(e){return e.indexOf("\\")<0?e:e.replace(R8e,"$1")}function M1(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace($Pt,function(t,n,r){return n||PPt(t,r)})}const BPt=/[&<>"]/,zPt=/[&<>"]/g,jPt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function UPt(e){return jPt[e]}function rm(e){return BPt.test(e)?e.replace(zPt,UPt):e}const qPt=/[.?*+^$[\]\\(){}|-]/g;function HPt(e){return e.replace(qPt,"\\$&")}function Xi(e){switch(e){case 9:case 32:return!0}return!1}function I2(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function P2(e){return sz.test(e)||C8e.test(e)}function N2(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function NR(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const GPt={mdurl:gPt,ucmicro:vPt},VPt=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:L8e,assign:PR,escapeHtml:rm,escapeRE:HPt,fromCodePoint:xT,has:OPt,isMdAsciiPunct:N2,isPunctChar:P2,isSpace:Xi,isString:oz,isValidEntityCode:az,isWhiteSpace:I2,lib:GPt,normalizeReference:NR,unescapeAll:M1,unescapeMd:NPt},Symbol.toStringTag,{value:"Module"}));function WPt(e,t,n){let r,i,s,o;const a=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<a;){if(s=e.src.charCodeAt(e.pos),s===93&&(r--,r===0)){i=!0;break}if(o=e.pos,e.md.inline.skipToken(e),s===91){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return i&&(u=e.pos),e.pos=l,u}function YPt(e,t,n){let r,i=t;const s={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(r=e.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=M1(e.slice(t+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let o=0;for(;i<n&&(r=e.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return t===i||o!==0||(s.str=M1(e.slice(t,i)),s.pos=i,s.ok=!0),s}function XPt(e,t,n,r){let i,s=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=n)return o;let a=e.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;t++,s++,a===40&&(a=41),o.marker=a}for(;s<n;){if(i=e.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=M1(e.slice(t,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<n&&s++,s++}return o.can_continue=!0,o.str+=M1(e.slice(t,s)),o}const ZPt=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:YPt,parseLinkLabel:WPt,parseLinkTitle:XPt},Symbol.toStringTag,{value:"Module"})),id={};id.code_inline=function(e,t,n,r,i){const s=e[t];return"<code"+i.renderAttrs(s)+">"+rm(s.content)+"</code>"};id.code_block=function(e,t,n,r,i){const s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+rm(e[t].content)+`</code></pre>
`};id.fence=function(e,t,n,r,i){const s=e[t],o=s.info?M1(s.info).trim():"";let a="",l="";if(o){const f=o.split(/(\s+)/g);a=f[0],l=f.slice(2).join("")}let u;if(n.highlight?u=n.highlight(s.content,a,l)||rm(s.content):u=rm(s.content),u.indexOf("<pre")===0)return u+`
`;if(o){const f=s.attrIndex("class"),c=s.attrs?s.attrs.slice():[];f<0?c.push(["class",n.langPrefix+a]):(c[f]=c[f].slice(),c[f][1]+=" "+n.langPrefix+a);const d={attrs:c};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${u}</code></pre>
`};id.image=function(e,t,n,r,i){const s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(e,t,n)};id.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};id.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};id.text=function(e,t){return rm(e[t].content)};id.html_block=function(e,t){return e[t].content};id.html_inline=function(e,t){return e[t].content};function Eb(){this.rules=PR({},id)}Eb.prototype.renderAttrs=function(t){let n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+rm(t.attrs[n][0])+'="'+rm(t.attrs[n][1])+'"';return i};Eb.prototype.renderToken=function(t,n,r){const i=t[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&n+1<t.length)){const a=t[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};Eb.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;typeof i[a]<"u"?r+=i[a](e,s,t,n,this):r+=this.renderToken(e,s,t)}return r};Eb.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,s=e.length;i<s;i++)switch(e[i].type){case"text":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":r+=e[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Eb.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;a==="inline"?r+=this.renderInline(e[s].children,t,n):typeof i[a]<"u"?r+=i[a](e,s,t,n,this):r+=this.renderToken(e,s,t,n)}return r};function Nl(){this.__rules__=[],this.__cache__=null}Nl.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Nl.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Nl.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Nl.prototype.before=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Nl.prototype.after=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Nl.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Nl.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Nl.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Nl.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Nl.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Gc(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Gc.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};Gc.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Gc.prototype.attrSet=function(t,n){const r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};Gc.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Gc.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function F8e(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}F8e.prototype.Token=Gc;const KPt=/\r\n?|\n/g,JPt=/\0/g;function QPt(e){let t;t=e.src.replace(KPt,`
`),t=t.replace(JPt,""),e.src=t}function e8t(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function t8t(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function n8t(e){return/^<a[>\s]/i.test(e)}function r8t(e){return/^<\/a\s*>/i.test(e)}function i8t(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(n8t(a.content)&&s>0&&s--,r8t(a.content)&&s++),!(s>0)&&a.type==="text"&&e.md.linkify.test(a.content)){const l=a.content;let u=e.md.linkify.match(l);const f=[];let c=a.level,d=0;u.length>0&&u[0].index===0&&o>0&&i[o-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,g=e.md.normalizeLink(p);if(!e.md.validateLink(g))continue;let v=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const y=u[h].index;if(y>d){const A=new e.Token("text","",0);A.content=l.slice(d,y),A.level=c,f.push(A)}const b=new e.Token("link_open","a",1);b.attrs=[["href",g]],b.level=c++,b.markup="linkify",b.info="auto",f.push(b);const w=new e.Token("text","",0);w.content=v,w.level=c,f.push(w);const E=new e.Token("link_close","a",-1);E.level=--c,E.markup="linkify",E.info="auto",f.push(E),d=u[h].lastIndex}if(d<l.length){const h=new e.Token("text","",0);h.content=l.slice(d),h.level=c,f.push(h)}t[n].children=i=L8e(i,o,f)}}}}const O8e=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,s8t=/\((c|tm|r)\)/i,o8t=/\((c|tm|r)\)/ig,a8t={c:"",r:"",tm:""};function l8t(e,t){return a8t[t.toLowerCase()]}function u8t(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(o8t,l8t)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function c8t(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&O8e.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function f8t(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(s8t.test(e.tokens[t].content)&&u8t(e.tokens[t].children),O8e.test(e.tokens[t].content)&&c8t(e.tokens[t].children))}const d8t=/['"]/,IAe=/['"]/g,PAe="";function dC(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function h8t(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const s=e[i],o=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,s.type!=="text")continue;let a=s.content,l=0,u=a.length;e:for(;l<u;){IAe.lastIndex=l;const f=IAe.exec(a);if(!f)break;let c=!0,d=!0;l=f.index+1;const h=f[0]==="'";let p=32;if(f.index-1>=0)p=a.charCodeAt(f.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let g=32;if(l<u)g=a.charCodeAt(l);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){g=e[n].content.charCodeAt(0);break}const v=N2(p)||P2(String.fromCharCode(p)),y=N2(g)||P2(String.fromCharCode(g)),b=I2(p),w=I2(g);if(w?c=!1:y&&(b||v||(c=!1)),b?d=!1:v&&(w||y||(d=!1)),g===34&&f[0]==='"'&&p>=48&&p<=57&&(d=c=!1),c&&d&&(c=v,d=y),!c&&!d){h&&(s.content=dC(s.content,f.index,PAe));continue}if(d)for(n=r.length-1;n>=0;n--){let E=r[n];if(r[n].level<o)break;if(E.single===h&&r[n].level===o){E=r[n];let A,T;h?(A=t.md.options.quotes[2],T=t.md.options.quotes[3]):(A=t.md.options.quotes[0],T=t.md.options.quotes[1]),s.content=dC(s.content,f.index,T),e[E.token].content=dC(e[E.token].content,E.pos,A),l+=T.length-1,E.token===i&&(l+=A.length-1),a=s.content,u=a.length,r.length=n;continue e}}c?r.push({token:i,pos:f.index,single:h,level:o}):d&&h&&(s.content=dC(s.content,f.index,PAe))}}}function p8t(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!d8t.test(e.tokens[t].content)||h8t(e.tokens[t].children,e)}function m8t(e){let t,n;const r=e.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(t=0;t<a;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<a;t++)o[t].type==="text"&&t+1<a&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const _4=[["normalize",QPt],["block",e8t],["inline",t8t],["linkify",i8t],["replacements",f8t],["smartquotes",p8t],["text_join",m8t]];function lz(){this.ruler=new Nl;for(let e=0;e<_4.length;e++)this.ruler.push(_4[e][0],_4[e][1])}lz.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};lz.prototype.State=F8e;function sd(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,l=0,u=i.length,f=!1;o<u;o++){const c=i.charCodeAt(o);if(!f)if(Xi(c)){a++,c===9?l+=4-l%4:l++;continue}else f=!0;(c===10||o===u-1)&&(c!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),f=!1,a=0,l=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}sd.prototype.push=function(e,t,n){const r=new Gc(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};sd.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};sd.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};sd.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Xi(r))break}return t};sd.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Xi(this.src.charCodeAt(--t)))return t+1;return t};sd.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};sd.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};sd.prototype.getLines=function(t,n,r,i){if(t>=n)return"";const s=new Array(n-t);for(let o=0,a=t;a<n;a++,o++){let l=0;const u=this.bMarks[a];let f=u,c;for(a+1<n||i?c=this.eMarks[a]+1:c=this.eMarks[a];f<c&&l<r;){const d=this.src.charCodeAt(f);if(Xi(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(f-u<this.tShift[a])l++;else break;f++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(f,c):s[o]=this.src.slice(f,c)}return s.join("")};sd.prototype.Token=Gc;const g8t=65536;function E4(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function NAe(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),s=!1,o=0,a="";for(;r<n;)i===124&&(s?(a+=e.substring(o,r-1),o=r):(t.push(a+e.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=e.charCodeAt(r);return t.push(a+e.substring(o)),t}function y8t(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let s=e.bMarks[i]+e.tShift[i];if(s>=e.eMarks[i])return!1;const o=e.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=e.eMarks[i])return!1;const a=e.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Xi(a)||o===45&&Xi(a))return!1;for(;s<e.eMarks[i];){const E=e.src.charCodeAt(s);if(E!==124&&E!==45&&E!==58&&!Xi(E))return!1;s++}let l=E4(e,t+1),u=l.split("|");const f=[];for(let E=0;E<u.length;E++){const A=u[E].trim();if(!A){if(E===0||E===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=E4(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=NAe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const c=u.length;if(c===0||c!==f.length)return!1;if(r)return!0;const d=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),g=[t,0];p.map=g;const v=e.push("thead_open","thead",1);v.map=[t,t+1];const y=e.push("tr_open","tr",1);y.map=[t,t+1];for(let E=0;E<u.length;E++){const A=e.push("th_open","th",1);f[E]&&(A.attrs=[["style","text-align:"+f[E]]]);const T=e.push("inline","",0);T.content=u[E].trim(),T.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let b,w=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let E=!1;for(let T=0,D=h.length;T<D;T++)if(h[T](e,i,n,!0)){E=!0;break}if(E||(l=E4(e,i).trim(),!l)||e.sCount[i]-e.blkIndent>=4||(u=NAe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=c-u.length,w>g8t))break;if(i===t+2){const T=e.push("tbody_open","tbody",1);T.map=b=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[i,i+1];for(let T=0;T<c;T++){const D=e.push("td_open","td",1);f[T]&&(D.attrs=[["style","text-align:"+f[T]]]);const k=e.push("inline","",0);k.content=u[T]?u[T].trim():"",k.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return b&&(e.push("tbody_close","tbody",-1),b[1]=i),e.push("table_close","table",-1),g[1]=i,e.parentType=d,e.line=i,!0}function v8t(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,i=r;continue}break}e.line=i;const s=e.push("code_block","code",0);return s.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,s.map=[t,e.line],!0}function b8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>s)return!1;const o=e.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=e.skipChars(i,o);let l=i-a;if(l<3)return!1;const u=e.src.slice(a,i),f=e.src.slice(i,s);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let c=t,d=!1;for(;c++,!(c>=n||(i=a=e.bMarks[c]+e.tShift[c],s=e.eMarks[c],i<s&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(i)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(i=e.skipChars(i,o),!(i-a<l)&&(i=e.skipSpaces(i),!(i<s)))){d=!0;break}l=e.sCount[t],e.line=c+(d?1:0);const h=e.push("fence","code",0);return h.info=f,h.content=e.getLines(t+1,c,l,!0),h.markup=u,h.map=[t,e.line],!0}function x8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],f=[],c=e.md.block.ruler.getRules("blockquote"),d=e.parentType;e.parentType="blockquote";let h=!1,p;for(p=t;p<n;p++){const w=e.sCount[p]<e.blkIndent;if(i=e.bMarks[p]+e.tShift[p],s=e.eMarks[p],i>=s)break;if(e.src.charCodeAt(i++)===62&&!w){let A=e.sCount[p]+1,T,D;e.src.charCodeAt(i)===32?(i++,A++,D=!1,T=!0):e.src.charCodeAt(i)===9?(T=!0,(e.bsCount[p]+A)%4===3?(i++,A++,D=!1):D=!0):T=!1;let k=A;for(a.push(e.bMarks[p]),e.bMarks[p]=i;i<s;){const R=e.src.charCodeAt(i);if(Xi(R))R===9?k+=4-(k+e.bsCount[p]+(D?1:0))%4:k++;else break;i++}h=i>=s,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(T?1:0),u.push(e.sCount[p]),e.sCount[p]=k-A,f.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(h)break;let E=!1;for(let A=0,T=c.length;A<T;A++)if(c[A](e,p,n,!0)){E=!0;break}if(E){e.lineMax=p,e.blkIndent!==0&&(a.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}a.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]=-1}const g=e.blkIndent;e.blkIndent=0;const v=e.push("blockquote_open","blockquote",1);v.markup=">";const y=[t,0];v.map=y,e.md.block.tokenize(e,t,p);const b=e.push("blockquote_close","blockquote",-1);b.markup=">",e.lineMax=o,e.parentType=d,y[1]=e.line;for(let w=0;w<f.length;w++)e.bMarks[w+t]=a[w],e.tShift[w+t]=f[w],e.sCount[w+t]=u[w],e.bsCount[w+t]=l[w];return e.blkIndent=g,!0}function w8t(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const u=e.src.charCodeAt(s++);if(u!==o&&!Xi(u))return!1;u===o&&a++}if(a<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function BAe(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=e.src.charCodeAt(r);if(!Xi(s))return-1}return r}function zAe(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let s=e.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=e.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=e.src.charCodeAt(i),!Xi(s))?-1:i}function _8t(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function E8t(e,t,n,r){let i,s,o,a,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let c,d,h;if((h=zAe(e,l))>=0){if(c=!0,o=e.bMarks[l]+e.tShift[l],d=Number(e.src.slice(o,h-1)),f&&d!==1)return!1}else if((h=BAe(e,l))>=0)c=!1;else return!1;if(f&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const p=e.src.charCodeAt(h-1),g=e.tokens.length;c?(a=e.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=e.push("bullet_list_open","ul",1);const v=[l,0];a.map=v,a.markup=String.fromCharCode(p);let y=!1;const b=e.md.block.ruler.getRules("list"),w=e.parentType;for(e.parentType="list";l<n;){s=h,i=e.eMarks[l];const E=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let A=E;for(;s<i;){const I=e.src.charCodeAt(s);if(I===9)A+=4-(A+e.bsCount[l])%4;else if(I===32)A++;else break;s++}const T=s;let D;T>=i?D=1:D=A-E,D>4&&(D=1);const k=E+D;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const R=[l,0];a.map=R,c&&(a.info=e.src.slice(o,h-1));const O=e.tight,B=e.tShift[l],K=e.sCount[l],L=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=k,e.tight=!0,e.tShift[l]=T-e.bMarks[l],e.sCount[l]=A,T>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||y)&&(u=!1),y=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=L,e.tShift[l]=B,e.sCount[l]=K,e.tight=O,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=e.line,R[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let $=!1;for(let I=0,U=b.length;I<U;I++)if(b[I](e,l,n,!0)){$=!0;break}if($)break;if(c){if(h=zAe(e,l),h<0)break;o=e.bMarks[l]+e.tShift[l]}else if(h=BAe(e,l),h<0)break;if(p!==e.src.charCodeAt(h-1))break}return c?a=e.push("ordered_list_close","ol",-1):a=e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),v[1]=l,e.line=l,e.parentType=w,u&&_8t(e,g),!0}function S8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function a(b){const w=e.lineMax;if(b>=w||e.isEmpty(b))return null;let E=!1;if(e.sCount[b]-e.blkIndent>3&&(E=!0),e.sCount[b]<0&&(E=!0),!E){const D=e.md.block.ruler.getRules("reference"),k=e.parentType;e.parentType="reference";let R=!1;for(let O=0,B=D.length;O<B;O++)if(D[O](e,b,w,!0)){R=!0;break}if(e.parentType=k,R)return null}const A=e.bMarks[b]+e.tShift[b],T=e.eMarks[b];return e.src.slice(A,T+1)}let l=e.src.slice(i,s+1);s=l.length;let u=-1;for(i=1;i<s;i++){const b=l.charCodeAt(i);if(b===91)return!1;if(b===93){u=i;break}else if(b===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(b===92&&(i++,i<s&&l.charCodeAt(i)===10)){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<s;i++){const b=l.charCodeAt(i);if(b===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Xi(b))break}const f=e.md.helpers.parseLinkDestination(l,i,s);if(!f.ok)return!1;const c=e.md.normalizeLink(f.str);if(!e.md.validateLink(c))return!1;i=f.pos;const d=i,h=o,p=i;for(;i<s;i++){const b=l.charCodeAt(i);if(b===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Xi(b))break}let g=e.md.helpers.parseLinkTitle(l,i,s);for(;g.can_continue;){const b=a(o);if(b===null)break;l+=b,i=s,s=l.length,o++,g=e.md.helpers.parseLinkTitle(l,i,s,g)}let v;for(i<s&&p!==i&&g.ok?(v=g.str,i=g.pos):(v="",i=d,o=h);i<s;){const b=l.charCodeAt(i);if(!Xi(b))break;i++}if(i<s&&l.charCodeAt(i)!==10&&v)for(v="",i=d,o=h;i<s;){const b=l.charCodeAt(i);if(!Xi(b))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const y=NR(l.slice(1,u));return y?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:v,href:c}),e.line=o),!0):!1}const A8t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],C8t="[a-zA-Z_:][a-zA-Z0-9:._-]*",k8t="[^\"'=<>`\\x00-\\x20]+",T8t="'[^']*'",D8t='"[^"]*"',L8t="(?:"+k8t+"|"+T8t+"|"+D8t+")",R8t="(?:\\s+"+C8t+"(?:\\s*=\\s*"+L8t+")?)",M8e="<[A-Za-z][A-Za-z0-9\\-]*"+R8t+"*\\s*\\/?>",$8e="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",F8t="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",O8t="<[?][\\s\\S]*?[?]>",M8t="<![A-Za-z][^>]*>",$8t="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",I8t=new RegExp("^(?:"+M8e+"|"+$8e+"|"+F8t+"|"+O8t+"|"+M8t+"|"+$8t+")"),P8t=new RegExp("^(?:"+M8e+"|"+$8e+")"),Zy=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+A8t.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(P8t.source+"\\s*$"),/^$/,!1]];function N8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let o=e.src.slice(i,s),a=0;for(;a<Zy.length&&!Zy[a][0].test(o);a++);if(a===Zy.length)return!1;if(r)return Zy[a][2];let l=t+1;if(!Zy[a][1].test(o)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],s=e.eMarks[l],o=e.src.slice(i,s),Zy[a][1].test(o)){o.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function B8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=e.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=e.src.charCodeAt(++i);if(a>6||i<s&&!Xi(o))return!1;if(r)return!0;s=e.skipSpacesBack(s,i);const l=e.skipCharsBack(s,35,i);l>i&&Xi(e.src.charCodeAt(l-1))&&(s=l),e.line=t+1;const u=e.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(i,s).trim(),f.map=[t,e.line],f.children=[];const c=e.push("heading_close","h"+String(a),-1);return c.markup="########".slice(0,a),!0}function z8t(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let s=0,o,a=t+1;for(;a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let h=e.bMarks[a]+e.tShift[a];const p=e.eMarks[a];if(h<p&&(o=e.src.charCodeAt(h),(o===45||o===61)&&(h=e.skipChars(h,o),h=e.skipSpaces(h),h>=p))){s=o===61?1:2;break}}if(e.sCount[a]<0)continue;let d=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](e,a,n,!0)){d=!0;break}if(d)break}if(!s)return!1;const l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const u=e.push("heading_open","h"+String(s),1);u.markup=String.fromCharCode(o),u.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const c=e.push("heading_close","h"+String(s),-1);return c.markup=String.fromCharCode(o),e.parentType=i,!0}function j8t(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let s=t+1;for(e.parentType="paragraph";s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)continue;let u=!1;for(let f=0,c=r.length;f<c;f++)if(r[f](e,s,n,!0)){u=!0;break}if(u)break}const o=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s;const a=e.push("paragraph_open","p",1);a.map=[t,e.line];const l=e.push("inline","",0);return l.content=o,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const hC=[["table",y8t,["paragraph","reference"]],["code",v8t],["fence",b8t,["paragraph","reference","blockquote","list"]],["blockquote",x8t,["paragraph","reference","blockquote","list"]],["hr",w8t,["paragraph","reference","blockquote","list"]],["list",E8t,["paragraph","reference","blockquote"]],["reference",S8t],["html_block",N8t,["paragraph","reference","blockquote"]],["heading",B8t,["paragraph","reference","blockquote"]],["lheading",z8t],["paragraph",j8t]];function BR(){this.ruler=new Nl;for(let e=0;e<hC.length;e++)this.ruler.push(hC[e][0],hC[e][1],{alt:(hC[e][2]||[]).slice()})}BR.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,s=e.md.options.maxNesting;let o=t,a=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=s){e.line=n;break}const l=e.line;let u=!1;for(let f=0;f<i;f++)if(u=r[f](e,o,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),o=e.line,o<n&&e.isEmpty(o)&&(a=!0,o++,e.line=o)}};BR.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)};BR.prototype.State=sd;function hS(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}hS.prototype.pushPending=function(){const e=new Gc("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};hS.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Gc(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};hS.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let s=e;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const o=s-e,a=s<n?this.src.charCodeAt(s):32,l=N2(i)||P2(String.fromCharCode(i)),u=N2(a)||P2(String.fromCharCode(a)),f=I2(i),c=I2(a),d=!c&&(!u||f||l),h=!f&&(!l||c||u);return{can_open:d&&(t||!h||l),can_close:h&&(t||!d||u),length:o}};hS.prototype.Token=Gc;function U8t(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function q8t(e,t){let n=e.pos;for(;n<e.posMax&&!U8t(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const H8t=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function G8t(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(H8t);if(!i)return!1;const s=i[1],o=e.md.linkify.matchAtStart(e.src.slice(n-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=e.md.normalizeLink(a);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-s.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="linkify",c.info="auto"}return e.pos+=a.length-s.length,!0}function V8t(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Xi(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const uz=[];for(let e=0;e<256;e++)uz.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){uz[e.charCodeAt(0)]=1});function W8t(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),!!Xi(i));)n++;return e.pos=n,!0}let s=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=e.src.charCodeAt(n+1);a>=56320&&a<=57343&&(s+=e.src[n+1],n++)}const o="\\"+s;if(!t){const a=e.push("text_special","",0);i<256&&uz[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return e.pos=n+1,!0}function Y8t(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=e.posMax;for(;n<s&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(i,n),a=o.length;if(e.backticksScanned&&(e.backticks[a]||0)<=i)return t||(e.pending+=o),e.pos+=a,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<s&&e.src.charCodeAt(l)===96;)l++;const f=l-u;if(f===a){if(!t){const c=e.push("code_inline","code",0);c.markup=o,c.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=u}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=a,!0}function X8t(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const i=e.scanDelims(e.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=e.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=e.push("text","",0),a.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function jAe(e,t){let n;const r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(o.marker!==126||o.end===-1)continue;const a=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[a.token-1].type==="text"&&e.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,s!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[s],e.tokens[s]=n)}}function Z8t(e){const t=e.tokens_meta,n=e.tokens_meta.length;jAe(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&jAe(e,t[r].delimiters)}const I8e={tokenize:X8t,postProcess:Z8t};function K8t(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const i=e.scanDelims(e.pos,r===42);for(let s=0;s<i.length;s++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function UAe(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const i=t[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=t[i.end],o=r>0&&t[r-1].end===i.end+1&&t[r-1].marker===i.marker&&t[r-1].token===i.token-1&&t[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),l=e.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const u=e.tokens[s.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?a+a:a,u.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[i.end+1].token].content="",r--)}}function J8t(e){const t=e.tokens_meta,n=e.tokens_meta.length;UAe(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&UAe(e,t[r].delimiters)}const P8e={tokenize:K8t,postProcess:J8t};function Q8t(e,t){let n,r,i,s,o="",a="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,c=e.posMax,d=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let p=h+1;if(p<c&&e.src.charCodeAt(p)===40){for(u=!1,p++;p<c&&(n=e.src.charCodeAt(p),!(!Xi(n)&&n!==10));p++);if(p>=c)return!1;if(l=p,i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),i.ok){for(o=e.md.normalizeLink(i.str),e.md.validateLink(o)?p=i.pos:o="",l=p;p<c&&(n=e.src.charCodeAt(p),!(!Xi(n)&&n!==10));p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<c&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<c&&(n=e.src.charCodeAt(p),!(!Xi(n)&&n!==10));p++);}(p>=c||e.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof e.env.references>"u")return!1;if(p<c&&e.src.charCodeAt(p)===91?(l=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?r=e.src.slice(l,p++):p=h+1):p=h+1,r||(r=e.src.slice(d,h)),s=e.env.references[NR(r)],!s)return e.pos=f,!1;o=s.href,a=s.title}if(!t){e.pos=d,e.posMax=h;const g=e.push("link_open","a",1),v=[["href",o]];g.attrs=v,a&&v.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=c,!0}function eNt(e,t){let n,r,i,s,o,a,l,u,f="";const c=e.pos,d=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(s=p+1,s<d&&e.src.charCodeAt(s)===40){for(s++;s<d&&(n=e.src.charCodeAt(s),!(!Xi(n)&&n!==10));s++);if(s>=d)return!1;for(u=s,a=e.md.helpers.parseLinkDestination(e.src,s,e.posMax),a.ok&&(f=e.md.normalizeLink(a.str),e.md.validateLink(f)?s=a.pos:f=""),u=s;s<d&&(n=e.src.charCodeAt(s),!(!Xi(n)&&n!==10));s++);if(a=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<d&&u!==s&&a.ok)for(l=a.str,s=a.pos;s<d&&(n=e.src.charCodeAt(s),!(!Xi(n)&&n!==10));s++);else l="";if(s>=d||e.src.charCodeAt(s)!==41)return e.pos=c,!1;s++}else{if(typeof e.env.references>"u")return!1;if(s<d&&e.src.charCodeAt(s)===91?(u=s+1,s=e.md.helpers.parseLinkLabel(e,s),s>=0?i=e.src.slice(u,s++):s=p+1):s=p+1,i||(i=e.src.slice(h,p)),o=e.env.references[NR(i)],!o)return e.pos=c,!1;f=o.href,l=o.title}if(!t){r=e.src.slice(h,p);const g=[];e.md.inline.parse(r,e.md,e.env,g);const v=e.push("image","img",0),y=[["src",f],["alt",""]];v.attrs=y,v.children=g,v.content=r,l&&y.push(["title",l])}return e.pos=s,e.posMax=d,!0}const tNt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,nNt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function rNt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const s=e.src.slice(r+1,n);if(nNt.test(s)){const o=e.md.normalizeLink(s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=s.length+2,!0}if(tNt.test(s)){const o=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=s.length+2,!0}return!1}function iNt(e){return/^<a[>\s]/i.test(e)}function sNt(e){return/^<\/a\s*>/i.test(e)}function oNt(e){const t=e|32;return t>=97&&t<=122}function aNt(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!oNt(i))return!1;const s=e.src.slice(r).match(I8t);if(!s)return!1;if(!t){const o=e.push("html_inline","",0);o.content=s[0],iNt(o.content)&&e.linkLevel++,sNt(o.content)&&e.linkLevel--}return e.pos+=s[0].length,!0}const lNt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,uNt=/^&([a-z][a-z0-9]{1,31});/i;function cNt(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const s=e.src.slice(n).match(lNt);if(s){if(!t){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=e.push("text_special","",0);a.content=az(o)?xT(o):xT(65533),a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}else{const s=e.src.slice(n).match(uNt);if(s){const o=D8e(s[0]);if(o!==s[0]){if(!t){const a=e.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}}return!1}function qAe(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const s=[];for(let o=0;o<n;o++){const a=e[o];if(s.push(0),(e[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;t.hasOwnProperty(a.marker)||(t[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[a.marker][(a.open?3:0)+a.length%3];let u=r-s[r]-1,f=u;for(;u>l;u-=s[u]+1){const c=e[u];if(c.marker===a.marker&&c.open&&c.end<0){let d=!1;if((c.close||a.open)&&(c.length+a.length)%3===0&&(c.length%3!==0||a.length%3!==0)&&(d=!0),!d){const h=u>0&&!e[u-1].open?s[u-1]+1:0;s[o]=o-u+h,s[u]=h,a.open=!1,c.end=o,c.close=!1,f=-1,i=-2;break}}}f!==-1&&(t[a.marker][(a.open?3:0)+(a.length||0)%3]=f)}}function fNt(e){const t=e.tokens_meta,n=e.tokens_meta.length;qAe(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&qAe(t[r].delimiters)}function dNt(e){let t,n,r=0;const i=e.tokens,s=e.tokens.length;for(t=n=0;t<s;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,i[t].type==="text"&&t+1<s&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const S4=[["text",q8t],["linkify",G8t],["newline",V8t],["escape",W8t],["backticks",Y8t],["strikethrough",I8e.tokenize],["emphasis",P8e.tokenize],["link",Q8t],["image",eNt],["autolink",rNt],["html_inline",aNt],["entity",cNt]],A4=[["balance_pairs",fNt],["strikethrough",I8e.postProcess],["emphasis",P8e.postProcess],["fragments_join",dNt]];function pS(){this.ruler=new Nl;for(let e=0;e<S4.length;e++)this.ruler.push(S4[e][0],S4[e][1]);this.ruler2=new Nl;for(let e=0;e<A4.length;e++)this.ruler2.push(A4[e][0],A4[e][1])}pS.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,s=e.cache;if(typeof s[t]<"u"){e.pos=s[t];return}let o=!1;if(e.level<i){for(let a=0;a<r;a++)if(e.level++,o=n[a](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,s[t]=e.pos};pS.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const s=e.pos;let o=!1;if(e.level<i){for(let a=0;a<n;a++)if(o=t[a](e,!1),o){if(s>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};pS.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};pS.prototype.State=hS;function hNt(e){const t={};e=e||{},t.src_Any=S8e.source,t.src_Cc=A8e.source,t.src_Z=k8e.source,t.src_P=sz.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function X$(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function zR(e){return Object.prototype.toString.call(e)}function pNt(e){return zR(e)==="[object String]"}function mNt(e){return zR(e)==="[object Object]"}function gNt(e){return zR(e)==="[object RegExp]"}function HAe(e){return zR(e)==="[object Function]"}function yNt(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const N8e={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function vNt(e){return Object.keys(e||{}).reduce(function(t,n){return t||N8e.hasOwnProperty(n)},!1)}const bNt={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},xNt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",wNt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function _Nt(e){e.__index__=-1,e.__text_cache__=""}function ENt(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function GAe(){return function(e,t){t.normalize(e)}}function wT(e){const t=e.re=hNt(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(xNt),n.push(t.src_xn),t.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(e.__schemas__).forEach(function(a){const l=e.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[a]=u,mNt(l)){gNt(l.validate)?u.validate=ENt(l.validate):HAe(l.validate)?u.validate=l.validate:s(a,l),HAe(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=GAe();return}if(pNt(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){e.__compiled__[e.__schemas__[a]]&&(e.__compiled__[a].validate=e.__compiled__[e.__schemas__[a]].validate,e.__compiled__[a].normalize=e.__compiled__[e.__schemas__[a]].normalize)}),e.__compiled__[""]={validate:null,normalize:GAe()};const o=Object.keys(e.__compiled__).filter(function(a){return a.length>0&&e.__compiled__[a]}).map(yNt).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),_Nt(e)}function SNt(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function Z$(e,t){const n=new SNt(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function du(e,t){if(!(this instanceof du))return new du(e,t);t||vNt(e)&&(t=e,e={}),this.__opts__=X$({},N8e,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=X$({},bNt,e),this.__compiled__={},this.__tlds__=wNt,this.__tlds_replaced__=!1,this.re={},wT(this)}du.prototype.add=function(t,n){return this.__schemas__[t]=n,wT(this),this};du.prototype.set=function(t){return this.__opts__=X$(this.__opts__,t),this};du.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,s,o,a,l,u,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(s=this.testSchemaAt(t,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};du.prototype.pretest=function(t){return this.re.pretest.test(t)};du.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};du.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Z$(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(Z$(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};du.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Z$(this,0)):null};du.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),wT(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,wT(this),this)};du.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};du.prototype.onCompile=function(){};const Pv=2147483647,Ef=36,cz=1,B2=26,ANt=38,CNt=700,B8e=72,z8e=128,j8e="-",kNt=/^xn--/,TNt=/[^\0-\x7F]/,DNt=/[\x2E\u3002\uFF0E\uFF61]/g,LNt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C4=Ef-cz,Sf=Math.floor,k4=String.fromCharCode;function cp(e){throw new RangeError(LNt[e])}function RNt(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function U8e(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(DNt,".");const i=e.split("."),s=RNt(i,t).join(".");return r+s}function q8e(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=e.charCodeAt(n++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}const FNt=e=>String.fromCodePoint(...e),ONt=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ef},VAe=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},H8e=function(e,t,n){let r=0;for(e=n?Sf(e/CNt):e>>1,e+=Sf(e/t);e>C4*B2>>1;r+=Ef)e=Sf(e/C4);return Sf(r+(C4+1)*e/(e+ANt))},G8e=function(e){const t=[],n=e.length;let r=0,i=z8e,s=B8e,o=e.lastIndexOf(j8e);o<0&&(o=0);for(let a=0;a<o;++a)e.charCodeAt(a)>=128&&cp("not-basic"),t.push(e.charCodeAt(a));for(let a=o>0?o+1:0;a<n;){const l=r;for(let f=1,c=Ef;;c+=Ef){a>=n&&cp("invalid-input");const d=ONt(e.charCodeAt(a++));d>=Ef&&cp("invalid-input"),d>Sf((Pv-r)/f)&&cp("overflow"),r+=d*f;const h=c<=s?cz:c>=s+B2?B2:c-s;if(d<h)break;const p=Ef-h;f>Sf(Pv/p)&&cp("overflow"),f*=p}const u=t.length+1;s=H8e(r-l,u,l==0),Sf(r/u)>Pv-i&&cp("overflow"),i+=Sf(r/u),r%=u,t.splice(r++,0,i)}return String.fromCodePoint(...t)},V8e=function(e){const t=[];e=q8e(e);const n=e.length;let r=z8e,i=0,s=B8e;for(const l of e)l<128&&t.push(k4(l));const o=t.length;let a=o;for(o&&t.push(j8e);a<n;){let l=Pv;for(const f of e)f>=r&&f<l&&(l=f);const u=a+1;l-r>Sf((Pv-i)/u)&&cp("overflow"),i+=(l-r)*u,r=l;for(const f of e)if(f<r&&++i>Pv&&cp("overflow"),f===r){let c=i;for(let d=Ef;;d+=Ef){const h=d<=s?cz:d>=s+B2?B2:d-s;if(c<h)break;const p=c-h,g=Ef-h;t.push(k4(VAe(h+p%g,0))),c=Sf(p/g)}t.push(k4(VAe(c,0))),s=H8e(i,u,a===o),i=0,++a}++i,++r}return t.join("")},MNt=function(e){return U8e(e,function(t){return kNt.test(t)?G8e(t.slice(4).toLowerCase()):t})},$Nt=function(e){return U8e(e,function(t){return TNt.test(t)?"xn--"+V8e(t):t})},W8e={version:"2.3.1",ucs2:{decode:q8e,encode:FNt},decode:G8e,encode:V8e,toASCII:$Nt,toUnicode:MNt},INt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},PNt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},NNt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},BNt={default:INt,zero:PNt,commonmark:NNt},zNt=/^(vbscript|javascript|file|data):/,jNt=/^data:image\/(gif|png|jpeg|webp);/;function UNt(e){const t=e.trim().toLowerCase();return zNt.test(t)?jNt.test(t):!0}const Y8e=["http:","https:","mailto:"];function qNt(e){const t=iz(e,!0);if(t.hostname&&(!t.protocol||Y8e.indexOf(t.protocol)>=0))try{t.hostname=W8e.toASCII(t.hostname)}catch{}return dS(rz(t))}function HNt(e){const t=iz(e,!0);if(t.hostname&&(!t.protocol||Y8e.indexOf(t.protocol)>=0))try{t.hostname=W8e.toUnicode(t.hostname)}catch{}return O1(rz(t),O1.defaultChars+"%")}function ju(e,t){if(!(this instanceof ju))return new ju(e,t);t||oz(e)||(t=e||{},e="default"),this.inline=new pS,this.block=new BR,this.core=new lz,this.renderer=new Eb,this.linkify=new du,this.validateLink=UNt,this.normalizeLink=qNt,this.normalizeLinkText=HNt,this.utils=VPt,this.helpers=PR({},ZPt),this.options={},this.configure(e),t&&this.set(t)}ju.prototype.set=function(e){return PR(this.options,e),this};ju.prototype.configure=function(e){const t=this;if(oz(e)){const n=e;if(e=BNt[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};ju.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};ju.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};ju.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};ju.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};ju.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};ju.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};ju.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};async function GNt(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");return await t.text()}catch(t){return console.error("There has been a problem with your fetch operation:",t),null}}const X8e=/^<!-- ?\{(?:([a-z0-9]+)(\^[0-9]*)?: ?)?(.*)} ?-->\n?$/,VNt={li:["list_item"],ul:["bullet_list"],p:["paragraph"],ol:["ordered_list"],blockquote:["blockquote"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],code:["code_inline","code_block","fence"]},Z8e={hr:!0,image:!0},WNt={"eox-map":{tour:[["prevent-scroll",!0]]},img:{hero:[["position","center"],["data-parallax",!0]]},video:{hero:[["position","center"],["loop",!0],["muted",!0],["autoplay",!0],["data-parallax",!0]]}},YNt=["img","video"],T4={1:["0.0.0"]},XNt=["tour"],ZNt=["iframe"];function K8e(){document.body.style.userSelect="none"}function KNt(){document.body.style.userSelect=""}function JNt(e,t,n){e.target===t&&(K8e(),n.dragging=!0,n.lastX=e.clientX,n.lastY=e.clientY)}function QNt(e,t,n){if(n.dragging){let r=e.clientX-n.lastX,i=e.clientY-n.lastY,{top:s,left:o}=t.getBoundingClientRect();t.style.top=`${s+i}px`,t.style.left=`${o+r}px`,n.lastX=e.clientX,n.lastY=e.clientY}if(n.dragging||n.resizing){let r=n.lastX-e.clientX,i=e.clientY-n.lastY,{width:s,height:o,left:a,top:l}=t.getBoundingClientRect();n.resizing&&(t.style.width=`${s+r}px`,t.style.height=`${o+i}px`,t.style.top=`${l}px`),t.style.left=`${a-r}px`,n.lastX=e.clientX,n.lastY=e.clientY}}function e9t(e){KNt(),e.dragging=!1,e.resizing=!1}function t9t(e,t){e.stopPropagation(),K8e(),t.resizing=!0,t.lastX=e.clientX,t.lastY=e.clientY}async function n9t(e,t,n){e.addEventListener("mousedown",r=>JNt(r,e,n)),window.addEventListener("mousemove",r=>QNt(r,e,n)),window.addEventListener("mouseup",()=>e9t(n)),t.addEventListener("mousedown",r=>t9t(r,n))}function r9t(e){const t=document.querySelector("eox-storytelling"),{y:n}=t.getBoundingClientRect(),r=e.querySelector(".editor-wrapper"),i=f=>Number(f.replace("px","")),s=window.getComputedStyle(r),o=i(s.bottom),a=i(s.padding)*2,l=r.classList.contains("partial-height")?80:0,u=window.innerHeight-n-o-a-l;r.style.height=`${u}px`}function i9t(e){const t=document.createElement("input");t.type="file",t.accept=".md",t.onchange=n=>{const r=n.target.files[0];if(!r)return;const i=new FileReader;i.onload=s=>{const o=s.target.result;e.value(o)},i.readAsText(r)},t.click()}function s9t(e){const t=e.value(),n=new Blob([t],{type:"text/markdown"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${document.title}.md`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function J8e(e){const t=[];return e.forEach((n,r)=>{(n.startsWith("## ")||n.startsWith("# ")&&t.length)&&t.push(r)}),t}function WAe(e,t,n,r,i,s){const o=e.split(`
`),a=s.shadowRoot||s,l=a.querySelector("eox-storytelling-editor"),f=J8e(o)[t];if(r)if(i){const d=a.querySelector("eox-jsonform#storytelling-editor-fields").editor.getValue();Object.keys(d).forEach(h=>{const p=d[h];n=n.replaceAll(`{${h}}`,p)}),s.selectedCustomElement=null}else{s.selectedCustomElement={markdown:n,fields:r},s.requestUpdate();return}f>=0?o.splice(f,0,n):o.push(n),l.editor.editor.editors["root.Story"].setValue(o.join(`
`)),setTimeout(()=>{const c=a.querySelector(`div[data-section="${t+1}"]`);c&&window.scrollTo(0,c.offsetTop)},200),s.addCustomSectionIndex=-1,s.requestUpdate()}function o9t(e,t,n){let r=null;n==null||n.codemirror.on("change",function(){const i=e.querySelector(".editor-saver");i.innerText="Auto Saving...",r&&clearTimeout(r),r=setTimeout(()=>{i.innerText="Saved";const s=JSON.parse(localStorage.getItem("markdown")||"{}");localStorage.setItem("markdown",JSON.stringify({...s,[t||"default"]:n.value()})),r=null},2500)})}function a9t(e){var t;(t=(e.shadowRoot||e).querySelector(".CodeMirror-scroll"))==null||t.addEventListener("wheel",function(n){const r=n.deltaY,i=this.scrollHeight,s=this.clientHeight;(this.scrollTop===0&&r<0||this.scrollTop+s>=i&&r>0)&&n.preventDefault()},{passive:!1})}function l9t(e){if(e.showEditor!==void 0){let t=JSON.parse(localStorage.getItem("markdown")||"{}");const n=e.id||"default",r=t[n];r&&r!==e.markdown&&(confirm("Recover your Story from the last time you edited?")?e.markdown=r:(delete t[n],localStorage.setItem("markdown",JSON.stringify(t))))}}function Q8e(e){var t,n;if((n=(t=e.editor.editor)==null?void 0:t.editors)!=null&&n["root.Story"]){const r=e.editor.editor.editors["root.Story"].simplemde_instance;if(!e.disableAutosave)o9t(e,e.storyId,r);else{const i=e.querySelector(".editor-saver");i.innerText=""}a9t(e)}else setTimeout(()=>Q8e(e),100)}function eNe(e){var n;e.renderRoot.querySelector(".editor-wrapper").classList.add("editor-opacity-none"),e.editor&&e.editor.editor&&e.editor.editor.ready&&((n=e.editor.editor)!=null&&n.editors["root.Story"].simplemde_instance)?e.querySelector(".switch-input").click():setTimeout(()=>eNe(e),100)}const D4=(e,t,n,r,i)=>({name:e,action:i||function({codemirror:o}){const a=o.getCursor("start"),l=o.getCursor("end");o.replaceRange(t,a,l)},className:n,title:r}),u9t={properties:{Story:{type:"string",format:"markdown",options:{simplemde:{toolbar:["bold","italic","strikethrough","heading","|","unordered-list","ordered-list","link","|",D4("import",null,"fa fa-upload","Import Markdown File",i9t),D4("export",null,"fa fa-download","Export Markdown File",s9t),"|",D4("add-custom-section",null,"fa fa-plus","Add custom section",()=>{const e=document.querySelector("eox-storytelling"),t=e.markdown.split(`
`),n=J8e(t);e&&(e.addCustomSectionIndex=n.length,e.requestUpdate())})],spellChecker:!1}}}}},c9t=`## What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
`,f9t=`## Table <!--{ as="div" }-->
| Number | Random Name | Lorem Ipsum                                       |
|--------|-------------|---------------------------------------------------|
| 1      | Alice       | Lorem ipsum dolor sit amet, consectetur adipiscing |
| 2      | Bob         | elit. Sed do eiusmod tempor incididunt ut labore  |
| 3      | Charlie     | et dolore magna aliqua. Ut enim ad minim veniam,  |
| 4      | Dana        | quis nostrud exercitation ullamco laboris nisi ut |
| 5      | Eve         | aliquip ex ea commodo consequat. Duis aute irure  |
`,d9t=`## List <!--{ as="div" }-->
1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. **Sed do eiusmod tempor** incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
2. _Duis aute irure_ dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
3. **Lorem ipsum dolor sit amet,** consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. _Ut enim ad minim veniam, quis nostrud exercitation ullamco_ laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
4. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
5. _Ut enim ad minim veniam, quis nostrud_ exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. **Duis aute irure dolor** in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
6. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,h9t=`## {title} <!--{as="eox-map" style="width: 100%; height: 500px;" layers='{layers}' zoom="{zoom}" center=[{longitude},{latitude}] }-->
`,p9t={title:"Simple Map",type:"object",required:["title","layers"],properties:{title:{type:"string",default:"Map Example",format:"text"},layers:{type:"string",default:'[ { "type": "Tile", "properties": { "id": "TOPO-WMS" }, "source": { "type": "TileWMS", "url": "https://ows.mundialis.de/services/service", "params": { "LAYERS": "TOPO-WMS" } } } ]',format:"textarea"},zoom:{type:"integer",default:2,minimum:1,maximum:28,format:"number"},longitude:{type:"integer",default:15,format:"number"},latitude:{type:"integer",default:48,format:"number"}}},m9t=`## {title} <!--{ as="eox-map" mode="tour" }-->

### <!--{ layers='{layers}' center=[{longitude},{latitude}] zoom="{zoom}" animationOptions="{duration:500}" }-->
#### {tourTitle}
{description}
`,g9t={title:"Tour",type:"object",required:["title"],properties:{title:{type:"string",default:"Map Tour Example",format:"text"},layers:{title:"Layers (Tour 1)",type:"string",default:'[{"type":"Tile","properties":{"id":"osm"},"source":{"type":"OSM"}}]',format:"textarea"},zoom:{title:"Zoom (Tour 1)",type:"integer",default:5,minimum:1,maximum:28,format:"number"},longitude:{title:"Longitude (Tour 1)",type:"integer",default:15,format:"number"},latitude:{title:"Longitude (Tour 1)",type:"integer",default:48,format:"number"},tourTitle:{title:"Title (Tour 1)",type:"string",default:"Tour Title",format:"text"},description:{title:"Description (Tour 1)",type:"string",default:"Some description for tour 1",format:"text"}}},y9t=`## {title} <!--{as="img" src="{src}" style="width: 100%; height: 600px;"}-->
`,v9t={title:"Simple Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Simple Image Example",format:"text"},src:{type:"string",default:"https://images.unsplash.com/photo-1461880234904-751a2f54f1c7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",format:"text"}}},b9t=`# {title} <!--{ as="img" mode="hero" src="{src}" }-->
### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,x9t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Image Example",format:"text"},src:{type:"string",default:"https://www.gstatic.com/prettyearth/assets/full/14617.jpg",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},w9t=`# {title} <!--{ as="video" mode="hero" src="{src}" }-->
#### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,_9t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Video Example",format:"text"},src:{type:"string",default:"https://dlmultimedia.esa.int/download/public/videos/2023/06/010/2306_010_AR_EN.mp4",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},E9t=[{name:"Basic",elements:[{name:"Textual",id:"ele-textual",markdown:c9t,icon:"data:image/svg+xml,%3Csvg fill='none' viewBox='0 0 138 112' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23f7f7f7' rx='4' height='112' width='138'/%3E%3Crect x='27' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='70' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='82' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3C/svg%3E"},{name:"Table",id:"ele-table",markdown:f9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 137 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='137' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='26' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='73' width='84' height='14' rx='7' fill='%23D9D9D9'/%3E%3C/svg%3E%0A"},{name:"List",id:"ele-list",markdown:d9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='38' y='22' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='34' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='46' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='58' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='70' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='82' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Ccircle cx='30.5' cy='25.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='37.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='49.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='61.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='73.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='85.5' r='3.5' fill='%23BFBFBF'/%3E%3C/svg%3E%0A"}]},{name:"Map",elements:[{name:"Simple Map",id:"ele-simple-map",markdown:h9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M54.08 42.873L56.58 52.373C57.83 57.123 65.08 59.373 69.58 59.373C73.18 59.373 74.7467 63.0397 75.08 64.873C74.08 68.0397 73.48 74.373 79.08 74.373C84.68 74.373 85.08 70.7064 84.58 68.873L80.58 59.373C78.2467 56.5397 73.58 49.473 73.58 43.873C73.58 38.2729 69.9134 37.873 68.08 38.373C64.08 42.373 60.4134 40.0397 59.08 38.373C54.28 36.773 53.7467 40.7063 54.08 42.873Z' fill='%235E5E5E'/%3E%3Cpath d='M59.0891 62.4676C58.5923 65.8092 60.2794 68.2359 61.5214 68.4348C66.4893 71.7763 70.4738 69.4293 71.5088 68.4348C72.9992 66.5253 71.7634 63.0643 70.5214 62.4676C68.5343 62.945 64.5564 63.661 63.5214 62.4676C62.031 60.5581 60.0214 60.4641 59.0891 62.4676Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:p9t},{name:"Tour",id:"ele-map-tour",markdown:m9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M65.08 35.873L67.58 45.373C68.83 50.123 76.08 52.373 80.58 52.373C84.18 52.373 85.7467 56.0397 86.08 57.873C85.08 61.0397 84.48 67.373 90.08 67.373C95.68 67.373 96.08 63.7064 95.58 61.873L91.58 52.373C89.2467 49.5397 84.58 42.473 84.58 36.873C84.58 31.2729 80.9134 30.873 79.08 31.373C75.08 35.373 71.4134 33.0397 70.08 31.373C65.28 29.773 64.7467 33.7063 65.08 35.873Z' fill='%235E5E5E'/%3E%3Cpath d='M70.0891 55.4676C69.5923 58.8092 71.2794 61.2359 72.5214 61.4348C77.4893 64.7763 81.4738 62.4293 82.5088 61.4348C83.9992 59.5253 82.7634 56.0643 81.5214 55.4676C79.5343 55.945 75.5564 56.661 74.5214 55.4676C73.031 53.5581 71.0214 53.4641 70.0891 55.4676Z' fill='%235E5E5E'/%3E%3Crect x='34' y='67' width='26' height='16' rx='2' fill='%23f7f7f7'/%3E%3C/svg%3E%0A",fields:g9t}]},{name:"Media",elements:[{name:"Simple",id:"ele-simple-media",markdown:y9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M69.5 39L73.2045 50.4012H85.1924L75.494 57.4476L79.1985 68.8488L69.5 61.8024L59.8015 68.8488L63.506 57.4476L53.8076 50.4012H65.7955L69.5 39Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:v9t},{name:"Hero Image",id:"ele-hero-image",markdown:b9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3C/svg%3E%0A",fields:x9t},{name:"Hero Video",id:"ele-hero-video",markdown:w9t,icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 138 112' fill='none'%3E%3Crect width='138' height='112' rx='4' fill='%23F2F2F2'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23D8D8D8'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3Cline x1='20.6233' y1='87.6712' x2='75.6233' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3Cline x1='64.6233' y1='87.6712' x2='119.623' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3C/svg%3E",fields:_9t}]}];var t3={exports:{}},S9t=t3.exports,YAe;function A9t(){return YAe||(YAe=1,function(e,t){(function(n,r){e.exports=r()})(S9t,function(){function n(F){var H=function(J,re){if(typeof J!="object"||!J)return J;var ye=J[Symbol.toPrimitive];if(ye!==void 0){var xe=ye.call(J,re);if(typeof xe!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}(F,"string");return typeof H=="symbol"?H:H+""}function r(F){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(F)}function i(F,H){if(!(F instanceof H))throw new TypeError("Cannot call a class as a function")}function s(F,H){for(var J=0;J<H.length;J++){var re=H[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(F,n(re.key),re)}}function o(F,H,J){return H&&s(F.prototype,H),Object.defineProperty(F,"prototype",{writable:!1}),F}var a=Date.now();function l(){var F={},H=!0,J=0,re=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(H=arguments[0],J++);for(var ye=function(Re){for(var P in Re)Object.prototype.hasOwnProperty.call(Re,P)&&(H&&Object.prototype.toString.call(Re[P])==="[object Object]"?F[P]=l(!0,F[P],Re[P]):F[P]=Re[P])};J<re;J++){var xe=arguments[J];ye(xe)}return F}function u(F,H){if((K(F)||F===window||F===document)&&(F=[F]),$(F)||I(F)||(F=[F]),Y(F)!=0){if($(F)&&!I(F))for(var J=F.length,re=0;re<J&&H.call(F[re],F[re],re,F)!==!1;re++);else if(I(F)){for(var ye in F)if(q(F,ye)&&H.call(F[ye],F[ye],ye,F)===!1)break}}}function f(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F[a]=F[a]||[],ye={all:re,evt:null,found:null};return H&&J&&Y(re)>0&&u(re,function(xe,Re){if(xe.eventName==H&&xe.fn.toString()==J.toString())return ye.found=!0,ye.evt=Re,!1}),ye}function c(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=H.onElement,re=H.withCallback,ye=H.avoidDuplicate,xe=ye===void 0||ye,Re=H.once,P=Re!==void 0&&Re,Q=H.useCapture,se=Q!==void 0&&Q,ae=arguments.length>2?arguments[2]:void 0,ke=J||[];function Ce(Ee){O(re)&&re.call(ae,Ee,this),P&&Ce.destroy()}return B(ke)&&(ke=document.querySelectorAll(ke)),Ce.destroy=function(){u(ke,function(Ee){var De=f(Ee,F,Ce);De.found&&De.all.splice(De.evt,1),Ee.removeEventListener&&Ee.removeEventListener(F,Ce,se)})},u(ke,function(Ee){var De=f(Ee,F,Ce);(Ee.addEventListener&&xe&&!De.found||!xe)&&(Ee.addEventListener(F,Ce,se),De.all.push({eventName:F,fn:Ce}))}),Ce}function d(F,H){u(H.split(" "),function(J){return F.classList.add(J)})}function h(F,H){u(H.split(" "),function(J){return F.classList.remove(J)})}function p(F,H){return F.classList.contains(H)}function g(F,H){for(;F!==document.body;){if(!(F=F.parentElement))return!1;if(typeof F.matches=="function"?F.matches(H):F.msMatchesSelector(H))return F}}function v(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||H==="")return!1;if(H==="none")return O(J)&&J(),!1;var re=T(),ye=H.split(" ");u(ye,function(xe){d(F,"g"+xe)}),c(re,{onElement:F,avoidDuplicate:!1,once:!0,withCallback:function(xe,Re){u(ye,function(P){h(Re,"g"+P)}),O(J)&&J()}})}function y(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(H==="")return F.style.webkitTransform="",F.style.MozTransform="",F.style.msTransform="",F.style.OTransform="",F.style.transform="",!1;F.style.webkitTransform=H,F.style.MozTransform=H,F.style.msTransform=H,F.style.OTransform=H,F.style.transform=H}function b(F){F.style.display="block"}function w(F){F.style.display="none"}function E(F){var H=document.createDocumentFragment(),J=document.createElement("div");for(J.innerHTML=F;J.firstChild;)H.appendChild(J.firstChild);return H}function A(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function T(){var F,H=document.createElement("fakeelement"),J={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(F in J)if(H.style[F]!==void 0)return J[F]}function D(F,H,J,re){if(F())H();else{var ye;J||(J=100);var xe=setInterval(function(){F()&&(clearInterval(xe),ye&&clearTimeout(ye),H())},J)}}function k(F,H,J){if(U(F))console.error("Inject assets error");else if(O(H)&&(J=H,H=!1),B(H)&&H in window)O(J)&&J();else{var re;if(F.indexOf(".css")!==-1){if((re=document.querySelectorAll('link[href="'+F+'"]'))&&re.length>0)return void(O(J)&&J());var ye=document.getElementsByTagName("head")[0],xe=ye.querySelectorAll('link[rel="stylesheet"]'),Re=document.createElement("link");return Re.rel="stylesheet",Re.type="text/css",Re.href=F,Re.media="all",xe?ye.insertBefore(Re,xe[0]):ye.appendChild(Re),void(O(J)&&J())}if((re=document.querySelectorAll('script[src="'+F+'"]'))&&re.length>0){if(O(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}}else{var P=document.createElement("script");P.type="text/javascript",P.src=F,P.onload=function(){if(O(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}},document.body.appendChild(P)}}}function R(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function O(F){return typeof F=="function"}function B(F){return typeof F=="string"}function K(F){return!(!F||!F.nodeType||F.nodeType!=1)}function L(F){return Array.isArray(F)}function $(F){return F&&F.length&&isFinite(F.length)}function I(F){return r(F)==="object"&&F!=null&&!O(F)&&!L(F)}function U(F){return F==null}function q(F,H){return F!==null&&hasOwnProperty.call(F,H)}function Y(F){if(I(F)){if(F.keys)return F.keys().length;var H=0;for(var J in F)q(F,J)&&H++;return H}return F.length}function X(F){return!isNaN(parseFloat(F))&&isFinite(F)}function te(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,H=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!H.length)return!1;if(H.length==1)return H[0];typeof F=="string"&&(F=parseInt(F));var J=[];u(H,function(P){J.push(P.getAttribute("data-taborder"))});var re=Math.max.apply(Math,J.map(function(P){return parseInt(P)})),ye=F<0?1:F+1;ye>re&&(ye="1");var xe=J.filter(function(P){return P>=parseInt(ye)}),Re=xe.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(Re,'"]'))}function le(F){if(F.events.hasOwnProperty("keyboard"))return!1;F.events.keyboard=c("keydown",{onElement:window,withCallback:function(H,J){var re=(H=H||window.event).keyCode;if(re==9){var ye=document.querySelector(".gbtn.focused");if(!ye){var xe=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(xe=="input"||xe=="textarea"||xe=="button")return}H.preventDefault();var Re=document.querySelectorAll(".gbtn[data-taborder]");if(!Re||Re.length<=0)return;if(!ye){var P=te();return void(P&&(P.focus(),d(P,"focused")))}var Q=te(ye.getAttribute("data-taborder"));h(ye,"focused"),Q&&(Q.focus(),d(Q,"focused"))}re==39&&F.nextSlide(),re==37&&F.prevSlide(),re==27&&F.close()}})}var ee=o(function F(H,J){var re=this,ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(i(this,F),this.img=H,this.slide=J,this.onclose=ye,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(xe){return re.dragStart(xe)},!1),this.img.addEventListener("mouseup",function(xe){return re.dragEnd(xe)},!1),this.img.addEventListener("mousemove",function(xe){return re.drag(xe)},!1),this.img.addEventListener("click",function(xe){return re.slide.classList.contains("dragging-nav")?(re.zoomOut(),!1):re.zoomedIn?void(re.zoomedIn&&!re.dragging&&re.zoomOut()):re.zoomIn()},!1),this.img.setZoomEvents=!0},[{key:"zoomIn",value:function(){var F=this.widowWidth();if(!(this.zoomedIn||F<=768)){var H=this.img;if(H.setAttribute("data-style",H.getAttribute("style")),H.style.maxWidth=H.naturalWidth+"px",H.style.maxHeight=H.naturalHeight+"px",H.naturalWidth>F){var J=F/2-H.naturalWidth/2;this.setTranslate(this.img.parentNode,J,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(F){F.preventDefault(),this.zoomedIn?(F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset),F.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(F){var H=this;F.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){H.dragging=!1,H.img.isDragging=!1,H.img.classList.remove("dragging")},100)}},{key:"drag",value:function(F){this.active&&(F.preventDefault(),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(F){if(this.zoomedIn){var H=F.clientX-this.img.naturalWidth/2,J=F.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,H,J)}}},{key:"setTranslate",value:function(F,H,J){F.style.transform="translate3d("+H+"px, "+J+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),z=o(function F(){var H=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F);var re=J.dragEl,ye=J.toleranceX,xe=ye===void 0?40:ye,Re=J.toleranceY,P=Re===void 0?65:Re,Q=J.slide,se=Q===void 0?null:Q,ae=J.instance,ke=ae===void 0?null:ae;this.el=re,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=xe,this.toleranceY=P,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=se,this.instance=ke,this.el.addEventListener("mousedown",function(Ce){return H.dragStart(Ce)},!1),this.el.addEventListener("mouseup",function(Ce){return H.dragEnd(Ce)},!1),this.el.addEventListener("mousemove",function(Ce){return H.drag(Ce)},!1)},[{key:"dragStart",value:function(F){if(this.slide.classList.contains("zoomed"))this.active=!1;else{F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset);var H=F.target.nodeName.toLowerCase();F.target.classList.contains("nodrag")||g(F.target,".nodrag")||["input","select","textarea","button","a"].indexOf(H)!==-1?this.active=!1:(F.preventDefault(),(F.target===this.el||H!=="img"&&g(F.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=g(F.target,".ginner-container")))}}},{key:"dragEnd",value:function(F){var H=this;F&&F.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){H.instance.preventOutsideClick=!1,H.toleranceReached=!1,H.lastDirection=null,H.dragging=!1,H.el.isDragging=!1,H.el.classList.remove("dragging"),H.slide.classList.remove("dragging-nav"),H.dragContainer.style.transform="",H.dragContainer.style.transition=""},100)}},{key:"drag",value:function(F){if(this.active){F.preventDefault(),this.slide.classList.add("dragging-nav"),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var H=Math.abs(this.currentX),J=Math.abs(this.currentY);if(H>0&&H>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var re=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&re&&(this.doSlideChange=re),this.instance.settings.dragAutoSnap&&re)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),re=="right"&&this.instance.prevSlide(),void(re=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&J>0&&J>=H&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var ye=this.shouldClose();return!this.instance.settings.dragAutoSnap&&ye&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&ye&&this.instance.close())}}}},{key:"shouldChange",value:function(){var F=!1;if(Math.abs(this.currentX)>=this.toleranceX){var H=this.currentX>0?"right":"left";(H=="left"&&this.slide!==this.slide.parentNode.lastChild||H=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(F=H)}return F}},{key:"shouldClose",value:function(){var F=!1;return Math.abs(this.currentY)>=this.toleranceY&&(F=!0),F}},{key:"setTranslate",value:function(F,H,J){var re=arguments.length>3&&arguments[3]!==void 0&&arguments[3];F.style.transition=re?"all .2s ease":"",F.style.transform="translate3d(".concat(H,"px, ").concat(J,"px, 0)")}}]);function he(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=new Image,Re="gSlideTitle_"+J,P="gSlideDesc_"+J;xe.addEventListener("load",function(){O(re)&&re()},!1),xe.src=H.href,H.sizes!=""&&H.srcset!=""&&(xe.sizes=H.sizes,xe.srcset=H.srcset),xe.alt="",U(H.alt)||H.alt===""||(xe.alt=H.alt),H.title!==""&&xe.setAttribute("aria-labelledby",Re),H.description!==""&&xe.setAttribute("aria-describedby",P),H.hasOwnProperty("_hasCustomWidth")&&H._hasCustomWidth&&(xe.style.width=H.width),H.hasOwnProperty("_hasCustomHeight")&&H._hasCustomHeight&&(xe.style.height=H.height),ye.insertBefore(xe,ye.firstChild)}function de(F,H,J,re){var ye=this,xe=F.querySelector(".ginner-container"),Re="gvideo"+J,P=F.querySelector(".gslide-media"),Q=this.getAllPlayers();d(xe,"gvideo-container"),P.insertBefore(E('<div class="gvideo-wrapper"></div>'),P.firstChild);var se=F.querySelector(".gvideo-wrapper");k(this.settings.plyr.css,"Plyr");var ae=H.href,ke=H==null?void 0:H.videoProvider,Ce=!1;P.style.maxWidth=H.width,k(this.settings.plyr.js,"Plyr",function(){if(!ke&&ae.match(/vimeo\.com\/([0-9]*)/)&&(ke="vimeo"),!ke&&(ae.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||ae.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(ke="youtube"),ke==="local"||!ke){ke="local";var Ee='<video id="'+Re+'" ';Ee+='style="background:#000; max-width: '.concat(H.width,';" '),Ee+='preload="metadata" ',Ee+='x-webkit-airplay="allow" ',Ee+="playsinline ",Ee+="controls ",Ee+='class="gvideo-local">',Ee+='<source src="'.concat(ae,'">'),Ce=E(Ee+="</video>")}var De=Ce||E('<div id="'.concat(Re,'" data-plyr-provider="').concat(ke,'" data-plyr-embed-id="').concat(ae,'"></div>'));d(se,"".concat(ke,"-video gvideo")),se.appendChild(De),se.setAttribute("data-id",Re),se.setAttribute("data-index",J);var Oe=q(ye.settings.plyr,"config")?ye.settings.plyr.config:{},We=new Plyr("#"+Re,Oe);We.on("ready",function(tt){Q[Re]=tt.detail.plyr,O(re)&&re()}),D(function(){return F.querySelector("iframe")&&F.querySelector("iframe").dataset.ready=="true"},function(){ye.resize(F)}),We.on("enterfullscreen",ze),We.on("exitfullscreen",ze)})}function ze(F){var H=g(F.target,".gslide-media");F.type==="enterfullscreen"&&d(H,"fullscreen"),F.type==="exitfullscreen"&&h(H,"fullscreen")}function He(F,H,J,re){var ye,xe=this,Re=F.querySelector(".gslide-media"),P=!(!q(H,"href")||!H.href)&&H.href.split("#").pop().trim(),Q=!(!q(H,"content")||!H.content)&&H.content;if(Q&&(B(Q)&&(ye=E('<div class="ginlined-content">'.concat(Q,"</div>"))),K(Q))){Q.style.display=="none"&&(Q.style.display="block");var se=document.createElement("div");se.className="ginlined-content",se.appendChild(Q),ye=se}if(P){var ae=document.getElementById(P);if(!ae)return!1;var ke=ae.cloneNode(!0);ke.style.height=H.height,ke.style.maxWidth=H.width,d(ke,"ginlined-content"),ye=ke}if(!ye)return console.error("Unable to append inline slide content",H),!1;Re.style.height=H.height,Re.style.width=H.width,Re.appendChild(ye),this.events["inlineclose"+P]=c("click",{onElement:Re.querySelectorAll(".gtrigger-close"),withCallback:function(Ce){Ce.preventDefault(),xe.close()}}),O(re)&&re()}function je(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=function(Re){var P=Re.url,Q=Re.allow,se=Re.callback,ae=Re.appendTo,ke=document.createElement("iframe");return ke.className="vimeo-video gvideo",ke.src=P,ke.style.width="100%",ke.style.height="100%",Q&&ke.setAttribute("allow",Q),ke.onload=function(){ke.onload=null,d(ke,"node-ready"),O(se)&&se()},ae&&ae.appendChild(ke),ke}({url:H.href,callback:re});ye.parentNode.style.maxWidth=H.width,ye.parentNode.style.height=H.height,ye.appendChild(xe)}var we=o(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},I(H)&&(this.defaults=l(this.defaults,H))},[{key:"sourceType",value:function(F){var H=F;return(F=F.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":F.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||F.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||F.match(/vimeo\.com\/([0-9]*)/)||F.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":F.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":F.indexOf("#")>-1&&H.split("#").pop().trim()!==""?"inline":F.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(F,H){var J=this,re=l({descPosition:H.descPosition},this.defaults);if(I(F)&&!K(F)){q(F,"type")||(q(F,"content")&&F.content?F.type="inline":q(F,"href")&&(F.type=this.sourceType(F.href)));var ye=l(re,F);return this.setSize(ye,H),ye}var xe="",Re=F.getAttribute("data-glightbox"),P=F.nodeName.toLowerCase();if(P==="a"&&(xe=F.href),P==="img"&&(xe=F.src,re.alt=F.alt),re.href=xe,u(re,function(Ee,De){q(H,De)&&De!=="width"&&(re[De]=H[De]);var Oe=F.dataset[De];U(Oe)||(re[De]=J.sanitizeValue(Oe))}),re.content&&(re.type="inline"),!re.type&&xe&&(re.type=this.sourceType(xe)),U(Re)){if(!re.title&&P=="a"){var Q=F.title;U(Q)||Q===""||(re.title=Q)}if(!re.title&&P=="img"){var se=F.alt;U(se)||se===""||(re.title=se)}}else{var ae=[];u(re,function(Ee,De){ae.push(";\\s?"+De)}),ae=ae.join("\\s?:|"),Re.trim()!==""&&u(re,function(Ee,De){var Oe=Re,We=new RegExp("s?"+De+"s?:s?(.*?)("+ae+"s?:|$)"),tt=Oe.match(We);if(tt&&tt.length&&tt[1]){var dt=tt[1].trim().replace(/;\s*$/,"");re[De]=J.sanitizeValue(dt)}})}if(re.description&&re.description.substring(0,1)==="."){var ke;try{ke=document.querySelector(re.description).innerHTML}catch(Ee){if(!(Ee instanceof DOMException))throw Ee}ke&&(re.description=ke)}if(!re.description){var Ce=F.querySelector(".glightbox-desc");Ce&&(re.description=Ce.innerHTML)}return this.setSize(re,H,F),this.slideConfig=re,re}},{key:"setSize",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F.type=="video"?this.checkSize(H.videosWidth):this.checkSize(H.width),ye=this.checkSize(H.height);return F.width=q(F,"width")&&F.width!==""?this.checkSize(F.width):re,F.height=q(F,"height")&&F.height!==""?this.checkSize(F.height):ye,J&&F.type=="image"&&(F._hasCustomWidth=!!J.dataset.width,F._hasCustomHeight=!!J.dataset.height),F}},{key:"checkSize",value:function(F){return X(F)?"".concat(F,"px"):F}},{key:"sanitizeValue",value:function(F){return F!=="true"&&F!=="false"?F:F==="true"}}]),Ie=o(function F(H,J,re){i(this,F),this.element=H,this.instance=J,this.index=re},[{key:"setContent",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(p(H,"loaded"))return!1;var re=this.instance.settings,ye=this.slideConfig,xe=R();O(re.beforeSlideLoad)&&re.beforeSlideLoad({index:this.index,slide:H,player:!1});var Re=ye.type,P=ye.descPosition,Q=H.querySelector(".gslide-media"),se=H.querySelector(".gslide-title"),ae=H.querySelector(".gslide-desc"),ke=H.querySelector(".gdesc-inner"),Ce=J,Ee="gSlideTitle_"+this.index,De="gSlideDesc_"+this.index;if(O(re.afterSlideLoad)&&(Ce=function(){O(J)&&J(),re.afterSlideLoad({index:F.index,slide:H,player:F.instance.getSlidePlayerInstance(F.index)})}),ye.title==""&&ye.description==""?ke&&ke.parentNode.parentNode.removeChild(ke.parentNode):(se&&ye.title!==""?(se.id=Ee,se.innerHTML=ye.title):se.parentNode.removeChild(se),ae&&ye.description!==""?(ae.id=De,xe&&re.moreLength>0?(ye.smallDescription=this.slideShortDesc(ye.description,re.moreLength,re.moreText),ae.innerHTML=ye.smallDescription,this.descriptionEvents(ae,ye)):ae.innerHTML=ye.description):ae.parentNode.removeChild(ae),d(Q.parentNode,"desc-".concat(P)),d(ke.parentNode,"description-".concat(P))),d(Q,"gslide-".concat(Re)),d(H,"loaded"),Re!=="video"){if(Re!=="external")return Re==="inline"?(He.apply(this.instance,[H,ye,this.index,Ce]),void(ye.draggable&&new z({dragEl:H.querySelector(".gslide-inline"),toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:this.instance}))):void(Re!=="image"?O(Ce)&&Ce():he(H,ye,this.index,function(){var Oe=H.querySelector("img");ye.draggable&&new z({dragEl:Oe,toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:F.instance}),ye.zoomable&&Oe.naturalWidth>Oe.offsetWidth&&(d(Oe,"zoomable"),new ee(Oe,H,function(){F.instance.resize()})),O(Ce)&&Ce()}));je.apply(this,[H,ye,this.index,Ce])}else de.apply(this.instance,[H,ye,this.index,Ce])}},{key:"slideShortDesc",value:function(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,J=arguments.length>2&&arguments[2]!==void 0&&arguments[2],re=document.createElement("div");re.innerHTML=F;var ye=re.innerText,xe=J;if((F=ye.trim()).length<=H)return F;var Re=F.substr(0,H-1);return xe?(re=null,Re+'... <a href="#" class="desc-more">'+J+"</a>"):Re}},{key:"descriptionEvents",value:function(F,H){var J=this,re=F.querySelector(".desc-more");if(!re)return!1;c("click",{onElement:re,withCallback:function(ye,xe){ye.preventDefault();var Re=document.body,P=g(xe,".gslide-desc");if(!P)return!1;P.innerHTML=H.description,d(Re,"gdesc-open");var Q=c("click",{onElement:[Re,g(P,".gslide-description")],withCallback:function(se,ae){se.target.nodeName.toLowerCase()!=="a"&&(h(Re,"gdesc-open"),d(Re,"gdesc-closed"),P.innerHTML=H.smallDescription,J.descriptionEvents(P,H),setTimeout(function(){h(Re,"gdesc-closed")},400),Q.destroy())}})}})}},{key:"create",value:function(){return E(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){K(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var F=new we(this.instance.settings.slideExtraAttributes);return this.slideConfig=F.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function qe(F){return Math.sqrt(F.x*F.x+F.y*F.y)}function Pe(F,H){var J=function(re,ye){var xe=qe(re)*qe(ye);if(xe===0)return 0;var Re=function(P,Q){return P.x*Q.x+P.y*Q.y}(re,ye)/xe;return Re>1&&(Re=1),Math.acos(Re)}(F,H);return function(re,ye){return re.x*ye.y-ye.x*re.y}(F,H)>0&&(J*=-1),180*J/Math.PI}var At=o(function F(H){i(this,F),this.handlers=[],this.el=H},[{key:"add",value:function(F){this.handlers.push(F)}},{key:"del",value:function(F){F||(this.handlers=[]);for(var H=this.handlers.length;H>=0;H--)this.handlers[H]===F&&this.handlers.splice(H,1)}},{key:"dispatch",value:function(){for(var F=0,H=this.handlers.length;F<H;F++){var J=this.handlers[F];typeof J=="function"&&J.apply(this.el,arguments)}}}]);function ht(F,H){var J=new At(F);return J.add(H),J}var nn=o(function F(H,J){i(this,F),this.element=typeof H=="string"?document.querySelector(H):H,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var re=function(){};this.rotate=ht(this.element,J.rotate||re),this.touchStart=ht(this.element,J.touchStart||re),this.multipointStart=ht(this.element,J.multipointStart||re),this.multipointEnd=ht(this.element,J.multipointEnd||re),this.pinch=ht(this.element,J.pinch||re),this.swipe=ht(this.element,J.swipe||re),this.tap=ht(this.element,J.tap||re),this.doubleTap=ht(this.element,J.doubleTap||re),this.longTap=ht(this.element,J.longTap||re),this.singleTap=ht(this.element,J.singleTap||re),this.pressMove=ht(this.element,J.pressMove||re),this.twoFingerPressMove=ht(this.element,J.twoFingerPressMove||re),this.touchMove=ht(this.element,J.touchMove||re),this.touchEnd=ht(this.element,J.touchEnd||re),this.touchCancel=ht(this.element,J.touchCancel||re),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}},[{key:"start",value:function(F){if(F.touches)if(F.target&&F.target.nodeName&&["a","button","input"].indexOf(F.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",F.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=F.touches[0].pageX,this.y1=F.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(F,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var H=this.preV;if(F.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var J={x:F.touches[1].pageX-this.x1,y:F.touches[1].pageY-this.y1};H.x=J.x,H.y=J.y,this.pinchStartLen=qe(H),this.multipointStart.dispatch(F,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){this.longTap.dispatch(F,this.element),this._preventTap=!0}).bind(this),750)}}},{key:"move",value:function(F){if(F.touches){var H=this.preV,J=F.touches.length,re=F.touches[0].pageX,ye=F.touches[0].pageY;if(this.isDoubleTap=!1,J>1){var xe=F.touches[1].pageX,Re=F.touches[1].pageY,P={x:F.touches[1].pageX-re,y:F.touches[1].pageY-ye};H.x!==null&&(this.pinchStartLen>0&&(F.zoom=qe(P)/this.pinchStartLen,this.pinch.dispatch(F,this.element)),F.angle=Pe(P,H),this.rotate.dispatch(F,this.element)),H.x=P.x,H.y=P.y,this.x2!==null&&this.sx2!==null?(F.deltaX=(re-this.x2+xe-this.sx2)/2,F.deltaY=(ye-this.y2+Re-this.sy2)/2):(F.deltaX=0,F.deltaY=0),this.twoFingerPressMove.dispatch(F,this.element),this.sx2=xe,this.sy2=Re}else{if(this.x2!==null){F.deltaX=re-this.x2,F.deltaY=ye-this.y2;var Q=Math.abs(this.x1-this.x2),se=Math.abs(this.y1-this.y2);(Q>10||se>10)&&(this._preventTap=!0)}else F.deltaX=0,F.deltaY=0;this.pressMove.dispatch(F,this.element)}this.touchMove.dispatch(F,this.element),this._cancelLongTap(),this.x2=re,this.y2=ye,J>1&&F.preventDefault()}}},{key:"end",value:function(F){if(F.changedTouches){this._cancelLongTap();var H=this;F.touches.length<2&&(this.multipointEnd.dispatch(F,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(F.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){H.swipe.dispatch(F,H.element)},0)):(this.tapTimeout=setTimeout(function(){H._preventTap||H.tap.dispatch(F,H.element),H.isDoubleTap&&(H.doubleTap.dispatch(F,H.element),H.isDoubleTap=!1)},0),H.isDoubleTap||(H.singleTapTimeout=setTimeout(function(){H.singleTap.dispatch(F,H.element)},250))),this.touchEnd.dispatch(F,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(F){this.cancelAll(),this.touchCancel.dispatch(F,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(F,H,J,re){return Math.abs(F-H)>=Math.abs(J-re)?F-H>0?"Left":"Right":J-re>0?"Up":"Down"}},{key:"on",value:function(F,H){this[F]&&this[F].add(H)}},{key:"off",value:function(F,H){this[F]&&this[F].del(H)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function Vt(F){var H=function(){var Re,P=document.createElement("fakeelement"),Q={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(Re in Q)if(P.style[Re]!==void 0)return Q[Re]}(),J=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,re=p(F,"gslide-media")?F:F.querySelector(".gslide-media"),ye=g(re,".ginner-container"),xe=F.querySelector(".gslide-description");J>769&&(re=ye),d(re,"greset"),y(re,"translate3d(0, 0, 0)"),c(H,{onElement:re,once:!0,withCallback:function(Re,P){h(re,"greset")}}),re.style.opacity="",xe&&(xe.style.opacity="")}function Mn(F){if(F.events.hasOwnProperty("touch"))return!1;var H,J,re,ye=A(),xe=ye.width,Re=ye.height,P=!1,Q=null,se=null,ae=null,ke=!1,Ce=1,Ee=1,De=!1,Oe=!1,We=null,tt=null,dt=null,Kt=null,xt=0,Qt=0,rn=!1,sn=!1,on={},Tn={},Er=0,Ki=0,ds=document.getElementById("glightbox-slider"),Hi=document.querySelector(".goverlay"),No=new nn(ds,{touchStart:function(qn){if(P=!0,(p(qn.targetTouches[0].target,"ginner-container")||g(qn.targetTouches[0].target,".gslide-desc")||qn.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(P=!1),g(qn.targetTouches[0].target,".gslide-inline")&&!p(qn.targetTouches[0].target.parentNode,"gslide-inline")&&(P=!1),P){if(Tn=qn.targetTouches[0],on.pageX=qn.targetTouches[0].pageX,on.pageY=qn.targetTouches[0].pageY,Er=qn.targetTouches[0].clientX,Ki=qn.targetTouches[0].clientY,Q=F.activeSlide,se=Q.querySelector(".gslide-media"),re=Q.querySelector(".gslide-inline"),ae=null,p(se,"gslide-image")&&(ae=se.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(se=Q.querySelector(".ginner-container")),h(Hi,"greset"),qn.pageX>20&&qn.pageX<window.innerWidth-20)return;qn.preventDefault()}},touchMove:function(qn){if(P&&(Tn=qn.targetTouches[0],!De&&!Oe)){if(re&&re.offsetHeight>Re){var Mr=on.pageX-Tn.pageX;if(Math.abs(Mr)<=13)return!1}ke=!0;var Lr,gn=qn.targetTouches[0].clientX,Kr=qn.targetTouches[0].clientY,sr=Er-gn,Ni=Ki-Kr;if(Math.abs(sr)>Math.abs(Ni)?(rn=!1,sn=!0):(sn=!1,rn=!0),H=Tn.pageX-on.pageX,xt=100*H/xe,J=Tn.pageY-on.pageY,Qt=100*J/Re,rn&&ae&&(Lr=1-Math.abs(J)/Re,Hi.style.opacity=Lr,F.settings.touchFollowAxis&&(xt=0)),sn&&(Lr=1-Math.abs(H)/xe,se.style.opacity=Lr,F.settings.touchFollowAxis&&(Qt=0)),!ae)return y(se,"translate3d(".concat(xt,"%, 0, 0)"));y(se,"translate3d(".concat(xt,"%, ").concat(Qt,"%, 0)"))}},touchEnd:function(){if(P){if(ke=!1,Oe||De)return dt=We,void(Kt=tt);var qn=Math.abs(parseInt(Qt)),Mr=Math.abs(parseInt(xt));if(!(qn>29&&ae))return qn<29&&Mr<25?(d(Hi,"greset"),Hi.style.opacity=1,Vt(se)):void 0;F.close()}},multipointEnd:function(){setTimeout(function(){De=!1},50)},multipointStart:function(){De=!0,Ce=Ee||1},pinch:function(qn){if(!ae||ke)return!1;De=!0,ae.scaleX=ae.scaleY=Ce*qn.zoom;var Mr=Ce*qn.zoom;if(Oe=!0,Mr<=1)return Oe=!1,Mr=1,Kt=null,dt=null,We=null,tt=null,void ae.setAttribute("style","");Mr>4.5&&(Mr=4.5),ae.style.transform="scale3d(".concat(Mr,", ").concat(Mr,", 1)"),Ee=Mr},pressMove:function(qn){if(Oe&&!De){var Mr=Tn.pageX-on.pageX,Lr=Tn.pageY-on.pageY;dt&&(Mr+=dt),Kt&&(Lr+=Kt),We=Mr,tt=Lr;var gn="translate3d(".concat(Mr,"px, ").concat(Lr,"px, 0)");Ee&&(gn+=" scale3d(".concat(Ee,", ").concat(Ee,", 1)")),y(ae,gn)}},swipe:function(qn){if(!Oe)if(De)De=!1;else{if(qn.direction=="Left"){if(F.index==F.elements.length-1)return Vt(se);F.nextSlide()}if(qn.direction=="Right"){if(F.index==0)return Vt(se);F.prevSlide()}}}});F.events.touch=No}var Ze=R(),pe=R()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,ie=document.getElementsByTagName("html")[0],oe={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},be=o(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F),this.customOptions=H,this.settings=l(oe,H),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1},[{key:"init",value:function(){var F=this,H=this.getSelector();H&&(this.baseEvents=c("click",{onElement:H,withCallback:function(J,re){J.preventDefault(),F.open(re)}})),this.elements=this.getElements()}},{key:"open",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var J=X(H)?H:this.settings.startAt;if(K(F)){var re=F.getAttribute("data-gallery");re&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,re)),U(J)&&(J=this.getElementIndex(F))<0&&(J=0)}X(J)||(J=0),this.build(),v(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var ye=document.body,xe=window.innerWidth-document.documentElement.clientWidth;if(xe>0){var Re=document.createElement("style");Re.type="text/css",Re.className="gcss-styles",Re.innerText=".gscrollbar-fixer {margin-right: ".concat(xe,"px}"),document.head.appendChild(Re),d(ye,"gscrollbar-fixer")}d(ye,"glightbox-open"),d(ie,"glightbox-open"),Ze&&(d(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(J,!0),this.elements.length===1?(d(this.prevButton,"glightbox-button-hidden"),d(this.nextButton,"glightbox-button-hidden")):(h(this.prevButton,"glightbox-button-hidden"),h(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),O(this.settings.onOpen)&&this.settings.onOpen(),pe&&this.settings.touchNavigation&&Mn(this),this.settings.keyboardNavigation&&le(this)}},{key:"openAt",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,F)}},{key:"showSlide",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];b(this.loader),this.index=parseInt(H);var re=this.slidesContainer.querySelector(".current");re&&h(re,"current"),this.slideAnimateOut();var ye=this.slidesContainer.querySelectorAll(".gslide")[H];if(p(ye,"loaded"))this.slideAnimateIn(ye,J),w(this.loader);else{b(this.loader);var xe=this.elements[H],Re={index:this.index,slide:ye,slideNode:ye,slideConfig:xe.slideConfig,slideIndex:this.index,trigger:xe.node,player:null};this.trigger("slide_before_load",Re),xe.instance.setContent(ye,function(){w(F.loader),F.resize(),F.slideAnimateIn(ye,J),F.trigger("slide_after_load",Re)})}this.slideDescription=ye.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&p(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(H+1),this.preloadSlide(H-1)),this.updateNavigationClasses(),this.activeSlide=ye}},{key:"preloadSlide",value:function(F){var H=this;if(F<0||F>this.elements.length-1||U(this.elements[F]))return!1;var J=this.slidesContainer.querySelectorAll(".gslide")[F];if(p(J,"loaded"))return!1;var re=this.elements[F],ye=re.type,xe={index:F,slide:J,slideNode:J,slideConfig:re.slideConfig,slideIndex:F,trigger:re.node,player:null};this.trigger("slide_before_load",xe),ye==="video"||ye==="external"?setTimeout(function(){re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})},200):re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(F<0||F>this.elements.length-1))return!1;F<0?F=this.elements.length-1:F>=this.elements.length&&(F=0),this.showSlide(F)}},{key:"insertSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;H<0&&(H=this.elements.length);var J=new Ie(F,this,H),re=J.getConfig(),ye=l({},re),xe=J.create(),Re=this.elements.length-1;ye.index=H,ye.node=!1,ye.instance=J,ye.slideConfig=re,this.elements.splice(H,0,ye);var P=null,Q=null;if(this.slidesContainer){if(H>Re)this.slidesContainer.appendChild(xe);else{var se=this.slidesContainer.querySelectorAll(".gslide")[H];this.slidesContainer.insertBefore(xe,se)}(this.settings.preload&&this.index==0&&H==0||this.index-1==H||this.index+1==H)&&this.preloadSlide(H),this.index===0&&H===0&&(this.index=1),this.updateNavigationClasses(),P=this.slidesContainer.querySelectorAll(".gslide")[H],Q=this.getSlidePlayerInstance(H),ye.slideNode=P}this.trigger("slide_inserted",{index:H,slide:P,slideNode:P,slideConfig:re,slideIndex:H,trigger:null,player:Q}),O(this.settings.slideInserted)&&this.settings.slideInserted({index:H,slide:P,player:Q})}},{key:"removeSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(F<0||F>this.elements.length-1)return!1;var H=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[F];H&&(this.getActiveSlideIndex()==F&&(F==this.elements.length-1?this.prevSlide():this.nextSlide()),H.parentNode.removeChild(H)),this.elements.splice(F,1),this.trigger("slide_removed",F),O(this.settings.slideRemoved)&&this.settings.slideRemoved(F)}},{key:"slideAnimateIn",value:function(F,H){var J=this,re=F.querySelector(".gslide-media"),ye=F.querySelector(".gslide-description"),xe={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},Re={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(re.offsetWidth>0&&ye&&(w(ye),ye.style.display=""),h(F,this.effectsClasses),H)v(F,this.settings.cssEfects[this.settings.openEffect].in,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),O(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])});else{var P=this.settings.slideEffect,Q=P!=="none"?this.settings.cssEfects[P].in:P;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(Q=this.settings.cssEfects.slideBack.in),v(F,Q,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),O(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])})}setTimeout(function(){J.resize(F)},100),d(F,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var F=this.prevActiveSlide;h(F,this.effectsClasses),d(F,"prev");var H=this.settings.slideEffect,J=H!=="none"?this.settings.cssEfects[H].out:H;this.slidePlayerPause(F),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),O(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(J=this.settings.cssEfects.slideBack.out),v(F,J,function(){var re=F.querySelector(".ginner-container"),ye=F.querySelector(".gslide-media"),xe=F.querySelector(".gslide-description");re.style.transform="",ye.style.transform="",h(ye,"greset"),ye.style.opacity="",xe&&(xe.style.opacity=""),h(F,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(F){var H="gvideo"+F,J=this.getAllPlayers();return!(!q(J,H)||!J[H])&&J[H]}},{key:"stopSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"slidePlayerPause",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"playSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var J=this.getSlidePlayerInstance(F);J&&!J.playing&&J.play()}},{key:"slidePlayerPlay",value:function(F){var H;if(!Ze||(H=this.settings.plyr.config)!==null&&H!==void 0&&H.muted){if(K(F)){var J=F.querySelector(".gvideo-wrapper");J&&(F=J.getAttribute("data-index"))}var re=this.getSlidePlayerInstance(F);re&&!re.playing&&(re.play(),this.settings.autofocusVideos&&re.elements.container.focus())}}},{key:"setElements",value:function(F){var H=this;this.settings.elements=!1;var J=[];F&&F.length&&u(F,function(re,ye){var xe=new Ie(re,H,ye),Re=xe.getConfig(),P=l({},Re);P.slideConfig=Re,P.instance=xe,P.index=ye,J.push(P)}),this.elements=J,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(u(this.elements,function(){var re=E(H.settings.slideHTML);H.slidesContainer.appendChild(re)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(F){var H=!1;return u(this.elements,function(J,re){if(q(J,"node")&&J.node==F)return H=re,!0}),H}},{key:"getElements",value:function(){var F=this,H=[];this.elements=this.elements?this.elements:[],!U(this.settings.elements)&&L(this.settings.elements)&&this.settings.elements.length&&u(this.settings.elements,function(re,ye){var xe=new Ie(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=!1,P.index=ye,P.instance=xe,P.slideConfig=Re,H.push(P)});var J=!1;return this.getSelector()&&(J=document.querySelectorAll(this.getSelector())),J&&u(J,function(re,ye){var xe=new Ie(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=re,P.index=ye,P.instance=xe,P.slideConfig=Re,P.gallery=re.getAttribute("data-gallery"),H.push(P)}),H}},{key:"getGalleryElements",value:function(F,H){return F.filter(function(J){return J.gallery==H})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var F=[];for(var H in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(H)){var J=this.settings.cssEfects[H];F.push("g".concat(J.in)),F.push("g".concat(J.out))}return F.join(" ")}},{key:"build",value:function(){var F=this;if(this.built)return!1;var H=document.body.childNodes,J=[];u(H,function(se){se.parentNode==document.body&&se.nodeName.charAt(0)!=="#"&&se.hasAttribute&&!se.hasAttribute("aria-hidden")&&(J.push(se),se.setAttribute("aria-hidden","true"))});var re=q(this.settings.svg,"next")?this.settings.svg.next:"",ye=q(this.settings.svg,"prev")?this.settings.svg.prev:"",xe=q(this.settings.svg,"close")?this.settings.svg.close:"",Re=this.settings.lightboxHTML;Re=E(Re=(Re=(Re=Re.replace(/{nextSVG}/g,re)).replace(/{prevSVG}/g,ye)).replace(/{closeSVG}/g,xe)),document.body.appendChild(Re);var P=document.getElementById("glightbox-body");this.modal=P;var Q=P.querySelector(".gclose");this.prevButton=P.querySelector(".gprev"),this.nextButton=P.querySelector(".gnext"),this.overlay=P.querySelector(".goverlay"),this.loader=P.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=J,this.events={},d(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&Q&&(this.events.close=c("click",{onElement:Q,withCallback:function(se,ae){se.preventDefault(),F.close()}})),Q&&!this.settings.closeButton&&Q.parentNode.removeChild(Q),this.nextButton&&(this.events.next=c("click",{onElement:this.nextButton,withCallback:function(se,ae){se.preventDefault(),F.nextSlide()}})),this.prevButton&&(this.events.prev=c("click",{onElement:this.prevButton,withCallback:function(se,ae){se.preventDefault(),F.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=c("click",{onElement:P,withCallback:function(se,ae){F.preventOutsideClick||p(document.body,"glightbox-mobile")||g(se.target,".ginner-container")||g(se.target,".gbtn")||p(se.target,"gnext")||p(se.target,"gprev")||F.close()}})),u(this.elements,function(se,ae){F.slidesContainer.appendChild(se.instance.create()),se.slideNode=F.slidesContainer.querySelectorAll(".gslide")[ae]}),pe&&d(document.body,"glightbox-touch"),this.events.resize=c("resize",{onElement:window,withCallback:function(){F.resize()}}),this.built=!0}},{key:"resize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((F=F||this.activeSlide)&&!p(F,"zoomed")){var H=A(),J=F.querySelector(".gvideo-wrapper"),re=F.querySelector(".gslide-image"),ye=this.slideDescription,xe=H.width,Re=H.height;if(xe<=768?d(document.body,"glightbox-mobile"):h(document.body,"glightbox-mobile"),J||re){var P=!1;if(ye&&(p(ye,"description-bottom")||p(ye,"description-top"))&&!p(ye,"gabsolute")&&(P=!0),re){if(xe<=768)re.querySelector("img");else if(P){var Q,se=ye.offsetHeight,ae=re.querySelector("img"),ke=this.elements[this.index].node,Ce=(Q=ke.getAttribute("data-height"))!==null&&Q!==void 0?Q:"100vh";ae.setAttribute("style","max-height: calc(".concat(Ce," - ").concat(se,"px)")),ye.setAttribute("style","max-width: ".concat(ae.offsetWidth,"px;"))}}if(J){var Ee=q(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!Ee){var De=J.clientWidth,Oe=J.clientHeight,We=De/Oe;Ee="".concat(De/We,":").concat(Oe/We)}var tt=Ee.split(":"),dt=this.settings.videosWidth,Kt=this.settings.videosWidth,xt=(Kt=X(dt)||dt.indexOf("px")!==-1?parseInt(dt):dt.indexOf("vw")!==-1?xe*parseInt(dt)/100:dt.indexOf("vh")!==-1?Re*parseInt(dt)/100:dt.indexOf("%")!==-1?xe*parseInt(dt)/100:parseInt(J.clientWidth))/(parseInt(tt[0])/parseInt(tt[1]));if(xt=Math.floor(xt),P&&(Re-=ye.offsetHeight),Kt>xe||xt>Re||Re<xt&&xe>Kt){var Qt=J.offsetWidth,rn=J.offsetHeight,sn=Re/rn,on={width:Qt*sn,height:rn*sn};J.parentNode.setAttribute("style","max-width: ".concat(on.width,"px")),P&&ye.setAttribute("style","max-width: ".concat(on.width,"px;"))}else J.parentNode.style.maxWidth="".concat(dt),P&&ye.setAttribute("style","max-width: ".concat(dt,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var F=this.loop();h(this.nextButton,"disabled"),h(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(d(this.prevButton,"disabled"),d(this.nextButton,"disabled")):this.index!==0||F?this.index!==this.elements.length-1||F||d(this.nextButton,"disabled"):d(this.prevButton,"disabled")}},{key:"loop",value:function(){var F=q(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return F=q(this.settings,"loop")?this.settings.loop:F,F}},{key:"close",value:function(){var F=this;if(!this.lightboxOpen){if(this.events){for(var H in this.events)this.events.hasOwnProperty(H)&&this.events[H].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&u(this.bodyHiddenChildElms,function(J){J.removeAttribute("aria-hidden")}),d(this.modal,"glightbox-closing"),v(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),v(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(F.activeSlide=null,F.prevActiveSlideIndex=null,F.prevActiveSlide=null,F.built=!1,F.events){for(var J in F.events)F.events.hasOwnProperty(J)&&F.events[J].destroy();F.events=null}var re=document.body;h(ie,"glightbox-open"),h(re,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),F.modal.parentNode.removeChild(F.modal),F.trigger("close"),O(F.settings.onClose)&&F.settings.onClose();var ye=document.querySelector(".gcss-styles");ye&&ye.parentNode.removeChild(ye),F.lightboxOpen=!1,F.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||!O(H))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:F,once:J,callback:H})}},{key:"once",value:function(F,H){this.on(F,H,!0)}},{key:"trigger",value:function(F){var H=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,re=[];u(this.apiEvents,function(ye,xe){var Re=ye.evt,P=ye.once,Q=ye.callback;Re==F&&(Q(J),P&&re.push(xe))}),re.length&&u(re,function(ye){return H.apiEvents.splice(ye,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.0"}}]);return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=new be(F);return H.init(),H}})}(t3)),t3.exports}var C9t=A9t();const k9t=sa(C9t);let L4=[],R4=[];function T9t(e,t,n,r){const s=new DOMParser().parseFromString(e,"text/html"),o=r.shadowRoot||r,a=!!(r.showNav&&r.nav.length);s.querySelectorAll("a").forEach(f=>f.target="_blank"),L4.forEach(f=>f==null?void 0:f.disconnect()),L4=[],R4.forEach(f=>f==null?void 0:f.disconnect()),R4=[],a&&r.nav.forEach(f=>{const c=new IntersectionObserver(d=>{d.forEach(h=>{const p=h.isIntersecting,g=h.target.getAttribute("id");p&&o.querySelectorAll(".navigation li").forEach(v=>{v.classList.contains(`nav-${g}`)?v.classList.add("active"):v.classList.remove("active")})})},{rootMargin:"-50% 0px"});setTimeout(()=>{const d=o.querySelector(`#${f.id}`);d&&(c.observe(d),L4.push(c))},200)}),Object.keys(t).forEach(f=>{const c=t[f];if(XNt.includes(c.mode)&&c.steps){const d=`${c.as}#${c.id}`,h=new IntersectionObserver(p=>{p.forEach(g=>{const v=g.isIntersecting,y=Number(g.target.getAttribute("key"));v&&XAe(c,y,d,o)})});setTimeout(()=>{if(!o.querySelector(`#${f}`))return;o.querySelectorAll(`#${f} section-step`).forEach((v,y)=>{v.setAttribute("key",`${y}`),h.observe(v)}),R4.push(h),XAe(c,0,d,o)},100)}});function u(){o.querySelectorAll(".story-telling .hero img, .story-telling .hero video").forEach(function(c){c.getAttribute("data-parallax")==="true"&&(c.style.transform="translateY("+c.getBoundingClientRect().top*.1+"px)")})}return window.removeEventListener("scroll",u),window.addEventListener("scroll",u),Array.from(s.body.childNodes).map(f=>D9t(f,n))}function XAe(e,t,n,r){const i=r.querySelector(n);Object.keys(e.steps[t]).forEach(s=>{i[s]=e.steps[t][s]})}function D9t(e,t){if(e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("*").forEach(r=>{/^[a-z]+(-[a-z0-9]+)*$/.test(r.tagName.toLowerCase())&&e.classList.contains("section-custom")&&Array.from(r.attributes).forEach(i=>r[i.name]=fz(r,i.name)),setTimeout(()=>t(r),100)}),e.querySelectorAll){const n=k9t({autoplayVideos:!0}),r=[];e.querySelectorAll("img").forEach(s=>{const o=s.getAttribute("mode");s.parentNode.tagName!=="A"&&o!=="hero"&&(s.style.cursor="zoom-in",s.addEventListener("click",()=>{n.open()}),r.push({type:"image",href:s.src}))}),n.setElements(r)}return e}function fz(e,t=void 0){const n=t?e.getAttribute(t):e;return tNe(n)}function tNe(e){let t;try{t=JSON.parse(e)}catch{!isNaN(e)&&e.trim()!==""?t=Number(e):e==="true"?t=!0:e==="false"?t=!1:t=e}return t}function L9t(e,t,n,r){const i=n.getBoundingClientRect(),s=(i.right+i.left)/2,o=25/2,a=t?i.top-o:void 0,l=t?i.top+o:void 0,u=i.bottom-o,f=i.bottom+o,c=s-o,d=s+o,{clientX:h,clientY:p}=e;if(h>=c&&h<=d&&(p>=u||p>=a)&&(p<=f||p<=l)&&r.showEditor!=="closed"){const v=t?p>=a&&p<=l:!1,y=Number(n.getAttribute("data-section"));r.addCustomSectionIndex=v?y-1:y,r.requestUpdate()}}function R9t(e,t,n,r,i){const s=new DOMParser;let o=-1;if(n&&t.length&&e.length){o=0;const a=`
    <div class="navigation">
      <div class="container nav-container">
        <span class="hamburger-menu" aria-label="Toggle navigation">
        </span>
        <div class="nav-overlay"></div>
        <ul class="nav-list">
          ${t.map(({id:h,title:p,state:g})=>g?`<li class="nav-${h}"><a href="#${h}">${p}</a></li>`:"").join("")}
        </ul>
      </div>
    </div>
  `,l=s.parseFromString(a,"text/html").body.firstChild,u=l.querySelector(".hamburger-menu"),f=l.querySelector(".navigation .container ul"),c=l.querySelector(".nav-overlay"),d=l.querySelectorAll(".nav-list li");if(u&&f){const h=()=>{u.classList.toggle("active"),f.classList.toggle("show"),c.classList.toggle("show")};u.addEventListener("click",()=>h()),c.addEventListener("click",()=>h()),d.forEach(p=>{p.addEventListener("click",()=>h())})}e[0].classList.contains("hero")&&(o=1),e.splice(o,0,l)}if(e.length){const a=o+1;e[a].classList.add("section-start"),e.slice(a).forEach((l,u)=>{if(l.classList.add("section-item"),l.setAttribute("data-section",`${u+1}`),r!==void 0){const f=l.classList.contains("section-start");l.addEventListener("click",function(c){L9t(c,f,this,i)})}})}return e}const F9t="@eox/storytelling",O9t="1.4.4",M9t="module",$9t={vite:"^6.0.3"},I9t={npm:">=8.0.0",node:">=18.0.0"},P9t=["types","dist","src"],N9t="./src/main.js",B9t="./types/src/main.d.ts",z9t={"*":{".":["./types/src/main.d.ts"],"src/*":["./types/src/*"]}},j9t={prepack:"tsc -p tsconfig.build.json || true",build:"vite build",watch:"vite build --watch"},U9t={"@eox/elements-utils":"^0.1.5","@sindresorhus/slugify":"^2.2.1",glightbox:"^3.3.0","isomorphic-dompurify":"^2.4.0",joi:"^17.12.3","js-yaml":"^4.1.0",lit:"^3.2.0","lodash.debounce":"^4.0.8","markdown-it":"^14.0.0"},q9t={"@eox/jsonform":"*"},pC={name:F9t,version:O9t,type:M9t,devDependencies:$9t,engines:I9t,files:P9t,main:N9t,types:B9t,typesVersions:z9t,scripts:j9t,dependencies:U9t,peerDependencies:q9t};function H9t(e,t){(e.shadowRoot||e).querySelectorAll(t).forEach(n=>{n.addEventListener("click",r=>{r.preventDefault(),window.parent.location.hash=r.target.hash.replace("#",""),nNe(e)})})}function nNe(e){const t=window.parent.location.hash,n=t?e.shadowRoot.querySelector(t):null;n&&n.scrollIntoView({behavior:"smooth"})}function G9t(e){return{tagNameCheck:r=>r.match(new RegExp(/^[a-z]+(-[a-z0-9]+)*$/)),attributeNameCheck:r=>r.match(new RegExp(e.attrs.keys.join("|"))),allowCustomizedBuiltInElements:!0}}function V9t(){const e=document.createElement("style");e.innerHTML=`
      @import url("https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css");
    `,document.body.appendChild(e)}function F4(e){const t=e.split("-")[0].split(".").map(Number);let n=0;const r=1e3;for(let i=0;i<t.length;i++)n+=t[i]*Math.pow(r,t.length-i-1);return n}function W9t(e){const t=Number(Object.keys(T4).find(r=>T4[r].length===1)),n=T4[e];if(!e||!n)return console.warn(`Version not (or wrongly) specified in markdown frontmatter. Assuming latest markdown syntax version (v${t}).`),t;if(t===e)return e;{const r=[F4(n[0]),F4(n[1])],i=F4(pC.version);return i>=r[0]&&i<=r[1]||console.error(`You are using an older or newer version of ${pC.name} package, which is not compatible with the version defined in the markdown frontmatter. Please update the ${pC.name} package to (>=${n[0]} and <=${n[1]}) or change the markdown syntax version to ${pC.version}`),e}}var O4={exports:{}},ZAe;function Y9t(){return ZAe||(ZAe=1,function(e,t){(function(n,r){e.exports=r()})(self,()=>{return n={7629:(i,s,o)=>{const a=o(375),l=o(8571),u=o(9474),f=o(1687),c=o(8652),d=o(8160),h=o(3292),p=o(6354),g=o(8901),v=o(9708),y=o(6914),b=o(2294),w=o(6133),E=o(1152),A=o(8863),T=o(2036),D={Base:class{constructor(k){this.type=k,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new b.Ids,this._preferences=null,this._refs=new w.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof v.describe=="function","Manifest functionality disabled"),v.describe(this)}allow(...k){return d.verifyFlat(k,"allow"),this._values(k,"_valids")}alter(k){a(k&&typeof k=="object"&&!Array.isArray(k),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const R=this.clone();R.$_terms.alterations=R.$_terms.alterations||[];for(const O in k){const B=k[O];a(typeof B=="function","Alteration adjuster for",O,"must be a function"),R.$_terms.alterations.push({target:O,adjuster:B})}return R.$_temp.ruleset=!1,R}artifact(k){return a(k!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",k)}cast(k){return a(k===!1||typeof k=="string","Invalid to value"),a(k===!1||this._definition.cast[k],"Type",this.type,"does not support casting to",k),this.$_setFlag("cast",k===!1?void 0:k)}default(k,R){return this._default("default",k,R)}description(k){return a(k&&typeof k=="string","Description must be a non-empty string"),this.$_setFlag("description",k)}empty(k){const R=this.clone();return k!==void 0&&(k=R.$_compile(k,{override:!1})),R.$_setFlag("empty",k,{clone:!1})}error(k){return a(k,"Missing error"),a(k instanceof Error||typeof k=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",k)}example(k,R={}){return a(k!==void 0,"Missing example"),d.assertOptions(R,["override"]),this._inner("examples",k,{single:!0,override:R.override})}external(k,R){return typeof k=="object"&&(a(!R,"Cannot combine options with description"),R=k.description,k=k.method),a(typeof k=="function","Method must be a function"),a(R===void 0||R&&typeof R=="string","Description must be a non-empty string"),this._inner("externals",{method:k,description:R},{single:!0})}failover(k,R){return this._default("failover",k,R)}forbidden(){return this.presence("forbidden")}id(k){return k?(a(typeof k=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(k),"id cannot contain period character"),this.$_setFlag("id",k)):this.$_setFlag("id",void 0)}invalid(...k){return this._values(k,"_invalids")}label(k){return a(k&&typeof k=="string","Label name must be a non-empty string"),this.$_setFlag("label",k)}meta(k){return a(k!==void 0,"Meta cannot be undefined"),this._inner("metas",k,{single:!0})}note(...k){a(k.length,"Missing notes");for(const R of k)a(R&&typeof R=="string","Notes must be non-empty strings");return this._inner("notes",k)}only(k=!0){return a(typeof k=="boolean","Invalid mode:",k),this.$_setFlag("only",k)}optional(){return this.presence("optional")}prefs(k){a(k,"Missing preferences"),a(k.context===void 0,"Cannot override context"),a(k.externals===void 0,"Cannot override externals"),a(k.warnings===void 0,"Cannot override warnings"),a(k.debug===void 0,"Cannot override debug"),d.checkPreferences(k);const R=this.clone();return R._preferences=d.preferences(R._preferences,k),R}presence(k){return a(["optional","required","forbidden"].includes(k),"Unknown presence mode",k),this.$_setFlag("presence",k)}raw(k=!0){return this.$_setFlag("result",k?"raw":void 0)}result(k){return a(["raw","strip"].includes(k),"Unknown result mode",k),this.$_setFlag("result",k)}required(){return this.presence("required")}strict(k){const R=this.clone(),O=k!==void 0&&!k;return R._preferences=d.preferences(R._preferences,{convert:O}),R}strip(k=!0){return this.$_setFlag("result",k?"strip":void 0)}tag(...k){a(k.length,"Missing tags");for(const R of k)a(R&&typeof R=="string","Tags must be non-empty strings");return this._inner("tags",k)}unit(k){return a(k&&typeof k=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",k)}valid(...k){d.verifyFlat(k,"valid");const R=this.allow(...k);return R.$_setFlag("only",!!R._valids,{clone:!1}),R}when(k,R){const O=this.clone();O.$_terms.whens||(O.$_terms.whens=[]);const B=h.when(O,k,R);if(!["any","link"].includes(O.type)){const K=B.is?[B]:B.switch;for(const L of K)a(!L.then||L.then.type==="any"||L.then.type===O.type,"Cannot combine",O.type,"with",L.then&&L.then.type),a(!L.otherwise||L.otherwise.type==="any"||L.otherwise.type===O.type,"Cannot combine",O.type,"with",L.otherwise&&L.otherwise.type)}return O.$_terms.whens.push(B),O.$_mutateRebuild()}cache(k){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const R=this.clone();return R._cache=k||c.provider.provision(),R.$_temp.ruleset=!1,R}clone(){const k=Object.create(Object.getPrototypeOf(this));return this._assign(k)}concat(k){a(d.isSchema(k),"Invalid schema object"),a(this.type==="any"||k.type==="any"||k.type===this.type,"Cannot merge type",this.type,"with another type:",k.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!k._inRuleset(),"Cannot concatenate a schema with open ruleset");let R=this.clone();if(this.type==="any"&&k.type!=="any"){const O=k.clone();for(const B of Object.keys(R))B!=="type"&&(O[B]=R[B]);R=O}R._ids.concat(k._ids),R._refs.register(k,w.toSibling),R._preferences=R._preferences?d.preferences(R._preferences,k._preferences):k._preferences,R._valids=T.merge(R._valids,k._valids,k._invalids),R._invalids=T.merge(R._invalids,k._invalids,k._valids);for(const O of k._singleRules.keys())R._singleRules.has(O)&&(R._rules=R._rules.filter(B=>B.keep||B.name!==O),R._singleRules.delete(O));for(const O of k._rules)k._definition.rules[O.method].multi||R._singleRules.set(O.name,O),R._rules.push(O);if(R._flags.empty&&k._flags.empty){R._flags.empty=R._flags.empty.concat(k._flags.empty);const O=Object.assign({},k._flags);delete O.empty,f(R._flags,O)}else if(k._flags.empty){R._flags.empty=k._flags.empty;const O=Object.assign({},k._flags);delete O.empty,f(R._flags,O)}else f(R._flags,k._flags);for(const O in k.$_terms){const B=k.$_terms[O];B?R.$_terms[O]?R.$_terms[O]=R.$_terms[O].concat(B):R.$_terms[O]=B.slice():R.$_terms[O]||(R.$_terms[O]=B)}return this.$_root._tracer&&this.$_root._tracer._combine(R,[this,k]),R.$_mutateRebuild()}extend(k){return a(!k.base,"Cannot extend type with another base"),g.type(this,k)}extract(k){return k=Array.isArray(k)?k:k.split("."),this._ids.reach(k)}fork(k,R){a(!this._inRuleset(),"Cannot fork inside a ruleset");let O=this;for(let B of[].concat(k))B=Array.isArray(B)?B:B.split("."),O=O._ids.fork(B,R,O);return O.$_temp.ruleset=!1,O}rule(k){const R=this._definition;d.assertOptions(k,Object.keys(R.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const O=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(O>=0&&O<this._rules.length,"Cannot apply rules to empty ruleset");const B=this.clone();for(let K=O;K<B._rules.length;++K){const L=B._rules[K],$=l(L);for(const I in k)R.modifiers[I]($,k[I]),a($.name===L.name,"Cannot change rule name");B._rules[K]=$,B._singleRules.get($.name)===L&&B._singleRules.set($.name,$)}return B.$_temp.ruleset=!1,B.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const k=this.clone();return k.$_temp.ruleset=k._rules.length,k}get $(){return this.ruleset}tailor(k){k=[].concat(k),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let R=this;if(this.$_terms.alterations)for(const{target:O,adjuster:B}of this.$_terms.alterations)k.includes(O)&&(R=B(R),a(d.isSchema(R),"Alteration adjuster for",O,"failed to return a schema object"));return R=R.$_modify({each:O=>O.tailor(k),ref:!1}),R.$_temp.ruleset=!1,R.$_mutateRebuild()}tracer(){return E.location?E.location(this):this}validate(k,R){return A.entry(k,this,R)}validateAsync(k,R){return A.entryAsync(k,this,R)}$_addRule(k){typeof k=="string"&&(k={name:k}),a(k&&typeof k=="object","Invalid options"),a(k.name&&typeof k.name=="string","Invalid rule name");for(const L in k)a(L[0]!=="_","Cannot set private rule properties");const R=Object.assign({},k);R._resolve=[],R.method=R.method||R.name;const O=this._definition.rules[R.method],B=R.args;a(O,"Unknown rule",R.method);const K=this.clone();if(B){a(Object.keys(B).length===1||Object.keys(B).length===this._definition.rules[R.name].args.length,"Invalid rule definition for",this.type,R.name);for(const L in B){let $=B[L];if(O.argsByName){const I=O.argsByName.get(L);if(I.ref&&d.isResolvable($))R._resolve.push(L),K.$_mutateRegister($);else if(I.normalize&&($=I.normalize($),B[L]=$),I.assert){const U=d.validateArg($,L,I);a(!U,U,"or reference")}}$!==void 0?B[L]=$:delete B[L]}}return O.multi||(K._ruleRemove(R.name,{clone:!1}),K._singleRules.set(R.name,R)),K.$_temp.ruleset===!1&&(K.$_temp.ruleset=null),O.priority?K._rules.unshift(R):K._rules.push(R),K}$_compile(k,R){return h.schema(this.$_root,k,R)}$_createError(k,R,O,B,K,L={}){const $=L.flags!==!1?this._flags:{},I=L.messages?y.merge(this._definition.messages,L.messages):this._definition.messages;return new p.Report(k,R,O,$,I,B,K)}$_getFlag(k){return this._flags[k]}$_getRule(k){return this._singleRules.get(k)}$_mapLabels(k){return k=Array.isArray(k)?k:k.split("."),this._ids.labels(k)}$_match(k,R,O,B){(O=Object.assign({},O)).abortEarly=!0,O._externals=!1,R.snapshot();const K=!A.validate(k,this,R,O,B).errors;return R.restore(),K}$_modify(k){return d.assertOptions(k,["each","once","ref","schema"]),b.schema(this,k)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(k,{source:R,name:O,path:B,key:K})=>{const L=this._definition[R][O]&&this._definition[R][O].register;L!==!1&&this.$_mutateRegister(k,{family:L,key:K})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(k,{family:R,key:O}={}){this._refs.register(k,R),this._ids.register(k,{key:O})}$_property(k){return this._definition.properties[k]}$_reach(k){return this._ids.reach(k)}$_rootReferences(){return this._refs.roots()}$_setFlag(k,R,O={}){a(k[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const B=this._definition.flags[k]||{};if(u(R,B.default)&&(R=void 0),u(R,this._flags[k]))return this;const K=O.clone!==!1?this.clone():this;return R!==void 0?(K._flags[k]=R,K.$_mutateRegister(R)):delete K._flags[k],k[0]!=="_"&&(K.$_temp.ruleset=!1),K}$_parent(k,...R){return this[k][d.symbols.parent].call(this,...R)}$_validate(k,R,O){return A.validate(k,this,R,O)}_assign(k){k.type=this.type,k.$_root=this.$_root,k.$_temp=Object.assign({},this.$_temp),k.$_temp.whens={},k._ids=this._ids.clone(),k._preferences=this._preferences,k._valids=this._valids&&this._valids.clone(),k._invalids=this._invalids&&this._invalids.clone(),k._rules=this._rules.slice(),k._singleRules=l(this._singleRules,{shallow:!0}),k._refs=this._refs.clone(),k._flags=Object.assign({},this._flags),k._cache=null,k.$_terms={};for(const R in this.$_terms)k.$_terms[R]=this.$_terms[R]?this.$_terms[R].slice():null;k.$_super={};for(const R in this.$_super)k.$_super[R]=this._super[R].bind(k);return k}_bare(){const k=this.clone();k._reset();const R=k._definition.terms;for(const O in R){const B=R[O];k.$_terms[O]=B.init}return k.$_mutateRebuild()}_default(k,R,O={}){return d.assertOptions(O,"literal"),a(R!==void 0,"Missing",k,"value"),a(typeof R=="function"||!O.literal,"Only function value supports literal option"),typeof R=="function"&&O.literal&&(R={[d.symbols.literal]:!0,literal:R}),this.$_setFlag(k,R)}_generate(k,R,O){if(!this.$_terms.whens)return{schema:this};const B=[],K=[];for(let I=0;I<this.$_terms.whens.length;++I){const U=this.$_terms.whens[I];if(U.concat){B.push(U.concat),K.push(`${I}.concat`);continue}const q=U.ref?U.ref.resolve(k,R,O):k,Y=U.is?[U]:U.switch,X=K.length;for(let te=0;te<Y.length;++te){const{is:le,then:ee,otherwise:z}=Y[te],he=`${I}${U.switch?"."+te:""}`;if(le.$_match(q,R.nest(le,`${he}.is`),O)){if(ee){const de=R.localize([...R.path,`${he}.then`],R.ancestors,R.schemas),{schema:ze,id:He}=ee._generate(k,de,O);B.push(ze),K.push(`${he}.then${He?`(${He})`:""}`);break}}else if(z){const de=R.localize([...R.path,`${he}.otherwise`],R.ancestors,R.schemas),{schema:ze,id:He}=z._generate(k,de,O);B.push(ze),K.push(`${he}.otherwise${He?`(${He})`:""}`);break}}if(U.break&&K.length>X)break}const L=K.join(", ");if(R.mainstay.tracer.debug(R,"rule","when",L),!L)return{schema:this};if(!R.mainstay.tracer.active&&this.$_temp.whens[L])return{schema:this.$_temp.whens[L],id:L};let $=this;this._definition.generate&&($=this._definition.generate(this,k,R,O));for(const I of B)$=$.concat(I);return this.$_root._tracer&&this.$_root._tracer._combine($,[this,...B]),this.$_temp.whens[L]=$,{schema:$,id:L}}_inner(k,R,O={}){a(!this._inRuleset(),`Cannot set ${k} inside a ruleset`);const B=this.clone();return B.$_terms[k]&&!O.override||(B.$_terms[k]=[]),O.single?B.$_terms[k].push(R):B.$_terms[k].push(...R),B.$_temp.ruleset=!1,B}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(k,R={}){if(!this._singleRules.has(k))return this;const O=R.clone!==!1?this.clone():this;O._singleRules.delete(k);const B=[];for(let K=0;K<O._rules.length;++K){const L=O._rules[K];L.name!==k||L.keep?B.push(L):O._inRuleset()&&K<O.$_temp.ruleset&&--O.$_temp.ruleset}return O._rules=B,O}_values(k,R){d.verifyFlat(k,R.slice(1,-1));const O=this.clone(),B=k[0]===d.symbols.override;if(B&&(k=k.slice(1)),!O[R]&&k.length?O[R]=new T:B&&(O[R]=k.length?new T:null,O.$_mutateRebuild()),!O[R])return O;B&&O[R].override();for(const K of k){a(K!==void 0,"Cannot call allow/valid/invalid with undefined"),a(K!==d.symbols.override,"Override must be the first value");const L=R==="_invalids"?"_valids":"_invalids";O[L]&&(O[L].remove(K),O[L].length||(a(R==="_valids"||!O._flags.only,"Setting invalid value",K,"leaves schema rejecting all values due to previous valid rule"),O[L]=null)),O[R].add(K,O._refs)}return O}}};D.Base.prototype[d.symbols.any]={version:d.version,compile:h.compile,root:"$_root"},D.Base.prototype.isImmutable=!0,D.Base.prototype.deny=D.Base.prototype.invalid,D.Base.prototype.disallow=D.Base.prototype.invalid,D.Base.prototype.equal=D.Base.prototype.valid,D.Base.prototype.exist=D.Base.prototype.required,D.Base.prototype.not=D.Base.prototype.invalid,D.Base.prototype.options=D.Base.prototype.prefs,D.Base.prototype.preferences=D.Base.prototype.prefs,i.exports=new D.Base},8652:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8160),f={max:1e3,supported:new Set(["undefined","boolean","number","string"])};s.provider={provision:c=>new f.Cache(c)},f.Cache=class{constructor(c={}){u.assertOptions(c,["max"]),a(c.max===void 0||c.max&&c.max>0&&isFinite(c.max),"Invalid max cache size"),this._max=c.max||f.max,this._map=new Map,this._list=new f.List}get length(){return this._map.size}set(c,d){if(c!==null&&!f.supported.has(typeof c))return;let h=this._map.get(c);if(h)return h.value=d,void this._list.first(h);h=this._list.unshift({key:c,value:d}),this._map.set(c,h),this._compact()}get(c){const d=this._map.get(c);if(d)return this._list.first(d),l(d.value)}_compact(){if(this._map.size>this._max){const c=this._list.pop();this._map.delete(c.key)}}},f.List=class{constructor(){this.tail=null,this.head=null}unshift(c){return c.next=null,c.prev=this.head,this.head&&(this.head.next=c),this.head=c,this.tail||(this.tail=c),c}first(c){c!==this.head&&(this._remove(c),this.unshift(c))}pop(){return this._remove(this.tail)}_remove(c){const{next:d,prev:h}=c;return d.prev=h,h&&(h.next=d),c===this.tail&&(this.tail=d),c.prev=null,c.next=null,c}}},8160:(i,s,o)=>{const a=o(375),l=o(7916),u=o(5934);let f,c;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};s.version=u.version,s.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},s.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},s.assertOptions=function(h,p,g="Options"){a(h&&typeof h=="object"&&!Array.isArray(h),"Options must be of type object");const v=Object.keys(h).filter(y=>!p.includes(y));a(v.length===0,`${g} contain unknown keys: ${v}`)},s.checkPreferences=function(h){c=c||o(3378);const p=c.preferences.validate(h);if(p.error)throw new l([p.error.details[0].message])},s.compare=function(h,p,g){switch(g){case"=":return h===p;case">":return h>p;case"<":return h<p;case">=":return h>=p;case"<=":return h<=p}},s.default=function(h,p){return h===void 0?p:h},s.isIsoDate=function(h){return d.isoDate.test(h)},s.isNumber=function(h){return typeof h=="number"&&!isNaN(h)},s.isResolvable=function(h){return!!h&&(h[s.symbols.ref]||h[s.symbols.template])},s.isSchema=function(h,p={}){const g=h&&h[s.symbols.any];return!!g&&(a(p.legacy||g.version===s.version,"Cannot mix different versions of joi schemas"),!0)},s.isValues=function(h){return h[s.symbols.values]},s.limit=function(h){return Number.isSafeInteger(h)&&h>=0},s.preferences=function(h,p){f=f||o(6914),h=h||{},p=p||{};const g=Object.assign({},h,p);return p.errors&&h.errors&&(g.errors=Object.assign({},h.errors,p.errors),g.errors.wrap=Object.assign({},h.errors.wrap,p.errors.wrap)),p.messages&&(g.messages=f.compile(p.messages,h.messages)),delete g[s.symbols.prefs],g},s.tryWithPath=function(h,p,g={}){try{return h()}catch(v){throw v.path!==void 0?v.path=p+"."+v.path:v.path=p,g.append&&(v.message=`${v.message} (${v.path})`),v}},s.validateArg=function(h,p,{assert:g,message:v}){if(s.isSchema(g)){const y=g.validate(h);return y.error?y.error.message:void 0}if(!g(h))return p?`${p} ${v}`:v},s.verifyFlat=function(h,p){for(const g of h)a(!Array.isArray(g),"Method no longer accepts array arguments:",p)}},3292:(i,s,o)=>{const a=o(375),l=o(8160),u=o(6133),f={};s.schema=function(c,d,h={}){l.assertOptions(h,["appendPath","override"]);try{return f.schema(c,d,h)}catch(p){throw h.appendPath&&p.path!==void 0&&(p.message=`${p.message} (${p.path})`),p}},f.schema=function(c,d,h){a(d!==void 0,"Invalid undefined schema"),Array.isArray(d)&&(a(d.length,"Invalid empty array schema"),d.length===1&&(d=d[0]));const p=(g,...v)=>h.override!==!1?g.valid(c.override,...v):g.valid(...v);if(f.simple(d))return p(c,d);if(typeof d=="function")return c.custom(d);if(a(typeof d=="object","Invalid schema content:",typeof d),l.isResolvable(d))return p(c,d);if(l.isSchema(d))return d;if(Array.isArray(d)){for(const g of d)if(!f.simple(g))return c.alternatives().try(...d);return p(c,...d)}return d instanceof RegExp?c.string().regex(d):d instanceof Date?p(c.date(),d):(a(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),c.object().keys(d))},s.ref=function(c,d){return u.isRef(c)?c:u.create(c,d)},s.compile=function(c,d,h={}){l.assertOptions(h,["legacy"]);const p=d&&d[l.symbols.any];if(p)return a(h.legacy||p.version===l.version,"Cannot mix different versions of joi schemas:",p.version,l.version),d;if(typeof d!="object"||!h.legacy)return s.schema(c,d,{appendPath:!0});const g=f.walk(d);return g?g.compile(g.root,d):s.schema(c,d,{appendPath:!0})},f.walk=function(c){if(typeof c!="object")return null;if(Array.isArray(c)){for(const h of c){const p=f.walk(h);if(p)return p}return null}const d=c[l.symbols.any];if(d)return{root:c[d.root],compile:d.compile};a(Object.getPrototypeOf(c)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const h in c){const p=f.walk(c[h]);if(p)return p}return null},f.simple=function(c){return c===null||["boolean","string","number"].includes(typeof c)},s.when=function(c,d,h){if(h===void 0&&(a(d&&typeof d=="object","Missing options"),h=d,d=u.create(".")),Array.isArray(h)&&(h={switch:h}),l.assertOptions(h,["is","not","then","otherwise","switch","break"]),l.isSchema(d))return a(h.is===void 0,'"is" can not be used with a schema condition'),a(h.not===void 0,'"not" can not be used with a schema condition'),a(h.switch===void 0,'"switch" can not be used with a schema condition'),f.condition(c,{is:d,then:h.then,otherwise:h.otherwise,break:h.break});if(a(u.isRef(d)||typeof d=="string","Invalid condition:",d),a(h.not===void 0||h.is===void 0,'Cannot combine "is" with "not"'),h.switch===void 0){let g=h;h.not!==void 0&&(g={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let v=g.is!==void 0?c.$_compile(g.is):c.$_root.invalid(null,!1,0,"").required();return a(g.then!==void 0||g.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(g.break===void 0||g.then===void 0||g.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),h.is===void 0||u.isRef(h.is)||l.isSchema(h.is)||(v=v.required()),f.condition(c,{ref:s.ref(d),is:v,then:g.then,otherwise:g.otherwise,break:g.break})}a(Array.isArray(h.switch),'"switch" must be an array'),a(h.is===void 0,'Cannot combine "switch" with "is"'),a(h.not===void 0,'Cannot combine "switch" with "not"'),a(h.then===void 0,'Cannot combine "switch" with "then"');const p={ref:s.ref(d),switch:[],break:h.break};for(let g=0;g<h.switch.length;++g){const v=h.switch[g],y=g===h.switch.length-1;l.assertOptions(v,y?["is","then","otherwise"]:["is","then"]),a(v.is!==void 0,'Switch statement missing "is"'),a(v.then!==void 0,'Switch statement missing "then"');const b={is:c.$_compile(v.is),then:c.$_compile(v.then)};if(u.isRef(v.is)||l.isSchema(v.is)||(b.is=b.is.required()),y){a(h.otherwise===void 0||v.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const w=h.otherwise!==void 0?h.otherwise:v.otherwise;w!==void 0&&(a(p.break===void 0,"Cannot specify both otherwise and break"),b.otherwise=c.$_compile(w))}p.switch.push(b)}return p},f.condition=function(c,d){for(const h of["then","otherwise"])d[h]===void 0?delete d[h]:d[h]=c.$_compile(d[h]);return d}},6354:(i,s,o)=>{const a=o(5688),l=o(8160),u=o(3328);s.Report=class{constructor(f,c,d,h,p,g,v){if(this.code=f,this.flags=h,this.messages=p,this.path=g.path,this.prefs=v,this.state=g,this.value=c,this.message=null,this.template=null,this.local=d||{},this.local.label=s.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const y=this.path[this.path.length-1];typeof y!="object"&&(this.local.key=y)}}_setTemplate(f){if(this.template=f,!this.flags.label&&this.path.length===0){const c=this._template(this.template,"root");c&&(this.local.label=c)}}toString(){if(this.message)return this.message;const f=this.code;if(!this.prefs.errors.render)return this.code;const c=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return c===void 0?`Error code "${f}" is not defined, your custom type is missing the correct messages definition`:(this.message=c.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(f,c){return s.template(this.value,f,c||this.code,this.state,this.prefs)}},s.path=function(f){let c="";for(const d of f)typeof d!="object"&&(typeof d=="string"?(c&&(c+="."),c+=d):c+=`[${d}]`);return c},s.template=function(f,c,d,h,p){if(!c)return;if(u.isTemplate(c))return d!=="root"?c:null;let g=p.errors.language;if(l.isResolvable(g)&&(g=g.resolve(f,h,p)),g&&c[g]){if(c[g][d]!==void 0)return c[g][d];if(c[g]["*"]!==void 0)return c[g]["*"]}return c[d]?c[d]:c["*"]},s.label=function(f,c,d,h){if(!d.errors.label)return"";if(f.label)return f.label;let p=c.path;return d.errors.label==="key"&&c.path.length>1&&(p=c.path.slice(-1)),s.path(p)||s.template(null,d.messages,"root",c,d)||h&&s.template(null,h,"root",c,d)||"value"},s.process=function(f,c,d){if(!f)return null;const{override:h,message:p,details:g}=s.details(f);if(h)return h;if(d.errors.stack)return new s.ValidationError(p,g,c);const v=Error.stackTraceLimit;Error.stackTraceLimit=0;const y=new s.ValidationError(p,g,c);return Error.stackTraceLimit=v,y},s.details=function(f,c={}){let d=[];const h=[];for(const p of f){if(p instanceof Error){if(c.override!==!1)return{override:p};const v=p.toString();d.push(v),h.push({message:v,type:"override",context:{error:p}});continue}const g=p.toString();d.push(g),h.push({message:g,path:p.path.filter(v=>typeof v!="object"),type:p.code,context:p.local})}return d.length>1&&(d=[...new Set(d)]),{message:d.join(". "),details:h}},s.ValidationError=class extends Error{constructor(f,c,d){super(f),this._original=d,this.details=c}static isError(f){return f instanceof s.ValidationError}},s.ValidationError.prototype.isJoi=!0,s.ValidationError.prototype.name="ValidationError",s.ValidationError.prototype.annotate=a.error},8901:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8160),f=o(6914),c={};s.type=function(d,h){const p=Object.getPrototypeOf(d),g=l(p),v=d._assign(Object.create(g)),y=Object.assign({},h);delete y.base,g._definition=y;const b=p._definition||{};y.messages=f.merge(b.messages,y.messages),y.properties=Object.assign({},b.properties,y.properties),v.type=y.type,y.flags=Object.assign({},b.flags,y.flags);const w=Object.assign({},b.terms);if(y.terms)for(const D in y.terms){const k=y.terms[D];a(v.$_terms[D]===void 0,"Invalid term override for",y.type,D),v.$_terms[D]=k.init,w[D]=k}y.terms=w,y.args||(y.args=b.args),y.prepare=c.prepare(y.prepare,b.prepare),y.coerce&&(typeof y.coerce=="function"&&(y.coerce={method:y.coerce}),y.coerce.from&&!Array.isArray(y.coerce.from)&&(y.coerce={method:y.coerce.method,from:[].concat(y.coerce.from)})),y.coerce=c.coerce(y.coerce,b.coerce),y.validate=c.validate(y.validate,b.validate);const E=Object.assign({},b.rules);if(y.rules)for(const D in y.rules){const k=y.rules[D];a(typeof k=="object","Invalid rule definition for",y.type,D);let R=k.method;if(R===void 0&&(R=function(){return this.$_addRule(D)}),R&&(a(!g[D],"Rule conflict in",y.type,D),g[D]=R),a(!E[D],"Rule conflict in",y.type,D),E[D]=k,k.alias){const O=[].concat(k.alias);for(const B of O)g[B]=k.method}k.args&&(k.argsByName=new Map,k.args=k.args.map(O=>(typeof O=="string"&&(O={name:O}),a(!k.argsByName.has(O.name),"Duplicated argument name",O.name),u.isSchema(O.assert)&&(O.assert=O.assert.strict().label(O.name)),k.argsByName.set(O.name,O),O)))}y.rules=E;const A=Object.assign({},b.modifiers);if(y.modifiers)for(const D in y.modifiers){a(!g[D],"Rule conflict in",y.type,D);const k=y.modifiers[D];a(typeof k=="function","Invalid modifier definition for",y.type,D);const R=function(O){return this.rule({[D]:O})};g[D]=R,A[D]=k}if(y.modifiers=A,y.overrides){g._super=p,v.$_super={};for(const D in y.overrides)a(p[D],"Cannot override missing",D),y.overrides[D][u.symbols.parent]=p[D],v.$_super[D]=p[D].bind(v);Object.assign(g,y.overrides)}y.cast=Object.assign({},b.cast,y.cast);const T=Object.assign({},b.manifest,y.manifest);return T.build=c.build(y.manifest&&y.manifest.build,b.manifest&&b.manifest.build),y.manifest=T,y.rebuild=c.rebuild(y.rebuild,b.rebuild),v},c.build=function(d,h){return d&&h?function(p,g){return h(d(p,g),g)}:d||h},c.coerce=function(d,h){return d&&h?{from:d.from&&h.from?[...new Set([...d.from,...h.from])]:null,method(p,g){let v;if((!h.from||h.from.includes(typeof p))&&(v=h.method(p,g),v)){if(v.errors||v.value===void 0)return v;p=v.value}if(!d.from||d.from.includes(typeof p)){const y=d.method(p,g);if(y)return y}return v}}:d||h},c.prepare=function(d,h){return d&&h?function(p,g){const v=d(p,g);if(v){if(v.errors||v.value===void 0)return v;p=v.value}return h(p,g)||v}:d||h},c.rebuild=function(d,h){return d&&h?function(p){h(p),d(p)}:d||h},c.validate=function(d,h){return d&&h?function(p,g){const v=h(p,g);if(v){if(v.errors&&(!Array.isArray(v.errors)||v.errors.length))return v;p=v.value}return d(p,g)||v}:d||h}},5107:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8652),f=o(8160),c=o(3292),d=o(6354),h=o(8901),p=o(9708),g=o(6133),v=o(3328),y=o(1152);let b;const w={types:{alternatives:o(4946),any:o(8068),array:o(546),boolean:o(4937),date:o(7500),function:o(390),link:o(8785),number:o(3832),object:o(8966),string:o(7417),symbol:o(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const E={_types:new Set(Object.keys(w.types))};for(const A of E._types)E[A]=function(...T){return a(!T.length||["alternatives","link","object"].includes(A),"The",A,"type does not allow arguments"),w.generate(this,w.types[A],T)};for(const A of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])E[A]=function(...T){return this.any()[A](...T)};Object.assign(E,w.methods);for(const A in w.aliases){const T=w.aliases[A];E[A]=E[T]}return E.x=E.expression,y.setup&&y.setup(E),E}};w.methods={ValidationError:d.ValidationError,version:f.version,cache:u.provider,assert(E,A,...T){w.assert(E,A,!0,T)},attempt:(E,A,...T)=>w.assert(E,A,!1,T),build(E){return a(typeof p.build=="function","Manifest functionality disabled"),p.build(this,E)},checkPreferences(E){f.checkPreferences(E)},compile(E,A){return c.compile(this,E,A)},defaults(E){a(typeof E=="function","modifier must be a function");const A=Object.assign({},this);for(const T of A._types){const D=E(A[T]());a(f.isSchema(D),"modifier must return a valid schema object"),A[T]=function(...k){return w.generate(this,D,k)}}return A},expression:(...E)=>new v(...E),extend(...E){f.verifyFlat(E,"extend"),b=b||o(3378),a(E.length,"You need to provide at least one extension"),this.assert(E,b.extensions);const A=Object.assign({},this);A._types=new Set(A._types);for(let T of E){typeof T=="function"&&(T=T(A)),this.assert(T,b.extension);const D=w.expandExtension(T,A);for(const k of D){a(A[k.type]===void 0||A._types.has(k.type),"Cannot override name",k.type);const R=k.base||this.any(),O=h.type(R,k);A._types.add(k.type),A[k.type]=function(...B){return w.generate(this,O,B)}}}return A},isError:d.ValidationError.isError,isExpression:v.isTemplate,isRef:g.isRef,isSchema:f.isSchema,in:(...E)=>g.in(...E),override:f.symbols.override,ref:(...E)=>g.create(...E),types(){const E={};for(const A of this._types)E[A]=this[A]();for(const A in w.aliases)E[A]=this[A]();return E}},w.assert=function(E,A,T,D){const k=D[0]instanceof Error||typeof D[0]=="string"?D[0]:null,R=k!==null?D[1]:D[0],O=A.validate(E,f.preferences({errors:{stack:!0}},R||{}));let B=O.error;if(!B)return O.value;if(k instanceof Error)throw k;const K=T&&typeof B.annotate=="function"?B.annotate():B.message;throw B instanceof d.ValidationError==0&&(B=l(B)),B.message=k?`${k} ${K}`:K,B},w.generate=function(E,A,T){return a(E,"Must be invoked on a Joi instance."),A.$_root=E,A._definition.args&&T.length?A._definition.args(A,...T):A},w.expandExtension=function(E,A){if(typeof E.type=="string")return[E];const T=[];for(const D of A._types)if(E.type.test(D)){const k=Object.assign({},E);k.type=D,k.base=A[D](),T.push(k)}return T},i.exports=w.root()},6914:(i,s,o)=>{const a=o(375),l=o(8571),u=o(3328);s.compile=function(f,c){if(typeof f=="string")return a(!c,"Cannot set single message string"),new u(f);if(u.isTemplate(f))return a(!c,"Cannot set single message template"),f;a(typeof f=="object"&&!Array.isArray(f),"Invalid message options"),c=c?l(c):{};for(let d in f){const h=f[d];if(d==="root"||u.isTemplate(h)){c[d]=h;continue}if(typeof h=="string"){c[d]=new u(h);continue}a(typeof h=="object"&&!Array.isArray(h),"Invalid message for",d);const p=d;for(d in c[p]=c[p]||{},h){const g=h[d];d==="root"||u.isTemplate(g)?c[p][d]=g:(a(typeof g=="string","Invalid message for",d,"in",p),c[p][d]=new u(g))}}return c},s.decompile=function(f){const c={};for(let d in f){const h=f[d];if(d==="root"){c.root=h;continue}if(u.isTemplate(h)){c[d]=h.describe({compact:!0});continue}const p=d;for(d in c[p]={},h){const g=h[d];d!=="root"?c[p][d]=g.describe({compact:!0}):c[p].root=g}}return c},s.merge=function(f,c){if(!f)return s.compile(c);if(!c)return f;if(typeof c=="string")return new u(c);if(u.isTemplate(c))return c;const d=l(f);for(let h in c){const p=c[h];if(h==="root"||u.isTemplate(p)){d[h]=p;continue}if(typeof p=="string"){d[h]=new u(p);continue}a(typeof p=="object"&&!Array.isArray(p),"Invalid message for",h);const g=h;for(h in d[g]=d[g]||{},p){const v=p[h];h==="root"||u.isTemplate(v)?d[g][h]=v:(a(typeof v=="string","Invalid message for",h,"in",g),d[g][h]=new u(v))}}return d}},2294:(i,s,o)=>{const a=o(375),l=o(8160),u=o(6133),f={};s.Ids=f.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const c=new f.Ids;return c._byId=new Map(this._byId),c._byKey=new Map(this._byKey),c._schemaChain=this._schemaChain,c}concat(c){c._schemaChain&&(this._schemaChain=!0);for(const[d,h]of c._byId.entries())a(!this._byKey.has(d),"Schema id conflicts with existing key:",d),this._byId.set(d,h);for(const[d,h]of c._byKey.entries())a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,h)}fork(c,d,h){const p=this._collect(c);p.push({schema:h});const g=p.shift();let v={id:g.id,schema:d(g.schema)};a(l.isSchema(v.schema),"adjuster function failed to return a joi schema type");for(const y of p)v={id:y.id,schema:f.fork(y.schema,v.id,v.schema)};return v.schema}labels(c,d=[]){const h=c[0],p=this._get(h);if(!p)return[...d,...c].join(".");const g=c.slice(1);return d=[...d,p.schema._flags.label||h],g.length?p.schema._ids.labels(g,d):d.join(".")}reach(c,d=[]){const h=c[0],p=this._get(h);a(p,"Schema does not contain path",[...d,...c].join("."));const g=c.slice(1);return g.length?p.schema._ids.reach(g,[...d,h]):p.schema}register(c,{key:d}={}){if(!c||!l.isSchema(c))return;(c.$_property("schemaChain")||c._ids._schemaChain)&&(this._schemaChain=!0);const h=c._flags.id;if(h){const p=this._byId.get(h);a(!p||p.schema===c,"Cannot add different schemas with the same id:",h),a(!this._byKey.has(h),"Schema id conflicts with existing key:",h),this._byId.set(h,{schema:c,id:h})}d&&(a(!this._byKey.has(d),"Schema already contains key:",d),a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,{schema:c,id:d}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(c,d=[],h=[]){const p=c[0],g=this._get(p);a(g,"Schema does not contain path",[...d,...c].join(".")),h=[g,...h];const v=c.slice(1);return v.length?g.schema._ids._collect(v,[...d,p],h):h}_get(c){return this._byId.get(c)||this._byKey.get(c)}},f.fork=function(c,d,h){const p=s.schema(c,{each:(g,{key:v})=>{if(d===(g._flags.id||v))return h},ref:!1});return p?p.$_mutateRebuild():c},s.schema=function(c,d){let h;for(const p in c._flags){if(p[0]==="_")continue;const g=f.scan(c._flags[p],{source:"flags",name:p},d);g!==void 0&&(h=h||c.clone(),h._flags[p]=g)}for(let p=0;p<c._rules.length;++p){const g=c._rules[p],v=f.scan(g.args,{source:"rules",name:g.name},d);if(v!==void 0){h=h||c.clone();const y=Object.assign({},g);y.args=v,h._rules[p]=y,h._singleRules.get(g.name)===g&&h._singleRules.set(g.name,y)}}for(const p in c.$_terms){if(p[0]==="_")continue;const g=f.scan(c.$_terms[p],{source:"terms",name:p},d);g!==void 0&&(h=h||c.clone(),h.$_terms[p]=g)}return h},f.scan=function(c,d,h,p,g){const v=p||[];if(c===null||typeof c!="object")return;let y;if(Array.isArray(c)){for(let b=0;b<c.length;++b){const w=d.source==="terms"&&d.name==="keys"&&c[b].key,E=f.scan(c[b],d,h,[b,...v],w);E!==void 0&&(y=y||c.slice(),y[b]=E)}return y}if(h.schema!==!1&&l.isSchema(c)||h.ref!==!1&&u.isRef(c)){const b=h.each(c,{...d,path:v,key:g});return b===c?void 0:b}for(const b in c){if(b[0]==="_")continue;const w=f.scan(c[b],d,h,[b,...v],g);w!==void 0&&(y=y||Object.assign({},c),y[b]=w)}return y}},6133:(i,s,o)=>{const a=o(375),l=o(8571),u=o(9621),f=o(8160);let c;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};s.create=function(h,p={}){a(typeof h=="string","Invalid reference key:",h),f.assertOptions(p,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!p.prefix||typeof p.prefix=="object","options.prefix must be of type object");const g=Object.assign({},d.defaults,p);delete g.prefix;const v=g.separator,y=d.context(h,v,p.prefix);if(g.type=y.type,h=y.key,g.type==="value")if(y.root&&(a(!v||h[0]!==v,"Cannot specify relative path with root prefix"),g.ancestor="root",h||(h=null)),v&&v===h)h=null,g.ancestor=0;else if(g.ancestor!==void 0)a(!v||!h||h[0]!==v,"Cannot combine prefix with ancestor option");else{const[b,w]=d.ancestor(h,v);w&&(h=h.slice(w))===""&&(h=null),g.ancestor=b}return g.path=v?h===null?[]:h.split(v):[h],new d.Ref(g)},s.in=function(h,p={}){return s.create(h,{...p,in:!0})},s.isRef=function(h){return!!h&&!!h[f.symbols.ref]},d.Ref=class{constructor(h){a(typeof h=="object","Invalid reference construction"),f.assertOptions(h,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(h.separator)||typeof h.separator=="string"&&h.separator.length===1,"Invalid separator"),a(!h.adjust||typeof h.adjust=="function","options.adjust must be a function"),a(!h.map||Array.isArray(h.map),"options.map must be an array"),a(!h.map||!h.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,h),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(h,p,g,v,y={}){return a(!this.in||y.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(g.context,p,y):this.type==="local"?this._resolve(v,p,y):this.ancestor?this.ancestor==="root"?this._resolve(p.ancestors[p.ancestors.length-1],p,y):(a(this.ancestor<=p.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(p.ancestors[this.ancestor-1],p,y)):this._resolve(h,p,y)}_resolve(h,p,g){let v;if(this.type==="value"&&p.mainstay.shadow&&g.shadow!==!1&&(v=p.mainstay.shadow.get(this.absolute(p))),v===void 0&&(v=u(h,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(v=this.adjust(v)),this.map){const y=this.map.get(v);y!==void 0&&(v=y)}return p.mainstay&&p.mainstay.tracer.resolve(p,this,v),v}toString(){return this.display}absolute(h){return[...h.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const h={path:this.path};this.type!=="value"&&(h.type=this.type),this.separator!=="."&&(h.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(h.ancestor=this.ancestor),this.map&&(h.map=[...this.map]);for(const p of["adjust","iterables","render"])this[p]!==null&&this[p]!==void 0&&(h[p]=this[p]);return this.in!==!1&&(h.in=!0),{ref:h}}updateDisplay(){const h=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${h}`);if(!this.separator)return void(this.display=`ref:${h}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${h}`);if(this.ancestor==="root")return void(this.display=`ref:root:${h}`);if(this.ancestor===1)return void(this.display=`ref:${h||".."}`);const p=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${p}${h||""}`}},d.Ref.prototype[f.symbols.ref]=!0,s.build=function(h){return(h=Object.assign({},d.defaults,h)).type==="value"&&h.ancestor===void 0&&(h.ancestor=1),new d.Ref(h)},d.context=function(h,p,g={}){if(h=h.trim(),g){const v=g.global===void 0?"$":g.global;if(v!==p&&h.startsWith(v))return{key:h.slice(v.length),type:"global"};const y=g.local===void 0?"#":g.local;if(y!==p&&h.startsWith(y))return{key:h.slice(y.length),type:"local"};const b=g.root===void 0?"/":g.root;if(b!==p&&h.startsWith(b))return{key:h.slice(b.length),type:"value",root:!0}}return{key:h,type:"value"}},d.ancestor=function(h,p){if(!p)return[1,0];if(h[0]!==p)return[1,0];if(h[1]!==p)return[0,1];let g=2;for(;h[g]===p;)++g;return[g-1,g]},s.toSibling=0,s.toParent=1,s.Manager=class{constructor(){this.refs=[]}register(h,p){if(h)if(p=p===void 0?s.toParent:p,Array.isArray(h))for(const g of h)this.register(g,p);else if(f.isSchema(h))for(const g of h._refs.refs)g.ancestor-p>=0&&this.refs.push({ancestor:g.ancestor-p,root:g.root});else s.isRef(h)&&h.type==="value"&&h.ancestor-p>=0&&this.refs.push({ancestor:h.ancestor-p,root:h.root}),c=c||o(3328),c.isTemplate(h)&&this.register(h.refs(),p)}get length(){return this.refs.length}clone(){const h=new s.Manager;return h.refs=l(this.refs),h}reset(){this.refs=[]}roots(){return this.refs.filter(h=>!h.ancestor).map(h=>h.root)}}},3378:(i,s,o)=>{const a=o(5107),l={};l.wrap=a.string().min(1).max(2).allow(!1),s.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=a.object({alias:a.array().items(a.string().pattern(l.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(l.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),s.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(l.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(l.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(l.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(l.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(l.nameRx,l.rule),terms:a.object().pattern(l.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),s.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),l.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},l.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,a.link("/")]),l.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=a.object().pattern(/.+/,[a.string(),l.desc.template,a.object().pattern(/.+/,[a.string(),l.desc.template])]),s.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:l.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:a.boolean(),messages:l.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),l.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(i,s,o)=>{const a=o(8571),l=o(9621),u=o(8160),f={value:Symbol("value")};i.exports=f.State=class{constructor(c,d,h){this.path=c,this.ancestors=d,this.mainstay=h.mainstay,this.schemas=h.schemas,this.debug=null}localize(c,d=null,h=null){const p=new f.State(c,d,this);return h&&p.schemas&&(p.schemas=[f.schemas(h),...p.schemas]),p}nest(c,d){const h=new f.State(this.path,this.ancestors,this);return h.schemas=h.schemas&&[f.schemas(c),...h.schemas],h.debug=d,h}shadow(c,d){this.mainstay.shadow=this.mainstay.shadow||new f.Shadow,this.mainstay.shadow.set(this.path,c,d)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},f.schemas=function(c){return u.isSchema(c)?{schema:c}:c},f.Shadow=class{constructor(){this._values=null}set(c,d,h){if(!c.length||h==="strip"&&typeof c[c.length-1]=="number")return;this._values=this._values||new Map;let p=this._values;for(let g=0;g<c.length;++g){const v=c[g];let y=p.get(v);y||(y=new Map,p.set(v,y)),p=y}p[f.value]=d}get(c){const d=this.node(c);if(d)return d[f.value]}node(c){if(this._values)return l(this._values,c,{iterables:!0})}override(c,d){if(!this._values)return;const h=c.slice(0,-1),p=c[c.length-1],g=l(this._values,h,{iterables:!0});d?g.set(p,d):g&&g.delete(p)}}},3328:(i,s,o)=>{const a=o(375),l=o(8571),u=o(5277),f=o(1447),c=o(8160),d=o(6354),h=o(6133),p={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};i.exports=p.Template=class{constructor(g,v){if(a(typeof g=="string","Template source must be a string"),a(!g.includes("\0")&&!g.includes(""),"Template source cannot contain reserved control characters"),this.source=g,this.rendered=g,this._template=null,v){const{functions:y,...b}=v;this._settings=Object.keys(b).length?l(b):void 0,this._functions=y,this._functions&&(a(Object.keys(this._functions).every(w=>typeof w=="string"),"Functions keys must be strings"),a(Object.values(this._functions).every(w=>typeof w=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const g=p.encode(this.source),v=p.split(g);let y=!1;const b=[],w=v.shift();w&&b.push(w);for(const E of v){const A=E[0]!=="{",T=A?"}":"}}",D=E.indexOf(T);if(D===-1||E[1]==="{"){b.push(`{${p.decode(E)}`);continue}let k=E.slice(A?0:1,D);const R=k[0]===":";R&&(k=k.slice(1));const O=this._ref(p.decode(k),{raw:A,wrapped:R});b.push(O),typeof O!="string"&&(y=!0);const B=E.slice(D+T.length);B&&b.push(p.decode(B))}y?this._template=b:this.rendered=b.join("")}static date(g,v){return p.dateFormat[v.dateFormat].call(g)}describe(g={}){if(!this._settings&&g.compact)return this.source;const v={template:this.source};return this._settings&&(v.options=this._settings),this._functions&&(v.functions=this._functions),v}static build(g){return new p.Template(g.template,g.options||g.functions?{...g.options,functions:g.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(g){return!!g&&!!g[c.symbols.template]}refs(){if(!this._template)return;const g=[];for(const v of this._template)typeof v!="string"&&g.push(...v.refs);return g}resolve(g,v,y,b){return this._template&&this._template.length===1?this._part(this._template[0],g,v,y,b,{}):this.render(g,v,y,b)}_part(g,...v){return g.ref?g.ref.resolve(...v):g.formula.evaluate(v)}render(g,v,y,b,w={}){if(!this.isDynamic())return this.rendered;const E=[];for(const A of this._template)if(typeof A=="string")E.push(A);else{const T=this._part(A,g,v,y,b,w),D=p.stringify(T,g,v,y,b,w);if(D!==void 0){const k=A.raw||(w.errors&&w.errors.escapeHtml)===!1?D:u(D);E.push(p.wrap(k,A.wrapped&&y.errors.wrap.label))}}return E.join("")}_ref(g,{raw:v,wrapped:y}){const b=[],w=A=>{const T=h.create(A,this._settings);return b.push(T),D=>{const k=T.resolve(...D);return k!==void 0?k:null}};try{const A=this._functions?{...p.functions,...this._functions}:p.functions;var E=new f.Parser(g,{reference:w,functions:A,constants:p.constants})}catch(A){throw A.message=`Invalid template variable "${g}" fails due to: ${A.message}`,A}if(E.single){if(E.single.type==="reference"){const A=b[0];return{ref:A,raw:v,refs:b,wrapped:y||A.type==="local"&&A.key==="label"}}return p.stringify(E.single.value)}return{formula:E,raw:v,refs:b}}toString(){return this.source}},p.Template.prototype[c.symbols.template]=!0,p.Template.prototype.isImmutable=!0,p.encode=function(g){return g.replace(/\\(\{+)/g,(v,y)=>p.opens.slice(0,y.length)).replace(/\\(\}+)/g,(v,y)=>p.closes.slice(0,y.length))},p.decode=function(g){return g.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},p.split=function(g){const v=[];let y="";for(let b=0;b<g.length;++b){const w=g[b];if(w==="{"){let E="";for(;b+1<g.length&&g[b+1]==="{";)E+="{",++b;v.push(y),y=E}else y+=w}return v.push(y),v},p.wrap=function(g,v){return v?v.length===1?`${v}${g}${v}`:`${v[0]}${g}${v[1]}`:g},p.stringify=function(g,v,y,b,w,E={}){const A=typeof g,T=b&&b.errors&&b.errors.wrap||{};let D=!1;if(h.isRef(g)&&g.render&&(D=g.in,g=g.resolve(v,y,b,w,{in:g.in,...E})),g===null)return"null";if(A==="string")return p.wrap(g,E.arrayItems&&T.string);if(A==="number"||A==="function"||A==="symbol")return g.toString();if(A!=="object")return JSON.stringify(g);if(g instanceof Date)return p.Template.date(g,b);if(g instanceof Map){const R=[];for(const[O,B]of g.entries())R.push(`${O.toString()} -> ${B.toString()}`);g=R}if(!Array.isArray(g))return g.toString();const k=[];for(const R of g)k.push(p.stringify(R,v,y,b,w,{arrayItems:!0,...E}));return p.wrap(k.join(", "),!D&&T.array)},p.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},p.functions={if:(g,v,y)=>g?v:y,length:g=>typeof g=="string"?g.length:g&&typeof g=="object"?Array.isArray(g)?g.length:Object.keys(g).length:null,msg(g){const[v,y,b,w,E]=this,A=E.messages;if(!A)return"";const T=d.template(v,A[0],g,y,b)||d.template(v,A[1],g,y,b);return T?T.render(v,y,b,w,E):""},number:g=>typeof g=="number"?g:typeof g=="string"?parseFloat(g):typeof g=="boolean"?g?1:0:g instanceof Date?g.getTime():null}},4946:(i,s,o)=>{const a=o(375),l=o(1687),u=o(8068),f=o(8160),c=o(3292),d=o(6354),h=o(6133),p={};i.exports=u.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:h.toSibling}},args:(g,...v)=>v.length===1&&Array.isArray(v[0])?g.try(...v[0]):g.try(...v),validate(g,v){const{schema:y,error:b,state:w,prefs:E}=v;if(y._flags.match){const T=[],D=[];for(let R=0;R<y.$_terms.matches.length;++R){const O=y.$_terms.matches[R],B=w.nest(O.schema,`match.${R}`);B.snapshot();const K=O.schema.$_validate(g,B,E);K.errors?(D.push(K.errors),B.restore()):(T.push(K.value),B.commit())}if(T.length===0)return{errors:b("alternatives.any",{details:D.map(R=>d.details(R,{override:!1}))})};if(y._flags.match==="one")return T.length===1?{value:T[0]}:{errors:b("alternatives.one")};if(T.length!==y.$_terms.matches.length)return{errors:b("alternatives.all",{details:D.map(R=>d.details(R,{override:!1}))})};const k=R=>R.$_terms.matches.some(O=>O.schema.type==="object"||O.schema.type==="alternatives"&&k(O.schema));return k(y)?{value:T.reduce((R,O)=>l(R,O,{mergeArrays:!1}))}:{value:T[T.length-1]}}const A=[];for(let T=0;T<y.$_terms.matches.length;++T){const D=y.$_terms.matches[T];if(D.schema){const O=w.nest(D.schema,`match.${T}`);O.snapshot();const B=D.schema.$_validate(g,O,E);if(!B.errors)return O.commit(),B;O.restore(),A.push({schema:D.schema,reports:B.errors});continue}const k=D.ref?D.ref.resolve(g,w,E):g,R=D.is?[D]:D.switch;for(let O=0;O<R.length;++O){const B=R[O],{is:K,then:L,otherwise:$}=B,I=`match.${T}${D.switch?"."+O:""}`;if(K.$_match(k,w.nest(K,`${I}.is`),E)){if(L)return L.$_validate(g,w.nest(L,`${I}.then`),E)}else if($)return $.$_validate(g,w.nest($,`${I}.otherwise`),E)}}return p.errors(A,v)},rules:{conditional:{method(g,v){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(v.break===void 0,"Cannot use break option with alternatives conditional");const y=this.clone(),b=c.when(y,g,v),w=b.is?[b]:b.switch;for(const E of w)if(E.then&&E.otherwise){y.$_setFlag("_endedSwitch",!0,{clone:!1});break}return y.$_terms.matches.push(b),y.$_mutateRebuild()}},match:{method(g){if(a(["any","one","all"].includes(g),"Invalid alternatives match mode",g),g!=="any")for(const v of this.$_terms.matches)a(v.schema,"Cannot combine match mode",g,"with conditional rules");return this.$_setFlag("match",g)}},try:{method(...g){a(g.length,"Missing alternative schemas"),f.verifyFlat(g,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const v=this.clone();for(const y of g)v.$_terms.matches.push({schema:v.$_compile(y)});return v.$_mutateRebuild()}}},overrides:{label(g){return this.$_parent("label",g).$_modify({each:(v,y)=>y.path[0]!=="is"&&typeof v._flags.label!="string"?v.label(g):void 0,ref:!1})}},rebuild(g){g.$_modify({each:v=>{f.isSchema(v)&&v.type==="array"&&g.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(g,v){if(v.matches)for(const y of v.matches){const{schema:b,ref:w,is:E,not:A,then:T,otherwise:D}=y;g=b?g.try(b):w?g.conditional(w,{is:E,then:T,not:A,otherwise:D,switch:y.switch}):g.conditional(E,{then:T,otherwise:D})}return g}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),p.errors=function(g,{error:v,state:y}){if(!g.length)return{errors:v("alternatives.any")};if(g.length===1)return{errors:g[0].reports};const b=new Set,w=[];for(const{reports:E,schema:A}of g){if(E.length>1)return p.unmatched(g,v);const T=E[0];if(T instanceof d.Report==0)return p.unmatched(g,v);if(T.state.path.length!==y.path.length){w.push({type:A.type,report:T});continue}if(T.code==="any.only"){for(const R of T.local.valids)b.add(R);continue}const[D,k]=T.code.split(".");k!=="base"?w.push({type:A.type,report:T}):T.code==="object.base"?b.add(T.local.type):b.add(D)}return w.length?w.length===1?{errors:w[0].report}:p.unmatched(g,v):{errors:v("alternatives.types",{types:[...b]})}},p.unmatched=function(g,v){const y=[];for(const b of g)y.push(...b.reports);return{errors:v("alternatives.match",d.details(y,{override:!1}))}}},8068:(i,s,o)=>{const a=o(375),l=o(7629),u=o(8160),f=o(6914);i.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(c,d){return a(typeof c=="function","Method must be a function"),a(d===void 0||d&&typeof d=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:c,description:d}})},validate(c,d,{method:h}){try{return h(c,d)}catch(p){return d.error("any.custom",{error:p})}},args:["method","description"],multi:!0},messages:{method(c){return this.prefs({messages:c})}},shared:{method(c){a(u.isSchema(c)&&c._flags.id,"Schema must be a schema with an id");const d=this.clone();return d.$_terms.shared=d.$_terms.shared||[],d.$_terms.shared.push(c),d.$_mutateRegister(c),d}},warning:{method(c,d){return a(c&&typeof c=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:c,local:d},warn:!0})},validate:(c,d,{code:h,local:p})=>d.error(h,p),args:["code","local"],multi:!0}},modifiers:{keep(c,d=!0){c.keep=d},message(c,d){c.message=f.compile(d)},warn(c,d=!0){c.warn=d}},manifest:{build(c,d){for(const h in d){const p=d[h];if(["examples","externals","metas","notes","tags"].includes(h))for(const g of p)c=c[h.slice(0,-1)](g);else if(h!=="alterations")if(h!=="whens"){if(h==="shared")for(const g of p)c=c.shared(g)}else for(const g of p){const{ref:v,is:y,not:b,then:w,otherwise:E,concat:A}=g;c=A?c.concat(A):v?c.when(v,{is:y,not:b,then:w,otherwise:E,switch:g.switch,break:g.break}):c.when(y,{then:w,otherwise:E,break:g.break})}else{const g={};for(const{target:v,adjuster:y}of p)g[v]=y;c=c.alter(g)}}return c}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(i,s,o)=>{const a=o(375),l=o(9474),u=o(9621),f=o(8068),c=o(8160),d=o(3292),h={};i.exports=f.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(p,{schema:g,state:v,prefs:y}){if(!Array.isArray(p))return;const b=g.$_getRule("sort");return b?h.sort(g,p,b.args.options,v,y):void 0}},validate(p,{schema:g,error:v}){if(!Array.isArray(p)){if(g._flags.single){const y=[p];return y[c.symbols.arraySingle]=!0,{value:y}}return{errors:v("array.base")}}if(g.$_getRule("items")||g.$_terms.externals)return{value:p.slice()}},rules:{has:{method(p){p=this.$_compile(p,{appendPath:!0});const g=this.$_addRule({name:"has",args:{schema:p}});return g.$_mutateRegister(p),g},validate(p,{state:g,prefs:v,error:y},{schema:b}){const w=[p,...g.ancestors];for(let A=0;A<p.length;++A){const T=g.localize([...g.path,A],w,b);if(b.$_match(p[A],T,v))return p}const E=b._flags.label;return E?y("array.hasKnown",{patternLabel:E}):y("array.hasUnknown",null)},multi:!0},items:{method(...p){c.verifyFlat(p,"items");const g=this.$_addRule("items");for(let v=0;v<p.length;++v){const y=c.tryWithPath(()=>this.$_compile(p[v]),v,{append:!0});g.$_terms.items.push(y)}return g.$_mutateRebuild()},validate(p,{schema:g,error:v,state:y,prefs:b,errorsArray:w}){const E=g.$_terms._requireds.slice(),A=g.$_terms.ordered.slice(),T=[...g.$_terms._inclusions,...E],D=!p[c.symbols.arraySingle];delete p[c.symbols.arraySingle];const k=w();let R=p.length;for(let O=0;O<R;++O){const B=p[O];let K=!1,L=!1;const $=D?O:new Number(O),I=[...y.path,$];if(!g._flags.sparse&&B===void 0){if(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},y.localize(I))),b.abortEarly)return k;A.shift();continue}const U=[p,...y.ancestors];for(const te of g.$_terms._exclusions)if(te.$_match(B,y.localize(I,U,te),b,{presence:"ignore"})){if(k.push(v("array.excludes",{pos:O,value:B},y.localize(I))),b.abortEarly)return k;K=!0,A.shift();break}if(K)continue;if(g.$_terms.ordered.length){if(A.length){const te=A.shift(),le=te.$_validate(B,y.localize(I,U,te),b);if(le.errors){if(k.push(...le.errors),b.abortEarly)return k}else if(te._flags.result==="strip")h.fastSplice(p,O),--O,--R;else{if(!g._flags.sparse&&le.value===void 0){if(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},y.localize(I))),b.abortEarly)return k;continue}p[O]=le.value}continue}if(!g.$_terms.items.length){if(k.push(v("array.orderedLength",{pos:O,limit:g.$_terms.ordered.length})),b.abortEarly)return k;break}}const q=[];let Y=E.length;for(let te=0;te<Y;++te){const le=y.localize(I,U,E[te]);le.snapshot();const ee=E[te].$_validate(B,le,b);if(q[te]=ee,!ee.errors){if(le.commit(),p[O]=ee.value,L=!0,h.fastSplice(E,te),--te,--Y,!g._flags.sparse&&ee.value===void 0&&(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},y.localize(I))),b.abortEarly))return k;break}le.restore()}if(L)continue;const X=b.stripUnknown&&!!b.stripUnknown.arrays||!1;Y=T.length;for(const te of T){let le;const ee=E.indexOf(te);if(ee!==-1)le=q[ee];else{const z=y.localize(I,U,te);if(z.snapshot(),le=te.$_validate(B,z,b),!le.errors){z.commit(),te._flags.result==="strip"?(h.fastSplice(p,O),--O,--R):g._flags.sparse||le.value!==void 0?p[O]=le.value:(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},y.localize(I))),K=!0),L=!0;break}z.restore()}if(Y===1){if(X){h.fastSplice(p,O),--O,--R,L=!0;break}if(k.push(...le.errors),b.abortEarly)return k;K=!0;break}}if(!K&&(g.$_terms._inclusions.length||g.$_terms._requireds.length)&&!L){if(X){h.fastSplice(p,O),--O,--R;continue}if(k.push(v("array.includes",{pos:O,value:B},y.localize(I))),b.abortEarly)return k}}return E.length&&h.fillMissedErrors(g,k,E,p,y,b),A.length&&(h.fillOrderedErrors(g,k,A,p,y,b),k.length||h.fillDefault(A,p,y,b)),k.length?k:p},priority:!0,manifest:!1},length:{method(p){return this.$_addRule({name:"length",args:{limit:p},operator:"="})},validate:(p,g,{limit:v},{name:y,operator:b,args:w})=>c.compare(p.length,v,b)?p:g.error("array."+y,{limit:w.limit,value:p}),args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"}]},max:{method(p){return this.$_addRule({name:"max",method:"length",args:{limit:p},operator:"<="})}},min:{method(p){return this.$_addRule({name:"min",method:"length",args:{limit:p},operator:">="})}},ordered:{method(...p){c.verifyFlat(p,"ordered");const g=this.$_addRule("items");for(let v=0;v<p.length;++v){const y=c.tryWithPath(()=>this.$_compile(p[v]),v,{append:!0});h.validateSingle(y,g),g.$_mutateRegister(y),g.$_terms.ordered.push(y)}return g.$_mutateRebuild()}},single:{method(p){const g=p===void 0||!!p;return a(!g||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",g)}},sort:{method(p={}){c.assertOptions(p,["by","order"]);const g={order:p.order||"ascending"};return p.by&&(g.by=d.ref(p.by,{ancestor:0}),a(!g.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:g}})},validate(p,{error:g,state:v,prefs:y,schema:b},{options:w}){const{value:E,errors:A}=h.sort(b,p,w,v,y);if(A)return A;for(let T=0;T<p.length;++T)if(p[T]!==E[T])return g("array.sort",{order:w.order,by:w.by?w.by.key:"value"});return p},convert:!0},sparse:{method(p){const g=p===void 0||!!p;return this._flags.sparse===g?this:(g?this.clone():this.$_addRule("items")).$_setFlag("sparse",g,{clone:!1})}},unique:{method(p,g={}){a(!p||typeof p=="function"||typeof p=="string","comparator must be a function or a string"),c.assertOptions(g,["ignoreUndefined","separator"]);const v={name:"unique",args:{options:g,comparator:p}};if(p)if(typeof p=="string"){const y=c.default(g.separator,".");v.path=y?p.split(y):[p]}else v.comparator=p;return this.$_addRule(v)},validate(p,{state:g,error:v,schema:y},{comparator:b,options:w},{comparator:E,path:A}){const T={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},D=E||l,k=w.ignoreUndefined;for(let R=0;R<p.length;++R){const O=A?u(p[R],A):p[R],B=E?T.custom:T[typeof O];if(a(B,"Failed to find unique map container for type",typeof O),B instanceof Map){const K=B.entries();let L;for(;!(L=K.next()).done;)if(D(L.value[0],O)){const $=g.localize([...g.path,R],[p,...g.ancestors]),I={pos:R,value:p[R],dupePos:L.value[1],dupeValue:p[L.value[1]]};return A&&(I.path=b),v("array.unique",I,$)}B.set(O,R)}else{if((!k||O!==void 0)&&B[O]!==void 0){const K={pos:R,value:p[R],dupePos:B[O],dupeValue:p[B[O]]};return A&&(K.path=b),v("array.unique",K,g.localize([...g.path,R],[p,...g.ancestors]))}B[O]=R}}return p},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(p,g)=>new Set(p)}},rebuild(p){p.$_terms._inclusions=[],p.$_terms._exclusions=[],p.$_terms._requireds=[];for(const g of p.$_terms.items)h.validateSingle(g,p),g._flags.presence==="required"?p.$_terms._requireds.push(g):g._flags.presence==="forbidden"?p.$_terms._exclusions.push(g):p.$_terms._inclusions.push(g);for(const g of p.$_terms.ordered)h.validateSingle(g,p)},manifest:{build:(p,g)=>(g.items&&(p=p.items(...g.items)),g.ordered&&(p=p.ordered(...g.ordered)),p)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),h.fillMissedErrors=function(p,g,v,y,b,w){const E=[];let A=0;for(const T of v){const D=T._flags.label;D?E.push(D):++A}E.length?A?g.push(p.$_createError("array.includesRequiredBoth",y,{knownMisses:E,unknownMisses:A},b,w)):g.push(p.$_createError("array.includesRequiredKnowns",y,{knownMisses:E},b,w)):g.push(p.$_createError("array.includesRequiredUnknowns",y,{unknownMisses:A},b,w))},h.fillOrderedErrors=function(p,g,v,y,b,w){const E=[];for(const A of v)A._flags.presence==="required"&&E.push(A);E.length&&h.fillMissedErrors(p,g,E,y,b,w)},h.fillDefault=function(p,g,v,y){const b=[];let w=!0;for(let E=p.length-1;E>=0;--E){const A=p[E],T=[g,...v.ancestors],D=A.$_validate(void 0,v.localize(v.path,T,A),y).value;if(w){if(D===void 0)continue;w=!1}b.unshift(D)}b.length&&g.push(...b)},h.fastSplice=function(p,g){let v=g;for(;v<p.length;)p[v++]=p[v];--p.length},h.validateSingle=function(p,g){(p.type==="array"||p._flags._arrayItems)&&(a(!g._flags.single,"Cannot specify array item with single rule enabled"),g.$_setFlag("_arrayItems",!0,{clone:!1}))},h.sort=function(p,g,v,y,b){const w=v.order==="ascending"?1:-1,E=-1*w,A=w,T=(D,k)=>{let R=h.compare(D,k,E,A);if(R!==null||(v.by&&(D=v.by.resolve(D,y,b),k=v.by.resolve(k,y,b)),R=h.compare(D,k,E,A),R!==null))return R;const O=typeof D;if(O!==typeof k)throw p.$_createError("array.sort.mismatching",g,null,y,b);if(O!=="number"&&O!=="string")throw p.$_createError("array.sort.unsupported",g,{type:O},y,b);return O==="number"?(D-k)*w:D<k?E:A};try{return{value:g.slice().sort(T)}}catch(D){return{errors:D}}},h.compare=function(p,g,v,y){return p===g?0:p===void 0?1:g===void 0?-1:p===null?y:g===null?v:null}},4937:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f=o(2036),c={isBool:function(d){return typeof d=="boolean"}};i.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(d,{schema:h}){if(typeof d!="boolean"){if(typeof d=="string"){const p=h._flags.sensitive?d:d.toLowerCase();d=p==="true"||p!=="false"&&d}return typeof d!="boolean"&&(d=h.$_terms.truthy&&h.$_terms.truthy.has(d,null,null,!h._flags.sensitive)||(!h.$_terms.falsy||!h.$_terms.falsy.has(d,null,null,!h._flags.sensitive))&&d),{value:d}}},validate(d,{error:h}){if(typeof d!="boolean")return{value:d,errors:h("boolean.base")}},rules:{truthy:{method(...d){u.verifyFlat(d,"truthy");const h=this.clone();h.$_terms.truthy=h.$_terms.truthy||new f;for(let p=0;p<d.length;++p){const g=d[p];a(g!==void 0,"Cannot call truthy with undefined"),h.$_terms.truthy.add(g)}return h}},falsy:{method(...d){u.verifyFlat(d,"falsy");const h=this.clone();h.$_terms.falsy=h.$_terms.falsy||new f;for(let p=0;p<d.length;++p){const g=d[p];a(g!==void 0,"Cannot call falsy with undefined"),h.$_terms.falsy.add(g)}return h}},sensitive:{method(d=!0){return this.$_setFlag("sensitive",d)}}},cast:{number:{from:c.isBool,to:(d,h)=>d?1:0},string:{from:c.isBool,to:(d,h)=>d?"true":"false"}},manifest:{build:(d,h)=>(h.truthy&&(d=d.truthy(...h.truthy)),h.falsy&&(d=d.falsy(...h.falsy)),d)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f=o(3328),c={isDate:function(d){return d instanceof Date}};i.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(d,{schema:h})=>({value:c.parse(d,h._flags.format)||d})},validate(d,{schema:h,error:p,prefs:g}){if(d instanceof Date&&!isNaN(d.getTime()))return;const v=h._flags.format;return g.convert&&v&&typeof d=="string"?{value:d,errors:p("date.format",{format:v})}:{value:d,errors:p("date.base")}},rules:{compare:{method:!1,validate(d,h,{date:p},{name:g,operator:v,args:y}){const b=p==="now"?Date.now():p.getTime();return u.compare(d.getTime(),b,v)?d:h.error("date."+g,{limit:y.date,value:d})},args:[{name:"date",ref:!0,normalize:d=>d==="now"?d:c.parse(d),assert:d=>d!==null,message:"must have a valid date format"}]},format:{method(d){return a(["iso","javascript","unix"].includes(d),"Unknown date format",d),this.$_setFlag("format",d)}},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{date:d},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{date:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{date:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{date:d},operator:">="})}},timestamp:{method(d="javascript"){return a(["javascript","unix"].includes(d),'"type" must be one of "javascript, unix"'),this.format(d)}}},cast:{number:{from:c.isDate,to:(d,h)=>d.getTime()},string:{from:c.isDate,to:(d,{prefs:h})=>f.date(d,h)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),c.parse=function(d,h){if(d instanceof Date)return d;if(typeof d!="string"&&(isNaN(d)||!isFinite(d))||/^\s*$/.test(d))return null;if(h==="iso")return u.isIsoDate(d)?c.date(d.toString()):null;const p=d;if(typeof d=="string"&&/^[+-]?\d+(\.\d+)?$/.test(d)&&(d=parseFloat(d)),h){if(h==="javascript")return c.date(1*d);if(h==="unix")return c.date(1e3*d);if(typeof p=="string")return null}return c.date(d)},c.date=function(d){const h=new Date(d);return isNaN(h.getTime())?null:h}},390:(i,s,o)=>{const a=o(375),l=o(7824);i.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:u}})},validate:(u,f,{n:c})=>u.length===c?u:f.error("function.arity",{n:c})},class:{method(){return this.$_addRule("class")},validate:(u,f)=>/^\s*class\s/.test(u.toString())?u:f.error("function.class",{value:u})},minArity:{method(u){return a(Number.isSafeInteger(u)&&u>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length>=c?u:f.error("function.minArity",{n:c})},maxArity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length<=c?u:f.error("function.maxArity",{n:c})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(i,s,o)=>{const a=o(978),l=o(375),u=o(8571),f=o(3652),c=o(8068),d=o(8160),h=o(3292),p=o(6354),g=o(6133),v=o(3328),y={renameDefaults:{alias:!1,multiple:!1,override:!1}};i.exports=c.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(b,w)=>b.keys(w),validate(b,{schema:w,error:E,state:A,prefs:T}){if(!b||typeof b!==w.$_property("typeof")||Array.isArray(b))return{value:b,errors:E("object.base",{type:w.$_property("typeof")})};if(!(w.$_terms.renames||w.$_terms.dependencies||w.$_terms.keys||w.$_terms.patterns||w.$_terms.externals))return;b=y.clone(b,T);const D=[];if(w.$_terms.renames&&!y.rename(w,b,A,T,D))return{value:b,errors:D};if(!w.$_terms.keys&&!w.$_terms.patterns&&!w.$_terms.dependencies)return{value:b,errors:D};const k=new Set(Object.keys(b));if(w.$_terms.keys){const R=[b,...A.ancestors];for(const O of w.$_terms.keys){const B=O.key,K=b[B];k.delete(B);const L=A.localize([...A.path,B],R,O),$=O.schema.$_validate(K,L,T);if($.errors){if(T.abortEarly)return{value:b,errors:$.errors};$.value!==void 0&&(b[B]=$.value),D.push(...$.errors)}else O.schema._flags.result==="strip"||$.value===void 0&&K!==void 0?delete b[B]:$.value!==void 0&&(b[B]=$.value)}}if(k.size||w._flags._hasPatternMatch){const R=y.unknown(w,b,k,D,A,T);if(R)return R}if(w.$_terms.dependencies)for(const R of w.$_terms.dependencies){if(R.key!==null&&y.isPresent(R.options)(R.key.resolve(b,A,T,null,{shadow:!1}))===!1)continue;const O=y.dependencies[R.rel](w,R,b,A,T);if(O){const B=w.$_createError(O.code,b,O.context,A,T);if(T.abortEarly)return{value:b,errors:B};D.push(B)}}return{value:b,errors:D}},rules:{and:{method(...b){return d.verifyFlat(b,"and"),y.dependency(this,"and",null,b)}},append:{method(b){return b==null||Object.keys(b).length===0?this:this.keys(b)}},assert:{method(b,w,E){v.isTemplate(b)||(b=h.ref(b)),l(E===void 0||typeof E=="string","Message must be a string"),w=this.$_compile(w,{appendPath:!0});const A=this.$_addRule({name:"assert",args:{subject:b,schema:w,message:E}});return A.$_mutateRegister(b),A.$_mutateRegister(w),A},validate(b,{error:w,prefs:E,state:A},{subject:T,schema:D,message:k}){const R=T.resolve(b,A,E),O=g.isRef(T)?T.absolute(A):[];return D.$_match(R,A.localize(O,[b,...A.ancestors],D),E)?b:w("object.assert",{subject:T,message:k})},args:["subject","schema","message"],multi:!0},instance:{method(b,w){return l(typeof b=="function","constructor must be a function"),w=w||b.name,this.$_addRule({name:"instance",args:{constructor:b,name:w}})},validate:(b,w,{constructor:E,name:A})=>b instanceof E?b:w.error("object.instance",{type:A,value:b}),args:["constructor","name"]},keys:{method(b){l(b===void 0||typeof b=="object","Object schema must be a valid object"),l(!d.isSchema(b),"Object schema cannot be a joi schema");const w=this.clone();if(b)if(Object.keys(b).length){w.$_terms.keys=w.$_terms.keys?w.$_terms.keys.filter(E=>!b.hasOwnProperty(E.key)):new y.Keys;for(const E in b)d.tryWithPath(()=>w.$_terms.keys.push({key:E,schema:this.$_compile(b[E])}),E)}else w.$_terms.keys=new y.Keys;else w.$_terms.keys=null;return w.$_mutateRebuild()}},length:{method(b){return this.$_addRule({name:"length",args:{limit:b},operator:"="})},validate:(b,w,{limit:E},{name:A,operator:T,args:D})=>d.compare(Object.keys(b).length,E,T)?b:w.error("object."+A,{limit:D.limit,value:b}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(b){return this.$_addRule({name:"max",method:"length",args:{limit:b},operator:"<="})}},min:{method(b){return this.$_addRule({name:"min",method:"length",args:{limit:b},operator:">="})}},nand:{method(...b){return d.verifyFlat(b,"nand"),y.dependency(this,"nand",null,b)}},or:{method(...b){return d.verifyFlat(b,"or"),y.dependency(this,"or",null,b)}},oxor:{method(...b){return y.dependency(this,"oxor",null,b)}},pattern:{method(b,w,E={}){const A=b instanceof RegExp;A||(b=this.$_compile(b,{appendPath:!0})),l(w!==void 0,"Invalid rule"),d.assertOptions(E,["fallthrough","matches"]),A&&l(!b.flags.includes("g")&&!b.flags.includes("y"),"pattern should not use global or sticky mode"),w=this.$_compile(w,{appendPath:!0});const T=this.clone();T.$_terms.patterns=T.$_terms.patterns||[];const D={[A?"regex":"schema"]:b,rule:w};return E.matches&&(D.matches=this.$_compile(E.matches),D.matches.type!=="array"&&(D.matches=D.matches.$_root.array().items(D.matches)),T.$_mutateRegister(D.matches),T.$_setFlag("_hasPatternMatch",!0,{clone:!1})),E.fallthrough&&(D.fallthrough=!0),T.$_terms.patterns.push(D),T.$_mutateRegister(w),T}},ref:{method(){return this.$_addRule("ref")},validate:(b,w)=>g.isRef(b)?b:w.error("object.refType",{value:b})},regex:{method(){return this.$_addRule("regex")},validate:(b,w)=>b instanceof RegExp?b:w.error("object.regex",{value:b})},rename:{method(b,w,E={}){l(typeof b=="string"||b instanceof RegExp,"Rename missing the from argument"),l(typeof w=="string"||w instanceof v,"Invalid rename to argument"),l(w!==b,"Cannot rename key to same name:",b),d.assertOptions(E,["alias","ignoreUndefined","override","multiple"]);const A=this.clone();A.$_terms.renames=A.$_terms.renames||[];for(const T of A.$_terms.renames)l(T.from!==b,"Cannot rename the same key multiple times");return w instanceof v&&A.$_mutateRegister(w),A.$_terms.renames.push({from:b,to:w,options:a(y.renameDefaults,E)}),A}},schema:{method(b="any"){return this.$_addRule({name:"schema",args:{type:b}})},validate:(b,w,{type:E})=>!d.isSchema(b)||E!=="any"&&b.type!==E?w.error("object.schema",{type:E}):b},unknown:{method(b){return this.$_setFlag("unknown",b!==!1)}},with:{method(b,w,E={}){return y.dependency(this,"with",b,w,E)}},without:{method(b,w,E={}){return y.dependency(this,"without",b,w,E)}},xor:{method(...b){return d.verifyFlat(b,"xor"),y.dependency(this,"xor",null,b)}}},overrides:{default(b,w){return b===void 0&&(b=d.symbols.deepDefault),this.$_parent("default",b,w)}},rebuild(b){if(b.$_terms.keys){const w=new f.Sorter;for(const E of b.$_terms.keys)d.tryWithPath(()=>w.add(E,{after:E.schema.$_rootReferences(),group:E.key}),E.key);b.$_terms.keys=new y.Keys(...w.nodes)}},manifest:{build(b,w){if(w.keys&&(b=b.keys(w.keys)),w.dependencies)for(const{rel:E,key:A=null,peers:T,options:D}of w.dependencies)b=y.dependency(b,E,A,T,D);if(w.patterns)for(const{regex:E,schema:A,rule:T,fallthrough:D,matches:k}of w.patterns)b=b.pattern(E||A,T,{fallthrough:D,matches:k});if(w.renames)for(const{from:E,to:A,options:T}of w.renames)b=b.rename(E,A,T);return b}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),y.clone=function(b,w){if(typeof b=="object"){if(w.nonEnumerables)return u(b,{shallow:!0});const A=Object.create(Object.getPrototypeOf(b));return Object.assign(A,b),A}const E=function(...A){return b.apply(this,A)};return E.prototype=u(b.prototype),Object.defineProperty(E,"name",{value:b.name,writable:!1}),Object.defineProperty(E,"length",{value:b.length,writable:!1}),Object.assign(E,b),E},y.dependency=function(b,w,E,A,T){l(E===null||typeof E=="string",w,"key must be a strings"),T||(T=A.length>1&&typeof A[A.length-1]=="object"?A.pop():{}),d.assertOptions(T,["separator","isPresent"]),A=[].concat(A);const D=d.default(T.separator,"."),k=[];for(const O of A)l(typeof O=="string",w,"peers must be strings"),k.push(h.ref(O,{separator:D,ancestor:0,prefix:!1}));E!==null&&(E=h.ref(E,{separator:D,ancestor:0,prefix:!1}));const R=b.clone();return R.$_terms.dependencies=R.$_terms.dependencies||[],R.$_terms.dependencies.push(new y.Dependency(w,E,k,A,T)),R},y.dependencies={and(b,w,E,A,T){const D=[],k=[],R=w.peers.length,O=y.isPresent(w.options);for(const B of w.peers)O(B.resolve(E,A,T,null,{shadow:!1}))===!1?D.push(B.key):k.push(B.key);if(D.length!==R&&k.length!==R)return{code:"object.and",context:{present:k,presentWithLabels:y.keysToLabels(b,k),missing:D,missingWithLabels:y.keysToLabels(b,D)}}},nand(b,w,E,A,T){const D=[],k=y.isPresent(w.options);for(const B of w.peers)k(B.resolve(E,A,T,null,{shadow:!1}))&&D.push(B.key);if(D.length!==w.peers.length)return;const R=w.paths[0],O=w.paths.slice(1);return{code:"object.nand",context:{main:R,mainWithLabel:y.keysToLabels(b,R),peers:O,peersWithLabels:y.keysToLabels(b,O)}}},or(b,w,E,A,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,A,T,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:w.paths,peersWithLabels:y.keysToLabels(b,w.paths)}}},oxor(b,w,E,A,T){const D=[],k=y.isPresent(w.options);for(const O of w.peers)k(O.resolve(E,A,T,null,{shadow:!1}))&&D.push(O.key);if(!D.length||D.length===1)return;const R={peers:w.paths,peersWithLabels:y.keysToLabels(b,w.paths)};return R.present=D,R.presentWithLabels=y.keysToLabels(b,D),{code:"object.oxor",context:R}},with(b,w,E,A,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,A,T,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:w.key.key,mainWithLabel:y.keysToLabels(b,w.key.key),peer:k.key,peerWithLabel:y.keysToLabels(b,k.key)}}},without(b,w,E,A,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,A,T,null,{shadow:!1})))return{code:"object.without",context:{main:w.key.key,mainWithLabel:y.keysToLabels(b,w.key.key),peer:k.key,peerWithLabel:y.keysToLabels(b,k.key)}}},xor(b,w,E,A,T){const D=[],k=y.isPresent(w.options);for(const O of w.peers)k(O.resolve(E,A,T,null,{shadow:!1}))&&D.push(O.key);if(D.length===1)return;const R={peers:w.paths,peersWithLabels:y.keysToLabels(b,w.paths)};return D.length===0?{code:"object.missing",context:R}:(R.present=D,R.presentWithLabels=y.keysToLabels(b,D),{code:"object.xor",context:R})}},y.keysToLabels=function(b,w){return Array.isArray(w)?w.map(E=>b.$_mapLabels(E)):b.$_mapLabels(w)},y.isPresent=function(b){return typeof b.isPresent=="function"?b.isPresent:w=>w!==void 0},y.rename=function(b,w,E,A,T){const D={};for(const k of b.$_terms.renames){const R=[],O=typeof k.from!="string";if(O)for(const B in w){if(w[B]===void 0&&k.options.ignoreUndefined||B===k.to)continue;const K=k.from.exec(B);K&&R.push({from:B,to:k.to,match:K})}else!Object.prototype.hasOwnProperty.call(w,k.from)||w[k.from]===void 0&&k.options.ignoreUndefined||R.push(k);for(const B of R){const K=B.from;let L=B.to;if(L instanceof v&&(L=L.render(w,E,A,B.match)),K!==L){if(!k.options.multiple&&D[L]&&(T.push(b.$_createError("object.rename.multiple",w,{from:K,to:L,pattern:O},E,A)),A.abortEarly)||Object.prototype.hasOwnProperty.call(w,L)&&!k.options.override&&!D[L]&&(T.push(b.$_createError("object.rename.override",w,{from:K,to:L,pattern:O},E,A)),A.abortEarly))return!1;w[K]===void 0?delete w[L]:w[L]=w[K],D[L]=!0,k.options.alias||delete w[K]}}}return!0},y.unknown=function(b,w,E,A,T,D){if(b.$_terms.patterns){let k=!1;const R=b.$_terms.patterns.map(B=>{if(B.matches)return k=!0,[]}),O=[w,...T.ancestors];for(const B of E){const K=w[B],L=[...T.path,B];for(let $=0;$<b.$_terms.patterns.length;++$){const I=b.$_terms.patterns[$];if(I.regex){const Y=I.regex.test(B);if(T.mainstay.tracer.debug(T,"rule",`pattern.${$}`,Y?"pass":"error"),!Y)continue}else if(!I.schema.$_match(B,T.nest(I.schema,`pattern.${$}`),D))continue;E.delete(B);const U=T.localize(L,O,{schema:I.rule,key:B}),q=I.rule.$_validate(K,U,D);if(q.errors){if(D.abortEarly)return{value:w,errors:q.errors};A.push(...q.errors)}if(I.matches&&R[$].push(B),w[B]=q.value,!I.fallthrough)break}}if(k)for(let B=0;B<R.length;++B){const K=R[B];if(!K)continue;const L=b.$_terms.patterns[B].matches,$=T.localize(T.path,O,L),I=L.$_validate(K,$,D);if(I.errors){const U=p.details(I.errors,{override:!1});U.matches=K;const q=b.$_createError("object.pattern.match",w,U,T,D);if(D.abortEarly)return{value:w,errors:q};A.push(q)}}}if(E.size&&(b.$_terms.keys||b.$_terms.patterns)){if(D.stripUnknown&&b._flags.unknown===void 0||D.skipFunctions){const k=!(!D.stripUnknown||D.stripUnknown!==!0&&!D.stripUnknown.objects);for(const R of E)k?(delete w[R],E.delete(R)):typeof w[R]=="function"&&E.delete(R)}if(!d.default(b._flags.unknown,D.allowUnknown))for(const k of E){const R=T.localize([...T.path,k],[]),O=b.$_createError("object.unknown",w[k],{child:k},R,D,{flags:!1});if(D.abortEarly)return{value:w,errors:O};A.push(O)}}},y.Dependency=class{constructor(b,w,E,A,T){this.rel=b,this.key=w,this.peers=E,this.paths=A,this.options=T}describe(){const b={rel:this.rel,peers:this.paths};return this.key!==null&&(b.key=this.key.key),this.peers[0].separator!=="."&&(b.options={...b.options,separator:this.peers[0].separator}),this.options.isPresent&&(b.options={...b.options,isPresent:this.options.isPresent}),b}},y.Keys=class extends Array{concat(b){const w=this.slice(),E=new Map;for(let A=0;A<w.length;++A)E.set(w[A].key,A);for(const A of b){const T=A.key,D=E.get(T);D!==void 0?w[D]={key:T,schema:w[D].schema.concat(A.schema)}:w.push(A)}return w}}},8785:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f=o(3292),c=o(6354),d={};i.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(h,p)=>h.ref(p),validate(h,{schema:p,state:g,prefs:v}){a(p.$_terms.link,"Uninitialized link schema");const y=d.generate(p,h,g,v),b=p.$_terms.link[0].ref;return y.$_validate(h,g.nest(y,`link:${b.display}:${y.type}`),v)},generate:(h,p,g,v)=>d.generate(h,p,g,v),rules:{ref:{method(h){a(!this.$_terms.link,"Cannot reinitialize schema"),h=f.ref(h),a(h.type==="value"||h.type==="local","Invalid reference type:",h.type),a(h.type==="local"||h.ancestor==="root"||h.ancestor>0,"Link cannot reference itself");const p=this.clone();return p.$_terms.link=[{ref:h}],p}},relative:{method(h=!0){return this.$_setFlag("relative",h)}}},overrides:{concat(h){a(this.$_terms.link,"Uninitialized link schema"),a(u.isSchema(h),"Invalid schema object"),a(h.type!=="link","Cannot merge type link with another link");const p=this.clone();return p.$_terms.whens||(p.$_terms.whens=[]),p.$_terms.whens.push({concat:h}),p.$_mutateRebuild()}},manifest:{build:(h,p)=>(a(p.link,"Invalid link description missing link"),h.ref(p.link))}}),d.generate=function(h,p,g,v){let y=g.mainstay.links.get(h);if(y)return y._generate(p,g,v).schema;const b=h.$_terms.link[0].ref,{perspective:w,path:E}=d.perspective(b,g);d.assert(w,"which is outside of schema boundaries",b,h,g,v);try{y=E.length?w.$_reach(E):w}catch{d.assert(!1,"to non-existing schema",b,h,g,v)}return d.assert(y.type!=="link","which is another link",b,h,g,v),h._flags.relative||g.mainstay.links.set(h,y),y._generate(p,g,v).schema},d.perspective=function(h,p){if(h.type==="local"){for(const{schema:g,key:v}of p.schemas){if((g._flags.id||v)===h.path[0])return{perspective:g,path:h.path.slice(1)};if(g.$_terms.shared){for(const y of g.$_terms.shared)if(y._flags.id===h.path[0])return{perspective:y,path:h.path.slice(1)}}}return{perspective:null,path:null}}return h.ancestor==="root"?{perspective:p.schemas[p.schemas.length-1].schema,path:h.path}:{perspective:p.schemas[h.ancestor]&&p.schemas[h.ancestor].schema,path:h.path}},d.assert=function(h,p,g,v,y,b){h||a(!1,`"${c.label(v._flags,y,b)}" contains link reference "${g.display}" ${p}`)}},3832:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(c){const d=c.toString(),h=d.indexOf("."),p=d.indexOf("e");return(h<0?0:(p<0?d.length:p)-h-1)+(p<0?0:Math.max(0,-parseInt(d.slice(p+1))))}};i.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(c,{schema:d,error:h}){if(!c.match(f.numberRx))return;c=c.trim();const p={value:parseFloat(c)};if(p.value===0&&(p.value=0),!d._flags.unsafe)if(c.match(/e/i)){if(f.extractSignificantDigits(c)!==f.extractSignificantDigits(String(p.value)))return p.errors=h("number.unsafe"),p}else{const g=p.value.toString();if(g.match(/e/i))return p;if(g!==f.normalizeDecimal(c))return p.errors=h("number.unsafe"),p}return p}},validate(c,{schema:d,error:h,prefs:p}){if(c===1/0||c===-1/0)return{value:c,errors:h("number.infinity")};if(!u.isNumber(c))return{value:c,errors:h("number.base")};const g={value:c};if(p.convert){const v=d.$_getRule("precision");if(v){const y=Math.pow(10,v.args.limit);g.value=Math.round(g.value*y)/y}}return g.value===0&&(g.value=0),!d._flags.unsafe&&(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&(g.errors=h("number.unsafe")),g},rules:{compare:{method:!1,validate:(c,d,{limit:h},{name:p,operator:g,args:v})=>u.compare(c,h,g)?c:d.error("number."+p,{limit:v.limit,value:c}),args:[{name:"limit",ref:!0,assert:u.isNumber,message:"must be a number"}]},greater:{method(c){return this.$_addRule({name:"greater",method:"compare",args:{limit:c},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(c,d)=>Math.trunc(c)-c==0?c:d.error("number.integer")},less:{method(c){return this.$_addRule({name:"less",method:"compare",args:{limit:c},operator:"<"})}},max:{method(c){return this.$_addRule({name:"max",method:"compare",args:{limit:c},operator:"<="})}},min:{method(c){return this.$_addRule({name:"min",method:"compare",args:{limit:c},operator:">="})}},multiple:{method(c){const d=typeof c=="number"?f.decimalPlaces(c):null,h=Math.pow(10,d);return this.$_addRule({name:"multiple",args:{base:c,baseDecimalPlace:d,pfactor:h}})},validate:(c,d,{base:h,baseDecimalPlace:p,pfactor:g},v)=>f.decimalPlaces(c)>p?d.error("number.multiple",{multiple:v.args.base,value:c}):Math.round(g*c)%Math.round(g*h)==0?c:d.error("number.multiple",{multiple:v.args.base,value:c}),args:[{name:"base",ref:!0,assert:c=>typeof c=="number"&&isFinite(c)&&c>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(c,d)=>Number.isSafeInteger(c)&&c>=0&&c<=65535?c:d.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(c){return a(Number.isSafeInteger(c),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:c}})},validate(c,d,{limit:h}){const p=c.toString().match(f.precisionRx);return Math.max((p[1]?p[1].length:0)-(p[2]?parseInt(p[2],10):0),0)<=h?c:d.error("number.precision",{limit:h,value:c})},convert:!0},sign:{method(c){return a(["negative","positive"].includes(c),"Invalid sign",c),this.$_addRule({name:"sign",args:{sign:c}})},validate:(c,d,{sign:h})=>h==="negative"&&c<0||h==="positive"&&c>0?c:d.error(`number.${h}`)},unsafe:{method(c=!0){return a(typeof c=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",c)}}},cast:{string:{from:c=>typeof c=="number",to:(c,d)=>c.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),f.extractSignificantDigits=function(c){return c.replace(f.exponentialPartRegex,"").replace(f.dotRegex,"").replace(f.trailingZerosRegex,"").replace(f.leadingSignAndZerosRegex,"")},f.normalizeDecimal=function(c){return(c=c.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&c.endsWith("0")&&(c=c.replace(/0+$/,"")),c==="-0"?"0":c}},8966:(i,s,o)=>{const a=o(7824);i.exports=a.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,u)=>new Map(Object.entries(l))}}})},7417:(i,s,o)=>{const a=o(375),l=o(5380),u=o(1745),f=o(9959),c=o(6064),d=o(9926),h=o(5752),p=o(8068),g=o(8160),v={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:f.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};i.exports=p.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(y,{schema:b,state:w,prefs:E}){const A=b.$_getRule("normalize");A&&(y=y.normalize(A.args.form));const T=b.$_getRule("case");T&&(y=T.args.direction==="upper"?y.toLocaleUpperCase():y.toLocaleLowerCase());const D=b.$_getRule("trim");if(D&&D.args.enabled&&(y=y.trim()),b.$_terms.replacements)for(const R of b.$_terms.replacements)y=y.replace(R.pattern,R.replacement);const k=b.$_getRule("hex");if(k&&k.args.options.byteAligned&&y.length%2!=0&&(y=`0${y}`),b.$_getRule("isoDate")){const R=v.isoDate(y);R&&(y=R)}if(b._flags.truncate){const R=b.$_getRule("max");if(R){let O=R.args.limit;if(g.isResolvable(O)&&(O=O.resolve(y,w,E),!g.limit(O)))return{value:y,errors:b.$_createError("any.ref",O,{ref:R.args.limit,arg:"limit",reason:"must be a positive integer"},w,E)};y=y.slice(0,O)}}return{value:y}}},validate(y,{schema:b,error:w}){if(typeof y!="string")return{value:y,errors:w("string.base")};if(y===""){const E=b.$_getRule("min");return E&&E.args.limit===0?void 0:{value:y,errors:w("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(y,b)=>/^[a-zA-Z0-9]+$/.test(y)?y:b.error("string.alphanum")},base64:{method(y={}){return g.assertOptions(y,["paddingRequired","urlSafe"]),y={urlSafe:!1,paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof y.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:y}})},validate:(y,b,{options:w})=>v.base64Regex[w.paddingRequired][w.urlSafe].test(y)?y:b.error("string.base64")},case:{method(y){return a(["lower","upper"].includes(y),"Invalid case:",y),this.$_addRule({name:"case",args:{direction:y}})},validate:(y,b,{direction:w})=>w==="lower"&&y===y.toLocaleLowerCase()||w==="upper"&&y===y.toLocaleUpperCase()?y:b.error(`string.${w}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(y,b){let w=y.length,E=0,A=1;for(;w--;){const T=y.charAt(w)*A;E+=T-9*(T>9),A^=3}return E>0&&E%10==0?y:b.error("string.creditCard")}},dataUri:{method(y={}){return g.assertOptions(y,["paddingRequired"]),y={paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:y}})},validate(y,b,{options:w}){const E=y.match(v.dataUriRegex);return E&&(!E[2]||E[2]!=="base64"||v.base64Regex[w.paddingRequired].false.test(E[3]))?y:b.error("string.dataUri")}},domain:{method(y){y&&g.assertOptions(y,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const b=v.addressOptions(y);return this.$_addRule({name:"domain",args:{options:y},address:b})},validate:(y,b,w,{address:E})=>l.isValid(y,E)?y:b.error("string.domain")},email:{method(y={}){g.assertOptions(y,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(y.multiple===void 0||typeof y.multiple=="boolean","multiple option must be an boolean");const b=v.addressOptions(y),w=new RegExp(`\\s*[${y.separator?c(y.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:y},regex:w,address:b})},validate(y,b,{options:w},{regex:E,address:A}){const T=w.multiple?y.split(E):[y],D=[];for(const k of T)u.isValid(k,A)||D.push(k);return D.length?b.error("string.email",{value:y,invalids:D}):y}},guid:{alias:"uuid",method(y={}){g.assertOptions(y,["version","separator"]);let b="";if(y.version){const A=[].concat(y.version);a(A.length>=1,"version must have at least 1 valid version specified");const T=new Set;for(let D=0;D<A.length;++D){const k=A[D];a(typeof k=="string","version at position "+D+" must be a string");const R=v.guidVersions[k.toLowerCase()];a(R,"version at position "+D+" must be one of "+Object.keys(v.guidVersions).join(", ")),a(!T.has(R),"version at position "+D+" must not be a duplicate"),b+=R,T.add(R)}}a(v.guidSeparators.has(y.separator),'separator must be one of true, false, "-", or ":"');const w=y.separator===void 0?"[:-]?":y.separator===!0?"[:-]":y.separator===!1?"[]?":`\\${y.separator}`,E=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${w})[0-9A-F]{4}\\2?[${b||"0-9A-F"}][0-9A-F]{3}\\2?[${b?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:y},regex:E})},validate(y,b,w,{regex:E}){const A=E.exec(y);return A?v.guidBrackets[A[1]]!==A[A.length-1]?b.error("string.guid"):y:b.error("string.guid")}},hex:{method(y={}){return g.assertOptions(y,["byteAligned","prefix"]),y={byteAligned:!1,prefix:!1,...y},a(typeof y.byteAligned=="boolean","byteAligned must be boolean"),a(typeof y.prefix=="boolean"||y.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:y}})},validate:(y,b,{options:w})=>(w.prefix==="optional"?v.hexRegex.withOptionalPrefix:w.prefix===!0?v.hexRegex.withPrefix:v.hexRegex.withoutPrefix).test(y)?w.byteAligned&&y.length%2!=0?b.error("string.hexAlign"):y:b.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(y,b)=>l.isValid(y,{minDomainSegments:1})||v.ipRegex.test(y)?y:b.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(y={}){g.assertOptions(y,["cidr","version"]);const{cidr:b,versions:w,regex:E}=f.regex(y),A=y.version?w:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:b,version:A}},regex:E})},validate:(y,b,{options:w},{regex:E})=>E.test(y)?y:w.version?b.error("string.ipVersion",{value:y,cidr:w.cidr,version:w.version}):b.error("string.ip",{value:y,cidr:w.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(y,{error:b})=>v.isoDate(y)?y:b("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(y,b)=>v.isoDurationRegex.test(y)?y:b.error("string.isoDuration")},length:{method(y,b){return v.length(this,"length",y,"=",b)},validate(y,b,{limit:w,encoding:E},{name:A,operator:T,args:D}){const k=!E&&y.length;return g.compare(k,w,T)?y:b.error("string."+A,{limit:D.limit,value:y,encoding:E})},args:[{name:"limit",ref:!0,assert:g.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(y,b){return v.length(this,"max",y,"<=",b)},args:["limit","encoding"]},min:{method(y,b){return v.length(this,"min",y,">=",b)},args:["limit","encoding"]},normalize:{method(y="NFC"){return a(v.normalizationForms.includes(y),"normalization form must be one of "+v.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:y}})},validate:(y,{error:b},{form:w})=>y===y.normalize(w)?y:b("string.normalize",{value:y,form:w}),convert:!0},pattern:{alias:"regex",method(y,b={}){a(y instanceof RegExp,"regex must be a RegExp"),a(!y.flags.includes("g")&&!y.flags.includes("y"),"regex should not use global or sticky mode"),typeof b=="string"&&(b={name:b}),g.assertOptions(b,["invert","name"]);const w=["string.pattern",b.invert?".invert":"",b.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:y,options:b},errorCode:w})},validate:(y,b,{regex:w,options:E},{errorCode:A})=>w.test(y)^E.invert?y:b.error(A,{name:E.name,regex:w,value:y}),args:["regex","options"],multi:!0},replace:{method(y,b){typeof y=="string"&&(y=new RegExp(c(y),"g")),a(y instanceof RegExp,"pattern must be a RegExp"),a(typeof b=="string","replacement must be a String");const w=this.clone();return w.$_terms.replacements||(w.$_terms.replacements=[]),w.$_terms.replacements.push({pattern:y,replacement:b}),w}},token:{method(){return this.$_addRule("token")},validate:(y,b)=>/^\w+$/.test(y)?y:b.error("string.token")},trim:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:y}})},validate:(y,b,{enabled:w})=>w&&y!==y.trim()?b.error("string.trim"):y,convert:!0},truncate:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",y)}},uppercase:{method(){return this.case("upper")}},uri:{method(y={}){g.assertOptions(y,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),y.domain&&g.assertOptions(y.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:b,scheme:w}=h.regex(y),E=y.domain?v.addressOptions(y.domain):null;return this.$_addRule({name:"uri",args:{options:y},regex:b,domain:E,scheme:w})},validate(y,b,{options:w},{regex:E,domain:A,scheme:T}){if(["http:/","https:/"].includes(y))return b.error("string.uri");let D=E.exec(y);if(!D&&b.prefs.convert&&w.encodeUri){const k=encodeURI(y);D=E.exec(k),D&&(y=k)}if(D){const k=D[1]||D[2];return!A||w.allowRelative&&!k||l.isValid(k,A)?y:b.error("string.domain",{value:k})}return w.relativeOnly?b.error("string.uriRelativeOnly"):w.scheme?b.error("string.uriCustomScheme",{scheme:T,value:y}):b.error("string.uri")}}},manifest:{build(y,b){if(b.replacements)for(const{pattern:w,replacement:E}of b.replacements)y=y.replace(w,E);return y}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),v.addressOptions=function(y){if(!y)return v.tlds||y;if(a(y.minDomainSegments===void 0||Number.isSafeInteger(y.minDomainSegments)&&y.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(y.maxDomainSegments===void 0||Number.isSafeInteger(y.maxDomainSegments)&&y.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),y.tlds===!1)return y;if(y.tlds===!0||y.tlds===void 0)return a(v.tlds,"Built-in TLD list disabled"),Object.assign({},y,v.tlds);a(typeof y.tlds=="object","tlds must be true, false, or an object");const b=y.tlds.deny;if(b)return Array.isArray(b)&&(y=Object.assign({},y,{tlds:{deny:new Set(b)}})),a(y.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!y.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),v.validateTlds(y.tlds.deny,"tlds.deny"),y;const w=y.tlds.allow;return w?w===!0?(a(v.tlds,"Built-in TLD list disabled"),Object.assign({},y,v.tlds)):(Array.isArray(w)&&(y=Object.assign({},y,{tlds:{allow:new Set(w)}})),a(y.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),v.validateTlds(y.tlds.allow,"tlds.allow"),y):y},v.validateTlds=function(y,b){for(const w of y)a(l.isValid(w,{minDomainSegments:1,maxDomainSegments:1}),`${b} must contain valid top level domain names`)},v.isoDate=function(y){if(!g.isIsoDate(y))return null;/.*T.*[+-]\d\d$/.test(y)&&(y+="00");const b=new Date(y);return isNaN(b.getTime())?null:b.toISOString()},v.length=function(y,b,w,E,A){return a(!A||!1,"Invalid encoding:",A),y.$_addRule({name:b,method:"length",args:{limit:w,encoding:A},operator:E})}},8826:(i,s,o)=>{const a=o(375),l=o(8068),u={};u.Map=class extends Map{slice(){return new u.Map(this)}},i.exports=l.extend({type:"symbol",terms:{map:{init:new u.Map}},coerce:{method(f,{schema:c,error:d}){const h=c.$_terms.map.get(f);return h&&(f=h),c._flags.only&&typeof f!="symbol"?{value:f,errors:d("symbol.map",{map:c.$_terms.map})}:{value:f}}},validate(f,{error:c}){if(typeof f!="symbol")return{value:f,errors:c("symbol.base")}},rules:{map:{method(f){f&&!f[Symbol.iterator]&&typeof f=="object"&&(f=Object.entries(f)),a(f&&f[Symbol.iterator],"Iterable must be an iterable or object");const c=this.clone(),d=[];for(const h of f){a(h&&h[Symbol.iterator],"Entry must be an iterable");const[p,g]=h;a(typeof p!="object"&&typeof p!="function"&&typeof p!="symbol","Key must not be of type object, function, or Symbol"),a(typeof g=="symbol","Value must be a Symbol"),c.$_terms.map.set(p,g),d.push(g)}return c.valid(...d)}}},manifest:{build:(f,c)=>(c.map&&(f=f.map(c.map)),f)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(i,s,o)=>{const a=o(375),l=o(8571),u=o(738),f=o(9621),c=o(8160),d=o(6354),h=o(493),p={result:Symbol("result")};s.entry=function(g,v,y){let b=c.defaults;y&&(a(y.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(y.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),b=c.preferences(c.defaults,y));const w=p.entry(g,v,b);a(!w.mainstay.externals.length,"Schema with external rules must use validateAsync()");const E={value:w.value};return w.error&&(E.error=w.error),w.mainstay.warnings.length&&(E.warning=d.details(w.mainstay.warnings)),w.mainstay.debug&&(E.debug=w.mainstay.debug),w.mainstay.artifacts&&(E.artifacts=w.mainstay.artifacts),E},s.entryAsync=async function(g,v,y){let b=c.defaults;y&&(b=c.preferences(c.defaults,y));const w=p.entry(g,v,b),E=w.mainstay;if(w.error)throw E.debug&&(w.error.debug=E.debug),w.error;if(E.externals.length){let T=w.value;const D=[];for(const k of E.externals){const R=k.state.path,O=k.schema.type==="link"?E.links.get(k.schema):null;let B,K,L=T;const $=R.length?[T]:[],I=R.length?f(g,R):g;if(R.length){B=R[R.length-1];let U=T;for(const q of R.slice(0,-1))U=U[q],$.unshift(U);K=$[0],L=K[B]}try{const U=(Y,X)=>(O||k.schema).$_createError(Y,L,X,k.state,b),q=await k.method(L,{schema:k.schema,linked:O,state:k.state,prefs:y,original:I,error:U,errorsArray:p.errorsArray,warn:(Y,X)=>E.warnings.push((O||k.schema).$_createError(Y,L,X,k.state,b)),message:(Y,X)=>(O||k.schema).$_createError("external",L,X,k.state,b,{messages:Y})});if(q===void 0||q===L)continue;if(q instanceof d.Report){if(E.tracer.log(k.schema,k.state,"rule","external","error"),D.push(q),b.abortEarly)break;continue}if(Array.isArray(q)&&q[c.symbols.errors]){if(E.tracer.log(k.schema,k.state,"rule","external","error"),D.push(...q),b.abortEarly)break;continue}K?(E.tracer.value(k.state,"rule",L,q,"external"),K[B]=q):(E.tracer.value(k.state,"rule",T,q,"external"),T=q)}catch(U){throw b.errors.label&&(U.message+=` (${k.label})`),U}}if(w.value=T,D.length)throw w.error=d.process(D,g,b),E.debug&&(w.error.debug=E.debug),w.error}if(!b.warnings&&!b.debug&&!b.artifacts)return w.value;const A={value:w.value};return E.warnings.length&&(A.warning=d.details(E.warnings)),E.debug&&(A.debug=E.debug),E.artifacts&&(A.artifacts=E.artifacts),A},p.Mainstay=class{constructor(g,v,y){this.externals=[],this.warnings=[],this.tracer=g,this.debug=v,this.links=y,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const g=this._snapshots.pop();this.externals=g.externals,this.warnings=g.warnings}commit(){this._snapshots.pop()}},p.entry=function(g,v,y){const{tracer:b,cleanup:w}=p.tracer(v,y),E=y.debug?[]:null,A=v._ids._schemaChain?new Map:null,T=new p.Mainstay(b,E,A),D=v._ids._schemaChain?[{schema:v}]:null,k=new h([],[],{mainstay:T,schemas:D}),R=s.validate(g,v,k,y);w&&v.$_root.untrace();const O=d.process(R.errors,g,y);return{value:R.value,error:O,mainstay:T}},p.tracer=function(g,v){return g.$_root._tracer?{tracer:g.$_root._tracer._register(g)}:v.debug?(a(g.$_root.trace,"Debug mode not supported"),{tracer:g.$_root.trace()._register(g),cleanup:!0}):{tracer:p.ignore}},s.validate=function(g,v,y,b,w={}){if(v.$_terms.whens&&(v=v._generate(g,y,b).schema),v._preferences&&(b=p.prefs(v,b)),v._cache&&b.cache){const O=v._cache.get(g);if(y.mainstay.tracer.debug(y,"validate","cached",!!O),O)return O}const E=(O,B,K)=>v.$_createError(O,g,B,K||y,b),A={original:g,prefs:b,schema:v,state:y,error:E,errorsArray:p.errorsArray,warn:(O,B,K)=>y.mainstay.warnings.push(E(O,B,K)),message:(O,B)=>v.$_createError("custom",g,B,y,b,{messages:O})};y.mainstay.tracer.entry(v,y);const T=v._definition;if(T.prepare&&g!==void 0&&b.convert){const O=T.prepare(g,A);if(O){if(y.mainstay.tracer.value(y,"prepare",g,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),A);g=O.value}}if(T.coerce&&g!==void 0&&b.convert&&(!T.coerce.from||T.coerce.from.includes(typeof g))){const O=T.coerce.method(g,A);if(O){if(y.mainstay.tracer.value(y,"coerced",g,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),A);g=O.value}}const D=v._flags.empty;D&&D.$_match(p.trim(g,v),y.nest(D),c.defaults)&&(y.mainstay.tracer.value(y,"empty",g,void 0),g=void 0);const k=w.presence||v._flags.presence||(v._flags._endedSwitch?null:b.presence);if(g===void 0){if(k==="forbidden")return p.finalize(g,null,A);if(k==="required")return p.finalize(g,[v.$_createError("any.required",g,null,y,b)],A);if(k==="optional"){if(v._flags.default!==c.symbols.deepDefault)return p.finalize(g,null,A);y.mainstay.tracer.value(y,"default",g,{}),g={}}}else if(k==="forbidden")return p.finalize(g,[v.$_createError("any.unknown",g,null,y,b)],A);const R=[];if(v._valids){const O=v._valids.get(g,y,b,v._flags.insensitive);if(O)return b.convert&&(y.mainstay.tracer.value(y,"valids",g,O.value),g=O.value),y.mainstay.tracer.filter(v,y,"valid",O),p.finalize(g,null,A);if(v._flags.only){const B=v.$_createError("any.only",g,{valids:v._valids.values({display:!0})},y,b);if(b.abortEarly)return p.finalize(g,[B],A);R.push(B)}}if(v._invalids){const O=v._invalids.get(g,y,b,v._flags.insensitive);if(O){y.mainstay.tracer.filter(v,y,"invalid",O);const B=v.$_createError("any.invalid",g,{invalids:v._invalids.values({display:!0})},y,b);if(b.abortEarly)return p.finalize(g,[B],A);R.push(B)}}if(T.validate){const O=T.validate(g,A);if(O&&(y.mainstay.tracer.value(y,"base",g,O.value),g=O.value,O.errors)){if(!Array.isArray(O.errors))return R.push(O.errors),p.finalize(g,R,A);if(O.errors.length)return R.push(...O.errors),p.finalize(g,R,A)}}return v._rules.length?p.rules(g,R,A):p.finalize(g,R,A)},p.rules=function(g,v,y){const{schema:b,state:w,prefs:E}=y;for(const A of b._rules){const T=b._definition.rules[A.method];if(T.convert&&E.convert){w.mainstay.tracer.log(b,w,"rule",A.name,"full");continue}let D,k=A.args;if(A._resolve.length){k=Object.assign({},k);for(const O of A._resolve){const B=T.argsByName.get(O),K=k[O].resolve(g,w,E),L=B.normalize?B.normalize(K):K,$=c.validateArg(L,null,B);if($){D=b.$_createError("any.ref",K,{arg:O,ref:k[O],reason:$},w,E);break}k[O]=L}}D=D||T.validate(g,y,k,A);const R=p.rule(D,A);if(R.errors){if(w.mainstay.tracer.log(b,w,"rule",A.name,"error"),A.warn){w.mainstay.warnings.push(...R.errors);continue}if(E.abortEarly)return p.finalize(g,R.errors,y);v.push(...R.errors)}else w.mainstay.tracer.log(b,w,"rule",A.name,"pass"),w.mainstay.tracer.value(w,"rule",g,R.value,A.name),g=R.value}return p.finalize(g,v,y)},p.rule=function(g,v){return g instanceof d.Report?(p.error(g,v),{errors:[g],value:null}):Array.isArray(g)&&g[c.symbols.errors]?(g.forEach(y=>p.error(y,v)),{errors:g,value:null}):{errors:null,value:g}},p.error=function(g,v){return v.message&&g._setTemplate(v.message),g},p.finalize=function(g,v,y){v=v||[];const{schema:b,state:w,prefs:E}=y;if(v.length){const T=p.default("failover",void 0,v,y);T!==void 0&&(w.mainstay.tracer.value(w,"failover",g,T),g=T,v=[])}if(v.length&&b._flags.error)if(typeof b._flags.error=="function"){v=b._flags.error(v),Array.isArray(v)||(v=[v]);for(const T of v)a(T instanceof Error||T instanceof d.Report,"error() must return an Error object")}else v=[b._flags.error];if(g===void 0){const T=p.default("default",g,v,y);w.mainstay.tracer.value(w,"default",g,T),g=T}if(b._flags.cast&&g!==void 0){const T=b._definition.cast[b._flags.cast];if(T.from(g)){const D=T.to(g,y);w.mainstay.tracer.value(w,"cast",g,D,b._flags.cast),g=D}}if(b.$_terms.externals&&E.externals&&E._externals!==!1)for(const{method:T}of b.$_terms.externals)w.mainstay.externals.push({method:T,schema:b,state:w,label:d.label(b._flags,w,E)});const A={value:g,errors:v.length?v:null};return b._flags.result&&(A.value=b._flags.result==="strip"?void 0:y.original,w.mainstay.tracer.value(w,b._flags.result,g,A.value),w.shadow(g,b._flags.result)),b._cache&&E.cache!==!1&&!b._refs.length&&b._cache.set(y.original,A),g===void 0||A.errors||b._flags.artifact===void 0||(w.mainstay.artifacts=w.mainstay.artifacts||new Map,w.mainstay.artifacts.has(b._flags.artifact)||w.mainstay.artifacts.set(b._flags.artifact,[]),w.mainstay.artifacts.get(b._flags.artifact).push(w.path)),A},p.prefs=function(g,v){const y=v===c.defaults;return y&&g._preferences[c.symbols.prefs]?g._preferences[c.symbols.prefs]:(v=c.preferences(v,g._preferences),y&&(g._preferences[c.symbols.prefs]=v),v)},p.default=function(g,v,y,b){const{schema:w,state:E,prefs:A}=b,T=w._flags[g];if(A.noDefaults||T===void 0)return v;if(E.mainstay.tracer.log(w,E,"rule",g,"full"),!T)return T;if(typeof T=="function"){const D=T.length?[l(E.ancestors[0]),b]:[];try{return T(...D)}catch(k){return void y.push(w.$_createError(`any.${g}`,null,{error:k},E,A))}}return typeof T!="object"?T:T[c.symbols.literal]?T.literal:c.isResolvable(T)?T.resolve(v,E,A):l(T)},p.trim=function(g,v){if(typeof g!="string")return g;const y=v.$_getRule("trim");return y&&y.args.enabled?g.trim():g},p.ignore={active:!1,debug:u,entry:u,filter:u,log:u,resolve:u,value:u},p.errorsArray=function(){const g=[];return g[c.symbols.errors]=!0,g}},2036:(i,s,o)=>{const a=o(375),l=o(9474),u=o(8160),f={};i.exports=f.Values=class{constructor(c,d){this._values=new Set(c),this._refs=new Set(d),this._lowercase=f.lowercases(c),this._override=!1}get length(){return this._values.size+this._refs.size}add(c,d){u.isResolvable(c)?this._refs.has(c)||(this._refs.add(c),d&&d.register(c)):this.has(c,null,null,!1)||(this._values.add(c),typeof c=="string"&&this._lowercase.set(c.toLowerCase(),c))}static merge(c,d,h){if(c=c||new f.Values,d){if(d._override)return d.clone();for(const p of[...d._values,...d._refs])c.add(p)}if(h)for(const p of[...h._values,...h._refs])c.remove(p);return c.length?c:null}remove(c){u.isResolvable(c)?this._refs.delete(c):(this._values.delete(c),typeof c=="string"&&this._lowercase.delete(c.toLowerCase()))}has(c,d,h,p){return!!this.get(c,d,h,p)}get(c,d,h,p){if(!this.length)return!1;if(this._values.has(c))return{value:c};if(typeof c=="string"&&c&&p){const g=this._lowercase.get(c.toLowerCase());if(g)return{value:g}}if(!this._refs.size&&typeof c!="object")return!1;if(typeof c=="object"){for(const g of this._values)if(l(g,c))return{value:g}}if(d)for(const g of this._refs){const v=g.resolve(c,d,h,null,{in:!0});if(v===void 0)continue;const y=g.in&&typeof v=="object"?Array.isArray(v)?v:Object.keys(v):[v];for(const b of y)if(typeof b==typeof c){if(p&&c&&typeof c=="string"){if(b.toLowerCase()===c.toLowerCase())return{value:b,ref:g}}else if(l(b,c))return{value:b,ref:g}}}return!1}override(){this._override=!0}values(c){if(c&&c.display){const d=[];for(const h of[...this._values,...this._refs])h!==void 0&&d.push(h);return d}return Array.from([...this._values,...this._refs])}clone(){const c=new f.Values(this._values,this._refs);return c._override=this._override,c}concat(c){a(!c._override,"Cannot concat override set of values");const d=new f.Values([...this._values,...c._values],[...this._refs,...c._refs]);return d._override=this._override,d}describe(){const c=[];this._override&&c.push({override:!0});for(const d of this._values.values())c.push(d&&typeof d=="object"?{value:d}:d);for(const d of this._refs.values())c.push(d.describe());return c}},f.Values.prototype[u.symbols.values]=!0,f.Values.prototype.slice=f.Values.prototype.clone,f.lowercases=function(c){const d=new Map;if(c)for(const h of c)typeof h=="string"&&d.set(h.toLowerCase(),h);return d}},978:(i,s,o)=>{const a=o(375),l=o(8571),u=o(1687),f=o(9621),c={};i.exports=function(d,h,p={}){if(a(d&&typeof d=="object","Invalid defaults value: must be an object"),a(!h||h===!0||typeof h=="object","Invalid source value: must be true, falsy or an object"),a(typeof p=="object","Invalid options: must be an object"),!h)return null;if(p.shallow)return c.applyToDefaultsWithShallow(d,h,p);const g=l(d);if(h===!0)return g;const v=p.nullOverride!==void 0&&p.nullOverride;return u(g,h,{nullOverride:v,mergeArrays:!1})},c.applyToDefaultsWithShallow=function(d,h,p){const g=p.shallow;a(Array.isArray(g),"Invalid keys");const v=new Map,y=h===!0?null:new Set;for(let E of g){E=Array.isArray(E)?E:E.split(".");const A=f(d,E);A&&typeof A=="object"?v.set(A,y&&f(h,E)||A):y&&y.add(E)}const b=l(d,{},v);if(!y)return b;for(const E of y)c.reachCopy(b,h,E);const w=p.nullOverride!==void 0&&p.nullOverride;return u(b,h,{nullOverride:w,mergeArrays:!1})},c.reachCopy=function(d,h,p){for(const y of p){if(!(y in h))return;const b=h[y];if(typeof b!="object"||b===null)return;h=b}const g=h;let v=d;for(let y=0;y<p.length-1;++y){const b=p[y];typeof v[b]!="object"&&(v[b]={}),v=v[b]}v[p[p.length-1]]=g}},375:(i,s,o)=>{const a=o(7916);i.exports=function(l,...u){if(!l)throw u.length===1&&u[0]instanceof Error?u[0]:new a(u)}},8571:(i,s,o)=>{const a=o(9621),l=o(4277),u=o(7043),f={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};i.exports=f.clone=function(c,d={},h=null){if(typeof c!="object"||c===null)return c;let p=f.clone,g=h;if(d.shallow){if(d.shallow!==!0)return f.cloneWithShallow(c,d);p=w=>w}else if(g){const w=g.get(c);if(w)return w}else g=new Map;const v=l.getInternalProto(c);if(v===l.buffer)return!1;if(v===l.date)return new Date(c.getTime());if(v===l.regex)return new RegExp(c);const y=f.base(c,v,d);if(y===c)return c;if(g&&g.set(c,y),v===l.set)for(const w of c)y.add(p(w,d,g));else if(v===l.map)for(const[w,E]of c)y.set(w,p(E,d,g));const b=u.keys(c,d);for(const w of b){if(w==="__proto__")continue;if(v===l.array&&w==="length"){y.length=c.length;continue}const E=Object.getOwnPropertyDescriptor(c,w);E?E.get||E.set?Object.defineProperty(y,w,E):E.enumerable?y[w]=p(c[w],d,g):Object.defineProperty(y,w,{enumerable:!1,writable:!0,configurable:!0,value:p(c[w],d,g)}):Object.defineProperty(y,w,{enumerable:!0,writable:!0,configurable:!0,value:p(c[w],d,g)})}return y},f.cloneWithShallow=function(c,d){const h=d.shallow;(d=Object.assign({},d)).shallow=!1;const p=new Map;for(const g of h){const v=a(c,g);typeof v!="object"&&typeof v!="function"||p.set(v,v)}return f.clone(c,d,p)},f.base=function(c,d,h){if(h.prototype===!1)return f.needsProtoHack.has(d)?new d.constructor:d===l.array?[]:{};const p=Object.getPrototypeOf(c);if(p&&p.isImmutable)return c;if(d===l.array){const g=[];return p!==d&&Object.setPrototypeOf(g,p),g}if(f.needsProtoHack.has(d)){const g=new p.constructor;return p!==d&&Object.setPrototypeOf(g,p),g}return Object.create(p)}},9474:(i,s,o)=>{const a=o(4277),l={mismatched:null};i.exports=function(u,f,c){return c=Object.assign({prototype:!0},c),!!l.isDeepEqual(u,f,c,[])},l.isDeepEqual=function(u,f,c,d){if(u===f)return u!==0||1/u==1/f;const h=typeof u;if(h!==typeof f||u===null||f===null)return!1;if(h==="function"){if(!c.deepFunction||u.toString()!==f.toString())return!1}else if(h!=="object")return u!=u&&f!=f;const p=l.getSharedType(u,f,!!c.prototype);switch(p){case a.buffer:return!1;case a.promise:return u===f;case a.regex:return u.toString()===f.toString();case l.mismatched:return!1}for(let g=d.length-1;g>=0;--g)if(d[g].isSame(u,f))return!0;d.push(new l.SeenEntry(u,f));try{return!!l.isDeepEqualObj(p,u,f,c,d)}finally{d.pop()}},l.getSharedType=function(u,f,c){if(c)return Object.getPrototypeOf(u)!==Object.getPrototypeOf(f)?l.mismatched:a.getInternalProto(u);const d=a.getInternalProto(u);return d!==a.getInternalProto(f)?l.mismatched:d},l.valueOf=function(u){const f=u.valueOf;if(f===void 0)return u;try{return f.call(u)}catch(c){return c}},l.hasOwnEnumerableProperty=function(u,f){return Object.prototype.propertyIsEnumerable.call(u,f)},l.isSetSimpleEqual=function(u,f){for(const c of Set.prototype.values.call(u))if(!Set.prototype.has.call(f,c))return!1;return!0},l.isDeepEqualObj=function(u,f,c,d,h){const{isDeepEqual:p,valueOf:g,hasOwnEnumerableProperty:v}=l,{keys:y,getOwnPropertySymbols:b}=Object;if(u===a.array){if(!d.part){if(f.length!==c.length)return!1;for(let D=0;D<f.length;++D)if(!p(f[D],c[D],d,h))return!1;return!0}for(const D of f)for(const k of c)if(p(D,k,d,h))return!0}else if(u===a.set){if(f.size!==c.size)return!1;if(!l.isSetSimpleEqual(f,c)){const D=new Set(Set.prototype.values.call(c));for(const k of Set.prototype.values.call(f)){if(D.delete(k))continue;let R=!1;for(const O of D)if(p(k,O,d,h)){D.delete(O),R=!0;break}if(!R)return!1}}}else if(u===a.map){if(f.size!==c.size)return!1;for(const[D,k]of Map.prototype.entries.call(f))if(k===void 0&&!Map.prototype.has.call(c,D)||!p(k,Map.prototype.get.call(c,D),d,h))return!1}else if(u===a.error&&(f.name!==c.name||f.message!==c.message))return!1;const w=g(f),E=g(c);if((f!==w||c!==E)&&!p(w,E,d,h))return!1;const A=y(f);if(!d.part&&A.length!==y(c).length&&!d.skip)return!1;let T=0;for(const D of A)if(d.skip&&d.skip.includes(D))c[D]===void 0&&++T;else if(!v(c,D)||!p(f[D],c[D],d,h))return!1;if(!d.part&&A.length-T!==y(c).length)return!1;if(d.symbols!==!1){const D=b(f),k=new Set(b(c));for(const R of D){if(!d.skip||!d.skip.includes(R)){if(v(f,R)){if(!v(c,R)||!p(f[R],c[R],d,h))return!1}else if(v(c,R))return!1}k.delete(R)}for(const R of k)if(v(c,R))return!1}return!0},l.SeenEntry=class{constructor(u,f){this.obj=u,this.ref=f}isSame(u,f){return this.obj===u&&this.ref===f}}},7916:(i,s,o)=>{const a=o(8761);i.exports=class extends Error{constructor(l){super(l.filter(u=>u!=="").map(u=>typeof u=="string"?u:u instanceof Error?u.message:a(u)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,s.assert)}}},5277:i=>{const s={};i.exports=function(o){if(!o)return"";let a="";for(let l=0;l<o.length;++l){const u=o.charCodeAt(l);s.isSafe(u)?a+=o[l]:a+=s.escapeHtmlChar(u)}return a},s.escapeHtmlChar=function(o){return s.namedHtml.get(o)||(o>=256?"&#"+o+";":`&#x${o.toString(16).padStart(2,"0")};`)},s.isSafe=function(o){return s.safeCharCodes.has(o)},s.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),s.safeCharCodes=function(){const o=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&o.add(a);return o}()},6064:i=>{i.exports=function(s){return s.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:i=>{i.exports=function(){}},1687:(i,s,o)=>{const a=o(375),l=o(8571),u=o(7043),f={};i.exports=f.merge=function(c,d,h){if(a(c&&typeof c=="object","Invalid target value: must be an object"),a(d==null||typeof d=="object","Invalid source value: must be null, undefined, or an object"),!d)return c;if(h=Object.assign({nullOverride:!0,mergeArrays:!0},h),Array.isArray(d)){a(Array.isArray(c),"Cannot merge array onto an object"),h.mergeArrays||(c.length=0);for(let g=0;g<d.length;++g)c.push(l(d[g],{symbols:h.symbols}));return c}const p=u.keys(d,h);for(let g=0;g<p.length;++g){const v=p[g];if(v==="__proto__"||!Object.prototype.propertyIsEnumerable.call(d,v))continue;const y=d[v];if(y&&typeof y=="object"){if(c[v]===y)continue;!c[v]||typeof c[v]!="object"||Array.isArray(c[v])!==Array.isArray(y)||y instanceof Date||y instanceof RegExp?c[v]=l(y,{symbols:h.symbols}):f.merge(c[v],y,h)}else(y!=null||h.nullOverride)&&(c[v]=y)}return c}},9621:(i,s,o)=>{const a=o(375),l={};i.exports=function(u,f,c){if(f===!1||f==null)return u;typeof(c=c||{})=="string"&&(c={separator:c});const d=Array.isArray(f);a(!d||!c.separator,"Separator option is not valid for array-based chain");const h=d?f:f.split(c.separator||".");let p=u;for(let g=0;g<h.length;++g){let v=h[g];const y=c.iterables&&l.iterables(p);if(Array.isArray(p)||y==="set"){const b=Number(v);Number.isInteger(b)&&(v=b<0?p.length+b:b)}if(!p||typeof p=="function"&&c.functions===!1||!y&&p[v]===void 0){a(!c.strict||g+1===h.length,"Missing segment",v,"in reach path ",f),a(typeof p=="object"||c.functions===!0||typeof p!="function","Invalid segment",v,"in reach path ",f),p=c.default;break}p=y?y==="set"?[...p][v]:p.get(v):p[v]}return p},l.iterables=function(u){return u instanceof Set?"set":u instanceof Map?"map":void 0}},8761:i=>{i.exports=function(...s){try{return JSON.stringify(...s)}catch(o){return"[Cannot display object: "+o.message+"]"}}},4277:(i,s)=>{const o={};s=i.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},o.typeMap=new Map([["[object Error]",s.error],["[object Map]",s.map],["[object Promise]",s.promise],["[object Set]",s.set],["[object WeakMap]",s.weakMap],["[object WeakSet]",s.weakSet]]),s.getInternalProto=function(a){if(Array.isArray(a))return s.array;if(a instanceof Date)return s.date;if(a instanceof RegExp)return s.regex;if(a instanceof Error)return s.error;const l=Object.prototype.toString.call(a);return o.typeMap.get(l)||s.generic}},7043:(i,s)=>{s.keys=function(o,a={}){return a.symbols!==!1?Reflect.ownKeys(o):Object.getOwnPropertyNames(o)}},3652:(i,s,o)=>{const a=o(375),l={};s.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(u,f){const c=[].concat((f=f||{}).before||[]),d=[].concat(f.after||[]),h=f.group||"?",p=f.sort||0;a(!c.includes(h),`Item cannot come before itself: ${h}`),a(!c.includes("?"),"Item cannot come before unassociated items"),a(!d.includes(h),`Item cannot come after itself: ${h}`),a(!d.includes("?"),"Item cannot come after unassociated items"),Array.isArray(u)||(u=[u]);for(const g of u){const v={seq:this._items.length,sort:p,before:c,after:d,group:h,node:g};this._items.push(v)}if(!f.manual){const g=this._sort();a(g,"item",h!=="?"?`added into group ${h}`:"","created a dependencies error")}return this.nodes}merge(u){Array.isArray(u)||(u=[u]);for(const c of u)if(c)for(const d of c._items)this._items.push(Object.assign({},d));this._items.sort(l.mergeSort);for(let c=0;c<this._items.length;++c)this._items[c].seq=c;const f=this._sort();return a(f,"merge created a dependencies error"),this.nodes}sort(){const u=this._sort();return a(u,"sort created a dependencies error"),this.nodes}_sort(){const u={},f=Object.create(null),c=Object.create(null);for(const v of this._items){const y=v.seq,b=v.group;c[b]=c[b]||[],c[b].push(y),u[y]=v.before;for(const w of v.after)f[w]=f[w]||[],f[w].push(y)}for(const v in u){const y=[];for(const b in u[v]){const w=u[v][b];c[w]=c[w]||[],y.push(...c[w])}u[v]=y}for(const v in f)if(c[v])for(const y of c[v])u[y].push(...f[v]);const d={};for(const v in u){const y=u[v];for(const b of y)d[b]=d[b]||[],d[b].push(v)}const h={},p=[];for(let v=0;v<this._items.length;++v){let y=v;if(d[v]){y=null;for(let b=0;b<this._items.length;++b){if(h[b]===!0)continue;d[b]||(d[b]=[]);const w=d[b].length;let E=0;for(let A=0;A<w;++A)h[d[b][A]]&&++E;if(E===w){y=b;break}}}y!==null&&(h[y]=!0,p.push(y))}if(p.length!==this._items.length)return!1;const g={};for(const v of this._items)g[v.seq]=v;this._items=[],this.nodes=[];for(const v of p){const y=g[v];this.nodes.push(y.node),this._items.push(y)}return!0}},l.mergeSort=(u,f)=>u.sort===f.sort?0:u.sort<f.sort?-1:1},5380:(i,s,o)=>{const a=o(443),l=o(2178),u={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};s.analyze=function(f,c={}){if(!f)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof f!="string")throw new Error("Invalid input: domain must be a string");if(f.length>256)return l.code("DOMAIN_TOO_LONG");if(u.nonAsciiRx.test(f)){if(c.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");f=f.normalize("NFC")}if(u.domainControlRx.test(f))return l.code("DOMAIN_INVALID_CHARS");f=u.punycode(f),c.allowFullyQualified&&f[f.length-1]==="."&&(f=f.slice(0,-1));const d=c.minDomainSegments||u.minDomainSegments,h=f.split(".");if(h.length<d)return l.code("DOMAIN_SEGMENTS_COUNT");if(c.maxDomainSegments&&h.length>c.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const p=c.tlds;if(p){const g=h[h.length-1].toLowerCase();if(p.deny&&p.deny.has(g)||p.allow&&!p.allow.has(g))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let g=0;g<h.length;++g){const v=h[g];if(!v.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(v.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(g<h.length-1){if(!u.domainSegmentRx.test(v))return l.code("DOMAIN_INVALID_CHARS")}else if(!u.tldSegmentRx.test(v))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},s.isValid=function(f,c){return!s.analyze(f,c)},u.punycode=function(f){f.includes("%")&&(f=f.replace(/%/g,"%25"));try{return new u.URL(`http://${f}`).host}catch{return f}}},1745:(i,s,o)=>{const a=o(9848),l=o(5380),u=o(2178),f={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};s.analyze=function(c,d){return f.email(c,d)},s.isValid=function(c,d){return!f.email(c,d)},f.email=function(c,d={}){if(typeof c!="string")throw new Error("Invalid input: email must be a string");if(!c)return u.code("EMPTY_STRING");const h=!f.nonAsciiRx.test(c);if(!h){if(d.allowUnicode===!1)return u.code("FORBIDDEN_UNICODE");c=c.normalize("NFC")}const p=c.split("@");if(p.length!==2)return p.length>2?u.code("MULTIPLE_AT_CHAR"):u.code("MISSING_AT_CHAR");const[g,v]=p;if(!g)return u.code("EMPTY_LOCAL");if(!d.ignoreLength){if(c.length>254)return u.code("ADDRESS_TOO_LONG");if(f.encoder.encode(g).length>64)return u.code("LOCAL_TOO_LONG")}return f.local(g,h)||l.analyze(v,d)},f.local=function(c,d){const h=c.split(".");for(const p of h){if(!p.length)return u.code("EMPTY_LOCAL_SEGMENT");if(d){if(!f.atextRx.test(p))return u.code("INVALID_LOCAL_CHARS")}else for(const g of p){if(f.atextRx.test(g))continue;const v=f.binary(g);if(!f.atomRx.test(v))return u.code("INVALID_LOCAL_CHARS")}}},f.binary=function(c){return Array.from(f.encoder.encode(c)).map(d=>String.fromCharCode(d)).join("")},f.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,f.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(i,s)=>{s.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},s.code=function(o){return{code:o,error:s.codes[o]}}},9959:(i,s,o)=>{const a=o(375),l=o(5752);s.regex=function(u={}){a(u.cidr===void 0||typeof u.cidr=="string","options.cidr must be a string");const f=u.cidr?u.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(f),"options.cidr must be one of required, optional, forbidden"),a(u.version===void 0||typeof u.version=="string"||Array.isArray(u.version),"options.version must be a string or an array of string");let c=u.version||["ipv4","ipv6","ipvfuture"];Array.isArray(c)||(c=[c]),a(c.length>=1,"options.version must have at least 1 version specified");for(let p=0;p<c.length;++p)a(typeof c[p]=="string","options.version must only contain strings"),c[p]=c[p].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(c[p]),"options.version contains unknown version "+c[p]+" - must be one of ipv4, ipv6, ipvfuture");c=Array.from(new Set(c));const d=`(?:${c.map(p=>{if(f==="forbidden")return l.ip[p];const g=`\\/${p==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return f==="required"?`${l.ip[p]}${g}`:`${l.ip[p]}(?:${g})?`}).join("|")})`,h=new RegExp(`^${d}$`);return{cidr:f,versions:c,regex:h,raw:d}}},5752:(i,s,o)=>{const a=o(375),l=o(6064),u={generate:function(){const f={},c="\\dA-Fa-f",d="["+c+"]",h="\\w-\\.~",p="!\\$&'\\(\\)\\*\\+,;=",g="%"+c,v=h+g+p+":@",y="["+v+"]",b="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";f.ipv4address="(?:"+b+"\\.){3}"+b;const w=d+"{1,4}",E="(?:"+w+":"+w+"|"+f.ipv4address+")",A="(?:"+w+":){6}"+E,T="::(?:"+w+":){5}"+E,D="(?:"+w+")?::(?:"+w+":){4}"+E,k="(?:(?:"+w+":){0,1}"+w+")?::(?:"+w+":){3}"+E,R="(?:(?:"+w+":){0,2}"+w+")?::(?:"+w+":){2}"+E,O="(?:(?:"+w+":){0,3}"+w+")?::"+w+":"+E,B="(?:(?:"+w+":){0,4}"+w+")?::"+E,K="(?:(?:"+w+":){0,5}"+w+")?::"+w,L="(?:(?:"+w+":){0,6}"+w+")?::";f.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",f.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",f.ipv6address="(?:"+A+"|"+T+"|"+D+"|"+k+"|"+R+"|"+O+"|"+B+"|"+K+"|"+L+")",f.ipvFuture="v"+d+"+\\.["+h+p+":]+",f.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",f.schemeRegex=new RegExp(f.scheme);const $="["+h+g+p+":]*",I="["+h+g+p+"]{1,255}",U="(?:\\[(?:"+f.ipv6address+"|"+f.ipvFuture+")\\]|"+f.ipv4address+"|"+I+")",q="(?:"+$+"@)?"+U+"(?::\\d*)?",Y="(?:"+$+"@)?("+U+")(?::\\d*)?",X=y+"*",te=y+"+",le="(?:\\/"+X+")*",ee="\\/(?:"+te+le+")?",z=te+le,he="["+h+g+p+"@]+"+le,de="(?:\\/\\/\\/"+X+le+")";return f.hierPart="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+z+"|"+de+")",f.hierPartCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+z+")",f.relativeRef="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+he+"|)",f.relativeRefCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+he+"|)",f.query="["+v+"\\/\\?]*(?=#|$)",f.queryWithSquareBrackets="["+v+"\\[\\]\\/\\?]*(?=#|$)",f.fragment="["+v+"\\/\\?]*",f}};u.rfc3986=u.generate(),s.ip={v4Cidr:u.rfc3986.ipv4Cidr,v6Cidr:u.rfc3986.ipv6Cidr,ipv4:u.rfc3986.ipv4address,ipv6:u.rfc3986.ipv6address,ipvfuture:u.rfc3986.ipvFuture},u.createRegex=function(f){const c=u.rfc3986,d="(?:\\?"+(f.allowQuerySquareBrackets?c.queryWithSquareBrackets:c.query)+")?(?:#"+c.fragment+")?",h=f.domain?c.relativeRefCapture:c.relativeRef;if(f.relativeOnly)return u.wrap(h+d);let p="";if(f.scheme){a(f.scheme instanceof RegExp||typeof f.scheme=="string"||Array.isArray(f.scheme),"scheme must be a RegExp, String, or Array");const y=[].concat(f.scheme);a(y.length>=1,"scheme must have at least 1 scheme specified");const b=[];for(let w=0;w<y.length;++w){const E=y[w];a(E instanceof RegExp||typeof E=="string","scheme at position "+w+" must be a RegExp or String"),E instanceof RegExp?b.push(E.source.toString()):(a(c.schemeRegex.test(E),"scheme at position "+w+" must be a valid scheme"),b.push(l(E)))}p=b.join("|")}const g="(?:"+(p?"(?:"+p+")":c.scheme)+":"+(f.domain?c.hierPartCapture:c.hierPart)+")",v=f.allowRelative?"(?:"+g+"|"+h+")":g;return u.wrap(v+d,p)},u.wrap=function(f,c){return{raw:f=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${f}`,regex:new RegExp(`^${f}$`),scheme:c}},u.uriRegex=u.createRegex({}),s.regex=function(f={}){return f.scheme||f.allowRelative||f.relativeOnly||f.allowQuerySquareBrackets||f.domain?u.createRegex(f):u.uriRegex}},1447:(i,s)=>{const o={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};s.Parser=class{constructor(a,l={}){if(!l[o.settings]&&l.constants)for(const u in l.constants){const f=l.constants[u];if(f!==null&&!["boolean","number","string"].includes(typeof f))throw new Error(`Formula constant ${u} contains invalid ${typeof f} value type`)}this.settings=l[o.settings]?l:Object.assign({[o.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(a)}_parse(a){let l=[],u="",f=0,c=!1;const d=p=>{if(f)throw new Error("Formula missing closing parenthesis");const g=l.length?l[l.length-1]:null;if(c||u||p){if(g&&g.type==="reference"&&p===")")return g.type="function",g.value=this._subFormula(u,g.value),void(u="");if(p===")"){const v=new s.Parser(u,this.settings);l.push({type:"segment",value:v})}else if(c){if(c==="]")return l.push({type:"reference",value:u}),void(u="");l.push({type:"literal",value:u})}else if(o.operatorCharacters.includes(u))g&&g.type==="operator"&&o.operators.includes(g.value+u)?g.value+=u:l.push({type:"operator",value:u});else if(u.match(o.numberRx))l.push({type:"constant",value:parseFloat(u)});else if(this.settings.constants[u]!==void 0)l.push({type:"constant",value:this.settings.constants[u]});else{if(!u.match(o.tokenRx))throw new Error(`Formula contains invalid token: ${u}`);l.push({type:"reference",value:u})}u=""}};for(const p of a)c?p===c?(d(),c=!1):u+=p:f?p==="("?(u+=p,++f):p===")"?(--f,f?u+=p:d(p)):u+=p:p in o.literals?c=o.literals[p]:p==="("?(d(),++f):o.operatorCharacters.includes(p)?(d(),u=p,d()):p!==" "?u+=p:d();d(),l=l.map((p,g)=>p.type!=="operator"||p.value!=="-"||g&&l[g-1].type!=="operator"?p:{type:"operator",value:"n"});let h=!1;for(const p of l){if(p.type==="operator"){if(o.operatorsPrefix.includes(p.value))continue;if(!h)throw new Error("Formula contains an operator in invalid position");if(!o.operators.includes(p.value))throw new Error(`Formula contains an unknown operator ${p.value}`)}else if(h)throw new Error("Formula missing expected operator");h=!h}if(!h)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(p=>{if(p.type==="operator")return o.operatorsPrefix.includes(p.value)?p:p.value;if(p.type!=="reference")return p.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(p.value))throw new Error(`Formula contains invalid reference ${p.value}`);return this.settings.reference?this.settings.reference(p.value):o.reference(p.value)})}_subFormula(a,l){const u=this.settings.functions[l];if(typeof u!="function")throw new Error(`Formula contains unknown function ${l}`);let f=[];if(a){let c="",d=0,h=!1;const p=()=>{if(!c)throw new Error(`Formula contains function ${l} with invalid arguments ${a}`);f.push(c),c=""};for(let g=0;g<a.length;++g){const v=a[g];h?(c+=v,v===h&&(h=!1)):v in o.literals&&!d?(c+=v,h=o.literals[v]):v!==","||d?(c+=v,v==="("?++d:v===")"&&--d):p()}p()}return f=f.map(c=>new s.Parser(c,this.settings)),function(c){const d=[];for(const h of f)d.push(h.evaluate(c));return u.call(c,...d)}}evaluate(a){const l=this._parts.slice();for(let u=l.length-2;u>=0;--u){const f=l[u];if(f&&f.type==="operator"){const c=l[u+1];l.splice(u+1,1);const d=o.evaluate(c,a);l[u]=o.single(f.value,d)}}return o.operatorsOrder.forEach(u=>{for(let f=1;f<l.length-1;)if(u.includes(l[f])){const c=l[f],d=o.evaluate(l[f-1],a),h=o.evaluate(l[f+1],a);l.splice(f,2);const p=o.calculate(c,d,h);l[f-1]=p===0?0:p}else f+=2}),o.evaluate(l[0],a)}},s.Parser.prototype[o.symbol]=!0,o.reference=function(a){return function(l){return l&&l[a]!==void 0?l[a]:null}},o.evaluate=function(a,l){return a===null?null:typeof a=="function"?a(l):a[o.symbol]?a.evaluate(l):a},o.single=function(a,l){if(a==="!")return!l;const u=-l;return u===0?0:u},o.calculate=function(a,l,u){if(a==="??")return o.exists(l)?l:u;if(typeof l=="string"||typeof u=="string"){if(a==="+")return(l=o.exists(l)?l:"")+(o.exists(u)?u:"")}else switch(a){case"^":return Math.pow(l,u);case"*":return l*u;case"/":return l/u;case"%":return l%u;case"+":return l+u;case"-":return l-u}switch(a){case"<":return l<u;case"<=":return l<=u;case">":return l>u;case">=":return l>=u;case"==":return l===u;case"!=":return l!==u;case"&&":return l&&u;case"||":return l||u}return null},o.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:i=>{i.exports=JSON.parse('{"version":"17.13.3"}')}},r={},function i(s){var o=r[s];if(o!==void 0)return o.exports;var a=r[s]={exports:{}};return n[s](a,a.exports,i),a.exports}(5107);var n,r})}(O4)),O4.exports}var X9t=Y9t();const Vr=sa(X9t),rNe={id:Vr.string().required()},KAe={...rNe,as:Vr.string().valid("img","video").required(),src:Vr.string().uri().required(),position:Vr.string().valid("center","left","right"),"data-parallax":Vr.boolean().required()},iNe=Vr.object({type:Vr.string().required(),url:Vr.string().when("type",{is:"STAC",then:Vr.string().required(),otherwise:Vr.string().optional()}),properties:Vr.object({id:Vr.string().required()}).unknown().required(),source:Vr.object({type:Vr.string().required()}).unknown().when("type",{is:"STAC",then:Vr.optional(),otherwise:Vr.required()})}).pattern(Vr.string(),Vr.any()),Z9t=Vr.object({type:Vr.string().valid("group","Group"),properties:Vr.object({id:Vr.string().required()}).unknown().required(),layers:Vr.array().items(iNe)}),dz={layers:Vr.array().items(Vr.object().keys({type:Vr.string().required()}).unknown().custom((e,t)=>{const{error:n}=e.type==="Group"?Z9t.validate(e):iNe.validate(e);return n?t.message(n.message):e},"Custom validator for map schema.")).optional(),center:Vr.array().items(Vr.number()).min(2).max(2).optional(),zoom:Vr.number().optional()},sNe={config:Vr.object({...dz}).unknown().optional()},oNe={"eox-map":Vr.object({...rNe,...dz,...sNe}).unknown()},K9t={hero:{img:Vr.object({...KAe}).unknown(),video:Vr.object({...KAe}).unknown()},tour:{"eox-map":oNe["eox-map"],"section-step":Vr.object({...dz,...sNe}).unknown()}};function J9t(e,t){var i,s;let n=[];for(const o of Object.keys(e)){const a=e[o];if(a.as){const l=a.mode?(i=K9t[a.mode])==null?void 0:i[a.as]:oNe[a.as];l&&((s=l.validate(a,{abortEarly:!1}).error)==null||s.details.forEach(f=>{n.push({ref:`#${o}`,message:f.message}),console.error(`#${o}`,f.message)}))}}const r=(t.shadowRoot||t).querySelector("eox-storytelling-editor");setTimeout(()=>r==null?void 0:r.updateErrors(n),300)}/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */var M4,JAe;function QAe(){if(JAe)return M4;JAe=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:s,seal:o,create:a}=Object,{apply:l,construct:u}=typeof Reflect<"u"&&Reflect;s||(s=function(oe){return oe}),o||(o=function(oe){return oe}),l||(l=function(oe,be,F){return oe.apply(be,F)}),u||(u=function(oe,be){return new oe(...be)});const f=T(Array.prototype.forEach),c=T(Array.prototype.pop),d=T(Array.prototype.push),h=T(String.prototype.toLowerCase),p=T(String.prototype.toString),g=T(String.prototype.match),v=T(String.prototype.replace),y=T(String.prototype.indexOf),b=T(String.prototype.trim),w=T(Object.prototype.hasOwnProperty),E=T(RegExp.prototype.test),A=D(TypeError);function T(ie){return function(oe){for(var be=arguments.length,F=new Array(be>1?be-1:0),H=1;H<be;H++)F[H-1]=arguments[H];return l(ie,oe,F)}}function D(ie){return function(){for(var oe=arguments.length,be=new Array(oe),F=0;F<oe;F++)be[F]=arguments[F];return u(ie,be)}}function k(ie,oe){let be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h;t&&t(ie,null);let F=oe.length;for(;F--;){let H=oe[F];if(typeof H=="string"){const J=be(H);J!==H&&(n(oe)||(oe[F]=J),H=J)}ie[H]=!0}return ie}function R(ie){for(let oe=0;oe<ie.length;oe++)w(ie,oe)||(ie[oe]=null);return ie}function O(ie){const oe=a(null);for(const[be,F]of e(ie))w(ie,be)&&(Array.isArray(F)?oe[be]=R(F):F&&typeof F=="object"&&F.constructor===Object?oe[be]=O(F):oe[be]=F);return oe}function B(ie,oe){for(;ie!==null;){const F=i(ie,oe);if(F){if(F.get)return T(F.get);if(typeof F.value=="function")return T(F.value)}ie=r(ie)}function be(){return null}return be}const K=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),q=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Y=s(["#text"]),X=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),te=s(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),le=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ee=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),he=o(/<%[\w\W]*|[\w\W]*%>/gm),de=o(/\$\{[\w\W]*}/gm),ze=o(/^data-[\-\w.\u00B7-\uFFFF]+$/),He=o(/^aria-[\-\w]+$/),je=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),we=o(/^(?:\w+script|data):/i),Ie=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qe=o(/^html$/i),Pe=o(/^[a-z][.\w]*(-[.\w]+)+$/i);var At=Object.freeze({__proto__:null,ARIA_ATTR:He,ATTR_WHITESPACE:Ie,CUSTOM_ELEMENT:Pe,DATA_ATTR:ze,DOCTYPE_NAME:qe,ERB_EXPR:he,IS_ALLOWED_URI:je,IS_SCRIPT_OR_DATA:we,MUSTACHE_EXPR:z,TMPLIT_EXPR:de});const ht={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},nn=function(){return typeof window>"u"?null:window},Vt=function(oe,be){if(typeof oe!="object"||typeof oe.createPolicy!="function")return null;let F=null;const H="data-tt-policy-suffix";be&&be.hasAttribute(H)&&(F=be.getAttribute(H));const J="dompurify"+(F?"#"+F:"");try{return oe.createPolicy(J,{createHTML(re){return re},createScriptURL(re){return re}})}catch{return console.warn("TrustedTypes policy "+J+" could not be created."),null}},Mn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ze(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nn();const oe=Ht=>Ze(Ht);if(oe.version="3.2.3",oe.removed=[],!ie||!ie.document||ie.document.nodeType!==ht.document)return oe.isSupported=!1,oe;let{document:be}=ie;const F=be,H=F.currentScript,{DocumentFragment:J,HTMLTemplateElement:re,Node:ye,Element:xe,NodeFilter:Re,NamedNodeMap:P=ie.NamedNodeMap||ie.MozNamedAttrMap,HTMLFormElement:Q,DOMParser:se,trustedTypes:ae}=ie,ke=xe.prototype,Ce=B(ke,"cloneNode"),Ee=B(ke,"remove"),De=B(ke,"nextSibling"),Oe=B(ke,"childNodes"),We=B(ke,"parentNode");if(typeof re=="function"){const Ht=be.createElement("template");Ht.content&&Ht.content.ownerDocument&&(be=Ht.content.ownerDocument)}let tt,dt="";const{implementation:Kt,createNodeIterator:xt,createDocumentFragment:Qt,getElementsByTagName:rn}=be,{importNode:sn}=F;let on=Mn();oe.isSupported=typeof e=="function"&&typeof We=="function"&&Kt&&Kt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Tn,ERB_EXPR:Er,TMPLIT_EXPR:Ki,DATA_ATTR:ds,ARIA_ATTR:Hi,IS_SCRIPT_OR_DATA:No,ATTR_WHITESPACE:qn,CUSTOM_ELEMENT:Mr}=At;let{IS_ALLOWED_URI:Lr}=At,gn=null;const Kr=k({},[...K,...L,...$,...U,...Y]);let sr=null;const Ni=k({},[...X,...te,...le,...ee]);let tr=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$r=null,to=null,ge=!0,Le=!0,it=!1,Ke=!0,Et=!1,an=!0,en=!1,wt=!1,et=!1,hn=!1,An=!1,zt=!1,jt=!0,Sr=!1;const ci="user-content-";let Zt=!0,Xe=!1,pt={},Xn=null;const ni=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ar=null;const Rr=k({},["audio","video","img","source","image","track"]);let nr=null;const qt=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vi="http://www.w3.org/1998/Math/MathML",Ji="http://www.w3.org/2000/svg",bi="http://www.w3.org/1999/xhtml";let js=bi,xo=!1,no=null;const Bo=k({},[vi,Ji,bi],p);let bs=k({},["mi","mo","mn","ms","mtext"]),Fs=k({},["annotation-xml"]);const zo=k({},["title","style","font","a","script"]);let hs=null;const ol=["application/xhtml+xml","text/html"],al="text/html";let Cr=null,Qi=null;const ro=be.createElement("form"),Os=function(Z){return Z instanceof RegExp||Z instanceof Function},Us=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Qi&&Qi===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=O(Z),hs=ol.indexOf(Z.PARSER_MEDIA_TYPE)===-1?al:Z.PARSER_MEDIA_TYPE,Cr=hs==="application/xhtml+xml"?p:h,gn=w(Z,"ALLOWED_TAGS")?k({},Z.ALLOWED_TAGS,Cr):Kr,sr=w(Z,"ALLOWED_ATTR")?k({},Z.ALLOWED_ATTR,Cr):Ni,no=w(Z,"ALLOWED_NAMESPACES")?k({},Z.ALLOWED_NAMESPACES,p):Bo,nr=w(Z,"ADD_URI_SAFE_ATTR")?k(O(qt),Z.ADD_URI_SAFE_ATTR,Cr):qt,Ar=w(Z,"ADD_DATA_URI_TAGS")?k(O(Rr),Z.ADD_DATA_URI_TAGS,Cr):Rr,Xn=w(Z,"FORBID_CONTENTS")?k({},Z.FORBID_CONTENTS,Cr):ni,$r=w(Z,"FORBID_TAGS")?k({},Z.FORBID_TAGS,Cr):{},to=w(Z,"FORBID_ATTR")?k({},Z.FORBID_ATTR,Cr):{},pt=w(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,ge=Z.ALLOW_ARIA_ATTR!==!1,Le=Z.ALLOW_DATA_ATTR!==!1,it=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,Ke=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Et=Z.SAFE_FOR_TEMPLATES||!1,an=Z.SAFE_FOR_XML!==!1,en=Z.WHOLE_DOCUMENT||!1,hn=Z.RETURN_DOM||!1,An=Z.RETURN_DOM_FRAGMENT||!1,zt=Z.RETURN_TRUSTED_TYPE||!1,et=Z.FORCE_BODY||!1,jt=Z.SANITIZE_DOM!==!1,Sr=Z.SANITIZE_NAMED_PROPS||!1,Zt=Z.KEEP_CONTENT!==!1,Xe=Z.IN_PLACE||!1,Lr=Z.ALLOWED_URI_REGEXP||je,js=Z.NAMESPACE||bi,bs=Z.MATHML_TEXT_INTEGRATION_POINTS||bs,Fs=Z.HTML_INTEGRATION_POINTS||Fs,tr=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Os(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tr.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Os(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tr.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tr.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Et&&(Le=!1),An&&(hn=!0),pt&&(gn=k({},Y),sr=[],pt.html===!0&&(k(gn,K),k(sr,X)),pt.svg===!0&&(k(gn,L),k(sr,te),k(sr,ee)),pt.svgFilters===!0&&(k(gn,$),k(sr,te),k(sr,ee)),pt.mathMl===!0&&(k(gn,U),k(sr,le),k(sr,ee))),Z.ADD_TAGS&&(gn===Kr&&(gn=O(gn)),k(gn,Z.ADD_TAGS,Cr)),Z.ADD_ATTR&&(sr===Ni&&(sr=O(sr)),k(sr,Z.ADD_ATTR,Cr)),Z.ADD_URI_SAFE_ATTR&&k(nr,Z.ADD_URI_SAFE_ATTR,Cr),Z.FORBID_CONTENTS&&(Xn===ni&&(Xn=O(Xn)),k(Xn,Z.FORBID_CONTENTS,Cr)),Zt&&(gn["#text"]=!0),en&&k(gn,["html","head","body"]),gn.table&&(k(gn,["tbody"]),delete $r.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');tt=Z.TRUSTED_TYPES_POLICY,dt=tt.createHTML("")}else tt===void 0&&(tt=Vt(ae,H)),tt!==null&&typeof dt=="string"&&(dt=tt.createHTML(""));s&&s(Z),Qi=Z}},fa=k({},[...L,...$,...I]),qs=k({},[...U,...q]),ll=function(Z){let me=We(Z);(!me||!me.tagName)&&(me={namespaceURI:js,tagName:"template"});const Be=h(Z.tagName),yt=h(me.tagName);return no[Z.namespaceURI]?Z.namespaceURI===Ji?me.namespaceURI===bi?Be==="svg":me.namespaceURI===vi?Be==="svg"&&(yt==="annotation-xml"||bs[yt]):!!fa[Be]:Z.namespaceURI===vi?me.namespaceURI===bi?Be==="math":me.namespaceURI===Ji?Be==="math"&&Fs[yt]:!!qs[Be]:Z.namespaceURI===bi?me.namespaceURI===Ji&&!Fs[yt]||me.namespaceURI===vi&&!bs[yt]?!1:!qs[Be]&&(zo[Be]||!fa[Be]):!!(hs==="application/xhtml+xml"&&no[Z.namespaceURI]):!1},Gi=function(Z){d(oe.removed,{element:Z});try{We(Z).removeChild(Z)}catch{Ee(Z)}},Vi=function(Z,me){try{d(oe.removed,{attribute:me.getAttributeNode(Z),from:me})}catch{d(oe.removed,{attribute:null,from:me})}if(me.removeAttribute(Z),Z==="is")if(hn||An)try{Gi(me)}catch{}else try{me.setAttribute(Z,"")}catch{}},io=function(Z){let me=null,Be=null;if(et)Z="<remove></remove>"+Z;else{const It=g(Z,/^[\r\n\t ]+/);Be=It&&It[0]}hs==="application/xhtml+xml"&&js===bi&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const yt=tt?tt.createHTML(Z):Z;if(js===bi)try{me=new se().parseFromString(yt,hs)}catch{}if(!me||!me.documentElement){me=Kt.createDocument(js,"template",null);try{me.documentElement.innerHTML=xo?dt:yt}catch{}}const pn=me.body||me.documentElement;return Z&&Be&&pn.insertBefore(be.createTextNode(Be),pn.childNodes[0]||null),js===bi?rn.call(me,en?"html":"body")[0]:en?me.documentElement:pn},ps=function(Z){return xt.call(Z.ownerDocument||Z,Z,Re.SHOW_ELEMENT|Re.SHOW_COMMENT|Re.SHOW_TEXT|Re.SHOW_PROCESSING_INSTRUCTION|Re.SHOW_CDATA_SECTION,null)},jo=function(Z){return Z instanceof Q&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof P)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},Hs=function(Z){return typeof ye=="function"&&Z instanceof ye};function fi(Ht,Z,me){f(Ht,Be=>{Be.call(oe,Z,me,Qi)})}const Ma=function(Z){let me=null;if(fi(on.beforeSanitizeElements,Z,null),jo(Z))return Gi(Z),!0;const Be=Cr(Z.nodeName);if(fi(on.uponSanitizeElement,Z,{tagName:Be,allowedTags:gn}),Z.hasChildNodes()&&!Hs(Z.firstElementChild)&&E(/<[/\w]/g,Z.innerHTML)&&E(/<[/\w]/g,Z.textContent)||Z.nodeType===ht.progressingInstruction||an&&Z.nodeType===ht.comment&&E(/<[/\w]/g,Z.data))return Gi(Z),!0;if(!gn[Be]||$r[Be]){if(!$r[Be]&&Wi(Be)&&(tr.tagNameCheck instanceof RegExp&&E(tr.tagNameCheck,Be)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Be)))return!1;if(Zt&&!Xn[Be]){const yt=We(Z)||Z.parentNode,pn=Oe(Z)||Z.childNodes;if(pn&&yt){const It=pn.length;for(let In=It-1;In>=0;--In){const dr=Ce(pn[In],!0);dr.__removalCount=(Z.__removalCount||0)+1,yt.insertBefore(dr,De(Z))}}}return Gi(Z),!0}return Z instanceof xe&&!ll(Z)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&E(/<\/no(script|embed|frames)/i,Z.innerHTML)?(Gi(Z),!0):(Et&&Z.nodeType===ht.text&&(me=Z.textContent,f([Tn,Er,Ki],yt=>{me=v(me,yt," ")}),Z.textContent!==me&&(d(oe.removed,{element:Z.cloneNode()}),Z.textContent=me)),fi(on.afterSanitizeElements,Z,null),!1)},so=function(Z,me,Be){if(jt&&(me==="id"||me==="name")&&(Be in be||Be in ro))return!1;if(!(Le&&!to[me]&&E(ds,me))){if(!(ge&&E(Hi,me))){if(!sr[me]||to[me]){if(!(Wi(Z)&&(tr.tagNameCheck instanceof RegExp&&E(tr.tagNameCheck,Z)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Z))&&(tr.attributeNameCheck instanceof RegExp&&E(tr.attributeNameCheck,me)||tr.attributeNameCheck instanceof Function&&tr.attributeNameCheck(me))||me==="is"&&tr.allowCustomizedBuiltInElements&&(tr.tagNameCheck instanceof RegExp&&E(tr.tagNameCheck,Be)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Be))))return!1}else if(!nr[me]){if(!E(Lr,v(Be,qn,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&Z!=="script"&&y(Be,"data:")===0&&Ar[Z])){if(!(it&&!E(No,v(Be,qn,"")))){if(Be)return!1}}}}}}return!0},Wi=function(Z){return Z!=="annotation-xml"&&g(Z,Mr)},oo=function(Z){fi(on.beforeSanitizeAttributes,Z,null);const{attributes:me}=Z;if(!me||jo(Z))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:sr,forceKeepAttr:void 0};let yt=me.length;for(;yt--;){const pn=me[yt],{name:It,namespaceURI:In,value:dr}=pn,kr=Cr(It);let Ln=It==="value"?dr:b(dr);if(Be.attrName=kr,Be.attrValue=Ln,Be.keepAttr=!0,Be.forceKeepAttr=void 0,fi(on.uponSanitizeAttribute,Z,Be),Ln=Be.attrValue,Sr&&(kr==="id"||kr==="name")&&(Vi(It,Z),Ln=ci+Ln),an&&E(/((--!?|])>)|<\/(style|title)/i,Ln)){Vi(It,Z);continue}if(Be.forceKeepAttr||(Vi(It,Z),!Be.keepAttr))continue;if(!Ke&&E(/\/>/i,Ln)){Vi(It,Z);continue}Et&&f([Tn,Er,Ki],Jr=>{Ln=v(Ln,Jr," ")});const Ai=Cr(Z.nodeName);if(so(Ai,kr,Ln)){if(tt&&typeof ae=="object"&&typeof ae.getAttributeType=="function"&&!In)switch(ae.getAttributeType(Ai,kr)){case"TrustedHTML":{Ln=tt.createHTML(Ln);break}case"TrustedScriptURL":{Ln=tt.createScriptURL(Ln);break}}try{In?Z.setAttributeNS(In,It,Ln):Z.setAttribute(It,Ln),jo(Z)?Gi(Z):c(oe.removed)}catch{}}}fi(on.afterSanitizeAttributes,Z,null)},ul=function Ht(Z){let me=null;const Be=ps(Z);for(fi(on.beforeSanitizeShadowDOM,Z,null);me=Be.nextNode();)fi(on.uponSanitizeShadowNode,me,null),Ma(me),oo(me),me.content instanceof J&&Ht(me.content);fi(on.afterSanitizeShadowDOM,Z,null)};return oe.sanitize=function(Ht){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Be=null,yt=null,pn=null;if(xo=!Ht,xo&&(Ht="<!-->"),typeof Ht!="string"&&!Hs(Ht))if(typeof Ht.toString=="function"){if(Ht=Ht.toString(),typeof Ht!="string")throw A("dirty is not a string, aborting")}else throw A("toString is not a function");if(!oe.isSupported)return Ht;if(wt||Us(Z),oe.removed=[],typeof Ht=="string"&&(Xe=!1),Xe){if(Ht.nodeName){const dr=Cr(Ht.nodeName);if(!gn[dr]||$r[dr])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(Ht instanceof ye)me=io("<!---->"),Be=me.ownerDocument.importNode(Ht,!0),Be.nodeType===ht.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?me=Be:me.appendChild(Be);else{if(!hn&&!Et&&!en&&Ht.indexOf("<")===-1)return tt&&zt?tt.createHTML(Ht):Ht;if(me=io(Ht),!me)return hn?null:zt?dt:""}me&&et&&Gi(me.firstChild);const It=ps(Xe?Ht:me);for(;yt=It.nextNode();)Ma(yt),oo(yt),yt.content instanceof J&&ul(yt.content);if(Xe)return Ht;if(hn){if(An)for(pn=Qt.call(me.ownerDocument);me.firstChild;)pn.appendChild(me.firstChild);else pn=me;return(sr.shadowroot||sr.shadowrootmode)&&(pn=sn.call(F,pn,!0)),pn}let In=en?me.outerHTML:me.innerHTML;return en&&gn["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&E(qe,me.ownerDocument.doctype.name)&&(In="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+In),Et&&f([Tn,Er,Ki],dr=>{In=v(In,dr," ")}),tt&&zt?tt.createHTML(In):In},oe.setConfig=function(){let Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Us(Ht),wt=!0},oe.clearConfig=function(){Qi=null,wt=!1},oe.isValidAttribute=function(Ht,Z,me){Qi||Us({});const Be=Cr(Ht),yt=Cr(Z);return so(Be,yt,me)},oe.addHook=function(Ht,Z){typeof Z=="function"&&d(on[Ht],Z)},oe.removeHook=function(Ht){return c(on[Ht])},oe.removeHooks=function(Ht){on[Ht]=[]},oe.removeAllHooks=function(){on=Mn()},oe}var pe=Ze();return M4=pe,M4}var $4,eCe;function Q9t(){return eCe||(eCe=1,$4=window.DOMPurify||(window.DOMPurify=QAe().default||QAe())),$4}var e7t=Q9t();const t7t=sa(e7t);function aNe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function n7t(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const r7t=[["","ss"],["","Ss"],["","ae"],["","Ae"],["","oe"],["","Oe"],["","ue"],["","Ue"],["","A"],["","A"],["","A"],["","A"],["","Ae"],["","A"],["","AE"],["","C"],["","E"],["","E"],["","E"],["","E"],["","I"],["","I"],["","I"],["","I"],["","D"],["","N"],["","O"],["","O"],["","O"],["","O"],["","Oe"],["","O"],["","O"],["","U"],["","U"],["","U"],["","Ue"],["","U"],["","Y"],["","TH"],["","ss"],["","a"],["","a"],["","a"],["","a"],["","ae"],["","a"],["","ae"],["","c"],["","e"],["","e"],["","e"],["","e"],["","i"],["","i"],["","i"],["","i"],["","d"],["","n"],["","o"],["","o"],["","o"],["","o"],["","oe"],["","o"],["","o"],["","u"],["","u"],["","u"],["","ue"],["","u"],["","y"],["","th"],["","y"],["","SS"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","a"],["","A"],["","D"],["","d"],["","i"],["","I"],["","u"],["","U"],["","o"],["","O"],["","u"],["","U"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","p"],["","z"],["","c"],["","d"],["","d"],["","r"],["","r"],["","z"],["","g"],["","x"],["","g"],["","n"],["","e"],["","e"],["","ai"],["","t"],["","d"],["","r"],["","n"],["","h"],["","h"],["","e"],["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"],["","a"],["","A"],["","s"],["","S"],["","t"],["","T"],["","t"],["","T"],["","s"],["","S"],["","c"],["","C"],["","g"],["","G"],["","i"],["","I"],["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"],["","a"],["","b"],["","g"],["","d"],["","e"],["","v"],["","z"],["","t"],["","i"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","zh"],["","r"],["","s"],["","t"],["","u"],["","ph"],["","q"],["","gh"],["","k"],["","sh"],["","ch"],["","ts"],["","dz"],["","ts"],["","tch"],["","kh"],["","j"],["","h"],["","c"],["","d"],["","e"],["","n"],["","r"],["","s"],["","t"],["","u"],["","z"],["","C"],["","D"],["","E"],["","N"],["","R"],["","S"],["","T"],["","U"],["","Z"],["","h"],["","sh"],["","n"],["","r"],["","b"],["","lh"],["","k"],["","a"],["","v"],["","m"],["","f"],["","dh"],["","th"],["","l"],["","g"],["","gn"],["","s"],["","d"],["","z"],["","t"],["","y"],["","p"],["","j"],["","ch"],["","tt"],["","hh"],["","kh"],["","th"],["","z"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","a"],["","gh"],["","q"],["","w"],["","a"],["","aa"],["","i"],["","ee"],["","u"],["","oo"],["","e"],["","ey"],["","o"],["","oa"],["",""],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"],["","a"],["","e"],["","g"],["","i"],["","k"],["","l"],["","n"],["","u"],["","A"],["","E"],["","G"],["","I"],["","K"],["","L"],["","N"],["","U"],["","c"],["","s"],["","z"],["","C"],["","S"],["","Z"],["","a"],["","c"],["","e"],["","e"],["","i"],["","s"],["","u"],["","u"],["","z"],["","A"],["","C"],["","E"],["","E"],["","I"],["","S"],["","U"],["","U"],["","Kj"],["","kj"],["","Lj"],["","lj"],["","Nj"],["","nj"],["","Ts"],["","ts"],["","a"],["","c"],["","e"],["","l"],["","n"],["","s"],["","z"],["","z"],["","A"],["","C"],["","E"],["","L"],["","N"],["","S"],["","Z"],["","Z"],["","Ye"],["","I"],["","Yi"],["","G"],["","ye"],["","i"],["","yi"],["","g"],["","IJ"],["","ij"],["","c"],["","Y"],["","b"],["","t"],["","Bo"],["","B"],["","CE"],["","C"],["","Cr"],["","F"],["","m"],["","N"],["","Pt"],["","Rs"],["","W"],["","s"],["","E"],["","K"],["","T"],["","Dp"],["","S"],["","P"],["","G"],["","A"],["","S"],["","C"],["","tt"],["","S"],["","T"],["","R"],["","L"],["","P"],["","B"],["","$"],["","c"],["","Y"],["","W"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","C"],["","D"],["","g"],["","J"],["","K"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","f"],["","h"],["","i"],["","j"],["","h"],["","l"],["","m"],["","n"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","l"],["","j"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","x"],["","PS"],["","O"],["","D"],["","a"],["","b"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","d"],["","E"],["","TH"],["","K"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","av"],["","g"],["","d"],["","e"],["","z"],["","i"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","F"],["","f"],["","(a)"],["","(b)"],["","(c)"],["","(d)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","(A)"],["","(B)"],["","(C)"],["","(D)"],["","(E)"],["","(F)"],["","(G)"],["","(H)"],["","(I)"],["","(J)"],["","(K)"],["","(L)"],["","(N)"],["","(O)"],["","(P)"],["","(Q)"],["","(R)"],["","(S)"],["","(T)"],["","(U)"],["","(V)"],["","(W)"],["","(X)"],["","(Y)"],["","(Z)"],["","(a)"],["","(b)"],["","(b)"],["","(c)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","C"],["","c"],["","G"],["","g"],["","H"],["","h"],["","Z"],["","z"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1."],["","2."],["","3."],["","4."],["","5."],["","6."],["","7."],["","8."],["","9."],["","10."],["","11."],["","12."],["","13."],["","14."],["","15."],["","16."],["","17."],["","18."],["","19."],["","20."],["","0"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","0"],["","&"],["","&"],["","&"],["","&"],["","&"],["","&"],["",'"'],["",'"'],["",'"'],["","?!"],["","?!"],["","?!"],["","?!"],["","/"],["","\\"],["","AR"],["","V"],["","V"],["","VR"],["","VF"],["","2"],["","5"],["","f"],["","W"],["","U"],["","V"],["","T"],["","V"],["","MB"],["","VB"],["","3B"],["","3B"],["","100"],["","BACK"],["","END"],["","ON!"],["","SOON"],["","TOP"],["","18"],["","abc"],["","ABCD"],["","abcd"],["","1234"],["","T&@%"],["#","#"],["*","*"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["","10"],["","A"],["","B"],["","AB"],["","CL"],["","O"],["","P"],["","SOS"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"]],i7t=(e,t)=>{for(const[n,r]of t)e=e.replace(new RegExp(n7t(n),"g"),r);return e};function s7t(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={customReplacements:[],...t};const n=new Map([...r7t,...t.customReplacements]);return e=e.normalize(),e=i7t(e,n),e=e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),e}const o7t=[["&"," and "],[""," unicorn "],[""," love "]],a7t=e=>e.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),l7t=(e,t)=>{const n=aNe(t);return e.replace(new RegExp(`${n}{2,}`,"g"),t).replace(new RegExp(`^${n}|${n}$`,"g"),"")},u7t=e=>{let t="a-z\\d";if(t+=e.lowercase?"":"A-Z",e.preserveCharacters.length>0)for(const n of e.preserveCharacters){if(n===e.separator)throw new Error(`The separator character \`${e.separator}\` cannot be included in preserved characters: ${e.preserveCharacters}`);t+=aNe(n)}return new RegExp(`[^${t}]+`,"g")};function c7t(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...t};const n=t.preserveLeadingUnderscore&&e.startsWith("_"),r=t.preserveTrailingDash&&e.endsWith("-"),i=new Map([...o7t,...t.customReplacements]);e=s7t(e,{customReplacements:i}),t.decamelize&&(e=a7t(e));const s=u7t(t);return t.lowercase&&(e=e.toLowerCase()),e=e.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),e=e.replace(s,t.separator),e=e.replace(/\\/g,""),t.separator&&(e=l7t(e,t.separator)),n&&(e=`_${e}`),r&&(e=`${e}-`),e}function f7t(e){e.core.ruler.push("curly_attributes",d7t)}function d7t(e){e.md.nav=[],e.md.attrs={keys:[],sections:{}},e.md.sections={};const t=e.tokens,n=[];let r;const i={len:0,contents:[],types:{}},s=[];let o=[],a=!1,l=0,u=!1,f=0;for(let c=0;c<t.length;c++){const d=t[c];if(d.tag==="p"){const{shouldContinue:p}=h7t(t,t[c+1]);if(p){c=c+2;continue}}if((lNe(d.type)||Z8e[d.type])&&fNe(i,d),d.tag==="h1"||d.tag==="h2"){const p=m7t(c,t,o,a,l,u,f,e,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,f=p.sectionStepsIndex}if(d.tag==="h3"){const p=g7t(c,t,o,a,l,u,f,e,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,f=p.sectionStepsIndex}if(d.type==="html_block"){const p=d.content.match(X8e);if(!p){d.level=d.level+1,o.push(d);continue}r=cNe(i,p[1],p[2]),r&&ov(r,p[3])&&n.unshift(c)}d.type==="inline"&&(o=p7t(d,i,s,o,l,f,u)),d.level=d.level+1,o.push(d);const h=Au(i.last.attrs,"as");i.last.markup==="#"&&YNt.includes(h)&&(o=y7t(o,e,i),c++)}a&&(uNe(o,l),K$(o,l,e)),u&&K$(o,f,e),b7t(o,e.md),n.forEach(c=>t.splice(c,1)),e.tokens=o,e.md.nav=s||[]}function Hd(e,t,n,r,i,s=null){const o=new e.Token(i,t,n);return o.attrs=s,o.nesting=r,o}function lNe(e){return e.match(/_(open|start)$/)||e==="fence"||e==="code_block"}function h7t(e,t){const n=/\r\n|\r|\n/,r=/mode\s*=\s*(['"])fallback\1/g;let i=!1;if(r.test((t==null?void 0:t.content)||""))if(n.test(t.content)){const s=t.content.split(n);s.shift(),t.content=s.join(/\n/),t.children[0].type==="text"&&t.children.shift(),t.children.shift()}else i=!0;return{shouldContinue:i}}function p7t(e,t,n,r,i,s,o){let a;const l=[];if(e.children.forEach((u,f)=>{(lNe(u.type)||Z8e[u.type]||u.type==="code_inline")&&fNe(t,u);const c=u.content.match(X8e);if(c){const d=cNe(t,c[1],c[2]);d&&ov(d,c[3])&&(l.unshift(f),a&&v7t(a,"content"))}u.type==="text"&&(a=u)}),t.last.tag==="h3"&&o&&s!==-1){const u=r[s];u.section=r[i].id,ov(u,t.last.attrStr)}if(t.last.tag==="h1"||t.last.tag==="h2"){const u=a&&a.content,f=Au(t.last.attrs,"id"),c=Au(t.last.attrs,"as"),d=Au(t.last.attrs,"mode")||"container",h=Au(t.last.attrs,"position")||"left",p=c7t(u||""),g=f||p,v=`section-${g}`,b=Au(t.last.attrs,"nav")!=="false";t.last.tag==="h2"&&u&&n.push({title:u,id:v,state:b});const w=r[i],E=r[r.length-1],A=`.${d} .${h}`;w.attrs.push(["id",v]),w.id=v,c&&(E.tag=c,E.type="html_open",E.as=c,E.section=v,e.type="html_inline",e.content="",e.children=null,ov(E,`${a?`title='${a.content}'`:""}${t.last.attrStr} #${g}`),w.mode=d,w.position=h,ov(w,`#${v} .${w.attrs[0][1]} .section-custom`)),ov(w,A)}return e.children&&l.forEach(u=>e.children.splice(u,1)),r}function m7t(e,t,n,r,i,s,o,a,l){const u=t[e];if(u.type==="heading_close"&&(u.tag=n[n.length-2].tag,u.type=n[n.length-2].type.replace("_open","_close")),u.type==="heading_open"){if(r){s&&(K$(n,o,a),s=!1,o=-1);const f=n[i].tag;uNe(n,i),n.push(Hd(a,f,-1,-1,"html_close")),r=!1,i=-1}r||(n.push(Hd(a,"div",0,1,"html_open",[["class","section-wrap"]])),r=!0,i=n.length-1,l.last.as=!!t[e+1].content.includes("as="))}return{sectionStart:r,sectionStartIndex:i,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:n}}function g7t(e,t,n,r,i,s,o,a,l){return t[e].type==="heading_open"&&r&&n[i].mode==="tour"&&(s&&(n.push(Hd(a,"section-step",-1,-1,"html_close")),s=!1,o=-1),s||(n.push(Hd(a,"section-step",0,1,"html_open")),s=!0,o=n.length-1,l.last.as=!!t[e+1].content.includes("as="))),{sectionStart:r,sectionStartIndex:i,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:n}}function y7t(e,t,n){return e.push(Hd(t,n.last.tag,1,-1,"html_close",null)),e.push(Hd(t,"h1",1,1,"html_open",null)),e.push(Hd(t,"h1",2,0,"html_inline",null)),e[e.length-1].content=Au(n.last.attrs,"title"),e.push(Hd(t,"h1",1,-1,"html_close",null)),e}function uNe(e,t){const n=e[t+1],r=Au(n.attrs,"as"),i=Au(n.attrs,"mode");r&&!i&&(e.splice(t+2,1),e.slice(t+3).forEach(s=>{s.level=1}),e.push(e[t+2]),e.splice(t+2,1))}function K$(e,t,n){const r=e[t].tag;e.push(Hd(n,r,-1,-1,"html_close"))}function Au(e,t){var n;return((n=(e||[]).find(r=>r[0]===t))==null?void 0:n[1])||null}function cNe(e,t,n){if(!t)return e.last;n==="^"?n=1:typeof n=="string"?n=+n.slice(1):n=0;const i=(VNt[t.toLowerCase()]||[t.toLowerCase()]).find(o=>e.types[o]),s=e.types[i];if(s)return s[s.length-1-n]}function ov(e,t=""){var s,o;let n;for(e.attrStr=t;t.length>0;)if(n=t.match(/^\s*\.([a-zA-Z0-9\-_]+)/))Kh(e,"class",n[1],{append:!0}),t=t.slice(n[0].length);else if(n=t.match(/^\s*#([a-zA-Z0-9\-_]+)/))Kh(e,"id",n[1]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)="([^"]*)"/))Kh(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)='([^']*)'/))Kh(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)=([^ ]*)/))Kh(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)/))Kh(e,n[1],""),t=t.slice(n[0].length);else if(n=t.match(/^\s+/))t=t.slice(n[0].length);else if(n=t.match(/^\s*as="([a-zA-Z0-9\-_]+)"/))Kh(e,"as",n[1]),t=t.slice(n[0].length);else break;const r=Au(e.attrs,"as"),i=Au(e.attrs,"mode");return(o=(s=WNt[r])==null?void 0:s[i])==null||o.forEach(a=>{Au(e.attrs,a[0])||(Kh(e,a[0],a[1]),t=t.slice(a[0].length))}),!0}function Kh(e,t,n,r={}){const i=e.attrIndex(t);t==="class"&&r.append&&i!==-1?e.attrs[i][1].includes(n)||(e.attrs[i][1]+=` ${n}`):i===-1?e.attrPush([t,n]):r.append?e.attrs[i][1]+=` ${n}`:e.attrs[i][1]=n}function fNe(e,t){const n=t.type.replace(/_(open|start)$/,"");e.types[n]||(e.types[n]=[]),e.types[n].push(t),e.last=t}function v7t(e,t){e[t]=e[t].replace(/\s*$/,"")}function b7t(e,t){e.forEach(n=>{const r=n.attrs||[];let i={};if(x7t(n,t),r.forEach(s=>{t.attrs.keys.includes(s[0])||t.attrs.keys.push(s[0]),i={...i,[s[0]]:tNe(s[1])},n.section&&(w7t(n,s,t),_7t(n,s,t))}),r.length&&n.section){const s=n.tag==="section-step",o=s?` ${n.tag} `:"",a=n.section+o,l=Object.keys(t.attrs.sections).filter(c=>!!c.startsWith(a)).length+1,f=a+(s?l:"");t.attrs.sections={...t.attrs.sections,[f]:{...i,...s?{as:n.tag,mode:"tour"}:{}}}}})}function x7t(e,t){var n,r;e.section&&(e.tag==="section-step"&&!t.sections[e.section].steps&&(t.sections[e.section].steps=[]),(e.markup==="#"||e.markup==="##")&&(t.sections[e.section]=t.sections[e.section]||{}),(r=(n=t.sections[e.section])==null?void 0:n.steps)==null||r.push({}))}function w7t(e,t,n){e.markup==="##"&&(n.sections[e.section]={[t[0]]:fz(t[1]),...n.sections[e.section]})}function _7t(e,t,n){if(e.tag==="section-step"){const r=n.sections[e.section].steps,i=r.length-1,s=r[i];r[i]={[t[0]]:fz(t[1]),...s}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function dNe(e){return typeof e>"u"||e===null}function E7t(e){return typeof e=="object"&&e!==null}function S7t(e){return Array.isArray(e)?e:dNe(e)?[]:[e]}function A7t(e,t){var n,r,i,s;if(t)for(s=Object.keys(t),n=0,r=s.length;n<r;n+=1)i=s[n],e[i]=t[i];return e}function C7t(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function k7t(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var T7t=dNe,D7t=E7t,L7t=S7t,R7t=C7t,F7t=k7t,O7t=A7t,po={isNothing:T7t,isObject:D7t,toArray:L7t,repeat:R7t,isNegativeZero:F7t,extend:O7t};function hNe(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function z2(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=hNe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}z2.prototype=Object.create(Error.prototype);z2.prototype.constructor=z2;z2.prototype.toString=function(t){return this.name+": "+hNe(this,t)};var Xa=z2;function I4(e,t,n,r,i){var s="",o="",a=Math.floor(i/2)-1;return r-t>a&&(s=" ... ",t=r-a+s.length),n-r>a&&(o=" ...",n=r+a-o.length),{str:s+e.slice(t,n).replace(/\t/g,"")+o,pos:r-t+s.length}}function P4(e,t){return po.repeat(" ",t-e.length)+e}function M7t(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=n.exec(e.buffer);)i.push(s.index),r.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,u,f=Math.min(e.line+t.linesAfter,i.length).toString().length,c=t.maxLength-(t.indent+f+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)u=I4(e.buffer,r[o-l],i[o-l],e.position-(r[o]-r[o-l]),c),a=po.repeat(" ",t.indent)+P4((e.line-l+1).toString(),f)+" | "+u.str+`
`+a;for(u=I4(e.buffer,r[o],i[o],e.position,c),a+=po.repeat(" ",t.indent)+P4((e.line+1).toString(),f)+" | "+u.str+`
`,a+=po.repeat("-",t.indent+f+3+u.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)u=I4(e.buffer,r[o+l],i[o+l],e.position-(r[o]-r[o+l]),c),a+=po.repeat(" ",t.indent)+P4((e.line+l+1).toString(),f)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var $7t=M7t,I7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],P7t=["scalar","sequence","mapping"];function N7t(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function B7t(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(I7t.indexOf(n)===-1)throw new Xa('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=N7t(t.styleAliases||null),P7t.indexOf(this.kind)===-1)throw new Xa('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var na=B7t;function tCe(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),n[i]=r}),n}function z7t(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function J$(e){return this.extend(e)}J$.prototype.extend=function(t){var n=[],r=[];if(t instanceof na)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new Xa("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof na))throw new Xa("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Xa("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Xa("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof na))throw new Xa("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(J$.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=tCe(i,"implicit"),i.compiledExplicit=tCe(i,"explicit"),i.compiledTypeMap=z7t(i.compiledImplicit,i.compiledExplicit),i};var pNe=J$,mNe=new na("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),gNe=new na("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),yNe=new na("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),vNe=new pNe({explicit:[mNe,gNe,yNe]});function j7t(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function U7t(){return null}function q7t(e){return e===null}var bNe=new na("tag:yaml.org,2002:null",{kind:"scalar",resolve:j7t,construct:U7t,predicate:q7t,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function H7t(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function G7t(e){return e==="true"||e==="True"||e==="TRUE"}function V7t(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var xNe=new na("tag:yaml.org,2002:bool",{kind:"scalar",resolve:H7t,construct:G7t,predicate:V7t,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function W7t(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Y7t(e){return 48<=e&&e<=55}function X7t(e){return 48<=e&&e<=57}function Z7t(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!W7t(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!Y7t(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!X7t(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function K7t(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function J7t(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!po.isNegativeZero(e)}var wNe=new na("tag:yaml.org,2002:int",{kind:"scalar",resolve:Z7t,construct:K7t,predicate:J7t,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Q7t=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function eBt(e){return!(e===null||!Q7t.test(e)||e[e.length-1]==="_")}function tBt(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var nBt=/^[-+]?[0-9]+e/;function rBt(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(po.isNegativeZero(e))return"-0.0";return n=e.toString(10),nBt.test(n)?n.replace("e",".e"):n}function iBt(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||po.isNegativeZero(e))}var _Ne=new na("tag:yaml.org,2002:float",{kind:"scalar",resolve:eBt,construct:tBt,predicate:iBt,represent:rBt,defaultStyle:"lowercase"}),ENe=vNe.extend({implicit:[bNe,xNe,wNe,_Ne]}),SNe=ENe,ANe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),CNe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sBt(e){return e===null?!1:ANe.exec(e)!==null||CNe.exec(e)!==null}function oBt(e){var t,n,r,i,s,o,a,l=0,u=null,f,c,d;if(t=ANe.exec(e),t===null&&(t=CNe.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(f=+t[10],c=+(t[11]||0),u=(f*60+c)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(n,r,i,s,o,a,l)),u&&d.setTime(d.getTime()-u),d}function aBt(e){return e.toISOString()}var kNe=new na("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sBt,construct:oBt,instanceOf:Date,represent:aBt});function lBt(e){return e==="<<"||e===null}var TNe=new na("tag:yaml.org,2002:merge",{kind:"scalar",resolve:lBt}),hz=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function uBt(e){if(e===null)return!1;var t,n,r=0,i=e.length,s=hz;for(n=0;n<i;n++)if(t=s.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function cBt(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,s=hz,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(t));return n=i%4*6,n===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):n===18?(a.push(o>>10&255),a.push(o>>2&255)):n===12&&a.push(o>>4&255),new Uint8Array(a)}function fBt(e){var t="",n=0,r,i,s=e.length,o=hz;for(r=0;r<s;r++)r%3===0&&r&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[r];return i=s%3,i===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):i===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):i===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function dBt(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var DNe=new na("tag:yaml.org,2002:binary",{kind:"scalar",resolve:uBt,construct:cBt,predicate:dBt,represent:fBt}),hBt=Object.prototype.hasOwnProperty,pBt=Object.prototype.toString;function mBt(e){if(e===null)return!0;var t=[],n,r,i,s,o,a=e;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],o=!1,pBt.call(i)!=="[object Object]")return!1;for(s in i)if(hBt.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function gBt(e){return e!==null?e:[]}var LNe=new na("tag:yaml.org,2002:omap",{kind:"sequence",resolve:mBt,construct:gBt}),yBt=Object.prototype.toString;function vBt(e){if(e===null)return!0;var t,n,r,i,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(r=o[t],yBt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[t]=[i[0],r[i[0]]]}return!0}function bBt(e){if(e===null)return[];var t,n,r,i,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1)r=o[t],i=Object.keys(r),s[t]=[i[0],r[i[0]]];return s}var RNe=new na("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:vBt,construct:bBt}),xBt=Object.prototype.hasOwnProperty;function wBt(e){if(e===null)return!0;var t,n=e;for(t in n)if(xBt.call(n,t)&&n[t]!==null)return!1;return!0}function _Bt(e){return e!==null?e:{}}var FNe=new na("tag:yaml.org,2002:set",{kind:"mapping",resolve:wBt,construct:_Bt}),pz=SNe.extend({implicit:[kNe,TNe],explicit:[DNe,LNe,RNe,FNe]}),im=Object.prototype.hasOwnProperty,_T=1,ONe=2,MNe=3,ET=4,N4=1,EBt=2,nCe=3,SBt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ABt=/[\x85\u2028\u2029]/,CBt=/[,\[\]\{\}]/,$Ne=/^(?:!|!!|![a-z\-]+!)$/i,INe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function rCe(e){return Object.prototype.toString.call(e)}function Rf(e){return e===10||e===13}function Xg(e){return e===9||e===32}function Dl(e){return e===9||e===32||e===10||e===13}function wv(e){return e===44||e===91||e===93||e===123||e===125}function kBt(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function TBt(e){return e===120?2:e===117?4:e===85?8:0}function DBt(e){return 48<=e&&e<=57?e-48:-1}function iCe(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function LBt(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var PNe=new Array(256),NNe=new Array(256);for(var Ky=0;Ky<256;Ky++)PNe[Ky]=iCe(Ky)?1:0,NNe[Ky]=iCe(Ky);function RBt(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||pz,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function BNe(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=$7t(n),new Xa(t,n)}function _n(e,t){throw BNe(e,t)}function ST(e,t){e.onWarning&&e.onWarning.call(null,BNe(e,t))}var sCe={YAML:function(t,n,r){var i,s,o;t.version!==null&&_n(t,"duplication of %YAML directive"),r.length!==1&&_n(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&_n(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&_n(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&ST(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,s;r.length!==2&&_n(t,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],$Ne.test(i)||_n(t,"ill-formed tag handle (first argument) of the TAG directive"),im.call(t.tagMap,i)&&_n(t,'there is a previously declared suffix for "'+i+'" tag handle'),INe.test(s)||_n(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{_n(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function Np(e,t,n,r){var i,s,o,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||_n(e,"expected valid JSON character");else SBt.test(a)&&_n(e,"the stream contains non-printable characters");e.result+=a}}function oCe(e,t,n,r){var i,s,o,a;for(po.isObject(n)||_n(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,a=i.length;o<a;o+=1)s=i[o],im.call(t,s)||(t[s]=n[s],r[s]=!0)}function _v(e,t,n,r,i,s,o,a,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&_n(e,"nested arrays are not supported inside keys"),typeof i=="object"&&rCe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&rCe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,f=s.length;u<f;u+=1)oCe(e,t,s[u],n);else oCe(e,t,s,n);else!e.json&&!im.call(n,i)&&im.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,_n(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete n[i];return t}function mz(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):_n(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Js(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Xg(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Rf(i))for(mz(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&ST(e,"deficient indentation"),r}function jR(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Dl(n)))}function gz(e,t){t===1?e.result+=" ":t>1&&(e.result+=po.repeat(`
`,t-1))}function FBt(e,t,n){var r,i,s,o,a,l,u,f,c=e.kind,d=e.result,h;if(h=e.input.charCodeAt(e.position),Dl(h)||wv(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),Dl(i)||n&&wv(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),Dl(i)||n&&wv(i))break}else if(h===35){if(r=e.input.charCodeAt(e.position-1),Dl(r))break}else{if(e.position===e.lineStart&&jR(e)||n&&wv(h))break;if(Rf(h))if(l=e.line,u=e.lineStart,f=e.lineIndent,Js(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=u,e.lineIndent=f;break}}a&&(Np(e,s,o,!1),gz(e,e.line-l),s=o=e.position,a=!1),Xg(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return Np(e,s,o,!1),e.result?!0:(e.kind=c,e.result=d,!1)}function OBt(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Np(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Rf(n)?(Np(e,r,i,!0),gz(e,Js(e,!1,t)),r=i=e.position):e.position===e.lineStart&&jR(e)?_n(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);_n(e,"unexpected end of the stream within a single quoted scalar")}function MBt(e,t){var n,r,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Np(e,n,e.position,!0),e.position++,!0;if(a===92){if(Np(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Rf(a))Js(e,!1,t);else if(a<256&&PNe[a])e.result+=NNe[a],e.position++;else if((o=TBt(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=kBt(a))>=0?s=(s<<4)+o:_n(e,"expected hexadecimal character");e.result+=LBt(s),e.position++}else _n(e,"unknown escape sequence");n=r=e.position}else Rf(a)?(Np(e,n,r,!0),gz(e,Js(e,!1,t)),n=r=e.position):e.position===e.lineStart&&jR(e)?_n(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}_n(e,"unexpected end of the stream within a double quoted scalar")}function $Bt(e,t){var n=!0,r,i,s,o=e.tag,a,l=e.anchor,u,f,c,d,h,p=Object.create(null),g,v,y,b;if(b=e.input.charCodeAt(e.position),b===91)f=93,h=!1,a=[];else if(b===123)f=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),b=e.input.charCodeAt(++e.position);b!==0;){if(Js(e,!0,t),b=e.input.charCodeAt(e.position),b===f)return e.position++,e.tag=o,e.anchor=l,e.kind=h?"mapping":"sequence",e.result=a,!0;n?b===44&&_n(e,"expected the node content, but found ','"):_n(e,"missed comma between flow collection entries"),v=g=y=null,c=d=!1,b===63&&(u=e.input.charCodeAt(e.position+1),Dl(u)&&(c=d=!0,e.position++,Js(e,!0,t))),r=e.line,i=e.lineStart,s=e.position,$1(e,t,_T,!1,!0),v=e.tag,g=e.result,Js(e,!0,t),b=e.input.charCodeAt(e.position),(d||e.line===r)&&b===58&&(c=!0,b=e.input.charCodeAt(++e.position),Js(e,!0,t),$1(e,t,_T,!1,!0),y=e.result),h?_v(e,a,p,v,g,y,r,i,s):c?a.push(_v(e,null,p,v,g,y,r,i,s)):a.push(g),Js(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(n=!0,b=e.input.charCodeAt(++e.position)):n=!1}_n(e,"unexpected end of the stream within a flow collection")}function IBt(e,t){var n,r,i=N4,s=!1,o=!1,a=t,l=0,u=!1,f,c;if(c=e.input.charCodeAt(e.position),c===124)r=!1;else if(c===62)r=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)N4===i?i=c===43?nCe:EBt:_n(e,"repeat of a chomping mode identifier");else if((f=DBt(c))>=0)f===0?_n(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?_n(e,"repeat of an indentation width identifier"):(a=t+f-1,o=!0);else break;if(Xg(c)){do c=e.input.charCodeAt(++e.position);while(Xg(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!Rf(c)&&c!==0)}for(;c!==0;){for(mz(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Rf(c)){l++;continue}if(e.lineIndent<a){i===nCe?e.result+=po.repeat(`
`,s?1+l:l):i===N4&&s&&(e.result+=`
`);break}for(r?Xg(c)?(u=!0,e.result+=po.repeat(`
`,s?1+l:l)):u?(u=!1,e.result+=po.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=po.repeat(`
`,l):e.result+=po.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,n=e.position;!Rf(c)&&c!==0;)c=e.input.charCodeAt(++e.position);Np(e,n,e.position,!1)}return!0}function aCe(e,t){var n,r=e.tag,i=e.anchor,s=[],o,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,_n(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!Dl(o))));){if(a=!0,e.position++,Js(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,$1(e,t,MNe,!1,!0),s.push(e.result),Js(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)_n(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function PBt(e,t,n){var r,i,s,o,a,l,u=e.tag,f=e.anchor,c={},d=Object.create(null),h=null,p=null,g=null,v=!1,y=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),b=e.input.charCodeAt(e.position);b!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,_n(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),s=e.line,(b===63||b===58)&&Dl(r))b===63?(v&&(_v(e,c,d,h,p,null,o,a,l),h=p=g=null),y=!0,v=!0,i=!0):v?(v=!1,i=!0):_n(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=r;else{if(o=e.line,a=e.lineStart,l=e.position,!$1(e,n,ONe,!1,!0))break;if(e.line===s){for(b=e.input.charCodeAt(e.position);Xg(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),Dl(b)||_n(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(_v(e,c,d,h,p,null,o,a,l),h=p=g=null),y=!0,v=!1,i=!1,h=e.tag,p=e.result;else if(y)_n(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=f,!0}else if(y)_n(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=f,!0}if((e.line===s||e.lineIndent>t)&&(v&&(o=e.line,a=e.lineStart,l=e.position),$1(e,t,ET,!0,i)&&(v?p=e.result:g=e.result),v||(_v(e,c,d,h,p,g,o,a,l),h=p=g=null),Js(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&b!==0)_n(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&_v(e,c,d,h,p,null,o,a,l),y&&(e.tag=u,e.anchor=f,e.kind="mapping",e.result=c),y}function NBt(e){var t,n=!1,r=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&_n(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(r=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):_n(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Dl(o);)o===33&&(r?_n(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),$Ne.test(i)||_n(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),CBt.test(s)&&_n(e,"tag suffix cannot contain flow indicator characters")}s&&!INe.test(s)&&_n(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{_n(e,"tag name is malformed: "+s)}return n?e.tag=s:im.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:_n(e,'undeclared tag handle "'+i+'"'),!0}function BBt(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&_n(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Dl(n)&&!wv(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&_n(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function zBt(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Dl(r)&&!wv(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&_n(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),im.call(e.anchorMap,n)||_n(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Js(e,!0,-1),!0}function $1(e,t,n,r,i){var s,o,a,l=1,u=!1,f=!1,c,d,h,p,g,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=ET===n||MNe===n,r&&Js(e,!0,-1)&&(u=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;NBt(e)||BBt(e);)Js(e,!0,-1)?(u=!0,a=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=u||i),(l===1||ET===n)&&(_T===n||ONe===n?g=t:g=t+1,v=e.position-e.lineStart,l===1?a&&(aCe(e,v)||PBt(e,v,g))||$Bt(e,g)?f=!0:(o&&IBt(e,g)||OBt(e,g)||MBt(e,g)?f=!0:zBt(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&_n(e,"alias node should not have any properties")):FBt(e,g,_T===n)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(f=a&&aCe(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&_n(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,d=e.implicitTypes.length;c<d;c+=1)if(p=e.implicitTypes[c],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(im.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,h=e.typeMap.multi[e.kind||"fallback"],c=0,d=h.length;c<d;c+=1)if(e.tag.slice(0,h[c].tag.length)===h[c].tag){p=h[c];break}p||_n(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&_n(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):_n(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function jBt(e){var t=e.position,n,r,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Js(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!Dl(o);)o=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&_n(e,"directive name must not be less than one character in length");o!==0;){for(;Xg(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Rf(o));break}if(Rf(o))break;for(n=e.position;o!==0&&!Dl(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}o!==0&&mz(e),im.call(sCe,r)?sCe[r](e,r,i):ST(e,'unknown document directive "'+r+'"')}if(Js(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Js(e,!0,-1)):s&&_n(e,"directives end mark is expected"),$1(e,e.lineIndent-1,ET,!1,!0),Js(e,!0,-1),e.checkLineBreaks&&ABt.test(e.input.slice(t,e.position))&&ST(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&jR(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Js(e,!0,-1));return}if(e.position<e.length-1)_n(e,"end of the stream or a document separator is expected");else return}function zNe(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new RBt(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,_n(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)jBt(n);return n.documents}function UBt(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=zNe(e,n);if(typeof t!="function")return r;for(var i=0,s=r.length;i<s;i+=1)t(r[i])}function qBt(e,t){var n=zNe(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Xa("expected a single document in the stream, but found more")}}var HBt=UBt,GBt=qBt,jNe={loadAll:HBt,load:GBt},UNe=Object.prototype.toString,qNe=Object.prototype.hasOwnProperty,yz=65279,VBt=9,j2=10,WBt=13,YBt=32,XBt=33,ZBt=34,Q$=35,KBt=37,JBt=38,QBt=39,ezt=42,HNe=44,tzt=45,AT=58,nzt=61,rzt=62,izt=63,szt=64,GNe=91,VNe=93,ozt=96,WNe=123,azt=124,YNe=125,Oa={};Oa[0]="\\0";Oa[7]="\\a";Oa[8]="\\b";Oa[9]="\\t";Oa[10]="\\n";Oa[11]="\\v";Oa[12]="\\f";Oa[13]="\\r";Oa[27]="\\e";Oa[34]='\\"';Oa[92]="\\\\";Oa[133]="\\N";Oa[160]="\\_";Oa[8232]="\\L";Oa[8233]="\\P";var lzt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],uzt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function czt(e,t){var n,r,i,s,o,a,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,s=r.length;i<s;i+=1)o=r[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&qNe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[o]=a;return n}function fzt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Xa("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+po.repeat("0",r-t.length)+t}var dzt=1,U2=2;function hzt(e){this.schema=e.schema||pz,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=po.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=czt(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?U2:dzt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function lCe(e,t){for(var n=po.repeat(" ",t),r=0,i=-1,s="",o,a=e.length;r<a;)i=e.indexOf(`
`,r),i===-1?(o=e.slice(r),r=a):(o=e.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}function eI(e,t){return`
`+po.repeat(" ",e.indent*t)}function pzt(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function CT(e){return e===YBt||e===VBt}function q2(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==yz||65536<=e&&e<=1114111}function uCe(e){return q2(e)&&e!==yz&&e!==WBt&&e!==j2}function cCe(e,t,n){var r=uCe(e),i=r&&!CT(e);return(n?r:r&&e!==HNe&&e!==GNe&&e!==VNe&&e!==WNe&&e!==YNe)&&e!==Q$&&!(t===AT&&!i)||uCe(t)&&!CT(t)&&e===Q$||t===AT&&i}function mzt(e){return q2(e)&&e!==yz&&!CT(e)&&e!==tzt&&e!==izt&&e!==AT&&e!==HNe&&e!==GNe&&e!==VNe&&e!==WNe&&e!==YNe&&e!==Q$&&e!==JBt&&e!==ezt&&e!==XBt&&e!==azt&&e!==nzt&&e!==rzt&&e!==QBt&&e!==ZBt&&e!==KBt&&e!==szt&&e!==ozt}function gzt(e){return!CT(e)&&e!==AT}function h_(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function XNe(e){var t=/^\n* /;return t.test(e)}var ZNe=1,tI=2,KNe=3,JNe=4,av=5;function yzt(e,t,n,r,i,s,o,a){var l,u=0,f=null,c=!1,d=!1,h=r!==-1,p=-1,g=mzt(h_(e,0))&&gzt(h_(e,e.length-1));if(t||o)for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=h_(e,l),!q2(u))return av;g=g&&cCe(u,f,a),f=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=h_(e,l),u===j2)c=!0,h&&(d=d||l-p-1>r&&e[p+1]!==" ",p=l);else if(!q2(u))return av;g=g&&cCe(u,f,a),f=u}d=d||h&&l-p-1>r&&e[p+1]!==" "}return!c&&!d?g&&!o&&!i(e)?ZNe:s===U2?av:tI:n>9&&XNe(e)?av:o?s===U2?av:tI:d?JNe:KNe}function vzt(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===U2?'""':"''";if(!e.noCompatMode&&(lzt.indexOf(t)!==-1||uzt.test(t)))return e.quotingType===U2?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,n),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=r||e.flowLevel>-1&&n>=e.flowLevel;function l(u){return pzt(e,u)}switch(yzt(t,a,e.indent,o,l,e.quotingType,e.forceQuotes&&!r,i)){case ZNe:return t;case tI:return"'"+t.replace(/'/g,"''")+"'";case KNe:return"|"+fCe(t,e.indent)+dCe(lCe(t,s));case JNe:return">"+fCe(t,e.indent)+dCe(lCe(bzt(t,o),s));case av:return'"'+xzt(t)+'"';default:throw new Xa("impossible error: invalid scalar style")}}()}function fCe(e,t){var n=XNe(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),s=i?"+":r?"":"-";return n+s+`
`}function dCe(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function bzt(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,n.lastIndex=u,hCe(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=n.exec(e);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!i&&!s&&l!==""?`
`:"")+hCe(l,t),i=s}return r}function hCe(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,s,o=0,a=0,l="";r=n.exec(e);)a=r.index,a-i>t&&(s=o>i?o:a,l+=`
`+e.slice(i,s),i=s+1),o=a;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}function xzt(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=h_(e,i),r=Oa[n],!r&&q2(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||fzt(n);return t}function wzt(e,t,n){var r="",i=e.tag,s,o,a;for(s=0,o=n.length;s<o;s+=1)a=n[s],e.replacer&&(a=e.replacer.call(n,String(s),a)),(dh(e,t,a,!1,!1)||typeof a>"u"&&dh(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function pCe(e,t,n,r){var i="",s=e.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],e.replacer&&(l=e.replacer.call(n,String(o),l)),(dh(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&dh(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=eI(e,t)),e.dump&&j2===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function _zt(e,t,n){var r="",i=e.tag,s=Object.keys(n),o,a,l,u,f;for(o=0,a=s.length;o<a;o+=1)f="",r!==""&&(f+=", "),e.condenseFlow&&(f+='"'),l=s[o],u=n[l],e.replacer&&(u=e.replacer.call(n,l,u)),dh(e,t,l,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),dh(e,t,u,!1,!1)&&(f+=e.dump,r+=f));e.tag=i,e.dump="{"+r+"}"}function Ezt(e,t,n,r){var i="",s=e.tag,o=Object.keys(n),a,l,u,f,c,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Xa("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!r||i!=="")&&(d+=eI(e,t)),u=o[a],f=n[u],e.replacer&&(f=e.replacer.call(n,u,f)),dh(e,t+1,u,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&j2===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=eI(e,t)),dh(e,t+1,f,!0,c)&&(e.dump&&j2===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=s,e.dump=i||"{}"}function mCe(e,t,n){var r,i,s,o,a,l;for(i=n?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,UNe.call(a.represent)==="[object Function]")r=a.represent(t,l);else if(qNe.call(a.represent,l))r=a.represent[l](t,l);else throw new Xa("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function dh(e,t,n,r,i,s,o){e.tag=null,e.dump=n,mCe(e,n,!1)||mCe(e,n,!0);var a=UNe.call(e.dump),l=r,u;r&&(r=e.flowLevel<0||e.flowLevel>t);var f=a==="[object Object]"||a==="[object Array]",c,d;if(f&&(c=e.duplicates.indexOf(n),d=c!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(f&&d&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?(Ezt(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(_zt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?pCe(e,t-1,e.dump,i):pCe(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(wzt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&vzt(e,e.dump,t,s,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Xa("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function Szt(e,t){var n=[],r=[],i,s;for(nI(e,n,r),i=0,s=r.length;i<s;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(s)}function nI(e,t,n){var r,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)nI(e[i],t,n);else for(r=Object.keys(e),i=0,s=r.length;i<s;i+=1)nI(e[r[i]],t,n)}function Azt(e,t){t=t||{};var n=new hzt(t);n.noRefs||Szt(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),dh(n,0,r,!0,!0)?n.dump+`
`:""}var Czt=Azt,kzt={dump:Czt};function vz(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Tzt=na,Dzt=pNe,Lzt=vNe,Rzt=ENe,Fzt=SNe,Ozt=pz,Mzt=jNe.load,$zt=jNe.loadAll,Izt=kzt.dump,Pzt=Xa,Nzt={binary:DNe,float:_Ne,map:yNe,null:bNe,pairs:RNe,set:FNe,timestamp:kNe,bool:xNe,int:wNe,merge:TNe,omap:LNe,seq:gNe,str:mNe},Bzt=vz("safeLoad","load"),zzt=vz("safeLoadAll","loadAll"),jzt=vz("safeDump","dump"),Uzt={Type:Tzt,Schema:Dzt,FAILSAFE_SCHEMA:Lzt,JSON_SCHEMA:Rzt,CORE_SCHEMA:Fzt,DEFAULT_SCHEMA:Ozt,load:Mzt,loadAll:$zt,dump:Izt,YAMLException:Pzt,types:Nzt,safeLoad:Bzt,safeLoadAll:zzt,safeDump:jzt};function qzt(e){e.core.ruler.before("normalize","extract-config",t=>{var i;const n=/^\s*---\s*\n([\s\S]+?)\n\s*---\s*/,r=t.src.match(n);if(e.config={versionCheck:((i=e.config)==null?void 0:i.versionCheck)||!1},r)try{e.config=Uzt.load(r[1]),t.src=t.src.replace(r[0],"")}catch(s){return console.error("Error parsing frontmatter:",s),null}e.config.versionCheck||(e.config.version=Number(W9t(e.config.version)),e.config.versionCheck=!0)})}const Hzt=`
${eS}
${TR}
${kB}
${IB}

  iframe,
  img,
  video {
    max-width: 100%;
  }
  .navigation {
    width: 100%;
    background: white;
    padding: 10px 0px;
    color: black;
    box-shadow: 0px 0px 13px 3px #8080802e;
    max-height: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .navigation .container {
    padding: 0px;
  }
  .navigation .container ul {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0px;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    margin: 0;
    padding: 0;
  }
  .navigation .container ul::-webkit-scrollbar { 
    display: none;
  }
  .navigation .container ul li {
    list-style: none;
    margin: 0px 10px;
  }
  .navigation li a {
    color: black;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    display: inline-grid;
  }
  .navigation li a:after {
    content: "";
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: transparent;
  }
  .navigation li a:hover:after {
    background: black;
  }
  .navigation li.active a {
    font-weight: 700;
  }
  .navigation li.active a:after {
    background: black;
  }
  .navigation li a:hover {
    --primary-background-hover: transparent;
  }
  .hamburger-menu {
    display: none;
    cursor: pointer;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTUsOS41TDcuNSwxNEgyLjVMNSw5LjVNMyw0SDdWOEgzVjRNNSwyMEEyLDIgMCAwLDAgNywxOEEyLDIgMCAwLDAgNSwxNkEyLDIgMCAwLDAgMywxOEEyLDIgMCAwLDAgNSwyME05LDVWN0gyMVY1SDlNOSwxOUgyMVYxN0g5VjE5TTksMTNIMjFWMTFIOVYxM1oiIC8+PC9zdmc+");
    background-repeat: no-repeat;
    background-size: contain;
    width: 30px;
    height: 30px;
  }
  .nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .nav-overlay {
    display: none;
  }
  @media (max-width: 768px) {
    .navigation {
      padding: 0px;
      height: 50px;
    }
    .navigation .container {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    .hamburger-menu {
      display: flex;
    }
    .navigation .container ul {
      position: absolute;
      top: 50px;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 99999999;
      display: none;
      flex-direction: column;
    }
    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 99999998;
      cursor: pointer;
    }
    .navigation .container ul.show, .nav-overlay.show {
      display: flex !important;
    }
    .nav-list li {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .hamburger-menu.active span:nth-child(1) {
      transform: rotate(45deg) translate(8px, 8px);
    }
    .hamburger-menu.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger-menu.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    .navigation .container ul li {
      width: 100%;
      text-align: center;
    } 
  }
  .section-wrap {
    scroll-margin: 120px;
  }
  .story-telling p,
  .story-telling code {
    --font-size: 1.1rem;
  }
  .story-telling p {
    display: block;
    font-weight: 400;
    line-height: 170%;
    margin-top: 0.8rem;
    margin-bottom: 1.6rem;
  }
  .story-telling a {
    --font-size: 1.1rem;
    --color: var(--primary-color);
    --background-color: transparent;
    outline: 0;
    background-color: var(--background-color);
    color: var(--color);
    text-underline-offset: 4px;
    font-size: var(--font-size)
  }
  .story-telling a:hover {
    --bg-hover-transparency: 10%;
    background-color: color-mix(
      in srgb,
      var(--primary-color) var(--bg-hover-transparency),
      transparent
    );
  }
  .story-telling li {
    margin-bottom: 1rem;
  }
  .story-telling table {
    width:100%;
    color: var(--color);
    font-style: normal;
    font-weight: 400;
    font-size: 1rem;
    margin: 2rem 0rem;
  }
  .story-telling td, 
  .story-telling th {
    padding: 1rem;
    color: var(--color);
    font-weight: 400;
    font-size: 1rem;
    text-align: left;
    text-align: start;
    border-bottom: 1px solid var(--color);
  }
  .story-telling th {
    font-weight: 600;
    border-bottom: 3px solid var(--color);
  }
  .story-telling .container {
    width: 90%;
    --block-spacing-vertical: 2rem;
  }
  .story-telling.editor-enabled .section-wrap.section-item {
    position: relative;
    border-bottom: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start {
    border-top: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item::after, 
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    content: "+";
    background: white;
    width: 25px;
    height: 25px;
    display: flex;
    position: absolute;
    bottom: -12px;
    left: calc(50% - 12.5px);
    z-index: 1;
    border-radius: 100%;
    box-shadow: 1px 1px 10px #80808094;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: larger;
    cursor: pointer;
  }
  .story-telling.editor-enabled.editor-close .section-wrap.section-item::after, 
  .story-telling.editor-enabled.editor-close .section-wrap.section-item.section-start::before {
    display: none;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    top: -12px;
  }
  .story-telling .section-wrap.container.section-start {
    padding-top: 4rem;
  }
  .story-telling p:last-child {
    margin-bottom: 0;
  }
  .story-telling .section-wrap.container:last-child {
    padding-bottom: 4rem; 
  }
  .story-telling .tour {
    width: 100%;
    justify-items: start;
    display: grid;
  }
  .story-telling .hero {
    position: relative;      
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .story-telling .hero * {
    color: white;
    margin: 0rem 0.8rem;
  }
  .story-telling .hero.center {
    align-items: center;
    text-align: center;
  }
  .story-telling .hero.left {
    align-items: start;
    text-align: left;
  }
  .story-telling .hero.right {
    align-items: end;
    text-align: right;
  }
  .story-telling .hero img, 
  .story-telling .hero video {
    position: absolute;
    top: -17.5%;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 135%;
    object-fit: cover;
    margin: 0rem;
    will-change: transform;
    backface-visibility: hidden;
    filter: brightness(60%) contrast(100%);
  }
  .story-telling .tour.left {
    justify-items: start;
  }
  .story-telling .tour.right {
    justify-items: end;
  }
  .story-telling .tour.center {
    justify-items: center;
  }
  .story-telling .tour eox-map {
    width: 100%;
    height: 100vh;
    position: sticky;
    top:0;
    z-index: 0;
  }
  .story-telling .tour section-step {
    background: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    min-height: 8vh;
    margin: 1rem;
    margin-bottom: calc(120vh);
    display: block;
    z-index: 1;
    max-width: 40%;
  }
  @media screen and (max-width: 1024px) {
    .story-telling .tour section-step {
      max-width: 100%;
    }
  }
  .editor-wrapper {
    z-index: 4;
    width: 35%;
    position: fixed;
    bottom: 20px;
    right: 20px;
    border-radius: 10px;
    background: #f2f2f2;
    cursor: move;
    box-shadow: 0px 0px 3px 2px #80808026;
    box-sizing: border-box;
  }
  .resize-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 4px;
    left: 4px;
    background-color: black;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    transform: rotate(90deg);
    cursor: sw-resize;
    z-index: 2;
  }
  #editor {
    width: 100%;
    height: 100%;
    border: 2px solid #ebebeb;
    cursor: auto;
  }
  @media screen and (max-width: 1024px) {
    .editor-wrapper {
      right: 2.5%;
      width: 95%;
    }
  }
  .editor-opacity-none {
    opacity: 0;
  }
  .editor-hide {
    display: none;
  }
  .editor-error {
    display: none;
    cursor: auto;
    position: absolute;
    bottom: 39px;
    left: 9px;
    width: calc(100% - 20px);
    height: 105px;
    background: #ffc7d3;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border: 2px solid #ff7b9640;
    z-index: 1;
  }
  .editor-error .editor-error-wrapper {
    padding: 0.5rem;
    height: 85%;
  }
  .editor-error .editor-error-wrapper .overflow {
    height: 100%;
    overflow-y: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 85%;
  }
  .editor-error .editor-error-wrapper .overflow::-webkit-scrollbar { 
    display: none;
  }
  .editor-error .editor-error-wrapper h6 {
    margin: 0;
    padding: 0;
    font-size: 0.7rem;
    color: #dd264c;
  }
  .editor-error .editor-error-wrapper ul {
    margin-top: 0.25rem;
    padding-inline-start: 20px;
  }
  .editor-error .editor-error-wrapper li {
    color: #dd264c;
    font-size: 0.7rem;
    font-weight: 400;
    margin-bottom: 0;
    margin-left: 0.2rem;
  }
  .editor-saver {
    position: absolute;    
    bottom: 18px;
    left: 17px;
    font-size: 12px;
    color: #959694;
    text-align: right;
  }
  @keyframes rotate {
    100% {transform: rotate(360deg)}
  }
  @keyframes spin {
    0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
    25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
    50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
    75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
    100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
  }
  .switch-button {
    position: fixed;
    bottom: 70px;
    right: 60px;
    display: inline-block;
    font-size: 0;
    z-index: 5;
    border: 5px white solid;
    border-radius: 34px;
    box-shadow: 1px 2px 10px 1px #7e7e7e59;
    cursor: pointer;
  }
  .switch {
    position: relative;
    display: flex;
    align-items: center;
    width: 65px;
    height: 34px;
    font-size: 16px;
    justify-content: space-around;
    margin-bottom: 0px;
  }
  .switch .switch-input { 
    opacity: 0;
    width: 0;
    height: 0;
  }
  .switch .icon {
    z-index: 2;
    width: 30px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .switch .icon::before {
    cursor: pointer;
    display: block;
    width: 18px;
    height: 18px;
  }
  .view-icon {
    padding-left: 8px;
  }
  .editor-icon {
    padding-right: 8px;
  }
  .switch .view-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath fill='white' d='M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z' /%3E%3C/svg%3E");
  }
  .switch .icon.editor-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epencil%3C/title%3E%3Cpath fill='white' d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' /%3E%3C/svg%3E");
  }
  .switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 20px;
    right: 20px;
    bottom: 0;
    z-index: 1;
    background-color: #727272;
    transition: .4s;
    border-radius: 34px;
    left: 0px;
    right: 0px;
    width: 65px;
  }
  .switch-slider:before {
    cursor: pointer;
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  .switch-input:checked + .switch-slider {
    background-color: #2196F3;
  }
  .switch-input:checked + .switch-slider:before {
    transform: translateX(30px);
  }
  .switch .icon.editor-view {
    opacity: 0;
  }
  .story-telling-custom-section-list {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000000b5;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .story-telling-custom-section-list .overlay-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    cursor: pointer;
  }
  .story-telling-custom-section-list .story-telling-popup {
    width: 450px;
    height: 500px;
    background: white;
    border-radius: 0.5rem;
    padding: 20px;
    position: relative;
  }
  .story-telling-section-fields-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #000000c9;
    height: 100%;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  .story-telling-section-fields-wrapper {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    background: white;
    height: 100%;
    border-bottom-right-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
    box-shadow: -14px 3px 20px 0px #0e0e0e26;
  }
  .story-telling-popup-wrapper {
    overflow-y: auto;
    height: 100%;
  }
  .story-telling-custom-section-list .story-telling-popup .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
  }
  .story-telling-custom-section-list .story-telling-popup .header:first-child {
    margin-top:0px;
  }
  .story-telling-custom-section-list .story-telling-popup .header h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
  }
  .story-telling-custom-section-list .story-telling-popup .header p {
    background: #2273EC;
    border-radius: 20px;
    padding: 0px 15px;
    color: white;
    height: 1.1rem;
    display: flex;
    align-items: center;
    margin: 0;
    font-size: 0.75rem;
  }
  .story-telling-custom-section-list .story-telling-popup hr {
    border-top: 2.5px solid #e5eaf0;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item {
    text-align: center;
    cursor: pointer;
    padding: 0px;
    border: 1px solid #e1e6eb;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item:hover {
    border-color: #2273EC;
    background-color: #f7f7f7;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon {
    font-size: 0px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon::before {
    width: 100%;
    color: black;
    display: inline-block;
    border-radius: 6px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item p {
    padding: 0px;
    margin: 0px;
    font-size: 0.8rem;
    color: #555555;
    font-weight: 500;
    padding: 4px 0px;
  }
  eox-jsonform#storytelling-editor-fields {
    padding-bottom: 80px;
    height: auto;
    display: block;
  }
  eox-jsonform#storytelling-editor-fields div {
    height: auto;
  }
  .story-telling-section-fields-overflow {
    overflow-y: auto;
    height: calc(100% - 60px);
    padding: 20px;
  }
  .story-telling-section-submit-wrapper {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: 10px 0px;
    background: white;
    display: flex;
    justify-content: center;
    box-shadow: -2px -10px 10px #00000017;
    border-bottom-right-radius: 0.5rem;
  }
  .story-telling-section-submit-wrapper button {
    width: 92%;
    justify-content: center;
  }
  eox-jsonform#storytelling-editor-fields .je-form-input-label {
    text-transform: capitalize;
  }
  eox-jsonform#storytelling-editor-fields .je-object__controls {
    display: none; 
  }
  @media screen and (max-width: 1024px) {
    .switch-button {
      right: 20px;
    }
  }
  .section-line-decoration {
    background: #757575;
    z-index: 1;
    align-items: center;
    justify-content: center;
    display: flex;
    color: #ffffff;
    font-size: 12px;
    font-weight: 700;
  }
  .margin-view-overlays {
    background: #e6e6e6;
  }
`;var QT,e9e;class QNe extends Zr{constructor(){super();yn(this,QT);this.markdown="",this.storyId=null,this.isNavigation=!1,this.dragging=!1,this.resizing=!1,this.showEditor=void 0,this.disableAutosave=!1,this.disableTextSelection=this.disableTextSelection.bind(this),this.enableTextSelection=this.enableTextSelection.bind(this)}disableTextSelection(){document.body.style.userSelect="none"}enableTextSelection(){document.body.style.userSelect=""}firstUpdated(){const n=this.querySelector(".editor-wrapper"),r=this.querySelector(".resize-handle");this.editor=this.renderRoot.querySelector("eox-jsonform#storytelling-editor"),this.showEditor==="closed"&&eNe(this),r9t(this),Q8e(this),n9t(n,r,this)}updateErrors(n){const r=this.renderRoot.querySelector(".editor-error");r&&(n.length?(r.style.display="block",r.querySelector("ul").innerHTML=n.map(i=>`<li><strong>${i.ref}</strong>: ${i.message}</li>`).join("")):r.style.display="none")}createRenderRoot(){return this}render(){customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use StoryTelling Editor");const n=this.isNavigation?"partial-height":"";return Qe`
      <div class="editor-wrapper ${n}">
        <eox-jsonform
          id="storytelling-editor"
          no-shadow
          .schema=${u9t}
          .value=${{Story:this.markdown}}
        ></eox-jsonform>
        <div class="resize-handle"></div>
        <span class="editor-saver">Saved</span>
        <div class="editor-error">
          <div class="editor-error-wrapper">
            <div class="overflow">
              <h6> Error</h6>
              <ul></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="switch-button">
        <label class="switch">
          <i class="icon view-icon"></i>
          <input
            class="switch-input"
            type="checkbox"
            @change=${mn(this,QT,e9e)}
            checked
          />
          <span class="switch-slider round"></span>
          <i class="icon editor-icon"></i>
        </label>
      </div>
      <style>
        eox-jsonform#storytelling-editor {
          display: block;
          height: 100%;
          cursor: default;
        }
        .editor-wrapper {
          padding: 0.5rem;
        }
        .editor-toolbar:hover {
          opacity: 1;
        }
        form[data-theme="html"] .je-indented-panel {
          padding: 0 !important;
          margin: 0 !important;
          border: none !important;
        }
        .editor-wrapper .CodeMirror {
          height: 100%;
          min-height: unset;
        }
        .editor-wrapper .EasyMDEContainer {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .editor-wrapper .EasyMDEContainer .CodeMirror-scroll {
          min-height: 1000px;
        }
        .editor-toolbar button {
          box-shadow: none;
          color: #2c3e50 !important;
        }
        .editor-toolbar button:hover:not([disabled]):not(.icon),
        .editor-toolbar button:hover:not([disabled]):not(.icon) {
          box-shadow: none;
          background: #fcfcfc;
          border-color: #95a5a6;
        }
        .editor-toolbar button i {
          font-size: 17px;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
          line-height: 200%;
        }
        .editor-wrapper .cm-header-2 {
          font-size: 160%;
          line-height: 160%;
        }
        .editor-wrapper .cm-header-3 {
          font-size: 125%;
          line-height: 125%;
        }
        .editor-wrapper .cm-header-4 {
          font-size: 110%;
          line-height: 110%;
        }
        .editor-wrapper .cm-comment {
          background: rgba(0, 0, 0, 0.05);
          border-radius: 2px;
        }
        eox-jsonform form[data-theme="html"],
        eox-jsonform div[data-schemaid="root"],
        eox-jsonform div.je-indented-panel,
        eox-jsonform div.je-indented-panel > div,
        eox-jsonform div.je-indented-panel > div > div,
        eox-jsonform div.row,
        eox-jsonform div[data-schematype="string"],
        eox-jsonform div.form-control {
          height: 100%;
        }
        eox-jsonform div.form-control {
          display: flex;
          flex-direction: column;
        }
        eox-jsonform div.editor-toolbar,
        eox-jsonform div.editor-statusbar {
          flex-shrink: 1;
        }
        eox-jsonform .CodeMirror-sizer {
          padding-bottom: 100px !important;
        }
        eox-jsonform#storytelling-editor .je-form-input-label,
        eox-jsonform#storytelling-editor .je-object__controls {
          display: none !important;
        }
      </style>
    `}}QT=new WeakSet,e9e=function(n){const r=this.renderRoot.querySelector(".editor-wrapper"),i=this.storyId?`#${this.storyId}`:"",s=document.querySelector(`eox-storytelling${i}`);n.target.checked?(r.classList.remove("editor-opacity-none"),r.classList.remove("editor-hide"),s.setAttribute("show-editor","open")):(r.classList.add("editor-hide"),s.setAttribute("show-editor","close"))},tn(QNe,"properties",{markdown:{attribute:"markdown",type:String},storyId:{attribute:"story-id",type:String},showEditor:{attribute:"show-editor",type:String},isNavigation:{attribute:"markdown",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean}});customElements.define("eox-storytelling-editor",QNe);const Ag=ju({html:!0});Ag.use(f7t).use(qzt);var lc,Hv,K2,eD,t9e;class Gzt extends Zr{constructor(){super();yn(this,eD);yn(this,lc);yn(this,Hv,{});yn(this,K2,null);as(this,lc,void 0),this.markdown="",this.markdownURL=null,this.unstyled=!1,this.noShadow=!1,this.disableAutosave=!1,this.showEditor=void 0,this.showNav=!1,this.nav=[],this.addCustomSectionIndex=-1,this.selectedCustomElement=null}static get properties(){return{markdown:{attribute:"markdown",type:String},markdownURL:{attribute:"markdown-url",type:String},nav:{state:!0,attribute:!1,type:Array},showNav:{attribute:"show-nav",type:Boolean},showEditor:{attribute:"show-editor",type:String},noShadow:{attribute:"no-shadow",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean},unstyled:{type:Boolean},addCustomSectionIndex:{type:Number,state:!0},selectedCustomElement:{type:Object,state:!0}}}async updated(n){if(n.has("markdownURL")&&this.markdownURL&&(this.markdown=await GNt(this.markdownURL)||this.markdown,this.requestUpdate()),n.has("markdown")){this.markdown&&this.dispatchEvent(new CustomEvent("changed",{detail:this.markdown}));const r=Ag.render(this.markdown);if(J9t(Ag.attrs.sections,this),as(this,Hv,Ag.config),typeof Gt(this,Hv).nav=="boolean"&&(this.showNav=Gt(this,Hv).nav),this.showNav&&(this.nav=Ag.nav),as(this,lc,T9t(t7t.sanitize(r,{CUSTOM_ELEMENT_HANDLING:G9t(Ag),ADD_TAGS:ZNt}),Ag.sections,mn(this,eD,t9e).bind(this),this)),as(this,lc,R9t(Gt(this,lc),this.nav,this.showNav,this.showEditor,this)),this.showEditor!==void 0){const s=(this.shadowRoot||this).querySelector("eox-storytelling-editor"),o=s.querySelector("eox-jsonform");this.markdown!==(o==null?void 0:o.value.Story)&&(s.markdown=this.markdown)}this.requestUpdate()}n.has("nav")&&H9t(this,".navigation a")}handleSlotChange(){const n=this.shadowRoot.querySelector("slot");if(n){const r=n.assignedNodes({flatten:!0});this.markdown=r.map(i=>i.textContent?i.textContent:"").join(""),this.requestUpdate()}}async firstUpdated(){as(this,K2,G0(n=>{n.detail&&(this.markdown=n.detail.Story,this.requestUpdate())},1e3)),this.disableAutosave||l9t(this),V9t(),Gt(this,lc)===void 0&&await this.waitForHtmlInitialization(),nNe(this)}async waitForHtmlInitialization(){const n=r=>new Promise(i=>setTimeout(i,r));for(;Gt(this,lc)===void 0;)await n(100)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=`${this.showEditor!==void 0?"editor-enabled":""} editor-${this.showEditor}`;return Qe`
      <slot class="slot-hide" @slotchange=${this.handleSlotChange}></slot>
      <style>
        :host { display: block; }
        .slot-hide { display: none; }
        ${!this.unstyled&&Hzt}
        ${!this.unstyled&&ER}
      </style>

      <div class="story-telling ${n}">
        <div>${Un(Gt(this,lc),()=>Qe`${Gt(this,lc)}`)}</div>
        ${Un(this.showEditor!==void 0,()=>Qe`
            <eox-storytelling-editor
              .isNavigation=${!!this.showNav}
              .storyId=${this.id}
              show-editor=${this.showEditor}
              @change=${Gt(this,K2)}
              .markdown=${this.markdown}
              .disableAutosave=${this.disableAutosave}
            ></eox-storytelling-editor>
          `)}
      </div>

      ${Un(this.addCustomSectionIndex>-1,()=>Qe`
          <div class="story-telling-custom-section-list">
            <div
              class="overlay-popup"
              @click=${()=>{this.addCustomSectionIndex=-1,this.selectedCustomElement=null,this.requestUpdate()}}
            ></div>
            <div class="story-telling-popup">
              ${Un(this.selectedCustomElement,()=>Qe`
                  <div class="story-telling-section-fields">
                    <div
                      class="story-telling-section-fields-overlay"
                      @click=${()=>{this.selectedCustomElement=null,this.requestUpdate()}}
                    ></div>
                    <div class="story-telling-section-fields-wrapper">
                      <div class="story-telling-section-fields-overflow">
                        <eox-jsonform
                          id="storytelling-editor-fields"
                          no-shadow
                          .schema=${this.selectedCustomElement.fields}
                        ></eox-jsonform>
                      </div>
                      <div class="story-telling-section-submit-wrapper">
                        <button
                          @click=${()=>WAe(this.markdown,this.addCustomSectionIndex,this.selectedCustomElement.markdown,this.selectedCustomElement.fields,!0,this)}
                        >
                          Add Section
                        </button>
                      </div>
                    </div>
                  </div>
                `)}
              <div class="story-telling-popup-wrapper">
                ${E9t.map(r=>Qe`
                    <div class="header">
                      <h4>${r.name}</h4>
                      <p>${r.elements.length}</p>
                    </div>
                    <hr />
                    <div class="grid-container">
                      ${r.elements.map(i=>Qe`<div
                            @click=${()=>WAe(this.markdown,this.addCustomSectionIndex,i.markdown,i.fields,!1,this)}
                            class="grid-item"
                          >
                            <icon id="${i.id}"></icon>
                            <p>${i.name}</p>
                            <style>
                              icon#${i.id}::before {
                                content: url("${i.icon}");
                              }
                            </style>
                          </div>`)}
                    </div>
                  `)}
              </div>
            </div>
          </div>
        `)}
    `}}lc=new WeakMap,Hv=new WeakMap,K2=new WeakMap,eD=new WeakSet,t9e=function(n){this.dispatchEvent(new CustomEvent("init",{detail:n}))};customElements.define("eox-storytelling",Gzt);const Vzt=`
:host {
  display: block;
}
`,Wzt=`
:host, :root {
  --navigation-button-display: inline-flex;
}

* {
  font-family: Roboto, sans-serif;
}

${eS}
${IB}

[part=controls] {
  display: flex;
  align-items: center;
  gap: 8px;
}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous,
button.icon.next {
  display: var(--navigation-button-display);
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z' /%3E%3C/svg%3E");
}
`;class Yzt extends Zr{static get properties(){return{width:{type:Number},steps:{type:Array}}}constructor(){super(),this.width=0,this.steps=[],this.height=6,this.svgWidth=0,this._yearMarks=[],this._years=[],this._sliderTicks=[]}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize()}updated(t){t.has("steps")&&(this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize())}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}groupDatesByYear(){const t=[];return this.steps.forEach(n=>{const i=Ac(n).year();let s=t.find(o=>o.year===i);s||(s={year:i,dates:[]},t.push(s)),s.dates.push(n)}),t}preprocessDates(){const t=[];this.steps.forEach(n=>{const i=Ac(n).year();let s=t.find(o=>o.year===i);s||(s={year:i,ratio:0,dates:[]},t.push(s)),s.dates.push({date:n,isYearMarker:s.dates.length===0})});for(let n of t)n.ratio=n.dates.length/this.steps.length;return t}get sliderTicks(){return this._sliderTicks}set sliderTicks(t){this._sliderTicks=t,this.requestUpdate()}calculateYearBars(){return this._years.flatMap((r,i)=>{const s=this.steps.indexOf(r.dates[0].date)/(this.steps.length-1)*this.width,o=this.steps.indexOf(r.dates[r.dates.length-1].date)/(this.steps.length-1)*this.width,a=Math.max(0,o-s-2),l=[];return l.push(Dy`
            <rect
              key=${i}
              x=${s+2/2} // Add half the spacing to the start position
              y="0"
              width=${a}
              height="6"
              fill="#7596A2"
            ></rect>
        `),a>=30&&l.push(Dy`
                <text
                  key=${`label-${i}`}
                  x=${s+16}
                  y="26"
                  fill="#555"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${r.year}
                </text>
            `),l})}calculateIndividualTicks(){return this._years.flatMap((t,n)=>{const r=this.steps.length,i=Math.max(1,Math.floor(r/this.width));return t.dates.filter((s,o)=>o%i===0).map((s,o)=>{const l=this.steps.indexOf(s.date)/(this.steps.length-1)*this.width,u=[];return u.push(Dy`
                <line
                  key=${n}-${o}
                  x1=${l}
                  y1="0"
                  x2=${l}
                  y2=${s.isYearMarker?12:6}
                  stroke=${s.isYearMarker?"#222":"#7596A2"}
                  stroke-width="1"
                ></line>
              `),s.isYearMarker&&this.density>.03&&this.density<.5&&n%2==0&&u.push(Dy`
                  <text
                    key=${`label-${n}`}
                    x=${l+16}
                    y="30"
                    fill="#555"
                    font-size="14"
                    text-anchor="middle"
                  >
                    ${t.year}
                  </text>
                `),u})})}get density(){return this.steps.length/this.width}calculateSliderTicks(){if(this.density<=.5)return this.calculateIndividualTicks();if(this.density>.5&&this.density<10)return this.calculateYearBars();if(this.density>=10)return this.calculateDecadeBars()}calculateDecadeBars(){const r=this._years.reduce((s,o)=>{const a=Math.floor(o.year/10)*10;return s[a]||(s[a]=[]),s[a].push(...o.dates),s},{});return Object.keys(r).flatMap((s,o)=>{const a=this.steps.indexOf(r[s][0].date)/(this.steps.length-1)*this.width,l=this.steps.indexOf(r[s][r[s].length-1].date)/(this.steps.length-1)*this.width,u=Math.max(0,l-a-2),f=[];return f.push(Dy`
            <rect
              key=${`decade-${o}`}
              x=${a+2/2}
              y="0"
              width=${u}
              height="6"
              fill="#555"
            ></rect>
        `),u>=30&&f.push(Dy`
                <text
                  key=${`decade-label-${o}`}
                  x=${a+18}
                  y="26"
                  fill="#333"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${s}
                </text>
            `),f})}get lines(){const t=this.numLines>this.width/2?this.width/2:this.numLines,n=this.width/(t-1);return Array.from({length:this.numLines},(r,i)=>i*n)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){return this._yearMarks}set yearMarks(t){this._yearMarks=t,this.requestUpdate()}get years(){return this._years}set years(t){this._years=t,this.requestUpdate()}calculateYearMarks(){this._years=this.preprocessDates(),this.lines.forEach((t,n)=>{Ac(this.steps[n]).year()})}isYearLine(t){return this._yearMarks.some(r=>Math.abs(r.position-t)<1)}render(){return Qe`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.sliderTicks}
        </svg>
      </div>
    `}}customElements.define("eox-sliderticks",Yzt);var n3={exports:{}},Xzt=n3.exports,gCe;function Zzt(){return gCe||(gCe=1,function(e,t){(function(n,r){e.exports=r()})(Xzt,function(){return function(n,r,i){r.prototype.dayOfYear=function(s){var o=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})}(n3)),n3.exports}var Kzt=Zzt();const Jzt=sa(Kzt);var r3={exports:{}},Qzt=r3.exports,yCe;function ejt(){return yCe||(yCe=1,function(e,t){(function(n,r){e.exports=r()})(Qzt,function(){var n="day";return function(r,i,s){var o=function(u){return u.add(4-u.isoWeekday(),n)},a=i.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var f,c,d,h,p=o(this),g=(f=this.isoWeekYear(),c=this.$u,d=(c?s.utc:s)().year(f).startOf("year"),h=4-d.isoWeekday(),d.isoWeekday()>4&&(h+=7),d.add(h,n));return p.diff(g,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,f){var c=this.$utils(),d=!!c.u(f)||f;return c.p(u)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,f)}}})}(r3)),r3.exports}var tjt=ejt();const njt=sa(tjt);Ac.extend(Jzt);Ac.extend(njt);class rjt extends Zr{static get properties(){return{controlProperty:{type:String,attribute:"control-property"},controlValues:{type:Array,attribute:"control-values"},for:{type:String},layer:{type:String},slider:{type:Boolean},navigation:{type:Boolean},_originalParams:{type:Object},play:{type:Boolean,attribute:"play"},displayFormat:{type:String,attribute:"display-format"},currentStep:{type:String,attribute:"current-step"},_animationInterval:{state:!0},_controlSource:{state:!0},_isAnimationPlaying:{state:!0},_newStepIndex:{state:!0},_eoxMap:{state:!0},_width:{state:!0},unstyled:{type:Boolean}}}constructor(){super(),this.controlValues=[],this._newStepIndex=0,this.unstyled=!1,this.play=!1,this.navigation=!0,this.slider=!1,this.for="eox-map",this.layer="",this.controlProperty=void 0,this._eoxMap=void 0,this._width=300,window.addEventListener("resize",()=>{this._width=this.clientWidth}),this.displayFormat=void 0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(t){t?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=t,this.requestUpdate()}setConfig(t){this.layer=t.layer??this.layer,this.controlProperty=t.controlProperty??this.controlProperty,this.controlValues=t.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(t){const n=this.controlValues.findIndex(r=>r===t);n>-1?this._newStepIndex=n:console.error(`Unable to find step "${t}" in available times!`)}firstUpdated(){this.updateMap()}updated(t){t.has("for")&&this.updateMap()}updateMap(){const t=K_(this.for);if(t){const n=t;this.eoxMap=n}}get eoxMap(){return this._eoxMap}set eoxMap(t){const n=this._eoxMap;this._eoxMap=t,this.requestUpdate("eoxMap",n)}_updateStep(t=1){var n;t&&(this._newStepIndex=this._newStepIndex+t,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),this.layer&&this.for&&((n=this._controlSource)==null||n.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]})),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}})))}getFlatLayersArray(t){const n=[];n.push(...t);let r=n.filter(i=>i instanceof p3);for(;r.length;){const i=[];for(let s=0,o=r.length;s<o;s++){const a=r[s].getLayers().getArray();n.push(...a),i.push(...a.filter(l=>l instanceof p3))}r=i}return n}render(){if(this.layer&&this.for){const n=K_(this.for).map;n.once("loadend",()=>{if(!this._originalParams){const i=this.getFlatLayersArray(n.getLayers().getArray()).find(s=>s.get("id")===this.layer);this._controlSource=i.getSource(),this._originalParams=this._controlSource.getParams()}})}return Qe`
      <style>
        ${Vzt}
        ${!this.unstyled&&Wzt}
      </style>
      <main>
        <div id="controls" part="controls">
          ${this.navigation?Qe`
                <button
                  part="previous"
                  class="icon previous"
                  @click="${()=>this.previous()}"
                >
                  <
                </button>
              `:Xr}
          <span part="current">
            ${this.displayFormat?Ac(this.controlValues[this._newStepIndex]).format(this.displayFormat):this.controlValues[this._newStepIndex]}
          </span>
          ${this.navigation?Qe`
                <button
                  part="next"
                  class="icon next"
                  @click="${()=>this.next()}"
                >
                  >
                </button>
              `:Xr}
          ${this.play?Qe`
                <button
                  part="play"
                  class="small icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `:Xr}
        </div>
        <div>
          ${this.slider?Qe`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${t=>this._updateStep(this.controlValues.findIndex(n=>n===t.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    .width="${this._width}"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}
        </div>
      </main>
    `}}customElements.define("eox-timecontrol",rjt);const n9e=(e,t)=>{var r;let{privateFields:n=!0}=t;return n||(r=e==null?void 0:e.modules)==null||r.forEach(i=>{var s;(s=i==null?void 0:i.declarations)==null||s.forEach(o=>{Object.keys(o).forEach(a=>{Array.isArray(o[a])&&(o[a]=o[a].filter(l=>{var u;return!((u=l.privacy)!=null&&u.includes("private"))}))})})}),jBe(e)};n9e(TKe,{privateFields:!1});const ijt={parameters:{docs:{toc:!0,page:DKe,source:{transform:(e,t)=>{const n=t.undecoratedStoryFn(t);let r;const i={};return n.strings.map((s,o)=>{var f,c;const a=s.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(r=`eox-${a}`);const l=(c=(f=s.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:f[0])==null?void 0:c.replaceAll(" ",""),u=n.values[o];l&&u&&(i[r]||(i[r]={}),i[r][l]=u)}).filter(s=>s),Object.keys(i).forEach(s=>{e=e.replace(`<${s}`,`<${s}
  ${Object.keys(i[s]).map((o,a)=>`.${o}='\${${typeof i[s][o]=="string"?i[s][o]:JSON.stringify(i[s][o])}}'`).join(`
  `)}
  `)}),e}}}}},_Ut=Object.freeze(Object.defineProperty({__proto__:null,default:ijt,setCustomElementsManifestWithOptions:n9e},Symbol.toStringTag,{value:"Module"}));export{Rjt as L,Fjt as a,_Ut as p};
