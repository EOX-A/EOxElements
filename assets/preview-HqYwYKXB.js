const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./raw-Dt1HMqYc.js","./basedecoder-DvumDe3Y.js","./lzw-DpvbRwG5.js","./jpeg-CdeCw_eT.js","./deflate-CUkHh1nh.js","./pako.esm-CPws4d4z.js","./packbits-DQnG8s9w.js","./lerc-DwEsmuXm.js","./index-DjTz9BGS.js","./chunk-L4EGOTBX-BALMY2cf.js","./entry-preview-BErytJoa.js","./lit-element-Dh4_iwrW.js","./index-DrFu-skq.js","./index-Dw69Wm5F.js","./index-yKP23CBp.js","./iframe-Bif4rQER.js","./index-DPS9-N-h.js","./directive-DUGPADuw.js","./main-DU0zYTAI.js","./core-C4kcdPvA.js","./webimage-BcnuJlio.js"])))=>i.map(i=>d[i]);
var $Be=Object.defineProperty;var ybe=e=>{throw TypeError(e)};var IBe=(e,t,n)=>t in e?$Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tn=(e,t,n)=>IBe(e,typeof t!="symbol"?t+"":t,n),HR=(e,t,n)=>t.has(e)||ybe("Cannot "+n);var Gt=(e,t,n)=>(HR(e,t,"read from private field"),n?n.call(e):t.get(e)),yn=(e,t,n)=>t.has(e)?ybe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ao=(e,t,n,r)=>(HR(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),gn=(e,t,n)=>(HR(e,t,"access private method"),n);import{s as PBe}from"./chunk-L4EGOTBX-BALMY2cf.js";import{m as J8,p as NBe,v as Qg,r as ew,M as GR,f as BBe}from"./entry-preview-BErytJoa.js";import{g as oa,j as vu,c as Yi,b as hCe}from"./index-DjTz9BGS.js";import{useMDXComponents as pCe}from"./index-Dw69Wm5F.js";import{ap as zBe,aq as jBe,ar as UBe,as as qBe,at as HBe,au as GBe,av as VBe}from"./index-yKP23CBp.js";import{r as Zr,x as Qe,E as Xr,T as lb,i as Q8,b as Dy}from"./lit-element-Dh4_iwrW.js";import{c as z2,n as WBe,d as YBe,I as n3,R as gCe,r as XBe,g as ZBe,h as KBe,j as JBe,C as QBe,k as eze,m as bbe,u as vbe,v as e$,w as bm,x as OM,y as Cu,z as $M,A as t$,B as tze,D as nze,E as rze,F as ize,i as oze,G as sze,H as aze,J as lze,K as uze,L as cze,M as fze,N as n$,O as dze,p as r$,P as xbe,Q as mCe,S as i$,T as j2,U as QT,V as Zm,W as hze,X as pze,Y as gze,Z as yCe,_ as eD,$ as tD,a0 as mze,a1 as yze,a2 as bze,a3 as vze,a4 as wbe,a5 as xze,a6 as wze,a7 as _ze,f as Eze,a8 as Sze,l as Aze,a9 as Cze,aa as kze,ab as Tze,ac as Dze,s as bCe,ad as Lze,ae as Rze,af as Fze,ag as Mze,q as Oze,t as $ze,o as vCe,ah as Ize,ai as Pze,aj as r3,ak as Nze,al as Bze,e as K_,a as nD,b as np}from"./directive-DUGPADuw.js";import{m as U2,g as zze,C as jze,a as si,b as i3,s as Uze,S as q2,V as o$,d as _be,c as p2,T as Ebe,F as IM,R as vm,e as J_,f as qze,w as Hze,h as Gze,i as Km,j as H2,k as s$,l as Dp,n as hC,o as au,p as Gb,P as gc,q as eu,r as o3,t as Co,u as Vb,v as ub,L as Ff,I as xCe,x as xm,J as Vze,y as Wze,z as Ms,A as Yze,B as PM,D as Xze,M as N1,E as rD,G as Q_,H as eE,X as iD,K as kn,N as Rn,O as Rt,Q as a$,U as s3,W as Zze,Y as Kze,Z as Lp,_ as a3,$ as wCe,a0 as er,a1 as Ge,a2 as yr,a3 as Mi,a4 as tu,a5 as B1,a6 as gp,a7 as G2,a8 as _Ce,a9 as Xt,aa as l3,ab as u3,ac as Ue,ad as Dt,ae as oD,af as Lo,ag as Ea,ah as c3,ai as ECe,aj as em,ak as Jze,al as l$,am as SCe,an as Td,ao as kc,ap as gi,aq as Qze,ar as eje,as as Bp,at as Sbe,au as mc,av as pf,aw as tje,ax as u$,ay as sD,az as nje,aA as ACe,aB as rje,aC as ije,aD as Ei,aE as CCe,aF as Ks,aG as c$,aH as f3,aI as f$,aJ as oje,aK as sje,aL as NM,aM as VR,aN as aje,aO as aD,aP as V2,aQ as mp,aR as yp,aS as zp,aT as lD,aU as d$,aV as eh,aW as h$,aX as kCe,aY as lje,aZ as kl,a_ as Do,a$ as p$,b0 as wc,b1 as g$,b2 as TCe,b3 as Abe,b4 as Jm,b5 as Cbe,b6 as Jy,b7 as uje,b8 as BM,b9 as DCe,ba as cje,bb as kbe,bc as fje,bd as m$,be as dje,bf as LCe,bg as W2,bh as hje,bi as pje,bj as Si,bk as RCe,bl as Y2,bm as Tl,bn as jp,bo as z1,bp as gje,bq as cr,br as mje,bs as yje,bt as FCe,bu as Up,bv as bje,bw as vje,bx as xje,by as wje,bz as y$,bA as _je,bB as Eje,bC as Sje,bD as MCe,bE as Aje,bF as d3,bG as b$,bH as h3,bI as OCe,bJ as hh,bK as tE,bL as nE,bM as v$,bN as x$,bO as X2,bP as Cje,bQ as kje,bR as Tje,bS as uD,bT as Dje,bU as Lje,bV as Rje,bW as WR,bX as Z2,bY as cD,bZ as Fje,b_ as Mje,b$ as Tbe,c0 as Dbe,c1 as Oje,c2 as Lbe,c3 as $je,c4 as Ije,c5 as zM,c6 as $Ce,c7 as Pje,c8 as j1,c9 as ICe,ca as Rbe,cb as p3,cc as Fbe,cd as k0,ce as w$,cf as Nje,cg as PCe,ch as fD,ci as Bje,cj as _$,ck as NCe,cl as zje,cm as jje,cn as Uje,co as qje,cp as BCe,cq as Hje,cr as Gje,cs as Vje,ct as Wje,cu as Yje,cv as zCe,cw as Xje,cx as jCe,cy as Zje,cz as jM,cA as Kje,cB as Jje,cC as UCe,cD as qCe,cE as Qje,cF as eUe}from"./main-DU0zYTAI.js";import{A as HCe,J as Mw,S as tUe}from"./core-C4kcdPvA.js";import{_ as sg}from"./iframe-Bif4rQER.js";const Mbe={duration:750},Obe={type:"FeatureCollection",features:[]};function nUe(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function rUe(e,t){const n=nUe(e,t);return n&&Math.sqrt(n)}class Ja{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}function iUe(e,t){return Array.from(t,n=>e[n])}function oUe(e=z2){if(e===z2)return GCe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function GCe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Pm(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function UM(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function VCe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?GCe:oUe(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),c=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*c*(l-c)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*c/l+d)),p=Math.min(r,Math.floor(t+(l-u)*c/l+d));VCe(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(tw(e,n,t),i(e[r],o)>0&&tw(e,n,r);s<a;){for(tw(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?tw(e,n,a):(++a,tw(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function tw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qM(e,t,n){if(e=Float64Array.from(WBe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return UM(e);if(t>=1)return Pm(e);var r,i=(r-1)*t,o=Math.floor(i),s=Pm(VCe(e,o).subarray(0,o+1)),a=UM(e.subarray(o+1));return s+(a-s)*(i-o)}}function WCe(e,t,n=YBe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function sUe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function YCe(e,t){return qM(e,.5,t)}function*aUe(e){for(const t of e)yield*t}function XCe(e){return Array.from(aUe(e))}function Kl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ZCe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function lUe(e,...t){e=new n3(e),t=t.map(uUe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function uUe(e){return e instanceof n3?e:new n3(e)}function cUe(...e){const t=new n3;for(const n of e)for(const r of n)t.add(r);return t}var KCe=-.14861,E$=1.78277,S$=-.29227,dD=-.90649,K2=1.97294,$be=K2*dD,Ibe=K2*E$,Pbe=E$*S$-dD*KCe;function fUe(e){if(e instanceof Nm)return new Nm(e.h,e.s,e.l,e.opacity);e instanceof gCe||(e=XBe(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Pbe*r+$be*t-Ibe*n)/(Pbe+$be-Ibe),o=r-i,s=(K2*(n-i)-S$*o)/dD,a=Math.sqrt(s*s+o*o)/(K2*i*(1-i)),l=a?Math.atan2(s,o)*eze-120:NaN;return new Nm(l<0?l+360:l,a,i,e.opacity)}function HM(e,t,n,r){return arguments.length===1?fUe(e):new Nm(e,t,n,r??1)}function Nm(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ZBe(Nm,HM,KBe(QBe,{brighter(e){return e=e==null?bbe:Math.pow(bbe,e),new Nm(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vbe:Math.pow(vbe,e),new Nm(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*JBe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new gCe(255*(t+n*(KCe*r+E$*i)),255*(t+n*(S$*r+dD*i)),255*(t+n*(K2*r)),this.opacity)}}));function dUe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function hUe(e,t){var n=e$(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}var Nbe=180/Math.PI,GM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function JCe(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Nbe,skewX:Math.atan(l)*Nbe,scaleX:s,scaleY:a}}var VS;function pUe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?GM:JCe(t.a,t.b,t.c,t.d,t.e,t.f)}function gUe(e){return e==null||(VS||(VS=document.createElementNS("http://www.w3.org/2000/svg","g")),VS.setAttribute("transform",e),!(e=VS.transform.baseVal.consolidate()))?GM:(e=e.matrix,JCe(e.a,e.b,e.c,e.d,e.e,e.f))}function QCe(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,c,d,h,p){if(u!==c||f!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:bm(u,c)},{i:m-2,x:bm(f,d)})}else(c||d)&&h.push("translate("+c+t+d+n)}function s(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:bm(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function a(u,f,c,d){u!==f?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:bm(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function l(u,f,c,d,h,p){if(u!==c||f!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:bm(u,c)},{i:m-2,x:bm(f,d)})}else(c!==1||d!==1)&&h.push(i(h)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,d),s(u.rotate,f.rotate,c,d),a(u.skewX,f.skewX,c,d),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(h){for(var p=-1,m=d.length,b;++p<m;)c[(b=d[p]).i]=b.x(h);return c.join("")}}}var mUe=QCe(pUe,"px, ","px)","deg)"),yUe=QCe(gUe,", ",")",")"),bUe=1e-12;function Bbe(e){return((e=Math.exp(e))+1/e)/2}function vUe(e){return((e=Math.exp(e))-1/e)/2}function xUe(e){return((e=Math.exp(2*e))-1)/(e+1)}const wUe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],c=s[1],d=s[2],h=f-a,p=c-l,m=h*h+p*p,b,y;if(m<bUe)y=Math.log(d/u)/t,b=function(D){return[a+D*h,l+D*p,u*Math.exp(t*D*y)]};else{var v=Math.sqrt(m),w=(d*d-u*u+r*m)/(2*u*n*v),E=(d*d-u*u-r*m)/(2*d*n*v),A=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(E*E+1)-E);y=(T-A)/t,b=function(D){var k=D*y,R=Bbe(A),M=u/(n*v)*(R*xUe(t*k+A)-vUe(A));return[a+M*h,l+M*p,u*R/Bbe(t*k+A)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function e3e(e){return function(t,n){var r=e((t=OM(t)).h,(n=OM(n)).h),i=Cu(t.s,n.s),o=Cu(t.l,n.l),s=Cu(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const _Ue=e3e(e$);var EUe=e3e(Cu);function SUe(e,t){var n=Cu((e=$M(e)).l,(t=$M(t)).l),r=Cu(e.a,t.a),i=Cu(e.b,t.b),o=Cu(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function t3e(e){return function t(n){n=+n;function r(i,o){var s=e((i=HM(i)).h,(o=HM(o)).h),a=Cu(i.s,o.s),l=Cu(i.l,o.l),u=Cu(i.opacity,o.opacity);return function(f){return i.h=s(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}const AUe=t3e(e$);var CUe=t3e(Cu);function kUe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const TUe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:t$,interpolateArray:tze,interpolateBasis:nze,interpolateBasisClosed:rze,interpolateCubehelix:AUe,interpolateCubehelixLong:CUe,interpolateDate:ize,interpolateDiscrete:dUe,interpolateHcl:oze,interpolateHclLong:sze,interpolateHsl:_Ue,interpolateHslLong:EUe,interpolateHue:hUe,interpolateLab:SUe,interpolateNumber:bm,interpolateNumberArray:aze,interpolateObject:lze,interpolateRgb:uze,interpolateRgbBasis:cze,interpolateRgbBasisClosed:fze,interpolateRound:n$,interpolateString:dze,interpolateTransformCss:mUe,interpolateTransformSvg:yUe,interpolateZoom:wUe,piecewise:r$,quantize:kUe},Symbol.toStringTag,{value:"Module"}));function n3e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,xbe),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return n3e(e).unknown(t)},e=arguments.length?Array.from(e,xbe):[0,1],mCe(n)}function r3e(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=WCe(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[j2(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(z2),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return r3e().domain(e).range(t).unknown(r)},i$.apply(o,arguments)}const YR=new Date,XR=new Date;function bs(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>bs(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(YR.setTime(+o),XR.setTime(+s),e(YR),e(XR),Math.floor(n(YR,XR))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Wb=bs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?bs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Wb);Wb.range;const Id=1e3,ku=Id*60,Pd=ku*60,th=Pd*24,A$=th*7,zbe=th*30,ZR=th*365,Nd=bs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Id)},(e,t)=>(t-e)/Id,e=>e.getUTCSeconds());Nd.range;const hD=bs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Id)},(e,t)=>{e.setTime(+e+t*ku)},(e,t)=>(t-e)/ku,e=>e.getMinutes());hD.range;const pD=bs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ku)},(e,t)=>(t-e)/ku,e=>e.getUTCMinutes());pD.range;const gD=bs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Id-e.getMinutes()*ku)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getHours());gD.range;const mD=bs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getUTCHours());mD.range;const Gd=bs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ku)/th,e=>e.getDate()-1);Gd.range;const Rp=bs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/th,e=>e.getUTCDate()-1);Rp.range;const i3e=bs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/th,e=>Math.floor(e/th));i3e.range;function T0(e){return bs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ku)/A$)}const U1=T0(0),g3=T0(1),DUe=T0(2),LUe=T0(3),Yb=T0(4),RUe=T0(5),FUe=T0(6);U1.range;g3.range;DUe.range;LUe.range;Yb.range;RUe.range;FUe.range;function D0(e){return bs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/A$)}const q1=D0(0),m3=D0(1),MUe=D0(2),OUe=D0(3),Xb=D0(4),$Ue=D0(5),IUe=D0(6);q1.range;m3.range;MUe.range;OUe.range;Xb.range;$Ue.range;IUe.range;const J2=bs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());J2.range;const Q2=bs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Q2.range;const Mf=bs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Mf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Mf.range;const Of=bs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Of.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Of.range;function o3e(e,t,n,r,i,o){const s=[[Nd,1,Id],[Nd,5,5*Id],[Nd,15,15*Id],[Nd,30,30*Id],[o,1,ku],[o,5,5*ku],[o,15,15*ku],[o,30,30*ku],[i,1,Pd],[i,3,3*Pd],[i,6,6*Pd],[i,12,12*Pd],[r,1,th],[r,2,2*th],[n,1,A$],[t,1,zbe],[t,3,3*zbe],[e,1,ZR]];function a(u,f,c){const d=f<u;d&&([u,f]=[f,u]);const h=c&&typeof c.range=="function"?c:l(u,f,c),p=h?h.range(u,+f+1):[];return d?p.reverse():p}function l(u,f,c){const d=Math.abs(f-u)/c,h=QT(([,,b])=>b).right(s,d);if(h===s.length)return e.every(Zm(u/ZR,f/ZR,c));if(h===0)return Wb.every(Math.max(Zm(u,f,c),1));const[p,m]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(m)}return[a,l]}const[PUe,NUe]=o3e(Of,Q2,q1,i3e,mD,pD),[BUe,zUe]=o3e(Mf,J2,U1,Gd,gD,hD);function KR(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function JR(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nw(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function s3e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=rw(i),f=iw(i),c=rw(o),d=iw(o),h=rw(s),p=iw(s),m=rw(a),b=iw(a),y=rw(l),v=iw(l),w={a:q,A:Y,b:X,B:te,c:null,d:Vbe,e:Vbe,f:uqe,g:vqe,G:wqe,H:sqe,I:aqe,j:lqe,L:a3e,m:cqe,M:fqe,p:le,q:ee,Q:Xbe,s:Zbe,S:dqe,u:hqe,U:pqe,V:gqe,w:mqe,W:yqe,x:null,X:null,y:bqe,Y:xqe,Z:_qe,"%":Ybe},E={a:z,A:he,b:de,B:ze,c:null,d:Wbe,e:Wbe,f:Cqe,g:Iqe,G:Nqe,H:Eqe,I:Sqe,j:Aqe,L:u3e,m:kqe,M:Tqe,p:He,q:je,Q:Xbe,s:Zbe,S:Dqe,u:Lqe,U:Rqe,V:Fqe,w:Mqe,W:Oqe,x:null,X:null,y:$qe,Y:Pqe,Z:Bqe,"%":Ybe},A={a:M,A:B,b:K,B:L,c:$,d:Hbe,e:Hbe,f:nqe,g:qbe,G:Ube,H:Gbe,I:Gbe,j:JUe,L:tqe,m:KUe,M:QUe,p:R,q:ZUe,Q:iqe,s:oqe,S:eqe,u:GUe,U:VUe,V:WUe,w:HUe,W:YUe,x:I,X:U,y:qbe,Y:Ube,Z:XUe,"%":rqe};w.x=T(n,w),w.X=T(r,w),w.c=T(t,w),E.x=T(n,E),E.X=T(r,E),E.c=T(t,E);function T(we,Ie){return function(qe){var Pe=[],At=-1,ht=0,nn=we.length,Vt,On,Ze;for(qe instanceof Date||(qe=new Date(+qe));++At<nn;)we.charCodeAt(At)===37&&(Pe.push(we.slice(ht,At)),(On=jbe[Vt=we.charAt(++At)])!=null?Vt=we.charAt(++At):On=Vt==="e"?" ":"0",(Ze=Ie[Vt])&&(Vt=Ze(qe,On)),Pe.push(Vt),ht=At+1);return Pe.push(we.slice(ht,At)),Pe.join("")}}function D(we,Ie){return function(qe){var Pe=nw(1900,void 0,1),At=k(Pe,we,qe+="",0),ht,nn;if(At!=qe.length)return null;if("Q"in Pe)return new Date(Pe.Q);if("s"in Pe)return new Date(Pe.s*1e3+("L"in Pe?Pe.L:0));if(Ie&&!("Z"in Pe)&&(Pe.Z=0),"p"in Pe&&(Pe.H=Pe.H%12+Pe.p*12),Pe.m===void 0&&(Pe.m="q"in Pe?Pe.q:0),"V"in Pe){if(Pe.V<1||Pe.V>53)return null;"w"in Pe||(Pe.w=1),"Z"in Pe?(ht=JR(nw(Pe.y,0,1)),nn=ht.getUTCDay(),ht=nn>4||nn===0?m3.ceil(ht):m3(ht),ht=Rp.offset(ht,(Pe.V-1)*7),Pe.y=ht.getUTCFullYear(),Pe.m=ht.getUTCMonth(),Pe.d=ht.getUTCDate()+(Pe.w+6)%7):(ht=KR(nw(Pe.y,0,1)),nn=ht.getDay(),ht=nn>4||nn===0?g3.ceil(ht):g3(ht),ht=Gd.offset(ht,(Pe.V-1)*7),Pe.y=ht.getFullYear(),Pe.m=ht.getMonth(),Pe.d=ht.getDate()+(Pe.w+6)%7)}else("W"in Pe||"U"in Pe)&&("w"in Pe||(Pe.w="u"in Pe?Pe.u%7:"W"in Pe?1:0),nn="Z"in Pe?JR(nw(Pe.y,0,1)).getUTCDay():KR(nw(Pe.y,0,1)).getDay(),Pe.m=0,Pe.d="W"in Pe?(Pe.w+6)%7+Pe.W*7-(nn+5)%7:Pe.w+Pe.U*7-(nn+6)%7);return"Z"in Pe?(Pe.H+=Pe.Z/100|0,Pe.M+=Pe.Z%100,JR(Pe)):KR(Pe)}}function k(we,Ie,qe,Pe){for(var At=0,ht=Ie.length,nn=qe.length,Vt,On;At<ht;){if(Pe>=nn)return-1;if(Vt=Ie.charCodeAt(At++),Vt===37){if(Vt=Ie.charAt(At++),On=A[Vt in jbe?Ie.charAt(At++):Vt],!On||(Pe=On(we,qe,Pe))<0)return-1}else if(Vt!=qe.charCodeAt(Pe++))return-1}return Pe}function R(we,Ie,qe){var Pe=u.exec(Ie.slice(qe));return Pe?(we.p=f.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function M(we,Ie,qe){var Pe=h.exec(Ie.slice(qe));return Pe?(we.w=p.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function B(we,Ie,qe){var Pe=c.exec(Ie.slice(qe));return Pe?(we.w=d.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function K(we,Ie,qe){var Pe=y.exec(Ie.slice(qe));return Pe?(we.m=v.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function L(we,Ie,qe){var Pe=m.exec(Ie.slice(qe));return Pe?(we.m=b.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function $(we,Ie,qe){return k(we,t,Ie,qe)}function I(we,Ie,qe){return k(we,n,Ie,qe)}function U(we,Ie,qe){return k(we,r,Ie,qe)}function q(we){return s[we.getDay()]}function Y(we){return o[we.getDay()]}function X(we){return l[we.getMonth()]}function te(we){return a[we.getMonth()]}function le(we){return i[+(we.getHours()>=12)]}function ee(we){return 1+~~(we.getMonth()/3)}function z(we){return s[we.getUTCDay()]}function he(we){return o[we.getUTCDay()]}function de(we){return l[we.getUTCMonth()]}function ze(we){return a[we.getUTCMonth()]}function He(we){return i[+(we.getUTCHours()>=12)]}function je(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Ie=T(we+="",w);return Ie.toString=function(){return we},Ie},parse:function(we){var Ie=D(we+="",!1);return Ie.toString=function(){return we},Ie},utcFormat:function(we){var Ie=T(we+="",E);return Ie.toString=function(){return we},Ie},utcParse:function(we){var Ie=D(we+="",!0);return Ie.toString=function(){return we},Ie}}}var jbe={"-":"",_:" ",0:"0"},$s=/^\s*\d+/,jUe=/^%/,UUe=/[\\^$*+?|[\]().{}]/g;function ai(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function qUe(e){return e.replace(UUe,"\\$&")}function rw(e){return new RegExp("^(?:"+e.map(qUe).join("|")+")","i")}function iw(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function HUe(e,t,n){var r=$s.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function GUe(e,t,n){var r=$s.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function VUe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function WUe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function YUe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ube(e,t,n){var r=$s.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function qbe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function XUe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ZUe(e,t,n){var r=$s.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function KUe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Hbe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function JUe(e,t,n){var r=$s.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Gbe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function QUe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function eqe(e,t,n){var r=$s.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function tqe(e,t,n){var r=$s.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function nqe(e,t,n){var r=$s.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rqe(e,t,n){var r=jUe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function iqe(e,t,n){var r=$s.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function oqe(e,t,n){var r=$s.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Vbe(e,t){return ai(e.getDate(),t,2)}function sqe(e,t){return ai(e.getHours(),t,2)}function aqe(e,t){return ai(e.getHours()%12||12,t,2)}function lqe(e,t){return ai(1+Gd.count(Mf(e),e),t,3)}function a3e(e,t){return ai(e.getMilliseconds(),t,3)}function uqe(e,t){return a3e(e,t)+"000"}function cqe(e,t){return ai(e.getMonth()+1,t,2)}function fqe(e,t){return ai(e.getMinutes(),t,2)}function dqe(e,t){return ai(e.getSeconds(),t,2)}function hqe(e){var t=e.getDay();return t===0?7:t}function pqe(e,t){return ai(U1.count(Mf(e)-1,e),t,2)}function l3e(e){var t=e.getDay();return t>=4||t===0?Yb(e):Yb.ceil(e)}function gqe(e,t){return e=l3e(e),ai(Yb.count(Mf(e),e)+(Mf(e).getDay()===4),t,2)}function mqe(e){return e.getDay()}function yqe(e,t){return ai(g3.count(Mf(e)-1,e),t,2)}function bqe(e,t){return ai(e.getFullYear()%100,t,2)}function vqe(e,t){return e=l3e(e),ai(e.getFullYear()%100,t,2)}function xqe(e,t){return ai(e.getFullYear()%1e4,t,4)}function wqe(e,t){var n=e.getDay();return e=n>=4||n===0?Yb(e):Yb.ceil(e),ai(e.getFullYear()%1e4,t,4)}function _qe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ai(t/60|0,"0",2)+ai(t%60,"0",2)}function Wbe(e,t){return ai(e.getUTCDate(),t,2)}function Eqe(e,t){return ai(e.getUTCHours(),t,2)}function Sqe(e,t){return ai(e.getUTCHours()%12||12,t,2)}function Aqe(e,t){return ai(1+Rp.count(Of(e),e),t,3)}function u3e(e,t){return ai(e.getUTCMilliseconds(),t,3)}function Cqe(e,t){return u3e(e,t)+"000"}function kqe(e,t){return ai(e.getUTCMonth()+1,t,2)}function Tqe(e,t){return ai(e.getUTCMinutes(),t,2)}function Dqe(e,t){return ai(e.getUTCSeconds(),t,2)}function Lqe(e){var t=e.getUTCDay();return t===0?7:t}function Rqe(e,t){return ai(q1.count(Of(e)-1,e),t,2)}function c3e(e){var t=e.getUTCDay();return t>=4||t===0?Xb(e):Xb.ceil(e)}function Fqe(e,t){return e=c3e(e),ai(Xb.count(Of(e),e)+(Of(e).getUTCDay()===4),t,2)}function Mqe(e){return e.getUTCDay()}function Oqe(e,t){return ai(m3.count(Of(e)-1,e),t,2)}function $qe(e,t){return ai(e.getUTCFullYear()%100,t,2)}function Iqe(e,t){return e=c3e(e),ai(e.getUTCFullYear()%100,t,2)}function Pqe(e,t){return ai(e.getUTCFullYear()%1e4,t,4)}function Nqe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Xb(e):Xb.ceil(e),ai(e.getUTCFullYear()%1e4,t,4)}function Bqe(){return"+0000"}function Ybe(){return"%"}function Xbe(e){return+e}function Zbe(e){return Math.floor(+e/1e3)}var Ly,C$,f3e,k$,d3e;zqe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zqe(e){return Ly=s3e(e),C$=Ly.format,f3e=Ly.parse,k$=Ly.utcFormat,d3e=Ly.utcParse,Ly}function jqe(e){return new Date(e)}function Uqe(e){return e instanceof Date?+e:+new Date(+e)}function T$(e,t,n,r,i,o,s,a,l,u){var f=hze(),c=f.invert,d=f.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),v=u("%b %d"),w=u("%B"),E=u("%Y");function A(T){return(l(T)<T?h:a(T)<T?p:s(T)<T?m:o(T)<T?b:r(T)<T?i(T)<T?y:v:n(T)<T?w:E)(T)}return f.invert=function(T){return new Date(c(T))},f.domain=function(T){return arguments.length?d(Array.from(T,Uqe)):d().map(jqe)},f.ticks=function(T){var D=d();return e(D[0],D[D.length-1],T??10)},f.tickFormat=function(T,D){return D==null?A:u(D)},f.nice=function(T){var D=d();return(!T||typeof T.range!="function")&&(T=t(D[0],D[D.length-1],T??10)),T?d(pze(D,T)):f},f.copy=function(){return gze(f,T$(e,t,n,r,i,o,s,a,l,u))},f}function qqe(){return i$.apply(T$(BUe,zUe,Mf,J2,U1,Gd,gD,hD,Nd,C$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hqe(){return i$.apply(T$(PUe,NUe,Of,Q2,q1,Rp,mD,pD,Nd,k$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yD(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=yCe,f,c=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+f(m))-o)*(r*m<r*o?a:l),u(c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=f(e=+e),o=f(t=+t),s=f(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(b){var y,v,w;return arguments.length?([y,v,w]=b,u=r$(m,[y,v,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(t$),h.rangeRound=p(n$),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return f=m,i=m(e),o=m(t),s=m(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function h3e(){var e=mCe(yD()(yCe));return e.copy=function(){return eD(e,h3e())},tD.apply(e,arguments)}function p3e(){var e=mze(yD()).domain([.1,1,10]);return e.copy=function(){return eD(e,p3e()).base(e.base())},tD.apply(e,arguments)}function g3e(){var e=yze(yD());return e.copy=function(){return eD(e,g3e()).constant(e.constant())},tD.apply(e,arguments)}function D$(){var e=bze(yD());return e.copy=function(){return eD(e,D$()).exponent(e.exponent())},tD.apply(e,arguments)}function Gqe(){return D$.apply(null,arguments).exponent(.5)}function Vqe(e){if(!(e.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const t=e.inversePixelTransform[0],n=e.inversePixelTransform[1],r=Math.sqrt(t*t+n*n),i=e.frameState,o=U2(e.inversePixelTransform.slice(),i.coordinateToPixelTransform),s=zze(i.viewState.resolution,r);let a;return new jze(e.context,r,i.extent,o,i.viewState.rotation,s,a)}function m3e(e,t,n){const r=[];let i=e(0),o=e(1),s=t(i),a=t(o);const l=[o,i],u=[a,s],f=[1,0],c={};let d=1e5,h,p,m,b,y,v;for(;--d>0&&f.length>0;)m=f.pop(),i=l.pop(),s=u.pop(),v=m.toString(),v in c||(r.push(s[0],s[1]),c[v]=!0),b=f.pop(),o=l.pop(),a=u.pop(),y=(m+b)/2,h=e(y),p=t(h),Uze(p[0],p[1],s[0],s[1],a[0],a[1])<n?(r.push(a[0],a[1]),v=b.toString(),c[v]=!0):(f.push(b,y,y,m),u.push(a,p,p,s),l.push(o,h,h,i));return r}function Wqe(e,t,n,r,i){const o=si("EPSG:4326");return m3e(function(s){return[e,t+(n-t)*s]},i3(o,r),i)}function Yqe(e,t,n,r,i){const o=si("EPSG:4326");return m3e(function(s){return[t+(n-t)*s,e]},i3(o,r),i)}const Xqe=new q2({color:"rgba(0,0,0,0.2)"}),Zqe=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];let Kqe=class extends o${constructor(t){t=t||{};const n=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,super(n),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=t.targetSize!==void 0?t.targetSize:100,this.maxLines_=t.maxLines!==void 0?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=t.strokeStyle!==void 0?t.strokeStyle:Xqe,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=t.lonLabelFormatter==null?_be.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=t.latLabelFormatter==null?_be.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=t.lonLabelPosition==null?0:t.lonLabelPosition,this.latLabelPosition_=t.latLabelPosition==null?1:t.latLabelPosition,this.lonLabelStyleBase_=new p2({text:t.lonLabelStyle!==void 0?t.lonLabelStyle.clone():new Ebe({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new IM({color:"rgba(0,0,0,1)"}),stroke:new q2({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const i=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(i),this.lonLabelStyleBase_},this.latLabelStyleBase_=new p2({text:t.latLabelStyle!==void 0?t.latLabelStyle.clone():new Ebe({font:"12px Calibri,sans-serif",textAlign:"right",fill:new IM({color:"rgba(0,0,0,1)"}),stroke:new q2({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const i=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(i),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(vm.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=t.intervals!==void 0?t.intervals:Zqe,this.setSource(new J_({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new qze,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new p2({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,n){let r=t.slice();return this.projection_&&this.getSource().getWrapX()&&Hze(r,this.projection_),this.loadedExtent_&&(Gze(this.loadedExtent_,r,n)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(t,n,r){this.loadedExtent_=t;const i=this.getSource(),o=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=Km(o,t);if(this.renderedExtent_&&H2(this.renderedExtent_,s)&&this.renderedResolution_===n||(this.renderedExtent_=s,this.renderedResolution_=n,s$(s)))return;const a=Dp(s),l=n*n/4;(!this.projection_||!hC(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(s,a,n,l);let f=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(f+=this.meridians_.length),this.parallelsLabels_&&(f+=this.parallels_.length);let c;for(;f>this.featurePool_.length;)c=new au,this.featurePool_.push(c);const d=i.getFeaturesCollection();d.clear();let h=0,p,m;for(p=0,m=this.meridians_.length;p<m;++p)c=this.featurePool_[h++],c.setGeometry(this.meridians_[p]),c.setStyle(this.lineStyle_),d.push(c);for(p=0,m=this.parallels_.length;p<m;++p)c=this.featurePool_[h++],c.setGeometry(this.parallels_[p]),c.setStyle(this.lineStyle_),d.push(c)}addMeridian_(t,n,r,i,o,s){const a=this.getMeridian_(t,n,r,i,s);if(Gb(a.getExtent(),o)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(t);s in this.meridiansLabels_?this.meridiansLabels_[s].text=l:this.meridiansLabels_[s]={geom:new gc([]),text:l}}this.meridians_[s++]=a}return s}addParallel_(t,n,r,i,o,s){const a=this.getParallel_(t,n,r,i,s);if(Gb(a.getExtent(),o)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(t);s in this.parallelsLabels_?this.parallelsLabels_[s].text=l:this.parallelsLabels_[s]={geom:new gc([]),text:l}}this.parallels_[s++]=a}return s}drawLabels_(t){const n=t.frameState.viewState.rotation,r=t.frameState.viewState.resolution,i=t.frameState.size,o=t.frameState.extent,s=Dp(o);let a=o;if(n){const p=i[0]*r,m=i[1]*r;a=[s[0]-p/2,s[1]-m/2,s[0]+p/2,s[1]+m/2]}let l=0,u=0,f=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),d=eu(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!o3(c,o)){l=Math.floor((o[0]-c[0])/d),u=Math.ceil((o[2]-c[2])/d);const p=Math.abs(n)>Math.PI/2;f=f!==p}const h=Vqe(t);for(let p=l;p<=u;++p){let m=this.meridians_.length+this.parallels_.length,b,y,v,w;if(this.meridiansLabels_)for(y=0,v=this.meridiansLabels_.length;y<v;++y){const E=this.meridians_[y];if(!n&&p===0)w=this.getMeridianPoint_(E,o,y);else{const A=E.clone();A.translate(p*d,0),A.rotate(-n,s),w=this.getMeridianPoint_(A,a,y),w.rotate(n,s)}b=this.featurePool_[m++],b.setGeometry(w),b.set("graticule_label",this.meridiansLabels_[y].text),h.drawFeature(b,this.lonLabelStyle_(b))}if(this.parallelsLabels_&&(p===l&&f||p===u&&!f))for(y=0,v=this.parallels_.length;y<v;++y){const E=this.parallels_[y];if(!n&&p===0)w=this.getParallelPoint_(E,o,y);else{const A=E.clone();A.translate(p*d,0),A.rotate(-n,s),w=this.getParallelPoint_(A,a,y),w.rotate(n,s)}b=this.featurePool_[m++],b.setGeometry(w),b.set("graticule_label",this.parallelsLabels_[y].text),h.drawFeature(b,this.latLabelStyle_(b))}}}createGraticule_(t,n,r,i){const o=this.getInterval_(r);if(o==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let s=!1;const a=this.projection_.getExtent(),l=eu(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!o3(a,t)&&(eu(t)>=l?(t[0]=a[0],t[2]=a[2]):s=!0);const u=[Co(n[0],this.minX_,this.maxX_),Co(n[1],this.minY_,this.maxY_)],f=this.toLonLatTransform_(u);isNaN(f[1])&&(f[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=Co(f[0],this.minLon_,this.maxLon_),d=Co(f[1],this.minLat_,this.maxLat_);const h=this.maxLines_;let p,m,b,y,v=t;s||(v=[Co(t[0],this.minX_,this.maxX_),Co(t[1],this.minY_,this.maxY_),Co(t[2],this.minX_,this.maxX_),Co(t[3],this.minY_,this.maxY_)]);const w=Vb(v,this.toLonLatTransform_,void 0,8);let E=w[3],A=w[2],T=w[1],D=w[0];if(s||(ub(v,this.bottomLeft_)&&(D=this.minLon_,T=this.minLat_),ub(v,this.bottomRight_)&&(A=this.maxLon_,T=this.minLat_),ub(v,this.topLeft_)&&(D=this.minLon_,E=this.maxLat_),ub(v,this.topRight_)&&(A=this.maxLon_,E=this.maxLat_),E=Co(E,d,this.maxLat_),A=Co(A,c,this.maxLon_),T=Co(T,this.minLat_,d),D=Co(D,this.minLon_,c)),c=Math.floor(c/o)*o,y=Co(c,this.minLon_,this.maxLon_),m=this.addMeridian_(y,T,E,i,t,0),p=0,s)for(;(y-=o)>=D&&p++<h;)m=this.addMeridian_(y,T,E,i,t,m);else for(;y!=this.minLon_&&p++<h;)y=Math.max(y-o,this.minLon_),m=this.addMeridian_(y,T,E,i,t,m);if(y=Co(c,this.minLon_,this.maxLon_),p=0,s)for(;(y+=o)<=A&&p++<h;)m=this.addMeridian_(y,T,E,i,t,m);else for(;y!=this.maxLon_&&p++<h;)y=Math.min(y+o,this.maxLon_),m=this.addMeridian_(y,T,E,i,t,m);for(this.meridians_.length=m,this.meridiansLabels_&&(this.meridiansLabels_.length=m),d=Math.floor(d/o)*o,b=Co(d,this.minLat_,this.maxLat_),m=this.addParallel_(b,D,A,i,t,0),p=0;b!=this.minLat_&&p++<h;)b=Math.max(b-o,this.minLat_),m=this.addParallel_(b,D,A,i,t,m);for(b=Co(d,this.minLat_,this.maxLat_),p=0;b!=this.maxLat_&&p++<h;)b=Math.min(b+o,this.maxLat_),m=this.addParallel_(b,D,A,i,t,m);this.parallels_.length=m,this.parallelsLabels_&&(this.parallelsLabels_.length=m)}getInterval_(t){const n=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let i=-1;const o=Math.pow(this.targetSize_*t,2),s=[],a=[];for(let l=0,u=this.intervals_.length;l<u;++l){const f=Co(this.intervals_[l]/2,0,90),c=Co(r,-90+f,90-f);if(s[0]=n-f,s[1]=c-f,a[0]=n+f,a[1]=c+f,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(a,a),Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)<=o)break;i=this.intervals_[l]}return i}getMeridian_(t,n,r,i,o){const s=Wqe(t,n,r,this.projection_,i);let a=this.meridians_[o];return a?(a.setFlatCoordinates("XY",s),a.changed()):(a=new Ff(s,"XY"),this.meridians_[o]=a),a}getMeridianPoint_(t,n,r){const i=t.getFlatCoordinates();let o=1,s=i.length-1;i[o]>i[s]&&(o=s,s=1);const a=Math.max(n[1],i[o]),l=Math.min(n[3],i[s]),u=Co(n[1]+Math.abs(n[1]-n[3])*this.lonLabelPosition_,a,l),c=[i[o-1]+(i[s-1]-i[o-1])*(u-i[o])/(i[s]-i[o]),u],d=this.meridiansLabels_[r].geom;return d.setCoordinates(c),d}getMeridians(){return this.meridians_}getParallel_(t,n,r,i,o){const s=Yqe(t,n,r,this.projection_,i);let a=this.parallels_[o];return a?(a.setFlatCoordinates("XY",s),a.changed()):a=new Ff(s,"XY"),a}getParallelPoint_(t,n,r){const i=t.getFlatCoordinates();let o=0,s=i.length-2;i[o]>i[s]&&(o=s,s=0);const a=Math.max(n[0],i[o]),l=Math.min(n[2],i[s]),u=Co(n[0]+Math.abs(n[0]-n[2])*this.latLabelPosition_,a,l),f=i[o+1]+(i[s+1]-i[o+1])*(u-i[o])/(i[s]-i[o]),c=[u,f],d=this.parallelsLabels_[r].geom;return d.setCoordinates(c),d}getParallels(){return this.parallels_}updateProjectionInfo_(t){const n=si("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const i=i3(t,n);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{const s=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,u){u=u||2;const f=i(a,l,u);for(let c=0,d=f.length;c<d;c+=u)f[c]<s&&(f[c]+=360);return f}}this.fromLonLatTransform_=i3(n,t);const o=Vb([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Dp(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}};class L$ extends xCe{constructor(t,n,r,i,o){const s=o!==void 0?xm.IDLE:xm.LOADED;super(t,n,r,s),this.loader_=o!==void 0?o:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=xm.ERROR):this.state=xm.LOADED,this.changed()}load(){this.state==xm.IDLE&&(this.state=xm.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const Jqe={Point:nHe,LineString:rHe,Polygon:aHe,MultiPoint:oHe,MultiLineString:iHe,MultiPolygon:sHe},Qqe={Point:lHe,LineString:uHe,Polygon:cHe,MultiPoint:dHe,MultiLineString:fHe,MultiPolygon:hHe};class eHe extends Vze{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,n,r){const i=t,o=Kbe(i.geometry,n),s=new au;if(this.geometryName_&&s.setGeometryName(this.geometryName_),s.setGeometry(o),i.attributes){s.setProperties(i.attributes,!0);const a=i.attributes[r];a!==void 0&&s.setId(a)}return s}readFeaturesFromObject(t,n){if(n=n||{},t.features){const r=t,i=[],o=r.features;for(let s=0,a=o.length;s<a;++s)i.push(this.readFeatureFromObject(o[s],n,t.objectIdFieldName));return i}return[this.readFeatureFromObject(t,n)]}readGeometryFromObject(t,n){return Kbe(t,n)}readProjectionFromObject(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){const r=t.spatialReference.wkid;return si("EPSG:"+r)}return null}writeGeometryObject(t,n){return Jbe(t,this.adaptOptions(n))}writeFeatureObject(t,n){n=this.adaptOptions(n);const r={};if(!t.hasProperties())return r.attributes={},r;const i=t.getProperties(),o=t.getGeometry();if(o){r.geometry=Jbe(o,n);const s=n&&(n.dataProjection||n.featureProjection);s&&(r.geometry.spatialReference={wkid:Number(si(s).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return Wze(i)?r.attributes={}:r.attributes=i,r}writeFeaturesObject(t,n){n=this.adaptOptions(n);const r=[];for(let i=0,o=t.length;i<o;++i)r.push(this.writeFeatureObject(t[i],n));return{features:r}}}function Kbe(e,t){if(!e)return null;let n;if(typeof e.x=="number"&&typeof e.y=="number")n="Point";else if(e.points)n="MultiPoint";else if(e.paths)e.paths.length===1?n="LineString":n="MultiLineString";else if(e.rings){const i=e,o=H1(i),s=tHe(i.rings,o);s.length===1?(n="Polygon",e=Object.assign({},e,{rings:s[0]})):(n="MultiPolygon",e=Object.assign({},e,{rings:s}))}const r=Jqe[n];return Ms(r(e),!1,t)}function tHe(e,t){const n=[],r=[],i=[];let o,s;for(o=0,s=e.length;o<s;++o)n.length=0,Yze(n,0,e[o],t.length),Xze(n,0,n.length,t.length)?r.push([e[o]]):i.push(e[o]);for(;i.length;){const a=i.shift();let l=!1;for(o=r.length-1;o>=0;o--){const u=r[o][0];if(o3(new PM(u).getExtent(),new PM(a).getExtent())){r[o].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function nHe(e){let t;return e.m!==void 0&&e.z!==void 0?t=new gc([e.x,e.y,e.z,e.m],"XYZM"):e.z!==void 0?t=new gc([e.x,e.y,e.z],"XYZ"):e.m!==void 0?t=new gc([e.x,e.y,e.m],"XYM"):t=new gc([e.x,e.y]),t}function rHe(e){const t=H1(e);return new Ff(e.paths[0],t)}function iHe(e){const t=H1(e);return new N1(e.paths,t)}function H1(e){let t="XY";return e.hasZ===!0&&e.hasM===!0?t="XYZM":e.hasZ===!0?t="XYZ":e.hasM===!0&&(t="XYM"),t}function oHe(e){const t=H1(e);return new rD(e.points,t)}function sHe(e){const t=H1(e);return new Q_(e.rings,t)}function aHe(e){const t=H1(e);return new eE(e.rings,t)}function lHe(e,t){const n=e.getCoordinates();let r;const i=e.getLayout();if(i==="XYZ")r={x:n[0],y:n[1],z:n[2]};else if(i==="XYM")r={x:n[0],y:n[1],m:n[2]};else if(i==="XYZM")r={x:n[0],y:n[1],z:n[2],m:n[3]};else if(i==="XY")r={x:n[0],y:n[1]};else throw new Error("Invalid geometry layout");return r}function rE(e){const t=e.getLayout();return{hasZ:t==="XYZ"||t==="XYZM",hasM:t==="XYM"||t==="XYZM"}}function uHe(e,t){const n=rE(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:[e.getCoordinates()]}}function cHe(e,t){const n=rE(e);return{hasZ:n.hasZ,hasM:n.hasM,rings:e.getCoordinates(!1)}}function fHe(e,t){const n=rE(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:e.getCoordinates()}}function dHe(e,t){const n=rE(e);return{hasZ:n.hasZ,hasM:n.hasM,points:e.getCoordinates()}}function hHe(e,t){const n=rE(e),r=e.getCoordinates(!1),i=[];for(let o=0;o<r.length;o++)for(let s=r[o].length-1;s>=0;s--)i.push(r[o][s]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}}function Jbe(e,t){const n=Qqe[e.getType()];return n(Ms(e,!0,t),t)}const Vd="http://www.opengis.net/gml",pHe=/^\s*$/;class un extends iD{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:kn(this.readFeaturesInternal),featureMembers:Rn(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,n){const r=t.localName;let i=null;if(r=="FeatureCollection")i=Rt([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const o=n[0];let s=o.featureType,a=o.featureNS;const l="p",u="p0";if(!s&&t.childNodes){s=[],a={};for(let d=0,h=t.childNodes.length;d<h;++d){const p=t.childNodes[d];if(p.nodeType===1){const m=p.nodeName.split(":").pop();if(!s.includes(m)){let b="",y=0;const v=p.namespaceURI;for(const w in a){if(a[w]===v){b=w;break}++y}b||(b=l+y,a[b]=v),s.push(b+":"+m)}}}r!="featureMember"&&(o.featureType=s,o.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[u]=d}const f={},c=Array.isArray(s)?s:[s];for(const d in a){const h={};for(let p=0,m=c.length;p<m;++p)(c[p].includes(":")?c[p].split(":")[0]:u)===d&&(h[c[p].split(":").pop()]=r=="featureMembers"?kn(this.readFeatureElement,this):Rn(this.readFeatureElement,this));f[a[d]]=h}r=="featureMember"||r=="member"?i=Rt(void 0,f,t,n):i=Rt([],f,t,n)}return i===null&&(i=[]),i}readGeometryOrExtent(t,n){const r=n[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Rt(null,this.GEOMETRY_PARSERS,t,n,this)}readExtentElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?a$(i,r):void 0}readGeometryElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?Ms(i,!1,r):void 0}readFeatureElementInternal(t,n,r){let i;const o={};for(let l=t.firstElementChild;l;l=l.nextElementSibling){let u;const f=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=s3(l,!1),pHe.test(u)&&(u=void 0)):(r&&(u=f==="boundedBy"?this.readExtentElement(l,n):this.readGeometryElement(l,n)),u?f!=="boundedBy"&&(i=f):u=this.readFeatureElementInternal(l,n,!1));const c=l.attributes.length;if(c>0&&!(u instanceof Zze)){u={_content_:u};for(let d=0;d<c;d++){const h=l.attributes[d].name;u[h]=l.attributes[d].value}}o[f]?(o[f]instanceof Array||(o[f]=[o[f]]),o[f].push(u)):o[f]=u}if(!r)return o;const s=new au(o);i&&s.setGeometryName(i);const a=t.getAttribute("fid")||Kze(t,this.namespace,"id");return a&&s.setId(a),s}readFeatureElement(t,n){return this.readFeatureElementInternal(t,n,!0)}readPoint(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new gc(r,"XYZ")}readMultiPoint(t,n){const r=Rt([],this.MULTIPOINT_PARSERS,t,n,this);if(r)return new rD(r)}readMultiLineString(t,n){const r=Rt([],this.MULTILINESTRING_PARSERS,t,n,this);if(r)return new N1(r)}readMultiPolygon(t,n){const r=Rt([],this.MULTIPOLYGON_PARSERS,t,n,this);if(r)return new Q_(r)}pointMemberParser(t,n){Lp(this.POINTMEMBER_PARSERS,t,n,this)}lineStringMemberParser(t,n){Lp(this.LINESTRINGMEMBER_PARSERS,t,n,this)}polygonMemberParser(t,n){Lp(this.POLYGONMEMBER_PARSERS,t,n,this)}readLineString(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new Ff(r,"XYZ")}readFlatLinearRing(t,n){const r=Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);if(r)return r}readLinearRing(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new PM(r,"XYZ")}readPolygon(t,n){const r=Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],o=[i.length];let s,a;for(s=1,a=r.length;s<a;++s)a3(i,r[s]),o.push(i.length);return new eE(i,"XYZ",o)}}readFlatCoordinatesFromNode(t,n){return Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}readGeometryFromNode(t,n){const r=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return r||null}readFeaturesFromNode(t,n){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[r])||[]}readProjectionFromNode(t){return si(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}un.prototype.namespace=Vd;un.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:kn(un.prototype.pointMemberParser),pointMembers:kn(un.prototype.pointMemberParser)}};un.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:kn(un.prototype.lineStringMemberParser),lineStringMembers:kn(un.prototype.lineStringMemberParser)}};un.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:kn(un.prototype.polygonMemberParser),polygonMembers:kn(un.prototype.polygonMemberParser)}};un.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:kn(un.prototype.readFlatCoordinatesFromNode)}};un.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kn(un.prototype.readLineString)}};un.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kn(un.prototype.readPolygon)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing)}};const gHe=Vd+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",mHe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class hr extends un{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[Vd].featureMember=kn(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:gHe}readFlatCoordinates(t,n){const r=s3(t,!1).replace(/^\s*|\s*$/g,""),o=n[0].srsName;let s="enu";if(o){const u=si(o);u&&(s=u.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let u=0,f=a.length;u<f;u++){const c=a[u].split(/,+/),d=parseFloat(c[0]),h=parseFloat(c[1]),p=c.length===3?parseFloat(c[2]):0;s.startsWith("en")?l.push(d,h,p):l.push(h,d,p)}return l}readBox(t,n){const r=Rt([null],this.BOX_PARSERS_,t,n,this);return wCe(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}outerBoundaryIsParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.multiSurface,s=i.surface,a=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&o===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),er("http://www.opengis.net/gml",r)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const o=r[r.length-1],s=o.featureNS,a=n.getGeometryName();o.serializers||(o.serializers={},o.serializers[s]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const h=c[d];h!=null&&(l.push(d),u.push(h),d==a||typeof h.getSimplifiedGeometry=="function"?d in o.serializers[s]||(o.serializers[s][d]=Ge(this.writeGeometryElement,this)):d in o.serializers[s]||(o.serializers[s][d]=Ge(yr)))}}const f=Object.assign({},o);f.node=t,Mi(f,o.serializers,tu(void 0,s),u,r,l)}writeCurveOrLineString(t,n,r){const o=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&o&&t.setAttribute("srsName",o),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s),this.writeCoordinates_(s,n,r)}else if(t.nodeName==="Curve"){const s=er(t.namespaceURI,"segments");t.appendChild(s),this.writeCurveSegments_(s,n,r)}}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.curve;s&&t.setAttribute("srsName",s);const l=n.getLineStrings();Mi({node:t,hasZ:o,srsName:s,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(t,n,r){const i=r[r.length-1],o=Object.assign({},i);o.node=t;let s;Array.isArray(n)?s=a$(n,i):s=Ms(n,!0,i),Mi(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}createCoordinatesNode_(t){const n=er(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n}writeCoordinates_(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=n.getCoordinates(),l=a.length,u=new Array(l);for(let f=0;f<l;++f){const c=a[f];u[f]=this.getCoords_(c,s,o)}yr(t,u.join(" "))}writeCurveSegments_(t,n,r){const i=er(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;if(t.nodeName!=="PolygonPatch"&&s&&t.setAttribute("srsName",s),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Mi({node:t,hasZ:o,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=er(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.node,s=i.exteriorWritten;return s===void 0&&(i.exteriorWritten=!0),er(o.namespaceURI,s!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,n,r){const i=er(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeRing(t,n,r){const i=er(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}getCoords_(t,n,r){let o=(n?si(n).getAxisOrientation():"enu").startsWith("en")?t[0]+","+t[1]:t[1]+","+t[0];if(r){const s=t[2]||0;o+=","+s}return o}writePoint(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;s&&t.setAttribute("srsName",s);const a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);const l=n.getCoordinates(),u=this.getCoords_(l,s,o);yr(a,u)}writeMultiPoint(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;s&&t.setAttribute("srsName",s);const a=n.getPoints();Mi({node:t,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,tu("pointMember"),a,r,void 0,this)}writePointMember(t,n,r){const i=er(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLinearRing(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s),this.writeCoordinates_(s,n,r)}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.surface;s&&t.setAttribute("srsName",s);const l=n.getPolygons();Mi({node:t,hasZ:o,srsName:s,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writeEnvelope(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Mi({node:t},this.ENVELOPE_SERIALIZERS,B1,a,r,s,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return er("http://www.opengis.net/gml",mHe[i.nodeName])}}hr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Rn(hr.prototype.readFlatCoordinates)}};hr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:hr.prototype.innerBoundaryIsParser,outerBoundaryIs:hr.prototype.outerBoundaryIsParser}};hr.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:kn(hr.prototype.readFlatCoordinates)}};hr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Box:Rn(hr.prototype.readBox)}};hr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(hr.prototype.writeCurveOrLineString),MultiCurve:Ge(hr.prototype.writeMultiCurveOrLineString),Point:Ge(hr.prototype.writePoint),MultiPoint:Ge(hr.prototype.writeMultiPoint),LineString:Ge(hr.prototype.writeCurveOrLineString),MultiLineString:Ge(hr.prototype.writeMultiCurveOrLineString),LinearRing:Ge(hr.prototype.writeLinearRing),Polygon:Ge(hr.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(hr.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(hr.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(hr.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(hr.prototype.writeEnvelope)}};hr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(hr.prototype.writeLineStringOrCurveMember),curveMember:Ge(hr.prototype.writeLineStringOrCurveMember)}};hr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Ge(hr.prototype.writeRing),innerBoundaryIs:Ge(hr.prototype.writeRing)}};hr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(hr.prototype.writePointMember)}};hr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(hr.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(hr.prototype.writeSurfaceOrPolygonMember)}};hr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};const yHe=Vd+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",bHe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class vt extends un{constructor(t){t=t||{},super(t),this.surface_=t.surface!==void 0?t.surface:!1,this.curve_=t.curve!==void 0?t.curve:!1,this.multiCurve_=t.multiCurve!==void 0?t.multiCurve:!0,this.multiSurface_=t.multiSurface!==void 0?t.multiSurface:!0,this.schemaLocation=t.schemaLocation?t.schemaLocation:yHe,this.hasZ=t.hasZ!==void 0?t.hasZ:!1}readMultiCurve(t,n){const r=Rt([],this.MULTICURVE_PARSERS,t,n,this);if(r)return new N1(r)}readFlatCurveRing(t,n){const r=Rt([],this.MULTICURVE_PARSERS,t,n,this),i=[];for(let o=0,s=r.length;o<s;++o)a3(i,r[o].getFlatCoordinates());return i}readMultiSurface(t,n){const r=Rt([],this.MULTISURFACE_PARSERS,t,n,this);if(r)return new Q_(r)}curveMemberParser(t,n){Lp(this.CURVEMEMBER_PARSERS,t,n,this)}surfaceMemberParser(t,n){Lp(this.SURFACEMEMBER_PARSERS,t,n,this)}readPatch(t,n){return Rt([null],this.PATCHES_PARSERS,t,n,this)}readSegment(t,n){return Rt([],this.SEGMENTS_PARSERS,t,n,this)}readPolygonPatch(t,n){return Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)}readLineStringSegment(t,n){return Rt([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}interiorParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}exteriorParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}readSurface(t,n){const r=Rt([null],this.SURFACE_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],o=[i.length];let s,a;for(s=1,a=r.length;s<a;++s)a3(i,r[s]),o.push(i.length);return new eE(i,"XYZ",o)}}readCurve(t,n){const r=Rt([null],this.CURVE_PARSERS,t,n,this);if(r)return new Ff(r,"XYZ")}readEnvelope(t,n){const r=Rt([null],this.ENVELOPE_PARSERS,t,n,this);return wCe(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(t,n){let r=s3(t,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];let s;for(;s=i.exec(r);)o.push(parseFloat(s[1])),r=r.substr(s[0].length);if(r!=="")return;const l=n[0].srsName;if((l?si(l).getAxisOrientation():"enu")==="neu")for(let c=0,d=o.length;c<d;c+=3){const h=o[c],p=o[c+1];o[c]=p,o[c+1]=h}const f=o.length;if(f==2&&o.push(0),f!==0)return o}readFlatPosList(t,n){const r=s3(t,!1).replace(/^\s*|\s*$/g,""),i=n[0],o=i.srsName,s=i.srsDimension,a=o?si(o).getAxisOrientation():"enu",l=r.split(/\s+/);let u=2;t.getAttribute("srsDimension")?u=gp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?u=gp(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?u=gp(t.parentNode.getAttribute("srsDimension")):s&&(u=gp(s));const f=a.startsWith("en");let c,d,h;const p=[];for(let m=0,b=l.length;m<b;m+=u)c=parseFloat(l[m]),d=parseFloat(l[m+1]),h=u===3?parseFloat(l[m+2]):0,f?p.push(c,d,h):p.push(d,c,h);return p}writePos_(t,n,r){const i=r[r.length-1],o=i.hasZ,s=o?"3":"2";t.setAttribute("srsDimension",s);const a=i.srsName,l=a?si(a).getAxisOrientation():"enu",u=n.getCoordinates();let f=l.startsWith("en")?u[0]+" "+u[1]:u[1]+" "+u[0];if(o){const c=u[2]||0;f+=" "+c}yr(t,f)}getCoords_(t,n,r){let o=(n?si(n).getAxisOrientation():"enu").startsWith("en")?t[0]+" "+t[1]:t[1]+" "+t[0];if(r){const s=t[2]||0;o+=" "+s}return o}writePosList_(t,n,r){const i=r[r.length-1],o=i.hasZ,s=o?"3":"2";t.setAttribute("srsDimension",s);const a=i.srsName,l=n.getCoordinates(),u=l.length,f=new Array(u);let c;for(let d=0;d<u;++d)c=l[d],f[d]=this.getCoords_(c,a,o);yr(t,f.join(" "))}writePoint(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=er(t.namespaceURI,"pos");t.appendChild(s),this.writePos_(s,n,r)}writeEnvelope(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Mi({node:t},this.ENVELOPE_SERIALIZERS,B1,a,r,s,this)}writeLinearRing(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=er(t.namespaceURI,"posList");t.appendChild(s),this.writePosList_(s,n,r)}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.node,s=i.exteriorWritten;return s===void 0&&(i.exteriorWritten=!0),er(o.namespaceURI,s!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;if(t.nodeName!=="PolygonPatch"&&s&&t.setAttribute("srsName",s),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Mi({node:t,hasZ:o,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=er(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}writeCurveOrLineString(t,n,r){const o=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&o&&t.setAttribute("srsName",o),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const s=er(t.namespaceURI,"posList");t.appendChild(s),this.writePosList_(s,n,r)}else if(t.nodeName==="Curve"){const s=er(t.namespaceURI,"segments");t.appendChild(s),this.writeCurveSegments_(s,n,r)}}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.surface;s&&t.setAttribute("srsName",s);const l=n.getPolygons();Mi({node:t,hasZ:o,srsName:s,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(t,n,r){const i=r[r.length-1],o=i.srsName,s=i.hasZ;o&&t.setAttribute("srsName",o);const a=n.getPoints();Mi({node:t,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,tu("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.curve;s&&t.setAttribute("srsName",s);const l=n.getLineStrings();Mi({node:t,hasZ:o,srsName:s,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(t,n,r){const i=er(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writePointMember(t,n,r){const i=er(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeSurfacePatches_(t,n,r){const i=er(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeCurveSegments_(t,n,r){const i=er(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeGeometryElement(t,n,r){const i=r[r.length-1],o=Object.assign({},i);o.node=t;let s;Array.isArray(n)?s=a$(n,i):s=Ms(n,!0,i),Mi(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const o=r[r.length-1],s=o.featureNS,a=n.getGeometryName();o.serializers||(o.serializers={},o.serializers[s]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const h=c[d];h!=null&&(l.push(d),u.push(h),d==a||typeof h.getSimplifiedGeometry=="function"?d in o.serializers[s]||(o.serializers[s][d]=Ge(this.writeGeometryElement,this)):d in o.serializers[s]||(o.serializers[s][d]=Ge(yr)))}}const f=Object.assign({},o);f.node=t,Mi(f,o.serializers,tu(void 0,s),u,r,l)}writeFeatureMembers_(t,n,r){const i=r[r.length-1],o=i.featureType,s=i.featureNS,a={};a[s]={},a[s][o]=Ge(this.writeFeatureElement,this);const l=Object.assign({},i);l.node=t,Mi(l,a,tu(o,s),n,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return er(this.namespace,bHe[i.nodeName])}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.multiSurface,s=i.surface,a=i.curve,l=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&o===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),er(this.namespace,r)}writeGeometryNode(t,n){n=this.adaptOptions(n);const r=er(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return n&&Object.assign(i,n),this.writeGeometryElement(r,t,[i]),r}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=er(this.namespace,"featureMembers");r.setAttributeNS(G2,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return n&&Object.assign(i,n),this.writeFeatureMembers_(r,t,[i]),r}}vt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Rn(vt.prototype.readFlatPos),posList:Rn(vt.prototype.readFlatPosList),coordinates:Rn(hr.prototype.readFlatCoordinates)}};vt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:vt.prototype.interiorParser,exterior:vt.prototype.exteriorParser}};vt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(vt.prototype.readSurface),MultiSurface:Rn(vt.prototype.readMultiSurface),Curve:Rn(vt.prototype.readCurve),MultiCurve:Rn(vt.prototype.readMultiCurve),Envelope:Rn(vt.prototype.readEnvelope)}};vt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:kn(vt.prototype.curveMemberParser),curveMembers:kn(vt.prototype.curveMemberParser)}};vt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:kn(vt.prototype.surfaceMemberParser),surfaceMembers:kn(vt.prototype.surfaceMemberParser)}};vt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kn(un.prototype.readLineString),Curve:kn(vt.prototype.readCurve)}};vt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kn(un.prototype.readPolygon),Surface:kn(vt.prototype.readSurface)}};vt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Rn(vt.prototype.readPatch)}};vt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Rn(vt.prototype.readSegment)}};vt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:kn(vt.prototype.readFlatPosList),upperCorner:kn(vt.prototype.readFlatPosList)}};vt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Rn(vt.prototype.readPolygonPatch)}};vt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:_Ce(vt.prototype.readLineStringSegment)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(vt.prototype.readFlatCurveRing)}};vt.prototype.writeFeatures;vt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Ge(vt.prototype.writeRing),interior:Ge(vt.prototype.writeRing)}};vt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};vt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(vt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(vt.prototype.writeSurfaceOrPolygonMember)}};vt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(vt.prototype.writePointMember)}};vt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(vt.prototype.writeLineStringOrCurveMember),curveMember:Ge(vt.prototype.writeLineStringOrCurveMember)}};vt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(vt.prototype.writeCurveOrLineString),MultiCurve:Ge(vt.prototype.writeMultiCurveOrLineString),Point:Ge(vt.prototype.writePoint),MultiPoint:Ge(vt.prototype.writeMultiPoint),LineString:Ge(vt.prototype.writeCurveOrLineString),MultiLineString:Ge(vt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(vt.prototype.writeLinearRing),Polygon:Ge(vt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(vt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(vt.prototype.writeEnvelope)}};const R$=vt;R$.prototype.writeFeatures;R$.prototype.writeFeaturesNode;const so=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],vHe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",xHe={rte:y3e,trk:b3e,wpt:v3e},wHe=Xt(so,{rte:kn(y3e),trk:kn(b3e),wpt:kn(v3e)}),_He=Xt(so,{text:Ue(Dt,"linkText"),type:Ue(Dt,"linkType")}),EHe=Xt(so,{name:Ue(Dt),email:ZHe,link:iE}),SHe=Xt(so,{name:Ue(Dt),desc:Ue(Dt),author:Ue(WHe),copyright:Ue(YHe),link:iE,time:Ue(oD),keywords:Ue(Dt),bounds:XHe,extensions:bD}),AHe=Xt(so,{year:Ue(Lo),license:Ue(Dt)}),CHe=Xt(so,{rte:Ge(eGe),trk:Ge(tGe),wpt:Ge(rGe)});class kHe extends iD{constructor(t){super(),t=t||{},this.dataProjection=si("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let n=0,r=t.length;n<r;++n){const i=t[n];if(this.readExtensions_){const o=i.get("extensionsNode_")||null;this.readExtensions_(i,o)}i.set("extensionsNode_",void 0)}}readMetadata(t){return t?typeof t=="string"?this.readMetadataFromDocument(l3(t)):u3(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(t){if(!so.includes(t.namespaceURI))return null;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(so.includes(n.namespaceURI)&&n.localName==="metadata")return Rt({},SHe,n,[]);return null}readFeatureFromNode(t,n){if(!so.includes(t.namespaceURI))return null;const r=xHe[t.localName];if(!r)return null;const i=r(t,[this.getReadOptions(t,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(t,n){if(!so.includes(t.namespaceURI))return[];if(t.localName=="gpx"){const r=Rt([],wHe,t,[this.getReadOptions(t,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=er("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",G2),r.setAttributeNS(G2,"xsi:schemaLocation",vHe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Mi({node:r},CHe,VHe,t,[n]),r}}const THe=Xt(so,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:iE,number:Ue(Lo),extensions:bD,type:Ue(Dt),rtept:KHe}),DHe=Xt(so,{ele:Ue(Ea),time:Ue(oD)}),LHe=Xt(so,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:iE,number:Ue(Lo),type:Ue(Dt),extensions:bD,trkseg:QHe}),RHe=Xt(so,{trkpt:JHe}),FHe=Xt(so,{ele:Ue(Ea),time:Ue(oD)}),MHe=Xt(so,{ele:Ue(Ea),time:Ue(oD),magvar:Ue(Ea),geoidheight:Ue(Ea),name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:iE,sym:Ue(Dt),type:Ue(Dt),fix:Ue(Dt),sat:Ue(Lo),hdop:Ue(Ea),vdop:Ue(Ea),pdop:Ue(Ea),ageofdgpsdata:Ue(Ea),dgpsid:Ue(Lo),extensions:bD}),OHe=["text","type"],$He=Xt(so,{text:Ge(yr),type:Ge(yr)}),IHe=Xt(so,["name","cmt","desc","src","link","number","type","rtept"]),PHe=Xt(so,{name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(O$),number:Ge(c3),type:Ge(yr),rtept:ECe(Ge($$))}),NHe=Xt(so,["ele","time"]),BHe=Xt(so,["name","cmt","desc","src","link","number","type","trkseg"]),zHe=Xt(so,{name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(O$),number:Ge(c3),type:Ge(yr),trkseg:ECe(Ge(nGe))}),jHe=tu("trkpt"),UHe=Xt(so,{trkpt:Ge($$)}),qHe=Xt(so,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),HHe=Xt(so,{ele:Ge(em),time:Ge(Jze),magvar:Ge(em),geoidheight:Ge(em),name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(O$),sym:Ge(yr),type:Ge(yr),fix:Ge(yr),sat:Ge(c3),hdop:Ge(em),vdop:Ge(em),pdop:Ge(em),ageofdgpsdata:Ge(em),dgpsid:Ge(c3)}),GHe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function VHe(e,t,n){const r=e.getGeometry();if(r){const i=GHe[r.getType()];if(i){const o=t[t.length-1].node;return er(o.namespaceURI,i)}}}function F$(e,t,n,r){return e.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(e.push(r.ele),delete r.ele,t.hasZ=!0):e.push(0),"time"in r?(e.push(r.time),delete r.time,t.hasM=!0):e.push(0),e}function M$(e,t,n){let r="XY",i=2;if(e.hasZ&&e.hasM?(r="XYZM",i=4):e.hasZ?(r="XYZ",i=3):e.hasM&&(r="XYM",i=3),i!==4){for(let o=0,s=t.length/4;o<s;o++)t[o*i]=t[o*4],t[o*i+1]=t[o*4+1],e.hasZ&&(t[o*i+2]=t[o*4+2]),e.hasM&&(t[o*i+2]=t[o*4+3]);if(t.length=t.length/4*i,n)for(let o=0,s=n.length;o<s;o++)n[o]=n[o]/4*i}return r}function WHe(e,t){const n=Rt({},EHe,e,t);if(n)return n}function YHe(e,t){const n=Rt({},AHe,e,t);if(n){const r=e.getAttribute("author");return r!==null&&(n.author=r),n}}function XHe(e,t){const n=t[t.length-1],r=e.getAttribute("minlat"),i=e.getAttribute("minlon"),o=e.getAttribute("maxlat"),s=e.getAttribute("maxlon");i!==null&&r!==null&&s!==null&&o!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(s),parseFloat(o)]])}function ZHe(e,t){const n=t[t.length-1],r=e.getAttribute("id"),i=e.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function iE(e,t){const n=t[t.length-1],r=e.getAttribute("href");r!==null&&(n.link=r),Lp(_He,e,t)}function bD(e,t){const n=t[t.length-1];n.extensionsNode_=e}function KHe(e,t){const n=Rt({},DHe,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,o=r.layoutOptions;F$(i,o,e,n)}}function JHe(e,t){const n=Rt({},FHe,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,o=r.layoutOptions;F$(i,o,e,n)}}function QHe(e,t){const n=t[t.length-1];Lp(RHe,e,t);const r=n.flatCoordinates;n.ends.push(r.length)}function y3e(e,t){const n=t[0],r=Rt({flatCoordinates:[],layoutOptions:{}},THe,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const o=r.layoutOptions;delete r.layoutOptions;const s=M$(o,i),a=new Ff(i,s);Ms(a,!1,n);const l=new au(a);return l.setProperties(r,!0),l}function b3e(e,t){const n=t[0],r=Rt({flatCoordinates:[],ends:[],layoutOptions:{}},LHe,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const o=r.ends;delete r.ends;const s=r.layoutOptions;delete r.layoutOptions;const a=M$(s,i,o),l=new N1(i,a,o);Ms(l,!1,n);const u=new au(l);return u.setProperties(r,!0),u}function v3e(e,t){const n=t[0],r=Rt({},MHe,e,t);if(!r)return;const i={},o=F$([],i,e,r),s=M$(i,o),a=new gc(o,s);Ms(a,!1,n);const l=new au(a);return l.setProperties(r,!0),l}function O$(e,t,n){e.setAttribute("href",t);const i=n[n.length-1].properties,o=[i.linkText,i.linkType];Mi({node:e},$He,B1,o,n,OHe)}function $$(e,t,n){const r=n[n.length-1],o=r.node.namespaceURI,s=r.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),r.geometryLayout){case"XYZM":t[3]!==0&&(s.time=t[3]);case"XYZ":t[2]!==0&&(s.ele=t[2]);break;case"XYM":t[2]!==0&&(s.time=t[2]);break}const l=e.nodeName=="rtept"?NHe[o]:qHe[o],u=l$(s,l);Mi({node:e,properties:s},HHe,B1,u,n,l)}function eGe(e,t,n){const r=n[0],i=t.getProperties(),o={node:e};o.properties=i;const s=t.getGeometry();if(s.getType()=="LineString"){const f=Ms(s,!0,r);o.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}const a=n[n.length-1].node,l=IHe[a.namespaceURI],u=l$(i,l);Mi(o,PHe,B1,u,n,l)}function tGe(e,t,n){const r=n[0],i=t.getProperties(),o={node:e};o.properties=i;const s=t.getGeometry();if(s.getType()=="MultiLineString"){const f=Ms(s,!0,r);i.trkseg=f.getLineStrings()}const a=n[n.length-1].node,l=BHe[a.namespaceURI],u=l$(i,l);Mi(o,zHe,B1,u,n,l)}function nGe(e,t,n){const r={node:e};r.geometryLayout=t.getLayout(),r.properties={},Mi(r,UHe,jHe,t.getCoordinates(),n)}function rGe(e,t,n){const r=n[0],i=n[n.length-1];i.properties=t.getProperties();const o=t.getGeometry();if(o.getType()=="Point"){const s=Ms(o,!0,r);i.geometryLayout=s.getLayout(),$$(e,s.getCoordinates(),n)}}class I$ extends SCe{constructor(){super()}getType(){return"text"}readFeature(t,n){return this.readFeatureFromText(WS(t),this.adaptOptions(n))}readFeatureFromText(t,n){return Td()}readFeatures(t,n){return this.readFeaturesFromText(WS(t),this.adaptOptions(n))}readFeaturesFromText(t,n){return Td()}readGeometry(t,n){return this.readGeometryFromText(WS(t),this.adaptOptions(n))}readGeometryFromText(t,n){return Td()}readProjection(t){return this.readProjectionFromText(WS(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,n){return this.writeFeatureText(t,this.adaptOptions(n))}writeFeatureText(t,n){return Td()}writeFeatures(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))}writeFeaturesText(t,n){return Td()}writeGeometry(t,n){return this.writeGeometryText(t,this.adaptOptions(n))}writeGeometryText(t,n){return Td()}}function WS(e){return typeof e=="string"?e:""}const iGe=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,oGe=/^H.([A-Z]{3}).*?:(.*)/,sGe=/^HFDTE(\d{2})(\d{2})(\d{2})/,aGe=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,lGe=/\r\n|\r|\n/;class uGe extends I${constructor(t){super(),t=t||{},this.dataProjection=si("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(t,n){const r=this.altitudeMode_,i=t.split(lGe),o={},s=[];let a=2e3,l=0,u=1,f=-1,c,d;for(c=0,d=i.length;c<d;++c){const b=i[c];let y;if(b.charAt(0)=="B"){if(y=iGe.exec(b),y){const v=parseInt(y[1],10),w=parseInt(y[2],10),E=parseInt(y[3],10);let A=parseInt(y[4],10)+parseInt(y[5],10)/6e4;this.lad_&&(A+=parseInt(b.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),y[6]=="S"&&(A=-A);let T=parseInt(y[7],10)+parseInt(y[8],10)/6e4;if(this.lod_&&(T+=parseInt(b.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),y[9]=="W"&&(T=-T),s.push(T,A),r!="none"){let k;r=="gps"?k=parseInt(y[11],10):r=="barometric"?k=parseInt(y[12],10):k=0,s.push(k)}let D=Date.UTC(a,l,u,v,w,E);D<f&&(D=Date.UTC(a,l,u+1,v,w,E)),s.push(D/1e3),f=D}}else if(b.charAt(0)=="H")y=aGe.exec(b),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=sGe.exec(b),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=oGe.exec(b),y&&(o[y[1]]=y[2].trim())));else if(b.charAt(0)=="I"){const v=parseInt(b.slice(1,3),10);for(let w=0;w<v;w++){const E=b.slice(7+w*7,10+w*7);if(E==="LAD"||E==="LOD"){const A=parseInt(b.slice(3+w*7,5+w*7),10)-1,T=parseInt(b.slice(5+w*7,7+w*7),10);E==="LAD"?(this.lad_=!0,this.ladStart_=A,this.ladStop_=T):E==="LOD"&&(this.lod_=!0,this.lodStart_=A,this.lodStop_=T)}}}}if(s.length===0)return null;const h=r=="none"?"XYM":"XYZM",p=new Ff(s,h),m=new au(Ms(p,!1,n));return m.setProperties(o,!0),m}readFeaturesFromText(t,n){const r=this.readFeatureFromText(t,n);return r?[r]:[]}}const Ko={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},Qm={};Qm[Ko.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};Qm[Ko.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};Qm[Ko.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};Qm.none={none:{supports:[],formats:[],qualities:[]}};const cGe=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Qbe=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,fGe=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function dGe(e){let t=e.getComplianceLevelSupportedFeatures();return t===void 0&&(t=Qm[Ko.VERSION1].level0),{url:e.imageInfo["@id"]===void 0?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[...t.formats,e.imageInfo.formats===void 0?[]:e.imageInfo.formats],qualities:[...t.qualities,e.imageInfo.qualities===void 0?[]:e.imageInfo.qualities],resolutions:e.imageInfo.scale_factors,tileSize:e.imageInfo.tile_width!==void 0?e.imageInfo.tile_height!==void 0?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:e.imageInfo.tile_height!=null?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}}function hGe(e){const t=e.getComplianceLevelSupportedFeatures(),n=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,r=n&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],i=n&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],o=n&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(s){return[s.width,s.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(s){return s.width})[0],e.imageInfo.tiles.map(function(s){return s.height===void 0?s.width:s.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(s){return s.scaleFactors})[0],supports:[...t.supports,...r],formats:[...t.formats,...i],qualities:[...t.qualities,...o]}}function pGe(e){const t=e.getComplianceLevelSupportedFeatures(),n=e.imageInfo.extraFormats===void 0?t.formats:[...t.formats,...e.imageInfo.extraFormats],r=e.imageInfo.preferredFormats!==void 0&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter(function(i){return["jpg","png","gif"].includes(i)}).reduce(function(i,o){return i===void 0&&n.includes(o)?o:i},void 0):void 0;return{url:e.imageInfo.id,sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(i){return[i.width,i.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(i){return i.width})[0],e.imageInfo.tiles.map(function(i){return i.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(i){return i.scaleFactors})[0],supports:e.imageInfo.extraFeatures===void 0?t.supports:[...t.supports,...e.imageInfo.extraFeatures],formats:n,qualities:e.imageInfo.extraQualities===void 0?t.qualities:[...t.qualities,...e.imageInfo.extraQualities],preferredFormat:r}}const vD={};vD[Ko.VERSION1]=dGe;vD[Ko.VERSION2]=hGe;vD[Ko.VERSION3]=pGe;class gGe{constructor(t){this.setImageInfo(t)}setImageInfo(t){typeof t=="string"?this.imageInfo=JSON.parse(t):this.imageInfo=t}getImageApiVersion(){if(this.imageInfo===void 0)return;let t=this.imageInfo["@context"]||"ol-no-context";typeof t=="string"&&(t=[t]);for(let n=0;n<t.length;n++)switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Ko.VERSION1;case"http://iiif.io/api/image/2/context.json":return Ko.VERSION2;case"http://iiif.io/api/image/3/context.json":return Ko.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Ko.VERSION1)&&this.imageInfo.identifier)return Ko.VERSION1;break}kc(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(t){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(t===void 0&&(t=this.getImageApiVersion()),t){case Ko.VERSION1:if(cGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ko.VERSION3:if(fGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ko.VERSION2:if(typeof this.imageInfo.profile=="string"&&Qbe.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&Qbe.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(t){const n=this.getComplianceLevelEntryFromProfile(t);if(n===void 0)return;const r=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return n===void 0?Qm.none.none:Qm[t][n]}getTileSourceOptions(t){const n=t||{},r=this.getImageApiVersion();if(r===void 0)return;const i=r===void 0?void 0:vD[r](this);if(i!==void 0)return{url:i.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:n.format!==void 0&&i.formats.includes(n.format)?n.format:i.preferredFormat!==void 0?i.preferredFormat:"jpg",supports:i.supports,quality:n.quality&&i.qualities.includes(n.quality)?n.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort(function(o,s){return s-o}):void 0,tileSize:i.tileSize}}}class P${read(t){if(!t)return null;if(typeof t=="string"){const n=l3(t);return this.readFromDocument(n)}return u3(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null}readFromNode(t){Td()}}const mGe="http://www.w3.org/1999/xlink";function G1(e){return e.getAttributeNS(mGe,"href")}const Bl=[null,"http://www.opengis.net/ows/1.1"],yGe=Xt(Bl,{ServiceIdentification:Ue(jGe),ServiceProvider:Ue(qGe),OperationsMetadata:Ue(BGe)});class x3e extends P${constructor(){super()}readFromNode(t){const n=Rt({},yGe,t,[]);return n||null}}const bGe=Xt(Bl,{DeliveryPoint:Ue(Dt),City:Ue(Dt),AdministrativeArea:Ue(Dt),PostalCode:Ue(Dt),Country:Ue(Dt),ElectronicMailAddress:Ue(Dt)}),vGe=Xt(Bl,{Value:gi(HGe)}),xGe=Xt(Bl,{AllowedValues:Ue(FGe)}),wGe=Xt(Bl,{Phone:Ue(zGe),Address:Ue(RGe)}),_Ge=Xt(Bl,{HTTP:Ue(PGe)}),EGe=Xt(Bl,{Get:gi(IGe),Post:void 0}),SGe=Xt(Bl,{DCP:Ue($Ge)}),AGe=Xt(Bl,{Operation:NGe}),CGe=Xt(Bl,{Voice:Ue(Dt),Facsimile:Ue(Dt)}),kGe=Xt(Bl,{Constraint:gi(MGe)}),TGe=Xt(Bl,{IndividualName:Ue(Dt),PositionName:Ue(Dt),ContactInfo:Ue(OGe)}),DGe=Xt(Bl,{Abstract:Ue(Dt),AccessConstraints:Ue(Dt),Fees:Ue(Dt),Title:Ue(Dt),ServiceTypeVersion:Ue(Dt),ServiceType:Ue(Dt)}),LGe=Xt(Bl,{ProviderName:Ue(Dt),ProviderSite:Ue(G1),ServiceContact:Ue(UGe)});function RGe(e,t){return Rt({},bGe,e,t)}function FGe(e,t){return Rt({},vGe,e,t)}function MGe(e,t){const n=e.getAttribute("name");if(n)return Rt({name:n},xGe,e,t)}function OGe(e,t){return Rt({},wGe,e,t)}function $Ge(e,t){return Rt({},_Ge,e,t)}function IGe(e,t){const n=G1(e);if(n)return Rt({href:n},kGe,e,t)}function PGe(e,t){return Rt({},EGe,e,t)}function NGe(e,t){const n=e.getAttribute("name"),r=Rt({},SGe,e,t);if(!r)return;const i=t[t.length-1];i[n]=r}function BGe(e,t){return Rt({},AGe,e,t)}function zGe(e,t){return Rt({},CGe,e,t)}function jGe(e,t){return Rt({},DGe,e,t)}function UGe(e,t){return Rt({},TGe,e,t)}function qGe(e,t){return Rt({},LGe,e,t)}function HGe(e,t){return Dt(e)}function e1e(e,t,n,r,i,o){i!==void 0?(i=i,o=o!==void 0?o:0):(i=[],o=0);let s=t;for(;s<n;){const a=e[s++];i[o++]=e[s++],i[o++]=a;for(let l=2;l<r;++l)i[o++]=e[s++]}return i.length=o,i}class GGe extends I${constructor(t){super(),t=t||{},this.dataProjection=si("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n);return new au(r)}readFeaturesFromText(t,n){return[this.readFeatureFromText(t,n)]}readGeometryFromText(t,n){const r=Qze(this.geometryLayout_),i=WGe(t,r,this.factor_);e1e(i,0,i.length,r,i);const o=eje(i,0,i.length,r),s=new Ff(o,this.geometryLayout_);return Ms(s,!1,this.adaptOptions(n))}writeFeatureText(t,n){const r=t.getGeometry();if(r)return this.writeGeometryText(r,n);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(t,n){return this.writeFeatureText(t[0],n)}writeGeometryText(t,n){t=Ms(t,!0,this.adaptOptions(n));const r=t.getFlatCoordinates(),i=t.getStride();return e1e(r,0,r.length,i,r),VGe(r,i,this.factor_)}}function VGe(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;for(let o=0,s=e.length;o<s;)for(r=0;r<t;++r,++o){const a=e[o],l=a-i[r];i[r]=a,e[o]=l}return YGe(e,n)}function WGe(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;const o=XGe(e,n);for(let s=0,a=o.length;s<a;)for(r=0;r<t;++r,++s)i[r]+=o[s],o[s]=i[r];return o}function YGe(e,t){t=t||1e5;for(let n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*t);return ZGe(e)}function XGe(e,t){t=t||1e5;const n=KGe(e);for(let r=0,i=n.length;r<i;++r)n[r]/=t;return n}function ZGe(e){for(let t=0,n=e.length;t<n;++t){const r=e[t];e[t]=r<0?~(r<<1):r<<1}return JGe(e)}function KGe(e){const t=QGe(e);for(let n=0,r=t.length;n<r;++n){const i=t[n];t[n]=i&1?~(i>>1):i>>1}return t}function JGe(e){let t="";for(let n=0,r=e.length;n<r;++n)t+=eVe(e[n]);return t}function QGe(e){const t=[];let n=0,r=0;for(let i=0,o=e.length;i<o;++i){const s=e.charCodeAt(i)-63;n|=(s&31)<<r,s<32?(t.push(n),n=0,r=0):r+=5}return t}function eVe(e){let t,n="";for(;e>=32;)t=(32|e&31)+63,n+=String.fromCharCode(t),e>>=5;return t=e+63,n+=String.fromCharCode(t),n}class Yr extends vt{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,n,r){const i=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(t,n,r)}}Yr.prototype.namespace="http://www.opengis.net/gml/3.2";Yr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Rn(vt.prototype.readFlatPos),posList:Rn(vt.prototype.readFlatPosList),coordinates:Rn(hr.prototype.readFlatCoordinates)}};Yr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:vt.prototype.interiorParser,exterior:vt.prototype.exteriorParser}};Yr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(Yr.prototype.readSurface),MultiSurface:Rn(vt.prototype.readMultiSurface),Curve:Rn(Yr.prototype.readCurve),MultiCurve:Rn(vt.prototype.readMultiCurve),Envelope:Rn(Yr.prototype.readEnvelope)}};Yr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:kn(vt.prototype.curveMemberParser),curveMembers:kn(vt.prototype.curveMemberParser)}};Yr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:kn(vt.prototype.surfaceMemberParser),surfaceMembers:kn(vt.prototype.surfaceMemberParser)}};Yr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kn(un.prototype.readLineString),Curve:kn(vt.prototype.readCurve)}};Yr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kn(un.prototype.readPolygon),Surface:kn(vt.prototype.readSurface)}};Yr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Rn(vt.prototype.readPatch)}};Yr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Rn(vt.prototype.readSegment)}};Yr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:kn(vt.prototype.readFlatPosList),upperCorner:kn(vt.prototype.readFlatPosList)}};Yr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Rn(vt.prototype.readPolygonPatch)}};Yr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:_Ce(vt.prototype.readLineStringSegment)}};Yr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:kn(un.prototype.pointMemberParser),pointMembers:kn(un.prototype.pointMemberParser)}};Yr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:kn(un.prototype.lineStringMemberParser),lineStringMembers:kn(un.prototype.lineStringMemberParser)}};Yr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:kn(un.prototype.polygonMemberParser),polygonMembers:kn(un.prototype.polygonMemberParser)}};Yr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:kn(un.prototype.readFlatCoordinatesFromNode)}};Yr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kn(un.prototype.readLineString)}};Yr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kn(un.prototype.readPolygon)}};Yr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(Yr.prototype.readFlatCurveRing)}};Yr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Ge(vt.prototype.writeRing),interior:Ge(vt.prototype.writeRing)}};Yr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};Yr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ge(vt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(vt.prototype.writeSurfaceOrPolygonMember)}};Yr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Ge(vt.prototype.writePointMember)}};Yr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ge(vt.prototype.writeLineStringOrCurveMember),curveMember:Ge(vt.prototype.writeLineStringOrCurveMember)}};Yr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Ge(vt.prototype.writeCurveOrLineString),MultiCurve:Ge(vt.prototype.writeMultiCurveOrLineString),Point:Ge(Yr.prototype.writePoint),MultiPoint:Ge(vt.prototype.writeMultiPoint),LineString:Ge(vt.prototype.writeCurveOrLineString),MultiLineString:Ge(vt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(vt.prototype.writeLinearRing),Polygon:Ge(vt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(vt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(vt.prototype.writeEnvelope)}};let w3e=class{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}};class tVe extends w3e{constructor(t,n){super(t),this.conditions=n,kc(this.conditions.length>=2,"At least 2 conditions are required")}}let nVe=class extends tVe{constructor(t){super("And",Array.prototype.slice.call(arguments))}};class rVe extends w3e{constructor(t,n,r){if(super("BBOX"),this.geometryName=t,this.extent=n,n.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function iVe(e){const t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(nVe,t))}function oVe(e,t,n){return new rVe(e,t,n)}const t1e={"http://www.opengis.net/gml":{boundedBy:Ue(un.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:kn(un.prototype.readFeaturesInternal)}},sVe={"http://www.opengis.net/wfs":{totalInserted:Ue(Lo),totalUpdated:Ue(Lo),totalDeleted:Ue(Lo)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ue(Lo),totalUpdated:Ue(Lo),totalDeleted:Ue(Lo)}},aVe={"http://www.opengis.net/wfs":{TransactionSummary:Ue(r1e,"transactionSummary"),InsertResults:Ue(o1e,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ue(r1e,"transactionSummary"),InsertResults:Ue(o1e,"insertIds")}},lVe={"http://www.opengis.net/wfs":{PropertyName:Ge(yr)},"http://www.opengis.net/wfs/2.0":{PropertyName:Ge(yr)}},_3e={"http://www.opengis.net/wfs":{Insert:Ge(s1e),Update:Ge(l1e),Delete:Ge(a1e),Property:Ge(u1e),Native:Ge(c1e)},"http://www.opengis.net/wfs/2.0":{Insert:Ge(s1e),Update:Ge(l1e),Delete:Ge(a1e),Property:Ge(u1e),Native:Ge(c1e)}},E3e="feature",N$="http://www.w3.org/2000/xmlns/",B$={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},VM={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},z$={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},n1e={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},j$={"2.0.0":Yr,"1.1.0":vt,"1.0.0":hr},uVe="1.1.0";class cVe extends iD{constructor(t){super(),t=t||{},this.version_=t.version?t.version:uVe,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new j$[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:n1e[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,n){const r={node:t};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(t,n||{}));const i=[r];let o;this.version_==="2.0.0"?o=t1e:o=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let s=Rt([],o,t,i,this.gmlFormat_);return s||(s=[]),s}readTransactionResponse(t){if(t){if(typeof t=="string"){const n=l3(t);return this.readTransactionResponseFromDocument(n)}return u3(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if(typeof t=="string"){const n=l3(t);return this.readFeatureCollectionMetadataFromDocument(n)}return u3(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)}readFeatureCollectionMetadataFromNode(t){const n={},r=gp(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=r,Rt(n,t1e,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)}readTransactionResponseFromNode(t){return Rt({},aVe,t,[])}writeGetFeature(t){const n=er(VM[this.version_],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.version_),t.handle&&n.setAttribute("handle",t.handle),t.outputFormat&&n.setAttribute("outputFormat",t.outputFormat),t.maxFeatures!==void 0&&n.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&n.setAttribute("resultType",t.resultType),t.startIndex!==void 0&&n.setAttribute("startIndex",String(t.startIndex)),t.count!==void 0&&n.setAttribute("count",String(t.count)),t.viewParams!==void 0&&n.setAttribute("viewParams",t.viewParams),n.setAttributeNS(G2,"xsi:schemaLocation",this.schemaLocation_);const r={node:n};if(Object.assign(r,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),kc(Array.isArray(t.featureTypes),"`options.featureTypes` must be an Array"),typeof t.featureTypes[0]=="string"){let i=t.filter;t.bbox&&(kc(t.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Object.assign(r,{geometryName:t.geometryName,filter:i}),x1e(n,t.featureTypes,[r])}else t.featureTypes.forEach(i=>{const o=this.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Object.assign(r,{geometryName:i.geometryName,filter:o}),x1e(n,[i.name],[r])});return n}combineBboxAndFilter(t,n,r,i){const o=oVe(t,n,r);return i?iVe(i,o):o}writeTransaction(t,n,r,i){const o=[],s=i.version?i.version:this.version_,a=er(VM[s],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",s);let l;i&&(l=i.gmlOptions?i.gmlOptions:{},i.handle&&a.setAttribute("handle",i.handle)),a.setAttributeNS(G2,"xsi:schemaLocation",n1e[s]);const u=fVe(a,l,s,i);return t&&YS("Insert",t,o,u),n&&YS("Update",n,o,u),r&&YS("Delete",r,o,u),i.nativeElements&&YS("Native",i.nativeElements,o,u),a}readProjectionFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(!(n.childNodes.length===0||n.childNodes.length===1&&n.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(n,r),si(r.pop().srsName)}}return null}}function fVe(e,t,n,r){const i=r.featurePrefix?r.featurePrefix:E3e;let o;return n==="1.0.0"?o=2:n==="1.1.0"?o=3:n==="2.0.0"&&(o=3.2),Object.assign({node:e},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:i,gmlVersion:o,hasZ:r.hasZ,srsName:r.srsName},t)}function YS(e,t,n,r){Mi(r,_3e,tu(e),t,n)}function r1e(e,t){return Rt({},sVe,e,t)}const dVe={"http://www.opengis.net/ogc":{FeatureId:kn(function(e,t){return e.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:kn(function(e,t){return e.getAttribute("fid")})}};function i1e(e,t){Lp(dVe,e,t)}const hVe={"http://www.opengis.net/wfs":{Feature:i1e},"http://www.opengis.net/wfs/2.0":{Feature:i1e}};function o1e(e,t){return Rt([],hVe,e,t)}function s1e(e,t,n){const r=n[n.length-1],i=r.featureType,o=r.featureNS,s=r.gmlVersion,a=er(o,i);e.appendChild(a),s===2?hr.prototype.writeFeatureElement(a,t,n):s===3?vt.prototype.writeFeatureElement(a,t,n):Yr.prototype.writeFeatureElement(a,t,n)}function S3e(e,t,n){const i=n[n.length-1].version,o=B$[i],s=er(o,"Filter"),a=er(o,"FeatureId");s.appendChild(a),a.setAttribute("fid",t),e.appendChild(s)}function U$(e,t){e=e||E3e;const n=e+":";return t.startsWith(n)?t:n+t}function a1e(e,t,n){const r=n[n.length-1];kc(t.getId()!==void 0,"Features must have an id set");const i=r.featureType,o=r.featurePrefix,s=r.featureNS,a=U$(o,i);e.setAttribute("typeName",a),e.setAttributeNS(N$,"xmlns:"+o,s);const l=t.getId();l!==void 0&&S3e(e,l,n)}function l1e(e,t,n){const r=n[n.length-1];kc(t.getId()!==void 0,"Features must have an id set");const i=r.version,o=r.featureType,s=r.featurePrefix,a=r.featureNS,l=U$(s,o),u=t.getGeometryName();e.setAttribute("typeName",l),e.setAttributeNS(N$,"xmlns:"+s,a);const f=t.getId();if(f!==void 0){const c=t.getKeys(),d=[];for(let h=0,p=c.length;h<p;h++){const m=t.get(c[h]);if(m!==void 0){let b=c[h];m&&typeof m.getSimplifiedGeometry=="function"&&(b=u),d.push({name:b,value:m})}}Mi({version:i,gmlVersion:r.gmlVersion,node:e,hasZ:r.hasZ,srsName:r.srsName},_3e,tu("Property"),d,n),S3e(e,f,n)}}function u1e(e,t,n){const r=n[n.length-1],i=r.version,o=VM[i],a=er(o,i==="2.0.0"?"ValueReference":"Name"),l=r.gmlVersion;if(e.appendChild(a),yr(a,t.name),t.value!==void 0&&t.value!==null){const u=er(o,"Value");e.appendChild(u),t.value&&typeof t.value.getSimplifiedGeometry=="function"?l===2?hr.prototype.writeGeometryElement(u,t.value,n):l===3?vt.prototype.writeGeometryElement(u,t.value,n):Yr.prototype.writeGeometryElement(u,t.value,n):yr(u,t.value)}}function c1e(e,t,n){t.vendorId&&e.setAttribute("vendorId",t.vendorId),t.safeToIgnore!==void 0&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),t.value!==void 0&&yr(e,t.value)}const xD={"http://www.opengis.net/wfs":{Query:Ge(f1e)},"http://www.opengis.net/wfs/2.0":{Query:Ge(f1e)},"http://www.opengis.net/ogc":{During:Ge(p1e),And:Ge(XS),Or:Ge(XS),Not:Ge(g1e),BBOX:Ge(d1e),Contains:Ge(Jh),Intersects:Ge(Jh),Within:Ge(Jh),DWithin:Ge(h1e),PropertyIsEqualTo:Ge(mu),PropertyIsNotEqualTo:Ge(mu),PropertyIsLessThan:Ge(mu),PropertyIsLessThanOrEqualTo:Ge(mu),PropertyIsGreaterThan:Ge(mu),PropertyIsGreaterThanOrEqualTo:Ge(mu),PropertyIsNull:Ge(m1e),PropertyIsBetween:Ge(y1e),PropertyIsLike:Ge(b1e)},"http://www.opengis.net/fes/2.0":{During:Ge(p1e),And:Ge(XS),Or:Ge(XS),Not:Ge(g1e),BBOX:Ge(d1e),Contains:Ge(Jh),Disjoint:Ge(Jh),Intersects:Ge(Jh),ResourceId:Ge(gVe),Within:Ge(Jh),DWithin:Ge(h1e),PropertyIsEqualTo:Ge(mu),PropertyIsNotEqualTo:Ge(mu),PropertyIsLessThan:Ge(mu),PropertyIsLessThanOrEqualTo:Ge(mu),PropertyIsGreaterThan:Ge(mu),PropertyIsGreaterThanOrEqualTo:Ge(mu),PropertyIsNull:Ge(m1e),PropertyIsBetween:Ge(y1e),PropertyIsLike:Ge(b1e)}};function f1e(e,t,n){const r=n[n.length-1],i=r.version,o=r.featurePrefix,s=r.featureNS,a=r.propertyNames,l=r.srsName;let u;o?u=U$(o,t):u=t;let f;i==="2.0.0"?f="typeNames":f="typeName",e.setAttribute(f,u),l&&e.setAttribute("srsName",l),s&&e.setAttributeNS(N$,"xmlns:"+o,s);const c=Object.assign({},r);c.node=e,Mi(c,lVe,tu("PropertyName"),a,n);const d=r.filter;if(d){const h=er(wD(i),"Filter");e.appendChild(h),pVe(h,d,n)}}function pVe(e,t,n){const r=n[n.length-1],i={node:e};Object.assign(i,{context:r}),Mi(i,xD,tu(t.getTagName()),[t],n)}function d1e(e,t,n){const r=n[n.length-1],o=r.context.version;r.srsName=t.srsName;const s=j$[o];V1(o,e,t.geometryName),s.prototype.writeGeometryElement(e,t.extent,n)}function gVe(e,t,n){e.setAttribute("rid",t.rid)}function Jh(e,t,n){const r=n[n.length-1],o=r.context.version;r.srsName=t.srsName;const s=j$[o];V1(o,e,t.geometryName),s.prototype.writeGeometryElement(e,t.geometry,n)}function h1e(e,t,n){const o=n[n.length-1].context.version;Jh(e,t,n);const s=er(wD(o),"Distance");yr(s,t.distance.toString()),o==="2.0.0"?s.setAttribute("uom",t.unit):s.setAttribute("units",t.unit),e.appendChild(s)}function p1e(e,t,n){const o=n[n.length-1].context.version;y3(z$[o],"ValueReference",e,t.propertyName);const s=er(Vd,"TimePeriod");e.appendChild(s);const a=er(Vd,"begin");s.appendChild(a),v1e(a,t.begin);const l=er(Vd,"end");s.appendChild(l),v1e(l,t.end)}function XS(e,t,n){const i=n[n.length-1].context,o={node:e};Object.assign(o,{context:i});const s=t.conditions;for(let a=0,l=s.length;a<l;++a){const u=s[a];Mi(o,xD,tu(u.getTagName()),[u],n)}}function g1e(e,t,n){const i=n[n.length-1].context,o={node:e};Object.assign(o,{context:i});const s=t.condition;Mi(o,xD,tu(s.getTagName()),[s],n)}function mu(e,t,n){const o=n[n.length-1].context.version;t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),V1(o,e,t.propertyName),b3(o,e,""+t.expression)}function m1e(e,t,n){const o=n[n.length-1].context.version;V1(o,e,t.propertyName)}function y1e(e,t,n){const o=n[n.length-1].context.version,s=wD(o);V1(o,e,t.propertyName);const a=er(s,"LowerBoundary");e.appendChild(a),b3(o,a,""+t.lowerBoundary);const l=er(s,"UpperBoundary");e.appendChild(l),b3(o,l,""+t.upperBoundary)}function b1e(e,t,n){const o=n[n.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),V1(o,e,t.propertyName),b3(o,e,""+t.pattern)}function y3(e,t,n,r){const i=er(e,t);yr(i,r),n.appendChild(i)}function b3(e,t,n){y3(wD(e),"Literal",t,n)}function V1(e,t,n){e==="2.0.0"?y3(z$[e],"ValueReference",t,n):y3(B$[e],"PropertyName",t,n)}function v1e(e,t){const n=er(Vd,"TimeInstant");e.appendChild(n);const r=er(Vd,"timePosition");n.appendChild(r),yr(r,t)}function x1e(e,t,n){const r=n[n.length-1],i=Object.assign({},r);i.node=e,Mi(i,xD,tu("Query"),t,n)}function wD(e){let t;return e==="2.0.0"?t=z$[e]:t=B$[e],t}const wi={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class w1e{constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,t!==void 0?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,t!==void 0?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readPoint());return n}readPolygon(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readLineString());return n}readWkbHeader(t){const r=this.readUint8()>0,i=this.readUint32(r),o=Math.floor((i&268435455)/1e3),s=!!(i&2147483648)||o===1||o===3,a=!!(i&1073741824)||o===2||o===3,l=!!(i&536870912),u=(i&268435455)%1e3,f=["XY",s?"Z":"",a?"M":""].join(""),c=l?this.readUint32(r):null;if(t!==void 0&&t!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==f)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=s,this.hasM_=a,this.layout_=f,this.srid_=c,this.initialized_=!0;return u}readWkbPayload(t){switch(t){case wi.POINT:return this.readPoint();case wi.LINE_STRING:return this.readLineString();case wi.POLYGON:case wi.TRIANGLE:return this.readPolygon();case wi.MULTI_POINT:return this.readMultiPoint();case wi.MULTI_LINE_STRING:return this.readMultiLineString();case wi.MULTI_POLYGON:case wi.POLYHEDRAL_SURFACE:case wi.TIN:return this.readMultiPolygon();case wi.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,n){const r=this.readUint32(),i=[];for(let o=0;o<r;o++){const s=t.call(this,n);s&&i.push(s)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,wi.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,wi.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,wi.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case wi.POINT:return new gc(n,this.layout_);case wi.LINE_STRING:return new Ff(n,this.layout_);case wi.POLYGON:case wi.TRIANGLE:return new eE(n,this.layout_);case wi.MULTI_POINT:return new rD(n,this.layout_);case wi.MULTI_LINE_STRING:return new N1(n,this.layout_);case wi.MULTI_POLYGON:case wi.POLYHEDRAL_SURFACE:case wi.TIN:return new Q_(n,this.layout_);case wi.GEOMETRY_COLLECTION:return new Bp(n);default:return null}}getSrid(){return this.srid_}}class mVe{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=t.littleEndian!==!1,this.isEWKB_=t.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,n){const r=Object.assign.apply(null,n.split("").map((i,o)=>({[i]:t[o]})));for(const i of this.layout_)this.writeDouble(i in r?r[i]:this.nodata_[i])}writeLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writePoint(t[r],n)}writePolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeLineString(t[r],n)}writeWkbHeader(t,n){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(n)&&this.writeUint32(n)}writeMultiPoint(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(1),this.writePoint(t[r],n)}writeMultiLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(2),this.writeLineString(t[r],n)}writeMultiPolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(3),this.writePolygon(t[r],n)}writeGeometryCollection(t){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeGeometry(t[n])}findMinimumLayout(t,n="XYZM"){const r=(i,o)=>i===o?i:i==="XYZM"?o:o==="XYZM"?i:"XY";if(t instanceof Sbe)return r(t.getLayout(),n);if(t instanceof Bp){const i=t.getGeometriesArray();for(let o=0;o<i.length&&n!=="XY";o++)n=this.findMinimumLayout(i[o],n)}return n}writeGeometry(t,n){const r={Point:wi.POINT,LineString:wi.LINE_STRING,Polygon:wi.POLYGON,MultiPoint:wi.MULTI_POINT,MultiLineString:wi.MULTI_LINE_STRING,MultiPolygon:wi.MULTI_POLYGON,GeometryCollection:wi.GEOMETRY_COLLECTION},i=t.getType(),o=r[i];if(!o)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(o,n),t instanceof Sbe?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,t.getCoordinates(),t.getLayout()):t instanceof Bp&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce((o,s)=>o+s[0],0),n=new ArrayBuffer(t),r=new DataView(n);let i=0;return this.writeQueue_.forEach(o=>{switch(o[0]){case 1:r.setUint8(i,o[1]);break;case 4:r.setUint32(i,o[1],this.isLittleEndian_);break;case 8:r.setFloat64(i,o[1],this.isLittleEndian_);break}i+=o[0]}),n}}class yVe extends SCe{constructor(t){super(),t=t||{},this.splitCollection=!!t.splitCollection,this.viewCache_=null,this.hex_=t.hex!==!1,this.littleEndian_=t.littleEndian!==!1,this.ewkb_=t.ewkb!==!1,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,n){return new au({geometry:this.readGeometry(t,n)})}readFeatures(t,n){let r=[];const i=this.readGeometry(t,n);return this.splitCollection&&i instanceof Bp?r=i.getGeometriesArray():r=[i],r.map(o=>new au({geometry:o}))}readGeometry(t,n){const r=_1e(t);if(!r)return null;const o=new w1e(r).readGeometry();return this.viewCache_=r,n=this.getReadOptions(t,n),this.viewCache_=null,Ms(o,!1,n)}readProjection(t){const n=this.viewCache_||_1e(t);if(!n)return;const r=new w1e(n);return r.readWkbHeader(),r.getSrid()&&si("EPSG:"+r.getSrid())||void 0}writeFeature(t,n){return this.writeGeometry(t.getGeometry(),n)}writeFeatures(t,n){return this.writeGeometry(new Bp(t.map(r=>r.getGeometry())),n)}writeGeometry(t,n){n=this.adaptOptions(n);const r=new mVe({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const s=n.dataProjection&&si(n.dataProjection);if(s){const a=s.getCode();a.startsWith("EPSG:")&&(i=Number(a.substring(5)))}}r.writeGeometry(Ms(t,!0,n),i);const o=r.getBuffer();return this.hex_?bVe(o):o}}function bVe(e){const t=new Uint8Array(e);return Array.from(t.values()).map(n=>(n<16?"0":"")+Number(n).toString(16).toUpperCase()).join("")}function vVe(e){const t=new Uint8Array(e.length/2);for(let n=0;n<e.length/2;n++)t[n]=parseInt(e.substr(n*2,2),16);return new DataView(t.buffer)}function _1e(e){return typeof e=="string"?vVe(e):ArrayBuffer.isView(e)?e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new DataView(e):null}const xVe={POINT:gc,LINESTRING:Ff,POLYGON:eE,MULTIPOINT:rD,MULTILINESTRING:N1,MULTIPOLYGON:Q_},A3e="EMPTY",C3e="Z",k3e="M",wVe="ZM",pi={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},_Ve={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class EVe{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,n){return n=n!==void 0?n:!1,t>="0"&&t<="9"||t=="."&&!n}isWhiteSpace_(t){return t==" "||t=="	"||t=="\r"||t==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),n=this.index_;let r=t,i;if(t=="(")i=pi.LEFT_PAREN;else if(t==",")i=pi.COMMA;else if(t==")")i=pi.RIGHT_PAREN;else if(this.isNumeric_(t)||t=="-")i=pi.NUMBER,r=this.readNumber_();else if(this.isAlpha_(t))i=pi.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t==="")i=pi.EOF;else throw new Error("Unexpected character: "+t)}return{position:n,value:r,type:i}}readNumber_(){let t;const n=this.index_;let r=!1,i=!1;do t=="."?r=!0:(t=="e"||t=="E")&&(i=!0),t=this.nextChar_();while(this.isNumeric_(t,r)||!i&&(t=="e"||t=="E")||i&&(t=="-"||t=="+"));return parseFloat(this.wkt.substring(n,this.index_--))}readText_(){let t;const n=this.index_;do t=this.nextChar_();while(this.isAlpha_(t));return this.wkt.substring(n,this.index_--).toUpperCase()}}class SVe{constructor(t){this.lexer_=t,this.token_={position:0,type:pi.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const n=this.isTokenType(t);return n&&this.consume_(),n}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const n=this.token_;if(this.isTokenType(pi.TEXT)){const r=n.value;r===C3e?t="XYZ":r===k3e?t="XYM":r===wVe&&(t="XYZM"),t!=="XY"&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(pi.LEFT_PAREN)){const t=[];do t.push(this.parseGeometry_());while(this.match(pi.COMMA));if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePoint_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePointList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(pi.LEFT_PAREN)){let t;if(this.token_.type==pi.LEFT_PAREN?t=this.parsePointTextList_():t=this.parsePointList_(),this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePolygonTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],n=this.layout_.length;for(let r=0;r<n;++r){const i=this.token_;if(this.match(pi.NUMBER))t.push(i.value);else break}if(t.length==n)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(pi.COMMA);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(pi.COMMA);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(pi.COMMA);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(pi.COMMA);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(pi.TEXT)&&this.token_.value==A3e;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.token_;if(this.match(pi.TEXT)){const n=t.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(n=="GEOMETRYCOLLECTION"){if(r)return new Bp([]);const s=this.parseGeometryCollectionText_();return new Bp(s)}const i=xVe[n];if(!i)throw new Error("Invalid geometry type: "+n);let o;if(r)n=="POINT"?o=[NaN,NaN]:o=[];else switch(n){case"POINT":{o=this.parsePointText_();break}case"LINESTRING":{o=this.parseLineStringText_();break}case"POLYGON":{o=this.parsePolygonText_();break}case"MULTIPOINT":{o=this.parseMultiPointText_();break}case"MULTILINESTRING":{o=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{o=this.parseMultiPolygonText_();break}}return new i(o,this.layout_)}throw new Error(this.formatErrorMessage_())}}class T3e extends I${constructor(t){super(),t=t||{},this.splitCollection_=t.splitCollection!==void 0?t.splitCollection:!1}parse_(t){const n=new EVe(t);return new SVe(n).parse()}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n),i=new au;return i.setGeometry(r),i}readFeaturesFromText(t,n){let r=[];const i=this.readGeometryFromText(t,n);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];const o=[];for(let s=0,a=r.length;s<a;++s){const l=new au;l.setGeometry(r[s]),o.push(l)}return o}readGeometryFromText(t,n){const r=this.parse_(t);return Ms(r,!1,n)}writeFeatureText(t,n){const r=t.getGeometry();return r?this.writeGeometryText(r,n):""}writeFeaturesText(t,n){if(t.length==1)return this.writeFeatureText(t[0],n);const r=[];for(let o=0,s=t.length;o<s;++o)r.push(t[o].getGeometry());const i=new Bp(r);return this.writeGeometryText(i,n)}writeGeometryText(t,n){return R3e(Ms(t,!0,n))}}function D3e(e){const t=e.getCoordinates();return t.length===0?"":t.join(" ")}function AVe(e){const t=[],n=e.getPoints();for(let r=0,i=n.length;r<i;++r)t.push("("+D3e(n[r])+")");return t.join(",")}function CVe(e){const t=[],n=e.getGeometries();for(let r=0,i=n.length;r<i;++r)t.push(R3e(n[r]));return t.join(",")}function q$(e){const t=e.getCoordinates(),n=[];for(let r=0,i=t.length;r<i;++r)n.push(t[r].join(" "));return n.join(",")}function kVe(e){const t=[],n=e.getLineStrings();for(let r=0,i=n.length;r<i;++r)t.push("("+q$(n[r])+")");return t.join(",")}function L3e(e){const t=[],n=e.getLinearRings();for(let r=0,i=n.length;r<i;++r)t.push("("+q$(n[r])+")");return t.join(",")}function TVe(e){const t=[],n=e.getPolygons();for(let r=0,i=n.length;r<i;++r)t.push("("+L3e(n[r])+")");return t.join(",")}function DVe(e){const t=e.getLayout();let n="";return(t==="XYZ"||t==="XYZM")&&(n+=C3e),(t==="XYM"||t==="XYZM")&&(n+=k3e),n}const LVe={Point:D3e,LineString:q$,Polygon:L3e,MultiPoint:AVe,MultiLineString:kVe,MultiPolygon:TVe,GeometryCollection:CVe};function R3e(e){const t=e.getType(),n=LVe[t],r=n(e);let i=_Ve[t];if(typeof e.getFlatCoordinates=="function"){const o=DVe(e);o.length>0&&(i+=" "+o)}return r.length===0?i+" "+A3e:i+"("+r+")"}const ts=[null,"http://www.opengis.net/wms"];function W1(e){return tje(e[0].version,"1.3")>=0}const RVe=Xt(ts,{Service:Ue(eWe),Capability:Ue(QVe)}),F3e={Request:Ue(uWe),Exception:Ue(iWe),Layer:Ue(oWe)},FVe=Xt(ts,{...F3e,UserDefinedSymbolization:Ue(KVe)}),MVe=Xt(ts,F3e);class OVe extends P${constructor(){super(),this.version=void 0}readFromNode(t){this.version=t.getAttribute("version").trim();const n=Rt({version:this.version},RVe,t,[]);return n||null}}const M3e={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(B3e),OnlineResource:Ue(G1),ContactInformation:Ue(tWe),Fees:Ue(Dt),AccessConstraints:Ue(Dt)},$Ve=Xt(ts,M3e),IVe=Xt(ts,{...M3e,LayerLimit:Ue(Lo),MaxWidth:Ue(Lo),MaxHeight:Ue(Lo)}),PVe=Xt(ts,{ContactPersonPrimary:Ue(nWe),ContactPosition:Ue(Dt),ContactAddress:Ue(rWe),ContactVoiceTelephone:Ue(Dt),ContactFacsimileTelephone:Ue(Dt),ContactElectronicMailAddress:Ue(Dt)}),NVe=Xt(ts,{ContactPerson:Ue(Dt),ContactOrganization:Ue(Dt)}),BVe=Xt(ts,{AddressType:Ue(Dt),Address:Ue(Dt),City:Ue(Dt),StateOrProvince:Ue(Dt),PostCode:Ue(Dt),Country:Ue(Dt)}),zVe=Xt(ts,{Format:kn(Dt)}),O3e={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(B3e),BoundingBox:gi(P3e),Dimension:gi(sWe),Attribution:Ue(ZVe),AuthorityURL:gi(dWe),Identifier:gi(Dt),MetadataURL:gi(hWe),DataURL:gi(nh),FeatureListURL:gi(nh),Style:gi(pWe),Layer:gi(_D)},$3e=Xt(ts,{...O3e,SRS:gi(Dt),Extent:Ue(aWe),ScaleHint:gi(lWe),LatLonBoundingBox:Ue((e,t)=>P3e(e,t,!1)),Layer:gi(_D)}),I3e=Xt(ts,{...O3e,CRS:gi(Dt),EX_GeographicBoundingBox:Ue(JVe),MinScaleDenominator:Ue(Ea),MaxScaleDenominator:Ue(Ea),Layer:gi(_D)}),jVe=Xt(ts,{Title:Ue(Dt),OnlineResource:Ue(G1),LogoURL:Ue(N3e)}),UVe=Xt(ts,{westBoundLongitude:Ue(Ea),eastBoundLongitude:Ue(Ea),southBoundLatitude:Ue(Ea),northBoundLatitude:Ue(Ea)}),qVe=Xt(ts,{GetCapabilities:Ue(QR),GetMap:Ue(QR),GetFeatureInfo:Ue(QR)}),HVe=Xt(ts,{Format:gi(Dt),DCPType:gi(cWe)}),GVe=Xt(ts,{HTTP:Ue(fWe)}),VVe=Xt(ts,{Get:Ue(nh),Post:Ue(nh)}),WVe=Xt(ts,{Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),LegendURL:gi(N3e),StyleSheetURL:Ue(nh),StyleURL:Ue(nh)}),YVe=Xt(ts,{Format:Ue(Dt),OnlineResource:Ue(G1)}),XVe=Xt(ts,{Keyword:kn(Dt)});function ZVe(e,t){return Rt({},jVe,e,t)}function KVe(e,t){return{SupportSLD:!!mc(e.getAttribute("UserDefinedSymbolization")),UserLayer:!!mc(e.getAttribute("UserLayer")),UserStyle:!!mc(e.getAttribute("UserStyle")),RemoteWFS:!!mc(e.getAttribute("RemoteWFS"))}}function P3e(e,t,n=!0){const r=[pf(e.getAttribute("minx")),pf(e.getAttribute("miny")),pf(e.getAttribute("maxx")),pf(e.getAttribute("maxy"))],i=[pf(e.getAttribute("resx")),pf(e.getAttribute("resy"))],o={extent:r,res:i};return n&&(W1(t)?o.crs=e.getAttribute("CRS"):o.srs=e.getAttribute("SRS")),o}function JVe(e,t){const n=Rt({},UVe,e,t);if(!n)return;const r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,s=n.northBoundLatitude;if(!(r===void 0||i===void 0||o===void 0||s===void 0))return[r,i,o,s]}function QVe(e,t){return Rt({},W1(t)?MVe:FVe,e,t)}function eWe(e,t){return Rt({},W1(t)?IVe:$Ve,e,t)}function tWe(e,t){return Rt({},PVe,e,t)}function nWe(e,t){return Rt({},NVe,e,t)}function rWe(e,t){return Rt({},BVe,e,t)}function iWe(e,t){return Rt([],zVe,e,t)}function oWe(e,t){const n=Rt({},W1(t)?I3e:$3e,e,t);return n.Layer===void 0?Object.assign(n,_D(e,t)):n}function _D(e,t){const n=W1(t),r=t[t.length-1],i=Rt({},n?I3e:$3e,e,t);if(!i)return;let o=mc(e.getAttribute("queryable"));o===void 0&&(o=r.queryable),i.queryable=o!==void 0?o:!1;let s=gp(e.getAttribute("cascaded"));s===void 0&&(s=r.cascaded),i.cascaded=s;let a=mc(e.getAttribute("opaque"));a===void 0&&(a=r.opaque),i.opaque=a!==void 0?a:!1;let l=mc(e.getAttribute("noSubsets"));l===void 0&&(l=r.noSubsets),i.noSubsets=l!==void 0?l:!1;let u=pf(e.getAttribute("fixedWidth"));u||(u=r.fixedWidth),i.fixedWidth=u;let f=pf(e.getAttribute("fixedHeight"));f||(f=r.fixedHeight),i.fixedHeight=f;const c=["Style","AuthorityURL"];n?c.push("CRS"):c.push("SRS","Dimension"),c.forEach(function(h){if(h in r){const p=i[h]||[];i[h]=p.concat(r[h])}});const d=["BoundingBox","Attribution"];return n?d.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):d.push("LatLonBoundingBox","ScaleHint","Extent"),d.forEach(function(h){if(!(h in i)){const p=r[h];i[h]=p}}),i}function sWe(e,t){const n={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol")};return W1(t)&&Object.assign(n,{default:e.getAttribute("default"),multipleValues:mc(e.getAttribute("multipleValues")),nearestValue:mc(e.getAttribute("nearestValue")),current:mc(e.getAttribute("current")),values:Dt(e)}),n}function aWe(e,t){return{name:e.getAttribute("name"),default:e.getAttribute("default"),nearestValue:mc(e.getAttribute("nearestValue"))}}function lWe(e,t){return{min:pf(e.getAttribute("min")),max:pf(e.getAttribute("max"))}}function nh(e,t){return Rt({},YVe,e,t)}function uWe(e,t){return Rt({},qVe,e,t)}function cWe(e,t){return Rt({},GVe,e,t)}function fWe(e,t){return Rt({},VVe,e,t)}function QR(e,t){return Rt({},HVe,e,t)}function N3e(e,t){const n=nh(e,t);if(n){const r=[gp(e.getAttribute("width")),gp(e.getAttribute("height"))];return n.size=r,n}}function dWe(e,t){const n=nh(e,t);if(n)return n.name=e.getAttribute("name"),n}function hWe(e,t){const n=nh(e,t);if(n)return n.type=e.getAttribute("type"),n}function pWe(e,t){return Rt({},WVe,e,t)}function B3e(e,t){return Rt([],XVe,e,t)}const gWe="_feature",mWe="_layer";class yWe extends iD{constructor(t){super(),t=t||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new hr,this.layers_=t.layers?t.layers:null}getLayers(){return this.layers_}setLayers(t){this.layers_=t}readFeatures_(t,n){t.setAttribute("namespaceURI",this.featureNS_);const r=t.localName;let i=[];if(t.childNodes.length===0)return i;if(r=="msGMLOutput")for(let o=0,s=t.childNodes.length;o<s;o++){const a=t.childNodes[o];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,u=n[0],f=mWe,c=l.localName.replace(f,"");if(this.layers_&&!this.layers_.includes(c))continue;const d=c+gWe;u.featureType=d,u.featureNS=this.featureNS_;const h={};h[d]=kn(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const p=Xt([u.featureNS,null],h);l.setAttribute("namespaceURI",this.featureNS_);const m=Rt([],p,l,n,this.gmlFormat_);m&&a3(i,m)}if(r=="FeatureCollection"){const o=Rt([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);o&&(i=o)}return i}readFeaturesFromNode(t,n){const r={};return n&&Object.assign(r,this.getReadOptions(t,n)),this.readFeatures_(t,[r])}}const Hf=[null,"http://www.opengis.net/wmts/1.0"],Y1=[null,"http://www.opengis.net/ows/1.1"],bWe=Xt(Hf,{Contents:Ue(TWe)});let H$=class extends P${constructor(){super(),this.owsParser_=new x3e}readFromNode(t){let n=t.getAttribute("version");n&&(n=n.trim());let r=this.owsParser_.readFromNode(t);return r?(r.version=n,r=Rt(r,bWe,t,[]),r||null):null}};const vWe=Xt(Hf,{Layer:gi(DWe),TileMatrixSet:gi(LWe)}),xWe=Xt(Hf,{Style:gi(RWe),Format:gi(Dt),TileMatrixSetLink:gi(FWe),Dimension:gi(MWe),ResourceURL:gi(OWe)},Xt(Y1,{Title:Ue(Dt),Abstract:Ue(Dt),WGS84BoundingBox:Ue(j3e),BoundingBox:gi($We),Identifier:Ue(Dt)})),wWe=Xt(Hf,{LegendURL:gi(IWe)},Xt(Y1,{Title:Ue(Dt),Identifier:Ue(Dt)})),_We=Xt(Hf,{TileMatrixSet:Ue(Dt),TileMatrixSetLimits:Ue(NWe)}),EWe=Xt(Hf,{TileMatrixLimits:kn(BWe)}),SWe=Xt(Hf,{TileMatrix:Ue(Dt),MinTileRow:Ue(Lo),MaxTileRow:Ue(Lo),MinTileCol:Ue(Lo),MaxTileCol:Ue(Lo)}),AWe=Xt(Hf,{Default:Ue(Dt),Value:gi(Dt)},Xt(Y1,{Identifier:Ue(Dt)})),z3e=Xt(Y1,{LowerCorner:kn(WM),UpperCorner:kn(WM)}),CWe=Xt(Hf,{WellKnownScaleSet:Ue(Dt),TileMatrix:gi(PWe)},Xt(Y1,{SupportedCRS:Ue(Dt),Identifier:Ue(Dt),BoundingBox:Ue(j3e)})),kWe=Xt(Hf,{TopLeftCorner:Ue(WM),ScaleDenominator:Ue(Ea),TileWidth:Ue(Lo),TileHeight:Ue(Lo),MatrixWidth:Ue(Lo),MatrixHeight:Ue(Lo)},Xt(Y1,{Identifier:Ue(Dt)}));function TWe(e,t){return Rt({},vWe,e,t)}function DWe(e,t){return Rt({},xWe,e,t)}function LWe(e,t){return Rt({},CWe,e,t)}function RWe(e,t){const n=Rt({},wWe,e,t);if(!n)return;const r=e.getAttribute("isDefault")==="true";return n.isDefault=r,n}function FWe(e,t){return Rt({},_We,e,t)}function MWe(e,t){return Rt({},AWe,e,t)}function OWe(e,t){const n=e.getAttribute("format"),r=e.getAttribute("template"),i=e.getAttribute("resourceType"),o={};return n&&(o.format=n),r&&(o.template=r),i&&(o.resourceType=i),o}function j3e(e,t){const n=Rt([],z3e,e,t);if(n.length==2)return u$(n)}function $We(e,t){const n=e.getAttribute("crs"),r=Rt([],z3e,e,t);if(r.length==2)return{extent:u$(r),crs:n}}function IWe(e,t){const n={};return n.format=e.getAttribute("format"),n.href=G1(e),n}function WM(e,t){const n=Dt(e).split(/\s+/);if(!n||n.length!=2)return;const r=+n[0],i=+n[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function PWe(e,t){return Rt({},kWe,e,t)}function NWe(e,t){return Rt([],EWe,e,t)}function BWe(e,t){return Rt({},SWe,e,t)}const zWe=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:eHe,GML:R$,GPX:kHe,GeoJSON:sD,IGC:uGe,IIIFInfo:gGe,KML:nje,MVT:ACe,OWS:x3e,Polyline:GGe,TopoJSON:rje,WFS:cVe,WKB:yVe,WKT:T3e,WMSCapabilities:OVe,WMSGetFeatureInfo:yWe,WMTSCapabilities:H$},Symbol.toStringTag,{value:"Module"})),oE=34962,sE=34963,jWe=35040,G$=35044,e_=35048,UWe=5121,qWe=5123,HWe=5125,U3e=5126,E1e=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function GWe(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!ije},t);const n=E1e.length;for(let r=0;r<n;++r)try{const i=e.getContext(E1e[r],t);if(i)return i}catch{}return null}const VWe={STATIC_DRAW:G$,STREAM_DRAW:jWe,DYNAMIC_DRAW:e_};class Zb{constructor(t,n){this.array_=null,this.type_=t,kc(t===oE||t===sE,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:VWe.STATIC_DRAW}ofSize(t){return this.array_=new(ZS(this.type_))(t),this}fromArray(t){return this.array_=ZS(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(ZS(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}setArray(t){const n=ZS(this.type_);if(!(t instanceof n))throw new Error(`Expected ${n}`);this.array_=t}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function ZS(e){switch(e){case oE:return Float32Array;case sE:return Uint32Array;default:return Float32Array}}const KS={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},WWe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,YWe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class S1e{constructor(t){this.gl_=t.webGlContext;const n=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,t.vertexShader||WWe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,t.fragmentShader||YWe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(o),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(s=>{this.uniforms_.push({value:t.uniforms[s],location:n.getUniformLocation(this.renderTargetProgram_,s)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(t){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,o=n.RGBA,s=0,a=n.RGBA,l=n.UNSIGNED_BYTE,u=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,o,r[0],r[1],s,a,l,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(t,n,r,i){const o=this.getGL(),s=t.size;if(o.bindFramebuffer(o.FRAMEBUFFER,n?n.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!n){const l=Ei(o.canvas);if(!t.renderTargets[l]){const u=o.getContextAttributes();u&&u.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)),t.renderTargets[l]=!0}}o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),o.uniform1i(this.renderTargetTextureLocation_,0);const a=t.layerStatesArray[t.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(t),r&&r(o,t),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(o){if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof ImageData)o.texture||(o.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,o.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(o.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(o.location,r[0],r[1]);return;case 3:n.uniform3f(o.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(o.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(o.location,r)})}}const cf={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Io={UNSIGNED_BYTE:UWe,UNSIGNED_SHORT:qWe,UNSIGNED_INT:HWe,FLOAT:U3e},v3={};function A1e(e){return"shared/"+e}let C1e=0;function XWe(){const e="unique/"+C1e;return C1e+=1,e}function ZWe(e){let t=v3[e];if(!t){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",t={users:0,context:GWe(n)},v3[e]=t}return t.users+=1,t.context}function KWe(e){const t=v3[e];if(!t||(t.users-=1,t.users>0))return;const n=t.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete v3[e]}class JWe extends CCe{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?A1e(t.canvasCacheKey):XWe(),this.gl_=ZWe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(KS.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(KS.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Ks(),this.offsetScaleMatrix_=Ks(),this.tmpMat4_=c$(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(r=>new S1e({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new S1e({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const n in t)this.uniforms_.push({name:n,value:t[n]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===A1e(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n}bindBuffer(t){const n=this.gl_,r=Ei(t);let i=this.bufferCache_[r];if(!i){const o=n.createBuffer();i={buffer:t,webGlBuffer:o},this.bufferCache_[r]=i}n.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const n=this.gl_;this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const n=Ei(t);delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(KS.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(KS.RESTORED,this.boundHandleWebGLContextRestored_),KWe(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,n,r){const i=this.gl_,o=this.getCanvas(),s=t.size,a=t.pixelRatio;(o.width!==s[0]*a||o.height!==s[1]*a)&&(o.width=s[0]*a,o.height=s[1]*a,o.style.width=s[0]+"px",o.style.height=s[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(t,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,t),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const t=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();t.bindFramebuffer(t.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}bindTexture(t,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(t,n,r){const i=this.getGL();this.bindBuffer(t);const o=this.getAttributeLocation(n);i.enableVertexAttribArray(o),i.vertexAttribPointer(o,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(t,n,r,i){const o=this.gl_,s=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,n.getDepthbuffer()),o.viewport(0,0,s[0],s[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),i?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}drawElements(t,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,o=4,s=n-t,a=t*o;r.drawElements(r.TRIANGLES,s,i,a)}finalizeDraw(t,n,r){for(let i=0,o=this.postProcessPasses_.length;i<o;i++)i===o-1?this.postProcessPasses_[i].apply(t,null,n,r):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const n=t.size,r=t.viewState.rotation,i=t.pixelRatio;this.setUniformFloatValue(cf.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(cf.ZOOM,t.viewState.zoom),this.setUniformFloatValue(cf.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(cf.PIXEL_RATIO,i),this.setUniformFloatVec2(cf.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(cf.ROTATION,r)}applyHitDetectionUniform(t){const n=this.getUniformLocation(cf.HIT_DETECTION);this.getGL().uniform1i(n,t?1:0),t&&this.setUniformFloatValue(cf.PIXEL_RATIO,.5)}applyUniforms(t){const n=this.gl_;let r,i=0;this.uniforms_.forEach(o=>{if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!o.texture?(o.prevValue=void 0,o.texture=r):o.texture||(o.prevValue=void 0,o.texture=n.createTexture()),this.bindTexture(o.texture,i,o.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const s=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&s&&o.prevValue!==r&&(o.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(o.name,f3(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(o.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(o.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(o.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(o.name),r)})}useProgram(t,n){this.gl_.useProgram(t),this.currentProgram_=t,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(t,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,t),r.compileShader(i),i}getProgram(t,n){const r=this.gl_,i=this.compileShader(t,r.FRAGMENT_SHADER),o=this.compileShader(n,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,i),r.attachShader(s,o),r.linkProgram(s),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(o,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(o)}`;throw new Error(a)}if(r.deleteShader(o),!r.getProgramParameter(s,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(s)}`;throw new Error(a)}return s}getUniformLocation(t){const n=Ei(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][t]===void 0&&(this.uniformLocationsByProgram_[n][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[n][t]}getAttributeLocation(t){const n=Ei(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][t]===void 0&&(this.attribLocationsByProgram_[n][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[n][t]}makeProjectionTransform(t,n){const r=t.size,i=t.viewState.rotation,o=t.viewState.resolution,s=t.viewState.center;return f$(n,0,0,2/(o*r[0]),2/(o*r[1]),-i,-s[0],-s[1]),n}setUniformFloatValue(t,n){this.gl_.uniform1f(this.getUniformLocation(t),n)}setUniformFloatVec2(t,n){this.gl_.uniform2fv(this.getUniformLocation(t),n)}setUniformFloatVec4(t,n){this.gl_.uniform4fv(this.getUniformLocation(t),n)}setUniformMatrixValue(t,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,n)}enableAttributeArray_(t,n,r,i,o){const s=this.getAttributeLocation(t);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,n,r,!1,i,o))}enableAttributes(t){const n=QWe(t);let r=0;for(let i=0;i<t.length;i++){const o=t[i];this.enableAttributeArray_(o.name,o.size,o.type||U3e,n,r),r+=o.size*q3e(o.type)}}handleWebGLContextLost(t){oje(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,n,r,i){const o=this.gl_;r=r||o.createTexture();const s=i?o.NEAREST:o.LINEAR;o.bindTexture(o.TEXTURE_2D,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);const a=0,l=o.RGBA,u=0,f=o.RGBA,c=o.UNSIGNED_BYTE;return n instanceof Uint8Array?o.texImage2D(o.TEXTURE_2D,a,l,t[0],t[1],u,f,c,n):n?o.texImage2D(o.TEXTURE_2D,a,l,f,c,n):o.texImage2D(o.TEXTURE_2D,a,l,t[0],t[1],u,f,c,null),r}}function QWe(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];t+=r.size*q3e(r.type)}return t}function q3e(e){switch(e){case Io.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Io.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Io.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Io.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class aE extends sje{constructor(t,n){super(t),n=n||{},this.inversePixelTransform_=Ks(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(NM.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(vm.PRECOMPOSE)){const i=new VR(vm.PRECOMPOSE,void 0,n,t);r.dispatchEvent(i)}}dispatchPostComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(vm.POSTCOMPOSE)){const i=new VR(vm.POSTCOMPOSE,void 0,n,t);r.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let s=0,a=t.layerStatesArray.length;s<a;s++){const l=t.layerStatesArray[s].layer,u=l.getRenderer();if(!(u instanceof aE)){n=!0;continue}const f=l.getClassName();if((n||f!==i)&&(r+=1,n=!1),i=f,u===this)break}const o="map/"+t.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(o)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new JWe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:o}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){var t;this.clearCache(),this.removeHelper(),(t=this.getLayer())==null||t.removeChangeListener(NM.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,n,r){const i=this.getLayer();if(i.hasListener(t)){f$(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const o=new VR(t,this.inversePixelTransform_,r,n);i.dispatchEvent(o)}}preRender(t,n){this.dispatchRenderEvent_(vm.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(vm.POSTRENDER,t,n)}}const tf=new Uint8Array(4);class H3e{constructor(t,n){this.helper_=t;const r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){aje(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,n){if(t<0||n<0||t>this.size_[0]||n>=this.size_[1])return tf[0]=0,tf[1]=0,tf[2]=0,tf[3]=0,tf;this.readAll();const r=Math.floor(t)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return tf[0]=this.data_[r*4],tf[1]=this.data_[r*4+1],tf[2]=this.data_[r*4+2],tf[3]=this.data_[r*4+3],tf}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t[0],t[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}const g2={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"},k1e=.985;function G3e(e,t){t=t||[];const n=256,r=n-1;return t[0]=Math.floor(e/n/n/n)/r,t[1]=Math.floor(e/n/n)%n/r,t[2]=Math.floor(e/n)%n/r,t[3]=e%n/r,t}function V3e(e){let t=0;const n=256,r=n-1;return t+=Math.round(e[0]*n*n*n*r),t+=Math.round(e[1]*n*n*r),t+=Math.round(e[2]*n*r),t+=Math.round(e[3]*r),t}function W3e(){const e='const t="GENERATE_POLYGON_BUFFERS",e="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function x(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],u=e[2],i=e[3],f=e[4],s=e[5];return t[0]=i/n,t[1]=-o/n,t[2]=-u/n,t[3]=x/n,t[4]=(u*s-i*f)/n,t[5]=-(x*s-o*f)/n,t}function o(t,e,n=2){const r=e&&e.length,x=r?e[0]*n:t.length;let o=u(t,0,x,n,!0);const i=[];if(!o||o.next===o.prev)return i;let s,l,c;if(r&&(o=function(t,e,n,r){const x=[];for(let n=0,o=e.length;n<o;n++){const i=u(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1);i===i.next&&(i.steiner=!0),x.push(g(i))}x.sort(y);for(let t=0;t<x.length;t++)n=h(x[t],n);return n}(t,e,o,n)),t.length>80*n){s=1/0,l=1/0;let e=-1/0,r=-1/0;for(let o=n;o<x;o+=n){const n=t[o],x=t[o+1];n<s&&(s=n),x<l&&(l=x),n>e&&(e=n),x>r&&(r=x)}c=Math.max(e-s,r-l),c=0!==c?32767/c:0}return f(o,i,n,s,l,c,0),i}function u(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,u=n-r;o<n;o+=r)x+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=z(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=z(x/r|0,t[x],t[x+1],o);return o&&M(o,o.next)&&(F(o),o=o.next),o}function i(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(F(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function f(t,e,n,r,x,o,u){if(!t)return;!u&&o&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=v(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let u=x,i=0;for(let t=0;t<n&&(i++,u=u.nextZ,u);t++);let f=n;for(;i>0||f>0&&u;)0!==i&&(0===f||!u||x.z<=u.z)?(r=x,x=x.nextZ,i--):(r=u,u=u.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=u}o.nextZ=null,n*=2}while(e>1)}(x)}(t,r,x,o);let y=t;for(;t.prev!==t.next;){const h=t.prev,p=t.next;if(o?l(t,r,x,o):s(t))e.push(h.i,t.i,p.i),F(t),t=p.next,y=p.next;else if((t=p)===y){u?1===u?f(t=c(i(t),e),e,n,r,x,o,2):2===u&&a(t,e,n,r,x,o):f(i(t),e,n,r,x,o,1);break}}}function s(t){const e=t.prev,n=t,r=t.next;if(d(e,n,r)>=0)return!1;const x=e.x,o=n.x,u=r.x,i=e.y,f=n.y,s=r.y,l=x<o?x<u?x:u:o<u?o:u,c=i<f?i<s?i:s:f<s?f:s,a=x>o?x>u?x:u:o>u?o:u,y=i>f?i>s?i:s:f>s?f:s;let h=r.next;for(;h!==e;){if(h.x>=l&&h.x<=a&&h.y>=c&&h.y<=y&&b(x,i,o,f,u,s,h.x,h.y)&&d(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function l(t,e,n,r){const x=t.prev,o=t,u=t.next;if(d(x,o,u)>=0)return!1;const i=x.x,f=o.x,s=u.x,l=x.y,c=o.y,a=u.y,y=i<f?i<s?i:s:f<s?f:s,h=l<c?l<a?l:a:c<a?c:a,p=i>f?i>s?i:s:f>s?f:s,g=l>c?l>a?l:a:c>a?c:a,Z=v(y,h,e,n,r),M=v(p,g,e,n,r);let w=t.prevZ,m=t.nextZ;for(;w&&w.z>=Z&&m&&m.z<=M;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;w&&w.z>=Z;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;m&&m.z<=M;){if(m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(t,e){let n=t;do{const r=n.prev,x=n.next.next;!M(r,x)&&w(r,n,n.next,x)&&E(r,x)&&E(x,r)&&(e.push(r.i,n.i,x.i),F(n),F(n.next),n=t=x),n=n.next}while(n!==t);return i(n)}function a(t,e,n,r,x,o){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&Z(u,t)){let s=I(u,t);return u=i(u,u.next),s=i(s,s.next),f(u,e,n,r,x,o,0),void f(s,e,n,r,x,o,0)}t=t.next}u=u.next}while(u!==t)}function y(t,e){return t.x-e.x}function h(t,e){const n=function(t,e){let n=e;const r=t.x,x=t.y;let o,u=-1/0;do{if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>u&&(u=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const i=o,f=o.x,s=o.y;let l=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&b(x<s?r:u,x,f,s,x<s?u:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);E(n,t)&&(e<l||e===l&&(n.x>o.x||n.x===o.x&&p(o,n)))&&(o=n,l=e)}n=n.next}while(n!==i);return o}(t,e);if(!n)return e;const r=I(n,t);return i(r,r.next),i(n,n.next)}function p(t,e){return d(t.prev,t,e.prev)<0&&d(e.next,t,t.next)<0}function v(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,x,o,u,i){return(x-u)*(e-i)>=(t-u)*(o-i)&&(t-u)*(r-i)>=(n-u)*(e-i)&&(n-u)*(o-i)>=(x-u)*(r-i)}function Z(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(d(t.prev,t,e.prev)||d(t,e.prev,e))||M(t,e)&&d(t.prev,t,t.next)>0&&d(e.prev,e,e.next)>0)}function d(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function M(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,r){const x=A(d(t,e,n)),o=A(d(t,e,r)),u=A(d(n,r,t)),i=A(d(n,r,e));return x!==o&&u!==i||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==u||!m(n,t,r))||!(0!==i||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function E(t,e){return d(t.prev,t,t.next)<0?d(t,e,t.next)>=0&&d(t,t.prev,e)>=0:d(t,e,t.prev)<0||d(t,t.next,e)<0}function I(t,e){const n=P(t.i,t.x,t.y),r=P(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function z(t,e,n,r){const x=P(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function F(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}new Array(6);const B=[],N={vertexPosition:0,indexPosition:0};function R(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function S(t,e,n,r,x,o){const u=3+x,i=t[e+0],f=t[e+1],s=B;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/u;return R(n,l,i,f,0),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,1),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,2),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,3),s.length&&n.set(s,l+3),l+=u,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,N.vertexPosition=l,N.indexPosition=c,N}function T(t,e,n,x,o,u,i,f,s,l,c){const a=10+f.length,y=u.length/a,h=[t[e+0],t[e+1]],p=[t[n],t[n+1]],v=t[e+2],g=t[n+2],b=r(s,[...h]),Z=r(s,[...p]);function d(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],u=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),i=[(n[0]-t[0])/u,(n[1]-t[1])/u],f=0===r||0===u?0:Math.acos((s=i[0]*x[0]+i[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return i[0]*o[0]+i[1]*o[1]>0?f:2*Math.PI-f}let M=-1,w=-1,m=c;const A=null!==o;if(null!==x){M=d(b,Z,r(s,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((M-Math.PI)/2))}if(A){w=d(Z,b,r(s,[...[t[o],t[o+1]]])),Math.cos(w)<=.985&&(m+=Math.tan((Math.PI-w)/2))}function E(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(0,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(1,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(2,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(3,c)),u.push(...f),i.push(y,y+1,y+2,y+1,y+3,y+2),{length:l+Math.sqrt((Z[0]-b[0])*(Z[0]-b[0])+(Z[1]-b[1])*(Z[1]-b[1])),angle:m}}function _(t,e,n,r,x){const u=2+x;let i=e;const f=t.slice(i,i+x);i+=x;const s=t[i++];let l=0;const c=new Array(s-1);for(let e=0;e<s;e++)l+=t[i++],e<s-1&&(c[e]=l);const a=t.slice(i,i+2*l),y=o(a,c,2);for(let t=0;t<y.length;t++)r.push(y[t]+n.length/u);for(let t=0;t<a.length;t+=2)n.push(a[t],a[t+1],...f);return i+2*l}const O=self;O.onmessage=r=>{const o=r.data;switch(o.type){case e:{const t=3,e=2,n=o.customAttributesSize,r=e+n,x=new Float32Array(o.renderInstructions),u=x.length/r,i=4*u*(n+t),f=new Uint32Array(6*u),s=new Float32Array(i);let l;for(let t=0;t<x.length;t+=r)l=S(x,t,s,f,n,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},o);O.postMessage(c,[s.buffer,f.buffer,x.buffer]);break}case n:{const t=[],e=[],n=o.customAttributesSize,r=3,u=new Float32Array(o.renderInstructions);let i=0;const f=[1,0,0,1,0,0];let s,l;for(x(f,o.renderInstructionsTransform);i<u.length;){l=Array.from(u.slice(i,i+n)),i+=n,s=u[i++];const x=i,o=i+(s-1)*r,c=u[x]===u[o]&&u[x+1]===u[o+1];let a=0,y=0;for(let n=0;n<s-1;n++){let h=null;n>0?h=i+(n-1)*r:c&&(h=o-r);let p=null;n<s-2?p=i+(n+2)*r:c&&(p=x+r);const v=T(u,i+n*r,i+(n+1)*r,h,p,t,e,l,f,a,y);a=v.length,y=v.angle}i+=s*r}const c=Uint32Array.from(e),a=Float32Array.from(t),y=Object.assign({vertexBuffer:a.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},o);O.postMessage(y,[a.buffer,c.buffer,u.buffer]);break}case t:{const t=[],e=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let x=0;for(;x<r.length;)x=_(r,x,t,e,n);const u=Uint32Array.from(e),i=Float32Array.from(t),f=Object.assign({vertexBuffer:i.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},o);O.postMessage(f,[i.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}function Y3e(e,t){const n=e.viewState.projection,i=t.getSource().getWrapX()&&n.canWrapX(),o=n.getExtent(),s=e.extent,a=i?eu(o):null,l=i?Math.ceil((s[2]-o[2])/a)+1:1;return[i?Math.floor((s[0]-o[0])/a):0,l,a]}class X3e extends aE{constructor(t,n){const r=n.uniforms||{},i=Ks();r[cf.PROJECTION_MATRIX]=i,super(t,{uniforms:r,postProcesses:n.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Zb(oE,e_),this.indicesBuffer_=new Zb(sE,e_),this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.program_,this.hitDetectionEnabled_=n.hitDetectionEnabled??!0;const o=n.attributes?n.attributes.map(function(a){return{name:"a_"+a.name,size:1,type:Io.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Io.FLOAT},{name:"a_index",size:1,type:Io.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:Io.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Io.FLOAT})),this.attributes.push(...o),this.customAttributes=n.attributes?n.attributes:[],this.previousExtent_=aD(),this.currentTransform_=i,this.renderTransform_=Ks(),this.invertRenderTransform_=Ks(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=W3e(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===g2.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,V2(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[mp(s,yp.ADDFEATURE,this.handleSourceFeatureAdded_,this),mp(s,yp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),mp(s,yp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),mp(s,yp.CLEAR,this.handleSourceFeatureClear_,this)],s.forEachFeature(a=>{this.featureCache_[Ei(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new H3e(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(t){const n=t.feature;this.featureCache_[Ei(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const n=t.feature;this.featureCache_[Ei(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}}handleSourceFeatureDelete_(t){const n=t.feature;delete this.featureCache_[Ei(n)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,o]=Y3e(t,this.getLayer());return this.renderWorlds(t,!1,r,i,o),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,o),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),this.helper.getCanvas()}prepareFrameInternal(t){const n=this.getLayer(),r=n.getSource(),i=t.viewState,o=!t.viewHints[zp.ANIMATING]&&!t.viewHints[zp.INTERACTING],s=!H2(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),o&&(s||a)){const l=i.projection,u=i.resolution,f=n instanceof lD?n.getRenderBuffer():0,c=d$(t.extent,f*u);r.loadFeatures(c,u,l),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const n=Ks();this.helper.makeProjectionTransform(t,n);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,o=i*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==o)&&(this.renderInstructions_=new Float32Array(o));let s,a;const l=[],u=[];let f=-1;for(const d in this.featureCache_)if(s=this.featureCache_[d],a=s.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],eh(n,l),this.renderInstructions_[++f]=l[0],this.renderInstructions_[++f]=l[1],this.hitDetectionEnabled_){const h=G3e(f+5,u);this.renderInstructions_[++f]=h[0],this.renderInstructions_[++f]=h[1],this.renderInstructions_[++f]=h[2],this.renderInstructions_[++f]=h[3],this.renderInstructions_[++f]=Number(d)}for(let h=0;h<this.customAttributes.length;h++){const p=this.customAttributes[h].callback(s.feature,s.properties);this.renderInstructions_[++f]=p}}const c={id:++this.lastSentId,type:g2.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};c.projectionTransform=n,this.ready=!1,this.worker_.postMessage(c,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,n,r,i,o){if(kc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const s=eh(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=V3e(l),f=this.renderInstructions_[u],c=Math.floor(f).toString(),h=this.getLayer().getSource().getFeatureByUid(c);if(h)return i(h,this.getLayer(),null)}renderWorlds(t,n,r,i,o){let s=r;this.helper.useProgram(this.program_,t),n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),h$(this.currentTransform_,s*o,0),U2(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(n);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++s<i)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(t){kCe(t)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class eYe{constructor(t,n){this.name=t,this.data=n,this.texture_=null}getTexture(t){if(!this.texture_){const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}}class tYe extends lje{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(kl.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===Do.LOADED,this.loaded)this.uploadTile();else{if(t instanceof p$){const n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(kl.CHANGE,this.handleTileChange_)}}uploadTile(){Td()}setReady(){this.ready=!0,this.dispatchEvent(kl.CHANGE)}handleTileChange_(){this.tile.getState()===Do.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(kl.CHANGE,this.handleTileChange_)}}function Z3e(e,t,n){const r=n?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r)}function nYe(e,t,n,r){Z3e(e,t,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}function T1e(e,t,n,r,i,o){const s=e.getGL();let a,l;n instanceof Float32Array?(a=s.FLOAT,e.getExtension("OES_texture_float"),l=e.getExtension("OES_texture_float_linear")!==null):(a=s.UNSIGNED_BYTE,l=!0),Z3e(s,t,o&&l);const u=n.byteLength/r[1];let f=1;u%8===0?f=8:u%4===0?f=4:u%2===0&&(f=2);let c;switch(i){case 1:{c=s.LUMINANCE;break}case 2:{c=s.LUMINANCE_ALPHA;break}case 3:{c=s.RGB;break}case 4:{c=s.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}const d=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,f),s.texImage2D(s.TEXTURE_2D,0,c,r[0],r[1],0,c,a,n),s.pixelStorei(s.UNPACK_ALIGNMENT,d)}let Qy=null;function rYe(){Qy=Jm(1,1,void 0,{willReadFrequently:!0})}class iYe extends tYe{constructor(t){super(t),this.textures=[],this.renderSize_=wc(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const n=new Zb(oE,G$);n.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(n),this.coords=n,this.setTile(t.tile)}setHelper(t){var r;const n=(r=this.helper)==null?void 0:r.getGL();if(n){this.helper.deleteBuffer(this.coords);for(let i=0;i<this.textures.length;++i)n.deleteTexture(this.textures[i])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,n=t.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof p$||r instanceof g$?i=r.getImage():i=r.getData();const o=Abe(i);if(o){const v=n.createTexture();this.textures.push(v),this.bandCount=4,nYe(n,v,o,r.interpolate),this.setReady();return}i=Cbe(i);const s=r.getSize(),a=[s[0]+2*this.gutter,s[1]+2*this.gutter],l=i instanceof Float32Array,u=a[0]*a[1],f=l?Float32Array:Uint8Array,c=f.BYTES_PER_ELEMENT,d=i.byteLength/a[1];this.bandCount=Math.floor(d/c/a[0]);const h=Math.ceil(this.bandCount/4);if(h===1){const v=n.createTexture();this.textures.push(v),T1e(t,v,i,a,this.bandCount,r.interpolate),this.setReady();return}const p=new Array(h);for(let v=0;v<h;++v){const w=n.createTexture();this.textures.push(w);const E=v<h-1?4:(this.bandCount-1)%4+1;p[v]=new f(u*E)}let m=0,b=0;const y=a[0]*this.bandCount;for(let v=0;v<a[1];++v){for(let w=0;w<y;++w){const E=i[b+w],A=Math.floor(m/this.bandCount),T=w%this.bandCount,D=Math.floor(T/4),k=p[D],R=k.length/u,M=T%4;k[A*R+M]=E,++m}b+=d/c}for(let v=0;v<h;++v){const w=this.textures[v],E=p[v],A=E.length/u;T1e(t,w,E,a,A,r.interpolate)}this.setReady()}getImagePixelData_(t,n,r){const i=this.gutter,o=this.renderSize_[0],s=this.renderSize_[1];Qy||rYe(),Qy.clearRect(0,0,1,1);const a=t.width,l=t.height,u=a-2*i,f=l-2*i,c=i+Math.floor(u*(n/o)),d=i+Math.floor(f*(r/s));let h;try{Qy.drawImage(t,c,d,1,1,0,0,1,1),h=Qy.getImageData(0,0,1,1).data}catch{return Qy=null,null}return h}getArrayPixelData_(t,n,r,i){const o=this.gutter,s=this.renderSize_[0],a=this.renderSize_[1],l=n[0],u=n[1],f=l+2*o,c=u+2*o,d=o+Math.floor(l*(r/s)),h=o+Math.floor(u*(i/a));if(t instanceof DataView){const m=t.byteLength/(f*c),b=m*(h*f+d),y=t.buffer.slice(b,b+m);return new DataView(y)}const p=this.bandCount*(h*f+d);return t.slice(p,p+this.bandCount)}getPixelData(t,n){if(!this.loaded)return null;if(this.tile instanceof TCe){const r=this.tile.getData(),i=Cbe(r);if(i){const o=this.tile.getSize();return this.getArrayPixelData_(i,o,t,n)}return this.getImagePixelData_(Abe(r),t,n)}return this.getImagePixelData_(this.tile.getImage(),t,n)}}const oYe={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function D1e(e){return 1/(e+2)}function sYe(){return{tileIds:new Set,representationsByZ:{}}}function L1e(e,t){return e.tileIds.has(Ei(t))}function R1e(e,t,n){const r=e.representationsByZ;n in r||(r[n]=new Set),r[n].add(t),e.tileIds.add(Ei(t.tile))}function eF(e,t){const n=e.layerStatesArray[e.layerIndex];n.extent&&(t=Km(t,LCe(n.extent,e.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=Km(t,i))}return t}function YM(e,t){return`${e.getKey()},${e.getRevision()},${Jy(t)}`}class aYe extends aE{constructor(t,n){super(t,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=Ks(),this.tempMat4=c$(),this.tempTileRange_=new uje(0,0,0,0),this.tempTileCoord_=BM(0,0,0),this.tempSize_=[0,0];const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new DCe(r),this.frameState=null,this.renderedProjection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const r=this.getLayer().getRenderSource();return!r||s$(eF(t,t.extent))?!1:r.getState()==="ready"}createTileRepresentation(t){return Td()}enqueueTiles(t,n,r,i,o){const s=t.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(s.projection),f=l.getGutterForProjection(s.projection),c=Ei(l);c in t.wantedTiles||(t.wantedTiles[c]={});const d=t.wantedTiles[c],h=this.tileRepresentationCache,p=a.getMapInternal(),m=Math.max(r-o,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let b=r;b>=m;--b){const y=u.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),v=u.getResolution(b);for(let w=y.minX;w<=y.maxX;++w)for(let E=y.minY;E<=y.maxY;++E){const A=BM(b,w,E,this.tempTileCoord_),T=YM(l,A);let D,k;if(h.containsKey(T)&&(D=h.get(T),k=D.tile),(!D||D.tile.key!==l.getKey())&&(k=l.getTile(b,w,E,t.pixelRatio,s.projection),!k)||L1e(i,k))continue;D?D.setTile(k):(D=this.createTileRepresentation({tile:k,grid:u,helper:this.helper,gutter:f}),h.set(T,D)),R1e(i,D,b);const R=k.getKey();d[R]=!0,k.getState()===Do.IDLE&&(t.tileQueue.isKeyQueued(R)||t.tileQueue.enqueue([k,c,u.getTileCoordCenter(A),v]))}}}beforeTilesRender(t,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,n,r,i,o,s,a,l,u,f,c){}renderTileMask(t,n,r,i){}drawTile_(t,n,r,i,o,s,a){if(!n.ready)return;const u=n.tile.tileCoord,f=Jy(u),c=f in s?s[f]:1,d=a.getResolution(r),h=wc(a.getTileSize(r),this.tempSize_),p=a.getOrigin(r),m=a.getTileCoordExtent(u),b=c<1?-1:D1e(r);c<1&&(t.animate=!0);const y=t.viewState,v=y.center[0],w=y.center[1],E=h[0]+2*i,A=h[1]+2*i,T=E/A,D=(v-p[0])/(h[0]*d),k=(p[1]-w)/(h[1]*d),R=y.resolution/d,M=u[1],B=u[2];cje(this.tileTransform_),kbe(this.tileTransform_,2/(t.size[0]*R/E),-2/(t.size[1]*R/E)),fje(this.tileTransform_,y.rotation),kbe(this.tileTransform_,1,1/T),h$(this.tileTransform_,(h[0]*(M-D)-i)/E,(h[1]*(B-k)-i)/A),this.renderTile(n,this.tileTransform_,t,o,d,h,p,m,b,i,c)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,t);const r=t.viewState,i=this.getLayer(),o=i.getRenderSource(),s=o.getTileGridForProjection(r.projection),a=o.getGutterForProjection(r.projection),l=eF(t,t.extent),u=s.getZForResolution(r.resolution,o.zDirection),f=sYe(),c=i.getPreload();if(t.nextExtent){const w=s.getZForResolution(r.nextResolution,o.zDirection),E=eF(t,t.nextExtent);this.enqueueTiles(t,E,w,f,c)}this.enqueueTiles(t,l,u,f,0),c>0&&setTimeout(()=>{this.enqueueTiles(t,l,u-1,f,c-1)},0);const d={};let h=!1;const p=f.representationsByZ;if(u in p){const w=Ei(this),E=t.time;for(const A of p[u]){const T=A.tile;if((T instanceof g$||T instanceof m$)&&T.getState()===Do.EMPTY)continue;const D=T.tileCoord;if(A.ready){const M=T.getAlpha(w,E);if(M===1){T.endTransition(w);continue}h=!0;const B=Jy(D);d[B]=M}if(this.renderComplete=!1,this.findAltTiles_(s,D,u+1,f))continue;const R=s.getMinZoom();for(let M=u-1;M>=R&&!this.findAltTiles_(s,D,M,f);--M);}}const m=Object.keys(p).map(Number).sort(dje);if(this.beforeTilesMaskRender(t))for(let w=0,E=m.length;w<E;++w){const A=m[w];for(const T of p[A]){const D=T.tile.tileCoord;if(Jy(D)in d)continue;const R=s.getTileCoordExtent(D);this.renderTileMask(T,A,R,D1e(A))}}this.beforeTilesRender(t,h);for(let w=0,E=m.length;w<E;++w){const A=m[w];for(const T of p[A]){const D=T.tile.tileCoord;Jy(D)in d||this.drawTile_(t,T,A,a,l,d,s)}}if(u in p)for(const w of p[u]){const E=w.tile.tileCoord;Jy(E)in d&&this.drawTile_(t,w,u,a,l,d,s)}this.beforeFinalize(t),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const y=this.helper.getCanvas(),v=this.tileRepresentationCache;for(;v.canExpireCache();)v.pop().dispose();return this.postRender(n,t),y}beforeFinalize(t){}findAltTiles_(t,n,r,i){const o=t.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=o.minX;u<=o.maxX;++u)for(let f=o.minY;f<=o.maxY;++f){const c=YM(l,[r,u,f]);let d=!1;if(a.containsKey(c)){const h=a.get(c);h.ready&&!L1e(i,h.tile)&&(R1e(i,h,r),d=!0)}d||(s=!1)}return s}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach(n=>n.dispose()),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(t=>t.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const Qn={...oYe,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},pC={TEXTURE_COORD:"a_textureCoord"},lYe=[{name:pC.TEXTURE_COORD,size:2,type:Io.FLOAT}];class uYe extends aYe{constructor(t,n){super(t,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new Zb(sE,G$),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const n=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(n)}if(this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const n=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(n)}}afterHelperCreated(){super.afterHelperCreated();const t=this.helper.getGL();for(const n of this.paletteTextures_)n.getTexture(t);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(t)}super.removeHelper()}createTileRepresentation(t){return new iYe(t)}beforeTilesRender(t,n){super.beforeTilesRender(t,n),this.helper.useProgram(this.program_,t)}renderTile(t,n,r,i,o,s,a,l,u,f,c){const d=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(lYe);let h=0;for(;h<t.textures.length;){const T=`${Qn.TILE_TEXTURE_ARRAY}[${h}]`;this.helper.bindTexture(t.textures[h],h,T),++h}for(let T=0;T<this.paletteTextures_.length;++T){const D=this.paletteTextures_[T],k=D.getTexture(d);this.helper.bindTexture(k,h,D.name),++h}const p=r.viewState,m=s[0]+2*f,b=s[1]+2*f,v=t.tile.tileCoord,w=v[1],E=v[2];this.helper.setUniformMatrixValue(Qn.TILE_TRANSFORM,f3(this.tempMat4,n)),this.helper.setUniformFloatValue(Qn.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(Qn.DEPTH,u);let A=i;f>0&&(A=l,Km(A,i,A)),this.helper.setUniformFloatVec4(Qn.RENDER_EXTENT,A),this.helper.setUniformFloatValue(Qn.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(Qn.ZOOM,p.zoom),this.helper.setUniformFloatValue(Qn.TEXTURE_PIXEL_WIDTH,m),this.helper.setUniformFloatValue(Qn.TEXTURE_PIXEL_HEIGHT,b),this.helper.setUniformFloatValue(Qn.TEXTURE_RESOLUTION,o),this.helper.setUniformFloatValue(Qn.TEXTURE_ORIGIN_X,a[0]+w*s[0]*o-f*o),this.helper.setUniformFloatValue(Qn.TEXTURE_ORIGIN_Y,a[1]-E*s[1]*o+f*o),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const i=this.getLayer(),o=eh(r.pixelToCoordinateTransform,t.slice()),s=r.viewState,a=i.getExtent();if(a&&!ub(LCe(a,s.projection),o))return null;const l=i.getSources(u$([o]),s.resolution);let u,f,c;for(u=l.length-1;u>=0;--u)if(f=l[u],f.getState()==="ready"){if(c=f.getTileGridForProjection(s.projection),f.getWrapX())break;const h=c.getExtent();if(!h||ub(h,o))break}if(u<0)return null;const d=this.tileRepresentationCache;for(let h=c.getZForResolution(s.resolution);h>=c.getMinZoom();--h){const p=c.getTileCoordForCoordAndZ(o,h),m=YM(f,p);if(!d.containsKey(m))continue;const b=d.get(m),y=b.tile;if((y instanceof g$||y instanceof m$)&&y.getState()===Do.EMPTY)return null;if(!b.loaded)continue;const v=c.getOrigin(h),w=wc(c.getTileSize(h)),E=c.getResolution(h),A=(o[0]-v[0])/E-p[1]*w[0],T=(v[1]-o[1])/E-p[2]*w[1];return b.getPixelData(A,T)}return null}disposeInternal(){const t=this.helper;if(t){const n=t.getGL();for(const r of this.paletteTextures_)r.delete(n);this.paletteTextures_.length=0,n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}function cYe(e,t){return`operator_${e}_${Object.keys(t.functions).length}`}function Bm(e){const t=e.toString();return t.includes(".")?t:t+".0"}function V$(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${e.length}(${e.map(Bm).join(", ")})`}function gC(e){const t=W2(e),n=t.length>3?t[3]:1;return V$([t[0]/255,t[1]/255,t[2]/255,n])}function fYe(e){const t=wc(e);return V$(t)}const tF={};let dYe=0;function cb(e){return e in tF||(tF[e]=dYe++),tF[e]}function Dd(e){return Bm(cb(e))}function W$(e){return"u_var_"+e}function XM(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const nF="getBandValue",K3e="u_paletteTextures",J3e="featureId",Q3e="geometryType";function hYe(e,t,n,r){const i=hje(e,t,n);return Y$(i,t,r)}function ri(e){return(t,n,r)=>{const i=n.args.length,o=new Array(i);for(let s=0;s<i;++s)o[s]=Y$(n.args[s],r,t);return e(o,t)}}const pYe={[cr.Get]:(e,t)=>{const r=t.args[0].value;return r in e.properties||(e.properties[r]={name:r,type:t.type}),(e.inFragmentShader?"v_prop_":"a_prop_")+r},[cr.Id]:e=>(e.featureId=!0,(e.inFragmentShader?"v_":"a_")+J3e),[cr.GeometryType]:e=>(e.geometryType=!0,(e.inFragmentShader?"v_":"a_")+Q3e),[cr.LineMetric]:()=>"currentLineMetric",[cr.Var]:(e,t)=>{const r=t.args[0].value;return r in e.variables||(e.variables[r]={name:r,type:t.type}),W$(r)},[cr.Resolution]:()=>"u_resolution",[cr.Zoom]:()=>"u_zoom",[cr.Time]:()=>"u_time",[cr.Any]:ri(e=>`(${e.join(" || ")})`),[cr.All]:ri(e=>`(${e.join(" && ")})`),[cr.Not]:ri(([e])=>`(!${e})`),[cr.Equal]:ri(([e,t])=>`(${e} == ${t})`),[cr.NotEqual]:ri(([e,t])=>`(${e} != ${t})`),[cr.GreaterThan]:ri(([e,t])=>`(${e} > ${t})`),[cr.GreaterThanOrEqualTo]:ri(([e,t])=>`(${e} >= ${t})`),[cr.LessThan]:ri(([e,t])=>`(${e} < ${t})`),[cr.LessThanOrEqualTo]:ri(([e,t])=>`(${e} <= ${t})`),[cr.Multiply]:ri(e=>`(${e.join(" * ")})`),[cr.Divide]:ri(([e,t])=>`(${e} / ${t})`),[cr.Add]:ri(e=>`(${e.join(" + ")})`),[cr.Subtract]:ri(([e,t])=>`(${e} - ${t})`),[cr.Clamp]:ri(([e,t,n])=>`clamp(${e}, ${t}, ${n})`),[cr.Mod]:ri(([e,t])=>`mod(${e}, ${t})`),[cr.Pow]:ri(([e,t])=>`pow(${e}, ${t})`),[cr.Abs]:ri(([e])=>`abs(${e})`),[cr.Floor]:ri(([e])=>`floor(${e})`),[cr.Ceil]:ri(([e])=>`ceil(${e})`),[cr.Round]:ri(([e])=>`floor(${e} + 0.5)`),[cr.Sin]:ri(([e])=>`sin(${e})`),[cr.Cos]:ri(([e])=>`cos(${e})`),[cr.Atan]:ri(([e,t])=>t!==void 0?`atan(${e}, ${t})`:`atan(${e})`),[cr.Sqrt]:ri(([e])=>`sqrt(${e})`),[cr.Match]:ri(e=>{const t=e[0],n=e[e.length-1];let r=null;for(let i=e.length-3;i>=1;i-=2){const o=e[i],s=e[i+1];r=`(${t} == ${o} ? ${s} : ${r||n})`}return r}),[cr.Between]:ri(([e,t,n])=>`(${e} >= ${t} && ${e} <= ${n})`),[cr.Interpolate]:ri(([e,t,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const o=n[i],s=r||n[i+1],a=n[i+2],l=n[i+3];let u;e===Bm(1)?u=`(${t} - ${o}) / (${a} - ${o})`:u=`(pow(${e}, (${t} - ${o})) - 1.0) / (pow(${e}, (${a} - ${o})) - 1.0)`,r=`mix(${s}, ${l}, clamp(${u}, 0.0, 1.0))`}return r}),[cr.Case]:ri(e=>{const t=e[e.length-1];let n=null;for(let r=e.length-3;r>=0;r-=2){const i=e[r],o=e[r+1];n=`(${i} ? ${o} : ${n||t})`}return n}),[cr.In]:ri(([e,...t],n)=>{const r=cYe("in",n),i=[];for(let o=0;o<t.length;o+=1)i.push(`  if (inputValue == ${t[o]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${e})`}),[cr.Array]:ri(e=>`vec${e.length}(${e.join(", ")})`),[cr.Color]:ri(e=>{if(e.length===1)return`vec4(vec3(${e[0]} / 255.0), 1.0)`;if(e.length===2)return`vec4(vec3(${e[0]} / 255.0), ${e[1]})`;const t=e.slice(0,3).map(r=>`${r} / 255.0`);if(e.length===3)return`vec4(${t.join(", ")}, 1.0)`;const n=e[3];return`vec4(${t.join(", ")}, ${n})`}),[cr.Band]:ri(([e,t,n],r)=>{if(!(nF in r.functions)){let i="";const o=r.bandCount||1;for(let s=0;s<o;s++){const a=Math.floor(s/4);let l=s%4;s===o-1&&l===1&&(l=3);const u=`${Qn.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${s+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[nF]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${Qn.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${Qn.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${nF}(${e}, ${t??"0.0"}, ${n??"0.0"})`}),[cr.Palette]:(e,t)=>{const[n,...r]=t.args,i=r.length,o=new Uint8Array(i*4);for(let u=0;u<r.length;u++){const f=r[u].value,c=W2(f),d=u*4;o[d]=c[0],o[d+1]=c[1],o[d+2]=c[2],o[d+3]=c[3]*255}e.paletteTextures||(e.paletteTextures=[]);const s=`${K3e}[${e.paletteTextures.length}]`,a=new eYe(s,o);e.paletteTextures.push(a);const l=Y$(n,Si,e);return`texture2D(${s}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function Y$(e,t,n){if(e instanceof pje){const r=pYe[e.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(e.operator)}`);return r(n,e,t)}if((e.type&Si)>0)return Bm(e.value);if((e.type&RCe)>0)return e.value.toString();if((e.type&Y2)>0)return Dd(e.value.toString());if((e.type&Tl)>0)return gC(e.value);if((e.type&jp)>0)return V$(e.value);if((e.type&z1)>0)return fYe(e.value);throw new Error(`Unexpected expression ${e.value} (expected type ${gje(t)})`)}function gYe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const Ry=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders
`,Fy=gYe();class eke{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Bm(Fy["circle-radius"])} + ${Bm(Fy["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=gC(Fy["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Bm(Fy["stroke-width"]),this.strokeColorExpression_=gC(Fy["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Dd("round"),this.strokeJoinExpression_=Dd("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=gC(Fy["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,n,r){return this.varyings_.push({name:t,type:n,expression:r}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${k1e} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${k1e}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Dd("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Dd("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Dd("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Dd("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));
  float currentLengthPx = lengthToPoint + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPoint / segmentLength);

  if (${this.discardExpression_}) { discard; }

  vec4 color = ${this.strokeColorExpression_};
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  color.a *= smoothstep(0.5, -0.5, distance);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${Ry}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}const tc={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},mYe=["#00f","#0ff","#0f0","#ff0","#f00"];let yYe=class extends lD{constructor(t){t=t||{};const n=Object.assign({},t);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.gradient_=null,this.addChangeListener(tc.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:mYe),this.setBlur(t.blur!==void 0?t.blur:15),this.setRadius(t.radius!==void 0?t.radius:8);const r=t.weight?t.weight:"weight";this.weightFunction_=typeof r=="string"?i=>i.get(r):r,this.setRenderOrder(null)}getBlur(){return this.get(tc.BLUR)}getGradient(){return this.get(tc.GRADIENT)}getRadius(){return this.get(tc.RADIUS)}handleGradientChanged_(){this.gradient_=bYe(this.getGradient())}setBlur(t){this.set(tc.BLUR,t)}setGradient(t){this.set(tc.GRADIENT,t)}setRadius(t){this.set(tc.RADIUS,t)}createRenderer(){const t=new eke().addAttribute("float a_weight").addVarying("v_weight","float","a_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_weight)");return new X3e(this,{className:this.getClassName(),attributes:[{name:"weight",callback:n=>{const r=this.weightFunction_(n);return r!==void 0?Co(r,0,1):1}}],uniforms:{u_size:()=>(this.get(tc.RADIUS)+this.get(tc.BLUR))*2,u_blurSlope:()=>this.get(tc.RADIUS)/Math.max(1,this.get(tc.BLUR))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}};function bYe(e){const r=Jm(1,256),i=r.createLinearGradient(0,0,1,256),o=1/(e.length-1);for(let s=0,a=e.length;s<a;++s)i.addColorStop(s*o,e[s]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class vYe extends mje{constructor(t){super(t),this.vectorRenderer_=new yje(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Ks(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=eh(this.coordinateToVectorPixelTransform_,eh(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,r=t.viewState,i=r.resolution,o=t.viewHints,s=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),FCe(a,this.layerImageRatio_));const l=eu(a)/i,u=Up(a)/i;if(!o[zp.ANIMATING]&&!o[zp.INTERACTING]&&!s$(a)){s.useContainer(null,null);const f=s.context,c=t.layerStatesArray[t.layerIndex],d=Object.assign({},c,{opacity:1}),h=Object.assign({},t,{extent:a,size:[l,u],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),p=this.getLayer().getDeclutter();p&&(h.declutter={[p]:new bje(9)});let m=!0;const b=new L$(a,i,n,f.canvas,function(y){s.prepareFrame(h)&&s.replayGroupChanged&&(s.clipping=!1,s.renderFrame(h,null)&&(s.renderDeclutter(h),s.renderDeferred(h),m=!1),y())});b.addEventListener(kl.CHANGE,()=>{if(b.getState()!==xm.LOADED)return;this.image=m?null:b;const y=b.getPixelRatio(),v=vje(b.getResolution())*n/y;this.renderedResolution=v,this.coordinateToVectorPixelTransform_=f$(this.coordinateToVectorPixelTransform_,l/2,u/2,1/v,-1/v,0,-r.center[0],-r.center[1])}),b.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,r,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,r,i,o):super.forEachFeatureAtCoordinate(t,n,r,i,o)}}class xYe extends lD{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new vYe(this)}}function jn(e,t,n){const r=wje();return hYe(t,n,r,e)}function wYe(e){const t=W2(e),n=t[0]*256,r=t[1],i=t[2]*256,o=Math.round(t[3]*255);return[n+r,i+o]}const _Ye=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    fract(packedColor[1] / 256.0)
  );
}`;function ZM(e){return e===Tl||e===z1?2:e===jp?4:1}function JS(e){const t=ZM(e);return t>1?`vec${t}`:"float"}function x3(e){return(JSON.stringify(e).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function X$(e,t,n,r){if(`${r}radius`in e&&r!=="icon-"){let i=jn(n,e[`${r}radius`],Si);if(`${r}radius2`in e){const o=jn(n,e[`${r}radius2`],Si);i=`max(${i}, ${o})`}`${r}stroke-width`in e&&(i=`(${i} + ${jn(n,e[`${r}stroke-width`],Si)} * 0.5)`),t.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in e){const i=jn(n,e[`${r}scale`],z1);t.setSymbolSizeExpression(`${t.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in e&&t.setSymbolOffsetExpression(jn(n,e[`${r}displacement`],jp)),`${r}rotation`in e&&t.setSymbolRotationExpression(jn(n,e[`${r}rotation`],Si)),`${r}rotate-with-view`in e&&t.setSymbolRotateWithView(!!e[`${r}rotate-with-view`])}function tke(e,t,n,r,i){let o="vec4(0.)";if(t!==null&&(o=t),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${e})`;o=`mix(${n}, ${o}, ${l})`}const s=`(1.0 - smoothstep(-0.63, 0.58, ${e}))`;let a=`${o} * vec4(1.0, 1.0, 1.0, ${s})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function Z$(e,t,n,r,i){const o=new Image;o.crossOrigin=e[`${r}cross-origin`]===void 0?"anonymous":e[`${r}cross-origin`],o.src=e[`${r}src`],n[`u_texture${i}_size`]=()=>o.complete?[o.width,o.height]:[0,0],t.addUniform(`vec2 u_texture${i}_size`);const s=`u_texture${i}_size`;return n[`u_texture${i}`]=o,t.addUniform(`sampler2D u_texture${i}`),s}function K$(e,t,n,r,i){let o=jn(n,e[`${t}offset`],jp);if(`${t}offset-origin`in e)switch(e[`${t}offset-origin`]){case"top-right":o=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${o} * vec2(-1., 1.)`;break;case"bottom-left":o=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${o} * vec2(1., -1.)`;break;case"bottom-right":o=`${r} - ${i} - ${o}`;break}return o}function EYe(e,t,n,r,i){i.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,X$(e,t,r,"circle-");let o=null;"circle-opacity"in e&&(o=jn(i,e["circle-opacity"],Si));let s="coordsPx";"circle-scale"in e&&(s=`coordsPx / ${jn(i,e["circle-scale"],z1)}`);let a=null;"circle-fill-color"in e&&(a=jn(i,e["circle-fill-color"],Tl));let l=null;"circle-stroke-color"in e&&(l=jn(i,e["circle-stroke-color"],Tl));let u=jn(i,e["circle-radius"],Si),f=null;"circle-stroke-width"in e&&(f=jn(i,e["circle-stroke-width"],Si),u=`(${u} + ${f} * 0.5)`);const c=`circleDistanceField(${s}, ${u})`,d=tke(c,a,l,f,o);t.setSymbolColorExpression(d)}function SYe(e,t,n,r,i){i.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,i.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,i.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,X$(e,t,r,"shape-");let o=null;"shape-opacity"in e&&(o=jn(i,e["shape-opacity"],Si));let s="coordsPx";"shape-scale"in e&&(s=`coordsPx / ${jn(i,e["shape-scale"],z1)}`);let a=null;"shape-fill-color"in e&&(a=jn(i,e["shape-fill-color"],Tl));let l=null;"shape-stroke-color"in e&&(l=jn(i,e["shape-stroke-color"],Tl));let u=null;"shape-stroke-width"in e&&(u=jn(i,e["shape-stroke-width"],Si));const f=jn(i,e["shape-points"],Si);let c="0.";"shape-angle"in e&&(c=jn(i,e["shape-angle"],Si));let d,h=jn(i,e["shape-radius"],Si);if(u!==null&&(h=`${h} + ${u} * 0.5`),"shape-radius2"in e){let m=jn(i,e["shape-radius2"],Si);u!==null&&(m=`${m} + ${u} * 0.5`),d=`starDistanceField(${s}, ${f}, ${h}, ${m}, ${c})`}else d=`regularDistanceField(${s}, ${f}, ${h}, ${c})`;const p=tke(d,a,l,u,o);t.setSymbolColorExpression(p)}function AYe(e,t,n,r,i){let o="vec4(1.0)";"icon-color"in e&&(o=jn(i,e["icon-color"],Tl)),"icon-opacity"in e&&(o=`${o} * vec4(1.0, 1.0, 1.0, ${jn(i,e["icon-opacity"],Si)})`);const s=x3(e["icon-src"]),a=Z$(e,t,n,"icon-",s);if(t.setSymbolColorExpression(`${o} * texture2D(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in e&&"icon-height"in e&&t.setSymbolSizeExpression(`vec2(${jn(r,e["icon-width"],Si)}, ${jn(r,e["icon-height"],Si)})`),"icon-offset"in e&&"icon-size"in e){const l=jn(r,e["icon-size"],jp),u=t.getSymbolSizeExpression();t.setSymbolSizeExpression(l);const f=K$(e,"icon-",r,"v_quadSizePx",l);t.setTextureCoordinateExpression(`(vec4((${f}).xyxy) + vec4(0., 0., ${l})) / (${u}).xyxy`)}if(X$(e,t,r,"icon-"),"icon-anchor"in e){const l=jn(r,e["icon-anchor"],jp);let u="1.0";"icon-scale"in e&&(u=jn(r,e["icon-scale"],z1));let f;e["icon-anchor-x-units"]==="pixels"&&e["icon-anchor-y-units"]==="pixels"?f=`${l} * ${u}`:e["icon-anchor-x-units"]==="pixels"?f=`${l} * vec2(vec2(${u}).x, v_quadSizePx.y)`:e["icon-anchor-y-units"]==="pixels"?f=`${l} * vec2(v_quadSizePx.x, vec2(${u}).x)`:f=`${l} * v_quadSizePx`;let c=`v_quadSizePx * vec2(0.5, -0.5) + ${f} * vec2(-1., 1.)`;if("icon-anchor-origin"in e)switch(e["icon-anchor-origin"]){case"top-right":c=`v_quadSizePx * -0.5 + ${f}`;break;case"bottom-left":c=`v_quadSizePx * 0.5 - ${f}`;break;case"bottom-right":c=`v_quadSizePx * vec2(-0.5, 0.5) + ${f} * vec2(1., -1.)`;break}t.setSymbolOffsetExpression(`${t.getSymbolOffsetExpression()} + ${c}`)}}function CYe(e,t,n,r,i){if("stroke-color"in e&&t.setStrokeColorExpression(jn(i,e["stroke-color"],Tl)),"stroke-pattern-src"in e){const o=x3(e["stroke-pattern-src"]),s=Z$(e,t,n,"stroke-pattern-",o);let a=s,l="vec2(0.)";"stroke-pattern-offset"in e&&"stroke-pattern-size"in e&&(a=jn(i,e["stroke-pattern-size"],jp),l=K$(e,"stroke-pattern-",i,s,a));let u="0.";"stroke-pattern-spacing"in e&&(u=jn(i,e["stroke-pattern-spacing"],Si)),i.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord);
}`;const f=`u_texture${o}`;let c="1.";"stroke-color"in e&&(c=t.getStrokeColorExpression()),t.setStrokeColorExpression(`${c} * sampleStrokePattern(${f}, ${s}, ${l}, ${a}, ${u}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in e&&t.setStrokeWidthExpression(jn(r,e["stroke-width"],Si)),"stroke-offset"in e&&t.setStrokeOffsetExpression(jn(r,e["stroke-offset"],Si)),"stroke-line-cap"in e&&t.setStrokeCapExpression(jn(r,e["stroke-line-cap"],Y2)),"stroke-line-join"in e&&t.setStrokeJoinExpression(jn(r,e["stroke-line-join"],Y2)),"stroke-miter-limit"in e&&t.setStrokeMiterLimitExpression(jn(r,e["stroke-miter-limit"],Si)),"stroke-line-dash"in e){i.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Dd("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${Dd("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let o=e["stroke-line-dash"].map(h=>jn(i,h,Si));o.length%2===1&&(o=[...o,...o]);let s="0.";"stroke-line-dash-offset"in e&&(s=jn(r,e["stroke-line-dash-offset"],Si));const l=`dashDistanceField_${x3(e["stroke-line-dash"])}`,u=o.map((h,p)=>`float dashLength${p} = ${h};`),f=o.map((h,p)=>`dashLength${p}`).join(" + ");let c="0.",d=`getSingleDashDistance(distance, radius, ${c}, dashLength0, totalDashLength, capType)`;for(let h=2;h<o.length;h+=2)c=`${c} + dashLength${h-2} + dashLength${h-1}`,d=`min(${d}, getSingleDashDistance(distance, radius, ${c}, dashLength${h}, totalDashLength, capType))`;i.functions[l]=`float ${l}(float distance, float radius, float capType) {
  ${u.join(`
  `)}
  float totalDashLength = ${f};
  return ${d};
}`,t.setStrokeDistanceFieldExpression(`${l}(currentLengthPx + ${s}, currentRadiusPx, capType)`)}}function kYe(e,t,n,r,i){if("fill-color"in e&&t.setFillColorExpression(jn(i,e["fill-color"],Tl)),"fill-pattern-src"in e){const o=x3(e["fill-pattern-src"]),s=Z$(e,t,n,"fill-pattern-",o);let a=s,l="vec2(0.)";"fill-pattern-offset"in e&&"fill-pattern-size"in e&&(a=jn(i,e["fill-pattern-size"],jp),l=K$(e,"fill-pattern-",i,s,a)),i.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const u=`u_texture${o}`;let f="1.";"fill-color"in e&&(f=t.getFillColorExpression()),t.setFillColorExpression(`${f} * sampleFillPattern(${u}, ${s}, ${l}, ${a}, pxOrigin, pxPos)`)}}function nke(e,t){const n=XM(),r={...XM(),inFragmentShader:!0,variables:n.variables},i=new eke,o={};if("icon-src"in e?AYe(e,i,o,n,r):"shape-points"in e?SYe(e,i,o,n,r):"circle-radius"in e&&EYe(e,i,o,n,r),CYe(e,i,o,n,r),kYe(e,i,o,n,r),e.filter){const l=jn(r,e.filter,RCe);i.setFragmentDiscardExpression(`!${l}`)}for(const l in r.variables){const u=r.variables[l],f=W$(u.name);let c=JS(u.type);u.type===Tl&&(c="vec4"),i.addUniform(`${c} ${f}`),o[f]=()=>{const d=t[u.name];return typeof d=="number"?d:typeof d=="boolean"?d?1:0:u.type===Tl?W2(d||"#eee"):typeof d=="string"?cb(d):d}}for(const l in r.properties){const u=r.properties[l];n.properties[l]||(n.properties[l]=u);let f=JS(u.type),c=`a_prop_${u.name}`;u.type===Tl&&(f="vec4",c=`unpackColor(${c})`,i.addVertexShaderFunction(_Ye)),i.addVarying(`v_prop_${u.name}`,f,c)}for(const l in n.properties){const u=n.properties[l];i.addAttribute(`${JS(u.type)} a_prop_${u.name}`)}for(const l in n.functions)i.addVertexShaderFunction(n.functions[l]);for(const l in r.functions)i.addFragmentShaderFunction(r.functions[l]);const s={};for(const l in n.properties){const u=n.properties[l],f=c=>{const d=c.get(u.name);return u.type===Tl?wYe([...W2(d||"#eee")]):typeof d=="string"?cb(d):typeof d=="boolean"?d?1:0:d};s[`prop_${u.name}`]={size:ZM(u.type),callback:f}}function a(l,u,f,c){const d=n[l],h=r[l];if(!d&&!h)return;const p=JS(f),m=ZM(f);i.addAttribute(`${p} a_${u}`),h&&i.addVarying(`v_${u}`,p,`a_${u}`),s[u]={size:m,callback:c}}return a("geometryType",Q3e,Y2,l=>cb(xje(l.getGeometry()))),a("featureId",J3e,Y2|Si,l=>{const u=l.getId()??null;return typeof u=="string"?cb(u):u}),{builder:i,attributes:s,uniforms:o}}class TYe extends y${constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.parseResult_=nke(t.style,this.styleVariables_),this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map(n=>({name:n,...this.parseResult_.attributes[n]}));return new X3e(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}function F1e(e,t){const n=`
    attribute vec2 ${pC.TEXTURE_COORD};
    uniform mat4 ${Qn.TILE_TRANSFORM};
    uniform float ${Qn.TEXTURE_PIXEL_WIDTH};
    uniform float ${Qn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Qn.TEXTURE_RESOLUTION};
    uniform float ${Qn.TEXTURE_ORIGIN_X};
    uniform float ${Qn.TEXTURE_ORIGIN_Y};
    uniform float ${Qn.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${pC.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Qn.TEXTURE_ORIGIN_X} + ${Qn.TEXTURE_RESOLUTION} * ${Qn.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Qn.TEXTURE_ORIGIN_Y} - ${Qn.TEXTURE_RESOLUTION} * ${Qn.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Qn.TILE_TRANSFORM} * vec4(${pC.TEXTURE_COORD}, ${Qn.DEPTH}, 1.0);
    }
  `,r={...XM(),inFragmentShader:!0,bandCount:t},i=[];if(e.color!==void 0){const c=jn(r,e.color,Tl);i.push(`color = ${c};`)}if(e.contrast!==void 0){const c=jn(r,e.contrast,Si);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb - (${c} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.exposure!==void 0){const c=jn(r,e.exposure,Si);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.saturation!==void 0){const c=jn(r,e.saturation,Si);i.push(`
      float saturation = ${c} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(e.gamma!==void 0){const c=jn(r,e.gamma,Si);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${c}));`)}if(e.brightness!==void 0){const c=jn(r,e.brightness,Si);i.push(`color.rgb = clamp(color.rgb + ${c}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const o={},s=Object.keys(r.variables).length;if(s>1&&!e.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let c=0;c<s;++c){const d=r.variables[Object.keys(r.variables)[c]];if(!(d.name in e.variables))throw new Error(`Missing '${d.name}' in style variables`);const h=W$(d.name);o[h]=function(){let p=e.variables[d.name];return typeof p=="string"&&(p=cb(p)),p!==void 0?p:-9999999}}const a=Object.keys(o).map(function(c){return`uniform float ${c};`}),l=Math.ceil(t/4);a.push(`uniform sampler2D ${Qn.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${K3e}[${r.paletteTextures.length}];`);const u=Object.keys(r.functions).map(function(c){return r.functions[c]}),f=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Qn.RENDER_EXTENT};
    uniform float ${Qn.TRANSITION_ALPHA};
    uniform float ${Qn.TEXTURE_PIXEL_WIDTH};
    uniform float ${Qn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Qn.RESOLUTION};
    uniform float ${Qn.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Qn.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Qn.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Qn.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Qn.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Qn.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Qn.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:f,uniforms:o,paletteTextures:r.paletteTextures}}class w3 extends _je{constructor(t){t=t?Object.assign({},t):{};const n=t.style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(NM.SOURCE,this.handleSourceUpdate_)}getSources(t,n){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const t=this.getSource();if(t)if(t.getState()==="loading"){const n=()=>{t.getState()==="ready"&&(t.removeEventListener("change",n),this.setStyle(this.style_))};t.addEventListener("change",n)}else this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const t=F1e(this.style_,this.getSourceBandCount_());return new uYe(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,n){const r=this.getRenderer();let i;for(let o=0,s=n.length;o<s;++o)this.renderedSource_=n[o],r.prepareFrame(t)&&(i=r.renderFrame(t));return i}render(t,n){this.rendered=!0;const r=t.viewState,i=this.getSources(t.extent,r.resolution);let o=!0;for(let a=0,l=i.length;a<l;++a){const u=i[a],f=u.getState();if(f=="loading"){const c=()=>{u.getState()=="ready"&&(u.removeEventListener("change",c),this.changed())};u.addEventListener("change",c)}o=o&&f=="ready"}const s=this.renderSources(t,i);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=r.resolution,s;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(t.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(a.length>0)return this.renderSources(t,a)}return s}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const n=F1e(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}w3.prototype.dispose;class DYe{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(t,n){for(let r=0;r<t.length;r++)this.addFeature(t[r],n)}addFeature(t,n){let r=t.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,t))}clearFeatureEntryInPointBatch_(t){const n=Ei(t),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(t){const n=Ei(t),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(t){const n=Ei(t),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(t,n){var i;const r=t.getType();switch(r){case"GeometryCollection":{const o=t.getGeometriesArray();for(const s of o)this.addGeometry_(s,n);break}case"MultiPolygon":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),o.getEndss(),n,Ei(n),o.getStride());break}case"MultiLineString":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),o.getEnds(),n,Ei(n),o.getStride());break}case"MultiPoint":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),null,n,Ei(n),o.getStride());break}case"Polygon":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),o.getEnds(),n,Ei(n),o.getStride());break}case"Point":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),null,n,Ei(n),o.getStride());break}case"LineString":case"LinearRing":{const o=t,s=o.getStride();this.addCoordinates_(r,o.getFlatCoordinates(),null,n,Ei(n),s,(i=o.getLayout)==null?void 0:i.call(o));break}}}addCoordinates_(t,n,r,i,o,s,a){let l;switch(t){case"MultiPolygon":{const u=r;for(let f=0,c=u.length;f<c;f++){let d=u[f];const h=f>0?u[f-1]:null,p=h?h[h.length-1]:0,m=d[d.length-1];d=p>0?d.map(b=>b-p):d,this.addCoordinates_("Polygon",n.slice(p,m),d,i,o,s,a)}break}case"MultiLineString":{const u=r;for(let f=0,c=u.length;f<c;f++){const d=f>0?u[f-1]:0;this.addCoordinates_("LineString",n.slice(d,u[f]),null,i,o,s,a)}break}case"MultiPoint":for(let u=0,f=n.length;u<f;u+=s)this.addCoordinates_("Point",n.slice(u,u+2),null,i,o,null,null);break;case"Polygon":{const u=r;if(i instanceof Eje){const d=Sje(n,u);if(d.length>1){this.addCoordinates_("MultiPolygon",n,d,i,o,s,a);return}}this.polygonBatch.entries[o]||(this.polygonBatch.entries[o]=this.addRefToEntry_(o,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/s;const f=r.length,c=r.map((d,h,p)=>h>0?(d-p[h-1])/s:d/s);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=f,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[o].flatCoordss.push(LYe(n,s)),this.polygonBatch.entries[o].ringsVerticesCounts.push(c),this.polygonBatch.entries[o].verticesCount+=l,this.polygonBatch.entries[o].ringsCount+=f;for(let d=0,h=u.length;d<h;d++){const p=d>0?u[d-1]:0;this.addCoordinates_("LinearRing",n.slice(p,u[d]),null,i,o,s,a)}break}case"Point":this.pointBatch.entries[o]||(this.pointBatch.entries[o]=this.addRefToEntry_(o,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[o].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[o]||(this.lineStringBatch.entries[o]=this.addRefToEntry_(o,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/s,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[o].flatCoordss.push(RYe(n,s,a)),this.lineStringBatch.entries[o].verticesCount+=l;break}}addRefToEntry_(t,n){const r=this.uidToRef_.get(t),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(t,i)),n}returnRef_(t,n){if(!t)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(t),this.uidToRef_.delete(n),this.freeGlobalRef_.push(t)}changeFeature(t){this.removeFeature(t);const n=t.getGeometry();n&&this.addGeometry_(n,t)}removeFeature(t){let n;n=this.clearFeatureEntryInPointBatch_(t)||n,n=this.clearFeatureEntryInPolygonBatch_(t)||n,n=this.clearFeatureEntryInLineStringBatch_(t)||n,n&&this.returnRef_(n.ref,Ei(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(t){return this.refToFeature_.get(t)}}function LYe(e,t){return t===2?e:e.filter((n,r)=>r%t<2)}function RYe(e,t,n){return t===3&&n==="XYM"?e:t===4?e.filter((r,i)=>i%t!==2):t===3?e.map((r,i)=>i%t!==2?r:0):new Array(e.length*1.5).fill(0).map((r,i)=>i%3===2?0:e[Math.round(i/1.5)])}function J$(e,t,n,r){let i=0;for(const o in t){const s=t[o],a=s.callback.call(n,n.feature);e[r+i++]=a[0]??a,!(!s.size||s.size===1)&&(e[r+i++]=a[1],!(s.size<3)&&(e[r+i++]=a[2],!(s.size<4)&&(e[r+i++]=a[3])))}return i}function ED(e){return Object.keys(e).reduce((t,n)=>t+(e[n].size||1),0)}function FYe(e,t,n,r){const i=(2+ED(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const o=[];let s=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++)o[0]=l.flatCoordss[u][0],o[1]=l.flatCoordss[u][1],eh(r,o),t[s++]=o[0],t[s++]=o[1],s+=J$(t,n,l,s)}return t}function MYe(e,t,n,r){const i=3*e.verticesCount+(1+ED(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const o=[];let s=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){o.length=l.flatCoordss[u].length,MCe(l.flatCoordss[u],0,o.length,3,r,o,3),s+=J$(t,n,l,s),t[s++]=o.length/3;for(let c=0,d=o.length;c<d;c+=3)t[s++]=o[c],t[s++]=o[c+1],t[s++]=o[c+2]}}return t}function OYe(e,t,n,r){const i=2*e.verticesCount+(1+ED(n))*e.geometriesCount+e.ringsCount;(!t||t.length!==i)&&(t=new Float32Array(i));const o=[];let s=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){o.length=l.flatCoordss[u].length,MCe(l.flatCoordss[u],0,o.length,2,r,o),s+=J$(t,n,l,s),t[s++]=l.ringsVerticesCounts[u].length;for(let c=0,d=l.ringsVerticesCounts[u].length;c<d;c++)t[s++]=l.ringsVerticesCounts[u][c];for(let c=0,d=o.length;c<d;c+=2)t[s++]=o[c],t[s++]=o[c+1]}}return t}const $Ye=[],rF=W3e();let IYe=0;const nf={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class PYe{constructor(t,n,r,i){this.helper_,this.hitDetectionEnabled_=i;let o=t;if(!("builder"in t)){const u=nke(t,n);o={builder:u.builder,attributes:u.attributes,uniforms:u.uniforms}}this.fillProgram_,this.strokeProgram_,this.symbolProgram_,this.hasFill_=!!o.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=o.builder.getFillVertexShader(),this.fillFragmentShader_=o.builder.getFillFragmentShader()),this.hasStroke_=!!o.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=o.builder.getStrokeVertexShader(),this.strokeFragmentShader_=o.builder.getStrokeFragmentShader()),this.hasSymbol_=!!o.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=o.builder.getSymbolVertexShader(),this.symbolFragmentShader_=o.builder.getSymbolFragmentShader());const a=this.hitDetectionEnabled_?{hitColor:{callback(){return G3e(this.ref,$Ye)},size:4}}:{};this.customAttributes_=Object.assign({},a,o.attributes),this.uniforms_=o.uniforms;const l=Object.entries(this.customAttributes_).map(([u,f])=>({name:`a_${u}`,size:f.size||1,type:Io.FLOAT}));this.polygonAttributesDesc_=[{name:nf.POSITION,size:2,type:Io.FLOAT},...l],this.lineStringAttributesDesc_=[{name:nf.SEGMENT_START,size:2,type:Io.FLOAT},{name:nf.MEASURE_START,size:1,type:Io.FLOAT},{name:nf.SEGMENT_END,size:2,type:Io.FLOAT},{name:nf.MEASURE_END,size:1,type:Io.FLOAT},{name:nf.JOIN_ANGLES,size:2,type:Io.FLOAT},{name:nf.DISTANCE,size:1,type:Io.FLOAT},{name:nf.PARAMETERS,size:1,type:Io.FLOAT},...l],this.pointAttributesDesc_=[{name:nf.POSITION,size:2,type:Io.FLOAT},{name:nf.INDEX,size:1,type:Io.FLOAT},...l],this.setHelper(r)}async generateBuffers(t,n){const r=this.generateRenderInstructions_(t,n),[i,o,s]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=V2(Ks(),n);return{polygonBuffers:i,lineStringBuffers:o,pointBuffers:s,invertVerticesTransform:a}}generateRenderInstructions_(t,n){const r=this.hasFill_?OYe(t.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?MYe(t.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,o=this.hasSymbol_?FYe(t.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:o}}generateBuffersForType_(t,n,r){if(t===null)return null;const i=IYe++;let o;switch(n){case"Polygon":o=g2.GENERATE_POLYGON_BUFFERS;break;case"LineString":o=g2.GENERATE_LINE_STRING_BUFFERS;break;case"Point":o=g2.GENERATE_POINT_BUFFERS;break}const s={id:i,type:o,renderInstructions:t.buffer,renderInstructionsTransform:r,customAttributesSize:ED(this.customAttributes_)};return rF.postMessage(s,[t.buffer]),t=null,new Promise(a=>{const l=u=>{const f=u.data;if(f.id!==i||(rF.removeEventListener("message",l),!this.helper_.getGL()))return;const c=new Zb(oE,e_).fromArrayBuffer(f.vertexBuffer),d=new Zb(sE,e_).fromArrayBuffer(f.indexBuffer);this.helper_.flushBufferData(c),this.helper_.flushBufferData(d),a([d,c])};rF.addEventListener("message",l)})}render(t,n,r){this.hasFill_&&this.renderInternal_(t.polygonBuffers[0],t.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,n,r),this.hasStroke_&&this.renderInternal_(t.lineStringBuffers[0],t.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,n,r),this.hasSymbol_&&this.renderInternal_(t.pointBuffers[0],t.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,n,r)}renderInternal_(t,n,r,i,o,s){const a=t.getSize();a!==0&&(this.helper_.useProgram(r,o),this.helper_.bindBuffer(n),this.helper_.bindBuffer(t),this.helper_.enableAttributes(i),s(),this.helper_.drawElements(0,a))}setHelper(t,n=null){this.helper_=t,this.hasFill_&&(this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_&&(this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_&&(this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_)),this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1])))}}const My={...cf,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class NYe extends aE{constructor(t,n){const r={[My.RENDER_EXTENT]:[0,0,0,0],[My.PATTERN_ORIGIN]:[0,0],[My.GLOBAL_ALPHA]:1};super(t,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=aD(),this.currentTransform_=Ks(),this.tmpCoords_=[0,0],this.tmpTransform_=Ks(),this.tmpMat4_=c$(),this.currentFrameStateTransform_=Ks(),this.styleVariables_={},this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(n),this.batch_=new DYe,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(t){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[mp(n,yp.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),mp(n,yp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),mp(n,yp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),mp(n,yp.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(t){this.styleVariables_=t.variables,this.styles_=Array.isArray(t.style)?t.style:[t.style]}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map(t=>new PYe(t,this.styleVariables_,this.helper,this.hitDetectionEnabled_))}reset(t){this.applyOptions_(t),this.helper&&this.createRenderers_(),super.reset(t)}afterHelperCreated(){this.styleRenderers_.length?this.styleRenderers_.forEach((t,n)=>t.setHelper(this.helper,this.buffers_[n])):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new H3e(this.helper))}handleSourceFeatureAdded_(t,n){const r=n.feature;this.batch_.addFeature(r,t)}handleSourceFeatureChanged_(t){const n=t.feature;this.batch_.changeFeature(n)}handleSourceFeatureDelete_(t){const n=t.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(t){Aje(this.tmpTransform_,this.currentFrameStateTransform_),U2(this.tmpTransform_,t),this.helper.setUniformMatrixValue(My.PROJECTION_MATRIX,f3(this.tmpMat4_,this.tmpTransform_)),V2(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(My.SCREEN_TO_WORLD_MATRIX,f3(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,V2(this.tmpTransform_,t),eh(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(My.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,o]=Y3e(t,this.getLayer());this.helper.prepareDraw(t),this.renderWorlds(t,!1,r,i,o),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const s=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,o),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),s}prepareFrameInternal(t){this.initialFeaturesAdded_||(this.addInitialFeatures_(t),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=t.viewState,o=!t.viewHints[zp.ANIMATING]&&!t.viewHints[zp.INTERACTING],s=!H2(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),o&&(s||a)){const l=i.projection,u=i.resolution,f=n instanceof lD?n.getRenderBuffer():0,c=d$(t.extent,f*u);r.loadFeatures(c,u,l),this.ready=!1;const d=this.helper.makeProjectionTransform(t,Ks()),h=this.styleRenderers_.map((p,m)=>p.generateBuffers(this.batch_,d).then(b=>{this.buffers_[m]&&this.disposeBuffers(this.buffers_[m]),this.buffers_[m]=b}));Promise.all(h).then(()=>{this.ready=!0,this.getLayer().changed()}),this.previousExtent_=t.extent.slice()}return!0}renderWorlds(t,n,r,i,o){let s=r;n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0));do{this.helper.makeProjectionTransform(t,this.currentFrameStateTransform_),h$(this.currentFrameStateTransform_,s*o,0);for(let a=0,l=this.styleRenderers_.length;a<l;a++){const u=this.styleRenderers_[a],f=this.buffers_[a];f&&u.render(f,t,()=>{this.applyUniforms_(f.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)})}}while(++s<i)}forEachFeatureAtCoordinate(t,n,r,i,o){if(kc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const s=eh(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=V3e(l),f=this.batch_.getFeatureFromRef(u);if(f)return i(f,this.getLayer(),null)}disposeBuffers(t){t.pointBuffers&&t.pointBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),t.lineStringBuffers&&t.lineStringBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),t.polygonBuffers&&t.polygonBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n))}disposeInternal(){this.buffers_.forEach(t=>{this.disposeBuffers(t)}),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(t){kCe(t)}),this.sourceListenKeys_=null),super.disposeInternal()}}class BYe extends y${constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.style_=t.style,this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){return new NYe(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}setStyle(t){this.style=t,this.clearRenderer(),this.changed()}}const zYe=Object.freeze(Object.defineProperty({__proto__:null,Graticule:Kqe,Group:d3,Heatmap:yYe,Image:b$,Layer:y$,Tile:h3,Vector:o$,VectorImage:xYe,VectorTile:OCe,WebGLPoints:TYe,WebGLTile:w3,WebGLVector:BYe},Symbol.toStringTag,{value:"Module"}));function jYe(e){const t=e[0],n=new Array(t);let r=1<<t-1,i,o;for(i=0;i<t;++i)o=48,e[1]&r&&(o+=1),e[2]&r&&(o+=2),n[i]=String.fromCharCode(o),r>>=1;return n.join("")}const UYe='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class qYe extends hh{constructor(t){const n=t.hidpi!==void 0?t.hidpi:!1;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:si("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=n,this.culture_=t.culture!==void 0?t.culture:"en-us",this.maxZoom_=t.maxZoom!==void 0?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(i=>i.json()).then(i=>this.handleImageryMetadataResponse(i))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(t.statusCode!=200||t.statusDescription!="OK"||t.authenticationResultCode!="ValidCredentials"||t.resourceSets.length!=1||t.resourceSets[0].resources.length!=1){this.setState("error");return}const n=t.resourceSets[0].resources[0],r=this.maxZoom_==-1?n.zoomMax:this.maxZoom_,i=this.getProjection(),o=tE(i),s=this.hidpi_?2:1,a=n.imageWidth==n.imageHeight?n.imageWidth/s:[n.imageWidth/s,n.imageHeight/s],l=nE({extent:o,minZoom:n.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const u=this.culture_,f=this.hidpi_,c=this.placeholderTiles_;if(this.tileUrlFunction=v$(n.imageUrlSubdomains.map(function(d){const h=[0,0,0],p=n.imageUrl.replace("{subdomain}",d).replace("{culture}",u);return function(m,b,y){if(!m)return;BM(m[0],m[1],m[2],h);const v=new URL(p.replace("{quadkey}",jYe(h))),w=v.searchParams;return f&&(w.set("dpi","d1"),w.set("device","mobile")),c===!0?w.delete("n"):c===!1&&w.set("n","z"),v.toString()}})),n.imageryProviders){const d=x$(si("EPSG:4326"),this.getProjection());this.setAttributions(h=>{const p=[],m=h.viewState,b=this.getTileGrid(),y=b.getZForResolution(m.resolution,this.zDirection),w=b.getTileCoordForCoordAndZ(m.center,y)[0];return n.imageryProviders.map(function(E){let A=!1;const T=E.coverageAreas;for(let D=0,k=T.length;D<k;++D){const R=T[D];if(w>=R.zoomMin&&w<=R.zoomMax){const M=R.bbox,B=[M[1],M[0],M[3],M[2]],K=Vb(B,d);if(Gb(K,h.extent)){A=!0;break}}}A&&p.push(E.attribution)}),p.push(UYe),p})}this.setState("ready")}}class HYe extends X2{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:t.maxZoom!==void 0?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_);if(this.templateCache_[t]){this.applyTemplate_(this.templateCache_[t]);return}let n="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(n+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",n),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(t,n){const r=n.target;if(!r.status||r.status>=200&&r.status<300){let i;try{i=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(i),this.templateCache_[t]=i,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const n="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)}}class GYe extends J_{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(n){const r=n.getGeometry();return kc(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,n,r){var i;(i=this.source)==null||i.loadFeatures(t,n,r),n!==this.resolution&&(this.resolution=n,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(kl.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(kl.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,n){const r=t===0?0:Math.min(n,t)/t,i=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=n,this.interpolationRatio=r,i&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=aD(),n=this.distance*this.resolution,r=this.source.getFeatures(),i={};for(let o=0,s=r.length;o<s;o++){const a=r[o];if(!(Ei(a)in i)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();Cje(u,t),d$(t,n,t);const f=this.source.getFeaturesInExtent(t).filter(function(c){const d=Ei(c);return d in i?!1:(i[d]=!0,!0)});this.features.push(this.createCluster(f,t))}}}}createCluster(t,n){const r=[0,0];for(let a=t.length-1;a>=0;--a){const l=this.geometryFunction(t[a]);l?kje(r,l.getCoordinates()):t.splice(a,1)}Tje(r,1/t.length);const i=Dp(n),o=this.interpolationRatio,s=new gc([r[0]*(1-o)+i[0]*o,r[1]*(1-o)+i[1]*o]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new au({geometry:s,features:t})}}class lE extends uD{constructor(t){const n=t.projection===void 0?"EPSG:3857":t.projection;let r=t.tileGrid;r===void 0&&n&&(r=nE({extent:tE(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:n,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.tileSize_=t.tileSize?wc(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=t.bandCount===void 0?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?wc(n.getTileSize(t)):[256,256]}getGutterForProjection(t){const n=this.getProjection();return(!n||hC(n,t))&&!this.transformMatrix?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,n,r,i,o){const s=this.tileGrid||this.getTileGridForProjection(o||i),a=Math.max.apply(null,s.getResolutions().map((h,p)=>{const m=wc(s.getTileSize(p)),b=this.getTileSize(p);return Math.max(b[0]/m[0],b[1]/m[1])})),l=this.getTileGridForProjection(i),u=[t,n,r],f=this.getTileCoordForTileUrlFunction(u,i),c=Object.assign({sourceProj:o||i,sourceTileGrid:s,targetProj:i,targetTileGrid:l,tileCoord:u,wrappedTileCoord:f,pixelRatio:a,gutter:this.gutter_,getTileFunction:(h,p,m,b)=>this.getTile(h,p,m,b),transformMatrix:this.transformMatrix},this.tileOptions),d=new m$(c);return d.key=this.getKey(),d}getTile(t,n,r,i,o){var w;const s=this.getProjection();if(o&&(s&&!hC(s,o)||this.transformMatrix))return this.getReprojTile_(t,n,r,o,s);const a=this.getTileSize(t),l=this.loader_,u=new AbortController,f={signal:u.signal,crossOrigin:this.crossOrigin_},c=this.getTileCoordForTileUrlFunction([t,n,r]);if(!c)return null;const d=c[0],h=c[1],p=c[2],m=(w=this.getTileGrid())==null?void 0:w.getFullTileRange(d);m&&(f.maxY=m.getHeight()-1);function b(){return Rje(function(){return l(d,h,p,f)})}const y=Object.assign({tileCoord:[t,n,r],loader:b,size:a,controller:u},this.tileOptions),v=new TCe(y);return v.key=this.getKey(),v.addEventListener(kl.CHANGE,this.handleTileChange_),v}handleTileChange_(t){const n=t.target,r=Ei(n),i=n.getState();let o;i==Do.LOADING?(this.tileLoadingKeys_[r]=!0,o=WR.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==Do.ERROR?WR.TILELOADERROR:i==Do.LOADED?WR.TILELOADEND:void 0),o&&this.dispatchEvent(new Dje(o,n))}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||hC(n,t))&&!this.transformMatrix)return this.tileGrid;const r=Ei(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=Lje(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,n){const r=si(t);if(r){const i=Ei(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=n)}}}function sa(e){return(t,...n)=>VYe(e,t,n)}function X1(e,t){return sa(rke(e,t).get)}const{apply:VYe,construct:Bjt,defineProperty:zjt,get:jjt,getOwnPropertyDescriptor:rke,getPrototypeOf:Q$,has:Ujt,ownKeys:WYe,set:qjt,setPrototypeOf:Hjt}=Reflect,{iterator:uE,species:Gjt,toStringTag:YYe,for:Vjt}=Symbol,XYe=Object,{create:eI,defineProperty:ZYe,freeze:Wjt,is:Yjt}=XYe,KYe=Array,JYe=KYe.prototype,ike=JYe[uE],QYe=sa(ike),oke=ArrayBuffer,eXe=oke.prototype;X1(eXe,"byteLength");const M1e=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;M1e&&X1(M1e.prototype,"byteLength");const ske=Q$(Uint8Array);ske.from;const rl=ske.prototype;rl[uE];sa(rl.keys);sa(rl.values);sa(rl.entries);sa(rl.set);sa(rl.reverse);sa(rl.fill);sa(rl.copyWithin);sa(rl.sort);sa(rl.slice);sa(rl.subarray);X1(rl,"buffer");X1(rl,"byteOffset");X1(rl,"length");X1(rl,YYe);const tXe=Uint8Array,ake=Uint16Array,tI=Uint32Array,nXe=Float32Array,t_=Q$([][uE]()),lke=sa(t_.next),rXe=sa(function*(){}().next),iXe=Q$(t_),oXe=DataView.prototype,sXe=sa(oXe.getUint16),nI=WeakMap,uke=nI.prototype,cke=sa(uke.get),aXe=sa(uke.set),fke=new nI,lXe=eI(null,{next:{value:function(){const t=cke(fke,this);return lke(t)}},[uE]:{value:function(){return this}}});function uXe(e){if(e[uE]===ike&&t_.next===lke)return e;const t=eI(lXe);return aXe(fke,t,QYe(e)),t}const cXe=new nI,fXe=eI(iXe,{next:{value:function(){const t=cke(cXe,this);return rXe(t)},writable:!0,configurable:!0}});for(const e of WYe(t_))e!=="next"&&ZYe(fXe,e,rke(t_,e));const dke=new oke(4),dXe=new nXe(dke),hXe=new tI(dke),rf=new ake(512),of=new tXe(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(rf[e]=0,rf[e|256]=32768,of[e]=24,of[e|256]=24):t<-14?(rf[e]=1024>>-t-14,rf[e|256]=1024>>-t-14|32768,of[e]=-t-1,of[e|256]=-t-1):t<=15?(rf[e]=t+15<<10,rf[e|256]=t+15<<10|32768,of[e]=13,of[e|256]=13):t<128?(rf[e]=31744,rf[e|256]=64512,of[e]=24,of[e|256]=24):(rf[e]=31744,rf[e|256]=64512,of[e]=13,of[e|256]=13)}const rI=new tI(2048);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(t&8388608);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,rI[e]=t|n}for(let e=1024;e<2048;++e)rI[e]=939524096+(e-1024<<13);const Z1=new tI(64);for(let e=1;e<31;++e)Z1[e]=e<<23;Z1[31]=1199570944;Z1[32]=2147483648;for(let e=33;e<63;++e)Z1[e]=2147483648+(e-32<<23);Z1[63]=3347054592;const hke=new ake(64);for(let e=1;e<64;++e)e!==32&&(hke[e]=1024);function pXe(e){const t=e>>10;return hXe[0]=rI[hke[t]+(e&1023)]+Z1[t],dXe[0]}function pke(e,t,...n){return pXe(sXe(e,t,...uXe(n)))}var QS={exports:{}},O1e;function gXe(){if(O1e)return QS.exports;O1e=1;function e(t,n,r){const i=r&&r.debug||!1;i&&console.log("[xml-utils] getting "+n+" in "+t);const o=typeof t=="object"?t.outer:t,s=o.slice(0,o.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const u=a[l],f=n+"\\="+u+"([^"+u+"]*)"+u;i&&console.log("[xml-utils] pattern:",f);const d=new RegExp(f).exec(s);if(i&&console.log("[xml-utils] match:",d),d)return d[1]}}return QS.exports=e,QS.exports.default=e,QS.exports}var mXe=gXe();const iF=oa(mXe);var eA={exports:{}},tA={exports:{}},nA={exports:{}},$1e;function yXe(){if($1e)return nA.exports;$1e=1;function e(t,n,r){const o=new RegExp(n).exec(t.slice(r));return o?r+o.index:-1}return nA.exports=e,nA.exports.default=e,nA.exports}var rA={exports:{}},I1e;function bXe(){if(I1e)return rA.exports;I1e=1;function e(t,n,r){const o=new RegExp(n).exec(t.slice(r));return o?r+o.index+o[0].length-1:-1}return rA.exports=e,rA.exports.default=e,rA.exports}var iA={exports:{}},P1e;function vXe(){if(P1e)return iA.exports;P1e=1;function e(t,n){const r=new RegExp(n,"g"),i=t.match(r);return i?i.length:0}return iA.exports=e,iA.exports.default=e,iA.exports}var N1e;function xXe(){if(N1e)return tA.exports;N1e=1;const e=yXe(),t=bXe(),n=vXe();function r(i,o,s){const a=s&&s.debug||!1,l=!(s&&typeof s.nested===!1),u=s&&s.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",o," and ",s);const f=e(i,`<${o}[ 
>/]`,u);if(a&&console.log("[xml-utils] start:",f),f===-1)return;const c=i.slice(f+o.length);let d=t(c,"^[^<]*[ /]>",0);const h=d!==-1&&c[d-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",h),h===!1)if(l){let y=0,v=1,w=0;for(;(d=t(c,"[ /]"+o+">",y))!==-1;){const E=c.substring(y,d+1);if(v+=n(E,"<"+o+`[ 
	>]`),w+=n(E,"</"+o+">"),w>=v)break;y=d}}else d=t(c,"[ /]"+o+">",0);const p=f+o.length+d+1;if(a&&console.log("[xml-utils] end:",p),p===-1)return;const m=i.slice(f,p);let b;return h?b=null:b=m.slice(m.indexOf(">")+1,m.lastIndexOf("<")),{inner:b,outer:m,start:f,end:p}}return tA.exports=r,tA.exports.default=r,tA.exports}var B1e;function wXe(){if(B1e)return eA.exports;B1e=1;const e=xXe();function t(n,r,i){const o=[],s=i&&i.debug||!1,a=i&&typeof i.nested=="boolean"?i.nested:!0;let l=i&&i.startIndex||0,u;for(;u=e(n,r,{debug:s,startIndex:l});)a?l=u.start+1+r.length:l=u.end,o.push(u);return s&&console.log("findTagsByName found",o.length,"tags"),o}return eA.exports=t,eA.exports.default=t,eA.exports}var _Xe=wXe();const EXe=oa(_Xe),m2={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},lf={};for(const e in m2)m2.hasOwnProperty(e)&&(lf[m2[e]]=parseInt(e,10));const SXe=[lf.BitsPerSample,lf.ExtraSamples,lf.SampleFormat,lf.StripByteCounts,lf.StripOffsets,lf.StripRowCounts,lf.TileByteCounts,lf.TileOffsets,lf.SubIFDs],oF={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fr={};for(const e in oF)oF.hasOwnProperty(e)&&(fr[oF[e]]=parseInt(e,10));const yl={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},AXe={Unspecified:0,Assocalpha:1,Unassalpha:2},Xjt={Version:0,AddCompression:1},Zjt={None:0,Deflate:1,Zstandard:2},CXe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function kXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let o;for(let s=0,a=0;s<e.length;++s,a+=3)o=256-e[s]/t*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function TXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let o;for(let s=0,a=0;s<e.length;++s,a+=3)o=e[s]/t*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function DXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3),o=t.length/3,s=t.length/3*2;for(let a=0,l=0;a<e.length;++a,l+=3){const u=e[a];i[l]=t[u]/65536*256,i[l+1]=t[u+o]/65536*256,i[l+2]=t[u+s]/65536*256}return i}function LXe(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,o=0;i<e.length;i+=4,o+=3){const s=e[i],a=e[i+1],l=e[i+2],u=e[i+3];r[o]=255*((255-s)/256)*((255-u)/256),r[o+1]=255*((255-a)/256)*((255-u)/256),r[o+2]=255*((255-l)/256)*((255-u)/256)}return r}function RXe(e){const{width:t,height:n}=e,r=new Uint8ClampedArray(t*n*3);for(let i=0,o=0;i<e.length;i+=3,o+=3){const s=e[i],a=e[i+1],l=e[i+2];r[o]=s+1.402*(l-128),r[o+1]=s-.34414*(a-128)-.71414*(l-128),r[o+2]=s+1.772*(a-128)}return r}const FXe=.95047,MXe=1,OXe=1.08883;function $Xe(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,o=0;i<e.length;i+=3,o+=3){const s=e[i+0],a=e[i+1]<<24>>24,l=e[i+2]<<24>>24;let u=(s+16)/116,f=a/500+u,c=u-l/200,d,h,p;f=FXe*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),u=MXe*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),c=OXe*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),d=f*3.2406+u*-1.5372+c*-.4986,h=f*-.9689+u*1.8758+c*.0415,p=f*.0557+u*-.204+c*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,r[o]=Math.max(0,Math.min(1,d))*255,r[o+1]=Math.max(0,Math.min(1,h))*255,r[o+2]=Math.max(0,Math.min(1,p))*255}return r}const gke=new Map;function ag(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>gke.set(n,t))}async function mke(e){const t=gke.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const n=await t();return new n(e)}ag([void 0,1],()=>sg(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default));ag(5,()=>sg(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1]),import.meta.url).then(e=>e.default));ag(6,()=>{throw new Error("old style JPEG compression is not supported.")});ag(7,()=>sg(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1]),import.meta.url).then(e=>e.default));ag([8,32946],()=>sg(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(e=>e.default));ag(32773,()=>sg(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1]),import.meta.url).then(e=>e.default));ag(34887,()=>sg(()=>import("./lerc-DwEsmuXm.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url).then(async e=>(await e.zstd.init(),e)).then(e=>e.default));ag(50001,()=>sg(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([20,1]),import.meta.url).then(e=>e.default));function SD(e,t,n,r=1){return new(Object.getPrototypeOf(e)).constructor(t*n*r)}function IXe(e,t,n,r,i){const o=t/r,s=n/i;return e.map(a=>{const l=SD(a,r,i);for(let u=0;u<i;++u){const f=Math.min(Math.round(s*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(o*c),t-1),h=a[f*t+d];l[u*r+c]=h}}return l})}function Eb(e,t,n){return(1-n)*e+n*t}function PXe(e,t,n,r,i){const o=t/r,s=n/i;return e.map(a=>{const l=SD(a,r,i);for(let u=0;u<i;++u){const f=s*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let h=0;h<r;++h){const p=o*h,m=p%1,b=Math.floor(p),y=Math.min(Math.ceil(p),t-1),v=a[c*t+b],w=a[c*t+y],E=a[d*t+b],A=a[d*t+y],T=Eb(Eb(v,w,m),Eb(E,A,m),f%1);l[u*r+h]=T}}return l})}function NXe(e,t,n,r,i,o="nearest"){switch(o.toLowerCase()){case"nearest":return IXe(e,t,n,r,i);case"bilinear":case"linear":return PXe(e,t,n,r,i);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function BXe(e,t,n,r,i,o){const s=t/r,a=n/i,l=SD(e,r,i,o);for(let u=0;u<i;++u){const f=Math.min(Math.round(a*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(s*c),t-1);for(let h=0;h<o;++h){const p=e[f*t*o+d*o+h];l[u*r*o+c*o+h]=p}}}return l}function zXe(e,t,n,r,i,o){const s=t/r,a=n/i,l=SD(e,r,i,o);for(let u=0;u<i;++u){const f=a*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let h=0;h<r;++h){const p=s*h,m=p%1,b=Math.floor(p),y=Math.min(Math.ceil(p),t-1);for(let v=0;v<o;++v){const w=e[c*t*o+b*o+v],E=e[c*t*o+y*o+v],A=e[d*t*o+b*o+v],T=e[d*t*o+y*o+v],D=Eb(Eb(w,E,m),Eb(A,T,m),f%1);l[u*r*o+h*o+v]=D}}}return l}function jXe(e,t,n,r,i,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return BXe(e,t,n,r,i,o);case"bilinear":case"linear":return zXe(e,t,n,r,i,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function UXe(e,t,n){let r=0;for(let i=t;i<n;++i)r+=e[i];return r}function KM(e,t,n){switch(e){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(t===8)return new Int8Array(n);if(t===16)return new Int16Array(n);if(t===32)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function qXe(e,t){return(e===1||e===2)&&t<=32&&t%8===0?!1:!(e===3&&(t===16||t===32||t===64))}function HXe(e,t,n,r,i,o,s){const a=new DataView(e),l=n===2?s*o:s*o*r,u=n===2?1:r,f=KM(t,i,l),c=parseInt("1".repeat(i),2);if(t===1){let d;n===1?d=r*i:d=i;let h=o*d;h&7&&(h=h+7&-8);for(let p=0;p<s;++p){const m=p*h;for(let b=0;b<o;++b){const y=m+b*u*i;for(let v=0;v<u;++v){const w=y+v*i,E=(p*o+b)*u+v,A=Math.floor(w/8),T=w%8;if(T+i<=8)f[E]=a.getUint8(A)>>8-i-T&c;else if(T+i<=16)f[E]=a.getUint16(A)>>16-i-T&c;else if(T+i<=24){const D=a.getUint16(A)<<8|a.getUint8(A+2);f[E]=D>>24-i-T&c}else f[E]=a.getUint32(A)>>32-i-T&c}}}}return f.buffer}class yke{constructor(t,n,r,i,o,s){this.fileDirectory=t,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!t.StripOffsets;const a=t.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,o){return pke(this,i,o)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,n){const r=this.getSampleFormat(t),i=this.getBitsPerSample(t);return KM(r,i,n)}async getTileOrStrip(t,n,r,i,o){const s=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=n*s+t:this.planarConfiguration===2&&(l=r*s*a+n*s+t);let f,c;this.isTiled?(f=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:f,length:c}],o))[0];let h;return u===null||!u[l]?(h=(async()=>{let p=await i.decode(this.fileDirectory,d);const m=this.getSampleFormat(),b=this.getBitsPerSample();return qXe(m,b)&&(p=HXe(p,m,this.planarConfiguration,this.getSamplesPerPixel(),b,this.getTileWidth(),this.getBlockHeight(n))),p})(),u!==null&&(u[l]=h)):h=u[l],{x:t,y:n,sample:r,data:await h}}async _readRaster(t,n,r,i,o,s,a,l,u){const f=this.getTileWidth(),c=this.getTileHeight(),d=this.getWidth(),h=this.getHeight(),p=Math.max(Math.floor(t[0]/f),0),m=Math.min(Math.ceil(t[2]/f),Math.ceil(d/f)),b=Math.max(Math.floor(t[1]/c),0),y=Math.min(Math.ceil(t[3]/c),Math.ceil(h/c)),v=t[2]-t[0];let w=this.getBytesPerPixel();const E=[],A=[];for(let k=0;k<n.length;++k)this.planarConfiguration===1?E.push(UXe(this.fileDirectory.BitsPerSample,0,n[k])/8):E.push(0),A.push(this.getReaderForSample(n[k]));const T=[],{littleEndian:D}=this;for(let k=b;k<y;++k)for(let R=p;R<m;++R){let M;this.planarConfiguration===1&&(M=this.getTileOrStrip(R,k,0,o,u));for(let B=0;B<n.length;++B){const K=B,L=n[B];this.planarConfiguration===2&&(w=this.getSampleByteSize(L),M=this.getTileOrStrip(R,k,L,o,u));const $=M.then(I=>{const U=I.data,q=new DataView(U),Y=this.getBlockHeight(I.y),X=I.y*c,te=I.x*f,le=X+Y,ee=(I.x+1)*f,z=A[K],he=Math.min(Y,Y-(le-t[3]),h-X),de=Math.min(f,f-(ee-t[2]),d-te);for(let ze=Math.max(0,t[1]-X);ze<he;++ze)for(let He=Math.max(0,t[0]-te);He<de;++He){const je=(ze*f+He)*w,we=z.call(q,je+E[K],D);let Ie;i?(Ie=(ze+X-t[1])*v*n.length+(He+te-t[0])*n.length+K,r[Ie]=we):(Ie=(ze+X-t[1])*v+He+te-t[0],r[K][Ie]=we)}});T.push($)}}if(await Promise.all(T),s&&t[2]-t[0]!==s||a&&t[3]-t[1]!==a){let k;return i?k=jXe(r,t[2]-t[0],t[3]-t[1],s,a,n.length,l):k=NXe(r,t[2]-t[0],t[3]-t[1],s,a,l),k.width=s,k.height=a,k}return r.width=s||t[2]-t[0],r.height=a||t[3]-t[1],r}async readRasters({window:t,samples:n=[],interleave:r,pool:i=null,width:o,height:s,resampleMethod:a,fillValue:l,signal:u}={}){const f=t||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");const c=f[2]-f[0],d=f[3]-f[1],h=c*d,p=this.getSamplesPerPixel();if(!n||!n.length)for(let v=0;v<p;++v)n.push(v);else for(let v=0;v<n.length;++v)if(n[v]>=p)return Promise.reject(new RangeError(`Invalid sample index '${n[v]}'.`));let m;if(r){const v=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,w=Math.max.apply(null,this.fileDirectory.BitsPerSample);m=KM(v,w,h*n.length),l&&m.fill(l)}else{m=[];for(let v=0;v<n.length;++v){const w=this.getArrayForSample(n[v],h);Array.isArray(l)&&v<l.length?w.fill(l[v]):l&&!Array.isArray(l)&&w.fill(l),m.push(w)}}const b=i||await mke(this.fileDirectory);return await this._readRaster(f,n,m,r,b,o,s,a,u)}async readRGB({window:t,interleave:n=!0,pool:r=null,width:i,height:o,resampleMethod:s,enableAlpha:a=!1,signal:l}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const f=this.fileDirectory.PhotometricInterpretation;if(f===yl.RGB){let y=[0,1,2];if(this.fileDirectory.ExtraSamples!==AXe.Unspecified&&a){y=[];for(let v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)y.push(v)}return this.readRasters({window:t,interleave:n,samples:y,pool:r,width:i,height:o,resampleMethod:s,signal:l})}let c;switch(f){case yl.WhiteIsZero:case yl.BlackIsZero:case yl.Palette:c=[0];break;case yl.CMYK:c=[0,1,2,3];break;case yl.YCbCr:case yl.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:u,interleave:!0,samples:c,pool:r,width:i,height:o,resampleMethod:s,signal:l},{fileDirectory:h}=this,p=await this.readRasters(d),m=2**this.fileDirectory.BitsPerSample[0];let b;switch(f){case yl.WhiteIsZero:b=kXe(p,m);break;case yl.BlackIsZero:b=TXe(p,m);break;case yl.Palette:b=DXe(p,h.ColorMap);break;case yl.CMYK:b=LXe(p);break;case yl.YCbCr:b=RXe(p);break;case yl.CIELab:b=$Xe(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const y=new Uint8Array(b.length/3),v=new Uint8Array(b.length/3),w=new Uint8Array(b.length/3);for(let E=0,A=0;E<b.length;E+=3,++A)y[A]=b[E],v[A]=b[E+1],w[A]=b[E+2];b=[y,v,w]}return b.width=p.width,b.height=p.height,b}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}getGDALMetadata(t=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=EXe(r,"Item");t===null?i=i.filter(o=>iF(o,"sample")===void 0):i=i.filter(o=>Number(iF(o,"sample"))===t);for(let o=0;o<i.length;++o){const s=i[o];n[iF(s,"name")]=s.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[i,o,s]=t.getResolution();return[i*t.getWidth()/this.getWidth(),o*t.getHeight()/this.getHeight(),s*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const n=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[i,o,s,a,l,u,f,c]=this.fileDirectory.ModelTransformation,h=[[0,0],[0,n],[r,0],[r,n]].map(([b,y])=>[a+i*b+o*y,c+l*b+u*y]),p=h.map(b=>b[0]),m=h.map(b=>b[1]);return[Math.min(...p),Math.min(...m),Math.max(...p),Math.max(...m)]}else{const i=this.getOrigin(),o=this.getResolution(),s=i[0],a=i[1],l=s+o[0]*r,u=a+o[1]*n;return[Math.min(s,l),Math.min(a,u),Math.max(s,l),Math.max(a,u)]}}}class GXe{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,n){const r=this.getUint32(t,n),i=this.getUint32(t+4,n);let o;if(n){if(o=r+2**32*i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(t,n){let r=0;const i=(this._dataView.getUint8(t+(n?7:0))&128)>0;let o=!0;for(let s=0;s<8;s++){let a=this._dataView.getUint8(t+(n?s:7-s));i&&(o?a!==0&&(a=~(a-1)&255,o=!1):a=~a&255),r+=a*256**s}return i&&(r=-r),r}getUint8(t,n){return this._dataView.getUint8(t,n)}getInt8(t,n){return this._dataView.getInt8(t,n)}getUint16(t,n){return this._dataView.getUint16(t,n)}getInt16(t,n){return this._dataView.getInt16(t,n)}getUint32(t,n){return this._dataView.getUint32(t,n)}getInt32(t,n){return this._dataView.getInt32(t,n)}getFloat16(t,n){return pke(this._dataView,t,n)}getFloat32(t,n){return this._dataView.getFloat32(t,n)}getFloat64(t,n){return this._dataView.getFloat64(t,n)}}class VXe{constructor(t,n,r,i){this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const n=this.readUint32(t),r=this.readUint32(t+4);let i;if(this._littleEndian){if(i=n+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*n+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let n=0;const r=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let i=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(this._littleEndian?o:7-o));r&&(i?s!==0&&(s=~(s-1)&255,i=!1):s=~s&255),n+=s*256**o}return r&&(n=-n),n}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const WXe=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class YXe{constructor(t=WXe,n){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(r=>{sg(()=>import("./decoder-CaSv2t6h.js"),[],import.meta.url).then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:r(),idle:!0})}))}async decode(t,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?mke(t).then(r=>r.decode(t,n)):new Promise(r=>{const i=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const o=this.messageId++,s=a=>{a.data.id===o&&(i.idle=!0,r(a.data.decoded),i.worker.removeEventListener("message",s))};i.worker.addEventListener("message",s),i.worker.postMessage({fileDirectory:t,buffer:n,id:o},[n])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const z1e=`\r
\r
`;function bke(e){if(typeof Object.fromEntries<"u")return Object.fromEntries(e);const t={};for(const[n,r]of e)t[n.toLowerCase()]=r;return t}function XXe(e){const t=e.split(`\r
`).map(n=>{const r=n.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return bke(t)}function ZXe(e){const[t,...n]=e.split(";").map(i=>i.trim()),r=n.map(i=>i.split("="));return{type:t,params:bke(r)}}function JM(e){let t,n,r;return e&&([,t,n,r]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10)),{start:t,end:n,total:r}}function KXe(e,t){let n=null;const r=new TextDecoder("ascii"),i=[],o=`--${t}`,s=`${o}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(e,a,o.length))===o&&(n=a);if(n===null)throw new Error("Could not find initial boundary");for(;n<e.byteLength;){const a=r.decode(new Uint8Array(e,n,Math.min(o.length+1024,e.byteLength-n)));if(a.length===0||a.startsWith(s))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");const l=a.substr(o.length+2);if(l.length===0)break;const u=l.indexOf(z1e),f=XXe(l.substr(0,u)),{start:c,end:d,total:h}=JM(f["content-range"]),p=n+o.length+u+z1e.length,m=parseInt(d,10)+1-parseInt(c,10);i.push({headers:f,data:e.slice(p,p+m),offset:c,length:m,fileSize:h}),n=p+m+4}return i}class iI{async fetch(t,n=void 0){return Promise.all(t.map(r=>this.fetchSlice(r,n)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class JXe extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[n,r]of t)this.onEviction(n,r.value)}_deleteIfExpired(t,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,n.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,n){if(this._deleteIfExpired(t,n)===!1)return n.value}_getItemValue(t,n){return n.expiry?this._getOrDeleteIfExpired(t,n):n.value}_peek(t,n){const r=n.get(t);return this._getItemValue(t,r)}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,n){this.oldCache.delete(t),this._set(t,n)}*_entriesAscending(){for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield t)}for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const n=this.cache.get(t);return this._getItemValue(t,n)}if(this.oldCache.has(t)){const n=this.oldCache.get(t);if(this._deleteIfExpired(t,n)===!1)return this._moveToRecent(t,n),n.value}}set(t,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:n,expiry:i}):this._set(t,{value:n,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-t;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let t=[...this.cache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,o]=r;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}t=[...this.oldCache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,o]=r;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(const[t,n]of this._entriesAscending())yield[t,n.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,n=this){for(const[r,i]of this.entriesAscending())t.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function QXe(e){return new Promise(t=>setTimeout(t,e))}function eZe(e,t){const n=Array.isArray(e)?e:Array.from(e),r=Array.isArray(t)?t:Array.from(t);return n.map((i,o)=>[i,r[o]])}class Kb extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Kb),this.name="AbortError"}}class tZe extends Error{constructor(t,n){super(n),this.errors=t,this.message=n,this.name="AggregateError"}}const nZe=tZe;class rZe{constructor(t,n,r=null){this.offset=t,this.length=n,this.data=r}get top(){return this.offset+this.length}}class j1e{constructor(t,n,r){this.offset=t,this.length=n,this.blockIds=r}}class iZe extends iI{constructor(t,{blockSize:n=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=n,this.blockCache=new JXe({maxSize:r,onEviction:(i,o)=>{this.evictedBlocks.set(i,o)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,n){const r=[],i=[],o=[];this.evictedBlocks.clear();for(const{offset:d,length:h}of t){let p=d+h;const{fileSize:m}=this;m!==null&&(p=Math.min(p,m));const b=Math.floor(d/this.blockSize)*this.blockSize;for(let y=b;y<p;y+=this.blockSize){const v=Math.floor(y/this.blockSize);!this.blockCache.has(v)&&!this.blockRequests.has(v)&&(this.blockIdsToFetch.add(v),i.push(v)),this.blockRequests.has(v)&&r.push(this.blockRequests.get(v)),o.push(v)}}await QXe(),this.fetchBlocks(n);const s=[];for(const d of i)this.blockRequests.has(d)&&s.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(s);const a=[],l=o.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const d of l){const h=this.blockRequests.get(d);if(!h)throw new Error(`Block ${d} is not in the block requests`);a.push(h)}await Promise.allSettled(a)}if(n&&n.aborted)throw new Kb("Request was aborted");const u=o.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),f=u.filter(d=>!d);if(f.length)throw new nZe(f,"Request failed");const c=new Map(eZe(o,u));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(n,t);for(let i=0;i<n.length;++i){const o=n[i];for(const s of o.blockIds)this.blockRequests.set(s,(async()=>{try{const a=(await r)[i],l=s*this.blockSize,u=l-a.offset,f=Math.min(u+this.blockSize,a.data.byteLength),c=a.data.slice(u,f),d=new rZe(l,c.byteLength,c,s);this.blockCache.set(s,d),this.abortedBlockIds.delete(s)}catch(a){if(a.name==="AbortError")a.signal=t,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw a}finally{this.blockRequests.delete(s)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const n=Array.from(t).sort((s,a)=>s-a);if(n.length===0)return[];let r=[],i=null;const o=[];for(const s of n)i===null||i+1===s?(r.push(s),i=s):(o.push(new j1e(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],i=s);return o.push(new j1e(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(t,n){return t.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const o=Math.floor(r.offset/this.blockSize),s=Math.floor(i/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let u=o;u<=s;++u){const f=n.get(u),c=f.offset-r.offset,d=f.top-i;let h=0,p=0,m;c<0?h=-c:c>0&&(p=c),d<0?m=f.length-h:m=i-f.offset-h;const b=new Uint8Array(f.data,h,m);l.set(b,p)}return a})}}class oI{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class sI{constructor(t){this.url=t}async request({headers:t,signal:n}={}){throw new Error("request is not implemented")}}class oZe extends oI{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class sZe extends sI{constructor(t,n){super(t),this.credentials=n}async request({headers:t,signal:n}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:n});return new oZe(r)}}class aZe extends oI{constructor(t,n){super(),this.xhr=t,this.data=n}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class lZe extends sI{constructRequest(t,n){return new Promise((r,i)=>{const o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(const[s,a]of Object.entries(t))o.setRequestHeader(s,a);o.onload=()=>{const s=o.response;r(new aZe(o,s))},o.onerror=i,o.onabort=()=>i(new Kb("Request aborted")),o.send(),n&&(n.aborted&&o.abort(),n.addEventListener("abort",()=>o.abort()))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}const sF={};class uZe extends oI{constructor(t,n){super(),this.response=t,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class cZe extends sI{constructor(t){super(t),this.parsedUrl=sF.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",sF)}constructRequest(t,n){return new Promise((r,i)=>{const o=this.httpApi.get({...this.parsedUrl,headers:t},s=>{const a=new Promise(l=>{const u=[];s.on("data",f=>{u.push(f)}),s.on("end",()=>{const f=Buffer.concat(u).buffer;l(f)}),s.on("error",i)});r(new uZe(s,a))});o.on("error",i),n&&(n.aborted&&o.destroy(new Kb("Request aborted")),n.addEventListener("abort",()=>o.destroy(new Kb("Request aborted"))))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}class aI extends iI{constructor(t,n,r,i){super(),this.client=t,this.headers=n,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(t,n){return this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length>1,Promise.all(t.map(r=>this.fetchSlice(r,n))))}async fetchSlices(t,n){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:i,length:o})=>`${i}-${i+o}`).join(",")}`},signal:n});if(r.ok)if(r.status===206){const{type:i,params:o}=ZXe(r.getHeader("content-type"));if(i==="multipart/byteranges"){const c=KXe(await r.getData(),o.boundary);return this._fileSize=c[0].fileSize||null,c}const s=await r.getData(),{start:a,end:l,total:u}=JM(r.getHeader("content-range"));this._fileSize=u||null;const f=[{data:s,offset:a,length:l-a}];if(t.length>1){const c=await Promise.all(t.slice(1).map(d=>this.fetchSlice(d,n)));return f.concat(c)}return f}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,n){const{offset:r,length:i}=t,o=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:n});if(o.ok)if(o.status===206){const s=await o.getData(),{total:a}=JM(o.getHeader("content-range"));return this._fileSize=a||null,{data:s,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await o.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function lI(e,{blockSize:t,cacheSize:n}){return t===null?e:new iZe(e,{blockSize:t,cacheSize:n})}function fZe(e,{headers:t={},credentials:n,maxRanges:r=0,allowFullFile:i=!1,...o}={}){const s=new sZe(e,n),a=new aI(s,t,r,i);return lI(a,o)}function dZe(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const o=new lZe(e),s=new aI(o,t,n,r);return lI(s,i)}function hZe(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const o=new cZe(e),s=new aI(o,t,n,r);return lI(s,i)}function QM(e,{forceXHR:t=!1,...n}={}){return typeof fetch=="function"&&!t?fZe(e,n):typeof XMLHttpRequest<"u"?dZe(e,n):hZe(e,n)}class pZe extends iI{constructor(t){super(),this.file=t}async fetchSlice(t,n){return new Promise((r,i)=>{const o=this.file.slice(t.offset,t.offset+t.length),s=new FileReader;s.onload=a=>r(a.target.result),s.onerror=i,s.onabort=i,s.readAsArrayBuffer(o),n&&n.addEventListener("abort",()=>s.abort())})}}function gZe(e){return new pZe(e)}function eO(e){switch(e){case fr.BYTE:case fr.ASCII:case fr.SBYTE:case fr.UNDEFINED:return 1;case fr.SHORT:case fr.SSHORT:return 2;case fr.LONG:case fr.SLONG:case fr.FLOAT:case fr.IFD:return 4;case fr.RATIONAL:case fr.SRATIONAL:case fr.DOUBLE:case fr.LONG8:case fr.SLONG8:case fr.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function mZe(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let r=4;r<=t[3]*4;r+=4){const i=CXe[t[r]],o=t[r+1]?m2[t[r+1]]:null,s=t[r+2],a=t[r+3];let l=null;if(!o)l=a;else{if(l=e[o],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),s===1&&(l=l[0]))}n[i]=l}return n}function Oy(e,t,n,r){let i=null,o=null;const s=eO(t);switch(t){case fr.BYTE:case fr.ASCII:case fr.UNDEFINED:i=new Uint8Array(n),o=e.readUint8;break;case fr.SBYTE:i=new Int8Array(n),o=e.readInt8;break;case fr.SHORT:i=new Uint16Array(n),o=e.readUint16;break;case fr.SSHORT:i=new Int16Array(n),o=e.readInt16;break;case fr.LONG:case fr.IFD:i=new Uint32Array(n),o=e.readUint32;break;case fr.SLONG:i=new Int32Array(n),o=e.readInt32;break;case fr.LONG8:case fr.IFD8:i=new Array(n),o=e.readUint64;break;case fr.SLONG8:i=new Array(n),o=e.readInt64;break;case fr.RATIONAL:i=new Uint32Array(n*2),o=e.readUint32;break;case fr.SRATIONAL:i=new Int32Array(n*2),o=e.readInt32;break;case fr.FLOAT:i=new Float32Array(n),o=e.readFloat32;break;case fr.DOUBLE:i=new Float64Array(n),o=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===fr.RATIONAL||t===fr.SRATIONAL)for(let a=0;a<n;a+=2)i[a]=o.call(e,r+a*s),i[a+1]=o.call(e,r+(a*s+4));else for(let a=0;a<n;++a)i[a]=o.call(e,r+a*s);return t===fr.ASCII?new TextDecoder("utf-8").decode(i):i}class yZe{constructor(t,n,r){this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=r}}class oA extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class vke{async readRasters(t={}){const{window:n,width:r,height:i}=t;let{resX:o,resY:s,bbox:a}=t;const l=await this.getImage();let u=l;const f=await this.getImageCount(),c=l.getBoundingBox();if(n&&a)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(n){const[p,m]=l.getOrigin(),[b,y]=l.getResolution();a=[p+n[0]*b,m+n[1]*y,p+n[2]*b,m+n[3]*y]}const h=a||c;if(r){if(o)throw new Error("Both width and resX passed");o=(h[2]-h[0])/r}if(i){if(s)throw new Error("Both width and resY passed");s=(h[3]-h[1])/i}}if(o||s){const h=[];for(let p=0;p<f;++p){const m=await this.getImage(p),{SubfileType:b,NewSubfileType:y}=m.fileDirectory;(p===0||b===2||y&1)&&h.push(m)}h.sort((p,m)=>p.getWidth()-m.getWidth());for(let p=0;p<h.length;++p){const m=h[p],b=(c[2]-c[0])/m.getWidth(),y=(c[3]-c[1])/m.getHeight();if(u=m,o&&o>b||s&&s>y)break}}let d=n;if(a){const[h,p]=l.getOrigin(),[m,b]=u.getResolution(l);d=[Math.round((a[0]-h)/m),Math.round((a[1]-p)/b),Math.round((a[2]-h)/m),Math.round((a[3]-p)/b)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return u.readRasters({...t,window:d})}}class Jb extends vke{constructor(t,n,r,i,o={}){super(),this.source=t,this.littleEndian=n,this.bigTiff=r,this.firstIFDOffset=i,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,n){const r=this.bigTiff?4048:1024;return new VXe((await this.source.fetch([{offset:t,length:typeof n<"u"?n:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const n=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(t);const o=this.bigTiff?i.readUint64(t):i.readUint16(t),s=o*n+(this.bigTiff?16:6);i.covers(t,s)||(i=await this.getSlice(t,s));const a={};let l=t+(this.bigTiff?8:2);for(let c=0;c<o;l+=n,++c){const d=i.readUint16(l),h=i.readUint16(l+2),p=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let m,b;const y=eO(h),v=l+(this.bigTiff?12:8);if(y*p<=(this.bigTiff?8:4))m=Oy(i,h,p,v);else{const w=i.readOffset(v),E=eO(h)*p;if(i.covers(w,E))m=Oy(i,h,p,w);else{const A=await this.getSlice(w,E);m=Oy(A,h,p,w)}}p===1&&SXe.indexOf(d)===-1&&!(h===fr.RATIONAL||h===fr.SRATIONAL)?b=m[0]:b=m,a[m2[d]]=b}const u=mZe(a),f=i.readOffset(t+r+n*o);return new yZe(a,u,f)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(n){throw n instanceof oA?new oA(t):n}return this.ifdRequests[t]=(async()=>{const n=await this.ifdRequests[t-1];if(n.nextIFDByteOffset===0)throw new oA(t);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const n=await this.requestIFD(t);return new yke(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,n=!0;for(;n;)try{await this.requestIFD(t),++t}catch(r){if(r instanceof oA)n=!1;else throw r}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",r=n.length+100;let i=await this.getSlice(t,r);if(n===Oy(i,fr.ASCII,n.length,t)){const s=Oy(i,fr.ASCII,r,t).split(`
`)[0],a=Number(s.split("=")[1].split(" ")[0])+s.length;a>r&&(i=await this.getSlice(t,a));const l=Oy(i,fr.ASCII,a,t);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,f])=>{this.ghostValues[u]=f})}return this.ghostValues}static async fromSource(t,n,r){const i=(await t.fetch([{offset:0,length:1024}],r))[0],o=new GXe(i),s=o.getUint16(0,0);let a;if(s===18761)a=!0;else if(s===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=o.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,o.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const f=u?o.getUint64(8,a):o.getUint32(4,a);return new Jb(t,a,u,f,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class bZe extends vke{constructor(t,n){super(),this.mainFile=t,this.overviewFiles=n,this.imageFiles=[t].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,r=0;for(let i=0;i<this.imageFiles.length;i++){const o=this.imageFiles[i];for(let s=0;s<this.imageCounts[i];s++){if(t===n){const a=await o.requestIFD(r);return new yke(a.fileDirectory,a.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}n++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((n,r)=>n+r,0),this.imageCount}}async function vZe(e,t={},n){return Jb.fromSource(QM(e,t),n)}async function xZe(e,t){return Jb.fromSource(gZe(e),t)}async function wZe(e,t=[],n={},r){const i=await Jb.fromSource(QM(e,n),r),o=await Promise.all(t.map(s=>Jb.fromSource(QM(s,n))));return new bZe(i,o)}function _Ze(e){return((e.fileDirectory.NewSubfileType||0)&4)===4}function EZe(e,t){if(!e)return!1;if(e===!0)return!0;if(t.getSamplesPerPixel()!==3)return!1;const n=t.fileDirectory.PhotometricInterpretation,r=yl;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const U1e="STATISTICS_MAXIMUM",q1e="STATISTICS_MINIMUM",aF=256;let lF;function SZe(){return lF||(lF=new YXe),lF}function AZe(e){try{return e.getBoundingBox(!0)}catch{return[0,0,e.getWidth(),e.getHeight()]}}function CZe(e){try{return e.getOrigin().slice(0,2)}catch{return[0,e.getHeight()]}}function kZe(e,t){try{return e.getResolution(t)}catch{return[t.getWidth()/e.getWidth(),t.getHeight()/e.getHeight()]}}function TZe(e){const t=e.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&t.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+t.ProjectedCSTypeGeoKey;let r=si(n);if(!r){const i=Tbe(t.ProjLinearUnitsGeoKey);i&&(r=new Dbe({code:n,units:i}))}return r}if(t.GeographicTypeGeoKey&&t.GeographicTypeGeoKey!==32767){const n="EPSG:"+t.GeographicTypeGeoKey;let r=si(n);if(!r){const i=Tbe(t.GeogAngularUnitsGeoKey);i&&(r=new Dbe({code:n,units:i}))}return r}return null}function DZe(e){return e.getImageCount().then(function(t){const n=new Array(t);for(let r=0;r<t;++r)n[r]=e.getImage(r);return Promise.all(n)})}function LZe(e,t){let n;return e.blob?n=xZe(e.blob):e.overviews?n=wZe(e.url,e.overviews,t):n=vZe(e.url,t),n.then(DZe)}function Ow(e,t,n,r,i){if(Array.isArray(e)){const o=e.length;if(!Array.isArray(t)||o!=t.length){const s=new Error(r);throw i(s),s}for(let s=0;s<o;++s)Ow(e[s],t[s],n,r,i);return}if(t=t,Math.abs(e-t)>n*e)throw new Error(r)}function RZe(e){return e instanceof Int8Array?-128:e instanceof Int16Array?-32768:e instanceof Int32Array?-2147483648:e instanceof Float32Array?12e-39:0}function FZe(e){return e instanceof Int8Array?127:e instanceof Uint8Array||e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?34e37:255}class uI extends lE{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:t.interpolate!==!1,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const n=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=t.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(o=>o.url).join(","));const r=this,i=new Array(n);for(let o=0;o<n;++o)i[o]=LZe(this.sourceInfo_[o],this.sourceOptions_);Promise.all(i).then(function(o){r.configure_(o)}).catch(function(o){Z2(o),r.error_=o,r.setState("error")})}getError(){return this.error_}determineProjection(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const i=n[r],o=TZe(i);if(o){this.projection=o;break}}}determineTransformMatrix(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const o=n[r].fileDirectory.ModelTransformation;if(o){const[s,a,l,u,f,c,d,h]=o,p=U2(U2([1/Math.sqrt(s*s+f*f),0,0,-1/Math.sqrt(a*a+c*c),u,h],[s,f,a,c,0,0]),[1,0,0,1,-u,-h]);this.transformMatrix=p,this.addAlpha_=!0;break}}}configure_(t){let n,r,i,o,s;const a=new Array(t.length),l=new Array(t.length),u=new Array(t.length);let f=0;const c=t.length;for(let b=0;b<c;++b){const y=[],v=[];t[b].forEach(R=>{_Ze(R)?v.push(R):y.push(R)});const w=y.length;if(v.length>0&&v.length!==w)throw new Error(`Expected one mask per image found ${v.length} masks and ${w} images`);let E,A;const T=new Array(w),D=new Array(w),k=new Array(w);l[b]=new Array(w),u[b]=new Array(w);for(let R=0;R<w;++R){const M=y[R],B=M.getGDALNoData();u[b][R]=M.getGDALMetadata(0),l[b][R]=B;const K=this.sourceInfo_[b].bands;a[b]=K?K.length:M.getSamplesPerPixel();const L=w-(R+1);E||(E=AZe(M)),A||(A=CZe(M));const $=kZe(M,y[0]);k[L]=$[0];const I=[M.getTileWidth(),M.getTileHeight()];I[0]!==I[1]&&I[1]<aF&&(I[0]=aF,I[1]=aF),T[L]=I;const U=$[0]/Math.abs($[1]);D[L]=[I[0],I[1]/U]}if(n?Km(n,E,n):n=E,!r)r=A;else{const R=`Origin mismatch for source ${b}, got [${A}] but expected [${r}]`;Ow(r,A,0,R,this.viewRejector)}if(!s)s=k,this.resolutionFactors_[b]=1;else{s.length-f>k.length&&(f=s.length-k.length);const R=s[s.length-1]/k[k.length-1];this.resolutionFactors_[b]=R;const M=k.map(K=>K*=R),B=`Resolution mismatch for source ${b}, got [${M}] but expected [${s}]`;Ow(s.slice(f,s.length),M,.02,B,this.viewRejector)}i?Ow(i.slice(f,i.length),D,.01,`Tile size mismatch for source ${b}`,this.viewRejector):i=D,o?Ow(o.slice(f,o.length),T,0,`Tile size mismatch for source ${b}`,this.viewRejector):o=T,this.sourceImagery_[b]=y.reverse(),this.sourceMasks_[b]=v.reverse()}for(let b=0,y=this.sourceImagery_.length;b<y;++b){const v=this.sourceImagery_[b];for(;v.length<s.length;)v.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let b=0;b<c;++b){if(this.sourceInfo_[b].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[b].length){this.addAlpha_=!0;break}const y=l[b],v=this.sourceInfo_[b].bands;if(v){for(let w=0;w<v.length;++w)if(y[v[w]-1]!==null){this.addAlpha_=!0;break e}continue}for(let w=0;w<y.length;++w)if(y[w]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let b=0;b<c;++b)d+=a[b];this.bandCount=d;const h=new cD({extent:n,minZoom:f,origin:r,resolutions:s,tileSizes:i});this.tileGrid=h,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const p=1;s.length===2?s=[s[0],s[1],s[1]/2]:s.length===1&&(s=[s[0]*2,s[0],s[0]/2]);let m=n;if(this.transformMatrix){const b=V2(Ks(),this.transformMatrix.slice()),y=Oje(v=>eh(b,v));m=Vb(n,y)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:Fje(Dp(m),this.projection),extent:Mje(m,this.projection),zoom:p})}loadTile_(t,n,r,i){const o=this.getTileSize(t),s=this.sourceImagery_.length,a=new Array(s*2),l=this.nodataValues_,u=this.sourceInfo_,f=SZe();for(let c=0;c<s;++c){const d=u[c],h=this.resolutionFactors_[c],p=[Math.round(n*(o[0]*h)),Math.round(r*(o[1]*h)),Math.round((n+1)*(o[0]*h)),Math.round((r+1)*(o[1]*h))],m=this.sourceImagery_[c][t];let b;d.bands&&(b=d.bands.map(function(A){return A-1}));let y;"nodata"in d&&d.nodata!==null?y=d.nodata:b?y=b.map(function(A){return l[c][A]}):y=l[c];const v={window:p,width:o[0],height:o[1],samples:b,fillValue:y,pool:f,interleave:!1,signal:i.signal};EZe(this.convertToRGB_,m)?a[c]=m.readRGB(v):a[c]=m.readRasters(v);const w=s+c,E=this.sourceMasks_[c][t];if(!E){a[w]=Promise.resolve(null);continue}a[w]=E.readRasters({window:p,width:o[0],height:o[1],samples:[0],pool:f,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,o)).catch(function(c){throw Z2(c),c})}composeTile_(t,n){const r=this.metadata_,i=this.sourceInfo_,o=this.sourceImagery_.length,s=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,f=this.addAlpha_,c=t[0]*t[1],d=c*s;let h;u?h=new Uint8Array(d):h=new Float32Array(d);let p=0;for(let m=0;m<c;++m){let b=f;for(let y=0;y<o;++y){const v=i[y];let w=v.min,E=v.max,A,T;if(u){const D=r[y][0];w===void 0&&(D&&q1e in D?w=parseFloat(D[q1e]):w=RZe(n[y][0])),E===void 0&&(D&&U1e in D?E=parseFloat(D[U1e]):E=FZe(n[y][0])),A=255/(E-w),T=-w*A}for(let D=0;D<a[y];++D){const k=n[y][D][m];let R;if(u?R=Co(A*k+T,0,255):R=k,!f)h[p]=R;else{let M=v.nodata;if(M===void 0){let K;v.bands?K=v.bands[D]-1:K=D,M=l[y][K]}const B=isNaN(M);(!B&&k!==M||B&&!isNaN(k))&&(b=!1,h[p]=R)}p++}if(!b){const D=o+y,k=n[D];k&&!k[0][m]&&(b=!0)}}f&&(b||(h[p]=255),p++)}return h}}uI.prototype.getView;const MZe="https://tile.googleapis.com/v1/createSession",OZe="https://tile.googleapis.com/v1/2dtiles",$Ze="https://tile.googleapis.com/tile/v1/viewport",IZe=22;class PZe extends hh{constructor(t){const n=!!t.highDpi;super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null;const r={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"};t.imageFormat&&(r.imageFormat=t.imageFormat),t.scale&&(r.scale=t.scale),n&&(r.highDpi=!0),t.layerTypes&&(r.layerTypes=t.layerTypes),t.styles&&(r.styles=t.styles),t.overlay===!0&&(r.overlay=!0),t.apiOptions&&(r.apiOptions=t.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,n){return fetch(t,n)}async createSession_(){const t=MZe+"?key="+this.apiKey_,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(t,n);if(!r.ok){try{const c=await r.json();this.error_=new Error(c.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const i=await r.json(),o=this.getTilePixelRatio(1),s=[i.tileWidth/o,i.tileHeight/o];this.tileGrid=nE({extent:tE(this.getProjection()),maxZoom:IZe,tileSize:s});const a=i.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(c,d,h){const p=c[0],m=c[1],b=c[2];return`${OZe}/${p}/${m}/${b}?session=${a}&key=${l}`};const u=parseInt(i.expiry,10)*1e3,f=Math.max(u-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),f),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[zp.ANIMATING]||t.viewHints[zp.INTERACTING]||t.animate)return this.previousViewportAttribution_;const[n,r]=Lbe($je(t.extent),t.viewState.projection),[i,o]=Lbe(Ije(t.extent),t.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(t.viewState.resolution,this.zDirection)}&north=${o}&south=${r}&east=${i}&west=${n}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const u=this.sessionTokenValue_,f=this.apiKey_,c=`${$Ze}?session=${u}&key=${f}&${l}`;return this.previousViewportAttribution_=await fetch(c).then(d=>d.json()).then(d=>d.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let xke=class extends p${constructor(t,n,r,i,o,s,a){super(n,r,i,o,s,a),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const t=super.getImage();if(this.state==Do.LOADED){const n=this.tileSize_;if(t.width==n[0]&&t.height==n[1])return this.zoomifyImage_=t,t;const r=Jm(n[0],n[1]);return r.drawImage(t,0,0),this.zoomifyImage_=r.canvas,r.canvas}return t}};class NZe extends hh{constructor(t){const n=t.size,r=t.tierSizeCalculation!==void 0?t.tierSizeCalculation:"default",i=t.tilePixelRatio||1,o=n[0],s=n[1],a=[],l=t.tileSize||zM;let u=l*i;switch(r){case"default":for(;o>u||s>u;)a.push([Math.ceil(o/u),Math.ceil(s/u)]),u+=u;break;case"truncated":let T=o,D=s;for(;T>u||D>u;)a.push([Math.ceil(T/u),Math.ceil(D/u)]),T>>=1,D>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const f=[i],c=[0];for(let T=1,D=a.length;T<D;T++)f.push(i<<T),c.push(a[T-1][0]*a[T-1][1]+c[T-1]);f.reverse();const d=new cD({tileSize:l,extent:t.extent||[0,-s,o,0],resolutions:f});let h=t.url;h&&!h.includes("{TileGroup}")&&!h.includes("{tileIndex}")&&(h+="{TileGroup}/{z}-{x}-{y}.jpg");const p=$Ce(h);let m=l*i;function b(T){return function(D,k,R){if(!D)return;const M=D[0],B=D[1],K=D[2],L=B+K*a[M][0],$=(L+c[M])/m|0,I={z:M,x:B,y:K,tileIndex:L,TileGroup:"TileGroup"+$};return T.replace(/\{(\w+?)\}/g,function(U,q){return I[q]})}}const y=v$(p.map(b)),v=xke.bind(null,wc(l*i));super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:v,tileGrid:d,tileUrlFunction:y,transition:t.transition}),this.zDirection=t.zDirection;const w=d.getTileCoordForCoordAndResolution(Dp(d.getExtent()),f[f.length-1]),E=y(w,1,null),A=new Image;A.addEventListener("error",()=>{m=l,this.changed()}),A.src=E}}function ow(e){return e.toLocaleString("en",{maximumFractionDigits:10})}class BZe extends hh{constructor(t){const n=t||{};let r=n.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const i=n.version||Ko.VERSION2,o=n.sizes||[],s=n.size;kc(s!=null&&Array.isArray(s)&&s.length==2&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,"Missing or invalid `size`");const a=s[0],l=s[1],u=n.tileSize,f=n.tilePixelRatio||1,c=n.format||"jpg",d=n.quality||(n.version==Ko.VERSION1?"native":"default");let h=n.resolutions||[];const p=n.supports||[],m=n.extent||[0,-l,a,0],b=o!=null&&Array.isArray(o)&&o.length>0,y=u!==void 0&&(typeof u=="number"&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),v=p!=null&&Array.isArray(p)&&(p.includes("regionByPx")||p.includes("regionByPct"))&&(p.includes("sizeByWh")||p.includes("sizeByH")||p.includes("sizeByW")||p.includes("sizeByPct"));let w,E,A;if(h.sort(function(R,M){return M-R}),y||v)if(u!=null&&(typeof u=="number"&&Number.isInteger(u)&&u>0?(w=u,E=u):Array.isArray(u)&&u.length>0&&((u.length==1||u[1]==null&&Number.isInteger(u[0]))&&(w=u[0],E=u[0]),u.length==2&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(w=u[0],E=u[1]):u[0]==null&&Number.isInteger(u[1])&&(w=u[1],E=u[1])))),(w===void 0||E===void 0)&&(w=zM,E=zM),h.length==0){A=Math.max(Math.ceil(Math.log(a/w)/Math.LN2),Math.ceil(Math.log(l/E)/Math.LN2));for(let R=A;R>=0;R--)h.push(Math.pow(2,R))}else{const R=Math.max(...h);A=Math.round(Math.log(R)/Math.LN2)}else if(w=a,E=l,h=[],b){o.sort(function(M,B){return M[0]-B[0]}),A=-1;const R=[];for(let M=0;M<o.length;M++){const B=a/o[M][0];if(h.length>0&&h[h.length-1]==B){R.push(M);continue}h.push(B),A++}if(R.length>0)for(let M=0;M<R.length;M++)o.splice(R[M]-M,1)}else h.push(1),o.push([a,l]),A=0;const T=new cD({tileSize:[w,E],extent:m,origin:Pje(m),resolutions:h}),D=function(R,M,B){let K,L;const $=R[0];if($>A)return;const I=R[1],U=R[2],q=h[$];if(!(I===void 0||U===void 0||q===void 0||I<0||Math.ceil(a/q/w)<=I||U<0||Math.ceil(l/q/E)<=U)){if(v||y){const Y=I*w*q,X=U*E*q;let te=w*q,le=E*q,ee=w,z=E;if(Y+te>a&&(te=a-Y),X+le>l&&(le=l-X),Y+w*q>a&&(ee=Math.floor((a-Y+q-1)/q)),X+E*q>l&&(z=Math.floor((l-X+q-1)/q)),Y==0&&te==a&&X==0&&le==l)K="full";else if(!v||p.includes("regionByPx"))K=Y+","+X+","+te+","+le;else if(p.includes("regionByPct")){const he=ow(Y/a*100),de=ow(X/l*100),ze=ow(te/a*100),He=ow(le/l*100);K="pct:"+he+","+de+","+ze+","+He}i==Ko.VERSION3&&(!v||p.includes("sizeByWh"))?L=ee+","+z:!v||p.includes("sizeByW")?L=ee+",":p.includes("sizeByH")?L=","+z:p.includes("sizeByWh")?L=ee+","+z:p.includes("sizeByPct")&&(L="pct:"+ow(100/q))}else if(K="full",b){const Y=o[$][0],X=o[$][1];i==Ko.VERSION3?Y==a&&X==l?L="max":L=Y+","+X:Y==a?L="full":L=Y+","}else L=i==Ko.VERSION3?"max":"full";return r+K+"/"+L+"/0/"+d+"."+c}},k=xke.bind(null,wc(u||256).map(function(R){return R*f}));super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:k,tileGrid:T,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:D,transition:n.transition}),this.zDirection=n.zDirection}}function wke(e,t,n,r,i,o){const s=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[Rbe(eu(t)/a,Fbe),Rbe(Up(t)/a,Fbe)];o.SIZE=l[0]+","+l[1],o.BBOX=t.join(","),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(o.DPI?o.DPI*r:90*r);const u=e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return p3(u,o)}function _ke(e){const t=e.load?e.load:j1,n=si(e.projection||"EPSG:3857"),r=e.ratio??1.5,i=e.crossOrigin??null;return function(o,s,a){a=e.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,e.params),o=ICe(o,s,a,r);const u=wke(e.url,o,s,a,n,l),f=new Image;return f.crossOrigin=i,t(f,u).then(c=>{const d=eu(o)/c.width*a;return{image:c,extent:o,resolution:d,pixelRatio:a}})}}class zZe extends k0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:w$,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=_ke({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(o,s)=>(this.image.setImage(o),this.imageLoadFunction_(this.image,s),j1(o))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}class jZe extends k0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5}getImageInternal(t,n,r,i){n=this.findNearestResolution(n);let o=this.canvas_;if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==n&&o.getPixelRatio()==r&&o3(o.getExtent(),t))return o;t=t.slice(),FCe(t,this.ratio_);const s=eu(t)/n,a=Up(t)/n,l=[s*r,a*r],u=this.canvasFunction_.call(this,t,n,r,l,i);return u&&(o=new L$(t,n,r,u)),this.canvas_=o,this.renderedRevision_=this.getRevision(),o}}function UZe(e,t,n,r){const i=eu(e),o=Up(e),s=t[0],a=t[1],l=.0254/r;return a*i>s*o?i*n/(s*l):o*n/(a*l)}function qZe(e,t,n,r,i,o,s){const a=UZe(n,r,o,s),l=Dp(n),u={OPERATION:i?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:s,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,t),p3(e,u)}function Eke(e){const t=e.load||j1,n=e.useOverlay??!1,r=e.metersPerUnit||1,i=e.displayDpi||96,o=e.ratio??1,s=e.crossOrigin??null;return function(a,l,u){const f=new Image;f.crossOrigin=s,a=ICe(a,l,u,o);const c=eu(a)/l,d=Up(a)/l,h=[c*u,d*u],p=qZe(e.url,e.params,a,h,n,r,i);return t(f,p).then(m=>({image:m,extent:a,pixelRatio:u}))}}class HZe extends k0{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.displayDpi_=t.displayDpi!==void 0?t.displayDpi:96,this.params_=Object.assign({},t.params),this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:w$,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.metersPerUnit_=t.metersPerUnit!==void 0?t.metersPerUnit:1,this.ratio_=t.ratio!==void 0?t.ratio:1,this.useOverlay_=t.useOverlay!==void 0?t.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=Eke({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(o,s)=>(this.image.setImage(o),this.imageLoadFunction_(this.image,s),j1(o))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(t){Object.assign(this.params_,t),this.changed()}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}changed(){this.image=null,super.changed()}}function Ske(e){const t=e.load||j1,n=e.imageExtent,r=e.crossOrigin??null;return()=>{const i=new Image;return i.crossOrigin=r,t(i,e.url).then(o=>{const s=eu(n)/o.width,a=Up(n)/o.height;return{image:o,extent:n,resolution:s!==a?[s,a]:a,pixelRatio:1}})}}class Ake extends k0{constructor(t){const n=t.crossOrigin!==void 0?t.crossOrigin:null,r=t.imageLoadFunction!==void 0?t.imageLoadFunction:w$;super({attributions:t.attributions,interpolate:t.interpolate,projection:si(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new xCe(this.imageExtent_,void 0,1,Ske({url:t.url,imageExtent:t.imageExtent,crossOrigin:n,load:(i,o)=>(this.image.setImage(i),r(this.image,o),j1(i))})),this.image.addEventListener(kl.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,n,r,i){return Gb(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const GZe=new Error("Image failed to load");function Cke(e,t,n,r,i){return new Promise((o,s)=>{const a=new Image;a.crossOrigin=i.crossOrigin??null,a.addEventListener("load",()=>o(a)),a.addEventListener("error",()=>s(GZe)),a.src=PCe(e,t,n,r,i.maxY)})}function H1e(e){return function(t,n,r,i){const o=Nje(e,t,n,r);return Cke(o,t,n,r,i)}}function VZe(e){return function(t,n,r,i){const o=e(t,n,r,i);return Cke(o,t,n,r,i)}}function G1e(e){let t;if(Array.isArray(e))t=H1e(e);else if(typeof e=="string"){const n=$Ce(e);t=H1e(n)}else if(typeof e=="function")t=VZe(e);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return t}let V1e=0;function W1e(e){return Array.isArray(e)?e.join(`
`):typeof e=="string"?e:(++V1e,"url-function-key-"+V1e)}class kke extends lE{constructor(t){t=t||{};let n=t.loader,r;t.url&&(n=G1e(t.url),r=W1e(t.url));const i=n?t.state:"loading",o=t.wrapX===void 0?!0:t.wrapX;super({loader:n,key:r,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize,gutter:t.gutter,maxResolution:t.maxResolution,projection:t.projection,tileGrid:t.tileGrid,state:i,wrapX:o,transition:t.transition,interpolate:t.interpolate!==!1,crossOrigin:t.crossOrigin,zDirection:t.zDirection})}setUrl(t){const n=G1e(t);this.setLoader(n),this.setKey(W1e(t)),this.getState()!=="ready"&&this.setState("ready")}}function cI(e,t,n,r){const i=document.createElement("script"),o="olc_"+Ei(t);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(e.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),n&&n()},1e4);window[o]=function(l){clearTimeout(a),s(),t(l)},document.head.appendChild(i)}class WZe extends Error{constructor(t){const n="Unexpected response status: "+t.status;super(n),this.name="ResponseError",this.response=t}}class YZe extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function Tke(e){return new Promise(function(t,n){function r(s){const a=s.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(u){const f="Error parsing response text as JSON: "+u.message;n(new Error(f));return}t(l);return}n(new WZe(a))}function i(s){n(new YZe(s.target))}const o=new XMLHttpRequest;o.addEventListener("load",r),o.addEventListener("error",i),o.open("GET",e),o.setRequestHeader("Accept","application/json"),o.send()})}function Dke(e,t){return t.includes("://")?t:new URL(t,e).href}const XZe={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},ZZe={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function Lke(e,t){if(!t.length)return e;const n=new URL(e,"file:/");if(n.pathname.split("/").includes("collections"))return Z2('The "collections" query parameter cannot be added to collection endpoints'),e;const r=t.map(s=>encodeURIComponent(s)).join(",");n.searchParams.append("collections",r);const i=e.split("?")[0],o=decodeURIComponent(n.searchParams.toString());return`${i}?${o}`}function KZe(e,t,n){let r,i;for(let o=0;o<e.length;++o){const s=e[o];if(s.rel==="item"){if(s.type===t){r=s.href;break}(XZe[s.type]||!i&&s.type.startsWith("image/"))&&(i=s.href)}}if(!r)if(i)r=i;else throw new Error('Could not find "item" link');return n&&(r=Lke(r,n)),r}function JZe(e,t,n,r){let i,o;const s={};for(let a=0;a<e.length;++a){const l=e[a];if(s[l.type]=l.href,l.rel==="item"){if(l.type===t){i=l.href;break}ZZe[l.type]&&(o=l.href)}}if(!i&&n)for(let a=0;a<n.length;++a){const l=n[a];if(s[l]){i=s[l];break}}if(!i)if(o)i=o;else throw new Error('Could not find "item" link');return r&&(i=Lke(i,r)),i}function Y1e(e,t,n,r){let i=e.projection;if(!i&&(typeof t.crs=="string"?i=si(t.crs):"uri"in t.crs&&(i=si(t.crs.uri)),!i))throw new Error(`Unsupported CRS: ${JSON.stringify(t.crs)}`);const o=t.orderedAxes,a=!(o?o.slice(0,2).map(T=>T.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):i.getAxisOrientation()).startsWith("en"),l=t.tileMatrices,u={};for(let T=0;T<l.length;++T){const D=l[T];u[D.id]=D}const f={},c=[];if(r)for(let T=0;T<r.length;++T){const D=r[T],k=D.tileMatrix;c.push(k),f[k]=D}else for(let T=0;T<l.length;++T){const D=l[T].id;c.push(D)}const d=c.length,h=new Array(d),p=new Array(d),m=new Array(d),b=new Array(d),y=[-1/0,-1/0,1/0,1/0];for(let T=0;T<d;++T){const D=c[T],k=u[D],R=k.pointOfOrigin;a?h[T]=[R[1],R[0]]:h[T]=R,p[T]=k.cellSize,m[T]=[k.matrixWidth,k.matrixHeight],b[T]=[k.tileWidth,k.tileHeight];const M=f[D];if(M){const B=k.cellSize*k.tileWidth,K=h[T][0]+M.minTileCol*B,L=h[T][0]+(M.maxTileCol+1)*B,$=k.cellSize*k.tileHeight,I=k.cornerOfOrigin==="bottomLeft";let U,q;I?(U=h[T][1]+M.minTileRow*$,q=h[T][1]+(M.maxTileRow+1)*$):(U=h[T][1]-(M.maxTileRow+1)*$,q=h[T][1]-M.minTileRow*$),Km(y,[K,U,L,q],y)}}const v=new cD({origins:h,resolutions:p,sizes:m,tileSizes:b,extent:r?y:void 0}),w=e.context,E=e.url;function A(T,D,k){if(!T)return;const R=c[T[0]],M=u[R],B=M.cornerOfOrigin==="bottomLeft",K={tileMatrix:R,tileCol:T[1],tileRow:B?-T[2]-1:T[2]};if(r){const $=f[M.id];if(K.tileCol<$.minTileCol||K.tileCol>$.maxTileCol||K.tileRow<$.minTileRow||K.tileRow>$.maxTileRow)return}Object.assign(K,w);const L=n.replace(/\{(\w+?)\}/g,function($,I){return K[I]});return Dke(E,L)}return{grid:v,projection:i,urlTemplate:n,urlFunction:A}}function QZe(e,t){const n=t.tileMatrixSetLimits;let r;if(t.dataType==="map")r=KZe(t.links,e.mediaType,e.collections);else if(t.dataType==="vector")r=JZe(t.links,e.mediaType,e.supportedMediaTypes,e.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(t.tileMatrixSet)return Y1e(e,t.tileMatrixSet,r,n);const i=t.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!i)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const o=i.href,s=Dke(e.url,o);return Tke(s).then(function(a){return Y1e(e,a,r,n)})}function Rke(e){return Tke(e.url).then(function(t){return QZe(e,t)})}class eKe extends hh{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null,collections:t.collections};Rke(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){Z2(t),this.setState("error")}}class tKe extends fD{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null,collections:t.collections};Rke(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){Z2(t),this.setState("error")}}function Fke(e){return function(t){const n=t.buffers,r=t.meta,i=t.imageOps,o=t.width,s=t.height,a=n.length,l=n[0].byteLength;if(i){const d=new Array(a);for(let p=0;p<a;++p)d[p]=new ImageData(new Uint8ClampedArray(n[p]),o,s);return e(d,r).data.buffer}const u=new Uint8ClampedArray(l),f=new Array(a),c=new Array(a);for(let d=0;d<a;++d)f[d]=new Uint8ClampedArray(n[d]),c[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let p=0;p<a;++p){const m=f[p];c[p][0]=m[d],c[p][1]=m[d+1],c[p][2]=m[d+2],c[p][3]=m[d+3]}const h=e(c,r);u[d]=h[0],u[d+1]=h[1],u[d+2]=h[2],u[d+3]=h[3]}return u.buffer}}function nKe(e,t){const r=Object.keys(e.lib||{}).map(function(o){return"const "+o+" = "+e.lib[o].toString()+";"}).concat(["const __minion__ = ("+Fke.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",t),i}function rKe(e,t){const n=Fke(e.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||t({data:{buffer:n(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class iKe extends CCe{constructor(t){super(),this.imageOps_=!!t.imageOps;let n;t.threads===0?n=0:this.imageOps_?n=1:n=t.threads||1;const r=new Array(n);if(n)for(let i=0;i<n;++i)r[i]=nKe(t,this.onWorkerMessage_.bind(this,i));else r[0]=rKe(t,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=t.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(t,n,r){this.enqueue_({inputs:t,meta:n,callback:r}),this.dispatch_()}enqueue_(t){for(this.queue_.push(t);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const t=this.queue_.shift();this.job_=t;const n=t.inputs[0].width,r=t.inputs[0].height,i=t.inputs.map(function(l){return l.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:i,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},i);return}const s=t.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let l=0;l<o;++l){const u=l*a,f=[];for(let c=0,d=i.length;c<d;++c)f.push(i[c].slice(u,u+a));this.workers_[l].postMessage({buffers:f,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},f)}}onWorkerMessage_(t,n){this.disposed||(this.dataLookup_[t]=n.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const t=this.job_,n=this.workers_.length;let r,i;if(n===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const o=t.inputs[0].data.length;r=new Uint8ClampedArray(o),i=new Array(n);const s=4*Math.ceil(o/4/n);for(let a=0;a<n;++a){const l=this.dataLookup_[a].buffer,u=a*s;r.set(new Uint8ClampedArray(l),u),i[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},t.callback(null,new ImageData(r,t.inputs[0].width,t.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let t=0;t<this.workers_.length;++t)this.workers_[t].terminate();this.workers_.length=0}}const X1e={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Z1e extends NCe{constructor(t,n,r){super(t),this.extent=n.extent,this.resolution=n.viewState.resolution/n.pixelRatio,this.data=r}}class Mke extends k0{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=t.operationType!==void 0?t.operationType:"pixel",this.threads_=t.threads!==void 0?t.threads:1,this.layers_=aKe(t.sources);const n=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(kl.CHANGE,n);this.useResolutions_=t.resolutions!==null,this.tileQueue_=new Bje(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Ks(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:sKe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Ks(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Ei(this),renderTargets:{}},this.setAttributions(function(r){var o;const i=[];for(let s=0,a=t.sources.length;s<a;++s){const l=t.sources[s],u=l instanceof _$?l:l.getSource();if(!u)continue;const f=(o=u.getAttributions())==null?void 0:o(r);typeof f=="string"?i.push(f):f!==void 0&&i.push(...f)}return i}),t.operation!==void 0&&this.setOperation(t.operation,t.lib)}setOperation(t,n){this.processor_&&this.processor_.dispose(),this.processor_=new iKe({operation:t,imageOps:this.operationType_==="image",queue:1,lib:n,threads:this.threads_}),this.changed()}updateFrameState_(t,n,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const o=Dp(t);i.size[0]=Math.ceil(eu(t)/n),i.size[1]=Math.ceil(Up(t)/n),i.extent=[o[0]-i.size[0]*n/2,o[1]-i.size[1]*n/2,o[0]+i.size[0]*n/2,o[1]+i.size[1]*n/2],i.time=Date.now();const s=i.viewState;return s.center=o,s.projection=r,s.resolution=n,i}allSourcesReady_(){let t=!0,n;for(let r=0,i=this.layers_.length;r<i;++r)if(n=this.layers_[r].getSource(),!n||n.getState()!=="ready"){t=!1;break}return t}getImage(t,n,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),n=this.findNearestResolution(n);const o=this.updateFrameState_(t,n,i);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(n!==s||!H2(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,n=this.layers_.length,r=new Array(n);for(let o=0;o<n;++o){t.layerIndex=o,t.renderTargets={};const s=oKe(this.layers_[o],t);if(s)r[o]=s;else return}const i={};this.dispatchEvent(new Z1e(X1e.BEFOREOPERATIONS,t,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,n,r,i){if(n||!r)return;const o=t.extent,s=t.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!H2(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(eu(o)/s),u=Math.round(Up(o)/s);a=Jm(l,u),this.renderedImageCanvas_=new L$(o,s,1,a.canvas)}a.putImageData(r,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Z1e(X1e.AFTEROPERATIONS,t,i))}getResolutions(t){if(!this.useResolutions_)return null;let n=super.getResolutions();if(!n)for(let r=0,i=this.layers_.length;r<i&&(n=this.layers_[r].getSource().getResolutions(t),!n);++r);return n}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Mke.prototype.dispose;let tm=null;function oKe(e,t){const n=e.getRenderer();if(!n)throw new Error("Unsupported layer type: "+e);if(!n.prepareFrame(t))return null;const r=t.size[0],i=t.size[1];if(r===0||i===0)return null;const o=n.renderFrame(t,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===r&&s.height===i)return s.getContext("2d").getImageData(0,0,r,i)}if(!tm)tm=Jm(r,i,void 0,{willReadFrequently:!0});else{const a=tm.canvas;a.width!==r||a.height!==i?tm=Jm(r,i,void 0,{willReadFrequently:!0}):tm.clearRect(0,0,r,i)}return tm.drawImage(s,0,0,r,i),tm.getImageData(0,0,r,i)}function sKe(e){return e.map(function(t){return t.getLayerState()})}function aKe(e){const t=e.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=lKe(e[r]);return n}function lKe(e){let t;return e instanceof _$?e instanceof uD?t=new h3({source:e}):e instanceof k0&&(t=new b$({source:e})):t=e,t}const uKe='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',cKe='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',fKe='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',dKe={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},hKe={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class pKe extends X2{constructor(t){const n=t.layer.indexOf("-"),r=n==-1?t.layer:t.layer.slice(0,n),i=hKe[r]||{minZoom:0,maxZoom:20,retina:!0},o=dKe[t.layer],s=t.apiKey?"?api_key="+t.apiKey:"",a=i.retina&&t.retina?"@2x":"",l=t.url!==void 0?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+a+"."+o.extension+s,u=[uKe,cKe,zje];t.layer.startsWith("stamen_")&&u.splice(1,0,fKe),super({attributions:u,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:i.maxZoom,minZoom:t.minZoom!==void 0?t.minZoom:i.minZoom,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:l,tilePixelRatio:a?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}}class gKe extends hh{constructor(t){t=t||{},super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=aD(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const n=[];for(const r in this.params_)n[t++]=r+"-"+this.params_[r];return n.join("/")}getParams(){return this.params_}getRequestUrl_(t,n,r,i,o,s){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const u=jje(Uje(t),a.length);l=a[u]}return wke(l,r,(this.tileGrid||this.getTileGridForProjection(o)).getResolution(t[0]),i,o,s)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=t[0])return;n!=1&&!this.hidpi_&&(n=1);const o=i.getTileCoordExtent(t,this.tmpExtent_);let s=wc(i.getTileSize(t[0]),this.tmpSize);n!=1&&(s=qje(s,n,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,s,o,n,r,a)}}class mKe extends kke{constructor(t){t=t||{};const n=t.template||"z:{z} x:{x} y:{y}",r=t.source;super({transition:0,wrapX:t.wrapX!==void 0?t.wrapX:r!==void 0?r.getWrapX():void 0});const i=()=>{var s;this.projection=t.projection!==void 0?si(t.projection):r!==void 0?r.getProjection():this.projection,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:r!==void 0?r.getTileGrid():this.tileGrid,this.zDirection=t.zDirection!==void 0?t.zDirection:r!==void 0?r.zDirection:this.zDirection,r instanceof lE&&(this.transformMatrix=((s=r.transformMatrix)==null?void 0:s.slice())||null);const o=this.tileGrid;o&&this.setTileSizes(o.getResolutions().map((a,l)=>wc(o.getTileSize(l)).map(u=>Math.max(Math.floor(u),1)))),this.setLoader((a,l,u,f)=>{const c=PCe(n,a,l,u,f.maxY),[d,h]=this.getTileSize(a),p=Jm(d,h);return p.strokeStyle="grey",p.strokeRect(.5,.5,d+.5,h+.5),p.fillStyle="grey",p.strokeStyle="white",p.textAlign="center",p.textBaseline="middle",p.font="24px sans-serif",p.lineWidth=4,p.strokeText(c,d/2,h/2,d),p.fillText(c,d/2,h/2,d),p.canvas}),this.setState("ready")};if(r===void 0||r.getState()==="ready")i();else{const o=()=>{r.getState()==="ready"&&(r.removeEventListener(kl.CHANGE,o),i())};r.addEventListener(kl.CHANGE,o)}}}class Oke extends hh{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:si("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)cI(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const n=si("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const u=x$(n,r);i=Vb(t.bounds,u)}const o=tE(r),s=t.minzoom||0,a=t.maxzoom||22,l=nE({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=BCe(t.tiles,l),t.attribution&&!this.getAttributions()){const u=i!==void 0?i:o;this.setAttributions(function(f){return Gb(u,f.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class yKe extends Gje{constructor(t,n,r,i,o,s){super(t,n),this.src_=r,this.extent_=i,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const n=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof i!="string")return null;let o=i.charCodeAt(Math.floor(n*i.length));o>=93&&o--,o>=35&&o--,o-=32;let s=null;if(o in this.keys_){const a=this.keys_[o];this.data_&&a in this.data_?s=this.data_[a]:s=a}return s}forDataAtCoordinate(t,n,r){this.state==Do.EMPTY&&r===!0?(this.state=Do.IDLE,Vje(this,kl.CHANGE,i=>{n(this.getData(t))}),this.loadInternal_()):r===!0?setTimeout(()=>{n(this.getData(t))},0):n(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=Do.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=Do.LOADED,this.changed()}loadInternal_(){if(this.state==Do.IDLE)if(this.state=Do.LOADING,this.jsonp_)cI(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(Do.EMPTY)}}class bKe extends uD{constructor(t){if(super({projection:si("EPSG:3857"),state:"loading",wrapX:t.wrapX!==void 0?t.wrapX:!0,zDirection:t.zDirection}),this.preemptive_=t.preemptive!==void 0?t.preemptive:!0,this.tileUrlFunction_=Hje,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)cI(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,n,r,i){if(this.tileGrid){const o=this.tileGrid.getZForResolution(n,this.zDirection),s=this.tileGrid.getTileCoordForCoordAndZ(t,o);this.getTile(s[0],s[1],s[2],1,this.getProjection()).forDataAtCoordinate(t,r,i)}else i===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const n=si("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const f=x$(n,r);i=Vb(t.bounds,f)}const o=tE(r),s=t.minzoom||0,a=t.maxzoom||22,l=nE({extent:o,maxZoom:a,minZoom:s});this.tileGrid=l,this.template_=t.template;const u=t.grids;if(!u){this.setState("error");return}if(this.tileUrlFunction_=BCe(u,l),t.attribution){const f=i!==void 0?i:o;this.setAttributions(function(c){return Gb(f,c.extent)?[t.attribution]:null})}this.setState("ready")}getTile(t,n,r,i,o){const s=[t,n,r],a=this.getTileCoordForTileUrlFunction(s,o),l=this.tileUrlFunction_(a,i,o);return new yKe(s,l!==void 0?Do.IDLE:Do.EMPTY,l!==void 0?l:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_)}}function vKe(e,t){const n=new DCe(32),r=e.getExtent();return function(i,o){n.expireCache(),r&&(i=Km(r,i));const s=e.getZForResolution(o),a=[];return e.forEachTileCoord(i,s,l=>{const u=l.toString();if(!n.containsKey(u)){const f=t(l);n.set(u,f)}a.push(n.get(u))}),a}}const xKe=Object.freeze(Object.defineProperty({__proto__:null,BingMaps:qYe,CartoDB:HYe,Cluster:GYe,DataTile:lE,GeoTIFF:uI,Google:PZe,IIIF:BZe,Image:k0,ImageArcGISRest:zZe,ImageCanvas:jZe,ImageMapGuide:HZe,ImageStatic:Ake,ImageTile:kke,ImageWMS:Wje,OGCMapTile:eKe,OGCVectorTile:tKe,OSM:Yje,Raster:Mke,Source:_$,StadiaMaps:pKe,Tile:uD,TileArcGISRest:gKe,TileDebug:mKe,TileImage:hh,TileJSON:Oke,TileWMS:zCe,UTFGrid:bKe,UrlTile:Xje,Vector:J_,VectorTile:fD,WMTS:jCe,XYZ:X2,Zoomify:NZe,createArcGISRestLoader:_ke,createMapGuideLoader:Eke,createStaticLoader:Ske,createWMSLoader:Zje,sourcesFromTileGrid:vKe},Symbol.toStringTag,{value:"Module"})),wKe="1.0.0",_Ke="",EKe=JSON.parse('[{"kind":"javascript-module","path":"elements/chart/src/main.js","declarations":[{"kind":"class","description":"Chart component based on [Vega-Lite](https://vega.github.io/vega-lite/)/[Vega-Embed](https://github.com/vega/vega-embed).\\nPass a valid Vega spec as `spec` property in order to render a chart.\\n\\nThe `eox-chart` provides some default `spec` settings (merged with the provided `spec` property) and helper functionalities on top of Vega-Lite.","name":"EOxChart","members":[{"kind":"field","name":"spec","privacy":"public","type":{"text":"VisualizationSpec"},"description":"[Vega-Lite spec](https://vega.github.io/vega-lite/docs/spec.html)","default":"undefined"},{"kind":"field","name":"dataValues","privacy":"public","type":{"text":"{[dataSourceName: string]: InlineData}"},"description":"Data values passed on runtime. Requires a [named data source](https://vega.github.io/vega-lite/docs/data.html#named) in the provided `spec`","default":"undefined"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-chart","customElement":true}],"exports":[{"kind":"js","name":"EOxChart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}},{"kind":"custom-element-definition","name":"eox-chart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}}]},{"kind":"javascript-module","path":"elements/drawtools/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxDrawTools","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"field","name":"#olMap","privacy":"private","type":{"text":"Map"}},{"kind":"field","name":"#geoJSON","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"#layerId","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"layerId","privacy":"public","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","attribute":"layer-id"},{"kind":"method","name":"startDrawing"},{"kind":"method","name":"discardDrawing"},{"kind":"method","name":"handleFeatureChange","parameters":[{"name":"text","description":"The string representation of the features to be parsed.","type":{"text":"string"}},{"name":"replaceFeatures","default":"false","description":"A boolean flag indicating whether to replace the existing features.","type":{"text":"boolean"}}]},{"kind":"method","name":"handleFilesChange","parameters":[{"name":"evt","description":"The event object from the file input interaction.","type":{"text":"DragEvent | Event"}}]},{"kind":"method","name":"onModifyEnd"},{"kind":"method","name":"updateGeoJSON","description":"Update #geoJSON with stringify feature."},{"kind":"method","name":"emitDrawnFeatures","description":"Triggers different events when the drawing of a shape is completed."},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"allowModify","privacy":"public","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","attribute":"allow-modify"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"currentlyDrawing","privacy":"public","type":{"text":"boolean"},"description":"Whether the user is currently in the process of drawing or not","default":"false"},{"kind":"field","name":"draw","privacy":"public","type":{"text":"Draw | EOxSelectInteraction"},"description":"The current native OpenLayers `draw` interaction","default":"null"},{"kind":"field","name":"drawLayer","privacy":"public","type":{"text":"default"},"description":"The current native OpenLayers draw `layer` (initialized with a `zIndex` of 100)","default":"null"},{"kind":"field","name":"drawnFeatures","privacy":"public","type":{"text":"Array<Feature>"},"description":"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.","default":"[]"},{"kind":"field","name":"modify","privacy":"public","type":{"text":"Modify"},"description":"The current native OpenLayers `modify` interaction","default":"null"},{"kind":"field","name":"multipleFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","attribute":"multiple-features"},{"kind":"field","name":"importFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","attribute":"import-features"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","attribute":"show-editor"},{"kind":"field","name":"showList","privacy":"public","type":{"text":"boolean"},"description":"Show list of features","default":"false","attribute":"show-list"},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","attribute":"projection"},{"kind":"field","name":"type","privacy":"public","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","attribute":"type"},{"kind":"field","name":"selectionEvents","type":{"text":"ReturnType<typeof default>"},"default":"null"},{"kind":"field","name":"format","privacy":"public","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","attribute":"format"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"noShadow"}],"events":[{"name":"drawupdate","type":{"text":"Array<Feature>"},"description":"Fires whenever features are added, modified or discarded, where the event detail\\nis the `drawnFeatures` array"}],"attributes":[{"name":"allow-modify","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","fieldName":"allowModify"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer-id","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","fieldName":"layerId"},{"name":"multiple-features","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","fieldName":"multipleFeatures"},{"name":"import-features","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","fieldName":"importFeatures"},{"name":"show-editor","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","fieldName":"showEditor"},{"name":"show-list","type":{"text":"boolean"},"description":"Show list of features","default":"false","fieldName":"showList"},{"name":"projection","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","fieldName":"projection"},{"name":"noShadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"format","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","fieldName":"format"},{"name":"type","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","fieldName":"type"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-drawtools","customElement":true}],"exports":[{"kind":"js","name":"EOxDrawTools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}},{"kind":"custom-element-definition","name":"eox-drawtools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}}]},{"kind":"javascript-module","path":"elements/geosearch/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxGeoSearch","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"method","name":"onInput","parameters":[{"name":"e"}]},{"kind":"method","name":"onInputBlur"},{"kind":"method","name":"onButtonClick"},{"kind":"method","name":"getFlexDirection"},{"kind":"method","name":"getResultsDirection"},{"kind":"method","name":"getVerticalAlign"},{"kind":"method","name":"getMarginDirection","parameters":[{"name":"direction"}]},{"kind":"method","name":"handleSelect","parameters":[{"name":"event"}]},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"_data","privacy":"private","description":"Internal storage of OpenCage API data after a successful API request.","type":{"text":"array"},"default":"[]"},{"kind":"field","name":"_isListVisible","privacy":"private","description":"Whether or not the list dropdown is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_isInputVisible","privacy":"private","description":"Whether or not the input field is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_query","privacy":"private","description":"The search query, which is bound to the input field.","type":{"text":"string"},"default":"\\"\\""},{"kind":"field","name":"_isLoading","privacy":"private","description":"Returns true if the element is currently loading data from the API.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"listDirection","type":{"text":"string"},"default":"\\"right\\""},{"kind":"field","name":"resultsDirection","privacy":"public","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","attribute":"results-direction"},{"kind":"field","name":"interval","privacy":"public","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","attribute":"interval"},{"kind":"field","name":"loaderSvg","privacy":"public","type":{"text":"string"},"default":"` <svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 100 100\\" preserveAspectRatio=\\"xMidYMid\\" width=\\"50\\" height=\\"50\\" style=\\"shape-rendering: auto; display: block; background: transparent;\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" > <g> <circle stroke-dasharray=\\"164.93361431346415 56.97787143782138\\" r=\\"35\\" stroke-width=\\"12\\" stroke=\\"#1a467c\\" fill=\\"none\\" cy=\\"50\\" cx=\\"50\\" > <animateTransform keyTimes=\\"0;1\\" values=\\"0 50 50;360 50 50\\" dur=\\"1.2222222222222223s\\" repeatCount=\\"indefinite\\" type=\\"rotate\\" attributeName=\\"transform\\" ></animateTransform> </circle> <g></g> </g> </svg> `","attribute":"loader-svg"},{"kind":"field","name":"fetchDebounced"},{"kind":"field","name":"endpoint","privacy":"public","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","attribute":"endpoint"},{"kind":"field","name":"queryParameter","privacy":"public","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","attribute":"queryParameter"},{"kind":"field","name":"button","privacy":"public","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","attribute":"button"},{"kind":"field","name":"small","privacy":"public","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","attribute":"small"},{"kind":"field","name":"label","privacy":"public","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","attribute":"label"},{"kind":"field","name":"direction","privacy":"public","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","attribute":"list-direction"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"events":[{"name":"geosearchSelect","type":{"text":"CustomEvent"},"description":"The select event, including the details of the selected item"}],"attributes":[{"name":"endpoint","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","fieldName":"endpoint"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"queryParameter","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","fieldName":"queryParameter"},{"name":"button","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","fieldName":"button"},{"name":"interval","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","fieldName":"interval"},{"name":"small","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","fieldName":"small"},{"name":"label","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","fieldName":"label"},{"name":"list-direction","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","fieldName":"direction"},{"name":"results-direction","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","fieldName":"resultsDirection"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"},{"name":"loader-svg","type":{"text":"string"},"default":"loaderSvg","fieldName":"loaderSvg"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch","customElement":true},{"kind":"class","description":"","name":"EOxGeoSearchItem","members":[{"kind":"field","name":"item","privacy":"public","type":{"text":"object"},"attribute":"item"},{"kind":"field","name":"onClick","privacy":"public","type":{"text":"function"},"attribute":"onClick"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"attributes":[{"name":"item","type":{"text":"object"},"fieldName":"item"},{"name":"onClick","type":{"text":"function"},"fieldName":"onClick"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch-item","customElement":true}],"exports":[{"kind":"custom-element-definition","name":"eox-geosearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}},{"kind":"custom-element-definition","name":"eox-geosearch-item","declaration":{"name":"EOxGeoSearchItem","module":"elements/geosearch/src/main.js"}},{"kind":"js","name":"EOxGeoSearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}}]},{"kind":"javascript-module","path":"elements/itemfilter/src/main.js","declarations":[{"kind":"class","description":"EOxItemFilter is a custom web component that provides a comprehensive item filtering system.\\nIt includes methods for applying filters, searching, sorting results, and resetting filters.\\nThe component supports both inline and dropdown modes for filter display.","name":"EOxItemFilter","members":[{"kind":"field","name":"#resultAggregation","privacy":"private","type":{"text":"Array<string>"},"default":"[]"},{"kind":"field","name":"#items","privacy":"private","type":{"text":"Array<object>"},"default":"[]"},{"kind":"field","name":"#config","privacy":"private","default":"ELEMENT_CONFIG","type":{"text":"Object"}},{"kind":"method","name":"apply","description":"Applies the filters to the items and updates the result aggregation."},{"kind":"method","name":"searchHandler","description":"Performs a search based on the current configuration and items.\\nRequests an update after the search completes."},{"kind":"method","name":"sortResults","parameters":[{"name":"items","description":"The items to be sorted.","type":{"text":"Array<object>"}}],"description":"Sorts the given items based on the current configuration.","return":{"type":{"text":"Array<object>"}}},{"kind":"method","name":"#createFilter","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the filter element.","type":{"text":"number"}}],"description":"Creates a filter element based on the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"#createReset","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the reset element.","type":{"text":"number"}}],"description":"Creates a reset element for the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"resetFilters","description":"Resets all applied filters."},{"kind":"method","name":"updateResult","parameters":[{"name":"evt","description":"\\"result\\" event triggered by result component","type":{"text":"{detail: Object}"}}],"description":"Updates selected result when result component triggers the \\"result\\" event."},{"kind":"field","name":"items","privacy":"public","type":{"text":"Array<Object>"},"description":"The items to be filtered","default":"null"},{"kind":"field","name":"filters","privacy":"public","type":{"text":"Object"},"description":"The state object containing the applied filters.","default":"{}"},{"kind":"field","name":"results","privacy":"public","type":{"text":"Array<Object>"},"description":"The state object containing the filtered results.","default":"[]"},{"kind":"field","name":"selectedResult","privacy":"public","type":{"text":"Object"},"description":"The currently selected result","default":"null"},{"kind":"field","name":"search","type":{"text":"Function"},"privacy":"private"},{"kind":"field","name":"aggregateResults","privacy":"public","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","attribute":"aggregate-results"},{"kind":"field","name":"autoSpreadSingle","privacy":"public","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","attribute":"auto-spread-single"},{"kind":"field","name":"enableHighlighting","privacy":"public","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","attribute":"enable-highlighting"},{"kind":"field","name":"externalFilter","privacy":"public","type":{"text":"Function"},"description":"Use an external search endpoint instead of fuse search.\\nPassed properties: input string, filters object","default":"null"},{"kind":"field","name":"filterProperties","privacy":"public","type":{"text":"Array<{key?: String, keys?: Array<String>, title: String, type: String, placeholder?: String, format?: String, state?: Object}>"},"description":"The filter properties.","default":"[]"},{"kind":"field","name":"fuseConfig","privacy":"public","type":{"text":"Object"},"description":"Native fuse.js config override","default":"{}"},{"kind":"field","name":"inlineMode","privacy":"public","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","attribute":"inline-mode"},{"kind":"field","name":"matchAllWhenEmpty","privacy":"public","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","attribute":"match-all-when-empty"},{"kind":"field","name":"showResults","privacy":"public","type":{"text":"Boolean"},"description":"Display results list","default":"true","attribute":"show-result"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"subTitleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","attribute":"sub-title-property"},{"kind":"field","name":"imageProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","attribute":"image-property"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"expandMultipleFilters","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","attribute":"enable-multiple-filter"},{"kind":"field","name":"expandResults","privacy":"public","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","attribute":"expand-result"},{"kind":"field","name":"expandMultipleResults","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","attribute":"expand-multiple-results"},{"kind":"field","name":"resultType","privacy":"public","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","attribute":"result-type"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"filter","type":{"text":"CustomEvent"},"description":"Fires when the filters are changed; event detail includes `filters` and `results`"},{"name":"select","type":{"text":"CustomEvent"},"description":"Fires when a result is selected; event detail is `selectedResult`"}],"attributes":[{"name":"aggregate-results","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","fieldName":"aggregateResults"},{"name":"auto-spread-single","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","fieldName":"autoSpreadSingle"},{"name":"enable-highlighting","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","fieldName":"enableHighlighting"},{"name":"inline-mode","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","fieldName":"inlineMode"},{"name":"match-all-when-empty","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","fieldName":"matchAllWhenEmpty"},{"name":"show-result","type":{"text":"Boolean"},"description":"Display results list","default":"true","fieldName":"showResults"},{"name":"id-property","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"sub-title-property","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","fieldName":"subTitleProperty"},{"name":"image-property","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","fieldName":"imageProperty"},{"name":"enable-multiple-filter","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","fieldName":"expandMultipleFilters"},{"name":"expand-result","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","fieldName":"expandResults"},{"name":"expand-multiple-results","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","fieldName":"expandMultipleResults"},{"name":"result-type","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","fieldName":"resultType"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-itemfilter","customElement":true}],"exports":[{"kind":"js","name":"EOxItemFilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}},{"kind":"custom-element-definition","name":"eox-itemfilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}}]},{"kind":"javascript-module","path":"elements/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"customEditorInterfaces","privacy":"public","type":{"text":"Array"},"description":"List of custom editor interface\\nRead more about the implementation of custom editor interfaces here:\\nhttps://github.com/json-editor/json-editor/blob/master/docs/custom-editor.html","default":"[]"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/src/main.js","declarations":[{"kind":"class","description":"Display layers and groups of a connected OpenLayers map\\n\\n## Layer properties\\nIn order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. `layer.set(property, value)`).\\n\\n#### `id?: string`\\nThe layer id. Not required but recommended. Can also be any other layer property (defined via the `idProperty` property or `id-property`attribute - see API).\\n\\n#### `title?: string`\\nThe title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the `titleProperty` property or `title-property`attribute - see API).\\n\\n#### `layerControlHide?: Boolean`\\nCompletely hide a layer from the layer control.\\n\\n#### `layerControlOptional?: Boolean`\\nInitially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.\\n\\n#### `layerControlExclusive?: Boolean`\\nMake layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.\\n\\n#### `layerControlExpand?: Boolean`\\nPre-expand a layer dropdown so that it is always open when the component initializes.\\n\\n#### `layerControlToolsExpand?: Boolean`\\nPre-expand the layer tools so they are visible when the component initializes.\\n\\n#### `layerConfig?: Object`\\nConfiguration options for the layer (displayed in the layer tools\' \\"config\\" tab)\\n\\n#### `layerDateTime?: Object`\\nPartial eox-timecontrol config passed to the \\"datetime\\" tool\\n\\n### `layerLegend`?: Object\\nCreates a dynamic color legend based on range & domain of values. Extenteds partial config of `color-legend-element`","name":"EOxLayerControl","members":[{"kind":"field","name":"#eoxMap","privacy":"private","description":"Instance of `eox-map` which is a wrapper for the OL","type":{"text":"EOxMap"}},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"#handleLayerControlLayerListChange","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent & {target: Element}"}}],"description":"Event handler for changes in the layer list"},{"kind":"method","name":"#handleDatetimeUpdate","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent"}}],"description":"Dispatches datetime updates from layer datetime to the layercontrol"},{"kind":"field","name":"#styleEOX","privacy":"private","default":"` :host, :root { font-family: Roboto, sans-serif; --padding: 0.5rem; --padding-vertical: .2rem; --list-padding: 48px; --layer-input-visibility: flex; --layer-summary-visibility: flex; --layer-type-visibility: block; --layer-title-visibility: flex; --layer-visibility: block; --layer-tools-button-visibility: flex; display: block; padding: var(--padding) 0; --background-color: var(--eox-background-color, transparent); background-color: var(--background-color, transparent); } select { background-color: var(--background-color); } `"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"map","privacy":"public","type":{"text":"Map"},"description":"The native OL map instance","default":"null"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"showLayerZoomState","privacy":"public","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","attribute":"show-layer-zoom-state"},{"kind":"field","name":"tools","privacy":"public","type":{"text":"Array<String>"},"description":"Layer tools","default":"[\\"info\\", \\"opacity\\", \\"datetime\\", \\"config\\", \\"remove\\", \\"sort\\"]"},{"kind":"field","name":"addExternalLayers","privacy":"public","type":{"text":"Boolean"},"description":"Enable-disable external layer","default":"false"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"styleOverride","privacy":"public","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","attribute":"styleOverride"},{"kind":"field","name":"toolsAsList","privacy":"public","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","attribute":"toolsAsList"}],"events":[{"name":"layerchange","type":{"text":"CustomEvent"},"description":"A generic layer change event; could be a layer visibility, group length updates and others.\\nPasses the changed layer in the `detail`."},{"name":"datetime:updated","type":{"text":"CustomEvent"}}],"attributes":[{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"id-property","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"show-layer-zoom-state","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","fieldName":"showLayerZoomState"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"styleOverride","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","fieldName":"styleOverride"},{"name":"toolsAsList","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","fieldName":"toolsAsList"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-layercontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxLayerControl","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layercontrol","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layout/src/main.js","declarations":[{"kind":"class","description":"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\\n- `eox-layout`: the container holding all the items\\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight)","name":"EOxLayout","members":[],"attributes":[{"name":"gap"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout","customElement":true},{"kind":"class","description":"","name":"EOxLayoutItem","members":[],"attributes":[{"name":"x"},{"name":"y"},{"name":"w"},{"name":"h"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout-item","customElement":true}],"exports":[{"kind":"js","name":"EOxLayout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"js","name":"EOxLayoutItem","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout-item","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}}]},{"kind":"javascript-module","path":"elements/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string | number"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/stacinfo/src/main.js","declarations":[{"kind":"class","description":"### Introduction\\nWorking with STAC catalogs, collections and items often times requires\\nto fetch a JSON file, parse its contents and display some of its fields\\nin some formatted way. To make these steps reusable, the `eox-stacinfo`\\nelement offers a set of functionalities:\\n- **automatically fetch a STAC file** as soon as the element loads\\n- offer a **property whitelist** functionality to choose which properties to display\\n- display the properties in **configurable sections** (header, body, featured, footer)\\n- allow to **override** any property display for application-specific custom needs\\n\\nThe use case for this element is alongside a map which displays STAC files\\nor in a catalog browsing scenario where a quick look at the most important properties\\nis needed.\\n\\n#### Technology\\nUnder the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.","name":"EOxStacInfo","members":[{"kind":"field","name":"allowHtml","privacy":"public","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","attribute":"allow-html"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","attribute":"unstyled"},{"kind":"field","name":"for","privacy":"public","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","attribute":"for"},{"kind":"field","name":"header","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the header","default":"[]"},{"kind":"field","name":"tags","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display as tags","default":"[]"},{"kind":"field","name":"body","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display in the main body","default":"[]"},{"kind":"field","name":"featured","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the featured section","default":"[]"},{"kind":"field","name":"footer","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the footer","default":"[]"},{"kind":"field","name":"stacInfo","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the fetched STAC information","default":"[]"},{"kind":"field","name":"stacProperties","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the parsed STAC properties","default":"[]"}],"attributes":[{"name":"allow-html","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","fieldName":"allowHtml"},{"name":"unstyled","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","fieldName":"unstyled"},{"name":"for","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","fieldName":"for"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-stacinfo","customElement":true}],"exports":[{"kind":"js","name":"EOxStacInfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}},{"kind":"custom-element-definition","name":"eox-stacinfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}}]},{"kind":"javascript-module","path":"elements/storytelling/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxStoryTelling","members":[{"kind":"field","name":"#html","privacy":"private","description":"Generated HTML string using markdown","type":{"text":"String"},"default":"undefined"},{"kind":"field","name":"#config","privacy":"private","type":{"text":"Object"},"default":"{}","description":"Basic config"},{"kind":"field","name":"#debounceUpdateMarkdown","privacy":"private","type":{"text":"Object"},"default":"null","description":"Debounce update markdown"},{"kind":"method","name":"#dispatchInitEvent","privacy":"private","parameters":[{"name":"element","description":"Dom element","type":{"text":"Element"}}]},{"kind":"method","name":"handleSlotChange","description":"Handles changes to the slot\'s content, updating the component\'s internal state."},{"kind":"method","name":"waitForHtmlInitialization"},{"kind":"field","name":"markdown","privacy":"public","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","attribute":"markdown"},{"kind":"field","name":"markdownURL","privacy":"public","type":{"text":"String"},"description":"Markdown Content URL","default":"null","attribute":"markdown-url"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"disableAutosave","privacy":"public","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","attribute":"disable-autosave"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","attribute":"show-editor"},{"kind":"field","name":"showNav","privacy":"public","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","attribute":"show-nav"},{"kind":"field","name":"nav","privacy":"public","type":{"text":"Array<Object>"},"description":"List of items in navigation","default":"[]"},{"kind":"field","name":"addCustomSectionIndex","privacy":"public","type":{"text":"Number"},"description":"custom section index","default":"-1","attribute":"addCustomSectionIndex"},{"kind":"field","name":"selectedCustomElement","privacy":"public","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","attribute":"selectedCustomElement"}],"events":[{"name":"init","type":{"text":"CustomEvent"}},{"name":"changed","type":{"text":"CustomEvent"}}],"attributes":[{"name":"markdown","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","fieldName":"markdown"},{"name":"markdown-url","type":{"text":"String"},"description":"Markdown Content URL","default":"null","fieldName":"markdownURL"},{"name":"show-nav","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","fieldName":"showNav"},{"name":"show-editor","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","fieldName":"showEditor"},{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"disable-autosave","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","fieldName":"disableAutosave"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"addCustomSectionIndex","type":{"text":"Number"},"description":"custom section index","default":"-1","fieldName":"addCustomSectionIndex"},{"name":"selectedCustomElement","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","fieldName":"selectedCustomElement"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-storytelling","customElement":true}],"exports":[{"kind":"js","name":"EOxStoryTelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}},{"kind":"custom-element-definition","name":"eox-storytelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}}]},{"kind":"javascript-module","path":"elements/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"play","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"play"},{"kind":"field","name":"navigation","privacy":"public","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","attribute":"navigation"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"displayFormat","privacy":"public","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","attribute":"display-format"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"navigation","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","fieldName":"navigation"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"play"},{"name":"display-format","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","fieldName":"displayFormat"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"disablePlay","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"disable-play"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"disable-play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"disablePlay"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}}]}]'),SKe={schemaVersion:wKe,readme:_Ke,modules:EKe};function K1e(e){const t={h3:"h3",...pCe(),...e.components};return vu.jsxs(vu.Fragment,{children:[`
`,`
`,vu.jsx(zBe,{isTemplate:!0}),`
`,vu.jsx(jBe,{}),`
`,vu.jsx(UBe,{}),`
`,vu.jsx(qBe,{}),`
`,vu.jsx(HBe,{}),`
`,vu.jsx(t.h3,{id:"api",children:"API"}),`
`,vu.jsx(GBe,{}),`
`,vu.jsx(VBe,{includePrimary:!1})]})}function AKe(e={}){const{wrapper:t}={...pCe(),...e.components};return t?vu.jsx(t,{...e,children:vu.jsx(K1e,{...e})}):K1e(e)}const CKe=`
  :root, :host, eox-chart {
    display: block;
  }
  #vis {
    width: 100%;
    height: 100%;
  }
`,kKe=`
  eox-chart {
    font-family: Roboto, sans-serif;
  }
`,TKe=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`,DKe=/("(?:[^\\"]|\\.)*")|[:,]/g;function uF(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function o(s,a,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const u=JSON.stringify(s,i);if(u===void 0)return u;const f=r-a.length-l;if(u.length<=f){const c=u.replace(DKe,(d,h)=>h||`${d} `);if(c.length<=f)return c}if(i!=null&&(s=JSON.parse(u),i=void 0),typeof s=="object"&&s!==null){const c=a+n,d=[];let h=0,p,m;if(Array.isArray(s)){p="[",m="]";const{length:b}=s;for(;h<b;h++)d.push(o(s[h],c,h===b-1?0:1)||"null")}else{p="{",m="}";const b=Object.keys(s),{length:y}=b;for(;h<y;h++){const v=b[h],w=`${JSON.stringify(v)}: `,E=o(s[v],c,w.length+(h===y-1?0:1));E!==void 0&&d.push(w+E)}}if(d.length>0)return[p,n+d.join(`,
${c}`),m].join(`
${a}`)}return u}(e,"",0)}function zl(e,t,n){return e.fields=t||[],e.fname=n,e}function Fo(e){return e==null?null:e.fname}function ka(e){return e==null?null:e.fields}function $ke(e){return e.length===1?LKe(e[0]):RKe(e)}const LKe=e=>function(t){return t[e]},RKe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function st(e){throw Error(e)}function Gf(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||st("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&st("Access path missing closing bracket: "+e),r&&st("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Ou(e,t,n){const r=Gf(e);return e=r.length===1?r[0]:e,zl((n&&n.get||$ke)(r),[e],t||e)}const cE=Ou("id"),Ra=zl(e=>e,[],"identity"),fp=zl(()=>0,[],"zero"),K1=zl(()=>1,[],"one"),$u=zl(()=>!0,[],"true"),Qh=zl(()=>!1,[],"false");function FKe(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const Ike=0,fI=1,dI=2,Pke=3,Nke=4;function hI(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:FKe,r=e||Ike;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=fI&&n(t||"error","ERROR",arguments),this},warn(){return r>=dI&&n(t||"warn","WARN",arguments),this},info(){return r>=Pke&&n(t||"log","INFO",arguments),this},debug(){return r>=Nke&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function $t(e){return e===Object(e)}const J1e=e=>e!=="__proto__";function J1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=MKe(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;Q1(r,o,i[o],s)}return r},{})}function Q1(e,t,n,r){if(!J1e(t))return;let i,o;if($t(n)&&!at(n)){o=$t(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Q1(o,i,n[i]):J1e(i)&&(o[i]=n[i])}else e[t]=n}function MKe(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function qr(e){return e[e.length-1]}function Aa(e){return e==null||e===""?null:+e}const Bke=e=>t=>e*Math.exp(t),zke=e=>t=>Math.log(e*t),jke=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Uke=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,_3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function AD(e,t,n,r){const i=n(e[0]),o=n(qr(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function qke(e,t){return AD(e,t,Aa,Ra)}function Hke(e,t){var n=Math.sign(e[0]);return AD(e,t,zke(n),Bke(n))}function Gke(e,t,n){return AD(e,t,_3(n),_3(1/n))}function Vke(e,t,n){return AD(e,t,jke(n),Uke(n))}function CD(e,t,n,r,i){const o=r(e[0]),s=r(qr(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function pI(e,t,n){return CD(e,t,n,Aa,Ra)}function gI(e,t,n){const r=Math.sign(e[0]);return CD(e,t,n,zke(r),Bke(r))}function E3(e,t,n,r){return CD(e,t,n,_3(r),_3(1/r))}function mI(e,t,n,r){return CD(e,t,n,jke(r),Uke(r))}function Wke(e){return 1+~~(new Date(e).getMonth()/3)}function Yke(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Pt(e){return e!=null?at(e)?e:[e]:[]}function Xke(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function ir(e){return typeof e=="function"}const OKe="descending";function yI(e,t,n){n=n||{},t=Pt(t)||[];const r=[],i=[],o={},s=n.comparator||$Ke;return Pt(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===OKe?-1:1),i.push(a=ir(a)?a:Ou(a,null,n)),(ka(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:zl(s(i,r),Object.keys(o))}const kD=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),$Ke=(e,t)=>e.length===1?IKe(e[0],t[0]):PKe(e,t,e.length),IKe=(e,t)=>function(n,r){return kD(e(n),e(r))*t},PKe=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=kD(o(r),o(i));return s*t[a]});function Fa(e){return ir(e)?e:()=>e}function bI(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function rr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function $f(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function Zke(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}const NKe=Object.prototype.hasOwnProperty;function Yt(e,t){return NKe.call(e,t)}const sA={};function ev(e){let t={},n;function r(o){return Yt(t,o)&&t[o]!==sA}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===sA&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=sA),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==sA&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function Kke(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=qr(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const f=Math.abs(l-t);return u<f&&u<=s?r:f<=s?i:o}function Lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),rr(r,n)}function fb(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function lg(e){return typeof e=="boolean"}function Fp(e){return Object.prototype.toString.call(e)==="[object Date]"}function Jke(e){return e&&ir(e[Symbol.iterator])}function li(e){return typeof e=="number"}function Qke(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Nt(e){return typeof e=="string"}function vI(e,t,n){e&&(e=t?Pt(e).map(a=>a.replace(/\\(.)/g,"$1")):Pt(e));const r=e&&e.length,i=n&&n.get||$ke,o=a=>i(t?[a]:Gf(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),f=0;for(;++f<r;)u+="|"+a[f](l);return u}}return zl(s,e,"key")}function eTe(e,t){const n=e[0],r=qr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const BKe=1e4;function tTe(e){e=+e||BKe;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>Yt(t,s)||Yt(n,s),get:s=>Yt(t,s)?t[s]:Yt(n,s)?o(s,n[s]):void 0,set:(s,a)=>Yt(t,s)?t[s]=a:o(s,a)}}function nTe(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function $w(e,t){let n="";for(;--t>=0;)n+=e;return n}function rTe(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?$w(i,s)+o:r==="center"?$w(i,~~(s/2))+o+$w(i,Math.ceil(s/2)):o+$w(i,s)}function fE(e){return e&&qr(e)-e[0]||0}function Tt(e){return at(e)?"["+e.map(Tt)+"]":$t(e)||Nt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function xI(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const zKe=e=>li(e)||Fp(e)?e:Date.parse(e);function wI(e,t){return t=t||zKe,e==null||e===""?null:t(e)}function _I(e){return e==null||e===""?null:e+""}function Tc(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function iTe(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function rp(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var Q1e={},cF={},fF=34,sw=10,dF=13;function oTe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function jKe(e,t){var n=oTe(e);return function(r,i){return t(n(r),i,e)}}function eve(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function bl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function UKe(e){return e<0?"-"+bl(-e,6):e>9999?"+"+bl(e,6):bl(e,4)}function qKe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":UKe(e.getUTCFullYear())+"-"+bl(e.getUTCMonth()+1,2)+"-"+bl(e.getUTCDate(),2)+(i?"T"+bl(t,2)+":"+bl(n,2)+":"+bl(r,2)+"."+bl(i,3)+"Z":r?"T"+bl(t,2)+":"+bl(n,2)+":"+bl(r,2)+"Z":n||t?"T"+bl(t,2)+":"+bl(n,2)+"Z":"")}function HKe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,d){var h,p,m=i(c,function(b,y){if(h)return h(b,y-1);p=b,h=d?jKe(b,d):oTe(b)});return m.columns=p||[],m}function i(c,d){var h=[],p=c.length,m=0,b=0,y,v=p<=0,w=!1;c.charCodeAt(p-1)===sw&&--p,c.charCodeAt(p-1)===dF&&--p;function E(){if(v)return cF;if(w)return w=!1,Q1e;var T,D=m,k;if(c.charCodeAt(D)===fF){for(;m++<p&&c.charCodeAt(m)!==fF||c.charCodeAt(++m)===fF;);return(T=m)>=p?v=!0:(k=c.charCodeAt(m++))===sw?w=!0:k===dF&&(w=!0,c.charCodeAt(m)===sw&&++m),c.slice(D+1,T-1).replace(/""/g,'"')}for(;m<p;){if((k=c.charCodeAt(T=m++))===sw)w=!0;else if(k===dF)w=!0,c.charCodeAt(m)===sw&&++m;else if(k!==n)continue;return c.slice(D,T)}return v=!0,c.slice(D,p)}for(;(y=E())!==cF;){for(var A=[];y!==Q1e&&y!==cF;)A.push(y),y=E();d&&(A=d(A,b++))==null||h.push(A)}return h}function o(c,d){return c.map(function(h){return d.map(function(p){return f(h[p])}).join(e)})}function s(c,d){return d==null&&(d=eve(c)),[d.map(f).join(e)].concat(o(c,d)).join(`
`)}function a(c,d){return d==null&&(d=eve(c)),o(c,d).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(f).join(e)}function f(c){return c==null?"":c instanceof Date?qKe(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:f}}function GKe(e){return e}function VKe(e){if(e==null)return GKe;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,f=a.length,c=new Array(f);for(c[0]=(t+=a[0])*r+o,c[1]=(n+=a[1])*i+s;u<f;)c[u]=a[u],++u;return c}}function WKe(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function YKe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return tve(e,n)})}:tve(e,t)}function tve(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=sTe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function sTe(e,t){var n=VKe(e.transform),r=e.arcs;function i(f,c){c.length&&c.pop();for(var d=r[f<0?~f:f],h=0,p=d.length;h<p;++h)c.push(n(d[h],h));f<0&&WKe(c,p)}function o(f){return n(f)}function s(f){for(var c=[],d=0,h=f.length;d<h;++d)i(f[d],c);return c.length<2&&c.push(c[0]),c}function a(f){for(var c=s(f);c.length<4;)c.push(c[0]);return c}function l(f){return f.map(a)}function u(f){var c=f.type,d;switch(c){case"GeometryCollection":return{type:c,geometries:f.geometries.map(u)};case"Point":d=o(f.coordinates);break;case"MultiPoint":d=f.coordinates.map(o);break;case"LineString":d=s(f.arcs);break;case"MultiLineString":d=f.arcs.map(s);break;case"Polygon":d=l(f.arcs);break;case"MultiPolygon":d=f.arcs.map(l);break;default:return null}return{type:c,coordinates:d}}return u(t)}function XKe(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,f){var c=e.arcs[u<0?~u:u],d;c.length<3&&!c[1][0]&&!c[1][1]&&(d=t[++s],t[s]=u,t[f]=d)}),t.forEach(function(u){var f=a(u),c=f[0],d=f[1],h,p;if(h=i[c])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=c,p=i[c]){delete i[p.end];var b=p===h?h:p.concat(h);r[b.start=p.start]=i[b.end=h.end]=b}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=c]=i[h.end=d]=h});function a(u){var f=e.arcs[u<0?~u:u],c=f[0],d;return e.transform?(d=[0,0],f.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=f[f.length-1],u<0?[d,c]:[c,d]}function l(u,f){for(var c in u){var d=u[c];delete f[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function ZKe(e){return sTe(e,KKe.apply(this,arguments))}function KKe(e,t,n){var r,i,o;if(arguments.length>1)r=JKe(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:XKe(e,r)}}function JKe(e,t,n){var r=[],i=[],o;function s(c){var d=c<0?~c:c;(i[d]||(i[d]=[])).push({i:c,g:o})}function a(c){c.forEach(s)}function l(c){c.forEach(a)}function u(c){c.forEach(l)}function f(c){switch(o=c,c.type){case"GeometryCollection":c.geometries.forEach(f);break;case"LineString":a(c.arcs);break;case"MultiLineString":case"Polygon":l(c.arcs);break;case"MultiPolygon":u(c.arcs);break}}return f(t),i.forEach(n==null?function(c){r.push(c[0].i)}:function(c){n(c[0].g,c[c.length-1].g)&&r.push(c[0].i)}),r}const ea="year",Fl="quarter",Ta="month",gs="week",Ml="date",Sa="day",If="dayofyear",lu="hours",uu="minutes",Iu="seconds",Dc="milliseconds",EI=[ea,Fl,Ta,gs,Ml,Sa,If,lu,uu,Iu,Dc],hF=EI.reduce((e,t,n)=>(e[t]=1+n,e),{});function SI(e){const t=Pt(e).slice(),n={};return t.length||st("Missing time unit."),t.forEach(i=>{Yt(hF,i)?n[i]=1:st(`Invalid time unit: ${i}.`)}),(n[gs]||n[Sa]?1:0)+(n[Fl]||n[Ta]||n[Ml]?1:0)+(n[If]?1:0)>1&&st(`Incompatible time units: ${e}`),t.sort((i,o)=>hF[i]-hF[o]),t}const QKe={[ea]:"%Y ",[Fl]:"Q%q ",[Ta]:"%b ",[Ml]:"%d ",[gs]:"W%U ",[Sa]:"%a ",[If]:"%j ",[lu]:"%H:00",[uu]:"00:%M",[Iu]:":%S",[Dc]:".%L",[`${ea}-${Ta}`]:"%Y-%m ",[`${ea}-${Ta}-${Ml}`]:"%Y-%m-%d ",[`${lu}-${uu}`]:"%H:%M"};function aTe(e,t){const n=rr({},QKe,t),r=SI(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const Cm=new Date;function AI(e){return Cm.setFullYear(e),Cm.setMonth(0),Cm.setDate(1),Cm.setHours(0,0,0,0),Cm}function lTe(e){return cTe(new Date(e))}function uTe(e){return tO(new Date(e))}function cTe(e){return Gd.count(AI(e.getFullYear())-1,e)}function tO(e){return U1.count(AI(e.getFullYear())-1,e)}function nO(e){return AI(e).getDay()}function eJe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function fTe(e){return hTe(new Date(e))}function dTe(e){return rO(new Date(e))}function hTe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Rp.count(t-1,e)}function rO(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return q1.count(t-1,e)}function iO(e){return Cm.setTime(Date.UTC(e,0,1)),Cm.getUTCDay()}function tJe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function pTe(e,t,n,r,i){const o=t||1,s=qr(e),a=(y,v,w)=>(w=w||y,nJe(n[w],r[w],y===s&&o,v)),l=new Date,u=Tc(e),f=u[ea]?a(ea):Fa(2012),c=u[Ta]?a(Ta):u[Fl]?a(Fl):fp,d=u[gs]&&u[Sa]?a(Sa,1,gs+Sa):u[gs]?a(gs,1):u[Sa]?a(Sa,1):u[Ml]?a(Ml,1):u[If]?a(If,1):K1,h=u[lu]?a(lu):fp,p=u[uu]?a(uu):fp,m=u[Iu]?a(Iu):fp,b=u[Dc]?a(Dc):fp;return function(y){l.setTime(+y);const v=f(l);return i(v,c(l),d(l,v),h(l),p(l),m(l),b(l))}}function nJe(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Qb(e,t,n){return t+e*7-(n+6)%7}const rJe={[ea]:e=>e.getFullYear(),[Fl]:e=>Math.floor(e.getMonth()/3),[Ta]:e=>e.getMonth(),[Ml]:e=>e.getDate(),[lu]:e=>e.getHours(),[uu]:e=>e.getMinutes(),[Iu]:e=>e.getSeconds(),[Dc]:e=>e.getMilliseconds(),[If]:e=>cTe(e),[gs]:e=>tO(e),[gs+Sa]:(e,t)=>Qb(tO(e),e.getDay(),nO(t)),[Sa]:(e,t)=>Qb(1,e.getDay(),nO(t))},iJe={[Fl]:e=>3*e,[gs]:(e,t)=>Qb(e,0,nO(t))};function gTe(e,t){return pTe(e,t||1,rJe,iJe,eJe)}const oJe={[ea]:e=>e.getUTCFullYear(),[Fl]:e=>Math.floor(e.getUTCMonth()/3),[Ta]:e=>e.getUTCMonth(),[Ml]:e=>e.getUTCDate(),[lu]:e=>e.getUTCHours(),[uu]:e=>e.getUTCMinutes(),[Iu]:e=>e.getUTCSeconds(),[Dc]:e=>e.getUTCMilliseconds(),[If]:e=>hTe(e),[gs]:e=>rO(e),[Sa]:(e,t)=>Qb(1,e.getUTCDay(),iO(t)),[gs+Sa]:(e,t)=>Qb(rO(e),e.getUTCDay(),iO(t))},sJe={[Fl]:e=>3*e,[gs]:(e,t)=>Qb(e,0,iO(t))};function mTe(e,t){return pTe(e,t||1,oJe,sJe,tJe)}const aJe={[ea]:Mf,[Fl]:J2.every(3),[Ta]:J2,[gs]:U1,[Ml]:Gd,[Sa]:Gd,[If]:Gd,[lu]:gD,[uu]:hD,[Iu]:Nd,[Dc]:Wb},lJe={[ea]:Of,[Fl]:Q2.every(3),[Ta]:Q2,[gs]:q1,[Ml]:Rp,[Sa]:Rp,[If]:Rp,[lu]:mD,[uu]:pD,[Iu]:Nd,[Dc]:Wb};function tv(e){return aJe[e]}function nv(e){return lJe[e]}function yTe(e,t,n){return e?e.offset(t,n):void 0}function bTe(e,t,n){return yTe(tv(e),t,n)}function vTe(e,t,n){return yTe(nv(e),t,n)}function xTe(e,t,n,r){return e?e.range(t,n,r):void 0}function wTe(e,t,n,r){return xTe(tv(e),t,n,r)}function _Te(e,t,n,r){return xTe(nv(e),t,n,r)}const Iw=1e3,Pw=Iw*60,Nw=Pw*60,TD=Nw*24,uJe=TD*7,nve=TD*30,oO=TD*365,ETe=[ea,Ta,Ml,lu,uu,Iu,Dc],Bw=ETe.slice(0,-1),zw=Bw.slice(0,-1),jw=zw.slice(0,-1),cJe=jw.slice(0,-1),fJe=[ea,gs],rve=[ea,Ta],STe=[ea],aw=[[Bw,1,Iw],[Bw,5,5*Iw],[Bw,15,15*Iw],[Bw,30,30*Iw],[zw,1,Pw],[zw,5,5*Pw],[zw,15,15*Pw],[zw,30,30*Pw],[jw,1,Nw],[jw,3,3*Nw],[jw,6,6*Nw],[jw,12,12*Nw],[cJe,1,TD],[fJe,1,uJe],[rve,1,nve],[rve,3,3*nve],[STe,1,oO]];function ATe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(fE(t))/n;let i=QT(a=>a[2]).right(aw,r),o,s;return i===aw.length?(o=STe,s=Zm(t[0]/oO,t[1]/oO,n)):i?(i=aw[r/aw[i-1][2]<aw[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=ETe,s=Math.max(Zm(t[0],t[1],n),1)),{units:o,step:s}}function Uw(e){const t={};return n=>t[n]||(t[n]=e(n))}function dJe(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=hJe(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function hJe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function CTe(e){const t=Uw(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=wbe(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return dJe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=wbe(s??",f");const a=Zm(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=_ze(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=wze(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=xze(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let sO;kTe();function kTe(){return sO=CTe({format:Eze,formatPrefix:Sze})}function TTe(e){return CTe(vze(e))}function S3(e){return arguments.length?sO=TTe(e):sO}function ive(e,t,n){n=n||{},$t(n)||st(`Invalid time multi-format specifier: ${n}`);const r=t(Iu),i=t(uu),o=t(lu),s=t(Ml),a=t(gs),l=t(Ta),u=t(Fl),f=t(ea),c=e(n[Dc]||".%L"),d=e(n[Iu]||":%S"),h=e(n[uu]||"%I:%M"),p=e(n[lu]||"%I %p"),m=e(n[Ml]||n[Sa]||"%a %d"),b=e(n[gs]||"%b %d"),y=e(n[Ta]||"%B"),v=e(n[Fl]||"%B"),w=e(n[ea]||"%Y");return E=>(r(E)<E?c:i(E)<E?d:o(E)<E?h:s(E)<E?p:l(E)<E?a(E)<E?m:b:f(E)<E?u(E)<E?y:v:w)(E)}function DTe(e){const t=Uw(e.format),n=Uw(e.utcFormat);return{timeFormat:r=>Nt(r)?t(r):ive(t,tv,r),utcFormat:r=>Nt(r)?n(r):ive(n,nv,r),timeParse:Uw(e.parse),utcParse:Uw(e.utcParse)}}let aO;LTe();function LTe(){return aO=DTe({format:C$,parse:f3e,utcFormat:k$,utcParse:d3e})}function RTe(e){return DTe(s3e(e))}function n_(e){return arguments.length?aO=RTe(e):aO}const lO=(e,t)=>rr({},e,t);function FTe(e,t){const n=e?TTe(e):S3(),r=t?RTe(t):n_();return lO(n,r)}function CI(e,t){const n=arguments.length;return n&&n!==2&&st("defaultLocale expects either zero or two arguments."),n?lO(S3(e),n_(t)):lO(S3(),n_())}function pJe(){return kTe(),LTe(),CI()}const gJe=/^(data:|([A-Za-z]+:)?\/\/)/,mJe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,yJe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ove="file://";function bJe(e,t){return n=>({options:n||{},sanitize:xJe,load:vJe,fileAccess:!!t,file:wJe(t),http:EJe(e)})}async function vJe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function xJe(e,t){t=rr({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=mJe.test(e.replace(yJe,""));(e==null||typeof e!="string"||!a)&&st("Sanitize failure, invalid URI: "+Tt(e));const l=gJe.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(ove))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(ove.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function wJe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):_Je}async function _Je(){st("No file system access.")}function EJe(e){return e?async function(t,n){const r=rr({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?ir(o[i])?o[i]():o.text():st(o.status+""+o.statusText)}:SJe}async function SJe(){st("No HTTP fetch method available.")}const AJe=e=>e!=null&&e===e,CJe=e=>e==="true"||e==="false"||e===!0||e===!1,kJe=e=>!Number.isNaN(Date.parse(e)),MTe=e=>!Number.isNaN(+e)&&!(e instanceof Date),TJe=e=>MTe(e)&&Number.isInteger(+e),uO={boolean:xI,integer:Aa,number:Aa,date:wI,string:_I,unknown:Ra},aA=[CJe,TJe,MTe,kJe],DJe=["boolean","integer","number","date"];function OTe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=aA.length,i=aA.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&AJe(l)&&!aA[a](l)&&(i[a]=0,++s,s===aA.length))return"string";return DJe[i.reduce((o,s)=>o===0?s:o,0)-1]}function $Te(e,t){return t.reduce((n,r)=>(n[r]=OTe(e,r),n),{})}function sve(e){const t=function(n,r){const i={delimiter:e};return kI(n,r?rr(r,i):i)};return t.responseType="text",t}function kI(e,t){return t.header&&(e=t.header.map(Tt).join(t.delimiter)+`
`+e),HKe(t.delimiter).parse(e+"")}kI.responseType="text";function LJe(e){return typeof Buffer=="function"&&ir(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function TI(e,t){const n=t&&t.property?Ou(t.property):Ra;return $t(e)&&!LJe(e)?RJe(n(e),t):n(JSON.parse(e))}TI.responseType="json";function RJe(e,t){return!at(e)&&Jke(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const FJe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function ITe(e,t){let n,r,i,o;return e=TI(e,t),t&&t.feature?(n=YKe,i=t.feature):t&&t.mesh?(n=ZKe,i=t.mesh,o=FJe[t.filter]):st("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):st("Invalid TopoJSON object: "+i),r&&r.features||[r]}ITe.responseType="json";const mC={dsv:kI,csv:sve(","),tsv:sve("	"),json:TI,topojson:ITe};function DI(e,t){return arguments.length>1?(mC[e]=t,this):Yt(mC,e)?mC[e]:null}function PTe(e){const t=DI(e);return t&&t.responseType||"text"}function NTe(e,t,n,r){t=t||{};const i=DI(t.type||"json");return i||st("Unknown data format type: "+t.type),e=i(e,t),t.parse&&MJe(e,t.parse,n,r),Yt(e,"columns")&&delete e.columns,e}function MJe(e,t,n,r){if(!e.length)return;const i=n_();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,f,c;t==="auto"&&(t=$Te(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let m,b;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),b=m[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(m[0]==="utc"?r:n)(b);if(!uO[p])throw Error("Illegal format pattern: "+h+":"+p);return uO[p]});for(l=0,f=e.length,c=o.length;l<f;++l)for(s=e[l],u=0;u<c;++u)a=o[u],s[a]=d[u](s[a])}const DD=bJe(typeof fetch<"u"&&fetch,null);function LD(e){const t=e||Ra,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function yC(e,t){try{await t(e)}catch(n){e.error(n)}}const BTe=Symbol("vega_id");let OJe=1;function RD(e){return!!(e&&wn(e))}function wn(e){return e[BTe]}function zTe(e,t){return e[BTe]=t,e}function yi(e){const t=e===Object(e)?e:{data:e};return wn(t)?t:zTe(t,OJe++)}function LI(e){return FD(e,yi({}))}function FD(e,t){for(const n in e)t[n]=e[n];return t}function jTe(e,t){return zTe(t,wn(e))}function L0(e,t){return e?t?(n,r)=>e(n,r)||wn(t(n))-wn(t(r)):(n,r)=>e(n,r)||wn(n)-wn(r):null}function UTe(e){return e&&e.constructor===R0}function R0(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:R0,insert(a){const l=Pt(a),u=l.length;for(let f=0;f<u;++f)e.push(l[f]);return this},remove(a){const l=ir(a)?r:t,u=Pt(a),f=u.length;for(let c=0;c<f;++c)l.push(u[c]);return this},modify(a,l,u){const f={field:l,value:Fa(u)};return ir(a)?(f.filter=a,i.push(f)):(f.tuple=a,n.push(f)),this},encode(a,l){return ir(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},f={};let c,d,h,p,m,b;for(c=0,d=l.length;c<d;++c)u[wn(l[c])]=1;for(c=0,d=t.length;c<d;++c)m=t[c],u[wn(m)]=-1;for(c=0,d=r.length;c<d;++c)p=r[c],l.forEach(v=>{p(v)&&(u[wn(v)]=-1)});for(c=0,d=e.length;c<d;++c)m=e[c],b=wn(m),u[b]?u[b]=1:a.add.push(yi(e[c]));for(c=0,d=l.length;c<d;++c)m=l[c],u[wn(m)]<0&&a.rem.push(m);function y(v,w,E){E?v[w]=E(v):a.encode=w,s||(f[wn(v)]=v)}for(c=0,d=n.length;c<d;++c)h=n[c],m=h.tuple,p=h.field,b=u[wn(m)],b>0&&(y(m,p,h.value),a.modifies(p));for(c=0,d=i.length;c<d;++c)h=i[c],p=h.filter,l.forEach(v=>{p(v)&&u[wn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[wn(v)]>0):l.slice();else for(b in f)a.mod.push(f[b]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const bC="_:mod:_";function MD(){Object.defineProperty(this,bC,{writable:!0,value:{}})}MD.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[bC];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[bC];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[bC]={},this}};let $Je=0;const IJe="pulse",PJe=new MD,NJe=1,BJe=2;function Ui(e,t,n,r){this.id=++$Je,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function ave(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ui.prototype={targets(){return this._targets||(this._targets=LD(cE))},set(e){return this.value!==e?(this.value=e,1):0},skip:ave(NJe),modified:ave(BJe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new MD,i=this._argops=this._argops||[],o=[];let s,a,l,u;const f=(c,d,h)=>{h instanceof Ui?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:c,index:d})):r.set(c,d,h)};for(s in e)if(a=e[s],s===IJe)Pt(a).forEach(c=>{c instanceof Ui?c!==this&&(c.targets().add(this),o.push(c)):st("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)f(s,u,a[u]);else f(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||PJe,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function zJe(e,t,n,r){let i=1,o;return e instanceof Ui?o=e:e&&e.prototype instanceof Ui?o=new e:ir(e)?o=new Ui(null,e):(i=0,o=new Ui(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function jJe(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let UJe=0;function OD(e,t,n){this.id=++UJe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function ep(e,t,n){return new OD(e,t,n)}OD.prototype={_filter:$u,_apply:Ra,targets(){return this._targets||(this._targets=LD(cE))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=ep(e);return this.targets().add(t),t},apply(e){const t=ep(null,e);return this.targets().add(t),t},merge(){const e=ep();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=ep();return this.targets().add(ep(null,null,bI(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(ep(null,null,()=>n=!0)),t.targets().add(ep(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=$u,this._targets=null}};function qJe(e,t,n,r){const i=this,o=ep(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(f){i.error(f)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Pt(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function HJe(e,t){const n=this.locale();return NTe(e,t,n.timeParse,n.utcParse)}function GJe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function VJe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:PTe(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function WJe(e,t,n){const r=this,i=r._pending||YJe(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove($u).insert(o.data||[])),i.done(),o}function YJe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const XJe={skip:!0};function ZJe(e,t,n,r,i){return(e instanceof Ui?JJe:KJe)(this,e,t,n,r,i),this}function KJe(e,t,n,r,i,o){const s=rr({},o,XJe);let a,l;ir(n)||(n=Fa(n)),r===void 0?a=u=>e.touch(n(u)):ir(r)?(l=new Ui(null,r,i,!1),a=u=>{l.evaluate(u);const f=n(u),c=l.value;UTe(c)?e.pulse(f,c,o):e.update(f,c,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function JJe(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new Ui(null,QJe(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function QJe(e,t){return t=ir(t)?t:Fa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function eQe(e){e.rank=++this._rank}function tQe(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&st("Cycle detected in dataflow graph.")}const A3={},df=1,ip=2,kd=4,nQe=df|ip,lve=df|kd,$y=df|ip|kd,uve=8,lw=16,cve=32,fve=64;function Mp(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function pF(e,t){const n=[];return rp(e,t,r=>n.push(r)),n}function dve(e,t){const n={};return e.visit(t,r=>{n[wn(r)]=1}),r=>n[wn(r)]?null:r}function lA(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Mp.prototype={StopPropagation:A3,ADD:df,REM:ip,MOD:kd,ADD_REM:nQe,ADD_MOD:lve,ALL:$y,REFLOW:uve,SOURCE:lw,NO_SOURCE:cve,NO_FIELDS:fve,fork(e){return new Mp(this.dataflow).init(this,e)},clone(){const e=this.fork($y);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize($y|lw)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Mp(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&fve)&&(n.fields=e.fields),t&df?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&ip?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&kd?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&cve?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||$y;return t&df&&this.add.length||t&ip&&this.rem.length||t&kd&&this.mod.length},reflow(e){if(e)return this.fork($y).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(kd,dve(this,df))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&df&&(n.addF=lA(n.addF,t)),e&ip&&(n.remF=lA(n.remF,t)),e&kd&&(n.modF=lA(n.modF,t)),e&lw&&(n.srcF=lA(n.srcF,t)),n},materialize(e){e=e||$y;const t=this;return e&df&&t.addF&&(t.add=pF(t.add,t.addF),t.addF=null),e&ip&&t.remF&&(t.rem=pF(t.rem,t.remF),t.remF=null),e&kd&&t.modF&&(t.mod=pF(t.mod,t.modF),t.modF=null),e&lw&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&lw)return rp(n.source,n.srcF,r),n;e&df&&rp(n.add,n.addF,r),e&ip&&rp(n.rem,n.remF,r),e&kd&&rp(n.mod,n.modF,r);const i=n.source;if(e&uve&&i){const o=n.add.length+n.mod.length;o===i.length||(o?rp(i,dve(n,lve),r):rp(i,n.srcF,r))}return n}};function RI(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}Lt(RI,Mp,{fork(e){const t=new Mp(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){st("MultiPulse does not support filtering.")},materialize(){st("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function rQe(e,t,n){const r=this,i=[];if(r._pulse)return qTe(r);if(r._pending&&await r._pending,t&&await yC(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Mp(r,o,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=LD(cE);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=A3),l!==A3&&a._targets&&a._targets.forEach(f=>r._enqueue(f)),++s}}catch(f){r._heap.clear(),u=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const f=r._postrun.sort((c,d)=>d.priority-c.priority);r._postrun=[];for(let c=0;c<f.length;++c)await yC(r,f[c].callback)}return n&&await yC(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(c=>{try{c(r)}catch(d){r.error(d)}})})),r}async function iQe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function oQe(e,t,n){return this._pulse?qTe(this):(this.evaluate(e,t,n),this)}function sQe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function qTe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function aQe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function lQe(e,t){const n=e.source,r=this._clock;return n&&at(n)?new RI(this,r,n.map(i=>i.pulse),t):this._input[e.id]||uQe(this._pulse,n&&n.pulse)}function uQe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==A3&&(e.source=t.source),e)}const FI={skip:!1,force:!1};function cQe(e,t){const n=t||FI;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function fQe(e,t,n){const r=n||FI;return(e.set(t)||r.force)&&this.touch(e,r),this}function dQe(e,t,n){this.touch(e,n||FI);const r=new Mp(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function hQe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),HTe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,pQe(t,0,e)):r=n,r}}}function HTe(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function pQe(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,HTe(e,r,t,n)}function Sb(){this.logger(hI()),this.logLevel(fI),this._clock=0,this._rank=0,this._locale=CI();try{this._loader=DD()}catch{}this._touched=LD(cE),this._input={},this._pulse=null,this._heap=hQe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function uw(e){return function(){return this._log[e].apply(this,arguments)}}Sb.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:uw("error"),warn:uw("warn"),info:uw("info"),debug:uw("debug"),logLevel:uw("level"),cleanThreshold:1e4,add:zJe,connect:jJe,rank:eQe,rerank:tQe,pulse:dQe,touch:cQe,update:fQe,changeset:R0,ingest:GJe,parse:HJe,preload:WJe,request:VJe,events:qJe,on:ZJe,evaluate:rQe,run:oQe,runAsync:iQe,runAfter:sQe,_enqueue:aQe,_getPulse:lQe};function rt(e,t){Ui.call(this,e,null,t)}Lt(rt,Ui,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const e1={};function GTe(e){const t=VTe(e);return t&&t.Definition||null}function VTe(e){return e=e&&e.toLowerCase(),Yt(e1,e)?e1[e]:null}function*WTe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function MI(e,t,n){const r=Float64Array.from(WTe(e,n));return r.sort(z2),t.map(i=>WCe(r,i))}function OI(e,t){return MI(e,[.25,.5,.75],t)}function $I(e,t){const n=e.length,r=rUe(e,t),i=OI(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function YTe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,f,c,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(f=h/t,c=0,d=e.steps.length;c<d&&e.steps[c]<f;++c);a=e.steps[Math.max(0,c-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(c=0,d=i.length;c<d;++c)f=a/i[c],f>=u&&h/f<=t&&(a=f)}f=Math.log(a);const p=f>=0?0:~~(-f/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(o/a+m)*a,o=o<f?f-a:f,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Pu=Math.random;function gQe(e){Pu=e}function XTe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(WTe(e,r)),o=i.length,s=t;let a,l,u,f;for(u=0,f=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Pu()*o)];f[u]=a/o}return f.sort(z2),[qM(f,n/2),qM(f,1-n/2)]}function ZTe(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,f=l+t,c;for(;a<i;++a){if(c=r(e[a]),c>=f){for(u=(l+u)/2;s<a;++s)o[s]=u;f=c+t,l=c}u=c}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?mQe(o,t+t/4):o}function mQe(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function yQe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function bQe(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Pu())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const KTe=Math.sqrt(2*Math.PI),vQe=Math.SQRT2;let cw=NaN;function $D(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(cw===cw)n=cw,cw=NaN;else{do n=Pu()*2-1,r=Pu()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,cw=r*o}return e+n*t}function II(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*KTe)}function ID(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function PD(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*vQe*xQe(2*e-1)}function xQe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function PI(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>$D(n,r),pdf:o=>II(o,n,r),cdf:o=>ID(o,n,r),icdf:o=>PD(o,n,r)};return i.mean(e).stdev(t)}function NI(e,t){const n=PI();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=$I(e)),i):t},sample(){return e[~~(Pu()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function BI(e,t){return e=e||0,t=t??1,Math.exp(e+$D()*t)}function zI(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*KTe*e)}function jI(e,t,n){return ID(Math.log(e),t,n)}function UI(e,t,n){return Math.exp(PD(e,t,n))}function JTe(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>BI(n,r),pdf:o=>zI(o,n,r),cdf:o=>jI(o,n,r),icdf:o=>UI(o,n,r)};return i.mean(e).stdev(t)}function QTe(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Pu();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function qI(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Pu()}function HI(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function GI(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function VI(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function eDe(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>qI(n,r),pdf:o=>HI(o,n,r),cdf:o=>GI(o,n,r),icdf:o=>VI(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function WI(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function dE(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function ND(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,f,c,d;for(d of e)o[a]=f=+t(d),s[a]=c=+n(d),++a,l+=(f-l)/a,u+=(c-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function hE(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function rv(e,t,n,r,i){let o=0,s=0;return hE(e,t,n,(a,l)=>{const u=l-i(a),f=l-r;o+=u*u,s+=f*f}),1-o/s}function YI(e,t,n){let r=0,i=0,o=0,s=0,a=0;hE(e,t,n,(f,c)=>{++a,r+=(f-r)/a,i+=(c-i)/a,o+=(f*c-o)/a,s+=(f*f-s)/a});const l=dE(r,i,o,s),u=f=>l[0]+l[1]*f;return{coef:l,predict:u,rSquared:rv(e,t,n,i,u)}}function tDe(e,t,n){let r=0,i=0,o=0,s=0,a=0;hE(e,t,n,(f,c)=>{++a,f=Math.log(f),r+=(f-r)/a,i+=(c-i)/a,o+=(f*c-o)/a,s+=(f*f-s)/a});const l=dE(r,i,o,s),u=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:u,rSquared:rv(e,t,n,i,u)}}function nDe(e,t,n){const[r,i,o,s]=ND(e,t,n);let a=0,l=0,u=0,f=0,c=0,d,h,p;hE(e,t,n,(v,w)=>{d=r[c++],h=Math.log(w),p=d*w,a+=(w*h-a)/c,l+=(p-l)/c,u+=(p*h-u)/c,f+=(d*p-f)/c});const[m,b]=dE(l/s,a/s,u/s,f/s),y=v=>Math.exp(m+b*(v-o));return{coef:[Math.exp(m-b*o),b],predict:y,rSquared:rv(e,t,n,s,y)}}function rDe(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;hE(e,t,n,(c,d)=>{const h=Math.log(c),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=dE(r,i,o,s),f=c=>u[0]*Math.pow(c,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:f,rSquared:rv(e,t,n,a,f)}}function XI(e,t,n){const[r,i,o,s]=ND(e,t,n),a=r.length;let l=0,u=0,f=0,c=0,d=0,h,p,m,b;for(h=0;h<a;)p=r[h],m=i[h++],b=p*p,l+=(b-l)/h,u+=(b*p-u)/h,f+=(b*b-f)/h,c+=(p*m-c)/h,d+=(b*m-d)/h;const y=f-l*l,v=l*y-u*u,w=(d*l-c*u)/v,E=(c*y-d*u)/v,A=-w*l,T=D=>(D=D-o,w*D*D+E*D+A+s);return{coef:[A-E*o+w*o*o+s,E-2*w*o,w],predict:T,rSquared:rv(e,t,n,s,T)}}function iDe(e,t,n,r){if(r===0)return WI(e,t,n);if(r===1)return YI(e,t,n);if(r===2)return XI(e,t,n);const[i,o,s,a]=ND(e,t,n),l=i.length,u=[],f=[],c=r+1;let d,h,p,m,b;for(d=0;d<c;++d){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],d)*o[p];for(u.push(m),b=new Float64Array(c),h=0;h<c;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],d+h);b[h]=m}f.push(b)}f.push(u);const y=_Qe(f),v=w=>{w-=s;let E=a+y[0]+y[1]*w+y[2]*w*w;for(d=3;d<c;++d)E+=y[d]*Math.pow(w,d);return E};return{coef:wQe(c,y,-s,a),predict:v,rSquared:rv(e,t,n,a,v)}}function wQe(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function _Qe(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const hve=2,pve=1e-12;function oDe(e,t,n,r){const[i,o,s,a]=ND(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),f=new Float64Array(l),c=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=hve;){const p=[0,u-1];for(let b=0;b<l;++b){const y=i[b],v=p[0],w=p[1],E=y-i[v]>i[w]-y?v:w;let A=0,T=0,D=0,k=0,R=0;const M=1/Math.abs(i[E]-y||1);for(let L=v;L<=w;++L){const $=i[L],I=o[L],U=EQe(Math.abs(y-$)*M)*d[L],q=$*U;A+=U,T+=q,D+=I*U,k+=I*q,R+=$*q}const[B,K]=dE(T/A,D/A,k/A,R/A);f[b]=B+K*y,c[b]=Math.abs(o[b]-f[b]),SQe(i,b+1,p)}if(h===hve)break;const m=YCe(c);if(Math.abs(m)<pve)break;for(let b=0,y,v;b<l;++b)y=c[b]/(6*m),d[b]=y>=1?pve:(v=1-y*y)*v}return AQe(i,f,s,a)}function EQe(e){return(e=1-e*e*e)*e*e}function SQe(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function AQe(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const CQe=.5*Math.PI/180;function BD(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],f=[];if(n===r){for(let m=1;m<r;++m)u.push(i(o+m/n*a));return u.push(i(s)),u}else{f.push(i(s));for(let m=n;--m>0;)f.push(i(o+m/n*a))}let c=u[0],d=f[f.length-1];const h=1/a,p=kQe(c[1],f);for(;d;){const m=i((c[0]+d[0])/2);m[0]-c[0]>=l&&TQe(c,m,d,h,p)>CQe?f.push(m):(c=d,u.push(d),f.pop()),d=f[f.length-1]}return u}function kQe(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function TQe(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function DQe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function cO(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:DQe(e)}function sDe(e,t,n){return n||e+(t?"_"+t:"")}const gF=()=>{},LQe={init:gF,add:gF,rem:gF,idx:0},r_={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},pE=Object.keys(r_).filter(e=>e!=="__count__");function RQe(e,t){return(n,r)=>rr({name:e,aggregate_param:r,out:n||e},LQe,t)}[...pE,"__count__"].forEach(e=>{r_[e]=RQe(e,r_[e])});function aDe(e,t,n){return r_[e](n,t)}function lDe(e,t){return e.idx-t.idx}function FQe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=r_[i]())})};return e.forEach(n),Object.values(t).sort(lDe)}function MQe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function OQe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function $Qe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function IQe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function uDe(e,t){const n=t||Ra,r=FQe(e),i=e.slice().sort(lDe);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=MQe,o.prototype.add=OQe,o.prototype.rem=$Qe,o.prototype.set=IQe,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function ZI(e){this._key=e?Ou(e):wn,this.reset()}const aa=ZI.prototype;aa.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};aa.add=function(e){this._add.push(e)};aa.rem=function(e){this._rem.push(e)};aa.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};aa.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",Yt(n,o)||(n[o]=1,++i);return i};aa.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Zke(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};aa.argmin=function(e){return this.extent(e)[0]||{}};aa.argmax=function(e){return this.extent(e)[1]||{}};aa.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};aa.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};aa.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=OI(this.values(),e),this._get=e),this._q};aa.q1=function(e){return this.quartile(e)[0]};aa.q2=function(e){return this.quartile(e)[1]};aa.q3=function(e){return this.quartile(e)[2]};aa.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=XTe(this.values(),1e3,.05,e),this._get=e),this._ci};aa.ci0=function(e){return this.ci(e)[0]};aa.ci1=function(e){return this.ci(e)[1]};function qp(e){rt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}qp.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:pE},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Lt(qp,rt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,f,c;for(l in a)for(f=a[l].tuple,u=0;u<i;++u)r[u][c=f[n[u]]]=c}o(e._prev),o(t);function s(a,l,u){const f=n[u],c=r[u++];for(const d in c){const h=a?a+"|"+d:d;l[f]=c[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const w=Pt(ka(v)),E=w.length;let A=0,T;for(;A<E;++A)r[T=w[A]]||(r[T]=1,t.push(T))}this._dims=Pt(e.groupby),this._dnames=this._dims.map(v=>{const w=Fo(v);return i(v),n.push(w),w}),this.cellkey=e.key?e.key:cO(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,f={};let c,d,h,p,m,b,y;for(u!==s.length&&st("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(c=o[y],d=s[y],h=a[y]||null,c==null&&d!=="count"&&st("Null aggregate field specified."),m=Fo(c),b=sDe(d,m,l[y]),n.push(b),d==="count"){this._counts.push(b);continue}p=f[m],p||(i(c),p=f[m]=[],p.field=c,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(aDe(d,h,b))}return this._measures=this._measures.map(v=>uDe(v,v.field)),Object.create(null)},cellkey:cO(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new ZI),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?jTe(t.tuple,o):yi(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,f,c;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(f=0,c=this._alen;f<c;++f)o.push(this.celltuple(t[f])),t[f]=null;for(f=0,c=this._mlen;f<c;++f)l=n[f],(l.num===0&&i?s:a).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const PQe=1e-14;function KI(e){rt.call(this,null,e)}KI.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Lt(KI,rt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(ka(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?f=>{const c=r(f);f[a]=c,f[l]=c==null?null:i+o*(1+(c-i)/o)}:f=>f[a]=r(f)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=YTe(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let f=Aa(t(u));return f==null?null:f<i?-1/0:f>o?1/0:(f=Math.max(i,Math.min(f,o-r)),i+r*Math.floor(PQe+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=zl(l,ka(t),e.name||"bin_"+Fo(t))}});function cDe(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(f=>!s[r(f)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?nTe(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function JI(e){rt.call(this,[],e)}JI.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Lt(JI,rt,{transform(e,t){const n=t.fork(t.ALL),r=cDe(wn,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(L0(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function fDe(e){Ui.call(this,null,NQe,e)}Lt(fDe,Ui);function NQe(e){return this.value&&!e.modified()?this.value:yI(e.fields,e.orders)}function QI(e){rt.call(this,null,e)}QI.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function BQe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Lt(QI,rt,{transform(e,t){const n=c=>d=>{for(var h=BQe(a(d),e.case,o)||[],p,m=0,b=h.length;m<b;++m)s.test(p=h[m])||c(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(c=>i[c]=1+(i[c]||0)),f=n(c=>i[c]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=yi({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function eP(e){rt.call(this,null,e)}eP.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Lt(eP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=zQe(a,i,o,e.filter||$u)):n.mod=a,n.source=this.value,n.modifies(r)}});function zQe(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(yi(o)),o={},o[t]=u);return i}const gve={kde:NI,mixture:QTe,normal:PI,lognormal:JTe,uniform:eDe},jQe="distributions",mve="function",UQe="field";function dDe(e,t){const n=e[mve];Yt(gve,n)||st("Unknown distribution function: "+n);const r=gve[n]();for(const i in e)i===UQe?r.data((e.from||t()).map(e[i])):i===jQe?r[i](e[i].map(o=>dDe(o,t))):typeof r[i]===mve&&r[i](e[i]);return r}function tP(e){rt.call(this,null,e)}const hDe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],qQe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:hDe},{name:"weights",type:"number",array:!0}]};tP.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:hDe.concat(qQe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(tP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=dDe(e.distribution,HQe(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&st("Invalid density method: "+s),!e.extent&&!r.data&&st("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||$f(r.data()),u=BD(s,l,i,o).map(f=>{const c={};return c[a[0]]=f[0],c[a[1]]=f[1],yi(c)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function HQe(e){return()=>e.materialize(e.SOURCE).source}function pDe(e,t){return e?e.map((n,r)=>t[r]||Fo(n)):null}function nP(e,t,n){const r=[],i=c=>c(l);let o,s,a,l,u,f;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),f=o[u],f||(o[u]=f=[],f.dims=u,r.push(f)),f.push(n(l));return r}const gDe="bin";function rP(e){rt.call(this,null,e)}rP.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:gDe}]};const GQe=(e,t)=>fE($f(e,t))/30;Lt(rP,rt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=nP(t.source,e.groupby,Ra),i=e.smooth||!1,o=e.field,s=e.step||GQe(n,o),a=L0((p,m)=>o(p)-o(m)),l=e.as||gDe,u=r.length;let f=1/0,c=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const m of ZTe(p,s,i,o))m<f&&(f=m),m>c&&(c=m),p[++h][l]=m}return this.value={start:f,stop:c,step:s},t.reflow(!0).modifies(l)}});function mDe(e){Ui.call(this,null,VQe,e),this.modified(!0)}Lt(mDe,Ui);function VQe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:zl(n=>t(n,e),ka(t),Fo(t))}function iP(e){rt.call(this,[void 0,void 0],e)}iP.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Lt(iP,rt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Aa(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Fo(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function oP(e,t){Ui.call(this,e),this.parent=t,this.count=0}Lt(oP,Ui,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function zD(e){rt.call(this,{},e),this._keys=ev();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Lt(zD,rt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=Yt(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new oP(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=wn(l),f=o.get(u);f!==void 0&&(o.delete(u),a(f).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(wn(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=wn(l),f=o.get(u),c=r(l);f===c?a(c).mod(l):(o.set(u,c),a(f).rem(l),a(c).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(wn(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=wn(l),f=o.get(u),c=r(l);f!==c&&(o.set(u,c),a(f).rem(l),a(c).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function yDe(e){Ui.call(this,null,WQe,e)}Lt(yDe,Ui);function WQe(e){return this.value&&!e.modified()?this.value:at(e.name)?Pt(e.name).map(t=>Ou(t)):Ou(e.name,e.as)}function sP(e){rt.call(this,ev(),e)}sP.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Lt(sP,rt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,c=>{const d=wn(c);r.has(d)?r.delete(d):s.push(c)}),t.visit(t.ADD,c=>{l(c,e)?o.push(c):r.set(wn(c),1)});function f(c){const d=wn(c),h=l(c,e),p=r.get(d);h&&p?(r.delete(d),o.push(c)):!h&&!p?(r.set(d,1),s.push(c)):u&&h&&!p&&a.push(c)}return t.visit(t.MOD,f),e.modified()&&(u=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function aP(e){rt.call(this,[],e)}aP.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Lt(aP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=pDe(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,m)=>Math.max(p,m.length),0);let f=0,c,d,h;for(;f<u;++f){for(d=LI(a),c=0;c<s;++c)d[i[c]]=(h=l[c][f])==null?null:h;o&&(d[o]=f),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function lP(e){rt.call(this,[],e)}lP.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Lt(lP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Fo),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let f=0,c;f<l;++f)c=LI(u),c[s]=i[f],c[a]=r[f](u),n.add.push(c)}),this.value=n.source=n.add,n.modifies(o)}});function uP(e){rt.call(this,null,e)}uP.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Lt(uP,rt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function bDe(e){rt.call(this,[],e)}Lt(bDe,rt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=yi(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const uA={value:"value",median:YCe,mean:sUe,min:UM,max:Pm},YQe=[];function cP(e){rt.call(this,[],e)}cP.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function XQe(e){var t=e.method||uA.value,n;if(uA[t]==null)st("Unrecognized imputation method: "+t);else return t===uA.value?(n=e.value!==void 0?e.value:0,()=>n):uA[t]}function ZQe(e){const t=e.field;return n=>n?t(n):NaN}Lt(cP,rt,{transform(e,t){var n=t.fork(t.ALL),r=XQe(e),i=ZQe(e),o=Fo(e.field),s=Fo(e.key),a=(e.groupby||[]).map(Fo),l=KQe(t.source,e.groupby,e.key,e.keyvals),u=[],f=this.value,c=l.domain.length,d,h,p,m,b,y,v,w,E,A;for(b=0,w=l.length;b<w;++b)for(d=l[b],p=d.values,h=NaN,v=0;v<c;++v)if(d[v]==null){for(m=l.domain[v],A={_impute:!0},y=0,E=p.length;y<E;++y)A[a[y]]=p[y];A[s]=m,A[o]=Number.isNaN(h)?h=r(d,i):h,u.push(yi(A))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=u,n}});function KQe(e,t,n,r){var i=y=>y(b),o=[],s=r?r.slice():[],a={},l={},u,f,c,d,h,p,m,b;for(s.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)b=e[d],p=n(b),h=a[p]||(a[p]=s.push(p)),f=(u=t?t.map(i):YQe)+"",(c=l[f])||(c=l[f]=[],o.push(c),c.values=u),c[h-1]=b;return o.domain=s,o}function fP(e){qp.call(this,e)}fP.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:pE},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Lt(fP,qp,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{rr(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function dP(e){rt.call(this,null,e)}dP.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(dP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=nP(r,e.groupby,e.field),o=(e.groupby||[]).map(Fo),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let f=e.extent,c=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&st("Invalid density method: "+a),e.resolve==="shared"&&(f||(f=$f(r,e.field)),c=d=e.steps||d),i.forEach(h=>{const p=NI(h,s)[a],m=e.counts?h.length:1,b=f||$f(h);BD(p,b,c,d).forEach(y=>{const v={};for(let w=0;w<o.length;++w)v[o[w]]=h.dims[w];v[l[0]]=y[0],v[l[1]]=y[1]*m,u.push(yi(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function vDe(e){Ui.call(this,null,JQe,e)}Lt(vDe,Ui);function JQe(e){return this.value&&!e.modified()?this.value:vI(e.fields,e.flat)}function xDe(e){rt.call(this,[],e),this._pending=null}Lt(xDe,rt,{transform(e,t){const n=t.dataflow;return this._pending?mF(this,t,this._pending):QQe(e)?t.StopPropagation:e.values?mF(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Pt(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>mF(this,t,Pt(r.data)))}});function QQe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function mF(e,t,n){n.forEach(yi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function hP(e){rt.call(this,{},e)}hP.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Lt(hP,rt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,f=e.as,c,d,h;return i?(d=i.length,a>1&&!f&&st('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*d&&st('The "as" parameter has too few output field names.'),f=f||i.map(Fo),c=function(p){for(var m=0,b=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++b)p[f[b]]=o;else for(y=0;y<d;++y,++b)p[f[b]]=i[y](v)}):(f||st("Missing output field names."),c=function(p){for(var m=0,b;m<a;++m)b=r.get(n[m](p)),p[f[m]]=b??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,c),u.modifies(f)}});function wDe(e){Ui.call(this,null,eet,e)}Lt(wDe,Ui);function eet(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function _De(e){Ui.call(this,null,tet,e)}Lt(_De,Ui);function tet(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function EDe(e){rt.call(this,null,e)}Lt(EDe,rt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function pP(e){qp.call(this,e)}pP.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:pE,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Lt(pP,qp,{_transform:qp.prototype.transform,transform(e,t){return this._transform(net(e,t),t)}});function net(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=ka(n).concat(ka(r)),s=iet(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>ret(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function ret(e,t,n,r){return zl(i=>t(i)===e?n(i):NaN,r,e+"")}function iet(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(kD),t?i.slice(0,t):i}function SDe(e){zD.call(this,e)}Lt(SDe,zD,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(wn(o),n,t,o);return(e.modified("field")||r&&t.modified(ka(r)))&&st("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(yi(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function gP(e){rt.call(this,null,e)}gP.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Lt(gP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=pDe(e.fields,e.as||[]),o=r?(a,l)=>oet(a,l,r,i):FD;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=wn(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,yi({}));s[wn(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[wn(a)]))}),n}});function oet(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function ADe(e){rt.call(this,null,e)}Lt(ADe,rt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function mP(e){rt.call(this,null,e)}mP.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const set=1e-14;Lt(mP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=nP(i,e.groupby,e.field),s=(e.groupby||[]).map(Fo),a=[],l=e.step||.01,u=e.probs||Kl(l/2,1-set,l),f=u.length;return o.forEach(c=>{const d=MI(c,u);for(let h=0;h<f;++h){const p={};for(let m=0;m<s.length;++m)p[s[m]]=c.dims[m];p[r[0]]=u[h],p[r[1]]=d[h],a.push(yi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function CDe(e){rt.call(this,null,e)}Lt(CDe,rt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=wn(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=LI(i);r[wn(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[wn(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function yP(e){rt.call(this,[],e),this.count=0}yP.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Lt(yP,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((f,c)=>(f[wn(c)]=1,f),{});let s=this.value,a=this.count,l=0;function u(f){let c,d;s.length<i?s.push(f):(d=~~((a+1)*Pu()),d<s.length&&d>=l&&(c=s[d],o[wn(c)]&&n.rem.push(c),s[d]=f)),++a}if(t.rem.length&&(t.visit(t.REM,f=>{const c=wn(f);o[c]&&(o[c]=-1,n.rem.push(f)),--a}),s=s.filter(f=>o[wn(f)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,f=>{o[wn(f)]||u(f)}),l=-1),r&&s.length>i){const f=s.length-i;for(let c=0;c<f;++c)o[wn(s[c])]=-1,n.rem.push(s[c]);s=s.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{o[wn(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(f=>!o[wn(f)])),this.count=a,this.value=n.source=s,n}});function bP(e){rt.call(this,null,e)}bP.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Lt(bP,rt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kl(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,yi(o)}),n.add=t.add.concat(this.value),n}});function kDe(e){rt.call(this,null,e),this.modified(!0)}Lt(kDe,rt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vP(e){rt.call(this,null,e)}const TDe=["unit0","unit1"];vP.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:EI,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:TDe}]};Lt(vP,rt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?nv:tv)(o.unit).offset,a=e.as||TDe,l=a[0],u=a[1],f=o.step;let c=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ka(n)))&&(t=t.reflow(!0),h=t.SOURCE,c=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let b,y;m==null?(p[l]=null,r&&(p[u]=null)):(p[l]=b=y=o(m),r&&(p[u]=y=s(b,f)),b<c&&(c=b),y>d&&(d=y))}),o.start=c,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:ATe({extent:e.extent||$f(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=SI(r),s=this.value||{},a=(n?mTe:gTe)(o,i);return a.unit=qr(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function DDe(e){rt.call(this,ev(),e)}Lt(DDe,rt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function LDe(e){rt.call(this,null,e)}Lt(LDe,rt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(L0(e.sort)):t.source).map(e.field))}});function aet(e,t,n,r){const i=i_[e](t,n);return{init:i.init||fp,update:function(o,s){s[r]=i.next(o)}}}const i_={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=i_.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||st("ntile num must be greater than zero.");const n=i_.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||st("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=uet(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function uet(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const cet=Object.keys(i_);function RDe(e){const t=Pt(e.ops),n=Pt(e.fields),r=Pt(e.params),i=Pt(e.aggregate_params),o=Pt(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},f=[],c=[];let d=!0;function h(p){Pt(ka(p)).forEach(m=>l[m]=1)}h(e.sort),t.forEach((p,m)=>{const b=n[m],y=r[m],v=i[m]||null,w=Fo(b),E=sDe(p,w,o[m]);if(h(b),s.push(E),Yt(i_,p))a.push(aet(p,b,y,E));else{if(b==null&&p!=="count"&&st("Null aggregate field specified."),p==="count"){f.push(E);return}d=!1;let A=u[w];A||(A=u[w]=[],A.field=b,c.push(A)),A.push(aDe(p,v,E))}}),(f.length||c.length)&&(this.cell=fet(c,f,d)),this.inputs=Object.keys(l)}const FDe=RDe.prototype;FDe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};FDe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function fet(e,t,n){e=e.map(l=>uDe(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new ZI;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,f;for(a&&a.values(),u=0,f=t.length;u<f;++u)l[t[u]]=r.num;if(!n)for(u=0,f=o.length;u<f;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function xP(e){rt.call(this,{},e),this._mlen=0,this._mods=[]}xP.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cet.concat(pE)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Lt(xP,rt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=L0(e.sort),i=cO(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new RDe(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)det(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=cDe(wn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function det(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?QT(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Fa(-1)};t.init();for(let c=0;c<l;++c)het(f,s,c,l),o&&pet(f,u),t.update(f,a[c])}function het(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function pet(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const get=Object.freeze(Object.defineProperty({__proto__:null,aggregate:qp,bin:KI,collect:JI,compare:fDe,countpattern:QI,cross:eP,density:tP,dotbin:rP,expression:mDe,extent:iP,facet:zD,field:yDe,filter:sP,flatten:aP,fold:lP,formula:uP,generate:bDe,impute:cP,joinaggregate:fP,kde:dP,key:vDe,load:xDe,lookup:hP,multiextent:wDe,multivalues:_De,params:EDe,pivot:pP,prefacet:SDe,project:gP,proxy:ADe,quantile:mP,relay:CDe,sample:yP,sequence:bP,sieve:kDe,subflow:oP,timeunit:vP,tupleindex:DDe,values:LDe,window:xP},Symbol.toStringTag,{value:"Module"}));function _i(e){return function(){return e}}const yve=Math.abs,ga=Math.atan2,nm=Math.cos,met=Math.max,yF=Math.min,sf=Math.sin,Mm=Math.sqrt,va=1e-12,t1=Math.PI,C3=t1/2,MDe=2*t1;function yet(e){return e>1?0:e<-1?t1:Math.acos(e)}function bve(e){return e>=1?C3:e<=-1?-C3:Math.asin(e)}const fO=Math.PI,dO=2*fO,wm=1e-6,bet=dO-wm;function ODe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vet(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ODe;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let wP=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ODe:vet(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,f=s-t,c=a-n,d=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>wm)if(!(Math.abs(c*l-u*f)>wm)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,m=l*l+u*u,b=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),w=o*Math.tan((fO-Math.acos((m+d-b)/(2*y*v)))/2),E=w/v,A=w/y;Math.abs(E-1)>wm&&this._append`L${t+E*f},${n+E*c}`,this._append`A${o},${o},0,0,${+(c*h>f*p)},${this._x1=t+A*l},${this._y1=n+A*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,f=n+l,c=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>wm||Math.abs(this._y1-f)>wm)&&this._append`L${u},${f}`,r&&(d<0&&(d=d%dO+dO),d>bet?this._append`A${r},${r},0,1,${c},${t-a},${n-l}A${r},${r},0,1,${c},${this._x1=u},${this._y1=f}`:d>wm&&this._append`A${r},${r},0,${+(d>=fO)},${c},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function jD(){return new wP}jD.prototype=wP.prototype;function UD(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wP(t)}function xet(e){return e.innerRadius}function wet(e){return e.outerRadius}function _et(e){return e.startAngle}function Eet(e){return e.endAngle}function Aet(e){return e&&e.padAngle}function Cet(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,f=s-i,c=a-o,d=c*l-f*u;if(!(d*d<va))return d=(f*(t-o)-c*(e-i))/d,[e+d*l,t+d*u]}function cA(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/Mm(a*a+l*l),f=u*l,c=-u*a,d=e+f,h=t+c,p=n+f,m=r+c,b=(d+p)/2,y=(h+m)/2,v=p-d,w=m-h,E=v*v+w*w,A=i-o,T=d*m-p*h,D=(w<0?-1:1)*Mm(met(0,A*A*E-T*T)),k=(T*w-v*D)/E,R=(-T*v-w*D)/E,M=(T*w+v*D)/E,B=(-T*v+w*D)/E,K=k-b,L=R-y,$=M-b,I=B-y;return K*K+L*L>$*$+I*I&&(k=M,R=B),{cx:k,cy:R,x01:-f,y01:-c,x11:k*(i/A-1),y11:R*(i/A-1)}}function ket(){var e=xet,t=wet,n=_i(0),r=null,i=_et,o=Eet,s=Aet,a=null,l=UD(u);function u(){var f,c,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-C3,m=o.apply(this,arguments)-C3,b=yve(m-p),y=m>p;if(a||(a=f=l()),h<d&&(c=h,h=d,d=c),!(h>va))a.moveTo(0,0);else if(b>MDe-va)a.moveTo(h*nm(p),h*sf(p)),a.arc(0,0,h,p,m,!y),d>va&&(a.moveTo(d*nm(m),d*sf(m)),a.arc(0,0,d,m,p,y));else{var v=p,w=m,E=p,A=m,T=b,D=b,k=s.apply(this,arguments)/2,R=k>va&&(r?+r.apply(this,arguments):Mm(d*d+h*h)),M=yF(yve(h-d)/2,+n.apply(this,arguments)),B=M,K=M,L,$;if(R>va){var I=bve(R/d*sf(k)),U=bve(R/h*sf(k));(T-=I*2)>va?(I*=y?1:-1,E+=I,A-=I):(T=0,E=A=(p+m)/2),(D-=U*2)>va?(U*=y?1:-1,v+=U,w-=U):(D=0,v=w=(p+m)/2)}var q=h*nm(v),Y=h*sf(v),X=d*nm(A),te=d*sf(A);if(M>va){var le=h*nm(w),ee=h*sf(w),z=d*nm(E),he=d*sf(E),de;if(b<t1)if(de=Cet(q,Y,z,he,le,ee,X,te)){var ze=q-de[0],He=Y-de[1],je=le-de[0],we=ee-de[1],Ie=1/sf(yet((ze*je+He*we)/(Mm(ze*ze+He*He)*Mm(je*je+we*we)))/2),qe=Mm(de[0]*de[0]+de[1]*de[1]);B=yF(M,(d-qe)/(Ie-1)),K=yF(M,(h-qe)/(Ie+1))}else B=K=0}D>va?K>va?(L=cA(z,he,q,Y,h,K,y),$=cA(le,ee,X,te,h,K,y),a.moveTo(L.cx+L.x01,L.cy+L.y01),K<M?a.arc(L.cx,L.cy,K,ga(L.y01,L.x01),ga($.y01,$.x01),!y):(a.arc(L.cx,L.cy,K,ga(L.y01,L.x01),ga(L.y11,L.x11),!y),a.arc(0,0,h,ga(L.cy+L.y11,L.cx+L.x11),ga($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,K,ga($.y11,$.x11),ga($.y01,$.x01),!y))):(a.moveTo(q,Y),a.arc(0,0,h,v,w,!y)):a.moveTo(q,Y),!(d>va)||!(T>va)?a.lineTo(X,te):B>va?(L=cA(X,te,le,ee,d,-B,y),$=cA(q,Y,z,he,d,-B,y),a.lineTo(L.cx+L.x01,L.cy+L.y01),B<M?a.arc(L.cx,L.cy,B,ga(L.y01,L.x01),ga($.y01,$.x01),!y):(a.arc(L.cx,L.cy,B,ga(L.y01,L.x01),ga(L.y11,L.x11),!y),a.arc(0,0,d,ga(L.cy+L.y11,L.cx+L.x11),ga($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,B,ga($.y11,$.x11),ga($.y01,$.x01),!y))):a.arc(0,0,d,A,E,y)}if(a.closePath(),f)return a=null,f+""||null}return u.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-t1/2;return[nm(c)*f,sf(c)*f]},u.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:_i(+f),u):e},u.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:_i(+f),u):t},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:_i(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_i(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:_i(+f),u):i},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:_i(+f),u):o},u.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:_i(+f),u):s},u.context=function(f){return arguments.length?(a=f??null,u):a},u}function $De(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function IDe(e){this._context=e}IDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _P(e){return new IDe(e)}function PDe(e){return e[0]}function NDe(e){return e[1]}function BDe(e,t){var n=_i(!0),r=null,i=_P,o=null,s=UD(a);e=typeof e=="function"?e:e===void 0?PDe:_i(e),t=typeof t=="function"?t:t===void 0?NDe:_i(t);function a(l){var u,f=(l=$De(l)).length,c,d=!1,h;for(r==null&&(o=i(h=s())),u=0;u<=f;++u)!(u<f&&n(c=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,u,l),+t(c,u,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:_i(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:_i(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:_i(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function zDe(e,t,n){var r=null,i=_i(!0),o=null,s=_P,a=null,l=UD(u);e=typeof e=="function"?e:e===void 0?PDe:_i(+e),t=typeof t=="function"?t:_i(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?NDe:_i(+n);function u(c){var d,h,p,m=(c=$De(c)).length,b,y=!1,v,w=new Array(m),E=new Array(m);for(o==null&&(a=s(v=l())),d=0;d<=m;++d){if(!(d<m&&i(b=c[d],d,c))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}y&&(w[d]=+e(b,d,c),E[d]=+t(b,d,c),a.point(r?+r(b,d,c):w[d],n?+n(b,d,c):E[d]))}if(v)return a=null,v+""||null}function f(){return BDe().defined(i).curve(s).context(o)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:_i(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:_i(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_i(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:_i(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:_i(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:_i(+c),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:_i(!!c),u):i},u.curve=function(c){return arguments.length?(s=c,o!=null&&(a=s(o)),u):s},u.context=function(c){return arguments.length?(c==null?o=a=null:a=s(o=c),u):o},u}const Tet={draw(e,t){const n=Mm(t/t1);e.moveTo(n,0),e.arc(0,0,n,0,MDe)}};function Det(e,t){let n=null,r=UD(i);e=typeof e=="function"?e:_i(e||Tet),t=typeof t=="function"?t:_i(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:_i(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:_i(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Hp(){}function k3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function qD(e){this._context=e}qD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:k3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:k3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Let(e){return new qD(e)}function jDe(e){this._context=e}jDe.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:k3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ret(e){return new jDe(e)}function UDe(e){this._context=e}UDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:k3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fet(e){return new UDe(e)}function qDe(e,t){this._basis=new qD(e),this._beta=t}qDe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Met=function e(t){function n(r){return t===1?new qD(r):new qDe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function T3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function EP(e,t){this._context=e,this._k=(1-t)/6}EP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:T3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:T3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Oet=function e(t){function n(r){return new EP(r,t)}return n.tension=function(r){return e(+r)},n}(0);function SP(e,t){this._context=e,this._k=(1-t)/6}SP.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:T3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $et=function e(t){function n(r){return new SP(r,t)}return n.tension=function(r){return e(+r)},n}(0);function AP(e,t){this._context=e,this._k=(1-t)/6}AP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:T3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Iet=function e(t){function n(r){return new AP(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CP(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>va){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>va){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/f,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function HDe(e,t){this._context=e,this._alpha=t}HDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:CP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pet=function e(t){function n(r){return t?new HDe(r,t):new EP(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function GDe(e,t){this._context=e,this._alpha=t}GDe.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:CP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Net=function e(t){function n(r){return t?new GDe(r,t):new SP(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function VDe(e,t){this._context=e,this._alpha=t}VDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:CP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bet=function e(t){function n(r){return t?new VDe(r,t):new AP(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function WDe(e){this._context=e}WDe.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function zet(e){return new WDe(e)}function vve(e){return e<0?-1:1}function xve(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(vve(o)+vve(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function wve(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bF(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function D3(e){this._context=e}D3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bF(this,this._t0,wve(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bF(this,wve(this,n=xve(this,e,t)),n);break;default:bF(this,this._t0,n=xve(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function YDe(e){this._context=new XDe(e)}(YDe.prototype=Object.create(D3.prototype)).point=function(e,t){D3.prototype.point.call(this,t,e)};function XDe(e){this._context=e}XDe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function jet(e){return new D3(e)}function Uet(e){return new YDe(e)}function ZDe(e){this._context=e}ZDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=_ve(e),i=_ve(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _ve(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function qet(e){return new ZDe(e)}function HD(e,t){this._context=e,this._t=t}HD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Het(e){return new HD(e,.5)}function Get(e){return new HD(e,0)}function Vet(e){return new HD(e,1)}function Op(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Wet=()=>typeof Image<"u"?Image:null;function Vf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Yet=Vf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Xet=Vf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Zet=Vf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ket=Vf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Jet=Vf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Qet=Vf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ett=Vf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ttt=Vf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ntt=Vf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),rtt=Vf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function kP(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const itt="identity",n1="linear",rh="log",gE="pow",mE="sqrt",GD="symlog",e0="time",t0="utc",Af="sequential",iv="diverging",r1="quantile",VD="quantize",WD="threshold",TP="ordinal",hO="point",KDe="band",DP="bin-ordinal",vs="continuous",yE="discrete",bE="discretizing",Uu="interpolating",LP="temporal";function ott(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function stt(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function RP(){const e=vCe().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function f(){const c=t().length,d=r[1]<r[0],h=r[1-d],p=kP(c,a,l);let m=r[d-0];i=(h-m)/(p||1),s&&(i=Math.floor(i)),m+=(h-m-i*(c-a))*u,o=i*(1-a),s&&(m=Math.round(m),o=Math.round(o));const b=Kl(c).map(y=>m+i*y);return n(d?b.reverse():b)}return e.domain=function(c){return arguments.length?(t(c),f()):t()},e.range=function(c){return arguments.length?(r=[+c[0],+c[1]],f()):r.slice()},e.rangeRound=function(c){return r=[+c[0],+c[1]],s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(c){return arguments.length?(s=!!c,f()):s},e.padding=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),a=l,f()):a},e.paddingInner=function(c){return arguments.length?(a=Math.max(0,Math.min(1,c)),f()):a},e.paddingOuter=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),f()):l},e.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),f()):u},e.invertRange=function(c){if(c[0]==null||c[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+c[0],b=+c[1],y,v,w;if(!(m!==m||b!==b)&&(b<m&&(w=m,m=b,b=w),!(b<h[0]||m>r[1-d])))return y=Math.max(0,j2(h,m)-1),v=m===b?y:j2(h,b)-1,m-h[y]>o+1e-10&&++y,d&&(w=y,y=p-v,v=p-w),y>v?void 0:t().slice(y,v+1)},e.invert=function(c){const d=e.invertRange([c,c]);return d&&d[0]},e.copy=function(){return RP().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},f()}function JDe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return JDe(t())},e}function att(){return JDe(RP().paddingInner(1))}var ltt=Array.prototype.map;function utt(e){return ltt.call(e,Aa)}const ctt=Array.prototype.slice;function QDe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(j2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=utt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=ctt.call(r),n):t.slice()},n.tickFormat=function(r,i){return Ize(e[0],qr(e),r??10,i)},n.copy=function(){return QDe().domain(n.domain()).range(n.range())},n}const L3=new Map,eLe=Symbol("vega_scale");function tLe(e){return e[eLe]=!0,e}function ftt(e){return e&&e[eLe]===!0}function dtt(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?ott(o):o.invertExtent?stt(o):void 0),o.type=e,tLe(o)};return r.metadata=Tc(Pt(n)),r}function ui(e,t,n){return arguments.length>1?(L3.set(e,dtt(e,t,n)),this):nLe(e)?L3.get(e):void 0}ui(itt,n3e);ui(n1,Aze,vs);ui(rh,Cze,[vs,rh]);ui(gE,kze,vs);ui(mE,Tze,vs);ui(GD,Dze,vs);ui(e0,qqe,[vs,LP]);ui(t0,Hqe,[vs,LP]);ui(Af,bCe,[vs,Uu]);ui(`${Af}-${n1}`,bCe,[vs,Uu]);ui(`${Af}-${rh}`,Lze,[vs,Uu,rh]);ui(`${Af}-${gE}`,Rze,[vs,Uu]);ui(`${Af}-${mE}`,Fze,[vs,Uu]);ui(`${Af}-${GD}`,Mze,[vs,Uu]);ui(`${iv}-${n1}`,h3e,[vs,Uu]);ui(`${iv}-${rh}`,p3e,[vs,Uu,rh]);ui(`${iv}-${gE}`,D$,[vs,Uu]);ui(`${iv}-${mE}`,Gqe,[vs,Uu]);ui(`${iv}-${GD}`,g3e,[vs,Uu]);ui(r1,r3e,[bE,r1]);ui(VD,Oze,bE);ui(WD,$ze,bE);ui(DP,QDe,[yE,bE]);ui(TP,vCe,yE);ui(KDe,RP,yE);ui(hO,att,yE);function nLe(e){return L3.has(e)}function F0(e,t){const n=L3.get(e);return n&&n.metadata[t]}function FP(e){return F0(e,vs)}function i1(e){return F0(e,yE)}function pO(e){return F0(e,bE)}function rLe(e){return F0(e,rh)}function htt(e){return F0(e,LP)}function iLe(e){return F0(e,Uu)}function oLe(e){return F0(e,r1)}const ptt=["clamp","base","constant","exponent"];function sLe(e,t){const n=t[0],r=qr(t)-n;return function(i){return e(n+i*r)}}function YD(e,t,n){return r$(MP(t||"rgb",n),e)}function aLe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function lLe(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Fa(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=ui(o)().domain([t,n]).range([0,1]),ptt.forEach(a=>e[a]?s[a](e[a]()):0),s)}function MP(e,t){const n=TUe[gtt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function gtt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const mtt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ytt={accent:Xet,category10:Yet,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Zet,observable10:Ket,paired:Jet,pastel1:Qet,pastel2:ett,set1:ttt,set2:ntt,set3:rtt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function uLe(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function cLe(e,t){for(const n in e)OP(n,t(e[n]))}const Eve={};cLe(ytt,uLe);cLe(mtt,e=>YD(uLe(e)));function OP(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Eve[e]=t,this):Eve[e]}const vC="symbol",btt="discrete",vtt="gradient",xtt=e=>at(e)?e.map(t=>String(t)):String(e),wtt=(e,t)=>e[1]-t[1],_tt=(e,t)=>t[1]-e[1];function $P(e,t,n){let r;return li(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(fE(e.domain())/n||1)+1))),$t(t)&&(r=t.step,t=t.interval),Nt(t)&&(t=e.type===e0?tv(t):e.type==t0?nv(t):st("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function fLe(e,t,n){let r=e.range(),i=r[0],o=qr(r),s=wtt;if(i>o&&(r=o,o=i,i=r,s=_tt),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],qr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function IP(e,t){return e.bins?fLe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function dLe(e,t,n,r,i,o){const s=t.type;let a=xtt;if(s===e0||i===e0)a=e.timeFormat(r);else if(s===t0||i===t0)a=e.utcFormat(r);else if(rLe(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=hLe(t,n,!1);a=f=>u(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function hLe(e,t,n){const r=IP(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const gO={[r1]:"quantiles",[VD]:"thresholds",[WD]:"domain"},pLe={[r1]:"quantiles",[VD]:"domain"};function gLe(e,t){return e.bins?Att(e.bins):e.type===rh?hLe(e,t,!0):gO[e.type]?Stt(e[gO[e.type]]()):IP(e,t)}function Ett(e,t,n){const r=t[pLe[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function Stt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Att(e){const t=e.slice(0,-1);return t.max=qr(e),t}const Ctt=e=>gO[e.type]||e.bins;function mLe(e,t,n,r,i,o,s){const a=pLe[t.type]&&o!==e0&&o!==t0?Ett(e,t,i):dLe(e,t,n,i,o,s);return r===vC&&Ctt(t)?ktt(a):r===btt?Ttt(a):Dtt(a)}const ktt=e=>(t,n,r)=>{const i=Sve(r[n+1],Sve(r.max,1/0)),o=Ave(t,e),s=Ave(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},Sve=(e,t)=>e??t,Ttt=e=>(t,n)=>n?e(t):null,Dtt=e=>t=>e(t),Ave=(e,t)=>Number.isFinite(e)?t(e):null;function Ltt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+qr(t),o=i-r;if(e.type===WD){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function Rtt(e,t,n,r){const i=r||t.type;return Nt(n)&&htt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===e0?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===t0?e.utcFormat("%A, %d %B %Y, %X UTC"):mLe(e,t,5,null,n,r,!0)}function yLe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Rtt(e,t,n.format,n.formatType);if(pO(t.type)){const o=gLe(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(i1(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(qr(o))}`}}let bLe=0;function Ftt(){bLe=0}const R3="p_";function PP(e){return e&&e.gradient}function vLe(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?R3:"";return i||(i=e.id="gradient_"+bLe++,r==="radial"?(e.x1=af(e.x1,.5),e.y1=af(e.y1,.5),e.r1=af(e.r1,0),e.x2=af(e.x2,.5),e.y2=af(e.y2,.5),e.r2=af(e.r2,.5),o=R3):(e.x1=af(e.x1,0),e.y1=af(e.y1,0),e.x2=af(e.x2,1),e.y2=af(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function af(e,t){return e??t}function xLe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const Cve={basis:{curve:Let},"basis-closed":{curve:Ret},"basis-open":{curve:Fet},bundle:{curve:Met,tension:"beta",value:.85},cardinal:{curve:Oet,tension:"tension",value:0},"cardinal-open":{curve:Iet,tension:"tension",value:0},"cardinal-closed":{curve:$et,tension:"tension",value:0},"catmull-rom":{curve:Pet,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Net,tension:"alpha",value:.5},"catmull-rom-open":{curve:Bet,tension:"alpha",value:.5},linear:{curve:_P},"linear-closed":{curve:zet},monotone:{horizontal:Uet,vertical:jet},natural:{curve:qet},step:{curve:Het},"step-after":{curve:Vet},"step-before":{curve:Get}};function NP(e,t,n){var r=Yt(Cve,e)&&Cve[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Mtt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Ott=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,$tt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Itt=/^((\s+,?\s*)|(,\s*))/,Ptt=/^[01]/;function o1(e){const t=[];return(e.match(Ott)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=Mtt[o],a=Ntt(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function Ntt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?Ptt:$tt,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(Itt);l!==null&&(i+=l[0].length)}return r}const Gp=Math.PI/180,Btt=1e-14,km=Math.PI/2,mf=Math.PI*2,Iy=Math.sqrt(3)/2;var vF={},xF={},wLe=[].join;function ztt(e,t,n,r,i,o,s,a,l){const u=wLe.call(arguments);if(vF[u])return vF[u];const f=s*Gp,c=Math.sin(f),d=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+c*(l-t)*.5,p=d*(l-t)*.5-c*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const b=d/n,y=c/n,v=-c/r,w=d/r,E=b*a+y*l,A=v*a+w*l,T=b*e+y*t,D=v*e+w*t;let R=1/((T-E)*(T-E)+(D-A)*(D-A))-.25;R<0&&(R=0);let M=Math.sqrt(R);o==i&&(M=-M);const B=.5*(E+T)-M*(D-A),K=.5*(A+D)+M*(T-E),L=Math.atan2(A-K,E-B);let I=Math.atan2(D-K,T-B)-L;I<0&&o===1?I+=mf:I>0&&o===0&&(I-=mf);const U=Math.ceil(Math.abs(I/(km+.001))),q=[];for(let Y=0;Y<U;++Y){const X=L+Y*I/U,te=L+(Y+1)*I/U;q[Y]=[B,K,X,te,n,r,c,d]}return vF[u]=q}function jtt(e){const t=wLe.call(e);if(xF[t])return xF[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const f=u*s,c=-l*a,d=l*s,h=u*a,p=Math.cos(i),m=Math.sin(i),b=Math.cos(o),y=Math.sin(o),v=.5*(o-i),w=Math.sin(v*.5),E=8/3*w*w/Math.sin(v),A=n+p-E*m,T=r+m+E*p,D=n+b,k=r+y,R=D+E*y,M=k-E*b;return xF[t]=[f*A+c*T,d*A+h*T,f*R+c*M,d*R+h*M,f*D+c*k,d*D+h*k]}const yu=["l",0,0,0,0,0,0,0];function Utt(e,t,n){const r=yu[0]=e[0];if(r==="a"||r==="A")yu[1]=t*e[1],yu[2]=n*e[2],yu[3]=e[3],yu[4]=e[4],yu[5]=e[5],yu[6]=t*e[6],yu[7]=n*e[7];else if(r==="h"||r==="H")yu[1]=t*e[1];else if(r==="v"||r==="V")yu[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)yu[i]=(i%2==1?t:n)*e[i];return yu}function o_(e,t,n,r,i,o){var s,a=null,l=0,u=0,f=0,c=0,d,h,p,m,b=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,w=t.length;v<w;++v){switch(s=t[v],(i!==1||o!==1)&&(s=Utt(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],b=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],b=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],f=l+s[3],c=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,f+n,c+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],f=s[3],c=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,f+n,c+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,l+s[1]+n,u+s[2]+r,d+n,h+r),f=l+s[1],c=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,f=s[1],c=s[2];break;case"q":d=l+s[3],h=u+s[4],f=l+s[1],c=u+s[2],e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,f=s[1],c=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(f=l,c=u):a[0]==="t"?(f=2*l-p,c=2*u-m):a[0]==="q"&&(f=2*l-f,c=2*u-c),p=f,m=c,e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h,f=l+s[1],c=u+s[2];break;case"T":d=s[1],h=s[2],f=2*l-f,c=2*u-c,e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h;break;case"a":kve(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":kve(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=b,u=y,e.closePath();break}a=s}}function kve(e,t,n,r){const i=ztt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=jtt(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const Tve=.5773502691896257,Dve={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,mf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n,i=r-n*Tve,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n,i=r-n*Tve;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Iy*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function _Le(e){return Yt(Dve,e)?Dve[e]:qtt(e)}var wF={};function qtt(e){if(!Yt(wF,e)){const t=o1(e);wF[e]={draw:function(n,r){o_(n,t,0,0,Math.sqrt(r)/2)}}}return wF[e]}const Zh=.448084975506;function Htt(e){return e.x}function Gtt(e){return e.y}function Vtt(e){return e.width}function Wtt(e){return e.height}function _d(e){return typeof e=="function"?e:()=>+e}function fA(e,t,n){return Math.max(t,Math.min(e,n))}function ELe(){var e=Htt,t=Gtt,n=Vtt,r=Wtt,i=_d(0),o=i,s=i,a=i,l=null;function u(f,c,d){var h,p=c??+e.call(this,f),m=d??+t.call(this,f),b=+n.call(this,f),y=+r.call(this,f),v=Math.min(b,y)/2,w=fA(+i.call(this,f),0,v),E=fA(+o.call(this,f),0,v),A=fA(+s.call(this,f),0,v),T=fA(+a.call(this,f),0,v);if(l||(l=h=jD()),w<=0&&E<=0&&A<=0&&T<=0)l.rect(p,m,b,y);else{var D=p+b,k=m+y;l.moveTo(p+w,m),l.lineTo(D-E,m),l.bezierCurveTo(D-Zh*E,m,D,m+Zh*E,D,m+E),l.lineTo(D,k-T),l.bezierCurveTo(D,k-Zh*T,D-Zh*T,k,D-T,k),l.lineTo(p+A,k),l.bezierCurveTo(p+Zh*A,k,p,k-Zh*A,p,k-A),l.lineTo(p,m+w),l.bezierCurveTo(p,m+Zh*w,p+Zh*w,m,p+w,m),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(f){return arguments.length?(e=_d(f),u):e},u.y=function(f){return arguments.length?(t=_d(f),u):t},u.width=function(f){return arguments.length?(n=_d(f),u):n},u.height=function(f){return arguments.length?(r=_d(f),u):r},u.cornerRadius=function(f,c,d,h){return arguments.length?(i=_d(f),o=c!=null?_d(c):i,a=d!=null?_d(d):i,s=h!=null?_d(h):o,u):i},u.context=function(f){return arguments.length?(l=f??null,u):l},u}function SLe(){var e,t,n,r,i=null,o,s,a,l;function u(c,d,h){const p=h/2;if(o){var m=a-d,b=c-s;if(m||b){var y=Math.hypot(m,b),v=(m/=y)*l,w=(b/=y)*l,E=Math.atan2(b,m);i.moveTo(s-v,a-w),i.lineTo(c-m*p,d-b*p),i.arc(c,d,p,E-Math.PI,E),i.lineTo(s+v,a+w),i.arc(s,a,l,E,E+Math.PI)}else i.arc(c,d,p,0,mf);i.closePath()}else o=1;s=c,a=d,l=p}function f(c){var d,h=c.length,p,m=!1,b;for(i==null&&(i=b=jD()),d=0;d<=h;++d)!(d<h&&r(p=c[d],d,c))===m&&(m=!m)&&(o=0),m&&u(+e(p,d,c),+t(p,d,c),+n(p,d,c));if(b)return i=null,b+""||null}return f.x=function(c){return arguments.length?(e=c,f):e},f.y=function(c){return arguments.length?(t=c,f):t},f.size=function(c){return arguments.length?(n=c,f):n},f.defined=function(c){return arguments.length?(r=c,f):r},f.context=function(c){return arguments.length?(c==null?i=null:i=c,f):i},f}function vE(e,t){return e??t}const xE=e=>e.x||0,wE=e=>e.y||0,Ytt=e=>e.width||0,Xtt=e=>e.height||0,Ztt=e=>(e.x||0)+(e.width||0),Ktt=e=>(e.y||0)+(e.height||0),Jtt=e=>e.startAngle||0,Qtt=e=>e.endAngle||0,ent=e=>e.padAngle||0,tnt=e=>e.innerRadius||0,nnt=e=>e.outerRadius||0,rnt=e=>e.cornerRadius||0,int=e=>vE(e.cornerRadiusTopLeft,e.cornerRadius)||0,ont=e=>vE(e.cornerRadiusTopRight,e.cornerRadius)||0,snt=e=>vE(e.cornerRadiusBottomRight,e.cornerRadius)||0,ant=e=>vE(e.cornerRadiusBottomLeft,e.cornerRadius)||0,lnt=e=>vE(e.size,64),unt=e=>e.size||1,XD=e=>e.defined!==!1,cnt=e=>_Le(e.shape||"circle"),fnt=ket().startAngle(Jtt).endAngle(Qtt).padAngle(ent).innerRadius(tnt).outerRadius(nnt).cornerRadius(rnt),dnt=zDe().x(xE).y1(wE).y0(Ktt).defined(XD),hnt=zDe().y(wE).x1(xE).x0(Ztt).defined(XD),pnt=BDe().x(xE).y(wE).defined(XD),gnt=ELe().x(xE).y(wE).width(Ytt).height(Xtt).cornerRadius(int,ont,snt,ant),mnt=Det().type(cnt).size(lnt),ynt=SLe().x(xE).y(wE).defined(XD).size(unt);function BP(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function bnt(e,t){return fnt.context(e)(t)}function vnt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?hnt:dnt).curve(NP(r,n.orient,n.tension)).context(e)(t)}function xnt(e,t){const n=t[0],r=n.interpolate||"linear";return pnt.curve(NP(r,n.orient,n.tension)).context(e)(t)}function ov(e,t,n,r){return gnt.context(e)(t,n,r)}function wnt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function _nt(e,t){return mnt.context(e)(t)}function Ent(e,t){return ynt.context(e)(t)}var ALe=1;function CLe(){ALe=1}function zP(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+ALe++),s=i.clipping[o]||(i.clipping[o]={id:o});return ir(r)?s.path=r(null):BP(n)?s.path=ov(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function es(e){this.clear(),e&&this.union(e)}es.prototype={clone(){return new es(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,f=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+f,a*r-l*s+u,l*r+a*s+f,a*o-l*i+u,l*o+a*i+f,a*o-l*s+u,l*o+a*s+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function ZD(e){this.mark=e,this.bounds=this.bounds||new es}function KD(e){ZD.call(this,e),this.items=this.items||[]}Lt(KD,ZD);class kLe{constructor(t){this._pending=0,this._loader=t||DD()}pending(){return this._pending}sanitizeURL(t){const n=this;return Lve(n),n._loader.sanitize(t,{context:"href"}).then(r=>(fw(n),r)).catch(()=>(fw(n),null))}loadImage(t){const n=this,r=Wet();return Lve(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=Yt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>fw(n),s.onerror=()=>fw(n),s.src=o,s}).catch(i=>(fw(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Lve(e){e._pending+=1}function fw(e){e._pending-=1}function ph(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Snt(t,r):0))}return e}function Snt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Ant=mf-1e-8;let JD,xC,wC,Om,mO,_C,yO,bO;const bp=(e,t)=>JD.add(e,t),EC=(e,t)=>bp(xC=e,wC=t),Rve=e=>bp(e,JD.y1),Fve=e=>bp(JD.x1,e),Tm=(e,t)=>mO*e+yO*t,Dm=(e,t)=>_C*e+bO*t,_F=(e,t)=>bp(Tm(e,t),Dm(e,t)),EF=(e,t)=>EC(Tm(e,t),Dm(e,t));function _E(e,t){return JD=e,t?(Om=t*Gp,mO=bO=Math.cos(Om),_C=Math.sin(Om),yO=-_C):(mO=bO=1,Om=_C=yO=0),Cnt}const Cnt={beginPath(){},closePath(){},moveTo:EF,lineTo:EF,rect(e,t,n,r){Om?(_F(e+n,t),_F(e+n,t+r),_F(e,t+r),EF(e,t)):(bp(e+n,t+r),EC(e,t))},quadraticCurveTo(e,t,n,r){const i=Tm(e,t),o=Dm(e,t),s=Tm(n,r),a=Dm(n,r);Mve(xC,i,s,Rve),Mve(wC,o,a,Fve),EC(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=Tm(e,t),a=Dm(e,t),l=Tm(n,r),u=Dm(n,r),f=Tm(i,o),c=Dm(i,o);Ove(xC,s,l,f,Rve),Ove(wC,a,u,c,Fve),EC(f,c)},arc(e,t,n,r,i,o){if(r+=Om,i+=Om,xC=n*Math.cos(i)+e,wC=n*Math.sin(i)+t,Math.abs(i-r)>Ant)bp(e-n,t-n),bp(e+n,t+n);else{const s=u=>bp(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%mf,r<0&&(r+=mf),i=i%mf,i<0&&(i+=mf),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=mf,a=r-r%km,l=0;l<4&&a>i;++l,a-=km)s(a);else for(a=r-r%km+km,l=0;l<4&&a<i;++l,a=a+km)s(a)}}};function Mve(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Ove(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,f;Math.abs(o)>Btt?(f=s*s+a*o,f>=0&&(f=Math.sqrt(f),l=(-s+f)/o,u=(-s-f)/o)):l=.5*a/s,0<l&&l<1&&i($ve(l,e,t,n,r)),0<u&&u<1&&i($ve(u,e,t,n,r))}function $ve(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var $p=($p=Op(1,1))?$p.getContext("2d"):null;const vO=new es;function jP(e){return function(t,n){if(!$p)return!0;e($p,t),vO.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=vO;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if($p.isPointInPath(l,a))return!0;return!1}}function UP(e,t){return t.contains(e.x||0,e.y||0)}function TLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(vO.set(n,r,n+i,r+o))}function DLe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return db(t,n,r,i,o)}function db(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,f=i-n;let c=0,d=1,h,p,m,b;for(b=0;b<4;++b){if(b===0&&(h=-u,p=-(o-t)),b===1&&(h=u,p=a-t),b===2&&(h=-f,p=-(s-n)),b===3&&(h=f,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>c&&(c=m)}else if(h>0){if(m<c)return!1;m<d&&(d=m)}}return!0}function s1(e,t){e.globalCompositeOperation=t.blend||"source-over"}function sc(e,t){return e??t}function Ive(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function knt(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+sc(t.x1,.5)*r,n.y1+sc(t.y1,.5)*i,Math.max(r,i)*sc(t.r1,0),n.x1+sc(t.x2,.5)*r,n.y1+sc(t.y2,.5)*i,Math.max(r,i)*sc(t.r2,.5));else{const s=sc(t.x1,0),a=sc(t.y1,0),l=sc(t.x2,1),u=sc(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const f=Op(Math.ceil(r),Math.ceil(i)),c=f.getContext("2d");return c.scale(r,i),c.fillStyle=Ive(c.createLinearGradient(s,a,l,u),t.stops),c.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return Ive(o,t.stops)}function LLe(e,t,n){return PP(n)?knt(e,n,t.bounds):n}function F3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=LLe(e,t,t.fill),!0):!1}var Tnt=[];function a1(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=LLe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Tnt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Dnt(e,t){return e.zindex-t.zindex||e.index-t.index}function qP(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Dnt)}function Lc(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=qP(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function M3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=qP(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function HP(e){return function(t,n,r){Lc(n,i=>{(!r||r.intersects(i.bounds))&&RLe(e,t,i,i)})}}function Lnt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&RLe(e,t,n.items[0],n.items)}}function RLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(s1(t,n),n.fill&&F3(t,n,i)&&t.fill(),n.stroke&&a1(t,n,i)&&t.stroke()))}function QD(e){return e=e||$u,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,M3(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function EE(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,f;return l&&(u=s.strokeWidth,f=s.strokeCap,n.lineWidth=u??1,n.lineCap=f??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function GP(e){return QD(EE(e))}function zm(e,t){return"translate("+e+","+t+")"}function VP(e){return"rotate("+e+")"}function Rnt(e,t){return"scale("+e+","+t+")"}function FLe(e){return zm(e.x||0,e.y||0)}function Fnt(e){return zm(e.x||0,e.y||0)+(e.angle?" "+VP(e.angle):"")}function Mnt(e){return zm(e.x||0,e.y||0)+(e.angle?" "+VP(e.angle):"")+(e.scaleX||e.scaleY?" "+Rnt(e.scaleX||1,e.scaleY||1):"")}function WP(e,t,n){function r(s,a){s("transform",Fnt(a)),s("d",t(null,a))}function i(s,a){return t(_E(s,a.angle),a),ph(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,f=a.angle||0;s.translate(l,u),f&&s.rotate(f*=Gp),s.beginPath(),t(s,a),f&&s.rotate(-f),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:HP(o),pick:GP(o),isect:n||jP(o)}}var Ont=WP("arc",bnt);function $nt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function Int(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function Pnt(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function YP(e,t,n){function r(l,u){var f=u.mark.items;f.length&&l("d",t(null,f))}function i(l,u){var f=u.items;return f.length===0?l:(t(_E(l),f),ph(l,f[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=EE(o);function a(l,u,f,c,d,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(f*=l.pixelRatio,c*=l.pixelRatio,s(l,p,f,c)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Lnt(o),pick:a,isect:UP,tip:n}}var Nnt=YP("area",vnt,$nt);function Bnt(e,t){var n=t.clip;e.save(),ir(n)?(e.beginPath(),n(e),e.clip()):MLe(e,t.group)}function MLe(e,t){e.beginPath(),BP(t)?ov(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function OLe(e){const t=sc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function znt(e,t){e("transform",FLe(t))}function $Le(e,t){const n=OLe(t);e("d",ov(null,t,n,n))}function jnt(e,t){e("class","background"),e("aria-hidden",!0),$Le(e,t)}function Unt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?$Le(e,t):e("d","")}function qnt(e,t,n){const r=t.clip?zP(n,t,t):null;e("clip-path",r)}function Hnt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ph(e,t),e.translate(t.x||0,t.y||0)}function s_(e,t,n,r){const i=OLe(t);e.beginPath(),ov(e,t,(n||0)+i,(r||0)+i)}const Gnt=EE(s_),Vnt=EE(s_,!1),Wnt=EE(s_,!0);function Ynt(e,t,n,r){Lc(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(s_(e,i,o,s),s1(e,i),i.fill&&F3(e,i,l)&&e.fill(),i.stroke&&!a&&a1(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&MLe(e,i),n&&n.translate(-o,-s),Lc(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(s_(e,i,o,s),s1(e,i),a1(e,i,l)&&e.stroke())})}function Xnt(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return M3(t,l=>{let u,f,c;const d=l.bounds;if(d&&!d.contains(i,o))return;f=l.x||0,c=l.y||0;const h=f+(l.width||0),p=c+(l.height||0),m=l.clip;if(m&&(i<f||i>h||o<c||o>p))return;if(e.save(),e.translate(f,c),f=i-f,c=o-c,m&&BP(l)&&!Wnt(e,l,s,a))return e.restore(),null;const b=l.strokeForeground,y=t.interactive!==!1;return y&&b&&l.stroke&&Vnt(e,l,s,a)?(e.restore(),l):(u=M3(l,v=>Znt(v,f,c)?this.pick(v,n,r,f,c):null),!u&&y&&(l.fill||!b&&l.stroke)&&Gnt(e,l,s,a)&&(u=l),e.restore(),u||null)})}function Znt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Knt={type:"group",tag:"g",nested:!1,attr:znt,bound:Hnt,draw:Ynt,pick:Xnt,isect:TLe,content:qnt,background:jnt,foreground:Unt},a_={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function XP(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function ZP(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function KP(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function eL(e,t){return e==="center"?t/2:e==="right"?t:0}function tL(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Jnt(e,t,n){const r=XP(t,n),i=ZP(t,r),o=KP(t,r),s=(t.x||0)-eL(t.align,i),a=(t.y||0)-tL(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,a_["xmlns:xlink"],"xlink:href"),e("transform",zm(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Qnt(e,t){const n=t.image,r=ZP(t,n),i=KP(t,n),o=(t.x||0)-eL(t.align,r),s=(t.y||0)-tL(t.baseline,i);return e.set(o,s,o+r,s+i)}function ert(e,t,n){Lc(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=XP(r,this);let o=ZP(r,i),s=KP(r,i);if(o===0||s===0)return;let a=(r.x||0)-eL(r.align,o),l=(r.y||0)-tL(r.baseline,s),u,f,c,d;r.aspect!==!1&&(f=i.width/i.height,c=r.width/r.height,f===f&&c===c&&f!==c&&(c<f?(d=o/f,l+=(s-d)/2,s=d):(d=s*f,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(s1(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var trt={type:"image",tag:"image",nested:!1,attr:Jnt,bound:Qnt,draw:ert,pick:QD(),isect:$u,get:XP,xOffset:eL,yOffset:tL},nrt=YP("line",xnt,Int);function rrt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Mnt(t)),e("d",t.path)}function SC(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Gp,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=o1(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),o_(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):o_(e,l,r,i,o,s)}function irt(e,t){return SC(_E(e,t.angle),t)?e.set(0,0,0,0):ph(e,t,!0)}var ort={type:"path",tag:"path",nested:!1,attr:rrt,bound:irt,draw:HP(SC),pick:GP(SC),isect:jP(SC)};function srt(e,t){e("d",ov(null,t))}function art(e,t){var n,r;return ph(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Pve(e,t){e.beginPath(),ov(e,t)}var lrt={type:"rect",tag:"path",nested:!1,attr:srt,bound:art,draw:HP(Pve),pick:GP(Pve),isect:TLe};function urt(e,t){e("transform",FLe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function crt(e,t){var n,r;return ph(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function ILe(e,t,n){var r,i,o,s;return t.stroke&&a1(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function frt(e,t,n){Lc(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&ILe(e,r,i)&&(s1(e,r),e.stroke())}})}function drt(e,t,n,r){return e.isPointInStroke?ILe(e,t,1)&&e.isPointInStroke(n,r):!1}var hrt={type:"rule",tag:"line",nested:!1,attr:urt,bound:crt,draw:frt,pick:QD(drt),isect:DLe},prt=WP("shape",wnt),grt=WP("symbol",_nt,UP);const Nve=tTe();var nu={height:Wf,measureWidth:JP,estimateWidth:O3,width:O3,canvas:PLe};PLe(!0);function PLe(e){nu.width=e&&$p?JP:O3}function O3(e,t){return NLe(Wp(e,t),Wf(e))}function NLe(e,t){return~~(.8*e.length*t)}function JP(e,t){return Wf(e)<=0||!(t=Wp(e,t))?0:BLe(t,nL(e))}function BLe(e,t){const n=`(${t}) ${e}`;let r=Nve.get(n);return r===void 0&&($p.font=t,r=$p.measureText(e).width,Nve.set(n,r)),r}function Wf(e){return e.fontSize!=null?+e.fontSize||0:11}function Vp(e){return e.lineHeight!=null?e.lineHeight:Wf(e)+2}function mrt(e){return at(e)?e.length>1?e:e[0]:e}function SE(e){return mrt(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function QP(e){const t=SE(e);return(at(t)?t.length-1:0)*Vp(e)}function Wp(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?brt(e,n):n}function yrt(e){if(nu.width===JP){const t=nL(e);return n=>BLe(n,t)}else if(nu.width===O3){const t=Wf(e);return n=>NLe(n,t)}else return t=>nu.width(e,t)}function brt(e,t){var n=+e.limit,r=yrt(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function AE(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function nL(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Wf(e)+"px "+AE(e,t)}function eN(e){var t=e.baseline,n=Wf(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Vp(e):t==="line-bottom"?.29*n-.5*Vp(e):0)}const vrt={left:"start",center:"middle",right:"end"},y2=new es;function rL(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-km,t+=r*Math.cos(i),n+=r*Math.sin(i)),y2.x1=t,y2.y1=n,y2}function xrt(e,t){var n=t.dx||0,r=(t.dy||0)+eN(t),i=rL(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",vrt[t.align]||"start"),a?(l=zm(o,s)+" "+VP(a),(n||r)&&(l+=" "+zm(n,r))):l=zm(o+n,s+r),e("transform",l)}function tN(e,t,n){var r=nu.height(t),i=t.align,o=rL(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+eN(t)-Math.round(.8*r),f=SE(t),c;if(at(f)?(r+=Vp(t)*(f.length-1),c=f.reduce((d,h)=>Math.max(d,nu.width(t,h)),0)):c=nu.width(t,f),i==="center"?l-=c/2:i==="right"&&(l-=c),e.set(l+=s,u+=a,l+c,u+r),t.angle&&!n)e.rotate(t.angle*Gp,s,a);else if(n===2)return e.rotatedPoints(t.angle*Gp,s,a);return e}function wrt(e,t,n){Lc(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,f,c;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=nL(r),e.textAlign=r.align||"left",o=rL(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*Gp),s=a=0),s+=r.dx||0,a+=(r.dy||0)+eN(r),f=SE(r),s1(e,r),at(f))for(u=Vp(r),l=0;l<f.length;++l)c=Wp(r,f[l]),r.fill&&F3(e,r,i)&&e.fillText(c,s,a),r.stroke&&a1(e,r,i)&&e.strokeText(c,s,a),a+=u;else c=Wp(r,f),r.fill&&F3(e,r,i)&&e.fillText(c,s,a),r.stroke&&a1(e,r,i)&&e.strokeText(c,s,a);r.angle&&e.restore()}})}function _rt(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=rL(t),a=s.x1,l=s.y1,u=tN(y2,t,1),f=-t.angle*Gp,c=Math.cos(f),d=Math.sin(f),h=c*i-d*o+(a-c*a+d*l),p=d*i+c*o+(l-d*a-c*l);return u.contains(h,p)}function Ert(e,t){const n=tN(y2,e,2);return db(t,n[0],n[1],n[2],n[3])||db(t,n[0],n[1],n[4],n[5])||db(t,n[4],n[5],n[6],n[7])||db(t,n[2],n[3],n[6],n[7])}var Srt={type:"text",tag:"text",nested:!1,attr:xrt,bound:tN,draw:wrt,pick:QD(_rt),isect:Ert},Art=YP("trail",Ent,Pnt),cu={arc:Ont,area:Nnt,group:Knt,image:trt,line:nrt,path:ort,rect:lrt,rule:hrt,shape:prt,symbol:grt,text:Srt,trail:Art};function xO(e,t,n){var r=cu[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new es),e,n)}var Bve={mark:null};function zLe(e,t,n){var r=cu[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,f;if(r.nested)return s?u=o[0]:(Bve.mark=e,u=Bve),f=xO(u,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new es,s)for(a=0,l=o.length;a<l;++a)t.union(xO(o[a],i,n));return e.bounds=t}const Crt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function jLe(e,t){return JSON.stringify(e,Crt,t)}function ULe(e){const t=typeof e=="string"?JSON.parse(e):e;return qLe(t)}function qLe(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&qLe(n[i]);return t&&zLe(e),e}class HLe{constructor(t){arguments.length?this.root=ULe(t):(this.root=zve({marktype:"group",name:"root",role:"frame"}),this.root.items=[new KD(this.root)])}toJSON(t){return jLe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=zve(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function zve(e,t){const n={bounds:new es,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function vp(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function nN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function hs(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=vp(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Eu(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function GLe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function iL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function krt(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=cu[i.marktype]).tip){for(s=iL(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let rN=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||DD(),this._tooltip=n||Trt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=vp(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=krt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function Trt(e,t,n,r){e.element().setAttribute("title",r||"")}let CE=class{constructor(t){this._el=null,this._bgcolor=null,this._loader=new kLe(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}};const Drt="keydown",Lrt="keypress",Rrt="keyup",VLe="dragenter",AC="dragleave",WLe="dragover",wO="pointerdown",Frt="pointerup",$3="pointermove",CC="pointerout",YLe="pointerover",_O="mousedown",Mrt="mouseup",XLe="mousemove",I3="mouseout",ZLe="mouseover",P3="click",Ort="dblclick",$rt="wheel",KLe="mousewheel",N3="touchstart",B3="touchmove",z3="touchend",Irt=[Drt,Lrt,Rrt,VLe,AC,WLe,wO,Frt,$3,CC,YLe,_O,Mrt,XLe,I3,ZLe,P3,Ort,$rt,KLe,N3,B3,z3],EO=$3,b2=I3,SO=P3;class kE extends rN{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Irt,this.pointermove=Uve([$3,XLe],[YLe,ZLe],[CC,I3]),this.dragover=Uve([WLe],[VLe],[AC]),this.pointerout=qve([CC,I3]),this.dragleave=qve([AC])}initialize(t,n,r){return this._canvas=t&&nN(t,"canvas"),[P3,_O,wO,$3,CC,AC].forEach(i=>jve(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(KLe,t)}pointerdown(t){this._down=this._active,this.fire(wO,t)}mousedown(t){this._down=this._active,this.fire(_O,t)}click(t){this._down===this._active&&(this.fire(P3,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(N3,t,!0)}touchmove(t){this.fire(B3,t,!0)}touchend(t){this.fire(z3,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===SO&&i&&i.href?this.handleHref(n,i,i.href):(t===EO||t===b2)&&this.handleTooltip(n,i,t!==b2),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(jve(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=iL(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return cu[t.marktype].pick.call(this,s,t,n,r,i,o)}}const Prt=e=>e===N3||e===B3||e===z3?[N3,B3,z3]:[e];function jve(e,t){Prt(t).forEach(n=>Nrt(e,n))}function Nrt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function qw(e,t,n){t.forEach(r=>e.fire(r,n))}function Uve(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?qw(this,e,r):((!i||!i.exit)&&qw(this,n,r),this._active=o,qw(this,t,r),qw(this,e,r))}}function qve(e){return function(t){qw(this,e,t),this._active=null}}function Brt(){return typeof window<"u"&&window.devicePixelRatio||1}function zrt(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?Brt():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class j3 extends CE{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new es,this._tempb=new es}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Op(1,1,this._options.type),t&&this._canvas&&(Eu(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)zrt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||st("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=jrt(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):Urt(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=cu[n.marktype];n.clip&&Bnt(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const jrt=(e,t,n)=>new es().set(0,0,t,n).translate(-e[0],-e[1]);function Urt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class JLe extends rN{constructor(t,n){super(t,n);const r=this;r._hrefHandler=SF(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=SF(r,(i,o)=>{r.handleTooltip(i,o,i.type!==b2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(SO,this._hrefHandler),i.removeEventListener(EO,this._tooltipHandler),i.removeEventListener(b2,this._tooltipHandler)),this._svg=i=t&&nN(t,"svg"),i&&(i.addEventListener(SO,this._hrefHandler),i.addEventListener(EO,this._tooltipHandler),i.addEventListener(b2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:SF(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const SF=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},QLe="aria-hidden",iN="aria-label",oN="role",sN="aria-roledescription",eRe="graphics-object",aN="graphics-symbol",tRe=(e,t,n)=>({[oN]:e,[sN]:t,[iN]:n||void 0}),qrt=Tc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Hve={axis:{desc:"axis",caption:Vrt},legend:{desc:"legend",caption:Wrt},"title-text":{desc:"title",caption:e=>`Title text '${Vve(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Vve(e)}'`}},Gve={ariaRole:oN,ariaRoleDescription:sN,description:iN};function nRe(e,t){const n=t.aria===!1;if(e(QLe,n||void 0),n||t.description==null)for(const r in Gve)e(Gve[r],void 0);else{const r=t.mark.marktype;e(iN,t.description),e(oN,t.ariaRole||(r==="group"?eRe:aN)),e(sN,t.ariaRoleDescription||`${r} mark`)}}function rRe(e){return e.aria===!1?{[QLe]:!0}:qrt[e.role]?null:Hve[e.role]?Grt(e,Hve[e.role]):Hrt(e)}function Hrt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return tRe(n?eRe:aN,`${t} mark container`,e.description)}function Grt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return tRe(t.role||aN,t.desc,n.description||r(n))}catch{return null}}function Vve(e){return Pt(e.text).join(" ")}function Vrt(e){const t=e.datum,n=e.orient,r=t.title?iRe(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${i1(a)?"discrete":a} scale with ${yLe(s,o,e)}`}function Wrt(e){const t=e.datum,n=t.title?iRe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return Xrt(r)+(n?` titled '${n}'`:"")+` for ${Yrt(o)} with ${yLe(l,a,e)}`}function iRe(e){try{return Pt(qr(e.items).items[0].text).join(" ")}catch{return null}}function Yrt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+qr(e)}function Xrt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const oRe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Zrt=e=>oRe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function lN(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${Zrt(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];for(const d of f)for(const h in d)s(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=oRe(l),a),toString:()=>e};return a}const sRe=e=>aRe(lN(),e)+"";function aRe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):aRe(e,r)}return e.close()}const U3={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},q3={blend:"mix-blend-mode"},lRe={fill:"none","stroke-miterlimit":10},dw=0,Wve="http://www.w3.org/2000/xmlns/",ds=a_.xmlns;class uN extends CE{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=hs(t,0,"svg",ds),this._svg.setAttributeNS(Wve,"xmlns",ds),this._svg.setAttributeNS(Wve,"xmlns:xlink",a_["xmlns:xlink"]),this._svg.setAttribute("version",a_.version),this._svg.setAttribute("class","marks"),Eu(t,1),this._root=hs(this._svg,dw,"g",ds),xp(this._root,lRe),Eu(this._svg,dw+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(xp(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=hs(t,dw,"rect",ds),xp(r,{width:this._width,height:this._height,fill:n}));const i=sRe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Eu(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=cu[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Yve(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Yve(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=cu[s],l=n.interactive===!1?"none":null,u=a.tag==="g",f=Xve(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return Eu(f,0),n._svg;f.setAttribute("class",GLe(n));const c=rRe(n);for(const m in c)Ua(f,m,c[m]);u||Ua(f,"pointer-events",l),Ua(f,"clip-path",n.clip?zP(this,n,n.group):null);let d=null,h=0;const p=m=>{const b=this.isDirty(m),y=Xve(m,f,d,a.tag,o);b&&(this._update(a,y,m),u&&Qrt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Lc(n,p),Eu(f,h),f}_update(t,n,r){Bd=n,_a=n.__values__,nRe(v2,r),t.attr(v2,r,this);const i=tit[t.type];i&&i.call(this,t,n,r),Bd&&this.style(Bd,r)}style(t,n){if(n!=null){for(const r in U3){let i=r==="font"?AE(n):n[r];if(i===_a[r])continue;const o=U3[r];i==null?t.removeAttribute(o):(PP(i)&&(i=vLe(i,this._defs.gradient,uRe())),t.setAttribute(o,i+"")),_a[r]=i}for(const r in q3)kC(t,q3[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=hs(t,dw+1,"defs",ds)),i=Krt(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=hs(t,dw+1,"defs",ds)),i=Jrt(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):Eu(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Yve(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Krt(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=hs(e,n++,"pattern",ds);xp(s,{id:R3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=hs(s,0,"rect",ds),xp(s,{width:1,height:1,fill:`url(${uRe()}#${t.id})`}),e=hs(e,n++,"radialGradient",ds),xp(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=hs(e,n++,"linearGradient",ds),xp(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=hs(e,r,"stop",ds),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Eu(e,r),n}function Jrt(e,t,n){let r;return e=hs(e,n,"clipPath",ds),e.setAttribute("id",t.id),t.path?(r=hs(e,0,"path",ds),r.setAttribute("d",t.path)):(r=hs(e,0,"rect",ds),xp(r,{x:0,y:0,width:t.width,height:t.height})),Eu(e,1),n+1}function Qrt(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;Lc(n,s=>{i=e.mark(t,s,i,r),++o}),Eu(t,1+o)}function Xve(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=vp(s,r,ds),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=vp(s,"path",ds);o.appendChild(a),a.__data__=e;const l=vp(s,"g",ds);o.appendChild(l),l.__data__=e;const u=vp(s,"path",ds);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||eit(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function eit(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bd=null,_a=null;const tit={group(e,t,n){const r=Bd=t.childNodes[2];_a=r.__values__,e.foreground(v2,n,this),_a=t.__values__,Bd=t.childNodes[1],e.content(v2,n,this);const i=Bd=t.childNodes[0];e.background(v2,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==_a.events&&(Ua(r,"pointer-events",o),Ua(i,"pointer-events",o),_a.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Ua(r,"display",null),this.style(i,n),Ua(i,"stroke",null),s&&(n.fill=null),_a=r.__values__,this.style(r,n),s&&(n.fill=s),Bd=null}else Ua(r,"display","none")},image(e,t,n){n.smooth===!1?(kC(t,"image-rendering","optimizeSpeed"),kC(t,"image-rendering","pixelated")):kC(t,"image-rendering",null)},text(e,t,n){const r=SE(n);let i,o,s,a;at(r)?(o=r.map(l=>Wp(n,l)),i=o.join(`
`),i!==_a.text&&(Eu(t,0),s=t.ownerDocument,a=Vp(n),o.forEach((l,u)=>{const f=vp(s,"tspan",ds);f.__data__=n,f.textContent=l,u&&(f.setAttribute("x",0),f.setAttribute("dy",a)),t.appendChild(f)}),_a.text=i)):(o=Wp(n,r),o!==_a.text&&(t.textContent=o,_a.text=o)),Ua(t,"font-family",AE(n)),Ua(t,"font-size",Wf(n)+"px"),Ua(t,"font-style",n.fontStyle),Ua(t,"font-variant",n.fontVariant),Ua(t,"font-weight",n.fontWeight)}};function v2(e,t,n){t!==_a[e]&&(n?nit(Bd,e,t,n):Ua(Bd,e,t),_a[e]=t)}function kC(e,t,n){n!==_a[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),_a[t]=n)}function xp(e,t){for(const n in t)Ua(e,n,t[n])}function Ua(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function nit(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function uRe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class cRe extends CE{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=lN();n.open("svg",rr({},a_,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",lRe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=cu[n.marktype],i=r.tag,o=[nRe,r.attr];t.open("g",{class:GLe(n),"clip-path":n.clip?zP(this,n,n.group):null},rRe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=SE(a);if(at(u)){const f={x:0,dy:Vp(a)};for(let c=0;c<u.length;++c)t.open("tspan",c?f:null).text(Wp(a,u[c])).close()}else t.text(Wp(a,u))}else if(i==="g"){const u=a.strokeForeground,f=a.fill,c=a.stroke;u&&c&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Lc(a,d=>this.mark(t,d)),t.close(),u&&c?(f&&(a.fill=null),a.stroke=c,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),f&&(a.fill=f)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):Lc(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,f)=>{o[f||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&rit(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:R3+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function rit(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=AE(t),e["font-size"]=Wf(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in U3){let a=t[s];const l=U3[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(PP(a)&&(a=vLe(a,i.gradient,"")),e[l]=a)}for(const s in q3){const a=t[s];a!=null&&(o=o||[],o.push(`${q3[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const uc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function iit(e){uc.svgMarkTypes=e.svgMarkTypes??["text"],uc.svgOnTop=e.svgOnTop??!0,uc.debug=e.debug??!1}class AO extends CE{constructor(t){super(t),this._svgRenderer=new uN(t),this._canvasRenderer=new j3(t)}initialize(t,n,r,i,o){this._root_el=hs(t,0,"div");const s=hs(this._root_el,0,"div"),a=hs(this._root_el,1,"div");return this._root_el.style.position="relative",uc.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=uc.svgOnTop?a:s,this._canvasEl=uc.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return uc.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!uc.svgMarkTypes.includes(o));this._svgRenderer.render(t,uc.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return uc.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class fRe extends kE{constructor(t,n){super(t,n)}initialize(t,n,r){const i=hs(hs(t,0,"div"),uc.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const dRe="canvas",hRe="hybrid",pRe="png",gRe="svg",mRe="none",wp={Canvas:dRe,PNG:pRe,SVG:gRe,Hybrid:hRe,None:mRe},n0={};n0[dRe]=n0[pRe]={renderer:j3,headless:j3,handler:kE};n0[gRe]={renderer:uN,headless:cRe,handler:JLe};n0[hRe]={renderer:AO,headless:AO,handler:fRe};n0[mRe]={};function oL(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(n0[e]=t,this):n0[e]}function yRe(e,t,n){const r=[],i=new es().union(t),o=e.marktype;return o?bRe(e,i,n,r):o==="group"?vRe(e,i,n,r):st("Intersect scene must be mark node or group item.")}function bRe(e,t,n,r){if(oit(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)vRe(i[a],t,n,r);else for(const l=cu[o].isect;a<s;++a){const u=i[a];xRe(u,t,l)&&r.push(u)}}return r}function oit(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function vRe(e,t,n,r){n&&n(e.mark)&&xRe(e,t,cu.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)bRe(i[l],t,n,r);t.translate(s,a)}return r}function xRe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const AF=new es;function wRe(e){const t=e.clip;if(ir(t))t(_E(AF.clear()));else if(t)AF.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(AF)}const sit=1e-9;function cN(e,t,n){return e===t?!0:n==="path"?_Re(e,t):e instanceof Date&&t instanceof Date?+e==+t:li(e)&&li(t)?Math.abs(e-t)<=sit:!e||!t||!$t(e)&&!$t(t)?e==t:ait(e,t)}function _Re(e,t){return cN(o1(e),o1(t))}function ait(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!cN(e[i],t[i],i))return!1;return typeof e==typeof t}function lit(){CLe(),Ftt()}const l1="top",pc="left",yc="right",Yp="bottom",uit="top-left",cit="top-right",fit="bottom-left",dit="bottom-right",fN="start",CO="middle",qa="end",hit="x",pit="y",sL="group",dN="axis",hN="title",git="frame",mit="scope",pN="legend",ERe="row-header",SRe="row-footer",ARe="row-title",CRe="column-header",kRe="column-footer",TRe="column-title",yit="padding",bit="symbol",DRe="fit",LRe="fit-x",RRe="fit-y",vit="pad",gN="none",dA="all",kO="each",mN="flush",_p="column",Ep="row";function FRe(e){rt.call(this,null,e)}Lt(FRe,rt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=cu[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=hA(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===sL||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(hA(u,s))),r.role){case dN:case pN:case hN:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(hA(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(hA(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return wRe(r),t.modifies("bounds")}});function hA(e,t,n){return t(e.bounds.clear(),e,n)}const Zve=":vega_identifier:";function yN(e){rt.call(this,0,e)}yN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Lt(yN,rt,{transform(e,t){const n=xit(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function xit(e){return e._signals[Zve]||(e._signals[Zve]=e.add(0))}function MRe(e){rt.call(this,null,e)}Lt(MRe,rt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,wit(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===sL?KD:ZD;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function wit(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function ORe(e){rt.call(this,null,e)}const Kve={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!$Re(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},$Re=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Jve=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if($Re(i,o=e[n].bounds,t))return!0},_it=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Eit=(e,t,n)=>{var r=e.range(),i=new es;return t===l1||t===Yp?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},Qve=e=>(e.forEach(t=>t.opacity=1),e),exe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Lt(ORe,rt,{transform(e,t){const n=Kve[e.method]||Kve.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Qve(i),t=exe(t,e)),t;if(i=i.filter(_it),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=Qve(i),t=exe(t,e),o.length>=3&&Jve(o,r)){do o=n(o,r);while(o.length>=3&&Jve(o,r));o.length<3&&!qr(i).opacity&&(o.length>1&&(qr(o).opacity=0),qr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Eit(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function IRe(e){rt.call(this,null,e)}Lt(IRe,rt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const xa=new es;function hb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Sit(e){var t=e.items[0].orient;return t===pc||t===yc}function Ait(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Cit(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=Ait(o),u=i.range,f=i.offset,c=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[l[2]].items[0],m=i.titlePadding,b=i.bounds,y=p&&QP(p),v=0,w=0,E,A;switch(xa.clear().union(b),b.clear(),(E=l[0])>-1&&b.union(i.items[E].bounds),(E=l[1])>-1&&b.union(i.items[E].bounds),a){case l1:v=c||0,w=-f,A=Math.max(d,Math.min(h,-b.y1)),b.add(0,-A).add(u,0),p&&pA(e,p,A,m,y,0,-1,b);break;case pc:v=-f,w=c||0,A=Math.max(d,Math.min(h,-b.x1)),b.add(-A,0).add(0,u),p&&pA(e,p,A,m,y,1,-1,b);break;case yc:v=n+f,w=c||0,A=Math.max(d,Math.min(h,b.x2)),b.add(0,0).add(A,u),p&&pA(e,p,A,m,y,1,1,b);break;case Yp:v=c||0,w=r+f,A=Math.max(d,Math.min(h,b.y2)),b.add(0,0).add(u,A),p&&pA(e,p,A,m,0,0,1,b);break;default:v=i.x,w=i.y}return ph(b.translate(v,w),i),hb(i,"x",v+s)|hb(i,"y",w+s)&&(i.bounds=xa,e.dirty(i),i.bounds=b,e.dirty(i)),i.mark.bounds.clear().union(b)}function pA(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let f=0,c=0;e.dirty(t),o?f=(t.x||0)-(t.x=u):c=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-f,-c)),e.dirty(t)}a.union(l)}const txe=(e,t)=>Math.floor(Math.min(e,t)),nxe=(e,t)=>Math.ceil(Math.max(e,t));function kit(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===sL)switch(i.role){case dN:case pN:case hN:break;case ERe:s.rowheaders.push(...o);break;case SRe:s.rowfooters.push(...o);break;case CRe:s.colheaders.push(...o);break;case kRe:s.colfooters.push(...o);break;case ARe:s.rowtitle=o[0];break;case TRe:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Tit(e){return new es().set(0,0,e.width||0,e.height||0)}function Dit(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function uo(e,t,n){const r=$t(e)?e[t]:e;return r??(n!==void 0?n:0)}function rxe(e){return e<0?Math.ceil(-e):0}function PRe(e,t,n){var r=!n.nodirty,i=n.bounds===mN?Tit:Dit,o=xa.set(0,0,0,0),s=uo(n.align,_p),a=uo(n.align,Ep),l=uo(n.padding,_p),u=uo(n.padding,Ep),f=n.columns||t.length,c=f<=0?1:Math.ceil(t.length/f),d=t.length,h=Array(d),p=Array(f),m=0,b=Array(d),y=Array(c),v=0,w=Array(d),E=Array(d),A=Array(d),T,D,k,R,M,B,K,L,$,I,U;for(D=0;D<f;++D)p[D]=0;for(D=0;D<c;++D)y[D]=0;for(D=0;D<d;++D)B=t[D],M=A[D]=i(B),B.x=B.x||0,w[D]=0,B.y=B.y||0,E[D]=0,k=D%f,R=~~(D/f),m=Math.max(m,K=Math.ceil(M.x2)),v=Math.max(v,L=Math.ceil(M.y2)),p[k]=Math.max(p[k],K),y[R]=Math.max(y[R],L),h[D]=l+rxe(M.x1),b[D]=u+rxe(M.y1),r&&e.dirty(t[D]);for(D=0;D<d;++D)D%f===0&&(h[D]=0),D<f&&(b[D]=0);if(s===kO)for(k=1;k<f;++k){for(U=0,D=k;D<d;D+=f)U<h[D]&&(U=h[D]);for(D=k;D<d;D+=f)h[D]=U+p[k-1]}else if(s===dA){for(U=0,D=0;D<d;++D)D%f&&U<h[D]&&(U=h[D]);for(D=0;D<d;++D)D%f&&(h[D]=U+m)}else for(s=!1,k=1;k<f;++k)for(D=k;D<d;D+=f)h[D]+=p[k-1];if(a===kO)for(R=1;R<c;++R){for(U=0,D=R*f,T=D+f;D<T;++D)U<b[D]&&(U=b[D]);for(D=R*f;D<T;++D)b[D]=U+y[R-1]}else if(a===dA){for(U=0,D=f;D<d;++D)U<b[D]&&(U=b[D]);for(D=f;D<d;++D)b[D]=U+v}else for(a=!1,R=1;R<c;++R)for(D=R*f,T=D+f;D<T;++D)b[D]+=y[R-1];for($=0,D=0;D<d;++D)$=h[D]+(D%f?$:0),w[D]+=$-t[D].x;for(k=0;k<f;++k)for(I=0,D=k;D<d;D+=f)I+=b[D],E[D]+=I-t[D].y;if(s&&uo(n.center,_p)&&c>1)for(D=0;D<d;++D)M=s===dA?m:p[D%f],$=M-A[D].x2-t[D].x-w[D],$>0&&(w[D]+=$/2);if(a&&uo(n.center,Ep)&&f!==1)for(D=0;D<d;++D)M=a===dA?v:y[~~(D/f)],I=M-A[D].y2-t[D].y-E[D],I>0&&(E[D]+=I/2);for(D=0;D<d;++D)o.union(A[D].translate(w[D],E[D]));switch($=uo(n.anchor,hit),I=uo(n.anchor,pit),uo(n.anchor,_p)){case qa:$-=o.width();break;case CO:$-=o.width()/2}switch(uo(n.anchor,Ep)){case qa:I-=o.height();break;case CO:I-=o.height()/2}for($=Math.round($),I=Math.round(I),o.clear(),D=0;D<d;++D)t[D].mark.bounds.clear();for(D=0;D<d;++D)B=t[D],B.x+=w[D]+=$,B.y+=E[D]+=I,o.union(B.mark.bounds.union(B.bounds.translate(w[D],E[D]))),r&&e.dirty(B);return o}function Lit(e,t,n){var r=kit(t),i=r.marks,o=n.bounds===mN?Rit:Fit,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,f,c,d,h,p,m,b;const y=PRe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=uo(n.headerBand,Ep,null),f=gA(e,r.rowheaders,i,a,l,-uo(s,"rowHeader"),txe,0,o,"x1",0,a,1,m)),r.colheaders&&(m=uo(n.headerBand,_p,null),c=gA(e,r.colheaders,i,a,a,-uo(s,"columnHeader"),txe,1,o,"y1",0,1,a,m)),r.rowfooters&&(m=uo(n.footerBand,Ep,null),d=gA(e,r.rowfooters,i,a,l,uo(s,"rowFooter"),nxe,0,o,"x2",a-1,a,1,m)),r.colfooters&&(m=uo(n.footerBand,_p,null),h=gA(e,r.colfooters,i,a,a,uo(s,"columnFooter"),nxe,1,o,"y2",u-a,1,a,m)),r.rowtitle&&(p=uo(n.titleAnchor,Ep),b=uo(s,"rowTitle"),b=p===qa?d+b:f-b,m=uo(n.titleBand,Ep,.5),ixe(e,r.rowtitle,b,0,y,m)),r.coltitle&&(p=uo(n.titleAnchor,_p),b=uo(s,"columnTitle"),b=p===qa?h+b:c-b,m=uo(n.titleBand,_p,.5),ixe(e,r.coltitle,b,1,y,m))}function Rit(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Fit(e,t){return e.bounds[t]}function gA(e,t,n,r,i,o,s,a,l,u,f,c,d,h){var p=n.length,m=0,b=0,y,v,w,E,A,T,D,k,R;if(!p)return m;for(y=f;y<p;y+=c)n[y]&&(m=s(m,l(n[y],u)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,v=0,E=t.length;v<E;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=f,v=0,E=t.length;v<E;++v,y+=c){for(T=t[v],A=T.mark.bounds,w=y;w>=0&&(D=n[w])==null;w-=d);a?(k=h==null?D.x:Math.round(D.bounds.x1+h*D.bounds.width()),R=m):(k=m,R=h==null?D.y:Math.round(D.bounds.y1+h*D.bounds.height())),A.union(T.bounds.translate(k-(T.x||0),R-(T.y||0))),T.x=k,T.y=R,e.dirty(T),b=s(b,A[u])}return b}function ixe(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function Mit(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Oit(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function $it(e,t,n,r,i,o,s){const a=Mit(n,t),l=Oit(e,a("offset",0)),u=a("anchor",fN),f=u===qa?1:u===CO?.5:0,c={align:kO,bounds:a("bounds",mN),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case pc:c.anchor={x:Math.floor(r.x1)-l,column:qa,y:f*(s||r.height()+2*r.y1),row:u};break;case yc:c.anchor={x:Math.ceil(r.x2)+l,y:f*(s||r.height()+2*r.y1),row:u};break;case l1:c.anchor={y:Math.floor(i.y1)-l,row:qa,x:f*(o||i.width()+2*i.x1),column:u};break;case Yp:c.anchor={y:Math.ceil(i.y2)+l,x:f*(o||i.width()+2*i.x1),column:u};break;case uit:c.anchor={x:l,y:l};break;case cit:c.anchor={x:o-l,y:l,column:qa};break;case fit:c.anchor={x:l,y:s-l,row:qa};break;case dit:c.anchor={x:o-l,y:s-l,column:qa,row:qa};break}return c}function Iit(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),Nit(e,n,n.items[0].items[0]),o=Pit(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===bit&&Bit(n.items[0].items[0].items[0].items),i!==gN&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,ph(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function Pit(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Nit(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&hw(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,f=r-s.y;switch(s.orient){case pc:i+=Math.ceil(s.bounds.width())+l;break;case yc:case Yp:break;default:o+=s.bounds.height()+l}switch((i||o)&&hw(e,n,i,o),s.orient){case pc:f+=Py(t,n,s,a,1,1);break;case yc:u+=Py(t,n,s,qa,0,0)+l,f+=Py(t,n,s,a,1,1);break;case Yp:u+=Py(t,n,s,a,0,0),f+=Py(t,n,s,qa,-1,0,1)+l;break;default:u+=Py(t,n,s,a,0,0)}(u||f)&&hw(e,s,u,f),(u=Math.round(s.bounds.x1-r))<0&&(hw(e,n,-u,0),hw(e,s,-u,0))}}function Py(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,f=u.bounds[i?"y2":"x2"]-e.padding,c=l&&o?f:0,d=l&&o?0:f,h=i<=0?0:QP(n);return Math.round(r===fN?c:r===qa?d-h:.5*(f-h))}function hw(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Bit(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function zit(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,f=o.padding,c=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===pc||a===yc?r:n,p=0,m=0,b=0,y=0,v=0,w;if(s!==sL?a===pc?(p=i.y2,h=i.y1):a===yc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===pc&&(p=r,h=0),w=l===fN?p:l===qa?h:(p+h)/2,d&&d.text){switch(a){case l1:case Yp:v=c.bounds.height()+f;break;case pc:y=c.bounds.width()+f;break;case yc:y=-c.bounds.width()-f;break}xa.clear().union(d.bounds),xa.translate(y-(d.x||0),v-(d.y||0)),hb(d,"x",y)|hb(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(xa),d.mark.bounds.clear().union(xa),e.dirty(d)),xa.clear().union(d.bounds)}else xa.clear();switch(xa.union(c.bounds),a){case l1:m=w,b=i.y1-xa.height()-u;break;case pc:m=i.x1-xa.width()-u,b=w;break;case yc:m=i.x2+xa.width()+u,b=w;break;case Yp:m=w,b=i.y2+u;break;default:m=o.x,b=o.y}return hb(o,"x",m)|hb(o,"y",b)&&(xa.translate(m,b),e.dirty(o),o.bounds.clear().union(xa),t.bounds.clear().union(xa),e.dirty(o)),o.bounds}function NRe(e){rt.call(this,null,e)}Lt(NRe,rt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Lit(n,r,e.layout),Uit(n,r,e)}),jit(e.mark.group)?t.reflow():t}});function jit(e){return e&&e.mark.role!=="legend-entry"}function Uit(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new es().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],f,c,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(c=r[p],c.role){case dN:h=Sit(c)?a:l,h.union(Cit(e,c,i,o));break;case hN:f=c;break;case pN:u.push(Iit(e,c));break;case git:case mit:case ERe:case SRe:case ARe:case CRe:case kRe:case TRe:a.union(c.bounds),l.union(c.bounds);break;default:s.union(c.bounds)}if(u.length){const b={};u.forEach(y=>{d=y.orient||yc,d!==gN&&(b[d]||(b[d]=[])).push(y)});for(const y in b){const v=b[y];PRe(e,v,$it(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===DRe||n.autosize.type===LRe||n.autosize.type===RRe))switch(y.orient){case pc:case yc:s.add(v.x1,0).add(v.x2,0);break;case l1:case Yp:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),f&&s.union(zit(e,f,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),qit(e,t,s,n)}function qit(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),c=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-f));if(i.contains===yit){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===gN?(u=0,c=0,l=s,f=a):o===DRe?(l=Math.max(0,s-u-d),f=Math.max(0,a-c-h)):o===LRe?(l=Math.max(0,s-u-d),a=f+c+h):o===RRe?(s=l+u+d,f=Math.max(0,a-c-h)):o===vit&&(s=l+u+d,a=f+c+h),e._resizeView(s,a,l,f,[u,c],i.resize)}const Hit=Object.freeze(Object.defineProperty({__proto__:null,bound:FRe,identifier:yN,mark:MRe,overlap:ORe,render:IRe,viewlayout:NRe},Symbol.toStringTag,{value:"Module"}));function BRe(e){rt.call(this,null,e)}Lt(BRe,rt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=$P(o,s,e.minstep),l=e.format||dLe(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?fLe(o,e.values,a):IP(o,a);return i&&(r.rem=i),i=u.map((f,c)=>yi({index:c/(u.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(yi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function zRe(e){rt.call(this,null,e)}function Git(){return yi({})}function Vit(e){const t=ev().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Lt(zRe,rt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Git,o=e.key||wn,s=this.value;return at(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&st("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Vit(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function jRe(e){rt.call(this,null,e)}Lt(jRe,rt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(at(o))if(n.changed()||o.every(c=>i[c]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Qh,l=i.enter||Qh,u=i.exit||Qh,f=(o&&!s?i[o]:a)||Qh;if(t.changed(t.ADD)&&(t.visit(t.ADD,c=>{l(c,e),a(c,e)}),n.modifies(l.output),n.modifies(a.output),f!==Qh&&f!==a&&(t.visit(t.ADD,c=>{f(c,e)}),n.modifies(f.output))),t.changed(t.REM)&&u!==Qh&&(t.visit(t.REM,c=>{u(c,e)}),n.modifies(u.output)),s||f!==Qh){const c=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(c,d=>{const h=l(d,e)||r;(f(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(c,d=>{(f(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function URe(e){rt.call(this,[],e)}Lt(URe,rt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||vC,s=e.scale,a=+e.limit,l=$P(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===vC,f=e.format||mLe(n,s,l,o,e.formatSpecifier,e.formatType,u),c=e.values||gLe(s,l),d,h,p,m,b;return i&&(r.rem=i),o===vC?(a&&c.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=c.slice(0,a-1),b=!0):i=c,ir(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Fa(m=p||8),i=i.map((y,v)=>yi({index:v,label:f(y,v,i),value:y,offset:m,size:p(y,e)})),b&&(b=c[i.length],i.push(yi({index:i.length,label:`${c.length-i.length} entries`,value:b,offset:m,size:p(b,e)})))):o===vtt?(d=s.domain(),h=lLe(s,d[0],qr(d)),c.length<3&&!e.values&&d[0]!==qr(d)&&(c=[d[0],qr(d)]),i=c.map((y,v)=>yi({index:v,label:f(y,v,c),value:y,perc:h(y)}))):(p=c.length-1,h=Ltt(s),i=c.map((y,v)=>yi({index:v,label:f(y,v,c),value:y,perc:v?h(y):0,perc2:v===p?1:h(c[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Wit=e=>e.source.x,Yit=e=>e.source.y,Xit=e=>e.target.x,Zit=e=>e.target.y;function bN(e){rt.call(this,{},e)}bN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Lt(bN,rt,{transform(e,t){var n=e.sourceX||Wit,r=e.sourceY||Yit,i=e.targetX||Xit,o=e.targetY||Zit,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=oxe.get(l+"-"+a)||oxe.get(l);return u||st("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[s]=u(n(f),r(f),i(f),o(f))}),t.reflow(e.modified()).modifies(s)}});const qRe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Kit=(e,t,n,r)=>qRe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),HRe=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},Jit=(e,t,n,r)=>HRe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GRe=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},Qit=(e,t,n,r)=>GRe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),eot=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,tot=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,not=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},rot=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},iot=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},oot=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},oxe=ev({line:qRe,"line-radial":Kit,arc:HRe,"arc-radial":Jit,curve:GRe,"curve-radial":Qit,"orthogonal-horizontal":eot,"orthogonal-vertical":tot,"orthogonal-radial":not,"diagonal-horizontal":rot,"diagonal-vertical":iot,"diagonal-radial":oot});function vN(e){rt.call(this,null,e)}vN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Lt(vN,rt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||K1,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),f=u.length,c=s,d=(a-s)/ZCe(u),h=Kl(f),p,m,b;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<f;++p)b=u[h[p]],m=l[h[p]],m[r]=c,m[i]=c+=b*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const sot=5;function aot(e){const t=e.type;return!e.bins&&(t===n1||t===gE||t===mE)}function VRe(e){return FP(e)&&e!==Af}const lot=Tc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function WRe(e){rt.call(this,null,e),this.modified(!0)}Lt(WRe,rt,{transform(e,t){var n=t.dataflow,r=this.value,i=uot(e);(!r||i!==r.type)&&(this.value=r=ui(i)());for(i in e)if(!lot[i]){if(i==="padding"&&VRe(r.type))continue;ir(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return got(r,e,pot(r,e,fot(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uot(e){var t=e.type,n="",r;return t===Af?Af+"-"+n1:(cot(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Af+"-":r===3?iv+"-":""),(n+t||n1).toLowerCase())}function cot(e){const t=e.type;return FP(t)&&t!==e0&&t!==t0&&(e.scheme||e.range&&e.range.length&&e.range.every(Nt))}function fot(e,t,n){const r=dot(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&aot(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return VRe(o)&&t.padding&&i[0]!==qr(i)&&(i=hot(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(YRe(o,i,n)),o===TP&&e.unknown(t.domainImplicit?Pze:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&$P(e,t.nice)||null),i.length}function dot(e,t,n){return t?(e.domain(YRe(e.type,t,n)),t.length):-1}function hot(e,t,n,r,i,o){var s=Math.abs(qr(n)-n[0]),a=s/(s-2*r),l=e===rh?gI(t,null,a):e===mE?E3(t,null,a,.5):e===gE?E3(t,null,a,i||1):e===GD?mI(t,null,a,o||1):pI(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function YRe(e,t,n){if(rLe(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Tt(t))}return t}function pot(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),o=i[0],s=qr(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||st("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Kl(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===DP&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function got(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=mot(r,t,n);else if(t.scheme&&(o=yot(r,t,n),ir(o))){if(e.interpolator)return e.interpolator(o);st(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&iLe(r))return e.interpolator(YD(TO(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(MP(t.interpolate,t.interpolateGamma)):ir(e.round)?e.round(i):ir(e.rangeRound)&&e.interpolate(i?n$:t$),o&&e.range(TO(o,t.reverse))}function mot(e,t,n){e!==KDe&&e!==hO&&st("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===hO?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*kP(n,i,r)]}function yot(e,t,n){var r=t.schemeExtent,i,o;return at(t.scheme)?o=YD(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=OP(i),o||st(`Unrecognized scheme name: ${t.scheme}`)),n=e===WD?n+1:e===DP?n-1:e===r1||e===VD?+t.schemeCount||sot:n,iLe(e)?sxe(o,r,t.reverse):ir(o)?aLe(sxe(o,r),n):e===TP?o:o.slice(0,n)}function sxe(e,t,n){return ir(e)&&(t||n)?sLe(e,TO(t||[0,1],n)):e}function TO(e,t){return t?e.slice().reverse():e}function XRe(e){rt.call(this,null,e)}Lt(XRe,rt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(L0(e.sort)),this.modified(n),t}});const axe="zero",ZRe="center",KRe="normalize",JRe=["y0","y1"];function xN(e){rt.call(this,null,e)}xN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:axe,values:[axe,ZRe,KRe]},{name:"as",type:"string",array:!0,length:2,default:JRe}]};Lt(xN,rt,{transform(e,t){var n=e.as||JRe,r=n[0],i=n[1],o=L0(e.sort),s=e.field||K1,a=e.offset===ZRe?bot:e.offset===KRe?vot:xot,l,u,f,c;for(l=wot(t.source,e.groupby,o,s),u=0,f=l.length,c=l.max;u<f;++u)a(l[u],c,s,r,i);return t.reflow(e.modified()).modifies(n)}});function bot(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function vot(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,f;l<a;++l)f=e[l],f[r]=s,f[i]=s=o*(u+=Math.abs(n(f)))}function xot(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,f;l<a;++l)f=e[l],u=+n(f),u<0?(f[r]=s,f[i]=s+=u):(f[r]=o,f[i]=o+=u)}function wot(e,t,n,r){var i=[],o=m=>m(f),s,a,l,u,f,c,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)f=e[a],c=t.map(o),d=s[c],d||(s[c]=d=[],i.push(d)),d.push(f);for(c=0,p=0,u=i.length;c<u;++c){for(d=i[c],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const _ot=Object.freeze(Object.defineProperty({__proto__:null,axisticks:BRe,datajoin:zRe,encode:jRe,legendentries:URe,linkpath:bN,pie:vN,scale:WRe,sortitems:XRe,stack:xN},Symbol.toStringTag,{value:"Module"}));var Cn=1e-6,H3=1e-12,wr=Math.PI,Ro=wr/2,G3=wr/4,el=wr*2,Po=180/wr,mr=wr/180,Ur=Math.abs,sv=Math.atan,Nu=Math.atan2,Dn=Math.cos,mA=Math.ceil,QRe=Math.exp,DO=Math.hypot,V3=Math.log,CF=Math.pow,En=Math.sin,Tu=Math.sign||function(e){return e>0?1:e<0?-1:0},tl=Math.sqrt,wN=Math.tan;function eFe(e){return e>1?0:e<-1?wr:Math.acos(e)}function Ol(e){return e>1?Ro:e<-1?-Ro:Math.asin(e)}function Js(){}function W3(e,t){e&&uxe.hasOwnProperty(e.type)&&uxe[e.type](e,t)}var lxe={Feature:function(e,t){W3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)W3(n[r].geometry,t)}},uxe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){LO(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)LO(n[r],t,0)},Polygon:function(e,t){cxe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)cxe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)W3(n[r],t)}};function LO(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function cxe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)LO(e[n],t,1);t.polygonEnd()}function Od(e,t){e&&lxe.hasOwnProperty(e.type)?lxe[e.type](e,t):W3(e,t)}var Y3=new Ja,X3=new Ja,tFe,nFe,RO,FO,MO,Pf={point:Js,lineStart:Js,lineEnd:Js,polygonStart:function(){Y3=new Ja,Pf.lineStart=Eot,Pf.lineEnd=Sot},polygonEnd:function(){var e=+Y3;X3.add(e<0?el+e:e),this.lineStart=this.lineEnd=this.point=Js},sphere:function(){X3.add(el)}};function Eot(){Pf.point=Aot}function Sot(){rFe(tFe,nFe)}function Aot(e,t){Pf.point=rFe,tFe=e,nFe=t,e*=mr,t*=mr,RO=e,FO=Dn(t=t/2+G3),MO=En(t)}function rFe(e,t){e*=mr,t*=mr,t=t/2+G3;var n=e-RO,r=n>=0?1:-1,i=r*n,o=Dn(t),s=En(t),a=MO*s,l=FO*o+a*Dn(i),u=a*r*En(i);Y3.add(Nu(u,l)),RO=e,FO=o,MO=s}function Cot(e){return X3=new Ja,Od(e,Pf),X3*2}function Z3(e){return[Nu(e[1],e[0]),Ol(e[2])]}function r0(e){var t=e[0],n=e[1],r=Dn(n);return[r*Dn(t),r*En(t),En(n)]}function yA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function u1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function kF(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function K3(e){var t=tl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var yo,El,ko,Wl,_m,iFe,oFe,Ab,x2,op,ih,Ld={point:OO,lineStart:fxe,lineEnd:dxe,polygonStart:function(){Ld.point=aFe,Ld.lineStart=kot,Ld.lineEnd=Tot,x2=new Ja,Pf.polygonStart()},polygonEnd:function(){Pf.polygonEnd(),Ld.point=OO,Ld.lineStart=fxe,Ld.lineEnd=dxe,Y3<0?(yo=-(ko=180),El=-(Wl=90)):x2>Cn?Wl=90:x2<-Cn&&(El=-90),ih[0]=yo,ih[1]=ko},sphere:function(){yo=-(ko=180),El=-(Wl=90)}};function OO(e,t){op.push(ih=[yo=e,ko=e]),t<El&&(El=t),t>Wl&&(Wl=t)}function sFe(e,t){var n=r0([e*mr,t*mr]);if(Ab){var r=u1(Ab,n),i=[r[1],-r[0],0],o=u1(i,r);K3(o),o=Z3(o);var s=e-_m,a=s>0?1:-1,l=o[0]*Po*a,u,f=Ur(s)>180;f^(a*_m<l&&l<a*e)?(u=o[1]*Po,u>Wl&&(Wl=u)):(l=(l+360)%360-180,f^(a*_m<l&&l<a*e)?(u=-o[1]*Po,u<El&&(El=u)):(t<El&&(El=t),t>Wl&&(Wl=t))),f?e<_m?Gl(yo,e)>Gl(yo,ko)&&(ko=e):Gl(e,ko)>Gl(yo,ko)&&(yo=e):ko>=yo?(e<yo&&(yo=e),e>ko&&(ko=e)):e>_m?Gl(yo,e)>Gl(yo,ko)&&(ko=e):Gl(e,ko)>Gl(yo,ko)&&(yo=e)}else op.push(ih=[yo=e,ko=e]);t<El&&(El=t),t>Wl&&(Wl=t),Ab=n,_m=e}function fxe(){Ld.point=sFe}function dxe(){ih[0]=yo,ih[1]=ko,Ld.point=OO,Ab=null}function aFe(e,t){if(Ab){var n=e-_m;x2.add(Ur(n)>180?n+(n>0?360:-360):n)}else iFe=e,oFe=t;Pf.point(e,t),sFe(e,t)}function kot(){Pf.lineStart()}function Tot(){aFe(iFe,oFe),Pf.lineEnd(),Ur(x2)>Cn&&(yo=-(ko=180)),ih[0]=yo,ih[1]=ko,Ab=null}function Gl(e,t){return(t-=e)<0?t+360:t}function Dot(e,t){return e[0]-t[0]}function hxe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Lot(e){var t,n,r,i,o,s,a;if(Wl=ko=-(yo=El=1/0),op=[],Od(e,Ld),n=op.length){for(op.sort(Dot),t=1,r=op[0],o=[r];t<n;++t)i=op[t],hxe(r,i[0])||hxe(r,i[1])?(Gl(r[0],i[1])>Gl(r[0],r[1])&&(r[1]=i[1]),Gl(i[0],r[1])>Gl(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Gl(r[1],i[0]))>s&&(s=a,yo=i[0],ko=r[1])}return op=ih=null,yo===1/0||El===1/0?[[NaN,NaN],[NaN,NaN]]:[[yo,El],[ko,Wl]]}var Hw,J3,Q3,ek,tk,nk,rk,ik,$O,IO,PO,lFe,uFe,Ha,Ga,Va,bc={sphere:Js,point:_N,lineStart:pxe,lineEnd:gxe,polygonStart:function(){bc.lineStart=Mot,bc.lineEnd=Oot},polygonEnd:function(){bc.lineStart=pxe,bc.lineEnd=gxe}};function _N(e,t){e*=mr,t*=mr;var n=Dn(t);TE(n*Dn(e),n*En(e),En(t))}function TE(e,t,n){++Hw,Q3+=(e-Q3)/Hw,ek+=(t-ek)/Hw,tk+=(n-tk)/Hw}function pxe(){bc.point=Rot}function Rot(e,t){e*=mr,t*=mr;var n=Dn(t);Ha=n*Dn(e),Ga=n*En(e),Va=En(t),bc.point=Fot,TE(Ha,Ga,Va)}function Fot(e,t){e*=mr,t*=mr;var n=Dn(t),r=n*Dn(e),i=n*En(e),o=En(t),s=Nu(tl((s=Ga*o-Va*i)*s+(s=Va*r-Ha*o)*s+(s=Ha*i-Ga*r)*s),Ha*r+Ga*i+Va*o);J3+=s,nk+=s*(Ha+(Ha=r)),rk+=s*(Ga+(Ga=i)),ik+=s*(Va+(Va=o)),TE(Ha,Ga,Va)}function gxe(){bc.point=_N}function Mot(){bc.point=$ot}function Oot(){cFe(lFe,uFe),bc.point=_N}function $ot(e,t){lFe=e,uFe=t,e*=mr,t*=mr,bc.point=cFe;var n=Dn(t);Ha=n*Dn(e),Ga=n*En(e),Va=En(t),TE(Ha,Ga,Va)}function cFe(e,t){e*=mr,t*=mr;var n=Dn(t),r=n*Dn(e),i=n*En(e),o=En(t),s=Ga*o-Va*i,a=Va*r-Ha*o,l=Ha*i-Ga*r,u=DO(s,a,l),f=Ol(u),c=u&&-f/u;$O.add(c*s),IO.add(c*a),PO.add(c*l),J3+=f,nk+=f*(Ha+(Ha=r)),rk+=f*(Ga+(Ga=i)),ik+=f*(Va+(Va=o)),TE(Ha,Ga,Va)}function Iot(e){Hw=J3=Q3=ek=tk=nk=rk=ik=0,$O=new Ja,IO=new Ja,PO=new Ja,Od(e,bc);var t=+$O,n=+IO,r=+PO,i=DO(t,n,r);return i<H3&&(t=nk,n=rk,r=ik,J3<Cn&&(t=Q3,n=ek,r=tk),i=DO(t,n,r),i<H3)?[NaN,NaN]:[Nu(n,t)*Po,Ol(r/i)*Po]}function NO(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function BO(e,t){return Ur(e)>wr&&(e-=Math.round(e/el)*el),[e,t]}BO.invert=BO;function fFe(e,t,n){return(e%=el)?t||n?NO(yxe(e),bxe(t,n)):yxe(e):t||n?bxe(t,n):BO}function mxe(e){return function(t,n){return t+=e,Ur(t)>wr&&(t-=Math.round(t/el)*el),[t,n]}}function yxe(e){var t=mxe(e);return t.invert=mxe(-e),t}function bxe(e,t){var n=Dn(e),r=En(e),i=Dn(t),o=En(t);function s(a,l){var u=Dn(l),f=Dn(a)*u,c=En(a)*u,d=En(l),h=d*n+f*r;return[Nu(c*i-h*o,f*n-d*r),Ol(h*i+c*o)]}return s.invert=function(a,l){var u=Dn(l),f=Dn(a)*u,c=En(a)*u,d=En(l),h=d*i-c*o;return[Nu(c*i+d*o,f*n+h*r),Ol(h*n-f*r)]},s}function Pot(e){e=fFe(e[0]*mr,e[1]*mr,e.length>2?e[2]*mr:0);function t(n){return n=e(n[0]*mr,n[1]*mr),n[0]*=Po,n[1]*=Po,n}return t.invert=function(n){return n=e.invert(n[0]*mr,n[1]*mr),n[0]*=Po,n[1]*=Po,n},t}function Not(e,t,n,r,i,o){if(n){var s=Dn(t),a=En(t),l=r*n;i==null?(i=t+r*el,o=t-l/2):(i=vxe(s,i),o=vxe(s,o),(r>0?i<o:i>o)&&(i+=r*el));for(var u,f=i;r>0?f>o:f<o;f-=l)u=Z3([s,-a*Dn(f),-a*En(f)]),e.point(u[0],u[1])}}function vxe(e,t){t=r0(t),t[0]-=e,K3(t);var n=eFe(-t[1]);return((-t[2]<0?-n:n)+el-Cn)%el}function dFe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Js,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function TC(e,t){return Ur(e[0]-t[0])<Cn&&Ur(e[1]-t[1])<Cn}function vA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function hFe(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,b=p[0],y=p[m],v;if(TC(b,y)){if(!b[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((b=p[a])[0],b[1]);i.lineEnd();return}y[0]+=2*Cn}o.push(v=new vA(b,p,null,!0)),s.push(v.o=new vA(b,null,v,!1)),o.push(v=new vA(y,p,null,!1)),s.push(v.o=new vA(y,null,v,!0))}}),!!o.length){for(s.sort(t),xxe(o),xxe(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],f,c;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=f.length;a<l;++a)i.point((c=f[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,h=!h}while(!d.v);i.lineEnd()}}}function xxe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function TF(e){return Ur(e[0])<=wr?e[0]:Tu(e[0])*((Ur(e[0])+wr)%el-wr)}function Bot(e,t){var n=TF(t),r=t[1],i=En(r),o=[En(n),-Dn(n),0],s=0,a=0,l=new Ja;i===1?r=Ro+Cn:i===-1&&(r=-Ro-Cn);for(var u=0,f=e.length;u<f;++u)if(d=(c=e[u]).length)for(var c,d,h=c[d-1],p=TF(h),m=h[1]/2+G3,b=En(m),y=Dn(m),v=0;v<d;++v,p=E,b=T,y=D,h=w){var w=c[v],E=TF(w),A=w[1]/2+G3,T=En(A),D=Dn(A),k=E-p,R=k>=0?1:-1,M=R*k,B=M>wr,K=b*T;if(l.add(Nu(K*R*En(M),y*D+K*Dn(M))),s+=B?k+R*el:k,B^p>=n^E>=n){var L=u1(r0(h),r0(w));K3(L);var $=u1(o,L);K3($);var I=(B^k>=0?-1:1)*Ol($[2]);(r>I||r===I&&(L[0]||L[1]))&&(a+=B^k>=0?1:-1)}}return(s<-Cn||s<Cn&&l<-H3)^a&1}function pFe(e,t,n,r){return function(i){var o=t(i),s=dFe(),a=t(s),l=!1,u,f,c,d={point:h,lineStart:m,lineEnd:b,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=w,f=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=b,f=XCe(f);var E=Bot(u,r);f.length?(l||(i.polygonStart(),l=!0),hFe(f,jot,E,n,i)):E&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,A){e(E,A)&&i.point(E,A)}function p(E,A){o.point(E,A)}function m(){d.point=p,o.lineStart()}function b(){d.point=h,o.lineEnd()}function y(E,A){c.push([E,A]),a.point(E,A)}function v(){a.lineStart(),c=[]}function w(){y(c[0][0],c[0][1]),a.lineEnd();var E=a.clean(),A=s.result(),T,D=A.length,k,R,M;if(c.pop(),u.push(c),c=null,!!D){if(E&1){if(R=A[0],(k=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),T=0;T<k;++T)i.point((M=R[T])[0],M[1]);i.lineEnd()}return}D>1&&E&2&&A.push(A.pop().concat(A.shift())),f.push(A.filter(zot))}}return d}}function zot(e){return e.length>1}function jot(e,t){return((e=e.x)[0]<0?e[1]-Ro-Cn:Ro-e[1])-((t=t.x)[0]<0?t[1]-Ro-Cn:Ro-t[1])}const wxe=pFe(function(){return!0},Uot,Hot,[-wr,-Ro]);function Uot(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?wr:-wr,l=Ur(o-t);Ur(l-wr)<Cn?(e.point(t,n=(n+s)/2>0?Ro:-Ro),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=wr&&(Ur(t-r)<Cn&&(t-=r*Cn),Ur(o-a)<Cn&&(o-=a*Cn),n=qot(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function qot(e,t,n,r){var i,o,s=En(e-n);return Ur(s)>Cn?sv((En(t)*(o=Dn(r))*En(n)-En(r)*(i=Dn(t))*En(e))/(i*o*s)):(t+r)/2}function Hot(e,t,n,r){var i;if(e==null)i=n*Ro,r.point(-wr,i),r.point(0,i),r.point(wr,i),r.point(wr,0),r.point(wr,-i),r.point(0,-i),r.point(-wr,-i),r.point(-wr,0),r.point(-wr,i);else if(Ur(e[0]-t[0])>Cn){var o=e[0]<t[0]?wr:-wr;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Got(e){var t=Dn(e),n=2*mr,r=t>0,i=Ur(t)>Cn;function o(f,c,d,h){Not(h,e,n,d,f,c)}function s(f,c){return Dn(f)*Dn(c)>t}function a(f){var c,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(b,y){var v=[b,y],w,E=s(b,y),A=r?E?0:u(b,y):E?u(b+(b<0?wr:-wr),y):0;if(!c&&(p=h=E)&&f.lineStart(),E!==h&&(w=l(c,v),(!w||TC(c,w)||TC(v,w))&&(v[2]=1)),E!==h)m=0,E?(f.lineStart(),w=l(v,c),f.point(w[0],w[1])):(w=l(c,v),f.point(w[0],w[1],2),f.lineEnd()),c=w;else if(i&&c&&r^E){var T;!(A&d)&&(T=l(v,c,!0))&&(m=0,r?(f.lineStart(),f.point(T[0][0],T[0][1]),f.point(T[1][0],T[1][1]),f.lineEnd()):(f.point(T[1][0],T[1][1]),f.lineEnd(),f.lineStart(),f.point(T[0][0],T[0][1],3)))}E&&(!c||!TC(c,v))&&f.point(v[0],v[1]),c=v,h=E,d=A},lineEnd:function(){h&&f.lineEnd(),c=null},clean:function(){return m|(p&&h)<<1}}}function l(f,c,d){var h=r0(f),p=r0(c),m=[1,0,0],b=u1(h,p),y=yA(b,b),v=b[0],w=y-v*v;if(!w)return!d&&f;var E=t*y/w,A=-t*v/w,T=u1(m,b),D=bA(m,E),k=bA(b,A);kF(D,k);var R=T,M=yA(D,R),B=yA(R,R),K=M*M-B*(yA(D,D)-1);if(!(K<0)){var L=tl(K),$=bA(R,(-M-L)/B);if(kF($,D),$=Z3($),!d)return $;var I=f[0],U=c[0],q=f[1],Y=c[1],X;U<I&&(X=I,I=U,U=X);var te=U-I,le=Ur(te-wr)<Cn,ee=le||te<Cn;if(!le&&Y<q&&(X=q,q=Y,Y=X),ee?le?q+Y>0^$[1]<(Ur($[0]-I)<Cn?q:Y):q<=$[1]&&$[1]<=Y:te>wr^(I<=$[0]&&$[0]<=U)){var z=bA(R,(-M+L)/B);return kF(z,D),[$,Z3(z)]}}}function u(f,c){var d=r?e:wr-e,h=0;return f<-d?h|=1:f>d&&(h|=2),c<-d?h|=4:c>d&&(h|=8),h}return pFe(s,a,o,r?[0,-e]:[-wr,e-wr])}function Vot(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],f=0,c=1,d=l-s,h=u-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<f)return;p<c&&(c=p)}else if(d>0){if(p>c)return;p>f&&(f=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>c)return;p>f&&(f=p)}else if(d>0){if(p<f)return;p<c&&(c=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<f)return;p<c&&(c=p)}else if(h>0){if(p>c)return;p>f&&(f=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>c)return;p>f&&(f=p)}else if(h>0){if(p<f)return;p<c&&(c=p)}return f>0&&(e[0]=s+f*d,e[1]=a+f*h),c<1&&(t[0]=s+c*d,t[1]=a+c*h),!0}}}}}var Gw=1e9,xA=-Gw;function gFe(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,c,d){var h=0,p=0;if(u==null||(h=s(u,c))!==(p=s(f,c))||l(u,f)<0^c>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+c+4)%4)!==p);else d.point(f[0],f[1])}function s(u,f){return Ur(u[0]-e)<Cn?f>0?0:3:Ur(u[0]-n)<Cn?f>0?2:1:Ur(u[1]-t)<Cn?f>0?1:0:f>0?3:2}function a(u,f){return l(u.x,f.x)}function l(u,f){var c=s(u,1),d=s(f,1);return c!==d?c-d:c===0?f[1]-u[1]:c===1?u[0]-f[0]:c===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,c=dFe(),d,h,p,m,b,y,v,w,E,A,T,D={point:k,lineStart:K,lineEnd:L,polygonStart:M,polygonEnd:B};function k(I,U){i(I,U)&&f.point(I,U)}function R(){for(var I=0,U=0,q=h.length;U<q;++U)for(var Y=h[U],X=1,te=Y.length,le=Y[0],ee,z,he=le[0],de=le[1];X<te;++X)ee=he,z=de,le=Y[X],he=le[0],de=le[1],z<=r?de>r&&(he-ee)*(r-z)>(de-z)*(e-ee)&&++I:de<=r&&(he-ee)*(r-z)<(de-z)*(e-ee)&&--I;return I}function M(){f=c,d=[],h=[],T=!0}function B(){var I=R(),U=T&&I,q=(d=XCe(d)).length;(U||q)&&(u.polygonStart(),U&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),q&&hFe(d,a,I,o,u),u.polygonEnd()),f=u,d=h=p=null}function K(){D.point=$,h&&h.push(p=[]),A=!0,E=!1,v=w=NaN}function L(){d&&($(m,b),y&&E&&c.rejoin(),d.push(c.result())),D.point=k,E&&f.lineEnd()}function $(I,U){var q=i(I,U);if(h&&p.push([I,U]),A)m=I,b=U,y=q,A=!1,q&&(f.lineStart(),f.point(I,U));else if(q&&E)f.point(I,U);else{var Y=[v=Math.max(xA,Math.min(Gw,v)),w=Math.max(xA,Math.min(Gw,w))],X=[I=Math.max(xA,Math.min(Gw,I)),U=Math.max(xA,Math.min(Gw,U))];Vot(Y,X,e,t,n,r)?(E||(f.lineStart(),f.point(Y[0],Y[1])),f.point(X[0],X[1]),q||f.lineEnd(),T=!1):q&&(f.lineStart(),f.point(I,U),T=!1)}v=I,w=U,E=q}return D}}function _xe(e,t,n){var r=Kl(e,t-Cn,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function Exe(e,t,n){var r=Kl(e,t-Cn,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Wot(){var e,t,n,r,i,o,s,a,l=10,u=l,f=90,c=360,d,h,p,m,b=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Kl(mA(r/f)*f,n,f).map(p).concat(Kl(mA(a/c)*c,s,c).map(m)).concat(Kl(mA(t/l)*l,e,l).filter(function(w){return Ur(w%f)>Cn}).map(d)).concat(Kl(mA(o/u)*u,i,u).filter(function(w){return Ur(w%c)>Cn}).map(h))}return y.lines=function(){return v().map(function(w){return{type:"LineString",coordinates:w}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(s).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(w){return arguments.length?y.extentMajor(w).extentMinor(w):y.extentMinor()},y.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],s=+w[1][1],r>n&&(w=r,r=n,n=w),a>s&&(w=a,a=s,s=w),y.precision(b)):[[r,a],[n,s]]},y.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],o=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),o>i&&(w=o,o=i,i=w),y.precision(b)):[[t,o],[e,i]]},y.step=function(w){return arguments.length?y.stepMajor(w).stepMinor(w):y.stepMinor()},y.stepMajor=function(w){return arguments.length?(f=+w[0],c=+w[1],y):[f,c]},y.stepMinor=function(w){return arguments.length?(l=+w[0],u=+w[1],y):[l,u]},y.precision=function(w){return arguments.length?(b=+w,d=_xe(o,i,90),h=Exe(t,e,b),p=_xe(a,s,90),m=Exe(r,n,b),y):b},y.extentMajor([[-180,-90+Cn],[180,90-Cn]]).extentMinor([[-180,-80-Cn],[180,80+Cn]])}const l_=e=>e;var DF=new Ja,zO=new Ja,mFe,yFe,jO,UO,$d={point:Js,lineStart:Js,lineEnd:Js,polygonStart:function(){$d.lineStart=Yot,$d.lineEnd=Zot},polygonEnd:function(){$d.lineStart=$d.lineEnd=$d.point=Js,DF.add(Ur(zO)),zO=new Ja},result:function(){var e=DF/2;return DF=new Ja,e}};function Yot(){$d.point=Xot}function Xot(e,t){$d.point=bFe,mFe=jO=e,yFe=UO=t}function bFe(e,t){zO.add(UO*e-jO*t),jO=e,UO=t}function Zot(){bFe(mFe,yFe)}var c1=1/0,ok=c1,u_=-c1,sk=u_,ak={point:Kot,lineStart:Js,lineEnd:Js,polygonStart:Js,polygonEnd:Js,result:function(){var e=[[c1,ok],[u_,sk]];return u_=sk=-(ok=c1=1/0),e}};function Kot(e,t){e<c1&&(c1=e),e>u_&&(u_=e),t<ok&&(ok=t),t>sk&&(sk=t)}var qO=0,HO=0,Vw=0,lk=0,uk=0,pb=0,GO=0,VO=0,Ww=0,vFe,xFe,yf,bf,Su={point:i0,lineStart:Sxe,lineEnd:Axe,polygonStart:function(){Su.lineStart=est,Su.lineEnd=tst},polygonEnd:function(){Su.point=i0,Su.lineStart=Sxe,Su.lineEnd=Axe},result:function(){var e=Ww?[GO/Ww,VO/Ww]:pb?[lk/pb,uk/pb]:Vw?[qO/Vw,HO/Vw]:[NaN,NaN];return qO=HO=Vw=lk=uk=pb=GO=VO=Ww=0,e}};function i0(e,t){qO+=e,HO+=t,++Vw}function Sxe(){Su.point=Jot}function Jot(e,t){Su.point=Qot,i0(yf=e,bf=t)}function Qot(e,t){var n=e-yf,r=t-bf,i=tl(n*n+r*r);lk+=i*(yf+e)/2,uk+=i*(bf+t)/2,pb+=i,i0(yf=e,bf=t)}function Axe(){Su.point=i0}function est(){Su.point=nst}function tst(){wFe(vFe,xFe)}function nst(e,t){Su.point=wFe,i0(vFe=yf=e,xFe=bf=t)}function wFe(e,t){var n=e-yf,r=t-bf,i=tl(n*n+r*r);lk+=i*(yf+e)/2,uk+=i*(bf+t)/2,pb+=i,i=bf*e-yf*t,GO+=i*(yf+e),VO+=i*(bf+t),Ww+=i*3,i0(yf=e,bf=t)}function _Fe(e){this._context=e}_Fe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,el);break}}},result:Js};var WO=new Ja,LF,EFe,SFe,Yw,Xw,c_={point:Js,lineStart:function(){c_.point=rst},lineEnd:function(){LF&&AFe(EFe,SFe),c_.point=Js},polygonStart:function(){LF=!0},polygonEnd:function(){LF=null},result:function(){var e=+WO;return WO=new Ja,e}};function rst(e,t){c_.point=AFe,EFe=Yw=e,SFe=Xw=t}function AFe(e,t){Yw-=e,Xw-=t,WO.add(tl(Yw*Yw+Xw*Xw)),Yw=e,Xw=t}let Cxe,ck,kxe,Txe;class Dxe{constructor(t){this._append=t==null?CFe:ist(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==kxe||this._append!==ck){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,kxe=r,ck=this._append,Txe=this._,this._=i}this._+=Txe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function CFe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ist(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return CFe;if(t!==Cxe){const n=10**t;Cxe=t,ck=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return ck}function kFe(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Od(a,i(o))),o.result()}return s.area=function(a){return Od(a,i($d)),$d.result()},s.measure=function(a){return Od(a,i(c_)),c_.result()},s.bounds=function(a){return Od(a,i(ak)),ak.result()},s.centroid=function(a){return Od(a,i(Su)),Su.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,l_):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new Dxe(n)):new _Fe(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new Dxe(n)),s},s.projection(e).digits(n).context(t)}function aL(e){return function(t){var n=new YO;for(var r in e)n[r]=e[r];return n.stream=t,n}}function YO(){}YO.prototype={constructor:YO,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function EN(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Od(n,e.stream(ak)),t(ak.result()),r!=null&&e.clipExtent(r),e}function lL(e,t,n){return EN(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function SN(e,t,n){return lL(e,[[0,0],t],n)}function AN(e,t,n){return EN(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function CN(e,t,n){return EN(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var Lxe=16,ost=Dn(30*mr);function Rxe(e,t){return+t?ast(e,t):sst(e)}function sst(e){return aL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ast(e,t){function n(r,i,o,s,a,l,u,f,c,d,h,p,m,b){var y=u-r,v=f-i,w=y*y+v*v;if(w>4*t&&m--){var E=s+d,A=a+h,T=l+p,D=tl(E*E+A*A+T*T),k=Ol(T/=D),R=Ur(Ur(T)-1)<Cn||Ur(o-c)<Cn?(o+c)/2:Nu(A,E),M=e(R,k),B=M[0],K=M[1],L=B-r,$=K-i,I=v*L-y*$;(I*I/w>t||Ur((y*L+v*$)/w-.5)>.3||s*d+a*h+l*p<ost)&&(n(r,i,o,s,a,l,B,K,R,E/=D,A/=D,T,m,b),b.point(B,K),n(B,K,R,E,A,T,u,f,c,d,h,p,m,b))}}return function(r){var i,o,s,a,l,u,f,c,d,h,p,m,b={point:y,lineStart:v,lineEnd:E,polygonStart:function(){r.polygonStart(),b.lineStart=A},polygonEnd:function(){r.polygonEnd(),b.lineStart=v}};function y(k,R){k=e(k,R),r.point(k[0],k[1])}function v(){c=NaN,b.point=w,r.lineStart()}function w(k,R){var M=r0([k,R]),B=e(k,R);n(c,d,f,h,p,m,c=B[0],d=B[1],f=k,h=M[0],p=M[1],m=M[2],Lxe,r),r.point(c,d)}function E(){b.point=y,r.lineEnd()}function A(){v(),b.point=T,b.lineEnd=D}function T(k,R){w(i=k,R),o=c,s=d,a=h,l=p,u=m,b.point=w}function D(){n(c,d,f,h,p,m,o,s,i,a,l,u,Lxe,r),b.lineEnd=E,E()}return b}}var lst=aL({point:function(e,t){this.stream.point(e*mr,t*mr)}});function ust(e){return aL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function cst(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function Fxe(e,t,n,r,i,o){if(!o)return cst(e,t,n,r,i);var s=Dn(o),a=En(o),l=s*e,u=a*e,f=s/e,c=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(m,b){return m*=r,b*=i,[l*m-u*b+t,n-u*m-l*b]}return p.invert=function(m,b){return[r*(f*m-c*b+d),i*(h-c*m-f*b)]},p}function Yf(e){return TFe(function(){return e})()}function TFe(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,f,c=0,d=1,h=1,p=null,m=wxe,b=null,y,v,w,E=l_,A=.5,T,D,k,R,M;function B(I){return k(I[0]*mr,I[1]*mr)}function K(I){return I=k.invert(I[0],I[1]),I&&[I[0]*Po,I[1]*Po]}B.stream=function(I){return R&&M===I?R:R=lst(ust(f)(m(T(E(M=I)))))},B.preclip=function(I){return arguments.length?(m=I,p=void 0,$()):m},B.postclip=function(I){return arguments.length?(E=I,b=y=v=w=null,$()):E},B.clipAngle=function(I){return arguments.length?(m=+I?Got(p=I*mr):(p=null,wxe),$()):p*Po},B.clipExtent=function(I){return arguments.length?(E=I==null?(b=y=v=w=null,l_):gFe(b=+I[0][0],y=+I[0][1],v=+I[1][0],w=+I[1][1]),$()):b==null?null:[[b,y],[v,w]]},B.scale=function(I){return arguments.length?(n=+I,L()):n},B.translate=function(I){return arguments.length?(r=+I[0],i=+I[1],L()):[r,i]},B.center=function(I){return arguments.length?(o=I[0]%360*mr,s=I[1]%360*mr,L()):[o*Po,s*Po]},B.rotate=function(I){return arguments.length?(a=I[0]%360*mr,l=I[1]%360*mr,u=I.length>2?I[2]%360*mr:0,L()):[a*Po,l*Po,u*Po]},B.angle=function(I){return arguments.length?(c=I%360*mr,L()):c*Po},B.reflectX=function(I){return arguments.length?(d=I?-1:1,L()):d<0},B.reflectY=function(I){return arguments.length?(h=I?-1:1,L()):h<0},B.precision=function(I){return arguments.length?(T=Rxe(D,A=I*I),$()):tl(A)},B.fitExtent=function(I,U){return lL(B,I,U)},B.fitSize=function(I,U){return SN(B,I,U)},B.fitWidth=function(I,U){return AN(B,I,U)},B.fitHeight=function(I,U){return CN(B,I,U)};function L(){var I=Fxe(n,0,0,d,h,c).apply(null,t(o,s)),U=Fxe(n,r-I[0],i-I[1],d,h,c);return f=fFe(a,l,u),D=NO(t,U),k=NO(f,D),T=Rxe(D,A),$()}function $(){return R=M=null,B}return function(){return t=e.apply(this,arguments),B.invert=t.invert&&K,L()}}function kN(e){var t=0,n=wr/3,r=TFe(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*mr,n=o[1]*mr):[t*Po,n*Po]},i}function fst(e){var t=Dn(e);function n(r,i){return[r*t,En(i)/t]}return n.invert=function(r,i){return[r/t,Ol(i*t)]},n}function dst(e,t){var n=En(e),r=(n+En(t))/2;if(Ur(r)<Cn)return fst(e);var i=1+n*(2*r-n),o=tl(i)/r;function s(a,l){var u=tl(i-2*r*En(l))/r;return[u*En(a*=r),o-u*Dn(a)]}return s.invert=function(a,l){var u=o-l,f=Nu(a,Ur(u))*Tu(u);return u*r<0&&(f-=wr*Tu(a)*Tu(u)),[f/r,Ol((i-(a*a+u*u)*r*r)/(2*r))]},s}function fk(){return kN(dst).scale(155.424).center([0,33.6442])}function DFe(){return fk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hst(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function pst(){var e,t,n=DFe(),r,i=fk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=fk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function f(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}f.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,b=(d[1]-p[1])/h;return(b>=.12&&b<.234&&m>=-.425&&m<-.214?i:b>=.166&&b<.234&&m>=-.214&&m<-.115?s:n).invert(d)},f.stream=function(d){return e&&t===d?e:e=hst([n.stream(t=d),i.stream(d),s.stream(d)])},f.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),c()):n.precision()},f.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),f.translate(n.translate())):n.scale()},f.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),o=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Cn,m+.12*h+Cn],[p-.214*h-Cn,m+.234*h-Cn]]).stream(u),a=s.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Cn,m+.166*h+Cn],[p-.115*h-Cn,m+.234*h-Cn]]).stream(u),c()},f.fitExtent=function(d,h){return lL(f,d,h)},f.fitSize=function(d,h){return SN(f,d,h)},f.fitWidth=function(d,h){return AN(f,d,h)},f.fitHeight=function(d,h){return CN(f,d,h)};function c(){return e=t=null,f}return f.scale(1070)}function LFe(e){return function(t,n){var r=Dn(t),i=Dn(n),o=e(r*i);return o===1/0?[2,0]:[o*i*En(t),o*En(n)]}}function DE(e){return function(t,n){var r=tl(t*t+n*n),i=e(r),o=En(i),s=Dn(i);return[Nu(t*o,r*s),Ol(r&&n*o/r)]}}var RFe=LFe(function(e){return tl(2/(1+e))});RFe.invert=DE(function(e){return 2*Ol(e/2)});function gst(){return Yf(RFe).scale(124.75).clipAngle(180-.001)}var FFe=LFe(function(e){return(e=eFe(e))&&e/En(e)});FFe.invert=DE(function(e){return e});function mst(){return Yf(FFe).scale(79.4188).clipAngle(180-.001)}function uL(e,t){return[e,V3(wN((Ro+t)/2))]}uL.invert=function(e,t){return[e,2*sv(QRe(t))-Ro]};function yst(){return MFe(uL).scale(961/el)}function MFe(e){var t=Yf(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(c){return arguments.length?(r(c),f()):r()},t.translate=function(c){return arguments.length?(i(c),f()):i()},t.center=function(c){return arguments.length?(n(c),f()):n()},t.clipExtent=function(c){return arguments.length?(c==null?s=a=l=u=null:(s=+c[0][0],a=+c[0][1],l=+c[1][0],u=+c[1][1]),f()):s==null?null:[[s,a],[l,u]]};function f(){var c=wr*r(),d=t(Pot(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-c,d[1]-c],[d[0]+c,d[1]+c]]:e===uL?[[Math.max(d[0]-c,s),a],[Math.min(d[0]+c,l),u]]:[[s,Math.max(d[1]-c,a)],[l,Math.min(d[1]+c,u)]])}return f()}function wA(e){return wN((Ro+e)/2)}function bst(e,t){var n=Dn(e),r=e===t?En(e):V3(n/Dn(t))/V3(wA(t)/wA(e)),i=n*CF(wA(e),r)/r;if(!r)return uL;function o(s,a){i>0?a<-Ro+Cn&&(a=-Ro+Cn):a>Ro-Cn&&(a=Ro-Cn);var l=i/CF(wA(a),r);return[l*En(r*s),i-l*Dn(r*s)]}return o.invert=function(s,a){var l=i-a,u=Tu(r)*tl(s*s+l*l),f=Nu(s,Ur(l))*Tu(l);return l*r<0&&(f-=wr*Tu(s)*Tu(l)),[f/r,2*sv(CF(i/u,1/r))-Ro]},o}function vst(){return kN(bst).scale(109.5).parallels([30,30])}function dk(e,t){return[e,t]}dk.invert=dk;function xst(){return Yf(dk).scale(152.63)}function wst(e,t){var n=Dn(e),r=e===t?En(e):(n-Dn(t))/(t-e),i=n/r+e;if(Ur(r)<Cn)return dk;function o(s,a){var l=i-a,u=r*s;return[l*En(u),i-l*Dn(u)]}return o.invert=function(s,a){var l=i-a,u=Nu(s,Ur(l))*Tu(l);return l*r<0&&(u-=wr*Tu(s)*Tu(l)),[u/r,i-Tu(r)*tl(s*s+l*l)]},o}function _st(){return kN(wst).scale(131.154).center([0,13.9389])}var w2=1.340264,_2=-.081106,E2=893e-6,S2=.003796,hk=tl(3)/2,Est=12;function OFe(e,t){var n=Ol(hk*En(t)),r=n*n,i=r*r*r;return[e*Dn(n)/(hk*(w2+3*_2*r+i*(7*E2+9*S2*r))),n*(w2+_2*r+i*(E2+S2*r))]}OFe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<Est&&(a=n*(w2+_2*r+i*(E2+S2*r))-t,l=w2+3*_2*r+i*(7*E2+9*S2*r),n-=s=a/l,r=n*n,i=r*r*r,!(Ur(s)<H3));++o);return[hk*e*(w2+3*_2*r+i*(7*E2+9*S2*r))/Dn(n),Ol(En(n)/hk)]};function Sst(){return Yf(OFe).scale(177.158)}function $Fe(e,t){var n=Dn(t),r=Dn(e)*n;return[n*En(e)/r,En(t)/r]}$Fe.invert=DE(sv);function Ast(){return Yf($Fe).scale(144.049).clipAngle(60)}function Cst(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,f,c,d=1,h=1,p=aL({point:function(E,A){var T=w([E,A]);this.stream.point(T[0],T[1])}}),m=l_,b,y;function v(){return d=e*r,h=e*i,b=y=null,w}function w(E){var A=E[0]*d,T=E[1]*h;if(o){var D=T*s-A*a;A=A*s+T*a,T=D}return[A+t,T+n]}return w.invert=function(E){var A=E[0]-t,T=E[1]-n;if(o){var D=T*s+A*a;A=A*s-T*a,T=D}return[A/d,T/h]},w.stream=function(E){return b&&y===E?b:b=p(m(y=E))},w.postclip=function(E){return arguments.length?(m=E,l=u=f=c=null,v()):m},w.clipExtent=function(E){return arguments.length?(m=E==null?(l=u=f=c=null,l_):gFe(l=+E[0][0],u=+E[0][1],f=+E[1][0],c=+E[1][1]),v()):l==null?null:[[l,u],[f,c]]},w.scale=function(E){return arguments.length?(e=+E,v()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],v()):[t,n]},w.angle=function(E){return arguments.length?(o=E%360*mr,a=En(o),s=Dn(o),v()):o*Po},w.reflectX=function(E){return arguments.length?(r=E?-1:1,v()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,v()):i<0},w.fitExtent=function(E,A){return lL(w,E,A)},w.fitSize=function(E,A){return SN(w,E,A)},w.fitWidth=function(E,A){return AN(w,E,A)},w.fitHeight=function(E,A){return CN(w,E,A)},w}function IFe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}IFe.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Ur(i)>Cn&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function kst(){return Yf(IFe).scale(175.295)}function PFe(e,t){return[Dn(t)*En(e),En(t)]}PFe.invert=DE(Ol);function Tst(){return Yf(PFe).scale(249.5).clipAngle(90+Cn)}function NFe(e,t){var n=Dn(t),r=1+Dn(e)*n;return[n*En(e)/r,En(t)/r]}NFe.invert=DE(function(e){return 2*sv(e)});function Dst(){return Yf(NFe).scale(250).clipAngle(142)}function BFe(e,t){return[V3(wN((Ro+t)/2)),-e]}BFe.invert=function(e,t){return[-t,2*sv(QRe(e))-Ro]};function Lst(){var e=MFe(BFe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Rst=Math.abs,XO=Math.cos,pk=Math.sin,Fst=1e-6,zFe=Math.PI,ZO=zFe/2,Mxe=Mst(2);function Oxe(e){return e>1?ZO:e<-1?-ZO:Math.asin(e)}function Mst(e){return e>0?Math.sqrt(e):0}function Ost(e,t){var n=e*pk(t),r=30,i;do t-=i=(t+pk(t)-n)/(1+XO(t));while(Rst(i)>Fst&&--r>0);return t/2}function $st(e,t,n){function r(i,o){return[e*i*XO(o=Ost(n,o)),t*pk(o)]}return r.invert=function(i,o){return o=Oxe(o/t),[i/(e*XO(o)),Oxe((2*o+pk(2*o))/n)]},r}var Ist=$st(Mxe/ZO,Mxe,zFe);function Pst(){return Yf(Ist).scale(169.529)}const Nst=kFe(),KO=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Bst(e,t){return function n(){const r=t();return r.type=e,r.path=kFe().projection(r),r.copy=r.copy||function(){const i=n();return KO.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},tLe(r)}}function TN(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(gk[e]=Bst(e,t),this):gk[e]||null}function jFe(e){return e&&e.path||Nst}const gk={albers:DFe,albersusa:pst,azimuthalequalarea:gst,azimuthalequidistant:mst,conicconformal:vst,conicequalarea:fk,conicequidistant:_st,equalEarth:Sst,equirectangular:xst,gnomonic:Ast,identity:Cst,mercator:yst,mollweide:Pst,naturalEarth1:kst,orthographic:Tst,stereographic:Dst,transversemercator:Lst};for(const e in gk)TN(e,gk[e]);function zst(){}const Ed=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function UFe(){var e=1,t=1,n=a;function r(l,u){return u.map(f=>i(l,f))}function i(l,u){var f=[],c=[];return o(l,u,d=>{n(d,l,u),jst(d)>0?f.push([d]):c.push(d)}),c.forEach(d=>{for(var h=0,p=f.length,m;h<p;++h)if(Ust((m=f[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function o(l,u,f){var c=[],d=[],h,p,m,b,y,v;for(h=p=-1,b=l[0]>=u,Ed[b<<1].forEach(w);++h<e-1;)m=b,b=l[h+1]>=u,Ed[m|b<<1].forEach(w);for(Ed[b<<0].forEach(w);++p<t-1;){for(h=-1,b=l[p*e+e]>=u,y=l[p*e]>=u,Ed[b<<1|y<<2].forEach(w);++h<e-1;)m=b,b=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Ed[m|b<<1|y<<2|v<<3].forEach(w);Ed[b|y<<3].forEach(w)}for(h=-1,y=l[p*e]>=u,Ed[y<<2].forEach(w);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Ed[y<<2|v<<3].forEach(w);Ed[y<<3].forEach(w);function w(E){var A=[E[0][0]+h,E[0][1]+p],T=[E[1][0]+h,E[1][1]+p],D=s(A),k=s(T),R,M;(R=d[D])?(M=c[k])?(delete d[R.end],delete c[M.start],R===M?(R.ring.push(T),f(R.ring)):c[R.start]=d[M.end]={start:R.start,end:M.end,ring:R.ring.concat(M.ring)}):(delete d[R.end],R.ring.push(T),d[R.end=k]=R):(R=c[k])?(M=d[D])?(delete c[R.start],delete d[M.end],R===M?(R.ring.push(T),f(R.ring)):c[M.start]=d[R.end]={start:M.start,end:R.end,ring:M.ring.concat(R.ring)}):(delete c[R.start],R.ring.unshift(A),c[R.start=D]=R):c[D]=d[k]={start:D,end:k,ring:[A,T]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,f){l.forEach(c=>{var d=c[0],h=c[1],p=d|0,m=h|0,b,y=u[m*e+p];d>0&&d<e&&p===d&&(b=u[m*e+p-1],c[0]=d+(f-b)/(y-b)-.5),h>0&&h<t&&m===h&&(b=u[(m-1)*e+p],c[1]=h+(f-b)/(y-b)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);return u>=0&&f>=0||st("invalid size"),e=u,t=f,r},r.smooth=function(l){return arguments.length?(n=l?a:zst,r):n===a},r}function jst(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Ust(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=qst(e,t[n]))return i;return 0}function qst(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],f=l[1],c=e[a],d=c[0],h=c[1];if(Hst(l,c,t))return 0;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(i=-i)}return i}function Hst(e,t,n){var r;return Gst(e,t,n)&&Vst(e[r=+(e[0]===t[0])],n[r],t[r])}function Gst(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Vst(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function qFe(e,t,n){return function(r){var i=$f(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?Zm(o,s,e):a/(e+1);return Kl(o+l,s,l)}}function DN(e){rt.call(this,null,e)}DN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Lt(DN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ra,o=UFe().smooth(e.smooth!==!1),s=e.thresholds||Wst(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const f=i(u),c=o.size([f.width,f.height])(f.values,at(s)?s:s(f.values));Yst(c,f,u,e),c.forEach(d=>{l.push(FD(u,yi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Wst(e,t,n){const r=qFe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Pm(t(i).values)))}function Yst(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(ir(i)&&(i=i(n,r)),ir(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(li(i)?i:i[0])||1,a=(li(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(HFe(t,s,a,l,u))}function HFe(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(c){c.forEach(u)}function u(c){a&&c.reverse(),c.forEach(f)}function f(c){c[0]=(c[0]-o)*t+r,c[1]=(c[1]-s)*n+i}return function(c){return c.coordinates.forEach(l),c}}function $xe(e,t,n){const r=e>=0?e:$I(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function RF(e){return ir(e)?e:Fa(+e)}function GFe(){var e=l=>l[0],t=l=>l[1],n=K1,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const f=$xe(r[0],l,e)>>s,c=$xe(r[1],l,t)>>s,d=f?f+2:0,h=c?c+2:0,p=2*d+(i>>s),m=2*h+(o>>s),b=new Float32Array(p*m),y=new Float32Array(p*m);let v=b;l.forEach(E=>{const A=d+(+e(E)>>s),T=h+(+t(E)>>s);A>=0&&A<p&&T>=0&&T<m&&(b[A+T*p]+=+n(E))}),f>0&&c>0?(Ny(p,m,b,y,f),By(p,m,y,b,c),Ny(p,m,b,y,f),By(p,m,y,b,c),Ny(p,m,b,y,f),By(p,m,y,b,c)):f>0?(Ny(p,m,b,y,f),Ny(p,m,y,b,f),Ny(p,m,b,y,f),v=y):c>0&&(By(p,m,b,y,c),By(p,m,y,b,c),By(p,m,b,y,c),v=y);const w=u?Math.pow(2,-2*s):1/ZCe(v);for(let E=0,A=p*m;E<A;++E)v[E]*=w;return{values:v,scale:1<<s,width:p,height:m,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=RF(l),a):e},a.y=function(l){return arguments.length?(t=RF(l),a):t},a.weight=function(l){return arguments.length?(n=RF(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],f=+l[1];return u>=0&&f>=0||st("invalid size"),i=u,o=f,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||st("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=Pt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&st("invalid bandwidth"),r=l,a):r},a}function Ny(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function By(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function LN(e){rt.call(this,null,e)}LN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Xst=["x","y","weight","size","cellSize","bandwidth"];function VFe(e,t){return Xst.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Lt(LN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Zst(r,e.groupby),o=(e.groupby||[]).map(Fo),s=VFe(GFe(),e),a=e.as||"grid",l=[];function u(f,c){for(let d=0;d<o.length;++d)f[o[d]]=c[d];return f}return l=i.map(f=>yi(u({[a]:s(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Zst(e,t){var n=[],r=f=>f(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function RN(e){rt.call(this,null,e)}RN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Lt(RN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=UFe().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||qFe(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=VFe(GFe(),e)(i,!0),l=HFe(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=at(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(yi),n}});const JO="Feature",FN="FeatureCollection",Kst="MultiPoint";function MN(e){rt.call(this,null,e)}MN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Lt(MN,rt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Ra,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(ka(a))||o&&t.modified(ka(o))||s&&t.modified(ka(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,f=>n.push(a(f))),o&&s&&(t.visit(l,f=>{var c=o(f),d=s(f);c!=null&&d!=null&&(c=+c)===c&&(d=+d)===d&&r.push([c,d])}),n=n.concat({type:JO,geometry:{type:Kst,coordinates:r}})),this.value={type:FN,features:n}}});function ON(e){rt.call(this,null,e)}ON.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Lt(ON,rt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ra,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=jFe(e.projection),n.materialize().reflow()):s=i===Ra||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Jst(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function Jst(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function $N(e){rt.call(this,null,e)}$N.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Lt($N,rt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(f){const c=n([r(f),i(f)]);c?(f[s]=c[0],f[a]=c[1]):(f[s]=void 0,f[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function IN(e){rt.call(this,null,e)}IN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Lt(IN,rt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Qst(jFe(e.projection),e.field||Ou("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function Qst(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function PN(e){rt.call(this,[],e),this.generator=Wot()}PN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Lt(PN,rt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)ir(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(jTe(n[0],i)):t.add.push(yi(i)),n[0]=i,t}});function NN(e){rt.call(this,null,e)}NN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Lt(NN,rt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ra,o=tat(e.opacity,e),s=eat(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Pm(n.map(u=>Pm(i(u).values))):0};return n.forEach(u=>{const f=i(u),c=rr({},u,l);r||(c.$max=Pm(f.values||[])),u[a]=nat(f,c,s.dep?s:Fa(s(c)),o.dep?o:Fa(o(c)))}),t.reflow(!0).modifies(a)}});function eat(e,t){let n;return ir(e)?(n=r=>r3(e(r,t)),n.dep=WFe(e)):n=Fa(r3(e||"#888")),n}function tat(e,t){let n;return ir(e)?(n=r=>e(r,t),n.dep=WFe(e)):e?n=Fa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function WFe(e){if(!ir(e))return!1;const t=Tc(ka(e));return t.$x||t.$y||t.$value||t.$max}function nat(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,f=e.values,c=f?b=>f[b]:fp,d=Op(l-s,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),m=p.data;for(let b=a,y=0;b<u;++b){t.$y=b-a;for(let v=s,w=b*i;v<l;++v,y+=4){t.$x=v-s,t.$value=c(v+w);const E=n(t);m[y+0]=E.r,m[y+1]=E.g,m[y+2]=E.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function YFe(e){rt.call(this,null,e),this.modified(!0)}Lt(YFe,rt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=iat(e.type),KO.forEach(r=>{e[r]!=null&&Ixe(n,r,e[r])})):KO.forEach(r=>{e.modified(r)&&Ixe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&rat(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function rat(e,t){const n=oat(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function iat(e){const t=TN((e||"mercator").toLowerCase());return t||st("Unrecognized projection type: "+e),t()}function Ixe(e,t,n){ir(e[t])&&e[t](n)}function oat(e){return e=Pt(e),e.length===1?e[0]:{type:FN,features:e.reduce((t,n)=>t.concat(sat(n)),[])}}function sat(e){return e.type===FN?e.features:Pt(e).filter(t=>t!=null).map(t=>t.type===JO?t:{type:JO,geometry:t})}const aat=Object.freeze(Object.defineProperty({__proto__:null,contour:RN,geojson:MN,geopath:ON,geopoint:$N,geoshape:IN,graticule:PN,heatmap:NN,isocontour:DN,kde2d:LN,projection:YFe},Symbol.toStringTag,{value:"Module"}));function lat(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function uat(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return XFe(this.cover(t,n),t,n,e)}function XFe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,f=e._y1,c,d,h,p,m,b,y,v;if(!o)return e._root=s,e;for(;o.length;)if((m=t>=(c=(a+u)/2))?a=c:u=c,(b=n>=(d=(l+f)/2))?l=d:f=d,i=o,!(o=o[y=b<<1|m]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(c=(a+u)/2))?a=c:u=c,(b=n>=(d=(l+f)/2))?l=d:f=d;while((y=b<<1|m)===(v=(p>=d)<<1|h>=c));return i[v]=o,i[y]=s,e}function cat(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,f=-1/0,c=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>f&&(f=i),o<u&&(u=o),o>c&&(c=o));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),n=0;n<r;++n)XFe(this,s[n],a[n],e[n]);return this}function fat(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function dat(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function hat(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Wa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function pat(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,f=this._x1,c=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Wa(h,i,o,f,c)),n==null?n=1/0:(i=e-n,o=t-n,f=e+n,c=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>f||(a=p.y0)>c||(l=p.x1)<i||(u=p.y1)<o))if(h.length){var b=(s+l)/2,y=(a+u)/2;d.push(new Wa(h[3],b,y,l,u),new Wa(h[2],s,y,b,u),new Wa(h[1],b,a,l,y),new Wa(h[0],s,a,b,y)),(m=(t>=y)<<1|e>=b)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=v*v+w*w;if(E<n){var A=Math.sqrt(n=E);i=e-A,o=t-A,f=e+A,c=t+A,r=h.data}}return r}function gat(e){if(isNaN(f=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,f,c,d,h,p,m,b,y;if(!n)return this;if(n.length)for(;;){if((p=f>=(d=(s+l)/2))?s=d:l=d,(m=c>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[b=m<<1|p]))return this;if(!n.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(r=t,y=b)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[b]=o:delete t[b],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function mat(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function yat(){return this._root}function bat(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function vat(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new Wa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,f=(s+l)/2;(i=r[3])&&t.push(new Wa(i,u,f,a,l)),(i=r[2])&&t.push(new Wa(i,o,f,u,l)),(i=r[1])&&t.push(new Wa(i,u,s,a,f)),(i=r[0])&&t.push(new Wa(i,o,s,u,f))}return this}function xat(e){var t=[],n=[],r;for(this._root&&t.push(new Wa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,f=(s+l)/2,c=(a+u)/2;(o=i[0])&&t.push(new Wa(o,s,a,f,c)),(o=i[1])&&t.push(new Wa(o,f,a,l,c)),(o=i[2])&&t.push(new Wa(o,s,c,f,u)),(o=i[3])&&t.push(new Wa(o,f,c,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function wat(e){return e[0]}function _at(e){return arguments.length?(this._x=e,this):this._x}function Eat(e){return e[1]}function Sat(e){return arguments.length?(this._y=e,this):this._y}function BN(e,t,n){var r=new zN(t??wat,n??Eat,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function zN(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Pxe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var il=BN.prototype=zN.prototype;il.copy=function(){var e=new zN(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Pxe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Pxe(r));return e};il.add=uat;il.addAll=cat;il.cover=fat;il.data=dat;il.extent=hat;il.find=pat;il.remove=gat;il.removeAll=mat;il.root=yat;il.size=bat;il.visit=vat;il.visitAfter=xat;il.x=_at;il.y=Sat;function Za(e){return function(){return e}}function Sp(e){return(e()-.5)*1e-6}function Aat(e){return e.x+e.vx}function Cat(e){return e.y+e.vy}function kat(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Za(e==null?1:+e));function s(){for(var u,f=t.length,c,d,h,p,m,b,y=0;y<o;++y)for(c=BN(t,Aat,Cat).visitAfter(a),u=0;u<f;++u)d=t[u],m=n[d.index],b=m*m,h=d.x+d.vx,p=d.y+d.vy,c.visit(v);function v(w,E,A,T,D){var k=w.data,R=w.r,M=m+R;if(k){if(k.index>d.index){var B=h-k.x-k.vx,K=p-k.y-k.vy,L=B*B+K*K;L<M*M&&(B===0&&(B=Sp(r),L+=B*B),K===0&&(K=Sp(r),L+=K*K),L=(M-(L=Math.sqrt(L)))/L*i,d.vx+=(B*=L)*(M=(R*=R)/(b+R)),d.vy+=(K*=L)*M,k.vx-=B*(M=1-M),k.vy-=K*M)}return}return E>h+M||T<h-M||A>p+M||D<p-M}}function a(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,c;for(n=new Array(f),u=0;u<f;++u)c=t[u],n[c.index]=+e(c,u,t)}}return s.initialize=function(u,f){t=u,r=f,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Za(+u),l(),s):e},s}function Tat(e){return e.index}function Nxe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Dat(e){var t=Tat,n=c,r,i=Za(30),o,s,a,l,u,f=1;e==null&&(e=[]);function c(b){return 1/Math.min(a[b.source.index],a[b.target.index])}function d(b){for(var y=0,v=e.length;y<f;++y)for(var w=0,E,A,T,D,k,R,M;w<v;++w)E=e[w],A=E.source,T=E.target,D=T.x+T.vx-A.x-A.vx||Sp(u),k=T.y+T.vy-A.y-A.vy||Sp(u),R=Math.sqrt(D*D+k*k),R=(R-o[w])/R*b*r[w],D*=R,k*=R,T.vx-=D*(M=l[w]),T.vy-=k*M,A.vx+=D*(M=1-M),A.vy+=k*M}function h(){if(s){var b,y=s.length,v=e.length,w=new Map(s.map((A,T)=>[t(A,T,s),A])),E;for(b=0,a=new Array(y);b<v;++b)E=e[b],E.index=b,typeof E.source!="object"&&(E.source=Nxe(w,E.source)),typeof E.target!="object"&&(E.target=Nxe(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(b=0,l=new Array(v);b<v;++b)E=e[b],l[b]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(v),p(),o=new Array(v),m()}}function p(){if(s)for(var b=0,y=e.length;b<y;++b)r[b]=+n(e[b],b,e)}function m(){if(s)for(var b=0,y=e.length;b<y;++b)o[b]=+i(e[b],b,e)}return d.initialize=function(b,y){s=b,u=y,h()},d.links=function(b){return arguments.length?(e=b,h(),d):e},d.id=function(b){return arguments.length?(t=b,d):t},d.iterations=function(b){return arguments.length?(f=+b,d):f},d.strength=function(b){return arguments.length?(n=typeof b=="function"?b:Za(+b),p(),d):n},d.distance=function(b){return arguments.length?(i=typeof b=="function"?b:Za(+b),m(),d):i},d}var Lat={value:()=>{}};function ZFe(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new DC(n)}function DC(e){this._=e}function Rat(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}DC.prototype=ZFe.prototype={constructor:DC,on:function(e,t){var n=this._,r=Rat(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Fat(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Bxe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Bxe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new DC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Fat(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Bxe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Lat,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var f1=0,Zw=0,pw=0,KFe=1e3,mk,Kw,yk=0,o0=0,cL=0,f_=typeof performance=="object"&&performance.now?performance:Date,JFe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jN(){return o0||(JFe(Mat),o0=f_.now()+cL)}function Mat(){o0=0}function bk(){this._call=this._time=this._next=null}bk.prototype=QFe.prototype={constructor:bk,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jN():+n)+(t==null?0:+t),!this._next&&Kw!==this&&(Kw?Kw._next=this:mk=this,Kw=this),this._call=e,this._time=n,QO()},stop:function(){this._call&&(this._call=null,this._time=1/0,QO())}};function QFe(e,t,n){var r=new bk;return r.restart(e,t,n),r}function Oat(){jN(),++f1;for(var e=mk,t;e;)(t=o0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--f1}function zxe(){o0=(yk=f_.now())+cL,f1=Zw=0;try{Oat()}finally{f1=0,Iat(),o0=0}}function $at(){var e=f_.now(),t=e-yk;t>KFe&&(cL-=t,yk=e)}function Iat(){for(var e,t=mk,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mk=n);Kw=e,QO(r)}function QO(e){if(!f1){Zw&&(Zw=clearTimeout(Zw));var t=e-o0;t>24?(e<1/0&&(Zw=setTimeout(zxe,e-f_.now()-cL)),pw&&(pw=clearInterval(pw))):(pw||(yk=f_.now(),pw=setInterval($at,KFe)),f1=1,JFe(zxe))}}function Pat(e,t,n){var r=new bk,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?jN():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const Nat=1664525,Bat=1013904223,jxe=4294967296;function zat(){let e=1;return()=>(e=(Nat*e+Bat)%jxe)/jxe}function jat(e){return e.x}function Uat(e){return e.y}var qat=10,Hat=Math.PI*(3-Math.sqrt(5));function Gat(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=QFe(c),u=ZFe("tick","end"),f=zat();e==null&&(e=[]);function c(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(m){var b,y=e.length,v;m===void 0&&(m=1);for(var w=0;w<m;++w)for(n+=(o-n)*i,a.forEach(function(E){E(n)}),b=0;b<y;++b)v=e[b],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,b=e.length,y;m<b;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=qat*Math.sqrt(.5+m),w=m*Hat;y.x=v*Math.cos(w),y.y=v*Math.sin(w)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,f),m}return h(),t={tick:d,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(s=1-m,t):1-s},randomSource:function(m){return arguments.length?(f=m,a.forEach(p),t):f},force:function(m,b){return arguments.length>1?(b==null?a.delete(m):a.set(m,p(b)),t):a.get(m)},find:function(m,b,y){var v=0,w=e.length,E,A,T,D,k;for(y==null?y=1/0:y*=y,v=0;v<w;++v)D=e[v],E=m-D.x,A=b-D.y,T=E*E+A*A,T<y&&(k=D,y=T);return k},on:function(m,b){return arguments.length>1?(u.on(m,b),t):u.on(m)}}}function Vat(){var e,t,n,r,i=Za(-30),o,s=1,a=1/0,l=.81;function u(h){var p,m=e.length,b=BN(e,jat,Uat).visitAfter(c);for(r=h,p=0;p<m;++p)t=e[p],b.visit(d)}function f(){if(e){var h,p=e.length,m;for(o=new Array(p),h=0;h<p;++h)m=e[h],o[m.index]=+i(m,h,e)}}function c(h){var p=0,m,b,y=0,v,w,E;if(h.length){for(v=w=E=0;E<4;++E)(m=h[E])&&(b=Math.abs(m.value))&&(p+=m.value,y+=b,v+=b*m.x,w+=b*m.y);h.x=v/y,h.y=w/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=o[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,b){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,w=b-p,E=y*y+v*v;if(w*w/l<E)return E<a&&(y===0&&(y=Sp(n),E+=y*y),v===0&&(v=Sp(n),E+=v*v),E<s&&(E=Math.sqrt(s*E)),t.vx+=y*h.value*r/E,t.vy+=v*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Sp(n),E+=y*y),v===0&&(v=Sp(n),E+=v*v),E<s&&(E=Math.sqrt(s*E)));do h.data!==t&&(w=o[h.data.index]*r/E,t.vx+=y*w,t.vy+=v*w);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,f()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Za(+h),f(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function Wat(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),s(),o):e},o}function Yat(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),s(),o):e},o}const Uxe={center:lat,collide:kat,nbody:Vat,link:Dat,x:Wat,y:Yat},Jw="forces",e6=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Xat=["static","iterations"],e4e=["x","y","vx","vy"];function UN(e){rt.call(this,null,e)}UN.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:e4e}]};Lt(UN,rt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(e6),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&t4e(n,e,0,t)):(this.value=n=Kat(t.source,e),n.on("tick",Zat(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Xat)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,f;l<u;++l)if(f=a[l],!(f.name!==Jw||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(e4e)}});function Zat(e,t){return()=>e.touch(t).run()}function Kat(e,t){const n=Gat(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),t4e(n,t,!0).on("end",()=>o=!0)}function t4e(e,t,n,r){var i=Pt(t.forces),o,s,a,l;for(o=0,s=e6.length;o<s;++o)a=e6[o],a!==Jw&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=Jw+o,a=n||t.modified(Jw,o)?Qat(i[o]):r&&Jat(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(Jw+o,null);return e.numForces=i.length,e}function Jat(e,t){var n,r;for(n in e)if(ir(r=e[n])&&t.modified(ka(r)))return 1;return 0}function Qat(e){var t,n;Yt(Uxe,e.force)||st("Unrecognized force: "+e.force),t=Uxe[e.force]();for(n in e)ir(t[n])&&elt(t[n],e[n],e);return t}function elt(e,t,n){e(ir(t)?r=>t(r,n):t)}const tlt=Object.freeze(Object.defineProperty({__proto__:null,force:UN},Symbol.toStringTag,{value:"Module"}));function nlt(e,t){return e.parent===t.parent?1:2}function rlt(e){return e.reduce(ilt,0)/e.length}function ilt(e,t){return e+t.x}function olt(e){return 1+e.reduce(slt,0)}function slt(e,t){return Math.max(e,t.y)}function alt(e){for(var t;t=e.children;)e=t[0];return e}function llt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function ult(){var e=nlt,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=rlt(h),d.y=olt(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=alt(o),u=llt(o),f=l.x-e(l,u)/2,c=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-f)/(c-f)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function clt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function flt(){return this.eachAfter(clt)}function dlt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function hlt(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function plt(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function glt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function mlt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function ylt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function blt(e){for(var t=this,n=vlt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function vlt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function xlt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function wlt(){return Array.from(this)}function _lt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Elt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Slt(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function qN(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=klt)):t===void 0&&(t=Clt);for(var n=new d1(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new d1(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(n4e)}function Alt(){return qN(this).eachBefore(Tlt)}function Clt(e){return e.children}function klt(e){return Array.isArray(e)?e[1]:null}function Tlt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function n4e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function d1(e){this.data=e,this.depth=this.height=0,this.parent=null}d1.prototype=qN.prototype={constructor:d1,count:flt,each:dlt,eachAfter:plt,eachBefore:hlt,find:glt,sum:mlt,sort:ylt,path:blt,ancestors:xlt,descendants:wlt,leaves:_lt,links:Elt,copy:Alt,[Symbol.iterator]:Slt};function LC(e){return e==null?null:r4e(e)}function r4e(e){if(typeof e!="function")throw new Error;return e}function Lm(){return 0}function eb(e){return function(){return e}}const Dlt=1664525,Llt=1013904223,qxe=4294967296;function Rlt(){let e=1;return()=>(e=(Dlt*e+Llt)%qxe)/qxe}function Flt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Mlt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Olt(e,t){for(var n=0,r=(e=Mlt(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&i4e(s,o)?++n:(s=Ilt(i=$lt(i,o)),n=0);return s}function $lt(e,t){var n,r;if(FF(t,e))return[t];for(n=0;n<e.length;++n)if(_A(t,e[n])&&FF(Qw(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(_A(Qw(e[n],e[r]),t)&&_A(Qw(e[n],t),e[r])&&_A(Qw(e[r],t),e[n])&&FF(o4e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function _A(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function i4e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function FF(e,t){for(var n=0;n<t.length;++n)if(!i4e(e,t[n]))return!1;return!0}function Ilt(e){switch(e.length){case 1:return Plt(e[0]);case 2:return Qw(e[0],e[1]);case 3:return o4e(e[0],e[1],e[2])}}function Plt(e){return{x:e.x,y:e.y,r:e.r}}function Qw(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,f=a-i,c=Math.sqrt(l*l+u*u);return{x:(n+o+l/c*f)/2,y:(r+s+u/c*f)/2,r:(c+i+a)/2}}function o4e(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,f=n.y,c=n.r,d=r-s,h=r-u,p=i-a,m=i-f,b=l-o,y=c-o,v=r*r+i*i-o*o,w=v-s*s-a*a+l*l,E=v-u*u-f*f+c*c,A=h*p-d*m,T=(p*E-m*w)/(A*2)-r,D=(m*b-p*y)/A,k=(h*w-d*E)/(A*2)-i,R=(d*y-h*b)/A,M=D*D+R*R-1,B=2*(o+T*D+k*R),K=T*T+k*k-o*o,L=-(Math.abs(M)>1e-6?(B+Math.sqrt(B*B-4*M*K))/(2*M):K/B);return{x:r+T+D*L,y:i+k+R*L,r:L}}function Hxe(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Gxe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Vxe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function EA(e){this._=e,this.next=null,this.previous=null}function Nlt(e,t){if(!(o=(e=Flt(e)).length))return 0;var n,r,i,o,s,a,l,u,f,c,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Hxe(r,n,i=e[2]),n=new EA(n),r=new EA(r),i=new EA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){Hxe(n._,r._,i=e[l]),i=new EA(i),u=r.next,f=n.previous,c=r._.r,d=n._.r;do if(c<=d){if(Gxe(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}c+=u._.r,u=u.next}else{if(Gxe(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}d+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=Vxe(n);(i=i.next)!==r;)(a=Vxe(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Olt(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function Blt(e){return Math.sqrt(e.value)}function zlt(){var e=null,t=1,n=1,r=Lm;function i(o){const s=Rlt();return o.x=t/2,o.y=n/2,e?o.eachBefore(Wxe(e)).eachAfter(MF(r,.5,s)).eachBefore(Yxe(1)):o.eachBefore(Wxe(Blt)).eachAfter(MF(Lm,1,s)).eachAfter(MF(r,o.r/Math.min(t,n),s)).eachBefore(Yxe(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=LC(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:eb(+o),i):r},i}function Wxe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function MF(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=Nlt(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function Yxe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function s4e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function LE(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function jlt(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(s4e),s}function o(s,a){return function(l){l.children&&LE(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,f=l.y0,c=l.x1-n,d=l.y1-n;c<u&&(u=c=(u+c)/2),d<f&&(f=d=(f+d)/2),l.x0=u,l.y0=f,l.x1=c,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var Ult={depth:-1},Xxe={},OF={};function qlt(e){return e.id}function Hlt(e){return e.parentId}function Zxe(){var e=qlt,t=Hlt,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,f,c,d,h,p,m,b=new Map;if(n!=null){const y=o.map((E,A)=>Glt(n(E,A,i))),v=y.map(Kxe),w=new Set(y).add("");for(const E of v)w.has(E)||(w.add(E),y.push(E),v.push(Kxe(E)),o.push(OF));s=(E,A)=>y[A],a=(E,A)=>v[A]}for(f=0,l=o.length;f<l;++f)u=o[f],h=o[f]=new d1(u),(p=s(u,f,i))!=null&&(p+="")&&(m=h.id=p,b.set(m,b.has(m)?Xxe:h)),(p=a(u,f,i))!=null&&(p+="")&&(h.parent=p);for(f=0;f<l;++f)if(h=o[f],p=h.parent){if(d=b.get(p),!d)throw new Error("missing: "+p);if(d===Xxe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(c)throw new Error("multiple roots");c=h}if(!c)throw new Error("no root");if(n!=null){for(;c.data===OF&&c.children.length===1;)c=c.children[0],--l;for(let y=o.length-1;y>=0&&(h=o[y],h.data===OF);--y)h.data=null}if(c.parent=Ult,c.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(n4e),c.parent=null,l>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=LC(i),r):e},r.parentId=function(i){return arguments.length?(t=LC(i),r):t},r.path=function(i){return arguments.length?(n=LC(i),r):n},r}function Glt(e){e=`${e}`;let t=e.length;return t6(e,t-1)&&!t6(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Kxe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!t6(e,t););return e.slice(0,t)}function t6(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Vlt(e,t){return e.parent===t.parent?1:2}function $F(e){var t=e.children;return t?t[0]:e.t}function IF(e){var t=e.children;return t?t[t.length-1]:e.t}function Wlt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ylt(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Xlt(e,t,n){return e.a.parent===t.parent?e.a:n}function RC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}RC.prototype=Object.create(d1.prototype);function Zlt(e){for(var t=new RC(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new RC(o[s],s)),i.parent=n;return(t.parent=new RC(null,0)).children=[t],t}function Klt(){var e=Vlt,t=1,n=1,r=null;function i(u){var f=Zlt(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(s),r)u.eachBefore(l);else{var c=u,d=u,h=u;u.eachBefore(function(v){v.x<c.x&&(c=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=c===d?1:e(c,d)/2,m=p-c.x,b=t/(d.x+p+m),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*b,v.y=v.depth*y})}return u}function o(u){var f=u.children,c=u.parent.children,d=u.i?c[u.i-1]:null;if(f){Ylt(u);var h=(f[0].z+f[f.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||c[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,f,c){if(f){for(var d=u,h=u,p=f,m=d.parent.children[0],b=d.m,y=h.m,v=p.m,w=m.m,E;p=IF(p),d=$F(d),p&&d;)m=$F(m),h=IF(h),h.a=u,E=p.z+v-d.z-b+e(p._,d._),E>0&&(Wlt(Xlt(p,u,c),u,E),b+=E,y+=E),v+=p.m,b+=d.m,w+=m.m,y+=h.m;p&&!IF(h)&&(h.t=p,h.m+=v-y),d&&!$F(m)&&(m.t=d,m.m+=b-w,c=u)}return c}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function fL(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var a4e=(1+Math.sqrt(5))/2;function l4e(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,f=0,c=0,d=a.length,h,p,m=t.value,b,y,v,w,E,A,T;f<d;){h=i-n,p=o-r;do b=a[c++].value;while(!b&&c<d);for(y=v=b,A=Math.max(p/h,h/p)/(m*e),T=b*b*A,E=Math.max(v/T,T/y);c<d;++c){if(b+=u=a[c].value,u<y&&(y=u),u>v&&(v=u),T=b*b*A,w=Math.max(v/T,T/y),w>E){b-=u;break}E=w}s.push(l={value:b,dice:h<p,children:a.slice(f,c)}),l.dice?LE(l,n,r,i,m?r+=p*b/m:o):fL(l,n,r,m?n+=h*b/m:i,o),m-=b,f=c}return s}const u4e=function e(t){function n(r,i,o,s,a){l4e(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(a4e);function Jlt(){var e=u4e,t=!1,n=1,r=1,i=[0],o=Lm,s=Lm,a=Lm,l=Lm,u=Lm;function f(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(c),i=[0],t&&d.eachBefore(s4e),d}function c(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,b=d.x1-h,y=d.y1-h;b<p&&(p=b=(p+b)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=b,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=u(d)-h,m+=s(d)-h,b-=a(d)-h,y-=l(d)-h,b<p&&(p=b=(p+b)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,b,y))}return f.round=function(d){return arguments.length?(t=!!d,f):t},f.size=function(d){return arguments.length?(n=+d[0],r=+d[1],f):[n,r]},f.tile=function(d){return arguments.length?(e=r4e(d),f):e},f.padding=function(d){return arguments.length?f.paddingInner(d).paddingOuter(d):f.paddingInner()},f.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:eb(+d),f):o},f.paddingOuter=function(d){return arguments.length?f.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):f.paddingTop()},f.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:eb(+d),f):s},f.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:eb(+d),f):a},f.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:eb(+d),f):l},f.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:eb(+d),f):u},f}function Qlt(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;f(0,a,e.value,t,n,r,i);function f(c,d,h,p,m,b,y){if(c>=d-1){var v=o[c];v.x0=p,v.y0=m,v.x1=b,v.y1=y;return}for(var w=u[c],E=h/2+w,A=c+1,T=d-1;A<T;){var D=A+T>>>1;u[D]<E?A=D+1:T=D}E-u[A-1]<u[A]-E&&c+1<A&&--A;var k=u[A]-w,R=h-k;if(b-p>y-m){var M=h?(p*R+b*k)/h:b;f(c,A,k,p,m,M,y),f(A,d,R,M,m,b,y)}else{var B=h?(m*R+y*k)/h:y;f(c,A,k,p,m,b,B),f(A,d,R,p,B,b,y)}}}function eut(e,t,n,r,i){(e.depth&1?fL:LE)(e,t,n,r,i)}const tut=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,f,c,d=-1,h,p=l.length,m=r.value;++d<p;){for(u=l[d],f=u.children,c=u.value=0,h=f.length;c<h;++c)u.value+=f[c].value;u.dice?LE(u,i,o,s,m?o+=(a-o)*u.value/m:a):fL(u,i,o,m?i+=(s-i)*u.value/m:s,a),m-=u.value}else r._squarify=l=l4e(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(a4e);function n6(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function HN(e){rt.call(this,null,e)}HN.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const nut=e=>e.values;Lt(HN,rt,{transform(e,t){t.source||st("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&RD(s.data)&&i.rem.push(s.data)}),this.value=o=qN({values:Pt(e.keys).reduce((s,a)=>(s.key(a),s),rut()).entries(i.source)},nut),n&&o.each(s=>{s.children&&(s=yi(s.data),i.add.push(s),i.source.push(s))}),n6(o,wn,wn)),i.source.root=o,i}});function rut(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let f=-1,c,d,h;for(;++f<s;)c=a(d=i[f])+"",(h=l[c])?h.push(d):l[c]=[d];for(c in l)u[c]=n(l[c],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function gh(e){rt.call(this,null,e)}const iut=(e,t)=>e.parent===t.parent?1:2;Lt(gh,rt,{transform(e,t){(!t.source||!t.source.root)&&st(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(L0(e.sort,s=>s.data)),out(n,this.params,e),n.separation&&n.separation(e.separation!==!1?iut:K1);try{this.value=n(i)}catch(s){st(s)}return i.each(s=>sut(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function out(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function sut(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const r6=["x","y","r","depth","children"];function GN(e){gh.call(this,e)}GN.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:r6.length,default:r6}]};Lt(GN,gh,{layout:zlt,params:["radius","size","padding"],fields:r6});const i6=["x0","y0","x1","y1","depth","children"];function VN(e){gh.call(this,e)}VN.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:i6.length,default:i6}]};Lt(VN,gh,{layout:jlt,params:["size","round","padding"],fields:i6});function WN(e){rt.call(this,null,e)}WN.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Lt(WN,rt,{transform(e,t){t.source||st("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?n6(Zxe().id(e.key).parentId(e.parentKey)(i.source),e.key,$u):n6(Zxe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Jxe={tidy:Klt,cluster:ult},o6=["x","y","depth","children"];function YN(e){gh.call(this,e)}YN.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:o6.length,default:o6}]};Lt(YN,gh,{layout(e){const t=e||"tidy";if(Yt(Jxe,t))return Jxe[t]();st("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:o6});function XN(e){rt.call(this,[],e)}XN.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Lt(XN,rt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||st("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[wn(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[wn(a)]&&o[wn(l)]&&i.add.push(yi({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[wn(s)]=1),n.forEach(s=>{(o[wn(s.source)]||o[wn(s.target)])&&i.mod.push(s)})),i}});const Qxe={binary:Qlt,dice:LE,slice:fL,slicedice:eut,squarify:u4e,resquarify:tut},s6=["x0","y0","x1","y1","depth","children"];function ZN(e){gh.call(this,e)}ZN.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:s6.length,default:s6}]};Lt(ZN,gh,{layout(){const e=Jlt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Yt(Qxe,t)?e.tile(Qxe[t]):st("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:s6});const aut=Object.freeze(Object.defineProperty({__proto__:null,nest:HN,pack:GN,partition:VN,stratify:WN,tree:YN,treelinks:XN,treemap:ZN},Symbol.toStringTag,{value:"Module"})),PF=4278190080;function lut(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function uut(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=Op(o,s).getContext("2d"),u=Op(o,s).getContext("2d"),f=a&&Op(o,s).getContext("2d");n.forEach(k=>FC(l,k,!1)),FC(u,t,!1),a&&FC(f,t,!0);const c=NF(l,o,s),d=NF(u,o,s),h=a&&NF(f,o,s),p=e.bitmap(),m=a&&e.bitmap();let b,y,v,w,E,A,T,D;for(y=0;y<s;++y)for(b=0;b<o;++b)E=y*o+b,A=c[E]&PF,D=d[E]&PF,T=a&&h[E]&PF,(A||T||D)&&(v=e(b),w=e(y),!i&&(A||D)&&p.set(v,w),a&&(A||T)&&m.set(v,w));return[p,m]}function NF(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function FC(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>FC(e,o.items,n))}):cu[r].draw(e,{items:n?t.map(cut):t})}function cut(e){const t=FD(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Sd=5,Pa=31,d_=32,sp=new Uint32Array(d_+1),hc=new Uint32Array(d_+1);hc[0]=0;sp[0]=~hc[0];for(let e=1;e<=d_;++e)hc[e]=hc[e-1]<<1|1,sp[e]=~hc[e];function fut(e,t){const n=new Uint32Array(~~((e*t+d_)/d_));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Sd]&1<<(a&Pa)},set:(o,s)=>{const a=s*e+o;r(a>>>Sd,1<<(a&Pa))},clear:(o,s)=>{const a=s*e+o;i(a>>>Sd,~(1<<(a&Pa)))},getRange:(o,s,a,l)=>{let u=l,f,c,d,h;for(;u>=s;--u)if(f=u*e+o,c=u*e+a,d=f>>>Sd,h=c>>>Sd,d===h){if(n[d]&sp[f&Pa]&hc[(c&Pa)+1])return!0}else{if(n[d]&sp[f&Pa]||n[h]&hc[(c&Pa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,f,c,d,h;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,c=u>>>Sd,d=f>>>Sd,c===d)r(c,sp[u&Pa]&hc[(f&Pa)+1]);else for(r(c,sp[u&Pa]),r(d,hc[(f&Pa)+1]),h=c+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,f,c,d,h;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,c=u>>>Sd,d=f>>>Sd,c===d)i(c,hc[u&Pa]|sp[(f&Pa)+1]);else for(i(c,hc[u&Pa]),i(d,sp[(f&Pa)+1]),h=c+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function dut(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>fut(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function hut(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,f=nu.width(s.datum,s.datum.text);let c=0,d,h,p,m,b,y,v;for(let w=0;w<l;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,m=a[w].y2===void 0?p:a[w].y2,b=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=c&&(c=v,s.x=b,s.y=y);return b=f/2,y=u/2,d=s.x-b,h=s.x+b,p=s.y-y,m=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&m<=o?s.baseline="top":0<=p&&o<m&&(s.baseline="bottom"),!0}}function vk(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Ap(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),f=e(t+l),c=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,c,f,d)||s.getRange(u,c,f,d)||a&&a.getRange(u,c,f,d)}function put(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,f,c,d,h){const p=e.invert(u),m=e.invert(f);let b=c,y=o,v;if(!vk(p,m,d,h,i,o)&&!Ap(e,p,m,h,d,b,s,a)&&!Ap(e,p,m,h,d,h,s,null)){for(;y-b>=1;)v=(b+y)/2,Ap(e,p,m,h,d,v,s,a)?y=v:b=v;if(b>c)return[p,m,b,!0]}}return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,h=nu.width(u.datum,u.datum.text);let p=n?d:0,m=!1,b=!1,y=0,v,w,E,A,T,D,k,R,M,B,K,L,$,I,U,q,Y;for(let X=0;X<c;++X){for(v=f[X].x,E=f[X].y,w=f[X].x2===void 0?v:f[X].x2,A=f[X].y2===void 0?E:f[X].y2,v>w&&(Y=v,v=w,w=Y),E>A&&(Y=E,E=A,A=Y),M=e(v),K=e(w),B=~~((M+K)/2),L=e(E),I=e(A),$=~~((L+I)/2),k=B;k>=M;--k)for(R=$;R>=L;--R)q=l(k,R,p,h,d),q&&([u.x,u.y,p,m]=q);for(k=B;k<=K;++k)for(R=$;R<=I;++R)q=l(k,R,p,h,d),q&&([u.x,u.y,p,m]=q);!m&&!n&&(U=Math.abs(w-v+A-E),T=(v+w)/2,D=(E+A)/2,U>=y&&!vk(T,D,h,d,i,o)&&!Ap(e,T,D,d,h,d,s,null)&&(y=U,u.x=T,u.y=D,b=!0))}return m||b?(T=h/2,D=d/2,s.setRange(e(u.x-T),e(u.y-D),e(u.x+T),e(u.y+D)),u.align="center",u.baseline="middle",!0):!1}}const gut=[-1,-1,1,1],mut=[-1,1,-1,1];function yut(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,h=nu.width(u.datum,u.datum.text),p=[];let m=n?d:0,b=!1,y=!1,v=0,w,E,A,T,D,k,R,M,B,K,L,$;for(let I=0;I<c;++I){for(w=f[I].x,A=f[I].y,E=f[I].x2===void 0?w:f[I].x2,T=f[I].y2===void 0?A:f[I].y2,p.push([e((w+E)/2),e((A+T)/2)]);p.length;)if([R,M]=p.pop(),!(s.get(R,M)||a.get(R,M)||l.get(R,M))){l.set(R,M);for(let U=0;U<4;++U)D=R+gut[U],k=M+mut[U],l.outOfBounds(D,k,D,k)||p.push([D,k]);if(D=e.invert(R),k=e.invert(M),B=m,K=o,!vk(D,k,h,d,i,o)&&!Ap(e,D,k,d,h,B,s,a)&&!Ap(e,D,k,d,h,d,s,null)){for(;K-B>=1;)L=(B+K)/2,Ap(e,D,k,d,h,L,s,a)?K=L:B=L;B>m&&(u.x=D,u.y=k,m=B,b=!0)}}!b&&!n&&($=Math.abs(E-w+T-A),D=(w+E)/2,k=(A+T)/2,$>=v&&!vk(D,k,h,d,i,o)&&!Ap(e,D,k,d,h,d,s,null)&&(v=$,u.x=D,u.y=k,y=!0))}return b||y?(D=h/2,k=d/2,s.setRange(e(u.x-D),e(u.y-k),e(u.x+D),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const but=["right","center","left"],vut=["bottom","middle","top"];function xut(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const f=u.boundary,c=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>o)return!1;let d=u.textWidth??0,h,p,m,b,y,v,w,E,A,T,D,k,R,M,B;for(let K=0;K<l;++K){if(h=(n[K]&3)-1,p=(n[K]>>>2&3)-1,m=h===0&&p===0||r[K]<0,b=h&&p?Math.SQRT1_2:1,y=r[K]<0?-1:1,v=f[1+h]+r[K]*h*b,D=f[4+p]+y*c*p/2+r[K]*p*b,E=D-c/2,A=D+c/2,k=e(v),M=e(E),B=e(A),!d)if(ewe(k,k,M,B,s,a,v,v,E,A,f,m))d=nu.width(u.datum,u.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,w=T+d/2,k=e(v),R=e(w),ewe(k,R,M,B,s,a,v,w,E,A,f,m))return u.x=h?h*y<0?w:v:T,u.y=p?p*y<0?A:E:D,u.align=but[h*y+1],u.baseline=vut[p*y+1],s.setRange(k,M,R,B),!0}return!1}}function ewe(e,t,n,r,i,o,s,a,l,u,f,c){return!(i.outOfBounds(e,n,t,r)||(c&&o||i).getRange(e,n,t,r))}const BF=0,zF=4,jF=8,UF=0,qF=1,HF=2,wut={"top-left":BF+UF,top:BF+qF,"top-right":BF+HF,left:zF+UF,middle:zF+qF,right:zF+HF,"bottom-left":jF+UF,bottom:jF+qF,"bottom-right":jF+HF},_ut={naive:hut,"reduced-search":put,floodfill:yut};function Eut(e,t,n,r,i,o,s,a,l,u,f){if(!e.length)return e;const c=Math.max(r.length,i.length),d=Sut(r,c),h=Aut(i,c),p=Cut(e[0].datum),m=p==="group"&&e[0].datum.items[l].marktype,b=m==="area",y=kut(p,m,a,l),v=u===null||u===1/0,w=b&&f==="naive";let E=-1,A=-1;const T=e.map(M=>{const B=v?nu.width(M,M.text):void 0;return E=Math.max(E,B),A=Math.max(A,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(M),textWidth:B}});u=u===null||u===1/0?Math.max(E,A)+Math.max(...r):u;const D=dut(t[0],t[1],u);let k;if(!w){n&&T.sort((K,L)=>n(K.datum,L.datum));let M=!1;for(let K=0;K<h.length&&!M;++K)M=h[K]===5||d[K]<0;const B=(p&&s||b)&&e.map(K=>K.datum);k=o.length||B?uut(D,B||[],o,M,b):lut(D,s&&T)}const R=b?_ut[f](D,k,s,l):xut(D,k,h,d);return T.forEach(M=>M.opacity=+R(M)),T}function Sut(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Aut(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=wut[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Cut(e){return e&&e.mark&&e.mark.marktype}function kut(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const a6=["x","y","opacity","align","baseline"],c4e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function KN(e){rt.call(this,null,e)}KN.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:c4e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:a6.length,default:a6}]};Lt(KN,rt,{transform(e,t){function n(o){const s=e[o];return ir(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&st("Size parameter should be specified as a [width, height] array.");const i=e.as||a6;return Eut(t.materialize(t.SOURCE).source||[],e.size,e.sort,Pt(e.offset==null?1:e.offset),Pt(e.anchor||c4e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Tut=Object.freeze(Object.defineProperty({__proto__:null,label:KN},Symbol.toStringTag,{value:"Module"}));function f4e(e,t){var n=[],r=function(f){return f(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function JN(e){rt.call(this,null,e)}JN.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Lt(JN,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=f4e(r,e.groupby),o=(e.groupby||[]).map(Fo),s=o.length,a=e.as||[Fo(e.x),Fo(e.y)],l=[];i.forEach(u=>{oDe(u,e.x,e.y,e.bandwidth||.3).forEach(f=>{const c={};for(let d=0;d<s;++d)c[o[d]]=u.dims[d];c[a[0]]=f[0],c[a[1]]=f[1],l.push(yi(c))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const l6={constant:WI,linear:YI,log:tDe,exp:nDe,pow:rDe,quad:XI,poly:iDe},Dut=(e,t)=>e==="poly"?t:e==="quad"?2:1;function QN(e){rt.call(this,null,e)}QN.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(l6)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Lt(QN,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=f4e(r,e.groupby),o=(e.groupby||[]).map(Fo),s=e.method||"linear",a=e.order==null?3:e.order,l=Dut(s,a),u=e.as||[Fo(e.x),Fo(e.y)],f=l6[s],c=[];let d=e.extent;Yt(l6,s)||st("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=f(h,e.x,e.y,a);if(e.params){c.push(yi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const b=d||$f(h,e.x),y=v=>{const w={};for(let E=0;E<o.length;++E)w[o[E]]=h.dims[E];w[u[0]]=v[0],w[u[1]]=v[1],c.push(yi(w))};s==="linear"||s==="constant"?b.forEach(v=>y([v,m.predict(v)])):BD(m.predict,b,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const Lut=Object.freeze(Object.defineProperty({__proto__:null,loess:JN,regression:QN},Symbol.toStringTag,{value:"Module"})),Wd=11102230246251565e-32,ma=134217729,Rut=(3+8*Wd)*Wd;function GF(e,t,n,r,i){let o,s,a,l,u=t[0],f=r[0],c=0,d=0;f>u==f>-u?(o=u,u=t[++c]):(o=f,f=r[++d]);let h=0;if(c<e&&d<n)for(f>u==f>-u?(s=u+o,a=o-(s-u),u=t[++c]):(s=f+o,a=o-(s-f),f=r[++d]),o=s,a!==0&&(i[h++]=a);c<e&&d<n;)f>u==f>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++c]):(s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++d]),o=s,a!==0&&(i[h++]=a);for(;c<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++c],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function Fut(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function RE(e){return new Float64Array(e)}const Mut=(3+16*Wd)*Wd,Out=(2+12*Wd)*Wd,$ut=(9+64*Wd)*Wd*Wd,zy=RE(4),twe=RE(8),nwe=RE(12),rwe=RE(16),Na=RE(4);function Iut(e,t,n,r,i,o,s){let a,l,u,f,c,d,h,p,m,b,y,v,w,E,A,T,D,k;const R=e-i,M=n-i,B=t-o,K=r-o;E=R*K,d=ma*R,h=d-(d-R),p=R-h,d=ma*K,m=d-(d-K),b=K-m,A=p*b-(E-h*m-p*m-h*b),T=B*M,d=ma*B,h=d-(d-B),p=B-h,d=ma*M,m=d-(d-M),b=M-m,D=p*b-(T-h*m-p*m-h*b),y=A-D,c=A-y,zy[0]=A-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,zy[1]=w-(y+c)+(c-T),k=v+y,c=k-v,zy[2]=v-(k-c)+(y-c),zy[3]=k;let L=Fut(4,zy),$=Out*s;if(L>=$||-L>=$||(c=e-R,a=e-(R+c)+(c-i),c=n-M,u=n-(M+c)+(c-i),c=t-B,l=t-(B+c)+(c-o),c=r-K,f=r-(K+c)+(c-o),a===0&&l===0&&u===0&&f===0)||($=$ut*s+Rut*Math.abs(L),L+=R*f+K*a-(B*u+M*l),L>=$||-L>=$))return L;E=a*K,d=ma*a,h=d-(d-a),p=a-h,d=ma*K,m=d-(d-K),b=K-m,A=p*b-(E-h*m-p*m-h*b),T=l*M,d=ma*l,h=d-(d-l),p=l-h,d=ma*M,m=d-(d-M),b=M-m,D=p*b-(T-h*m-p*m-h*b),y=A-D,c=A-y,Na[0]=A-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,Na[1]=w-(y+c)+(c-T),k=v+y,c=k-v,Na[2]=v-(k-c)+(y-c),Na[3]=k;const I=GF(4,zy,4,Na,twe);E=R*f,d=ma*R,h=d-(d-R),p=R-h,d=ma*f,m=d-(d-f),b=f-m,A=p*b-(E-h*m-p*m-h*b),T=B*u,d=ma*B,h=d-(d-B),p=B-h,d=ma*u,m=d-(d-u),b=u-m,D=p*b-(T-h*m-p*m-h*b),y=A-D,c=A-y,Na[0]=A-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,Na[1]=w-(y+c)+(c-T),k=v+y,c=k-v,Na[2]=v-(k-c)+(y-c),Na[3]=k;const U=GF(I,twe,4,Na,nwe);E=a*f,d=ma*a,h=d-(d-a),p=a-h,d=ma*f,m=d-(d-f),b=f-m,A=p*b-(E-h*m-p*m-h*b),T=l*u,d=ma*l,h=d-(d-l),p=l-h,d=ma*u,m=d-(d-u),b=u-m,D=p*b-(T-h*m-p*m-h*b),y=A-D,c=A-y,Na[0]=A-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,Na[1]=w-(y+c)+(c-T),k=v+y,c=k-v,Na[2]=v-(k-c)+(y-c),Na[3]=k;const q=GF(U,nwe,4,Na,rwe);return rwe[q-1]}function SA(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=Mut*u?l:-Iut(e,t,n,r,i,o,u)}const iwe=Math.pow(2,-52),AA=new Uint32Array(512);class xk{static from(t,n=jut,r=Uut){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new xk(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,f=-1/0;for(let R=0;R<s;R++){const M=t[2*R],B=t[2*R+1];M<a&&(a=M),B<l&&(l=B),M>u&&(u=M),B>f&&(f=B),this._ids[R]=R}const c=(a+u)/2,d=(l+f)/2;let h,p,m;for(let R=0,M=1/0;R<s;R++){const B=VF(c,d,t[2*R],t[2*R+1]);B<M&&(h=R,M=B)}const b=t[2*h],y=t[2*h+1];for(let R=0,M=1/0;R<s;R++){if(R===h)continue;const B=VF(b,y,t[2*R],t[2*R+1]);B<M&&B>0&&(p=R,M=B)}let v=t[2*p],w=t[2*p+1],E=1/0;for(let R=0;R<s;R++){if(R===h||R===p)continue;const M=But(b,y,v,w,t[2*R],t[2*R+1]);M<E&&(m=R,E=M)}let A=t[2*m],T=t[2*m+1];if(E===1/0){for(let B=0;B<s;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];gb(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let M=0;for(let B=0,K=-1/0;B<s;B++){const L=this._ids[B],$=this._dists[L];$>K&&(R[M++]=L,K=$)}this.hull=R.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(SA(b,y,v,w,A,T)<0){const R=p,M=v,B=w;p=m,v=A,w=T,m=R,A=M,T=B}const D=zut(b,y,v,w,A,T);this._cx=D.x,this._cy=D.y;for(let R=0;R<s;R++)this._dists[R]=VF(t[2*R],t[2*R+1],D.x,D.y);gb(this._ids,this._dists,0,s-1),this._hullStart=h;let k=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,o.fill(-1),o[this._hashKey(b,y)]=h,o[this._hashKey(v,w)]=p,o[this._hashKey(A,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let R=0,M,B;R<this._ids.length;R++){const K=this._ids[R],L=t[2*K],$=t[2*K+1];if(R>0&&Math.abs(L-M)<=iwe&&Math.abs($-B)<=iwe||(M=L,B=$,K===h||K===p||K===m))continue;let I=0;for(let te=0,le=this._hashKey(L,$);te<this._hashSize&&(I=o[(le+te)%this._hashSize],!(I!==-1&&I!==r[I]));te++);I=n[I];let U=I,q;for(;q=r[U],SA(L,$,t[2*U],t[2*U+1],t[2*q],t[2*q+1])>=0;)if(U=q,U===I){U=-1;break}if(U===-1)continue;let Y=this._addTriangle(U,K,r[U],-1,-1,i[U]);i[K]=this._legalize(Y+2),i[U]=Y,k++;let X=r[U];for(;q=r[X],SA(L,$,t[2*X],t[2*X+1],t[2*q],t[2*q+1])<0;)Y=this._addTriangle(X,K,q,i[K],-1,i[X]),i[K]=this._legalize(Y+2),r[X]=X,k--,X=q;if(U===I)for(;q=n[U],SA(L,$,t[2*q],t[2*q+1],t[2*U],t[2*U+1])<0;)Y=this._addTriangle(q,K,U,-1,i[U],i[q]),this._legalize(Y+2),i[q]=Y,r[U]=U,k--,U=q;this._hullStart=n[K]=U,r[U]=n[X]=K,r[K]=X,o[this._hashKey(L,$)]=K,o[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(k);for(let R=0,M=this._hullStart;R<k;R++)this.hull[R]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Put(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=AA[--o];continue}const u=a-a%3,f=l+(t+1)%3,c=u+(a+2)%3,d=n[s],h=n[t],p=n[f],m=n[c];if(Nut(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[c];if(y===-1){let w=this._hullStart;do{if(this._hullTri[w]===c){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,c);const v=u+(a+1)%3;o<AA.length&&(AA[o++]=v)}else{if(o===0)break;t=AA[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function Put(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function VF(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function Nut(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,f=n-s,c=r-a,d=i-s,h=o-a,p=l*l+u*u,m=f*f+c*c,b=d*d+h*h;return l*(c*b-m*h)-u*(f*b-m*d)+p*(f*h-c*d)<0}function But(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,c=l*l+u*u,d=.5/(s*u-a*l),h=(u*f-a*c)*d,p=(s*c-l*f)*d;return h*h+p*p}function zut(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,c=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*f-a*c)*d,p=t+(s*c-l*f)*d;return{x:h,y:p}}function gb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;gw(e,i,o),t[e[n]]>t[e[r]]&&gw(e,n,r),t[e[o]]>t[e[r]]&&gw(e,o,r),t[e[n]]>t[e[o]]&&gw(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;gw(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(gb(e,t,o,r),gb(e,t,n,s-1)):(gb(e,t,n,s-1),gb(e,t,o,r))}}function gw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function jut(e){return e[0]}function Uut(e){return e[1]}const owe=1e-6;class $m{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>owe||Math.abs(this._y1-o)>owe)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class u6{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let qut=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,b=0,y=r.length,v,w;m<y;m+=3,b+=2){const E=r[m]*2,A=r[m+1]*2,T=r[m+2]*2,D=t[E],k=t[E+1],R=t[A],M=t[A+1],B=t[T],K=t[T+1],L=R-D,$=M-k,I=B-D,U=K-k,q=(L*U-$*I)*2;if(Math.abs(q)<1e-9){if(o===void 0){o=s=0;for(const X of n)o+=t[X*2],s+=t[X*2+1];o/=n.length,s/=n.length}const Y=1e9*Math.sign((o-D)*U-(s-k)*I);v=(D+B)/2-Y*U,w=(k+K)/2+Y*I}else{const Y=1/q,X=L*L+$*$,te=I*I+U*U;v=D+(U*X-$*te)*Y,w=k+(L*te-I*X)*Y}a[b]=v,a[b+1]=w}let l=n[n.length-1],u,f=l*4,c,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let m=0;m<n.length;++m)l=n[m],u=f,c=d,h=p,f=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[f]=h-p,i[u+3]=i[f+1]=d-c}render(t){const n=t==null?t=new $m:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let f=0,c=r.length;f<c;++f){const d=r[f];if(d<f)continue;const h=Math.floor(f/3)*2,p=Math.floor(d/3)*2,m=s[h],b=s[h+1],y=s[p],v=s[p+1];this._renderSegment(m,b,y,v,t)}let l,u=o[o.length-1];for(let f=0;f<o.length;++f){l=u,u=o[f];const c=Math.floor(i[u]/3)*2,d=s[c],h=s[c+1],p=l*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new $m:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new $m:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new u6;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,f=this._regioncode(a,l),c,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=f,f=this._regioncode(a,l),u===0&&f===0)c=d,d=0,i?i.push(a,l):i=[a,l];else{let p,m,b,y,v;if(u===0){if((p=this._clipSegment(o,s,a,l,u,f))===null)continue;[m,b,y,v]=p}else{if((p=this._clipSegment(a,l,o,s,f,u))===null)continue;[y,v,m,b]=p,c=d,d=this._edgecode(m,b),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(m,b):i=[m,b]}c=d,d=this._edgecode(y,v),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)c=d,d=this._edgecode(i[0],i[1]),c&&d&&this._edge(t,c,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,f=o||s;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,f=a.length,c,d=this._edgecode(a[f-2],a[f-1]);u<f;u+=2)c=d,d=this._edgecode(a[u],a[u+1]),c&&d&&(u=this._edge(t,c,d,a,u),f=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Hut=2*Math.PI,jy=Math.pow;function Gut(e){return e[0]}function Vut(e){return e[1]}function Wut(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function Yut(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class e9{static from(t,n=Gut,r=Vut,i){return new e9("length"in t?Xut(t,n,r,i):Float64Array.from(Zut(t,n,r,i)))}constructor(t){this._delaunator=new xk(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Wut(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],c=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Yut(n[2*d],n[2*d+1],c);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new xk(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const f=o[l%3===2?l-2:l+1];(r[l]===-1||s[f]===-1)&&(s[f]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new qut(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const c=a.indexOf(t);c>0&&(yield a[c-1]),c<a.length-1&&(yield a[c+1]);return}const l=n[t];if(l===-1)return;let u=l,f=-1;do{if(yield f=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const c=r[(i[t]+1)%r.length];c!==f&&(yield c);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let f=t,c=jy(n-u[t*2],2)+jy(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const m=jy(n-u[p*2],2)+jy(r-u[p*2+1],2);if(m<c&&(c=m,f=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&jy(n-u[h*2],2)+jy(r-u[h*2+1],2)<c)return h;break}}while(h!==d);return f}render(t){const n=t==null?t=new $m:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,f=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new $m:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,Hut)}return r&&r.value()}renderHull(t){const n=t==null?t=new $m:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new u6;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new $m:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new u6;return this.renderTriangle(t,n),n.value()}}function Xut(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*Zut(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function t9(e){rt.call(this,null,e)}t9.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Kut=[-1e5,-1e5,1e5,1e5];Lt(t9,rt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Kut;const o=this.value=e9.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!Qut(l)?Jut(l):null}return t.reflow(e.modified()).modifies(n)}});function Jut(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Qut(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const ect=Object.freeze(Object.defineProperty({__proto__:null,voronoi:t9},Symbol.toStringTag,{value:"Module"}));var WF=Math.PI/180,e2=64,MC=2048;function tct(){var e=[256,256],t,n,r,i,o,s,a,l=d4e,u=[],f=Math.random,c={};c.layout=function(){for(var p=d(Op()),m=act((e[0]>>5)*e[1]),b=null,y=u.length,v=-1,w=[],E=u.map(T=>({text:t(T),font:n(T),style:i(T),weight:o(T),rotate:s(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,D)=>D.size-T.size);++v<y;){var A=E[v];A.x=e[0]*(f()+.5)>>1,A.y=e[1]*(f()+.5)>>1,nct(p,A,E,v),A.hasText&&h(m,A,b)&&(w.push(A),b?ict(b,A):b=[{x:A.x+A.x0,y:A.y+A.y0},{x:A.x+A.x1,y:A.y+A.y1}],A.x-=e[0]>>1,A.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(e2<<5)/m,p.height=MC/m;var b=p.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:m}}function h(p,m,b){for(var y=m.x,v=m.y,w=Math.hypot(e[0],e[1]),E=l(e),A=f()<.5?1:-1,T=-A,D,k,R;(D=E(T+=A))&&(k=~~D[0],R=~~D[1],!(Math.min(Math.abs(k),Math.abs(R))>=w));)if(m.x=y+k,m.y=v+R,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!b||!rct(m,p,e[0]))&&(!b||oct(m,b))){for(var M=m.sprite,B=m.width>>5,K=e[0]>>5,L=m.x-(B<<4),$=L&127,I=32-$,U=m.y1-m.y0,q=(m.y+m.y0)*K+(L>>5),Y,X=0;X<U;X++){Y=0;for(var te=0;te<=B;te++)p[q+te]|=Y<<I|(te<B?(Y=M[X*B+te])>>>$:0);q+=K}return m.sprite=null,!0}return!1}return c.words=function(p){return arguments.length?(u=p,c):u},c.size=function(p){return arguments.length?(e=[+p[0],+p[1]],c):e},c.font=function(p){return arguments.length?(n=rm(p),c):n},c.fontStyle=function(p){return arguments.length?(i=rm(p),c):i},c.fontWeight=function(p){return arguments.length?(o=rm(p),c):o},c.rotate=function(p){return arguments.length?(s=rm(p),c):s},c.text=function(p){return arguments.length?(t=rm(p),c):t},c.spiral=function(p){return arguments.length?(l=lct[p]||p,c):l},c.fontSize=function(p){return arguments.length?(r=rm(p),c):r},c.padding=function(p){return arguments.length?(a=rm(p),c):a},c.random=function(p){return arguments.length?(f=p,c):f},c}function nct(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(e2<<5)/o,MC/o);var s=0,a=0,l=0,u=n.length,f,c,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,f=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*WF),b=Math.cos(t.rotate*WF),y=f*b,v=f*m,w=d*b,E=d*m;f=Math.max(Math.abs(y+E),Math.abs(y-E))+31>>5<<5,d=~~Math.max(Math.abs(v+w),Math.abs(v-w))}else f=f+31>>5<<5;if(d>l&&(l=d),s+f>=e2<<5&&(s=0,a+=l,l=0),a+d>=MC)break;i.translate((s+(f>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*WF),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=d,t.xoff=s,t.yoff=a,t.x1=f>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=f}for(var A=i.getImageData(0,0,(e2<<5)/o,MC/o).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,c=f>>5,d=t.y1-t.y0,h=0;h<d*c;h++)T[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var D=0,k=-1;for(p=0;p<d;p++){for(h=0;h<f;h++){var R=c*p+(h>>5),M=A[(a+p)*(e2<<5)+(s+h)<<2]?1<<31-h%32:0;T[R]|=M,D|=M}D?k=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+k,t.sprite=T.slice(0,(t.y1-t.y0)*c)}}}function rct(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),f,c=0;c<l;c++){f=0;for(var d=0;d<=i;d++)if((f<<a|(d<i?(f=r[c*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function ict(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function oct(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function d4e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function sct(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function act(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function rm(e){return typeof e=="function"?e:function(){return e}}var lct={archimedean:d4e,rectangular:sct};const h4e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],uct=["text","font","rotate","fontSize","fontStyle","fontWeight"];function n9(e){rt.call(this,tct(),e)}n9.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:h4e}]};Lt(n9,rt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&st("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return ir(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||uct.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||h4e;let a=e.fontSize||14,l;if(ir(a)?l=e.fontSizeRange:a=Fa(a),l){const p=a,m=ui("sqrt")().domain($f(i,p)).range(l);a=b=>m(p(b))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Pu).layout(),f=o.size(),c=f[0]>>1,d=f[1]>>1,h=u.length;for(let p=0,m,b;p<h;++p)m=u[p],b=m.datum,b[s[0]]=m.x+c,b[s[1]]=m.y+d,b[s[2]]=m.font,b[s[3]]=m.size,b[s[4]]=m.style,b[s[5]]=m.weight,b[s[6]]=m.rotate;return t.reflow(r).modifies(s)}});const cct=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:n9},Symbol.toStringTag,{value:"Module"})),fct=e=>new Uint8Array(e),dct=e=>new Uint16Array(e),A2=e=>new Uint32Array(e);function hct(){let e=8,t=[],n=A2(0),r=CA(0,e),i=CA(0,e);return{data:()=>t,seen:()=>n=pct(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let f,c,d;for(c=0;!s[c]&&c<a;++c)l[c]=t[c],u[c]=c;for(d=c;c<a;++c)f=t[c],s[c]?u[c]=-1:(u[c]=d,r[d]=r[c],i[d]=i[c],l[d]=f,f._index=d++),r[c]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=CA(o,e,r),i=CA(o,e))}}}function pct(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function CA(e,t,n){const r=(t<257?fct:t<65537?dct:A2)(e);return n&&r.set(n),r}function swe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],f=a[1],c=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=f;d<c;++d)o[l[d]]|=r;return s}}}function awe(){let e=A2(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const f=n,c=l.length,d=A2(c);let h=Array(c),p,m,b;for(b=0;b<c;++b)h[b]=a(l[b]),d[b]=b;if(h=gct(h,d),f)p=t,m=e,t=Array(f+c),e=A2(f+c),mct(u,p,m,f,h,d,c,t,e);else{if(u>0)for(b=0;b<c;++b)d[b]+=u;t=h,e=d}return n=f+c,{index:d,value:h}}function i(a,l){const u=n;let f,c,d;for(c=0;!l[e[c]]&&c<u;++c);for(d=c;c<u;++c)l[f=e[c]]||(e[d]=f,t[d]=t[c],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[Nze(l,a[0],0,u),j2(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function gct(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),iUe(e,t)}function mct(e,t,n,r,i,o,s,a,l){let u=0,f=0,c;for(c=0;u<r&&f<s;++c)t[u]<i[f]?(a[c]=t[u],l[c]=n[u++]):(a[c]=i[f],l[c]=o[f++]+e);for(;u<r;++u,++c)a[c]=t[u],l[c]=n[u];for(;f<s;++f,++c)a[c]=i[f],l[c]=o[f]+e}function r9(e){rt.call(this,hct(),e),this._indices=null,this._dims=null}r9.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Lt(r9,rt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=awe()),o.push(swe(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),f=a.all(),c=n.rem=n.add,d=n.mod,h=i.length,p={};let m,b,y,v,w,E,A,T,D;if(u.set(l),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},v=t.mod,A=0,T=v.length;A<T;++A)E[v[A]._index]=1;for(A=0;A<h;++A)D=r[A],(!s[A]||e.modified("fields",A)||t.modified(D.fields))&&(y=D.fname,(m=p[y])||(o[y]=b=awe(),p[y]=m=b.insert(D,t.source,0)),s[A]=swe(b,A,i[A]).onAdd(m,l));for(A=0,T=a.data().length;A<T;++A)w[A]||(u[A]!==l[A]?c.push(A):E[A]&&l[A]!==f&&d.push(A));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,f=i.size()+r.length,c=o.length;let d=i.size(),h,p,m;i.resize(f,c),i.add(r);const b=i.curr(),y=i.prev(),v=i.all();for(h=0;h<c;++h)p=a[h].fname,m=l[p]||(l[p]=s[p].insert(a[h],r,d)),o[h].onAdd(m,b);for(;d<f;++d)y[d]=v,b[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,f=t.rem;let c,d,h,p;for(c=0,d=f.length;c<d;++c)h=f[c]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),f=e.bisect(t),c=f[0],d=f[1],h=u[0],p=u[1],m=e.one;let b,y,v;if(c<h)for(b=c,y=Math.min(h,d);b<y;++b)v=l[b],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;else if(c>h)for(b=h,y=Math.min(c,p);b<y;++b)v=l[b],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;if(d>p)for(b=Math.max(c,p),y=d;b<y;++b)v=l[b],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;else if(d<p)for(b=Math.max(h,d),y=p;b<y;++b)v=l[b],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],f=l[1],c=a[0],d=a[1],h=e.one;let p,m,b;if(u<c)for(p=u,m=Math.min(c,f);p<m;++p)b=s[p],o[b]^=h,n.push(b);else if(u>c)for(p=c,m=Math.min(u,d);p<m;++p)b=s[p],o[b]^=h,r.push(b);if(f>d)for(p=Math.max(u,d),m=f;p<m;++p)b=s[p],o[b]^=h,n.push(b);else if(f<d)for(p=Math.max(c,f),m=d;p<m;++p)b=s[p],o[b]^=h,r.push(b);e.range=t.slice()}});function i9(e){rt.call(this,null,e)}i9.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Lt(i9,rt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=f=>a[f]&n?null:s[f];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,f=>{const c=a[f]&n;return!c&&c^l[f]&n?s[f]:null}),o.filter(o.REM,f=>{const c=a[f]&n;return c&&!(c^(c^l[f]&n))?s[f]:null})):(o.filter(o.ADD,u),o.filter(o.REM,f=>(a[f]&n)===i?s[f]:null)),o.filter(o.SOURCE,f=>u(f._index))}});const yct=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:r9,resolvefilter:i9},Symbol.toStringTag,{value:"Module"})),bct="RawCode",s0="Literal",vct="Property",xct="Identifier",wct="ArrayExpression",_ct="BinaryExpression",p4e="CallExpression",Ect="ConditionalExpression",Sct="LogicalExpression",Act="MemberExpression",Cct="ObjectExpression",kct="UnaryExpression";function Pc(e){this.type=e}Pc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Tct(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Tct(e){switch(e.type){case wct:return e.elements;case _ct:case Sct:return[e.left,e.right];case p4e:return[e.callee].concat(e.arguments);case Ect:return[e.test,e.consequent,e.alternate];case Act:return[e.object,e.property];case Cct:return e.properties;case vct:return[e.key,e.value];case kct:return[e.argument];case xct:case s0:case bct:default:return[]}}var Xf,ln,ot,Da,Ti,dL=1,FE=2,a0=3,ug=4,hL=5,M0=6,wl=7,ME=8,Dct=9;Xf={};Xf[dL]="Boolean";Xf[FE]="<end>";Xf[a0]="Identifier";Xf[ug]="Keyword";Xf[hL]="Null";Xf[M0]="Numeric";Xf[wl]="Punctuator";Xf[ME]="String";Xf[Dct]="RegularExpression";var Lct="ArrayExpression",Rct="BinaryExpression",Fct="CallExpression",Mct="ConditionalExpression",g4e="Identifier",Oct="Literal",$ct="LogicalExpression",Ict="MemberExpression",Pct="ObjectExpression",Nct="Property",Bct="UnaryExpression",Ds="Unexpected token %0",zct="Unexpected number",jct="Unexpected string",Uct="Unexpected identifier",qct="Unexpected reserved word",Hct="Unexpected end of input",c6="Invalid regular expression",YF="Invalid regular expression: missing /",m4e="Octal literals are not allowed in strict mode.",Gct="Duplicate data property in object literal not allowed in strict mode",Qs="ILLEGAL",h_="Disabled.",Vct=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Wct=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function pL(e,t){if(!e)throw new Error("ASSERT: "+t)}function Rd(e){return e>=48&&e<=57}function o9(e){return"0123456789abcdefABCDEF".includes(e)}function C2(e){return"01234567".includes(e)}function Yct(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function p_(e){return e===10||e===13||e===8232||e===8233}function OE(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Vct.test(String.fromCharCode(e))}function wk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Wct.test(String.fromCharCode(e))}const Xct={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function y4e(){for(;ot<Da;){const e=ln.charCodeAt(ot);if(Yct(e)||p_(e))++ot;else break}}function f6(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ot<Da&&o9(ln[ot])?(r=ln[ot++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ii({},Ds,Qs);return String.fromCharCode(i)}function Zct(){var e,t,n,r;for(e=ln[ot],t=0,e==="}"&&ii({},Ds,Qs);ot<Da&&(e=ln[ot++],!!o9(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ii({},Ds,Qs),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function b4e(){var e,t;for(e=ln.charCodeAt(ot++),t=String.fromCharCode(e),e===92&&(ln.charCodeAt(ot)!==117&&ii({},Ds,Qs),++ot,e=f6("u"),(!e||e==="\\"||!OE(e.charCodeAt(0)))&&ii({},Ds,Qs),t=e);ot<Da&&(e=ln.charCodeAt(ot),!!wk(e));)++ot,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ln.charCodeAt(ot)!==117&&ii({},Ds,Qs),++ot,e=f6("u"),(!e||e==="\\"||!wk(e.charCodeAt(0)))&&ii({},Ds,Qs),t+=e);return t}function Kct(){var e,t;for(e=ot++;ot<Da;){if(t=ln.charCodeAt(ot),t===92)return ot=e,b4e();if(wk(t))++ot;else break}return ln.slice(e,ot)}function Jct(){var e,t,n;return e=ot,t=ln.charCodeAt(ot)===92?b4e():Kct(),t.length===1?n=a0:Xct.hasOwnProperty(t)?n=ug:t==="null"?n=hL:t==="true"||t==="false"?n=dL:n=a0,{type:n,value:t,start:e,end:ot}}function XF(){var e=ot,t=ln.charCodeAt(ot),n,r=ln[ot],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ot,{type:wl,value:String.fromCharCode(t),start:e,end:ot};default:if(n=ln.charCodeAt(ot+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ot+=2,{type:wl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ot};case 33:case 61:return ot+=2,ln.charCodeAt(ot)===61&&++ot,{type:wl,value:ln.slice(e,ot),start:e,end:ot}}}if(s=ln.substr(ot,4),s===">>>=")return ot+=4,{type:wl,value:s,start:e,end:ot};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return ot+=3,{type:wl,value:o,start:e,end:ot};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ot+=2,{type:wl,value:i,start:e,end:ot};if(i==="//"&&ii({},Ds,Qs),"<>=!+-*%&|^/".includes(r))return++ot,{type:wl,value:r,start:e,end:ot};ii({},Ds,Qs)}function Qct(e){let t="";for(;ot<Da&&o9(ln[ot]);)t+=ln[ot++];return t.length===0&&ii({},Ds,Qs),OE(ln.charCodeAt(ot))&&ii({},Ds,Qs),{type:M0,value:parseInt("0x"+t,16),start:e,end:ot}}function eft(e){let t="0"+ln[ot++];for(;ot<Da&&C2(ln[ot]);)t+=ln[ot++];return(OE(ln.charCodeAt(ot))||Rd(ln.charCodeAt(ot)))&&ii({},Ds,Qs),{type:M0,value:parseInt(t,8),octal:!0,start:e,end:ot}}function lwe(){var e,t,n;if(n=ln[ot],pL(Rd(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ot,e="",n!=="."){if(e=ln[ot++],n=ln[ot],e==="0"){if(n==="x"||n==="X")return++ot,Qct(t);if(C2(n))return eft(t);n&&Rd(n.charCodeAt(0))&&ii({},Ds,Qs)}for(;Rd(ln.charCodeAt(ot));)e+=ln[ot++];n=ln[ot]}if(n==="."){for(e+=ln[ot++];Rd(ln.charCodeAt(ot));)e+=ln[ot++];n=ln[ot]}if(n==="e"||n==="E")if(e+=ln[ot++],n=ln[ot],(n==="+"||n==="-")&&(e+=ln[ot++]),Rd(ln.charCodeAt(ot)))for(;Rd(ln.charCodeAt(ot));)e+=ln[ot++];else ii({},Ds,Qs);return OE(ln.charCodeAt(ot))&&ii({},Ds,Qs),{type:M0,value:parseFloat(e),start:t,end:ot}}function tft(){var e="",t,n,r,i,o=!1;for(t=ln[ot],pL(t==="'"||t==='"',"String literal must starts with a quote"),n=ot,++ot;ot<Da;)if(r=ln[ot++],r===t){t="";break}else if(r==="\\")if(r=ln[ot++],!r||!p_(r.charCodeAt(0)))switch(r){case"u":case"x":ln[ot]==="{"?(++ot,e+=Zct()):e+=f6(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:C2(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),ot<Da&&C2(ln[ot])&&(o=!0,i=i*8+"01234567".indexOf(ln[ot++]),"0123".includes(r)&&ot<Da&&C2(ln[ot])&&(i=i*8+"01234567".indexOf(ln[ot++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ln[ot]===`
`&&++ot;else{if(p_(r.charCodeAt(0)))break;e+=r}return t!==""&&ii({},Ds,Qs),{type:ME,value:e,octal:o,start:n,end:ot}}function nft(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ii({},c6)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ii({},c6)}try{return new RegExp(e,t)}catch{return null}}function rft(){var e,t,n,r,i;for(e=ln[ot],pL(e==="/","Regular expression literal must start with a slash"),t=ln[ot++],n=!1,r=!1;ot<Da;)if(e=ln[ot++],t+=e,e==="\\")e=ln[ot++],p_(e.charCodeAt(0))&&ii({},YF),t+=e;else if(p_(e.charCodeAt(0)))ii({},YF);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ii({},YF),i=t.substr(1,t.length-2),{value:i,literal:t}}function ift(){var e,t,n;for(t="",n="";ot<Da&&(e=ln[ot],!!wk(e.charCodeAt(0)));)++ot,e==="\\"&&ot<Da?ii({},Ds,Qs):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ii({},c6,n),{value:n,literal:t}}function oft(){var e,t,n,r;return Ti=null,y4e(),e=ot,t=rft(),n=ift(),r=nft(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ot}}function sft(e){return e.type===a0||e.type===ug||e.type===dL||e.type===hL}function v4e(){if(y4e(),ot>=Da)return{type:FE,start:ot,end:ot};const e=ln.charCodeAt(ot);return OE(e)?Jct():e===40||e===41||e===59?XF():e===39||e===34?tft():e===46?Rd(ln.charCodeAt(ot+1))?lwe():XF():Rd(e)?lwe():XF()}function Sl(){const e=Ti;return ot=e.end,Ti=v4e(),ot=e.end,e}function x4e(){const e=ot;Ti=v4e(),ot=e}function aft(e){const t=new Pc(Lct);return t.elements=e,t}function uwe(e,t,n){const r=new Pc(e==="||"||e==="&&"?$ct:Rct);return r.operator=e,r.left=t,r.right=n,r}function lft(e,t){const n=new Pc(Fct);return n.callee=e,n.arguments=t,n}function uft(e,t,n){const r=new Pc(Mct);return r.test=e,r.consequent=t,r.alternate=n,r}function s9(e){const t=new Pc(g4e);return t.name=e,t}function t2(e){const t=new Pc(Oct);return t.value=e.value,t.raw=ln.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function cwe(e,t,n){const r=new Pc(Ict);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function cft(e){const t=new Pc(Pct);return t.properties=e,t}function fwe(e,t,n){const r=new Pc(Nct);return r.key=t,r.value=n,r.kind=e,r}function fft(e,t){const n=new Pc(Bct);return n.operator=e,n.argument=t,n.prefix=!0,n}function ii(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(pL(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=ot,n.description=i,n}function gL(e){e.type===FE&&ii(e,Hct),e.type===M0&&ii(e,zct),e.type===ME&&ii(e,jct),e.type===a0&&ii(e,Uct),e.type===ug&&ii(e,qct),ii(e,Ds,e.value)}function La(e){const t=Sl();(t.type!==wl||t.value!==e)&&gL(t)}function io(e){return Ti.type===wl&&Ti.value===e}function ZF(e){return Ti.type===ug&&Ti.value===e}function dft(){const e=[];for(ot=Ti.start,La("[");!io("]");)io(",")?(Sl(),e.push(null)):(e.push(l0()),io("]")||La(","));return Sl(),aft(e)}function dwe(){ot=Ti.start;const e=Sl();return e.type===ME||e.type===M0?(e.octal&&ii(e,m4e),t2(e)):s9(e.value)}function hft(){var e,t,n,r;if(ot=Ti.start,e=Ti,e.type===a0)return n=dwe(),La(":"),r=l0(),fwe("init",n,r);if(e.type===FE||e.type===wl)gL(e);else return t=dwe(),La(":"),r=l0(),fwe("init",t,r)}function pft(){var e=[],t,n,r,i={},o=String;for(ot=Ti.start,La("{");!io("}");)t=hft(),t.key.type===g4e?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ii({},Gct):i[r]=!0,e.push(t),io("}")||La(",");return La("}"),cft(e)}function gft(){La("(");const e=a9();return La(")"),e}const mft={if:1};function yft(){var e,t,n;if(io("("))return gft();if(io("["))return dft();if(io("{"))return pft();if(e=Ti.type,ot=Ti.start,e===a0||mft[Ti.value])n=s9(Sl().value);else if(e===ME||e===M0)Ti.octal&&ii(Ti,m4e),n=t2(Sl());else{if(e===ug)throw new Error(h_);e===dL?(t=Sl(),t.value=t.value==="true",n=t2(t)):e===hL?(t=Sl(),t.value=null,n=t2(t)):io("/")||io("/=")?(n=t2(oft()),x4e()):gL(Sl())}return n}function bft(){const e=[];if(La("("),!io(")"))for(;ot<Da&&(e.push(l0()),!io(")"));)La(",");return La(")"),e}function vft(){ot=Ti.start;const e=Sl();return sft(e)||gL(e),s9(e.value)}function xft(){return La("."),vft()}function wft(){La("[");const e=a9();return La("]"),e}function _ft(){var e,t,n;for(e=yft();;)if(io("."))n=xft(),e=cwe(".",e,n);else if(io("("))t=bft(),e=lft(e,t);else if(io("["))n=wft(),e=cwe("[",e,n);else break;return e}function hwe(){const e=_ft();if(Ti.type===wl&&(io("++")||io("--")))throw new Error(h_);return e}function OC(){var e,t;if(Ti.type!==wl&&Ti.type!==ug)t=hwe();else{if(io("++")||io("--"))throw new Error(h_);if(io("+")||io("-")||io("~")||io("!"))e=Sl(),t=OC(),t=fft(e.value,t);else{if(ZF("delete")||ZF("void")||ZF("typeof"))throw new Error(h_);t=hwe()}}return t}function pwe(e){let t=0;if(e.type!==wl&&e.type!==ug)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Eft(){var e,t,n,r,i,o,s,a,l,u;if(e=Ti,l=OC(),r=Ti,i=pwe(r),i===0)return l;for(r.prec=i,Sl(),t=[e,Ti],s=OC(),o=[l,r,s];(i=pwe(Ti))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=uwe(a,l,s),o.push(n);r=Sl(),r.prec=i,o.push(r),t.push(Ti),n=OC(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=uwe(o[u-1].value,o[u-2],n),u-=2;return n}function l0(){var e,t,n;return e=Eft(),io("?")&&(Sl(),t=l0(),La(":"),n=l0(),e=uft(e,t,n)),e}function a9(){const e=l0();if(io(","))throw new Error(h_);return e}function l9(e){ln=e,ot=0,Da=ln.length,Ti=null,x4e();const t=a9();if(Ti.type!==FE)throw new Error("Unexpect token after expression.");return t}var w4e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function _4e(e){function t(s,a,l,u){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&st("Missing arguments to clamp function."),s.length>3&&st("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&st("Missing arguments to if function."),s.length>3&&st("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Sft(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function E4e(e){e=e||{};const t=e.allowed?Tc(e.allowed):{},n=e.forbidden?Tc(e.forbidden):{},r=e.constants||w4e,i=(e.functions||_4e)(c),o=e.globalvar,s=e.fieldvar,a=ir(o)?o:p=>`${o}["${p}"]`;let l={},u={},f=0;function c(p){if(Nt(p))return p;const m=d[p.type];return m==null&&st("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return f>0?m:Yt(n,m)?st("Illegal identifier: "+m):Yt(r,m)?r[m]:Yt(t,m)?m:(l[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,b=c(p.object);m&&(f+=1);const y=c(p.property);return b===s&&(u[Sft(y)]=1),m&&(f-=1),b+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&st("Illegal callee type: "+p.callee.type);const m=p.callee.name,b=p.arguments,y=Yt(i,m)&&i[m];return y||st("Unrecognized function: "+m),ir(y)?y(b):y+"("+b.map(c).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(c).join(",")+"]",BinaryExpression:p=>"("+c(p.left)+" "+p.operator+" "+c(p.right)+")",UnaryExpression:p=>"("+p.operator+c(p.argument)+")",ConditionalExpression:p=>"("+c(p.test)+"?"+c(p.consequent)+":"+c(p.alternate)+")",LogicalExpression:p=>"("+c(p.left)+p.operator+c(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(c).join(",")+"}",Property:p=>{f+=1;const m=c(p.key);return f-=1,m+":"+c(p.value)}};function h(p){const m={code:c(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=i,h.constants=r,h}const gwe=Symbol("vega_selection_getter");function S4e(e){return(!e.getter||!e.getter[gwe])&&(e.getter=Ou(e.field),e.getter[gwe]=!0),e.getter}const u9="intersect",mwe="union",Aft="vlMulti",Cft="vlPoint",ywe="or",kft="and",gf="_vgsid_",g_=Ou(gf),Tft="E",Dft="R",Lft="R-E",Rft="R-LE",Fft="R-RE",_k="index:unit";function bwe(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=S4e(a)(e),Fp(s)&&(s=Aa(s)),Fp(r[o])&&(r[o]=Aa(r[o])),at(r[o])&&Fp(r[o][0])&&(r[o]=r[o].map(Aa)),a.type===Tft){if(at(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===Dft){if(!fb(s,r[o]))return!1}else if(a.type===Fft){if(!fb(s,r[o],!0,!1))return!1}else if(a.type===Lft){if(!fb(s,r[o],!1,!1))return!1}else if(a.type===Rft&&!fb(s,r[o],!1,!0))return!1;return!0}function Mft(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[_k]&&r[_k].value:void 0,s=n===u9,a=i.length,l=0,u,f,c,d,h;l<a;++l)if(u=i[l],o&&s){if(f=f||{},c=f[d=u.unit]||0,c===-1)continue;if(h=bwe(t,u),f[d]=h?-1:++c,h&&o.size===1)return!0;if(!h&&c===o.get(d).count)return!1}else if(h=bwe(t,u),s^h)return h;return a&&s}const A4e=QT(g_),Oft=A4e.left,$ft=A4e.right;function Ift(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[_k]&&r[_k].value:void 0,s=n===u9,a=g_(t),l=Oft(i,a);if(l===i.length||g_(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if($ft(i,a)-l<o.size)return!1}return!0}function Pft(e,t){return e.map(n=>rr(t.fields?{values:t.fields.map(r=>S4e(r)(n.datum))}:{[gf]:g_(n.datum)},t))}function Nft(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,f,c,d,h,p,m,b,y,v,w=o.length,E=0,A,T;E<w;++E)if(u=o[E],d=u.unit,f=u.fields,c=u.values,f&&c){for(A=0,T=f.length;A<T;++A)h=f[A],m=s[h.field]||(s[h.field]={}),b=m[d]||(m[d]=[]),l[h.field]=y=h.type.charAt(0),v=KF[`${y}_union`],m[d]=v(b,Pt(c[A]));n&&(b=a[d]||(a[d]=[]),b.push(Pt(c).reduce((D,k,R)=>(D[f[R].field]=k,D),{})))}else h=gf,p=g_(u),m=s[h]||(s[h]={}),b=m[d]||(m[d]=[]),b.push(p),n&&(b=a[d]||(a[d]=[]),b.push({[gf]:p}));if(t=t||mwe,s[gf]?s[gf]=KF[`${gf}_${t}`](...Object.values(s[gf])):Object.keys(s).forEach(D=>{s[D]=Object.keys(s[D]).map(k=>s[D][k]).reduce((k,R)=>k===void 0?R:KF[`${l[D]}_${t}`](k,R))}),o=Object.keys(a),n&&o.length){const D=r?Cft:Aft;s[D]=t===mwe?{[ywe]:o.reduce((k,R)=>(k.push(...a[R]),k),[])}:{[kft]:o.map(k=>({[ywe]:a[k]}))}}return s}var KF={[`${gf}_union`]:cUe,[`${gf}_intersect`]:lUe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Aa(t[0]),r=Aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Aa(t[0]),r=Aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Bft=":",zft="@";function c9(e,t,n,r){t[0].type!==s0&&st("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&qr(t).value,s="unit",a=zft+s,l=Bft+i;o===u9&&!Yt(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),Yt(r,l)||(r[l]=n.getData(i).tuplesRef())}function C4e(e){const t=this.context.data[e];return t?t.values.value:[]}function jft(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Uft(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove($u).insert(t)),1}function qft(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const $E=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},Hft=$E("format"),k4e=$E("timeFormat"),Gft=$E("utcFormat"),Vft=$E("timeParse"),Wft=$E("utcParse"),kA=new Date(2e3,0,1);function mL(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(kA.setYear(2e3),kA.setMonth(e),kA.setDate(t),k4e.call(this,kA,n))}function Yft(e){return mL.call(this,e,1,"%B")}function Xft(e){return mL.call(this,e,1,"%b")}function Zft(e){return mL.call(this,0,2+e,"%A")}function Kft(e){return mL.call(this,0,2+e,"%a")}const Jft=":",Qft="@",d6="%",T4e="$";function f9(e,t,n,r){t[0].type!==s0&&st("First argument to data functions must be a string literal.");const i=t[0].value,o=Jft+i;if(!Yt(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function edt(e,t,n,r){t[0].type!==s0&&st("First argument to indata must be a string literal."),t[1].type!==s0&&st("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=Qft+o;Yt(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Qa(e,t,n,r){if(t[0].type===s0)vwe(n,r,t[0].value);else for(e in n.scales)vwe(n,r,e)}function vwe(e,t,n){const r=d6+n;if(!Yt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Zf(e,t){if(ir(e))return e;if(Nt(e)){const n=t.scales[e];return n&&ftt(n.value)?n.value:void 0}}function tdt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Qa,n._range=Qa,n._scale=Qa;const r=i=>"_["+(i.type===s0?Tt(d6+i.value):Tt(d6)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function d9(e,t){return function(n,r,i){if(n){const o=Zf(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const ndt=d9("area",Cot),rdt=d9("bounds",Lot),idt=d9("centroid",Iot);function odt(e,t){const n=Zf(e,(t||this).context);return n&&n.scale()}function sdt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function h9(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function adt(){return h9(this.context.dataflow,"warn",arguments)}function ldt(){return h9(this.context.dataflow,"info",arguments)}function udt(){return h9(this.context.dataflow,"debug",arguments)}function JF(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function h6(e){const t=r3(e),n=JF(t.r),r=JF(t.g),i=JF(t.b);return .2126*n+.7152*r+.0722*i}function cdt(e,t){const n=h6(e),r=h6(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function fdt(){const e=[].slice.call(arguments);return e.unshift({}),rr(...e)}function D4e(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?ddt(e,t):!1:$t(e)&&$t(t)?L4e(e,t):!1}function ddt(e,t){for(let n=0,r=e.length;n<r;++n)if(!D4e(e[n],t[n]))return!1;return!0}function L4e(e,t){for(const n in e)if(!D4e(e[n],t[n]))return!1;return!0}function xwe(e){return t=>L4e(e,t)}function hdt(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let f=a.changes,c,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(a.changes=f=s.changeset(),f.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,f).run()},!0,1)),n&&(c=n===!0?$u:at(n)||RD(n)?n:xwe(n),f.remove(c)),t&&f.insert(t),r&&(c=xwe(r),l.value.some(c)?f.remove(c):f.insert(r)),i)for(d in o)f.modify(i,d,o[d]);return 1}function pdt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function gdt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const wwe={};function mdt(e,t){const n=wwe[t]||(wwe[t]=Ou(t));return at(e)?e.map(n):n(e)}function p9(e){return at(e)||ArrayBuffer.isView(e)?e:null}function g9(e){return p9(e)||(Nt(e)?e:null)}function ydt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return p9(e).join(...n)}function bdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g9(e).indexOf(...n)}function vdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g9(e).lastIndexOf(...n)}function xdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g9(e).slice(...n)}function wdt(e,t,n){return ir(n)&&st("Function argument passed to replace."),String(e).replace(t,n)}function _dt(e){return p9(e).slice().reverse()}function Edt(e,t,n){return kP(e||0,t||0,n||0)}function Sdt(e,t){const n=Zf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Adt(e,t){const n=Zf(e,(t||this).context);return n?n.copy():void 0}function Cdt(e,t){const n=Zf(e,(t||this).context);return n?n.domain():[]}function kdt(e,t,n){const r=Zf(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Tdt(e,t){const n=Zf(e,(t||this).context);return n&&n.range?n.range():[]}function Ddt(e,t,n){const r=Zf(e,(n||this).context);return r?r(t):void 0}function Ldt(e,t,n,r,i){e=Zf(e,(i||this).context);const o=xLe(t,n);let s=e.domain(),a=s[0],l=qr(s),u=Ra;return l-a?u=lLe(e,a,l):e=(e.interpolator?ui("sequential")().interpolator(e.interpolator()):ui("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==qr(s)&&s.push(l)),s.forEach(f=>o.stop(u(f),e(f))),o}function Rdt(e,t,n){const r=Zf(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Fdt(e){let t=null;return function(n){return n?o_(n,t=t||o1(e)):e}}const R4e=e=>e.data;function F4e(e,t){const n=C4e.call(t,e);return n.root&&n.root.lookup||{}}function Mdt(e,t,n){const r=F4e(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(R4e):void 0}function Odt(e,t){const n=F4e(e,this)[t];return n?n.ancestors().map(R4e):void 0}const M4e=()=>typeof window<"u"&&window||null;function $dt(){const e=M4e();return e?e.screen:{}}function Idt(){const e=M4e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Pdt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function O4e(e,t,n){if(!e)return[];const[r,i]=e,o=new es().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return yRe(s,o,Ndt(t))}function Ndt(e){let t=null;if(e){const n=Pt(e.marktype),r=Pt(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function Bdt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function zdt(e){return Pt(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function jdt(e,t,n){const{x:r,y:i,mark:o}=n,s=new es().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),O4e([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>Udt(l.x,l.y,t))}function Udt(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const m_={random(){return Pu()},cumulativeNormal:ID,cumulativeLogNormal:jI,cumulativeUniform:GI,densityNormal:II,densityLogNormal:zI,densityUniform:HI,quantileNormal:PD,quantileLogNormal:UI,quantileUniform:VI,sampleNormal:$D,sampleLogNormal:BI,sampleUniform:qI,isArray:at,isBoolean:lg,isDate:Fp,isDefined(e){return e!==void 0},isNumber:li,isObject:$t,isRegExp:Qke,isString:Nt,isTuple:RD,isValid(e){return e!=null&&e===e},toBoolean:xI,toDate(e){return wI(e)},toNumber:Aa,toString:_I,indexof:bdt,join:ydt,lastindexof:vdt,replace:wdt,reverse:_dt,slice:xdt,flush:Kke,lerp:eTe,merge:fdt,pad:rTe,peek:qr,pluck:mdt,span:fE,inrange:fb,truncate:iTe,rgb:r3,lab:$M,hcl:Bze,hsl:OM,luminance:h6,contrast:cdt,sequence:Kl,format:Hft,utcFormat:Gft,utcParse:Wft,utcOffset:vTe,utcSequence:_Te,timeFormat:k4e,timeParse:Vft,timeOffset:bTe,timeSequence:wTe,timeUnitSpecifier:aTe,monthFormat:Yft,monthAbbrevFormat:Xft,dayFormat:Zft,dayAbbrevFormat:Kft,quarter:Wke,utcquarter:Yke,week:uTe,utcweek:dTe,dayofyear:lTe,utcdayofyear:fTe,warn:adt,info:ldt,debug:udt,extent(e){return $f(e)},inScope:sdt,intersect:O4e,clampRange:Xke,pinchDistance:pdt,pinchAngle:gdt,screen:$dt,containerSize:Pdt,windowSize:Idt,bandspace:Edt,setdata:Uft,pathShape:Fdt,panLinear:qke,panLog:Hke,panPow:Gke,panSymlog:Vke,zoomLinear:pI,zoomLog:gI,zoomPow:E3,zoomSymlog:mI,encode:qft,modify:hdt,lassoAppend:Bdt,lassoPath:zdt,intersectLasso:jdt},qdt=["view","item","group","xy","x","y"],Hdt="event.vega.",$4e="this.",m9={},I4e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Tt(T4e+e)}]`,functions:Gdt,constants:w4e,visitors:m9},p6=E4e(I4e);function Gdt(e){const t=_4e(e);qdt.forEach(n=>t[n]=Hdt+n);for(const n in m_)t[n]=$4e+n;return rr(t,tdt(e,m_,m9)),t}function jo(e,t,n){return arguments.length===1?m_[e]:(m_[e]=t,n&&(m9[e]=n),p6&&(p6.functions[e]=$4e+e),this)}jo("bandwidth",Sdt,Qa);jo("copy",Adt,Qa);jo("domain",Cdt,Qa);jo("range",Tdt,Qa);jo("invert",kdt,Qa);jo("scale",Ddt,Qa);jo("gradient",Ldt,Qa);jo("geoArea",ndt,Qa);jo("geoBounds",rdt,Qa);jo("geoCentroid",idt,Qa);jo("geoShape",Rdt,Qa);jo("geoScale",odt,Qa);jo("indata",jft,edt);jo("data",C4e,f9);jo("treePath",Mdt,f9);jo("treeAncestors",Odt,f9);jo("vlSelectionTest",Mft,c9);jo("vlSelectionIdTest",Ift,c9);jo("vlSelectionResolve",Nft,c9);jo("vlSelectionTuples",Pft);function Nf(e,t){const n={};let r;try{e=Nt(e)?e:Tt(e)+"",r=l9(e)}catch{st("Expression parse error: "+e)}r.visit(o=>{if(o.type!==p4e)return;const s=o.callee.name,a=I4e.visitors[s];a&&a(s,o.arguments,t,n)});const i=p6(r);return i.globals.forEach(o=>{const s=T4e+o;!Yt(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:rr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Vdt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Wdt=Tc(["rule"]),_we=Tc(["group","image","rect"]);function Ydt(e,t){let n="";return Wdt[t]||(e.x2&&(e.x?(_we[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(_we[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function y9(e){return(e+"").toLowerCase()}function Xdt(e){return y9(e)==="operator"}function Zdt(e){return y9(e)==="collect"}function mw(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Kdt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Jdt={operator:(e,t)=>mw(e,["_"],t.code),parameter:(e,t)=>mw(e,["datum","_"],t.code),event:(e,t)=>mw(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return mw(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+Tt(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=Ydt(r,n),i+="return m;",mw(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Tt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),Kdt(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Qdt(e){const t=this;Xdt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function eht(e){const t=this;if(e.params){const n=t.get(e.id);n||st("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function tht(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(o=>Ewe(o,n,t)):Ewe(i,n,t)}return t}function Ewe(e,t,n){if(!e||!$t(e))return e;for(let r=0,i=Swe.length,o;r<i;++r)if(o=Swe[r],Yt(e,o.key))return o.parse(e,t,n);return e}var Swe=[{key:"$ref",parse:nht},{key:"$key",parse:iht},{key:"$expr",parse:rht},{key:"$field",parse:oht},{key:"$encode",parse:aht},{key:"$compare",parse:sht},{key:"$context",parse:lht},{key:"$subflow",parse:uht},{key:"$tupleid",parse:cht}];function nht(e,t){return t.get(e.$ref)||st("Operator not defined: "+e.$ref)}function rht(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=zl(t.parameterExpression(e.$expr),e.$fields))}function iht(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=vI(e.$key,e.$flat,t.expr.codegen))}function oht(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ou(e.$field,e.$name,t.expr.codegen))}function sht(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Pt(e.$compare).map(i=>i&&i.$tupleid?wn:i);return t.fn[n]||(t.fn[n]=yI(r,e.$order,t.expr.codegen))}function aht(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=zl(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function lht(e,t){return t}function uht(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function cht(){return wn}function fht(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&st("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function dht(e){var t=this,n=$t(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||st("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const hht={skip:!0};function pht(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function ght(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],hht)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove($u).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function P4e(e,t,n,r){return new N4e(e,t,n,r)}function N4e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Jdt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Awe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}N4e.prototype=Awe.prototype={fork(){const e=new Awe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Zdt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[y9(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Vdt,parseOperator:Qdt,parseOperatorParameters:eht,parseParameters:tht,parseStream:fht,parseUpdate:dht,getState:pht,setState:ght};function mht(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),B4e(t,e.description()))}function B4e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function yht(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const QF="default";function bht(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:QF,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?Nt(i)?i:i.user:QF,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Nt(r)||(i=r.item,r=r.user),g6(e,r&&r!==QF?r:i||r),i},{cursor:t})}function g6(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Ek(e,t){var n=e._runtime.data;return Yt(n,t)||st("Unrecognized data set: "+t),n[t]}function vht(e,t){return arguments.length<2?Ek(this,e).values.value:yL.call(this,e,R0().remove($u).insert(t))}function yL(e,t){UTe(t)||st("Second argument to changes must be a changeset.");const n=Ek(this,e);return n.modified=!0,this.pulse(n.input,t)}function xht(e,t){return yL.call(this,e,R0().insert(t))}function wht(e,t){return yL.call(this,e,R0().remove(t))}function z4e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function j4e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function bL(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function _ht(e){var t=bL(e),n=z4e(e),r=j4e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Eht(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=bL(e),s=t.changedTouches?t.changedTouches[0]:t,o=iL(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Sht(e,n,o),t}function Sht(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;Nt(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Fa(e),item:Fa(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const Cwe="view",Aht="timer",Cht="window",kht={trap:!1};function Tht(e){const t=rr({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{at(r[o])&&(r[o]=Tc(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function U4e(e,t,n,r){e._eventListeners.push({type:n,sources:Pt(t),handler:r})}function Dht(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function TA(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||$t(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Lht(e,t,n){var r=this,i=new OD(n),o=function(u,f){r.runAsync(null,()=>{e===Cwe&&Dht(r,t)&&u.preventDefault(),i.receive(Eht(r,u,f))})},s;if(e===Aht)TA(r,"timer",t)&&r.timer(o,t);else if(e===Cwe)TA(r,"view",t)&&r.addEventListener(t,o,kht);else if(e===Cht?TA(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&TA(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);U4e(r,s,t,o)}return i}function kwe(e){return e.item}function Twe(e){return e.item.mark.source}function Dwe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Rht(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",kwe),Twe,Dwe(e)),this.on(this.events("view","pointerout",kwe),Twe,Dwe(t)),this}function Fht(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function ru(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Mht="vega-bind",Oht="vega-bind-name",$ht="vega-bind-radio";function Iht(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=bI(r.debounce,i.update))),(r.input==null&&r.element?Pht:Bht)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Pht(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),U4e(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(Nht(i))}}function Nht(e){return typeof Event<"u"?new Event(e):{type:e}}function Bht(e,t,n,r){const i=r.signal(n.signal),o=ru("div",{class:Mht}),s=n.input==="radio"?o:o.appendChild(ru("label"));s.appendChild(ru("span",{class:Oht},n.name||n.signal)),t.appendChild(o);let a=zht;switch(n.input){case"checkbox":a=jht;break;case"select":a=Uht;break;case"radio":a=qht;break;case"range":a=Hht;break}a(e,s,n,i)}function zht(e,t,n,r){const i=ru("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function jht(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=ru("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function Uht(e,t,n,r){const i=ru("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};Sk(s,r)&&(l.selected=!0),i.appendChild(ru("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(Sk(n.options[a],s)){i.selectedIndex=a;return}}}function qht(e,t,n,r){const i=ru("span",{class:$ht}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};Sk(s,r)&&(l.checked=!0);const u=ru("input",l);u.addEventListener("change",()=>e.update(s));const f=ru("label",{},(o[a]||s)+"");return f.prepend(u),i.appendChild(f),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)Sk(a[u].value,s)&&(a[u].checked=!0)}}function Hht(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||Zm(o,i,100),a=ru("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=ru("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=f=>{a.value=f,l.textContent=f}}function Sk(e,t){return e===t||e+""==t+""}function q4e(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,z4e(e),j4e(e),bL(e),i,o).background(e.background())}function b9(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Ght(e,t,n,r){const i=new r(e.loader(),b9(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,bL(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Vht(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=oL(r);e=n._el=e?e4(n,e,!0):null,mht(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||kE,a=e?o.renderer:o.headless;return n._renderer=a?q4e(n,n._renderer,e,a):null,n._handler=Ght(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=e4(n,t,!0):e.appendChild(ru("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=e4(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Iht(n,l.element||t,l)})),n}function e4(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const yw=e=>+e||0,Wht=e=>({top:e,bottom:e,left:e,right:e});function Lwe(e){return $t(e)?{top:yw(e.top),bottom:yw(e.bottom),left:yw(e.left),right:yw(e.right)}:Wht(yw(e))}async function v9(e,t,n,r){const i=oL(t),o=i&&i.headless;return o||st("Unrecognized renderer type: "+t),await e.runAsync(),q4e(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Yht(e,t){e!==wp.Canvas&&e!==wp.SVG&&e!==wp.PNG&&st("Unrecognized image type: "+e);const n=await v9(this,e,t);return e===wp.SVG?Xht(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Xht(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Zht(e,t){return(await v9(this,wp.Canvas,e,t)).canvas()}async function Kht(e){return(await v9(this,wp.SVG,e)).svg()}function Jht(e,t,n){return P4e(e,e1,m_,n).parse(t)}function Qht(e){var t=this._runtime.scales;return Yt(t,e)||st("Unrecognized scale or projection: "+e),t[e].value}var H4e="width",G4e="height",x9="padding",Rwe={skip:!0};function V4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===x9?r.left+r.right:0)}function W4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===x9?r.top+r.bottom:0)}function ept(e){var t=e._signals,n=t[H4e],r=t[G4e],i=t[x9];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=V4e(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=W4e(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function tpt(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(H4e,n,Rwe),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(G4e,r,Rwe),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function npt(e){return this._runtime.getState(e||{data:rpt,signals:ipt,recurse:!0})}function rpt(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function ipt(e,t){return!(e==="parent"||t instanceof e1.proxy)}function opt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function spt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Pat(n,t))}function apt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",lpt(r))}function lpt(e){return e==null?"":at(e)?Y4e(e):$t(e)&&!Fp(e)?upt(e):e+""}function upt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?Y4e(n):X4e(n))}).join(`
`)}function Y4e(e){return"["+e.map(X4e).join(", ")+"]"}function X4e(e){return at(e)?"[]":$t(e)&&!Fp(e)?"{}":e}function cpt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Z4e(e,t){const n=this;if(t=t||{},Sb.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=rr({},e.locale,t.locale);n.locale(FTe(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||wp.Canvas,n._scenegraph=new HLe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||apt,n._redraw=!0,n._handler=new kE().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Tht(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Jht(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:rr({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=V4e(n,n._width),n._viewHeight=W4e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,ept(n),yht(n),bht(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function DA(e,t){return Yt(e._signals,t)?e._signals[t]:st("Unrecognized signal name: "+Tt(t))}function K4e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Fwe(e,t,n,r){let i=K4e(n,r);return i||(i=b9(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Mwe(e,t,n){const r=K4e(t,n);return r&&t._targets.remove(r),e}Lt(Z4e,Sb,{async evaluate(e,t,n){if(await Sb.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,_ht(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&yC(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&B4e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=DA(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Lwe(e)):Lwe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(oL(e)||st("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Sb.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(DA(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:tpt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=b9(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Fwe(this,e,DA(this,e),t)},removeSignalListener(e,t){return Mwe(this,DA(this,e),t)},addDataListener(e,t){return Fwe(this,e,Ek(this,e).values,t)},removeDataListener(e,t){return Mwe(this,Ek(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=g6(this,null);this._globalCursor=!!e,t&&g6(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:spt,events:Lht,finalize:Fht,hover:Rht,data:vht,change:yL,insert:xht,remove:wht,scale:Qht,initialize:Vht,toImageURL:Yht,toCanvas:Zht,toSVG:Kht,getState:npt,setState:opt,_watchPixelRatio:cpt});const fpt="view",Ak="[",Ck="]",J4e="{",Q4e="}",dpt=":",e5e=",",hpt="@",ppt=">",gpt=/[[\]{}]/,mpt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let t5e,n5e;function cg(e,t,n){return t5e=t||fpt,n5e=n||mpt,r5e(e.trim()).map(m6)}function ypt(e){return n5e[e]}function k2(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function r5e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=k2(e,i,e5e,Ak+J4e,Ck+Q4e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function m6(e){return e[0]==="["?bpt(e):vpt(e)}function bpt(e){const t=e.length;let n=1,r;if(n=k2(e,n,Ck,Ak,Ck),n===t)throw"Empty between selector: "+e;if(r=r5e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ppt)throw"Expected '>' after between selector: "+e;r=r.map(m6);const i=m6(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function vpt(e){const t={source:t5e},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===Q4e){if(a=e.lastIndexOf(J4e),a>=0){try{r=xpt(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===hpt&&(i=++a),l=k2(e,a,dpt),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=k2(e,a,Ak),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=k2(e,a,Ck),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==Ak)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||gpt.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):ypt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function xpt(e){const t=e.split(e5e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function wpt(e){return $t(e)?e:{type:e||"pad"}}const bw=e=>+e||0,_pt=e=>({top:e,bottom:e,left:e,right:e});function Ept(e){return $t(e)?e.signal?e:{top:bw(e.top),bottom:bw(e.bottom),left:bw(e.left),right:bw(e.right)}:_pt(bw(e))}const Ls=e=>$t(e)&&!at(e)?rr({},e):{value:e};function Owe(e,t,n,r){return n!=null?($t(n)&&!at(n)||at(n)&&n.length&&$t(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ia(e,t,n){for(const r in t)Owe(e,r,t[r]);for(const r in n)Owe(e,r,n[r],"update")}function av(e,t,n){for(const r in t)n&&Yt(n,r)||(e[r]=rr(e[r]||{},t[r]));return e}function tb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const w9="mark",_9="frame",E9="scope",Spt="axis",Apt="axis-domain",Cpt="axis-grid",kpt="axis-label",Tpt="axis-tick",Dpt="axis-title",Lpt="legend",Rpt="legend-band",Fpt="legend-entry",Mpt="legend-gradient",i5e="legend-label",Opt="legend-symbol",$pt="legend-title",Ipt="title",Ppt="title-text",Npt="title-subtitle";function Bpt(e,t,n,r,i){const o={},s={};let a,l,u,f;l="lineBreak",t==="text"&&i[l]!=null&&!tb(l,e)&&t4(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===_9?i.group:n===w9?rr({},i.mark,i[t]):null;for(l in f)u=tb(l,e)||(l==="fill"||l==="stroke")&&(tb("fill",e)||tb("stroke",e)),u||t4(o,l,f[l]);Pt(r).forEach(c=>{const d=i.style&&i.style[c];for(const h in d)tb(h,e)||t4(o,h,d[h])}),e=rr({},e);for(l in o)f=o[l],f.signal?(a=a||{})[l]=f:s[l]=f;return e.enter=rr(s,e.enter),a&&(e.update=rr(a,e.update)),e}function t4(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const o5e=e=>Nt(e)?Tt(e):e.signal?`(${e.signal})`:s5e(e);function vL(e){if(e.gradient!=null)return jpt(e);let t=e.signal?`(${e.signal})`:e.color?zpt(e.color):e.field!=null?s5e(e.field):e.value!==void 0?Tt(e.value):void 0;return e.scale!=null&&(t=Upt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${$C(e.exponent)})`),e.mult!=null&&(t+=`*${$C(e.mult)}`),e.offset!=null&&(t+=`+${$C(e.offset)}`),e.round&&(t=`round(${t})`),t}const LA=(e,t,n,r)=>`(${e}(${[t,n,r].map(vL).join(",")})+'')`;function zpt(e){return e.c?LA("hcl",e.h,e.c,e.l):e.h||e.s?LA("hsl",e.h,e.s,e.l):e.l||e.a?LA("lab",e.l,e.a,e.b):e.r||e.g||e.b?LA("rgb",e.r,e.g,e.b):null}function jpt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Tt(n));for(;t.length&&qr(t)==null;)t.pop();return t.unshift(o5e(e.gradient)),`gradient(${t.join(",")})`}function $C(e){return $t(e)?"("+vL(e)+")":e}function s5e(e){return a5e($t(e)?e:{datum:e})}function a5e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):st("Invalid field reference: "+Tt(e));return e.signal||(r=Nt(r)?Gf(r).map(Tt).join("]["):a5e(r)),t+"["+r+"]"}function Upt(e,t){const n=o5e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+$C(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function qpt(e){let t="";return e.forEach(n=>{const r=vL(n);t+=n.test?`(${n.test})?${r}:`:r}),qr(t)===":"&&(t+="null"),t}function l5e(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=Bpt(e,t,n,r,i.config);for(const a in e)s[a]=Hpt(e[a],t,o,i);return o}function Hpt(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=Vpt(Gpt(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function Gpt(e){return at(e)?qpt(e):vL(e)}function Vpt(e,t,n,r){const i=Nf(e,t);return i.$fields.forEach(o=>r[o]=1),rr(n,i.$params),i.$expr}const Wpt="outer",Ypt=["value","update","init","react","bind"];function $we(e,t){st(e+' for "outer" push: '+Tt(t))}function u5e(e,t){const n=e.name;if(e.push===Wpt)t.signals[n]||$we("No prior signal definition",n),Ypt.forEach(r=>{e[r]!==void 0&&$we("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function y6(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function xL(e,t,n,r){return new y6(e,t,n,r)}function kk(e,t){return xL("operator",e,t)}function xn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function y_(e,t){return t?{$field:e,$name:t}:{$field:e}}const b6=y_("key");function Iwe(e,t){return{$compare:e,$order:t}}function Xpt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Zpt="ascending",Kpt="descending";function Jpt(e){return $t(e)?(e.order===Kpt?"-":"+")+wL(e.op,e.field):""}function wL(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const S9="scope",v6="view";function ys(e){return e&&e.signal}function Qpt(e){return e&&e.expr}function IC(e){if(ys(e))return!0;if($t(e)){for(const t in e)if(IC(e[t]))return!0}return!1}function cc(e,t){return e??t}function jm(e){return e&&e.signal||e}const Pwe="timer";function b_(e,t){return(e.merge?tgt:e.stream?ngt:e.type?rgt:st("Invalid stream specification: "+Tt(e)))(e,t)}function egt(e){return e===S9?v6:e||v6}function tgt(e,t){const n=e.merge.map(i=>b_(i,t)),r=A9({merge:n},e,t);return t.addStream(r).id}function ngt(e,t){const n=b_(e.stream,t),r=A9({stream:n},e,t);return t.addStream(r).id}function rgt(e,t){let n;e.type===Pwe?(n=t.event(Pwe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(egt(e.source),e.type);const r=A9({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function A9(e,t,n){let r=t.between;return r&&(r.length!==2&&st('Stream "between" parameter must have 2 entries: '+Tt(t)),e.between=[b_(r[0],n),b_(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(igt(t.marktype,t.markname,t.markrole)),t.source===S9&&r.push("inScope(event.item)"),r.length&&(e.filter=Nf("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function igt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const ogt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function sgt(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||st("Signal update missing events specification."),Nt(o)&&(o=cg(o,t.isSubscope()?S9:v6)),o=Pt(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[lgt(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&st("Signal encode and update are mutually exclusive."),s="encode(item(),"+Tt(r)+")"),i.update=Nt(s)?Nf(s,t):s.expr!=null?Nf(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:ogt,$params:{$value:t.signalRef(s.signal)}}:st("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(rr(agt(l,t),i)))}function agt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):b_(e,t)}}function lgt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function ugt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?st("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Nf(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>sgt(i,t,n.id))}const Pi=e=>(t,n,r)=>xL(e,n,t||void 0,r),c5e=Pi("aggregate"),cgt=Pi("axisticks"),f5e=Pi("bound"),Nc=Pi("collect"),Nwe=Pi("compare"),fgt=Pi("datajoin"),d5e=Pi("encode"),dgt=Pi("expression"),hgt=Pi("facet"),pgt=Pi("field"),ggt=Pi("key"),mgt=Pi("legendentries"),ygt=Pi("load"),bgt=Pi("mark"),vgt=Pi("multiextent"),xgt=Pi("multivalues"),wgt=Pi("overlap"),_gt=Pi("params"),h5e=Pi("prefacet"),Egt=Pi("projection"),Sgt=Pi("proxy"),Agt=Pi("relay"),p5e=Pi("render"),Cgt=Pi("scale"),O0=Pi("sieve"),kgt=Pi("sortitems"),g5e=Pi("viewlayout"),Tgt=Pi("values");let Dgt=0;const m5e={min:"min",max:"max",count:"sum"};function Lgt(e,t){const n=e.type||"linear";nLe(n)||st("Unrecognized scale type: "+Tt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Rgt(e,t){const n=t.getScale(e.name).params;let r;n.domain=y5e(e.domain,e,t),e.range!=null&&(n.range=v5e(e,t,n)),e.interpolate!=null&&jgt(e.interpolate,n),e.nice!=null&&(n.nice=zgt(e.nice,t)),e.bins!=null&&(n.bins=Bgt(e.bins,t));for(r in e)Yt(n,r)||r==="name"||(n[r]=Du(e[r],t))}function Du(e,t){return $t(e)?e.signal?t.signalRef(e.signal):st("Unsupported object: "+Tt(e)):e}function PC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Du(n,t))}function _L(e){st("Can not find data set: "+Tt(e))}function y5e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&st("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?Fgt:e.fields?Ogt:Mgt)(e,t,n)}function Fgt(e,t,n){return e.map(r=>Du(r,n))}function Mgt(e,t,n){const r=n.getData(e.data);return r||_L(e.data),i1(t.type)?r.valuesRef(n,e.field,b5e(e.sort,!1)):oLe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Ogt(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=Nt(s)?{data:r,field:s}:at(s)||s.signal?$gt(s,n):s,o.push(s),o),[]);return(i1(t.type)?Igt:oLe(t.type)?Pgt:Ngt)(e,n,i)}function $gt(e,t){const n="_:vega:_"+Dgt++,r=Nc({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Tt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,O0({})]),{data:n,field:"data"}}function Igt(e,t,n){const r=b5e(e.sort,!0);let i,o;const s=n.map(u=>{const f=t.getData(u.data);return f||_L(u.data),f.countsRef(t,u.field,r)}),a={groupby:b6,pulse:s};r&&(i=r.op||"count",o=r.field?wL(i,r.field):"count",a.ops=[m5e[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(c5e(a));const l=t.add(Nc({pulse:xn(i)}));return o=t.add(Tgt({field:b6,sort:t.sortRef(r),pulse:xn(l)})),xn(o)}function b5e(e,t){return e&&(!e.field&&!e.op?$t(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?st("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!m5e[e.op]&&st("Multiple domain scales can not be sorted using "+e.op)),e}function Pgt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||_L(i.data),o.domainRef(t,i.field)});return xn(t.add(xgt({values:r})))}function Ngt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||_L(i.data),o.extentRef(t,i.field)});return xn(t.add(vgt({extents:r})))}function Bgt(e,t){return e.signal||at(e)?PC(e,t):t.objectProperty(e)}function zgt(e,t){return e.signal?t.signalRef(e.signal):$t(e)?{interval:Du(e.interval),step:Du(e.step)}:Du(e)}function jgt(e,t){t.interpolate=Du(e.type||e),e.gamma!=null&&(t.interpolateGamma=Du(e.gamma))}function v5e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Nt(i)){if(r&&Yt(r,i))return e=rr({},e,{range:r[i]}),v5e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=i1(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:st("Unrecognized scale range value: "+Tt(i))}else if(i.scheme){n.scheme=at(i.scheme)?PC(i.scheme,t):Du(i.scheme,t),i.extent&&(n.schemeExtent=PC(i.extent,t)),i.count&&(n.schemeCount=Du(i.count,t));return}else if(i.step){n.rangeStep=Du(i.step,t);return}else{if(i1(e.type)&&!at(i))return y5e(i,e,t);at(i)||st("Unsupported range type: "+Tt(i))}return i.map(o=>(at(o)?PC:Du)(o,t))}function Ugt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=x6(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=x6(n[i],i,t));t.addProjection(e.name,r)}function x6(e,t,n){return at(e)?e.map(r=>x6(r,t,n)):$t(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:st("Unsupported parameter object: "+Tt(e)):e}const Bc="top",lv="left",uv="right",Xp="bottom",x5e="center",qgt="vertical",Hgt="start",Ggt="middle",Vgt="end",w6="index",C9="label",Wgt="offset",h1="perc",Ygt="perc2",Ru="value",IE="guide-label",k9="guide-title",Xgt="group-title",Zgt="group-subtitle",Bwe="symbol",NC="gradient",_6="discrete",E6="size",Kgt="shape",Jgt="fill",Qgt="stroke",emt="strokeWidth",tmt="strokeDash",nmt="opacity",T9=[E6,Kgt,Jgt,Qgt,emt,tmt,nmt],PE={name:1,style:1,interactive:1},Wr={value:0},Fu={value:1},EL="group",w5e="rect",D9="rule",rmt="symbol",$0="text";function v_(e){return e.type=EL,e.interactive=e.interactive||!1,e}function jl(e,t){const n=(r,i)=>cc(e[r],cc(t[r],i));return n.isVertical=r=>qgt===cc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>cc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>cc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>cc(e.columns,cc(t.columns,+n.isVertical(!0))),n}function _5e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function imt(e,t,n){const r=t.config.style[n];return r&&r[e]}function SL(e,t,n){return`item.anchor === '${Hgt}' ? ${e} : item.anchor === '${Vgt}' ? ${t} : ${n}`}const L9=SL(Tt(lv),Tt(uv),Tt(x5e));function omt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},$t(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function E5e(e,t){return t?e?$t(e)?Object.assign({},e,{offset:E5e(e.offset,t)}):{value:e,offset:t}:t:e}function fu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=av(e.encode,t,PE)):e.interactive=!1,e}function smt(e,t,n,r){const i=jl(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,f,c,d;o?(u=[0,1],f=[0,0],c=s,d=a):(u=[0,0],f=[1,0],c=a,d=s);const h={enter:l={opacity:Wr,x:Wr,y:Wr,width:Ls(c),height:Ls(d)},update:rr({},l,{opacity:Fu,fill:{gradient:t,start:u,stop:f}}),exit:{opacity:Wr}};return ia(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fu({type:w5e,role:Mpt,encode:h},r)}function amt(e,t,n,r,i){const o=jl(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,f,c,d,h="";s?(u="y",c="y2",f="x",d="width",h="1-"):(u="x",c="x2",f="y",d="height");const p={opacity:Wr,fill:{scale:t,field:Ru}};p[u]={signal:h+"datum."+h1,mult:l},p[f]=Wr,p[c]={signal:h+"datum."+Ygt,mult:l},p[d]=Ls(a);const m={enter:p,update:rr({},p,{opacity:Fu}),exit:{opacity:Wr}};return ia(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),fu({type:w5e,role:Rpt,key:Ru,from:i,encode:m},r)}const lmt=`datum.${h1}<=0?"${lv}":datum.${h1}>=1?"${uv}":"${x5e}"`,umt=`datum.${h1}<=0?"${Xp}":datum.${h1}>=1?"${Bc}":"${Ggt}"`;function zwe(e,t,n,r){const i=jl(e,t),o=i.isVertical(),s=Ls(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,f,c,d,h="";const p={enter:u={opacity:Wr},update:f={opacity:Fu,text:{field:C9}},exit:{opacity:Wr}};return ia(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:cc(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=f.baseline={signal:umt},c="y",d="x",h="1-"):(u.align=f.align={signal:lmt},u.baseline={value:"top"},c="x",d="y"),u[c]=f[c]={signal:h+"datum."+h1,mult:a},u[d]=f[d]=s,s.offset=cc(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+w6}:void 0,fu({type:$0,role:i5e,style:IE,key:Ru,from:r,encode:p,overlap:l},n)}function cmt(e,t,n,r,i){const o=jl(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),f=o("symbolOffset"),c={data:"value"},d=`(${i}) ? datum.${Wgt} : datum.${E6}`,h=u?Ls(u):{field:E6},p=`datum.${w6}`,m=`max(1, ${i})`;let b,y,v,w,E;h.mult=.5,b={enter:y={opacity:Wr,x:{signal:d,mult:.5,offset:f},y:h},update:v={opacity:Fu,x:y.x,y:y.y},exit:{opacity:Wr}};let A=null,T=null;e.fill||(A=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),ia(b,{fill:o("symbolFillColor",A),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",T),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),T9.forEach(M=>{e[M]&&(v[M]=y[M]={scale:e[M],field:Ru})});const D=fu({type:rmt,role:Opt,key:Ru,from:c,clip:u?!0:void 0,encode:b},n.symbols),k=Ls(f);k.offset=o("labelOffset"),b={enter:y={opacity:Wr,x:{signal:d,offset:k},y:h},update:v={opacity:Fu,text:{field:C9},x:y.x,y:y.y},exit:{opacity:Wr}},ia(b,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const R=fu({type:$0,role:i5e,style:IE,key:Ru,from:c,encode:b},n.labels);return b={enter:{noBound:{value:!u},width:Wr,height:u?Ls(u):Wr,opacity:Wr},exit:{opacity:Wr},update:v={opacity:Fu,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(w=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${w}`,v.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,E={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:w6}},v_({role:E9,from:r,encode:av(b,s,PE),marks:[D,R],name:l,interactive:a,sort:E})}function fmt(e,t){const n=jl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const R9='item.orient === "left"',F9='item.orient === "right"',AL=`(${R9} || ${F9})`,dmt=`datum.vgrad && ${AL}`,hmt=SL('"top"','"bottom"','"middle"'),pmt=SL('"right"','"left"','"center"'),gmt=`datum.vgrad && ${F9} ? (${pmt}) : (${AL} && !(datum.vgrad && ${R9})) ? "left" : ${L9}`,mmt=`item._anchor || (${AL} ? "middle" : "start")`,ymt=`${dmt} ? (${R9} ? -90 : 90) : 0`,bmt=`${AL} ? (datum.vgrad ? (${F9} ? "bottom" : "top") : ${hmt}) : "top"`;function vmt(e,t,n,r){const i=jl(e,t),o={enter:{opacity:Wr},update:{opacity:Fu,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Wr}};return ia(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:mmt},angle:{signal:ymt},align:{signal:gmt},baseline:{signal:bmt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fu({type:$0,role:$pt,style:k9,from:r,encode:o},n)}function xmt(e,t){let n;return $t(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+jwe(e.path)+")":e.sphere&&(n="geoShape("+jwe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function jwe(e){return $t(e)&&e.signal?e.signal:Tt(e)}function S5e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===EL?E9:t||w9}function wmt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||S5e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function _mt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function M9(e,t){const n=GTe(e.type);n||st("Unrecognized transform type: "+Tt(e.type));const r=xL(n.type.toLowerCase(),null,A5e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function A5e(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=Emt(s,t,n)}return r}function Emt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Smt(e,t,n);if(i===void 0){e.required&&st("Missing required "+Tt(t.type)+" parameter: "+Tt(e.name));return}else{if(r==="param")return Amt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ys(i)?i.map(o=>Uwe(e,o,n)):Uwe(e,i,n)}function Uwe(e,t,n){const r=e.type;if(ys(t))return Hwe(r)?st("Expression references can not be signals."):n4(r)?n.fieldRef(t):Gwe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||n4(r);return i&&Cmt(t)?n.exprRef(t.expr,t.as):i&&kmt(t)?y_(t.field,t.as):Hwe(r)?Nf(t,n):Tmt(r)?xn(n.getData(t).values):n4(r)?y_(t):Gwe(r)?n.compareRef(t):t}}function Smt(e,t,n){return Nt(t.from)||st('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Amt(e,t,n){const r=t[e.name];return e.array?(at(r)||st("Expected an array of sub-parameters. Instead: "+Tt(r)),r.map(i=>qwe(e,i,n))):qwe(e,r,n)}function qwe(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||st("Unsupported parameter: "+Tt(t));const o=rr(A5e(i,t,n),i.key);return xn(n.add(_gt(o)))}const Cmt=e=>e&&e.expr,kmt=e=>e&&e.field,Tmt=e=>e==="data",Hwe=e=>e==="expr",n4=e=>e==="field",Gwe=e=>e==="compare";function Dmt(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||st("Only group marks can be faceted."),r.field!=null?s=a=BC(r,n):(e.data?a=xn(n.getData(e.data).aggregate):(o=M9(rr({type:"aggregate",groupby:Pt(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=BC(r,n),s=a=xn(n.add(o))),i=n.keyRef(r.groupby,!0))):s=xn(n.add(Nc(null,[{}]))),s||(s=BC(e,n)),{key:i,pulse:s,parent:a}}function BC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:xn(t.getData(e.data).output)}function u0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}u0.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=xn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new u0(e,o,i,r,s)};function C5e(e){return Nt(e)?e:null}function Vwe(e,t,n){const r=wL(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function vw(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=Jpt(o);let u=C5e(i),f,c;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),f=a[u]),!f){const d=o?{field:b6,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:xn(t.output)};l&&(d.sort=e.sortRef(o)),c=e.add(xL(r,void 0,d)),s&&(t.index[i]=c),f=xn(c),u!=null&&(a[u]=f)}return f}u0.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=C5e(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&Vwe(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:xn(r.output)},n&&n.field&&Vwe(e,l,n),a=e.add(c5e(l)),s=e.add(Nc({pulse:xn(a)})),s={agg:a,ref:xn(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return xn(this.values)},extentRef(e,t){return vw(e,this,"extent","extent",t,!1)},domainRef(e,t){return vw(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return vw(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return vw(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return vw(e,this,"indata","tupleindex",t,!0,!0)}};function Lmt(e,t,n){const r=e.from.facet,i=r.name,o=BC(r,t);let s;r.name||st("Facet must have a name: "+Tt(r)),r.data||st("Facet must reference a data set: "+Tt(r)),r.field?s=t.add(h5e({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(hgt({key:t.keyRef(r.groupby),group:xn(t.proxy(n.parent)),pulse:o})):st("Facet must specify groupby or field: "+Tt(r));const a=t.fork(),l=a.add(Nc()),u=a.add(O0({pulse:xn(l)}));a.addData(i,new u0(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function Rmt(e,t,n){const r=t.add(h5e({pulse:n.pulse})),i=t.fork();i.add(O0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function k5e(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(kk()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(c=>c??"null").join(",")+"),0)",f=Nf(u,t);l.update=f.$expr,l.params=f.$params}function CL(e,t){const n=S5e(e),r=e.type===EL,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===E9||n===_9,a,l,u,f,c,d,h;const p=n===w9||s||i,m=Dmt(e.from,r,t);l=t.add(fgt({key:m.key||(e.key?y_(e.key):void 0),pulse:m.pulse,clean:!r}));const b=xn(l);l=u=t.add(Nc({pulse:b})),l=t.add(bgt({markdef:wmt(e),interactive:_mt(e.interactive,t),clip:xmt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:xn(l)}));const y=xn(l);l=f=t.add(d5e(l5e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const D=M9(T,t),k=D.metadata;(k.generates||k.changes)&&st("Mark transforms should not generate new data."),k.nomod||(f.params.mod=!0),D.params.pulse=xn(l),t.add(l=D)}),e.sort&&(l=t.add(kgt({sort:t.compareRef(e.sort),pulse:xn(l)})));const v=xn(l);(i||s)&&(s=t.add(g5e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=xn(s));const w=t.add(f5e({mark:y,pulse:d||v}));h=xn(w),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,b),i?Lmt(e,t,m):p?Rmt(e,t,m):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(w))),o&&(h=Fmt(o,h,t));const E=t.add(p5e({pulse:h})),A=t.add(O0({pulse:xn(E)},void 0,t.parent()));e.name!=null&&(c=e.name,t.addData(c,new u0(t,u,E,A)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&st("Marks only support modify triggers."),k5e(T,t,c)}))}function Fmt(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:ys(o)?n.signalRef(o.signal):o,method:ys(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=ys(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return xn(n.add(wgt(s)))}function Mmt(e,t){const n=t.config.legend,r=e.encode||{},i=jl(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let f=0,c,d,h;T9.forEach(w=>e[w]?(u[w]=e[w],f=f||e[w]):0),f||st("Missing valid scale for legend.");const p=Omt(e,t.scaleType(f)),m={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},b=xn(t.add(Nc(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=xn(t.add(mgt(d={type:p,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===NC?(h=[smt(e,f,n,r.gradient),zwe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${jm(i.gradientLength())})/100))`)):p===_6?h=[amt(e,f,n,r.gradient,v),zwe(e,n,r.labels,v)]:(c=fmt(e,n),h=[cmt(e,n,r,v,jm(c.columns))],d.size=Pmt(e,t,h[0].marks)),h=[v_({role:Fpt,from:b,encode:y,marks:h,layout:c,interactive:a})],m.title&&h.push(vmt(e,n,r.title,b)),CL(v_({role:Lpt,from:b,encode:av(Imt(i,e,n),o,PE),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function Omt(e,t){let n=e.type||Bwe;return!e.type&&$mt(e)===1&&(e.fill||e.stroke)&&(n=FP(t)?NC:pO(t)?_6:Bwe),n!==NC?n:pO(t)?_6:NC}function $mt(e){return T9.reduce((t,n)=>t+(e[n]?1:0),0)}function Imt(e,t,n){const r={enter:{},update:{}};return ia(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Pmt(e,t,n){const r=jm(Wwe("size",e,n)),i=jm(Wwe("strokeWidth",e,n)),o=jm(Nmt(n[1].encode,t,IE));return Nf(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Wwe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:_5e(e,n[0].encode)}function Nmt(e,t,n){return _5e("fontSize",e)||imt("fontSize",t,n)}const Bmt=`item.orient==="${lv}"?-90:item.orient==="${uv}"?90:0`;function zmt(e,t){e=Nt(e)?{text:e}:e;const n=jl(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},f=xn(t.add(Nc(null,[u])));return l.push(qmt(e,n,jmt(e),f)),e.subtitle&&l.push(Hmt(e,n,r.subtitle,f)),CL(v_({role:Ipt,from:f,encode:Umt(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function jmt(e){const t=e.encode;return t&&t.title||rr({name:e.name,interactive:e.interactive,style:e.style},t)}function Umt(e,t){const n={enter:{},update:{}};return ia(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:L9},angle:{signal:Bmt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),av(n,t,PE)}function qmt(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ia(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fu({type:$0,role:Ppt,style:Xgt,from:r,encode:s},n)}function Hmt(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ia(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fu({type:$0,role:Npt,style:Zgt,from:r,encode:s},n)}function Gmt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(M9(r,t))}),e.on&&e.on.forEach(r=>{k5e(r,t,e.name)}),t.addDataPipeline(e.name,Vmt(e,t,n))}function Vmt(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,f,c;for(e.values?ys(e.values)||IC(e.format)?(r.push(Ywe(t,e)),r.push(i=im())):r.push(i=im({$ingest:e.values,$format:e.format})):e.url?IC(e.url)||IC(e.format)?(r.push(Ywe(t,e)),r.push(i=im())):r.push(i=im({$request:e.url,$format:e.format})):e.source&&(i=a=Pt(e.source).map(d=>xn(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)f=n[l],c=f.metadata,!i&&!c.source&&r.push(i=im()),r.push(f),c.generates&&(s=!0),c.modifies&&!s&&(o=!0),c.source?i=f:c.changes&&(i=null);return a&&(u=a.length-1,r[0]=Agt({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,im())),i||r.push(im()),r.push(O0({})),r}function im(e){const t=Nc({},e);return t.metadata={source:!0},t}function Ywe(e,t){return ygt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const T5e=e=>e===Xp||e===Bc,kL=(e,t,n)=>ys(e)?Zmt(e.signal,t,n):e===lv||e===Bc?t:n,Rs=(e,t,n)=>ys(e)?Ymt(e.signal,t,n):T5e(e)?t:n,_c=(e,t,n)=>ys(e)?Xmt(e.signal,t,n):T5e(e)?n:t,D5e=(e,t,n)=>ys(e)?Kmt(e.signal,t,n):e===Bc?{value:t}:{value:n},Wmt=(e,t,n)=>ys(e)?Jmt(e.signal,t,n):e===uv?{value:t}:{value:n},Ymt=(e,t,n)=>L5e(`${e} === '${Bc}' || ${e} === '${Xp}'`,t,n),Xmt=(e,t,n)=>L5e(`${e} !== '${Bc}' && ${e} !== '${Xp}'`,t,n),Zmt=(e,t,n)=>O9(`${e} === '${lv}' || ${e} === '${Bc}'`,t,n),Kmt=(e,t,n)=>O9(`${e} === '${Bc}'`,t,n),Jmt=(e,t,n)=>O9(`${e} === '${uv}'`,t,n),L5e=(e,t,n)=>(t=t!=null?Ls(t):t,n=n!=null?Ls(n):n,Xwe(t)&&Xwe(n)?(t=t?t.signal||Tt(t.value):null,n=n?n.signal||Tt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[rr({test:e},t)].concat(n||[])),Xwe=e=>e==null||Object.keys(e).length===1,O9=(e,t,n)=>({signal:`${e} ? (${mb(t)}) : (${mb(n)})`}),Qmt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${lv}' ? (${mb(r)}) : `:"")+(n!=null?`${e} === '${Xp}' ? (${mb(n)}) : `:"")+(i!=null?`${e} === '${uv}' ? (${mb(i)}) : `:"")+(t!=null?`${e} === '${Bc}' ? (${mb(t)}) : `:"")+"(null)"}),mb=e=>ys(e)?e.signal:e==null?null:Tt(e),e0t=(e,t)=>t===0?0:ys(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Cb=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Uy(e,t,n,r){let i;if(t&&Yt(t,e))return t[e];if(Yt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[k9][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[IE][i]}return null}function Zwe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function t0t(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(ys(s)){const c=Zwe([n.axisX,n.axisY]),d=Zwe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of c)a[u]=Rs(s,Uy(u,n.axisX,i,r),Uy(u,n.axisY,i,r));l={};for(u of d)l[u]=Qmt(s.signal,Uy(u,n.axisTop,i,r),Uy(u,n.axisBottom,i,r),Uy(u,n.axisLeft,i,r),Uy(u,n.axisRight,i,r))}else a=s===Bc||s===Xp?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?rr({},i,a,l,o):i}function n0t(e,t,n,r){const i=jl(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Wr},update:a={opacity:Fu},exit:{opacity:Wr}};ia(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Kwe(e,0),f=Kwe(e,1);return s.x=a.x=Rs(o,u,Wr),s.x2=a.x2=Rs(o,f),s.y=a.y=_c(o,u,Wr),s.y2=a.y2=_c(o,f),fu({type:D9,role:Apt,from:r,encode:l},n)}function Kwe(e,t){return{scale:e.scale,range:t}}function r0t(e,t,n,r,i){const o=jl(e,t),s=e.orient,a=e.gridScale,l=kL(s,1,-1),u=i0t(e.offset,l);let f,c,d;const h={enter:f={opacity:Wr},update:d={opacity:Fu},exit:c={opacity:Wr}};ia(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Ru,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=Rs(s,{signal:"height"},{signal:"width"}),b=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:rr(m,{mult:l,offset:u});return f.x=d.x=Rs(s,p,b),f.y=d.y=_c(s,p,b),f.x2=d.x2=_c(s,y),f.y2=d.y2=Rs(s,y),c.x=Rs(s,p),c.y=_c(s,p),fu({type:D9,role:Cpt,key:Ru,from:r,encode:h},n)}function i0t(e,t){if(t!==1)if(!$t(e))e=ys(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=rr({},e);for(;n.mult!=null;)if($t(n.mult))n=n.mult=rr({},n.mult);else return n.mult=ys(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function o0t(e,t,n,r,i,o){const s=jl(e,t),a=e.orient,l=kL(a,-1,1);let u,f,c;const d={enter:u={opacity:Wr},update:c={opacity:Fu},exit:f={opacity:Wr}};ia(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Ls(i);h.mult=l;const p={scale:e.scale,field:Ru,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return c.y=u.y=Rs(a,Wr,p),c.y2=u.y2=Rs(a,h),f.x=Rs(a,p),c.x=u.x=_c(a,Wr,p),c.x2=u.x2=_c(a,h),f.y=_c(a,p),fu({type:D9,role:Tpt,key:Ru,from:r,encode:d},n)}function r4(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function s0t(e,t,n,r,i,o){const s=jl(e,t),a=e.orient,l=e.scale,u=kL(a,-1,1),f=jm(s("labelFlush")),c=jm(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=f===0||!!f,m;const b=Ls(i);b.mult=u,b.offset=Ls(s("labelPadding")||0),b.offset.mult=u;const y={scale:l,field:Ru,band:.5,offset:E5e(o.offset,s("labelOffset"))},v=Rs(a,p?r4(l,f,'"left"','"right"','"center"'):{value:"center"},Wmt(a,"left","right")),w=Rs(a,D5e(a,"bottom","top"),p?r4(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),E=r4(l,f,`-(${c})`,c,0);p=p&&c;const A={opacity:Wr,x:Rs(a,y,b),y:_c(a,y,b)},T={enter:A,update:m={opacity:Fu,text:{field:C9},x:A.x,y:A.y,align:v,baseline:w},exit:{opacity:Wr,x:A.x,y:A.y}};ia(T,{dx:!d&&p?Rs(a,E):null,dy:!h&&p?_c(a,E):null}),ia(T,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const D=s("labelBound");let k=s("labelOverlap");return k=k||D?{separation:s("labelSeparation"),method:k,order:"datum.index",bound:D?{scale:l,orient:a,tolerance:D}:null}:void 0,m.align!==v&&(m.align=Cb(m.align,v)),m.baseline!==w&&(m.baseline=Cb(m.baseline,w)),fu({type:$0,role:kpt,style:IE,key:Ru,from:r,encode:T,overlap:k},n)}function a0t(e,t,n,r){const i=jl(e,t),o=e.orient,s=kL(o,-1,1);let a,l;const u={enter:a={opacity:Wr,anchor:Ls(i("titleAnchor",null)),align:{signal:L9}},update:l=rr({},a,{opacity:Fu,text:Ls(e.title)}),exit:{opacity:Wr}},f={signal:`lerp(range("${e.scale}"), ${SL(0,1,.5)})`};return l.x=Rs(o,f),l.y=_c(o,f),a.angle=Rs(o,Wr,e0t(s,90)),a.baseline=Rs(o,D5e(o,Xp,Bc),{value:Xp}),l.angle=a.angle,l.baseline=a.baseline,ia(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),l0t(i,o,u,n),u.update.align=Cb(u.update.align,a.align),u.update.angle=Cb(u.update.angle,a.angle),u.update.baseline=Cb(u.update.baseline,a.baseline),fu({type:$0,role:Dpt,style:k9,from:r,encode:u},n)}function l0t(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Cb(Ls(a),n.update[l]),!1):!tb(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?Ls(s):Rs(t,Ls(s),Ls(o))}function u0t(e,t){const n=t0t(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=jl(e,n),u=omt(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},c=xn(t.add(Nc({},[f]))),d=xn(t.add(cgt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return f.grid&&h.push(r0t(e,n,r.grid,d,u)),f.ticks&&(p=l("tickSize"),h.push(o0t(e,n,r.ticks,d,p,u))),f.labels&&(p=f.ticks?p:0,h.push(s0t(e,n,r.labels,d,p,u))),f.domain&&h.push(n0t(e,n,r.domain,c)),f.title&&h.push(a0t(e,n,r.title,c)),CL(v_({role:Spt,from:c,encode:av(c0t(l,e),i,PE),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function c0t(e,t){const n={enter:{},update:{}};return ia(n,{orient:e("orient"),offset:e("offset")||0,position:cc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function R5e(e,t,n){const r=Pt(e.signals),i=Pt(e.scales);return n||r.forEach(o=>u5e(o,t)),Pt(e.projections).forEach(o=>Ugt(o,t)),i.forEach(o=>Lgt(o,t)),Pt(e.data).forEach(o=>Gmt(o,t)),i.forEach(o=>Rgt(o,t)),(n||r).forEach(o=>ugt(o,t)),Pt(e.axes).forEach(o=>u0t(o,t)),Pt(e.marks).forEach(o=>CL(o,t)),Pt(e.legends).forEach(o=>Mmt(o,t)),e.title&&zmt(e.title,t),t.parseLambdas(),t}const f0t=e=>av({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function d0t(e,t){const n=t.config,r=xn(t.root=t.add(kk())),i=h0t(e,n);i.forEach(u=>u5e(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Nc()),s=t.add(d5e(l5e(f0t(e.encode),EL,_9,e.style,t,{pulse:xn(o)}))),a=t.add(g5e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:xn(s)}));t.operators.pop(),t.pushState(xn(s),xn(a),null),R5e(e,t,i),t.operators.push(a);let l=t.add(f5e({mark:r,pulse:xn(a)}));return l=t.add(p5e({pulse:xn(l)})),l=t.add(O0({pulse:xn(l)})),t.addData("root",new u0(t,o,o,l)),t}function xw(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function h0t(e,t){const n=s=>cc(e[s],t[s]),r=[xw("background",n("background")),xw("autosize",wpt(n("autosize"))),xw("padding",Ept(n("padding"))),xw("width",n("width")||0),xw("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return Pt(e.signals).forEach(s=>{Yt(i,s.name)?s=rr(i[s.name],s):r.push(s),o[s.name]=s}),Pt(t.signals).forEach(s=>{!Yt(o,s.name)&&!Yt(i,s.name)&&r.push(s)}),r}function F5e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Jwe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}F5e.prototype=Jwe.prototype={parse(e){return R5e(e,this)},fork(){return new Jwe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof y6?xn(e):e;return this.add(Sgt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(xn(this.add(O0({pulse:e})))),this._parent.push(t),this._lookup.push(n?xn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return qr(this._parent)},encode(){return qr(this._encode)},lookup(){return qr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Nt(e))return y_(e,t);e.signal||st("Unsupported field reference: "+Tt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=xn(this.add(pgt(i)))}return r},compareRef(e){let t=!1;const n=o=>ys(o)?(t=!0,this.signalRef(o.signal)):Qpt(o)?(t=!0,this.exprRef(o.expr)):o,r=Pt(e.field).map(n),i=Pt(e.order).map(n);return t?xn(this.add(Nwe({fields:r,orders:i}))):Iwe(r,i)},keyRef(e,t){let n=!1;const r=o=>ys(o)?(n=!0,xn(i[o.signal])):o,i=this.signals;return e=Pt(e).map(r),n?xn(this.add(ggt({fields:e,flat:t}))):Xpt(e,t)},sortRef(e){if(!e)return e;const t=wL(e.op,e.field),n=e.order||Zpt;return n.signal?xn(this.add(Nwe({fields:t,orders:this.signalRef(n.signal)}))):Iwe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Yt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&st("Duplicate signal name: "+Tt(e));const n=t instanceof y6?t:this.add(kk(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||st("Unrecognized signal name: "+Tt(e)),this.signals[e]},signalRef(e){return this.signals[e]?xn(this.signals[e]):(Yt(this.lambdas,e)||(this.lambdas[e]=this.add(kk(null))),xn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Nf(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!$t(e)?e:this.signalRef(e.signal||$9(e))},exprRef(e,t){const n={expr:Nf(e,this)};return t&&(n.expr.$name=t),xn(this.add(dgt(n)))},addBinding(e,t){this.bindings||st("Nested signals do not support binding: "+Tt(e)),this.bindings.push(rr({signal:e},t))},addScaleProj(e,t){Yt(this.scales,e)&&st("Duplicate scale or projection name: "+Tt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Cgt(t))},addProjection(e,t){this.addScaleProj(e,Egt(t))},getScale(e){return this.scales[e]||st("Unrecognized scale name: "+Tt(e)),this.scales[e]},scaleRef(e){return xn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Yt(this.data,e)&&st("Duplicate data set name: "+Tt(e)),this.data[e]=t},getData(e){return this.data[e]||st("Undefined data set name: "+Tt(e)),this.data[e]},addDataPipeline(e,t){return Yt(this.data,e)&&st("Duplicate data set name: "+Tt(e)),this.addData(e,u0.fromEntries(this,t))}};function $9(e){return(at(e)?p0t:g0t)(e)}function p0t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+($t(i)?i.signal||$9(i):Tt(i))}return n+"]"}function g0t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Tt(r)+":"+($t(i)?i.signal||$9(i):Tt(i));return t+"}"}function m0t(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function y0t(e,t,n){return $t(e)||st("Input Vega specification must be an object."),t=J1(m0t(),t,e.config),d0t(e,new F5e(t,n)).toRuntime()}var b0t="5.30.0";rr(e1,get,Hit,_ot,aat,tlt,Tut,aut,Lut,ect,cct,yct);const v0t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:es,CanvasHandler:kE,CanvasRenderer:j3,DATE:Ml,DAY:Sa,DAYOFYEAR:If,Dataflow:Sb,Debug:Nke,Error:fI,EventStream:OD,Gradient:xLe,GroupItem:KD,HOURS:lu,Handler:rN,HybridHandler:fRe,HybridRenderer:AO,Info:Pke,Item:ZD,MILLISECONDS:Dc,MINUTES:uu,MONTH:Ta,Marks:cu,MultiPulse:RI,None:Ike,Operator:Ui,Parameters:MD,Pulse:Mp,QUARTER:Fl,RenderType:wp,Renderer:CE,ResourceLoader:kLe,SECONDS:Iu,SVGHandler:JLe,SVGRenderer:uN,SVGStringRenderer:cRe,Scenegraph:HLe,TIME_UNITS:EI,Transform:rt,View:Z4e,WEEK:gs,Warn:dI,YEAR:ea,accessor:zl,accessorFields:ka,accessorName:Fo,array:Pt,ascending:kD,bandwidthNRD:$I,bin:YTe,bootstrapCI:XTe,boundClip:wRe,boundContext:_E,boundItem:xO,boundMark:zLe,boundStroke:ph,changeset:R0,clampRange:Xke,codegenExpression:E4e,compare:yI,constant:Fa,cumulativeLogNormal:jI,cumulativeNormal:ID,cumulativeUniform:GI,dayofyear:lTe,debounce:bI,defaultLocale:CI,definition:GTe,densityLogNormal:zI,densityNormal:II,densityUniform:HI,domChild:hs,domClear:Eu,domCreate:vp,domFind:nN,dotbin:ZTe,error:st,expressionFunction:jo,extend:rr,extent:$f,extentIndex:Zke,falsy:Qh,fastmap:ev,field:Ou,flush:Kke,font:nL,fontFamily:AE,fontSize:Wf,format:mC,formatLocale:S3,formats:DI,hasOwnProperty:Yt,id:cE,identity:Ra,inferType:OTe,inferTypes:$Te,ingest:yi,inherits:Lt,inrange:fb,interpolate:MP,interpolateColors:YD,interpolateRange:sLe,intersect:yRe,intersectBoxLine:db,intersectPath:jP,intersectPoint:UP,intersectRule:DLe,isArray:at,isBoolean:lg,isDate:Fp,isFunction:ir,isIterable:Jke,isNumber:li,isObject:$t,isRegExp:Qke,isString:Nt,isTuple:RD,key:vI,lerp:eTe,lineHeight:Vp,loader:DD,locale:FTe,logger:hI,lruCache:tTe,markup:lN,merge:nTe,mergeConfig:J1,multiLineOffset:QP,one:K1,pad:rTe,panLinear:qke,panLog:Hke,panPow:Gke,panSymlog:Vke,parse:y0t,parseExpression:l9,parseSelector:cg,path:jD,pathCurves:NP,pathEqual:_Re,pathParse:o1,pathRectangle:ELe,pathRender:o_,pathSymbols:_Le,pathTrail:SLe,peek:qr,point:iL,projection:TN,quantileLogNormal:UI,quantileNormal:PD,quantileUniform:VI,quantiles:MI,quantizeInterpolator:aLe,quarter:Wke,quartiles:OI,get random(){return Pu},randomInteger:bQe,randomKDE:NI,randomLCG:yQe,randomLogNormal:JTe,randomMixture:QTe,randomNormal:PI,randomUniform:eDe,read:NTe,regressionConstant:WI,regressionExp:nDe,regressionLinear:YI,regressionLoess:oDe,regressionLog:tDe,regressionPoly:iDe,regressionPow:rDe,regressionQuad:XI,renderModule:oL,repeat:$w,resetDefaultLocale:pJe,resetSVGClipId:CLe,resetSVGDefIds:lit,responseType:PTe,runtimeContext:P4e,sampleCurve:BD,sampleLogNormal:BI,sampleNormal:$D,sampleUniform:qI,scale:ui,sceneEqual:cN,sceneFromJSON:ULe,scenePickVisit:M3,sceneToJSON:jLe,sceneVisit:Lc,sceneZOrder:qP,scheme:OP,serializeXML:sRe,setHybridRendererOptions:iit,setRandom:gQe,span:fE,splitAccessPath:Gf,stringValue:Tt,textMetrics:nu,timeBin:ATe,timeFloor:gTe,timeFormatLocale:n_,timeInterval:tv,timeOffset:bTe,timeSequence:wTe,timeUnitSpecifier:aTe,timeUnits:SI,toBoolean:xI,toDate:wI,toNumber:Aa,toSet:Tc,toString:_I,transform:VTe,transforms:e1,truncate:iTe,truthy:$u,tupleid:wn,typeParsers:uO,utcFloor:mTe,utcInterval:nv,utcOffset:vTe,utcSequence:_Te,utcdayofyear:fTe,utcquarter:Yke,utcweek:dTe,version:b0t,visitArray:rp,week:uTe,writeConfig:Q1,zero:fp,zoomLinear:pI,zoomLog:gI,zoomPow:E3,zoomSymlog:mI},Symbol.toStringTag,{value:"Module"}));function x0t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var w0t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},_0t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},E0t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const S0t=Array.prototype.slice,om=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,S0t.call(t,1))},A0t=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var C0t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:A0t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return om("join",arguments)},indexof:function(){return om("indexOf",arguments)},lastindexof:function(){return om("lastIndexOf",arguments)},slice:function(){return om("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return om("substring",arguments,String)},split:function(){return om("split",arguments,String)},replace:function(){return om("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const k0t=["view","item","group","xy","x","y"],S6=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&S6.add(setImmediate);const T0t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:w0t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),S6.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||C0t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>_0t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>E0t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,S6.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function ww(e,t,n,r,i,o){const s=a=>T0t[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,k0t.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var D0t={operator(e,t){const n=t.ast,r=e.functions;return i=>ww(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>ww(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>ww(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return ww(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,f;for(const c in r)f=ww(r[c].ast,i,a,l,void 0,s),s[c]!==f&&(s[c]=f,u=1);return n!=="rule"&&x0t(s,r,o),u}}};const L0t="vega-lite",R0t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',F0t="5.23.0",M0t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],O0t="https://vega.github.io/vega-lite/",$0t="Vega-Lite is a concise high-level language for interactive visualization.",I0t=["vega","chart","visualization"],P0t="build/vega-lite.js",N0t="build/vega-lite.min.js",B0t="build/vega-lite.min.js",z0t="build/src/index",j0t="build/src/index.d.ts",U0t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},q0t=["bin","build","src","vega-lite*","tsconfig.json"],H0t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},G0t={type:"git",url:"https://github.com/vega/vega-lite.git"},V0t="BSD-3-Clause",W0t={url:"https://github.com/vega/vega-lite/issues"},Y0t={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},X0t={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},Z0t={vega:"^5.24.0"},K0t={node:">=18"},J0t="yarn@1.22.22",Q0t={name:L0t,author:R0t,version:F0t,collaborators:M0t,homepage:O0t,description:$0t,keywords:I0t,main:P0t,unpkg:N0t,jsdelivr:B0t,module:z0t,types:j0t,bin:U0t,files:q0t,scripts:H0t,repository:G0t,license:V0t,bugs:W0t,devDependencies:Y0t,dependencies:X0t,peerDependencies:Z0t,engines:K0t,packageManager:J0t};function I9(e){return St(e,"or")}function P9(e){return St(e,"and")}function N9(e){return St(e,"not")}function zC(e,t){if(N9(e))zC(e.not,t);else if(P9(e))for(const n of e.and)zC(n,t);else if(I9(e))for(const n of e.or)zC(n,t);else t(e)}function kb(e,t){return N9(e)?{not:kb(e.not,t)}:P9(e)?{and:e.and.map(n=>kb(n,t))}:I9(e)?{or:e.or.map(n=>kb(n,t))}:t(e)}const Gn=structuredClone;function M5e(e){throw new Error(e)}function p1(e,t){const n={};for(const r of t)Yt(e,r)&&(n[r]=e[r]);return n}function Ll(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ii(e)).join(",")})`};function Mr(e){if(li(e))return e;const t=Nt(e)?e:Ii(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function A6(e){return e===!1||e===null}function _r(e,t){return e.includes(t)}function g1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function B9(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function O5e(e,...t){for(const n of t)eyt(e,n??{});return e}function eyt(e,t){for(const n of _t(t))Q1(e,n,t[n],!0)}function xf(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function tyt(e,t){const n=_t(e),r=_t(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function $5e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function z9(e,t){for(const n of e)if(t.has(n))return!0;return!1}function C6(e){const t=new Set;for(const n of e){const i=Gf(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function j9(e,t){return e===void 0||t===void 0?!0:z9(C6(e),C6(t))}function $i(e){return _t(e).length===0}const _t=Object.keys,ta=Object.values,Zp=Object.entries;function x_(e){return e===!0||e===!1}function co(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function T2(e,t){return N9(e)?`!(${T2(e.not,t)})`:P9(e)?`(${e.and.map(n=>T2(n,t)).join(") && (")})`:I9(e)?`(${e.or.map(n=>T2(n,t)).join(") || (")})`:t(e)}function Tk(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Tk(e[n],t)&&delete e[n],$i(e)}function NE(e){return e.charAt(0).toUpperCase()+e.substr(1)}function U9(e,t="datum"){const n=Gf(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(Tt).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function I5e(e,t="datum"){return`${t}[${Tt(Gf(e).join("."))}]`}function ki(e){return`datum['${e.replaceAll("'","\\'")}']`}function nyt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Bu(e){return`${Gf(e).map(nyt).join("\\.")}`}function c0(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function cv(e){return`${Gf(e).join(".")}`}function m1(e){return e?Gf(e).length:0}function Bo(...e){return e.find(t=>t!==void 0)}let P5e=42;function N5e(e){const t=++P5e;return e?String(e)+t:t}function ryt(){P5e=42}function B5e(e){return z5e(e)?e:`__${e}`}function z5e(e){return e.startsWith("__")}function w_(e){if(e!==void 0)return(e%360+360)%360}function TL(e){return li(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Qwe=Object.getPrototypeOf(structuredClone({}));function Jl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Jl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Jl(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Qwe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Qwe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Jl(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ii(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function St(e,t){return $t(e)&&Yt(e,t)&&e[t]!==void 0}const Yd="row",Xd="column",DL="facet",fo="x",Is="y",zc="x2",Kf="y2",fg="xOffset",fv="yOffset",jc="radius",mh="radius2",qu="theta",yh="theta2",Uc="latitude",qc="longitude",Hc="latitude2",zu="longitude2",dg="time",$l="color",Jf="fill",Qf="stroke",Il="shape",bh="size",I0="angle",vh="opacity",hg="fillOpacity",pg="strokeOpacity",gg="strokeWidth",mg="strokeDash",BE="text",y1="order",zE="detail",LL="key",f0="tooltip",RL="href",FL="url",ML="description",iyt={x:1,y:1,x2:1,y2:1},j5e={theta:1,theta2:1,radius:1,radius2:1};function U5e(e){return Yt(j5e,e)}const q9={longitude:1,longitude2:1,latitude:1,latitude2:1};function q5e(e){switch(e){case Uc:return"y";case Hc:return"y2";case qc:return"x";case zu:return"x2"}}function H5e(e){return Yt(q9,e)}const oyt=_t(q9),H9={...iyt,...j5e,...q9,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Tb(e){return e===$l||e===Jf||e===Qf}const G5e={row:1,column:1,facet:1},Lu=_t(G5e),G9={...H9,...G5e},syt=_t(G9),{order:nUt,detail:rUt,tooltip:iUt,...ayt}=G9,{row:oUt,column:sUt,facet:aUt,...lyt}=ayt;function uyt(e){return Yt(lyt,e)}function V5e(e){return Yt(G9,e)}const cyt=[zc,Kf,Hc,zu,yh,mh];function W5e(e){return P0(e)!==e}function P0(e){switch(e){case zc:return fo;case Kf:return Is;case Hc:return Uc;case zu:return qc;case yh:return qu;case mh:return jc}return e}function Kp(e){if(U5e(e))switch(e){case qu:return"startAngle";case yh:return"endAngle";case jc:return"outerRadius";case mh:return"innerRadius"}return e}function ed(e){switch(e){case fo:return zc;case Is:return Kf;case Uc:return Hc;case qc:return zu;case qu:return yh;case jc:return mh}}function Pl(e){switch(e){case fo:case zc:return"width";case Is:case Kf:return"height"}}function Y5e(e){switch(e){case fo:return"xOffset";case Is:return"yOffset";case zc:return"x2Offset";case Kf:return"y2Offset";case qu:return"thetaOffset";case jc:return"radiusOffset";case yh:return"theta2Offset";case mh:return"radius2Offset"}}function V9(e){switch(e){case fo:return"xOffset";case Is:return"yOffset"}}function fyt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const dyt=_t(H9),{x:lUt,y:uUt,x2:cUt,y2:fUt,xOffset:dUt,yOffset:hUt,latitude:pUt,longitude:gUt,latitude2:mUt,longitude2:yUt,theta:bUt,theta2:vUt,radius:xUt,radius2:wUt,...W9}=H9,hyt=_t(W9),Y9={x:1,y:1},xh=_t(Y9);function zo(e){return Yt(Y9,e)}const X9={theta:1,radius:1},pyt=_t(X9);function OL(e){return e==="width"?fo:Is}const X5e={xOffset:1,yOffset:1};function jE(e){return Yt(X5e,e)}const gyt={time:1};function i4(e){return e in gyt}const{text:_Ut,tooltip:EUt,href:SUt,url:AUt,description:CUt,detail:kUt,key:TUt,order:DUt,...Z5e}=W9,myt=_t(Z5e);function yyt(e){return Yt(W9,e)}function byt(e){switch(e){case $l:case Jf:case Qf:case bh:case Il:case vh:case gg:case mg:return!0;case hg:case pg:case I0:case dg:return!1}}const K5e={...Y9,...X9,...X5e,...Z5e},Z9=_t(K5e);function td(e){return Yt(K5e,e)}function vyt(e,t){return wyt(e)[t]}const J5e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:LUt,...xyt}=J5e;function wyt(e){switch(e){case $l:case Jf:case Qf:case ML:case zE:case LL:case f0:case RL:case y1:case vh:case hg:case pg:case gg:case DL:case Yd:case Xd:return J5e;case fo:case Is:case fg:case fv:case Uc:case qc:case dg:return xyt;case zc:case Kf:case Hc:case zu:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case bh:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case mg:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Il:return{point:"always",geoshape:"always"};case BE:return{text:"always"};case I0:return{point:"always",square:"always",text:"always"};case FL:return{image:"always"};case qu:return{text:"always",arc:"always"};case jc:return{text:"always",arc:"always"};case yh:case mh:return{arc:"always"}}}function o4(e){switch(e){case fo:case Is:case qu:case jc:case fg:case fv:case bh:case I0:case gg:case vh:case hg:case pg:case dg:case zc:case Kf:case yh:case mh:return;case DL:case Yd:case Xd:case Il:case mg:case BE:case f0:case RL:case FL:case ML:return"discrete";case $l:case Jf:case Qf:return"flexible";case Uc:case qc:case Hc:case zu:case zE:case LL:case y1:return}}const _yt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Eyt={count:1,min:1,max:1};function oh(e){return St(e,"argmin")}function yg(e){return St(e,"argmax")}function K9(e){return Nt(e)&&Yt(_yt,e)}const Syt=new Set(["count","valid","missing","distinct"]);function $L(e){return Nt(e)&&Syt.has(e)}function Ayt(e){return Nt(e)&&_r(["min","max"],e)}const Cyt=new Set(["count","sum","distinct","valid","missing"]),kyt=new Set(["mean","average","median","q1","q3","min","max"]);function Q5e(e){return lg(e)&&(e=WL(e,void 0)),"bin"+_t(e).map(t=>IL(e[t])?co(`_${t}_${Zp(e[t])}`):co(`_${t}_${e[t]}`)).join("")}function Zi(e){return e===!0||N0(e)&&!e.binned}function Ws(e){return e==="binned"||N0(e)&&e.binned===!0}function N0(e){return $t(e)}function IL(e){return St(e,"param")}function e2e(e){switch(e){case Yd:case Xd:case bh:case $l:case Jf:case Qf:case gg:case vh:case hg:case pg:case Il:return 6;case mg:return 4;default:return 10}}function UE(e){return St(e,"expr")}function Ys(e,{level:t}={level:0}){const n=_t(e||{}),r={};for(const i of n)r[i]=t===0?Xl(e[i]):Ys(e[i],{level:t-1});return r}function eMe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:f,subtitleFontStyle:c,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,b={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...f?{subtitleFontSize:f}:{},...c?{subtitleFontStyle:c}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=p1(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:b,subtitleMarkConfig:w,nonMarkTitleProperties:y,subtitle:v}}function ap(e){return Nt(e)||at(e)&&Nt(e[0])}function cn(e){return St(e,"signal")}function B0(e){return St(e,"step")}function Tyt(e){return at(e)?!1:St(e,"fields")&&!St(e,"data")}function Dyt(e){return at(e)?!1:St(e,"fields")&&St(e,"data")}function zd(e){return at(e)?!1:St(e,"field")&&St(e,"data")}const Lyt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Ryt=_t(Lyt),Fyt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},k6=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function tMe(e){const t=at(e.condition)?e.condition.map(t2e):t2e(e.condition);return{...Xl(e),condition:t}}function Xl(e){if(UE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function t2e(e){if(UE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function oo(e){if(UE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return cn(e)?e:e!==void 0?{value:e}:void 0}function Myt(e){return cn(e)?e.signal:Tt(e)}function n2e(e){return cn(e)?e.signal:Tt(e.value)}function vc(e){return cn(e)?e.signal:e==null?null:Tt(e)}function Oyt(e,t,n){for(const r of n){const i=Bf(r,t.markDef,t.config);i!==void 0&&(e[r]=oo(i))}return e}function nMe(e){return[].concat(e.type,e.style??[])}function Oi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&St(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Bf(e,t,n,r)}function Bf(e,t,n,{vgChannel:r}={}){const i=T6(e,t,n.style);return Bo(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function T6(e,t,n){return rMe(e,nMe(t),n)}function rMe(e,t,n){t=Pt(t);let r;for(const i of t){const o=n[i];St(o,e)&&(r=o[e])}return r}function iMe(e,t){return Pt(e).reduce((n,r)=>(n.field.push(Ft(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function oMe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Jl(i,r))return;n.push(r)}),n}function sMe(e,t){return Jl(e,t)||!t?e:e?[...Pt(e),...Pt(t)].join(", "):t}function aMe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ap(n)||cn(n))&&(ap(r)||cn(r)))return{explicit:e.explicit,value:sMe(n,r)};if(ap(n)||cn(n))return{explicit:e.explicit,value:n};if(ap(r)||cn(r))return{explicit:e.explicit,value:r};if(!ap(n)&&!cn(n)&&!ap(r)&&!cn(r))return{explicit:e.explicit,value:oMe(n,r)};throw new Error("It should never reach here")}function J9(e){return`Invalid specification ${Ii(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const $yt='Autosize "fit" only works for single views and layered views.';function r2e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function i2e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function o2e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Pl(e)}.`:'Dropping "fit" because spec has discrete size.'}function Q9(e){return`Unknown field for ${e}. Cannot calculate view size.`}function s2e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Iyt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Pyt(e){return`The "nearest" transform is not supported for ${e} marks.`}function lMe(e){return`Selection not supported for ${e} yet.`}function Nyt(e){return`Cannot find a selection named "${e}".`}const Byt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",zyt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",jyt="Legend bindings are only supported for selections over an individual field or encoding channel.";function Uyt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function qyt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Hyt="The same selection must be used to override scale domains in a layered view.",Gyt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Vyt(e){return`Unknown repeated value "${e}".`}function a2e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Wyt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",e7="Animation involving facet, layer, or concat is currently unsupported.";function Yyt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Tt(e)}.`}function Xyt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Tt(t)} encoding found for selection ${Tt(n.param)}. Using "field": ${Tt(r)}.`}const Zyt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Kyt(e){return`Unrecognized parse "${e}".`}function l2e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Jyt="Attempt to add the same child twice.";function Qyt(e){return`Ignoring an invalid transform: ${Ii(e)}.`}const ebt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function u2e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function tbt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ii(t)} is overridden by a child projection ${Ii(n)}.`}const nbt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function rbt(e){return`${e}Offset dropped because ${e} is continuous`}function ibt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ii(n)}}.`}function uMe(e){return`Invalid field type "${e}".`}function obt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function sbt(e){return`Invalid aggregation operator "${e}".`}function cMe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function abt(e){return`Position range does not support relative band size for ${e}.`}function D6(e,t){return`Dropping ${Ii(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const lbt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function PL(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function ubt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function cbt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function fbt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function dbt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function s4(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function hbt(e){return`The ${e} for range marks cannot be an expression`}function pbt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function gbt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function mbt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function ybt(e){return`Cannot use the relative band size with ${e} scale.`}function bbt(e){return`Using unaggregated domain with raw field has no effect (${Ii(e)}).`}function vbt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function xbt(e){return`Unaggregated domain is currently unsupported for log scale (${Ii(e)}).`}function wbt(e){return`Cannot apply size to non-oriented mark "${e}".`}function _bt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Ebt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function fMe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function dMe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Sbt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ii(n)} and ${Ii(r)}). Using ${Ii(n)}.`}function Abt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ii(n)} and ${Ii(r)}). Using the union of the two domains.`}function Cbt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function kbt(e){return`Dropping sort property ${Ii(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const c2e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Tbt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Dbt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Lbt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Rbt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Fbt(e){return`Stack is applied to a non-linear scale (${e}).`}function Mbt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Dk(e,t){return`Invalid ${e}: ${Ii(t)}.`}function Obt(e){return`Dropping day from datetime ${Ii(e)} as day cannot be combined with other units.`}function $bt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Ibt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Pbt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function f2e(e){return`1D error band does not support ${e}.`}function hMe(e){return`Channel ${e} is required for "binned" bin.`}function Nbt(e){return`Channel ${e} should not be used with "binned" bin.`}function Bbt(e){return`Domain for ${e} is required for threshold scale.`}const pMe=hI(dI);let d0=pMe;function zbt(e){return d0=e,d0}function jbt(){return d0=pMe,d0}function t7(...e){d0.error(...e)}function Ct(...e){d0.warn(...e)}function Ubt(...e){d0.debug(...e)}function z0(e){if(e&&$t(e)){for(const t of r7)if(St(e,t))return!0}return!1}const gMe=["january","february","march","april","may","june","july","august","september","october","november","december"],qbt=gMe.map(e=>e.substr(0,3)),mMe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Hbt=mMe.map(e=>e.substr(0,3));function Gbt(e){if(TL(e)&&(e=+e),li(e))return e>4&&Ct(Dk("quarter",e)),e-1;throw new Error(Dk("quarter",e))}function Vbt(e){if(TL(e)&&(e=+e),li(e))return e-1;{const t=e.toLowerCase(),n=gMe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=qbt.indexOf(r);if(i!==-1)return i;throw new Error(Dk("month",e))}}function Wbt(e){if(TL(e)&&(e=+e),li(e))return e%7;{const t=e.toLowerCase(),n=mMe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Hbt.indexOf(r);if(i!==-1)return i;throw new Error(Dk("day",e))}}function n7(e,t){const n=[];if(t&&e.day!==void 0&&_t(e).length>1&&(Ct(Obt(e)),e=Gn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Vbt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Gbt(e.quarter):e.quarter;n.push(li(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Wbt(e.day):e.day;n.push(li(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function h0(e){const n=n7(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ybt(e){const n=n7(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Xbt(e){const t=n7(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const yMe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},r7=_t(yMe);function Zbt(e){return Yt(yMe,e)}function j0(e){return $t(e)?e.binned:bMe(e)}function bMe(e){return e&&e.startsWith("binned")}function i7(e){return e.startsWith("utc")}function Kbt(e){return e.substring(3)}const Jbt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function NL(e){return r7.filter(t=>xMe(e,t))}function vMe(e){const t=NL(e);return t[t.length-1]}function xMe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Qbt(e,t,{end:n}={end:!1}){const r=U9(t),i=i7(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of r7)xMe(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),Ybt(a)}function wMe(e){if(!e)return;const t=NL(e);return`timeUnitSpecifier(${Ii(t)}, ${Ii(Jbt)})`}function e1t(e,t,n){if(!e)return;const r=wMe(e);return`${n||i7(e)?"utc":"time"}Format(${t}, ${r})`}function Fs(e){if(!e)return;let t;return Nt(e)?bMe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:$t(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),i7(t.unit)&&(t.utc=!0,t.unit=Kbt(t.unit)),t}function t1t(e){const{utc:t,...n}=Fs(e);return n.unit?(t?"utc":"")+_t(n).map(r=>co(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+_t(n).map(r=>co(`_${r}_${n[r]}`)).join("")}function _Me(e,t=n=>n){const n=Fs(e),r=vMe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=EMe(r,n.step),a={...i,[s]:+i[s]+o};return`${t(h0(a))} - ${t(h0(i))}`}}const n1t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function r1t(e){return Yt(n1t,e)}function EMe(e,t=1){if(r1t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function i1t(e){return St(e,"param")}function o7(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function s7(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function a7(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function l7(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function u7(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function c7(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(cn(e.range))return!0}return!1}function f7(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function o1t(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function SMe(e){return f7(e)||o7(e)||c7(e)||s7(e)||l7(e)||a7(e)||u7(e)}function uf(e,t){return YL(e,{timeUnit:t,wrapTime:!0})}function s1t(e,t){return e.map(n=>uf(n,t))}function AMe(e,t=!0){const{field:n}=e,r=Fs(e.timeUnit),{unit:i,binned:o}=r||{},s=Ft(e,{expr:"datum"}),a=i?`time(${o?s:Qbt(i,n)})`:s;if(o7(e))return`${a}===${uf(e.equal,i)}`;if(s7(e)){const l=e.lt;return`${a}<${uf(l,i)}`}else if(l7(e)){const l=e.gt;return`${a}>${uf(l,i)}`}else if(a7(e)){const l=e.lte;return`${a}<=${uf(l,i)}`}else if(u7(e)){const l=e.gte;return`${a}>=${uf(l,i)}`}else{if(f7(e))return`indexof([${s1t(e.oneOf,i).join(",")}], ${a}) !== -1`;if(o1t(e))return BL(a,e.valid);if(c7(e)){const{range:l}=Ys(e),u=cn(l)?{signal:`${l.signal}[0]`}:l[0],f=cn(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&f!==null&&t)return"inrange("+a+", ["+uf(u,i)+", "+uf(f,i)+"])";const c=[];return u!==null&&c.push(`${a} >= ${uf(u,i)}`),f!==null&&c.push(`${a} <= ${uf(f,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ii(e)}`)}function BL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function a1t(e){return SMe(e)&&e.timeUnit?{...e,timeUnit:Fs(e.timeUnit)}:e}const qE={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function l1t(e){return e==="quantitative"||e==="temporal"}function CMe(e){return e==="ordinal"||e==="nominal"}const p0=qE.quantitative,d7=qE.ordinal,b1=qE.temporal,h7=qE.nominal,dv=qE.geojson;function u1t(e){if(e)switch(e=e.toLowerCase(),e){case"q":case p0:return"quantitative";case"t":case b1:return"temporal";case"o":case d7:return"ordinal";case"n":case h7:return"nominal";case dv:return"geojson"}}const Xs={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},L6={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function c1t(e,t){const n=L6[e],r=L6[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const f1t={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function d2e(e){return f1t[e]}const kMe=new Set(["linear","log","pow","sqrt","symlog"]),TMe=new Set([...kMe,"time","utc"]);function DMe(e){return kMe.has(e)}const LMe=new Set(["quantile","quantize","threshold"]),d1t=new Set([...TMe,...LMe,"sequential","identity"]),h1t=new Set(["ordinal","bin-ordinal","point","band"]);function Os(e){return h1t.has(e)}function Rc(e){return d1t.has(e)}function wf(e){return TMe.has(e)}function v1(e){return LMe.has(e)}const p1t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function g1t(e){return!Nt(e)&&St(e,"name")}function RMe(e){return St(e,"param")}function m1t(e){return St(e,"unionWith")}function y1t(e){return $t(e)&&"field"in e}const b1t={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:RUt,domain:FUt,range:MUt,rangeMax:OUt,rangeMin:$Ut,scheme:IUt,...v1t}=b1t,x1t=_t(v1t);function R6(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return wf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return wf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return wf(e);case"nice":return wf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Rc(e)&&!_r(["log","time","utc","threshold","quantile"],e)}}function FMe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Tb(e)?void 0:mbt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function w1t(e,t){return _r([d7,h7],t)?e===void 0||Os(e):t===b1?_r([Xs.TIME,Xs.UTC,void 0],e):t===p0?DMe(e)||v1(e)||e===void 0:!0}function _1t(e,t,n=!1){if(!td(e))return!1;switch(e){case fo:case Is:case fg:case fv:case qu:case jc:return wf(t)||t==="band"?!0:t==="point"?!n:!1;case dg:return _r(["linear","band"],t);case bh:case gg:case vh:case hg:case pg:case I0:return wf(t)||v1(t)||_r(["band","point","ordinal"],t);case $l:case Jf:case Qf:return t!=="band";case mg:case Il:return t==="ordinal"||v1(t)}}function E1t(e){return $t(e)&&"value"in e}const ol={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},MMe=ol.arc,zL=ol.area,jL=ol.bar,S1t=ol.image,UL=ol.line,qL=ol.point,A1t=ol.rect,Lk=ol.rule,OMe=ol.text,p7=ol.tick,C1t=ol.trail,g7=ol.circle,m7=ol.square,$Me=ol.geoshape;function bg(e){return["line","area","trail"].includes(e)}function __(e){return["rect","bar","image","arc","tick"].includes(e)}const k1t=new Set(_t(ol));function zf(e){return St(e,"type")}const T1t=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],D1t=["fill","fillOpacity"],L1t=[...T1t,...D1t],R1t={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},h2e=_t(R1t),a4=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],F1t={area:["line","point"],bar:a4,rect:a4,line:["point"],tick:["bandSize","thickness",...a4]},M1t={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},O1t={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},IMe=_t(O1t);function g0(e){return St(e,"band")}const $1t={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},I1t=5,y7={binSpacing:0,continuousBandSize:I1t,minBandSize:.25,timeUnitBandPosition:.5},P1t={...y7,binSpacing:1},N1t={...y7,thickness:1};function B1t(e){return zf(e)?e.type:e}function PMe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function b7({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Rc(r)||i)return"always-valid";const o=PMe(Oi("invalid",e,t),{isPath:bg(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function z1t(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function NMe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function BMe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var f;const s=n==null?void 0:n.get("type"),a=Mc(t),l=$L(a==null?void 0:a.aggregate),u=b7({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const c=((f=o.scale.invalid)==null?void 0:f[e])??"zero-or-min";return{test:BL(Ft(a,{expr:"datum"}),!1),...j1t(c,n,r)}}}function j1t(e,t,n){if(E1t(e)){const{value:r}=e;return cn(r)?{signal:r.signal}:{value:r}}return NMe({scale:t,scaleName:n,mode:"zeroOrMin"})}function v7(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=P0(t),l=x7(e),u=BMe({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function U1t(e){const{datum:t}=e;return z0(t)?h0(t):`${Ii(t)}`}function Um(e,t,n,r){const i={};if(t&&(i.scale=t),nd(e)){const{datum:o}=e;z0(o)?i.signal=h0(o):cn(o)?i.signal=o.signal:UE(o)?i.signal=o.expr:i.value=o}else i.field=Ft(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function Rk({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!cn(s)&&0<s&&s<1?"datum":void 0,l=Ft(t,{expr:a,suffix:i}),u=n!==void 0?Ft(n,{expr:a}):Ft(t,{suffix:o,expr:a}),f={};if(s===0||s===1){f.scale=e;const c=s===0?l:u;f.field=c}else{const c=cn(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;f.signal=`scale("${e}", ${c})`}return r&&(f.offset=r),f}function q1t({scaleName:e,fieldDef:t}){const n=Ft(t,{expr:"datum"}),r=Ft(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function x7({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:f}){if(t){if(Wn(t)){const c=s==null?void 0:s.get("type");if(nl(t)){f??(f=Jp({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Zi(d)||f&&h&&p===b1)return a!=null&&a.impute?Um(t,o,{binSuffix:"mid"},{offset:l}):f&&!Os(c)?Rk({scaleName:o,fieldOrDatumDef:t,bandPosition:f,offset:l}):Um(t,o,YE(t,e)?{binSuffix:"range"}:{},{offset:l});if(Ws(d)){if(kt(n))return Rk({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});Ct(hMe(e===fo?zc:Kf))}}return Um(t,o,Os(c)?{binSuffix:"range"}:{},{offset:l,band:c==="band"?f??t.bandPosition??.5:void 0})}else if(Fc(t)){const c=t.value,d=l?{offset:l}:{};return{...D2(e,c),...d}}}return ir(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function D2(e,t){return _r(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:_r(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:oo(t)}function m0(e){return e&&e!=="number"&&e!=="time"}function zMe(e,t,n){return`${e}(${t}${n?`, ${Ii(n)}`:""})`}const H1t="  ";function w7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(m0(n))return xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=jMe(e,r,i),a=x1(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return xc({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return xc({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&kt(e)&&e.timeUnit===void 0)return xc({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(_1(e)){const f=V1t({field:s,timeUnit:kt(e)?(l=Fs(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:U0(e)&&((u=e.scale)==null?void 0:u.type)===Xs.UTC});return f?{signal:f}:void 0}if(t=F6({type:a,specifiedFormat:t,config:o,normalizeStack:i}),kt(e)&&Zi(e.bin)){const f=Ft(e,{expr:r,binSuffix:"end"});return{signal:HE(s,f,t,n,o)}}else return t||x1(e)==="quantitative"?{signal:`${HMe(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function jMe(e,t,n){return kt(e)?n?`${Ft(e,{expr:t,suffix:"end"})}-${Ft(e,{expr:t,suffix:"start"})}`:Ft(e,{expr:t}):U1t(e)}function xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=jMe(e,r,i)),s!=="datum.value"&&kt(e)&&Zi(e.bin)){const a=Ft(e,{expr:r,binSuffix:"end"});return{signal:HE(s,a,t,n,o)}}return{signal:zMe(n,s,t)}}function UMe(e,t,n,r,i,o){var s;if(!(Nt(r)&&m0(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&x1(e)==="quantitative"&&(i.normalizedNumberFormatType&&w1(e)&&e.stack==="normalize"||i.numberFormatType))){if(w1(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return F6({type:"quantitative",config:i,normalizeStack:!0});if(_1(e)){const a=kt(e)?(s=Fs(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:G1t({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return F6({type:t,specifiedFormat:n,config:i})}}function qMe(e,t,n){var r;if(e&&(cn(e)||e==="number"||e==="time"))return e;if(_1(t)&&n!=="time"&&n!=="utc")return kt(t)&&((r=Fs(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function F6({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Nt(t))return t;if(e===p0)return r?n.normalizedNumberFormat:n.numberFormat}function G1t({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:wMe(t)}:r?void 0:n.timeFormat)}function HMe(e,t){return`format(${e}, "${t||""}")`}function p2e(e,t,n,r){return m0(n)?zMe(n,e,t):HMe(e,(Nt(t)?t:void 0)??r.numberFormat)}function HE(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return HE(e,t,i.numberFormat,i.numberFormatType,i);const o=p2e(e,n,r,i),s=p2e(t,n,r,i);return`${BL(e,!1)} ? "null" : ${o} + "${H1t}" + ${s}`}function V1t({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Nt(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):e1t(t,e,o)}const HL="min",W1t={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function g2e(e){return Yt(W1t,e)}function Y1t(e){return St(e,"encoding")}function Zd(e){return e&&(e.op==="count"||St(e,"field"))}function GMe(e){return e&&at(e)}function GE(e){return St(e,"row")||St(e,"column")}function _7(e){return St(e,"header")}function GL(e){return St(e,"facet")}function X1t(e){return St(e,"param")}function Z1t(e){return!Nt(e)&&St(e,"repeat")}function m2e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function E7(e){return St(e,"sort")}function Jp({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Wn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(kt(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Bf("timeUnitBandPosition",n,r);if(Zi(o))return .5}}function VMe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,f,c;const a=Pl(e),l=Oi(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(kt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Bf("timeUnitBandSize",r,i)};if(Zi(h)&&!Os(o))return{band:1}}if(__(r.type))return o?Os(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(f=i[r.type])==null?void 0:f.continuousBandSize:(c=i[r.type])==null?void 0:c.discreteBandSize}function WMe(e,t,n,r){return Zi(e.bin)||e.timeUnit&&nl(e)&&e.type==="temporal"?Jp({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function YMe(e){return St(e,"sort")&&!St(e,"field")}function VE(e){return St(e,"condition")}function VL(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&kt(t)}function WE(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Wn(t)}function K1t(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||Fc(t))}function kt(e){return St(e,"field")||(e==null?void 0:e.aggregate)==="count"}function x1(e){return e==null?void 0:e.type}function nd(e){return St(e,"datum")}function Cp(e){return nl(e)&&!Mk(e)||Fk(e)}function y2e(e){return nl(e)&&e.type==="quantitative"&&!e.bin||Fk(e)}function Fk(e){return nd(e)&&li(e.datum)}function Wn(e){return kt(e)||nd(e)}function nl(e){return e&&(St(e,"field")||e.aggregate==="count")&&St(e,"type")}function Fc(e){return St(e,"value")}function U0(e){return St(e,"scale")||St(e,"sort")}function w1(e){return St(e,"axis")||St(e,"stack")||St(e,"impute")}function XMe(e){return St(e,"legend")}function ZMe(e){return St(e,"format")||St(e,"formatType")}function J1t(e){return Ll(e,["legend","axis","header","scale"])}function Q1t(e){return St(e,"op")}function Ft(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(tvt(e))n=B5e("count");else{let s;if(!t.nofn)if(Q1t(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Zi(a)?(s=Q5e(a),i=(t.binSuffix??"")+(t.suffix??"")):l?yg(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):oh(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!j0(u)&&(s=t1t(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?cv(n):t.expr?I5e(n,t.expr)+o:Bu(n)+o}function Mk(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return kt(e)&&!!e.bin;case"temporal":return!1}throw new Error(uMe(e.type))}function evt(e){var t;return U0(e)&&v1((t=e.scale)==null?void 0:t.type)}function tvt(e){return e.aggregate==="count"}function nvt(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Zi(r))return`${n} (binned)`;if(i&&!j0(i)){const a=(s=Fs(i))==null?void 0:s.unit;if(a)return`${n} (${NL(a).join("-")})`}else if(o)return yg(o)?`${n} for max ${o.argmax}`:oh(o)?`${n} for min ${o.argmin}`:`${NE(o)} of ${n}`;return n}function rvt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(yg(t))return`${i} for argmax(${t.argmax})`;if(oh(t))return`${i} for argmin(${t.argmin})`;const o=r&&!j0(r)?Fs(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Zi(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const KMe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return rvt(e);default:return nvt(e,t)}};let JMe=KMe;function QMe(e){JMe=e}function ivt(){QMe(KMe)}function Db(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=S7(e))==null?void 0:a.title;if(!kt(e))return i??e.title;const o=e,s=r?A7(o,t):void 0;return n?Bo(i,o.title,s):i??o.title??s}function S7(e){if(w1(e)&&e.axis)return e.axis;if(XMe(e)&&e.legend)return e.legend;if(_7(e)&&e.header)return e.header}function A7(e,t){return JMe(e,t)}function Ok(e){if(ZMe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=S7(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function ovt(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(E7(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!yg(n)&&!oh(n))return"quantitative";if(U0(e)&&((o=e.scale)!=null&&o.type))switch(L6[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Mc(e){if(kt(e))return e;if(VL(e))return e.condition}function ms(e){if(Wn(e))return e;if(WE(e))return e.condition}function eOe(e,t,n,r={}){if(Nt(e)||li(e)||lg(e)){const i=Nt(e)?"string":li(e)?"number":"boolean";return Ct(ibt(t,i,e)),{value:e}}return Wn(e)?$k(e,t,n,r):WE(e)?{...e,condition:$k(e.condition,t,n,r)}:e}function $k(e,t,n,r){if(ZMe(e)){const{format:i,formatType:o,...s}=e;if(m0(o)&&!n.customFormatTypes)return Ct(u2e(t)),$k(s,t,n,r)}else{const i=w1(e)?"axis":XMe(e)?"legend":_7(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(m0(s)&&!n.customFormatTypes)return Ct(u2e(t)),$k({...e,[i]:a},t,n,r)}}return kt(e)?C7(e,t,r):svt(e)}function svt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=li(n)?"quantitative":Nt(n)?"nominal":z0(n)?"temporal":void 0,{...e,type:t}}function C7(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!K9(r)&&!yg(r)&&!oh(r)&&(Ct(sbt(r)),delete a.aggregate),i&&(a.timeUnit=Fs(i)),s&&(a.field=`${s}`),Zi(o)&&(a.bin=WL(o,t)),Ws(o)&&!zo(t)&&Ct(Nbt(t)),nl(a)){const{type:l}=a,u=u1t(l);l!==u&&(a.type=u),l!=="quantitative"&&$L(r)&&(Ct(obt(l,r)),a.type="quantitative")}else if(!W5e(t)){const l=ovt(a,t);a.type=l}if(nl(a)){const{compatible:l,warning:u}=avt(a,t)||{};l===!1&&Ct(u)}if(E7(a)&&Nt(a.sort)){const{sort:l}=a;if(g2e(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&g2e(u))return{...a,sort:{encoding:u,order:"descending"}}}if(_7(a)){const{header:l}=a;if(l){const{orient:u,...f}=l;if(u)return{...a,header:{...f,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function WL(e,t){return lg(e)?{maxbins:e2e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:e2e(t)}:e}const qy={compatible:!0};function avt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Yd:case Xd:case DL:return Mk(e)?qy:{compatible:!1,warning:cbt(t)};case fo:case Is:case fg:case fv:case $l:case Jf:case Qf:case BE:case zE:case LL:case f0:case RL:case FL:case I0:case qu:case jc:case ML:return qy;case qc:case zu:case Uc:case Hc:return n!==p0?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:qy;case vh:case hg:case pg:case gg:case bh:case yh:case mh:case zc:case Kf:case dg:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:qy;case Il:case mg:return!Mk(e)&&!evt(e)?{compatible:!1,warning:fbt(t)}:qy;case y1:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:qy}}function _1(e){const{formatType:t}=Ok(e);return t==="time"||!t&&lvt(e)}function lvt(e){return e&&(e.type==="temporal"||kt(e)&&!!e.timeUnit)}function YL(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=Fs(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return UE(e)?a=e.expr:cn(e)?a=e.signal:z0(e)?(s=!0,a=h0(e)):(Nt(e)||li(e))&&s&&(a=`datetime(${Ii(e)})`,Zbt(o)&&(li(e)&&e<1e4||Nt(e)&&isNaN(Date.parse(e)))&&(a=h0({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:Ii(e)}function tOe(e,t){const{type:n}=e;return t.map(r=>{const i=kt(e)&&!j0(e.timeUnit)?e.timeUnit:void 0,o=YL(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function YE(e,t){return Zi(e.bin)?td(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const b2e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function XE(e){return e==null?void 0:e.condition}const nOe=["domain","grid","labels","ticks","title"],uvt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},rOe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},cvt={...rOe,style:1,labelExpr:1,encoding:1};function v2e(e){return Yt(cvt,e)}const fvt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},iOe=_t(fvt);function wh(e){return St(e,"mark")}class XL{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return wh(t)?B1t(t.mark)===this.name:!1}}function qm(e,t){const n=e&&e[t];return n?at(n)?g1(n,r=>!!r.field):kt(n)||VL(n):!1}function oOe(e,t){const n=e&&e[t];return n?at(n)?g1(n,r=>!!r.field):kt(n)||nd(n)||WE(n):!1}function sOe(e,t){if(zo(t)){const n=e[t];if((kt(n)||nd(n))&&(CMe(n.type)||kt(n)&&n.timeUnit)){const r=V9(t);return oOe(e,r)}}return!1}function aOe(e){return g1(syt,t=>{if(qm(e,t)){const n=e[t];if(at(n))return g1(n,r=>!!r.aggregate);{const r=Mc(n);return r&&!!r.aggregate}}return!1})}function lOe(e,t){const n=[],r=[],i=[],o=[],s={};return k7(e,(a,l)=>{if(kt(a)){const{field:u,aggregate:f,bin:c,timeUnit:d,...h}=a;if(f||d||c){const p=S7(a),m=p==null?void 0:p.title;let b=Ft(a,{forAs:!0});const y={...m?[]:{title:Db(a,t,{allowDisabling:!0})},...h,field:b};if(f){let v;if(yg(f)?(v="argmax",b=Ft({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${b}.${u}`):oh(f)?(v="argmin",b=Ft({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${b}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(v=f),v){const w={op:v,as:b};u&&(w.field=u),o.push(w)}}else if(n.push(b),nl(a)&&Zi(c)){if(r.push({bin:c,field:u,as:b}),n.push(Ft(a,{binSuffix:"end"})),YE(a,l)&&n.push(Ft(a,{binSuffix:"range"})),zo(l)){const v={field:`${b}_end`};s[`${l}2`]=v}y.bin="binned",W5e(l)||(y.type=p0)}else if(d&&!j0(d)){i.push({timeUnit:d,field:u,as:b});const v=nl(a)&&a.type!==b1&&"time";v&&(l===BE||l===f0?y.formatType=v:yyt(l)?y.legend={formatType:v,...y.legend}:zo(l)&&(y.axis={formatType:v,...y.axis}))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function dvt(e,t,n){const r=vyt(t,n);if(r){if(r==="binned"){const i=e[t===zc?fo:Is];return!!(kt(i)&&kt(e[t])&&Ws(i.bin))}}else return!1;return!0}function hvt(e,t,n,r){const i={};for(const o of _t(e))V5e(o)||Ct(ubt(o));for(let o of dyt){if(!e[o])continue;const s=e[o];if(jE(o)){const a=fyt(o),l=i[a];if(kt(l)&&l1t(l.type)&&kt(s)&&!l.timeUnit){Ct(rbt(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Ct(nbt),o=qu),!dvt(e,o,t)){Ct(PL(o,t));continue}if(o===bh&&t==="line"){const a=Mc(e[o]);if(a!=null&&a.aggregate){Ct(lbt);continue}}if(o===$l&&(n?"fill"in e:"stroke"in e)){Ct(cMe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===zE||o===y1&&!at(s)&&!Fc(s)||o===f0&&at(s)){if(s){if(o===y1){const a=e[o];if(YMe(a)){i[o]=a;continue}}i[o]=Pt(s).reduce((a,l)=>(kt(l)?a.push(C7(l,o)):Ct(D6(l,o)),a),[])}}else{if(o===f0&&s===null)i[o]=null;else if(!kt(s)&&!nd(s)&&!Fc(s)&&!VE(s)&&!cn(s)){Ct(D6(s,o));continue}i[o]=eOe(s,o,r)}}return i}function ZL(e,t){const n={};for(const r of _t(e)){const i=eOe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function pvt(e){const t=[];for(const n of _t(e))if(qm(e,n)){const r=e[n],i=Pt(r);for(const o of i)kt(o)?t.push(o):VL(o)&&t.push(o.condition)}return t}function k7(e,t,n){if(e)for(const r of _t(e)){const i=e[r];if(at(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function gvt(e,t,n,r){return e?_t(e).reduce((i,o)=>{const s=e[o];return at(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function uOe(e,t){return _t(t).reduce((n,r)=>{switch(r){case fo:case Is:case RL:case ML:case FL:case zc:case Kf:case fg:case fv:case qu:case yh:case jc:case mh:case dg:case Uc:case qc:case Hc:case zu:case BE:case Il:case I0:case f0:return n;case y1:if(e==="line"||e==="trail")return n;case zE:case LL:{const i=t[r];if(at(i)||kt(i))for(const o of Pt(i))o.aggregate||n.push(Ft(o,{}));return n}case bh:if(e==="trail")return n;case $l:case Jf:case Qf:case vh:case hg:case pg:case mg:case gg:{const i=Mc(t[r]);return i&&!i.aggregate&&n.push(Ft(i,{})),n}}},[])}function mvt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function M6(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${T7(t)}`:"";return{field:s+t.field,type:t.type,title:cn(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=pvt(n).map(J1t);return{tooltip:[...i,...xf(o,Mr)]}}function T7(e){const{title:t,field:n}=e;return Bo(t,n)}function D7(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:f=void 0,extraEncoding:c={}})=>{const d=T7(n);return cOe(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...Nt(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...c}})}}function cOe(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...zf(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...lg(e[t])?{}:e[t]}}]:[]}function fOe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:RA(o,n),continuousAxisChannelDef2:RA(s,n),continuousAxisChannelDefError:RA(a,n),continuousAxisChannelDefError2:RA(l,n),continuousAxis:i}}function RA(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ct(Pbt(n,t)),r}else return e}function dOe(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(zf(n)&&n.orient)return n.orient;if(Cp(i)){if(Cp(o)){const s=kt(i)&&i.aggregate,a=kt(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return _1(o)&&!_1(i)?"horizontal":"vertical"}return"horizontal"}else{if(Cp(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Ik="boxplot",yvt=["box","median","outliers","rule","ticks"],bvt=new XL(Ik,pOe);function hOe(e){return li(e)?"tukey":e}function pOe(e,{config:t}){e={...e,encoding:ZL(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=zf(n)?n:{type:n};i&&Ct(lMe("boxplot"));const l=a.extent??t.boxplot.extent,u=Oi("size",a,t),f=a.invalid,c=hOe(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:b,groupby:y,aggregate:v,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:A,customTooltipWithoutAggregatedField:T}=vvt(e,l,t),D=cv(m.field),{color:k,size:R,...M}=w,B=Ze=>D7(a,b,m,Ze,t.boxplot),K=B(M),L=B(w),$=($t(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",I=B({...M,...R?{size:R}:{},color:{condition:{test:`${ki(`lower_box_${m.field}`)} >= ${ki(`upper_box_${m.field}`)}`,...k||{value:$}}}}),U=M6([{fieldPrefix:c==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:c==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),q={type:"tick",color:"black",opacity:1,orient:E,invalid:f,aria:!1},Y=c==="min-max"?U:M6([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),X=[...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:Y})],te=[...c!=="tukey"?X:[],...L({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:A,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...I({partName:"median",mark:{type:"tick",invalid:f,...$t(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(c==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:te};const le=ki(`lower_box_${m.field}`),ee=ki(`upper_box_${m.field}`),z=`(${ee} - ${le})`,he=`${le} - ${l} * ${z}`,de=`${ee} + ${l} * ${z}`,ze=ki(m.field),He={joinaggregate:gOe(m.field),groupby:y},je={transform:[{filter:`(${he} <= ${ze}) && (${ze} <= ${de})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${D}`},{op:"max",field:m.field,as:`upper_whisker_${D}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${D}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${D}`},...v],groupby:y}],layer:X},{tooltip:we,...Ie}=M,{scale:qe,axis:Pe}=m,At=T7(m),ht=Ll(Pe,["title"]),nn=cOe(a,"outliers",t.boxplot,{transform:[{filter:`(${ze} < ${he}) || (${ze} > ${de})`}],mark:"point",encoding:{[b]:{field:m.field,type:m.type,...At!==void 0?{title:At}:{},...qe!==void 0?{scale:qe}:{},...$i(ht)?{}:{axis:ht}},...Ie,...k?{color:k}:{},...T?{tooltip:T}:{}}})[0];let Vt;const On=[...d,...h,He];return nn?Vt={transform:On,layer:[nn,je]}:(Vt=je,Vt.transform.unshift(...On)),{...s,layer:[Vt,{transform:p,layer:te}]}}function gOe(e){const t=cv(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function vvt(e,t,n){const r=dOe(e,Ik),{continuousAxisChannelDef:i,continuousAxis:o}=fOe(e,r,Ik),s=i.field,a=cv(s),l=hOe(t),u=[...gOe(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${ki(`upper_box_${a}`)} - ${ki(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${ki(`upper_box_${a}`)} + ${ki(`iqr_${a}`)} * ${t}, ${ki(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${ki(`lower_box_${a}`)} - ${ki(`iqr_${a}`)} * ${t}, ${ki(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:c,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=mvt(d),{bins:m,timeUnits:b,aggregate:y,groupby:v,encoding:w}=lOe(p,n),E=r==="vertical"?"horizontal":"vertical",A=r,T=[...m,...b,{aggregate:[...y,...u],groupby:v},...f];return{bins:m,timeUnits:b,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:A,customTooltipWithoutAggregatedField:h}}const L7="errorbar",xvt=["ticks","rule"],wvt=new XL(L7,mOe);function mOe(e,{config:t}){e={...e,encoding:ZL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=yOe(e,L7,t);delete o.size;const f=D7(a,i,r,o,t.errorbar),c=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...c!==void 0?{thickness:c}:{},...d!==void 0?{size:d}:{}},p=[...f({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...f({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...c!==void 0?{size:c}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function _vt(e,t){const{encoding:n}=e;if(Evt(n))return{orient:dOe(e,t),inputType:"raw"};const r=Svt(n),i=Avt(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Wn(a)&&Wn(l))throw new Error(`${t} cannot have both x2 and y2`);if(Wn(a)){if(Cp(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Wn(l)){if(Cp(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,f=n.yError2;if(Wn(l)&&!Wn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Wn(f)&&!Wn(u))throw new Error(`${t} cannot have yError2 without yError`);if(Wn(a)&&Wn(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Wn(a)){if(Cp(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Wn(u)){if(Cp(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Evt(e){return(Wn(e.x)||Wn(e.y))&&!Wn(e.x2)&&!Wn(e.y2)&&!Wn(e.xError)&&!Wn(e.xError2)&&!Wn(e.yError)&&!Wn(e.yError2)}function Svt(e){return Wn(e.x2)||Wn(e.y2)}function Avt(e){return Wn(e.xError)||Wn(e.xError2)||Wn(e.yError)||Wn(e.yError2)}function yOe(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=zf(r)?r:{type:r};o&&Ct(lMe(t));const{orient:u,inputType:f}=_vt(e,t),{continuousAxisChannelDef:c,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=fOe(e,u,t),{errorBarSpecificAggregate:b,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:w}=Cvt(l,c,d,h,p,f,t,n),{[m]:E,[m==="x"?"x2":"y2"]:A,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:D,...k}=i,{bins:R,timeUnits:M,aggregate:B,groupby:K,encoding:L}=lOe(k,n),$=[...B,...b],I=f!=="raw"?[]:K,U=M6(v,c,L,w);return{transform:[...a.transform??[],...R,...M,...$.length===0?[]:[{aggregate:$,groupby:I}],...y],groupby:I,continuousAxisChannelDef:c,continuousAxis:m,encodingWithoutContinuousAxis:L,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:U}}function Cvt(e,t,n,r,i,o,s,a){let l=[],u=[];const f=t.field;let c,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ct(Ibt(h,p,s)),p==="stderr"||p==="stdev")l=[{op:p,field:f,as:`extent_${f}`},{op:h,field:f,as:`center_${f}`}],u=[{calculate:`${ki(`center_${f}`)} + ${ki(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${ki(`center_${f}`)} - ${ki(`extent_${f}`)}`,as:`lower_${f}`}],c=[{fieldPrefix:"center_",titlePrefix:NE(h)},{fieldPrefix:"upper_",titlePrefix:x2e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:x2e(h,p,"-")}],d=!0;else{let m,b,y;p==="ci"?(m="mean",b="ci0",y="ci1"):(m="median",b="q1",y="q3"),l=[{op:b,field:f,as:`lower_${f}`},{op:y,field:f,as:`upper_${f}`},{op:m,field:f,as:`center_${f}`}],c=[{fieldPrefix:"upper_",titlePrefix:Db({field:f,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Db({field:f,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Db({field:f,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ct($bt(e.center,e.extent)),o==="aggregated-upper-lower"?(c=[],u=[{calculate:ki(n.field),as:`upper_${f}`},{calculate:ki(f),as:`lower_${f}`}]):o==="aggregated-error"&&(c=[{fieldPrefix:"",titlePrefix:f}],u=[{calculate:`${ki(f)} + ${ki(r.field)}`,as:`upper_${f}`}],i?u.push({calculate:`${ki(f)} + ${ki(i.field)}`,as:`lower_${f}`}):u.push({calculate:`${ki(f)} - ${ki(r.field)}`,as:`lower_${f}`}));for(const h of u)c.push({fieldPrefix:h.as.substring(0,6),titlePrefix:c0(c0(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:c,tooltipTitleWithFieldName:d}}function x2e(e,t,n){return`${NE(e)} ${n} ${t}`}const R7="errorband",kvt=["band","borders"],Tvt=new XL(R7,bOe);function bOe(e,{config:t}){e={...e,encoding:ZL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=yOe(e,R7,t),u=s,f=D7(u,i,r,o,t.errorband),c=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:c?"area":"rect"},h={type:c?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return c?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Ct(f2e("interpolate")):u.tension&&Ct(f2e("tension")),{...a,transform:n,layer:[...f({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const vOe={};function F7(e,t,n){const r=new XL(e,t);vOe[e]={normalizer:r,parts:n}}function Dvt(){return _t(vOe)}F7(Ik,pOe,yvt);F7(L7,mOe,xvt);F7(R7,bOe,kvt);const Lvt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],xOe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},wOe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Rvt=_t(xOe),Fvt=_t(wOe),Mvt={header:1,headerRow:1,headerColumn:1,headerFacet:1},_Oe=_t(Mvt),EOe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Ovt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},$vt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Oc="_vgsid_",Ivt={point:{on:"click",fields:[Oc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function M7(e){return e==="legend"||!!(e!=null&&e.legend)}function l4(e){return M7(e)&&$t(e)}function O7(e){return!!(e!=null&&e.select)}function SOe(e){const t=[];for(const n of e||[]){if(O7(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function Pvt(e){return KL(e)||I7(e)||$7(e)}function $7(e){return St(e,"concat")}function KL(e){return St(e,"vconcat")}function I7(e){return St(e,"hconcat")}function AOe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function jf(e){return St(e,"step")}function w2e(e){return St(e,"view")||St(e,"width")||St(e,"height")}const _2e=20,Nvt={align:1,bounds:1,center:1,columns:1,spacing:1},Bvt=_t(Nvt);function zvt(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(GL(e)&&!GE(e.facet)||$7(e))&&(i.columns=s),KL(e)&&(i.columns=1);for(const a of Bvt)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=li(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function O6(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function $6(e,t){const n=Pk(e,t);return jf(n)?n.step:COe}function Pk(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Bo(n,{step:e.step})}const COe=20,jvt={continuousWidth:200,continuousHeight:200,step:COe},Uvt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:jvt,mark:M1t,arc:{},area:{},bar:P1t,circle:{},geoshape:{},image:{},line:{},point:{},rect:y7,rule:{color:"black"},square:{},text:{color:"black"},tick:N1t,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:p1t,projection:{},legend:Ovt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Ivt,style:{},title:{},facet:{spacing:_2e},concat:{spacing:_2e},normalizedNumberFormat:".0%"},Ad=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],E2e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},S2e={blue:Ad[0],orange:Ad[1],red:Ad[2],teal:Ad[3],green:Ad[4],yellow:Ad[5],purple:Ad[6],pink:Ad[7],brown:Ad[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function qvt(e={}){return{signals:[{name:"color",value:$t(e)?{...S2e,...e}:S2e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Hvt(e){return{signals:[{name:"fontSize",value:$t(e)?{...E2e,...e}:E2e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Gvt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function kOe(e){const t=_t(e||{}),n={};for(const r of t){const i=e[r];n[r]=XE(i)?tMe(i):Xl(i)}return n}function Vvt(e){const t=_t(e),n={};for(const r of t)n[r]=kOe(e[r]);return n}const Wvt=[...IMe,...iOe,..._Oe,"background","padding","legend","lineBreak","scale","style","title","view"];function TOe(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=J1({},Gn(Uvt),n?Gvt(n):{},t?qvt(t):{},r?Hvt(r):{},o||{});i&&Q1(s,"selection",i,!0);const a=Ll(s,Wvt);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Xl(s[l]));for(const l of IMe)s[l]&&(a[l]=Ys(s[l]));for(const l of iOe)s[l]&&(a[l]=kOe(s[l]));for(const l of _Oe)s[l]&&(a[l]=Ys(s[l]));if(s.legend&&(a.legend=Ys(s.legend)),s.scale){const{invalid:l,...u}=s.scale,f=Ys(l,{level:1});a.scale={...Ys(u),..._t(f).length>0?{invalid:f}:{}}}return s.style&&(a.style=Vvt(s.style)),s.title&&(a.title=Ys(s.title)),s.view&&(a.view=Ys(s.view)),a}const Yvt=new Set(["view",...k1t]),Xvt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Zvt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...F1t};function Kvt(e){e=Gn(e);for(const t of Xvt)delete e[t];if(e.axis)for(const t in e.axis)XE(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Lvt)delete e.legend[t];if(e.mark){for(const t of h2e)delete e.mark[t];e.mark.tooltip&&$t(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(SOe(e.params)),delete e.params);for(const t of Yvt){for(const r of h2e)delete e[t][r];const n=Zvt[t];if(n)for(const r of n)delete e[t][r];Qvt(e,t)}for(const t of Dvt())delete e[t];Jvt(e);for(const t in e)$t(e[t])&&$i(e[t])&&delete e[t];return $i(e)?void 0:e}function Jvt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=eMe(e.title);$i(t)||(e.style["group-title"]={...e.style["group-title"],...t}),$i(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),$i(r)?delete e.title:e.title=r}function Qvt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};$i(o)||(e.style[n??t]=o),delete e[t]}function JL(e){return St(e,"layer")}function ext(e){return St(e,"repeat")}function txt(e){return!at(e.repeat)&&St(e.repeat,"layer")}class P7{map(t,n){return GL(t)?this.mapFacet(t,n):ext(t)?this.mapRepeat(t,n):I7(t)?this.mapHConcat(t,n):KL(t)?this.mapVConcat(t,n):$7(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(JL(t))return this.mapLayer(t,n);if(wh(t))return this.mapUnit(t,n);throw new Error(J9(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const nxt={zero:1,center:1,normalize:1};function rxt(e){return Yt(nxt,e)}const ixt=new Set([MMe,jL,zL,Lk,qL,g7,m7,UL,OMe,p7]),oxt=new Set([jL,zL,MMe]);function Hy(e){return kt(e)&&x1(e)==="quantitative"&&!e.bin}function A2e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(kt(s)&&kt(a))if(Hy(s)&&Hy(a)){if(s.stack)return t;if(a.stack)return i;const l=kt(s)&&!!s.aggregate,u=kt(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Hy(s))return t;if(Hy(a))return i}else{if(Hy(s))return o&&n==="vertical"?void 0:t;if(Hy(a))return o&&n==="horizontal"?void 0:i}}function sxt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function DOe(e,t){var m,b;const n=zf(e)?e:{type:e},r=n.type;if(!ixt.has(r))return null;const i=A2e(t,"x",n)||A2e(t,"theta",n);if(!i)return null;const o=t[i],s=kt(o)?Ft(o,{}):void 0,a=sxt(i),l=[],u=new Set;if(t[a]){const y=t[a],v=kt(y)?Ft(y,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const f=a==="x"?"xOffset":"yOffset",c=t[f],d=kt(c)?Ft(c,{}):void 0;d&&d!==s&&(l.push(f),u.add(d));const h=hyt.reduce((y,v)=>{if(v!=="tooltip"&&qm(t,v)){const w=t[v];for(const E of Pt(w)){const A=Mc(E);if(A.aggregate)continue;const T=Ft(A,{});(!T||!u.has(T))&&y.push({channel:v,fieldDef:A})}}return y},[]);let p;return o.stack!==void 0?lg(o.stack)?p=o.stack?"zero":null:p=o.stack:oxt.has(r)&&(p="zero"),!p||!rxt(p)||aOe(t)&&h.length===0?null:((m=o==null?void 0:o.scale)!=null&&m.type&&((b=o==null?void 0:o.scale)==null?void 0:b.type)!==Xs.LINEAR&&o!=null&&o.stack&&Ct(Fbt(o.scale.type)),Wn(t[ed(i)])?(o.stack!==void 0&&Ct(Rbt(i)),null):(kt(o)&&o.aggregate&&!Cyt.has(o.aggregate)&&Ct(Mbt(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:bg(r),stackBy:h,offset:p}))}function LOe(e,t,n){const r=Ys(e),i=Oi("orient",r,n);if(r.orient=cxt(r.type,t,i),i!==void 0&&i!==r.orient&&Ct(gbt(r.orient,i)),r.type==="bar"&&r.orient){const l=Oi("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:$1t[r.orient];for(const f of u)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=Oi("opacity",r,n),s=Oi("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=lxt(r.type,t)),Oi("cursor",r,n)===void 0&&(r.cursor=axt(r,t,n)),r}function axt(e,t,n){return t.href||e.href||Oi("href",e,n)?"pointer":e.cursor}function lxt(e,t){if(_r([qL,p7,g7,m7],e)&&!aOe(t))return .7}function uxt(e,t,{graticule:n}){if(n)return!1;const r=Bf("filled",e,t),i=e.type;return Bo(r,i!==qL&&i!==UL&&i!==Lk)}function cxt(e,t,n){switch(e){case qL:case g7:case m7:case OMe:case A1t:case S1t:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case jL:if(kt(r)&&(Ws(r.bin)||kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(kt(i)&&(Ws(i.bin)||kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(kt(r)&&r.type===p0&&!Zi(r.bin)||Fk(r))&&kt(i)&&Ws(i.bin)?"horizontal":"vertical";if(!s)return(kt(i)&&i.type===p0&&!Zi(i.bin)||Fk(i))&&kt(r)&&Ws(r.bin)?"vertical":"horizontal"}case Lk:if(o&&!(kt(r)&&Ws(r.bin))&&s&&!(kt(i)&&Ws(i.bin)))return;case zL:if(s)return kt(i)&&Ws(i.bin)?"horizontal":"vertical";if(o)return kt(r)&&Ws(r.bin)?"vertical":"horizontal";if(e===Lk){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case UL:case p7:{const a=y2e(r),l=y2e(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=nl(r)&&r.type===b1,f=nl(i)&&i.type===b1;if(u&&!f)return"vertical";if(!u&&f)return"horizontal"}return}}return"vertical"}function fxt(e){const{point:t,line:n,...r}=e;return _t(r).length>1?r:r.type}function dxt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ll(e[t],["point","line"])});return e}function u4(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?$t(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?$t(t.point)?t.point:{}:void 0}function C2e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class hxt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(wh(t)){const{mark:r,encoding:i}=t,o=zf(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!u4(o,n[o.type],i);case"area":return!!u4(o,n[o.type],i)||!!C2e(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...f}=t,c=ZL(u,i),d=zf(a)?a:{type:a},h=u4(d,i[d.type],c),p=d.type==="area"&&C2e(d,i[d.type]),m=[{name:l,...o?{params:o}:{},mark:fxt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Ll(c,["shape"])}],b=DOe(LOe(d,c,i),c);let y=c;if(b){const{fieldChannel:v,offset:w}=b;y={...c,[v]:{...c[v],...w?{stack:w}:{}}}}return y=Ll(y,["y2","x2"]),p&&m.push({...s?{projection:s}:{},mark:{type:"line",...p1(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...p1(d,["clip","tooltip"]),...h},encoding:y}),r({...f,layer:m},{...n,config:dxt(i)})}}function pxt(e,t){return t?GE(e)?FOe(e,t):ROe(e,t):e}function c4(e,t){return t?FOe(e,t):e}function I6(e,t,n){const r=t[e];if(Z1t(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ct(Vyt(r.repeat));return}return t}function ROe(e,t){if(e=I6("field",e,t),e!==void 0){if(e===null)return null;if(E7(e)&&Zd(e.sort)){const n=I6("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function k2e(e,t){if(kt(e))return ROe(e,t);{const n=I6("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function T2e(e,t){if(Wn(e)){const n=k2e(e,t);if(n)return n;if(VE(e))return{condition:e.condition}}else{if(WE(e)){const n=k2e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function FOe(e,t){const n={};for(const r in e)if(St(e,r)){const i=e[r];if(at(i))n[r]=i.map(o=>T2e(o,t)).filter(o=>o);else{const o=T2e(i,t);o!==void 0&&(n[r]=o)}}return n}class gxt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(wh(t)){const{encoding:n,mark:r}=t;if(r==="line"||zf(r)&&r.type==="line")for(const i of cyt){const o=P0(i),s=n[o];if(n[i]&&(kt(s)&&!Ws(s.bin)||nd(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Ct(pbt(!!i.x2,!!i.y2)),r({...t,mark:$t(o)?{...o,type:"rule"}:"rule"},n)}}class mxt extends P7{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[bvt,wvt,Tvt,new hxt,new gxt]}map(t,n){if(wh(t)){const r=qm(t.encoding,Yd),i=qm(t.encoding,Xd),o=qm(t.encoding,DL);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=c4(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return txt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:f=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(c=>{const d={...u,layer:c},h=`${(i.name?`${i.name}_`:"")+f}child__layer_${co(c)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!at(r)&&t.columns&&(t=Ll(t,["columns"]),Ct(a2e("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,f=!at(r)&&r.row||[l?l.row:null],c=!at(r)&&r.column||[l?l.column:null],d=at(r)&&r||[l?l.repeat:null];for(const p of d)for(const m of f)for(const b of c){const y={repeat:p,row:m,column:b,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(at(r)?`${co(p)}`:(r.row?`row_${co(m)}`:"")+(r.column?`column_${co(b)}`:"")),w=this.map(i,{...n,repeater:y,repeaterPrefix:v});w.name=v,a.push(Ll(w,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return GE(r)&&t.columns&&(t=Ll(t,["columns"]),Ct(a2e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=L2e({parentProjection:s,projection:i}),u=D2e({parentEncoding:o,encoding:c4(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:f,view:c,params:d,encoding:h,...p}=t,{facetMapping:m,layout:b}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=c4(s,n.repeater);return this.mapFacet({...p,...b,facet:m,spec:{...l?{width:l}:{},...f?{height:f}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Ct(dbt([...r?[Yd]:[],...i?[Xd]:[]]));const s={},a={};for(const l of[Yd,Xd]){const u=t[l];if(u){const{align:f,center:c,spacing:d,columns:h,...p}=u;s[l]=p;for(const m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:l,columns:u,...f}=o;return{facetMapping:pxt(f,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,l={...i,parentEncoding:D2e({parentEncoding:n,encoding:o,layer:!0}),parentProjection:L2e({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function D2e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([..._t(e),..._t(t)]);for(const o of i){const s=t[o],a=e[o];if(Wn(s)){const l={...a,...s};r[o]=l}else WE(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Fc(a)||cn(a)||Wn(a)||at(a))&&(r[o]=a)}}else r=t;return!r||$i(r)?void 0:r}function L2e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ct(tbt({parentProjection:t,projection:n})),n??t}function N7(e){return St(e,"filter")}function yxt(e){return St(e,"stop")}function MOe(e){return St(e,"lookup")}function bxt(e){return St(e,"data")}function vxt(e){return St(e,"param")}function xxt(e){return St(e,"pivot")}function wxt(e){return St(e,"density")}function _xt(e){return St(e,"quantile")}function Ext(e){return St(e,"regression")}function Sxt(e){return St(e,"loess")}function Axt(e){return St(e,"sample")}function Cxt(e){return St(e,"window")}function kxt(e){return St(e,"joinaggregate")}function Txt(e){return St(e,"flatten")}function Dxt(e){return St(e,"calculate")}function OOe(e){return St(e,"bin")}function Lxt(e){return St(e,"impute")}function Rxt(e){return St(e,"timeUnit")}function Fxt(e){return St(e,"aggregate")}function Mxt(e){return St(e,"stack")}function Oxt(e){return St(e,"fold")}function $xt(e){return St(e,"extent")&&!St(e,"density")&&!St(e,"regression")}function Ixt(e){return e.map(t=>N7(t)?{filter:kb(t.filter,a1t)}:t)}class Pxt extends P7{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=R2e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=R2e(t,n),t.encoding){const r={};for(const[i,o]of Zp(t.encoding))r[i]=$Oe(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Zp(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...f}=s;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[o]=u!=="none";for(const c of ta(n.selectionPredicates[o]??{}))c.empty=u!=="none";return{name:o,value:a,select:f,bind:l}})}:t}}function R2e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(N7(o))return{filter:P6(o,t)};if(OOe(o)&&N0(o.bin))return{...o,bin:IOe(o.bin)};if(MOe(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function $Oe(e,t){var r,i;const n=Gn(e);if(kt(n)&&N0(n.bin)&&(n.bin=IOe(n.bin)),U0(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(VE(n))if(at(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:P6(o,t)}});else{const{selection:o,param:s,test:a,...l}=$Oe(n.condition,t);n.condition=s?n.condition:{...l,test:P6(n.condition,t)}}return n}function IOe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function P6(e,t){const n=r=>kb(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):kb(e.test||e.filter,r=>r.selection?n(r.selection):r)}class N6 extends P7{map(t,n){const r=n.selections??[];if(t.params&&!wh(t)){const i=[];for(const o of t.params)O7(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(Nt(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(l=>i.indexOf(l)).every((l,u,f)=>l!==-1&&(u===0||l>f[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=N6.prototype[e];N6.prototype[e]=function(n,r){return t.call(this,n,Nxt(n,r))}}function Nxt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function POe(e,t){t===void 0&&(t=TOe(e.config));const n=Uxt(e,t),{width:r,height:i}=e,o=qxt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const Bxt=new mxt,zxt=new Pxt,jxt=new N6;function Uxt(e,t={}){const n={config:t};return jxt.map(Bxt.map(zxt.map(e,n),n),n)}function F2e(e){return Nt(e)?{type:e}:e??{}}function qxt(e,t,n){let{width:r,height:i}=t;const o=wh(e)||JL(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Ct(r2e("width")),r=void 0),i=="container"&&(Ct(r2e("height")),i=void 0));const a={type:"pad",...s,...n?F2e(n.autosize):{},...F2e(e.autosize)};if(a.type==="fit"&&!o&&(Ct($yt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ct(i2e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ct(i2e("height")),!Jl(a,{type:"pad"}))return a}function Hxt(e){return["fit","fit-x","fit-y"].includes(e)}function Gxt(e){return e?`fit-${OL(e)}`:"fit"}const Vxt=["background","padding"];function M2e(e,t){const n={};for(const r of Vxt)e&&e[r]!==void 0&&(n[r]=Xl(e[r]));return t&&(n.params=e.params),n}class _h{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new _h(Gn(this.explicit),Gn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Bo(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of _t(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function hf(e){return{explicit:!0,value:e}}function ql(e){return{explicit:!1,value:e}}function NOe(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:QL(t,n,r,i)}}function QL(e,t,n,r){return e.explicit&&t.explicit&&Ct(Sbt(n,r,e.value,t.value)),e}function Qp(e,t,n,r,i=QL){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Jl(e.value,t.value)?e:i(e,t,n,r)}class Wxt extends _h{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function E1(e){return St(e,"url")}function E_(e){return St(e,"values")}function BOe(e){return St(e,"name")&&!E1(e)&&!E_(e)&&!Ip(e)}function Ip(e){return e&&(zOe(e)||jOe(e)||B7(e))}function zOe(e){return St(e,"sequence")}function jOe(e){return St(e,"sphere")}function B7(e){return St(e,"graticule")}var vo;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(vo||(vo={}));function UOe({invalid:e,isPath:t}){switch(PMe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Yxt(e){const{marks:t,scales:n}=UOe(e);return t===n?vo.Main:n==="include-invalid-values"?vo.PreFilterInvalid:vo.PostFilterInvalid}class Di{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ct(Jyt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Rl extends Di{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${N5e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function f4(e){return e.as!==void 0}function O2e(e){return`${e}_end`}class Cf extends Di{clone(){return new Cf(null,Gn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(j0(l)){if(bo(n)){const{mark:f,markDef:c,config:d}=n,h=Jp({fieldDef:o,markDef:c,config:d});(__(f)||h)&&(u={timeUnit:Fs(l),field:a})}}else u={as:Ft(o,{forAs:!0}),field:a,timeUnit:l};if(bo(n)){const{mark:f,markDef:c,config:d}=n,h=Jp({fieldDef:o,markDef:c,config:d});__(f)&&zo(s)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Mr(u)]=u)}return i},{});return $i(r)?null:new Cf(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=Fs(r),s={...i,timeUnit:o};return new Cf(t,{[Mr(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Zp(this.timeUnits)){const o=f4(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(ta(this.timeUnits).map(t=>f4(t)?t.as:O2e(t.field)))}dependentFields(){return new Set(ta(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Mr(this.timeUnits)}`}assemble(){const t=[];for(const n of ta(this.timeUnits)){const{rectBandPosition:r}=n,i=Fs(n.timeUnit);if(f4(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=i,f=[s,`${s}_end`];t.push({field:Bu(o),type:"timeunit",...a?{units:NL(a)}:{},...l?{timezone:"utc"}:{},...u,as:f}),t.push(...$2e(f,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=qOe({timeUnit:i,field:s}),l=O2e(s);t.push({type:"formula",expr:a,as:l}),t.push(...$2e([s,l],r,i))}}return t}}const eR="offsetted_rect_start",tR="offsetted_rect_end";function qOe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=vMe(r),{part:s,step:a}=EMe(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${ki(t)}, ${n?-a:a})`}function $2e([e,t],n,r){if(n!==void 0&&n!==.5){const i=ki(e),o=ki(t);return[{type:"formula",expr:I2e([qOe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${eR}`},{type:"formula",expr:I2e([i,o],n+.5),as:`${e}_${tR}`}]}return[]}function I2e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const ZE="_tuple_fields";class Xxt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Zxt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Xxt),o={},s={},a=new Set,l=(p,m)=>{const b=m==="visual"?p.channel:p.field;let y=co(`${r}_${b}`);for(let v=1;a.has(y);v++)y=co(`${r}_${b}_${v}`);return a.add(y),{[m]:y}},u=t.type,f=e.config.selection[u],c=n.value!==void 0?Pt(n.value):null;let{fields:d,encodings:h}=$t(n.select)?n.select:{};if(!d&&!h&&c){for(const p of c)if($t(p))for(const m of _t(p))uyt(m)?(h||(h=[])).push(m):u==="interval"?(Ct(Gyt),h=f.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=f.encodings,"fields"in f&&(d=f.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let b=m.field;if(m.aggregate){Ct(Iyt(p,m.aggregate));continue}else if(!b){Ct(s2e(p));continue}if(m.timeUnit&&!j0(m.timeUnit)){b=e.vgField(p);const y={timeUnit:m.timeUnit,as:b,field:m.field};s[Mr(y)]=y}if(!o[b]){const y=u==="interval"&&td(p)&&Rc(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:b,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[b]=v),i.hasField[b]=o[b],i.hasSelectionId=i.hasSelectionId||b===Oc,H5e(p)?(v.geoChannel=p,v.channel=q5e(p),i.hasChannel[v.channel]=o[b]):i.hasChannel[p]=o[b]}}else Ct(s2e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...l(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Oc}c&&(t.init=c.map(p=>i.items.map(m=>$t(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),$i(s)||(i.timeUnit=new Cf(null,s))},signals:(e,t,n)=>{const r=t.name+ZE;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(WOe)})}},HOe="_curr",jC="anim_value",nb="anim_clock",B6="eased_anim_clock",GOe="min_extent",VOe="max_range_extent",d4="last_tick_at",h4="is_playing",Kxt=1/60*1e3,Jxt=(e,t)=>[{name:B6,update:nb},{name:`${e}_domain`,init:`domain('${t}')`},{name:GOe,init:`extent(${e}_domain)[0]`},{name:VOe,init:`extent(range('${t}'))[1]`},{name:jC,update:`invert('${t}', ${B6})`}],Qxt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(kf(t)&&(n=n.concat([{name:nb,init:"0",on:[{events:{type:"timer",throttle:Kxt},update:`${h4} ? (${nb} + (now() - ${d4}) > ${VOe} ? 0 : ${nb} + (now() - ${d4})) : ${nb}`}]},{name:d4,init:"now()",on:[{events:[{signal:nb},{signal:h4}],update:"now()"}]},{name:h4,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+ZE,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=ta(e.component.selection??{}).reduce((f,c)=>c.type==="interval"?f.concat(c.name+Lb):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Hm(e)}, `;if(t.project.hasSelectionId)u+=`${Oc}: ${s}[${Tt(Oc)}]`;else if(kf(t))u+=`fields: ${i}, values: [${jC} ? ${jC} : ${GOe}]`;else{const f=o.items.map(c=>{const d=e.fieldDef(c.channel);return d!=null&&d.bin?`[${s}[${Tt(e.vgField(c.channel,{}))}], ${s}[${Tt(e.vgField(c.channel,{binSuffix:"end"}))}]]`:`${s}[${Tt(c.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}if(kf(t))return n.concat(Jxt(t.name,e.scaleName(dg)),[{name:r+ah,on:[{events:[{signal:B6},{signal:jC}],update:`{${u}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+ah,on:f?[{events:f,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function WOe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Bu(i.field),i}function y0(e,t=!0,n=Ra){if(at(e)){const r=e.map(i=>y0(i,t,n));return t?`[${r.join(", ")}]`:r}else if(z0(e))return n(t?h0(e):Xbt(e));return t?n(Ii(e)):e}function ewt(e,t){for(const n of ta(e.component.selection??{})){const r=n.name;let i=`${r}${ah}, ${n.resolve==="global"?"true":`{unit: ${Hm(e)}}`}`;for(const o of rR)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+kwt,on:[{events:{signal:n.name+ah},update:`modify(${Tt(n.name+b0)}, ${i})`}]})}return z7(t)}function twt(e,t){if(e.component.selection&&_t(e.component.selection).length){const n=Tt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:cg("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return z7(t)}function nwt(e,t){let n=!1;for(const r of ta(e.component.selection??{})){const i=r.name,o=Tt(i+b0);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${c6e}(${o}, ${Tt(a)}${l}`})}n=!0;for(const a of rR)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),z7(t)}function rwt(e,t){const n=[],r=[],i=Hm(e,{escape:!1});for(const o of ta(e.component.selection??{})){const s={name:o.name+b0};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Oc}}]),o.init){const l=o.project.items.map(WOe);s.values=o.project.hasSelectionId?o.init.map(u=>({unit:i,[Oc]:y0(u,!1)[0]})):o.init.map(u=>({unit:i,fields:l,values:y0(u,!1)}))}if([...n,...t].filter(l=>l.name===o.name+b0).length||n.push(s),kf(o)&&t.length){const l=e.lookupDataSource(e.getDataName(vo.Main)),u=t.find(c=>c.name===l),f=u.transform.find(c=>c.type==="filter"&&c.expr.includes("vlSelectionTest"));if(f){u.transform=u.transform.filter(d=>d!==f);const c={name:u.name+HOe,source:u.name,transform:[f]};r.push(c)}}}return n.concat(t,r)}function YOe(e,t){for(const n of ta(e.component.selection??{}))for(const r of rR)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function iwt(e,t){for(const n of e.children)bo(n)&&(t=YOe(n,t));return t}function owt(e,t,n,r){const i=g6e(e,t.param,t);return{signal:Rc(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function z7(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Kd={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!td(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Ct(zyt),!o||!Rc(s)){Ct(Byt);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||j6(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(c6e))i.update=`{${r.map(s=>`${Tt(Bu(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${Tt(Bu(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!j6(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function z6(e,t){return`domain(${Tt(e.scaleName(t))})`}function j6(e){return e.parent&&yv(e.parent)&&(!e.parent.parent||j6(e.parent.parent))}const Lb="_brush",XOe="_scale_trigger",_w="geo_interval_init_tick",ZOe="_init",swt="_center",awt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...$t(n.select)?n.select:{}};i.fields=[Oc],i.encodings||(i.encodings=n.value?_t(n.value):[qc,Uc]),n.select={type:"interval",...i}}if(t.translate&&!Kd.defined(t)){const i=`!event.item || event.item.mark.name !== ${Tt(t.name+Lb)}`;for(const o of t.events){if(!o.between){Ct(`${o} is not an ordered event stream for interval selections.`);continue}const s=Pt((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ah,o=ta(t.project.hasChannel).filter(a=>a.channel===fo||a.channel===Is),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(lwt(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=Tt(e.projectionName()),l=e.projectionName()+swt,{x:u,y:f}=t.project.hasChannel,c=u&&u.signals.visual,d=f&&f.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=f?s&&s[f.index]:`${l}[1]`,m=A=>e.getSizeSignalRef(A).signal,b=`[[${c?c+"[0]":"0"}, ${d?d+"[0]":"0"}],[${c?c+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;s&&(n.unshift({name:r+ZOe,init:`[scale(${a}, [${u?h[0]:h}, ${f?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${f?p[1]:p}])]`}),(!u||!f)&&(n.find(T=>T.name===l)||n.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${b}, {markname: ${Tt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Hm(e)}}`,w=`vlSelectionTuples(${y}, ${v})`,E=o.map(A=>A.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...s?[{signal:_w}]:[]],update:w}]})}else{if(!Kd.defined(t)){const u=r+XOe,f=o.map(c=>{const d=c.channel,{data:h,visual:p}=c.signals,m=Tt(e.scaleName(d)),b=e.getScaleComponent(d).get("type"),y=Rc(b)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});f.length&&n.push({name:u,value:{},on:[{events:o.map(c=>({scale:e.scaleName(c.channel)})),update:f.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Hm(e)}, fields: ${r+ZE}, values`;return n.concat({name:i,...s?{init:`{${l}: ${y0(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(bo(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===_w).length||n.unshift({name:_w,value:null,on:[{events:"timer{1}",update:`${_w} === null ? {} : ${_w}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${Tt(t.name+b0)})`;if(Kd.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const b of _t(u))u[b]=[{test:`${l}.length && ${l}[0].unit === ${Hm(e)}`,...u[b]},{value:0}];const{fill:f,fillOpacity:c,cursor:d,...h}=t.mark,p=_t(h).reduce((b,y)=>(b[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],b),{}),m=d??(t.translate?"move":null);return[{name:`${r+Lb}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:c}},update:u}},...n,{name:r+Lb,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function lwt(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=Tt(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===fo?"width":"height").signal,f=`${o}(unit)`,c=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${f}, ${f}]`},{events:h,update:`[${s}[0], clamp(${f}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=Kd.defined(t),p=e.getScaleComponent(o),m=p?p.get("type"):void 0,b=r?{init:y0(r,!0,l)}:{value:[]};return c.push({events:{signal:t.name+XOe},update:Rc(m)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...b,on:c},{name:d,...r?{init:y0(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===fo?0:1,h=t.name+ZOe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:c}]}}function hv({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=VE(t)&&t.condition;let s=[];o&&(s=Pt(o).map(u=>{const f=i(u);if(X1t(u)){const{param:c,empty:d}=u;return{test:p6e(e,{param:c,empty:d}),...f}}else return{test:zk(e,u.test),...f}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function j7(e,t="text"){const n=e.encoding[t];return hv({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>nR(r,e.config),invalidValueRef:void 0})}function nR(e,t,n="datum"){if(e){if(Fc(e))return oo(e.value);if(Wn(e)){const{format:r,formatType:i}=Ok(e);return w7({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function KOe(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(at(s))return{tooltip:P2e({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return hv({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const f=nR(u,i,a);if(f)return f;if(u===null)return;let c=Oi("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Nt(c))return{value:c};if($t(c))return cn(c)?c:c.content==="encoding"?P2e(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function JOe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(f,c){const d=P0(c),h=nl(f)?f:{...f,type:e[d].type},p=h.title||A7(h,i),m=Pt(p).join(", ").replaceAll(/"/g,'\\"');let b;if(zo(c)){const y=c==="x"?"x2":"y2",v=Mc(e[y]);if(Ws(h.bin)&&v){const w=Ft(h,{expr:s}),E=Ft(v,{expr:s}),{format:A,formatType:T}=Ok(h);b=HE(w,E,A,T,i),o.add(y)}}if((zo(c)||c===qu||c===jc)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:y,formatType:v}=Ok(h);b=w7({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}b??(b=nR(h,i,s).signal),a.push({channel:c,key:m,value:b})}k7(e,(f,c)=>{kt(f)?l(f,c):VL(f)&&l(f.condition,c)});const u={};for(const{channel:f,key:c,value:d}of a)!o.has(f)&&!u[c]&&(u[c]=d);return u}function P2e(e,t,n,{reactiveGeom:r}={}){const i=JOe(e,t,n,{reactiveGeom:r}),o=Zp(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function uwt(e){const{markDef:t,config:n}=e,r=Oi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...cwt(e),...fwt(e)}}function cwt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Oi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Yt(Fyt,t)?{}:{ariaRoleDescription:{value:t}}}function fwt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return hv({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>nR(l,e.config),invalidValueRef:void 0});const s=Oi("description",n,r);if(s!=null)return{description:oo(s)};if(r.aria===!1)return{};const a=JOe(t,i,r);if(!$i(a))return{description:{signal:Zp(a).map(([l,u],f)=>`"${f>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Zs(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Oi(e,r,o,{vgChannel:s,ignoreVgConfig:!VE(u)})),l!==void 0&&(a=oo(l)));const f={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},c=BMe({...f,scaleChannel:e,channelDef:u});return hv({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:c,mainRefFn:h=>x7({...f,channel:e,channelDef:h,stack:null,defaultRef:a})})}function QOe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??Oi("filled",n,i),a=_r(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Oi(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=Oi(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],f=s?"fill":"stroke",c={...l?{fill:oo(l)}:{},...u?{stroke:oo(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Ct(cMe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...c,...Zs("color",e,{vgChannel:f,defaultValue:s?l:u}),...Zs("fill",e,{defaultValue:r.fill?l:void 0}),...Zs("stroke",e,{defaultValue:r.stroke?u:void 0})}}function dwt(e){const{encoding:t,mark:n}=e,r=t.order;return!bg(n)&&Fc(r)?hv({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>oo(i.value),invalidValueRef:void 0}):{}}function S1({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:x7({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:oo(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Ka(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[ed(e)],f=t.scaleName(e),c=t.getScaleComponent(e),{offset:d,offsetType:h}=S1({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=U7({model:t,defaultPos:n,channel:e,scaleName:f,scale:c}),m=!l&&zo(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:hwt({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:f,scale:c,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function hwt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Wn(n)&&i&&t===i.fieldChannel){if(kt(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Rk({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Um(n,r,{suffix:"end"},{offset:o})}return v7(e)}function U7({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=P0(n),l=Kp(n),u=Oi(n,o,s,{vgChannel:l});if(u!==void 0)return D2(n,u);switch(t){case"zeroOrMin":return N2e({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return N2e({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[Pl(n)],mult:.5}}}}function N2e({mainChannel:e,config:t,...n}){const r=NMe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const pwt={left:"x",center:"xc",right:"x2"},gwt={top:"y",middle:"yc",bottom:"y2"};function e6e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Kp(e);const i=e==="x"?"align":"baseline",o=Oi(i,t,n);let s;return cn(o)?(Ct(hbt(i)),s=void 0):s=o,e==="x"?pwt[s||(r==="top"?"left":"center")]:gwt[s||r]}function Nk(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?t6e(e,t,{defaultPos:n,defaultPos2:r}):Ka(e,t,{defaultPos:n})}function t6e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=ed(e),a=Pl(e),l=mwt(t,r,s),u=l[a]?e6e(e,i,o):Kp(e);return{...Ka(e,t,{defaultPos:n,vgChannel:u}),...l}}function mwt(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=P0(n),u=Pl(n),f=Kp(n),c=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in o?S1({channel:n,markDef:o,encoding:r,model:e}):S1({channel:l,markDef:o,encoding:r,model:e});if(!c&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const b=Pl(n),y=e.markDef[b];return y!=null?{[b]:{value:y}}:{[f]:{field:e.getName(n)}}}const m=ywt({channel:n,channelDef:c,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return m!==void 0?{[f]:m}:FA(n,o)||FA(n,{[n]:T6(n,o,a.style),[u]:T6(u,o,a.style)})||FA(n,a[i])||FA(n,a.mark)||{[f]:U7({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function ywt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Wn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Um(t,o,{suffix:"start"},{offset:l}):v7({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function FA(e,t){const n=Pl(e),r=Kp(e);if(t[r]!==void 0)return{[r]:D2(e,t[r])};if(t[e]!==void 0)return{[r]:D2(e,t[e])};if(t[n]){const i=t[n];if(g0(i))Ct(abt(n));else return{[n]:D2(e,i)}}}function sh(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=ed(t),a=Pl(t),l=r[t],u=r[s],f=e.getScaleComponent(t),c=f?f.get("type"):void 0,d=i.orient,h=r[a]??r.size??Oi("size",i,n,{vgChannel:a}),p=Y5e(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return kt(l)&&(Zi(l.bin)||Ws(l.bin)||l.timeUnit&&!u)&&!(h&&!g0(h))&&!r[p]&&!Os(c)?xwt({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Wn(l)&&Os(c)||m)&&!u?vwt(l,t,e):t6e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function bwt(e,t,n,r,i,o,s){if(g0(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const f=Bf("minBandSize",{type:s},r);return{signal:f?`max(${vc(f)}, ${u})`:u}}else i.band!==1&&(Ct(ybt(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(cn(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(B0(l)&&li(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:f,tickBandPaddingInner:c}=r.scale,d=Bo(l,s==="tick"?c:s==="bar"?u:f);if(cn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(li(d))return{signal:`${1-d} * ${e}`}}return{value:$6(r.view,e)-2}}function vwt(e,t,n){var R,M;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),f=Pl(t),c=ed(t),d=Y5e(t),h=n.scaleName(d),p=n.getScaleComponent(V9(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let b;(i.size||r.size)&&(m?b=Zs("size",n,{vgChannel:f,defaultRef:oo(r.size)}):Ct(wbt(r.type)));const y=!!b,v=VMe({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(R=u||p)==null?void 0:R.get("type"),useVlSizeChannel:m});b=b||{[f]:bwt(f,h||l,p||u,o,v,!!e,r.type)};const w=((M=u||p)==null?void 0:M.get("type"))==="band"&&g0(v)&&!y?"top":"middle",E=e6e(t,r,o,w),A=E==="xc"||E==="yc",{offset:T,offsetType:D}=S1({channel:t,markDef:r,encoding:i,model:n,bandPosition:A?.5:0}),k=v7({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:T,defaultRef:U7({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:A?D==="encoding"?0:.5:cn(v)?{signal:`(1-${v})/2`}:g0(v)?(1-v.band)/2:0});if(f)return{[E]:k,...b};{const B=Kp(c),K=b[f],L=T?{...K,offset:T}:K;return{[E]:k,[B]:at(k)?[k[0],{...k[1],offset:L}]:{...k,offset:L}}}}function B2e(e,t,n,r,i,o,s){if(U5e(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(cn(n)||cn(i)||cn(r)||o){const u=vc(n),f=vc(i),c=vc(r),d=vc(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,m=c?`${c} + `:"",b=u?`(${u} ? -1 : 1) * `:"",y=f?`(${f} + ${p})`:p;return{signal:m+b+y}}else return i=i||0,r+(n?-i-l:+i+l)}function xwt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var M;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,f=a.get("reverse"),c=VMe({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=(M=r.component.axes[n])==null?void 0:M[0],h=(d==null?void 0:d.get("translate"))??.5,p=zo(n)?Oi("binSpacing",o,i)??0:0,m=ed(n),b=Kp(n),y=Kp(m),v=Bf("minBandSize",o,i),{offset:w}=S1({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:E}=S1({channel:m,markDef:o,encoding:s,model:r,bandPosition:0}),A=q1t({fieldDef:e,scaleName:l}),T=B2e(n,p,f,h,w,v,A),D=B2e(m,p,f,h,E??w,v,A),k=cn(c)?{signal:`(1-${c.signal})/2`}:g0(c)?(1-c.band)/2:.5,R=Jp({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Zi(e.bin)||e.timeUnit){const B=e.timeUnit&&R!==.5;return{[y]:z2e({fieldDef:e,scaleName:l,bandPosition:k,offset:D,useRectOffsetField:B}),[b]:z2e({fieldDef:e,scaleName:l,bandPosition:cn(k)?{signal:`1-${k.signal}`}:1-k,offset:T,useRectOffsetField:B})}}else if(Ws(e.bin)){const B=Um(e,l,{},{offset:D});if(kt(t))return{[y]:B,[b]:Um(t,l,{},{offset:T})};if(N0(e.bin)&&e.bin.step)return{[y]:B,[b]:{signal:`scale("${l}", ${Ft(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Ct(hMe(m))}function z2e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Rk({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:eR,endSuffix:tR}:{}})}const wwt=new Set(["aria","width","height"]);function Hu(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?QOe(e):{};return{..._wt(e.markDef,t),...j2e("fill",n),...j2e("stroke",r),...Zs("opacity",e),...Zs("fillOpacity",e),...Zs("strokeOpacity",e),...Zs("strokeWidth",e),...Zs("strokeDash",e),...dwt(e),...KOe(e),...j7(e,"href"),...uwt(e)}}function j2e(e,t){return t?{[e]:t}:{}}function _wt(e,t){return Ryt.reduce((n,r)=>(!wwt.has(r)&&St(e,r)&&t[r]!=="ignore"&&(n[r]=oo(e[r])),n),{})}function q7(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!td(o)||!(s=e.getScaleType(o)))return;const a=$L(i.aggregate),l=b7({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(z1t(l)){const f=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});f&&r.add(f)}}),r.size>0)return{defined:{signal:[...r].map(o=>BL(o,!0)).join(" && ")}}}function U2e(e,t){if(t!==void 0)return{[e]:oo(t)}}const p4="voronoi",n6e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(p4)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(bg(o))return Ct(Pyt(o)),n;const s={name:e.getName(p4),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...KOe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,f)=>{const c=u.name??"";c===e.component.mark[0].name?a=f:c.includes(p4)&&(l=!0)}),l||n.splice(a+1,0,s),n}},r6e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!M7(e.bind),parse:(e,t,n)=>f6e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=n6e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const f=co(`${r}_${l.field}`);n.filter(d=>d.name===f).length||n.unshift({name:f,...s?{init:y0(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Tt(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+ah),s=r+ZE,a=i.items.map(u=>co(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},Bk="_toggle",i6e={defined:e=>e.type==="point"&&!kf(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Bk,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ah,r=t.name+Bk;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Hm(e)}}, `)+`${r} ? ${n} : null`}},Ewt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!kf(e),parse:(e,t)=>{t.clear&&(t.clear=Nt(t.clear)?cg(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(r6e.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===co(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+ah);r(i,"null"),i6e.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Bk),r(i,"false"))}return n}},o6e={defined:e=>{const t=e.resolve==="global"&&e.bind&&M7(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Oc;return t&&!n&&Ct(jyt),t&&n},parse:(e,t,n)=>{const r=Gn(n);if(r.select=Nt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},f6e(t,r),$t(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Pt(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=l4(t.bind)?t.bind.legend:"click",o=Nt(i)?cg(i,"view"):Pt(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=l4(t.bind)&&t.bind.legend,o=s=>a=>{const l=Gn(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${co(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+ah),s=r+ZE,a=i.items.filter(d=>d.hasLegend).map(d=>co(`${r}_${co(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const f=n.find(d=>d.name===r+Bk),c=l4(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:c}):f.on[0].events=c),n}};function Swt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of ta(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&o6e.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const s6e="_translate_anchor",a6e="_translate_delta",Awt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Kd.defined(t),o=r+s6e,{x:s,y:a}=t.project.hasChannel;let l=cg(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Lb,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?z6(e,fo):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?z6(e,Is):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+a6e,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&q2e(e,t,s,"width",n),a!==void 0&&q2e(e,t,a,"height",n),n}};function q2e(e,t,n,r,i){const o=t.name,s=o+s6e,a=o+a6e,l=n.channel,u=Kd.defined(t),f=i.find(A=>A.name===n.signals[u?"data":"visual"]),c=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),m=u?l===fo?p?"":"-":p?"-":"":"",b=`${s}.extent_${l}`,y=`${m}${a}.${l} / ${u?`${c}`:`span(${b})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${v}(${b}, ${y}${w})`;f.on.push({events:{signal:a},update:u?E:`clampRange(${E}, 0, ${c})`})}const l6e="_zoom_anchor",u6e="_zoom_delta",Cwt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Kd.defined(t),o=r+u6e,{x:s,y:a}=t.project.hasChannel,l=Tt(e.scaleName(fo)),u=Tt(e.scaleName(Is));let f=cg(t.zoom,"scope");return i||(f=f.map(c=>(c.markname=r+Lb,c))),n.push({name:r+l6e,on:[{events:f,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(c=>c).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&H2e(e,t,s,"width",n),a!==void 0&&H2e(e,t,a,"height",n),n}};function H2e(e,t,n,r,i){const o=t.name,s=n.channel,a=Kd.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(s),c=f&&f.get("type"),d=a?z6(e,s):l.name,h=o+u6e,p=`${o}${l6e}.${s}`,m=!a||!f?"zoomLinear":c==="log"?"zoomLog":c==="symlog"?"zoomSymlog":c==="pow"?"zoomPow":"zoomLinear",b=a?c==="pow"?`, ${f.get("exponent")??1}`:c==="symlog"?`, ${f.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${b})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const b0="_store",ah="_tuple",kwt="_modify",c6e="vlSelectionResolve",rR=[Qxt,awt,Zxt,i6e,r6e,Kd,o6e,Ewt,Awt,Cwt,n6e];function Twt(e){let t=e.parent;for(;t&&!iu(t);)t=t.parent;return t}function Hm(e,{escape:t}={escape:!0}){let n=t?Tt(e.name):e.name;const r=Twt(e);if(r){const{facet:i}=r;for(const o of Lu)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Tt(r.vgField(o))}])`)}return n}function H7(e){return ta(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function f6e(e,t){(Nt(t.select)||!t.select.on)&&delete e.events,(Nt(t.select)||!t.select.clear)&&delete e.clear,(Nt(t.select)||!t.select.toggle)&&delete e.toggle}function kf(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function U6(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...U6(e.object)),t.push(...U6(e.property))),t)}function d6e(e){return e.object.type==="MemberExpression"?d6e(e.object):e.object.name==="datum"}function h6e(e){const t=l9(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&d6e(r)&&n.add(U6(r).slice(1).join("."))}),n}class pv extends Di{clone(){return new pv(null,this.model,Gn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=zk(this.model,this.filter,this),this._dependentFields=h6e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Dwt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=co(o.name),a=o.select,l=Nt(a)?a:a.type,u=$t(a)?Gn(a):{type:l},f=r[l];for(const h in f)h==="fields"||h==="encodings"||(h==="mark"&&(u.mark={...f.mark,...u.mark}),(u[h]===void 0||u[h]===!0)&&(u[h]=Gn(f[h]??u[h])));const c=n[s]={...u,name:s,type:l,init:o.value,bind:o.bind,events:Nt(u.on)?cg(u.on,"scope"):Pt(Gn(u.on))};if(kf(c)&&(i++,i>1)){delete n[s];continue}const d=Gn(o);for(const h of rR)h.defined(c)&&h.parse&&h.parse(e,c,d)}return i>1&&Ct(Wyt),n}function p6e(e,t,n,r="datum"){const i=Nt(t)?t:t.param,o=co(i),s=Tt(o+b0);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Tt(a.resolve)})`,f=`${l}${s}, ${r}${u}`,c=`length(data(${s}))`;return t.empty===!1?`${c} && ${f}`:`!${c} || ${f}`}function g6e(e,t,n){const r=co(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Ct(Yyt(o));else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Ct(Xyt(a,i,n,o))):o=a[0].field}return`${s.name}[${Tt(Bu(o))}]`}function Lwt(e,t){for(const[n,r]of Zp(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Rl(new pv(t,e,{param:n}),i,vo.Lookup,e.component.data.outputNodeRefCounts)}}function zk(e,t,n){return T2(t,r=>Nt(r)?r:i1t(r)?p6e(e,r,n):AMe(r))}function Rwt(e,t){if(e)return at(e)&&!ap(e)?e.map(n=>A7(n,t)).join(", "):e}function g4(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function n2(e,t,n,r={header:!1}){var c,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...f}=e.combine();if(!i){for(const h in f){const p=h,m=uvt[p],b=f[p];if(m&&m!==t&&m!=="both")delete f[p];else if(XE(b)){const{condition:y,...v}=b,w=Pt(y),E=b2e[p];if(E){const{vgProp:A,part:T}=E,D=[...w.map(k=>{const{test:R,...M}=k;return{test:zk(null,R),...M}}),v];g4(f,T,A,D),delete f[p]}else if(E===null){const A={signal:w.map(T=>{const{test:D,...k}=T;return`${zk(null,D)} ? ${n2e(k)} : `}).join("")+n2e(v)};f[p]=A}}else if(cn(b)){const y=b2e[p];if(y){const{vgProp:v,part:w}=y;g4(f,w,v,b),delete f[p]}}_r(["labelAlign","labelBaseline"],p)&&f[p]===null&&delete f[p]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:h}=f.encode;f.encode={...h?{grid:h}:{}},$i(f.encode)&&delete f.encode}return{scale:s,orient:o,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Bo(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(c=f.encode)==null?void 0:c.labels)!=null&&d.update&&cn(f.encode.labels.update.text)&&(p=c0(a,"datum.label",f.encode.labels.update.text.signal)),g4(f,"labels","text",{signal:p})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const p of nOe)e.hasAxisPart(p)||delete f.encode[p];$i(f.encode)&&delete f.encode}const h=Rwt(l,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:Bo(u,0)}}}}function m6e(e){const{axes:t}=e.component,n=[];for(const r of xh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function Fwt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>n2(i,"grid",t)),...r.map(i=>n2(i,"grid",t)),...n.map(i=>n2(i,"main",t)),...r.map(i=>n2(i,"main",t))].filter(i=>i)}function G2e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([..._t(s),..._t(a)]),u={};for(const f of l.values())u[f]={signal:`${r.signal} === "${o}" ? ${vc(s[f])} : ${vc(a[f])}`};return u}return t[i]})])}function Mwt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:DMe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=cn(n)?"axisOrient":`axis${NE(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:G2e(a,r,e,n),vgAxisConfig:G2e(l,r,e,n),axisConfigStyle:Owt([...l,...a],r)}}function Owt(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=Pt(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function q6(e,t,n,r={}){var o;const i=rMe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const V2e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??$wt(n,e),gridScale:({model:e,channel:t})=>Iwt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||b6e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||y6e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Nwt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Bwt(t.type,n,kt(t)&&!!t.timeUnit,kt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??jwt({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:Uwt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=v6e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return oMe(i?[m2e(i)]:[],kt(s)?[m2e(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>qwt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Hwt(n,t)};function $wt(e,t){return!Os(e)&&kt(t)&&!Zi(t==null?void 0:t.bin)&&!Ws(t==null?void 0:t.bin)}function Iwt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Pwt(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return cn(o)?o:w_(o);{const{configValue:s}=q6("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?w_(s):n===fo&&_r([h7,d7],e.type)&&!(kt(e)&&e.timeUnit)?270:void 0}}function H6(e){return`(((${e.signal} % 360) + 360) % 360)`}function y6e(e,t,n,r){if(e!==void 0)if(n==="x"){if(cn(e)){const i=H6(e),o=cn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(cn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(cn(e)){const i=H6(e),o=cn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(cn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function b6e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(cn(e)){const s=H6(e),a=cn(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(cn(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Nwt(e,t){if(t==="x"&&_r(["quantitative","temporal"],e))return!0}function Bwt(e,t,n,r){if(n&&!$t(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function zwt(e){return e==="x"?"bottom":"left"}function jwt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Os(t)&&t!=="log"){if(kt(e)){if(Zi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&_r(["month","hours","day","quarter"],(i=Fs(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Uwt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(kt(t)){const{timeUnit:n}=t;if(n){const r=_Me(n);if(r)return{signal:r}}}}function v6e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return sMe(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function qwt(e,t){const n=e.values;if(at(n))return tOe(t,n);if(cn(n))return n}function Hwt(e,t){return e==="rect"&&Mk(t)?1:0}class A1 extends Di{clone(){return new A1(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=h6e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(U0(r)&&GMe(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,f)=>`${AMe({field:o,timeUnit:s,equal:u})} ? ${f} : `).join("")+a.length;t=new A1(t,{calculate:l,as:C1(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Mr(this.transform)}`}}function C1(e,t,n){return Ft(e,{prefix:t,suffix:"sort_index",...n})}function iR(e,t){return _r(["top","bottom"],t)?"column":_r(["left","right"],t)||e==="row"?"row":"column"}function k1(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Bo((t||{})[e],i[e],n.header[e])}function oR(e,t,n,r){const i={};for(const o of e){const s=k1(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const G7=["row","column"],V7=["header","footer"];function Gwt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=oR(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=iR(t,a),u=w_(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...w6e(u,l),...x6e(l,u,o),..._6e(r,i,t,Rvt,xOe)}}}function x6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=b6e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function w6e(e,t){const n=y6e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Vwt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of V7)if(n[i])for(const o of n[i]){const s=Ywt(e,t,i,n,o);s!=null&&r.push(s)}return r}function Wwt(e,t){const{sort:n}=e;return Zd(n)?{field:Ft(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:C1(e,t,{expr:"datum"}),order:"ascending"}:{field:Ft(e,{expr:"datum"}),order:n??"ascending"}}function G6(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=oR(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=w7({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=iR(t,a);return{text:{signal:l?c0(c0(l,"datum.label",u),"datum.value",Ft(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...w6e(o,f),...x6e(f,o,s),..._6e(n,e,t,Fvt,wOe)}}function Ywt(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:c}=oR(["labelOrient"],s.header,a,t);(t==="row"&&!_r(["top","bottom"],c)||t==="column"&&!_r(["left","right"],c))&&(o=G6(s,t,a))}const l=iu(e)&&!GE(e.facet),u=i.axes,f=(u==null?void 0:u.length)>0;if(o||f){const c=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Wwt(s,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[c]:i.sizeSignal}}}:{},...f?{axes:u}:{}}}}return null}const Xwt={column:{start:0,end:1},row:{start:1,end:0}};function Zwt(e,t){return Xwt[t][e]}function Kwt(e,t){const n={};for(const r of Lu){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=oR(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=iR(r,s),l=Zwt(o,a);l!==void 0&&(n[a]=l)}}return $i(n)?void 0:n}function _6e(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=k1(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function W7(e){return[...MA(e,"width"),...MA(e,"height"),...MA(e,"childWidth"),...MA(e,"childHeight")]}function MA(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Os(s)&&B0(a)){const l=e.scaleName(n);return iu(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[W2e(l,a)]:[W2e(l,a),{name:i,update:E6e(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=O6(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function W2e(e,t){const n=`${e}_step`;return cn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function E6e(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Bo(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${vc(s)}, ${vc(o)}) * ${e}_step`}function S6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function A6e(e,t){return _t(e).reduce((n,r)=>({...n,...hv({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>oo(i.value),invalidValueRef:void 0})}),{})}function C6e(e,t){if(iu(t))return e==="theta"?"independent":"shared";if(yv(t))return"shared";if(eB(t))return zo(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Y7(e,t){const n=e.scale[t],r=zo(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ct(Cbt(t)),"independent"):e[r][t]||"shared"}const Jwt={...$vt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},k6e=_t(Jwt);class Qwt extends _h{}const Y2e={symbols:e2t,gradient:t2t,labels:n2t,entries:r2t};function e2t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,f=s.filled&&u!=="trail";let c={...Oyt({},n,L1t),...QOe(n,{filled:f})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=d===void 0?T6e(a.opacity)??s.opacity:void 0;if(c.fill){if(r==="fill"||f&&r===$l)delete c.fill;else if(St(c.fill,"field"))h?delete c.fill:(c.fill=oo(l.legend.symbolBaseFillColor??"black"),c.fillOpacity=oo(m??1));else if(at(c.fill)){const b=V6(a.fill??a.color)??s.fill??(f&&s.color);b&&(c.fill=oo(b))}}if(c.stroke){if(r==="stroke"||!f&&r===$l)delete c.stroke;else if(St(c.stroke,"field")||p)delete c.stroke;else if(at(c.stroke)){const b=Bo(V6(a.stroke||a.color),s.stroke,f?s.color:void 0);b&&(c.stroke={value:b})}}if(r!==vh){const b=kt(t)&&L6e(n,i,t);b?c.opacity=[{test:b,...oo(m??1)},oo(l.legend.unselectedOpacity)]:m&&(c.opacity=oo(m))}return c={...c,...e},$i(c)?void 0:c}function t2t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?T6e(s.opacity)||o.opacity:void 0;return u&&(a.opacity=oo(u)),a={...a,...e},$i(a)?void 0:a}function n2t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=kt(t)?L6e(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:f}=o;let c;m0(f)?c=xc({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:f,config:s}):u===void 0&&f===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?c=xc({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&kt(t)&&t.timeUnit===void 0&&(c=xc({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...c?{text:c}:{},...e};return $i(d)?void 0:d}function r2t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function T6e(e){return D6e(e,(t,n)=>Math.max(t,n.value))}function V6(e){return D6e(e,(t,n)=>Bo(t,n.value))}function D6e(e,t){if(K1t(e))return Pt(e.condition).reduce(t,e.value);if(Fc(e))return e.value}function L6e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Tt(n.field);return r.map(o=>`(!length(data(${Tt(co(o)+b0)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const X2e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return UMe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return qMe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??c2t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??f2t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??o2t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Db(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Tb(n)&&wf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>i2t(t,e)};function i2t(e,t){const n=e.values;if(at(n))return tOe(t,n);if(cn(n))return n}function o2t(e,t,n,r){if(t!=="shape"){const i=V6(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function s2t(e){const{legend:t}=e;return Bo(t.type,a2t(e))}function a2t({channel:e,timeUnit:t,scaleType:n}){if(Tb(e)){if(_r(["quarter","month","day"],t))return"symbol";if(wf(n))return"gradient"}return"symbol"}function l2t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??u2t(n,t)}function u2t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function c2t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(wf(i))return n==="horizontal"?r==="top"||r==="bottom"?Z2e(t,"width",s,o):s:Z2e(t,"height",l,a)}function Z2e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function f2t(e){if(_r(["quantile","threshold","log","symlog"],e))return"greedy"}function R6e(e){const t=bo(e)?d2t(e):m2t(e);return e.component.legends=t,t}function d2t(e){const{encoding:t}=e,n={};for(const r of[$l,...EOe]){const i=ms(t[r]);!i||!e.getScaleComponent(r)||r===Il&&kt(i)&&i.type===dv||(n[r]=g2t(e,r))}return n}function h2t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function p2t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function g2t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new Qwt({},h2t(e,t));Swt(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),f=ms(i[t]),c=kt(f)?(E=Fs(f.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||o.legend.orient||"right",h=s2t({legend:n,channel:t,timeUnit:c,scaleType:u}),p=l2t({legend:n,legendType:h,orient:d,legendConfig:s}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:s,config:o,scaleType:u,orient:d,legendType:h,direction:p};for(const A of k6e){if(h==="gradient"&&A.startsWith("symbol")||h==="symbol"&&A.startsWith("gradient"))continue;const T=A in X2e?X2e[A](m):n[A];if(T!==void 0){const D=p2t(T,A,n,e.fieldDef(t));(D||o.legend[A]===void 0)&&a.set(A,T,D)}}const b=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},w={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:a,legendType:h};for(const A of["labels","legend","title","symbols","gradient","entries"]){const T=A6e(b[A]??{},e),D=A in Y2e?Y2e[A](T,w):T;D!==void 0&&!$i(D)&&(v[A]={...y!=null&&y.length&&kt(f)?{name:`${co(f.field)}_legend_${A}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:D})}return $i(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function m2t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){R6e(r);for(const i of _t(r.component.legends))n.legend[i]=Y7(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=F6e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of _t(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function F6e(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of k6e){const f=Qp(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(c,d)=>{switch(u){case"symbolType":return y2t(c,d);case"title":return aMe(c,d);case"type":return i=!0,ql("symbol")}return QL(c,d,u,"legend")});e.setWithExplicit(u,f)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&Tk(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Tk(e.explicit,["encode","gradient"])),e}function y2t(e,t){return t.value==="circle"?t:e}function b2t(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function M6e(e){const t=e.component.legends,n={};for(const i of _t(t)){const o=e.getScaleComponent(i),s=Ii(o.get("domains"));if(n[s])for(const a of n[s])F6e(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return ta(n).flat().map(i=>v2t(i,e.config)).filter(i=>i!==void 0)}function v2t(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const f of EOe)o[f]&&delete u[f]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&cn(o.encode.labels.update.text)&&(u=c0(r,"datum.label",o.encode.labels.update.text.signal)),b2t(o,"labels","text",{signal:u})}return o}}function x2t(e){return yv(e)||eB(e)?w2t(e):O6e(e)}function w2t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),O6e(e))}function O6e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=cn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return _r(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const _2t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class $6e extends _h{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function I6e(e){e.component.projection=bo(e)?E2t(e):C2t(e)}function E2t(e){if(e.hasProjection){const t=Ys(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?S2t(e):void 0,o=new $6e(e.projectionName(!0),{...Ys(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function S2t(e){const t=[],{encoding:n}=e;for(const r of[[qc,Uc],[zu,Hc]])(ms(n[r[0]])||ms(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Il)&&e.typedFieldDef(Il).type===dv&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(vo.Main)),t}function A2t(e,t){const n=B9(_2t,i=>!!(!Yt(e.explicit,i)&&!Yt(t.explicit,i)||Yt(e.explicit,i)&&Yt(t.explicit,i)&&Jl(e.get(i),t.get(i))));if(Jl(e.size,t.size)){if(n)return e;if(Jl(e.explicit,{}))return t;if(Jl(t.explicit,{}))return e}return null}function C2t(e){if(e.children.length===0)return;let t;for(const r of e.children)I6e(r);const n=B9(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=A2t(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new $6e(r,t.specifiedProjection,t.size,Gn(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function k2t(e,t,n,r){if(YE(t,n)){const i=bo(e)?e.axis(n)??e.legend(n)??{}:{},o=Ft(t,{expr:"datum"}),s=Ft(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ft(t,{binSuffix:"range",forAs:!0}),formula:HE(o,s,i.format,i.formatType,r)}}return{}}function P6e(e,t){return`${Q5e(e)}_${t}`}function T2t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function X7(e,t,n){const r=WL(n,void 0)??{},i=P6e(r,t);return e.getName(`${i}_bins`)}function D2t(e){return"as"in e}function K2e(e,t,n){let r,i;D2t(e)?r=Nt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ft(e,{forAs:!0}),Ft(e,{binSuffix:"end",forAs:!0})];const o={...WL(t,void 0)},s=P6e(o,e.field),{signal:a,extentSignal:l}=T2t(n,s);if(IL(o.extent)){const f=o.extent;i=g6e(n,f.param,f),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class Tf extends Di{clone(){return new Tf(null,Gn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(nl(o)&&Zi(o.bin)){const{key:a,binComponent:l}=K2e(o,o.bin,n);i[a]={...l,...i[a],...k2t(n,o,s,n.config)}}return i},{});return $i(r)?null:new Tf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=K2e(n,n.bin,r);return new Tf(t,{[i]:o})}merge(t,n){for(const r of _t(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=xf([...this.bins[r].as,...t.bins[r].as],Mr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(ta(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ta(this.bins).map(t=>t.field))}hash(){return`Bin ${Mr(this.bins)}`}assemble(){return ta(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:Bu(t.field),as:r,signal:t.signal,...IL(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:Bu(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:Ft({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function L2t(e,t,n,r){var o;const i=bo(r)?r.encoding[ed(t)]:void 0;if(nl(n)&&bo(r)&&WMe(n,i,r.markDef,r.config)){e.add(Ft(n,{})),e.add(Ft(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=Jp({fieldDef:n,markDef:a,config:l});__(s)&&u!==.5&&zo(t)&&(e.add(Ft(n,{suffix:eR})),e.add(Ft(n,{suffix:tR}))),n.bin&&YE(n,t)&&e.add(Ft(n,{binSuffix:"range"}))}else if(H5e(t)){const s=q5e(t);e.add(r.getName(s))}else e.add(Ft(n));return U0(n)&&y1t((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function R2t(e,t){for(const n of _t(t)){const r=t[n];for(const i of _t(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ec extends Di{clone(){return new Ec(null,new Set(this.dimensions),Gn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Ft(s,{forAs:!0})]);else{if(oh(l)||yg(l)){const f=oh(l)?"argmin":"argmax",c=l[f];i[c]??(i[c]={}),i[c][f]=new Set([Ft({op:f,field:c},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([Ft(s,{forAs:!0})]);td(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([Ft({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([Ft({field:u,aggregate:"max"},{forAs:!0})]))}else L2t(o,a,s,n)}),o.size+_t(i).length===0)?null:new Ec(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||Ft(s,{forAs:!0})])):(o[l]??(o[l]={}),(r=o[l])[a]??(r[a]=new Set),o[l][a].add(u||Ft(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+_t(o).length===0?null:new Ec(t,i,o)}merge(t){return $5e(this.dimensions,t.dimensions)?(R2t(this.measures,t.measures),!0):(Ubt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,..._t(this.measures)])}producedFields(){const t=new Set;for(const n of _t(this.measures))for(const r of _t(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Mr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of _t(this.measures))for(const s of _t(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:Bu(o));return{type:"aggregate",groupby:[...this.dimensions].map(Bu),ops:t,fields:n,as:r}}}class gv extends Di{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Lu){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[Ft(s),...Zi(a)?[Ft(s,{binSuffix:"end"})]:[]],...Zd(l)?{sortField:l}:at(l)?{sortIndexField:C1(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Lu)this[n]&&(t+=` ${n.charAt(0)}:${Mr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Lu)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Lu)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of xh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Os(i)&&B0(o)){const s=sR(this.childModel,n),a=Q7(s);a?t[n]=a:Ct(Q9(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:f=HL,field:c}=l;o.push(c),s.push(f),a.push(Ft(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const u of G7){for(const f of V7){const c=(r[u]&&r[u][f])??[];for(const d of c)if(((l=d.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const f=`length(data("${this.facet.name}"))`,c=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:c}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Xd,Yd])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function J2e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function F2t(e,t){const n=U9(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=J2e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=J2e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ct(Kyt(t)),null}function M2t(e){const t={};return zC(e.filter,n=>{if(SMe(n)){let r=null;o7(n)?r=Xl(n.equal):a7(n)?r=Xl(n.lte):s7(n)?r=Xl(n.lt):l7(n)?r=Xl(n.gt):u7(n)?r=Xl(n.gte):c7(n)?r=n.range[0]:f7(n)&&(r=(n.oneOf??n.in)[0]),r&&(z0(r)?t[n.field]="date":li(r)?t[n.field]="number":Nt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function O2t(e){const t={};function n(r){_1(r)?t[r.field]="date":r.type==="quantitative"&&Ayt(r.aggregate)?t[r.field]="number":m1(r.field)>1?r.field in t||(t[r.field]="flatten"):U0(r)&&Zd(r.sort)&&m1(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((bo(e)||iu(e))&&e.forEachFieldDef((r,i)=>{if(nl(r))n(r);else{const o=P0(i),s=e.fieldDef(o);n({...r,type:s.type})}}),bo(e)){const{mark:r,markDef:i,encoding:o}=e;if(bg(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];kt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function $2t(e){const t={};if(bo(e)&&e.component.selection)for(const n of _t(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&m1(i.field)>1&&(t[i.field]="flatten")}return t}class Ca extends Di{clone(){return new Ca(null,Gn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Mr(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!Ip(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of _t(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Ct(l2e(a,r[a],l.value)))}for(const a of _t(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Ct(l2e(a,n[a],l)))}const o=new _h(n,r);i.copyAll(o);const s={};for(const a of _t(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return _t(s).length===0||i.parseNothing?null:new Ca(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of _t(this._parse)){const r=this._parse[n];m1(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(_t(this._parse))}dependentFields(){return new Set(_t(this._parse))}assembleTransforms(t=!1){return _t(this._parse).filter(n=>t?m1(n)>1:!0).map(n=>{const r=F2t(n,this._parse[n]);return r?{type:"formula",expr:r,as:cv(n)}:null}).filter(n=>n!==null)}}class eg extends Di{clone(){return new eg(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Oc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Oc}}}class KE extends Di{clone(){return new KE(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Mr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class JE extends Di{clone(){return new JE(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Mr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class v0 extends Di{constructor(t){super(null),t??(t={name:"source"});let n;if(Ip(t)||(n=t.format?{...Ll(t.format,["parse"])}:{}),E_(t))this._data={values:t.values};else if(E1(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];_r(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else jOe(t)?this._data={values:[{type:"Sphere"}]}:(BOe(t)||Ip(t))&&(this._data={});this._generator=Ip(t),t.name&&(this._name=t.name),n&&!$i(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Q2e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},I2t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},r2;function Z7(e){return e instanceof v0||e instanceof KE||e instanceof JE}class K7{constructor(){r2.set(this,void 0),Q2e(this,r2,!1,"f")}setModified(){Q2e(this,r2,!0,"f")}get modifiedFlag(){return I2t(this,r2,"f")}}r2=new WeakMap;class q0 extends K7{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class J7 extends K7{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class P2t extends J7{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of _t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class N2t extends J7{constructor(t){super(),this.requiresSelectionId=t&&H7(t)}run(t){t instanceof eg&&(this.requiresSelectionId&&(Z7(t.parent)||t.parent instanceof Ec||t.parent instanceof Ca)||(this.setModified(),t.remove()))}}class B2t extends K7{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Cf&&(r=t.producedFields(),z9(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class z2t extends J7{constructor(){super()}run(t){t instanceof Rl&&!t.isRequired()&&(this.setModified(),t.remove())}}class j2t extends q0{run(t){if(!Z7(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Ca)if(t instanceof Ca)this.setModified(),t.merge(n);else{if(j9(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class U2t extends q0{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Ca);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of _t(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!$i(i)){this.setModified();const s=new Ca(t,i);for(const a of n){if(a instanceof Ca)for(const l of _t(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Ca&&_t(a.parse).length===0&&a.remove()}}}}}class q2t extends q0{run(t){t instanceof Rl||t.numChildren()>0||t instanceof gv||t instanceof v0||(this.setModified(),t.remove())}}class H2t extends q0{run(t){const n=t.children.filter(i=>i instanceof Cf),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class G2t extends q0{run(t){const n=t.children.filter(i=>i instanceof Ec),r={};for(const i of n){const o=Mr(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of _t(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class V2t extends q0{constructor(t){super(),this.model=t}run(t){const n=!(Z7(t)||t instanceof pv||t instanceof Ca||t instanceof eg),r=[],i=[];for(const o of t.children)o instanceof Tf&&(n&&!j9(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Tf?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class W2t extends q0{run(t){const n=[...t.children];if(!g1(n,s=>s instanceof Rl)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Rl){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Rl)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class H0 extends Di{clone(){return new H0(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`JoinAggregateTransform ${Mr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class T1 extends Di{clone(){return new T1(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,f,c)=>{const d=td(c)&&n.getScaleComponent(c);if(d){const h=d.get("type"),{aggregate:p}=f,m=b7({scaleChannel:c,markDef:o,config:i,scaleType:h,isCountAggregate:$L(p)});m!=="show"&&m!=="always-valid"&&(u[f.field]=f)}return u},{});return _t(l).length?new T1(t,l):null}dependentFields(){return new Set(_t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Mr(this.filter)}`}assemble(){const t=_t(this.filter).reduce((n,r)=>{const i=this.filter[r],o=Ft(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${W6(o)}))`):i.type==="quantitative"&&n.push(W6(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function W6(e){return`isValid(${e}) && isFinite(+${e})`}function Y2t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ft(r);return i&&t.push(i),t},[])}function X2t(e){return at(e)&&e.every(t=>Nt(t))&&e.length>1}class Jd extends Di{clone(){return new Jd(null,Gn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const c of n.sort)a.push(c.field),l.push(Bo(c.order,"ascending"));const u={field:a,order:l};let f;return X2t(o)?f=o:Nt(o)?f=[o,`${o}_end`]:f=[`${n.stack}_start`,`${n.stack}_end`],new Jd(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:f})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(h=>{const p=i[h];return Mc(p)}).filter(h=>!!h),f=Y2t(n),c=n.encoding.order;let d;if(at(c)||kt(c))d=iMe(c);else{const h=YMe(c)?c.sort:s==="y"?"descending":"ascending";d=f.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Jd(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:f,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Mr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Ft(i,{binSuffix:"mid"})]:[Ft(i,{}),Ft(i,{binSuffix:"end"})]:[Ft(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const f of r){const{bandPosition:c=.5,bin:d}=f;if(d){const h=Ft(f,{expr:"datum"}),p=Ft(f,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${W6(h)} ? ${c}*${h}+${1-c}*${p} : ${h}`,as:Ft(f,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:Ft(f,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class mv extends Di{clone(){return new mv(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`WindowTransform ${Mr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const c of this.transform.window)n.push(c.op),r.push(this.getDefaultName(c)),i.push(c.param===void 0?null:c.param),t.push(c.field===void 0?null:c.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(c=>K9(c)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const c of this.transform.sort)a.push(c.field),l.push(c.order??"ascending");const u={field:a,order:l},f=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...f!==void 0?{ignorePeers:f}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function Z2t(e){function t(n){if(!(n instanceof gv)){const r=n.clone();if(r instanceof Rl){const i=X6+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ec||r instanceof Jd||r instanceof mv||r instanceof H0)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Y6(e){if(e instanceof gv)if(e.numChildren()===1&&!(e.children[0]instanceof Rl)){const t=e.children[0];(t instanceof Ec||t instanceof Jd||t instanceof mv||t instanceof H0)&&t.addDimensions(e.fields),t.swapWithParent(),Y6(e)}else{const t=e.model.component.data.main;N6e(t);const n=Z2t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Y6)}function N6e(e){if(e instanceof Rl&&e.type===vo.Main&&e.numChildren()===1){const t=e.children[0];t instanceof gv||(t.swapWithParent(),N6e(e))}}const X6="scale_",OA=5;function Z6(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Z6(t.children))return!1}return!0}function nc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function e_e(e,t,n){let r=e.sources,i=!1;return i=nc(new z2t,r)||i,i=nc(new N2t(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=nc(new q2t,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=nc(new j2t,r)||i,i=nc(new V2t(t),r)||i,i=nc(new B2t,r)||i,i=nc(new U2t,r)||i,i=nc(new G2t,r)||i,i=nc(new H2t,r)||i,i=nc(new P2t,r)||i,i=nc(new W2t,r)||i),e.sources=r,i}function K2t(e,t){Z6(e.sources);let n=0,r=0;for(let i=0;i<OA&&e_e(e,t,!0);i++)n++;e.sources.map(Y6);for(let i=0;i<OA&&e_e(e,t,!1);i++)r++;Z6(e.sources),Math.max(n,r)===OA&&Ct(`Maximum optimization runs(${OA}) reached.`)}class ks{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ks(()=>t(n))}}function B6e(e){bo(e)?J2t(e):Q2t(e)}function J2t(e){const t=e.component.scales;for(const n of _t(t)){const r=t_t(e,n);if(t[n].setWithExplicit("domains",r),r_t(e,n),e.component.data.isFaceted){let o=e;for(;!iu(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)zd(a)&&(a.data=X6+a.data.replace(X6,""))}}}function Q2t(e){for(const n of e.children)B6e(n);const t=e.component.scales;for(const n of _t(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Qp(r,s.getWithExplicit("domains"),"domains","scale",K6);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Ct(Hyt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function e_t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=t_e(t,n);if(!i){Ct(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=t_e(t,n);if(i)return"unaggregated"}return e}function t_t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=e_t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&ms(r.x2)?ms(r.x)?Qp(tp(n,i,e,"x"),tp(n,i,e,"x2"),"domain","scale",K6):tp(n,i,e,"x2"):t==="y"&&ms(r.y2)?ms(r.y)?Qp(tp(n,i,e,"y"),tp(n,i,e,"y2"),"domain","scale",K6):tp(n,i,e,"y2"):tp(n,i,e,t)}function n_t(e,t,n){return e.map(r=>({signal:`{data: ${YL(r,{timeUnit:n,type:t})}}`}))}function m4(e,t,n){var i;const r=(i=Fs(n))==null?void 0:i.unit;return t==="temporal"||r?n_t(e,t,r):[e]}function tp(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=ms(i[r]),{type:f}=u,c=u.timeUnit,d=Yxt({invalid:Bf("invalid",o,a),isPath:bg(s)});if(m1t(t)){const m=tp(e,void 0,n,r),b=m4(t.unionWith,f,c);return hf([...b,...m.value])}else{if(cn(t))return hf([t]);if(t&&t!=="unaggregated"&&!RMe(t))return hf(m4(t,f,c))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return ql([[0,1]]);const m=n.requestDataName(d);return ql([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=td(r)&&kt(u)?i_t(n,r,e):void 0;if(nd(u)){const m=m4([u.datum],f,c);return ql(m)}const p=u;if(t==="unaggregated"){const{field:m}=u;return ql([{data:n.requestDataName(d),field:Ft({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:Ft({field:m,aggregate:"max"})}])}else if(Zi(p.bin)){if(Os(e))return ql(e==="bin-ordinal"?[]:[{data:x_(h)?n.requestDataName(d):n.requestDataName(vo.Raw),field:n.vgField(r,YE(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!$t(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(Zi(m)){const b=X7(n,p.field,m);return ql([new ks(()=>{const y=n.getSignalName(b);return`[${y}.start, ${y}.stop]`})])}else return ql([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&_r(["time","utc"],e)){const m=i[ed(r)];if(WMe(p,m,o,a)){const b=n.requestDataName(d),y=Jp({fieldDef:p,fieldDef2:m,markDef:o,config:a}),v=__(s)&&y!==.5&&zo(r);return ql([{data:b,field:n.vgField(r,v?{suffix:eR}:{})},{data:b,field:n.vgField(r,{suffix:v?tR:"end"})}])}}return ql(h?[{data:x_(h)?n.requestDataName(d):n.requestDataName(vo.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function y4(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":HL),...r?{field:Bu(r)}:{},...i?{order:i}:{}}}function r_t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=RMe(r)?r:void 0,s=N0(i)&&IL(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function i_t(e,t,n){if(!Os(n))return;const r=e.fieldDef(t),i=r.sort;if(GMe(i))return{op:"min",field:C1(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Zd(i)){const a=o&&!s.has(i.field);return y4(i,a)}else if(Y1t(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:f,field:c}=u,d=o&&!s.has(c);if(oh(f)||yg(f))return y4({field:Ft(u),order:l},d);if(K9(f)||!f)return y4({op:f,field:c,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(_r(["ascending",void 0],i))return!0}}function t_e(e,t){const{aggregate:n,type:r}=e;return n?Nt(n)&&!kyt.has(n)?{valid:!1,reason:vbt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:xbt(e)}:{valid:!0}:{valid:!1,reason:bbt(e)}}function K6(e,t,n,r){return e.explicit&&t.explicit&&Ct(Abt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function o_t(e){const t=xf(e.map(s=>{if(zd(s)){const{sort:a,...l}=s;return l}return s}),Mr),n=xf(e.map(s=>{if(zd(s)){const a=s.sort;return a!==void 0&&!x_(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Mr);if(t.length===0)return;if(t.length===1){const s=e[0];if(zd(s)&&n.length>0){let a=n[0];if(n.length>1){Ct(c2e);const l=n.filter(u=>$t(u)&&"op"in u&&u.op!=="min");n.every(u=>$t(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if($t(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=xf(n.map(s=>x_(s)||!("op"in s)||Nt(s.op)&&Yt(Eyt,s.op)?s:(Ct(kbt(s)),!0)),Mr);let i;r.length===1?i=r[0]:r.length>1&&(Ct(c2e),i=!0);const o=xf(e.map(s=>zd(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Q7(e){if(zd(e)&&Nt(e.field))return e.field;if(Tyt(e)){let t;for(const n of e.fields)if(zd(n)&&Nt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ct(Tbt),t}return Ct(Dbt),t}else if(Dyt(e)){Ct(Lbt);const t=e.fields[0];return Nt(t)?t:void 0}}function sR(e,t){const r=e.component.scales[t].get("domains").map(i=>(zd(i)&&(i.data=e.lookupDataSource(i.data)),i));return o_t(r)}function z6e(e){return yv(e)||eB(e)?e.children.reduce((t,n)=>t.concat(z6e(n)),n_e(e)):n_e(e)}function n_e(e){return _t(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:f,...c}=i,d=s_t(i.range,o,n,e),h=sR(e,n),p=a?owt(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...f!==void 0?{reverse:f}:{},...c}),t},[])}function s_t(e,t,n,r){if(zo(n)){if(B0(e))return{step:{signal:`${t}_step`}}}else if($t(e)&&zd(e))return{...e,data:r.lookupDataSource(e.data)};return e}class j6e extends _h{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(_r([Xs.LOG,Xs.TIME,Xs.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&_r([Xs.LINEAR,Xs.SQRT,Xs.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(at(a)){const l=a[0],u=a[a.length-1];if(li(l)&&li(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const a_t=["range","scheme"];function l_t(e){const t=e.component.scales;for(const n of Z9){const r=t[n];if(!r)continue;const i=u_t(n,e);r.setWithExplicit("range",i)}}function r_e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=Pl(t),s=e.getName(o);if($t(r)&&r.binned&&r.step!==void 0)return new ks(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(Zi(r)){const a=X7(e,i,r);return new ks(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function u_t(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const c of a_t)if(n[c]!==void 0){const d=R6(o,c),h=FMe(e,c);if(!d)Ct(fMe(o,c,e));else if(h)Ct(h);else switch(c){case"range":{const p=n.range;if(at(p)){if(zo(e))return hf(p.map(m=>{if(m==="width"||m==="height"){const b=t.getName(m),y=t.getSignalName.bind(t);return ks.fromName(y,b)}return m}))}else if($t(p))return hf({data:t.requestDataName(vo.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return hf(p)}case"scheme":return hf(c_t(n[c]))}}const s=e===fo||e==="xOffset"?"width":"height",a=r[s];if(jf(a)){if(zo(e))if(Os(o)){const c=q6e(a,t,e);if(c)return hf({step:c})}else Ct(dMe(s));else if(jE(e)){const c=e===fg?"x":"y";if(t.getScaleComponent(c).get("type")==="band"){const p=H6e(a,o);if(p)return hf(p)}}}const{rangeMin:l,rangeMax:u}=n,f=f_t(e,t);return(l!==void 0||u!==void 0)&&R6(o,"rangeMin")&&at(f)&&f.length===2?hf([l??f[0],u??f[1]]):ql(f)}function c_t(e){return g1t(e)?{scheme:e.name,...Ll(e,["name"])}:{scheme:e}}function U6e(e,t,n,{center:r}={}){const i=Pl(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===Is&&Rc(n)?r?[ks.fromName(a=>`${s(a)}/2`,o),ks.fromName(a=>`-${s(a)}/2`,o)]:[ks.fromName(s,o),0]:r?[ks.fromName(a=>`-${s(a)}/2`,o),ks.fromName(a=>`${s(a)}/2`,o)]:[0,ks.fromName(s,o)]}function f_t(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=ms(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:f}=t.specifiedScales[e];switch(e){case fo:case Is:{if(_r(["point","band"],l)){const c=G6e(e,n,r.view);if(jf(c))return{step:q6e(c,t,e)}}return U6e(e,t,l)}case fg:case fv:return d_t(e,t,l);case bh:{const c=g_t(i,r),d=m_t(i,n,t,r);return v1(l)?p_t(c,d,h_t(l,r,u,e)):[c,d]}case qu:return[0,Math.PI*2];case I0:return[0,360];case jc:return[0,new ks(()=>{const c=t.getSignalName(iu(t.parent)?"child_width":"width"),d=t.getSignalName(iu(t.parent)?"child_height":"height");return`min(${c},${d})/2`})];case dg:return{step:1e3/r.scale.framesPerSecond};case gg:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case mg:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Il:return"symbol";case $l:case Jf:case Qf:return l==="ordinal"?s==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case vh:case hg:case pg:return[r.scale.minOpacity,r.scale.maxOpacity]}}function q6e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=V9(n),s=r[o];if(AOe({step:e,offsetIsDiscrete:Wn(s)&&CMe(s.type)})==="offset"&&oOe(r,o)){const l=t.getScaleComponent(o);let f=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${d}, ${h})`}const c=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${Myt(c)})`}}else return e.step}function H6e(e,t){if(AOe({step:e,offsetIsDiscrete:Os(t)})==="offset")return{step:e.step}}function d_t(e,t,n){const r=e===fg?"x":"y",i=t.getScaleComponent(r);if(!i)return U6e(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=G6e(r,t.size,t.config.view);if(jf(u)){const f=H6e(u,n);if(f)return f}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(kt(u)&&u.timeUnit){const f=_Me(u.timeUnit,p=>`scale('${s}', ${p})`),c=t.config.scale.bandWithNestedOffsetPaddingInner,d=Jp({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(c){const p=cn(c)?`${c.signal}/2`+h:`${c/2+d}`,m=cn(c)?`(1 - ${c.signal}/2)`+h:`${1-c/2+d}`;return[{signal:`${p} * (${f})`},{signal:`${m} * (${f})`}]}return[0,{signal:f}]}return M5e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function G6e(e,t,n){const r=e===fo?"width":"height",i=t[r];return i||Pk(n,r)}function h_t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(Ct(Bbt(r)),3)}}function p_t(e,t,n){const r=()=>{const i=vc(t),o=vc(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return cn(t)?new ks(r):{signal:r()}}function g_t(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(PL("size",e))}const i_e=.95;function m_t(e,t,n,r){const i={x:r_e(n,"x"),y:r_e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=o_e(t,i,r.view);return li(o)?o-1:new ks(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=o_e(t,i,r.view);return li(o)?Math.pow(i_e*o,2):new ks(()=>`pow(${i_e} * ${o.signal}, 2)`)}}throw new Error(PL("size",e))}function o_e(e,t,n){const r=jf(e.width)?e.width.step:$6(n,"width"),i=jf(e.height)?e.height.step:$6(n,"height");return t.x||t.y?new ks(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function V6e(e,t){bo(e)?y_t(e,t):Y6e(e,t)}function y_t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of _t(n)){const l=s[a],u=n[a],f=e.getScaleComponent(a),c=ms(i[a]),d=l[t],h=f.get("type"),p=f.get("padding"),m=f.get("paddingInner"),b=R6(h,t),y=FMe(a,t);if(d!==void 0&&(b?y&&Ct(y):Ct(fMe(h,t,a))),b&&y===void 0)if(d!==void 0){const v=c.timeUnit,w=c.type;switch(t){case"domainMax":case"domainMin":z0(l[t])||w==="temporal"||v?u.set(t,{signal:YL(l[t],{type:w,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=St(s_e,t)?s_e[t]({model:e,channel:a,fieldOrDatumDef:c,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:sOe(i,a),hasSecondaryRangeChannel:!!i[ed(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const s_e={bins:({model:e,fieldOrDatumDef:t})=>kt(t)?b_t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>v_t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>x_t(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>w_t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>__t(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>E_t(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=kt(e)?e.sort:void 0;return S_t(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>A_t(e,t,n,r,i,o.scale,s)};function W6e(e){bo(e)?l_t(e):Y6e(e,"range")}function Y6e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?W6e(r):V6e(r,t);for(const r of _t(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Qp(i,a,t,"scale",NOe((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function b_t(e,t){const n=t.bin;if(Zi(n)){const r=X7(e,t.field,n);return new ks(()=>e.getSignalName(r))}else if(Ws(n)&&N0(n)&&n.step!==void 0)return{step:n.step}}function v_t(e,t){if(_r([$l,Jf,Qf],e)&&t!=="nominal")return"hcl"}function x_t(e,t,n,r,i,o){var s;if(!((s=Mc(o))!=null&&s.bin||at(n)||i!=null||r!=null||_r([Xs.TIME,Xs.UTC],e)))return zo(t)?!0:void 0}function w_t(e,t,n,r,i,o){if(zo(e)){if(wf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Xs.POINT)return n.pointPadding}}function __t(e,t,n,r,i,o=!1){if(e===void 0){if(zo(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:f}=i;return o?f:Bo(s,n==="bar"?a:n==="tick"?u:l)}else if(jE(t)&&r===Xs.BAND)return i.offsetBandPaddingInner}}function E_t(e,t,n,r,i,o=!1){if(e===void 0){if(zo(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Xs.BAND)return Bo(s,cn(r)?{signal:`${r.signal}/2`}:r/2)}else if(jE(t)){if(n===Xs.POINT)return .5;if(n===Xs.BAND)return i.offsetBandPaddingOuter}}}function S_t(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Rc(e)&&t==="descending"?cn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Rc(e)&&t==="descending")return!0}function A_t(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Rc(i)){if(at(n)){const l=n[0],u=n[n.length-1];if(li(l)&&l<=0&&li(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!v1(i))return!0;if(!(kt(t)&&t.bin)&&_r([...xh,...pyt],e)){const{orient:l,type:u}=r;return _r(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:_r(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function C_t(e,t,n,r,i=!1){const o=k_t(t,n,r,i),{type:s}=e;return td(t)?s!==void 0?_1t(t,s)?kt(n)&&!w1t(s,n.type)?(Ct(Ebt(s,o)),o):s:(Ct(_bt(t,s,o)),o):o:null}function k_t(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Tb(e)||o4(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ct(s4(e,"ordinal")),"ordinal";if(i4(e))return"band";if(zo(e)||jE(e)){if(_r(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in X9)return"band";const o=n[Pl(e)];return g0(o)||w1(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Tb(e)?"time":o4(e)==="discrete"?(Ct(s4(e,"temporal")),"ordinal"):kt(t)&&t.timeUnit&&Fs(t.timeUnit).utc?"utc":i4(e)?"band":"time";case"quantitative":return Tb(e)?kt(t)&&Zi(t.bin)?"bin-ordinal":"linear":o4(e)==="discrete"?(Ct(s4(e,"quantitative")),"ordinal"):i4(e)?"band":"linear";case"geojson":return}throw new Error(uMe(t.type))}function T_t(e,{ignoreRange:t}={}){X6e(e),B6e(e);for(const n of x1t)V6e(e,n);t||W6e(e)}function X6e(e){bo(e)?e.component.scales=D_t(e):e.component.scales=R_t(e)}function D_t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of Z9){const s=ms(t[o]);if(s&&n===$Me&&o===Il&&s.type===dv)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=sOe(t,o),u=C_t(a,o,s,r,l);i[o]=new j6e(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const L_t=NOe((e,t)=>d2e(e)-d2e(t));function R_t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){X6e(o);for(const s of _t(o.component.scales))if((t=i.scale)[s]??(t[s]=C6e(s,e)),i.scale[s]==="shared"){const a=r[s],l=o.component.scales[s].getWithExplicit("type");a?c1t(a.value,l.value)?r[s]=Qp(a,l,"type","scale",L_t):(i.scale[s]="independent",delete r[s]):r[s]=l}}for(const o of _t(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new j6e(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}class b4{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function bo(e){return(e==null?void 0:e.type)==="unit"}function iu(e){return(e==null?void 0:e.type)==="facet"}function eB(e){return(e==null?void 0:e.type)==="concat"}function yv(e){return(e==null?void 0:e.type)==="layer"}class tB{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=Ys(a),this.name=t.name??i,this.title=ap(t.title)?{text:t.title}:t.title?Ys(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new b4,this.projectionNameMap=r?r.projectionNameMap:new b4,this.signalNameMap=r?r.signalNameMap:new b4,this.data=t.data,this.description=t.description,this.transforms=Ixt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:zvt(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:GL(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new _h,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Gn(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){T_t(this)}parseProjection(){I6e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){R6e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of _t(r)){const s=r[o];s!==void 0&&(i[o]=oo(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=oo(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:$i(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=Kwt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Lu)t[r].title&&n.push(Gwt(this,r));for(const r of G7)n=n.concat(Vwt(this,r));return n}assembleAxes(){return Fwt(this.component.axes,this.config)}assembleLegends(){return M6e(this)}assembleProjections(){return x2t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...eMe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return _r(["unit","layer"],this.type)?_r(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),$i(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||iu(this.parent)?z6e(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return co((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(vo[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(iu(this.parent)){const n=S6e(t),r=OL(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Os(o)&&B0(s)){const a=i.get("name"),l=sR(this,r),u=Q7(l);if(u){const f=Ft({aggregate:"distinct",field:u},{expr:"datum"});return{signal:E6e(a,i,f)}}else return Ct(Q9(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(V5e(t)&&td(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Nyt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Z6e extends tB{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ft(r,n)}reduceFieldDef(t,n){return gvt(this.getMapping(),(r,i,o)=>{const s=Mc(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){k7(this.getMapping(),(r,i)=>{const o=Mc(r);o&&t(o,i)},n)}}class aR extends Di{clone(){return new aR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Mr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class lR extends Di{clone(){return new lR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Mr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class uR extends Di{clone(){return new uR(this.parent,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Mr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class cR extends Di{clone(){return new cR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Mr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Rb extends Di{clone(){return new Rb(null,Gn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[qc,Uc],[zu,Hc]]){const o=i.map(s=>{const a=ms(n.encoding[s]);return kt(a)?a.field:nd(a)?{expr:`${a.datum}`}:Fc(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new Rb(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Il)){const i=n.typedFieldDef(Il);i.type===dv&&(t=new Rb(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Nt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Mr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class S_ extends Di{clone(){return new S_(null,this.projection,Gn(this.fields),Gn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[qc,Uc],[zu,Hc]]){const i=r.map(s=>{const a=ms(n.encoding[s]);return kt(a)?a.field:nd(a)?{expr:`${a.datum}`}:Fc(a)?{expr:`${a.value}`}:void 0}),o=r[0]===zu?"2":"";(i[0]||i[1])&&(t=new S_(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Nt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Mr(this.fields)} ${Mr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Gm extends Di{clone(){return new Gm(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Gm(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(kt(i)&&kt(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:f,keyvals:c}=s.impute,d=uOe(n.mark,r);return new Gm(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...f?{frame:f}:{},...c!==void 0?{keyvals:c}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Mr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:yxt(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},f={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,f]}else return[l]}}class fR extends Di{clone(){return new fR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Mr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class A_ extends Di{clone(){return new A_(null,Gn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(bxt(s)){let l=Q6e(s.data,o);l||(l=new v0(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new Rl(l,u,vo.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(vxt(s)){const l=s.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(co(l),l)}catch{throw new Error(Uyt(l))}if(a=u.materialized,!a)throw new Error(qyt(l))}return new A_(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Mr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Pt(this.transform.as)}:{}};else{let n=this.transform.as;Nt(n)||(Ct(ebt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class dR extends Di{clone(){return new dR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Mr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class hR extends Di{clone(){return new hR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Mr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class pR extends Di{clone(){return new pR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xf((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Mr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class gR extends Di{clone(){return new gR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Mr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function K6e(e){let t=0;function n(r,i){if(r instanceof v0&&!r.isGenerator&&!E1(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ca&&(r.parent instanceof v0&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof gv){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof KE||r instanceof JE||r instanceof T1||r instanceof pv||r instanceof A1||r instanceof S_||r instanceof Ec||r instanceof A_||r instanceof mv||r instanceof H0||r instanceof cR||r instanceof uR||r instanceof aR||r instanceof fR||r instanceof dR||r instanceof hR||r instanceof eg||r instanceof gR||r instanceof pR||r instanceof lR)&&i.transform.push(r.assemble()),(r instanceof Tf||r instanceof Cf||r instanceof Gm||r instanceof Jd||r instanceof Rb)&&i.transform.push(...r.assemble()),r instanceof Rl&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Rl?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Rl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function F_t(e){const t=[],n=K6e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function M_t(e,t){const n=[],r=K6e(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function O_t(e){return e==="top"||e==="left"||cn(e)?"header":"footer"}function $_t(e){for(const t of Lu)I_t(e,t);a_e(e,"x"),a_e(e,"y")}function I_t(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=k1("title",null,r,t);let u=Db(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=at(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const f=k1("labelOrient",a.header,r,t),c=a.header!==null?Bo((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=_r(["bottom","right"],f)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[J6e(e,t,c)]}}}function J6e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function a_e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Y7(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=O_t(a.get("orient"));s[l]??(s[l]=[J6e(e,o,!1)]);const u=n2(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function P_t(e){nB(e),jk(e,"width"),jk(e,"height")}function N_t(e){nB(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";jk(e,t),jk(e,n)}function nB(e){for(const t of e.children)t.parseLayoutSize()}function jk(e,t){const n=S6e(t),r=OL(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??C6e(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=Qp(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function B_t(e){const{size:t,component:n}=e;for(const r of xh){const i=Pl(r);if(t[i]){const o=t[i];n.layoutSize.set(i,jf(o)?"step":o,!0)}else{const o=z_t(e,i);n.layoutSize.set(i,o,!1)}}}function z_t(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Os(o)){const a=Pk(r.view,t);return B0(s)||jf(a)?"step":a}else return O6(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return O6(r.view,t);{const o=Pk(r.view,t);return jf(o)?o.step:o}}}function J6(e,t,n){return Ft(t,{suffix:`by_${Ft(e)}`,...n})}class L2 extends Z6e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=aB(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!GE(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=_t(t),r={};for(const i of n){if(![Yd,Xd].includes(i)){Ct(PL(i,"facet"));break}const o=t[i];if(o.field===void 0){Ct(D6(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=C7(t,n);return r.header?r.header=Ys(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return St(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=mR(this),this.child.parseData()}parseLayoutSize(){nB(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>kf(t))&&t7(e7)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),$_t(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Lu)for(const r of V7){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=k1("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=iR(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof L2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof L2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ft(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof L2){if(this.child.channelHasField("column")){const i=Ft(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of xh){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Os(s)&&B0(a)){const l=sR(this.child,i),u=Q7(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Ct(Q9(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const f of Lu){const c=this.facet[f];if(c){l.push(Ft(c));const{bin:d,sort:h}=c;if(Zi(d)&&l.push(Ft(c,{binSuffix:"end"})),Zd(h)){const{field:p,op:m=HL}=h,b=J6(c,h);r&&i?(o.push(b),s.push("max"),a.push(b)):(o.push(p),s.push(m),a.push(b))}else if(at(h)){const p=C1(c,f);o.push(p),s.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Zd(r.sort)?[J6(r,r.sort,{expr:"datum"})]:at(r.sort)?[C1(r,t,{expr:"datum"})]:[Ft(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Zd(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return G6(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of G7)if(t[o]){const s=k1("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return G6(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=F_t(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Lu.map(l=>this.facetSortFields(l)).flat(),order:Lu.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(twt(this,[]))}]}getMapping(){return this.facet}}function j_t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Zd(o.sort)){const{field:s,op:a=HL}=o.sort;e=i=new H0(e,{joinaggregate:[{op:a,field:s,as:J6(o,o.sort,{forAs:!0})}],groupby:[Ft(o)]})}return i}return null}function Q6e(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const f=(i=e.format)==null?void 0:i.feature;if((f||u)&&f!==u)continue;const c=(o=a.format)==null?void 0:o.mesh;if(!((l||c)&&l!==c)){if(E_(e)&&E_(a)){if(Jl(e.values,a.values))return s}else if(E1(e)&&E1(a)){if(e.url===a.url)return s}else if(BOe(e)&&e.name===s.dataName)return s}}return null}function U_t(e,t){if(e.data||!e.parent){if(e.data===null){const r=new v0({values:[]});return t.push(r),r}const n=Q6e(e.data,t);if(n)return Ip(e.data)||(n.data.format=O5e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new v0(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function q_t(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(Dxt(i))s=e=new A1(e,i),o="derived";else if(N7(i)){const a=M2t(i);s=e=Ca.makeWithAncestors(e,{},a,n)??e,e=new pv(e,t,i.filter)}else if(OOe(i))s=e=Tf.makeFromTransform(e,i,t),o="number";else if(Rxt(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Ca(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=Cf.makeFromTransform(e,i);else if(Fxt(i))s=e=Ec.makeFromTransform(e,i),o="number",H7(t)&&(e=new eg(e));else if(MOe(i))s=e=A_.make(e,t,i,r++),o="derived";else if(Cxt(i))s=e=new mv(e,i),o="number";else if(kxt(i))s=e=new H0(e,i),o="number";else if(Mxt(i))s=e=Jd.makeFromTransform(e,i),o="derived";else if(Oxt(i))s=e=new cR(e,i),o="derived";else if($xt(i))s=e=new lR(e,i),o="derived";else if(Txt(i))s=e=new uR(e,i),o="derived";else if(xxt(i))s=e=new pR(e,i),o="derived";else if(Axt(i))e=new gR(e,i);else if(Lxt(i))s=e=Gm.makeFromTransform(e,i),o="derived";else if(wxt(i))s=e=new aR(e,i),o="derived";else if(_xt(i))s=e=new dR(e,i),o="derived";else if(Ext(i))s=e=new hR(e,i),o="derived";else if(Sxt(i))s=e=new fR(e,i),o="derived";else{Ct(Qyt(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function mR(e){var b;let t=U_t(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(Ip(i)||E1(i)||E_(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Wxt;Ip(i)?(zOe(i)?t=new JE(t,i.sequence):B7(i)&&(t=new KE(t,i.graticule)),s.parseNothing=!0):((b=i==null?void 0:i.format)==null?void 0:b.parse)===null&&(s.parseNothing=!0),t=Ca.makeExplicit(t,e,s)??t,t=new eg(t);const a=e.parent&&yv(e.parent);(bo(e)||iu(e))&&a&&(t=Tf.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=q_t(t,e,s));const l=$2t(e),u=O2t(e);t=Ca.makeWithAncestors(t,{},{...l,...u},s)??t,bo(e)&&(t=Rb.parseAll(t,e),t=S_.parseAll(t,e)),(bo(e)||iu(e))&&(a||(t=Tf.makeFromEncoding(t,e)??t),t=Cf.makeFromEncoding(t,e)??t,t=A1.parseAllForSortIndex(t,e));const f=t=$A(vo.Raw,e,t);if(bo(e)){const y=Ec.makeFromEncoding(t,e);y&&(t=y,H7(e)&&(t=new eg(t))),t=Gm.makeFromEncoding(t,e)??t,t=Jd.makeFromEncoding(t,e)??t}let c,d;if(bo(e)){const{markDef:y,mark:v,config:w}=e,E=Oi("invalid",y,w),{marks:A,scales:T}=d=UOe({invalid:E,isPath:bg(v)});A!==T&&T==="include-invalid-values"&&(c=t=$A(vo.PreFilterInvalid,e,t)),A==="exclude-invalid-values"&&(t=T1.make(t,e,d)??t)}const h=t=$A(vo.Main,e,t);let p;if(bo(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=T1.make(t,e,d)??t,p=t=$A(vo.PostFilterInvalid,e,t))}bo(e)&&Lwt(e,h);let m=null;if(iu(e)){const y=e.getName("facet");t=j_t(t,e.facet)??t,m=new gv(t,e,y,h.getSource()),n[y]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:m,ancestorParse:s,preFilterInvalid:c,postFilterInvalid:p}}function $A(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new Rl(n,o,e,i);return r[o]=s,s}class H_t extends tB{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Ct(Zyt),this.children=this.getChildren(t).map((u,f)=>aB(u,this,this.getName(`concat_${f}`),void 0,i))}parseData(){this.component.data=mR(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>kf(t))&&t7(e7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return KL(t)?t.vconcat:I7(t)?t.hconcat:t.concat}parseLayoutSize(){N_t(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=W7(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function G_t(e){return e===!1||e===null}const V_t={disable:1,gridScale:1,scale:1,...rOe,labelExpr:1,encode:1},e8e=_t(V_t);class rB extends _h{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new rB(Gn(this.explicit),Gn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!G_t(this.get(t))}hasOrientSignalRef(){return cn(this.explicit.orient)}}function W_t(e,t,n){const{encoding:r,config:i}=e,o=ms(r[t])??ms(r[ed(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(m0(l))return{text:xc({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(x1(o)==="quantitative"){if(w1(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:xc({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:xc({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(x1(o)==="temporal"&&i.timeFormatType&&kt(o)&&!o.timeUnit)return{text:xc({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Y_t(e){return xh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[tEt(n,e)]),t),{})}const X_t={bottom:"top",top:"bottom",left:"right",right:"left"};function Z_t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of _t(i.component.axes))n.axis[o]=Y7(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=K_t(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of xh){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!cn(a)){if(r[a]>0&&!l){const u=X_t[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function K_t(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=J_t(i,o)}}}else return t.map(n=>n.clone());return e}function J_t(e,t){for(const n of e8e){const r=Qp(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return aMe(i,o);case"gridScale":return{explicit:i.explicit,value:Bo(i.value,o.value)}}return QL(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function Q_t(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(cn(n.labelAngle)?n.labelAngle:w_(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===v6e(r,i))return!0}return e===n[t]}const eEt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function tEt(e,t){var y,v;let n=t.axis(e);const r=new rB,i=ms(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||zwt(e),l=t.getScaleComponent(e).get("type"),u=Mwt(e,l,a,t.config),f=n!==void 0?!n:q6("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const c=Pwt(i,n,e,s.style,u),d=qMe(n.formatType,i,l),h=UMe(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:c,format:h,formatType:d,mark:o,config:s};for(const w of e8e){const E=w in V2e?V2e[w](p):v2e(w)?n[w]:void 0,A=E!==void 0,T=Q_t(E,w,n,t,e);if(A&&T)r.set(w,E,T);else{const{configValue:D=void 0,configFrom:k=void 0}=v2e(w)&&w!=="values"?q6(w,s.style,n.style,u):{},R=D!==void 0;A&&!R?r.set(w,E,T):(k!=="vgAxisConfig"||eEt.has(w)&&R||XE(D)||cn(D))&&r.set(w,D,!1)}}const m=n.encoding??{},b=nOe.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const A=A6e(m[E]??{},t),T=E==="labels"?W_t(t,e,A):A;return T!==void 0&&!$i(T)&&(w[E]={update:T}),w},{});return $i(b)||r.set("encode",b,!!n.encoding||n.labelAngle!==void 0),r}function nEt({encoding:e,size:t}){for(const n of xh){const r=Pl(n);jf(t[r])&&Cp(e[n])&&(delete t[r],Ct(dMe(r)))}return t}const rEt={vgMark:"arc",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...sh(e,"radius"),...sh(e,"theta")})},iEt={vgMark:"area",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Nk("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Nk("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...q7(e)})},oEt={vgMark:"rect",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sh(e,"x"),...sh(e,"y")})},sEt={vgMark:"shape",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&kt(n)&&n.type===dv?{field:Ft(n,{expr:"datum"})}:{}}]}},aEt={vgMark:"image",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...sh(e,"x"),...sh(e,"y"),...j7(e,"url")})},lEt={vgMark:"line",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zs("size",e,{vgChannel:"strokeWidth"}),...q7(e)})},uEt={vgMark:"trail",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zs("size",e),...q7(e)})};function iB(e,t){const{config:n}=e;return{...Hu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zs("size",e),...Zs("angle",e),...cEt(e,n,t)}}function cEt(e,t,n){return n?{shape:{value:n}}:Zs("shape",e)}const fEt={vgMark:"symbol",encodeEntry:e=>iB(e)},dEt={vgMark:"symbol",encodeEntry:e=>iB(e,"circle")},hEt={vgMark:"symbol",encodeEntry:e=>iB(e,"square")},pEt={vgMark:"rect",encodeEntry:e=>({...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sh(e,"x"),...sh(e,"y")})},gEt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Nk("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Nk("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Zs("size",e,{vgChannel:"strokeWidth"})}}},mEt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hu(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...j7(e),...Zs("size",e,{vgChannel:"fontSize"}),...Zs("angle",e),...U2e("align",yEt(e.markDef,n,t)),...U2e("baseline",bEt(e.markDef,n,t)),...Ka("radius",e,{defaultPos:null}),...Ka("theta",e,{defaultPos:null})}}};function yEt(e,t,n){if(Oi("align",e,n)===void 0)return"center"}function bEt(e,t,n){if(Oi("baseline",e,n)===void 0)return"middle"}const vEt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Hu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sh(e,i),...Ka(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:oo(Oi("thickness",n,t))}}},IA={arc:rEt,area:iEt,bar:oEt,circle:dEt,geoshape:sEt,image:aEt,line:lEt,point:fEt,rect:pEt,rule:gEt,square:hEt,text:mEt,tick:vEt,trail:uEt};function xEt(e){if(_r([UL,zL,C1t],e.mark)){const t=uOe(e.mark,e.encoding);if(t.length>0)return wEt(e,t)}else if(e.mark===jL){const t=k6.some(n=>Oi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return _Et(e)}return oB(e)}const l_e="faceted_path_";function wEt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:l_e+e.requestDataName(vo.Main),data:e.requestDataName(vo.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:oB(e,{fromPrefix:l_e})}]}const u_e="stack_group_";function _Et(e){var u;const[t]=oB(e,{fromPrefix:u_e}),n=e.scaleName(e.stack.fieldChannel),r=(f={})=>e.vgField(e.stack.fieldChannel,f),i=(f,c)=>{const d=[r({prefix:"min",suffix:"start",expr:c}),r({prefix:"max",suffix:"start",expr:c}),r({prefix:"min",suffix:"end",expr:c}),r({prefix:"max",suffix:"end",expr:c})];return`${f}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...p1(t.encode.update,["y","yc","y2","height",...k6]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ll(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...p1(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ll(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of k6){const c=Bf(f,e.markDef,e.config);t.encode.update[f]?(o[f]=t.encode.update[f],delete t.encode.update[f]):c&&(o[f]=oo(c)),c&&(t.encode.update[f]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const f of e.stack.groupbyChannels){const c=e.fieldDef(f),d=Ft(c);d&&a.push(d),(c!=null&&c.bin||c!=null&&c.timeUnit)&&a.push(Ft(c,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,c)=>{if(t.encode.update[c])return{...f,[c]:t.encode.update[c]};{const d=Bf(c,e.markDef,e.config);return d!==void 0?{...f,[c]:oo(d)}:f}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(vo.Main),name:u_e+e.requestDataName(vo.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function EEt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!at(s)&&Fc(s)&&A6(s.value)||!s&&A6(Oi("order",i,o)))){if((at(s)||kt(s))&&!n)return iMe(s,{expr:"datum"});if(bg(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(kt(l))return{field:a}}}}function oB(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=Bo(r.clip,SEt(e),AEt(e)),a=nMe(r),l=i.key,u=EEt(e),f=CEt(e),c=Oi("aria",r,o),d=IA[n].postEncodingTransform?IA[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:IA[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...f||{},...c===!1?{aria:c}:{},from:{data:t.fromPrefix+e.requestDataName(vo.Main)},encode:{update:IA[n].encodeEntry(e)},...d?{transform:d}:{}}]}function SEt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function AEt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function CEt(e){if(!e.component.selection)return null;const t=_t(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=_t(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class t8e extends Z6e{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,w2e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>{var f,c,d;return(f=u.from)!=null&&f.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+HOe)),(d=(c=u.from)==null?void 0:c.facet)!=null&&d.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u};const s=zf(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=uxt(s,o,{graticule:t.data&&B7(t.data)}));const l=this.encoding=hvt(t.encoding||{},a,s.filled,o);this.markDef=LOe(s,l,o),this.size=nEt({encoding:l,size:w2e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=DOe(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>O7(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===$Me,r=t&&oyt.some(i=>Wn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Z9.reduce((r,i)=>{const o=ms(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ys(t);return at(n)&&(i.domain=n.map(Xl)),at(r)&&(i.range=r.map(Xl)),i}initAxes(t){return xh.reduce((n,r)=>{const i=t[r];if(Wn(i)||r===fo&&Wn(t.x2)||r===Is&&Wn(t.y2)){const o=Wn(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=_t(t),r={};for(const i of n){const o=t[i];r[i]=XE(o)?tMe(o):Xl(o)}return r}initLegends(t){return myt.reduce((n,r)=>{const i=ms(t[r]);if(i&&byt(r)){const o=i.legend;n[r]=o&&Ys(o)}return n},{})}parseData(){this.component.data=mR(this)}parseLayoutSize(){B_t(this)}parseSelections(){this.component.selection=Dwt(this,this.selection)}parseMarkGroup(){this.component.mark=xEt(this)}parseAxesAndHeaders(){this.component.axes=Y_t(this)}assembleSelectionTopLevelSignals(t){return nwt(this,t)}assembleSignals(){return[...m6e(this),...ewt(this,[])]}assembleSelectionData(t){return rwt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return W7(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!yv(this.parent))&&(t=YOe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return qm(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Mc(n)}typedFieldDef(t){const n=this.fieldDef(t);return nl(n)?n:null}}class sB extends tB{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(JL(a))return new sB(a,this,this.getName(`layer_${l}`),s,o);if(wh(a))return new t8e(a,this,this.getName(`layer_${l}`),s,o);throw new Error(J9(a))})}parseData(){this.component.data=mR(this);for(const t of this.children)t.parseData()}parseLayoutSize(){P_t(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>kf(t))&&t7(e7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Z_t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),m6e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),W7(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return iwt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),M6e(this))}}function aB(e,t,n,r,i){if(GL(e))return new L2(e,t,n,i);if(JL(e))return new sB(e,t,n,r,i);if(wh(e))return new t8e(e,t,n,r,i);if(Pvt(e))return new H_t(e,t,n,i);throw new Error(J9(e))}function kEt(e,t={}){t.logger&&zbt(t.logger),t.fieldTitle&&QMe(t.fieldTitle);try{const n=TOe(J1(t.config,e.config)),r=POe(e,n),i=aB(r,null,"",void 0,n);return i.parse(),K2t(i.component.data,i),{spec:DEt(i,TEt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&jbt(),t.fieldTitle&&ivt()}}function TEt(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Nt(t)&&(t={type:t}),i&&o&&Hxt(t.type)){if(i==="step"&&o==="step")Ct(o2e()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Ct(o2e(OL(s)));const a=s==="width"?"height":"width";t.type=Gxt(a)}}return{..._t(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...M2e(n,!1),...M2e(e,!0)}}function DEt(e,t,n={},r){const i=e.config?Kvt(e.config):void 0,o=M_t(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...l?{title:l}:{},...u?{style:u}:{},...f?{encode:{update:f}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...SOe(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const LEt=Q0t.version,REt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:m1,accessPathWithDatum:U9,accessWithDatumToUnescapedPath:ki,compile:kEt,contains:_r,deepEqual:Jl,deleteNestedProperty:Tk,duplicate:Gn,entries:Zp,every:B9,fieldIntersection:j9,flatAccessWithDatum:I5e,getFirstDefined:Bo,hasIntersection:z9,hasProperty:St,hash:Mr,internalField:B5e,isBoolean:x_,isEmpty:$i,isEqual:tyt,isInternalField:z5e,isNullOrFalse:A6,isNumeric:TL,keys:_t,logicalExpr:T2,mergeDeep:O5e,never:M5e,normalize:POe,normalizeAngle:w_,omit:Ll,pick:p1,prefixGenerator:C6,removePathFromField:cv,replaceAll:c0,replacePathInField:Bu,resetIdCounter:ryt,setEqual:$5e,some:g1,stringify:Ii,titleCase:NE,unique:xf,uniqueId:N5e,vals:ta,varName:co,version:LEt},Symbol.toStringTag,{value:"Module"}));function n8e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var FEt="vega-themes",MEt="2.15.0",OEt="Themes for stylized Vega and Vega-Lite visualizations.",$Et=["vega","vega-lite","themes","style"],IEt="BSD-3-Clause",PEt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},NEt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],BEt="build/vega-themes.js",zEt="build/vega-themes.module.js",jEt="build/vega-themes.min.js",UEt="build/vega-themes.min.js",qEt="build/vega-themes.module.d.ts",HEt={type:"git",url:"https://github.com/vega/vega-themes.git"},GEt=["src","build"],VEt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},WEt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},YEt={vega:"*","vega-lite":"*"},XEt={},ZEt={name:FEt,version:MEt,description:OEt,keywords:$Et,license:IEt,author:PEt,contributors:NEt,main:BEt,module:zEt,unpkg:jEt,jsdelivr:UEt,types:qEt,repository:HEt,files:GEt,scripts:VEt,devDependencies:WEt,peerDependencies:YEt,dependencies:XEt};const Gy="#fff",c_e="#888",KEt={background:"#333",view:{stroke:c_e},title:{color:Gy,subtitleColor:Gy},style:{"guide-label":{fill:Gy},"guide-title":{fill:Gy}},axis:{domainColor:Gy,gridColor:c_e,tickColor:Gy}},sm="#4572a7",JEt={background:"#fff",arc:{fill:sm},area:{fill:sm},line:{stroke:sm,strokeWidth:2},path:{stroke:sm},rect:{fill:sm},shape:{stroke:sm},symbol:{fill:sm,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},am="#30a2da",v4="#cbcbcb",QEt="#999",eSt="#333",f_e="#f0f0f0",d_e="#333",tSt={arc:{fill:am},area:{fill:am},axis:{domainColor:v4,grid:!0,gridColor:v4,gridWidth:1,labelColor:QEt,labelFontSize:10,titleColor:eSt,tickColor:v4,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:f_e,group:{fill:f_e},legend:{labelColor:d_e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:d_e,titleFontSize:14,titlePadding:10},line:{stroke:am,strokeWidth:2},path:{stroke:am,strokeWidth:.5},rect:{fill:am},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:am},bar:{binSpacing:2,fill:am,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},lm="#000",nSt={group:{fill:"#e5e5e5"},arc:{fill:lm},area:{fill:lm},line:{stroke:lm},path:{stroke:lm},rect:{fill:lm},shape:{stroke:lm},symbol:{fill:lm,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},rSt=22,iSt="normal",h_e="Benton Gothic, sans-serif",p_e=11.5,oSt="normal",um="#82c6df",x4="Benton Gothic Bold, sans-serif",g_e="normal",m_e=13,Ew={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},sSt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:x4,fontSize:rSt,fontWeight:iSt},arc:{fill:um},area:{fill:um},line:{stroke:um,strokeWidth:2},path:{stroke:um},rect:{fill:um},shape:{stroke:um},symbol:{fill:um,size:30},axis:{labelFont:h_e,labelFontSize:p_e,labelFontWeight:oSt,titleFont:x4,titleFontSize:m_e,titleFontWeight:g_e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:h_e,labelFontSize:p_e,symbolType:"square",titleFont:x4,titleFontSize:m_e,titleFontWeight:g_e},range:{category:Ew["category-6"],diverging:Ew["fireandice-6"],heatmap:Ew["fire-7"],ordinal:Ew["fire-7"],ramp:Ew["fire-7"]}},cm="#ab5787",PA="#979797",aSt={background:"#f9f9f9",arc:{fill:cm},area:{fill:cm},line:{stroke:cm},path:{stroke:cm},rect:{fill:cm},shape:{stroke:cm},symbol:{fill:cm,size:30},axis:{domainColor:PA,domainWidth:.5,gridWidth:.2,labelColor:PA,tickColor:PA,tickWidth:.2,titleColor:PA},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},fm="#3e5c69",lSt={background:"#fff",arc:{fill:fm},area:{fill:fm},line:{stroke:fm},path:{stroke:fm},rect:{fill:fm},shape:{stroke:fm},symbol:{fill:fm},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},bu="#1696d2",y_e="#000000",uSt="#FFFFFF",NA="Lato",w4="Lato",cSt="Lato",fSt="#DEDDDD",dSt=18,Sw={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},hSt={background:uSt,title:{anchor:"start",fontSize:dSt,font:NA},axisX:{domain:!0,domainColor:y_e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:w4,labelAngle:0,tickColor:y_e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:NA},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:fSt,gridWidth:1,labelFontSize:12,labelFont:w4,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:NA,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:w4,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:NA,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Sw["six-groups-cat-1"],diverging:Sw["diverging-colors"],heatmap:Sw["diverging-colors"],ordinal:Sw["six-groups-seq"],ramp:Sw["shades-blue"]},area:{fill:bu},rect:{fill:bu},line:{color:bu,stroke:bu,strokeWidth:5},trail:{color:bu,stroke:bu,strokeWidth:0,size:1},path:{stroke:bu,strokeWidth:.5},point:{filled:!0},text:{font:cSt,color:bu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:bu,stroke:null}},arc:{fill:bu},shape:{stroke:bu},symbol:{fill:bu,size:30}},dm="#3366CC",b_e="#ccc",BA="Arial, sans-serif",pSt={arc:{fill:dm},area:{fill:dm},path:{stroke:dm},rect:{fill:dm},shape:{stroke:dm},symbol:{stroke:dm},circle:{fill:dm},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:BA,fontSize:12},"guide-title":{font:BA,fontSize:12},"group-title":{font:BA,fontSize:12}},title:{font:BA,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:b_e,tickColor:b_e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},lB=e=>e*(1/3+1),v_e=lB(9),x_e=lB(10),w_e=lB(12),Aw="Segoe UI",__e="wf_standard-font, helvetica, arial, sans-serif",E_e="#252423",Cw="#605E5C",S_e="transparent",gSt="#C8C6C4",ac="#118DFF",mSt="#12239E",ySt="#E66C37",bSt="#6B007B",vSt="#E044A7",xSt="#744EC2",wSt="#D9B300",_St="#D64550",r8e=ac,i8e="#DEEFFF",A_e=[i8e,r8e],ESt=[i8e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",r8e],SSt={view:{stroke:S_e},background:S_e,font:Aw,header:{titleFont:__e,titleFontSize:w_e,titleColor:E_e,labelFont:Aw,labelFontSize:x_e,labelColor:Cw},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Cw,labelFontSize:v_e,titleFont:__e,titleColor:E_e,titleFontSize:w_e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:gSt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ac},line:{stroke:ac,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Aw,fontSize:v_e,fill:Cw},arc:{fill:ac},area:{fill:ac,line:!0,opacity:.6},path:{stroke:ac},rect:{fill:ac},point:{fill:ac,filled:!0,size:75},shape:{stroke:ac},symbol:{fill:ac,strokeWidth:1.5,size:50},legend:{titleFont:Aw,titleFontWeight:"bold",titleColor:Cw,labelFont:Aw,labelFontSize:x_e,labelColor:Cw,symbolType:"circle",symbolSize:75},range:{category:[ac,mSt,ySt,bSt,vSt,xSt,wSt,_St],diverging:A_e,heatmap:A_e,ordinal:ESt}},_4='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ASt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',E4=400,zA={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},CSt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],kSt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function yR({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=zA.gridBg[e],i=zA.textPrimary[e],o=zA.textSecondary[e],s=n==="dark"?CSt:kSt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:_4,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:ASt,labelFontWeight:E4,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:zA.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:_4,fill:o,fontWeight:E4},"guide-title":{font:_4,fill:o,fontWeight:E4}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const TSt=yR({theme:"white",background:"#ffffff"}),DSt=yR({theme:"g10",background:"#f4f4f4"}),LSt=yR({theme:"g90",background:"#262626"}),RSt=yR({theme:"g100",background:"#161616"}),FSt=ZEt.version,MSt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:DSt,carbong100:RSt,carbong90:LSt,carbonwhite:TSt,dark:KEt,excel:JEt,fivethirtyeight:tSt,ggplot2:nSt,googlecharts:pSt,latimes:sSt,powerbi:SSt,quartz:aSt,urbaninstitute:hSt,version:FSt,vox:lSt},Symbol.toStringTag,{value:"Module"}));function OSt(e,t,n,r){if(at(e))return`[${e.map(i=>t(Nt(i)?i:C_e(i,n))).join(", ")}]`;if($t(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let f=a[u];f!==void 0&&($t(f)&&(f=C_e(f,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function $St(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function C_e(e,t){return JSON.stringify(e,$St(t))}var ISt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const o8e="vg-tooltip-element",PSt={offsetX:10,offsetY:10,id:o8e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:NSt,maxDepth:2,formatTooltip:OSt,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function NSt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function BSt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return ISt.toString().replace(o8e,e)}function s8e(e,t,{offsetX:n,offsetY:r}){const i=a8e({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(l8e(i[s],t))return i[s];return i["top-left"]}function zSt(e,t,n,r,i){const{position:o,offsetX:s,offsetY:a}=i,l=e._el.getBoundingClientRect(),u=e._origin,f=jSt(l,u,n),c=a8e(f,r,s,a),d=Array.isArray(o)?o:[o];for(const h of d)if(l8e(c[h],r)&&!USt(t,c[h],r))return c[h];return s8e(t,r,i)}function jSt(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,o=e.top+t[1]+r.y1,s=n;for(;s.mark.group;)s=s.mark.group,i+=s.x??0,o+=s.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:o,y2:o+l}}function a8e(e,t,n,r){const i=(e.x1+e.x2)/2,o=(e.y1+e.y2)/2,s=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,u=e.y1-t.height-r,f=o-t.height/2,c=e.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:c},left:{x:s,y:f},right:{x:l,y:f},"top-left":{x:s,y:u},"top-right":{x:l,y:u},"bottom-left":{x:s,y:c},"bottom-right":{x:l,y:c}}}function l8e(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function USt(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class qSt{constructor(t){this.options={...PSt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=BSt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=this.options.anchor==="mark"?zSt(t,n,r,this.el.getBoundingClientRect(),this.options):s8e(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var S4={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var HSt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GSt=Object.prototype.hasOwnProperty;function Q6(e,t){return GSt.call(e,t)}function e8(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Q6(e,i)&&r.push(i);return r}function Ql(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function t8(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Em(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function u8e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function n8(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(n8(e[t]))return!0}else if(typeof e=="object"){for(var r=e8(e),i=r.length,o=0;o<i;o++)if(n8(e[r[o]]))return!0}}return!1}function k_e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var c8e=function(e){HSt(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,k_e(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=k_e(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),To=c8e,VSt=Ql,yb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Uk(n,this.path);r&&(r=Ql(r));var i=Vm(n,{op:"remove",path:this.from}).removed;return Vm(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Uk(n,this.from);return Vm(n,{op:"add",path:this.path,value:Ql(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:C_(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},WSt={add:function(e,t,n){return t8(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:yb.move,copy:yb.copy,test:yb.test,_get:yb._get};function Uk(e,t){if(t=="")return e;var n={op:"_get",path:t};return Vm(e,n),n.value}function Vm(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):qk(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Uk(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=C_(e,t.value),s.test===!1)throw new To("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new To("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Ql(e));var a=t.path||"",l=a.split("/"),u=e,f=1,c=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=qk;;){if(h=l[f],h&&h.indexOf("~")!=-1&&(h=u8e(h)),i&&(h=="__proto__"||h=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,f).join("/"):f==c-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),f++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!t8(h))throw new To("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);t8(h)&&(h=~~h)}if(f>=c){if(n&&t.op==="add"&&h>u.length)throw new To("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=WSt[t.op].call(t,u,h,e);if(s.test===!1)throw new To("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(f>=c){var s=yb[t.op].call(t,u,h,e);if(s.test===!1)throw new To("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&f<c&&(!u||typeof u!="object"))throw new To("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function bR(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new To("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ql(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Vm(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function YSt(e,t,n){var r=Vm(e,t);if(r.test===!1)throw new To("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function qk(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new To("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(yb[e.op]){if(typeof e.path!="string")throw new To("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new To('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new To("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new To("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&n8(e.value))throw new To("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new To("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new To("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=f8e([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new To("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new To("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function f8e(e,t,n){try{if(!Array.isArray(e))throw new To("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)bR(Ql(t),Ql(e),n||!0);else{n=n||qk;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof To)return i;throw i}}function C_(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!C_(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!C_(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var XSt=Object.freeze({__proto__:null,JsonPatchError:To,_areEquals:C_,applyOperation:Vm,applyPatch:bR,applyReducer:YSt,deepClone:VSt,getValueByPointer:Uk,validate:f8e,validator:qk});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var uB=new WeakMap,ZSt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),KSt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function JSt(e){return uB.get(e)}function QSt(e,t){return e.observers.get(t)}function eAt(e,t){e.observers.delete(t.callback)}function tAt(e,t){t.unobserve()}function nAt(e,t){var n=[],r,i=JSt(e);if(!i)i=new ZSt(e),uB.set(e,i);else{var o=QSt(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Ql(e),t){r.callback=t,r.next=null;var s=function(){r8(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){r8(r),clearTimeout(r.next),eAt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new KSt(t,r)),r}function r8(e,t){t===void 0&&(t=!1);var n=uB.get(e.object);cB(n.value,e.object,e.patches,"",t),e.patches.length&&bR(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function cB(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=e8(t),s=e8(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],f=e[u];if(Q6(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var c=t[u];typeof f=="object"&&f!=null&&typeof c=="object"&&c!=null&&Array.isArray(f)===Array.isArray(c)?cB(f,c,n,r+"/"+Em(u),i):f!==c&&(i&&n.push({op:"test",path:r+"/"+Em(u),value:Ql(f)}),n.push({op:"replace",path:r+"/"+Em(u),value:Ql(c)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Em(u),value:Ql(f)}),n.push({op:"remove",path:r+"/"+Em(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!Q6(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Em(u),value:Ql(t[u])})}}}function rAt(e,t,n){n===void 0&&(n=!1);var r=[];return cB(e,t,r,"",n),r}var iAt=Object.freeze({__proto__:null,compare:rAt,generate:r8,observe:nAt,unobserve:tAt});Object.assign({},XSt,iAt,{JsonPatchError:c8e,deepClone:Ql,escapePathComponent:Em,unescapePathComponent:u8e});function oAt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A4,T_e;function sAt(){if(T_e)return A4;T_e=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return A4=e,A4}var C4,D_e;function fB(){if(D_e)return C4;D_e=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return C4=r=>r?typeof r!="object"?e:r:t,C4}var jA={exports:{}},k4,L_e;function dB(){if(L_e)return k4;L_e=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return k4={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},k4}var T4,R_e;function vR(){return R_e||(R_e=1,T4=typeof process=="object"&&S4&&S4.NODE_DEBUG&&/\bsemver\b/i.test(S4.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),T4}var F_e;function hB(){return F_e||(F_e=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=dB(),o=vR();t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let f=0;const c="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[c,r]],h=m=>{for(const[b,y]of d)m=m.split(`${b}*`).join(`${b}{0,${y}}`).split(`${b}+`).join(`${b}{1,${y}}`);return m},p=(m,b,y)=>{const v=h(b),w=f++;o(m,w,b),u[m]=w,l[w]=b,s[w]=new RegExp(b,y?"g":void 0),a[w]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${c}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(jA,jA.exports)),jA.exports}var D4,M_e;function aAt(){if(M_e)return D4;M_e=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),s=e.test(i);return o&&s&&(r=+r,i=+i),r===i?0:o&&!s?-1:s&&!o?1:r<i?-1:1};return D4={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},D4}var L4,O_e;function pB(){if(O_e)return L4;O_e=1;const e=vR(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=dB(),{safeRe:r,t:i}=hB(),o=fB(),{compareIdentifiers:s}=aAt();class a{constructor(u,f){if(f=o(f),u instanceof a){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const c=u.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!c)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<n)return h}return d}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const c=this.prerelease[f],d=u.prerelease[f];if(e("prerelease compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return s(c,d)}while(++f)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let f=0;do{const c=this.build[f],d=u.build[f];if(e("build compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return s(c,d)}while(++f)}inc(u,f,c){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,c),this.inc("pre",f,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,c),this.inc("pre",f,c);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(c)?1:0;if(!f&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(f===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(f){let h=[f,d];c===!1&&(h=[f]),s(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return L4=a,L4}var R4,$_e;function bv(){if($_e)return R4;$_e=1;const e=pB();return R4=(n,r,i)=>new e(n,i).compare(new e(r,i)),R4}var F4,I_e;function lAt(){if(I_e)return F4;I_e=1;const e=bv();return F4=(n,r,i)=>e(n,r,i)===0,F4}var M4,P_e;function uAt(){if(P_e)return M4;P_e=1;const e=bv();return M4=(n,r,i)=>e(n,r,i)!==0,M4}var O4,N_e;function cAt(){if(N_e)return O4;N_e=1;const e=bv();return O4=(n,r,i)=>e(n,r,i)>0,O4}var $4,B_e;function fAt(){if(B_e)return $4;B_e=1;const e=bv();return $4=(n,r,i)=>e(n,r,i)>=0,$4}var I4,z_e;function dAt(){if(z_e)return I4;z_e=1;const e=bv();return I4=(n,r,i)=>e(n,r,i)<0,I4}var P4,j_e;function hAt(){if(j_e)return P4;j_e=1;const e=bv();return P4=(n,r,i)=>e(n,r,i)<=0,P4}var N4,U_e;function pAt(){if(U_e)return N4;U_e=1;const e=lAt(),t=uAt(),n=cAt(),r=fAt(),i=dAt(),o=hAt();return N4=(a,l,u,f)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,f);case"!=":return t(a,u,f);case">":return n(a,u,f);case">=":return r(a,u,f);case"<":return i(a,u,f);case"<=":return o(a,u,f);default:throw new TypeError(`Invalid operator: ${l}`)}},N4}var B4,q_e;function gAt(){if(q_e)return B4;q_e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,c){if(c=n(c),f instanceof t){if(f.loose===!!c.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,c),this.options=c,this.loose=!!c.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const c=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=f.match(c);if(!d)throw new TypeError(`Invalid comparator: ${f}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return o(f,this.operator,this.semver,this.options)}intersects(f,c){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,c).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,c).test(f.semver):(c=n(c),c.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||o(this.semver,"<",f.semver,c)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||o(this.semver,">",f.semver,c)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}B4=t;const n=fB(),{safeRe:r,t:i}=hB(),o=pAt(),s=vR(),a=pB(),l=d8e();return B4}var z4,H_e;function d8e(){if(H_e)return z4;H_e=1;const e=/\s+/g;class t{constructor(I,U){if(U=i(U),I instanceof t)return I.loose===!!U.loose&&I.includePrerelease===!!U.includePrerelease?I:new t(I.raw,U);if(I instanceof o)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=I.trim().replace(e," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(Y=>!m(Y[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&b(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const U=this.set[I];for(let q=0;q<U.length;q++)q>0&&(this.formatted+=" "),this.formatted+=U[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const q=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+I,Y=r.get(q);if(Y)return Y;const X=this.options.loose,te=X?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];I=I.replace(te,K(this.options.includePrerelease)),s("hyphen replace",I),I=I.replace(l[u.COMPARATORTRIM],f),s("comparator trim",I),I=I.replace(l[u.TILDETRIM],c),s("tilde trim",I),I=I.replace(l[u.CARETTRIM],d),s("caret trim",I);let le=I.split(" ").map(de=>v(de,this.options)).join(" ").split(/\s+/).map(de=>B(de,this.options));X&&(le=le.filter(de=>(s("loose invalid filter",de,this.options),!!de.match(l[u.COMPARATORLOOSE])))),s("range list",le);const ee=new Map,z=le.map(de=>new o(de,this.options));for(const de of z){if(m(de))return[de];ee.set(de.value,de)}ee.size>1&&ee.has("")&&ee.delete("");const he=[...ee.values()];return r.set(q,he),he}intersects(I,U){if(!(I instanceof t))throw new TypeError("a Range is required");return this.set.some(q=>y(q,U)&&I.set.some(Y=>y(Y,U)&&q.every(X=>Y.every(te=>X.intersects(te,U)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new a(I,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(L(this.set[U],I,this.options))return!0;return!1}}z4=t;const n=sAt(),r=new n,i=fB(),o=gAt(),s=vR(),a=pB(),{safeRe:l,t:u,comparatorTrimReplace:f,tildeTrimReplace:c,caretTrimReplace:d}=hB(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=dB(),m=$=>$.value==="<0.0.0-0",b=$=>$.value==="",y=($,I)=>{let U=!0;const q=$.slice();let Y=q.pop();for(;U&&q.length;)U=q.every(X=>Y.intersects(X,I)),Y=q.pop();return U},v=($,I)=>(s("comp",$,I),$=T($,I),s("caret",$),$=E($,I),s("tildes",$),$=k($,I),s("xrange",$),$=M($,I),s("stars",$),$),w=$=>!$||$.toLowerCase()==="x"||$==="*",E=($,I)=>$.trim().split(/\s+/).map(U=>A(U,I)).join(" "),A=($,I)=>{const U=I.loose?l[u.TILDELOOSE]:l[u.TILDE];return $.replace(U,(q,Y,X,te,le)=>{s("tilde",$,q,Y,X,te,le);let ee;return w(Y)?ee="":w(X)?ee=`>=${Y}.0.0 <${+Y+1}.0.0-0`:w(te)?ee=`>=${Y}.${X}.0 <${Y}.${+X+1}.0-0`:le?(s("replaceTilde pr",le),ee=`>=${Y}.${X}.${te}-${le} <${Y}.${+X+1}.0-0`):ee=`>=${Y}.${X}.${te} <${Y}.${+X+1}.0-0`,s("tilde return",ee),ee})},T=($,I)=>$.trim().split(/\s+/).map(U=>D(U,I)).join(" "),D=($,I)=>{s("caret",$,I);const U=I.loose?l[u.CARETLOOSE]:l[u.CARET],q=I.includePrerelease?"-0":"";return $.replace(U,(Y,X,te,le,ee)=>{s("caret",$,Y,X,te,le,ee);let z;return w(X)?z="":w(te)?z=`>=${X}.0.0${q} <${+X+1}.0.0-0`:w(le)?X==="0"?z=`>=${X}.${te}.0${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.0${q} <${+X+1}.0.0-0`:ee?(s("replaceCaret pr",ee),X==="0"?te==="0"?z=`>=${X}.${te}.${le}-${ee} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}-${ee} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le}-${ee} <${+X+1}.0.0-0`):(s("no pr"),X==="0"?te==="0"?z=`>=${X}.${te}.${le}${q} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le} <${+X+1}.0.0-0`),s("caret return",z),z})},k=($,I)=>(s("replaceXRanges",$,I),$.split(/\s+/).map(U=>R(U,I)).join(" ")),R=($,I)=>{$=$.trim();const U=I.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return $.replace(U,(q,Y,X,te,le,ee)=>{s("xRange",$,q,Y,X,te,le,ee);const z=w(X),he=z||w(te),de=he||w(le),ze=de;return Y==="="&&ze&&(Y=""),ee=I.includePrerelease?"-0":"",z?Y===">"||Y==="<"?q="<0.0.0-0":q="*":Y&&ze?(he&&(te=0),le=0,Y===">"?(Y=">=",he?(X=+X+1,te=0,le=0):(te=+te+1,le=0)):Y==="<="&&(Y="<",he?X=+X+1:te=+te+1),Y==="<"&&(ee="-0"),q=`${Y+X}.${te}.${le}${ee}`):he?q=`>=${X}.0.0${ee} <${+X+1}.0.0-0`:de&&(q=`>=${X}.${te}.0${ee} <${X}.${+te+1}.0-0`),s("xRange return",q),q})},M=($,I)=>(s("replaceStars",$,I),$.trim().replace(l[u.STAR],"")),B=($,I)=>(s("replaceGTE0",$,I),$.trim().replace(l[I.includePrerelease?u.GTE0PRE:u.GTE0],"")),K=$=>(I,U,q,Y,X,te,le,ee,z,he,de,ze)=>(w(q)?U="":w(Y)?U=`>=${q}.0.0${$?"-0":""}`:w(X)?U=`>=${q}.${Y}.0${$?"-0":""}`:te?U=`>=${U}`:U=`>=${U}${$?"-0":""}`,w(z)?ee="":w(he)?ee=`<${+z+1}.0.0-0`:w(de)?ee=`<${z}.${+he+1}.0-0`:ze?ee=`<=${z}.${he}.${de}-${ze}`:$?ee=`<${z}.${he}.${+de+1}-0`:ee=`<=${ee}`,`${U} ${ee}`.trim()),L=($,I,U)=>{for(let q=0;q<$.length;q++)if(!$[q].test(I))return!1;if(I.prerelease.length&&!U.includePrerelease){for(let q=0;q<$.length;q++)if(s($[q].semver),$[q].semver!==o.ANY&&$[q].semver.prerelease.length>0){const Y=$[q].semver;if(Y.major===I.major&&Y.minor===I.minor&&Y.patch===I.patch)return!0}return!1}return!0};return z4}var j4,G_e;function mAt(){if(G_e)return j4;G_e=1;const e=d8e();return j4=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},j4}var yAt=mAt(),h8e=oAt(yAt);function bAt(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function l(f){f.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,s),setTimeout(u,o),a-=1)}setTimeout(u,o)}var vAt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function p8e(e,...t){for(const n of t)xAt(e,n);return e}function xAt(e,t){for(const n of Object.keys(t))Q1(e,n,t[n],!0)}const ff=v0t;let k_=REt;const UA=typeof window<"u"?window:void 0;var dCe;k_===void 0&&((dCe=UA==null?void 0:UA.vl)!=null&&dCe.compile)&&(k_=UA.vl);const wAt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},_At={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},i2={vega:"Vega","vega-lite":"Vega-Lite"},Hk={vega:ff.version,"vega-lite":k_?k_.version:"not available"},EAt={vega:e=>e,"vega-lite":(e,t)=>k_.compile(e,{config:t}).spec},SAt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,AAt="chart-wrapper";function CAt(e){return typeof e=="function"}function V_e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${i2[r]} JSON Source`}function kAt(e,t){if(e.$schema){const n=n8e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${i2[n.library]}, but mode argument sets ${i2[t]??t}.`);const r=n.library;return h8e(Hk[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${i2[r]} ${n.version}, but the current version of ${i2[r]} is v${Hk[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function g8e(e){return!!(e&&"load"in e)}function W_e(e){return g8e(e)?e:ff.loader(e)}function TAt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Nt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function DAt(e,t,n={}){let r,i;Nt(t)?(i=W_e(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=TAt(r),s=o.loader;(!i||s)&&(i=W_e(n.loader??s));const a=await Y_e(o,i),l=await Y_e(n,i),u={...p8e(l,a),config:J1(l.config??{},a.config??{})};return await RAt(e,r,u,i)}async function Y_e(e,t){const n=Nt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Nt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function LAt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function RAt(e,t,n={},r){const i=n.theme?J1(MSt[n.theme],n.config??{}):n.config,o=lg(n.actions)?n.actions:p8e({},wAt,n.actions??{}),s={..._At,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??ff.Warn,u=n.downloadFileName??"visualization",f=typeof e=="string"?document.querySelector(e):e;if(!f)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const A="vega-embed-style",{root:T,rootContainer:D}=LAt(f);if(!T.getElementById(A)){const k=document.createElement("style");k.id=A,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?vAt.toString():n.defaultStyle,D.appendChild(k)}}const c=kAt(t,n.mode);let d=EAt[c](t,i);if(c==="vega-lite"&&d.$schema){const A=n8e(d.$schema);h8e(Hk.vega,`^${A.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${A.version}, but current version is v${Hk.vega}.`)}f.classList.add("vega-embed"),o&&f.classList.add("has-actions"),f.innerHTML="";let h=f;if(o){const A=document.createElement("div");A.classList.add(AAt),f.appendChild(A),h=A}const p=n.patch;if(p&&(d=p instanceof Function?p(d):bR(d,p,!0,!1).newDocument),n.formatLocale&&ff.formatLocale(n.formatLocale),n.timeFormatLocale&&ff.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const A in n.expressionFunctions){const T=n.expressionFunctions[A];"fn"in T?ff.expressionFunction(A,T.fn,T.visitor):T instanceof Function&&ff.expressionFunction(A,T)}const{ast:m}=n,b=ff.parse(d,c==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||ff.View)(b,{loader:r,logLevel:l,renderer:a,...m?{expr:ff.expressionInterpreter??n.expr??D0t}:{}});if(y.addSignalListener("autosize",(A,T)=>{const{type:D}=T;D=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):D=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):D=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:A,tooltip:T}=n,D=A&&!g8e(A)?A==null?void 0:A.baseURL:void 0,k=CAt(T)?T:new qSt({baseURL:D,...T===!0?{}:T}).call;y.tooltip(k)}let{hover:v}=n;if(v===void 0&&(v=c==="vega"),v){const{hoverSet:A,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(A,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let w;if(o!==!1){let A=f;if(n.defaultStyle!==!1||n.forceActionsMenu){const D=document.createElement("details");D.title=s.CLICK_TO_VIEW_ACTIONS,f.append(D),A=D;const k=document.createElement("summary");k.innerHTML=SAt,D.append(k),w=R=>{D.contains(R.target)||D.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if(A.append(T),T.classList.add("vega-actions"),o===!0||o.export!==!1){for(const D of["svg","png"])if(o===!0||o.export===!0||o.export[D]){const k=s[`${D.toUpperCase()}_ACTION`],R=document.createElement("a"),M=$t(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;R.text=k,R.href="#",R.target="_blank",R.download=`${u}.${D}`,R.addEventListener("mousedown",async function(B){B.preventDefault();const K=await y.toImageURL(D,M);this.href=K}),T.append(R)}}if(o===!0||o.source!==!1){const D=document.createElement("a");D.text=s.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(k){V_e(uF(t),n.sourceHeader??"",n.sourceFooter??"",c),k.preventDefault()}),T.append(D)}if(c==="vega-lite"&&(o===!0||o.compiled!==!1)){const D=document.createElement("a");D.text=s.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(k){V_e(uF(d),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),T.append(D)}if(o===!0||o.editor!==!1){const D=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=s.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(R){bAt(window,D,{config:i,mode:p?"vega":c,renderer:a,spec:uF(p?d:t)}),R.preventDefault()}),T.append(k)}}function E(){w&&document.removeEventListener("click",w),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:E,embedOptions:n}}const vg={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};vg.defaultMerge;function FAt(e,t){return t}function MAt(e,t){return e.filter(n=>n!==void 0)}var X_e;(function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"})(X_e||(X_e={}));function Z_e(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:IAt(e)?1:e instanceof Set?3:e instanceof Map?4:5}function OAt(e){const t=new Set;for(const n of e)for(const r of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(r);return t}function $At(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function m8e(e){var r;let t=0,n=(r=e[0])==null?void 0:r[Symbol.iterator]();return{[Symbol.iterator](){return{next(){var i;do{if(n===void 0)return{done:!0,value:void 0};const o=n.next();if(o.done===!0){t+=1,n=(i=e[t])==null?void 0:i[Symbol.iterator]();continue}return{done:!1,value:o.value}}while(!0)}}}}}const K_e=["[object Object]","[object Module]"];function IAt(e){if(!K_e.includes(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(t===void 0)return!0;const n=t.prototype;return!(n===null||typeof n!="object"||!K_e.includes(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function PAt(e,t,n){const r={};for(const i of OAt(e)){const o=[];for(const l of e)$At(l,i)&&o.push(l[i]);if(o.length===0)continue;const s=t.metaDataUpdater(n,{key:i,parents:e}),a=y8e(o,t,s);a!==vg.skip&&(i==="__proto__"?Object.defineProperty(r,i,{value:a,configurable:!0,enumerable:!0,writable:!0}):r[i]=a)}return r}function NAt(e){return e.flat()}function BAt(e){return new Set(m8e(e))}function zAt(e){return new Map(m8e(e))}function jAt(e){return e.at(-1)}const qA={mergeRecords:PAt,mergeArrays:NAt,mergeSets:BAt,mergeMaps:zAt,mergeOthers:jAt};function UAt(...e){return qAt({})(...e)}function qAt(e,t){const n=HAt(e,r);function r(...i){return y8e(i,n,t)}return r}function HAt(e,t){return{defaultMergeFunctions:qA,mergeFunctions:{...qA,...Object.fromEntries(Object.entries(e).filter(([n,r])=>Object.hasOwn(qA,n)).map(([n,r])=>r===!1?[n,qA.mergeOthers]:[n,r]))},metaDataUpdater:e.metaDataUpdater??FAt,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,filterValues:e.filterValues===!1?void 0:e.filterValues??MAt,actions:vg}}function y8e(e,t,n){var o;const r=((o=t.filterValues)==null?void 0:o.call(t,e,n))??e;if(r.length===0)return;if(r.length===1)return U4(r,t,n);const i=Z_e(r[0]);if(i!==0&&i!==5){for(let s=1;s<r.length;s++)if(Z_e(r[s])!==i)return U4(r,t,n)}switch(i){case 1:return GAt(r,t,n);case 2:return VAt(r,t,n);case 3:return WAt(r,t,n);case 4:return YAt(r,t,n);default:return U4(r,t,n)}}function GAt(e,t,n){const r=t.mergeFunctions.mergeRecords(e,t,n);return r===vg.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):r}function VAt(e,t,n){const r=t.mergeFunctions.mergeArrays(e,t,n);return r===vg.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):r}function WAt(e,t,n){const r=t.mergeFunctions.mergeSets(e,t,n);return r===vg.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):r}function YAt(e,t,n){const r=t.mergeFunctions.mergeMaps(e,t,n);return r===vg.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):r}function U4(e,t,n){const r=t.mergeFunctions.mergeOthers(e,t,n);return r===vg.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):r}const XAt={width:"container",height:"container",autosize:"fit",resize:!0},ZAt=(e,t,n)=>{const r=UAt(XAt,t);DAt(e.renderRoot.querySelector("#vis"),r).then(i=>{n&&(Object.keys(n).forEach(o=>{i.view.insert(o,n[o])}),i.view.run())})};class b8e extends Zr{constructor(){super(),this.spec=void 0,this.dataValues=void 0,this.noShadow=!1,this.unstyled=!1}async updated(t){(t.has("spec")||t.has("dataValues"))&&ZAt(this,this.spec,this.dataValues)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Qe`
      <style>
        ${CKe}
        ${!this.unstyled&&TKe}
        ${!this.unstyled&&kKe}
      </style>
      <div id="vis"></div>
    `}}tn(b8e,"properties",{dataValues:{attribute:!1,type:Object},spec:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-chart",b8e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const KAt=K_(class extends nD{constructor(){super(...arguments),this.key=Xr}render(e,t){return this.key=e,t}update(e,[t,n]){return t!==this.key&&(J8(e),this.key=t),n}}),JAt=e=>{e.hoverInteraction=e.eoxMap.selectInteractions.selectHover,e.clickInteraction=e.eoxMap.selectInteractions.selectClick;const t=()=>{e.requestUpdate()};e.hoverInteraction.selectStyleLayer.on("change",t),e.clickInteraction.selectStyleLayer.on("change",t)},QAt=(e,t,n)=>{if(e.clickId===t)return;const r=n?[]:[t];e.hoverInteraction.highlightById(r)},eCt=(e,t)=>{e.stopPropagation();const n=Number(e.target.getAttribute("index")),r=t.drawnFeatures[n];t.drawLayer.getSource().removeFeature(r),t.drawnFeatures.splice(n,1),t.requestUpdate()},tCt=(e,t)=>{const n=e.getId(),{clickId:r,drawLayer:i,olMap:o,clickInteraction:s}=t,a=r===n,l=e.getGeometry();if(a){const u=i.getSource().getExtent();o.getView().fit(u,Mbe),s.highlightById([])}else{const u=l.getExtent();s.highlightById([n]),o.getView().fit(u,Mbe)}t.requestUpdate()},nCt="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class v8e extends Zr{constructor(){super();tn(this,"hoverInteraction");tn(this,"clickInteraction");tn(this,"hoverId");tn(this,"clickId");this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.unstyled=!1}_handleDelete(n){eCt(n,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(n){tCt(n,this)}_handleHoverFeature(n,r=!1){QAt(this,n,r)}firstUpdated(){JAt(this)}createRenderRoot(){return this}render(){var n,r;return this.hoverId=(n=this.hoverInteraction)==null?void 0:n.selectedFids[0],this.clickId=(r=this.clickInteraction)==null?void 0:r.selectedFids[0],Qe`
      <style>
        ${!this.unstyled&&nCt}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((i,o)=>{const s=o+1,a=i.getId(),l=this.hoverId===a,u=this.clickId===a;return KAt(s,Qe`
              <li
                class="${l||u?"selected":Xr}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(i)}"
                >
                  <span class="title">Feature #${s}</span>
                  <button
                    index=${o}
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}tn(v8e,"properties",{eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",v8e);const rCt=e=>{const{multipleFeatures:t,drawnFeatures:n,currentlyDrawing:r}=e,i=!t&&(n==null?void 0:n.length)>0||r,o=!(n!=null&&n.length)&&!r;return{drawDisabled:i,discardDisabled:o}},iCt='button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}',oCt='textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}';function sCt(e){navigator.clipboard.writeText(e).then(function(){},function(t){console.error("Could not copy text: ",t)})}const aCt=(e,t)=>new sD().writeFeaturesObject(e,t),lCt=(e,t)=>new T3e().writeFeatures(e,t);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Un(e,t,n){return e?t(e):n==null?void 0:n(e)}var q_,H_;class x8e extends Zr{constructor(){super();yn(this,q_,!0);yn(this,H_,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1,this.select=!1}updateButtonStates(){const{drawDisabled:n,discardDisabled:r}=rCt(this);ao(this,q_,n),ao(this,H_,r)}createRenderRoot(){return this}render(){this.updateButtonStates();const n=this.currentlyDrawing?"drawing":"draw";return Qe`
      <style>
        ${!this.unstyled&&iCt}
        ${!this.unstyled&&oCt}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="${this.select?"pointer":"polygon"} icon"
            ?disabled="${Gt(this,q_)||Xr}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${n}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${Gt(this,H_)||Xr}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${Un(this.importFeatures,()=>Qe`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${Un(this.showEditor,()=>Qe`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>sCt(this.geoJSON)}
            >
              ${this.unstyled?"copy":Xr}
            </button>
          </div>
        `)}
    `}}q_=new WeakMap,H_=new WeakMap,tn(x8e,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},select:{type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",x8e);const uCt=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.pointer:before {
    content:  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Ecursor-default-click%3C/title%3E%3Cpath d='M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10' /%3E%3C/svg%3E");
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,cCt=e=>{(()=>{e.emitDrawnFeatures(),e.multipleFeatures||(e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.currentlyDrawing=!1)})(),e.requestUpdate()},fCt=e=>{const t=()=>{e.drawLayer.set("isDrawingEnabled",!0),e.draw.setActive(!0),e.selectionEvents.addSelectionEvent()},n=()=>{e.currentlyDrawing=!0,e.requestUpdate()};t(),n()},dCt=e=>{let t;return typeof e=="string"?t=document.querySelector(e):t=e,t},J_e=(e,t)=>{var o;const r=dCt(e.for),i=r.map;return e.drawLayer=r.addOrUpdateLayer({zIndex:100,type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:t},source:{type:"Vector"},interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:e.type,modify:e.allowModify,stopClick:!0}},{type:"select",options:{id:"selectHover",condition:"pointermove",style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5},tooltip:!1}},{type:"select",options:{id:"selectClick",condition:"click",panIn:!0,style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),e.draw=r.interactions.drawInteraction,e.modify=r.interactions.drawInteractionmodify,i8(e,r,e.layerId),(o=e.modify)==null||o.on("modifyend",()=>e.onModifyEnd()),r.addEventListener("addfeatures",()=>cCt(e)),{EoxMap:r,OlMap:i}},hCt=e=>{const t=()=>{e.drawnFeatures=[],e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.drawLayer.getSource().clear(),e.geoJSON=null},n=()=>{e.emitDrawnFeatures(),e.currentlyDrawing=!1,e.requestUpdate()};t(),n()},pCt=(e,t)=>{setTimeout(()=>{const r=e.drawLayer.getSource().getFeatures(),i=e.eoxMap.projection||"EPSG:3857",o=e.projection;e.drawnFeatures=o?r.map(a=>{a=a.clone();const l=a.getGeometry().transform(i,o);return a.setGeometry(l),a}):r;let s;switch(e.format){case"geojson":s=aCt(e.drawnFeatures);break;case"wkt":s=lCt(e.drawnFeatures);break;case"feature":s=e.drawnFeatures;break;default:s=e.drawnFeatures;break}e.updateGeoJSON(),e.requestUpdate(),t(s)},0)},gCt=e=>{const t=i=>{(i==null?void 0:i.detail.id)!=="SelectLayerClickInteraction"||!i.detail.feature||(e.drawLayer.getSource().addFeature(i.detail.feature),e.eoxMap.dispatchEvent(new CustomEvent("addfeatures",{detail:i.detail})))};return{addSelectionEvent:()=>{e.layerId&&(e.eoxMap.selectInteractions.SelectLayerHoverInteraction.setActive(!0),e.eoxMap.addEventListener("select",t))},removeSelectionEvent:()=>{var o;const i=(o=e.eoxMap.selectInteractions)==null?void 0:o.SelectLayerHoverInteraction;i&&(i.selectedFids=[],i.setActive(!1)),e.eoxMap.removeEventListener("select",t)}}},i8=(e,t,n)=>{if(!n||!t)return;const r=JSON.parse(JSON.stringify(t.getLayerById(n).get("_jsonDefinition")))||null;if(!r){console.error(`Layer with id ${n} not found`);return}const i={type:"select",active:!1,options:{id:"SelectLayerHoverInteraction",condition:"pointermove",active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"#3399CC","stroke-width":2.5}}},o={type:"select",options:{id:"SelectLayerClickInteraction",condition:"click",multi:e.multipleFeatures,modify:e.allowModify,active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"rgba(0, 0, 0,0.0)"}}};r.interactions=[i,o],t.addOrUpdateLayer(r);const s=e.draw;e.draw=t.selectInteractions.SelectLayerClickInteraction,s.setActive(!1),t.selectInteractions.SelectLayerClickInteraction.setActive(!1),t.selectInteractions.SelectLayerHoverInteraction.setActive(!1)},mCt=(e,t,n,r)=>{if(t){if(n){r&&n!==r&&Q_e(e,t),i8(e,t,n);return}if(!n&&r){Q_e(e,t);return}}};function Q_e(e,t){t&&(e.discardDrawing(),e.selectionEvents.removeSelectionEvent(),e.draw=t.interactions.drawInteraction,t.selectInteractions.SelectLayerClickInteraction.remove(),t.selectInteractions.SelectLayerHoverInteraction.remove())}const yCt=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}';function bCt(e,t){function n(o){o.preventDefault(),o.stopPropagation()}function r(o){o.srcElement.style.opacity="0.4"}function i(o){o.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(o=>{t.addEventListener(o,n,!1),["dragenter","dragover"].includes(o)?t.addEventListener(o,r,!1):t.addEventListener(o,i,!1)}),t.addEventListener("drop",o=>w8e(o,e),!1)}function vCt(e){e.preventDefault(),e.stopPropagation()}function w8e(e,t){vCt(e);const n=e.dataTransfer?e.dataTransfer.files:e.target.files;Array.from(n).forEach(r=>xCt(r,t))}function xCt(e,t){const n=new FileReader;n.readAsText(e),n.onloadend=function(){typeof n.result=="string"&&t.handleFeatureChange(n.result)}}var Nb,Bb,G_,zb;class wCt extends Zr{constructor(){super();yn(this,Nb);yn(this,Bb);yn(this,G_);yn(this,zb);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.layerId="",this.drawnFeatures=[],this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.projection="EPSG:4326",this.type="Polygon",this.selectionEvents=null,this.format="feature",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},layerId:{attribute:"layer-id",type:String},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},projection:{type:String},noShadow:{type:Boolean},format:{type:String},type:{type:String},unstyled:{type:Boolean}}}set layerId(n){mCt(this,this.eoxMap,n,Gt(this,zb)),ao(this,zb,n)}get layerId(){return Gt(this,zb)}startDrawing(){fCt(this)}discardDrawing(){hCt(this)}handleFeatureChange(n,r=!1){this.eoxMap.parseTextToFeature(n||JSON.stringify(Obe),this.drawLayer,this.eoxMap,r)}handleFilesChange(n){w8e(n,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){ao(this,G_,JSON.stringify(this.eoxMap.parseFeature(this.drawnFeatures)||Obe,void 0,2))}emitDrawnFeatures(){pCt(this,r=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:r}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:n,OlMap:r}=J_e(this,this.multipleFeatures);this.eoxMap=n,ao(this,Bb,r),this.selectionEvents=gCt(this),this.importFeatures&&bCt(this,this.eoxMap),this.updateGeoJSON(),this.requestUpdate()}updated(n){if(n.has("for")){const{EoxMap:r,OlMap:i}=J_e(this,this.multipleFeatures);this.eoxMap=r,ao(this,Bb,i)}}get eoxMap(){return Gt(this,Nb)}set eoxMap(n){const r=Gt(this,Nb);ao(this,Nb,n),this.requestUpdate("eoxMap",r)}disconnectedCallback(){var n;(n=this.eoxMap)==null||n.map.removeLayer(this.drawLayer),super.disconnectedCallback()}render(){var n;return Qe`
      <style>
        :host { display: block; }
        ${!this.unstyled&&yCt}
        ${!this.unstyled&&uCt}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.startDrawing(),discard:()=>this.discardDrawing(),editor:r=>this.handleFeatureChange(r.target.value,!0),import:r=>this.handleFilesChange(r)}}
        ?select=${!!this.layerId}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${Gt(this,G_)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((n=this.drawnFeatures)!=null&&n.length)?Qe`<eox-drawtools-list
            .eoxMap=${this.eoxMap}
            .olMap=${Gt(this,Bb)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:Xr}
    `}}Nb=new WeakMap,Bb=new WeakMap,G_=new WeakMap,zb=new WeakMap;customElements.define("eox-drawtools",wCt);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Gk=class extends nD{constructor(t){if(super(t),this.it=Xr,t.type!==np.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===Xr||t==null)return this._t=void 0,this.it=t;if(t===lb)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const n=[t];return n.raw=n,this._t={_$litType$:this.constructor.resultType,strings:n,values:[]}}};Gk.directiveName="unsafeHTML",Gk.resultType=1;const Sc=K_(Gk);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class o8 extends Gk{}o8.directiveName="unsafeSVG",o8.resultType=2;const _Ct=K_(o8);var q4,eEe;function ECt(){if(eEe)return q4;eEe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,h=Math.max,p=Math.min,m=function(){return f.Date.now()};function b(A,T,D){var k,R,M,B,K,L,$=0,I=!1,U=!1,q=!0;if(typeof A!="function")throw new TypeError(e);T=E(T)||0,y(D)&&(I=!!D.leading,U="maxWait"in D,M=U?h(E(D.maxWait)||0,T):M,q="trailing"in D?!!D.trailing:q);function Y(He){var je=k,we=R;return k=R=void 0,$=He,B=A.apply(we,je),B}function X(He){return $=He,K=setTimeout(ee,T),I?Y(He):B}function te(He){var je=He-L,we=He-$,Ie=T-je;return U?p(Ie,M-we):Ie}function le(He){var je=He-L,we=He-$;return L===void 0||je>=T||je<0||U&&we>=M}function ee(){var He=m();if(le(He))return z(He);K=setTimeout(ee,te(He))}function z(He){return K=void 0,q&&k?Y(He):(k=R=void 0,B)}function he(){K!==void 0&&clearTimeout(K),$=0,k=L=R=K=void 0}function de(){return K===void 0?B:z(m())}function ze(){var He=m(),je=le(He);if(k=arguments,R=this,L=He,je){if(K===void 0)return X(L);if(U)return K=setTimeout(ee,T),Y(L)}return K===void 0&&(K=setTimeout(ee,T)),B}return ze.cancel=he,ze.flush=de,ze}function y(A){var T=typeof A;return!!A&&(T=="object"||T=="function")}function v(A){return!!A&&typeof A=="object"}function w(A){return typeof A=="symbol"||v(A)&&d.call(A)==n}function E(A){if(typeof A=="number")return A;if(w(A))return t;if(y(A)){var T=typeof A.valueOf=="function"?A.valueOf():A;A=y(T)?T+"":T}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var D=o.test(A);return D||s.test(A)?a(A.slice(2),D?2:8):i.test(A)?t:+A}return q4=b,q4}var SCt=ECt();const G0=oa(SCt),_8e=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}',ACt='button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}',E8e=Q8`
  .geosearch {
    display: flex;
    flex-direction: row;
    align-items: start;
  }

  .search-container {
    display: flex;
    flex-direction: column;
    align-items: start;
  }
  .hidden {
    display: none;
    pointer-events: none;
  }
  .results-container {
    min-height: 100px;
    width: 332px;
    background: var(--results-bg, #eaf1f5);
    overflow: hidden;
    border-radius: 6px;
    box-shadow:
      0px 3px 5px -2px rgba(0, 0, 0, 0.08),
      0px 2px 2px 0px rgba(0, 0, 0, 0.08),
      0px 1px 5px 0px rgba(0, 0, 0, 0.08);
    padding: 0;
    margin: 0;
  }
  .results-container.too-short {
    height: 64px;
  }

  .results-container.too-short span {
    color: #00f;
    width: 100%;
    text-align: center;
  }

  input {
    background: var(--input-bg, #c6d4dd);
    color: var(--input-fg, #333);
    height: 48px;
    border-radius: 6px;
    padding: 0 16px;
    min-width: 300px;
    border: none;
    box-shadow:
      0px 3px 1px -2px rgba(0, 0, 0, 0.05),
      0px 2px 2px 0px rgba(0, 0, 0, 0.05),
      0px 1px 5px 0px rgba(0, 0, 0, 0.05);
  }
  input::before {
    background: url("_data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' color='%23999999' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
    width: 48px;
    height: 48px;
    display: inline-block;
  }
  button {
    height: auto;
    background: var(--button-bg, #fff);
  }

  .geosearch.small button {
    height: var(--button-size, 32px);
    width: var(--button-size, 32px);
    padding: calc((var(--button-size, 32px) - 20px) / 2);
  }

  .geosearch.small button .icon {
    width: 20px;
    height: 20px;
    transform: translateX(1px);
    fill: var(--button-fg, #fff);
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
  }

  .geosearch.small button .chevron {
    display: none;
  }

  .geosearch input {
    background: #fff;
  }

  .chevron {
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left%3C/title%3E%3Cpath d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/svg%3E");
    margin-right: 9px;
  }

  .chevron.right {
    transform: rotate(180deg);
    margin-left: 9px;
  }

  .chevron.top {
    transform: rotate(90deg);
    margin-bottom: 9px;
  }

  .chevron.bottom {
    transform: rotate(-90deg);
    margin-top: 9px;
  }

  .chevron.right.active {
    transform: rotate(180deg);
  }

  .search-result {
    padding: 10px;
    border-bottom: 1px solid var(--results-border-color, #aaa);
    color: var(--results-fg, #000);
    cursor: pointer;
    font-size: 0.9rem;
    list-style: none;
  }

  .search-result:hover {
    background: #0001;
  }

  .hint {
    display: flex;
    color: #0008;
    height: 40px;
    width: 100%;
    margin: 30px 0;
    text-align: center;
    justify-content: center;
    flex-direction: row;
    align-items: center;
  }
`,CCt=e=>{let t;return typeof e=="string"?t=document.querySelector(e):t=e,t},kCt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    preserveAspectRatio="xMidYMid"
    width="50"
    height="50"
    style="shape-rendering: auto; display: block; background: transparent;"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
    <g>
      <circle
        stroke-dasharray="164.93361431346415 56.97787143782138"
        r="35"
        stroke-width="12"
        stroke="#1a467c"
        fill="none"
        cy="50"
        cx="50"
      >
        <animateTransform
          keyTimes="0;1"
          values="0 50 50;360 50 50"
          dur="1.2222222222222223s"
          repeatCount="indefinite"
          type="rotate"
          attributeName="transform"
        ></animateTransform>
      </circle>
      <g></g>
    </g>
  </svg>
`;var jb;class TCt extends Zr{constructor(){super();yn(this,jb);this._data=[],this._isListVisible=!1,this._isInputVisible=!1,this._query="",this._isLoading=!1,this.for="eox-map",this.listDirection="right",this.resultsDirection="down",this.interval=800,this.loaderSvg=kCt,this.fetchDebounced=G0(async()=>{if(!(this._query.length<2)){this._isLoading=!0;try{const n=`${this.endpoint}${this.endpoint.includes("?")?"&":"?"}${this.queryParameter??"q"}=${this._query}`,i=await(await fetch(encodeURI(n))).json();this._data=i.results,this._isLoading=!1}catch{console.log("Error setting up or requesting from geosearch endpoint")}}},this.interval)}static get properties(){return{_data:{attribute:!1},_isListVisible:{attribute:!1},_isInputVisible:{attribute:!1},_query:{attribute:!1},_isLoading:{attribute:!1},endpoint:{type:String},for:{type:String},queryParameter:{type:String,default:"q"},button:{type:Boolean},interval:{type:Number,default:800},small:{type:Boolean},label:{type:String},direction:{type:String,attribute:"list-direction"},resultsDirection:{type:String,attribute:"results-direction"},unstyled:{type:Boolean},loaderSvg:{type:String,attribute:"loader-svg"}}}async onInput(n){if(this._query=n.target.value,this._query.length==0){this._isListVisible=!1;return}else this._query.length>=2&&(this._isLoading=!0),this._isListVisible=!0;this.fetchDebounced()}onInputBlur(){this._isInputVisible=!1,this._isListVisible=!1,this._query=""}onButtonClick(){this._isInputVisible=!this._isInputVisible,this._isInputVisible&&setTimeout(()=>this.renderRoot.querySelector("#gazetteer").focus())}getFlexDirection(){return this.direction==="up"?"column-reverse":this.direction==="left"?"row-reverse":this.direction==="down"?"column":(this.direction==="right","row")}getResultsDirection(){return this.resultsDirection==="up"?"column-reverse":this.resultsDirection==="left"?"row-reverse":this.resultsDirection==="down"?"column":(this.resultsDirection==="right","row")}getVerticalAlign(){return this.resultsDirection==="up"?"end":"start"}getMarginDirection(n){return n==="up"?"top":n==="left"?"left":n==="down"?"bottom":n==="right"?"right":"row"}handleSelect(n){this._isInputVisible=!1,this._isListVisible=!1,this._query="";const r=this.eoxMap.map.getView().getProjection().getCode();let i=jM("EPSG:4326",r,[n.bounds.southwest.lng,n.bounds.southwest.lat]),o=jM("EPSG:4326",r,[n.bounds.northeast.lng,n.bounds.northeast.lat]);const s=[i[0],i[1],o[0],o[1]];this.eoxMap.zoomExtent=s,this.dispatchEvent(new CustomEvent("geosearchSelect",n))}updateMap(){const n=CCt(this.for);if(n){const r=n;this.eoxMap=r}}firstUpdated(){this.updateMap()}updated(n){n.has("for")&&this.updateMap()}get eoxMap(){return Gt(this,jb)}set eoxMap(n){const r=Gt(this,jb);ao(this,jb,n),this.requestUpdate("eoxMap",r)}render(){return Qe`
      <style>
        .hidden {
          display: none;
        }
        ${!this.unstyled&&_8e}
          ${!this.unstyled&&ACt}
          ${!this.unstyled&&E8e}
          .fill {
          width: 100%;
          height: 100%;
          min-height: 100px;
          display: flex;
          justify-content: center;
          align-items: center;
        }
      </style>
      <div
        class="geosearch ${this.small?"small":""}"
        style="
            flex-direction: ${this.getFlexDirection()};
            align-items: ${this.getVerticalAlign()};
        "
      >
        <button
          class="${this.button?"":"hidden"} ${this._isInputVisible?"active":""}"
          style="
            margin-${this.getMarginDirection(this.direction)}: 12px;
            flex-direction: ${this.getFlexDirection()};
          "
          @click="${this.onButtonClick}"
        >
          <span class="icon"></span>
          <span
            class="chevron ${this.direction??"right"} ${this._isInputVisible?"active":""}"
          ></span>
          <span
            style="display: ${this.small&&!this.unstyled?"none":"flex"}"
            >${(this.label||this.unstyled)??"Search"}</span
          >
        </button>
        <div
          class="search-container ${this.button?this._isInputVisible?"":"hidden":""}"
          style="flex-direction: ${this.getResultsDirection()};"
        >
          <input
            id="gazetteer"
            type="text"
            placeholder="Type to search"
            .value="${this._query}"
            style="margin-${this.getMarginDirection(this.resultsDirection)}: ${this._isListVisible?12:0}px"
            @input="${this.onInput}"
          />
          <ul class="results-container ${this._isListVisible?"":"hidden"}">
            ${this._isLoading?Qe`<div class="fill">${_Ct(this.loaderSvg)}</div>`:this._query.length<2?Qe`<span class="hint"
                    >Enter at least two characters to search</span
                  >`:this._data.map(n=>Qe`
                      <eox-geosearch-item
                        .item="${n}"
                        .onClick="${r=>{this.handleSelect(r)}}"
                        .unstyled=${this.unstyled}
                      />
                    `)}
          </ul>
        </div>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}jb=new WeakMap;class DCt extends Zr{static get properties(){return{item:{type:Object},onClick:{type:Function},unstyled:{type:Boolean}}}constructor(){super()}render(){return Qe`
      <style>
        ${!this.unstyled&&_8e}
        ${!this.unstyled&&E8e}
      </style>
      <li class="search-result" @click="${()=>this.onClick(this.item)}">
        <span class="name">${this.item.formatted}</span>
      </li>
    `}}customElements.define("eox-geosearch",TCt);customElements.define("eox-geosearch-item",DCt);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*ou(e,t){if(e!==void 0){let n=0;for(const r of e)yield t(r,n++)}}const LCt=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
form#itemfilter:not(.inline) {
  overflow-y: auto;
}
details {
  width: 100%;
}
`,QE=`
:host, :root {
  --item-color: color-mix(
    in srgb,
    var(--primary-color) 10%,
    transparent
  );
  --item-hover-color: color-mix(
    in srgb,
    var(--secondary-color) 30%,
    transparent
  );
  --item-select-color: var(--primary-color);
  --inline-bg-color: color-mix(
    in srgb,
    var(--secondary-color) 10%,
    transparent
  );
  --border-color: color-mix(
    in srgb,
    #000000 20%,
    transparent
  );
  --background-color: var(--eox-background-color, transparent);
  --padding: 0.5rem;
  --text-transform: capitalize;
  --form-flex-direction: column;
  --filter-display: block;
  background-color: var(--background-color);
}
* {
  font-family: Roboto, sans-serif;
}
form#itemfilter {
  flex-direction: var(--form-flex-direction);
}
eox-itemfilter-container {
  min-width: 200px;
  display: var(--filter-display);
}
eox-itemfilter-results {
  flex-grow: 1;
}
ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  text-overflow: ellipsis;
  white-space: nowrap;
  display: flex;
  align-items: center;
}
.cards li span {
  display: block;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem var(--padding);
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: 13px;
  align-items: center;
  text-transform: var(--text-transform);
}
.cards .title {
  font-size: 16px;
  font-weight: 600;
  text-wrap: auto;
  line-height: 19px;
}
.subtitle {
  font-size: 11px;
  opacity: .7;
  margin-top: 6px;
}
.cards .subtitle {
  font-size: 14px;
  color: #757575;
  text-wrap: auto;
  line-height: 19px;
}
.image {
  width: 24px;
  height: 24px;
  object-fit: cover;
  overflow: hidden;
  margin-right: 8px;
}
.cards .image {
  width: 100%;
  height: 190px;
  margin-bottom: 8px;
}
.title-container {
  display: flex;
  flex-direction: column;
}
h6.main-heading {
  font-size: 1rem;
  margin-block-start: 1.33em;
  margin-block-end: 1.33em;
  margin-top: var(--padding);
  padding: 0 var(--padding);
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  margin-left: auto;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 var(--padding);
}
[data-type=filter] .title,
details summary {
  text-transform: var(--text-transform);
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul:not(#filters) > li {
  padding: 5px 0;
}
ul#results li {
  padding: 5px var(--padding);
}
ul#results ul.cards {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  gap: 40px;
  margin: 20px 0;
  cursor: initial;
}
ul#results ul.cards li {
  flex-basis: calc(33.3% - 77px);
  min-width: 0;
  align-self: flex-start;
}
@media screen and (max-width: 768px) {
  ul#results ul.cards li {
    flex-basis: calc(50% - 70px);
  }
}
@media screen and (max-width: 480px) {
  ul#results ul.cards li {
    flex-basis: 100%;
  }
}
section {
  position: relative;
  background-color: var(--background-color);
}
button#filter-reset {
  position: absolute;
  top: 0;
  right: var(--padding);
  padding: 2px 10px;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--secondary-color);
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: var(--primary-color);
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range,
tc-range-slider {
  align-items: center;
  display: block;
}
tc-range-slider {
  width: calc(100% - 16px);
  margin-left: 8px;
  margin-right: 8px;
  --width: 100%;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before,
.range-after {
  margin: 1rem 0px;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: -5px;
  height: 14px;
  width: 14px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 14px;
  width: 14px;
}
.inline-content {
  border: 1.5px solid var(--secondary-color);
  border-radius: 4px;
  max-height: 300px;
  overflow-y: auto;
  background: var(--inline-bg-color);
  margin-top: 4px;
  padding: 8px;
}
.inline-container {
  position: relative;
  align-items: center;
}
.inline-container-wrapper {
  width: 100%;
  position: relative;
}
.inline-container {
  position: relative;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  height: 24px;
  padding: 8px;
  flex: 1;
  justify-content: space-between;
  cursor: text;
  transition: all 0.2s ease-in-out;
  display: flex;
}
.inline-container:hover {
  border: 1px solid var(--primary-color);
}
[popover] {
  position: fixed;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  background-color: var(--background-color);
  border: none;
}
.input-container {
  display: flex;
  flex: 1;
  align-items: center;
}
.input-container input,
.input-container input:focus {
  height: 100%;
  border: none;
  outline: none;
  border: 0;
  min-width: 25%;
}
.button-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 1px;
  top: 5px;
  height: calc(100% - 10px);
  width: 34px;
  background: white;
}
button.icon {
  color: #004170;
  height: 24px;
  font-size: large;
  width: unset;
}
.inline-container::-webkit-scrollbar {
  height: 2px;
}
.inline-container::-webkit-scrollbar-thumb {
  background: lightgrey;
  border-radius: 2px;
}
.hidden {
  height: 0;
  padding: 0;
  border: none;
}
.hidden:hover {
  border: none;
}
.chip-title {
  pointer-events: none;
  text-transform: var(--text-transform);
}
.chip {
  display: flex;
  align-items: center;
  background: var(--item-color);
  border-radius: 30px;
  margin-right: 4px;
  padding: 5px 10px;
  font-size: small;
  cursor: default;
  white-space: nowrap;
}
.chip.highlighted {
  background: var(--primary-color);
  color: white;
}
.chip-close {
  cursor: pointer;
  font-weight: 600;
  position: absolute;
  right: -25px;
  background: white;
  top: 0;
  height: 100%;
  display: flex;
  align-items: center;
  height: 24px;
  width: 24px;
}
.chip-close:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
  height: 24px;
  width: 24px;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
.chip-container {
  position: relative;
  max-width: 75%;
}
.autocomplete-container,
.text-container {
  position: relative;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  justify-content: space-between;
  cursor: text;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  background: white;
}
.autocomplete-container-wrapper,
.text-container-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  flex: 1;
  overflow-x: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.autocomplete-container-wrapper::-webkit-scrollbar {
  display: none;
}
.chip-wrapper {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.chip-wrapper::-webkit-scrollbar {
  display: none;
  width: 0;
  background: transparent;
}
.autocomplete-input,
.text-input {
  flex: 1;
  border: 1px solid var(--border-color);
  outline: none;
  box-sizing: border-box;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  min-width: 150px;
}
input[type="text"].text-input,
input[type="text"].autocomplete-input {
  padding: 9px 6px !important;
  border-radius: 4px;
}
.text-input:hover,
.autocomplete-input:hover {
  border: 1px solid var(--primary-color);
}
.text-input:invalid {
  border: 1px solid red;
}
.selected-items {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
}
.select li:hover,
.multiselect li:hover,
eox-itemfilter-results li:hover {
  background: var(--item-hover-color);
}
eox-itemfilter-results li.highlighted {
  color: var(--background-color);
  background: var(--item-select-color);
}
.selected-item span {
  margin-right: 8px;
}
.selected-item button {
  background: none;
  border: none;
  color: #fff;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.multiselect-container,
.select-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.multiselect-container label,
.select-container label {
  display: flex;
  align-items: center;
  cursor: pointer;
}
.multiselect-container input,
.select-container input {
  margin-right: 8px;
}
.select-overflow {
  max-height: 185px;
  overflow-y: auto;
}
.chip-title strong {
  font-weight: 500;
}
.chip-wrapper {
  max-width: 100%;
  overflow-x: scroll;
}
.chip-container {
  display: flex;
  flex: 0;
}
.input-container.dirty-filter-input {
  margin-left: 25px;
}
.error-validation {
  position: relative;
  color: red;
  font-size: x-small;
  top: -8px;
}
input {
  background-color: var(--background-color);
}
`,RCt=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;var AT,S8e;class FCt extends Zr{constructor(){super();yn(this,AT);this.filterObject={},this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},unstyled:{type:Boolean}}}render(){return Qe`
      <style>
        ${!this.unstyled&&QE}
      </style>

      ${Un(this.filterObject.featured,()=>Qe`<slot name="filter"></slot>`,()=>Qe`<details
            @toggle="${gn(this,AT,S8e)}"
            class="details-filter"
            ?open=${this.filterObject.expanded||Xr}
          >
            <summary>
              <span
                class="title"
                style="${!this.filterObject.title&&"text-transform: var(--text-transform)"}"
              >
                ${this.filterObject.title||this.filterObject.key||"Filter"}
                <slot name="reset-button"></slot>
              </span>
            </summary>
            <div>
              <slot name="filter"></slot>
            </div>
          </details>`)}
    `}}AT=new WeakSet,S8e=function(n){this.dispatchEvent(new CustomEvent("details-toggled",{detail:n,bubbles:!0,composed:!0}))};customElements.define("eox-itemfilter-expandcontainer",FCt);function lh(e){return Array.isArray?Array.isArray(e):k8e(e)==="[object Array]"}const MCt=1/0;function OCt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-MCt?"-0":t}function $Ct(e){return e==null?"":OCt(e)}function _f(e){return typeof e=="string"}function A8e(e){return typeof e=="number"}function ICt(e){return e===!0||e===!1||PCt(e)&&k8e(e)=="[object Boolean]"}function C8e(e){return typeof e=="object"}function PCt(e){return C8e(e)&&e!==null}function Yl(e){return e!=null}function H4(e){return!e.trim().length}function k8e(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const NCt="Incorrect 'index' type",BCt=e=>`Invalid value for key ${e}`,zCt=e=>`Pattern length exceeds max of ${e}.`,jCt=e=>`Missing ${e} property in key`,UCt=e=>`Property 'weight' in key '${e}' must be a positive integer`,tEe=Object.prototype.hasOwnProperty;class qCt{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=T8e(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function T8e(e){let t=null,n=null,r=null,i=1,o=null;if(_f(e)||lh(e))r=e,t=nEe(e),n=s8(e);else{if(!tEe.call(e,"name"))throw new Error(jCt("name"));const s=e.name;if(r=s,tEe.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(UCt(s));t=nEe(s),n=s8(s),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function nEe(e){return lh(e)?e:e.split(".")}function s8(e){return lh(e)?e.join("."):e}function HCt(e,t){let n=[],r=!1;const i=(o,s,a)=>{if(Yl(o))if(!s[a])n.push(o);else{let l=s[a];const u=o[l];if(!Yl(u))return;if(a===s.length-1&&(_f(u)||A8e(u)||ICt(u)))n.push($Ct(u));else if(lh(u)){r=!0;for(let f=0,c=u.length;f<c;f+=1)i(u[f],s,a+1)}else s.length&&i(u,s,a+1)}};return i(e,_f(t)?t.split("."):t,0),r?n:n[0]}const GCt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},VCt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},WCt={location:0,threshold:.6,distance:100},YCt={useExtendedSearch:!1,getFn:HCt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Yn={...VCt,...GCt,...WCt,...YCt};const XCt=/[^ ]+/g;function ZCt(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const o=i.match(XCt).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*e),a=parseFloat(Math.round(s*r)/r);return n.set(o,a),a},clear(){n.clear()}}}class gB{constructor({getFn:t=Yn.getFn,fieldNormWeight:n=Yn.fieldNormWeight}={}){this.norm=ZCt(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,_f(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();_f(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Yl(t)||H4(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Yl(s)){if(lh(s)){let a=[];const l=[{nestedArrIndex:-1,value:s}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(Yl(f))if(_f(f)&&!H4(f)){let c={v:f,i:u,n:this.norm.get(f)};a.push(c)}else lh(f)&&f.forEach((c,d)=>{l.push({nestedArrIndex:d,value:c})})}r.$[o]=a}else if(_f(s)&&!H4(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function D8e(e,t,{getFn:n=Yn.getFn,fieldNormWeight:r=Yn.fieldNormWeight}={}){const i=new gB({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(T8e)),i.setSources(t),i.create(),i}function KCt(e,{getFn:t=Yn.getFn,fieldNormWeight:n=Yn.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new gB({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function HA(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Yn.distance,ignoreLocation:o=Yn.ignoreLocation}={}){const s=t/e.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}function JCt(e=[],t=Yn.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=e.length;o<s;o+=1){let a=e[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}const Rm=32;function QCt(e,t,n,{location:r=Yn.location,distance:i=Yn.distance,threshold:o=Yn.threshold,findAllMatches:s=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,includeMatches:l=Yn.includeMatches,ignoreLocation:u=Yn.ignoreLocation}={}){if(t.length>Rm)throw new Error(zCt(Rm));const f=t.length,c=e.length,d=Math.max(0,Math.min(r,c));let h=o,p=d;const m=a>1||l,b=m?Array(c):[];let y;for(;(y=e.indexOf(t,p))>-1;){let D=HA(t,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:u});if(h=Math.min(D,h),p=y+f,m){let k=0;for(;k<f;)b[y+k]=1,k+=1}}p=-1;let v=[],w=1,E=f+c;const A=1<<f-1;for(let D=0;D<f;D+=1){let k=0,R=E;for(;k<R;)HA(t,{errors:D,currentLocation:d+R,expectedLocation:d,distance:i,ignoreLocation:u})<=h?k=R:E=R,R=Math.floor((E-k)/2+k);E=R;let M=Math.max(1,d-R+1),B=s?c:Math.min(d+R,c)+f,K=Array(B+2);K[B+1]=(1<<D)-1;for(let $=B;$>=M;$-=1){let I=$-1,U=n[e.charAt(I)];if(m&&(b[I]=+!!U),K[$]=(K[$+1]<<1|1)&U,D&&(K[$]|=(v[$+1]|v[$])<<1|1|v[$+1]),K[$]&A&&(w=HA(t,{errors:D,currentLocation:I,expectedLocation:d,distance:i,ignoreLocation:u}),w<=h)){if(h=w,p=I,p<=d)break;M=Math.max(1,2*d-p)}}if(HA(t,{errors:D+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>h)break;v=K}const T={isMatch:p>=0,score:Math.max(.001,w)};if(m){const D=JCt(b,a);D.length?l&&(T.indices=D):T.isMatch=!1}return T}function e3t(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class L8e{constructor(t,{location:n=Yn.location,threshold:r=Yn.threshold,distance:i=Yn.distance,includeMatches:o=Yn.includeMatches,findAllMatches:s=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,isCaseSensitive:l=Yn.isCaseSensitive,ignoreLocation:u=Yn.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(d,h)=>{this.chunks.push({pattern:d,alphabet:e3t(d),startIndex:h})},c=this.pattern.length;if(c>Rm){let d=0;const h=c%Rm,p=c-h;for(;d<p;)f(this.pattern.substr(d,Rm),d),d+=Rm;if(h){const m=c-Rm;f(this.pattern.substr(m),m)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],c=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:b})=>{const{isMatch:y,score:v,indices:w}=QCt(t,p,m,{location:i+b,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});y&&(d=!0),c+=v,y&&w&&(f=[...f,...w])});let h={isMatch:d,score:d?c/this.chunks.length:1};return d&&r&&(h.indices=f),h}}class xg{constructor(t){this.pattern=t}static isMultiMatch(t){return rEe(t,this.multiRegex)}static isSingleMatch(t){return rEe(t,this.singleRegex)}search(){}}function rEe(e,t){const n=e.match(t);return n?n[1]:null}class t3t extends xg{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class n3t extends xg{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class r3t extends xg{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class i3t extends xg{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class o3t extends xg{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class s3t extends xg{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class R8e extends xg{constructor(t,{location:n=Yn.location,threshold:r=Yn.threshold,distance:i=Yn.distance,includeMatches:o=Yn.includeMatches,findAllMatches:s=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,isCaseSensitive:l=Yn.isCaseSensitive,ignoreLocation:u=Yn.ignoreLocation}={}){super(t),this._bitapSearch=new L8e(t,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class F8e extends xg{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],o=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const a8=[t3t,F8e,r3t,i3t,s3t,o3t,n3t,R8e],iEe=a8.length,a3t=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,l3t="|";function u3t(e,t={}){return e.split(l3t).map(n=>{let r=n.trim().split(a3t).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const a=r[o];let l=!1,u=-1;for(;!l&&++u<iEe;){const f=a8[u];let c=f.isMultiMatch(a);c&&(i.push(new f(c,t)),l=!0)}if(!l)for(u=-1;++u<iEe;){const f=a8[u];let c=f.isSingleMatch(a);if(c){i.push(new f(c,t));break}}}return i})}const c3t=new Set([R8e.type,F8e.type]);class f3t{constructor(t,{isCaseSensitive:n=Yn.isCaseSensitive,includeMatches:r=Yn.includeMatches,minMatchCharLength:i=Yn.minMatchCharLength,ignoreLocation:o=Yn.ignoreLocation,findAllMatches:s=Yn.findAllMatches,location:a=Yn.location,threshold:l=Yn.threshold,distance:u=Yn.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=u3t(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let o=0,s=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const f=n[l];s.length=0,o=0;for(let c=0,d=f.length;c<d;c+=1){const h=f[c],{isMatch:p,indices:m,score:b}=h.search(t);if(p){if(o+=1,a+=b,r){const y=h.constructor.type;c3t.has(y)?s=[...s,...m]:s.push(m)}}else{a=0,o=0,s.length=0;break}}if(o){let c={isMatch:!0,score:a/o};return r&&(c.indices=s),c}}return{isMatch:!1,score:1}}}const l8=[];function d3t(...e){l8.push(...e)}function u8(e,t){for(let n=0,r=l8.length;n<r;n+=1){let i=l8[n];if(i.condition(e,t))return new i(e,t)}return new L8e(e,t)}const Vk={AND:"$and",OR:"$or"},c8={PATH:"$path",PATTERN:"$val"},f8=e=>!!(e[Vk.AND]||e[Vk.OR]),h3t=e=>!!e[c8.PATH],p3t=e=>!lh(e)&&C8e(e)&&!f8(e),oEe=e=>({[Vk.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function M8e(e,t,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=h3t(i);if(!s&&o.length>1&&!f8(i))return r(oEe(i));if(p3t(i)){const l=s?i[c8.PATH]:o[0],u=s?i[c8.PATTERN]:i[l];if(!_f(u))throw new Error(BCt(l));const f={keyId:s8(l),pattern:u};return n&&(f.searcher=u8(u,t)),f}let a={children:[],operator:o[0]};return o.forEach(l=>{const u=i[l];lh(u)&&u.forEach(f=>{a.children.push(r(f))})}),a};return f8(e)||(e=oEe(e)),r(e)}function g3t(e,{ignoreFieldNorm:t=Yn.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(t?1:o))}),n.score=r})}function m3t(e,t){const n=e.matches;t.matches=[],Yl(n)&&n.forEach(r=>{if(!Yl(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function y3t(e,t){t.score=e.score}function b3t(e,t,{includeMatches:n=Yn.includeMatches,includeScore:r=Yn.includeScore}={}){const i=[];return n&&i.push(m3t),r&&i.push(y3t),e.map(o=>{const{idx:s}=o,a={item:t[s],refIndex:s};return i.length&&i.forEach(l=>{l(o,a)}),a})}class wg{constructor(t,n={},r){this.options={...Yn,...n},this.options.useExtendedSearch,this._keyStore=new qCt(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof gB))throw new Error(NCt);this._myIndex=n||D8e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Yl(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];t(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options;let l=_f(t)?_f(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return g3t(l,{ignoreFieldNorm:a}),o&&l.sort(s),A8e(n)&&n>-1&&(l=l.slice(0,n)),b3t(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=u8(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!Yl(o))return;const{isMatch:l,score:u,indices:f}=n.searchIn(o);l&&i.push({item:o,idx:s,matches:[{score:u,value:o,norm:a,indices:f}]})}),i}_searchLogical(t){const n=M8e(t,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:d});return h&&h.length?[{idx:u,item:l,matches:h}]:[]}const f=[];for(let c=0,d=a.children.length;c<d;c+=1){const h=a.children[c],p=r(h,l,u);if(p.length)f.push(...p);else if(a.operator===Vk.AND)return[]}return f},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:l})=>{if(Yl(a)){let u=r(n,a,l);u.length&&(o[l]||(o[l]={idx:l,item:a,matches:[]},s.push(o[l])),u.forEach(({matches:f})=>{o[l].matches.push(...f)}))}}),s}_searchObjectList(t){const n=u8(t,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!Yl(s))return;let l=[];r.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:s[f],searcher:n}))}),l.length&&o.push({idx:a,item:s,matches:l})}),o}_findMatches({key:t,value:n,searcher:r}){if(!Yl(n))return[];let i=[];if(lh(n))n.forEach(({v:o,i:s,n:a})=>{if(!Yl(o))return;const{isMatch:l,score:u,indices:f}=r.searchIn(o);l&&i.push({score:u,key:t,value:o,idx:s,norm:a,indices:f})});else{const{v:o,n:s}=n,{isMatch:a,score:l,indices:u}=r.searchIn(o);a&&i.push({score:l,key:t,value:o,norm:s,indices:u})}return i}}wg.version="7.0.0";wg.createIndex=D8e;wg.parseIndex=KCt;wg.config=Yn;wg.parseQuery=M8e;d3t(f3t);function O8e(e,t){const n=new wg(t.filterProperties,{keys:["title"]}),r=e.target.value,o=n.search(r).map(s=>s.item.key||s.item.keys.join("|"));Object.keys(t.filters).forEach(s=>{t.querySelector(`[data-details="${s}"]`).parentElement.style.display=o.includes(s)||!r?"":"none"})}function v3t(e,t){const n=e.target.getAttribute("data-close").replace("|","-");t.querySelector(`#filter-${n}`).reset(),t.dispatchEvent(new CustomEvent("filter")),t.requestUpdate()}const d8=Math.min,Fb=Math.max,Wk=Math.round,GA=Math.floor,Df=e=>({x:e,y:e});function $8e(e){return e.split("-")[0]}function x3t(e){return e.split("-")[1]}function w3t(e){return e==="x"?"y":"x"}function _3t(e){return e==="y"?"height":"width"}function I8e(e){return["top","bottom"].includes($8e(e))?"y":"x"}function E3t(e){return w3t(I8e(e))}function P8e(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function sEe(e,t,n){let{reference:r,floating:i}=e;const o=I8e(t),s=E3t(t),a=_3t(s),l=$8e(t),u=o==="y",f=r.x+r.width/2-i.width/2,c=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:f,y:r.y-i.height};break;case"bottom":h={x:f,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:c};break;case"left":h={x:r.x-i.width,y:c};break;default:h={x:r.x,y:r.y}}switch(x3t(t)){case"start":h[s]-=d*(n&&u?-1:1);break;case"end":h[s]+=d*(n&&u?-1:1);break}return h}const S3t=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:c}=sEe(u,r,l),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:b,fn:y}=a[m],{x:v,y:w,data:E,reset:A}=await y({x:f,y:c,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:e,floating:t}});f=v??f,c=w??c,h={...h,[b]:{...h[b],...E}},A&&p<=50&&(p++,typeof A=="object"&&(A.placement&&(d=A.placement),A.rects&&(u=A.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):A.rects),{x:f,y:c}=sEe(u,d,l)),m=-1)}return{x:f,y:c,placement:d,strategy:i,middlewareData:h}};function xR(){return typeof window<"u"}function vv(e){return N8e(e)?(e.nodeName||"").toLowerCase():"#document"}function su(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function rd(e){var t;return(t=(N8e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function N8e(e){return xR()?e instanceof Node||e instanceof su(e).Node:!1}function $c(e){return xR()?e instanceof Element||e instanceof su(e).Element:!1}function Uf(e){return xR()?e instanceof HTMLElement||e instanceof su(e).HTMLElement:!1}function aEe(e){return!xR()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof su(e).ShadowRoot}function eS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ic(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function A3t(e){return["table","td","th"].includes(vv(e))}function wR(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function mB(e){const t=yB(),n=$c(e)?Ic(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function C3t(e){let t=tg(e);for(;Uf(t)&&!D1(t);){if(mB(t))return t;if(wR(t))return null;t=tg(t)}return null}function yB(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function D1(e){return["html","body","#document"].includes(vv(e))}function Ic(e){return su(e).getComputedStyle(e)}function _R(e){return $c(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function tg(e){if(vv(e)==="html")return e;const t=e.assignedSlot||e.parentNode||aEe(e)&&e.host||rd(e);return aEe(t)?t.host:t}function B8e(e){const t=tg(e);return D1(t)?e.ownerDocument?e.ownerDocument.body:e.body:Uf(t)&&eS(t)?t:B8e(t)}function T_(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=B8e(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=su(i);if(o){const a=h8(s);return t.concat(s,s.visualViewport||[],eS(i)?i:[],a&&n?T_(a):[])}return t.concat(i,T_(i,[],n))}function h8(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function z8e(e){const t=Ic(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Uf(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=Wk(n)!==o||Wk(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function bB(e){return $c(e)?e:e.contextElement}function Mb(e){const t=bB(e);if(!Uf(t))return Df(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=z8e(t);let s=(o?Wk(n.width):n.width)/r,a=(o?Wk(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const k3t=Df(0);function j8e(e){const t=su(e);return!yB()||!t.visualViewport?k3t:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function T3t(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==su(e)?!1:t}function x0(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=bB(e);let s=Df(1);t&&(r?$c(r)&&(s=Mb(r)):s=Mb(e));const a=T3t(o,n,r)?j8e(o):Df(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,f=i.width/s.x,c=i.height/s.y;if(o){const d=su(o),h=r&&$c(r)?su(r):r;let p=d,m=h8(p);for(;m&&r&&h!==p;){const b=Mb(m),y=m.getBoundingClientRect(),v=Ic(m),w=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*b.x,E=y.top+(m.clientTop+parseFloat(v.paddingTop))*b.y;l*=b.x,u*=b.y,f*=b.x,c*=b.y,l+=w,u+=E,p=su(m),m=h8(p)}}return P8e({width:f,height:c,x:l,y:u})}function vB(e,t){const n=_R(e).scrollLeft;return t?t.left+n:x0(rd(e)).left+n}function U8e(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:vB(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function D3t(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=rd(r),a=t?wR(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Df(1);const f=Df(0),c=Uf(r);if((c||!c&&!o)&&((vv(r)!=="body"||eS(s))&&(l=_R(r)),Uf(r))){const h=x0(r);u=Mb(r),f.x=h.x+r.clientLeft,f.y=h.y+r.clientTop}const d=s&&!c&&!o?U8e(s,l,!0):Df(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+d.x,y:n.y*u.y-l.scrollTop*u.y+f.y+d.y}}function L3t(e){return Array.from(e.getClientRects())}function R3t(e){const t=rd(e),n=_R(e),r=e.ownerDocument.body,i=Fb(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Fb(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+vB(e);const a=-n.scrollTop;return Ic(r).direction==="rtl"&&(s+=Fb(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function F3t(e,t){const n=su(e),r=rd(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=yB();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function M3t(e,t){const n=x0(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Uf(e)?Mb(e):Df(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function lEe(e,t,n){let r;if(t==="viewport")r=F3t(e,n);else if(t==="document")r=R3t(rd(e));else if($c(t))r=M3t(t,n);else{const i=j8e(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return P8e(r)}function q8e(e,t){const n=tg(e);return n===t||!$c(n)||D1(n)?!1:Ic(n).position==="fixed"||q8e(n,t)}function O3t(e,t){const n=t.get(e);if(n)return n;let r=T_(e,[],!1).filter(a=>$c(a)&&vv(a)!=="body"),i=null;const o=Ic(e).position==="fixed";let s=o?tg(e):e;for(;$c(s)&&!D1(s);){const a=Ic(s),l=mB(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||eS(s)&&!l&&q8e(e,s))?r=r.filter(f=>f!==s):i=a,s=tg(s)}return t.set(e,r),r}function $3t(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?wR(t)?[]:O3t(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,f)=>{const c=lEe(t,f,i);return u.top=Fb(c.top,u.top),u.right=d8(c.right,u.right),u.bottom=d8(c.bottom,u.bottom),u.left=Fb(c.left,u.left),u},lEe(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function I3t(e){const{width:t,height:n}=z8e(e);return{width:t,height:n}}function P3t(e,t,n){const r=Uf(t),i=rd(t),o=n==="fixed",s=x0(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Df(0);if(r||!r&&!o)if((vv(t)!=="body"||eS(i))&&(a=_R(t)),r){const d=x0(t,!0,o,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=vB(i));const u=i&&!r&&!o?U8e(i,a):Df(0),f=s.left+a.scrollLeft-l.x-u.x,c=s.top+a.scrollTop-l.y-u.y;return{x:f,y:c,width:s.width,height:s.height}}function G4(e){return Ic(e).position==="static"}function uEe(e,t){if(!Uf(e)||Ic(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return rd(e)===n&&(n=n.ownerDocument.body),n}function H8e(e,t){const n=su(e);if(wR(e))return n;if(!Uf(e)){let i=tg(e);for(;i&&!D1(i);){if($c(i)&&!G4(i))return i;i=tg(i)}return n}let r=uEe(e,t);for(;r&&A3t(r)&&G4(r);)r=uEe(r,t);return r&&D1(r)&&G4(r)&&!mB(r)?n:r||C3t(e)||n}const N3t=async function(e){const t=this.getOffsetParent||H8e,n=this.getDimensions,r=await n(e.floating);return{reference:P3t(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function B3t(e){return Ic(e).direction==="rtl"}const z3t={convertOffsetParentRelativeRectToViewportRelativeRect:D3t,getDocumentElement:rd,getClippingRect:$3t,getOffsetParent:H8e,getElementRects:N3t,getClientRects:L3t,getDimensions:I3t,getScale:Mb,isElement:$c,isRTL:B3t};function j3t(e,t){let n=null,r;const i=rd(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:u,top:f,width:c,height:d}=e.getBoundingClientRect();if(a||t(),!c||!d)return;const h=GA(f),p=GA(i.clientWidth-(u+c)),m=GA(i.clientHeight-(f+d)),b=GA(u),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-b+"px",threshold:Fb(0,d8(1,l))||1};let w=!0;function E(A){const T=A[0].intersectionRatio;if(T!==l){if(!w)return s();T?s(!1,T):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(e)}return s(!0),o}function U3t(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=bB(e),f=i||o?[...u?T_(u):[],...T_(t)]:[];f.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const c=u&&a?j3t(u,n):null;let d=-1,h=null;s&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?x0(e):null;l&&b();function b(){const y=x0(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(b)}return n(),()=>{var y;f.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),c==null||c(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const q3t=(e,t,n)=>{const r=new Map,i={platform:z3t,...n},o={...i.platform,_c:r};return S3t(e,t,{...i,platform:o})};function H3t(e){const t=e.renderRoot.querySelector(".inline-container-wrapper"),n=e.renderRoot.querySelector("[popover]");return U3t(t,n,()=>{n.matches(":popover-open")&&q3t(t,n,{strategy:"fixed"}).then(({x:i,y:o})=>{Object.assign(n.style,{left:`${i}px`,top:`${o}px`,width:`${t.getBoundingClientRect().width}px`})})},{animationFrame:!0})}function G8e(e){e.renderRoot.querySelector("#eox-itemfilter-input-search").value="",O8e({target:{value:""}},e)}function G3t(e,t){t.inlineMode&&e.stopPropagation()}function V3t(e){e.inlineMode&&(e.showDropdown=!0)}function W3t(e,t){t.inlineMode&&(e.stopPropagation(),t.showDropdown=!0)}function Y3t(e,t){t.inlineMode&&e.key==="Escape"&&t.showDropdown&&(G8e(t),t.showDropdown=!1)}function X3t(e,t){t.inlineMode&&e.target.tagName!=="DROPDOWN-FORM"&&e.target.tagName!=="EOX-ITEMFILTER"&&t.showDropdown&&(G8e(t),t.showDropdown=!1)}function Z3t(e,t){var n=0,r=0,i=0,o=0,s=0,a=0,l=0,u=0,f=null,c=null,d=e[0],h=e[1],p=t.length;for(n;n<p;n++){r=0;var m=t[n].length-1,b=t[n];if(f=b[0],f[0]!==b[m][0]&&f[1]!==b[m][1])throw new Error("First and last coordinates in a ring must be the same");for(s=f[0]-d,a=f[1]-h,r;r<m;r++){if(c=b[r+1],u=c[1]-h,a<0&&u<0||a>0&&u>0){f=c,a=u,s=f[0]-d;continue}if(l=c[0]-e[0],u>0&&a<=0){if(o=s*u-l*a,o>0)i=i+1;else if(o===0)return 0}else if(a>0&&u<=0){if(o=s*u-l*a,o<0)i=i+1;else if(o===0)return 0}else if(u===0&&a<0){if(o=s*u-l*a,o===0)return 0}else if(a===0&&u<0){if(o=s*u-l*a,o===0)return 0}else if(a===0&&u===0){if(l<=0&&s>=0)return 0;if(s<=0&&l>=0)return 0}f=c,a=u,s=l}}return i%2!==0}function w0(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function K3t(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!cEe(e[0])||!cEe(e[1]))throw new Error("coordinates must contain numbers");return w0({type:"Point",coordinates:e},t,n)}function J3t(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return w0({type:"LineString",coordinates:e},t,n)}function p8(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function Q3t(e,t,n={}){return w0({type:"MultiLineString",coordinates:e},t,n)}function cEe(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function V8e(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ekt(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function L1(e){return e.type==="Feature"?e.geometry:e}function Mu(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const r=V8e(e),i=L1(t),o=i.type,s=t.bbox;let a=i.coordinates;if(s&&tkt(r,s)===!1)return!1;o==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const f=Z3t(r,a[u]);if(f===0)return!n.ignoreBoundary;f&&(l=!0)}return l}function tkt(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}class W8e{constructor(t=[],n=nkt){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,i=n[t];for(;t>0;){const o=t-1>>1,s=n[o];if(r(i,s)>=0)break;n[t]=s,t=o}n[t]=i}_down(t){const{data:n,compare:r}=this,i=this.length>>1,o=n[t];for(;t<i;){let s=(t<<1)+1,a=n[s];const l=s+1;if(l<this.length&&r(n[l],a)<0&&(s=l,a=n[l]),r(a,o)>=0)break;n[t]=a,t=s}n[t]=o}}function nkt(e,t){return e<t?-1:e>t?1:0}function Y8e(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y!==t.p.y?e.p.y>t.p.y?1:-1:1}function rkt(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let fEe=class{constructor(t,n,r,i){this.p={x:t[0],y:t[1]},this.featureId=n,this.ringId=r,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}};function ikt(e,t){if(e.type==="FeatureCollection"){const n=e.features;for(let r=0;r<n.length;r++)dEe(n[r],t)}else dEe(e,t)}let VA=0,WA=0,YA=0;function dEe(e,t){const n=e.type==="Feature"?e.geometry:e;let r=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(r=[r]),n.type==="LineString"&&(r=[[r]]);for(let i=0;i<r.length;i++)for(let o=0;o<r[i].length;o++){let s=r[i][o][0],a=null;WA=WA+1;for(let l=0;l<r[i][o].length-1;l++){a=r[i][o][l+1];const u=new fEe(s,VA,WA,YA),f=new fEe(a,VA,WA,YA+1);u.otherEvent=f,f.otherEvent=u,Y8e(u,f)>0?(f.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,f.isLeftEndpoint=!1),t.push(u),t.push(f),s=a,YA=YA+1}}VA=VA+1}class okt{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}function skt(e,t){if(e===null||t===null||e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const n=e.leftSweepEvent.p.x,r=e.leftSweepEvent.p.y,i=e.rightSweepEvent.p.x,o=e.rightSweepEvent.p.y,s=t.leftSweepEvent.p.x,a=t.leftSweepEvent.p.y,l=t.rightSweepEvent.p.x,u=t.rightSweepEvent.p.y,f=(u-a)*(i-n)-(l-s)*(o-r),c=(l-s)*(r-a)-(u-a)*(n-s),d=(i-n)*(r-a)-(o-r)*(n-s);if(f===0)return!1;const h=c/f,p=d/f;if(h>=0&&h<=1&&p>=0&&p<=1){const m=n+h*(i-n),b=r+h*(o-r);return[m,b]}return!1}function akt(e,t){t=t||!1;const n=[],r=new W8e([],rkt);for(;e.length;){const i=e.pop();if(i.isLeftEndpoint){const o=new okt(i);for(let s=0;s<r.data.length;s++){const a=r.data[s];if(t&&a.leftSweepEvent.featureId===i.featureId)continue;const l=skt(o,a);l!==!1&&n.push(l)}r.push(o)}else i.isLeftEndpoint===!1&&r.pop()}return n}function lkt(e,t){const n=new W8e([],Y8e);return ikt(e,n),akt(n,t)}var ukt=lkt;function xB(e,t,n={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:i=!0}=n;let o=[];e.type==="FeatureCollection"?o=o.concat(e.features):e.type==="Feature"?o.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&o.push(w0(e)),t.type==="FeatureCollection"?o=o.concat(t.features):t.type==="Feature"?o.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&o.push(w0(t));const s=ukt(p8(o),i);let a=[];if(r){const l={};s.forEach(u=>{const f=u.join(",");l[f]||(l[f]=!0,a.push(u))})}else a=s;return p8(a.map(l=>K3t(l)))}function X8e(e,t,n){if(e!==null)for(var r,i,o,s,a,l,u,f=0,c=0,d,h=e.type,p=h==="FeatureCollection",m=h==="Feature",b=p?e.features.length:1,y=0;y<b;y++){u=p?e.features[y].geometry:m?e.geometry:e,d=u?u.type==="GeometryCollection":!1,a=d?u.geometries.length:1;for(var v=0;v<a;v++){var w=0,E=0;if(s=d?u.geometries[v]:u,s!==null){l=s.coordinates;var A=s.type;switch(f=0,A){case null:break;case"Point":if(t(l,c,y,w,E)===!1)return!1;c++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(t(l[r],c,y,w,E)===!1)return!1;c++,A==="MultiPoint"&&w++}A==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(t(l[r][i],c,y,w,E)===!1)return!1;c++}A==="MultiLineString"&&w++,A==="Polygon"&&E++}A==="Polygon"&&w++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(E=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-f;o++){if(t(l[r][i][o],c,y,w,E)===!1)return!1;c++}E++}w++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(X8e(s.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ckt(e,t){var n,r,i,o,s,a,l,u,f,c,d=0,h=e.type==="FeatureCollection",p=e.type==="Feature",m=h?e.features.length:1;for(n=0;n<m;n++){for(a=h?e.features[n].geometry:p?e.geometry:e,u=h?e.features[n].properties:p?e.properties:{},f=h?e.features[n].bbox:p?e.bbox:void 0,c=h?e.features[n].id:p?e.id:void 0,l=a?a.type==="GeometryCollection":!1,s=l?a.geometries.length:1,i=0;i<s;i++){if(o=l?a.geometries[i]:a,o===null){if(t(null,d,u,f,c)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,d,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],d,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function Yk(e,t){ckt(e,function(n,r,i,o,s){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(w0(n,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var f=n.coordinates[u],c={type:l,coordinates:f};if(t(w0(c,i),r,u)===!1)return!1}})}function g8(e,t={}){const n=L1(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return fkt(n,t);case"MultiPolygon":return dkt(n,t);default:throw new Error("invalid poly")}}function fkt(e,t={}){const r=L1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return Z8e(r,i)}function dkt(e,t={}){const r=L1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},o=[];return r.forEach(s=>{o.push(Z8e(s,i))}),p8(o)}function Z8e(e,t){return e.length>1?Q3t(e,t):J3t(e[0],t)}function hkt(e,t,{ignoreSelfIntersections:n=!0}={ignoreSelfIntersections:!0}){let r=!0;return Yk(e,i=>{Yk(t,o=>{if(r===!1)return!1;r=pkt(i.geometry,o.geometry,n)})}),r}function pkt(e,t,n){switch(e.type){case"Point":switch(t.type){case"Point":return!bkt(e.coordinates,t.coordinates);case"LineString":return!hEe(t,e);case"Polygon":return!Mu(e,t)}break;case"LineString":switch(t.type){case"Point":return!hEe(e,t);case"LineString":return!gkt(e,t,n);case"Polygon":return!pEe(t,e,n)}break;case"Polygon":switch(t.type){case"Point":return!Mu(t,e);case"LineString":return!pEe(e,t,n);case"Polygon":return!mkt(t,e,n)}}return!1}function hEe(e,t){for(let n=0;n<e.coordinates.length-1;n++)if(ykt(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function gkt(e,t,n){return xB(e,t,{ignoreSelfIntersections:n}).features.length>0}function pEe(e,t,n){for(const i of t.coordinates)if(Mu(i,e))return!0;return xB(t,g8(e),{ignoreSelfIntersections:n}).features.length>0}function mkt(e,t,n){for(const i of e.coordinates[0])if(Mu(i,t))return!0;for(const i of t.coordinates[0])if(Mu(i,e))return!0;return xB(g8(e),g8(t),{ignoreSelfIntersections:n}).features.length>0}function ykt(e,t,n){const r=n[0]-e[0],i=n[1]-e[1],o=t[0]-e[0],s=t[1]-e[1];return r*s-i*o!==0?!1:Math.abs(o)>=Math.abs(s)?o>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:s>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function bkt(e,t){return e[0]===t[0]&&e[1]===t[1]}function vkt(e,t,{ignoreSelfIntersections:n=!0}={}){let r=!1;return Yk(e,i=>{Yk(t,o=>{if(r===!0)return!0;r=!hkt(i.geometry,o.geometry,{ignoreSelfIntersections:n})})}),r}var xkt=vkt;function Xk(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return X8e(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function Zk(e,t,n={}){const r=V8e(e),i=ekt(t);for(let o=0;o<i.length-1;o++){let s=!1;if(n.ignoreEndVertices&&(o===0&&(s="start"),o===i.length-2&&(s="end"),o===0&&o+1===i.length-1&&(s="both")),wkt(i[o],i[o+1],r,s,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function wkt(e,t,n,r,i){const o=n[0],s=n[1],a=e[0],l=e[1],u=t[0],f=t[1],c=n[0]-a,d=n[1]-l,h=u-a,p=f-l,m=c*p-d*h;if(i!==null){if(Math.abs(m)>i)return!1}else if(m!==0)return!1;if(Math.abs(h)===Math.abs(p)&&Math.abs(h)===0)return r?!1:n[0]===e[0]&&n[1]===e[1];if(r){if(r==="start")return Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<=u:u<=o&&o<a:p>0?l<s&&s<=f:f<=s&&s<l;if(r==="end")return Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<u:u<o&&o<=a:p>0?l<=s&&s<f:f<s&&s<=l;if(r==="both")return Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<u:u<o&&o<a:p>0?l<s&&s<f:f<s&&s<l}else return Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<=u:u<=o&&o<=a:p>0?l<=s&&s<=f:f<=s&&s<=l;return!1}function _kt(e,t){var n=L1(e),r=L1(t),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return Ekt(n,r);case"LineString":return Zk(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Mu(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return Skt(n,r);case"LineString":return Akt(n,r);case"Polygon":case"MultiPolygon":return Ckt(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return kkt(n,r);case"Polygon":case"MultiPolygon":return Tkt(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return Dkt(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Ekt(e,t){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(J8e(t.coordinates[n],e.coordinates)){r=!0;break}return r}function Skt(e,t){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)J8e(e.coordinates[n],t.coordinates[i])&&(r=!0);if(!r)return!1}return!0}function Akt(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++){if(!Zk(e.coordinates[r],t))return!1;n||(n=Zk(e.coordinates[r],t,{ignoreEndVertices:!0}))}return n}function Ckt(e,t){for(var n=!0,r=!1,i=0;i<e.coordinates.length;i++){if(r=Mu(e.coordinates[i],t),!r){n=!1;break}r=Mu(e.coordinates[i],t,{ignoreBoundary:!0})}return n&&r}function kkt(e,t){for(var n=0;n<e.coordinates.length;n++)if(!Zk(e.coordinates[n],t))return!1;return!0}function Tkt(e,t){var n=Xk(t),r=Xk(e);if(!K8e(n,r))return!1;for(var i=!1,o=0;o<e.coordinates.length;o++){if(!Mu(e.coordinates[o],t))return!1;if(i||(i=Mu(e.coordinates[o],t,{ignoreBoundary:!0})),!i&&o<e.coordinates.length-1){var s=Lkt(e.coordinates[o],e.coordinates[o+1]);i=Mu(s,t,{ignoreBoundary:!0})}}return i}function Dkt(e,t){var n=Xk(e),r=Xk(t);if(!K8e(r,n))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Mu(e.coordinates[0][i],t))return!1;return!0}function K8e(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function J8e(e,t){return e[0]===t[0]&&e[1]===t[1]}function Lkt(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var Rkt=_kt;const Fkt=(e,t)=>t?xkt(e,t):!0,Mkt=(e,t)=>t?Rkt(e,t):!0;function Okt(e,t="highlight",n="title"){const r=(o,s,a)=>{const l=s.split(".");let u;for(u=0;u<l.length-1;u++)o=o[l[u]];o[l[u]]=a},i=(o,s=[])=>{let a="",l=0;return s.forEach(u=>{const f=u[1]+1;a+=[o.substring(l,u[0]),`<mark class="${t}">`,o.substring(u[0],f),"</mark>"].join(""),l=f}),a+=o.substring(l),a};return e.filter(({matches:o})=>o&&o.length).map(({item:o,matches:s})=>{const a={...o};return s.forEach(l=>{l.key===n&&r(a,l.key,i(l.value,l.indices))}),a})}var UC={exports:{}},$kt=UC.exports,gEe;function Ikt(){return gEe||(gEe=1,function(e,t){(function(n,r){e.exports=r()})($kt,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",a="minute",l="hour",u="day",f="week",c="month",d="quarter",h="year",p="date",m="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var I=["th","st","nd","rd"],U=$%100;return"["+$+(I[(U-20)%10]||I[U]||I[0])+"]"}},w=function($,I,U){var q=String($);return!q||q.length>=I?$:""+Array(I+1-q.length).join(U)+$},E={s:w,z:function($){var I=-$.utcOffset(),U=Math.abs(I),q=Math.floor(U/60),Y=U%60;return(I<=0?"+":"-")+w(q,2,"0")+":"+w(Y,2,"0")},m:function $(I,U){if(I.date()<U.date())return-$(U,I);var q=12*(U.year()-I.year())+(U.month()-I.month()),Y=I.clone().add(q,c),X=U-Y<0,te=I.clone().add(q+(X?-1:1),c);return+(-(q+(U-Y)/(X?Y-te:te-Y))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:c,y:h,w:f,d:u,D:p,h:l,m:a,s,ms:o,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},A="en",T={};T[A]=v;var D="$isDayjsObject",k=function($){return $ instanceof K||!(!$||!$[D])},R=function $(I,U,q){var Y;if(!I)return A;if(typeof I=="string"){var X=I.toLowerCase();T[X]&&(Y=X),U&&(T[X]=U,Y=X);var te=I.split("-");if(!Y&&te.length>1)return $(te[0])}else{var le=I.name;T[le]=I,Y=le}return!q&&Y&&(A=Y),Y||!q&&A},M=function($,I){if(k($))return $.clone();var U=typeof I=="object"?I:{};return U.date=$,U.args=arguments,new K(U)},B=E;B.l=R,B.i=k,B.w=function($,I){return M($,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var K=function(){function $(U){this.$L=R(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[D]=!0}var I=$.prototype;return I.parse=function(U){this.$d=function(q){var Y=q.date,X=q.utc;if(Y===null)return new Date(NaN);if(B.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var te=Y.match(b);if(te){var le=te[2]-1||0,ee=(te[7]||"0").substring(0,3);return X?new Date(Date.UTC(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)):new Date(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)}}return new Date(Y)}(U),this.init()},I.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},I.$utils=function(){return B},I.isValid=function(){return this.$d.toString()!==m},I.isSame=function(U,q){var Y=M(U);return this.startOf(q)<=Y&&Y<=this.endOf(q)},I.isAfter=function(U,q){return M(U)<this.startOf(q)},I.isBefore=function(U,q){return this.endOf(q)<M(U)},I.$g=function(U,q,Y){return B.u(U)?this[q]:this.set(Y,U)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(U,q){var Y=this,X=!!B.u(q)||q,te=B.p(U),le=function(we,Ie){var qe=B.w(Y.$u?Date.UTC(Y.$y,Ie,we):new Date(Y.$y,Ie,we),Y);return X?qe:qe.endOf(u)},ee=function(we,Ie){return B.w(Y.toDate()[we].apply(Y.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(Ie)),Y)},z=this.$W,he=this.$M,de=this.$D,ze="set"+(this.$u?"UTC":"");switch(te){case h:return X?le(1,0):le(31,11);case c:return X?le(1,he):le(0,he+1);case f:var He=this.$locale().weekStart||0,je=(z<He?z+7:z)-He;return le(X?de-je:de+(6-je),he);case u:case p:return ee(ze+"Hours",0);case l:return ee(ze+"Minutes",1);case a:return ee(ze+"Seconds",2);case s:return ee(ze+"Milliseconds",3);default:return this.clone()}},I.endOf=function(U){return this.startOf(U,!1)},I.$set=function(U,q){var Y,X=B.p(U),te="set"+(this.$u?"UTC":""),le=(Y={},Y[u]=te+"Date",Y[p]=te+"Date",Y[c]=te+"Month",Y[h]=te+"FullYear",Y[l]=te+"Hours",Y[a]=te+"Minutes",Y[s]=te+"Seconds",Y[o]=te+"Milliseconds",Y)[X],ee=X===u?this.$D+(q-this.$W):q;if(X===c||X===h){var z=this.clone().set(p,1);z.$d[le](ee),z.init(),this.$d=z.set(p,Math.min(this.$D,z.daysInMonth())).$d}else le&&this.$d[le](ee);return this.init(),this},I.set=function(U,q){return this.clone().$set(U,q)},I.get=function(U){return this[B.p(U)]()},I.add=function(U,q){var Y,X=this;U=Number(U);var te=B.p(q),le=function(he){var de=M(X);return B.w(de.date(de.date()+Math.round(he*U)),X)};if(te===c)return this.set(c,this.$M+U);if(te===h)return this.set(h,this.$y+U);if(te===u)return le(1);if(te===f)return le(7);var ee=(Y={},Y[a]=r,Y[l]=i,Y[s]=n,Y)[te]||1,z=this.$d.getTime()+U*ee;return B.w(z,this)},I.subtract=function(U,q){return this.add(-1*U,q)},I.format=function(U){var q=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||m;var X=U||"YYYY-MM-DDTHH:mm:ssZ",te=B.z(this),le=this.$H,ee=this.$m,z=this.$M,he=Y.weekdays,de=Y.months,ze=Y.meridiem,He=function(Ie,qe,Pe,At){return Ie&&(Ie[qe]||Ie(q,X))||Pe[qe].slice(0,At)},je=function(Ie){return B.s(le%12||12,Ie,"0")},we=ze||function(Ie,qe,Pe){var At=Ie<12?"AM":"PM";return Pe?At.toLowerCase():At};return X.replace(y,function(Ie,qe){return qe||function(Pe){switch(Pe){case"YY":return String(q.$y).slice(-2);case"YYYY":return B.s(q.$y,4,"0");case"M":return z+1;case"MM":return B.s(z+1,2,"0");case"MMM":return He(Y.monthsShort,z,de,3);case"MMMM":return He(de,z);case"D":return q.$D;case"DD":return B.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return He(Y.weekdaysMin,q.$W,he,2);case"ddd":return He(Y.weekdaysShort,q.$W,he,3);case"dddd":return he[q.$W];case"H":return String(le);case"HH":return B.s(le,2,"0");case"h":return je(1);case"hh":return je(2);case"a":return we(le,ee,!0);case"A":return we(le,ee,!1);case"m":return String(ee);case"mm":return B.s(ee,2,"0");case"s":return String(q.$s);case"ss":return B.s(q.$s,2,"0");case"SSS":return B.s(q.$ms,3,"0");case"Z":return te}return null}(Ie)||te.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(U,q,Y){var X,te=this,le=B.p(q),ee=M(U),z=(ee.utcOffset()-this.utcOffset())*r,he=this-ee,de=function(){return B.m(te,ee)};switch(le){case h:X=de()/12;break;case c:X=de();break;case d:X=de()/3;break;case f:X=(he-z)/6048e5;break;case u:X=(he-z)/864e5;break;case l:X=he/i;break;case a:X=he/r;break;case s:X=he/n;break;default:X=he}return Y?X:B.a(X)},I.daysInMonth=function(){return this.endOf(c).$D},I.$locale=function(){return T[this.$L]},I.locale=function(U,q){if(!U)return this.$L;var Y=this.clone(),X=R(U,q,!0);return X&&(Y.$L=X),Y},I.clone=function(){return B.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},$}(),L=K.prototype;return M.prototype=L,[["$ms",o],["$s",s],["$m",a],["$H",l],["$W",u],["$M",c],["$y",h],["$D",p]].forEach(function($){L[$[1]]=function(I){return this.$g(I,$[0],$[1])}}),M.extend=function($,I){return $.$i||($(I,K,M),$.$i=!0),M},M.locale=R,M.isDayjs=k,M.unix=function($){return M(1e3*$)},M.en=T[A],M.Ls=T,M.p={},M})}(UC)),UC.exports}var Pkt=Ikt();const Ac=oa(Pkt);let Q8e;const Nkt=(e,t)=>{Q8e=new wg(e,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...t})},Bkt=async(e,t,n)=>{const r=Object.entries(t).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,u])=>{const f="$or",c=[],d=(h,p)=>{const m={};u.type==="text"?m[h]=`${p}`:m[l]=`="${h}"`,c.push(m)};return Object.entries(u.state).filter(([,h])=>h).forEach(([h,p])=>d(h,p)),c.length>0&&a.push({[f]:c}),a},[]);let i;if(!(r.length>0)&&n.matchAllWhenEmpty!==!1)i=e;else{const a={$and:[...r]},l=Q8e.search(a);i=n.enableHighlighting?Okt(l,"highlight",n.titleProperty):l.map(u=>u.item)}const o=Object.entries(t).filter(([,a])=>a.type==="range").reduce((a,[l,u])=>(a[l]={min:u.state.min,max:u.state.max,format:u.format},a),{});if(Object.keys(o).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const[f,c]of Object.entries(o)){const d=p=>c.format==="date"?Ac(p).unix():p,h=D_(f,i[l]);h?Array.isArray(h)?u[f]=o[f].min<=d(h[1])&&d(h[0])<=o[f].max:d(h)>=o[f].min&&d(h)<=o[f].max?u[f]=!0:u[f]=!1:u[f]=!0}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}const s=Object.entries(t).filter(([,a])=>a.type==="spatial").reduce((a,[l,u])=>(a[l]={geometry:u.state.geometry,mode:u.state.mode},a),{});if(Object.values(s).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const f of Object.keys(s)){const c=D_(f,i[l]),d=s[f].mode||"within";c&&(d==="within"?Mkt(c,s[f].geometry):Fkt(c,s[f].geometry))?u[f]=!0:u[f]=!1}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}return i};function zkt(e,t){return[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...e&&{format:"GeoJSON"},...e&&{url:t}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://tiles.maps.eox.at/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}]}function ER(e){if(!e.dirty)return null;switch(e.type){case"multiselect":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"range":e.state.min=e.min,e.state.max=e.max;break;case"select":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"spatial":e.state.geometry=void 0;break;case"text":e.keys.forEach(n=>{e.state[n]=void 0});break}return delete e.stringifiedState,delete e.dirty,e}function mEe(e,t){return e*2+t}function jkt(e){return Object.keys(e).map(t=>({title:Qe`${e[t].title||e[t].key}:
        <strong>${e[t].stringifiedState}</strong>`,key:t})).filter(t=>e[t.key].dirty)}function m8(e){return Object.values(e).map(t=>t.dirty).filter(t=>t).length>0}async function Ukt(e,t,n){return await(await fetch(`${n.externalFilter(e,t)}`)).json()}function e$e(e,t,n){let r;if(e.detail?r=e.detail.target:r=e.target,r!=null&&r.classList.contains("details-filter")){if(!r.open||t!=null&&t.expandMultipleFilters)return;n.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(i=>{const o=i.shadowRoot.querySelector(".details-filter");o&&o!==r&&o.removeAttribute("open")})}else{if(!(r!=null&&r.open)||t!=null&&t.expandMultipleResults)return;n.querySelectorAll("details").forEach(i=>{i!==r&&i.removeAttribute("open")})}}function D_(e,t){return e!=null&&e.includes(".")?e.split(".").reduce((n,r)=>n&&n[r],t):t[e]}var qi,t$e,y8,b8,n$e,v8,x8,r$e,w8,i$e,o$e;class qkt extends Zr{constructor(){super();yn(this,qi);this.filterProperties={},this.unstyled=!1,this.inlineMode=!1,this.filters={},this._handleClickOutside=gn(this,qi,n$e).bind(this),this._handleKeyDown=gn(this,qi,v8).bind(this)}static get properties(){return{filterProperties:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},unstyled:{type:Boolean},filters:{state:!0,type:Object}}}set showDropdown(n){this.renderRoot.querySelector("[popover]").togglePopover(n)}get showDropdown(){var n;return(n=this.renderRoot.querySelector("[popover]"))==null?void 0:n.matches(":popover-open")}connectedCallback(){super.connectedCallback(),this.inlineMode&&gn(this,qi,y8).call(this)}disconnectedCallback(){this.inlineMode&&gn(this,qi,b8).call(this),super.disconnectedCallback()}_overlayCleanup(){}updateInline(){this.inlineMode&&this.requestUpdate()}updated(n){n.has("inlineMode")&&(this.inlineMode?gn(this,qi,y8).call(this):gn(this,qi,b8).call(this))}render(){return Qe`
      <style>
        ${!this.unstyled&&QE}
      </style>
      ${this.inlineMode?Qe`
            <div
              class="inline-container-wrapper"
              @click="${gn(this,qi,x8)}"
            >
              <div class="inline-container" part="container">
                <div class="chip-container">
                  <div class="chip-wrapper">
                    <eox-itemfilter-chips
                      .items=${jkt(this.filters)}
                      .controller=${{remove:n=>gn(this,qi,i$e).call(this,n)}}
                    >
                    </eox-itemfilter-chips>
                  </div>

                  ${Un(m8(this.filters),()=>Qe`
                      <span
                        class="chip-close"
                        @click=${()=>this.dispatchEvent(new CustomEvent("reset"))}
                      ></span>
                    `)}
                </div>
                <div
                  class="input-container ${m8(this.filters)?"dirty-filter-input":""}"
                >
                  <input
                    autocomplete="off"
                    id="eox-itemfilter-input-search"
                    type="text"
                    @click="${gn(this,qi,x8)}"
                    @focus="${gn(this,qi,r$e)}"
                    @input="${gn(this,qi,o$e)}"
                    placeholder="Search and add filter"
                    aria-haspopup="true"
                    aria-expanded="${this.showDropdown}"
                  />
                </div>
              </div>
              <div popover="manual">
                <div
                  class="inline-content"
                  slot="content"
                  @keydown="${gn(this,qi,v8)}"
                  @click="${gn(this,qi,w8)}"
                  @focus="${gn(this,qi,w8)}"
                >
                  <slot name="section"></slot>
                </div>
              </div>
            </div>
          `:Qe`<slot name="section"></slot>`}
    `}}qi=new WeakSet,t$e=function(){setTimeout(()=>this._overlayCleanup=H3t(this))},y8=function(){document.addEventListener("click",this._handleClickOutside),document.addEventListener("focusout",this._handleClickOutside),document.addEventListener("keydown",this._handleKeyDown),gn(this,qi,t$e).call(this)},b8=function(){document.removeEventListener("click",this._handleClickOutside),document.removeEventListener("focusout",this._handleClickOutside),document.removeEventListener("keydown",this._handleKeyDown),this._overlayCleanup()},n$e=function(n){X3t(n,this)},v8=function(n){Y3t(n,this)},x8=function(n){W3t(n,this)},r$e=function(){V3t(this)},w8=function(n){G3t(n,this)},i$e=function(n){v3t(n,this)},o$e=function(n){O8e(n,this)};customElements.define("eox-itemfilter-container",qkt);function Hkt(e){const t=e.renderRoot.querySelector("input[type='text']");t.value="",ER(e.filterObject),e.requestUpdate()}function Gkt(e){const t=e.renderRoot.querySelector("input[type='text']");e.isValid=t.checkValidity(),e.filterObject.keys.forEach(n=>{e.filterObject.state[n]=t.value}),e.filterObject.dirty=!0,e.filterObject.stringifiedState=t.value,e.dispatchEvent(new CustomEvent("filter")),t.value===""&&e.reset()}const _8="ddd, D MMM YYYY HH:mm:ss";function Vkt(e){if(e.filterObject=ER(e.filterObject),e.filterObject){const t=e.querySelector("tc-range-slider"),n=e.filterObject.min,r=e.filterObject.max;t.value1!==n&&(t.value1=n),t.value2!==r&&(t.value2=r)}e.requestUpdate()}function Wkt(e,t){const[n,r]=e.detail.values;(n!==t.filterObject.state.min||r!==t.filterObject.state.max)&&([t.filterObject.state.min,t.filterObject.state.max]=[n,r],t.filterObject.dirty=!0),t.filterObject.dirty&&(t.filterObject.stringifiedState=t.filterObject.format==="date"?`${Ac.unix(n).format(_8)} - ${Ac.unix(r).format(_8)}`:`${n} - ${r}`),t.dispatchEvent(new CustomEvent("filter")),n===t.filterObject.min&&r===t.filterObject.max?t.reset():t.requestUpdate()}function Ykt(e,t,n){const r=n.filterObject.format==="date",i=n.filterObject.state[e],o=r?Ac.unix(i).format(_8):i;return Qe`<div class="range-${t}">${o}</div>`}function Xkt(e){Zkt(-1,e),ER(e.filterObject),e.requestUpdate()}function Zkt(e,t){t.selectedItems=[],wB(t),a$e(t)}function s$e(e,t){const n=t.selectedItems.indexOf(e);n>=0?t.selectedItems=t.selectedItems.filter((r,i)=>i!==n):t.type==="multiselect"?t.selectedItems=[...t.selectedItems,e]:(t.selectedItems=[e],t.showSuggestions=!1),wB(t),a$e(t)}function Kkt(e,t){t.query=e.target.value,t.showSuggestions=!0}function Jkt(e,t){switch(e.key){case"ArrowDown":t.highlightedIndex=Math.min(t.highlightedIndex+1,t.filteredSuggestions.length-1);break;case"ArrowUp":t.highlightedIndex=Math.max(t.highlightedIndex-1,0);break;case"Enter":t.highlightedIndex>=0&&s$e(t.filteredSuggestions[t.highlightedIndex],t);break;case"Escape":t.showSuggestions=!1;break}}function Qkt(e,t){(e.has("suggestions")||e.has("query"))&&wB(t)}function eTt(e,t){var r;const n=((r=e.filterObject)==null?void 0:r.sort)||((i,o)=>i.localeCompare(o));return t.sort(n).map(i=>i)}function wB(e){var n,r,i;let t;e.query&&(t=new wg(e.suggestions,{threshold:.4}).search(e.query).map(s=>s.item)),e.filteredSuggestions=eTt(e,t||e.suggestions),(n=e.filterObject)!=null&&n.filterKeys&&(e.filteredSuggestions=(r=e.filterObject)==null?void 0:r.filterKeys.map(o=>`${o}`),e.filterObject.state=(i=e.filterObject)==null?void 0:i.filterKeys.map(o=>`${o}`).reduce((o,s)=>(s in o||(o[s]=void 0),o),e.filterObject.state)),e.highlightedIndex=-1}function a$e(e){Object.keys(e.filterObject.state).forEach(t=>{e.filterObject.state[t]=e.selectedItems.includes(t)}),e.filterObject.stringifiedState=Object.keys(e.filterObject.state).filter(t=>e.filterObject.state[t]).join(", ")||"",e.filterObject.dirty=e.filterObject.stringifiedState.length>0,e.dispatchEvent(new CustomEvent("filter")),e.requestUpdate()}function tTt(e){ER(e.filterObject),e.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),e.requestUpdate()}function nTt(e){e.renderRoot.querySelector("#eox-map").innerHTML="",l$e(e)}function rTt(e,t){t.filterObject.state.mode=e;const n=new CustomEvent("filter",{detail:{[t.filterObject.key]:{}}});t.dispatchEvent(n)}function l$e(e){const t=e.renderRoot.querySelector("#eox-map");t.innerHTML===""&&(t.innerHTML='<eox-map part="map" style="height: 400px"></eox-map>');const n=e.geometry&&iTt(e.geometry),r=zkt(e.geometry,n);e.eoxMap=e.renderRoot.querySelector("eox-map"),setTimeout(()=>{e.eoxMap.layers=r;const i=o=>{const s=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:o.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});e.dispatchEvent(s)};e.eoxMap.interactions.drawInteraction.on("drawend",o=>{i(o.feature),e.eoxMap.removeInteraction("drawInteraction")}),e.eoxMap.interactions.drawInteraction_modify.on("modifyend",o=>{i(o.features.getArray()[0])})},1e3)}function iTt(e){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:e}]}))}`}var CT;class oTt extends Zr{constructor(){super();yn(this,CT,()=>{Gkt(this)});tn(this,"debouncedInputHandler",G0(Gt(this,CT),500,{leading:!0}));this.filterObject={},this.unstyled=!1,this.tabIndex=0,this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number},unstyled:{type:Boolean},isValid:{state:!0,type:Boolean}}}reset(){Hkt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>{var n;return Qe`
        <style></style>
        <div class="text-container">
          <div class="text-container-wrapper">
            <input
              type="text"
              placeholder=${this.filterObject.placeholder}
              data-cy="search"
              class="text-input"
              part="input-search"
              value="${Object.values(this.filterObject.state)[0]}"
              tabindex=${this.tabIndex}
              pattern="${((n=this.filterObject.validation)==null?void 0:n.pattern)||".*"}"
              @input="${this.debouncedInputHandler}"
              @click=${r=>r.stopPropagation()}
            />
          </div>
        </div>
        <small class="error-validation"
          >${this.filterObject.validation&&this.isValid===!1?this.filterObject.validation.message:""}</small
        >
      `})}}CT=new WeakMap;customElements.define("eox-itemfilter-text",oTt);function sTt(e,t,n){return e.filter(r=>{const i=r[n.config.aggregateResults];let o;return n.filters[n.config.aggregateResults]&&(o=Object.keys(n.filters[n.config.aggregateResults]).filter(a=>n.filters[n.config.aggregateResults].state[a])),(o!=null&&o.length?o.includes(t):!0)&&Array.isArray(i)?i.includes(t):i===t})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yEe=(e,t,n)=>{const r=new Map;for(let i=t;i<=n;i++)r.set(e[i],i);return r},u$e=K_(class extends nD{constructor(e){if(super(e),e.type!==np.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,n){let r;n===void 0?n=t:t!==void 0&&(r=t);const i=[],o=[];let s=0;for(const a of e)i[s]=r?r(a,s):s,o[s]=n(a,s),s++;return{values:o,keys:i}}render(e,t,n){return this.dt(e,t,n).values}update(e,[t,n,r]){const i=NBe(e),{values:o,keys:s}=this.dt(t,n,r);if(!Array.isArray(i))return this.ut=s,o;const a=this.ut??(this.ut=[]),l=[];let u,f,c=0,d=i.length-1,h=0,p=o.length-1;for(;c<=d&&h<=p;)if(i[c]===null)c++;else if(i[d]===null)d--;else if(a[c]===s[h])l[h]=Qg(i[c],o[h]),c++,h++;else if(a[d]===s[p])l[p]=Qg(i[d],o[p]),d--,p--;else if(a[c]===s[p])l[p]=Qg(i[c],o[p]),ew(e,l[p+1],i[c]),c++,p--;else if(a[d]===s[h])l[h]=Qg(i[d],o[h]),ew(e,i[c],i[d]),d--,h++;else if(u===void 0&&(u=yEe(s,h,p),f=yEe(a,c,d)),u.has(a[c]))if(u.has(a[d])){const m=f.get(s[h]),b=m!==void 0?i[m]:null;if(b===null){const y=ew(e,i[c]);Qg(y,o[h]),l[h]=y}else l[h]=Qg(b,o[h]),ew(e,i[c],b),i[m]=null;h++}else GR(i[d]),d--;else GR(i[c]),c++;for(;h<=p;){const m=ew(e,l[p+1]);Qg(m,o[h]),l[h++]=m}for(;c<=d;){const m=i[c++];m!==null&&GR(m)}return this.ut=s,J8(e,l),lb}});function aTt(e,t){return Qe`
    <details
      class="details-results"
      @toggle=${t.handleAccordion}
      ?open=${t.config.expandResults||Xr}
    >
      <summary>
        <span class="title">
          ${e}
          <span class="count"
            >${t.aggregateResults(t.results,e).length}</span
          >
        </span>
      </summary>
      <div>
        ${c$e(e,t)}
      </div>
    </details>
  `}function c$e(e,t){const n=t.results,r=e?t.aggregateResults(n,e):n,i=t.config,o=s=>{var a;return((a=t.selectedResult)==null?void 0:a[i.idProperty])===s[i.idProperty]?"highlighted":Xr};return Qe`
    <ul class=${t.resultType}>
      ${u$e(r,s=>s.id,s=>Qe`
          <li
            class=${o(s)}
            @click=${()=>{t.selectedResult===s?t.selectedResult=null:t.selectedResult=s,t.dispatchEvent(new CustomEvent("result",{detail:t.selectedResult}))}}
          >
            <span id="${s.id}">
              ${Un(i.subTitleProperty||i.imageProperty,()=>Qe`
                  ${D_(i.imageProperty,s)?Qe`
                        <img
                          class="image"
                          src="${D_(i.imageProperty,s)}"
                        />
                      `:Qe`
                        <svg
                          class="image"
                          width="800"
                          height="600"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <rect
                            width="800"
                            height="600"
                            fill="var(--primary-color)"
                          />
                        </svg>
                      `}
                  <div class="title-container">
                    <span class="title"
                      >${Sc(s[i.titleProperty])}</span
                    >
                    <span class="subtitle"
                      >${Sc(s[i.subTitleProperty])}</span
                    >
                  </div>
                `,()=>Qe`
                  <span class="title"
                    >${Sc(s[i.titleProperty])}</span
                  >
                `)}
            </span>
          </li>
        `)}
    </ul>
  `}var E0,E8,f$e;class lTt extends Zr{constructor(){super();yn(this,E0);this.config=null,this.filters={},this.resultAggregation=[],this.selectedResult=null,this.resultType="list"}static get properties(){return{config:{attribute:!1,type:Object},results:{state:!0,type:Object},filters:{state:!0,type:Object},resultAggregation:{attribute:!1,type:Array},selectedResult:{state:!0,type:Object},resultType:{attribute:"result-type",type:String}}}aggregateResults(n,r){return sTt(n,r,this)}createRenderRoot(){return this}handleAccordion(n){e$e(n,this.config,this)}render(){return Qe`
      <section id="section-results">
        <div slot="resultstitle"></div>
        <div id="container-results" class="scroll">
          ${Un(this.results.length<1,()=>Qe`<small class="no-results">No matching items</small>`,()=>Xr)}
          <ul id="results" part="results">
            ${Un(this.config.aggregateResults,()=>ou(this.resultAggregation.filter(n=>this.aggregateResults(this.results,n).length),n=>Qe`${Un(this.aggregateResults(this.results,n).length===1&&this.config.autoSpreadSingle,()=>Qe`<div style="margin-left: -8px">
                          ${gn(this,E0,E8).call(this,n)}
                        </div>`,()=>gn(this,E0,f$e).call(this,n))}`),()=>gn(this,E0,E8).call(this))}
          </ul>
        </div>
      </section>
    `}}E0=new WeakSet,E8=function(n){return c$e(n,this)},f$e=function(n){return aTt(n,this)};customElements.define("eox-itemfilter-results",lTt);const uTt=`input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}`,cTt=`input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}`;var og,h$e,p$e,g$e;class d$e extends Zr{constructor(){super();yn(this,og);tn(this,"debouncedInputHandler",G0(gn(this,og,g$e),500,{leading:!0}));this.filterObject={},this.suggestions=[],this.selectedItems=[],this.query="",this.showSuggestions=!1,this.highlightedIndex=-1,this.filteredSuggestions=[],this.type="select",this.unstyled=!1,this.tabIndex=0,this.inlineMode=!1}updated(n){Qkt(n,this)}reset(){Xkt(this)}firstUpdated(){this.filterObject.state&&(this.selectedItems=Object.keys(this.filterObject.state).map(n=>this.filterObject.state[n]?n:null).filter(n=>!!n),this.filterObject.stringifiedState=this.selectedItems.join(", ")||"",this.requestUpdate())}render(){const n=this.type.includes("multi")?"checkbox":"radio",r=this.filteredSuggestions.length>5?"select-overflow":Xr;return Qe`
      <style>
        ${!this.unstyled&&QE}
        ${!this.unstyled&&uTt}
        ${!this.unstyled&&cTt}
      </style>
      ${Un(this.suggestions.length>10,()=>Qe`<div class="autocomplete-container">
            <div class="autocomplete-container-wrapper">
              <input
                autocomplete="off"
                tabindex=${this.tabIndex}
                class="autocomplete-input"
                type="text"
                .value=${this.query}
                placeholder="${this.filterObject.placeholder||""}"
                @input=${gn(this,og,h$e)}
                @keydown=${gn(this,og,p$e)}
                @blur=${()=>this.showSuggestions=!1}
                @focus=${()=>this.showSuggestions=!0}
              />
            </div>
          </div>`)}
      <div class="select-container ${r}">
        <ul class="${this.type}">
          ${this.filteredSuggestions.map(i=>Qe`
              <li
                data-identifier="${i.toString().toLowerCase()}"
                data-title="${i}"
              >
                <label>
                  <input
                    type="${n}"
                    name=${i}
                    .checked=${this.selectedItems.includes(i)}
                    @change=${()=>this.debouncedInputHandler(i)}
                    @keydown=${o=>{o.key===" "&&this.inlineMode&&this.debouncedInputHandler(i)}}
                    tabindex=${this.tabIndex+1}
                  />
                  <span class="title">${i}</span>
                </label>
              </li>
            `)}
        </ul>
      </div>
    `}}og=new WeakSet,h$e=function(n){Kkt(n,this)},p$e=function(n){Jkt(n,this)},g$e=function(n){s$e(n,this)},tn(d$e,"properties",{filterObject:{attribute:!1,type:Object},suggestions:{attribute:!1,type:Array},selectedItems:{state:!0,type:Array},query:{state:!0,type:String},showSuggestions:{state:!0,type:Boolean},highlightedIndex:{state:!0,type:Number},filteredSuggestions:{state:!0,type:Array},type:{attribute:!0,type:String},unstyled:{type:Boolean},tabIndex:{attribute:!1,type:Number},inlineMode:{attribute:"inline-mode",type:Boolean}});customElements.define("eox-itemfilter-select",d$e);(()=>{var e=Object.defineProperty,t=Math.pow,n=(me,Le,it)=>Le in me?e(me,Le,{enumerable:!0,configurable:!0,writable:!0,value:it}):me[Le]=it,r=(me,Le,it)=>(n(me,typeof Le!="symbol"?Le+"":Le,it),it),i=(me,Le)=>` ${Le&&Le.length>0?Le.map(it=>`<link rel="stylesheet" href="${it}" />`).join(""):""} <style> ${me} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,o=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",s="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",u="range-dragging",f="data",c="min",d="max",h="step",p="round",m="type",b="theme",y="rtl",v="btt",w="disabled",E="keyboard-disabled",A="mousewheel-disabled",T="slider-width",D="slider-height",k="slider-radius",R="slider-bg",M="slider-bg-hover",B="slider-bg-fill",K="pointer-width",L="pointer-height",$="pointer-radius",I="pointer-bg",U="pointer-bg-hover",q="pointer-bg-focus",Y="pointer-shadow",X="pointer-shadow-hover",te="pointer-shadow-focus",le="pointer-border",ee="pointer-border-hover",z="pointer-border-focus",he="animate-onclick",de="css-links",ze="vertical",He="horizontal",je=(me,Le,it,Ke,Et)=>{let an=Le-me;return an===0?it:(Ke-it)*(Et-me)/an+it},we=me=>!isNaN(parseFloat(me))&&isFinite(me),Ie=(me,Le)=>we(me)?Number(me):Le,qe=(me,Le)=>Le===0?0:Math.round(me/Le)*Le,Pe=(me,Le=1/0)=>{if(Le===1/0)return me;let it=t(10,Le);return Math.round(me*it)/it},At=me=>me==null?!1:typeof me=="boolean"?me:me.trim().toLowerCase()==="true",ht=(me,Le)=>{me.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:Le}}))},nn=(me,Le)=>{me.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:Le}}))},Vt=(me,Le)=>{me.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:Le}}))},On=(me,Le)=>{me.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:Le}}))},Ze=(me,Le)=>{if(!Le||Le.length<=0)return;let it=Le.map(Et=>we(Et)?Ie(Et,Et):Et),Ke={values:it||[]};Ke.value=it[0],Ke.value0=it[0],Ke.value1=it[0];for(let Et=1;Et<it.length;Et++)Ke[`value${Et+1}`]=it[Et];me.dispatchEvent(new CustomEvent("change",{detail:Ke}))},pe=(me,Le,it)=>{let Ke=0,Et,an,en,wt,et=!1,hn=(pt,Xn,ni,Ar,Rr,nr)=>{let qt=Ke;ni!==void 0&&pt>ni&&(pt=ni),Xn!==void 0&&pt<Xn&&(pt=Xn),Ke=pt;let bi=Ke;return(Ar===ze&&nr||Ar===He&&Rr)&&(bi=100-bi),Ar===ze?Le.style.top=`${bi}%`:Le.style.left=`${bi}%`,qt!==Ke},An=pt=>pt===Le||Le.contains(pt),zt=(pt,Xn,ni,Ar)=>{Et=pt,an=Xn,en=ni,wt=Ar},jt=pt=>{et=pt,Le.classList.toggle("disabled",et),et?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Sr=(pt,Xn)=>{Xn==null?Le.removeAttribute(pt):Le.setAttribute(pt,Xn)},ci=pt=>Le.getAttribute(pt),Zt=pt=>{if(!et){switch(pt.key){case"ArrowLeft":{pt.preventDefault(),typeof Et=="function"&&Et(it);break}case"ArrowRight":{pt.preventDefault(),typeof an=="function"&&an(it);break}case"ArrowUp":{pt.preventDefault(),typeof en=="function"&&en(it);break}case"ArrowDown":{pt.preventDefault(),typeof wt=="function"&&wt(it);break}}On(me,pt)}},Xe=()=>{et||ht(me,Le)};return Le.className=`pointer pointer-${it}`,Le.addEventListener("keydown",Zt),Le.addEventListener("click",Xe),{$pointer:Le,get percent(){return Ke},get disabled(){return et},set disabled(pt){jt(pt)},updatePosition:hn,isClicked:An,setCallbacks:zt,setAttr:Sr,getAttr:ci,destroy:()=>{Le.removeEventListener("keydown",Zt),Le.removeEventListener("click",Xe),Le.remove()}}},ie=me=>{if(me==null)return;if(Array.isArray(me))return me;if(me.trim()==="")return;let Le=me.split(","),it=[],Ke=!0;for(let Et=0;Et<Le.length;Et++){let an=Le[Et].trim();an!==""&&(it.push(an),we(an)||(Ke=!1))}return Ke?it.map(Et=>Number(Et)):it},se=(me,Le)=>Le?Le.findIndex(it=>it===me||it.toString().trim()===me.toString().trim()):-1,ve=me=>({updatePosition:(Le,it,Ke,Et)=>{if(it.length<=0)return;let an=it.length===1,en=it[0],wt=it[it.length-1];Le===ze?(me.style.removeProperty("width"),me.style.removeProperty("right"),me.style.removeProperty("left"),an?me.style.height=`${en}%`:me.style.height=`${Math.abs(en-wt)}%`,Et?(me.style.bottom="0%",an?me.style.top="auto":me.style.top=`${Math.min(100-wt,100-en)}%`):(me.style.bottom="auto",an?me.style.top="0%":me.style.top=`${Math.min(en,wt)}%`)):(me.style.removeProperty("height"),me.style.removeProperty("top"),me.style.removeProperty("bottom"),an?me.style.width=`${en}%`:me.style.width=`${Math.abs(en-wt)}%`,Ke?(me.style.right="0%",an?me.style.left="auto":me.style.left=`${Math.min(100-wt,100-en)}%`):(me.style.right="auto",an?me.style.left="0%":me.style.left=`${Math.min(en,wt)}%`))}}),F="--animate-onclick",H="--width",J="--height",re="--panel-bg-border-radius",ye="--panel-bg",xe="--panel-bg-hover",Re="--panel-bg-fill",P="--pointer-width",Q="--pointer-height",oe="--pointer-border-radius",ae="--pointer-bg",ke="--pointer-bg-hover",Ce="--pointer-bg-focus",Ee="--pointer-shadow",De="--pointer-shadow-hover",Me="--pointer-shadow-focus",We="--pointer-border",tt="--pointer-border-hover",dt="--pointer-border-focus",Kt=(me,Le,it)=>{let Ke=new Map;for(let Et of me.attributes){let an=Et.nodeName.trim().toLowerCase();if(!Le.test(an))continue;let en=an.replace(/\D/g,"").trim(),wt=en===""||en==="0"||en==="1"?0:Ie(en,0)-1,et=it&&typeof it=="function"?it(Et.value):Et.value;Ke.set(wt,et)}return Ke},xt=me=>{if(!me)return null;let Le=me.getAttribute(de);if(!Le)return null;let it=Le.split(";"),Ke=[];for(let Et of it)Et.trim()!==""&&Ke.push(Et.trim());return Ke},Qt=[[H,T,"sliderWidth",null],[J,D,"sliderHeight",null],[re,k,"sliderRadius",null],[ye,R,"sliderBg",null],[xe,M,"sliderBgHover",null],[Re,B,"sliderBgFill",null],[P,K,"pointer#Width",/^pointer([0-9]*)-width$/],[Q,L,"pointer#Height",/^pointer([0-9]*)-height$/],[oe,$,"pointer#Radius",/^pointer([0-9]*)-radius$/],[ae,I,"pointer#Bg",/^pointer([0-9]*)-bg$/],[ke,U,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Ce,q,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Ee,Y,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[De,X,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Me,te,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[We,le,"pointer#Border",/^pointer([0-9]*)-border$/],[tt,ee,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[dt,z,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],rn=(me,Le,it)=>{let Ke=null,Et=[],an=new Map,en=(Zt,Xe=Le)=>{let pt=[...Xe.classList];for(let Xn of pt)Xn.startsWith(Zt)&&Le.classList.remove(Xn)},wt=()=>{en("shape");let Zt=Le.querySelectorAll(".pointer");for(let Xe of Zt)en("shape",Xe)},et=Zt=>{Ke=Zt,en("theme-"),typeof Zt=="string"&&Le.classList.add(`theme-${Zt}`)},hn=()=>{if(wt(),!(Et.length<=0)){Le.classList.add("shape",`shape-${Et[0]}`);for(let Zt=1;Zt<Et.length;Zt++){let Xe=Et[Zt];if(!Xe)continue;let pt=Le.querySelector(`.pointer-${Zt}`);!pt||pt.classList.add("shape",`shape-${Xe}`)}}},An=(Zt,Xe)=>{Et[Zt]=Xe,hn()},zt=()=>{wt();let Zt=Kt(me,/^pointer([0-9]*)-shape$/);if(!(Zt.size<=0)){for(let Xe of Zt){let pt=Xe[0];Et[pt]=Xe[1]}hn()}},jt=(Zt,Xe)=>`${Zt}-${Xe}`,Sr=(Zt,Xe,pt)=>{let Xn=it[pt];if(!Xn)return;let ni=pt===0?Le:Xn.$pointer;if(Xe==null){an.has(jt(Zt,pt))&&an.delete(jt(Zt,pt)),ni.style.removeProperty(Zt);return}an.set(jt(Zt,pt),Xe),ni.style.setProperty(Zt,Xe)},ci=(Zt,Xe)=>an.get(jt(Zt,Xe));return(()=>{for(let Zt of Qt){let[Xe,pt,Xn,ni]=Zt;if(ni){let Rr=Kt(me,ni);for(let nr of Rr){let qt=nr[0],bi=nr[1];Sr(Xe,bi,qt)}}else{let Rr=me.getAttribute(pt);Sr(Xe,Rr,0)}let Ar=[];if(Xn.indexOf("#")===-1)Ar.push([Xn,0]);else{Ar.push([Xn.replace("#",""),0]),Ar.push([Xn.replace("#","0"),0]),Ar.push([Xn.replace("#","1"),0]);for(let Rr=1;Rr<it.length;Rr++)Ar.push([Xn.replace("#",(Rr+1).toString()),Rr])}for(let Rr of Ar)try{let nr=Rr[0],qt=Rr[1];Object.prototype.hasOwnProperty.call(me,nr)||Object.defineProperty(me,nr,{get(){return ci(Xe,qt)},set:bi=>{Sr(Xe,bi,qt)}})}catch(nr){console.error(nr)}}et(me.getAttribute(b)),zt()})(),{setStyle:Sr,getStyle:ci,get theme(){return Ke},set theme(Zt){et(Zt)},get pointerShapes(){return Et},setPointerShape:An}},on="animate-on-click",sn="range-dragging",Tn=(me,Le,it,Ke)=>{let Et=[],an=An=>{for(let zt of Et)zt.update&&typeof zt.update=="function"&&zt.update(An)},en=()=>{for(let An of Et)An.destroy&&typeof An.destroy=="function"&&An.destroy()},wt=(An,zt)=>{for(let jt of Et)jt.onAttrChange&&typeof jt.onAttrChange=="function"&&jt.onAttrChange(An,zt)},et=An=>{if(An.gettersAndSetters){for(let zt of An.gettersAndSetters)if(!(!zt.name||!zt.attributes))try{Object.prototype.hasOwnProperty.call(me,zt.name)||Object.defineProperty(me,zt.name,zt.attributes)}catch(jt){console.error("defineSettersGetters error:",jt)}}},hn=An=>{var zt;if(!An.css)return;let jt=(zt=me.shadowRoot)==null?void 0:zt.querySelector("style");!jt||(jt.innerHTML+=An.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let An of window.tcRangeSliderPlugins){let zt=An();Et.push(zt),zt.init&&typeof zt.init=="function"&&(zt.init(me,Le,it,Ke),et(zt),hn(zt))}},update:an,onAttrChange:wt,destroy:en}},Er=10,Ki=20,ho=(me,Le)=>{let it=new Map,Ke=/^value([0-9]*)$/;for(let wt of me.attributes){let et=wt.nodeName.trim().toLowerCase();if(!Ke.test(et))continue;let hn=et.replace("value","").trim(),An=hn===""||hn==="0"||hn==="1"?0:Ie(hn,0)-1,zt=we(wt.value)?Ie(wt.value,0):wt.value;it.set(An,zt)}let Et=Math.max(...Array.from(it.keys())),an=[];an.push([pe(me,Le,0),it.get(0)]);let en=Le;for(let wt=1;wt<=Et;wt++){let et=Le.cloneNode(!0);en.after(et),en=et,an.push([pe(me,et,wt),it.get(wt)])}return an},Hi=(me,Le,it,Ke,Et,an,en)=>{try{Object.defineProperty(me,Ke,{configurable:!0,get(){if(!Le)return;let wt=Le.pointers[it];if(!wt)return;let et=Le.getTextValue(wt.percent);return we(et)?Ie(et,et):et},set:wt=>{Le.pointers[it]?Le==null||Le.setValue(wt,it):Le==null||Le.addPointer(wt)}}),Object.defineProperty(me,Et,{configurable:!0,get(){var wt,et;return(et=(wt=Le==null?void 0:Le.pointers[it])==null?void 0:wt.getAttr("aria-label"))!=null?et:void 0},set:wt=>{!Le||Le.setAriaLabel(it,wt)}}),Object.defineProperty(me,an,{configurable:!0,get(){var wt,et;return(et=(wt=Le==null?void 0:Le.styles)==null?void 0:wt.pointerShapes[it])!=null?et:null},set:wt=>{!Le||!Le.styles||Le.styles.setPointerShape(it,wt)}}),Object.defineProperty(me,en,{configurable:!0,get(){var wt;return(wt=Le==null?void 0:Le.pointers[it].disabled)!=null?wt:!1},set:wt=>{if(!Le)return;let et=Le==null?void 0:Le.pointers[it];!et||(et.disabled=wt)}})}catch(wt){console.error(wt)}},Ns=(me,Le)=>{let it=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let Ke=2;Ke<Er;Ke++)it.push([`value${Ke}`,`ariaLabel${Ke}`,`pointer${Ke}Shape`,`pointer${Ke}Disabled`,Ke-1]);for(let Ke of it)Hi(me,Le,Ke[4],Ke[0],Ke[1],Ke[2],Ke[3])},qn=(me,Le,it)=>{var Ke;let Et=(Ke=it.shadowRoot)==null?void 0:Ke.querySelector(".container");if(Et)for(let an of me)Le?Et.prepend(an.$pointer):Et.append(an.$pointer)},Or=(me,Le)=>{if(!(!Le||me.length<=1)){for(let it of me)it.$pointer.style.zIndex=Ki.toString();Le.$pointer.style.zIndex=(Ki*2).toString()}},Lr=0,mn=100,Kr=2,or="0.3s",Ni=(me,Le,it)=>{let Ke=it.map(Te=>Te[0]),Et=null,an=null,en=null,wt=null,et=Lr,hn=mn,An,zt,jt=He,Sr=Kr,ci=!1,Zt=!1,Xe=!1,pt=0,Xn=1/0,ni=!1,Ar,Rr,nr=!1,qt=!1,bi=!1,Ji=or,vi=[],Uo=Te=>{nr||(Te.preventDefault&&Te.preventDefault(),xo(Te),window.addEventListener("mousemove",xo),window.addEventListener("mouseup",xs),nn(me,Te))},xs=Te=>{nr||(Ar=void 0,Rr=void 0,window.removeEventListener("mousemove",xo),window.removeEventListener("mouseup",xs),Ji&&Le.classList.add(on),Vt(me,Te))},rs=(Te,ut)=>{if(Ke.length<=0)return;if(Ke.length===1)return Ke[0].isClicked(Te)&&Ji&&Le.classList.remove(on),Ke[0];let Wt=Qi(Te);if(ni){let Pn=ut,ji=Gi(Pn);ji!==void 0&&(Pn=qe(Pn,ji)),Wt?(Ar=Pn,Rr=0,Ji&&Le.classList.remove(on)):Ar!==void 0&&(Rr=Pn-Ar,Ar=Pn)}if(!Cr(Te)&&!Wt){for(let Pn of Ke)if(!(!Pn.isClicked(Te)||Pn.disabled))return Ji&&Le.classList.remove(on),Pn;for(let Pn of Ke)if(Et===Pn)return Pn}let Vn=1/0,gr=null;for(let Pn of Ke){if(Pn.disabled)continue;let ji=Math.abs(ut-Pn.percent);ji<Vn&&(Vn=ji,gr=Pn)}return gr},Bs=()=>Ke.findIndex(Te=>Et===Te&&!Te.disabled),xo=Te=>{let ut;if(jt===ze){let{height:Vn,top:gr}=Le.getBoundingClientRect(),Pn=Te.type.indexOf("mouse")!==-1?Te.clientY:Te.touches[0].clientY;ut=Math.min(Math.max(0,Pn-gr),Vn)*100/Vn}else{let{width:Vn,left:gr}=Le.getBoundingClientRect(),Pn=Te.type.indexOf("mouse")!==-1?Te.clientX:Te.touches[0].clientX;ut=Math.min(Math.max(0,Pn-gr),Vn)*100/Vn}if((ci||Zt)&&(ut=100-ut),Et=rs(Te.target,ut),Et&&Or(Ke,Et),ni&&Ke.length>1&&Rr!==void 0){let Vn=Ke[0],gr=Ke[Ke.length-1],Pn=Vn.percent+Rr<0,ji=gr.percent+Rr>100;if(Pn||ji)return;for(let $a=0;$a<Ke.length;$a++)sr($a,Ke[$a].percent+Rr);return}let Wt=Bs();Wt!==-1&&(sr(Wt,ut),Et==null||Et.$pointer.focus())},Mo=Te=>{if(nr||document.activeElement!==me||Et!=null&&Et.disabled)return;Te.stopPropagation(),Te.preventDefault();let ut=Te.deltaY<0,Wt=ci||Zt,Vn=ut?!Wt:Wt,gr=Bs();gr!==-1&&(Vn?is(gr,Ke[gr].percent):Oo(gr,Ke[gr].percent))},zs=Te=>{nr||qt||(jt===ze?Zt?sr(Te,100):sr(Te,0):ci?Oo(Te,Ke[Te].percent):is(Te,Ke[Te].percent))},po=Te=>{nr||qt||(jt===ze?Zt?sr(Te,0):sr(Te,100):ci?is(Te,Ke[Te].percent):Oo(Te,Ke[Te].percent))},sl=Te=>{nr||qt||(jt===ze?Zt?Oo(Te,Ke[Te].percent):is(Te,Ke[Te].percent):ci?sr(Te,100):sr(Te,0))},al=Te=>{nr||qt||(jt===ze?Zt?is(Te,Ke[Te].percent):Oo(Te,Ke[Te].percent):ci?sr(Te,0):sr(Te,100))},Cr=Te=>Te.classList.contains("panel"),Qi=Te=>Te.classList.contains("panel-fill"),is=(Te,ut)=>{if(ut===void 0)return;let Wt=Gi(ut);Wt==null&&(Wt=1),ut-=Wt,ut<0&&(ut=0),sr(Te,ut)},Oo=(Te,ut)=>{if(ut===void 0)return;let Wt=Gi(ut);Wt==null&&(Wt=1),ut+=Wt,ut>100&&(ut=100),sr(Te,ut)},qo=()=>{!wt||wt.update({percents:Oa(),values:ss(),$pointers:Wi(),min:as(),max:ul(),data:Ht(),step:js(),round:ge(),type:Z(),textMin:os(),textMax:go(),rightToLeft:It(),bottomToTop:In(),pointersOverlap:Ai(),pointersMinDistance:Be(),pointersMaxDistance:yt(),rangeDragging:Jr(),disabled:dr(),keyboardDisabled:kr(),mousewheelDisabled:Ln()})},fa=()=>{qo()},Ho=Te=>{if(!(Xe||Ke.length<=1||hn===et))if(Te===0){let ut=Xn*100/(hn-et);return Math.max(0,Ke[Te+1].percent-ut)}else{let ut=pt*100/(hn-et);return Math.min(Ke[Te-1].percent+ut,100)}},ll=Te=>{if(!(Xe||Ke.length<=1||hn===et))if(Te===Ke.length-1){let ut=Xn*100/(hn-et);return Math.min(Ke[Te-1].percent+ut,100)}else{let ut=pt*100/(hn-et);return Math.max(0,Ke[Te+1].percent-ut)}},Gi=Te=>{let ut;if(typeof An=="function"){let Wt=je(0,100,et,hn,Te);ut=An(Wt,Te)}else ut=An;if(we(ut)){let Wt=hn-et;return ut=Wt===0?0:ut*100/Wt,ut}},Vi=Te=>{if(Te===void 0)return;let ut=je(0,100,et,hn,Te);return zt!==void 0?zt[Math.round(ut)]:Pe(ut,Sr)},os=()=>zt!==void 0?zt[et]:et,go=()=>zt!==void 0?zt[hn]:hn,js=()=>An,Go=Te=>{var ut;return Te<=0||Xe?os():(ut=Vi(Ke[Te-1].percent))!=null?ut:""},fi=Te=>{var ut;return Ke.length<=1||Te>=Ke.length-1||Xe?go():(ut=Vi(Ke[Te+1].percent))!=null?ut:""},Oa=()=>Ke.map(Te=>Te.percent),ss=()=>Ke.map(Te=>Vi(Te.percent)),Wi=()=>Ke.map(Te=>Te.$pointer),as=()=>et,ul=()=>hn,Ht=()=>zt,Z=()=>jt,ge=()=>Sr,Be=()=>pt,yt=()=>Xn,pn=Te=>vi[Te],It=()=>ci,In=()=>Zt,dr=()=>nr,kr=()=>qt,Ln=()=>bi,Ai=()=>Xe,Jr=()=>ni,sr=(Te,ut)=>{if(ut===void 0)return;let Wt=Gi(ut);Wt!==void 0&&(ut=qe(ut,Wt));let Vn=Ke[Te];if(!Vn)return;let gr=Vn.updatePosition(ut,Ho(Te),ll(Te),jt,ci,Zt);an==null||an.updatePosition(jt,Ke.map(Pn=>Pn.percent),ci,Zt),qo();for(let Pn of Ke){let ji=Vi(Pn.percent);ji!==void 0&&(Pn.setAttr("aria-valuenow",ji.toString()),Pn.setAttr("aria-valuetext",ji.toString()))}Vo(),gr&&Ze(me,Ke.map(Pn=>Vi(Pn.percent)))},di=()=>{for(let Te=0;Te<Ke.length;Te++)sr(Te,Ke[Te].percent)},wo=(Te,ut)=>{et=zt!==void 0?0:Ie(Te,Lr),hn=zt!==void 0?zt.length-1:Ie(ut,mn),Bi(et),zi(hn)},Vo=()=>{var Te,ut;for(let Wt=0;Wt<Ke.length;Wt++){let Vn=Ke[Wt];Vn.setAttr("aria-valuemin",((Te=Go(Wt))!=null?Te:"").toString()),Vn.setAttr("aria-valuemax",((ut=fi(Wt))!=null?ut:"").toString())}},Bi=Te=>{et=Ie(Te,Lr),et>hn&&(hn=et+mn),di()},zi=Te=>{hn=Ie(Te,mn),hn<et&&(hn=et+mn),di()},ws=Te=>{Xe=!0;for(let ut=0;ut<Te.length;ut++)Hr(Te[ut],ut);Xe=!1;for(let ut=0;ut<Te.length;ut++)Hr(Te[ut],ut)},Hr=(Te,ut)=>{let Wt;zt!==void 0?(Wt=Te==null?0:se(Te,zt),Wt===-1&&(Wt=0)):(Wt=Ie(Te,et),Wt<et&&(Wt=et),Wt>hn&&(Wt=hn));let Vn=je(et,hn,0,100,Wt);sr(ut,Vn)},da=Te=>{if(Te==null){An=void 0;return}if(typeof Te=="function"){An=Te,di();return}if(we(Te)){An=Ie(Te,1);let ut=Math.abs(hn-et);An>ut&&(An=void 0),di();return}An=void 0},Gu=Te=>{Xe=Te,di()},cl=Te=>{(!we(Te)||Te<0)&&(Te=0),pt=Te},fl=Te=>{(!we(Te)||Te<0)&&(Te=1/0),Xn=Te},Vc=Te=>{nr=Te,Le.classList.toggle("disabled",nr),nr?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Vu=Te=>{qt=Te},ne=Te=>{bi=Te,bi?document.removeEventListener("wheel",Mo):document.addEventListener("wheel",Mo,{passive:!1})},_e=Te=>{if(Te==null){zt=void 0;return}if(zt=ie(Te),zt===void 0||zt.length<=0){zt=void 0;return}Bi(0),zi(zt.length-1),An===void 0&&da(1)},Ye=Te=>{var ut;typeof Te=="string"?jt=Te.trim().toLowerCase()===ze?ze:He:jt=He;let Wt=(ut=me.shadowRoot)==null?void 0:ut.querySelector(".range-slider-box");if(!Wt)return;Wt.className=`range-slider-box type-${jt}`,di();let Vn=jt===ze?"vertical":"horizontal";for(let gr of Ke)gr.setAttr("aria-orientation",Vn)},bt=Te=>{ci=Te,Ke.length>1&&qn(Ke,ci,me),di(),qo()},Jt=Te=>{Zt=Te,Ke.length>1&&qn(Ke,Zt,me),di(),qo()},Ut=Te=>{Sr=Ie(Te,Kr),Sr<0&&(Sr=Kr),qo()},Sn=Te=>{Te==null||Te.toString().trim().toLowerCase()==="false"?(Ji=void 0,Le.style.removeProperty(F),Le.classList.remove(on)):(Ji=Te.toString(),Le.style.setProperty(F,Ji),Le.classList.add(on))},pr=(Te,ut)=>{let Wt=Ke[Te];!Wt||(Wt.setAttr("aria-label",ut),vi[Te]=ut)},Ir=Te=>{if(Ar=void 0,Ke.length<=1){ni=!1,Le.classList.remove(sn);return}ni=Te,Le.classList.toggle(sn,ni)},eo=()=>{Vc(At(me.getAttribute(w))),qt=At(me.getAttribute(E)),bi=At(me.getAttribute(A));let Te=Kt(me,/^pointer([0-9]*)-disabled$/,ut=>At(ut));for(let ut of Te){let Wt=ut[0];!Ke[Wt]||(Ke[Wt].disabled=ut[1])}},_o=()=>{let Te=Kt(me,/^aria-label([0-9]*)$/);for(let ut of Te){let Wt=ut[0];pr(Wt,ut[1])}},xi=Te=>{let ut=Ke.length,Wt=Ke[ut-1].$pointer,Vn=Wt.cloneNode(!0);Wt.after(Vn);let gr=pe(me,Vn,ut);return gr.setCallbacks(zs,po,sl,al),Ke.push(gr),Hr(Te,ut),di(),qo(),ut},Li=()=>{let Te=Ke.length,ut=Ke[Te-1];return ut?(ut.destroy(),Ke.pop(),Ke.length<=1&&Ir(!1),di(),qo(),Te-1):-1};return(()=>{var Te,ut;for(let Vn of Ke)Vn.setCallbacks(zs,po,sl,al);let Wt=(Te=me.shadowRoot)==null?void 0:Te.querySelector(".panel-fill");Wt&&(an=ve(Wt)),Ye(me.getAttribute(m)),bt(At(me.getAttribute(y))),Jt(At(me.getAttribute(v))),wo(me.getAttribute(c),me.getAttribute(d)),da(me.getAttribute(h)),_e(me.getAttribute(f)),ws(it.map(Vn=>Vn[1])),Gu(At(me.getAttribute(s))),cl(Ie(me.getAttribute(a),0)),fl(Ie(me.getAttribute(l),1/0)),Ir(At(me.getAttribute(u))),Ut(Ie(me.getAttribute(p),Kr)),eo(),_o(),en=rn(me,Le,Ke),Sn((ut=me.getAttribute(he))!=null?ut:or),Le.addEventListener("mousedown",Uo),Le.addEventListener("mouseup",xs),Le.addEventListener("touchmove",xo),Le.addEventListener("touchstart",xo),bi||document.addEventListener("wheel",Mo,{passive:!1}),wt=Tn(me,fa,{setValues:ws,setMin:Bi,setMax:zi,setStep:da,setPointersOverlap:Gu,setPointersMinDistance:cl,setPointersMaxDistance:fl,setDisabled:Vc,setType:Ye,setRightToLeft:bt,setBottomToTop:Jt,setRound:Ut,setKeyboardDisabled:Vu,setMousewheelDisabled:ne,setRangeDragging:Ir,setData:_e},{getPercents:Oa,getValues:ss,getPointerElements:Wi,getMin:as,getMax:ul,getStep:js,getData:Ht,getType:Z,getRound:ge,getTextMin:os,getTextMax:go,isRightToLeft:It,isBottomToTop:In,isDisabled:dr,isKeyboardDisabled:kr,isMousewheelDisabled:Ln,isPointersOverlap:Ai,isRangeDraggingEnabled:Jr,getPointersMinDistance:Be,getPointersMaxDistance:yt}),wt.init()})(),{get pointers(){return Ke},get styles(){return en},get pluginsManager(){return wt},get min(){return os()},get max(){return go()},get step(){return js()},get pointersOverlap(){return Ai()},set pointersOverlap(Te){Gu(Te)},get pointersMinDistance(){return Be()},set pointersMinDistance(Te){cl(Te)},get pointersMaxDistance(){return yt()},set pointersMaxDistance(Te){fl(Te)},get disabled(){return dr()},set disabled(Te){Vc(Te)},get data(){return Ht()},get type(){return Z()},set type(Te){Ye(Te)},get rightToLeft(){return It()},set rightToLeft(Te){bt(Te)},get bottomToTop(){return In()},set bottomToTop(Te){Jt(Te)},get round(){return ge()},set round(Te){Ut(Te)},get animateOnClick(){return Ji},set animateOnClick(Te){Sn(Te)},get keyboardDisabled(){return kr()},set keyboardDisabled(Te){Vu(Te)},get mousewheelDisabled(){return Ln()},set mousewheelDisabled(Te){ne(Te)},get rangeDragging(){return Jr()},set rangeDragging(Te){Ir(Te)},setMin:Bi,setMax:zi,setValue:Hr,setStep:da,setData:_e,getTextValue:Vi,setAriaLabel:pr,getAriaLabel:pn,addPointer:xi,removePointer:Li,destroy:()=>{Le.removeEventListener("mousedown",Uo),Le.removeEventListener("mouseup",xs),Le.removeEventListener("touchmove",xo),Le.removeEventListener("touchstart",xo),document.removeEventListener("wheel",Mo);for(let Te of Ke)Te.destroy();wt==null||wt.destroy()}}},tr=(me,Le,it)=>{let Ke=Qt.find(([wt,et,hn,An])=>et.replace("#","")===Le.replace(/\d+/g,""));if(Ke&&me.styles){let[wt,et,hn,An]=Ke,zt=Le.replace(/\D/g,"").trim(),jt=zt===""||zt==="0"||zt==="1"?0:Ie(zt,0)-1;me.styles.setStyle(wt,it,jt);return}switch(me&&me.pluginsManager&&me.pluginsManager.onAttrChange(Le,it),Le){case c:{me.setMin(it);break}case d:{me.setMax(it);break}case h:{me.setStep(it);break}case s:{me.pointersOverlap=At(it);break}case a:{me.pointersMinDistance=Ie(it,0);break}case u:{me.rangeDragging=At(it);break}case l:{me.pointersMaxDistance=Ie(it,1/0);break}case w:{me.disabled=At(it);break}case E:{me.keyboardDisabled=At(it);break}case A:{me.mousewheelDisabled=At(it);break}case f:{me.setData(it);break}case m:{me.type=it;break}case y:{me.rightToLeft=At(it);break}case v:{me.bottomToTop=At(it);break}case p:{me.round=Ie(it,Kr);break}case b:{me.styles&&(me.styles.theme=it);break}case he:{me.animateOnClick=it;break}}let Et=null;if(/^value([0-9]*)$/.test(Le)&&(Et="value"),/^pointer([0-9]*)-disabled$/.test(Le)&&(Et="pointer-disabled"),/^aria-label([0-9]*)$/.test(Le)&&(Et="aria-label"),/^pointer([0-9]*)-shape$/.test(Le)&&(Et="pointer-shape"),!Et)return;let an=Le.replace(/\D/g,"").trim(),en=an===""||an==="0"||an==="1"?0:Ie(an,0)-1;switch(Et){case"value":{me.setValue(it,en);break}case"pointer-disabled":{let wt=me==null?void 0:me.pointers[en];if(!wt)return;wt.disabled=At(it);break}case"aria-label":{me.setAriaLabel(en,it);break}case"pointer-shape":{me.styles&&me.styles.setPointerShape(en,it);break}}},$r=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(me){this.slider&&this.slider.setStep(me)}get step(){var me;return(me=this.slider)==null?void 0:me.step}set disabled(me){this.slider&&(this.slider.disabled=me)}get disabled(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.disabled)!=null?Le:!1}set data(me){var Le;(Le=this.slider)==null||Le.setData(me)}get data(){var me;return(me=this.slider)==null?void 0:me.data}set min(me){var Le;(Le=this.slider)==null||Le.setMin(me)}get min(){var me;return(me=this.slider)==null?void 0:me.min}set max(me){var Le;(Le=this.slider)==null||Le.setMax(me)}get max(){var me;return(me=this.slider)==null?void 0:me.max}set round(me){!this.slider||(this.slider.round=me)}get round(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.round)!=null?Le:Kr}set type(me){!this.slider||(this.slider.type=me??He)}get type(){var me;return((me=this.slider)==null?void 0:me.type)||He}set pointersOverlap(me){!this.slider||(this.slider.pointersOverlap=me)}get pointersOverlap(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.pointersOverlap)!=null?Le:!1}set pointersMinDistance(me){!this.slider||(this.slider.pointersMinDistance=me)}get pointersMinDistance(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.pointersMinDistance)!=null?Le:0}set pointersMaxDistance(me){!this.slider||(this.slider.pointersMaxDistance=me)}get pointersMaxDistance(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.pointersMaxDistance)!=null?Le:1/0}set theme(me){!this.slider||!this.slider.styles||(this.slider.styles.theme=me)}get theme(){var me,Le,it;return(it=(Le=(me=this.slider)==null?void 0:me.styles)==null?void 0:Le.theme)!=null?it:null}set rtl(me){!this.slider||(this.slider.rightToLeft=me)}get rtl(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.rightToLeft)!=null?Le:!1}set btt(me){!this.slider||(this.slider.bottomToTop=me)}get btt(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.bottomToTop)!=null?Le:!1}set keyboardDisabled(me){!this.slider||(this.slider.keyboardDisabled=me)}get keyboardDisabled(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.keyboardDisabled)!=null?Le:!1}set mousewheelDisabled(me){!this.slider||(this.slider.mousewheelDisabled=me)}get mousewheelDisabled(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.mousewheelDisabled)!=null?Le:!1}set animateOnClick(me){!this.slider||(this.slider.animateOnClick=me)}get animateOnClick(){var me;return(me=this.slider)==null?void 0:me.animateOnClick}get rangeDragging(){var me,Le;return(Le=(me=this.slider)==null?void 0:me.rangeDragging)!=null?Le:!1}set rangeDragging(me){this.slider&&(this.slider.rangeDragging=At(me))}get externalCSSList(){return this._externalCSSList}addPointer(me){var Le,it;if(!this.slider)return;let Ke=(it=(Le=this.slider)==null?void 0:Le.addPointer(me))!=null?it:0;Hi(this,this.slider,Ke,`value${Ke+1}`,`ariaLabel${Ke+1}`,`pointerShape${Ke+1}`,`pointer${Ke+1}Disabled`)}removePointer(){var me;!this.slider||(me=this.slider)==null||me.removePointer()}addCSS(me){if(!this.shadowRoot)return;let Le=document.createElement("style");Le.textContent=me,this.shadowRoot.appendChild(Le)}connectedCallback(){var me,Le;if(!this.shadowRoot)return;this._externalCSSList=xt(this),this.shadowRoot.innerHTML=i(o,this._externalCSSList);let it=(me=this.shadowRoot)==null?void 0:me.querySelector(".pointer");if(!it)return;let Ke=(Le=this.shadowRoot)==null?void 0:Le.getElementById("range-slider");if(!Ke)return;let Et=ho(this,it);this.slider=Ni(this,Ke,Et),Ns(this,this.slider),this._observer=new MutationObserver(an=>{an.forEach(en=>{var wt;if(!this.slider||en.type!=="attributes")return;let et=en.attributeName;!et||tr(this.slider,et,(wt=this.getAttribute(et))!=null?wt:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},ns=$r;window.tcRangeSlider=ns,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",ns),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends ns{})})();var S0,y$e,S8;class m$e extends Zr{constructor(){super();yn(this,S0);this.filterObject={},this.tabIndex=0,this.inputHandler=gn(this,S0,y$e).bind(this),this.debouncedInputHandler=G0(this.inputHandler,500,{leading:!1})}reset(){Vkt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>Qe`
        ${gn(this,S0,S8).call(this,"min","before")}
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min||this.filterObject.min}"
          value2="${this.filterObject.state.max||this.filterObject.max}"
          step="${this.filterObject.step||1}"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        ${gn(this,S0,S8).call(this,"max","after")}
      `)}}S0=new WeakSet,y$e=function(n){Wkt(n,this)},S8=function(n,r){return Ykt(n,r,this)},tn(m$e,"properties",{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number}});customElements.define("eox-itemfilter-range",m$e);var kT,b$e;class fTt extends Zr{constructor(){super();yn(this,kT);this.filterObject={},this.tabIndex=0}static get properties(){return{filterObject:{type:Object},tabIndex:{attribute:!1,type:Number}}}reset(){tTt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>{var n;return Qe`
        <form style="display: inline">
          ${ou(["intersects","within"],r=>Qe`
              <label>
                <input
                  tabindex=${this.tabIndex}
                  type="radio"
                  name="mode"
                  .checked="${(this.filterObject.state.mode||"")===r||Xr}"
                  value="${r}"
                  @click=${()=>gn(this,kT,b$e).call(this,r)}
                />
                <small>${r} filter geometry</small>
              </label>
            `)}
        </form>
        <eox-itemfilter-spatial-filter
          exportparts="map: spatial-filter-map"
          .geometry="${(n=this.filterObject.state)==null?void 0:n.geometry}"
          @filter="${r=>{this.filterObject.state.geometry=r.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
        ></eox-itemfilter-spatial>
      `})}}kT=new WeakSet,b$e=function(n){rTt(n,this)};customElements.define("eox-itemfilter-spatial",fTt);var TT,v$e;class dTt extends Zr{constructor(){super();yn(this,TT);this.geometry=null,this.eoxMap=null}static get properties(){return{geometry:{type:Object},eoxMap:{type:Object}}}firstUpdated(){gn(this,TT,v$e).call(this)}reset(){nTt(this)}render(){return Qe`<div id="eox-map"></div>`}}TT=new WeakSet,v$e=function(){l$e(this)};customElements.define("eox-itemfilter-spatial-filter",dTt);function hTt(e,t){t.renderRoot.querySelectorAll(".chip").forEach(n=>{n.classList.remove("highlighted")}),e.target.classList.add("highlighted"),t.requestUpdate()}function pTt(e,t){const{code:n,target:r}=e;r.id==="eox-itemfilter-input-search"&&(t.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(n)||(n==="Space"&&e.preventDefault(),["Escape","Space","Enter"].includes(n)||e.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(n)&&gTt(n,e.target.value??"",t)))}function gTt(e,t,n){const r=n.renderRoot.querySelector(".chip.highlighted");if((e==="Escape"||t)&&r&&r.classList.remove("highlighted"),e==="Backspace"&&!t){if(n.items.length){r&&(r.querySelector(".chip-item-close").click(),n.items.splice(Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(r),1));const i=n.renderRoot.querySelectorAll(".chip")[n.renderRoot.querySelectorAll(".chip").length-1];i.classList.contains("highlighted")||i.classList.add("highlighted"),n.requestUpdate()}n._dispatchEvent()}if((e==="ArrowLeft"||e==="ArrowRight")&&!t){if(n.renderRoot.querySelectorAll(".chip").length<1)return;let i=0;const o=n.renderRoot.querySelector(".chip.highlighted");o&&(i=Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(o),o.classList.remove("highlighted")),i=i+(e==="ArrowLeft"?-1:1),e==="ArrowLeft"&&i<0&&(i=n.renderRoot.querySelectorAll(".chip").length-1),e==="ArrowRight"&&i>n.renderRoot.querySelectorAll(".chip").length-1&&(i=0),Array.from(n.renderRoot.querySelectorAll(".chip"))[i].classList.add("highlighted")}}var A0,A8,x$e;class mTt extends Zr{constructor(){super();yn(this,A0);this.items={},this.controller={}}static get properties(){return{items:{attribute:!1,type:Object},controller:{attribute:!1,type:Object}}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",gn(this,A0,A8).bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",gn(this,A0,A8).bind(this))}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}render(){return Qe`
      <style>
        ${QE}
      </style>
      <span class="chip-container">
        ${ou(this.items,n=>Qe`
            <span class="chip" @click=${gn(this,A0,x$e).bind(this)}>
              <span class="chip-title">${n.title}</span>
                <span
                  class="chip-item-close hidden"
                  data-close=${n.key}
                  @click=${r=>{r.stopPropagation(),this.controller.remove(r),this.requestUpdate()}}
                ></span>
            </span>
            </span>
          `)}
      </span>
    `}}A0=new WeakSet,A8=function(n){pTt(n,this)},x$e=function(n){hTt(n,this)};customElements.define("eox-itemfilter-chips",mTt);const yTt=Object.freeze({aggregateResults:void 0,autoSpreadSingle:!1,enableHighlighting:!1,externalFilter:()=>{},filterProperties:[],fuseConfig:{},inlineMode:!1,matchAllWhenEmpty:!0,showResults:!0,idProperty:"id",titleProperty:"title",subTitleProperty:void 0,imageProperty:void 0,expandMultipleFilters:!0,expandResults:!0,expandMultipleResults:!0}),bEe=["aggregateResults","autoSpreadSingle","enableHighlighting","externalFilter","filterProperties","fuseConfig","inlineMode","matchAllWhenEmpty","showResults","titleProperty","subTitleProperty","imageProperty","idProperty","expandMultipleFilters","expandResults","expandMultipleResults","items"];var V4,vEe;function bTt(){if(vEe)return V4;vEe=1;var e=200,t="__lodash_hash_undefined__",n=1/0,r="[object Function]",i="[object GeneratorFunction]",o=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,l=typeof self=="object"&&self&&self.Object===Object&&self,u=a||l||Function("return this")();function f(P,Q){var oe=P?P.length:0;return!!oe&&d(P,Q,0)>-1}function c(P,Q,oe,ae){for(var ke=P.length,Ce=oe+-1;++Ce<ke;)if(Q(P[Ce],Ce,P))return Ce;return-1}function d(P,Q,oe){if(Q!==Q)return c(P,h,oe);for(var ae=oe-1,ke=P.length;++ae<ke;)if(P[ae]===Q)return ae;return-1}function h(P){return P!==P}function p(P,Q){return P.has(Q)}function m(P,Q){return P==null?void 0:P[Q]}function b(P){var Q=!1;if(P!=null&&typeof P.toString!="function")try{Q=!!(P+"")}catch{}return Q}function y(P){var Q=-1,oe=Array(P.size);return P.forEach(function(ae){oe[++Q]=ae}),oe}var v=Array.prototype,w=Function.prototype,E=Object.prototype,A=u["__core-js_shared__"],T=function(){var P=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),D=w.toString,k=E.hasOwnProperty,R=E.toString,M=RegExp("^"+D.call(k).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=v.splice,K=se(u,"Map"),L=se(u,"Set"),$=se(Object,"create");function I(P){var Q=-1,oe=P?P.length:0;for(this.clear();++Q<oe;){var ae=P[Q];this.set(ae[0],ae[1])}}function U(){this.__data__=$?$(null):{}}function q(P){return this.has(P)&&delete this.__data__[P]}function Y(P){var Q=this.__data__;if($){var oe=Q[P];return oe===t?void 0:oe}return k.call(Q,P)?Q[P]:void 0}function X(P){var Q=this.__data__;return $?Q[P]!==void 0:k.call(Q,P)}function te(P,Q){var oe=this.__data__;return oe[P]=$&&Q===void 0?t:Q,this}I.prototype.clear=U,I.prototype.delete=q,I.prototype.get=Y,I.prototype.has=X,I.prototype.set=te;function le(P){var Q=-1,oe=P?P.length:0;for(this.clear();++Q<oe;){var ae=P[Q];this.set(ae[0],ae[1])}}function ee(){this.__data__=[]}function z(P){var Q=this.__data__,oe=Vt(Q,P);if(oe<0)return!1;var ae=Q.length-1;return oe==ae?Q.pop():B.call(Q,oe,1),!0}function he(P){var Q=this.__data__,oe=Vt(Q,P);return oe<0?void 0:Q[oe][1]}function de(P){return Vt(this.__data__,P)>-1}function ze(P,Q){var oe=this.__data__,ae=Vt(oe,P);return ae<0?oe.push([P,Q]):oe[ae][1]=Q,this}le.prototype.clear=ee,le.prototype.delete=z,le.prototype.get=he,le.prototype.has=de,le.prototype.set=ze;function He(P){var Q=-1,oe=P?P.length:0;for(this.clear();++Q<oe;){var ae=P[Q];this.set(ae[0],ae[1])}}function je(){this.__data__={hash:new I,map:new(K||le),string:new I}}function we(P){return ie(this,P).delete(P)}function Ie(P){return ie(this,P).get(P)}function qe(P){return ie(this,P).has(P)}function Pe(P,Q){return ie(this,P).set(P,Q),this}He.prototype.clear=je,He.prototype.delete=we,He.prototype.get=Ie,He.prototype.has=qe,He.prototype.set=Pe;function At(P){var Q=-1,oe=P?P.length:0;for(this.__data__=new He;++Q<oe;)this.add(P[Q])}function ht(P){return this.__data__.set(P,t),this}function nn(P){return this.__data__.has(P)}At.prototype.add=At.prototype.push=ht,At.prototype.has=nn;function Vt(P,Q){for(var oe=P.length;oe--;)if(re(P[oe][0],Q))return oe;return-1}function On(P){if(!xe(P)||F(P))return!1;var Q=ye(P)||b(P)?M:s;return Q.test(H(P))}function Ze(P,Q,oe){var ae=-1,ke=f,Ce=P.length,Ee=!0,De=[],Me=De;if(Ce>=e){var We=pe(P);if(We)return y(We);Ee=!1,ke=p,Me=new At}else Me=De;e:for(;++ae<Ce;){var tt=P[ae],dt=tt;if(tt=tt!==0?tt:0,Ee&&dt===dt){for(var Kt=Me.length;Kt--;)if(Me[Kt]===dt)continue e;De.push(tt)}else ke(Me,dt,oe)||(Me!==De&&Me.push(dt),De.push(tt))}return De}var pe=L&&1/y(new L([,-0]))[1]==n?function(P){return new L(P)}:Re;function ie(P,Q){var oe=P.__data__;return ve(Q)?oe[typeof Q=="string"?"string":"hash"]:oe.map}function se(P,Q){var oe=m(P,Q);return On(oe)?oe:void 0}function ve(P){var Q=typeof P;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?P!=="__proto__":P===null}function F(P){return!!T&&T in P}function H(P){if(P!=null){try{return D.call(P)}catch{}try{return P+""}catch{}}return""}function J(P){return P&&P.length?Ze(P):[]}function re(P,Q){return P===Q||P!==P&&Q!==Q}function ye(P){var Q=xe(P)?R.call(P):"";return Q==r||Q==i}function xe(P){var Q=typeof P;return!!P&&(Q=="object"||Q=="function")}function Re(){}return V4=J,V4}var vTt=bTt();const w$e=oa(vTt);var o2={exports:{}};o2.exports;var xEe;function xTt(){return xEe||(xEe=1,function(e,t){var n=200,r="Expected a function",i="__lodash_hash_undefined__",o=1,s=2,a=1/0,l=9007199254740991,u="[object Arguments]",f="[object Array]",c="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",m="[object GeneratorFunction]",b="[object Map]",y="[object Number]",v="[object Object]",w="[object Promise]",E="[object RegExp]",A="[object Set]",T="[object String]",D="[object Symbol]",k="[object WeakMap]",R="[object ArrayBuffer]",M="[object DataView]",B="[object Float32Array]",K="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",I="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",Y="[object Uint16Array]",X="[object Uint32Array]",te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/,ee=/^\./,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,he=/[\\^$.*+?()[\]{}|]/g,de=/\\(\\)?/g,ze=/^\[object .+?Constructor\]$/,He=/^(?:0|[1-9]\d*)$/,je={};je[B]=je[K]=je[L]=je[$]=je[I]=je[U]=je[q]=je[Y]=je[X]=!0,je[u]=je[f]=je[R]=je[c]=je[M]=je[d]=je[h]=je[p]=je[b]=je[y]=je[v]=je[E]=je[A]=je[T]=je[k]=!1;var we=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,Ie=typeof self=="object"&&self&&self.Object===Object&&self,qe=we||Ie||Function("return this")(),Pe=t&&!t.nodeType&&t,At=Pe&&!0&&e&&!e.nodeType&&e,ht=At&&At.exports===Pe,nn=ht&&we.process,Vt=function(){try{return nn&&nn.binding("util")}catch{}}(),On=Vt&&Vt.isTypedArray;function Ze(ne,_e){for(var Ye=-1,bt=ne?ne.length:0,Jt=Array(bt);++Ye<bt;)Jt[Ye]=_e(ne[Ye],Ye,ne);return Jt}function pe(ne,_e){for(var Ye=-1,bt=_e.length,Jt=ne.length;++Ye<bt;)ne[Jt+Ye]=_e[Ye];return ne}function ie(ne,_e){for(var Ye=-1,bt=ne?ne.length:0;++Ye<bt;)if(_e(ne[Ye],Ye,ne))return!0;return!1}function se(ne){return function(_e){return _e==null?void 0:_e[ne]}}function ve(ne,_e){for(var Ye=-1,bt=Array(ne);++Ye<ne;)bt[Ye]=_e(Ye);return bt}function F(ne){return function(_e){return ne(_e)}}function H(ne,_e){return ne==null?void 0:ne[_e]}function J(ne){var _e=!1;if(ne!=null&&typeof ne.toString!="function")try{_e=!!(ne+"")}catch{}return _e}function re(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(bt,Jt){Ye[++_e]=[Jt,bt]}),Ye}function ye(ne,_e){return function(Ye){return ne(_e(Ye))}}function xe(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(bt){Ye[++_e]=bt}),Ye}var Re=Array.prototype,P=Function.prototype,Q=Object.prototype,oe=qe["__core-js_shared__"],ae=function(){var ne=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),ke=P.toString,Ce=Q.hasOwnProperty,Ee=Q.toString,De=RegExp("^"+ke.call(Ce).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=qe.Symbol,We=qe.Uint8Array,tt=Q.propertyIsEnumerable,dt=Re.splice,Kt=Me?Me.isConcatSpreadable:void 0,xt=ye(Object.keys,Object),Qt=Go(qe,"DataView"),rn=Go(qe,"Map"),on=Go(qe,"Promise"),sn=Go(qe,"Set"),Tn=Go(qe,"WeakMap"),Er=Go(Object,"create"),Ki=It(Qt),ho=It(rn),Hi=It(on),Ns=It(sn),qn=It(Tn),Or=Me?Me.prototype:void 0,Lr=Or?Or.valueOf:void 0,mn=Or?Or.toString:void 0;function Kr(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var bt=ne[_e];this.set(bt[0],bt[1])}}function or(){this.__data__=Er?Er(null):{}}function Ni(ne){return this.has(ne)&&delete this.__data__[ne]}function tr(ne){var _e=this.__data__;if(Er){var Ye=_e[ne];return Ye===i?void 0:Ye}return Ce.call(_e,ne)?_e[ne]:void 0}function $r(ne){var _e=this.__data__;return Er?_e[ne]!==void 0:Ce.call(_e,ne)}function ns(ne,_e){var Ye=this.__data__;return Ye[ne]=Er&&_e===void 0?i:_e,this}Kr.prototype.clear=or,Kr.prototype.delete=Ni,Kr.prototype.get=tr,Kr.prototype.has=$r,Kr.prototype.set=ns;function me(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var bt=ne[_e];this.set(bt[0],bt[1])}}function Le(){this.__data__=[]}function it(ne){var _e=this.__data__,Ye=nr(_e,ne);if(Ye<0)return!1;var bt=_e.length-1;return Ye==bt?_e.pop():dt.call(_e,Ye,1),!0}function Ke(ne){var _e=this.__data__,Ye=nr(_e,ne);return Ye<0?void 0:_e[Ye][1]}function Et(ne){return nr(this.__data__,ne)>-1}function an(ne,_e){var Ye=this.__data__,bt=nr(Ye,ne);return bt<0?Ye.push([ne,_e]):Ye[bt][1]=_e,this}me.prototype.clear=Le,me.prototype.delete=it,me.prototype.get=Ke,me.prototype.has=Et,me.prototype.set=an;function en(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var bt=ne[_e];this.set(bt[0],bt[1])}}function wt(){this.__data__={hash:new Kr,map:new(rn||me),string:new Kr}}function et(ne){return go(this,ne).delete(ne)}function hn(ne){return go(this,ne).get(ne)}function An(ne){return go(this,ne).has(ne)}function zt(ne,_e){return go(this,ne).set(ne,_e),this}en.prototype.clear=wt,en.prototype.delete=et,en.prototype.get=hn,en.prototype.has=An,en.prototype.set=zt;function jt(ne){var _e=-1,Ye=ne?ne.length:0;for(this.__data__=new en;++_e<Ye;)this.add(ne[_e])}function Sr(ne){return this.__data__.set(ne,i),this}function ci(ne){return this.__data__.has(ne)}jt.prototype.add=jt.prototype.push=Sr,jt.prototype.has=ci;function Zt(ne){this.__data__=new me(ne)}function Xe(){this.__data__=new me}function pt(ne){return this.__data__.delete(ne)}function Xn(ne){return this.__data__.get(ne)}function ni(ne){return this.__data__.has(ne)}function Ar(ne,_e){var Ye=this.__data__;if(Ye instanceof me){var bt=Ye.__data__;if(!rn||bt.length<n-1)return bt.push([ne,_e]),this;Ye=this.__data__=new en(bt)}return Ye.set(ne,_e),this}Zt.prototype.clear=Xe,Zt.prototype.delete=pt,Zt.prototype.get=Xn,Zt.prototype.has=ni,Zt.prototype.set=Ar;function Rr(ne,_e){var Ye=Jr(ne)||Ai(ne)?ve(ne.length,String):[],bt=Ye.length,Jt=!!bt;for(var Ut in ne)Ce.call(ne,Ut)&&!(Jt&&(Ut=="length"||Wi(Ut,bt)))&&Ye.push(Ut);return Ye}function nr(ne,_e){for(var Ye=ne.length;Ye--;)if(Ln(ne[Ye][0],_e))return Ye;return-1}var qt=Ho(vi);function bi(ne,_e,Ye,bt,Jt){var Ut=-1,Sn=ne.length;for(Ye||(Ye=ss),Jt||(Jt=[]);++Ut<Sn;){var pr=ne[Ut];Ye(pr)?pe(Jt,pr):Jt[Jt.length]=pr}return Jt}var Ji=ll();function vi(ne,_e){return ne&&Ji(ne,_e,fl)}function Uo(ne,_e){_e=as(_e,ne)?[_e]:fa(_e);for(var Ye=0,bt=_e.length;ne!=null&&Ye<bt;)ne=ne[pn(_e[Ye++])];return Ye&&Ye==bt?ne:void 0}function xs(ne){return Ee.call(ne)}function rs(ne,_e){return ne!=null&&_e in Object(ne)}function Bs(ne,_e,Ye,bt,Jt){return ne===_e?!0:ne==null||_e==null||!Bi(ne)&&!zi(_e)?ne!==ne&&_e!==_e:xo(ne,_e,Bs,Ye,bt,Jt)}function xo(ne,_e,Ye,bt,Jt,Ut){var Sn=Jr(ne),pr=Jr(_e),Ir=f,eo=f;Sn||(Ir=fi(ne),Ir=Ir==u?v:Ir),pr||(eo=fi(_e),eo=eo==u?v:eo);var _o=Ir==v&&!J(ne),xi=eo==v&&!J(_e),Li=Ir==eo;if(Li&&!_o)return Ut||(Ut=new Zt),Sn||Hr(ne)?Gi(ne,_e,Ye,bt,Jt,Ut):Vi(ne,_e,Ir,Ye,bt,Jt,Ut);if(!(Jt&s)){var Te=_o&&Ce.call(ne,"__wrapped__"),ut=xi&&Ce.call(_e,"__wrapped__");if(Te||ut){var Wt=Te?ne.value():ne,Vn=ut?_e.value():_e;return Ut||(Ut=new Zt),Ye(Wt,Vn,bt,Jt,Ut)}}return Li?(Ut||(Ut=new Zt),os(ne,_e,Ye,bt,Jt,Ut)):!1}function Mo(ne,_e,Ye,bt){var Jt=Ye.length,Ut=Jt;if(ne==null)return!Ut;for(ne=Object(ne);Jt--;){var Sn=Ye[Jt];if(Sn[2]?Sn[1]!==ne[Sn[0]]:!(Sn[0]in ne))return!1}for(;++Jt<Ut;){Sn=Ye[Jt];var pr=Sn[0],Ir=ne[pr],eo=Sn[1];if(Sn[2]){if(Ir===void 0&&!(pr in ne))return!1}else{var _o=new Zt,xi;if(!(xi===void 0?Bs(eo,Ir,bt,o|s,_o):xi))return!1}}return!0}function zs(ne){if(!Bi(ne)||Ht(ne))return!1;var _e=wo(ne)||J(ne)?De:ze;return _e.test(It(ne))}function po(ne){return zi(ne)&&Vo(ne.length)&&!!je[Ee.call(ne)]}function sl(ne){return typeof ne=="function"?ne:ne==null?Vc:typeof ne=="object"?Jr(ne)?is(ne[0],ne[1]):Qi(ne):Vu(ne)}function al(ne){if(!Z(ne))return xt(ne);var _e=[];for(var Ye in Object(ne))Ce.call(ne,Ye)&&Ye!="constructor"&&_e.push(Ye);return _e}function Cr(ne,_e){var Ye=-1,bt=sr(ne)?Array(ne.length):[];return qt(ne,function(Jt,Ut,Sn){bt[++Ye]=_e(Jt,Ut,Sn)}),bt}function Qi(ne){var _e=js(ne);return _e.length==1&&_e[0][2]?Be(_e[0][0],_e[0][1]):function(Ye){return Ye===ne||Mo(Ye,ne,_e)}}function is(ne,_e){return as(ne)&&ge(_e)?Be(pn(ne),_e):function(Ye){var bt=Gu(Ye,ne);return bt===void 0&&bt===_e?cl(Ye,ne):Bs(_e,bt,void 0,o|s)}}function Oo(ne){return function(_e){return Uo(_e,ne)}}function qo(ne){if(typeof ne=="string")return ne;if(ws(ne))return mn?mn.call(ne):"";var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function fa(ne){return Jr(ne)?ne:yt(ne)}function Ho(ne,_e){return function(Ye,bt){if(Ye==null)return Ye;if(!sr(Ye))return ne(Ye,bt);for(var Jt=Ye.length,Ut=-1,Sn=Object(Ye);++Ut<Jt&&bt(Sn[Ut],Ut,Sn)!==!1;);return Ye}}function ll(ne){return function(_e,Ye,bt){for(var Jt=-1,Ut=Object(_e),Sn=bt(_e),pr=Sn.length;pr--;){var Ir=Sn[++Jt];if(Ye(Ut[Ir],Ir,Ut)===!1)break}return _e}}function Gi(ne,_e,Ye,bt,Jt,Ut){var Sn=Jt&s,pr=ne.length,Ir=_e.length;if(pr!=Ir&&!(Sn&&Ir>pr))return!1;var eo=Ut.get(ne);if(eo&&Ut.get(_e))return eo==_e;var _o=-1,xi=!0,Li=Jt&o?new jt:void 0;for(Ut.set(ne,_e),Ut.set(_e,ne);++_o<pr;){var Te=ne[_o],ut=_e[_o];if(bt)var Wt=Sn?bt(ut,Te,_o,_e,ne,Ut):bt(Te,ut,_o,ne,_e,Ut);if(Wt!==void 0){if(Wt)continue;xi=!1;break}if(Li){if(!ie(_e,function(Vn,gr){if(!Li.has(gr)&&(Te===Vn||Ye(Te,Vn,bt,Jt,Ut)))return Li.add(gr)})){xi=!1;break}}else if(!(Te===ut||Ye(Te,ut,bt,Jt,Ut))){xi=!1;break}}return Ut.delete(ne),Ut.delete(_e),xi}function Vi(ne,_e,Ye,bt,Jt,Ut,Sn){switch(Ye){case M:if(ne.byteLength!=_e.byteLength||ne.byteOffset!=_e.byteOffset)return!1;ne=ne.buffer,_e=_e.buffer;case R:return!(ne.byteLength!=_e.byteLength||!bt(new We(ne),new We(_e)));case c:case d:case y:return Ln(+ne,+_e);case h:return ne.name==_e.name&&ne.message==_e.message;case E:case T:return ne==_e+"";case b:var pr=re;case A:var Ir=Ut&s;if(pr||(pr=xe),ne.size!=_e.size&&!Ir)return!1;var eo=Sn.get(ne);if(eo)return eo==_e;Ut|=o,Sn.set(ne,_e);var _o=Gi(pr(ne),pr(_e),bt,Jt,Ut,Sn);return Sn.delete(ne),_o;case D:if(Lr)return Lr.call(ne)==Lr.call(_e)}return!1}function os(ne,_e,Ye,bt,Jt,Ut){var Sn=Jt&s,pr=fl(ne),Ir=pr.length,eo=fl(_e),_o=eo.length;if(Ir!=_o&&!Sn)return!1;for(var xi=Ir;xi--;){var Li=pr[xi];if(!(Sn?Li in _e:Ce.call(_e,Li)))return!1}var Te=Ut.get(ne);if(Te&&Ut.get(_e))return Te==_e;var ut=!0;Ut.set(ne,_e),Ut.set(_e,ne);for(var Wt=Sn;++xi<Ir;){Li=pr[xi];var Vn=ne[Li],gr=_e[Li];if(bt)var Pn=Sn?bt(gr,Vn,Li,_e,ne,Ut):bt(Vn,gr,Li,ne,_e,Ut);if(!(Pn===void 0?Vn===gr||Ye(Vn,gr,bt,Jt,Ut):Pn)){ut=!1;break}Wt||(Wt=Li=="constructor")}if(ut&&!Wt){var ji=ne.constructor,$a=_e.constructor;ji!=$a&&"constructor"in ne&&"constructor"in _e&&!(typeof ji=="function"&&ji instanceof ji&&typeof $a=="function"&&$a instanceof $a)&&(ut=!1)}return Ut.delete(ne),Ut.delete(_e),ut}function go(ne,_e){var Ye=ne.__data__;return ul(_e)?Ye[typeof _e=="string"?"string":"hash"]:Ye.map}function js(ne){for(var _e=fl(ne),Ye=_e.length;Ye--;){var bt=_e[Ye],Jt=ne[bt];_e[Ye]=[bt,Jt,ge(Jt)]}return _e}function Go(ne,_e){var Ye=H(ne,_e);return zs(Ye)?Ye:void 0}var fi=xs;(Qt&&fi(new Qt(new ArrayBuffer(1)))!=M||rn&&fi(new rn)!=b||on&&fi(on.resolve())!=w||sn&&fi(new sn)!=A||Tn&&fi(new Tn)!=k)&&(fi=function(ne){var _e=Ee.call(ne),Ye=_e==v?ne.constructor:void 0,bt=Ye?It(Ye):void 0;if(bt)switch(bt){case Ki:return M;case ho:return b;case Hi:return w;case Ns:return A;case qn:return k}return _e});function Oa(ne,_e,Ye){_e=as(_e,ne)?[_e]:fa(_e);for(var bt,Jt=-1,Sn=_e.length;++Jt<Sn;){var Ut=pn(_e[Jt]);if(!(bt=ne!=null&&Ye(ne,Ut)))break;ne=ne[Ut]}if(bt)return bt;var Sn=ne?ne.length:0;return!!Sn&&Vo(Sn)&&Wi(Ut,Sn)&&(Jr(ne)||Ai(ne))}function ss(ne){return Jr(ne)||Ai(ne)||!!(Kt&&ne&&ne[Kt])}function Wi(ne,_e){return _e=_e??l,!!_e&&(typeof ne=="number"||He.test(ne))&&ne>-1&&ne%1==0&&ne<_e}function as(ne,_e){if(Jr(ne))return!1;var Ye=typeof ne;return Ye=="number"||Ye=="symbol"||Ye=="boolean"||ne==null||ws(ne)?!0:le.test(ne)||!te.test(ne)||_e!=null&&ne in Object(_e)}function ul(ne){var _e=typeof ne;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ne!=="__proto__":ne===null}function Ht(ne){return!!ae&&ae in ne}function Z(ne){var _e=ne&&ne.constructor,Ye=typeof _e=="function"&&_e.prototype||Q;return ne===Ye}function ge(ne){return ne===ne&&!Bi(ne)}function Be(ne,_e){return function(Ye){return Ye==null?!1:Ye[ne]===_e&&(_e!==void 0||ne in Object(Ye))}}var yt=kr(function(ne){ne=da(ne);var _e=[];return ee.test(ne)&&_e.push(""),ne.replace(z,function(Ye,bt,Jt,Ut){_e.push(Jt?Ut.replace(de,"$1"):bt||Ye)}),_e});function pn(ne){if(typeof ne=="string"||ws(ne))return ne;var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function It(ne){if(ne!=null){try{return ke.call(ne)}catch{}try{return ne+""}catch{}}return""}function In(ne,_e){return bi(dr(ne,_e))}function dr(ne,_e){var Ye=Jr(ne)?Ze:Cr;return Ye(ne,sl(_e))}function kr(ne,_e){if(typeof ne!="function"||_e&&typeof _e!="function")throw new TypeError(r);var Ye=function(){var bt=arguments,Jt=_e?_e.apply(this,bt):bt[0],Ut=Ye.cache;if(Ut.has(Jt))return Ut.get(Jt);var Sn=ne.apply(this,bt);return Ye.cache=Ut.set(Jt,Sn),Sn};return Ye.cache=new(kr.Cache||en),Ye}kr.Cache=en;function Ln(ne,_e){return ne===_e||ne!==ne&&_e!==_e}function Ai(ne){return di(ne)&&Ce.call(ne,"callee")&&(!tt.call(ne,"callee")||Ee.call(ne)==u)}var Jr=Array.isArray;function sr(ne){return ne!=null&&Vo(ne.length)&&!wo(ne)}function di(ne){return zi(ne)&&sr(ne)}function wo(ne){var _e=Bi(ne)?Ee.call(ne):"";return _e==p||_e==m}function Vo(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=l}function Bi(ne){var _e=typeof ne;return!!ne&&(_e=="object"||_e=="function")}function zi(ne){return!!ne&&typeof ne=="object"}function ws(ne){return typeof ne=="symbol"||zi(ne)&&Ee.call(ne)==D}var Hr=On?F(On):po;function da(ne){return ne==null?"":qo(ne)}function Gu(ne,_e,Ye){var bt=ne==null?void 0:Uo(ne,_e);return bt===void 0?Ye:bt}function cl(ne,_e){return ne!=null&&Oa(ne,_e,rs)}function fl(ne){return sr(ne)?Rr(ne):al(ne)}function Vc(ne){return ne}function Vu(ne){return as(ne)?se(pn(ne)):Oo(ne)}e.exports=In}(o2,o2.exports)),o2.exports}var wTt=xTt();const _$e=oa(wTt);function _Tt(e,t,n){let r=[];e.filterProperties.length&&e.filterProperties.forEach(o=>{const s={},a=u=>o.format==="date"?Ac(u).unix():parseFloat(u);t.forEach(u=>{var f,c;if(o.type==="range"){const d=D_(o.key,u);if(Array.isArray(d)){const h=[a(d[0]),a(d[1])];s.min=s.min!==void 0?Math.min(s.min,h[0]):h[0],s.max=s.max!==void 0?Math.max(s.max,h[1]):h[1]}else{const h=a(d);s.min=s.min!==void 0?Math.min(s.min,h):h,s.max=s.max!==void 0?Math.max(s.max,h):h}return}Array.isArray(u[o.key])?u[o.key].forEach(d=>{s[d]=void 0}):o.type==="spatial"?(s.geometry=((f=o==null?void 0:o.state)==null?void 0:f.geometry)||void 0,s.geometry&&(o.stringifiedState=s.geometry.type),s.mode=o.mode||"intersects"):(c=o.key)!=null&&c.includes(".")?w$e(_$e(n.items,o.key)).filter(d=>d).forEach(d=>{s[d]=void 0}):s[u[o.key]]=void 0});const l=o.key||o.keys.join("|");n.filters[l]=Object.assign({type:o.type||"multiselect",dirty:o.state?Object.values(o.state).some(u=>u):void 0,key:l},o.type==="range"?{min:s.min,max:s.max,format:o.format}:{},o),n.filters[l].state=Object.assign({},s,o.state)}),e.matchAllWhenEmpty!==!1&&(n.results=n.sortResults(t),n.requestUpdate()),e.aggregateResults&&(r=Array.from(new Set(t.reduce((o,s)=>o.concat(s[e.aggregateResults]),[]))).sort((o,s)=>o.localeCompare(s)));const i=[];return Object.values(n.filters).forEach(o=>{o.type==="text"?o.keys.forEach(s=>{i.includes(s)||i.push(s)}):(o.type==="select"||o.type==="multiselect")&&(i.includes(o.key)||i.push(o.key))}),Nkt(t,Object.assign({keys:i},e.fuseConfig)),r}async function ETt(e,t,n){let r;n.externalFilter?r=await Ukt(t,n.filters,e):r=await Bkt(t,n.filters,e),n.results=n.sortResults(r)}function STt(e,t,n){const r=`filter-${e.key}`.replace("|","-");switch(e.type){case"text":return Qe`<eox-itemfilter-text
        data-type="filter"
        data-cy="text-filter"
        slot="filter"
        id="${r}"
        .tabIndex=${t}
        .filterObject=${e}
        .unstyled=${n.unstyled}
        @filter=${()=>n.search()}
      ></eox-itemfilter-text>`;case"multiselect":case"select":return Qe`
        <eox-itemfilter-select
          .inlineMode=${n.inlineMode||!1}
          data-type="filter"
          id="${r}"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .suggestions="${w$e(_$e(n.items,e.key)).filter(i=>i)}"
          type="${e.type}"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-select>
      `;case"range":return Qe`
        <eox-itemfilter-range
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-range>
      `;case"spatial":return Qe`
        <eox-itemfilter-spatial
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          @filter=${()=>n.search()}
        ></eox-itemfilter-spatial>
      `;default:return Qe``}}function ATt(e,t){return[...e].sort((n,r)=>n[t.titleProperty].localeCompare(r[t.titleProperty]))}function CTt(e,t,n){return Qe`
    ${Un(e.dirty,()=>Qe`
        <button
          type="button"
          tabindex=${t}
          slot="reset-button"
          class="reset-icon icon"
          @click=${r=>{const i=r.target.parentElement.querySelector("[slot=filter]");i&&typeof i.reset=="function"&&i.reset(),n.search(),n.requestUpdate()}}
        >
          ${n.unstyled?"Reset":Xr}
        </button>
      `)}
  `}function kTt(e){e.renderRoot.querySelectorAll("[data-type='filter']").forEach(t=>{typeof t.reset=="function"&&t.reset()}),e.search()}var V_,Ub,_u,I1,E$e,S$e;class TTt extends Zr{constructor(){super();yn(this,I1);yn(this,V_,[]);yn(this,Ub,[]);yn(this,_u,yTt);this.items=null,this.filters={},this.results=[],this.selectedResult=null,this.search=G0(this.searchHandler,100,{leading:!0}),this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.externalFilter=null,this.filterProperties=[],this.fuseConfig={},this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.showResults=!0,this.titleProperty="title",this.subTitleProperty=void 0,this.imageProperty=void 0,this.idProperty="id",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0,this.resultType="list",this.unstyled=!1}static get properties(){return{items:{attribute:!1,type:Object},results:{state:!0,attribute:!1,type:Object},filters:{state:!0,attribute:!1,type:Object},selectedResult:{attribute:!1,type:Object},aggregateResults:{attribute:"aggregate-results",type:String},autoSpreadSingle:{attribute:"auto-spread-single",type:Boolean},enableHighlighting:{attribute:"enable-highlighting",type:Boolean},filterProperties:{attribute:!1,type:Array},fuseConfig:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},matchAllWhenEmpty:{attribute:"match-all-when-empty",type:Boolean},showResults:{attribute:"show-result",type:Boolean},idProperty:{attribute:"id-property",type:String},titleProperty:{attribute:"title-property",type:String},subTitleProperty:{attribute:"sub-title-property",type:String},imageProperty:{attribute:"image-property",type:String},expandMultipleFilters:{attribute:"enable-multiple-filter",type:Boolean},expandResults:{attribute:"expand-result",type:Boolean},expandMultipleResults:{attribute:"expand-multiple-results",type:Boolean},externalFilter:{attribute:!1,type:Function},resultType:{attribute:"result-type",type:String},unstyled:{type:Boolean}}}apply(){ao(this,V_,_Tt(Gt(this,_u),Gt(this,Ub),this)),this.search()}async searchHandler(){await ETt(Gt(this,_u),Gt(this,Ub),this),this.dispatchEvent(new CustomEvent("filter",{detail:{results:this.results,filters:this.filters},bubbles:!0,composed:!0})),this.inlineMode&&this.renderRoot.querySelector("eox-itemfilter-container").updateInline(),this.requestUpdate()}sortResults(n){return ATt(n,Gt(this,_u))}resetFilters(){kTt(this)}firstUpdated(n){var i;let r={};bEe.map(o=>{r={...r,[o]:this[o]}}),ao(this,_u,r),ao(this,Ub,((i=this.items)==null?void 0:i.map((o,s)=>Object.assign({id:o[this.idProperty]||`item-${s}`},o)))||[]),this.apply()}updated(n){bEe.map(r=>{if(n.has(r))return this.firstUpdated(),!0})}updateResult(n){this.selectedResult=n.detail,this.dispatchEvent(new CustomEvent("select",{detail:this.selectedResult,bubbles:!0,composed:!0})),this.requestUpdate()}render(){var n;return Qe`
      <style>
        ${LCt}
        ${!this.unstyled&&QE}
        ${!this.unstyled&&RCt}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        class=${this.inlineMode?"inline":Xr}
        @submit="${r=>r.preventDefault()}"
      >
        ${Un(this.filterProperties,()=>Qe`
            <eox-itemfilter-container
              .filters=${this.filters}
              .filterProperties=${this.filterProperties}
              .inlineMode=${this.inlineMode||!1}
              @reset=${()=>this.resetFilters()}
              @filter=${()=>this.search()}
            >
              <section slot="section">
                ${Un(!this.inlineMode,()=>Qe`
                    <slot name="filterstitle"
                      ><h6 class="main-heading">Filters</h6></slot
                    >
                  `)}
                <ul id="filters">
                  ${ou(Object.values(this.filters),(r,i)=>Qe` <li>
                        <eox-itemfilter-expandcontainer
                          .filterObject=${r}
                          @details-toggled=${o=>e$e(o,Gt(this,_u),this)}
                          data-details="${r.key}"
                        >
                          ${gn(this,I1,S$e).call(this,r,mEe(i,1))}
                          ${gn(this,I1,E$e).call(this,r,mEe(i,2))}
                        </eox-itemfilter-expandcontainer>
                      </li>`)}
                </ul>
                ${Un(!this.inlineMode&&Gt(this,_u).filterProperties&&!this.inlineMode&&Gt(this,_u).filterProperties&&m8(this.filters),()=>Qe`
                    <button
                      type="button"
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
              </section>
            </eox-itemfilter-container>
          `)}
        ${Un(((n=Gt(this,_u))==null?void 0:n.showResults)&&this.results,()=>Qe`
            <eox-itemfilter-results
              .config=${Gt(this,_u)}
              .results=${this.results}
              .filters=${this.filters}
              .resultAggregation=${Gt(this,V_)}
              .selectedResult=${this.selectedResult}
              .resultType=${this.resultType}
              @result=${this.updateResult}
            >
              <slot name="resultstitle"
                ><h6 class="main-heading">Results</h6></slot
              >
            </eox-itemfilter-results>
          `)}
      </form>
    `}}V_=new WeakMap,Ub=new WeakMap,_u=new WeakMap,I1=new WeakSet,E$e=function(n,r){return STt(n,r,this)},S$e=function(n,r){return CTt(n,r,this)};customElements.define("eox-itemfilter",TTt);function XA(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W4={exports:{}};/**
 * easymde v2.18.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */var wEe;function DTt(){return wEe||(wEe=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(u,f){if(!i[u]){if(!r[u]){var c=typeof XA=="function"&&XA;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){return s(r[u][1][p]||p)},h,h.exports,n,r,i,o)}return i[u].exports}for(var a=typeof XA=="function"&&XA,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(n,r,i){},{}],2:[function(n,r,i){var o=n("typo-js");function s(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!s.aff_loading){s.aff_loading=!0;var u=new XMLHttpRequest;u.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),u.onload=function(){u.readyState===4&&u.status===200&&(s.aff_data=u.responseText,s.num_loaded++,s.num_loaded==2&&(s.typo=new o("en_US",s.aff_data,s.dic_data,{platform:"any"})))},u.send(null)}if(!s.dic_loading){s.dic_loading=!0;var f=new XMLHttpRequest;f.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),f.onload=function(){f.readyState===4&&f.status===200&&(s.dic_data=f.responseText,s.num_loaded++,s.num_loaded==2&&(s.typo=new o("en_US",s.aff_data,s.dic_data,{platform:"any"})))},f.send(null)}var c='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(p){var m=p.peek(),b="";if(c.includes(m))return p.next(),null;for(;(m=p.peek())!=null&&!c.includes(m);)b+=m,p.next();return s.typo&&!s.typo.check(b)?"spell-error":null}},h=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(h,d,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}s.num_loaded=0,s.aff_loading=!1,s.dic_loading=!1,s.aff_data="",s.dic_data="",s.typo,r.exports=s},{"typo-js":16}],3:[function(n,r,i){(function(o){function s(a,l){clearTimeout(l.timeout),o.off(window,"mouseup",l.hurry),o.off(window,"keyup",l.hurry)}o.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(s(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(u,f){function c(){u.display.wrapper.offsetHeight?(s(0,f),u.display.lastWrapHeight!=u.display.wrapper.clientHeight&&u.refresh()):f.timeout=setTimeout(c,f.delay)}f.timeout=setTimeout(c,f.delay),f.hurry=function(){clearTimeout(f.timeout),f.timeout=setTimeout(c,50)},o.on(window,"mouseup",f.hurry),o.on(window,"keyup",f.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(n,r,i){(function(o){o.defineOption("fullScreen",!1,function(s,a,l){l==o.Init&&(l=!1),!l!=!a&&(a?function(u){var f=u.getWrapperElement();u.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:f.style.width,height:f.style.height},f.style.width="",f.style.height="auto",f.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",u.refresh()}(s):function(u){var f=u.getWrapperElement();f.className=f.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var c=u.state.fullScreenRestore;f.style.width=c.width,f.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop),u.refresh()}(s))})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(n,r,i){(function(o){function s(c){c.state.placeholder&&(c.state.placeholder.parentNode.removeChild(c.state.placeholder),c.state.placeholder=null)}function a(c){s(c);var d=c.state.placeholder=document.createElement("pre");d.style.cssText="height: 0; overflow: visible",d.style.direction=c.getOption("direction"),d.className="CodeMirror-placeholder CodeMirror-line-like";var h=c.getOption("placeholder");typeof h=="string"&&(h=document.createTextNode(h)),d.appendChild(h),c.display.lineSpace.insertBefore(d,c.display.lineSpace.firstChild)}function l(c){f(c)&&a(c)}function u(c){var d=c.getWrapperElement(),h=f(c);d.className=d.className.replace(" CodeMirror-empty","")+(h?" CodeMirror-empty":""),h?a(c):s(c)}function f(c){return c.lineCount()===1&&c.getLine(0)===""}o.defineOption("placeholder","",function(c,d,h){var p=h&&h!=o.Init;if(d&&!p)c.on("blur",l),c.on("change",u),c.on("swapDoc",u),o.on(c.getInputField(),"compositionupdate",c.state.placeholderCompose=function(){(function(b){setTimeout(function(){var y=!1;if(b.lineCount()==1){var v=b.getInputField();y=v.nodeName=="TEXTAREA"?!b.getLine(0).length:!/[^\u200b]/.test(v.querySelector(".CodeMirror-line").textContent)}y?a(b):s(b)},20)})(c)}),u(c);else if(!d&&p){c.off("blur",l),c.off("change",u),c.off("swapDoc",u),o.off(c.getInputField(),"compositionupdate",c.state.placeholderCompose),s(c);var m=c.getWrapperElement();m.className=m.className.replace(" CodeMirror-empty","")}d&&!c.hasFocus()&&l(c)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(n,r,i){(function(o){var s=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function u(f,c){var d=c.line,h=0,p=0,m=s.exec(f.getLine(d)),b=m[1];do{var y=d+(h+=1),v=f.getLine(y),w=s.exec(v);if(w){var E=w[1],A=parseInt(m[3],10)+h-p,T=parseInt(w[3],10),D=T;if(b!==E||isNaN(T)){if(b.length>E.length||b.length<E.length&&h===1)return;p+=1}else A===T&&(D=T+1),A>T&&(D=A+1),f.replaceRange(v.replace(s,E+D+w[4]+w[5]),{line:y,ch:0},{line:y,ch:v.length})}}while(w)}o.commands.newlineAndIndentContinueMarkdownList=function(f){if(f.getOption("disableInput"))return o.Pass;for(var c=f.listSelections(),d=[],h=0;h<c.length;h++){var p=c[h].head,m=f.getStateAfter(p.line),b=o.innerMode(f.getMode(),m);if(b.mode.name!=="markdown"&&b.mode.helperType!=="markdown")return void f.execCommand("newlineAndIndent");var y=(m=b.state).list!==!1,v=m.quote!==0,w=f.getLine(p.line),E=s.exec(w),A=/^\s*$/.test(w.slice(0,p.ch));if(!c[h].empty()||!y&&!v||!E||A)return void f.execCommand("newlineAndIndent");if(a.test(w)){var T=v&&/>\s*$/.test(w),D=!/>\s*$/.test(w);(T||D)&&f.replaceRange("",{line:p.line,ch:0},{line:p.line,ch:p.ch+1}),d[h]=`
`}else{var k=E[1],R=E[5],M=!(l.test(E[2])||E[2].indexOf(">")>=0),B=M?parseInt(E[3],10)+1+E[4]:E[2].replace("x"," ");d[h]=`
`+k+B+R,M&&u(f,p)}}f.replaceSelections(d)}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(n,r,i){(function(o){o.overlayMode=function(s,a,l){return{startState:function(){return{base:o.startState(s),overlay:o.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(u){return{base:o.copyState(s,u.base),overlay:o.copyState(a,u.overlay),basePos:u.basePos,baseCur:null,overlayPos:u.overlayPos,overlayCur:null}},token:function(u,f){return(u!=f.streamSeen||Math.min(f.basePos,f.overlayPos)<u.start)&&(f.streamSeen=u,f.basePos=f.overlayPos=u.start),u.start==f.basePos&&(f.baseCur=s.token(u,f.base),f.basePos=u.pos),u.start==f.overlayPos&&(u.pos=u.start,f.overlayCur=a.token(u,f.overlay),f.overlayPos=u.pos),u.pos=Math.min(f.basePos,f.overlayPos),f.overlayCur==null?f.baseCur:f.baseCur!=null&&f.overlay.combineTokens||l&&f.overlay.combineTokens==null?f.baseCur+" "+f.overlayCur:f.overlayCur},indent:s.indent&&function(u,f,c){return s.indent(u.base,f,c)},electricChars:s.electricChars,innerMode:function(u){return{state:u.base,mode:s}},blankLine:function(u){var f,c;return s.blankLine&&(f=s.blankLine(u.base)),a.blankLine&&(c=a.blankLine(u.overlay)),c==null?f:l&&f!=null?f+" "+c:c}}}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(n,r,i){(function(o){var s,a,l=o.Pos;function u(E,A){for(var T=function(R){var M=R.flags;return M??(R.ignoreCase?"i":"")+(R.global?"g":"")+(R.multiline?"m":"")}(E),D=T,k=0;k<A.length;k++)D.indexOf(A.charAt(k))==-1&&(D+=A.charAt(k));return T==D?E:new RegExp(E.source,D)}function f(E){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(E.source)}function c(E,A,T){A=u(A,"g");for(var D=T.line,k=T.ch,R=E.lastLine();D<=R;D++,k=0){A.lastIndex=k;var M=E.getLine(D),B=A.exec(M);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function d(E,A,T){if(!f(A))return c(E,A,T);A=u(A,"gm");for(var D,k=1,R=T.line,M=E.lastLine();R<=M;){for(var B=0;B<k&&!(R>M);B++){var K=E.getLine(R++);D=D==null?K:D+`
`+K}k*=2,A.lastIndex=T.ch;var L=A.exec(D);if(L){var $=D.slice(0,L.index).split(`
`),I=L[0].split(`
`),U=T.line+$.length-1,q=$[$.length-1].length;return{from:l(U,q),to:l(U+I.length-1,I.length==1?q+I[0].length:I[I.length-1].length),match:L}}}}function h(E,A,T){for(var D,k=0;k<=E.length;){A.lastIndex=k;var R=A.exec(E);if(!R)break;var M=R.index+R[0].length;if(M>E.length-T)break;(!D||M>D.index+D[0].length)&&(D=R),k=R.index+1}return D}function p(E,A,T){A=u(A,"g");for(var D=T.line,k=T.ch,R=E.firstLine();D>=R;D--,k=-1){var M=E.getLine(D),B=h(M,A,k<0?0:M.length-k);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function m(E,A,T){if(!f(A))return p(E,A,T);A=u(A,"gm");for(var D,k=1,R=E.getLine(T.line).length-T.ch,M=T.line,B=E.firstLine();M>=B;){for(var K=0;K<k&&M>=B;K++){var L=E.getLine(M--);D=D==null?L:L+`
`+D}k*=2;var $=h(D,A,R);if($){var I=D.slice(0,$.index).split(`
`),U=$[0].split(`
`),q=M+I.length,Y=I[I.length-1].length;return{from:l(q,Y),to:l(q+U.length-1,U.length==1?Y+U[0].length:U[U.length-1].length),match:$}}}}function b(E,A,T,D){if(E.length==A.length)return T;for(var k=0,R=T+Math.max(0,E.length-A.length);;){if(k==R)return k;var M=k+R>>1,B=D(E.slice(0,M)).length;if(B==T)return M;B>T?R=M:k=M+1}}function y(E,A,T,D){if(!A.length)return null;var k=D?s:a,R=k(A).split(/\r|\n\r?/);e:for(var M=T.line,B=T.ch,K=E.lastLine()+1-R.length;M<=K;M++,B=0){var L=E.getLine(M).slice(B),$=k(L);if(R.length==1){var I=$.indexOf(R[0]);if(I==-1)continue e;return T=b(L,$,I,k)+B,{from:l(M,b(L,$,I,k)+B),to:l(M,b(L,$,I+R[0].length,k)+B)}}var U=$.length-R[0].length;if($.slice(U)==R[0]){for(var q=1;q<R.length-1;q++)if(k(E.getLine(M+q))!=R[q])continue e;var Y=E.getLine(M+R.length-1),X=k(Y),te=R[R.length-1];if(X.slice(0,te.length)==te)return{from:l(M,b(L,$,U,k)+B),to:l(M+R.length-1,b(Y,X,te.length,k))}}}}function v(E,A,T,D){if(!A.length)return null;var k=D?s:a,R=k(A).split(/\r|\n\r?/);e:for(var M=T.line,B=T.ch,K=E.firstLine()-1+R.length;M>=K;M--,B=-1){var L=E.getLine(M);B>-1&&(L=L.slice(0,B));var $=k(L);if(R.length==1){var I=$.lastIndexOf(R[0]);if(I==-1)continue e;return{from:l(M,b(L,$,I,k)),to:l(M,b(L,$,I+R[0].length,k))}}var U=R[R.length-1];if($.slice(0,U.length)==U){var q=1;for(T=M-R.length+1;q<R.length-1;q++)if(k(E.getLine(T+q))!=R[q])continue e;var Y=E.getLine(M+1-R.length),X=k(Y);if(X.slice(X.length-R[0].length)==R[0])return{from:l(M+1-R.length,b(Y,X,Y.length-R[0].length,k)),to:l(M,b(L,$,U.length,k))}}}}function w(E,A,T,D){var k;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=E,T=T?E.clipPos(T):l(0,0),this.pos={from:T,to:T},typeof D=="object"?k=D.caseFold:(k=D,D=null),typeof A=="string"?(k==null&&(k=!1),this.matches=function(R,M){return(R?v:y)(E,A,M,k)}):(A=u(A,"gm"),D&&D.multiline===!1?this.matches=function(R,M){return(R?p:c)(E,A,M)}:this.matches=function(R,M){return(R?m:d)(E,A,M)})}String.prototype.normalize?(s=function(E){return E.normalize("NFD").toLowerCase()},a=function(E){return E.normalize("NFD")}):(s=function(E){return E.toLowerCase()},a=function(E){return E}),w.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(E){var A=this.doc.clipPos(E?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(A=l(A.line,A.ch),E?(A.ch--,A.ch<0&&(A.line--,A.ch=(this.doc.getLine(A.line)||"").length)):(A.ch++,A.ch>(this.doc.getLine(A.line)||"").length&&(A.ch=0,A.line++)),o.cmpPos(A,this.doc.clipPos(A))!=0))return this.atOccurrence=!1;var T=this.matches(E,A);if(this.afterEmptyMatch=T&&o.cmpPos(T.from,T.to)==0,T)return this.pos=T,this.atOccurrence=!0,this.pos.match||!0;var D=l(E?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:D,to:D},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(E,A){if(this.atOccurrence){var T=o.splitLines(E);this.doc.replaceRange(T,this.pos.from,this.pos.to,A),this.pos.to=l(this.pos.from.line+T.length-1,T[T.length-1].length+(T.length==1?this.pos.from.ch:0))}}},o.defineExtension("getSearchCursor",function(E,A,T){return new w(this.doc,E,A,T)}),o.defineDocExtension("getSearchCursor",function(E,A,T){return new w(this,E,A,T)}),o.defineExtension("selectMatches",function(E,A){for(var T=[],D=this.getSearchCursor(E,this.getCursor("from"),A);D.findNext()&&!(o.cmpPos(D.to(),this.getCursor("to"))>0);)T.push({anchor:D.from(),head:D.to()});T.length&&this.setSelections(T,0)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(n,r,i){(function(o){function s(h){h.state.markedSelection&&h.operation(function(){(function(p){if(!p.somethingSelected())return c(p);if(p.listSelections().length>1)return d(p);var m=p.getCursor("start"),b=p.getCursor("end"),y=p.state.markedSelection;if(!y.length)return f(p,m,b);var v=y[0].find(),w=y[y.length-1].find();if(!v||!w||b.line-m.line<=8||u(m,w.to)>=0||u(b,v.from)<=0)return d(p);for(;u(m,v.from)>0;)y.shift().clear(),v=y[0].find();for(u(m,v.from)<0&&(v.to.line-m.line<8?(y.shift().clear(),f(p,m,v.to,0)):f(p,m,v.from,0));u(b,w.to)<0;)y.pop().clear(),w=y[y.length-1].find();u(b,w.to)>0&&(b.line-w.from.line<8?(y.pop().clear(),f(p,w.from,b)):f(p,w.to,b))})(h)})}function a(h){h.state.markedSelection&&h.state.markedSelection.length&&h.operation(function(){c(h)})}o.defineOption("styleSelectedText",!1,function(h,p,m){var b=m&&m!=o.Init;p&&!b?(h.state.markedSelection=[],h.state.markedSelectionStyle=typeof p=="string"?p:"CodeMirror-selectedtext",d(h),h.on("cursorActivity",s),h.on("change",a)):!p&&b&&(h.off("cursorActivity",s),h.off("change",a),c(h),h.state.markedSelection=h.state.markedSelectionStyle=null)});var l=o.Pos,u=o.cmpPos;function f(h,p,m,b){if(u(p,m)!=0)for(var y=h.state.markedSelection,v=h.state.markedSelectionStyle,w=p.line;;){var E=w==p.line?p:l(w,0),A=w+8,T=A>=m.line,D=T?m:l(A,0),k=h.markText(E,D,{className:v});if(b==null?y.push(k):y.splice(b++,0,k),T)break;w=A}}function c(h){for(var p=h.state.markedSelection,m=0;m<p.length;++m)p[m].clear();p.length=0}function d(h){c(h);for(var p=h.listSelections(),m=0;m<p.length;m++)f(h,p[m].from(),p[m].to())}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(n,r,i){(function(o,s){typeof i=="object"&&r!==void 0?r.exports=s():(o=o||self).CodeMirror=s()})(this,function(){var o=navigator.userAgent,s=navigator.platform,a=/gecko\/\d/i.test(o),l=/MSIE \d/.test(o),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(o),f=/Edge\/(\d+)/.exec(o),c=l||u||f,d=c&&(l?document.documentMode||6:+(f||u)[1]),h=!f&&/WebKit\//.test(o),p=h&&/Qt\/\d+\.\d+/.test(o),m=!f&&/Chrome\/(\d+)/.exec(o),b=m&&+m[1],y=/Opera\//.test(o),v=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(o),E=/PhantomJS/.test(o),A=v&&(/Mobile\/\w+/.test(o)||navigator.maxTouchPoints>2),T=/Android/.test(o),D=A||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(o),k=A||/Mac/.test(s),R=/\bCrOS\b/.test(o),M=/win/i.test(s),B=y&&o.match(/Version\/(\d*\.\d*)/);B&&(B=Number(B[1])),B&&B>=15&&(y=!1,h=!0);var K=k&&(p||y&&(B==null||B<12.11)),L=a||c&&d>=9;function $(g){return new RegExp("(^|\\s)"+g+"(?:$|\\s)\\s*")}var I,U=function(g,x){var S=g.className,_=$(x).exec(S);if(_){var C=S.slice(_.index+_[0].length);g.className=S.slice(0,_.index)+(C?_[1]+C:"")}};function q(g){for(var x=g.childNodes.length;x>0;--x)g.removeChild(g.firstChild);return g}function Y(g,x){return q(g).appendChild(x)}function X(g,x,S,_){var C=document.createElement(g);if(S&&(C.className=S),_&&(C.style.cssText=_),typeof x=="string")C.appendChild(document.createTextNode(x));else if(x)for(var O=0;O<x.length;++O)C.appendChild(x[O]);return C}function te(g,x,S,_){var C=X(g,x,S,_);return C.setAttribute("role","presentation"),C}function le(g,x){if(x.nodeType==3&&(x=x.parentNode),g.contains)return g.contains(x);do if(x.nodeType==11&&(x=x.host),x==g)return!0;while(x=x.parentNode)}function ee(g){var x;try{x=g.activeElement}catch{x=g.body||null}for(;x&&x.shadowRoot&&x.shadowRoot.activeElement;)x=x.shadowRoot.activeElement;return x}function z(g,x){var S=g.className;$(x).test(S)||(g.className+=(S?" ":"")+x)}function he(g,x){for(var S=g.split(" "),_=0;_<S.length;_++)S[_]&&!$(S[_]).test(x)&&(x+=" "+S[_]);return x}I=document.createRange?function(g,x,S,_){var C=document.createRange();return C.setEnd(_||g,S),C.setStart(g,x),C}:function(g,x,S){var _=document.body.createTextRange();try{_.moveToElementText(g.parentNode)}catch{return _}return _.collapse(!0),_.moveEnd("character",S),_.moveStart("character",x),_};var de=function(g){g.select()};function ze(g){return g.display.wrapper.ownerDocument}function He(g){return ze(g).defaultView}function je(g){var x=Array.prototype.slice.call(arguments,1);return function(){return g.apply(null,x)}}function we(g,x,S){for(var _ in x||(x={}),g)!g.hasOwnProperty(_)||S===!1&&x.hasOwnProperty(_)||(x[_]=g[_]);return x}function Ie(g,x,S,_,C){x==null&&(x=g.search(/[^\s\u00a0]/))==-1&&(x=g.length);for(var O=_||0,N=C||0;;){var j=g.indexOf("	",O);if(j<0||j>=x)return N+(x-O);N+=j-O,N+=S-N%S,O=j+1}}A?de=function(g){g.selectionStart=0,g.selectionEnd=g.value.length}:c&&(de=function(g){try{g.select()}catch{}});var qe=function(){this.id=null,this.f=null,this.time=0,this.handler=je(this.onTimeout,this)};function Pe(g,x){for(var S=0;S<g.length;++S)if(g[S]==x)return S;return-1}qe.prototype.onTimeout=function(g){g.id=0,g.time<=+new Date?g.f():setTimeout(g.handler,g.time-+new Date)},qe.prototype.set=function(g,x){this.f=x;var S=+new Date+g;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,g),this.time=S)};var At={toString:function(){return"CodeMirror.Pass"}},ht={scroll:!1},nn={origin:"*mouse"},Vt={origin:"+move"};function On(g,x,S){for(var _=0,C=0;;){var O=g.indexOf("	",_);O==-1&&(O=g.length);var N=O-_;if(O==g.length||C+N>=x)return _+Math.min(N,x-C);if(C+=O-_,_=O+1,(C+=S-C%S)>=x)return _}}var Ze=[""];function pe(g){for(;Ze.length<=g;)Ze.push(ie(Ze)+" ");return Ze[g]}function ie(g){return g[g.length-1]}function se(g,x){for(var S=[],_=0;_<g.length;_++)S[_]=x(g[_],_);return S}function ve(){}function F(g,x){var S;return Object.create?S=Object.create(g):(ve.prototype=g,S=new ve),x&&we(x,S),S}var H=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(g){return/\w/.test(g)||g>""&&(g.toUpperCase()!=g.toLowerCase()||H.test(g))}function re(g,x){return x?!!(x.source.indexOf("\\w")>-1&&J(g))||x.test(g):J(g)}function ye(g){for(var x in g)if(g.hasOwnProperty(x)&&g[x])return!1;return!0}var xe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Re(g){return g.charCodeAt(0)>=768&&xe.test(g)}function P(g,x,S){for(;(S<0?x>0:x<g.length)&&Re(g.charAt(x));)x+=S;return x}function Q(g,x,S){for(var _=x>S?-1:1;;){if(x==S)return x;var C=(x+S)/2,O=_<0?Math.ceil(C):Math.floor(C);if(O==x)return g(O)?x:S;g(O)?S=O:x=O+_}}var oe=null;function ae(g,x,S){var _;oe=null;for(var C=0;C<g.length;++C){var O=g[C];if(O.from<x&&O.to>x)return C;O.to==x&&(O.from!=O.to&&S=="before"?_=C:oe=C),O.from==x&&(O.from!=O.to&&S!="before"?_=C:oe=C)}return _??oe}var ke=function(){var g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,x=/[stwN]/,S=/[LRr]/,_=/[Lb1n]/,C=/[1n]/;function O(N,j,V){this.level=N,this.from=j,this.to=V}return function(N,j){var V=j=="ltr"?"L":"R";if(N.length==0||j=="ltr"&&!g.test(N))return!1;for(var W,ce=N.length,fe=[],Se=0;Se<ce;++Se)fe.push((W=N.charCodeAt(Se))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(W):1424<=W&&W<=1524?"R":1536<=W&&W<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(W-1536):1774<=W&&W<=2220?"r":8192<=W&&W<=8203?"w":W==8204?"b":"L");for(var be=0,$e=V;be<ce;++be){var Ne=fe[be];Ne=="m"?fe[be]=$e:$e=Ne}for(var Oe=0,Ve=V;Oe<ce;++Oe){var nt=fe[Oe];nt=="1"&&Ve=="r"?fe[Oe]="n":S.test(nt)&&(Ve=nt,nt=="r"&&(fe[Oe]="R"))}for(var Je=1,gt=fe[0];Je<ce-1;++Je){var ct=fe[Je];ct=="+"&&gt=="1"&&fe[Je+1]=="1"?fe[Je]="1":ct!=","||gt!=fe[Je+1]||gt!="1"&&gt!="n"||(fe[Je]=gt),gt=ct}for(var mt=0;mt<ce;++mt){var bn=fe[mt];if(bn==",")fe[mt]="N";else if(bn=="%"){var Ot=void 0;for(Ot=mt+1;Ot<ce&&fe[Ot]=="%";++Ot);for(var Hn=mt&&fe[mt-1]=="!"||Ot<ce&&fe[Ot]=="1"?"1":"N",fn=mt;fn<Ot;++fn)fe[fn]=Hn;mt=Ot-1}}for(var ar=0,Nr=V;ar<ce;++ar){var lr=fe[ar];Nr=="L"&&lr=="1"?fe[ar]="L":S.test(lr)&&(Nr=lr)}for(var Zn=0;Zn<ce;++Zn)if(x.test(fe[Zn])){var ur=void 0;for(ur=Zn+1;ur<ce&&x.test(fe[ur]);++ur);for(var $n=(Zn?fe[Zn-1]:V)=="L",Br=$n==((ur<ce?fe[ur]:V)=="L")?$n?"L":"R":V,Fn=Zn;Fn<ur;++Fn)fe[Fn]=Br;Zn=ur-1}for(var Jn,Nn=[],br=0;br<ce;)if(_.test(fe[br])){var us=br;for(++br;br<ce&&_.test(fe[br]);++br);Nn.push(new O(0,us,br))}else{var zr=br,Yo=Nn.length,Xo=j=="rtl"?1:0;for(++br;br<ce&&fe[br]!="L";++br);for(var Ci=zr;Ci<br;)if(C.test(fe[Ci])){zr<Ci&&(Nn.splice(Yo,0,new O(1,zr,Ci)),Yo+=Xo);var cs=Ci;for(++Ci;Ci<br&&C.test(fe[Ci]);++Ci);Nn.splice(Yo,0,new O(2,cs,Ci)),Yo+=Xo,zr=Ci}else++Ci;zr<br&&Nn.splice(Yo,0,new O(1,zr,br))}return j=="ltr"&&(Nn[0].level==1&&(Jn=N.match(/^\s+/))&&(Nn[0].from=Jn[0].length,Nn.unshift(new O(0,0,Jn[0].length))),ie(Nn).level==1&&(Jn=N.match(/\s+$/))&&(ie(Nn).to-=Jn[0].length,Nn.push(new O(0,ce-Jn[0].length,ce)))),j=="rtl"?Nn.reverse():Nn}}();function Ce(g,x){var S=g.order;return S==null&&(S=g.order=ke(g.text,x)),S}var Ee=[],De=function(g,x,S){if(g.addEventListener)g.addEventListener(x,S,!1);else if(g.attachEvent)g.attachEvent("on"+x,S);else{var _=g._handlers||(g._handlers={});_[x]=(_[x]||Ee).concat(S)}};function Me(g,x){return g._handlers&&g._handlers[x]||Ee}function We(g,x,S){if(g.removeEventListener)g.removeEventListener(x,S,!1);else if(g.detachEvent)g.detachEvent("on"+x,S);else{var _=g._handlers,C=_&&_[x];if(C){var O=Pe(C,S);O>-1&&(_[x]=C.slice(0,O).concat(C.slice(O+1)))}}}function tt(g,x){var S=Me(g,x);if(S.length)for(var _=Array.prototype.slice.call(arguments,2),C=0;C<S.length;++C)S[C].apply(null,_)}function dt(g,x,S){return typeof x=="string"&&(x={type:x,preventDefault:function(){this.defaultPrevented=!0}}),tt(g,S||x.type,g,x),sn(x)||x.codemirrorIgnore}function Kt(g){var x=g._handlers&&g._handlers.cursorActivity;if(x)for(var S=g.curOp.cursorActivityHandlers||(g.curOp.cursorActivityHandlers=[]),_=0;_<x.length;++_)Pe(S,x[_])==-1&&S.push(x[_])}function xt(g,x){return Me(g,x).length>0}function Qt(g){g.prototype.on=function(x,S){De(this,x,S)},g.prototype.off=function(x,S){We(this,x,S)}}function rn(g){g.preventDefault?g.preventDefault():g.returnValue=!1}function on(g){g.stopPropagation?g.stopPropagation():g.cancelBubble=!0}function sn(g){return g.defaultPrevented!=null?g.defaultPrevented:g.returnValue==0}function Tn(g){rn(g),on(g)}function Er(g){return g.target||g.srcElement}function Ki(g){var x=g.which;return x==null&&(1&g.button?x=1:2&g.button?x=3:4&g.button&&(x=2)),k&&g.ctrlKey&&x==1&&(x=3),x}var ho,Hi,Ns=function(){if(c&&d<9)return!1;var g=X("div");return"draggable"in g||"dragDrop"in g}();function qn(g){if(ho==null){var x=X("span","");Y(g,X("span",[x,document.createTextNode("x")])),g.firstChild.offsetHeight!=0&&(ho=x.offsetWidth<=1&&x.offsetHeight>2&&!(c&&d<8))}var S=ho?X("span",""):X("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}function Or(g){if(Hi!=null)return Hi;var x=Y(g,document.createTextNode("AA")),S=I(x,0,1).getBoundingClientRect(),_=I(x,1,2).getBoundingClientRect();return q(g),!(!S||S.left==S.right)&&(Hi=_.right-S.right<3)}var Lr,mn=`

b`.split(/\n/).length!=3?function(g){for(var x=0,S=[],_=g.length;x<=_;){var C=g.indexOf(`
`,x);C==-1&&(C=g.length);var O=g.slice(x,g.charAt(C-1)=="\r"?C-1:C),N=O.indexOf("\r");N!=-1?(S.push(O.slice(0,N)),x+=N+1):(S.push(O),x=C+1)}return S}:function(g){return g.split(/\r\n?|\n/)},Kr=window.getSelection?function(g){try{return g.selectionStart!=g.selectionEnd}catch{return!1}}:function(g){var x;try{x=g.ownerDocument.selection.createRange()}catch{}return!(!x||x.parentElement()!=g)&&x.compareEndPoints("StartToEnd",x)!=0},or="oncopy"in(Lr=X("div"))||(Lr.setAttribute("oncopy","return;"),typeof Lr.oncopy=="function"),Ni=null,tr={},$r={};function ns(g,x){arguments.length>2&&(x.dependencies=Array.prototype.slice.call(arguments,2)),tr[g]=x}function me(g){if(typeof g=="string"&&$r.hasOwnProperty(g))g=$r[g];else if(g&&typeof g.name=="string"&&$r.hasOwnProperty(g.name)){var x=$r[g.name];typeof x=="string"&&(x={name:x}),(g=F(x,g)).name=x.name}else{if(typeof g=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(g))return me("application/xml");if(typeof g=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(g))return me("application/json")}return typeof g=="string"?{name:g}:g||{name:"null"}}function Le(g,x){x=me(x);var S=tr[x.name];if(!S)return Le(g,"text/plain");var _=S(g,x);if(it.hasOwnProperty(x.name)){var C=it[x.name];for(var O in C)C.hasOwnProperty(O)&&(_.hasOwnProperty(O)&&(_["_"+O]=_[O]),_[O]=C[O])}if(_.name=x.name,x.helperType&&(_.helperType=x.helperType),x.modeProps)for(var N in x.modeProps)_[N]=x.modeProps[N];return _}var it={};function Ke(g,x){we(x,it.hasOwnProperty(g)?it[g]:it[g]={})}function Et(g,x){if(x===!0)return x;if(g.copyState)return g.copyState(x);var S={};for(var _ in x){var C=x[_];C instanceof Array&&(C=C.concat([])),S[_]=C}return S}function an(g,x){for(var S;g.innerMode&&(S=g.innerMode(x))&&S.mode!=g;)x=S.state,g=S.mode;return S||{mode:g,state:x}}function en(g,x,S){return!g.startState||g.startState(x,S)}var wt=function(g,x,S){this.pos=this.start=0,this.string=g,this.tabSize=x||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};function et(g,x){if((x-=g.first)<0||x>=g.size)throw new Error("There is no line "+(x+g.first)+" in the document.");for(var S=g;!S.lines;)for(var _=0;;++_){var C=S.children[_],O=C.chunkSize();if(x<O){S=C;break}x-=O}return S.lines[x]}function hn(g,x,S){var _=[],C=x.line;return g.iter(x.line,S.line+1,function(O){var N=O.text;C==S.line&&(N=N.slice(0,S.ch)),C==x.line&&(N=N.slice(x.ch)),_.push(N),++C}),_}function An(g,x,S){var _=[];return g.iter(x,S,function(C){_.push(C.text)}),_}function zt(g,x){var S=x-g.height;if(S)for(var _=g;_;_=_.parent)_.height+=S}function jt(g){if(g.parent==null)return null;for(var x=g.parent,S=Pe(x.lines,g),_=x.parent;_;x=_,_=_.parent)for(var C=0;_.children[C]!=x;++C)S+=_.children[C].chunkSize();return S+x.first}function Sr(g,x){var S=g.first;e:do{for(var _=0;_<g.children.length;++_){var C=g.children[_],O=C.height;if(x<O){g=C;continue e}x-=O,S+=C.chunkSize()}return S}while(!g.lines);for(var N=0;N<g.lines.length;++N){var j=g.lines[N].height;if(x<j)break;x-=j}return S+N}function ci(g,x){return x>=g.first&&x<g.first+g.size}function Zt(g,x){return String(g.lineNumberFormatter(x+g.firstLineNumber))}function Xe(g,x,S){if(S===void 0&&(S=null),!(this instanceof Xe))return new Xe(g,x,S);this.line=g,this.ch=x,this.sticky=S}function pt(g,x){return g.line-x.line||g.ch-x.ch}function Xn(g,x){return g.sticky==x.sticky&&pt(g,x)==0}function ni(g){return Xe(g.line,g.ch)}function Ar(g,x){return pt(g,x)<0?x:g}function Rr(g,x){return pt(g,x)<0?g:x}function nr(g,x){return Math.max(g.first,Math.min(x,g.first+g.size-1))}function qt(g,x){if(x.line<g.first)return Xe(g.first,0);var S=g.first+g.size-1;return x.line>S?Xe(S,et(g,S).text.length):function(_,C){var O=_.ch;return O==null||O>C?Xe(_.line,C):O<0?Xe(_.line,0):_}(x,et(g,x.line).text.length)}function bi(g,x){for(var S=[],_=0;_<x.length;_++)S[_]=qt(g,x[_]);return S}wt.prototype.eol=function(){return this.pos>=this.string.length},wt.prototype.sol=function(){return this.pos==this.lineStart},wt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},wt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},wt.prototype.eat=function(g){var x=this.string.charAt(this.pos);if(typeof g=="string"?x==g:x&&(g.test?g.test(x):g(x)))return++this.pos,x},wt.prototype.eatWhile=function(g){for(var x=this.pos;this.eat(g););return this.pos>x},wt.prototype.eatSpace=function(){for(var g=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>g},wt.prototype.skipToEnd=function(){this.pos=this.string.length},wt.prototype.skipTo=function(g){var x=this.string.indexOf(g,this.pos);if(x>-1)return this.pos=x,!0},wt.prototype.backUp=function(g){this.pos-=g},wt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ie(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},wt.prototype.indentation=function(){return Ie(this.string,null,this.tabSize)-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},wt.prototype.match=function(g,x,S){if(typeof g!="string"){var _=this.string.slice(this.pos).match(g);return _&&_.index>0?null:(_&&x!==!1&&(this.pos+=_[0].length),_)}var C=function(O){return S?O.toLowerCase():O};if(C(this.string.substr(this.pos,g.length))==C(g))return x!==!1&&(this.pos+=g.length),!0},wt.prototype.current=function(){return this.string.slice(this.start,this.pos)},wt.prototype.hideFirstChars=function(g,x){this.lineStart+=g;try{return x()}finally{this.lineStart-=g}},wt.prototype.lookAhead=function(g){var x=this.lineOracle;return x&&x.lookAhead(g)},wt.prototype.baseToken=function(){var g=this.lineOracle;return g&&g.baseToken(this.pos)};var Ji=function(g,x){this.state=g,this.lookAhead=x},vi=function(g,x,S,_){this.state=x,this.doc=g,this.line=S,this.maxLookAhead=_||0,this.baseTokens=null,this.baseTokenPos=1};function Uo(g,x,S,_){var C=[g.state.modeGen],O={};al(g,x.text,g.doc.mode,S,function(W,ce){return C.push(W,ce)},O,_);for(var N=S.state,j=function(W){S.baseTokens=C;var ce=g.state.overlays[W],fe=1,Se=0;S.state=!0,al(g,x.text,ce.mode,S,function(be,$e){for(var Ne=fe;Se<be;){var Oe=C[fe];Oe>be&&C.splice(fe,1,be,C[fe+1],Oe),fe+=2,Se=Math.min(be,Oe)}if($e)if(ce.opaque)C.splice(Ne,fe-Ne,be,"overlay "+$e),fe=Ne+2;else for(;Ne<fe;Ne+=2){var Ve=C[Ne+1];C[Ne+1]=(Ve?Ve+" ":"")+"overlay "+$e}},O),S.state=N,S.baseTokens=null,S.baseTokenPos=1},V=0;V<g.state.overlays.length;++V)j(V);return{styles:C,classes:O.bgClass||O.textClass?O:null}}function xs(g,x,S){if(!x.styles||x.styles[0]!=g.state.modeGen){var _=rs(g,jt(x)),C=x.text.length>g.options.maxHighlightLength&&Et(g.doc.mode,_.state),O=Uo(g,x,_);C&&(_.state=C),x.stateAfter=_.save(!C),x.styles=O.styles,O.classes?x.styleClasses=O.classes:x.styleClasses&&(x.styleClasses=null),S===g.doc.highlightFrontier&&(g.doc.modeFrontier=Math.max(g.doc.modeFrontier,++g.doc.highlightFrontier))}return x.styles}function rs(g,x,S){var _=g.doc,C=g.display;if(!_.mode.startState)return new vi(_,!0,x);var O=function(V,W,ce){for(var fe,Se,be=V.doc,$e=ce?-1:W-(V.doc.mode.innerMode?1e3:100),Ne=W;Ne>$e;--Ne){if(Ne<=be.first)return be.first;var Oe=et(be,Ne-1),Ve=Oe.stateAfter;if(Ve&&(!ce||Ne+(Ve instanceof Ji?Ve.lookAhead:0)<=be.modeFrontier))return Ne;var nt=Ie(Oe.text,null,V.options.tabSize);(Se==null||fe>nt)&&(Se=Ne-1,fe=nt)}return Se}(g,x,S),N=O>_.first&&et(_,O-1).stateAfter,j=N?vi.fromSaved(_,N,O):new vi(_,en(_.mode),O);return _.iter(O,x,function(V){Bs(g,V.text,j);var W=j.line;V.stateAfter=W==x-1||W%5==0||W>=C.viewFrom&&W<C.viewTo?j.save():null,j.nextLine()}),S&&(_.modeFrontier=j.line),j}function Bs(g,x,S,_){var C=g.doc.mode,O=new wt(x,g.options.tabSize,S);for(O.start=O.pos=_||0,x==""&&xo(C,S.state);!O.eol();)Mo(C,O,S.state),O.start=O.pos}function xo(g,x){if(g.blankLine)return g.blankLine(x);if(g.innerMode){var S=an(g,x);return S.mode.blankLine?S.mode.blankLine(S.state):void 0}}function Mo(g,x,S,_){for(var C=0;C<10;C++){_&&(_[0]=an(g,S).mode);var O=g.token(x,S);if(x.pos>x.start)return O}throw new Error("Mode "+g.name+" failed to advance stream.")}vi.prototype.lookAhead=function(g){var x=this.doc.getLine(this.line+g);return x!=null&&g>this.maxLookAhead&&(this.maxLookAhead=g),x},vi.prototype.baseToken=function(g){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=g;)this.baseTokenPos+=2;var x=this.baseTokens[this.baseTokenPos+1];return{type:x&&x.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-g}},vi.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},vi.fromSaved=function(g,x,S){return x instanceof Ji?new vi(g,Et(g.mode,x.state),S,x.lookAhead):new vi(g,Et(g.mode,x),S)},vi.prototype.save=function(g){var x=g!==!1?Et(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ji(x,this.maxLookAhead):x};var zs=function(g,x,S){this.start=g.start,this.end=g.pos,this.string=g.current(),this.type=x||null,this.state=S};function po(g,x,S,_){var C,O,N=g.doc,j=N.mode,V=et(N,(x=qt(N,x)).line),W=rs(g,x.line,S),ce=new wt(V.text,g.options.tabSize,W);for(_&&(O=[]);(_||ce.pos<x.ch)&&!ce.eol();)ce.start=ce.pos,C=Mo(j,ce,W.state),_&&O.push(new zs(ce,C,Et(N.mode,W.state)));return _?O:new zs(ce,C,W.state)}function sl(g,x){if(g)for(;;){var S=g.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;g=g.slice(0,S.index)+g.slice(S.index+S[0].length);var _=S[1]?"bgClass":"textClass";x[_]==null?x[_]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(x[_])||(x[_]+=" "+S[2])}return g}function al(g,x,S,_,C,O,N){var j=S.flattenSpans;j==null&&(j=g.options.flattenSpans);var V,W=0,ce=null,fe=new wt(x,g.options.tabSize,_),Se=g.options.addModeClass&&[null];for(x==""&&sl(xo(S,_.state),O);!fe.eol();){if(fe.pos>g.options.maxHighlightLength?(j=!1,N&&Bs(g,x,_,fe.pos),fe.pos=x.length,V=null):V=sl(Mo(S,fe,_.state,Se),O),Se){var be=Se[0].name;be&&(V="m-"+(V?be+" "+V:be))}if(!j||ce!=V){for(;W<fe.start;)C(W=Math.min(fe.start,W+5e3),ce);ce=V}fe.start=fe.pos}for(;W<fe.pos;){var $e=Math.min(fe.pos,W+5e3);C($e,ce),W=$e}}var Cr=!1,Qi=!1;function is(g,x,S){this.marker=g,this.from=x,this.to=S}function Oo(g,x){if(g)for(var S=0;S<g.length;++S){var _=g[S];if(_.marker==x)return _}}function qo(g,x){for(var S,_=0;_<g.length;++_)g[_]!=x&&(S||(S=[])).push(g[_]);return S}function fa(g,x){if(x.full)return null;var S=ci(g,x.from.line)&&et(g,x.from.line).markedSpans,_=ci(g,x.to.line)&&et(g,x.to.line).markedSpans;if(!S&&!_)return null;var C=x.from.ch,O=x.to.ch,N=pt(x.from,x.to)==0,j=function(ct,mt,bn){var Ot;if(ct)for(var Hn=0;Hn<ct.length;++Hn){var fn=ct[Hn],ar=fn.marker;if(fn.from==null||(ar.inclusiveLeft?fn.from<=mt:fn.from<mt)||fn.from==mt&&ar.type=="bookmark"&&(!bn||!fn.marker.insertLeft)){var Nr=fn.to==null||(ar.inclusiveRight?fn.to>=mt:fn.to>mt);(Ot||(Ot=[])).push(new is(ar,fn.from,Nr?null:fn.to))}}return Ot}(S,C,N),V=function(ct,mt,bn){var Ot;if(ct)for(var Hn=0;Hn<ct.length;++Hn){var fn=ct[Hn],ar=fn.marker;if(fn.to==null||(ar.inclusiveRight?fn.to>=mt:fn.to>mt)||fn.from==mt&&ar.type=="bookmark"&&(!bn||fn.marker.insertLeft)){var Nr=fn.from==null||(ar.inclusiveLeft?fn.from<=mt:fn.from<mt);(Ot||(Ot=[])).push(new is(ar,Nr?null:fn.from-mt,fn.to==null?null:fn.to-mt))}}return Ot}(_,O,N),W=x.text.length==1,ce=ie(x.text).length+(W?C:0);if(j)for(var fe=0;fe<j.length;++fe){var Se=j[fe];if(Se.to==null){var be=Oo(V,Se.marker);be?W&&(Se.to=be.to==null?null:be.to+ce):Se.to=C}}if(V)for(var $e=0;$e<V.length;++$e){var Ne=V[$e];Ne.to!=null&&(Ne.to+=ce),Ne.from==null?Oo(j,Ne.marker)||(Ne.from=ce,W&&(j||(j=[])).push(Ne)):(Ne.from+=ce,W&&(j||(j=[])).push(Ne))}j&&(j=Ho(j)),V&&V!=j&&(V=Ho(V));var Oe=[j];if(!W){var Ve,nt=x.text.length-2;if(nt>0&&j)for(var Je=0;Je<j.length;++Je)j[Je].to==null&&(Ve||(Ve=[])).push(new is(j[Je].marker,null,null));for(var gt=0;gt<nt;++gt)Oe.push(Ve);Oe.push(V)}return Oe}function Ho(g){for(var x=0;x<g.length;++x){var S=g[x];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&g.splice(x--,1)}return g.length?g:null}function ll(g){var x=g.markedSpans;if(x){for(var S=0;S<x.length;++S)x[S].marker.detachLine(g);g.markedSpans=null}}function Gi(g,x){if(x){for(var S=0;S<x.length;++S)x[S].marker.attachLine(g);g.markedSpans=x}}function Vi(g){return g.inclusiveLeft?-1:0}function os(g){return g.inclusiveRight?1:0}function go(g,x){var S=g.lines.length-x.lines.length;if(S!=0)return S;var _=g.find(),C=x.find(),O=pt(_.from,C.from)||Vi(g)-Vi(x);if(O)return-O;var N=pt(_.to,C.to)||os(g)-os(x);return N||x.id-g.id}function js(g,x){var S,_=Qi&&g.markedSpans;if(_)for(var C=void 0,O=0;O<_.length;++O)(C=_[O]).marker.collapsed&&(x?C.from:C.to)==null&&(!S||go(S,C.marker)<0)&&(S=C.marker);return S}function Go(g){return js(g,!0)}function fi(g){return js(g,!1)}function Oa(g,x){var S,_=Qi&&g.markedSpans;if(_)for(var C=0;C<_.length;++C){var O=_[C];O.marker.collapsed&&(O.from==null||O.from<x)&&(O.to==null||O.to>x)&&(!S||go(S,O.marker)<0)&&(S=O.marker)}return S}function ss(g,x,S,_,C){var O=et(g,x),N=Qi&&O.markedSpans;if(N)for(var j=0;j<N.length;++j){var V=N[j];if(V.marker.collapsed){var W=V.marker.find(0),ce=pt(W.from,S)||Vi(V.marker)-Vi(C),fe=pt(W.to,_)||os(V.marker)-os(C);if(!(ce>=0&&fe<=0||ce<=0&&fe>=0)&&(ce<=0&&(V.marker.inclusiveRight&&C.inclusiveLeft?pt(W.to,S)>=0:pt(W.to,S)>0)||ce>=0&&(V.marker.inclusiveRight&&C.inclusiveLeft?pt(W.from,_)<=0:pt(W.from,_)<0)))return!0}}}function Wi(g){for(var x;x=Go(g);)g=x.find(-1,!0).line;return g}function as(g,x){var S=et(g,x),_=Wi(S);return S==_?x:jt(_)}function ul(g,x){if(x>g.lastLine())return x;var S,_=et(g,x);if(!Ht(g,_))return x;for(;S=fi(_);)_=S.find(1,!0).line;return jt(_)+1}function Ht(g,x){var S=Qi&&x.markedSpans;if(S){for(var _=void 0,C=0;C<S.length;++C)if((_=S[C]).marker.collapsed&&(_.from==null||!_.marker.widgetNode&&_.from==0&&_.marker.inclusiveLeft&&Z(g,x,_)))return!0}}function Z(g,x,S){if(S.to==null){var _=S.marker.find(1,!0);return Z(g,_.line,Oo(_.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==x.text.length)return!0;for(var C=void 0,O=0;O<x.markedSpans.length;++O)if((C=x.markedSpans[O]).marker.collapsed&&!C.marker.widgetNode&&C.from==S.to&&(C.to==null||C.to!=S.from)&&(C.marker.inclusiveLeft||S.marker.inclusiveRight)&&Z(g,x,C))return!0}function ge(g){for(var x=0,S=(g=Wi(g)).parent,_=0;_<S.lines.length;++_){var C=S.lines[_];if(C==g)break;x+=C.height}for(var O=S.parent;O;O=(S=O).parent)for(var N=0;N<O.children.length;++N){var j=O.children[N];if(j==S)break;x+=j.height}return x}function Be(g){if(g.height==0)return 0;for(var x,S=g.text.length,_=g;x=Go(_);){var C=x.find(0,!0);_=C.from.line,S+=C.from.ch-C.to.ch}for(_=g;x=fi(_);){var O=x.find(0,!0);S-=_.text.length-O.from.ch,S+=(_=O.to.line).text.length-O.to.ch}return S}function yt(g){var x=g.display,S=g.doc;x.maxLine=et(S,S.first),x.maxLineLength=Be(x.maxLine),x.maxLineChanged=!0,S.iter(function(_){var C=Be(_);C>x.maxLineLength&&(x.maxLineLength=C,x.maxLine=_)})}var pn=function(g,x,S){this.text=g,Gi(this,x),this.height=S?S(this):1};function It(g){g.parent=null,ll(g)}pn.prototype.lineNo=function(){return jt(this)},Qt(pn);var In={},dr={};function kr(g,x){if(!g||/^\s*$/.test(g))return null;var S=x.addModeClass?dr:In;return S[g]||(S[g]=g.replace(/\S+/g,"cm-$&"))}function Ln(g,x){var S=te("span",null,null,h?"padding-right: .1px":null),_={pre:te("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:g,trailingSpace:!1,splitSpaces:g.getOption("lineWrapping")};x.measure={};for(var C=0;C<=(x.rest?x.rest.length:0);C++){var O=C?x.rest[C-1]:x.line,N=void 0;_.pos=0,_.addToken=Jr,Or(g.display.measure)&&(N=Ce(O,g.doc.direction))&&(_.addToken=sr(_.addToken,N)),_.map=[],wo(O,_,xs(g,O,x!=g.display.externalMeasured&&jt(O))),O.styleClasses&&(O.styleClasses.bgClass&&(_.bgClass=he(O.styleClasses.bgClass,_.bgClass||"")),O.styleClasses.textClass&&(_.textClass=he(O.styleClasses.textClass,_.textClass||""))),_.map.length==0&&_.map.push(0,0,_.content.appendChild(qn(g.display.measure))),C==0?(x.measure.map=_.map,x.measure.cache={}):((x.measure.maps||(x.measure.maps=[])).push(_.map),(x.measure.caches||(x.measure.caches=[])).push({}))}if(h){var j=_.content.lastChild;(/\bcm-tab\b/.test(j.className)||j.querySelector&&j.querySelector(".cm-tab"))&&(_.content.className="cm-tab-wrap-hack")}return tt(g,"renderLine",g,x.line,_.pre),_.pre.className&&(_.textClass=he(_.pre.className,_.textClass||"")),_}function Ai(g){var x=X("span","","cm-invalidchar");return x.title="\\u"+g.charCodeAt(0).toString(16),x.setAttribute("aria-label",x.title),x}function Jr(g,x,S,_,C,O,N){if(x){var j,V=g.splitSpaces?function(ct,mt){if(ct.length>1&&!/  /.test(ct))return ct;for(var bn=mt,Ot="",Hn=0;Hn<ct.length;Hn++){var fn=ct.charAt(Hn);fn!=" "||!bn||Hn!=ct.length-1&&ct.charCodeAt(Hn+1)!=32||(fn=""),Ot+=fn,bn=fn==" "}return Ot}(x,g.trailingSpace):x,W=g.cm.state.specialChars,ce=!1;if(W.test(x)){j=document.createDocumentFragment();for(var fe=0;;){W.lastIndex=fe;var Se=W.exec(x),be=Se?Se.index-fe:x.length-fe;if(be){var $e=document.createTextNode(V.slice(fe,fe+be));c&&d<9?j.appendChild(X("span",[$e])):j.appendChild($e),g.map.push(g.pos,g.pos+be,$e),g.col+=be,g.pos+=be}if(!Se)break;fe+=be+1;var Ne=void 0;if(Se[0]=="	"){var Oe=g.cm.options.tabSize,Ve=Oe-g.col%Oe;(Ne=j.appendChild(X("span",pe(Ve),"cm-tab"))).setAttribute("role","presentation"),Ne.setAttribute("cm-text","	"),g.col+=Ve}else Se[0]=="\r"||Se[0]==`
`?((Ne=j.appendChild(X("span",Se[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",Se[0]),g.col+=1):((Ne=g.cm.options.specialCharPlaceholder(Se[0])).setAttribute("cm-text",Se[0]),c&&d<9?j.appendChild(X("span",[Ne])):j.appendChild(Ne),g.col+=1);g.map.push(g.pos,g.pos+1,Ne),g.pos++}}else g.col+=x.length,j=document.createTextNode(V),g.map.push(g.pos,g.pos+x.length,j),c&&d<9&&(ce=!0),g.pos+=x.length;if(g.trailingSpace=V.charCodeAt(x.length-1)==32,S||_||C||ce||O||N){var nt=S||"";_&&(nt+=_),C&&(nt+=C);var Je=X("span",[j],nt,O);if(N)for(var gt in N)N.hasOwnProperty(gt)&&gt!="style"&&gt!="class"&&Je.setAttribute(gt,N[gt]);return g.content.appendChild(Je)}g.content.appendChild(j)}}function sr(g,x){return function(S,_,C,O,N,j,V){C=C?C+" cm-force-border":"cm-force-border";for(var W=S.pos,ce=W+_.length;;){for(var fe=void 0,Se=0;Se<x.length&&!((fe=x[Se]).to>W&&fe.from<=W);Se++);if(fe.to>=ce)return g(S,_,C,O,N,j,V);g(S,_.slice(0,fe.to-W),C,O,null,j,V),O=null,_=_.slice(fe.to-W),W=fe.to}}}function di(g,x,S,_){var C=!_&&S.widgetNode;C&&g.map.push(g.pos,g.pos+x,C),!_&&g.cm.display.input.needsContentAttribute&&(C||(C=g.content.appendChild(document.createElement("span"))),C.setAttribute("cm-marker",S.id)),C&&(g.cm.display.input.setUneditable(C),g.content.appendChild(C)),g.pos+=x,g.trailingSpace=!1}function wo(g,x,S){var _=g.markedSpans,C=g.text,O=0;if(_)for(var N,j,V,W,ce,fe,Se,be=C.length,$e=0,Ne=1,Oe="",Ve=0;;){if(Ve==$e){V=W=ce=j="",Se=null,fe=null,Ve=1/0;for(var nt=[],Je=void 0,gt=0;gt<_.length;++gt){var ct=_[gt],mt=ct.marker;if(mt.type=="bookmark"&&ct.from==$e&&mt.widgetNode)nt.push(mt);else if(ct.from<=$e&&(ct.to==null||ct.to>$e||mt.collapsed&&ct.to==$e&&ct.from==$e)){if(ct.to!=null&&ct.to!=$e&&Ve>ct.to&&(Ve=ct.to,W=""),mt.className&&(V+=" "+mt.className),mt.css&&(j=(j?j+";":"")+mt.css),mt.startStyle&&ct.from==$e&&(ce+=" "+mt.startStyle),mt.endStyle&&ct.to==Ve&&(Je||(Je=[])).push(mt.endStyle,ct.to),mt.title&&((Se||(Se={})).title=mt.title),mt.attributes)for(var bn in mt.attributes)(Se||(Se={}))[bn]=mt.attributes[bn];mt.collapsed&&(!fe||go(fe.marker,mt)<0)&&(fe=ct)}else ct.from>$e&&Ve>ct.from&&(Ve=ct.from)}if(Je)for(var Ot=0;Ot<Je.length;Ot+=2)Je[Ot+1]==Ve&&(W+=" "+Je[Ot]);if(!fe||fe.from==$e)for(var Hn=0;Hn<nt.length;++Hn)di(x,0,nt[Hn]);if(fe&&(fe.from||0)==$e){if(di(x,(fe.to==null?be+1:fe.to)-$e,fe.marker,fe.from==null),fe.to==null)return;fe.to==$e&&(fe=!1)}}if($e>=be)break;for(var fn=Math.min(be,Ve);;){if(Oe){var ar=$e+Oe.length;if(!fe){var Nr=ar>fn?Oe.slice(0,fn-$e):Oe;x.addToken(x,Nr,N?N+V:V,ce,$e+Nr.length==Ve?W:"",j,Se)}if(ar>=fn){Oe=Oe.slice(fn-$e),$e=fn;break}$e=ar,ce=""}Oe=C.slice(O,O=S[Ne++]),N=kr(S[Ne++],x.cm.options)}}else for(var lr=1;lr<S.length;lr+=2)x.addToken(x,C.slice(O,O=S[lr]),kr(S[lr+1],x.cm.options))}function Vo(g,x,S){this.line=x,this.rest=function(_){for(var C,O;C=fi(_);)_=C.find(1,!0).line,(O||(O=[])).push(_);return O}(x),this.size=this.rest?jt(ie(this.rest))-S+1:1,this.node=this.text=null,this.hidden=Ht(g,x)}function Bi(g,x,S){for(var _,C=[],O=x;O<S;O=_){var N=new Vo(g.doc,et(g.doc,O),O);_=O+N.size,C.push(N)}return C}var zi=null,ws=null;function Hr(g,x){var S=Me(g,x);if(S.length){var _,C=Array.prototype.slice.call(arguments,2);zi?_=zi.delayedCallbacks:ws?_=ws:(_=ws=[],setTimeout(da,0));for(var O=function(j){_.push(function(){return S[j].apply(null,C)})},N=0;N<S.length;++N)O(N)}}function da(){var g=ws;ws=null;for(var x=0;x<g.length;++x)g[x]()}function Gu(g,x,S,_){for(var C=0;C<x.changes.length;C++){var O=x.changes[C];O=="text"?Vc(g,x):O=="gutter"?ne(g,x,S,_):O=="class"?Vu(g,x):O=="widget"&&_e(g,x,_)}x.changes=null}function cl(g){return g.node==g.text&&(g.node=X("div",null,null,"position: relative"),g.text.parentNode&&g.text.parentNode.replaceChild(g.node,g.text),g.node.appendChild(g.text),c&&d<8&&(g.node.style.zIndex=2)),g.node}function fl(g,x){var S=g.display.externalMeasured;return S&&S.line==x.line?(g.display.externalMeasured=null,x.measure=S.measure,S.built):Ln(g,x)}function Vc(g,x){var S=x.text.className,_=fl(g,x);x.text==x.node&&(x.node=_.pre),x.text.parentNode.replaceChild(_.pre,x.text),x.text=_.pre,_.bgClass!=x.bgClass||_.textClass!=x.textClass?(x.bgClass=_.bgClass,x.textClass=_.textClass,Vu(g,x)):S&&(x.text.className=S)}function Vu(g,x){(function(_,C){var O=C.bgClass?C.bgClass+" "+(C.line.bgClass||""):C.line.bgClass;if(O&&(O+=" CodeMirror-linebackground"),C.background)O?C.background.className=O:(C.background.parentNode.removeChild(C.background),C.background=null);else if(O){var N=cl(C);C.background=N.insertBefore(X("div",null,O),N.firstChild),_.display.input.setUneditable(C.background)}})(g,x),x.line.wrapClass?cl(x).className=x.line.wrapClass:x.node!=x.text&&(x.node.className="");var S=x.textClass?x.textClass+" "+(x.line.textClass||""):x.line.textClass;x.text.className=S||""}function ne(g,x,S,_){if(x.gutter&&(x.node.removeChild(x.gutter),x.gutter=null),x.gutterBackground&&(x.node.removeChild(x.gutterBackground),x.gutterBackground=null),x.line.gutterClass){var C=cl(x);x.gutterBackground=X("div",null,"CodeMirror-gutter-background "+x.line.gutterClass,"left: "+(g.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px; width: "+_.gutterTotalWidth+"px"),g.display.input.setUneditable(x.gutterBackground),C.insertBefore(x.gutterBackground,x.text)}var O=x.line.gutterMarkers;if(g.options.lineNumbers||O){var N=cl(x),j=x.gutter=X("div",null,"CodeMirror-gutter-wrapper","left: "+(g.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px");if(j.setAttribute("aria-hidden","true"),g.display.input.setUneditable(j),N.insertBefore(j,x.text),x.line.gutterClass&&(j.className+=" "+x.line.gutterClass),!g.options.lineNumbers||O&&O["CodeMirror-linenumbers"]||(x.lineNumber=j.appendChild(X("div",Zt(g.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+g.display.lineNumInnerWidth+"px"))),O)for(var V=0;V<g.display.gutterSpecs.length;++V){var W=g.display.gutterSpecs[V].className,ce=O.hasOwnProperty(W)&&O[W];ce&&j.appendChild(X("div",[ce],"CodeMirror-gutter-elt","left: "+_.gutterLeft[W]+"px; width: "+_.gutterWidth[W]+"px"))}}}function _e(g,x,S){x.alignable&&(x.alignable=null);for(var _=$("CodeMirror-linewidget"),C=x.node.firstChild,O=void 0;C;C=O)O=C.nextSibling,_.test(C.className)&&x.node.removeChild(C);bt(g,x,S)}function Ye(g,x,S,_){var C=fl(g,x);return x.text=x.node=C.pre,C.bgClass&&(x.bgClass=C.bgClass),C.textClass&&(x.textClass=C.textClass),Vu(g,x),ne(g,x,S,_),bt(g,x,_),x.node}function bt(g,x,S){if(Jt(g,x.line,x,S,!0),x.rest)for(var _=0;_<x.rest.length;_++)Jt(g,x.rest[_],x,S,!1)}function Jt(g,x,S,_,C){if(x.widgets)for(var O=cl(S),N=0,j=x.widgets;N<j.length;++N){var V=j[N],W=X("div",[V.node],"CodeMirror-linewidget"+(V.className?" "+V.className:""));V.handleMouseEvents||W.setAttribute("cm-ignore-events","true"),Ut(V,W,S,_),g.display.input.setUneditable(W),C&&V.above?O.insertBefore(W,S.gutter||S.text):O.appendChild(W),Hr(V,"redraw")}}function Ut(g,x,S,_){if(g.noHScroll){(S.alignable||(S.alignable=[])).push(x);var C=_.wrapperWidth;x.style.left=_.fixedPos+"px",g.coverGutter||(C-=_.gutterTotalWidth,x.style.paddingLeft=_.gutterTotalWidth+"px"),x.style.width=C+"px"}g.coverGutter&&(x.style.zIndex=5,x.style.position="relative",g.noHScroll||(x.style.marginLeft=-_.gutterTotalWidth+"px"))}function Sn(g){if(g.height!=null)return g.height;var x=g.doc.cm;if(!x)return 0;if(!le(document.body,g.node)){var S="position: relative;";g.coverGutter&&(S+="margin-left: -"+x.display.gutters.offsetWidth+"px;"),g.noHScroll&&(S+="width: "+x.display.wrapper.clientWidth+"px;"),Y(x.display.measure,X("div",[g.node],null,S))}return g.height=g.node.parentNode.offsetHeight}function pr(g,x){for(var S=Er(x);S!=g.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==g.sizer&&S!=g.mover)return!0}function Ir(g){return g.lineSpace.offsetTop}function eo(g){return g.mover.offsetHeight-g.lineSpace.offsetHeight}function _o(g){if(g.cachedPaddingH)return g.cachedPaddingH;var x=Y(g.measure,X("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(x):x.currentStyle,_={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return isNaN(_.left)||isNaN(_.right)||(g.cachedPaddingH=_),_}function xi(g){return 50-g.display.nativeBarWidth}function Li(g){return g.display.scroller.clientWidth-xi(g)-g.display.barWidth}function Te(g){return g.display.scroller.clientHeight-xi(g)-g.display.barHeight}function ut(g,x,S){if(g.line==x)return{map:g.measure.map,cache:g.measure.cache};if(g.rest){for(var _=0;_<g.rest.length;_++)if(g.rest[_]==x)return{map:g.measure.maps[_],cache:g.measure.caches[_]};for(var C=0;C<g.rest.length;C++)if(jt(g.rest[C])>S)return{map:g.measure.maps[C],cache:g.measure.caches[C],before:!0}}}function Wt(g,x,S,_){return Pn(g,gr(g,x),S,_)}function Vn(g,x){if(x>=g.display.viewFrom&&x<g.display.viewTo)return g.display.view[Yc(g,x)];var S=g.display.externalMeasured;return S&&x>=S.lineN&&x<S.lineN+S.size?S:void 0}function gr(g,x){var S=jt(x),_=Vn(g,S);_&&!_.text?_=null:_&&_.changes&&(Gu(g,_,S,K0(g)),g.curOp.forceUpdate=!0),_||(_=function(O,N){var j=jt(N=Wi(N)),V=O.display.externalMeasured=new Vo(O.doc,N,j);V.lineN=j;var W=V.built=Ln(O,V);return V.text=W.pre,Y(O.display.lineMeasure,W.pre),V}(g,x));var C=ut(_,x,S);return{line:x,view:_,rect:null,map:C.map,cache:C.cache,before:C.before,hasHeights:!1}}function Pn(g,x,S,_,C){x.before&&(S=-1);var O,N=S+(_||"");return x.cache.hasOwnProperty(N)?O=x.cache[N]:(x.rect||(x.rect=x.view.text.getBoundingClientRect()),x.hasHeights||(function(j,V,W){var ce=j.options.lineWrapping,fe=ce&&Li(j);if(!V.measure.heights||ce&&V.measure.width!=fe){var Se=V.measure.heights=[];if(ce){V.measure.width=fe;for(var be=V.text.firstChild.getClientRects(),$e=0;$e<be.length-1;$e++){var Ne=be[$e],Oe=be[$e+1];Math.abs(Ne.bottom-Oe.bottom)>2&&Se.push((Ne.bottom+Oe.top)/2-W.top)}}Se.push(W.bottom-W.top)}}(g,x.view,x.rect),x.hasHeights=!0),O=function(j,V,W,ce){var fe,Se=Sv(V.map,W,ce),be=Se.node,$e=Se.start,Ne=Se.end,Oe=Se.collapse;if(be.nodeType==3){for(var Ve=0;Ve<4;Ve++){for(;$e&&Re(V.line.text.charAt(Se.coverStart+$e));)--$e;for(;Se.coverStart+Ne<Se.coverEnd&&Re(V.line.text.charAt(Se.coverStart+Ne));)++Ne;if((fe=c&&d<9&&$e==0&&Ne==Se.coverEnd-Se.coverStart?be.parentNode.getBoundingClientRect():hS(I(be,$e,Ne).getClientRects(),ce)).left||fe.right||$e==0)break;Ne=$e,$e-=1,Oe="right"}c&&d<11&&(fe=function(Nr,lr){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function($n){if(Ni!=null)return Ni;var Br=Y($n,X("span","x")),Fn=Br.getBoundingClientRect(),Jn=I(Br,0,1).getBoundingClientRect();return Ni=Math.abs(Fn.left-Jn.left)>1}(Nr))return lr;var Zn=screen.logicalXDPI/screen.deviceXDPI,ur=screen.logicalYDPI/screen.deviceYDPI;return{left:lr.left*Zn,right:lr.right*Zn,top:lr.top*ur,bottom:lr.bottom*ur}}(j.display.measure,fe))}else{var nt;$e>0&&(Oe=ce="right"),fe=j.options.lineWrapping&&(nt=be.getClientRects()).length>1?nt[ce=="right"?nt.length-1:0]:be.getBoundingClientRect()}if(c&&d<9&&!$e&&(!fe||!fe.left&&!fe.right)){var Je=be.parentNode.getClientRects()[0];fe=Je?{left:Je.left,right:Je.left+ad(j.display),top:Je.top,bottom:Je.bottom}:$a}for(var gt=fe.top-V.rect.top,ct=fe.bottom-V.rect.top,mt=(gt+ct)/2,bn=V.view.measure.heights,Ot=0;Ot<bn.length-1&&!(mt<bn[Ot]);Ot++);var Hn=Ot?bn[Ot-1]:0,fn=bn[Ot],ar={left:(Oe=="right"?fe.right:fe.left)-V.rect.left,right:(Oe=="left"?fe.left:fe.right)-V.rect.left,top:Hn,bottom:fn};return fe.left||fe.right||(ar.bogus=!0),j.options.singleCursorHeightPerLine||(ar.rtop=gt,ar.rbottom=ct),ar}(g,x,S,_),O.bogus||(x.cache[N]=O)),{left:O.left,right:O.right,top:C?O.rtop:O.top,bottom:C?O.rbottom:O.bottom}}var ji,$a={left:0,right:0,top:0,bottom:0};function Sv(g,x,S){for(var _,C,O,N,j,V,W=0;W<g.length;W+=3)if(j=g[W],V=g[W+1],x<j?(C=0,O=1,N="left"):x<V?O=(C=x-j)+1:(W==g.length-3||x==V&&g[W+3]>x)&&(C=(O=V-j)-1,x>=V&&(N="right")),C!=null){if(_=g[W+2],j==V&&S==(_.insertLeft?"left":"right")&&(N=S),S=="left"&&C==0)for(;W&&g[W-2]==g[W-3]&&g[W-1].insertLeft;)_=g[2+(W-=3)],N="left";if(S=="right"&&C==V-j)for(;W<g.length-3&&g[W+3]==g[W+4]&&!g[W+5].insertLeft;)_=g[(W+=3)+2],N="right";break}return{node:_,start:C,end:O,collapse:N,coverStart:j,coverEnd:V}}function hS(g,x){var S=$a;if(x=="left")for(var _=0;_<g.length&&(S=g[_]).left==S.right;_++);else for(var C=g.length-1;C>=0&&(S=g[C]).left==S.right;C--);return S}function Av(g){if(g.measure&&(g.measure.cache={},g.measure.heights=null,g.rest))for(var x=0;x<g.rest.length;x++)g.measure.caches[x]={}}function Cv(g){g.display.externalMeasure=null,q(g.display.lineMeasure);for(var x=0;x<g.display.view.length;x++)Av(g.display.view[x])}function Sh(g){Cv(g),g.display.cachedCharWidth=g.display.cachedTextHeight=g.display.cachedPaddingH=null,g.options.lineWrapping||(g.display.maxLineChanged=!0),g.display.lineNumChars=null}function kv(g){return m&&T?-(g.body.getBoundingClientRect().left-parseInt(getComputedStyle(g.body).marginLeft)):g.defaultView.pageXOffset||(g.documentElement||g.body).scrollLeft}function Tv(g){return m&&T?-(g.body.getBoundingClientRect().top-parseInt(getComputedStyle(g.body).marginTop)):g.defaultView.pageYOffset||(g.documentElement||g.body).scrollTop}function W0(g){var x=Wi(g).widgets,S=0;if(x)for(var _=0;_<x.length;++_)x[_].above&&(S+=Sn(x[_]));return S}function _g(g,x,S,_,C){if(!C){var O=W0(x);S.top+=O,S.bottom+=O}if(_=="line")return S;_||(_="local");var N=ge(x);if(_=="local"?N+=Ir(g.display):N-=g.display.viewOffset,_=="page"||_=="window"){var j=g.display.lineSpace.getBoundingClientRect();N+=j.top+(_=="window"?0:Tv(ze(g)));var V=j.left+(_=="window"?0:kv(ze(g)));S.left+=V,S.right+=V}return S.top+=N,S.bottom+=N,S}function Dv(g,x,S){if(S=="div")return x;var _=x.left,C=x.top;if(S=="page")_-=kv(ze(g)),C-=Tv(ze(g));else if(S=="local"||!S){var O=g.display.sizer.getBoundingClientRect();_+=O.left,C+=O.top}var N=g.display.lineSpace.getBoundingClientRect();return{left:_-N.left,top:C-N.top}}function Eg(g,x,S,_,C){return _||(_=et(g.doc,x.line)),_g(g,_,Wt(g,_,x.ch,C),S)}function dl(g,x,S,_,C,O){function N($e,Ne){var Oe=Pn(g,C,$e,Ne?"right":"left",O);return Ne?Oe.left=Oe.right:Oe.right=Oe.left,_g(g,_,Oe,S)}_=_||et(g.doc,x.line),C||(C=gr(g,_));var j=Ce(_,g.doc.direction),V=x.ch,W=x.sticky;if(V>=_.text.length?(V=_.text.length,W="before"):V<=0&&(V=0,W="after"),!j)return N(W=="before"?V-1:V,W=="before");function ce($e,Ne,Oe){return N(Oe?$e-1:$e,j[Ne].level==1!=Oe)}var fe=ae(j,V,W),Se=oe,be=ce(V,fe,W=="before");return Se!=null&&(be.other=ce(V,Se,W!="before")),be}function Lv(g,x){var S=0;x=qt(g.doc,x),g.options.lineWrapping||(S=ad(g.display)*x.ch);var _=et(g.doc,x.line),C=ge(_)+Ir(g.display);return{left:S,right:S,top:C,bottom:C+_.height}}function Y0(g,x,S,_,C){var O=Xe(g,x,S);return O.xRel=C,_&&(O.outside=_),O}function X0(g,x,S){var _=g.doc;if((S+=g.display.viewOffset)<0)return Y0(_.first,0,null,-1,-1);var C=Sr(_,S),O=_.first+_.size-1;if(C>O)return Y0(_.first+_.size-1,et(_,O).text.length,null,1,1);x<0&&(x=0);for(var N=et(_,C);;){var j=pS(g,N,C,x,S),V=Oa(N,j.ch+(j.xRel>0||j.outside>0?1:0));if(!V)return j;var W=V.find(1);if(W.line==C)return W;N=et(_,C=W.line)}}function Rv(g,x,S,_){_-=W0(x);var C=x.text.length,O=Q(function(N){return Pn(g,S,N-1).bottom<=_},C,0);return{begin:O,end:C=Q(function(N){return Pn(g,S,N).top>_},O,C)}}function Fv(g,x,S,_){return S||(S=gr(g,x)),Rv(g,x,S,_g(g,x,Pn(g,S,_),"line").top)}function Z0(g,x,S,_){return!(g.bottom<=S)&&(g.top>S||(_?g.left:g.right)>x)}function pS(g,x,S,_,C){C-=ge(x);var O=gr(g,x),N=W0(x),j=0,V=x.text.length,W=!0,ce=Ce(x,g.doc.direction);if(ce){var fe=(g.options.lineWrapping?mS:gS)(g,x,S,O,ce,_,C);j=(W=fe.level!=1)?fe.from:fe.to-1,V=W?fe.to:fe.from-1}var Se,be,$e=null,Ne=null,Oe=Q(function(ct){var mt=Pn(g,O,ct);return mt.top+=N,mt.bottom+=N,!!Z0(mt,_,C,!1)&&(mt.top<=C&&mt.left<=_&&($e=ct,Ne=mt),!0)},j,V),Ve=!1;if(Ne){var nt=_-Ne.left<Ne.right-_,Je=nt==W;Oe=$e+(Je?0:1),be=Je?"after":"before",Se=nt?Ne.left:Ne.right}else{W||Oe!=V&&Oe!=j||Oe++,be=Oe==0?"after":Oe==x.text.length?"before":Pn(g,O,Oe-(W?1:0)).bottom+N<=C==W?"after":"before";var gt=dl(g,Xe(S,Oe,be),"line",x,O);Se=gt.left,Ve=C<gt.top?-1:C>=gt.bottom?1:0}return Y0(S,Oe=P(x.text,Oe,1),be,Ve,_-Se)}function gS(g,x,S,_,C,O,N){var j=Q(function(fe){var Se=C[fe],be=Se.level!=1;return Z0(dl(g,Xe(S,be?Se.to:Se.from,be?"before":"after"),"line",x,_),O,N,!0)},0,C.length-1),V=C[j];if(j>0){var W=V.level!=1,ce=dl(g,Xe(S,W?V.from:V.to,W?"after":"before"),"line",x,_);Z0(ce,O,N,!0)&&ce.top>N&&(V=C[j-1])}return V}function mS(g,x,S,_,C,O,N){var j=Rv(g,x,_,N),V=j.begin,W=j.end;/\s/.test(x.text.charAt(W-1))&&W--;for(var ce=null,fe=null,Se=0;Se<C.length;Se++){var be=C[Se];if(!(be.from>=W||be.to<=V)){var $e=Pn(g,_,be.level!=1?Math.min(W,be.to)-1:Math.max(V,be.from)).right,Ne=$e<O?O-$e+1e9:$e-O;(!ce||fe>Ne)&&(ce=be,fe=Ne)}}return ce||(ce=C[C.length-1]),ce.from<V&&(ce={from:V,to:ce.to,level:ce.level}),ce.to>W&&(ce={from:ce.from,to:W,level:ce.level}),ce}function sd(g){if(g.cachedTextHeight!=null)return g.cachedTextHeight;if(ji==null){ji=X("pre",null,"CodeMirror-line-like");for(var x=0;x<49;++x)ji.appendChild(document.createTextNode("x")),ji.appendChild(X("br"));ji.appendChild(document.createTextNode("x"))}Y(g.measure,ji);var S=ji.offsetHeight/50;return S>3&&(g.cachedTextHeight=S),q(g.measure),S||1}function ad(g){if(g.cachedCharWidth!=null)return g.cachedCharWidth;var x=X("span","xxxxxxxxxx"),S=X("pre",[x],"CodeMirror-line-like");Y(g.measure,S);var _=x.getBoundingClientRect(),C=(_.right-_.left)/10;return C>2&&(g.cachedCharWidth=C),C||10}function K0(g){for(var x=g.display,S={},_={},C=x.gutters.clientLeft,O=x.gutters.firstChild,N=0;O;O=O.nextSibling,++N){var j=g.display.gutterSpecs[N].className;S[j]=O.offsetLeft+O.clientLeft+C,_[j]=O.clientWidth}return{fixedPos:J0(x),gutterTotalWidth:x.gutters.offsetWidth,gutterLeft:S,gutterWidth:_,wrapperWidth:x.wrapper.clientWidth}}function J0(g){return g.scroller.getBoundingClientRect().left-g.sizer.getBoundingClientRect().left}function Mv(g){var x=sd(g.display),S=g.options.lineWrapping,_=S&&Math.max(5,g.display.scroller.clientWidth/ad(g.display)-3);return function(C){if(Ht(g.doc,C))return 0;var O=0;if(C.widgets)for(var N=0;N<C.widgets.length;N++)C.widgets[N].height&&(O+=C.widgets[N].height);return S?O+(Math.ceil(C.text.length/_)||1)*x:O+x}}function Q0(g){var x=g.doc,S=Mv(g);x.iter(function(_){var C=S(_);C!=_.height&&zt(_,C)})}function Wc(g,x,S,_){var C=g.display;if(!S&&Er(x).getAttribute("cm-not-content")=="true")return null;var O,N,j=C.lineSpace.getBoundingClientRect();try{O=x.clientX-j.left,N=x.clientY-j.top}catch{return null}var V,W=X0(g,O,N);if(_&&W.xRel>0&&(V=et(g.doc,W.line).text).length==W.ch){var ce=Ie(V,V.length,g.options.tabSize)-V.length;W=Xe(W.line,Math.max(0,Math.round((O-_o(g.display).left)/ad(g.display))-ce))}return W}function Yc(g,x){if(x>=g.display.viewTo||(x-=g.display.viewFrom)<0)return null;for(var S=g.display.view,_=0;_<S.length;_++)if((x-=S[_].size)<0)return _}function _s(g,x,S,_){x==null&&(x=g.doc.first),S==null&&(S=g.doc.first+g.doc.size),_||(_=0);var C=g.display;if(_&&S<C.viewTo&&(C.updateLineNumbers==null||C.updateLineNumbers>x)&&(C.updateLineNumbers=x),g.curOp.viewChanged=!0,x>=C.viewTo)Qi&&as(g.doc,x)<C.viewTo&&Yu(g);else if(S<=C.viewFrom)Qi&&ul(g.doc,S+_)>C.viewFrom?Yu(g):(C.viewFrom+=_,C.viewTo+=_);else if(x<=C.viewFrom&&S>=C.viewTo)Yu(g);else if(x<=C.viewFrom){var O=Sg(g,S,S+_,1);O?(C.view=C.view.slice(O.index),C.viewFrom=O.lineN,C.viewTo+=_):Yu(g)}else if(S>=C.viewTo){var N=Sg(g,x,x,-1);N?(C.view=C.view.slice(0,N.index),C.viewTo=N.lineN):Yu(g)}else{var j=Sg(g,x,x,-1),V=Sg(g,S,S+_,1);j&&V?(C.view=C.view.slice(0,j.index).concat(Bi(g,j.lineN,V.lineN)).concat(C.view.slice(V.index)),C.viewTo+=_):Yu(g)}var W=C.externalMeasured;W&&(S<W.lineN?W.lineN+=_:x<W.lineN+W.size&&(C.externalMeasured=null))}function Wu(g,x,S){g.curOp.viewChanged=!0;var _=g.display,C=g.display.externalMeasured;if(C&&x>=C.lineN&&x<C.lineN+C.size&&(_.externalMeasured=null),!(x<_.viewFrom||x>=_.viewTo)){var O=_.view[Yc(g,x)];if(O.node!=null){var N=O.changes||(O.changes=[]);Pe(N,S)==-1&&N.push(S)}}}function Yu(g){g.display.viewFrom=g.display.viewTo=g.doc.first,g.display.view=[],g.display.viewOffset=0}function Sg(g,x,S,_){var C,O=Yc(g,x),N=g.display.view;if(!Qi||S==g.doc.first+g.doc.size)return{index:O,lineN:S};for(var j=g.display.viewFrom,V=0;V<O;V++)j+=N[V].size;if(j!=x){if(_>0){if(O==N.length-1)return null;C=j+N[O].size-x,O++}else C=j-x;x+=C,S+=C}for(;as(g.doc,S)!=S;){if(O==(_<0?0:N.length-1))return null;S+=_*N[O-(_<0?1:0)].size,O+=_}return{index:O,lineN:S}}function Ov(g){for(var x=g.display.view,S=0,_=0;_<x.length;_++){var C=x[_];C.hidden||C.node&&!C.changes||++S}return S}function Ah(g){g.display.input.showSelection(g.display.input.prepareSelection())}function $v(g,x){x===void 0&&(x=!0);var S=g.doc,_={},C=_.cursors=document.createDocumentFragment(),O=_.selection=document.createDocumentFragment(),N=g.options.$customCursor;N&&(x=!0);for(var j=0;j<S.sel.ranges.length;j++)if(x||j!=S.sel.primIndex){var V=S.sel.ranges[j];if(!(V.from().line>=g.display.viewTo||V.to().line<g.display.viewFrom)){var W=V.empty();if(N){var ce=N(g,V);ce&&ey(g,ce,C)}else(W||g.options.showCursorWhenSelecting)&&ey(g,V.head,C);W||yS(g,V,O)}}return _}function ey(g,x,S){var _=dl(g,x,"div",null,null,!g.options.singleCursorHeightPerLine),C=S.appendChild(X("div","","CodeMirror-cursor"));if(C.style.left=_.left+"px",C.style.top=_.top+"px",C.style.height=Math.max(0,_.bottom-_.top)*g.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(g.getWrapperElement().className)){var O=Eg(g,x,"div",null,null),N=O.right-O.left;C.style.width=(N>0?N:g.defaultCharWidth())+"px"}if(_.other){var j=S.appendChild(X("div","","CodeMirror-cursor CodeMirror-secondarycursor"));j.style.display="",j.style.left=_.other.left+"px",j.style.top=_.other.top+"px",j.style.height=.85*(_.other.bottom-_.other.top)+"px"}}function Ag(g,x){return g.top-x.top||g.left-x.left}function yS(g,x,S){var _=g.display,C=g.doc,O=document.createDocumentFragment(),N=_o(g.display),j=N.left,V=Math.max(_.sizerWidth,Li(g)-_.sizer.offsetLeft)-N.right,W=C.direction=="ltr";function ce(Je,gt,ct,mt){gt<0&&(gt=0),gt=Math.round(gt),mt=Math.round(mt),O.appendChild(X("div",null,"CodeMirror-selected","position: absolute; left: "+Je+`px;
                             top: `+gt+"px; width: "+(ct??V-Je)+`px;
                             height: `+(mt-gt)+"px"))}function fe(Je,gt,ct){var mt,bn,Ot=et(C,Je),Hn=Ot.text.length;function fn(lr,Zn){return Eg(g,Xe(Je,lr),"div",Ot,Zn)}function ar(lr,Zn,ur){var $n=Fv(g,Ot,null,lr),Br=Zn=="ltr"==(ur=="after")?"left":"right";return fn(ur=="after"?$n.begin:$n.end-(/\s/.test(Ot.text.charAt($n.end-1))?2:1),Br)[Br]}var Nr=Ce(Ot,C.direction);return function(lr,Zn,ur,$n){if(!lr)return $n(Zn,ur,"ltr",0);for(var Br=!1,Fn=0;Fn<lr.length;++Fn){var Jn=lr[Fn];(Jn.from<ur&&Jn.to>Zn||Zn==ur&&Jn.to==Zn)&&($n(Math.max(Jn.from,Zn),Math.min(Jn.to,ur),Jn.level==1?"rtl":"ltr",Fn),Br=!0)}Br||$n(Zn,ur,"ltr")}(Nr,gt||0,ct??Hn,function(lr,Zn,ur,$n){var Br=ur=="ltr",Fn=fn(lr,Br?"left":"right"),Jn=fn(Zn-1,Br?"right":"left"),Nn=gt==null&&lr==0,br=ct==null&&Zn==Hn,us=$n==0,zr=!Nr||$n==Nr.length-1;if(Jn.top-Fn.top<=3){var Yo=(W?br:Nn)&&zr,Xo=(W?Nn:br)&&us?j:(Br?Fn:Jn).left,Ci=Yo?V:(Br?Jn:Fn).right;ce(Xo,Fn.top,Ci-Xo,Fn.bottom)}else{var cs,Ia,$o,gl;Br?(cs=W&&Nn&&us?j:Fn.left,Ia=W?V:ar(lr,ur,"before"),$o=W?j:ar(Zn,ur,"after"),gl=W&&br&&zr?V:Jn.right):(cs=W?ar(lr,ur,"before"):j,Ia=!W&&Nn&&us?V:Fn.right,$o=!W&&br&&zr?j:Jn.left,gl=W?ar(Zn,ur,"after"):V),ce(cs,Fn.top,Ia-cs,Fn.bottom),Fn.bottom<Jn.top&&ce(j,Fn.bottom,null,Jn.top),ce($o,Jn.top,gl-$o,Jn.bottom)}(!mt||Ag(Fn,mt)<0)&&(mt=Fn),Ag(Jn,mt)<0&&(mt=Jn),(!bn||Ag(Fn,bn)<0)&&(bn=Fn),Ag(Jn,bn)<0&&(bn=Jn)}),{start:mt,end:bn}}var Se=x.from(),be=x.to();if(Se.line==be.line)fe(Se.line,Se.ch,be.ch);else{var $e=et(C,Se.line),Ne=et(C,be.line),Oe=Wi($e)==Wi(Ne),Ve=fe(Se.line,Se.ch,Oe?$e.text.length+1:null).end,nt=fe(be.line,Oe?0:null,be.ch).start;Oe&&(Ve.top<nt.top-2?(ce(Ve.right,Ve.top,null,Ve.bottom),ce(j,nt.top,nt.left,nt.bottom)):ce(Ve.right,Ve.top,nt.left-Ve.right,Ve.bottom)),Ve.bottom<nt.top&&ce(j,Ve.bottom,null,nt.top)}S.appendChild(O)}function ty(g){if(g.state.focused){var x=g.display;clearInterval(x.blinker);var S=!0;x.cursorDiv.style.visibility="",g.options.cursorBlinkRate>0?x.blinker=setInterval(function(){g.hasFocus()||ld(g),x.cursorDiv.style.visibility=(S=!S)?"":"hidden"},g.options.cursorBlinkRate):g.options.cursorBlinkRate<0&&(x.cursorDiv.style.visibility="hidden")}}function Iv(g){g.hasFocus()||(g.display.input.focus(),g.state.focused||ry(g))}function ny(g){g.state.delayingBlurEvent=!0,setTimeout(function(){g.state.delayingBlurEvent&&(g.state.delayingBlurEvent=!1,g.state.focused&&ld(g))},100)}function ry(g,x){g.state.delayingBlurEvent&&!g.state.draggingText&&(g.state.delayingBlurEvent=!1),g.options.readOnly!="nocursor"&&(g.state.focused||(tt(g,"focus",g,x),g.state.focused=!0,z(g.display.wrapper,"CodeMirror-focused"),g.curOp||g.display.selForContextMenu==g.doc.sel||(g.display.input.reset(),h&&setTimeout(function(){return g.display.input.reset(!0)},20)),g.display.input.receivedFocus()),ty(g))}function ld(g,x){g.state.delayingBlurEvent||(g.state.focused&&(tt(g,"blur",g,x),g.state.focused=!1,U(g.display.wrapper,"CodeMirror-focused")),clearInterval(g.display.blinker),setTimeout(function(){g.state.focused||(g.display.shift=!1)},150))}function Cg(g){for(var x=g.display,S=x.lineDiv.offsetTop,_=Math.max(0,x.scroller.getBoundingClientRect().top),C=x.lineDiv.getBoundingClientRect().top,O=0,N=0;N<x.view.length;N++){var j=x.view[N],V=g.options.lineWrapping,W=void 0,ce=0;if(!j.hidden){if(C+=j.line.height,c&&d<8){var fe=j.node.offsetTop+j.node.offsetHeight;W=fe-S,S=fe}else{var Se=j.node.getBoundingClientRect();W=Se.bottom-Se.top,!V&&j.text.firstChild&&(ce=j.text.firstChild.getBoundingClientRect().right-Se.left-1)}var be=j.line.height-W;if((be>.005||be<-.005)&&(C<_&&(O-=be),zt(j.line,W),Pv(j.line),j.rest))for(var $e=0;$e<j.rest.length;$e++)Pv(j.rest[$e]);if(ce>g.display.sizerWidth){var Ne=Math.ceil(ce/ad(g.display));Ne>g.display.maxLineLength&&(g.display.maxLineLength=Ne,g.display.maxLine=j.line,g.display.maxLineChanged=!0)}}}Math.abs(O)>2&&(x.scroller.scrollTop+=O)}function Pv(g){if(g.widgets)for(var x=0;x<g.widgets.length;++x){var S=g.widgets[x],_=S.node.parentNode;_&&(S.height=_.offsetHeight)}}function kg(g,x,S){var _=S&&S.top!=null?Math.max(0,S.top):g.scroller.scrollTop;_=Math.floor(_-Ir(g));var C=S&&S.bottom!=null?S.bottom:_+g.wrapper.clientHeight,O=Sr(x,_),N=Sr(x,C);if(S&&S.ensure){var j=S.ensure.from.line,V=S.ensure.to.line;j<O?(O=j,N=Sr(x,ge(et(x,j))+g.wrapper.clientHeight)):Math.min(V,x.lastLine())>=N&&(O=Sr(x,ge(et(x,V))-g.wrapper.clientHeight),N=V)}return{from:O,to:Math.max(N,O+1)}}function iy(g,x){var S=g.display,_=sd(g.display);x.top<0&&(x.top=0);var C=g.curOp&&g.curOp.scrollTop!=null?g.curOp.scrollTop:S.scroller.scrollTop,O=Te(g),N={};x.bottom-x.top>O&&(x.bottom=x.top+O);var j=g.doc.height+eo(S),V=x.top<_,W=x.bottom>j-_;if(x.top<C)N.scrollTop=V?0:x.top;else if(x.bottom>C+O){var ce=Math.min(x.top,(W?j:x.bottom)-O);ce!=C&&(N.scrollTop=ce)}var fe=g.options.fixedGutter?0:S.gutters.offsetWidth,Se=g.curOp&&g.curOp.scrollLeft!=null?g.curOp.scrollLeft:S.scroller.scrollLeft-fe,be=Li(g)-S.gutters.offsetWidth,$e=x.right-x.left>be;return $e&&(x.right=x.left+be),x.left<10?N.scrollLeft=0:x.left<Se?N.scrollLeft=Math.max(0,x.left+fe-($e?0:10)):x.right>be+Se-3&&(N.scrollLeft=x.right+($e?0:10)-be),N}function oy(g,x){x!=null&&(Tg(g),g.curOp.scrollTop=(g.curOp.scrollTop==null?g.doc.scrollTop:g.curOp.scrollTop)+x)}function ud(g){Tg(g);var x=g.getCursor();g.curOp.scrollToPos={from:x,to:x,margin:g.options.cursorScrollMargin}}function Ch(g,x,S){x==null&&S==null||Tg(g),x!=null&&(g.curOp.scrollLeft=x),S!=null&&(g.curOp.scrollTop=S)}function Tg(g){var x=g.curOp.scrollToPos;x&&(g.curOp.scrollToPos=null,Nv(g,Lv(g,x.from),Lv(g,x.to),x.margin))}function Nv(g,x,S,_){var C=iy(g,{left:Math.min(x.left,S.left),top:Math.min(x.top,S.top)-_,right:Math.max(x.right,S.right),bottom:Math.max(x.bottom,S.bottom)+_});Ch(g,C.scrollLeft,C.scrollTop)}function kh(g,x){Math.abs(g.doc.scrollTop-x)<2||(a||ay(g,{top:x}),Bv(g,x,!0),a&&ay(g),Lh(g,100))}function Bv(g,x,S){x=Math.max(0,Math.min(g.display.scroller.scrollHeight-g.display.scroller.clientHeight,x)),(g.display.scroller.scrollTop!=x||S)&&(g.doc.scrollTop=x,g.display.scrollbars.setScrollTop(x),g.display.scroller.scrollTop!=x&&(g.display.scroller.scrollTop=x))}function Xc(g,x,S,_){x=Math.max(0,Math.min(x,g.display.scroller.scrollWidth-g.display.scroller.clientWidth)),(S?x==g.doc.scrollLeft:Math.abs(g.doc.scrollLeft-x)<2)&&!_||(g.doc.scrollLeft=x,Hv(g),g.display.scroller.scrollLeft!=x&&(g.display.scroller.scrollLeft=x),g.display.scrollbars.setScrollLeft(x))}function Th(g){var x=g.display,S=x.gutters.offsetWidth,_=Math.round(g.doc.height+eo(g.display));return{clientHeight:x.scroller.clientHeight,viewHeight:x.wrapper.clientHeight,scrollWidth:x.scroller.scrollWidth,clientWidth:x.scroller.clientWidth,viewWidth:x.wrapper.clientWidth,barLeft:g.options.fixedGutter?S:0,docHeight:_,scrollHeight:_+xi(g)+x.barHeight,nativeBarWidth:x.nativeBarWidth,gutterWidth:S}}var Zc=function(g,x,S){this.cm=S;var _=this.vert=X("div",[X("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),C=this.horiz=X("div",[X("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");_.tabIndex=C.tabIndex=-1,g(_),g(C),De(_,"scroll",function(){_.clientHeight&&x(_.scrollTop,"vertical")}),De(C,"scroll",function(){C.clientWidth&&x(C.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Zc.prototype.update=function(g){var x=g.scrollWidth>g.clientWidth+1,S=g.scrollHeight>g.clientHeight+1,_=g.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=x?_+"px":"0";var C=g.viewHeight-(x?_:0);this.vert.firstChild.style.height=Math.max(0,g.scrollHeight-g.clientHeight+C)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(x){this.horiz.style.display="block",this.horiz.style.right=S?_+"px":"0",this.horiz.style.left=g.barLeft+"px";var O=g.viewWidth-g.barLeft-(S?_:0);this.horiz.firstChild.style.width=Math.max(0,g.scrollWidth-g.clientWidth+O)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&g.clientHeight>0&&(_==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?_:0,bottom:x?_:0}},Zc.prototype.setScrollLeft=function(g){this.horiz.scrollLeft!=g&&(this.horiz.scrollLeft=g),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Zc.prototype.setScrollTop=function(g){this.vert.scrollTop!=g&&(this.vert.scrollTop=g),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Zc.prototype.zeroWidthHack=function(){var g=k&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=g,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new qe,this.disableVert=new qe},Zc.prototype.enableZeroWidthBar=function(g,x,S){g.style.visibility="",x.set(1e3,function _(){var C=g.getBoundingClientRect();(S=="vert"?document.elementFromPoint(C.right-1,(C.top+C.bottom)/2):document.elementFromPoint((C.right+C.left)/2,C.bottom-1))!=g?g.style.visibility="hidden":x.set(1e3,_)})},Zc.prototype.clear=function(){var g=this.horiz.parentNode;g.removeChild(this.horiz),g.removeChild(this.vert)};var Dh=function(){};function cd(g,x){x||(x=Th(g));var S=g.display.barWidth,_=g.display.barHeight;zv(g,x);for(var C=0;C<4&&S!=g.display.barWidth||_!=g.display.barHeight;C++)S!=g.display.barWidth&&g.options.lineWrapping&&Cg(g),zv(g,Th(g)),S=g.display.barWidth,_=g.display.barHeight}function zv(g,x){var S=g.display,_=S.scrollbars.update(x);S.sizer.style.paddingRight=(S.barWidth=_.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=_.bottom)+"px",S.heightForcer.style.borderBottom=_.bottom+"px solid transparent",_.right&&_.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=_.bottom+"px",S.scrollbarFiller.style.width=_.right+"px"):S.scrollbarFiller.style.display="",_.bottom&&g.options.coverGutterNextToScrollbar&&g.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=_.bottom+"px",S.gutterFiller.style.width=x.gutterWidth+"px"):S.gutterFiller.style.display=""}Dh.prototype.update=function(){return{bottom:0,right:0}},Dh.prototype.setScrollLeft=function(){},Dh.prototype.setScrollTop=function(){},Dh.prototype.clear=function(){};var jv={native:Zc,null:Dh};function Uv(g){g.display.scrollbars&&(g.display.scrollbars.clear(),g.display.scrollbars.addClass&&U(g.display.wrapper,g.display.scrollbars.addClass)),g.display.scrollbars=new jv[g.options.scrollbarStyle](function(x){g.display.wrapper.insertBefore(x,g.display.scrollbarFiller),De(x,"mousedown",function(){g.state.focused&&setTimeout(function(){return g.display.input.focus()},0)}),x.setAttribute("cm-not-content","true")},function(x,S){S=="horizontal"?Xc(g,x):kh(g,x)},g),g.display.scrollbars.addClass&&z(g.display.wrapper,g.display.scrollbars.addClass)}var bS=0;function Kc(g){var x;g.curOp={cm:g,viewChanged:!1,startHeight:g.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++bS,markArrays:null},x=g.curOp,zi?zi.ops.push(x):x.ownsGroup=zi={ops:[x],delayedCallbacks:[]}}function Jc(g){var x=g.curOp;x&&function(S,_){var C=S.ownsGroup;if(C)try{(function(O){var N=O.delayedCallbacks,j=0;do{for(;j<N.length;j++)N[j].call(null);for(var V=0;V<O.ops.length;V++){var W=O.ops[V];if(W.cursorActivityHandlers)for(;W.cursorActivityCalled<W.cursorActivityHandlers.length;)W.cursorActivityHandlers[W.cursorActivityCalled++].call(null,W.cm)}}while(j<N.length)})(C)}finally{zi=null,_(C)}}(x,function(S){for(var _=0;_<S.ops.length;_++)S.ops[_].cm.curOp=null;(function(C){for(var O=C.ops,N=0;N<O.length;N++)vS(O[N]);for(var j=0;j<O.length;j++)xS(O[j]);for(var V=0;V<O.length;V++)wS(O[V]);for(var W=0;W<O.length;W++)_S(O[W]);for(var ce=0;ce<O.length;ce++)ES(O[ce])})(S)})}function vS(g){var x=g.cm,S=x.display;(function(_){var C=_.display;!C.scrollbarsClipped&&C.scroller.offsetWidth&&(C.nativeBarWidth=C.scroller.offsetWidth-C.scroller.clientWidth,C.heightForcer.style.height=xi(_)+"px",C.sizer.style.marginBottom=-C.nativeBarWidth+"px",C.sizer.style.borderRightWidth=xi(_)+"px",C.scrollbarsClipped=!0)})(x),g.updateMaxLine&&yt(x),g.mustUpdate=g.viewChanged||g.forceUpdate||g.scrollTop!=null||g.scrollToPos&&(g.scrollToPos.from.line<S.viewFrom||g.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&x.options.lineWrapping,g.update=g.mustUpdate&&new Dg(x,g.mustUpdate&&{top:g.scrollTop,ensure:g.scrollToPos},g.forceUpdate)}function xS(g){g.updatedDisplay=g.mustUpdate&&sy(g.cm,g.update)}function wS(g){var x=g.cm,S=x.display;g.updatedDisplay&&Cg(x),g.barMeasure=Th(x),S.maxLineChanged&&!x.options.lineWrapping&&(g.adjustWidthTo=Wt(x,S.maxLine,S.maxLine.text.length).left+3,x.display.sizerWidth=g.adjustWidthTo,g.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+g.adjustWidthTo+xi(x)+x.display.barWidth),g.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+g.adjustWidthTo-Li(x))),(g.updatedDisplay||g.selectionChanged)&&(g.preparedSelection=S.input.prepareSelection())}function _S(g){var x=g.cm;g.adjustWidthTo!=null&&(x.display.sizer.style.minWidth=g.adjustWidthTo+"px",g.maxScrollLeft<x.doc.scrollLeft&&Xc(x,Math.min(x.display.scroller.scrollLeft,g.maxScrollLeft),!0),x.display.maxLineChanged=!1);var S=g.focus&&g.focus==ee(ze(x));g.preparedSelection&&x.display.input.showSelection(g.preparedSelection,S),(g.updatedDisplay||g.startHeight!=x.doc.height)&&cd(x,g.barMeasure),g.updatedDisplay&&uy(x,g.barMeasure),g.selectionChanged&&ty(x),x.state.focused&&g.updateInput&&x.display.input.reset(g.typing),S&&Iv(g.cm)}function ES(g){var x=g.cm,S=x.display,_=x.doc;if(g.updatedDisplay&&qv(x,g.update),S.wheelStartX==null||g.scrollTop==null&&g.scrollLeft==null&&!g.scrollToPos||(S.wheelStartX=S.wheelStartY=null),g.scrollTop!=null&&Bv(x,g.scrollTop,g.forceScroll),g.scrollLeft!=null&&Xc(x,g.scrollLeft,!0,!0),g.scrollToPos){var C=function(W,ce,fe,Se){var be;Se==null&&(Se=0),W.options.lineWrapping||ce!=fe||(fe=ce.sticky=="before"?Xe(ce.line,ce.ch+1,"before"):ce,ce=ce.ch?Xe(ce.line,ce.sticky=="before"?ce.ch-1:ce.ch,"after"):ce);for(var $e=0;$e<5;$e++){var Ne=!1,Oe=dl(W,ce),Ve=fe&&fe!=ce?dl(W,fe):Oe,nt=iy(W,be={left:Math.min(Oe.left,Ve.left),top:Math.min(Oe.top,Ve.top)-Se,right:Math.max(Oe.left,Ve.left),bottom:Math.max(Oe.bottom,Ve.bottom)+Se}),Je=W.doc.scrollTop,gt=W.doc.scrollLeft;if(nt.scrollTop!=null&&(kh(W,nt.scrollTop),Math.abs(W.doc.scrollTop-Je)>1&&(Ne=!0)),nt.scrollLeft!=null&&(Xc(W,nt.scrollLeft),Math.abs(W.doc.scrollLeft-gt)>1&&(Ne=!0)),!Ne)break}return be}(x,qt(_,g.scrollToPos.from),qt(_,g.scrollToPos.to),g.scrollToPos.margin);(function(W,ce){if(!dt(W,"scrollCursorIntoView")){var fe=W.display,Se=fe.sizer.getBoundingClientRect(),be=null,$e=fe.wrapper.ownerDocument;if(ce.top+Se.top<0?be=!0:ce.bottom+Se.top>($e.defaultView.innerHeight||$e.documentElement.clientHeight)&&(be=!1),be!=null&&!E){var Ne=X("div","",null,`position: absolute;
                         top: `+(ce.top-fe.viewOffset-Ir(W.display))+`px;
                         height: `+(ce.bottom-ce.top+xi(W)+fe.barHeight)+`px;
                         left: `+ce.left+"px; width: "+Math.max(2,ce.right-ce.left)+"px;");W.display.lineSpace.appendChild(Ne),Ne.scrollIntoView(be),W.display.lineSpace.removeChild(Ne)}}})(x,C)}var O=g.maybeHiddenMarkers,N=g.maybeUnhiddenMarkers;if(O)for(var j=0;j<O.length;++j)O[j].lines.length||tt(O[j],"hide");if(N)for(var V=0;V<N.length;++V)N[V].lines.length&&tt(N[V],"unhide");S.wrapper.offsetHeight&&(_.scrollTop=x.display.scroller.scrollTop),g.changeObjs&&tt(x,"changes",x,g.changeObjs),g.update&&g.update.finish()}function Us(g,x){if(g.curOp)return x();Kc(g);try{return x()}finally{Jc(g)}}function Eo(g,x){return function(){if(g.curOp)return x.apply(g,arguments);Kc(g);try{return x.apply(g,arguments)}finally{Jc(g)}}}function ls(g){return function(){if(this.curOp)return g.apply(this,arguments);Kc(this);try{return g.apply(this,arguments)}finally{Jc(this)}}}function So(g){return function(){var x=this.cm;if(!x||x.curOp)return g.apply(this,arguments);Kc(x);try{return g.apply(this,arguments)}finally{Jc(x)}}}function Lh(g,x){g.doc.highlightFrontier<g.display.viewTo&&g.state.highlight.set(x,je(SS,g))}function SS(g){var x=g.doc;if(!(x.highlightFrontier>=g.display.viewTo)){var S=+new Date+g.options.workTime,_=rs(g,x.highlightFrontier),C=[];x.iter(_.line,Math.min(x.first+x.size,g.display.viewTo+500),function(O){if(_.line>=g.display.viewFrom){var N=O.styles,j=O.text.length>g.options.maxHighlightLength?Et(x.mode,_.state):null,V=Uo(g,O,_,!0);j&&(_.state=j),O.styles=V.styles;var W=O.styleClasses,ce=V.classes;ce?O.styleClasses=ce:W&&(O.styleClasses=null);for(var fe=!N||N.length!=O.styles.length||W!=ce&&(!W||!ce||W.bgClass!=ce.bgClass||W.textClass!=ce.textClass),Se=0;!fe&&Se<N.length;++Se)fe=N[Se]!=O.styles[Se];fe&&C.push(_.line),O.stateAfter=_.save(),_.nextLine()}else O.text.length<=g.options.maxHighlightLength&&Bs(g,O.text,_),O.stateAfter=_.line%5==0?_.save():null,_.nextLine();if(+new Date>S)return Lh(g,g.options.workDelay),!0}),x.highlightFrontier=_.line,x.modeFrontier=Math.max(x.modeFrontier,_.line),C.length&&Us(g,function(){for(var O=0;O<C.length;O++)Wu(g,C[O],"text")})}}var Dg=function(g,x,S){var _=g.display;this.viewport=x,this.visible=kg(_,g.doc,x),this.editorIsHidden=!_.wrapper.offsetWidth,this.wrapperHeight=_.wrapper.clientHeight,this.wrapperWidth=_.wrapper.clientWidth,this.oldDisplayWidth=Li(g),this.force=S,this.dims=K0(g),this.events=[]};function AS(g){if(g.hasFocus())return null;var x=ee(ze(g));if(!x||!le(g.display.lineDiv,x))return null;var S={activeElt:x};if(window.getSelection){var _=He(g).getSelection();_.anchorNode&&_.extend&&le(g.display.lineDiv,_.anchorNode)&&(S.anchorNode=_.anchorNode,S.anchorOffset=_.anchorOffset,S.focusNode=_.focusNode,S.focusOffset=_.focusOffset)}return S}function sy(g,x){var S=g.display,_=g.doc;if(x.editorIsHidden)return Yu(g),!1;if(!x.force&&x.visible.from>=S.viewFrom&&x.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&Ov(g)==0)return!1;Gv(g)&&(Yu(g),x.dims=K0(g));var C=_.first+_.size,O=Math.max(x.visible.from-g.options.viewportMargin,_.first),N=Math.min(C,x.visible.to+g.options.viewportMargin);S.viewFrom<O&&O-S.viewFrom<20&&(O=Math.max(_.first,S.viewFrom)),S.viewTo>N&&S.viewTo-N<20&&(N=Math.min(C,S.viewTo)),Qi&&(O=as(g.doc,O),N=ul(g.doc,N));var j=O!=S.viewFrom||N!=S.viewTo||S.lastWrapHeight!=x.wrapperHeight||S.lastWrapWidth!=x.wrapperWidth;(function(ce,fe,Se){var be=ce.display;be.view.length==0||fe>=be.viewTo||Se<=be.viewFrom?(be.view=Bi(ce,fe,Se),be.viewFrom=fe):(be.viewFrom>fe?be.view=Bi(ce,fe,be.viewFrom).concat(be.view):be.viewFrom<fe&&(be.view=be.view.slice(Yc(ce,fe))),be.viewFrom=fe,be.viewTo<Se?be.view=be.view.concat(Bi(ce,be.viewTo,Se)):be.viewTo>Se&&(be.view=be.view.slice(0,Yc(ce,Se)))),be.viewTo=Se})(g,O,N),S.viewOffset=ge(et(g.doc,S.viewFrom)),g.display.mover.style.top=S.viewOffset+"px";var V=Ov(g);if(!j&&V==0&&!x.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var W=AS(g);return V>4&&(S.lineDiv.style.display="none"),function(ce,fe,Se){var be=ce.display,$e=ce.options.lineNumbers,Ne=be.lineDiv,Oe=Ne.firstChild;function Ve(Ot){var Hn=Ot.nextSibling;return h&&k&&ce.display.currentWheelTarget==Ot?Ot.style.display="none":Ot.parentNode.removeChild(Ot),Hn}for(var nt=be.view,Je=be.viewFrom,gt=0;gt<nt.length;gt++){var ct=nt[gt];if(!ct.hidden)if(ct.node&&ct.node.parentNode==Ne){for(;Oe!=ct.node;)Oe=Ve(Oe);var mt=$e&&fe!=null&&fe<=Je&&ct.lineNumber;ct.changes&&(Pe(ct.changes,"gutter")>-1&&(mt=!1),Gu(ce,ct,Je,Se)),mt&&(q(ct.lineNumber),ct.lineNumber.appendChild(document.createTextNode(Zt(ce.options,Je)))),Oe=ct.node.nextSibling}else{var bn=Ye(ce,ct,Je,Se);Ne.insertBefore(bn,Oe)}Je+=ct.size}for(;Oe;)Oe=Ve(Oe)}(g,S.updateLineNumbers,x.dims),V>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,function(ce){if(ce&&ce.activeElt&&ce.activeElt!=ee(ce.activeElt.ownerDocument)&&(ce.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(ce.activeElt.nodeName)&&ce.anchorNode&&le(document.body,ce.anchorNode)&&le(document.body,ce.focusNode))){var fe=ce.activeElt.ownerDocument,Se=fe.defaultView.getSelection(),be=fe.createRange();be.setEnd(ce.anchorNode,ce.anchorOffset),be.collapse(!1),Se.removeAllRanges(),Se.addRange(be),Se.extend(ce.focusNode,ce.focusOffset)}}(W),q(S.cursorDiv),q(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,j&&(S.lastWrapHeight=x.wrapperHeight,S.lastWrapWidth=x.wrapperWidth,Lh(g,400)),S.updateLineNumbers=null,!0}function qv(g,x){for(var S=x.viewport,_=!0;;_=!1){if(_&&g.options.lineWrapping&&x.oldDisplayWidth!=Li(g))_&&(x.visible=kg(g.display,g.doc,S));else if(S&&S.top!=null&&(S={top:Math.min(g.doc.height+eo(g.display)-Te(g),S.top)}),x.visible=kg(g.display,g.doc,S),x.visible.from>=g.display.viewFrom&&x.visible.to<=g.display.viewTo)break;if(!sy(g,x))break;Cg(g);var C=Th(g);Ah(g),cd(g,C),uy(g,C),x.force=!1}x.signal(g,"update",g),g.display.viewFrom==g.display.reportedViewFrom&&g.display.viewTo==g.display.reportedViewTo||(x.signal(g,"viewportChange",g,g.display.viewFrom,g.display.viewTo),g.display.reportedViewFrom=g.display.viewFrom,g.display.reportedViewTo=g.display.viewTo)}function ay(g,x){var S=new Dg(g,x);if(sy(g,S)){Cg(g),qv(g,S);var _=Th(g);Ah(g),cd(g,_),uy(g,_),S.finish()}}function ly(g){var x=g.gutters.offsetWidth;g.sizer.style.marginLeft=x+"px",Hr(g,"gutterChanged",g)}function uy(g,x){g.display.sizer.style.minHeight=x.docHeight+"px",g.display.heightForcer.style.top=x.docHeight+"px",g.display.gutters.style.height=x.docHeight+g.display.barHeight+xi(g)+"px"}function Hv(g){var x=g.display,S=x.view;if(x.alignWidgets||x.gutters.firstChild&&g.options.fixedGutter){for(var _=J0(x)-x.scroller.scrollLeft+g.doc.scrollLeft,C=x.gutters.offsetWidth,O=_+"px",N=0;N<S.length;N++)if(!S[N].hidden){g.options.fixedGutter&&(S[N].gutter&&(S[N].gutter.style.left=O),S[N].gutterBackground&&(S[N].gutterBackground.style.left=O));var j=S[N].alignable;if(j)for(var V=0;V<j.length;V++)j[V].style.left=O}g.options.fixedGutter&&(x.gutters.style.left=_+C+"px")}}function Gv(g){if(!g.options.lineNumbers)return!1;var x=g.doc,S=Zt(g.options,x.first+x.size-1),_=g.display;if(S.length!=_.lineNumChars){var C=_.measure.appendChild(X("div",[X("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),O=C.firstChild.offsetWidth,N=C.offsetWidth-O;return _.lineGutter.style.width="",_.lineNumInnerWidth=Math.max(O,_.lineGutter.offsetWidth-N)+1,_.lineNumWidth=_.lineNumInnerWidth+N,_.lineNumChars=_.lineNumInnerWidth?S.length:-1,_.lineGutter.style.width=_.lineNumWidth+"px",ly(g.display),!0}return!1}function cy(g,x){for(var S=[],_=!1,C=0;C<g.length;C++){var O=g[C],N=null;if(typeof O!="string"&&(N=O.style,O=O.className),O=="CodeMirror-linenumbers"){if(!x)continue;_=!0}S.push({className:O,style:N})}return x&&!_&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function Vv(g){var x=g.gutters,S=g.gutterSpecs;q(x),g.lineGutter=null;for(var _=0;_<S.length;++_){var C=S[_],O=C.className,N=C.style,j=x.appendChild(X("div",null,"CodeMirror-gutter "+O));N&&(j.style.cssText=N),O=="CodeMirror-linenumbers"&&(g.lineGutter=j,j.style.width=(g.lineNumWidth||1)+"px")}x.style.display=S.length?"":"none",ly(g)}function Rh(g){Vv(g.display),_s(g),Hv(g)}function CS(g,x,S,_){var C=this;this.input=S,C.scrollbarFiller=X("div",null,"CodeMirror-scrollbar-filler"),C.scrollbarFiller.setAttribute("cm-not-content","true"),C.gutterFiller=X("div",null,"CodeMirror-gutter-filler"),C.gutterFiller.setAttribute("cm-not-content","true"),C.lineDiv=te("div",null,"CodeMirror-code"),C.selectionDiv=X("div",null,null,"position: relative; z-index: 1"),C.cursorDiv=X("div",null,"CodeMirror-cursors"),C.measure=X("div",null,"CodeMirror-measure"),C.lineMeasure=X("div",null,"CodeMirror-measure"),C.lineSpace=te("div",[C.measure,C.lineMeasure,C.selectionDiv,C.cursorDiv,C.lineDiv],null,"position: relative; outline: none");var O=te("div",[C.lineSpace],"CodeMirror-lines");C.mover=X("div",[O],null,"position: relative"),C.sizer=X("div",[C.mover],"CodeMirror-sizer"),C.sizerWidth=null,C.heightForcer=X("div",null,null,"position: absolute; height: 50px; width: 1px;"),C.gutters=X("div",null,"CodeMirror-gutters"),C.lineGutter=null,C.scroller=X("div",[C.sizer,C.heightForcer,C.gutters],"CodeMirror-scroll"),C.scroller.setAttribute("tabIndex","-1"),C.wrapper=X("div",[C.scrollbarFiller,C.gutterFiller,C.scroller],"CodeMirror"),m&&b>=105&&(C.wrapper.style.clipPath="inset(0px)"),C.wrapper.setAttribute("translate","no"),c&&d<8&&(C.gutters.style.zIndex=-1,C.scroller.style.paddingRight=0),h||a&&D||(C.scroller.draggable=!0),g&&(g.appendChild?g.appendChild(C.wrapper):g(C.wrapper)),C.viewFrom=C.viewTo=x.first,C.reportedViewFrom=C.reportedViewTo=x.first,C.view=[],C.renderedView=null,C.externalMeasured=null,C.viewOffset=0,C.lastWrapHeight=C.lastWrapWidth=0,C.updateLineNumbers=null,C.nativeBarWidth=C.barHeight=C.barWidth=0,C.scrollbarsClipped=!1,C.lineNumWidth=C.lineNumInnerWidth=C.lineNumChars=null,C.alignWidgets=!1,C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.maxLine=null,C.maxLineLength=0,C.maxLineChanged=!1,C.wheelDX=C.wheelDY=C.wheelStartX=C.wheelStartY=null,C.shift=!1,C.selForContextMenu=null,C.activeTouch=null,C.gutterSpecs=cy(_.gutters,_.lineNumbers),Vv(C),S.init(C)}Dg.prototype.signal=function(g,x){xt(g,x)&&this.events.push(arguments)},Dg.prototype.finish=function(){for(var g=0;g<this.events.length;g++)tt.apply(null,this.events[g])};var Lg=0,hu=null;function Wv(g){var x=g.wheelDeltaX,S=g.wheelDeltaY;return x==null&&g.detail&&g.axis==g.HORIZONTAL_AXIS&&(x=g.detail),S==null&&g.detail&&g.axis==g.VERTICAL_AXIS?S=g.detail:S==null&&(S=g.wheelDelta),{x,y:S}}function kS(g){var x=Wv(g);return x.x*=hu,x.y*=hu,x}function Yv(g,x){m&&b==102&&(g.display.chromeScrollHack==null?g.display.sizer.style.pointerEvents="none":clearTimeout(g.display.chromeScrollHack),g.display.chromeScrollHack=setTimeout(function(){g.display.chromeScrollHack=null,g.display.sizer.style.pointerEvents=""},100));var S=Wv(x),_=S.x,C=S.y,O=hu;x.deltaMode===0&&(_=x.deltaX,C=x.deltaY,O=1);var N=g.display,j=N.scroller,V=j.scrollWidth>j.clientWidth,W=j.scrollHeight>j.clientHeight;if(_&&V||C&&W){if(C&&k&&h){e:for(var ce=x.target,fe=N.view;ce!=j;ce=ce.parentNode)for(var Se=0;Se<fe.length;Se++)if(fe[Se].node==ce){g.display.currentWheelTarget=ce;break e}}if(_&&!a&&!y&&O!=null)return C&&W&&kh(g,Math.max(0,j.scrollTop+C*O)),Xc(g,Math.max(0,j.scrollLeft+_*O)),(!C||C&&W)&&rn(x),void(N.wheelStartX=null);if(C&&O!=null){var be=C*O,$e=g.doc.scrollTop,Ne=$e+N.wrapper.clientHeight;be<0?$e=Math.max(0,$e+be-50):Ne=Math.min(g.doc.height,Ne+be+50),ay(g,{top:$e,bottom:Ne})}Lg<20&&x.deltaMode!==0&&(N.wheelStartX==null?(N.wheelStartX=j.scrollLeft,N.wheelStartY=j.scrollTop,N.wheelDX=_,N.wheelDY=C,setTimeout(function(){if(N.wheelStartX!=null){var Oe=j.scrollLeft-N.wheelStartX,Ve=j.scrollTop-N.wheelStartY,nt=Ve&&N.wheelDY&&Ve/N.wheelDY||Oe&&N.wheelDX&&Oe/N.wheelDX;N.wheelStartX=N.wheelStartY=null,nt&&(hu=(hu*Lg+nt)/(Lg+1),++Lg)}},200)):(N.wheelDX+=_,N.wheelDY+=C))}}c?hu=-.53:a?hu=15:m?hu=-.7:v&&(hu=-1/3);var ha=function(g,x){this.ranges=g,this.primIndex=x};ha.prototype.primary=function(){return this.ranges[this.primIndex]},ha.prototype.equals=function(g){if(g==this)return!0;if(g.primIndex!=this.primIndex||g.ranges.length!=this.ranges.length)return!1;for(var x=0;x<this.ranges.length;x++){var S=this.ranges[x],_=g.ranges[x];if(!Xn(S.anchor,_.anchor)||!Xn(S.head,_.head))return!1}return!0},ha.prototype.deepCopy=function(){for(var g=[],x=0;x<this.ranges.length;x++)g[x]=new Pr(ni(this.ranges[x].anchor),ni(this.ranges[x].head));return new ha(g,this.primIndex)},ha.prototype.somethingSelected=function(){for(var g=0;g<this.ranges.length;g++)if(!this.ranges[g].empty())return!0;return!1},ha.prototype.contains=function(g,x){x||(x=g);for(var S=0;S<this.ranges.length;S++){var _=this.ranges[S];if(pt(x,_.from())>=0&&pt(g,_.to())<=0)return S}return-1};var Pr=function(g,x){this.anchor=g,this.head=x};function hl(g,x,S){var _=g&&g.options.selectionsMayTouch,C=x[S];x.sort(function(Se,be){return pt(Se.from(),be.from())}),S=Pe(x,C);for(var O=1;O<x.length;O++){var N=x[O],j=x[O-1],V=pt(j.to(),N.from());if(_&&!N.empty()?V>0:V>=0){var W=Rr(j.from(),N.from()),ce=Ar(j.to(),N.to()),fe=j.empty()?N.from()==N.head:j.from()==j.head;O<=S&&--S,x.splice(--O,2,new Pr(fe?ce:W,fe?W:ce))}}return new ha(x,S)}function Xu(g,x){return new ha([new Pr(g,x||g)],0)}function Zu(g){return g.text?Xe(g.from.line+g.text.length-1,ie(g.text).length+(g.text.length==1?g.from.ch:0)):g.to}function Xv(g,x){if(pt(g,x.from)<0)return g;if(pt(g,x.to)<=0)return Zu(x);var S=g.line+x.text.length-(x.to.line-x.from.line)-1,_=g.ch;return g.line==x.to.line&&(_+=Zu(x).ch-x.to.ch),Xe(S,_)}function fy(g,x){for(var S=[],_=0;_<g.sel.ranges.length;_++){var C=g.sel.ranges[_];S.push(new Pr(Xv(C.anchor,x),Xv(C.head,x)))}return hl(g.cm,S,g.sel.primIndex)}function Zv(g,x,S){return g.line==x.line?Xe(S.line,g.ch-x.ch+S.ch):Xe(S.line+(g.line-x.line),g.ch)}function dy(g){g.doc.mode=Le(g.options,g.doc.modeOption),Fh(g)}function Fh(g){g.doc.iter(function(x){x.stateAfter&&(x.stateAfter=null),x.styles&&(x.styles=null)}),g.doc.modeFrontier=g.doc.highlightFrontier=g.doc.first,Lh(g,100),g.state.modeGen++,g.curOp&&_s(g)}function Kv(g,x){return x.from.ch==0&&x.to.ch==0&&ie(x.text)==""&&(!g.cm||g.cm.options.wholeLineUpdateBefore)}function hy(g,x,S,_){function C(nt){return S?S[nt]:null}function O(nt,Je,gt){(function(ct,mt,bn,Ot){ct.text=mt,ct.stateAfter&&(ct.stateAfter=null),ct.styles&&(ct.styles=null),ct.order!=null&&(ct.order=null),ll(ct),Gi(ct,bn);var Hn=Ot?Ot(ct):1;Hn!=ct.height&&zt(ct,Hn)})(nt,Je,gt,_),Hr(nt,"change",nt,x)}function N(nt,Je){for(var gt=[],ct=nt;ct<Je;++ct)gt.push(new pn(W[ct],C(ct),_));return gt}var j=x.from,V=x.to,W=x.text,ce=et(g,j.line),fe=et(g,V.line),Se=ie(W),be=C(W.length-1),$e=V.line-j.line;if(x.full)g.insert(0,N(0,W.length)),g.remove(W.length,g.size-W.length);else if(Kv(g,x)){var Ne=N(0,W.length-1);O(fe,fe.text,be),$e&&g.remove(j.line,$e),Ne.length&&g.insert(j.line,Ne)}else if(ce==fe)if(W.length==1)O(ce,ce.text.slice(0,j.ch)+Se+ce.text.slice(V.ch),be);else{var Oe=N(1,W.length-1);Oe.push(new pn(Se+ce.text.slice(V.ch),be,_)),O(ce,ce.text.slice(0,j.ch)+W[0],C(0)),g.insert(j.line+1,Oe)}else if(W.length==1)O(ce,ce.text.slice(0,j.ch)+W[0]+fe.text.slice(V.ch),C(0)),g.remove(j.line+1,$e);else{O(ce,ce.text.slice(0,j.ch)+W[0],C(0)),O(fe,Se+fe.text.slice(V.ch),be);var Ve=N(1,W.length-1);$e>1&&g.remove(j.line+1,$e-1),g.insert(j.line+1,Ve)}Hr(g,"change",g,x)}function Ku(g,x,S){(function _(C,O,N){if(C.linked)for(var j=0;j<C.linked.length;++j){var V=C.linked[j];if(V.doc!=O){var W=N&&V.sharedHist;S&&!W||(x(V.doc,W),_(V.doc,C,W))}}})(g,null,!0)}function Jv(g,x){if(x.cm)throw new Error("This document is already in use.");g.doc=x,x.cm=g,Q0(g),dy(g),Qv(g),g.options.direction=x.direction,g.options.lineWrapping||yt(g),g.options.mode=x.modeOption,_s(g)}function Qv(g){(g.doc.direction=="rtl"?z:U)(g.display.lineDiv,"CodeMirror-rtl")}function Rg(g){this.done=[],this.undone=[],this.undoDepth=g?g.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=g?g.maxGeneration:1}function py(g,x){var S={from:ni(x.from),to:Zu(x),text:hn(g,x.from,x.to)};return nx(g,S,x.from.line,x.to.line+1),Ku(g,function(_){return nx(_,S,x.from.line,x.to.line+1)},!0),S}function ex(g){for(;g.length&&ie(g).ranges;)g.pop()}function tx(g,x,S,_){var C=g.history;C.undone.length=0;var O,N,j=+new Date;if((C.lastOp==_||C.lastOrigin==x.origin&&x.origin&&(x.origin.charAt(0)=="+"&&C.lastModTime>j-(g.cm?g.cm.options.historyEventDelay:500)||x.origin.charAt(0)=="*"))&&(O=function(W,ce){return ce?(ex(W.done),ie(W.done)):W.done.length&&!ie(W.done).ranges?ie(W.done):W.done.length>1&&!W.done[W.done.length-2].ranges?(W.done.pop(),ie(W.done)):void 0}(C,C.lastOp==_)))N=ie(O.changes),pt(x.from,x.to)==0&&pt(x.from,N.to)==0?N.to=Zu(x):O.changes.push(py(g,x));else{var V=ie(C.done);for(V&&V.ranges||Fg(g.sel,C.done),O={changes:[py(g,x)],generation:C.generation},C.done.push(O);C.done.length>C.undoDepth;)C.done.shift(),C.done[0].ranges||C.done.shift()}C.done.push(S),C.generation=++C.maxGeneration,C.lastModTime=C.lastSelTime=j,C.lastOp=C.lastSelOp=_,C.lastOrigin=C.lastSelOrigin=x.origin,N||tt(g,"historyAdded")}function TS(g,x,S,_){var C=g.history,O=_&&_.origin;S==C.lastSelOp||O&&C.lastSelOrigin==O&&(C.lastModTime==C.lastSelTime&&C.lastOrigin==O||function(N,j,V,W){var ce=j.charAt(0);return ce=="*"||ce=="+"&&V.ranges.length==W.ranges.length&&V.somethingSelected()==W.somethingSelected()&&new Date-N.history.lastSelTime<=(N.cm?N.cm.options.historyEventDelay:500)}(g,O,ie(C.done),x))?C.done[C.done.length-1]=x:Fg(x,C.done),C.lastSelTime=+new Date,C.lastSelOrigin=O,C.lastSelOp=S,_&&_.clearRedo!==!1&&ex(C.undone)}function Fg(g,x){var S=ie(x);S&&S.ranges&&S.equals(g)||x.push(g)}function nx(g,x,S,_){var C=x["spans_"+g.id],O=0;g.iter(Math.max(g.first,S),Math.min(g.first+g.size,_),function(N){N.markedSpans&&((C||(C=x["spans_"+g.id]={}))[O]=N.markedSpans),++O})}function DS(g){if(!g)return null;for(var x,S=0;S<g.length;++S)g[S].marker.explicitlyCleared?x||(x=g.slice(0,S)):x&&x.push(g[S]);return x?x.length?x:null:g}function rx(g,x){var S=function(ce,fe){var Se=fe["spans_"+ce.id];if(!Se)return null;for(var be=[],$e=0;$e<fe.text.length;++$e)be.push(DS(Se[$e]));return be}(g,x),_=fa(g,x);if(!S)return _;if(!_)return S;for(var C=0;C<S.length;++C){var O=S[C],N=_[C];if(O&&N)e:for(var j=0;j<N.length;++j){for(var V=N[j],W=0;W<O.length;++W)if(O[W].marker==V.marker)continue e;O.push(V)}else N&&(S[C]=N)}return S}function fd(g,x,S){for(var _=[],C=0;C<g.length;++C){var O=g[C];if(O.ranges)_.push(S?ha.prototype.deepCopy.call(O):O);else{var N=O.changes,j=[];_.push({changes:j});for(var V=0;V<N.length;++V){var W=N[V],ce=void 0;if(j.push({from:W.from,to:W.to,text:W.text}),x)for(var fe in W)(ce=fe.match(/^spans_(\d+)$/))&&Pe(x,Number(ce[1]))>-1&&(ie(j)[fe]=W[fe],delete W[fe])}}}return _}function gy(g,x,S,_){if(_){var C=g.anchor;if(S){var O=pt(x,C)<0;O!=pt(S,C)<0?(C=x,x=S):O!=pt(x,S)<0&&(x=S)}return new Pr(C,x)}return new Pr(S||x,x)}function Mg(g,x,S,_,C){C==null&&(C=g.cm&&(g.cm.display.shift||g.extend)),Wo(g,new ha([gy(g.sel.primary(),x,S,C)],0),_)}function ix(g,x,S){for(var _=[],C=g.cm&&(g.cm.display.shift||g.extend),O=0;O<g.sel.ranges.length;O++)_[O]=gy(g.sel.ranges[O],x[O],null,C);Wo(g,hl(g.cm,_,g.sel.primIndex),S)}function my(g,x,S,_){var C=g.sel.ranges.slice(0);C[x]=S,Wo(g,hl(g.cm,C,g.sel.primIndex),_)}function ox(g,x,S,_){Wo(g,Xu(x,S),_)}function sx(g,x,S){var _=g.history.done,C=ie(_);C&&C.ranges?(_[_.length-1]=x,Og(g,x,S)):Wo(g,x,S)}function Wo(g,x,S){Og(g,x,S),TS(g,g.sel,g.cm?g.cm.curOp.id:NaN,S)}function Og(g,x,S){(xt(g,"beforeSelectionChange")||g.cm&&xt(g.cm,"beforeSelectionChange"))&&(x=function(C,O,N){var j={ranges:O.ranges,update:function(V){this.ranges=[];for(var W=0;W<V.length;W++)this.ranges[W]=new Pr(qt(C,V[W].anchor),qt(C,V[W].head))},origin:N&&N.origin};return tt(C,"beforeSelectionChange",C,j),C.cm&&tt(C.cm,"beforeSelectionChange",C.cm,j),j.ranges!=O.ranges?hl(C.cm,j.ranges,j.ranges.length-1):O}(g,x,S));var _=S&&S.bias||(pt(x.primary().head,g.sel.primary().head)<0?-1:1);ax(g,ux(g,x,_,!0)),S&&S.scroll===!1||!g.cm||g.cm.getOption("readOnly")=="nocursor"||ud(g.cm)}function ax(g,x){x.equals(g.sel)||(g.sel=x,g.cm&&(g.cm.curOp.updateInput=1,g.cm.curOp.selectionChanged=!0,Kt(g.cm)),Hr(g,"cursorActivity",g))}function lx(g){ax(g,ux(g,g.sel,null,!1))}function ux(g,x,S,_){for(var C,O=0;O<x.ranges.length;O++){var N=x.ranges[O],j=x.ranges.length==g.sel.ranges.length&&g.sel.ranges[O],V=$g(g,N.anchor,j&&j.anchor,S,_),W=N.head==N.anchor?V:$g(g,N.head,j&&j.head,S,_);(C||V!=N.anchor||W!=N.head)&&(C||(C=x.ranges.slice(0,O)),C[O]=new Pr(V,W))}return C?hl(g.cm,C,x.primIndex):x}function dd(g,x,S,_,C){var O=et(g,x.line);if(O.markedSpans)for(var N=0;N<O.markedSpans.length;++N){var j=O.markedSpans[N],V=j.marker,W="selectLeft"in V?!V.selectLeft:V.inclusiveLeft,ce="selectRight"in V?!V.selectRight:V.inclusiveRight;if((j.from==null||(W?j.from<=x.ch:j.from<x.ch))&&(j.to==null||(ce?j.to>=x.ch:j.to>x.ch))){if(C&&(tt(V,"beforeCursorEnter"),V.explicitlyCleared)){if(O.markedSpans){--N;continue}break}if(!V.atomic)continue;if(S){var fe=V.find(_<0?1:-1),Se=void 0;if((_<0?ce:W)&&(fe=cx(g,fe,-_,fe&&fe.line==x.line?O:null)),fe&&fe.line==x.line&&(Se=pt(fe,S))&&(_<0?Se<0:Se>0))return dd(g,fe,x,_,C)}var be=V.find(_<0?-1:1);return(_<0?W:ce)&&(be=cx(g,be,_,be.line==x.line?O:null)),be?dd(g,be,x,_,C):null}}return x}function $g(g,x,S,_,C){var O=_||1,N=dd(g,x,S,O,C)||!C&&dd(g,x,S,O,!0)||dd(g,x,S,-O,C)||!C&&dd(g,x,S,-O,!0);return N||(g.cantEdit=!0,Xe(g.first,0))}function cx(g,x,S,_){return S<0&&x.ch==0?x.line>g.first?qt(g,Xe(x.line-1)):null:S>0&&x.ch==(_||et(g,x.line)).text.length?x.line<g.first+g.size-1?Xe(x.line+1,0):null:new Xe(x.line,x.ch+S)}function fx(g){g.setSelection(Xe(g.firstLine(),0),Xe(g.lastLine()),ht)}function dx(g,x,S){var _={canceled:!1,from:x.from,to:x.to,text:x.text,origin:x.origin,cancel:function(){return _.canceled=!0}};return S&&(_.update=function(C,O,N,j){C&&(_.from=qt(g,C)),O&&(_.to=qt(g,O)),N&&(_.text=N),j!==void 0&&(_.origin=j)}),tt(g,"beforeChange",g,_),g.cm&&tt(g.cm,"beforeChange",g.cm,_),_.canceled?(g.cm&&(g.cm.curOp.updateInput=2),null):{from:_.from,to:_.to,text:_.text,origin:_.origin}}function hd(g,x,S){if(g.cm){if(!g.cm.curOp)return Eo(g.cm,hd)(g,x,S);if(g.cm.state.suppressEdits)return}if(!(xt(g,"beforeChange")||g.cm&&xt(g.cm,"beforeChange"))||(x=dx(g,x,!0))){var _=Cr&&!S&&function(O,N,j){var V=null;if(O.iter(N.line,j.line+1,function(nt){if(nt.markedSpans)for(var Je=0;Je<nt.markedSpans.length;++Je){var gt=nt.markedSpans[Je].marker;!gt.readOnly||V&&Pe(V,gt)!=-1||(V||(V=[])).push(gt)}}),!V)return null;for(var W=[{from:N,to:j}],ce=0;ce<V.length;++ce)for(var fe=V[ce],Se=fe.find(0),be=0;be<W.length;++be){var $e=W[be];if(!(pt($e.to,Se.from)<0||pt($e.from,Se.to)>0)){var Ne=[be,1],Oe=pt($e.from,Se.from),Ve=pt($e.to,Se.to);(Oe<0||!fe.inclusiveLeft&&!Oe)&&Ne.push({from:$e.from,to:Se.from}),(Ve>0||!fe.inclusiveRight&&!Ve)&&Ne.push({from:Se.to,to:$e.to}),W.splice.apply(W,Ne),be+=Ne.length-3}}return W}(g,x.from,x.to);if(_)for(var C=_.length-1;C>=0;--C)hx(g,{from:_[C].from,to:_[C].to,text:C?[""]:x.text,origin:x.origin});else hx(g,x)}}function hx(g,x){if(x.text.length!=1||x.text[0]!=""||pt(x.from,x.to)!=0){var S=fy(g,x);tx(g,x,S,g.cm?g.cm.curOp.id:NaN),Mh(g,x,S,fa(g,x));var _=[];Ku(g,function(C,O){O||Pe(_,C.history)!=-1||(yx(C.history,x),_.push(C.history)),Mh(C,x,null,fa(C,x))})}}function Ig(g,x,S){var _=g.cm&&g.cm.state.suppressEdits;if(!_||S){for(var C,O=g.history,N=g.sel,j=x=="undo"?O.done:O.undone,V=x=="undo"?O.undone:O.done,W=0;W<j.length&&(C=j[W],S?!C.ranges||C.equals(g.sel):C.ranges);W++);if(W!=j.length){for(O.lastOrigin=O.lastSelOrigin=null;;){if(!(C=j.pop()).ranges){if(_)return void j.push(C);break}if(Fg(C,V),S&&!C.equals(g.sel))return void Wo(g,C,{clearRedo:!1});N=C}var ce=[];Fg(N,V),V.push({changes:ce,generation:O.generation}),O.generation=C.generation||++O.maxGeneration;for(var fe=xt(g,"beforeChange")||g.cm&&xt(g.cm,"beforeChange"),Se=function(Ne){var Oe=C.changes[Ne];if(Oe.origin=x,fe&&!dx(g,Oe,!1))return j.length=0,{};ce.push(py(g,Oe));var Ve=Ne?fy(g,Oe):ie(j);Mh(g,Oe,Ve,rx(g,Oe)),!Ne&&g.cm&&g.cm.scrollIntoView({from:Oe.from,to:Zu(Oe)});var nt=[];Ku(g,function(Je,gt){gt||Pe(nt,Je.history)!=-1||(yx(Je.history,Oe),nt.push(Je.history)),Mh(Je,Oe,null,rx(Je,Oe))})},be=C.changes.length-1;be>=0;--be){var $e=Se(be);if($e)return $e.v}}}}function px(g,x){if(x!=0&&(g.first+=x,g.sel=new ha(se(g.sel.ranges,function(C){return new Pr(Xe(C.anchor.line+x,C.anchor.ch),Xe(C.head.line+x,C.head.ch))}),g.sel.primIndex),g.cm)){_s(g.cm,g.first,g.first-x,x);for(var S=g.cm.display,_=S.viewFrom;_<S.viewTo;_++)Wu(g.cm,_,"gutter")}}function Mh(g,x,S,_){if(g.cm&&!g.cm.curOp)return Eo(g.cm,Mh)(g,x,S,_);if(x.to.line<g.first)px(g,x.text.length-1-(x.to.line-x.from.line));else if(!(x.from.line>g.lastLine())){if(x.from.line<g.first){var C=x.text.length-1-(g.first-x.from.line);px(g,C),x={from:Xe(g.first,0),to:Xe(x.to.line+C,x.to.ch),text:[ie(x.text)],origin:x.origin}}var O=g.lastLine();x.to.line>O&&(x={from:x.from,to:Xe(O,et(g,O).text.length),text:[x.text[0]],origin:x.origin}),x.removed=hn(g,x.from,x.to),S||(S=fy(g,x)),g.cm?function(N,j,V){var W=N.doc,ce=N.display,fe=j.from,Se=j.to,be=!1,$e=fe.line;N.options.lineWrapping||($e=jt(Wi(et(W,fe.line))),W.iter($e,Se.line+1,function(Je){if(Je==ce.maxLine)return be=!0,!0})),W.sel.contains(j.from,j.to)>-1&&Kt(N),hy(W,j,V,Mv(N)),N.options.lineWrapping||(W.iter($e,fe.line+j.text.length,function(Je){var gt=Be(Je);gt>ce.maxLineLength&&(ce.maxLine=Je,ce.maxLineLength=gt,ce.maxLineChanged=!0,be=!1)}),be&&(N.curOp.updateMaxLine=!0)),function(Je,gt){if(Je.modeFrontier=Math.min(Je.modeFrontier,gt),!(Je.highlightFrontier<gt-10)){for(var ct=Je.first,mt=gt-1;mt>ct;mt--){var bn=et(Je,mt).stateAfter;if(bn&&(!(bn instanceof Ji)||mt+bn.lookAhead<gt)){ct=mt+1;break}}Je.highlightFrontier=Math.min(Je.highlightFrontier,ct)}}(W,fe.line),Lh(N,400);var Ne=j.text.length-(Se.line-fe.line)-1;j.full?_s(N):fe.line!=Se.line||j.text.length!=1||Kv(N.doc,j)?_s(N,fe.line,Se.line+1,Ne):Wu(N,fe.line,"text");var Oe=xt(N,"changes"),Ve=xt(N,"change");if(Ve||Oe){var nt={from:fe,to:Se,text:j.text,removed:j.removed,origin:j.origin};Ve&&Hr(N,"change",N,nt),Oe&&(N.curOp.changeObjs||(N.curOp.changeObjs=[])).push(nt)}N.display.selForContextMenu=null}(g.cm,x,_):hy(g,x,_),Og(g,S,ht),g.cantEdit&&$g(g,Xe(g.firstLine(),0))&&(g.cantEdit=!1)}}function pd(g,x,S,_,C){var O;_||(_=S),pt(_,S)<0&&(S=(O=[_,S])[0],_=O[1]),typeof x=="string"&&(x=g.splitLines(x)),hd(g,{from:S,to:_,text:x,origin:C})}function gx(g,x,S,_){S<g.line?g.line+=_:x<g.line&&(g.line=x,g.ch=0)}function mx(g,x,S,_){for(var C=0;C<g.length;++C){var O=g[C],N=!0;if(O.ranges){O.copied||((O=g[C]=O.deepCopy()).copied=!0);for(var j=0;j<O.ranges.length;j++)gx(O.ranges[j].anchor,x,S,_),gx(O.ranges[j].head,x,S,_)}else{for(var V=0;V<O.changes.length;++V){var W=O.changes[V];if(S<W.from.line)W.from=Xe(W.from.line+_,W.from.ch),W.to=Xe(W.to.line+_,W.to.ch);else if(x<=W.to.line){N=!1;break}}N||(g.splice(0,C+1),C=0)}}}function yx(g,x){var S=x.from.line,_=x.to.line,C=x.text.length-(_-S)-1;mx(g.done,S,_,C),mx(g.undone,S,_,C)}function Oh(g,x,S,_){var C=x,O=x;return typeof x=="number"?O=et(g,nr(g,x)):C=jt(x),C==null?null:(_(O,C)&&g.cm&&Wu(g.cm,C,S),O)}function $h(g){this.lines=g,this.parent=null;for(var x=0,S=0;S<g.length;++S)g[S].parent=this,x+=g[S].height;this.height=x}function Ih(g){this.children=g;for(var x=0,S=0,_=0;_<g.length;++_){var C=g[_];x+=C.chunkSize(),S+=C.height,C.parent=this}this.size=x,this.height=S,this.parent=null}Pr.prototype.from=function(){return Rr(this.anchor,this.head)},Pr.prototype.to=function(){return Ar(this.anchor,this.head)},Pr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},$h.prototype={chunkSize:function(){return this.lines.length},removeInner:function(g,x){for(var S=g,_=g+x;S<_;++S){var C=this.lines[S];this.height-=C.height,It(C),Hr(C,"delete")}this.lines.splice(g,x)},collapse:function(g){g.push.apply(g,this.lines)},insertInner:function(g,x,S){this.height+=S,this.lines=this.lines.slice(0,g).concat(x).concat(this.lines.slice(g));for(var _=0;_<x.length;++_)x[_].parent=this},iterN:function(g,x,S){for(var _=g+x;g<_;++g)if(S(this.lines[g]))return!0}},Ih.prototype={chunkSize:function(){return this.size},removeInner:function(g,x){this.size-=x;for(var S=0;S<this.children.length;++S){var _=this.children[S],C=_.chunkSize();if(g<C){var O=Math.min(x,C-g),N=_.height;if(_.removeInner(g,O),this.height-=N-_.height,C==O&&(this.children.splice(S--,1),_.parent=null),(x-=O)==0)break;g=0}else g-=C}if(this.size-x<25&&(this.children.length>1||!(this.children[0]instanceof $h))){var j=[];this.collapse(j),this.children=[new $h(j)],this.children[0].parent=this}},collapse:function(g){for(var x=0;x<this.children.length;++x)this.children[x].collapse(g)},insertInner:function(g,x,S){this.size+=x.length,this.height+=S;for(var _=0;_<this.children.length;++_){var C=this.children[_],O=C.chunkSize();if(g<=O){if(C.insertInner(g,x,S),C.lines&&C.lines.length>50){for(var N=C.lines.length%25+25,j=N;j<C.lines.length;){var V=new $h(C.lines.slice(j,j+=25));C.height-=V.height,this.children.splice(++_,0,V),V.parent=this}C.lines=C.lines.slice(0,N),this.maybeSpill()}break}g-=O}},maybeSpill:function(){if(!(this.children.length<=10)){var g=this;do{var x=new Ih(g.children.splice(g.children.length-5,5));if(g.parent){g.size-=x.size,g.height-=x.height;var S=Pe(g.parent.children,g);g.parent.children.splice(S+1,0,x)}else{var _=new Ih(g.children);_.parent=g,g.children=[_,x],g=_}x.parent=g.parent}while(g.children.length>10);g.parent.maybeSpill()}},iterN:function(g,x,S){for(var _=0;_<this.children.length;++_){var C=this.children[_],O=C.chunkSize();if(g<O){var N=Math.min(x,O-g);if(C.iterN(g,N,S))return!0;if((x-=N)==0)break;g=0}else g-=O}}};var Ph=function(g,x,S){if(S)for(var _ in S)S.hasOwnProperty(_)&&(this[_]=S[_]);this.doc=g,this.node=x};function bx(g,x,S){ge(x)<(g.curOp&&g.curOp.scrollTop||g.doc.scrollTop)&&oy(g,S)}Ph.prototype.clear=function(){var g=this.doc.cm,x=this.line.widgets,S=this.line,_=jt(S);if(_!=null&&x){for(var C=0;C<x.length;++C)x[C]==this&&x.splice(C--,1);x.length||(S.widgets=null);var O=Sn(this);zt(S,Math.max(0,S.height-O)),g&&(Us(g,function(){bx(g,S,-O),Wu(g,_,"widget")}),Hr(g,"lineWidgetCleared",g,this,_))}},Ph.prototype.changed=function(){var g=this,x=this.height,S=this.doc.cm,_=this.line;this.height=null;var C=Sn(this)-x;C&&(Ht(this.doc,_)||zt(_,_.height+C),S&&Us(S,function(){S.curOp.forceUpdate=!0,bx(S,_,C),Hr(S,"lineWidgetChanged",S,g,jt(_))}))},Qt(Ph);var vx=0,Ju=function(g,x){this.lines=[],this.type=x,this.doc=g,this.id=++vx};function gd(g,x,S,_,C){if(_&&_.shared)return function(fe,Se,be,$e,Ne){($e=we($e)).shared=!1;var Oe=[gd(fe,Se,be,$e,Ne)],Ve=Oe[0],nt=$e.widgetNode;return Ku(fe,function(Je){nt&&($e.widgetNode=nt.cloneNode(!0)),Oe.push(gd(Je,qt(Je,Se),qt(Je,be),$e,Ne));for(var gt=0;gt<Je.linked.length;++gt)if(Je.linked[gt].isParent)return;Ve=ie(Oe)}),new Nh(Oe,Ve)}(g,x,S,_,C);if(g.cm&&!g.cm.curOp)return Eo(g.cm,gd)(g,x,S,_,C);var O=new Ju(g,C),N=pt(x,S);if(_&&we(_,O,!1),N>0||N==0&&O.clearWhenEmpty!==!1)return O;if(O.replacedWith&&(O.collapsed=!0,O.widgetNode=te("span",[O.replacedWith],"CodeMirror-widget"),_.handleMouseEvents||O.widgetNode.setAttribute("cm-ignore-events","true"),_.insertLeft&&(O.widgetNode.insertLeft=!0)),O.collapsed){if(ss(g,x.line,x,S,O)||x.line!=S.line&&ss(g,S.line,x,S,O))throw new Error("Inserting collapsed marker partially overlapping an existing one");Qi=!0}O.addToHistory&&tx(g,{from:x,to:S,origin:"markText"},g.sel,NaN);var j,V=x.line,W=g.cm;if(g.iter(V,S.line+1,function(fe){W&&O.collapsed&&!W.options.lineWrapping&&Wi(fe)==W.display.maxLine&&(j=!0),O.collapsed&&V!=x.line&&zt(fe,0),function(Se,be,$e){var Ne=$e&&window.WeakSet&&($e.markedSpans||($e.markedSpans=new WeakSet));Ne&&Se.markedSpans&&Ne.has(Se.markedSpans)?Se.markedSpans.push(be):(Se.markedSpans=Se.markedSpans?Se.markedSpans.concat([be]):[be],Ne&&Ne.add(Se.markedSpans)),be.marker.attachLine(Se)}(fe,new is(O,V==x.line?x.ch:null,V==S.line?S.ch:null),g.cm&&g.cm.curOp),++V}),O.collapsed&&g.iter(x.line,S.line+1,function(fe){Ht(g,fe)&&zt(fe,0)}),O.clearOnEnter&&De(O,"beforeCursorEnter",function(){return O.clear()}),O.readOnly&&(Cr=!0,(g.history.done.length||g.history.undone.length)&&g.clearHistory()),O.collapsed&&(O.id=++vx,O.atomic=!0),W){if(j&&(W.curOp.updateMaxLine=!0),O.collapsed)_s(W,x.line,S.line+1);else if(O.className||O.startStyle||O.endStyle||O.css||O.attributes||O.title)for(var ce=x.line;ce<=S.line;ce++)Wu(W,ce,"text");O.atomic&&lx(W.doc),Hr(W,"markerAdded",W,O)}return O}Ju.prototype.clear=function(){if(!this.explicitlyCleared){var g=this.doc.cm,x=g&&!g.curOp;if(x&&Kc(g),xt(this,"clear")){var S=this.find();S&&Hr(this,"clear",S.from,S.to)}for(var _=null,C=null,O=0;O<this.lines.length;++O){var N=this.lines[O],j=Oo(N.markedSpans,this);g&&!this.collapsed?Wu(g,jt(N),"text"):g&&(j.to!=null&&(C=jt(N)),j.from!=null&&(_=jt(N))),N.markedSpans=qo(N.markedSpans,j),j.from==null&&this.collapsed&&!Ht(this.doc,N)&&g&&zt(N,sd(g.display))}if(g&&this.collapsed&&!g.options.lineWrapping)for(var V=0;V<this.lines.length;++V){var W=Wi(this.lines[V]),ce=Be(W);ce>g.display.maxLineLength&&(g.display.maxLine=W,g.display.maxLineLength=ce,g.display.maxLineChanged=!0)}_!=null&&g&&this.collapsed&&_s(g,_,C+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,g&&lx(g.doc)),g&&Hr(g,"markerCleared",g,this,_,C),x&&Jc(g),this.parent&&this.parent.clear()}},Ju.prototype.find=function(g,x){var S,_;g==null&&this.type=="bookmark"&&(g=1);for(var C=0;C<this.lines.length;++C){var O=this.lines[C],N=Oo(O.markedSpans,this);if(N.from!=null&&(S=Xe(x?O:jt(O),N.from),g==-1))return S;if(N.to!=null&&(_=Xe(x?O:jt(O),N.to),g==1))return _}return S&&{from:S,to:_}},Ju.prototype.changed=function(){var g=this,x=this.find(-1,!0),S=this,_=this.doc.cm;x&&_&&Us(_,function(){var C=x.line,O=jt(x.line),N=Vn(_,O);if(N&&(Av(N),_.curOp.selectionChanged=_.curOp.forceUpdate=!0),_.curOp.updateMaxLine=!0,!Ht(S.doc,C)&&S.height!=null){var j=S.height;S.height=null;var V=Sn(S)-j;V&&zt(C,C.height+V)}Hr(_,"markerChanged",_,g)})},Ju.prototype.attachLine=function(g){if(!this.lines.length&&this.doc.cm){var x=this.doc.cm.curOp;x.maybeHiddenMarkers&&Pe(x.maybeHiddenMarkers,this)!=-1||(x.maybeUnhiddenMarkers||(x.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(g)},Ju.prototype.detachLine=function(g){if(this.lines.splice(Pe(this.lines,g),1),!this.lines.length&&this.doc.cm){var x=this.doc.cm.curOp;(x.maybeHiddenMarkers||(x.maybeHiddenMarkers=[])).push(this)}},Qt(Ju);var Nh=function(g,x){this.markers=g,this.primary=x;for(var S=0;S<g.length;++S)g[S].parent=this};function xx(g){return g.findMarks(Xe(g.first,0),g.clipPos(Xe(g.lastLine())),function(x){return x.parent})}function LS(g){for(var x=function(_){var C=g[_],O=[C.primary.doc];Ku(C.primary.doc,function(V){return O.push(V)});for(var N=0;N<C.markers.length;N++){var j=C.markers[N];Pe(O,j.doc)==-1&&(j.parent=null,C.markers.splice(N--,1))}},S=0;S<g.length;S++)x(S)}Nh.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var g=0;g<this.markers.length;++g)this.markers[g].clear();Hr(this,"clear")}},Nh.prototype.find=function(g,x){return this.primary.find(g,x)},Qt(Nh);var RS=0,Es=function(g,x,S,_,C){if(!(this instanceof Es))return new Es(g,x,S,_,C);S==null&&(S=0),Ih.call(this,[new $h([new pn("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var O=Xe(S,0);this.sel=Xu(O),this.history=new Rg(null),this.id=++RS,this.modeOption=x,this.lineSep=_,this.direction=C=="rtl"?"rtl":"ltr",this.extend=!1,typeof g=="string"&&(g=this.splitLines(g)),hy(this,{from:O,to:O,text:g}),Wo(this,Xu(O),ht)};Es.prototype=F(Ih.prototype,{constructor:Es,iter:function(g,x,S){S?this.iterN(g-this.first,x-g,S):this.iterN(this.first,this.first+this.size,g)},insert:function(g,x){for(var S=0,_=0;_<x.length;++_)S+=x[_].height;this.insertInner(g-this.first,x,S)},remove:function(g,x){this.removeInner(g-this.first,x)},getValue:function(g){var x=An(this,this.first,this.first+this.size);return g===!1?x:x.join(g||this.lineSeparator())},setValue:So(function(g){var x=Xe(this.first,0),S=this.first+this.size-1;hd(this,{from:x,to:Xe(S,et(this,S).text.length),text:this.splitLines(g),origin:"setValue",full:!0},!0),this.cm&&Ch(this.cm,0,0),Wo(this,Xu(x),ht)}),replaceRange:function(g,x,S,_){pd(this,g,x=qt(this,x),S=S?qt(this,S):x,_)},getRange:function(g,x,S){var _=hn(this,qt(this,g),qt(this,x));return S===!1?_:S===""?_.join(""):_.join(S||this.lineSeparator())},getLine:function(g){var x=this.getLineHandle(g);return x&&x.text},getLineHandle:function(g){if(ci(this,g))return et(this,g)},getLineNumber:function(g){return jt(g)},getLineHandleVisualStart:function(g){return typeof g=="number"&&(g=et(this,g)),Wi(g)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(g){return qt(this,g)},getCursor:function(g){var x=this.sel.primary();return g==null||g=="head"?x.head:g=="anchor"?x.anchor:g=="end"||g=="to"||g===!1?x.to():x.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:So(function(g,x,S){ox(this,qt(this,typeof g=="number"?Xe(g,x||0):g),null,S)}),setSelection:So(function(g,x,S){ox(this,qt(this,g),qt(this,x||g),S)}),extendSelection:So(function(g,x,S){Mg(this,qt(this,g),x&&qt(this,x),S)}),extendSelections:So(function(g,x){ix(this,bi(this,g),x)}),extendSelectionsBy:So(function(g,x){ix(this,bi(this,se(this.sel.ranges,g)),x)}),setSelections:So(function(g,x,S){if(g.length){for(var _=[],C=0;C<g.length;C++)_[C]=new Pr(qt(this,g[C].anchor),qt(this,g[C].head||g[C].anchor));x==null&&(x=Math.min(g.length-1,this.sel.primIndex)),Wo(this,hl(this.cm,_,x),S)}}),addSelection:So(function(g,x,S){var _=this.sel.ranges.slice(0);_.push(new Pr(qt(this,g),qt(this,x||g))),Wo(this,hl(this.cm,_,_.length-1),S)}),getSelection:function(g){for(var x,S=this.sel.ranges,_=0;_<S.length;_++){var C=hn(this,S[_].from(),S[_].to());x=x?x.concat(C):C}return g===!1?x:x.join(g||this.lineSeparator())},getSelections:function(g){for(var x=[],S=this.sel.ranges,_=0;_<S.length;_++){var C=hn(this,S[_].from(),S[_].to());g!==!1&&(C=C.join(g||this.lineSeparator())),x[_]=C}return x},replaceSelection:function(g,x,S){for(var _=[],C=0;C<this.sel.ranges.length;C++)_[C]=g;this.replaceSelections(_,x,S||"+input")},replaceSelections:So(function(g,x,S){for(var _=[],C=this.sel,O=0;O<C.ranges.length;O++){var N=C.ranges[O];_[O]={from:N.from(),to:N.to(),text:this.splitLines(g[O]),origin:S}}for(var j=x&&x!="end"&&function(W,ce,fe){for(var Se=[],be=Xe(W.first,0),$e=be,Ne=0;Ne<ce.length;Ne++){var Oe=ce[Ne],Ve=Zv(Oe.from,be,$e),nt=Zv(Zu(Oe),be,$e);if(be=Oe.to,$e=nt,fe=="around"){var Je=W.sel.ranges[Ne],gt=pt(Je.head,Je.anchor)<0;Se[Ne]=new Pr(gt?nt:Ve,gt?Ve:nt)}else Se[Ne]=new Pr(Ve,Ve)}return new ha(Se,W.sel.primIndex)}(this,_,x),V=_.length-1;V>=0;V--)hd(this,_[V]);j?sx(this,j):this.cm&&ud(this.cm)}),undo:So(function(){Ig(this,"undo")}),redo:So(function(){Ig(this,"redo")}),undoSelection:So(function(){Ig(this,"undo",!0)}),redoSelection:So(function(){Ig(this,"redo",!0)}),setExtending:function(g){this.extend=g},getExtending:function(){return this.extend},historySize:function(){for(var g=this.history,x=0,S=0,_=0;_<g.done.length;_++)g.done[_].ranges||++x;for(var C=0;C<g.undone.length;C++)g.undone[C].ranges||++S;return{undo:x,redo:S}},clearHistory:function(){var g=this;this.history=new Rg(this.history),Ku(this,function(x){return x.history=g.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(g){return g&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(g){return this.history.generation==(g||this.cleanGeneration)},getHistory:function(){return{done:fd(this.history.done),undone:fd(this.history.undone)}},setHistory:function(g){var x=this.history=new Rg(this.history);x.done=fd(g.done.slice(0),null,!0),x.undone=fd(g.undone.slice(0),null,!0)},setGutterMarker:So(function(g,x,S){return Oh(this,g,"gutter",function(_){var C=_.gutterMarkers||(_.gutterMarkers={});return C[x]=S,!S&&ye(C)&&(_.gutterMarkers=null),!0})}),clearGutter:So(function(g){var x=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[g]&&Oh(x,S,"gutter",function(){return S.gutterMarkers[g]=null,ye(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(g){var x;if(typeof g=="number"){if(!ci(this,g)||(x=g,!(g=et(this,g))))return null}else if((x=jt(g))==null)return null;return{line:x,handle:g,text:g.text,gutterMarkers:g.gutterMarkers,textClass:g.textClass,bgClass:g.bgClass,wrapClass:g.wrapClass,widgets:g.widgets}},addLineClass:So(function(g,x,S){return Oh(this,g,x=="gutter"?"gutter":"class",function(_){var C=x=="text"?"textClass":x=="background"?"bgClass":x=="gutter"?"gutterClass":"wrapClass";if(_[C]){if($(S).test(_[C]))return!1;_[C]+=" "+S}else _[C]=S;return!0})}),removeLineClass:So(function(g,x,S){return Oh(this,g,x=="gutter"?"gutter":"class",function(_){var C=x=="text"?"textClass":x=="background"?"bgClass":x=="gutter"?"gutterClass":"wrapClass",O=_[C];if(!O)return!1;if(S==null)_[C]=null;else{var N=O.match($(S));if(!N)return!1;var j=N.index+N[0].length;_[C]=O.slice(0,N.index)+(N.index&&j!=O.length?" ":"")+O.slice(j)||null}return!0})}),addLineWidget:So(function(g,x,S){return function(_,C,O,N){var j=new Ph(_,O,N),V=_.cm;return V&&j.noHScroll&&(V.display.alignWidgets=!0),Oh(_,C,"widget",function(W){var ce=W.widgets||(W.widgets=[]);if(j.insertAt==null?ce.push(j):ce.splice(Math.min(ce.length,Math.max(0,j.insertAt)),0,j),j.line=W,V&&!Ht(_,W)){var fe=ge(W)<_.scrollTop;zt(W,W.height+Sn(j)),fe&&oy(V,j.height),V.curOp.forceUpdate=!0}return!0}),V&&Hr(V,"lineWidgetAdded",V,j,typeof C=="number"?C:jt(C)),j}(this,g,x,S)}),removeLineWidget:function(g){g.clear()},markText:function(g,x,S){return gd(this,qt(this,g),qt(this,x),S,S&&S.type||"range")},setBookmark:function(g,x){var S={replacedWith:x&&(x.nodeType==null?x.widget:x),insertLeft:x&&x.insertLeft,clearWhenEmpty:!1,shared:x&&x.shared,handleMouseEvents:x&&x.handleMouseEvents};return gd(this,g=qt(this,g),g,S,"bookmark")},findMarksAt:function(g){var x=[],S=et(this,(g=qt(this,g)).line).markedSpans;if(S)for(var _=0;_<S.length;++_){var C=S[_];(C.from==null||C.from<=g.ch)&&(C.to==null||C.to>=g.ch)&&x.push(C.marker.parent||C.marker)}return x},findMarks:function(g,x,S){g=qt(this,g),x=qt(this,x);var _=[],C=g.line;return this.iter(g.line,x.line+1,function(O){var N=O.markedSpans;if(N)for(var j=0;j<N.length;j++){var V=N[j];V.to!=null&&C==g.line&&g.ch>=V.to||V.from==null&&C!=g.line||V.from!=null&&C==x.line&&V.from>=x.ch||S&&!S(V.marker)||_.push(V.marker.parent||V.marker)}++C}),_},getAllMarks:function(){var g=[];return this.iter(function(x){var S=x.markedSpans;if(S)for(var _=0;_<S.length;++_)S[_].from!=null&&g.push(S[_].marker)}),g},posFromIndex:function(g){var x,S=this.first,_=this.lineSeparator().length;return this.iter(function(C){var O=C.text.length+_;if(O>g)return x=g,!0;g-=O,++S}),qt(this,Xe(S,x))},indexFromPos:function(g){var x=(g=qt(this,g)).ch;if(g.line<this.first||g.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,g.line,function(_){x+=_.text.length+S}),x},copy:function(g){var x=new Es(An(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return x.scrollTop=this.scrollTop,x.scrollLeft=this.scrollLeft,x.sel=this.sel,x.extend=!1,g&&(x.history.undoDepth=this.history.undoDepth,x.setHistory(this.getHistory())),x},linkedDoc:function(g){g||(g={});var x=this.first,S=this.first+this.size;g.from!=null&&g.from>x&&(x=g.from),g.to!=null&&g.to<S&&(S=g.to);var _=new Es(An(this,x,S),g.mode||this.modeOption,x,this.lineSep,this.direction);return g.sharedHist&&(_.history=this.history),(this.linked||(this.linked=[])).push({doc:_,sharedHist:g.sharedHist}),_.linked=[{doc:this,isParent:!0,sharedHist:g.sharedHist}],function(C,O){for(var N=0;N<O.length;N++){var j=O[N],V=j.find(),W=C.clipPos(V.from),ce=C.clipPos(V.to);if(pt(W,ce)){var fe=gd(C,W,ce,j.primary,j.primary.type);j.markers.push(fe),fe.parent=j}}}(_,xx(this)),_},unlinkDoc:function(g){if(g instanceof Ri&&(g=g.doc),this.linked){for(var x=0;x<this.linked.length;++x)if(this.linked[x].doc==g){this.linked.splice(x,1),g.unlinkDoc(this),LS(xx(this));break}}if(g.history==this.history){var S=[g.id];Ku(g,function(_){return S.push(_.id)},!0),g.history=new Rg(null),g.history.done=fd(this.history.done,S),g.history.undone=fd(this.history.undone,S)}},iterLinkedDocs:function(g){Ku(this,g)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(g){return this.lineSep?g.split(this.lineSep):mn(g)},lineSeparator:function(){return this.lineSep||`
`},setDirection:So(function(g){var x;g!="rtl"&&(g="ltr"),g!=this.direction&&(this.direction=g,this.iter(function(S){return S.order=null}),this.cm&&Us(x=this.cm,function(){Qv(x),_s(x)}))})}),Es.prototype.eachLine=Es.prototype.iter;var wx=0;function FS(g){var x=this;if(_x(x),!dt(x,g)&&!pr(x.display,g)){rn(g),c&&(wx=+new Date);var S=Wc(x,g,!0),_=g.dataTransfer.files;if(S&&!x.isReadOnly())if(_&&_.length&&window.FileReader&&window.File)for(var C=_.length,O=Array(C),N=0,j=function(){++N==C&&Eo(x,function(){var be={from:S=qt(x.doc,S),to:S,text:x.doc.splitLines(O.filter(function($e){return $e!=null}).join(x.doc.lineSeparator())),origin:"paste"};hd(x.doc,be),sx(x.doc,Xu(qt(x.doc,S),qt(x.doc,Zu(be))))})()},V=function(be,$e){if(x.options.allowDropFileTypes&&Pe(x.options.allowDropFileTypes,be.type)==-1)j();else{var Ne=new FileReader;Ne.onerror=function(){return j()},Ne.onload=function(){var Oe=Ne.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Oe)||(O[$e]=Oe),j()},Ne.readAsText(be)}},W=0;W<_.length;W++)V(_[W],W);else{if(x.state.draggingText&&x.doc.sel.contains(S)>-1)return x.state.draggingText(g),void setTimeout(function(){return x.display.input.focus()},20);try{var ce=g.dataTransfer.getData("Text");if(ce){var fe;if(x.state.draggingText&&!x.state.draggingText.copy&&(fe=x.listSelections()),Og(x.doc,Xu(S,S)),fe)for(var Se=0;Se<fe.length;++Se)pd(x.doc,"",fe[Se].anchor,fe[Se].head,"drag");x.replaceSelection(ce,"around","paste"),x.display.input.focus()}}catch{}}}}function _x(g){g.display.dragCursor&&(g.display.lineSpace.removeChild(g.display.dragCursor),g.display.dragCursor=null)}function Ex(g){if(document.getElementsByClassName){for(var x=document.getElementsByClassName("CodeMirror"),S=[],_=0;_<x.length;_++){var C=x[_].CodeMirror;C&&S.push(C)}S.length&&S[0].operation(function(){for(var O=0;O<S.length;O++)g(S[O])})}}var Sx=!1;function MS(){var g;Sx||(De(window,"resize",function(){g==null&&(g=setTimeout(function(){g=null,Ex(OS)},100))}),De(window,"blur",function(){return Ex(ld)}),Sx=!0)}function OS(g){var x=g.display;x.cachedCharWidth=x.cachedTextHeight=x.cachedPaddingH=null,x.scrollbarsClipped=!1,g.setSize()}for(var Qu={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Bh=0;Bh<10;Bh++)Qu[Bh+48]=Qu[Bh+96]=String(Bh);for(var Pg=65;Pg<=90;Pg++)Qu[Pg]=String.fromCharCode(Pg);for(var zh=1;zh<=12;zh++)Qu[zh+111]=Qu[zh+63235]="F"+zh;var pu={};function $S(g){var x,S,_,C,O=g.split(/-(?!$)/);g=O[O.length-1];for(var N=0;N<O.length-1;N++){var j=O[N];if(/^(cmd|meta|m)$/i.test(j))C=!0;else if(/^a(lt)?$/i.test(j))x=!0;else if(/^(c|ctrl|control)$/i.test(j))S=!0;else{if(!/^s(hift)?$/i.test(j))throw new Error("Unrecognized modifier name: "+j);_=!0}}return x&&(g="Alt-"+g),S&&(g="Ctrl-"+g),C&&(g="Cmd-"+g),_&&(g="Shift-"+g),g}function IS(g){var x={};for(var S in g)if(g.hasOwnProperty(S)){var _=g[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(_=="..."){delete g[S];continue}for(var C=se(S.split(" "),$S),O=0;O<C.length;O++){var N=void 0,j=void 0;O==C.length-1?(j=C.join(" "),N=_):(j=C.slice(0,O+1).join(" "),N="...");var V=x[j];if(V){if(V!=N)throw new Error("Inconsistent bindings for "+j)}else x[j]=N}delete g[S]}for(var W in x)g[W]=x[W];return g}function md(g,x,S,_){var C=(x=Ng(x)).call?x.call(g,_):x[g];if(C===!1)return"nothing";if(C==="...")return"multi";if(C!=null&&S(C))return"handled";if(x.fallthrough){if(Object.prototype.toString.call(x.fallthrough)!="[object Array]")return md(g,x.fallthrough,S,_);for(var O=0;O<x.fallthrough.length;O++){var N=md(g,x.fallthrough[O],S,_);if(N)return N}}}function Ax(g){var x=typeof g=="string"?g:Qu[g.keyCode];return x=="Ctrl"||x=="Alt"||x=="Shift"||x=="Mod"}function Cx(g,x,S){var _=g;return x.altKey&&_!="Alt"&&(g="Alt-"+g),(K?x.metaKey:x.ctrlKey)&&_!="Ctrl"&&(g="Ctrl-"+g),(K?x.ctrlKey:x.metaKey)&&_!="Mod"&&(g="Cmd-"+g),!S&&x.shiftKey&&_!="Shift"&&(g="Shift-"+g),g}function kx(g,x){if(y&&g.keyCode==34&&g.char)return!1;var S=Qu[g.keyCode];return S!=null&&!g.altGraphKey&&(g.keyCode==3&&g.code&&(S=g.code),Cx(S,g,x))}function Ng(g){return typeof g=="string"?pu[g]:g}function yd(g,x){for(var S=g.doc.sel.ranges,_=[],C=0;C<S.length;C++){for(var O=x(S[C]);_.length&&pt(O.from,ie(_).to)<=0;){var N=_.pop();if(pt(N.from,O.from)<0){O.from=N.from;break}}_.push(O)}Us(g,function(){for(var j=_.length-1;j>=0;j--)pd(g.doc,"",_[j].from,_[j].to,"+delete");ud(g)})}function yy(g,x,S){var _=P(g.text,x+S,S);return _<0||_>g.text.length?null:_}function by(g,x,S){var _=yy(g,x.ch,S);return _==null?null:new Xe(x.line,_,S<0?"after":"before")}function vy(g,x,S,_,C){if(g){x.doc.direction=="rtl"&&(C=-C);var O=Ce(S,x.doc.direction);if(O){var N,j=C<0?ie(O):O[0],V=C<0==(j.level==1)?"after":"before";if(j.level>0||x.doc.direction=="rtl"){var W=gr(x,S);N=C<0?S.text.length-1:0;var ce=Pn(x,W,N).top;N=Q(function(fe){return Pn(x,W,fe).top==ce},C<0==(j.level==1)?j.from:j.to-1,N),V=="before"&&(N=yy(S,N,1))}else N=C<0?j.to:j.from;return new Xe(_,N,V)}}return new Xe(_,C<0?S.text.length:0,C<0?"before":"after")}pu.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pu.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},pu.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},pu.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},pu.default=k?pu.macDefault:pu.pcDefault;var jh={selectAll:fx,singleSelection:function(g){return g.setSelection(g.getCursor("anchor"),g.getCursor("head"),ht)},killLine:function(g){return yd(g,function(x){if(x.empty()){var S=et(g.doc,x.head.line).text.length;return x.head.ch==S&&x.head.line<g.lastLine()?{from:x.head,to:Xe(x.head.line+1,0)}:{from:x.head,to:Xe(x.head.line,S)}}return{from:x.from(),to:x.to()}})},deleteLine:function(g){return yd(g,function(x){return{from:Xe(x.from().line,0),to:qt(g.doc,Xe(x.to().line+1,0))}})},delLineLeft:function(g){return yd(g,function(x){return{from:Xe(x.from().line,0),to:x.from()}})},delWrappedLineLeft:function(g){return yd(g,function(x){var S=g.charCoords(x.head,"div").top+5;return{from:g.coordsChar({left:0,top:S},"div"),to:x.from()}})},delWrappedLineRight:function(g){return yd(g,function(x){var S=g.charCoords(x.head,"div").top+5,_=g.coordsChar({left:g.display.lineDiv.offsetWidth+100,top:S},"div");return{from:x.from(),to:_}})},undo:function(g){return g.undo()},redo:function(g){return g.redo()},undoSelection:function(g){return g.undoSelection()},redoSelection:function(g){return g.redoSelection()},goDocStart:function(g){return g.extendSelection(Xe(g.firstLine(),0))},goDocEnd:function(g){return g.extendSelection(Xe(g.lastLine()))},goLineStart:function(g){return g.extendSelectionsBy(function(x){return Tx(g,x.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(g){return g.extendSelectionsBy(function(x){return Dx(g,x.head)},{origin:"+move",bias:1})},goLineEnd:function(g){return g.extendSelectionsBy(function(x){return function(S,_){var C=et(S.doc,_),O=function(N){for(var j;j=fi(N);)N=j.find(1,!0).line;return N}(C);return O!=C&&(_=jt(O)),vy(!0,S,C,_,-1)}(g,x.head.line)},{origin:"+move",bias:-1})},goLineRight:function(g){return g.extendSelectionsBy(function(x){var S=g.cursorCoords(x.head,"div").top+5;return g.coordsChar({left:g.display.lineDiv.offsetWidth+100,top:S},"div")},Vt)},goLineLeft:function(g){return g.extendSelectionsBy(function(x){var S=g.cursorCoords(x.head,"div").top+5;return g.coordsChar({left:0,top:S},"div")},Vt)},goLineLeftSmart:function(g){return g.extendSelectionsBy(function(x){var S=g.cursorCoords(x.head,"div").top+5,_=g.coordsChar({left:0,top:S},"div");return _.ch<g.getLine(_.line).search(/\S/)?Dx(g,x.head):_},Vt)},goLineUp:function(g){return g.moveV(-1,"line")},goLineDown:function(g){return g.moveV(1,"line")},goPageUp:function(g){return g.moveV(-1,"page")},goPageDown:function(g){return g.moveV(1,"page")},goCharLeft:function(g){return g.moveH(-1,"char")},goCharRight:function(g){return g.moveH(1,"char")},goColumnLeft:function(g){return g.moveH(-1,"column")},goColumnRight:function(g){return g.moveH(1,"column")},goWordLeft:function(g){return g.moveH(-1,"word")},goGroupRight:function(g){return g.moveH(1,"group")},goGroupLeft:function(g){return g.moveH(-1,"group")},goWordRight:function(g){return g.moveH(1,"word")},delCharBefore:function(g){return g.deleteH(-1,"codepoint")},delCharAfter:function(g){return g.deleteH(1,"char")},delWordBefore:function(g){return g.deleteH(-1,"word")},delWordAfter:function(g){return g.deleteH(1,"word")},delGroupBefore:function(g){return g.deleteH(-1,"group")},delGroupAfter:function(g){return g.deleteH(1,"group")},indentAuto:function(g){return g.indentSelection("smart")},indentMore:function(g){return g.indentSelection("add")},indentLess:function(g){return g.indentSelection("subtract")},insertTab:function(g){return g.replaceSelection("	")},insertSoftTab:function(g){for(var x=[],S=g.listSelections(),_=g.options.tabSize,C=0;C<S.length;C++){var O=S[C].from(),N=Ie(g.getLine(O.line),O.ch,_);x.push(pe(_-N%_))}g.replaceSelections(x)},defaultTab:function(g){g.somethingSelected()?g.indentSelection("add"):g.execCommand("insertTab")},transposeChars:function(g){return Us(g,function(){for(var x=g.listSelections(),S=[],_=0;_<x.length;_++)if(x[_].empty()){var C=x[_].head,O=et(g.doc,C.line).text;if(O){if(C.ch==O.length&&(C=new Xe(C.line,C.ch-1)),C.ch>0)C=new Xe(C.line,C.ch+1),g.replaceRange(O.charAt(C.ch-1)+O.charAt(C.ch-2),Xe(C.line,C.ch-2),C,"+transpose");else if(C.line>g.doc.first){var N=et(g.doc,C.line-1).text;N&&(C=new Xe(C.line,1),g.replaceRange(O.charAt(0)+g.doc.lineSeparator()+N.charAt(N.length-1),Xe(C.line-1,N.length-1),C,"+transpose"))}}S.push(new Pr(C,C))}g.setSelections(S)})},newlineAndIndent:function(g){return Us(g,function(){for(var x=g.listSelections(),S=x.length-1;S>=0;S--)g.replaceRange(g.doc.lineSeparator(),x[S].anchor,x[S].head,"+input");x=g.listSelections();for(var _=0;_<x.length;_++)g.indentLine(x[_].from().line,null,!0);ud(g)})},openLine:function(g){return g.replaceSelection(`
`,"start")},toggleOverwrite:function(g){return g.toggleOverwrite()}};function Tx(g,x){var S=et(g.doc,x),_=Wi(S);return _!=S&&(x=jt(_)),vy(!0,g,_,x,1)}function Dx(g,x){var S=Tx(g,x.line),_=et(g.doc,S.line),C=Ce(_,g.doc.direction);if(!C||C[0].level==0){var O=Math.max(S.ch,_.text.search(/\S/)),N=x.line==S.line&&x.ch<=O&&x.ch;return Xe(S.line,N?0:O,S.sticky)}return S}function Bg(g,x,S){if(typeof x=="string"&&!(x=jh[x]))return!1;g.display.input.ensurePolled();var _=g.display.shift,C=!1;try{g.isReadOnly()&&(g.state.suppressEdits=!0),S&&(g.display.shift=!1),C=x(g)!=At}finally{g.display.shift=_,g.state.suppressEdits=!1}return C}var PS=new qe;function Uh(g,x,S,_){var C=g.state.keySeq;if(C){if(Ax(x))return"handled";if(/\'$/.test(x)?g.state.keySeq=null:PS.set(50,function(){g.state.keySeq==C&&(g.state.keySeq=null,g.display.input.reset())}),Lx(g,C+" "+x,S,_))return!0}return Lx(g,x,S,_)}function Lx(g,x,S,_){var C=function(O,N,j){for(var V=0;V<O.state.keyMaps.length;V++){var W=md(N,O.state.keyMaps[V],j,O);if(W)return W}return O.options.extraKeys&&md(N,O.options.extraKeys,j,O)||md(N,O.options.keyMap,j,O)}(g,x,_);return C=="multi"&&(g.state.keySeq=x),C=="handled"&&Hr(g,"keyHandled",g,x,S),C!="handled"&&C!="multi"||(rn(S),ty(g)),!!C}function Rx(g,x){var S=kx(x,!0);return!!S&&(x.shiftKey&&!g.state.keySeq?Uh(g,"Shift-"+S,x,function(_){return Bg(g,_,!0)})||Uh(g,S,x,function(_){if(typeof _=="string"?/^go[A-Z]/.test(_):_.motion)return Bg(g,_)}):Uh(g,S,x,function(_){return Bg(g,_)}))}var xy=null;function Fx(g){var x=this;if(!(g.target&&g.target!=x.display.input.getField()||(x.curOp.focus=ee(ze(x)),dt(x,g)))){c&&d<11&&g.keyCode==27&&(g.returnValue=!1);var S=g.keyCode;x.display.shift=S==16||g.shiftKey;var _=Rx(x,g);y&&(xy=_?S:null,_||S!=88||or||!(k?g.metaKey:g.ctrlKey)||x.replaceSelection("",null,"cut")),a&&!k&&!_&&S==46&&g.shiftKey&&!g.ctrlKey&&document.execCommand&&document.execCommand("cut"),S!=18||/\bCodeMirror-crosshair\b/.test(x.display.lineDiv.className)||function(C){var O=C.display.lineDiv;function N(j){j.keyCode!=18&&j.altKey||(U(O,"CodeMirror-crosshair"),We(document,"keyup",N),We(document,"mouseover",N))}z(O,"CodeMirror-crosshair"),De(document,"keyup",N),De(document,"mouseover",N)}(x)}}function Mx(g){g.keyCode==16&&(this.doc.sel.shift=!1),dt(this,g)}function Ox(g){var x=this;if(!(g.target&&g.target!=x.display.input.getField()||pr(x.display,g)||dt(x,g)||g.ctrlKey&&!g.altKey||k&&g.metaKey)){var S=g.keyCode,_=g.charCode;if(y&&S==xy)return xy=null,void rn(g);if(!y||g.which&&!(g.which<10)||!Rx(x,g)){var C=String.fromCharCode(_??S);C!="\b"&&(function(O,N,j){return Uh(O,"'"+j+"'",N,function(V){return Bg(O,V,!0)})}(x,g,C)||x.display.input.onKeyPress(g))}}}var qh,Hh,wy=function(g,x,S){this.time=g,this.pos=x,this.button=S};function $x(g){var x=this,S=x.display;if(!(dt(x,g)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=g.shiftKey,pr(S,g))h||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));else if(!_y(x,g)){var _=Wc(x,g),C=Ki(g),O=_?function(N,j){var V=+new Date;return Hh&&Hh.compare(V,N,j)?(qh=Hh=null,"triple"):qh&&qh.compare(V,N,j)?(Hh=new wy(V,N,j),qh=null,"double"):(qh=new wy(V,N,j),Hh=null,"single")}(_,C):"single";He(x).focus(),C==1&&x.state.selectingText&&x.state.selectingText(g),_&&function(N,j,V,W,ce){var fe="Click";return W=="double"?fe="Double"+fe:W=="triple"&&(fe="Triple"+fe),Uh(N,Cx(fe=(j==1?"Left":j==2?"Middle":"Right")+fe,ce),ce,function(Se){if(typeof Se=="string"&&(Se=jh[Se]),!Se)return!1;var be=!1;try{N.isReadOnly()&&(N.state.suppressEdits=!0),be=Se(N,V)!=At}finally{N.state.suppressEdits=!1}return be})}(x,C,_,O,g)||(C==1?_?function(N,j,V,W){c?setTimeout(je(Iv,N),0):N.curOp.focus=ee(ze(N));var ce,fe=function(be,$e,Ne){var Oe=be.getOption("configureMouse"),Ve=Oe?Oe(be,$e,Ne):{};if(Ve.unit==null){var nt=R?Ne.shiftKey&&Ne.metaKey:Ne.altKey;Ve.unit=nt?"rectangle":$e=="single"?"char":$e=="double"?"word":"line"}return(Ve.extend==null||be.doc.extend)&&(Ve.extend=be.doc.extend||Ne.shiftKey),Ve.addNew==null&&(Ve.addNew=k?Ne.metaKey:Ne.ctrlKey),Ve.moveOnDrag==null&&(Ve.moveOnDrag=!(k?Ne.altKey:Ne.ctrlKey)),Ve}(N,V,W),Se=N.doc.sel;N.options.dragDrop&&Ns&&!N.isReadOnly()&&V=="single"&&(ce=Se.contains(j))>-1&&(pt((ce=Se.ranges[ce]).from(),j)<0||j.xRel>0)&&(pt(ce.to(),j)>0||j.xRel<0)?function(be,$e,Ne,Oe){var Ve=be.display,nt=!1,Je=Eo(be,function(mt){h&&(Ve.scroller.draggable=!1),be.state.draggingText=!1,be.state.delayingBlurEvent&&(be.hasFocus()?be.state.delayingBlurEvent=!1:ny(be)),We(Ve.wrapper.ownerDocument,"mouseup",Je),We(Ve.wrapper.ownerDocument,"mousemove",gt),We(Ve.scroller,"dragstart",ct),We(Ve.scroller,"drop",Je),nt||(rn(mt),Oe.addNew||Mg(be.doc,Ne,null,null,Oe.extend),h&&!v||c&&d==9?setTimeout(function(){Ve.wrapper.ownerDocument.body.focus({preventScroll:!0}),Ve.input.focus()},20):Ve.input.focus())}),gt=function(mt){nt=nt||Math.abs($e.clientX-mt.clientX)+Math.abs($e.clientY-mt.clientY)>=10},ct=function(){return nt=!0};h&&(Ve.scroller.draggable=!0),be.state.draggingText=Je,Je.copy=!Oe.moveOnDrag,De(Ve.wrapper.ownerDocument,"mouseup",Je),De(Ve.wrapper.ownerDocument,"mousemove",gt),De(Ve.scroller,"dragstart",ct),De(Ve.scroller,"drop",Je),be.state.delayingBlurEvent=!0,setTimeout(function(){return Ve.input.focus()},20),Ve.scroller.dragDrop&&Ve.scroller.dragDrop()}(N,W,j,fe):function(be,$e,Ne,Oe){c&&ny(be);var Ve=be.display,nt=be.doc;rn($e);var Je,gt,ct=nt.sel,mt=ct.ranges;if(Oe.addNew&&!Oe.extend?(gt=nt.sel.contains(Ne),Je=gt>-1?mt[gt]:new Pr(Ne,Ne)):(Je=nt.sel.primary(),gt=nt.sel.primIndex),Oe.unit=="rectangle")Oe.addNew||(Je=new Pr(Ne,Ne)),Ne=Wc(be,$e,!0,!0),gt=-1;else{var bn=Ix(be,Ne,Oe.unit);Je=Oe.extend?gy(Je,bn.anchor,bn.head,Oe.extend):bn}Oe.addNew?gt==-1?(gt=mt.length,Wo(nt,hl(be,mt.concat([Je]),gt),{scroll:!1,origin:"*mouse"})):mt.length>1&&mt[gt].empty()&&Oe.unit=="char"&&!Oe.extend?(Wo(nt,hl(be,mt.slice(0,gt).concat(mt.slice(gt+1)),0),{scroll:!1,origin:"*mouse"}),ct=nt.sel):my(nt,gt,Je,nn):(gt=0,Wo(nt,new ha([Je],0),nn),ct=nt.sel);var Ot=Ne;function Hn($n){if(pt(Ot,$n)!=0)if(Ot=$n,Oe.unit=="rectangle"){for(var Br=[],Fn=be.options.tabSize,Jn=Ie(et(nt,Ne.line).text,Ne.ch,Fn),Nn=Ie(et(nt,$n.line).text,$n.ch,Fn),br=Math.min(Jn,Nn),us=Math.max(Jn,Nn),zr=Math.min(Ne.line,$n.line),Yo=Math.min(be.lastLine(),Math.max(Ne.line,$n.line));zr<=Yo;zr++){var Xo=et(nt,zr).text,Ci=On(Xo,br,Fn);br==us?Br.push(new Pr(Xe(zr,Ci),Xe(zr,Ci))):Xo.length>Ci&&Br.push(new Pr(Xe(zr,Ci),Xe(zr,On(Xo,us,Fn))))}Br.length||Br.push(new Pr(Ne,Ne)),Wo(nt,hl(be,ct.ranges.slice(0,gt).concat(Br),gt),{origin:"*mouse",scroll:!1}),be.scrollIntoView($n)}else{var cs,Ia=Je,$o=Ix(be,$n,Oe.unit),gl=Ia.anchor;pt($o.anchor,gl)>0?(cs=$o.head,gl=Rr(Ia.from(),$o.anchor)):(cs=$o.anchor,gl=Ar(Ia.to(),$o.head));var Hg=ct.ranges.slice(0);Hg[gt]=function(Yx,Qc){var qs=Qc.anchor,ec=Qc.head,US=et(Yx.doc,qs.line);if(pt(qs,ec)==0&&qs.sticky==ec.sticky)return Qc;var xd=Ce(US);if(!xd)return Qc;var Cy=ae(xd,qs.ch,qs.sticky),Vh=xd[Cy];if(Vh.from!=qs.ch&&Vh.to!=qs.ch)return Qc;var Gg,Wh=Cy+(Vh.from==qs.ch==(Vh.level!=1)?0:1);if(Wh==0||Wh==xd.length)return Qc;if(ec.line!=qs.line)Gg=(ec.line-qs.line)*(Yx.doc.direction=="ltr"?1:-1)>0;else{var ky=ae(xd,ec.ch,ec.sticky),Xx=ky-Cy||(ec.ch-qs.ch)*(Vh.level==1?-1:1);Gg=ky==Wh-1||ky==Wh?Xx<0:Xx>0}var Ty=xd[Wh+(Gg?-1:0)],Zx=Gg==(Ty.level==1),Kx=Zx?Ty.from:Ty.to,Jx=Zx?"after":"before";return qs.ch==Kx&&qs.sticky==Jx?Qc:new Pr(new Xe(qs.line,Kx,Jx),ec)}(be,new Pr(qt(nt,gl),cs)),Wo(nt,hl(be,Hg,gt),nn)}}var fn=Ve.wrapper.getBoundingClientRect(),ar=0;function Nr($n){var Br=++ar,Fn=Wc(be,$n,!0,Oe.unit=="rectangle");if(Fn)if(pt(Fn,Ot)!=0){be.curOp.focus=ee(ze(be)),Hn(Fn);var Jn=kg(Ve,nt);(Fn.line>=Jn.to||Fn.line<Jn.from)&&setTimeout(Eo(be,function(){ar==Br&&Nr($n)}),150)}else{var Nn=$n.clientY<fn.top?-20:$n.clientY>fn.bottom?20:0;Nn&&setTimeout(Eo(be,function(){ar==Br&&(Ve.scroller.scrollTop+=Nn,Nr($n))}),50)}}function lr($n){be.state.selectingText=!1,ar=1/0,$n&&(rn($n),Ve.input.focus()),We(Ve.wrapper.ownerDocument,"mousemove",Zn),We(Ve.wrapper.ownerDocument,"mouseup",ur),nt.history.lastSelOrigin=null}var Zn=Eo(be,function($n){$n.buttons!==0&&Ki($n)?Nr($n):lr($n)}),ur=Eo(be,lr);be.state.selectingText=ur,De(Ve.wrapper.ownerDocument,"mousemove",Zn),De(Ve.wrapper.ownerDocument,"mouseup",ur)}(N,W,j,fe)}(x,_,O,g):Er(g)==S.scroller&&rn(g):C==2?(_&&Mg(x.doc,_),setTimeout(function(){return S.input.focus()},20)):C==3&&(L?x.display.input.onContextMenu(g):ny(x)))}}}function Ix(g,x,S){if(S=="char")return new Pr(x,x);if(S=="word")return g.findWordAt(x);if(S=="line")return new Pr(Xe(x.line,0),qt(g.doc,Xe(x.line+1,0)));var _=S(g,x);return new Pr(_.from,_.to)}function Px(g,x,S,_){var C,O;if(x.touches)C=x.touches[0].clientX,O=x.touches[0].clientY;else try{C=x.clientX,O=x.clientY}catch{return!1}if(C>=Math.floor(g.display.gutters.getBoundingClientRect().right))return!1;_&&rn(x);var N=g.display,j=N.lineDiv.getBoundingClientRect();if(O>j.bottom||!xt(g,S))return sn(x);O-=j.top-N.viewOffset;for(var V=0;V<g.display.gutterSpecs.length;++V){var W=N.gutters.childNodes[V];if(W&&W.getBoundingClientRect().right>=C)return tt(g,S,g,Sr(g.doc,O),g.display.gutterSpecs[V].className,x),sn(x)}}function _y(g,x){return Px(g,x,"gutterClick",!0)}function Nx(g,x){pr(g.display,x)||function(S,_){return xt(S,"gutterContextMenu")?Px(S,_,"gutterContextMenu",!1):!1}(g,x)||dt(g,x,"contextmenu")||L||g.display.input.onContextMenu(x)}function Bx(g){g.display.wrapper.className=g.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+g.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Sh(g)}wy.prototype.compare=function(g,x,S){return this.time+400>g&&pt(x,this.pos)==0&&S==this.button};var bd={toString:function(){return"CodeMirror.Init"}},zx={},zg={};function NS(g,x,S){if(!x!=!(S&&S!=bd)){var _=g.display.dragFunctions,C=x?De:We;C(g.display.scroller,"dragstart",_.start),C(g.display.scroller,"dragenter",_.enter),C(g.display.scroller,"dragover",_.over),C(g.display.scroller,"dragleave",_.leave),C(g.display.scroller,"drop",_.drop)}}function BS(g){g.options.lineWrapping?(z(g.display.wrapper,"CodeMirror-wrap"),g.display.sizer.style.minWidth="",g.display.sizerWidth=null):(U(g.display.wrapper,"CodeMirror-wrap"),yt(g)),Q0(g),_s(g),Sh(g),setTimeout(function(){return cd(g)},100)}function Ri(g,x){var S=this;if(!(this instanceof Ri))return new Ri(g,x);this.options=x=x?we(x):{},we(zx,x,!1);var _=x.value;typeof _=="string"?_=new Es(_,x.mode,null,x.lineSeparator,x.direction):x.mode&&(_.modeOption=x.mode),this.doc=_;var C=new Ri.inputStyles[x.inputStyle](this),O=this.display=new CS(g,_,C,x);for(var N in O.wrapper.CodeMirror=this,Bx(this),x.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Uv(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qe,keySeq:null,specialChars:null},x.autofocus&&!D&&O.input.focus(),c&&d<11&&setTimeout(function(){return S.display.input.reset(!0)},20),function(V){var W=V.display;De(W.scroller,"mousedown",Eo(V,$x)),De(W.scroller,"dblclick",c&&d<11?Eo(V,function(Oe){if(!dt(V,Oe)){var Ve=Wc(V,Oe);if(Ve&&!_y(V,Oe)&&!pr(V.display,Oe)){rn(Oe);var nt=V.findWordAt(Ve);Mg(V.doc,nt.anchor,nt.head)}}}):function(Oe){return dt(V,Oe)||rn(Oe)}),De(W.scroller,"contextmenu",function(Oe){return Nx(V,Oe)}),De(W.input.getField(),"contextmenu",function(Oe){W.scroller.contains(Oe.target)||Nx(V,Oe)});var ce,fe={end:0};function Se(){W.activeTouch&&(ce=setTimeout(function(){return W.activeTouch=null},1e3),(fe=W.activeTouch).end=+new Date)}function be(Oe){if(Oe.touches.length!=1)return!1;var Ve=Oe.touches[0];return Ve.radiusX<=1&&Ve.radiusY<=1}function $e(Oe,Ve){if(Ve.left==null)return!0;var nt=Ve.left-Oe.left,Je=Ve.top-Oe.top;return nt*nt+Je*Je>400}De(W.scroller,"touchstart",function(Oe){if(!dt(V,Oe)&&!be(Oe)&&!_y(V,Oe)){W.input.ensurePolled(),clearTimeout(ce);var Ve=+new Date;W.activeTouch={start:Ve,moved:!1,prev:Ve-fe.end<=300?fe:null},Oe.touches.length==1&&(W.activeTouch.left=Oe.touches[0].pageX,W.activeTouch.top=Oe.touches[0].pageY)}}),De(W.scroller,"touchmove",function(){W.activeTouch&&(W.activeTouch.moved=!0)}),De(W.scroller,"touchend",function(Oe){var Ve=W.activeTouch;if(Ve&&!pr(W,Oe)&&Ve.left!=null&&!Ve.moved&&new Date-Ve.start<300){var nt,Je=V.coordsChar(W.activeTouch,"page");nt=!Ve.prev||$e(Ve,Ve.prev)?new Pr(Je,Je):!Ve.prev.prev||$e(Ve,Ve.prev.prev)?V.findWordAt(Je):new Pr(Xe(Je.line,0),qt(V.doc,Xe(Je.line+1,0))),V.setSelection(nt.anchor,nt.head),V.focus(),rn(Oe)}Se()}),De(W.scroller,"touchcancel",Se),De(W.scroller,"scroll",function(){W.scroller.clientHeight&&(kh(V,W.scroller.scrollTop),Xc(V,W.scroller.scrollLeft,!0),tt(V,"scroll",V))}),De(W.scroller,"mousewheel",function(Oe){return Yv(V,Oe)}),De(W.scroller,"DOMMouseScroll",function(Oe){return Yv(V,Oe)}),De(W.wrapper,"scroll",function(){return W.wrapper.scrollTop=W.wrapper.scrollLeft=0}),W.dragFunctions={enter:function(Oe){dt(V,Oe)||Tn(Oe)},over:function(Oe){dt(V,Oe)||(function(Ve,nt){var Je=Wc(Ve,nt);if(Je){var gt=document.createDocumentFragment();ey(Ve,Je,gt),Ve.display.dragCursor||(Ve.display.dragCursor=X("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),Ve.display.lineSpace.insertBefore(Ve.display.dragCursor,Ve.display.cursorDiv)),Y(Ve.display.dragCursor,gt)}}(V,Oe),Tn(Oe))},start:function(Oe){return function(Ve,nt){if(c&&(!Ve.state.draggingText||+new Date-wx<100))Tn(nt);else if(!dt(Ve,nt)&&!pr(Ve.display,nt)&&(nt.dataTransfer.setData("Text",Ve.getSelection()),nt.dataTransfer.effectAllowed="copyMove",nt.dataTransfer.setDragImage&&!v)){var Je=X("img",null,null,"position: fixed; left: 0; top: 0;");Je.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(Je.width=Je.height=1,Ve.display.wrapper.appendChild(Je),Je._top=Je.offsetTop),nt.dataTransfer.setDragImage(Je,0,0),y&&Je.parentNode.removeChild(Je)}}(V,Oe)},drop:Eo(V,FS),leave:function(Oe){dt(V,Oe)||_x(V)}};var Ne=W.input.getField();De(Ne,"keyup",function(Oe){return Mx.call(V,Oe)}),De(Ne,"keydown",Eo(V,Fx)),De(Ne,"keypress",Eo(V,Ox)),De(Ne,"focus",function(Oe){return ry(V,Oe)}),De(Ne,"blur",function(Oe){return ld(V,Oe)})}(this),MS(),Kc(this),this.curOp.forceUpdate=!0,Jv(this,_),x.autofocus&&!D||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&ry(S)},20):ld(this),zg)zg.hasOwnProperty(N)&&zg[N](this,x[N],bd);Gv(this),x.finishInit&&x.finishInit(this);for(var j=0;j<Ey.length;++j)Ey[j](this);Jc(this),h&&x.lineWrapping&&getComputedStyle(O.lineDiv).textRendering=="optimizelegibility"&&(O.lineDiv.style.textRendering="auto")}Ri.defaults=zx,Ri.optionHandlers=zg;var Ey=[];function Gh(g,x,S,_){var C,O=g.doc;S==null&&(S="add"),S=="smart"&&(O.mode.indent?C=rs(g,x).state:S="prev");var N=g.options.tabSize,j=et(O,x),V=Ie(j.text,null,N);j.stateAfter&&(j.stateAfter=null);var W,ce=j.text.match(/^\s*/)[0];if(_||/\S/.test(j.text)){if(S=="smart"&&((W=O.mode.indent(C,j.text.slice(ce.length),j.text))==At||W>150)){if(!_)return;S="prev"}}else W=0,S="not";S=="prev"?W=x>O.first?Ie(et(O,x-1).text,null,N):0:S=="add"?W=V+g.options.indentUnit:S=="subtract"?W=V-g.options.indentUnit:typeof S=="number"&&(W=V+S),W=Math.max(0,W);var fe="",Se=0;if(g.options.indentWithTabs)for(var be=Math.floor(W/N);be;--be)Se+=N,fe+="	";if(Se<W&&(fe+=pe(W-Se)),fe!=ce)return pd(O,fe,Xe(x,0),Xe(x,ce.length),"+input"),j.stateAfter=null,!0;for(var $e=0;$e<O.sel.ranges.length;$e++){var Ne=O.sel.ranges[$e];if(Ne.head.line==x&&Ne.head.ch<ce.length){var Oe=Xe(x,ce.length);my(O,$e,new Pr(Oe,Oe));break}}}Ri.defineInitHook=function(g){return Ey.push(g)};var pl=null;function jg(g){pl=g}function Sy(g,x,S,_,C){var O=g.doc;g.display.shift=!1,_||(_=O.sel);var N=+new Date-200,j=C=="paste"||g.state.pasteIncoming>N,V=mn(x),W=null;if(j&&_.ranges.length>1)if(pl&&pl.text.join(`
`)==x){if(_.ranges.length%pl.text.length==0){W=[];for(var ce=0;ce<pl.text.length;ce++)W.push(O.splitLines(pl.text[ce]))}}else V.length==_.ranges.length&&g.options.pasteLinesPerSelection&&(W=se(V,function(Ve){return[Ve]}));for(var fe=g.curOp.updateInput,Se=_.ranges.length-1;Se>=0;Se--){var be=_.ranges[Se],$e=be.from(),Ne=be.to();be.empty()&&(S&&S>0?$e=Xe($e.line,$e.ch-S):g.state.overwrite&&!j?Ne=Xe(Ne.line,Math.min(et(O,Ne.line).text.length,Ne.ch+ie(V).length)):j&&pl&&pl.lineWise&&pl.text.join(`
`)==V.join(`
`)&&($e=Ne=Xe($e.line,0)));var Oe={from:$e,to:Ne,text:W?W[Se%W.length]:V,origin:C||(j?"paste":g.state.cutIncoming>N?"cut":"+input")};hd(g.doc,Oe),Hr(g,"inputRead",g,Oe)}x&&!j&&Ux(g,x),ud(g),g.curOp.updateInput<2&&(g.curOp.updateInput=fe),g.curOp.typing=!0,g.state.pasteIncoming=g.state.cutIncoming=-1}function jx(g,x){var S=g.clipboardData&&g.clipboardData.getData("Text");if(S)return g.preventDefault(),x.isReadOnly()||x.options.disableInput||!x.hasFocus()||Us(x,function(){return Sy(x,S,0,null,"paste")}),!0}function Ux(g,x){if(g.options.electricChars&&g.options.smartIndent)for(var S=g.doc.sel,_=S.ranges.length-1;_>=0;_--){var C=S.ranges[_];if(!(C.head.ch>100||_&&S.ranges[_-1].head.line==C.head.line)){var O=g.getModeAt(C.head),N=!1;if(O.electricChars){for(var j=0;j<O.electricChars.length;j++)if(x.indexOf(O.electricChars.charAt(j))>-1){N=Gh(g,C.head.line,"smart");break}}else O.electricInput&&O.electricInput.test(et(g.doc,C.head.line).text.slice(0,C.head.ch))&&(N=Gh(g,C.head.line,"smart"));N&&Hr(g,"electricInput",g,C.head.line)}}}function qx(g){for(var x=[],S=[],_=0;_<g.doc.sel.ranges.length;_++){var C=g.doc.sel.ranges[_].head.line,O={anchor:Xe(C,0),head:Xe(C+1,0)};S.push(O),x.push(g.getRange(O.anchor,O.head))}return{text:x,ranges:S}}function Hx(g,x,S,_){g.setAttribute("autocorrect",S?"":"off"),g.setAttribute("autocapitalize",_?"":"off"),g.setAttribute("spellcheck",!!x)}function Gx(){var g=X("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),x=X("div",[g],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return h?g.style.width="1000px":g.setAttribute("wrap","off"),A&&(g.style.border="1px solid black"),Hx(g),x}function Ay(g,x,S,_,C){var O=x,N=S,j=et(g,x.line),V=C&&g.direction=="rtl"?-S:S;function W(Ve){var nt,Je;if(_=="codepoint"){var gt=j.text.charCodeAt(x.ch+(S>0?0:-1));if(isNaN(gt))nt=null;else{var ct=S>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;nt=new Xe(x.line,Math.max(0,Math.min(j.text.length,x.ch+S*(ct?2:1))),-S)}}else nt=C?function(mt,bn,Ot,Hn){var fn=Ce(bn,mt.doc.direction);if(!fn)return by(bn,Ot,Hn);Ot.ch>=bn.text.length?(Ot.ch=bn.text.length,Ot.sticky="before"):Ot.ch<=0&&(Ot.ch=0,Ot.sticky="after");var ar=ae(fn,Ot.ch,Ot.sticky),Nr=fn[ar];if(mt.doc.direction=="ltr"&&Nr.level%2==0&&(Hn>0?Nr.to>Ot.ch:Nr.from<Ot.ch))return by(bn,Ot,Hn);var lr,Zn=function(zr,Yo){return yy(bn,zr instanceof Xe?zr.ch:zr,Yo)},ur=function(zr){return mt.options.lineWrapping?(lr=lr||gr(mt,bn),Fv(mt,bn,lr,zr)):{begin:0,end:bn.text.length}},$n=ur(Ot.sticky=="before"?Zn(Ot,-1):Ot.ch);if(mt.doc.direction=="rtl"||Nr.level==1){var Br=Nr.level==1==Hn<0,Fn=Zn(Ot,Br?1:-1);if(Fn!=null&&(Br?Fn<=Nr.to&&Fn<=$n.end:Fn>=Nr.from&&Fn>=$n.begin)){var Jn=Br?"before":"after";return new Xe(Ot.line,Fn,Jn)}}var Nn=function(zr,Yo,Xo){for(var Ci=function(gl,Hg){return Hg?new Xe(Ot.line,Zn(gl,1),"before"):new Xe(Ot.line,gl,"after")};zr>=0&&zr<fn.length;zr+=Yo){var cs=fn[zr],Ia=Yo>0==(cs.level!=1),$o=Ia?Xo.begin:Zn(Xo.end,-1);if(cs.from<=$o&&$o<cs.to||($o=Ia?cs.from:Zn(cs.to,-1),Xo.begin<=$o&&$o<Xo.end))return Ci($o,Ia)}},br=Nn(ar+Hn,Hn,$n);if(br)return br;var us=Hn>0?$n.end:Zn($n.begin,-1);return us==null||Hn>0&&us==bn.text.length||!(br=Nn(Hn>0?0:fn.length-1,Hn,ur(us)))?null:br}(g.cm,j,x,S):by(j,x,S);if(nt==null){if(Ve||(Je=x.line+V)<g.first||Je>=g.first+g.size||(x=new Xe(Je,x.ch,x.sticky),!(j=et(g,Je))))return!1;x=vy(C,g.cm,j,x.line,V)}else x=nt;return!0}if(_=="char"||_=="codepoint")W();else if(_=="column")W(!0);else if(_=="word"||_=="group")for(var ce=null,fe=_=="group",Se=g.cm&&g.cm.getHelper(x,"wordChars"),be=!0;!(S<0)||W(!be);be=!1){var $e=j.text.charAt(x.ch)||`
`,Ne=re($e,Se)?"w":fe&&$e==`
`?"n":!fe||/\s/.test($e)?null:"p";if(!fe||be||Ne||(Ne="s"),ce&&ce!=Ne){S<0&&(S=1,W(),x.sticky="after");break}if(Ne&&(ce=Ne),S>0&&!W(!be))break}var Oe=$g(g,x,O,N,!0);return Xn(O,Oe)&&(Oe.hitSide=!0),Oe}function Vx(g,x,S,_){var C,O,N=g.doc,j=x.left;if(_=="page"){var V=Math.min(g.display.wrapper.clientHeight,He(g).innerHeight||N(g).documentElement.clientHeight),W=Math.max(V-.5*sd(g.display),3);C=(S>0?x.bottom:x.top)+S*W}else _=="line"&&(C=S>0?x.bottom+3:x.top-3);for(;(O=X0(g,j,C)).outside;){if(S<0?C<=0:C>=N.height){O.hitSide=!0;break}C+=5*S}return O}var Qr=function(g){this.cm=g,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Wx(g,x){var S=Vn(g,x.line);if(!S||S.hidden)return null;var _=et(g.doc,x.line),C=ut(S,_,x.line),O=Ce(_,g.doc.direction),N="left";O&&(N=ae(O,x.ch)%2?"right":"left");var j=Sv(C.map,x.ch,N);return j.offset=j.collapse=="right"?j.end:j.start,j}function vd(g,x){return x&&(g.bad=!0),g}function Ug(g,x,S){var _;if(x==g.display.lineDiv){if(!(_=g.display.lineDiv.childNodes[S]))return vd(g.clipPos(Xe(g.display.viewTo-1)),!0);x=null,S=0}else for(_=x;;_=_.parentNode){if(!_||_==g.display.lineDiv)return null;if(_.parentNode&&_.parentNode==g.display.lineDiv)break}for(var C=0;C<g.display.view.length;C++){var O=g.display.view[C];if(O.node==_)return zS(O,x,S)}}function zS(g,x,S){var _=g.text.firstChild,C=!1;if(!x||!le(_,x))return vd(Xe(jt(g.line),0),!0);if(x==_&&(C=!0,x=_.childNodes[S],S=0,!x)){var O=g.rest?ie(g.rest):g.line;return vd(Xe(jt(O),O.text.length),C)}var N=x.nodeType==3?x:null,j=x;for(N||x.childNodes.length!=1||x.firstChild.nodeType!=3||(N=x.firstChild,S&&(S=N.nodeValue.length));j.parentNode!=_;)j=j.parentNode;var V=g.measure,W=V.maps;function ce(Oe,Ve,nt){for(var Je=-1;Je<(W?W.length:0);Je++)for(var gt=Je<0?V.map:W[Je],ct=0;ct<gt.length;ct+=3){var mt=gt[ct+2];if(mt==Oe||mt==Ve){var bn=jt(Je<0?g.line:g.rest[Je]),Ot=gt[ct]+nt;return(nt<0||mt!=Oe)&&(Ot=gt[ct+(nt?1:0)]),Xe(bn,Ot)}}}var fe=ce(N,j,S);if(fe)return vd(fe,C);for(var Se=j.nextSibling,be=N?N.nodeValue.length-S:0;Se;Se=Se.nextSibling){if(fe=ce(Se,Se.firstChild,0))return vd(Xe(fe.line,fe.ch-be),C);be+=Se.textContent.length}for(var $e=j.previousSibling,Ne=S;$e;$e=$e.previousSibling){if(fe=ce($e,$e.firstChild,-1))return vd(Xe(fe.line,fe.ch+Ne),C);Ne+=$e.textContent.length}}Qr.prototype.init=function(g){var x=this,S=this,_=S.cm,C=S.div=g.lineDiv;function O(j){for(var V=j.target;V;V=V.parentNode){if(V==C)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(V.className))break}return!1}function N(j){if(O(j)&&!dt(_,j)){if(_.somethingSelected())jg({lineWise:!1,text:_.getSelections()}),j.type=="cut"&&_.replaceSelection("",null,"cut");else{if(!_.options.lineWiseCopyCut)return;var V=qx(_);jg({lineWise:!0,text:V.text}),j.type=="cut"&&_.operation(function(){_.setSelections(V.ranges,0,ht),_.replaceSelection("",null,"cut")})}if(j.clipboardData){j.clipboardData.clearData();var W=pl.text.join(`
`);if(j.clipboardData.setData("Text",W),j.clipboardData.getData("Text")==W)return void j.preventDefault()}var ce=Gx(),fe=ce.firstChild;_.display.lineSpace.insertBefore(ce,_.display.lineSpace.firstChild),fe.value=pl.text.join(`
`);var Se=ee(C.ownerDocument);de(fe),setTimeout(function(){_.display.lineSpace.removeChild(ce),Se.focus(),Se==C&&S.showPrimarySelection()},50)}}C.contentEditable=!0,Hx(C,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize),De(C,"paste",function(j){!O(j)||dt(_,j)||jx(j,_)||d<=11&&setTimeout(Eo(_,function(){return x.updateFromDOM()}),20)}),De(C,"compositionstart",function(j){x.composing={data:j.data,done:!1}}),De(C,"compositionupdate",function(j){x.composing||(x.composing={data:j.data,done:!1})}),De(C,"compositionend",function(j){x.composing&&(j.data!=x.composing.data&&x.readFromDOMSoon(),x.composing.done=!0)}),De(C,"touchstart",function(){return S.forceCompositionEnd()}),De(C,"input",function(){x.composing||x.readFromDOMSoon()}),De(C,"copy",N),De(C,"cut",N)},Qr.prototype.screenReaderLabelChanged=function(g){g?this.div.setAttribute("aria-label",g):this.div.removeAttribute("aria-label")},Qr.prototype.prepareSelection=function(){var g=$v(this.cm,!1);return g.focus=ee(this.div.ownerDocument)==this.div,g},Qr.prototype.showSelection=function(g,x){g&&this.cm.display.view.length&&((g.focus||x)&&this.showPrimarySelection(),this.showMultipleSelections(g))},Qr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qr.prototype.showPrimarySelection=function(){var g=this.getSelection(),x=this.cm,S=x.doc.sel.primary(),_=S.from(),C=S.to();if(x.display.viewTo==x.display.viewFrom||_.line>=x.display.viewTo||C.line<x.display.viewFrom)g.removeAllRanges();else{var O=Ug(x,g.anchorNode,g.anchorOffset),N=Ug(x,g.focusNode,g.focusOffset);if(!O||O.bad||!N||N.bad||pt(Rr(O,N),_)!=0||pt(Ar(O,N),C)!=0){var j=x.display.view,V=_.line>=x.display.viewFrom&&Wx(x,_)||{node:j[0].measure.map[2],offset:0},W=C.line<x.display.viewTo&&Wx(x,C);if(!W){var ce=j[j.length-1].measure,fe=ce.maps?ce.maps[ce.maps.length-1]:ce.map;W={node:fe[fe.length-1],offset:fe[fe.length-2]-fe[fe.length-3]}}if(V&&W){var Se,be=g.rangeCount&&g.getRangeAt(0);try{Se=I(V.node,V.offset,W.offset,W.node)}catch{}Se&&(!a&&x.state.focused?(g.collapse(V.node,V.offset),Se.collapsed||(g.removeAllRanges(),g.addRange(Se))):(g.removeAllRanges(),g.addRange(Se)),be&&g.anchorNode==null?g.addRange(be):a&&this.startGracePeriod()),this.rememberSelection()}else g.removeAllRanges()}}},Qr.prototype.startGracePeriod=function(){var g=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){g.gracePeriod=!1,g.selectionChanged()&&g.cm.operation(function(){return g.cm.curOp.selectionChanged=!0})},20)},Qr.prototype.showMultipleSelections=function(g){Y(this.cm.display.cursorDiv,g.cursors),Y(this.cm.display.selectionDiv,g.selection)},Qr.prototype.rememberSelection=function(){var g=this.getSelection();this.lastAnchorNode=g.anchorNode,this.lastAnchorOffset=g.anchorOffset,this.lastFocusNode=g.focusNode,this.lastFocusOffset=g.focusOffset},Qr.prototype.selectionInEditor=function(){var g=this.getSelection();if(!g.rangeCount)return!1;var x=g.getRangeAt(0).commonAncestorContainer;return le(this.div,x)},Qr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&ee(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qr.prototype.blur=function(){this.div.blur()},Qr.prototype.getField=function(){return this.div},Qr.prototype.supportsTouch=function(){return!0},Qr.prototype.receivedFocus=function(){var g=this,x=this;this.selectionInEditor()?setTimeout(function(){return g.pollSelection()},20):Us(this.cm,function(){return x.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function S(){x.cm.state.focused&&(x.pollSelection(),x.polling.set(x.cm.options.pollInterval,S))})},Qr.prototype.selectionChanged=function(){var g=this.getSelection();return g.anchorNode!=this.lastAnchorNode||g.anchorOffset!=this.lastAnchorOffset||g.focusNode!=this.lastFocusNode||g.focusOffset!=this.lastFocusOffset},Qr.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var g=this.getSelection(),x=this.cm;if(T&&m&&this.cm.display.gutterSpecs.length&&function(C){for(var O=C;O;O=O.parentNode)if(/CodeMirror-gutter-wrapper/.test(O.className))return!0;return!1}(g.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var S=Ug(x,g.anchorNode,g.anchorOffset),_=Ug(x,g.focusNode,g.focusOffset);S&&_&&Us(x,function(){Wo(x.doc,Xu(S,_),ht),(S.bad||_.bad)&&(x.curOp.selectionChanged=!0)})}}},Qr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var g,x,S,_=this.cm,C=_.display,O=_.doc.sel.primary(),N=O.from(),j=O.to();if(N.ch==0&&N.line>_.firstLine()&&(N=Xe(N.line-1,et(_.doc,N.line-1).length)),j.ch==et(_.doc,j.line).text.length&&j.line<_.lastLine()&&(j=Xe(j.line+1,0)),N.line<C.viewFrom||j.line>C.viewTo-1)return!1;N.line==C.viewFrom||(g=Yc(_,N.line))==0?(x=jt(C.view[0].line),S=C.view[0].node):(x=jt(C.view[g].line),S=C.view[g-1].node.nextSibling);var V,W,ce=Yc(_,j.line);if(ce==C.view.length-1?(V=C.viewTo-1,W=C.lineDiv.lastChild):(V=jt(C.view[ce+1].line)-1,W=C.view[ce+1].node.previousSibling),!S)return!1;for(var fe=_.doc.splitLines(function(bn,Ot,Hn,fn,ar){var Nr="",lr=!1,Zn=bn.doc.lineSeparator(),ur=!1;function $n(Nn){return function(br){return br.id==Nn}}function Br(){lr&&(Nr+=Zn,ur&&(Nr+=Zn),lr=ur=!1)}function Fn(Nn){Nn&&(Br(),Nr+=Nn)}function Jn(Nn){if(Nn.nodeType==1){var br=Nn.getAttribute("cm-text");if(br)return void Fn(br);var us,zr=Nn.getAttribute("cm-marker");if(zr){var Yo=bn.findMarks(Xe(fn,0),Xe(ar+1,0),$n(+zr));return void(Yo.length&&(us=Yo[0].find(0))&&Fn(hn(bn.doc,us.from,us.to).join(Zn)))}if(Nn.getAttribute("contenteditable")=="false")return;var Xo=/^(pre|div|p|li|table|br)$/i.test(Nn.nodeName);if(!/^br$/i.test(Nn.nodeName)&&Nn.textContent.length==0)return;Xo&&Br();for(var Ci=0;Ci<Nn.childNodes.length;Ci++)Jn(Nn.childNodes[Ci]);/^(pre|p)$/i.test(Nn.nodeName)&&(ur=!0),Xo&&(lr=!0)}else Nn.nodeType==3&&Fn(Nn.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Jn(Ot),Ot!=Hn;)Ot=Ot.nextSibling,ur=!1;return Nr}(_,S,W,x,V)),Se=hn(_.doc,Xe(x,0),Xe(V,et(_.doc,V).text.length));fe.length>1&&Se.length>1;)if(ie(fe)==ie(Se))fe.pop(),Se.pop(),V--;else{if(fe[0]!=Se[0])break;fe.shift(),Se.shift(),x++}for(var be=0,$e=0,Ne=fe[0],Oe=Se[0],Ve=Math.min(Ne.length,Oe.length);be<Ve&&Ne.charCodeAt(be)==Oe.charCodeAt(be);)++be;for(var nt=ie(fe),Je=ie(Se),gt=Math.min(nt.length-(fe.length==1?be:0),Je.length-(Se.length==1?be:0));$e<gt&&nt.charCodeAt(nt.length-$e-1)==Je.charCodeAt(Je.length-$e-1);)++$e;if(fe.length==1&&Se.length==1&&x==N.line)for(;be&&be>N.ch&&nt.charCodeAt(nt.length-$e-1)==Je.charCodeAt(Je.length-$e-1);)be--,$e++;fe[fe.length-1]=nt.slice(0,nt.length-$e).replace(/^\u200b+/,""),fe[0]=fe[0].slice(be).replace(/\u200b+$/,"");var ct=Xe(x,be),mt=Xe(V,Se.length?ie(Se).length-$e:0);return fe.length>1||fe[0]||pt(ct,mt)?(pd(_.doc,fe,ct,mt,"+input"),!0):void 0},Qr.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qr.prototype.reset=function(){this.forceCompositionEnd()},Qr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qr.prototype.readFromDOMSoon=function(){var g=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(g.readDOMTimeout=null,g.composing){if(!g.composing.done)return;g.composing=null}g.updateFromDOM()},80))},Qr.prototype.updateFromDOM=function(){var g=this;!this.cm.isReadOnly()&&this.pollContent()||Us(this.cm,function(){return _s(g.cm)})},Qr.prototype.setUneditable=function(g){g.contentEditable="false"},Qr.prototype.onKeyPress=function(g){g.charCode==0||this.composing||(g.preventDefault(),this.cm.isReadOnly()||Eo(this.cm,Sy)(this.cm,String.fromCharCode(g.charCode==null?g.keyCode:g.charCode),0))},Qr.prototype.readOnlyChanged=function(g){this.div.contentEditable=String(g!="nocursor")},Qr.prototype.onContextMenu=function(){},Qr.prototype.resetPosition=function(){},Qr.prototype.needsContentAttribute=!0;var to=function(g){this.cm=g,this.prevInput="",this.pollingFast=!1,this.polling=new qe,this.hasSelection=!1,this.composing=null,this.resetting=!1};to.prototype.init=function(g){var x=this,S=this,_=this.cm;this.createField(g);var C=this.textarea;function O(N){if(!dt(_,N)){if(_.somethingSelected())jg({lineWise:!1,text:_.getSelections()});else{if(!_.options.lineWiseCopyCut)return;var j=qx(_);jg({lineWise:!0,text:j.text}),N.type=="cut"?_.setSelections(j.ranges,null,ht):(S.prevInput="",C.value=j.text.join(`
`),de(C))}N.type=="cut"&&(_.state.cutIncoming=+new Date)}}g.wrapper.insertBefore(this.wrapper,g.wrapper.firstChild),A&&(C.style.width="0px"),De(C,"input",function(){c&&d>=9&&x.hasSelection&&(x.hasSelection=null),S.poll()}),De(C,"paste",function(N){dt(_,N)||jx(N,_)||(_.state.pasteIncoming=+new Date,S.fastPoll())}),De(C,"cut",O),De(C,"copy",O),De(g.scroller,"paste",function(N){if(!pr(g,N)&&!dt(_,N)){if(!C.dispatchEvent)return _.state.pasteIncoming=+new Date,void S.focus();var j=new Event("paste");j.clipboardData=N.clipboardData,C.dispatchEvent(j)}}),De(g.lineSpace,"selectstart",function(N){pr(g,N)||rn(N)}),De(C,"compositionstart",function(){var N=_.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:N,range:_.markText(N,_.getCursor("to"),{className:"CodeMirror-composing"})}}),De(C,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},to.prototype.createField=function(g){this.wrapper=Gx(),this.textarea=this.wrapper.firstChild},to.prototype.screenReaderLabelChanged=function(g){g?this.textarea.setAttribute("aria-label",g):this.textarea.removeAttribute("aria-label")},to.prototype.prepareSelection=function(){var g=this.cm,x=g.display,S=g.doc,_=$v(g);if(g.options.moveInputWithCursor){var C=dl(g,S.sel.primary().head,"div"),O=x.wrapper.getBoundingClientRect(),N=x.lineDiv.getBoundingClientRect();_.teTop=Math.max(0,Math.min(x.wrapper.clientHeight-10,C.top+N.top-O.top)),_.teLeft=Math.max(0,Math.min(x.wrapper.clientWidth-10,C.left+N.left-O.left))}return _},to.prototype.showSelection=function(g){var x=this.cm.display;Y(x.cursorDiv,g.cursors),Y(x.selectionDiv,g.selection),g.teTop!=null&&(this.wrapper.style.top=g.teTop+"px",this.wrapper.style.left=g.teLeft+"px")},to.prototype.reset=function(g){if(!(this.contextMenuPending||this.composing&&g)){var x=this.cm;if(this.resetting=!0,x.somethingSelected()){this.prevInput="";var S=x.getSelection();this.textarea.value=S,x.state.focused&&de(this.textarea),c&&d>=9&&(this.hasSelection=S)}else g||(this.prevInput=this.textarea.value="",c&&d>=9&&(this.hasSelection=null));this.resetting=!1}},to.prototype.getField=function(){return this.textarea},to.prototype.supportsTouch=function(){return!1},to.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!D||ee(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},to.prototype.blur=function(){this.textarea.blur()},to.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},to.prototype.receivedFocus=function(){this.slowPoll()},to.prototype.slowPoll=function(){var g=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){g.poll(),g.cm.state.focused&&g.slowPoll()})},to.prototype.fastPoll=function(){var g=!1,x=this;x.pollingFast=!0,x.polling.set(20,function S(){x.poll()||g?(x.pollingFast=!1,x.slowPoll()):(g=!0,x.polling.set(60,S))})},to.prototype.poll=function(){var g=this,x=this.cm,S=this.textarea,_=this.prevInput;if(this.contextMenuPending||this.resetting||!x.state.focused||Kr(S)&&!_&&!this.composing||x.isReadOnly()||x.options.disableInput||x.state.keySeq)return!1;var C=S.value;if(C==_&&!x.somethingSelected())return!1;if(c&&d>=9&&this.hasSelection===C||k&&/[\uf700-\uf7ff]/.test(C))return x.display.input.reset(),!1;if(x.doc.sel==x.display.selForContextMenu){var O=C.charCodeAt(0);if(O!=8203||_||(_=""),O==8666)return this.reset(),this.cm.execCommand("undo")}for(var N=0,j=Math.min(_.length,C.length);N<j&&_.charCodeAt(N)==C.charCodeAt(N);)++N;return Us(x,function(){Sy(x,C.slice(N),_.length-N,null,g.composing?"*compose":null),C.length>1e3||C.indexOf(`
`)>-1?S.value=g.prevInput="":g.prevInput=C,g.composing&&(g.composing.range.clear(),g.composing.range=x.markText(g.composing.start,x.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},to.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},to.prototype.onKeyPress=function(){c&&d>=9&&(this.hasSelection=null),this.fastPoll()},to.prototype.onContextMenu=function(g){var x=this,S=x.cm,_=S.display,C=x.textarea;x.contextMenuPending&&x.contextMenuPending();var O=Wc(S,g),N=_.scroller.scrollTop;if(O&&!y){S.options.resetSelectionOnContextMenu&&S.doc.sel.contains(O)==-1&&Eo(S,Wo)(S.doc,Xu(O),ht);var j,V=C.style.cssText,W=x.wrapper.style.cssText,ce=x.wrapper.offsetParent.getBoundingClientRect();if(x.wrapper.style.cssText="position: static",C.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(g.clientY-ce.top-5)+"px; left: "+(g.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,h&&(j=C.ownerDocument.defaultView.scrollY),_.input.focus(),h&&C.ownerDocument.defaultView.scrollTo(null,j),_.input.reset(),S.somethingSelected()||(C.value=x.prevInput=" "),x.contextMenuPending=be,_.selForContextMenu=S.doc.sel,clearTimeout(_.detectingSelectAll),c&&d>=9&&Se(),L){Tn(g);var fe=function(){We(window,"mouseup",fe),setTimeout(be,20)};De(window,"mouseup",fe)}else setTimeout(be,50)}function Se(){if(C.selectionStart!=null){var $e=S.somethingSelected(),Ne=""+($e?C.value:"");C.value="",C.value=Ne,x.prevInput=$e?"":"",C.selectionStart=1,C.selectionEnd=Ne.length,_.selForContextMenu=S.doc.sel}}function be(){if(x.contextMenuPending==be&&(x.contextMenuPending=!1,x.wrapper.style.cssText=W,C.style.cssText=V,c&&d<9&&_.scrollbars.setScrollTop(_.scroller.scrollTop=N),C.selectionStart!=null)){(!c||c&&d<9)&&Se();var $e=0,Ne=function(){_.selForContextMenu==S.doc.sel&&C.selectionStart==0&&C.selectionEnd>0&&x.prevInput==""?Eo(S,fx)(S):$e++<10?_.detectingSelectAll=setTimeout(Ne,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(Ne,200)}}},to.prototype.readOnlyChanged=function(g){g||this.reset(),this.textarea.disabled=g=="nocursor",this.textarea.readOnly=!!g},to.prototype.setUneditable=function(){},to.prototype.needsContentAttribute=!1,function(g){var x=g.optionHandlers;function S(_,C,O,N){g.defaults[_]=C,O&&(x[_]=N?function(j,V,W){W!=bd&&O(j,V,W)}:O)}g.defineOption=S,g.Init=bd,S("value","",function(_,C){return _.setValue(C)},!0),S("mode",null,function(_,C){_.doc.modeOption=C,dy(_)},!0),S("indentUnit",2,dy,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(_){Fh(_),Sh(_),_s(_)},!0),S("lineSeparator",null,function(_,C){if(_.doc.lineSep=C,C){var O=[],N=_.doc.first;_.doc.iter(function(V){for(var W=0;;){var ce=V.text.indexOf(C,W);if(ce==-1)break;W=ce+C.length,O.push(Xe(N,ce))}N++});for(var j=O.length-1;j>=0;j--)pd(_.doc,C,O[j],Xe(O[j].line,O[j].ch+C.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(_,C,O){_.state.specialChars=new RegExp(C.source+(C.test("	")?"":"|	"),"g"),O!=bd&&_.refresh()}),S("specialCharPlaceholder",Ai,function(_){return _.refresh()},!0),S("electricChars",!0),S("inputStyle",D?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(_,C){return _.getInputField().spellcheck=C},!0),S("autocorrect",!1,function(_,C){return _.getInputField().autocorrect=C},!0),S("autocapitalize",!1,function(_,C){return _.getInputField().autocapitalize=C},!0),S("rtlMoveVisually",!M),S("wholeLineUpdateBefore",!0),S("theme","default",function(_){Bx(_),Rh(_)},!0),S("keyMap","default",function(_,C,O){var N=Ng(C),j=O!=bd&&Ng(O);j&&j.detach&&j.detach(_,N),N.attach&&N.attach(_,j||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,BS,!0),S("gutters",[],function(_,C){_.display.gutterSpecs=cy(C,_.options.lineNumbers),Rh(_)},!0),S("fixedGutter",!0,function(_,C){_.display.gutters.style.left=C?J0(_.display)+"px":"0",_.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(_){return cd(_)},!0),S("scrollbarStyle","native",function(_){Uv(_),cd(_),_.display.scrollbars.setScrollTop(_.doc.scrollTop),_.display.scrollbars.setScrollLeft(_.doc.scrollLeft)},!0),S("lineNumbers",!1,function(_,C){_.display.gutterSpecs=cy(_.options.gutters,C),Rh(_)},!0),S("firstLineNumber",1,Rh,!0),S("lineNumberFormatter",function(_){return _},Rh,!0),S("showCursorWhenSelecting",!1,Ah,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(_,C){C=="nocursor"&&(ld(_),_.display.input.blur()),_.display.input.readOnlyChanged(C)}),S("screenReaderLabel",null,function(_,C){C=C===""?null:C,_.display.input.screenReaderLabelChanged(C)}),S("disableInput",!1,function(_,C){C||_.display.input.reset()},!0),S("dragDrop",!0,NS),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,Ah,!0),S("singleCursorHeightPerLine",!0,Ah,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,Fh,!0),S("addModeClass",!1,Fh,!0),S("pollInterval",100),S("undoDepth",200,function(_,C){return _.doc.history.undoDepth=C}),S("historyEventDelay",1250),S("viewportMargin",10,function(_){return _.refresh()},!0),S("maxHighlightLength",1e4,Fh,!0),S("moveInputWithCursor",!0,function(_,C){C||_.display.input.resetPosition()}),S("tabindex",null,function(_,C){return _.display.input.getField().tabIndex=C||""}),S("autofocus",null),S("direction","ltr",function(_,C){return _.doc.setDirection(C)},!0),S("phrases",null)}(Ri),function(g){var x=g.optionHandlers,S=g.helpers={};g.prototype={constructor:g,focus:function(){He(this).focus(),this.display.input.focus()},setOption:function(_,C){var O=this.options,N=O[_];O[_]==C&&_!="mode"||(O[_]=C,x.hasOwnProperty(_)&&Eo(this,x[_])(this,C,N),tt(this,"optionChange",this,_))},getOption:function(_){return this.options[_]},getDoc:function(){return this.doc},addKeyMap:function(_,C){this.state.keyMaps[C?"push":"unshift"](Ng(_))},removeKeyMap:function(_){for(var C=this.state.keyMaps,O=0;O<C.length;++O)if(C[O]==_||C[O].name==_)return C.splice(O,1),!0},addOverlay:ls(function(_,C){var O=_.token?_:g.getMode(this.options,_);if(O.startState)throw new Error("Overlays may not be stateful.");(function(N,j,V){for(var W=0,ce=V(j);W<N.length&&V(N[W])<=ce;)W++;N.splice(W,0,j)})(this.state.overlays,{mode:O,modeSpec:_,opaque:C&&C.opaque,priority:C&&C.priority||0},function(N){return N.priority}),this.state.modeGen++,_s(this)}),removeOverlay:ls(function(_){for(var C=this.state.overlays,O=0;O<C.length;++O){var N=C[O].modeSpec;if(N==_||typeof _=="string"&&N.name==_)return C.splice(O,1),this.state.modeGen++,void _s(this)}}),indentLine:ls(function(_,C,O){typeof C!="string"&&typeof C!="number"&&(C=C==null?this.options.smartIndent?"smart":"prev":C?"add":"subtract"),ci(this.doc,_)&&Gh(this,_,C,O)}),indentSelection:ls(function(_){for(var C=this.doc.sel.ranges,O=-1,N=0;N<C.length;N++){var j=C[N];if(j.empty())j.head.line>O&&(Gh(this,j.head.line,_,!0),O=j.head.line,N==this.doc.sel.primIndex&&ud(this));else{var V=j.from(),W=j.to(),ce=Math.max(O,V.line);O=Math.min(this.lastLine(),W.line-(W.ch?0:1))+1;for(var fe=ce;fe<O;++fe)Gh(this,fe,_);var Se=this.doc.sel.ranges;V.ch==0&&C.length==Se.length&&Se[N].from().ch>0&&my(this.doc,N,new Pr(V,Se[N].to()),ht)}}}),getTokenAt:function(_,C){return po(this,_,C)},getLineTokens:function(_,C){return po(this,Xe(_),C,!0)},getTokenTypeAt:function(_){_=qt(this.doc,_);var C,O=xs(this,et(this.doc,_.line)),N=0,j=(O.length-1)/2,V=_.ch;if(V==0)C=O[2];else for(;;){var W=N+j>>1;if((W?O[2*W-1]:0)>=V)j=W;else{if(!(O[2*W+1]<V)){C=O[2*W+2];break}N=W+1}}var ce=C?C.indexOf("overlay "):-1;return ce<0?C:ce==0?null:C.slice(0,ce-1)},getModeAt:function(_){var C=this.doc.mode;return C.innerMode?g.innerMode(C,this.getTokenAt(_).state).mode:C},getHelper:function(_,C){return this.getHelpers(_,C)[0]},getHelpers:function(_,C){var O=[];if(!S.hasOwnProperty(C))return O;var N=S[C],j=this.getModeAt(_);if(typeof j[C]=="string")N[j[C]]&&O.push(N[j[C]]);else if(j[C])for(var V=0;V<j[C].length;V++){var W=N[j[C][V]];W&&O.push(W)}else j.helperType&&N[j.helperType]?O.push(N[j.helperType]):N[j.name]&&O.push(N[j.name]);for(var ce=0;ce<N._global.length;ce++){var fe=N._global[ce];fe.pred(j,this)&&Pe(O,fe.val)==-1&&O.push(fe.val)}return O},getStateAfter:function(_,C){var O=this.doc;return rs(this,(_=nr(O,_??O.first+O.size-1))+1,C).state},cursorCoords:function(_,C){var O=this.doc.sel.primary();return dl(this,_==null?O.head:typeof _=="object"?qt(this.doc,_):_?O.from():O.to(),C||"page")},charCoords:function(_,C){return Eg(this,qt(this.doc,_),C||"page")},coordsChar:function(_,C){return X0(this,(_=Dv(this,_,C||"page")).left,_.top)},lineAtHeight:function(_,C){return _=Dv(this,{top:_,left:0},C||"page").top,Sr(this.doc,_+this.display.viewOffset)},heightAtLine:function(_,C,O){var N,j=!1;if(typeof _=="number"){var V=this.doc.first+this.doc.size-1;_<this.doc.first?_=this.doc.first:_>V&&(_=V,j=!0),N=et(this.doc,_)}else N=_;return _g(this,N,{top:0,left:0},C||"page",O||j).top+(j?this.doc.height-ge(N):0)},defaultTextHeight:function(){return sd(this.display)},defaultCharWidth:function(){return ad(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(_,C,O,N,j){var V,W,ce,fe=this.display,Se=(_=dl(this,qt(this.doc,_))).bottom,be=_.left;if(C.style.position="absolute",C.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(C),fe.sizer.appendChild(C),N=="over")Se=_.top;else if(N=="above"||N=="near"){var $e=Math.max(fe.wrapper.clientHeight,this.doc.height),Ne=Math.max(fe.sizer.clientWidth,fe.lineSpace.clientWidth);(N=="above"||_.bottom+C.offsetHeight>$e)&&_.top>C.offsetHeight?Se=_.top-C.offsetHeight:_.bottom+C.offsetHeight<=$e&&(Se=_.bottom),be+C.offsetWidth>Ne&&(be=Ne-C.offsetWidth)}C.style.top=Se+"px",C.style.left=C.style.right="",j=="right"?(be=fe.sizer.clientWidth-C.offsetWidth,C.style.right="0px"):(j=="left"?be=0:j=="middle"&&(be=(fe.sizer.clientWidth-C.offsetWidth)/2),C.style.left=be+"px"),O&&(V=this,W={left:be,top:Se,right:be+C.offsetWidth,bottom:Se+C.offsetHeight},(ce=iy(V,W)).scrollTop!=null&&kh(V,ce.scrollTop),ce.scrollLeft!=null&&Xc(V,ce.scrollLeft))},triggerOnKeyDown:ls(Fx),triggerOnKeyPress:ls(Ox),triggerOnKeyUp:Mx,triggerOnMouseDown:ls($x),execCommand:function(_){if(jh.hasOwnProperty(_))return jh[_].call(null,this)},triggerElectric:ls(function(_){Ux(this,_)}),findPosH:function(_,C,O,N){var j=1;C<0&&(j=-1,C=-C);for(var V=qt(this.doc,_),W=0;W<C&&!(V=Ay(this.doc,V,j,O,N)).hitSide;++W);return V},moveH:ls(function(_,C){var O=this;this.extendSelectionsBy(function(N){return O.display.shift||O.doc.extend||N.empty()?Ay(O.doc,N.head,_,C,O.options.rtlMoveVisually):_<0?N.from():N.to()},Vt)}),deleteH:ls(function(_,C){var O=this.doc.sel,N=this.doc;O.somethingSelected()?N.replaceSelection("",null,"+delete"):yd(this,function(j){var V=Ay(N,j.head,_,C,!1);return _<0?{from:V,to:j.head}:{from:j.head,to:V}})}),findPosV:function(_,C,O,N){var j=1,V=N;C<0&&(j=-1,C=-C);for(var W=qt(this.doc,_),ce=0;ce<C;++ce){var fe=dl(this,W,"div");if(V==null?V=fe.left:fe.left=V,(W=Vx(this,fe,j,O)).hitSide)break}return W},moveV:ls(function(_,C){var O=this,N=this.doc,j=[],V=!this.display.shift&&!N.extend&&N.sel.somethingSelected();if(N.extendSelectionsBy(function(ce){if(V)return _<0?ce.from():ce.to();var fe=dl(O,ce.head,"div");ce.goalColumn!=null&&(fe.left=ce.goalColumn),j.push(fe.left);var Se=Vx(O,fe,_,C);return C=="page"&&ce==N.sel.primary()&&oy(O,Eg(O,Se,"div").top-fe.top),Se},Vt),j.length)for(var W=0;W<N.sel.ranges.length;W++)N.sel.ranges[W].goalColumn=j[W]}),findWordAt:function(_){var C=et(this.doc,_.line).text,O=_.ch,N=_.ch;if(C){var j=this.getHelper(_,"wordChars");_.sticky!="before"&&N!=C.length||!O?++N:--O;for(var V=C.charAt(O),W=re(V,j)?function(ce){return re(ce,j)}:/\s/.test(V)?function(ce){return/\s/.test(ce)}:function(ce){return!/\s/.test(ce)&&!re(ce)};O>0&&W(C.charAt(O-1));)--O;for(;N<C.length&&W(C.charAt(N));)++N}return new Pr(Xe(_.line,O),Xe(_.line,N))},toggleOverwrite:function(_){_!=null&&_==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):U(this.display.cursorDiv,"CodeMirror-overwrite"),tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ee(ze(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ls(function(_,C){Ch(this,_,C)}),getScrollInfo:function(){var _=this.display.scroller;return{left:_.scrollLeft,top:_.scrollTop,height:_.scrollHeight-xi(this)-this.display.barHeight,width:_.scrollWidth-xi(this)-this.display.barWidth,clientHeight:Te(this),clientWidth:Li(this)}},scrollIntoView:ls(function(_,C){_==null?(_={from:this.doc.sel.primary().head,to:null},C==null&&(C=this.options.cursorScrollMargin)):typeof _=="number"?_={from:Xe(_,0),to:null}:_.from==null&&(_={from:_,to:null}),_.to||(_.to=_.from),_.margin=C||0,_.from.line!=null?function(O,N){Tg(O),O.curOp.scrollToPos=N}(this,_):Nv(this,_.from,_.to,_.margin)}),setSize:ls(function(_,C){var O=this,N=function(V){return typeof V=="number"||/^\d+$/.test(String(V))?V+"px":V};_!=null&&(this.display.wrapper.style.width=N(_)),C!=null&&(this.display.wrapper.style.height=N(C)),this.options.lineWrapping&&Cv(this);var j=this.display.viewFrom;this.doc.iter(j,this.display.viewTo,function(V){if(V.widgets){for(var W=0;W<V.widgets.length;W++)if(V.widgets[W].noHScroll){Wu(O,j,"widget");break}}++j}),this.curOp.forceUpdate=!0,tt(this,"refresh",this)}),operation:function(_){return Us(this,_)},startOperation:function(){return Kc(this)},endOperation:function(){return Jc(this)},refresh:ls(function(){var _=this.display.cachedTextHeight;_s(this),this.curOp.forceUpdate=!0,Sh(this),Ch(this,this.doc.scrollLeft,this.doc.scrollTop),ly(this.display),(_==null||Math.abs(_-sd(this.display))>.5||this.options.lineWrapping)&&Q0(this),tt(this,"refresh",this)}),swapDoc:ls(function(_){var C=this.doc;return C.cm=null,this.state.selectingText&&this.state.selectingText(),Jv(this,_),Sh(this),this.display.input.reset(),Ch(this,_.scrollLeft,_.scrollTop),this.curOp.forceScroll=!0,Hr(this,"swapDoc",this,C),C}),phrase:function(_){var C=this.options.phrases;return C&&Object.prototype.hasOwnProperty.call(C,_)?C[_]:_},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Qt(g),g.registerHelper=function(_,C,O){S.hasOwnProperty(_)||(S[_]=g[_]={_global:[]}),S[_][C]=O},g.registerGlobalHelper=function(_,C,O,N){g.registerHelper(_,C,N),S[_]._global.push({pred:O,val:N})}}(Ri);var jS="iter insert remove copy getEditor constructor".split(" ");for(var qg in Es.prototype)Es.prototype.hasOwnProperty(qg)&&Pe(jS,qg)<0&&(Ri.prototype[qg]=function(g){return function(){return g.apply(this.doc,arguments)}}(Es.prototype[qg]));return Qt(Es),Ri.inputStyles={textarea:to,contenteditable:Qr},Ri.defineMode=function(g){Ri.defaults.mode||g=="null"||(Ri.defaults.mode=g),ns.apply(this,arguments)},Ri.defineMIME=function(g,x){$r[g]=x},Ri.defineMode("null",function(){return{token:function(g){return g.skipToEnd()}}}),Ri.defineMIME("text/plain","null"),Ri.defineExtension=function(g,x){Ri.prototype[g]=x},Ri.defineDocExtension=function(g,x){Es.prototype[g]=x},Ri.fromTextArea=function(g,x){if((x=x?we(x):{}).value=g.value,!x.tabindex&&g.tabIndex&&(x.tabindex=g.tabIndex),!x.placeholder&&g.placeholder&&(x.placeholder=g.placeholder),x.autofocus==null){var S=ee(g.ownerDocument);x.autofocus=S==g||g.getAttribute("autofocus")!=null&&S==document.body}function _(){g.value=j.getValue()}var C;if(g.form&&(De(g.form,"submit",_),!x.leaveSubmitMethodAlone)){var O=g.form;C=O.submit;try{var N=O.submit=function(){_(),O.submit=C,O.submit(),O.submit=N}}catch{}}x.finishInit=function(V){V.save=_,V.getTextArea=function(){return g},V.toTextArea=function(){V.toTextArea=isNaN,_(),g.parentNode.removeChild(V.getWrapperElement()),g.style.display="",g.form&&(We(g.form,"submit",_),x.leaveSubmitMethodAlone||typeof g.form.submit!="function"||(g.form.submit=C))}},g.style.display="none";var j=Ri(function(V){return g.parentNode.insertBefore(V,g.nextSibling)},x);return j},function(g){g.off=We,g.on=De,g.wheelEventPixels=kS,g.Doc=Es,g.splitLines=mn,g.countColumn=Ie,g.findColumn=On,g.isWordChar=J,g.Pass=At,g.signal=tt,g.Line=pn,g.changeEnd=Zu,g.scrollbarModel=jv,g.Pos=Xe,g.cmpPos=pt,g.modes=tr,g.mimeModes=$r,g.resolveMode=me,g.getMode=Le,g.modeExtensions=it,g.extendMode=Ke,g.copyState=Et,g.startState=en,g.innerMode=an,g.commands=jh,g.keyMap=pu,g.keyName=kx,g.isModifierKey=Ax,g.lookupKey=md,g.normalizeKeyMap=IS,g.StringStream=wt,g.SharedTextMarker=Nh,g.TextMarker=Ju,g.LineWidget=Ph,g.e_preventDefault=rn,g.e_stopPropagation=on,g.e_stop=Tn,g.addClass=z,g.contains=le,g.rmClass=U,g.keyNames=Qu}(Ri),Ri.version="5.65.9",Ri})},{}],11:[function(n,r,i){var o;o=function(s){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;s.defineMode("gfm",function(l,u){var f=0,c={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(p){return{code:p.code,codeBlock:p.codeBlock,ateSpace:p.ateSpace}},token:function(p,m){if(m.combineTokens=null,m.codeBlock)return p.match(/^```+/)?(m.codeBlock=!1,null):(p.skipToEnd(),null);if(p.sol()&&(m.code=!1),p.sol()&&p.match(/^```+/))return p.skipToEnd(),m.codeBlock=!0,null;if(p.peek()==="`"){p.next();var b=p.pos;p.eatWhile("`");var y=1+p.pos-b;return m.code?y===f&&(m.code=!1):(f=y,m.code=!0),null}return m.code?(p.next(),null):p.eatSpace()?(m.ateSpace=!0,null):(p.sol()||m.ateSpace)&&(m.ateSpace=!1,u.gitHubSpice!==!1)&&(p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||p.match(a)&&p.string.slice(p.start-2,p.start)!="]("&&(p.start==0||/\W/.test(p.string.charAt(p.start-1)))?(m.combineTokens=!0,"link"):(p.next(),null)},blankLine:function(p){return p.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var h in u)d[h]=u[h];return d.name="markdown",s.overlayMode(s.getMode(l,d),c)},"markdown"),s.defineMIME("text/x-gfm","gfm")},typeof i=="object"&&typeof r=="object"?o(n("../../lib/codemirror"),n("../markdown/markdown"),n("../../addon/mode/overlay")):o(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(n,r,i){var o;o=function(s){s.defineMode("markdown",function(a,l){var u=s.getMode(a,"text/html"),f=u.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var c={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var d in c)c.hasOwnProperty(d)&&l.tokenTypeOverrides[d]&&(c[d]=l.tokenTypeOverrides[d]);var h=/^([*\-_])(?:\s*\1){2,}\s*$/,p=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,m=/^\[(x| )\](?=\s)/i,b=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ {0,3}(?:\={1,}|-{2,})\s*$/,v=/^[^#!\[\]*_\\<>` "'(~:]+/,w=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,E=/^\s*\[[^\]]+?\]:.*$/,A=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function T(ee,z,he){return z.f=z.inline=he,he(ee,z)}function D(ee,z,he){return z.f=z.block=he,he(ee,z)}function k(ee){if(ee.linkTitle=!1,ee.linkHref=!1,ee.linkText=!1,ee.em=!1,ee.strong=!1,ee.strikethrough=!1,ee.quote=0,ee.indentedCode=!1,ee.f==M){var z=f;if(!z){var he=s.innerMode(u,ee.htmlState);z=he.mode.name=="xml"&&he.state.tagStart===null&&!he.state.context&&he.state.tokenize.isInText}z&&(ee.f=$,ee.block=R,ee.htmlState=null)}return ee.trailingSpace=0,ee.trailingSpaceNewLine=!1,ee.prevLine=ee.thisLine,ee.thisLine={stream:null},null}function R(ee,z){var he,de=ee.column()===z.indentation,ze=!(he=z.prevLine.stream)||!/\S/.test(he.string),He=z.indentedCode,je=z.prevLine.hr,we=z.list!==!1,Ie=(z.listStack[z.listStack.length-1]||0)+3;z.indentedCode=!1;var qe=z.indentation;if(z.indentationDiff===null&&(z.indentationDiff=z.indentation,we)){for(z.list=null;qe<z.listStack[z.listStack.length-1];)z.listStack.pop(),z.listStack.length?z.indentation=z.listStack[z.listStack.length-1]:z.list=!1;z.list!==!1&&(z.indentationDiff=qe-z.listStack[z.listStack.length-1])}var Pe=!(ze||je||z.prevLine.header||we&&He||z.prevLine.fencedCodeEnd),At=(z.list===!1||je||ze)&&z.indentation<=Ie&&ee.match(h),ht=null;if(z.indentationDiff>=4&&(He||z.prevLine.fencedCodeEnd||z.prevLine.header||ze))return ee.skipToEnd(),z.indentedCode=!0,c.code;if(ee.eatSpace())return null;if(de&&z.indentation<=Ie&&(ht=ee.match(b))&&ht[1].length<=6)return z.quote=0,z.header=ht[1].length,z.thisLine.header=!0,l.highlightFormatting&&(z.formatting="header"),z.f=z.inline,K(z);if(z.indentation<=Ie&&ee.eat(">"))return z.quote=de?1:z.quote+1,l.highlightFormatting&&(z.formatting="quote"),ee.eatSpace(),K(z);if(!At&&!z.setext&&de&&z.indentation<=Ie&&(ht=ee.match(p))){var nn=ht[1]?"ol":"ul";return z.indentation=qe+ee.current().length,z.list=!0,z.quote=0,z.listStack.push(z.indentation),z.em=!1,z.strong=!1,z.code=!1,z.strikethrough=!1,l.taskLists&&ee.match(m,!1)&&(z.taskList=!0),z.f=z.inline,l.highlightFormatting&&(z.formatting=["list","list-"+nn]),K(z)}return de&&z.indentation<=Ie&&(ht=ee.match(w,!0))?(z.quote=0,z.fencedEndRE=new RegExp(ht[1]+"+ *$"),z.localMode=l.fencedCodeBlockHighlighting&&function(Vt){if(s.findModeByName){var On=s.findModeByName(Vt);On&&(Vt=On.mime||On.mimes[0])}var Ze=s.getMode(a,Vt);return Ze.name=="null"?null:Ze}(ht[2]||l.fencedCodeBlockDefaultMode),z.localMode&&(z.localState=s.startState(z.localMode)),z.f=z.block=B,l.highlightFormatting&&(z.formatting="code-block"),z.code=-1,K(z)):z.setext||!(Pe&&we||z.quote||z.list!==!1||z.code||At||E.test(ee.string))&&(ht=ee.lookAhead(1))&&(ht=ht.match(y))?(z.setext?(z.header=z.setext,z.setext=0,ee.skipToEnd(),l.highlightFormatting&&(z.formatting="header")):(z.header=ht[0].charAt(0)=="="?1:2,z.setext=z.header),z.thisLine.header=!0,z.f=z.inline,K(z)):At?(ee.skipToEnd(),z.hr=!0,z.thisLine.hr=!0,c.hr):ee.peek()==="["?T(ee,z,Y):T(ee,z,z.inline)}function M(ee,z){var he=u.token(ee,z.htmlState);if(!f){var de=s.innerMode(u,z.htmlState);(de.mode.name=="xml"&&de.state.tagStart===null&&!de.state.context&&de.state.tokenize.isInText||z.md_inside&&ee.current().indexOf(">")>-1)&&(z.f=$,z.block=R,z.htmlState=null)}return he}function B(ee,z){var he,de=z.listStack[z.listStack.length-1]||0,ze=z.indentation<de,He=de+3;return z.fencedEndRE&&z.indentation<=He&&(ze||ee.match(z.fencedEndRE))?(l.highlightFormatting&&(z.formatting="code-block"),ze||(he=K(z)),z.localMode=z.localState=null,z.block=R,z.f=$,z.fencedEndRE=null,z.code=0,z.thisLine.fencedCodeEnd=!0,ze?D(ee,z,z.block):he):z.localMode?z.localMode.token(ee,z.localState):(ee.skipToEnd(),c.code)}function K(ee){var z=[];if(ee.formatting){z.push(c.formatting),typeof ee.formatting=="string"&&(ee.formatting=[ee.formatting]);for(var he=0;he<ee.formatting.length;he++)z.push(c.formatting+"-"+ee.formatting[he]),ee.formatting[he]==="header"&&z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.header),ee.formatting[he]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.quote):z.push("error"))}if(ee.taskOpen)return z.push("meta"),z.length?z.join(" "):null;if(ee.taskClosed)return z.push("property"),z.length?z.join(" "):null;if(ee.linkHref?z.push(c.linkHref,"url"):(ee.strong&&z.push(c.strong),ee.em&&z.push(c.em),ee.strikethrough&&z.push(c.strikethrough),ee.emoji&&z.push(c.emoji),ee.linkText&&z.push(c.linkText),ee.code&&z.push(c.code),ee.image&&z.push(c.image),ee.imageAltText&&z.push(c.imageAltText,"link"),ee.imageMarker&&z.push(c.imageMarker)),ee.header&&z.push(c.header,c.header+"-"+ee.header),ee.quote&&(z.push(c.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.quote+"-"+ee.quote):z.push(c.quote+"-"+l.maxBlockquoteDepth)),ee.list!==!1){var de=(ee.listStack.length-1)%3;de?de===1?z.push(c.list2):z.push(c.list3):z.push(c.list1)}return ee.trailingSpaceNewLine?z.push("trailing-space-new-line"):ee.trailingSpace&&z.push("trailing-space-"+(ee.trailingSpace%2?"a":"b")),z.length?z.join(" "):null}function L(ee,z){if(ee.match(v,!0))return K(z)}function $(ee,z){var he=z.text(ee,z);if(he!==void 0)return he;if(z.list)return z.list=null,K(z);if(z.taskList)return ee.match(m,!0)[1]===" "?z.taskOpen=!0:z.taskClosed=!0,l.highlightFormatting&&(z.formatting="task"),z.taskList=!1,K(z);if(z.taskOpen=!1,z.taskClosed=!1,z.header&&ee.match(/^#+$/,!0))return l.highlightFormatting&&(z.formatting="header"),K(z);var de=ee.next();if(z.linkTitle){z.linkTitle=!1;var ze=de;de==="("&&(ze=")");var He="^\\s*(?:[^"+(ze=(ze+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+ze;if(ee.match(new RegExp(He),!0))return c.linkHref}if(de==="`"){var je=z.formatting;l.highlightFormatting&&(z.formatting="code"),ee.eatWhile("`");var we=ee.current().length;if(z.code!=0||z.quote&&we!=1){if(we==z.code){var Ie=K(z);return z.code=0,Ie}return z.formatting=je,K(z)}return z.code=we,K(z)}if(z.code)return K(z);if(de==="\\"&&(ee.next(),l.highlightFormatting)){var qe=K(z),Pe=c.formatting+"-escape";return qe?qe+" "+Pe:Pe}if(de==="!"&&ee.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return z.imageMarker=!0,z.image=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(de==="["&&z.imageMarker&&ee.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return z.imageMarker=!1,z.imageAltText=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(de==="]"&&z.imageAltText){l.highlightFormatting&&(z.formatting="image");var qe=K(z);return z.imageAltText=!1,z.image=!1,z.inline=z.f=U,qe}if(de==="["&&!z.image)return z.linkText&&ee.match(/^.*?\]/)||(z.linkText=!0,l.highlightFormatting&&(z.formatting="link")),K(z);if(de==="]"&&z.linkText){l.highlightFormatting&&(z.formatting="link");var qe=K(z);return z.linkText=!1,z.inline=z.f=ee.match(/\(.*?\)| ?\[.*?\]/,!1)?U:$,qe}if(de==="<"&&ee.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=I,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkInline;if(de==="<"&&ee.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=I,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkEmail;if(l.xml&&de==="<"&&ee.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var At=ee.string.indexOf(">",ee.pos);if(At!=-1){var ht=ee.string.substring(ee.start,At);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(ht)&&(z.md_inside=!0)}return ee.backUp(1),z.htmlState=s.startState(u),D(ee,z,M)}if(l.xml&&de==="<"&&ee.match(/^\/\w*?>/))return z.md_inside=!1,"tag";if(de==="*"||de==="_"){for(var nn=1,Vt=ee.pos==1?" ":ee.string.charAt(ee.pos-2);nn<3&&ee.eat(de);)nn++;var On=ee.peek()||" ",Ze=!/\s/.test(On)&&(!A.test(On)||/\s/.test(Vt)||A.test(Vt)),pe=!/\s/.test(Vt)&&(!A.test(Vt)||/\s/.test(On)||A.test(On)),ie=null,se=null;if(nn%2&&(z.em||!Ze||de!=="*"&&pe&&!A.test(Vt)?z.em!=de||!pe||de!=="*"&&Ze&&!A.test(On)||(ie=!1):ie=!0),nn>1&&(z.strong||!Ze||de!=="*"&&pe&&!A.test(Vt)?z.strong!=de||!pe||de!=="*"&&Ze&&!A.test(On)||(se=!1):se=!0),se!=null||ie!=null)return l.highlightFormatting&&(z.formatting=ie==null?"strong":se==null?"em":"strong em"),ie===!0&&(z.em=de),se===!0&&(z.strong=de),Ie=K(z),ie===!1&&(z.em=!1),se===!1&&(z.strong=!1),Ie}else if(de===" "&&(ee.eat("*")||ee.eat("_"))){if(ee.peek()===" ")return K(z);ee.backUp(1)}if(l.strikethrough){if(de==="~"&&ee.eatWhile(de)){if(z.strikethrough)return l.highlightFormatting&&(z.formatting="strikethrough"),Ie=K(z),z.strikethrough=!1,Ie;if(ee.match(/^[^\s]/,!1))return z.strikethrough=!0,l.highlightFormatting&&(z.formatting="strikethrough"),K(z)}else if(de===" "&&ee.match("~~",!0)){if(ee.peek()===" ")return K(z);ee.backUp(2)}}if(l.emoji&&de===":"&&ee.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){z.emoji=!0,l.highlightFormatting&&(z.formatting="emoji");var ve=K(z);return z.emoji=!1,ve}return de===" "&&(ee.match(/^ +$/,!1)?z.trailingSpace++:z.trailingSpace&&(z.trailingSpaceNewLine=!0)),K(z)}function I(ee,z){if(ee.next()===">"){z.f=z.inline=$,l.highlightFormatting&&(z.formatting="link");var he=K(z);return he?he+=" ":he="",he+c.linkInline}return ee.match(/^[^>]+/,!0),c.linkInline}function U(ee,z){if(ee.eatSpace())return null;var he,de=ee.next();return de==="("||de==="["?(z.f=z.inline=(he=de==="("?")":"]",function(ze,He){if(ze.next()===he){He.f=He.inline=$,l.highlightFormatting&&(He.formatting="link-string");var je=K(He);return He.linkHref=!1,je}return ze.match(q[he]),He.linkHref=!0,K(He)}),l.highlightFormatting&&(z.formatting="link-string"),z.linkHref=!0,K(z)):"error"}var q={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Y(ee,z){return ee.match(/^([^\]\\]|\\.)*\]:/,!1)?(z.f=X,ee.next(),l.highlightFormatting&&(z.formatting="link"),z.linkText=!0,K(z)):T(ee,z,$)}function X(ee,z){if(ee.match("]:",!0)){z.f=z.inline=te,l.highlightFormatting&&(z.formatting="link");var he=K(z);return z.linkText=!1,he}return ee.match(/^([^\]\\]|\\.)+/,!0),c.linkText}function te(ee,z){return ee.eatSpace()?null:(ee.match(/^[^\s]+/,!0),ee.peek()===void 0?z.linkTitle=!0:ee.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),z.f=z.inline=$,c.linkHref+" url")}var le={startState:function(){return{f:R,prevLine:{stream:null},thisLine:{stream:null},block:R,htmlState:null,indentation:0,inline:$,text:L,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(ee){return{f:ee.f,prevLine:ee.prevLine,thisLine:ee.thisLine,block:ee.block,htmlState:ee.htmlState&&s.copyState(u,ee.htmlState),indentation:ee.indentation,localMode:ee.localMode,localState:ee.localMode?s.copyState(ee.localMode,ee.localState):null,inline:ee.inline,text:ee.text,formatting:!1,linkText:ee.linkText,linkTitle:ee.linkTitle,linkHref:ee.linkHref,code:ee.code,em:ee.em,strong:ee.strong,strikethrough:ee.strikethrough,emoji:ee.emoji,header:ee.header,setext:ee.setext,hr:ee.hr,taskList:ee.taskList,list:ee.list,listStack:ee.listStack.slice(0),quote:ee.quote,indentedCode:ee.indentedCode,trailingSpace:ee.trailingSpace,trailingSpaceNewLine:ee.trailingSpaceNewLine,md_inside:ee.md_inside,fencedEndRE:ee.fencedEndRE}},token:function(ee,z){if(z.formatting=!1,ee!=z.thisLine.stream){if(z.header=0,z.hr=!1,ee.match(/^\s*$/,!0))return k(z),null;if(z.prevLine=z.thisLine,z.thisLine={stream:ee},z.taskList=!1,z.trailingSpace=0,z.trailingSpaceNewLine=!1,!z.localState&&(z.f=z.block,z.f!=M)){var he=ee.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(z.indentation=he,z.indentationDiff=null,he>0)return null}}return z.f(ee,z)},innerMode:function(ee){return ee.block==M?{state:ee.htmlState,mode:u}:ee.localState?{state:ee.localState,mode:ee.localMode}:{state:ee,mode:le}},indent:function(ee,z,he){return ee.block==M&&u.indent?u.indent(ee.htmlState,z,he):ee.localState&&ee.localMode.indent?ee.localMode.indent(ee.localState,z,he):s.Pass},blankLine:k,getType:K,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return le},"xml"),s.defineMIME("text/markdown","markdown"),s.defineMIME("text/x-markdown","markdown")},typeof i=="object"&&typeof r=="object"?o(n("../../lib/codemirror"),n("../xml/xml"),n("../meta")):o(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(n,r,i){(function(o){o.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var s=0;s<o.modeInfo.length;s++){var a=o.modeInfo[s];a.mimes&&(a.mime=a.mimes[0])}o.findModeByMIME=function(l){l=l.toLowerCase();for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.mime==l)return f;if(f.mimes){for(var c=0;c<f.mimes.length;c++)if(f.mimes[c]==l)return f}}return/\+xml$/.test(l)?o.findModeByMIME("application/xml"):/\+json$/.test(l)?o.findModeByMIME("application/json"):void 0},o.findModeByExtension=function(l){l=l.toLowerCase();for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.ext){for(var c=0;c<f.ext.length;c++)if(f.ext[c]==l)return f}}},o.findModeByFileName=function(l){for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.file&&f.file.test(l))return f}var c=l.lastIndexOf("."),d=c>-1&&l.substring(c+1,l.length);if(d)return o.findModeByExtension(d)},o.findModeByName=function(l){l=l.toLowerCase();for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.name.toLowerCase()==l)return f;if(f.alias){for(var c=0;c<f.alias.length;c++)if(f.alias[c].toLowerCase()==l)return f}}}})(typeof i=="object"&&typeof r=="object"?n("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(n,r,i){(function(o){var s={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};o.defineMode("xml",function(l,u){var f,c,d=l.indentUnit,h={},p=u.htmlMode?s:a;for(var m in p)h[m]=p[m];for(var m in u)h[m]=u[m];function b(q,Y){function X(le){return Y.tokenize=le,le(q,Y)}var te=q.next();return te=="<"?q.eat("!")?q.eat("[")?q.match("CDATA[")?X(v("atom","]]>")):null:q.match("--")?X(v("comment","-->")):q.match("DOCTYPE",!0,!0)?(q.eatWhile(/[\w\._\-]/),X(w(1))):null:q.eat("?")?(q.eatWhile(/[\w\._\-]/),Y.tokenize=v("meta","?>"),"meta"):(f=q.eat("/")?"closeTag":"openTag",Y.tokenize=y,"tag bracket"):te=="&"?(q.eat("#")?q.eat("x")?q.eatWhile(/[a-fA-F\d]/)&&q.eat(";"):q.eatWhile(/[\d]/)&&q.eat(";"):q.eatWhile(/[\w\.\-:]/)&&q.eat(";"))?"atom":"error":(q.eatWhile(/[^&<]/),null)}function y(q,Y){var X,te,le=q.next();if(le==">"||le=="/"&&q.eat(">"))return Y.tokenize=b,f=le==">"?"endTag":"selfcloseTag","tag bracket";if(le=="=")return f="equals",null;if(le=="<"){Y.tokenize=b,Y.state=k,Y.tagName=Y.tagStart=null;var ee=Y.tokenize(q,Y);return ee?ee+" tag error":"tag error"}return/[\'\"]/.test(le)?(Y.tokenize=(X=le,te=function(z,he){for(;!z.eol();)if(z.next()==X){he.tokenize=y;break}return"string"},te.isInAttribute=!0,te),Y.stringStartCol=q.column(),Y.tokenize(q,Y)):(q.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function v(q,Y){return function(X,te){for(;!X.eol();){if(X.match(Y)){te.tokenize=b;break}X.next()}return q}}function w(q){return function(Y,X){for(var te;(te=Y.next())!=null;){if(te=="<")return X.tokenize=w(q+1),X.tokenize(Y,X);if(te==">"){if(q==1){X.tokenize=b;break}return X.tokenize=w(q-1),X.tokenize(Y,X)}}return"meta"}}function E(q){return q&&q.toLowerCase()}function A(q,Y,X){this.prev=q.context,this.tagName=Y||"",this.indent=q.indented,this.startOfLine=X,(h.doNotIndent.hasOwnProperty(Y)||q.context&&q.context.noIndent)&&(this.noIndent=!0)}function T(q){q.context&&(q.context=q.context.prev)}function D(q,Y){for(var X;;){if(!q.context||(X=q.context.tagName,!h.contextGrabbers.hasOwnProperty(E(X))||!h.contextGrabbers[E(X)].hasOwnProperty(E(Y))))return;T(q)}}function k(q,Y,X){return q=="openTag"?(X.tagStart=Y.column(),R):q=="closeTag"?M:k}function R(q,Y,X){return q=="word"?(X.tagName=Y.current(),c="tag",L):h.allowMissingTagName&&q=="endTag"?(c="tag bracket",L(q,0,X)):(c="error",R)}function M(q,Y,X){if(q=="word"){var te=Y.current();return X.context&&X.context.tagName!=te&&h.implicitlyClosed.hasOwnProperty(E(X.context.tagName))&&T(X),X.context&&X.context.tagName==te||h.matchClosing===!1?(c="tag",B):(c="tag error",K)}return h.allowMissingTagName&&q=="endTag"?(c="tag bracket",B(q,0,X)):(c="error",K)}function B(q,Y,X){return q!="endTag"?(c="error",B):(T(X),k)}function K(q,Y,X){return c="error",B(q,0,X)}function L(q,Y,X){if(q=="word")return c="attribute",$;if(q=="endTag"||q=="selfcloseTag"){var te=X.tagName,le=X.tagStart;return X.tagName=X.tagStart=null,q=="selfcloseTag"||h.autoSelfClosers.hasOwnProperty(E(te))?D(X,te):(D(X,te),X.context=new A(X,te,le==X.indented)),k}return c="error",L}function $(q,Y,X){return q=="equals"?I:(h.allowMissing||(c="error"),L(q,0,X))}function I(q,Y,X){return q=="string"?U:q=="word"&&h.allowUnquoted?(c="string",L):(c="error",L(q,0,X))}function U(q,Y,X){return q=="string"?U:L(q,0,X)}return b.isInText=!0,{startState:function(q){var Y={tokenize:b,state:k,indented:q||0,tagName:null,tagStart:null,context:null};return q!=null&&(Y.baseIndent=q),Y},token:function(q,Y){if(!Y.tagName&&q.sol()&&(Y.indented=q.indentation()),q.eatSpace())return null;f=null;var X=Y.tokenize(q,Y);return(X||f)&&X!="comment"&&(c=null,Y.state=Y.state(f||X,q,Y),c&&(X=c=="error"?X+" error":c)),X},indent:function(q,Y,X){var te=q.context;if(q.tokenize.isInAttribute)return q.tagStart==q.indented?q.stringStartCol+1:q.indented+d;if(te&&te.noIndent)return o.Pass;if(q.tokenize!=y&&q.tokenize!=b)return X?X.match(/^(\s*)/)[0].length:0;if(q.tagName)return h.multilineTagIndentPastTag!==!1?q.tagStart+q.tagName.length+2:q.tagStart+d*(h.multilineTagIndentFactor||1);if(h.alignCDATA&&/<!\[CDATA\[/.test(Y))return 0;var le=Y&&/^<(\/)?([\w_:\.-]*)/.exec(Y);if(le&&le[1])for(;te;){if(te.tagName==le[2]){te=te.prev;break}if(!h.implicitlyClosed.hasOwnProperty(E(te.tagName)))break;te=te.prev}else if(le)for(;te;){var ee=h.contextGrabbers[E(te.tagName)];if(!ee||!ee.hasOwnProperty(E(le[2])))break;te=te.prev}for(;te&&te.prev&&!te.startOfLine;)te=te.prev;return te?te.indent+d:q.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:h.htmlMode?"html":"xml",helperType:h.htmlMode?"html":"xml",skipAttribute:function(q){q.state==I&&(q.state=L)},xmlCurrentTag:function(q){return q.tagName?{name:q.tagName,close:q.type=="closeTag"}:null},xmlCurrentContext:function(q){for(var Y=[],X=q.context;X;X=X.prev)Y.push(X.tagName);return Y.reverse()}}}),o.defineMIME("text/xml","xml"),o.defineMIME("application/xml","xml"),o.mimeModes.hasOwnProperty("text/html")||o.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(n,r,i){(function(o,s){s(typeof i=="object"&&r!==void 0?i:(o=typeof globalThis<"u"?globalThis:o||self).marked={})})(this,function(o){function s(Ze,pe){for(var ie=0;ie<pe.length;ie++){var se=pe[ie];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Ze,se.key,se)}}function a(Ze,pe){(pe==null||pe>Ze.length)&&(pe=Ze.length);for(var ie=0,se=new Array(pe);ie<pe;ie++)se[ie]=Ze[ie];return se}function l(Ze,pe){var ie=typeof Symbol<"u"&&Ze[Symbol.iterator]||Ze["@@iterator"];if(ie)return(ie=ie.call(Ze)).next.bind(ie);if(Array.isArray(Ze)||(ie=function(ve,F){if(ve){if(typeof ve=="string")return a(ve,F);var H=Object.prototype.toString.call(ve).slice(8,-1);return H==="Object"&&ve.constructor&&(H=ve.constructor.name),H==="Map"||H==="Set"?Array.from(ve):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?a(ve,F):void 0}}(Ze))||pe){ie&&(Ze=ie);var se=0;return function(){return se>=Ze.length?{done:!0}:{done:!1,value:Ze[se++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}o.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var f=/[&<>"']/,c=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},m=function(Ze){return p[Ze]};function b(Ze,pe){if(pe){if(f.test(Ze))return Ze.replace(c,m)}else if(d.test(Ze))return Ze.replace(h,m);return Ze}var y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function v(Ze){return Ze.replace(y,function(pe,ie){return(ie=ie.toLowerCase())==="colon"?":":ie.charAt(0)==="#"?ie.charAt(1)==="x"?String.fromCharCode(parseInt(ie.substring(2),16)):String.fromCharCode(+ie.substring(1)):""})}var w=/(^|[^\[])\^/g;function E(Ze,pe){Ze=typeof Ze=="string"?Ze:Ze.source,pe=pe||"";var ie={replace:function(se,ve){return ve=(ve=ve.source||ve).replace(w,"$1"),Ze=Ze.replace(se,ve),ie},getRegex:function(){return new RegExp(Ze,pe)}};return ie}var A=/[^\w:]/g,T=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function D(Ze,pe,ie){if(Ze){var se;try{se=decodeURIComponent(v(ie)).replace(A,"").toLowerCase()}catch{return null}if(se.indexOf("javascript:")===0||se.indexOf("vbscript:")===0||se.indexOf("data:")===0)return null}pe&&!T.test(ie)&&(ie=function(ve,F){k[" "+ve]||(R.test(ve)?k[" "+ve]=ve+"/":k[" "+ve]=I(ve,"/",!0));var H=(ve=k[" "+ve]).indexOf(":")===-1;return F.substring(0,2)==="//"?H?F:ve.replace(M,"$1")+F:F.charAt(0)==="/"?H?F:ve.replace(B,"$1")+F:ve+F}(pe,ie));try{ie=encodeURI(ie).replace(/%25/g,"%")}catch{return null}return ie}var k={},R=/^[^:]+:\/*[^/]*$/,M=/^([^:]+:)[\s\S]*$/,B=/^([^:]+:\/*[^/]*)[\s\S]*$/,K={exec:function(){}};function L(Ze){for(var pe,ie,se=1;se<arguments.length;se++)for(ie in pe=arguments[se])Object.prototype.hasOwnProperty.call(pe,ie)&&(Ze[ie]=pe[ie]);return Ze}function $(Ze,pe){var ie=Ze.replace(/\|/g,function(ve,F,H){for(var J=!1,re=F;--re>=0&&H[re]==="\\";)J=!J;return J?"|":" |"}).split(/ \|/),se=0;if(ie[0].trim()||ie.shift(),ie.length>0&&!ie[ie.length-1].trim()&&ie.pop(),ie.length>pe)ie.splice(pe);else for(;ie.length<pe;)ie.push("");for(;se<ie.length;se++)ie[se]=ie[se].trim().replace(/\\\|/g,"|");return ie}function I(Ze,pe,ie){var se=Ze.length;if(se===0)return"";for(var ve=0;ve<se;){var F=Ze.charAt(se-ve-1);if(F!==pe||ie){if(F===pe||!ie)break;ve++}else ve++}return Ze.slice(0,se-ve)}function U(Ze){Ze&&Ze.sanitize&&!Ze.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function q(Ze,pe){if(pe<1)return"";for(var ie="";pe>1;)1&pe&&(ie+=Ze),pe>>=1,Ze+=Ze;return ie+Ze}function Y(Ze,pe,ie,se){var ve=pe.href,F=pe.title?b(pe.title):null,H=Ze[1].replace(/\\([\[\]])/g,"$1");if(Ze[0].charAt(0)!=="!"){se.state.inLink=!0;var J={type:"link",raw:ie,href:ve,title:F,text:H,tokens:se.inlineTokens(H)};return se.state.inLink=!1,J}return{type:"image",raw:ie,href:ve,title:F,text:b(H)}}var X=function(){function Ze(ie){this.options=ie||o.defaults}var pe=Ze.prototype;return pe.space=function(ie){var se=this.rules.block.newline.exec(ie);if(se&&se[0].length>0)return{type:"space",raw:se[0]}},pe.code=function(ie){var se=this.rules.block.code.exec(ie);if(se){var ve=se[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:se[0],codeBlockStyle:"indented",text:this.options.pedantic?ve:I(ve,`
`)}}},pe.fences=function(ie){var se=this.rules.block.fences.exec(ie);if(se){var ve=se[0],F=function(H,J){var re=H.match(/^(\s+)(?:```)/);if(re===null)return J;var ye=re[1];return J.split(`
`).map(function(xe){var Re=xe.match(/^\s+/);return Re===null?xe:Re[0].length>=ye.length?xe.slice(ye.length):xe}).join(`
`)}(ve,se[3]||"");return{type:"code",raw:ve,lang:se[2]?se[2].trim():se[2],text:F}}},pe.heading=function(ie){var se=this.rules.block.heading.exec(ie);if(se){var ve=se[2].trim();if(/#$/.test(ve)){var F=I(ve,"#");this.options.pedantic?ve=F.trim():F&&!/ $/.test(F)||(ve=F.trim())}return{type:"heading",raw:se[0],depth:se[1].length,text:ve,tokens:this.lexer.inline(ve)}}},pe.hr=function(ie){var se=this.rules.block.hr.exec(ie);if(se)return{type:"hr",raw:se[0]}},pe.blockquote=function(ie){var se=this.rules.block.blockquote.exec(ie);if(se){var ve=se[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:se[0],tokens:this.lexer.blockTokens(ve,[]),text:ve}}},pe.list=function(ie){var se=this.rules.block.list.exec(ie);if(se){var ve,F,H,J,re,ye,xe,Re,P,Q,oe,ae,ke=se[1].trim(),Ce=ke.length>1,Ee={type:"list",raw:"",ordered:Ce,start:Ce?+ke.slice(0,-1):"",loose:!1,items:[]};ke=Ce?"\\d{1,9}\\"+ke.slice(-1):"\\"+ke,this.options.pedantic&&(ke=Ce?ke:"[*+-]");for(var De=new RegExp("^( {0,3}"+ke+")((?:[	 ][^\\n]*)?(?:\\n|$))");ie&&(ae=!1,se=De.exec(ie))&&!this.rules.block.hr.test(ie);){if(ve=se[0],ie=ie.substring(ve.length),Re=se[2].split(`
`,1)[0],P=ie.split(`
`,1)[0],this.options.pedantic?(J=2,oe=Re.trimLeft()):(J=(J=se[2].search(/[^ ]/))>4?1:J,oe=Re.slice(J),J+=se[1].length),ye=!1,!Re&&/^ *$/.test(P)&&(ve+=P+`
`,ie=ie.substring(P.length+1),ae=!0),!ae)for(var Me=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),We=new RegExp("^ {0,"+Math.min(3,J-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),tt=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:```|~~~)"),dt=new RegExp("^ {0,"+Math.min(3,J-1)+"}#");ie&&(Re=Q=ie.split(`
`,1)[0],this.options.pedantic&&(Re=Re.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!tt.test(Re))&&!dt.test(Re)&&!Me.test(Re)&&!We.test(ie);){if(Re.search(/[^ ]/)>=J||!Re.trim())oe+=`
`+Re.slice(J);else{if(ye)break;oe+=`
`+Re}ye||Re.trim()||(ye=!0),ve+=Q+`
`,ie=ie.substring(Q.length+1)}Ee.loose||(xe?Ee.loose=!0:/\n *\n *$/.test(ve)&&(xe=!0)),this.options.gfm&&(F=/^\[[ xX]\] /.exec(oe))&&(H=F[0]!=="[ ] ",oe=oe.replace(/^\[[ xX]\] +/,"")),Ee.items.push({type:"list_item",raw:ve,task:!!F,checked:H,loose:!1,text:oe}),Ee.raw+=ve}Ee.items[Ee.items.length-1].raw=ve.trimRight(),Ee.items[Ee.items.length-1].text=oe.trimRight(),Ee.raw=Ee.raw.trimRight();var Kt=Ee.items.length;for(re=0;re<Kt;re++){this.lexer.state.top=!1,Ee.items[re].tokens=this.lexer.blockTokens(Ee.items[re].text,[]);var xt=Ee.items[re].tokens.filter(function(rn){return rn.type==="space"}),Qt=xt.every(function(rn){for(var on,sn=0,Tn=l(rn.raw.split(""));!(on=Tn()).done;)if(on.value===`
`&&(sn+=1),sn>1)return!0;return!1});!Ee.loose&&xt.length&&Qt&&(Ee.loose=!0,Ee.items[re].loose=!0)}return Ee}},pe.html=function(ie){var se=this.rules.block.html.exec(ie);if(se){var ve={type:"html",raw:se[0],pre:!this.options.sanitizer&&(se[1]==="pre"||se[1]==="script"||se[1]==="style"),text:se[0]};if(this.options.sanitize){var F=this.options.sanitizer?this.options.sanitizer(se[0]):b(se[0]);ve.type="paragraph",ve.text=F,ve.tokens=this.lexer.inline(F)}return ve}},pe.def=function(ie){var se=this.rules.block.def.exec(ie);if(se)return se[3]&&(se[3]=se[3].substring(1,se[3].length-1)),{type:"def",tag:se[1].toLowerCase().replace(/\s+/g," "),raw:se[0],href:se[2],title:se[3]}},pe.table=function(ie){var se=this.rules.block.table.exec(ie);if(se){var ve={type:"table",header:$(se[1]).map(function(xe){return{text:xe}}),align:se[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:se[3]&&se[3].trim()?se[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(ve.header.length===ve.align.length){ve.raw=se[0];var F,H,J,re,ye=ve.align.length;for(F=0;F<ye;F++)/^ *-+: *$/.test(ve.align[F])?ve.align[F]="right":/^ *:-+: *$/.test(ve.align[F])?ve.align[F]="center":/^ *:-+ *$/.test(ve.align[F])?ve.align[F]="left":ve.align[F]=null;for(ye=ve.rows.length,F=0;F<ye;F++)ve.rows[F]=$(ve.rows[F],ve.header.length).map(function(xe){return{text:xe}});for(ye=ve.header.length,H=0;H<ye;H++)ve.header[H].tokens=this.lexer.inline(ve.header[H].text);for(ye=ve.rows.length,H=0;H<ye;H++)for(re=ve.rows[H],J=0;J<re.length;J++)re[J].tokens=this.lexer.inline(re[J].text);return ve}}},pe.lheading=function(ie){var se=this.rules.block.lheading.exec(ie);if(se)return{type:"heading",raw:se[0],depth:se[2].charAt(0)==="="?1:2,text:se[1],tokens:this.lexer.inline(se[1])}},pe.paragraph=function(ie){var se=this.rules.block.paragraph.exec(ie);if(se){var ve=se[1].charAt(se[1].length-1)===`
`?se[1].slice(0,-1):se[1];return{type:"paragraph",raw:se[0],text:ve,tokens:this.lexer.inline(ve)}}},pe.text=function(ie){var se=this.rules.block.text.exec(ie);if(se)return{type:"text",raw:se[0],text:se[0],tokens:this.lexer.inline(se[0])}},pe.escape=function(ie){var se=this.rules.inline.escape.exec(ie);if(se)return{type:"escape",raw:se[0],text:b(se[1])}},pe.tag=function(ie){var se=this.rules.inline.tag.exec(ie);if(se)return!this.lexer.state.inLink&&/^<a /i.test(se[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(se[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(se[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(se[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:se[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(se[0]):b(se[0]):se[0]}},pe.link=function(ie){var se=this.rules.inline.link.exec(ie);if(se){var ve=se[2].trim();if(!this.options.pedantic&&/^</.test(ve)){if(!/>$/.test(ve))return;var F=I(ve.slice(0,-1),"\\");if((ve.length-F.length)%2==0)return}else{var H=function(Re,P){if(Re.indexOf(P[1])===-1)return-1;for(var Q=Re.length,oe=0,ae=0;ae<Q;ae++)if(Re[ae]==="\\")ae++;else if(Re[ae]===P[0])oe++;else if(Re[ae]===P[1]&&--oe<0)return ae;return-1}(se[2],"()");if(H>-1){var J=(se[0].indexOf("!")===0?5:4)+se[1].length+H;se[2]=se[2].substring(0,H),se[0]=se[0].substring(0,J).trim(),se[3]=""}}var re=se[2],ye="";if(this.options.pedantic){var xe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(re);xe&&(re=xe[1],ye=xe[3])}else ye=se[3]?se[3].slice(1,-1):"";return re=re.trim(),/^</.test(re)&&(re=this.options.pedantic&&!/>$/.test(ve)?re.slice(1):re.slice(1,-1)),Y(se,{href:re&&re.replace(this.rules.inline._escapes,"$1"),title:ye&&ye.replace(this.rules.inline._escapes,"$1")},se[0],this.lexer)}},pe.reflink=function(ie,se){var ve;if((ve=this.rules.inline.reflink.exec(ie))||(ve=this.rules.inline.nolink.exec(ie))){var F=(ve[2]||ve[1]).replace(/\s+/g," ");if(!(F=se[F.toLowerCase()])||!F.href){var H=ve[0].charAt(0);return{type:"text",raw:H,text:H}}return Y(ve,F,ve[0],this.lexer)}},pe.emStrong=function(ie,se,ve){ve===void 0&&(ve="");var F=this.rules.inline.emStrong.lDelim.exec(ie);if(F&&(!F[3]||!ve.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var H=F[1]||F[2]||"";if(!H||H&&(ve===""||this.rules.inline.punctuation.exec(ve))){var J,re,ye=F[0].length-1,xe=ye,Re=0,P=F[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(P.lastIndex=0,se=se.slice(-1*ie.length+ye);(F=P.exec(se))!=null;)if(J=F[1]||F[2]||F[3]||F[4]||F[5]||F[6])if(re=J.length,F[3]||F[4])xe+=re;else if(!((F[5]||F[6])&&ye%3)||(ye+re)%3){if(!((xe-=re)>0)){if(re=Math.min(re,re+xe+Re),Math.min(ye,re)%2){var Q=ie.slice(1,ye+F.index+re);return{type:"em",raw:ie.slice(0,ye+F.index+re+1),text:Q,tokens:this.lexer.inlineTokens(Q)}}var oe=ie.slice(2,ye+F.index+re-1);return{type:"strong",raw:ie.slice(0,ye+F.index+re+1),text:oe,tokens:this.lexer.inlineTokens(oe)}}}else Re+=re}}},pe.codespan=function(ie){var se=this.rules.inline.code.exec(ie);if(se){var ve=se[2].replace(/\n/g," "),F=/[^ ]/.test(ve),H=/^ /.test(ve)&&/ $/.test(ve);return F&&H&&(ve=ve.substring(1,ve.length-1)),ve=b(ve,!0),{type:"codespan",raw:se[0],text:ve}}},pe.br=function(ie){var se=this.rules.inline.br.exec(ie);if(se)return{type:"br",raw:se[0]}},pe.del=function(ie){var se=this.rules.inline.del.exec(ie);if(se)return{type:"del",raw:se[0],text:se[2],tokens:this.lexer.inlineTokens(se[2])}},pe.autolink=function(ie,se){var ve,F,H=this.rules.inline.autolink.exec(ie);if(H)return F=H[2]==="@"?"mailto:"+(ve=b(this.options.mangle?se(H[1]):H[1])):ve=b(H[1]),{type:"link",raw:H[0],text:ve,href:F,tokens:[{type:"text",raw:ve,text:ve}]}},pe.url=function(ie,se){var ve;if(ve=this.rules.inline.url.exec(ie)){var F,H;if(ve[2]==="@")H="mailto:"+(F=b(this.options.mangle?se(ve[0]):ve[0]));else{var J;do J=ve[0],ve[0]=this.rules.inline._backpedal.exec(ve[0])[0];while(J!==ve[0]);F=b(ve[0]),H=ve[1]==="www."?"http://"+F:F}return{type:"link",raw:ve[0],text:F,href:H,tokens:[{type:"text",raw:F,text:F}]}}},pe.inlineText=function(ie,se){var ve,F=this.rules.inline.text.exec(ie);if(F)return ve=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(F[0]):b(F[0]):F[0]:b(this.options.smartypants?se(F[0]):F[0]),{type:"text",raw:F[0],text:ve}},Ze}(),te={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:K,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};te.def=E(te.def).replace("label",te._label).replace("title",te._title).getRegex(),te.bullet=/(?:[*+-]|\d{1,9}[.)])/,te.listItemStart=E(/^( *)(bull) */).replace("bull",te.bullet).getRegex(),te.list=E(te.list).replace(/bull/g,te.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+te.def.source+")").getRegex(),te._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",te._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,te.html=E(te.html,"i").replace("comment",te._comment).replace("tag",te._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),te.paragraph=E(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.blockquote=E(te.blockquote).replace("paragraph",te.paragraph).getRegex(),te.normal=L({},te),te.gfm=L({},te.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),te.gfm.table=E(te.gfm.table).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.gfm.paragraph=E(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",te.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.pedantic=L({},te.normal,{html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",te._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:K,paragraph:E(te.normal._paragraph).replace("hr",te.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",te.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var le={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:K,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:K,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function ee(Ze){return Ze.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function z(Ze){var pe,ie,se="",ve=Ze.length;for(pe=0;pe<ve;pe++)ie=Ze.charCodeAt(pe),Math.random()>.5&&(ie="x"+ie.toString(16)),se+="&#"+ie+";";return se}le._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",le.punctuation=E(le.punctuation).replace(/punctuation/g,le._punctuation).getRegex(),le.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,le.escapedEmSt=/\\\*|\\_/g,le._comment=E(te._comment).replace("(?:-->|$)","-->").getRegex(),le.emStrong.lDelim=E(le.emStrong.lDelim).replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimAst=E(le.emStrong.rDelimAst,"g").replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimUnd=E(le.emStrong.rDelimUnd,"g").replace(/punct/g,le._punctuation).getRegex(),le._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,le._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,le._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,le.autolink=E(le.autolink).replace("scheme",le._scheme).replace("email",le._email).getRegex(),le._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,le.tag=E(le.tag).replace("comment",le._comment).replace("attribute",le._attribute).getRegex(),le._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,le._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,le._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,le.link=E(le.link).replace("label",le._label).replace("href",le._href).replace("title",le._title).getRegex(),le.reflink=E(le.reflink).replace("label",le._label).replace("ref",te._label).getRegex(),le.nolink=E(le.nolink).replace("ref",te._label).getRegex(),le.reflinkSearch=E(le.reflinkSearch,"g").replace("reflink",le.reflink).replace("nolink",le.nolink).getRegex(),le.normal=L({},le),le.pedantic=L({},le.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",le._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",le._label).getRegex()}),le.gfm=L({},le.normal,{escape:E(le.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),le.gfm.url=E(le.gfm.url,"i").replace("email",le.gfm._extended_email).getRegex(),le.breaks=L({},le.gfm,{br:E(le.br).replace("{2,}","*").getRegex(),text:E(le.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var he=function(){function Ze(F){this.tokens=[],this.tokens.links=Object.create(null),this.options=F||o.defaults,this.options.tokenizer=this.options.tokenizer||new X,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var H={block:te.normal,inline:le.normal};this.options.pedantic?(H.block=te.pedantic,H.inline=le.pedantic):this.options.gfm&&(H.block=te.gfm,this.options.breaks?H.inline=le.breaks:H.inline=le.gfm),this.tokenizer.rules=H}Ze.lex=function(F,H){return new Ze(H).lex(F)},Ze.lexInline=function(F,H){return new Ze(H).inlineTokens(F)};var pe,ie,se,ve=Ze.prototype;return ve.lex=function(F){var H;for(F=F.replace(/\r\n|\r/g,`
`),this.blockTokens(F,this.tokens);H=this.inlineQueue.shift();)this.inlineTokens(H.src,H.tokens);return this.tokens},ve.blockTokens=function(F,H){var J,re,ye,xe,Re=this;for(H===void 0&&(H=[]),F=this.options.pedantic?F.replace(/\t/g,"    ").replace(/^ +$/gm,""):F.replace(/^( *)(\t+)/gm,function(Q,oe,ae){return oe+"    ".repeat(ae.length)});F;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Q){return!!(J=Q.call({lexer:Re},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)}))){if(J=this.tokenizer.space(F))F=F.substring(J.raw.length),J.raw.length===1&&H.length>0?H[H.length-1].raw+=`
`:H.push(J);else if(J=this.tokenizer.code(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?H.push(J):(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.fences(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.heading(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.hr(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.blockquote(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.list(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.html(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.def(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?this.tokens.links[J.tag]||(this.tokens.links[J.tag]={href:J.href,title:J.title}):(re.raw+=`
`+J.raw,re.text+=`
`+J.raw,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.table(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.lheading(F))F=F.substring(J.raw.length),H.push(J);else if(ye=F,this.options.extensions&&this.options.extensions.startBlock&&function(){var Q=1/0,oe=F.slice(1),ae=void 0;Re.options.extensions.startBlock.forEach(function(ke){typeof(ae=ke.call({lexer:this},oe))=="number"&&ae>=0&&(Q=Math.min(Q,ae))}),Q<1/0&&Q>=0&&(ye=F.substring(0,Q+1))}(),this.state.top&&(J=this.tokenizer.paragraph(ye)))re=H[H.length-1],xe&&re.type==="paragraph"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J),xe=ye.length!==F.length,F=F.substring(J.raw.length);else if(J=this.tokenizer.text(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&re.type==="text"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J);else if(F){var P="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(P);break}throw new Error(P)}}return this.state.top=!0,H},ve.inline=function(F,H){return H===void 0&&(H=[]),this.inlineQueue.push({src:F,tokens:H}),H},ve.inlineTokens=function(F,H){var J,re,ye,xe=this;H===void 0&&(H=[]);var Re,P,Q,oe=F;if(this.tokens.links){var ae=Object.keys(this.tokens.links);if(ae.length>0)for(;(Re=this.tokenizer.rules.inline.reflinkSearch.exec(oe))!=null;)ae.includes(Re[0].slice(Re[0].lastIndexOf("[")+1,-1))&&(oe=oe.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+oe.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Re=this.tokenizer.rules.inline.blockSkip.exec(oe))!=null;)oe=oe.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+oe.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Re=this.tokenizer.rules.inline.escapedEmSt.exec(oe))!=null;)oe=oe.slice(0,Re.index)+"++"+oe.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;F;)if(P||(Q=""),P=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ce){return!!(J=Ce.call({lexer:xe},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)})))if(J=this.tokenizer.escape(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.tag(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.link(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.reflink(F,this.tokens.links))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.emStrong(F,oe,Q))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.codespan(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.br(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.del(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.autolink(F,z))F=F.substring(J.raw.length),H.push(J);else if(this.state.inLink||!(J=this.tokenizer.url(F,z))){if(ye=F,this.options.extensions&&this.options.extensions.startInline&&function(){var Ce=1/0,Ee=F.slice(1),De=void 0;xe.options.extensions.startInline.forEach(function(Me){typeof(De=Me.call({lexer:this},Ee))=="number"&&De>=0&&(Ce=Math.min(Ce,De))}),Ce<1/0&&Ce>=0&&(ye=F.substring(0,Ce+1))}(),J=this.tokenizer.inlineText(ye,ee))F=F.substring(J.raw.length),J.raw.slice(-1)!=="_"&&(Q=J.raw.slice(-1)),P=!0,(re=H[H.length-1])&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(F){var ke="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(ke);break}throw new Error(ke)}}else F=F.substring(J.raw.length),H.push(J);return H},pe=Ze,se=[{key:"rules",get:function(){return{block:te,inline:le}}}],(ie=null)&&s(pe.prototype,ie),se&&s(pe,se),Object.defineProperty(pe,"prototype",{writable:!1}),Ze}(),de=function(){function Ze(ie){this.options=ie||o.defaults}var pe=Ze.prototype;return pe.code=function(ie,se,ve){var F=(se||"").match(/\S*/)[0];if(this.options.highlight){var H=this.options.highlight(ie,F);H!=null&&H!==ie&&(ve=!0,ie=H)}return ie=ie.replace(/\n$/,"")+`
`,F?'<pre><code class="'+this.options.langPrefix+b(F,!0)+'">'+(ve?ie:b(ie,!0))+`</code></pre>
`:"<pre><code>"+(ve?ie:b(ie,!0))+`</code></pre>
`},pe.blockquote=function(ie){return`<blockquote>
`+ie+`</blockquote>
`},pe.html=function(ie){return ie},pe.heading=function(ie,se,ve,F){return this.options.headerIds?"<h"+se+' id="'+(this.options.headerPrefix+F.slug(ve))+'">'+ie+"</h"+se+`>
`:"<h"+se+">"+ie+"</h"+se+`>
`},pe.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},pe.list=function(ie,se,ve){var F=se?"ol":"ul";return"<"+F+(se&&ve!==1?' start="'+ve+'"':"")+`>
`+ie+"</"+F+`>
`},pe.listitem=function(ie){return"<li>"+ie+`</li>
`},pe.checkbox=function(ie){return"<input "+(ie?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},pe.paragraph=function(ie){return"<p>"+ie+`</p>
`},pe.table=function(ie,se){return se&&(se="<tbody>"+se+"</tbody>"),`<table>
<thead>
`+ie+`</thead>
`+se+`</table>
`},pe.tablerow=function(ie){return`<tr>
`+ie+`</tr>
`},pe.tablecell=function(ie,se){var ve=se.header?"th":"td";return(se.align?"<"+ve+' align="'+se.align+'">':"<"+ve+">")+ie+"</"+ve+`>
`},pe.strong=function(ie){return"<strong>"+ie+"</strong>"},pe.em=function(ie){return"<em>"+ie+"</em>"},pe.codespan=function(ie){return"<code>"+ie+"</code>"},pe.br=function(){return this.options.xhtml?"<br/>":"<br>"},pe.del=function(ie){return"<del>"+ie+"</del>"},pe.link=function(ie,se,ve){if((ie=D(this.options.sanitize,this.options.baseUrl,ie))===null)return ve;var F='<a href="'+b(ie)+'"';return se&&(F+=' title="'+se+'"'),F+=">"+ve+"</a>"},pe.image=function(ie,se,ve){if((ie=D(this.options.sanitize,this.options.baseUrl,ie))===null)return ve;var F='<img src="'+ie+'" alt="'+ve+'"';return se&&(F+=' title="'+se+'"'),F+=this.options.xhtml?"/>":">"},pe.text=function(ie){return ie},Ze}(),ze=function(){function Ze(){}var pe=Ze.prototype;return pe.strong=function(ie){return ie},pe.em=function(ie){return ie},pe.codespan=function(ie){return ie},pe.del=function(ie){return ie},pe.html=function(ie){return ie},pe.text=function(ie){return ie},pe.link=function(ie,se,ve){return""+ve},pe.image=function(ie,se,ve){return""+ve},pe.br=function(){return""},Ze}(),He=function(){function Ze(){this.seen={}}var pe=Ze.prototype;return pe.serialize=function(ie){return ie.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},pe.getNextSafeSlug=function(ie,se){var ve=ie,F=0;if(this.seen.hasOwnProperty(ve)){F=this.seen[ie];do ve=ie+"-"+ ++F;while(this.seen.hasOwnProperty(ve))}return se||(this.seen[ie]=F,this.seen[ve]=0),ve},pe.slug=function(ie,se){se===void 0&&(se={});var ve=this.serialize(ie);return this.getNextSafeSlug(ve,se.dryrun)},Ze}(),je=function(){function Ze(ie){this.options=ie||o.defaults,this.options.renderer=this.options.renderer||new de,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ze,this.slugger=new He}Ze.parse=function(ie,se){return new Ze(se).parse(ie)},Ze.parseInline=function(ie,se){return new Ze(se).parseInline(ie)};var pe=Ze.prototype;return pe.parse=function(ie,se){se===void 0&&(se=!0);var ve,F,H,J,re,ye,xe,Re,P,Q,oe,ae,ke,Ce,Ee,De,Me,We,tt,dt="",Kt=ie.length;for(ve=0;ve<Kt;ve++)if(Q=ie[ve],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Q.type])||(tt=this.options.extensions.renderers[Q.type].call({parser:this},Q))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Q.type))switch(Q.type){case"space":continue;case"hr":dt+=this.renderer.hr();continue;case"heading":dt+=this.renderer.heading(this.parseInline(Q.tokens),Q.depth,v(this.parseInline(Q.tokens,this.textRenderer)),this.slugger);continue;case"code":dt+=this.renderer.code(Q.text,Q.lang,Q.escaped);continue;case"table":for(Re="",xe="",J=Q.header.length,F=0;F<J;F++)xe+=this.renderer.tablecell(this.parseInline(Q.header[F].tokens),{header:!0,align:Q.align[F]});for(Re+=this.renderer.tablerow(xe),P="",J=Q.rows.length,F=0;F<J;F++){for(xe="",re=(ye=Q.rows[F]).length,H=0;H<re;H++)xe+=this.renderer.tablecell(this.parseInline(ye[H].tokens),{header:!1,align:Q.align[H]});P+=this.renderer.tablerow(xe)}dt+=this.renderer.table(Re,P);continue;case"blockquote":P=this.parse(Q.tokens),dt+=this.renderer.blockquote(P);continue;case"list":for(oe=Q.ordered,ae=Q.start,ke=Q.loose,J=Q.items.length,P="",F=0;F<J;F++)De=(Ee=Q.items[F]).checked,Me=Ee.task,Ce="",Ee.task&&(We=this.renderer.checkbox(De),ke?Ee.tokens.length>0&&Ee.tokens[0].type==="paragraph"?(Ee.tokens[0].text=We+" "+Ee.tokens[0].text,Ee.tokens[0].tokens&&Ee.tokens[0].tokens.length>0&&Ee.tokens[0].tokens[0].type==="text"&&(Ee.tokens[0].tokens[0].text=We+" "+Ee.tokens[0].tokens[0].text)):Ee.tokens.unshift({type:"text",text:We}):Ce+=We),Ce+=this.parse(Ee.tokens,ke),P+=this.renderer.listitem(Ce,Me,De);dt+=this.renderer.list(P,oe,ae);continue;case"html":dt+=this.renderer.html(Q.text);continue;case"paragraph":dt+=this.renderer.paragraph(this.parseInline(Q.tokens));continue;case"text":for(P=Q.tokens?this.parseInline(Q.tokens):Q.text;ve+1<Kt&&ie[ve+1].type==="text";)P+=`
`+((Q=ie[++ve]).tokens?this.parseInline(Q.tokens):Q.text);dt+=se?this.renderer.paragraph(P):P;continue;default:var xt='Token with "'+Q.type+'" type was not found.';if(this.options.silent)return void console.error(xt);throw new Error(xt)}else dt+=tt||"";return dt},pe.parseInline=function(ie,se){se=se||this.renderer;var ve,F,H,J="",re=ie.length;for(ve=0;ve<re;ve++)if(F=ie[ve],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[F.type])||(H=this.options.extensions.renderers[F.type].call({parser:this},F))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(F.type))switch(F.type){case"escape":case"text":J+=se.text(F.text);break;case"html":J+=se.html(F.text);break;case"link":J+=se.link(F.href,F.title,this.parseInline(F.tokens,se));break;case"image":J+=se.image(F.href,F.title,F.text);break;case"strong":J+=se.strong(this.parseInline(F.tokens,se));break;case"em":J+=se.em(this.parseInline(F.tokens,se));break;case"codespan":J+=se.codespan(F.text);break;case"br":J+=se.br();break;case"del":J+=se.del(this.parseInline(F.tokens,se));break;default:var ye='Token with "'+F.type+'" type was not found.';if(this.options.silent)return void console.error(ye);throw new Error(ye)}else J+=H||"";return J},Ze}();function we(Ze,pe,ie){if(Ze==null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");if(typeof pe=="function"&&(ie=pe,pe=null),U(pe=L({},we.defaults,pe||{})),ie){var se,ve=pe.highlight;try{se=he.lex(Ze,pe)}catch(ye){return ie(ye)}var F=function(ye){var xe;if(!ye)try{pe.walkTokens&&we.walkTokens(se,pe.walkTokens),xe=je.parse(se,pe)}catch(Re){ye=Re}return pe.highlight=ve,ye?ie(ye):ie(null,xe)};if(!ve||ve.length<3||(delete pe.highlight,!se.length))return F();var H=0;return we.walkTokens(se,function(ye){ye.type==="code"&&(H++,setTimeout(function(){ve(ye.text,ye.lang,function(xe,Re){if(xe)return F(xe);Re!=null&&Re!==ye.text&&(ye.text=Re,ye.escaped=!0),--H===0&&F()})},0))}),void(H===0&&F())}function J(ye){if(ye.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+b(ye.message+"",!0)+"</pre>";throw ye}try{var re=he.lex(Ze,pe);if(pe.walkTokens){if(pe.async)return Promise.all(we.walkTokens(re,pe.walkTokens)).then(function(){return je.parse(re,pe)}).catch(J);we.walkTokens(re,pe.walkTokens)}return je.parse(re,pe)}catch(ye){J(ye)}}we.options=we.setOptions=function(Ze){var pe;return L(we.defaults,Ze),pe=we.defaults,o.defaults=pe,we},we.getDefaults=u,we.defaults=o.defaults,we.use=function(){for(var Ze=arguments.length,pe=new Array(Ze),ie=0;ie<Ze;ie++)pe[ie]=arguments[ie];var se,ve=L.apply(void 0,[{}].concat(pe)),F=we.defaults.extensions||{renderers:{},childTokens:{}};pe.forEach(function(H){if(H.extensions&&(se=!0,H.extensions.forEach(function(re){if(!re.name)throw new Error("extension name required");if(re.renderer){var ye=F.renderers?F.renderers[re.name]:null;F.renderers[re.name]=ye?function(){for(var xe=arguments.length,Re=new Array(xe),P=0;P<xe;P++)Re[P]=arguments[P];var Q=re.renderer.apply(this,Re);return Q===!1&&(Q=ye.apply(this,Re)),Q}:re.renderer}if(re.tokenizer){if(!re.level||re.level!=="block"&&re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");F[re.level]?F[re.level].unshift(re.tokenizer):F[re.level]=[re.tokenizer],re.start&&(re.level==="block"?F.startBlock?F.startBlock.push(re.start):F.startBlock=[re.start]:re.level==="inline"&&(F.startInline?F.startInline.push(re.start):F.startInline=[re.start]))}re.childTokens&&(F.childTokens[re.name]=re.childTokens)})),H.renderer&&function(){var re=we.defaults.renderer||new de,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,oe=new Array(Q),ae=0;ae<Q;ae++)oe[ae]=arguments[ae];var ke=H.renderer[Re].apply(re,oe);return ke===!1&&(ke=P.apply(re,oe)),ke}};for(var xe in H.renderer)ye(xe);ve.renderer=re}(),H.tokenizer&&function(){var re=we.defaults.tokenizer||new X,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,oe=new Array(Q),ae=0;ae<Q;ae++)oe[ae]=arguments[ae];var ke=H.tokenizer[Re].apply(re,oe);return ke===!1&&(ke=P.apply(re,oe)),ke}};for(var xe in H.tokenizer)ye(xe);ve.tokenizer=re}(),H.walkTokens){var J=we.defaults.walkTokens;ve.walkTokens=function(re){var ye=[];return ye.push(H.walkTokens.call(this,re)),J&&(ye=ye.concat(J.call(this,re))),ye}}se&&(ve.extensions=F),we.setOptions(ve)})},we.walkTokens=function(Ze,pe){for(var ie,se=[],ve=function(){var H=ie.value;switch(se=se.concat(pe.call(we,H)),H.type){case"table":for(var J,re=l(H.header);!(J=re()).done;){var ye=J.value;se=se.concat(we.walkTokens(ye.tokens,pe))}for(var xe,Re=l(H.rows);!(xe=Re()).done;)for(var P,Q=l(xe.value);!(P=Q()).done;){var oe=P.value;se=se.concat(we.walkTokens(oe.tokens,pe))}break;case"list":se=se.concat(we.walkTokens(H.items,pe));break;default:we.defaults.extensions&&we.defaults.extensions.childTokens&&we.defaults.extensions.childTokens[H.type]?we.defaults.extensions.childTokens[H.type].forEach(function(ae){se=se.concat(we.walkTokens(H[ae],pe))}):H.tokens&&(se=se.concat(we.walkTokens(H.tokens,pe)))}},F=l(Ze);!(ie=F()).done;)ve();return se},we.parseInline=function(Ze,pe){if(Ze==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");U(pe=L({},we.defaults,pe||{}));try{var ie=he.lexInline(Ze,pe);return pe.walkTokens&&we.walkTokens(ie,pe.walkTokens),je.parseInline(ie,pe)}catch(se){if(se.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+b(se.message+"",!0)+"</pre>";throw se}},we.Parser=je,we.parser=je.parse,we.Renderer=de,we.TextRenderer=ze,we.Lexer=he,we.lexer=he.lex,we.Tokenizer=X,we.Slugger=He,we.parse=we;var Ie=we.options,qe=we.setOptions,Pe=we.use,At=we.walkTokens,ht=we.parseInline,nn=we,Vt=je.parse,On=he.lex;o.Lexer=he,o.Parser=je,o.Renderer=de,o.Slugger=He,o.TextRenderer=ze,o.Tokenizer=X,o.getDefaults=u,o.lexer=On,o.marked=we,o.options=Ie,o.parse=nn,o.parseInline=ht,o.parser=Vt,o.setOptions=qe,o.use=Pe,o.walkTokens=At,Object.defineProperty(o,"__esModule",{value:!0})})},{}],16:[function(n,r,i){(function(o){(function(){var s;(function(){(s=function(a,l,u,f){f=f||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=f.flags||{},this.memoized={},this.loaded=!1;var c,d,h,p,m,b=this;function y(A,T){var D=b._readFile(A,null,f.asyncLoad);f.asyncLoad?D.then(function(k){T(k)}):T(D)}function v(A){l=A,u&&E()}function w(A){u=A,l&&E()}function E(){for(b.rules=b._parseAFF(l),b.compoundRuleCodes={},d=0,p=b.compoundRules.length;d<p;d++){var A=b.compoundRules[d];for(h=0,m=A.length;h<m;h++)b.compoundRuleCodes[A[h]]=[]}for(d in"ONLYINCOMPOUND"in b.flags&&(b.compoundRuleCodes[b.flags.ONLYINCOMPOUND]=[]),b.dictionaryTable=b._parseDIC(u),b.compoundRuleCodes)b.compoundRuleCodes[d].length===0&&delete b.compoundRuleCodes[d];for(d=0,p=b.compoundRules.length;d<p;d++){var T=b.compoundRules[d],D="";for(h=0,m=T.length;h<m;h++){var k=T[h];k in b.compoundRuleCodes?D+="("+b.compoundRuleCodes[k].join("|")+")":D+=k}b.compoundRules[d]=new RegExp(D,"i")}b.loaded=!0,f.asyncLoad&&f.loadedCallback&&f.loadedCallback(b)}return a&&(b.dictionary=a,l&&u?E():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(c=f.dictionaryPath?f.dictionaryPath:"typo/dictionaries",l||y(chrome.extension.getURL(c+"/"+a+"/"+a+".aff"),v),u||y(chrome.extension.getURL(c+"/"+a+"/"+a+".dic"),w)):(c=f.dictionaryPath?f.dictionaryPath:o!==void 0?o+"/dictionaries":"./dictionaries",l||y(c+"/"+a+"/"+a+".aff",v),u||y(c+"/"+a+"/"+a+".dic",w))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,u){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var f,c=new XMLHttpRequest;return c.open("GET",a,u),u&&(f=new Promise(function(h,p){c.onload=function(){c.status===200?h(c.responseText):p(c.statusText)},c.onerror=function(){p(c.statusText)}})),c.overrideMimeType&&c.overrideMimeType("text/plain; charset="+l),c.send(null),u?f:c.responseText}if(n!==void 0){var d=n("fs");try{if(d.existsSync(a))return d.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(h){return console.log(h),""}}},_parseAFF:function(a){var l,u,f,c,d,h,p,m={},b=a.split(/\r?\n/);for(c=0,h=b.length;c<h;c++)if(l=(l=this._removeAffixComments(b[c])).trim()){var y=l.split(/\s+/),v=y[0];if(v=="PFX"||v=="SFX"){var w=y[1],E=y[2],A=[];for(d=c+1,p=c+1+(u=parseInt(y[3],10));d<p;d++){var T=(f=b[d].split(/\s+/))[2],D=f[3].split("/"),k=D[0];k==="0"&&(k="");var R=this.parseRuleCodes(D[1]),M=f[4],B={};B.add=k,R.length>0&&(B.continuationClasses=R),M!=="."&&(B.match=v==="SFX"?new RegExp(M+"$"):new RegExp("^"+M)),T!="0"&&(B.remove=v==="SFX"?new RegExp(T+"$"):T),A.push(B)}m[w]={type:v,combineable:E=="Y",entries:A},c+=u}else if(v==="COMPOUNDRULE"){for(d=c+1,p=c+1+(u=parseInt(y[1],10));d<p;d++)f=(l=b[d]).split(/\s+/),this.compoundRules.push(f[1]);c+=u}else v==="REP"?(f=l.split(/\s+/)).length===3&&this.replacementTable.push([f[1],f[2]]):this.flags[v]=y[1]}return m},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),u={};function f(I,U){u.hasOwnProperty(I)||(u[I]=null),U.length>0&&(u[I]===null&&(u[I]=[]),u[I].push(U))}for(var c=1,d=l.length;c<d;c++){var h=l[c];if(h){var p=h.split("/",2),m=p[0];if(p.length>1){var b=this.parseRuleCodes(p[1]);"NEEDAFFIX"in this.flags&&b.indexOf(this.flags.NEEDAFFIX)!=-1||f(m,b);for(var y=0,v=b.length;y<v;y++){var w=b[y],E=this.rules[w];if(E)for(var A=this._applyRule(m,E),T=0,D=A.length;T<D;T++){var k=A[T];if(f(k,[]),E.combineable)for(var R=y+1;R<v;R++){var M=b[R],B=this.rules[M];if(B&&B.combineable&&E.type!=B.type)for(var K=this._applyRule(k,B),L=0,$=K.length;L<$;L++)f(K[L],[])}}w in this.compoundRuleCodes&&this.compoundRuleCodes[w].push(m)}}else f(m.trim(),[])}}return u},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],u=0,f=a.length;u<f;u+=2)l.push(a.substr(u,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var u=l.entries,f=[],c=0,d=u.length;c<d;c++){var h=u[c];if(!h.match||a.match(h.match)){var p=a;if(h.remove&&(p=p.replace(h.remove,"")),l.type==="SFX"?p+=h.add:p=h.add+p,f.push(p),"continuationClasses"in h)for(var m=0,b=h.continuationClasses.length;m<b;m++){var y=this.rules[h.continuationClasses[m]];y&&(f=f.concat(this._applyRule(p,y)))}}}return f},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var u=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(u,"KEEPCASE"))return!1;if(this.checkExact(u)||this.checkExact(l.toLowerCase()))return!0}var f=l[0].toLowerCase()+l.substring(1);if(f!==l){if(this.hasFlag(f,"KEEPCASE"))return!1;if(this.checkExact(f))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,u,f=this.dictionaryTable[a];if(f===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,u=this.compoundRules.length;l<u;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(f===null)return!0;if(typeof f=="object"){for(l=0,u=f.length;l<u;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",f[l]))return!0}}return!1},hasFlag:function(a,l,u){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(u===void 0&&(u=Array.prototype.concat.apply([],this.dictionaryTable[a])),!u||u.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var u=this.memoized[a].limit;if(l<=u||this.memoized[a].suggestions.length<u)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var f=0,c=this.replacementTable.length;f<c;f++){var d=this.replacementTable[f];if(a.indexOf(d[0])!==-1){var h=a.replace(d[0],d[1]);if(this.check(h))return[h]}}var p=this;function m(b,y){var v,w,E,A,T={},D=p.alphabet.length;if(typeof b=="string"){var k=b;(b={})[k]=!0}for(var k in b)for(v=0,E=k.length+1;v<E;v++){var R=[k.substring(0,v),k.substring(v)];if(R[1]&&(A=R[0]+R[1].substring(1),y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)),R[1].length>1&&R[1][1]!==R[1][0]&&(A=R[0]+R[1][1]+R[1][0]+R[1].substring(2),y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)),R[1]){var M=R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase";for(w=0;w<D;w++){var B=p.alphabet[w];M==="uppercase"&&(B=B.toUpperCase()),B!=R[1].substring(0,1)&&(A=R[0]+B+R[1].substring(1),y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1))}}if(R[1])for(w=0;w<D;w++)M=R[0].substring(-1).toUpperCase()===R[0].substring(-1)&&R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase",B=p.alphabet[w],M==="uppercase"&&(B=B.toUpperCase()),A=R[0]+B+R[1],y&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)}return T}return p.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(b){var y,v=m(b),w=m(v,!0);for(var E in v)p.check(E)&&(E in w?w[E]+=v[E]:w[E]=v[E]);var A=[];for(y in w)w.hasOwnProperty(y)&&A.push([y,w[y]]);A.sort(function(R,M){var B=R[1],K=M[1];return B<K?-1:B>K?1:M[0].localeCompare(R[0])}).reverse();var T=[],D="lowercase";b.toUpperCase()===b?D="uppercase":b.substr(0,1).toUpperCase()+b.substr(1).toLowerCase()===b&&(D="capitalized");var k=l;for(y=0;y<Math.min(k,A.length);y++)D==="uppercase"?A[y][0]=A[y][0].toUpperCase():D==="capitalized"&&(A[y][0]=A[y][0].substr(0,1).toUpperCase()+A[y][0].substr(1)),p.hasFlag(A[y][0],"NOSUGGEST")||T.indexOf(A[y][0])!=-1?k++:T.push(A[y][0]);return T}(a),limit:l},this.memoized[a].suggestions}}})(),r!==void 0&&(r.exports=s)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(n,r,i){var o=n("codemirror");o.commands.tabAndIndentMarkdownList=function(s){var a=s.listSelections()[0].head;if(s.getStateAfter(a.line).list!==!1)s.execCommand("indentMore");else if(s.options.indentWithTabs)s.execCommand("insertTab");else{var l=Array(s.options.tabSize+1).join(" ");s.replaceSelection(l)}},o.commands.shiftTabAndUnindentMarkdownList=function(s){var a=s.listSelections()[0].head;if(s.getStateAfter(a.line).list!==!1)s.execCommand("indentLess");else if(s.options.indentWithTabs)s.execCommand("insertTab");else{var l=Array(s.options.tabSize+1).join(" ");s.replaceSelection(l)}}},{codemirror:10}],18:[function(n,r,i){var o=n("codemirror");n("codemirror/addon/edit/continuelist.js"),n("./codemirror/tablist"),n("codemirror/addon/display/fullscreen.js"),n("codemirror/mode/markdown/markdown.js"),n("codemirror/addon/mode/overlay.js"),n("codemirror/addon/display/placeholder.js"),n("codemirror/addon/display/autorefresh.js"),n("codemirror/addon/selection/mark-selection.js"),n("codemirror/addon/search/searchcursor.js"),n("codemirror/mode/gfm/gfm.js"),n("codemirror/mode/xml/xml.js");var s=n("codemirror-spell-checker"),a=n("marked").marked,l=/Mac/.test(navigator.platform),u=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),f={toggleBold:E,toggleItalic:A,drawLink:te,toggleHeadingSmaller:R,toggleHeadingBigger:M,drawImage:le,toggleBlockquote:k,toggleOrderedList:Y,toggleUnorderedList:q,toggleCodeBlock:D,togglePreview:Ie,toggleStrikethrough:T,toggleHeading1:B,toggleHeading2:K,toggleHeading3:L,toggleHeading4:$,toggleHeading5:I,toggleHeading6:U,cleanBlock:X,drawTable:de,drawHorizontalRule:ze,undo:He,redo:je,toggleSideBySide:we,toggleFullScreen:w},c={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(){var P,Q=!1;return P=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(P)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(P.substr(0,4)))&&(Q=!0),Q};function h(P){return P=l?P.replace("Ctrl","Cmd"):P.replace("Cmd","Ctrl")}function p(P,Q,oe,ae){var ke=m(P,!1,Q,oe,"button",ae);ke.classList.add("easymde-dropdown"),ke.onclick=function(){ke.focus()};var Ce=document.createElement("div");Ce.className="easymde-dropdown-content";for(var Ee=0;Ee<P.children.length;Ee++){var De,Me=P.children[Ee];(De=m(typeof Me=="string"&&Me in se?se[Me]:Me,!0,Q,oe,"button",ae)).addEventListener("click",function(We){We.stopPropagation()},!1),Ce.appendChild(De)}return ke.appendChild(Ce),ke}function m(P,Q,oe,ae,ke,Ce){P=P||{};var Ee=document.createElement(ke);if(P.attributes)for(var De in P.attributes)Object.prototype.hasOwnProperty.call(P.attributes,De)&&Ee.setAttribute(De,P.attributes[De]);var Me=Ce.options.toolbarButtonClassPrefix?Ce.options.toolbarButtonClassPrefix+"-":"";Ee.className=Me+P.name,Ee.setAttribute("type",ke),oe=oe==null||oe,P.text&&(Ee.innerText=P.text),P.name&&P.name in ae&&(f[P.name]=P.action),P.title&&oe&&(Ee.title=function(on,sn,Tn){var Er,Ki=on;return sn&&Tn[Er=function(ho){for(var Hi in f)if(f[Hi]===ho)return Hi;return null}(sn)]&&(Ki+=" ("+h(Tn[Er])+")"),Ki}(P.title,P.action,ae),l&&(Ee.title=Ee.title.replace("Ctrl",""),Ee.title=Ee.title.replace("Alt",""))),P.title&&Ee.setAttribute("aria-label",P.title),P.noDisable&&Ee.classList.add("no-disable"),P.noMobile&&Ee.classList.add("no-mobile");var We=[];P.className!==void 0&&(We=P.className.split(" "));for(var tt=[],dt=0;dt<We.length;dt++){var Kt=We[dt];Kt.match(/^fa([srlb]|(-[\w-]*)|$)/)?tt.push(Kt):Ee.classList.add(Kt)}if(Ee.tabIndex=-1,tt.length>0){for(var xt=document.createElement("i"),Qt=0;Qt<tt.length;Qt++){var rn=tt[Qt];xt.classList.add(rn)}Ee.appendChild(xt)}return P.icon!==void 0&&(Ee.innerHTML=P.icon),P.action&&Q&&(typeof P.action=="function"?Ee.onclick=function(on){on.preventDefault(),P.action(Ce)}:typeof P.action=="string"&&(Ee.onclick=function(on){on.preventDefault(),window.open(P.action,"_blank")})),Ee}function b(){var P=document.createElement("i");return P.className="separator",P.innerHTML="|",P}function y(P,Q){Q=Q||P.getCursor("start");var oe=P.getTokenAt(Q);if(!oe.type)return{};for(var ae,ke,Ce=oe.type.split(" "),Ee={},De=0;De<Ce.length;De++)(ae=Ce[De])==="strong"?Ee.bold=!0:ae==="variable-2"?(ke=P.getLine(Q.line),/^\s*\d+\.\s/.test(ke)?Ee["ordered-list"]=!0:Ee["unordered-list"]=!0):ae==="atom"?Ee.quote=!0:ae==="em"?Ee.italic=!0:ae==="quote"?Ee.quote=!0:ae==="strikethrough"?Ee.strikethrough=!0:ae==="comment"?Ee.code=!0:ae!=="link"||Ee.image?ae==="image"?Ee.image=!0:ae.match(/^header(-[1-6])?$/)&&(Ee[ae.replace("header","heading")]=!0):Ee.link=!0;return Ee}var v="";function w(P){var Q=P.codemirror;Q.setOption("fullScreen",!Q.getOption("fullScreen")),Q.getOption("fullScreen")?(v=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=v;var oe=Q.getWrapperElement(),ae=oe.nextSibling;if(ae.classList.contains("editor-preview-active-side"))if(P.options.sideBySideFullscreen===!1){var ke=oe.parentNode;Q.getOption("fullScreen")?ke.classList.remove("sided--no-fullscreen"):ke.classList.add("sided--no-fullscreen")}else we(P);P.options.onToggleFullScreen&&P.options.onToggleFullScreen(Q.getOption("fullScreen")||!1),P.options.maxHeight!==void 0&&(Q.getOption("fullScreen")?(Q.getScrollerElement().style.removeProperty("height"),ae.style.removeProperty("height")):(Q.getScrollerElement().style.height=P.options.maxHeight,P.setPreviewMaxHeight())),P.toolbar_div.classList.toggle("fullscreen"),P.toolbarElements&&P.toolbarElements.fullscreen&&P.toolbarElements.fullscreen.classList.toggle("active")}function E(P){nn(P,"bold",P.options.blockStyles.bold)}function A(P){nn(P,"italic",P.options.blockStyles.italic)}function T(P){nn(P,"strikethrough","~~")}function D(P){var Q=P.options.blockStyles.code;function oe(mn){if(typeof mn!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof mn+": "+mn;return mn.styles&&mn.styles[2]&&mn.styles[2].indexOf("formatting-code-block")!==-1}function ae(mn){return mn.state.base.base||mn.state.base}function ke(mn,Kr,or,Ni,tr){or=or||mn.getLineHandle(Kr),Ni=Ni||mn.getTokenAt({line:Kr,ch:1}),tr=tr||!!or.text&&mn.getTokenAt({line:Kr,ch:or.text.length-1});var $r=Ni.type?Ni.type.split(" "):[];return tr&&ae(tr).indentedCode?"indented":$r.indexOf("comment")!==-1&&(ae(Ni).fencedChars||ae(tr).fencedChars||oe(or)?"fenced":"single")}var Ce,Ee,De,Me=P.codemirror,We=Me.getCursor("start"),tt=Me.getCursor("end"),dt=Me.getTokenAt({line:We.line,ch:We.ch||1}),Kt=Me.getLineHandle(We.line),xt=ke(Me,We.line,Kt,dt);if(xt==="single"){var Qt=Kt.text.slice(0,We.ch).replace("`",""),rn=Kt.text.slice(We.ch).replace("`","");Me.replaceRange(Qt+rn,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),We.ch--,We!==tt&&tt.ch--,Me.setSelection(We,tt),Me.focus()}else if(xt==="fenced")if(We.line!==tt.line||We.ch!==tt.ch){for(Ce=We.line;Ce>=0&&!oe(Kt=Me.getLineHandle(Ce));Ce--);var on,sn,Tn,Er,Ki=ae(Me.getTokenAt({line:Ce,ch:1})).fencedChars;oe(Me.getLineHandle(We.line))?(on="",sn=We.line):oe(Me.getLineHandle(We.line-1))?(on="",sn=We.line-1):(on=Ki+`
`,sn=We.line),oe(Me.getLineHandle(tt.line))?(Tn="",Er=tt.line,tt.ch===0&&(Er+=1)):tt.ch!==0&&oe(Me.getLineHandle(tt.line+1))?(Tn="",Er=tt.line+1):(Tn=Ki+`
`,Er=tt.line+1),tt.ch===0&&(Er-=1),Me.operation(function(){Me.replaceRange(Tn,{line:Er,ch:0},{line:Er+(Tn?0:1),ch:0}),Me.replaceRange(on,{line:sn,ch:0},{line:sn+(on?0:1),ch:0})}),Me.setSelection({line:sn+(on?1:0),ch:0},{line:Er+(on?1:-1),ch:0}),Me.focus()}else{var ho=We.line;if(oe(Me.getLineHandle(We.line))&&(ke(Me,We.line+1)==="fenced"?(Ce=We.line,ho=We.line+1):(Ee=We.line,ho=We.line-1)),Ce===void 0)for(Ce=ho;Ce>=0&&!oe(Kt=Me.getLineHandle(Ce));Ce--);if(Ee===void 0)for(De=Me.lineCount(),Ee=ho;Ee<De&&!oe(Kt=Me.getLineHandle(Ee));Ee++);Me.operation(function(){Me.replaceRange("",{line:Ce,ch:0},{line:Ce+1,ch:0}),Me.replaceRange("",{line:Ee-1,ch:0},{line:Ee,ch:0})}),Me.focus()}else if(xt==="indented"){if(We.line!==tt.line||We.ch!==tt.ch)Ce=We.line,Ee=tt.line,tt.ch===0&&Ee--;else{for(Ce=We.line;Ce>=0;Ce--)if(!(Kt=Me.getLineHandle(Ce)).text.match(/^\s*$/)&&ke(Me,Ce,Kt)!=="indented"){Ce+=1;break}for(De=Me.lineCount(),Ee=We.line;Ee<De;Ee++)if(!(Kt=Me.getLineHandle(Ee)).text.match(/^\s*$/)&&ke(Me,Ee,Kt)!=="indented"){Ee-=1;break}}var Hi=Me.getLineHandle(Ee+1),Ns=Hi&&Me.getTokenAt({line:Ee+1,ch:Hi.text.length-1});Ns&&ae(Ns).indentedCode&&Me.replaceRange(`
`,{line:Ee+1,ch:0});for(var qn=Ce;qn<=Ee;qn++)Me.indentLine(qn,"subtract");Me.focus()}else{var Or=We.line===tt.line&&We.ch===tt.ch&&We.ch===0,Lr=We.line!==tt.line;Or||Lr?function(mn,Kr,or,Ni){var tr=Kr.line+1,$r=or.line+1,ns=Kr.line!==or.line,me=Ni+`
`,Le=`
`+Ni;ns&&$r++,ns&&or.ch===0&&(Le=Ni+`
`,$r--),qe(mn,!1,[me,Le]),mn.setSelection({line:tr,ch:0},{line:$r,ch:0})}(Me,We,tt,Q):qe(Me,!1,["`","`"])}}function k(P){At(P.codemirror,"quote")}function R(P){Pe(P.codemirror,"smaller")}function M(P){Pe(P.codemirror,"bigger")}function B(P){Pe(P.codemirror,void 0,1)}function K(P){Pe(P.codemirror,void 0,2)}function L(P){Pe(P.codemirror,void 0,3)}function $(P){Pe(P.codemirror,void 0,4)}function I(P){Pe(P.codemirror,void 0,5)}function U(P){Pe(P.codemirror,void 0,6)}function q(P){var Q=P.codemirror,oe="*";["-","+","*"].includes(P.options.unorderedListStyle)&&(oe=P.options.unorderedListStyle),At(Q,"unordered-list",oe)}function Y(P){At(P.codemirror,"ordered-list")}function X(P){(function(Q){if(!Q.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var oe,ae=Q.getCursor("start"),ke=Q.getCursor("end"),Ce=ae.line;Ce<=ke.line;Ce++)oe=(oe=Q.getLine(Ce)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),Q.replaceRange(oe,{line:Ce,ch:0},{line:Ce,ch:99999999999999})})(P.codemirror)}function te(P){var Q=P.options,oe="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.link,oe);if(!ae)return!1;oe=ee(ae)}ht(P,"link",Q.insertTexts.link,oe)}function le(P){var Q=P.options,oe="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.image,oe);if(!ae)return!1;oe=ee(ae)}ht(P,"image",Q.insertTexts.image,oe)}function ee(P){return encodeURI(P).replace(/([\\()])/g,"\\$1")}function z(P){P.openBrowseFileWindow()}function he(P,Q){var oe=P.codemirror,ae=y(oe),ke=P.options,Ce=Q.substr(Q.lastIndexOf("/")+1),Ee=Ce.substring(Ce.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Ee))qe(oe,ae.image,ke.insertTexts.uploadedImage,Q);else{var De=ke.insertTexts.link;De[0]="["+Ce,qe(oe,ae.link,De,Q)}P.updateStatusBar("upload-image",P.options.imageTexts.sbOnUploaded.replace("#image_name#",Ce)),setTimeout(function(){P.updateStatusBar("upload-image",P.options.imageTexts.sbInit)},1e3)}function de(P){var Q=P.codemirror,oe=y(Q),ae=P.options;qe(Q,oe.table,ae.insertTexts.table)}function ze(P){var Q=P.codemirror,oe=y(Q),ae=P.options;qe(Q,oe.image,ae.insertTexts.horizontalRule)}function He(P){var Q=P.codemirror;Q.undo(),Q.focus()}function je(P){var Q=P.codemirror;Q.redo(),Q.focus()}function we(P){var Q=P.codemirror,oe=Q.getWrapperElement(),ae=oe.nextSibling,ke=P.toolbarElements&&P.toolbarElements["side-by-side"],Ce=!1,Ee=oe.parentNode;ae.classList.contains("editor-preview-active-side")?(P.options.sideBySideFullscreen===!1&&Ee.classList.remove("sided--no-fullscreen"),ae.classList.remove("editor-preview-active-side"),ke&&ke.classList.remove("active"),oe.classList.remove("CodeMirror-sided")):(setTimeout(function(){Q.getOption("fullScreen")||(P.options.sideBySideFullscreen===!1?Ee.classList.add("sided--no-fullscreen"):w(P)),ae.classList.add("editor-preview-active-side")},1),ke&&ke.classList.add("active"),oe.classList.add("CodeMirror-sided"),Ce=!0);var De=oe.lastChild;if(De.classList.contains("editor-preview-active")){De.classList.remove("editor-preview-active");var Me=P.toolbarElements.preview,We=P.toolbar_div;Me.classList.remove("active"),We.classList.remove("disabled-for-preview")}if(Q.sideBySideRenderingFunction||(Q.sideBySideRenderingFunction=function(){var dt=P.options.previewRender(P.value(),ae);dt!=null&&(ae.innerHTML=dt)}),Ce){var tt=P.options.previewRender(P.value(),ae);tt!=null&&(ae.innerHTML=tt),Q.on("update",Q.sideBySideRenderingFunction)}else Q.off("update",Q.sideBySideRenderingFunction);Q.refresh()}function Ie(P){var Q=P.codemirror,oe=Q.getWrapperElement(),ae=P.toolbar_div,ke=!!P.options.toolbar&&P.toolbarElements.preview,Ce=oe.lastChild;if(Q.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&we(P),!Ce||!Ce.classList.contains("editor-preview-full")){if((Ce=document.createElement("div")).className="editor-preview-full",P.options.previewClass)if(Array.isArray(P.options.previewClass))for(var Ee=0;Ee<P.options.previewClass.length;Ee++)Ce.classList.add(P.options.previewClass[Ee]);else typeof P.options.previewClass=="string"&&Ce.classList.add(P.options.previewClass);oe.appendChild(Ce)}Ce.classList.contains("editor-preview-active")?(Ce.classList.remove("editor-preview-active"),ke&&(ke.classList.remove("active"),ae.classList.remove("disabled-for-preview"))):(setTimeout(function(){Ce.classList.add("editor-preview-active")},1),ke&&(ke.classList.add("active"),ae.classList.add("disabled-for-preview")));var De=P.options.previewRender(P.value(),Ce);De!==null&&(Ce.innerHTML=De)}function qe(P,Q,oe,ae){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var ke,Ce=oe[0],Ee=oe[1],De={},Me={};Object.assign(De,P.getCursor("start")),Object.assign(Me,P.getCursor("end")),ae&&(Ce=Ce.replace("#url#",ae),Ee=Ee.replace("#url#",ae)),Q?(Ce=(ke=P.getLine(De.line)).slice(0,De.ch),Ee=ke.slice(De.ch),P.replaceRange(Ce+Ee,{line:De.line,ch:0})):(ke=P.getSelection(),P.replaceSelection(Ce+ke+Ee),De.ch+=Ce.length,De!==Me&&(Me.ch+=Ce.length)),P.setSelection(De,Me),P.focus()}}function Pe(P,Q,oe){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=P.getCursor("start"),ke=P.getCursor("end"),Ce=ae.line;Ce<=ke.line;Ce++)(function(Ee){var De=P.getLine(Ee),Me=De.search(/[^#]/);De=Q!==void 0?Me<=0?Q=="bigger"?"###### "+De:"# "+De:Me==6&&Q=="smaller"?De.substr(7):Me==1&&Q=="bigger"?De.substr(2):Q=="bigger"?De.substr(1):"#"+De:Me<=0?"#".repeat(oe)+" "+De:Me==oe?De.substr(Me+1):"#".repeat(oe)+" "+De.substr(Me+1),P.replaceRange(De,{line:Ee,ch:0},{line:Ee,ch:99999999999999})})(Ce);P.focus()}}function At(P,Q,oe){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,ke=/^\s*/,Ce=y(P),Ee=P.getCursor("start"),De=P.getCursor("end"),Me={quote:/^(\s*)>\s+/,"unordered-list":ae,"ordered-list":ae},We=function(Kt,xt,Qt){var rn=ae.exec(xt),on=function(sn,Tn){return{quote:">","unordered-list":oe,"ordered-list":"%%i."}[sn].replace("%%i",Tn)}(Kt,tt);return rn!==null?(function(sn,Tn){var Er=new RegExp({quote:">","unordered-list":"\\"+oe,"ordered-list":"\\d+."}[sn]);return Tn&&Er.test(Tn)}(Kt,rn[2])&&(on=""),xt=rn[1]+on+rn[3]+xt.replace(ke,"").replace(Me[Kt],"$1")):Qt==0&&(xt=on+" "+xt),xt},tt=1,dt=Ee.line;dt<=De.line;dt++)(function(Kt){var xt=P.getLine(Kt);Ce[Q]?xt=xt.replace(Me[Q],"$1"):(Q=="unordered-list"&&(xt=We("ordered-list",xt,!0)),xt=We(Q,xt,!1),tt+=1),P.replaceRange(xt,{line:Kt,ch:0},{line:Kt,ch:99999999999999})})(dt);P.focus()}}function ht(P,Q,oe,ae){if(P.codemirror&&!P.isPreviewActive()){var ke=P.codemirror,Ce=y(ke)[Q];if(Ce){var Ee=ke.getCursor("start"),De=ke.getCursor("end"),Me=ke.getLine(Ee.line),We=Me.slice(0,Ee.ch),tt=Me.slice(Ee.ch);Q=="link"?We=We.replace(/(.*)[^!]\[/,"$1"):Q=="image"&&(We=We.replace(/(.*)!\[$/,"$1")),tt=tt.replace(/]\(.*?\)/,""),ke.replaceRange(We+tt,{line:Ee.line,ch:0},{line:Ee.line,ch:99999999999999}),Ee.ch-=oe[0].length,Ee!==De&&(De.ch-=oe[0].length),ke.setSelection(Ee,De),ke.focus()}else qe(ke,Ce,oe,ae)}}function nn(P,Q,oe,ae){if(P.codemirror&&!P.isPreviewActive()){ae=ae===void 0?oe:ae;var ke,Ce=P.codemirror,Ee=y(Ce),De=oe,Me=ae,We=Ce.getCursor("start"),tt=Ce.getCursor("end");Ee[Q]?(De=(ke=Ce.getLine(We.line)).slice(0,We.ch),Me=ke.slice(We.ch),Q=="bold"?(De=De.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),Me=Me.replace(/(\*\*|__)/,"")):Q=="italic"?(De=De.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),Me=Me.replace(/(\*|_)/,"")):Q=="strikethrough"&&(De=De.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),Me=Me.replace(/(\*\*|~~)/,"")),Ce.replaceRange(De+Me,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),Q=="bold"||Q=="strikethrough"?(We.ch-=2,We!==tt&&(tt.ch-=2)):Q=="italic"&&(We.ch-=1,We!==tt&&(tt.ch-=1))):(ke=Ce.getSelection(),Q=="bold"?ke=(ke=ke.split("**").join("")).split("__").join(""):Q=="italic"?ke=(ke=ke.split("*").join("")).split("_").join(""):Q=="strikethrough"&&(ke=ke.split("~~").join("")),Ce.replaceSelection(De+ke+Me),We.ch+=oe.length,tt.ch=We.ch+ke.length),Ce.setSelection(We,tt),Ce.focus()}}function Vt(P,Q){if(Math.abs(P)<1024)return""+P+Q[0];var oe=0;do P/=1024,++oe;while(Math.abs(P)>=1024&&oe<Q.length);return""+P.toFixed(1)+Q[oe]}function On(P,Q){for(var oe in Q)Object.prototype.hasOwnProperty.call(Q,oe)&&(Q[oe]instanceof Array?P[oe]=Q[oe].concat(P[oe]instanceof Array?P[oe]:[]):Q[oe]!==null&&typeof Q[oe]=="object"&&Q[oe].constructor===Object?P[oe]=On(P[oe]||{},Q[oe]):P[oe]=Q[oe]);return P}function Ze(P){for(var Q=1;Q<arguments.length;Q++)P=On(P,arguments[Q]);return P}function pe(P){var Q=P.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),oe=0;if(Q===null)return oe;for(var ae=0;ae<Q.length;ae++)Q[ae].charCodeAt(0)>=19968?oe+=Q[ae].length:oe+=1;return oe}var ie={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},se={bold:{name:"bold",action:E,className:ie.bold,title:"Bold",default:!0},italic:{name:"italic",action:A,className:ie.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:T,className:ie.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:R,className:ie.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:R,className:ie["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:M,className:ie["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:B,className:ie["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:K,className:ie["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:L,className:ie["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:D,className:ie.code,title:"Code"},quote:{name:"quote",action:k,className:ie.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:q,className:ie["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:Y,className:ie["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:X,className:ie["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:te,className:ie.link,title:"Create Link",default:!0},image:{name:"image",action:le,className:ie.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:z,className:ie["upload-image"],title:"Import an image"},table:{name:"table",action:de,className:ie.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:ze,className:ie["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:Ie,className:ie.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:we,className:ie["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:w,className:ie.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:ie.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:He,className:ie.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:je,className:ie.redo,noDisable:!0,title:"Redo"}},ve={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},F={link:"URL for the link:",image:"URL of the image:"},H={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},J={bold:"**",code:"```",italic:"*"},re={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},ye={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function xe(P){(P=P||{}).parent=this;var Q=!0;if(P.autoDownloadFontAwesome===!1&&(Q=!1),P.autoDownloadFontAwesome!==!0)for(var oe=document.styleSheets,ae=0;ae<oe.length;ae++)oe[ae].href&&oe[ae].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(Q=!1);if(Q){var ke=document.createElement("link");ke.rel="stylesheet",ke.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(ke)}if(P.element)this.element=P.element;else if(P.element===null)return void console.log("EasyMDE: Error. No element was found.");if(P.toolbar===void 0)for(var Ce in P.toolbar=[],se)Object.prototype.hasOwnProperty.call(se,Ce)&&(Ce.indexOf("separator-")!=-1&&P.toolbar.push("|"),(se[Ce].default===!0||P.showIcons&&P.showIcons.constructor===Array&&P.showIcons.indexOf(Ce)!=-1)&&P.toolbar.push(Ce));if(Object.prototype.hasOwnProperty.call(P,"previewClass")||(P.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(P,"status")||(P.status=["autosave","lines","words","cursor"],P.uploadImage&&P.status.unshift("upload-image")),P.previewRender||(P.previewRender=function(De){return this.parent.markdown(De)}),P.parsingConfig=Ze({highlightFormatting:!0},P.parsingConfig||{}),P.insertTexts=Ze({},ve,P.insertTexts||{}),P.promptTexts=Ze({},F,P.promptTexts||{}),P.blockStyles=Ze({},J,P.blockStyles||{}),P.autosave!=null&&(P.autosave.timeFormat=Ze({},H,P.autosave.timeFormat||{})),P.iconClassMap=Ze({},ie,P.iconClassMap||{}),P.shortcuts=Ze({},c,P.shortcuts||{}),P.maxHeight=P.maxHeight||void 0,P.direction=P.direction||"ltr",P.maxHeight!==void 0?P.minHeight=P.maxHeight:P.minHeight=P.minHeight||"300px",P.errorCallback=P.errorCallback||function(De){alert(De)},P.uploadImage=P.uploadImage||!1,P.imageMaxSize=P.imageMaxSize||2097152,P.imageAccept=P.imageAccept||"image/png, image/jpeg, image/gif, image/avif",P.imageTexts=Ze({},re,P.imageTexts||{}),P.errorMessages=Ze({},ye,P.errorMessages||{}),P.imagePathAbsolute=P.imagePathAbsolute||!1,P.imageCSRFName=P.imageCSRFName||"csrfmiddlewaretoken",P.imageCSRFHeader=P.imageCSRFHeader||!1,P.autosave!=null&&P.autosave.unique_id!=null&&P.autosave.unique_id!=""&&(P.autosave.uniqueId=P.autosave.unique_id),P.overlayMode&&P.overlayMode.combine===void 0&&(P.overlayMode.combine=!0),this.options=P,this.render(),!P.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(P.initialValue),P.uploadImage){var Ee=this;this.codemirror.on("dragenter",function(De,Me){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Me.stopPropagation(),Me.preventDefault()}),this.codemirror.on("dragend",function(De,Me){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Me.stopPropagation(),Me.preventDefault()}),this.codemirror.on("dragleave",function(De,Me){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Me.stopPropagation(),Me.preventDefault()}),this.codemirror.on("dragover",function(De,Me){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Me.stopPropagation(),Me.preventDefault()}),this.codemirror.on("drop",function(De,Me){Me.stopPropagation(),Me.preventDefault(),P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Me.dataTransfer.files):Ee.uploadImages(Me.dataTransfer.files)}),this.codemirror.on("paste",function(De,Me){P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Me.clipboardData.files):Ee.uploadImages(Me.clipboardData.files)})}}function Re(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}xe.prototype.uploadImages=function(P,Q,oe){if(P.length!==0){for(var ae=[],ke=0;ke<P.length;ke++)ae.push(P[ke].name),this.uploadImage(P[ke],Q,oe);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",ae.join(", ")))}},xe.prototype.uploadImagesUsingCustomFunction=function(P,Q){if(Q.length!==0){for(var oe=[],ae=0;ae<Q.length;ae++)oe.push(Q[ae].name),this.uploadImageUsingCustomFunction(P,Q[ae]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",oe.join(", ")))}},xe.prototype.updateStatusBar=function(P,Q){if(this.gui.statusbar){var oe=this.gui.statusbar.getElementsByClassName(P);oe.length===1?this.gui.statusbar.getElementsByClassName(P)[0].textContent=Q:oe.length===0?console.log("EasyMDE: status bar item "+P+" was not found."):console.log("EasyMDE: Several status bar items named "+P+" was found.")}},xe.prototype.markdown=function(P){if(a){var Q;if(Q=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?Q.breaks=!1:Q.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var oe=this.options.renderingConfig.hljs||window.hljs;oe&&(Q.highlight=function(ke,Ce){return Ce&&oe.getLanguage(Ce)?oe.highlight(Ce,ke).value:oe.highlightAuto(ke).value})}a.setOptions(Q);var ae=a.parse(P);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(ae=this.options.renderingConfig.sanitizerFunction.call(this,ae)),ae=function(ke){for(var Ce=new DOMParser().parseFromString(ke,"text/html"),Ee=Ce.getElementsByTagName("li"),De=0;De<Ee.length;De++)for(var Me=Ee[De],We=0;We<Me.children.length;We++){var tt=Me.children[We];tt instanceof HTMLInputElement&&tt.type==="checkbox"&&(Me.style.marginLeft="-1.5em",Me.style.listStyleType="none")}return Ce.documentElement.innerHTML}(ae=function(ke){for(var Ce;(Ce=u.exec(ke))!==null;){var Ee=Ce[0];if(Ee.indexOf("target=")===-1){var De=Ee.replace(/>$/,' target="_blank">');ke=ke.replace(Ee,De)}}return ke}(ae))}},xe.prototype.render=function(P){if(P||(P=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==P){this.element=P;var Q,oe,ae=this.options,ke=this,Ce={};for(var Ee in ae.shortcuts)ae.shortcuts[Ee]!==null&&f[Ee]!==null&&function(xt){Ce[h(ae.shortcuts[xt])]=function(){var Qt=f[xt];typeof Qt=="function"?Qt(ke):typeof Qt=="string"&&window.open(Qt,"_blank")}}(Ee);if(Ce.Enter="newlineAndIndentContinueMarkdownList",Ce.Tab="tabAndIndentMarkdownList",Ce["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Ce.Esc=function(xt){xt.getOption("fullScreen")&&w(ke)},this.documentOnKeyDown=function(xt){(xt=xt||window.event).keyCode==27&&ke.codemirror.getOption("fullScreen")&&w(ke)},document.addEventListener("keydown",this.documentOnKeyDown,!1),ae.overlayMode?(o.defineMode("overlay-mode",function(xt){return o.overlayMode(o.getMode(xt,ae.spellChecker!==!1?"spell-checker":"gfm"),ae.overlayMode.mode,ae.overlayMode.combine)}),Q="overlay-mode",(oe=ae.parsingConfig).gitHubSpice=!1):((Q=ae.parsingConfig).name="gfm",Q.gitHubSpice=!1),ae.spellChecker!==!1&&(Q="spell-checker",(oe=ae.parsingConfig).name="gfm",oe.gitHubSpice=!1,typeof ae.spellChecker=="function"?ae.spellChecker({codeMirrorInstance:o}):s({codeMirrorInstance:o})),this.codemirror=o.fromTextArea(P,{mode:Q,backdrop:oe,theme:ae.theme!=null?ae.theme:"easymde",tabSize:ae.tabSize!=null?ae.tabSize:2,indentUnit:ae.tabSize!=null?ae.tabSize:2,indentWithTabs:ae.indentWithTabs!==!1,lineNumbers:ae.lineNumbers===!0,autofocus:ae.autofocus===!0,extraKeys:Ce,direction:ae.direction,lineWrapping:ae.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:ae.placeholder||P.getAttribute("placeholder")||"",styleSelectedText:ae.styleSelectedText!=null?ae.styleSelectedText:!d(),scrollbarStyle:ae.scrollbarStyle!=null?ae.scrollbarStyle:"native",configureMouse:function(xt,Qt,rn){return{addNew:!1}},inputStyle:ae.inputStyle!=null?ae.inputStyle:d()?"contenteditable":"textarea",spellcheck:ae.nativeSpellcheck==null||ae.nativeSpellcheck,autoRefresh:ae.autoRefresh!=null&&ae.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=ae.minHeight,ae.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=ae.maxHeight),ae.forceSync===!0){var De=this.codemirror;De.on("change",function(){De.save()})}this.gui={};var Me=document.createElement("div");Me.classList.add("EasyMDEContainer"),Me.setAttribute("role","application");var We=this.codemirror.getWrapperElement();We.parentNode.insertBefore(Me,We),Me.appendChild(We),ae.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),ae.status!==!1&&(this.gui.statusbar=this.createStatusbar()),ae.autosave!=null&&ae.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(ke._autosave_timeout),ke._autosave_timeout=setTimeout(function(){ke.autosave()},ke.options.autosave.submit_delay||ke.options.autosave.delay||1e3)}));var tt=this;this.codemirror.on("update",function(){ae.previewImagesInEditor&&Me.querySelectorAll(".cm-image-marker").forEach(function(xt){var Qt=xt.parentElement;if(Qt.innerText.match(/^!\[.*?\]\(.*\)/g)&&!Qt.hasAttribute("data-img-src")){var rn=Qt.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),rn&&rn.length>=2){var on=rn[1];if(ae.imagesPreviewHandler){var sn=ae.imagesPreviewHandler(rn[1]);typeof sn=="string"&&(on=sn)}if(window.EMDEimagesCache[on])Kt(Qt,window.EMDEimagesCache[on]);else{var Tn=document.createElement("img");Tn.onload=function(){window.EMDEimagesCache[on]={naturalWidth:Tn.naturalWidth,naturalHeight:Tn.naturalHeight,url:on},Kt(Qt,window.EMDEimagesCache[on])},Tn.src=on}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(ae.autofocus===!0||P.autofocus)&&this.codemirror.focus();var dt=this.codemirror;setTimeout((function(){dt.refresh()}).bind(dt),0)}function Kt(xt,Qt){var rn,on;xt.setAttribute("data-img-src",Qt.url),xt.setAttribute("style","--bg-image:url("+Qt.url+");--width:"+Qt.naturalWidth+"px;--height:"+(rn=Qt.naturalWidth,on=Qt.naturalHeight,rn<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?on+"px":on/rn*100+"%")),tt.codemirror.setSize()}},xe.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},xe.prototype.autosave=function(){if(Re()){var P=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(P.element.form!=null&&P.element.form!=null&&P.element.form.addEventListener("submit",function(){clearTimeout(P.autosaveTimeoutId),P.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+P.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var Q=P.value();Q!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,Q):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var oe=document.getElementById("autosaved");if(oe!=null&&oe!=null&&oe!=""){var ae=new Date,ke=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(ae),Ce=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;oe.innerHTML=Ce+ke}}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.clearAutosavedValue=function(){if(Re()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.openBrowseFileWindow=function(P,Q){var oe=this,ae=this.gui.toolbar.getElementsByClassName("imageInput")[0];ae.click(),ae.addEventListener("change",function ke(Ce){oe.options.imageUploadFunction?oe.uploadImagesUsingCustomFunction(oe.options.imageUploadFunction,Ce.target.files):oe.uploadImages(Ce.target.files,P,Q),ae.removeEventListener("change",ke)})},xe.prototype.uploadImage=function(P,Q,oe){var ae=this;function ke(Me){ae.updateStatusBar("upload-image",Me),setTimeout(function(){ae.updateStatusBar("upload-image",ae.options.imageTexts.sbInit)},1e4),oe&&typeof oe=="function"&&oe(Me),ae.options.errorCallback(Me)}function Ce(Me){var We=ae.options.imageTexts.sizeUnits.split(",");return Me.replace("#image_name#",P.name).replace("#image_size#",Vt(P.size,We)).replace("#image_max_size#",Vt(ae.options.imageMaxSize,We))}if(Q=Q||function(Me){he(ae,Me)},P.size>this.options.imageMaxSize)ke(Ce(this.options.errorMessages.fileTooLarge));else{var Ee=new FormData;Ee.append("image",P),ae.options.imageCSRFToken&&!ae.options.imageCSRFHeader&&Ee.append(ae.options.imageCSRFName,ae.options.imageCSRFToken);var De=new XMLHttpRequest;De.upload.onprogress=function(Me){if(Me.lengthComputable){var We=""+Math.round(100*Me.loaded/Me.total);ae.updateStatusBar("upload-image",ae.options.imageTexts.sbProgress.replace("#file_name#",P.name).replace("#progress#",We))}},De.open("POST",this.options.imageUploadEndpoint),ae.options.imageCSRFToken&&ae.options.imageCSRFHeader&&De.setRequestHeader(ae.options.imageCSRFName,ae.options.imageCSRFToken),De.onload=function(){try{var Me=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void ke(Ce(ae.options.errorMessages.importError))}this.status===200&&Me&&!Me.error&&Me.data&&Me.data.filePath?Q((ae.options.imagePathAbsolute?"":window.location.origin+"/")+Me.data.filePath):Me.error&&Me.error in ae.options.errorMessages?ke(Ce(ae.options.errorMessages[Me.error])):Me.error?ke(Ce(Me.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),ke(Ce(ae.options.errorMessages.importError)))},De.onerror=function(Me){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+Me.target.status+" ("+Me.target.statusText+")"),ke(ae.options.errorMessages.importError)},De.send(Ee)}},xe.prototype.uploadImageUsingCustomFunction=function(P,Q){var oe=this;P.apply(this,[Q,function(ae){he(oe,ae)},function(ae){var ke=function(Ce){var Ee=oe.options.imageTexts.sizeUnits.split(",");return Ce.replace("#image_name#",Q.name).replace("#image_size#",Vt(Q.size,Ee)).replace("#image_max_size#",Vt(oe.options.imageMaxSize,Ee))}(ae);oe.updateStatusBar("upload-image",ke),setTimeout(function(){oe.updateStatusBar("upload-image",oe.options.imageTexts.sbInit)},1e4),oe.options.errorCallback(ke)}])},xe.prototype.setPreviewMaxHeight=function(){var P=this.codemirror.getWrapperElement(),Q=P.nextSibling,oe=parseInt(window.getComputedStyle(P).paddingTop),ae=parseInt(window.getComputedStyle(P).borderTopWidth),ke=(parseInt(this.options.maxHeight)+2*oe+2*ae).toString()+"px";Q.style.height=ke},xe.prototype.createSideBySide=function(){var P=this.codemirror,Q=P.getWrapperElement(),oe=Q.nextSibling;if(!oe||!oe.classList.contains("editor-preview-side")){if((oe=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var ae=0;ae<this.options.previewClass.length;ae++)oe.classList.add(this.options.previewClass[ae]);else typeof this.options.previewClass=="string"&&oe.classList.add(this.options.previewClass);Q.parentNode.insertBefore(oe,Q.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return oe;var ke=!1,Ce=!1;return P.on("scroll",function(Ee){if(ke)ke=!1;else{Ce=!0;var De=Ee.getScrollInfo().height-Ee.getScrollInfo().clientHeight,Me=parseFloat(Ee.getScrollInfo().top)/De,We=(oe.scrollHeight-oe.clientHeight)*Me;oe.scrollTop=We}}),oe.onscroll=function(){if(Ce)Ce=!1;else{ke=!0;var Ee=oe.scrollHeight-oe.clientHeight,De=parseFloat(oe.scrollTop)/Ee,Me=(P.getScrollInfo().height-P.getScrollInfo().clientHeight)*De;P.scrollTo(0,Me)}},oe},xe.prototype.createToolbar=function(P){if((P=P||this.options.toolbar)&&P.length!==0){var Q;for(Q=0;Q<P.length;Q++)se[P[Q]]!=null&&(P[Q]=se[P[Q]]);var oe=document.createElement("div");oe.className="editor-toolbar",oe.setAttribute("role","toolbar");var ae=this,ke={};for(ae.toolbar=P,Q=0;Q<P.length;Q++)if((P[Q].name!="guide"||ae.options.toolbarGuideIcon!==!1)&&!(ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Q].name)!=-1||(P[Q].name=="fullscreen"||P[Q].name=="side-by-side")&&d())){if(P[Q]==="|"){for(var Ce=!1,Ee=Q+1;Ee<P.length;Ee++)P[Ee]==="|"||ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Ee].name)!=-1||(Ce=!0);if(!Ce)continue}(function(We){var tt;if(tt=We==="|"?b():We.children?p(We,ae.options.toolbarTips,ae.options.shortcuts,ae):m(We,!0,ae.options.toolbarTips,ae.options.shortcuts,"button",ae),ke[We.name||We]=tt,oe.appendChild(tt),We.name==="upload-image"){var dt=document.createElement("input");dt.className="imageInput",dt.type="file",dt.multiple=!0,dt.name="image",dt.accept=ae.options.imageAccept,dt.style.display="none",dt.style.opacity=0,oe.appendChild(dt)}})(P[Q])}ae.toolbar_div=oe,ae.toolbarElements=ke;var De=this.codemirror;De.on("cursorActivity",function(){var We=y(De);for(var tt in ke)(function(dt){var Kt=ke[dt];We[dt]?Kt.classList.add("active"):dt!="fullscreen"&&dt!="side-by-side"&&Kt.classList.remove("active")})(tt)});var Me=De.getWrapperElement();return Me.parentNode.insertBefore(oe,Me),oe}},xe.prototype.createStatusbar=function(P){P=P||this.options.status;var Q=this.options,oe=this.codemirror;if(P&&P.length!==0){var ae,ke,Ce,Ee,De=[];for(ae=0;ae<P.length;ae++)if(ke=void 0,Ce=void 0,Ee=void 0,typeof P[ae]=="object")De.push({className:P[ae].className,defaultValue:P[ae].defaultValue,onUpdate:P[ae].onUpdate,onActivity:P[ae].onActivity});else{var Me=P[ae];Me==="words"?(Ee=function(xt){xt.innerHTML=pe(oe.getValue())},ke=function(xt){xt.innerHTML=pe(oe.getValue())}):Me==="lines"?(Ee=function(xt){xt.innerHTML=oe.lineCount()},ke=function(xt){xt.innerHTML=oe.lineCount()}):Me==="cursor"?(Ee=function(xt){xt.innerHTML="1:1"},Ce=function(xt){var Qt=oe.getCursor(),rn=Qt.line+1,on=Qt.ch+1;xt.innerHTML=rn+":"+on}):Me==="autosave"?Ee=function(xt){Q.autosave!=null&&Q.autosave.enabled===!0&&xt.setAttribute("id","autosaved")}:Me==="upload-image"&&(Ee=function(xt){xt.innerHTML=Q.imageTexts.sbInit}),De.push({className:Me,defaultValue:Ee,onUpdate:ke,onActivity:Ce})}var We=document.createElement("div");for(We.className="editor-statusbar",ae=0;ae<De.length;ae++){var tt=De[ae],dt=document.createElement("span");dt.className=tt.className,typeof tt.defaultValue=="function"&&tt.defaultValue(dt),typeof tt.onUpdate=="function"&&this.codemirror.on("update",function(xt,Qt){return function(){Qt.onUpdate(xt)}}(dt,tt)),typeof tt.onActivity=="function"&&this.codemirror.on("cursorActivity",function(xt,Qt){return function(){Qt.onActivity(xt)}}(dt,tt)),We.appendChild(dt)}var Kt=this.codemirror.getWrapperElement();return Kt.parentNode.insertBefore(We,Kt.nextSibling),We}},xe.prototype.value=function(P){var Q=this.codemirror;if(P===void 0)return Q.getValue();if(Q.getDoc().setValue(P),this.isPreviewActive()){var oe=Q.getWrapperElement().lastChild,ae=this.options.previewRender(P,oe);ae!==null&&(oe.innerHTML=ae)}return this},xe.toggleBold=E,xe.toggleItalic=A,xe.toggleStrikethrough=T,xe.toggleBlockquote=k,xe.toggleHeadingSmaller=R,xe.toggleHeadingBigger=M,xe.toggleHeading1=B,xe.toggleHeading2=K,xe.toggleHeading3=L,xe.toggleHeading4=$,xe.toggleHeading5=I,xe.toggleHeading6=U,xe.toggleCodeBlock=D,xe.toggleUnorderedList=q,xe.toggleOrderedList=Y,xe.cleanBlock=X,xe.drawLink=te,xe.drawImage=le,xe.drawUploadedImage=z,xe.drawTable=de,xe.drawHorizontalRule=ze,xe.undo=He,xe.redo=je,xe.togglePreview=Ie,xe.toggleSideBySide=we,xe.toggleFullScreen=w,xe.prototype.toggleBold=function(){E(this)},xe.prototype.toggleItalic=function(){A(this)},xe.prototype.toggleStrikethrough=function(){T(this)},xe.prototype.toggleBlockquote=function(){k(this)},xe.prototype.toggleHeadingSmaller=function(){R(this)},xe.prototype.toggleHeadingBigger=function(){M(this)},xe.prototype.toggleHeading1=function(){B(this)},xe.prototype.toggleHeading2=function(){K(this)},xe.prototype.toggleHeading3=function(){L(this)},xe.prototype.toggleHeading4=function(){$(this)},xe.prototype.toggleHeading5=function(){I(this)},xe.prototype.toggleHeading6=function(){U(this)},xe.prototype.toggleCodeBlock=function(){D(this)},xe.prototype.toggleUnorderedList=function(){q(this)},xe.prototype.toggleOrderedList=function(){Y(this)},xe.prototype.cleanBlock=function(){X(this)},xe.prototype.drawLink=function(){te(this)},xe.prototype.drawImage=function(){le(this)},xe.prototype.drawUploadedImage=function(){z(this)},xe.prototype.drawTable=function(){de(this)},xe.prototype.drawHorizontalRule=function(){ze(this)},xe.prototype.undo=function(){He(this)},xe.prototype.redo=function(){je(this)},xe.prototype.togglePreview=function(){Ie(this)},xe.prototype.toggleSideBySide=function(){we(this)},xe.prototype.toggleFullScreen=function(){w(this)},xe.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},xe.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},xe.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},xe.prototype.getState=function(){return y(this.codemirror)},xe.prototype.toTextArea=function(){var P=this.codemirror,Q=P.getWrapperElement(),oe=Q.parentNode;oe&&(this.gui.toolbar&&oe.removeChild(this.gui.toolbar),this.gui.statusbar&&oe.removeChild(this.gui.statusbar),this.gui.sideBySide&&oe.removeChild(this.gui.sideBySide)),oe.parentNode.insertBefore(Q,oe),oe.remove(),P.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},r.exports=xe},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})}(W4)),W4.exports}var LTt=DTt();const RTt=oa(LTt);(()=>{var e=o=>o==null?!1:typeof o=="boolean"?o:o.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var t="min-label",n="max-label",r="#1E293B",i=()=>{let o=null,s=null,a=null,l,u=!1,f=r,c="",d,h=null,p=null,m=null,b=[],y=()=>{var M;let B=(M=o==null?void 0:o.shadowRoot)==null?void 0:M.querySelector(".range-slider-box");h=document.createElement("div"),h.classList.add("labels-row"),B.prepend(h)},v=M=>{let B=document.createElement("label");return B.className=M,B.setAttribute("for","range-slider"),B},w=()=>{p=v(t),p.textContent=R(a==null?void 0:a.getTextMin(),c),m=v(n),m.textContent=R(a==null?void 0:a.getTextMax(),c),s==null||s.before(p),s==null||s.after(m);let M=a==null?void 0:a.getValues();if(M)for(let B=0;B<M.length;B++){let K=v(`value${B+1}-label generated-label`);K.textContent=R(M[B],c),b.push(K),h==null||h.append(K)}},E=()=>{for(let M of b)!M||M.remove();p==null||p.remove(),m==null||m.remove(),h==null||h.remove(),b=[]},A=M=>{u=M,u?(y(),w()):E()},T=M=>{f=M;for(let B of b)!B||(B.style.color=f??r);p&&(p.style.color=f??r),m&&(m.style.color=f??r)},D=M=>{c=M,l&&l()},k=()=>{!a||!h||h.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},R=(M,B)=>{let K=`${(M??"").toString()}${B}`;return d&&typeof d=="function"?d(M):K};return{get name(){return"Generated Labels"},init:(M,B,K,L)=>{var $,I,U;o=M,a=L,s=($=M.shadowRoot)==null?void 0:$.getElementById("range-slider"),l=B,f=(I=o.getAttribute("generate-labels-text-color"))!=null?I:r,c=(U=o.getAttribute("generate-labels-units"))!=null?U:"",A(e(o.getAttribute("generate-labels"))),k(),T(f)},update:M=>{if(!(!u||!M.values)){k();for(let B=0;B<M.values.length;B++){let K=M.values[B],L=b[B];if(K===void 0&&L){L.remove(),b[B]=void 0;continue}if(K!==void 0&&!L){let $=v(`value${B+1}-label generated-label`);if($.textContent=R(K,c),b[B]=$,M.values.length<=0)h==null||h.append($);else if(B===0)h==null||h.append($);else{let I=b[B-1];I==null||I.after($)}continue}!L||(L.textContent=R(K,c))}p&&(p.textContent=R(M.textMin,c)),m&&(m.textContent=R(M.textMax,c)),T(f)}},onAttrChange:(M,B)=>{M==="generate-labels"&&A(e(B)),M==="generate-labels-text-color"&&T(B),M==="generate-labels-units"&&D(B)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return u??!1},set:M=>{A(e(M))}}},{name:"textColor",attributes:{get(){return f??""},set:M=>{T(M)}}},{name:"generateLabelsTextColor",attributes:{get(){return f??""},set:M=>{T(M)}}},{name:"units",attributes:{get(){return c??""},set:M=>{D(M)}}},{name:"generateLabelsUnits",attributes:{get(){return c??""},set:M=>{D(M)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:M=>{d=M,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:E}};window.tcRangeSliderPlugins.push(i)})();function FTt(e,t){Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])})}class MTt extends HCe{register(){super.register()}unregister(){super.unregister()}build(){const t=this.schema.properties,n=this.options,r=this.schema.description,i=this.theme,o=this.defaults.startVals[this.key];n.compact||(this.header=this.label=i.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=i.getFormInputDescription(this.translateProperty(r))),n.infoText&&(this.infoButton=i.getInfoButton(this.translateProperty(n.infoText)));const s=document.createElement("tc-range-slider"),a=Object.keys(t).find(f=>f.includes("min")),l=Object.keys(t).find(f=>f.includes("max")),u={min:t[a].minimum,max:t[l].maximum,value1:(o==null?void 0:o[a])||t[a].default,value2:(o==null?void 0:o[l])||t[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};FTt(s,u),this.input=s,this.input.id=this.formname,this.control=i.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",f=>{f.preventDefault(),f.stopPropagation(),this.value={[a]:f.detail.value1,[l]:f.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const Kk=e=>["feature","features"].some(t=>(e==null?void 0:e.format)===t),Jk=e=>["polygon","polygons"].includes(e==null?void 0:e.format),Qk=e=>["point","points"].includes(e==null?void 0:e.format),eT=e=>["bounding-boxes","bounding-box"].includes(e==null?void 0:e.format),tT=e=>["lines","line"].includes(e==null?void 0:e.format),C8=e=>(e==null?void 0:e.type)==="wkt",k8=e=>(e==null?void 0:e.type)==="geojson",Ob=e=>["bounding-boxes","polygons","features","points","lines"].includes(e==null?void 0:e.format),OTt=e=>Kk(e)||Jk(e)||eT(e)||Qk(e)||tT(e);function _Ee(e,t){Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])})}const $Tt=(e,t)=>{if(!e||!t)return!1;switch(t){case"string":return typeof e=="string";case"number":return!isNaN(e);case"boolean":return typeof e=="boolean";case"array":return Array.isArray(e);case"object":return typeof e=="object"&&!!Object.keys(e).length}return!1};class Fi extends HCe{register(){super.register()}unregister(){super.unregister()}build(){var c,d,h,p;const t=this.options,n=this.schema.description,r=this.theme;t.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),t.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(t.infoText)));const i=document.createElement("eox-drawtools");let o;switch(!0){case Jk(this.schema):o="Polygon";break;case eT(this.schema):o="Box";break;case Qk(this.schema):o="Point";break;case tT(this.schema):o="LineString";break;default:o="Box";break}let s;switch(!0){case C8(this.schema):s="wkt";break;case k8(this.schema):s="geojson";break;default:s="feature";break}const a={type:o,format:s};if((d=(c=this.schema)==null?void 0:c.options)!=null&&d.projection&&(a.projection=this.schema.options.projection),Kk(this.schema)&&(a["layer-id"]=this.schema.options.layerId),Ob(this.schema)&&(a["multiple-features"]=!0,a["show-list"]=!0),"for"in(this.schema.options??{}))a.for=this.options.for;else{const m=document.createElement("eox-map");m.projection="EPSG:4326";const b="map-"+this.formname.replace(/[^\w\s]/gi,"");m.layers=[{type:"Tile",source:{type:"OSM"}}],_Ee(m,{id:b,style:"width: 100%; height: 300px;"}),this.container.appendChild(m),i.for=m}_Ee(i,a),t.autoStartSelection!==!1&&i.updateComplete.then(()=>{i.startDrawing()}),this.input=i,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0);const u=(p=(h=this.schema)==null?void 0:h.options)==null?void 0:p.featureProperty,f=(m,b)=>m.length?!Ob(this.schema)&&m.length===1?b(m[0]):m.map(b):b(m);this.input.addEventListener("drawupdate",m=>{var b;switch(m.preventDefault(),m.stopPropagation(),!0){case!m.detail:{this.value=null;break}case C8(this.schema):{this.value=m.detail;break}case k8(this.schema):{const y=m.detail;if(Ob(this.schema)){this.value=y;break}this.value=((b=y.features)==null?void 0:b[0])??null;break}case tT(this.schema):{this.value=f(m.detail,y=>y.getGeometry().getCoordinates());break}case Kk(this.schema):{if(!m.detail.length){this.value=null;break}const y=v=>u?v.get(u)??v:v;this.value=f(m.detail,y);break}case eT(this.schema):{if(!m.detail.length){this.value=null;break}const y=v=>v.getGeometry().getExtent();this.value=f(m.detail,y);break}case Jk(this.schema):{if(!m.detail.length){this.value=null;break}this.value=f(m.detail,y=>y);break}case Qk(this.schema):{if(!m.detail.length){this.value=null;break}this.value=f(m.detail,y=>{var v;return(v=y.getGeometry())==null?void 0:v.getCoordinates()});break}}this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&(this.input.parentNode.removeChild(this.input),this.input.discardDrawing(),this.input.remove()),super.destroy()}}function ITt(e){return function(t,n,r){let i=[];return t.properties&&Object.keys(t.properties).forEach(o=>{const s=t.properties[o];if(!(OTt(s)&&(s.format==="feature"||e.some(u=>u.format===s.format&&u.type===s.type))))return;const l=UTt(o,n[o],r);if(l.length){i.push(...l);return}switch(!0){case C8(s):{i.push(...qTt(o,n[o],r));break}case k8(s):{i.push(...HTt(o,n[o],r,s));break}case Kk(s):{i.push(...kw({key:o,subValue:n[o],subSchema:s,path:r,validationFn:NTt}));break}case eT(s):{i.push(...kw({key:o,subValue:n[o],subSchema:s,path:r,validationFn:PTt}));break}case Jk(s):{i.push(...kw({key:o,subValue:n[o],subSchema:s,path:r,validationFn:BTt}));break}case Qk(s):{i.push(...kw({key:o,subValue:n[o],subSchema:s,path:r,validationFn:zTt}));break}case tT(s):{i.push(...kw({key:o,subValue:n[o],subSchema:s,path:r,validationFn:jTt}));break}}}),i}}function kw({key:e,subValue:t,path:n,subSchema:r,validationFn:i}){if(Ob(r)){if(Array.isArray(t)){if(!t.length)return[{path:`${n}.${e}`,message:"Value is expected to have at least one value",property:"format"}]}else return[{path:`${n}.${e}`,message:`Value is expected to be an array but got typeof ${typeof t}`,property:"format"}];return t==null?void 0:t.flatMap((o,s)=>i(`${e}.${s}`,o,n,r))}else return i(e,t,n,r)}function PTt(e,t,n){const r=[];return t.length!==4?[{path:`${n}.${e}`,message:`Value is expected to have 4 items but got ${t.length}`,property:"format"}]:(t.forEach((i,o)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${o}`,message:`extent is expected to be of type number but got ${i}`,property:"format"})}),r)}function NTt(e,t,n,r){var o;let i;return Ob(r)?i=(o=r==null?void 0:r.items)==null?void 0:o.type:i=r.type,i?$Tt(t,i)?[]:[{path:`${n}.${e}`,message:`Value is expected to be a valid ${i}`,property:"format"}]:[]}function BTt(e,t,n){return typeof t!="object"||!Object.keys(t).length?[{path:`${n}.${e}`,message:"Value was expected to be a feature object ",property:"format"}]:[]}function zTt(e,t,n){const r=[];return t.length!==2?[{path:`${n}.${e}`,message:`Value is expected to have 2 items but got ${t.length}`,property:"format"}]:(t.forEach((i,o)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${o}`,message:`coordinates is expected to be of type number but got ${i}`,property:"format"})}),r)}function jTt(e,t,n){const r=[];return t.length<2?[{path:`${n}.${e}`,message:`Value is expected to have at least 2 points but got ${t.length}`,property:"format"}]:(t.forEach((i,o)=>{i.forEach((s,a)=>{typeof s!="number"&&r.push({path:`${n}.${e}.${o}.${a}`,message:`coordinates is expected to be of type number but got ${s}`,property:"format"})})}),r)}function UTt(e,t,n){return t?[]:[{path:`${n}.${e}`,message:`invalid value ${JSON.stringify(t)}`,property:"type"}]}function qTt(e,t,n){return typeof t!="string"?[{path:`${n}.${e}`,message:"Value is expected to be a valid wkt string",property:"type"}]:t==="GEOMETRYCOLLECTION EMPTY"?[{path:`${n}.${e}`,message:"Should have at least 1 Geometry",property:"type"}]:[]}function HTt(e,t,n,r){var i;if(typeof t!="object"||!Object.keys(t).length)return[{path:`${n}.${e}`,message:"Value is expected to be a valid geojson object",property:"type"}];if(Ob(r)){if(t.type!=="FeatureCollection")return[{path:`${n}.${e}`,message:"Value is expected to be a valid FeaturesCollection geojson",property:"type"}];if(!((i=t==null?void 0:t.features)!=null&&i.length))return[{path:`${n}.${e}`,message:"Value is expected to have at least one feature",property:"type"}]}else if(!(t!=null&&t.geometry.type))return[{path:`${n}.${e}`,message:"Value is expected to have a valid geometry",property:"type"}];return[]}const GTt=[{type:"object",format:"minmax",func:MTt},{type:"array",format:"bounding-boxes",func:Fi},{type:"wkt",format:"bounding-boxes",func:Fi},{type:"geojson",format:"bounding-boxes",func:Fi},{type:"array",format:"bounding-box",func:Fi},{type:"wkt",format:"bounding-box",func:Fi},{type:"geojson",format:"bounding-box",func:Fi},{type:"array",format:"polygons",func:Fi},{type:"wkt",format:"polygons",func:Fi},{type:"geojson",format:"polygons",func:Fi},{type:"object",format:"polygon",func:Fi},{type:"wkt",format:"polygon",func:Fi},{type:"geojson",format:"polygon",func:Fi},{type:"array",format:"points",func:Fi},{type:"wkt",format:"points",func:Fi},{type:"geojson",format:"points",func:Fi},{type:"array",format:"point",func:Fi},{type:"wkt",format:"point",func:Fi},{type:"geojson",format:"point",func:Fi},{format:"feature",func:Fi},{type:"array",format:"features",func:Fi},{type:"wkt",format:"features",func:Fi},{type:"geojson",format:"features",func:Fi},{type:"array",format:"line",func:Fi},{type:"wkt",format:"line",func:Fi},{type:"geojson",format:"line",func:Fi},{type:"array",format:"lines",func:Fi},{type:"wkt",format:"lines",func:Fi},{type:"geojson",format:"lines",func:Fi}],VTt=(e,t)=>{const n=[...GTt,...t];Mw.defaults.custom_validators.push(ITt(n)),n.map(({type:r,format:i,func:o})=>{Mw.defaults.startVals=e,Mw.defaults.editors[i]=o,Mw.defaults.resolvers.unshift(s=>{if(s.type===r&&s.format===i||s.format==="feature")return i})})};window.SimpleMDE=RTt;const EEe=e=>{VTt(e.value||{},e.customEditorInterfaces||[]);const t=e.renderRoot.querySelector("form");let r=new Mw(t,{schema:e.schema,...e.value?{startval:e.value}:{},theme:"html",ajax:!0,...e.options});return r.on("ready",()=>{if(Object.values(r.editors).some(i=>i instanceof tUe)){const i=document.createElement("style");i.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,e.renderRoot.insertBefore(i,e.renderRoot.firstChild)}}),r};async function SEe(e){if(e&&typeof e!="object")try{const t=await fetch(e);if(t.ok)return await t.json();console.error("Failed to fetch schema from URL: ",t.status)}catch(t){console.error("Error fetching schema: ",t)}return e}const WTt=`
  * {
    font-family: Roboto, sans-serif;
  }
`,YTt=`
  :host, :root {
    --background-color: var(--eox-background-color, transparent);
    background-color: var(--background-color, transparent);
  }
  form {
    background-color: var(--background-color, transparent);
  }
  .CodeMirror {
    background-color: var(--background-color, transparent);
  }
  select {
    background-color: var(--background-color);
  }
  [data-schemaid=root] > .je-header {
    display: none;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
  .je-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #0002;
    padding: 0.5rem 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
  }
  .je-indented-panel span {
    display: flex;
    align-items: center;
  }
  .je-header span:first-of-type, form[data-theme="html"] .je-form-input-label {
    font-size: 14px;
    font-weight: 600;
  }
  form[data-theme="html"] .je-indented-panel {
    border: none !important;
    margin: 0.4rem;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    text-indent: 0px;
    margin: 0px;
    display: flex;
  }
  .json-editor-btntype-toggle::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
   .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
    margin: 0px 0.5rem !important;
  }
  .json-editor-btntype-add:hover,
   .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }
  .je-indented-panel .row {
    margin-top: 10px;
  }
  .je-object__controls {
    margin: 0 !important;
  }
  .EasyMDEContainer span {
    display: unset;
  }
  .editor-toolbar button {
    box-shadow: none;
    color: #2c3e50 !important;
  }
  .editor-toolbar button:hover:not([disabled]):not(.icon),
  .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
  }
  .editor-toolbar button i {
    font-size: 17px;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }
`;var s2={exports:{}};s2.exports;var AEe;function XTt(){return AEe||(AEe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",b="[object Number]",y="[object Null]",v="[object Object]",w="[object Promise]",E="[object Proxy]",A="[object RegExp]",T="[object Set]",D="[object String]",k="[object Symbol]",R="[object Undefined]",M="[object WeakMap]",B="[object ArrayBuffer]",K="[object DataView]",L="[object Float32Array]",$="[object Float64Array]",I="[object Int8Array]",U="[object Int16Array]",q="[object Int32Array]",Y="[object Uint8Array]",X="[object Uint8ClampedArray]",te="[object Uint16Array]",le="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,de={};de[L]=de[$]=de[I]=de[U]=de[q]=de[Y]=de[X]=de[te]=de[le]=!0,de[a]=de[l]=de[B]=de[f]=de[K]=de[c]=de[d]=de[h]=de[m]=de[b]=de[v]=de[A]=de[T]=de[D]=de[M]=!1;var ze=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,He=typeof self=="object"&&self&&self.Object===Object&&self,je=ze||He||Function("return this")(),we=t&&!t.nodeType&&t,Ie=we&&!0&&e&&!e.nodeType&&e,qe=Ie&&Ie.exports===we,Pe=qe&&ze.process,At=function(){try{return Pe&&Pe.binding&&Pe.binding("util")}catch{}}(),ht=At&&At.isTypedArray;function nn(Z,ge){for(var Be=-1,yt=Z==null?0:Z.length,pn=0,It=[];++Be<yt;){var In=Z[Be];ge(In,Be,Z)&&(It[pn++]=In)}return It}function Vt(Z,ge){for(var Be=-1,yt=ge.length,pn=Z.length;++Be<yt;)Z[pn+Be]=ge[Be];return Z}function On(Z,ge){for(var Be=-1,yt=Z==null?0:Z.length;++Be<yt;)if(ge(Z[Be],Be,Z))return!0;return!1}function Ze(Z,ge){for(var Be=-1,yt=Array(Z);++Be<Z;)yt[Be]=ge(Be);return yt}function pe(Z){return function(ge){return Z(ge)}}function ie(Z,ge){return Z.has(ge)}function se(Z,ge){return Z==null?void 0:Z[ge]}function ve(Z){var ge=-1,Be=Array(Z.size);return Z.forEach(function(yt,pn){Be[++ge]=[pn,yt]}),Be}function F(Z,ge){return function(Be){return Z(ge(Be))}}function H(Z){var ge=-1,Be=Array(Z.size);return Z.forEach(function(yt){Be[++ge]=yt}),Be}var J=Array.prototype,re=Function.prototype,ye=Object.prototype,xe=je["__core-js_shared__"],Re=re.toString,P=ye.hasOwnProperty,Q=function(){var Z=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),oe=ye.toString,ae=RegExp("^"+Re.call(P).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=qe?je.Buffer:void 0,Ce=je.Symbol,Ee=je.Uint8Array,De=ye.propertyIsEnumerable,Me=J.splice,We=Ce?Ce.toStringTag:void 0,tt=Object.getOwnPropertySymbols,dt=ke?ke.isBuffer:void 0,Kt=F(Object.keys,Object),xt=po(je,"DataView"),Qt=po(je,"Map"),rn=po(je,"Promise"),on=po(je,"Set"),sn=po(je,"WeakMap"),Tn=po(Object,"create"),Er=Ho(xt),Ki=Ho(Qt),ho=Ho(rn),Hi=Ho(on),Ns=Ho(sn),qn=Ce?Ce.prototype:void 0,Or=qn?qn.valueOf:void 0;function Lr(Z){var ge=-1,Be=Z==null?0:Z.length;for(this.clear();++ge<Be;){var yt=Z[ge];this.set(yt[0],yt[1])}}function mn(){this.__data__=Tn?Tn(null):{},this.size=0}function Kr(Z){var ge=this.has(Z)&&delete this.__data__[Z];return this.size-=ge?1:0,ge}function or(Z){var ge=this.__data__;if(Tn){var Be=ge[Z];return Be===r?void 0:Be}return P.call(ge,Z)?ge[Z]:void 0}function Ni(Z){var ge=this.__data__;return Tn?ge[Z]!==void 0:P.call(ge,Z)}function tr(Z,ge){var Be=this.__data__;return this.size+=this.has(Z)?0:1,Be[Z]=Tn&&ge===void 0?r:ge,this}Lr.prototype.clear=mn,Lr.prototype.delete=Kr,Lr.prototype.get=or,Lr.prototype.has=Ni,Lr.prototype.set=tr;function $r(Z){var ge=-1,Be=Z==null?0:Z.length;for(this.clear();++ge<Be;){var yt=Z[ge];this.set(yt[0],yt[1])}}function ns(){this.__data__=[],this.size=0}function me(Z){var ge=this.__data__,Be=Ar(ge,Z);if(Be<0)return!1;var yt=ge.length-1;return Be==yt?ge.pop():Me.call(ge,Be,1),--this.size,!0}function Le(Z){var ge=this.__data__,Be=Ar(ge,Z);return Be<0?void 0:ge[Be][1]}function it(Z){return Ar(this.__data__,Z)>-1}function Ke(Z,ge){var Be=this.__data__,yt=Ar(Be,Z);return yt<0?(++this.size,Be.push([Z,ge])):Be[yt][1]=ge,this}$r.prototype.clear=ns,$r.prototype.delete=me,$r.prototype.get=Le,$r.prototype.has=it,$r.prototype.set=Ke;function Et(Z){var ge=-1,Be=Z==null?0:Z.length;for(this.clear();++ge<Be;){var yt=Z[ge];this.set(yt[0],yt[1])}}function an(){this.size=0,this.__data__={hash:new Lr,map:new(Qt||$r),string:new Lr}}function en(Z){var ge=zs(this,Z).delete(Z);return this.size-=ge?1:0,ge}function wt(Z){return zs(this,Z).get(Z)}function et(Z){return zs(this,Z).has(Z)}function hn(Z,ge){var Be=zs(this,Z),yt=Be.size;return Be.set(Z,ge),this.size+=Be.size==yt?0:1,this}Et.prototype.clear=an,Et.prototype.delete=en,Et.prototype.get=wt,Et.prototype.has=et,Et.prototype.set=hn;function An(Z){var ge=-1,Be=Z==null?0:Z.length;for(this.__data__=new Et;++ge<Be;)this.add(Z[ge])}function zt(Z){return this.__data__.set(Z,r),this}function jt(Z){return this.__data__.has(Z)}An.prototype.add=An.prototype.push=zt,An.prototype.has=jt;function Sr(Z){var ge=this.__data__=new $r(Z);this.size=ge.size}function ci(){this.__data__=new $r,this.size=0}function Zt(Z){var ge=this.__data__,Be=ge.delete(Z);return this.size=ge.size,Be}function Xe(Z){return this.__data__.get(Z)}function pt(Z){return this.__data__.has(Z)}function Xn(Z,ge){var Be=this.__data__;if(Be instanceof $r){var yt=Be.__data__;if(!Qt||yt.length<n-1)return yt.push([Z,ge]),this.size=++Be.size,this;Be=this.__data__=new Et(yt)}return Be.set(Z,ge),this.size=Be.size,this}Sr.prototype.clear=ci,Sr.prototype.delete=Zt,Sr.prototype.get=Xe,Sr.prototype.has=pt,Sr.prototype.set=Xn;function ni(Z,ge){var Be=Vi(Z),yt=!Be&&Gi(Z),pn=!Be&&!yt&&go(Z),It=!Be&&!yt&&!pn&&Wi(Z),In=Be||yt||pn||It,dr=In?Ze(Z.length,String):[],kr=dr.length;for(var Ln in Z)P.call(Z,Ln)&&!(In&&(Ln=="length"||pn&&(Ln=="offset"||Ln=="parent")||It&&(Ln=="buffer"||Ln=="byteLength"||Ln=="byteOffset")||Qi(Ln,kr)))&&dr.push(Ln);return dr}function Ar(Z,ge){for(var Be=Z.length;Be--;)if(ll(Z[Be][0],ge))return Be;return-1}function Rr(Z,ge,Be){var yt=ge(Z);return Vi(Z)?yt:Vt(yt,Be(Z))}function nr(Z){return Z==null?Z===void 0?R:y:We&&We in Object(Z)?sl(Z):fa(Z)}function qt(Z){return ss(Z)&&nr(Z)==a}function bi(Z,ge,Be,yt,pn){return Z===ge?!0:Z==null||ge==null||!ss(Z)&&!ss(ge)?Z!==Z&&ge!==ge:Ji(Z,ge,Be,yt,bi,pn)}function Ji(Z,ge,Be,yt,pn,It){var In=Vi(Z),dr=Vi(ge),kr=In?l:Cr(Z),Ln=dr?l:Cr(ge);kr=kr==a?v:kr,Ln=Ln==a?v:Ln;var Ai=kr==v,Jr=Ln==v,sr=kr==Ln;if(sr&&go(Z)){if(!go(ge))return!1;In=!0,Ai=!1}if(sr&&!Ai)return It||(It=new Sr),In||Wi(Z)?rs(Z,ge,Be,yt,pn,It):Bs(Z,ge,kr,Be,yt,pn,It);if(!(Be&i)){var di=Ai&&P.call(Z,"__wrapped__"),wo=Jr&&P.call(ge,"__wrapped__");if(di||wo){var Vo=di?Z.value():Z,Bi=wo?ge.value():ge;return It||(It=new Sr),pn(Vo,Bi,Be,yt,It)}}return sr?(It||(It=new Sr),xo(Z,ge,Be,yt,pn,It)):!1}function vi(Z){if(!Oa(Z)||Oo(Z))return!1;var ge=Go(Z)?ae:z;return ge.test(Ho(Z))}function Uo(Z){return ss(Z)&&fi(Z.length)&&!!de[nr(Z)]}function xs(Z){if(!qo(Z))return Kt(Z);var ge=[];for(var Be in Object(Z))P.call(Z,Be)&&Be!="constructor"&&ge.push(Be);return ge}function rs(Z,ge,Be,yt,pn,It){var In=Be&i,dr=Z.length,kr=ge.length;if(dr!=kr&&!(In&&kr>dr))return!1;var Ln=It.get(Z);if(Ln&&It.get(ge))return Ln==ge;var Ai=-1,Jr=!0,sr=Be&o?new An:void 0;for(It.set(Z,ge),It.set(ge,Z);++Ai<dr;){var di=Z[Ai],wo=ge[Ai];if(yt)var Vo=In?yt(wo,di,Ai,ge,Z,It):yt(di,wo,Ai,Z,ge,It);if(Vo!==void 0){if(Vo)continue;Jr=!1;break}if(sr){if(!On(ge,function(Bi,zi){if(!ie(sr,zi)&&(di===Bi||pn(di,Bi,Be,yt,It)))return sr.push(zi)})){Jr=!1;break}}else if(!(di===wo||pn(di,wo,Be,yt,It))){Jr=!1;break}}return It.delete(Z),It.delete(ge),Jr}function Bs(Z,ge,Be,yt,pn,It,In){switch(Be){case K:if(Z.byteLength!=ge.byteLength||Z.byteOffset!=ge.byteOffset)return!1;Z=Z.buffer,ge=ge.buffer;case B:return!(Z.byteLength!=ge.byteLength||!It(new Ee(Z),new Ee(ge)));case f:case c:case b:return ll(+Z,+ge);case d:return Z.name==ge.name&&Z.message==ge.message;case A:case D:return Z==ge+"";case m:var dr=ve;case T:var kr=yt&i;if(dr||(dr=H),Z.size!=ge.size&&!kr)return!1;var Ln=In.get(Z);if(Ln)return Ln==ge;yt|=o,In.set(Z,ge);var Ai=rs(dr(Z),dr(ge),yt,pn,It,In);return In.delete(Z),Ai;case k:if(Or)return Or.call(Z)==Or.call(ge)}return!1}function xo(Z,ge,Be,yt,pn,It){var In=Be&i,dr=Mo(Z),kr=dr.length,Ln=Mo(ge),Ai=Ln.length;if(kr!=Ai&&!In)return!1;for(var Jr=kr;Jr--;){var sr=dr[Jr];if(!(In?sr in ge:P.call(ge,sr)))return!1}var di=It.get(Z);if(di&&It.get(ge))return di==ge;var wo=!0;It.set(Z,ge),It.set(ge,Z);for(var Vo=In;++Jr<kr;){sr=dr[Jr];var Bi=Z[sr],zi=ge[sr];if(yt)var ws=In?yt(zi,Bi,sr,ge,Z,It):yt(Bi,zi,sr,Z,ge,It);if(!(ws===void 0?Bi===zi||pn(Bi,zi,Be,yt,It):ws)){wo=!1;break}Vo||(Vo=sr=="constructor")}if(wo&&!Vo){var Hr=Z.constructor,da=ge.constructor;Hr!=da&&"constructor"in Z&&"constructor"in ge&&!(typeof Hr=="function"&&Hr instanceof Hr&&typeof da=="function"&&da instanceof da)&&(wo=!1)}return It.delete(Z),It.delete(ge),wo}function Mo(Z){return Rr(Z,as,al)}function zs(Z,ge){var Be=Z.__data__;return is(ge)?Be[typeof ge=="string"?"string":"hash"]:Be.map}function po(Z,ge){var Be=se(Z,ge);return vi(Be)?Be:void 0}function sl(Z){var ge=P.call(Z,We),Be=Z[We];try{Z[We]=void 0;var yt=!0}catch{}var pn=oe.call(Z);return yt&&(ge?Z[We]=Be:delete Z[We]),pn}var al=tt?function(Z){return Z==null?[]:(Z=Object(Z),nn(tt(Z),function(ge){return De.call(Z,ge)}))}:ul,Cr=nr;(xt&&Cr(new xt(new ArrayBuffer(1)))!=K||Qt&&Cr(new Qt)!=m||rn&&Cr(rn.resolve())!=w||on&&Cr(new on)!=T||sn&&Cr(new sn)!=M)&&(Cr=function(Z){var ge=nr(Z),Be=ge==v?Z.constructor:void 0,yt=Be?Ho(Be):"";if(yt)switch(yt){case Er:return K;case Ki:return m;case ho:return w;case Hi:return T;case Ns:return M}return ge});function Qi(Z,ge){return ge=ge??s,!!ge&&(typeof Z=="number"||he.test(Z))&&Z>-1&&Z%1==0&&Z<ge}function is(Z){var ge=typeof Z;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?Z!=="__proto__":Z===null}function Oo(Z){return!!Q&&Q in Z}function qo(Z){var ge=Z&&Z.constructor,Be=typeof ge=="function"&&ge.prototype||ye;return Z===Be}function fa(Z){return oe.call(Z)}function Ho(Z){if(Z!=null){try{return Re.call(Z)}catch{}try{return Z+""}catch{}}return""}function ll(Z,ge){return Z===ge||Z!==Z&&ge!==ge}var Gi=qt(function(){return arguments}())?qt:function(Z){return ss(Z)&&P.call(Z,"callee")&&!De.call(Z,"callee")},Vi=Array.isArray;function os(Z){return Z!=null&&fi(Z.length)&&!Go(Z)}var go=dt||Ht;function js(Z,ge){return bi(Z,ge)}function Go(Z){if(!Oa(Z))return!1;var ge=nr(Z);return ge==h||ge==p||ge==u||ge==E}function fi(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=s}function Oa(Z){var ge=typeof Z;return Z!=null&&(ge=="object"||ge=="function")}function ss(Z){return Z!=null&&typeof Z=="object"}var Wi=ht?pe(ht):Uo;function as(Z){return os(Z)?ni(Z):xs(Z)}function ul(){return[]}function Ht(){return!1}e.exports=js}(s2,s2.exports)),s2.exports}var ZTt=XTt();const CEe=oa(ZTt),KTt=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;var ja,C0,C$e,T8;class A$e extends Zr{constructor(){super();yn(this,C0);yn(this,ja,null);this.schema=null,this.value=null,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1,this.customEditorInterfaces=[]}get editor(){return Gt(this,ja)}get schema(){return this._schema}set schema(n){Gt(this,ja)&&!CEe(this._schema,n)&&Gt(this,ja).destroy(),this._schema=n}get value(){return this._value}set value(n){Gt(this,ja)&&Gt(this,ja).ready&&!CEe(this._value,n)&&Gt(this,ja).setValue(n),this._value=n}async updated(n){this._value=await SEe(this.value),n.has("schema")?(this._schema=await SEe(this.schema),(!Gt(this,ja)||Gt(this,ja).destroyed)&&(ao(this,ja,await EEe(this)),gn(this,C0,T8).call(this))):n.has("customEditorInterfaces")&&this.customEditorInterfaces&&(ao(this,ja,await EEe(this)),gn(this,C0,T8).call(this))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Qe`
      <style>
        ${WTt}
        ${!this.unstyled&&KTt}
        ${!this.unstyled&&YTt}
      </style>
      <form></form>
    `}}ja=new WeakMap,C0=new WeakSet,C$e=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},T8=function(){["ready","change"].map(r=>{Gt(this,ja).on(r,()=>{this._value=Gt(this,ja).getValue(),gn(this,C0,C$e).call(this)})})},tn(A$e,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},customEditorInterfaces:{attribute:!1,type:Array},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",A$e);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Dr=e=>e!==void 0,k$e=(e,t,n)=>t in e?e[t]:e[t]=n;const L_={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};class JTt{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,n){return SR(t,n).join("")}}function SR(e,t){return T$e(e,t,[]).join("")}function T$e(e,t,n){if(e.nodeType===L_.CDATA_SECTION||e.nodeType===L_.TEXT)t?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var r;for(r=e.firstChild;r;r=r.nextSibling)T$e(r,t,n)}return n}function QTt(e,t,n,r){for(var i=eDt(t);i;i=tDt(i)){var o=i.namespaceURI||null,s=e[o];if(Dr(s)){var a=s[i.localName];Dr(a)&&a.call(r,i,n)}}}function eDt(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==L_.ELEMENT;)t=t.nextSibling;return t}function tDt(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==L_.ELEMENT;)t=t.nextSibling;return t}function la(e,t,n){return nDt(e,t,n)}function nDt(e,t,n){var r=Dr(n)?n:{},i,o;for(i=0,o=e.length;i<o;++i)r[e[i]]=t;return r}function D$e(e,t){return function(n,r){var i=e.call(Dr(t)?t:this,n,r);if(Dr(i)){var o=r[r.length-1];o.push(i)}}}function Ps(e,t,n,r,i){return r.push(e),QTt(t,n,r,i),r.pop()}function dn(e,t,n){return function(r,i){let o=e.call(Dr(n)?n:this,r,i);if(Dr(o)){var s=i[i.length-1],a=Dr(t)?t:r.localName;s[a]=o}}}function vl(e,t,n){return function(r,i){var o=e.call(Dr(n)?n:this,r,i);if(Dr(o)){var s=i[i.length-1],a=Dr(t)?t:r.localName,l=k$e(s,a,[]);l.push(o)}}}const rDt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function iDt(e){return e.replace(rDt,"")}function Wm(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Dr(t[1])||!1}function bb(e){return jd(SR(e,!1))}function jd(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function Y4(e){return nT(SR(e,!1))}function nT(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function oi(e){return iDt(SR(e,!1))}const oDt="http://www.w3.org/1999/xlink";function _B(e){return e.getAttributeNS(oDt,"href")}function sDt(e,t){return Ps({},MDt,e,t)}function L$e(e){return[jd(e.getAttribute("minx")),jd(e.getAttribute("miny")),jd(e.getAttribute("maxx")),jd(e.getAttribute("maxy"))]}function aDt(e,t){const n=L$e(e),r=[jd(e.getAttribute("resx")),jd(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:n,res:r}}function lDt(e,t){const n=L$e(e);if(!(!Dr(n[0])||!Dr(n[1])||!Dr(n[2])||!Dr(n[3])))return n}function uDt(e,t){const n=parseFloat(e.getAttribute("min")),r=parseFloat(e.getAttribute("max"));return{min:n,max:r}}function cDt(e,t){const n=Ps({},ODt,e,t);if(!Dr(n))return;const r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,s=n.northBoundLatitude;if(!(!Dr(r)||!Dr(i)||!Dr(o)||!Dr(s)))return[r,i,o,s]}function fDt(e,t){return Ps({},kDt,e,t)}function dDt(e,t){return Ps({},TDt,e,t)}function hDt(e,t){return Ps({},DDt,e,t)}function pDt(e,t){return Ps({},LDt,e,t)}function gDt(e,t){return Ps({},RDt,e,t)}function mDt(e,t){return Ps([],FDt,e,t)}function yDt(e,t){const n=Wm(e.getAttribute("queryable"));return Ps({queryable:Dr(n)?n:!1},M$e,e,t)}function bDt(e,t){var n=t[t.length-1];const r=Ps({},M$e,e,t);if(!Dr(r))return;let i=Wm(e.getAttribute("queryable"));Dr(i)||(i=n.queryable),r.queryable=Dr(i)?i:!1;let o=nT(e.getAttribute("cascaded"));Dr(o)||(o=n.cascaded),r.cascaded=o;let s=Wm(e.getAttribute("opaque"));Dr(s)||(s=n.opaque),r.opaque=Dr(s)?s:!1;let a=Wm(e.getAttribute("noSubsets"));Dr(a)||(a=n.noSubsets),r.noSubsets=Dr(a)?a:!1;let l=jd(e.getAttribute("fixedWidth"));Dr(l)||(l=n.fixedWidth),r.fixedWidth=l;let u=jd(e.getAttribute("fixedHeight"));Dr(u)||(u=n.fixedHeight),r.fixedHeight=u;const f=["Style","CRS","AuthorityURL"];for(let d=0,h=f.length;d<h;d++){const p=f[d],m=n[p];if(Dr(m)){let b=k$e(r,p,[]);b=b.concat(m),r[p]=b}}const c=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,h=c.length;d<h;d++){const p=c[d],m=r[p];if(!Dr(m)){const b=n[p];r[p]=b}}return r}function vDt(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Wm(e.getAttribute("multipleValues")),nearestValue:Wm(e.getAttribute("nearestValue")),current:Wm(e.getAttribute("current")),values:oi(e)}}function uh(e,t){return Ps({},zDt,e,t)}function xDt(e,t){return Ps({},$Dt,e,t)}function wDt(e,t){return Ps({},PDt,e,t)}function _Dt(e,t){return Ps({},NDt,e,t)}function X4(e,t){return Ps({},IDt,e,t)}function R$e(e,t){var n=uh(e,t);if(Dr(n)){const r=[nT(e.getAttribute("width")),nT(e.getAttribute("height"))];return n.size=r,n}}function EDt(e,t){var n=uh(e,t);if(Dr(n))return n.name=e.getAttribute("name"),n}function SDt(e,t){var n=uh(e,t);if(Dr(n))return n.type=e.getAttribute("type"),n}function ADt(e,t){return Ps({},BDt,e,t)}function F$e(e,t){return Ps([],jDt,e,t)}const ua=[null,"http://www.opengis.net/wms"],CDt=la(ua,{Service:dn(dDt),Capability:dn(fDt)}),kDt=la(ua,{Request:dn(xDt),Exception:dn(mDt),Layer:dn(yDt)}),TDt=la(ua,{Name:dn(oi),Title:dn(oi),Abstract:dn(oi),KeywordList:dn(F$e),OnlineResource:dn(_B),ContactInformation:dn(hDt),Fees:dn(oi),AccessConstraints:dn(oi),LayerLimit:dn(Y4),MaxWidth:dn(Y4),MaxHeight:dn(Y4)}),DDt=la(ua,{ContactPersonPrimary:dn(pDt),ContactPosition:dn(oi),ContactAddress:dn(gDt),ContactVoiceTelephone:dn(oi),ContactFacsimileTelephone:dn(oi),ContactElectronicMailAddress:dn(oi)}),LDt=la(ua,{ContactPerson:dn(oi),ContactOrganization:dn(oi)}),RDt=la(ua,{AddressType:dn(oi),Address:dn(oi),City:dn(oi),StateOrProvince:dn(oi),PostCode:dn(oi),Country:dn(oi)}),FDt=la(ua,{Format:D$e(oi)}),M$e=la(ua,{Name:dn(oi),Title:dn(oi),Abstract:dn(oi),KeywordList:dn(F$e),CRS:vl(oi),SRS:vl(oi),EX_GeographicBoundingBox:dn(cDt),LatLonBoundingBox:dn(lDt),BoundingBox:vl(aDt),Dimension:vl(vDt),Attribution:dn(sDt),AuthorityURL:vl(EDt),Identifier:vl(oi),MetadataURL:vl(SDt),DataURL:vl(uh),FeatureListURL:vl(uh),Style:vl(ADt),MinScaleDenominator:dn(bb),MaxScaleDenominator:dn(bb),ScaleHint:dn(uDt),Layer:vl(bDt)}),MDt=la(ua,{Title:dn(oi),OnlineResource:dn(_B),LogoURL:dn(R$e)}),ODt=la(ua,{westBoundLongitude:dn(bb),eastBoundLongitude:dn(bb),southBoundLatitude:dn(bb),northBoundLatitude:dn(bb)}),$Dt=la(ua,{GetCapabilities:dn(X4),GetMap:dn(X4),GetFeatureInfo:dn(X4)}),IDt=la(ua,{Format:vl(oi),DCPType:vl(wDt)}),PDt=la(ua,{HTTP:dn(_Dt)}),NDt=la(ua,{Get:dn(uh),Post:dn(uh)}),BDt=la(ua,{Name:dn(oi),Title:dn(oi),Abstract:dn(oi),LegendURL:vl(R$e),StyleSheetURL:dn(uh),StyleURL:dn(uh)}),zDt=la(ua,{Format:dn(oi),OnlineResource:dn(_B)}),jDt=la(ua,{Keyword:D$e(oi)});class UDt{constructor(t,n){!n&&typeof window<"u"&&(n=window.DOMParser),this.version=void 0,this._parser=new JTt(n),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==L_.ELEMENT)return this.readFromNode(n);return null}readFromNode(t){return this.version=t.getAttribute("version"),Ps({version:this.version},CDt,t,[])||null}}async function qDt(e){let t=new URL(e),n=t.searchParams;n.set("SERVICE","WMS"),n.set("REQUEST","GetCapabilities");let r=t.toString();const i=await fetch(r);if(i.ok){const o=await i.text();return new UDt(o).toJSON()}else throw new Error(`Error: ${i.status}`)}function EB(e){const t=/\b(?:wms|ows)\b/i,n=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return t.test(e)?"TileWMS":n.test(e)?"XYZ":!1}function HDt(e){const n=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(e),r=EB(e);return!!(e&&n&&r)}function O$e(e){return e.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function GDt(e){try{return JSON.parse(O$e(e)),!!e}catch{return!1}}function VDt(e,t){const n=new URL(e).searchParams;Object.entries(t).forEach(([s,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{n.set(l,a[l])}):n.set(s,a)});const r=e.split("?")[0],i=n.toString();return`${r}?${i}`}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function kEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kEe(Object(n),!0).forEach(function(r){WDt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kEe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qC(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qC=function(t){return typeof t}:qC=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qC(e)}function WDt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ch(){return ch=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ch.apply(this,arguments)}function YDt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function XDt(e,t){if(e==null)return{};var n=YDt(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var ZDt="1.15.6";function Qd(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Eh=Qd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),tS=Qd(/Edge/i),TEe=Qd(/firefox/i),R2=Qd(/safari/i)&&!Qd(/chrome/i)&&!Qd(/android/i),SB=Qd(/iP(ad|od|hone)/i),$$e=Qd(/chrome/i)&&Qd(/android/i),I$e={capture:!1,passive:!1};function jr(e,t,n){e.addEventListener(t,n,!Eh&&I$e)}function Fr(e,t,n){e.removeEventListener(t,n,!Eh&&I$e)}function rT(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function P$e(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function fc(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&rT(e,t):rT(e,t))||r&&e===n)return e;if(e===n)break}while(e=P$e(e))}return null}var DEe=/\s+/g;function Ul(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(DEe," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(DEe," ")}}function Bn(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function $b(e,t){var n="";if(typeof e=="string")n=e;else do{var r=Bn(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function N$e(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Lf(){var e=document.scrollingElement;return e||document.documentElement}function Jo(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,s,a,l,u,f,c;if(e!==window&&e.parentNode&&e!==Lf()?(o=e.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,u=o.right,f=o.height,c=o.width):(s=0,a=0,l=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Eh))do if(i&&i.getBoundingClientRect&&(Bn(i,"transform")!=="none"||n&&Bn(i,"position")!=="static")){var d=i.getBoundingClientRect();s-=d.top+parseInt(Bn(i,"border-top-width")),a-=d.left+parseInt(Bn(i,"border-left-width")),l=s+o.height,u=a+o.width;break}while(i=i.parentNode);if(r&&e!==window){var h=$b(i||e),p=h&&h.a,m=h&&h.d;h&&(s/=m,a/=p,c/=p,f/=m,l=s+f,u=a+c)}return{top:s,left:a,bottom:l,right:u,width:c,height:f}}}function LEe(e,t,n){for(var r=kp(e,!0),i=Jo(e)[t];r;){var o=Jo(r)[n],s=void 0;if(s=i>=o,!s)return r;if(r===Lf())break;r=kp(r,!1)}return!1}function R1(e,t,n,r){for(var i=0,o=0,s=e.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==zn.ghost&&(r||s[o]!==zn.dragged)&&fc(s[o],n.draggable,e,!1)){if(i===t)return s[o];i++}o++}return null}function AB(e,t){for(var n=e.lastElementChild;n&&(n===zn.ghost||Bn(n,"display")==="none"||t&&!rT(n,t));)n=n.previousElementSibling;return n||null}function wu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==zn.clone&&(!t||rT(e,t))&&n++;return n}function REe(e){var t=0,n=0,r=Lf();if(e)do{var i=$b(e),o=i.a,s=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,n]}function KDt(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function kp(e,t){if(!e||!e.getBoundingClientRect)return Lf();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Bn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Lf();if(r||t)return n;r=!0}}while(n=n.parentNode);return Lf()}function JDt(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Z4(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var F2;function B$e(e,t){return function(){if(!F2){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),F2=setTimeout(function(){F2=void 0},t)}}}function QDt(){clearTimeout(F2),F2=void 0}function z$e(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function j$e(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function U$e(e,t,n){var r={};return Array.from(e.children).forEach(function(i){var o,s,a,l;if(!(!fc(i,t.draggable,e,!1)||i.animated||i===n)){var u=Jo(i);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,u.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,u.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Al="Sortable"+new Date().getTime();function eLt(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Bn(i,"display")==="none"||i===zn.ghost)){e.push({target:i,rect:Jo(i)});var o=qf({},e[e.length-1].rect);if(i.thisAnimationDuration){var s=$b(i,!0);s&&(o.top-=s.f,o.left-=s.e)}i.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(KDt(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,s=0;e.forEach(function(a){var l=0,u=a.target,f=u.fromRect,c=Jo(u),d=u.prevFromRect,h=u.prevToRect,p=a.rect,m=$b(u,!0);m&&(c.top-=m.f,c.left-=m.e),u.toRect=c,u.thisAnimationDuration&&Z4(d,c)&&!Z4(f,c)&&(p.top-c.top)/(p.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(l=nLt(p,d,h,i.options)),Z4(c,f)||(u.prevFromRect=f,u.prevToRect=c,l||(l=i.options.animation),i.animate(u,p,c,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),e=[]},animate:function(r,i,o,s){if(s){Bn(r,"transition",""),Bn(r,"transform","");var a=$b(this.el),l=a&&a.a,u=a&&a.d,f=(i.left-o.left)/(l||1),c=(i.top-o.top)/(u||1);r.animatingX=!!f,r.animatingY=!!c,Bn(r,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=tLt(r),Bn(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Bn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Bn(r,"transition",""),Bn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function tLt(e){return e.offsetWidth}function nLt(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Vy=[],K4={initializeByDefault:!0},nS={mount:function(t){for(var n in K4)K4.hasOwnProperty(n)&&!(n in t)&&(t[n]=K4[n]);Vy.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Vy.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=t+"Global";Vy.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][o]&&n[s.pluginName][o](qf({sortable:n},r)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](qf({sortable:n},r)))})},initializePlugins:function(t,n,r,i){Vy.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var u=new a(t,n,t.options);u.sortable=t,u.options=t.options,t[l]=u,ch(r,u.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,n){var r={};return Vy.forEach(function(i){typeof i.eventProperties=="function"&&ch(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return Vy.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(t[o.pluginName],r))}),i}};function rLt(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,s=e.toEl,a=e.fromEl,l=e.oldIndex,u=e.newIndex,f=e.oldDraggableIndex,c=e.newDraggableIndex,d=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[Al],!!t){var m,b=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Eh&&!tS?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=s||n,m.from=a||n,m.item=i||n,m.clone=o,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=f,m.newDraggableIndex=c,m.originalEvent=d,m.pullMode=h?h.lastPutMode:void 0;var v=qf(qf({},p),nS.getEventProperties(r,t));for(var w in v)m[w]=v[w];n&&n.dispatchEvent(m),b[y]&&b[y].call(t,m)}}var iLt=["evt"],ml=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=XDt(r,iLt);nS.pluginEvent.bind(zn)(t,n,qf({dragEl:Mt,parentEl:Ao,ghostEl:Kn,rootEl:lo,nextEl:Sm,lastDownEl:HC,cloneEl:mo,cloneHidden:dp,dragStarted:a2,putSortable:Gs,activeSortable:zn.active,originalEvent:i,oldIndex:vb,oldDraggableIndex:M2,newIndex:Hl,newDraggableIndex:lp,hideGhostForTarget:V$e,unhideGhostForTarget:W$e,cloneNowHidden:function(){dp=!0},cloneNowShown:function(){dp=!1},dispatchSortableEvent:function(a){Ba({sortable:n,name:a,originalEvent:i})}},o))};function Ba(e){rLt(qf({putSortable:Gs,cloneEl:mo,targetEl:Mt,rootEl:lo,oldIndex:vb,oldDraggableIndex:M2,newIndex:Hl,newDraggableIndex:lp},e))}var Mt,Ao,Kn,lo,Sm,HC,mo,dp,vb,Hl,M2,lp,ZA,Gs,rb=!1,iT=!1,oT=[],hm,rc,J4,Q4,FEe,MEe,a2,Wy,O2,$2=!1,KA=!1,GC,ya,e5=[],D8=!1,sT=[],AR=typeof document<"u",JA=SB,OEe=tS||Eh?"cssFloat":"float",oLt=AR&&!$$e&&!SB&&"draggable"in document.createElement("div"),q$e=function(){if(AR){if(Eh)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),H$e=function(t,n){var r=Bn(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=R1(t,0,n),s=R1(t,1,n),a=o&&Bn(o),l=s&&Bn(s),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Jo(o).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Jo(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[OEe]==="none"||s&&r[OEe]==="none"&&u+f>i)?"vertical":"horizontal"},sLt=function(t,n,r){var i=r?t.left:t.top,o=r?t.right:t.bottom,s=r?t.width:t.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||o===l||i+s/2===a+u/2},aLt=function(t,n){var r;return oT.some(function(i){var o=i[Al].options.emptyInsertThreshold;if(!(!o||AB(i))){var s=Jo(i),a=t>=s.left-o&&t<=s.right+o,l=n>=s.top-o&&n<=s.bottom+o;if(a&&l)return r=i}}),r},G$e=function(t){function n(o,s){return function(a,l,u,f){var c=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||c))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return n(o(a,l,u,f),s)(a,l,u,f);var d=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var r={},i=t.group;(!i||qC(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},V$e=function(){!q$e&&Kn&&Bn(Kn,"display","none")},W$e=function(){!q$e&&Kn&&Bn(Kn,"display","")};AR&&!$$e&&document.addEventListener("click",function(e){if(iT)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),iT=!1,!1},!0);var pm=function(t){if(Mt){t=t.touches?t.touches[0]:t;var n=aLt(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Al]._onDragOver(r)}}},lLt=function(t){Mt&&Mt.parentNode[Al]._isOutsideThisEl(t.target)};function zn(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ch({},t),e[Al]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return H$e(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:zn.supportPointer!==!1&&"PointerEvent"in window&&(!R2||SB),emptyInsertThreshold:5};nS.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);G$e(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:oLt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?jr(e,"pointerdown",this._onTapStart):(jr(e,"mousedown",this._onTapStart),jr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(jr(e,"dragover",this),jr(e,"dragenter",this)),oT.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ch(this,eLt())}zn.prototype={constructor:zn,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Wy=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Mt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,f=i.filter;if(mLt(r),!Mt&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&R2&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=fc(l,i.draggable,r,!1),!(l&&l.animated)&&HC!==l)){if(vb=wu(l),M2=wu(l,i.draggable),typeof f=="function"){if(f.call(this,t,l,this)){Ba({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),ml("filter",n,{evt:t}),o&&t.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=fc(u,c.trim(),r,!1),c)return Ba({sortable:n,rootEl:c,name:"filter",targetEl:l,fromEl:r,toEl:r}),ml("filter",n,{evt:t}),!0}),f)){o&&t.preventDefault();return}i.handle&&!fc(u,i.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,n,r){var i=this,o=i.el,s=i.options,a=o.ownerDocument,l;if(r&&!Mt&&r.parentNode===o){var u=Jo(r);if(lo=o,Mt=r,Ao=Mt.parentNode,Sm=Mt.nextSibling,HC=r,ZA=s.group,zn.dragged=Mt,hm={target:Mt,clientX:(n||t).clientX,clientY:(n||t).clientY},FEe=hm.clientX-u.left,MEe=hm.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Mt.style["will-change"]="all",l=function(){if(ml("delayEnded",i,{evt:t}),zn.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!TEe&&i.nativeDraggable&&(Mt.draggable=!0),i._triggerDragStart(t,n),Ba({sortable:i,name:"choose",originalEvent:t}),Ul(Mt,s.chosenClass,!0)},s.ignore.split(",").forEach(function(f){N$e(Mt,f.trim(),t5)}),jr(a,"dragover",pm),jr(a,"mousemove",pm),jr(a,"touchmove",pm),s.supportPointer?(jr(a,"pointerup",i._onDrop),!this.nativeDraggable&&jr(a,"pointercancel",i._onDrop)):(jr(a,"mouseup",i._onDrop),jr(a,"touchend",i._onDrop),jr(a,"touchcancel",i._onDrop)),TEe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Mt.draggable=!0),ml("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(tS||Eh))){if(zn.eventCanceled){this._onDrop();return}s.supportPointer?(jr(a,"pointerup",i._disableDelayedDrag),jr(a,"pointercancel",i._disableDelayedDrag)):(jr(a,"mouseup",i._disableDelayedDrag),jr(a,"touchend",i._disableDelayedDrag),jr(a,"touchcancel",i._disableDelayedDrag)),jr(a,"mousemove",i._delayedDragTouchMoveHandler),jr(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&jr(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Mt&&t5(Mt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Fr(t,"mouseup",this._disableDelayedDrag),Fr(t,"touchend",this._disableDelayedDrag),Fr(t,"touchcancel",this._disableDelayedDrag),Fr(t,"pointerup",this._disableDelayedDrag),Fr(t,"pointercancel",this._disableDelayedDrag),Fr(t,"mousemove",this._delayedDragTouchMoveHandler),Fr(t,"touchmove",this._delayedDragTouchMoveHandler),Fr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?jr(document,"pointermove",this._onTouchMove):n?jr(document,"touchmove",this._onTouchMove):jr(document,"mousemove",this._onTouchMove):(jr(Mt,"dragend",this),jr(lo,"dragstart",this._onDragStart));try{document.selection?VC(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(rb=!1,lo&&Mt){ml("dragStarted",this,{evt:n}),this.nativeDraggable&&jr(document,"dragover",lLt);var r=this.options;!t&&Ul(Mt,r.dragClass,!1),Ul(Mt,r.ghostClass,!0),zn.active=this,t&&this._appendGhost(),Ba({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(rc){this._lastX=rc.clientX,this._lastY=rc.clientY,V$e();for(var t=document.elementFromPoint(rc.clientX,rc.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(rc.clientX,rc.clientY),t!==n);)n=t;if(Mt.parentNode[Al]._isOutsideThisEl(t),n)do{if(n[Al]){var r=void 0;if(r=n[Al]._onDragOver({clientX:rc.clientX,clientY:rc.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=P$e(n));W$e()}},_onTouchMove:function(t){if(hm){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=t.touches?t.touches[0]:t,s=Kn&&$b(Kn,!0),a=Kn&&s&&s.a,l=Kn&&s&&s.d,u=JA&&ya&&REe(ya),f=(o.clientX-hm.clientX+i.x)/(a||1)+(u?u[0]-e5[0]:0)/(a||1),c=(o.clientY-hm.clientY+i.y)/(l||1)+(u?u[1]-e5[1]:0)/(l||1);if(!zn.active&&!rb){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Kn){s?(s.e+=f-(J4||0),s.f+=c-(Q4||0)):s={a:1,b:0,c:0,d:1,e:f,f:c};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Bn(Kn,"webkitTransform",d),Bn(Kn,"mozTransform",d),Bn(Kn,"msTransform",d),Bn(Kn,"transform",d),J4=f,Q4=c,rc=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Kn){var t=this.options.fallbackOnBody?document.body:lo,n=Jo(Mt,!0,JA,!0,t),r=this.options;if(JA){for(ya=t;Bn(ya,"position")==="static"&&Bn(ya,"transform")==="none"&&ya!==document;)ya=ya.parentNode;ya!==document.body&&ya!==document.documentElement?(ya===document&&(ya=Lf()),n.top+=ya.scrollTop,n.left+=ya.scrollLeft):ya=Lf(),e5=REe(ya)}Kn=Mt.cloneNode(!0),Ul(Kn,r.ghostClass,!1),Ul(Kn,r.fallbackClass,!0),Ul(Kn,r.dragClass,!0),Bn(Kn,"transition",""),Bn(Kn,"transform",""),Bn(Kn,"box-sizing","border-box"),Bn(Kn,"margin",0),Bn(Kn,"top",n.top),Bn(Kn,"left",n.left),Bn(Kn,"width",n.width),Bn(Kn,"height",n.height),Bn(Kn,"opacity","0.8"),Bn(Kn,"position",JA?"absolute":"fixed"),Bn(Kn,"zIndex","100000"),Bn(Kn,"pointerEvents","none"),zn.ghost=Kn,t.appendChild(Kn),Bn(Kn,"transform-origin",FEe/parseInt(Kn.style.width)*100+"% "+MEe/parseInt(Kn.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,o=r.options;if(ml("dragStart",this,{evt:t}),zn.eventCanceled){this._onDrop();return}ml("setupClone",this),zn.eventCanceled||(mo=j$e(Mt),mo.removeAttribute("id"),mo.draggable=!1,mo.style["will-change"]="",this._hideClone(),Ul(mo,this.options.chosenClass,!1),zn.clone=mo),r.cloneId=VC(function(){ml("clone",r),!zn.eventCanceled&&(r.options.removeCloneOnHide||lo.insertBefore(mo,Mt),r._hideClone(),Ba({sortable:r,name:"clone"}))}),!n&&Ul(Mt,o.dragClass,!0),n?(iT=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Fr(document,"mouseup",r._onDrop),Fr(document,"touchend",r._onDrop),Fr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,Mt)),jr(document,"drop",r),Bn(Mt,"transform","translateZ(0)")),rb=!0,r._dragStartId=VC(r._dragStarted.bind(r,n,t)),jr(document,"selectstart",r),a2=!0,window.getSelection().removeAllRanges(),R2&&Bn(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,o,s,a=this.options,l=a.group,u=zn.active,f=ZA===l,c=a.sort,d=Gs||u,h,p=this,m=!1;if(D8)return;function b(Y,X){ml(Y,p,qf({evt:t,isOwner:f,axis:h?"vertical":"horizontal",revert:s,dragRect:i,targetRect:o,canSort:c,fromSortable:d,target:r,completed:v,onMove:function(le,ee){return QA(lo,n,Mt,i,le,Jo(le),t,ee)},changed:w},X))}function y(){b("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function v(Y){return b("dragOverCompleted",{insertion:Y}),Y&&(f?u._hideClone():u._showClone(p),p!==d&&(Ul(Mt,Gs?Gs.options.ghostClass:u.options.ghostClass,!1),Ul(Mt,a.ghostClass,!0)),Gs!==p&&p!==zn.active?Gs=p:p===zn.active&&Gs&&(Gs=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){b("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===Mt&&!Mt.animated||r===n&&!r.animated)&&(Wy=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(Mt.parentNode[Al]._isOutsideThisEl(t.target),!Y&&pm(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),m=!0}function w(){Hl=wu(Mt),lp=wu(Mt,a.draggable),Ba({sortable:p,name:"change",toEl:n,newIndex:Hl,newDraggableIndex:lp,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=fc(r,a.draggable,n,!0),b("dragOver"),zn.eventCanceled)return m;if(Mt.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return v(!1);if(iT=!1,u&&!a.disabled&&(f?c||(s=Ao!==lo):Gs===this||(this.lastPutMode=ZA.checkPull(this,u,Mt,t))&&l.checkPut(this,u,Mt,t))){if(h=this._getDirection(t,r)==="vertical",i=Jo(Mt),b("dragOverValid"),zn.eventCanceled)return m;if(s)return Ao=lo,y(),this._hideClone(),b("revert"),zn.eventCanceled||(Sm?lo.insertBefore(Mt,Sm):lo.appendChild(Mt)),v(!0);var E=AB(n,a.draggable);if(!E||dLt(t,h,this)&&!E.animated){if(E===Mt)return v(!1);if(E&&n===t.target&&(r=E),r&&(o=Jo(r)),QA(lo,n,Mt,i,r,o,t,!!r)!==!1)return y(),E&&E.nextSibling?n.insertBefore(Mt,E.nextSibling):n.appendChild(Mt),Ao=n,w(),v(!0)}else if(E&&fLt(t,h,this)){var A=R1(n,0,a,!0);if(A===Mt)return v(!1);if(r=A,o=Jo(r),QA(lo,n,Mt,i,r,o,t,!1)!==!1)return y(),n.insertBefore(Mt,A),Ao=n,w(),v(!0)}else if(r.parentNode===n){o=Jo(r);var T=0,D,k=Mt.parentNode!==n,R=!sLt(Mt.animated&&Mt.toRect||i,r.animated&&r.toRect||o,h),M=h?"top":"left",B=LEe(r,"top","top")||LEe(Mt,"top","top"),K=B?B.scrollTop:void 0;Wy!==r&&(D=o[M],$2=!1,KA=!R&&a.invertSwap||k),T=hLt(t,r,o,h,R?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,KA,Wy===r);var L;if(T!==0){var $=wu(Mt);do $-=T,L=Ao.children[$];while(L&&(Bn(L,"display")==="none"||L===Kn))}if(T===0||L===r)return v(!1);Wy=r,O2=T;var I=r.nextElementSibling,U=!1;U=T===1;var q=QA(lo,n,Mt,i,r,o,t,U);if(q!==!1)return(q===1||q===-1)&&(U=q===1),D8=!0,setTimeout(cLt,30),y(),U&&!I?n.appendChild(Mt):r.parentNode.insertBefore(Mt,U?I:r),B&&z$e(B,0,K-B.scrollTop),Ao=Mt.parentNode,D!==void 0&&!KA&&(GC=Math.abs(D-Jo(r)[M])),w(),v(!0)}if(n.contains(Mt))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Fr(document,"mousemove",this._onTouchMove),Fr(document,"touchmove",this._onTouchMove),Fr(document,"pointermove",this._onTouchMove),Fr(document,"dragover",pm),Fr(document,"mousemove",pm),Fr(document,"touchmove",pm)},_offUpEvents:function(){var t=this.el.ownerDocument;Fr(t,"mouseup",this._onDrop),Fr(t,"touchend",this._onDrop),Fr(t,"pointerup",this._onDrop),Fr(t,"pointercancel",this._onDrop),Fr(t,"touchcancel",this._onDrop),Fr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(Hl=wu(Mt),lp=wu(Mt,r.draggable),ml("drop",this,{evt:t}),Ao=Mt&&Mt.parentNode,Hl=wu(Mt),lp=wu(Mt,r.draggable),zn.eventCanceled){this._nulling();return}rb=!1,KA=!1,$2=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),L8(this.cloneId),L8(this._dragStartId),this.nativeDraggable&&(Fr(document,"drop",this),Fr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),R2&&Bn(document.body,"user-select",""),Bn(Mt,"transform",""),t&&(a2&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Kn&&Kn.parentNode&&Kn.parentNode.removeChild(Kn),(lo===Ao||Gs&&Gs.lastPutMode!=="clone")&&mo&&mo.parentNode&&mo.parentNode.removeChild(mo),Mt&&(this.nativeDraggable&&Fr(Mt,"dragend",this),t5(Mt),Mt.style["will-change"]="",a2&&!rb&&Ul(Mt,Gs?Gs.options.ghostClass:this.options.ghostClass,!1),Ul(Mt,this.options.chosenClass,!1),Ba({sortable:this,name:"unchoose",toEl:Ao,newIndex:null,newDraggableIndex:null,originalEvent:t}),lo!==Ao?(Hl>=0&&(Ba({rootEl:Ao,name:"add",toEl:Ao,fromEl:lo,originalEvent:t}),Ba({sortable:this,name:"remove",toEl:Ao,originalEvent:t}),Ba({rootEl:Ao,name:"sort",toEl:Ao,fromEl:lo,originalEvent:t}),Ba({sortable:this,name:"sort",toEl:Ao,originalEvent:t})),Gs&&Gs.save()):Hl!==vb&&Hl>=0&&(Ba({sortable:this,name:"update",toEl:Ao,originalEvent:t}),Ba({sortable:this,name:"sort",toEl:Ao,originalEvent:t})),zn.active&&((Hl==null||Hl===-1)&&(Hl=vb,lp=M2),Ba({sortable:this,name:"end",toEl:Ao,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ml("nulling",this),lo=Mt=Ao=Kn=Sm=mo=HC=dp=hm=rc=a2=Hl=lp=vb=M2=Wy=O2=Gs=ZA=zn.dragged=zn.ghost=zn.clone=zn.active=null,sT.forEach(function(t){t.checked=!0}),sT.length=J4=Q4=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Mt&&(this._onDragOver(t),uLt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,o=r.length,s=this.options;i<o;i++)n=r[i],fc(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||gLt(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(o,s){var a=i.children[s];fc(a,this.options.draggable,i,!1)&&(r[o]=a)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return fc(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=nS.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&G$e(r)},destroy:function(){ml("destroy",this);var t=this.el;t[Al]=null,Fr(t,"mousedown",this._onTapStart),Fr(t,"touchstart",this._onTapStart),Fr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Fr(t,"dragover",this),Fr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),oT.splice(oT.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!dp){if(ml("hideClone",this),zn.eventCanceled)return;Bn(mo,"display","none"),this.options.removeCloneOnHide&&mo.parentNode&&mo.parentNode.removeChild(mo),dp=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(dp){if(ml("showClone",this),zn.eventCanceled)return;Mt.parentNode==lo&&!this.options.group.revertClone?lo.insertBefore(mo,Mt):Sm?lo.insertBefore(mo,Sm):lo.appendChild(mo),this.options.group.revertClone&&this.animate(Mt,mo),Bn(mo,"display",""),dp=!1}}};function uLt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function QA(e,t,n,r,i,o,s,a){var l,u=e[Al],f=u.options.onMove,c;return window.CustomEvent&&!Eh&&!tS?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=o||Jo(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),f&&(c=f.call(u,l,s)),c}function t5(e){e.draggable=!1}function cLt(){D8=!1}function fLt(e,t,n){var r=Jo(R1(n.el,0,n.options,!0)),i=U$e(n.el,n.options,Kn),o=10;return t?e.clientX<i.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-o||e.clientY<r.bottom&&e.clientX<r.left}function dLt(e,t,n){var r=Jo(AB(n.el,n.options.draggable)),i=U$e(n.el,n.options,Kn),o=10;return t?e.clientX>i.right+o||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+o||e.clientX>r.right&&e.clientY>r.top}function hLt(e,t,n,r,i,o,s,a){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,f=r?n.top:n.left,c=r?n.bottom:n.right,d=!1;if(!s){if(a&&GC<u*i){if(!$2&&(O2===1?l>f+u*o/2:l<c-u*o/2)&&($2=!0),$2)d=!0;else if(O2===1?l<f+GC:l>c-GC)return-O2}else if(l>f+u*(1-i)/2&&l<c-u*(1-i)/2)return pLt(t)}return d=d||s,d&&(l<f+u*o/2||l>c-u*o/2)?l>f+u/2?1:-1:0}function pLt(e){return wu(Mt)<wu(e)?1:-1}function gLt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function mLt(e){sT.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&sT.push(r)}}function VC(e){return setTimeout(e,0)}function L8(e){return clearTimeout(e)}AR&&jr(document,"touchmove",function(e){(zn.active||rb)&&e.cancelable&&e.preventDefault()});zn.utils={on:jr,off:Fr,css:Bn,find:N$e,is:function(t,n){return!!fc(t,n,t,!1)},extend:JDt,throttle:B$e,closest:fc,toggleClass:Ul,clone:j$e,index:wu,nextTick:VC,cancelNextTick:L8,detectDirection:H$e,getChild:R1,expando:Al};zn.get=function(e){return e[Al]};zn.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(zn.utils=qf(qf({},zn.utils),r.utils)),nS.mount(r)})};zn.create=function(e,t){return new zn(e,t)};zn.version=ZDt;var Zo=[],l2,R8,F8=!1,n5,r5,aT,u2;function yLt(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?jr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?jr(document,"pointermove",this._handleFallbackAutoScroll):r.touches?jr(document,"touchmove",this._handleFallbackAutoScroll):jr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Fr(document,"dragover",this._handleAutoScroll):(Fr(document,"pointermove",this._handleFallbackAutoScroll),Fr(document,"touchmove",this._handleFallbackAutoScroll),Fr(document,"mousemove",this._handleFallbackAutoScroll)),$Ee(),WC(),QDt()},nulling:function(){aT=R8=l2=F8=u2=n5=r5=null,Zo.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(o,s);if(aT=n,r||this.options.forceAutoScrollFallback||tS||Eh||R2){i5(n,this.options,a,r);var l=kp(a,!0);F8&&(!u2||o!==n5||s!==r5)&&(u2&&$Ee(),u2=setInterval(function(){var u=kp(document.elementFromPoint(o,s),!0);u!==l&&(l=u,WC()),i5(n,i.options,u,r)},10),n5=o,r5=s)}else{if(!this.options.bubbleScroll||kp(a,!0)===Lf()){WC();return}i5(n,this.options,kp(a,!1),!1)}}},ch(e,{pluginName:"scroll",initializeByDefault:!0})}function WC(){Zo.forEach(function(e){clearInterval(e.pid)}),Zo=[]}function $Ee(){clearInterval(u2)}var i5=B$e(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=Lf(),u=!1,f;R8!==n&&(R8=n,WC(),l2=t.scroll,f=t.scrollFn,l2===!0&&(l2=kp(n,!0)));var c=0,d=l2;do{var h=d,p=Jo(h),m=p.top,b=p.bottom,y=p.left,v=p.right,w=p.width,E=p.height,A=void 0,T=void 0,D=h.scrollWidth,k=h.scrollHeight,R=Bn(h),M=h.scrollLeft,B=h.scrollTop;h===l?(A=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),T=E<k&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(A=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"),T=E<k&&(R.overflowY==="auto"||R.overflowY==="scroll"));var K=A&&(Math.abs(v-i)<=s&&M+w<D)-(Math.abs(y-i)<=s&&!!M),L=T&&(Math.abs(b-o)<=s&&B+E<k)-(Math.abs(m-o)<=s&&!!B);if(!Zo[c])for(var $=0;$<=c;$++)Zo[$]||(Zo[$]={});(Zo[c].vx!=K||Zo[c].vy!=L||Zo[c].el!==h)&&(Zo[c].el=h,Zo[c].vx=K,Zo[c].vy=L,clearInterval(Zo[c].pid),(K!=0||L!=0)&&(u=!0,Zo[c].pid=setInterval((function(){r&&this.layer===0&&zn.active._onTouchMove(aT);var I=Zo[this.layer].vy?Zo[this.layer].vy*a:0,U=Zo[this.layer].vx?Zo[this.layer].vx*a:0;typeof f=="function"&&f.call(zn.dragged.parentNode[Al],U,I,e,aT,Zo[this.layer].el)!=="continue"||z$e(Zo[this.layer].el,U,I)}).bind({layer:c}),24))),c++}while(t.bubbleScroll&&d!==l&&(d=kp(d,!1)));F8=u}},30),Y$e=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var u=r||o;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);l(),u&&!u.el.contains(c)&&(s("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function CB(){}CB.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=R1(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:Y$e};ch(CB,{pluginName:"revertOnSpill"});function kB(){}kB.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:Y$e};ch(kB,{pluginName:"removeOnSpill"});zn.mount(new yLt);zn.mount(kB,CB);const bLt=e=>{const t=e.item;let n=Array.prototype.slice.call(t.parentNode.childNodes);return n=n.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),n},vLt=(e,t,n,r,i,o)=>{const a=e.item.parentNode;for(const m of n)a.appendChild(m);if(e.oldIndex==e.newIndex)return;const l=r.getArray(),u=e.item.querySelector("eox-layercontrol-layer").layer.get(i),f=l.find(m=>m.get(i)===u),c=o.dataset.layer,d=l.find(m=>m.get(i)==c);let h,p;for(h=0;h<l.length;h++)if(l[h]==f){r.removeAt(h);break}for(p=0;p<l.length;p++)if(l[p]===d){h>p?r.insertAt(p,f):r.insertAt(p+1,f);break}t.requestUpdate()};function xLt(e,t,n,r){let i=[],o=null;e._sortable=zn.create(e,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:s=>i=bLt(s),onMove:s=>{o=s.related},onEnd:s=>vLt(s,r,i,t,n,o)})}function wLt(e,t,n,r){const i=e.getArray();let o=!1;i.forEach(s=>{const a=s.ol_uid;s.get(t)||(s.set(t,a),o=!0),s.get(n)||(s.set(n,`layer ${a}`),o=!0),o&&r.requestUpdate()})}function TB(e,t,n){let r=[];const i=(o,s,a)=>{r=[...r,...o.filter(u=>u.get(s)===a)];const l=o.filter(u=>u.getLayers);return l.length>0&&l.forEach(u=>i(u.getLayers().getArray(),s,a)),r};return i(e,t,n),r}function _Lt(e,t,n){if(!e||!t)return!1;if(!X$e(e,n))return!0;const r=e.get("minZoom"),i=e.get("maxZoom"),o=t.getView().getZoom();return o>r&&o<i}function X$e(e,t){const n=e.get("minZoom"),r=e.get("maxZoom");return!!(t&&(n!==-1/0||r!==1/0))}function ELt(e,t){var i,o,s;return!e||!t?void 0:e.getLayers?"group":((s=(i=t.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:i.ol_uid)==null?void 0:s.includes(e.getSource?(o=e.getSource())==null?void 0:o.ol_uid:void 0))?"draw":e.declutter_!==void 0?"vector":"raster"}const SLt=(e,t,n)=>{let r=t;return n.layer.getSource().getTileUrlFunction()&&(r||(r=n.layer.getSource().getTileUrlFunction()),n.layer.getSource().setTileUrlFunction((...i)=>VDt(r(...i),e)),n.layer.getSource().setKey(new Date)),r};function ALt(e,t,n){const r="updateStyleVariables"in t,i="setStyle"in t,o=r?t.style_:n.style;let s=o==null?void 0:o.variables;if(s){const a=DB(e);if(o.variables={...s,...a},r)t.updateStyleVariables(a);else if(i){const l=CLt(o);t.setStyle(l)}}}const DB=e=>{const t={};for(const n in e)if(typeof e[n]=="object"&&e[n]!==null){const r=DB(e[n]);for(const i in r)t[i]=r==null?void 0:r[i]}else t[n]=e==null?void 0:e[n];return t};function CLt(e){let t=e;if("variables"in e){let n=JSON.stringify(e);const{variables:r}=e;for(const i in r)typeof r[i]=="number"?n=n.replaceAll(`["var","${i}"]`,r[i]):n=n.replaceAll(`["var","${i}"]`,`"${r[i]}"`);t=JSON.parse(n)}return t}const kLt=(e,t)=>{var n;if(e)return!("domainProperties"in e)||"domain"in e?{...e}:(n=Object.keys(e))==null?void 0:n.reduce((r,i)=>{if(i==="domainProperties"){const o=DB(t);r.domain=e[i].map(s=>o[s])}else r[i]=e[i];return r},{})};function Z$e(e,t){var r;let n={};for(const i in e){const o=e[i].type;if(o&&o!=="object")n[i]=o==="number"?Number(t[i]):t[i];else if(typeof e[i]=="object"&&((r=e[i])!=null&&r.properties)){const s=Z$e(e[i].properties,t);Object.keys(s).length>0&&(n[i]=s)}}return n}function TLt(e,t){var o,s,a,l,u;if(!t)return null;let n={},r="updateStyleVariables"in e?(o=e.style_)==null?void 0:o.variables:(s=t.style)==null?void 0:s.variables;if((t.type==="style"||t.style)&&r)n=r;else if((l=(a=e.getSource())==null?void 0:a.getTileUrlFunction)!=null&&l.call(a)){const f=new URL(e.getSource().getTileUrlFunction()([0,0,0]));n=Object.fromEntries(f.searchParams.entries())}else return null;const i=Z$e(((u=t.schema)==null?void 0:u.properties)||t.schema,n);return Object.keys(i).length?i:null}const DLt=(e,t)=>e==null?void 0:e.filter(n=>["remove","sort"].filter(r=>t!=null&&t.get("layerControlDisable")?r!=="sort":!0).includes(n)),LLt=(e,t)=>e==null?void 0:e.filter(n=>{let r=!0;return["remove","sort"].includes(n)&&(r=!1),n==="info"&&(r=t.get("description")),n==="config"&&(r=t.get("layerConfig")),n==="datetime"&&(r=t.get("layerDatetime")),n==="legend"&&(r=t.get("layerLegend")),r}),RLt=(e,t)=>Qe`
  <button slot="${e}-icon" class="icon">${t?e:Xr}</button>
`,FLt=e=>Qe`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:t}=e;t==null||t.set("layerControlOptional",!0),t==null||t.setVisible(!1),e.dispatchEvent(new CustomEvent("changed",{detail:t,bubbles:!0}))}}
  >
    ${e.unstyled?"x":Xr}
  </button>
`,MLt=e=>Qe`
  <span class="button sort-icon icon drag-handle">
    ${e?"":Xr}
  </span>
`,K$e=e=>{var n;const t=["layerControlHide","layerControlOptional"];return(n=e==null?void 0:e.getArray())==null?void 0:n.filter(r=>t.every(i=>!r.get(i)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const J$e=K_(class extends nD{constructor(e){if(super(e),e.type!==np.PROPERTY&&e.type!==np.ATTRIBUTE&&e.type!==np.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!BBe(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===lb||t===Xr)return t;const n=e.element,r=e.name;if(e.type===np.PROPERTY){if(t===n[r])return lb}else if(e.type===np.BOOLEAN_ATTRIBUTE){if(!!t===n.hasAttribute(r))return lb}else if(e.type===np.ATTRIBUTE&&n.getAttribute(r)===t+"")return lb;return J8(e),t}});var o5,IEe;function OLt(){if(IEe)return o5;IEe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,h=Math.max,p=Math.min,m=function(){return f.Date.now()};function b(T,D,k){var R,M,B,K,L,$,I=0,U=!1,q=!1,Y=!0;if(typeof T!="function")throw new TypeError(e);D=A(D)||0,v(k)&&(U=!!k.leading,q="maxWait"in k,B=q?h(A(k.maxWait)||0,D):B,Y="trailing"in k?!!k.trailing:Y);function X(je){var we=R,Ie=M;return R=M=void 0,I=je,K=T.apply(Ie,we),K}function te(je){return I=je,L=setTimeout(z,D),U?X(je):K}function le(je){var we=je-$,Ie=je-I,qe=D-we;return q?p(qe,B-Ie):qe}function ee(je){var we=je-$,Ie=je-I;return $===void 0||we>=D||we<0||q&&Ie>=B}function z(){var je=m();if(ee(je))return he(je);L=setTimeout(z,le(je))}function he(je){return L=void 0,Y&&R?X(je):(R=M=void 0,K)}function de(){L!==void 0&&clearTimeout(L),I=0,R=$=M=L=void 0}function ze(){return L===void 0?K:he(m())}function He(){var je=m(),we=ee(je);if(R=arguments,M=this,$=je,we){if(L===void 0)return te($);if(q)return L=setTimeout(z,D),X($)}return L===void 0&&(L=setTimeout(z,D)),K}return He.cancel=de,He.flush=ze,He}function y(T,D,k){var R=!0,M=!0;if(typeof T!="function")throw new TypeError(e);return v(k)&&(R="leading"in k?!!k.leading:R,M="trailing"in k?!!k.trailing:M),b(T,D,{leading:R,maxWait:D,trailing:M})}function v(T){var D=typeof T;return!!T&&(D=="object"||D=="function")}function w(T){return!!T&&typeof T=="object"}function E(T){return typeof T=="symbol"||w(T)&&d.call(T)==n}function A(T){if(typeof T=="number")return T;if(E(T))return t;if(v(T)){var D=typeof T.valueOf=="function"?T.valueOf():T;T=v(D)?D+"":D}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var k=o.test(T);return k||s.test(T)?a(T.slice(2),k?2:8):i.test(T)?t:+T}return o5=y,o5}var $Lt=OLt();const PEe=oa($Lt);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eC=e=>e??Xr;var DT,LT;class Q$e extends Zr{constructor(){super();yn(this,DT,Q8`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
      --cle-padding: 0;
    }
  `);yn(this,LT,"");this.unstyled=!1,this.noShadow=!1,this.layerLegend=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){this.layerLegend.width||new ResizeObserver(()=>{this.offsetWidth!==this.layerLegend.width&&(this.layerLegend.width=this.offsetWidth,this.requestUpdate())}).observe(this.renderRoot.querySelector(".legend-container"))}render(){return customElements.get("color-legend")||console.error("Please import `color-legend-element` in order to use layerLegend"),Qe`
      <style>
        ${Gt(this,DT)}
        ${!this.unstyled&&Gt(this,LT)}
      </style>
      ${Un(this.layerLegend,()=>Qe`
          <div class="legend-container">
            <!-- Render color-legend-->
            <color-legend
              id="${this.layer.get("id")}"
              width=${this.layerLegend.width??325}
              scaleType="${eC(this.layerLegend.scaleType)}"
              markType="${eC(this.layerLegend.markType)}"
              titleText="${eC(this.layerLegend.title)}"
              .range=${this.layerLegend.range}
              .domain=${this.layerLegend.domain}
              tickFormat="${eC(this.layerLegend.tickFormat)}"
              .ticks=${this.layerLegend.ticks??5}
              .tickValues=${this.layerLegend.tickValues}
              .marginLeft=${0}
              .marginRight=${0}
            >
            </color-legend>
          </div>
        `)}
    `}}DT=new WeakMap,LT=new WeakMap,tn(Q$e,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerLegend:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-legend",Q$e);var Md,qb,W_,Y_,M8,RT,FT;class eIe extends Zr{constructor(){super();yn(this,Y_);yn(this,Md,{});yn(this,qb,null);yn(this,W_);yn(this,RT,Q8`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
    }
  `);yn(this,FT,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.throttleDataChange=PEe(gn(this,Y_,M8),1e3)}updated(n){if(n.has("layerConfig")){const r=this.layerConfig.type==="style"||this.layerConfig.style?100:1e3;this.throttleDataChange=PEe(gn(this,Y_,M8),r),this.requestUpdate()}}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){ao(this,qb,TLt(this.layer,this.layerConfig)),Object.keys(Gt(this,Md)).length!==0&&ao(this,qb,Gt(this,Md)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const n={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return Qe`
      <style>
        ${Gt(this,RT)}
        ${!this.unstyled&&Gt(this,FT)}
      </style>
      ${Un(this.layerConfig,()=>Qe`
          ${Un(this.layerConfig.legend,()=>Qe`
              <eox-layercontrol-layer-legend
                .noShadow=${!0}
                .unstyled=${this.unstyled}
                .layer=${this.layer}
                .layerLegend=${kLt(this.layerConfig.legend,Gt(this,Md))}
              ></eox-layercontrol-layer-legend>
            `)}
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${Gt(this,qb)}
            .options=${n}
            @change=${this.throttleDataChange}
          ></eox-jsonform>
        `)}
    `}}Md=new WeakMap,qb=new WeakMap,W_=new WeakMap,Y_=new WeakSet,M8=function(n){ao(this,Md,n.detail),this.layerConfig.type==="style"||this.layerConfig.style?"setStyle"in this.layer||"updateStyleVariables"in this.layer?ALt(Gt(this,Md),this.layer,this.layerConfig):console.error(`Layer type ${this.layer.get("type")??""} does not support styles configuration`):ao(this,W_,SLt(Gt(this,Md),Gt(this,W_),this)),this.requestUpdate()},RT=new WeakMap,FT=new WeakMap,tn(eIe,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",eIe);var MT,nIe,OT,$T;class tIe extends Zr{constructor(){super();yn(this,MT);yn(this,OT,"");yn(this,$T,"");this.unstyled=!1,this.noShadow=!1,this.layerDatetime=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return customElements.get("eox-timecontrol")||console.error("Please import @eox/timecontrol in order to use layerDatetime"),Qe`
      <style>
        ${Gt(this,OT)}
        ${!this.unstyled&&Gt(this,$T)}
      </style>
      ${Un(this.layerDatetime,()=>Qe`
          <!-- Render a Timecontrol for layer date time -->
          <eox-timecontrol
            ?unstyled=${this.unstyled}
            .for=${void 0}
            .layer=${void 0}
            .navigation=${this.layerDatetime.navigation??!1}
            .slider=${this.layerDatetime.slider??!1}
            .play=${this.layerDatetime.play??!1}
            .controlValues=${this.layerDatetime.controlValues}
            .controlProperty=${void 0}
            current-step=${this.layerDatetime.currentStep}
            .displayFormat=${this.layerDatetime.displayFormat}
            @stepchange=${gn(this,MT,nIe)}
          ></eox-timecontrol>
        `)}
    `}}MT=new WeakSet,nIe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{bubbles:!0,detail:{datetime:n.detail.currentStep,layer:this.layer}})),this.layerDatetime.currentStep=n.detail.currentStep,this.requestUpdate()},OT=new WeakMap,$T=new WeakMap,tn(tIe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerDatetime:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-datetime",tIe);var X_,IT,PT;class rIe extends Zr{constructor(){super();yn(this,X_,n=>(this.selectedTab===n||this.toolsAsList)&&"highlighted");yn(this,IT,`
    .tabbed figure,
    .listed figure {
      margin: 0;
    }
    .tabbed nav,
    .listed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div,
    .listed nav div {
      display: flex;
    }
    .tabbed .tab,
    .listed .tab {
      display: none;
    }
    .tabbed .tab.highlighted,
    .listed .tab.highlighted {
      display: block;
    }
  `);yn(this,PT,`
    .listed label {
      display: flex;
      justify-content: start;
      align-items: center;
      background: var(--background-color) !important;
    }
    .listed label:not(:first-of-type) {
      margin-top: 10px;
    }
    .listed label span {
      text-transform: capitalize;
      font-weight: 300;
    }
    .tabbed, .listed {
      font-size: small;
    }
    .tabbed label.highlighted {
      border: 1px solid #0041701a;
      border-radius: 2px;
      border-bottom: none;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: var(--background-color);
      border: 1px solid #0041701a;
      border-radius: 2px;
      padding: var(--padding-vertical) var(--padding);
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.tabs,r=this.actions,i=r.length+n.length>1;return Qe`
      <style>
        ${Gt(this,IT)}
        ${!this.unstyled&&Gt(this,PT)}
      </style>
      <div class="${this.toolsAsList?"listed":"tabbed"}">
        <!-- Navigation for tabs and actions -->
        ${Un(i,()=>Qe`
            <nav>
              ${Un(!this.toolsAsList,()=>Qe`
                  <div>
                    <!-- Labels for tabs -->
                    ${ou(n,(o,s)=>Qe`
                        <label
                          class=${Gt(this,X_).call(this,s)}
                          @click=${()=>this.selectedTab=s}
                        >
                          <!-- Customizable icon for each tab -->
                          <slot name=${`${o}-icon`}>${o}</slot>
                        </label>
                      `)}
                  </div>
                  <div>
                    <!-- Icons for actions -->
                    ${ou(r,o=>Qe`
                        <span>
                          <!-- Customizable icon for each action -->
                          <slot name=${`${o}-icon`}>${o}</slot>
                        </span>
                      `)}
                  </div>
                `)}
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${ou(n,(o,s)=>Qe`
              ${Un(this.toolsAsList,()=>Qe`
                  <label>
                    <!-- Customizable icon for each tab -->
                    <slot name=${`${o}-icon`}>${o}</slot>
                    <span>${o}</span>
                  </label>
                `)}
              <div class="tab ${Gt(this,X_).call(this,s)}">
                <!-- Content slot for each tab -->
                <slot name=${`${o}-content`}>${o}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}X_=new WeakMap,IT=new WeakMap,PT=new WeakMap,tn(rIe,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-tools-items",rIe);const ILt=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,PLt=`
input[type=radio] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}

label span {
  font-size: small;
}

input[type=radio]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=radio]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");

}
`,iIe=`
input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}
input[type=checkbox]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=checkbox]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");

}
`,NLt=`
input[type="range"] {
  -webkit-appearance: none;
  width: 90%;
  margin-left: 5%;
  height: 6px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
}
input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider {
  margin: 60px 0 0 0;
}
.range-slider {
  width: 100%;
}
input[type="range"]::-webkit-slider-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-webkit-slider-thumb {
  background: #00416F;
}
input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
input[type="range"]::-moz-range-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-moz-range-thumb {
  background: #00416F;
}
input[type="range"]:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416F00;
}
.range-slider__value {
  display: inline-block;
  position: relative;
  width: 60px;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

input::-moz-focus-inner, input::-moz-focus-outer {
  border: 0;
}
`;var NT,BT;class oIe extends Zr{constructor(){super();tn(this,"_removeButton",()=>FLt(this));tn(this,"_sortButton",()=>MLt(this.unstyled));tn(this,"_button",n=>RLt(n,this.unstyled));tn(this,"_getDefaultTools",()=>{var n;return Qe`
      <div slot="info-content">
        ${Sc(this.layer.get("description"))}
      </div>
      <div slot="opacity-content">
        <!-- Input for opacity -->
        <input
          type="range"
          min="0"
          max="1"
          step="0.01"
          value=${J$e((n=this.layer)==null?void 0:n.getOpacity())}
          @input=${r=>this.layer.setOpacity(parseFloat(r.target.value))}
        />
      </div>
      <div slot="config-content">
        <!-- Layer configuration -->
        ${Un(this.layer.get("layerConfig"),()=>Qe`
            <eox-layercontrol-layerconfig
              slot="config-content"
              .layer=${this.layer}
              .noShadow=${!0}
              .layerConfig=${this.layer.get("layerConfig")}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layerconfig>
          `)}
      </div>
      <div slot="datetime-content">
        <!-- Layer datetime -->
        ${Un(this.layer.get("layerDatetime"),()=>Qe`
            <eox-layercontrol-layer-datetime
              slot="datetime-content"
              .noShadow=${!0}
              .layerDatetime=${this.layer.get("layerDatetime")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-datetime>
          `)}
      </div>
      <div slot="legend-content">
        <!-- Layer legend -->
        ${Un(this.layer.get("layerLegend"),()=>Qe`
            <eox-layercontrol-layer-legend
              slot="legend-content"
              .noShadow=${!0}
              .layerLegend=${this.layer.get("layerLegend")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-legend>
          `)}
      </div>
      <div slot="remove-icon">${this._removeButton()}</div>
      <div slot="sort-icon">${this._sortButton()}</div>
    `});yn(this,NT,"");yn(this,BT,`
    ${ILt}  
    ${PLt}
    ${iIe}
    ${NLt}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      height: 24px;
      cursor: pointer;
      display: var(--layer-tools-button-visibility);
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tools-items button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tools-items button.icon {
      opacity: .7;
    }
    eox-layercontrol-tools-items.tools-list button.icon {
      cursor: auto;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tools-items button.icon:hover {
      opacity: 1;
    }
    eox-layercontrol-tools-items.tools-list button.icon:hover {
      opacity: .7;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
      margin-right: var(--padding);
    }
    eox-layercontrol-tools-items button.icon,
    eox-layercontrol-tools-items .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tools-items.tools-list button.icon,
    eox-layercontrol-tools-items.tools-list .button.icon {
      margin-left: -6px;
    }
    eox-layercontrol-tools-items button.icon::before,
    eox-layercontrol-tools-items .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    details.tools summary .datetime-icon,
    button.icon[slot=datetime-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eclock-outline%3C/title%3E%3Cpath d='M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z' /%3E%3C/svg%3E");
    }
    details.tools summary .legend-icon,
    button.icon[slot=legend-icon]::before {
      content: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Ctitle%3Emap-legend%3C%2Ftitle%3E%3Cpath%20d%3D%22M9%2C3L3.36%2C4.9C3.15%2C4.97%203%2C5.15%203%2C5.38V20.5A0.5%2C0.5%200%200%2C0%203.5%2C21L3.66%2C20.97L9%2C18.9L15%2C21L20.64%2C19.1C20.85%2C19.03%2021%2C18.85%2021%2C18.62V3.5A0.5%2C0.5%200%200%2C0%2020.5%2C3L20.34%2C3.03L15%2C5.1L9%2C3M8%2C5.45V17.15L5%2C18.31V6.46L8%2C5.45M10%2C5.47L14%2C6.87V18.53L10%2C17.13V5.47M19%2C5.7V17.54L16%2C18.55V6.86L19%2C5.7M7.46%2C6.3L5.57%2C6.97V9.12L7.46%2C8.45V6.3M7.46%2C9.05L5.57%2C9.72V11.87L7.46%2C11.2V9.05M7.46%2C11.8L5.57%2C12.47V14.62L7.46%2C13.95V11.8M7.46%2C14.55L5.57%2C15.22V17.37L7.46%2C16.7V14.55Z%22%20%2F%3E%3C%2Fsvg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content],
    [slot=config-content],
    [slot=datetime-content],
    [slot=legend-content] {
      padding: 6px 0;
    }
    [slot=info-content] * {
      max-width: 100%;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const n=DLt(this.tools,this.layer),r=LLt(this.tools,this.layer),i=this[`_${n==null?void 0:n[0]}Button`]?this[`_${n==null?void 0:n[0]}Button`]():Xr,o=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",s=n==null?void 0:n.length,a=r==null?void 0:r.length;return Qe`
      <style>
        ${Gt(this,NT)}
        ${!this.unstyled&&Gt(this,BT)}
      </style>
      ${Un(s+a>0,()=>Qe`
          ${Un(s===1&&a===0,()=>Qe`
              <div class="single-action-container">
                <div class="single-action">${i}</div>
              </div>
            `,()=>Qe`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||Xr}
              >
                <summary>
                  <button class="icon ${o}">Tools</button>
                </summary>
                <eox-layercontrol-tools-items
                  class="${this.toolsAsList?"tools-list":"tools-tab"}"
                  .noShadow=${!1}
                  .actions=${n}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                  .toolsAsList=${this.toolsAsList}
                >
                  <!-- Rendering tabs and content -->
                  ${ou(r,u=>this._button(u))}
                  <!-- Including default tools -->
                  ${this._getDefaultTools()}
                </eox-layercontrol-tools-items>
              </details>
            `)}
        `)}
    `}}NT=new WeakMap,BT=new WeakMap,tn(oIe,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",oIe);const BLt=e=>{const t=()=>{const n=_Lt(e.layer,e.map,e.showLayerZoomState);let r=!1;!n&&e.currLayerVisibilityBasedOnZoom?(e.currLayerVisibilityBasedOnZoom=!1,r=!0):n&&!e.currLayerVisibilityBasedOnZoom&&(e.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(e.requestUpdate(),e.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};X$e(e.layer,e.showLayerZoomState)&&(t(),e.map.getView().on("change:resolution",()=>t()))},zLt=(e,t)=>{const n=t.layer;n.setVisible(e.target.checked),e.target.checked&&n.get("layerControlExclusive")&&t.closest(".layers > ul").querySelectorAll("eox-layercontrol-layer").forEach(i=>{var o;i.layer!==n&&((o=i.layer)!=null&&o.get("layerControlExclusive"))&&(i.layer.setVisible(!1),i.requestUpdate())}),t.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:n})),t.requestUpdate()};var vf,ib,aIe,zT,jT;class sIe extends Zr{constructor(){super();yn(this,vf);tn(this,"currLayerVisibilityBasedOnZoom",!0);yn(this,zT,"");yn(this,jT,`
    ${iIe}
    eox-layercontrol-layer {
      width: 100%;
      position: relative;
    }
    .layer input[type=checkbox],
    .layer input[type=radio] {
      display: var(--layer-input-visibility);
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: var(--padding-vertical) 0;
      display: var(--layer-visibility);
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .title {
      display: var(--layer-title-visibility);
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
      display: var(--layer-type-visibility);
    }
    [data-type] .title.color-swatch::before {
      background: var(--layer-color);
      border-radius: 3px;
      content: "" !important;
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){BLt(this)}render(){var l;const n=this.layer.getVisible(),r=n?"visible":"",i=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",o=gn(this,vf,ib).call(this,"layerControlDisable")?"disabled":"",s=gn(this,vf,ib).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return Qe`
      <style>
        ${Gt(this,zT)}
        ${!this.unstyled&&Gt(this,jT)}
      </style>
      ${Un(this.layer,()=>Qe`
          <!-- Render the layer -->
          <div class="layer ${r} ${i}">
            <label class="drag-handle ${o}">
              <!-- Input element for layer visibility -->
              <input
                type=${s}
                .checked=${J$e(n)}
                @click=${gn(this,vf,aIe)}
              />

              <!-- Layer title -->
              <span
                class="title ${gn(this,vf,ib).call(this,"color")?"color-swatch":""}"
                style="--layer-color: ${gn(this,vf,ib).call(this,"color")}"
              >
                ${gn(this,vf,ib).call(this,this.titleProperty)}
              </span>
              ${Un(a,()=>Qe`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}vf=new WeakSet,ib=function(n){var r;return(r=this.layer)==null?void 0:r.get(n)},aIe=function(n){zLt(n,this)},zT=new WeakMap,jT=new WeakMap,tn(sIe,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer",sIe);var UT,qT;class lIe extends Zr{constructor(){super();yn(this,UT,"");yn(this,qT,`
    details summary {
      cursor: pointer;
      display: var(--layer-summary-visibility);
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: var(--layer-visibility);
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var i,o;const n=!!((i=this.group)!=null&&i.get("layerControlExpand")),r=(o=K$e(this.group.getLayers()))==null?void 0:o.length;return Qe`
      <style>
        ${Gt(this,UT)}
        ${!this.unstyled&&Gt(this,qT)}
      </style>
      ${Un(this.group,()=>Qe`
          <!-- Render the details element with the layer control -->
          <details
            open=${n||Xr}
            data-children-length=${r}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                .toolsAsList=${this.toolsAsList}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              .toolsAsList=${this.toolsAsList}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}UT=new WeakMap,qT=new WeakMap,tn(lIe,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",lIe);const jLt=e=>{const{layers:t,idProperty:n,titleProperty:r,renderRoot:i}=e,o=G0(()=>{e.requestUpdate(),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),s=()=>o();if(t&&(t.hasListener("change:length")&&(t==null||t.un("change:length",s)),t.on("change:length",s),t)){const a=i.querySelector("ul");wLt(t,n,r,e),xLt(a,t,n,e)}};var HT,GT;class uIe extends Zr{constructor(){super();yn(this,HT,"");yn(this,GT,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: var(--list-padding);
    }
    li:not(li li) {
      padding-left: var(--padding);
    }
    li {
      list-style: none;
      border-bottom: 1px solid #0041703a;
      border: var(--layer-visibility);
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}firstUpdated(){jLt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.layers?K$e(this.layers).reverse():[];return Qe`
      <style>
        ${Gt(this,HT)}
        ${!this.unstyled&&Gt(this,GT)}
      </style>
      <ul>
        ${Un(this.layers,()=>Qe`
            ${u$e(n,r=>r,r=>Qe`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${ELt(r,this.map)}"
                >
                  ${r.getLayers?Qe`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:Qe`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}HT=new WeakMap,GT=new WeakMap,tn(uIe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",uIe);const ULt=e=>{const t=e.querySelector("select[name=optional]"),n=t?t.value:null,r=TB(e.layers.getArray(),"layerControlOptional",!0).find(i=>(i.get(e.idProperty)||i.ol_uid)===n);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),e.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(i=>i.requestUpdate()),e.requestUpdate()};var VT,fIe;class cIe extends Zr{constructor(){super();yn(this,VT);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=TB(this.layers.getArray(),"layerControlOptional",!0);return Qe`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${n.map(r=>{const i=r.get(this.idProperty)||r.ol_uid,o=r.get(this.titleProperty),s=`layer ${r.get(this.idProperty)}`;return Qe` <option value="${i}">${o||s}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${gn(this,VT,fIe)}">add</button>
    `}}VT=new WeakSet,fIe=function(){ULt(this)},tn(cIe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",cIe);const qLt=(e,t)=>{t.jsonInput=e.target.value,t.requestUpdate()},NEe=e=>{const t=JSON.parse(`{"data":${O$e(e.jsonInput)}}`);Array.isArray(t.data)?t.data.forEach(n=>{e.eoxMap.addOrUpdateLayer(n)}):e.eoxMap.addOrUpdateLayer(t.data),e.jsonInput=null,e.requestUpdate()},HLt=(e,t)=>{t.urlInput=e.target.value,t.requestUpdate()};async function GLt(e){const t=e.urlInput;if(e.wmsCapabilities=null,e.searchLoad=!0,e.requestUpdate(),!t)return!1;if(EB(t)==="XYZ")return{Name:t};try{const n=await qDt(t);e.wmsCapabilities=n}catch{}finally{e.searchLoad=!1,e.requestUpdate()}return!1}const VLt=(e,t)=>{const{Name:n}=e,r=EB(t.urlInput)||"XYZ",i={type:"Tile",properties:{id:n,title:n},source:{type:r,url:t.urlInput,params:{LAYERS:n}}};t.jsonInput=JSON.stringify(i)},WLt=(e,t)=>{t.open=e||null,t.urlInput=null,t.jsonInput=null,t.wmsCapabilities=null,t.requestUpdate()};var ra,hIe,pIe,O8,gIe,mIe,YC,WT,YT;class dIe extends Zr{constructor(){super();yn(this,ra);tn(this,"urlInput",null);tn(this,"jsonInput",null);tn(this,"open",null);tn(this,"searchLoad",!1);tn(this,"wmsCapabilities",null);yn(this,WT,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);yn(this,YT,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.open?"open":"close",r=this.open==="url",i=this.open==="json",o=!HDt(this.urlInput)||this.searchLoad?!0:Xr;return Qe`
      <style>
        ${Gt(this,WT)}
        ${!this.unstyled&&Gt(this,YT)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${n}">
            <li
              @click=${()=>gn(this,ra,YC).call(this,"url")}
              class="${r?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>gn(this,ra,YC).call(this,"json")}
              class="${i?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>gn(this,ra,YC).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${n}">
          ${r?Qe`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${gn(this,ra,hIe)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${o} 
                  @click=${gn(this,ra,pIe)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?Qe`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(s=>{const a=s.Name;return Qe`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>gn(this,ra,O8).call(this,s)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:Xr}
            `:Qe`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${gn(this,ra,mIe)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${GDt(this.jsonInput)?Xr:!0}
                  @click=${gn(this,ra,gIe)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}ra=new WeakSet,hIe=function(n){HLt(n,this)},pIe=async function(){const n=await GLt(this);n&&gn(this,ra,O8).call(this,n)},O8=function(n){VLt(n,this),NEe(this)},gIe=function(){NEe(this)},mIe=function(n){qLt(n,this)},YC=function(n){WLt(n,this)},WT=new WeakMap,YT=new WeakMap,tn(dIe,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",dIe);const YLt=(e,t)=>{if(t.requestUpdate(),e.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const n=t.renderRoot.querySelector("eox-layercontrol-optional-list");n==null||n.requestUpdate()}},XLt=e=>{let t;return typeof e=="string"?t=document.querySelector(e):t=e,t},BEe=e=>{const t=XLt(e.for);return t&&t.map!==e.map&&(e.map=t.map),t};var pp,P1,bIe,vIe,XT;class yIe extends Zr{constructor(){super();yn(this,P1);yn(this,pp);yn(this,XT,`
    :host, :root {
      font-family: Roboto, sans-serif;
      --padding: 0.5rem;
      --padding-vertical: .2rem;
      --list-padding: 48px;
      --layer-input-visibility: flex;
      --layer-summary-visibility: flex;
      --layer-type-visibility: block;
      --layer-title-visibility: flex;
      --layer-visibility: block;
      --layer-tools-button-visibility: flex;

      display: block;
      padding: var(--padding) 0;
      --background-color: var(--eox-background-color, transparent);
      background-color: var(--background-color, transparent);
    }
    select {
      background-color: var(--background-color);
    }
  `);this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","datetime","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride="",this.toolsAsList=!1}firstUpdated(){this.eoxMap=BEe(this)}updated(n){n.has("for")&&(this.eoxMap=BEe(this))}get eoxMap(){return Gt(this,pp)}set eoxMap(n){const r=Gt(this,pp);ao(this,pp,n),this.requestUpdate("eoxMap",r)}render(){var i,o,s;const n=(i=this.map)==null?void 0:i.getLayers().getArray(),r=n&&((o=TB(n,"layerControlOptional",!0))==null?void 0:o.length)>0;return Qe`
      <style>
        ${!this.unstyled&&Gt(this,XT)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${Un(this.addExternalLayers&&((s=Gt(this,pp))==null?void 0:s.addOrUpdateLayer),()=>Qe`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${Gt(this,pp)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${Un(this.map,()=>Qe`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
            @changed=${gn(this,P1,bIe)}
            @datetime:updated=${gn(this,P1,vIe)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${Un(r,()=>Qe`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}pp=new WeakMap,P1=new WeakSet,bIe=function(n){YLt(n,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:n.detail}))},vIe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{detail:n.detail}))},XT=new WeakMap,tn(yIe,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol",yIe);class ZLt extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(12, 1fr);
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}class KLt extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          overflow: hidden;

          grid-column: ${parseInt(this.getAttribute("x"))+1} / span ${this.getAttribute("w")};
          grid-row: ${parseInt(this.getAttribute("y"))+1} / span ${this.getAttribute("h")};
        }
      </style>
      <slot></slot>
    `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}customElements.define("eox-layout",ZLt);customElements.define("eox-layout-item",KLt);window.eoxMapAdvancedOlFormats=zWe;var Ya=(e,t,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(u){i(u)}},s=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(e,t)).next())}),Zl=Uint8Array,I2=Uint16Array,JLt=Int32Array,xIe=new Zl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wIe=new Zl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),QLt=new Zl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_Ie=function(e,t){for(var n=new I2(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new JLt(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},EIe=_Ie(xIe,2),SIe=EIe.b,eRt=EIe.r;SIe[28]=258,eRt[258]=28;var tRt=_Ie(wIe,0),nRt=tRt.b,AIe=new I2(32768);for(mi=0;mi<32768;++mi)Cd=(mi&43690)>>1|(mi&21845)<<1,Cd=(Cd&52428)>>2|(Cd&13107)<<2,Cd=(Cd&61680)>>4|(Cd&3855)<<4,AIe[mi]=((Cd&65280)>>8|(Cd&255)<<8)>>1;var Cd,mi,P2=function(e,t,n){for(var r=e.length,i=0,o=new I2(t);i<r;++i)e[i]&&++o[e[i]-1];var s=new I2(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;var a;{a=new I2(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],f=t-e[i],c=s[e[i]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)a[AIe[c]>>l]=u}return a},rS=new Zl(288);for(mi=0;mi<144;++mi)rS[mi]=8;var mi;for(mi=144;mi<256;++mi)rS[mi]=9;var mi;for(mi=256;mi<280;++mi)rS[mi]=7;var mi;for(mi=280;mi<288;++mi)rS[mi]=8;var mi,CIe=new Zl(32);for(mi=0;mi<32;++mi)CIe[mi]=5;var mi,rRt=P2(rS,9),iRt=P2(CIe,5),s5=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ic=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},a5=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},oRt=function(e){return(e+7)/8|0},sRt=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new Zl(n-t);return r.set(e.subarray(t,n)),r},aRt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vl=function(e,t,n){var r=new Error(t||aRt[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Vl),!n)throw r;return r},LB=function(e,t,n,r){var i=e.length,o=0;if(!i||t.f&&!t.l)return n||new Zl(0);var s=!n||t.i!=2,a=t.i;n||(n=new Zl(i*3));var l=function(Ie){var qe=n.length;if(Ie>qe){var Pe=new Zl(Math.max(qe*2,Ie));Pe.set(n),n=Pe}},u=t.f||0,f=t.p||0,c=t.b||0,d=t.l,h=t.d,p=t.m,m=t.n,b=i*8;do{if(!d){u=ic(e,f,1);var y=ic(e,f+1,3);if(f+=3,y)if(y==1)d=rRt,h=iRt,p=9,m=5;else if(y==2){var A=ic(e,f,31)+257,T=ic(e,f+10,15)+4,D=A+ic(e,f+5,31)+1;f+=14;for(var k=new Zl(D),R=new Zl(19),M=0;M<T;++M)R[QLt[M]]=ic(e,f+M*3,7);f+=T*3;for(var B=s5(R),K=(1<<B)-1,L=P2(R,B),M=0;M<D;){var $=L[ic(e,f,K)];f+=$&15;var v=$>>4;if(v<16)k[M++]=v;else{var I=0,U=0;for(v==16?(U=3+ic(e,f,3),f+=2,I=k[M-1]):v==17?(U=3+ic(e,f,7),f+=3):v==18&&(U=11+ic(e,f,127),f+=7);U--;)k[M++]=I}}var q=k.subarray(0,A),Y=k.subarray(A);p=s5(q),m=s5(Y),d=P2(q,p),h=P2(Y,m)}else Vl(1);else{var v=oRt(f)+4,w=e[v-4]|e[v-3]<<8,E=v+w;if(E>i){a&&Vl(0);break}s&&l(c+w),n.set(e.subarray(v,E),c),t.b=c+=w,t.p=f=E*8,t.f=u;continue}if(f>b){a&&Vl(0);break}}s&&l(c+131072);for(var X=(1<<p)-1,te=(1<<m)-1,le=f;;le=f){var I=d[a5(e,f)&X],ee=I>>4;if(f+=I&15,f>b){a&&Vl(0);break}if(I||Vl(2),ee<256)n[c++]=ee;else if(ee==256){le=f,d=null;break}else{var z=ee-254;if(ee>264){var M=ee-257,he=xIe[M];z=ic(e,f,(1<<he)-1)+SIe[M],f+=he}var de=h[a5(e,f)&te],ze=de>>4;de||Vl(3),f+=de&15;var Y=nRt[ze];if(ze>3){var he=wIe[ze];Y+=a5(e,f)&(1<<he)-1,f+=he}if(f>b){a&&Vl(0);break}s&&l(c+131072);var He=c+z;if(c<Y){var je=o-Y,we=Math.min(Y,He);for(je+c<0&&Vl(3);c<we;++c)n[c]=r[je+c]}for(;c<He;c+=4)n[c]=n[c-Y],n[c+1]=n[c+1-Y],n[c+2]=n[c+2-Y],n[c+3]=n[c+3-Y];c=He}}t.l=d,t.p=le,t.b=c,t.f=u,d&&(u=1,t.m=p,t.d=h,t.n=m)}while(!u);return c==n.length?n:sRt(n,0,c)},lRt=new Zl(0),uRt=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Vl(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},cRt=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},fRt=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Vl(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Vl(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function dRt(e,t){return LB(e,{i:2},t,t)}function hRt(e,t){var n=uRt(e);return n+8>e.length&&Vl(6,"invalid gzip data"),LB(e.subarray(n,-8),{i:2},new Zl(cRt(e)),t)}function pRt(e,t){return LB(e.subarray(fRt(e,t),-4),{i:2},t,t)}function $8(e,t){return e[0]==31&&e[1]==139&&e[2]==8?hRt(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?dRt(e,t):pRt(e,t)}var gRt=typeof TextDecoder<"u"&&new TextDecoder,mRt=0;try{gRt.decode(lRt,{stream:!0}),mRt=1}catch{}var kIe=(e,t)=>e*Math.pow(2,t),Tw=(e,t)=>Math.floor(e/Math.pow(2,t)),lT=(e,t)=>kIe(e.getUint16(t+1,!0),8)+e.getUint8(t),TIe=(e,t)=>kIe(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),yRt=(e,t,n,r,i)=>{if(e!=r.getUint8(i))return e-r.getUint8(i);const o=lT(r,i+1);if(t!=o)return t-o;const s=lT(r,i+4);return n!=s?n-s:0},bRt=(e,t,n,r)=>{const i=DIe(e,t|128,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!0}:null},zEe=(e,t,n,r)=>{const i=DIe(e,t,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!1}:null},DIe=(e,t,n,r)=>{let i=0,o=e.byteLength/17-1;for(;i<=o;){const s=o+i>>1,a=yRt(t,n,r,e,s*17);if(a>0)i=s+1;else if(a<0)o=s-1;else return[TIe(e,s*17+7),e.getUint32(s*17+13,!0)]}return null},vRt=(e,t)=>e.is_dir&&!t.is_dir?1:!e.is_dir&&t.is_dir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,LIe=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:lT(e,t*17+1),y:lT(e,t*17+4),offset:TIe(e,t*17+7),length:e.getUint32(t*17+13,!0),is_dir:n>>7===1}},jEe=e=>{const t=[],n=new DataView(e);for(let r=0;r<n.byteLength/17;r++)t.push(LIe(n,r));return xRt(t)},xRt=e=>{e.sort(vRt);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++){const i=e[r];let o=i.z;i.is_dir&&(o=o|128),n[r*17]=o,n[r*17+1]=i.x&255,n[r*17+2]=i.x>>8&255,n[r*17+3]=i.x>>16&255,n[r*17+4]=i.y&255,n[r*17+5]=i.y>>8&255,n[r*17+6]=i.y>>16&255,n[r*17+7]=i.offset&255,n[r*17+8]=Tw(i.offset,8)&255,n[r*17+9]=Tw(i.offset,16)&255,n[r*17+10]=Tw(i.offset,24)&255,n[r*17+11]=Tw(i.offset,32)&255,n[r*17+12]=Tw(i.offset,48)&255,n[r*17+13]=i.length&255,n[r*17+14]=i.length>>8&255,n[r*17+15]=i.length>>16&255,n[r*17+16]=i.length>>24&255}return t},wRt=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,r=LIe(e,n-1);if(r.is_dir){const i=r.z,o=t.z-i,s=Math.trunc(t.x/(1<<o)),a=Math.trunc(t.y/(1<<o));return{z:i,x:s,y:a}}return null};function _Rt(e){return Ya(this,null,function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),r=n.getUint32(4,!0),i=n.getUint16(8,!0),o=new TextDecoder("utf-8"),s=JSON.parse(o.decode(new DataView(t.data,10,r)));let a=0;s.compression==="gzip"&&(a=2);let l=0;"minzoom"in s&&(l=+s.minzoom);let u=0;"maxzoom"in s&&(u=+s.maxzoom);let f=0,c=0,d=0,h=-180,p=-85,m=180,b=85;if(s.bounds){const v=s.bounds.split(",");h=+v[0],p=+v[1],m=+v[2],b=+v[3]}if(s.center){const v=s.center.split(",");f=+v[0],c=+v[1],d=+v[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:h,minLat:p,maxLon:m,maxLat:b,centerZoom:d,centerLon:f,centerLat:c,etag:t.etag}})}function ERt(e,t,n,r,i,o,s){return Ya(this,null,function*(){let a=yield n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(a=jEe(a));const l=zEe(new DataView(a),r,i,o);if(l){let c=(yield t.getBytes(l.offset,l.length,s)).data;const d=new DataView(c);return d.getUint8(0)==31&&d.getUint8(1)==139&&(c=$8(new Uint8Array(c))),{data:c}}const u=wRt(new DataView(a),{z:r,x:i,y:o});if(u){const f=bRt(new DataView(a),u.z,u.x,u.y);if(f){let c=yield n.getArrayBuffer(t,f.offset,f.length,e);e.specVersion===1&&(c=jEe(c));const d=zEe(new DataView(c),r,i,o);if(d){let p=(yield t.getBytes(d.offset,d.length,s)).data;const m=new DataView(p);return m.getUint8(0)==31&&m.getUint8(1)==139&&(p=$8(new Uint8Array(p))),{data:p}}}}})}var RIe={getHeader:_Rt,getZxy:ERt};function Yy(e,t){return(t>>>0)*4294967296+(e>>>0)}function SRt(e,t){const n=t.buf;let r,i;if(i=n[t.pos++],r=(i&112)>>4,i<128||(i=n[t.pos++],r|=(i&127)<<3,i<128)||(i=n[t.pos++],r|=(i&127)<<10,i<128)||(i=n[t.pos++],r|=(i&127)<<17,i<128)||(i=n[t.pos++],r|=(i&127)<<24,i<128)||(i=n[t.pos++],r|=(i&1)<<31,i<128))return Yy(e,r);throw new Error("Expected varint not more than 10 bytes")}function Dw(e){const t=e.buf;let n,r;return r=t[e.pos++],n=r&127,r<128||(r=t[e.pos++],n|=(r&127)<<7,r<128)||(r=t[e.pos++],n|=(r&127)<<14,r<128)||(r=t[e.pos++],n|=(r&127)<<21,r<128)?n:(r=t[e.pos],n|=(r&15)<<28,SRt(n,e))}function ARt(e,t,n,r){if(r==0){n==1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const i=t[0];t[0]=t[1],t[1]=i}}var CRt=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function kRt(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,e)-1||n>Math.pow(2,e)-1)throw Error("tile x/y outside zoom level bounds");const r=CRt[e],i=Math.pow(2,e);let o=0,s=0,a=0;const l=[t,n];let u=i/2;for(;u>0;)o=(l[0]&u)>0?1:0,s=(l[1]&u)>0?1:0,a+=u*u*(3*o^s),ARt(u,l,o,s),u=u/2;return r+a}function FIe(e,t){return Ya(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return $8(new Uint8Array(e));{let r=new Response(e).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var ob=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(ob||{}),TRt=127;function DRt(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=r+n>>1,o=t-e[i].tileId;if(o>0)n=i+1;else if(o<0)r=i-1;else return e[i]}return r>=0&&(e[r].runLength===0||t-e[r].tileId<e[r].runLength)?e[r]:null}var LRt=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n){return Ya(this,null,function*(){let r;n||(r=new AbortController,n=r.signal);const i=new Headers(this.customHeaders);i.set("Range","bytes="+e+"-"+(e+t-1));let o=yield fetch(this.url,{signal:n,headers:i});if(o.status===416&&e===0){const l=o.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const u=+l.substr(8);o=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(u-1)}})}if(o.status>=300)throw Error("Bad response code: "+o.status);const s=o.headers.get("Content-Length");if(o.status===200&&(!s||+s>t))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield o.arrayBuffer(),etag:o.headers.get("ETag")||void 0,cacheControl:o.headers.get("Cache-Control")||void 0,expires:o.headers.get("Expires")||void 0}})}};function oc(e,t){const n=e.getUint32(t+4,!0),r=e.getUint32(t+0,!0);return n*Math.pow(2,32)+r}function RRt(e,t){const n=new DataView(e),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:oc(n,8),rootDirectoryLength:oc(n,16),jsonMetadataOffset:oc(n,24),jsonMetadataLength:oc(n,32),leafDirectoryOffset:oc(n,40),leafDirectoryLength:oc(n,48),tileDataOffset:oc(n,56),tileDataLength:oc(n,64),numAddressedTiles:oc(n,72),numTileEntries:oc(n,80),numTileContents:oc(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function MIe(e){const t={buf:new Uint8Array(e),pos:0},n=Dw(t),r=[];let i=0;for(let o=0;o<n;o++){const s=Dw(t);r.push({tileId:i+s,offset:0,length:0,runLength:1}),i+=s}for(let o=0;o<n;o++)r[o].runLength=Dw(t);for(let o=0;o<n;o++)r[o].length=Dw(t);for(let o=0;o<n;o++){const s=Dw(t);s===0&&o>0?r[o].offset=r[o-1].offset+r[o-1].length:r[o].offset=s-1}return r}function FRt(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var xb=class extends Error{};function MRt(e,t,n,r){return Ya(this,null,function*(){const i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(FRt(i.data)<3)return[yield RIe.getHeader(e)];const s=i.data.slice(0,TRt);let a=i.etag;r&&i.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),a=void 0);const l=RRt(s,a);if(n){const u=i.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),f=e.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,c=MIe(yield t(u,l.internalCompression));return[l,[f,c.length,c]]}return[l,void 0]})}function ORt(e,t,n,r,i){return Ya(this,null,function*(){const o=yield e.getBytes(n,r);if(i.etag&&i.etag!==o.etag)throw new xb(o.etag);const s=yield t(o.data,i.internalCompression),a=MIe(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var $Rt=class{constructor(e=100,t=!0,n=FIe){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.prefetch=t,this.decompress=n}getHeader(e,t){return Ya(this,null,function*(){const n=e.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const r=new Promise((i,o)=>{MRt(e,this.decompress,this.prefetch,t).then(s=>{s[1]&&this.cache.set(s[1][0],{lastUsed:this.counter++,data:Promise.resolve(s[1][2])}),i(s[0]),this.prune()}).catch(s=>{o(s)})});return this.cache.set(n,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,n,r){return Ya(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const o=new Promise((s,a)=>{ORt(e,this.decompress,t,n,r).then(l=>{s(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:o}),o})}getArrayBuffer(e,t,n,r){return Ya(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const o=new Promise((s,a)=>{e.getBytes(t,n).then(l=>{if(r.etag&&r.etag!==l.etag)throw new xb(l.etag);s(l.data),this.cache.has(i),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,r)=>{n.lastUsed<e&&(e=n.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e,t){return Ya(this,null,function*(){this.cache.delete(e.getKey()),yield this.getHeader(e,t)})}},RB=class{constructor(e,t,n){typeof e=="string"?this.source=new LRt(e):this.source=e,n?this.decompress=n:this.decompress=FIe,t?this.cache=t:this.cache=new $Rt}getHeader(){return Ya(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,n,r){return Ya(this,null,function*(){const i=kRt(e,t,n),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return RIe.getZxy(o,this.source,this.cache,e,t,n,r);if(e<o.minZoom||e>o.maxZoom)return;let s=o.rootDirectoryOffset,a=o.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,s,a,o),f=DRt(u,i);if(f)if(f.runLength>0){const c=yield this.source.getBytes(o.tileDataOffset+f.offset,f.length,r);if(o.etag&&o.etag!==c.etag)throw new xb(c.etag);return{data:yield this.decompress(c.data,o.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else s=o.leafDirectoryOffset+f.offset,a=f.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,n,r){return Ya(this,null,function*(){try{return yield this.getZxyAttempt(e,t,n,r)}catch(i){if(i instanceof xb)return this.cache.invalidate(this.source,i.message),yield this.getZxyAttempt(e,t,n,r);throw i}})}getMetadataAttempt(){return Ya(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength);if(e.etag&&e.etag!==t.etag)throw new xb(t.etag);const n=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))})}getMetadata(){return Ya(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof xb)return this.cache.invalidate(this.source,e.message),yield this.getMetadataAttempt();throw e}})}};class IRt extends NCe{constructor(t){super(kl.ERROR),this.error=t}}class ro{constructor(t){this.name=t}toString(){return this.name}}ro.GeoTIFF=new ro("GeoTIFF");ro.ImageStatic=new ro("ImageStatic");ro.PMTilesRaster=new ro("PMTilesRaster");ro.PMTilesVector=new ro("PMTilesVector");ro.TileJSON=new ro("TileJSON");ro.TileWMS=new ro("TileWMS");ro.WMTS=new ro("WMTS");ro.XYZ=new ro("XYZ");var XC={exports:{}},PRt=XC.exports,UEe;function NRt(){return UEe||(UEe=1,function(e,t){(function(n,r){e.exports=r()})(PRt,function(){var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(c,d){return c.indexOf(d)===-1?c.length:c.indexOf(d)}function i(c){var d=c.replace(/^v/,"").replace(/\+.*$/,""),h=r(d,"-"),p=d.substring(0,h).split(".");return p.push(d.substring(h+1)),p}function o(c){return isNaN(Number(c))?c:Number(c)}function s(c){if(typeof c!="string")throw new TypeError("Invalid argument expected string");if(!n.test(c))throw new Error("Invalid argument not valid semver ('"+c+"' received)")}function a(c,d){[c,d].forEach(s);for(var h=i(c),p=i(d),m=0;m<Math.max(h.length-1,p.length-1);m++){var b=parseInt(h[m]||0,10),y=parseInt(p[m]||0,10);if(b>y)return 1;if(y>b)return-1}var v=h[h.length-1],w=p[p.length-1];if(v&&w){var E=v.split(".").map(o),A=w.split(".").map(o);for(m=0;m<Math.max(E.length,A.length);m++){if(E[m]===void 0||typeof A[m]=="string"&&typeof E[m]=="number")return-1;if(A[m]===void 0||typeof E[m]=="string"&&typeof A[m]=="number"||E[m]>A[m])return 1;if(A[m]>E[m])return-1}}else if(v||w)return v?-1:1;return 0}var l=[">",">=","=","<","<="],u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function f(c){if(typeof c!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof c);if(l.indexOf(c)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(c){return typeof c=="string"&&n.test(c)},a.compare=function(c,d,h){f(h);var p=a(c,d);return u[h].indexOf(p)>-1},a})}(XC)),XC.exports}var l5,qEe;function BRt(){if(qEe)return l5;qEe=1;var e=NRt();const t="1.0.0",n=!0,r={classification:"https://stac-extensions.github.io/classification/v1.1.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.1.0/schema.json",eo:"https://stac-extensions.github.io/eo/v1.0.0/schema.json",file:"https://stac-extensions.github.io/file/v1.0.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.1.0/schema.json",projection:"https://stac-extensions.github.io/projection/v1.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v1.1.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.0.0/schema.json",version:"https://stac-extensions.github.io/version/v1.0.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},i={itemAndCollection:{"cube:":r.datacube,"eo:":r.eo,"file:":r.file,"label:":r.label,"pc:":r.pointcloud,"processing:":r.processing,"proj:":r.projection,"raster:":r.raster,"sar:":r.sar,"sat:":r.sat,"sci:":r.scientific,"view:":r.view,version:r.version,deprecated:r.version,published:r.timestamps,expires:r.timestamps,unpublished:r.timestamps},catalog:{},collection:{item_assets:r["item-assets"]},item:{}};i.collection=Object.assign(i.collection,i.itemAndCollection),i.item=Object.assign(i.item,i.itemAndCollection);var o={parseUrl(y){let v=y.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(v)return{id:v[1],version:v[2]}}},s={version:t,extensions:{},set(y){if(typeof y.stac_version!="string"?s.version="0.6.0":s.version=y.stac_version,Array.isArray(y.stac_extensions))for(let v of y.stac_extensions){let w=o.parseUrl(v);w&&(s.extensions[w.id]=w.version)}},before(y,v=null){let w=v?s.extensions[v]:s.version;return typeof w>"u"?!1:e.compare(w,y,"<")}},a={type(y){let v=typeof y;if(v==="object"){if(y===null)return"null";if(Array.isArray(y))return"array"}return v},is(y,v){return a.type(y)===v},isDefined(y){return typeof y<"u"},isObject(y){return typeof y=="object"&&y===Object(y)&&!Array.isArray(y)},rename(y,v,w){return typeof y[v]<"u"&&typeof y[w]>"u"?(y[w]=y[v],delete y[v],!0):!1},forAll(y,v,w){if(y[v]&&typeof y[v]=="object")for(let E in y[v])w(y[v][E])},toArray(y,v){return typeof y[v]<"u"&&!Array.isArray(y[v])?(y[v]=[y[v]],!0):!1},flattenArray(y,v,w,E=!1){if(Array.isArray(y[v])){for(let A in y[v])if(typeof w[A]=="string"){let T=y[v][A];y[w[A]]=E?[T]:T}return delete y[v],!0}return!1},flattenOneElementArray(y,v,w=!1){return!w&&Array.isArray(y[v])?y[v].length===1?(y[v]=y[v][0],!0):!1:!0},removeFromArray(y,v,w){if(Array.isArray(y[v])){let E=y[v].indexOf(w);return E>-1&&y[v].splice(E,1),!0}return!1},ensure(y,v,w){return a.type(w)!==a.type(y[v])&&(y[v]=w),!0},upgradeExtension(y,v){let{id:w,version:E}=o.parseUrl(v),A=y.stac_extensions.findIndex(T=>{let D=o.parseUrl(T);return D&&D.id===w&&e.compare(D.version,E,"<")});return A!==-1?(y.stac_extensions[A]=v,!0):!1},addExtension(y,v){let{id:w,version:E}=o.parseUrl(v),A=y.stac_extensions.findIndex(T=>{if(T===v)return!0;let D=o.parseUrl(T);return!!(D&&D.id===w&&e.compare(D.version,E,"<"))});return A===-1?y.stac_extensions.push(v):y.stac_extensions[A]=v,y.stac_extensions.sort(),!0},removeExtension(y,v){return a.removeFromArray(y,"stac_extensions",v)},migrateExtensionShortnames(y){let v=Object.keys(r),w=Object.values(r);return a.mapValues(y,"stac_extensions",v,w)},populateExtensions(y,v){let w=[];(v=="catalog"||v=="collection")&&w.push(y),(v=="item"||v=="collection")&&a.isObject(y.assets)&&(w=w.concat(Object.values(y.assets))),v=="collection"&&a.isObject(y.item_assets)&&(w=w.concat(Object.values(y.item_assets))),v=="collection"&&a.isObject(y.summaries)&&w.push(y.summaries),v=="item"&&a.isObject(y.properties)&&w.push(y.properties);for(let E of w)Object.keys(E).forEach(A=>{let T=A.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(T)){let D=i[v][T[0]];a.is(D,"string")&&a.addExtension(y,D)}})},mapValues(y,v,w,E){let A=T=>{let D=w.indexOf(T);return D>=0?E[D]:T};return Array.isArray(y[v])?y[v]=y[v].map(A):typeof y[v]<"u"&&(y[v]=A(y[v])),!0},mapObject(y,v){for(let w in y)y[w]=v(y[w],w)},moveTo(y,v,w,E=!1,A=!1){let T;return E?A?T=D=>Array.isArray(D):T=D=>Array.isArray(D)&&D.length===1:T=a.isDefined,T(y[v])?(w[v]=E&&!A?y[v][0]:y[v],delete y[v],!0):!1},runAll(y,v,w,E){for(let A in y)A.startsWith("migrate")||y[A](v,w,E)},toUTC(y,v){if(typeof y[v]=="string")try{return y[v]=this.toISOString(y[v]),!0}catch{}return delete y[v],!1},toISOString(y){return y instanceof Date||(y=new Date(y)),y.toISOString().replace(".000","")}},l={multihash:null,hexToUint8(y){if(y.length===0||y.length%2!==0)throw new Error(`The string "${y}" is not valid hex.`);return new Uint8Array(y.match(/.{1,2}/g).map(v=>parseInt(v,16)))},uint8ToHex(y){return y.reduce((v,w)=>v+w.toString(16).padStart(2,"0"),"")},toMultihash(y,v,w){if(!l.multihash||!a.is(y[v],"string"))return!1;try{const E=l.multihash.encode(l.hexToUint8(y[v]),w);return y[v]=l.uint8ToHex(E),!0}catch(E){return console.warn(E),!1}}},u={migrate(y,v=!0){return s.set(y),v&&(y.stac_version=t),y.type="Catalog",a.ensure(y,"stac_extensions",[]),s.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"description",""),a.ensure(y,"links",[]),a.runAll(u,y,y),s.before("0.8.0")&&a.populateExtensions(y,"catalog"),y}},f={migrate(y,v=!0){return u.migrate(y,v),y.type="Collection",s.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"license","proprietary"),a.ensure(y,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),a.runAll(f,y,y),a.isObject(y.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),delete y.properties),s.before("0.8.0")&&a.populateExtensions(y,"collection"),s.before("1.0.0-beta.1")&&a.mapValues(y,"stac_extensions",["assets"],["item-assets"]),y},extent(y){if(a.ensure(y,"extent",{}),s.before("0.8.0")&&(Array.isArray(y.extent.spatial)&&(y.extent.spatial={bbox:[y.extent.spatial]}),Array.isArray(y.extent.temporal)&&(y.extent.temporal={interval:[y.extent.temporal]})),a.ensure(y.extent,"spatial",{}),a.ensure(y.extent.spatial,"bbox",[]),a.ensure(y.extent,"temporal",{}),a.ensure(y.extent.temporal,"interval",[]),s.before("1.0.0-rc.3")){if(y.extent.temporal.interval.length>1){let v,w;for(let E of y.extent.temporal.interval){if(E[0]===null)v=null;else if(typeof E[0]=="string"&&v!==null)try{let A=new Date(E[0]);(typeof v>"u"||A<v)&&(v=A)}catch{}if(E[1]===null)w=null;else if(typeof E[1]=="string"&&w!==null)try{let A=new Date(E[1]);(typeof w>"u"||A>w)&&(w=A)}catch{}}y.extent.temporal.interval.unshift([v?a.toISOString(v):null,w?a.toISOString(w):null])}if(y.extent.spatial.bbox.length>1){let v=y.extent.spatial.bbox.reduce((w,E)=>Array.isArray(E)?Math.max(E.length,w):w,4);if(v>=4){let w=new Array(v).fill(null),E=v/2;for(let A of y.extent.spatial.bbox){if(!Array.isArray(A)||A.length<4)break;for(let T in A){let D=A[T];w[T]===null?w[T]=D:T<E?w[T]=Math.min(D,w[T]):w[T]=Math.max(D,w[T])}}w.findIndex(A=>A===null)===-1&&y.extent.spatial.bbox.unshift(w)}}}},collectionAssets(y){s.before("1.0.0-rc.1")&&a.removeExtension(y,"collection-assets"),p.migrateAll(y)},itemAsset(y){s.before("1.0.0-beta.2")&&a.rename(y,"item_assets","assets"),p.migrateAll(y,"item_assets")},summaries(y){if(a.ensure(y,"summaries",{}),s.before("0.8.0")&&a.isObject(y.other_properties)){for(let v in y.other_properties){let w=y.other_properties[v];Array.isArray(w.extent)&&w.extent.length===2?y.summaries[v]={minimum:w.extent[0],maximum:w.extent[1]}:Array.isArray(w.values)&&(w.values.filter(E=>Array.isArray(E)).length===w.values.length?y.summaries[v]=w.values.reduce((E,A)=>E.concat(A),[]):y.summaries[v]=w.values)}delete y.other_properties}if(s.before("1.0.0-beta.1")&&a.isObject(y.properties)&&!y.links.find(v=>["child","item"].includes(v.rel)))for(let v in y.properties){let w=y.properties[v];Array.isArray(w)||(w=[w]),y.summaries[v]=w}s.before("1.0.0-rc.1")&&a.mapObject(y.summaries,v=>(a.rename(v,"min","minimum"),a.rename(v,"max","maximum"),v)),m.migrate(y.summaries,y,!0),a.moveTo(y.summaries,"sci:doi",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:publications",y,!0,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:citation",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"cube:dimensions",y,!0)&&a.addExtension(y,r.datacube),Object.keys(y.summaries).length===0&&delete y.summaries}},c={migrate(y,v=null,w=!0){s.set(y),w&&(y.stac_version=t),a.ensure(y,"stac_extensions",[]),s.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"type","Feature"),a.isObject(y.geometry)||(y.geometry=null),y.geometry!==null&&a.ensure(y,"bbox",[]),a.ensure(y,"properties",{}),a.ensure(y,"links",[]),a.ensure(y,"assets",{});let E=!1;return a.isObject(v)&&a.isObject(v.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),y.properties=Object.assign({},v.properties,y.properties),E=!0),a.runAll(c,y,y),m.migrate(y.properties,y),p.migrateAll(y),(s.before("0.8.0")||E)&&a.populateExtensions(y,"item"),y}},d={migrate(y,v=!0){return a.ensure(y,"collections",[]),a.ensure(y,"links",[]),a.runAll(d,y,y),y.collections=y.collections.map(w=>f.migrate(w,v)),y}},h={migrate(y,v=!0){return a.ensure(y,"type","FeatureCollection"),a.ensure(y,"features",[]),a.ensure(y,"links",[]),a.runAll(h,y,y),y.features=y.features.map(w=>c.migrate(w,null,v)),y}},p={migrateAll(y,v="assets"){for(let w in y[v])p.migrate(y[v][w],y)},migrate(y,v){return a.runAll(p,y,v),m.migrate(y,v),y},mediaTypes(y){a.is(y.type,"string")&&a.mapValues(y,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])},eo(y,v){let w=a.isObject(v.properties)&&Array.isArray(v.properties["eo:bands"])?v.properties["eo:bands"]:[];if(Array.isArray(y["eo:bands"]))for(let E in y["eo:bands"]){let A=y["eo:bands"][E];a.is(A,"number")&&a.isObject(w[A])?A=w[A]:a.isObject(A)||(A={}),y["eo:bands"][E]=A}}},m={migrate(y,v,w=!1){return a.runAll(m,y,v,w),y},_commonMetadata(y){s.before("1.0.0-rc.3")&&(a.toUTC(y,"created"),a.toUTC(y,"updated"))},_timestamps(y,v){a.toUTC(y,"published"),a.toUTC(y,"expires"),a.toUTC(y,"unpublished"),a.upgradeExtension(v,r.timestamps)},_versioningIndicator(y,v){a.upgradeExtension(v,r.version)},checksum(y,v){s.before("0.9.0")&&l.multihash&&(a.rename(y,"checksum:md5","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","md5"),a.rename(y,"checksum:sha1","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha1"),a.rename(y,"checksum:sha2","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha2-256"),a.rename(y,"checksum:sha3","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha3-256")),s.before("1.0.0-rc.1")&&a.rename(y,"checksum:multihash","file:checksum")&&a.addExtension(v,r.file),a.removeExtension(v,"checksum")},classification(y,v){s.before("1.1.0","classification")&&a.forAll(y,"classification:classes",w=>a.rename(w,"color-hint","color_hint")),a.upgradeExtension(v,r.classification)},cube(y,v){a.upgradeExtension(v,r.datacube)},dtr(y,v){s.before("0.9.0")&&(a.rename(y,"dtr:start_datetime","start_datetime"),a.rename(y,"dtr:end_datetime","end_datetime"),a.removeExtension(v,"datetime-range"))},eo(y,v){s.before("0.9.0")&&(a.rename(y,"eo:epsg","proj:epsg")&&a.addExtension(v,r.projection),a.rename(y,"eo:platform","platform"),a.rename(y,"eo:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"eo:constellation","constellation"),a.rename(y,"eo:off_nadir","view:off_nadir")&&a.addExtension(v,r.view),a.rename(y,"eo:azimuth","view:azimuth")&&a.addExtension(v,r.view),a.rename(y,"eo:incidence_angle","view:incidence_angle")&&a.addExtension(v,r.view),a.rename(y,"eo:sun_azimuth","view:sun_azimuth")&&a.addExtension(v,r.view),a.rename(y,"eo:sun_elevation","view:sun_elevation")&&a.addExtension(v,r.view)),s.before("1.0.0-beta.1")&&a.rename(y,"eo:gsd","gsd"),a.upgradeExtension(v,r.eo)},file(y,v){a.upgradeExtension(v,r.file)},label(y,v){s.before("0.8.0")&&(a.rename(y,"label:property","label:properties"),a.rename(y,"label:task","label:tasks"),a.rename(y,"label:overview","label:overviews")&&a.toArray(y,"label:overviews"),a.rename(y,"label:method","label:methods"),a.toArray(y,"label:classes")),a.upgradeExtension(v,r.label)},pc(y,v){s.before("0.8.0")&&a.rename(y,"pc:schema","pc:schemas"),a.upgradeExtension(v,r.pointcloud)},processing(y,v){a.upgradeExtension(v,r.processing)},proj(y,v){a.upgradeExtension(v,r.projection)},raster(y,v){a.upgradeExtension(v,r.raster)},sar(y,v,w){a.rename(y,"sar:incidence_angle","view:incidence_angle")&&a.addExtension(v,r.view),a.rename(y,"sar:pass_direction","sat:orbit_state")&&a.mapValues(y,"sat:orbit_state",[null],["geostationary"])&&a.addExtension(v,r.sat),s.before("0.7.0")&&(a.flattenArray(y,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],w),a.flattenArray(y,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],w),a.flattenArray(y,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],w),a.rename(y,"sar:off_nadir","view:off_nadir")&&a.addExtension(v,r.view)),s.before("0.9.0")&&(a.rename(y,"sar:platform","platform"),a.rename(y,"sar:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"sar:constellation","constellation"),a.rename(y,"sar:type","sar:product_type"),a.rename(y,"sar:polarization","sar:polarizations"),a.flattenOneElementArray(y,"sar:absolute_orbit",w)&&a.rename(y,"sar:absolute_orbit","sat:absolute_orbit")&&a.addExtension(v,r.sat),a.flattenOneElementArray(y,"sar:relative_orbit",w)&&a.rename(y,"sar:relative_orbit","sat:relative_orbit")&&a.addExtension(v,r.sat)),a.upgradeExtension(v,r.sar)},sat(y,v){s.before("0.9.0")&&(a.rename(y,"sat:off_nadir_angle","sat:off_nadir"),a.rename(y,"sat:azimuth_angle","sat:azimuth"),a.rename(y,"sat:sun_azimuth_angle","sat:sun_azimuth"),a.rename(y,"sat:sun_elevation_angle","sat:sun_elevation")),a.upgradeExtension(v,r.sat)},sci(y,v){a.upgradeExtension(v,r.scientific)},item(y){s.before("0.8.0")&&(a.rename(y,"item:license","license"),a.rename(y,"item:providers","providers"))},table(y,v){a.upgradeExtension(v,r.table)},view(y,v){a.upgradeExtension(v,r.view)}},b={item(y,v=null,w=!0){return c.migrate(y,v,w)},catalog(y,v=!0){return u.migrate(y,v)},collection(y,v=!0){return f.migrate(y,v)},collectionCollection(y,v=!0){return d.migrate(y,v)},itemCollection(y,v=!0){return h.migrate(y,v)},stac(y,v=!0){return y.type==="Feature"?b.item(y,null,v):y.type==="FeatureCollection"?b.itemCollection(y,v):y.type==="Collection"||!y.type&&a.isDefined(y.extent)&&a.isDefined(y.license)?b.collection(y,v):!y.type&&Array.isArray(y.collections)?b.collectionCollection(y,v):b.catalog(y,v)},enableMultihash(y){l.multihash=y}};return l5=b,l5}var zRt=BRt();const jRt=oa(zRt);function xv(e){let t=e.length>=6,n=e[0],r=e[t?3:2],i=e[1],o=e[t?4:3],s={west:n,east:r,south:i,north:o};return t&&(s.base=e[2],s.height=e[5]),s}function u5(e){let{west:t,east:n,south:r,north:i}=xv(e);return[[[t,i],[t,r],[n,r],[n,i],[t,i]]]}function URt(e){if(!Cc(e))return null;let t=xv(e),n=[];if($Ie(e)){let r=(t.west+360+t.east)/2;r>180&&(r-=360),n.push(r)}else n.push((t.west+t.east)/2);return n.push((t.south+t.north)/2),typeof t.base<"u"&&n.push((t.base+t.height)/2),n}function OIe(e){if(Cc(e)?e=[e]:Array.isArray(e)&&(e=e.filter(r=>Cc(r))),!Array.isArray(e)||e.length===0)return null;let t=e.reduce((r,i)=>{if($Ie(i)){let{west:o,east:s,south:a,north:l}=xv(i);r.push(u5([-180,a,s,l])),r.push(u5([o,a,180,l]))}else r.push(u5(i));return r},[]),n=null;if(t.length===1?n={type:"Polygon",coordinates:t[0]}:t.length>1&&(n={type:"MultiPolygon",coordinates:t}),n)return{type:"Feature",geometry:n,properties:{}}}function Cc(e){if(!Array.isArray(e)||![4,6].includes(e.length)||e.some(o=>typeof o!="number"))return!1;let{west:t,east:n,south:r,north:i}=xv(e);return r<=i&&t>=-180&&t<=180&&r>=-90&&n<=180&&n>=-180&&i<=90}function $Ie(e){if(!Cc(e))return!1;let{west:t,east:n}=xv(e);return t>n}function IIe(e){if(!Array.isArray(e)||e.length===0)return null;let t={west:180,south:90,east:-180,north:-90};e.forEach(r=>{if(!Cc(r))return;let i=xv(r),o=["west","south"];for(let s in i){let a=o.includes(s)?Math.min:Math.max;t[s]=a(t[s],i[s])}});let n=[t.west,t.south,t.east,t.north];return Cc(n)?n:null}function Cl(e){return typeof e=="string"&&e.length>0}function xl(e){return typeof e=="object"&&e===Object(e)&&!Array.isArray(e)}function PIe(...e){if(e=e.filter(t=>Array.isArray(t)),e.length>1){let t=Math.max(...e.map(r=>r.length)),n=[];for(let r=0;r<t;r++)n.push(Object.assign({},...e.map(i=>i[r])));return n}else if(e.length===1)return e[0];return[]}function qRt(e){switch(e){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return e.startsWith("u")?0:null}function HRt(e){switch(e){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}class CR{constructor(t,n={},r=[]){if(!xl(t))throw new Error("Given data is not an object");if(t instanceof CR){for(let i of r)this[i]=t[i];t=t.toJSON()}this._keyMap=n,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let i in t)typeof this[i]>"u"&&(i in n?this[i]=n[i](t[i],this):this[i]=t[i])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(t){return this[t]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return URt(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let t={};return Object.keys(this).forEach(n=>{if(typeof this[n]=="function"||this._privateKeys.includes(n))return;let r=this[n];if(n in this._keyMap){let i=Array.isArray(r)?[]:{};for(let o in r)i[o]=r[o].toJSON();r=i}t[n]=r}),t}}var ZC={exports:{}},c2={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */var GRt=c2.exports,HEe;function VRt(){return HEe||(HEe=1,function(e,t){(function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o=typeof Yi=="object"&&Yi;(o.global===o||o.window===o||o.self===o)&&(n=o);var s,a=2147483647,l=36,u=1,f=26,c=38,d=700,h=72,p=128,m="-",b=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-u,A=Math.floor,T=String.fromCharCode,D;function k(te){throw new RangeError(w[te])}function R(te,le){for(var ee=te.length,z=[];ee--;)z[ee]=le(te[ee]);return z}function M(te,le){var ee=te.split("@"),z="";ee.length>1&&(z=ee[0]+"@",te=ee[1]),te=te.replace(v,".");var he=te.split("."),de=R(he,le).join(".");return z+de}function B(te){for(var le=[],ee=0,z=te.length,he,de;ee<z;)he=te.charCodeAt(ee++),he>=55296&&he<=56319&&ee<z?(de=te.charCodeAt(ee++),(de&64512)==56320?le.push(((he&1023)<<10)+(de&1023)+65536):(le.push(he),ee--)):le.push(he);return le}function K(te){return R(te,function(le){var ee="";return le>65535&&(le-=65536,ee+=T(le>>>10&1023|55296),le=56320|le&1023),ee+=T(le),ee}).join("")}function L(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:l}function $(te,le){return te+22+75*(te<26)-((le!=0)<<5)}function I(te,le,ee){var z=0;for(te=ee?A(te/d):te>>1,te+=A(te/le);te>E*f>>1;z+=l)te=A(te/E);return A(z+(E+1)*te/(te+c))}function U(te){var le=[],ee=te.length,z,he=0,de=p,ze=h,He,je,we,Ie,qe,Pe,At,ht,nn;for(He=te.lastIndexOf(m),He<0&&(He=0),je=0;je<He;++je)te.charCodeAt(je)>=128&&k("not-basic"),le.push(te.charCodeAt(je));for(we=He>0?He+1:0;we<ee;){for(Ie=he,qe=1,Pe=l;we>=ee&&k("invalid-input"),At=L(te.charCodeAt(we++)),(At>=l||At>A((a-he)/qe))&&k("overflow"),he+=At*qe,ht=Pe<=ze?u:Pe>=ze+f?f:Pe-ze,!(At<ht);Pe+=l)nn=l-ht,qe>A(a/nn)&&k("overflow"),qe*=nn;z=le.length+1,ze=I(he-Ie,z,Ie==0),A(he/z)>a-de&&k("overflow"),de+=A(he/z),he%=z,le.splice(he++,0,de)}return K(le)}function q(te){var le,ee,z,he,de,ze,He,je,we,Ie,qe,Pe=[],At,ht,nn,Vt;for(te=B(te),At=te.length,le=p,ee=0,de=h,ze=0;ze<At;++ze)qe=te[ze],qe<128&&Pe.push(T(qe));for(z=he=Pe.length,he&&Pe.push(m);z<At;){for(He=a,ze=0;ze<At;++ze)qe=te[ze],qe>=le&&qe<He&&(He=qe);for(ht=z+1,He-le>A((a-ee)/ht)&&k("overflow"),ee+=(He-le)*ht,le=He,ze=0;ze<At;++ze)if(qe=te[ze],qe<le&&++ee>a&&k("overflow"),qe==le){for(je=ee,we=l;Ie=we<=de?u:we>=de+f?f:we-de,!(je<Ie);we+=l)Vt=je-Ie,nn=l-Ie,Pe.push(T($(Ie+Vt%nn,0))),je=A(Vt/nn);Pe.push(T($(je,0))),de=I(ee,ht,z==he),ee=0,++z}++ee,++le}return Pe.join("")}function Y(te){return M(te,function(le){return b.test(le)?U(le.slice(4).toLowerCase()):le})}function X(te){return M(te,function(le){return y.test(le)?"xn--"+q(le):le})}if(s={version:"1.3.2",ucs2:{decode:B,encode:K},decode:U,encode:q,toASCII:X,toUnicode:Y},r&&i)if(e.exports==r)i.exports=s;else for(D in s)s.hasOwnProperty(D)&&(r[D]=s[D]);else n.punycode=s})(GRt)}(c2,c2.exports)),c2.exports}var KC={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var WRt=KC.exports,GEe;function YRt(){return GEe||(GEe=1,function(e){(function(t,n){e.exports?e.exports=n():t.IPv6=n(t)})(WRt,function(t){var n=t&&t.IPv6;function r(o){var s=o.toLowerCase(),a=s.split(":"),l=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(u=7);var f;for(f=0;f<l&&a[f]!=="";f++);if(f<u)for(a.splice(f,1,"0000");a.length<u;)a.splice(f,0,"0000");for(var c,d=0;d<u;d++){c=a[d].split("");for(var h=0;h<3&&(c[0]==="0"&&c.length>1);h++)c.splice(0,1);a[d]=c.join("")}var p=-1,m=0,b=0,y=-1,v=!1;for(d=0;d<u;d++)v?a[d]==="0"?b+=1:(v=!1,b>m&&(p=y,m=b)):a[d]==="0"&&(v=!0,y=d,b=1);b>m&&(p=y,m=b),m>1&&a.splice(p,m,""),l=a.length;var w="";for(a[0]===""&&(w=":"),d=0;d<l&&(w+=a[d],d!==l-1);d++)w+=":";return a[l-1]===""&&(w+=":"),w}function i(){return t.IPv6===this&&(t.IPv6=n),this}return{best:r,noConflict:i}})}(KC)),KC.exports}var JC={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var XRt=JC.exports,VEe;function ZRt(){return VEe||(VEe=1,function(e){(function(t,n){e.exports?e.exports=n():t.SecondLevelDomains=n(t)})(XRt,function(t){var n=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var s=i.lastIndexOf(".",o-1);if(s<=0||s>=o-1)return!1;var a=r.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(s+1,o)+" ")>=0:!1},is:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var s=i.lastIndexOf(".",o-1);if(s>=0)return!1;var a=r.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(0,o)+" ")>=0:!1},get:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return null;var s=i.lastIndexOf(".",o-1);if(s<=0||s>=o-1)return null;var a=r.list[i.slice(o+1)];return!a||a.indexOf(" "+i.slice(s+1,o)+" ")<0?null:i.slice(s+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=n),this}};return r})}(JC)),JC.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var KRt=ZC.exports,WEe;function JRt(){return WEe||(WEe=1,function(e){(function(t,n){e.exports?e.exports=n(VRt(),YRt(),ZRt()):t.URI=n(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(KRt,function(t,n,r,i){var o=i&&i.URI;function s(L,$){var I=arguments.length>=1,U=arguments.length>=2;if(!(this instanceof s))return I?U?new s(L,$):new s(L):new s;if(L===void 0){if(I)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?L=location.href+"":L=""}if(L===null&&I)throw new TypeError("null is not a valid argument for URI");return this.href(L),$!==void 0?this.absoluteTo($):this}function a(L){return/^[0-9]+$/.test(L)}s.version="1.19.11";var l=s.prototype,u=Object.prototype.hasOwnProperty;function f(L){return L.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(L){return L===void 0?"Undefined":String(Object.prototype.toString.call(L)).slice(8,-1)}function d(L){return c(L)==="Array"}function h(L,$){var I={},U,q;if(c($)==="RegExp")I=null;else if(d($))for(U=0,q=$.length;U<q;U++)I[$[U]]=!0;else I[$]=!0;for(U=0,q=L.length;U<q;U++){var Y=I&&I[L[U]]!==void 0||!I&&$.test(L[U]);Y&&(L.splice(U,1),q--,U--)}return L}function p(L,$){var I,U;if(d($)){for(I=0,U=$.length;I<U;I++)if(!p(L,$[I]))return!1;return!0}var q=c($);for(I=0,U=L.length;I<U;I++)if(q==="RegExp"){if(typeof L[I]=="string"&&L[I].match($))return!0}else if(L[I]===$)return!0;return!1}function m(L,$){if(!d(L)||!d($)||L.length!==$.length)return!1;L.sort(),$.sort();for(var I=0,U=L.length;I<U;I++)if(L[I]!==$[I])return!1;return!0}function b(L){var $=/^\/+|\/+$/g;return L.replace($,"")}s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:s.preventInvalidHostname,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.preventInvalidHostname=!1,s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\._-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},s.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.hostProtocols=["http","https"],s.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},s.getDomAttribute=function(L){if(!(!L||!L.nodeName)){var $=L.nodeName.toLowerCase();if(!($==="input"&&L.type!=="image"))return s.domAttributes[$]}};function y(L){return escape(L)}function v(L){return encodeURIComponent(L).replace(/[!'()*]/g,y).replace(/\*/g,"%2A")}s.encode=v,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=v,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},s.encodeQuery=function(L,$){var I=s.encode(L+"");return $===void 0&&($=s.escapeQuerySpace),$?I.replace(/%20/g,"+"):I},s.decodeQuery=function(L,$){L+="",$===void 0&&($=s.escapeQuerySpace);try{return s.decode($?L.replace(/\+/g,"%20"):L)}catch{return L}};var w={encode:"encode",decode:"decode"},E,A=function(L,$){return function(I){try{return s[$](I+"").replace(s.characters[L][$].expression,function(U){return s.characters[L][$].map[U]})}catch{return I}}};for(E in w)s[E+"PathSegment"]=A("pathname",w[E]),s[E+"UrnPathSegment"]=A("urnpath",w[E]);var T=function(L,$,I){return function(U){var q;I?q=function(le){return s[$](s[I](le))}:q=s[$];for(var Y=(U+"").split(L),X=0,te=Y.length;X<te;X++)Y[X]=q(Y[X]);return Y.join(L)}};s.decodePath=T("/","decodePathSegment"),s.decodeUrnPath=T(":","decodeUrnPathSegment"),s.recodePath=T("/","encodePathSegment","decode"),s.recodeUrnPath=T(":","encodeUrnPathSegment","decode"),s.encodeReserved=A("reserved","encode"),s.parse=function(L,$){var I;return $||($={preventInvalidHostname:s.preventInvalidHostname}),L=L.replace(s.leading_whitespace_expression,""),L=L.replace(s.ascii_tab_whitespace,""),I=L.indexOf("#"),I>-1&&($.fragment=L.substring(I+1)||null,L=L.substring(0,I)),I=L.indexOf("?"),I>-1&&($.query=L.substring(I+1)||null,L=L.substring(0,I)),L=L.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),L=L.replace(/^[/\\]{2,}/i,"//"),L.substring(0,2)==="//"?($.protocol=null,L=L.substring(2),L=s.parseAuthority(L,$)):(I=L.indexOf(":"),I>-1&&($.protocol=L.substring(0,I)||null,$.protocol&&!$.protocol.match(s.protocol_expression)?$.protocol=void 0:L.substring(I+1,I+3).replace(/\\/g,"/")==="//"?(L=L.substring(I+3),L=s.parseAuthority(L,$)):(L=L.substring(I+1),$.urn=!0))),$.path=L,$},s.parseHost=function(L,$){L||(L=""),L=L.replace(/\\/g,"/");var I=L.indexOf("/"),U,q;if(I===-1&&(I=L.length),L.charAt(0)==="[")U=L.indexOf("]"),$.hostname=L.substring(1,U)||null,$.port=L.substring(U+2,I)||null,$.port==="/"&&($.port=null);else{var Y=L.indexOf(":"),X=L.indexOf("/"),te=L.indexOf(":",Y+1);te!==-1&&(X===-1||te<X)?($.hostname=L.substring(0,I)||null,$.port=null):(q=L.substring(0,I).split(":"),$.hostname=q[0]||null,$.port=q[1]||null)}return $.hostname&&L.substring(I).charAt(0)!=="/"&&(I++,L="/"+L),$.preventInvalidHostname&&s.ensureValidHostname($.hostname,$.protocol),$.port&&s.ensureValidPort($.port),L.substring(I)||"/"},s.parseAuthority=function(L,$){return L=s.parseUserinfo(L,$),s.parseHost(L,$)},s.parseUserinfo=function(L,$){var I=L,U=L.indexOf("\\");U!==-1&&(L=L.replace(/\\/g,"/"));var q=L.indexOf("/"),Y=L.lastIndexOf("@",q>-1?q:L.length-1),X;return Y>-1&&(q===-1||Y<q)?(X=L.substring(0,Y).split(":"),$.username=X[0]?s.decode(X[0]):null,X.shift(),$.password=X[0]?s.decode(X.join(":")):null,L=I.substring(Y+1)):($.username=null,$.password=null),L},s.parseQuery=function(L,$){if(!L)return{};if(L=L.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!L)return{};for(var I={},U=L.split("&"),q=U.length,Y,X,te,le=0;le<q;le++)Y=U[le].split("="),X=s.decodeQuery(Y.shift(),$),te=Y.length?s.decodeQuery(Y.join("="),$):null,X!=="__proto__"&&(u.call(I,X)?((typeof I[X]=="string"||I[X]===null)&&(I[X]=[I[X]]),I[X].push(te)):I[X]=te);return I},s.build=function(L){var $="",I=!1;return L.protocol&&($+=L.protocol+":"),!L.urn&&($||L.hostname)&&($+="//",I=!0),$+=s.buildAuthority(L)||"",typeof L.path=="string"&&(L.path.charAt(0)!=="/"&&I&&($+="/"),$+=L.path),typeof L.query=="string"&&L.query&&($+="?"+L.query),typeof L.fragment=="string"&&L.fragment&&($+="#"+L.fragment),$},s.buildHost=function(L){var $="";if(L.hostname)s.ip6_expression.test(L.hostname)?$+="["+L.hostname+"]":$+=L.hostname;else return"";return L.port&&($+=":"+L.port),$},s.buildAuthority=function(L){return s.buildUserinfo(L)+s.buildHost(L)},s.buildUserinfo=function(L){var $="";return L.username&&($+=s.encode(L.username)),L.password&&($+=":"+s.encode(L.password)),$&&($+="@"),$},s.buildQuery=function(L,$,I){var U="",q,Y,X,te;for(Y in L)if(Y!=="__proto__"&&u.call(L,Y))if(d(L[Y]))for(q={},X=0,te=L[Y].length;X<te;X++)L[Y][X]!==void 0&&q[L[Y][X]+""]===void 0&&(U+="&"+s.buildQueryParameter(Y,L[Y][X],I),$!==!0&&(q[L[Y][X]+""]=!0));else L[Y]!==void 0&&(U+="&"+s.buildQueryParameter(Y,L[Y],I));return U.substring(1)},s.buildQueryParameter=function(L,$,I){return s.encodeQuery(L,I)+($!==null?"="+s.encodeQuery($,I):"")},s.addQuery=function(L,$,I){if(typeof $=="object")for(var U in $)u.call($,U)&&s.addQuery(L,U,$[U]);else if(typeof $=="string"){if(L[$]===void 0){L[$]=I;return}else typeof L[$]=="string"&&(L[$]=[L[$]]);d(I)||(I=[I]),L[$]=(L[$]||[]).concat(I)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},s.setQuery=function(L,$,I){if(typeof $=="object")for(var U in $)u.call($,U)&&s.setQuery(L,U,$[U]);else if(typeof $=="string")L[$]=I===void 0?null:I;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},s.removeQuery=function(L,$,I){var U,q,Y;if(d($))for(U=0,q=$.length;U<q;U++)L[$[U]]=void 0;else if(c($)==="RegExp")for(Y in L)$.test(Y)&&(L[Y]=void 0);else if(typeof $=="object")for(Y in $)u.call($,Y)&&s.removeQuery(L,Y,$[Y]);else if(typeof $=="string")I!==void 0?c(I)==="RegExp"?!d(L[$])&&I.test(L[$])?L[$]=void 0:L[$]=h(L[$],I):L[$]===String(I)&&(!d(I)||I.length===1)?L[$]=void 0:d(L[$])&&(L[$]=h(L[$],I)):L[$]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},s.hasQuery=function(L,$,I,U){switch(c($)){case"String":break;case"RegExp":for(var q in L)if(u.call(L,q)&&$.test(q)&&(I===void 0||s.hasQuery(L,q,I)))return!0;return!1;case"Object":for(var Y in $)if(u.call($,Y)&&!s.hasQuery(L,Y,$[Y]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(I)){case"Undefined":return $ in L;case"Boolean":var X=!!(d(L[$])?L[$].length:L[$]);return I===X;case"Function":return!!I(L[$],$,L);case"Array":if(!d(L[$]))return!1;var te=U?p:m;return te(L[$],I);case"RegExp":return d(L[$])?U?p(L[$],I):!1:!!(L[$]&&L[$].match(I));case"Number":I=String(I);case"String":return d(L[$])?U?p(L[$],I):!1:L[$]===I;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.joinPaths=function(){for(var L=[],$=[],I=0,U=0;U<arguments.length;U++){var q=new s(arguments[U]);L.push(q);for(var Y=q.segment(),X=0;X<Y.length;X++)typeof Y[X]=="string"&&$.push(Y[X]),Y[X]&&I++}if(!$.length||!I)return new s("");var te=new s("").segment($);return(L[0].path()===""||L[0].path().slice(0,1)==="/")&&te.path("/"+te.path()),te.normalize()},s.commonPath=function(L,$){var I=Math.min(L.length,$.length),U;for(U=0;U<I;U++)if(L.charAt(U)!==$.charAt(U)){U--;break}return U<1?L.charAt(0)===$.charAt(0)&&L.charAt(0)==="/"?"/":"":((L.charAt(U)!=="/"||$.charAt(U)!=="/")&&(U=L.substring(0,U).lastIndexOf("/")),L.substring(0,U+1))},s.withinString=function(L,$,I){I||(I={});var U=I.start||s.findUri.start,q=I.end||s.findUri.end,Y=I.trim||s.findUri.trim,X=I.parens||s.findUri.parens,te=/[a-z0-9-]=["']?$/i;for(U.lastIndex=0;;){var le=U.exec(L);if(!le)break;var ee=le.index;if(I.ignoreHtml){var z=L.slice(Math.max(ee-3,0),ee);if(z&&te.test(z))continue}for(var he=ee+L.slice(ee).search(q),de=L.slice(ee,he),ze=-1;;){var He=X.exec(de);if(!He)break;var je=He.index+He[0].length;ze=Math.max(ze,je)}if(ze>-1?de=de.slice(0,ze)+de.slice(ze).replace(Y,""):de=de.replace(Y,""),!(de.length<=le[0].length)&&!(I.ignore&&I.ignore.test(de))){he=ee+de.length;var we=$(de,ee,he,L);if(we===void 0){U.lastIndex=he;continue}we=String(we),L=L.slice(0,ee)+we+L.slice(he),U.lastIndex=ee+we.length}}return U.lastIndex=0,L},s.ensureValidHostname=function(L,$){var I=!!L,U=!!$,q=!1;if(U&&(q=p(s.hostProtocols,$)),q&&!I)throw new TypeError("Hostname cannot be empty, if protocol is "+$);if(L&&L.match(s.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(L).match(s.invalid_hostname_characters))throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_]')}},s.ensureValidPort=function(L){if(L){var $=Number(L);if(!(a($)&&$>0&&$<65536))throw new TypeError('Port "'+L+'" is not a valid port')}},s.noConflict=function(L){if(L){var $={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&($.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&($.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&($.SecondLevelDomains=i.SecondLevelDomains.noConflict()),$}else i.URI===this&&(i.URI=o);return this},l.build=function(L){return L===!0?this._deferred_build=!0:(L===void 0||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new s(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function D(L){return function($,I){return $===void 0?this._parts[L]||"":(this._parts[L]=$||null,this.build(!I),this)}}function k(L,$){return function(I,U){return I===void 0?this._parts[L]||"":(I!==null&&(I=I+"",I.charAt(0)===$&&(I=I.substring(1))),this._parts[L]=I,this.build(!U),this)}}l.protocol=D("protocol"),l.username=D("username"),l.password=D("password"),l.hostname=D("hostname"),l.port=D("port"),l.query=k("query","?"),l.fragment=k("fragment","#"),l.search=function(L,$){var I=this.query(L,$);return typeof I=="string"&&I.length?"?"+I:I},l.hash=function(L,$){var I=this.fragment(L,$);return typeof I=="string"&&I.length?"#"+I:I},l.pathname=function(L,$){if(L===void 0||L===!0){var I=this._parts.path||(this._parts.hostname?"/":"");return L?(this._parts.urn?s.decodeUrnPath:s.decodePath)(I):I}else return this._parts.urn?this._parts.path=L?s.recodeUrnPath(L):"":this._parts.path=L?s.recodePath(L):"/",this.build(!$),this},l.path=l.pathname,l.href=function(L,$){var I;if(L===void 0)return this.toString();this._string="",this._parts=s._parts();var U=L instanceof s,q=typeof L=="object"&&(L.hostname||L.path||L.pathname);if(L.nodeName){var Y=s.getDomAttribute(L);L=L[Y]||"",q=!1}if(!U&&q&&L.pathname!==void 0&&(L=L.toString()),typeof L=="string"||L instanceof String)this._parts=s.parse(String(L),this._parts);else if(U||q){var X=U?L._parts:L;for(I in X)I!=="query"&&u.call(this._parts,I)&&(this._parts[I]=X[I]);X.query&&this.query(X.query,!1)}else throw new TypeError("invalid input");return this.build(!$),this},l.is=function(L){var $=!1,I=!1,U=!1,q=!1,Y=!1,X=!1,te=!1,le=!this._parts.urn;switch(this._parts.hostname&&(le=!1,I=s.ip4_expression.test(this._parts.hostname),U=s.ip6_expression.test(this._parts.hostname),$=I||U,q=!$,Y=q&&r&&r.has(this._parts.hostname),X=q&&s.idn_expression.test(this._parts.hostname),te=q&&s.punycode_expression.test(this._parts.hostname)),L.toLowerCase()){case"relative":return le;case"absolute":return!le;case"domain":case"name":return q;case"sld":return Y;case"ip":return $;case"ip4":case"ipv4":case"inet4":return I;case"ip6":case"ipv6":case"inet6":return U;case"idn":return X;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return te}return null};var R=l.protocol,M=l.port,B=l.hostname;l.protocol=function(L,$){if(L&&(L=L.replace(/:(\/\/)?$/,""),!L.match(s.protocol_expression)))throw new TypeError('Protocol "'+L+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return R.call(this,L,$)},l.scheme=l.protocol,l.port=function(L,$){return this._parts.urn?L===void 0?"":this:(L!==void 0&&(L===0&&(L=null),L&&(L+="",L.charAt(0)===":"&&(L=L.substring(1)),s.ensureValidPort(L))),M.call(this,L,$))},l.hostname=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L!==void 0){var I={preventInvalidHostname:this._parts.preventInvalidHostname},U=s.parseHost(L,I);if(U!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');L=I.hostname,this._parts.preventInvalidHostname&&s.ensureValidHostname(L,this._parts.protocol)}return B.call(this,L,$)},l.origin=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var I=this.protocol(),U=this.authority();return U?(I?I+"://":"")+this.authority():""}else{var q=s(L);return this.protocol(q.protocol()).authority(q.authority()).build(!$),this}},l.host=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?s.buildHost(this._parts):"";var I=s.parseHost(L,this._parts);if(I!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},l.authority=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?s.buildAuthority(this._parts):"";var I=s.parseAuthority(L,this._parts);if(I!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},l.userinfo=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var I=s.buildUserinfo(this._parts);return I&&I.substring(0,I.length-1)}else return L[L.length-1]!=="@"&&(L+="@"),s.parseUserinfo(L,this._parts),this.build(!$),this},l.resource=function(L,$){var I;return L===void 0?this.path()+this.search()+this.hash():(I=s.parse(L),this._parts.path=I.path,this._parts.query=I.query,this._parts.fragment=I.fragment,this.build(!$),this)},l.subdomain=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,I)||""}else{var U=this._parts.hostname.length-this.domain().length,q=this._parts.hostname.substring(0,U),Y=new RegExp("^"+f(q));if(L&&L.charAt(L.length-1)!=="."&&(L+="."),L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return L&&s.ensureValidHostname(L,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(Y,L),this.build(!$),this}},l.domain=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&($=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.match(/\./g);if(I&&I.length<2)return this._parts.hostname;var U=this._parts.hostname.length-this.tld($).length-1;return U=this._parts.hostname.lastIndexOf(".",U-1)+1,this._parts.hostname.substring(U)||""}else{if(!L)throw new TypeError("cannot set domain empty");if(L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(s.ensureValidHostname(L,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=L;else{var q=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(q,L)}return this.build(!$),this}},l.tld=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&($=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.lastIndexOf("."),U=this._parts.hostname.substring(I+1);return $!==!0&&r&&r.list[U.toLowerCase()]&&r.get(this._parts.hostname)||U}else{var q;if(L)if(L.match(/[^a-zA-Z0-9-]/))if(r&&r.is(L))q=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L);else throw new TypeError('TLD "'+L+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");q=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L)}else throw new TypeError("cannot set TLD empty");return this.build(!$),this}},l.directory=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var I=this._parts.path.length-this.filename().length-1,U=this._parts.path.substring(0,I)||(this._parts.hostname?"/":"");return L?s.decodePath(U):U}else{var q=this._parts.path.length-this.filename().length,Y=this._parts.path.substring(0,q),X=new RegExp("^"+f(Y));return this.is("relative")||(L||(L="/"),L.charAt(0)!=="/"&&(L="/"+L)),L&&L.charAt(L.length-1)!=="/"&&(L+="/"),L=s.recodePath(L),this._parts.path=this._parts.path.replace(X,L),this.build(!$),this}},l.filename=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L!="string"){if(!this._parts.path||this._parts.path==="/")return"";var I=this._parts.path.lastIndexOf("/"),U=this._parts.path.substring(I+1);return L?s.decodePathSegment(U):U}else{var q=!1;L.charAt(0)==="/"&&(L=L.substring(1)),L.match(/\.?\//)&&(q=!0);var Y=new RegExp(f(this.filename())+"$");return L=s.recodePath(L),this._parts.path=this._parts.path.replace(Y,L),q?this.normalizePath($):this.build(!$),this}},l.suffix=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path||this._parts.path==="/")return"";var I=this.filename(),U=I.lastIndexOf("."),q,Y;return U===-1?"":(q=I.substring(U+1),Y=/^[a-z0-9%]+$/i.test(q)?q:"",L?s.decodePathSegment(Y):Y)}else{L.charAt(0)==="."&&(L=L.substring(1));var X=this.suffix(),te;if(X)L?te=new RegExp(f(X)+"$"):te=new RegExp(f("."+X)+"$");else{if(!L)return this;this._parts.path+="."+s.recodePath(L)}return te&&(L=s.recodePath(L),this._parts.path=this._parts.path.replace(te,L)),this.build(!$),this}},l.segment=function(L,$,I){var U=this._parts.urn?":":"/",q=this.path(),Y=q.substring(0,1)==="/",X=q.split(U);if(L!==void 0&&typeof L!="number"&&(I=$,$=L,L=void 0),L!==void 0&&typeof L!="number")throw new Error('Bad segment "'+L+'", must be 0-based integer');if(Y&&X.shift(),L<0&&(L=Math.max(X.length+L,0)),$===void 0)return L===void 0?X:X[L];if(L===null||X[L]===void 0)if(d($)){X=[];for(var te=0,le=$.length;te<le;te++)!$[te].length&&(!X.length||!X[X.length-1].length)||(X.length&&!X[X.length-1].length&&X.pop(),X.push(b($[te])))}else($||typeof $=="string")&&($=b($),X[X.length-1]===""?X[X.length-1]=$:X.push($));else $?X[L]=b($):X.splice(L,1);return Y&&X.unshift(""),this.path(X.join(U),I)},l.segmentCoded=function(L,$,I){var U,q,Y;if(typeof L!="number"&&(I=$,$=L,L=void 0),$===void 0){if(U=this.segment(L,$,I),!d(U))U=U!==void 0?s.decode(U):void 0;else for(q=0,Y=U.length;q<Y;q++)U[q]=s.decode(U[q]);return U}if(!d($))$=typeof $=="string"||$ instanceof String?s.encode($):$;else for(q=0,Y=$.length;q<Y;q++)$[q]=s.encode($[q]);return this.segment(L,$,I)};var K=l.query;return l.query=function(L,$){if(L===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="function"){var I=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),U=L.call(this,I);return this._parts.query=s.buildQuery(U||I,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this}else return L!==void 0&&typeof L!="string"?(this._parts.query=s.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this):K.call(this,L,$)},l.setQuery=function(L,$,I){var U=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="string"||L instanceof String)U[L]=$!==void 0?$:null;else if(typeof L=="object")for(var q in L)u.call(L,q)&&(U[q]=L[q]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=s.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.addQuery=function(L,$,I){var U=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(U,L,$===void 0?null:$),this._parts.query=s.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.removeQuery=function(L,$,I){var U=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(U,L,$),this._parts.query=s.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.hasQuery=function(L,$,I){var U=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(U,L,$,I)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(L){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!L)),this},l.normalizeHostname=function(L){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&n&&(this._parts.hostname=n.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!L)),this},l.normalizePort=function(L){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!L)),this},l.normalizePath=function(L){var $=this._parts.path;if(!$)return this;if(this._parts.urn)return this._parts.path=s.recodeUrnPath(this._parts.path),this.build(!L),this;if(this._parts.path==="/")return this;$=s.recodePath($);var I,U="",q,Y;for($.charAt(0)!=="/"&&(I=!0,$="/"+$),($.slice(-3)==="/.."||$.slice(-2)==="/.")&&($+="/"),$=$.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),I&&(U=$.substring(1).match(/^(\.\.\/)+/)||"",U&&(U=U[0]));q=$.search(/\/\.\.(\/|$)/),q!==-1;){if(q===0){$=$.substring(3);continue}Y=$.substring(0,q).lastIndexOf("/"),Y===-1&&(Y=q),$=$.substring(0,Y)+$.substring(q+3)}return I&&this.is("relative")&&($=U+$.substring(1)),this._parts.path=$,this.build(!L),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(L){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!L)),this},l.normalizeFragment=function(L){return this._parts.fragment||(this._parts.fragment=null,this.build(!L)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var L=s.encode,$=s.decode;s.encode=escape,s.decode=decodeURIComponent;try{this.normalize()}finally{s.encode=L,s.decode=$}return this},l.unicode=function(){var L=s.encode,$=s.decode;s.encode=v,s.decode=unescape;try{this.normalize()}finally{s.encode=L,s.decode=$}return this},l.readable=function(){var L=this.clone();L.username("").password("").normalize();var $="";if(L._parts.protocol&&($+=L._parts.protocol+"://"),L._parts.hostname&&(L.is("punycode")&&t?($+=t.toUnicode(L._parts.hostname),L._parts.port&&($+=":"+L._parts.port)):$+=L.host()),L._parts.hostname&&L._parts.path&&L._parts.path.charAt(0)!=="/"&&($+="/"),$+=L.path(!0),L._parts.query){for(var I="",U=0,q=L._parts.query.split("&"),Y=q.length;U<Y;U++){var X=(q[U]||"").split("=");I+="&"+s.decodeQuery(X[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),X[1]!==void 0&&(I+="="+s.decodeQuery(X[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}$+="?"+I.substring(1)}return $+=s.decodeQuery(L.hash(),!0),$},l.absoluteTo=function(L){var $=this.clone(),I=["protocol","username","password","hostname","port"],U,q,Y;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L instanceof s||(L=new s(L)),$._parts.protocol||($._parts.protocol=L._parts.protocol,this._parts.hostname))return $;for(q=0;Y=I[q];q++)$._parts[Y]=L._parts[Y];return $._parts.path?($._parts.path.substring(-2)===".."&&($._parts.path+="/"),$.path().charAt(0)!=="/"&&(U=L.directory(),U=U||(L.path().indexOf("/")===0?"/":""),$._parts.path=(U?U+"/":"")+$._parts.path,$.normalizePath())):($._parts.path=L._parts.path,$._parts.query||($._parts.query=L._parts.query)),$.build(),$},l.relativeTo=function(L){var $=this.clone().normalize(),I,U,q,Y,X;if($._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L=new s(L).normalize(),I=$._parts,U=L._parts,Y=$.path(),X=L.path(),Y.charAt(0)!=="/")throw new Error("URI is already relative");if(X.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(I.protocol===U.protocol&&(I.protocol=null),I.username!==U.username||I.password!==U.password||I.protocol!==null||I.username!==null||I.password!==null)return $.build();if(I.hostname===U.hostname&&I.port===U.port)I.hostname=null,I.port=null;else return $.build();if(Y===X)return I.path="",$.build();if(q=s.commonPath(Y,X),!q)return $.build();var te=U.path.substring(q.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return I.path=te+I.path.substring(q.length)||"./",$.build()},l.equals=function(L){var $=this.clone(),I=new s(L),U={},q={},Y={},X,te,le;if($.normalize(),I.normalize(),$.toString()===I.toString())return!0;if(X=$.query(),te=I.query(),$.query(""),I.query(""),$.toString()!==I.toString()||X.length!==te.length)return!1;U=s.parseQuery(X,this._parts.escapeQuerySpace),q=s.parseQuery(te,this._parts.escapeQuerySpace);for(le in U)if(u.call(U,le)){if(d(U[le])){if(!m(U[le],q[le]))return!1}else if(U[le]!==q[le])return!1;Y[le]=!0}for(le in q)if(u.call(q,le)&&!Y[le])return!1;return!0},l.preventInvalidHostname=function(L){return this._parts.preventInvalidHostname=!!L,this},l.duplicateQueryParameters=function(L){return this._parts.duplicateQueryParameters=!!L,this},l.escapeQuerySpace=function(L){return this._parts.escapeQuerySpace=!!L,this},s})}(ZC)),ZC.exports}var QRt=JRt();const I8=oa(QRt),YEe=["http","https"];function eFt(e){return typeof e=="string"&&e.startsWith("/vsi")&&!e.startsWith("/vsicurl/")}function tFt(e,t,n=!0){return nFt(e,t,!1,n)}function nFt(e,t=null,n=!1,r=!0){typeof e=="string"&&e.startsWith("/vsicurl/")&&(e=e.replace(/^\/vsicurl\//,""));let i=I8(e);if(t&&i.is("relative")&&!eFt(e)){let o=I8(t),s=o.path();!s.endsWith("/")&&!s.endsWith(".json")&&o.path(s+"/"),i=i.absoluteTo(o)}return i.normalize(),n&&(i.query(""),i.fragment("")),r?i.toString():i}const rFt="application/geo+json",iFt=["application/json",rFt,"text/json"],XEe=["image/gif","image/jpeg","image/apng","image/png","image/webp"],NIe=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],BIe=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(NIe);function FB(e,t,n=!1){return Array.isArray(t)||(t=[t]),n&&typeof e>"u"?!0:typeof e!="string"?!1:(t=t.map(r=>r.toLowerCase()),t.includes(e.toLowerCase()))}function oFt(e,t=!1){return FB(e,iFt,t)}class zIe extends CR{constructor(t,n=null,r={},i=[]){super(t,r,["_context"].concat(i)),this._context||(this._context=n)}getAbsoluteUrl(t=!0){return this._context?tFt(this.href,this._context.getAbsoluteUrl(),t):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(t=!1){if(typeof this.href!="string")return!1;if(!t&&typeof this.type>"u")return!1;let n=new I8(this.href),r=n.protocol().toLowerCase(),i=n.suffix().toLowerCase();return Cl(r)&&!YEe.includes(r)?!1:Cl(this.type)&&XEe.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&Cl(i)&&(i==="jpg"||XEe.includes("image/"+i)))}isType(t){return Cl(this.type)&&FB(this.type,t)}isGeoTIFF(){return this.isType(BIe)}isCOG(){return this.isType(NIe)}isHTTP(){let n=this.getAbsoluteUrl(!1).protocol().toLowerCase();return Cl(n)&&YEe.includes(n)}}class MB extends zIe{constructor(t,n=null){super(t,n)}isLink(){return!0}getObjectType(){return"Link"}static fromLinks(t,n=null){return Array.isArray(t)?t.map(r=>xl(r)?new MB(r,n):r):[]}}class jIe extends CR{constructor(t,n=null,r={},i=[]){if(super(t,Object.assign({links:MB.fromLinks},r),["_url"].concat(i)),!this._url&&(this._url=n,!this._url)){let o=this.getSelfLink();o&&(this._url=o.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(t){this._url=t}getStacLinksWithRel(t,n=!0){return this.getLinksWithRels([t]).filter(r=>oFt(r.type,n))}getStacLinkWithRel(t,n=!0){const r=this.getStacLinksWithRel(t,n);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(t=>xl(t)&&Cl(t.href)):[]}getLinkWithRel(t){return this.getLinks().find(n=>n.rel===t)||null}getLinksWithRels(t){return this.getLinks().filter(n=>t.includes(n.rel))}getLinksWithOtherRels(t){return this.getLinks().filter(n=>!t.includes(n.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class UIe extends jIe{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getAll(){return[]}}class Pp extends zIe{constructor(t,n=null,r=null){super(t,r,{},["_key"]),this._key||(this._key=n)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(t=!0){return this.isDefinition()?null:super.getAbsoluteUrl(t)}getKey(){return this._key}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context)return this._context.getMetadata(t)}getBands(){return PIe(this["eo:bands"],this["raster:bands"])}findVisualBands(){let t={red:null,green:null,blue:null},n=this.getBands();for(let i in n){let o=parseInt(i,10),s=n[o];xl(s)&&Cl(s.common_name)&&s.common_name in t&&(t[s.common_name]={index:o,band:s})}return Object.values(t).every(i=>i!==null)?t:null}findBand(t,n="name",r=null){Array.isArray(t)||(t=[t]),xl(r)||(r=this.getBands());let i=r.findIndex(o=>xl(o)&&t.includes(o[n]));return i>=0?{index:i,band:r[i]}:null}getBand(t){return xl(t)||t===null?t:this.getBands()[t]||null}getMinMaxValues(t=null){t=this.getBand(t);const n={minimum:null,maximum:null},r=a=>a.minimum!==null&&a.maximum!==null;if(t&&(xl(t.statistics)&&(typeof t.statistics.minimum=="number"&&(n.minimum=t.statistics.minimum),typeof t.statistics.maximum=="number"&&(n.maximum=t.statistics.maximum),r(n))||xl(t.histogram)&&(typeof t.histogram.min=="number"&&(n.minimum=t.histogram.min),typeof t.histogram.max=="number"&&(n.maximum=t.histogram.max),r(n))))return n;let i=this.getMetadata("classification:classes");if(Array.isArray(i)&&(i.reduce((a,l)=>(a.minimum=Math.min(a.minimum,l.value),a.maximum=Math.max(a.maximum,l.value),a),n),r(n)))return n;let o=this.getMetadata("file:values");if(Array.isArray(o)&&(o.reduce((a,l)=>(a.minimum=Math.min(a.minimum,...l.values),a.maximum=Math.max(a.maximum,...l.values),a),n),r(n)))return n;let s=xl(t)&&t.data_type||this.getMetadata("file:data_type");return s&&(n.minimum=qRt(s),n.maximum=HRt(s)),n}getNoDataValues(t=null){t=this.getBand(t);let n=[];if(t&&typeof t.nodata<"u")n.push(t.nodata);else{let r=this.getMetadata("file:nodata");if(typeof r<"u")n=r;else{let i=this.getMetadata("classification:classes");Array.isArray(i)&&(n=i.filter(o=>!!o.nodata).map(o=>o.value))}}return n.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}isDefinition(){return!Cl(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}hasRole(t,n=!1){return Array.isArray(t)||(t=[t]),n&&t.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>t.includes(r))}static fromAssets(t,n=null){let r={};if(xl(t))for(let i in t)r[i]=new Pp(t[i],i,n);return r}}class iS extends jIe{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(t=!0){return this.getLinksWithRels(["icon"]).filter(n=>n.canBrowserDisplayImage(t))}getThumbnails(t=!0,n=null){let r=this.getAssetsWithRoles(["thumbnail","overview"],!0);if(r.length===0&&(r=this.getLinksWithRels(["preview"])),t&&(r=r.filter(i=>i.canBrowserDisplayImage())),n&&r.length>1){let i=o=>Array.isArray(o.roles)&&o.roles.includes(n)||o.getKey()===n;r=r.filter(i).concat(r.filter(o=>!i(o)))}return r}getDefaultGeoTIFF(t=!0,n=!1){var i;return(i=this.rankGeoTIFFs(t,n)[0])==null?void 0:i.asset}rankGeoTIFFs(t=!0,n=!1,r=null,i=null){xl(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let o=[],s=this.getAssetsByTypes(BIe);t&&(s=s.filter(l=>l.isHTTP()&&(!n||l.isCOG())));let a=Object.entries(r);for(let l of s){let u=0;if(a.length>0){let f=a.filter(([c])=>l.hasRole(c,!0)).map(([,c])=>c);f.length>0&&(u+=Math.max(...f))}!n&&l.isCOG()&&(u+=2),l.findVisualBands()&&(u+=1),typeof i=="function"&&(u+=i(l)),o.push({asset:l,score:u})}return o.sort((l,u)=>u.score-l.score),o}findVisualAssets(){let t={red:null,green:null,blue:null},n=Object.keys(t),r=this.getAssets();for(let o of r){let s=o.getBands();if(s.length!==1)continue;let a=o.findBand(n,"common_name",s);a&&(t[a.band.common_name]=o)}return Object.values(t).every(o=>o!==null)?t:null}getAsset(t){return xl(this.assets)&&this.assets[t]||null}getAssets(){return xl(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(t,n=!1){return this.getAssets().filter(r=>r.hasRole(t,n))}getAssetWithRole(t,n=!1){return this.getAssetsWithRoles([t],n)[0]||null}getAssetsByTypes(t){return this.getAssets().filter(n=>FB(n.type,t))}equals(t){return this===t?!0:!(t instanceof iS)||this.getObjectType()!==t.getObjectType()?!1:!!(this.id&&this.id===t.id)}}class qIe extends iS{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getObjectType(){return this.type}getSearchLink(t=null){let n=this.getStacLinksWithRel("search");return t?n[0]||null:n.find(r=>r.method===t||!t&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class sFt extends qIe{constructor(t,n=null){super(t,n)}}function f2(e){if(Cl(e)&&e.length>=10)try{let n=e.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5],n[6]||0))}catch{return null}return null}function aFt(e,t){return new Date(e.valueOf()+(t-e)/2)}function HIe(e){if(!Array.isArray(e)||e.length===0)return null;let t,n;const r=(i,o,s)=>typeof i>"u"?o:i===null||o===null?null:s(i,o);return e.forEach(([i,o])=>{t=r(t,i,Math.min),n=r(n,o,Math.max)}),[t===null?null:new Date(t),n===null?null:new Date(n)]}class GIe extends qIe{constructor(t,n=null){const r={assets:Pp.fromAssets,item_assets:Pp.fromAssets};super(t,n,r)}toGeoJSON(){let t=OIe(this.getBoundingBoxes());return t&&(t.id=this.id),t}getBoundingBox(){let t=this.getRawBoundingBoxes();return t.length>0&&Cc(t[0])?t[0]:null}getBoundingBoxes(){let t=this.getRawBoundingBoxes();return t.length===1&&Cc(t[0])?t:t.length>1?t.filter((n,r)=>r>0&&Cc(n)):[]}getRawBoundingBoxes(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.spatial)==null?void 0:r.bbox;return Array.isArray(t)&&t.length>0?t:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.temporal)==null?void 0:r.interval;return Array.isArray(t)&&t.length>0?t.filter(i=>Array.isArray(i)&&(Cl(i[0])||Cl(i[1]))).map(i=>i.map(o=>f2(o))):[]}getSummary(t){return this.summaries[t]}getBands(){let t=this.getSummary("eo:bands"),n=this.getSummary("raster:bands"),r=[t,n].filter(i=>Array.isArray(i));return r.length>=2?PIe(...r):r.length===1?r[0]:[]}}class lFt extends UIe{constructor(t,n=null){const r={collections:i=>i.map(o=>new GIe(o))};super(t,n,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(n=>n.toGeoJSON()).filter(n=>n!==null)}}getBoundingBox(){return IIe(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(t=>t.getBoundingBox())}getTemporalExtent(){return HIe(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(t=>t.getTemporalExtent())}}class VIe extends iS{constructor(t,n=null){super(t,n,{assets:Pp.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Cc(this.bbox)?this.bbox:null}getBoundingBoxes(){return Cc(this.bbox)?[this.bbox]:[]}getDateTime(){let t=f2(this.properties.datetime);if(!t){let n=f2(this.properties.start_datetime),r=f2(this.properties.end_datetime);return n&&r?aFt(n,r):n||r}return t}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let t=[];return Cl(this.properties.start_datetime)||Cl(this.properties.end_datetime)?t=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:Cl(this.properties.datetime)&&(t=[[this.properties.datetime,this.properties.datetime]]),t.map(n=>n.map(r=>f2(r)))}getMetadata(t){return this.properties[t]}getBands(){let t=this.getMetadata("eo:bands");return Array.isArray(t)?t:[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class uFt extends UIe{constructor(t,n=null){const r={features:i=>i.map(o=>new VIe(o))};super(t,n,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return IIe(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(t=>t.getBoundingBox())}getTemporalExtent(){return HIe(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(t=>t.getTemporalExtent())}}function cFt(e,t=!0,n=!1){return t&&(e=jRt.stac(e,n)),e.type==="Feature"?new VIe(e):e.type==="FeatureCollection"?new uFt(e):e.type==="Collection"||!e.type&&typeof e.extent<"u"&&typeof e.license<"u"?new GIe(e):!e.type&&Array.isArray(e.collections)?new lFt(e):new sFt(e)}class ZEe extends lE{constructor(n){super({...n,state:"loading"});tn(this,"loadImage",n=>new Promise((r,i)=>{const o=new Image;o.addEventListener("load",()=>r(o)),o.addEventListener("error",()=>i(new Error("load failed"))),o.src=n}));const r=new RB(n.url);r.getHeader().then(i=>{this.tileGrid.minZoom=i.minZoom,this.tileGrid.maxZoom=i.maxZoom,this.setLoader(async(o,s,a)=>{const l=await r.getZxy(o,s,a),u=URL.createObjectURL(new Blob([l.data])),f=await this.loadImage(u);return URL.revokeObjectURL(u),f}),this.setState("ready")})}}class fFt extends fD{constructor(n){super({...n,state:"loading",url:"pmtiles://"+n.url+"/{z}/{x}/{y}",format:new ACe});tn(this,"tileLoadFunction",(n,r)=>{const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=r.match(i),s=+o[2],a=+o[3],l=+o[4];n.setLoader((u,f,c)=>{n.setState(Do.LOADING),this.pmtiles_.getZxy(s,a,l).then(d=>{if(d){const h=n.getFormat();n.setFeatures(h.readFeatures(d.data,{extent:u,featureProjection:c})),n.setState(Do.LOADED)}else n.setFeatures([]),n.setState(Do.EMPTY)}).catch(d=>{n.setFeatures([]),n.setState(Do.ERROR)})})});this.pmtiles_=new RB(n.url),this.pmtiles_.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}const dFt=new p2({fill:new IM({color:"rgba(255,255,255,0.4)"}),stroke:new q2({color:"#3399CC",width:3})}),hFt=new p2({stroke:new q2({color:"#ff9933",width:1})});function pFt(e,t){const n={url:e.getAbsoluteUrl()};let r=null;e.getBands().length===1&&(r=0);const{minimum:i,maximum:o}=e.getMinMaxValues(r);typeof i=="number"&&(n.min=i),typeof o=="number"&&(n.max=o);const s=e.getNoDataValues(r);return s.length>0&&(n.nodata=s[0]),t.length>0&&(n.bands=t),n}async function KEe(e,t=void 0){let n=t;if(Kje()){const r=e.getMetadata("proj:epsg");if(r)try{n=await Jje(r)}catch{}}return n}function JEe(e,t){const n=e.clone();return t.hasOnlyBounds()||n.setFill(null),n}function gFt(e){let t=e.href;if(t.includes("{s}"))if(Array.isArray(e["href:servers"])&&e["href:servers"].length>0){const n=Math.random()*e["href:servers"].length|0;t=t.replace("{s}",e["href:servers"][n])}else return null;return t}async function mFt(e){try{const t=new URL(e);t.searchParams.set("service","wmts"),t.searchParams.set("request","GetCapabilities");const n=await fetch(t);return new H$().read(await n.text())}catch{return null}}class OB extends d3{constructor(t){const n={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>n[r]=t[r]),super(n),this.getSourceOptions_=t.getSourceOptions,this.data_,this.assets_=null,this.bands_=[],this.crossOrigin_=t.crossOrigin||null,this.displayFootprint_=t.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!t.displayGeoTiffByDefault,this.displayPreview_=!!t.displayPreview,this.displayOverview_=t.displayOverview!==!1,this.displayWebMapLink_=t.displayWebMapLink||!1,this.buildTileUrlTemplate_=t.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=t.useTileLayerAsFallback||!1,this.boundsStyle_=t.boundsStyle||dFt,this.collectionStyle_=t.collectionStyle||hFt,this.boundsLayer_=null,t.data){try{this.configure_(t.data,t.url,t.assets,t.bands)}catch(r){this.handleError_(r)}return}if(!t.url)throw new Error("Either url or data must be provided");fetch(t.url).then(r=>r.json()).then(r=>this.configure_(r,t.url,t.assets,t.bands)).catch(r=>this.handleError_(r))}getBoundsLayer(){return this.boundsLayer_}handleError_(t){this.dispatchEvent(new IRt(t))}configure_(t,n=null,r=null,i=[]){t instanceof Pp||t instanceof iS?this.data_=t:this.data_=cFt(t),n&&n.includes("://")&&this.data_.setAbsoluteUrl(n),this.bands_=i,this.boundsLayer_=this.addFootprint_();const o=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(JEe(this.boundsStyle_,this))};this.getLayers().on("add",o),this.getLayers().on("remove",o),this.setAssets(r).then(()=>this.dispatchEvent("assetsready")).catch(s=>this.handleError_(s)),this.dispatchEvent("sourceready")}async addApiCollection_(){const t=this.getData().getAll().map(n=>{const r=new OB({data:n,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_});return this.addLayer_(r),r});return await Promise.all(t)}async addStacAssets_(){let t=this.getAssets();if(t===null){t=[];const r=this.getData().getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);if(r)t.push(r);else{const i=this.getData().getThumbnails().filter(o=>!Array.isArray(o.roles)||!o.roles.includes("example"));i.length>0&&t.push(i[0])}}const n=t.map(r=>this.addImagery_(r));return await Promise.all(n)}async addImagery_(t){if(t){if(t.isGeoTIFF())return await this.addGeoTiff_(t);if(t.canBrowserDisplayImage())return await this.addThumbnail_(t)}}async addThumbnail_(t){if(!this.displayPreview_)return;let n={url:t.getAbsoluteUrl(),projection:await KEe(t,"EPSG:4326"),imageExtent:t.getContext().getBoundingBox(),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(n=await this.getSourceOptions_(ro.ImageStatic,n,t));const r=new b$({source:new Ake(n)});return this.addLayer_(r,t),r}async addWebMapLinks_(){const t=this.getWebMapLinks();if(t.length>0)return await this.addLayerForLink(t[0])}async addLayerForLink(t){const n=gFt(t);if(!n)return;const r={attributions:t.getMetadata("attribution")||this.data_.getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:n},i=async(s,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(s,a,t)),a),o=[];switch(t.rel){case"pmtiles":const a=await new RB(r.url).getHeader();let l;switch(a.tileType){case ob.Mvt:l=new fFt(await i(ro.PMTilesVector,r));break;case ob.Avif:case ob.Jpeg:case ob.Png:case ob.Webp:l=new ZEe(await i(ro.PMTilesRaster,r));break;default:return}o.push(l);break;case"tilejson":o.push(new Oke(await i(ro.TileJSON,r)));break;case"wms":if(!Array.isArray(t["wms:layers"]))break;for(const c in t["wms:layers"]){const d=t["wms:layers"][c]||"";let h="";Array.isArray(t["wms:styles"])&&typeof t["wms:styles"][c]=="string"&&(h=t["wms:styles"][c]);const p=Object.assign({LAYERS:d,STYLES:h},t["wms:dimensions"]);typeof t["wms:transparent"]=="boolean"&&(p.TRANSPARENT=String(t["wms:transparent"])),typeof t.type=="string"&&t.type.startsWith("image/")&&(p.FORMAT=t.type);const m=await i(ro.TileWMS,Object.assign({},r,{params:p}));o.push(new zCe(m))}break;case"wmts":const u=await mFt(n);if(!u)return;const f=Array.isArray(t["wmts:layer"])?t["wmts:layer"]:[t["wmts:layer"]];for(const c of f){let d=Object.assign({},r,{layer:c});typeof t.type=="string"&&t.type.startsWith("image/")&&(d.format=t.type),d=await i(ro.WMTS,d),o.push(new jCe(UCe(u,d)))}break;case"xyz":o.push(new X2(await i(ro.XYZ,r)));break;default:return}return o.map(s=>{let a;return s instanceof fD?a=new OCe({source:s,declutter:!0}):s instanceof ZEe?a=new w3({source:s}):a=new h3({source:s}),this.addLayer_(a,t),a})}async addGeoTiff_(t){if(!this.displayOverview_)return;if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);let r={sources:[pFt(t,this.bands_)]};const i=await KEe(t);i&&(r.projection=i),this.getSourceOptions_&&(r=await this.getSourceOptions_(ro.GeoTIFF,r,t));const o=async(s,a)=>(a&&this.getLayers().remove(a),await this.addTileLayerForImagery_(s));try{const s=new uI(r),a=new w3({source:s});if(this.useTileLayerAsFallback_){const l=()=>o(t,a);s.on("error",l),s.on("tileloaderror",l),s.on("change",()=>{s.getState()==="error"&&o(t,a)}),a.on("error",l),await s.getView()}return this.addLayer_(a,t),a}catch(s){if(this.useTileLayerAsFallback_)return await o(t,null);this.handleError_(s)}}async addTileLayerForImagery_(t){let n={crossOrigin:this.crossOrigin_,url:this.buildTileUrlTemplate_(t)};this.getSourceOptions_&&(n=await this.getSourceOptions_(ro.XYZ,n,t));const r=new h3({source:new X2(n)});return this.addLayer_(r,t),r}addLayer_(t,n,r=0){t.set("stac",n),t.setZIndex(r),this.getLayers().push(t)}addFootprint_(){let t=null;const n=this.getData();if(n.isItemCollection()||n.isCollectionCollection()?t=OIe(n.getBoundingBox()):t=n.toGeoJSON(),t){const r=new sD,i=new J_({format:r,loader:(s,a,l)=>{const u=r.readFeatures(t,{featureProjection:l});i.addFeatures(u)}}),o=new o$({source:i,style:JEe(this.boundsStyle_,this),visible:this.displayFootprint_});return o.set("bounds",!0),this.addLayer_(o,n,1),o}return null}async updateLayers_(){const t=this.getLayers();for(let r=t.getLength()-1;r>=0;r--){const o=t.item(r).get("stac");o&&(o.isLink()||o.isAsset())&&t.removeAt(r)}const n=this.getData();n.isItemCollection()||n.isCollectionCollection()?await this.addApiCollection_():(n.isItem()||n.isCollection())&&await this.addStacAssets_(),this.displayWebMapLink_&&(Array.isArray(this.displayWebMapLink_)||this.hasOnlyBounds())&&await this.addWebMapLinks_()}hasOnlyBounds(){const t=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==t)>"u"}getWebMapLinks(){let t=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(t=[this.displayWebMapLink_]);let n=this.data_.getLinksWithRels(t);return Array.isArray(this.displayWebMapLink_)?n=this.displayWebMapLink_.map(r=>{if(typeof r=="string"){const i=n.find(o=>o.id===r);return i||null}return r}).filter(r=>!!r):n.sort((r,i)=>{const o=t.indexOf(r.rel),s=t.indexOf(i.rel);return o-s}),n}async setAssets(t){Array.isArray(t)?this.assets_=t.map(n=>typeof n=="string"?this.getData().getAsset(n):n instanceof Pp?n:new Pp(n)):this.assets_=null,await this.updateLayers_()}getData(){return this.data_}getAssets(){return this.assets_}getExtent(){if(!this.boundsLayer_)return;const t=this.boundsLayer_.getMapInternal();if(!t)return;const n=t.getView();if(!n)return;const r=this.getData();if(!r)return;const i=r.getBoundingBox();if(i)return qCe(i,"EPSG:4326",n.getProjection())}}Qje(jM);window.eoxMapAdvancedOlLayers={...zYe,STAC:OB};class yFt extends hh{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,tilePixelRatio:t.tilePixelRatio,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection,wrapX:t.wrapX}),this.version_=t.version!==void 0?t.version:"1.0.0",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,fetch(t.url).then(n=>n.text()).then(n=>new window.DOMParser().parseFromString(n,"application/xml")).then(n=>{this.handleCapabilitiesResponse(n,t)})}handleCapabilitiesResponse(t,n){const i=new H$().read(t),o=UCe(i,n);this.crossOrigin=o.crossOrigin,this.projection=o.projection,this.tileGrid=o.tileGrid,this.requestEncoding_=o.requestEncoding,this.matrixSet_=o.matrixSet,this.style_=o.style,this.format_=o.format,this.dimensions_=o.dimensions,this.setUrls(o.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=v$(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(t){const n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n==="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=n==="KVP"?p3(t,r):t.replace(/\{(\w+?)\}/g,(s,a)=>a.toLowerCase()in r?r[a.toLowerCase()]:s);const i=this.tileGrid,o=this.dimensions_;return function(s){if(!s)return;const a={TileMatrix:i.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(a,o);let l=t;return n==="KVP"?l=p3(l,a):l=l.replace(/\{(\w+?)\}/g,(u,f)=>a[f]),l}}}var Tr,wa=((Tr={})[Tr.Unknown=0]="Unknown",Tr[Tr.Point=1]="Point",Tr[Tr.LineString=2]="LineString",Tr[Tr.Polygon=3]="Polygon",Tr[Tr.MultiPoint=4]="MultiPoint",Tr[Tr.MultiLineString=5]="MultiLineString",Tr[Tr.MultiPolygon=6]="MultiPolygon",Tr[Tr.GeometryCollection=7]="GeometryCollection",Tr[Tr.CircularString=8]="CircularString",Tr[Tr.CompoundCurve=9]="CompoundCurve",Tr[Tr.CurvePolygon=10]="CurvePolygon",Tr[Tr.MultiCurve=11]="MultiCurve",Tr[Tr.MultiSurface=12]="MultiSurface",Tr[Tr.Curve=13]="Curve",Tr[Tr.Surface=14]="Surface",Tr[Tr.PolyhedralSurface=15]="PolyhedralSurface",Tr[Tr.TIN=16]="TIN",Tr[Tr.Triangle=17]="Triangle",Tr);const Lw=4,Rw=4,oS=4,up=new Int32Array(2),QEe=new Float32Array(up.buffer),eSe=new Float64Array(up.buffer),tC=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var P8;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(P8||(P8={}));class fh{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new fh(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return up[0]=this.readInt32(t),QEe[0]}readFloat64(t){return up[tC?0:1]=this.readInt32(t),up[tC?1:0]=this.readInt32(t+4),eSe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){QEe[0]=n,this.writeInt32(t,up[0])}writeFloat64(t,n){eSe[0]=n,this.writeInt32(t,up[tC?0:1]),this.writeInt32(t+4,up[tC?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Lw+Rw)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Rw;n++)t+=String.fromCharCode(this.readInt8(this.position_+Lw+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Lw;const i=this.bytes_.subarray(t,t+r);return n===P8.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Lw}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Rw)throw new Error("FlatBuffers: file identifier must be length "+Rw);for(let n=0;n<Rw;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Lw+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const o=t(i);o!==null&&r.push(o)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const o=t(i);o!==null&&r.push(o.unpack())}return r}}class za{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsGeometry(t,n){return(n||new za).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,n){return t.setPosition(t.position()+oS),(n||new za).__init(t.readInt32(t.position())+t.position(),t)}ends(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb.__vector(this.bb_pos+n)+4*t):0}endsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}xyLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}zLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){let t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}mLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}tLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readUint64(this.bb.__vector(this.bb_pos+n)+8*t):BigInt(0)}tmLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):wa.Unknown}parts(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new za).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}partsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,n){t.addFieldOffset(0,n,0)}static createEndsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startEndsVector(t,n){t.startVector(4,n,4)}static addXy(t,n){t.addFieldOffset(1,n,0)}static createXyVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startXyVector(t,n){t.startVector(8,n,8)}static addZ(t,n){t.addFieldOffset(2,n,0)}static createZVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startZVector(t,n){t.startVector(8,n,8)}static addM(t,n){t.addFieldOffset(3,n,0)}static createMVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startMVector(t,n){t.startVector(8,n,8)}static addT(t,n){t.addFieldOffset(4,n,0)}static createTVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startTVector(t,n){t.startVector(8,n,8)}static addTm(t,n){t.addFieldOffset(5,n,0)}static createTmVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startTmVector(t,n){t.startVector(8,n,8)}static addType(t,n){t.addFieldInt8(6,n,wa.Unknown)}static addParts(t,n){t.addFieldOffset(7,n,0)}static createPartsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startPartsVector(t,n){t.startVector(4,n,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,n,r,i,o,s,a,l,u){return za.startGeometry(t),za.addEnds(t,n),za.addXy(t,r),za.addZ(t,i),za.addM(t,o),za.addT(t,s),za.addTm(t,a),za.addType(t,l),za.addParts(t,u),za.endGeometry(t)}}function c5(e,t){let n=[];for(let r=0;r<e.length;r+=2){let i=[e[r],e[r+1]];t&&i.push(t[r>>1]),n.push(i)}return n}function N8(e,t){let n=t;if(n===wa.Unknown&&(n=e.type()),n===wa.GeometryCollection){let i=[];for(let o=0;o<e.partsLength();o++){let s=e.parts(o),a=s.type();i.push(N8(s,a))}return{type:wa[n],geometries:i}}if(n===wa.MultiPolygon){let i=[];for(let o=0;o<e.partsLength();o++)i.push(N8(e.parts(o),wa.Polygon));return{type:wa[n],coordinates:i.map(o=>o.coordinates)}}let r=function(i,o){let s=i.xyArray(),a=i.zArray();switch(o){case wa.Point:{let l=Array.from(s);return a&&l.push(a[0]),l}case wa.MultiPoint:case wa.LineString:return c5(s,a);case wa.MultiLineString:case wa.Polygon:return function(l,u,f){let c;if(!f||f.length===0)return[c5(l,u)];let d=0,h=Array.from(f).map(p=>l.slice(d,d=p<<1));return u&&(d=0,c=Array.from(f).map(p=>u.slice(d,d=p))),h.map((p,m)=>c5(p,c?c[m]:void 0))}(s,a,i.endsArray())}}(e,n);return{type:wa[n],coordinates:r}}var hi,Vs=((hi={})[hi.Byte=0]="Byte",hi[hi.UByte=1]="UByte",hi[hi.Bool=2]="Bool",hi[hi.Short=3]="Short",hi[hi.UShort=4]="UShort",hi[hi.Int=5]="Int",hi[hi.UInt=6]="UInt",hi[hi.Long=7]="Long",hi[hi.ULong=8]="ULong",hi[hi.Float=9]="Float",hi[hi.Double=10]="Double",hi[hi.String=11]="String",hi[hi.Json=12]="Json",hi[hi.DateTime=13]="DateTime",hi[hi.Binary=14]="Binary",hi);class Cs{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsColumn(t,n){return(n||new Cs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,n){return t.setPosition(t.position()+oS),(n||new Cs).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}type(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Vs.Byte}title(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}width(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){let t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){let t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){let t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb_pos+n,t):null}static startColumn(t){t.startObject(11)}static addName(t,n){t.addFieldOffset(0,n,0)}static addType(t,n){t.addFieldInt8(1,n,Vs.Byte)}static addTitle(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWidth(t,n){t.addFieldInt32(4,n,-1)}static addPrecision(t,n){t.addFieldInt32(5,n,-1)}static addScale(t,n){t.addFieldInt32(6,n,-1)}static addNullable(t,n){t.addFieldInt8(7,+n,1)}static addUnique(t,n){t.addFieldInt8(8,+n,0)}static addPrimaryKey(t,n){t.addFieldInt8(9,+n,0)}static addMetadata(t,n){t.addFieldOffset(10,n,0)}static endColumn(t){let n=t.endObject();return t.requiredField(n,4),n}static createColumn(t,n,r,i,o,s,a,l,u,f,c,d){return Cs.startColumn(t),Cs.addName(t,n),Cs.addType(t,r),Cs.addTitle(t,i),Cs.addDescription(t,o),Cs.addWidth(t,s),Cs.addPrecision(t,a),Cs.addScale(t,l),Cs.addNullable(t,u),Cs.addUnique(t,f),Cs.addPrimaryKey(t,c),Cs.addMetadata(t,d),Cs.endColumn(t)}}class dc{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFeature(t,n){return(n||new dc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,n){return t.setPosition(t.position()+oS),(n||new dc).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){let n=this.bb.__offset(this.bb_pos,4);return n?(t||new za).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}properties(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb.__vector(this.bb_pos+n)+t):0}propertiesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new Cs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,n){t.addFieldOffset(0,n,0)}static addProperties(t,n){t.addFieldOffset(1,n,0)}static createPropertiesVector(t,n){t.startVector(1,n.length,1);for(let r=n.length-1;r>=0;r--)t.addInt8(n[r]);return t.endVector()}static startPropertiesVector(t,n){t.startVector(1,n,1)}static addColumns(t,n){t.addFieldOffset(2,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,n){t.finish(n)}static finishSizePrefixedFeatureBuffer(t,n){t.finish(n,void 0,!0)}static createFeature(t,n,r,i){return dc.startFeature(t),dc.addGeometry(t,n),dc.addProperties(t,r),dc.addColumns(t,i),dc.endFeature(t)}}new TextEncoder;let tSe=new TextDecoder;function bFt(e,t){let n={};if(!t||t.length===0)return n;let r=e.propertiesArray();if(!r)return n;let i=new DataView(r.buffer,r.byteOffset),o=e.propertiesLength(),s=0;for(;s<o;){let a=i.getUint16(s,!0);s+=2;let l=t[a],u=l.name;switch(l.type){case Vs.Bool:n[u]=!!i.getUint8(s),s+=1;break;case Vs.Byte:n[u]=i.getInt8(s),s+=1;break;case Vs.UByte:n[u]=i.getUint8(s),s+=1;break;case Vs.Short:n[u]=i.getInt16(s,!0),s+=2;break;case Vs.UShort:n[u]=i.getUint16(s,!0),s+=2;break;case Vs.Int:n[u]=i.getInt32(s,!0),s+=4;break;case Vs.UInt:n[u]=i.getUint32(s,!0),s+=4;break;case Vs.Long:n[u]=Number(i.getBigInt64(s,!0)),s+=8;break;case Vs.ULong:n[u]=Number(i.getBigUint64(s,!0)),s+=8;break;case Vs.Float:n[u]=i.getFloat32(s,!0),s+=4;break;case Vs.Double:n[u]=i.getFloat64(s,!0),s+=8;break;case Vs.DateTime:case Vs.String:{let f=i.getUint32(s,!0);s+=4,n[u]=tSe.decode(r.subarray(s,s+f)),s+=f;break}case Vs.Json:{let f=i.getUint32(s,!0);s+=4;let c=tSe.decode(r.subarray(s,s+f));n[u]=JSON.parse(c),s+=f;break}case Vs.Binary:{let f=i.getUint32(s,!0);s+=4,n[u]=r.subarray(s,s+f),s+=f;break}default:throw Error("Unknown type "+l.type)}}return n}function $B(e,t,n){let r=n.columns;return{type:"Feature",id:e,geometry:N8(t.geometry(),n.geometryType),properties:bFt(t,r)}}const IB=new Uint8Array(0);function vFt(){return this._source.cancel()}function xFt(e,t){if(!e.length)return t;if(!t.length)return e;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function wFt(){var e=this,t=e._array.subarray(e._index);return e._source.read().then(function(n){return e._array=IB,e._index=0,n.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:xFt(t,n.value)}})}function _Ft(e){if((e|=0)<0)throw new Error("invalid length");var t=this,n=this._array.length-this._index;if(this._index+e<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=e));var r=new Uint8Array(e);return r.set(this._array.subarray(this._index)),function i(){return t._source.read().then(function(o){return o.done?(t._array=IB,t._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=e?(t._array=o.value,t._index=e-n,r.set(o.value.subarray(0,e-n),n),r):(r.set(o.value,n),n+=o.value.length,i())})}()}function EFt(e){return typeof e.slice=="function"?e:new kR(typeof e.read=="function"?e:e.getReader())}function kR(e){this._source=e,this._array=IB,this._index=0}kR.prototype.read=wFt;kR.prototype.slice=_Ft;kR.prototype.cancel=vFt;class xu{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsCrs(t,n){return(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,n){return t.setPosition(t.position()+oS),(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}org(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}code(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}wkt(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__string(this.bb_pos+n,t):null}codeString(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb_pos+n,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,n){t.addFieldOffset(0,n,0)}static addCode(t,n){t.addFieldInt32(1,n,0)}static addName(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWkt(t,n){t.addFieldOffset(4,n,0)}static addCodeString(t,n){t.addFieldOffset(5,n,0)}static endCrs(t){return t.endObject()}static createCrs(t,n,r,i,o,s,a){return xu.startCrs(t),xu.addOrg(t,n),xu.addCode(t,r),xu.addName(t,i),xu.addDescription(t,o),xu.addWkt(t,s),xu.addCodeString(t,a),xu.endCrs(t)}}class uT{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsHeader(t,n){return(n||new uT).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,n){return t.setPosition(t.position()+oS),(n||new uT).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}envelope(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}envelopeLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wa.Unknown}hasZ(){let t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){let t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){let t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){let t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new Cs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){let n=this.bb.__offset(this.bb_pos,24);return n?(t||new xu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}title(t){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb_pos+n,t):null}metadata(t){let n=this.bb.__offset(this.bb_pos,30);return n?this.bb.__string(this.bb_pos+n,t):null}static startHeader(t){t.startObject(14)}static addName(t,n){t.addFieldOffset(0,n,0)}static addEnvelope(t,n){t.addFieldOffset(1,n,0)}static createEnvelopeVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startEnvelopeVector(t,n){t.startVector(8,n,8)}static addGeometryType(t,n){t.addFieldInt8(2,n,wa.Unknown)}static addHasZ(t,n){t.addFieldInt8(3,+n,0)}static addHasM(t,n){t.addFieldInt8(4,+n,0)}static addHasT(t,n){t.addFieldInt8(5,+n,0)}static addHasTm(t,n){t.addFieldInt8(6,+n,0)}static addColumns(t,n){t.addFieldOffset(7,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static addFeaturesCount(t,n){t.addFieldInt64(8,n,BigInt("0"))}static addIndexNodeSize(t,n){t.addFieldInt16(9,n,16)}static addCrs(t,n){t.addFieldOffset(10,n,0)}static addTitle(t,n){t.addFieldOffset(11,n,0)}static addDescription(t,n){t.addFieldOffset(12,n,0)}static addMetadata(t,n){t.addFieldOffset(13,n,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,n){t.finish(n)}static finishSizePrefixedHeaderBuffer(t,n){t.finish(n,void 0,!0)}}function PB(e){let t=uT.getRootAsHeader(e),n=t.featuresCount(),r=t.indexNodeSize(),i=[];for(let a=0;a<t.columnsLength();a++){let l=t.columns(a);if(!l)throw Error("Column unexpectedly missing");if(!l.name())throw Error("Column name unexpectedly missing");i.push({name:l.name(),type:l.type(),title:l.title(),description:l.description(),width:l.width(),precision:l.precision(),scale:l.scale(),nullable:l.nullable(),unique:l.unique(),primary_key:l.primaryKey()})}let o=t.crs(),s=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null;return{geometryType:t.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:s,title:t.title(),description:t.description(),metadata:t.metadata()}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B8=function(e,t){return B8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},B8(e,t)};function SFt(e,t){B8(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function F1(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{u(r.next(f))}catch(c){s(c)}}function l(f){try{u(r.throw(f))}catch(c){s(c)}}function u(f){f.done?o(f.value):i(f.value).then(a,l)}u((r=r.apply(e,[])).next())})}function ng(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function wv(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function R_(e){return this instanceof R_?(this.v=e,this):new R_(e)}function AFt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){o.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){c(o[0][3],p)}}function l(d){d.value instanceof R_?Promise.resolve(d.value.v).then(u,f):c(o[0][2],d)}function u(d){a("next",d)}function f(d){a("throw",d)}function c(d,h){d(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}var WIe=function(e){SFt(t,e);function t(n){var r=e.call(this,n)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return t}(Error);(function(){function e(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();function z8(e){e!=null&&typeof e.then=="function"&&e.then(dT,dT)}var f5=0,nSe=1,_0=2,cT=3,j8=4,fT=1024,dT=function(){};function Ib(e){var t=e.err,n=Promise.resolve(e.execution).then(function(r){if(t!=null)throw t;return r});return e.err=void 0,e.execution=n.then(function(){},function(){}),e.pending===void 0?n:e.pending.then(function(){return n})}function Fm(e,t){var n=e.state>=cT;return Promise.resolve(t).then(function(r){return!n&&e.state>=j8?Ib(e).then(function(i){return{value:i,done:!0}}):{value:r,done:n}})}function NB(e,t){var n,r;if(!(e.state>=_0))if(e.state=_0,e.onnext(),e.onstop(),e.err==null&&(e.err=t),e.pushes.length===0&&(typeof e.buffer>"u"||e.buffer.empty))N2(e);else try{for(var i=wv(e.pushes),o=i.next();!o.done;o=i.next()){var s=o.value;s.resolve()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function N2(e){var t,n;if(!(e.state>=cT)){e.state<_0&&NB(e),e.state=cT,e.buffer=void 0;try{for(var r=wv(e.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,s=e.pending===void 0?Ib(e):e.pending.then(function(){return Ib(e)});o.resolve(Fm(e,s))}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function rSe(e){e.state>=j8||(e.state<cT&&N2(e),e.state=j8)}function CFt(e,t){if(z8(t),e.pushes.length>=fT)throw new WIe("No more than "+fT+" pending calls to push are allowed on a single repeater.");if(e.state>=_0)return Promise.resolve(void 0);var n=e.pending===void 0?Promise.resolve(t):e.pending.then(function(){return t});n=n.catch(function(l){e.state<_0&&(e.err=l),rSe(e)});var r;if(e.nexts.length){var i=e.nexts.shift();i.resolve(Fm(e,n)),e.nexts.length?r=Promise.resolve(e.nexts[0].value):typeof e.buffer<"u"&&!e.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(l){return e.onnext=l})}else typeof e.buffer<"u"&&!e.buffer.full?(e.buffer.add(n),r=Promise.resolve(void 0)):r=new Promise(function(l){return e.pushes.push({resolve:l,value:n})});var o=!0,s={},a=r.catch(function(l){if(o)throw l});return s.then=function(l,u){return o=!1,Promise.prototype.then.call(r,l,u)},s.catch=function(l){return o=!1,Promise.prototype.catch.call(r,l)},s.finally=r.finally.bind(r),e.pending=n.then(function(){return a}).catch(function(l){e.err=l,rSe(e)}),s}function kFt(e){var t=NB.bind(null,e),n=new Promise(function(r){return e.onstop=r});return t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),t}function TFt(e){if(!(e.state>=nSe)){e.state=nSe;var t=CFt.bind(null,e),n=kFt(e);e.execution=new Promise(function(r){return r(e.executor(t,n))}),e.execution.catch(function(){return NB(e)})}}var nC=new WeakMap,sS=function(){function e(t,n){nC.set(this,{executor:t,buffer:n,err:void 0,state:f5,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:dT,onstop:dT})}return e.prototype.next=function(t){z8(t);var n=nC.get(this);if(n===void 0)throw new Error("WeakMap error");if(n.nexts.length>=fT)throw new WIe("No more than "+fT+" pending calls to next are allowed on a single repeater.");if(n.state<=f5&&TFt(n),n.onnext(t),typeof n.buffer<"u"&&!n.buffer.empty){var r=Fm(n,n.buffer.remove());if(n.pushes.length){var i=n.pushes.shift();n.buffer.add(i.value),n.onnext=i.resolve}return r}else if(n.pushes.length){var o=n.pushes.shift();return n.onnext=o.resolve,Fm(n,o.value)}else if(n.state>=_0)return N2(n),Fm(n,Ib(n));return new Promise(function(s){return n.nexts.push({resolve:s,value:t})})},e.prototype.return=function(t){z8(t);var n=nC.get(this);if(n===void 0)throw new Error("WeakMap error");return N2(n),n.execution=Promise.resolve(n.execution).then(function(){return t}),Fm(n,Ib(n))},e.prototype.throw=function(t){var n=nC.get(this);if(n===void 0)throw new Error("WeakMap error");return n.state<=f5||n.state>=_0||typeof n.buffer<"u"&&!n.buffer.empty?(N2(n),n.err==null&&(n.err=t),Fm(n,Ib(n))):this.next(Promise.reject(t))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=DFt,e.merge=LFt,e.zip=RFt,e.latest=FFt,e}();function TR(e,t){var n,r,i=[],o=function(u){u!=null&&typeof u[Symbol.asyncIterator]=="function"?i.push(u[Symbol.asyncIterator]()):u!=null&&typeof u[Symbol.iterator]=="function"?i.push(u[Symbol.iterator]()):i.push(function(){return AFt(this,arguments,function(){return ng(this,function(d){switch(d.label){case 0:return t.yieldValues?[4,R_(u)]:[3,3];case 1:return[4,d.sent()];case 2:d.sent(),d.label=3;case 3:return t.returnValues?[4,R_(u)]:[3,5];case 4:return[2,d.sent()];case 5:return[2]}})})}())};try{for(var s=wv(e),a=s.next();!a.done;a=s.next()){var l=a.value;o(l)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function DFt(e){var t=this,n=TR(e,{returnValues:!0});return new sS(function(r,i){return F1(t,void 0,void 0,function(){var o,s,a,l,u,f;return ng(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2];s=!1,i.then(function(){o(),s=!0}),c.label=1;case 1:c.trys.push([1,,5,7]),l=void 0,u=0,f=function(){var d,h,p,m,b,y;return ng(this,function(v){switch(v.label){case 0:d=u;try{for(h=(b=void 0,wv(n)),p=h.next();!p.done;p=h.next())m=p.value,Promise.resolve(m.next()).then(function(w){w.done?(i(),a===void 0&&(a=w)):u===d&&(u++,o(w))},function(w){return i(w)})}catch(w){b={error:w}}finally{try{p&&!p.done&&(y=h.return)&&y.call(h)}finally{if(b)throw b.error}}return[4,new Promise(function(w){return o=w})];case 1:return l=v.sent(),l===void 0?[3,3]:[4,r(l.value)];case 2:v.sent(),v.label=3;case 3:return[2]}})},c.label=2;case 2:return s?[3,4]:[5,f()];case 3:return c.sent(),[3,2];case 4:return[2,a&&a.value];case 5:return i(),[4,Promise.race(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}function LFt(e){var t=this,n=TR(e,{yieldValues:!0});return new sS(function(r,i){return F1(t,void 0,void 0,function(){var o,s,a,l=this;return ng(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2];o=[],s=!1,i.then(function(){var f,c;s=!0;try{for(var d=wv(o),h=d.next();!h.done;h=d.next()){var p=h.value;p()}}catch(m){f={error:m}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(f)throw f.error}}}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.all(n.map(function(f,c){return F1(l,void 0,void 0,function(){var d,h;return ng(this,function(p){switch(p.label){case 0:p.trys.push([0,,6,9]),p.label=1;case 1:return s?[3,5]:(Promise.resolve(f.next()).then(function(m){return o[c](m)},function(m){return i(m)}),[4,new Promise(function(m){o[c]=m})]);case 2:return d=p.sent(),d===void 0?[3,4]:d.done?(a=d,[2]):[4,r(d.value)];case 3:p.sent(),p.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return h=f.return,h?[4,f.return()]:[3,8];case 7:h=p.sent(),p.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return u.sent(),[2,a&&a.value];case 3:return i(),[7];case 4:return[2]}})})})}function RFt(e){var t=this,n=TR(e,{returnValues:!0});return new sS(function(r,i){return F1(t,void 0,void 0,function(){var o,s,a,l;return ng(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2,[]];s=!1,i.then(function(){o(),s=!0}),u.label=1;case 1:u.trys.push([1,,6,8]),u.label=2;case 2:return s?[3,5]:(Promise.all(n.map(function(f){return f.next()})).then(function(f){return o(f)},function(f){return i(f)}),[4,new Promise(function(f){return o=f})]);case 3:return a=u.sent(),a===void 0?[2]:(l=a.map(function(f){return f.value}),a.some(function(f){return f.done})?[2,l]:[4,r(l)]);case 4:return u.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(n.map(function(f){return f.return&&f.return()}))];case 7:return u.sent(),[7];case 8:return[2]}})})})}function FFt(e){var t=this,n=TR(e,{yieldValues:!0,returnValues:!0});return new sS(function(r,i){return F1(t,void 0,void 0,function(){var o,s,a,l,u,f=this;return ng(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2,[]];s=[],a=!1,i.then(function(){var d,h;o();try{for(var p=wv(s),m=p.next();!m.done;m=p.next()){var b=m.value;b()}}catch(y){d={error:y}}finally{try{m&&!m.done&&(h=p.return)&&h.call(p)}finally{if(d)throw d.error}}a=!0}),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map(function(d){return d.next()})).then(function(d){return o(d)},function(d){return i(d)}),[4,new Promise(function(d){return o=d})];case 2:return l=c.sent(),l===void 0?[2]:(u=l.map(function(d){return d.value}),l.every(function(d){return d.done})?[2,u]:[4,r(u.slice())]);case 3:return c.sent(),[4,Promise.all(n.map(function(d,h){return F1(f,void 0,void 0,function(){var p;return ng(this,function(m){switch(m.label){case 0:if(l[h].done)return[2,l[h].value];m.label=1;case 1:return a?[3,4]:(Promise.resolve(d.next()).then(function(b){return s[h](b)},function(b){return i(b)}),[4,new Promise(function(b){return s[h]=b})]);case 2:return p=m.sent(),p===void 0?[2,l[h].value]:p.done?[2,p.value]:(u[h]=p.value,[4,r(u.slice())]);case 3:return m.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,c.sent()];case 5:return i(),[4,Promise.all(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}const ZT=class ZT{constructor(){tn(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}};tn(ZT,"global",new ZT);let hT=ZT;const MFt=40,OFt=16;function BB(e,t){t=Math.min(Math.max(+t,2),65535);let n=e,r=n;do r+=n=Math.ceil(n/t);while(n!==1);return 40*r}function $Ft(e,t){if(t<2)throw Error("Node size must be at least 2");if(e===0)throw Error("Number of items must be greater than 0");let n=e,r=n,i=[n];do r+=n=Math.ceil(n/t),i.push(n);while(n!==1);let o=[];for(let a of(n=r,i))o.push(n-a),n-=a;let s=[];for(let a=0;a<i.length;a++)s.push([o[a],o[a]+i[a]]);return s}async function*IFt(e,t,n,r){class i{constructor(h,p){tn(this,"_level");tn(this,"nodes");this._level=p,this.nodes=h}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(h){this.nodes[1]=h}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:o,minY:s,maxX:a,maxY:l}=n,u=$Ft(e,t),f=u[0][0],c=[new i([0,1],u.length-1)];for(;c.length!=0;){let d=c.shift(),h=d.startNodeIdx(),p=h>=f,m=(()=>{let[,v]=u[d.level()],w=Math.min(d.endNodeIdx()+t,v);return p&&w<v?w+1:w})(),b=m-h,y=new DataView(await r(40*h,40*b));for(let v=h;v<m;v++){let w=v-h,E=40*w;if(a<y.getFloat64(E+0,!0)||l<y.getFloat64(E+8,!0)||o>y.getFloat64(E+16,!0)||s>y.getFloat64(E+24,!0))continue;let A=y.getBigUint64(E+32,!0);if(p){let R=(()=>{if(!(v<e-1))return null;{let B=(w+1)*40;return y.getBigUint64(B+32,!0)-A}})(),M=v-f;yield[Number(A),M,Number(R)];continue}let T=hT.global.extraRequestThreshold()/40,D=c[c.length-1];if(D!==void 0&&D.level()==d.level()-1&&A<D.endNodeIdx()+T){D.extendEndNodeIdx(Number(A));continue}let k=(()=>{let R=d.level()-1;return new i([Number(A),Number(A)+1],R)})();D!==void 0&&(D.level(),k.level()),c.push(k)}}}const Im=new Uint8Array([102,103,98,3,102,103,98,0]),Ud=4;class zB{constructor(t,n,r,i,o){tn(this,"headerClient");tn(this,"header");tn(this,"headerLength");tn(this,"indexLength");tn(this,"nocache");this.headerClient=t,this.header=n,this.headerLength=r,this.indexLength=i,this.nocache=o}static async open(t,n){let r,i=new iSe(t,n),o=2024+(()=>{let u,f=0;for(u=0;u<3;u++)f+=OFt**u*MFt;return f})();if(!new Uint8Array(await i.getRange(0,8,o,"header")).subarray(0,3).every((u,f)=>Im[f]===u))throw Error("Not a FlatGeobuf file");if((r=new DataView(await i.getRange(8,4,o,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");let s=await i.getRange(12,r,o,"header"),a=PB(new fh(new Uint8Array(s))),l=BB(a.featuresCount,a.indexNodeSize);return new zB(i,a,r,l,n)}async*selectBbox(t){let n=this.lengthBeforeTree(),r=this.headerClient,i=async function(l,u){return r.getRange(n+l,u,0,"index")},o=[],s=[];for await(let l of IFt(this.header.featuresCount,this.header.indexNodeSize,t,i)){let[u,f]=l,[,,c]=l;if(c||(c=4),s.length==0){s.push([u,c,f]);continue}let d=s[s.length-1];u-(d[0]+d[1])>hT.global.extraRequestThreshold()&&(o.push(s),s=[]),s.push([u,c,f])}this.headerClient.logUsage("header+index"),s.length>0&&o.push(s);let a=o.flatMap(l=>this.readFeatureBatch(l,this.nocache));yield*sS.merge(a)}lengthBeforeTree(){return Im.length+Ud+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(t){return new iSe(this.headerClient.httpClient,t)}async*readFeatureBatch(t,n){let[r]=t[0],[i,o]=t[t.length-1],s=this.buildFeatureClient(n),a=i+o-r;for(let[l,,u]of t){let f=await this.readFeature(s,l,a);yield{id:u,feature:f},a=0}s.logUsage("feature")}async readFeature(t,n,r){let i,o=n+this.lengthBeforeFeatures();i=new DataView(await t.getRange(o,4,r,"feature length")).getUint32(0,!0);let s=new Uint8Array(await t.getRange(o+4,i,r,"feature data")),a=new Uint8Array(i+Ud);a.set(s,Ud);let l=new fh(a);return l.setPosition(Ud),dc.getRootAsFeature(l)}}let iSe=class{constructor(t,n){tn(this,"httpClient");tn(this,"bytesEverUsed",0);tn(this,"bytesEverFetched",0);tn(this,"buffer",new ArrayBuffer(0));tn(this,"head",0);if(typeof t=="string")this.httpClient=new oSe(t,n);else if(t instanceof oSe)this.httpClient=t;else throw Error("Unknown source ")}async getRange(t,n,r,i){this.bytesEverUsed+=n;let o=t-this.head,s=o+n;if(o>=0&&s<=this.buffer.byteLength)return this.buffer.slice(o,s);let a=Math.max(n,r);return this.bytesEverFetched+=a,this.buffer=await this.httpClient.getRange(t,a,i),this.head=t,this.buffer.slice(0,n)}logUsage(t){t.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}};class oSe{constructor(t,n){tn(this,"url");tn(this,"nocache");tn(this,"requestsEverMade",0);tn(this,"bytesEverRequested",0);this.url=t,this.nocache=n}async getRange(t,n,r){this.requestsEverMade+=1,this.bytesEverRequested+=n;let i={Range:`bytes=${t}-${t+n-1}`};return this.nocache&&(i["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:i})).arrayBuffer()}}function PFt(e,t,n){if(!e.subarray(0,3).every((f,c)=>Im[c]===f))throw Error("Not a FlatGeobuf file");let r=new fh(e),i=r.readUint32(Im.length);r.setPosition(Im.length+Ud);let o=PB(r),s=Im.length+Ud+i,{indexNodeSize:a,featuresCount:l}=o;a>0&&(s+=BB(l,a));let u=[];for(;s<r.capacity();){let f=r.readUint32(s);r.setPosition(s+Ud);let c=dc.getRootAsFeature(r);u.push(t(u.length,c,o)),s+=Ud+f}return u}async function*NFt(e,t,n){let r,i=EFt(e),o=async h=>await i.slice(h),s=new Uint8Array(await o(8));if(!s.subarray(0,3).every((h,p)=>Im[p]===h))throw Error("Not a FlatGeobuf file");s=new Uint8Array(await o(4));let a=new fh(s),l=a.readUint32(0);s=new Uint8Array(await o(l));let u=PB(a=new fh(s)),{indexNodeSize:f,featuresCount:c}=u;if(f>0){let h=BB(c,f);await o(h)}let d=0;for(;r=await zFt(o,u,t,d++);)yield r}async function*BFt(e,t,n,r,i=!1){let o=await zB.open(e,i);for await(let s of o.selectBbox(t))yield n(s.id,s.feature,o.header)}async function zFt(e,t,n,r){let i=new Uint8Array(await e(4,"feature length"));if(i.byteLength===0)return;let o=new fh(i),s=o.readUint32(0);i=new Uint8Array(await e(s,"feature data"));let a=new Uint8Array(s+4);return a.set(i,4),(o=new fh(a)).setPosition(Ud),n(r,dc.getRootAsFeature(o),t)}function jFt(e,t){return{type:"FeatureCollection",features:PFt(e,$B)}}function UFt(e,t){return NFt(e,$B)}function qFt(e,t,n,r=!1){return BFt(e,t,$B,n,r)}function HFt(e,t,n,r=!1){return e instanceof Uint8Array?jFt(e):e instanceof ReadableStream?UFt(e):qFt(e,t,n,r)}const sSe=new sD({featureProjection:"EPSG:3857"});class GFt extends J_{constructor(t){super({url:t.url,attributions:t.attributions,wrapX:t.wrapX,format:sSe,strategy:eUe}),this.ressourceURL=t.url,super.setLoader(this.loader)}fgbBoundingBox(t,n){const r=qCe(t,n.getCode(),"EPSG:4326");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}}async loader(t,n,r,i,o){const s=this.fgbBoundingBox(t,r);try{if(s.minX!==-1/0){const a=[],l=HFt(this.ressourceURL,s);for await(const u of l){const f=sSe.readFeature(u);a.push(f)}super.clear(),super.addFeatures(a),i(a)}}catch{o()}}}window.eoxMapAdvancedOlSources={...xKe,WMTSCapabilities:yFt,FlatGeoBuf:GFt};function VFt(e,t="property"){return e.map(([n,r])=>{var o,s;if(n==="extent"&&((s=(o=r.value)==null?void 0:o.temporal)==null?void 0:s.interval.length)>0){const a=r.value.temporal.interval[0];Array.isArray(a)&&(typeof a[0]=="string"||typeof a[1]=="string")&&(r.formatted=`${new Date(a[0]).toISOString().substring(0,10)} - ${new Date(a[1]).toISOString().substring(0,10)}`)}r.formatted=r.formatted.replace(new RegExp('(?<!href="|src=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),a=>`<a target="_blank" href="${a}">${a}</a>`);const i=a=>Object.entries(a).filter(([l,u])=>{let f=!0;return u.roles&&(f=u.roles.includes("metadata")),u.rel&&(f=u.rel==="example"),f});return(n==="assets"||n==="links"||n==="providers")&&(t==="property"?r.formatted=`<ul>${i(r.value).map(([a,l])=>`<li>
                <a target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}</a
                >
              </li>`).join("")}</ul>`:t==="featured"&&(r.formatted=i(r.value).map(([a,l])=>`<div class="button-container">
                ${l.description?`<div><p>${l.description}</p></div>`:""}
                <a class="button icon-text small block" target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}
                  </a>
              </div>`).join(""))),["providers","assets","links"].includes(n)&&(r.length=i(r.value).length),[n,r]})}function WFt(e){e.stacInfo.length&&(e.stacProperties=e.stacInfo.reduce((t,n)=>({...t,...n.properties}),{}),e.requestUpdate())}var d5,aSe;function _v(){if(aSe)return d5;aSe=1;const e={collatorOptions:{},numberFormatterOptions:{maximumFractionDigits:10},dateFormatterOptions:{day:"numeric",month:"numeric",year:"numeric"},dateTimeFormatterOptions:{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC",timeZoneName:"short"}};return d5={locales:[],collator:new Intl.Collator(e.collatorOptions),dateFormatter:new Intl.DateTimeFormat(e.dateFormatterOptions),dateTimeFormatter:new Intl.DateTimeFormat(e.dateTimeFormatterOptions),numberFormatter:new Intl.NumberFormat(e.numberFormatterOptions),translate:null,getDefaults(){return e},setLocales(n,r={},i={},o={},s={}){this.locales=n,s=Object.assign({},e.collatorOptions,s),this.collator=new Intl.Collator(n,s),r=Object.assign({},e.dateFormatterOptions,r),this.dateFormatter=new Intl.DateTimeFormat(n,r),i=Object.assign({},e.dateTimeFormatterOptions,i),this.dateTimeFormatter=new Intl.DateTimeFormat(n,i),o=Object.assign({},e.numberFormatterOptions,o),this.numberFormatter=new Intl.NumberFormat(n,o)},setTranslator(n){this.translate=n},format(n,r=null){if(r)for(let i in r)n=n.replaceAll(`{${i}}`,r[i]);return n}},d5}var h5,lSe;function aS(){if(lSe)return h5;lSe=1;const e=_v(),t={e(n){return typeof n!="string"&&(n=String(n)),n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(n,r=null){return typeof e.translate=="function"?e.translate(n,r):e.format(n,r)},toNothing(n=null){return n===null&&(n=t.t("n/a")),`<i class="null">${n}</i>`},toList(n,r=!1,i=null,o=null){let s=o===!0?"ol":"ul";return Array.isArray(n)||(n=[n]),r&&(n=n.slice(0),typeof r=="function"?n.sort(r):n.sort(),o===null&&(s="ol")),typeof i=="function"&&(n=n.map(i)),n.length===0?t.toNothing():n.length===1?n[0]:`<${s}><li>${n.join("</li><li>")}</li></${s}>`},toLink(n,r="",i="",o="_blank"){return r||(n.length>50?r=n.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...s){return s[4]?s[1]+"/[]/"+s[4]:s[1]}):r=n.replace(/^\w+:\/\//i,"")),`<a href="${t.e(n)}" rel="${t.e(i)}" target="${t.e(o)}">${t.e(r)}</a>`},toObject(n,r=null,i=null,o=[],s=null,a=[]){let l="<dl>",u=Array.isArray(o)&&o.length>=2?o:Object.keys(n);for(let f of u){if(!(f in n)||typeof s=="function"&&a.length>0&&!s(a[0],a.concat([f])))continue;let c;typeof i=="function"?c=i(f,n):c=t.formatKey(f,!0);let d=n[f];typeof r=="function"&&(d=r(d,f,n)),l+=`<dt>${c}</dt><dd>${d}</dd>`}return l+="</dl>",l},abbrev(n,r){return`<abbr title="${t.e(r)}">${t.e(n)}</abbr>`},isObject(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)},formatKey(n,r=!1){if(n.includes("/"))return t.e(t.t(n));r===!1&&(n=n.replace(/^[\w-]+:/i,""));let i=n.split(/[:_\-\s]/g).map(o=>o.substr(0,1).toUpperCase()+o.substr(1)).join(" ");return t.e(t.t(i))},hexToUint8(n){if(n.length===0||n.length%2!==0)throw new Error(`The string "${n}" is not valid hex.`);return new Uint8Array(n.match(/.{1,2}/g).map(r=>parseInt(r,16)))},uint8ToHex(n){return n.reduce((r,i)=>r+i.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(n){return n.reduce((r,i)=>Object.keys(i).reduce((o,s)=>(o.indexOf(s)==-1&&o.push(s),o),r),[])},unit(n,r=""){return typeof r=="string"&&r.length>0?(r=t.t(r),`${n}&nbsp;<span class="unit">${r}</unit>`):n}};return h5=t,h5}var p5,uSe;function YFt(){if(uSe)return p5;uSe=1;const e=aS(),t=_v(),n={fields(r){let i=["extensions","metadata","links","assets"];for(let o of i)for(let s in r[o])r[o][s]=n.field(r[o][s],r[o],r);return r},field(r,i={},o={}){if(typeof r=="string")return{label:r};if(typeof r.alias=="string"){let s=i[r.alias]||o.metadata[r.alias];if(!s)throw new Error("Alias is invalid: "+r.alias);return Object.assign(r,n.field(s,i,o))}if(e.isObject(r.items)){let s=[];for(let a in r.items)r.items[a]=n.field(r.items[a],i,o),s.push(Object.assign({key:a},r.items[a]));r.itemOrder=s.sort((a,l)=>a.id===!0?-1:l.id===!0?1:typeof a.order=="number"&&typeof l.order=="number"?a.order-l.order:t.collator.compare(e.t(a.label),e.t(l.label))).map(a=>a.key)}if(e.isObject(r.properties))for(let s in r.properties)r.properties[s]=n.field(r.properties[s],i,o);return r}};return p5=n,p5}var g5,cSe;function jB(){if(cSe)return g5;cSe=1;const e=YFt(),t={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(n){n=e.fields(n);for(let r in this.fields)Object.assign(this.fields[r],n[r])},getDependency(n){return this.dependencies[n]||console.warn(`Dependency '${n}' not registered.`),this.dependencies[n]},addDependency(n,r){this.dependencies[n]=r},addExtension(n,r){this.fields.extensions[n]=e.field(r,this.fields.extensions)},addMetadataField(n,r){this.fields.metadata[n]=e.field(r,this.fields.metadata)},addLinkField(n,r){this.fields.links[n]=e.field(r,this.fields.links)},addAssetField(n,r){this.fields.assets[n]=e.field(r,this.fields.assets)},addMetadataFields(n){for(var r in n)t.addMetadataField(r,n[r])},getExtension(n){return this.fields.extensions[n]?this.fields.extensions[n]:{}},getSpecification(n,r=null){let i={};return r==="assets"&&this.fields.assets[n]?i=this.fields.assets[n]:r==="links"&&this.fields.links[n]?i=this.fields.links[n]:this.fields.metadata[n]&&(i=this.fields.metadata[n]),i}};return g5=t,g5}const XFt={alternate:"Alternative Access Methods",anon:"Anonymized Location",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",product:"Product",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},ZFt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},method:"HTTP Method",headers:"HTTP Headers",body:"Request Body"},KFt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},JFt=JSON.parse('{"id":"Identifier","keywords":"Keywords","datetime":{"label":"Time of Data","format":"Timestamp","summary":false},"title":{"label":"Title","summary":false},"description":{"label":"Description","format":"CommonMark","summary":false},"roles":"Purpose","start_datetime":{"label":"Time of Data begins","format":"Timestamp","summary":false},"end_datetime":{"label":"Time of Data ends","format":"Timestamp","summary":false},"created":{"label":"Created","format":"Timestamp","summary":"r"},"updated":{"label":"Updated","format":"Timestamp","summary":"r"},"published":{"label":"Published","format":"Timestamp","summary":"r"},"expires":{"label":"Expires","format":"Timestamp","summary":"r"},"unpublished":{"label":"Unpublished","format":"Timestamp","summary":"r"},"license":{"label":"License","format":"License","summary":false},"providers":{"label":"Providers","format":"Providers","summary":false},"platform":"Platform","instruments":{"label":"Instruments","format":"CSV"},"constellation":"Constellation","mission":"Mission","gsd":{"label":"GSD","explain":"Ground Sample Distance","unit":"m"},"bands":{"label":"Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"alias":"description","order":2},"gsd":{"alias":"gsd","sortable":true},"nodata":{"alias":"nodata"},"data_type":{"alias":"data_type","sortable":true},"statistics":{"alias":"statistics"},"eo:common_name":{"alias":"eo:common_name","sortable":true,"order":1},"eo:center_wavelength":{"alias":"eo:center_wavelength","sortable":true},"eo:full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true},"eo:solar_illumination":{"alias":"eo:solar_illumination","sortable":true},"raster:sampling":{"alias":"raster:sampling","sortable":true},"unit":{"alias":"unit","sortable":true},"raster:bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"raster:spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"raster:scale":{"alias":"raster:scale","sortable":true},"raster:offset":{"alias":"raster:offset","sortable":true},"raster:histogram":{"alias":"raster:histogram"},"classification:classes":{"alias":"classification:classes"},"classification:bitfields":{"alias":"classification:bitfields"}}},"nodata":{"label":"No-Data Values","format":"CSV","summary":false},"data_type":{"label":"Data Type of Values","format":"FileDataType"},"unit":"Unit of Values","statistics":{"label":"Statistics","listWithKeys":true,"items":{"mean":"Average","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stdev":{"label":"Std. Dev.","explain":"Standard Deviation"},"count":{"label":"Count","explain":"Total number of values"},"valid_percent":{"label":"Valid","explain":"Percentage of valid values","unit":"%"}}},"version":{"label":"Data Version","summary":false},"deprecated":{"label":"Deprecated","summary":false},"experimental":{"label":"Experimental","summary":false},"language":{"label":"Current Language","ext":"language","summary":"v","properties":{"name":{"label":"Name"},"alternate":{"label":"Alternate Name"},"code":{"label":"Code"},"dir":{"label":"Direction","explain":"Reading and writing direction","mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"languages":{"label":"Available Languages","ext":"language","summary":false,"items":{"name":{"label":"Name","sortable":true,"order":0},"alternate":{"label":"Alternate Name","sortable":true,"order":1},"code":{"label":"Code","sortable":true,"order":2},"dir":{"label":"Direction","explain":"Reading and writing direction","sortable":true,"order":3,"mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"contacts":{"label":"Contacts","ext":"contacts","summary":"v","items":{"name":{"label":"Name"},"identifier":{"label":"Identifier"},"position":{"label":"Position"},"organization":{"label":"Organization"},"logo":{"label":"Logo","format":"Image"},"phones":{"label":"Phone","items":{"value":{"label":"Number","format":"Phone","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal","fax":"Fax"}}}},"emails":{"label":"Email","items":{"value":{"label":"Address","format":"Email","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal"}}}},"addresses":{"label":"Postal Addresses","format":"Address","items":{"deliveryPoint":{"label":"Street / House","order":0},"city":{"label":"City","order":1},"administrativeArea":{"label":"State / Province","order":2},"postalCode":{"label":"Postal Code","order":3},"country":{"label":"Country","order":4}}},"links":{"label":"Additional Resources","format":"Link"},"contactInstructions":"Further Instructions","roles":{"label":"Types","format":"CSV"}}},"themes":{"label":"Themes","ext":"themes","summary":false,"items":{"scheme":{"label":"Vocabulary","order":0,"format":"Url"},"concepts":{"label":"Terms","order":1,"format":"Concepts","items":{"id":{"label":"Identifier","order":0},"title":{"label":"Title","order":1},"description":{"label":"Description","order":2},"url":{"label":"URL","order":3,"format":"Url"}}}}},"crs":{"label":"CRS","format":"CRS","explain":"Coordinate Reference System"},"anon:size":{"label":"Uncertainty","unit":"","explain":"The size of one side of the anonymized bounding box"},"anon:warning":{"label":"Warning","summary":false},"classification:classes":{"summary":false,"label":"Classes","items":{"color_hint":{"label":"Color","order":0,"format":"HexColor"},"value":{"label":"Value","sortable":true,"order":1},"title":{"label":"Title","sortable":true,"order":2},"name":{"label":"Identifier","sortable":true,"order":3},"description":{"label":"Description","order":4,"format":"CommonMark"},"percentage":{"label":"Percentage of samples","sortable":true,"order":5,"unit":"%"},"count":{"label":"Number of samples","sortable":true,"order":6},"nodata":{"label":"No-data value","order":7,"default":false}}},"classification:bitfields":{"summary":false,"label":"Bit Mask","items":{"name":{"label":"Name","sortable":true,"order":0},"offset":{"label":"Offset","explain":"Offset to the first bit","order":1},"length":{"label":"Number of bits","order":2},"description":{"label":"Description","order":3,"format":"CommonMark"},"classes":{"alias":"classification:classes"},"roles":{"label":"Purpose"}}},"cube:dimensions":{"label":"Dimensions","summary":false,"listWithKeys":true,"items":{"type":{"label":"Type","order":0},"axis":{"label":"Axis","order":1},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"bbox":{"alias":"proj:bbox","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":5},"geometry_types":{"label":"Geometry Types","order":5},"reference_system":{"label":"Reference System","explain":"Coordinate / Temporal / Other Reference System","order":6}}},"cube:variables":{"label":"Variables","summary":false,"listWithKeys":true,"items":{"dimensions":{"label":"Dimensions","order":0},"type":{"label":"Type","order":1,"mapping":{"data":"Measured values","auxiliary":"Coordinate data"}},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":6}}},"eo:bands":{"label":"Spectral Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"common_name":{"alias":"eo:common_name","sortable":true,"order":1},"center_wavelength":{"alias":"eo:center_wavelength","sortable":true,"order":2},"full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true,"order":3},"solar_illumination":{"alias":"eo:solar_illumination","sortable":true,"order":7},"description":{"alias":"description"},"gsd":{"alias":"gsd","sortable":true},"cloud_cover":{"alias":"eo:cloud_cover","sortable":true}}},"eo:cloud_cover":{"label":"Cloud Cover","unit":"%"},"eo:snow_cover":{"label":"Snow/Ice Cover","unit":"%"},"eo:common_name":"Common Name","eo:center_wavelength":{"label":"Wavelength","explain":"The center wavelength of the band","unit":"m"},"eo:full_width_half_max":{"label":"FWHM","explain":"Full Width Half Max","unit":"m"},"eo:solar_illumination":{"label":"Solar Illumination","unit":"W/m/m"},"forecast:reference_datetime":{"label":"Reference Time","format":"Timestamp","summary":"r"},"forecast:horizon":{"label":"Forecast Horizon","explain":"The time between the reference time and the forecast time","format":"Duration"},"forecast:duration":{"label":"Forecast Length","format":"Duration"},"file:bits_per_sample":{"alias":"raster:bits_per_sample"},"file:byte_order":"Byte Order","file:checksum":{"label":"Checksum","format":"Checksum","summary":false},"file:data_type":{"alias":"data_type"},"file:header_size":{"label":"Header Size","format":"FileSize","summary":false},"file:nodata":{"alias":"nodata"},"file:size":{"label":"Size","format":"FileSize","summary":false},"file:unit":{"alias":"unit"},"file:values":{"label":"Map of Values","summary":false,"items":{"values":{"label":"Values","format":"CSV","order":1},"summary":{"label":"Summary","order":0}}},"file:local_path":{"label":"Local Path","summary":false},"nodata:values":{"alias":"nodata"},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{"label":"System Environment","mapping":{"OR":"Operational system, real-time data","OT":"Operational system, test data","IR":"Test system, real-time data","IT":"Test system, test data","IP":"Test system, playback data","IS":"Test system, simulated data"}},"goes:image_type":{"label":"Area","mapping":{"FULL DISK":"The Americas (full disk)","CONUS":"North America (continental US)","MESOSCALE":"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{"label":"Area in Central/South America","mapping":{"1":"Region 1","2":"Region 2"}},"goes:mode":{"label":"Capture Mode","mapping":{"3":"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)","4":"4: 1x full disk (every 5 minutes)","6":"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{"label":"Time Threshold in a Group","explain":"Lightning group maximum time difference among lightning events in a group","unit":"s"},"goes:flash_time_threshold":{"label":"Time Threshold in a Flash","explain":"Lightning flash maximum time difference among lightning events in a flash","unit":"s"},"goes:lightning_wavelength":{"label":"Central Wavelength","unit":"nm"},"goes:yaw_flip_flag":{"label":"Yaw Flip Configuration","explain":"Flag indicating that the spacecraft is operating in yaw flip configuration.","mapping":{"0":"Upright","1":"Neither","2":"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{"label":"Satellite Subpoint Latitude","unit":"N"},"goes:nominal_satellite_subpoint_lon":{"label":"Satellite Subpoint Longitude","unit":"E"},"goes:nominal_satellite_height":{"label":"Satellite Height","explain":"Nominal satellite height above GRS 80 ellipsoid","unit":"km"},"goes:percent_navigated_L1b_events":{"label":"Events navigated by Instrument","format":"Percent0to1","unit":"%"},"goes:percent_uncorrectable_L0_errors":{"label":"Data Lost","format":"Percent0to1","unit":"%"},"grid:code":{"label":"Grid","format":"GridCode"},"raster:bands":{"label":"Layers","items":{"nodata":{"alias":"nodata"},"sampling":{"alias":"raster:sampling","sortable":true},"data_type":{"alias":"data_type","sortable":true},"bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"statistics":{"alias":"statistics"},"unit":{"alias":"unit","sortable":true},"scale":{"alias":"raster:scale","sortable":true},"offset":{"alias":"raster:offset","sortable":true},"histogram":{"alias":"raster:histogram"}}},"raster:sampling":{"label":"Sampling","mapping":{"area":"Area","point":"Point (at pixel center)"}},"raster:bits_per_sample":"Bits per Sample","raster:spatial_resolution":{"label":"Resolution","explain":"Average spatial resolution","unit":"m"},"raster:scale":"Scale","raster:offset":"Offset","raster:histogram":{"label":"Histogram","custom":true},"label:properties":{"label":"Properties","null":"raster data"},"label:classes":{"label":"Classes","items":{"name":{"label":"Name","null":"raster-formatted","sortable":true,"id":true},"classes":"Classes"}},"label:description":{"label":"Description","format":"CommonMark","summary":false},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{"label":"Overviews","summary":false,"items":{"property_key":{"label":"Property Key","id":true},"counts":{"label":"Counts","custom":true},"statistics":{"label":"Statistics","custom":true}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{"label":"Pass Number","mapping":{"1":"1 (less latency / less gauges)","2":"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{"label":"Accumulation Period","unit":"h"},"noaa_mrms_qpe:region":{"label":"Region","mapping":{"CONUS":"Continental US","HAWAII":"Hawaii","GUAM":"Guam","ALASKA":"Alaska","CARIB":"Caribbean Islands"}},"openeo:status":"Processing Status","api_version":{"label":"API Version","ext":"openeo"},"backend_version":{"label":"Back-End Version","ext":"openeo"},"production":{"label":"Production-Ready","ext":"openeo"},"endpoints":{"label":"Supported Endpoints","ext":"openeo","summary":false,"items":{"path":{"label":"Path Template","order":0},"methods":{"label":"HTTP Methods","order":1,"format":"CSV"}}},"billing":{"label":"Billing","ext":"openeo","custom":true,"summary":false},"order:status":{"label":"Status","mapping":{"orderable":"Orderable (data can be ordered)","ordered":"Ordered (preparing to deliver data)","pending":"Pending (waiting for activation)","shipping":"Shipping (data is getting processed)","succeeded":"Delivered (data is available)","failed":"Failed (unable to deliver)","canceled":"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{"label":"Submitted","format":"Timestamp","summary":"r"},"order:expiration_date":{"alias":"expires"},"pc:count":{"label":"Points","explain":"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{"label":"Schemas","summary":false,"items":{"name":{"label":"Name","sortable":true,"id":true},"size":{"label":"Size","unit":"bytes","sortable":true},"type":{"label":"Type","sortable":true}}},"pc:density":"Density","pc:statistics":{"label":"Statistics","summary":"s","items":{"name":{"label":"Name","id":true},"position":"Position","average":"Average","count":"Count","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stddev":{"label":"Std. Dev.","explain":"Standard Deviation"},"variance":"Variance"}},"processing:expression":{"label":"Processing Instructions","summary":false},"processing:lineage":{"label":"Lineage","format":"CommonMark","summary":false},"processing:level":"Level","processing:facility":"Facility","processing:software":{"label":"Software","format":"Software","summary":false},"processing:version":"Processor Version","processing:datetime":{"label":"Processing Time","format":"Timestamp","summary":"r"},"product:type":"Product Type","product:timeliness":{"label":"Timeliness","format":"Duration"},"product:timeliness_category":"Timeliness Category","product:acquisition_type":{"label":"Acquisition Type","mapping":{"nominal":"Nominal","calibration":"Calibration","other":"Other"}},"proj:epsg":{"label":"EPSG Code","format":"EPSG","summary":"v"},"proj:code":{"label":"Code","format":"CrsCode","summary":"v"},"proj:wkt2":{"label":"WKT2","explain":"Well-Known Text, version 2","format":"WKT2","summary":false},"proj:projjson":{"label":"PROJJSON","explain":"JSON encoding of WKT2","format":"PROJJSON","summary":false},"proj:geometry":{"label":"Footprint","custom":true,"summary":false},"proj:bbox":{"label":"Bounding Box","custom":true,"summary":false},"proj:centroid":{"label":"Centroid","custom":true,"summary":false},"proj:shape":{"label":"Image Dimensions","format":"Shape","summary":false},"proj:transform":{"label":"Transformation Matrix","format":"Transform","summary":false},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{"label":"Center Frequency","unit":"GHz"},"sar:polarizations":{"label":"Polarizations","format":"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{"label":"Range Resolution","unit":"m"},"sar:resolution_azimuth":{"label":"Azimuth Resolution","unit":"m"},"sar:pixel_spacing_range":{"label":"Range Pixel Spacing","unit":"m"},"sar:pixel_spacing_azimuth":{"label":"Azimuth Pixel Spacing","unit":"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{"label":"ENL","explain":"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{"label":"Int. Designator","explain":"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{"label":"Abs. Orbit Number","explain":"Absolute Orbit Number"},"sat:relative_orbit":{"label":"Rel. Orbit Number","explain":"Relative Orbit Number"},"sat:anx_datetime":{"label":"ANX Time","format":"Timestamp","explain":"Ascending Node Crossing time","summary":"r"},"sci:doi":{"label":"DOI","format":"DOI"},"sci:citation":"Citation","sci:publications":{"label":"Publications","summary":false,"items":{"citation":{"label":"Publication","sortable":true,"order":0},"doi":{"label":"DOI","format":"DOI","sortable":true,"order":1}}},"ssys:targets":"Target Body","storage:platform":{"label":"Provider","mapping":{"ALIBABA":"Alibaba Cloud","AWS":"Amazon AWS","AZURE":"Microsoft Azure","GCP":"Google Cloud Platform","IBM":"IBM Cloud","ORACLE":"Oracle Cloud"}},"storage:region":"Region","storage:requester_pays":"Requester Pays","storage:tier":"Tier Type","table:columns":{"label":"Columns","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"type":{"label":"Data Type","sortable":true,"order":1},"description":{"label":"Description","format":"CommonMark","order":2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{"label":"Tables","summary":false,"listWithKeys":true,"items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"label":"Description","format":"CommonMark","order":1}}},"tiles:tile_matrix_sets":{"label":"Tile Matrix Sets","custom":true,"summary":false},"tiles:tile_matrix_set_links":{"label":"Tile Matrix Set Links","custom":true,"summary":false},"view:off_nadir":{"label":"Off-Nadir Angle","unit":""},"view:incidence_angle":{"label":"Incidence Angle","unit":""},"view:azimuth":{"label":"Viewing Azimuth","unit":""},"view:sun_azimuth":{"label":"Sun Azimuth","unit":""},"view:sun_elevation":{"label":"Sun Elevation","unit":""},"pl:black_fill":{"label":"Unfilled Image Parts","unit":"%"},"pl:clear_percent":{"label":"Clear Sky","unit":"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{"label":"Spatial Resolution","unit":"m"},"pl:publishing_stage":{"label":"Publishing Stage","mapping":{"preview":"Preview","standard":"Standard","finalized":"Finalized"}},"pl:quality_category":{"label":"Quality Category","mapping":{"standard":"Standard","test":"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{"label":"Type","mapping":{"image":"Single image","image_collection":"Image collection","table":"Table"}},"gee:cadence":"Cadence","gee:schema":{"label":"Variables","items":{"name":"Name","description":"Description","type":"Data Type"},"summary":false},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{"label":"Terms of Use","format":"CommonMark","summary":false},"gee:visualizations":{"label":"Visualizations","custom":true,"summary":false},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{"label":"WRS Type","explain":"Worldwide Reference System Type"},"landsat:wrs_path":{"label":"WRS Path","explain":"Worldwide Reference System Path"},"landsat:wrs_row":{"label":"WRS Row","explain":"Worldwide Reference System Row"},"landsat:cloud_cover_land":{"label":"Land Cloud Cover","unit":"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{"label":"Summary","summary":false},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{"label":"Product ID","summary":"s"},"sentinel:data_coverage":{"label":"Data Coverage","unit":"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{"label":"Processing Level","explain":"Geolocation precision level","mapping":{"L2":"Geolocation using only satellite telemetry","L3":"Control points used to geolocate image, no terrain correction","L4":"Control points used to geolocate image, orthorectified"},"summary":"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{"label":"Specification","mapping":{"SR":"Surface Reflectance (Optical)","ST":"Surface Temperature (Optical)","NRB":"Normalized Radar Backscatter (SAR)","POL":"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{"label":"Platform Altitude","unit":"m"},"card4l:incidence_angle_near_range":{"label":"Incidence Angle (near)","unit":""},"card4l:incidence_angle_far_range":{"label":"Incidence Angle (far)","unit":""},"card4l:noise_equivalent_intensity":{"label":"Noise Equivalent Intensity","unit":"dB"},"card4l:mean_faraday_rotation_angle":{"label":"Mean Faraday Rotation","unit":""},"card4l:speckle_filtering":{"label":"Speckle Filtering","custom":true,"summary":false,"null":"not applied"},"card4l:relative_rtc_accuracy":{"label":"Rel. RTC Accuracy","explain":"Relative accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:absolute_rtc_accuracy":{"label":"Abs. RTC Accuracy","explain":"Absolute accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:northern_geometric_accuracy":{"label":"Northern Geometric Accuracy","unit":"m"},"card4l:eastern_geometric_accuracy":{"label":"Eastern Geometric Accuracy","unit":"m"},"card4l:ellipsoidal_height":{"label":"Ellipsoidal Height","unit":"m"},"geoadmin:variant":{"label":"Product Variant","mapping":{"krel":"RGB color with relief","komb":"RGB color without relief","kgrel":"Grayscale with relief","kgrs":"Grayscale without relief"}},"href:servers":{"label":"Servers","ext":"web-map-links"},"pmtiles:layers":{"label":"Layers","ext":"web-map-links"},"wms:layers":{"label":"Layers","ext":"web-map-links"},"wms:styles":{"label":"Styles","ext":"web-map-links"},"wms:dimensions":{"label":"Dimensions","ext":"web-map-links"},"wms:transparent":{"label":"Transparency","ext":"web-map-links"},"wmts:layer":{"label":"Layers","ext":"web-map-links"},"wmts:dimensions":{"label":"Dimensions","ext":"web-map-links"}}'),QFt={extensions:XFt,links:ZFt,assets:KFt,metadata:JFt};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var qd=function(){return qd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},qd.apply(this,arguments)},Ym="\\d+(?:[\\.,]\\d+)?",e4t="("+Ym+"W)",t4t="("+Ym+"Y)?("+Ym+"M)?("+Ym+"D)?",n4t="T("+Ym+"H)?("+Ym+"M)?("+Ym+"S)?",r4t="^P(?:"+e4t+"|"+t4t+"(?:"+n4t+")?)$",i4t=new RegExp(r4t),YIe=["weeks","years","months","days","hours","minutes","seconds"],XIe={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},o4t=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),s4t=function(e){var t=e.match(i4t);if(!t)throw new Error("Invalid duration string");var n=t.slice(1).reduce(function(r,i,o){return r[YIe[o]]=parseFloat(i)||0,r},{});return n},a4t=function(e){return e.weeks&&e.weeks>0?Object.assign({},o4t,{weeks:e.weeks}):YIe.reduce(function(t,n){var r;return qd(qd({},t),(r={},r[n]=e[n]||0,r))},{})},UB={locales:{},options:{},setLocales:function(e,t){this.locales=qd(qd({},this.locales),e),t&&(this.options=qd(qd({},this.options),t))},getLangConfig:function(e){var t=this.locales[e];if(!t&&this.options.fallbackLocale&&(t=this.locales[this.options.fallbackLocale]),!t)throw new Error("isoDuration: Translations for language: "+e+" are not provided");return t}},l4t=function(e){for(var t=["years","months","days"],n="",r=0,i=t;r<i.length;r++){var o=i[r];e[o]&&(n+=""+e[o]+XIe[o])}return n},u4t=function(e){for(var t=["hours","minutes","seconds"],n="",r=0,i=t;r<i.length;r++){var o=i[r];e[o]&&(n+=""+e[o]+XIe[o])}return n},c4t=function(e){if(e.weeks>0)return"P"+e.weeks+"W";var t="P",n=l4t(e);n&&(t+=n);var r=u4t(e);return r&&(t+="T"+r),!n&&!r&&(t+="0D"),t},f4t=function(e,t){var n=UB.getLangConfig(t);return e.weeks+" "+n.weeks(e.weeks)},d4t=function(e,t,n){for(var r=UB.getLangConfig(t),i="",o=["years","months","days","hours","minutes","seconds"],s=0,a=0;a<o.length;a++){var l=o[a],u=e[l];if(u&&(i!==""&&(i+=" "),i+=u+" "+r[l](u),s++,n&&n.largest&&n.largest<=s))break}return i},h4t=function(e,t,n){return e.weeks>0?f4t(e,t):d4t(e,t,n)},m5=["seconds","minutes","hours","days","months"],rC=function(e){return function(t){return{nextUnitValue:Math.floor(t/e),value:t%e}}},fSe=function(e,t){return new Date(t,e+1,0).getDate()},p4t={seconds:rC(60),minutes:rC(60),hours:rC(24),days:function(e,t){for(var n=t?new Date(t.getTime()):new Date,r=e,i=0,o=fSe(n.getMonth(),n.getFullYear());r>o;)r=r-o,i++,n.setMonth(n.getMonth()+1),o=fSe(n.getMonth(),n.getFullYear());return{nextUnitValue:i,value:r}},months:rC(12)},g4t=function(e,t){for(var n=qd({},e),r=0;r<m5.length;r++){var i=m5[r],o=n[i];if(o>0){var s=p4t[i](o,t);if(n[i]=s.value,s.nextUnitValue){var a=i==="months"?"years":m5[r+1];n[a]=n[a]+s.nextUnitValue}}}return n},dSe=function(){function e(t){this.durationObj=t}return e.prototype.parse=function(){return this.durationObj},e.prototype.toString=function(){return c4t(this.durationObj)},e.prototype.humanize=function(t,n){return h4t(this.durationObj,t,n)},e.prototype.normalize=function(t){return this.durationObj=g4t(this.durationObj,t),this},e.prototype.isEmpty=function(){var t=this;return Object.keys(this.durationObj).every(function(n){return t.durationObj[n]===0})},e}();function m4t(e){return e<=2?0:e>2&&e<11?1:0}var y4t={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return["",""][m4t(e)]},seconds:function(e){return e===1?"":""},decimal:","};function No(e){return Math.floor(e)!==e?2:e%100>=5&&e%100<=20||e%10>=5&&e%10<=9||e%10===0?0:e%10===1?1:e>1?2:0}var b4t={years:function(e){return["","",""][No(e)]},months:function(e){return["","",""][No(e)]},weeks:function(e){return["","",""][No(e)]},days:function(e){return["","",""][No(e)]},hours:function(e){return["","",""][No(e)]},minutes:function(e){return["","",""][No(e)]},seconds:function(e){return["","",""][No(e)]},decimal:","},v4t={years:function(e){return"any"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"os")},weeks:function(e){return"setman"+(e===1?"a":"es")},days:function(e){return"di"+(e===1?"a":"es")},hours:function(e){return"hor"+(e===1?"a":"es")},minutes:function(e){return"minut"+(e===1?"":"s")},seconds:function(e){return"segon"+(e===1?"":"s")},decimal:","};function _l(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&e%100<10?2:3}var x4t={years:function(e){return["rok","roku","roky","let"][_l(e)]},months:function(e){return["msc","msce","msce","msc"][_l(e)]},weeks:function(e){return["tden","tdne","tdny","tdn"][_l(e)]},days:function(e){return["den","dne","dny","dn"][_l(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodin"][_l(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][_l(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][_l(e)]},decimal:","},w4t={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uge"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"e")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minut"+(e===1?"":"ter")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},_4t={years:function(e){return"Jahr"+(e===1?"":"e")},months:function(e){return"Monat"+(e===1?"":"e")},weeks:function(e){return"Woche"+(e===1?"":"n")},days:function(e){return"Tag"+(e===1?"":"e")},hours:function(e){return"Stunde"+(e===1?"":"n")},minutes:function(e){return"Minute"+(e===1?"":"n")},seconds:function(e){return"Sekunde"+(e===1?"":"n")},decimal:","},E4t={years:function(e){return"year"+(e===1?"":"s")},months:function(e){return"month"+(e===1?"":"s")},weeks:function(e){return"week"+(e===1?"":"s")},days:function(e){return"day"+(e===1?"":"s")},hours:function(e){return"hour"+(e===1?"":"s")},minutes:function(e){return"minute"+(e===1?"":"s")},seconds:function(e){return"second"+(e===1?"":"s")},decimal:"."},S4t={years:function(e){return"ao"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"es")},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"da"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},A4t={years:function(e){return"aasta"+(e===1?"":"t")},months:function(e){return"kuu"+(e===1?"":"d")},weeks:function(e){return"ndal"+(e===1?"":"at")},days:function(e){return"pev"+(e===1?"":"a")},hours:function(e){return"tund"+(e===1?"":"i")},minutes:function(e){return"minut"+(e===1?"":"it")},seconds:function(e){return"sekund"+(e===1?"":"it")},decimal:","},C4t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},k4t={years:function(e){return e===1?"vuosi":"vuotta"},months:function(e){return e===1?"kuukausi":"kuukautta"},weeks:function(e){return"viikko"+(e===1?"":"a")},days:function(e){return"piv"+(e===1?"":"")},hours:function(e){return"tunti"+(e===1?"":"a")},minutes:function(e){return"minuutti"+(e===1?"":"a")},seconds:function(e){return"sekunti"+(e===1?"":"a")},decimal:","},T4t={years:function(){return"r"},months:function(e){return e===1?"mnaur":"mnair"},weeks:function(e){return e===1?"vika":"vikur"},days:function(e){return e===1?"dagur":"dagar"},hours:function(e){return e===1?"tmi":"tmar"},minutes:function(e){return e===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},D4t={years:function(e){return"an"+(e>=2?"s":"")},months:function(){return"mois"},weeks:function(e){return"semaine"+(e>=2?"s":"")},days:function(e){return"jour"+(e>=2?"s":"")},hours:function(e){return"heure"+(e>=2?"s":"")},minutes:function(e){return"minute"+(e>=2?"s":"")},seconds:function(e){return"seconde"+(e>=2?"s":"")},decimal:","},L4t={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:","},R4t={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:"."},F4t={years:function(e){return e%10===2||e%10===3||e%10===4?"godine":"godina"},months:function(e){return e===1?"mjesec":e===2||e===3||e===4?"mjeseca":"mjeseci"},weeks:function(e){return e%10===1&&e!==11?"tjedan":"tjedna"},days:function(e){return e===1?"dan":"dana"},hours:function(e){return e===1?"sat":e===2||e===3||e===4?"sata":"sati"},minutes:function(e){var t=e%10;return(t===2||t===3||t===4)&&(e<10||e>14)?"minute":"minuta"},seconds:function(e){return e===10||e===11||e===12||e===13||e===14||e===16||e===17||e===18||e===19||e%10===5?"sekundi":e%10===1?"sekunda":e%10===2||e%10===3||e%10===4?"sekunde":"sekundi"},decimal:","},M4t={years:function(){return"v"},months:function(){return"hnap"},weeks:function(){return"ht"},days:function(){return"nap"},hours:function(){return"ra"},minutes:function(){return"perc"},seconds:function(){return"msodperc"},decimal:","},O4t={years:function(){return"r"},months:function(e){return"mnu"+(e===1?"ur":"ir")},weeks:function(e){return"vik"+(e===1?"a":"ur")},days:function(e){return"dag"+(e===1?"ur":"ar")},hours:function(e){return"klukkutm"+(e===1?"i":"ar")},minutes:function(e){return"mnt"+(e===1?"a":"ur")},seconds:function(e){return"seknd"+(e===1?"a":"ur")},decimal:"."},$4t={years:function(e){return"ann"+(e===1?"o":"i")},months:function(e){return"mes"+(e===1?"e":"i")},weeks:function(e){return"settiman"+(e===1?"a":"e")},days:function(e){return"giorn"+(e===1?"o":"i")},hours:function(e){return"or"+(e===1?"a":"e")},minutes:function(e){return"minut"+(e===1?"o":"i")},seconds:function(e){return"second"+(e===1?"o":"i")},decimal:","},I4t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},P4t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},N4t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:","};function Xy(e){return e===1||e%10===1&&e%100>20?0:Math.floor(e)!==e||e%10>=2&&e%100>20||e%10>=2&&e%100<10?1:2}var B4t={years:function(e){return e%10===0||e%100>=10&&e%100<=20?"met":"metai"},months:function(e){return["mnuo","mnesiai","mnesi"][Xy(e)]},weeks:function(e){return["savait","savaits","savaii"][Xy(e)]},days:function(e){return["diena","dienos","dien"][Xy(e)]},hours:function(e){return["valanda","valandos","valand"][Xy(e)]},minutes:function(e){return["minut","minuts","minui"][Xy(e)]},seconds:function(e){return["sekund","sekunds","sekundi"][Xy(e)]},decimal:","};function gm(e){return e===1||e%10===1&&e%100!==11?0:1}var z4t={years:function(e){return["gads","gadi"][gm(e)]},months:function(e){return["mnesis","mnei"][gm(e)]},weeks:function(e){return["neda","nedas"][gm(e)]},days:function(e){return["diena","dienas"][gm(e)]},hours:function(e){return["stunda","stundas"][gm(e)]},minutes:function(e){return["minte","mintes"][gm(e)]},seconds:function(e){return["sekunde","sekundes"][gm(e)]},decimal:","},j4t={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},U4t={years:function(){return"jaar"},months:function(e){return e===1?"maand":"maanden"},weeks:function(e){return e===1?"week":"weken"},days:function(e){return e===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(e){return e===1?"minuut":"minuten"},seconds:function(e){return e===1?"seconde":"seconden"},decimal:","},q4t={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uke"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"er")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minutt"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","};function mm(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&!(e%100>10&&e%100<20)?2:3}var H4t={years:function(e){return["rok","roku","lata","lat"][mm(e)]},months:function(e){return["miesic","miesica","miesice","miesicy"][mm(e)]},weeks:function(e){return["tydzie","tygodnia","tygodnie","tygodni"][mm(e)]},days:function(e){return["dzie","dnia","dni","dni"][mm(e)]},hours:function(e){return["godzina","godziny","godziny","godzin"][mm(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][mm(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][mm(e)]},decimal:","},G4t={years:function(e){return"ano"+(e===1?"":"s")},months:function(e){return e===1?"ms":"meses"},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"dia"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},V4t={years:function(e){return e===1?"an":"ani"},months:function(e){return e===1?"lun":"luni"},weeks:function(e){return e===1?"sptmn":"sptmni"},days:function(e){return e===1?"zi":"zile"},hours:function(e){return e===1?"or":"ore"},minutes:function(e){return e===1?"minut":"minute"},seconds:function(e){return e===1?"secund":"secunde"},decimal:","},W4t={years:function(e){return["","",""][No(e)]},months:function(e){return["","",""][No(e)]},weeks:function(e){return["","",""][No(e)]},days:function(e){return["","",""][No(e)]},hours:function(e){return["","",""][No(e)]},minutes:function(e){return["","",""][No(e)]},seconds:function(e){return["","",""][No(e)]},decimal:","},Y4t={years:function(e){return["rok","roky","roky","rokov"][_l(e)]},months:function(e){return["mesiac","mesiace","mesiace","mesiacov"][_l(e)]},weeks:function(e){return["tde","tdne","tdne","tdov"][_l(e)]},days:function(e){return["de","dni","dni","dn"][_l(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodn"][_l(e)]},minutes:function(e){return["minta","minty","minty","mint"][_l(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","seknd"][_l(e)]},decimal:","},X4t={years:function(){return"r"},months:function(e){return"mnad"+(e===1?"":"er")},weeks:function(e){return"veck"+(e===1?"a":"or")},days:function(e){return"dag"+(e===1?"":"ar")},hours:function(e){return"timm"+(e===1?"e":"ar")},minutes:function(e){return"minut"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},Z4t={years:function(){return"yl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gn"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},K4t={years:function(e){return["","",""][No(e)]},months:function(e){return["","",""][No(e)]},weeks:function(e){return["","",""][No(e)]},days:function(e){return["","",""][No(e)]},hours:function(e){return["","",""][No(e)]},minutes:function(e){return["","",""][No(e)]},seconds:function(e){return["","",""][No(e)]},decimal:","},J4t={years:function(){return""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(){return""},hours:function(e){return e===1?"":""},minutes:function(){return""},seconds:function(){return""},decimal:"."},Q4t={years:function(){return"nm"},months:function(){return"thng"},weeks:function(){return"tun"},days:function(){return"ngy"},hours:function(){return"gi"},minutes:function(){return"pht"},seconds:function(){return"giy"},decimal:","},e5t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},t5t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."};function ZIe(e){return typeof e=="string"?new dSe(s4t(e)):new dSe(a4t(e))}ZIe.setLocales=function(e,t){UB.setLocales(e,t)};const n5t=Object.freeze(Object.defineProperty({__proto__:null,ar:y4t,bg:b4t,ca:v4t,cs:x4t,da:w4t,de:_4t,en:E4t,es:S4t,et:A4t,fa:C4t,fi:k4t,fo:T4t,fr:D4t,gr:L4t,he:R4t,hr:F4t,hu:M4t,is:O4t,isoDuration:ZIe,it:$4t,ja:I4t,ko:P4t,lo:N4t,lt:B4t,lv:z4t,ms:j4t,nl:U4t,no:q4t,pl:H4t,pt:G4t,ro:V4t,ru:W4t,sk:Y4t,sv:X4t,tr:Z4t,uk:K4t,ur:J4t,vi:Q4t,zhCN:e5t,zhTW:t5t},Symbol.toStringTag,{value:"Module"})),r5t=hCe(n5t);var iC={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hSe;function i5t(){if(hSe)return iC;hSe=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;iC.format=s,iC.parse=a;function s(c){if(!c||typeof c!="object")throw new TypeError("argument obj is required");var d=c.parameters,h=c.type;if(!h||!o.test(h))throw new TypeError("invalid type");var p=h;if(d&&typeof d=="object")for(var m,b=Object.keys(d).sort(),y=0;y<b.length;y++){if(m=b[y],!n.test(m))throw new TypeError("invalid parameter name");p+="; "+m+"="+u(d[m])}return p}function a(c){if(!c)throw new TypeError("argument string is required");var d=typeof c=="object"?l(c):c;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var h=d.indexOf(";"),p=h!==-1?d.slice(0,h).trim():d.trim();if(!o.test(p))throw new TypeError("invalid media type");var m=new f(p.toLowerCase());if(h!==-1){var b,y,v;for(e.lastIndex=h;y=e.exec(d);){if(y.index!==h)throw new TypeError("invalid parameter format");h+=y[0].length,b=y[1].toLowerCase(),v=y[2],v.charCodeAt(0)===34&&(v=v.slice(1,-1),v.indexOf("\\")!==-1&&(v=v.replace(r,"$1"))),m.parameters[b]=v}if(h!==d.length)throw new TypeError("invalid parameter format")}return m}function l(c){var d;if(typeof c.getHeader=="function"?d=c.getHeader("content-type"):typeof c.headers=="object"&&(d=c.headers&&c.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function u(c){var d=String(c);if(n.test(d))return d;if(d.length>0&&!t.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(i,"\\$1")+'"'}function f(c){this.parameters=Object.create(null),this.type=c}return iC}var d2={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var o5t=d2.exports,pSe;function s5t(){return pSe||(pSe=1,function(e,t){(function(n,r){r(t)})(o5t,function(n){function r(G){switch(G._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var i=function(G,ue){this.current=G,this.entering=ue===!0},o=function(){var G=this.current,ue=this.entering;if(G===null)return null;var Ae=r(G);return ue&&Ae?G._firstChild?(this.current=G._firstChild,this.entering=!0):this.entering=!1:G===this.root?this.current=null:G._next===null?(this.current=G._parent,this.entering=!1):(this.current=G._next,this.entering=!0),{entering:ue,node:G}},s=function(G){return{current:G,root:G,entering:!0,next:o,resumeAt:i}},a=function(G,ue){this._type=G,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=ue,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(G){this._literal=G}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(G){this._destination=G}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(G){this._title=G}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(G){this._info=G}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(G){this._level=G}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(G){this._listData.type=G}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(G){this._listData.tight=G}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(G){this._listData.start=G}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(G){this._listData.delimiter=G}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(G){this._onEnter=G}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(G){this._onExit=G}}),a.prototype.appendChild=function(G){G.unlink(),G._parent=this,this._lastChild?(this._lastChild._next=G,G._prev=this._lastChild,this._lastChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.prependChild=function(G){G.unlink(),G._parent=this,this._firstChild?(this._firstChild._prev=G,G._next=this._firstChild,this._firstChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(G){G.unlink(),G._next=this._next,G._next&&(G._next._prev=G),G._prev=this,this._next=G,G._parent=this._parent,G._next||(G._parent._lastChild=G)},a.prototype.insertBefore=function(G){G.unlink(),G._prev=this._prev,G._prev&&(G._prev._next=G),G._next=this,this._prev=G,G._parent=this._parent,G._prev||(G._parent._firstChild=G)},a.prototype.walker=function(){var G=new s(this);return G};var u={};function f(G){var ue,Ae,Fe=u[G];if(Fe)return Fe;for(Fe=u[G]=[],ue=0;ue<128;ue++)Ae=String.fromCharCode(ue),/^[0-9a-z]$/i.test(Ae)?Fe.push(Ae):Fe.push("%"+("0"+ue.toString(16).toUpperCase()).slice(-2));for(ue=0;ue<G.length;ue++)Fe[G.charCodeAt(ue)]=G[ue];return Fe}function c(G,ue,Ae){var Fe,ft,lt,vn,Bt,Mn="";for(typeof ue!="string"&&(Ae=ue,ue=c.defaultChars),typeof Ae>"u"&&(Ae=!0),Bt=f(ue),Fe=0,ft=G.length;Fe<ft;Fe++){if(lt=G.charCodeAt(Fe),Ae&&lt===37&&Fe+2<ft&&/^[0-9a-f]{2}$/i.test(G.slice(Fe+1,Fe+3))){Mn+=G.slice(Fe,Fe+3),Fe+=2;continue}if(lt<128){Mn+=Bt[lt];continue}if(lt>=55296&&lt<=57343){if(lt>=55296&&lt<=56319&&Fe+1<ft&&(vn=G.charCodeAt(Fe+1),vn>=56320&&vn<=57343)){Mn+=encodeURIComponent(G[Fe]+G[Fe+1]),Fe++;continue}Mn+="%EF%BF%BD";continue}Mn+=encodeURIComponent(G[Fe])}return Mn}c.defaultChars=";/?:@&=+$,-_.!~*'()#",c.componentChars="-_.!~*'()";var d=c,h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Yi<"u"?Yi:typeof self<"u"?self:{};function p(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}function m(G,ue){return ue={exports:{}},G(ue,ue.exports),ue.exports}function b(G){return G&&G.default||G}var y="",v="",w="",E="",A="",T="",D="",k="",R="",M="",B="",K="",L="",$="",I="",U="",q="",Y="",X="",te="",le="",ee="",z="",he="",de="",ze="",He="&",je="&",we="",Ie="",qe="",Pe="",At="",ht="",nn="",Vt="",On="",Ze="",pe="",ie="",se="",ve="",F="",H="",J="",re="",ye="",xe="",Re="",P="",Q="",oe="",ae="",ke="",Ce="",Ee="",De="",Me="",We="",tt="",dt="",Kt="'",xt="",Qt="",rn="",on="",sn="",Tn="",Er="",Ki="",ho="*",Hi="",Ns="",qn="",Or="",Lr="",mn="",Kr="",or="",Ni="",tr="",$r="",ns="",me="",Le="",it="",Ke="",Et="",an="",en="",wt="",et="",hn="",An="",zt="",jt="",Sr="",ci="",Zt="",Xe="",pt="",Xn="",ni="",Ar="",Rr="",nr="",qt="",bi="",Ji="",vi="",Uo="",xs="",rs="",Bs="",xo="",Mo="",zs="",po="",sl="",al="",Cr="",Qi="",is="",Oo="",qo="",fa="",Ho="",ll="",Gi="",Vi="",os="",go="",js="",Go="",fi="=",Oa="",ss="",Wi="",as="",ul="",Ht="",Z="",ge="",Be="",yt="",pn="",It="",In="",dr="",kr="",Ln="",Ai="",Jr="",sr="",di="",wo="",Vo="",Bi="",zi="",ws="",Hr="",da="",Gu="",cl="",fl="",Vc="",Vu="",ne="",_e="",Ye="",bt="",Jt="",Ut="",Sn="",pr="",Ir="",eo="",_o="",xi="",Li="",Te="",ut="",Wt="",Vn="",gr="",Pn="",ji="",$a="",Sv="",hS="",Av="",Cv="",Sh="",kv="",Tv="",W0="",_g="",Dv="\\",Eg="",dl="",Lv="",Y0="",X0="",Rv="",Fv="",Z0="",pS="",gS="",mS="",sd="",ad="",K0="",J0="",Mv="",Q0="",Wc="",Yc="",_s="",Wu="",Yu="",Sg="",Ov="",Ah="",$v="",ey="",Ag="",yS="",ty="",Iv="",ny="",ry="",ld="",Cg="",Pv="",kg="",iy="",oy="",ud="",Ch="",Tg="",Nv="",kh="",Bv="",Xc="",Th="",Zc="",Dh="",cd="",zv="",jv="",Uv="",bS="",Kc="",Jc="",vS="",xS="",wS="",_S="",ES="",Us="",Eo="",ls="",So="",Lh="",SS="",Dg="",AS="",sy="",qv="",ay="",ly=":",uy="",Hv="",Gv="",cy="",Vv=",",Rh="@",CS="",Lg="",hu="",Wv="",kS="",Yv="",ha="",Pr="",hl="",Xu="",Zu="",Xv="",fy="",Zv="",dy="",Fh="",Kv="",hy="",Ku="",Jv="",Qv="",Rg="",py="",ex="",tx="",TS="",Fg="",nx="",DS="",rx="",fd="",gy="",Mg="",ix="",my="",ox="",sx="",Wo="",Og="",ax="",lx="",ux="",dd="",$g="",cx="",fx="",dx="",hd="",hx="",Ig="",px="",Mh="",pd="",gx="",mx="",yx="",Oh="",$h="",Ih="",Ph="",bx="",vx="",Ju="",gd="",Nh="",xx="",LS="",RS="",Es="",wx="",FS="",_x="",Ex="",Sx="",MS="",OS="",Qu="",Bh="",Pg="",zh="",pu="",$S="",IS="",md="",Ax="",Cx="",kx="",Ng="",yd="",yy="",by="",vy="",jh="`",Tx="",Dx="",Bg="",PS="",Uh="",Lx="",Rx="",xy="",Fx="",Mx="",Ox="",qh="",Hh="",wy="",$x="",Ix="",Px="",_y="",Nx="$",Bx="",bd="",zx="",zg="",NS="",BS="",Ri="",Ey="",Gh="",pl="",jg="",Sy="",jx="",Ux="",qx="",Hx="",Gx="",Ay="",Vx="",Qr="",Wx="",vd="",Ug="",zS="",to="",jS="",qg="",g="",x="",S="",_="",C="",O="",N="",j="",V="",W="",ce="",fe="",Se="",be="",$e="",Ne="",Oe="",Ve="",nt="",Je="",gt="",ct="",mt="",bn="",Ot="",Hn="",fn="",ar="",Nr="",lr="",Zn="",ur="",$n="",Br="",Fn="",Jn="",Nn="",br="",us="",zr="",Yo="",Xo="",Ci="",cs="",Ia="",$o="",gl="",Hg="",Yx="",Qc="",qs="",ec="",US="",xd="",Cy="",Vh="",Gg="",Wh="",ky="",Xx="",Ty="",Zx="",Kx="",Jx="",dz="",hz="",pz="",gz="",mz="",yz="",bz="",vz="",xz="",wz="",_z="",Ez="",Sz="",Az="",Cz="",kz="",Tz="",Dz="",Lz="",Rz="",Fz="",Mz="",Oz="",$z="",Iz="",Pz="",Nz="",Bz="",zz="",jz="",Uz="",qz="",Hz="=",Gz="",Vz="",Wz="",Yz="",Xz="",Zz="",Kz="",Jz="",Qz="",ej="",tj="",nj="",rj="",ij="",oj="",sj="",aj="",lj="",uj="",cj="",fj="!",dj="",hj="",pj="",gj="",mj="",yj="",bj="",vj="",xj="",wj="",_j="",Ej="",Sj="",Aj="",Cj="",kj="",Tj="",Dj="fj",Lj="",Rj="",Fj="",Mj="",Oj="",$j="",Ij="",Pj="",Nj="",Bj="",zj="",jj="",Uj="",qj="",Hj="",Gj="",Vj="",Wj="",Yj="",Xj="",Zj="",Kj="",Jj="",Qj="",eU="",tU="",nU="",rU="",iU="",oU="",sU="",aU="",lU="",uU="",cU="",fU="",dU="",hU="",pU="",gU="",mU="",yU="",bU="",vU="",xU="",wU="",_U="",EU="",SU="",AU="",CU="",kU="",TU="",DU="",LU="",RU="",FU="",MU="",OU="",$U="",IU="",PU="",NU="",BU="",zU="",jU="",UU="",qU="",HU="",GU="",VU="",WU="",YU="",XU="",ZU="",KU="",JU="",QU="",eq="",tq="",nq="",rq="`",iq="",oq="",sq="",aq="",lq="",uq="",cq="",fq="",dq="",hq="",pq="",gq="",mq="",yq="",bq=">",vq=">",xq="",wq="",_q="",Eq="",Sq="",Aq="",Cq="",kq="",Tq="",Dq="",Lq="",Rq="",Fq="",Mq="",Oq="",$q="",Iq="",Pq="",Nq="",Bq="",zq="",jq="",Uq="",qq="^",Hq="",Gq="",Vq="",Wq="",Yq="",Xq="",Zq="",Kq="",Jq="",Qq="",eH="",tH="",nH="",rH="",iH="",oH="",sH="",aH="",lH="",uH="",cH="",fH="",dH="",hH="",pH="",gH="",mH="",yH="",bH="",vH="",xH="",wH="",_H="",EH="",SH="",AH="",CH="",kH="",TH="",DH="",LH="",RH="",FH="",MH="",OH="",$H="",IH="",PH="",NH="",BH="",zH="",jH="",UH="",qH="",HH="",GH="",VH="",WH="",YH="",XH="",ZH="",KH="",JH="",QH="",eG="",tG="",nG="",rG="",iG="",oG="",sG="",aG="",lG="",uG="",cG="",fG="",dG="",hG="",pG="",gG="",mG="",yG="",bG="",vG="",xG="",wG="",_G="",EG="",SG="",AG="",CG="",kG="",TG="",DG="",LG="",RG="",FG="",MG="",OG="",$G="",IG="",PG="",NG="",BG="",zG="",jG="",UG="",qG="",HG="",GG="",VG="",WG="",YG="",XG="",ZG="",KG="",JG="",QG="",eV="",tV="",nV="",rV="",iV="",oV="",sV="",aV="",lV="",uV="",cV="",fV="",dV="",hV="",pV="",gV="",mV="",yV="",bV="",vV="",xV="",wV="",_V="",EV="",SV="",AV="",CV="",kV="",TV="",DV="",LV="",RV="",FV="",MV="",OV="",$V="",IV="",PV="",NV="",BV="",zV="",jV="",UV="",qV="",HV="",GV="",VV="",WV="",YV="",XV="",ZV="",KV="{",JV="[",QV="",eW="",tW="",nW="",rW="",iW="",oW="",sW="",aW="{",lW="",uW="",cW="",fW="",dW="",hW="",pW="",gW="",mW="",yW="",bW="",vW="",xW="",wW="",_W="",EW="",SW="",AW="",CW="",kW="",TW="",DW="",LW="",RW="",FW="",MW="",OW="",$W="",IW="",PW="",NW="",BW="",zW="",jW="",UW="",qW="",HW="",GW="",VW="",WW="",YW="",XW="",ZW="",KW="",JW="",QW="",eY="",tY="",nY="",rY="",iY="",oY="",sY="",aY="",lY="",uY="",cY="",fY="",dY="",hY="",pY="",gY="",mY="",yY="",bY="",vY="",xY="",wY="",_Y="",EY="",SY="",AY="",CY="",kY="",TY="",DY="",LY="",RY="",FY="",MY="",OY="",$Y="",IY="",PY="",NY="",BY="",zY="",jY="",UY="",qY="",HY="",GY="",VY="",WY="",YY="",XY="",ZY="",KY="",JY="",QY="",eX="",tX="",nX="",rX="",iX="",oX="",sX="",aX="",lX="",uX="",cX="",fX="",dX="",hX="",pX="",gX="",mX="",yX="",bX="",vX="",xX="",wX="",_X="_",EX="",SX="",AX="",CX="",kX="",TX="(",DX="",LX="",RX="",FX="",MX="",OX="",$X="",IX="",PX="",NX="",BX="",zX="",jX="",UX="",qX="",HX="[",GX="",VX="",WX="",YX="",XX="",ZX="",KX="<",JX="<",QX="",eZ="",tZ="",nZ="",rZ="",iZ="",oZ="",sZ="",aZ="",lZ="",uZ="",cZ="",fZ="",dZ="",hZ="",pZ="",gZ="",mZ="",yZ="",bZ="",vZ="",xZ="",wZ="",_Z="",EZ="",SZ="",AZ="",CZ="",kZ="",TZ="",DZ="",LZ="",RZ="",FZ="",MZ="",OZ="",$Z="*",IZ="",PZ="",NZ="",BZ="",zZ="",jZ="",UZ="",qZ="",HZ="",GZ="",VZ="",WZ="",YZ="",XZ="",ZZ="",KZ="",JZ="",QZ="",eK="",tK="",nK="",rK="",iK="",oK="",sK="",aK="",lK="",uK="",cK="",fK="",dK="",hK="",pK="",gK="",mK="",yK="",bK="",vK="",xK="",wK="",_K="",EK="",SK="",AK="",CK="",kK="",TK="",DK="",LK="",RK="",FK="",MK="",OK="",$K="",IK="",PK="",NK="",BK="",zK="",jK="",UK="",qK="",HK="",GK=`
`,VK="",WK="",YK="",XK="",ZK="",KK="",JK="",QK="",eJ="",tJ="",nJ="",rJ="",iJ="",oJ="",sJ="",aJ="",lJ="",uJ="",cJ="",fJ="",dJ="",hJ="",pJ="",gJ="",mJ="",yJ="",bJ="",vJ="",xJ="",wJ="",_J="",EJ="",SJ="",AJ="",CJ="",kJ="",TJ="",DJ="",LJ="",RJ="",FJ="",MJ="",OJ="",$J="",IJ="",PJ="",NJ="",BJ="",zJ="",jJ="",UJ="",qJ="",HJ="",GJ="",VJ="",WJ="",YJ="",XJ="",ZJ="",KJ="",JJ="",QJ="",eQ="",tQ="",nQ="",rQ="",iQ="",oQ="",sQ="",aQ="",lQ="",uQ="",cQ="",fQ="",dQ="",hQ="",pQ="",gQ="",mQ="",yQ="",bQ="",vQ="",xQ="",wQ="",_Q="",EQ="",SQ="",AQ="",CQ="",kQ="",TQ="",DQ="",LQ="",RQ="",FQ="",MQ="",OQ="",$Q="",IQ="",PQ="",NQ="",BQ="",zQ="",jQ="",UQ="",qQ="",HQ="",GQ="",VQ="",WQ="",YQ="",XQ="",ZQ="",KQ="",JQ="",QQ="",eee="",tee="",nee="",ree="",iee="",oee="",see="",aee="",lee="",uee="",cee="",fee="",dee="",hee="",pee="",gee="",mee="",yee="",bee="",vee="",xee="",wee="",_ee="",Eee="",See="",Aee="",Cee="",kee="",Tee="",Dee="",Lee="",Ree="",Fee="",Mee="",Oee="",$ee="",Iee="",Pee="",Nee="",Bee="",zee="",jee="",Uee="",qee="",Hee="",Gee="",Vee="",Wee="",Yee="",Xee="",Zee="",Kee="",Jee="",Qee="",ete="#",tte="",nte="",rte="",ite="",ote="",ste="",ate="",lte="",ute=">",cte="",fte="",dte="",hte="",pte="<",gte="",mte="",yte="",bte="",vte="",xte="",wte="",_te="",Ete="",Ste="",Ate="",Cte="",kte="",Tte="",Dte="",Lte="",Rte="",Fte="",Mte="",Ote="",$te="",Ite="",Pte="",Nte="",Bte="",zte="",jte="",Ute="",qte="",Hte="",Gte="",Vte="",Wte="",Yte="",Xte="",Zte="",Kte="",Jte="",Qte="",ene="",tne="",nne="",rne="",ine="",one="",sne="",ane="",lne="",une="",cne="",fne="",dne="",hne="",pne="",gne="",mne="",yne="",bne="",vne="",xne="",wne="",_ne="",Ene="",Sne="",Ane="",Cne="",kne="",Tne="",Dne="",Lne="",Rne="",Fne="",Mne="",One="",$ne="",Ine="",Pne="",Nne="",Bne="",zne="",jne="",Une="",qne="",Hne="",Gne="",Vne="",Wne="",Yne="",Xne="",Zne="",Kne="",Jne="",Qne="",ere="",tre="%",nre=".",rre="",ire="",ore="",sre="",are="",lre="",ure="",cre="",fre="",dre="",hre="",pre="",gre="",mre="",yre="",bre="",vre="",xre="",wre="",_re="",Ere="+",Sre="",Are="",Cre="",kre="",Tre="",Dre="",Lre="",Rre="",Fre="",Mre="",Ore="",$re="",Ire="",Pre="",Nre="",Bre="",zre="",jre="",Ure="",qre="",Hre="",Gre="",Vre="",Wre="",Yre="",Xre="",Zre="",Kre="",Jre="",Qre="",eie="",tie="",nie="",rie="",iie="",oie="",sie="",aie="",lie="",uie="",cie="",fie="",die="",hie="",pie="",gie="",mie="",yie="",bie="",vie="",xie="",wie="",_ie="",Eie="",Sie="",Aie="",Cie="",kie="",Tie="",Die="",Lie="",Rie="",Fie="",Mie="?",Oie="",$ie='"',Iie='"',Pie="",Nie="",Bie="",zie="",jie="",Uie="",qie="",Hie="",Gie="",Vie="",Wie="",Yie="",Xie="",Zie="",Kie="",Jie="",Qie="",eoe="",toe="",noe="",roe="",ioe="",ooe="",soe="",aoe="",loe="",uoe="",coe="",foe="",doe="",hoe="",poe="",goe="",moe="",yoe="",boe="}",voe="]",xoe="",woe="",_oe="",Eoe="",Soe="",Aoe="",Coe="",koe="",Toe="}",Doe="",Loe="",Roe="",Foe="",Moe="",Ooe="",$oe="",Ioe="",Poe="",Noe="",Boe="",zoe="",joe="",Uoe="",qoe="",Hoe="",Goe="",Voe="",Woe="",Yoe="",Xoe="",Zoe="",Koe="",Joe="",Qoe="",ese="",tse="",nse="",rse="",ise="",ose="",sse="",ase="",lse="",use="",cse="",fse="",dse="",hse="",pse="",gse="",mse="",yse="",bse="",vse="",xse="",wse="",_se="",Ese="",Sse="",Ase="",Cse="",kse="",Tse="",Dse="",Lse="",Rse="",Fse="",Mse="",Ose="",$se="",Ise="",Pse="",Nse="",Bse="",zse="",jse="",Use="",qse="",Hse="",Gse="",Vse="",Wse="",Yse="",Xse="",Zse="",Kse="",Jse="",Qse=")",eae="",tae="",nae="",rae="",iae="",oae="",sae="",aae="",lae="",uae="]",cae="",fae="",dae="",hae="",pae="",gae="",mae="",yae="",bae="",vae="",xae="",wae="",_ae="",Eae="",Sae="",Aae="",Cae="",kae="",Tae="",Dae="",Lae="",Rae="",Fae="",Mae="",Oae="",$ae="",Iae="",Pae="",Nae="",Bae="",zae="",jae="",Uae="",qae="",Hae="",Gae="",Vae="",Wae="",Yae="",Xae="",Zae="",Kae=";",Jae="",Qae="",ele="",tle="",nle="",rle="",ile="",ole="",sle="",ale="",lle="",ule="",cle="",fle="",dle="",hle="",ple="",gle="",mle="",yle="",ble="",vle="",xle="",wle="",_le="",Ele="",Sle="",Ale="",Cle="",kle="",Tle="",Dle="",Lle="",Rle="",Fle="",Mle="",Ole="",$le="",Ile="",Ple="",Nle="",Ble="",zle="",jle="",Ule="",qle="",Hle="",Gle="",Vle="/",Wle="",Yle="",Xle="",Zle="",Kle="",Jle="",Qle="",eue="",tue="",nue="",rue="",iue="",oue="",sue="",aue="",lue="",uue="",cue="",fue="",due="",hue="",pue="",gue="",mue="",yue="",bue="",vue="",xue="",wue="",_ue="",Eue="",Sue="",Aue="",Cue="",kue="",Tue="",Due="",Lue="",Rue="",Fue="",Mue="",Oue="",$ue="",Iue="",Pue="",Nue="",Bue="",zue="",jue="",Uue="",que="",Hue="",Gue="",Vue="",Wue="",Yue="",Xue="",Zue="",Kue="",Jue="",Que="",ece="",tce="",nce="",rce="",ice="",oce="",sce="",ace="",lce="",uce="",cce="",fce="",dce="",hce="",pce="",gce="",mce="",yce="",bce="",vce="",xce="",wce="",_ce="",Ece="",Sce="",Ace="",Cce="",kce="",Tce="",Dce="",Lce="",Rce="",Fce="",Mce="",Oce="",$ce="",Ice="",Pce="",Nce="",Bce="",zce="",jce="",Uce="",qce="",Hce="",Gce="",Vce="",Wce="",Yce="",Xce="",Zce="",Kce="	",Jce="",Qce="",efe="",tfe="",nfe="",rfe="",ife="",ofe="",sfe="",afe="",lfe="",ufe="",cfe="",ffe="",dfe="",hfe="",pfe="",gfe="",mfe="",yfe="",bfe="",vfe="",xfe="",wfe="",_fe="",Efe="",Sfe="",Afe="",Cfe="",kfe="",Tfe="",Dfe="",Lfe="",Rfe="",Ffe="",Mfe="",Ofe="",$fe="",Ife="",Pfe="",Nfe="",Bfe="",zfe="",jfe="",Ufe="",qfe="",Hfe="",Gfe="",Vfe="",Wfe="",Yfe="",Xfe="",Zfe="",Kfe="",Jfe="",Qfe="",ede="",tde="",nde="",rde="",ide="",ode="",sde="",ade="",lde="",ude="",cde="",fde="",dde="",hde="",pde="",gde="",mde="",yde="",bde="",vde="",xde="",wde="",_de="",Ede="",Sde="",Ade="",Cde="",kde="",Tde="",Dde="",Lde="",Rde="",Fde="",Mde="",Ode="",$de="",Ide="",Pde="",Nde="",Bde="",zde="",jde="",Ude="",qde="",Hde="",Gde="",Vde="",Wde="",Yde="",Xde="",Zde="",Kde="",Jde="",Qde="",ehe="",the="_",nhe="",rhe="",ihe="",ohe="",she="",ahe="",lhe="",uhe="",che="",fhe="",dhe="",hhe="",phe="",ghe="",mhe="",yhe="",bhe="",vhe="",xhe="",whe="",_he="",Ehe="",She="",Ahe="",Che="",khe="",The="",Dhe="",Lhe="",Rhe="",Fhe="",Mhe="",Ohe="",$he="",Ihe="",Phe="",Nhe="",Bhe="",zhe="",jhe="",Uhe="",qhe="",Hhe="",Ghe="",Vhe="",Whe="",Yhe="",Xhe="",Zhe="",Khe="",Jhe="",Qhe="",epe="",tpe="",npe="",rpe="",ipe="",ope="",spe="",ape="",lpe="",upe="",cpe="",fpe="",dpe="",hpe="",ppe="",gpe="",mpe="",ype="",bpe="",vpe="",xpe="",wpe="",_pe="",Epe="",Spe="",Ape="",Cpe="",kpe="",Tpe="",Dpe="|",Lpe="",Rpe="|",Fpe="",Mpe="",Ope="|",$pe="",Ipe="",Ppe="",Npe="",Bpe="",zpe="",jpe="",Upe="",qpe="",Hpe="",Gpe="",Vpe="",Wpe="",Ype="",Xpe="",Zpe="",Kpe="",Jpe="",Qpe="",ege="",tge="",nge="",rge="",ige="",oge="",sge="",age="",lge="",uge="",cge="",fge="",dge="",hge="",pge="",gge="",mge="",yge="",bge="",vge="",xge="",wge="",_ge="",Ege="",Sge="",Age="",Cge="",kge="",Tge="",Dge="",Lge="",Rge="",Fge="",Mge="",Oge="",$ge="",Ige="",Pge="",Nge="",Bge="",zge="",jge="",Uge="",qge="",Hge="",Gge="",Vge="",Wge="",Yge="",Xge="",Zge="",Kge="",Jge="",Qge="",eme="",tme="",nme="",rme="",ime="",ome="",sme="",ame="",lme="",ume="",cme="",fme="",dme="",hme="",pme="",gme="",mme="",yme="",bme="",vme="",xme="",wme="",_me="",Eme="",Sme="",Ame="",Cme="",kme="",Tme="",Dme="",Lme="",Rme="",Fme="",Mme="",Ome="",QNe={Aacute:y,aacute:v,Abreve:w,abreve:E,ac:A,acd:T,acE:D,Acirc:k,acirc:R,acute:M,Acy:B,acy:K,AElig:L,aelig:$,af:I,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:de,amalg:ze,amp:He,AMP:je,andand:we,And:Ie,and:qe,andd:Pe,andslope:At,andv:ht,ang:nn,ange:Vt,angle:On,angmsdaa:Ze,angmsdab:pe,angmsdac:ie,angmsdad:se,angmsdae:ve,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:oe,Aogon:ae,aogon:ke,Aopf:Ce,aopf:Ee,apacir:De,ap:Me,apE:We,ape:tt,apid:dt,apos:Kt,ApplyFunction:xt,approx:Qt,approxeq:rn,Aring:on,aring:sn,Ascr:Tn,ascr:Er,Assign:Ki,ast:ho,asymp:Hi,asympeq:Ns,Atilde:qn,atilde:Or,Auml:Lr,auml:mn,awconint:Kr,awint:or,backcong:Ni,backepsilon:tr,backprime:$r,backsim:ns,backsimeq:me,Backslash:Le,Barv:it,barvee:Ke,barwed:Et,Barwed:an,barwedge:en,bbrk:wt,bbrktbrk:et,bcong:hn,Bcy:An,bcy:zt,bdquo:jt,becaus:Sr,because:ci,Because:Zt,bemptyv:Xe,bepsi:pt,bernou:Xn,Bernoullis:ni,Beta:Ar,beta:Rr,beth:nr,between:qt,Bfr:bi,bfr:Ji,bigcap:vi,bigcirc:Uo,bigcup:xs,bigodot:rs,bigoplus:Bs,bigotimes:xo,bigsqcup:Mo,bigstar:zs,bigtriangledown:po,bigtriangleup:sl,biguplus:al,bigvee:Cr,bigwedge:Qi,bkarow:is,blacklozenge:Oo,blacksquare:qo,blacktriangle:fa,blacktriangledown:Ho,blacktriangleleft:ll,blacktriangleright:Gi,blank:Vi,blk12:os,blk14:go,blk34:js,block:Go,bne:fi,bnequiv:Oa,bNot:ss,bnot:Wi,Bopf:as,bopf:ul,bot:Ht,bottom:Z,bowtie:ge,boxbox:Be,boxdl:yt,boxdL:pn,boxDl:It,boxDL:In,boxdr:dr,boxdR:kr,boxDr:Ln,boxDR:Ai,boxh:Jr,boxH:sr,boxhd:di,boxHd:wo,boxhD:Vo,boxHD:Bi,boxhu:zi,boxHu:ws,boxhU:Hr,boxHU:da,boxminus:Gu,boxplus:cl,boxtimes:fl,boxul:Vc,boxuL:Vu,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:bt,boxUr:Jt,boxUR:Ut,boxv:Sn,boxV:pr,boxvh:Ir,boxvH:eo,boxVh:_o,boxVH:xi,boxvl:Li,boxvL:Te,boxVl:ut,boxVL:Wt,boxvr:Vn,boxvR:gr,boxVr:Pn,boxVR:ji,bprime:$a,breve:Sv,Breve:hS,brvbar:Av,bscr:Cv,Bscr:Sh,bsemi:kv,bsim:Tv,bsime:W0,bsolb:_g,bsol:Dv,bsolhsub:Eg,bull:dl,bullet:Lv,bump:Y0,bumpE:X0,bumpe:Rv,Bumpeq:Fv,bumpeq:Z0,Cacute:pS,cacute:gS,capand:mS,capbrcup:sd,capcap:ad,cap:K0,Cap:J0,capcup:Mv,capdot:Q0,CapitalDifferentialD:Wc,caps:Yc,caret:_s,caron:Wu,Cayleys:Yu,ccaps:Sg,Ccaron:Ov,ccaron:Ah,Ccedil:$v,ccedil:ey,Ccirc:Ag,ccirc:yS,Cconint:ty,ccups:Iv,ccupssm:ny,Cdot:ry,cdot:ld,cedil:Cg,Cedilla:Pv,cemptyv:kg,cent:iy,centerdot:oy,CenterDot:ud,cfr:Ch,Cfr:Tg,CHcy:Nv,chcy:kh,check:Bv,checkmark:Xc,Chi:Th,chi:Zc,circ:Dh,circeq:cd,circlearrowleft:zv,circlearrowright:jv,circledast:Uv,circledcirc:bS,circleddash:Kc,CircleDot:Jc,circledR:vS,circledS:xS,CircleMinus:wS,CirclePlus:_S,CircleTimes:ES,cir:Us,cirE:Eo,cire:ls,cirfnint:So,cirmid:Lh,cirscir:SS,ClockwiseContourIntegral:Dg,CloseCurlyDoubleQuote:AS,CloseCurlyQuote:sy,clubs:qv,clubsuit:ay,colon:ly,Colon:uy,Colone:Hv,colone:Gv,coloneq:cy,comma:Vv,commat:Rh,comp:CS,compfn:Lg,complement:hu,complexes:Wv,cong:kS,congdot:Yv,Congruent:ha,conint:Pr,Conint:hl,ContourIntegral:Xu,copf:Zu,Copf:Xv,coprod:fy,Coproduct:Zv,copy:dy,COPY:Fh,copysr:Kv,CounterClockwiseContourIntegral:hy,crarr:Ku,cross:Jv,Cross:Qv,Cscr:Rg,cscr:py,csub:ex,csube:tx,csup:TS,csupe:Fg,ctdot:nx,cudarrl:DS,cudarrr:rx,cuepr:fd,cuesc:gy,cularr:Mg,cularrp:ix,cupbrcap:my,cupcap:ox,CupCap:sx,cup:Wo,Cup:Og,cupcup:ax,cupdot:lx,cupor:ux,cups:dd,curarr:$g,curarrm:cx,curlyeqprec:fx,curlyeqsucc:dx,curlyvee:hd,curlywedge:hx,curren:Ig,curvearrowleft:px,curvearrowright:Mh,cuvee:pd,cuwed:gx,cwconint:mx,cwint:yx,cylcty:Oh,dagger:$h,Dagger:Ih,daleth:Ph,darr:bx,Darr:vx,dArr:Ju,dash:gd,Dashv:Nh,dashv:xx,dbkarow:LS,dblac:RS,Dcaron:Es,dcaron:wx,Dcy:FS,dcy:_x,ddagger:Ex,ddarr:Sx,DD:MS,dd:OS,DDotrahd:Qu,ddotseq:Bh,deg:Pg,Del:zh,Delta:pu,delta:$S,demptyv:IS,dfisht:md,Dfr:Ax,dfr:Cx,dHar:kx,dharl:Ng,dharr:yd,DiacriticalAcute:yy,DiacriticalDot:by,DiacriticalDoubleAcute:vy,DiacriticalGrave:jh,DiacriticalTilde:Tx,diam:Dx,diamond:Bg,Diamond:PS,diamondsuit:Uh,diams:Lx,die:Rx,DifferentialD:xy,digamma:Fx,disin:Mx,div:Ox,divide:qh,divideontimes:Hh,divonx:wy,DJcy:$x,djcy:Ix,dlcorn:Px,dlcrop:_y,dollar:Nx,Dopf:Bx,dopf:bd,Dot:zx,dot:zg,DotDot:NS,doteq:BS,doteqdot:Ri,DotEqual:Ey,dotminus:Gh,dotplus:pl,dotsquare:jg,doublebarwedge:Sy,DoubleContourIntegral:jx,DoubleDot:Ux,DoubleDownArrow:qx,DoubleLeftArrow:Hx,DoubleLeftRightArrow:Gx,DoubleLeftTee:Ay,DoubleLongLeftArrow:Vx,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:Wx,DoubleRightArrow:vd,DoubleRightTee:Ug,DoubleUpArrow:zS,DoubleUpDownArrow:to,DoubleVerticalBar:jS,DownArrowBar:qg,downarrow:g,DownArrow:x,Downarrow:S,DownArrowUpArrow:_,DownBreve:C,downdownarrows:O,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:fe,DownRightTeeVector:Se,DownRightVectorBar:be,DownRightVector:$e,DownTeeArrow:Ne,DownTee:Oe,drbkarow:Ve,drcorn:nt,drcrop:Je,Dscr:gt,dscr:ct,DScy:mt,dscy:bn,dsol:Ot,Dstrok:Hn,dstrok:fn,dtdot:ar,dtri:Nr,dtrif:lr,duarr:Zn,duhar:ur,dwangle:$n,DZcy:Br,dzcy:Fn,dzigrarr:Jn,Eacute:Nn,eacute:br,easter:us,Ecaron:zr,ecaron:Yo,Ecirc:Xo,ecirc:Ci,ecir:cs,ecolon:Ia,Ecy:$o,ecy:gl,eDDot:Hg,Edot:Yx,edot:Qc,eDot:qs,ee:ec,efDot:US,Efr:xd,efr:Cy,eg:Vh,Egrave:Gg,egrave:Wh,egs:ky,egsdot:Xx,el:Ty,Element:Zx,elinters:Kx,ell:Jx,els:dz,elsdot:hz,Emacr:pz,emacr:gz,empty:mz,emptyset:yz,EmptySmallSquare:bz,emptyv:vz,EmptyVerySmallSquare:xz,emsp13:wz,emsp14:_z,emsp:Ez,ENG:Sz,eng:Az,ensp:Cz,Eogon:kz,eogon:Tz,Eopf:Dz,eopf:Lz,epar:Rz,eparsl:Fz,eplus:Mz,epsi:Oz,Epsilon:$z,epsilon:Iz,epsiv:Pz,eqcirc:Nz,eqcolon:Bz,eqsim:zz,eqslantgtr:jz,eqslantless:Uz,Equal:qz,equals:Hz,EqualTilde:Gz,equest:Vz,Equilibrium:Wz,equiv:Yz,equivDD:Xz,eqvparsl:Zz,erarr:Kz,erDot:Jz,escr:Qz,Escr:ej,esdot:tj,Esim:nj,esim:rj,Eta:ij,eta:oj,ETH:sj,eth:aj,Euml:lj,euml:uj,euro:cj,excl:fj,exist:dj,Exists:hj,expectation:pj,exponentiale:gj,ExponentialE:mj,fallingdotseq:yj,Fcy:bj,fcy:vj,female:xj,ffilig:wj,fflig:_j,ffllig:Ej,Ffr:Sj,ffr:Aj,filig:Cj,FilledSmallSquare:kj,FilledVerySmallSquare:Tj,fjlig:Dj,flat:Lj,fllig:Rj,fltns:Fj,fnof:Mj,Fopf:Oj,fopf:$j,forall:Ij,ForAll:Pj,fork:Nj,forkv:Bj,Fouriertrf:zj,fpartint:jj,frac12:Uj,frac13:qj,frac14:Hj,frac15:Gj,frac16:Vj,frac18:Wj,frac23:Yj,frac25:Xj,frac34:Zj,frac35:Kj,frac38:Jj,frac45:Qj,frac56:eU,frac58:tU,frac78:nU,frasl:rU,frown:iU,fscr:oU,Fscr:sU,gacute:aU,Gamma:lU,gamma:uU,Gammad:cU,gammad:fU,gap:dU,Gbreve:hU,gbreve:pU,Gcedil:gU,Gcirc:mU,gcirc:yU,Gcy:bU,gcy:vU,Gdot:xU,gdot:wU,ge:_U,gE:EU,gEl:SU,gel:AU,geq:CU,geqq:kU,geqslant:TU,gescc:DU,ges:LU,gesdot:RU,gesdoto:FU,gesdotol:MU,gesl:OU,gesles:$U,Gfr:IU,gfr:PU,gg:NU,Gg:BU,ggg:zU,gimel:jU,GJcy:UU,gjcy:qU,gla:HU,gl:GU,glE:VU,glj:WU,gnap:YU,gnapprox:XU,gne:ZU,gnE:KU,gneq:JU,gneqq:QU,gnsim:eq,Gopf:tq,gopf:nq,grave:rq,GreaterEqual:iq,GreaterEqualLess:oq,GreaterFullEqual:sq,GreaterGreater:aq,GreaterLess:lq,GreaterSlantEqual:uq,GreaterTilde:cq,Gscr:fq,gscr:dq,gsim:hq,gsime:pq,gsiml:gq,gtcc:mq,gtcir:yq,gt:bq,GT:vq,Gt:xq,gtdot:wq,gtlPar:_q,gtquest:Eq,gtrapprox:Sq,gtrarr:Aq,gtrdot:Cq,gtreqless:kq,gtreqqless:Tq,gtrless:Dq,gtrsim:Lq,gvertneqq:Rq,gvnE:Fq,Hacek:Mq,hairsp:Oq,half:$q,hamilt:Iq,HARDcy:Pq,hardcy:Nq,harrcir:Bq,harr:zq,hArr:jq,harrw:Uq,Hat:qq,hbar:Hq,Hcirc:Gq,hcirc:Vq,hearts:Wq,heartsuit:Yq,hellip:Xq,hercon:Zq,hfr:Kq,Hfr:Jq,HilbertSpace:Qq,hksearow:eH,hkswarow:tH,hoarr:nH,homtht:rH,hookleftarrow:iH,hookrightarrow:oH,hopf:sH,Hopf:aH,horbar:lH,HorizontalLine:uH,hscr:cH,Hscr:fH,hslash:dH,Hstrok:hH,hstrok:pH,HumpDownHump:gH,HumpEqual:mH,hybull:yH,hyphen:bH,Iacute:vH,iacute:xH,ic:wH,Icirc:_H,icirc:EH,Icy:SH,icy:AH,Idot:CH,IEcy:kH,iecy:TH,iexcl:DH,iff:LH,ifr:RH,Ifr:FH,Igrave:MH,igrave:OH,ii:$H,iiiint:IH,iiint:PH,iinfin:NH,iiota:BH,IJlig:zH,ijlig:jH,Imacr:UH,imacr:qH,image:HH,ImaginaryI:GH,imagline:VH,imagpart:WH,imath:YH,Im:XH,imof:ZH,imped:KH,Implies:JH,incare:QH,in:"",infin:eG,infintie:tG,inodot:nG,intcal:rG,int:iG,Int:oG,integers:sG,Integral:aG,intercal:lG,Intersection:uG,intlarhk:cG,intprod:fG,InvisibleComma:dG,InvisibleTimes:hG,IOcy:pG,iocy:gG,Iogon:mG,iogon:yG,Iopf:bG,iopf:vG,Iota:xG,iota:wG,iprod:_G,iquest:EG,iscr:SG,Iscr:AG,isin:CG,isindot:kG,isinE:TG,isins:DG,isinsv:LG,isinv:RG,it:FG,Itilde:MG,itilde:OG,Iukcy:$G,iukcy:IG,Iuml:PG,iuml:NG,Jcirc:BG,jcirc:zG,Jcy:jG,jcy:UG,Jfr:qG,jfr:HG,jmath:GG,Jopf:VG,jopf:WG,Jscr:YG,jscr:XG,Jsercy:ZG,jsercy:KG,Jukcy:JG,jukcy:QG,Kappa:eV,kappa:tV,kappav:nV,Kcedil:rV,kcedil:iV,Kcy:oV,kcy:sV,Kfr:aV,kfr:lV,kgreen:uV,KHcy:cV,khcy:fV,KJcy:dV,kjcy:hV,Kopf:pV,kopf:gV,Kscr:mV,kscr:yV,lAarr:bV,Lacute:vV,lacute:xV,laemptyv:wV,lagran:_V,Lambda:EV,lambda:SV,lang:AV,Lang:CV,langd:kV,langle:TV,lap:DV,Laplacetrf:LV,laquo:RV,larrb:FV,larrbfs:MV,larr:OV,Larr:$V,lArr:IV,larrfs:PV,larrhk:NV,larrlp:BV,larrpl:zV,larrsim:jV,larrtl:UV,latail:qV,lAtail:HV,lat:GV,late:VV,lates:WV,lbarr:YV,lBarr:XV,lbbrk:ZV,lbrace:KV,lbrack:JV,lbrke:QV,lbrksld:eW,lbrkslu:tW,Lcaron:nW,lcaron:rW,Lcedil:iW,lcedil:oW,lceil:sW,lcub:aW,Lcy:lW,lcy:uW,ldca:cW,ldquo:fW,ldquor:dW,ldrdhar:hW,ldrushar:pW,ldsh:gW,le:mW,lE:yW,LeftAngleBracket:bW,LeftArrowBar:vW,leftarrow:xW,LeftArrow:wW,Leftarrow:_W,LeftArrowRightArrow:EW,leftarrowtail:SW,LeftCeiling:AW,LeftDoubleBracket:CW,LeftDownTeeVector:kW,LeftDownVectorBar:TW,LeftDownVector:DW,LeftFloor:LW,leftharpoondown:RW,leftharpoonup:FW,leftleftarrows:MW,leftrightarrow:OW,LeftRightArrow:$W,Leftrightarrow:IW,leftrightarrows:PW,leftrightharpoons:NW,leftrightsquigarrow:BW,LeftRightVector:zW,LeftTeeArrow:jW,LeftTee:UW,LeftTeeVector:qW,leftthreetimes:HW,LeftTriangleBar:GW,LeftTriangle:VW,LeftTriangleEqual:WW,LeftUpDownVector:YW,LeftUpTeeVector:XW,LeftUpVectorBar:ZW,LeftUpVector:KW,LeftVectorBar:JW,LeftVector:QW,lEg:eY,leg:tY,leq:nY,leqq:rY,leqslant:iY,lescc:oY,les:sY,lesdot:aY,lesdoto:lY,lesdotor:uY,lesg:cY,lesges:fY,lessapprox:dY,lessdot:hY,lesseqgtr:pY,lesseqqgtr:gY,LessEqualGreater:mY,LessFullEqual:yY,LessGreater:bY,lessgtr:vY,LessLess:xY,lesssim:wY,LessSlantEqual:_Y,LessTilde:EY,lfisht:SY,lfloor:AY,Lfr:CY,lfr:kY,lg:TY,lgE:DY,lHar:LY,lhard:RY,lharu:FY,lharul:MY,lhblk:OY,LJcy:$Y,ljcy:IY,llarr:PY,ll:NY,Ll:BY,llcorner:zY,Lleftarrow:jY,llhard:UY,lltri:qY,Lmidot:HY,lmidot:GY,lmoustache:VY,lmoust:WY,lnap:YY,lnapprox:XY,lne:ZY,lnE:KY,lneq:JY,lneqq:QY,lnsim:eX,loang:tX,loarr:nX,lobrk:rX,longleftarrow:iX,LongLeftArrow:oX,Longleftarrow:sX,longleftrightarrow:aX,LongLeftRightArrow:lX,Longleftrightarrow:uX,longmapsto:cX,longrightarrow:fX,LongRightArrow:dX,Longrightarrow:hX,looparrowleft:pX,looparrowright:gX,lopar:mX,Lopf:yX,lopf:bX,loplus:vX,lotimes:xX,lowast:wX,lowbar:_X,LowerLeftArrow:EX,LowerRightArrow:SX,loz:AX,lozenge:CX,lozf:kX,lpar:TX,lparlt:DX,lrarr:LX,lrcorner:RX,lrhar:FX,lrhard:MX,lrm:OX,lrtri:$X,lsaquo:IX,lscr:PX,Lscr:NX,lsh:BX,Lsh:zX,lsim:jX,lsime:UX,lsimg:qX,lsqb:HX,lsquo:GX,lsquor:VX,Lstrok:WX,lstrok:YX,ltcc:XX,ltcir:ZX,lt:KX,LT:JX,Lt:QX,ltdot:eZ,lthree:tZ,ltimes:nZ,ltlarr:rZ,ltquest:iZ,ltri:oZ,ltrie:sZ,ltrif:aZ,ltrPar:lZ,lurdshar:uZ,luruhar:cZ,lvertneqq:fZ,lvnE:dZ,macr:hZ,male:pZ,malt:gZ,maltese:mZ,Map:"",map:yZ,mapsto:bZ,mapstodown:vZ,mapstoleft:xZ,mapstoup:wZ,marker:_Z,mcomma:EZ,Mcy:SZ,mcy:AZ,mdash:CZ,mDDot:kZ,measuredangle:TZ,MediumSpace:DZ,Mellintrf:LZ,Mfr:RZ,mfr:FZ,mho:MZ,micro:OZ,midast:$Z,midcir:IZ,mid:PZ,middot:NZ,minusb:BZ,minus:zZ,minusd:jZ,minusdu:UZ,MinusPlus:qZ,mlcp:HZ,mldr:GZ,mnplus:VZ,models:WZ,Mopf:YZ,mopf:XZ,mp:ZZ,mscr:KZ,Mscr:JZ,mstpos:QZ,Mu:eK,mu:tK,multimap:nK,mumap:rK,nabla:iK,Nacute:oK,nacute:sK,nang:aK,nap:lK,napE:uK,napid:cK,napos:fK,napprox:dK,natural:hK,naturals:pK,natur:gK,nbsp:mK,nbump:yK,nbumpe:bK,ncap:vK,Ncaron:xK,ncaron:wK,Ncedil:_K,ncedil:EK,ncong:SK,ncongdot:AK,ncup:CK,Ncy:kK,ncy:TK,ndash:DK,nearhk:LK,nearr:RK,neArr:FK,nearrow:MK,ne:OK,nedot:$K,NegativeMediumSpace:IK,NegativeThickSpace:PK,NegativeThinSpace:NK,NegativeVeryThinSpace:BK,nequiv:zK,nesear:jK,nesim:UK,NestedGreaterGreater:qK,NestedLessLess:HK,NewLine:GK,nexist:VK,nexists:WK,Nfr:YK,nfr:XK,ngE:ZK,nge:KK,ngeq:JK,ngeqq:QK,ngeqslant:eJ,nges:tJ,nGg:nJ,ngsim:rJ,nGt:iJ,ngt:oJ,ngtr:sJ,nGtv:aJ,nharr:lJ,nhArr:uJ,nhpar:cJ,ni:fJ,nis:dJ,nisd:hJ,niv:pJ,NJcy:gJ,njcy:mJ,nlarr:yJ,nlArr:bJ,nldr:vJ,nlE:xJ,nle:wJ,nleftarrow:_J,nLeftarrow:EJ,nleftrightarrow:SJ,nLeftrightarrow:AJ,nleq:CJ,nleqq:kJ,nleqslant:TJ,nles:DJ,nless:LJ,nLl:RJ,nlsim:FJ,nLt:MJ,nlt:OJ,nltri:$J,nltrie:IJ,nLtv:PJ,nmid:NJ,NoBreak:BJ,NonBreakingSpace:zJ,nopf:jJ,Nopf:UJ,Not:qJ,not:HJ,NotCongruent:GJ,NotCupCap:VJ,NotDoubleVerticalBar:WJ,NotElement:YJ,NotEqual:XJ,NotEqualTilde:ZJ,NotExists:KJ,NotGreater:JJ,NotGreaterEqual:QJ,NotGreaterFullEqual:eQ,NotGreaterGreater:tQ,NotGreaterLess:nQ,NotGreaterSlantEqual:rQ,NotGreaterTilde:iQ,NotHumpDownHump:oQ,NotHumpEqual:sQ,notin:aQ,notindot:lQ,notinE:uQ,notinva:cQ,notinvb:fQ,notinvc:dQ,NotLeftTriangleBar:hQ,NotLeftTriangle:pQ,NotLeftTriangleEqual:gQ,NotLess:mQ,NotLessEqual:yQ,NotLessGreater:bQ,NotLessLess:vQ,NotLessSlantEqual:xQ,NotLessTilde:wQ,NotNestedGreaterGreater:_Q,NotNestedLessLess:EQ,notni:SQ,notniva:AQ,notnivb:CQ,notnivc:kQ,NotPrecedes:TQ,NotPrecedesEqual:DQ,NotPrecedesSlantEqual:LQ,NotReverseElement:RQ,NotRightTriangleBar:FQ,NotRightTriangle:MQ,NotRightTriangleEqual:OQ,NotSquareSubset:$Q,NotSquareSubsetEqual:IQ,NotSquareSuperset:PQ,NotSquareSupersetEqual:NQ,NotSubset:BQ,NotSubsetEqual:zQ,NotSucceeds:jQ,NotSucceedsEqual:UQ,NotSucceedsSlantEqual:qQ,NotSucceedsTilde:HQ,NotSuperset:GQ,NotSupersetEqual:VQ,NotTilde:WQ,NotTildeEqual:YQ,NotTildeFullEqual:XQ,NotTildeTilde:ZQ,NotVerticalBar:KQ,nparallel:JQ,npar:QQ,nparsl:eee,npart:tee,npolint:nee,npr:ree,nprcue:iee,nprec:oee,npreceq:see,npre:aee,nrarrc:lee,nrarr:uee,nrArr:cee,nrarrw:fee,nrightarrow:dee,nRightarrow:hee,nrtri:pee,nrtrie:gee,nsc:mee,nsccue:yee,nsce:bee,Nscr:vee,nscr:xee,nshortmid:wee,nshortparallel:_ee,nsim:Eee,nsime:See,nsimeq:Aee,nsmid:Cee,nspar:kee,nsqsube:Tee,nsqsupe:Dee,nsub:Lee,nsubE:Ree,nsube:Fee,nsubset:Mee,nsubseteq:Oee,nsubseteqq:$ee,nsucc:Iee,nsucceq:Pee,nsup:Nee,nsupE:Bee,nsupe:zee,nsupset:jee,nsupseteq:Uee,nsupseteqq:qee,ntgl:Hee,Ntilde:Gee,ntilde:Vee,ntlg:Wee,ntriangleleft:Yee,ntrianglelefteq:Xee,ntriangleright:Zee,ntrianglerighteq:Kee,Nu:Jee,nu:Qee,num:ete,numero:tte,numsp:nte,nvap:rte,nvdash:ite,nvDash:ote,nVdash:ste,nVDash:ate,nvge:lte,nvgt:ute,nvHarr:cte,nvinfin:fte,nvlArr:dte,nvle:hte,nvlt:pte,nvltrie:gte,nvrArr:mte,nvrtrie:yte,nvsim:bte,nwarhk:vte,nwarr:xte,nwArr:wte,nwarrow:_te,nwnear:Ete,Oacute:Ste,oacute:Ate,oast:Cte,Ocirc:kte,ocirc:Tte,ocir:Dte,Ocy:Lte,ocy:Rte,odash:Fte,Odblac:Mte,odblac:Ote,odiv:$te,odot:Ite,odsold:Pte,OElig:Nte,oelig:Bte,ofcir:zte,Ofr:jte,ofr:Ute,ogon:qte,Ograve:Hte,ograve:Gte,ogt:Vte,ohbar:Wte,ohm:Yte,oint:Xte,olarr:Zte,olcir:Kte,olcross:Jte,oline:Qte,olt:ene,Omacr:tne,omacr:nne,Omega:rne,omega:ine,Omicron:one,omicron:sne,omid:ane,ominus:lne,Oopf:une,oopf:cne,opar:fne,OpenCurlyDoubleQuote:dne,OpenCurlyQuote:hne,operp:pne,oplus:gne,orarr:mne,Or:yne,or:bne,ord:vne,order:xne,orderof:wne,ordf:_ne,ordm:Ene,origof:Sne,oror:Ane,orslope:Cne,orv:kne,oS:Tne,Oscr:Dne,oscr:Lne,Oslash:Rne,oslash:Fne,osol:Mne,Otilde:One,otilde:$ne,otimesas:Ine,Otimes:Pne,otimes:Nne,Ouml:Bne,ouml:zne,ovbar:jne,OverBar:Une,OverBrace:qne,OverBracket:Hne,OverParenthesis:Gne,para:Vne,parallel:Wne,par:Yne,parsim:Xne,parsl:Zne,part:Kne,PartialD:Jne,Pcy:Qne,pcy:ere,percnt:tre,period:nre,permil:rre,perp:ire,pertenk:ore,Pfr:sre,pfr:are,Phi:lre,phi:ure,phiv:cre,phmmat:fre,phone:dre,Pi:hre,pi:pre,pitchfork:gre,piv:mre,planck:yre,planckh:bre,plankv:vre,plusacir:xre,plusb:wre,pluscir:_re,plus:Ere,plusdo:Sre,plusdu:Are,pluse:Cre,PlusMinus:kre,plusmn:Tre,plussim:Dre,plustwo:Lre,pm:Rre,Poincareplane:Fre,pointint:Mre,popf:Ore,Popf:$re,pound:Ire,prap:Pre,Pr:Nre,pr:Bre,prcue:zre,precapprox:jre,prec:Ure,preccurlyeq:qre,Precedes:Hre,PrecedesEqual:Gre,PrecedesSlantEqual:Vre,PrecedesTilde:Wre,preceq:Yre,precnapprox:Xre,precneqq:Zre,precnsim:Kre,pre:Jre,prE:Qre,precsim:eie,prime:tie,Prime:nie,primes:rie,prnap:iie,prnE:oie,prnsim:sie,prod:aie,Product:lie,profalar:uie,profline:cie,profsurf:fie,prop:die,Proportional:hie,Proportion:pie,propto:gie,prsim:mie,prurel:yie,Pscr:bie,pscr:vie,Psi:xie,psi:wie,puncsp:_ie,Qfr:Eie,qfr:Sie,qint:Aie,qopf:Cie,Qopf:kie,qprime:Tie,Qscr:Die,qscr:Lie,quaternions:Rie,quatint:Fie,quest:Mie,questeq:Oie,quot:$ie,QUOT:Iie,rAarr:Pie,race:Nie,Racute:Bie,racute:zie,radic:jie,raemptyv:Uie,rang:qie,Rang:Hie,rangd:Gie,range:Vie,rangle:Wie,raquo:Yie,rarrap:Xie,rarrb:Zie,rarrbfs:Kie,rarrc:Jie,rarr:Qie,Rarr:eoe,rArr:toe,rarrfs:noe,rarrhk:roe,rarrlp:ioe,rarrpl:ooe,rarrsim:soe,Rarrtl:aoe,rarrtl:loe,rarrw:uoe,ratail:coe,rAtail:foe,ratio:doe,rationals:hoe,rbarr:poe,rBarr:goe,RBarr:moe,rbbrk:yoe,rbrace:boe,rbrack:voe,rbrke:xoe,rbrksld:woe,rbrkslu:_oe,Rcaron:Eoe,rcaron:Soe,Rcedil:Aoe,rcedil:Coe,rceil:koe,rcub:Toe,Rcy:Doe,rcy:Loe,rdca:Roe,rdldhar:Foe,rdquo:Moe,rdquor:Ooe,rdsh:$oe,real:Ioe,realine:Poe,realpart:Noe,reals:Boe,Re:zoe,rect:joe,reg:Uoe,REG:qoe,ReverseElement:Hoe,ReverseEquilibrium:Goe,ReverseUpEquilibrium:Voe,rfisht:Woe,rfloor:Yoe,rfr:Xoe,Rfr:Zoe,rHar:Koe,rhard:Joe,rharu:Qoe,rharul:ese,Rho:tse,rho:nse,rhov:rse,RightAngleBracket:ise,RightArrowBar:ose,rightarrow:sse,RightArrow:ase,Rightarrow:lse,RightArrowLeftArrow:use,rightarrowtail:cse,RightCeiling:fse,RightDoubleBracket:dse,RightDownTeeVector:hse,RightDownVectorBar:pse,RightDownVector:gse,RightFloor:mse,rightharpoondown:yse,rightharpoonup:bse,rightleftarrows:vse,rightleftharpoons:xse,rightrightarrows:wse,rightsquigarrow:_se,RightTeeArrow:Ese,RightTee:Sse,RightTeeVector:Ase,rightthreetimes:Cse,RightTriangleBar:kse,RightTriangle:Tse,RightTriangleEqual:Dse,RightUpDownVector:Lse,RightUpTeeVector:Rse,RightUpVectorBar:Fse,RightUpVector:Mse,RightVectorBar:Ose,RightVector:$se,ring:Ise,risingdotseq:Pse,rlarr:Nse,rlhar:Bse,rlm:zse,rmoustache:jse,rmoust:Use,rnmid:qse,roang:Hse,roarr:Gse,robrk:Vse,ropar:Wse,ropf:Yse,Ropf:Xse,roplus:Zse,rotimes:Kse,RoundImplies:Jse,rpar:Qse,rpargt:eae,rppolint:tae,rrarr:nae,Rrightarrow:rae,rsaquo:iae,rscr:oae,Rscr:sae,rsh:aae,Rsh:lae,rsqb:uae,rsquo:cae,rsquor:fae,rthree:dae,rtimes:hae,rtri:pae,rtrie:gae,rtrif:mae,rtriltri:yae,RuleDelayed:bae,ruluhar:vae,rx:xae,Sacute:wae,sacute:_ae,sbquo:Eae,scap:Sae,Scaron:Aae,scaron:Cae,Sc:kae,sc:Tae,sccue:Dae,sce:Lae,scE:Rae,Scedil:Fae,scedil:Mae,Scirc:Oae,scirc:$ae,scnap:Iae,scnE:Pae,scnsim:Nae,scpolint:Bae,scsim:zae,Scy:jae,scy:Uae,sdotb:qae,sdot:Hae,sdote:Gae,searhk:Vae,searr:Wae,seArr:Yae,searrow:Xae,sect:Zae,semi:Kae,seswar:Jae,setminus:Qae,setmn:ele,sext:tle,Sfr:nle,sfr:rle,sfrown:ile,sharp:ole,SHCHcy:sle,shchcy:ale,SHcy:lle,shcy:ule,ShortDownArrow:cle,ShortLeftArrow:fle,shortmid:dle,shortparallel:hle,ShortRightArrow:ple,ShortUpArrow:gle,shy:mle,Sigma:yle,sigma:ble,sigmaf:vle,sigmav:xle,sim:wle,simdot:_le,sime:Ele,simeq:Sle,simg:Ale,simgE:Cle,siml:kle,simlE:Tle,simne:Dle,simplus:Lle,simrarr:Rle,slarr:Fle,SmallCircle:Mle,smallsetminus:Ole,smashp:$le,smeparsl:Ile,smid:Ple,smile:Nle,smt:Ble,smte:zle,smtes:jle,SOFTcy:Ule,softcy:qle,solbar:Hle,solb:Gle,sol:Vle,Sopf:Wle,sopf:Yle,spades:Xle,spadesuit:Zle,spar:Kle,sqcap:Jle,sqcaps:Qle,sqcup:eue,sqcups:tue,Sqrt:nue,sqsub:rue,sqsube:iue,sqsubset:oue,sqsubseteq:sue,sqsup:aue,sqsupe:lue,sqsupset:uue,sqsupseteq:cue,square:fue,Square:due,SquareIntersection:hue,SquareSubset:pue,SquareSubsetEqual:gue,SquareSuperset:mue,SquareSupersetEqual:yue,SquareUnion:bue,squarf:vue,squ:xue,squf:wue,srarr:_ue,Sscr:Eue,sscr:Sue,ssetmn:Aue,ssmile:Cue,sstarf:kue,Star:Tue,star:Due,starf:Lue,straightepsilon:Rue,straightphi:Fue,strns:Mue,sub:Oue,Sub:$ue,subdot:Iue,subE:Pue,sube:Nue,subedot:Bue,submult:zue,subnE:jue,subne:Uue,subplus:que,subrarr:Hue,subset:Gue,Subset:Vue,subseteq:Wue,subseteqq:Yue,SubsetEqual:Xue,subsetneq:Zue,subsetneqq:Kue,subsim:Jue,subsub:Que,subsup:ece,succapprox:tce,succ:nce,succcurlyeq:rce,Succeeds:ice,SucceedsEqual:oce,SucceedsSlantEqual:sce,SucceedsTilde:ace,succeq:lce,succnapprox:uce,succneqq:cce,succnsim:fce,succsim:dce,SuchThat:hce,sum:pce,Sum:gce,sung:mce,sup1:yce,sup2:bce,sup3:vce,sup:xce,Sup:wce,supdot:_ce,supdsub:Ece,supE:Sce,supe:Ace,supedot:Cce,Superset:kce,SupersetEqual:Tce,suphsol:Dce,suphsub:Lce,suplarr:Rce,supmult:Fce,supnE:Mce,supne:Oce,supplus:$ce,supset:Ice,Supset:Pce,supseteq:Nce,supseteqq:Bce,supsetneq:zce,supsetneqq:jce,supsim:Uce,supsub:qce,supsup:Hce,swarhk:Gce,swarr:Vce,swArr:Wce,swarrow:Yce,swnwar:Xce,szlig:Zce,Tab:Kce,target:Jce,Tau:Qce,tau:efe,tbrk:tfe,Tcaron:nfe,tcaron:rfe,Tcedil:ife,tcedil:ofe,Tcy:sfe,tcy:afe,tdot:lfe,telrec:ufe,Tfr:cfe,tfr:ffe,there4:dfe,therefore:hfe,Therefore:pfe,Theta:gfe,theta:mfe,thetasym:yfe,thetav:bfe,thickapprox:vfe,thicksim:xfe,ThickSpace:wfe,ThinSpace:_fe,thinsp:Efe,thkap:Sfe,thksim:Afe,THORN:Cfe,thorn:kfe,tilde:Tfe,Tilde:Dfe,TildeEqual:Lfe,TildeFullEqual:Rfe,TildeTilde:Ffe,timesbar:Mfe,timesb:Ofe,times:$fe,timesd:Ife,tint:Pfe,toea:Nfe,topbot:Bfe,topcir:zfe,top:jfe,Topf:Ufe,topf:qfe,topfork:Hfe,tosa:Gfe,tprime:Vfe,trade:Wfe,TRADE:Yfe,triangle:Xfe,triangledown:Zfe,triangleleft:Kfe,trianglelefteq:Jfe,triangleq:Qfe,triangleright:ede,trianglerighteq:tde,tridot:nde,trie:rde,triminus:ide,TripleDot:ode,triplus:sde,trisb:ade,tritime:lde,trpezium:ude,Tscr:cde,tscr:fde,TScy:dde,tscy:hde,TSHcy:pde,tshcy:gde,Tstrok:mde,tstrok:yde,twixt:bde,twoheadleftarrow:vde,twoheadrightarrow:xde,Uacute:wde,uacute:_de,uarr:Ede,Uarr:Sde,uArr:Ade,Uarrocir:Cde,Ubrcy:kde,ubrcy:Tde,Ubreve:Dde,ubreve:Lde,Ucirc:Rde,ucirc:Fde,Ucy:Mde,ucy:Ode,udarr:$de,Udblac:Ide,udblac:Pde,udhar:Nde,ufisht:Bde,Ufr:zde,ufr:jde,Ugrave:Ude,ugrave:qde,uHar:Hde,uharl:Gde,uharr:Vde,uhblk:Wde,ulcorn:Yde,ulcorner:Xde,ulcrop:Zde,ultri:Kde,Umacr:Jde,umacr:Qde,uml:ehe,UnderBar:the,UnderBrace:nhe,UnderBracket:rhe,UnderParenthesis:ihe,Union:ohe,UnionPlus:she,Uogon:ahe,uogon:lhe,Uopf:uhe,uopf:che,UpArrowBar:fhe,uparrow:dhe,UpArrow:hhe,Uparrow:phe,UpArrowDownArrow:ghe,updownarrow:mhe,UpDownArrow:yhe,Updownarrow:bhe,UpEquilibrium:vhe,upharpoonleft:xhe,upharpoonright:whe,uplus:_he,UpperLeftArrow:Ehe,UpperRightArrow:She,upsi:Ahe,Upsi:Che,upsih:khe,Upsilon:The,upsilon:Dhe,UpTeeArrow:Lhe,UpTee:Rhe,upuparrows:Fhe,urcorn:Mhe,urcorner:Ohe,urcrop:$he,Uring:Ihe,uring:Phe,urtri:Nhe,Uscr:Bhe,uscr:zhe,utdot:jhe,Utilde:Uhe,utilde:qhe,utri:Hhe,utrif:Ghe,uuarr:Vhe,Uuml:Whe,uuml:Yhe,uwangle:Xhe,vangrt:Zhe,varepsilon:Khe,varkappa:Jhe,varnothing:Qhe,varphi:epe,varpi:tpe,varpropto:npe,varr:rpe,vArr:ipe,varrho:ope,varsigma:spe,varsubsetneq:ape,varsubsetneqq:lpe,varsupsetneq:upe,varsupsetneqq:cpe,vartheta:fpe,vartriangleleft:dpe,vartriangleright:hpe,vBar:ppe,Vbar:gpe,vBarv:mpe,Vcy:ype,vcy:bpe,vdash:vpe,vDash:xpe,Vdash:wpe,VDash:_pe,Vdashl:Epe,veebar:Spe,vee:Ape,Vee:Cpe,veeeq:kpe,vellip:Tpe,verbar:Dpe,Verbar:Lpe,vert:Rpe,Vert:Fpe,VerticalBar:Mpe,VerticalLine:Ope,VerticalSeparator:$pe,VerticalTilde:Ipe,VeryThinSpace:Ppe,Vfr:Npe,vfr:Bpe,vltri:zpe,vnsub:jpe,vnsup:Upe,Vopf:qpe,vopf:Hpe,vprop:Gpe,vrtri:Vpe,Vscr:Wpe,vscr:Ype,vsubnE:Xpe,vsubne:Zpe,vsupnE:Kpe,vsupne:Jpe,Vvdash:Qpe,vzigzag:ege,Wcirc:tge,wcirc:nge,wedbar:rge,wedge:ige,Wedge:oge,wedgeq:sge,weierp:age,Wfr:lge,wfr:uge,Wopf:cge,wopf:fge,wp:dge,wr:hge,wreath:pge,Wscr:gge,wscr:mge,xcap:yge,xcirc:bge,xcup:vge,xdtri:xge,Xfr:wge,xfr:_ge,xharr:Ege,xhArr:Sge,Xi:Age,xi:Cge,xlarr:kge,xlArr:Tge,xmap:Dge,xnis:Lge,xodot:Rge,Xopf:Fge,xopf:Mge,xoplus:Oge,xotime:$ge,xrarr:Ige,xrArr:Pge,Xscr:Nge,xscr:Bge,xsqcup:zge,xuplus:jge,xutri:Uge,xvee:qge,xwedge:Hge,Yacute:Gge,yacute:Vge,YAcy:Wge,yacy:Yge,Ycirc:Xge,ycirc:Zge,Ycy:Kge,ycy:Jge,yen:Qge,Yfr:eme,yfr:tme,YIcy:nme,yicy:rme,Yopf:ime,yopf:ome,Yscr:sme,yscr:ame,YUcy:lme,yucy:ume,yuml:cme,Yuml:fme,Zacute:dme,zacute:hme,Zcaron:pme,zcaron:gme,Zcy:mme,zcy:yme,Zdot:bme,zdot:vme,zeetrf:xme,ZeroWidthSpace:wme,Zeta:_me,zeta:Eme,zfr:Sme,Zfr:Ame,ZHcy:Cme,zhcy:kme,zigrarr:Tme,zopf:Dme,Zopf:Lme,Zscr:Rme,zscr:Fme,zwj:Mme,zwnj:Ome},e9e=Object.freeze({__proto__:null,Aacute:y,aacute:v,Abreve:w,abreve:E,ac:A,acd:T,acE:D,Acirc:k,acirc:R,acute:M,Acy:B,acy:K,AElig:L,aelig:$,af:I,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:de,amalg:ze,amp:He,AMP:je,andand:we,And:Ie,and:qe,andd:Pe,andslope:At,andv:ht,ang:nn,ange:Vt,angle:On,angmsdaa:Ze,angmsdab:pe,angmsdac:ie,angmsdad:se,angmsdae:ve,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:oe,Aogon:ae,aogon:ke,Aopf:Ce,aopf:Ee,apacir:De,ap:Me,apE:We,ape:tt,apid:dt,apos:Kt,ApplyFunction:xt,approx:Qt,approxeq:rn,Aring:on,aring:sn,Ascr:Tn,ascr:Er,Assign:Ki,ast:ho,asymp:Hi,asympeq:Ns,Atilde:qn,atilde:Or,Auml:Lr,auml:mn,awconint:Kr,awint:or,backcong:Ni,backepsilon:tr,backprime:$r,backsim:ns,backsimeq:me,Backslash:Le,Barv:it,barvee:Ke,barwed:Et,Barwed:an,barwedge:en,bbrk:wt,bbrktbrk:et,bcong:hn,Bcy:An,bcy:zt,bdquo:jt,becaus:Sr,because:ci,Because:Zt,bemptyv:Xe,bepsi:pt,bernou:Xn,Bernoullis:ni,Beta:Ar,beta:Rr,beth:nr,between:qt,Bfr:bi,bfr:Ji,bigcap:vi,bigcirc:Uo,bigcup:xs,bigodot:rs,bigoplus:Bs,bigotimes:xo,bigsqcup:Mo,bigstar:zs,bigtriangledown:po,bigtriangleup:sl,biguplus:al,bigvee:Cr,bigwedge:Qi,bkarow:is,blacklozenge:Oo,blacksquare:qo,blacktriangle:fa,blacktriangledown:Ho,blacktriangleleft:ll,blacktriangleright:Gi,blank:Vi,blk12:os,blk14:go,blk34:js,block:Go,bne:fi,bnequiv:Oa,bNot:ss,bnot:Wi,Bopf:as,bopf:ul,bot:Ht,bottom:Z,bowtie:ge,boxbox:Be,boxdl:yt,boxdL:pn,boxDl:It,boxDL:In,boxdr:dr,boxdR:kr,boxDr:Ln,boxDR:Ai,boxh:Jr,boxH:sr,boxhd:di,boxHd:wo,boxhD:Vo,boxHD:Bi,boxhu:zi,boxHu:ws,boxhU:Hr,boxHU:da,boxminus:Gu,boxplus:cl,boxtimes:fl,boxul:Vc,boxuL:Vu,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:bt,boxUr:Jt,boxUR:Ut,boxv:Sn,boxV:pr,boxvh:Ir,boxvH:eo,boxVh:_o,boxVH:xi,boxvl:Li,boxvL:Te,boxVl:ut,boxVL:Wt,boxvr:Vn,boxvR:gr,boxVr:Pn,boxVR:ji,bprime:$a,breve:Sv,Breve:hS,brvbar:Av,bscr:Cv,Bscr:Sh,bsemi:kv,bsim:Tv,bsime:W0,bsolb:_g,bsol:Dv,bsolhsub:Eg,bull:dl,bullet:Lv,bump:Y0,bumpE:X0,bumpe:Rv,Bumpeq:Fv,bumpeq:Z0,Cacute:pS,cacute:gS,capand:mS,capbrcup:sd,capcap:ad,cap:K0,Cap:J0,capcup:Mv,capdot:Q0,CapitalDifferentialD:Wc,caps:Yc,caret:_s,caron:Wu,Cayleys:Yu,ccaps:Sg,Ccaron:Ov,ccaron:Ah,Ccedil:$v,ccedil:ey,Ccirc:Ag,ccirc:yS,Cconint:ty,ccups:Iv,ccupssm:ny,Cdot:ry,cdot:ld,cedil:Cg,Cedilla:Pv,cemptyv:kg,cent:iy,centerdot:oy,CenterDot:ud,cfr:Ch,Cfr:Tg,CHcy:Nv,chcy:kh,check:Bv,checkmark:Xc,Chi:Th,chi:Zc,circ:Dh,circeq:cd,circlearrowleft:zv,circlearrowright:jv,circledast:Uv,circledcirc:bS,circleddash:Kc,CircleDot:Jc,circledR:vS,circledS:xS,CircleMinus:wS,CirclePlus:_S,CircleTimes:ES,cir:Us,cirE:Eo,cire:ls,cirfnint:So,cirmid:Lh,cirscir:SS,ClockwiseContourIntegral:Dg,CloseCurlyDoubleQuote:AS,CloseCurlyQuote:sy,clubs:qv,clubsuit:ay,colon:ly,Colon:uy,Colone:Hv,colone:Gv,coloneq:cy,comma:Vv,commat:Rh,comp:CS,compfn:Lg,complement:hu,complexes:Wv,cong:kS,congdot:Yv,Congruent:ha,conint:Pr,Conint:hl,ContourIntegral:Xu,copf:Zu,Copf:Xv,coprod:fy,Coproduct:Zv,copy:dy,COPY:Fh,copysr:Kv,CounterClockwiseContourIntegral:hy,crarr:Ku,cross:Jv,Cross:Qv,Cscr:Rg,cscr:py,csub:ex,csube:tx,csup:TS,csupe:Fg,ctdot:nx,cudarrl:DS,cudarrr:rx,cuepr:fd,cuesc:gy,cularr:Mg,cularrp:ix,cupbrcap:my,cupcap:ox,CupCap:sx,cup:Wo,Cup:Og,cupcup:ax,cupdot:lx,cupor:ux,cups:dd,curarr:$g,curarrm:cx,curlyeqprec:fx,curlyeqsucc:dx,curlyvee:hd,curlywedge:hx,curren:Ig,curvearrowleft:px,curvearrowright:Mh,cuvee:pd,cuwed:gx,cwconint:mx,cwint:yx,cylcty:Oh,dagger:$h,Dagger:Ih,daleth:Ph,darr:bx,Darr:vx,dArr:Ju,dash:gd,Dashv:Nh,dashv:xx,dbkarow:LS,dblac:RS,Dcaron:Es,dcaron:wx,Dcy:FS,dcy:_x,ddagger:Ex,ddarr:Sx,DD:MS,dd:OS,DDotrahd:Qu,ddotseq:Bh,deg:Pg,Del:zh,Delta:pu,delta:$S,demptyv:IS,dfisht:md,Dfr:Ax,dfr:Cx,dHar:kx,dharl:Ng,dharr:yd,DiacriticalAcute:yy,DiacriticalDot:by,DiacriticalDoubleAcute:vy,DiacriticalGrave:jh,DiacriticalTilde:Tx,diam:Dx,diamond:Bg,Diamond:PS,diamondsuit:Uh,diams:Lx,die:Rx,DifferentialD:xy,digamma:Fx,disin:Mx,div:Ox,divide:qh,divideontimes:Hh,divonx:wy,DJcy:$x,djcy:Ix,dlcorn:Px,dlcrop:_y,dollar:Nx,Dopf:Bx,dopf:bd,Dot:zx,dot:zg,DotDot:NS,doteq:BS,doteqdot:Ri,DotEqual:Ey,dotminus:Gh,dotplus:pl,dotsquare:jg,doublebarwedge:Sy,DoubleContourIntegral:jx,DoubleDot:Ux,DoubleDownArrow:qx,DoubleLeftArrow:Hx,DoubleLeftRightArrow:Gx,DoubleLeftTee:Ay,DoubleLongLeftArrow:Vx,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:Wx,DoubleRightArrow:vd,DoubleRightTee:Ug,DoubleUpArrow:zS,DoubleUpDownArrow:to,DoubleVerticalBar:jS,DownArrowBar:qg,downarrow:g,DownArrow:x,Downarrow:S,DownArrowUpArrow:_,DownBreve:C,downdownarrows:O,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:fe,DownRightTeeVector:Se,DownRightVectorBar:be,DownRightVector:$e,DownTeeArrow:Ne,DownTee:Oe,drbkarow:Ve,drcorn:nt,drcrop:Je,Dscr:gt,dscr:ct,DScy:mt,dscy:bn,dsol:Ot,Dstrok:Hn,dstrok:fn,dtdot:ar,dtri:Nr,dtrif:lr,duarr:Zn,duhar:ur,dwangle:$n,DZcy:Br,dzcy:Fn,dzigrarr:Jn,Eacute:Nn,eacute:br,easter:us,Ecaron:zr,ecaron:Yo,Ecirc:Xo,ecirc:Ci,ecir:cs,ecolon:Ia,Ecy:$o,ecy:gl,eDDot:Hg,Edot:Yx,edot:Qc,eDot:qs,ee:ec,efDot:US,Efr:xd,efr:Cy,eg:Vh,Egrave:Gg,egrave:Wh,egs:ky,egsdot:Xx,el:Ty,Element:Zx,elinters:Kx,ell:Jx,els:dz,elsdot:hz,Emacr:pz,emacr:gz,empty:mz,emptyset:yz,EmptySmallSquare:bz,emptyv:vz,EmptyVerySmallSquare:xz,emsp13:wz,emsp14:_z,emsp:Ez,ENG:Sz,eng:Az,ensp:Cz,Eogon:kz,eogon:Tz,Eopf:Dz,eopf:Lz,epar:Rz,eparsl:Fz,eplus:Mz,epsi:Oz,Epsilon:$z,epsilon:Iz,epsiv:Pz,eqcirc:Nz,eqcolon:Bz,eqsim:zz,eqslantgtr:jz,eqslantless:Uz,Equal:qz,equals:Hz,EqualTilde:Gz,equest:Vz,Equilibrium:Wz,equiv:Yz,equivDD:Xz,eqvparsl:Zz,erarr:Kz,erDot:Jz,escr:Qz,Escr:ej,esdot:tj,Esim:nj,esim:rj,Eta:ij,eta:oj,ETH:sj,eth:aj,Euml:lj,euml:uj,euro:cj,excl:fj,exist:dj,Exists:hj,expectation:pj,exponentiale:gj,ExponentialE:mj,fallingdotseq:yj,Fcy:bj,fcy:vj,female:xj,ffilig:wj,fflig:_j,ffllig:Ej,Ffr:Sj,ffr:Aj,filig:Cj,FilledSmallSquare:kj,FilledVerySmallSquare:Tj,fjlig:Dj,flat:Lj,fllig:Rj,fltns:Fj,fnof:Mj,Fopf:Oj,fopf:$j,forall:Ij,ForAll:Pj,fork:Nj,forkv:Bj,Fouriertrf:zj,fpartint:jj,frac12:Uj,frac13:qj,frac14:Hj,frac15:Gj,frac16:Vj,frac18:Wj,frac23:Yj,frac25:Xj,frac34:Zj,frac35:Kj,frac38:Jj,frac45:Qj,frac56:eU,frac58:tU,frac78:nU,frasl:rU,frown:iU,fscr:oU,Fscr:sU,gacute:aU,Gamma:lU,gamma:uU,Gammad:cU,gammad:fU,gap:dU,Gbreve:hU,gbreve:pU,Gcedil:gU,Gcirc:mU,gcirc:yU,Gcy:bU,gcy:vU,Gdot:xU,gdot:wU,ge:_U,gE:EU,gEl:SU,gel:AU,geq:CU,geqq:kU,geqslant:TU,gescc:DU,ges:LU,gesdot:RU,gesdoto:FU,gesdotol:MU,gesl:OU,gesles:$U,Gfr:IU,gfr:PU,gg:NU,Gg:BU,ggg:zU,gimel:jU,GJcy:UU,gjcy:qU,gla:HU,gl:GU,glE:VU,glj:WU,gnap:YU,gnapprox:XU,gne:ZU,gnE:KU,gneq:JU,gneqq:QU,gnsim:eq,Gopf:tq,gopf:nq,grave:rq,GreaterEqual:iq,GreaterEqualLess:oq,GreaterFullEqual:sq,GreaterGreater:aq,GreaterLess:lq,GreaterSlantEqual:uq,GreaterTilde:cq,Gscr:fq,gscr:dq,gsim:hq,gsime:pq,gsiml:gq,gtcc:mq,gtcir:yq,gt:bq,GT:vq,Gt:xq,gtdot:wq,gtlPar:_q,gtquest:Eq,gtrapprox:Sq,gtrarr:Aq,gtrdot:Cq,gtreqless:kq,gtreqqless:Tq,gtrless:Dq,gtrsim:Lq,gvertneqq:Rq,gvnE:Fq,Hacek:Mq,hairsp:Oq,half:$q,hamilt:Iq,HARDcy:Pq,hardcy:Nq,harrcir:Bq,harr:zq,hArr:jq,harrw:Uq,Hat:qq,hbar:Hq,Hcirc:Gq,hcirc:Vq,hearts:Wq,heartsuit:Yq,hellip:Xq,hercon:Zq,hfr:Kq,Hfr:Jq,HilbertSpace:Qq,hksearow:eH,hkswarow:tH,hoarr:nH,homtht:rH,hookleftarrow:iH,hookrightarrow:oH,hopf:sH,Hopf:aH,horbar:lH,HorizontalLine:uH,hscr:cH,Hscr:fH,hslash:dH,Hstrok:hH,hstrok:pH,HumpDownHump:gH,HumpEqual:mH,hybull:yH,hyphen:bH,Iacute:vH,iacute:xH,ic:wH,Icirc:_H,icirc:EH,Icy:SH,icy:AH,Idot:CH,IEcy:kH,iecy:TH,iexcl:DH,iff:LH,ifr:RH,Ifr:FH,Igrave:MH,igrave:OH,ii:$H,iiiint:IH,iiint:PH,iinfin:NH,iiota:BH,IJlig:zH,ijlig:jH,Imacr:UH,imacr:qH,image:HH,ImaginaryI:GH,imagline:VH,imagpart:WH,imath:YH,Im:XH,imof:ZH,imped:KH,Implies:JH,incare:QH,infin:eG,infintie:tG,inodot:nG,intcal:rG,int:iG,Int:oG,integers:sG,Integral:aG,intercal:lG,Intersection:uG,intlarhk:cG,intprod:fG,InvisibleComma:dG,InvisibleTimes:hG,IOcy:pG,iocy:gG,Iogon:mG,iogon:yG,Iopf:bG,iopf:vG,Iota:xG,iota:wG,iprod:_G,iquest:EG,iscr:SG,Iscr:AG,isin:CG,isindot:kG,isinE:TG,isins:DG,isinsv:LG,isinv:RG,it:FG,Itilde:MG,itilde:OG,Iukcy:$G,iukcy:IG,Iuml:PG,iuml:NG,Jcirc:BG,jcirc:zG,Jcy:jG,jcy:UG,Jfr:qG,jfr:HG,jmath:GG,Jopf:VG,jopf:WG,Jscr:YG,jscr:XG,Jsercy:ZG,jsercy:KG,Jukcy:JG,jukcy:QG,Kappa:eV,kappa:tV,kappav:nV,Kcedil:rV,kcedil:iV,Kcy:oV,kcy:sV,Kfr:aV,kfr:lV,kgreen:uV,KHcy:cV,khcy:fV,KJcy:dV,kjcy:hV,Kopf:pV,kopf:gV,Kscr:mV,kscr:yV,lAarr:bV,Lacute:vV,lacute:xV,laemptyv:wV,lagran:_V,Lambda:EV,lambda:SV,lang:AV,Lang:CV,langd:kV,langle:TV,lap:DV,Laplacetrf:LV,laquo:RV,larrb:FV,larrbfs:MV,larr:OV,Larr:$V,lArr:IV,larrfs:PV,larrhk:NV,larrlp:BV,larrpl:zV,larrsim:jV,larrtl:UV,latail:qV,lAtail:HV,lat:GV,late:VV,lates:WV,lbarr:YV,lBarr:XV,lbbrk:ZV,lbrace:KV,lbrack:JV,lbrke:QV,lbrksld:eW,lbrkslu:tW,Lcaron:nW,lcaron:rW,Lcedil:iW,lcedil:oW,lceil:sW,lcub:aW,Lcy:lW,lcy:uW,ldca:cW,ldquo:fW,ldquor:dW,ldrdhar:hW,ldrushar:pW,ldsh:gW,le:mW,lE:yW,LeftAngleBracket:bW,LeftArrowBar:vW,leftarrow:xW,LeftArrow:wW,Leftarrow:_W,LeftArrowRightArrow:EW,leftarrowtail:SW,LeftCeiling:AW,LeftDoubleBracket:CW,LeftDownTeeVector:kW,LeftDownVectorBar:TW,LeftDownVector:DW,LeftFloor:LW,leftharpoondown:RW,leftharpoonup:FW,leftleftarrows:MW,leftrightarrow:OW,LeftRightArrow:$W,Leftrightarrow:IW,leftrightarrows:PW,leftrightharpoons:NW,leftrightsquigarrow:BW,LeftRightVector:zW,LeftTeeArrow:jW,LeftTee:UW,LeftTeeVector:qW,leftthreetimes:HW,LeftTriangleBar:GW,LeftTriangle:VW,LeftTriangleEqual:WW,LeftUpDownVector:YW,LeftUpTeeVector:XW,LeftUpVectorBar:ZW,LeftUpVector:KW,LeftVectorBar:JW,LeftVector:QW,lEg:eY,leg:tY,leq:nY,leqq:rY,leqslant:iY,lescc:oY,les:sY,lesdot:aY,lesdoto:lY,lesdotor:uY,lesg:cY,lesges:fY,lessapprox:dY,lessdot:hY,lesseqgtr:pY,lesseqqgtr:gY,LessEqualGreater:mY,LessFullEqual:yY,LessGreater:bY,lessgtr:vY,LessLess:xY,lesssim:wY,LessSlantEqual:_Y,LessTilde:EY,lfisht:SY,lfloor:AY,Lfr:CY,lfr:kY,lg:TY,lgE:DY,lHar:LY,lhard:RY,lharu:FY,lharul:MY,lhblk:OY,LJcy:$Y,ljcy:IY,llarr:PY,ll:NY,Ll:BY,llcorner:zY,Lleftarrow:jY,llhard:UY,lltri:qY,Lmidot:HY,lmidot:GY,lmoustache:VY,lmoust:WY,lnap:YY,lnapprox:XY,lne:ZY,lnE:KY,lneq:JY,lneqq:QY,lnsim:eX,loang:tX,loarr:nX,lobrk:rX,longleftarrow:iX,LongLeftArrow:oX,Longleftarrow:sX,longleftrightarrow:aX,LongLeftRightArrow:lX,Longleftrightarrow:uX,longmapsto:cX,longrightarrow:fX,LongRightArrow:dX,Longrightarrow:hX,looparrowleft:pX,looparrowright:gX,lopar:mX,Lopf:yX,lopf:bX,loplus:vX,lotimes:xX,lowast:wX,lowbar:_X,LowerLeftArrow:EX,LowerRightArrow:SX,loz:AX,lozenge:CX,lozf:kX,lpar:TX,lparlt:DX,lrarr:LX,lrcorner:RX,lrhar:FX,lrhard:MX,lrm:OX,lrtri:$X,lsaquo:IX,lscr:PX,Lscr:NX,lsh:BX,Lsh:zX,lsim:jX,lsime:UX,lsimg:qX,lsqb:HX,lsquo:GX,lsquor:VX,Lstrok:WX,lstrok:YX,ltcc:XX,ltcir:ZX,lt:KX,LT:JX,Lt:QX,ltdot:eZ,lthree:tZ,ltimes:nZ,ltlarr:rZ,ltquest:iZ,ltri:oZ,ltrie:sZ,ltrif:aZ,ltrPar:lZ,lurdshar:uZ,luruhar:cZ,lvertneqq:fZ,lvnE:dZ,macr:hZ,male:pZ,malt:gZ,maltese:mZ,map:yZ,mapsto:bZ,mapstodown:vZ,mapstoleft:xZ,mapstoup:wZ,marker:_Z,mcomma:EZ,Mcy:SZ,mcy:AZ,mdash:CZ,mDDot:kZ,measuredangle:TZ,MediumSpace:DZ,Mellintrf:LZ,Mfr:RZ,mfr:FZ,mho:MZ,micro:OZ,midast:$Z,midcir:IZ,mid:PZ,middot:NZ,minusb:BZ,minus:zZ,minusd:jZ,minusdu:UZ,MinusPlus:qZ,mlcp:HZ,mldr:GZ,mnplus:VZ,models:WZ,Mopf:YZ,mopf:XZ,mp:ZZ,mscr:KZ,Mscr:JZ,mstpos:QZ,Mu:eK,mu:tK,multimap:nK,mumap:rK,nabla:iK,Nacute:oK,nacute:sK,nang:aK,nap:lK,napE:uK,napid:cK,napos:fK,napprox:dK,natural:hK,naturals:pK,natur:gK,nbsp:mK,nbump:yK,nbumpe:bK,ncap:vK,Ncaron:xK,ncaron:wK,Ncedil:_K,ncedil:EK,ncong:SK,ncongdot:AK,ncup:CK,Ncy:kK,ncy:TK,ndash:DK,nearhk:LK,nearr:RK,neArr:FK,nearrow:MK,ne:OK,nedot:$K,NegativeMediumSpace:IK,NegativeThickSpace:PK,NegativeThinSpace:NK,NegativeVeryThinSpace:BK,nequiv:zK,nesear:jK,nesim:UK,NestedGreaterGreater:qK,NestedLessLess:HK,NewLine:GK,nexist:VK,nexists:WK,Nfr:YK,nfr:XK,ngE:ZK,nge:KK,ngeq:JK,ngeqq:QK,ngeqslant:eJ,nges:tJ,nGg:nJ,ngsim:rJ,nGt:iJ,ngt:oJ,ngtr:sJ,nGtv:aJ,nharr:lJ,nhArr:uJ,nhpar:cJ,ni:fJ,nis:dJ,nisd:hJ,niv:pJ,NJcy:gJ,njcy:mJ,nlarr:yJ,nlArr:bJ,nldr:vJ,nlE:xJ,nle:wJ,nleftarrow:_J,nLeftarrow:EJ,nleftrightarrow:SJ,nLeftrightarrow:AJ,nleq:CJ,nleqq:kJ,nleqslant:TJ,nles:DJ,nless:LJ,nLl:RJ,nlsim:FJ,nLt:MJ,nlt:OJ,nltri:$J,nltrie:IJ,nLtv:PJ,nmid:NJ,NoBreak:BJ,NonBreakingSpace:zJ,nopf:jJ,Nopf:UJ,Not:qJ,not:HJ,NotCongruent:GJ,NotCupCap:VJ,NotDoubleVerticalBar:WJ,NotElement:YJ,NotEqual:XJ,NotEqualTilde:ZJ,NotExists:KJ,NotGreater:JJ,NotGreaterEqual:QJ,NotGreaterFullEqual:eQ,NotGreaterGreater:tQ,NotGreaterLess:nQ,NotGreaterSlantEqual:rQ,NotGreaterTilde:iQ,NotHumpDownHump:oQ,NotHumpEqual:sQ,notin:aQ,notindot:lQ,notinE:uQ,notinva:cQ,notinvb:fQ,notinvc:dQ,NotLeftTriangleBar:hQ,NotLeftTriangle:pQ,NotLeftTriangleEqual:gQ,NotLess:mQ,NotLessEqual:yQ,NotLessGreater:bQ,NotLessLess:vQ,NotLessSlantEqual:xQ,NotLessTilde:wQ,NotNestedGreaterGreater:_Q,NotNestedLessLess:EQ,notni:SQ,notniva:AQ,notnivb:CQ,notnivc:kQ,NotPrecedes:TQ,NotPrecedesEqual:DQ,NotPrecedesSlantEqual:LQ,NotReverseElement:RQ,NotRightTriangleBar:FQ,NotRightTriangle:MQ,NotRightTriangleEqual:OQ,NotSquareSubset:$Q,NotSquareSubsetEqual:IQ,NotSquareSuperset:PQ,NotSquareSupersetEqual:NQ,NotSubset:BQ,NotSubsetEqual:zQ,NotSucceeds:jQ,NotSucceedsEqual:UQ,NotSucceedsSlantEqual:qQ,NotSucceedsTilde:HQ,NotSuperset:GQ,NotSupersetEqual:VQ,NotTilde:WQ,NotTildeEqual:YQ,NotTildeFullEqual:XQ,NotTildeTilde:ZQ,NotVerticalBar:KQ,nparallel:JQ,npar:QQ,nparsl:eee,npart:tee,npolint:nee,npr:ree,nprcue:iee,nprec:oee,npreceq:see,npre:aee,nrarrc:lee,nrarr:uee,nrArr:cee,nrarrw:fee,nrightarrow:dee,nRightarrow:hee,nrtri:pee,nrtrie:gee,nsc:mee,nsccue:yee,nsce:bee,Nscr:vee,nscr:xee,nshortmid:wee,nshortparallel:_ee,nsim:Eee,nsime:See,nsimeq:Aee,nsmid:Cee,nspar:kee,nsqsube:Tee,nsqsupe:Dee,nsub:Lee,nsubE:Ree,nsube:Fee,nsubset:Mee,nsubseteq:Oee,nsubseteqq:$ee,nsucc:Iee,nsucceq:Pee,nsup:Nee,nsupE:Bee,nsupe:zee,nsupset:jee,nsupseteq:Uee,nsupseteqq:qee,ntgl:Hee,Ntilde:Gee,ntilde:Vee,ntlg:Wee,ntriangleleft:Yee,ntrianglelefteq:Xee,ntriangleright:Zee,ntrianglerighteq:Kee,Nu:Jee,nu:Qee,num:ete,numero:tte,numsp:nte,nvap:rte,nvdash:ite,nvDash:ote,nVdash:ste,nVDash:ate,nvge:lte,nvgt:ute,nvHarr:cte,nvinfin:fte,nvlArr:dte,nvle:hte,nvlt:pte,nvltrie:gte,nvrArr:mte,nvrtrie:yte,nvsim:bte,nwarhk:vte,nwarr:xte,nwArr:wte,nwarrow:_te,nwnear:Ete,Oacute:Ste,oacute:Ate,oast:Cte,Ocirc:kte,ocirc:Tte,ocir:Dte,Ocy:Lte,ocy:Rte,odash:Fte,Odblac:Mte,odblac:Ote,odiv:$te,odot:Ite,odsold:Pte,OElig:Nte,oelig:Bte,ofcir:zte,Ofr:jte,ofr:Ute,ogon:qte,Ograve:Hte,ograve:Gte,ogt:Vte,ohbar:Wte,ohm:Yte,oint:Xte,olarr:Zte,olcir:Kte,olcross:Jte,oline:Qte,olt:ene,Omacr:tne,omacr:nne,Omega:rne,omega:ine,Omicron:one,omicron:sne,omid:ane,ominus:lne,Oopf:une,oopf:cne,opar:fne,OpenCurlyDoubleQuote:dne,OpenCurlyQuote:hne,operp:pne,oplus:gne,orarr:mne,Or:yne,or:bne,ord:vne,order:xne,orderof:wne,ordf:_ne,ordm:Ene,origof:Sne,oror:Ane,orslope:Cne,orv:kne,oS:Tne,Oscr:Dne,oscr:Lne,Oslash:Rne,oslash:Fne,osol:Mne,Otilde:One,otilde:$ne,otimesas:Ine,Otimes:Pne,otimes:Nne,Ouml:Bne,ouml:zne,ovbar:jne,OverBar:Une,OverBrace:qne,OverBracket:Hne,OverParenthesis:Gne,para:Vne,parallel:Wne,par:Yne,parsim:Xne,parsl:Zne,part:Kne,PartialD:Jne,Pcy:Qne,pcy:ere,percnt:tre,period:nre,permil:rre,perp:ire,pertenk:ore,Pfr:sre,pfr:are,Phi:lre,phi:ure,phiv:cre,phmmat:fre,phone:dre,Pi:hre,pi:pre,pitchfork:gre,piv:mre,planck:yre,planckh:bre,plankv:vre,plusacir:xre,plusb:wre,pluscir:_re,plus:Ere,plusdo:Sre,plusdu:Are,pluse:Cre,PlusMinus:kre,plusmn:Tre,plussim:Dre,plustwo:Lre,pm:Rre,Poincareplane:Fre,pointint:Mre,popf:Ore,Popf:$re,pound:Ire,prap:Pre,Pr:Nre,pr:Bre,prcue:zre,precapprox:jre,prec:Ure,preccurlyeq:qre,Precedes:Hre,PrecedesEqual:Gre,PrecedesSlantEqual:Vre,PrecedesTilde:Wre,preceq:Yre,precnapprox:Xre,precneqq:Zre,precnsim:Kre,pre:Jre,prE:Qre,precsim:eie,prime:tie,Prime:nie,primes:rie,prnap:iie,prnE:oie,prnsim:sie,prod:aie,Product:lie,profalar:uie,profline:cie,profsurf:fie,prop:die,Proportional:hie,Proportion:pie,propto:gie,prsim:mie,prurel:yie,Pscr:bie,pscr:vie,Psi:xie,psi:wie,puncsp:_ie,Qfr:Eie,qfr:Sie,qint:Aie,qopf:Cie,Qopf:kie,qprime:Tie,Qscr:Die,qscr:Lie,quaternions:Rie,quatint:Fie,quest:Mie,questeq:Oie,quot:$ie,QUOT:Iie,rAarr:Pie,race:Nie,Racute:Bie,racute:zie,radic:jie,raemptyv:Uie,rang:qie,Rang:Hie,rangd:Gie,range:Vie,rangle:Wie,raquo:Yie,rarrap:Xie,rarrb:Zie,rarrbfs:Kie,rarrc:Jie,rarr:Qie,Rarr:eoe,rArr:toe,rarrfs:noe,rarrhk:roe,rarrlp:ioe,rarrpl:ooe,rarrsim:soe,Rarrtl:aoe,rarrtl:loe,rarrw:uoe,ratail:coe,rAtail:foe,ratio:doe,rationals:hoe,rbarr:poe,rBarr:goe,RBarr:moe,rbbrk:yoe,rbrace:boe,rbrack:voe,rbrke:xoe,rbrksld:woe,rbrkslu:_oe,Rcaron:Eoe,rcaron:Soe,Rcedil:Aoe,rcedil:Coe,rceil:koe,rcub:Toe,Rcy:Doe,rcy:Loe,rdca:Roe,rdldhar:Foe,rdquo:Moe,rdquor:Ooe,rdsh:$oe,real:Ioe,realine:Poe,realpart:Noe,reals:Boe,Re:zoe,rect:joe,reg:Uoe,REG:qoe,ReverseElement:Hoe,ReverseEquilibrium:Goe,ReverseUpEquilibrium:Voe,rfisht:Woe,rfloor:Yoe,rfr:Xoe,Rfr:Zoe,rHar:Koe,rhard:Joe,rharu:Qoe,rharul:ese,Rho:tse,rho:nse,rhov:rse,RightAngleBracket:ise,RightArrowBar:ose,rightarrow:sse,RightArrow:ase,Rightarrow:lse,RightArrowLeftArrow:use,rightarrowtail:cse,RightCeiling:fse,RightDoubleBracket:dse,RightDownTeeVector:hse,RightDownVectorBar:pse,RightDownVector:gse,RightFloor:mse,rightharpoondown:yse,rightharpoonup:bse,rightleftarrows:vse,rightleftharpoons:xse,rightrightarrows:wse,rightsquigarrow:_se,RightTeeArrow:Ese,RightTee:Sse,RightTeeVector:Ase,rightthreetimes:Cse,RightTriangleBar:kse,RightTriangle:Tse,RightTriangleEqual:Dse,RightUpDownVector:Lse,RightUpTeeVector:Rse,RightUpVectorBar:Fse,RightUpVector:Mse,RightVectorBar:Ose,RightVector:$se,ring:Ise,risingdotseq:Pse,rlarr:Nse,rlhar:Bse,rlm:zse,rmoustache:jse,rmoust:Use,rnmid:qse,roang:Hse,roarr:Gse,robrk:Vse,ropar:Wse,ropf:Yse,Ropf:Xse,roplus:Zse,rotimes:Kse,RoundImplies:Jse,rpar:Qse,rpargt:eae,rppolint:tae,rrarr:nae,Rrightarrow:rae,rsaquo:iae,rscr:oae,Rscr:sae,rsh:aae,Rsh:lae,rsqb:uae,rsquo:cae,rsquor:fae,rthree:dae,rtimes:hae,rtri:pae,rtrie:gae,rtrif:mae,rtriltri:yae,RuleDelayed:bae,ruluhar:vae,rx:xae,Sacute:wae,sacute:_ae,sbquo:Eae,scap:Sae,Scaron:Aae,scaron:Cae,Sc:kae,sc:Tae,sccue:Dae,sce:Lae,scE:Rae,Scedil:Fae,scedil:Mae,Scirc:Oae,scirc:$ae,scnap:Iae,scnE:Pae,scnsim:Nae,scpolint:Bae,scsim:zae,Scy:jae,scy:Uae,sdotb:qae,sdot:Hae,sdote:Gae,searhk:Vae,searr:Wae,seArr:Yae,searrow:Xae,sect:Zae,semi:Kae,seswar:Jae,setminus:Qae,setmn:ele,sext:tle,Sfr:nle,sfr:rle,sfrown:ile,sharp:ole,SHCHcy:sle,shchcy:ale,SHcy:lle,shcy:ule,ShortDownArrow:cle,ShortLeftArrow:fle,shortmid:dle,shortparallel:hle,ShortRightArrow:ple,ShortUpArrow:gle,shy:mle,Sigma:yle,sigma:ble,sigmaf:vle,sigmav:xle,sim:wle,simdot:_le,sime:Ele,simeq:Sle,simg:Ale,simgE:Cle,siml:kle,simlE:Tle,simne:Dle,simplus:Lle,simrarr:Rle,slarr:Fle,SmallCircle:Mle,smallsetminus:Ole,smashp:$le,smeparsl:Ile,smid:Ple,smile:Nle,smt:Ble,smte:zle,smtes:jle,SOFTcy:Ule,softcy:qle,solbar:Hle,solb:Gle,sol:Vle,Sopf:Wle,sopf:Yle,spades:Xle,spadesuit:Zle,spar:Kle,sqcap:Jle,sqcaps:Qle,sqcup:eue,sqcups:tue,Sqrt:nue,sqsub:rue,sqsube:iue,sqsubset:oue,sqsubseteq:sue,sqsup:aue,sqsupe:lue,sqsupset:uue,sqsupseteq:cue,square:fue,Square:due,SquareIntersection:hue,SquareSubset:pue,SquareSubsetEqual:gue,SquareSuperset:mue,SquareSupersetEqual:yue,SquareUnion:bue,squarf:vue,squ:xue,squf:wue,srarr:_ue,Sscr:Eue,sscr:Sue,ssetmn:Aue,ssmile:Cue,sstarf:kue,Star:Tue,star:Due,starf:Lue,straightepsilon:Rue,straightphi:Fue,strns:Mue,sub:Oue,Sub:$ue,subdot:Iue,subE:Pue,sube:Nue,subedot:Bue,submult:zue,subnE:jue,subne:Uue,subplus:que,subrarr:Hue,subset:Gue,Subset:Vue,subseteq:Wue,subseteqq:Yue,SubsetEqual:Xue,subsetneq:Zue,subsetneqq:Kue,subsim:Jue,subsub:Que,subsup:ece,succapprox:tce,succ:nce,succcurlyeq:rce,Succeeds:ice,SucceedsEqual:oce,SucceedsSlantEqual:sce,SucceedsTilde:ace,succeq:lce,succnapprox:uce,succneqq:cce,succnsim:fce,succsim:dce,SuchThat:hce,sum:pce,Sum:gce,sung:mce,sup1:yce,sup2:bce,sup3:vce,sup:xce,Sup:wce,supdot:_ce,supdsub:Ece,supE:Sce,supe:Ace,supedot:Cce,Superset:kce,SupersetEqual:Tce,suphsol:Dce,suphsub:Lce,suplarr:Rce,supmult:Fce,supnE:Mce,supne:Oce,supplus:$ce,supset:Ice,Supset:Pce,supseteq:Nce,supseteqq:Bce,supsetneq:zce,supsetneqq:jce,supsim:Uce,supsub:qce,supsup:Hce,swarhk:Gce,swarr:Vce,swArr:Wce,swarrow:Yce,swnwar:Xce,szlig:Zce,Tab:Kce,target:Jce,Tau:Qce,tau:efe,tbrk:tfe,Tcaron:nfe,tcaron:rfe,Tcedil:ife,tcedil:ofe,Tcy:sfe,tcy:afe,tdot:lfe,telrec:ufe,Tfr:cfe,tfr:ffe,there4:dfe,therefore:hfe,Therefore:pfe,Theta:gfe,theta:mfe,thetasym:yfe,thetav:bfe,thickapprox:vfe,thicksim:xfe,ThickSpace:wfe,ThinSpace:_fe,thinsp:Efe,thkap:Sfe,thksim:Afe,THORN:Cfe,thorn:kfe,tilde:Tfe,Tilde:Dfe,TildeEqual:Lfe,TildeFullEqual:Rfe,TildeTilde:Ffe,timesbar:Mfe,timesb:Ofe,times:$fe,timesd:Ife,tint:Pfe,toea:Nfe,topbot:Bfe,topcir:zfe,top:jfe,Topf:Ufe,topf:qfe,topfork:Hfe,tosa:Gfe,tprime:Vfe,trade:Wfe,TRADE:Yfe,triangle:Xfe,triangledown:Zfe,triangleleft:Kfe,trianglelefteq:Jfe,triangleq:Qfe,triangleright:ede,trianglerighteq:tde,tridot:nde,trie:rde,triminus:ide,TripleDot:ode,triplus:sde,trisb:ade,tritime:lde,trpezium:ude,Tscr:cde,tscr:fde,TScy:dde,tscy:hde,TSHcy:pde,tshcy:gde,Tstrok:mde,tstrok:yde,twixt:bde,twoheadleftarrow:vde,twoheadrightarrow:xde,Uacute:wde,uacute:_de,uarr:Ede,Uarr:Sde,uArr:Ade,Uarrocir:Cde,Ubrcy:kde,ubrcy:Tde,Ubreve:Dde,ubreve:Lde,Ucirc:Rde,ucirc:Fde,Ucy:Mde,ucy:Ode,udarr:$de,Udblac:Ide,udblac:Pde,udhar:Nde,ufisht:Bde,Ufr:zde,ufr:jde,Ugrave:Ude,ugrave:qde,uHar:Hde,uharl:Gde,uharr:Vde,uhblk:Wde,ulcorn:Yde,ulcorner:Xde,ulcrop:Zde,ultri:Kde,Umacr:Jde,umacr:Qde,uml:ehe,UnderBar:the,UnderBrace:nhe,UnderBracket:rhe,UnderParenthesis:ihe,Union:ohe,UnionPlus:she,Uogon:ahe,uogon:lhe,Uopf:uhe,uopf:che,UpArrowBar:fhe,uparrow:dhe,UpArrow:hhe,Uparrow:phe,UpArrowDownArrow:ghe,updownarrow:mhe,UpDownArrow:yhe,Updownarrow:bhe,UpEquilibrium:vhe,upharpoonleft:xhe,upharpoonright:whe,uplus:_he,UpperLeftArrow:Ehe,UpperRightArrow:She,upsi:Ahe,Upsi:Che,upsih:khe,Upsilon:The,upsilon:Dhe,UpTeeArrow:Lhe,UpTee:Rhe,upuparrows:Fhe,urcorn:Mhe,urcorner:Ohe,urcrop:$he,Uring:Ihe,uring:Phe,urtri:Nhe,Uscr:Bhe,uscr:zhe,utdot:jhe,Utilde:Uhe,utilde:qhe,utri:Hhe,utrif:Ghe,uuarr:Vhe,Uuml:Whe,uuml:Yhe,uwangle:Xhe,vangrt:Zhe,varepsilon:Khe,varkappa:Jhe,varnothing:Qhe,varphi:epe,varpi:tpe,varpropto:npe,varr:rpe,vArr:ipe,varrho:ope,varsigma:spe,varsubsetneq:ape,varsubsetneqq:lpe,varsupsetneq:upe,varsupsetneqq:cpe,vartheta:fpe,vartriangleleft:dpe,vartriangleright:hpe,vBar:ppe,Vbar:gpe,vBarv:mpe,Vcy:ype,vcy:bpe,vdash:vpe,vDash:xpe,Vdash:wpe,VDash:_pe,Vdashl:Epe,veebar:Spe,vee:Ape,Vee:Cpe,veeeq:kpe,vellip:Tpe,verbar:Dpe,Verbar:Lpe,vert:Rpe,Vert:Fpe,VerticalBar:Mpe,VerticalLine:Ope,VerticalSeparator:$pe,VerticalTilde:Ipe,VeryThinSpace:Ppe,Vfr:Npe,vfr:Bpe,vltri:zpe,vnsub:jpe,vnsup:Upe,Vopf:qpe,vopf:Hpe,vprop:Gpe,vrtri:Vpe,Vscr:Wpe,vscr:Ype,vsubnE:Xpe,vsubne:Zpe,vsupnE:Kpe,vsupne:Jpe,Vvdash:Qpe,vzigzag:ege,Wcirc:tge,wcirc:nge,wedbar:rge,wedge:ige,Wedge:oge,wedgeq:sge,weierp:age,Wfr:lge,wfr:uge,Wopf:cge,wopf:fge,wp:dge,wr:hge,wreath:pge,Wscr:gge,wscr:mge,xcap:yge,xcirc:bge,xcup:vge,xdtri:xge,Xfr:wge,xfr:_ge,xharr:Ege,xhArr:Sge,Xi:Age,xi:Cge,xlarr:kge,xlArr:Tge,xmap:Dge,xnis:Lge,xodot:Rge,Xopf:Fge,xopf:Mge,xoplus:Oge,xotime:$ge,xrarr:Ige,xrArr:Pge,Xscr:Nge,xscr:Bge,xsqcup:zge,xuplus:jge,xutri:Uge,xvee:qge,xwedge:Hge,Yacute:Gge,yacute:Vge,YAcy:Wge,yacy:Yge,Ycirc:Xge,ycirc:Zge,Ycy:Kge,ycy:Jge,yen:Qge,Yfr:eme,yfr:tme,YIcy:nme,yicy:rme,Yopf:ime,yopf:ome,Yscr:sme,yscr:ame,YUcy:lme,yucy:ume,yuml:cme,Yuml:fme,Zacute:dme,zacute:hme,Zcaron:pme,zcaron:gme,Zcy:mme,zcy:yme,Zdot:bme,zdot:vme,zeetrf:xme,ZeroWidthSpace:wme,Zeta:_me,zeta:Eme,zfr:Sme,Zfr:Ame,ZHcy:Cme,zhcy:kme,zigrarr:Tme,zopf:Dme,Zopf:Lme,Zscr:Rme,zscr:Fme,zwj:Mme,zwnj:Ome,default:QNe}),$me="",Ime="",Pme="",Nme="",Bme="",zme="",jme="",Ume="",qme="",Hme="&",Gme="&",Vme="",Wme="",Yme="",Xme="",Zme="",Kme="",Jme="",Qme="",e0e="",t0e="",n0e="",r0e="",i0e="",o0e="",s0e="",a0e="",l0e="",u0e="",c0e="",f0e="",d0e="",h0e="",p0e="",g0e="",m0e="",y0e="",b0e="",v0e="",x0e="",w0e=">",_0e=">",E0e="",S0e="",A0e="",C0e="",k0e="",T0e="",D0e="",L0e="",R0e="",F0e="",M0e="",O0e="<",$0e="<",I0e="",P0e="",N0e="",B0e="",z0e="",j0e="",U0e="",q0e="",H0e="",G0e="",V0e="",W0e="",Y0e="",X0e="",Z0e="",K0e="",J0e="",Q0e="",eye="",tye="",nye="",rye="",iye="",oye="",sye='"',aye='"',lye="",uye="",cye="",fye="",dye="",hye="",pye="",gye="",mye="",yye="",bye="",vye="",xye="",wye="",_ye="",Eye="",Sye="",Aye="",Cye="",kye="",Tye="",Dye="",Lye="",Rye="",Fye="",t9e={Aacute:$me,aacute:Ime,Acirc:Pme,acirc:Nme,acute:Bme,AElig:zme,aelig:jme,Agrave:Ume,agrave:qme,amp:Hme,AMP:Gme,Aring:Vme,aring:Wme,Atilde:Yme,atilde:Xme,Auml:Zme,auml:Kme,brvbar:Jme,Ccedil:Qme,ccedil:e0e,cedil:t0e,cent:n0e,copy:r0e,COPY:i0e,curren:o0e,deg:s0e,divide:a0e,Eacute:l0e,eacute:u0e,Ecirc:c0e,ecirc:f0e,Egrave:d0e,egrave:h0e,ETH:p0e,eth:g0e,Euml:m0e,euml:y0e,frac12:b0e,frac14:v0e,frac34:x0e,gt:w0e,GT:_0e,Iacute:E0e,iacute:S0e,Icirc:A0e,icirc:C0e,iexcl:k0e,Igrave:T0e,igrave:D0e,iquest:L0e,Iuml:R0e,iuml:F0e,laquo:M0e,lt:O0e,LT:$0e,macr:I0e,micro:P0e,middot:N0e,nbsp:B0e,not:z0e,Ntilde:j0e,ntilde:U0e,Oacute:q0e,oacute:H0e,Ocirc:G0e,ocirc:V0e,Ograve:W0e,ograve:Y0e,ordf:X0e,ordm:Z0e,Oslash:K0e,oslash:J0e,Otilde:Q0e,otilde:eye,Ouml:tye,ouml:nye,para:rye,plusmn:iye,pound:oye,quot:sye,QUOT:aye,raquo:lye,reg:uye,REG:cye,sect:fye,shy:dye,sup1:hye,sup2:pye,sup3:gye,szlig:mye,THORN:yye,thorn:bye,times:vye,Uacute:xye,uacute:wye,Ucirc:_ye,ucirc:Eye,Ugrave:Sye,ugrave:Aye,uml:Cye,Uuml:kye,uuml:Tye,Yacute:Dye,yacute:Lye,yen:Rye,yuml:Fye},n9e=Object.freeze({__proto__:null,Aacute:$me,aacute:Ime,Acirc:Pme,acirc:Nme,acute:Bme,AElig:zme,aelig:jme,Agrave:Ume,agrave:qme,amp:Hme,AMP:Gme,Aring:Vme,aring:Wme,Atilde:Yme,atilde:Xme,Auml:Zme,auml:Kme,brvbar:Jme,Ccedil:Qme,ccedil:e0e,cedil:t0e,cent:n0e,copy:r0e,COPY:i0e,curren:o0e,deg:s0e,divide:a0e,Eacute:l0e,eacute:u0e,Ecirc:c0e,ecirc:f0e,Egrave:d0e,egrave:h0e,ETH:p0e,eth:g0e,Euml:m0e,euml:y0e,frac12:b0e,frac14:v0e,frac34:x0e,gt:w0e,GT:_0e,Iacute:E0e,iacute:S0e,Icirc:A0e,icirc:C0e,iexcl:k0e,Igrave:T0e,igrave:D0e,iquest:L0e,Iuml:R0e,iuml:F0e,laquo:M0e,lt:O0e,LT:$0e,macr:I0e,micro:P0e,middot:N0e,nbsp:B0e,not:z0e,Ntilde:j0e,ntilde:U0e,Oacute:q0e,oacute:H0e,Ocirc:G0e,ocirc:V0e,Ograve:W0e,ograve:Y0e,ordf:X0e,ordm:Z0e,Oslash:K0e,oslash:J0e,Otilde:Q0e,otilde:eye,Ouml:tye,ouml:nye,para:rye,plusmn:iye,pound:oye,quot:sye,QUOT:aye,raquo:lye,reg:uye,REG:cye,sect:fye,shy:dye,sup1:hye,sup2:pye,sup3:gye,szlig:mye,THORN:yye,thorn:bye,times:vye,Uacute:xye,uacute:wye,Ucirc:_ye,ucirc:Eye,Ugrave:Sye,ugrave:Aye,uml:Cye,Uuml:kye,uuml:Tye,Yacute:Dye,yacute:Lye,yen:Rye,yuml:Fye,default:t9e}),Mye="&",Oye="'",$ye=">",Iye="<",Pye='"',r9e={amp:Mye,apos:Oye,gt:$ye,lt:Iye,quot:Pye},i9e=Object.freeze({__proto__:null,amp:Mye,apos:Oye,gt:$ye,lt:Iye,quot:Pye,default:r9e}),o9e={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},s9e=Object.freeze({__proto__:null,default:o9e}),a9e=b(s9e),Nye=m(function(G,ue){var Ae=h&&h.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(a9e);function ft(lt){if(lt>=55296&&lt<=57343||lt>1114111)return"";lt in Fe.default&&(lt=Fe.default[lt]);var vn="";return lt>65535&&(lt-=65536,vn+=String.fromCharCode(lt>>>10&1023|55296),lt=56320|lt&1023),vn+=String.fromCharCode(lt),vn}ue.default=ft});p(Nye);var Bye=b(e9e),l9e=b(n9e),zye=b(i9e),wd=m(function(G,ue){var Ae=h&&h.__importDefault||function(vr){return vr&&vr.__esModule?vr:{default:vr}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(Bye),ft=Ae(l9e),lt=Ae(zye),vn=Ae(Nye);ue.decodeXML=Bt(lt.default),ue.decodeHTMLStrict=Bt(Fe.default);function Bt(vr){var xr=Object.keys(vr).join("|"),ei=Gr(vr);xr+="|#[xX][\\da-fA-F]+|#\\d+";var ti=new RegExp("&(?:"+xr+");","g");return function(fs){return String(fs).replace(ti,ei)}}var Mn=function(vr,xr){return vr<xr?1:-1};ue.decodeHTML=function(){for(var vr=Object.keys(ft.default).sort(Mn),xr=Object.keys(Fe.default).sort(Mn),ei=0,ti=0;ei<xr.length;ei++)vr[ti]===xr[ei]?(xr[ei]+=";?",ti++):xr[ei]+=";";var fs=new RegExp("&(?:"+xr.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Zg=Gr(Fe.default);function qR(Kg){return Kg.substr(-1)!==";"&&(Kg+=";"),Zg(Kg)}return function(Kg){return String(Kg).replace(fs,qR)}}();function Gr(vr){return function(ei){return ei.charAt(1)==="#"?ei.charAt(2)==="X"||ei.charAt(2)==="x"?vn.default(parseInt(ei.substr(3),16)):vn.default(parseInt(ei.substr(2),10)):vr[ei.slice(1,-1)]}}});p(wd),wd.decodeXML,wd.decodeHTMLStrict,wd.decodeHTML;var Vg=m(function(G,ue){var Ae=h&&h.__importDefault||function(Ss){return Ss&&Ss.__esModule?Ss:{default:Ss}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(zye),ft=Gr(Fe.default),lt=vr(ft);ue.encodeXML=Zg(ft,lt);var vn=Ae(Bye),Bt=Gr(vn.default),Mn=vr(Bt);ue.encodeHTML=Zg(Bt,Mn);function Gr(Ss){return Object.keys(Ss).sort().reduce(function(Xh,ef){return Xh[Ss[ef]]="&"+ef+";",Xh},{})}function vr(Ss){var Xh=[],ef=[];return Object.keys(Ss).forEach(function(Jg){return Jg.length===1?Xh.push("\\"+Jg):ef.push(Jg)}),ef.unshift("["+Xh.join("")+"]"),new RegExp(ef.join("|"),"g")}var xr=/[^\0-\x7F]/g,ei=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function ti(Ss){return"&#x"+Ss.charCodeAt(0).toString(16).toUpperCase()+";"}function fs(Ss,Xh){var ef=Ss.charCodeAt(0),Jg=Ss.charCodeAt(1),OBe=(ef-55296)*1024+Jg-56320+65536;return"&#x"+OBe.toString(16).toUpperCase()+";"}function Zg(Ss,Xh){return function(ef){return ef.replace(Xh,function(Jg){return Ss[Jg]}).replace(ei,fs).replace(xr,ti)}}var qR=vr(ft);function Kg(Ss){return Ss.replace(qR,ti).replace(ei,fs).replace(xr,ti)}ue.escape=Kg});p(Vg),Vg.encodeXML,Vg.encodeHTML,Vg.escape;var Hs=m(function(G,ue){Object.defineProperty(ue,"__esModule",{value:!0});function Ae(Bt,Mn){return(!Mn||Mn<=0?wd.decodeXML:wd.decodeHTML)(Bt)}ue.decode=Ae;function Fe(Bt,Mn){return(!Mn||Mn<=0?wd.decodeXML:wd.decodeHTMLStrict)(Bt)}ue.decodeStrict=Fe;function ft(Bt,Mn){return(!Mn||Mn<=0?Vg.encodeXML:Vg.encodeHTML)(Bt)}ue.encode=ft;var lt=Vg;ue.encodeXML=lt.encodeXML,ue.encodeHTML=lt.encodeHTML,ue.escape=lt.escape,ue.encodeHTML4=lt.encodeHTML,ue.encodeHTML5=lt.encodeHTML;var vn=wd;ue.decodeXML=vn.decodeXML,ue.decodeHTML=vn.decodeHTML,ue.decodeHTMLStrict=vn.decodeHTMLStrict,ue.decodeHTML4=vn.decodeHTML,ue.decodeHTML5=vn.decodeHTML,ue.decodeHTML4Strict=vn.decodeHTMLStrict,ue.decodeHTML5Strict=vn.decodeHTMLStrict,ue.decodeXMLStrict=vn.decodeXML});p(Hs),Hs.decode,Hs.decodeStrict,Hs.encode,Hs.encodeXML,Hs.encodeHTML,Hs.escape,Hs.encodeHTML4,Hs.encodeHTML5,Hs.decodeXML;var jye=Hs.decodeHTML;Hs.decodeHTMLStrict,Hs.decodeHTML4,Hs.decodeHTML5,Hs.decodeHTML4Strict,Hs.decodeHTML5Strict,Hs.decodeXMLStrict;var u9e=92,Uye="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",qye="[A-Za-z][A-Za-z0-9-]*",c9e="[a-zA-Z_:][a-zA-Z0-9:._-]*",f9e="[^\"'=<>`\\x00-\\x20]+",d9e="'[^']*'",h9e='"[^"]*"',p9e="(?:"+f9e+"|"+d9e+"|"+h9e+")",g9e="(?:\\s*=\\s*"+p9e+")",m9e="(?:\\s+"+c9e+g9e+"?)",Hye="<"+qye+m9e+"*\\s*/?>",Gye="</"+qye+"\\s*[>]",y9e="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",b9e="[<][?][\\s\\S]*?[?][>]",v9e="<![A-Z]+\\s+[^>]*>",x9e="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",w9e="(?:"+Hye+"|"+Gye+"|"+y9e+"|"+b9e+"|"+v9e+"|"+x9e+")",_9e=new RegExp("^"+w9e),E9e=/[\\&]/,Vye="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",S9e=new RegExp("\\\\"+Vye+"|"+Uye,"gi"),A9e='[&<>"]',Wye=new RegExp(A9e,"g"),C9e=function(G){return G.charCodeAt(0)===u9e?G.charAt(1):jye(G)},Yye=function(G){return E9e.test(G)?G.replace(S9e,C9e):G},k9e=function(G){try{return d(G)}catch{return G}},T9e=function(G){switch(G){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return G}},Xye=function(G){return Wye.test(G)?G.replace(Wye,T9e):G};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var PR;function NR(G){return PR(G)}if(String.fromCodePoint)PR=function(G){try{return String.fromCodePoint(G)}catch(ue){if(ue instanceof RangeError)return"";throw ue}};else{var D9e=String.fromCharCode,L9e=Math.floor;PR=function(){var G=16384,ue=[],Ae,Fe,ft=-1,lt=arguments.length;if(!lt)return"";for(var vn="";++ft<lt;){var Bt=Number(arguments[ft]);if(!isFinite(Bt)||Bt<0||Bt>1114111||L9e(Bt)!==Bt)return"";Bt<=65535?ue.push(Bt):(Bt-=65536,Ae=(Bt>>10)+55296,Fe=Bt%1024+56320,ue.push(Ae,Fe)),(ft+1===lt||ue.length>G)&&(vn+=D9e.apply(null,ue),ue.length=0)}return vn}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var G=function(){try{var Ae={},Fe=Object.defineProperty,ft=Fe(Ae,Ae,Ae)&&Fe}catch{}return ft}(),ue=function(Ae){if(this==null)throw TypeError();var Fe=String(this),ft=Ae?Number(Ae):0;if(ft!=ft&&(ft=0),ft<0||ft==1/0)throw RangeError();for(var lt="";ft;)ft%2==1&&(lt+=Fe),ft>1&&(Fe+=Fe),ft>>=1;return lt};G?G(String.prototype,"repeat",{value:ue,configurable:!0,writable:!0}):String.prototype.repeat=ue}();var qS=k9e,BR=Yye,Zye=10,zR=42,HS=95,R9e=96,Kye=91,F9e=93,Jye=60,M9e=33,Qye=92,O9e=38,ebe=40,jR=41,$9e=58,Wg=39,Yg=34,tbe=Vye,UR="\\\\"+tbe,I9e=Uye,P9e=_9e,nbe=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),N9e=new RegExp('^(?:"('+UR+`|[^"\\x00])*"|'(`+UR+"|[^'\\x00])*'|\\(("+UR+"|[^()\\x00])*\\))"),B9e=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,rbe=new RegExp("^"+tbe),z9e=new RegExp("^"+I9e,"i"),j9e=/`+/,U9e=/^`+/,q9e=/\.\.\./g,H9e=/--+/g,G9e=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,V9e=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,W9e=/^ *(?:\n *)?/,ibe=/^[ \t\n\x0b\x0c\x0d]/,obe=/^\s/,Y9e=/ *$/,X9e=/^ */,sbe=/^ *(?:\n|$)/,Z9e=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,K9e=/^[^\n`\[\]\\!<&*_'"]+/m,pa=function(G){var ue=new a("text");return ue._literal=G,ue},abe=function(G){return G.slice(1,G.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},J9e=function(G){var ue=G.exec(this.subject.slice(this.pos));return ue===null?null:(this.pos+=ue.index+ue[0].length,ue[0])},Q9e=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},e7e=function(){return this.match(W9e),!0},t7e=function(G){var ue=this.match(U9e);if(ue===null)return!1;for(var Ae=this.pos,Fe,ft,lt;(Fe=this.match(j9e))!==null;)if(Fe===ue)return ft=new a("code"),lt=this.subject.slice(Ae,this.pos-ue.length).replace(/\n/gm," "),lt.length>0&&lt.match(/[^ ]/)!==null&&lt[0]==" "&&lt[lt.length-1]==" "?ft._literal=lt.slice(1,lt.length-1):ft._literal=lt,G.appendChild(ft),!0;return this.pos=Ae,G.appendChild(pa(ue)),!0},n7e=function(G){var ue=this.subject,Ae;return this.pos+=1,this.peek()===Zye?(this.pos+=1,Ae=new a("linebreak"),G.appendChild(Ae)):rbe.test(ue.charAt(this.pos))?(G.appendChild(pa(ue.charAt(this.pos))),this.pos+=1):G.appendChild(pa("\\")),!0},r7e=function(G){var ue,Ae,Fe;return(ue=this.match(G9e))?(Ae=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=qS("mailto:"+Ae),Fe._title="",Fe.appendChild(pa(Ae)),G.appendChild(Fe),!0):(ue=this.match(V9e))?(Ae=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=qS(Ae),Fe._title="",Fe.appendChild(pa(Ae)),G.appendChild(Fe),!0):!1},i7e=function(G){var ue=this.match(P9e);if(ue===null)return!1;var Ae=new a("html_inline");return Ae._literal=ue,G.appendChild(Ae),!0},o7e=function(G){var ue=0,Ae,Fe,ft,lt=this.pos,vn,Bt,Mn,Gr,vr,xr,ei,ti;if(G===Wg||G===Yg)ue++,this.pos++;else for(;this.peek()===G;)ue++,this.pos++;return ue===0?null:(Ae=lt===0?`
`:this.subject.charAt(lt-1),ft=this.peek(),ft===-1?Fe=`
`:Fe=NR(ft),vr=obe.test(Fe),xr=nbe.test(Fe),ei=obe.test(Ae),ti=nbe.test(Ae),vn=!vr&&(!xr||ei||ti),Bt=!ei&&(!ti||vr||xr),G===HS?(Mn=vn&&(!Bt||ti),Gr=Bt&&(!vn||xr)):G===Wg||G===Yg?(Mn=vn&&!Bt,Gr=Bt):(Mn=vn,Gr=Bt),this.pos=lt,{numdelims:ue,can_open:Mn,can_close:Gr})},s7e=function(G,ue){var Ae=this.scanDelims(G);if(!Ae)return!1;var Fe=Ae.numdelims,ft=this.pos,lt;this.pos+=Fe,G===Wg?lt="":G===Yg?lt="":lt=this.subject.slice(ft,this.pos);var vn=pa(lt);return ue.appendChild(vn),(Ae.can_open||Ae.can_close)&&(this.options.smart||G!==Wg&&G!==Yg)&&(this.delimiters={cc:G,numdelims:Fe,origdelims:Fe,node:vn,previous:this.delimiters,next:null,can_open:Ae.can_open,can_close:Ae.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},a7e=function(G){G.previous!==null&&(G.previous.next=G.next),G.next===null?this.delimiters=G.previous:G.next.previous=G.previous},l7e=function(G,ue){G.next!==ue&&(G.next=ue,ue.previous=G)},u7e=function(G){for(var ue,Ae,Fe,ft,lt,vn,Bt,Mn,Gr,vr,xr=[[],[],[]],ei=!1,ti=0;ti<3;ti++)xr[ti][HS]=G,xr[ti][zR]=G,xr[ti][Wg]=G,xr[ti][Yg]=G;for(Ae=this.delimiters;Ae!==null&&Ae.previous!==G;)Ae=Ae.previous;for(;Ae!==null;){var fs=Ae.cc;if(!Ae.can_close)Ae=Ae.next;else{for(ue=Ae.previous,vr=!1;ue!==null&&ue!==G&&ue!==xr[Ae.origdelims%3][fs];){if(ei=(Ae.can_open||ue.can_close)&&Ae.origdelims%3!==0&&(ue.origdelims+Ae.origdelims)%3===0,ue.cc===Ae.cc&&ue.can_open&&!ei){vr=!0;break}ue=ue.previous}if(Fe=Ae,fs===zR||fs===HS)if(!vr)Ae=Ae.next;else{Bt=Ae.numdelims>=2&&ue.numdelims>=2?2:1,ft=ue.node,lt=Ae.node,ue.numdelims-=Bt,Ae.numdelims-=Bt,ft._literal=ft._literal.slice(0,ft._literal.length-Bt),lt._literal=lt._literal.slice(0,lt._literal.length-Bt);var Zg=new a(Bt===1?"emph":"strong");for(Mn=ft._next;Mn&&Mn!==lt;)Gr=Mn._next,Mn.unlink(),Zg.appendChild(Mn),Mn=Gr;ft.insertAfter(Zg),l7e(ue,Ae),ue.numdelims===0&&(ft.unlink(),this.removeDelimiter(ue)),Ae.numdelims===0&&(lt.unlink(),vn=Ae.next,this.removeDelimiter(Ae),Ae=vn)}else fs===Wg?(Ae.node._literal="",vr&&(ue.node._literal=""),Ae=Ae.next):fs===Yg&&(Ae.node._literal="",vr&&(ue.node.literal=""),Ae=Ae.next);vr||(xr[Fe.origdelims%3][fs]=Fe.previous,Fe.can_open||this.removeDelimiter(Fe))}}for(;this.delimiters!==null&&this.delimiters!==G;)this.removeDelimiter(this.delimiters)},c7e=function(){var G=this.match(N9e);return G===null?null:BR(G.substr(1,G.length-2))},f7e=function(){var G=this.match(B9e);if(G===null){if(this.peek()===Jye)return null;for(var ue=this.pos,Ae=0,Fe;(Fe=this.peek())!==-1;)if(Fe===Qye&&rbe.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(Fe===ebe)this.pos+=1,Ae+=1;else if(Fe===jR){if(Ae<1)break;this.pos+=1,Ae-=1}else{if(ibe.exec(NR(Fe))!==null)break;this.pos+=1}return this.pos===ue&&Fe!==jR||Ae!==0?null:(G=this.subject.substr(ue,this.pos-ue),qS(BR(G)))}else return qS(BR(G.substr(1,G.length-2)))},d7e=function(){var G=this.match(Z9e);return G===null||G.length>1001?0:G.length},h7e=function(G){var ue=this.pos;this.pos+=1;var Ae=pa("[");return G.appendChild(Ae),this.addBracket(Ae,ue,!1),!0},p7e=function(G){var ue=this.pos;if(this.pos+=1,this.peek()===Kye){this.pos+=1;var Ae=pa("![");G.appendChild(Ae),this.addBracket(Ae,ue+1,!0)}else G.appendChild(pa("!"));return!0},g7e=function(G){var ue,Ae,Fe,ft,lt=!1,vn,Bt;if(this.pos+=1,ue=this.pos,Bt=this.brackets,Bt===null)return G.appendChild(pa("]")),!0;if(!Bt.active)return G.appendChild(pa("]")),this.removeBracket(),!0;Ae=Bt.image;var Mn=this.pos;if(this.peek()===ebe&&(this.pos++,this.spnl()&&(Fe=this.parseLinkDestination())!==null&&this.spnl()&&(ibe.test(this.subject.charAt(this.pos-1))&&(ft=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===jR?(this.pos+=1,lt=!0):this.pos=Mn),!lt){var Gr=this.pos,vr=this.parseLinkLabel();if(vr>2?vn=this.subject.slice(Gr,Gr+vr):Bt.bracketAfter||(vn=this.subject.slice(Bt.index,ue)),vr===0&&(this.pos=Mn),vn){var xr=this.refmap[abe(vn)];xr&&(Fe=xr.destination,ft=xr.title,lt=!0)}}if(lt){var ei=new a(Ae?"image":"link");ei._destination=Fe,ei._title=ft||"";var ti,fs;for(ti=Bt.node._next;ti;)fs=ti._next,ti.unlink(),ei.appendChild(ti),ti=fs;if(G.appendChild(ei),this.processEmphasis(Bt.previousDelimiter),this.removeBracket(),Bt.node.unlink(),!Ae)for(Bt=this.brackets;Bt!==null;)Bt.image||(Bt.active=!1),Bt=Bt.previous;return!0}else return this.removeBracket(),this.pos=ue,G.appendChild(pa("]")),!0},m7e=function(G,ue,Ae){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:G,previous:this.brackets,previousDelimiter:this.delimiters,index:ue,image:Ae,active:!0}},y7e=function(){this.brackets=this.brackets.previous},b7e=function(G){var ue;return(ue=this.match(z9e))?(G.appendChild(pa(jye(ue))),!0):!1},v7e=function(G){var ue;return(ue=this.match(K9e))?(this.options.smart?G.appendChild(pa(ue.replace(q9e,"").replace(H9e,function(Ae){var Fe=0,ft=0;return Ae.length%3===0?ft=Ae.length/3:Ae.length%2===0?Fe=Ae.length/2:Ae.length%3===2?(Fe=1,ft=(Ae.length-2)/3):(Fe=2,ft=(Ae.length-4)/3),"".repeat(ft)+"".repeat(Fe)}))):G.appendChild(pa(ue)),!0):!1},x7e=function(G){this.pos+=1;var ue=G._lastChild;if(ue&&ue.type==="text"&&ue._literal[ue._literal.length-1]===" "){var Ae=ue._literal[ue._literal.length-2]===" ";ue._literal=ue._literal.replace(Y9e,""),G.appendChild(new a(Ae?"linebreak":"softbreak"))}else G.appendChild(new a("softbreak"));return this.match(X9e),!0},w7e=function(G,ue){this.subject=G,this.pos=0;var Ae,Fe,ft,lt,vn=this.pos;if(lt=this.parseLinkLabel(),lt===0)return 0;if(Ae=this.subject.substr(0,lt),this.peek()===$9e)this.pos++;else return this.pos=vn,0;if(this.spnl(),Fe=this.parseLinkDestination(),Fe===null)return this.pos=vn,0;var Bt=this.pos;this.spnl(),this.pos!==Bt&&(ft=this.parseLinkTitle()),ft===null&&(ft="",this.pos=Bt);var Mn=!0;if(this.match(sbe)===null&&(ft===""?Mn=!1:(ft="",this.pos=Bt,Mn=this.match(sbe)!==null)),!Mn)return this.pos=vn,0;var Gr=abe(Ae);return Gr===""?(this.pos=vn,0):(ue[Gr]||(ue[Gr]={destination:Fe,title:ft}),this.pos-vn)},_7e=function(G){var ue=!1,Ae=this.peek();if(Ae===-1)return!1;switch(Ae){case Zye:ue=this.parseNewline(G);break;case Qye:ue=this.parseBackslash(G);break;case R9e:ue=this.parseBackticks(G);break;case zR:case HS:ue=this.handleDelim(Ae,G);break;case Wg:case Yg:ue=this.options.smart&&this.handleDelim(Ae,G);break;case Kye:ue=this.parseOpenBracket(G);break;case M9e:ue=this.parseBang(G);break;case F9e:ue=this.parseCloseBracket(G);break;case Jye:ue=this.parseAutolink(G)||this.parseHtmlTag(G);break;case O9e:ue=this.parseEntity(G);break;default:ue=this.parseString(G);break}return ue||(this.pos+=1,G.appendChild(pa(NR(Ae)))),!0},E7e=function(G){for(this.subject=G._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(G););G._string_content=null,this.processEmphasis(null)};function S7e(G){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:J9e,peek:Q9e,spnl:e7e,parseBackticks:t7e,parseBackslash:n7e,parseAutolink:r7e,parseHtmlTag:i7e,scanDelims:o7e,handleDelim:s7e,parseLinkTitle:c7e,parseLinkDestination:f7e,parseLinkLabel:d7e,parseOpenBracket:h7e,parseBang:p7e,parseCloseBracket:g7e,addBracket:m7e,removeBracket:y7e,parseEntity:b7e,parseString:v7e,parseNewline:x7e,parseReference:w7e,parseInline:_7e,processEmphasis:u7e,removeDelimiter:a7e,options:G||{},parse:E7e}}var GS=4,lbe=9,A7e=10,ube=62,C7e=60,cbe=32,fbe=91,k7e=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+Hye+"|"+Gye+")\\s*$","i")],T7e=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],D7e=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,L7e=/^[#`~*+_=<>0-9-]/,dbe=/[^ \t\f\v\r\n]/,R7e=/^[*+-]/,F7e=/^(\d{1,9})([.)])/,M7e=/^#{1,6}(?:[ \t]+|$)/,O7e=/^`{3,}(?!.*`)|^~{3,}/,$7e=/^(?:`{3,}|~{3,})(?= *$)/,I7e=/^(?:=+|-+)[ \t]*$/,P7e=/\r\n|\n|\r/,N7e=function(G){return!dbe.test(G)},Qx=function(G){return G===cbe||G===lbe},gu=function(G,ue){return ue<G.length?G.charCodeAt(ue):-1},hbe=function(G){for(;G;){if(G._lastLineBlank)return!0;var ue=G.type;if(!G._lastLineChecked&&(ue==="list"||ue==="item"))G._lastLineChecked=!0,G=G._lastChild;else{G._lastLineChecked=!0;break}}return!1},B7e=function(){if(this.partiallyConsumedTab){this.offset+=1;var G=4-this.column%4;this.tip._string_content+=" ".repeat(G)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},z7e=function(G,ue){for(;!this.blocks[this.tip.type].canContain(G);)this.finalize(this.tip,this.lineNumber-1);var Ae=ue+1,Fe=new a(G,[[this.lineNumber,Ae],[0,0]]);return Fe._string_content="",this.tip.appendChild(Fe),this.tip=Fe,Fe},j7e=function(G,ue){var Ae=G.currentLine.slice(G.nextNonspace),Fe,ft,lt,vn,Bt={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:G.indent};if(G.indent>=4)return null;if(Fe=Ae.match(R7e))Bt.type="bullet",Bt.bulletChar=Fe[0][0];else if((Fe=Ae.match(F7e))&&(ue.type!=="paragraph"||Fe[1]==="1"))Bt.type="ordered",Bt.start=parseInt(Fe[1]),Bt.delimiter=Fe[2];else return null;if(ft=gu(G.currentLine,G.nextNonspace+Fe[0].length),!(ft===-1||ft===lbe||ft===cbe)||ue.type==="paragraph"&&!G.currentLine.slice(G.nextNonspace+Fe[0].length).match(dbe))return null;G.advanceNextNonspace(),G.advanceOffset(Fe[0].length,!0),lt=G.column,vn=G.offset;do G.advanceOffset(1,!0),ft=gu(G.currentLine,G.offset);while(G.column-lt<5&&Qx(ft));var Mn=gu(G.currentLine,G.offset)===-1,Gr=G.column-lt;return Gr>=5||Gr<1||Mn?(Bt.padding=Fe[0].length+1,G.column=lt,G.offset=vn,Qx(gu(G.currentLine,G.offset))&&G.advanceOffset(1,!0)):Bt.padding=Fe[0].length+Gr,Bt},U7e=function(G,ue){return G.type===ue.type&&G.delimiter===ue.delimiter&&G.bulletChar===ue.bulletChar},q7e=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var G=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=G}this.allClosed=!0}},pbe={document:{continue:function(){return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(G,ue){for(var Ae=ue._firstChild;Ae;){if(hbe(Ae)&&Ae._next){ue._listData.tight=!1;break}for(var Fe=Ae._firstChild;Fe;){if(hbe(Fe)&&(Ae._next||Fe._next)){ue._listData.tight=!1;break}Fe=Fe._next}Ae=Ae._next}},canContain:function(G){return G==="item"},acceptsLines:!1},block_quote:{continue:function(G){var ue=G.currentLine;if(!G.indented&&gu(ue,G.nextNonspace)===ube)G.advanceNextNonspace(),G.advanceOffset(1,!1),Qx(gu(ue,G.offset))&&G.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},item:{continue:function(G,ue){if(G.blank){if(ue._firstChild==null)return 1;G.advanceNextNonspace()}else if(G.indent>=ue._listData.markerOffset+ue._listData.padding)G.advanceOffset(ue._listData.markerOffset+ue._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(G,ue){var Ae=G.currentLine,Fe=G.indent;if(ue._isFenced){var ft=Fe<=3&&Ae.charAt(G.nextNonspace)===ue._fenceChar&&Ae.slice(G.nextNonspace).match($7e);if(ft&&ft[0].length>=ue._fenceLength)return G.lastLineLength=G.offset+Fe+ft[0].length,G.finalize(ue,G.lineNumber),2;for(var lt=ue._fenceOffset;lt>0&&Qx(gu(Ae,G.offset));)G.advanceOffset(1,!0),lt--}else if(Fe>=GS)G.advanceOffset(GS,!0);else if(G.blank)G.advanceNextNonspace();else return 1;return 0},finalize:function(G,ue){if(ue._isFenced){var Ae=ue._string_content,Fe=Ae.indexOf(`
`),ft=Ae.slice(0,Fe),lt=Ae.slice(Fe+1);ue.info=Yye(ft.trim()),ue._literal=lt}else ue._literal=ue._string_content.replace(/(\n *)+$/,`
`);ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(G,ue){return G.blank&&(ue._htmlBlockType===6||ue._htmlBlockType===7)?1:0},finalize:function(G,ue){ue._literal=ue._string_content.replace(/(\n *)+$/,""),ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(G){return G.blank?1:0},finalize:function(G,ue){for(var Ae,Fe=!1;gu(ue._string_content,0)===fbe&&(Ae=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Ae),Fe=!0;Fe&&N7e(ue._string_content)&&ue.unlink()},canContain:function(){return!1},acceptsLines:!0}},H7e=[function(G){return!G.indented&&gu(G.currentLine,G.nextNonspace)===ube?(G.advanceNextNonspace(),G.advanceOffset(1,!1),Qx(gu(G.currentLine,G.offset))&&G.advanceOffset(1,!0),G.closeUnmatchedBlocks(),G.addChild("block_quote",G.nextNonspace),1):0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(M7e))){G.advanceNextNonspace(),G.advanceOffset(ue[0].length,!1),G.closeUnmatchedBlocks();var Ae=G.addChild("heading",G.nextNonspace);return Ae.level=ue[0].trim().length,Ae._string_content=G.currentLine.slice(G.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),G.advanceOffset(G.currentLine.length-G.offset),2}else return 0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(O7e))){var Ae=ue[0].length;G.closeUnmatchedBlocks();var Fe=G.addChild("code_block",G.nextNonspace);return Fe._isFenced=!0,Fe._fenceLength=Ae,Fe._fenceChar=ue[0][0],Fe._fenceOffset=G.indent,G.advanceNextNonspace(),G.advanceOffset(Ae,!1),2}else return 0},function(G,ue){if(!G.indented&&gu(G.currentLine,G.nextNonspace)===C7e){var Ae=G.currentLine.slice(G.nextNonspace),Fe;for(Fe=1;Fe<=7;Fe++)if(k7e[Fe].test(Ae)&&(Fe<7||ue.type!=="paragraph")){G.closeUnmatchedBlocks();var ft=G.addChild("html_block",G.offset);return ft._htmlBlockType=Fe,2}}return 0},function(G,ue){var Ae;if(!G.indented&&ue.type==="paragraph"&&(Ae=G.currentLine.slice(G.nextNonspace).match(I7e))){G.closeUnmatchedBlocks();for(var Fe;gu(ue._string_content,0)===fbe&&(Fe=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Fe);if(ue._string_content.length>0){var ft=new a("heading",ue.sourcepos);return ft.level=Ae[0][0]==="="?1:2,ft._string_content=ue._string_content,ue.insertAfter(ft),ue.unlink(),G.tip=ft,G.advanceOffset(G.currentLine.length-G.offset,!1),2}else return 0}else return 0},function(G){return!G.indented&&D7e.test(G.currentLine.slice(G.nextNonspace))?(G.closeUnmatchedBlocks(),G.addChild("thematic_break",G.nextNonspace),G.advanceOffset(G.currentLine.length-G.offset,!1),2):0},function(G,ue){var Ae;return(!G.indented||ue.type==="list")&&(Ae=j7e(G,ue))?(G.closeUnmatchedBlocks(),(G.tip.type!=="list"||!U7e(ue._listData,Ae))&&(ue=G.addChild("list",G.nextNonspace),ue._listData=Ae),ue=G.addChild("item",G.nextNonspace),ue._listData=Ae,1):0},function(G){return G.indented&&G.tip.type!=="paragraph"&&!G.blank?(G.advanceOffset(GS,!0),G.closeUnmatchedBlocks(),G.addChild("code_block",G.offset),2):0}],G7e=function(G,ue){for(var Ae=this.currentLine,Fe,ft,lt;G>0&&(lt=Ae[this.offset]);)lt==="	"?(Fe=4-this.column%4,ue?(this.partiallyConsumedTab=Fe>G,ft=Fe>G?G:Fe,this.column+=ft,this.offset+=this.partiallyConsumedTab?0:1,G-=ft):(this.partiallyConsumedTab=!1,this.column+=Fe,this.offset+=1,G-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,G-=1)},V7e=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},W7e=function(){for(var G=this.currentLine,ue=this.offset,Ae=this.column,Fe;(Fe=G.charAt(ue))!=="";)if(Fe===" ")ue++,Ae++;else if(Fe==="	")ue++,Ae+=4-Ae%4;else break;this.blank=Fe===`
`||Fe==="\r"||Fe==="",this.nextNonspace=ue,this.nextNonspaceColumn=Ae,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=GS},Y7e=function(G){var ue=!0,Ae,Fe=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,G.indexOf("\0")!==-1&&(G=G.replace(/\0/g,"")),this.currentLine=G;for(var ft;(ft=Fe._lastChild)&&ft._open;){switch(Fe=ft,this.findNextNonspace(),this.blocks[Fe.type].continue(this,Fe)){case 0:break;case 1:ue=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!ue){Fe=Fe._parent;break}}this.allClosed=Fe===this.oldtip,this.lastMatchedContainer=Fe;for(var lt=Fe.type!=="paragraph"&&pbe[Fe.type].acceptsLines,vn=this.blockStarts,Bt=vn.length;!lt;){if(this.findNextNonspace(),!this.indented&&!L7e.test(G.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var Mn=0;Mn<Bt;){var Gr=vn[Mn](this,Fe);if(Gr===1){Fe=this.tip;break}else if(Gr===2){Fe=this.tip,lt=!0;break}else Mn++}if(Mn===Bt){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&Fe.lastChild&&(Fe.lastChild._lastLineBlank=!0),Ae=Fe.type;for(var vr=this.blank&&!(Ae==="block_quote"||Ae==="code_block"&&Fe._isFenced||Ae==="item"&&!Fe._firstChild&&Fe.sourcepos[0][0]===this.lineNumber),xr=Fe;xr;)xr._lastLineBlank=vr,xr=xr._parent;this.blocks[Ae].acceptsLines?(this.addLine(),Ae==="html_block"&&Fe._htmlBlockType>=1&&Fe._htmlBlockType<=5&&T7e[Fe._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=G.length,this.finalize(Fe,this.lineNumber))):this.offset<G.length&&!this.blank&&(Fe=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=G.length},X7e=function(G,ue){var Ae=G._parent;G._open=!1,G.sourcepos[1]=[ue,this.lastLineLength],this.blocks[G.type].finalize(this,G),this.tip=Ae},Z7e=function(G){var ue,Ae,Fe,ft=G.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;Ae=ft.next();)ue=Ae.node,Fe=ue.type,!Ae.entering&&(Fe==="paragraph"||Fe==="heading")&&this.inlineParser.parse(ue)},gbe=function(){var G=new a("document",[[1,1],[0,0]]);return G},K7e=function(G){this.doc=new gbe,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var ue=G.split(P7e),Ae=ue.length;G.charCodeAt(G.length-1)===A7e&&(Ae-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var Fe=0;Fe<Ae;Fe++)this.incorporateLine(ue[Fe]);for(;this.tip;)this.finalize(this.tip,Ae);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function J7e(G){return{doc:new gbe,blocks:pbe,blockStarts:H7e,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new S7e(G),findNextNonspace:W7e,advanceOffset:G7e,advanceNextNonspace:V7e,addLine:B7e,addChild:z7e,incorporateLine:Y7e,finalize:X7e,processInlines:Z7e,closeUnmatchedBlocks:q7e,parse:K7e,options:G||{}}}function Yh(){}function Q7e(G){var ue=G.walker(),Ae,Fe;for(this.buffer="",this.lastOut=`
`;Ae=ue.next();)Fe=Ae.node.type,this[Fe]&&this[Fe](Ae.node,Ae.entering);return this.buffer}function eBe(G){this.buffer+=G,this.lastOut=G}function tBe(){this.lastOut!==`
`&&this.lit(`
`)}function nBe(G){this.lit(G)}function rBe(G){return G}Yh.prototype.render=Q7e,Yh.prototype.out=nBe,Yh.prototype.lit=eBe,Yh.prototype.cr=tBe,Yh.prototype.esc=rBe;var iBe=/^javascript:|vbscript:|file:|data:/i,oBe=/^data:image\/(?:png|gif|jpeg|webp)/i,mbe=function(G){return iBe.test(G)&&!oBe.test(G)};function sBe(G,ue,Ae){if(!(this.disableTags>0)){if(this.buffer+="<"+G,ue&&ue.length>0)for(var Fe=0,ft;(ft=ue[Fe])!==void 0;)this.buffer+=" "+ft[0]+'="'+ft[1]+'"',Fe++;Ae&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function no(G){G=G||{},G.softbreak=G.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=G}function aBe(G){this.out(G.literal)}function lBe(){this.lit(this.options.softbreak)}function uBe(){this.tag("br",[],!0),this.cr()}function cBe(G,ue){var Ae=this.attrs(G);ue?(this.options.safe&&mbe(G.destination)||Ae.push(["href",this.esc(G.destination)]),G.title&&Ae.push(["title",this.esc(G.title)]),this.tag("a",Ae)):this.tag("/a")}function fBe(G,ue){ue?(this.disableTags===0&&(this.options.safe&&mbe(G.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(G.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(G.title&&this.lit('" title="'+this.esc(G.title)),this.lit('" />')))}function dBe(G,ue){this.tag(ue?"em":"/em")}function hBe(G,ue){this.tag(ue?"strong":"/strong")}function pBe(G,ue){var Ae=G.parent.parent,Fe=this.attrs(G);Ae!==null&&Ae.type==="list"&&Ae.listTight||(ue?(this.cr(),this.tag("p",Fe)):(this.tag("/p"),this.cr()))}function gBe(G,ue){var Ae="h"+G.level,Fe=this.attrs(G);ue?(this.cr(),this.tag(Ae,Fe)):(this.tag("/"+Ae),this.cr())}function mBe(G){this.tag("code"),this.out(G.literal),this.tag("/code")}function yBe(G){var ue=G.info?G.info.split(/\s+/):[],Ae=this.attrs(G);ue.length>0&&ue[0].length>0&&Ae.push(["class","language-"+this.esc(ue[0])]),this.cr(),this.tag("pre"),this.tag("code",Ae),this.out(G.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function bBe(G){var ue=this.attrs(G);this.cr(),this.tag("hr",ue,!0),this.cr()}function vBe(G,ue){var Ae=this.attrs(G);ue?(this.cr(),this.tag("blockquote",Ae),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function xBe(G,ue){var Ae=G.listType==="bullet"?"ul":"ol",Fe=this.attrs(G);if(ue){var ft=G.listStart;ft!==null&&ft!==1&&Fe.push(["start",ft.toString()]),this.cr(),this.tag(Ae,Fe),this.cr()}else this.cr(),this.tag("/"+Ae),this.cr()}function wBe(G,ue){var Ae=this.attrs(G);ue?this.tag("li",Ae):(this.tag("/li"),this.cr())}function _Be(G){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal)}function EBe(G){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal),this.cr()}function SBe(G,ue){ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit)}function ABe(G,ue){this.cr(),ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit),this.cr()}function CBe(G){this.lit(this.esc(G))}function kBe(G){var ue=[];if(this.options.sourcepos){var Ae=G.sourcepos;Ae&&ue.push(["data-sourcepos",String(Ae[0][0])+":"+String(Ae[0][1])+"-"+String(Ae[1][0])+":"+String(Ae[1][1])])}return ue}no.prototype=Object.create(Yh.prototype),no.prototype.text=aBe,no.prototype.html_inline=_Be,no.prototype.html_block=EBe,no.prototype.softbreak=lBe,no.prototype.linebreak=uBe,no.prototype.link=cBe,no.prototype.image=fBe,no.prototype.emph=dBe,no.prototype.strong=hBe,no.prototype.paragraph=pBe,no.prototype.heading=gBe,no.prototype.code=mBe,no.prototype.code_block=yBe,no.prototype.thematic_break=bBe,no.prototype.block_quote=vBe,no.prototype.list=xBe,no.prototype.item=wBe,no.prototype.custom_inline=SBe,no.prototype.custom_block=ABe,no.prototype.esc=Xye,no.prototype.out=CBe,no.prototype.tag=sBe,no.prototype.attrs=kBe;var TBe=/\<[^>]*\>/;function DBe(G){return G.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function Xg(G){G=G||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=G}function LBe(G){this.buffer="";var ue,Ae,Fe=G.walker(),ft,lt,vn,Bt,Mn,Gr,vr=this.options;for(vr.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;ft=Fe.next();)if(vn=ft.entering,lt=ft.node,Gr=lt.type,Bt=lt.isContainer,Mn=Gr==="thematic_break"||Gr==="linebreak"||Gr==="softbreak",Ae=DBe(Gr),vn){switch(ue=[],Gr){case"document":ue.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":lt.listType!==null&&ue.push(["type",lt.listType.toLowerCase()]),lt.listStart!==null&&ue.push(["start",String(lt.listStart)]),lt.listTight!==null&&ue.push(["tight",lt.listTight?"true":"false"]);var xr=lt.listDelimiter;if(xr!==null){var ei="";xr==="."?ei="period":ei="paren",ue.push(["delimiter",ei])}break;case"code_block":lt.info&&ue.push(["info",lt.info]);break;case"heading":ue.push(["level",String(lt.level)]);break;case"link":case"image":ue.push(["destination",lt.destination]),ue.push(["title",lt.title]);break;case"custom_inline":case"custom_block":ue.push(["on_enter",lt.onEnter]),ue.push(["on_exit",lt.onExit]);break}if(vr.sourcepos){var ti=lt.sourcepos;ti&&ue.push(["sourcepos",String(ti[0][0])+":"+String(ti[0][1])+"-"+String(ti[1][0])+":"+String(ti[1][1])])}if(this.cr(),this.out(this.tag(Ae,ue,Mn)),Bt)this.indentLevel+=1;else if(!Bt&&!Mn){var fs=lt.literal;fs&&this.out(this.esc(fs)),this.out(this.tag("/"+Ae))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+Ae));return vr.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function RBe(G){this.disableTags>0?this.buffer+=G.replace(TBe,""):this.buffer+=G,this.lastOut=G}function FBe(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var G=this.indentLevel;G>0;G--)this.buffer+=this.indent}}function MBe(G,ue,Ae){var Fe="<"+G;if(ue&&ue.length>0)for(var ft=0,lt;(lt=ue[ft])!==void 0;)Fe+=" "+lt[0]+'="'+this.esc(lt[1])+'"',ft++;return Ae&&(Fe+=" /"),Fe+=">",Fe}Xg.prototype=Object.create(Yh.prototype),Xg.prototype.render=LBe,Xg.prototype.out=RBe,Xg.prototype.cr=FBe,Xg.prototype.tag=MBe,Xg.prototype.esc=Xye,n.HtmlRenderer=no,n.Node=a,n.Parser=J7e,n.Renderer=Yh,n.XmlRenderer=Xg,Object.defineProperty(n,"__esModule",{value:!0})})}(d2,d2.exports)),d2.exports}var oC={exports:{}},y5,gSe;function a5t(){if(gSe)return y5;gSe=1;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var a=t.length,l=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,b=0,y=0,v=p.length;y!==v&&p[y]===0;)y++,m++;for(var w=(v-y)*f+1>>>0,E=new Uint8Array(w);y!==v;){for(var A=p[y],T=0,D=w-1;(A!==0||T<b)&&D!==-1;D--,T++)A+=256*E[D]>>>0,E[D]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");b=T,y++}for(var k=w-b;k!==w&&E[k]===0;)k++;for(var R=l.repeat(m);k<w;++k)R+=t.charAt(E[k]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var b=0,y=0;p[m]===l;)b++,m++;for(var v=(p.length-m)*u+1>>>0,w=new Uint8Array(v);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var A=0,T=v-1;(E!==0||A<y)&&T!==-1;T--,A++)E+=a*w[T]>>>0,w[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=A,m++}if(p[m]!==" "){for(var D=v-y;D!==v&&w[D]===0;)D++;for(var k=new Uint8Array(b+(v-D)),R=b;D!==v;)k[R++]=w[D++];return k}}}function h(p){var m=d(p);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:c,decodeUnsafe:d,decode:h}}return y5=e,y5}var sC={},b5={},v5={},x5,mSe;function KIe(){return mSe||(mSe=1,x5=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),x5}var w5,ySe;function qB(){if(ySe)return w5;ySe=1;var e=KIe();return w5=function(){return e()&&!!Symbol.toStringTag},w5}var _5,bSe;function l5t(){return bSe||(bSe=1,_5=Error),_5}var E5,vSe;function u5t(){return vSe||(vSe=1,E5=EvalError),E5}var S5,xSe;function c5t(){return xSe||(xSe=1,S5=RangeError),S5}var A5,wSe;function f5t(){return wSe||(wSe=1,A5=ReferenceError),A5}var C5,_Se;function JIe(){return _Se||(_Se=1,C5=SyntaxError),C5}var k5,ESe;function DR(){return ESe||(ESe=1,k5=TypeError),k5}var T5,SSe;function d5t(){return SSe||(SSe=1,T5=URIError),T5}var D5,ASe;function h5t(){if(ASe)return D5;ASe=1;var e=typeof Symbol<"u"&&Symbol,t=KIe();return D5=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},D5}var L5,CSe;function p5t(){if(CSe)return L5;CSe=1;var e={__proto__:null,foo:{}},t=Object;return L5=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof t)},L5}var R5,kSe;function g5t(){if(kSe)return R5;kSe=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,u){for(var f=[],c=0;c<l.length;c+=1)f[c]=l[c];for(var d=0;d<u.length;d+=1)f[d+l.length]=u[d];return f},o=function(l,u){for(var f=[],c=u,d=0;c<l.length;c+=1,d+=1)f[d]=l[c];return f},s=function(a,l){for(var u="",f=0;f<a.length;f+=1)u+=a[f],f+1<a.length&&(u+=l);return u};return R5=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==r)throw new TypeError(e+u);for(var f=o(arguments,1),c,d=function(){if(this instanceof c){var y=u.apply(this,i(f,arguments));return Object(y)===y?y:this}return u.apply(l,i(f,arguments))},h=n(0,u.length-f.length),p=[],m=0;m<h;m++)p[m]="$"+m;if(c=Function("binder","return function ("+s(p,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var b=function(){};b.prototype=u.prototype,c.prototype=new b,b.prototype=null}return c},R5}var F5,TSe;function HB(){if(TSe)return F5;TSe=1;var e=g5t();return F5=Function.prototype.bind||e,F5}var M5,DSe;function m5t(){if(DSe)return M5;DSe=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,n=HB();return M5=n.call(e,t),M5}var O5,LSe;function lS(){if(LSe)return O5;LSe=1;var e,t=l5t(),n=u5t(),r=c5t(),i=f5t(),o=JIe(),s=DR(),a=d5t(),l=Function,u=function(q){try{return l('"use strict"; return ('+q+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var c=function(){throw new s},d=f?function(){try{return arguments.callee,c}catch{try{return f(arguments,"callee").get}catch{return c}}}():c,h=h5t()(),p=p5t()(),m=Object.getPrototypeOf||(p?function(q){return q.__proto__}:null),b={},y=typeof Uint8Array>"u"||!m?e:m(Uint8Array),v={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":h&&m?m([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&m?m(m([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!h||!m?e:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":r,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!h||!m?e:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&m?m(""[Symbol.iterator]()):e,"%Symbol%":h?Symbol:e,"%SyntaxError%":o,"%ThrowTypeError%":d,"%TypedArray%":y,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet};if(m)try{null.error}catch(q){var w=m(m(q));v["%Error.prototype%"]=w}var E=function q(Y){var X;if(Y==="%AsyncFunction%")X=u("async function () {}");else if(Y==="%GeneratorFunction%")X=u("function* () {}");else if(Y==="%AsyncGeneratorFunction%")X=u("async function* () {}");else if(Y==="%AsyncGenerator%"){var te=q("%AsyncGeneratorFunction%");te&&(X=te.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var le=q("%AsyncGenerator%");le&&m&&(X=m(le.prototype))}return v[Y]=X,X},A={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=HB(),D=m5t(),k=T.call(Function.call,Array.prototype.concat),R=T.call(Function.apply,Array.prototype.splice),M=T.call(Function.call,String.prototype.replace),B=T.call(Function.call,String.prototype.slice),K=T.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,I=function(Y){var X=B(Y,0,1),te=B(Y,-1);if(X==="%"&&te!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(te==="%"&&X!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var le=[];return M(Y,L,function(ee,z,he,de){le[le.length]=he?M(de,$,"$1"):z||ee}),le},U=function(Y,X){var te=Y,le;if(D(A,te)&&(le=A[te],te="%"+le[0]+"%"),D(v,te)){var ee=v[te];if(ee===b&&(ee=E(te)),typeof ee>"u"&&!X)throw new s("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:le,name:te,value:ee}}throw new o("intrinsic "+Y+" does not exist!")};return O5=function(Y,X){if(typeof Y!="string"||Y.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof X!="boolean")throw new s('"allowMissing" argument must be a boolean');if(K(/^%?[^%]*%?$/,Y)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var te=I(Y),le=te.length>0?te[0]:"",ee=U("%"+le+"%",X),z=ee.name,he=ee.value,de=!1,ze=ee.alias;ze&&(le=ze[0],R(te,k([0,1],ze)));for(var He=1,je=!0;He<te.length;He+=1){var we=te[He],Ie=B(we,0,1),qe=B(we,-1);if((Ie==='"'||Ie==="'"||Ie==="`"||qe==='"'||qe==="'"||qe==="`")&&Ie!==qe)throw new o("property names with quotes must have matching quotes");if((we==="constructor"||!je)&&(de=!0),le+="."+we,z="%"+le+"%",D(v,z))he=v[z];else if(he!=null){if(!(we in he)){if(!X)throw new s("base intrinsic for "+Y+" exists, but the property is not available.");return}if(f&&He+1>=te.length){var Pe=f(he,we);je=!!Pe,je&&"get"in Pe&&!("originalValue"in Pe.get)?he=Pe.get:he=he[we]}else je=D(he,we),he=he[we];je&&!de&&(v[z]=he)}}return he},O5}var $5={exports:{}},I5,RSe;function GB(){if(RSe)return I5;RSe=1;var e=lS(),t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return I5=t,I5}var P5,FSe;function VB(){if(FSe)return P5;FSe=1;var e=lS(),t=e("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return P5=t,P5}var N5,MSe;function y5t(){if(MSe)return N5;MSe=1;var e=GB(),t=JIe(),n=DR(),r=VB();return N5=function(o,s,a){if(!o||typeof o!="object"&&typeof o!="function")throw new n("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,d=!!r&&r(o,s);if(e)e(o,s,{configurable:f===null&&d?d.configurable:!f,enumerable:l===null&&d?d.enumerable:!l,value:a,writable:u===null&&d?d.writable:!u});else if(c||!l&&!u&&!f)o[s]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},N5}var B5,OSe;function b5t(){if(OSe)return B5;OSe=1;var e=GB(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},B5=t,B5}var z5,$Se;function v5t(){if($Se)return z5;$Se=1;var e=lS(),t=y5t(),n=b5t()(),r=VB(),i=DR(),o=e("%Math.floor%");return z5=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||o(l)!==l)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],f=!0,c=!0;if("length"in a&&r){var d=r(a,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(c=!1)}return(f||c||!u)&&(n?t(a,"length",l,!0,!0):t(a,"length",l)),a},z5}var ISe;function QIe(){return ISe||(ISe=1,function(e){var t=HB(),n=lS(),r=v5t(),i=DR(),o=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(s,o),l=GB(),u=n("%Math.max%");e.exports=function(d){if(typeof d!="function")throw new i("a function is required");var h=a(t,s,arguments);return r(h,1+u(0,d.length-(arguments.length-1)),!0)};var f=function(){return a(t,o,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f}($5)),$5.exports}var j5,PSe;function ePe(){if(PSe)return j5;PSe=1;var e=lS(),t=QIe(),n=t(e("String.prototype.indexOf"));return j5=function(i,o){var s=e(i,!!o);return typeof s=="function"&&n(i,".prototype.")>-1?t(s):s},j5}var U5,NSe;function x5t(){if(NSe)return U5;NSe=1;var e=qB()(),t=ePe(),n=t("Object.prototype.toString"),r=function(a){return e&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:n(a)==="[object Arguments]"},i=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&n(a)!=="[object Array]"&&n(a.callee)==="[object Function]"},o=function(){return r(arguments)}();return r.isLegacyArguments=i,U5=o?r:i,U5}var q5,BSe;function w5t(){if(BSe)return q5;BSe=1;var e=Object.prototype.toString,t=Function.prototype.toString,n=/^\s*(?:function)?\*/,r=qB()(),i=Object.getPrototypeOf,o=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},s;return q5=function(l){if(typeof l!="function")return!1;if(n.test(t.call(l)))return!0;if(!r){var u=e.call(l);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof s>"u"){var f=o();s=f?i(f):!1}return i(l)===s},q5}var H5,zSe;function _5t(){if(zSe)return H5;zSe=1;var e=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},t(function(){throw 42},null,n)}catch(v){v!==r&&(t=null)}else t=null;var i=/^\s*class\b/,o=function(w){try{var E=e.call(w);return i.test(E)}catch{return!1}},s=function(w){try{return o(w)?!1:(e.call(w),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",f="[object GeneratorFunction]",c="[object HTMLAllCollection]",d="[object HTML document.all class]",h="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,m=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(b=function(w){if((m||!w)&&(typeof w>"u"||typeof w=="object"))try{var E=a.call(w);return(E===c||E===d||E===h||E===l)&&w("")==null}catch{}return!1})}return H5=t?function(w){if(b(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;try{t(w,null,n)}catch(E){if(E!==r)return!1}return!o(w)&&s(w)}:function(w){if(b(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;if(p)return s(w);if(o(w))return!1;var E=a.call(w);return E!==u&&E!==f&&!/^\[object HTML/.test(E)?!1:s(w)},H5}var G5,jSe;function E5t(){if(jSe)return G5;jSe=1;var e=_5t(),t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(l,u,f){for(var c=0,d=l.length;c<d;c++)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},i=function(l,u,f){for(var c=0,d=l.length;c<d;c++)f==null?u(l.charAt(c),c,l):u.call(f,l.charAt(c),c,l)},o=function(l,u,f){for(var c in l)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},s=function(l,u,f){if(!e(u))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=f),t.call(l)==="[object Array]"?r(l,u,c):typeof l=="string"?i(l,u,c):o(l,u,c)};return G5=s,G5}var V5,USe;function S5t(){return USe||(USe=1,V5=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),V5}var W5,qSe;function A5t(){if(qSe)return W5;qSe=1;var e=S5t(),t=typeof globalThis>"u"?Yi:globalThis;return W5=function(){for(var r=[],i=0;i<e.length;i++)typeof t[e[i]]=="function"&&(r[r.length]=e[i]);return r},W5}var Y5,HSe;function tPe(){if(HSe)return Y5;HSe=1;var e=E5t(),t=A5t(),n=QIe(),r=ePe(),i=VB(),o=r("Object.prototype.toString"),s=qB()(),a=typeof globalThis>"u"?Yi:globalThis,l=t(),u=r("String.prototype.slice"),f=Object.getPrototypeOf,c=r("Array.prototype.indexOf",!0)||function(b,y){for(var v=0;v<b.length;v+=1)if(b[v]===y)return v;return-1},d={__proto__:null};s&&i&&f?e(l,function(m){var b=new a[m];if(Symbol.toStringTag in b){var y=f(b),v=i(y,Symbol.toStringTag);if(!v){var w=f(y);v=i(w,Symbol.toStringTag)}d["$"+m]=n(v.get)}}):e(l,function(m){var b=new a[m],y=b.slice||b.set;y&&(d["$"+m]=n(y))});var h=function(b){var y=!1;return e(d,function(v,w){if(!y)try{"$"+v(b)===w&&(y=u(w,1))}catch{}}),y},p=function(b){var y=!1;return e(d,function(v,w){if(!y)try{v(b),y=u(w,1)}catch{}}),y};return Y5=function(b){if(!b||typeof b!="object")return!1;if(!s){var y=u(o(b),8,-1);return c(l,y)>-1?y:y!=="Object"?!1:p(b)}return i?h(b):null},Y5}var X5,GSe;function C5t(){if(GSe)return X5;GSe=1;var e=tPe();return X5=function(n){return!!e(n)},X5}var VSe;function k5t(){return VSe||(VSe=1,function(e){var t=x5t(),n=w5t(),r=tPe(),i=C5t();function o(pe){return pe.call.bind(pe)}var s=typeof BigInt<"u",a=typeof Symbol<"u",l=o(Object.prototype.toString),u=o(Number.prototype.valueOf),f=o(String.prototype.valueOf),c=o(Boolean.prototype.valueOf);if(s)var d=o(BigInt.prototype.valueOf);if(a)var h=o(Symbol.prototype.valueOf);function p(pe,ie){if(typeof pe!="object")return!1;try{return ie(pe),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=n,e.isTypedArray=i;function m(pe){return typeof Promise<"u"&&pe instanceof Promise||pe!==null&&typeof pe=="object"&&typeof pe.then=="function"&&typeof pe.catch=="function"}e.isPromise=m;function b(pe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(pe):i(pe)||z(pe)}e.isArrayBufferView=b;function y(pe){return r(pe)==="Uint8Array"}e.isUint8Array=y;function v(pe){return r(pe)==="Uint8ClampedArray"}e.isUint8ClampedArray=v;function w(pe){return r(pe)==="Uint16Array"}e.isUint16Array=w;function E(pe){return r(pe)==="Uint32Array"}e.isUint32Array=E;function A(pe){return r(pe)==="Int8Array"}e.isInt8Array=A;function T(pe){return r(pe)==="Int16Array"}e.isInt16Array=T;function D(pe){return r(pe)==="Int32Array"}e.isInt32Array=D;function k(pe){return r(pe)==="Float32Array"}e.isFloat32Array=k;function R(pe){return r(pe)==="Float64Array"}e.isFloat64Array=R;function M(pe){return r(pe)==="BigInt64Array"}e.isBigInt64Array=M;function B(pe){return r(pe)==="BigUint64Array"}e.isBigUint64Array=B;function K(pe){return l(pe)==="[object Map]"}K.working=typeof Map<"u"&&K(new Map);function L(pe){return typeof Map>"u"?!1:K.working?K(pe):pe instanceof Map}e.isMap=L;function $(pe){return l(pe)==="[object Set]"}$.working=typeof Set<"u"&&$(new Set);function I(pe){return typeof Set>"u"?!1:$.working?$(pe):pe instanceof Set}e.isSet=I;function U(pe){return l(pe)==="[object WeakMap]"}U.working=typeof WeakMap<"u"&&U(new WeakMap);function q(pe){return typeof WeakMap>"u"?!1:U.working?U(pe):pe instanceof WeakMap}e.isWeakMap=q;function Y(pe){return l(pe)==="[object WeakSet]"}Y.working=typeof WeakSet<"u"&&Y(new WeakSet);function X(pe){return Y(pe)}e.isWeakSet=X;function te(pe){return l(pe)==="[object ArrayBuffer]"}te.working=typeof ArrayBuffer<"u"&&te(new ArrayBuffer);function le(pe){return typeof ArrayBuffer>"u"?!1:te.working?te(pe):pe instanceof ArrayBuffer}e.isArrayBuffer=le;function ee(pe){return l(pe)==="[object DataView]"}ee.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ee(new DataView(new ArrayBuffer(1),0,1));function z(pe){return typeof DataView>"u"?!1:ee.working?ee(pe):pe instanceof DataView}e.isDataView=z;var he=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function de(pe){return l(pe)==="[object SharedArrayBuffer]"}function ze(pe){return typeof he>"u"?!1:(typeof de.working>"u"&&(de.working=de(new he)),de.working?de(pe):pe instanceof he)}e.isSharedArrayBuffer=ze;function He(pe){return l(pe)==="[object AsyncFunction]"}e.isAsyncFunction=He;function je(pe){return l(pe)==="[object Map Iterator]"}e.isMapIterator=je;function we(pe){return l(pe)==="[object Set Iterator]"}e.isSetIterator=we;function Ie(pe){return l(pe)==="[object Generator]"}e.isGeneratorObject=Ie;function qe(pe){return l(pe)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=qe;function Pe(pe){return p(pe,u)}e.isNumberObject=Pe;function At(pe){return p(pe,f)}e.isStringObject=At;function ht(pe){return p(pe,c)}e.isBooleanObject=ht;function nn(pe){return s&&p(pe,d)}e.isBigIntObject=nn;function Vt(pe){return a&&p(pe,h)}e.isSymbolObject=Vt;function On(pe){return Pe(pe)||At(pe)||ht(pe)||nn(pe)||Vt(pe)}e.isBoxedPrimitive=On;function Ze(pe){return typeof Uint8Array<"u"&&(le(pe)||ze(pe))}e.isAnyArrayBuffer=Ze,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(pe){Object.defineProperty(e,pe,{enumerable:!1,value:function(){throw new Error(pe+" is not supported in userland")}})})}(v5)),v5}var Z5,WSe;function T5t(){return WSe||(WSe=1,Z5=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),Z5}var aC={exports:{}},YSe;function D5t(){return YSe||(YSe=1,typeof Object.create=="function"?aC.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:aC.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),aC.exports}var XSe;function ZSe(){return XSe||(XSe=1,function(e){var t={},n=Object.getOwnPropertyDescriptors||function(he){for(var de=Object.keys(he),ze={},He=0;He<de.length;He++)ze[de[He]]=Object.getOwnPropertyDescriptor(he,de[He]);return ze},r=/%[sdj%]/g;e.format=function(z){if(!T(z)){for(var he=[],de=0;de<arguments.length;de++)he.push(a(arguments[de]));return he.join(" ")}for(var de=1,ze=arguments,He=ze.length,je=String(z).replace(r,function(Ie){if(Ie==="%%")return"%";if(de>=He)return Ie;switch(Ie){case"%s":return String(ze[de++]);case"%d":return Number(ze[de++]);case"%j":try{return JSON.stringify(ze[de++])}catch{return"[Circular]"}default:return Ie}}),we=ze[de];de<He;we=ze[++de])w(we)||!M(we)?je+=" "+we:je+=" "+a(we);return je},e.deprecate=function(z,he){if(typeof process<"u"&&process.noDeprecation===!0)return z;if(typeof process>"u")return function(){return e.deprecate(z,he).apply(this,arguments)};var de=!1;function ze(){if(!de){if(process.throwDeprecation)throw new Error(he);process.traceDeprecation?console.trace(he):console.error(he),de=!0}return z.apply(this,arguments)}return ze};var i={},o=/^$/;if(t.NODE_DEBUG){var s=t.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+s+"$","i")}e.debuglog=function(z){if(z=z.toUpperCase(),!i[z])if(o.test(z)){var he=process.pid;i[z]=function(){var de=e.format.apply(e,arguments);console.error("%s %d: %s",z,he,de)}}else i[z]=function(){};return i[z]};function a(z,he){var de={seen:[],stylize:u};return arguments.length>=3&&(de.depth=arguments[2]),arguments.length>=4&&(de.colors=arguments[3]),v(he)?de.showHidden=he:he&&e._extend(de,he),k(de.showHidden)&&(de.showHidden=!1),k(de.depth)&&(de.depth=2),k(de.colors)&&(de.colors=!1),k(de.customInspect)&&(de.customInspect=!0),de.colors&&(de.stylize=l),c(de,z,de.depth)}e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(z,he){var de=a.styles[he];return de?"\x1B["+a.colors[de][0]+"m"+z+"\x1B["+a.colors[de][1]+"m":z}function u(z,he){return z}function f(z){var he={};return z.forEach(function(de,ze){he[de]=!0}),he}function c(z,he,de){if(z.customInspect&&he&&L(he.inspect)&&he.inspect!==e.inspect&&!(he.constructor&&he.constructor.prototype===he)){var ze=he.inspect(de,z);return T(ze)||(ze=c(z,ze,de)),ze}var He=d(z,he);if(He)return He;var je=Object.keys(he),we=f(je);if(z.showHidden&&(je=Object.getOwnPropertyNames(he)),K(he)&&(je.indexOf("message")>=0||je.indexOf("description")>=0))return h(he);if(je.length===0){if(L(he)){var Ie=he.name?": "+he.name:"";return z.stylize("[Function"+Ie+"]","special")}if(R(he))return z.stylize(RegExp.prototype.toString.call(he),"regexp");if(B(he))return z.stylize(Date.prototype.toString.call(he),"date");if(K(he))return h(he)}var qe="",Pe=!1,At=["{","}"];if(y(he)&&(Pe=!0,At=["[","]"]),L(he)){var ht=he.name?": "+he.name:"";qe=" [Function"+ht+"]"}if(R(he)&&(qe=" "+RegExp.prototype.toString.call(he)),B(he)&&(qe=" "+Date.prototype.toUTCString.call(he)),K(he)&&(qe=" "+h(he)),je.length===0&&(!Pe||he.length==0))return At[0]+qe+At[1];if(de<0)return R(he)?z.stylize(RegExp.prototype.toString.call(he),"regexp"):z.stylize("[Object]","special");z.seen.push(he);var nn;return Pe?nn=p(z,he,de,we,je):nn=je.map(function(Vt){return m(z,he,de,we,Vt,Pe)}),z.seen.pop(),b(nn,qe,At)}function d(z,he){if(k(he))return z.stylize("undefined","undefined");if(T(he)){var de="'"+JSON.stringify(he).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(de,"string")}if(A(he))return z.stylize(""+he,"number");if(v(he))return z.stylize(""+he,"boolean");if(w(he))return z.stylize("null","null")}function h(z){return"["+Error.prototype.toString.call(z)+"]"}function p(z,he,de,ze,He){for(var je=[],we=0,Ie=he.length;we<Ie;++we)X(he,String(we))?je.push(m(z,he,de,ze,String(we),!0)):je.push("");return He.forEach(function(qe){qe.match(/^\d+$/)||je.push(m(z,he,de,ze,qe,!0))}),je}function m(z,he,de,ze,He,je){var we,Ie,qe;if(qe=Object.getOwnPropertyDescriptor(he,He)||{value:he[He]},qe.get?qe.set?Ie=z.stylize("[Getter/Setter]","special"):Ie=z.stylize("[Getter]","special"):qe.set&&(Ie=z.stylize("[Setter]","special")),X(ze,He)||(we="["+He+"]"),Ie||(z.seen.indexOf(qe.value)<0?(w(de)?Ie=c(z,qe.value,null):Ie=c(z,qe.value,de-1),Ie.indexOf(`
`)>-1&&(je?Ie=Ie.split(`
`).map(function(Pe){return"  "+Pe}).join(`
`).slice(2):Ie=`
`+Ie.split(`
`).map(function(Pe){return"   "+Pe}).join(`
`))):Ie=z.stylize("[Circular]","special")),k(we)){if(je&&He.match(/^\d+$/))return Ie;we=JSON.stringify(""+He),we.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(we=we.slice(1,-1),we=z.stylize(we,"name")):(we=we.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),we=z.stylize(we,"string"))}return we+": "+Ie}function b(z,he,de){var ze=z.reduce(function(He,je){return je.indexOf(`
`)>=0,He+je.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ze>60?de[0]+(he===""?"":he+`
 `)+" "+z.join(`,
  `)+" "+de[1]:de[0]+he+" "+z.join(", ")+" "+de[1]}e.types=k5t();function y(z){return Array.isArray(z)}e.isArray=y;function v(z){return typeof z=="boolean"}e.isBoolean=v;function w(z){return z===null}e.isNull=w;function E(z){return z==null}e.isNullOrUndefined=E;function A(z){return typeof z=="number"}e.isNumber=A;function T(z){return typeof z=="string"}e.isString=T;function D(z){return typeof z=="symbol"}e.isSymbol=D;function k(z){return z===void 0}e.isUndefined=k;function R(z){return M(z)&&I(z)==="[object RegExp]"}e.isRegExp=R,e.types.isRegExp=R;function M(z){return typeof z=="object"&&z!==null}e.isObject=M;function B(z){return M(z)&&I(z)==="[object Date]"}e.isDate=B,e.types.isDate=B;function K(z){return M(z)&&(I(z)==="[object Error]"||z instanceof Error)}e.isError=K,e.types.isNativeError=K;function L(z){return typeof z=="function"}e.isFunction=L;function $(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}e.isPrimitive=$,e.isBuffer=T5t();function I(z){return Object.prototype.toString.call(z)}function U(z){return z<10?"0"+z.toString(10):z.toString(10)}var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Y(){var z=new Date,he=[U(z.getHours()),U(z.getMinutes()),U(z.getSeconds())].join(":");return[z.getDate(),q[z.getMonth()],he].join(" ")}e.log=function(){console.log("%s - %s",Y(),e.format.apply(e,arguments))},e.inherits=D5t(),e._extend=function(z,he){if(!he||!M(he))return z;for(var de=Object.keys(he),ze=de.length;ze--;)z[de[ze]]=he[de[ze]];return z};function X(z,he){return Object.prototype.hasOwnProperty.call(z,he)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(he){if(typeof he!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&he[te]){var de=he[te];if(typeof de!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(de,te,{value:de,enumerable:!1,writable:!1,configurable:!0}),de}function de(){for(var ze,He,je=new Promise(function(qe,Pe){ze=qe,He=Pe}),we=[],Ie=0;Ie<arguments.length;Ie++)we.push(arguments[Ie]);we.push(function(qe,Pe){qe?He(qe):ze(Pe)});try{he.apply(this,we)}catch(qe){He(qe)}return je}return Object.setPrototypeOf(de,Object.getPrototypeOf(he)),te&&Object.defineProperty(de,te,{value:de,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(de,n(he))},e.promisify.custom=te;function le(z,he){if(!z){var de=new Error("Promise was rejected with a falsy value");de.reason=z,z=de}return he(z)}function ee(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function he(){for(var de=[],ze=0;ze<arguments.length;ze++)de.push(arguments[ze]);var He=de.pop();if(typeof He!="function")throw new TypeError("The last argument must be of type Function");var je=this,we=function(){return He.apply(je,arguments)};z.apply(this,de).then(function(Ie){process.nextTick(we.bind(null,null,Ie))},function(Ie){process.nextTick(le.bind(null,Ie,we))})}return Object.setPrototypeOf(he,Object.getPrototypeOf(z)),Object.defineProperties(he,n(z)),he}e.callbackify=ee}(b5)),b5}var KSe;function L5t(){return KSe||(KSe=1,sC.TextEncoder=typeof TextEncoder<"u"?TextEncoder:ZSe().TextEncoder,sC.TextDecoder=typeof TextDecoder<"u"?TextDecoder:ZSe().TextDecoder),sC}var K5,JSe;function WB(){if(JSe)return K5;JSe=1;const{TextEncoder:e,TextDecoder:t}=L5t(),n=new t,r=a=>n.decode(a),i=new e,o=a=>i.encode(a);function s(a,l){const u=new Uint8Array(l);let f=0;for(const c of a)u.set(c,f),f+=c.length;return u}return K5={decodeText:r,encodeText:o,concat:s},K5}var J5,QSe;function R5t(){if(QSe)return J5;QSe=1;const{encodeText:e}=WB();class t{constructor(r,i,o,s){this.name=r,this.code=i,this.codeBuf=e(this.code),this.alphabet=s,this.codec=o(s)}encode(r){return this.codec.encode(r)}decode(r){for(const i of r)if(this.alphabet&&this.alphabet.indexOf(i)<0)throw new Error(`invalid character '${i}' in '${r}'`);return this.codec.decode(r)}}return J5=t,J5}var Q5,eAe;function F5t(){if(eAe)return Q5;eAe=1;const e=(r,i,o)=>{const s={};for(let d=0;d<i.length;++d)s[i[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*o/8|0);let u=0,f=0,c=0;for(let d=0;d<a;++d){const h=s[r[d]];if(h===void 0)throw new SyntaxError("Invalid character "+r[d]);f=f<<o|h,u+=o,u>=8&&(u-=8,l[c++]=255&f>>u)}if(u>=o||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return l},t=(r,i,o)=>{const s=i[i.length-1]==="=",a=(1<<o)-1;let l="",u=0,f=0;for(let c=0;c<r.length;++c)for(f=f<<8|r[c],u+=8;u>o;)u-=o,l+=i[a&f>>u];if(u&&(l+=i[a&f<<o-u]),s)for(;l.length*o&7;)l+="=";return l};return Q5={rfc4648:r=>i=>({encode(o){return t(o,i,r)},decode(o){return e(o,i,r)}})},Q5}var eM,tAe;function M5t(){if(tAe)return eM;tAe=1;const e=a5t(),t=R5t(),{rfc4648:n}=F5t(),{decodeText:r,encodeText:i}=WB(),s=[["identity","\0",()=>({encode:r,decode:i}),""],["base2","0",n(1),"01"],["base8","7",n(3),"01234567"],["base10","9",e,"0123456789"],["base16","f",n(4),"0123456789abcdef"],["base16upper","F",n(4),"0123456789ABCDEF"],["base32hex","v",n(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",n(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",n(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",n(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",n(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",e,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",e,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=s.reduce((u,f)=>(u[f[0]]=new t(f[0],f[1],f[2],f[3]),u),{}),l=s.reduce((u,f)=>(u[f[1]]=a[f[0]],u),{});return eM={names:a,codes:l},eM}var nAe;function O5t(){return nAe||(nAe=1,function(e,t){const n=M5t(),{encodeText:r,decodeText:i,concat:o}=WB();function s(h,p){if(!p)throw new Error("requires an encoded Uint8Array");const{name:m,codeBuf:b}=c(h);return f(m,p),o([b,p],b.length+p.length)}function a(h,p){const m=c(h),b=r(m.encode(p));return o([m.codeBuf,b],m.codeBuf.length+b.length)}function l(h){h instanceof Uint8Array&&(h=i(h));const p=h[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(p)&&(h=h.toLowerCase()),c(h[0]).decode(h.substring(1))}function u(h){if(h instanceof Uint8Array&&(h=i(h)),Object.prototype.toString.call(h)!=="[object String]")return!1;try{return c(h[0]).name}catch{return!1}}function f(h,p){c(h).decode(i(p))}function c(h){if(Object.prototype.hasOwnProperty.call(n.names,h))return n.names[h];if(Object.prototype.hasOwnProperty.call(n.codes,h))return n.codes[h];throw new Error(`Unsupported encoding: ${h}`)}function d(h){return h instanceof Uint8Array&&(h=i(h)),c(h[0])}t=e.exports=s,t.encode=a,t.decode=l,t.isEncoded=u,t.encoding=c,t.encodingFromData=d,t.names=Object.freeze(n.names),t.codes=Object.freeze(n.codes)}(oC,oC.exports)),oC.exports}var tM,rAe;function $5t(){if(rAe)return tM;rAe=1,tM=i;var e=128,t=127,n=~t,r=Math.pow(2,31);function i(o,s,a){if(Number.MAX_SAFE_INTEGER&&o>Number.MAX_SAFE_INTEGER)throw i.bytes=0,new RangeError("Could not encode varint");s=s||[],a=a||0;for(var l=a;o>=r;)s[a++]=o&255|e,o/=128;for(;o&n;)s[a++]=o&255|e,o>>>=7;return s[a]=o|0,i.bytes=a-l+1,s}return tM}var nM,iAe;function I5t(){if(iAe)return nM;iAe=1,nM=n;var e=128,t=127;function n(r,s){var o=0,s=s||0,a=0,l=s,u,f=r.length;do{if(l>=f||a>49)throw n.bytes=0,new RangeError("Could not decode varint");u=r[l++],o+=a<28?(u&t)<<a:(u&t)*Math.pow(2,a),a+=7}while(u>=e);return n.bytes=l-s,o}return nM}var rM,oAe;function P5t(){if(oAe)return rM;oAe=1;var e=Math.pow(2,7),t=Math.pow(2,14),n=Math.pow(2,21),r=Math.pow(2,28),i=Math.pow(2,35),o=Math.pow(2,42),s=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return rM=function(u){return u<e?1:u<t?2:u<n?3:u<r?4:u<i?5:u<o?6:u<s?7:u<a?8:u<l?9:10},rM}var iM,sAe;function N5t(){return sAe||(sAe=1,iM={encode:$5t(),decode:I5t(),encodingLength:P5t()}),iM}var oM,aAe;function B5t(){return aAe||(aAe=1,oM={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),oM}function z5t(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,b=0,y=0,v=p.length;y!==v&&p[y]===0;)y++,m++;for(var w=(v-y)*f+1>>>0,E=new Uint8Array(w);y!==v;){for(var A=p[y],T=0,D=w-1;(A!==0||T<b)&&D!==-1;D--,T++)A+=256*E[D]>>>0,E[D]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");b=T,y++}for(var k=w-b;k!==w&&E[k]===0;)k++;for(var R=l.repeat(m);k<w;++k)R+=e.charAt(E[k]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var b=0,y=0;p[m]===l;)b++,m++;for(var v=(p.length-m)*u+1>>>0,w=new Uint8Array(v);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var A=0,T=v-1;(E!==0||A<y)&&T!==-1;T--,A++)E+=a*w[T]>>>0,w[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=A,m++}if(p[m]!==" "){for(var D=v-y;D!==v&&w[D]===0;)D++;for(var k=new Uint8Array(b+(v-D)),R=b;D!==v;)k[R++]=w[D++];return k}}}function h(p){var m=d(p);if(m)return m;throw new Error(`Non-${t} character`)}return{encode:c,decodeUnsafe:d,decode:h}}var j5t=z5t,U5t=j5t;const nPe=new Uint8Array(0),q5t=e=>e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),""),H5t=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map(n=>parseInt(n,16))):nPe},rPe=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},V0=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},G5t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),iPe=e=>new TextEncoder().encode(e),oPe=e=>new TextDecoder().decode(e),V5t=Object.freeze(Object.defineProperty({__proto__:null,coerce:V0,empty:nPe,equals:rPe,fromHex:H5t,fromString:iPe,isBinary:G5t,toHex:q5t,toString:oPe},Symbol.toStringTag,{value:"Module"}));class W5t{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Y5t{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return sPe(this,t)}}class X5t{constructor(t){this.decoders=t}or(t){return sPe(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const sPe=(e,t)=>new X5t({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Z5t{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new W5t(t,n,r),this.decoder=new Y5t(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const LR=({name:e,prefix:t,encode:n,decode:r})=>new Z5t(e,t,n,r),uS=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=U5t(n,t);return LR({prefix:e,name:t,encode:r,decode:o=>V0(i(o))})},K5t=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let a=0,l=0,u=0;for(let f=0;f<o;++f){const c=i[e[f]];if(c===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|c,a+=n,a>=8&&(a-=8,s[u++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return s},J5t=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,a=0;for(let l=0;l<e.length;++l)for(a=a<<8|e[l],s+=8;s>n;)s-=n,o+=t[i&a>>s];if(s&&(o+=t[i&a<<n-s]),r)for(;o.length*n&7;)o+="=";return o},ca=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>LR({prefix:t,name:e,encode(i){return J5t(i,r,n)},decode(i){return K5t(i,r,n,e)}}),Q5t=LR({prefix:"\0",name:"identity",encode:e=>oPe(e),decode:e=>iPe(e)}),eMt=Object.freeze(Object.defineProperty({__proto__:null,identity:Q5t},Symbol.toStringTag,{value:"Module"})),tMt=ca({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),nMt=Object.freeze(Object.defineProperty({__proto__:null,base2:tMt},Symbol.toStringTag,{value:"Module"})),rMt=ca({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),iMt=Object.freeze(Object.defineProperty({__proto__:null,base8:rMt},Symbol.toStringTag,{value:"Module"})),oMt=uS({prefix:"9",name:"base10",alphabet:"0123456789"}),sMt=Object.freeze(Object.defineProperty({__proto__:null,base10:oMt},Symbol.toStringTag,{value:"Module"})),aMt=ca({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lMt=ca({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),uMt=Object.freeze(Object.defineProperty({__proto__:null,base16:aMt,base16upper:lMt},Symbol.toStringTag,{value:"Module"})),B2=ca({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cMt=ca({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fMt=ca({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dMt=ca({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hMt=ca({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pMt=ca({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gMt=ca({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mMt=ca({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yMt=ca({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bMt=Object.freeze(Object.defineProperty({__proto__:null,base32:B2,base32hex:hMt,base32hexpad:gMt,base32hexpadupper:mMt,base32hexupper:pMt,base32pad:fMt,base32padupper:dMt,base32upper:cMt,base32z:yMt},Symbol.toStringTag,{value:"Module"})),vMt=uS({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),xMt=uS({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),wMt=Object.freeze(Object.defineProperty({__proto__:null,base36:vMt,base36upper:xMt},Symbol.toStringTag,{value:"Module"})),Fd=uS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_Mt=uS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),EMt=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Fd,base58flickr:_Mt},Symbol.toStringTag,{value:"Module"})),SMt=ca({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),AMt=ca({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),CMt=ca({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kMt=ca({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),TMt=Object.freeze(Object.defineProperty({__proto__:null,base64:SMt,base64pad:AMt,base64url:CMt,base64urlpad:kMt},Symbol.toStringTag,{value:"Module"})),aPe=Array.from(""),DMt=aPe.reduce((e,t,n)=>(e[n]=t,e),[]),LMt=aPe.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function RMt(e){return e.reduce((t,n)=>(t+=DMt[n],t),"")}function FMt(e){const t=[];for(const n of e){const r=LMt[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const MMt=LR({prefix:"",name:"base256emoji",encode:RMt,decode:FMt}),OMt=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:MMt},Symbol.toStringTag,{value:"Module"}));var $Mt=lPe,lAe=128,IMt=127,PMt=~IMt,NMt=Math.pow(2,31);function lPe(e,t,n){t=t||[],n=n||0;for(var r=n;e>=NMt;)t[n++]=e&255|lAe,e/=128;for(;e&PMt;)t[n++]=e&255|lAe,e>>>=7;return t[n]=e|0,lPe.bytes=n-r+1,t}var BMt=U8,zMt=128,uAe=127;function U8(e,r){var n=0,r=r||0,i=0,o=r,s,a=e.length;do{if(o>=a)throw U8.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&uAe)<<i:(s&uAe)*Math.pow(2,i),i+=7}while(s>=zMt);return U8.bytes=o-r,n}var jMt=Math.pow(2,7),UMt=Math.pow(2,14),qMt=Math.pow(2,21),HMt=Math.pow(2,28),GMt=Math.pow(2,35),VMt=Math.pow(2,42),WMt=Math.pow(2,49),YMt=Math.pow(2,56),XMt=Math.pow(2,63),ZMt=function(e){return e<jMt?1:e<UMt?2:e<qMt?3:e<HMt?4:e<GMt?5:e<VMt?6:e<WMt?7:e<YMt?8:e<XMt?9:10},KMt={encode:$Mt,decode:BMt,encodingLength:ZMt},pT=KMt;const gT=(e,t=0)=>[pT.decode(e,t),pT.decode.bytes],F_=(e,t,n=0)=>(pT.encode(e,t,n),t),M_=e=>pT.encodingLength(e),JMt=Object.freeze(Object.defineProperty({__proto__:null,decode:gT,encodeTo:F_,encodingLength:M_},Symbol.toStringTag,{value:"Module"})),O_=(e,t)=>{const n=t.byteLength,r=M_(e),i=r+M_(n),o=new Uint8Array(i+n);return F_(e,o,0),F_(n,o,r),o.set(t,i),new RR(e,n,t,o)},uPe=e=>{const t=V0(e),[n,r]=gT(t),[i,o]=gT(t.subarray(r)),s=t.subarray(r+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new RR(n,i,s,t)},cPe=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&rPe(e.bytes,t.bytes);class RR{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const QMt=Object.freeze(Object.defineProperty({__proto__:null,Digest:RR,create:O_,decode:uPe,equals:cPe},Symbol.toStringTag,{value:"Module"})),YB=({name:e,code:t,encode:n})=>new fPe(e,t,n);class fPe{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?O_(this.code,n):n.then(r=>O_(this.code,r))}else throw Error("Unknown type, must be binary type")}}const eOt=Object.freeze(Object.defineProperty({__proto__:null,Hasher:fPe,from:YB},Symbol.toStringTag,{value:"Module"})),dPe=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),tOt=YB({name:"sha2-256",code:18,encode:dPe("SHA-256")}),nOt=YB({name:"sha2-512",code:19,encode:dPe("SHA-512")}),rOt=Object.freeze(Object.defineProperty({__proto__:null,sha256:tOt,sha512:nOt},Symbol.toStringTag,{value:"Module"})),hPe=0,iOt="identity",pPe=V0,oOt=e=>O_(hPe,pPe(e)),sOt={code:hPe,name:iOt,encode:pPe,digest:oOt},aOt=Object.freeze(Object.defineProperty({__proto__:null,identity:sOt},Symbol.toStringTag,{value:"Module"})),lOt="raw",uOt=85,cOt=e=>V0(e),fOt=e=>V0(e),dOt=Object.freeze(Object.defineProperty({__proto__:null,code:uOt,decode:fOt,encode:cOt,name:lOt},Symbol.toStringTag,{value:"Module"})),hOt=new TextEncoder,pOt=new TextDecoder,gOt="json",mOt=512,yOt=e=>hOt.encode(JSON.stringify(e)),bOt=e=>JSON.parse(pOt.decode(e)),vOt=Object.freeze(Object.defineProperty({__proto__:null,code:mOt,decode:bOt,encode:yOt,name:gOt},Symbol.toStringTag,{value:"Module"}));class ba{constructor(t,n,r,i){this.code=n,this.version=t,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:uC,byteLength:uC,code:lC,version:lC,multihash:lC,bytes:lC,_baseCache:uC,asCID:uC})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:n}=this;if(t!==Fw)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==EOt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ba.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=O_(t,n);return ba.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&cPe(this.multihash,t.multihash)}toString(t){const{bytes:n,version:r,_baseCache:i}=this;switch(r){case 0:return wOt(n,i,t||Fd.encoder);default:return _Ot(n,i,t||B2.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return AOt(/^0\.0/,COt),!!(t&&(t[fAe]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof ba)return t;if(t!=null&&t.asCID===t){const{version:n,code:r,multihash:i,bytes:o}=t;return new ba(n,r,i,o||cAe(n,r,i.bytes))}else if(t!=null&&t[fAe]===!0){const{version:n,multihash:r,code:i}=t,o=uPe(r);return ba.create(n,i,o)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(n!==Fw)throw new Error(`Version 0 CID must use dag-pb (code: ${Fw}) block encoding`);return new ba(t,n,r,r.bytes)}case 1:{const i=cAe(t,n,r.bytes);return new ba(t,n,r,i)}default:throw new Error("Invalid version")}}static createV0(t){return ba.create(0,Fw,t)}static createV1(t,n){return ba.create(1,t,n)}static decode(t){const[n,r]=ba.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=ba.inspectBytes(t),r=n.size-n.multihashSize,i=V0(t.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");const o=i.subarray(n.multihashSize-n.digestSize),s=new RR(n.multihashCode,n.digestSize,o,i);return[n.version===0?ba.createV0(s):ba.createV1(n.codec,s),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[c,d]=gT(t.subarray(n));return n+=d,c};let i=r(),o=Fw;if(i===18?(i=0,n=0):i===1&&(o=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const s=n,a=r(),l=r(),u=n+l,f=u-s;return{version:i,codec:o,multihashCode:a,digestSize:l,multihashSize:f,size:u}}static parse(t,n){const[r,i]=xOt(t,n),o=ba.decode(i);return o._baseCache.set(r,t),o}}const xOt=(e,t)=>{switch(e[0]){case"Q":{const n=t||Fd;return[Fd.prefix,n.decode(`${Fd.prefix}${e}`)]}case Fd.prefix:{const n=t||Fd;return[Fd.prefix,n.decode(e)]}case B2.prefix:{const n=t||B2;return[B2.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},wOt=(e,t,n)=>{const{prefix:r}=n;if(r!==Fd.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=t.get(r);if(i==null){const o=n.encode(e).slice(1);return t.set(r,o),o}else return i},_Ot=(e,t,n)=>{const{prefix:r}=n,i=t.get(r);if(i==null){const o=n.encode(e);return t.set(r,o),o}else return i},Fw=112,EOt=18,cAe=(e,t,n)=>{const r=M_(e),i=r+M_(t),o=new Uint8Array(i+n.byteLength);return F_(e,o,0),F_(t,o,r),o.set(n,i),o},fAe=Symbol.for("@ipld/js-cid/CID"),lC={writable:!1,configurable:!1,enumerable:!0},uC={writable:!1,enumerable:!1,configurable:!1},SOt="0.0.0-dev",AOt=(e,t)=>{if(e.test(SOt))console.warn(t);else throw new Error(t)},COt=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,kOt={...eMt,...nMt,...iMt,...sMt,...uMt,...bMt,...wMt,...EMt,...TMt,...OMt},TOt={...rOt,...aOt},DOt={raw:dOt,json:vOt},LOt=Object.freeze(Object.defineProperty({__proto__:null,CID:ba,bases:kOt,bytes:V5t,codecs:DOt,digest:QMt,hasher:eOt,hashes:TOt,varint:JMt},Symbol.toStringTag,{value:"Module"})),ROt=hCe(LOt);var sM,dAe;function gPe(){if(dAe)return sM;dAe=1;const{bases:e}=ROt;function t(o,s,a,l){return{name:o,prefix:s,encoder:{name:o,prefix:s,encode:a},decoder:{decode:l}}}const n=t("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),r=t("ascii","a",o=>{let s="a";for(let a=0;a<o.length;a++)s+=String.fromCharCode(o[a]);return s},o=>{o=o.substring(1);const s=new Uint8Array(o.length);for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return s});return sM={utf8:n,"utf-8":n,hex:e.base16,latin1:r,ascii:r,binary:r,...e},sM}var aM,hAe;function FOt(){if(hAe)return aM;hAe=1;const e=gPe();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.encoder.encode(n).substring(1)}return aM=t,aM}var lM,pAe;function MOt(){if(pAe)return lM;pAe=1;const e=gPe();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.decoder.decode(`${i.prefix}${n}`)}return lM=t,lM}var uM,gAe;function OOt(){if(gAe)return uM;gAe=1;function e(t,n){n||(n=t.reduce((o,s)=>o+s.length,0));const r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.length;return r}return uM=e,uM}var cM,mAe;function $Ot(){if(mAe)return cM;mAe=1;const e=O5t(),t=N5t(),{names:n}=B5t(),r=FOt(),i=MOt(),o=OOt(),s={};for(const v in n){const w=v;s[n[w]]=w}function a(v){if(!(v instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(v,"base16")}function l(v){return i(v,"base16")}function u(v){if(!(v instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(e.encode("base58btc",v)).slice(1)}function f(v){const w=v instanceof Uint8Array?r(v):v;return e.decode("z"+w)}function c(v){if(!(v instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(v.length<2)throw new Error("multihash too short. must be > 2 bytes.");const w=t.decode(v);if(!m(w))throw new Error(`multihash unknown function code: 0x${w.toString(16)}`);v=v.slice(t.decode.bytes);const E=t.decode(v);if(E<0)throw new Error(`multihash invalid length: ${E}`);if(v=v.slice(t.decode.bytes),v.length!==E)throw new Error(`multihash length inconsistent: 0x${r(v,"base16")}`);return{code:w,name:s[w],length:E,digest:v}}function d(v,w,E){if(!v||w===void 0)throw new Error("multihash encode requires at least two args: digest, code");const A=h(w);if(!(v instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(E==null&&(E=v.length),E&&v.length!==E)throw new Error("digest length should be equal to specified length.");const T=t.encode(A),D=t.encode(E);return o([T,D,v],T.length+D.length+v.length)}function h(v){let w=v;if(typeof v=="string"){if(n[v]===void 0)throw new Error(`Unrecognized hash function named: ${v}`);w=n[v]}if(typeof w!="number")throw new Error(`Hash function code should be a number. Got: ${w}`);if(s[w]===void 0&&!p(w))throw new Error(`Unrecognized function code: ${w}`);return w}function p(v){return v>0&&v<16}function m(v){return!!(p(v)||s[v])}function b(v){c(v)}function y(v){return b(v),v.subarray(0,2)}return cM={names:n,codes:Object.freeze(s),toHexString:a,fromHexString:l,toB58String:u,fromB58String:f,decode:c,encode:d,coerceCode:h,isAppCode:p,validate:b,prefix:y,isValidCode:m},cM}var fM,yAe;function XB(){if(yAe)return fM;yAe=1;const e=aS(),t=_v(),n={array(r,i=!1,o=""){return e.toList(r,i,s=>n.format(s,o))},object(r){return e.toObject(r,i=>n.format(i))},null(r=null){return r===null&&(r=e.t("n/a")),e.toNothing(r)},number(r,i=""){return typeof r!="number"&&(r=parseFloat(r)),e.unit(t.numberFormatter.format(r),i)},string(r,i=""){return e.unit(e.e(r).replace(/(\r\n|\r|\n){2,}/g,"<br>"),i)},boolean(r){return r?"":""},format(r,i=""){return typeof r=="boolean"?n.boolean(r):typeof r=="number"?n.number(r,i):typeof r=="string"?n.string(r,i):Array.isArray(r)?n.array(r,i):e.isObject(r)?n.object(r):n.null()}};return fM=n,fM}const IOt="Afar",POt="Abkhazian",NOt="Afrikaans",BOt="Akan",zOt="Amharic",jOt="Aragonese",UOt="Arabic",qOt="Assamese",HOt="Avar",GOt="Aymara",VOt="Azerbaijani",WOt="Bashkir",YOt="Belarusian",XOt="Bulgarian",ZOt="Bihari",KOt="Bislama",JOt="Bambara",QOt="Bengali",e6t="Tibetan",t6t="Breton",n6t="Bosnian",r6t="Catalan",i6t="Chechen",o6t="Chamorro",s6t="Corsican",a6t="Cree",l6t="Czech",u6t="Old Bulgarian",c6t="Chuvash",f6t="Welsh",d6t="Danish",h6t="German",p6t="Divehi",g6t="Dzongkha",m6t="Ewe",y6t="Greek",b6t="English",v6t="Esperanto",x6t="Spanish",w6t="Estonian",_6t="Basque",E6t="Persian",S6t="Peul",A6t="Finnish",C6t="Fijian",k6t="Faroese",T6t="French",D6t="West Frisian",L6t="Irish",R6t="Scottish Gaelic",F6t="Galician",M6t="Guarani",O6t="Gujarati",$6t="Manx",I6t="Hausa",P6t="Hebrew",N6t="Hindi",B6t="Hiri Motu",z6t="Croatian",j6t="Haitian",U6t="Hungarian",q6t="Armenian",H6t="Herero",G6t="Interlingua",V6t="Indonesian",W6t="Interlingue",Y6t="Igbo",X6t="Sichuan Yi",Z6t="Inupiak",K6t="Ido",J6t="Icelandic",Q6t="Italian",e8t="Inuktitut",t8t="Japanese",n8t="Javanese",r8t="Georgian",i8t="Kongo",o8t="Kikuyu",s8t="Kuanyama",a8t="Kazakh",l8t="Greenlandic",u8t="Cambodian",c8t="Kannada",f8t="Korean",d8t="Kanuri",h8t="Kashmiri",p8t="Kurdish",g8t="Komi",m8t="Cornish",y8t="Kirghiz",b8t="Latin",v8t="Luxembourgish",x8t="Ganda",w8t="Limburgian",_8t="Lingala",E8t="Laotian",S8t="Lithuanian",A8t="Latvian",C8t="Malagasy",k8t="Marshallese",T8t="Maori",D8t="Macedonian",L8t="Malayalam",R8t="Mongolian",F8t="Moldovan",M8t="Marathi",O8t="Malay",$8t="Maltese",I8t="Burmese",P8t="Nauruan",N8t="North Ndebele",B8t="Nepali",z8t="Ndonga",j8t="Dutch",U8t="Norwegian Nynorsk",q8t="Norwegian",H8t="South Ndebele",G8t="Navajo",V8t="Chichewa",W8t="Occitan",Y8t="Ojibwa",X8t="Oromo",Z8t="Oriya",K8t="Ossetian",J8t="Punjabi",Q8t="Pali",e$t="Polish",t$t="Pashto",n$t="Portuguese",r$t="Quechua",i$t="Raeto Romance",o$t="Kirundi",s$t="Romanian",a$t="Russian",l$t="Rwandi",u$t="Sanskrit",c$t="Sardinian",f$t="Sindhi",d$t="Sango",h$t="Serbo-Croatian",p$t="Sinhalese",g$t="Slovak",m$t="Slovenian",y$t="Samoan",b$t="Shona",v$t="Somalia",x$t="Albanian",w$t="Serbian",_$t="Swati",E$t="Southern Sotho",S$t="Sundanese",A$t="Swedish",C$t="Swahili",k$t="Tamil",T$t="Telugu",D$t="Tajik",L$t="Thai",R$t="Tigrinya",F$t="Turkmen",M$t="Tagalog",O$t="Tswana",$$t="Tonga",I$t="Turkish",P$t="Tsonga",N$t="Tatar",B$t="Twi",z$t="Tahitian",j$t="Uyghur",U$t="Ukrainian",q$t="Urdu",H$t="Venda",G$t="Vietnamese",V$t="Volapk",W$t="Walloon",Y$t="Wolof",X$t="Xhosa",Z$t="Yiddish",K$t="Yoruba",J$t="Zhuang",Q$t="Chinese",eIt="Zulu",tIt={aa:IOt,ab:POt,af:NOt,ak:BOt,am:zOt,an:jOt,ar:UOt,as:qOt,av:HOt,ay:GOt,az:VOt,ba:WOt,be:YOt,bg:XOt,bh:ZOt,bi:KOt,bm:JOt,bn:QOt,bo:e6t,br:t6t,bs:n6t,ca:r6t,ce:i6t,ch:o6t,co:s6t,cr:a6t,cs:l6t,cu:u6t,cv:c6t,cy:f6t,da:d6t,de:h6t,dv:p6t,dz:g6t,ee:m6t,el:y6t,en:b6t,eo:v6t,es:x6t,et:w6t,eu:_6t,fa:E6t,ff:S6t,fi:A6t,fj:C6t,fo:k6t,fr:T6t,fy:D6t,ga:L6t,gd:R6t,gl:F6t,gn:M6t,gu:O6t,gv:$6t,ha:I6t,he:P6t,hi:N6t,ho:B6t,hr:z6t,ht:j6t,hu:U6t,hy:q6t,hz:H6t,ia:G6t,id:V6t,ie:W6t,ig:Y6t,ii:X6t,ik:Z6t,io:K6t,is:J6t,it:Q6t,iu:e8t,ja:t8t,jv:n8t,ka:r8t,kg:i8t,ki:o8t,kj:s8t,kk:a8t,kl:l8t,km:u8t,kn:c8t,ko:f8t,kr:d8t,ks:h8t,ku:p8t,kv:g8t,kw:m8t,ky:y8t,la:b8t,lb:v8t,lg:x8t,li:w8t,ln:_8t,lo:E8t,lt:S8t,lv:A8t,mg:C8t,mh:k8t,mi:T8t,mk:D8t,ml:L8t,mn:R8t,mo:F8t,mr:M8t,ms:O8t,mt:$8t,my:I8t,na:P8t,nd:N8t,ne:B8t,ng:z8t,nl:j8t,nn:U8t,no:q8t,nr:H8t,nv:G8t,ny:V8t,oc:W8t,oj:Y8t,om:X8t,or:Z8t,os:K8t,pa:J8t,pi:Q8t,pl:e$t,ps:t$t,pt:n$t,qu:r$t,rm:i$t,rn:o$t,ro:s$t,ru:a$t,rw:l$t,sa:u$t,sc:c$t,sd:f$t,sg:d$t,sh:h$t,si:p$t,sk:g$t,sl:m$t,sm:y$t,sn:b$t,so:v$t,sq:x$t,sr:w$t,ss:_$t,st:E$t,su:S$t,sv:A$t,sw:C$t,ta:k$t,te:T$t,tg:D$t,th:L$t,ti:R$t,tk:F$t,tl:M$t,tn:O$t,to:$$t,tr:I$t,ts:P$t,tt:N$t,tw:B$t,ty:z$t,ug:j$t,uk:U$t,ur:q$t,ve:H$t,vi:G$t,vo:V$t,wa:W$t,wo:Y$t,xh:X$t,yi:Z$t,yo:K$t,za:J$t,zh:Q$t,zu:eIt};var dM,bAe;function mPe(){if(bAe)return dM;bAe=1;const e=aS(),t=XB(),n=_v(),r=jB(),i={allowHtmlInCommonMark:!1,formatUrl(o,s,a={},l=null,u=null){let f=e.isObject(u)&&typeof u=="string"?u.title:o;return e.toLink(o,f,u.rel||"")},formatLink(o){return e.toList(o,!1,s=>e.toLink(s.href,s.title,s.rel))},formatMediaType(o,s,a={}){return e.e(e.t(i._formatMediaType(o,s,a)))},_formatMediaType(o,s,a={}){let l=!!a.shorten;const u=r.getDependency("content-type");if(!u)return l?"":e.e(o);let f;try{f=u.parse(o)}catch(c){return console.warn(c),l?"":e.e(o)}switch(f.type){case"image/tiff":return f.parameters.application==="geotiff"?f.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB 2";case"application/grib":return`GRIB ${f.parameters.edition||""}`.trim();case"application/bufr":return`BUFR ${f.parameters.edition||""}`.trim();case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";case"application/x-filegdb":return l?"Geodatabase":"Esri File Geodatabase";case"application/vnd.nitf":return l?"NITF":"National Imagery Transmission Format";case"application/3dtiles+json":return"3D Tiles";default:{let[c,d]=f.type.split("/");if(d=e.formatKey(d.replace(/^(vnd|x)[.+-]/,"")),l)return d;switch(c){case"audio":return`${d} audio`;case"image":return`${d} image`;case"font":return"Font";case"model":return`${d} 3D model`;case"video":return`${d} video`;case"text":case"application":return d;default:return o}}}},formatTimestamp(o){if(typeof o=="string")try{return n.dateTimeFormatter.format(new Date(o))}catch{}return t.null()},formatPercent0to1(o,s,a={}){return t.number(o*100,a.unit)},formatDate(o){if(typeof o=="string")try{return n.dateFormatter.format(new Date(o))}catch{}return t.null()},formatDuration(o){if(typeof o=="string"){const s=r.getDependency("@musement/iso-duration");if(!s)return e.e(o);const{isoDuration:a,en:l}=s;a.setLocales({en:l},{fallbackLocale:"en"});let u=a(o).humanize("en");return u.length===0?e.e(e.t("none")):e.e(u)}return t.null()},formatLanguageCode(o){if(Array.isArray(o))return e.toList(o,!0,i.formatLanguageCode,!1);if(typeof o!="string"||o.length<2)return t.null();const s=tIt,[a,...l]=o.split("-");if(a in s){const u=s[a];return l.length>0?e.e(e.t(`${u} (${l.join(" ")})`)):e.e(e.t(u))}return e.e(e.t(o))},formatLicense(o,s,a={},l=null){if(typeof o!="string"||o.length===0)return t.null();if(o!=="other"&&o!=="proprietary"&&o!=="various"&&o.match(/^[\w\.\-]+$/i))return e.toLink(`https://spdx.org/licenses/${o}.html`,o,"license");let u=Array.isArray(l.links)?l.links.filter(f=>e.isObject(f)&&typeof f.href=="string"&&f.rel==="license"):[];return u.length>0?e.toList(u,!1,f=>e.toLink(f.href,f.title||o,"license")):t.string(o)},formatProviders(o){return e.toList(o,!1,s=>{let a=s.name,l="",u="";return typeof s.url=="string"&&s.url.length>0&&(a=e.toLink(s.url,a)),Array.isArray(s.roles)&&s.roles.length>0&&(l=s.roles.map(f=>t.format(f)).join(", "),l=` (<em>${l}</em>)`),typeof s.description=="string"&&s.description.length>0&&(u=i.formatCommonMark(s.description)),`${a}${l}${u}`})},formatCommonMark(o){if(typeof o!="string"||o.length===0)return t.null();const s=r.getDependency("commonmark");let a;if(s){let l=new s.Parser;a=new s.HtmlRenderer({safe:!i.allowHtmlInCommonMark,smart:!0}).render(l.parse(o))}else i.allowHtmlInCommonMark?a=o:a=e.e(o);return`<div class="description">${a}</div>`},formatSoftware(o){if(!e.isObject(o))return t.null();let s=[];for(let a in o){let l=o[a];typeof l=="string"&&l.length>0||typeof l=="number"?s.push(`${a} (${l})`):s.push(a)}return e.toList(s,!0,null,!1)},formatDOI(o){return o=t.format(o),e.toLink(`http://doi.org/${o}`,o)},formatCRS(o){return e.toList(o,!1,s=>{if(typeof s=="string"){let a=s.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return e.toLink(s,a)}return t.format(s)})},formatCrsCode(o){if(typeof o=="string"){const[s,a]=o.split(":",2);switch(s.toUpperCase()){case"EPSG":case"ESRI":case"IAU_2015":case"IGNF":case"MKG":case"OGC":return e.toLink(`https://spatialreference.org/ref/${s.toLowerCase()}/${a}/`,o);default:return t.string(o)}}return t.null()},formatEPSG(o){return typeof o=="number"?i.formatCrsCode(`EPSG:${o}`):typeof o=="string"?i.formatCrsCode(o):t.null()},formatExtent(o,s,a={}){return!Array.isArray(o)||o.length<2?t.null():o[0]===o[1]?t.format(o[0],a.unit):o[0]===null?`< ${t.format(o[1],a.unit)}`:o[1]===null?`> ${t.format(o[0],a.unit)}`:o.map(l=>t.format(l,a.unit)).join("  ")},formatHexColor(o){return typeof o!="string"||!o.match(/^#?[\dA-F]{3,8}$/i)?t.null():(o.startsWith("#")&&(o=o.substring(1)),`<div class="color" style="background-color: #${o}"><code class="color-code">#${o}</code></div>`)},formatPROJJSON(o){return e.isObject(o)?e.isObject(o.id)&&o.id.authority==="EPSG"&&typeof o.code=="number"&&o.code>0?"EPSG "+i.formatEPSG(o):typeof o.name=="string"?t.string(o.name):t.object(o):t.null()},formatTemporalExtent(o,s,a={}){if(!Array.isArray(o)||o.length!==2)return t.null();o=o.map(l=>{try{return l?new Date(l):null}catch{return null}});try{const[l,u]=o;if(l||u){const f=a.shorten?n.dateFormatter:n.dateTimeFormatter;return l?u?f.formatRange(l,u):e.t("{0} until present",[f.format(l)]):e.t("Until {0}",[f.format(u)])}}catch{}return t.null()},formatTemporalExtents(o,s,a={}){let l=(u,f)=>u[0]===null?-1:n.collator.compare(u[0],f[0]);return e.toList(o,l,u=>i.formatTemporalExtent(u,s,a))},formatWKT2(o){if(typeof o!="string")return t.null();let s=-1,a;try{a=o.replace(/([A-Z]+)\[|\]/ig,(l,u)=>l==="]"?(s--,l):(s++,`
${"  ".repeat(s)}${u}[`))}catch{a=o}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(o){if(typeof o!="number")return t.format(o);var s=o==0?0:Math.floor(Math.log(o)/Math.log(1024));return e.unit((o/Math.pow(1024,s)).toFixed(2)*1,i.fileSizeUnits[s])},formatChecksum(o){if(typeof o!="string")return t.null();const s=r.getDependency("multihashes");if(!s)return e.e(o);try{const a=s.decode(e.hexToUint8(o)),l=e.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${e.e(e.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${e.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return t.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(o){return o==="other"?e.t("non-standard"):typeof o=="string"&&o in i.fileDataTypes?e.abbrev(e.t(o),e.t(i.fileDataTypes[o])):t.null()},formatTransform(o){if(Array.isArray(o)&&o.length%3===0){let s=[];for(let a=0;a<o.length;a=a+3){let l=o.slice(a,a+3);s.push(`[${i.formatCSV(l)}]`)}return s.join("<br>")}else return i.formatCSV(o)},formatShape(o,s,a={}){return Array.isArray(o)?o.map(l=>t.format(l,a.unit)).join("  "):t.format(o,a.unit)},formatCSV(o){if(Array.isArray(o)){let s=o.find(a=>typeof a=="number")!==void 0;return o.map(t.format).join(s?"; ":", ")}else return t.format(o)},formatImage(o,s){let a="",l=null;if(e.isObject(o))l=o.href,a=o.title||"";else if(typeof o=="string")l=o;else return t.format(l);return`<img src="${e.e(l)}" title="${e.e(a)}" class="${e.e(s.replace(":","_"))}">`},formatPhone(o){return e.toLink(`tel:${o}`,o)},formatEmail(o){return e.toLink(`mailto:${o}`,o)},formatConcepts(o){return e.toList(o,!1,s=>{if(!e.isObject(s))return t.format(s);let a="";if(s.title){let l=s.title;s.url&&(l=e.toLink(s.url,s.title)),a+=`<strong>${l}</strong> (<code>${e.e(s.id)}</code>)`}else{let l=s.id;s.url&&(l=e.toLink(s.url,s.id)),a+=`<strong><code>${l}</code></strong>`}return s.description&&(a+=`<br><small>${e.e(s.description)}</small>`),a})},formatAddress(o){return e.toList(o,!1,s=>{if(!e.isObject(s))return t.format(s);let a=Array.isArray(s.deliveryPoint)?s.deliveryPoint.slice(0):[];if(s.postalCode&&s.city){let l=`${s.postalCode} ${s.city}`;s.administrativeArea&&(l+=` (${s.administrativeArea})`),typeof s.country=="string"&&s.country.length>0&&(s.country.length===2&&s.country.toUpperCase()===s.country?(l=s.country+"-"+l,a.push(l)):(a.push(l),a.push(s.country.toUpperCase())))}else s.city&&a.push(s.city),s.administrativeArea&&a.push(s.administrativeArea),s.postalCode&&a.push(s.postalCode),typeof s.country=="string"&&s.country.length>0&&a.push(s.country.toUpperCase());return t.string(a.join(`

`))})},formatGridCode(o){if(typeof o!="string")return t.format(o);let s=function(f,c,d,h){let p=c.length;if(p%2===1)f.push(`Code: ${c}`);else{let m=p/2,b=c.substring(0,m);f.push(`${d}: ${b}`);let y=c.substring(m,p);f.push(`${h}: ${y}`)}},[a,l]=o.split(/-(.*)/),u=[];switch(a){case"MGRS":u.push(e.abbrev(e.t(a),e.t("Military Grid Reference System")));let[,f,c,d,h]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);u.push(`${e.t("UTM Zone")}: ${f}`),u.push(`${e.t("Latitude Band")}: ${c}`),u.push(`${e.t("Square Identifier")}: ${d}`),h&&s(u,h,e.t("Easting"),e.t("Northing"));break;case"MSIN":u.push(e.t("MODIS Sinusoidal Tile Grid")),s(u,l,e.t("Horizontal"),e.t("Vertical"));break;case"WRS1":case"WRS2":let p=a.substring(3,4);u.push(e.abbrev(e.t("WRS-"+p),e.t("Worldwide Reference System "+p))),s(u,l,e.t("Path"),e.t("Row"));break;case"DOQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quadrangle"))),u.push(`${e.t("Quadrangle")}: ${l}`);break;case"DOQQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quarter Quadrangle")));let m=l.substr(0,l.length-2);u.push(`${e.t("Quadrangle")}: ${m}`);let b=l.substr(-2),y=b[0]==="N"?e.t("North"):e.t("South"),v=b[1]==="E"?e.t("East"):e.t("West");u.push(`${e.t("Quarter")}: ${y} ${v}`);break;case"MXRA":u.push(e.t("Maxar ARD Tile Grid"));let[w,E]=l.split(/-(.*)/);w.startsWith("Z")&&(w=w.substring(1)),u.push(`${e.t("UTM Zone")}: ${w}`),u.push(`${e.t("Quadkey")}: ${E}`);break;case"EASE":let[A,T]=l.split("-");if(A==="DGGS"){u.push(e.t("EASE-DGGS"));let[R,M,...B]=T.split(".");if(u.push(`${e.t("Level")}: ${R}`),M.length===6){u.push(`${e.t("Level 0 row cell")}: ${M.substring(0,3)}`),u.push(`${e.t("Level 0 column cell")}: ${M.substring(3,6)}`);for(let K in B){let L=B[K];L.length===2&&(u.push(`${e.t("Fraction of level {i} row cell",{i:K})}: ${L[0]}`),u.push(`${e.t("Fraction of level {i} column cell",{i:K})}: ${L[1]}`))}}break}case"CDEM":let[,D,k]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);u.push(e.t("Copernicus Digital Elevation Model Grid")),u.push(`${e.t("Easting")}: ${k}`),u.push(`${e.t("Northing")}: ${D}`);default:u.push(o)}return u.join("<br>")}};return dM=i,dM}var hM,vAe;function nIt(){if(vAe)return hM;vAe=1;const e=jB(),t=aS(),n=_v(),r=XB(),i=mPe();function o(b,y,v,w,E){let A={};for(let T in y){let D;try{let k=T.split(/:(.*)/);k.length===1&&k.unshift(E);let R=k[0];if(typeof w=="function"&&!w(T,[T]))continue;D=y[T];let M=e.getSpecification(T,v);M.ext&&(R=M.ext);let B=!1;v==="summaries"&&M.listWithKeys&&Array.isArray(D)&&D.length>0&&(D=D[0],B=!0);let K=null,L=[];if(t.isObject(M.items)){let I=D;M.listWithKeys&&(I=Object.values(I));let U=[];Array.isArray(I)?U=t.keysFromListOfObjects(I):t.isObject(I)&&(U=Object.keys(I)),K={},L=M.itemOrder.filter(q=>U.includes(q)),U.forEach(q=>{typeof M.items[q]>"u"?(K[q]={label:t.formatKey(q),explain:q},L.push(q)):(K[q]=Object.assign({},M.items[q]),K[q].label=p(q,M.items[q]))})}let $;if(v==="summaries")if(!B&&t.isObject(D))if(typeof D.minimum<"u"&&typeof D.maximum<"u"){const I=U=>h(U,T,b,y,M,w,[T]);D.minimum===D.maximum?$=I(D.minimum):D.minimum===null?$=`< ${I(D.maximum)}`:D.maximum===null?$=`> ${I(D.minimum)}`:$=`${I(D.minimum)}  ${I(D.maximum)}`}else $=r.object(D);else if(e.externalRenderer&&K){let I=B?Object.assign({},D):D.slice(0);for(let U in I){let q=t.isObject(I[U])?{}:[];for(let Y in K)q[Y]=h(I[U][Y],Y,b,y,K[Y]);I[U]=q}}else Array.isArray(D)?$=t.toList(D,!M.custom&&!M.items,I=>h(I,T,b,y,M)):console.warn(`Invalid summary value: ${D}`);typeof $>"u"&&($=h(D,T,b,y,M,w,[T])),t.isObject(A[R])||(A[R]={extension:R,label:m(R),properties:{}}),A[R].properties[T]={label:p(T,M),value:D,formatted:$,items:K,itemOrder:L,spec:M}}catch(k){console.error(`Field '${T}' with value '${D}' resulted in an error`,k)}}return Object.values(A).sort((T,D)=>n.collator.compare(T.extension,D.extension))}function s(b,y,v=null,w=""){return o(y,b,"assets",v,w)}function a(b,y,v=null,w=""){return o(y,b,"links",v,w)}function l(b,y,v=null,w=""){return o(y,b,"providers",v,w)}function u(b,y=null,v=""){return o(b,b.summaries,"summaries",y,v)}function f(b,y=null,v=""){return o(b,b,"collection",y,v)}function c(b,y=null,v=""){return o(b,b,"catalog",y,v)}function d(b,y=null,v=""){return o(b,b.properties,"metadata",y,v)}function h(b,y,v=null,w=null,E=null,A=null,T=[]){if(t.isObject(E)||(E=e.getSpecification(y)),typeof E.format=="string"){let D=i[`format${E.format}`];return D||console.warn(`Formatter '${E.format}' not available.`),D(b,y,E,v,w)}else{if(typeof E.formatter=="function")return E.formatter(b,y,E,v,w);if(t.isObject(E.mapping)){let D=String(b);return typeof E.mapping[D]<"u"?b=E.mapping[D]:typeof E.mapping[D.toLowerCase()]<"u"?b=E.mapping[D.toLowerCase()]:typeof E.mapping[D.toUpperCase()]<"u"&&(b=E.mapping[D.toUpperCase()]),r.format(t.t(b),E.unit)}else{if(b===null&&E.null)return r.null(E.null);if(Array.isArray(b)){let D=(k,R)=>h(k,y,v,w,E,A,T.concat([R]));return typeof A=="function"&&T.length>0&&(b=b.filter((k,R)=>A(T[0],T.concat([R])))),e.externalRenderer&&(E.custom||E.items)?b.map(D):t.toList(b,!1,D)}else if(t.isObject(b)){let D=R=>t.isObject(E.items)?E.listWithKeys?{items:E.items,itemOrder:E.itemOrder}:E.items[R]:t.isObject(E.properties)?E.properties[R]:{},k=(R,M,B)=>h(R,M,v,B,D(M),A,T.concat([M]));if(e.externalRenderer&&(E.custom||E.items||E.properties)){let R={};for(let M in b)typeof A=="function"&&T.length>0&&!A(T[0],T.concat([M]))||(R[M]=k(b[M],M,b));return R}else{let R=B=>p(B,D(B)),M=E.listWithKeys?[]:E.itemOrder;return t.toObject(b,k,R,M,A,T)}}else return r.format(b,E.unit)}}}function p(b,y=null){if(t.isObject(y)||(y=e.getSpecification(b)),t.isObject(y)&&typeof y.label=="string"){if(typeof y.explain=="string")return y.explain.match(/^https?:\/\//i)?t.toLink(y.explain,t.t(y.label),"about"):t.abbrev(t.t(y.label),t.t(y.explain));if(typeof y.label=="string")return t.t(y.label)}return t.formatKey(b)}function m(b){return p(b,e.getExtension(b))}return hM={format:h,label:p,extension:m,formatCatalog:c,formatCollection:f,formatSummaries:u,formatItemProperties:d,formatAsset:s,formatLink:a,formatProvider:l,formatGrouped:o},hM}var pM,xAe;function rIt(){if(xAe)return pM;xAe=1;const e=jB();return e.importFields(QFt),e.addDependency("@musement/iso-duration",r5t),e.addDependency("content-type",i5t()),e.addDependency("commonmark",s5t()),e.addDependency("multihashes",$Ot()),pM={...nIt(),Fields:e.exportFields(),Registry:e,Helper:aS(),DataTypes:XB(),Formatters:mPe(),I18N:_v()},pM}var yPe=rIt();const gM=oa(yPe);function iIt(e){if(e.type==="Catalog")return gM.formatCatalog(e);if(e.type==="Collection")return gM.formatCollection(e);if(e.type==="Feature")return gM.formatItemProperties(e)}async function oIt(e){const n=await(await fetch(`${e.for}?ts=${Date.now()}`)).json();e.stacInfo=iIt(n),e.dispatchEvent(new CustomEvent("loaded"))}function ym(e,t,n){return VFt(Object.entries(t.stacProperties).filter(([r])=>e==null?void 0:e.includes(r)).reverse().sort(([r],[i])=>(e==null?void 0:e.indexOf(r))>(e==null?void 0:e.indexOf(i))?1:-1),n)}const sIt=`
:host {
  --color-primary-lighter: color-mix(in srgb, var(--primary-color), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
h1 {
  margin-block-start: 0.67em;
  margin-block-end: 0.67em;
  line-height: 1.5;
}
header h1 {
  font-size: 24px;
  color: var(--primary-color);
}
header h2 {
  font-size: 22px;
  color: var(--primary-color);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#body ul {
  padding: 0;
}
section#body > ul:not(.single-property) {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#body li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#body .value li {
  margin-bottom: 0px;    
}
section#body slot:not([name=description]) ul li {
  list-style: none;
}
section#body .colon {
  margin-right: 4px;
}
section#body .label {
  font-weight: bold;
}
section#body ul li,
section#body ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#body ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--primary-color);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a,
footer h1 {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`,aIt=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;function lIt(e=[]){return Qe`
    <section id="body" part="body">
      <ul class=${e.length===1?"single-property":Xr}>
        ${ou(e,([,t])=>Qe`
            <slot name=${t.label.toLowerCase()}>
              <li>
                ${Un(e.length>1,()=>Qe` <span class="label"> ${t.label}</span
                      ><span class="colon">:</span>`)}
                <span class="value">
                  ${Un(t.label.toLowerCase()==="description",()=>Qe`
                      <eox-stacinfo-shadow .content=${t.formatted}>
                      </eox-stacinfo-shadow>
                    `,()=>Qe`${Sc(t.formatted)}`)}
                </span>
              </li>
            </slot>
          `)}
      </ul>
    </section>
  `}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bPe=Symbol.for(""),uIt=e=>{if((e==null?void 0:e.r)===bPe)return e==null?void 0:e._$litStatic$},mT=e=>({_$litStatic$:e,r:bPe}),wAe=new Map,cIt=e=>(t,...n)=>{const r=n.length;let i,o;const s=[],a=[];let l,u=0,f=!1;for(;u<r;){for(l=t[u];u<r&&(o=n[u],(i=uIt(o))!==void 0);)l+=i+t[++u],f=!0;u!==r&&a.push(o),s.push(l),u++}if(u===r&&s.push(t[r]),f){const c=s.join("$$lit$$");(t=wAe.get(c))===void 0&&(s.raw=s,wAe.set(c,t=s)),n=a}return e(t,...n)},vPe=cIt(Qe);function fIt(e=[]){return Qe`
    ${e.length>0?Qe`
          <header part="header">
            <slot name="header">
              ${ou(e,([,t],n)=>vPe`
              <h${mT((n+1).toString())}>${Sc(t.formatted)}</h${mT((n+1).toString())}>
              `)}
            </slot>
          </header>
        `:Xr}
  `}function dIt(e=[]){return Qe`
    <section id="tags" part="tags">
      <ul>
        ${ou(e,([,t])=>Qe`<slot name=${t.label.toLowerCase()}
              ><li>
                <span class="label">${Sc(t.formatted)}</span>
              </li></slot
            >`)}
      </ul>
    </section>
  `}function hIt(e=[]){return Qe`
    ${Un(e.length>0,()=>Qe`
        <section id="featured" part="featured">
          ${ou(e,([,t])=>Qe`
              <details>
                <summary>
                  <slot
                    name="featured-${t.label.toLowerCase()}-summary"
                    class="title"
                  >
                    ${t.label}
                    ${Un(t.length,()=>Qe` <span class="count">${t.length}</span> `)}
                  </slot>
                </summary>
                <div class="featured-container">
                  <slot name="featured-${t.label.toLowerCase()}">
                    ${Un(t.label.toLowerCase()==="description",()=>Qe`
                        <eox-stacinfo-shadow .content=${t.formatted}>
                        </eox-stacinfo-shadow>
                      `,()=>Qe`${Sc(t.formatted)}`)}
                  </slot>
                </div>
              </details>
            `)}
        </section>
      `)}
  `}function pIt(e=[]){return Qe`
    ${Un(e.length>0,()=>Qe`
        <footer part="footer">
          <slot name="footer">
            ${ou(e,([t,n],r)=>vPe`
                  <div class="footer-container">
                    <h${mT((r+1).toString())}>
                      ${Sc(n.label)}
                    </h${mT((r+1).toString())}>
                    <small>${Sc(n.formatted)}</small>
                  </div>
                  ${Un(t==="sci:citation",()=>Qe`
                      <button
                        class="copy icon"
                        @click=${()=>navigator.clipboard.writeText(n.formatted)}
                      >
                        copy
                      </button>
                    `)}
                `)}
          </slot>
        </footer>
      `)}
  `}class gIt extends Zr{static get properties(){return{content:{type:String}}}constructor(){super(),this.content=null}render(){return Qe`<style>
        img,
        video,
        iframe {
          max-width: 100%;
        }
      </style>
      <div>${Sc(this.content)}</div>`}}customElements.define("eox-stacinfo-shadow",gIt);class mIt extends Zr{static get properties(){return{allowHtml:{attribute:"allow-html",type:Boolean},unstyled:{attribute:"unstyled",type:Boolean},for:{attribute:"for",type:String},header:{attribute:!1,type:Array},tags:{attribute:!1,type:Array},body:{attribute:!1,type:Array},featured:{attribute:!1,type:Array},footer:{attribute:!1,type:Array},stacInfo:{attribute:!1,state:!0,type:Array},stacProperties:{attribute:!1,state:!0,type:Array}}}constructor(){super(),this.allowHtml=!1,this.unstyled=!1,this.for="",this.header=[],this.tags=[],this.body=[],this.featured=[],this.footer=[],this.stacInfo=[],this.stacProperties=[]}updated(t){t.has("for")&&oIt(this),t.has("stacInfo")&&(yPe.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0,WFt(this))}render(){return Qe`
      <style>
        :host {
          display: block;
        }
        ${!this.unstyled&&aIt}
        ${!this.unstyled&&sIt}
      </style>
      <slot></slot>
      ${Un(this.stacInfo.length,()=>Qe`
          <!-- Header Component-->
          ${fIt(ym(this.header,this))}
          <main>
            ${ym(this.tags,this).length+ym(this.body,this).length>0?Qe`
                  <!-- Tags Component-->
                  ${dIt(ym(this.tags,this))}

                  <!-- Body Component-->
                  ${lIt(ym(this.body,this))}
                `:Xr}

            <!-- Featured Component-->
            ${hIt(ym(this.featured,this,"featured"))}
          </main>

          <!-- Footer Component-->
          ${pIt(ym(this.footer,this))}
        `,()=>Qe`${Xr}`)}
    `}}customElements.define("eox-stacinfo",mIt);const _Ae={};function yIt(e){let t=_Ae[e];if(t)return t;t=_Ae[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function M1(e,t){typeof t!="string"&&(t=M1.defaultChars);const n=yIt(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let o=0,s=r.length;o<s;o+=3){const a=parseInt(r.slice(o+1,o+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&o+3<s){const l=parseInt(r.slice(o+4,o+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16);if((l&192)===128&&(u&192)===128){const f=a<<12&61440|l<<6&4032|u&63;f<2048||f>=55296&&f<=57343?i+="":i+=String.fromCharCode(f),o+=6;continue}}if((a&248)===240&&o+9<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16),f=parseInt(r.slice(o+10,o+12),16);if((l&192)===128&&(u&192)===128&&(f&192)===128){let c=a<<18&1835008|l<<12&258048|u<<6&4032|f&63;c<65536||c>1114111?i+="":(c-=65536,i+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),o+=9;continue}}i+=""}return i})}M1.defaultChars=";/?:@&=+$,#";M1.componentChars="";const EAe={};function bIt(e){let t=EAe[e];if(t)return t;t=EAe[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function cS(e,t,n){typeof t!="string"&&(n=t,t=cS.defaultChars),typeof n>"u"&&(n=!0);const r=bIt(t);let i="";for(let o=0,s=e.length;o<s;o++){const a=e.charCodeAt(o);if(n&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3))){i+=e.slice(o,o+3),o+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){const l=e.charCodeAt(o+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(e[o]+e[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[o])}return i}cS.defaultChars=";/?:@&=+$,-_.!~*'()#";cS.componentChars="-_.!~*'()";function ZB(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function yT(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const vIt=/^([a-z0-9.+-]+:)/i,xIt=/:[0-9]*$/,wIt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,_It=["<",">",'"',"`"," ","\r",`
`,"	"],EIt=["{","}","|","\\","^","`"].concat(_It),SIt=["'"].concat(EIt),SAe=["%","/","?",";","#"].concat(SIt),AAe=["/","?","#"],AIt=255,CAe=/^[+a-z0-9A-Z_-]{0,63}$/,CIt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kAe={javascript:!0,"javascript:":!0},TAe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function KB(e,t){if(e&&e instanceof yT)return e;const n=new yT;return n.parse(e,t),n}yT.prototype.parse=function(e,t){let n,r,i,o=e;if(o=o.trim(),!t&&e.split("#").length===1){const u=wIt.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=vIt.exec(o);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(t||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&kAe[s])&&(o=o.substr(2),this.slashes=!0)),!kAe[s]&&(i||s&&!TAe[s])){let u=-1;for(let p=0;p<AAe.length;p++)r=o.indexOf(AAe[p]),r!==-1&&(u===-1||r<u)&&(u=r);let f,c;u===-1?c=o.lastIndexOf("@"):c=o.lastIndexOf("@",u),c!==-1&&(f=o.slice(0,c),o=o.slice(c+1),this.auth=f),u=-1;for(let p=0;p<SAe.length;p++)r=o.indexOf(SAe[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=o.length),o[u-1]===":"&&u--;const d=o.slice(0,u);o=o.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let m=0,b=p.length;m<b;m++){const y=p[m];if(y&&!y.match(CAe)){let v="";for(let w=0,E=y.length;w<E;w++)y.charCodeAt(w)>127?v+="x":v+=y[w];if(!v.match(CAe)){const w=p.slice(0,m),E=p.slice(m+1),A=y.match(CIt);A&&(w.push(A[1]),E.unshift(A[2])),E.length&&(o=E.join(".")+o),this.hostname=w.join(".");break}}}}this.hostname.length>AIt&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));const l=o.indexOf("?");return l!==-1&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),TAe[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};yT.prototype.parseHost=function(e){let t=xIt.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const kIt=Object.freeze(Object.defineProperty({__proto__:null,decode:M1,encode:cS,format:ZB,parse:KB},Symbol.toStringTag,{value:"Module"})),xPe=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,wPe=/[\0-\x1F\x7F-\x9F]/,TIt=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,JB=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,_Pe=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,EPe=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,DIt=Object.freeze(Object.defineProperty({__proto__:null,Any:xPe,Cc:wPe,Cf:TIt,P:JB,S:_Pe,Z:EPe},Symbol.toStringTag,{value:"Module"})),LIt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),RIt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var mM;const FIt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),MIt=(mM=String.fromCodePoint)!==null&&mM!==void 0?mM:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function OIt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=FIt.get(e))!==null&&t!==void 0?t:e}var Ts;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ts||(Ts={}));const $It=32;var Tp;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Tp||(Tp={}));function q8(e){return e>=Ts.ZERO&&e<=Ts.NINE}function IIt(e){return e>=Ts.UPPER_A&&e<=Ts.UPPER_F||e>=Ts.LOWER_A&&e<=Ts.LOWER_F}function PIt(e){return e>=Ts.UPPER_A&&e<=Ts.UPPER_Z||e>=Ts.LOWER_A&&e<=Ts.LOWER_Z||q8(e)}function NIt(e){return e===Ts.EQUALS||PIt(e)}var As;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(As||(As={}));var hp;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(hp||(hp={}));class BIt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=As.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=hp.Strict}startEntity(t){this.decodeMode=t,this.state=As.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case As.EntityStart:return t.charCodeAt(n)===Ts.NUM?(this.state=As.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=As.NamedEntity,this.stateNamedEntity(t,n));case As.NumericStart:return this.stateNumericStart(t,n);case As.NumericDecimal:return this.stateNumericDecimal(t,n);case As.NumericHex:return this.stateNumericHex(t,n);case As.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|$It)===Ts.LOWER_X?(this.state=As.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=As.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+parseInt(t.substr(n,o),i),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(q8(i)||IIt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(q8(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ts.SEMI)this.consumed+=1;else if(this.decodeMode===hp.Strict)return 0;return this.emitCodePoint(OIt(this.result),this.consumed),this.errors&&(t!==Ts.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&Tp.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=zIt(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===hp.Attribute&&(o===0||NIt(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Tp.VALUE_LENGTH)>>14,o!==0){if(s===Ts.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==hp.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Tp.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Tp.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case As.NamedEntity:return this.result!==0&&(this.decodeMode!==hp.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case As.NumericDecimal:return this.emitNumericEntity(0,2);case As.NumericHex:return this.emitNumericEntity(0,3);case As.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case As.EntityStart:return 0}}}function SPe(e){let t="";const n=new BIt(e,r=>t+=MIt(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(s,a),n.startEntity(o);const u=n.write(i,a+1);if(u<0){s=a+n.end();break}s=a+u,a=u===0?s+1:s}const l=t+i.slice(s);return t="",l}}function zIt(e,t,n,r){const i=(t&Tp.BRANCH_LENGTH)>>7,o=t&Tp.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=i?-1:e[n+l]-1}let s=n,a=s+i-1;for(;s<=a;){const l=s+a>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}const jIt=SPe(LIt);SPe(RIt);function APe(e,t=hp.Legacy){return jIt(e,t)}function UIt(e){return Object.prototype.toString.call(e)}function QB(e){return UIt(e)==="[object String]"}const qIt=Object.prototype.hasOwnProperty;function HIt(e,t){return qIt.call(e,t)}function FR(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function CPe(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function ez(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function bT(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const kPe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,GIt=/&([a-z#][a-z0-9]{1,31});/gi,VIt=new RegExp(kPe.source+"|"+GIt.source,"gi"),WIt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function YIt(e,t){if(t.charCodeAt(0)===35&&WIt.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return ez(r)?bT(r):e}const n=APe(e);return n!==e?n:e}function XIt(e){return e.indexOf("\\")<0?e:e.replace(kPe,"$1")}function O1(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(VIt,function(t,n,r){return n||YIt(t,r)})}const ZIt=/[&<>"]/,KIt=/[&<>"]/g,JIt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function QIt(e){return JIt[e]}function rg(e){return ZIt.test(e)?e.replace(KIt,QIt):e}const ePt=/[.?*+^$[\]\\(){}|-]/g;function tPt(e){return e.replace(ePt,"\\$&")}function Xi(e){switch(e){case 9:case 32:return!0}return!1}function $_(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function I_(e){return JB.test(e)||_Pe.test(e)}function P_(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function MR(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const nPt={mdurl:kIt,ucmicro:DIt},rPt=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:CPe,assign:FR,escapeHtml:rg,escapeRE:tPt,fromCodePoint:bT,has:HIt,isMdAsciiPunct:P_,isPunctChar:I_,isSpace:Xi,isString:QB,isValidEntityCode:ez,isWhiteSpace:$_,lib:nPt,normalizeReference:MR,unescapeAll:O1,unescapeMd:XIt},Symbol.toStringTag,{value:"Module"}));function iPt(e,t,n){let r,i,o,s;const a=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<a;){if(o=e.src.charCodeAt(e.pos),o===93&&(r--,r===0)){i=!0;break}if(s=e.pos,e.md.inline.skipToken(e),o===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return i&&(u=e.pos),e.pos=l,u}function oPt(e,t,n){let r,i=t;const o={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(r=e.charCodeAt(i),r===10||r===60)return o;if(r===62)return o.pos=i+1,o.str=O1(e.slice(t+1,i)),o.ok=!0,o;if(r===92&&i+1<n){i+=2;continue}i++}return o}let s=0;for(;i<n&&(r=e.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return o;if(r===41){if(s===0)break;s--}i++}return t===i||s!==0||(o.str=O1(e.slice(t,i)),o.pos=i,o.ok=!0),o}function sPt(e,t,n,r){let i,o=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=n)return s;let a=e.charCodeAt(o);if(a!==34&&a!==39&&a!==40)return s;t++,o++,a===40&&(a=41),s.marker=a}for(;o<n;){if(i=e.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=O1(e.slice(t,o)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&o+1<n&&o++,o++}return s.can_continue=!0,s.str+=O1(e.slice(t,o)),s}const aPt=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:oPt,parseLinkLabel:iPt,parseLinkTitle:sPt},Symbol.toStringTag,{value:"Module"})),id={};id.code_inline=function(e,t,n,r,i){const o=e[t];return"<code"+i.renderAttrs(o)+">"+rg(o.content)+"</code>"};id.code_block=function(e,t,n,r,i){const o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+rg(e[t].content)+`</code></pre>
`};id.fence=function(e,t,n,r,i){const o=e[t],s=o.info?O1(o.info).trim():"";let a="",l="";if(s){const f=s.split(/(\s+)/g);a=f[0],l=f.slice(2).join("")}let u;if(n.highlight?u=n.highlight(o.content,a,l)||rg(o.content):u=rg(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){const f=o.attrIndex("class"),c=o.attrs?o.attrs.slice():[];f<0?c.push(["class",n.langPrefix+a]):(c[f]=c[f].slice(),c[f][1]+=" "+n.langPrefix+a);const d={attrs:c};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};id.image=function(e,t,n,r,i){const o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)};id.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};id.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};id.text=function(e,t){return rg(e[t].content)};id.html_block=function(e,t){return e[t].content};id.html_inline=function(e,t){return e[t].content};function Ev(){this.rules=FR({},id)}Ev.prototype.renderAttrs=function(t){let n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+rg(t.attrs[n][0])+'="'+rg(t.attrs[n][1])+'"';return i};Ev.prototype.renderToken=function(t,n,r){const i=t[n];let o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&n+1<t.length)){const a=t[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};Ev.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const a=e[o].type;typeof i[a]<"u"?r+=i[a](e,o,t,n,this):r+=this.renderToken(e,o,t)}return r};Ev.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,o=e.length;i<o;i++)switch(e[i].type){case"text":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":r+=e[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Ev.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const a=e[o].type;a==="inline"?r+=this.renderInline(e[o].children,t,n):typeof i[a]<"u"?r+=i[a](e,o,t,n,this):r+=this.renderToken(e,o,t,n)}return r};function Nl(){this.__rules__=[],this.__cache__=null}Nl.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Nl.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Nl.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Nl.prototype.before=function(e,t,n,r){const i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Nl.prototype.after=function(e,t,n,r){const i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Nl.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Nl.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Nl.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Nl.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Nl.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Gc(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Gc.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};Gc.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Gc.prototype.attrSet=function(t,n){const r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};Gc.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Gc.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function TPe(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}TPe.prototype.Token=Gc;const lPt=/\r\n?|\n/g,uPt=/\0/g;function cPt(e){let t;t=e.src.replace(lPt,`
`),t=t.replace(uPt,""),e.src=t}function fPt(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function dPt(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function hPt(e){return/^<a[>\s]/i.test(e)}function pPt(e){return/^<\/a\s*>/i.test(e)}function gPt(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,o=0;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(hPt(a.content)&&o>0&&o--,pPt(a.content)&&o++),!(o>0)&&a.type==="text"&&e.md.linkify.test(a.content)){const l=a.content;let u=e.md.linkify.match(l);const f=[];let c=a.level,d=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,m=e.md.normalizeLink(p);if(!e.md.validateLink(m))continue;let b=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(b)?b=e.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):b=e.md.normalizeLinkText(b):b=e.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,"");const y=u[h].index;if(y>d){const A=new e.Token("text","",0);A.content=l.slice(d,y),A.level=c,f.push(A)}const v=new e.Token("link_open","a",1);v.attrs=[["href",m]],v.level=c++,v.markup="linkify",v.info="auto",f.push(v);const w=new e.Token("text","",0);w.content=b,w.level=c,f.push(w);const E=new e.Token("link_close","a",-1);E.level=--c,E.markup="linkify",E.info="auto",f.push(E),d=u[h].lastIndex}if(d<l.length){const h=new e.Token("text","",0);h.content=l.slice(d),h.level=c,f.push(h)}t[n].children=i=CPe(i,s,f)}}}}const DPe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,mPt=/\((c|tm|r)\)/i,yPt=/\((c|tm|r)\)/ig,bPt={c:"",r:"",tm:""};function vPt(e,t){return bPt[t.toLowerCase()]}function xPt(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(yPt,vPt)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function wPt(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&DPe.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function _Pt(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(mPt.test(e.tokens[t].content)&&xPt(e.tokens[t].children),DPe.test(e.tokens[t].content)&&wPt(e.tokens[t].children))}const EPt=/['"]/,DAe=/['"]/g,LAe="";function cC(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function SPt(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const o=e[i],s=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,o.type!=="text")continue;let a=o.content,l=0,u=a.length;e:for(;l<u;){DAe.lastIndex=l;const f=DAe.exec(a);if(!f)break;let c=!0,d=!0;l=f.index+1;const h=f[0]==="'";let p=32;if(f.index-1>=0)p=a.charCodeAt(f.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let m=32;if(l<u)m=a.charCodeAt(l);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){m=e[n].content.charCodeAt(0);break}const b=P_(p)||I_(String.fromCharCode(p)),y=P_(m)||I_(String.fromCharCode(m)),v=$_(p),w=$_(m);if(w?c=!1:y&&(v||b||(c=!1)),v?d=!1:b&&(w||y||(d=!1)),m===34&&f[0]==='"'&&p>=48&&p<=57&&(d=c=!1),c&&d&&(c=b,d=y),!c&&!d){h&&(o.content=cC(o.content,f.index,LAe));continue}if(d)for(n=r.length-1;n>=0;n--){let E=r[n];if(r[n].level<s)break;if(E.single===h&&r[n].level===s){E=r[n];let A,T;h?(A=t.md.options.quotes[2],T=t.md.options.quotes[3]):(A=t.md.options.quotes[0],T=t.md.options.quotes[1]),o.content=cC(o.content,f.index,T),e[E.token].content=cC(e[E.token].content,E.pos,A),l+=T.length-1,E.token===i&&(l+=A.length-1),a=o.content,u=a.length,r.length=n;continue e}}c?r.push({token:i,pos:f.index,single:h,level:s}):d&&h&&(o.content=cC(o.content,f.index,LAe))}}}function APt(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!EPt.test(e.tokens[t].content)||SPt(e.tokens[t].children,e)}function CPt(e){let t,n;const r=e.tokens,i=r.length;for(let o=0;o<i;o++){if(r[o].type!=="inline")continue;const s=r[o].children,a=s.length;for(t=0;t<a;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<a;t++)s[t].type==="text"&&t+1<a&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const yM=[["normalize",cPt],["block",fPt],["inline",dPt],["linkify",gPt],["replacements",_Pt],["smartquotes",APt],["text_join",CPt]];function tz(){this.ruler=new Nl;for(let e=0;e<yM.length;e++)this.ruler.push(yM[e][0],yM[e][1])}tz.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};tz.prototype.State=TPe;function od(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,l=0,u=i.length,f=!1;s<u;s++){const c=i.charCodeAt(s);if(!f)if(Xi(c)){a++,c===9?l+=4-l%4:l++;continue}else f=!0;(c===10||s===u-1)&&(c!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),f=!1,a=0,l=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}od.prototype.push=function(e,t,n){const r=new Gc(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};od.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};od.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};od.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Xi(r))break}return t};od.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Xi(this.src.charCodeAt(--t)))return t+1;return t};od.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};od.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};od.prototype.getLines=function(t,n,r,i){if(t>=n)return"";const o=new Array(n-t);for(let s=0,a=t;a<n;a++,s++){let l=0;const u=this.bMarks[a];let f=u,c;for(a+1<n||i?c=this.eMarks[a]+1:c=this.eMarks[a];f<c&&l<r;){const d=this.src.charCodeAt(f);if(Xi(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(f-u<this.tShift[a])l++;else break;f++}l>r?o[s]=new Array(l-r+1).join(" ")+this.src.slice(f,c):o[s]=this.src.slice(f,c)}return o.join("")};od.prototype.Token=Gc;const kPt=65536;function bM(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function RAe(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),o=!1,s=0,a="";for(;r<n;)i===124&&(o?(a+=e.substring(s,r-1),s=r):(t.push(a+e.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=e.charCodeAt(r);return t.push(a+e.substring(s)),t}function TPt(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let o=e.bMarks[i]+e.tShift[i];if(o>=e.eMarks[i])return!1;const s=e.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=e.eMarks[i])return!1;const a=e.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!Xi(a)||s===45&&Xi(a))return!1;for(;o<e.eMarks[i];){const E=e.src.charCodeAt(o);if(E!==124&&E!==45&&E!==58&&!Xi(E))return!1;o++}let l=bM(e,t+1),u=l.split("|");const f=[];for(let E=0;E<u.length;E++){const A=u[E].trim();if(!A){if(E===0||E===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=bM(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=RAe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const c=u.length;if(c===0||c!==f.length)return!1;if(r)return!0;const d=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),m=[t,0];p.map=m;const b=e.push("thead_open","thead",1);b.map=[t,t+1];const y=e.push("tr_open","tr",1);y.map=[t,t+1];for(let E=0;E<u.length;E++){const A=e.push("th_open","th",1);f[E]&&(A.attrs=[["style","text-align:"+f[E]]]);const T=e.push("inline","",0);T.content=u[E].trim(),T.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let v,w=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let E=!1;for(let T=0,D=h.length;T<D;T++)if(h[T](e,i,n,!0)){E=!0;break}if(E||(l=bM(e,i).trim(),!l)||e.sCount[i]-e.blkIndent>=4||(u=RAe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=c-u.length,w>kPt))break;if(i===t+2){const T=e.push("tbody_open","tbody",1);T.map=v=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[i,i+1];for(let T=0;T<c;T++){const D=e.push("td_open","td",1);f[T]&&(D.attrs=[["style","text-align:"+f[T]]]);const k=e.push("inline","",0);k.content=u[T]?u[T].trim():"",k.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return v&&(e.push("tbody_close","tbody",-1),v[1]=i),e.push("table_close","table",-1),m[1]=i,e.parentType=d,e.line=i,!0}function DPt(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,i=r;continue}break}e.line=i;const o=e.push("code_block","code",0);return o.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,o.map=[t,e.line],!0}function LPt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>o)return!1;const s=e.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=e.skipChars(i,s);let l=i-a;if(l<3)return!1;const u=e.src.slice(a,i),f=e.src.slice(i,o);if(s===96&&f.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let c=t,d=!1;for(;c++,!(c>=n||(i=a=e.bMarks[c]+e.tShift[c],o=e.eMarks[c],i<o&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(i)===s&&!(e.sCount[c]-e.blkIndent>=4)&&(i=e.skipChars(i,s),!(i-a<l)&&(i=e.skipSpaces(i),!(i<o)))){d=!0;break}l=e.sCount[t],e.line=c+(d?1:0);const h=e.push("fence","code",0);return h.info=f,h.content=e.getLines(t+1,c,l,!0),h.markup=u,h.map=[t,e.line],!0}function RPt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],f=[],c=e.md.block.ruler.getRules("blockquote"),d=e.parentType;e.parentType="blockquote";let h=!1,p;for(p=t;p<n;p++){const w=e.sCount[p]<e.blkIndent;if(i=e.bMarks[p]+e.tShift[p],o=e.eMarks[p],i>=o)break;if(e.src.charCodeAt(i++)===62&&!w){let A=e.sCount[p]+1,T,D;e.src.charCodeAt(i)===32?(i++,A++,D=!1,T=!0):e.src.charCodeAt(i)===9?(T=!0,(e.bsCount[p]+A)%4===3?(i++,A++,D=!1):D=!0):T=!1;let k=A;for(a.push(e.bMarks[p]),e.bMarks[p]=i;i<o;){const R=e.src.charCodeAt(i);if(Xi(R))R===9?k+=4-(k+e.bsCount[p]+(D?1:0))%4:k++;else break;i++}h=i>=o,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(T?1:0),u.push(e.sCount[p]),e.sCount[p]=k-A,f.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(h)break;let E=!1;for(let A=0,T=c.length;A<T;A++)if(c[A](e,p,n,!0)){E=!0;break}if(E){e.lineMax=p,e.blkIndent!==0&&(a.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}a.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]=-1}const m=e.blkIndent;e.blkIndent=0;const b=e.push("blockquote_open","blockquote",1);b.markup=">";const y=[t,0];b.map=y,e.md.block.tokenize(e,t,p);const v=e.push("blockquote_close","blockquote",-1);v.markup=">",e.lineMax=s,e.parentType=d,y[1]=e.line;for(let w=0;w<f.length;w++)e.bMarks[w+t]=a[w],e.tShift[w+t]=f[w],e.sCount[w+t]=u[w],e.bsCount[w+t]=l[w];return e.blkIndent=m,!0}function FPt(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){const u=e.src.charCodeAt(o++);if(u!==s&&!Xi(u))return!1;u===s&&a++}if(a<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0}function FAe(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const o=e.src.charCodeAt(r);if(!Xi(o))return-1}return r}function MAe(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let o=e.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=e.src.charCodeAt(i++),o>=48&&o<=57){if(i-n>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<r&&(o=e.src.charCodeAt(i),!Xi(o))?-1:i}function MPt(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function OPt(e,t,n,r){let i,o,s,a,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let c,d,h;if((h=MAe(e,l))>=0){if(c=!0,s=e.bMarks[l]+e.tShift[l],d=Number(e.src.slice(s,h-1)),f&&d!==1)return!1}else if((h=FAe(e,l))>=0)c=!1;else return!1;if(f&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const p=e.src.charCodeAt(h-1),m=e.tokens.length;c?(a=e.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=e.push("bullet_list_open","ul",1);const b=[l,0];a.map=b,a.markup=String.fromCharCode(p);let y=!1;const v=e.md.block.ruler.getRules("list"),w=e.parentType;for(e.parentType="list";l<n;){o=h,i=e.eMarks[l];const E=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let A=E;for(;o<i;){const I=e.src.charCodeAt(o);if(I===9)A+=4-(A+e.bsCount[l])%4;else if(I===32)A++;else break;o++}const T=o;let D;T>=i?D=1:D=A-E,D>4&&(D=1);const k=E+D;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const R=[l,0];a.map=R,c&&(a.info=e.src.slice(s,h-1));const M=e.tight,B=e.tShift[l],K=e.sCount[l],L=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=k,e.tight=!0,e.tShift[l]=T-e.bMarks[l],e.sCount[l]=A,T>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||y)&&(u=!1),y=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=L,e.tShift[l]=B,e.sCount[l]=K,e.tight=M,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=e.line,R[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let $=!1;for(let I=0,U=v.length;I<U;I++)if(v[I](e,l,n,!0)){$=!0;break}if($)break;if(c){if(h=MAe(e,l),h<0)break;s=e.bMarks[l]+e.tShift[l]}else if(h=FAe(e,l),h<0)break;if(p!==e.src.charCodeAt(h-1))break}return c?a=e.push("ordered_list_close","ol",-1):a=e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),b[1]=l,e.line=l,e.parentType=w,u&&MPt(e,m),!0}function $Pt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function a(v){const w=e.lineMax;if(v>=w||e.isEmpty(v))return null;let E=!1;if(e.sCount[v]-e.blkIndent>3&&(E=!0),e.sCount[v]<0&&(E=!0),!E){const D=e.md.block.ruler.getRules("reference"),k=e.parentType;e.parentType="reference";let R=!1;for(let M=0,B=D.length;M<B;M++)if(D[M](e,v,w,!0)){R=!0;break}if(e.parentType=k,R)return null}const A=e.bMarks[v]+e.tShift[v],T=e.eMarks[v];return e.src.slice(A,T+1)}let l=e.src.slice(i,o+1);o=l.length;let u=-1;for(i=1;i<o;i++){const v=l.charCodeAt(i);if(v===91)return!1;if(v===93){u=i;break}else if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(v===92&&(i++,i<o&&l.charCodeAt(i)===10)){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<o;i++){const v=l.charCodeAt(i);if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!Xi(v))break}const f=e.md.helpers.parseLinkDestination(l,i,o);if(!f.ok)return!1;const c=e.md.normalizeLink(f.str);if(!e.md.validateLink(c))return!1;i=f.pos;const d=i,h=s,p=i;for(;i<o;i++){const v=l.charCodeAt(i);if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!Xi(v))break}let m=e.md.helpers.parseLinkTitle(l,i,o);for(;m.can_continue;){const v=a(s);if(v===null)break;l+=v,i=o,o=l.length,s++,m=e.md.helpers.parseLinkTitle(l,i,o,m)}let b;for(i<o&&p!==i&&m.ok?(b=m.str,i=m.pos):(b="",i=d,s=h);i<o;){const v=l.charCodeAt(i);if(!Xi(v))break;i++}if(i<o&&l.charCodeAt(i)!==10&&b)for(b="",i=d,s=h;i<o;){const v=l.charCodeAt(i);if(!Xi(v))break;i++}if(i<o&&l.charCodeAt(i)!==10)return!1;const y=MR(l.slice(1,u));return y?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:b,href:c}),e.line=s),!0):!1}const IPt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],PPt="[a-zA-Z_:][a-zA-Z0-9:._-]*",NPt="[^\"'=<>`\\x00-\\x20]+",BPt="'[^']*'",zPt='"[^"]*"',jPt="(?:"+NPt+"|"+BPt+"|"+zPt+")",UPt="(?:\\s+"+PPt+"(?:\\s*=\\s*"+jPt+")?)",LPe="<[A-Za-z][A-Za-z0-9\\-]*"+UPt+"*\\s*\\/?>",RPe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",qPt="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",HPt="<[?][\\s\\S]*?[?]>",GPt="<![A-Za-z][^>]*>",VPt="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",WPt=new RegExp("^(?:"+LPe+"|"+RPe+"|"+qPt+"|"+HPt+"|"+GPt+"|"+VPt+")"),YPt=new RegExp("^(?:"+LPe+"|"+RPe+")"),Zy=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+IPt.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(YPt.source+"\\s*$"),/^$/,!1]];function XPt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let s=e.src.slice(i,o),a=0;for(;a<Zy.length&&!Zy[a][0].test(s);a++);if(a===Zy.length)return!1;if(r)return Zy[a][2];let l=t+1;if(!Zy[a][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],o=e.eMarks[l],s=e.src.slice(i,o),Zy[a][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function ZPt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=e.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=e.src.charCodeAt(++i);if(a>6||i<o&&!Xi(s))return!1;if(r)return!0;o=e.skipSpacesBack(o,i);const l=e.skipCharsBack(o,35,i);l>i&&Xi(e.src.charCodeAt(l-1))&&(o=l),e.line=t+1;const u=e.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(i,o).trim(),f.map=[t,e.line],f.children=[];const c=e.push("heading_close","h"+String(a),-1);return c.markup="########".slice(0,a),!0}function KPt(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let o=0,s,a=t+1;for(;a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let h=e.bMarks[a]+e.tShift[a];const p=e.eMarks[a];if(h<p&&(s=e.src.charCodeAt(h),(s===45||s===61)&&(h=e.skipChars(h,s),h=e.skipSpaces(h),h>=p))){o=s===61?1:2;break}}if(e.sCount[a]<0)continue;let d=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](e,a,n,!0)){d=!0;break}if(d)break}if(!o)return!1;const l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const u=e.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const c=e.push("heading_close","h"+String(o),-1);return c.markup=String.fromCharCode(s),e.parentType=i,!0}function JPt(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let o=t+1;for(e.parentType="paragraph";o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3||e.sCount[o]<0)continue;let u=!1;for(let f=0,c=r.length;f<c;f++)if(r[f](e,o,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o;const a=e.push("paragraph_open","p",1);a.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const fC=[["table",TPt,["paragraph","reference"]],["code",DPt],["fence",LPt,["paragraph","reference","blockquote","list"]],["blockquote",RPt,["paragraph","reference","blockquote","list"]],["hr",FPt,["paragraph","reference","blockquote","list"]],["list",OPt,["paragraph","reference","blockquote"]],["reference",$Pt],["html_block",XPt,["paragraph","reference","blockquote"]],["heading",ZPt,["paragraph","reference","blockquote"]],["lheading",KPt],["paragraph",JPt]];function OR(){this.ruler=new Nl;for(let e=0;e<fC.length;e++)this.ruler.push(fC[e][0],fC[e][1],{alt:(fC[e][2]||[]).slice()})}OR.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,o=e.md.options.maxNesting;let s=t,a=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=o){e.line=n;break}const l=e.line;let u=!1;for(let f=0;f<i;f++)if(u=r[f](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),s=e.line,s<n&&e.isEmpty(s)&&(a=!0,s++,e.line=s)}};OR.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)};OR.prototype.State=od;function fS(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}fS.prototype.pushPending=function(){const e=new Gc("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};fS.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Gc(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};fS.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let o=e;for(;o<n&&this.src.charCodeAt(o)===r;)o++;const s=o-e,a=o<n?this.src.charCodeAt(o):32,l=P_(i)||I_(String.fromCharCode(i)),u=P_(a)||I_(String.fromCharCode(a)),f=$_(i),c=$_(a),d=!c&&(!u||f||l),h=!f&&(!l||c||u);return{can_open:d&&(t||!h||l),can_close:h&&(t||!d||u),length:s}};fS.prototype.Token=Gc;function QPt(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function eNt(e,t){let n=e.pos;for(;n<e.posMax&&!QPt(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const tNt=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function nNt(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(tNt);if(!i)return!1;const o=i[1],s=e.md.linkify.matchAtStart(e.src.slice(n-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");const l=e.md.normalizeLink(a);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-o.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="linkify",c.info="auto"}return e.pos+=a.length-o.length,!0}function rNt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&e.pending.charCodeAt(o-1)===32;)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Xi(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const nz=[];for(let e=0;e<256;e++)nz.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){nz[e.charCodeAt(0)]=1});function iNt(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),!!Xi(i));)n++;return e.pos=n,!0}let o=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=e.src.charCodeAt(n+1);a>=56320&&a<=57343&&(o+=e.src[n+1],n++)}const s="\\"+o;if(!t){const a=e.push("text_special","",0);i<256&&nz[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return e.pos=n+1,!0}function oNt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const o=e.posMax;for(;n<o&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(i,n),a=s.length;if(e.backticksScanned&&(e.backticks[a]||0)<=i)return t||(e.pending+=s),e.pos+=a,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<o&&e.src.charCodeAt(l)===96;)l++;const f=l-u;if(f===a){if(!t){const c=e.push("code_inline","code",0);c.markup=s,c.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=a,!0}function sNt(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const i=e.scanDelims(e.pos,!0);let o=i.length;const s=String.fromCharCode(r);if(o<2)return!1;let a;o%2&&(a=e.push("text","",0),a.content=s,o--);for(let l=0;l<o;l+=2)a=e.push("text","",0),a.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function OAe(e,t){let n;const r=[],i=t.length;for(let o=0;o<i;o++){const s=t[o];if(s.marker!==126||s.end===-1)continue;const a=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[a.token-1].type==="text"&&e.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const o=r.pop();let s=o+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,o!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[o],e.tokens[o]=n)}}function aNt(e){const t=e.tokens_meta,n=e.tokens_meta.length;OAe(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&OAe(e,t[r].delimiters)}const FPe={tokenize:sNt,postProcess:aNt};function lNt(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const i=e.scanDelims(e.pos,r===42);for(let o=0;o<i.length;o++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function $Ae(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const i=t[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const o=t[i.end],s=r>0&&t[r-1].end===i.end+1&&t[r-1].marker===i.marker&&t[r-1].token===i.token-1&&t[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),l=e.tokens[i.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?a+a:a,l.content="";const u=e.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[i.end+1].token].content="",r--)}}function uNt(e){const t=e.tokens_meta,n=e.tokens_meta.length;$Ae(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&$Ae(e,t[r].delimiters)}const MPe={tokenize:lNt,postProcess:uNt};function cNt(e,t){let n,r,i,o,s="",a="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,c=e.posMax,d=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let p=h+1;if(p<c&&e.src.charCodeAt(p)===40){for(u=!1,p++;p<c&&(n=e.src.charCodeAt(p),!(!Xi(n)&&n!==10));p++);if(p>=c)return!1;if(l=p,i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),i.ok){for(s=e.md.normalizeLink(i.str),e.md.validateLink(s)?p=i.pos:s="",l=p;p<c&&(n=e.src.charCodeAt(p),!(!Xi(n)&&n!==10));p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<c&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<c&&(n=e.src.charCodeAt(p),!(!Xi(n)&&n!==10));p++);}(p>=c||e.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof e.env.references>"u")return!1;if(p<c&&e.src.charCodeAt(p)===91?(l=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?r=e.src.slice(l,p++):p=h+1):p=h+1,r||(r=e.src.slice(d,h)),o=e.env.references[MR(r)],!o)return e.pos=f,!1;s=o.href,a=o.title}if(!t){e.pos=d,e.posMax=h;const m=e.push("link_open","a",1),b=[["href",s]];m.attrs=b,a&&b.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=c,!0}function fNt(e,t){let n,r,i,o,s,a,l,u,f="";const c=e.pos,d=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(o=p+1,o<d&&e.src.charCodeAt(o)===40){for(o++;o<d&&(n=e.src.charCodeAt(o),!(!Xi(n)&&n!==10));o++);if(o>=d)return!1;for(u=o,a=e.md.helpers.parseLinkDestination(e.src,o,e.posMax),a.ok&&(f=e.md.normalizeLink(a.str),e.md.validateLink(f)?o=a.pos:f=""),u=o;o<d&&(n=e.src.charCodeAt(o),!(!Xi(n)&&n!==10));o++);if(a=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<d&&u!==o&&a.ok)for(l=a.str,o=a.pos;o<d&&(n=e.src.charCodeAt(o),!(!Xi(n)&&n!==10));o++);else l="";if(o>=d||e.src.charCodeAt(o)!==41)return e.pos=c,!1;o++}else{if(typeof e.env.references>"u")return!1;if(o<d&&e.src.charCodeAt(o)===91?(u=o+1,o=e.md.helpers.parseLinkLabel(e,o),o>=0?i=e.src.slice(u,o++):o=p+1):o=p+1,i||(i=e.src.slice(h,p)),s=e.env.references[MR(i)],!s)return e.pos=c,!1;f=s.href,l=s.title}if(!t){r=e.src.slice(h,p);const m=[];e.md.inline.parse(r,e.md,e.env,m);const b=e.push("image","img",0),y=[["src",f],["alt",""]];b.attrs=y,b.children=m,b.content=r,l&&y.push(["title",l])}return e.pos=o,e.posMax=d,!0}const dNt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,hNt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function pNt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const o=e.src.slice(r+1,n);if(hNt.test(o)){const s=e.md.normalizeLink(o);if(!e.md.validateLink(s))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(o);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=o.length+2,!0}if(dNt.test(o)){const s=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(s))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(o);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=o.length+2,!0}return!1}function gNt(e){return/^<a[>\s]/i.test(e)}function mNt(e){return/^<\/a\s*>/i.test(e)}function yNt(e){const t=e|32;return t>=97&&t<=122}function bNt(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!yNt(i))return!1;const o=e.src.slice(r).match(WPt);if(!o)return!1;if(!t){const s=e.push("html_inline","",0);s.content=o[0],gNt(s.content)&&e.linkLevel++,mNt(s.content)&&e.linkLevel--}return e.pos+=o[0].length,!0}const vNt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,xNt=/^&([a-z][a-z0-9]{1,31});/i;function wNt(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const o=e.src.slice(n).match(vNt);if(o){if(!t){const s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=e.push("text_special","",0);a.content=ez(s)?bT(s):bT(65533),a.markup=o[0],a.info="entity"}return e.pos+=o[0].length,!0}}else{const o=e.src.slice(n).match(xNt);if(o){const s=APe(o[0]);if(s!==o[0]){if(!t){const a=e.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return e.pos+=o[0].length,!0}}}return!1}function IAe(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const o=[];for(let s=0;s<n;s++){const a=e[s];if(o.push(0),(e[r].marker!==a.marker||i!==a.token-1)&&(r=s),i=a.token,a.length=a.length||0,!a.close)continue;t.hasOwnProperty(a.marker)||(t[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[a.marker][(a.open?3:0)+a.length%3];let u=r-o[r]-1,f=u;for(;u>l;u-=o[u]+1){const c=e[u];if(c.marker===a.marker&&c.open&&c.end<0){let d=!1;if((c.close||a.open)&&(c.length+a.length)%3===0&&(c.length%3!==0||a.length%3!==0)&&(d=!0),!d){const h=u>0&&!e[u-1].open?o[u-1]+1:0;o[s]=s-u+h,o[u]=h,a.open=!1,c.end=s,c.close=!1,f=-1,i=-2;break}}}f!==-1&&(t[a.marker][(a.open?3:0)+(a.length||0)%3]=f)}}function _Nt(e){const t=e.tokens_meta,n=e.tokens_meta.length;IAe(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&IAe(t[r].delimiters)}function ENt(e){let t,n,r=0;const i=e.tokens,o=e.tokens.length;for(t=n=0;t<o;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,i[t].type==="text"&&t+1<o&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const vM=[["text",eNt],["linkify",nNt],["newline",rNt],["escape",iNt],["backticks",oNt],["strikethrough",FPe.tokenize],["emphasis",MPe.tokenize],["link",cNt],["image",fNt],["autolink",pNt],["html_inline",bNt],["entity",wNt]],xM=[["balance_pairs",_Nt],["strikethrough",FPe.postProcess],["emphasis",MPe.postProcess],["fragments_join",ENt]];function dS(){this.ruler=new Nl;for(let e=0;e<vM.length;e++)this.ruler.push(vM[e][0],vM[e][1]);this.ruler2=new Nl;for(let e=0;e<xM.length;e++)this.ruler2.push(xM[e][0],xM[e][1])}dS.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,o=e.cache;if(typeof o[t]<"u"){e.pos=o[t];return}let s=!1;if(e.level<i){for(let a=0;a<r;a++)if(e.level++,s=n[a](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,o[t]=e.pos};dS.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const o=e.pos;let s=!1;if(e.level<i){for(let a=0;a<n;a++)if(s=t[a](e,!1),s){if(o>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};dS.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};dS.prototype.State=fS;function SNt(e){const t={};e=e||{},t.src_Any=xPe.source,t.src_Cc=wPe.source,t.src_Z=EPe.source,t.src_P=JB.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function H8(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function $R(e){return Object.prototype.toString.call(e)}function ANt(e){return $R(e)==="[object String]"}function CNt(e){return $R(e)==="[object Object]"}function kNt(e){return $R(e)==="[object RegExp]"}function PAe(e){return $R(e)==="[object Function]"}function TNt(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const OPe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function DNt(e){return Object.keys(e||{}).reduce(function(t,n){return t||OPe.hasOwnProperty(n)},!1)}const LNt={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},RNt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",FNt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function MNt(e){e.__index__=-1,e.__text_cache__=""}function ONt(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function NAe(){return function(e,t){t.normalize(e)}}function vT(e){const t=e.re=SNt(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(RNt),n.push(t.src_xn),t.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function o(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(e.__schemas__).forEach(function(a){const l=e.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[a]=u,CNt(l)){kNt(l.validate)?u.validate=ONt(l.validate):PAe(l.validate)?u.validate=l.validate:o(a,l),PAe(l.normalize)?u.normalize=l.normalize:l.normalize?o(a,l):u.normalize=NAe();return}if(ANt(l)){i.push(a);return}o(a,l)}),i.forEach(function(a){e.__compiled__[e.__schemas__[a]]&&(e.__compiled__[a].validate=e.__compiled__[e.__schemas__[a]].validate,e.__compiled__[a].normalize=e.__compiled__[e.__schemas__[a]].normalize)}),e.__compiled__[""]={validate:null,normalize:NAe()};const s=Object.keys(e.__compiled__).filter(function(a){return a.length>0&&e.__compiled__[a]}).map(TNt).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),MNt(e)}function $Nt(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function G8(e,t){const n=new $Nt(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function du(e,t){if(!(this instanceof du))return new du(e,t);t||DNt(e)&&(t=e,e={}),this.__opts__=H8({},OPe,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=H8({},LNt,e),this.__compiled__={},this.__tlds__=FNt,this.__tlds_replaced__=!1,this.re={},vT(this)}du.prototype.add=function(t,n){return this.__schemas__[t]=n,vT(this),this};du.prototype.set=function(t){return this.__opts__=H8(this.__opts__,t),this};du.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,o,s,a,l,u,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(o=this.testSchemaAt(t,n[2],l.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};du.prototype.pretest=function(t){return this.re.pretest.test(t)};du.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};du.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(G8(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(G8(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};du.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,G8(this,0)):null};du.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),vT(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,vT(this),this)};du.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};du.prototype.onCompile=function(){};const Pb=2147483647,Ef=36,rz=1,N_=26,INt=38,PNt=700,$Pe=72,IPe=128,PPe="-",NNt=/^xn--/,BNt=/[^\0-\x7F]/,zNt=/[\x2E\u3002\uFF0E\uFF61]/g,jNt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},wM=Ef-rz,Sf=Math.floor,_M=String.fromCharCode;function cp(e){throw new RangeError(jNt[e])}function UNt(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function NPe(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(zNt,".");const i=e.split("."),o=UNt(i,t).join(".");return r+o}function BPe(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}const qNt=e=>String.fromCodePoint(...e),HNt=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ef},BAe=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},zPe=function(e,t,n){let r=0;for(e=n?Sf(e/PNt):e>>1,e+=Sf(e/t);e>wM*N_>>1;r+=Ef)e=Sf(e/wM);return Sf(r+(wM+1)*e/(e+INt))},jPe=function(e){const t=[],n=e.length;let r=0,i=IPe,o=$Pe,s=e.lastIndexOf(PPe);s<0&&(s=0);for(let a=0;a<s;++a)e.charCodeAt(a)>=128&&cp("not-basic"),t.push(e.charCodeAt(a));for(let a=s>0?s+1:0;a<n;){const l=r;for(let f=1,c=Ef;;c+=Ef){a>=n&&cp("invalid-input");const d=HNt(e.charCodeAt(a++));d>=Ef&&cp("invalid-input"),d>Sf((Pb-r)/f)&&cp("overflow"),r+=d*f;const h=c<=o?rz:c>=o+N_?N_:c-o;if(d<h)break;const p=Ef-h;f>Sf(Pb/p)&&cp("overflow"),f*=p}const u=t.length+1;o=zPe(r-l,u,l==0),Sf(r/u)>Pb-i&&cp("overflow"),i+=Sf(r/u),r%=u,t.splice(r++,0,i)}return String.fromCodePoint(...t)},UPe=function(e){const t=[];e=BPe(e);const n=e.length;let r=IPe,i=0,o=$Pe;for(const l of e)l<128&&t.push(_M(l));const s=t.length;let a=s;for(s&&t.push(PPe);a<n;){let l=Pb;for(const f of e)f>=r&&f<l&&(l=f);const u=a+1;l-r>Sf((Pb-i)/u)&&cp("overflow"),i+=(l-r)*u,r=l;for(const f of e)if(f<r&&++i>Pb&&cp("overflow"),f===r){let c=i;for(let d=Ef;;d+=Ef){const h=d<=o?rz:d>=o+N_?N_:d-o;if(c<h)break;const p=c-h,m=Ef-h;t.push(_M(BAe(h+p%m,0))),c=Sf(p/m)}t.push(_M(BAe(c,0))),o=zPe(i,u,a===s),i=0,++a}++i,++r}return t.join("")},GNt=function(e){return NPe(e,function(t){return NNt.test(t)?jPe(t.slice(4).toLowerCase()):t})},VNt=function(e){return NPe(e,function(t){return BNt.test(t)?"xn--"+UPe(t):t})},qPe={version:"2.3.1",ucs2:{decode:BPe,encode:qNt},decode:jPe,encode:UPe,toASCII:VNt,toUnicode:GNt},WNt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},YNt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},XNt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},ZNt={default:WNt,zero:YNt,commonmark:XNt},KNt=/^(vbscript|javascript|file|data):/,JNt=/^data:image\/(gif|png|jpeg|webp);/;function QNt(e){const t=e.trim().toLowerCase();return KNt.test(t)?JNt.test(t):!0}const HPe=["http:","https:","mailto:"];function e9t(e){const t=KB(e,!0);if(t.hostname&&(!t.protocol||HPe.indexOf(t.protocol)>=0))try{t.hostname=qPe.toASCII(t.hostname)}catch{}return cS(ZB(t))}function t9t(e){const t=KB(e,!0);if(t.hostname&&(!t.protocol||HPe.indexOf(t.protocol)>=0))try{t.hostname=qPe.toUnicode(t.hostname)}catch{}return M1(ZB(t),M1.defaultChars+"%")}function ju(e,t){if(!(this instanceof ju))return new ju(e,t);t||QB(e)||(t=e||{},e="default"),this.inline=new dS,this.block=new OR,this.core=new tz,this.renderer=new Ev,this.linkify=new du,this.validateLink=QNt,this.normalizeLink=e9t,this.normalizeLinkText=t9t,this.utils=rPt,this.helpers=FR({},aPt),this.options={},this.configure(e),t&&this.set(t)}ju.prototype.set=function(e){return FR(this.options,e),this};ju.prototype.configure=function(e){const t=this;if(QB(e)){const n=e;if(e=ZNt[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};ju.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};ju.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};ju.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};ju.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};ju.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};ju.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};ju.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};async function n9t(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");return await t.text()}catch(t){return console.error("There has been a problem with your fetch operation:",t),null}}const GPe=/^<!-- ?\{(?:([a-z0-9]+)(\^[0-9]*)?: ?)?(.*)} ?-->\n?$/,r9t={li:["list_item"],ul:["bullet_list"],p:["paragraph"],ol:["ordered_list"],blockquote:["blockquote"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],code:["code_inline","code_block","fence"]},VPe={hr:!0,image:!0},i9t={"eox-map":{tour:[["prevent-scroll",!0]]},img:{hero:[["position","center"],["data-parallax",!0]]},video:{hero:[["position","center"],["loop",!0],["muted",!0],["autoplay",!0],["data-parallax",!0]]}},o9t=["img","video"],EM={1:["0.0.0"]},s9t=["tour"],a9t=["iframe"];function WPe(){document.body.style.userSelect="none"}function l9t(){document.body.style.userSelect=""}function u9t(e,t,n){e.target===t&&(WPe(),n.dragging=!0,n.lastX=e.clientX,n.lastY=e.clientY)}function c9t(e,t,n){if(n.dragging){let r=e.clientX-n.lastX,i=e.clientY-n.lastY,{top:o,left:s}=t.getBoundingClientRect();t.style.top=`${o+i}px`,t.style.left=`${s+r}px`,n.lastX=e.clientX,n.lastY=e.clientY}if(n.dragging||n.resizing){let r=n.lastX-e.clientX,i=e.clientY-n.lastY,{width:o,height:s,left:a,top:l}=t.getBoundingClientRect();n.resizing&&(t.style.width=`${o+r}px`,t.style.height=`${s+i}px`,t.style.top=`${l}px`),t.style.left=`${a-r}px`,n.lastX=e.clientX,n.lastY=e.clientY}}function f9t(e){l9t(),e.dragging=!1,e.resizing=!1}function d9t(e,t){e.stopPropagation(),WPe(),t.resizing=!0,t.lastX=e.clientX,t.lastY=e.clientY}async function h9t(e,t,n){e.addEventListener("mousedown",r=>u9t(r,e,n)),window.addEventListener("mousemove",r=>c9t(r,e,n)),window.addEventListener("mouseup",()=>f9t(n)),t.addEventListener("mousedown",r=>d9t(r,n))}function p9t(e){const t=document.querySelector("eox-storytelling"),{y:n}=t.getBoundingClientRect(),r=e.querySelector(".editor-wrapper"),i=f=>Number(f.replace("px","")),o=window.getComputedStyle(r),s=i(o.bottom),a=i(o.padding)*2,l=r.classList.contains("partial-height")?80:0,u=window.innerHeight-n-s-a-l;r.style.height=`${u}px`}function g9t(e){const t=document.createElement("input");t.type="file",t.accept=".md",t.onchange=n=>{const r=n.target.files[0];if(!r)return;const i=new FileReader;i.onload=o=>{const s=o.target.result;e.value(s)},i.readAsText(r)},t.click()}function m9t(e){const t=e.value(),n=new Blob([t],{type:"text/markdown"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${document.title}.md`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function YPe(e){const t=[];return e.forEach((n,r)=>{(n.startsWith("## ")||n.startsWith("# ")&&t.length)&&t.push(r)}),t}function zAe(e,t,n,r,i,o){const s=e.split(`
`),a=o.shadowRoot||o,l=a.querySelector("eox-storytelling-editor"),f=YPe(s)[t];if(r)if(i){const d=a.querySelector("eox-jsonform#storytelling-editor-fields").editor.getValue();Object.keys(d).forEach(h=>{const p=d[h];n=n.replaceAll(`{${h}}`,p)}),o.selectedCustomElement=null}else{o.selectedCustomElement={markdown:n,fields:r},o.requestUpdate();return}f>=0?s.splice(f,0,n):s.push(n),l.editor.editor.editors["root.Story"].setValue(s.join(`
`)),setTimeout(()=>{const c=a.querySelector(`div[data-section="${t+1}"]`);c&&window.scrollTo(0,c.offsetTop)},200),o.addCustomSectionIndex=-1,o.requestUpdate()}function y9t(e,t,n){let r=null;n==null||n.codemirror.on("change",function(){const i=e.querySelector(".editor-saver");i.innerText="Auto Saving...",r&&clearTimeout(r),r=setTimeout(()=>{i.innerText="Saved";const o=JSON.parse(localStorage.getItem("markdown")||"{}");localStorage.setItem("markdown",JSON.stringify({...o,[t||"default"]:n.value()})),r=null},2500)})}function b9t(e){var t;(t=(e.shadowRoot||e).querySelector(".CodeMirror-scroll"))==null||t.addEventListener("wheel",function(n){const r=n.deltaY,i=this.scrollHeight,o=this.clientHeight;(this.scrollTop===0&&r<0||this.scrollTop+o>=i&&r>0)&&n.preventDefault()},{passive:!1})}function v9t(e){if(e.showEditor!==void 0){let t=JSON.parse(localStorage.getItem("markdown")||"{}");const n=e.id||"default",r=t[n];r&&r!==e.markdown&&(confirm("Recover your Story from the last time you edited?")?e.markdown=r:(delete t[n],localStorage.setItem("markdown",JSON.stringify(t))))}}function XPe(e){var t,n;if((n=(t=e.editor.editor)==null?void 0:t.editors)!=null&&n["root.Story"]){const r=e.editor.editor.editors["root.Story"].simplemde_instance;if(!e.disableAutosave)y9t(e,e.storyId,r);else{const i=e.querySelector(".editor-saver");i.innerText=""}b9t(e)}else setTimeout(()=>XPe(e),100)}function ZPe(e){var n;e.renderRoot.querySelector(".editor-wrapper").classList.add("editor-opacity-none"),e.editor&&e.editor.editor&&e.editor.editor.ready&&((n=e.editor.editor)!=null&&n.editors["root.Story"].simplemde_instance)?e.querySelector(".switch-input").click():setTimeout(()=>ZPe(e),100)}const SM=(e,t,n,r,i)=>({name:e,action:i||function({codemirror:s}){const a=s.getCursor("start"),l=s.getCursor("end");s.replaceRange(t,a,l)},className:n,title:r}),x9t={properties:{Story:{type:"string",format:"markdown",options:{simplemde:{toolbar:["bold","italic","strikethrough","heading","|","unordered-list","ordered-list","link","|",SM("import",null,"fa fa-upload","Import Markdown File",g9t),SM("export",null,"fa fa-download","Export Markdown File",m9t),"|",SM("add-custom-section",null,"fa fa-plus","Add custom section",()=>{const e=document.querySelector("eox-storytelling"),t=e.markdown.split(`
`),n=YPe(t);e&&(e.addCustomSectionIndex=n.length,e.requestUpdate())})],spellChecker:!1}}}}},w9t=`## What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
`,_9t=`## Table <!--{ as="div" }-->
| Number | Random Name | Lorem Ipsum                                       |
|--------|-------------|---------------------------------------------------|
| 1      | Alice       | Lorem ipsum dolor sit amet, consectetur adipiscing |
| 2      | Bob         | elit. Sed do eiusmod tempor incididunt ut labore  |
| 3      | Charlie     | et dolore magna aliqua. Ut enim ad minim veniam,  |
| 4      | Dana        | quis nostrud exercitation ullamco laboris nisi ut |
| 5      | Eve         | aliquip ex ea commodo consequat. Duis aute irure  |
`,E9t=`## List <!--{ as="div" }-->
1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. **Sed do eiusmod tempor** incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
2. _Duis aute irure_ dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
3. **Lorem ipsum dolor sit amet,** consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. _Ut enim ad minim veniam, quis nostrud exercitation ullamco_ laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
4. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
5. _Ut enim ad minim veniam, quis nostrud_ exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. **Duis aute irure dolor** in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
6. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,S9t=`## {title} <!--{as="eox-map" style="width: 100%; height: 500px;" layers='{layers}' zoom="{zoom}" center=[{longitude},{latitude}] }-->
`,A9t={title:"Simple Map",type:"object",required:["title","layers"],properties:{title:{type:"string",default:"Map Example",format:"text"},layers:{type:"string",default:'[ { "type": "Tile", "properties": { "id": "TOPO-WMS" }, "source": { "type": "TileWMS", "url": "https://ows.mundialis.de/services/service", "params": { "LAYERS": "TOPO-WMS" } } } ]',format:"textarea"},zoom:{type:"integer",default:2,minimum:1,maximum:28,format:"number"},longitude:{type:"integer",default:15,format:"number"},latitude:{type:"integer",default:48,format:"number"}}},C9t=`## {title} <!--{ as="eox-map" mode="tour" }-->

### <!--{ layers='{layers}' center=[{longitude},{latitude}] zoom="{zoom}" animationOptions="{duration:500}" }-->
#### {tourTitle}
{description}
`,k9t={title:"Tour",type:"object",required:["title"],properties:{title:{type:"string",default:"Map Tour Example",format:"text"},layers:{title:"Layers (Tour 1)",type:"string",default:'[{"type":"Tile","properties":{"id":"osm"},"source":{"type":"OSM"}}]',format:"textarea"},zoom:{title:"Zoom (Tour 1)",type:"integer",default:5,minimum:1,maximum:28,format:"number"},longitude:{title:"Longitude (Tour 1)",type:"integer",default:15,format:"number"},latitude:{title:"Longitude (Tour 1)",type:"integer",default:48,format:"number"},tourTitle:{title:"Title (Tour 1)",type:"string",default:"Tour Title",format:"text"},description:{title:"Description (Tour 1)",type:"string",default:"Some description for tour 1",format:"text"}}},T9t=`## {title} <!--{as="img" src="{src}" style="width: 100%; height: 600px;"}-->
`,D9t={title:"Simple Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Simple Image Example",format:"text"},src:{type:"string",default:"https://images.unsplash.com/photo-1461880234904-751a2f54f1c7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",format:"text"}}},L9t=`# {title} <!--{ as="img" mode="hero" src="{src}" }-->
### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,R9t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Image Example",format:"text"},src:{type:"string",default:"https://www.gstatic.com/prettyearth/assets/full/14617.jpg",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},F9t=`# {title} <!--{ as="video" mode="hero" src="{src}" }-->
#### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,M9t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Video Example",format:"text"},src:{type:"string",default:"https://dlmultimedia.esa.int/download/public/videos/2023/06/010/2306_010_AR_EN.mp4",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},O9t=[{name:"Basic",elements:[{name:"Textual",id:"ele-textual",markdown:w9t,icon:"data:image/svg+xml,%3Csvg fill='none' viewBox='0 0 138 112' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23f7f7f7' rx='4' height='112' width='138'/%3E%3Crect x='27' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='70' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='82' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3C/svg%3E"},{name:"Table",id:"ele-table",markdown:_9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 137 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='137' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='26' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='73' width='84' height='14' rx='7' fill='%23D9D9D9'/%3E%3C/svg%3E%0A"},{name:"List",id:"ele-list",markdown:E9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='38' y='22' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='34' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='46' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='58' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='70' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='82' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Ccircle cx='30.5' cy='25.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='37.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='49.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='61.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='73.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='85.5' r='3.5' fill='%23BFBFBF'/%3E%3C/svg%3E%0A"}]},{name:"Map",elements:[{name:"Simple Map",id:"ele-simple-map",markdown:S9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M54.08 42.873L56.58 52.373C57.83 57.123 65.08 59.373 69.58 59.373C73.18 59.373 74.7467 63.0397 75.08 64.873C74.08 68.0397 73.48 74.373 79.08 74.373C84.68 74.373 85.08 70.7064 84.58 68.873L80.58 59.373C78.2467 56.5397 73.58 49.473 73.58 43.873C73.58 38.2729 69.9134 37.873 68.08 38.373C64.08 42.373 60.4134 40.0397 59.08 38.373C54.28 36.773 53.7467 40.7063 54.08 42.873Z' fill='%235E5E5E'/%3E%3Cpath d='M59.0891 62.4676C58.5923 65.8092 60.2794 68.2359 61.5214 68.4348C66.4893 71.7763 70.4738 69.4293 71.5088 68.4348C72.9992 66.5253 71.7634 63.0643 70.5214 62.4676C68.5343 62.945 64.5564 63.661 63.5214 62.4676C62.031 60.5581 60.0214 60.4641 59.0891 62.4676Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:A9t},{name:"Tour",id:"ele-map-tour",markdown:C9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M65.08 35.873L67.58 45.373C68.83 50.123 76.08 52.373 80.58 52.373C84.18 52.373 85.7467 56.0397 86.08 57.873C85.08 61.0397 84.48 67.373 90.08 67.373C95.68 67.373 96.08 63.7064 95.58 61.873L91.58 52.373C89.2467 49.5397 84.58 42.473 84.58 36.873C84.58 31.2729 80.9134 30.873 79.08 31.373C75.08 35.373 71.4134 33.0397 70.08 31.373C65.28 29.773 64.7467 33.7063 65.08 35.873Z' fill='%235E5E5E'/%3E%3Cpath d='M70.0891 55.4676C69.5923 58.8092 71.2794 61.2359 72.5214 61.4348C77.4893 64.7763 81.4738 62.4293 82.5088 61.4348C83.9992 59.5253 82.7634 56.0643 81.5214 55.4676C79.5343 55.945 75.5564 56.661 74.5214 55.4676C73.031 53.5581 71.0214 53.4641 70.0891 55.4676Z' fill='%235E5E5E'/%3E%3Crect x='34' y='67' width='26' height='16' rx='2' fill='%23f7f7f7'/%3E%3C/svg%3E%0A",fields:k9t}]},{name:"Media",elements:[{name:"Simple",id:"ele-simple-media",markdown:T9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M69.5 39L73.2045 50.4012H85.1924L75.494 57.4476L79.1985 68.8488L69.5 61.8024L59.8015 68.8488L63.506 57.4476L53.8076 50.4012H65.7955L69.5 39Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:D9t},{name:"Hero Image",id:"ele-hero-image",markdown:L9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3C/svg%3E%0A",fields:R9t},{name:"Hero Video",id:"ele-hero-video",markdown:F9t,icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 138 112' fill='none'%3E%3Crect width='138' height='112' rx='4' fill='%23F2F2F2'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23D8D8D8'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3Cline x1='20.6233' y1='87.6712' x2='75.6233' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3Cline x1='64.6233' y1='87.6712' x2='119.623' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3C/svg%3E",fields:M9t}]}];var QC={exports:{}},$9t=QC.exports,jAe;function I9t(){return jAe||(jAe=1,function(e,t){(function(n,r){e.exports=r()})($9t,function(){function n(F){var H=function(J,re){if(typeof J!="object"||!J)return J;var ye=J[Symbol.toPrimitive];if(ye!==void 0){var xe=ye.call(J,re);if(typeof xe!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}(F,"string");return typeof H=="symbol"?H:H+""}function r(F){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(F)}function i(F,H){if(!(F instanceof H))throw new TypeError("Cannot call a class as a function")}function o(F,H){for(var J=0;J<H.length;J++){var re=H[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(F,n(re.key),re)}}function s(F,H,J){return H&&o(F.prototype,H),Object.defineProperty(F,"prototype",{writable:!1}),F}var a=Date.now();function l(){var F={},H=!0,J=0,re=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(H=arguments[0],J++);for(var ye=function(Re){for(var P in Re)Object.prototype.hasOwnProperty.call(Re,P)&&(H&&Object.prototype.toString.call(Re[P])==="[object Object]"?F[P]=l(!0,F[P],Re[P]):F[P]=Re[P])};J<re;J++){var xe=arguments[J];ye(xe)}return F}function u(F,H){if((K(F)||F===window||F===document)&&(F=[F]),$(F)||I(F)||(F=[F]),Y(F)!=0){if($(F)&&!I(F))for(var J=F.length,re=0;re<J&&H.call(F[re],F[re],re,F)!==!1;re++);else if(I(F)){for(var ye in F)if(q(F,ye)&&H.call(F[ye],F[ye],ye,F)===!1)break}}}function f(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F[a]=F[a]||[],ye={all:re,evt:null,found:null};return H&&J&&Y(re)>0&&u(re,function(xe,Re){if(xe.eventName==H&&xe.fn.toString()==J.toString())return ye.found=!0,ye.evt=Re,!1}),ye}function c(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=H.onElement,re=H.withCallback,ye=H.avoidDuplicate,xe=ye===void 0||ye,Re=H.once,P=Re!==void 0&&Re,Q=H.useCapture,oe=Q!==void 0&&Q,ae=arguments.length>2?arguments[2]:void 0,ke=J||[];function Ce(Ee){M(re)&&re.call(ae,Ee,this),P&&Ce.destroy()}return B(ke)&&(ke=document.querySelectorAll(ke)),Ce.destroy=function(){u(ke,function(Ee){var De=f(Ee,F,Ce);De.found&&De.all.splice(De.evt,1),Ee.removeEventListener&&Ee.removeEventListener(F,Ce,oe)})},u(ke,function(Ee){var De=f(Ee,F,Ce);(Ee.addEventListener&&xe&&!De.found||!xe)&&(Ee.addEventListener(F,Ce,oe),De.all.push({eventName:F,fn:Ce}))}),Ce}function d(F,H){u(H.split(" "),function(J){return F.classList.add(J)})}function h(F,H){u(H.split(" "),function(J){return F.classList.remove(J)})}function p(F,H){return F.classList.contains(H)}function m(F,H){for(;F!==document.body;){if(!(F=F.parentElement))return!1;if(typeof F.matches=="function"?F.matches(H):F.msMatchesSelector(H))return F}}function b(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||H==="")return!1;if(H==="none")return M(J)&&J(),!1;var re=T(),ye=H.split(" ");u(ye,function(xe){d(F,"g"+xe)}),c(re,{onElement:F,avoidDuplicate:!1,once:!0,withCallback:function(xe,Re){u(ye,function(P){h(Re,"g"+P)}),M(J)&&J()}})}function y(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(H==="")return F.style.webkitTransform="",F.style.MozTransform="",F.style.msTransform="",F.style.OTransform="",F.style.transform="",!1;F.style.webkitTransform=H,F.style.MozTransform=H,F.style.msTransform=H,F.style.OTransform=H,F.style.transform=H}function v(F){F.style.display="block"}function w(F){F.style.display="none"}function E(F){var H=document.createDocumentFragment(),J=document.createElement("div");for(J.innerHTML=F;J.firstChild;)H.appendChild(J.firstChild);return H}function A(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function T(){var F,H=document.createElement("fakeelement"),J={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(F in J)if(H.style[F]!==void 0)return J[F]}function D(F,H,J,re){if(F())H();else{var ye;J||(J=100);var xe=setInterval(function(){F()&&(clearInterval(xe),ye&&clearTimeout(ye),H())},J)}}function k(F,H,J){if(U(F))console.error("Inject assets error");else if(M(H)&&(J=H,H=!1),B(H)&&H in window)M(J)&&J();else{var re;if(F.indexOf(".css")!==-1){if((re=document.querySelectorAll('link[href="'+F+'"]'))&&re.length>0)return void(M(J)&&J());var ye=document.getElementsByTagName("head")[0],xe=ye.querySelectorAll('link[rel="stylesheet"]'),Re=document.createElement("link");return Re.rel="stylesheet",Re.type="text/css",Re.href=F,Re.media="all",xe?ye.insertBefore(Re,xe[0]):ye.appendChild(Re),void(M(J)&&J())}if((re=document.querySelectorAll('script[src="'+F+'"]'))&&re.length>0){if(M(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}}else{var P=document.createElement("script");P.type="text/javascript",P.src=F,P.onload=function(){if(M(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}},document.body.appendChild(P)}}}function R(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function M(F){return typeof F=="function"}function B(F){return typeof F=="string"}function K(F){return!(!F||!F.nodeType||F.nodeType!=1)}function L(F){return Array.isArray(F)}function $(F){return F&&F.length&&isFinite(F.length)}function I(F){return r(F)==="object"&&F!=null&&!M(F)&&!L(F)}function U(F){return F==null}function q(F,H){return F!==null&&hasOwnProperty.call(F,H)}function Y(F){if(I(F)){if(F.keys)return F.keys().length;var H=0;for(var J in F)q(F,J)&&H++;return H}return F.length}function X(F){return!isNaN(parseFloat(F))&&isFinite(F)}function te(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,H=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!H.length)return!1;if(H.length==1)return H[0];typeof F=="string"&&(F=parseInt(F));var J=[];u(H,function(P){J.push(P.getAttribute("data-taborder"))});var re=Math.max.apply(Math,J.map(function(P){return parseInt(P)})),ye=F<0?1:F+1;ye>re&&(ye="1");var xe=J.filter(function(P){return P>=parseInt(ye)}),Re=xe.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(Re,'"]'))}function le(F){if(F.events.hasOwnProperty("keyboard"))return!1;F.events.keyboard=c("keydown",{onElement:window,withCallback:function(H,J){var re=(H=H||window.event).keyCode;if(re==9){var ye=document.querySelector(".gbtn.focused");if(!ye){var xe=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(xe=="input"||xe=="textarea"||xe=="button")return}H.preventDefault();var Re=document.querySelectorAll(".gbtn[data-taborder]");if(!Re||Re.length<=0)return;if(!ye){var P=te();return void(P&&(P.focus(),d(P,"focused")))}var Q=te(ye.getAttribute("data-taborder"));h(ye,"focused"),Q&&(Q.focus(),d(Q,"focused"))}re==39&&F.nextSlide(),re==37&&F.prevSlide(),re==27&&F.close()}})}var ee=s(function F(H,J){var re=this,ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(i(this,F),this.img=H,this.slide=J,this.onclose=ye,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(xe){return re.dragStart(xe)},!1),this.img.addEventListener("mouseup",function(xe){return re.dragEnd(xe)},!1),this.img.addEventListener("mousemove",function(xe){return re.drag(xe)},!1),this.img.addEventListener("click",function(xe){return re.slide.classList.contains("dragging-nav")?(re.zoomOut(),!1):re.zoomedIn?void(re.zoomedIn&&!re.dragging&&re.zoomOut()):re.zoomIn()},!1),this.img.setZoomEvents=!0},[{key:"zoomIn",value:function(){var F=this.widowWidth();if(!(this.zoomedIn||F<=768)){var H=this.img;if(H.setAttribute("data-style",H.getAttribute("style")),H.style.maxWidth=H.naturalWidth+"px",H.style.maxHeight=H.naturalHeight+"px",H.naturalWidth>F){var J=F/2-H.naturalWidth/2;this.setTranslate(this.img.parentNode,J,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(F){F.preventDefault(),this.zoomedIn?(F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset),F.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(F){var H=this;F.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){H.dragging=!1,H.img.isDragging=!1,H.img.classList.remove("dragging")},100)}},{key:"drag",value:function(F){this.active&&(F.preventDefault(),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(F){if(this.zoomedIn){var H=F.clientX-this.img.naturalWidth/2,J=F.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,H,J)}}},{key:"setTranslate",value:function(F,H,J){F.style.transform="translate3d("+H+"px, "+J+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),z=s(function F(){var H=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F);var re=J.dragEl,ye=J.toleranceX,xe=ye===void 0?40:ye,Re=J.toleranceY,P=Re===void 0?65:Re,Q=J.slide,oe=Q===void 0?null:Q,ae=J.instance,ke=ae===void 0?null:ae;this.el=re,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=xe,this.toleranceY=P,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=oe,this.instance=ke,this.el.addEventListener("mousedown",function(Ce){return H.dragStart(Ce)},!1),this.el.addEventListener("mouseup",function(Ce){return H.dragEnd(Ce)},!1),this.el.addEventListener("mousemove",function(Ce){return H.drag(Ce)},!1)},[{key:"dragStart",value:function(F){if(this.slide.classList.contains("zoomed"))this.active=!1;else{F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset);var H=F.target.nodeName.toLowerCase();F.target.classList.contains("nodrag")||m(F.target,".nodrag")||["input","select","textarea","button","a"].indexOf(H)!==-1?this.active=!1:(F.preventDefault(),(F.target===this.el||H!=="img"&&m(F.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=m(F.target,".ginner-container")))}}},{key:"dragEnd",value:function(F){var H=this;F&&F.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){H.instance.preventOutsideClick=!1,H.toleranceReached=!1,H.lastDirection=null,H.dragging=!1,H.el.isDragging=!1,H.el.classList.remove("dragging"),H.slide.classList.remove("dragging-nav"),H.dragContainer.style.transform="",H.dragContainer.style.transition=""},100)}},{key:"drag",value:function(F){if(this.active){F.preventDefault(),this.slide.classList.add("dragging-nav"),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var H=Math.abs(this.currentX),J=Math.abs(this.currentY);if(H>0&&H>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var re=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&re&&(this.doSlideChange=re),this.instance.settings.dragAutoSnap&&re)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),re=="right"&&this.instance.prevSlide(),void(re=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&J>0&&J>=H&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var ye=this.shouldClose();return!this.instance.settings.dragAutoSnap&&ye&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&ye&&this.instance.close())}}}},{key:"shouldChange",value:function(){var F=!1;if(Math.abs(this.currentX)>=this.toleranceX){var H=this.currentX>0?"right":"left";(H=="left"&&this.slide!==this.slide.parentNode.lastChild||H=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(F=H)}return F}},{key:"shouldClose",value:function(){var F=!1;return Math.abs(this.currentY)>=this.toleranceY&&(F=!0),F}},{key:"setTranslate",value:function(F,H,J){var re=arguments.length>3&&arguments[3]!==void 0&&arguments[3];F.style.transition=re?"all .2s ease":"",F.style.transform="translate3d(".concat(H,"px, ").concat(J,"px, 0)")}}]);function he(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=new Image,Re="gSlideTitle_"+J,P="gSlideDesc_"+J;xe.addEventListener("load",function(){M(re)&&re()},!1),xe.src=H.href,H.sizes!=""&&H.srcset!=""&&(xe.sizes=H.sizes,xe.srcset=H.srcset),xe.alt="",U(H.alt)||H.alt===""||(xe.alt=H.alt),H.title!==""&&xe.setAttribute("aria-labelledby",Re),H.description!==""&&xe.setAttribute("aria-describedby",P),H.hasOwnProperty("_hasCustomWidth")&&H._hasCustomWidth&&(xe.style.width=H.width),H.hasOwnProperty("_hasCustomHeight")&&H._hasCustomHeight&&(xe.style.height=H.height),ye.insertBefore(xe,ye.firstChild)}function de(F,H,J,re){var ye=this,xe=F.querySelector(".ginner-container"),Re="gvideo"+J,P=F.querySelector(".gslide-media"),Q=this.getAllPlayers();d(xe,"gvideo-container"),P.insertBefore(E('<div class="gvideo-wrapper"></div>'),P.firstChild);var oe=F.querySelector(".gvideo-wrapper");k(this.settings.plyr.css,"Plyr");var ae=H.href,ke=H==null?void 0:H.videoProvider,Ce=!1;P.style.maxWidth=H.width,k(this.settings.plyr.js,"Plyr",function(){if(!ke&&ae.match(/vimeo\.com\/([0-9]*)/)&&(ke="vimeo"),!ke&&(ae.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||ae.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(ke="youtube"),ke==="local"||!ke){ke="local";var Ee='<video id="'+Re+'" ';Ee+='style="background:#000; max-width: '.concat(H.width,';" '),Ee+='preload="metadata" ',Ee+='x-webkit-airplay="allow" ',Ee+="playsinline ",Ee+="controls ",Ee+='class="gvideo-local">',Ee+='<source src="'.concat(ae,'">'),Ce=E(Ee+="</video>")}var De=Ce||E('<div id="'.concat(Re,'" data-plyr-provider="').concat(ke,'" data-plyr-embed-id="').concat(ae,'"></div>'));d(oe,"".concat(ke,"-video gvideo")),oe.appendChild(De),oe.setAttribute("data-id",Re),oe.setAttribute("data-index",J);var Me=q(ye.settings.plyr,"config")?ye.settings.plyr.config:{},We=new Plyr("#"+Re,Me);We.on("ready",function(tt){Q[Re]=tt.detail.plyr,M(re)&&re()}),D(function(){return F.querySelector("iframe")&&F.querySelector("iframe").dataset.ready=="true"},function(){ye.resize(F)}),We.on("enterfullscreen",ze),We.on("exitfullscreen",ze)})}function ze(F){var H=m(F.target,".gslide-media");F.type==="enterfullscreen"&&d(H,"fullscreen"),F.type==="exitfullscreen"&&h(H,"fullscreen")}function He(F,H,J,re){var ye,xe=this,Re=F.querySelector(".gslide-media"),P=!(!q(H,"href")||!H.href)&&H.href.split("#").pop().trim(),Q=!(!q(H,"content")||!H.content)&&H.content;if(Q&&(B(Q)&&(ye=E('<div class="ginlined-content">'.concat(Q,"</div>"))),K(Q))){Q.style.display=="none"&&(Q.style.display="block");var oe=document.createElement("div");oe.className="ginlined-content",oe.appendChild(Q),ye=oe}if(P){var ae=document.getElementById(P);if(!ae)return!1;var ke=ae.cloneNode(!0);ke.style.height=H.height,ke.style.maxWidth=H.width,d(ke,"ginlined-content"),ye=ke}if(!ye)return console.error("Unable to append inline slide content",H),!1;Re.style.height=H.height,Re.style.width=H.width,Re.appendChild(ye),this.events["inlineclose"+P]=c("click",{onElement:Re.querySelectorAll(".gtrigger-close"),withCallback:function(Ce){Ce.preventDefault(),xe.close()}}),M(re)&&re()}function je(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=function(Re){var P=Re.url,Q=Re.allow,oe=Re.callback,ae=Re.appendTo,ke=document.createElement("iframe");return ke.className="vimeo-video gvideo",ke.src=P,ke.style.width="100%",ke.style.height="100%",Q&&ke.setAttribute("allow",Q),ke.onload=function(){ke.onload=null,d(ke,"node-ready"),M(oe)&&oe()},ae&&ae.appendChild(ke),ke}({url:H.href,callback:re});ye.parentNode.style.maxWidth=H.width,ye.parentNode.style.height=H.height,ye.appendChild(xe)}var we=s(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},I(H)&&(this.defaults=l(this.defaults,H))},[{key:"sourceType",value:function(F){var H=F;return(F=F.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":F.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||F.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||F.match(/vimeo\.com\/([0-9]*)/)||F.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":F.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":F.indexOf("#")>-1&&H.split("#").pop().trim()!==""?"inline":F.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(F,H){var J=this,re=l({descPosition:H.descPosition},this.defaults);if(I(F)&&!K(F)){q(F,"type")||(q(F,"content")&&F.content?F.type="inline":q(F,"href")&&(F.type=this.sourceType(F.href)));var ye=l(re,F);return this.setSize(ye,H),ye}var xe="",Re=F.getAttribute("data-glightbox"),P=F.nodeName.toLowerCase();if(P==="a"&&(xe=F.href),P==="img"&&(xe=F.src,re.alt=F.alt),re.href=xe,u(re,function(Ee,De){q(H,De)&&De!=="width"&&(re[De]=H[De]);var Me=F.dataset[De];U(Me)||(re[De]=J.sanitizeValue(Me))}),re.content&&(re.type="inline"),!re.type&&xe&&(re.type=this.sourceType(xe)),U(Re)){if(!re.title&&P=="a"){var Q=F.title;U(Q)||Q===""||(re.title=Q)}if(!re.title&&P=="img"){var oe=F.alt;U(oe)||oe===""||(re.title=oe)}}else{var ae=[];u(re,function(Ee,De){ae.push(";\\s?"+De)}),ae=ae.join("\\s?:|"),Re.trim()!==""&&u(re,function(Ee,De){var Me=Re,We=new RegExp("s?"+De+"s?:s?(.*?)("+ae+"s?:|$)"),tt=Me.match(We);if(tt&&tt.length&&tt[1]){var dt=tt[1].trim().replace(/;\s*$/,"");re[De]=J.sanitizeValue(dt)}})}if(re.description&&re.description.substring(0,1)==="."){var ke;try{ke=document.querySelector(re.description).innerHTML}catch(Ee){if(!(Ee instanceof DOMException))throw Ee}ke&&(re.description=ke)}if(!re.description){var Ce=F.querySelector(".glightbox-desc");Ce&&(re.description=Ce.innerHTML)}return this.setSize(re,H,F),this.slideConfig=re,re}},{key:"setSize",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F.type=="video"?this.checkSize(H.videosWidth):this.checkSize(H.width),ye=this.checkSize(H.height);return F.width=q(F,"width")&&F.width!==""?this.checkSize(F.width):re,F.height=q(F,"height")&&F.height!==""?this.checkSize(F.height):ye,J&&F.type=="image"&&(F._hasCustomWidth=!!J.dataset.width,F._hasCustomHeight=!!J.dataset.height),F}},{key:"checkSize",value:function(F){return X(F)?"".concat(F,"px"):F}},{key:"sanitizeValue",value:function(F){return F!=="true"&&F!=="false"?F:F==="true"}}]),Ie=s(function F(H,J,re){i(this,F),this.element=H,this.instance=J,this.index=re},[{key:"setContent",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(p(H,"loaded"))return!1;var re=this.instance.settings,ye=this.slideConfig,xe=R();M(re.beforeSlideLoad)&&re.beforeSlideLoad({index:this.index,slide:H,player:!1});var Re=ye.type,P=ye.descPosition,Q=H.querySelector(".gslide-media"),oe=H.querySelector(".gslide-title"),ae=H.querySelector(".gslide-desc"),ke=H.querySelector(".gdesc-inner"),Ce=J,Ee="gSlideTitle_"+this.index,De="gSlideDesc_"+this.index;if(M(re.afterSlideLoad)&&(Ce=function(){M(J)&&J(),re.afterSlideLoad({index:F.index,slide:H,player:F.instance.getSlidePlayerInstance(F.index)})}),ye.title==""&&ye.description==""?ke&&ke.parentNode.parentNode.removeChild(ke.parentNode):(oe&&ye.title!==""?(oe.id=Ee,oe.innerHTML=ye.title):oe.parentNode.removeChild(oe),ae&&ye.description!==""?(ae.id=De,xe&&re.moreLength>0?(ye.smallDescription=this.slideShortDesc(ye.description,re.moreLength,re.moreText),ae.innerHTML=ye.smallDescription,this.descriptionEvents(ae,ye)):ae.innerHTML=ye.description):ae.parentNode.removeChild(ae),d(Q.parentNode,"desc-".concat(P)),d(ke.parentNode,"description-".concat(P))),d(Q,"gslide-".concat(Re)),d(H,"loaded"),Re!=="video"){if(Re!=="external")return Re==="inline"?(He.apply(this.instance,[H,ye,this.index,Ce]),void(ye.draggable&&new z({dragEl:H.querySelector(".gslide-inline"),toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:this.instance}))):void(Re!=="image"?M(Ce)&&Ce():he(H,ye,this.index,function(){var Me=H.querySelector("img");ye.draggable&&new z({dragEl:Me,toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:F.instance}),ye.zoomable&&Me.naturalWidth>Me.offsetWidth&&(d(Me,"zoomable"),new ee(Me,H,function(){F.instance.resize()})),M(Ce)&&Ce()}));je.apply(this,[H,ye,this.index,Ce])}else de.apply(this.instance,[H,ye,this.index,Ce])}},{key:"slideShortDesc",value:function(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,J=arguments.length>2&&arguments[2]!==void 0&&arguments[2],re=document.createElement("div");re.innerHTML=F;var ye=re.innerText,xe=J;if((F=ye.trim()).length<=H)return F;var Re=F.substr(0,H-1);return xe?(re=null,Re+'... <a href="#" class="desc-more">'+J+"</a>"):Re}},{key:"descriptionEvents",value:function(F,H){var J=this,re=F.querySelector(".desc-more");if(!re)return!1;c("click",{onElement:re,withCallback:function(ye,xe){ye.preventDefault();var Re=document.body,P=m(xe,".gslide-desc");if(!P)return!1;P.innerHTML=H.description,d(Re,"gdesc-open");var Q=c("click",{onElement:[Re,m(P,".gslide-description")],withCallback:function(oe,ae){oe.target.nodeName.toLowerCase()!=="a"&&(h(Re,"gdesc-open"),d(Re,"gdesc-closed"),P.innerHTML=H.smallDescription,J.descriptionEvents(P,H),setTimeout(function(){h(Re,"gdesc-closed")},400),Q.destroy())}})}})}},{key:"create",value:function(){return E(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){K(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var F=new we(this.instance.settings.slideExtraAttributes);return this.slideConfig=F.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function qe(F){return Math.sqrt(F.x*F.x+F.y*F.y)}function Pe(F,H){var J=function(re,ye){var xe=qe(re)*qe(ye);if(xe===0)return 0;var Re=function(P,Q){return P.x*Q.x+P.y*Q.y}(re,ye)/xe;return Re>1&&(Re=1),Math.acos(Re)}(F,H);return function(re,ye){return re.x*ye.y-ye.x*re.y}(F,H)>0&&(J*=-1),180*J/Math.PI}var At=s(function F(H){i(this,F),this.handlers=[],this.el=H},[{key:"add",value:function(F){this.handlers.push(F)}},{key:"del",value:function(F){F||(this.handlers=[]);for(var H=this.handlers.length;H>=0;H--)this.handlers[H]===F&&this.handlers.splice(H,1)}},{key:"dispatch",value:function(){for(var F=0,H=this.handlers.length;F<H;F++){var J=this.handlers[F];typeof J=="function"&&J.apply(this.el,arguments)}}}]);function ht(F,H){var J=new At(F);return J.add(H),J}var nn=s(function F(H,J){i(this,F),this.element=typeof H=="string"?document.querySelector(H):H,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var re=function(){};this.rotate=ht(this.element,J.rotate||re),this.touchStart=ht(this.element,J.touchStart||re),this.multipointStart=ht(this.element,J.multipointStart||re),this.multipointEnd=ht(this.element,J.multipointEnd||re),this.pinch=ht(this.element,J.pinch||re),this.swipe=ht(this.element,J.swipe||re),this.tap=ht(this.element,J.tap||re),this.doubleTap=ht(this.element,J.doubleTap||re),this.longTap=ht(this.element,J.longTap||re),this.singleTap=ht(this.element,J.singleTap||re),this.pressMove=ht(this.element,J.pressMove||re),this.twoFingerPressMove=ht(this.element,J.twoFingerPressMove||re),this.touchMove=ht(this.element,J.touchMove||re),this.touchEnd=ht(this.element,J.touchEnd||re),this.touchCancel=ht(this.element,J.touchCancel||re),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}},[{key:"start",value:function(F){if(F.touches)if(F.target&&F.target.nodeName&&["a","button","input"].indexOf(F.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",F.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=F.touches[0].pageX,this.y1=F.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(F,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var H=this.preV;if(F.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var J={x:F.touches[1].pageX-this.x1,y:F.touches[1].pageY-this.y1};H.x=J.x,H.y=J.y,this.pinchStartLen=qe(H),this.multipointStart.dispatch(F,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){this.longTap.dispatch(F,this.element),this._preventTap=!0}).bind(this),750)}}},{key:"move",value:function(F){if(F.touches){var H=this.preV,J=F.touches.length,re=F.touches[0].pageX,ye=F.touches[0].pageY;if(this.isDoubleTap=!1,J>1){var xe=F.touches[1].pageX,Re=F.touches[1].pageY,P={x:F.touches[1].pageX-re,y:F.touches[1].pageY-ye};H.x!==null&&(this.pinchStartLen>0&&(F.zoom=qe(P)/this.pinchStartLen,this.pinch.dispatch(F,this.element)),F.angle=Pe(P,H),this.rotate.dispatch(F,this.element)),H.x=P.x,H.y=P.y,this.x2!==null&&this.sx2!==null?(F.deltaX=(re-this.x2+xe-this.sx2)/2,F.deltaY=(ye-this.y2+Re-this.sy2)/2):(F.deltaX=0,F.deltaY=0),this.twoFingerPressMove.dispatch(F,this.element),this.sx2=xe,this.sy2=Re}else{if(this.x2!==null){F.deltaX=re-this.x2,F.deltaY=ye-this.y2;var Q=Math.abs(this.x1-this.x2),oe=Math.abs(this.y1-this.y2);(Q>10||oe>10)&&(this._preventTap=!0)}else F.deltaX=0,F.deltaY=0;this.pressMove.dispatch(F,this.element)}this.touchMove.dispatch(F,this.element),this._cancelLongTap(),this.x2=re,this.y2=ye,J>1&&F.preventDefault()}}},{key:"end",value:function(F){if(F.changedTouches){this._cancelLongTap();var H=this;F.touches.length<2&&(this.multipointEnd.dispatch(F,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(F.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){H.swipe.dispatch(F,H.element)},0)):(this.tapTimeout=setTimeout(function(){H._preventTap||H.tap.dispatch(F,H.element),H.isDoubleTap&&(H.doubleTap.dispatch(F,H.element),H.isDoubleTap=!1)},0),H.isDoubleTap||(H.singleTapTimeout=setTimeout(function(){H.singleTap.dispatch(F,H.element)},250))),this.touchEnd.dispatch(F,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(F){this.cancelAll(),this.touchCancel.dispatch(F,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(F,H,J,re){return Math.abs(F-H)>=Math.abs(J-re)?F-H>0?"Left":"Right":J-re>0?"Up":"Down"}},{key:"on",value:function(F,H){this[F]&&this[F].add(H)}},{key:"off",value:function(F,H){this[F]&&this[F].del(H)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function Vt(F){var H=function(){var Re,P=document.createElement("fakeelement"),Q={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(Re in Q)if(P.style[Re]!==void 0)return Q[Re]}(),J=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,re=p(F,"gslide-media")?F:F.querySelector(".gslide-media"),ye=m(re,".ginner-container"),xe=F.querySelector(".gslide-description");J>769&&(re=ye),d(re,"greset"),y(re,"translate3d(0, 0, 0)"),c(H,{onElement:re,once:!0,withCallback:function(Re,P){h(re,"greset")}}),re.style.opacity="",xe&&(xe.style.opacity="")}function On(F){if(F.events.hasOwnProperty("touch"))return!1;var H,J,re,ye=A(),xe=ye.width,Re=ye.height,P=!1,Q=null,oe=null,ae=null,ke=!1,Ce=1,Ee=1,De=!1,Me=!1,We=null,tt=null,dt=null,Kt=null,xt=0,Qt=0,rn=!1,on=!1,sn={},Tn={},Er=0,Ki=0,ho=document.getElementById("glightbox-slider"),Hi=document.querySelector(".goverlay"),Ns=new nn(ho,{touchStart:function(qn){if(P=!0,(p(qn.targetTouches[0].target,"ginner-container")||m(qn.targetTouches[0].target,".gslide-desc")||qn.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(P=!1),m(qn.targetTouches[0].target,".gslide-inline")&&!p(qn.targetTouches[0].target.parentNode,"gslide-inline")&&(P=!1),P){if(Tn=qn.targetTouches[0],sn.pageX=qn.targetTouches[0].pageX,sn.pageY=qn.targetTouches[0].pageY,Er=qn.targetTouches[0].clientX,Ki=qn.targetTouches[0].clientY,Q=F.activeSlide,oe=Q.querySelector(".gslide-media"),re=Q.querySelector(".gslide-inline"),ae=null,p(oe,"gslide-image")&&(ae=oe.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(oe=Q.querySelector(".ginner-container")),h(Hi,"greset"),qn.pageX>20&&qn.pageX<window.innerWidth-20)return;qn.preventDefault()}},touchMove:function(qn){if(P&&(Tn=qn.targetTouches[0],!De&&!Me)){if(re&&re.offsetHeight>Re){var Or=sn.pageX-Tn.pageX;if(Math.abs(Or)<=13)return!1}ke=!0;var Lr,mn=qn.targetTouches[0].clientX,Kr=qn.targetTouches[0].clientY,or=Er-mn,Ni=Ki-Kr;if(Math.abs(or)>Math.abs(Ni)?(rn=!1,on=!0):(on=!1,rn=!0),H=Tn.pageX-sn.pageX,xt=100*H/xe,J=Tn.pageY-sn.pageY,Qt=100*J/Re,rn&&ae&&(Lr=1-Math.abs(J)/Re,Hi.style.opacity=Lr,F.settings.touchFollowAxis&&(xt=0)),on&&(Lr=1-Math.abs(H)/xe,oe.style.opacity=Lr,F.settings.touchFollowAxis&&(Qt=0)),!ae)return y(oe,"translate3d(".concat(xt,"%, 0, 0)"));y(oe,"translate3d(".concat(xt,"%, ").concat(Qt,"%, 0)"))}},touchEnd:function(){if(P){if(ke=!1,Me||De)return dt=We,void(Kt=tt);var qn=Math.abs(parseInt(Qt)),Or=Math.abs(parseInt(xt));if(!(qn>29&&ae))return qn<29&&Or<25?(d(Hi,"greset"),Hi.style.opacity=1,Vt(oe)):void 0;F.close()}},multipointEnd:function(){setTimeout(function(){De=!1},50)},multipointStart:function(){De=!0,Ce=Ee||1},pinch:function(qn){if(!ae||ke)return!1;De=!0,ae.scaleX=ae.scaleY=Ce*qn.zoom;var Or=Ce*qn.zoom;if(Me=!0,Or<=1)return Me=!1,Or=1,Kt=null,dt=null,We=null,tt=null,void ae.setAttribute("style","");Or>4.5&&(Or=4.5),ae.style.transform="scale3d(".concat(Or,", ").concat(Or,", 1)"),Ee=Or},pressMove:function(qn){if(Me&&!De){var Or=Tn.pageX-sn.pageX,Lr=Tn.pageY-sn.pageY;dt&&(Or+=dt),Kt&&(Lr+=Kt),We=Or,tt=Lr;var mn="translate3d(".concat(Or,"px, ").concat(Lr,"px, 0)");Ee&&(mn+=" scale3d(".concat(Ee,", ").concat(Ee,", 1)")),y(ae,mn)}},swipe:function(qn){if(!Me)if(De)De=!1;else{if(qn.direction=="Left"){if(F.index==F.elements.length-1)return Vt(oe);F.nextSlide()}if(qn.direction=="Right"){if(F.index==0)return Vt(oe);F.prevSlide()}}}});F.events.touch=Ns}var Ze=R(),pe=R()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,ie=document.getElementsByTagName("html")[0],se={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},ve=s(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F),this.customOptions=H,this.settings=l(se,H),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1},[{key:"init",value:function(){var F=this,H=this.getSelector();H&&(this.baseEvents=c("click",{onElement:H,withCallback:function(J,re){J.preventDefault(),F.open(re)}})),this.elements=this.getElements()}},{key:"open",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var J=X(H)?H:this.settings.startAt;if(K(F)){var re=F.getAttribute("data-gallery");re&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,re)),U(J)&&(J=this.getElementIndex(F))<0&&(J=0)}X(J)||(J=0),this.build(),b(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var ye=document.body,xe=window.innerWidth-document.documentElement.clientWidth;if(xe>0){var Re=document.createElement("style");Re.type="text/css",Re.className="gcss-styles",Re.innerText=".gscrollbar-fixer {margin-right: ".concat(xe,"px}"),document.head.appendChild(Re),d(ye,"gscrollbar-fixer")}d(ye,"glightbox-open"),d(ie,"glightbox-open"),Ze&&(d(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(J,!0),this.elements.length===1?(d(this.prevButton,"glightbox-button-hidden"),d(this.nextButton,"glightbox-button-hidden")):(h(this.prevButton,"glightbox-button-hidden"),h(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),M(this.settings.onOpen)&&this.settings.onOpen(),pe&&this.settings.touchNavigation&&On(this),this.settings.keyboardNavigation&&le(this)}},{key:"openAt",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,F)}},{key:"showSlide",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];v(this.loader),this.index=parseInt(H);var re=this.slidesContainer.querySelector(".current");re&&h(re,"current"),this.slideAnimateOut();var ye=this.slidesContainer.querySelectorAll(".gslide")[H];if(p(ye,"loaded"))this.slideAnimateIn(ye,J),w(this.loader);else{v(this.loader);var xe=this.elements[H],Re={index:this.index,slide:ye,slideNode:ye,slideConfig:xe.slideConfig,slideIndex:this.index,trigger:xe.node,player:null};this.trigger("slide_before_load",Re),xe.instance.setContent(ye,function(){w(F.loader),F.resize(),F.slideAnimateIn(ye,J),F.trigger("slide_after_load",Re)})}this.slideDescription=ye.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&p(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(H+1),this.preloadSlide(H-1)),this.updateNavigationClasses(),this.activeSlide=ye}},{key:"preloadSlide",value:function(F){var H=this;if(F<0||F>this.elements.length-1||U(this.elements[F]))return!1;var J=this.slidesContainer.querySelectorAll(".gslide")[F];if(p(J,"loaded"))return!1;var re=this.elements[F],ye=re.type,xe={index:F,slide:J,slideNode:J,slideConfig:re.slideConfig,slideIndex:F,trigger:re.node,player:null};this.trigger("slide_before_load",xe),ye==="video"||ye==="external"?setTimeout(function(){re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})},200):re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(F<0||F>this.elements.length-1))return!1;F<0?F=this.elements.length-1:F>=this.elements.length&&(F=0),this.showSlide(F)}},{key:"insertSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;H<0&&(H=this.elements.length);var J=new Ie(F,this,H),re=J.getConfig(),ye=l({},re),xe=J.create(),Re=this.elements.length-1;ye.index=H,ye.node=!1,ye.instance=J,ye.slideConfig=re,this.elements.splice(H,0,ye);var P=null,Q=null;if(this.slidesContainer){if(H>Re)this.slidesContainer.appendChild(xe);else{var oe=this.slidesContainer.querySelectorAll(".gslide")[H];this.slidesContainer.insertBefore(xe,oe)}(this.settings.preload&&this.index==0&&H==0||this.index-1==H||this.index+1==H)&&this.preloadSlide(H),this.index===0&&H===0&&(this.index=1),this.updateNavigationClasses(),P=this.slidesContainer.querySelectorAll(".gslide")[H],Q=this.getSlidePlayerInstance(H),ye.slideNode=P}this.trigger("slide_inserted",{index:H,slide:P,slideNode:P,slideConfig:re,slideIndex:H,trigger:null,player:Q}),M(this.settings.slideInserted)&&this.settings.slideInserted({index:H,slide:P,player:Q})}},{key:"removeSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(F<0||F>this.elements.length-1)return!1;var H=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[F];H&&(this.getActiveSlideIndex()==F&&(F==this.elements.length-1?this.prevSlide():this.nextSlide()),H.parentNode.removeChild(H)),this.elements.splice(F,1),this.trigger("slide_removed",F),M(this.settings.slideRemoved)&&this.settings.slideRemoved(F)}},{key:"slideAnimateIn",value:function(F,H){var J=this,re=F.querySelector(".gslide-media"),ye=F.querySelector(".gslide-description"),xe={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},Re={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(re.offsetWidth>0&&ye&&(w(ye),ye.style.display=""),h(F,this.effectsClasses),H)b(F,this.settings.cssEfects[this.settings.openEffect].in,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),M(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])});else{var P=this.settings.slideEffect,Q=P!=="none"?this.settings.cssEfects[P].in:P;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(Q=this.settings.cssEfects.slideBack.in),b(F,Q,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),M(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])})}setTimeout(function(){J.resize(F)},100),d(F,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var F=this.prevActiveSlide;h(F,this.effectsClasses),d(F,"prev");var H=this.settings.slideEffect,J=H!=="none"?this.settings.cssEfects[H].out:H;this.slidePlayerPause(F),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),M(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(J=this.settings.cssEfects.slideBack.out),b(F,J,function(){var re=F.querySelector(".ginner-container"),ye=F.querySelector(".gslide-media"),xe=F.querySelector(".gslide-description");re.style.transform="",ye.style.transform="",h(ye,"greset"),ye.style.opacity="",xe&&(xe.style.opacity=""),h(F,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(F){var H="gvideo"+F,J=this.getAllPlayers();return!(!q(J,H)||!J[H])&&J[H]}},{key:"stopSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"slidePlayerPause",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"playSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var J=this.getSlidePlayerInstance(F);J&&!J.playing&&J.play()}},{key:"slidePlayerPlay",value:function(F){var H;if(!Ze||(H=this.settings.plyr.config)!==null&&H!==void 0&&H.muted){if(K(F)){var J=F.querySelector(".gvideo-wrapper");J&&(F=J.getAttribute("data-index"))}var re=this.getSlidePlayerInstance(F);re&&!re.playing&&(re.play(),this.settings.autofocusVideos&&re.elements.container.focus())}}},{key:"setElements",value:function(F){var H=this;this.settings.elements=!1;var J=[];F&&F.length&&u(F,function(re,ye){var xe=new Ie(re,H,ye),Re=xe.getConfig(),P=l({},Re);P.slideConfig=Re,P.instance=xe,P.index=ye,J.push(P)}),this.elements=J,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(u(this.elements,function(){var re=E(H.settings.slideHTML);H.slidesContainer.appendChild(re)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(F){var H=!1;return u(this.elements,function(J,re){if(q(J,"node")&&J.node==F)return H=re,!0}),H}},{key:"getElements",value:function(){var F=this,H=[];this.elements=this.elements?this.elements:[],!U(this.settings.elements)&&L(this.settings.elements)&&this.settings.elements.length&&u(this.settings.elements,function(re,ye){var xe=new Ie(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=!1,P.index=ye,P.instance=xe,P.slideConfig=Re,H.push(P)});var J=!1;return this.getSelector()&&(J=document.querySelectorAll(this.getSelector())),J&&u(J,function(re,ye){var xe=new Ie(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=re,P.index=ye,P.instance=xe,P.slideConfig=Re,P.gallery=re.getAttribute("data-gallery"),H.push(P)}),H}},{key:"getGalleryElements",value:function(F,H){return F.filter(function(J){return J.gallery==H})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var F=[];for(var H in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(H)){var J=this.settings.cssEfects[H];F.push("g".concat(J.in)),F.push("g".concat(J.out))}return F.join(" ")}},{key:"build",value:function(){var F=this;if(this.built)return!1;var H=document.body.childNodes,J=[];u(H,function(oe){oe.parentNode==document.body&&oe.nodeName.charAt(0)!=="#"&&oe.hasAttribute&&!oe.hasAttribute("aria-hidden")&&(J.push(oe),oe.setAttribute("aria-hidden","true"))});var re=q(this.settings.svg,"next")?this.settings.svg.next:"",ye=q(this.settings.svg,"prev")?this.settings.svg.prev:"",xe=q(this.settings.svg,"close")?this.settings.svg.close:"",Re=this.settings.lightboxHTML;Re=E(Re=(Re=(Re=Re.replace(/{nextSVG}/g,re)).replace(/{prevSVG}/g,ye)).replace(/{closeSVG}/g,xe)),document.body.appendChild(Re);var P=document.getElementById("glightbox-body");this.modal=P;var Q=P.querySelector(".gclose");this.prevButton=P.querySelector(".gprev"),this.nextButton=P.querySelector(".gnext"),this.overlay=P.querySelector(".goverlay"),this.loader=P.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=J,this.events={},d(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&Q&&(this.events.close=c("click",{onElement:Q,withCallback:function(oe,ae){oe.preventDefault(),F.close()}})),Q&&!this.settings.closeButton&&Q.parentNode.removeChild(Q),this.nextButton&&(this.events.next=c("click",{onElement:this.nextButton,withCallback:function(oe,ae){oe.preventDefault(),F.nextSlide()}})),this.prevButton&&(this.events.prev=c("click",{onElement:this.prevButton,withCallback:function(oe,ae){oe.preventDefault(),F.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=c("click",{onElement:P,withCallback:function(oe,ae){F.preventOutsideClick||p(document.body,"glightbox-mobile")||m(oe.target,".ginner-container")||m(oe.target,".gbtn")||p(oe.target,"gnext")||p(oe.target,"gprev")||F.close()}})),u(this.elements,function(oe,ae){F.slidesContainer.appendChild(oe.instance.create()),oe.slideNode=F.slidesContainer.querySelectorAll(".gslide")[ae]}),pe&&d(document.body,"glightbox-touch"),this.events.resize=c("resize",{onElement:window,withCallback:function(){F.resize()}}),this.built=!0}},{key:"resize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((F=F||this.activeSlide)&&!p(F,"zoomed")){var H=A(),J=F.querySelector(".gvideo-wrapper"),re=F.querySelector(".gslide-image"),ye=this.slideDescription,xe=H.width,Re=H.height;if(xe<=768?d(document.body,"glightbox-mobile"):h(document.body,"glightbox-mobile"),J||re){var P=!1;if(ye&&(p(ye,"description-bottom")||p(ye,"description-top"))&&!p(ye,"gabsolute")&&(P=!0),re){if(xe<=768)re.querySelector("img");else if(P){var Q,oe=ye.offsetHeight,ae=re.querySelector("img"),ke=this.elements[this.index].node,Ce=(Q=ke.getAttribute("data-height"))!==null&&Q!==void 0?Q:"100vh";ae.setAttribute("style","max-height: calc(".concat(Ce," - ").concat(oe,"px)")),ye.setAttribute("style","max-width: ".concat(ae.offsetWidth,"px;"))}}if(J){var Ee=q(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!Ee){var De=J.clientWidth,Me=J.clientHeight,We=De/Me;Ee="".concat(De/We,":").concat(Me/We)}var tt=Ee.split(":"),dt=this.settings.videosWidth,Kt=this.settings.videosWidth,xt=(Kt=X(dt)||dt.indexOf("px")!==-1?parseInt(dt):dt.indexOf("vw")!==-1?xe*parseInt(dt)/100:dt.indexOf("vh")!==-1?Re*parseInt(dt)/100:dt.indexOf("%")!==-1?xe*parseInt(dt)/100:parseInt(J.clientWidth))/(parseInt(tt[0])/parseInt(tt[1]));if(xt=Math.floor(xt),P&&(Re-=ye.offsetHeight),Kt>xe||xt>Re||Re<xt&&xe>Kt){var Qt=J.offsetWidth,rn=J.offsetHeight,on=Re/rn,sn={width:Qt*on,height:rn*on};J.parentNode.setAttribute("style","max-width: ".concat(sn.width,"px")),P&&ye.setAttribute("style","max-width: ".concat(sn.width,"px;"))}else J.parentNode.style.maxWidth="".concat(dt),P&&ye.setAttribute("style","max-width: ".concat(dt,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var F=this.loop();h(this.nextButton,"disabled"),h(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(d(this.prevButton,"disabled"),d(this.nextButton,"disabled")):this.index!==0||F?this.index!==this.elements.length-1||F||d(this.nextButton,"disabled"):d(this.prevButton,"disabled")}},{key:"loop",value:function(){var F=q(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return F=q(this.settings,"loop")?this.settings.loop:F,F}},{key:"close",value:function(){var F=this;if(!this.lightboxOpen){if(this.events){for(var H in this.events)this.events.hasOwnProperty(H)&&this.events[H].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&u(this.bodyHiddenChildElms,function(J){J.removeAttribute("aria-hidden")}),d(this.modal,"glightbox-closing"),b(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),b(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(F.activeSlide=null,F.prevActiveSlideIndex=null,F.prevActiveSlide=null,F.built=!1,F.events){for(var J in F.events)F.events.hasOwnProperty(J)&&F.events[J].destroy();F.events=null}var re=document.body;h(ie,"glightbox-open"),h(re,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),F.modal.parentNode.removeChild(F.modal),F.trigger("close"),M(F.settings.onClose)&&F.settings.onClose();var ye=document.querySelector(".gcss-styles");ye&&ye.parentNode.removeChild(ye),F.lightboxOpen=!1,F.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||!M(H))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:F,once:J,callback:H})}},{key:"once",value:function(F,H){this.on(F,H,!0)}},{key:"trigger",value:function(F){var H=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,re=[];u(this.apiEvents,function(ye,xe){var Re=ye.evt,P=ye.once,Q=ye.callback;Re==F&&(Q(J),P&&re.push(xe))}),re.length&&u(re,function(ye){return H.apiEvents.splice(ye,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.0"}}]);return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=new ve(F);return H.init(),H}})}(QC)),QC.exports}var P9t=I9t();const N9t=oa(P9t);let AM=[],CM=[];function B9t(e,t,n,r){const o=new DOMParser().parseFromString(e,"text/html"),s=r.shadowRoot||r,a=!!(r.showNav&&r.nav.length);o.querySelectorAll("a").forEach(f=>f.target="_blank"),AM.forEach(f=>f==null?void 0:f.disconnect()),AM=[],CM.forEach(f=>f==null?void 0:f.disconnect()),CM=[],a&&r.nav.forEach(f=>{const c=new IntersectionObserver(d=>{d.forEach(h=>{const p=h.isIntersecting,m=h.target.getAttribute("id");p&&s.querySelectorAll(".navigation li").forEach(b=>{b.classList.contains(`nav-${m}`)?b.classList.add("active"):b.classList.remove("active")})})},{rootMargin:"-50% 0px"});setTimeout(()=>{const d=s.querySelector(`#${f.id}`);d&&(c.observe(d),AM.push(c))},200)}),Object.keys(t).forEach(f=>{const c=t[f];if(s9t.includes(c.mode)&&c.steps){const d=`${c.as}#${c.id}`,h=new IntersectionObserver(p=>{p.forEach(m=>{const b=m.isIntersecting,y=Number(m.target.getAttribute("key"));b&&UAe(c,y,d,s)})});setTimeout(()=>{if(!s.querySelector(`#${f}`))return;s.querySelectorAll(`#${f} section-step`).forEach((b,y)=>{b.setAttribute("key",`${y}`),h.observe(b)}),CM.push(h),UAe(c,0,d,s)},100)}});function u(){s.querySelectorAll(".story-telling .hero img, .story-telling .hero video").forEach(function(c){c.getAttribute("data-parallax")==="true"&&(c.style.transform="translateY("+c.getBoundingClientRect().top*.1+"px)")})}return window.removeEventListener("scroll",u),window.addEventListener("scroll",u),Array.from(o.body.childNodes).map(f=>z9t(f,n))}function UAe(e,t,n,r){const i=r.querySelector(n);Object.keys(e.steps[t]).forEach(o=>{i[o]=e.steps[t][o]})}function z9t(e,t){if(e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("*").forEach(r=>{/^[a-z]+(-[a-z0-9]+)*$/.test(r.tagName.toLowerCase())&&e.classList.contains("section-custom")&&Array.from(r.attributes).forEach(i=>r[i.name]=iz(r,i.name)),setTimeout(()=>t(r),100)}),e.querySelectorAll){const n=N9t({autoplayVideos:!0}),r=[];e.querySelectorAll("img").forEach(o=>{const s=o.getAttribute("mode");o.parentNode.tagName!=="A"&&s!=="hero"&&(o.style.cursor="zoom-in",o.addEventListener("click",()=>{n.open()}),r.push({type:"image",href:o.src}))}),n.setElements(r)}return e}function iz(e,t=void 0){const n=t?e.getAttribute(t):e;return KPe(n)}function KPe(e){let t;try{t=JSON.parse(e)}catch{!isNaN(e)&&e.trim()!==""?t=Number(e):e==="true"?t=!0:e==="false"?t=!1:t=e}return t}function j9t(e,t,n,r){const i=n.getBoundingClientRect(),o=(i.right+i.left)/2,s=25/2,a=t?i.top-s:void 0,l=t?i.top+s:void 0,u=i.bottom-s,f=i.bottom+s,c=o-s,d=o+s,{clientX:h,clientY:p}=e;if(h>=c&&h<=d&&(p>=u||p>=a)&&(p<=f||p<=l)&&r.showEditor!=="closed"){const b=t?p>=a&&p<=l:!1,y=Number(n.getAttribute("data-section"));r.addCustomSectionIndex=b?y-1:y,r.requestUpdate()}}function U9t(e,t,n,r,i){const o=new DOMParser;let s=-1;if(n&&t.length&&e.length){s=0;const a=`
    <div class="navigation">
      <div class="container nav-container">
        <span class="hamburger-menu" aria-label="Toggle navigation">
        </span>
        <div class="nav-overlay"></div>
        <ul class="nav-list">
          ${t.map(({id:h,title:p,state:m})=>m?`<li class="nav-${h}"><a href="#${h}">${p}</a></li>`:"").join("")}
        </ul>
      </div>
    </div>
  `,l=o.parseFromString(a,"text/html").body.firstChild,u=l.querySelector(".hamburger-menu"),f=l.querySelector(".navigation .container ul"),c=l.querySelector(".nav-overlay"),d=l.querySelectorAll(".nav-list li");if(u&&f){const h=()=>{u.classList.toggle("active"),f.classList.toggle("show"),c.classList.toggle("show")};u.addEventListener("click",()=>h()),c.addEventListener("click",()=>h()),d.forEach(p=>{p.addEventListener("click",()=>h())})}e[0].classList.contains("hero")&&(s=1),e.splice(s,0,l)}if(e.length){const a=s+1;e[a].classList.add("section-start"),e.slice(a).forEach((l,u)=>{if(l.classList.add("section-item"),l.setAttribute("data-section",`${u+1}`),r!==void 0){const f=l.classList.contains("section-start");l.addEventListener("click",function(c){j9t(c,f,this,i)})}})}return e}const q9t="@eox/storytelling",H9t="1.4.3",G9t="module",V9t={vite:"^6.0.3"},W9t={npm:">=8.0.0",node:">=18.0.0"},Y9t=["types","dist","src"],X9t="./src/main.js",Z9t="./types/src/main.d.ts",K9t={"*":{".":["./types/src/main.d.ts"],"src/*":["./types/src/*"]}},J9t={prepack:"tsc -p tsconfig.build.json || true",build:"vite build",watch:"vite build --watch"},Q9t={"@eox/elements-utils":"^0.1.3","@sindresorhus/slugify":"^2.2.1",glightbox:"^3.3.0","isomorphic-dompurify":"^2.4.0",joi:"^17.12.3","js-yaml":"^4.1.0",lit:"^3.2.0","lodash.debounce":"^4.0.8","markdown-it":"^14.0.0"},e7t={"@eox/jsonform":"*"},dC={name:q9t,version:H9t,type:G9t,devDependencies:V9t,engines:W9t,files:Y9t,main:X9t,types:Z9t,typesVersions:K9t,scripts:J9t,dependencies:Q9t,peerDependencies:e7t};function t7t(e,t){(e.shadowRoot||e).querySelectorAll(t).forEach(n=>{n.addEventListener("click",r=>{r.preventDefault(),window.parent.location.hash=r.target.hash.replace("#",""),JPe(e)})})}function JPe(e){const t=window.parent.location.hash,n=t?e.shadowRoot.querySelector(t):null;n&&n.scrollIntoView({behavior:"smooth"})}function n7t(e){return{tagNameCheck:r=>r.match(new RegExp(/^[a-z]+(-[a-z0-9]+)*$/)),attributeNameCheck:r=>r.match(new RegExp(e.attrs.keys.join("|"))),allowCustomizedBuiltInElements:!0}}function r7t(){const e=document.createElement("style");e.innerHTML=`
      @import url("https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css");
    `,document.body.appendChild(e)}function kM(e){const t=e.split("-")[0].split(".").map(Number);let n=0;const r=1e3;for(let i=0;i<t.length;i++)n+=t[i]*Math.pow(r,t.length-i-1);return n}function i7t(e){const t=Number(Object.keys(EM).find(r=>EM[r].length===1)),n=EM[e];if(!e||!n)return console.warn(`Version not (or wrongly) specified in markdown frontmatter. Assuming latest markdown syntax version (v${t}).`),t;if(t===e)return e;{const r=[kM(n[0]),kM(n[1])],i=kM(dC.version);return i>=r[0]&&i<=r[1]||console.error(`You are using an older or newer version of ${dC.name} package, which is not compatible with the version defined in the markdown frontmatter. Please update the ${dC.name} package to (>=${n[0]} and <=${n[1]}) or change the markdown syntax version to ${dC.version}`),e}}var TM={exports:{}},qAe;function o7t(){return qAe||(qAe=1,function(e,t){(function(n,r){e.exports=r()})(self,()=>{return n={7629:(i,o,s)=>{const a=s(375),l=s(8571),u=s(9474),f=s(1687),c=s(8652),d=s(8160),h=s(3292),p=s(6354),m=s(8901),b=s(9708),y=s(6914),v=s(2294),w=s(6133),E=s(1152),A=s(8863),T=s(2036),D={Base:class{constructor(k){this.type=k,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new v.Ids,this._preferences=null,this._refs=new w.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof b.describe=="function","Manifest functionality disabled"),b.describe(this)}allow(...k){return d.verifyFlat(k,"allow"),this._values(k,"_valids")}alter(k){a(k&&typeof k=="object"&&!Array.isArray(k),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const R=this.clone();R.$_terms.alterations=R.$_terms.alterations||[];for(const M in k){const B=k[M];a(typeof B=="function","Alteration adjuster for",M,"must be a function"),R.$_terms.alterations.push({target:M,adjuster:B})}return R.$_temp.ruleset=!1,R}artifact(k){return a(k!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",k)}cast(k){return a(k===!1||typeof k=="string","Invalid to value"),a(k===!1||this._definition.cast[k],"Type",this.type,"does not support casting to",k),this.$_setFlag("cast",k===!1?void 0:k)}default(k,R){return this._default("default",k,R)}description(k){return a(k&&typeof k=="string","Description must be a non-empty string"),this.$_setFlag("description",k)}empty(k){const R=this.clone();return k!==void 0&&(k=R.$_compile(k,{override:!1})),R.$_setFlag("empty",k,{clone:!1})}error(k){return a(k,"Missing error"),a(k instanceof Error||typeof k=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",k)}example(k,R={}){return a(k!==void 0,"Missing example"),d.assertOptions(R,["override"]),this._inner("examples",k,{single:!0,override:R.override})}external(k,R){return typeof k=="object"&&(a(!R,"Cannot combine options with description"),R=k.description,k=k.method),a(typeof k=="function","Method must be a function"),a(R===void 0||R&&typeof R=="string","Description must be a non-empty string"),this._inner("externals",{method:k,description:R},{single:!0})}failover(k,R){return this._default("failover",k,R)}forbidden(){return this.presence("forbidden")}id(k){return k?(a(typeof k=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(k),"id cannot contain period character"),this.$_setFlag("id",k)):this.$_setFlag("id",void 0)}invalid(...k){return this._values(k,"_invalids")}label(k){return a(k&&typeof k=="string","Label name must be a non-empty string"),this.$_setFlag("label",k)}meta(k){return a(k!==void 0,"Meta cannot be undefined"),this._inner("metas",k,{single:!0})}note(...k){a(k.length,"Missing notes");for(const R of k)a(R&&typeof R=="string","Notes must be non-empty strings");return this._inner("notes",k)}only(k=!0){return a(typeof k=="boolean","Invalid mode:",k),this.$_setFlag("only",k)}optional(){return this.presence("optional")}prefs(k){a(k,"Missing preferences"),a(k.context===void 0,"Cannot override context"),a(k.externals===void 0,"Cannot override externals"),a(k.warnings===void 0,"Cannot override warnings"),a(k.debug===void 0,"Cannot override debug"),d.checkPreferences(k);const R=this.clone();return R._preferences=d.preferences(R._preferences,k),R}presence(k){return a(["optional","required","forbidden"].includes(k),"Unknown presence mode",k),this.$_setFlag("presence",k)}raw(k=!0){return this.$_setFlag("result",k?"raw":void 0)}result(k){return a(["raw","strip"].includes(k),"Unknown result mode",k),this.$_setFlag("result",k)}required(){return this.presence("required")}strict(k){const R=this.clone(),M=k!==void 0&&!k;return R._preferences=d.preferences(R._preferences,{convert:M}),R}strip(k=!0){return this.$_setFlag("result",k?"strip":void 0)}tag(...k){a(k.length,"Missing tags");for(const R of k)a(R&&typeof R=="string","Tags must be non-empty strings");return this._inner("tags",k)}unit(k){return a(k&&typeof k=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",k)}valid(...k){d.verifyFlat(k,"valid");const R=this.allow(...k);return R.$_setFlag("only",!!R._valids,{clone:!1}),R}when(k,R){const M=this.clone();M.$_terms.whens||(M.$_terms.whens=[]);const B=h.when(M,k,R);if(!["any","link"].includes(M.type)){const K=B.is?[B]:B.switch;for(const L of K)a(!L.then||L.then.type==="any"||L.then.type===M.type,"Cannot combine",M.type,"with",L.then&&L.then.type),a(!L.otherwise||L.otherwise.type==="any"||L.otherwise.type===M.type,"Cannot combine",M.type,"with",L.otherwise&&L.otherwise.type)}return M.$_terms.whens.push(B),M.$_mutateRebuild()}cache(k){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const R=this.clone();return R._cache=k||c.provider.provision(),R.$_temp.ruleset=!1,R}clone(){const k=Object.create(Object.getPrototypeOf(this));return this._assign(k)}concat(k){a(d.isSchema(k),"Invalid schema object"),a(this.type==="any"||k.type==="any"||k.type===this.type,"Cannot merge type",this.type,"with another type:",k.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!k._inRuleset(),"Cannot concatenate a schema with open ruleset");let R=this.clone();if(this.type==="any"&&k.type!=="any"){const M=k.clone();for(const B of Object.keys(R))B!=="type"&&(M[B]=R[B]);R=M}R._ids.concat(k._ids),R._refs.register(k,w.toSibling),R._preferences=R._preferences?d.preferences(R._preferences,k._preferences):k._preferences,R._valids=T.merge(R._valids,k._valids,k._invalids),R._invalids=T.merge(R._invalids,k._invalids,k._valids);for(const M of k._singleRules.keys())R._singleRules.has(M)&&(R._rules=R._rules.filter(B=>B.keep||B.name!==M),R._singleRules.delete(M));for(const M of k._rules)k._definition.rules[M.method].multi||R._singleRules.set(M.name,M),R._rules.push(M);if(R._flags.empty&&k._flags.empty){R._flags.empty=R._flags.empty.concat(k._flags.empty);const M=Object.assign({},k._flags);delete M.empty,f(R._flags,M)}else if(k._flags.empty){R._flags.empty=k._flags.empty;const M=Object.assign({},k._flags);delete M.empty,f(R._flags,M)}else f(R._flags,k._flags);for(const M in k.$_terms){const B=k.$_terms[M];B?R.$_terms[M]?R.$_terms[M]=R.$_terms[M].concat(B):R.$_terms[M]=B.slice():R.$_terms[M]||(R.$_terms[M]=B)}return this.$_root._tracer&&this.$_root._tracer._combine(R,[this,k]),R.$_mutateRebuild()}extend(k){return a(!k.base,"Cannot extend type with another base"),m.type(this,k)}extract(k){return k=Array.isArray(k)?k:k.split("."),this._ids.reach(k)}fork(k,R){a(!this._inRuleset(),"Cannot fork inside a ruleset");let M=this;for(let B of[].concat(k))B=Array.isArray(B)?B:B.split("."),M=M._ids.fork(B,R,M);return M.$_temp.ruleset=!1,M}rule(k){const R=this._definition;d.assertOptions(k,Object.keys(R.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const M=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(M>=0&&M<this._rules.length,"Cannot apply rules to empty ruleset");const B=this.clone();for(let K=M;K<B._rules.length;++K){const L=B._rules[K],$=l(L);for(const I in k)R.modifiers[I]($,k[I]),a($.name===L.name,"Cannot change rule name");B._rules[K]=$,B._singleRules.get($.name)===L&&B._singleRules.set($.name,$)}return B.$_temp.ruleset=!1,B.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const k=this.clone();return k.$_temp.ruleset=k._rules.length,k}get $(){return this.ruleset}tailor(k){k=[].concat(k),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let R=this;if(this.$_terms.alterations)for(const{target:M,adjuster:B}of this.$_terms.alterations)k.includes(M)&&(R=B(R),a(d.isSchema(R),"Alteration adjuster for",M,"failed to return a schema object"));return R=R.$_modify({each:M=>M.tailor(k),ref:!1}),R.$_temp.ruleset=!1,R.$_mutateRebuild()}tracer(){return E.location?E.location(this):this}validate(k,R){return A.entry(k,this,R)}validateAsync(k,R){return A.entryAsync(k,this,R)}$_addRule(k){typeof k=="string"&&(k={name:k}),a(k&&typeof k=="object","Invalid options"),a(k.name&&typeof k.name=="string","Invalid rule name");for(const L in k)a(L[0]!=="_","Cannot set private rule properties");const R=Object.assign({},k);R._resolve=[],R.method=R.method||R.name;const M=this._definition.rules[R.method],B=R.args;a(M,"Unknown rule",R.method);const K=this.clone();if(B){a(Object.keys(B).length===1||Object.keys(B).length===this._definition.rules[R.name].args.length,"Invalid rule definition for",this.type,R.name);for(const L in B){let $=B[L];if(M.argsByName){const I=M.argsByName.get(L);if(I.ref&&d.isResolvable($))R._resolve.push(L),K.$_mutateRegister($);else if(I.normalize&&($=I.normalize($),B[L]=$),I.assert){const U=d.validateArg($,L,I);a(!U,U,"or reference")}}$!==void 0?B[L]=$:delete B[L]}}return M.multi||(K._ruleRemove(R.name,{clone:!1}),K._singleRules.set(R.name,R)),K.$_temp.ruleset===!1&&(K.$_temp.ruleset=null),M.priority?K._rules.unshift(R):K._rules.push(R),K}$_compile(k,R){return h.schema(this.$_root,k,R)}$_createError(k,R,M,B,K,L={}){const $=L.flags!==!1?this._flags:{},I=L.messages?y.merge(this._definition.messages,L.messages):this._definition.messages;return new p.Report(k,R,M,$,I,B,K)}$_getFlag(k){return this._flags[k]}$_getRule(k){return this._singleRules.get(k)}$_mapLabels(k){return k=Array.isArray(k)?k:k.split("."),this._ids.labels(k)}$_match(k,R,M,B){(M=Object.assign({},M)).abortEarly=!0,M._externals=!1,R.snapshot();const K=!A.validate(k,this,R,M,B).errors;return R.restore(),K}$_modify(k){return d.assertOptions(k,["each","once","ref","schema"]),v.schema(this,k)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(k,{source:R,name:M,path:B,key:K})=>{const L=this._definition[R][M]&&this._definition[R][M].register;L!==!1&&this.$_mutateRegister(k,{family:L,key:K})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(k,{family:R,key:M}={}){this._refs.register(k,R),this._ids.register(k,{key:M})}$_property(k){return this._definition.properties[k]}$_reach(k){return this._ids.reach(k)}$_rootReferences(){return this._refs.roots()}$_setFlag(k,R,M={}){a(k[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const B=this._definition.flags[k]||{};if(u(R,B.default)&&(R=void 0),u(R,this._flags[k]))return this;const K=M.clone!==!1?this.clone():this;return R!==void 0?(K._flags[k]=R,K.$_mutateRegister(R)):delete K._flags[k],k[0]!=="_"&&(K.$_temp.ruleset=!1),K}$_parent(k,...R){return this[k][d.symbols.parent].call(this,...R)}$_validate(k,R,M){return A.validate(k,this,R,M)}_assign(k){k.type=this.type,k.$_root=this.$_root,k.$_temp=Object.assign({},this.$_temp),k.$_temp.whens={},k._ids=this._ids.clone(),k._preferences=this._preferences,k._valids=this._valids&&this._valids.clone(),k._invalids=this._invalids&&this._invalids.clone(),k._rules=this._rules.slice(),k._singleRules=l(this._singleRules,{shallow:!0}),k._refs=this._refs.clone(),k._flags=Object.assign({},this._flags),k._cache=null,k.$_terms={};for(const R in this.$_terms)k.$_terms[R]=this.$_terms[R]?this.$_terms[R].slice():null;k.$_super={};for(const R in this.$_super)k.$_super[R]=this._super[R].bind(k);return k}_bare(){const k=this.clone();k._reset();const R=k._definition.terms;for(const M in R){const B=R[M];k.$_terms[M]=B.init}return k.$_mutateRebuild()}_default(k,R,M={}){return d.assertOptions(M,"literal"),a(R!==void 0,"Missing",k,"value"),a(typeof R=="function"||!M.literal,"Only function value supports literal option"),typeof R=="function"&&M.literal&&(R={[d.symbols.literal]:!0,literal:R}),this.$_setFlag(k,R)}_generate(k,R,M){if(!this.$_terms.whens)return{schema:this};const B=[],K=[];for(let I=0;I<this.$_terms.whens.length;++I){const U=this.$_terms.whens[I];if(U.concat){B.push(U.concat),K.push(`${I}.concat`);continue}const q=U.ref?U.ref.resolve(k,R,M):k,Y=U.is?[U]:U.switch,X=K.length;for(let te=0;te<Y.length;++te){const{is:le,then:ee,otherwise:z}=Y[te],he=`${I}${U.switch?"."+te:""}`;if(le.$_match(q,R.nest(le,`${he}.is`),M)){if(ee){const de=R.localize([...R.path,`${he}.then`],R.ancestors,R.schemas),{schema:ze,id:He}=ee._generate(k,de,M);B.push(ze),K.push(`${he}.then${He?`(${He})`:""}`);break}}else if(z){const de=R.localize([...R.path,`${he}.otherwise`],R.ancestors,R.schemas),{schema:ze,id:He}=z._generate(k,de,M);B.push(ze),K.push(`${he}.otherwise${He?`(${He})`:""}`);break}}if(U.break&&K.length>X)break}const L=K.join(", ");if(R.mainstay.tracer.debug(R,"rule","when",L),!L)return{schema:this};if(!R.mainstay.tracer.active&&this.$_temp.whens[L])return{schema:this.$_temp.whens[L],id:L};let $=this;this._definition.generate&&($=this._definition.generate(this,k,R,M));for(const I of B)$=$.concat(I);return this.$_root._tracer&&this.$_root._tracer._combine($,[this,...B]),this.$_temp.whens[L]=$,{schema:$,id:L}}_inner(k,R,M={}){a(!this._inRuleset(),`Cannot set ${k} inside a ruleset`);const B=this.clone();return B.$_terms[k]&&!M.override||(B.$_terms[k]=[]),M.single?B.$_terms[k].push(R):B.$_terms[k].push(...R),B.$_temp.ruleset=!1,B}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(k,R={}){if(!this._singleRules.has(k))return this;const M=R.clone!==!1?this.clone():this;M._singleRules.delete(k);const B=[];for(let K=0;K<M._rules.length;++K){const L=M._rules[K];L.name!==k||L.keep?B.push(L):M._inRuleset()&&K<M.$_temp.ruleset&&--M.$_temp.ruleset}return M._rules=B,M}_values(k,R){d.verifyFlat(k,R.slice(1,-1));const M=this.clone(),B=k[0]===d.symbols.override;if(B&&(k=k.slice(1)),!M[R]&&k.length?M[R]=new T:B&&(M[R]=k.length?new T:null,M.$_mutateRebuild()),!M[R])return M;B&&M[R].override();for(const K of k){a(K!==void 0,"Cannot call allow/valid/invalid with undefined"),a(K!==d.symbols.override,"Override must be the first value");const L=R==="_invalids"?"_valids":"_invalids";M[L]&&(M[L].remove(K),M[L].length||(a(R==="_valids"||!M._flags.only,"Setting invalid value",K,"leaves schema rejecting all values due to previous valid rule"),M[L]=null)),M[R].add(K,M._refs)}return M}}};D.Base.prototype[d.symbols.any]={version:d.version,compile:h.compile,root:"$_root"},D.Base.prototype.isImmutable=!0,D.Base.prototype.deny=D.Base.prototype.invalid,D.Base.prototype.disallow=D.Base.prototype.invalid,D.Base.prototype.equal=D.Base.prototype.valid,D.Base.prototype.exist=D.Base.prototype.required,D.Base.prototype.not=D.Base.prototype.invalid,D.Base.prototype.options=D.Base.prototype.prefs,D.Base.prototype.preferences=D.Base.prototype.prefs,i.exports=new D.Base},8652:(i,o,s)=>{const a=s(375),l=s(8571),u=s(8160),f={max:1e3,supported:new Set(["undefined","boolean","number","string"])};o.provider={provision:c=>new f.Cache(c)},f.Cache=class{constructor(c={}){u.assertOptions(c,["max"]),a(c.max===void 0||c.max&&c.max>0&&isFinite(c.max),"Invalid max cache size"),this._max=c.max||f.max,this._map=new Map,this._list=new f.List}get length(){return this._map.size}set(c,d){if(c!==null&&!f.supported.has(typeof c))return;let h=this._map.get(c);if(h)return h.value=d,void this._list.first(h);h=this._list.unshift({key:c,value:d}),this._map.set(c,h),this._compact()}get(c){const d=this._map.get(c);if(d)return this._list.first(d),l(d.value)}_compact(){if(this._map.size>this._max){const c=this._list.pop();this._map.delete(c.key)}}},f.List=class{constructor(){this.tail=null,this.head=null}unshift(c){return c.next=null,c.prev=this.head,this.head&&(this.head.next=c),this.head=c,this.tail||(this.tail=c),c}first(c){c!==this.head&&(this._remove(c),this.unshift(c))}pop(){return this._remove(this.tail)}_remove(c){const{next:d,prev:h}=c;return d.prev=h,h&&(h.next=d),c===this.tail&&(this.tail=d),c.prev=null,c.next=null,c}}},8160:(i,o,s)=>{const a=s(375),l=s(7916),u=s(5934);let f,c;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};o.version=u.version,o.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},o.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},o.assertOptions=function(h,p,m="Options"){a(h&&typeof h=="object"&&!Array.isArray(h),"Options must be of type object");const b=Object.keys(h).filter(y=>!p.includes(y));a(b.length===0,`${m} contain unknown keys: ${b}`)},o.checkPreferences=function(h){c=c||s(3378);const p=c.preferences.validate(h);if(p.error)throw new l([p.error.details[0].message])},o.compare=function(h,p,m){switch(m){case"=":return h===p;case">":return h>p;case"<":return h<p;case">=":return h>=p;case"<=":return h<=p}},o.default=function(h,p){return h===void 0?p:h},o.isIsoDate=function(h){return d.isoDate.test(h)},o.isNumber=function(h){return typeof h=="number"&&!isNaN(h)},o.isResolvable=function(h){return!!h&&(h[o.symbols.ref]||h[o.symbols.template])},o.isSchema=function(h,p={}){const m=h&&h[o.symbols.any];return!!m&&(a(p.legacy||m.version===o.version,"Cannot mix different versions of joi schemas"),!0)},o.isValues=function(h){return h[o.symbols.values]},o.limit=function(h){return Number.isSafeInteger(h)&&h>=0},o.preferences=function(h,p){f=f||s(6914),h=h||{},p=p||{};const m=Object.assign({},h,p);return p.errors&&h.errors&&(m.errors=Object.assign({},h.errors,p.errors),m.errors.wrap=Object.assign({},h.errors.wrap,p.errors.wrap)),p.messages&&(m.messages=f.compile(p.messages,h.messages)),delete m[o.symbols.prefs],m},o.tryWithPath=function(h,p,m={}){try{return h()}catch(b){throw b.path!==void 0?b.path=p+"."+b.path:b.path=p,m.append&&(b.message=`${b.message} (${b.path})`),b}},o.validateArg=function(h,p,{assert:m,message:b}){if(o.isSchema(m)){const y=m.validate(h);return y.error?y.error.message:void 0}if(!m(h))return p?`${p} ${b}`:b},o.verifyFlat=function(h,p){for(const m of h)a(!Array.isArray(m),"Method no longer accepts array arguments:",p)}},3292:(i,o,s)=>{const a=s(375),l=s(8160),u=s(6133),f={};o.schema=function(c,d,h={}){l.assertOptions(h,["appendPath","override"]);try{return f.schema(c,d,h)}catch(p){throw h.appendPath&&p.path!==void 0&&(p.message=`${p.message} (${p.path})`),p}},f.schema=function(c,d,h){a(d!==void 0,"Invalid undefined schema"),Array.isArray(d)&&(a(d.length,"Invalid empty array schema"),d.length===1&&(d=d[0]));const p=(m,...b)=>h.override!==!1?m.valid(c.override,...b):m.valid(...b);if(f.simple(d))return p(c,d);if(typeof d=="function")return c.custom(d);if(a(typeof d=="object","Invalid schema content:",typeof d),l.isResolvable(d))return p(c,d);if(l.isSchema(d))return d;if(Array.isArray(d)){for(const m of d)if(!f.simple(m))return c.alternatives().try(...d);return p(c,...d)}return d instanceof RegExp?c.string().regex(d):d instanceof Date?p(c.date(),d):(a(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),c.object().keys(d))},o.ref=function(c,d){return u.isRef(c)?c:u.create(c,d)},o.compile=function(c,d,h={}){l.assertOptions(h,["legacy"]);const p=d&&d[l.symbols.any];if(p)return a(h.legacy||p.version===l.version,"Cannot mix different versions of joi schemas:",p.version,l.version),d;if(typeof d!="object"||!h.legacy)return o.schema(c,d,{appendPath:!0});const m=f.walk(d);return m?m.compile(m.root,d):o.schema(c,d,{appendPath:!0})},f.walk=function(c){if(typeof c!="object")return null;if(Array.isArray(c)){for(const h of c){const p=f.walk(h);if(p)return p}return null}const d=c[l.symbols.any];if(d)return{root:c[d.root],compile:d.compile};a(Object.getPrototypeOf(c)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const h in c){const p=f.walk(c[h]);if(p)return p}return null},f.simple=function(c){return c===null||["boolean","string","number"].includes(typeof c)},o.when=function(c,d,h){if(h===void 0&&(a(d&&typeof d=="object","Missing options"),h=d,d=u.create(".")),Array.isArray(h)&&(h={switch:h}),l.assertOptions(h,["is","not","then","otherwise","switch","break"]),l.isSchema(d))return a(h.is===void 0,'"is" can not be used with a schema condition'),a(h.not===void 0,'"not" can not be used with a schema condition'),a(h.switch===void 0,'"switch" can not be used with a schema condition'),f.condition(c,{is:d,then:h.then,otherwise:h.otherwise,break:h.break});if(a(u.isRef(d)||typeof d=="string","Invalid condition:",d),a(h.not===void 0||h.is===void 0,'Cannot combine "is" with "not"'),h.switch===void 0){let m=h;h.not!==void 0&&(m={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let b=m.is!==void 0?c.$_compile(m.is):c.$_root.invalid(null,!1,0,"").required();return a(m.then!==void 0||m.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(m.break===void 0||m.then===void 0||m.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),h.is===void 0||u.isRef(h.is)||l.isSchema(h.is)||(b=b.required()),f.condition(c,{ref:o.ref(d),is:b,then:m.then,otherwise:m.otherwise,break:m.break})}a(Array.isArray(h.switch),'"switch" must be an array'),a(h.is===void 0,'Cannot combine "switch" with "is"'),a(h.not===void 0,'Cannot combine "switch" with "not"'),a(h.then===void 0,'Cannot combine "switch" with "then"');const p={ref:o.ref(d),switch:[],break:h.break};for(let m=0;m<h.switch.length;++m){const b=h.switch[m],y=m===h.switch.length-1;l.assertOptions(b,y?["is","then","otherwise"]:["is","then"]),a(b.is!==void 0,'Switch statement missing "is"'),a(b.then!==void 0,'Switch statement missing "then"');const v={is:c.$_compile(b.is),then:c.$_compile(b.then)};if(u.isRef(b.is)||l.isSchema(b.is)||(v.is=v.is.required()),y){a(h.otherwise===void 0||b.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const w=h.otherwise!==void 0?h.otherwise:b.otherwise;w!==void 0&&(a(p.break===void 0,"Cannot specify both otherwise and break"),v.otherwise=c.$_compile(w))}p.switch.push(v)}return p},f.condition=function(c,d){for(const h of["then","otherwise"])d[h]===void 0?delete d[h]:d[h]=c.$_compile(d[h]);return d}},6354:(i,o,s)=>{const a=s(5688),l=s(8160),u=s(3328);o.Report=class{constructor(f,c,d,h,p,m,b){if(this.code=f,this.flags=h,this.messages=p,this.path=m.path,this.prefs=b,this.state=m,this.value=c,this.message=null,this.template=null,this.local=d||{},this.local.label=o.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const y=this.path[this.path.length-1];typeof y!="object"&&(this.local.key=y)}}_setTemplate(f){if(this.template=f,!this.flags.label&&this.path.length===0){const c=this._template(this.template,"root");c&&(this.local.label=c)}}toString(){if(this.message)return this.message;const f=this.code;if(!this.prefs.errors.render)return this.code;const c=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return c===void 0?`Error code "${f}" is not defined, your custom type is missing the correct messages definition`:(this.message=c.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(f,c){return o.template(this.value,f,c||this.code,this.state,this.prefs)}},o.path=function(f){let c="";for(const d of f)typeof d!="object"&&(typeof d=="string"?(c&&(c+="."),c+=d):c+=`[${d}]`);return c},o.template=function(f,c,d,h,p){if(!c)return;if(u.isTemplate(c))return d!=="root"?c:null;let m=p.errors.language;if(l.isResolvable(m)&&(m=m.resolve(f,h,p)),m&&c[m]){if(c[m][d]!==void 0)return c[m][d];if(c[m]["*"]!==void 0)return c[m]["*"]}return c[d]?c[d]:c["*"]},o.label=function(f,c,d,h){if(!d.errors.label)return"";if(f.label)return f.label;let p=c.path;return d.errors.label==="key"&&c.path.length>1&&(p=c.path.slice(-1)),o.path(p)||o.template(null,d.messages,"root",c,d)||h&&o.template(null,h,"root",c,d)||"value"},o.process=function(f,c,d){if(!f)return null;const{override:h,message:p,details:m}=o.details(f);if(h)return h;if(d.errors.stack)return new o.ValidationError(p,m,c);const b=Error.stackTraceLimit;Error.stackTraceLimit=0;const y=new o.ValidationError(p,m,c);return Error.stackTraceLimit=b,y},o.details=function(f,c={}){let d=[];const h=[];for(const p of f){if(p instanceof Error){if(c.override!==!1)return{override:p};const b=p.toString();d.push(b),h.push({message:b,type:"override",context:{error:p}});continue}const m=p.toString();d.push(m),h.push({message:m,path:p.path.filter(b=>typeof b!="object"),type:p.code,context:p.local})}return d.length>1&&(d=[...new Set(d)]),{message:d.join(". "),details:h}},o.ValidationError=class extends Error{constructor(f,c,d){super(f),this._original=d,this.details=c}static isError(f){return f instanceof o.ValidationError}},o.ValidationError.prototype.isJoi=!0,o.ValidationError.prototype.name="ValidationError",o.ValidationError.prototype.annotate=a.error},8901:(i,o,s)=>{const a=s(375),l=s(8571),u=s(8160),f=s(6914),c={};o.type=function(d,h){const p=Object.getPrototypeOf(d),m=l(p),b=d._assign(Object.create(m)),y=Object.assign({},h);delete y.base,m._definition=y;const v=p._definition||{};y.messages=f.merge(v.messages,y.messages),y.properties=Object.assign({},v.properties,y.properties),b.type=y.type,y.flags=Object.assign({},v.flags,y.flags);const w=Object.assign({},v.terms);if(y.terms)for(const D in y.terms){const k=y.terms[D];a(b.$_terms[D]===void 0,"Invalid term override for",y.type,D),b.$_terms[D]=k.init,w[D]=k}y.terms=w,y.args||(y.args=v.args),y.prepare=c.prepare(y.prepare,v.prepare),y.coerce&&(typeof y.coerce=="function"&&(y.coerce={method:y.coerce}),y.coerce.from&&!Array.isArray(y.coerce.from)&&(y.coerce={method:y.coerce.method,from:[].concat(y.coerce.from)})),y.coerce=c.coerce(y.coerce,v.coerce),y.validate=c.validate(y.validate,v.validate);const E=Object.assign({},v.rules);if(y.rules)for(const D in y.rules){const k=y.rules[D];a(typeof k=="object","Invalid rule definition for",y.type,D);let R=k.method;if(R===void 0&&(R=function(){return this.$_addRule(D)}),R&&(a(!m[D],"Rule conflict in",y.type,D),m[D]=R),a(!E[D],"Rule conflict in",y.type,D),E[D]=k,k.alias){const M=[].concat(k.alias);for(const B of M)m[B]=k.method}k.args&&(k.argsByName=new Map,k.args=k.args.map(M=>(typeof M=="string"&&(M={name:M}),a(!k.argsByName.has(M.name),"Duplicated argument name",M.name),u.isSchema(M.assert)&&(M.assert=M.assert.strict().label(M.name)),k.argsByName.set(M.name,M),M)))}y.rules=E;const A=Object.assign({},v.modifiers);if(y.modifiers)for(const D in y.modifiers){a(!m[D],"Rule conflict in",y.type,D);const k=y.modifiers[D];a(typeof k=="function","Invalid modifier definition for",y.type,D);const R=function(M){return this.rule({[D]:M})};m[D]=R,A[D]=k}if(y.modifiers=A,y.overrides){m._super=p,b.$_super={};for(const D in y.overrides)a(p[D],"Cannot override missing",D),y.overrides[D][u.symbols.parent]=p[D],b.$_super[D]=p[D].bind(b);Object.assign(m,y.overrides)}y.cast=Object.assign({},v.cast,y.cast);const T=Object.assign({},v.manifest,y.manifest);return T.build=c.build(y.manifest&&y.manifest.build,v.manifest&&v.manifest.build),y.manifest=T,y.rebuild=c.rebuild(y.rebuild,v.rebuild),b},c.build=function(d,h){return d&&h?function(p,m){return h(d(p,m),m)}:d||h},c.coerce=function(d,h){return d&&h?{from:d.from&&h.from?[...new Set([...d.from,...h.from])]:null,method(p,m){let b;if((!h.from||h.from.includes(typeof p))&&(b=h.method(p,m),b)){if(b.errors||b.value===void 0)return b;p=b.value}if(!d.from||d.from.includes(typeof p)){const y=d.method(p,m);if(y)return y}return b}}:d||h},c.prepare=function(d,h){return d&&h?function(p,m){const b=d(p,m);if(b){if(b.errors||b.value===void 0)return b;p=b.value}return h(p,m)||b}:d||h},c.rebuild=function(d,h){return d&&h?function(p){h(p),d(p)}:d||h},c.validate=function(d,h){return d&&h?function(p,m){const b=h(p,m);if(b){if(b.errors&&(!Array.isArray(b.errors)||b.errors.length))return b;p=b.value}return d(p,m)||b}:d||h}},5107:(i,o,s)=>{const a=s(375),l=s(8571),u=s(8652),f=s(8160),c=s(3292),d=s(6354),h=s(8901),p=s(9708),m=s(6133),b=s(3328),y=s(1152);let v;const w={types:{alternatives:s(4946),any:s(8068),array:s(546),boolean:s(4937),date:s(7500),function:s(390),link:s(8785),number:s(3832),object:s(8966),string:s(7417),symbol:s(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const E={_types:new Set(Object.keys(w.types))};for(const A of E._types)E[A]=function(...T){return a(!T.length||["alternatives","link","object"].includes(A),"The",A,"type does not allow arguments"),w.generate(this,w.types[A],T)};for(const A of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])E[A]=function(...T){return this.any()[A](...T)};Object.assign(E,w.methods);for(const A in w.aliases){const T=w.aliases[A];E[A]=E[T]}return E.x=E.expression,y.setup&&y.setup(E),E}};w.methods={ValidationError:d.ValidationError,version:f.version,cache:u.provider,assert(E,A,...T){w.assert(E,A,!0,T)},attempt:(E,A,...T)=>w.assert(E,A,!1,T),build(E){return a(typeof p.build=="function","Manifest functionality disabled"),p.build(this,E)},checkPreferences(E){f.checkPreferences(E)},compile(E,A){return c.compile(this,E,A)},defaults(E){a(typeof E=="function","modifier must be a function");const A=Object.assign({},this);for(const T of A._types){const D=E(A[T]());a(f.isSchema(D),"modifier must return a valid schema object"),A[T]=function(...k){return w.generate(this,D,k)}}return A},expression:(...E)=>new b(...E),extend(...E){f.verifyFlat(E,"extend"),v=v||s(3378),a(E.length,"You need to provide at least one extension"),this.assert(E,v.extensions);const A=Object.assign({},this);A._types=new Set(A._types);for(let T of E){typeof T=="function"&&(T=T(A)),this.assert(T,v.extension);const D=w.expandExtension(T,A);for(const k of D){a(A[k.type]===void 0||A._types.has(k.type),"Cannot override name",k.type);const R=k.base||this.any(),M=h.type(R,k);A._types.add(k.type),A[k.type]=function(...B){return w.generate(this,M,B)}}}return A},isError:d.ValidationError.isError,isExpression:b.isTemplate,isRef:m.isRef,isSchema:f.isSchema,in:(...E)=>m.in(...E),override:f.symbols.override,ref:(...E)=>m.create(...E),types(){const E={};for(const A of this._types)E[A]=this[A]();for(const A in w.aliases)E[A]=this[A]();return E}},w.assert=function(E,A,T,D){const k=D[0]instanceof Error||typeof D[0]=="string"?D[0]:null,R=k!==null?D[1]:D[0],M=A.validate(E,f.preferences({errors:{stack:!0}},R||{}));let B=M.error;if(!B)return M.value;if(k instanceof Error)throw k;const K=T&&typeof B.annotate=="function"?B.annotate():B.message;throw B instanceof d.ValidationError==0&&(B=l(B)),B.message=k?`${k} ${K}`:K,B},w.generate=function(E,A,T){return a(E,"Must be invoked on a Joi instance."),A.$_root=E,A._definition.args&&T.length?A._definition.args(A,...T):A},w.expandExtension=function(E,A){if(typeof E.type=="string")return[E];const T=[];for(const D of A._types)if(E.type.test(D)){const k=Object.assign({},E);k.type=D,k.base=A[D](),T.push(k)}return T},i.exports=w.root()},6914:(i,o,s)=>{const a=s(375),l=s(8571),u=s(3328);o.compile=function(f,c){if(typeof f=="string")return a(!c,"Cannot set single message string"),new u(f);if(u.isTemplate(f))return a(!c,"Cannot set single message template"),f;a(typeof f=="object"&&!Array.isArray(f),"Invalid message options"),c=c?l(c):{};for(let d in f){const h=f[d];if(d==="root"||u.isTemplate(h)){c[d]=h;continue}if(typeof h=="string"){c[d]=new u(h);continue}a(typeof h=="object"&&!Array.isArray(h),"Invalid message for",d);const p=d;for(d in c[p]=c[p]||{},h){const m=h[d];d==="root"||u.isTemplate(m)?c[p][d]=m:(a(typeof m=="string","Invalid message for",d,"in",p),c[p][d]=new u(m))}}return c},o.decompile=function(f){const c={};for(let d in f){const h=f[d];if(d==="root"){c.root=h;continue}if(u.isTemplate(h)){c[d]=h.describe({compact:!0});continue}const p=d;for(d in c[p]={},h){const m=h[d];d!=="root"?c[p][d]=m.describe({compact:!0}):c[p].root=m}}return c},o.merge=function(f,c){if(!f)return o.compile(c);if(!c)return f;if(typeof c=="string")return new u(c);if(u.isTemplate(c))return c;const d=l(f);for(let h in c){const p=c[h];if(h==="root"||u.isTemplate(p)){d[h]=p;continue}if(typeof p=="string"){d[h]=new u(p);continue}a(typeof p=="object"&&!Array.isArray(p),"Invalid message for",h);const m=h;for(h in d[m]=d[m]||{},p){const b=p[h];h==="root"||u.isTemplate(b)?d[m][h]=b:(a(typeof b=="string","Invalid message for",h,"in",m),d[m][h]=new u(b))}}return d}},2294:(i,o,s)=>{const a=s(375),l=s(8160),u=s(6133),f={};o.Ids=f.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const c=new f.Ids;return c._byId=new Map(this._byId),c._byKey=new Map(this._byKey),c._schemaChain=this._schemaChain,c}concat(c){c._schemaChain&&(this._schemaChain=!0);for(const[d,h]of c._byId.entries())a(!this._byKey.has(d),"Schema id conflicts with existing key:",d),this._byId.set(d,h);for(const[d,h]of c._byKey.entries())a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,h)}fork(c,d,h){const p=this._collect(c);p.push({schema:h});const m=p.shift();let b={id:m.id,schema:d(m.schema)};a(l.isSchema(b.schema),"adjuster function failed to return a joi schema type");for(const y of p)b={id:y.id,schema:f.fork(y.schema,b.id,b.schema)};return b.schema}labels(c,d=[]){const h=c[0],p=this._get(h);if(!p)return[...d,...c].join(".");const m=c.slice(1);return d=[...d,p.schema._flags.label||h],m.length?p.schema._ids.labels(m,d):d.join(".")}reach(c,d=[]){const h=c[0],p=this._get(h);a(p,"Schema does not contain path",[...d,...c].join("."));const m=c.slice(1);return m.length?p.schema._ids.reach(m,[...d,h]):p.schema}register(c,{key:d}={}){if(!c||!l.isSchema(c))return;(c.$_property("schemaChain")||c._ids._schemaChain)&&(this._schemaChain=!0);const h=c._flags.id;if(h){const p=this._byId.get(h);a(!p||p.schema===c,"Cannot add different schemas with the same id:",h),a(!this._byKey.has(h),"Schema id conflicts with existing key:",h),this._byId.set(h,{schema:c,id:h})}d&&(a(!this._byKey.has(d),"Schema already contains key:",d),a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,{schema:c,id:d}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(c,d=[],h=[]){const p=c[0],m=this._get(p);a(m,"Schema does not contain path",[...d,...c].join(".")),h=[m,...h];const b=c.slice(1);return b.length?m.schema._ids._collect(b,[...d,p],h):h}_get(c){return this._byId.get(c)||this._byKey.get(c)}},f.fork=function(c,d,h){const p=o.schema(c,{each:(m,{key:b})=>{if(d===(m._flags.id||b))return h},ref:!1});return p?p.$_mutateRebuild():c},o.schema=function(c,d){let h;for(const p in c._flags){if(p[0]==="_")continue;const m=f.scan(c._flags[p],{source:"flags",name:p},d);m!==void 0&&(h=h||c.clone(),h._flags[p]=m)}for(let p=0;p<c._rules.length;++p){const m=c._rules[p],b=f.scan(m.args,{source:"rules",name:m.name},d);if(b!==void 0){h=h||c.clone();const y=Object.assign({},m);y.args=b,h._rules[p]=y,h._singleRules.get(m.name)===m&&h._singleRules.set(m.name,y)}}for(const p in c.$_terms){if(p[0]==="_")continue;const m=f.scan(c.$_terms[p],{source:"terms",name:p},d);m!==void 0&&(h=h||c.clone(),h.$_terms[p]=m)}return h},f.scan=function(c,d,h,p,m){const b=p||[];if(c===null||typeof c!="object")return;let y;if(Array.isArray(c)){for(let v=0;v<c.length;++v){const w=d.source==="terms"&&d.name==="keys"&&c[v].key,E=f.scan(c[v],d,h,[v,...b],w);E!==void 0&&(y=y||c.slice(),y[v]=E)}return y}if(h.schema!==!1&&l.isSchema(c)||h.ref!==!1&&u.isRef(c)){const v=h.each(c,{...d,path:b,key:m});return v===c?void 0:v}for(const v in c){if(v[0]==="_")continue;const w=f.scan(c[v],d,h,[v,...b],m);w!==void 0&&(y=y||Object.assign({},c),y[v]=w)}return y}},6133:(i,o,s)=>{const a=s(375),l=s(8571),u=s(9621),f=s(8160);let c;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};o.create=function(h,p={}){a(typeof h=="string","Invalid reference key:",h),f.assertOptions(p,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!p.prefix||typeof p.prefix=="object","options.prefix must be of type object");const m=Object.assign({},d.defaults,p);delete m.prefix;const b=m.separator,y=d.context(h,b,p.prefix);if(m.type=y.type,h=y.key,m.type==="value")if(y.root&&(a(!b||h[0]!==b,"Cannot specify relative path with root prefix"),m.ancestor="root",h||(h=null)),b&&b===h)h=null,m.ancestor=0;else if(m.ancestor!==void 0)a(!b||!h||h[0]!==b,"Cannot combine prefix with ancestor option");else{const[v,w]=d.ancestor(h,b);w&&(h=h.slice(w))===""&&(h=null),m.ancestor=v}return m.path=b?h===null?[]:h.split(b):[h],new d.Ref(m)},o.in=function(h,p={}){return o.create(h,{...p,in:!0})},o.isRef=function(h){return!!h&&!!h[f.symbols.ref]},d.Ref=class{constructor(h){a(typeof h=="object","Invalid reference construction"),f.assertOptions(h,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(h.separator)||typeof h.separator=="string"&&h.separator.length===1,"Invalid separator"),a(!h.adjust||typeof h.adjust=="function","options.adjust must be a function"),a(!h.map||Array.isArray(h.map),"options.map must be an array"),a(!h.map||!h.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,h),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(h,p,m,b,y={}){return a(!this.in||y.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(m.context,p,y):this.type==="local"?this._resolve(b,p,y):this.ancestor?this.ancestor==="root"?this._resolve(p.ancestors[p.ancestors.length-1],p,y):(a(this.ancestor<=p.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(p.ancestors[this.ancestor-1],p,y)):this._resolve(h,p,y)}_resolve(h,p,m){let b;if(this.type==="value"&&p.mainstay.shadow&&m.shadow!==!1&&(b=p.mainstay.shadow.get(this.absolute(p))),b===void 0&&(b=u(h,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(b=this.adjust(b)),this.map){const y=this.map.get(b);y!==void 0&&(b=y)}return p.mainstay&&p.mainstay.tracer.resolve(p,this,b),b}toString(){return this.display}absolute(h){return[...h.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const h={path:this.path};this.type!=="value"&&(h.type=this.type),this.separator!=="."&&(h.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(h.ancestor=this.ancestor),this.map&&(h.map=[...this.map]);for(const p of["adjust","iterables","render"])this[p]!==null&&this[p]!==void 0&&(h[p]=this[p]);return this.in!==!1&&(h.in=!0),{ref:h}}updateDisplay(){const h=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${h}`);if(!this.separator)return void(this.display=`ref:${h}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${h}`);if(this.ancestor==="root")return void(this.display=`ref:root:${h}`);if(this.ancestor===1)return void(this.display=`ref:${h||".."}`);const p=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${p}${h||""}`}},d.Ref.prototype[f.symbols.ref]=!0,o.build=function(h){return(h=Object.assign({},d.defaults,h)).type==="value"&&h.ancestor===void 0&&(h.ancestor=1),new d.Ref(h)},d.context=function(h,p,m={}){if(h=h.trim(),m){const b=m.global===void 0?"$":m.global;if(b!==p&&h.startsWith(b))return{key:h.slice(b.length),type:"global"};const y=m.local===void 0?"#":m.local;if(y!==p&&h.startsWith(y))return{key:h.slice(y.length),type:"local"};const v=m.root===void 0?"/":m.root;if(v!==p&&h.startsWith(v))return{key:h.slice(v.length),type:"value",root:!0}}return{key:h,type:"value"}},d.ancestor=function(h,p){if(!p)return[1,0];if(h[0]!==p)return[1,0];if(h[1]!==p)return[0,1];let m=2;for(;h[m]===p;)++m;return[m-1,m]},o.toSibling=0,o.toParent=1,o.Manager=class{constructor(){this.refs=[]}register(h,p){if(h)if(p=p===void 0?o.toParent:p,Array.isArray(h))for(const m of h)this.register(m,p);else if(f.isSchema(h))for(const m of h._refs.refs)m.ancestor-p>=0&&this.refs.push({ancestor:m.ancestor-p,root:m.root});else o.isRef(h)&&h.type==="value"&&h.ancestor-p>=0&&this.refs.push({ancestor:h.ancestor-p,root:h.root}),c=c||s(3328),c.isTemplate(h)&&this.register(h.refs(),p)}get length(){return this.refs.length}clone(){const h=new o.Manager;return h.refs=l(this.refs),h}reset(){this.refs=[]}roots(){return this.refs.filter(h=>!h.ancestor).map(h=>h.root)}}},3378:(i,o,s)=>{const a=s(5107),l={};l.wrap=a.string().min(1).max(2).allow(!1),o.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=a.object({alias:a.array().items(a.string().pattern(l.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(l.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),o.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(l.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(l.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(l.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(l.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(l.nameRx,l.rule),terms:a.object().pattern(l.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),o.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),l.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},l.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,a.link("/")]),l.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=a.object().pattern(/.+/,[a.string(),l.desc.template,a.object().pattern(/.+/,[a.string(),l.desc.template])]),o.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:l.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:a.boolean(),messages:l.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),l.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(i,o,s)=>{const a=s(8571),l=s(9621),u=s(8160),f={value:Symbol("value")};i.exports=f.State=class{constructor(c,d,h){this.path=c,this.ancestors=d,this.mainstay=h.mainstay,this.schemas=h.schemas,this.debug=null}localize(c,d=null,h=null){const p=new f.State(c,d,this);return h&&p.schemas&&(p.schemas=[f.schemas(h),...p.schemas]),p}nest(c,d){const h=new f.State(this.path,this.ancestors,this);return h.schemas=h.schemas&&[f.schemas(c),...h.schemas],h.debug=d,h}shadow(c,d){this.mainstay.shadow=this.mainstay.shadow||new f.Shadow,this.mainstay.shadow.set(this.path,c,d)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},f.schemas=function(c){return u.isSchema(c)?{schema:c}:c},f.Shadow=class{constructor(){this._values=null}set(c,d,h){if(!c.length||h==="strip"&&typeof c[c.length-1]=="number")return;this._values=this._values||new Map;let p=this._values;for(let m=0;m<c.length;++m){const b=c[m];let y=p.get(b);y||(y=new Map,p.set(b,y)),p=y}p[f.value]=d}get(c){const d=this.node(c);if(d)return d[f.value]}node(c){if(this._values)return l(this._values,c,{iterables:!0})}override(c,d){if(!this._values)return;const h=c.slice(0,-1),p=c[c.length-1],m=l(this._values,h,{iterables:!0});d?m.set(p,d):m&&m.delete(p)}}},3328:(i,o,s)=>{const a=s(375),l=s(8571),u=s(5277),f=s(1447),c=s(8160),d=s(6354),h=s(6133),p={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};i.exports=p.Template=class{constructor(m,b){if(a(typeof m=="string","Template source must be a string"),a(!m.includes("\0")&&!m.includes(""),"Template source cannot contain reserved control characters"),this.source=m,this.rendered=m,this._template=null,b){const{functions:y,...v}=b;this._settings=Object.keys(v).length?l(v):void 0,this._functions=y,this._functions&&(a(Object.keys(this._functions).every(w=>typeof w=="string"),"Functions keys must be strings"),a(Object.values(this._functions).every(w=>typeof w=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const m=p.encode(this.source),b=p.split(m);let y=!1;const v=[],w=b.shift();w&&v.push(w);for(const E of b){const A=E[0]!=="{",T=A?"}":"}}",D=E.indexOf(T);if(D===-1||E[1]==="{"){v.push(`{${p.decode(E)}`);continue}let k=E.slice(A?0:1,D);const R=k[0]===":";R&&(k=k.slice(1));const M=this._ref(p.decode(k),{raw:A,wrapped:R});v.push(M),typeof M!="string"&&(y=!0);const B=E.slice(D+T.length);B&&v.push(p.decode(B))}y?this._template=v:this.rendered=v.join("")}static date(m,b){return p.dateFormat[b.dateFormat].call(m)}describe(m={}){if(!this._settings&&m.compact)return this.source;const b={template:this.source};return this._settings&&(b.options=this._settings),this._functions&&(b.functions=this._functions),b}static build(m){return new p.Template(m.template,m.options||m.functions?{...m.options,functions:m.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(m){return!!m&&!!m[c.symbols.template]}refs(){if(!this._template)return;const m=[];for(const b of this._template)typeof b!="string"&&m.push(...b.refs);return m}resolve(m,b,y,v){return this._template&&this._template.length===1?this._part(this._template[0],m,b,y,v,{}):this.render(m,b,y,v)}_part(m,...b){return m.ref?m.ref.resolve(...b):m.formula.evaluate(b)}render(m,b,y,v,w={}){if(!this.isDynamic())return this.rendered;const E=[];for(const A of this._template)if(typeof A=="string")E.push(A);else{const T=this._part(A,m,b,y,v,w),D=p.stringify(T,m,b,y,v,w);if(D!==void 0){const k=A.raw||(w.errors&&w.errors.escapeHtml)===!1?D:u(D);E.push(p.wrap(k,A.wrapped&&y.errors.wrap.label))}}return E.join("")}_ref(m,{raw:b,wrapped:y}){const v=[],w=A=>{const T=h.create(A,this._settings);return v.push(T),D=>{const k=T.resolve(...D);return k!==void 0?k:null}};try{const A=this._functions?{...p.functions,...this._functions}:p.functions;var E=new f.Parser(m,{reference:w,functions:A,constants:p.constants})}catch(A){throw A.message=`Invalid template variable "${m}" fails due to: ${A.message}`,A}if(E.single){if(E.single.type==="reference"){const A=v[0];return{ref:A,raw:b,refs:v,wrapped:y||A.type==="local"&&A.key==="label"}}return p.stringify(E.single.value)}return{formula:E,raw:b,refs:v}}toString(){return this.source}},p.Template.prototype[c.symbols.template]=!0,p.Template.prototype.isImmutable=!0,p.encode=function(m){return m.replace(/\\(\{+)/g,(b,y)=>p.opens.slice(0,y.length)).replace(/\\(\}+)/g,(b,y)=>p.closes.slice(0,y.length))},p.decode=function(m){return m.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},p.split=function(m){const b=[];let y="";for(let v=0;v<m.length;++v){const w=m[v];if(w==="{"){let E="";for(;v+1<m.length&&m[v+1]==="{";)E+="{",++v;b.push(y),y=E}else y+=w}return b.push(y),b},p.wrap=function(m,b){return b?b.length===1?`${b}${m}${b}`:`${b[0]}${m}${b[1]}`:m},p.stringify=function(m,b,y,v,w,E={}){const A=typeof m,T=v&&v.errors&&v.errors.wrap||{};let D=!1;if(h.isRef(m)&&m.render&&(D=m.in,m=m.resolve(b,y,v,w,{in:m.in,...E})),m===null)return"null";if(A==="string")return p.wrap(m,E.arrayItems&&T.string);if(A==="number"||A==="function"||A==="symbol")return m.toString();if(A!=="object")return JSON.stringify(m);if(m instanceof Date)return p.Template.date(m,v);if(m instanceof Map){const R=[];for(const[M,B]of m.entries())R.push(`${M.toString()} -> ${B.toString()}`);m=R}if(!Array.isArray(m))return m.toString();const k=[];for(const R of m)k.push(p.stringify(R,b,y,v,w,{arrayItems:!0,...E}));return p.wrap(k.join(", "),!D&&T.array)},p.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},p.functions={if:(m,b,y)=>m?b:y,length:m=>typeof m=="string"?m.length:m&&typeof m=="object"?Array.isArray(m)?m.length:Object.keys(m).length:null,msg(m){const[b,y,v,w,E]=this,A=E.messages;if(!A)return"";const T=d.template(b,A[0],m,y,v)||d.template(b,A[1],m,y,v);return T?T.render(b,y,v,w,E):""},number:m=>typeof m=="number"?m:typeof m=="string"?parseFloat(m):typeof m=="boolean"?m?1:0:m instanceof Date?m.getTime():null}},4946:(i,o,s)=>{const a=s(375),l=s(1687),u=s(8068),f=s(8160),c=s(3292),d=s(6354),h=s(6133),p={};i.exports=u.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:h.toSibling}},args:(m,...b)=>b.length===1&&Array.isArray(b[0])?m.try(...b[0]):m.try(...b),validate(m,b){const{schema:y,error:v,state:w,prefs:E}=b;if(y._flags.match){const T=[],D=[];for(let R=0;R<y.$_terms.matches.length;++R){const M=y.$_terms.matches[R],B=w.nest(M.schema,`match.${R}`);B.snapshot();const K=M.schema.$_validate(m,B,E);K.errors?(D.push(K.errors),B.restore()):(T.push(K.value),B.commit())}if(T.length===0)return{errors:v("alternatives.any",{details:D.map(R=>d.details(R,{override:!1}))})};if(y._flags.match==="one")return T.length===1?{value:T[0]}:{errors:v("alternatives.one")};if(T.length!==y.$_terms.matches.length)return{errors:v("alternatives.all",{details:D.map(R=>d.details(R,{override:!1}))})};const k=R=>R.$_terms.matches.some(M=>M.schema.type==="object"||M.schema.type==="alternatives"&&k(M.schema));return k(y)?{value:T.reduce((R,M)=>l(R,M,{mergeArrays:!1}))}:{value:T[T.length-1]}}const A=[];for(let T=0;T<y.$_terms.matches.length;++T){const D=y.$_terms.matches[T];if(D.schema){const M=w.nest(D.schema,`match.${T}`);M.snapshot();const B=D.schema.$_validate(m,M,E);if(!B.errors)return M.commit(),B;M.restore(),A.push({schema:D.schema,reports:B.errors});continue}const k=D.ref?D.ref.resolve(m,w,E):m,R=D.is?[D]:D.switch;for(let M=0;M<R.length;++M){const B=R[M],{is:K,then:L,otherwise:$}=B,I=`match.${T}${D.switch?"."+M:""}`;if(K.$_match(k,w.nest(K,`${I}.is`),E)){if(L)return L.$_validate(m,w.nest(L,`${I}.then`),E)}else if($)return $.$_validate(m,w.nest($,`${I}.otherwise`),E)}}return p.errors(A,b)},rules:{conditional:{method(m,b){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(b.break===void 0,"Cannot use break option with alternatives conditional");const y=this.clone(),v=c.when(y,m,b),w=v.is?[v]:v.switch;for(const E of w)if(E.then&&E.otherwise){y.$_setFlag("_endedSwitch",!0,{clone:!1});break}return y.$_terms.matches.push(v),y.$_mutateRebuild()}},match:{method(m){if(a(["any","one","all"].includes(m),"Invalid alternatives match mode",m),m!=="any")for(const b of this.$_terms.matches)a(b.schema,"Cannot combine match mode",m,"with conditional rules");return this.$_setFlag("match",m)}},try:{method(...m){a(m.length,"Missing alternative schemas"),f.verifyFlat(m,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const b=this.clone();for(const y of m)b.$_terms.matches.push({schema:b.$_compile(y)});return b.$_mutateRebuild()}}},overrides:{label(m){return this.$_parent("label",m).$_modify({each:(b,y)=>y.path[0]!=="is"&&typeof b._flags.label!="string"?b.label(m):void 0,ref:!1})}},rebuild(m){m.$_modify({each:b=>{f.isSchema(b)&&b.type==="array"&&m.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(m,b){if(b.matches)for(const y of b.matches){const{schema:v,ref:w,is:E,not:A,then:T,otherwise:D}=y;m=v?m.try(v):w?m.conditional(w,{is:E,then:T,not:A,otherwise:D,switch:y.switch}):m.conditional(E,{then:T,otherwise:D})}return m}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),p.errors=function(m,{error:b,state:y}){if(!m.length)return{errors:b("alternatives.any")};if(m.length===1)return{errors:m[0].reports};const v=new Set,w=[];for(const{reports:E,schema:A}of m){if(E.length>1)return p.unmatched(m,b);const T=E[0];if(T instanceof d.Report==0)return p.unmatched(m,b);if(T.state.path.length!==y.path.length){w.push({type:A.type,report:T});continue}if(T.code==="any.only"){for(const R of T.local.valids)v.add(R);continue}const[D,k]=T.code.split(".");k!=="base"?w.push({type:A.type,report:T}):T.code==="object.base"?v.add(T.local.type):v.add(D)}return w.length?w.length===1?{errors:w[0].report}:p.unmatched(m,b):{errors:b("alternatives.types",{types:[...v]})}},p.unmatched=function(m,b){const y=[];for(const v of m)y.push(...v.reports);return{errors:b("alternatives.match",d.details(y,{override:!1}))}}},8068:(i,o,s)=>{const a=s(375),l=s(7629),u=s(8160),f=s(6914);i.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(c,d){return a(typeof c=="function","Method must be a function"),a(d===void 0||d&&typeof d=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:c,description:d}})},validate(c,d,{method:h}){try{return h(c,d)}catch(p){return d.error("any.custom",{error:p})}},args:["method","description"],multi:!0},messages:{method(c){return this.prefs({messages:c})}},shared:{method(c){a(u.isSchema(c)&&c._flags.id,"Schema must be a schema with an id");const d=this.clone();return d.$_terms.shared=d.$_terms.shared||[],d.$_terms.shared.push(c),d.$_mutateRegister(c),d}},warning:{method(c,d){return a(c&&typeof c=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:c,local:d},warn:!0})},validate:(c,d,{code:h,local:p})=>d.error(h,p),args:["code","local"],multi:!0}},modifiers:{keep(c,d=!0){c.keep=d},message(c,d){c.message=f.compile(d)},warn(c,d=!0){c.warn=d}},manifest:{build(c,d){for(const h in d){const p=d[h];if(["examples","externals","metas","notes","tags"].includes(h))for(const m of p)c=c[h.slice(0,-1)](m);else if(h!=="alterations")if(h!=="whens"){if(h==="shared")for(const m of p)c=c.shared(m)}else for(const m of p){const{ref:b,is:y,not:v,then:w,otherwise:E,concat:A}=m;c=A?c.concat(A):b?c.when(b,{is:y,not:v,then:w,otherwise:E,switch:m.switch,break:m.break}):c.when(y,{then:w,otherwise:E,break:m.break})}else{const m={};for(const{target:b,adjuster:y}of p)m[b]=y;c=c.alter(m)}}return c}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(i,o,s)=>{const a=s(375),l=s(9474),u=s(9621),f=s(8068),c=s(8160),d=s(3292),h={};i.exports=f.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(p,{schema:m,state:b,prefs:y}){if(!Array.isArray(p))return;const v=m.$_getRule("sort");return v?h.sort(m,p,v.args.options,b,y):void 0}},validate(p,{schema:m,error:b}){if(!Array.isArray(p)){if(m._flags.single){const y=[p];return y[c.symbols.arraySingle]=!0,{value:y}}return{errors:b("array.base")}}if(m.$_getRule("items")||m.$_terms.externals)return{value:p.slice()}},rules:{has:{method(p){p=this.$_compile(p,{appendPath:!0});const m=this.$_addRule({name:"has",args:{schema:p}});return m.$_mutateRegister(p),m},validate(p,{state:m,prefs:b,error:y},{schema:v}){const w=[p,...m.ancestors];for(let A=0;A<p.length;++A){const T=m.localize([...m.path,A],w,v);if(v.$_match(p[A],T,b))return p}const E=v._flags.label;return E?y("array.hasKnown",{patternLabel:E}):y("array.hasUnknown",null)},multi:!0},items:{method(...p){c.verifyFlat(p,"items");const m=this.$_addRule("items");for(let b=0;b<p.length;++b){const y=c.tryWithPath(()=>this.$_compile(p[b]),b,{append:!0});m.$_terms.items.push(y)}return m.$_mutateRebuild()},validate(p,{schema:m,error:b,state:y,prefs:v,errorsArray:w}){const E=m.$_terms._requireds.slice(),A=m.$_terms.ordered.slice(),T=[...m.$_terms._inclusions,...E],D=!p[c.symbols.arraySingle];delete p[c.symbols.arraySingle];const k=w();let R=p.length;for(let M=0;M<R;++M){const B=p[M];let K=!1,L=!1;const $=D?M:new Number(M),I=[...y.path,$];if(!m._flags.sparse&&B===void 0){if(k.push(b("array.sparse",{key:$,path:I,pos:M,value:void 0},y.localize(I))),v.abortEarly)return k;A.shift();continue}const U=[p,...y.ancestors];for(const te of m.$_terms._exclusions)if(te.$_match(B,y.localize(I,U,te),v,{presence:"ignore"})){if(k.push(b("array.excludes",{pos:M,value:B},y.localize(I))),v.abortEarly)return k;K=!0,A.shift();break}if(K)continue;if(m.$_terms.ordered.length){if(A.length){const te=A.shift(),le=te.$_validate(B,y.localize(I,U,te),v);if(le.errors){if(k.push(...le.errors),v.abortEarly)return k}else if(te._flags.result==="strip")h.fastSplice(p,M),--M,--R;else{if(!m._flags.sparse&&le.value===void 0){if(k.push(b("array.sparse",{key:$,path:I,pos:M,value:void 0},y.localize(I))),v.abortEarly)return k;continue}p[M]=le.value}continue}if(!m.$_terms.items.length){if(k.push(b("array.orderedLength",{pos:M,limit:m.$_terms.ordered.length})),v.abortEarly)return k;break}}const q=[];let Y=E.length;for(let te=0;te<Y;++te){const le=y.localize(I,U,E[te]);le.snapshot();const ee=E[te].$_validate(B,le,v);if(q[te]=ee,!ee.errors){if(le.commit(),p[M]=ee.value,L=!0,h.fastSplice(E,te),--te,--Y,!m._flags.sparse&&ee.value===void 0&&(k.push(b("array.sparse",{key:$,path:I,pos:M,value:void 0},y.localize(I))),v.abortEarly))return k;break}le.restore()}if(L)continue;const X=v.stripUnknown&&!!v.stripUnknown.arrays||!1;Y=T.length;for(const te of T){let le;const ee=E.indexOf(te);if(ee!==-1)le=q[ee];else{const z=y.localize(I,U,te);if(z.snapshot(),le=te.$_validate(B,z,v),!le.errors){z.commit(),te._flags.result==="strip"?(h.fastSplice(p,M),--M,--R):m._flags.sparse||le.value!==void 0?p[M]=le.value:(k.push(b("array.sparse",{key:$,path:I,pos:M,value:void 0},y.localize(I))),K=!0),L=!0;break}z.restore()}if(Y===1){if(X){h.fastSplice(p,M),--M,--R,L=!0;break}if(k.push(...le.errors),v.abortEarly)return k;K=!0;break}}if(!K&&(m.$_terms._inclusions.length||m.$_terms._requireds.length)&&!L){if(X){h.fastSplice(p,M),--M,--R;continue}if(k.push(b("array.includes",{pos:M,value:B},y.localize(I))),v.abortEarly)return k}}return E.length&&h.fillMissedErrors(m,k,E,p,y,v),A.length&&(h.fillOrderedErrors(m,k,A,p,y,v),k.length||h.fillDefault(A,p,y,v)),k.length?k:p},priority:!0,manifest:!1},length:{method(p){return this.$_addRule({name:"length",args:{limit:p},operator:"="})},validate:(p,m,{limit:b},{name:y,operator:v,args:w})=>c.compare(p.length,b,v)?p:m.error("array."+y,{limit:w.limit,value:p}),args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"}]},max:{method(p){return this.$_addRule({name:"max",method:"length",args:{limit:p},operator:"<="})}},min:{method(p){return this.$_addRule({name:"min",method:"length",args:{limit:p},operator:">="})}},ordered:{method(...p){c.verifyFlat(p,"ordered");const m=this.$_addRule("items");for(let b=0;b<p.length;++b){const y=c.tryWithPath(()=>this.$_compile(p[b]),b,{append:!0});h.validateSingle(y,m),m.$_mutateRegister(y),m.$_terms.ordered.push(y)}return m.$_mutateRebuild()}},single:{method(p){const m=p===void 0||!!p;return a(!m||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",m)}},sort:{method(p={}){c.assertOptions(p,["by","order"]);const m={order:p.order||"ascending"};return p.by&&(m.by=d.ref(p.by,{ancestor:0}),a(!m.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:m}})},validate(p,{error:m,state:b,prefs:y,schema:v},{options:w}){const{value:E,errors:A}=h.sort(v,p,w,b,y);if(A)return A;for(let T=0;T<p.length;++T)if(p[T]!==E[T])return m("array.sort",{order:w.order,by:w.by?w.by.key:"value"});return p},convert:!0},sparse:{method(p){const m=p===void 0||!!p;return this._flags.sparse===m?this:(m?this.clone():this.$_addRule("items")).$_setFlag("sparse",m,{clone:!1})}},unique:{method(p,m={}){a(!p||typeof p=="function"||typeof p=="string","comparator must be a function or a string"),c.assertOptions(m,["ignoreUndefined","separator"]);const b={name:"unique",args:{options:m,comparator:p}};if(p)if(typeof p=="string"){const y=c.default(m.separator,".");b.path=y?p.split(y):[p]}else b.comparator=p;return this.$_addRule(b)},validate(p,{state:m,error:b,schema:y},{comparator:v,options:w},{comparator:E,path:A}){const T={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},D=E||l,k=w.ignoreUndefined;for(let R=0;R<p.length;++R){const M=A?u(p[R],A):p[R],B=E?T.custom:T[typeof M];if(a(B,"Failed to find unique map container for type",typeof M),B instanceof Map){const K=B.entries();let L;for(;!(L=K.next()).done;)if(D(L.value[0],M)){const $=m.localize([...m.path,R],[p,...m.ancestors]),I={pos:R,value:p[R],dupePos:L.value[1],dupeValue:p[L.value[1]]};return A&&(I.path=v),b("array.unique",I,$)}B.set(M,R)}else{if((!k||M!==void 0)&&B[M]!==void 0){const K={pos:R,value:p[R],dupePos:B[M],dupeValue:p[B[M]]};return A&&(K.path=v),b("array.unique",K,m.localize([...m.path,R],[p,...m.ancestors]))}B[M]=R}}return p},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(p,m)=>new Set(p)}},rebuild(p){p.$_terms._inclusions=[],p.$_terms._exclusions=[],p.$_terms._requireds=[];for(const m of p.$_terms.items)h.validateSingle(m,p),m._flags.presence==="required"?p.$_terms._requireds.push(m):m._flags.presence==="forbidden"?p.$_terms._exclusions.push(m):p.$_terms._inclusions.push(m);for(const m of p.$_terms.ordered)h.validateSingle(m,p)},manifest:{build:(p,m)=>(m.items&&(p=p.items(...m.items)),m.ordered&&(p=p.ordered(...m.ordered)),p)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),h.fillMissedErrors=function(p,m,b,y,v,w){const E=[];let A=0;for(const T of b){const D=T._flags.label;D?E.push(D):++A}E.length?A?m.push(p.$_createError("array.includesRequiredBoth",y,{knownMisses:E,unknownMisses:A},v,w)):m.push(p.$_createError("array.includesRequiredKnowns",y,{knownMisses:E},v,w)):m.push(p.$_createError("array.includesRequiredUnknowns",y,{unknownMisses:A},v,w))},h.fillOrderedErrors=function(p,m,b,y,v,w){const E=[];for(const A of b)A._flags.presence==="required"&&E.push(A);E.length&&h.fillMissedErrors(p,m,E,y,v,w)},h.fillDefault=function(p,m,b,y){const v=[];let w=!0;for(let E=p.length-1;E>=0;--E){const A=p[E],T=[m,...b.ancestors],D=A.$_validate(void 0,b.localize(b.path,T,A),y).value;if(w){if(D===void 0)continue;w=!1}v.unshift(D)}v.length&&m.push(...v)},h.fastSplice=function(p,m){let b=m;for(;b<p.length;)p[b++]=p[b];--p.length},h.validateSingle=function(p,m){(p.type==="array"||p._flags._arrayItems)&&(a(!m._flags.single,"Cannot specify array item with single rule enabled"),m.$_setFlag("_arrayItems",!0,{clone:!1}))},h.sort=function(p,m,b,y,v){const w=b.order==="ascending"?1:-1,E=-1*w,A=w,T=(D,k)=>{let R=h.compare(D,k,E,A);if(R!==null||(b.by&&(D=b.by.resolve(D,y,v),k=b.by.resolve(k,y,v)),R=h.compare(D,k,E,A),R!==null))return R;const M=typeof D;if(M!==typeof k)throw p.$_createError("array.sort.mismatching",m,null,y,v);if(M!=="number"&&M!=="string")throw p.$_createError("array.sort.unsupported",m,{type:M},y,v);return M==="number"?(D-k)*w:D<k?E:A};try{return{value:m.slice().sort(T)}}catch(D){return{errors:D}}},h.compare=function(p,m,b,y){return p===m?0:p===void 0?1:m===void 0?-1:p===null?y:m===null?b:null}},4937:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f=s(2036),c={isBool:function(d){return typeof d=="boolean"}};i.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(d,{schema:h}){if(typeof d!="boolean"){if(typeof d=="string"){const p=h._flags.sensitive?d:d.toLowerCase();d=p==="true"||p!=="false"&&d}return typeof d!="boolean"&&(d=h.$_terms.truthy&&h.$_terms.truthy.has(d,null,null,!h._flags.sensitive)||(!h.$_terms.falsy||!h.$_terms.falsy.has(d,null,null,!h._flags.sensitive))&&d),{value:d}}},validate(d,{error:h}){if(typeof d!="boolean")return{value:d,errors:h("boolean.base")}},rules:{truthy:{method(...d){u.verifyFlat(d,"truthy");const h=this.clone();h.$_terms.truthy=h.$_terms.truthy||new f;for(let p=0;p<d.length;++p){const m=d[p];a(m!==void 0,"Cannot call truthy with undefined"),h.$_terms.truthy.add(m)}return h}},falsy:{method(...d){u.verifyFlat(d,"falsy");const h=this.clone();h.$_terms.falsy=h.$_terms.falsy||new f;for(let p=0;p<d.length;++p){const m=d[p];a(m!==void 0,"Cannot call falsy with undefined"),h.$_terms.falsy.add(m)}return h}},sensitive:{method(d=!0){return this.$_setFlag("sensitive",d)}}},cast:{number:{from:c.isBool,to:(d,h)=>d?1:0},string:{from:c.isBool,to:(d,h)=>d?"true":"false"}},manifest:{build:(d,h)=>(h.truthy&&(d=d.truthy(...h.truthy)),h.falsy&&(d=d.falsy(...h.falsy)),d)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f=s(3328),c={isDate:function(d){return d instanceof Date}};i.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(d,{schema:h})=>({value:c.parse(d,h._flags.format)||d})},validate(d,{schema:h,error:p,prefs:m}){if(d instanceof Date&&!isNaN(d.getTime()))return;const b=h._flags.format;return m.convert&&b&&typeof d=="string"?{value:d,errors:p("date.format",{format:b})}:{value:d,errors:p("date.base")}},rules:{compare:{method:!1,validate(d,h,{date:p},{name:m,operator:b,args:y}){const v=p==="now"?Date.now():p.getTime();return u.compare(d.getTime(),v,b)?d:h.error("date."+m,{limit:y.date,value:d})},args:[{name:"date",ref:!0,normalize:d=>d==="now"?d:c.parse(d),assert:d=>d!==null,message:"must have a valid date format"}]},format:{method(d){return a(["iso","javascript","unix"].includes(d),"Unknown date format",d),this.$_setFlag("format",d)}},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{date:d},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{date:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{date:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{date:d},operator:">="})}},timestamp:{method(d="javascript"){return a(["javascript","unix"].includes(d),'"type" must be one of "javascript, unix"'),this.format(d)}}},cast:{number:{from:c.isDate,to:(d,h)=>d.getTime()},string:{from:c.isDate,to:(d,{prefs:h})=>f.date(d,h)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),c.parse=function(d,h){if(d instanceof Date)return d;if(typeof d!="string"&&(isNaN(d)||!isFinite(d))||/^\s*$/.test(d))return null;if(h==="iso")return u.isIsoDate(d)?c.date(d.toString()):null;const p=d;if(typeof d=="string"&&/^[+-]?\d+(\.\d+)?$/.test(d)&&(d=parseFloat(d)),h){if(h==="javascript")return c.date(1*d);if(h==="unix")return c.date(1e3*d);if(typeof p=="string")return null}return c.date(d)},c.date=function(d){const h=new Date(d);return isNaN(h.getTime())?null:h}},390:(i,o,s)=>{const a=s(375),l=s(7824);i.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:u}})},validate:(u,f,{n:c})=>u.length===c?u:f.error("function.arity",{n:c})},class:{method(){return this.$_addRule("class")},validate:(u,f)=>/^\s*class\s/.test(u.toString())?u:f.error("function.class",{value:u})},minArity:{method(u){return a(Number.isSafeInteger(u)&&u>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length>=c?u:f.error("function.minArity",{n:c})},maxArity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length<=c?u:f.error("function.maxArity",{n:c})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(i,o,s)=>{const a=s(978),l=s(375),u=s(8571),f=s(3652),c=s(8068),d=s(8160),h=s(3292),p=s(6354),m=s(6133),b=s(3328),y={renameDefaults:{alias:!1,multiple:!1,override:!1}};i.exports=c.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(v,w)=>v.keys(w),validate(v,{schema:w,error:E,state:A,prefs:T}){if(!v||typeof v!==w.$_property("typeof")||Array.isArray(v))return{value:v,errors:E("object.base",{type:w.$_property("typeof")})};if(!(w.$_terms.renames||w.$_terms.dependencies||w.$_terms.keys||w.$_terms.patterns||w.$_terms.externals))return;v=y.clone(v,T);const D=[];if(w.$_terms.renames&&!y.rename(w,v,A,T,D))return{value:v,errors:D};if(!w.$_terms.keys&&!w.$_terms.patterns&&!w.$_terms.dependencies)return{value:v,errors:D};const k=new Set(Object.keys(v));if(w.$_terms.keys){const R=[v,...A.ancestors];for(const M of w.$_terms.keys){const B=M.key,K=v[B];k.delete(B);const L=A.localize([...A.path,B],R,M),$=M.schema.$_validate(K,L,T);if($.errors){if(T.abortEarly)return{value:v,errors:$.errors};$.value!==void 0&&(v[B]=$.value),D.push(...$.errors)}else M.schema._flags.result==="strip"||$.value===void 0&&K!==void 0?delete v[B]:$.value!==void 0&&(v[B]=$.value)}}if(k.size||w._flags._hasPatternMatch){const R=y.unknown(w,v,k,D,A,T);if(R)return R}if(w.$_terms.dependencies)for(const R of w.$_terms.dependencies){if(R.key!==null&&y.isPresent(R.options)(R.key.resolve(v,A,T,null,{shadow:!1}))===!1)continue;const M=y.dependencies[R.rel](w,R,v,A,T);if(M){const B=w.$_createError(M.code,v,M.context,A,T);if(T.abortEarly)return{value:v,errors:B};D.push(B)}}return{value:v,errors:D}},rules:{and:{method(...v){return d.verifyFlat(v,"and"),y.dependency(this,"and",null,v)}},append:{method(v){return v==null||Object.keys(v).length===0?this:this.keys(v)}},assert:{method(v,w,E){b.isTemplate(v)||(v=h.ref(v)),l(E===void 0||typeof E=="string","Message must be a string"),w=this.$_compile(w,{appendPath:!0});const A=this.$_addRule({name:"assert",args:{subject:v,schema:w,message:E}});return A.$_mutateRegister(v),A.$_mutateRegister(w),A},validate(v,{error:w,prefs:E,state:A},{subject:T,schema:D,message:k}){const R=T.resolve(v,A,E),M=m.isRef(T)?T.absolute(A):[];return D.$_match(R,A.localize(M,[v,...A.ancestors],D),E)?v:w("object.assert",{subject:T,message:k})},args:["subject","schema","message"],multi:!0},instance:{method(v,w){return l(typeof v=="function","constructor must be a function"),w=w||v.name,this.$_addRule({name:"instance",args:{constructor:v,name:w}})},validate:(v,w,{constructor:E,name:A})=>v instanceof E?v:w.error("object.instance",{type:A,value:v}),args:["constructor","name"]},keys:{method(v){l(v===void 0||typeof v=="object","Object schema must be a valid object"),l(!d.isSchema(v),"Object schema cannot be a joi schema");const w=this.clone();if(v)if(Object.keys(v).length){w.$_terms.keys=w.$_terms.keys?w.$_terms.keys.filter(E=>!v.hasOwnProperty(E.key)):new y.Keys;for(const E in v)d.tryWithPath(()=>w.$_terms.keys.push({key:E,schema:this.$_compile(v[E])}),E)}else w.$_terms.keys=new y.Keys;else w.$_terms.keys=null;return w.$_mutateRebuild()}},length:{method(v){return this.$_addRule({name:"length",args:{limit:v},operator:"="})},validate:(v,w,{limit:E},{name:A,operator:T,args:D})=>d.compare(Object.keys(v).length,E,T)?v:w.error("object."+A,{limit:D.limit,value:v}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(v){return this.$_addRule({name:"max",method:"length",args:{limit:v},operator:"<="})}},min:{method(v){return this.$_addRule({name:"min",method:"length",args:{limit:v},operator:">="})}},nand:{method(...v){return d.verifyFlat(v,"nand"),y.dependency(this,"nand",null,v)}},or:{method(...v){return d.verifyFlat(v,"or"),y.dependency(this,"or",null,v)}},oxor:{method(...v){return y.dependency(this,"oxor",null,v)}},pattern:{method(v,w,E={}){const A=v instanceof RegExp;A||(v=this.$_compile(v,{appendPath:!0})),l(w!==void 0,"Invalid rule"),d.assertOptions(E,["fallthrough","matches"]),A&&l(!v.flags.includes("g")&&!v.flags.includes("y"),"pattern should not use global or sticky mode"),w=this.$_compile(w,{appendPath:!0});const T=this.clone();T.$_terms.patterns=T.$_terms.patterns||[];const D={[A?"regex":"schema"]:v,rule:w};return E.matches&&(D.matches=this.$_compile(E.matches),D.matches.type!=="array"&&(D.matches=D.matches.$_root.array().items(D.matches)),T.$_mutateRegister(D.matches),T.$_setFlag("_hasPatternMatch",!0,{clone:!1})),E.fallthrough&&(D.fallthrough=!0),T.$_terms.patterns.push(D),T.$_mutateRegister(w),T}},ref:{method(){return this.$_addRule("ref")},validate:(v,w)=>m.isRef(v)?v:w.error("object.refType",{value:v})},regex:{method(){return this.$_addRule("regex")},validate:(v,w)=>v instanceof RegExp?v:w.error("object.regex",{value:v})},rename:{method(v,w,E={}){l(typeof v=="string"||v instanceof RegExp,"Rename missing the from argument"),l(typeof w=="string"||w instanceof b,"Invalid rename to argument"),l(w!==v,"Cannot rename key to same name:",v),d.assertOptions(E,["alias","ignoreUndefined","override","multiple"]);const A=this.clone();A.$_terms.renames=A.$_terms.renames||[];for(const T of A.$_terms.renames)l(T.from!==v,"Cannot rename the same key multiple times");return w instanceof b&&A.$_mutateRegister(w),A.$_terms.renames.push({from:v,to:w,options:a(y.renameDefaults,E)}),A}},schema:{method(v="any"){return this.$_addRule({name:"schema",args:{type:v}})},validate:(v,w,{type:E})=>!d.isSchema(v)||E!=="any"&&v.type!==E?w.error("object.schema",{type:E}):v},unknown:{method(v){return this.$_setFlag("unknown",v!==!1)}},with:{method(v,w,E={}){return y.dependency(this,"with",v,w,E)}},without:{method(v,w,E={}){return y.dependency(this,"without",v,w,E)}},xor:{method(...v){return d.verifyFlat(v,"xor"),y.dependency(this,"xor",null,v)}}},overrides:{default(v,w){return v===void 0&&(v=d.symbols.deepDefault),this.$_parent("default",v,w)}},rebuild(v){if(v.$_terms.keys){const w=new f.Sorter;for(const E of v.$_terms.keys)d.tryWithPath(()=>w.add(E,{after:E.schema.$_rootReferences(),group:E.key}),E.key);v.$_terms.keys=new y.Keys(...w.nodes)}},manifest:{build(v,w){if(w.keys&&(v=v.keys(w.keys)),w.dependencies)for(const{rel:E,key:A=null,peers:T,options:D}of w.dependencies)v=y.dependency(v,E,A,T,D);if(w.patterns)for(const{regex:E,schema:A,rule:T,fallthrough:D,matches:k}of w.patterns)v=v.pattern(E||A,T,{fallthrough:D,matches:k});if(w.renames)for(const{from:E,to:A,options:T}of w.renames)v=v.rename(E,A,T);return v}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),y.clone=function(v,w){if(typeof v=="object"){if(w.nonEnumerables)return u(v,{shallow:!0});const A=Object.create(Object.getPrototypeOf(v));return Object.assign(A,v),A}const E=function(...A){return v.apply(this,A)};return E.prototype=u(v.prototype),Object.defineProperty(E,"name",{value:v.name,writable:!1}),Object.defineProperty(E,"length",{value:v.length,writable:!1}),Object.assign(E,v),E},y.dependency=function(v,w,E,A,T){l(E===null||typeof E=="string",w,"key must be a strings"),T||(T=A.length>1&&typeof A[A.length-1]=="object"?A.pop():{}),d.assertOptions(T,["separator","isPresent"]),A=[].concat(A);const D=d.default(T.separator,"."),k=[];for(const M of A)l(typeof M=="string",w,"peers must be strings"),k.push(h.ref(M,{separator:D,ancestor:0,prefix:!1}));E!==null&&(E=h.ref(E,{separator:D,ancestor:0,prefix:!1}));const R=v.clone();return R.$_terms.dependencies=R.$_terms.dependencies||[],R.$_terms.dependencies.push(new y.Dependency(w,E,k,A,T)),R},y.dependencies={and(v,w,E,A,T){const D=[],k=[],R=w.peers.length,M=y.isPresent(w.options);for(const B of w.peers)M(B.resolve(E,A,T,null,{shadow:!1}))===!1?D.push(B.key):k.push(B.key);if(D.length!==R&&k.length!==R)return{code:"object.and",context:{present:k,presentWithLabels:y.keysToLabels(v,k),missing:D,missingWithLabels:y.keysToLabels(v,D)}}},nand(v,w,E,A,T){const D=[],k=y.isPresent(w.options);for(const B of w.peers)k(B.resolve(E,A,T,null,{shadow:!1}))&&D.push(B.key);if(D.length!==w.peers.length)return;const R=w.paths[0],M=w.paths.slice(1);return{code:"object.nand",context:{main:R,mainWithLabel:y.keysToLabels(v,R),peers:M,peersWithLabels:y.keysToLabels(v,M)}}},or(v,w,E,A,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,A,T,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:w.paths,peersWithLabels:y.keysToLabels(v,w.paths)}}},oxor(v,w,E,A,T){const D=[],k=y.isPresent(w.options);for(const M of w.peers)k(M.resolve(E,A,T,null,{shadow:!1}))&&D.push(M.key);if(!D.length||D.length===1)return;const R={peers:w.paths,peersWithLabels:y.keysToLabels(v,w.paths)};return R.present=D,R.presentWithLabels=y.keysToLabels(v,D),{code:"object.oxor",context:R}},with(v,w,E,A,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,A,T,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:w.key.key,mainWithLabel:y.keysToLabels(v,w.key.key),peer:k.key,peerWithLabel:y.keysToLabels(v,k.key)}}},without(v,w,E,A,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,A,T,null,{shadow:!1})))return{code:"object.without",context:{main:w.key.key,mainWithLabel:y.keysToLabels(v,w.key.key),peer:k.key,peerWithLabel:y.keysToLabels(v,k.key)}}},xor(v,w,E,A,T){const D=[],k=y.isPresent(w.options);for(const M of w.peers)k(M.resolve(E,A,T,null,{shadow:!1}))&&D.push(M.key);if(D.length===1)return;const R={peers:w.paths,peersWithLabels:y.keysToLabels(v,w.paths)};return D.length===0?{code:"object.missing",context:R}:(R.present=D,R.presentWithLabels=y.keysToLabels(v,D),{code:"object.xor",context:R})}},y.keysToLabels=function(v,w){return Array.isArray(w)?w.map(E=>v.$_mapLabels(E)):v.$_mapLabels(w)},y.isPresent=function(v){return typeof v.isPresent=="function"?v.isPresent:w=>w!==void 0},y.rename=function(v,w,E,A,T){const D={};for(const k of v.$_terms.renames){const R=[],M=typeof k.from!="string";if(M)for(const B in w){if(w[B]===void 0&&k.options.ignoreUndefined||B===k.to)continue;const K=k.from.exec(B);K&&R.push({from:B,to:k.to,match:K})}else!Object.prototype.hasOwnProperty.call(w,k.from)||w[k.from]===void 0&&k.options.ignoreUndefined||R.push(k);for(const B of R){const K=B.from;let L=B.to;if(L instanceof b&&(L=L.render(w,E,A,B.match)),K!==L){if(!k.options.multiple&&D[L]&&(T.push(v.$_createError("object.rename.multiple",w,{from:K,to:L,pattern:M},E,A)),A.abortEarly)||Object.prototype.hasOwnProperty.call(w,L)&&!k.options.override&&!D[L]&&(T.push(v.$_createError("object.rename.override",w,{from:K,to:L,pattern:M},E,A)),A.abortEarly))return!1;w[K]===void 0?delete w[L]:w[L]=w[K],D[L]=!0,k.options.alias||delete w[K]}}}return!0},y.unknown=function(v,w,E,A,T,D){if(v.$_terms.patterns){let k=!1;const R=v.$_terms.patterns.map(B=>{if(B.matches)return k=!0,[]}),M=[w,...T.ancestors];for(const B of E){const K=w[B],L=[...T.path,B];for(let $=0;$<v.$_terms.patterns.length;++$){const I=v.$_terms.patterns[$];if(I.regex){const Y=I.regex.test(B);if(T.mainstay.tracer.debug(T,"rule",`pattern.${$}`,Y?"pass":"error"),!Y)continue}else if(!I.schema.$_match(B,T.nest(I.schema,`pattern.${$}`),D))continue;E.delete(B);const U=T.localize(L,M,{schema:I.rule,key:B}),q=I.rule.$_validate(K,U,D);if(q.errors){if(D.abortEarly)return{value:w,errors:q.errors};A.push(...q.errors)}if(I.matches&&R[$].push(B),w[B]=q.value,!I.fallthrough)break}}if(k)for(let B=0;B<R.length;++B){const K=R[B];if(!K)continue;const L=v.$_terms.patterns[B].matches,$=T.localize(T.path,M,L),I=L.$_validate(K,$,D);if(I.errors){const U=p.details(I.errors,{override:!1});U.matches=K;const q=v.$_createError("object.pattern.match",w,U,T,D);if(D.abortEarly)return{value:w,errors:q};A.push(q)}}}if(E.size&&(v.$_terms.keys||v.$_terms.patterns)){if(D.stripUnknown&&v._flags.unknown===void 0||D.skipFunctions){const k=!(!D.stripUnknown||D.stripUnknown!==!0&&!D.stripUnknown.objects);for(const R of E)k?(delete w[R],E.delete(R)):typeof w[R]=="function"&&E.delete(R)}if(!d.default(v._flags.unknown,D.allowUnknown))for(const k of E){const R=T.localize([...T.path,k],[]),M=v.$_createError("object.unknown",w[k],{child:k},R,D,{flags:!1});if(D.abortEarly)return{value:w,errors:M};A.push(M)}}},y.Dependency=class{constructor(v,w,E,A,T){this.rel=v,this.key=w,this.peers=E,this.paths=A,this.options=T}describe(){const v={rel:this.rel,peers:this.paths};return this.key!==null&&(v.key=this.key.key),this.peers[0].separator!=="."&&(v.options={...v.options,separator:this.peers[0].separator}),this.options.isPresent&&(v.options={...v.options,isPresent:this.options.isPresent}),v}},y.Keys=class extends Array{concat(v){const w=this.slice(),E=new Map;for(let A=0;A<w.length;++A)E.set(w[A].key,A);for(const A of v){const T=A.key,D=E.get(T);D!==void 0?w[D]={key:T,schema:w[D].schema.concat(A.schema)}:w.push(A)}return w}}},8785:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f=s(3292),c=s(6354),d={};i.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(h,p)=>h.ref(p),validate(h,{schema:p,state:m,prefs:b}){a(p.$_terms.link,"Uninitialized link schema");const y=d.generate(p,h,m,b),v=p.$_terms.link[0].ref;return y.$_validate(h,m.nest(y,`link:${v.display}:${y.type}`),b)},generate:(h,p,m,b)=>d.generate(h,p,m,b),rules:{ref:{method(h){a(!this.$_terms.link,"Cannot reinitialize schema"),h=f.ref(h),a(h.type==="value"||h.type==="local","Invalid reference type:",h.type),a(h.type==="local"||h.ancestor==="root"||h.ancestor>0,"Link cannot reference itself");const p=this.clone();return p.$_terms.link=[{ref:h}],p}},relative:{method(h=!0){return this.$_setFlag("relative",h)}}},overrides:{concat(h){a(this.$_terms.link,"Uninitialized link schema"),a(u.isSchema(h),"Invalid schema object"),a(h.type!=="link","Cannot merge type link with another link");const p=this.clone();return p.$_terms.whens||(p.$_terms.whens=[]),p.$_terms.whens.push({concat:h}),p.$_mutateRebuild()}},manifest:{build:(h,p)=>(a(p.link,"Invalid link description missing link"),h.ref(p.link))}}),d.generate=function(h,p,m,b){let y=m.mainstay.links.get(h);if(y)return y._generate(p,m,b).schema;const v=h.$_terms.link[0].ref,{perspective:w,path:E}=d.perspective(v,m);d.assert(w,"which is outside of schema boundaries",v,h,m,b);try{y=E.length?w.$_reach(E):w}catch{d.assert(!1,"to non-existing schema",v,h,m,b)}return d.assert(y.type!=="link","which is another link",v,h,m,b),h._flags.relative||m.mainstay.links.set(h,y),y._generate(p,m,b).schema},d.perspective=function(h,p){if(h.type==="local"){for(const{schema:m,key:b}of p.schemas){if((m._flags.id||b)===h.path[0])return{perspective:m,path:h.path.slice(1)};if(m.$_terms.shared){for(const y of m.$_terms.shared)if(y._flags.id===h.path[0])return{perspective:y,path:h.path.slice(1)}}}return{perspective:null,path:null}}return h.ancestor==="root"?{perspective:p.schemas[p.schemas.length-1].schema,path:h.path}:{perspective:p.schemas[h.ancestor]&&p.schemas[h.ancestor].schema,path:h.path}},d.assert=function(h,p,m,b,y,v){h||a(!1,`"${c.label(b._flags,y,v)}" contains link reference "${m.display}" ${p}`)}},3832:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(c){const d=c.toString(),h=d.indexOf("."),p=d.indexOf("e");return(h<0?0:(p<0?d.length:p)-h-1)+(p<0?0:Math.max(0,-parseInt(d.slice(p+1))))}};i.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(c,{schema:d,error:h}){if(!c.match(f.numberRx))return;c=c.trim();const p={value:parseFloat(c)};if(p.value===0&&(p.value=0),!d._flags.unsafe)if(c.match(/e/i)){if(f.extractSignificantDigits(c)!==f.extractSignificantDigits(String(p.value)))return p.errors=h("number.unsafe"),p}else{const m=p.value.toString();if(m.match(/e/i))return p;if(m!==f.normalizeDecimal(c))return p.errors=h("number.unsafe"),p}return p}},validate(c,{schema:d,error:h,prefs:p}){if(c===1/0||c===-1/0)return{value:c,errors:h("number.infinity")};if(!u.isNumber(c))return{value:c,errors:h("number.base")};const m={value:c};if(p.convert){const b=d.$_getRule("precision");if(b){const y=Math.pow(10,b.args.limit);m.value=Math.round(m.value*y)/y}}return m.value===0&&(m.value=0),!d._flags.unsafe&&(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&(m.errors=h("number.unsafe")),m},rules:{compare:{method:!1,validate:(c,d,{limit:h},{name:p,operator:m,args:b})=>u.compare(c,h,m)?c:d.error("number."+p,{limit:b.limit,value:c}),args:[{name:"limit",ref:!0,assert:u.isNumber,message:"must be a number"}]},greater:{method(c){return this.$_addRule({name:"greater",method:"compare",args:{limit:c},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(c,d)=>Math.trunc(c)-c==0?c:d.error("number.integer")},less:{method(c){return this.$_addRule({name:"less",method:"compare",args:{limit:c},operator:"<"})}},max:{method(c){return this.$_addRule({name:"max",method:"compare",args:{limit:c},operator:"<="})}},min:{method(c){return this.$_addRule({name:"min",method:"compare",args:{limit:c},operator:">="})}},multiple:{method(c){const d=typeof c=="number"?f.decimalPlaces(c):null,h=Math.pow(10,d);return this.$_addRule({name:"multiple",args:{base:c,baseDecimalPlace:d,pfactor:h}})},validate:(c,d,{base:h,baseDecimalPlace:p,pfactor:m},b)=>f.decimalPlaces(c)>p?d.error("number.multiple",{multiple:b.args.base,value:c}):Math.round(m*c)%Math.round(m*h)==0?c:d.error("number.multiple",{multiple:b.args.base,value:c}),args:[{name:"base",ref:!0,assert:c=>typeof c=="number"&&isFinite(c)&&c>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(c,d)=>Number.isSafeInteger(c)&&c>=0&&c<=65535?c:d.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(c){return a(Number.isSafeInteger(c),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:c}})},validate(c,d,{limit:h}){const p=c.toString().match(f.precisionRx);return Math.max((p[1]?p[1].length:0)-(p[2]?parseInt(p[2],10):0),0)<=h?c:d.error("number.precision",{limit:h,value:c})},convert:!0},sign:{method(c){return a(["negative","positive"].includes(c),"Invalid sign",c),this.$_addRule({name:"sign",args:{sign:c}})},validate:(c,d,{sign:h})=>h==="negative"&&c<0||h==="positive"&&c>0?c:d.error(`number.${h}`)},unsafe:{method(c=!0){return a(typeof c=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",c)}}},cast:{string:{from:c=>typeof c=="number",to:(c,d)=>c.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),f.extractSignificantDigits=function(c){return c.replace(f.exponentialPartRegex,"").replace(f.dotRegex,"").replace(f.trailingZerosRegex,"").replace(f.leadingSignAndZerosRegex,"")},f.normalizeDecimal=function(c){return(c=c.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&c.endsWith("0")&&(c=c.replace(/0+$/,"")),c==="-0"?"0":c}},8966:(i,o,s)=>{const a=s(7824);i.exports=a.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,u)=>new Map(Object.entries(l))}}})},7417:(i,o,s)=>{const a=s(375),l=s(5380),u=s(1745),f=s(9959),c=s(6064),d=s(9926),h=s(5752),p=s(8068),m=s(8160),b={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:f.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};i.exports=p.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(y,{schema:v,state:w,prefs:E}){const A=v.$_getRule("normalize");A&&(y=y.normalize(A.args.form));const T=v.$_getRule("case");T&&(y=T.args.direction==="upper"?y.toLocaleUpperCase():y.toLocaleLowerCase());const D=v.$_getRule("trim");if(D&&D.args.enabled&&(y=y.trim()),v.$_terms.replacements)for(const R of v.$_terms.replacements)y=y.replace(R.pattern,R.replacement);const k=v.$_getRule("hex");if(k&&k.args.options.byteAligned&&y.length%2!=0&&(y=`0${y}`),v.$_getRule("isoDate")){const R=b.isoDate(y);R&&(y=R)}if(v._flags.truncate){const R=v.$_getRule("max");if(R){let M=R.args.limit;if(m.isResolvable(M)&&(M=M.resolve(y,w,E),!m.limit(M)))return{value:y,errors:v.$_createError("any.ref",M,{ref:R.args.limit,arg:"limit",reason:"must be a positive integer"},w,E)};y=y.slice(0,M)}}return{value:y}}},validate(y,{schema:v,error:w}){if(typeof y!="string")return{value:y,errors:w("string.base")};if(y===""){const E=v.$_getRule("min");return E&&E.args.limit===0?void 0:{value:y,errors:w("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(y,v)=>/^[a-zA-Z0-9]+$/.test(y)?y:v.error("string.alphanum")},base64:{method(y={}){return m.assertOptions(y,["paddingRequired","urlSafe"]),y={urlSafe:!1,paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof y.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:y}})},validate:(y,v,{options:w})=>b.base64Regex[w.paddingRequired][w.urlSafe].test(y)?y:v.error("string.base64")},case:{method(y){return a(["lower","upper"].includes(y),"Invalid case:",y),this.$_addRule({name:"case",args:{direction:y}})},validate:(y,v,{direction:w})=>w==="lower"&&y===y.toLocaleLowerCase()||w==="upper"&&y===y.toLocaleUpperCase()?y:v.error(`string.${w}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(y,v){let w=y.length,E=0,A=1;for(;w--;){const T=y.charAt(w)*A;E+=T-9*(T>9),A^=3}return E>0&&E%10==0?y:v.error("string.creditCard")}},dataUri:{method(y={}){return m.assertOptions(y,["paddingRequired"]),y={paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:y}})},validate(y,v,{options:w}){const E=y.match(b.dataUriRegex);return E&&(!E[2]||E[2]!=="base64"||b.base64Regex[w.paddingRequired].false.test(E[3]))?y:v.error("string.dataUri")}},domain:{method(y){y&&m.assertOptions(y,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const v=b.addressOptions(y);return this.$_addRule({name:"domain",args:{options:y},address:v})},validate:(y,v,w,{address:E})=>l.isValid(y,E)?y:v.error("string.domain")},email:{method(y={}){m.assertOptions(y,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(y.multiple===void 0||typeof y.multiple=="boolean","multiple option must be an boolean");const v=b.addressOptions(y),w=new RegExp(`\\s*[${y.separator?c(y.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:y},regex:w,address:v})},validate(y,v,{options:w},{regex:E,address:A}){const T=w.multiple?y.split(E):[y],D=[];for(const k of T)u.isValid(k,A)||D.push(k);return D.length?v.error("string.email",{value:y,invalids:D}):y}},guid:{alias:"uuid",method(y={}){m.assertOptions(y,["version","separator"]);let v="";if(y.version){const A=[].concat(y.version);a(A.length>=1,"version must have at least 1 valid version specified");const T=new Set;for(let D=0;D<A.length;++D){const k=A[D];a(typeof k=="string","version at position "+D+" must be a string");const R=b.guidVersions[k.toLowerCase()];a(R,"version at position "+D+" must be one of "+Object.keys(b.guidVersions).join(", ")),a(!T.has(R),"version at position "+D+" must not be a duplicate"),v+=R,T.add(R)}}a(b.guidSeparators.has(y.separator),'separator must be one of true, false, "-", or ":"');const w=y.separator===void 0?"[:-]?":y.separator===!0?"[:-]":y.separator===!1?"[]?":`\\${y.separator}`,E=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${w})[0-9A-F]{4}\\2?[${v||"0-9A-F"}][0-9A-F]{3}\\2?[${v?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:y},regex:E})},validate(y,v,w,{regex:E}){const A=E.exec(y);return A?b.guidBrackets[A[1]]!==A[A.length-1]?v.error("string.guid"):y:v.error("string.guid")}},hex:{method(y={}){return m.assertOptions(y,["byteAligned","prefix"]),y={byteAligned:!1,prefix:!1,...y},a(typeof y.byteAligned=="boolean","byteAligned must be boolean"),a(typeof y.prefix=="boolean"||y.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:y}})},validate:(y,v,{options:w})=>(w.prefix==="optional"?b.hexRegex.withOptionalPrefix:w.prefix===!0?b.hexRegex.withPrefix:b.hexRegex.withoutPrefix).test(y)?w.byteAligned&&y.length%2!=0?v.error("string.hexAlign"):y:v.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(y,v)=>l.isValid(y,{minDomainSegments:1})||b.ipRegex.test(y)?y:v.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(y={}){m.assertOptions(y,["cidr","version"]);const{cidr:v,versions:w,regex:E}=f.regex(y),A=y.version?w:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:v,version:A}},regex:E})},validate:(y,v,{options:w},{regex:E})=>E.test(y)?y:w.version?v.error("string.ipVersion",{value:y,cidr:w.cidr,version:w.version}):v.error("string.ip",{value:y,cidr:w.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(y,{error:v})=>b.isoDate(y)?y:v("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(y,v)=>b.isoDurationRegex.test(y)?y:v.error("string.isoDuration")},length:{method(y,v){return b.length(this,"length",y,"=",v)},validate(y,v,{limit:w,encoding:E},{name:A,operator:T,args:D}){const k=!E&&y.length;return m.compare(k,w,T)?y:v.error("string."+A,{limit:D.limit,value:y,encoding:E})},args:[{name:"limit",ref:!0,assert:m.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(y,v){return b.length(this,"max",y,"<=",v)},args:["limit","encoding"]},min:{method(y,v){return b.length(this,"min",y,">=",v)},args:["limit","encoding"]},normalize:{method(y="NFC"){return a(b.normalizationForms.includes(y),"normalization form must be one of "+b.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:y}})},validate:(y,{error:v},{form:w})=>y===y.normalize(w)?y:v("string.normalize",{value:y,form:w}),convert:!0},pattern:{alias:"regex",method(y,v={}){a(y instanceof RegExp,"regex must be a RegExp"),a(!y.flags.includes("g")&&!y.flags.includes("y"),"regex should not use global or sticky mode"),typeof v=="string"&&(v={name:v}),m.assertOptions(v,["invert","name"]);const w=["string.pattern",v.invert?".invert":"",v.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:y,options:v},errorCode:w})},validate:(y,v,{regex:w,options:E},{errorCode:A})=>w.test(y)^E.invert?y:v.error(A,{name:E.name,regex:w,value:y}),args:["regex","options"],multi:!0},replace:{method(y,v){typeof y=="string"&&(y=new RegExp(c(y),"g")),a(y instanceof RegExp,"pattern must be a RegExp"),a(typeof v=="string","replacement must be a String");const w=this.clone();return w.$_terms.replacements||(w.$_terms.replacements=[]),w.$_terms.replacements.push({pattern:y,replacement:v}),w}},token:{method(){return this.$_addRule("token")},validate:(y,v)=>/^\w+$/.test(y)?y:v.error("string.token")},trim:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:y}})},validate:(y,v,{enabled:w})=>w&&y!==y.trim()?v.error("string.trim"):y,convert:!0},truncate:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",y)}},uppercase:{method(){return this.case("upper")}},uri:{method(y={}){m.assertOptions(y,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),y.domain&&m.assertOptions(y.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:v,scheme:w}=h.regex(y),E=y.domain?b.addressOptions(y.domain):null;return this.$_addRule({name:"uri",args:{options:y},regex:v,domain:E,scheme:w})},validate(y,v,{options:w},{regex:E,domain:A,scheme:T}){if(["http:/","https:/"].includes(y))return v.error("string.uri");let D=E.exec(y);if(!D&&v.prefs.convert&&w.encodeUri){const k=encodeURI(y);D=E.exec(k),D&&(y=k)}if(D){const k=D[1]||D[2];return!A||w.allowRelative&&!k||l.isValid(k,A)?y:v.error("string.domain",{value:k})}return w.relativeOnly?v.error("string.uriRelativeOnly"):w.scheme?v.error("string.uriCustomScheme",{scheme:T,value:y}):v.error("string.uri")}}},manifest:{build(y,v){if(v.replacements)for(const{pattern:w,replacement:E}of v.replacements)y=y.replace(w,E);return y}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),b.addressOptions=function(y){if(!y)return b.tlds||y;if(a(y.minDomainSegments===void 0||Number.isSafeInteger(y.minDomainSegments)&&y.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(y.maxDomainSegments===void 0||Number.isSafeInteger(y.maxDomainSegments)&&y.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),y.tlds===!1)return y;if(y.tlds===!0||y.tlds===void 0)return a(b.tlds,"Built-in TLD list disabled"),Object.assign({},y,b.tlds);a(typeof y.tlds=="object","tlds must be true, false, or an object");const v=y.tlds.deny;if(v)return Array.isArray(v)&&(y=Object.assign({},y,{tlds:{deny:new Set(v)}})),a(y.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!y.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),b.validateTlds(y.tlds.deny,"tlds.deny"),y;const w=y.tlds.allow;return w?w===!0?(a(b.tlds,"Built-in TLD list disabled"),Object.assign({},y,b.tlds)):(Array.isArray(w)&&(y=Object.assign({},y,{tlds:{allow:new Set(w)}})),a(y.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),b.validateTlds(y.tlds.allow,"tlds.allow"),y):y},b.validateTlds=function(y,v){for(const w of y)a(l.isValid(w,{minDomainSegments:1,maxDomainSegments:1}),`${v} must contain valid top level domain names`)},b.isoDate=function(y){if(!m.isIsoDate(y))return null;/.*T.*[+-]\d\d$/.test(y)&&(y+="00");const v=new Date(y);return isNaN(v.getTime())?null:v.toISOString()},b.length=function(y,v,w,E,A){return a(!A||!1,"Invalid encoding:",A),y.$_addRule({name:v,method:"length",args:{limit:w,encoding:A},operator:E})}},8826:(i,o,s)=>{const a=s(375),l=s(8068),u={};u.Map=class extends Map{slice(){return new u.Map(this)}},i.exports=l.extend({type:"symbol",terms:{map:{init:new u.Map}},coerce:{method(f,{schema:c,error:d}){const h=c.$_terms.map.get(f);return h&&(f=h),c._flags.only&&typeof f!="symbol"?{value:f,errors:d("symbol.map",{map:c.$_terms.map})}:{value:f}}},validate(f,{error:c}){if(typeof f!="symbol")return{value:f,errors:c("symbol.base")}},rules:{map:{method(f){f&&!f[Symbol.iterator]&&typeof f=="object"&&(f=Object.entries(f)),a(f&&f[Symbol.iterator],"Iterable must be an iterable or object");const c=this.clone(),d=[];for(const h of f){a(h&&h[Symbol.iterator],"Entry must be an iterable");const[p,m]=h;a(typeof p!="object"&&typeof p!="function"&&typeof p!="symbol","Key must not be of type object, function, or Symbol"),a(typeof m=="symbol","Value must be a Symbol"),c.$_terms.map.set(p,m),d.push(m)}return c.valid(...d)}}},manifest:{build:(f,c)=>(c.map&&(f=f.map(c.map)),f)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(i,o,s)=>{const a=s(375),l=s(8571),u=s(738),f=s(9621),c=s(8160),d=s(6354),h=s(493),p={result:Symbol("result")};o.entry=function(m,b,y){let v=c.defaults;y&&(a(y.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(y.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),v=c.preferences(c.defaults,y));const w=p.entry(m,b,v);a(!w.mainstay.externals.length,"Schema with external rules must use validateAsync()");const E={value:w.value};return w.error&&(E.error=w.error),w.mainstay.warnings.length&&(E.warning=d.details(w.mainstay.warnings)),w.mainstay.debug&&(E.debug=w.mainstay.debug),w.mainstay.artifacts&&(E.artifacts=w.mainstay.artifacts),E},o.entryAsync=async function(m,b,y){let v=c.defaults;y&&(v=c.preferences(c.defaults,y));const w=p.entry(m,b,v),E=w.mainstay;if(w.error)throw E.debug&&(w.error.debug=E.debug),w.error;if(E.externals.length){let T=w.value;const D=[];for(const k of E.externals){const R=k.state.path,M=k.schema.type==="link"?E.links.get(k.schema):null;let B,K,L=T;const $=R.length?[T]:[],I=R.length?f(m,R):m;if(R.length){B=R[R.length-1];let U=T;for(const q of R.slice(0,-1))U=U[q],$.unshift(U);K=$[0],L=K[B]}try{const U=(Y,X)=>(M||k.schema).$_createError(Y,L,X,k.state,v),q=await k.method(L,{schema:k.schema,linked:M,state:k.state,prefs:y,original:I,error:U,errorsArray:p.errorsArray,warn:(Y,X)=>E.warnings.push((M||k.schema).$_createError(Y,L,X,k.state,v)),message:(Y,X)=>(M||k.schema).$_createError("external",L,X,k.state,v,{messages:Y})});if(q===void 0||q===L)continue;if(q instanceof d.Report){if(E.tracer.log(k.schema,k.state,"rule","external","error"),D.push(q),v.abortEarly)break;continue}if(Array.isArray(q)&&q[c.symbols.errors]){if(E.tracer.log(k.schema,k.state,"rule","external","error"),D.push(...q),v.abortEarly)break;continue}K?(E.tracer.value(k.state,"rule",L,q,"external"),K[B]=q):(E.tracer.value(k.state,"rule",T,q,"external"),T=q)}catch(U){throw v.errors.label&&(U.message+=` (${k.label})`),U}}if(w.value=T,D.length)throw w.error=d.process(D,m,v),E.debug&&(w.error.debug=E.debug),w.error}if(!v.warnings&&!v.debug&&!v.artifacts)return w.value;const A={value:w.value};return E.warnings.length&&(A.warning=d.details(E.warnings)),E.debug&&(A.debug=E.debug),E.artifacts&&(A.artifacts=E.artifacts),A},p.Mainstay=class{constructor(m,b,y){this.externals=[],this.warnings=[],this.tracer=m,this.debug=b,this.links=y,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const m=this._snapshots.pop();this.externals=m.externals,this.warnings=m.warnings}commit(){this._snapshots.pop()}},p.entry=function(m,b,y){const{tracer:v,cleanup:w}=p.tracer(b,y),E=y.debug?[]:null,A=b._ids._schemaChain?new Map:null,T=new p.Mainstay(v,E,A),D=b._ids._schemaChain?[{schema:b}]:null,k=new h([],[],{mainstay:T,schemas:D}),R=o.validate(m,b,k,y);w&&b.$_root.untrace();const M=d.process(R.errors,m,y);return{value:R.value,error:M,mainstay:T}},p.tracer=function(m,b){return m.$_root._tracer?{tracer:m.$_root._tracer._register(m)}:b.debug?(a(m.$_root.trace,"Debug mode not supported"),{tracer:m.$_root.trace()._register(m),cleanup:!0}):{tracer:p.ignore}},o.validate=function(m,b,y,v,w={}){if(b.$_terms.whens&&(b=b._generate(m,y,v).schema),b._preferences&&(v=p.prefs(b,v)),b._cache&&v.cache){const M=b._cache.get(m);if(y.mainstay.tracer.debug(y,"validate","cached",!!M),M)return M}const E=(M,B,K)=>b.$_createError(M,m,B,K||y,v),A={original:m,prefs:v,schema:b,state:y,error:E,errorsArray:p.errorsArray,warn:(M,B,K)=>y.mainstay.warnings.push(E(M,B,K)),message:(M,B)=>b.$_createError("custom",m,B,y,v,{messages:M})};y.mainstay.tracer.entry(b,y);const T=b._definition;if(T.prepare&&m!==void 0&&v.convert){const M=T.prepare(m,A);if(M){if(y.mainstay.tracer.value(y,"prepare",m,M.value),M.errors)return p.finalize(M.value,[].concat(M.errors),A);m=M.value}}if(T.coerce&&m!==void 0&&v.convert&&(!T.coerce.from||T.coerce.from.includes(typeof m))){const M=T.coerce.method(m,A);if(M){if(y.mainstay.tracer.value(y,"coerced",m,M.value),M.errors)return p.finalize(M.value,[].concat(M.errors),A);m=M.value}}const D=b._flags.empty;D&&D.$_match(p.trim(m,b),y.nest(D),c.defaults)&&(y.mainstay.tracer.value(y,"empty",m,void 0),m=void 0);const k=w.presence||b._flags.presence||(b._flags._endedSwitch?null:v.presence);if(m===void 0){if(k==="forbidden")return p.finalize(m,null,A);if(k==="required")return p.finalize(m,[b.$_createError("any.required",m,null,y,v)],A);if(k==="optional"){if(b._flags.default!==c.symbols.deepDefault)return p.finalize(m,null,A);y.mainstay.tracer.value(y,"default",m,{}),m={}}}else if(k==="forbidden")return p.finalize(m,[b.$_createError("any.unknown",m,null,y,v)],A);const R=[];if(b._valids){const M=b._valids.get(m,y,v,b._flags.insensitive);if(M)return v.convert&&(y.mainstay.tracer.value(y,"valids",m,M.value),m=M.value),y.mainstay.tracer.filter(b,y,"valid",M),p.finalize(m,null,A);if(b._flags.only){const B=b.$_createError("any.only",m,{valids:b._valids.values({display:!0})},y,v);if(v.abortEarly)return p.finalize(m,[B],A);R.push(B)}}if(b._invalids){const M=b._invalids.get(m,y,v,b._flags.insensitive);if(M){y.mainstay.tracer.filter(b,y,"invalid",M);const B=b.$_createError("any.invalid",m,{invalids:b._invalids.values({display:!0})},y,v);if(v.abortEarly)return p.finalize(m,[B],A);R.push(B)}}if(T.validate){const M=T.validate(m,A);if(M&&(y.mainstay.tracer.value(y,"base",m,M.value),m=M.value,M.errors)){if(!Array.isArray(M.errors))return R.push(M.errors),p.finalize(m,R,A);if(M.errors.length)return R.push(...M.errors),p.finalize(m,R,A)}}return b._rules.length?p.rules(m,R,A):p.finalize(m,R,A)},p.rules=function(m,b,y){const{schema:v,state:w,prefs:E}=y;for(const A of v._rules){const T=v._definition.rules[A.method];if(T.convert&&E.convert){w.mainstay.tracer.log(v,w,"rule",A.name,"full");continue}let D,k=A.args;if(A._resolve.length){k=Object.assign({},k);for(const M of A._resolve){const B=T.argsByName.get(M),K=k[M].resolve(m,w,E),L=B.normalize?B.normalize(K):K,$=c.validateArg(L,null,B);if($){D=v.$_createError("any.ref",K,{arg:M,ref:k[M],reason:$},w,E);break}k[M]=L}}D=D||T.validate(m,y,k,A);const R=p.rule(D,A);if(R.errors){if(w.mainstay.tracer.log(v,w,"rule",A.name,"error"),A.warn){w.mainstay.warnings.push(...R.errors);continue}if(E.abortEarly)return p.finalize(m,R.errors,y);b.push(...R.errors)}else w.mainstay.tracer.log(v,w,"rule",A.name,"pass"),w.mainstay.tracer.value(w,"rule",m,R.value,A.name),m=R.value}return p.finalize(m,b,y)},p.rule=function(m,b){return m instanceof d.Report?(p.error(m,b),{errors:[m],value:null}):Array.isArray(m)&&m[c.symbols.errors]?(m.forEach(y=>p.error(y,b)),{errors:m,value:null}):{errors:null,value:m}},p.error=function(m,b){return b.message&&m._setTemplate(b.message),m},p.finalize=function(m,b,y){b=b||[];const{schema:v,state:w,prefs:E}=y;if(b.length){const T=p.default("failover",void 0,b,y);T!==void 0&&(w.mainstay.tracer.value(w,"failover",m,T),m=T,b=[])}if(b.length&&v._flags.error)if(typeof v._flags.error=="function"){b=v._flags.error(b),Array.isArray(b)||(b=[b]);for(const T of b)a(T instanceof Error||T instanceof d.Report,"error() must return an Error object")}else b=[v._flags.error];if(m===void 0){const T=p.default("default",m,b,y);w.mainstay.tracer.value(w,"default",m,T),m=T}if(v._flags.cast&&m!==void 0){const T=v._definition.cast[v._flags.cast];if(T.from(m)){const D=T.to(m,y);w.mainstay.tracer.value(w,"cast",m,D,v._flags.cast),m=D}}if(v.$_terms.externals&&E.externals&&E._externals!==!1)for(const{method:T}of v.$_terms.externals)w.mainstay.externals.push({method:T,schema:v,state:w,label:d.label(v._flags,w,E)});const A={value:m,errors:b.length?b:null};return v._flags.result&&(A.value=v._flags.result==="strip"?void 0:y.original,w.mainstay.tracer.value(w,v._flags.result,m,A.value),w.shadow(m,v._flags.result)),v._cache&&E.cache!==!1&&!v._refs.length&&v._cache.set(y.original,A),m===void 0||A.errors||v._flags.artifact===void 0||(w.mainstay.artifacts=w.mainstay.artifacts||new Map,w.mainstay.artifacts.has(v._flags.artifact)||w.mainstay.artifacts.set(v._flags.artifact,[]),w.mainstay.artifacts.get(v._flags.artifact).push(w.path)),A},p.prefs=function(m,b){const y=b===c.defaults;return y&&m._preferences[c.symbols.prefs]?m._preferences[c.symbols.prefs]:(b=c.preferences(b,m._preferences),y&&(m._preferences[c.symbols.prefs]=b),b)},p.default=function(m,b,y,v){const{schema:w,state:E,prefs:A}=v,T=w._flags[m];if(A.noDefaults||T===void 0)return b;if(E.mainstay.tracer.log(w,E,"rule",m,"full"),!T)return T;if(typeof T=="function"){const D=T.length?[l(E.ancestors[0]),v]:[];try{return T(...D)}catch(k){return void y.push(w.$_createError(`any.${m}`,null,{error:k},E,A))}}return typeof T!="object"?T:T[c.symbols.literal]?T.literal:c.isResolvable(T)?T.resolve(b,E,A):l(T)},p.trim=function(m,b){if(typeof m!="string")return m;const y=b.$_getRule("trim");return y&&y.args.enabled?m.trim():m},p.ignore={active:!1,debug:u,entry:u,filter:u,log:u,resolve:u,value:u},p.errorsArray=function(){const m=[];return m[c.symbols.errors]=!0,m}},2036:(i,o,s)=>{const a=s(375),l=s(9474),u=s(8160),f={};i.exports=f.Values=class{constructor(c,d){this._values=new Set(c),this._refs=new Set(d),this._lowercase=f.lowercases(c),this._override=!1}get length(){return this._values.size+this._refs.size}add(c,d){u.isResolvable(c)?this._refs.has(c)||(this._refs.add(c),d&&d.register(c)):this.has(c,null,null,!1)||(this._values.add(c),typeof c=="string"&&this._lowercase.set(c.toLowerCase(),c))}static merge(c,d,h){if(c=c||new f.Values,d){if(d._override)return d.clone();for(const p of[...d._values,...d._refs])c.add(p)}if(h)for(const p of[...h._values,...h._refs])c.remove(p);return c.length?c:null}remove(c){u.isResolvable(c)?this._refs.delete(c):(this._values.delete(c),typeof c=="string"&&this._lowercase.delete(c.toLowerCase()))}has(c,d,h,p){return!!this.get(c,d,h,p)}get(c,d,h,p){if(!this.length)return!1;if(this._values.has(c))return{value:c};if(typeof c=="string"&&c&&p){const m=this._lowercase.get(c.toLowerCase());if(m)return{value:m}}if(!this._refs.size&&typeof c!="object")return!1;if(typeof c=="object"){for(const m of this._values)if(l(m,c))return{value:m}}if(d)for(const m of this._refs){const b=m.resolve(c,d,h,null,{in:!0});if(b===void 0)continue;const y=m.in&&typeof b=="object"?Array.isArray(b)?b:Object.keys(b):[b];for(const v of y)if(typeof v==typeof c){if(p&&c&&typeof c=="string"){if(v.toLowerCase()===c.toLowerCase())return{value:v,ref:m}}else if(l(v,c))return{value:v,ref:m}}}return!1}override(){this._override=!0}values(c){if(c&&c.display){const d=[];for(const h of[...this._values,...this._refs])h!==void 0&&d.push(h);return d}return Array.from([...this._values,...this._refs])}clone(){const c=new f.Values(this._values,this._refs);return c._override=this._override,c}concat(c){a(!c._override,"Cannot concat override set of values");const d=new f.Values([...this._values,...c._values],[...this._refs,...c._refs]);return d._override=this._override,d}describe(){const c=[];this._override&&c.push({override:!0});for(const d of this._values.values())c.push(d&&typeof d=="object"?{value:d}:d);for(const d of this._refs.values())c.push(d.describe());return c}},f.Values.prototype[u.symbols.values]=!0,f.Values.prototype.slice=f.Values.prototype.clone,f.lowercases=function(c){const d=new Map;if(c)for(const h of c)typeof h=="string"&&d.set(h.toLowerCase(),h);return d}},978:(i,o,s)=>{const a=s(375),l=s(8571),u=s(1687),f=s(9621),c={};i.exports=function(d,h,p={}){if(a(d&&typeof d=="object","Invalid defaults value: must be an object"),a(!h||h===!0||typeof h=="object","Invalid source value: must be true, falsy or an object"),a(typeof p=="object","Invalid options: must be an object"),!h)return null;if(p.shallow)return c.applyToDefaultsWithShallow(d,h,p);const m=l(d);if(h===!0)return m;const b=p.nullOverride!==void 0&&p.nullOverride;return u(m,h,{nullOverride:b,mergeArrays:!1})},c.applyToDefaultsWithShallow=function(d,h,p){const m=p.shallow;a(Array.isArray(m),"Invalid keys");const b=new Map,y=h===!0?null:new Set;for(let E of m){E=Array.isArray(E)?E:E.split(".");const A=f(d,E);A&&typeof A=="object"?b.set(A,y&&f(h,E)||A):y&&y.add(E)}const v=l(d,{},b);if(!y)return v;for(const E of y)c.reachCopy(v,h,E);const w=p.nullOverride!==void 0&&p.nullOverride;return u(v,h,{nullOverride:w,mergeArrays:!1})},c.reachCopy=function(d,h,p){for(const y of p){if(!(y in h))return;const v=h[y];if(typeof v!="object"||v===null)return;h=v}const m=h;let b=d;for(let y=0;y<p.length-1;++y){const v=p[y];typeof b[v]!="object"&&(b[v]={}),b=b[v]}b[p[p.length-1]]=m}},375:(i,o,s)=>{const a=s(7916);i.exports=function(l,...u){if(!l)throw u.length===1&&u[0]instanceof Error?u[0]:new a(u)}},8571:(i,o,s)=>{const a=s(9621),l=s(4277),u=s(7043),f={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};i.exports=f.clone=function(c,d={},h=null){if(typeof c!="object"||c===null)return c;let p=f.clone,m=h;if(d.shallow){if(d.shallow!==!0)return f.cloneWithShallow(c,d);p=w=>w}else if(m){const w=m.get(c);if(w)return w}else m=new Map;const b=l.getInternalProto(c);if(b===l.buffer)return!1;if(b===l.date)return new Date(c.getTime());if(b===l.regex)return new RegExp(c);const y=f.base(c,b,d);if(y===c)return c;if(m&&m.set(c,y),b===l.set)for(const w of c)y.add(p(w,d,m));else if(b===l.map)for(const[w,E]of c)y.set(w,p(E,d,m));const v=u.keys(c,d);for(const w of v){if(w==="__proto__")continue;if(b===l.array&&w==="length"){y.length=c.length;continue}const E=Object.getOwnPropertyDescriptor(c,w);E?E.get||E.set?Object.defineProperty(y,w,E):E.enumerable?y[w]=p(c[w],d,m):Object.defineProperty(y,w,{enumerable:!1,writable:!0,configurable:!0,value:p(c[w],d,m)}):Object.defineProperty(y,w,{enumerable:!0,writable:!0,configurable:!0,value:p(c[w],d,m)})}return y},f.cloneWithShallow=function(c,d){const h=d.shallow;(d=Object.assign({},d)).shallow=!1;const p=new Map;for(const m of h){const b=a(c,m);typeof b!="object"&&typeof b!="function"||p.set(b,b)}return f.clone(c,d,p)},f.base=function(c,d,h){if(h.prototype===!1)return f.needsProtoHack.has(d)?new d.constructor:d===l.array?[]:{};const p=Object.getPrototypeOf(c);if(p&&p.isImmutable)return c;if(d===l.array){const m=[];return p!==d&&Object.setPrototypeOf(m,p),m}if(f.needsProtoHack.has(d)){const m=new p.constructor;return p!==d&&Object.setPrototypeOf(m,p),m}return Object.create(p)}},9474:(i,o,s)=>{const a=s(4277),l={mismatched:null};i.exports=function(u,f,c){return c=Object.assign({prototype:!0},c),!!l.isDeepEqual(u,f,c,[])},l.isDeepEqual=function(u,f,c,d){if(u===f)return u!==0||1/u==1/f;const h=typeof u;if(h!==typeof f||u===null||f===null)return!1;if(h==="function"){if(!c.deepFunction||u.toString()!==f.toString())return!1}else if(h!=="object")return u!=u&&f!=f;const p=l.getSharedType(u,f,!!c.prototype);switch(p){case a.buffer:return!1;case a.promise:return u===f;case a.regex:return u.toString()===f.toString();case l.mismatched:return!1}for(let m=d.length-1;m>=0;--m)if(d[m].isSame(u,f))return!0;d.push(new l.SeenEntry(u,f));try{return!!l.isDeepEqualObj(p,u,f,c,d)}finally{d.pop()}},l.getSharedType=function(u,f,c){if(c)return Object.getPrototypeOf(u)!==Object.getPrototypeOf(f)?l.mismatched:a.getInternalProto(u);const d=a.getInternalProto(u);return d!==a.getInternalProto(f)?l.mismatched:d},l.valueOf=function(u){const f=u.valueOf;if(f===void 0)return u;try{return f.call(u)}catch(c){return c}},l.hasOwnEnumerableProperty=function(u,f){return Object.prototype.propertyIsEnumerable.call(u,f)},l.isSetSimpleEqual=function(u,f){for(const c of Set.prototype.values.call(u))if(!Set.prototype.has.call(f,c))return!1;return!0},l.isDeepEqualObj=function(u,f,c,d,h){const{isDeepEqual:p,valueOf:m,hasOwnEnumerableProperty:b}=l,{keys:y,getOwnPropertySymbols:v}=Object;if(u===a.array){if(!d.part){if(f.length!==c.length)return!1;for(let D=0;D<f.length;++D)if(!p(f[D],c[D],d,h))return!1;return!0}for(const D of f)for(const k of c)if(p(D,k,d,h))return!0}else if(u===a.set){if(f.size!==c.size)return!1;if(!l.isSetSimpleEqual(f,c)){const D=new Set(Set.prototype.values.call(c));for(const k of Set.prototype.values.call(f)){if(D.delete(k))continue;let R=!1;for(const M of D)if(p(k,M,d,h)){D.delete(M),R=!0;break}if(!R)return!1}}}else if(u===a.map){if(f.size!==c.size)return!1;for(const[D,k]of Map.prototype.entries.call(f))if(k===void 0&&!Map.prototype.has.call(c,D)||!p(k,Map.prototype.get.call(c,D),d,h))return!1}else if(u===a.error&&(f.name!==c.name||f.message!==c.message))return!1;const w=m(f),E=m(c);if((f!==w||c!==E)&&!p(w,E,d,h))return!1;const A=y(f);if(!d.part&&A.length!==y(c).length&&!d.skip)return!1;let T=0;for(const D of A)if(d.skip&&d.skip.includes(D))c[D]===void 0&&++T;else if(!b(c,D)||!p(f[D],c[D],d,h))return!1;if(!d.part&&A.length-T!==y(c).length)return!1;if(d.symbols!==!1){const D=v(f),k=new Set(v(c));for(const R of D){if(!d.skip||!d.skip.includes(R)){if(b(f,R)){if(!b(c,R)||!p(f[R],c[R],d,h))return!1}else if(b(c,R))return!1}k.delete(R)}for(const R of k)if(b(c,R))return!1}return!0},l.SeenEntry=class{constructor(u,f){this.obj=u,this.ref=f}isSame(u,f){return this.obj===u&&this.ref===f}}},7916:(i,o,s)=>{const a=s(8761);i.exports=class extends Error{constructor(l){super(l.filter(u=>u!=="").map(u=>typeof u=="string"?u:u instanceof Error?u.message:a(u)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o.assert)}}},5277:i=>{const o={};i.exports=function(s){if(!s)return"";let a="";for(let l=0;l<s.length;++l){const u=s.charCodeAt(l);o.isSafe(u)?a+=s[l]:a+=o.escapeHtmlChar(u)}return a},o.escapeHtmlChar=function(s){return o.namedHtml.get(s)||(s>=256?"&#"+s+";":`&#x${s.toString(16).padStart(2,"0")};`)},o.isSafe=function(s){return o.safeCharCodes.has(s)},o.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),o.safeCharCodes=function(){const s=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&s.add(a);return s}()},6064:i=>{i.exports=function(o){return o.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:i=>{i.exports=function(){}},1687:(i,o,s)=>{const a=s(375),l=s(8571),u=s(7043),f={};i.exports=f.merge=function(c,d,h){if(a(c&&typeof c=="object","Invalid target value: must be an object"),a(d==null||typeof d=="object","Invalid source value: must be null, undefined, or an object"),!d)return c;if(h=Object.assign({nullOverride:!0,mergeArrays:!0},h),Array.isArray(d)){a(Array.isArray(c),"Cannot merge array onto an object"),h.mergeArrays||(c.length=0);for(let m=0;m<d.length;++m)c.push(l(d[m],{symbols:h.symbols}));return c}const p=u.keys(d,h);for(let m=0;m<p.length;++m){const b=p[m];if(b==="__proto__"||!Object.prototype.propertyIsEnumerable.call(d,b))continue;const y=d[b];if(y&&typeof y=="object"){if(c[b]===y)continue;!c[b]||typeof c[b]!="object"||Array.isArray(c[b])!==Array.isArray(y)||y instanceof Date||y instanceof RegExp?c[b]=l(y,{symbols:h.symbols}):f.merge(c[b],y,h)}else(y!=null||h.nullOverride)&&(c[b]=y)}return c}},9621:(i,o,s)=>{const a=s(375),l={};i.exports=function(u,f,c){if(f===!1||f==null)return u;typeof(c=c||{})=="string"&&(c={separator:c});const d=Array.isArray(f);a(!d||!c.separator,"Separator option is not valid for array-based chain");const h=d?f:f.split(c.separator||".");let p=u;for(let m=0;m<h.length;++m){let b=h[m];const y=c.iterables&&l.iterables(p);if(Array.isArray(p)||y==="set"){const v=Number(b);Number.isInteger(v)&&(b=v<0?p.length+v:v)}if(!p||typeof p=="function"&&c.functions===!1||!y&&p[b]===void 0){a(!c.strict||m+1===h.length,"Missing segment",b,"in reach path ",f),a(typeof p=="object"||c.functions===!0||typeof p!="function","Invalid segment",b,"in reach path ",f),p=c.default;break}p=y?y==="set"?[...p][b]:p.get(b):p[b]}return p},l.iterables=function(u){return u instanceof Set?"set":u instanceof Map?"map":void 0}},8761:i=>{i.exports=function(...o){try{return JSON.stringify(...o)}catch(s){return"[Cannot display object: "+s.message+"]"}}},4277:(i,o)=>{const s={};o=i.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},s.typeMap=new Map([["[object Error]",o.error],["[object Map]",o.map],["[object Promise]",o.promise],["[object Set]",o.set],["[object WeakMap]",o.weakMap],["[object WeakSet]",o.weakSet]]),o.getInternalProto=function(a){if(Array.isArray(a))return o.array;if(a instanceof Date)return o.date;if(a instanceof RegExp)return o.regex;if(a instanceof Error)return o.error;const l=Object.prototype.toString.call(a);return s.typeMap.get(l)||o.generic}},7043:(i,o)=>{o.keys=function(s,a={}){return a.symbols!==!1?Reflect.ownKeys(s):Object.getOwnPropertyNames(s)}},3652:(i,o,s)=>{const a=s(375),l={};o.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(u,f){const c=[].concat((f=f||{}).before||[]),d=[].concat(f.after||[]),h=f.group||"?",p=f.sort||0;a(!c.includes(h),`Item cannot come before itself: ${h}`),a(!c.includes("?"),"Item cannot come before unassociated items"),a(!d.includes(h),`Item cannot come after itself: ${h}`),a(!d.includes("?"),"Item cannot come after unassociated items"),Array.isArray(u)||(u=[u]);for(const m of u){const b={seq:this._items.length,sort:p,before:c,after:d,group:h,node:m};this._items.push(b)}if(!f.manual){const m=this._sort();a(m,"item",h!=="?"?`added into group ${h}`:"","created a dependencies error")}return this.nodes}merge(u){Array.isArray(u)||(u=[u]);for(const c of u)if(c)for(const d of c._items)this._items.push(Object.assign({},d));this._items.sort(l.mergeSort);for(let c=0;c<this._items.length;++c)this._items[c].seq=c;const f=this._sort();return a(f,"merge created a dependencies error"),this.nodes}sort(){const u=this._sort();return a(u,"sort created a dependencies error"),this.nodes}_sort(){const u={},f=Object.create(null),c=Object.create(null);for(const b of this._items){const y=b.seq,v=b.group;c[v]=c[v]||[],c[v].push(y),u[y]=b.before;for(const w of b.after)f[w]=f[w]||[],f[w].push(y)}for(const b in u){const y=[];for(const v in u[b]){const w=u[b][v];c[w]=c[w]||[],y.push(...c[w])}u[b]=y}for(const b in f)if(c[b])for(const y of c[b])u[y].push(...f[b]);const d={};for(const b in u){const y=u[b];for(const v of y)d[v]=d[v]||[],d[v].push(b)}const h={},p=[];for(let b=0;b<this._items.length;++b){let y=b;if(d[b]){y=null;for(let v=0;v<this._items.length;++v){if(h[v]===!0)continue;d[v]||(d[v]=[]);const w=d[v].length;let E=0;for(let A=0;A<w;++A)h[d[v][A]]&&++E;if(E===w){y=v;break}}}y!==null&&(h[y]=!0,p.push(y))}if(p.length!==this._items.length)return!1;const m={};for(const b of this._items)m[b.seq]=b;this._items=[],this.nodes=[];for(const b of p){const y=m[b];this.nodes.push(y.node),this._items.push(y)}return!0}},l.mergeSort=(u,f)=>u.sort===f.sort?0:u.sort<f.sort?-1:1},5380:(i,o,s)=>{const a=s(443),l=s(2178),u={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};o.analyze=function(f,c={}){if(!f)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof f!="string")throw new Error("Invalid input: domain must be a string");if(f.length>256)return l.code("DOMAIN_TOO_LONG");if(u.nonAsciiRx.test(f)){if(c.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");f=f.normalize("NFC")}if(u.domainControlRx.test(f))return l.code("DOMAIN_INVALID_CHARS");f=u.punycode(f),c.allowFullyQualified&&f[f.length-1]==="."&&(f=f.slice(0,-1));const d=c.minDomainSegments||u.minDomainSegments,h=f.split(".");if(h.length<d)return l.code("DOMAIN_SEGMENTS_COUNT");if(c.maxDomainSegments&&h.length>c.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const p=c.tlds;if(p){const m=h[h.length-1].toLowerCase();if(p.deny&&p.deny.has(m)||p.allow&&!p.allow.has(m))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let m=0;m<h.length;++m){const b=h[m];if(!b.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(b.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(m<h.length-1){if(!u.domainSegmentRx.test(b))return l.code("DOMAIN_INVALID_CHARS")}else if(!u.tldSegmentRx.test(b))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},o.isValid=function(f,c){return!o.analyze(f,c)},u.punycode=function(f){f.includes("%")&&(f=f.replace(/%/g,"%25"));try{return new u.URL(`http://${f}`).host}catch{return f}}},1745:(i,o,s)=>{const a=s(9848),l=s(5380),u=s(2178),f={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};o.analyze=function(c,d){return f.email(c,d)},o.isValid=function(c,d){return!f.email(c,d)},f.email=function(c,d={}){if(typeof c!="string")throw new Error("Invalid input: email must be a string");if(!c)return u.code("EMPTY_STRING");const h=!f.nonAsciiRx.test(c);if(!h){if(d.allowUnicode===!1)return u.code("FORBIDDEN_UNICODE");c=c.normalize("NFC")}const p=c.split("@");if(p.length!==2)return p.length>2?u.code("MULTIPLE_AT_CHAR"):u.code("MISSING_AT_CHAR");const[m,b]=p;if(!m)return u.code("EMPTY_LOCAL");if(!d.ignoreLength){if(c.length>254)return u.code("ADDRESS_TOO_LONG");if(f.encoder.encode(m).length>64)return u.code("LOCAL_TOO_LONG")}return f.local(m,h)||l.analyze(b,d)},f.local=function(c,d){const h=c.split(".");for(const p of h){if(!p.length)return u.code("EMPTY_LOCAL_SEGMENT");if(d){if(!f.atextRx.test(p))return u.code("INVALID_LOCAL_CHARS")}else for(const m of p){if(f.atextRx.test(m))continue;const b=f.binary(m);if(!f.atomRx.test(b))return u.code("INVALID_LOCAL_CHARS")}}},f.binary=function(c){return Array.from(f.encoder.encode(c)).map(d=>String.fromCharCode(d)).join("")},f.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,f.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(i,o)=>{o.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},o.code=function(s){return{code:s,error:o.codes[s]}}},9959:(i,o,s)=>{const a=s(375),l=s(5752);o.regex=function(u={}){a(u.cidr===void 0||typeof u.cidr=="string","options.cidr must be a string");const f=u.cidr?u.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(f),"options.cidr must be one of required, optional, forbidden"),a(u.version===void 0||typeof u.version=="string"||Array.isArray(u.version),"options.version must be a string or an array of string");let c=u.version||["ipv4","ipv6","ipvfuture"];Array.isArray(c)||(c=[c]),a(c.length>=1,"options.version must have at least 1 version specified");for(let p=0;p<c.length;++p)a(typeof c[p]=="string","options.version must only contain strings"),c[p]=c[p].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(c[p]),"options.version contains unknown version "+c[p]+" - must be one of ipv4, ipv6, ipvfuture");c=Array.from(new Set(c));const d=`(?:${c.map(p=>{if(f==="forbidden")return l.ip[p];const m=`\\/${p==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return f==="required"?`${l.ip[p]}${m}`:`${l.ip[p]}(?:${m})?`}).join("|")})`,h=new RegExp(`^${d}$`);return{cidr:f,versions:c,regex:h,raw:d}}},5752:(i,o,s)=>{const a=s(375),l=s(6064),u={generate:function(){const f={},c="\\dA-Fa-f",d="["+c+"]",h="\\w-\\.~",p="!\\$&'\\(\\)\\*\\+,;=",m="%"+c,b=h+m+p+":@",y="["+b+"]",v="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";f.ipv4address="(?:"+v+"\\.){3}"+v;const w=d+"{1,4}",E="(?:"+w+":"+w+"|"+f.ipv4address+")",A="(?:"+w+":){6}"+E,T="::(?:"+w+":){5}"+E,D="(?:"+w+")?::(?:"+w+":){4}"+E,k="(?:(?:"+w+":){0,1}"+w+")?::(?:"+w+":){3}"+E,R="(?:(?:"+w+":){0,2}"+w+")?::(?:"+w+":){2}"+E,M="(?:(?:"+w+":){0,3}"+w+")?::"+w+":"+E,B="(?:(?:"+w+":){0,4}"+w+")?::"+E,K="(?:(?:"+w+":){0,5}"+w+")?::"+w,L="(?:(?:"+w+":){0,6}"+w+")?::";f.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",f.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",f.ipv6address="(?:"+A+"|"+T+"|"+D+"|"+k+"|"+R+"|"+M+"|"+B+"|"+K+"|"+L+")",f.ipvFuture="v"+d+"+\\.["+h+p+":]+",f.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",f.schemeRegex=new RegExp(f.scheme);const $="["+h+m+p+":]*",I="["+h+m+p+"]{1,255}",U="(?:\\[(?:"+f.ipv6address+"|"+f.ipvFuture+")\\]|"+f.ipv4address+"|"+I+")",q="(?:"+$+"@)?"+U+"(?::\\d*)?",Y="(?:"+$+"@)?("+U+")(?::\\d*)?",X=y+"*",te=y+"+",le="(?:\\/"+X+")*",ee="\\/(?:"+te+le+")?",z=te+le,he="["+h+m+p+"@]+"+le,de="(?:\\/\\/\\/"+X+le+")";return f.hierPart="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+z+"|"+de+")",f.hierPartCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+z+")",f.relativeRef="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+he+"|)",f.relativeRefCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+he+"|)",f.query="["+b+"\\/\\?]*(?=#|$)",f.queryWithSquareBrackets="["+b+"\\[\\]\\/\\?]*(?=#|$)",f.fragment="["+b+"\\/\\?]*",f}};u.rfc3986=u.generate(),o.ip={v4Cidr:u.rfc3986.ipv4Cidr,v6Cidr:u.rfc3986.ipv6Cidr,ipv4:u.rfc3986.ipv4address,ipv6:u.rfc3986.ipv6address,ipvfuture:u.rfc3986.ipvFuture},u.createRegex=function(f){const c=u.rfc3986,d="(?:\\?"+(f.allowQuerySquareBrackets?c.queryWithSquareBrackets:c.query)+")?(?:#"+c.fragment+")?",h=f.domain?c.relativeRefCapture:c.relativeRef;if(f.relativeOnly)return u.wrap(h+d);let p="";if(f.scheme){a(f.scheme instanceof RegExp||typeof f.scheme=="string"||Array.isArray(f.scheme),"scheme must be a RegExp, String, or Array");const y=[].concat(f.scheme);a(y.length>=1,"scheme must have at least 1 scheme specified");const v=[];for(let w=0;w<y.length;++w){const E=y[w];a(E instanceof RegExp||typeof E=="string","scheme at position "+w+" must be a RegExp or String"),E instanceof RegExp?v.push(E.source.toString()):(a(c.schemeRegex.test(E),"scheme at position "+w+" must be a valid scheme"),v.push(l(E)))}p=v.join("|")}const m="(?:"+(p?"(?:"+p+")":c.scheme)+":"+(f.domain?c.hierPartCapture:c.hierPart)+")",b=f.allowRelative?"(?:"+m+"|"+h+")":m;return u.wrap(b+d,p)},u.wrap=function(f,c){return{raw:f=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${f}`,regex:new RegExp(`^${f}$`),scheme:c}},u.uriRegex=u.createRegex({}),o.regex=function(f={}){return f.scheme||f.allowRelative||f.relativeOnly||f.allowQuerySquareBrackets||f.domain?u.createRegex(f):u.uriRegex}},1447:(i,o)=>{const s={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};o.Parser=class{constructor(a,l={}){if(!l[s.settings]&&l.constants)for(const u in l.constants){const f=l.constants[u];if(f!==null&&!["boolean","number","string"].includes(typeof f))throw new Error(`Formula constant ${u} contains invalid ${typeof f} value type`)}this.settings=l[s.settings]?l:Object.assign({[s.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(a)}_parse(a){let l=[],u="",f=0,c=!1;const d=p=>{if(f)throw new Error("Formula missing closing parenthesis");const m=l.length?l[l.length-1]:null;if(c||u||p){if(m&&m.type==="reference"&&p===")")return m.type="function",m.value=this._subFormula(u,m.value),void(u="");if(p===")"){const b=new o.Parser(u,this.settings);l.push({type:"segment",value:b})}else if(c){if(c==="]")return l.push({type:"reference",value:u}),void(u="");l.push({type:"literal",value:u})}else if(s.operatorCharacters.includes(u))m&&m.type==="operator"&&s.operators.includes(m.value+u)?m.value+=u:l.push({type:"operator",value:u});else if(u.match(s.numberRx))l.push({type:"constant",value:parseFloat(u)});else if(this.settings.constants[u]!==void 0)l.push({type:"constant",value:this.settings.constants[u]});else{if(!u.match(s.tokenRx))throw new Error(`Formula contains invalid token: ${u}`);l.push({type:"reference",value:u})}u=""}};for(const p of a)c?p===c?(d(),c=!1):u+=p:f?p==="("?(u+=p,++f):p===")"?(--f,f?u+=p:d(p)):u+=p:p in s.literals?c=s.literals[p]:p==="("?(d(),++f):s.operatorCharacters.includes(p)?(d(),u=p,d()):p!==" "?u+=p:d();d(),l=l.map((p,m)=>p.type!=="operator"||p.value!=="-"||m&&l[m-1].type!=="operator"?p:{type:"operator",value:"n"});let h=!1;for(const p of l){if(p.type==="operator"){if(s.operatorsPrefix.includes(p.value))continue;if(!h)throw new Error("Formula contains an operator in invalid position");if(!s.operators.includes(p.value))throw new Error(`Formula contains an unknown operator ${p.value}`)}else if(h)throw new Error("Formula missing expected operator");h=!h}if(!h)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(p=>{if(p.type==="operator")return s.operatorsPrefix.includes(p.value)?p:p.value;if(p.type!=="reference")return p.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(p.value))throw new Error(`Formula contains invalid reference ${p.value}`);return this.settings.reference?this.settings.reference(p.value):s.reference(p.value)})}_subFormula(a,l){const u=this.settings.functions[l];if(typeof u!="function")throw new Error(`Formula contains unknown function ${l}`);let f=[];if(a){let c="",d=0,h=!1;const p=()=>{if(!c)throw new Error(`Formula contains function ${l} with invalid arguments ${a}`);f.push(c),c=""};for(let m=0;m<a.length;++m){const b=a[m];h?(c+=b,b===h&&(h=!1)):b in s.literals&&!d?(c+=b,h=s.literals[b]):b!==","||d?(c+=b,b==="("?++d:b===")"&&--d):p()}p()}return f=f.map(c=>new o.Parser(c,this.settings)),function(c){const d=[];for(const h of f)d.push(h.evaluate(c));return u.call(c,...d)}}evaluate(a){const l=this._parts.slice();for(let u=l.length-2;u>=0;--u){const f=l[u];if(f&&f.type==="operator"){const c=l[u+1];l.splice(u+1,1);const d=s.evaluate(c,a);l[u]=s.single(f.value,d)}}return s.operatorsOrder.forEach(u=>{for(let f=1;f<l.length-1;)if(u.includes(l[f])){const c=l[f],d=s.evaluate(l[f-1],a),h=s.evaluate(l[f+1],a);l.splice(f,2);const p=s.calculate(c,d,h);l[f-1]=p===0?0:p}else f+=2}),s.evaluate(l[0],a)}},o.Parser.prototype[s.symbol]=!0,s.reference=function(a){return function(l){return l&&l[a]!==void 0?l[a]:null}},s.evaluate=function(a,l){return a===null?null:typeof a=="function"?a(l):a[s.symbol]?a.evaluate(l):a},s.single=function(a,l){if(a==="!")return!l;const u=-l;return u===0?0:u},s.calculate=function(a,l,u){if(a==="??")return s.exists(l)?l:u;if(typeof l=="string"||typeof u=="string"){if(a==="+")return(l=s.exists(l)?l:"")+(s.exists(u)?u:"")}else switch(a){case"^":return Math.pow(l,u);case"*":return l*u;case"/":return l/u;case"%":return l%u;case"+":return l+u;case"-":return l-u}switch(a){case"<":return l<u;case"<=":return l<=u;case">":return l>u;case">=":return l>=u;case"==":return l===u;case"!=":return l!==u;case"&&":return l&&u;case"||":return l||u}return null},s.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:i=>{i.exports=JSON.parse('{"version":"17.13.3"}')}},r={},function i(o){var s=r[o];if(s!==void 0)return s.exports;var a=r[o]={exports:{}};return n[o](a,a.exports,i),a.exports}(5107);var n,r})}(TM)),TM.exports}var s7t=o7t();const Vr=oa(s7t),QPe={id:Vr.string().required()},HAe={...QPe,as:Vr.string().valid("img","video").required(),src:Vr.string().uri().required(),position:Vr.string().valid("center","left","right"),"data-parallax":Vr.boolean().required()},eNe=Vr.object({type:Vr.string().required(),url:Vr.string().when("type",{is:"STAC",then:Vr.string().required(),otherwise:Vr.string().optional()}),properties:Vr.object({id:Vr.string().required()}).unknown().required(),source:Vr.object({type:Vr.string().required()}).unknown().when("type",{is:"STAC",then:Vr.optional(),otherwise:Vr.required()})}).pattern(Vr.string(),Vr.any()),a7t=Vr.object({type:Vr.string().valid("group","Group"),properties:Vr.object({id:Vr.string().required()}).unknown().required(),layers:Vr.array().items(eNe)}),oz={layers:Vr.array().items(Vr.object().keys({type:Vr.string().required()}).unknown().custom((e,t)=>{const{error:n}=e.type==="Group"?a7t.validate(e):eNe.validate(e);return n?t.message(n.message):e},"Custom validator for map schema.")).optional(),center:Vr.array().items(Vr.number()).min(2).max(2).optional(),zoom:Vr.number().optional()},tNe={config:Vr.object({...oz}).unknown().optional()},nNe={"eox-map":Vr.object({...QPe,...oz,...tNe}).unknown()},l7t={hero:{img:Vr.object({...HAe}).unknown(),video:Vr.object({...HAe}).unknown()},tour:{"eox-map":nNe["eox-map"],"section-step":Vr.object({...oz,...tNe}).unknown()}};function u7t(e,t){var i,o;let n=[];for(const s of Object.keys(e)){const a=e[s];if(a.as){const l=a.mode?(i=l7t[a.mode])==null?void 0:i[a.as]:nNe[a.as];l&&((o=l.validate(a,{abortEarly:!1}).error)==null||o.details.forEach(f=>{n.push({ref:`#${s}`,message:f.message}),console.error(`#${s}`,f.message)}))}}const r=(t.shadowRoot||t).querySelector("eox-storytelling-editor");setTimeout(()=>r==null?void 0:r.updateErrors(n),300)}const c7t=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}';/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */var DM,GAe;function VAe(){if(GAe)return DM;GAe=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:o,seal:s,create:a}=Object,{apply:l,construct:u}=typeof Reflect<"u"&&Reflect;o||(o=function(se){return se}),s||(s=function(se){return se}),l||(l=function(se,ve,F){return se.apply(ve,F)}),u||(u=function(se,ve){return new se(...ve)});const f=T(Array.prototype.forEach),c=T(Array.prototype.pop),d=T(Array.prototype.push),h=T(String.prototype.toLowerCase),p=T(String.prototype.toString),m=T(String.prototype.match),b=T(String.prototype.replace),y=T(String.prototype.indexOf),v=T(String.prototype.trim),w=T(Object.prototype.hasOwnProperty),E=T(RegExp.prototype.test),A=D(TypeError);function T(ie){return function(se){for(var ve=arguments.length,F=new Array(ve>1?ve-1:0),H=1;H<ve;H++)F[H-1]=arguments[H];return l(ie,se,F)}}function D(ie){return function(){for(var se=arguments.length,ve=new Array(se),F=0;F<se;F++)ve[F]=arguments[F];return u(ie,ve)}}function k(ie,se){let ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h;t&&t(ie,null);let F=se.length;for(;F--;){let H=se[F];if(typeof H=="string"){const J=ve(H);J!==H&&(n(se)||(se[F]=J),H=J)}ie[H]=!0}return ie}function R(ie){for(let se=0;se<ie.length;se++)w(ie,se)||(ie[se]=null);return ie}function M(ie){const se=a(null);for(const[ve,F]of e(ie))w(ie,ve)&&(Array.isArray(F)?se[ve]=R(F):F&&typeof F=="object"&&F.constructor===Object?se[ve]=M(F):se[ve]=F);return se}function B(ie,se){for(;ie!==null;){const F=i(ie,se);if(F){if(F.get)return T(F.get);if(typeof F.value=="function")return T(F.value)}ie=r(ie)}function ve(){return null}return ve}const K=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),q=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Y=o(["#text"]),X=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),te=o(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),le=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ee=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),he=s(/<%[\w\W]*|[\w\W]*%>/gm),de=s(/\$\{[\w\W]*}/gm),ze=s(/^data-[\-\w.\u00B7-\uFFFF]+$/),He=s(/^aria-[\-\w]+$/),je=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),we=s(/^(?:\w+script|data):/i),Ie=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qe=s(/^html$/i),Pe=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var At=Object.freeze({__proto__:null,ARIA_ATTR:He,ATTR_WHITESPACE:Ie,CUSTOM_ELEMENT:Pe,DATA_ATTR:ze,DOCTYPE_NAME:qe,ERB_EXPR:he,IS_ALLOWED_URI:je,IS_SCRIPT_OR_DATA:we,MUSTACHE_EXPR:z,TMPLIT_EXPR:de});const ht={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},nn=function(){return typeof window>"u"?null:window},Vt=function(se,ve){if(typeof se!="object"||typeof se.createPolicy!="function")return null;let F=null;const H="data-tt-policy-suffix";ve&&ve.hasAttribute(H)&&(F=ve.getAttribute(H));const J="dompurify"+(F?"#"+F:"");try{return se.createPolicy(J,{createHTML(re){return re},createScriptURL(re){return re}})}catch{return console.warn("TrustedTypes policy "+J+" could not be created."),null}},On=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ze(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nn();const se=Ht=>Ze(Ht);if(se.version="3.2.3",se.removed=[],!ie||!ie.document||ie.document.nodeType!==ht.document)return se.isSupported=!1,se;let{document:ve}=ie;const F=ve,H=F.currentScript,{DocumentFragment:J,HTMLTemplateElement:re,Node:ye,Element:xe,NodeFilter:Re,NamedNodeMap:P=ie.NamedNodeMap||ie.MozNamedAttrMap,HTMLFormElement:Q,DOMParser:oe,trustedTypes:ae}=ie,ke=xe.prototype,Ce=B(ke,"cloneNode"),Ee=B(ke,"remove"),De=B(ke,"nextSibling"),Me=B(ke,"childNodes"),We=B(ke,"parentNode");if(typeof re=="function"){const Ht=ve.createElement("template");Ht.content&&Ht.content.ownerDocument&&(ve=Ht.content.ownerDocument)}let tt,dt="";const{implementation:Kt,createNodeIterator:xt,createDocumentFragment:Qt,getElementsByTagName:rn}=ve,{importNode:on}=F;let sn=On();se.isSupported=typeof e=="function"&&typeof We=="function"&&Kt&&Kt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Tn,ERB_EXPR:Er,TMPLIT_EXPR:Ki,DATA_ATTR:ho,ARIA_ATTR:Hi,IS_SCRIPT_OR_DATA:Ns,ATTR_WHITESPACE:qn,CUSTOM_ELEMENT:Or}=At;let{IS_ALLOWED_URI:Lr}=At,mn=null;const Kr=k({},[...K,...L,...$,...U,...Y]);let or=null;const Ni=k({},[...X,...te,...le,...ee]);let tr=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$r=null,ns=null,me=!0,Le=!0,it=!1,Ke=!0,Et=!1,an=!0,en=!1,wt=!1,et=!1,hn=!1,An=!1,zt=!1,jt=!0,Sr=!1;const ci="user-content-";let Zt=!0,Xe=!1,pt={},Xn=null;const ni=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ar=null;const Rr=k({},["audio","video","img","source","image","track"]);let nr=null;const qt=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bi="http://www.w3.org/1998/Math/MathML",Ji="http://www.w3.org/2000/svg",vi="http://www.w3.org/1999/xhtml";let Uo=vi,xs=!1,rs=null;const Bs=k({},[bi,Ji,vi],p);let xo=k({},["mi","mo","mn","ms","mtext"]),Mo=k({},["annotation-xml"]);const zs=k({},["title","style","font","a","script"]);let po=null;const sl=["application/xhtml+xml","text/html"],al="text/html";let Cr=null,Qi=null;const is=ve.createElement("form"),Oo=function(Z){return Z instanceof RegExp||Z instanceof Function},qo=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Qi&&Qi===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=M(Z),po=sl.indexOf(Z.PARSER_MEDIA_TYPE)===-1?al:Z.PARSER_MEDIA_TYPE,Cr=po==="application/xhtml+xml"?p:h,mn=w(Z,"ALLOWED_TAGS")?k({},Z.ALLOWED_TAGS,Cr):Kr,or=w(Z,"ALLOWED_ATTR")?k({},Z.ALLOWED_ATTR,Cr):Ni,rs=w(Z,"ALLOWED_NAMESPACES")?k({},Z.ALLOWED_NAMESPACES,p):Bs,nr=w(Z,"ADD_URI_SAFE_ATTR")?k(M(qt),Z.ADD_URI_SAFE_ATTR,Cr):qt,Ar=w(Z,"ADD_DATA_URI_TAGS")?k(M(Rr),Z.ADD_DATA_URI_TAGS,Cr):Rr,Xn=w(Z,"FORBID_CONTENTS")?k({},Z.FORBID_CONTENTS,Cr):ni,$r=w(Z,"FORBID_TAGS")?k({},Z.FORBID_TAGS,Cr):{},ns=w(Z,"FORBID_ATTR")?k({},Z.FORBID_ATTR,Cr):{},pt=w(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,me=Z.ALLOW_ARIA_ATTR!==!1,Le=Z.ALLOW_DATA_ATTR!==!1,it=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,Ke=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Et=Z.SAFE_FOR_TEMPLATES||!1,an=Z.SAFE_FOR_XML!==!1,en=Z.WHOLE_DOCUMENT||!1,hn=Z.RETURN_DOM||!1,An=Z.RETURN_DOM_FRAGMENT||!1,zt=Z.RETURN_TRUSTED_TYPE||!1,et=Z.FORCE_BODY||!1,jt=Z.SANITIZE_DOM!==!1,Sr=Z.SANITIZE_NAMED_PROPS||!1,Zt=Z.KEEP_CONTENT!==!1,Xe=Z.IN_PLACE||!1,Lr=Z.ALLOWED_URI_REGEXP||je,Uo=Z.NAMESPACE||vi,xo=Z.MATHML_TEXT_INTEGRATION_POINTS||xo,Mo=Z.HTML_INTEGRATION_POINTS||Mo,tr=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Oo(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tr.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Oo(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tr.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tr.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Et&&(Le=!1),An&&(hn=!0),pt&&(mn=k({},Y),or=[],pt.html===!0&&(k(mn,K),k(or,X)),pt.svg===!0&&(k(mn,L),k(or,te),k(or,ee)),pt.svgFilters===!0&&(k(mn,$),k(or,te),k(or,ee)),pt.mathMl===!0&&(k(mn,U),k(or,le),k(or,ee))),Z.ADD_TAGS&&(mn===Kr&&(mn=M(mn)),k(mn,Z.ADD_TAGS,Cr)),Z.ADD_ATTR&&(or===Ni&&(or=M(or)),k(or,Z.ADD_ATTR,Cr)),Z.ADD_URI_SAFE_ATTR&&k(nr,Z.ADD_URI_SAFE_ATTR,Cr),Z.FORBID_CONTENTS&&(Xn===ni&&(Xn=M(Xn)),k(Xn,Z.FORBID_CONTENTS,Cr)),Zt&&(mn["#text"]=!0),en&&k(mn,["html","head","body"]),mn.table&&(k(mn,["tbody"]),delete $r.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');tt=Z.TRUSTED_TYPES_POLICY,dt=tt.createHTML("")}else tt===void 0&&(tt=Vt(ae,H)),tt!==null&&typeof dt=="string"&&(dt=tt.createHTML(""));o&&o(Z),Qi=Z}},fa=k({},[...L,...$,...I]),Ho=k({},[...U,...q]),ll=function(Z){let ge=We(Z);(!ge||!ge.tagName)&&(ge={namespaceURI:Uo,tagName:"template"});const Be=h(Z.tagName),yt=h(ge.tagName);return rs[Z.namespaceURI]?Z.namespaceURI===Ji?ge.namespaceURI===vi?Be==="svg":ge.namespaceURI===bi?Be==="svg"&&(yt==="annotation-xml"||xo[yt]):!!fa[Be]:Z.namespaceURI===bi?ge.namespaceURI===vi?Be==="math":ge.namespaceURI===Ji?Be==="math"&&Mo[yt]:!!Ho[Be]:Z.namespaceURI===vi?ge.namespaceURI===Ji&&!Mo[yt]||ge.namespaceURI===bi&&!xo[yt]?!1:!Ho[Be]&&(zs[Be]||!fa[Be]):!!(po==="application/xhtml+xml"&&rs[Z.namespaceURI]):!1},Gi=function(Z){d(se.removed,{element:Z});try{We(Z).removeChild(Z)}catch{Ee(Z)}},Vi=function(Z,ge){try{d(se.removed,{attribute:ge.getAttributeNode(Z),from:ge})}catch{d(se.removed,{attribute:null,from:ge})}if(ge.removeAttribute(Z),Z==="is")if(hn||An)try{Gi(ge)}catch{}else try{ge.setAttribute(Z,"")}catch{}},os=function(Z){let ge=null,Be=null;if(et)Z="<remove></remove>"+Z;else{const It=m(Z,/^[\r\n\t ]+/);Be=It&&It[0]}po==="application/xhtml+xml"&&Uo===vi&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const yt=tt?tt.createHTML(Z):Z;if(Uo===vi)try{ge=new oe().parseFromString(yt,po)}catch{}if(!ge||!ge.documentElement){ge=Kt.createDocument(Uo,"template",null);try{ge.documentElement.innerHTML=xs?dt:yt}catch{}}const pn=ge.body||ge.documentElement;return Z&&Be&&pn.insertBefore(ve.createTextNode(Be),pn.childNodes[0]||null),Uo===vi?rn.call(ge,en?"html":"body")[0]:en?ge.documentElement:pn},go=function(Z){return xt.call(Z.ownerDocument||Z,Z,Re.SHOW_ELEMENT|Re.SHOW_COMMENT|Re.SHOW_TEXT|Re.SHOW_PROCESSING_INSTRUCTION|Re.SHOW_CDATA_SECTION,null)},js=function(Z){return Z instanceof Q&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof P)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},Go=function(Z){return typeof ye=="function"&&Z instanceof ye};function fi(Ht,Z,ge){f(Ht,Be=>{Be.call(se,Z,ge,Qi)})}const Oa=function(Z){let ge=null;if(fi(sn.beforeSanitizeElements,Z,null),js(Z))return Gi(Z),!0;const Be=Cr(Z.nodeName);if(fi(sn.uponSanitizeElement,Z,{tagName:Be,allowedTags:mn}),Z.hasChildNodes()&&!Go(Z.firstElementChild)&&E(/<[/\w]/g,Z.innerHTML)&&E(/<[/\w]/g,Z.textContent)||Z.nodeType===ht.progressingInstruction||an&&Z.nodeType===ht.comment&&E(/<[/\w]/g,Z.data))return Gi(Z),!0;if(!mn[Be]||$r[Be]){if(!$r[Be]&&Wi(Be)&&(tr.tagNameCheck instanceof RegExp&&E(tr.tagNameCheck,Be)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Be)))return!1;if(Zt&&!Xn[Be]){const yt=We(Z)||Z.parentNode,pn=Me(Z)||Z.childNodes;if(pn&&yt){const It=pn.length;for(let In=It-1;In>=0;--In){const dr=Ce(pn[In],!0);dr.__removalCount=(Z.__removalCount||0)+1,yt.insertBefore(dr,De(Z))}}}return Gi(Z),!0}return Z instanceof xe&&!ll(Z)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&E(/<\/no(script|embed|frames)/i,Z.innerHTML)?(Gi(Z),!0):(Et&&Z.nodeType===ht.text&&(ge=Z.textContent,f([Tn,Er,Ki],yt=>{ge=b(ge,yt," ")}),Z.textContent!==ge&&(d(se.removed,{element:Z.cloneNode()}),Z.textContent=ge)),fi(sn.afterSanitizeElements,Z,null),!1)},ss=function(Z,ge,Be){if(jt&&(ge==="id"||ge==="name")&&(Be in ve||Be in is))return!1;if(!(Le&&!ns[ge]&&E(ho,ge))){if(!(me&&E(Hi,ge))){if(!or[ge]||ns[ge]){if(!(Wi(Z)&&(tr.tagNameCheck instanceof RegExp&&E(tr.tagNameCheck,Z)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Z))&&(tr.attributeNameCheck instanceof RegExp&&E(tr.attributeNameCheck,ge)||tr.attributeNameCheck instanceof Function&&tr.attributeNameCheck(ge))||ge==="is"&&tr.allowCustomizedBuiltInElements&&(tr.tagNameCheck instanceof RegExp&&E(tr.tagNameCheck,Be)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Be))))return!1}else if(!nr[ge]){if(!E(Lr,b(Be,qn,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&Z!=="script"&&y(Be,"data:")===0&&Ar[Z])){if(!(it&&!E(Ns,b(Be,qn,"")))){if(Be)return!1}}}}}}return!0},Wi=function(Z){return Z!=="annotation-xml"&&m(Z,Or)},as=function(Z){fi(sn.beforeSanitizeAttributes,Z,null);const{attributes:ge}=Z;if(!ge||js(Z))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:or,forceKeepAttr:void 0};let yt=ge.length;for(;yt--;){const pn=ge[yt],{name:It,namespaceURI:In,value:dr}=pn,kr=Cr(It);let Ln=It==="value"?dr:v(dr);if(Be.attrName=kr,Be.attrValue=Ln,Be.keepAttr=!0,Be.forceKeepAttr=void 0,fi(sn.uponSanitizeAttribute,Z,Be),Ln=Be.attrValue,Sr&&(kr==="id"||kr==="name")&&(Vi(It,Z),Ln=ci+Ln),an&&E(/((--!?|])>)|<\/(style|title)/i,Ln)){Vi(It,Z);continue}if(Be.forceKeepAttr||(Vi(It,Z),!Be.keepAttr))continue;if(!Ke&&E(/\/>/i,Ln)){Vi(It,Z);continue}Et&&f([Tn,Er,Ki],Jr=>{Ln=b(Ln,Jr," ")});const Ai=Cr(Z.nodeName);if(ss(Ai,kr,Ln)){if(tt&&typeof ae=="object"&&typeof ae.getAttributeType=="function"&&!In)switch(ae.getAttributeType(Ai,kr)){case"TrustedHTML":{Ln=tt.createHTML(Ln);break}case"TrustedScriptURL":{Ln=tt.createScriptURL(Ln);break}}try{In?Z.setAttributeNS(In,It,Ln):Z.setAttribute(It,Ln),js(Z)?Gi(Z):c(se.removed)}catch{}}}fi(sn.afterSanitizeAttributes,Z,null)},ul=function Ht(Z){let ge=null;const Be=go(Z);for(fi(sn.beforeSanitizeShadowDOM,Z,null);ge=Be.nextNode();)fi(sn.uponSanitizeShadowNode,ge,null),Oa(ge),as(ge),ge.content instanceof J&&Ht(ge.content);fi(sn.afterSanitizeShadowDOM,Z,null)};return se.sanitize=function(Ht){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,Be=null,yt=null,pn=null;if(xs=!Ht,xs&&(Ht="<!-->"),typeof Ht!="string"&&!Go(Ht))if(typeof Ht.toString=="function"){if(Ht=Ht.toString(),typeof Ht!="string")throw A("dirty is not a string, aborting")}else throw A("toString is not a function");if(!se.isSupported)return Ht;if(wt||qo(Z),se.removed=[],typeof Ht=="string"&&(Xe=!1),Xe){if(Ht.nodeName){const dr=Cr(Ht.nodeName);if(!mn[dr]||$r[dr])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(Ht instanceof ye)ge=os("<!---->"),Be=ge.ownerDocument.importNode(Ht,!0),Be.nodeType===ht.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?ge=Be:ge.appendChild(Be);else{if(!hn&&!Et&&!en&&Ht.indexOf("<")===-1)return tt&&zt?tt.createHTML(Ht):Ht;if(ge=os(Ht),!ge)return hn?null:zt?dt:""}ge&&et&&Gi(ge.firstChild);const It=go(Xe?Ht:ge);for(;yt=It.nextNode();)Oa(yt),as(yt),yt.content instanceof J&&ul(yt.content);if(Xe)return Ht;if(hn){if(An)for(pn=Qt.call(ge.ownerDocument);ge.firstChild;)pn.appendChild(ge.firstChild);else pn=ge;return(or.shadowroot||or.shadowrootmode)&&(pn=on.call(F,pn,!0)),pn}let In=en?ge.outerHTML:ge.innerHTML;return en&&mn["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&E(qe,ge.ownerDocument.doctype.name)&&(In="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+In),Et&&f([Tn,Er,Ki],dr=>{In=b(In,dr," ")}),tt&&zt?tt.createHTML(In):In},se.setConfig=function(){let Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qo(Ht),wt=!0},se.clearConfig=function(){Qi=null,wt=!1},se.isValidAttribute=function(Ht,Z,ge){Qi||qo({});const Be=Cr(Ht),yt=Cr(Z);return ss(Be,yt,ge)},se.addHook=function(Ht,Z){typeof Z=="function"&&d(sn[Ht],Z)},se.removeHook=function(Ht){return c(sn[Ht])},se.removeHooks=function(Ht){sn[Ht]=[]},se.removeAllHooks=function(){sn=On()},se}var pe=Ze();return DM=pe,DM}var LM,WAe;function f7t(){return WAe||(WAe=1,LM=window.DOMPurify||(window.DOMPurify=VAe().default||VAe())),LM}var d7t=f7t();const h7t=oa(d7t);function rNe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function p7t(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const g7t=[["","ss"],["","Ss"],["","ae"],["","Ae"],["","oe"],["","Oe"],["","ue"],["","Ue"],["","A"],["","A"],["","A"],["","A"],["","Ae"],["","A"],["","AE"],["","C"],["","E"],["","E"],["","E"],["","E"],["","I"],["","I"],["","I"],["","I"],["","D"],["","N"],["","O"],["","O"],["","O"],["","O"],["","Oe"],["","O"],["","O"],["","U"],["","U"],["","U"],["","Ue"],["","U"],["","Y"],["","TH"],["","ss"],["","a"],["","a"],["","a"],["","a"],["","ae"],["","a"],["","ae"],["","c"],["","e"],["","e"],["","e"],["","e"],["","i"],["","i"],["","i"],["","i"],["","d"],["","n"],["","o"],["","o"],["","o"],["","o"],["","oe"],["","o"],["","o"],["","u"],["","u"],["","u"],["","ue"],["","u"],["","y"],["","th"],["","y"],["","SS"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","a"],["","A"],["","D"],["","d"],["","i"],["","I"],["","u"],["","U"],["","o"],["","O"],["","u"],["","U"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","p"],["","z"],["","c"],["","d"],["","d"],["","r"],["","r"],["","z"],["","g"],["","x"],["","g"],["","n"],["","e"],["","e"],["","ai"],["","t"],["","d"],["","r"],["","n"],["","h"],["","h"],["","e"],["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"],["","a"],["","A"],["","s"],["","S"],["","t"],["","T"],["","t"],["","T"],["","s"],["","S"],["","c"],["","C"],["","g"],["","G"],["","i"],["","I"],["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"],["","a"],["","b"],["","g"],["","d"],["","e"],["","v"],["","z"],["","t"],["","i"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","zh"],["","r"],["","s"],["","t"],["","u"],["","ph"],["","q"],["","gh"],["","k"],["","sh"],["","ch"],["","ts"],["","dz"],["","ts"],["","tch"],["","kh"],["","j"],["","h"],["","c"],["","d"],["","e"],["","n"],["","r"],["","s"],["","t"],["","u"],["","z"],["","C"],["","D"],["","E"],["","N"],["","R"],["","S"],["","T"],["","U"],["","Z"],["","h"],["","sh"],["","n"],["","r"],["","b"],["","lh"],["","k"],["","a"],["","v"],["","m"],["","f"],["","dh"],["","th"],["","l"],["","g"],["","gn"],["","s"],["","d"],["","z"],["","t"],["","y"],["","p"],["","j"],["","ch"],["","tt"],["","hh"],["","kh"],["","th"],["","z"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","a"],["","gh"],["","q"],["","w"],["","a"],["","aa"],["","i"],["","ee"],["","u"],["","oo"],["","e"],["","ey"],["","o"],["","oa"],["",""],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"],["","a"],["","e"],["","g"],["","i"],["","k"],["","l"],["","n"],["","u"],["","A"],["","E"],["","G"],["","I"],["","K"],["","L"],["","N"],["","U"],["","c"],["","s"],["","z"],["","C"],["","S"],["","Z"],["","a"],["","c"],["","e"],["","e"],["","i"],["","s"],["","u"],["","u"],["","z"],["","A"],["","C"],["","E"],["","E"],["","I"],["","S"],["","U"],["","U"],["","Kj"],["","kj"],["","Lj"],["","lj"],["","Nj"],["","nj"],["","Ts"],["","ts"],["","a"],["","c"],["","e"],["","l"],["","n"],["","s"],["","z"],["","z"],["","A"],["","C"],["","E"],["","L"],["","N"],["","S"],["","Z"],["","Z"],["","Ye"],["","I"],["","Yi"],["","G"],["","ye"],["","i"],["","yi"],["","g"],["","IJ"],["","ij"],["","c"],["","Y"],["","b"],["","t"],["","Bo"],["","B"],["","CE"],["","C"],["","Cr"],["","F"],["","m"],["","N"],["","Pt"],["","Rs"],["","W"],["","s"],["","E"],["","K"],["","T"],["","Dp"],["","S"],["","P"],["","G"],["","A"],["","S"],["","C"],["","tt"],["","S"],["","T"],["","R"],["","L"],["","P"],["","B"],["","$"],["","c"],["","Y"],["","W"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","C"],["","D"],["","g"],["","J"],["","K"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","f"],["","h"],["","i"],["","j"],["","h"],["","l"],["","m"],["","n"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","l"],["","j"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","x"],["","PS"],["","O"],["","D"],["","a"],["","b"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","d"],["","E"],["","TH"],["","K"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","av"],["","g"],["","d"],["","e"],["","z"],["","i"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","F"],["","f"],["","(a)"],["","(b)"],["","(c)"],["","(d)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","(A)"],["","(B)"],["","(C)"],["","(D)"],["","(E)"],["","(F)"],["","(G)"],["","(H)"],["","(I)"],["","(J)"],["","(K)"],["","(L)"],["","(N)"],["","(O)"],["","(P)"],["","(Q)"],["","(R)"],["","(S)"],["","(T)"],["","(U)"],["","(V)"],["","(W)"],["","(X)"],["","(Y)"],["","(Z)"],["","(a)"],["","(b)"],["","(b)"],["","(c)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","C"],["","c"],["","G"],["","g"],["","H"],["","h"],["","Z"],["","z"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1."],["","2."],["","3."],["","4."],["","5."],["","6."],["","7."],["","8."],["","9."],["","10."],["","11."],["","12."],["","13."],["","14."],["","15."],["","16."],["","17."],["","18."],["","19."],["","20."],["","0"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","0"],["","&"],["","&"],["","&"],["","&"],["","&"],["","&"],["",'"'],["",'"'],["",'"'],["","?!"],["","?!"],["","?!"],["","?!"],["","/"],["","\\"],["","AR"],["","V"],["","V"],["","VR"],["","VF"],["","2"],["","5"],["","f"],["","W"],["","U"],["","V"],["","T"],["","V"],["","MB"],["","VB"],["","3B"],["","3B"],["","100"],["","BACK"],["","END"],["","ON!"],["","SOON"],["","TOP"],["","18"],["","abc"],["","ABCD"],["","abcd"],["","1234"],["","T&@%"],["#","#"],["*","*"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["","10"],["","A"],["","B"],["","AB"],["","CL"],["","O"],["","P"],["","SOS"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"]],m7t=(e,t)=>{for(const[n,r]of t)e=e.replace(new RegExp(p7t(n),"g"),r);return e};function y7t(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={customReplacements:[],...t};const n=new Map([...g7t,...t.customReplacements]);return e=e.normalize(),e=m7t(e,n),e=e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),e}const b7t=[["&"," and "],[""," unicorn "],[""," love "]],v7t=e=>e.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),x7t=(e,t)=>{const n=rNe(t);return e.replace(new RegExp(`${n}{2,}`,"g"),t).replace(new RegExp(`^${n}|${n}$`,"g"),"")},w7t=e=>{let t="a-z\\d";if(t+=e.lowercase?"":"A-Z",e.preserveCharacters.length>0)for(const n of e.preserveCharacters){if(n===e.separator)throw new Error(`The separator character \`${e.separator}\` cannot be included in preserved characters: ${e.preserveCharacters}`);t+=rNe(n)}return new RegExp(`[^${t}]+`,"g")};function _7t(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...t};const n=t.preserveLeadingUnderscore&&e.startsWith("_"),r=t.preserveTrailingDash&&e.endsWith("-"),i=new Map([...b7t,...t.customReplacements]);e=y7t(e,{customReplacements:i}),t.decamelize&&(e=v7t(e));const o=w7t(t);return t.lowercase&&(e=e.toLowerCase()),e=e.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),e=e.replace(o,t.separator),e=e.replace(/\\/g,""),t.separator&&(e=x7t(e,t.separator)),n&&(e=`_${e}`),r&&(e=`${e}-`),e}function E7t(e){e.core.ruler.push("curly_attributes",S7t)}function S7t(e){e.md.nav=[],e.md.attrs={keys:[],sections:{}},e.md.sections={};const t=e.tokens,n=[];let r;const i={len:0,contents:[],types:{}},o=[];let s=[],a=!1,l=0,u=!1,f=0;for(let c=0;c<t.length;c++){const d=t[c];if(d.tag==="p"){const{shouldContinue:p}=A7t(t,t[c+1]);if(p){c=c+2;continue}}if((iNe(d.type)||VPe[d.type])&&aNe(i,d),d.tag==="h1"||d.tag==="h2"){const p=k7t(c,t,s,a,l,u,f,e,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,f=p.sectionStepsIndex}if(d.tag==="h3"){const p=T7t(c,t,s,a,l,u,f,e,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,f=p.sectionStepsIndex}if(d.type==="html_block"){const p=d.content.match(GPe);if(!p){d.level=d.level+1,s.push(d);continue}r=sNe(i,p[1],p[2]),r&&sb(r,p[3])&&n.unshift(c)}d.type==="inline"&&(s=C7t(d,i,o,s,l,f,u)),d.level=d.level+1,s.push(d);const h=Au(i.last.attrs,"as");i.last.markup==="#"&&o9t.includes(h)&&(s=D7t(s,e,i),c++)}a&&(oNe(s,l),V8(s,l,e)),u&&V8(s,f,e),R7t(s,e.md),n.forEach(c=>t.splice(c,1)),e.tokens=s,e.md.nav=o||[]}function Hd(e,t,n,r,i,o=null){const s=new e.Token(i,t,n);return s.attrs=o,s.nesting=r,s}function iNe(e){return e.match(/_(open|start)$/)||e==="fence"||e==="code_block"}function A7t(e,t){const n=/\r\n|\r|\n/,r=/mode\s*=\s*(['"])fallback\1/g;let i=!1;if(r.test((t==null?void 0:t.content)||""))if(n.test(t.content)){const o=t.content.split(n);o.shift(),t.content=o.join(/\n/),t.children[0].type==="text"&&t.children.shift(),t.children.shift()}else i=!0;return{shouldContinue:i}}function C7t(e,t,n,r,i,o,s){let a;const l=[];if(e.children.forEach((u,f)=>{(iNe(u.type)||VPe[u.type]||u.type==="code_inline")&&aNe(t,u);const c=u.content.match(GPe);if(c){const d=sNe(t,c[1],c[2]);d&&sb(d,c[3])&&(l.unshift(f),a&&L7t(a,"content"))}u.type==="text"&&(a=u)}),t.last.tag==="h3"&&s&&o!==-1){const u=r[o];u.section=r[i].id,sb(u,t.last.attrStr)}if(t.last.tag==="h1"||t.last.tag==="h2"){const u=a&&a.content,f=Au(t.last.attrs,"id"),c=Au(t.last.attrs,"as"),d=Au(t.last.attrs,"mode")||"container",h=Au(t.last.attrs,"position")||"left",p=_7t(u||""),m=f||p,b=`section-${m}`,v=Au(t.last.attrs,"nav")!=="false";t.last.tag==="h2"&&u&&n.push({title:u,id:b,state:v});const w=r[i],E=r[r.length-1],A=`.${d} .${h}`;w.attrs.push(["id",b]),w.id=b,c&&(E.tag=c,E.type="html_open",E.as=c,E.section=b,e.type="html_inline",e.content="",e.children=null,sb(E,`${a?`title='${a.content}'`:""}${t.last.attrStr} #${m}`),w.mode=d,w.position=h,sb(w,`#${b} .${w.attrs[0][1]} .section-custom`)),sb(w,A)}return e.children&&l.forEach(u=>e.children.splice(u,1)),r}function k7t(e,t,n,r,i,o,s,a,l){const u=t[e];if(u.type==="heading_close"&&(u.tag=n[n.length-2].tag,u.type=n[n.length-2].type.replace("_open","_close")),u.type==="heading_open"){if(r){o&&(V8(n,s,a),o=!1,s=-1);const f=n[i].tag;oNe(n,i),n.push(Hd(a,f,-1,-1,"html_close")),r=!1,i=-1}r||(n.push(Hd(a,"div",0,1,"html_open",[["class","section-wrap"]])),r=!0,i=n.length-1,l.last.as=!!t[e+1].content.includes("as="))}return{sectionStart:r,sectionStartIndex:i,sectionSteps:o,sectionStepsIndex:s,stack:l,finalTokens:n}}function T7t(e,t,n,r,i,o,s,a,l){return t[e].type==="heading_open"&&r&&n[i].mode==="tour"&&(o&&(n.push(Hd(a,"section-step",-1,-1,"html_close")),o=!1,s=-1),o||(n.push(Hd(a,"section-step",0,1,"html_open")),o=!0,s=n.length-1,l.last.as=!!t[e+1].content.includes("as="))),{sectionStart:r,sectionStartIndex:i,sectionSteps:o,sectionStepsIndex:s,stack:l,finalTokens:n}}function D7t(e,t,n){return e.push(Hd(t,n.last.tag,1,-1,"html_close",null)),e.push(Hd(t,"h1",1,1,"html_open",null)),e.push(Hd(t,"h1",2,0,"html_inline",null)),e[e.length-1].content=Au(n.last.attrs,"title"),e.push(Hd(t,"h1",1,-1,"html_close",null)),e}function oNe(e,t){const n=e[t+1],r=Au(n.attrs,"as"),i=Au(n.attrs,"mode");r&&!i&&(e.splice(t+2,1),e.slice(t+3).forEach(o=>{o.level=1}),e.push(e[t+2]),e.splice(t+2,1))}function V8(e,t,n){const r=e[t].tag;e.push(Hd(n,r,-1,-1,"html_close"))}function Au(e,t){var n;return((n=(e||[]).find(r=>r[0]===t))==null?void 0:n[1])||null}function sNe(e,t,n){if(!t)return e.last;n==="^"?n=1:typeof n=="string"?n=+n.slice(1):n=0;const i=(r9t[t.toLowerCase()]||[t.toLowerCase()]).find(s=>e.types[s]),o=e.types[i];if(o)return o[o.length-1-n]}function sb(e,t=""){var o,s;let n;for(e.attrStr=t;t.length>0;)if(n=t.match(/^\s*\.([a-zA-Z0-9\-_]+)/))Kh(e,"class",n[1],{append:!0}),t=t.slice(n[0].length);else if(n=t.match(/^\s*#([a-zA-Z0-9\-_]+)/))Kh(e,"id",n[1]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)="([^"]*)"/))Kh(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)='([^']*)'/))Kh(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)=([^ ]*)/))Kh(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)/))Kh(e,n[1],""),t=t.slice(n[0].length);else if(n=t.match(/^\s+/))t=t.slice(n[0].length);else if(n=t.match(/^\s*as="([a-zA-Z0-9\-_]+)"/))Kh(e,"as",n[1]),t=t.slice(n[0].length);else break;const r=Au(e.attrs,"as"),i=Au(e.attrs,"mode");return(s=(o=i9t[r])==null?void 0:o[i])==null||s.forEach(a=>{Au(e.attrs,a[0])||(Kh(e,a[0],a[1]),t=t.slice(a[0].length))}),!0}function Kh(e,t,n,r={}){const i=e.attrIndex(t);t==="class"&&r.append&&i!==-1?e.attrs[i][1].includes(n)||(e.attrs[i][1]+=` ${n}`):i===-1?e.attrPush([t,n]):r.append?e.attrs[i][1]+=` ${n}`:e.attrs[i][1]=n}function aNe(e,t){const n=t.type.replace(/_(open|start)$/,"");e.types[n]||(e.types[n]=[]),e.types[n].push(t),e.last=t}function L7t(e,t){e[t]=e[t].replace(/\s*$/,"")}function R7t(e,t){e.forEach(n=>{const r=n.attrs||[];let i={};if(F7t(n,t),r.forEach(o=>{t.attrs.keys.includes(o[0])||t.attrs.keys.push(o[0]),i={...i,[o[0]]:KPe(o[1])},n.section&&(M7t(n,o,t),O7t(n,o,t))}),r.length&&n.section){const o=n.tag==="section-step",s=o?` ${n.tag} `:"",a=n.section+s,l=Object.keys(t.attrs.sections).filter(c=>!!c.startsWith(a)).length+1,f=a+(o?l:"");t.attrs.sections={...t.attrs.sections,[f]:{...i,...o?{as:n.tag,mode:"tour"}:{}}}}})}function F7t(e,t){var n,r;e.section&&(e.tag==="section-step"&&!t.sections[e.section].steps&&(t.sections[e.section].steps=[]),(e.markup==="#"||e.markup==="##")&&(t.sections[e.section]=t.sections[e.section]||{}),(r=(n=t.sections[e.section])==null?void 0:n.steps)==null||r.push({}))}function M7t(e,t,n){e.markup==="##"&&(n.sections[e.section]={[t[0]]:iz(t[1]),...n.sections[e.section]})}function O7t(e,t,n){if(e.tag==="section-step"){const r=n.sections[e.section].steps,i=r.length-1,o=r[i];r[i]={[t[0]]:iz(t[1]),...o}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function lNe(e){return typeof e>"u"||e===null}function $7t(e){return typeof e=="object"&&e!==null}function I7t(e){return Array.isArray(e)?e:lNe(e)?[]:[e]}function P7t(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function N7t(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function B7t(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var z7t=lNe,j7t=$7t,U7t=I7t,q7t=N7t,H7t=B7t,G7t=P7t,ps={isNothing:z7t,isObject:j7t,toArray:U7t,repeat:q7t,isNegativeZero:H7t,extend:G7t};function uNe(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function B_(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=uNe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}B_.prototype=Object.create(Error.prototype);B_.prototype.constructor=B_;B_.prototype.toString=function(t){return this.name+": "+uNe(this,t)};var Xa=B_;function RM(e,t,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-t>a&&(o=" ... ",t=r-a+o.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:o+e.slice(t,n).replace(/\t/g,"")+s,pos:r-t+o.length}}function FM(e,t){return ps.repeat(" ",t-e.length)+e}function V7t(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,s=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,u,f=Math.min(e.line+t.linesAfter,i.length).toString().length,c=t.maxLength-(t.indent+f+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)u=RM(e.buffer,r[s-l],i[s-l],e.position-(r[s]-r[s-l]),c),a=ps.repeat(" ",t.indent)+FM((e.line-l+1).toString(),f)+" | "+u.str+`
`+a;for(u=RM(e.buffer,r[s],i[s],e.position,c),a+=ps.repeat(" ",t.indent)+FM((e.line+1).toString(),f)+" | "+u.str+`
`,a+=ps.repeat("-",t.indent+f+3+u.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)u=RM(e.buffer,r[s+l],i[s+l],e.position-(r[s]-r[s+l]),c),a+=ps.repeat(" ",t.indent)+FM((e.line+l+1).toString(),f)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var W7t=V7t,Y7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],X7t=["scalar","sequence","mapping"];function Z7t(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function K7t(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Y7t.indexOf(n)===-1)throw new Xa('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Z7t(t.styleAliases||null),X7t.indexOf(this.kind)===-1)throw new Xa('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var na=K7t;function YAe(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,s){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=s)}),n[i]=r}),n}function J7t(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function W8(e){return this.extend(e)}W8.prototype.extend=function(t){var n=[],r=[];if(t instanceof na)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new Xa("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof na))throw new Xa("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Xa("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Xa("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof na))throw new Xa("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(W8.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=YAe(i,"implicit"),i.compiledExplicit=YAe(i,"explicit"),i.compiledTypeMap=J7t(i.compiledImplicit,i.compiledExplicit),i};var cNe=W8,fNe=new na("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),dNe=new na("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),hNe=new na("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),pNe=new cNe({explicit:[fNe,dNe,hNe]});function Q7t(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function eBt(){return null}function tBt(e){return e===null}var gNe=new na("tag:yaml.org,2002:null",{kind:"scalar",resolve:Q7t,construct:eBt,predicate:tBt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function nBt(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function rBt(e){return e==="true"||e==="True"||e==="TRUE"}function iBt(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var mNe=new na("tag:yaml.org,2002:bool",{kind:"scalar",resolve:nBt,construct:rBt,predicate:iBt,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function oBt(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function sBt(e){return 48<=e&&e<=55}function aBt(e){return 48<=e&&e<=57}function lBt(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!oBt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!sBt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!aBt(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function uBt(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function cBt(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!ps.isNegativeZero(e)}var yNe=new na("tag:yaml.org,2002:int",{kind:"scalar",resolve:lBt,construct:uBt,predicate:cBt,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),fBt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function dBt(e){return!(e===null||!fBt.test(e)||e[e.length-1]==="_")}function hBt(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var pBt=/^[-+]?[0-9]+e/;function gBt(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ps.isNegativeZero(e))return"-0.0";return n=e.toString(10),pBt.test(n)?n.replace("e",".e"):n}function mBt(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||ps.isNegativeZero(e))}var bNe=new na("tag:yaml.org,2002:float",{kind:"scalar",resolve:dBt,construct:hBt,predicate:mBt,represent:gBt,defaultStyle:"lowercase"}),vNe=pNe.extend({implicit:[gNe,mNe,yNe,bNe]}),xNe=vNe,wNe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_Ne=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yBt(e){return e===null?!1:wNe.exec(e)!==null||_Ne.exec(e)!==null}function bBt(e){var t,n,r,i,o,s,a,l=0,u=null,f,c,d;if(t=wNe.exec(e),t===null&&(t=_Ne.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(f=+t[10],c=+(t[11]||0),u=(f*60+c)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(n,r,i,o,s,a,l)),u&&d.setTime(d.getTime()-u),d}function vBt(e){return e.toISOString()}var ENe=new na("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yBt,construct:bBt,instanceOf:Date,represent:vBt});function xBt(e){return e==="<<"||e===null}var SNe=new na("tag:yaml.org,2002:merge",{kind:"scalar",resolve:xBt}),sz=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function wBt(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=sz;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function _Bt(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=sz,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function EBt(e){var t="",n=0,r,i,o=e.length,s=sz;for(r=0;r<o;r++)r%3===0&&r&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):i===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):i===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function SBt(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var ANe=new na("tag:yaml.org,2002:binary",{kind:"scalar",resolve:wBt,construct:_Bt,predicate:SBt,represent:EBt}),ABt=Object.prototype.hasOwnProperty,CBt=Object.prototype.toString;function kBt(e){if(e===null)return!0;var t=[],n,r,i,o,s,a=e;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],s=!1,CBt.call(i)!=="[object Object]")return!1;for(o in i)if(ABt.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function TBt(e){return e!==null?e:[]}var CNe=new na("tag:yaml.org,2002:omap",{kind:"sequence",resolve:kBt,construct:TBt}),DBt=Object.prototype.toString;function LBt(e){if(e===null)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],DBt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function RBt(e){if(e===null)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var kNe=new na("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:LBt,construct:RBt}),FBt=Object.prototype.hasOwnProperty;function MBt(e){if(e===null)return!0;var t,n=e;for(t in n)if(FBt.call(n,t)&&n[t]!==null)return!1;return!0}function OBt(e){return e!==null?e:{}}var TNe=new na("tag:yaml.org,2002:set",{kind:"mapping",resolve:MBt,construct:OBt}),az=xNe.extend({implicit:[ENe,SNe],explicit:[ANe,CNe,kNe,TNe]}),ig=Object.prototype.hasOwnProperty,xT=1,DNe=2,LNe=3,wT=4,MM=1,$Bt=2,XAe=3,IBt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PBt=/[\x85\u2028\u2029]/,NBt=/[,\[\]\{\}]/,RNe=/^(?:!|!!|![a-z\-]+!)$/i,FNe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ZAe(e){return Object.prototype.toString.call(e)}function Rf(e){return e===10||e===13}function Xm(e){return e===9||e===32}function Dl(e){return e===9||e===32||e===10||e===13}function wb(e){return e===44||e===91||e===93||e===123||e===125}function BBt(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function zBt(e){return e===120?2:e===117?4:e===85?8:0}function jBt(e){return 48<=e&&e<=57?e-48:-1}function KAe(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function UBt(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var MNe=new Array(256),ONe=new Array(256);for(var Ky=0;Ky<256;Ky++)MNe[Ky]=KAe(Ky)?1:0,ONe[Ky]=KAe(Ky);function qBt(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||az,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function $Ne(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=W7t(n),new Xa(t,n)}function _n(e,t){throw $Ne(e,t)}function _T(e,t){e.onWarning&&e.onWarning.call(null,$Ne(e,t))}var JAe={YAML:function(t,n,r){var i,o,s;t.version!==null&&_n(t,"duplication of %YAML directive"),r.length!==1&&_n(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&_n(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&_n(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&_T(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&_n(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],RNe.test(i)||_n(t,"ill-formed tag handle (first argument) of the TAG directive"),ig.call(t.tagMap,i)&&_n(t,'there is a previously declared suffix for "'+i+'" tag handle'),FNe.test(o)||_n(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{_n(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Np(e,t,n,r){var i,o,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||_n(e,"expected valid JSON character");else IBt.test(a)&&_n(e,"the stream contains non-printable characters");e.result+=a}}function QAe(e,t,n,r){var i,o,s,a;for(ps.isObject(n)||_n(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),s=0,a=i.length;s<a;s+=1)o=i[s],ig.call(t,o)||(t[o]=n[o],r[o]=!0)}function _b(e,t,n,r,i,o,s,a,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&_n(e,"nested arrays are not supported inside keys"),typeof i=="object"&&ZAe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&ZAe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)QAe(e,t,o[u],n);else QAe(e,t,o,n);else!e.json&&!ig.call(n,i)&&ig.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,_n(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function lz(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):_n(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Qo(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Xm(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Rf(i))for(lz(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&_T(e,"deficient indentation"),r}function IR(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Dl(n)))}function uz(e,t){t===1?e.result+=" ":t>1&&(e.result+=ps.repeat(`
`,t-1))}function HBt(e,t,n){var r,i,o,s,a,l,u,f,c=e.kind,d=e.result,h;if(h=e.input.charCodeAt(e.position),Dl(h)||wb(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),Dl(i)||n&&wb(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),Dl(i)||n&&wb(i))break}else if(h===35){if(r=e.input.charCodeAt(e.position-1),Dl(r))break}else{if(e.position===e.lineStart&&IR(e)||n&&wb(h))break;if(Rf(h))if(l=e.line,u=e.lineStart,f=e.lineIndent,Qo(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=u,e.lineIndent=f;break}}a&&(Np(e,o,s,!1),uz(e,e.line-l),o=s=e.position,a=!1),Xm(h)||(s=e.position+1),h=e.input.charCodeAt(++e.position)}return Np(e,o,s,!1),e.result?!0:(e.kind=c,e.result=d,!1)}function GBt(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Np(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Rf(n)?(Np(e,r,i,!0),uz(e,Qo(e,!1,t)),r=i=e.position):e.position===e.lineStart&&IR(e)?_n(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);_n(e,"unexpected end of the stream within a single quoted scalar")}function VBt(e,t){var n,r,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Np(e,n,e.position,!0),e.position++,!0;if(a===92){if(Np(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Rf(a))Qo(e,!1,t);else if(a<256&&MNe[a])e.result+=ONe[a],e.position++;else if((s=zBt(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=BBt(a))>=0?o=(o<<4)+s:_n(e,"expected hexadecimal character");e.result+=UBt(o),e.position++}else _n(e,"unknown escape sequence");n=r=e.position}else Rf(a)?(Np(e,n,r,!0),uz(e,Qo(e,!1,t)),n=r=e.position):e.position===e.lineStart&&IR(e)?_n(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}_n(e,"unexpected end of the stream within a double quoted scalar")}function WBt(e,t){var n=!0,r,i,o,s=e.tag,a,l=e.anchor,u,f,c,d,h,p=Object.create(null),m,b,y,v;if(v=e.input.charCodeAt(e.position),v===91)f=93,h=!1,a=[];else if(v===123)f=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),v=e.input.charCodeAt(++e.position);v!==0;){if(Qo(e,!0,t),v=e.input.charCodeAt(e.position),v===f)return e.position++,e.tag=s,e.anchor=l,e.kind=h?"mapping":"sequence",e.result=a,!0;n?v===44&&_n(e,"expected the node content, but found ','"):_n(e,"missed comma between flow collection entries"),b=m=y=null,c=d=!1,v===63&&(u=e.input.charCodeAt(e.position+1),Dl(u)&&(c=d=!0,e.position++,Qo(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,$1(e,t,xT,!1,!0),b=e.tag,m=e.result,Qo(e,!0,t),v=e.input.charCodeAt(e.position),(d||e.line===r)&&v===58&&(c=!0,v=e.input.charCodeAt(++e.position),Qo(e,!0,t),$1(e,t,xT,!1,!0),y=e.result),h?_b(e,a,p,b,m,y,r,i,o):c?a.push(_b(e,null,p,b,m,y,r,i,o)):a.push(m),Qo(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(n=!0,v=e.input.charCodeAt(++e.position)):n=!1}_n(e,"unexpected end of the stream within a flow collection")}function YBt(e,t){var n,r,i=MM,o=!1,s=!1,a=t,l=0,u=!1,f,c;if(c=e.input.charCodeAt(e.position),c===124)r=!1;else if(c===62)r=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)MM===i?i=c===43?XAe:$Bt:_n(e,"repeat of a chomping mode identifier");else if((f=jBt(c))>=0)f===0?_n(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?_n(e,"repeat of an indentation width identifier"):(a=t+f-1,s=!0);else break;if(Xm(c)){do c=e.input.charCodeAt(++e.position);while(Xm(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!Rf(c)&&c!==0)}for(;c!==0;){for(lz(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Rf(c)){l++;continue}if(e.lineIndent<a){i===XAe?e.result+=ps.repeat(`
`,o?1+l:l):i===MM&&o&&(e.result+=`
`);break}for(r?Xm(c)?(u=!0,e.result+=ps.repeat(`
`,o?1+l:l)):u?(u=!1,e.result+=ps.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=ps.repeat(`
`,l):e.result+=ps.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,n=e.position;!Rf(c)&&c!==0;)c=e.input.charCodeAt(++e.position);Np(e,n,e.position,!1)}return!0}function eCe(e,t){var n,r=e.tag,i=e.anchor,o=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,_n(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!Dl(s))));){if(a=!0,e.position++,Qo(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,$1(e,t,LNe,!1,!0),o.push(e.result),Qo(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)_n(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function XBt(e,t,n){var r,i,o,s,a,l,u=e.tag,f=e.anchor,c={},d=Object.create(null),h=null,p=null,m=null,b=!1,y=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),v=e.input.charCodeAt(e.position);v!==0;){if(!b&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,_n(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(v===63||v===58)&&Dl(r))v===63?(b&&(_b(e,c,d,h,p,null,s,a,l),h=p=m=null),y=!0,b=!0,i=!0):b?(b=!1,i=!0):_n(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=r;else{if(s=e.line,a=e.lineStart,l=e.position,!$1(e,n,DNe,!1,!0))break;if(e.line===o){for(v=e.input.charCodeAt(e.position);Xm(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),Dl(v)||_n(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(_b(e,c,d,h,p,null,s,a,l),h=p=m=null),y=!0,b=!1,i=!1,h=e.tag,p=e.result;else if(y)_n(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=f,!0}else if(y)_n(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=f,!0}if((e.line===o||e.lineIndent>t)&&(b&&(s=e.line,a=e.lineStart,l=e.position),$1(e,t,wT,!0,i)&&(b?p=e.result:m=e.result),b||(_b(e,c,d,h,p,m,s,a,l),h=p=m=null),Qo(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&v!==0)_n(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&_b(e,c,d,h,p,null,s,a,l),y&&(e.tag=u,e.anchor=f,e.kind="mapping",e.result=c),y}function ZBt(e){var t,n=!1,r=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&_n(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(r=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):_n(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Dl(s);)s===33&&(r?_n(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),RNe.test(i)||_n(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),NBt.test(o)&&_n(e,"tag suffix cannot contain flow indicator characters")}o&&!FNe.test(o)&&_n(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{_n(e,"tag name is malformed: "+o)}return n?e.tag=o:ig.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:_n(e,'undeclared tag handle "'+i+'"'),!0}function KBt(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&_n(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Dl(n)&&!wb(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&_n(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function JBt(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Dl(r)&&!wb(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&_n(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),ig.call(e.anchorMap,n)||_n(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Qo(e,!0,-1),!0}function $1(e,t,n,r,i){var o,s,a,l=1,u=!1,f=!1,c,d,h,p,m,b;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=wT===n||LNe===n,r&&Qo(e,!0,-1)&&(u=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;ZBt(e)||KBt(e);)Qo(e,!0,-1)?(u=!0,a=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=u||i),(l===1||wT===n)&&(xT===n||DNe===n?m=t:m=t+1,b=e.position-e.lineStart,l===1?a&&(eCe(e,b)||XBt(e,b,m))||WBt(e,m)?f=!0:(s&&YBt(e,m)||GBt(e,m)||VBt(e,m)?f=!0:JBt(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&_n(e,"alias node should not have any properties")):HBt(e,m,xT===n)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(f=a&&eCe(e,b))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&_n(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,d=e.implicitTypes.length;c<d;c+=1)if(p=e.implicitTypes[c],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ig.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,h=e.typeMap.multi[e.kind||"fallback"],c=0,d=h.length;c<d;c+=1)if(e.tag.slice(0,h[c].tag.length)===h[c].tag){p=h[c];break}p||_n(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&_n(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):_n(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function QBt(e){var t=e.position,n,r,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Qo(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!Dl(s);)s=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&_n(e,"directive name must not be less than one character in length");s!==0;){for(;Xm(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Rf(s));break}if(Rf(s))break;for(n=e.position;s!==0&&!Dl(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}s!==0&&lz(e),ig.call(JAe,r)?JAe[r](e,r,i):_T(e,'unknown document directive "'+r+'"')}if(Qo(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Qo(e,!0,-1)):o&&_n(e,"directives end mark is expected"),$1(e,e.lineIndent-1,wT,!1,!0),Qo(e,!0,-1),e.checkLineBreaks&&PBt.test(e.input.slice(t,e.position))&&_T(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&IR(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Qo(e,!0,-1));return}if(e.position<e.length-1)_n(e,"end of the stream or a document separator is expected");else return}function INe(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new qBt(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,_n(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)QBt(n);return n.documents}function ezt(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=INe(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function tzt(e,t){var n=INe(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Xa("expected a single document in the stream, but found more")}}var nzt=ezt,rzt=tzt,PNe={loadAll:nzt,load:rzt},NNe=Object.prototype.toString,BNe=Object.prototype.hasOwnProperty,cz=65279,izt=9,z_=10,ozt=13,szt=32,azt=33,lzt=34,Y8=35,uzt=37,czt=38,fzt=39,dzt=42,zNe=44,hzt=45,ET=58,pzt=61,gzt=62,mzt=63,yzt=64,jNe=91,UNe=93,bzt=96,qNe=123,vzt=124,HNe=125,Ma={};Ma[0]="\\0";Ma[7]="\\a";Ma[8]="\\b";Ma[9]="\\t";Ma[10]="\\n";Ma[11]="\\v";Ma[12]="\\f";Ma[13]="\\r";Ma[27]="\\e";Ma[34]='\\"';Ma[92]="\\\\";Ma[133]="\\N";Ma[160]="\\_";Ma[8232]="\\L";Ma[8233]="\\P";var xzt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],wzt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function _zt(e,t){var n,r,i,o,s,a,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)s=r[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&BNe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function Ezt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Xa("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+ps.repeat("0",r-t.length)+t}var Szt=1,j_=2;function Azt(e){this.schema=e.schema||az,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=ps.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=_zt(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?j_:Szt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function tCe(e,t){for(var n=ps.repeat(" ",t),r=0,i=-1,o="",s,a=e.length;r<a;)i=e.indexOf(`
`,r),i===-1?(s=e.slice(r),r=a):(s=e.slice(r,i+1),r=i+1),s.length&&s!==`
`&&(o+=n),o+=s;return o}function X8(e,t){return`
`+ps.repeat(" ",e.indent*t)}function Czt(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function ST(e){return e===szt||e===izt}function U_(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==cz||65536<=e&&e<=1114111}function nCe(e){return U_(e)&&e!==cz&&e!==ozt&&e!==z_}function rCe(e,t,n){var r=nCe(e),i=r&&!ST(e);return(n?r:r&&e!==zNe&&e!==jNe&&e!==UNe&&e!==qNe&&e!==HNe)&&e!==Y8&&!(t===ET&&!i)||nCe(t)&&!ST(t)&&e===Y8||t===ET&&i}function kzt(e){return U_(e)&&e!==cz&&!ST(e)&&e!==hzt&&e!==mzt&&e!==ET&&e!==zNe&&e!==jNe&&e!==UNe&&e!==qNe&&e!==HNe&&e!==Y8&&e!==czt&&e!==dzt&&e!==azt&&e!==vzt&&e!==pzt&&e!==gzt&&e!==fzt&&e!==lzt&&e!==uzt&&e!==yzt&&e!==bzt}function Tzt(e){return!ST(e)&&e!==ET}function h2(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function GNe(e){var t=/^\n* /;return t.test(e)}var VNe=1,Z8=2,WNe=3,YNe=4,ab=5;function Dzt(e,t,n,r,i,o,s,a){var l,u=0,f=null,c=!1,d=!1,h=r!==-1,p=-1,m=kzt(h2(e,0))&&Tzt(h2(e,e.length-1));if(t||s)for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=h2(e,l),!U_(u))return ab;m=m&&rCe(u,f,a),f=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=h2(e,l),u===z_)c=!0,h&&(d=d||l-p-1>r&&e[p+1]!==" ",p=l);else if(!U_(u))return ab;m=m&&rCe(u,f,a),f=u}d=d||h&&l-p-1>r&&e[p+1]!==" "}return!c&&!d?m&&!s&&!i(e)?VNe:o===j_?ab:Z8:n>9&&GNe(e)?ab:s?o===j_?ab:Z8:d?YNe:WNe}function Lzt(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===j_?'""':"''";if(!e.noCompatMode&&(xzt.indexOf(t)!==-1||wzt.test(t)))return e.quotingType===j_?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;function l(u){return Czt(e,u)}switch(Dzt(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!r,i)){case VNe:return t;case Z8:return"'"+t.replace(/'/g,"''")+"'";case WNe:return"|"+iCe(t,e.indent)+oCe(tCe(t,o));case YNe:return">"+iCe(t,e.indent)+oCe(tCe(Rzt(t,s),o));case ab:return'"'+Fzt(t)+'"';default:throw new Xa("impossible error: invalid scalar style")}}()}function iCe(e,t){var n=GNe(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function oCe(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Rzt(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,n.lastIndex=u,sCe(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=n.exec(e);){var a=s[1],l=s[2];o=l[0]===" ",r+=a+(!i&&!o&&l!==""?`
`:"")+sCe(l,t),i=o}return r}function sCe(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,s=0,a=0,l="";r=n.exec(e);)a=r.index,a-i>t&&(o=s>i?s:a,l+=`
`+e.slice(i,o),i=o+1),s=a;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}function Fzt(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=h2(e,i),r=Ma[n],!r&&U_(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Ezt(n);return t}function Mzt(e,t,n){var r="",i=e.tag,o,s,a;for(o=0,s=n.length;o<s;o+=1)a=n[o],e.replacer&&(a=e.replacer.call(n,String(o),a)),(dh(e,t,a,!1,!1)||typeof a>"u"&&dh(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function aCe(e,t,n,r){var i="",o=e.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],e.replacer&&(l=e.replacer.call(n,String(s),l)),(dh(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&dh(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=X8(e,t)),e.dump&&z_===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function Ozt(e,t,n){var r="",i=e.tag,o=Object.keys(n),s,a,l,u,f;for(s=0,a=o.length;s<a;s+=1)f="",r!==""&&(f+=", "),e.condenseFlow&&(f+='"'),l=o[s],u=n[l],e.replacer&&(u=e.replacer.call(n,l,u)),dh(e,t,l,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),dh(e,t,u,!1,!1)&&(f+=e.dump,r+=f));e.tag=i,e.dump="{"+r+"}"}function $zt(e,t,n,r){var i="",o=e.tag,s=Object.keys(n),a,l,u,f,c,d;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new Xa("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)d="",(!r||i!=="")&&(d+=X8(e,t)),u=s[a],f=n[u],e.replacer&&(f=e.replacer.call(n,u,f)),dh(e,t+1,u,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&z_===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=X8(e,t)),dh(e,t+1,f,!0,c)&&(e.dump&&z_===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=o,e.dump=i||"{}"}function lCe(e,t,n){var r,i,o,s,a,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,NNe.call(a.represent)==="[object Function]")r=a.represent(t,l);else if(BNe.call(a.represent,l))r=a.represent[l](t,l);else throw new Xa("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function dh(e,t,n,r,i,o,s){e.tag=null,e.dump=n,lCe(e,n,!1)||lCe(e,n,!0);var a=NNe.call(e.dump),l=r,u;r&&(r=e.flowLevel<0||e.flowLevel>t);var f=a==="[object Object]"||a==="[object Array]",c,d;if(f&&(c=e.duplicates.indexOf(n),d=c!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(f&&d&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?($zt(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(Ozt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?aCe(e,t-1,e.dump,i):aCe(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(Mzt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&Lzt(e,e.dump,t,o,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Xa("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function Izt(e,t){var n=[],r=[],i,o;for(K8(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function K8(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)K8(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)K8(e[r[i]],t,n)}function Pzt(e,t){t=t||{};var n=new Azt(t);n.noRefs||Izt(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),dh(n,0,r,!0,!0)?n.dump+`
`:""}var Nzt=Pzt,Bzt={dump:Nzt};function fz(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var zzt=na,jzt=cNe,Uzt=pNe,qzt=vNe,Hzt=xNe,Gzt=az,Vzt=PNe.load,Wzt=PNe.loadAll,Yzt=Bzt.dump,Xzt=Xa,Zzt={binary:ANe,float:bNe,map:hNe,null:gNe,pairs:kNe,set:TNe,timestamp:ENe,bool:mNe,int:yNe,merge:SNe,omap:CNe,seq:dNe,str:fNe},Kzt=fz("safeLoad","load"),Jzt=fz("safeLoadAll","loadAll"),Qzt=fz("safeDump","dump"),ejt={Type:zzt,Schema:jzt,FAILSAFE_SCHEMA:Uzt,JSON_SCHEMA:qzt,CORE_SCHEMA:Hzt,DEFAULT_SCHEMA:Gzt,load:Vzt,loadAll:Wzt,dump:Yzt,YAMLException:Xzt,types:Zzt,safeLoad:Kzt,safeLoadAll:Jzt,safeDump:Qzt};function tjt(e){e.core.ruler.before("normalize","extract-config",t=>{var i;const n=/^\s*---\s*\n([\s\S]+?)\n\s*---\s*/,r=t.src.match(n);if(e.config={versionCheck:((i=e.config)==null?void 0:i.versionCheck)||!1},r)try{e.config=ejt.load(r[1]),t.src=t.src.replace(r[0],"")}catch(o){return console.error("Error parsing frontmatter:",o),null}e.config.versionCheck||(e.config.version=Number(i7t(e.config.version)),e.config.versionCheck=!0)})}const njt=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,rjt=`
input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}
input[type=checkbox]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=checkbox]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");

}
`,ijt=`
input[type=radio] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}

label span {
  font-size: small;
}

input[type=radio]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=radio]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");

}
`,ojt=`
input[type="range"] {
  -webkit-appearance: none;
  width: 90%;
  margin-left: 5%;
  height: 6px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
}
input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider {
  margin: 60px 0 0 0;
}
.range-slider {
  width: 100%;
}
input[type="range"]::-webkit-slider-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-webkit-slider-thumb {
  background: #00416F;
}
input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
input[type="range"]::-moz-range-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-moz-range-thumb {
  background: #00416F;
}
input[type="range"]:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416F00;
}
.range-slider__value {
  display: inline-block;
  position: relative;
  width: 60px;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

input::-moz-focus-inner, input::-moz-focus-outer {
  border: 0;
}
`,sjt=`
${njt}
${rjt}
${ijt}
${ojt}

  iframe,
  img,
  video {
    max-width: 100%;
  }
  .navigation {
    width: 100%;
    background: white;
    padding: 10px 0px;
    color: black;
    box-shadow: 0px 0px 13px 3px #8080802e;
    max-height: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .navigation .container {
    padding: 0px;
  }
  .navigation .container ul {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0px;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    margin: 0;
    padding: 0;
  }
  .navigation .container ul::-webkit-scrollbar { 
    display: none;
  }
  .navigation .container ul li {
    list-style: none;
    margin: 0px 10px;
  }
  .navigation li a {
    color: black;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    display: inline-grid;
  }
  .navigation li a:after {
    content: "";
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: transparent;
  }
  .navigation li a:hover:after {
    background: black;
  }
  .navigation li.active a {
    font-weight: 700;
  }
  .navigation li.active a:after {
    background: black;
  }
  .navigation li a:hover {
    --primary-background-hover: transparent;
  }
  .hamburger-menu {
    display: none;
    cursor: pointer;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTUsOS41TDcuNSwxNEgyLjVMNSw5LjVNMyw0SDdWOEgzVjRNNSwyMEEyLDIgMCAwLDAgNywxOEEyLDIgMCAwLDAgNSwxNkEyLDIgMCAwLDAgMywxOEEyLDIgMCAwLDAgNSwyME05LDVWN0gyMVY1SDlNOSwxOUgyMVYxN0g5VjE5TTksMTNIMjFWMTFIOVYxM1oiIC8+PC9zdmc+");
    background-repeat: no-repeat;
    background-size: contain;
    width: 30px;
    height: 30px;
  }
  .nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .nav-overlay {
    display: none;
  }
  @media (max-width: 768px) {
    .navigation {
      padding: 0px;
      height: 50px;
    }
    .navigation .container {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    .hamburger-menu {
      display: flex;
    }
    .navigation .container ul {
      position: absolute;
      top: 50px;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 99999999;
      display: none;
      flex-direction: column;
    }
    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 99999998;
      cursor: pointer;
    }
    .navigation .container ul.show, .nav-overlay.show {
      display: flex !important;
    }
    .nav-list li {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .hamburger-menu.active span:nth-child(1) {
      transform: rotate(45deg) translate(8px, 8px);
    }
    .hamburger-menu.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger-menu.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    .navigation .container ul li {
      width: 100%;
      text-align: center;
    } 
  }
  .section-wrap {
    scroll-margin: 120px;
  }
  .story-telling p,
  .story-telling code {
    --font-size: 1.1rem;
  }
  .story-telling p {
    display: block;
    font-weight: 400;
    line-height: 170%;
    margin-top: 0.8rem;
    margin-bottom: 1.6rem;
  }
  .story-telling a {
    --font-size: 1.1rem;
    --color: var(--primary-color);
    --background-color: transparent;
    outline: 0;
    background-color: var(--background-color);
    color: var(--color);
    text-underline-offset: 4px;
    font-size: var(--font-size)
  }
  .story-telling a:hover {
    --bg-hover-transparency: 10%;
    background-color: color-mix(
      in srgb,
      var(--primary-color) var(--bg-hover-transparency),
      transparent
    );
  }
  .story-telling li {
    margin-bottom: 1rem;
  }
  .story-telling table {
    width:100%;
    color: var(--color);
    font-style: normal;
    font-weight: 400;
    font-size: 1rem;
    margin: 2rem 0rem;
  }
  .story-telling td, 
  .story-telling th {
    padding: 1rem;
    color: var(--color);
    font-weight: 400;
    font-size: 1rem;
    text-align: left;
    text-align: start;
    border-bottom: 1px solid var(--color);
  }
  .story-telling th {
    font-weight: 600;
    border-bottom: 3px solid var(--color);
  }
  .story-telling .container {
    width: 90%;
    --block-spacing-vertical: 2rem;
  }
  .story-telling.editor-enabled .section-wrap.section-item {
    position: relative;
    border-bottom: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start {
    border-top: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item::after, 
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    content: "+";
    background: white;
    width: 25px;
    height: 25px;
    display: flex;
    position: absolute;
    bottom: -12px;
    left: calc(50% - 12.5px);
    z-index: 1;
    border-radius: 100%;
    box-shadow: 1px 1px 10px #80808094;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: larger;
    cursor: pointer;
  }
  .story-telling.editor-enabled.editor-close .section-wrap.section-item::after, 
  .story-telling.editor-enabled.editor-close .section-wrap.section-item.section-start::before {
    display: none;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    top: -12px;
  }
  .story-telling .section-wrap.container.section-start {
    padding-top: 4rem;
  }
  .story-telling p:last-child {
    margin-bottom: 0;
  }
  .story-telling .section-wrap.container:last-child {
    padding-bottom: 4rem; 
  }
  .story-telling .tour {
    width: 100%;
    justify-items: start;
    display: grid;
  }
  .story-telling .hero {
    position: relative;      
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .story-telling .hero * {
    color: white;
    margin: 0rem 0.8rem;
  }
  .story-telling .hero.center {
    align-items: center;
    text-align: center;
  }
  .story-telling .hero.left {
    align-items: start;
    text-align: left;
  }
  .story-telling .hero.right {
    align-items: end;
    text-align: right;
  }
  .story-telling .hero img, 
  .story-telling .hero video {
    position: absolute;
    top: -17.5%;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 135%;
    object-fit: cover;
    margin: 0rem;
    will-change: transform;
    backface-visibility: hidden;
    filter: brightness(60%) contrast(100%);
  }
  .story-telling .tour.left {
    justify-items: start;
  }
  .story-telling .tour.right {
    justify-items: end;
  }
  .story-telling .tour.center {
    justify-items: center;
  }
  .story-telling .tour eox-map {
    width: 100%;
    height: 100vh;
    position: sticky;
    top:0;
    z-index: 0;
  }
  .story-telling .tour section-step {
    background: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    min-height: 8vh;
    margin: 1rem;
    margin-bottom: calc(120vh);
    display: block;
    z-index: 1;
    max-width: 40%;
  }
  @media screen and (max-width: 1024px) {
    .story-telling .tour section-step {
      max-width: 100%;
    }
  }
  .editor-wrapper {
    z-index: 4;
    width: 35%;
    position: fixed;
    bottom: 20px;
    right: 20px;
    border-radius: 10px;
    background: #f2f2f2;
    cursor: move;
    box-shadow: 0px 0px 3px 2px #80808026;
    box-sizing: border-box;
  }
  .resize-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 4px;
    left: 4px;
    background-color: black;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    transform: rotate(90deg);
    cursor: sw-resize;
    z-index: 2;
  }
  #editor {
    width: 100%;
    height: 100%;
    border: 2px solid #ebebeb;
    cursor: auto;
  }
  @media screen and (max-width: 1024px) {
    .editor-wrapper {
      right: 2.5%;
      width: 95%;
    }
  }
  .editor-opacity-none {
    opacity: 0;
  }
  .editor-hide {
    display: none;
  }
  .editor-error {
    display: none;
    cursor: auto;
    position: absolute;
    bottom: 39px;
    left: 9px;
    width: calc(100% - 20px);
    height: 105px;
    background: #ffc7d3;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border: 2px solid #ff7b9640;
    z-index: 1;
  }
  .editor-error .editor-error-wrapper {
    padding: 0.5rem;
    height: 85%;
  }
  .editor-error .editor-error-wrapper .overflow {
    height: 100%;
    overflow-y: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 85%;
  }
  .editor-error .editor-error-wrapper .overflow::-webkit-scrollbar { 
    display: none;
  }
  .editor-error .editor-error-wrapper h6 {
    margin: 0;
    padding: 0;
    font-size: 0.7rem;
    color: #dd264c;
  }
  .editor-error .editor-error-wrapper ul {
    margin-top: 0.25rem;
    padding-inline-start: 20px;
  }
  .editor-error .editor-error-wrapper li {
    color: #dd264c;
    font-size: 0.7rem;
    font-weight: 400;
    margin-bottom: 0;
    margin-left: 0.2rem;
  }
  .editor-saver {
    position: absolute;    
    bottom: 18px;
    left: 17px;
    font-size: 12px;
    color: #959694;
    text-align: right;
  }
  @keyframes rotate {
    100% {transform: rotate(360deg)}
  }
  @keyframes spin {
    0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
    25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
    50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
    75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
    100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
  }
  .switch-button {
    position: fixed;
    bottom: 70px;
    right: 60px;
    display: inline-block;
    font-size: 0;
    z-index: 5;
    border: 5px white solid;
    border-radius: 34px;
    box-shadow: 1px 2px 10px 1px #7e7e7e59;
    cursor: pointer;
  }
  .switch {
    position: relative;
    display: flex;
    align-items: center;
    width: 65px;
    height: 34px;
    font-size: 16px;
    justify-content: space-around;
    margin-bottom: 0px;
  }
  .switch .switch-input { 
    opacity: 0;
    width: 0;
    height: 0;
  }
  .switch .icon {
    z-index: 2;
    width: 30px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .switch .icon::before {
    cursor: pointer;
    display: block;
    width: 18px;
    height: 18px;
  }
  .view-icon {
    padding-left: 8px;
  }
  .editor-icon {
    padding-right: 8px;
  }
  .switch .view-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath fill='white' d='M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z' /%3E%3C/svg%3E");
  }
  .switch .icon.editor-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epencil%3C/title%3E%3Cpath fill='white' d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' /%3E%3C/svg%3E");
  }
  .switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 20px;
    right: 20px;
    bottom: 0;
    z-index: 1;
    background-color: #727272;
    transition: .4s;
    border-radius: 34px;
    left: 0px;
    right: 0px;
    width: 65px;
  }
  .switch-slider:before {
    cursor: pointer;
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  .switch-input:checked + .switch-slider {
    background-color: #2196F3;
  }
  .switch-input:checked + .switch-slider:before {
    transform: translateX(30px);
  }
  .switch .icon.editor-view {
    opacity: 0;
  }
  .story-telling-custom-section-list {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000000b5;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .story-telling-custom-section-list .overlay-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    cursor: pointer;
  }
  .story-telling-custom-section-list .story-telling-popup {
    width: 450px;
    height: 500px;
    background: white;
    border-radius: 0.5rem;
    padding: 20px;
    position: relative;
  }
  .story-telling-section-fields-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #000000c9;
    height: 100%;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  .story-telling-section-fields-wrapper {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    background: white;
    height: 100%;
    border-bottom-right-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
    box-shadow: -14px 3px 20px 0px #0e0e0e26;
  }
  .story-telling-popup-wrapper {
    overflow-y: auto;
    height: 100%;
  }
  .story-telling-custom-section-list .story-telling-popup .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
  }
  .story-telling-custom-section-list .story-telling-popup .header:first-child {
    margin-top:0px;
  }
  .story-telling-custom-section-list .story-telling-popup .header h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
  }
  .story-telling-custom-section-list .story-telling-popup .header p {
    background: #2273EC;
    border-radius: 20px;
    padding: 0px 15px;
    color: white;
    height: 1.1rem;
    display: flex;
    align-items: center;
    margin: 0;
    font-size: 0.75rem;
  }
  .story-telling-custom-section-list .story-telling-popup hr {
    border-top: 2.5px solid #e5eaf0;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item {
    text-align: center;
    cursor: pointer;
    padding: 0px;
    border: 1px solid #e1e6eb;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item:hover {
    border-color: #2273EC;
    background-color: #f7f7f7;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon {
    font-size: 0px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon::before {
    width: 100%;
    color: black;
    display: inline-block;
    border-radius: 6px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item p {
    padding: 0px;
    margin: 0px;
    font-size: 0.8rem;
    color: #555555;
    font-weight: 500;
    padding: 4px 0px;
  }
  eox-jsonform#storytelling-editor-fields {
    padding-bottom: 80px;
    height: auto;
    display: block;
  }
  eox-jsonform#storytelling-editor-fields div {
    height: auto;
  }
  .story-telling-section-fields-overflow {
    overflow-y: auto;
    height: calc(100% - 60px);
    padding: 20px;
  }
  .story-telling-section-submit-wrapper {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: 10px 0px;
    background: white;
    display: flex;
    justify-content: center;
    box-shadow: -2px -10px 10px #00000017;
    border-bottom-right-radius: 0.5rem;
  }
  .story-telling-section-submit-wrapper button {
    width: 92%;
    justify-content: center;
  }
  eox-jsonform#storytelling-editor-fields .je-form-input-label {
    text-transform: capitalize;
  }
  eox-jsonform#storytelling-editor-fields .je-object__controls {
    display: none; 
  }
  @media screen and (max-width: 1024px) {
    .switch-button {
      right: 20px;
    }
  }
  .section-line-decoration {
    background: #757575;
    z-index: 1;
    align-items: center;
    justify-content: center;
    display: flex;
    color: #ffffff;
    font-size: 12px;
    font-weight: 700;
  }
  .margin-view-overlays {
    background: #e6e6e6;
  }
`;var KT,ZNe;class XNe extends Zr{constructor(){super();yn(this,KT);this.markdown="",this.storyId=null,this.isNavigation=!1,this.dragging=!1,this.resizing=!1,this.showEditor=void 0,this.disableAutosave=!1,this.disableTextSelection=this.disableTextSelection.bind(this),this.enableTextSelection=this.enableTextSelection.bind(this)}disableTextSelection(){document.body.style.userSelect="none"}enableTextSelection(){document.body.style.userSelect=""}firstUpdated(){const n=this.querySelector(".editor-wrapper"),r=this.querySelector(".resize-handle");this.editor=this.renderRoot.querySelector("eox-jsonform#storytelling-editor"),this.showEditor==="closed"&&ZPe(this),p9t(this),XPe(this),h9t(n,r,this)}updateErrors(n){const r=this.renderRoot.querySelector(".editor-error");r&&(n.length?(r.style.display="block",r.querySelector("ul").innerHTML=n.map(i=>`<li><strong>${i.ref}</strong>: ${i.message}</li>`).join("")):r.style.display="none")}createRenderRoot(){return this}render(){customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use StoryTelling Editor");const n=this.isNavigation?"partial-height":"";return Qe`
      <div class="editor-wrapper ${n}">
        <eox-jsonform
          id="storytelling-editor"
          no-shadow
          .schema=${x9t}
          .value=${{Story:this.markdown}}
        ></eox-jsonform>
        <div class="resize-handle"></div>
        <span class="editor-saver">Saved</span>
        <div class="editor-error">
          <div class="editor-error-wrapper">
            <div class="overflow">
              <h6> Error</h6>
              <ul></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="switch-button">
        <label class="switch">
          <i class="icon view-icon"></i>
          <input
            class="switch-input"
            type="checkbox"
            @change=${gn(this,KT,ZNe)}
            checked
          />
          <span class="switch-slider round"></span>
          <i class="icon editor-icon"></i>
        </label>
      </div>
      <style>
        eox-jsonform#storytelling-editor {
          display: block;
          height: 100%;
          cursor: default;
        }
        .editor-wrapper {
          padding: 0.5rem;
        }
        .editor-toolbar:hover {
          opacity: 1;
        }
        form[data-theme="html"] .je-indented-panel {
          padding: 0 !important;
          margin: 0 !important;
          border: none !important;
        }
        .editor-wrapper .CodeMirror {
          height: 100%;
          min-height: unset;
        }
        .editor-wrapper .EasyMDEContainer {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .editor-wrapper .EasyMDEContainer .CodeMirror-scroll {
          min-height: 1000px;
        }
        .editor-toolbar button {
          box-shadow: none;
          color: #2c3e50 !important;
        }
        .editor-toolbar button:hover:not([disabled]):not(.icon),
        .editor-toolbar button:hover:not([disabled]):not(.icon) {
          box-shadow: none;
          background: #fcfcfc;
          border-color: #95a5a6;
        }
        .editor-toolbar button i {
          font-size: 17px;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
          line-height: 200%;
        }
        .editor-wrapper .cm-header-2 {
          font-size: 160%;
          line-height: 160%;
        }
        .editor-wrapper .cm-header-3 {
          font-size: 125%;
          line-height: 125%;
        }
        .editor-wrapper .cm-header-4 {
          font-size: 110%;
          line-height: 110%;
        }
        .editor-wrapper .cm-comment {
          background: rgba(0, 0, 0, 0.05);
          border-radius: 2px;
        }
        eox-jsonform form[data-theme="html"],
        eox-jsonform div[data-schemaid="root"],
        eox-jsonform div.je-indented-panel,
        eox-jsonform div.je-indented-panel > div,
        eox-jsonform div.je-indented-panel > div > div,
        eox-jsonform div.row,
        eox-jsonform div[data-schematype="string"],
        eox-jsonform div.form-control {
          height: 100%;
        }
        eox-jsonform div.form-control {
          display: flex;
          flex-direction: column;
        }
        eox-jsonform div.editor-toolbar,
        eox-jsonform div.editor-statusbar {
          flex-shrink: 1;
        }
        eox-jsonform .CodeMirror-sizer {
          padding-bottom: 100px !important;
        }
        eox-jsonform#storytelling-editor .je-form-input-label,
        eox-jsonform#storytelling-editor .je-object__controls {
          display: none !important;
        }
      </style>
    `}}KT=new WeakSet,ZNe=function(n){const r=this.renderRoot.querySelector(".editor-wrapper"),i=this.storyId?`#${this.storyId}`:"",o=document.querySelector(`eox-storytelling${i}`);n.target.checked?(r.classList.remove("editor-opacity-none"),r.classList.remove("editor-hide"),o.setAttribute("show-editor","open")):(r.classList.add("editor-hide"),o.setAttribute("show-editor","close"))},tn(XNe,"properties",{markdown:{attribute:"markdown",type:String},storyId:{attribute:"story-id",type:String},showEditor:{attribute:"show-editor",type:String},isNavigation:{attribute:"markdown",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean}});customElements.define("eox-storytelling-editor",XNe);const Am=ju({html:!0});Am.use(E7t).use(tjt);var lc,Hb,Z_,JT,KNe;class ajt extends Zr{constructor(){super();yn(this,JT);yn(this,lc);yn(this,Hb,{});yn(this,Z_,null);ao(this,lc,void 0),this.markdown="",this.markdownURL=null,this.unstyled=!1,this.noShadow=!1,this.disableAutosave=!1,this.showEditor=void 0,this.showNav=!1,this.nav=[],this.addCustomSectionIndex=-1,this.selectedCustomElement=null}static get properties(){return{markdown:{attribute:"markdown",type:String},markdownURL:{attribute:"markdown-url",type:String},nav:{state:!0,attribute:!1,type:Array},showNav:{attribute:"show-nav",type:Boolean},showEditor:{attribute:"show-editor",type:String},noShadow:{attribute:"no-shadow",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean},unstyled:{type:Boolean},addCustomSectionIndex:{type:Number,state:!0},selectedCustomElement:{type:Object,state:!0}}}async updated(n){if(n.has("markdownURL")&&this.markdownURL&&(this.markdown=await n9t(this.markdownURL)||this.markdown,this.requestUpdate()),n.has("markdown")){this.markdown&&this.dispatchEvent(new CustomEvent("changed",{detail:this.markdown}));const r=Am.render(this.markdown);if(u7t(Am.attrs.sections,this),ao(this,Hb,Am.config),typeof Gt(this,Hb).nav=="boolean"&&(this.showNav=Gt(this,Hb).nav),this.showNav&&(this.nav=Am.nav),ao(this,lc,B9t(h7t.sanitize(r,{CUSTOM_ELEMENT_HANDLING:n7t(Am),ADD_TAGS:a9t}),Am.sections,gn(this,JT,KNe).bind(this),this)),ao(this,lc,U9t(Gt(this,lc),this.nav,this.showNav,this.showEditor,this)),this.showEditor!==void 0){const o=(this.shadowRoot||this).querySelector("eox-storytelling-editor"),s=o.querySelector("eox-jsonform");this.markdown!==(s==null?void 0:s.value.Story)&&(o.markdown=this.markdown)}this.requestUpdate()}n.has("nav")&&t7t(this,".navigation a")}handleSlotChange(){const n=this.shadowRoot.querySelector("slot");if(n){const r=n.assignedNodes({flatten:!0});this.markdown=r.map(i=>i.textContent?i.textContent:"").join(""),this.requestUpdate()}}async firstUpdated(){ao(this,Z_,G0(n=>{n.detail&&(this.markdown=n.detail.Story,this.requestUpdate())},1e3)),this.disableAutosave||v9t(this),r7t(),Gt(this,lc)===void 0&&await this.waitForHtmlInitialization(),JPe(this)}async waitForHtmlInitialization(){const n=r=>new Promise(i=>setTimeout(i,r));for(;Gt(this,lc)===void 0;)await n(100)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=`${this.showEditor!==void 0?"editor-enabled":""} editor-${this.showEditor}`;return Qe`
      <slot class="slot-hide" @slotchange=${this.handleSlotChange}></slot>
      <style>
        :host { display: block; }
        .slot-hide { display: none; }
        ${!this.unstyled&&sjt}
        ${!this.unstyled&&c7t}
      </style>

      <div class="story-telling ${n}">
        <div>${Un(Gt(this,lc),()=>Qe`${Gt(this,lc)}`)}</div>
        ${Un(this.showEditor!==void 0,()=>Qe`
            <eox-storytelling-editor
              .isNavigation=${!!this.showNav}
              .storyId=${this.id}
              show-editor=${this.showEditor}
              @change=${Gt(this,Z_)}
              .markdown=${this.markdown}
              .disableAutosave=${this.disableAutosave}
            ></eox-storytelling-editor>
          `)}
      </div>

      ${Un(this.addCustomSectionIndex>-1,()=>Qe`
          <div class="story-telling-custom-section-list">
            <div
              class="overlay-popup"
              @click=${()=>{this.addCustomSectionIndex=-1,this.selectedCustomElement=null,this.requestUpdate()}}
            ></div>
            <div class="story-telling-popup">
              ${Un(this.selectedCustomElement,()=>Qe`
                  <div class="story-telling-section-fields">
                    <div
                      class="story-telling-section-fields-overlay"
                      @click=${()=>{this.selectedCustomElement=null,this.requestUpdate()}}
                    ></div>
                    <div class="story-telling-section-fields-wrapper">
                      <div class="story-telling-section-fields-overflow">
                        <eox-jsonform
                          id="storytelling-editor-fields"
                          no-shadow
                          .schema=${this.selectedCustomElement.fields}
                        ></eox-jsonform>
                      </div>
                      <div class="story-telling-section-submit-wrapper">
                        <button
                          @click=${()=>zAe(this.markdown,this.addCustomSectionIndex,this.selectedCustomElement.markdown,this.selectedCustomElement.fields,!0,this)}
                        >
                          Add Section
                        </button>
                      </div>
                    </div>
                  </div>
                `)}
              <div class="story-telling-popup-wrapper">
                ${O9t.map(r=>Qe`
                    <div class="header">
                      <h4>${r.name}</h4>
                      <p>${r.elements.length}</p>
                    </div>
                    <hr />
                    <div class="grid-container">
                      ${r.elements.map(i=>Qe`<div
                            @click=${()=>zAe(this.markdown,this.addCustomSectionIndex,i.markdown,i.fields,!1,this)}
                            class="grid-item"
                          >
                            <icon id="${i.id}"></icon>
                            <p>${i.name}</p>
                            <style>
                              icon#${i.id}::before {
                                content: url("${i.icon}");
                              }
                            </style>
                          </div>`)}
                    </div>
                  `)}
              </div>
            </div>
          </div>
        `)}
    `}}lc=new WeakMap,Hb=new WeakMap,Z_=new WeakMap,JT=new WeakSet,KNe=function(n){this.dispatchEvent(new CustomEvent("init",{detail:n}))};customElements.define("eox-storytelling",ajt);const uCe=e=>{let t;return typeof e=="string"?t=document.querySelector(e):t=e,t},ljt=`
:host {
  display: block;
}
`,ujt=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,cjt='input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}',fjt=`
:host, :root {
  --navigation-button-display: inline-flex;
}

* {
  font-family: Roboto, sans-serif;
}

${ujt}
${cjt}

[part=controls] {
  display: flex;
  align-items: center;
  gap: 8px;
}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous,
button.icon.next {
  display: var(--navigation-button-display);
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z' /%3E%3C/svg%3E");
}
`;class djt extends Zr{static get properties(){return{width:{type:Number},steps:{type:Array}}}constructor(){super(),this.width=0,this.steps=[],this.height=6,this.svgWidth=0,this._yearMarks=[],this._years=[],this._sliderTicks=[]}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize()}updated(t){t.has("steps")&&(this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize())}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}groupDatesByYear(){const t=[];return this.steps.forEach(n=>{const i=Ac(n).year();let o=t.find(s=>s.year===i);o||(o={year:i,dates:[]},t.push(o)),o.dates.push(n)}),t}preprocessDates(){const t=[];this.steps.forEach(n=>{const i=Ac(n).year();let o=t.find(s=>s.year===i);o||(o={year:i,ratio:0,dates:[]},t.push(o)),o.dates.push({date:n,isYearMarker:o.dates.length===0})});for(let n of t)n.ratio=n.dates.length/this.steps.length;return t}get sliderTicks(){return this._sliderTicks}set sliderTicks(t){this._sliderTicks=t,this.requestUpdate()}calculateYearBars(){return this._years.flatMap((r,i)=>{const o=this.steps.indexOf(r.dates[0].date)/(this.steps.length-1)*this.width,s=this.steps.indexOf(r.dates[r.dates.length-1].date)/(this.steps.length-1)*this.width,a=Math.max(0,s-o-2),l=[];return l.push(Dy`
            <rect
              key=${i}
              x=${o+2/2} // Add half the spacing to the start position
              y="0"
              width=${a}
              height="6"
              fill="#7596A2"
            ></rect>
        `),a>=30&&l.push(Dy`
                <text
                  key=${`label-${i}`}
                  x=${o+16}
                  y="26"
                  fill="#555"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${r.year}
                </text>
            `),l})}calculateIndividualTicks(){return this._years.flatMap((t,n)=>{const r=this.steps.length,i=Math.max(1,Math.floor(r/this.width));return t.dates.filter((o,s)=>s%i===0).map((o,s)=>{const l=this.steps.indexOf(o.date)/(this.steps.length-1)*this.width,u=[];return u.push(Dy`
                <line
                  key=${n}-${s}
                  x1=${l}
                  y1="0"
                  x2=${l}
                  y2=${o.isYearMarker?12:6}
                  stroke=${o.isYearMarker?"#222":"#7596A2"}
                  stroke-width="1"
                ></line>
              `),o.isYearMarker&&this.density>.03&&this.density<.5&&n%2==0&&u.push(Dy`
                  <text
                    key=${`label-${n}`}
                    x=${l+16}
                    y="30"
                    fill="#555"
                    font-size="14"
                    text-anchor="middle"
                  >
                    ${t.year}
                  </text>
                `),u})})}get density(){return this.steps.length/this.width}calculateSliderTicks(){if(this.density<=.5)return this.calculateIndividualTicks();if(this.density>.5&&this.density<10)return this.calculateYearBars();if(this.density>=10)return this.calculateDecadeBars()}calculateDecadeBars(){const r=this._years.reduce((o,s)=>{const a=Math.floor(s.year/10)*10;return o[a]||(o[a]=[]),o[a].push(...s.dates),o},{});return Object.keys(r).flatMap((o,s)=>{const a=this.steps.indexOf(r[o][0].date)/(this.steps.length-1)*this.width,l=this.steps.indexOf(r[o][r[o].length-1].date)/(this.steps.length-1)*this.width,u=Math.max(0,l-a-2),f=[];return f.push(Dy`
            <rect
              key=${`decade-${s}`}
              x=${a+2/2}
              y="0"
              width=${u}
              height="6"
              fill="#555"
            ></rect>
        `),u>=30&&f.push(Dy`
                <text
                  key=${`decade-label-${s}`}
                  x=${a+18}
                  y="26"
                  fill="#333"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${o}
                </text>
            `),f})}get lines(){const t=this.numLines>this.width/2?this.width/2:this.numLines,n=this.width/(t-1);return Array.from({length:this.numLines},(r,i)=>i*n)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){return this._yearMarks}set yearMarks(t){this._yearMarks=t,this.requestUpdate()}get years(){return this._years}set years(t){this._years=t,this.requestUpdate()}calculateYearMarks(){this._years=this.preprocessDates(),this.lines.forEach((t,n)=>{Ac(this.steps[n]).year()})}isYearLine(t){return this._yearMarks.some(r=>Math.abs(r.position-t)<1)}render(){return Qe`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.sliderTicks}
        </svg>
      </div>
    `}}customElements.define("eox-sliderticks",djt);var e3={exports:{}},hjt=e3.exports,cCe;function pjt(){return cCe||(cCe=1,function(e,t){(function(n,r){e.exports=r()})(hjt,function(){return function(n,r,i){r.prototype.dayOfYear=function(o){var s=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return o==null?s:this.add(o-s,"day")}}})}(e3)),e3.exports}var gjt=pjt();const mjt=oa(gjt);var t3={exports:{}},yjt=t3.exports,fCe;function bjt(){return fCe||(fCe=1,function(e,t){(function(n,r){e.exports=r()})(yjt,function(){var n="day";return function(r,i,o){var s=function(u){return u.add(4-u.isoWeekday(),n)},a=i.prototype;a.isoWeekYear=function(){return s(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var f,c,d,h,p=s(this),m=(f=this.isoWeekYear(),c=this.$u,d=(c?o.utc:o)().year(f).startOf("year"),h=4-d.isoWeekday(),d.isoWeekday()>4&&(h+=7),d.add(h,n));return p.diff(m,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,f){var c=this.$utils(),d=!!c.u(f)||f;return c.p(u)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,f)}}})}(t3)),t3.exports}var vjt=bjt();const xjt=oa(vjt);Ac.extend(mjt);Ac.extend(xjt);class wjt extends Zr{static get properties(){return{controlProperty:{type:String,attribute:"control-property"},controlValues:{type:Array,attribute:"control-values"},for:{type:String},layer:{type:String},slider:{type:Boolean},navigation:{type:Boolean},_originalParams:{type:Object},play:{type:Boolean,attribute:"play"},displayFormat:{type:String,attribute:"display-format"},currentStep:{type:String,attribute:"current-step"},_animationInterval:{state:!0},_controlSource:{state:!0},_isAnimationPlaying:{state:!0},_newStepIndex:{state:!0},_eoxMap:{state:!0},_width:{state:!0},unstyled:{type:Boolean}}}constructor(){super(),this.controlValues=[],this._newStepIndex=0,this.unstyled=!1,this.play=!1,this.navigation=!0,this.slider=!1,this.for="eox-map",this.layer="",this.controlProperty=void 0,this._eoxMap=void 0,this._width=300,window.addEventListener("resize",()=>{this._width=this.clientWidth}),this.displayFormat=void 0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(t){t?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=t,this.requestUpdate()}setConfig(t){this.layer=t.layer??this.layer,this.controlProperty=t.controlProperty??this.controlProperty,this.controlValues=t.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(t){const n=this.controlValues.findIndex(r=>r===t);n>-1?this._newStepIndex=n:console.error(`Unable to find step "${t}" in available times!`)}firstUpdated(){this.updateMap()}updated(t){t.has("for")&&this.updateMap()}updateMap(){const t=uCe(this.for);if(t){const n=t;this.eoxMap=n}}get eoxMap(){return this._eoxMap}set eoxMap(t){const n=this._eoxMap;this._eoxMap=t,this.requestUpdate("eoxMap",n)}_updateStep(t=1){var n;t&&(this._newStepIndex=this._newStepIndex+t,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),this.layer&&this.for&&((n=this._controlSource)==null||n.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]})),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}})))}getFlatLayersArray(t){const n=[];n.push(...t);let r=n.filter(i=>i instanceof d3);for(;r.length;){const i=[];for(let o=0,s=r.length;o<s;o++){const a=r[o].getLayers().getArray();n.push(...a),i.push(...a.filter(l=>l instanceof d3))}r=i}return n}render(){if(this.layer&&this.for){const n=uCe(this.for).map;n.once("loadend",()=>{if(!this._originalParams){const i=this.getFlatLayersArray(n.getLayers().getArray()).find(o=>o.get("id")===this.layer);this._controlSource=i.getSource(),this._originalParams=this._controlSource.getParams()}})}return Qe`
      <style>
        ${ljt}
        ${!this.unstyled&&fjt}
      </style>
      <main>
        <div id="controls" part="controls">
          ${this.navigation?Qe`
                <button
                  part="previous"
                  class="icon previous"
                  @click="${()=>this.previous()}"
                >
                  <
                </button>
              `:Xr}
          <span part="current">
            ${this.displayFormat?Ac(this.controlValues[this._newStepIndex]).format(this.displayFormat):this.controlValues[this._newStepIndex]}
          </span>
          ${this.navigation?Qe`
                <button
                  part="next"
                  class="icon next"
                  @click="${()=>this.next()}"
                >
                  >
                </button>
              `:Xr}
          ${this.play?Qe`
                <button
                  part="play"
                  class="small icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `:Xr}
        </div>
        <div>
          ${this.slider?Qe`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${t=>this._updateStep(this.controlValues.findIndex(n=>n===t.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    .width="${this._width}"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}
        </div>
      </main>
    `}}customElements.define("eox-timecontrol",wjt);const JNe=(e,t)=>{var r;let{privateFields:n=!0}=t;return n||(r=e==null?void 0:e.modules)==null||r.forEach(i=>{var o;(o=i==null?void 0:i.declarations)==null||o.forEach(s=>{Object.keys(s).forEach(a=>{Array.isArray(s[a])&&(s[a]=s[a].filter(l=>{var u;return!((u=l.privacy)!=null&&u.includes("private"))}))})})}),PBe(e)};JNe(SKe,{privateFields:!1});const _jt={parameters:{docs:{toc:!0,page:AKe,source:{transform:(e,t)=>{const n=t.undecoratedStoryFn(t);let r;const i={};return n.strings.map((o,s)=>{var f,c;const a=o.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(r=`eox-${a}`);const l=(c=(f=o.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:f[0])==null?void 0:c.replaceAll(" ",""),u=n.values[s];l&&u&&(i[r]||(i[r]={}),i[r][l]=u)}).filter(o=>o),Object.keys(i).forEach(o=>{e=e.replace(`<${o}`,`<${o}
  ${Object.keys(i[o]).map((s,a)=>`.${s}='\${${typeof i[o][s]=="string"?i[o][s]:JSON.stringify(i[o][s])}}'`).join(`
  `)}
  `)}),e}}}}},zUt=Object.freeze(Object.defineProperty({__proto__:null,default:_jt,setCustomElementsManifestWithOptions:JNe},Symbol.toStringTag,{value:"Module"}));export{Xjt as L,Zjt as a,zUt as p};
