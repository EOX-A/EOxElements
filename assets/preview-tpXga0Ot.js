const __vite__fileDeps=["./raw-Dt1HMqYc.js","./basedecoder-DvumDe3Y.js","./lzw-DpvbRwG5.js","./jpeg-CdeCw_eT.js","./deflate-CUkHh1nh.js","./pako.esm-CPws4d4z.js","./packbits-DQnG8s9w.js","./lerc-CemBEwqn.js","./_commonjsHelpers-BosuxZz1.js","./chunk-GKNNPQCW-BkHQSocK.js","./jsx-runtime--26OcTxz.js","./index-BLgStI3F.js","./index-8CGhsCZi.js","./index-CkThVCcA.js","./iframe-O80jMfOe.js","./index-CncbU-wR.js","./index-DrFu-skq.js","./lit-element-DBwSto7d.js","./directive-helpers-wF05HaIw.js","./index-CBTDJjUK.js","./webimage-BcnuJlio.js","./decoder-Ddo2r026.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var bDe=Object.defineProperty;var aue=i=>{throw TypeError(i)};var _De=(i,e,t)=>e in i?bDe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var We=(i,e,t)=>_De(i,typeof e!="symbol"?e+"":e,t),ZA=(i,e,t)=>e.has(i)||aue("Cannot "+t);var _i=(i,e,t)=>(ZA(i,e,"read from private field"),t?t.call(i):e.get(i)),ar=(i,e,t)=>e.has(i)?aue("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),ko=(i,e,t,r)=>(ZA(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),Es=(i,e,t)=>(ZA(i,e,"access private method"),t);import{s as xDe}from"./chunk-GKNNPQCW-BkHQSocK.js";import{j as Jl}from"./jsx-runtime--26OcTxz.js";import{useMDXComponents as _0e}from"./index-8CGhsCZi.js";import{e as wDe,f as EDe,h as SDe,P as CDe,i as TDe,j as ADe,k as kDe,l as yE}from"./index-CkThVCcA.js";import{g as $o,c as Rn,a as VL}from"./_commonjsHelpers-BosuxZz1.js";import{T as mr,s as Lr,x as Qe,i as DDe,u as MDe,f as LDe,w as O0,j as RDe,b as lue}from"./lit-element-DBwSto7d.js";import{m as WL,p as IDe,v as Xp,r as _1,h as KA,f as ODe}from"./directive-helpers-wF05HaIw.js";import{n as uue}from"./index-CBTDJjUK.js";import{_ as ip}from"./iframe-O80jMfOe.js";const cue={duration:750},hue={type:"FeatureCollection",features:[]},PDe="1.0.0",FDe="",NDe=[{kind:"javascript-module",path:"elements/drawtools/src/main.js",declarations:[{kind:"class",description:"Manage drawn features on a map",name:"EOxDrawTools",members:[{kind:"field",name:"#eoxMap",privacy:"private",type:{text:"EOxMap"}},{kind:"field",name:"#olMap",privacy:"private",type:{text:"Map"}},{kind:"field",name:"#geoJSON",privacy:"private",type:{text:"string"}},{kind:"method",name:"handleStartDrawing"},{kind:"method",name:"handleDiscardDrawing"},{kind:"method",name:"handleFeatureChange",parameters:[{name:"text",description:"The string representation of the features to be parsed.",type:{text:"string"}},{name:"replaceFeatures",default:"false",description:"A boolean flag indicating whether to replace the existing features.",type:{text:"boolean"}}]},{kind:"method",name:"handleFilesChange",parameters:[{name:"evt",description:"The event object from the file input interaction.",type:{text:"DragEvent | Event"}}]},{kind:"method",name:"onModifyEnd"},{kind:"method",name:"updateGeoJSON",description:"Update #geoJSON with stringify feature."},{kind:"method",name:"emitDrawnFeatures",description:"Triggers different events when the drawing of a shape is completed."},{kind:"field",name:"allowModify",privacy:"public",type:{text:"boolean"},description:"Allow modifying the drawn feature(s)",default:"false",attribute:"allow-modify"},{kind:"field",name:"for",privacy:"public",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',attribute:"for"},{kind:"field",name:"currentlyDrawing",privacy:"public",type:{text:"boolean"},description:"Whether the user is currently in the process of drawing or not",default:"false"},{kind:"field",name:"draw",privacy:"public",type:{text:"Draw"},description:"The current native OpenLayers `draw` interaction",default:"null"},{kind:"field",name:"drawLayer",privacy:"public",type:{text:"default<default>"},description:"The current native OpenLayers draw `layer`",default:"null"},{kind:"field",name:"drawnFeatures",privacy:"public",type:{text:"Array<Feature>"},description:"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.",default:"[]"},{kind:"field",name:"modify",privacy:"public",type:{text:"Modify"},description:"The current native OpenLayers `modify` interaction",default:"null"},{kind:"field",name:"multipleFeatures",privacy:"public",type:{text:"boolean"},description:"Allow adding more than one feature at a time",default:"false",attribute:"multiple-features"},{kind:"field",name:"importFeatures",privacy:"public",type:{text:"boolean"},description:"Allow import features using drag-drop and upload button",default:"false",attribute:"import-features"},{kind:"field",name:"showEditor",privacy:"public",type:{text:"boolean"},description:"Show geo-json editor for draw tool",default:"false",attribute:"show-editor"},{kind:"field",name:"showList",privacy:"public",type:{text:"boolean"},description:"Show list of features",default:"false",attribute:"show-list"},{kind:"field",name:"type",privacy:"public",type:{text:'"Polygon" | "Point" | "LineString" | "Circle" | "Box"'},description:"Type of the drawn feature",default:'"Polygon"',attribute:"type"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"noShadow"}],events:[{name:"drawupdate",type:{text:"Array<Feature>"},description:"Fires whenever features are added, modified or discarded, where the event detail\nis the `drawnFeatures` array"}],attributes:[{name:"allow-modify",type:{text:"boolean"},description:"Allow modifying the drawn feature(s)",default:"false",fieldName:"allowModify"},{name:"for",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',fieldName:"for"},{name:"multiple-features",type:{text:"boolean"},description:"Allow adding more than one feature at a time",default:"false",fieldName:"multipleFeatures"},{name:"import-features",type:{text:"boolean"},description:"Allow import features using drag-drop and upload button",default:"false",fieldName:"importFeatures"},{name:"show-editor",type:{text:"boolean"},description:"Show geo-json editor for draw tool",default:"false",fieldName:"showEditor"},{name:"show-list",type:{text:"boolean"},description:"Show list of features",default:"false",fieldName:"showList"},{name:"noShadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"type",type:{text:'"Polygon" | "Point" | "LineString" | "Circle" | "Box"'},description:"Type of the drawn feature",default:'"Polygon"',fieldName:"type"},{name:"unstyled",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-drawtools",customElement:!0}],exports:[{kind:"js",name:"EOxDrawTools",declaration:{name:"EOxDrawTools",module:"elements/drawtools/src/main.js"}},{kind:"custom-element-definition",name:"eox-drawtools",declaration:{name:"EOxDrawTools",module:"elements/drawtools/src/main.js"}}]},{kind:"javascript-module",path:"elements/geosearch/src/main.js",declarations:[{kind:"class",description:"",name:"EOxGeoSearch",members:[{kind:"field",name:"#eoxMap",privacy:"private",type:{text:"EOxMap"}},{kind:"method",name:"fetchRemoteData",parameters:[{name:"url"}]},{kind:"method",name:"onInput",parameters:[{name:"e"}]},{kind:"method",name:"onInputBlur"},{kind:"method",name:"onButtonClick"},{kind:"method",name:"getFlexDirection"},{kind:"method",name:"getResultsDirection"},{kind:"method",name:"getVerticalAlign"},{kind:"method",name:"getMarginDirection",parameters:[{name:"direction"}]},{kind:"method",name:"handleSelect",parameters:[{name:"event"}]},{kind:"field",name:"_data",privacy:"private",description:"Internal storage of OpenCage API data after a successful API request.",type:{text:"array"},default:"[]"},{kind:"field",name:"_isListVisible",privacy:"private",description:"Whether or not the list dropdown is visible.",type:{text:"boolean"},default:"false"},{kind:"field",name:"_isInputVisible",privacy:"private",description:"Whether or not the input field is visible.",type:{text:"boolean"},default:"false"},{kind:"field",name:"_query",privacy:"private",description:"The search query, which is bound to the input field.",type:{text:"string"},default:'""'},{kind:"field",name:"for",privacy:"public",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',attribute:"for"},{kind:"field",name:"listDirection",type:{text:"string"},default:'"right"'},{kind:"field",name:"resultsDirection",privacy:"public",type:{text:"string"},description:"The direction of the results box relative to the input, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",default:'"down"',attribute:"results-direction"},{kind:"field",name:"endpoint",privacy:"public",type:{text:"string"},description:"The OpenCage API endpoint to use for the search, including the key but without the query parameter.",attribute:"endpoint"},{kind:"field",name:"queryParameter",privacy:"public",type:{text:"string"},description:"The name of the query parameter to use for the search query in the endpoint URI.",attribute:"queryParameter"},{kind:"field",name:"button",privacy:"public",type:{text:"boolean"},description:`Whether or not to enable button mode, which hides and shows the input field
similar to how a modal works.`,attribute:"button"},{kind:"field",name:"interval",privacy:"public",type:{text:"number"},description:"Set a custom interval for the debounce function.",attribute:"interval"},{kind:"field",name:"small",privacy:"public",type:{text:"boolean"},description:"Enables a smaller version of the button for use in map controls.",attribute:"small"},{kind:"field",name:"label",privacy:"public",type:{text:"string"},description:"Which text to use for the button if it is enabled.",attribute:"label"},{kind:"field",name:"direction",privacy:"public",type:{text:"string"},description:"The direction of the search input relative to the button, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",attribute:"list-direction"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},attribute:"unstyled"}],events:[{name:"geosearchSelect",type:{text:"CustomEvent"},description:"The select event, including the details of the selected item"}],attributes:[{name:"endpoint",type:{text:"string"},description:"The OpenCage API endpoint to use for the search, including the key but without the query parameter.",fieldName:"endpoint"},{name:"for",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',fieldName:"for"},{name:"queryParameter",type:{text:"string"},description:"The name of the query parameter to use for the search query in the endpoint URI.",fieldName:"queryParameter"},{name:"button",type:{text:"boolean"},description:`Whether or not to enable button mode, which hides and shows the input field
similar to how a modal works.`,fieldName:"button"},{name:"interval",type:{text:"number"},description:"Set a custom interval for the debounce function.",fieldName:"interval"},{name:"small",type:{text:"boolean"},description:"Enables a smaller version of the button for use in map controls.",fieldName:"small"},{name:"label",type:{text:"string"},description:"Which text to use for the button if it is enabled.",fieldName:"label"},{name:"list-direction",type:{text:"string"},description:"The direction of the search input relative to the button, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",fieldName:"direction"},{name:"results-direction",type:{text:"string"},description:"The direction of the results box relative to the input, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",default:'"down"',fieldName:"resultsDirection"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-geosearch",customElement:!0},{kind:"class",description:"",name:"EOxGeoSearchItem",members:[{kind:"field",name:"item",privacy:"public",type:{text:"object"},attribute:"item"},{kind:"field",name:"onClick",privacy:"public",type:{text:"function"},attribute:"onClick"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},attribute:"unstyled"}],attributes:[{name:"item",type:{text:"object"},fieldName:"item"},{name:"onClick",type:{text:"function"},fieldName:"onClick"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-geosearch-item",customElement:!0}],exports:[{kind:"custom-element-definition",name:"eox-geosearch",declaration:{name:"EOxGeoSearch",module:"elements/geosearch/src/main.js"}},{kind:"custom-element-definition",name:"eox-geosearch-item",declaration:{name:"EOxGeoSearchItem",module:"elements/geosearch/src/main.js"}},{kind:"js",name:"EOxGeoSearch",declaration:{name:"EOxGeoSearch",module:"elements/geosearch/src/main.js"}}]},{kind:"javascript-module",path:"elements/jsonform/src/main.js",declarations:[{kind:"class",description:"",name:"EOxJSONForm",members:[{kind:"field",name:"#editor",privacy:"private",type:{text:"{[key: string]: any}"},default:"null",description:"editor instance generated through - JSONEditor"},{kind:"field",name:"editor",description:"Getter for the JSONEditor instance",readonly:!0},{kind:"field",name:"schema",privacy:"public",type:{text:"object"},description:"Setter for the JSON schema used to render the form",return:{type:{text:"JsonSchema | String"}},parameters:[{name:"newSchema",type:{text:"JsonSchema"}}]},{kind:"field",name:"value",privacy:"public",type:{text:"object"},description:"Setter for the default values to fill the form",parameters:[{name:"newVal",type:{text:"JsonSchema"}}]},{kind:"method",name:"#emitValue",privacy:"private",description:"Value object has been changed"},{kind:"method",name:"#dispatchEvent",privacy:"private",description:"Dispatch same function for multiple event type"},{kind:"field",name:"options",privacy:"public",type:{text:"object"},description:"Default values for the form editor",default:"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"no-shadow"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"}],events:[{name:"change",type:{text:"CustomEvent"}}],attributes:[{name:"no-shadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-jsonform",customElement:!0}],exports:[{kind:"js",name:"EOxJSONForm",declaration:{name:"EOxJSONForm",module:"elements/jsonform/src/main.js"}},{kind:"custom-element-definition",name:"eox-jsonform",declaration:{name:"EOxJSONForm",module:"elements/jsonform/src/main.js"}}]},{kind:"javascript-module",path:"elements/layercontrol/src/main.js",declarations:[{kind:"class",description:`Display layers and groups of a connected OpenLayers map

## Layer properties
In order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. \`layer.set(property, value)\`).

#### \`id?: string\`
The layer id. Not required but recommended. Can also be any other layer property (defined via the \`idProperty\` property or \`id-property\`attribute - see API).

#### \`title?: string\`
The title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the \`titleProperty\` property or \`title-property\`attribute - see API).

#### \`layerControlHide?: Boolean\`
Completely hide a layer from the layer control.

#### \`layerControlOptional?: Boolean\`
Initially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.

#### \`layerControlExclusive?: Boolean\`
Make layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.

#### \`layerControlExpand?: Boolean\`
Pre-expand a layer dropdown so that it is always open when the component initializes.

#### \`layerControlToolsExpand?: Boolean\`
Pre-expand the layer tools so they are visible when the component initializes.

#### \`layerConfig?: Object\`
Configuration options for the layer (displayed in the layer tools' "config" tab)`,name:"EOxLayerControl",members:[{kind:"field",name:"#eoxMap",privacy:"private",description:"Instance of `eox-map` which is a wrapper for the OL",type:{text:"EOxMap"}},{kind:"method",name:"#handleLayerControlLayerListChange",privacy:"private",parameters:[{name:"evt",type:{text:"CustomEvent & {target: Element}"}}],description:"Event handler for changes in the layer list"},{kind:"field",name:"#styleEOX",privacy:"private",default:"`* { font-family: Roboto, sans-serif; }`"},{kind:"field",name:"for",privacy:"public",type:{text:"String"},description:"Query selector of an eox-map or another DOM element containing an OL map proeprty",default:'"eox-map"',attribute:"for"},{kind:"field",name:"idProperty",privacy:"public",type:{text:"String"},description:"Layer id property",default:'"id"',attribute:"id-property"},{kind:"field",name:"map",privacy:"public",type:{text:"Map"},description:"The native OL map instance",default:"null"},{kind:"field",name:"titleProperty",privacy:"public",type:{text:"String"},description:"Layer title property",default:'"title"',attribute:"title-property"},{kind:"field",name:"showLayerZoomState",privacy:"public",type:{text:"Boolean"},description:"Show layer state based on zoom level or not",default:"false",attribute:"show-layer-zoom-state"},{kind:"field",name:"tools",privacy:"public",type:{text:"Array<String>"},description:"Layer tools",default:'["info", "opacity", "config", "remove", "sort"]'},{kind:"field",name:"addExternalLayers",privacy:"public",type:{text:"Boolean"},description:"Enable-disable external layer",default:"false"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"styleOverride",privacy:"public",type:{text:"String"},description:"Overrides elements current CSS.",default:'""',attribute:"styleOverride"}],events:[{name:"layerchange",type:{text:"CustomEvent"},description:"A generic layer change event; could be a layer visibility, group length updates and others.\nPasses the changed layer in the `detail`."}],attributes:[{name:"for",type:{text:"String"},description:"Query selector of an eox-map or another DOM element containing an OL map proeprty",default:'"eox-map"',fieldName:"for"},{name:"id-property",type:{text:"String"},description:"Layer id property",default:'"id"',fieldName:"idProperty"},{name:"title-property",type:{text:"String"},description:"Layer title property",default:'"title"',fieldName:"titleProperty"},{name:"show-layer-zoom-state",type:{text:"Boolean"},description:"Show layer state based on zoom level or not",default:"false",fieldName:"showLayerZoomState"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"},{name:"styleOverride",type:{text:"String"},description:"Overrides elements current CSS.",default:'""',fieldName:"styleOverride"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-layercontrol",customElement:!0}],exports:[{kind:"js",name:"EOxLayerControl",declaration:{name:"EOxLayerControl",module:"elements/layercontrol/src/main.js"}},{kind:"custom-element-definition",name:"eox-layercontrol",declaration:{name:"EOxLayerControl",module:"elements/layercontrol/src/main.js"}}]},{kind:"javascript-module",path:"elements/layout/src/main.js",declarations:[{kind:"class",description:"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\n- `eox-layout`: the container holding all the items\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight)",name:"EOxLayout",members:[],attributes:[{name:"gap"}],superclass:{name:"HTMLElement"},tagName:"eox-layout",customElement:!0},{kind:"class",description:"",name:"EOxLayoutItem",members:[],attributes:[{name:"x"},{name:"y"},{name:"w"},{name:"h"}],superclass:{name:"HTMLElement"},tagName:"eox-layout-item",customElement:!0}],exports:[{kind:"js",name:"EOxLayout",declaration:{name:"EOxLayout",module:"elements/layout/src/main.js"}},{kind:"js",name:"EOxLayoutItem",declaration:{name:"EOxLayoutItem",module:"elements/layout/src/main.js"}},{kind:"custom-element-definition",name:"eox-layout",declaration:{name:"EOxLayout",module:"elements/layout/src/main.js"}},{kind:"custom-element-definition",name:"eox-layout-item",declaration:{name:"EOxLayoutItem",module:"elements/layout/src/main.js"}}]},{kind:"javascript-module",path:"elements/storytelling/src/main.js",declarations:[{kind:"class",description:"Manage drawn features on a map",name:"EOxStoryTelling",members:[{kind:"field",name:"#html",privacy:"private",description:"Generated HTML string using markdown",type:{text:"String"},default:"undefined"},{kind:"field",name:"#config",privacy:"private",type:{text:"Object"},default:"{}",description:"Basic config"},{kind:"field",name:"#debounceUpdateMarkdown",privacy:"private",type:{text:"Object"},default:"null",description:"Debounce update markdown"},{kind:"method",name:"#dispatchInitEvent",privacy:"private",parameters:[{name:"element",description:"Dom element",type:{text:"Element"}}]},{kind:"method",name:"handleSlotChange",description:"Handles changes to the slot's content, updating the component's internal state."},{kind:"method",name:"waitForHtmlInitialization"},{kind:"field",name:"markdown",privacy:"public",type:{text:"String"},description:"Markdown Content",default:'""',attribute:"markdown"},{kind:"field",name:"markdownURL",privacy:"public",type:{text:"String"},description:"Markdown Content URL",default:"null",attribute:"markdown-url"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"no-shadow"},{kind:"field",name:"showEditor",privacy:"public",type:{text:'String | "closed" | undefined'},description:"Enable or disable editor",default:"undefined",attribute:"show-editor"},{kind:"field",name:"showNav",privacy:"public",type:{text:"Boolean"},description:"Enable or disable navigation",default:"false",attribute:"show-nav"},{kind:"field",name:"nav",privacy:"public",type:{text:"Array<Object>"},description:"List of items in navigation",default:"[]"},{kind:"field",name:"addCustomSectionIndex",privacy:"public",type:{text:"Number"},description:"custom section index",default:"-1",attribute:"addCustomSectionIndex"},{kind:"field",name:"selectedCustomElement",privacy:"public",type:{text:"Object | null"},description:"Selected custom element object",default:"null",attribute:"selectedCustomElement"}],events:[{name:"init",type:{text:"CustomEvent"}}],attributes:[{name:"markdown",type:{text:"String"},description:"Markdown Content",default:'""',fieldName:"markdown"},{name:"markdown-url",type:{text:"String"},description:"Markdown Content URL",default:"null",fieldName:"markdownURL"},{name:"show-nav",type:{text:"Boolean"},description:"Enable or disable navigation",default:"false",fieldName:"showNav"},{name:"show-editor",type:{text:'String | "closed" | undefined'},description:"Enable or disable editor",default:"undefined",fieldName:"showEditor"},{name:"no-shadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"},{name:"addCustomSectionIndex",type:{text:"Number"},description:"custom section index",default:"-1",fieldName:"addCustomSectionIndex"},{name:"selectedCustomElement",type:{text:"Object | null"},description:"Selected custom element object",default:"null",fieldName:"selectedCustomElement"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-storytelling",customElement:!0}],exports:[{kind:"js",name:"EOxStoryTelling",declaration:{name:"EOxStoryTelling",module:"elements/storytelling/src/main.js"}},{kind:"custom-element-definition",name:"eox-storytelling",declaration:{name:"EOxStoryTelling",module:"elements/storytelling/src/main.js"}}]},{kind:"javascript-module",path:"elements/map/main.ts",declarations:[{kind:"class",description:'The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\n\nBasic usage:\n\n```\nimport "@eox/map"\n\n<eox-map [...]></eox-map>\n```\n\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\nrequired to import the `advanced-layers-and-sources` plugin.\n\nIncluded in the base bundle:\n- Formats: `GeoJSON`, `MVT`\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\n\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\n\n```\nimport "@eox/map/dist/eox-map-advanced-layers-and-sources.js"\nimport "@eox/map/dist/eox-map.js"\n\n<eox-map [...]></eox-map>\n```\nIncluded in the advanced plugin bundle:\n- Layers:\n  - All OpenLayers layer types\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\n- Sources:\n  - All OpenLayers source types\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)',name:"EOxMap",members:[{kind:"field",name:"_center",type:{text:"Coordinate"},privacy:"private",default:"[0, 0]"},{kind:"field",name:"center",description:`Map center, always in the same projection as the view.
when setting the map center,`},{kind:"field",name:"_zoom",type:{text:"number"},privacy:"private",default:"0"},{kind:"field",name:"zoom",description:`Map center, always in the same projection as the view.
when setting the map center,`},{kind:"field",name:"_zoomExtent",type:{text:'import("ol/extent").Extent'},privacy:"private"},{kind:"field",name:"zoomExtent",description:"extent to zoom to",type:{text:"Extent"}},{kind:"field",name:"_controls",type:{text:"controlDictionary"},privacy:"private"},{kind:"field",name:"controls",description:"Map controls, in JSON format"},{kind:"field",name:"_layers",type:{text:"Array<EoxLayer>"},privacy:"private"},{kind:"field",name:"layers",description:"The map layers, in eox-map JSON format!",type:{text:"Array<EoxLayer>"}},{kind:"field",name:"_preventScroll",type:{text:"boolean"},privacy:"private"},{kind:"field",name:"preventScroll",description:`Prevent accidental scrolling / drag-pan of the map.
Scrolling only enabled while pressing the platform modifier key (ctrl/cmd).`,type:{text:"Boolean"},attribute:"prevent-scroll"},{kind:"field",name:"_config",type:{text:"ConfigObject"},privacy:"private"},{kind:"field",name:"config",description:"Config object, including `controls`, `layers` and `view`.\nAlternative way of defining the map config."},{kind:"field",name:"_animationOptions",type:{text:"EOxAnimationOptions"},privacy:"private",default:"{}"},{kind:"field",name:"animationOptions",description:"animationOptions",type:{text:"AnimationOptions"}},{kind:"field",name:"_projection",type:{text:"ProjectionLike"},privacy:"private"},{kind:"field",name:"projection",type:{text:"ProjectionLike"},description:"projection of the map view as SRS-identifier (e.g. EPSG:4326)",attribute:"projection"},{kind:"field",name:"sync",type:{text:"string"},description:"Sync map with another map view by providing its query selector",attribute:"sync"},{kind:"field",name:"map",type:{text:"Map"},default:"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })",description:`The native OpenLayers map object.
See [https://openlayers.org/en/latest/apidoc/](https://openlayers.org/en/latest/apidoc/)`},{kind:"field",name:"interactions",type:{text:"{ [index: string]: Draw | Modify }"},default:"{}",description:"Dictionary of ol interactions associated with the map."},{kind:"field",name:"selectInteractions",type:{text:"{ [index: string]: EOxSelectInteraction }"},default:"{}",description:"Dictionary of select interactions."},{kind:"field",name:"mapControls",type:{text:"{ [index: string]: Control }"},default:"{}",description:"Dictionary of ol controls associated with the map."},{kind:"method",name:"_animateToState",privacy:"private",description:`animates to current definition.
will animate to zoom/center if animationOptions are set`},{kind:"field",name:"addOrUpdateLayer",description:`Creates or updates an existing layer
will update an layer if the ID already exists`,parameters:[{description:"EoxLayer JSON definition",name:"json"}],return:{type:{text:""}}},{kind:"field",name:"removeInteraction",description:"Removes a given ol-interaction from the map. Layer have to be removed seperately",parameters:[{description:"id of the interaction",name:"id"}]},{kind:"field",name:"removeSelect",description:"Removes a given EOxSelectInteraction from the map.",parameters:[{description:"id of the interaction",name:"id"}]},{kind:"field",name:"removeControl",description:"Removes a given control from the map.",parameters:[{description:"id of the control element",name:"id"}]},{kind:"field",name:"getLayerById",description:'Gets an OpenLayers-Layer by its "id"',parameters:[{description:"id of the layer",name:"id"}]},{kind:"field",name:"parseFeature",description:`Converts an array of OpenLayers Feature objects into a GeoJSON object.
This function utilizes the OpenLayers GeoJSON format writer to serialize`,parameters:[{description:"The array of features to be serialized.",name:"features"}],return:{type:{text:""}}},{kind:"field",name:"parseTextToFeature",description:"Parses a text representation of geographic features and adds them to a vector layer.",parameters:[{description:"The string representation of the features to be parsed.",name:"text"},{description:"The vector layer to which the parsed features will be added.",name:"vectorLayer"},{description:"A boolean flag indicating whether to replace the existing features in the vector layer.",name:"replaceFeatures"}]},{kind:"field",name:"registerProjectionFromCode",default:"registerProjectionFromCode"},{kind:"field",name:"registerProjection",default:"registerProjection"},{kind:"field",name:"getFlatLayersArray",default:"getFlatLayersArray",description:`Gets all map layers (including groups and nested layers)
as flat array`},{kind:"method",name:"buffer",parameters:[{name:"extent",type:{text:"Extent"}},{name:"value",type:{text:"number"}}],description:"Return extent increased by the provided value.",return:{type:{text:"Extent"}}}],events:[{name:"loadend",type:{text:"CustomEvent"},description:`OpenLayers map has finished loading, passes the map instance as detail.
For all other native events, attach an event listener to the map instance directly`},{name:"mapmounted",type:{text:"CustomEvent"}}],attributes:[{name:"prevent-scroll",description:`Prevent accidental scrolling / drag-pan of the map.
Scrolling only enabled while pressing the platform modifier key (ctrl/cmd).`,type:{text:"Boolean"},fieldName:"preventScroll"},{name:"projection",type:{text:"ProjectionLike"},description:"projection of the map view as SRS-identifier (e.g. EPSG:4326)",fieldName:"projection"},{name:"sync",type:{text:"string"},description:"Sync map with another map view by providing its query selector",fieldName:"sync"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-map",customElement:!0}],exports:[{kind:"js",name:"EOxMap",declaration:{name:"EOxMap",module:"elements/map/main.ts"}},{kind:"custom-element-definition",name:"eox-map",declaration:{name:"EOxMap",module:"elements/map/main.ts"}}]},{kind:"javascript-module",path:"elements/chart/src/main.ts",declarations:[{kind:"class",description:"",name:"EOxChart",members:[{kind:"field",name:"shadowRoot",type:{text:"ShadowRoot"}},{kind:"field",name:"chart",type:{text:"Chart"},description:`The native chart.js object.
See [https://www.chartjs.org/docs/latest/developers/api.html](https://www.chartjs.org/docs/latest/developers/api.html)`},{kind:"field",name:"setData",type:{text:"(body: { datasets: ChartDataset[] }) => void"},description:"Set chart data, TODO description"},{kind:"field",name:"setOptions",type:{text:"(body: object) => void"}},{kind:"field",name:"setSignalsData",type:{text:"(body: object) => void"}},{kind:"field",name:"setSignalsEndpoint",type:{text:`(options: {
    source: string;
    endpoint: string;
    active: string[];
    features: string[][];
    geometry: object;
    timeInterval: object;
    startTime?: string;
    endTime?: string;
  }) => void`}},{kind:"field",name:"setSignalsGeometry",type:{text:"(geometry: object) => void"}},{kind:"field",name:"setGeoDBEndpoint",type:{text:`(options: {
    source: string;
    endpoint: string;
    active: string[];
    features: string[][];
    geometry: object;
    timeInterval: object;
    startTime?: string;
    endTime?: string;
  }) => void`}}],superclass:{name:"HTMLElement"},tagName:"eox-chart",customElement:!0}],exports:[{kind:"js",name:"EOxChart",declaration:{name:"EOxChart",module:"elements/chart/src/main.ts"}},{kind:"custom-element-definition",name:"eox-chart",declaration:{name:"EOxChart",module:"elements/chart/src/main.ts"}}]},{kind:"javascript-module",path:"elements/itemfilter/src/main.ts",declarations:[{kind:"class",description:"",name:"ElementConfig",members:[{kind:"field",name:"aggregateResults",type:{text:"string | undefined"},privacy:"public",default:"undefined",description:"Aggregate results by a property key"},{kind:"field",name:"autoSpreadSingle",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:`Automatically spread single item summaries
removing the summary header`},{kind:"field",name:"enableHighlighting",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:"Highlighting of search result character matches"},{kind:"field",name:"externalFilter",type:{text:"(input: string, filters: object[]) => string | undefined"},privacy:"public",description:`Use an external search endpoint instead of fuse search.
Passed properties: input string, filters object`},{kind:"field",name:"filterProperties",type:{text:"Array<FilterObject> | undefined"},privacy:"public",default:"[]",description:"The filter properties.",parameters:[{name:"filterProperties"}]},{kind:"field",name:"fuseConfig",type:{text:"object | undefined"},privacy:"public",description:"Native fuse.js config override"},{kind:"field",name:"inlineMode",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:`Inline mode, for rendering the itemfilter in avery condensed space.
Expexts showResults to be false`},{kind:"field",name:"matchAllWhenEmpty",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Show all result items if nothing is input by the user"},{kind:"field",name:"onFilter",type:{text:"Function | undefined"},privacy:"public",description:"Callback that is triggered on item search",return:{type:{text:""}}},{kind:"field",name:"onSelect",type:{text:"Function | undefined"},privacy:"public",description:"Callback that is triggered on item selection",return:{type:{text:""}}},{kind:"field",name:"showResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Display results list"},{kind:"field",name:"titleProperty",type:{text:"string"},privacy:"public",default:'"title"',description:"The property of the result items used for display"},{kind:"field",name:"expandMultipleFilters",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Allow opening multiple filter accordeons in parallel"},{kind:"field",name:"expandResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Initialize result accordeons expanded"},{kind:"field",name:"expandMultipleResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Allow opening multiple result accordeons in parallel"}]},{kind:"class",description:"",name:"EOxItemFilter",members:[{kind:"field",name:"_resultAggregation",type:{text:"Array<string>"},default:"[]"},{kind:"field",name:"_items",type:{text:"Record<string, unknown>[]"},default:"[]"},{kind:"field",name:"filters",type:{text:"{ [key: string]: FilterObject }"},privacy:"public",default:"{}"},{kind:"field",name:"results",type:{text:"Record<string, unknown>[]"},privacy:"public"},{kind:"field",name:"selectedResult",type:{text:"Item"},privacy:"public"},{kind:"field",name:"items"},{kind:"field",name:"config"},{kind:"field",name:"_config",privacy:"private",default:"new ElementConfig()"},{kind:"field",name:"apply",attribute:"apply"},{kind:"field",name:"styleOverride",type:{text:"string"}},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"method",name:"search",privacy:"private"},{kind:"method",name:"aggregateResults",parameters:[{name:"items",type:{text:"FilterObject[]"}},{name:"property",type:{text:"string"}}]},{kind:"method",name:"createItemList",parameters:[{name:"aggregationProperty",type:{text:"string"}}]},{kind:"method",name:"sortResults",parameters:[{name:"items",type:{text:"Record<string, unknown>[]"}}]},{kind:"method",name:"resetFilters"},{kind:"method",name:"toggleAccordion",parameters:[{name:"event",type:{text:"CustomEvent"}}]}],attributes:[{name:"apply",fieldName:"apply"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"TemplateElement",module:"/utils/templateElement"},tagName:"eox-itemfilter",customElement:!0}],exports:[{kind:"js",name:"ElementConfig",declaration:{name:"ElementConfig",module:"elements/itemfilter/src/main.ts"}},{kind:"js",name:"EOxItemFilter",declaration:{name:"EOxItemFilter",module:"elements/itemfilter/src/main.ts"}},{kind:"custom-element-definition",name:"eox-itemfilter",declaration:{name:"EOxItemFilter",module:"elements/itemfilter/src/main.ts"}}]},{kind:"javascript-module",path:"elements/stacinfo/src/main.ts",declarations:[{kind:"class",description:`### Introduction
Working with STAC catalogs, collections and items often times requires
to fetch a JSON file, parse its contents and display some of its fields
in some formatted way. To make these steps reusable, the \`eox-stacinfo\`
element offers a set of functionalities:
- **automatically fetch a STAC file** as soon as the element loads
- offer a **property whitelist** functionality to choose which properties to display
- display the properties in **configurable sections** (header, featured, footer)
- allow to **override** any property display for application-specific custom needs

The use case for this element is alongside a map which displays STAC files
or in a catalog browsing scenario where a quick look at the most important properties
is needed.

#### Technology
Under the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.`,name:"EOxStacInfo",members:[{kind:"field",name:"allowHtml",type:{text:"boolean"},description:"Allow HTML rendering in properties (such as description)",attribute:"allow-html"},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"field",name:"for",type:{text:"string"},attribute:"for"},{kind:"field",name:"header",type:{text:"Array<string>"},default:"[]",attribute:"header"},{kind:"field",name:"tags",type:{text:"Array<string>"},default:"[]",attribute:"tags"},{kind:"field",name:"featured",type:{text:"Array<string>"},default:"[]",attribute:"featured"},{kind:"field",name:"footer",type:{text:"Array<string>"},default:"[]",attribute:"footer"},{kind:"field",name:"styleOverride",type:{text:"string"},default:'""',attribute:"style-override"},{kind:"field",name:"stacInfo",type:{text:"Array<typeof STAC>"},default:"[]"},{kind:"field",name:"stacProperties",type:{text:"Array<typeof STAC>"},privacy:"public"},{kind:"field",name:"fetchStac"},{kind:"field",name:"parseStac"},{kind:"method",name:"buildProperties",parameters:[{name:"stacArray",type:{text:"Array<typeof STAC>"}}]}],attributes:[{name:"allow-html",type:{text:"boolean"},description:"Allow HTML rendering in properties (such as description)",fieldName:"allowHtml"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"},{name:"for",type:{text:"string"},fieldName:"for"},{name:"header",type:{text:"Array<string>"},default:"[]",fieldName:"header"},{name:"tags",type:{text:"Array<string>"},default:"[]",fieldName:"tags"},{name:"properties",type:{text:"Array<string>"},default:"[]",fieldName:"properties"},{name:"featured",type:{text:"Array<string>"},default:"[]",fieldName:"featured"},{name:"footer",type:{text:"Array<string>"},default:"[]",fieldName:"footer"},{name:"style-override",type:{text:"string"},default:'""',fieldName:"styleOverride"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-stacinfo",customElement:!0},{kind:"class",description:`For some property renderings, we want a separate
custom element with its own shadow root, so that
the general styling does not affect it (except globals
like fonts, variables etc.)`,name:"EOxStacInfoShadow",members:[{kind:"field",name:"content",type:{text:"null"},attribute:"content"}],attributes:[{name:"content",type:{text:"null"},fieldName:"content"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-stacinfo-shadow",customElement:!0}],exports:[{kind:"js",name:"EOxStacInfo",declaration:{name:"EOxStacInfo",module:"elements/stacinfo/src/main.ts"}},{kind:"custom-element-definition",name:"eox-stacinfo",declaration:{name:"EOxStacInfo",module:"elements/stacinfo/src/main.ts"}},{kind:"js",name:"EOxStacInfoShadow",declaration:{name:"EOxStacInfoShadow",module:"elements/stacinfo/src/main.ts"}},{kind:"custom-element-definition",name:"eox-stacinfo-shadow",declaration:{name:"EOxStacInfoShadow",module:"elements/stacinfo/src/main.ts"}}]},{kind:"javascript-module",path:"elements/timecontrol/src/main.ts",declarations:[{kind:"class",description:"",name:"EOxTimeControl",members:[{kind:"field",name:"controlProperty",type:{text:"string | undefined"},description:"The WMS parameter to update",attribute:"control-property"},{kind:"field",name:"controlValues",type:{text:"Array<string>"},default:"[]",description:"The list of available values for the animation property",attribute:"control-values"},{kind:"field",name:"for",type:{text:"string"},description:"The query selector for the map",attribute:"for"},{kind:"field",name:"layer",type:{text:"string"},description:"The layerid of the animated layer",attribute:"layer"},{kind:"field",name:"slider",type:{text:"boolean"},description:"Display a slider for the values",attribute:"slider"},{kind:"field",name:"_originalParams",type:{text:"object"},privacy:"private",description:"Original params of layer source",attribute:"_originalParams"},{kind:"field",name:"disablePlay",type:{text:"boolean"},description:"Hides the play button if set",attribute:"disable-play"},{kind:"method",name:"next",description:"Go to next step"},{kind:"method",name:"previous",description:"Go to previous step"},{kind:"method",name:"playAnimation",parameters:[{name:"on",type:{text:"boolean"},description:"animation on/off"}],description:"Toggle play animation"},{kind:"method",name:"setConfig",parameters:[{name:"config",type:{text:`{
    layer: string;
    controlProperty: string;
    controlValues: Array<string>;
  }`}}],description:"Set the config at a later point"},{kind:"field",name:"currentStep",description:"The currently selected step",type:{text:"string"},attribute:"current-step"},{kind:"field",name:"_animationInterval",type:{text:"ReturnType<typeof setInterval>"},privacy:"private"},{kind:"field",name:"_controlSource",type:{text:"UrlTile"},privacy:"private"},{kind:"field",name:"_isAnimationPlaying",type:{text:"boolean"},privacy:"private"},{kind:"field",name:"_newStepIndex",type:{text:"number"},privacy:"private",default:"0"},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"method",name:"_updateStep",privacy:"private",parameters:[{name:"step",default:"1"}]},{kind:"method",name:"getFlatLayersArray",parameters:[{name:"layers",type:{text:"Array<Layer>"},description:"layers Array"}],description:`TEMP / TO-DO, this is a copy of the function defined in the eox-map:
https://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25
Consider a way to properly export that function and use it here`}],events:[{name:"stepchange",type:{text:"CustomEvent"},description:"Triggers when *currentStep* is updated.\n`event.detail.currentStep` returns the new *currentStep* value."}],attributes:[{name:"control-property",type:{text:"string | undefined"},description:"The WMS parameter to update",fieldName:"controlProperty"},{name:"control-values",type:{text:"Array<string>"},default:"[]",description:"The list of available values for the animation property",fieldName:"controlValues"},{name:"for",type:{text:"string"},description:"The query selector for the map",fieldName:"for"},{name:"layer",type:{text:"string"},description:"The layerid of the animated layer",fieldName:"layer"},{name:"slider",type:{text:"boolean"},description:"Display a slider for the values",fieldName:"slider"},{name:"_originalParams",type:{text:"object"},description:"Original params of layer source",fieldName:"_originalParams"},{name:"disable-play",type:{text:"boolean"},description:"Hides the play button if set",fieldName:"disablePlay"},{name:"current-step",description:"The currently selected step",type:{text:"string"},fieldName:"currentStep"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-timecontrol",customElement:!0},{kind:"class",description:"",name:"SliderTicks",members:[{kind:"field",name:"width",type:{text:"number"},default:"0",attribute:"width"},{kind:"field",name:"steps",type:{text:"string[]"},default:"[]",attribute:"steps"},{kind:"field",name:"height",type:{text:"number"},default:"6"},{kind:"field",name:"svgWidth",type:{text:"number"},default:"0"},{kind:"method",name:"handleResize"},{kind:"field",name:"lines",readonly:!0},{kind:"field",name:"numLines",readonly:!0},{kind:"field",name:"yearMarks",type:{text:"{ label: number; position: number }[]"},readonly:!0},{kind:"method",name:"isYearLine",return:{type:{text:"boolean"}},parameters:[{name:"line",type:{text:"number"}}]}],attributes:[{name:"width",type:{text:"number"},default:"0",fieldName:"width"},{name:"steps",type:{text:"string[]"},default:"[]",fieldName:"steps"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-sliderticks",customElement:!0}],exports:[{kind:"js",name:"EOxTimeControl",declaration:{name:"EOxTimeControl",module:"elements/timecontrol/src/main.ts"}},{kind:"custom-element-definition",name:"eox-timecontrol",declaration:{name:"EOxTimeControl",module:"elements/timecontrol/src/main.ts"}},{kind:"js",name:"SliderTicks",declaration:{name:"SliderTicks",module:"elements/timecontrol/src/main.ts"}},{kind:"custom-element-definition",name:"eox-sliderticks",declaration:{name:"SliderTicks",module:"elements/timecontrol/src/main.ts"}}]}],$De={schemaVersion:PDe,readme:FDe,modules:NDe};function due(i){const e={h3:"h3",..._0e(),...i.components};return Jl.jsxs(Jl.Fragment,{children:[`
`,`
`,Jl.jsx(wDe,{isTemplate:!0}),`
`,Jl.jsx(EDe,{}),`
`,Jl.jsx(SDe,{}),`
`,Jl.jsx(CDe,{}),`
`,Jl.jsx(TDe,{}),`
`,Jl.jsx(e.h3,{id:"api",children:"API"}),`
`,Jl.jsx(ADe,{}),`
`,Jl.jsx(kDe,{includePrimary:!1})]})}function BDe(i={}){const{wrapper:e}={..._0e(),...i.components};return e?Jl.jsx(e,{...i,children:Jl.jsx(due,{...i})}):due(i)}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Xx(i){return i+.5|0}const Ef=(i,e,t)=>Math.max(Math.min(i,t),e);function q1(i){return Ef(Xx(i*2.55),0,255)}function Pf(i){return Ef(Xx(i*255),0,255)}function $h(i){return Ef(Xx(i/2.55)/100,0,1)}function fue(i){return Ef(Xx(i*100),0,100)}const Xl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},F3=[..."0123456789ABCDEF"],jDe=i=>F3[i&15],zDe=i=>F3[(i&240)>>4]+F3[i&15],vE=i=>(i&240)>>4===(i&15),UDe=i=>vE(i.r)&&vE(i.g)&&vE(i.b)&&vE(i.a);function GDe(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&Xl[i[1]]*17,g:255&Xl[i[2]]*17,b:255&Xl[i[3]]*17,a:e===5?Xl[i[4]]*17:255}:(e===7||e===9)&&(t={r:Xl[i[1]]<<4|Xl[i[2]],g:Xl[i[3]]<<4|Xl[i[4]],b:Xl[i[5]]<<4|Xl[i[6]],a:e===9?Xl[i[7]]<<4|Xl[i[8]]:255})),t}const qDe=(i,e)=>i<255?e(i):"";function HDe(i){var e=UDe(i)?jDe:zDe;return i?"#"+e(i.r)+e(i.g)+e(i.b)+qDe(i.a,e):void 0}const VDe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function x0e(i,e,t){const r=e*Math.min(t,1-t),n=(s,o=(s+i/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function WDe(i,e,t){const r=(n,s=(n+i/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function YDe(i,e,t){const r=x0e(i,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)r[n]*=1-e-t,r[n]+=e;return r}function XDe(i,e,t,r,n){return i===n?(e-t)/r+(e<t?6:0):e===n?(t-i)/r+2:(i-e)/r+4}function YL(i){const t=i.r/255,r=i.g/255,n=i.b/255,s=Math.max(t,r,n),o=Math.min(t,r,n),a=(s+o)/2;let l,u,c;return s!==o&&(c=s-o,u=a>.5?c/(2-s-o):c/(s+o),l=XDe(t,r,n,c,s),l=l*60+.5),[l|0,u||0,a]}function XL(i,e,t,r){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,r)).map(Pf)}function ZL(i,e,t){return XL(x0e,i,e,t)}function ZDe(i,e,t){return XL(YDe,i,e,t)}function KDe(i,e,t){return XL(WDe,i,e,t)}function w0e(i){return(i%360+360)%360}function JDe(i){const e=VDe.exec(i);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?q1(+e[5]):Pf(+e[5]));const n=w0e(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=ZDe(n,s,o):e[1]==="hsv"?r=KDe(n,s,o):r=ZL(n,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function QDe(i,e){var t=YL(i);t[0]=w0e(t[0]+e),t=ZL(t),i.r=t[0],i.g=t[1],i.b=t[2]}function e3e(i){if(!i)return;const e=YL(i),t=e[0],r=fue(e[1]),n=fue(e[2]);return i.a<255?`hsla(${t}, ${r}%, ${n}%, ${$h(i.a)})`:`hsl(${t}, ${r}%, ${n}%)`}const pue={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},mue={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function t3e(){const i={},e=Object.keys(mue),t=Object.keys(pue);let r,n,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],n=0;n<t.length;n++)s=t[n],a=a.replace(s,pue[s]);s=parseInt(mue[o],16),i[a]=[s>>16&255,s>>8&255,s&255]}return i}let bE;function i3e(i){bE||(bE=t3e(),bE.transparent=[0,0,0,0]);const e=bE[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const r3e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function n3e(i){const e=r3e.exec(i);let t=255,r,n,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?q1(o):Ef(o*255,0,255)}return r=+e[1],n=+e[3],s=+e[5],r=255&(e[2]?q1(r):Ef(r,0,255)),n=255&(e[4]?q1(n):Ef(n,0,255)),s=255&(e[6]?q1(s):Ef(s,0,255)),{r,g:n,b:s,a:t}}}function s3e(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${$h(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const JA=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Qg=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function o3e(i,e,t){const r=Qg($h(i.r)),n=Qg($h(i.g)),s=Qg($h(i.b));return{r:Pf(JA(r+t*(Qg($h(e.r))-r))),g:Pf(JA(n+t*(Qg($h(e.g))-n))),b:Pf(JA(s+t*(Qg($h(e.b))-s))),a:i.a+t*(e.a-i.a)}}function _E(i,e,t){if(i){let r=YL(i);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=ZL(r),i.r=r[0],i.g=r[1],i.b=r[2]}}function E0e(i,e){return i&&Object.assign(e||{},i)}function gue(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=Pf(i[3]))):(e=E0e(i,{r:0,g:0,b:0,a:1}),e.a=Pf(e.a)),e}function a3e(i){return i.charAt(0)==="r"?n3e(i):JDe(i)}class j_{constructor(e){if(e instanceof j_)return e;const t=typeof e;let r;t==="object"?r=gue(e):t==="string"&&(r=GDe(e)||i3e(e)||a3e(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=E0e(this._rgb);return e&&(e.a=$h(e.a)),e}set rgb(e){this._rgb=gue(e)}rgbString(){return this._valid?s3e(this._rgb):void 0}hexString(){return this._valid?HDe(this._rgb):void 0}hslString(){return this._valid?e3e(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=r.a-n.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,r.r=255&u*r.r+s*n.r+.5,r.g=255&u*r.g+s*n.g+.5,r.b=255&u*r.b+s*n.b+.5,r.a=o*r.a+(1-o)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=o3e(this._rgb,e._rgb,t)),this}clone(){return new j_(this.rgb)}alpha(e){return this._rgb.a=Pf(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Xx(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _E(this._rgb,2,e),this}darken(e){return _E(this._rgb,2,-e),this}saturate(e){return _E(this._rgb,1,e),this}desaturate(e){return _E(this._rgb,1,-e),this}rotate(e){return QDe(this._rgb,e),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Ah(){}const l3e=(()=>{let i=0;return()=>i++})();function Vr(i){return i===null||typeof i>"u"}function Un(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function wr(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function vs(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function bl(i,e){return vs(i)?i:e}function Zi(i,e){return typeof i>"u"?e:i}const u3e=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,S0e=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function Mn(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function vn(i,e,t,r){let n,s,o;if(Un(i))if(s=i.length,r)for(n=s-1;n>=0;n--)e.call(t,i[n],n);else for(n=0;n<s;n++)e.call(t,i[n],n);else if(wr(i))for(o=Object.keys(i),s=o.length,n=0;n<s;n++)e.call(t,i[o[n]],o[n])}function pS(i,e){let t,r,n,s;if(!i||!e||i.length!==e.length)return!1;for(t=0,r=i.length;t<r;++t)if(n=i[t],s=e[t],n.datasetIndex!==s.datasetIndex||n.index!==s.index)return!1;return!0}function mS(i){if(Un(i))return i.map(mS);if(wr(i)){const e=Object.create(null),t=Object.keys(i),r=t.length;let n=0;for(;n<r;++n)e[t[n]]=mS(i[t[n]]);return e}return i}function C0e(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function c3e(i,e,t,r){if(!C0e(i))return;const n=e[i],s=t[i];wr(n)&&wr(s)?Il(n,s,r):e[i]=mS(s)}function Il(i,e,t){const r=Un(e)?e:[e],n=r.length;if(!wr(i))return i;t=t||{};const s=t.merger||c3e;let o;for(let a=0;a<n;++a){if(o=r[a],!wr(o))continue;const l=Object.keys(o);for(let u=0,c=l.length;u<c;++u)s(l[u],i,o,t)}return i}function h_(i,e){return Il(i,e,{merger:h3e})}function h3e(i,e,t){if(!C0e(i))return;const r=e[i],n=t[i];wr(r)&&wr(n)?h_(r,n):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=mS(n))}const yue={"":i=>i,x:i=>i.x,y:i=>i.y};function d3e(i){const e=i.split("."),t=[];let r="";for(const n of e)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function f3e(i){const e=d3e(i);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function Uf(i,e){return(yue[e]||(yue[e]=f3e(e)))(i)}function KL(i){return i.charAt(0).toUpperCase()+i.slice(1)}const z_=i=>typeof i<"u",Gf=i=>typeof i=="function",vue=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function p3e(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const Hn=Math.PI,Gn=2*Hn,m3e=Gn+Hn,gS=Number.POSITIVE_INFINITY,g3e=Hn/180,ks=Hn/2,Zp=Hn/4,bue=Hn*2/3,Sf=Math.log10,Pc=Math.sign;function d_(i,e,t){return Math.abs(i-e)<t}function _ue(i){const e=Math.round(i);i=d_(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(Sf(i))),r=i/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function y3e(i){const e=[],t=Math.sqrt(i);let r;for(r=1;r<t;r++)i%r===0&&(e.push(r),e.push(i/r));return t===(t|0)&&e.push(t),e.sort((n,s)=>n-s).pop(),e}function xy(i){return!isNaN(parseFloat(i))&&isFinite(i)}function v3e(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function T0e(i,e,t){let r,n,s;for(r=0,n=i.length;r<n;r++)s=i[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Fu(i){return i*(Hn/180)}function JL(i){return i*(180/Hn)}function xue(i){if(!vs(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function A0e(i,e){const t=e.x-i.x,r=e.y-i.y,n=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Hn&&(s+=Gn),{angle:s,distance:n}}function N3(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function b3e(i,e){return(i-e+m3e)%Gn-Hn}function xl(i){return(i%Gn+Gn)%Gn}function U_(i,e,t,r){const n=xl(i),s=xl(e),o=xl(t),a=xl(s-n),l=xl(o-n),u=xl(n-s),c=xl(n-o);return n===s||n===o||r&&s===o||a>l&&u<c}function ho(i,e,t){return Math.max(e,Math.min(t,i))}function _3e(i){return ho(i,-32768,32767)}function Gh(i,e,t,r=1e-6){return i>=Math.min(e,t)-r&&i<=Math.max(e,t)+r}function QL(i,e,t){t=t||(o=>i[o]<e);let r=i.length-1,n=0,s;for(;r-n>1;)s=n+r>>1,t(s)?n=s:r=s;return{lo:n,hi:r}}const qh=(i,e,t,r)=>QL(i,t,r?n=>{const s=i[n][e];return s<t||s===t&&i[n+1][e]===t}:n=>i[n][e]<t),x3e=(i,e,t)=>QL(i,t,r=>i[r][e]>=t);function w3e(i,e,t){let r=0,n=i.length;for(;r<n&&i[r]<e;)r++;for(;n>r&&i[n-1]>t;)n--;return r>0||n<i.length?i.slice(r,n):i}const k0e=["push","pop","shift","splice","unshift"];function E3e(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),k0e.forEach(t=>{const r="_onData"+KL(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...s){const o=n.apply(this,s);return i._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function wue(i,e){const t=i._chartjs;if(!t)return;const r=t.listeners,n=r.indexOf(e);n!==-1&&r.splice(n,1),!(r.length>0)&&(k0e.forEach(s=>{delete i[s]}),delete i._chartjs)}function D0e(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const M0e=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function L0e(i,e){let t=[],r=!1;return function(...n){t=n,r||(r=!0,M0e.call(window,()=>{r=!1,i.apply(e,t)}))}}function S3e(i,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(i,e,r)):i.apply(this,r),e}}const eR=i=>i==="start"?"left":i==="end"?"right":"center",ta=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,C3e=(i,e,t,r)=>i===(r?"left":"right")?t:i==="center"?(e+t)/2:e;function R0e(i,e,t){const r=e.length;let n=0,s=r;if(i._sorted){const{iScale:o,_parsed:a}=i,l=o.axis,{min:u,max:c,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(n=ho(Math.min(qh(a,l,u).lo,t?r:qh(e,l,o.getPixelForValue(u)).lo),0,r-1)),d?s=ho(Math.max(qh(a,o.axis,c,!0).hi+1,t?0:qh(e,l,o.getPixelForValue(c),!0).hi+1),n,r)-n:s=r-n}return{start:n,count:s}}function I0e(i){const{xScale:e,yScale:t,_scaleRanges:r}=i,n={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return i._scaleRanges=n,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,n),s}const xE=i=>i===0||i===1,Eue=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*Gn/t)),Sue=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*Gn/t)+1,f_={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*ks)+1,easeOutSine:i=>Math.sin(i*ks),easeInOutSine:i=>-.5*(Math.cos(Hn*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>xE(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>xE(i)?i:Eue(i,.075,.3),easeOutElastic:i=>xE(i)?i:Sue(i,.075,.3),easeInOutElastic(i){return xE(i)?i:i<.5?.5*Eue(i*2,.1125,.45):.5+.5*Sue(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-f_.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?f_.easeInBounce(i*2)*.5:f_.easeOutBounce(i*2-1)*.5+.5};function tR(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function yS(i){return tR(i)?i:new j_(i)}function QA(i){return tR(i)?i:new j_(i).saturate(.5).darken(.1).hexString()}const T3e=["x","y","borderWidth","radius","tension"],A3e=["color","borderColor","backgroundColor"];function k3e(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:A3e},numbers:{type:"number",properties:T3e}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function D3e(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Cue=new Map;function M3e(i,e){e=e||{};const t=i+JSON.stringify(e);let r=Cue.get(t);return r||(r=new Intl.NumberFormat(i,e),Cue.set(t,r)),r}function Zx(i,e,t){return M3e(e,t).format(i)}const O0e={values(i){return Un(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";const r=this.chart.options.locale;let n,s=i;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(n="scientific"),s=L3e(i,t)}const o=Sf(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zx(i,r,l)},logarithmic(i,e,t){if(i===0)return"0";const r=t[e].significand||i/Math.pow(10,Math.floor(Sf(i)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?O0e.numeric.call(this,i,e,t):""}};function L3e(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var bT={formatters:O0e};function R3e(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Nm=Object.create(null),$3=Object.create(null);function p_(i,e){if(!e)return i;const t=e.split(".");for(let r=0,n=t.length;r<n;++r){const s=t[r];i=i[s]||(i[s]=Object.create(null))}return i}function ek(i,e,t){return typeof e=="string"?Il(p_(i,e),t):Il(p_(i,""),e)}class I3e{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>QA(n.backgroundColor),this.hoverBorderColor=(r,n)=>QA(n.borderColor),this.hoverColor=(r,n)=>QA(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ek(this,e,t)}get(e){return p_(this,e)}describe(e,t){return ek($3,e,t)}override(e,t){return ek(Nm,e,t)}route(e,t,r,n){const s=p_(this,e),o=p_(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],u=o[n];return wr(l)?Object.assign({},u,l):Zi(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var bs=new I3e({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[k3e,D3e,R3e]);function O3e(i){return!i||Vr(i.size)||Vr(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function vS(i,e,t,r,n){let s=e[n];return s||(s=e[n]=i.measureText(n).width,t.push(n)),s>r&&(r=s),r}function P3e(i,e,t,r){r=r||{};let n=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(n=r.data={},s=r.garbageCollect=[],r.font=e),i.save(),i.font=e;let o=0;const a=t.length;let l,u,c,h,d;for(l=0;l<a;l++)if(h=t[l],h!=null&&!Un(h))o=vS(i,n,s,o,h);else if(Un(h))for(u=0,c=h.length;u<c;u++)d=h[u],d!=null&&!Un(d)&&(o=vS(i,n,s,o,d));i.restore();const p=s.length/2;if(p>t.length){for(l=0;l<p;l++)delete n[s[l]];s.splice(0,p)}return o}function Kp(i,e,t){const r=i.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*r)/r+n}function Tue(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function B3(i,e,t,r){P0e(i,e,t,r,null)}function P0e(i,e,t,r,n){let s,o,a,l,u,c,h,d;const p=e.pointStyle,m=e.rotation,g=e.radius;let v=(m||0)*g3e;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){i.save(),i.translate(t,r),i.rotate(v),i.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),i.restore();return}if(!(isNaN(g)||g<=0)){switch(i.beginPath(),p){default:n?i.ellipse(t,r,n/2,g,0,0,Gn):i.arc(t,r,g,0,Gn),i.closePath();break;case"triangle":c=n?n/2:g,i.moveTo(t+Math.sin(v)*c,r-Math.cos(v)*g),v+=bue,i.lineTo(t+Math.sin(v)*c,r-Math.cos(v)*g),v+=bue,i.lineTo(t+Math.sin(v)*c,r-Math.cos(v)*g),i.closePath();break;case"rectRounded":u=g*.516,l=g-u,o=Math.cos(v+Zp)*l,h=Math.cos(v+Zp)*(n?n/2-u:l),a=Math.sin(v+Zp)*l,d=Math.sin(v+Zp)*(n?n/2-u:l),i.arc(t-h,r-a,u,v-Hn,v-ks),i.arc(t+d,r-o,u,v-ks,v),i.arc(t+h,r+a,u,v,v+ks),i.arc(t-d,r+o,u,v+ks,v+Hn),i.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,c=n?n/2:l,i.rect(t-c,r-l,2*c,2*l);break}v+=Zp;case"rectRot":h=Math.cos(v)*(n?n/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(n?n/2:g),i.moveTo(t-h,r-a),i.lineTo(t+d,r-o),i.lineTo(t+h,r+a),i.lineTo(t-d,r+o),i.closePath();break;case"crossRot":v+=Zp;case"cross":h=Math.cos(v)*(n?n/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(n?n/2:g),i.moveTo(t-h,r-a),i.lineTo(t+h,r+a),i.moveTo(t+d,r-o),i.lineTo(t-d,r+o);break;case"star":h=Math.cos(v)*(n?n/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(n?n/2:g),i.moveTo(t-h,r-a),i.lineTo(t+h,r+a),i.moveTo(t+d,r-o),i.lineTo(t-d,r+o),v+=Zp,h=Math.cos(v)*(n?n/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(n?n/2:g),i.moveTo(t-h,r-a),i.lineTo(t+h,r+a),i.moveTo(t+d,r-o),i.lineTo(t-d,r+o);break;case"line":o=n?n/2:Math.cos(v)*g,a=Math.sin(v)*g,i.moveTo(t-o,r-a),i.lineTo(t+o,r+a);break;case"dash":i.moveTo(t,r),i.lineTo(t+Math.cos(v)*(n?n/2:g),r+Math.sin(v)*g);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function Hh(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function _T(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function xT(i){i.restore()}function F3e(i,e,t,r,n){if(!e)return i.lineTo(t.x,t.y);if(n==="middle"){const s=(e.x+t.x)/2;i.lineTo(s,e.y),i.lineTo(s,t.y)}else n==="after"!=!!r?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function N3e(i,e,t,r){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function $3e(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),Vr(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function B3e(i,e,t,r,n){if(n.strikethrough||n.underline){const s=i.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,c=n.strikethrough?(l+u)/2:u;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(o,c),i.lineTo(a,c),i.stroke()}}function j3e(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function $m(i,e,t,r,n,s={}){const o=Un(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(i.save(),i.font=n.string,$3e(i,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&j3e(i,s.backdrop),a&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),Vr(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(u,t,r,s.maxWidth)),i.fillText(u,t,r,s.maxWidth),B3e(i,t,r,u,s),r+=Number(n.lineHeight);i.restore()}function G_(i,e){const{x:t,y:r,w:n,h:s,radius:o}=e;i.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Hn,Hn,!0),i.lineTo(t,r+s-o.bottomLeft),i.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Hn,ks,!0),i.lineTo(t+n-o.bottomRight,r+s),i.arc(t+n-o.bottomRight,r+s-o.bottomRight,o.bottomRight,ks,0,!0),i.lineTo(t+n,r+o.topRight),i.arc(t+n-o.topRight,r+o.topRight,o.topRight,0,-ks,!0),i.lineTo(t+o.topLeft,r)}const z3e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,U3e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function G3e(i,e){const t=(""+i).match(z3e);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}const q3e=i=>+i||0;function iR(i,e){const t={},r=wr(e),n=r?Object.keys(e):e,s=wr(i)?r?o=>Zi(i[o],i[e[o]]):o=>i[o]:()=>i;for(const o of n)t[o]=q3e(s(o));return t}function F0e(i){return iR(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Em(i){return iR(i,["topLeft","topRight","bottomLeft","bottomRight"])}function ua(i){const e=F0e(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Zs(i,e){i=i||{},e=e||bs.font;let t=Zi(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Zi(i.style,e.style);r&&!(""+r).match(U3e)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:Zi(i.family,e.family),lineHeight:G3e(Zi(i.lineHeight,e.lineHeight),t),size:t,style:r,weight:Zi(i.weight,e.weight),string:""};return n.string=O3e(n),n}function H1(i,e,t,r){let n=!0,s,o,a;for(s=0,o=i.length;s<o;++s)if(a=i[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),n=!1),t!==void 0&&Un(a)&&(a=a[t%a.length],n=!1),a!==void 0))return r&&!n&&(r.cacheable=!1),a}function H3e(i,e,t){const{min:r,max:n}=i,s=S0e(e,(n-r)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(n,s)}}function rp(i,e){return Object.assign(Object.create(i),e)}function rR(i,e=[""],t,r,n=()=>i[0]){const s=t||i;typeof r>"u"&&(r=j0e("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:r,_getTarget:n,override:a=>rR([a,...i],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return $0e(a,l,()=>Q3e(l,e,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return kue(a).includes(l)},ownKeys(a){return kue(a)},set(a,l,u){const c=a._storage||(a._storage=n());return a[l]=c[l]=u,delete a._keys,!0}})}function wy(i,e,t,r){const n={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:N0e(i,r),setContext:s=>wy(i,s,t,r),override:s=>wy(i.override(s),e,t,r)};return new Proxy(n,{deleteProperty(s,o){return delete s[o],delete i[o],!0},get(s,o,a){return $0e(s,o,()=>W3e(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(s,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(s,o,a){return i[o]=a,delete s[o],!0}})}function N0e(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:n=e.allKeys}=i;return{allKeys:n,scriptable:t,indexable:r,isScriptable:Gf(t)?t:()=>t,isIndexable:Gf(r)?r:()=>r}}const V3e=(i,e)=>i?i+KL(e):e,nR=(i,e)=>wr(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $0e(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const r=t();return i[e]=r,r}function W3e(i,e,t){const{_proxy:r,_context:n,_subProxy:s,_descriptors:o}=i;let a=r[e];return Gf(a)&&o.isScriptable(e)&&(a=Y3e(e,a,i,t)),Un(a)&&a.length&&(a=X3e(e,a,i,o.isIndexable)),nR(e,a)&&(a=wy(a,n,s&&s[e],o)),a}function Y3e(i,e,t,r){const{_proxy:n,_context:s,_subProxy:o,_stack:a}=t;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=e(s,o||r);return a.delete(i),nR(i,l)&&(l=sR(n._scopes,n,i,l)),l}function X3e(i,e,t,r){const{_proxy:n,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(i))return e[s.index%e.length];if(wr(e[0])){const l=e,u=n._scopes.filter(c=>c!==l);e=[];for(const c of l){const h=sR(u,n,i,c);e.push(wy(h,s,o&&o[i],a))}}return e}function B0e(i,e,t){return Gf(i)?i(e,t):i}const Z3e=(i,e)=>i===!0?e:typeof i=="string"?Uf(e,i):void 0;function K3e(i,e,t,r,n){for(const s of e){const o=Z3e(t,s);if(o){i.add(o);const a=B0e(o._fallback,t,n);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function sR(i,e,t,r){const n=e._rootScopes,s=B0e(e._fallback,t,r),o=[...i,...n],a=new Set;a.add(r);let l=Aue(a,o,t,s||t,r);return l===null||typeof s<"u"&&s!==t&&(l=Aue(a,o,s,l,r),l===null)?!1:rR(Array.from(a),[""],n,s,()=>J3e(e,t,r))}function Aue(i,e,t,r,n){for(;t;)t=K3e(i,e,t,r,n);return t}function J3e(i,e,t){const r=i._getTarget();e in r||(r[e]={});const n=r[e];return Un(n)&&wr(t)?t:n||{}}function Q3e(i,e,t,r){let n;for(const s of e)if(n=j0e(V3e(s,i),t),typeof n<"u")return nR(i,n)?sR(t,r,i,n):n}function j0e(i,e){for(const t of e){if(!t)continue;const r=t[i];if(typeof r<"u")return r}}function kue(i){let e=i._keys;return e||(e=i._keys=eMe(i._scopes)),e}function eMe(i){const e=new Set;for(const t of i)for(const r of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(r);return Array.from(e)}function z0e(i,e,t,r){const{iScale:n}=i,{key:s="r"}=this._parsing,o=new Array(r);let a,l,u,c;for(a=0,l=r;a<l;++a)u=a+t,c=e[u],o[a]={r:n.parse(Uf(c,s),u)};return o}const tMe=Number.EPSILON||1e-14,Ey=(i,e)=>e<i.length&&!i[e].skip&&i[e],U0e=i=>i==="x"?"y":"x";function iMe(i,e,t,r){const n=i.skip?e:i,s=e,o=t.skip?e:t,a=N3(s,n),l=N3(o,s);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const h=r*u,d=r*c;return{previous:{x:s.x-h*(o.x-n.x),y:s.y-h*(o.y-n.y)},next:{x:s.x+d*(o.x-n.x),y:s.y+d*(o.y-n.y)}}}function rMe(i,e,t){const r=i.length;let n,s,o,a,l,u=Ey(i,0);for(let c=0;c<r-1;++c)if(l=u,u=Ey(i,c+1),!(!l||!u)){if(d_(e[c],0,tMe)){t[c]=t[c+1]=0;continue}n=t[c]/e[c],s=t[c+1]/e[c],a=Math.pow(n,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[c]=n*o*e[c],t[c+1]=s*o*e[c])}}function nMe(i,e,t="x"){const r=U0e(t),n=i.length;let s,o,a,l=Ey(i,0);for(let u=0;u<n;++u){if(o=a,a=l,l=Ey(i,u+1),!a)continue;const c=a[t],h=a[r];o&&(s=(c-o[t])/3,a[`cp1${t}`]=c-s,a[`cp1${r}`]=h-s*e[u]),l&&(s=(l[t]-c)/3,a[`cp2${t}`]=c+s,a[`cp2${r}`]=h+s*e[u])}}function sMe(i,e="x"){const t=U0e(e),r=i.length,n=Array(r).fill(0),s=Array(r);let o,a,l,u=Ey(i,0);for(o=0;o<r;++o)if(a=l,l=u,u=Ey(i,o+1),!!l){if(u){const c=u[e]-l[e];n[o]=c!==0?(u[t]-l[t])/c:0}s[o]=a?u?Pc(n[o-1])!==Pc(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}rMe(i,n,s),nMe(i,s,e)}function wE(i,e,t){return Math.max(Math.min(i,t),e)}function oMe(i,e){let t,r,n,s,o,a=Hh(i[0],e);for(t=0,r=i.length;t<r;++t)o=s,s=a,a=t<r-1&&Hh(i[t+1],e),s&&(n=i[t],o&&(n.cp1x=wE(n.cp1x,e.left,e.right),n.cp1y=wE(n.cp1y,e.top,e.bottom)),a&&(n.cp2x=wE(n.cp2x,e.left,e.right),n.cp2y=wE(n.cp2y,e.top,e.bottom)))}function aMe(i,e,t,r,n){let s,o,a,l;if(e.spanGaps&&(i=i.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")sMe(i,n);else{let u=r?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)a=i[s],l=iMe(u,a,i[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&oMe(i,t)}function oR(){return typeof window<"u"&&typeof document<"u"}function aR(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bS(i,e,t){let r;return typeof i=="string"?(r=parseInt(i,10),i.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=i,r}const wT=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function lMe(i,e){return wT(i).getPropertyValue(e)}const uMe=["top","right","bottom","left"];function Sm(i,e,t){const r={};t=t?"-"+t:"";for(let n=0;n<4;n++){const s=uMe[n];r[s]=parseFloat(i[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const cMe=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function hMe(i,e){const t=i.touches,r=t&&t.length?t[0]:i,{offsetX:n,offsetY:s}=r;let o=!1,a,l;if(cMe(n,s,i.target))a=n,l=s;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function um(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:r}=e,n=wT(t),s=n.boxSizing==="border-box",o=Sm(n,"padding"),a=Sm(n,"border","width"),{x:l,y:u,box:c}=hMe(i,t),h=o.left+(c&&a.left),d=o.top+(c&&a.top);let{width:p,height:m}=e;return s&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-h)/p*t.width/r),y:Math.round((u-d)/m*t.height/r)}}function dMe(i,e,t){let r,n;if(e===void 0||t===void 0){const s=i&&aR(i);if(!s)e=i.clientWidth,t=i.clientHeight;else{const o=s.getBoundingClientRect(),a=wT(s),l=Sm(a,"border","width"),u=Sm(a,"padding");e=o.width-u.width-l.width,t=o.height-u.height-l.height,r=bS(a.maxWidth,s,"clientWidth"),n=bS(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||gS,maxHeight:n||gS}}const EE=i=>Math.round(i*10)/10;function fMe(i,e,t,r){const n=wT(i),s=Sm(n,"margin"),o=bS(n.maxWidth,i,"clientWidth")||gS,a=bS(n.maxHeight,i,"clientHeight")||gS,l=dMe(i,e,t);let{width:u,height:c}=l;if(n.boxSizing==="content-box"){const d=Sm(n,"border","width"),p=Sm(n,"padding");u-=p.width+d.width,c-=p.height+d.height}return u=Math.max(0,u-s.width),c=Math.max(0,r?u/r:c-s.height),u=EE(Math.min(u,o,l.maxWidth)),c=EE(Math.min(c,a,l.maxHeight)),u&&!c&&(c=EE(u/2)),(e!==void 0||t!==void 0)&&r&&l.height&&c>l.height&&(c=l.height,u=EE(Math.floor(c*r))),{width:u,height:c}}function Due(i,e,t){const r=e||1,n=Math.floor(i.height*r),s=Math.floor(i.width*r);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const o=i.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==r||o.height!==n||o.width!==s?(i.currentDevicePixelRatio=r,o.height=n,o.width=s,i.ctx.setTransform(r,0,0,r,0,0),!0):!1}const pMe=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};oR()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function Mue(i,e){const t=lMe(i,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function cm(i,e,t,r){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function mMe(i,e,t,r){return{x:i.x+t*(e.x-i.x),y:r==="middle"?t<.5?i.y:e.y:r==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function gMe(i,e,t,r){const n={x:i.cp2x,y:i.cp2y},s={x:e.cp1x,y:e.cp1y},o=cm(i,n,t),a=cm(n,s,t),l=cm(s,e,t),u=cm(o,a,t),c=cm(a,l,t);return cm(u,c,t)}const yMe=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},vMe=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function ey(i,e,t){return i?yMe(e,t):vMe()}function G0e(i,e){let t,r;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=r)}function q0e(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function H0e(i){return i==="angle"?{between:U_,compare:b3e,normalize:xl}:{between:Gh,compare:(e,t)=>e-t,normalize:e=>e}}function Lue({start:i,end:e,count:t,loop:r,style:n}){return{start:i%t,end:e%t,loop:r&&(e-i+1)%t===0,style:n}}function bMe(i,e,t){const{property:r,start:n,end:s}=t,{between:o,normalize:a}=H0e(r),l=e.length;let{start:u,end:c,loop:h}=i,d,p;if(h){for(u+=l,c+=l,d=0,p=l;d<p&&o(a(e[u%l][r]),n,s);++d)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:h,style:i.style}}function V0e(i,e,t){if(!t)return[i];const{property:r,start:n,end:s}=t,o=e.length,{compare:a,between:l,normalize:u}=H0e(r),{start:c,end:h,loop:d,style:p}=bMe(i,e,t),m=[];let g=!1,v=null,b,_,E;const C=()=>l(n,E,b)&&a(n,E)!==0,T=()=>a(s,b)===0||l(s,E,b),D=()=>g||C(),M=()=>!g||T();for(let A=c,I=c;A<=h;++A)_=e[A%o],!_.skip&&(b=u(_[r]),b!==E&&(g=l(b,n,s),v===null&&D()&&(v=a(b,n)===0?A:I),v!==null&&M()&&(m.push(Lue({start:v,end:A,loop:d,count:o,style:p})),v=null),I=A,E=b));return v!==null&&m.push(Lue({start:v,end:h,loop:d,count:o,style:p})),m}function W0e(i,e){const t=[],r=i.segments;for(let n=0;n<r.length;n++){const s=V0e(r[n],i.points,e);s.length&&t.push(...s)}return t}function _Me(i,e,t,r){let n=0,s=e-1;if(t&&!r)for(;n<e&&!i[n].skip;)n++;for(;n<e&&i[n].skip;)n++;for(n%=e,t&&(s+=n);s>n&&i[s%e].skip;)s--;return s%=e,{start:n,end:s}}function xMe(i,e,t,r){const n=i.length,s=[];let o=e,a=i[e],l;for(l=e+1;l<=t;++l){const u=i[l%n];u.skip||u.stop?a.skip||(r=!1,s.push({start:e%n,end:(l-1)%n,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%n,end:o%n,loop:r}),s}function wMe(i,e){const t=i.points,r=i.options.spanGaps,n=t.length;if(!n)return[];const s=!!i._loop,{start:o,end:a}=_Me(t,n,s,r);if(r===!0)return Rue(i,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+n:a,u=!!i._fullLoop&&o===0&&a===n-1;return Rue(i,xMe(t,o,l,u),t,e)}function Rue(i,e,t,r){return!r||!r.setContext||!t?e:EMe(i,e,t,r)}function EMe(i,e,t,r){const n=i._chart.getContext(),s=Iue(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,l=t.length,u=[];let c=s,h=e[0].start,d=h;function p(m,g,v,b){const _=a?-1:1;if(m!==g){for(m+=l;t[m%l].skip;)m-=_;for(;t[g%l].skip;)g+=_;m%l!==g%l&&(u.push({start:m%l,end:g%l,loop:v,style:b}),c=b,h=g%l)}}for(const m of e){h=a?h:m.start;let g=t[h%l],v;for(d=h+1;d<=m.end;d++){const b=t[d%l];v=Iue(r.setContext(rp(n,{type:"segment",p0:g,p1:b,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),SMe(v,c)&&p(h,d-1,m.loop,c),g=b,c=v}h<d-1&&p(h,d-1,m.loop,c)}return u}function Iue(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function SMe(i,e){if(!e)return!1;const t=[],r=function(n,s){return tR(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(i,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class CMe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const s=t.listeners[n],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=M0e.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(n.draw(),this._notify(n,r,e,"progress")),s.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ih=new CMe;const Oue="transparent",TMe={boolean(i,e,t){return t>.5?e:i},color(i,e,t){const r=yS(i||Oue),n=r.valid&&yS(e||Oue);return n&&n.valid?n.mix(r,t).hexString():e},number(i,e,t){return i+(e-i)*t}};class AMe{constructor(e,t,r,n){const s=t[r];n=H1([e.to,n,s,e.from]);const o=H1([e.from,s,n]);this._active=!0,this._fn=e.fn||TMe[e.type||typeof o],this._easing=f_[e.easing]||f_.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=H1([e.to,t,n,e.from]),this._from=H1([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<r),!this._active){this._target[n]=a,this._notify(!0);return}if(t<0){this._target[n]=s;return}l=t/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}}class Y0e{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!wr(e))return;const t=Object.keys(bs.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const s=e[n];if(!wr(s))return;const o={};for(const a of t)o[a]=s[a];(Un(s.properties)&&s.properties||[n]).forEach(a=>{(a===n||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,n=DMe(e,r);if(!n)return[];const s=this._createAnimations(n,r);return r.$shared&&kMe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,n=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){n.push(...this._animateOptions(e,t));continue}const c=t[u];let h=s[u];const d=r.get(u);if(h)if(d&&h.active()){h.update(d,c,a);continue}else h.cancel();if(!d||!d.duration){e[u]=c;continue}s[u]=h=new AMe(d,e,u,c),n.push(h)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return Ih.add(this._chart,r),!0}}function kMe(i,e){const t=[],r=Object.keys(e);for(let n=0;n<r.length;n++){const s=i[r[n]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function DMe(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Pue(i,e){const t=i&&i.options||{},r=t.reverse,n=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:n,end:r?n:s}}function MMe(i,e,t){if(t===!1)return!1;const r=Pue(i,t),n=Pue(e,t);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function LMe(i){let e,t,r,n;return wr(i)?(e=i.top,t=i.right,r=i.bottom,n=i.left):e=t=r=n=i,{top:e,right:t,bottom:r,left:n,disabled:i===!1}}function X0e(i,e){const t=[],r=i._getSortedDatasetMetas(e);let n,s;for(n=0,s=r.length;n<s;++n)t.push(r[n].index);return t}function Fue(i,e,t,r={}){const n=i.keys,s=r.mode==="single";let o,a,l,u;if(e!==null){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===t){if(r.all)continue;break}u=i.values[l],vs(u)&&(s||e===0||Pc(e)===Pc(u))&&(e+=u)}return e}}function RMe(i,e){const{iScale:t,vScale:r}=e,n=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(i),a=new Array(o.length);let l,u,c;for(l=0,u=o.length;l<u;++l)c=o[l],a[l]={[n]:c,[s]:i[c]};return a}function Nue(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function IMe(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function OMe(i){const{min:e,max:t,minDefined:r,maxDefined:n}=i.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function PMe(i,e,t){const r=i[e]||(i[e]={});return r[t]||(r[t]={})}function $ue(i,e,t,r){for(const n of e.getMatchingVisibleMetas(r).reverse()){const s=i[n.index];if(t&&s>0||!t&&s<0)return n.index}return null}function Bue(i,e){const{chart:t,_cachedMeta:r}=i,n=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,u=o.axis,c=IMe(s,o,r),h=e.length;let d;for(let p=0;p<h;++p){const m=e[p],{[l]:g,[u]:v}=m,b=m._stacks||(m._stacks={});d=b[u]=PMe(n,c,g),d[a]=v,d._top=$ue(d,o,!0,r.type),d._bottom=$ue(d,o,!1,r.type);const _=d._visualValues||(d._visualValues={});_[a]=v}}function tk(i,e){const t=i.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function FMe(i,e){return rp(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function NMe(i,e,t){return rp(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function x1(i,e){const t=i.controller.index,r=i.vScale&&i.vScale.axis;if(r){e=e||i._parsed;for(const n of e){const s=n._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const ik=i=>i==="reset"||i==="none",jue=(i,e)=>e?i:Object.assign({},i),$Me=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:X0e(t,!0),values:null};class Bu{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Nue(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&x1(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(h,d,p,m)=>h==="x"?d:h==="r"?m:p,s=t.xAxisID=Zi(r.xAxisID,tk(e,"x")),o=t.yAxisID=Zi(r.yAxisID,tk(e,"y")),a=t.rAxisID=Zi(r.rAxisID,tk(e,"r")),l=t.indexAxis,u=t.iAxisID=n(l,s,o,a),c=t.vAxisID=n(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&wue(this._data,this),e._stacked&&x1(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(wr(t)){const n=this._cachedMeta;this._data=RMe(t,n)}else if(r!==t){if(r){wue(r,this);const n=this._cachedMeta;x1(n),n._parsed=[]}t&&Object.isExtensible(t)&&E3e(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const s=t._stacked;t._stacked=Nue(t.vScale,t),t.stack!==r.stack&&(n=!0,x1(t),t.stack=r.stack),this._resyncElements(e),(n||s!==t._stacked)&&Bue(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&t===n.length?!0:r._sorted,u=e>0&&r._parsed[e-1],c,h,d;if(this._parsing===!1)r._parsed=n,r._sorted=!0,d=n;else{Un(n[e])?d=this.parseArrayData(r,n,e,t):wr(n[e])?d=this.parseObjectData(r,n,e,t):d=this.parsePrimitiveData(r,n,e,t);const p=()=>h[a]===null||u&&h[a]<u[a];for(c=0;c<t;++c)r._parsed[c+e]=h=d[c],l&&(p()&&(l=!1),u=h);r._sorted=l}o&&Bue(this,d)}parsePrimitiveData(e,t,r,n){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),c=s===o,h=new Array(n);let d,p,m;for(d=0,p=n;d<p;++d)m=d+r,h[d]={[a]:c||s.parse(u[m],m),[l]:o.parse(t[m],m)};return h}parseArrayData(e,t,r,n){const{xScale:s,yScale:o}=e,a=new Array(n);let l,u,c,h;for(l=0,u=n;l<u;++l)c=l+r,h=t[c],a[l]={x:s.parse(h[0],c),y:o.parse(h[1],c)};return a}parseObjectData(e,t,r,n){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(n);let c,h,d,p;for(c=0,h=n;c<h;++c)d=c+r,p=t[d],u[c]={x:s.parse(Uf(p,a),d),y:o.parse(Uf(p,l),d)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:X0e(n,!0),values:t._stacks[e.axis]._visualValues};return Fue(a,o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const s=r[t.axis];let o=s===null?NaN:s;const a=n&&r._stacks[t.axis];n&&a&&(n.values=a,o=Fue(n,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,s=r._sorted&&e===r.iScale,o=n.length,a=this._getOtherScale(e),l=$Me(t,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=OMe(a);let d,p;function m(){p=n[d];const g=p[a.axis];return!vs(p[e.axis])||c>g||h<g}for(d=0;d<o&&!(!m()&&(this.updateRangeFromParsed(u,e,p,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(u,e,p,l);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n][e.axis],vs(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:n?""+n.getLabelForValue(s[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=LMe(Zi(this.options.clip,MMe(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,u=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,s,a,l),c=a;c<a+l;++c){const h=n[c];h.hidden||(h.active&&u?o.push(h):h.draw(e,s))}for(c=0;c<o.length;++c)o[c].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=NMe(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=n.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=FMe(this.chart.getContext(),this.index)),s.dataset=n,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const n=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&z_(r);if(a)return jue(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),h=n?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),c),p=Object.keys(bs.elements[e]),m=()=>this.getContext(r,n,t),g=u.resolveNamedOptions(d,p,m,h);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(jue(g,l))),g}_resolveAnimations(e,t,r){const n=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(n.options.animation!==!1){const c=this.chart.config,h=c.datasetAnimationScopeKeys(this._type,t),d=c.getOptionScopes(this.getDataset(),h);l=c.createResolver(d,this.getContext(e,r,t))}const u=new Y0e(n,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||ik(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==n;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,n){ik(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!ik(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const s=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const n=r.length,s=t.length,o=Math.min(s,n);o&&this.parse(0,o),s>n?this._insertElements(n,s-n,e):s<n&&this._removeElements(s,n-s)}_insertElements(e,t,r=!0){const n=this._cachedMeta,s=n.data,o=e+t;let a;const l=u=>{for(u.length+=t,a=u.length-1;a>=o;a--)u[a]=u[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&x1(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}We(Bu,"defaults",{}),We(Bu,"datasetElementType",null),We(Bu,"dataElementType",null);function BMe(i,e){if(!i._cache.$bar){const t=i.getMatchingVisibleMetas(e);let r=[];for(let n=0,s=t.length;n<s;n++)r=r.concat(t[n].controller.getAllParsedValues(i));i._cache.$bar=D0e(r.sort((n,s)=>n-s))}return i._cache.$bar}function jMe(i){const e=i.iScale,t=BMe(e,i.type);let r=e._length,n,s,o,a;const l=()=>{o===32767||o===-32768||(z_(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(n=0,s=t.length;n<s;++n)o=e.getPixelForValue(t[n]),l();for(a=void 0,n=0,s=e.ticks.length;n<s;++n)o=e.getPixelForTick(n),l();return r}function zMe(i,e,t,r){const n=t.barThickness;let s,o;return Vr(n)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=n*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[i]-s/2}}function UMe(i,e,t,r){const n=e.pixels,s=n[i];let o=i>0?n[i-1]:null,a=i<n.length-1?n[i+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:t.barPercentage,start:u}}function GMe(i,e,t,r){const n=t.parse(i[0],r),s=t.parse(i[1],r),o=Math.min(n,s),a=Math.max(n,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[t.axis]=u,e._custom={barStart:l,barEnd:u,start:n,end:s,min:o,max:a}}function Z0e(i,e,t,r){return Un(i)?GMe(i,e,t,r):e[t.axis]=t.parse(i,r),e}function zue(i,e,t,r){const n=i.iScale,s=i.vScale,o=n.getLabels(),a=n===s,l=[];let u,c,h,d;for(u=t,c=t+r;u<c;++u)d=e[u],h={},h[n.axis]=a||n.parse(o[u],u),l.push(Z0e(d,h,s,u));return l}function rk(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function qMe(i,e,t){return i!==0?Pc(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function HMe(i){let e,t,r,n,s;return i.horizontal?(e=i.base>i.x,t="left",r="right"):(e=i.base<i.y,t="bottom",r="top"),e?(n="end",s="start"):(n="start",s="end"),{start:t,end:r,reverse:e,top:n,bottom:s}}function VMe(i,e,t,r){let n=e.borderSkipped;const s={};if(!n){i.borderSkipped=s;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:c}=HMe(i);n==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===r?n=u:(t._bottom||0)===r?n=c:(s[Uue(c,o,a,l)]=!0,n=u)),s[Uue(n,o,a,l)]=!0,i.borderSkipped=s}function Uue(i,e,t,r){return r?(i=WMe(i,e,t),i=Gue(i,t,e)):i=Gue(i,e,t),i}function WMe(i,e,t){return i===e?t:i===t?e:i}function Gue(i,e,t){return i==="start"?e:i==="end"?t:i}function YMe(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class Ff extends Bu{parsePrimitiveData(e,t,r,n){return zue(e,t,r,n)}parseArrayData(e,t,r,n){return zue(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?a:l,c=o.axis==="x"?a:l,h=[];let d,p,m,g;for(d=r,p=r+n;d<p;++d)g=t[d],m={},m[s.axis]=s.parse(Uf(g,u),d),h.push(Z0e(Uf(g,c),m,o,d));return h}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,s=this.getParsed(e),o=s._custom,a=rk(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(s[n.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const s=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,n);for(let p=t;p<t+r;p++){const m=this.getParsed(p),g=s||Vr(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,c),b=(m._stacks||{})[a.axis],_={horizontal:u,base:g.base,enableBorderRadius:!b||rk(m._custom)||o===b._top||o===b._bottom,x:u?g.head:v.center,y:u?v.center:g.head,height:u?v.size:Math.abs(g.size),width:u?Math.abs(g.size):v.size};d&&(_.options=h||this.resolveDataElementOptions(p,e[p].active?"active":n));const E=_.options||e[p].options;VMe(_,E,b,o),YMe(_,E,c.ratio),this.updateElement(e[p],p,_,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const u=l.controller.getParsed(t),c=u&&u[l.vScale.axis];if(Vr(c)||isNaN(c))return!0};for(const l of n)if(!(t!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const n=this._getStacks(e,r),s=t!==void 0?n.indexOf(t):-1;return s===-1?n.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let s,o;for(s=0,o=t.data.length;s<o;++s)n.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||jMe(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),u=l._custom,c=rk(u);let h=l[t.axis],d=0,p=r?this.applyStack(t,l,r):h,m,g;p!==h&&(d=p-h,p=h),c&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&Pc(h)!==Pc(u.barEnd)&&(d=0),d+=h);const v=!Vr(s)&&!c?s:d;let b=t.getPixelForValue(v);if(this.chart.getDataVisibility(e)?m=t.getPixelForValue(d+p):m=b,g=m-b,Math.abs(g)<o){g=qMe(g,t,a)*o,h===a&&(b-=g/2);const _=t.getPixelForDecimal(0),E=t.getPixelForDecimal(1),C=Math.min(_,E),T=Math.max(_,E);b=Math.max(Math.min(b,T),C),m=b+g,r&&!c&&(l._stacks[t.axis]._visualValues[n]=t.getValueForPixel(m)-t.getValueForPixel(b))}if(b===t.getPixelForValue(a)){const _=Pc(g)*t.getLineWidthForValue(a)/2;b+=_,g-=_}return{size:g,base:b,head:m,center:m+g/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,s=n.skipNull,o=Zi(n.maxBarThickness,1/0);let a,l;if(t.grouped){const u=s?this._getStackCount(e):t.stackCount,c=n.barThickness==="flex"?UMe(e,t,n,u):zMe(e,t,n,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=c.start+c.chunk*h+c.chunk/2,l=Math.min(o,c.chunk*c.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let s=0;for(;s<n;++s)this.getParsed(s)[t.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}We(Ff,"id","bar"),We(Ff,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),We(Ff,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class $2 extends Bu{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,t,r,n){const s=super.parseArrayData(e,t,r,n);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=Zi(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=Zi(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:s}=t,o=this.getParsed(e),a=n.getLabelForValue(o.x),l=s.getLabelForValue(o.y),u=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const s=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(t,n),c=o.axis,h=a.axis;for(let d=t;d<t+r;d++){const p=e[d],m=!s&&this.getParsed(d),g={},v=g[c]=s?o.getPixelForDecimal(.5):o.getPixelForValue(m[c]),b=g[h]=s?a.getBasePixel():a.getPixelForValue(m[h]);g.skip=isNaN(v)||isNaN(b),u&&(g.options=l||this.resolveDataElementOptions(d,p.active?"active":n),s&&(g.options.radius=0)),this.updateElement(p,d,g,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const s=n.radius;return t!=="active"&&(n.radius=0),n.radius+=Zi(r&&r._custom,s),n}}We($2,"id","bubble"),We($2,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),We($2,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function XMe(i,e,t){let r=1,n=1,s=0,o=0;if(e<Gn){const a=i,l=a+e,u=Math.cos(a),c=Math.sin(a),h=Math.cos(l),d=Math.sin(l),p=(E,C,T)=>U_(E,a,l,!0)?1:Math.max(C,C*t,T,T*t),m=(E,C,T)=>U_(E,a,l,!0)?-1:Math.min(C,C*t,T,T*t),g=p(0,u,h),v=p(ks,c,d),b=m(Hn,u,h),_=m(Hn+ks,c,d);r=(g-b)/2,n=(v-_)/2,s=-(g+b)/2,o=-(v+_)/2}return{ratioX:r,ratioY:n,offsetX:s,offsetY:o}}class ym extends Bu{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let s=l=>+r[l];if(wr(r[e])){const{key:l="value"}=this._parsing;s=u=>+Uf(r[u],l)}let o,a;for(o=e,a=e+t;o<a;++o)n._parsed[o]=s(o)}}_getRotation(){return Fu(this.options.rotation-90)}_getCircumference(){return Fu(this.options.circumference)}_getRotationExtents(){let e=Gn,t=-Gn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,s=n._getRotation(),o=n._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,s=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(u3e(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:p,offsetX:m,offsetY:g}=XMe(h,c,l),v=(r.width-o)/d,b=(r.height-o)/p,_=Math.max(Math.min(v,b)/2,0),E=S0e(this.options.radius,_),C=Math.max(E*l,0),T=(E-C)/this._getVisibleDatasetWeightTotal();this.offsetX=m*E,this.offsetY=g*E,n.total=this.calculateTotal(),this.outerRadius=E-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*s/Gn)}updateElements(e,t,r,n){const s=n==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,c=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&u.animateScale,p=d?0:this.innerRadius,m=d?0:this.outerRadius,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(t,n);let b=this._getRotation(),_;for(_=0;_<t;++_)b+=this._circumference(_,s);for(_=t;_<t+r;++_){const E=this._circumference(_,s),C=e[_],T={x:c+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+E,circumference:E,outerRadius:m,innerRadius:p};v&&(T.options=g||this.resolveDataElementOptions(_,C.active?"active":n)),b+=E,this.updateElement(C,_,T,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,n;for(n=0;n<t.length;n++){const s=e._parsed[n];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Gn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],s=Zx(t._parsed[e],r.options.locale);return{label:n[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,s,o,a,l;if(!e){for(n=0,s=r.data.datasets.length;n<s;++n)if(r.isDatasetVisible(n)){o=r.getDatasetMeta(n),e=o.data,a=o.controller;break}}if(!e)return 0;for(n=0,s=e.length;n<s;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(Zi(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}We(ym,"id","doughnut"),We(ym,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),We(ym,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),We(ym,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class Jh extends Bu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=R0e(t,n,o);this._drawStart=a,this._drawCount=l,I0e(t)&&(a=0,l=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(n,a,l,e)}updateElements(e,t,r,n){const s=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(t,n),d=o.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,v=xy(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||n==="none",_=t+r,E=e.length;let C=t>0&&this.getParsed(t-1);for(let T=0;T<E;++T){const D=e[T],M=b?D:{};if(T<t||T>=_){M.skip=!0;continue}const A=this.getParsed(T),I=Vr(A[p]),P=M[d]=o.getPixelForValue(A[d],T),U=M[p]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[p],T);M.skip=isNaN(P)||isNaN(U)||I,M.stop=T>0&&Math.abs(A[d]-C[d])>v,g&&(M.parsed=A,M.raw=u.data[T]),h&&(M.options=c||this.resolveDataElementOptions(T,D.active?"active":n)),b||this.updateElement(D,T,M,n),C=A}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}We(Jh,"id","line"),We(Jh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),We(Jh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Fc extends Bu{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],s=Zx(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:s}}parseObjectData(e,t,r,n){return z0e.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,n)=>{const s=this.getParsed(n).r;!isNaN(s)&&this.chart.getDataVisibility(n)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(n/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,r,n){const s=n==="reset",o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,c=u.xCenter,h=u.yCenter,d=u.getIndexAngle(0)-.5*Hn;let p=d,m;const g=360/this.countVisibleElements();for(m=0;m<t;++m)p+=this._computeAngle(m,n,g);for(m=t;m<t+r;m++){const v=e[m];let b=p,_=p+this._computeAngle(m,n,g),E=o.getDataVisibility(m)?u.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=_,s&&(l.animateScale&&(E=0),l.animateRotate&&(b=_=d));const C={x:c,y:h,innerRadius:0,outerRadius:E,startAngle:b,endAngle:_,options:this.resolveDataElementOptions(m,v.active?"active":n)};this.updateElement(v,m,C,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?Fu(this.resolveDataElementOptions(e,t).angle||r):0}}We(Fc,"id","polarArea"),We(Fc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),We(Fc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class j3 extends ym{}We(j3,"id","pie"),We(j3,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class B2 extends Bu{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return z0e.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],s=t.iScale.getLabels();if(r.points=n,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===n.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const s=this._cachedMeta.rScale,o=n==="reset";for(let a=t;a<t+r;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":n),c=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:c.x,d=o?s.yCenter:c.y,p={x:h,y:d,angle:c.angle,skip:isNaN(h)||isNaN(d),options:u};this.updateElement(l,a,p,n)}}}We(B2,"id","radar"),We(B2,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),We(B2,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Cm extends Bu{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:s}=t,o=this.getParsed(e),a=n.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:s,count:o}=R0e(t,r,n);if(this._drawStart=s,this._drawCount=o,I0e(t)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:u},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const s=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(t,n),h=this.getSharedOptions(c),d=this.includeOptions(n,h),p=o.axis,m=a.axis,{spanGaps:g,segment:v}=this.options,b=xy(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||n==="none";let E=t>0&&this.getParsed(t-1);for(let C=t;C<t+r;++C){const T=e[C],D=this.getParsed(C),M=_?T:{},A=Vr(D[m]),I=M[p]=o.getPixelForValue(D[p],C),P=M[m]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,D,l):D[m],C);M.skip=isNaN(I)||isNaN(P)||A,M.stop=C>0&&Math.abs(D[p]-E[p])>b,v&&(M.parsed=D,M.raw=u.data[C]),d&&(M.options=h||this.resolveDataElementOptions(C,T.active?"active":n)),_||this.updateElement(T,C,M,n),E=D}this.updateSharedOptions(h,n,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,s,o)/2}}We(Cm,"id","scatter"),We(Cm,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),We(Cm,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var ZMe=Object.freeze({__proto__:null,BarController:Ff,BubbleController:$2,DoughnutController:ym,LineController:Jh,PieController:j3,PolarAreaController:Fc,RadarController:B2,ScatterController:Cm});function Jp(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class lR{constructor(e){We(this,"options");this.options=e||{}}static override(e){Object.assign(lR.prototype,e)}init(){}formats(){return Jp()}parse(){return Jp()}format(){return Jp()}add(){return Jp()}diff(){return Jp()}startOf(){return Jp()}endOf(){return Jp()}}var K0e={_date:lR};function KMe(i,e,t,r){const{controller:n,data:s,_sorted:o}=i,a=n._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?x3e:qh;if(r){if(n._sharedOptions){const u=s[0],c=typeof u.getRange=="function"&&u.getRange(e);if(c){const h=l(s,e,t-c),d=l(s,e,t+c);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function Kx(i,e,t,r,n){const s=i.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:c}=s[a],{lo:h,hi:d}=KMe(s[a],e,o,n);for(let p=h;p<=d;++p){const m=c[p];m.skip||r(m,u,p)}}}function JMe(i){const e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(r,n){const s=e?Math.abs(r.x-n.x):0,o=t?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function nk(i,e,t,r,n){const s=[];return!n&&!i.isPointInArea(e)||Kx(i,t,e,function(a,l,u){!n&&!Hh(a,i.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function QMe(i,e,t,r){let n=[];function s(o,a,l){const{startAngle:u,endAngle:c}=o.getProps(["startAngle","endAngle"],r),{angle:h}=A0e(o,{x:e.x,y:e.y});U_(h,u,c)&&n.push({element:o,datasetIndex:a,index:l})}return Kx(i,t,e,s),n}function eLe(i,e,t,r,n,s){let o=[];const a=JMe(t);let l=Number.POSITIVE_INFINITY;function u(c,h,d){const p=c.inRange(e.x,e.y,n);if(r&&!p)return;const m=c.getCenterPoint(n);if(!(!!s||i.isPointInArea(m))&&!p)return;const v=a(e,m);v<l?(o=[{element:c,datasetIndex:h,index:d}],l=v):v===l&&o.push({element:c,datasetIndex:h,index:d})}return Kx(i,t,e,u),o}function sk(i,e,t,r,n,s){return!s&&!i.isPointInArea(e)?[]:t==="r"&&!r?QMe(i,e,t,n):eLe(i,e,t,r,n,s)}function que(i,e,t,r,n){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Kx(i,t,e,(l,u,c)=>{l[o](e[t],n)&&(s.push({element:l,datasetIndex:u,index:c}),a=a||l.inRange(e.x,e.y,n))}),r&&!a?[]:s}var tLe={evaluateInteractionItems:Kx,modes:{index(i,e,t,r){const n=um(e,i),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?nk(i,n,s,r,o):sk(i,n,s,!1,r,o),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(u=>{const c=a[0].index,h=u.data[c];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:c})}),l):[]},dataset(i,e,t,r){const n=um(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?nk(i,n,s,r,o):sk(i,n,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=i.getDatasetMeta(l).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:l,index:c})}return a},point(i,e,t,r){const n=um(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;return nk(i,n,s,r,o)},nearest(i,e,t,r){const n=um(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;return sk(i,n,s,t.intersect,r,o)},x(i,e,t,r){const n=um(e,i);return que(i,n,"x",t.intersect,r)},y(i,e,t,r){const n=um(e,i);return que(i,n,"y",t.intersect,r)}}};const J0e=["left","top","right","bottom"];function w1(i,e){return i.filter(t=>t.pos===e)}function Hue(i,e){return i.filter(t=>J0e.indexOf(t.pos)===-1&&t.box.axis===e)}function E1(i,e){return i.sort((t,r)=>{const n=e?r:t,s=e?t:r;return n.weight===s.weight?n.index-s.index:n.weight-s.weight})}function iLe(i){const e=[];let t,r,n,s,o,a;for(t=0,r=(i||[]).length;t<r;++t)n=i[t],{position:s,options:{stack:o,stackWeight:a=1}}=n,e.push({index:t,box:n,pos:s,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&s+o,stackWeight:a});return e}function rLe(i){const e={};for(const t of i){const{stack:r,pos:n,stackWeight:s}=t;if(!r||!J0e.includes(n))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function nLe(i,e){const t=rLe(i),{vBoxMaxWidth:r,hBoxMaxHeight:n}=e;let s,o,a;for(s=0,o=i.length;s<o;++s){a=i[s];const{fullSize:l}=a.box,u=t[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*r:l&&e.availableWidth,a.height=n):(a.width=r,a.height=c?c*n:l&&e.availableHeight)}return t}function sLe(i){const e=iLe(i),t=E1(e.filter(u=>u.box.fullSize),!0),r=E1(w1(e,"left"),!0),n=E1(w1(e,"right")),s=E1(w1(e,"top"),!0),o=E1(w1(e,"bottom")),a=Hue(e,"x"),l=Hue(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:w1(e,"chartArea"),vertical:r.concat(n).concat(l),horizontal:s.concat(o).concat(a)}}function Vue(i,e,t,r){return Math.max(i[t],e[t])+Math.max(i[r],e[r])}function Q0e(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function oLe(i,e,t,r){const{pos:n,box:s}=t,o=i.maxPadding;if(!wr(n)){t.size&&(i[n]-=t.size);const h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,i[n]+=t.size}s.getPadding&&Q0e(o,s.getPadding());const a=Math.max(0,e.outerWidth-Vue(o,i,"left","right")),l=Math.max(0,e.outerHeight-Vue(o,i,"top","bottom")),u=a!==i.w,c=l!==i.h;return i.w=a,i.h=l,t.horizontal?{same:u,other:c}:{same:c,other:u}}function aLe(i){const e=i.maxPadding;function t(r){const n=Math.max(e[r]-i[r],0);return i[r]+=n,n}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function lLe(i,e){const t=e.maxPadding;function r(n){const s={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(i?["left","right"]:["top","bottom"])}function V1(i,e,t,r){const n=[];let s,o,a,l,u,c;for(s=0,o=i.length,u=0;s<o;++s){a=i[s],l=a.box,l.update(a.width||e.w,a.height||e.h,lLe(a.horizontal,e));const{same:h,other:d}=oLe(e,t,a,r);u|=h&&n.length,c=c||d,l.fullSize||n.push(a)}return u&&V1(n,e,t,r)||c}function SE(i,e,t,r,n){i.top=t,i.left=e,i.right=e+r,i.bottom=t+n,i.width=r,i.height=n}function Wue(i,e,t,r){const n=t.padding;let{x:s,y:o}=e;for(const a of i){const l=a.box,u=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*c,d=u.size||l.height;z_(u.start)&&(o=u.start),l.fullSize?SE(l,n.left,o,t.outerWidth-n.right-n.left,d):SE(l,e.left+u.placed,o,h,d),u.start=o,u.placed+=h,o=l.bottom}else{const h=e.h*c,d=u.size||l.width;z_(u.start)&&(s=u.start),l.fullSize?SE(l,s,n.top,d,t.outerHeight-n.bottom-n.top):SE(l,s,e.top+u.placed,d,h),u.start=s,u.placed+=h,s=l.right}}e.x=s,e.y=o}var oa={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,r){if(!i)return;const n=ua(i.options.layout.padding),s=Math.max(e-n.width,0),o=Math.max(t-n.height,0),a=sLe(i.boxes),l=a.vertical,u=a.horizontal;vn(i.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},n);Q0e(d,ua(r));const p=Object.assign({maxPadding:d,w:s,h:o,x:n.left,y:n.top},n),m=nLe(l.concat(u),h);V1(a.fullSize,p,h,m),V1(l,p,h,m),V1(u,p,h,m)&&V1(l,p,h,m),aLe(p),Wue(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,Wue(a.rightAndBottom,p,h,m),i.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},vn(a.chartArea,g=>{const v=g.box;Object.assign(v,i.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class eye{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class uLe extends eye{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const j2="$chartjs",cLe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Yue=i=>i===null||i==="";function hLe(i,e){const t=i.style,r=i.getAttribute("height"),n=i.getAttribute("width");if(i[j2]={initial:{height:r,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Yue(n)){const s=Mue(i,"width");s!==void 0&&(i.width=s)}if(Yue(r))if(i.style.height==="")i.height=i.width/(e||2);else{const s=Mue(i,"height");s!==void 0&&(i.height=s)}return i}const tye=pMe?{passive:!0}:!1;function dLe(i,e,t){i&&i.addEventListener(e,t,tye)}function fLe(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,tye)}function pLe(i,e){const t=cLe[i.type]||i.type,{x:r,y:n}=um(i,e);return{type:t,chart:e,native:i,x:r!==void 0?r:null,y:n!==void 0?n:null}}function _S(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function mLe(i,e,t){const r=i.canvas,n=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_S(a.addedNodes,r),o=o&&!_S(a.removedNodes,r);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function gLe(i,e,t){const r=i.canvas,n=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_S(a.removedNodes,r),o=o&&!_S(a.addedNodes,r);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const q_=new Map;let Xue=0;function iye(){const i=window.devicePixelRatio;i!==Xue&&(Xue=i,q_.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function yLe(i,e){q_.size||window.addEventListener("resize",iye),q_.set(i,e)}function vLe(i){q_.delete(i),q_.size||window.removeEventListener("resize",iye)}function bLe(i,e,t){const r=i.canvas,n=r&&aR(r);if(!n)return;const s=L0e((a,l)=>{const u=n.clientWidth;t(a,l),u<n.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||s(u,c)});return o.observe(n),yLe(i,s),o}function ok(i,e,t){t&&t.disconnect(),e==="resize"&&vLe(i)}function _Le(i,e,t){const r=i.canvas,n=L0e(s=>{i.ctx!==null&&t(pLe(s,i))},i);return dLe(r,e,n),n}class xLe extends eye{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(hLe(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[j2])return!1;const r=t[j2].initial;["height","width"].forEach(s=>{const o=r[s];Vr(o)?t.removeAttribute(s):t.setAttribute(s,o)});const n=r.style||{};return Object.keys(n).forEach(s=>{t.style[s]=n[s]}),t.width=t.width,delete t[j2],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:mLe,detach:gLe,resize:bLe}[t]||_Le;n[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:ok,detach:ok,resize:ok}[t]||fLe)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return fMe(e,t,r,n)}isAttached(e){const t=e&&aR(e);return!!(t&&t.isConnected)}}function wLe(i){return!oR()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?uLe:xLe}var N2;let fd=(N2=class{constructor(){We(this,"x");We(this,"y");We(this,"active",!1);We(this,"options");We(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return xy(this.x)&&xy(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(s=>{n[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),n}},We(N2,"defaults",{}),We(N2,"defaultRoutes"),N2);function ELe(i,e){const t=i.options.ticks,r=SLe(i),n=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?TLe(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>n)return ALe(e,u,s,o/n),u;const c=CLe(s,e,n);if(o>0){let h,d;const p=o>1?Math.round((l-a)/(o-1)):null;for(CE(e,u,c,Vr(p)?0:a-p,a),h=0,d=o-1;h<d;h++)CE(e,u,c,s[h],s[h+1]);return CE(e,u,c,l,Vr(p)?e.length:l+p),u}return CE(e,u,c),u}function SLe(i){const e=i.options.offset,t=i._tickSize(),r=i._length/t+(e?0:1),n=i._maxLength/t;return Math.floor(Math.min(r,n))}function CLe(i,e,t){const r=kLe(i),n=e.length/t;if(!r)return Math.max(n,1);const s=y3e(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>n)return l}return Math.max(n,1)}function TLe(i){const e=[];let t,r;for(t=0,r=i.length;t<r;t++)i[t].major&&e.push(t);return e}function ALe(i,e,t,r){let n=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<i.length;o++)o===s&&(e.push(i[o]),n++,s=t[n*r])}function CE(i,e,t,r,n){const s=Zi(r,0),o=Math.min(Zi(n,i.length),i.length);let a=0,l,u,c;for(t=Math.ceil(t),n&&(l=n-r,t=l/Math.floor(l/t)),c=s;c<0;)a++,c=Math.round(s+a*t);for(u=Math.max(s,0);u<o;u++)u===c&&(e.push(i[u]),a++,c=Math.round(s+a*t))}function kLe(i){const e=i.length;let t,r;if(e<2)return!1;for(r=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==r)return!1;return r}const DLe=i=>i==="left"?"right":i==="right"?"left":i,Zue=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,Kue=(i,e)=>Math.min(e||i,i);function Jue(i,e){const t=[],r=i.length/e,n=i.length;let s=0;for(;s<n;s+=r)t.push(i[Math.floor(s)]);return t}function MLe(i,e,t){const r=i.ticks.length,n=Math.min(e,r-1),s=i._startPixel,o=i._endPixel,a=1e-6;let l=i.getPixelForTick(n),u;if(!(t&&(r===1?u=Math.max(l-s,o-l):e===0?u=(i.getPixelForTick(1)-l)/2:u=(l-i.getPixelForTick(n-1))/2,l+=n<e?u:-u,l<s-a||l>o+a)))return l}function LLe(i,e){vn(i,t=>{const r=t.gc,n=r.length/2;let s;if(n>e){for(s=0;s<n;++s)delete t.data[r[s]];r.splice(0,n)}})}function S1(i){return i.drawTicks?i.tickLength:0}function Que(i,e){if(!i.display)return 0;const t=Zs(i.font,e),r=ua(i.padding);return(Un(i.text)?i.text.length:1)*t.lineHeight+r.height}function RLe(i,e){return rp(i,{scale:e,type:"scale"})}function ILe(i,e,t){return rp(i,{tick:t,index:e,type:"tick"})}function OLe(i,e,t){let r=eR(i);return(t&&e!=="right"||!t&&e==="right")&&(r=DLe(r)),r}function PLe(i,e,t,r){const{top:n,left:s,bottom:o,right:a,chart:l}=i,{chartArea:u,scales:c}=l;let h=0,d,p,m;const g=o-n,v=a-s;if(i.isHorizontal()){if(p=ta(r,s,a),wr(t)){const b=Object.keys(t)[0],_=t[b];m=c[b].getPixelForValue(_)+g-e}else t==="center"?m=(u.bottom+u.top)/2+g-e:m=Zue(i,t,e);d=a-s}else{if(wr(t)){const b=Object.keys(t)[0],_=t[b];p=c[b].getPixelForValue(_)-v+e}else t==="center"?p=(u.left+u.right)/2-v+e:p=Zue(i,t,e);m=ta(r,o,n),h=t==="left"?-ks:ks}return{titleX:p,titleY:m,maxWidth:d,rotation:h}}class tg extends fd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=bl(e,Number.POSITIVE_INFINITY),t=bl(t,Number.NEGATIVE_INFINITY),r=bl(r,Number.POSITIVE_INFINITY),n=bl(n,Number.NEGATIVE_INFINITY),{min:bl(e,r),max:bl(t,n),minDefined:vs(e),maxDefined:vs(t)}}getMinMax(e){let{min:t,max:r,minDefined:n,maxDefined:s}=this.getUserBounds(),o;if(n&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),n||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=n&&t>r?t:r,{min:bl(t,bl(r,t)),max:bl(r,bl(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Mn(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=H3e(this,s,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Jue(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=ELe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Mn(this.options.afterUpdate,[this])}beforeSetDimensions(){Mn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Mn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Mn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Mn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,s;for(r=0,n=e.length;r<n;r++)s=e[r],s.label=Mn(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Mn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Mn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Kue(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,s=t.maxRotation;let o=n,a,l,u;if(!this._isVisible()||!t.display||n>=s||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const c=this._getLabelSizes(),h=c.widest.width,d=c.highest.height,p=ho(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-S1(e.grid)-t.padding-Que(e.title,this.chart.options.font),u=Math.sqrt(h*h+d*d),o=JL(Math.min(Math.asin(ho((c.highest.height+6)/a,-1,1)),Math.asin(ho(l/u,-1,1))-Math.asin(ho(d/u,-1,1)))),o=Math.max(n,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Mn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Mn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Que(n,t.options.font);if(a?(e.width=this.maxWidth,e.height=S1(s)+l):(e.height=this.maxHeight,e.width=S1(s)+l),r.display&&this.ticks.length){const{first:u,last:c,widest:h,highest:d}=this._getLabelSizes(),p=r.padding*2,m=Fu(this.labelRotation),g=Math.cos(m),v=Math.sin(m);if(a){const b=r.mirror?0:v*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+b+p)}else{const b=r.mirror?0:g*h.width+v*d.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(u,c,v,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,p=0;l?u?(d=n*e.width,p=r*t.height):(d=r*e.height,p=n*t.width):s==="start"?p=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,p=t.width/2),this.paddingLeft=Math.max((d-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let c=t.height/2,h=e.height/2;s==="start"?(c=0,h=e.height):s==="end"&&(c=t.height,h=0),this.paddingTop=c+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Mn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Vr(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=Jue(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/Kue(t,r));let u=0,c=0,h,d,p,m,g,v,b,_,E,C,T;for(h=0;h<t;h+=l){if(m=e[h].label,g=this._resolveTickFontOptions(h),n.font=v=g.string,b=s[v]=s[v]||{data:{},gc:[]},_=g.lineHeight,E=C=0,!Vr(m)&&!Un(m))E=vS(n,b.data,b.gc,E,m),C=_;else if(Un(m))for(d=0,p=m.length;d<p;++d)T=m[d],!Vr(T)&&!Un(T)&&(E=vS(n,b.data,b.gc,E,T),C+=_);o.push(E),a.push(C),u=Math.max(E,u),c=Math.max(C,c)}LLe(s,t);const D=o.indexOf(u),M=a.indexOf(c),A=I=>({width:o[I]||0,height:a[I]||0});return{first:A(0),last:A(t-1),widest:A(D),highest:A(M),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return _3e(this._alignToPixels?Kp(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=ILe(this.getContext(),e,r))}return this.$context||(this.$context=RLe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Fu(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*n?a/r:l/n:l*n<a*r?l/r:a/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:s,position:o,border:a}=n,l=s.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=S1(s),p=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,v=g/2,b=function(H){return Kp(r,H,g)};let _,E,C,T,D,M,A,I,P,U,K,L;if(o==="top")_=b(this.bottom),M=this.bottom-d,I=_-v,U=b(e.top)+v,L=e.bottom;else if(o==="bottom")_=b(this.top),U=e.top,L=b(e.bottom)-v,M=_+v,I=this.top+d;else if(o==="left")_=b(this.right),D=this.right-d,A=_-v,P=b(e.left)+v,K=e.right;else if(o==="right")_=b(this.left),P=e.left,K=b(e.right)-v,D=_+v,A=this.left+d;else if(t==="x"){if(o==="center")_=b((e.top+e.bottom)/2+.5);else if(wr(o)){const H=Object.keys(o)[0],V=o[H];_=b(this.chart.scales[H].getPixelForValue(V))}U=e.top,L=e.bottom,M=_+v,I=M+d}else if(t==="y"){if(o==="center")_=b((e.left+e.right)/2);else if(wr(o)){const H=Object.keys(o)[0],V=o[H];_=b(this.chart.scales[H].getPixelForValue(V))}D=_-v,A=D-d,P=e.left,K=e.right}const F=Zi(n.ticks.maxTicksLimit,h),$=Math.max(1,Math.ceil(h/F));for(E=0;E<h;E+=$){const H=this.getContext(E),V=s.setContext(H),J=a.setContext(H),ee=V.lineWidth,ie=V.color,de=J.dash||[],te=J.dashOffset,z=V.tickWidth,ne=V.tickColor,ve=V.tickBorderDash||[],$e=V.tickBorderDashOffset;C=MLe(this,E,l),C!==void 0&&(T=Kp(r,C,ee),u?D=A=P=K=T:M=I=U=L=T,p.push({tx1:D,ty1:M,tx2:A,ty2:I,x1:P,y1:U,x2:K,y2:L,width:ee,color:ie,borderDash:de,borderDashOffset:te,tickWidth:z,tickColor:ne,tickBorderDash:ve,tickBorderDashOffset:$e}))}return this._ticksLength=h,this._borderValue=_,p}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:h}=s,d=S1(r.grid),p=d+c,m=h?-c:p,g=-Fu(this.labelRotation),v=[];let b,_,E,C,T,D,M,A,I,P,U,K,L="middle";if(n==="top")D=this.bottom-m,M=this._getXAxisLabelAlignment();else if(n==="bottom")D=this.top+m,M=this._getXAxisLabelAlignment();else if(n==="left"){const $=this._getYAxisLabelAlignment(d);M=$.textAlign,T=$.x}else if(n==="right"){const $=this._getYAxisLabelAlignment(d);M=$.textAlign,T=$.x}else if(t==="x"){if(n==="center")D=(e.top+e.bottom)/2+p;else if(wr(n)){const $=Object.keys(n)[0],H=n[$];D=this.chart.scales[$].getPixelForValue(H)+p}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")T=(e.left+e.right)/2-p;else if(wr(n)){const $=Object.keys(n)[0],H=n[$];T=this.chart.scales[$].getPixelForValue(H)}M=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?L="top":l==="end"&&(L="bottom"));const F=this._getLabelSizes();for(b=0,_=a.length;b<_;++b){E=a[b],C=E.label;const $=s.setContext(this.getContext(b));A=this.getPixelForTick(b)+s.labelOffset,I=this._resolveTickFontOptions(b),P=I.lineHeight,U=Un(C)?C.length:1;const H=U/2,V=$.color,J=$.textStrokeColor,ee=$.textStrokeWidth;let ie=M;o?(T=A,M==="inner"&&(b===_-1?ie=this.options.reverse?"left":"right":b===0?ie=this.options.reverse?"right":"left":ie="center"),n==="top"?u==="near"||g!==0?K=-U*P+P/2:u==="center"?K=-F.highest.height/2-H*P+P:K=-F.highest.height+P/2:u==="near"||g!==0?K=P/2:u==="center"?K=F.highest.height/2-H*P:K=F.highest.height-U*P,h&&(K*=-1),g!==0&&!$.showLabelBackdrop&&(T+=P/2*Math.sin(g))):(D=A,K=(1-U)*P/2);let de;if($.showLabelBackdrop){const te=ua($.backdropPadding),z=F.heights[b],ne=F.widths[b];let ve=K-te.top,$e=0-te.left;switch(L){case"middle":ve-=z/2;break;case"bottom":ve-=z;break}switch(M){case"center":$e-=ne/2;break;case"right":$e-=ne;break;case"inner":b===_-1?$e-=ne:b>0&&($e-=ne/2);break}de={left:$e,top:ve,width:ne+te.width,height:z+te.height,color:$.backdropColor}}v.push({label:C,font:I,textOffset:K,options:{rotation:g,color:V,strokeColor:J,strokeWidth:ee,textAlign:ie,textBaseline:L,translation:[T,D],backdrop:de}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Fu(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,c;return t==="left"?n?(c=this.right+s,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c=this.left)):t==="right"?n?(c=this.left+s,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(s=>s.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=n.length;s<o;++s){const l=n[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,h,d;this.isHorizontal()?(u=Kp(e,this.left,o)-o/2,c=Kp(e,this.right,a)+a/2,h=d=l):(h=Kp(e,this.top,o)-o/2,d=Kp(e,this.bottom,a)+a/2,u=c=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,h),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&_T(r,n);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,c=o.textOffset;$m(r,u,0,c,l,a)}n&&xT(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const s=Zs(r.font),o=ua(r.padding),a=r.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||wr(t)?(l+=o.bottom,Un(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:c,maxWidth:h,rotation:d}=PLe(this,l,t,a);$m(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:d,textAlign:OLe(a,t,n),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Zi(e.grid&&e.grid.z,-1),n=Zi(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==tg.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&n.push(a)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Zs(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class TE{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;$Le(t)&&(r=this.register(t));const n=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in n||(n[s]=e,FLe(e,o,r),this.override&&bs.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in bs[n]&&(delete bs[n][r],this.override&&delete Nm[r])}}function FLe(i,e,t){const r=Il(Object.create(null),[t?bs.get(t):{},bs.get(e),i.defaults]);bs.set(e,r),i.defaultRoutes&&NLe(e,i.defaultRoutes),i.descriptors&&bs.describe(e,i.descriptors)}function NLe(i,e){Object.keys(e).forEach(t=>{const r=t.split("."),n=r.pop(),s=[i].concat(r).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");bs.route(s,n,l,a)})}function $Le(i){return"id"in i&&"defaults"in i}let BLe=class{constructor(){this.controllers=new TE(Bu,"datasets",!0),this.elements=new TE(fd,"elements"),this.plugins=new TE(Object,"plugins"),this.scales=new TE(tg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(n=>{const s=r||this._getRegistryForType(n);r||s.isForType(n)||s===this.plugins&&n.id?this._exec(e,s,n):vn(n,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const n=KL(e);Mn(r["before"+n],[],r),t[e](r),Mn(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return n}};var xa=new BLe;class jLe{constructor(){this._init=[]}notify(e,t,r,n){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,n){n=n||{};for(const s of e){const o=s.plugin,a=o[r],l=[t,n,s.options];if(Mn(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){Vr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=Zi(r.options&&r.options.plugins,{}),s=zLe(r);return n===!1&&!t?[]:GLe(e,s,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function zLe(i){const e={},t=[],r=Object.keys(xa.plugins.items);for(let s=0;s<r.length;s++)t.push(xa.getPlugin(r[s]));const n=i.plugins||[];for(let s=0;s<n.length;s++){const o=n[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function ULe(i,e){return!e&&i===!1?null:i===!0?{}:i}function GLe(i,{plugins:e,localIds:t},r,n){const s=[],o=i.getContext();for(const a of e){const l=a.id,u=ULe(r[l],n);u!==null&&s.push({plugin:a,options:qLe(i.config,{plugin:a,local:t[l]},u,o)})}return s}function qLe(i,{plugin:e,local:t},r,n){const s=i.pluginScopeKeys(e),o=i.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),i.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function z3(i,e){const t=bs.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function HLe(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function VLe(i,e){return i===e?"_index_":"_value_"}function ece(i){if(i==="x"||i==="y"||i==="r")return i}function WLe(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function U3(i,...e){if(ece(i))return i;for(const t of e){const r=t.axis||WLe(t.position)||i.length>1&&ece(i[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function tce(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function YLe(i,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===i||r.yAxisID===i);if(t.length)return tce(i,"x",t[0])||tce(i,"y",t[0])}return{}}function XLe(i,e){const t=Nm[i.type]||{scales:{}},r=e.scales||{},n=z3(i.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!wr(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=U3(o,a,YLe(o,i),bs.scales[a.type]),u=VLe(l,n),c=t.scales||{};s[o]=h_(Object.create(null),[{axis:l},a,c[l],c[u]])}),i.data.datasets.forEach(o=>{const a=o.type||i.type,l=o.indexAxis||z3(a,e),c=(Nm[a]||{}).scales||{};Object.keys(c).forEach(h=>{const d=HLe(h,l),p=o[d+"AxisID"]||d;s[p]=s[p]||Object.create(null),h_(s[p],[{axis:d},r[p],c[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];h_(a,[bs.scales[a.type],bs.scale])}),s}function rye(i){const e=i.options||(i.options={});e.plugins=Zi(e.plugins,{}),e.scales=XLe(i,e)}function nye(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function ZLe(i){return i=i||{},i.data=nye(i.data),rye(i),i}const ice=new Map,sye=new Set;function AE(i,e){let t=ice.get(i);return t||(t=e(),ice.set(i,t),sye.add(t)),t}const C1=(i,e,t)=>{const r=Uf(e,t);r!==void 0&&i.add(r)};let KLe=class{constructor(e){this._config=ZLe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nye(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),rye(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return AE(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return AE(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return AE(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return AE(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return(!n||t)&&(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const l=new Set;t.forEach(c=>{e&&(l.add(e),c.forEach(h=>C1(l,e,h))),c.forEach(h=>C1(l,n,h)),c.forEach(h=>C1(l,Nm[s]||{},h)),c.forEach(h=>C1(l,bs,h)),c.forEach(h=>C1(l,$3,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),sye.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,Nm[t]||{},bs.datasets[t]||{},{type:t},bs,$3]}resolveNamedOptions(e,t,r,n=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=rce(this._resolverCache,e,n);let l=o;if(QLe(o,t)){s.$shared=!1,r=Gf(r)?r():r;const u=this.createResolver(e,r,a);l=wy(o,r,u)}for(const u of t)s[u]=l[u];return s}createResolver(e,t,r=[""],n){const{resolver:s}=rce(this._resolverCache,e,r);return wr(t)?wy(s,t,void 0,n):s}};function rce(i,e,t){let r=i.get(e);r||(r=new Map,i.set(e,r));const n=t.join();let s=r.get(n);return s||(s={resolver:rR(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(n,s)),s}const JLe=i=>wr(i)&&Object.getOwnPropertyNames(i).some(e=>Gf(i[e]));function QLe(i,e){const{isScriptable:t,isIndexable:r}=N0e(i);for(const n of e){const s=t(n),o=r(n),a=(o||s)&&i[n];if(s&&(Gf(a)||JLe(a))||o&&Un(a))return!0}return!1}var eRe="4.4.3";const tRe=["top","bottom","left","right","chartArea"];function nce(i,e){return i==="top"||i==="bottom"||tRe.indexOf(i)===-1&&e==="x"}function sce(i,e){return function(t,r){return t[i]===r[i]?t[e]-r[e]:t[i]-r[i]}}function oce(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Mn(t&&t.onComplete,[i],e)}function iRe(i){const e=i.chart,t=e.options.animation;Mn(t&&t.onProgress,[i],e)}function oye(i){return oR()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const z2={},ace=i=>{const e=oye(i);return Object.values(z2).filter(t=>t.canvas===e).pop()};function rRe(i,e,t){const r=Object.keys(i);for(const n of r){const s=+n;if(s>=e){const o=i[n];delete i[n],(t>0||s>e)&&(i[s+t]=o)}}}function nRe(i,e,t,r){return!t||i.type==="mouseout"?null:r?e:i}function kE(i,e,t){return i.options.clip?i[t]:e[t]}function sRe(i,e){const{xScale:t,yScale:r}=i;return t&&r?{left:kE(t,e,"left"),right:kE(t,e,"right"),top:kE(r,e,"top"),bottom:kE(r,e,"bottom")}:e}class Wa{static register(...e){xa.add(...e),lce()}static unregister(...e){xa.remove(...e),lce()}constructor(e,t){const r=this.config=new KLe(t),n=oye(e),s=ace(n);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||wLe(n)),this.platform.updateConfig(r);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=l3e(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new jLe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=S3e(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],z2[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ih.listen(this,"complete",oce),Ih.listen(this,"progress",iRe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:s}=this;return Vr(e)?t&&s?s:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return xa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Due(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Tue(this.canvas,this.ctx),this}stop(){return Ih.stop(this),this}resize(e,t){Ih.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,t,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Due(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Mn(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};vn(t,(r,n)=>{r.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=U3(o,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),vn(s,o=>{const a=o.options,l=a.id,u=U3(l,a),c=Zi(a.type,o.dtype);(a.position===void 0||nce(a.position,u)!==nce(o.dposition))&&(a.position=o.dposition),n[l]=!0;let h=null;if(l in r&&r[l].type===c)h=r[l];else{const d=xa.getScale(c);h=new d({id:l,type:c,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),vn(n,(o,a)=>{o||delete r[a]}),vn(r,o=>{oa.configure(this,o,o.options),oa.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((n,s)=>n.index-s.index),r>t){for(let n=t;n<r;++n)this._destroyDatasetMeta(n);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(sce("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,n)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const s=t[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||z3(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=xa.getController(a),{datasetElementType:u,dataElementType:c}=bs.datasets[a];Object.assign(l,{dataElementType:xa.getElement(c),datasetElementType:u&&xa.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){vn(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:h}=this.getDatasetMeta(u),d=!n&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),n||vn(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sce("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){vn(this.scales,e=>{oa.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!vue(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:s}of t){const o=r==="_removeElements"?-s:s;rRe(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),n=r(0);for(let s=1;s<t;s++)if(!vue(n,r(s)))return;return Array.from(n).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;oa.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],vn(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,s)=>{n._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Gf(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ih.has(this)?this.attached&&!Ih.running(this)&&Ih.start(this):(this.draw(),oce({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resize(r,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,s;for(n=0,s=t.length;n<s;++n){const o=t[n];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,n=!r.disabled,s=sRe(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&_T(t,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),n&&xT(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Hh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const s=tLe.modes[t];return typeof s=="function"?s(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(s=>s&&s._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=rp(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,n);z_(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ih.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Tue(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete z2[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},n=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};vn(this.options.events,s=>r(s,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(l,u)=>{t.addEventListener(this,l,u),e[l]=u},n=(l,u)=>{e[l]&&(t.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,n("resize",s),this._stop(),this._resize(0,0),r("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){vn(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},vn(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!pS(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const n=this.options.hover,s=(l,u)=>l.filter(c=>!u.some(h=>c.datasetIndex===h.datasetIndex&&c.index===h.index)),o=s(t,e),a=r?e:s(e,t);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:s}=this,o=t,a=this._getActiveElements(e,n,r,o),l=p3e(e),u=nRe(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Mn(s.onHover,[e,a,this],this),l&&Mn(s.onClick,[e,a,this],this));const c=!pS(a,n);return(c||t)&&(this._active=a,this._updateHoverStyles(a,n,t)),this._lastEvent=u,c}_getActiveElements(e,t,r,n){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,n)}}We(Wa,"defaults",bs),We(Wa,"instances",z2),We(Wa,"overrides",Nm),We(Wa,"registry",xa),We(Wa,"version",eRe),We(Wa,"getChart",ace);function lce(){return vn(Wa.instances,i=>i._plugins.invalidate())}function oRe(i,e,t){const{startAngle:r,pixelMargin:n,x:s,y:o,outerRadius:a,innerRadius:l}=e;let u=n/a;i.beginPath(),i.arc(s,o,a,r-u,t+u),l>n?(u=n/l,i.arc(s,o,l,t+u,r-u,!0)):i.arc(s,o,n,t+ks,r-ks),i.closePath(),i.clip()}function aRe(i){return iR(i,["outerStart","outerEnd","innerStart","innerEnd"])}function lRe(i,e,t,r){const n=aRe(i.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=l=>{const u=(t-Math.min(s,l))*r/2;return ho(l,0,Math.min(s,u))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:ho(n.innerStart,0,o),innerEnd:ho(n.innerEnd,0,o)}}function e0(i,e,t,r){return{x:t+i*Math.cos(e),y:r+i*Math.sin(e)}}function xS(i,e,t,r,n,s){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:c}=e,h=Math.max(e.outerRadius+r+t-u,0),d=c>0?c+r+t+u:0;let p=0;const m=n-l;if(r){const $=c>0?c-r:0,H=h>0?h-r:0,V=($+H)/2,J=V!==0?m*V/(V+r):m;p=(m-J)/2}const g=Math.max(.001,m*h-t/Hn)/h,v=(m-g)/2,b=l+v+p,_=n-v-p,{outerStart:E,outerEnd:C,innerStart:T,innerEnd:D}=lRe(e,d,h,_-b),M=h-E,A=h-C,I=b+E/M,P=_-C/A,U=d+T,K=d+D,L=b+T/U,F=_-D/K;if(i.beginPath(),s){const $=(I+P)/2;if(i.arc(o,a,h,I,$),i.arc(o,a,h,$,P),C>0){const ee=e0(A,P,o,a);i.arc(ee.x,ee.y,C,P,_+ks)}const H=e0(K,_,o,a);if(i.lineTo(H.x,H.y),D>0){const ee=e0(K,F,o,a);i.arc(ee.x,ee.y,D,_+ks,F+Math.PI)}const V=(_-D/d+(b+T/d))/2;if(i.arc(o,a,d,_-D/d,V,!0),i.arc(o,a,d,V,b+T/d,!0),T>0){const ee=e0(U,L,o,a);i.arc(ee.x,ee.y,T,L+Math.PI,b-ks)}const J=e0(M,b,o,a);if(i.lineTo(J.x,J.y),E>0){const ee=e0(M,I,o,a);i.arc(ee.x,ee.y,E,b-ks,I)}}else{i.moveTo(o,a);const $=Math.cos(I)*h+o,H=Math.sin(I)*h+a;i.lineTo($,H);const V=Math.cos(P)*h+o,J=Math.sin(P)*h+a;i.lineTo(V,J)}i.closePath()}function uRe(i,e,t,r,n){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){xS(i,e,t,r,l,n);for(let u=0;u<s;++u)i.fill();isNaN(a)||(l=o+(a%Gn||Gn))}return xS(i,e,t,r,l,n),i.fill(),l}function cRe(i,e,t,r,n){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:c,borderDash:h,borderDashOffset:d}=l,p=l.borderAlign==="inner";if(!u)return;i.setLineDash(h||[]),i.lineDashOffset=d,p?(i.lineWidth=u*2,i.lineJoin=c||"round"):(i.lineWidth=u,i.lineJoin=c||"bevel");let m=e.endAngle;if(s){xS(i,e,t,r,m,n);for(let g=0;g<s;++g)i.stroke();isNaN(a)||(m=o+(a%Gn||Gn))}p&&oRe(i,e,m),s||(xS(i,e,t,r,m,n),i.stroke())}class Cf extends fd{constructor(t){super();We(this,"circumference");We(this,"endAngle");We(this,"fullCircles");We(this,"innerRadius");We(this,"outerRadius");We(this,"pixelMargin");We(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,n){const s=this.getProps(["x","y"],n),{angle:o,distance:a}=A0e(s,{x:t,y:r}),{startAngle:l,endAngle:u,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=(this.options.spacing+this.options.borderWidth)/2,g=Zi(d,u-l)>=Gn||U_(o,l,u),v=Gh(a,c+p,h+p);return g&&v}getCenterPoint(t){const{x:r,y:n,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:c}=this.options,h=(s+o)/2,d=(a+l+c+u)/2;return{x:r+Math.cos(h)*d,y:n+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:n}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>Gn?Math.floor(n/Gn):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const u=1-Math.sin(Math.min(Hn,n||0)),c=s*u;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,uRe(t,this,c,o,a),cRe(t,this,c,o,a),t.restore()}}We(Cf,"id","arc"),We(Cf,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),We(Cf,"defaultRoutes",{backgroundColor:"backgroundColor"}),We(Cf,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function aye(i,e,t=e){i.lineCap=Zi(t.borderCapStyle,e.borderCapStyle),i.setLineDash(Zi(t.borderDash,e.borderDash)),i.lineDashOffset=Zi(t.borderDashOffset,e.borderDashOffset),i.lineJoin=Zi(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=Zi(t.borderWidth,e.borderWidth),i.strokeStyle=Zi(t.borderColor,e.borderColor)}function hRe(i,e,t){i.lineTo(t.x,t.y)}function dRe(i){return i.stepped?F3e:i.tension||i.cubicInterpolationMode==="monotone"?N3e:hRe}function lye(i,e,t={}){const r=i.length,{start:n=0,end:s=r-1}=t,{start:o,end:a}=e,l=Math.max(n,o),u=Math.min(s,a),c=n<o&&s<o||n>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!c?r+u-l:u-l}}function fRe(i,e,t,r){const{points:n,options:s}=e,{count:o,start:a,loop:l,ilen:u}=lye(n,t,r),c=dRe(s);let{move:h=!0,reverse:d}=r||{},p,m,g;for(p=0;p<=u;++p)m=n[(a+(d?u-p:p))%o],!m.skip&&(h?(i.moveTo(m.x,m.y),h=!1):c(i,g,m,d,s.stepped),g=m);return l&&(m=n[(a+(d?u:0))%o],c(i,g,m,d,s.stepped)),!!l}function pRe(i,e,t,r){const n=e.points,{count:s,start:o,ilen:a}=lye(n,t,r),{move:l=!0,reverse:u}=r||{};let c=0,h=0,d,p,m,g,v,b;const _=C=>(o+(u?a-C:C))%s,E=()=>{g!==v&&(i.lineTo(c,v),i.lineTo(c,g),i.lineTo(c,b))};for(l&&(p=n[_(0)],i.moveTo(p.x,p.y)),d=0;d<=a;++d){if(p=n[_(d)],p.skip)continue;const C=p.x,T=p.y,D=C|0;D===m?(T<g?g=T:T>v&&(v=T),c=(h*c+C)/++h):(E(),i.lineTo(C,T),m=D,h=0,g=v=T),b=T}E()}function G3(i){const e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?pRe:fRe}function mRe(i){return i.stepped?mMe:i.tension||i.cubicInterpolationMode==="monotone"?gMe:cm}function gRe(i,e,t,r){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,r)&&n.closePath()),aye(i,e.options),i.stroke(n)}function yRe(i,e,t,r){const{segments:n,options:s}=e,o=G3(e);for(const a of n)aye(i,s,a.style),i.beginPath(),o(i,e,a,{start:t,end:t+r-1})&&i.closePath(),i.stroke()}const vRe=typeof Path2D=="function";function bRe(i,e,t,r){vRe&&!e.options.segment?gRe(i,e,t,r):yRe(i,e,t,r)}class Tf extends fd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;aMe(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wMe(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],s=this.points,o=W0e(this,{property:t,start:n,end:n});if(!o.length)return;const a=[],l=mRe(r);let u,c;for(u=0,c=o.length;u<c;++u){const{start:h,end:d}=o[u],p=s[h],m=s[d];if(p===m){a.push(p);continue}const g=Math.abs((n-p[t])/(m[t]-p[t])),v=l(p,m,g,r.stepped);v[t]=e[t],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,t,r){return G3(this)(e,this,t,r)}path(e,t,r){const n=this.segments,s=G3(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const a of n)o&=s(e,this,a,{start:t,end:t+r-1});return!!o}draw(e,t,r,n){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),bRe(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}We(Tf,"id","line"),We(Tf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),We(Tf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),We(Tf,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function uce(i,e,t,r){const n=i.options,{[t]:s}=i.getProps([t],r);return Math.abs(e-s)<n.radius+n.hitRadius}class Tm extends fd{constructor(t){super();We(this,"parsed");We(this,"skip");We(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,n){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return uce(this,t,"x",r)}inYRange(t,r){return uce(this,t,"y",r)}getCenterPoint(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const n=r&&t.borderWidth||0;return(r+n)*2}draw(t,r){const n=this.options;this.skip||n.radius<.1||!Hh(this,r,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,B3(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}We(Tm,"id","point"),We(Tm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),We(Tm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function uye(i,e){const{x:t,y:r,base:n,width:s,height:o}=i.getProps(["x","y","base","width","height"],e);let a,l,u,c,h;return i.horizontal?(h=o/2,a=Math.min(t,n),l=Math.max(t,n),u=r-h,c=r+h):(h=s/2,a=t-h,l=t+h,u=Math.min(r,n),c=Math.max(r,n)),{left:a,top:u,right:l,bottom:c}}function Af(i,e,t,r){return i?0:ho(e,t,r)}function _Re(i,e,t){const r=i.options.borderWidth,n=i.borderSkipped,s=F0e(r);return{t:Af(n.top,s.top,0,t),r:Af(n.right,s.right,0,e),b:Af(n.bottom,s.bottom,0,t),l:Af(n.left,s.left,0,e)}}function xRe(i,e,t){const{enableBorderRadius:r}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,s=Em(n),o=Math.min(e,t),a=i.borderSkipped,l=r||wr(n);return{topLeft:Af(!l||a.top||a.left,s.topLeft,0,o),topRight:Af(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Af(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Af(!l||a.bottom||a.right,s.bottomRight,0,o)}}function wRe(i){const e=uye(i),t=e.right-e.left,r=e.bottom-e.top,n=_Re(i,t/2,r/2),s=xRe(i,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,s.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(n.b,n.r))}}}}function ak(i,e,t,r){const n=e===null,s=t===null,a=i&&!(n&&s)&&uye(i,r);return a&&(n||Gh(e,a.left,a.right))&&(s||Gh(t,a.top,a.bottom))}function ERe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function SRe(i,e){i.rect(e.x,e.y,e.w,e.h)}function lk(i,e,t={}){const r=i.x!==t.x?-e:0,n=i.y!==t.y?-e:0,s=(i.x+i.w!==t.x+t.w?e:0)-r,o=(i.y+i.h!==t.y+t.h?e:0)-n;return{x:i.x+r,y:i.y+n,w:i.w+s,h:i.h+o,radius:i.radius}}class Am extends fd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:s,outer:o}=wRe(this),a=ERe(o.radius)?G_:SRe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,lk(o,t,s)),e.clip(),a(e,lk(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,lk(s,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return ak(this,e,t,r)}inXRange(e,t){return ak(this,e,null,t)}inYRange(e,t){return ak(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+n)/2:t,y:s?r:(r+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}We(Am,"id","bar"),We(Am,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),We(Am,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var CRe=Object.freeze({__proto__:null,ArcElement:Cf,BarElement:Am,LineElement:Tf,PointElement:Tm});const q3=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],cce=q3.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function cye(i){return q3[i%q3.length]}function hye(i){return cce[i%cce.length]}function TRe(i,e){return i.borderColor=cye(e),i.backgroundColor=hye(e),++e}function ARe(i,e){return i.backgroundColor=i.data.map(()=>cye(e++)),e}function kRe(i,e){return i.backgroundColor=i.data.map(()=>hye(e++)),e}function DRe(i){let e=0;return(t,r)=>{const n=i.getDatasetMeta(r).controller;n instanceof ym?e=ARe(t,e):n instanceof Fc?e=kRe(t,e):n&&(e=TRe(t,e))}}function hce(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}function MRe(i){return i&&(i.borderColor||i.backgroundColor)}var LRe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;const{data:{datasets:r},options:n}=i.config,{elements:s}=n;if(!t.forceOverride&&(hce(r)||MRe(n)||s&&hce(s)))return;const o=DRe(i);r.forEach(o)}};function RRe(i,e,t,r,n){const s=n.samples||r;if(s>=t)return i.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const u=e+t-1;let c=e,h,d,p,m,g;for(o[l++]=i[c],h=0;h<s-2;h++){let v=0,b=0,_;const E=Math.floor((h+1)*a)+1+e,C=Math.min(Math.floor((h+2)*a)+1,t)+e,T=C-E;for(_=E;_<C;_++)v+=i[_].x,b+=i[_].y;v/=T,b/=T;const D=Math.floor(h*a)+1+e,M=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:A,y:I}=i[c];for(p=m=-1,_=D;_<M;_++)m=.5*Math.abs((A-v)*(i[_].y-I)-(A-i[_].x)*(b-I)),m>p&&(p=m,d=i[_],g=_);o[l++]=d,c=g}return o[l++]=i[u],o}function IRe(i,e,t,r){let n=0,s=0,o,a,l,u,c,h,d,p,m,g;const v=[],b=e+t-1,_=i[e].x,C=i[b].x-_;for(o=e;o<e+t;++o){a=i[o],l=(a.x-_)/C*r,u=a.y;const T=l|0;if(T===c)u<m?(m=u,h=o):u>g&&(g=u,d=o),n=(s*n+a.x)/++s;else{const D=o-1;if(!Vr(h)&&!Vr(d)){const M=Math.min(h,d),A=Math.max(h,d);M!==p&&M!==D&&v.push({...i[M],x:n}),A!==p&&A!==D&&v.push({...i[A],x:n})}o>0&&D!==p&&v.push(i[D]),v.push(a),c=T,s=0,m=g=u,h=d=p=o}}return v}function dye(i){if(i._decimated){const e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function dce(i){i.data.datasets.forEach(e=>{dye(e)})}function ORe(i,e){const t=e.length;let r=0,n;const{iScale:s}=i,{min:o,max:a,minDefined:l,maxDefined:u}=s.getUserBounds();return l&&(r=ho(qh(e,s.axis,o).lo,0,t-1)),u?n=ho(qh(e,s.axis,a).hi+1,r,t)-r:n=t-r,{start:r,count:n}}var PRe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled){dce(i);return}const r=i.width;i.data.datasets.forEach((n,s)=>{const{_data:o,indexAxis:a}=n,l=i.getDatasetMeta(s),u=o||n.data;if(H1([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const c=i.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||i.options.parsing)return;let{start:h,count:d}=ORe(l,u);const p=t.threshold||4*r;if(d<=p){dye(n);return}Vr(o)&&(n._data=u,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let m;switch(t.algorithm){case"lttb":m=RRe(u,h,d,r,t);break;case"min-max":m=IRe(u,h,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}n._decimated=m})},destroy(i){dce(i)}};function FRe(i,e,t){const r=i.segments,n=i.points,s=e.points,o=[];for(const a of r){let{start:l,end:u}=a;u=uR(l,u,n);const c=H3(t,n[l],n[u],a.loop);if(!e.segments){o.push({source:a,target:c,start:n[l],end:n[u]});continue}const h=W0e(e,c);for(const d of h){const p=H3(t,s[d.start],s[d.end],d.loop),m=V0e(a,n,p);for(const g of m)o.push({source:g,target:d,start:{[t]:fce(c,p,"start",Math.max)},end:{[t]:fce(c,p,"end",Math.min)}})}}return o}function H3(i,e,t,r){if(r)return;let n=e[i],s=t[i];return i==="angle"&&(n=xl(n),s=xl(s)),{property:i,start:n,end:s}}function NRe(i,e){const{x:t=null,y:r=null}=i||{},n=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=uR(o,a,n);const l=n[o],u=n[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:u.x,y:r})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:u.y}))}),s}function uR(i,e,t){for(;e>i;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function fce(i,e,t,r){return i&&e?r(i[t],e[t]):i?i[t]:e?e[t]:0}function fye(i,e){let t=[],r=!1;return Un(i)?(r=!0,t=i):t=NRe(i,e),t.length?new Tf({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function pce(i){return i&&i.fill!==!1}function $Re(i,e,t){let n=i[e].fill;const s=[e];let o;if(!t)return n;for(;n!==!1&&s.indexOf(n)===-1;){if(!vs(n))return n;if(o=i[n],!o)return!1;if(o.visible)return n;s.push(n),n=o.fill}return!1}function BRe(i,e,t){const r=GRe(i);if(wr(r))return isNaN(r.value)?!1:r;let n=parseFloat(r);return vs(n)&&Math.floor(n)===n?jRe(r[0],e,n,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function jRe(i,e,t,r){return(i==="-"||i==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function zRe(i,e){let t=null;return i==="start"?t=e.bottom:i==="end"?t=e.top:wr(i)?t=e.getPixelForValue(i.value):e.getBasePixel&&(t=e.getBasePixel()),t}function URe(i,e,t){let r;return i==="start"?r=t:i==="end"?r=e.options.reverse?e.min:e.max:wr(i)?r=i.value:r=e.getBaseValue(),r}function GRe(i){const e=i.options,t=e.fill;let r=Zi(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function qRe(i){const{scale:e,index:t,line:r}=i,n=[],s=r.segments,o=r.points,a=HRe(e,t);a.push(fye({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const u=s[l];for(let c=u.start;c<=u.end;c++)VRe(n,o[c],a)}return new Tf({points:n,options:{}})}function HRe(i,e){const t=[],r=i.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const s=r[n];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function VRe(i,e,t){const r=[];for(let n=0;n<t.length;n++){const s=t[n],{first:o,last:a,point:l}=WRe(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(i.push(l),!a)break}}i.push(...r)}function WRe(i,e,t){const r=i.interpolate(e,t);if(!r)return{};const n=r[t],s=i.segments,o=i.points;let a=!1,l=!1;for(let u=0;u<s.length;u++){const c=s[u],h=o[c.start][t],d=o[c.end][t];if(Gh(n,h,d)){a=n===h,l=n===d;break}}return{first:a,last:l,point:r}}class pye{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:n,y:s,radius:o}=this;return t=t||{start:0,end:Gn},e.arc(n,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:n}=this,s=e.angle;return{x:t+Math.cos(s)*n,y:r+Math.sin(s)*n,angle:s}}}function YRe(i){const{chart:e,fill:t,line:r}=i;if(vs(t))return XRe(e,t);if(t==="stack")return qRe(i);if(t==="shape")return!0;const n=ZRe(i);return n instanceof pye?n:fye(n,r)}function XRe(i,e){const t=i.getDatasetMeta(e);return t&&i.isDatasetVisible(e)?t.dataset:null}function ZRe(i){return(i.scale||{}).getPointPositionForValue?JRe(i):KRe(i)}function KRe(i){const{scale:e={},fill:t}=i,r=zRe(t,e);if(vs(r)){const n=e.isHorizontal();return{x:n?r:null,y:n?null:r}}return null}function JRe(i){const{scale:e,fill:t}=i,r=e.options,n=e.getLabels().length,s=r.reverse?e.max:e.min,o=URe(t,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new pye({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(e.getPointPositionForValue(l,o));return a}function uk(i,e,t){const r=YRe(e),{line:n,scale:s,axis:o}=e,a=n.options,l=a.fill,u=a.backgroundColor,{above:c=u,below:h=u}=l||{};r&&n.points.length&&(_T(i,t),QRe(i,{line:n,target:r,above:c,below:h,area:t,scale:s,axis:o}),xT(i))}function QRe(i,e){const{line:t,target:r,above:n,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;i.save(),l==="x"&&s!==n&&(mce(i,r,o.top),gce(i,{line:t,target:r,color:n,scale:a,property:l}),i.restore(),i.save(),mce(i,r,o.bottom)),gce(i,{line:t,target:r,color:s,scale:a,property:l}),i.restore()}function mce(i,e,t){const{segments:r,points:n}=e;let s=!0,o=!1;i.beginPath();for(const a of r){const{start:l,end:u}=a,c=n[l],h=n[uR(l,u,n)];s?(i.moveTo(c.x,c.y),s=!1):(i.lineTo(c.x,t),i.lineTo(c.x,c.y)),o=!!e.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(h.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function gce(i,e){const{line:t,target:r,property:n,color:s,scale:o}=e,a=FRe(t,r,n);for(const{source:l,target:u,start:c,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,p=r!==!0;i.save(),i.fillStyle=d,eIe(i,o,p&&H3(n,c,h)),i.beginPath();const m=!!t.pathSegment(i,l);let g;if(p){m?i.closePath():yce(i,r,h,n);const v=!!r.pathSegment(i,u,{move:m,reverse:!0});g=m&&v,g||yce(i,r,c,n)}i.closePath(),i.fill(g?"evenodd":"nonzero"),i.restore()}}function eIe(i,e,t){const{top:r,bottom:n}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(i.beginPath(),i.rect(o,r,a-o,n-r),i.clip())}function yce(i,e,t,r){const n=e.interpolate(t,r);n&&i.lineTo(n.x,n.y)}var tIe={id:"filler",afterDatasetsUpdate(i,e,t){const r=(i.data.datasets||[]).length,n=[];let s,o,a,l;for(o=0;o<r;++o)s=i.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Tf&&(l={visible:i.isDatasetVisible(o),index:o,fill:BRe(a,o,r),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,n.push(l);for(o=0;o<r;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=$Re(n,o,t.propagate))},beforeDraw(i,e,t){const r=t.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&uk(i.ctx,a,s))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=i.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n){const s=r[n].$filler;pce(s)&&uk(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,e,t){const r=e.meta.$filler;!pce(r)||t.drawTime!=="beforeDatasetDraw"||uk(i.ctx,r,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const vce=(i,e)=>{let{boxHeight:t=e,boxWidth:r=e}=i;return i.usePointStyle&&(t=Math.min(t,e),r=i.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},iIe=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class bce extends fd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Mn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,n)=>e.sort(r,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,n=Zs(r.font),s=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=vce(r,s);let u,c;t.font=n.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,s,a,l)+10):(c=this.maxHeight,u=this._fitCols(o,n,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=n+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,p=-c;return this.legendItems.forEach((m,g)=>{const v=r+t/2+s.measureText(m.text).width;(g===0||u[u.length-1]+v+2*a>o)&&(h+=c,u[u.length-(g>0?0:1)]=0,p+=c,d++),l[g]={left:0,top:p,row:d,width:v,height:n},u[u.length-1]+=v+a}),h}_fitCols(e,t,r,n){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-e;let h=a,d=0,p=0,m=0,g=0;return this.legendItems.forEach((v,b)=>{const{itemWidth:_,itemHeight:E}=rIe(r,t,s,v,n);b>0&&p+E+2*a>c&&(h+=d+a,u.push({width:d,height:p}),m+=d+a,g++,d=p=0),l[b]={left:m,top:p,col:g,width:_,height:E},d=Math.max(d,_),p+=E+a}),h+=d,u.push({width:d,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:s}}=this,o=ey(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=ta(r,this.left+n,this.right-this.lineWidths[a]);for(const u of t)a!==u.row&&(a=u.row,l=ta(r,this.left+n,this.right-this.lineWidths[a])),u.top+=this.top+e+n,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+n}else{let a=0,l=ta(r,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const u of t)u.col!==a&&(a=u.col,l=ta(r,this.top+e+n,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+n,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;_T(e,this),this._draw(),xT(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:s,labels:o}=e,a=bs.color,l=ey(e.rtl,this.left,this.width),u=Zs(o.font),{padding:c}=o,h=u.size,d=h/2;let p;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=u.string;const{boxWidth:m,boxHeight:g,itemHeight:v}=vce(o,h),b=function(D,M,A){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;n.save();const I=Zi(A.lineWidth,1);if(n.fillStyle=Zi(A.fillStyle,a),n.lineCap=Zi(A.lineCap,"butt"),n.lineDashOffset=Zi(A.lineDashOffset,0),n.lineJoin=Zi(A.lineJoin,"miter"),n.lineWidth=I,n.strokeStyle=Zi(A.strokeStyle,a),n.setLineDash(Zi(A.lineDash,[])),o.usePointStyle){const P={radius:g*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:I},U=l.xPlus(D,m/2),K=M+d;P0e(n,P,U,K,o.pointStyleWidth&&m)}else{const P=M+Math.max((h-g)/2,0),U=l.leftForLtr(D,m),K=Em(A.borderRadius);n.beginPath(),Object.values(K).some(L=>L!==0)?G_(n,{x:U,y:P,w:m,h:g,radius:K}):n.rect(U,P,m,g),n.fill(),I!==0&&n.stroke()}n.restore()},_=function(D,M,A){$m(n,A.text,D,M+v/2,u,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},E=this.isHorizontal(),C=this._computeTitleHeight();E?p={x:ta(s,this.left+c,this.right-r[0]),y:this.top+c+C,line:0}:p={x:this.left+c,y:ta(s,this.top+C+c,this.bottom-t[0].height),line:0},G0e(this.ctx,e.textDirection);const T=v+c;this.legendItems.forEach((D,M)=>{n.strokeStyle=D.fontColor,n.fillStyle=D.fontColor;const A=n.measureText(D.text).width,I=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),P=m+d+A;let U=p.x,K=p.y;l.setWidth(this.width),E?M>0&&U+P+c>this.right&&(K=p.y+=T,p.line++,U=p.x=ta(s,this.left+c,this.right-r[p.line])):M>0&&K+T>this.bottom&&(U=p.x=U+t[p.line].width+c,p.line++,K=p.y=ta(s,this.top+C+c,this.bottom-t[p.line].height));const L=l.x(U);if(b(L,K,D),U=C3e(I,U+m+d,E?U+P:this.right,e.rtl),_(l.x(U),K,D),E)p.x+=P+c;else if(typeof D.text!="string"){const F=u.lineHeight;p.y+=mye(D,F)+c}else p.y+=T}),q0e(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Zs(t.font),n=ua(t.padding);if(!t.display)return;const s=ey(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=r.size/2,u=n.top+l;let c,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+u,h=ta(e.align,h,this.right-d);else{const m=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);c=u+ta(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=ta(a,h,h+d);o.textAlign=s.textAlign(eR(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,$m(o,t.text,p,c,r)}_computeTitleHeight(){const e=this.options.title,t=Zs(e.font),r=ua(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,s;if(Gh(e,this.left,this.right)&&Gh(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(n=s[r],Gh(e,n.left,n.left+n.width)&&Gh(t,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!oIe(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,s=iIe(n,r);n&&!s&&Mn(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!s&&Mn(t.onHover,[e,r,this],this)}else r&&Mn(t.onClick,[e,r,this],this)}}function rIe(i,e,t,r,n){const s=nIe(r,i,e,t),o=sIe(n,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function nIe(i,e,t,r){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(n).width}function sIe(i,e,t){let r=i;return typeof e.text!="string"&&(r=mye(e,t)),r}function mye(i,e){const t=i.text?i.text.length:0;return e*t}function oIe(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var aIe={id:"legend",_element:bce,start(i,e,t){const r=i.legend=new bce({ctx:i.ctx,options:t,chart:i});oa.configure(i,r,t),oa.addBox(i,r)},stop(i){oa.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const r=i.legend;oa.configure(i,r,t),r.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const r=e.datasetIndex,n=t.chart;n.isDatasetVisible(r)?(n.hide(r),e.hidden=!0):(n.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:n,color:s,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(t?0:void 0),c=ua(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:n||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class cR extends fd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=Un(r.text)?r.text.length:1;this._padding=ua(r.padding);const s=n*Zs(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:n,right:s,options:o}=this,a=o.align;let l=0,u,c,h;return this.isHorizontal()?(c=ta(a,r,s),h=t+e,u=s-r):(o.position==="left"?(c=r+e,h=ta(a,n,t),l=Hn*-.5):(c=s-e,h=ta(a,t,n),l=Hn*.5),u=n-t),{titleX:c,titleY:h,maxWidth:u,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Zs(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);$m(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:u,textAlign:eR(t.align),textBaseline:"middle",translation:[o,a]})}}function lIe(i,e){const t=new cR({ctx:i.ctx,options:e,chart:i});oa.configure(i,t,e),oa.addBox(i,t),i.titleBlock=t}var uIe={id:"title",_element:cR,start(i,e,t){lIe(i,t)},stop(i){const e=i.titleBlock;oa.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const r=i.titleBlock;oa.configure(i,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const DE=new WeakMap;var cIe={id:"subtitle",start(i,e,t){const r=new cR({ctx:i.ctx,options:t,chart:i});oa.configure(i,r,t),oa.addBox(i,r),DE.set(i,r)},stop(i){oa.removeBox(i,DE.get(i)),DE.delete(i)},beforeUpdate(i,e,t){const r=DE.get(i);oa.configure(i,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const W1={average(i){if(!i.length)return!1;let e,t,r=new Set,n=0,s=0;for(e=0,t=i.length;e<t;++e){const a=i[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),n+=l.y,++s}}return{x:[...r].reduce((a,l)=>a+l)/r.size,y:n/s}},nearest(i,e){if(!i.length)return!1;let t=e.x,r=e.y,n=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=i.length;s<o;++s){const l=i[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=N3(e,u);c<n&&(n=c,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function yc(i,e){return e&&(Un(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function Oh(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function hIe(i,e){const{element:t,datasetIndex:r,index:n}=e,s=i.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(n);return{chart:i,label:o,parsed:s.getParsed(n),raw:i.data.datasets[r].data[n],formattedValue:a,dataset:s.getDataset(),dataIndex:n,datasetIndex:r,element:t}}function _ce(i,e){const t=i.chart.ctx,{body:r,footer:n,title:s}=i,{boxWidth:o,boxHeight:a}=e,l=Zs(e.bodyFont),u=Zs(e.titleFont),c=Zs(e.footerFont),h=s.length,d=n.length,p=r.length,m=ua(e.padding);let g=m.height,v=0,b=r.reduce((C,T)=>C+T.before.length+T.lines.length+T.after.length,0);if(b+=i.beforeBody.length+i.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),b){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*C+(b-p)*l.lineHeight+(b-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let _=0;const E=function(C){v=Math.max(v,t.measureText(C).width+_)};return t.save(),t.font=u.string,vn(i.title,E),t.font=l.string,vn(i.beforeBody.concat(i.afterBody),E),_=e.displayColors?o+2+e.boxPadding:0,vn(r,C=>{vn(C.before,E),vn(C.lines,E),vn(C.after,E)}),_=0,t.font=c.string,vn(i.footer,E),t.restore(),v+=m.width,{width:v,height:g}}function dIe(i,e){const{y:t,height:r}=e;return t<r/2?"top":t>i.height-r/2?"bottom":"center"}function fIe(i,e,t,r){const{x:n,width:s}=r,o=t.caretSize+t.caretPadding;if(i==="left"&&n+s+o>e.width||i==="right"&&n-s-o<0)return!0}function pIe(i,e,t,r){const{x:n,width:s}=t,{width:o,chartArea:{left:a,right:l}}=i;let u="center";return r==="center"?u=n<=(a+l)/2?"left":"right":n<=s/2?u="left":n>=o-s/2&&(u="right"),fIe(u,i,e,t)&&(u="center"),u}function xce(i,e,t){const r=t.yAlign||e.yAlign||dIe(i,t);return{xAlign:t.xAlign||e.xAlign||pIe(i,e,t,r),yAlign:r}}function mIe(i,e){let{x:t,width:r}=i;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function gIe(i,e,t){let{y:r,height:n}=i;return e==="top"?r+=t:e==="bottom"?r-=n+t:r-=n/2,r}function wce(i,e,t,r){const{caretSize:n,caretPadding:s,cornerRadius:o}=i,{xAlign:a,yAlign:l}=t,u=n+s,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:p}=Em(o);let m=mIe(e,a);const g=gIe(e,l,u);return l==="center"?a==="left"?m+=u:a==="right"&&(m-=u):a==="left"?m-=Math.max(c,d)+n:a==="right"&&(m+=Math.max(h,p)+n),{x:ho(m,0,r.width-e.width),y:ho(g,0,r.height-e.height)}}function ME(i,e,t){const r=ua(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-r.right:i.x+r.left}function Ece(i){return yc([],Oh(i))}function yIe(i,e,t){return rp(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Sce(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const gye={beforeTitle:Ah,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Ah,beforeBody:Ah,beforeLabel:Ah,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return Vr(t)||(e+=t),e},labelColor(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ah,afterBody:Ah,beforeFooter:Ah,footer:Ah,afterFooter:Ah};function $a(i,e,t,r){const n=i[e].call(t,r);return typeof n>"u"?gye[e].call(t,r):n}class V3 extends fd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,s=new Y0e(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=yIe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,n=$a(r,"beforeTitle",this,e),s=$a(r,"title",this,e),o=$a(r,"afterTitle",this,e);let a=[];return a=yc(a,Oh(n)),a=yc(a,Oh(s)),a=yc(a,Oh(o)),a}getBeforeBody(e,t){return Ece($a(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return vn(e,s=>{const o={before:[],lines:[],after:[]},a=Sce(r,s);yc(o.before,Oh($a(a,"beforeLabel",this,s))),yc(o.lines,$a(a,"label",this,s)),yc(o.after,Oh($a(a,"afterLabel",this,s))),n.push(o)}),n}getAfterBody(e,t){return Ece($a(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=$a(r,"beforeFooter",this,e),s=$a(r,"footer",this,e),o=$a(r,"afterFooter",this,e);let a=[];return a=yc(a,Oh(n)),a=yc(a,Oh(s)),a=yc(a,Oh(o)),a}_createItems(e){const t=this._active,r=this.chart.data,n=[],s=[],o=[];let a=[],l,u;for(l=0,u=t.length;l<u;++l)a.push(hIe(this.chart,t[l]));return e.filter&&(a=a.filter((c,h,d)=>e.filter(c,h,d,r))),e.itemSort&&(a=a.sort((c,h)=>e.itemSort(c,h,r))),vn(a,c=>{const h=Sce(e.callbacks,c);n.push($a(h,"labelColor",this,c)),s.push($a(h,"labelPointStyle",this,c)),o.push($a(h,"labelTextColor",this,c))}),this.labelColors=n,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let s,o=[];if(!n.length)this.opacity!==0&&(s={opacity:0});else{const a=W1[r.position].call(this,n,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=_ce(this,r),u=Object.assign({},a,l),c=xce(this.chart,r,u),h=wce(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const s=this.getCaretPosition(e,r,n);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:h}=Em(a),{x:d,y:p}=e,{width:m,height:g}=t;let v,b,_,E,C,T;return s==="center"?(C=p+g/2,n==="left"?(v=d,b=v-o,E=C+o,T=C-o):(v=d+m,b=v+o,E=C-o,T=C+o),_=v):(n==="left"?b=d+Math.max(l,c)+o:n==="right"?b=d+m-Math.max(u,h)-o:b=this.caretX,s==="top"?(E=p,C=E-o,v=b-o,_=b+o):(E=p+g,C=E+o,v=b+o,_=b-o),T=E),{x1:v,x2:b,x3:_,y1:E,y2:C,y3:T}}drawTitle(e,t,r){const n=this.title,s=n.length;let o,a,l;if(s){const u=ey(r.rtl,this.x,this.width);for(e.x=ME(this,r.titleAlign,r),t.textAlign=u.textAlign(r.titleAlign),t.textBaseline="middle",o=Zs(r.titleFont),a=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(n[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,t,r,n,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=s,c=Zs(s.bodyFont),h=ME(this,"left",s),d=n.x(h),p=l<c.lineHeight?(c.lineHeight-l)/2:0,m=t.y+p;if(s.usePointStyle){const g={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=n.leftForLtr(d,u)+u/2,b=m+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,B3(e,g,v,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,B3(e,g,v,b)}else{e.lineWidth=wr(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=n.leftForLtr(d,u),v=n.leftForLtr(n.xPlus(d,1),u-2),b=Em(o.borderRadius);Object.values(b).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,G_(e,{x:g,y:m,w:u,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),G_(e,{x:v,y:m+1,w:u-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,m,u,l),e.strokeRect(g,m,u,l),e.fillStyle=o.backgroundColor,e.fillRect(v,m+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=r,h=Zs(r.bodyFont);let d=h.lineHeight,p=0;const m=ey(r.rtl,this.x,this.width),g=function(A){t.fillText(A,m.x(e.x+p),e.y+d/2),e.y+=d+s},v=m.textAlign(o);let b,_,E,C,T,D,M;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=ME(this,v,r),t.fillStyle=r.bodyColor,vn(this.beforeBody,g),p=a&&v!=="right"?o==="center"?u/2+c:u+2+c:0,C=0,D=n.length;C<D;++C){for(b=n[C],_=this.labelTextColors[C],t.fillStyle=_,vn(b.before,g),E=b.lines,a&&E.length&&(this._drawColorBox(t,e,C,m,r),d=Math.max(h.lineHeight,l)),T=0,M=E.length;T<M;++T)g(E[T]),d=h.lineHeight;vn(b.after,g)}p=0,d=h.lineHeight,vn(this.afterBody,g),e.y-=s}drawFooter(e,t,r){const n=this.footer,s=n.length;let o,a;if(s){const l=ey(r.rtl,this.x,this.width);for(e.x=ME(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=l.textAlign(r.footerAlign),t.textBaseline="middle",o=Zs(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(n[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:c}=r,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=Em(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,r,n),t.lineTo(a+u-d,l),t.quadraticCurveTo(a+u,l,a+u,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,r,n),t.lineTo(a+u,l+c-m),t.quadraticCurveTo(a+u,l+c,a+u-m,l+c),o==="bottom"&&this.drawCaret(e,t,r,n),t.lineTo(a+p,l+c),t.quadraticCurveTo(a,l+c,a,l+c-p),o==="center"&&s==="left"&&this.drawCaret(e,t,r,n),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,s=r&&r.y;if(n||s){const o=W1[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=_ce(this,e),l=Object.assign({},o,this._size),u=xce(t,e,l),c=wce(e,l,u,t);(n._to!==c.x||s._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=ua(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,n,t),G0e(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),q0e(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!pS(r,n),o=this._positionChanged(n,t);(s||o)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),a=this._positionChanged(o,e),l=t||!pS(o,s)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,r,n){const s=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:n,options:s}=this,o=W1[s.position].call(this,e,t);return o!==!1&&(r!==o.x||n!==o.y)}}We(V3,"positioners",W1);var yye={id:"tooltip",_element:V3,positioners:W1,afterInit(i,e,t){t&&(i.tooltip=new V3({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gye},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},vIe=Object.freeze({__proto__:null,Colors:LRe,Decimation:PRe,Filler:tIe,Legend:aIe,SubTitle:cIe,Title:uIe,Tooltip:yye});const bIe=(i,e,t,r)=>(typeof e=="string"?(t=i.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function _Ie(i,e,t,r){const n=i.indexOf(e);if(n===-1)return bIe(i,e,t,r);const s=i.lastIndexOf(e);return n!==s?t:n}const xIe=(i,e)=>i===null?null:ho(Math.round(i),0,e);function Cce(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class Sy extends tg{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:n,label:s}of t)r[n]===s&&r.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Vr(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:_Ie(r,e,Zi(t,e),this._addedLabels),xIe(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)n.push({value:o});return n}getLabelForValue(e){return Cce.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}We(Sy,"id","category"),We(Sy,"defaults",{ticks:{callback:Cce}});function wIe(i,e){const t=[],{bounds:n,step:s,min:o,max:a,precision:l,count:u,maxTicks:c,maxDigits:h,includeBounds:d}=i,p=s||1,m=c-1,{min:g,max:v}=e,b=!Vr(o),_=!Vr(a),E=!Vr(u),C=(v-g)/(h+1);let T=_ue((v-g)/m/p)*p,D,M,A,I;if(T<1e-14&&!b&&!_)return[{value:g},{value:v}];I=Math.ceil(v/T)-Math.floor(g/T),I>m&&(T=_ue(I*T/m/p)*p),Vr(l)||(D=Math.pow(10,l),T=Math.ceil(T*D)/D),n==="ticks"?(M=Math.floor(g/T)*T,A=Math.ceil(v/T)*T):(M=g,A=v),b&&_&&s&&v3e((a-o)/s,T/1e3)?(I=Math.round(Math.min((a-o)/T,c)),T=(a-o)/I,M=o,A=a):E?(M=b?o:M,A=_?a:A,I=u-1,T=(A-M)/I):(I=(A-M)/T,d_(I,Math.round(I),T/1e3)?I=Math.round(I):I=Math.ceil(I));const P=Math.max(xue(T),xue(M));D=Math.pow(10,Vr(l)?P:l),M=Math.round(M*D)/D,A=Math.round(A*D)/D;let U=0;for(b&&(d&&M!==o?(t.push({value:o}),M<o&&U++,d_(Math.round((M+U*T)*D)/D,o,Tce(o,C,i))&&U++):M<o&&U++);U<I;++U){const K=Math.round((M+U*T)*D)/D;if(_&&K>a)break;t.push({value:K})}return _&&d&&A!==a?t.length&&d_(t[t.length-1].value,a,Tce(a,C,i))?t[t.length-1].value=a:t.push({value:a}):(!_||A===a)&&t.push({value:A}),t}function Tce(i,e,{horizontal:t,minRotation:r}){const n=Fu(r),s=(t?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+i).length;return Math.min(e/s,o)}class wS extends tg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Vr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this;const o=l=>n=t?n:l,a=l=>s=r?s:l;if(e){const l=Pc(n),u=Pc(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(n===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(n-l)}this.min=n,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=wIe(n,s);return e.bounds==="ticks"&&T0e(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Zx(e,this.chart.options.locale,this.options.ticks.format)}}class Bm extends wS{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=vs(e)?e:0,this.max=vs(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Fu(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}We(Bm,"id","linear"),We(Bm,"defaults",{ticks:{callback:bT.formatters.numeric}});const H_=i=>Math.floor(Sf(i)),Qp=(i,e)=>Math.pow(10,H_(i)+e);function Ace(i){return i/Math.pow(10,H_(i))===1}function kce(i,e,t){const r=Math.pow(10,t),n=Math.floor(i/r);return Math.ceil(e/r)-n}function EIe(i,e){const t=e-i;let r=H_(t);for(;kce(i,e,r)>10;)r++;for(;kce(i,e,r)<10;)r--;return Math.min(r,H_(i))}function SIe(i,{min:e,max:t}){e=bl(i.min,e);const r=[],n=H_(e);let s=EIe(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=n>s?Math.pow(10,n):0,u=Math.round((e-l)*o)/o,c=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((u-c)/Math.pow(10,s)),d=bl(i.min,Math.round((l+c+h*Math.pow(10,s))*o)/o);for(;d<t;)r.push({value:d,major:Ace(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+c+h*Math.pow(10,s))*o)/o;const p=bl(i.max,d);return r.push({value:p,major:Ace(p),significand:h}),r}class W3 extends tg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=wS.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return vs(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=vs(e)?Math.max(0,e):null,this.max=vs(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!vs(this._userMin)&&(this.min=e===Qp(this.min,0)?Qp(this.min,-1):Qp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const s=a=>r=e?r:a,o=a=>n=t?n:a;r===n&&(r<=0?(s(1),o(10)):(s(Qp(r,-1)),o(Qp(n,1)))),r<=0&&s(Qp(n,-1)),n<=0&&o(Qp(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=SIe(t,this);return e.bounds==="ticks"&&T0e(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Zx(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Sf(e),this._valueRange=Sf(this.max)-Sf(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Sf(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}We(W3,"id","logarithmic"),We(W3,"defaults",{ticks:{callback:bT.formatters.logarithmic,major:{enabled:!0}}});function Y3(i){const e=i.ticks;if(e.display&&i.display){const t=ua(e.backdropPadding);return Zi(e.font&&e.font.size,bs.font.size)+t.height}return 0}function CIe(i,e,t){return t=Un(t)?t:[t],{w:P3e(i,e.string,t),h:t.length*e.lineHeight}}function Dce(i,e,t,r,n){return i===r||i===n?{start:e-t/2,end:e+t/2}:i<r||i>n?{start:e-t,end:e}:{start:e,end:e+t}}function TIe(i){const e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),r=[],n=[],s=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?Hn/s:0;for(let l=0;l<s;l++){const u=o.setContext(i.getPointLabelContext(l));n[l]=u.padding;const c=i.getPointPosition(l,i.drawingArea+n[l],a),h=Zs(u.font),d=CIe(i.ctx,h,i._pointLabels[l]);r[l]=d;const p=xl(i.getIndexAngle(l)+a),m=Math.round(JL(p)),g=Dce(m,c.x,d.w,0,180),v=Dce(m,c.y,d.h,90,270);AIe(t,e,p,g,v)}i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=MIe(i,r,n)}function AIe(i,e,t,r,n){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,i.l=Math.min(i.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,i.r=Math.max(i.r,e.r+a)),n.start<e.t?(l=(e.t-n.start)/o,i.t=Math.min(i.t,e.t-l)):n.end>e.b&&(l=(n.end-e.b)/o,i.b=Math.max(i.b,e.b+l))}function kIe(i,e,t){const r=i.drawingArea,{extra:n,additionalAngle:s,padding:o,size:a}=t,l=i.getPointPosition(e,r+n+o,s),u=Math.round(JL(xl(l.angle+ks))),c=IIe(l.y,a.h,u),h=LIe(u),d=RIe(l.x,a.w,h);return{visible:!0,x:l.x,y:c,textAlign:h,left:d,top:c,right:d+a.w,bottom:c+a.h}}function DIe(i,e){if(!e)return!0;const{left:t,top:r,right:n,bottom:s}=i;return!(Hh({x:t,y:r},e)||Hh({x:t,y:s},e)||Hh({x:n,y:r},e)||Hh({x:n,y:s},e))}function MIe(i,e,t){const r=[],n=i._pointLabels.length,s=i.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Y3(s)/2,additionalAngle:o?Hn/n:0};let u;for(let c=0;c<n;c++){l.padding=t[c],l.size=e[c];const h=kIe(i,c,l);r.push(h),a==="auto"&&(h.visible=DIe(h,u),h.visible&&(u=h))}return r}function LIe(i){return i===0||i===180?"center":i<180?"left":"right"}function RIe(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function IIe(i,e,t){return t===90||t===270?i-=e/2:(t>270||t<90)&&(i-=e),i}function OIe(i,e,t){const{left:r,top:n,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Vr(a)){const l=Em(e.borderRadius),u=ua(e.backdropPadding);i.fillStyle=a;const c=r-u.left,h=n-u.top,d=s-r+u.width,p=o-n+u.height;Object.values(l).some(m=>m!==0)?(i.beginPath(),G_(i,{x:c,y:h,w:d,h:p,radius:l}),i.fill()):i.fillRect(c,h,d,p)}}function PIe(i,e){const{ctx:t,options:{pointLabels:r}}=i;for(let n=e-1;n>=0;n--){const s=i._pointLabelItems[n];if(!s.visible)continue;const o=r.setContext(i.getPointLabelContext(n));OIe(t,o,s);const a=Zs(o.font),{x:l,y:u,textAlign:c}=s;$m(t,i._pointLabels[n],l,u+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}function vye(i,e,t,r){const{ctx:n}=i;if(t)n.arc(i.xCenter,i.yCenter,e,0,Gn);else{let s=i.getPointPosition(0,e);n.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=i.getPointPosition(o,e),n.lineTo(s.x,s.y)}}function FIe(i,e,t,r,n){const s=i.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(n.dash),s.lineDashOffset=n.dashOffset,s.beginPath(),vye(i,t,o,r),s.closePath(),s.stroke(),s.restore())}function NIe(i,e,t){return rp(i,{label:t,index:e,type:"pointLabel"})}class P0 extends wS{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ua(Y3(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=vs(e)&&!isNaN(e)?e:0,this.max=vs(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Y3(this.options))}generateTickLabels(e){wS.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const n=Mn(this.options.pointLabels.callback,[t,r],this);return n||n===0?n:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?TIe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){const t=Gn/(this._pointLabels.length||1),r=this.options.startAngle||0;return xl(e*t+Fu(r))}getDistanceFromCenterForValue(e){if(Vr(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Vr(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return NIe(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const n=this.getIndexAngle(e)-ks+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),vye(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:s}=t,o=this._pointLabels.length;let a,l,u;if(t.pointLabels.display&&PIe(this,o),n.display&&this.ticks.forEach((c,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);const d=this.getContext(h),p=n.setContext(d),m=s.setContext(d);FIe(this,p,l,o,m)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const c=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=c;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const u=r.setContext(this.getContext(l)),c=Zs(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=c.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const h=ua(u.backdropPadding);e.fillRect(-o/2-h.left,-s-c.size/2-h.top,o+h.width,c.size+h.height)}$m(e,a.label,0,-s,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}We(P0,"id","radialLinear"),We(P0,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:bT.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),We(P0,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),We(P0,"descriptors",{angleLines:{_fallback:"grid"}});const ET={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Za=Object.keys(ET);function Mce(i,e){return i-e}function Lce(i,e){if(Vr(e))return null;const t=i._adapter,{parser:r,round:n,isoWeekday:s}=i._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),vs(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(n&&(o=n==="week"&&(xy(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,n)),+o)}function Rce(i,e,t,r){const n=Za.length;for(let s=Za.indexOf(i);s<n-1;++s){const o=ET[Za[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return Za[s]}return Za[n-1]}function $Ie(i,e,t,r,n){for(let s=Za.length-1;s>=Za.indexOf(t);s--){const o=Za[s];if(ET[o].common&&i._adapter.diff(n,r,o)>=e-1)return o}return Za[t?Za.indexOf(t):0]}function BIe(i){for(let e=Za.indexOf(i)+1,t=Za.length;e<t;++e)if(ET[Za[e]].common)return Za[e]}function Ice(i,e,t){if(!t)i[e]=!0;else if(t.length){const{lo:r,hi:n}=QL(t,e),s=t[r]>=e?t[r]:t[n];i[s]=!0}}function jIe(i,e,t,r){const n=i._adapter,s=+n.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+n.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}function Oce(i,e,t){const r=[],n={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],n[a]=o,r.push({value:a,major:!1});return s===0||!t?r:jIe(i,r,n,t)}class V_ extends tg{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),n=this._adapter=new K0e._date(e.adapters.date);n.init(t),h_(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Lce(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(n=Math.min(n,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=vs(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),s=vs(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,s-1),this.max=Math.max(n+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const s=this.min,o=this.max,a=w3e(n,s,o);return this._unit=t.unit||(r.autoSkip?Rce(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):$Ie(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:BIe(this._unit),this.initOffsets(n),e.reverse&&a.reverse(),Oce(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,n,s;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=ho(t,0,o),r=ho(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,s=n.time,o=s.unit||Rce(s.minUnit,t,r,this._getLabelCapacity(t)),a=Zi(n.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=xy(l)||l===!0,c={};let h=t,d,p;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":o),e.diff(r,t,o)>1e5*a)throw new Error(t+" and "+r+" are too far apart with stepSize of "+a+" "+o);const m=n.ticks.source==="data"&&this.getDataTimestamps();for(d=h,p=0;d<r;d=+e.add(d,a,o),p++)Ice(c,d,m);return(d===r||n.bounds==="ticks"||p===1)&&Ice(c,d,m),Object.keys(c).sort(Mce).map(g=>+g)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,s=this._unit,o=t||n[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,n){const s=this.options,o=s.ticks.callback;if(o)return Mn(o,[e,t,r],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&a[l],h=u&&a[u],d=r[t],p=u&&h&&d&&d.major;return this._adapter.format(e,n||(p?h:c))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=Fu(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Oce(this,[e],this._majorUnit),n),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,r=n.length;t<r;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(Lce(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return D0e(e.sort(Mce))}}We(V_,"id","time"),We(V_,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function LE(i,e,t){let r=0,n=i.length-1,s,o,a,l;t?(e>=i[r].pos&&e<=i[n].pos&&({lo:r,hi:n}=qh(i,"pos",e)),{pos:s,time:a}=i[r],{pos:o,time:l}=i[n]):(e>=i[r].time&&e<=i[n].time&&({lo:r,hi:n}=qh(i,"time",e)),{time:s,pos:a}=i[r],{time:o,pos:l}=i[n]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class X3 extends V_{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=LE(t,this.min),this._tableRange=LE(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],s=[];let o,a,l,u,c;for(o=0,a=e.length;o<a;++o)u=e[o],u>=t&&u<=r&&n.push(u);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=n.length;o<a;++o)c=n[o+1],l=n[o-1],u=n[o],Math.round((c+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((n,s)=>n-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(LE(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return LE(this._table,r*this._tableRange+this._minPos,!0)}}We(X3,"id","timeseries"),We(X3,"defaults",V_.defaults);var zIe=Object.freeze({__proto__:null,CategoryScale:Sy,LinearScale:Bm,LogarithmicScale:W3,RadialLinearScale:P0,TimeScale:V_,TimeSeriesScale:X3});const UIe=[ZMe,CRe,vIe,zIe];Wa.register(...UIe);class ig extends Error{}class GIe extends ig{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class qIe extends ig{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class HIe extends ig{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class F0 extends ig{}class bye extends ig{constructor(e){super(`Invalid unit ${e}`)}}class Ya extends ig{}class rf extends ig{constructor(){super("Zone is an abstract class")}}const Mt="numeric",Wu="short",Dl="long",ES={year:Mt,month:Mt,day:Mt},_ye={year:Mt,month:Wu,day:Mt},VIe={year:Mt,month:Wu,day:Mt,weekday:Wu},xye={year:Mt,month:Dl,day:Mt},wye={year:Mt,month:Dl,day:Mt,weekday:Dl},Eye={hour:Mt,minute:Mt},Sye={hour:Mt,minute:Mt,second:Mt},Cye={hour:Mt,minute:Mt,second:Mt,timeZoneName:Wu},Tye={hour:Mt,minute:Mt,second:Mt,timeZoneName:Dl},Aye={hour:Mt,minute:Mt,hourCycle:"h23"},kye={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23"},Dye={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23",timeZoneName:Wu},Mye={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23",timeZoneName:Dl},Lye={year:Mt,month:Mt,day:Mt,hour:Mt,minute:Mt},Rye={year:Mt,month:Mt,day:Mt,hour:Mt,minute:Mt,second:Mt},Iye={year:Mt,month:Wu,day:Mt,hour:Mt,minute:Mt},Oye={year:Mt,month:Wu,day:Mt,hour:Mt,minute:Mt,second:Mt},WIe={year:Mt,month:Wu,day:Mt,weekday:Wu,hour:Mt,minute:Mt},Pye={year:Mt,month:Dl,day:Mt,hour:Mt,minute:Mt,timeZoneName:Wu},Fye={year:Mt,month:Dl,day:Mt,hour:Mt,minute:Mt,second:Mt,timeZoneName:Wu},Nye={year:Mt,month:Dl,day:Mt,weekday:Dl,hour:Mt,minute:Mt,timeZoneName:Dl},$ye={year:Mt,month:Dl,day:Mt,weekday:Dl,hour:Mt,minute:Mt,second:Mt,timeZoneName:Dl};class Jx{get type(){throw new rf}get name(){throw new rf}get ianaName(){return this.name}get isUniversal(){throw new rf}offsetName(e,t){throw new rf}formatOffset(e,t){throw new rf}offset(e){throw new rf}equals(e){throw new rf}get isValid(){throw new rf}}let ck=null;class ST extends Jx{static get instance(){return ck===null&&(ck=new ST),ck}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Wye(e,t,r)}formatOffset(e,t){return m_(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let U2={};function YIe(i){return U2[i]||(U2[i]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),U2[i]}const XIe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ZIe(i,e){const t=i.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,n,s,o,a,l,u,c]=r;return[o,n,s,a,l,u,c]}function KIe(i,e){const t=i.formatToParts(e),r=[];for(let n=0;n<t.length;n++){const{type:s,value:o}=t[n],a=XIe[s];s==="era"?r[a]=o:qi(a)||(r[a]=parseInt(o,10))}return r}let RE={};class sd extends Jx{static create(e){return RE[e]||(RE[e]=new sd(e)),RE[e]}static resetCache(){RE={},U2={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=sd.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Wye(e,t,r,this.name)}formatOffset(e,t){return m_(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const r=YIe(this.name);let[n,s,o,a,l,u,c]=r.formatToParts?KIe(r,t):ZIe(r,t);a==="BC"&&(n=-Math.abs(n)+1);const d=TT({year:n,month:s,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let p=+t;const m=p%1e3;return p-=m>=0?m:1e3+m,(d-p)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Pce={};function JIe(i,e={}){const t=JSON.stringify([i,e]);let r=Pce[t];return r||(r=new Intl.ListFormat(i,e),Pce[t]=r),r}let Z3={};function K3(i,e={}){const t=JSON.stringify([i,e]);let r=Z3[t];return r||(r=new Intl.DateTimeFormat(i,e),Z3[t]=r),r}let J3={};function QIe(i,e={}){const t=JSON.stringify([i,e]);let r=J3[t];return r||(r=new Intl.NumberFormat(i,e),J3[t]=r),r}let Q3={};function eOe(i,e={}){const{base:t,...r}=e,n=JSON.stringify([i,r]);let s=Q3[n];return s||(s=new Intl.RelativeTimeFormat(i,e),Q3[n]=s),s}let Y1=null;function tOe(){return Y1||(Y1=new Intl.DateTimeFormat().resolvedOptions().locale,Y1)}let Fce={};function iOe(i){let e=Fce[i];if(!e){const t=new Intl.Locale(i);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,Fce[i]=e}return e}function rOe(i){const e=i.indexOf("-x-");e!==-1&&(i=i.substring(0,e));const t=i.indexOf("-u-");if(t===-1)return[i];{let r,n;try{r=K3(i).resolvedOptions(),n=i}catch{const l=i.substring(0,t);r=K3(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function nOe(i,e,t){return(t||e)&&(i.includes("-u-")||(i+="-u"),t&&(i+=`-ca-${t}`),e&&(i+=`-nu-${e}`)),i}function sOe(i){const e=[];for(let t=1;t<=12;t++){const r=Ht.utc(2009,t,1);e.push(i(r))}return e}function oOe(i){const e=[];for(let t=1;t<=7;t++){const r=Ht.utc(2016,11,13+t);e.push(i(r))}return e}function IE(i,e,t,r){const n=i.listingMode();return n==="error"?null:n==="en"?t(e):r(e)}function aOe(i){return i.numberingSystem&&i.numberingSystem!=="latn"?!1:i.numberingSystem==="latn"||!i.locale||i.locale.startsWith("en")||new Intl.DateTimeFormat(i.intl).resolvedOptions().numberingSystem==="latn"}class lOe{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=QIe(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):pR(e,3);return Ps(t,this.padTo)}}}class uOe{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&sd.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=K3(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class cOe{constructor(e,t,r){this.opts={style:"long",...r},!t&&Hye()&&(this.rtf=eOe(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):MOe(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const hOe={firstDay:1,minimalDays:4,weekend:[6,7]};class En{static fromOpts(e){return En.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,n,s=!1){const o=e||Cs.defaultLocale,a=o||(s?"en-US":tOe()),l=t||Cs.defaultNumberingSystem,u=r||Cs.defaultOutputCalendar,c=eM(n)||Cs.defaultWeekSettings;return new En(a,l,u,c,o)}static resetCache(){Y1=null,Z3={},J3={},Q3={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:n}={}){return En.create(e,t,r,n)}constructor(e,t,r,n,s){const[o,a,l]=rOe(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=nOe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=aOe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:En.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,eM(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return IE(this,e,Zye,()=>{const r=t?{month:e,day:"numeric"}:{month:e},n=t?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=sOe(s=>this.extract(s,r,"month"))),this.monthsCache[n][e]})}weekdays(e,t=!1){return IE(this,e,Qye,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=oOe(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return IE(this,void 0,()=>eve,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ht.utc(2016,11,13,9),Ht.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return IE(this,e,tve,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Ht.utc(-40,1,1),Ht.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){const n=this.dtFormatter(e,t),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new lOe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new uOe(e,this.intl,t)}relFormatter(e={}){return new cOe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return JIe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Vye()?iOe(this.locale):hOe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let hk=null;class Sa extends Jx{static get utcInstance(){return hk===null&&(hk=new Sa(0)),hk}static instance(e){return e===0?Sa.utcInstance:new Sa(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Sa(AT(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${m_(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${m_(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return m_(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class dOe extends Jx{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function vf(i,e){if(qi(i)||i===null)return e;if(i instanceof Jx)return i;if(mOe(i)){const t=i.toLowerCase();return t==="default"?e:t==="local"||t==="system"?ST.instance:t==="utc"||t==="gmt"?Sa.utcInstance:Sa.parseSpecifier(t)||sd.create(i)}else return km(i)?Sa.instance(i):typeof i=="object"&&"offset"in i&&typeof i.offset=="function"?i:new dOe(i)}let Nce=()=>Date.now(),$ce="system",Bce=null,jce=null,zce=null,Uce=60,Gce,qce=null;class Cs{static get now(){return Nce}static set now(e){Nce=e}static set defaultZone(e){$ce=e}static get defaultZone(){return vf($ce,ST.instance)}static get defaultLocale(){return Bce}static set defaultLocale(e){Bce=e}static get defaultNumberingSystem(){return jce}static set defaultNumberingSystem(e){jce=e}static get defaultOutputCalendar(){return zce}static set defaultOutputCalendar(e){zce=e}static get defaultWeekSettings(){return qce}static set defaultWeekSettings(e){qce=eM(e)}static get twoDigitCutoffYear(){return Uce}static set twoDigitCutoffYear(e){Uce=e%100}static get throwOnInvalid(){return Gce}static set throwOnInvalid(e){Gce=e}static resetCaches(){En.resetCache(),sd.resetCache()}}class Nu{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Bye=[0,31,59,90,120,151,181,212,243,273,304,334],jye=[0,31,60,91,121,152,182,213,244,274,305,335];function nu(i,e){return new Nu("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${i}, which is invalid`)}function hR(i,e,t){const r=new Date(Date.UTC(i,e-1,t));i<100&&i>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function zye(i,e,t){return t+(Qx(i)?jye:Bye)[e-1]}function Uye(i,e){const t=Qx(i)?jye:Bye,r=t.findIndex(s=>s<e),n=e-t[r];return{month:r+1,day:n}}function dR(i,e){return(i-e+7)%7+1}function SS(i,e=4,t=1){const{year:r,month:n,day:s}=i,o=zye(r,n,s),a=dR(hR(r,n,s),t);let l=Math.floor((o-a+14-e)/7),u;return l<1?(u=r-1,l=W_(u,e,t)):l>W_(r,e,t)?(u=r+1,l=1):u=r,{weekYear:u,weekNumber:l,weekday:a,...kT(i)}}function Hce(i,e=4,t=1){const{weekYear:r,weekNumber:n,weekday:s}=i,o=dR(hR(r,1,e),t),a=ty(r);let l=n*7+s-o-7+e,u;l<1?(u=r-1,l+=ty(u)):l>a?(u=r+1,l-=ty(r)):u=r;const{month:c,day:h}=Uye(u,l);return{year:u,month:c,day:h,...kT(i)}}function dk(i){const{year:e,month:t,day:r}=i,n=zye(e,t,r);return{year:e,ordinal:n,...kT(i)}}function Vce(i){const{year:e,ordinal:t}=i,{month:r,day:n}=Uye(e,t);return{year:e,month:r,day:n,...kT(i)}}function Wce(i,e){if(!qi(i.localWeekday)||!qi(i.localWeekNumber)||!qi(i.localWeekYear)){if(!qi(i.weekday)||!qi(i.weekNumber)||!qi(i.weekYear))throw new F0("Cannot mix locale-based week fields with ISO-based week fields");return qi(i.localWeekday)||(i.weekday=i.localWeekday),qi(i.localWeekNumber)||(i.weekNumber=i.localWeekNumber),qi(i.localWeekYear)||(i.weekYear=i.localWeekYear),delete i.localWeekday,delete i.localWeekNumber,delete i.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function fOe(i,e=4,t=1){const r=CT(i.weekYear),n=su(i.weekNumber,1,W_(i.weekYear,e,t)),s=su(i.weekday,1,7);return r?n?s?!1:nu("weekday",i.weekday):nu("week",i.weekNumber):nu("weekYear",i.weekYear)}function pOe(i){const e=CT(i.year),t=su(i.ordinal,1,ty(i.year));return e?t?!1:nu("ordinal",i.ordinal):nu("year",i.year)}function Gye(i){const e=CT(i.year),t=su(i.month,1,12),r=su(i.day,1,CS(i.year,i.month));return e?t?r?!1:nu("day",i.day):nu("month",i.month):nu("year",i.year)}function qye(i){const{hour:e,minute:t,second:r,millisecond:n}=i,s=su(e,0,23)||e===24&&t===0&&r===0&&n===0,o=su(t,0,59),a=su(r,0,59),l=su(n,0,999);return s?o?a?l?!1:nu("millisecond",n):nu("second",r):nu("minute",t):nu("hour",e)}function qi(i){return typeof i>"u"}function km(i){return typeof i=="number"}function CT(i){return typeof i=="number"&&i%1===0}function mOe(i){return typeof i=="string"}function gOe(i){return Object.prototype.toString.call(i)==="[object Date]"}function Hye(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Vye(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function yOe(i){return Array.isArray(i)?i:[i]}function Yce(i,e,t){if(i.length!==0)return i.reduce((r,n)=>{const s=[e(n),n];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function vOe(i,e){return e.reduce((t,r)=>(t[r]=i[r],t),{})}function Cy(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function eM(i){if(i==null)return null;if(typeof i!="object")throw new Ya("Week settings must be an object");if(!su(i.firstDay,1,7)||!su(i.minimalDays,1,7)||!Array.isArray(i.weekend)||i.weekend.some(e=>!su(e,1,7)))throw new Ya("Invalid week settings");return{firstDay:i.firstDay,minimalDays:i.minimalDays,weekend:Array.from(i.weekend)}}function su(i,e,t){return CT(i)&&i>=e&&i<=t}function bOe(i,e){return i-e*Math.floor(i/e)}function Ps(i,e=2){const t=i<0;let r;return t?r="-"+(""+-i).padStart(e,"0"):r=(""+i).padStart(e,"0"),r}function df(i){if(!(qi(i)||i===null||i===""))return parseInt(i,10)}function em(i){if(!(qi(i)||i===null||i===""))return parseFloat(i)}function fR(i){if(!(qi(i)||i===null||i==="")){const e=parseFloat("0."+i)*1e3;return Math.floor(e)}}function pR(i,e,t=!1){const r=10**e;return(t?Math.trunc:Math.round)(i*r)/r}function Qx(i){return i%4===0&&(i%100!==0||i%400===0)}function ty(i){return Qx(i)?366:365}function CS(i,e){const t=bOe(e-1,12)+1,r=i+(e-t)/12;return t===2?Qx(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function TT(i){let e=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond);return i.year<100&&i.year>=0&&(e=new Date(e),e.setUTCFullYear(i.year,i.month-1,i.day)),+e}function Xce(i,e,t){return-dR(hR(i,1,e),t)+e-1}function W_(i,e=4,t=1){const r=Xce(i,e,t),n=Xce(i+1,e,t);return(ty(i)-r+n)/7}function tM(i){return i>99?i:i>Cs.twoDigitCutoffYear?1900+i:2e3+i}function Wye(i,e,t,r=null){const n=new Date(i),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function AT(i,e){let t=parseInt(i,10);Number.isNaN(t)&&(t=0);const r=parseInt(e,10)||0,n=t<0||Object.is(t,-0)?-r:r;return t*60+n}function Yye(i){const e=Number(i);if(typeof i=="boolean"||i===""||Number.isNaN(e))throw new Ya(`Invalid unit value ${i}`);return e}function TS(i,e){const t={};for(const r in i)if(Cy(i,r)){const n=i[r];if(n==null)continue;t[e(r)]=Yye(n)}return t}function m_(i,e){const t=Math.trunc(Math.abs(i/60)),r=Math.trunc(Math.abs(i%60)),n=i>=0?"+":"-";switch(e){case"short":return`${n}${Ps(t,2)}:${Ps(r,2)}`;case"narrow":return`${n}${t}${r>0?`:${r}`:""}`;case"techie":return`${n}${Ps(t,2)}${Ps(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function kT(i){return vOe(i,["hour","minute","second","millisecond"])}const _Oe=["January","February","March","April","May","June","July","August","September","October","November","December"],Xye=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xOe=["J","F","M","A","M","J","J","A","S","O","N","D"];function Zye(i){switch(i){case"narrow":return[...xOe];case"short":return[...Xye];case"long":return[..._Oe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Kye=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Jye=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],wOe=["M","T","W","T","F","S","S"];function Qye(i){switch(i){case"narrow":return[...wOe];case"short":return[...Jye];case"long":return[...Kye];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const eve=["AM","PM"],EOe=["Before Christ","Anno Domini"],SOe=["BC","AD"],COe=["B","A"];function tve(i){switch(i){case"narrow":return[...COe];case"short":return[...SOe];case"long":return[...EOe];default:return null}}function TOe(i){return eve[i.hour<12?0:1]}function AOe(i,e){return Qye(e)[i.weekday-1]}function kOe(i,e){return Zye(e)[i.month-1]}function DOe(i,e){return tve(e)[i.year<0?0:1]}function MOe(i,e,t="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(i)===-1;if(t==="auto"&&s){const h=i==="days";switch(e){case 1:return h?"tomorrow":`next ${n[i][0]}`;case-1:return h?"yesterday":`last ${n[i][0]}`;case 0:return h?"today":`this ${n[i][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=n[i],c=r?l?u[1]:u[2]||u[1]:l?n[i][0]:i;return o?`${a} ${c} ago`:`in ${a} ${c}`}function Zce(i,e){let t="";for(const r of i)r.literal?t+=r.val:t+=e(r.val);return t}const LOe={D:ES,DD:_ye,DDD:xye,DDDD:wye,t:Eye,tt:Sye,ttt:Cye,tttt:Tye,T:Aye,TT:kye,TTT:Dye,TTTT:Mye,f:Lye,ff:Iye,fff:Pye,ffff:Nye,F:Rye,FF:Oye,FFF:Fye,FFFF:$ye};class sa{static create(e,t={}){return new sa(e,t)}static parseFormat(e){let t=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),t=null,r="",n=!n):n||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return LOe[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Ps(e,t);const r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(p,m)=>this.loc.extract(e,p,m),o=p=>e.isOffsetFixed&&e.offset===0&&p.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,p.format):"",a=()=>r?TOe(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(p,m)=>r?kOe(e,p):s(m?{month:p}:{month:p,day:"numeric"},"month"),u=(p,m)=>r?AOe(e,p):s(m?{weekday:p}:{weekday:p,month:"long",day:"numeric"},"weekday"),c=p=>{const m=sa.macroTokenToFormatOpts(p);return m?this.formatWithSystemDefault(e,m):p},h=p=>r?DOe(e,p):s({era:p},"era"),d=p=>{switch(p){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(p)}};return Zce(sa.parseFormat(t),d)}formatDurationFromString(e,t){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>u=>{const c=r(u);return c?this.num(l.get(c),u.length):u},s=sa.parseFormat(t),o=s.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return Zce(s,n(a))}}const ive=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function nv(...i){const e=i.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function sv(...i){return e=>i.reduce(([t,r,n],s)=>{const[o,a,l]=s(e,n);return[{...t,...o},a||r,l]},[{},null,1]).slice(0,2)}function ov(i,...e){if(i==null)return[null,null];for(const[t,r]of e){const n=t.exec(i);if(n)return r(n)}return[null,null]}function rve(...i){return(e,t)=>{const r={};let n;for(n=0;n<i.length;n++)r[i[n]]=df(e[t+n]);return[r,null,t+n]}}const nve=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ROe=`(?:${nve.source}?(?:\\[(${ive.source})\\])?)?`,mR=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,sve=RegExp(`${mR.source}${ROe}`),gR=RegExp(`(?:T${sve.source})?`),IOe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,OOe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,POe=/(\d{4})-?(\d{3})/,FOe=rve("weekYear","weekNumber","weekDay"),NOe=rve("year","ordinal"),$Oe=/(\d{4})-(\d\d)-(\d\d)/,ove=RegExp(`${mR.source} ?(?:${nve.source}|(${ive.source}))?`),BOe=RegExp(`(?: ${ove.source})?`);function iy(i,e,t){const r=i[e];return qi(r)?t:df(r)}function jOe(i,e){return[{year:iy(i,e),month:iy(i,e+1,1),day:iy(i,e+2,1)},null,e+3]}function av(i,e){return[{hours:iy(i,e,0),minutes:iy(i,e+1,0),seconds:iy(i,e+2,0),milliseconds:fR(i[e+3])},null,e+4]}function ew(i,e){const t=!i[e]&&!i[e+1],r=AT(i[e+1],i[e+2]),n=t?null:Sa.instance(r);return[{},n,e+3]}function tw(i,e){const t=i[e]?sd.create(i[e]):null;return[{},t,e+1]}const zOe=RegExp(`^T?${mR.source}$`),UOe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function GOe(i){const[e,t,r,n,s,o,a,l,u]=i,c=e[0]==="-",h=l&&l[0]==="-",d=(p,m=!1)=>p!==void 0&&(m||p&&c)?-p:p;return[{years:d(em(t)),months:d(em(r)),weeks:d(em(n)),days:d(em(s)),hours:d(em(o)),minutes:d(em(a)),seconds:d(em(l),l==="-0"),milliseconds:d(fR(u),h)}]}const qOe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function yR(i,e,t,r,n,s,o){const a={year:e.length===2?tM(df(e)):df(e),month:Xye.indexOf(t)+1,day:df(r),hour:df(n),minute:df(s)};return o&&(a.second=df(o)),i&&(a.weekday=i.length>3?Kye.indexOf(i)+1:Jye.indexOf(i)+1),a}const HOe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function VOe(i){const[,e,t,r,n,s,o,a,l,u,c,h]=i,d=yR(e,n,r,t,s,o,a);let p;return l?p=qOe[l]:u?p=0:p=AT(c,h),[d,new Sa(p)]}function WOe(i){return i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const YOe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,XOe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ZOe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Kce(i){const[,e,t,r,n,s,o,a]=i;return[yR(e,n,r,t,s,o,a),Sa.utcInstance]}function KOe(i){const[,e,t,r,n,s,o,a]=i;return[yR(e,a,t,r,n,s,o),Sa.utcInstance]}const JOe=nv(IOe,gR),QOe=nv(OOe,gR),ePe=nv(POe,gR),tPe=nv(sve),ave=sv(jOe,av,ew,tw),iPe=sv(FOe,av,ew,tw),rPe=sv(NOe,av,ew,tw),nPe=sv(av,ew,tw);function sPe(i){return ov(i,[JOe,ave],[QOe,iPe],[ePe,rPe],[tPe,nPe])}function oPe(i){return ov(WOe(i),[HOe,VOe])}function aPe(i){return ov(i,[YOe,Kce],[XOe,Kce],[ZOe,KOe])}function lPe(i){return ov(i,[UOe,GOe])}const uPe=sv(av);function cPe(i){return ov(i,[zOe,uPe])}const hPe=nv($Oe,BOe),dPe=nv(ove),fPe=sv(av,ew,tw);function pPe(i){return ov(i,[hPe,ave],[dPe,fPe])}const Jce="Invalid Duration",lve={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},mPe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...lve},Zl=146097/400,t0=146097/4800,gPe={years:{quarters:4,months:12,weeks:Zl/7,days:Zl,hours:Zl*24,minutes:Zl*24*60,seconds:Zl*24*60*60,milliseconds:Zl*24*60*60*1e3},quarters:{months:3,weeks:Zl/28,days:Zl/4,hours:Zl*24/4,minutes:Zl*24*60/4,seconds:Zl*24*60*60/4,milliseconds:Zl*24*60*60*1e3/4},months:{weeks:t0/7,days:t0,hours:t0*24,minutes:t0*24*60,seconds:t0*24*60*60,milliseconds:t0*24*60*60*1e3},...lve},vm=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],yPe=vm.slice(0).reverse();function nf(i,e,t=!1){const r={values:t?e.values:{...i.values,...e.values||{}},loc:i.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||i.conversionAccuracy,matrix:e.matrix||i.matrix};return new Hr(r)}function uve(i,e){let t=e.milliseconds??0;for(const r of yPe.slice(1))e[r]&&(t+=e[r]*i[r].milliseconds);return t}function Qce(i,e){const t=uve(i,e)<0?-1:1;vm.reduceRight((r,n)=>{if(qi(e[n]))return r;if(r){const s=e[r]*t,o=i[n][r],a=Math.floor(s/o);e[n]+=a*t,e[r]-=a*o*t}return n},null),vm.reduce((r,n)=>{if(qi(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*i[r][n]}return n},null)}function vPe(i){const e={};for(const[t,r]of Object.entries(i))r!==0&&(e[t]=r);return e}class Hr{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let r=t?gPe:mPe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||En.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return Hr.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Ya(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Hr({values:TS(e,Hr.normalizeUnit),loc:En.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(km(e))return Hr.fromMillis(e);if(Hr.isDuration(e))return e;if(typeof e=="object")return Hr.fromObject(e);throw new Ya(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=lPe(e);return r?Hr.fromObject(r,t):Hr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=cPe(e);return r?Hr.fromObject(r,t):Hr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Ya("need to specify a reason the Duration is invalid");const r=e instanceof Nu?e:new Nu(e,t);if(Cs.throwOnInvalid)throw new HIe(r);return new Hr({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new bye(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?sa.create(this.loc,r).formatDurationFromString(this,e):Jce}toHuman(e={}){if(!this.isValid)return Jce;const t=vm.map(r=>{const n=this.values[r];return qi(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=pR(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Ht.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?uve(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Hr.fromDurationLike(e),r={};for(const n of vm)(Cy(t.values,n)||Cy(this.values,n))&&(r[n]=t.get(n)+this.get(n));return nf(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=Hr.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=Yye(e(this.values[r],r));return nf(this,{values:t},!0)}get(e){return this[Hr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...TS(e,Hr.normalizeUnit)};return nf(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:n,conversionAccuracy:r};return nf(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Qce(this.matrix,e),nf(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=vPe(this.normalize().shiftToAll().toObject());return nf(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Hr.normalizeUnit(o));const t={},r={},n=this.toObject();let s;for(const o of vm)if(e.indexOf(o)>=0){s=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;km(n[o])&&(a+=n[o]);const l=Math.trunc(a);t[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else km(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(t[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return Qce(this.matrix,t),nf(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return nf(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of vm)if(!t(this.values[r],e.values[r]))return!1;return!0}}const i0="Invalid Interval";function bPe(i,e){return!i||!i.isValid?ms.invalid("missing or invalid start"):!e||!e.isValid?ms.invalid("missing or invalid end"):e<i?ms.invalid("end before start",`The end of an interval must be after its start, but you had start=${i.toISO()} and end=${e.toISO()}`):null}class ms{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Ya("need to specify a reason the Interval is invalid");const r=e instanceof Nu?e:new Nu(e,t);if(Cs.throwOnInvalid)throw new qIe(r);return new ms({invalid:r})}static fromDateTimes(e,t){const r=A1(e),n=A1(t),s=bPe(r,n);return s??new ms({start:r,end:n})}static after(e,t){const r=Hr.fromDurationLike(t),n=A1(e);return ms.fromDateTimes(n,n.plus(r))}static before(e,t){const r=Hr.fromDurationLike(t),n=A1(e);return ms.fromDateTimes(n.minus(r),n)}static fromISO(e,t){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=Ht.fromISO(r,t),o=s.isValid}catch{o=!1}let a,l;try{a=Ht.fromISO(n,t),l=a.isValid}catch{l=!1}if(o&&l)return ms.fromDateTimes(s,a);if(o){const u=Hr.fromISO(n,t);if(u.isValid)return ms.after(s,u)}else if(l){const u=Hr.fromISO(r,t);if(u.isValid)return ms.before(a,u)}}return ms.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let n;return t!=null&&t.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,t),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?ms.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(A1).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;r.push(ms.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const t=Hr.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(t.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(ms.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:ms.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return ms.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?t=l.time:(t&&+t!=+l.time&&n.push(ms.fromDateTimes(t,l.time)),t=null);return ms.merge(n)}difference(...e){return ms.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:i0}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ES,t={}){return this.isValid?sa.create(this.s.loc.clone(t),e).formatInterval(this):i0}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:i0}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:i0}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:i0}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:i0}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Hr.invalid(this.invalidReason)}mapEndpoints(e){return ms.fromDateTimes(e(this.s),e(this.e))}}class OE{static hasDST(e=Cs.defaultZone){const t=Ht.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return sd.isValidZone(e)}static normalizeZone(e){return vf(e,Cs.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||En.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||En.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||En.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||En.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||En.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null}={}){return(n||En.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null}={}){return(n||En.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return En.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return En.create(t,null,"gregory").eras(e)}static features(){return{relative:Hye(),localeWeek:Vye()}}}function ehe(i,e){const t=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(i);return Math.floor(Hr.fromMillis(r).as("days"))}function _Pe(i,e,t){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=ehe(l,u);return(c-c%7)/7}],["days",ehe]],n={},s=i;let o,a;for(const[l,u]of r)t.indexOf(l)>=0&&(o=l,n[l]=u(i,e),a=s.plus(n),a>e?(n[l]--,i=s.plus(n),i>e&&(a=i,n[l]--,i=s.plus(n))):i=a);return[i,n,a,o]}function xPe(i,e,t,r){let[n,s,o,a]=_Pe(i,e,t);const l=e-n,u=t.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);u.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const c=Hr.fromObject(s,r);return u.length>0?Hr.fromMillis(l,r).shiftTo(...u).plus(c):c}const vR={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},the={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},wPe=vR.hanidec.replace(/[\[|\]]/g,"").split("");function EPe(i){let e=parseInt(i,10);if(isNaN(e)){e="";for(let t=0;t<i.length;t++){const r=i.charCodeAt(t);if(i[t].search(vR.hanidec)!==-1)e+=wPe.indexOf(i[t]);else for(const n in the){const[s,o]=the[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}function Au({numberingSystem:i},e=""){return new RegExp(`${vR[i||"latn"]}${e}`)}const SPe="missing Intl.DateTimeFormat.formatToParts support";function en(i,e=t=>t){return{regex:i,deser:([t])=>e(EPe(t))}}const CPe="",cve=`[ ${CPe}]`,hve=new RegExp(cve,"g");function TPe(i){return i.replace(/\./g,"\\.?").replace(hve,cve)}function ihe(i){return i.replace(/\./g,"").replace(hve," ").toLowerCase()}function ku(i,e){return i===null?null:{regex:RegExp(i.map(TPe).join("|")),deser:([t])=>i.findIndex(r=>ihe(t)===ihe(r))+e}}function rhe(i,e){return{regex:i,deser:([,t,r])=>AT(t,r),groups:e}}function PE(i){return{regex:i,deser:([e])=>e}}function APe(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function kPe(i,e){const t=Au(e),r=Au(e,"{2}"),n=Au(e,"{3}"),s=Au(e,"{4}"),o=Au(e,"{6}"),a=Au(e,"{1,2}"),l=Au(e,"{1,3}"),u=Au(e,"{1,6}"),c=Au(e,"{1,9}"),h=Au(e,"{2,4}"),d=Au(e,"{4,6}"),p=v=>({regex:RegExp(APe(v.val)),deser:([b])=>b,literal:!0}),g=(v=>{if(i.literal)return p(v);switch(v.val){case"G":return ku(e.eras("short"),0);case"GG":return ku(e.eras("long"),0);case"y":return en(u);case"yy":return en(h,tM);case"yyyy":return en(s);case"yyyyy":return en(d);case"yyyyyy":return en(o);case"M":return en(a);case"MM":return en(r);case"MMM":return ku(e.months("short",!0),1);case"MMMM":return ku(e.months("long",!0),1);case"L":return en(a);case"LL":return en(r);case"LLL":return ku(e.months("short",!1),1);case"LLLL":return ku(e.months("long",!1),1);case"d":return en(a);case"dd":return en(r);case"o":return en(l);case"ooo":return en(n);case"HH":return en(r);case"H":return en(a);case"hh":return en(r);case"h":return en(a);case"mm":return en(r);case"m":return en(a);case"q":return en(a);case"qq":return en(r);case"s":return en(a);case"ss":return en(r);case"S":return en(l);case"SSS":return en(n);case"u":return PE(c);case"uu":return PE(a);case"uuu":return en(t);case"a":return ku(e.meridiems(),0);case"kkkk":return en(s);case"kk":return en(h,tM);case"W":return en(a);case"WW":return en(r);case"E":case"c":return en(t);case"EEE":return ku(e.weekdays("short",!1),1);case"EEEE":return ku(e.weekdays("long",!1),1);case"ccc":return ku(e.weekdays("short",!0),1);case"cccc":return ku(e.weekdays("long",!0),1);case"Z":case"ZZ":return rhe(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return rhe(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return PE(/[a-z_+-/]{1,256}?/i);case" ":return PE(/[^\S\n\r]/);default:return p(v)}})(i)||{invalidReason:SPe};return g.token=i,g}const DPe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function MPe(i,e,t){const{type:r,value:n}=i;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=DPe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function LPe(i){return[`^${i.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,i]}function RPe(i,e,t){const r=i.match(e);if(r){const n={};let s=1;for(const o in t)if(Cy(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function IPe(i){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,r;return qi(i.z)||(t=sd.create(i.z)),qi(i.Z)||(t||(t=new Sa(i.Z)),r=i.Z),qi(i.q)||(i.M=(i.q-1)*3+1),qi(i.h)||(i.h<12&&i.a===1?i.h+=12:i.h===12&&i.a===0&&(i.h=0)),i.G===0&&i.y&&(i.y=-i.y),qi(i.u)||(i.S=fR(i.u)),[Object.keys(i).reduce((s,o)=>{const a=e(o);return a&&(s[a]=i[o]),s},{}),t,r]}let fk=null;function OPe(){return fk||(fk=Ht.fromMillis(1555555555555)),fk}function PPe(i,e){if(i.literal)return i;const t=sa.macroTokenToFormatOpts(i.val),r=pve(t,e);return r==null||r.includes(void 0)?i:r}function dve(i,e){return Array.prototype.concat(...i.map(t=>PPe(t,e)))}function fve(i,e,t){const r=dve(sa.parseFormat(t),i),n=r.map(o=>kPe(o,i)),s=n.find(o=>o.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{const[o,a]=LPe(n),l=RegExp(o,"i"),[u,c]=RPe(e,l,a),[h,d,p]=c?IPe(c):[null,null,void 0];if(Cy(c,"a")&&Cy(c,"H"))throw new F0("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:l,rawMatches:u,matches:c,result:h,zone:d,specificOffset:p}}}function FPe(i,e,t){const{result:r,zone:n,specificOffset:s,invalidReason:o}=fve(i,e,t);return[r,n,s,o]}function pve(i,e){if(!i)return null;const r=sa.create(e,i).dtFormatter(OPe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>MPe(o,i,s))}const pk="Invalid DateTime",nhe=864e13;function FE(i){return new Nu("unsupported zone",`the zone "${i.name}" is not supported`)}function mk(i){return i.weekData===null&&(i.weekData=SS(i.c)),i.weekData}function gk(i){return i.localWeekData===null&&(i.localWeekData=SS(i.c,i.loc.getMinDaysInFirstWeek(),i.loc.getStartOfWeek())),i.localWeekData}function tm(i,e){const t={ts:i.ts,zone:i.zone,c:i.c,o:i.o,loc:i.loc,invalid:i.invalid};return new Ht({...t,...e,old:t})}function mve(i,e,t){let r=i-e*60*1e3;const n=t.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=t.offset(r);return n===s?[r,n]:[i-Math.min(n,s)*60*1e3,Math.max(n,s)]}function NE(i,e){i+=e*60*1e3;const t=new Date(i);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function G2(i,e,t){return mve(TT(i),e,t)}function she(i,e){const t=i.o,r=i.c.year+Math.trunc(e.years),n=i.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...i.c,year:r,month:n,day:Math.min(i.c.day,CS(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Hr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=TT(s);let[l,u]=mve(a,t,i.zone);return o!==0&&(l+=o,u=i.zone.offset(l)),{ts:l,o:u}}function T1(i,e,t,r,n,s){const{setZone:o,zone:a}=t;if(i&&Object.keys(i).length!==0||e){const l=e||a,u=Ht.fromObject(i,{...t,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return Ht.invalid(new Nu("unparsable",`the input "${n}" can't be parsed as ${r}`))}function $E(i,e,t=!0){return i.isValid?sa.create(En.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(i,e):null}function yk(i,e){const t=i.c.year>9999||i.c.year<0;let r="";return t&&i.c.year>=0&&(r+="+"),r+=Ps(i.c.year,t?6:4),e?(r+="-",r+=Ps(i.c.month),r+="-",r+=Ps(i.c.day)):(r+=Ps(i.c.month),r+=Ps(i.c.day)),r}function ohe(i,e,t,r,n,s){let o=Ps(i.c.hour);return e?(o+=":",o+=Ps(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=":")):o+=Ps(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=Ps(i.c.second),(i.c.millisecond!==0||!r)&&(o+=".",o+=Ps(i.c.millisecond,3))),n&&(i.isOffsetFixed&&i.offset===0&&!s?o+="Z":i.o<0?(o+="-",o+=Ps(Math.trunc(-i.o/60)),o+=":",o+=Ps(Math.trunc(-i.o%60))):(o+="+",o+=Ps(Math.trunc(i.o/60)),o+=":",o+=Ps(Math.trunc(i.o%60)))),s&&(o+="["+i.zone.ianaName+"]"),o}const gve={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},NPe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},$Pe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},yve=["year","month","day","hour","minute","second","millisecond"],BPe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],jPe=["year","ordinal","hour","minute","second","millisecond"];function zPe(i){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[i.toLowerCase()];if(!e)throw new bye(i);return e}function ahe(i){switch(i.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return zPe(i)}}function lhe(i,e){const t=vf(e.zone,Cs.defaultZone),r=En.fromObject(e),n=Cs.now();let s,o;if(qi(i.year))s=n;else{for(const u of yve)qi(i[u])&&(i[u]=gve[u]);const a=Gye(i)||qye(i);if(a)return Ht.invalid(a);const l=t.offset(n);[s,o]=G2(i,l,t)}return new Ht({ts:s,zone:t,loc:r,o})}function uhe(i,e,t){const r=qi(t.round)?!0:t.round,n=(o,a)=>(o=pR(o,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(i,o)?0:e.startOf(o).diff(i.startOf(o),o).get(o):e.diff(i,o).get(o);if(t.unit)return n(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(i>e?-0:0,t.units[t.units.length-1])}function che(i){let e={},t;return i.length>0&&typeof i[i.length-1]=="object"?(e=i[i.length-1],t=Array.from(i).slice(0,i.length-1)):t=Array.from(i),[e,t]}class Ht{constructor(e){const t=e.zone||Cs.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Nu("invalid input"):null)||(t.isValid?null:FE(t));this.ts=qi(e.ts)?Cs.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[n,s]=[e.old.c,e.old.o];else{const a=t.offset(this.ts);n=NE(this.ts,a),r=Number.isNaN(n.year)?new Nu("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=t,this.loc=e.loc||En.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Ht({})}static local(){const[e,t]=che(arguments),[r,n,s,o,a,l,u]=t;return lhe({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,t]=che(arguments),[r,n,s,o,a,l,u]=t;return e.zone=Sa.utcInstance,lhe({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,t={}){const r=gOe(e)?e.valueOf():NaN;if(Number.isNaN(r))return Ht.invalid("invalid input");const n=vf(t.zone,Cs.defaultZone);return n.isValid?new Ht({ts:r,zone:n,loc:En.fromObject(t)}):Ht.invalid(FE(n))}static fromMillis(e,t={}){if(km(e))return e<-nhe||e>nhe?Ht.invalid("Timestamp out of range"):new Ht({ts:e,zone:vf(t.zone,Cs.defaultZone),loc:En.fromObject(t)});throw new Ya(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(km(e))return new Ht({ts:e*1e3,zone:vf(t.zone,Cs.defaultZone),loc:En.fromObject(t)});throw new Ya("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=vf(t.zone,Cs.defaultZone);if(!r.isValid)return Ht.invalid(FE(r));const n=En.fromObject(t),s=TS(e,ahe),{minDaysInFirstWeek:o,startOfWeek:a}=Wce(s,n),l=Cs.now(),u=qi(t.specificOffset)?r.offset(l):t.specificOffset,c=!qi(s.ordinal),h=!qi(s.year),d=!qi(s.month)||!qi(s.day),p=h||d,m=s.weekYear||s.weekNumber;if((p||c)&&m)throw new F0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new F0("Can't mix ordinal dates with month/day");const g=m||s.weekday&&!p;let v,b,_=NE(l,u);g?(v=BPe,b=NPe,_=SS(_,o,a)):c?(v=jPe,b=$Pe,_=dk(_)):(v=yve,b=gve);let E=!1;for(const P of v){const U=s[P];qi(U)?E?s[P]=b[P]:s[P]=_[P]:E=!0}const C=g?fOe(s,o,a):c?pOe(s):Gye(s),T=C||qye(s);if(T)return Ht.invalid(T);const D=g?Hce(s,o,a):c?Vce(s):s,[M,A]=G2(D,u,r),I=new Ht({ts:M,zone:r,o:A,loc:n});return s.weekday&&p&&e.weekday!==I.weekday?Ht.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${I.toISO()}`):I}static fromISO(e,t={}){const[r,n]=sPe(e);return T1(r,n,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,n]=oPe(e);return T1(r,n,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,n]=aPe(e);return T1(r,n,t,"HTTP",t)}static fromFormat(e,t,r={}){if(qi(e)||qi(t))throw new Ya("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=En.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,u,c]=FPe(o,e,t);return c?Ht.invalid(c):T1(a,l,r,`format ${t}`,e,u)}static fromString(e,t,r={}){return Ht.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,n]=pPe(e);return T1(r,n,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Ya("need to specify a reason the DateTime is invalid");const r=e instanceof Nu?e:new Nu(e,t);if(Cs.throwOnInvalid)throw new GIe(r);return new Ht({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=pve(e,En.fromObject(t));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,t={}){return dve(sa.parseFormat(e),En.fromObject(t)).map(n=>n.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?mk(this).weekYear:NaN}get weekNumber(){return this.isValid?mk(this).weekNumber:NaN}get weekday(){return this.isValid?mk(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?gk(this).weekday:NaN}get localWeekNumber(){return this.isValid?gk(this).weekNumber:NaN}get localWeekYear(){return this.isValid?gk(this).weekYear:NaN}get ordinal(){return this.isValid?dk(this.c).ordinal:NaN}get monthShort(){return this.isValid?OE.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?OE.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?OE.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?OE.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=TT(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*t),a=this.zone.offset(r-s*t);if(o===a)return[this];const l=r-o*t,u=r-a*t,c=NE(l,o),h=NE(u,a);return c.hour===h.hour&&c.minute===h.minute&&c.second===h.second&&c.millisecond===h.millisecond?[tm(this,{ts:l}),tm(this,{ts:u})]:[this]}get isInLeapYear(){return Qx(this.year)}get daysInMonth(){return CS(this.year,this.month)}get daysInYear(){return this.isValid?ty(this.year):NaN}get weeksInWeekYear(){return this.isValid?W_(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?W_(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:n}=sa.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(Sa.instance(e),t)}toLocal(){return this.setZone(Cs.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=vf(e,Cs.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||r){const s=e.offset(this.ts),o=this.toObject();[n]=G2(o,s,e)}return tm(this,{ts:n,zone:e})}else return Ht.invalid(FE(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return tm(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=TS(e,ahe),{minDaysInFirstWeek:r,startOfWeek:n}=Wce(t,this.loc),s=!qi(t.weekYear)||!qi(t.weekNumber)||!qi(t.weekday),o=!qi(t.ordinal),a=!qi(t.year),l=!qi(t.month)||!qi(t.day),u=a||l,c=t.weekYear||t.weekNumber;if((u||o)&&c)throw new F0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new F0("Can't mix ordinal dates with month/day");let h;s?h=Hce({...SS(this.c,r,n),...t},r,n):qi(t.ordinal)?(h={...this.toObject(),...t},qi(t.day)&&(h.day=Math.min(CS(h.year,h.month),h.day))):h=Vce({...dk(this.c),...t});const[d,p]=G2(h,this.o,this.zone);return tm(this,{ts:d,o:p})}plus(e){if(!this.isValid)return this;const t=Hr.fromDurationLike(e);return tm(this,she(this,t))}minus(e){if(!this.isValid)return this;const t=Hr.fromDurationLike(e).negate();return tm(this,she(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},n=Hr.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?sa.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):pk}toLocaleString(e=ES,t={}){return this.isValid?sa.create(this.loc.clone(t),e).formatDateTime(this):pk}toLocaleParts(e={}){return this.isValid?sa.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=yk(this,o);return a+="T",a+=ohe(this,o,t,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?yk(this,e==="extended"):null}toISOWeekDate(){return $E(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+ohe(this,o==="extended",t,e,r,s):null}toRFC2822(){return $E(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return $E(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?yk(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(t||e)&&(r&&(n+=" "),t?n+="z":e&&(n+="ZZ")),$E(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():pk}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return Hr.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=yOe(t).map(Hr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=xPe(a,l,s,n);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff(Ht.now(),e,t)}until(e){return this.isValid?ms.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=n&&n<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Ht.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),uhe(t,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?uhe(e.base||Ht.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Ht.isDateTime))throw new Ya("min requires all arguments be DateTimes");return Yce(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Ht.isDateTime))throw new Ya("max requires all arguments be DateTimes");return Yce(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=En.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return fve(o,e,t)}static fromStringExplain(e,t,r={}){return Ht.fromFormatExplain(e,t,r)}static get DATE_SHORT(){return ES}static get DATE_MED(){return _ye}static get DATE_MED_WITH_WEEKDAY(){return VIe}static get DATE_FULL(){return xye}static get DATE_HUGE(){return wye}static get TIME_SIMPLE(){return Eye}static get TIME_WITH_SECONDS(){return Sye}static get TIME_WITH_SHORT_OFFSET(){return Cye}static get TIME_WITH_LONG_OFFSET(){return Tye}static get TIME_24_SIMPLE(){return Aye}static get TIME_24_WITH_SECONDS(){return kye}static get TIME_24_WITH_SHORT_OFFSET(){return Dye}static get TIME_24_WITH_LONG_OFFSET(){return Mye}static get DATETIME_SHORT(){return Lye}static get DATETIME_SHORT_WITH_SECONDS(){return Rye}static get DATETIME_MED(){return Iye}static get DATETIME_MED_WITH_SECONDS(){return Oye}static get DATETIME_MED_WITH_WEEKDAY(){return WIe}static get DATETIME_FULL(){return Pye}static get DATETIME_FULL_WITH_SECONDS(){return Fye}static get DATETIME_HUGE(){return Nye}static get DATETIME_HUGE_WITH_SECONDS(){return $ye}}function A1(i){if(Ht.isDateTime(i))return i;if(i&&i.valueOf&&km(i.valueOf()))return Ht.fromJSDate(i);if(i&&typeof i=="object")return Ht.fromObject(i);throw new Ya(`Unknown datetime argument: ${i}, of type ${typeof i}`)}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const UPe={datetime:Ht.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:Ht.TIME_WITH_SECONDS,minute:Ht.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};K0e._date.override({_id:"luxon",_create:function(i){return Ht.fromMillis(i,this.options)},init(i){this.options.locale||(this.options.locale=i.locale)},formats:function(){return UPe},parse:function(i,e){const t=this.options,r=typeof i;return i===null||r==="undefined"?null:(r==="number"?i=this._create(i):r==="string"?typeof e=="string"?i=Ht.fromFormat(i,e,t):i=Ht.fromISO(i,t):i instanceof Date?i=Ht.fromJSDate(i,t):r==="object"&&!(i instanceof Ht)&&(i=Ht.fromObject(i,t)),i.isValid?i.valueOf():null)},format:function(i,e){const t=this._create(i);return typeof e=="string"?t.toFormat(e):t.toLocaleString(e)},add:function(i,e,t){const r={};return r[t]=e,this._create(i).plus(r).valueOf()},diff:function(i,e,t){return this._create(i).diff(this._create(e)).as(t).valueOf()},startOf:function(i,e,t){if(e==="isoWeek"){t=Math.trunc(Math.min(Math.max(0,t),6));const r=this._create(i);return r.minus({days:(r.weekday-t+7)%7}).startOf("day").valueOf()}return e?this._create(i).startOf(e).valueOf():i},endOf:function(i,e){return this._create(i).endOf(e).valueOf()}});const DT={errorBarLineWidth:{v:[1,3]},errorBarColor:{v:["#2c2c2c","#1f1f1f"]},errorBarWhiskerLineWidth:{v:[1,3]},errorBarWhiskerRatio:{v:[.2,.25]},errorBarWhiskerSize:{v:[20,24]},errorBarWhiskerColor:{v:["#2c2c2c","#1f1f1f"]}},bR={_scriptable:!0,_indexable:i=>i!=="v"},hhe=Object.keys(DT);function _R(i,e){const t=Array.isArray(i)?i:[i],r=Array.isArray(e)?e:[e];if(t.length===r.length)return t.map((s,o)=>[s,r[o]]);const n=Math.max(t.length,r.length);return Array(n).map((s,o)=>[t[o%t.length],r[o%r.length]])}function el(i,e){if(typeof i=="string"||typeof i=="number")return i;const t=Array.isArray(i)?i:i.v;return t[e%t.length]}function xR(i,e,t){const r=el(e.errorBarWhiskerRatio,t);return i!=null&&r>0?i*r*.5:el(e.errorBarWhiskerSize,t)*.5}function GPe(i,e,t,r,n){n.save(),n.translate(i.x,0);const s=_R(e??i.y,t??i.y);s.reverse().forEach(([o,a],l)=>{const u=s.length-l-1,c=xR(i.width,r,u);n.lineWidth=el(r.errorBarLineWidth,u),n.strokeStyle=el(r.errorBarColor,u),n.beginPath(),n.moveTo(0,o),n.lineTo(0,a),n.stroke(),n.lineWidth=el(r.errorBarWhiskerLineWidth,u),n.strokeStyle=el(r.errorBarWhiskerColor,u),n.beginPath(),n.moveTo(-c,o),n.lineTo(c,o),n.moveTo(-c,a),n.lineTo(c,a),n.stroke()}),n.restore()}function qPe(i,e,t,r,n){n.save(),n.translate(0,i.y);const s=_R(e??i.x,t??i.x);s.reverse().forEach(([o,a],l)=>{const u=s.length-l-1,c=xR(i.height,r,u);n.lineWidth=el(r.errorBarLineWidth,u),n.strokeStyle=el(r.errorBarColor,u),n.beginPath(),n.moveTo(o,0),n.lineTo(a,0),n.stroke(),n.lineWidth=el(r.errorBarWhiskerLineWidth,u),n.strokeStyle=el(r.errorBarWhiskerColor,u),n.beginPath(),n.moveTo(o,-c),n.lineTo(o,c),n.moveTo(a,-c),n.lineTo(a,c),n.stroke()}),n.restore()}function vve(i,e){var t,r,n,s;const o=i.getProps(["x","y","width","height","xMin","xMax","yMin","yMax"]);(o.xMin!=null||o.xMax!=null)&&qPe(o,(t=o.xMin)!==null&&t!==void 0?t:null,(r=o.xMax)!==null&&r!==void 0?r:null,i.options,e),(o.yMin!=null||o.yMax!=null)&&GPe(o,(n=o.yMin)!==null&&n!==void 0?n:null,(s=o.yMax)!==null&&s!==void 0?s:null,i.options,e)}function HPe(i,e,t,r,n){n.save(),n.translate(i.x,i.y);const s=(i.startAngle+i.endAngle)/2,o=Math.cos(s),a=Math.sin(s),l={x:-a,y:o},u=Math.sqrt(l.x*l.x+l.y*l.y);l.x/=u,l.y/=u;const c=_R(e??i.outerRadius,t??i.outerRadius);c.reverse().forEach(([h,d],p)=>{const m=c.length-p-1,g=h*o,v=h*a,b=d*o,_=d*a,E=xR(null,r,m),C=l.x*E,T=l.y*E;n.lineWidth=el(r.errorBarLineWidth,m),n.strokeStyle=el(r.errorBarColor,m),n.beginPath(),n.moveTo(g,v),n.lineTo(b,_),n.stroke(),n.lineWidth=el(r.errorBarWhiskerLineWidth,m),n.strokeStyle=el(r.errorBarWhiskerColor,m),n.beginPath(),n.moveTo(g+C,v+T),n.lineTo(g-C,v-T),n.moveTo(b+C,_+T),n.lineTo(b-C,_-T),n.stroke()}),n.restore()}function VPe(i,e){const t=i.getProps(["x","y","startAngle","endAngle","rMin","rMax","outerRadius"]);(t.rMin!=null||t.rMax!=null)&&HPe(t,t.rMin,t.rMax,i.options,e)}class lv extends Am{draw(e){super.draw(e),vve(this,e)}}lv.id="barWithErrorBar";lv.defaults={...Am.defaults,...DT};lv.defaultRoutes=Am.defaultRoutes;lv.descriptors=bR;class Ol extends Tm{draw(e,t){super.draw.call(this,e,t),vve(this,e)}}Ol.id="pointWithErrorBar";Ol.defaults={...Tm.defaults,...DT};Ol.defaultRoutes=Tm.defaultRoutes;Ol.descriptors=bR;class uv extends Cf{draw(e){super.draw(e),VPe(this,e)}}uv.id="arcWithErrorBar";uv.defaults={...Cf.defaults,...DT};uv.defaultRoutes=Cf.defaultRoutes;uv.descriptors=bR;const iM=["xMin","xMax","yMin","yMax"];function bve(i){return i?iM.slice(0,2):iM.slice(2)}function Y_(i,e,t,r,n){const s=[`${r.axis}Min`,`${r.axis}Max`],o=r.getBasePixel();for(const a of s){const l=e[a];Array.isArray(l)?i[a]=l.map(u=>n?o:r.getPixelForValue(u,t)):typeof l=="number"?i[a]=n?o:r.getPixelForValue(l,t):i[a]=null}}function WPe(i,e,t,r,n){const s=n.animation,o=[`${t.axis}Min`,`${t.axis}Max`],a=l=>{const u=t.getDistanceFromCenterForValue(l),c=s.animateScale?0:u;return r?c:u};for(const l of o){const u=e[l];Array.isArray(u)?i[l]=u.map(a):typeof u=="number"?i[l]=a(u):i[l]=null}}const YPe=["linear","logarithmic","time","timeseries"];function rM(i){return YPe.includes(i.type)}function wR(i){return Array.isArray(i)?i.slice().reverse():i}function _ve(i){const e=bve(i.element.horizontal),t=yye.defaults.callbacks.label.call(this,i),r=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex];return r==null||e.every(n=>r[n]==null)?t:`${t} (${wR(r[e[0]])} .. ${r[e[1]]})`}function XPe(i){const e=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex],t=(r,n)=>{const s=bve(n);return e==null||s.every(o=>e[o]==null)?r:`${r} [${wR(e[s[0]])} .. ${e[s[1]]}]`};return`(${t(i.label,!0)}, ${t(i.parsed.y,!1)})`}function ZPe(i){const e=Fc.overrides.plugins.tooltip.callbacks.label.call(this,i),t=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex],r=["rMin","rMax"];return t==null||r.every(n=>t[n]==null)?e:`${e} [${wR(t[r[0]])} .. ${t[r[1]]}]`}const xve={color(i,e,t){const r=i||"transparent",n=e||"transparent";if(r===n)return e;const s=yS(r),o=s.valid&&yS(n);return o&&o.valid?o.mix(s,t).hexString():e},number(i,e,t){return i===e?e:i+(e-i)*t}};function wve(i,e,t,r,n){if(typeof i===r&&typeof e===r)return n(i,e,t);if(Array.isArray(i)&&Array.isArray(e))return i.map((o,a)=>n(o,e[a],t));const s=o=>o&&Array.isArray(o.v);return s(i)&&s(e)?{v:i.v.map((o,a)=>n(o,e.v[a],t))}:e}function KPe(i,e,t){return wve(i,e,t,"number",xve.number)}function JPe(i,e,t){return wve(i,e,t,"string",xve.color)}const MT={animations:{numberArray:{fn:KPe,properties:iM.concat(hhe.filter(i=>!i.endsWith("Color")),["rMin","rMax"])},colorArray:{fn:JPe,properties:hhe.filter(i=>i.endsWith("Color"))}}};function LT(i,e){const{axis:t}=i;i.axis=`${t}MinMin`;const{min:r}=e(i);i.axis=`${t}MaxMax`;const{max:n}=e(i);return i.axis=t,{min:r,max:n}}function dhe(i,e,t){return Array.isArray(e)?t(i,...e):typeof e=="number"?t(i,e):i}function jm(i,e,t,r,n){const s=typeof e=="string"?e:e.axis,o=`${s}Min`,a=`${s}Max`,l=`${s}MinMin`,u=`${s}MaxMax`;for(let c=0;c<n;c+=1){const h=c+r,d=i[c];d[o]=typeof t[h]=="object"?t[h][o]:null,d[a]=typeof t[h]=="object"?t[h][a]:null,d[l]=dhe(d[s],d[o],Math.min),d[u]=dhe(d[s],d[a],Math.max)}}function Eve(i,e,t,r){const{axis:n}=e,s=e.getLabels();for(let o=0;o<r;o+=1){const a=o+t,l=i[o];l[n]=e.parse(s[a],a)}}function RT(i,e,t,r=[],n=[]){xa.addControllers(t),Array.isArray(r)?xa.addElements(...r):xa.addElements(r),Array.isArray(n)?xa.addScales(...n):xa.addScales(n);const s=e;return s.type=i,s}class cv extends Ff{getMinMax(e,t){return LT(e,r=>super.getMinMax(r,t))}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){jm(e,t.vScale,r,n,s);const o=t.iScale;rM(o)?jm(e,t.iScale,r,n,s):Eve(e,t.iScale,n,s)}updateElement(e,t,r,n){typeof t=="number"&&Y_(r,this.getParsed(t),t,this._cachedMeta.vScale,n==="reset"),super.updateElement(e,t,r,n)}}cv.id="barWithErrorBars";cv.defaults=Il({},[Ff.defaults,MT,{dataElementType:lv.id}]);cv.overrides=Il({},[Ff.overrides,{plugins:{tooltip:{callbacks:{label:_ve}}}}]);cv.defaultRoutes=Ff.defaultRoutes;class QPe extends Wa{constructor(e,t){super(e,RT("barWithErrorBars",t,cv,lv,[Bm,Sy]))}}QPe.id=cv.id;class rg extends Jh{getMinMax(e,t){return LT(e,r=>super.getMinMax(r,t))}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){jm(e,t.vScale,r,n,s);const o=t.iScale;rM(o)?jm(e,t.iScale,r,n,s):Eve(e,t.iScale,n,s)}updateElement(e,t,r,n){e instanceof Ol&&typeof t=="number"&&this.updateElementScale(t,r,n),super.updateElement(e,t,r,n)}updateElementScale(e,t,r){Y_(t,this.getParsed(e),e,this._cachedMeta.vScale,r==="reset");const n=this._cachedMeta.iScale;rM(n)&&Y_(t,this.getParsed(e),e,this._cachedMeta.iScale,r==="reset")}updateElements(e,t,r,n){const s=n==="reset",a=this.chart._animationsDisabled||s||n==="none";if(super.updateElements(e,t,r,n),!!a)for(let l=t;l<t+r;++l){const u=e[l];u instanceof Ol&&this.updateElementScale(l,u,n)}}}rg.id="lineWithErrorBars";rg.defaults=Il({},[Jh.defaults,MT,{dataElementType:Ol.id}]);rg.overrides=Il({},[Jh.overrides,{plugins:{tooltip:{callbacks:{label:_ve}}}}]);rg.defaultRoutes=Jh.defaultRoutes;class Sve extends Wa{constructor(e,t){super(e,RT("lineWithErrorBars",t,rg,Ol,[Bm,Sy]))}}Sve.id=rg.id;class ng extends Cm{getMinMax(e,t){return LT(e,r=>super.getMinMax(r,t))}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){jm(e,t.xScale,r,n,s),jm(e,t.yScale,r,n,s)}updateElement(e,t,r,n){e instanceof Ol&&typeof t=="number"&&this.updateElementScale(t,r,n),super.updateElement(e,t,r,n)}updateElementScale(e,t,r){Y_(t,this.getParsed(e),e,this._cachedMeta.xScale,r==="reset"),Y_(t,this.getParsed(e),e,this._cachedMeta.yScale,r==="reset")}updateElements(e,t,r,n){const s=n==="reset",a=this.chart._animationsDisabled||s||n==="none";if(super.updateElements(e,t,r,n),!!a)for(let l=t;l<t+r;++l){const u=e[l];u instanceof Ol&&this.updateElementScale(l,u,n)}}}ng.id="scatterWithErrorBars";ng.defaults=Il({},[Cm.defaults,MT,{dataElementType:Ol.id}]);ng.overrides=Il({},[Cm.overrides,{plugins:{tooltip:{callbacks:{label:XPe}}}}]);ng.defaultRoutes=Jh.defaultRoutes;class Cve extends Wa{constructor(e,t){super(e,RT("scatterWithErrorBars",t,ng,Ol,[Bm]))}}Cve.id=ng.id;class hv extends Fc{getMinMaxImpl(e){const t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,s)=>{const o=this.getParsed(s)[e.axis];Number.isNaN(o)||!this.chart.getDataVisibility(s)||(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}getMinMax(e){return LT(e,t=>this.getMinMaxImpl(t))}countVisibleElements(){const e=this._cachedMeta;return e.data.reduce((t,r,n)=>!Number.isNaN(e._parsed[n].r)&&this.chart.getDataVisibility(n)?t+1:t,0)}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){const o=t.rScale;for(let a=0;a<s;a+=1){const l=a+n,u=r[l],c=o.parse(u[o.axis],l);e[a]={[o.axis]:c}}jm(e,o,r,n,s)}updateElement(e,t,r,n){typeof t=="number"&&WPe(r,this.getParsed(t),this._cachedMeta.rScale,n==="reset",this.chart.options),super.updateElement(e,t,r,n)}updateElements(e,t,r,n){const s=this.chart.scales.r,o=s.getDistanceFromCenterForValue;s.getDistanceFromCenterForValue=function(l){return typeof l=="number"?o.call(this,l):o.call(this,l.r)},super.updateElements(e,t,r,n),s.getDistanceFromCenterForValue=o}}hv.id="polarAreaWithErrorBars";hv.defaults=Il({},[Fc.defaults,MT,{dataElementType:uv.id}]);hv.overrides=Il({},[Fc.overrides,{plugins:{tooltip:{callbacks:{label:ZPe}}}}]);hv.defaultRoutes=Fc.defaultRoutes;class eFe extends Wa{constructor(e,t){super(e,RT("polarAreaWithErrorBars",t,hv,uv,[P0]))}}eFe.id=hv.id;var Tve={};function lu(i,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(i)),this._timeouts=i,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var tFe=lu;lu.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};lu.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};lu.prototype.retry=function(i){if(this._timeout&&clearTimeout(this._timeout),!i)return!1;var e=new Date().getTime();if(i&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(i),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(i);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t),this._options.unref&&this._timer.unref(),!0};lu.prototype.attempt=function(i,e){this._fn=i,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};lu.prototype.try=function(i){console.log("Using RetryOperation.try() is deprecated"),this.attempt(i)};lu.prototype.start=function(i){console.log("Using RetryOperation.start() is deprecated"),this.attempt(i)};lu.prototype.start=lu.prototype.try;lu.prototype.errors=function(){return this._errors};lu.prototype.attempts=function(){return this._attempts};lu.prototype.mainError=function(){if(this._errors.length===0)return null;for(var i={},e=null,t=0,r=0;r<this._errors.length;r++){var n=this._errors[r],s=n.message,o=(i[s]||0)+1;i[s]=o,o>=t&&(e=n,t=o)}return e};(function(i){var e=tFe;i.operation=function(t){var r=i.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},i.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in t)r[n]=t[n];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<r.retries;o++)s.push(this.createTimeout(o,r));return t&&t.forever&&!s.length&&s.push(this.createTimeout(o,r)),s.sort(function(a,l){return a-l}),s},i.createTimeout=function(t,r){var n=r.randomize?Math.random()+1:1,s=Math.round(n*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return s=Math.min(s,r.maxTimeout),s},i.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n){n=[];for(var s in t)typeof t[s]=="function"&&n.push(s)}for(var o=0;o<n.length;o++){var a=n[o],l=t[a];t[a]=(function(c){var h=i.operation(r),d=Array.prototype.slice.call(arguments,1),p=d.pop();d.push(function(m){h.retry(m)||(m&&(arguments[0]=h.mainError()),p.apply(this,arguments))}),h.attempt(function(){c.apply(t,d)})}).bind(t,l),t[a].options=r}}})(Tve);var iFe=Tve;const rFe=$o(iFe),nFe=Object.prototype.toString,sFe=i=>nFe.call(i)==="[object Error]",oFe=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed"]);function aFe(i){return i&&sFe(i)&&i.name==="TypeError"&&typeof i.message=="string"?i.message==="Load failed"?i.stack===void 0:oFe.has(i.message):!1}let nM=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};const fhe=(i,e,t)=>{const r=t.retries-(e-1);return i.attemptNumber=e,i.retriesLeft=r,i};async function phe(i,e){return new Promise((t,r)=>{e={onFailedAttempt(){},retries:10,shouldRetry:()=>!0,...e};const n=rFe.operation(e),s=()=>{var a;n.stop(),r((a=e.signal)==null?void 0:a.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",s,{once:!0});const o=()=>{var a;(a=e.signal)==null||a.removeEventListener("abort",s),n.stop()};n.attempt(async a=>{try{const l=await i(a);o(),t(l)}catch(l){try{if(!(l instanceof Error))throw new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`);if(l instanceof nM)throw l.originalError;if(l instanceof TypeError&&!aFe(l))throw l;if(fhe(l,a,e),await e.shouldRetry(l)||(n.stop(),r(l)),await e.onFailedAttempt(l),!n.retry(l))throw n.mainError()}catch(u){fhe(u,a,e),o(),r(u)}}})})}class lFe{constructor(e,t,r,n,s,o,a,l){We(this,"type");We(this,"endpoint");We(this,"parameters");We(this,"retries");We(this,"source");We(this,"table");We(this,"geometry");We(this,"timeParameter");this.type=e,this.endpoint=t,this.parameters=r,this.retries=n,this.source=s,this.table=o,this.geometry=a,this.timeParameter=l}fetchData(e,t,r){switch(this.type){case"signals":return this.fetchSignals(e,t,r);case"geodb":return this.fetchGeoDBData(e,t,r);default:return null}}fetchGeoDBData(e,t,r){const n=this.parameters[e].join(","),s=`and=(${this.timeParameter}.gte.${t.toISODate()},${this.timeParameter}.lte.${r.toISODate()})`,o=`${this.endpoint}/${this.source}_${this.table}?${s}&select=${n},${this.timeParameter}`;async function a(){const l=await fetch(o,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"GET",mode:"cors"});if(l.status===404)throw new nM(l.statusText);if(l.status!==200)throw Error(l.statusText);return l}return phe(a,{onFailedAttempt:l=>{console.log(`Attempt ${l.attemptNumber} failed. There are ${l.retriesLeft} retries left.`)},retries:this.retries}).then(function(l){return l.json()})}fetchSignals(e,t,r){const n=this.parameters[e].map(u=>`feature=${u}`).join("&"),s=`${t?"&start_date="+t.toISODate():""}${r?"&end_date="+r.toISODate():""}`,o=`${this.endpoint}?source=${this.source}&${n}${s}`,a=this.geometry;async function l(){const u=await fetch(o,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"POST",mode:"cors",body:JSON.stringify({geometry:a})});if(u.status===404)throw new nM(u.statusText);if(u.status!==200)throw Error(u.statusText);return u}return phe(l,{onFailedAttempt:u=>{console.log(`Attempt ${u.attemptNumber} failed. There are ${u.retriesLeft} retries left.`)},retries:this.retries}).then(function(u){return u.json()}).catch(u=>{console.error(u),document.querySelector("eox-chart").shadowRoot.querySelector("#error").style.display="flex",setTimeout(()=>{document.querySelector("eox-chart").shadowRoot.querySelector("#error").style.display="none"})})}convertData(e){switch(this.type){case"signals":return this.convertSignals(e);case"geodb":return this.convertGeoDBData(e);default:return null}}convertSignals(e){let t={};const r=e.basicStats;return e&&e.date!=="missing"&&(t={x:Ht.fromISO(e.date).setZone("UTC"),y:r.mean,yMin:r.min,yMax:r.max}),t}convertGeoDBData(e){let t={};return e&&e.date!=="missing"&&(t={x:Ht.fromISO(e.date).setZone("UTC"),y:e.basicStats.mean,yMin:null,yMax:null}),t}setGeometry(e){this.geometry=e}}Wa.register(rg,Sve,Ol,Cve,ng,Bm,Sy);class mhe{constructor(e,t,r){We(this,"type");We(this,"chart");We(this,"startTime");We(this,"endTime");We(this,"timeAggregation");We(this,"options");We(this,"chartOptions");We(this,"dataStorage");We(this,"status");We(this,"activeFields");We(this,"requestHandler");We(this,"additionalYAxis");if(this.type=e,this.chart=t,this.options=r,this.startTime=Ht.now().minus(r.timeInterval),this.endTime=Ht.now(),r.startTime&&r.endTime&&(this.startTime=Ht.fromISO(r.startTime).setZone("UTC"),this.endTime=Ht.fromISO(r.endTime).setZone("UTC")),this.options.timeAggregation&&(this.timeAggregation=this.options.timeAggregation),this.options.retries=this.options.retries?this.options.retries:5,this.options.normalize=this.options.normalize?this.options.normalize:!1,this.options.showMinMax=this.options.showMinMax?this.options.showMinMax:!1,this.additionalYAxis=this.options.additionalYAxis?this.options.additionalYAxis:null,this.dataStorage={},this.options.features.forEach((n,s)=>this.dataStorage[s]={}),this.requestHandler=new lFe(e,this.options.endpoint,this.options.features,this.options.retries,this.options.source,this.options.table,this.options.geometry,this.options.timeParameter),this.status="ready",this.chartOptions={responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:60,left:10,bottom:10}},scales:{x:{type:"time",min:this.startTime.toISODate(),max:this.endTime.toISODate(),ticks:{minRotation:0,maxRotation:0}}},interaction:{axis:"x",mode:"nearest",intersect:!1},plugins:{htmlLegend:{containerID:"legend-container",onClick:(n,s)=>{if(s.hidden)this.setActiveFields([...this.activeFields,s.text]);else{const o=this.activeFields.indexOf(s.text),a=this.activeFields;a.splice(o,1),this.setActiveFields(a)}}},legend:{display:!1},tooltip:{callbacks:{title:n=>{var o;return((o=n[0])==null?void 0:o.raw).x.toISODate()},label:n=>{const s=n.raw,o=s.yMin!==null?`;  ${s.yMin.toPrecision(3)}`:"",a=s.yMax!==null?`,  ${s.yMax.toPrecision(3)}`:"";return`${n.dataset.label}:  ${s.y.toPrecision(3)}${o}${a}`}}}}},this.additionalYAxis!==null)for(let n=0;n<this.additionalYAxis.length;n++){const s=this.additionalYAxis[n];this.chartOptions.scales[s.id]={type:"linear",position:"right"}}}checkLoadingStatus(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#loadingIndicator");let t=!1;Object.keys(this.dataStorage).forEach((r,n)=>{Object.keys(this.dataStorage[n]).forEach(s=>{this.dataStorage[n][s].status==="fetching"&&(t=!0)})}),e.className=t?"loader":"loader hidden"}updateChart(){this.checkLoadingStatus(),this.chart.options=this.chartOptions;const e=[];this.options.features.flat().forEach((t,r)=>{let n=-1;if(this.options.features.forEach((s,o)=>{s.includes(t)&&(n=o)}),n!==-1){const s=[];let o=Number.MAX_VALUE,a=Number.MIN_VALUE;Object.keys(this.dataStorage[n]).forEach(h=>{const d=this.dataStorage[n][h];if(d.status==="finished"){if(this.type==="signals"&&Object.keys(d.data).length!==0&&Object.keys(d.data).includes(t)&&(d.data[t].forEach(p=>{const m=p.basicStats;this.options.showMinMax?(o=m.min<o?m.min:o,a=m.max>a?m.max:a):(o=m.mean<o?m.mean:o,a=m.mean>a?m.mean:a)}),s.push(...d.data[t])),this.type==="geodb"&&Object.keys(d.data).length!==0){const p=d.data.map(m=>(m[t]!==null&&(o=m[t]<o?m[t]:o,a=m[t]>a?m[t]:a),{date:m[this.options.timeParameter],basicStats:{mean:m[t]}}));s.push(...p)}}else s.push({date:"missing"})});let l=!1,u=s.map(h=>this.requestHandler.convertData(h));if(u.sort((h,d)=>h.x-d.x),u.length>0&&(l=!0),l&&this.timeAggregation){let h=Number.MIN_VALUE,d=Number.MAX_VALUE;o=Number.MAX_VALUE,a=Number.MIN_VALUE;const p=[];let m=0,g=Ht.fromObject({year:this.startTime.year,month:this.startTime.month,day:this.startTime.day});for(;g<this.endTime;){let v=0,b=!1;for(;m<u.length&&(Object.keys(u[m]).length===0||u[m].x<g);)m++;const _=m;for(;m<u.length&&(Object.keys(u[m]).length===0||u[m].x<g.plus(this.timeAggregation));){const T=u[m];v+=T.y,h=T.y!==null&&T.y>h?T.y:h,h=T.yMax!==null&&T.yMax>h?T.yMax:h,d=T.y!==null&&T.y<d?T.y:d,d=T.yMin!==null&&T.yMin<d?T.yMin:d,m++,b=!0}const C=m-_;if(C>0&&b){const T=v/C;this.options.showMinMax?(o=d<o?d:o,a=h>a?h:a):(o=T<o?T:o,a=T>a?T:a),p.push({x:g,y:T,yMin:d,yMax:h}),h=Number.MIN_VALUE,d=Number.MAX_VALUE}g=g.plus(this.timeAggregation)}u=p}if(l&&this.options.normalize){const h=a-o;u=u.map(d=>(d.y!==null?d.y=(d.y-o)/h:d.y=null,d.yMin=(d.yMin-o)/h,d.yMax=(d.yMax-o)/h,d))}let c={type:"line",label:t,data:u,hidden:!this.activeFields.includes(t)};if(this.options.showMinMax&&(c={type:"lineWithErrorBars",label:t,data:u,hidden:!this.activeFields.includes(t),errorBarWhiskerLineWidth:2,errorBarColor:"#00000000"}),this.options.colors&&this.options.colors.length>=r){const h=this.options.colors[r];c.backgroundColor=h,c.borderColor=h,this.options.showMinMax&&(c={type:"lineWithErrorBars",label:t,data:u,hidden:!this.activeFields.includes(t),errorBarWhiskerLineWidth:2,errorBarColor:"#00000000",errorBarWhiskerColor:h,errorBarWhiskerSize:10,backgroundColor:h,borderColor:h})}if(this.additionalYAxis!==null)for(let h=0;h<this.additionalYAxis.length;h++){const d=this.additionalYAxis[h];d.containedSignals.includes(t)&&(c.yAxisID=d.id)}e.push(c)}}),this.chart.data={datasets:e},this.chart.update("none")}retrieveMissingData(){const e=[];this.activeFields.forEach(n=>{this.options.features.forEach((s,o)=>{s.includes(n)&&!e.includes(o)&&e.push(o)})});let t=Ht.fromObject({year:this.endTime.year,month:this.endTime.month}).plus({month:1}).minus({second:1});const r=Ht.fromObject({year:this.startTime.year,month:this.startTime.month}).plus({month:1}).minus({second:1});for(;t>r;){const n=t.toFormat("yyyyMM");e.forEach(s=>{if(!(n in this.dataStorage[s])){const o=this.requestHandler.fetchData(s,Ht.fromObject({year:t.year,month:t.month}),Ht.fromObject({year:t.year,month:t.month}).plus({month:1}).minus({second:1})).then(a=>{this.dataStorage[s][n].data=a,this.dataStorage[s][n].status="finished",this.updateChart()}).catch(()=>{this.dataStorage[s][n].status="failed",this.updateChart()});this.dataStorage[s][n]={request:o,status:"fetching"}}}),t=t.minus({months:1})}}triggerCSVDownload(){const e=[],t=[],r=this.activeFields;r.forEach((l,u)=>{let c=-1;if(this.options.features.forEach((h,d)=>{h.includes(l)&&(c=d)}),c!==-1){const h=[];Object.keys(this.dataStorage[c]).forEach(d=>{const p=this.dataStorage[c][d];p.status==="finished"&&Object.keys(p.data).length!==0&&Object.keys(p.data).includes(l)&&h.push(...p.data[l])}),h.length>0&&(t.push(r[u]),e.push(h))}});const n={};t.forEach((l,u)=>{e[u].forEach(c=>{n[c.date]||(n[c.date]={}),n[c.date][l]=c.basicStats})});let s="time,";const o=t.map(l=>[l,`${l}_max`,`${l}_min`]);s+=o.flat().join(","),s+=`
`,Object.keys(n).forEach(l=>{const u=[l];t.forEach(c=>{const h=n[l][c]?n[l][c]:null;h!=null?u.push(h.mean,h.max,h.min):u.push("","","")}),s+=u.join(","),s+=`
`});const a=document.createElement("a");a.href="data:text/csv;charset=utf-8,"+encodeURI(s),a.target="_blank",a.download="chart_data.csv",a.click()}setGeometry(e){this.dataStorage={},this.options.features.forEach((t,r)=>this.dataStorage[r]={}),this.options.geometry=e,this.requestHandler.setGeometry(e),this.retrieveMissingData(),this.updateChart()}setActiveFields(e){this.activeFields=e,this.retrieveMissingData(),this.updateChart()}setTimeInterval(e,t){this.startTime=e,this.endTime=t,this.chartOptions.scales.x.min=e.toISODate(),this.chartOptions.scales.x.max=t.toISODate(),this.retrieveMissingData(),this.updateChart()}setNormalize(e){this.options.normalize=e,this.updateChart()}setShowMinMax(e){this.options.showMinMax=e,this.updateChart()}setTimeAggregation(e){this.timeAggregation=e,this.updateChart()}}class ghe{constructor(e,t,r,n){We(this,"element");We(this,"sdm");We(this,"sdmOptions");We(this,"options");this.element=e,this.sdm=t,this.options=n,this.sdmOptions=r,this.generateTimeAggregationOptions(),this.addNormalizeCheckbox(),this.addShowMinMax(),this.addCSVDownload(),this.generateTimeSelectionOptions(),document.querySelector("eox-chart").shadowRoot.querySelector("#controls").style.display="flex",document.querySelector("eox-chart").shadowRoot.querySelector("#legend-container").style.display="block",document.querySelector("eox-chart").shadowRoot.querySelector("#chart-container").classList.add("controls")}removeStartEndInputs(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#startInput"),t=document.querySelector("eox-chart").shadowRoot.querySelector("#endInput"),r=document.querySelector("eox-chart").shadowRoot.querySelector("#setTime");e&&t&&r&&(e.style.display="none",t.style.display="none",r.style.display="none")}addStartEndInputs(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#startInput");e.value=this.sdm.startTime.toISODate(),e.style.display="inline";const t=document.querySelector("eox-chart").shadowRoot.querySelector("#endInput");t.value=this.sdm.endTime.toISODate(),t.style.display="inline";const r=document.querySelector("eox-chart").shadowRoot.querySelector("#setTime");r.style.display="inline",r.addEventListener("click",()=>{const n=Ht.fromISO(e.value),s=Ht.fromISO(t.value);n.isValid&&s.isValid?this.sdm.setTimeInterval(n,s):(e.className=n.isValid?"":"parsingError",t.className=s.isValid?"":"parsingError")})}addNormalizeCheckbox(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#normalize");e.checked=this.sdmOptions.normalize,e.addEventListener("change",()=>{this.sdm.setNormalize(e.checked)})}addShowMinMax(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#showMinMax");e.checked=this.sdmOptions.showMinMax,e.addEventListener("change",()=>{this.sdm.setShowMinMax(e.checked)})}addCSVDownload(){document.querySelector("eox-chart").shadowRoot.querySelector("#csvDownload").addEventListener("click",()=>{this.sdm.triggerCSVDownload()})}generateTimeSelectionOptions(){document.querySelector("eox-chart").shadowRoot.querySelector("#dateSelect").addEventListener("change",t=>{const r=Ht.now(),[n,s]=t.target.value.split("-");switch(this.removeStartEndInputs(),n){case"month":this.sdm.setTimeInterval(r.minus({month:Number(s)}),r);break;case"year":this.sdm.setTimeInterval(r.minus({year:Number(s)}),r);break;case"custom":this.addStartEndInputs();break}})}generateTimeAggregationOptions(){document.querySelector("eox-chart").shadowRoot.querySelector("#aggregationSelect").addEventListener("change",t=>{const[r,n]=t.target.value.split("-");switch(r){case"none":this.sdm.setTimeAggregation(null);break;case"week":this.sdm.setTimeAggregation({week:Number(n)});break;case"month":this.sdm.setTimeAggregation({month:Number(n)});break;case"year":this.sdm.setTimeAggregation({year:Number(n)});break}})}}const uFe=(i,e)=>{const t=document.querySelector("eox-chart").shadowRoot.getElementById(e);if(!t)return;t.style.overflowY="auto";let r=t.querySelector("ul");return r||(r=document.createElement("ul"),r.style.display="flex",r.style.flexDirection="column",r.style.margin=0,r.style.padding="10px",t.appendChild(r)),r},cFe={id:"htmlLegend",afterUpdate(i,e,t){const r=uFe(i,t.containerID);if(!r)return;for(;r.firstChild;)r.firstChild.remove();i.options.plugins.legend.labels.generateLabels(i).sort((s,o)=>s.text<o.text?-1:1).forEach(s=>{const o=document.createElement("li");o.style.alignItems="center",o.style.cursor="pointer",o.style.display="flex",o.style.flexDirection="row",o.style.marginLeft="10px";const a=()=>{t.onClick(null,s)};o.onclick=a;const l=document.createElement("span");l.style.background=s.fillStyle,l.style.borderColor=s.strokeStyle,l.style.borderWidth=s.lineWidth+"px",l.style.display="inline-block",l.style.height="10px",l.style.marginRight="10px",l.style.width="10px";const u=document.createElement("p");u.style.color=s.fontColor,u.style.margin=0,u.style.padding=0,u.style.opacity=s.hidden?"0.5":"1",u.style.fontWeight=s.hidden?"300":"900";const c=document.createTextNode(s.text);u.appendChild(c),o.appendChild(l),o.appendChild(u),r.appendChild(o)})}},hFe=`
<style>
:host {
  font-size: small;
}
.hidden {
  visibility: hidden;
}
.loader {
  width: 20px;
  height: 20px;
  border: 2px solid #004170;
  border-bottom-color: transparent;
  border-radius: 50%;
  display: inline-block;
  box-sizing: border-box;
  animation: rotation 1s linear infinite;
}

@keyframes rotation {
  0% {
      transform: rotate(0deg);
  }
  100% {
      transform: rotate(360deg);
  }
}
#controls {
  position: absolute;
  width: 100%;
  max-width: 100%;
  display: none;
  gap: 5px;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  z-index: 1;
}
select {
  font-size: 11px;
  padding: 3px;
}
#csvDownload {
  border: none;
  background: none;
  cursor: pointer;
  margin-left: 7px;
  padding: 0;
  display: flex;
  align-items: center;
}
#csvDownload svg {
  width: 24px;
  height: 24px;
}
.parsingError {
  background-color: #ff6d6d;
}
#chart-container {
  width: 100%;
  height: 100%;
  position: relative;
}
#chart-container.controls {
  flex-basis: 80%;
  max-width: 80%;
  width: unset;
}
#legend-container {
  flex-basis: 20%;
  margin-top: 50px;
}
#legend-container ul {
  padding-top: 0 !important;
}
</style>
<div style="display: flex; width: 100%; height: 100%; max-width: 100%;">
  <div id="controls" class="controls" data-cy="controls">
    <div style="display: flex; align-items: center; padding: 10px;">
      <select id="dateSelect" style="margin-right: 7px;">
          <option value="month-3">3 months back</option>
          <option value="month-6">6 months back</option>
          <option value="year-1">1 year back</option>
          <option value="year-2">2 years back</option>
          <option value="year-3">3 years back</option>
          <option value="custom">custom</option>
      </select>
      <input id="startInput" size="8" style="display: none">
      <input id="endInput" size="8" style="display: none">
      <button id="setTime" style="display: none; margin-right: 7px;">ok</button>
      <select id="aggregationSelect" style="margin-right: 7px;">
          <option value="none">no aggregation</option>
          <option value="week-1">1 week</option>
          <option value="week-2">2 weeks</option>
          <option value="month-1">1 month</option>
          <option value="month-3">3 months</option>
          <option value="month-6">6 months</option>
      </select>
      <label for="normalize">normalize</label>
      <input type="checkbox" id="normalize" value="normalize" style="margin-right: 7px;">
      <label for="showMinMax">show min/max</label>
      <input type="checkbox" id="showMinMax" value="showMinMax" style="margin-right: 7px;">
      <span id="error" style="color: red; display: none;">Retrieving of signals timed out. Please try again.</span>
    </div>
    <div style="display: flex; align-items: center; padding: 10px;">
      <span id="loadingIndicator" class="loader hidden"></span>
      <button id="csvDownload" title="CSV download">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>download</title><path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" /></svg>
      </button>
    </div>
  </div>
  <div id="chart-container">
    <canvas id="chart" class="chart" data-cy="chart"></canvas>
  </div>
  <div id="legend-container" style="display: none"></div>
</div>
`,Ave=document.createElement("template");Ave.innerHTML=hFe;class dFe extends HTMLElement{constructor(){super();We(this,"shadowRoot");We(this,"chart");We(this,"setData");We(this,"setOptions");We(this,"setSignalsData");We(this,"setSignalsEndpoint");We(this,"setSignalsGeometry");We(this,"setGeoDBEndpoint");this.shadowRoot=this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Ave.content.cloneNode(!0))}connectedCallback(){this.chart=new Wa(this.shadowRoot.querySelector("canvas"),{options:{maintainAspectRatio:!1,responsive:!0},data:{labels:[],datasets:[]},plugins:[cFe,{id:"selectionLineHighlight",afterDraw:r=>{if(r&&r.tooltip){const n=r.tooltip.getActiveElements();if(n!=null&&n.length){const s=n[0].element.x,o=r.scales.y,a=r.ctx;a.save(),a.beginPath(),a.moveTo(s,o.top),a.lineTo(s,o.bottom),a.lineWidth=1,a.strokeStyle="rgba(0, 0, 255, 0.4)",a.stroke(),a.restore()}}}}]}),this.setData=r=>{this.chart.data=r||{datasets:[]},this.chart.update("none")},this.setOptions=r=>{this.chart.options=r,this.chart.update("none")},this.setSignalsData=r=>{this.chart.data={datasets:Object.entries(r).map(([n,s])=>({type:"line",label:n,data:s}))},this.chart.update("none")},this.setSignalsGeometry=r=>{t&&t.setGeometry(r)};let t=null;this.setSignalsEndpoint=r=>{t=new mhe("signals",this.chart,r),new ghe(document.getElementById("controls"),t,r),t.setActiveFields(r.active)},this.setGeoDBEndpoint=r=>{t=new mhe("geodb",this.chart,r),new ghe(document.getElementById("controls"),t,r),t.setActiveFields(r.active)}}}customElements.define("eox-chart",dFe);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ff={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},IT=i=>(...e)=>({_$litDirective$:i,values:e});let OT=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fFe=IT(class extends OT{constructor(){super(...arguments),this.key=mr}render(i,e){return this.key=i,e}update(i,[e,t]){return e!==this.key&&(WL(i),this.key=e),t}}),pFe=i=>{i.hoverInteraction=i.eoxMap.selectInteractions.selectHover,i.clickInteraction=i.eoxMap.selectInteractions.selectClick;const e=()=>{i.requestUpdate()};i.hoverInteraction.selectStyleLayer.on("change",e),i.clickInteraction.selectStyleLayer.on("change",e)},mFe=(i,e,t)=>{if(i.clickId===e)return;const r=t?[]:[e];i.hoverInteraction.highlightById(r)},gFe=(i,e)=>{i.stopPropagation();const t=Number(i.target.getAttribute("index")),r=e.drawnFeatures[t];e.drawLayer.getSource().removeFeature(r),e.drawnFeatures.splice(t,1),e.requestUpdate()},yFe=(i,e)=>{const t=i.get("id"),{clickId:r,drawLayer:n,olMap:s,clickInteraction:o}=e,a=r===t,l=i.getGeometry();if(a){const u=n.getSource().getExtent();s.getView().fit(u,cue),o.highlightById([])}else{const u=l.getExtent();o.highlightById([t]),s.getView().fit(u,cue)}e.requestUpdate()},vFe="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class kve extends Lr{constructor(){super();We(this,"hoverInteraction");We(this,"clickInteraction");We(this,"hoverId");We(this,"clickId");this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.unstyled=!1}_handleDelete(t){gFe(t,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(t){yFe(t,this)}_handleHoverFeature(t,r=!1){mFe(this,t,r)}firstUpdated(){pFe(this)}createRenderRoot(){return this}render(){var t,r;return this.hoverId=(t=this.hoverInteraction)==null?void 0:t.selectedFids[0],this.clickId=(r=this.clickInteraction)==null?void 0:r.selectedFids[0],Qe`
      <style>
        ${!this.unstyled&&vFe}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((n,s)=>{const o=s+1,a=n.get("id"),l=this.hoverId===a,u=this.clickId===a;return fFe(o,Qe`
              <li
                class="${l||u?"selected":mr}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(n)}"
                >
                  <span class="title">Feature #${o}</span>
                  <button
                    index=${s}
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}We(kve,"properties",{eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",kve);const bFe=i=>{const{multipleFeatures:e,drawnFeatures:t,currentlyDrawing:r}=i,n=!e&&(t==null?void 0:t.length)>0||r,s=!(t!=null&&t.length)&&!r;return{drawDisabled:n,discardDisabled:s}},Dve='button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}',_Fe='textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}';function xFe(i){navigator.clipboard.writeText(i).then(function(){},function(e){console.error("Could not copy text: ",e)})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Pi(i,e,t){return i?e(i):t==null?void 0:t(i)}var jx,zx;class Mve extends Lr{constructor(){super();ar(this,jx,!0);ar(this,zx,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1}updateButtonStates(){const{drawDisabled:t,discardDisabled:r}=bFe(this);ko(this,jx,t),ko(this,zx,r)}createRenderRoot(){return this}render(){this.updateButtonStates();const t=this.currentlyDrawing?"drawing":"draw";return Qe`
      <style>
        ${!this.unstyled&&Dve}
        ${!this.unstyled&&_Fe}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="polygon icon"
            ?disabled="${_i(this,jx)||mr}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${t}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${_i(this,zx)||mr}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${Pi(this.importFeatures,()=>Qe`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${Pi(this.showEditor,()=>Qe`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>xFe(this.geoJSON)}
            >
              ${this.unstyled?"copy":mr}
            </button>
          </div>
        `)}
    `}}jx=new WeakMap,zx=new WeakMap,We(Mve,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",Mve);const wFe=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,EFe=i=>{(()=>{i.emitDrawnFeatures(),i.multipleFeatures||(i.draw.setActive(!1),i.currentlyDrawing=!1)})(),i.requestUpdate()},SFe=i=>{const e=()=>{i.drawLayer.set("isDrawingEnabled",!0),i.draw.setActive(!0)},t=()=>{i.currentlyDrawing=!0,i.requestUpdate()};e(),t()},CFe=(i,e)=>{var s;const r=document.querySelector(i.for),n=r.map;return i.drawLayer=r.addOrUpdateLayer({type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:e},source:{type:"Vector"},interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:i.type,modify:i.allowModify,stopClick:!0}},{type:"select",options:{id:"selectHover",condition:"pointermove",style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}},{type:"select",options:{id:"selectClick",condition:"click",panIn:!0,style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),i.draw=r.interactions.drawInteraction,i.modify=r.interactions.drawInteractionmodify,(s=i.modify)==null||s.on("modifyend",()=>i.onModifyEnd()),r.addEventListener("addfeatures",()=>EFe(i)),{EoxMap:r,OlMap:n}},TFe=i=>{const e=()=>{i.drawnFeatures=[],i.draw.setActive(!1),i.drawLayer.getSource().clear(),i.geoJSON=null},t=()=>{i.emitDrawnFeatures(),i.currentlyDrawing=!1,i.requestUpdate()};e(),t()},AFe=(i,e)=>{setTimeout(()=>{i.drawnFeatures=i.drawLayer.getSource().getFeatures(),i.updateGeoJSON(),i.requestUpdate(),e()},0)},PT=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}';function kFe(i,e){function t(s){s.preventDefault(),s.stopPropagation()}function r(s){s.srcElement.style.opacity="0.4"}function n(s){s.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(s=>{e.addEventListener(s,t,!1),["dragenter","dragover"].includes(s)?e.addEventListener(s,r,!1):e.addEventListener(s,n,!1)}),e.addEventListener("drop",s=>Lve(s,i),!1)}function DFe(i){i.preventDefault(),i.stopPropagation()}function Lve(i,e){DFe(i);const t=i.dataTransfer?i.dataTransfer.files:i.target.files;Array.from(t).forEach(r=>MFe(r,e))}function MFe(i,e){const t=new FileReader;t.readAsText(i),t.onloadend=function(){typeof t.result=="string"&&e.handleFeatureChange(t.result)}}var wf,Ux,Gx;class LFe extends Lr{constructor(){super();ar(this,wf);ar(this,Ux);ar(this,Gx);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.type="Polygon",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},noShadow:{type:Boolean},type:{type:String},unstyled:{type:Boolean}}}handleStartDrawing(){SFe(this)}handleDiscardDrawing(){TFe(this)}handleFeatureChange(t,r=!1){_i(this,wf).parseTextToFeature(t||JSON.stringify(hue),this.drawLayer,r)}handleFilesChange(t){Lve(t,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){ko(this,Gx,JSON.stringify(_i(this,wf).parseFeature(this.drawnFeatures)||hue,void 0,2))}emitDrawnFeatures(){AFe(this,()=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:this.drawnFeatures}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:t,OlMap:r}=CFe(this,this.multipleFeatures);ko(this,wf,t),ko(this,Ux,r),this.importFeatures&&kFe(this,_i(this,wf)),this.updateGeoJSON(),this.requestUpdate()}render(){var t;return Qe`
      <style>
        :host { display: block; }
        ${!this.unstyled&&PT}
        ${!this.unstyled&&wFe}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.handleStartDrawing(),discard:()=>this.handleDiscardDrawing(),editor:r=>this.handleFeatureChange(r.target.value,!0),import:r=>this.handleFilesChange(r)}}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${_i(this,Gx)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((t=this.drawnFeatures)!=null&&t.length)?Qe`<eox-drawtools-list
            .eoxMap=${_i(this,wf)}
            .olMap=${_i(this,Ux)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:mr}
    `}}wf=new WeakMap,Ux=new WeakMap,Gx=new WeakMap;customElements.define("eox-drawtools",LFe);function RFe(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var zm=1,Um=2,ry=3,IFe=4,sM=5,yhe=6378137,OFe=6356752314e-3,vhe=.0066943799901413165,g_=484813681109536e-20,_t=Math.PI/2,PFe=.16666666666666666,FFe=.04722222222222222,NFe=.022156084656084655,Lt=1e-10,Mo=.017453292519943295,Tc=57.29577951308232,dn=Math.PI/4,X_=Math.PI*2,Ts=3.14159265359,ll={};ll.greenwich=0;ll.lisbon=-9.131906111111;ll.paris=2.337229166667;ll.bogota=-74.080916666667;ll.madrid=-3.687938888889;ll.rome=12.452333333333;ll.bern=7.439583333333;ll.jakarta=106.807719444444;ll.ferro=-17.666666666667;ll.brussels=4.367975;ll.stockholm=18.058277777778;ll.athens=23.7163375;ll.oslo=10.722916666667;const $Fe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var bhe=/[\s_\-\/\(\)]/g;function qf(i,e){if(i[e])return i[e];for(var t=Object.keys(i),r=e.toLowerCase().replace(bhe,""),n=-1,s,o;++n<t.length;)if(s=t[n],o=s.toLowerCase().replace(bhe,""),o===r)return i[s]}function oM(i){var e={},t=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),r,n,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Mo},lat_1:function(a){e.lat1=a*Mo},lat_2:function(a){e.lat2=a*Mo},lat_ts:function(a){e.lat_ts=a*Mo},lon_0:function(a){e.long0=a*Mo},lon_1:function(a){e.long1=a*Mo},lon_2:function(a){e.long2=a*Mo},alpha:function(a){e.alpha=parseFloat(a)*Mo},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*Mo},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=qf($Fe,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Mo},pm:function(a){var l=qf(ll,a);e.from_greenwich=(l||parseFloat(a))*Mo},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(r in t)n=t[r],r in o?(s=o[r],typeof s=="function"?s(n):e[s]=n):e[r]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Z_=1,Rve=2,Ive=3,AS=4,Ove=5,ER=-1,BFe=/\s/,jFe=/[A-Za-z]/,zFe=/[A-Za-z84_]/,FT=/[,\]]/,Pve=/[\d\.E\-\+]/;function pd(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Z_}pd.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==AS)for(;BFe.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case Z_:return this.neutral(i);case Rve:return this.keyword(i);case AS:return this.quoted(i);case Ove:return this.afterquote(i);case Ive:return this.number(i);case ER:return}};pd.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=AS;return}if(FT.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};pd.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Z_;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Z_,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ER);return}};pd.prototype.number=function(i){if(Pve.test(i)){this.word+=i;return}if(FT.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};pd.prototype.quoted=function(i){if(i==='"'){this.state=Ove;return}this.word+=i};pd.prototype.keyword=function(i){if(zFe.test(i)){this.word+=i;return}if(i==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Z_;return}if(FT.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};pd.prototype.neutral=function(i){if(jFe.test(i)){this.word=i,this.state=Rve;return}if(i==='"'){this.word="",this.state=AS;return}if(Pve.test(i)){this.word=i,this.state=Ive;return}if(FT.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};pd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ER)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function UFe(i){var e=new pd(i);return e.output()}function _he(i,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:i,n=t.reduce(function(s,o){return N0(o,s),s},r);e&&(i[e]=n)}function N0(i,e){if(!Array.isArray(i)){e[i]=!0;return}var t=i.shift();if(t==="PARAMETER"&&(t=i.shift()),i.length===1){if(Array.isArray(i[0])){e[t]={},N0(i[0],e[t]);return}e[t]=i[0];return}if(!i.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=i;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(i);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&N0(i[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:i[0],a:i[1],rf:i[2]},i.length===4&&N0(i[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":i[0]=["name",i[0]],_he(e,t,i);return;default:for(r=-1;++r<i.length;)if(!Array.isArray(i[r]))return N0(i,e[t]);return _he(e,t,i)}}var GFe=.017453292519943295;function qFe(i,e){var t=e[0],r=e[1];!(t in i)&&r in i&&(i[t]=i[r],e.length===3&&(i[t]=e[2](i[t])))}function fc(i){return i*GFe}function HFe(i){if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",t=0,r=i.AXIS.length;t<r;++t){var n=[i.AXIS[t][0].toLowerCase(),i.AXIS[t][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?e+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?e+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?e+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var s=i.GEOGCS;i.type==="GEOGCS"&&(s=i),s&&(s.DATUM?i.datumCode=s.DATUM.name.toLowerCase():i.datumCode=s.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),(i.datumCode==="new_zealand_geodetic_datum_1949"||i.datumCode==="new_zealand_1949")&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode.slice(-6)==="_ferro"&&(i.datumCode=i.datumCode.slice(0,-6)),i.datumCode.slice(-8)==="_jakarta"&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(i.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=s.DATUM.SPHEROID.a,i.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(i.datum_params=s.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function o(u){var c=i.to_meter||1;return u*c}var a=function(u){return qFe(i,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",fc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",fc],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",fc],["lat0","latitude_of_origin",fc],["lat0","standard_parallel_1",fc],["lat1","standard_parallel_1",fc],["lat2","standard_parallel_2",fc],["azimuth","Azimuth"],["alpha","azimuth",fc],["srsCode","name"]];l.forEach(a),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=fc(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=fc(i.lat0>0?90:-90))}function Fve(i){var e=UFe(i),t=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",t]);var n={};return N0(e,n),HFe(n),n}function _a(i){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?_a[i]=oM(arguments[1]):_a[i]=Fve(arguments[1]):_a[i]=t}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(r){Array.isArray(r)?_a.apply(e,r):_a(r)});if(typeof i=="string"){if(i in _a)return _a[i]}else"EPSG"in i?_a["EPSG:"+i.EPSG]=i:"ESRI"in i?_a["ESRI:"+i.ESRI]=i:"IAU2000"in i?_a["IAU2000:"+i.IAU2000]=i:console.log(i);return}}RFe(_a);function VFe(i){return typeof i=="string"}function WFe(i){return i in _a}var YFe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function XFe(i){return YFe.some(function(e){return i.indexOf(e)>-1})}var ZFe=["3857","900913","3785","102113"];function KFe(i){var e=qf(i,"authority");if(e){var t=qf(e,"epsg");return t&&ZFe.indexOf(t)>-1}}function JFe(i){var e=qf(i,"extension");if(e)return qf(e,"proj4")}function QFe(i){return i[0]==="+"}function eNe(i){if(VFe(i)){if(WFe(i))return _a[i];if(XFe(i)){var e=Fve(i);if(KFe(e))return _a["EPSG:3857"];var t=JFe(e);return t?oM(t):e}if(QFe(i))return oM(i)}else return i}function xhe(i,e){i=i||{};var t,r;if(!e)return i;for(r in e)t=e[r],t!==void 0&&(i[r]=t);return i}function Uc(i,e,t){var r=i*e;return t/Math.sqrt(1-r*r)}function iw(i){return i<0?-1:1}function zt(i){return Math.abs(i)<=Ts?i:i-iw(i)*X_}function ju(i,e,t){var r=i*t,n=.5*i;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(_t-e))/r}function K_(i,e){for(var t=.5*i,r,n,s=_t-2*Math.atan(e),o=0;o<=15;o++)if(r=i*Math.sin(s),n=_t-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function tNe(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Uc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function iNe(i){var e=i.x,t=i.y;if(t*Tc>90&&t*Tc<-90&&e*Tc>180&&e*Tc<-180)return null;var r,n;if(Math.abs(Math.abs(t)-_t)<=Lt)return null;if(this.sphere)r=this.x0+this.a*this.k0*zt(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(dn+.5*t));else{var s=Math.sin(t),o=ju(this.e,t,s);r=this.x0+this.a*this.k0*zt(e-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return i.x=r,i.y=n,i}function rNe(i){var e=i.x-this.x0,t=i.y-this.y0,r,n;if(this.sphere)n=_t-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(n=K_(this.e,s),n===-9999)return null}return r=zt(this.long0+e/(this.a*this.k0)),i.x=r,i.y=n,i}var nNe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const sNe={init:tNe,forward:iNe,inverse:rNe,names:nNe};function oNe(){}function whe(i){return i}var aNe=["longlat","identity"];const lNe={init:oNe,forward:whe,inverse:whe,names:aNe};var uNe=[sNe,lNe],q2={},kS=[];function Nve(i,e){var t=kS.length;return i.names?(kS[t]=i,i.names.forEach(function(r){q2[r.toLowerCase()]=t}),this):(console.log(e),!0)}function cNe(i){if(!i)return!1;var e=i.toLowerCase();if(typeof q2[e]<"u"&&kS[q2[e]])return kS[q2[e]]}function hNe(){uNe.forEach(Nve)}const dNe={start:hNe,add:Nve,get:cNe};var zi={};zi.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};zi.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};zi.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};zi.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};zi.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};zi.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};zi.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};zi.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};zi.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};zi.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};zi.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};zi.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};zi.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};zi.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};zi.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};zi.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};zi.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};zi.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};zi.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};zi.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};zi.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};zi.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};zi.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};zi.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};zi.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};zi.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};zi.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};zi.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};zi.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};zi.hough={a:6378270,rf:297,ellipseName:"Hough"};zi.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};zi.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};zi.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};zi.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};zi.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};zi.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};zi.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};zi.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};zi.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};zi.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};zi.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};zi.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var fNe=zi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};zi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function pNe(i,e,t,r){var n=i*i,s=e*e,o=(n-s)/n,a=0;r?(i*=1-o*(PFe+o*(FFe+o*NFe)),n=i*i,o=0):a=Math.sqrt(o);var l=(n-s)/s;return{es:o,e:a,ep2:l}}function mNe(i,e,t,r,n){if(!i){var s=qf(zi,r);s||(s=fNe),i=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*i),(t===0||Math.abs(i-e)<Lt)&&(n=!0,e=i),{a:i,b:e,rf:t,sphere:n}}var Js={};Js.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Js.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Js.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Js.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Js.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Js.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Js.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Js.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Js.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Js.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Js.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Js.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Js.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Js.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Js.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Js.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Js.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Js.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function gNe(i,e,t,r,n,s,o){var a={};return i===void 0||i==="none"?a.datum_type=sM:a.datum_type=IFe,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=zm),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Um,a.datum_params[3]*=g_,a.datum_params[4]*=g_,a.datum_params[5]*=g_,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=ry,a.grids=o),a.a=t,a.b=r,a.es=n,a.ep2=s,a}var $ve={};function yNe(i,e){var t=new DataView(e),r=_Ne(t),n=xNe(t,r),s=wNe(t,n,r),o={header:n,subgrids:s};return $ve[i]=o,o}function vNe(i){if(i===void 0)return null;var e=i.split(",");return e.map(bNe)}function bNe(i){if(i.length===0)return null;var e=i[0]==="@";return e&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:i,mandatory:!e,grid:$ve[i]||null,isNull:!1}}function $0(i){return i/3600*Math.PI/180}function _Ne(i){var e=i.getInt32(8,!1);return e===11?!1:(e=i.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function xNe(i,e){return{nFields:i.getInt32(8,e),nSubgridFields:i.getInt32(24,e),nSubgrids:i.getInt32(40,e),shiftType:aM(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,e),fromSemiMinorAxis:i.getFloat64(136,e),toSemiMajorAxis:i.getFloat64(152,e),toSemiMinorAxis:i.getFloat64(168,e)}}function aM(i,e,t){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(e,t)))}function wNe(i,e,t){for(var r=176,n=[],s=0;s<e.nSubgrids;s++){var o=SNe(i,r,t),a=CNe(i,r,o,t),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[$0(o.lowerLongitude),$0(o.lowerLatitude)],del:[$0(o.longitudeInterval),$0(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:ENe(a)}),r+=176+o.gridNodeCount*16}return n}function ENe(i){return i.map(function(e){return[$0(e.longitudeShift),$0(e.latitudeShift)]})}function SNe(i,e,t){return{name:aM(i,e+8,e+16).trim(),parent:aM(i,e+24,e+24+8).trim(),lowerLatitude:i.getFloat64(e+72,t),upperLatitude:i.getFloat64(e+88,t),lowerLongitude:i.getFloat64(e+104,t),upperLongitude:i.getFloat64(e+120,t),latitudeInterval:i.getFloat64(e+136,t),longitudeInterval:i.getFloat64(e+152,t),gridNodeCount:i.getInt32(e+168,t)}}function CNe(i,e,t,r){for(var n=e+176,s=16,o=[],a=0;a<t.gridNodeCount;a++){var l={latitudeShift:i.getFloat32(n+a*s,r),longitudeShift:i.getFloat32(n+a*s+4,r),latitudeAccuracy:i.getFloat32(n+a*s+8,r),longitudeAccuracy:i.getFloat32(n+a*s+12,r)};o.push(l)}return o}function Nc(i,e){if(!(this instanceof Nc))return new Nc(i);e=e||function(u){if(u)throw u};var t=eNe(i);if(typeof t!="object"){e(i);return}var r=Nc.projections.get(t.projName);if(!r){e(i);return}if(t.datumCode&&t.datumCode!=="none"){var n=qf(Js,t.datumCode);n&&(t.datum_params=t.datum_params||(n.towgs84?n.towgs84.split(","):null),t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=mNe(t.a,t.b,t.rf,t.ellps,t.sphere),o=pNe(s.a,s.b,s.rf,t.R_A),a=vNe(t.nadgrids),l=t.datum||gNe(t.datumCode,t.datum_params,s.a,s.b,o.es,o.ep2,a);xhe(this,t),xhe(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}Nc.projections=dNe;Nc.projections.start();function TNe(i,e){return i.datum_type!==e.datum_type||i.a!==e.a||Math.abs(i.es-e.es)>5e-11?!1:i.datum_type===zm?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]:i.datum_type===Um?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]&&i.datum_params[3]===e.datum_params[3]&&i.datum_params[4]===e.datum_params[4]&&i.datum_params[5]===e.datum_params[5]&&i.datum_params[6]===e.datum_params[6]:!0}function Bve(i,e,t){var r=i.x,n=i.y,s=i.z?i.z:0,o,a,l,u;if(n<-_t&&n>-1.001*_t)n=-_t;else if(n>_t&&n<1.001*_t)n=_t;else{if(n<-_t)return{x:-1/0,y:-1/0,z:i.z};if(n>_t)return{x:1/0,y:1/0,z:i.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(n),u=Math.cos(n),l=a*a,o=t/Math.sqrt(1-e*l),{x:(o+s)*u*Math.cos(r),y:(o+s)*u*Math.sin(r),z:(o*(1-e)+s)*a}}function jve(i,e,t,r){var n=1e-12,s=n*n,o=30,a,l,u,c,h,d,p,m,g,v,b,_,E,C=i.x,T=i.y,D=i.z?i.z:0,M,A,I;if(a=Math.sqrt(C*C+T*T),l=Math.sqrt(C*C+T*T+D*D),a/t<n){if(M=0,l/t<n)return A=_t,I=-r,{x:i.x,y:i.y,z:i.z}}else M=Math.atan2(T,C);u=D/l,c=a/l,h=1/Math.sqrt(1-e*(2-e)*c*c),m=c*(1-e)*h,g=u*h,E=0;do E++,p=t/Math.sqrt(1-e*g*g),I=a*m+D*g-p*(1-e*g*g),d=e*p/(p+I),h=1/Math.sqrt(1-d*(2-d)*c*c),v=c*(1-d)*h,b=u*h,_=b*m-v*g,m=v,g=b;while(_*_>s&&E<o);return A=Math.atan(b/Math.abs(v)),{x:M,y:A,z:I}}function ANe(i,e,t){if(e===zm)return{x:i.x+t[0],y:i.y+t[1],z:i.z+t[2]};if(e===Um){var r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6];return{x:u*(i.x-l*i.y+a*i.z)+r,y:u*(l*i.x+i.y-o*i.z)+n,z:u*(-a*i.x+o*i.y+i.z)+s}}}function kNe(i,e,t){if(e===zm)return{x:i.x-t[0],y:i.y-t[1],z:i.z-t[2]};if(e===Um){var r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=(i.x-r)/u,h=(i.y-n)/u,d=(i.z-s)/u;return{x:c+l*h-a*d,y:-l*c+h+o*d,z:a*c-o*h+d}}}function BE(i){return i===zm||i===Um}function DNe(i,e,t){if(TNe(i,e)||i.datum_type===sM||e.datum_type===sM)return t;var r=i.a,n=i.es;if(i.datum_type===ry){var s=Ehe(i,!1,t);if(s!==0)return;r=yhe,n=vhe}var o=e.a,a=e.b,l=e.es;if(e.datum_type===ry&&(o=yhe,a=OFe,l=vhe),n===l&&r===o&&!BE(i.datum_type)&&!BE(e.datum_type))return t;if(t=Bve(t,n,r),BE(i.datum_type)&&(t=ANe(t,i.datum_type,i.datum_params)),BE(e.datum_type)&&(t=kNe(t,e.datum_type,e.datum_params)),t=jve(t,l,o,a),e.datum_type===ry){var u=Ehe(e,!0,t);if(u!==0)return}return t}function Ehe(i,e,t){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},n={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<i.grids.length;o++){var a=i.grids[o];if(s.push(a.name),a.isNull){n=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,p=h.ll[0]-d,m=h.ll[1]-d,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,v=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(m>r.y||p>r.x||v<r.y||g<r.x)&&(n=MNe(r,e,h),!isNaN(n.x)))break e}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Tc+" "+r.y*Tc+" tried: '"+s+"'"),-1):(t.x=-n.x,t.y=n.y,0)}function MNe(i,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return r;var n={x:i.x,y:i.y};n.x-=t.ll[0],n.y-=t.ll[1],n.x=zt(n.x-Math.PI)+Math.PI;var s=She(n,t);if(e){if(isNaN(s.x))return r;s.x=n.x-s.x,s.y=n.y-s.y;var o=9,a=1e-12,l,u;do{if(u=She(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:n.x-(u.x+s.x),y:n.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=zt(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=i.x+s.x,r.y=i.y+s.y);return r}function She(i,e){var t={x:i.x/e.del[0],y:i.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},n={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;o=r.y*e.lim[0]+r.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var u={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var c={x:e.cvs[o][0],y:e.cvs[o][1]},h=n.x*n.y,d=n.x*(1-n.y),p=(1-n.x)*(1-n.y),m=(1-n.x)*n.y;return s.x=p*a.x+d*l.x+m*c.x+h*u.x,s.y=p*a.y+d*l.y+m*c.y+h*u.y,s}function Che(i,e,t){var r=t.x,n=t.y,s=t.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(o=r,"ew".indexOf(i.axis[l])!==-1?a="x":a="y"):l===1?(o=n,"ns".indexOf(i.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),i.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":t[a]!==void 0&&(u.z=o);break;case"d":t[a]!==void 0&&(u.z=-o);break;default:return null}return u}function zve(i){var e={x:i[0],y:i[1]};return i.length>2&&(e.z=i[2]),i.length>3&&(e.m=i[3]),e}function LNe(i){The(i.x),The(i.y)}function The(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function RNe(i,e){return(i.datum.datum_type===zm||i.datum.datum_type===Um||i.datum.datum_type===ry)&&e.datumCode!=="WGS84"||(e.datum.datum_type===zm||e.datum.datum_type===Um||e.datum.datum_type===ry)&&i.datumCode!=="WGS84"}function DS(i,e,t,r){var n;Array.isArray(t)?t=zve(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(LNe(t),i.datum&&e.datum&&RNe(i,e)&&(n=new Nc("WGS84"),t=DS(i,n,t,r),i=n),r&&i.axis!=="enu"&&(t=Che(i,!1,t)),i.projName==="longlat")t={x:t.x*Mo,y:t.y*Mo,z:t.z||0};else if(i.to_meter&&(t={x:t.x*i.to_meter,y:t.y*i.to_meter,z:t.z||0}),t=i.inverse(t),!t)return;if(i.from_greenwich&&(t.x+=i.from_greenwich),t=DNe(i.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Tc,y:t.y*Tc,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?Che(e,!0,t):(t&&!s&&delete t.z,t)}var Ahe=Nc("WGS84");function vk(i,e,t,r){var n,s,o;return Array.isArray(t)?(n=DS(i,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(t.splice(3)):[n.x,n.y,t[2]].concat(t.splice(3)):[n.x,n.y].concat(t.splice(2)):[n.x,n.y]):(s=DS(i,e,t,r),o=Object.keys(t),o.length===2||o.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=t[a]}),s)}function khe(i){return i instanceof Nc?i:i.oProj?i.oProj:Nc(i)}function go(i,e,t){i=khe(i);var r=!1,n;return typeof e>"u"?(e=i,i=Ahe,r=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=i,i=Ahe,r=!0),e=khe(e),t?vk(i,e,t):(n={forward:function(s,o){return vk(i,e,s,o)},inverse:function(s,o){return vk(e,i,s,o)}},r&&(n.oProj=e),n)}var Dhe=6,Uve="AJSAJS",Gve="AFAFAF",B0=65,za=73,Ql=79,X1=86,Z1=90;const INe={forward:qve,inverse:ONe,toPoint:Hve};function qve(i,e){return e=e||5,NNe(PNe({lat:i[1],lon:i[0]}),e)}function ONe(i){var e=SR(Wve(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Hve(i){var e=SR(Wve(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function bk(i){return i*(Math.PI/180)}function Mhe(i){return 180*(i/Math.PI)}function PNe(i){var e=i.lat,t=i.lon,r=6378137,n=.00669438,s=.9996,o,a,l,u,c,h,d,p=bk(e),m=bk(t),g,v;v=Math.floor((t+180)/6)+1,t===180&&(v=60),e>=56&&e<64&&t>=3&&t<12&&(v=32),e>=72&&e<84&&(t>=0&&t<9?v=31:t>=9&&t<21?v=33:t>=21&&t<33?v=35:t>=33&&t<42&&(v=37)),o=(v-1)*6-180+3,g=bk(o),a=n/(1-n),l=r/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),c=a*Math.cos(p)*Math.cos(p),h=Math.cos(p)*(m-g),d=r*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var b=s*l*(h+(1-u+c)*h*h*h/6+(5-18*u+u*u+72*c-58*a)*h*h*h*h*h/120)+5e5,_=s*(d+l*Math.tan(p)*(h*h/2+(5-u+9*c+4*c*c)*h*h*h*h/24+(61-58*u+u*u+600*c-330*a)*h*h*h*h*h*h/720));return e<0&&(_+=1e7),{northing:Math.round(_),easting:Math.round(b),zoneNumber:v,zoneLetter:FNe(e)}}function SR(i){var e=i.northing,t=i.easting,r=i.zoneLetter,n=i.zoneNumber;if(n<0||n>60)return null;var s=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,h,d,p,m,g,v,b,_,E=t-5e5,C=e;r<"N"&&(C-=1e7),v=(n-1)*6-180+3,l=a/(1-a),g=C/s,b=g/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),_=b+(3*u/2-27*u*u*u/32)*Math.sin(2*b)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*b)+151*u*u*u/96*Math.sin(6*b),c=o/Math.sqrt(1-a*Math.sin(_)*Math.sin(_)),h=Math.tan(_)*Math.tan(_),d=l*Math.cos(_)*Math.cos(_),p=o*(1-a)/Math.pow(1-a*Math.sin(_)*Math.sin(_),1.5),m=E/(c*s);var T=_-c*Math.tan(_)/p*(m*m/2-(5+3*h+10*d-4*d*d-9*l)*m*m*m*m/24+(61+90*h+298*d+45*h*h-252*l-3*d*d)*m*m*m*m*m*m/720);T=Mhe(T);var D=(m-(1+2*h+d)*m*m*m/6+(5-2*d+28*h-3*d*d+8*l+24*h*h)*m*m*m*m*m/120)/Math.cos(_);D=v+Mhe(D);var M;if(i.accuracy){var A=SR({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});M={top:A.lat,right:A.lon,bottom:T,left:D}}else M={lat:T,lon:D};return M}function FNe(i){var e="Z";return 84>=i&&i>=72?e="X":72>i&&i>=64?e="W":64>i&&i>=56?e="V":56>i&&i>=48?e="U":48>i&&i>=40?e="T":40>i&&i>=32?e="S":32>i&&i>=24?e="R":24>i&&i>=16?e="Q":16>i&&i>=8?e="P":8>i&&i>=0?e="N":0>i&&i>=-8?e="M":-8>i&&i>=-16?e="L":-16>i&&i>=-24?e="K":-24>i&&i>=-32?e="J":-32>i&&i>=-40?e="H":-40>i&&i>=-48?e="G":-48>i&&i>=-56?e="F":-56>i&&i>=-64?e="E":-64>i&&i>=-72?e="D":-72>i&&i>=-80&&(e="C"),e}function NNe(i,e){var t="00000"+i.easting,r="00000"+i.northing;return i.zoneNumber+i.zoneLetter+$Ne(i.easting,i.northing,i.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function $Ne(i,e,t){var r=Vve(t),n=Math.floor(i/1e5),s=Math.floor(e/1e5)%20;return BNe(n,s,r)}function Vve(i){var e=i%Dhe;return e===0&&(e=Dhe),e}function BNe(i,e,t){var r=t-1,n=Uve.charCodeAt(r),s=Gve.charCodeAt(r),o=n+i-1,a=s+e,l=!1;o>Z1&&(o=o-Z1+B0-1,l=!0),(o===za||n<za&&o>za||(o>za||n<za)&&l)&&o++,(o===Ql||n<Ql&&o>Ql||(o>Ql||n<Ql)&&l)&&(o++,o===za&&o++),o>Z1&&(o=o-Z1+B0-1),a>X1?(a=a-X1+B0-1,l=!0):l=!1,(a===za||s<za&&a>za||(a>za||s<za)&&l)&&a++,(a===Ql||s<Ql&&a>Ql||(a>Ql||s<Ql)&&l)&&(a++,a===za&&a++),a>X1&&(a=a-X1+B0-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function Wve(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var e=i.length,t=null,r="",n,s=0;!/[A-Z]/.test(n=i.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+i;r+=n,s++}var o=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;t=i.substring(s,s+=2);for(var l=Vve(o),u=jNe(t.charAt(0),l),c=zNe(t.charAt(1),l);c<UNe(a);)c+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=h/2,p=0,m=0,g,v,b,_,E;return d>0&&(g=1e5/Math.pow(10,d),v=i.substring(s,s+d),p=parseFloat(v)*g,b=i.substring(s+d),m=parseFloat(b)*g),_=p+u,E=m+c,{easting:_,northing:E,zoneLetter:a,zoneNumber:o,accuracy:g}}function jNe(i,e){for(var t=Uve.charCodeAt(e-1),r=1e5,n=!1;t!==i.charCodeAt(0);){if(t++,t===za&&t++,t===Ql&&t++,t>Z1){if(n)throw"Bad character: "+i;t=B0,n=!0}r+=1e5}return r}function zNe(i,e){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var t=Gve.charCodeAt(e-1),r=0,n=!1;t!==i.charCodeAt(0);){if(t++,t===za&&t++,t===Ql&&t++,t>X1){if(n)throw"Bad character: "+i;t=B0,n=!0}r+=1e5}return r}function UNe(i){var e;switch(i){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+i}function Ty(i,e,t){if(!(this instanceof Ty))return new Ty(i,e,t);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof e>"u"){var r=i.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=i,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ty.fromMGRS=function(i){return new Ty(Hve(i))};Ty.prototype.toMGRS=function(i){return qve([this.x,this.y],i)};var GNe=1,qNe=.25,Lhe=.046875,Rhe=.01953125,Ihe=.01068115234375,HNe=.75,VNe=.46875,WNe=.013020833333333334,YNe=.007120768229166667,XNe=.3645833333333333,ZNe=.005696614583333333,KNe=.3076171875;function Yve(i){var e=[];e[0]=GNe-i*(qNe+i*(Lhe+i*(Rhe+i*Ihe))),e[1]=i*(HNe-i*(Lhe+i*(Rhe+i*Ihe)));var t=i*i;return e[2]=t*(VNe-i*(WNe+i*YNe)),t*=i,e[3]=t*(XNe-i*ZNe),e[4]=t*i*KNe,e}function NT(i,e,t,r){return t*=e,e*=e,r[0]*i-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var JNe=20;function Xve(i,e,t){for(var r=1/(1-e),n=i,s=JNe;s;--s){var o=Math.sin(n),a=1-e*o*o;if(a=(NT(n,o,Math.cos(n),t)-i)*(a*Math.sqrt(a))*r,n-=a,Math.abs(a)<Lt)return n}return n}function QNe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Yve(this.es),this.ml0=NT(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function e5e(i){var e=i.x,t=i.y,r=zt(e-this.long0),n,s,o,a=Math.sin(t),l=Math.cos(t);if(this.es){var c=l*r,h=Math.pow(c,2),d=this.ep2*Math.pow(l,2),p=Math.pow(d,2),m=Math.abs(l)>Lt?Math.tan(t):0,g=Math.pow(m,2),v=Math.pow(g,2);n=1-this.es*Math.pow(a,2),c=c/Math.sqrt(n);var b=NT(t,a,l,this.en);s=this.a*(this.k0*c*(1+h/6*(1-g+d+h/20*(5-18*g+v+14*d-58*g*d+h/42*(61+179*v-v*g-479*g)))))+this.x0,o=this.a*(this.k0*(b-this.ml0+a*r*c/2*(1+h/12*(5-g+9*d+4*p+h/30*(61+v-58*g+270*d-330*g*d+h/56*(1385+543*v-v*g-3111*g))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<Lt)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Lt)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=s,i.y=o,i}function t5e(i){var e,t,r,n,s=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=Xve(e,this.es,this.en),Math.abs(t)<_t){var h=Math.sin(t),d=Math.cos(t),p=Math.abs(d)>Lt?Math.tan(t):0,m=this.ep2*Math.pow(d,2),g=Math.pow(m,2),v=Math.pow(p,2),b=Math.pow(v,2);e=1-this.es*Math.pow(h,2);var _=s*Math.sqrt(e)/this.k0,E=Math.pow(_,2);e=e*p,r=t-e*E/(1-this.es)*.5*(1-E/12*(5+3*v-9*m*v+m-4*g-E/30*(61+90*v-252*m*v+45*b+46*m-E/56*(1385+3633*v+4095*b+1574*b*v)))),n=zt(this.long0+_*(1-E/6*(1+2*v+m-E/20*(5+28*v+24*b+8*m*v+6*m-E/42*(61+662*v+1320*b+720*b*v))))/d)}else r=_t*iw(o),n=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);e=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),r=Math.asin(e),o<0&&(r=-r),l===0&&c===0?n=0:n=zt(Math.atan2(l,c)+this.long0)}return i.x=n,i.y=r,i}var i5e=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const H2={init:QNe,forward:e5e,inverse:t5e,names:i5e};function Zve(i){var e=Math.exp(i);return e=(e-1/e)/2,e}function iu(i,e){i=Math.abs(i),e=Math.abs(e);var t=Math.max(i,e),r=Math.min(i,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function r5e(i){var e=1+i,t=e-1;return t===0?i:i*Math.log(e)/t}function n5e(i){var e=Math.abs(i);return e=r5e(e*(1+e/(iu(1,e)+1))),i<0?-e:e}function CR(i,e){for(var t=2*Math.cos(2*e),r=i.length-1,n=i[r],s=0,o;--r>=0;)o=-s+t*n+i[r],s=n,n=o;return e+o*Math.sin(2*e)}function s5e(i,e){for(var t=2*Math.cos(e),r=i.length-1,n=i[r],s=0,o;--r>=0;)o=-s+t*n+i[r],s=n,n=o;return Math.sin(e)*o}function o5e(i){var e=Math.exp(i);return e=(e+1/e)/2,e}function Kve(i,e,t){for(var r=Math.sin(e),n=Math.cos(e),s=Zve(t),o=o5e(t),a=2*n*o,l=-2*r*s,u=i.length-1,c=i[u],h=0,d=0,p=0,m,g;--u>=0;)m=d,g=h,d=c,h=p,c=-m+a*d-l*h+i[u],p=-g+l*d+a*h;return a=r*o,l=n*s,[a*c-l*p,a*p+l*c]}function a5e(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(H2.init.apply(this),this.forward=H2.forward,this.inverse=H2.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),e=i/(2-i),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=CR(this.cbg,this.lat0);this.Zb=-this.Qn*(r+s5e(this.gtu,2*r))}function l5e(i){var e=zt(i.x-this.long0),t=i.y;t=CR(this.cbg,t);var r=Math.sin(t),n=Math.cos(t),s=Math.sin(e),o=Math.cos(e);t=Math.atan2(r,o*n),e=Math.atan2(s*n,iu(r,n*o)),e=n5e(Math.tan(e));var a=Kve(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),i.x=l,i.y=u,i}function u5e(i){var e=(i.x-this.x0)*(1/this.a),t=(i.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,n;if(Math.abs(e)<=2.623395162778){var s=Kve(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(Zve(e));var o=Math.sin(t),a=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(o*u,iu(l,u*a)),e=Math.atan2(l,u*a),r=zt(e+this.long0),n=CR(this.cgb,t)}else r=1/0,n=1/0;return i.x=r,i.y=n,i}var c5e=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const V2={init:a5e,forward:l5e,inverse:u5e,names:c5e};function h5e(i,e){if(i===void 0){if(i=Math.floor((zt(e)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var d5e="etmerc";function f5e(){var i=h5e(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Mo,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,V2.init.apply(this),this.forward=V2.forward,this.inverse=V2.inverse}var p5e=["Universal Transverse Mercator System","utm"];const m5e={init:f5e,names:p5e,dependsOn:d5e};function TR(i,e){return Math.pow((1-i)/(1+i),e)}var g5e=20;function y5e(){var i=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+dn)/(Math.pow(Math.tan(.5*this.lat0+dn),this.C)*TR(this.e*i,this.ratexp))}function v5e(i){var e=i.x,t=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+dn),this.C)*TR(this.e*Math.sin(t),this.ratexp))-_t,i.x=this.C*e,i}function b5e(i){for(var e=1e-14,t=i.x/this.C,r=i.y,n=Math.pow(Math.tan(.5*r+dn)/this.K,1/this.C),s=g5e;s>0&&(r=2*Math.atan(n*TR(this.e*Math.sin(i.y),-.5*this.e))-_t,!(Math.abs(r-i.y)<e));--s)i.y=r;return s?(i.x=t,i.y=r,i):null}var _5e=["gauss"];const AR={init:y5e,forward:v5e,inverse:b5e,names:_5e};function x5e(){AR.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function w5e(i){var e,t,r,n;return i.x=zt(i.x-this.long0),AR.forward.apply(this,[i]),e=Math.sin(i.y),t=Math.cos(i.y),r=Math.cos(i.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),i.x=n*t*Math.sin(i.x),i.y=n*(this.cosc0*e-this.sinc0*t*r),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function E5e(i){var e,t,r,n,s;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,s=iu(i.x,i.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),t=Math.cos(o),n=Math.asin(t*this.sinc0+i.y*e*this.cosc0/s),r=Math.atan2(i.x*e,s*this.cosc0*t-i.y*this.sinc0*e)}else n=this.phic0,r=0;return i.x=r,i.y=n,AR.inverse.apply(this,[i]),i.x=zt(i.x+this.long0),i}var S5e=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const C5e={init:x5e,forward:w5e,inverse:E5e,names:S5e};function T5e(i,e,t){return e*=t,Math.tan(.5*(_t+i))*Math.pow((1-e)/(1+e),.5*t)}function A5e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Lt&&(this.k0=.5*(1+iw(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Lt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Lt&&Math.abs(Math.cos(this.lat_ts))>Lt&&(this.k0=.5*this.cons*Uc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ju(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Uc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-_t,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function k5e(i){var e=i.x,t=i.y,r=Math.sin(t),n=Math.cos(t),s,o,a,l,u,c,h=zt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Lt&&Math.abs(t+this.lat0)<=Lt?(i.x=NaN,i.y=NaN,i):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*n*Math.cos(h)),i.x=this.a*s*n*Math.sin(h)+this.x0,i.y=this.a*s*(this.coslat0*r-this.sinlat0*n*Math.cos(h))+this.y0,i):(o=2*Math.atan(this.ssfn_(t,r,this.e))-_t,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Lt?(u=ju(this.e,t*this.con,this.con*r),c=2*this.a*this.k0*u/this.cons,i.x=this.x0+c*Math.sin(e-this.long0),i.y=this.y0-this.con*c*Math.cos(e-this.long0),i):(Math.abs(this.sinlat0)<Lt?(s=2*this.a*this.k0/(1+l*Math.cos(h)),i.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),i.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),i.x=s*l*Math.sin(h)+this.x0,i))}function D5e(i){i.x-=this.x0,i.y-=this.y0;var e,t,r,n,s,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=Lt?(i.x=e,i.y=t,i):(t=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Lt?this.lat0>0?e=zt(this.long0+Math.atan2(i.x,-1*i.y)):e=zt(this.long0+Math.atan2(i.x,i.y)):e=zt(this.long0+Math.atan2(i.x*Math.sin(a),o*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=e,i.y=t,i)}else if(Math.abs(this.coslat0)<=Lt){if(o<=Lt)return t=this.lat0,e=this.long0,i.x=e,i.y=t,i;i.x*=this.con,i.y*=this.con,r=o*this.cons/(2*this.a*this.k0),t=this.con*K_(this.e,r),e=this.con*zt(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=Lt?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+i.y*Math.sin(n)*this.cosX0/o),e=zt(this.long0+Math.atan2(i.x*Math.sin(n),o*this.cosX0*Math.cos(n)-i.y*this.sinX0*Math.sin(n)))),t=-1*K_(this.e,Math.tan(.5*(_t+s)));return i.x=e,i.y=t,i}var M5e=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const L5e={init:A5e,forward:k5e,inverse:D5e,names:M5e,ssfn_:T5e};function R5e(){var i=this.lat0;this.lambda0=this.long0;var e=Math.sin(i),t=this.a,r=this.rf,n=1/r,s=2*n-Math.pow(n,2),o=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*u}function I5e(i){var e=Math.log(Math.tan(Math.PI/4-i.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),r=-this.alpha*(e+t)+this.K,n=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*o+this.x0,i}function O5e(i){for(var e=i.x-this.x0,t=i.y-this.y0,r=e/this.R,n=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+o/this.alpha,l=0,u=s,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=a,i.y=u,i}var P5e=["somerc"];const F5e={init:R5e,forward:I5e,inverse:O5e,names:P5e};var w0=1e-7;function N5e(i){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||e.indexOf(t)!==-1}function $5e(){var i,e,t,r,n,s,o,a,l,u,c=0,h,d=0,p=0,m=0,g=0,v=0,b=0;this.no_off=N5e(this),this.no_rot="no_rot"in this;var _=!1;"alpha"in this&&(_=!0);var E=!1;if("rectified_grid_angle"in this&&(E=!0),_&&(b=this.alpha),E&&(c=this.rectified_grid_angle*Mo),_||E)d=this.longc;else if(p=this.long1,g=this.lat1,m=this.long2,v=this.lat2,Math.abs(g-v)<=w0||(i=Math.abs(g))<=w0||Math.abs(i-_t)<=w0||Math.abs(Math.abs(this.lat0)-_t)<=w0||Math.abs(Math.abs(v)-_t)<=w0)throw new Error;var C=1-this.es;e=Math.sqrt(C),Math.abs(this.lat0)>Lt?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),i=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*e/i,r=this.B*e/(t*Math.sqrt(i)),n=r*r-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=r,this.E*=Math.pow(ju(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=n=1),_||E?(_?(h=Math.asin(Math.sin(b)/r),E||(c=b)):(h=c,b=Math.asin(r*Math.sin(h))),this.lam0=d-Math.asin(.5*(n-1/n)*Math.tan(h))/this.B):(s=Math.pow(ju(this.e,g,Math.sin(g)),this.B),o=Math.pow(ju(this.e,v,Math.sin(v)),this.B),n=this.E/s,l=(o-s)/(o+s),u=this.E*this.E,u=(u-o*s)/(u+o*s),i=p-m,i<-Math.pi?m-=X_:i>Math.pi&&(m+=X_),this.lam0=zt(.5*(p+m)-Math.atan(u*Math.tan(.5*this.B*(p-m))/l)/this.B),h=Math.atan(2*Math.sin(this.B*zt(p-this.lam0))/(n-1/n)),c=b=Math.asin(r*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(dn-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(dn+n))}function B5e(i){var e={},t,r,n,s,o,a,l,u;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-_t)>Lt){if(o=this.E/Math.pow(ju(this.e,i.y,Math.sin(i.y)),this.B),a=1/o,t=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*i.x),n=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(n)-1)<Lt)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*i.x),Math.abs(a)<w0?l=this.A*i.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,a)}else u=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function j5e(i){var e,t,r,n,s,o,a,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(t=i.y,e=i.x):(t=i.x*this.cosrot-i.y*this.sinrot,e=i.y*this.cosrot+i.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),n=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*e),a=(o*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(a)-1)<Lt)l.x=0,l.y=a<0?-_t:_t;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=K_(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var z5e=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const U5e={init:$5e,forward:B5e,inverse:j5e,names:z5e};function G5e(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Lt)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Uc(this.e,e,t),n=ju(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Uc(this.e,s,o),l=ju(this.e,this.lat2,s),u=ju(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Lt?this.ns=Math.log(r/a)/Math.log(n/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function q5e(i){var e=i.x,t=i.y;Math.abs(2*Math.abs(t)-Math.PI)<=Lt&&(t=iw(t)*(_t-2*Lt));var r=Math.abs(Math.abs(t)-_t),n,s;if(r>Lt)n=ju(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var o=this.ns*zt(e-this.long0);return i.x=this.k0*(s*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,i}function H5e(i){var e,t,r,n,s,o=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),t=1):(e=-Math.sqrt(o*o+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*o,t*a)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),n=K_(this.e,r),n===-9999)return null}else n=-_t;return s=zt(l/this.ns+this.long0),i.x=s,i.y=n,i}var V5e=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const W5e={init:G5e,forward:q5e,inverse:H5e,names:V5e};function Y5e(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function X5e(i){var e,t,r,n,s,o,a,l=i.x,u=i.y,c=zt(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(n)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),i.y=a*Math.cos(o)/1,i.x=a*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function Z5e(i){var e,t,r,n,s,o,a,l,u=i.x;i.x=i.y,i.y=u,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),s=Math.atan2(i.y,i.x),n=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),t=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(e)),i.x=this.long0-t/this.alfa,a=e,l=0;var c=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(l=1),a=i.y,c+=1;while(l===0&&c<15);return c>=15?null:i}var K5e=["Krovak","krovak"];const J5e={init:Y5e,forward:X5e,inverse:Z5e,names:K5e};function Ca(i,e,t,r,n){return i*n-e*Math.sin(2*n)+t*Math.sin(4*n)-r*Math.sin(6*n)}function rw(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function nw(i){return .375*i*(1+.25*i*(1+.46875*i))}function sw(i){return .05859375*i*i*(1+.75*i)}function ow(i){return i*i*i*(35/3072)}function Ay(i,e,t){var r=e*t;return i/Math.sqrt(1-r*r)}function dv(i){return Math.abs(i)<_t?i:i-iw(i)*Math.PI}function MS(i,e,t,r,n){var s,o;s=i/e;for(var a=0;a<15;a++)if(o=(i-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-n*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function Q5e(){this.sphere||(this.e0=rw(this.es),this.e1=nw(this.es),this.e2=sw(this.es),this.e3=ow(this.es),this.ml0=this.a*Ca(this.e0,this.e1,this.e2,this.e3,this.lat0))}function e4e(i){var e,t,r=i.x,n=i.y;if(r=zt(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(n),Math.cos(r))-this.lat0);else{var s=Math.sin(n),o=Math.cos(n),a=Ay(this.a,this.e,s),l=Math.tan(n)*Math.tan(n),u=r*Math.cos(n),c=u*u,h=this.es*o*o/(1-this.es),d=this.a*Ca(this.e0,this.e1,this.e2,this.e3,n);e=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),t=d-this.ml0+a*s/o*c*(.5+(5-l+6*h)*c/24)}return i.x=e+this.x0,i.y=t+this.y0,i}function t4e(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,r,n;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+t,a=MS(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-_t)<=Lt)return i.x=this.long0,i.y=_t,t<0&&(i.y*=-1),i;var l=Ay(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),h=e*this.a/l,d=h*h;r=a-l*Math.tan(a)/u*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(a)}return i.x=zt(n+this.long0),i.y=dv(r),i}var i4e=["Cassini","Cassini_Soldner","cass"];const r4e={init:Q5e,forward:e4e,inverse:t4e,names:i4e};function Nf(i,e){var t;return i>1e-7?(t=i*e,(1-i*i)*(e/(1-t*t)-.5/i*Math.log((1-t)/(1+t)))):2*e}var n4e=1,s4e=2,o4e=3,a4e=4;function l4e(){var i=Math.abs(this.lat0);if(Math.abs(i-_t)<Lt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<Lt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Nf(this.e,1),this.mmf=.5/(1-this.es),this.apa=y4e(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Nf(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function u4e(i){var e,t,r,n,s,o,a,l,u,c,h=i.x,d=i.y;if(h=zt(h-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+c*r:1+this.sinph0*s+this.cosph0*c*r,t<=Lt)return null;t=Math.sqrt(2/t),e=t*c*Math.sin(h),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<Lt)return null;t=dn-d*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(h),t*=r}}else{switch(a=0,l=0,u=0,r=Math.cos(h),n=Math.sin(h),s=Math.sin(d),o=Nf(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=_t+d,o=this.qp-o;break;case this.S_POLE:u=d-_t,o=this.qp+o;break}if(Math.abs(u)<Lt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*a-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*u*l*n;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*n,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return i.x=this.a*e+this.x0,i.y=this.a*t+this.y0,i}function c4e(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,r,n,s,o,a,l,u;if(this.sphere){var c=0,h,d=0;if(h=Math.sqrt(e*e+t*t),n=h*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(n),c=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(h)<=Lt?0:Math.asin(t*d/h),e*=d,t=c*h;break;case this.OBLIQ:n=Math.abs(h)<=Lt?this.lat0:Math.asin(c*this.sinph0+t*d*this.cosph0/h),e*=d*this.cosph0,t=(c-Math.sin(n)*this.sinph0)*h;break;case this.N_POLE:t=-t,n=_t-n;break;case this.S_POLE:n-=_t;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<Lt)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(u=s*this.sinb1+t*o*this.cosb1/l,a=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*o):(u=t*o/l,a=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return i.x=this.long0,i.y=this.lat0,i;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),n=v4e(Math.asin(u),this.apa)}return i.x=zt(this.long0+r),i.y=n,i}var h4e=.3333333333333333,d4e=.17222222222222222,f4e=.10257936507936508,p4e=.06388888888888888,m4e=.0664021164021164,g4e=.016415012942191543;function y4e(i){var e,t=[];return t[0]=i*h4e,e=i*i,t[0]+=e*d4e,t[1]=e*p4e,e*=i,t[0]+=e*f4e,t[1]+=e*m4e,t[2]=e*g4e,t}function v4e(i,e){var t=i+i;return i+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var b4e=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const _4e={init:l4e,forward:u4e,inverse:c4e,names:b4e,S_POLE:n4e,N_POLE:s4e,EQUIT:o4e,OBLIQ:a4e};function Hf(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function x4e(){Math.abs(this.lat1+this.lat2)<Lt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Uc(this.e3,this.sin_po,this.cos_po),this.qs1=Nf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Uc(this.e3,this.sin_po,this.cos_po),this.qs2=Nf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Nf(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Lt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function w4e(i){var e=i.x,t=i.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=Nf(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*zt(e-this.long0),o=n*Math.sin(s)+this.x0,a=this.rh-n*Math.cos(s)+this.y0;return i.x=o,i.y=a,i}function E4e(i){var e,t,r,n,s,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),r=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),r=-1),n=0,e!==0&&(n=Math.atan2(r*i.x,r*i.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,t)),s=zt(n/this.ns0+this.long0),i.x=s,i.y=o,i}function S4e(i,e){var t,r,n,s,o,a=Hf(.5*e);if(i<Lt)return a;for(var l=i*i,u=1;u<=25;u++)if(t=Math.sin(a),r=Math.cos(a),n=i*t,s=1-n*n,o=.5*s*s/r*(e/(1-l)-t/s+.5/i*Math.log((1-n)/(1+n))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var C4e=["Albers_Conic_Equal_Area","Albers","aea"];const T4e={init:x4e,forward:w4e,inverse:E4e,names:C4e,phi1z:S4e};function A4e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function k4e(i){var e,t,r,n,s,o,a,l,u=i.x,c=i.y;return r=zt(u-this.long0),e=Math.sin(c),t=Math.cos(c),n=Math.cos(r),o=this.sin_p14*e+this.cos_p14*t*n,s=1,o>0||Math.abs(o)<=Lt?(a=this.x0+this.a*s*t*Math.sin(r)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)/o):(a=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*n)),i.x=a,i.y=l,i}function D4e(i){var e,t,r,n,s,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(e=Math.sqrt(i.x*i.x+i.y*i.y))?(n=Math.atan2(e,this.rc),t=Math.sin(n),r=Math.cos(n),o=Hf(r*this.sin_p14+i.y*t*this.cos_p14/e),s=Math.atan2(i.x*t,e*this.cos_p14*r-i.y*this.sin_p14*t),s=zt(this.long0+s)):(o=this.phic0,s=0),i.x=s,i.y=o,i}var M4e=["gnom"];const L4e={init:A4e,forward:k4e,inverse:D4e,names:M4e};function R4e(i,e){var t=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*_t:_t;for(var r=Math.asin(.5*e),n,s,o,a,l=0;l<30;l++)if(s=Math.sin(r),o=Math.cos(r),a=i*s,n=Math.pow(1-a*a,2)/(2*o)*(e/(1-i*i)-s/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),r+=n,Math.abs(n)<=1e-10)return r;return NaN}function I4e(){this.sphere||(this.k0=Uc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function O4e(i){var e=i.x,t=i.y,r,n,s=zt(e-this.long0);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=Nf(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return i.x=r,i.y=n,i}function P4e(i){i.x-=this.x0,i.y-=this.y0;var e,t;return this.sphere?(e=zt(this.long0+i.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(t=R4e(this.e,2*i.y*this.k0/this.a),e=zt(this.long0+i.x/(this.a*this.k0))),i.x=e,i.y=t,i}var F4e=["cea"];const N4e={init:I4e,forward:O4e,inverse:P4e,names:F4e};function $4e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function B4e(i){var e=i.x,t=i.y,r=zt(e-this.long0),n=dv(t-this.lat0);return i.x=this.x0+this.a*r*this.rc,i.y=this.y0+this.a*n,i}function j4e(i){var e=i.x,t=i.y;return i.x=zt(this.long0+(e-this.x0)/(this.a*this.rc)),i.y=dv(this.lat0+(t-this.y0)/this.a),i}var z4e=["Equirectangular","Equidistant_Cylindrical","eqc"];const U4e={init:$4e,forward:B4e,inverse:j4e,names:z4e};var Ohe=20;function G4e(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=rw(this.es),this.e1=nw(this.es),this.e2=sw(this.es),this.e3=ow(this.es),this.ml0=this.a*Ca(this.e0,this.e1,this.e2,this.e3,this.lat0)}function q4e(i){var e=i.x,t=i.y,r,n,s,o=zt(e-this.long0);if(s=o*Math.sin(t),this.sphere)Math.abs(t)<=Lt?(r=this.a*o,n=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),n=this.a*(dv(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Lt)r=this.a*o,n=-1*this.ml0;else{var a=Ay(this.a,this.e,Math.sin(t))/Math.tan(t);r=a*Math.sin(s),n=this.a*Ca(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(s))}return i.x=r+this.x0,i.y=n+this.y0,i}function H4e(i){var e,t,r,n,s,o,a,l,u;if(r=i.x-this.x0,n=i.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Lt)e=zt(r/this.a+this.long0),t=0;else{o=this.lat0+n/this.a,a=r*r/this.a/this.a+o*o,l=o;var c;for(s=Ohe;s;--s)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=Lt){t=l;break}e=zt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t))}else if(Math.abs(n+this.ml0)<=Lt)t=0,e=zt(this.long0+r/this.a);else{o=(this.ml0+n)/this.a,a=r*r/this.a/this.a+o*o,l=o;var h,d,p,m,g;for(s=Ohe;s;--s)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*Ca(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),m=d/this.a,u=(o*(h*m+1)-m-.5*h*(m*m+a))/(this.es*Math.sin(2*l)*(m*m+a-2*o*m)/(4*h)+(o-m)*(h*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=Lt){t=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=zt(this.long0+Math.asin(r*h/this.a)/Math.sin(t))}return i.x=e,i.y=t,i}var V4e=["Polyconic","poly"];const W4e={init:G4e,forward:q4e,inverse:H4e,names:V4e};function Y4e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function X4e(i){var e,t=i.x,r=i.y,n=r-this.lat0,s=t-this.long0,o=n/g_*1e-5,a=s,l=1,u=0;for(e=1;e<=10;e++)l=l*o,u=u+this.A[e]*l;var c=u,h=a,d=1,p=0,m,g,v=0,b=0;for(e=1;e<=6;e++)m=d*c-p*h,g=p*c+d*h,d=m,p=g,v=v+this.B_re[e]*d-this.B_im[e]*p,b=b+this.B_im[e]*d+this.B_re[e]*p;return i.x=b*this.a+this.x0,i.y=v*this.a+this.y0,i}function Z4e(i){var e,t=i.x,r=i.y,n=t-this.x0,s=r-this.y0,o=s/this.a,a=n/this.a,l=1,u=0,c,h,d=0,p=0;for(e=1;e<=6;e++)c=l*o-u*a,h=u*o+l*a,l=c,u=h,d=d+this.C_re[e]*l-this.C_im[e]*u,p=p+this.C_im[e]*l+this.C_re[e]*u;for(var m=0;m<this.iterations;m++){var g=d,v=p,b,_,E=o,C=a;for(e=2;e<=6;e++)b=g*d-v*p,_=v*d+g*p,g=b,v=_,E=E+(e-1)*(this.B_re[e]*g-this.B_im[e]*v),C=C+(e-1)*(this.B_im[e]*g+this.B_re[e]*v);g=1,v=0;var T=this.B_re[1],D=this.B_im[1];for(e=2;e<=6;e++)b=g*d-v*p,_=v*d+g*p,g=b,v=_,T=T+e*(this.B_re[e]*g-this.B_im[e]*v),D=D+e*(this.B_im[e]*g+this.B_re[e]*v);var M=T*T+D*D;d=(E*T+C*D)/M,p=(C*T-E*D)/M}var A=d,I=p,P=1,U=0;for(e=1;e<=9;e++)P=P*A,U=U+this.D[e]*P;var K=this.lat0+U*g_*1e5,L=this.long0+I;return i.x=L,i.y=K,i}var K4e=["New_Zealand_Map_Grid","nzmg"];const J4e={init:Y4e,forward:X4e,inverse:Z4e,names:K4e};function Q4e(){}function e6e(i){var e=i.x,t=i.y,r=zt(e-this.long0),n=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return i.x=n,i.y=s,i}function t6e(i){i.x-=this.x0,i.y-=this.y0;var e=zt(this.long0+i.x/this.a),t=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=e,i.y=t,i}var i6e=["Miller_Cylindrical","mill"];const r6e={init:Q4e,forward:e6e,inverse:t6e,names:i6e};var n6e=20;function s6e(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Yve(this.es)}function o6e(i){var e,t,r=i.x,n=i.y;if(r=zt(r-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),o=n6e;o;--o){var a=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Lt)break}e=this.a*this.C_x*r*(this.m+Math.cos(n)),t=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);t=this.a*NT(n,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return i.x=e,i.y=t,i}function a6e(i){var e,t,r,n;return i.x-=this.x0,r=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=Hf((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Hf(Math.sin(e)/this.n)),r=zt(r+this.long0),e=dv(e)):(e=Xve(i.y/this.a,this.es,this.en),n=Math.abs(e),n<_t?(n=Math.sin(e),t=this.long0+i.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),r=zt(t)):n-Lt<_t&&(r=this.long0)),i.x=r,i.y=e,i}var l6e=["Sinusoidal","sinu"];const u6e={init:s6e,forward:o6e,inverse:a6e,names:l6e};function c6e(){}function h6e(i){for(var e=i.x,t=i.y,r=zt(e-this.long0),n=t,s=Math.PI*Math.sin(t);;){var o=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=o,Math.abs(o)<Lt)break}n/=2,Math.PI/2-Math.abs(t)<Lt&&(r=0);var a=.900316316158*this.a*r*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return i.x=a,i.y=l,i}function d6e(i){var e,t;i.x-=this.x0,i.y-=this.y0,t=i.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=zt(this.long0+i.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var n=Math.asin(t);return i.x=r,i.y=n,i}var f6e=["Mollweide","moll"];const p6e={init:c6e,forward:h6e,inverse:d6e,names:f6e};function m6e(){Math.abs(this.lat1+this.lat2)<Lt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=rw(this.es),this.e1=nw(this.es),this.e2=sw(this.es),this.e3=ow(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Uc(this.e,this.sinphi,this.cosphi),this.ml1=Ca(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Lt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Uc(this.e,this.sinphi,this.cosphi),this.ml2=Ca(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ca(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function g6e(i){var e=i.x,t=i.y,r;if(this.sphere)r=this.a*(this.g-t);else{var n=Ca(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-n)}var s=this.ns*zt(e-this.long0),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return i.x=o,i.y=a,i}function y6e(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var e,t,r,n;this.ns>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),e=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*i.x,e*i.y)),this.sphere)return n=zt(this.long0+s/this.ns),r=dv(this.g-t/this.a),i.x=n,i.y=r,i;var o=this.g-t/this.a;return r=MS(o,this.e0,this.e1,this.e2,this.e3),n=zt(this.long0+s/this.ns),i.x=n,i.y=r,i}var v6e=["Equidistant_Conic","eqdc"];const b6e={init:m6e,forward:g6e,inverse:y6e,names:v6e};function _6e(){this.R=this.a}function x6e(i){var e=i.x,t=i.y,r=zt(e-this.long0),n,s;Math.abs(t)<=Lt&&(n=this.x0+this.R*r,s=this.y0);var o=Hf(2*Math.abs(t/Math.PI));(Math.abs(r)<=Lt||Math.abs(Math.abs(t)-_t)<=Lt)&&(n=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),h=c/(u+c-1),d=h*h,p=h*(2/u-1),m=p*p,g=Math.PI*this.R*(a*(h-m)+Math.sqrt(l*(h-m)*(h-m)-(m+l)*(d-m)))/(m+l);r<0&&(g=-g),n=this.x0+g;var v=l+h;return g=Math.PI*this.R*(p*v-a*Math.sqrt((m+l)*(l+1)-v*v))/(m+l),t>=0?s=this.y0+g:s=this.y0-g,i.x=n,i.y=s,i}function w6e(i){var e,t,r,n,s,o,a,l,u,c,h,d,p;return i.x-=this.x0,i.y-=this.y0,h=Math.PI*this.R,r=i.x/h,n=i.y/h,s=r*r+n*n,o=-Math.abs(n)*(1+s),a=o-2*n*n+r*r,l=-2*o+1+2*n*n+s*s,p=n*n/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),h=3*p/u/c,Math.abs(h)>1&&(h>=0?h=1:h=-1),d=Math.acos(h)/3,i.y>=0?t=(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:t=-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<Lt?e=this.long0:e=zt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-n*n)+s*s))/2/r),i.x=e,i.y=t,i}var E6e=["Van_der_Grinten_I","VanDerGrinten","vandg"];const S6e={init:_6e,forward:x6e,inverse:w6e,names:E6e};function C6e(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function T6e(i){var e=i.x,t=i.y,r=Math.sin(i.y),n=Math.cos(i.y),s=zt(e-this.long0),o,a,l,u,c,h,d,p,m,g,v,b,_,E,C,T,D,M,A,I,P,U,K;return this.sphere?Math.abs(this.sin_p12-1)<=Lt?(i.x=this.x0+this.a*(_t-t)*Math.sin(s),i.y=this.y0-this.a*(_t-t)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=Lt?(i.x=this.x0+this.a*(_t+t)*Math.sin(s),i.y=this.y0+this.a*(_t+t)*Math.cos(s),i):(M=this.sin_p12*r+this.cos_p12*n*Math.cos(s),T=Math.acos(M),D=T?T/Math.sin(T):1,i.x=this.x0+this.a*D*n*Math.sin(s),i.y=this.y0+this.a*D*(this.cos_p12*r-this.sin_p12*n*Math.cos(s)),i):(o=rw(this.es),a=nw(this.es),l=sw(this.es),u=ow(this.es),Math.abs(this.sin_p12-1)<=Lt?(c=this.a*Ca(o,a,l,u,_t),h=this.a*Ca(o,a,l,u,t),i.x=this.x0+(c-h)*Math.sin(s),i.y=this.y0-(c-h)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=Lt?(c=this.a*Ca(o,a,l,u,_t),h=this.a*Ca(o,a,l,u,t),i.x=this.x0+(c+h)*Math.sin(s),i.y=this.y0+(c+h)*Math.cos(s),i):(d=r/n,p=Ay(this.a,this.e,this.sin_p12),m=Ay(this.a,this.e,r),g=Math.atan((1-this.es)*d+this.es*p*this.sin_p12/(m*n)),v=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(g)-this.sin_p12*Math.cos(s)),v===0?A=Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):Math.abs(Math.abs(v)-Math.PI)<=Lt?A=-Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):A=Math.asin(Math.sin(s)*Math.cos(g)/Math.sin(v)),b=this.e*this.sin_p12/Math.sqrt(1-this.es),_=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es),E=b*_,C=_*_,I=A*A,P=I*A,U=P*A,K=U*A,T=p*A*(1-I*C*(1-C)/6+P/8*E*(1-2*C)+U/120*(C*(4-7*C)-3*b*b*(1-7*C))-K/48*E),i.x=this.x0+T*Math.sin(v),i.y=this.y0+T*Math.cos(v),i))}function A6e(i){i.x-=this.x0,i.y-=this.y0;var e,t,r,n,s,o,a,l,u,c,h,d,p,m,g,v,b,_,E,C,T,D,M,A;return this.sphere?(e=Math.sqrt(i.x*i.x+i.y*i.y),e>2*_t*this.a?void 0:(t=e/this.a,r=Math.sin(t),n=Math.cos(t),s=this.long0,Math.abs(e)<=Lt?o=this.lat0:(o=Hf(n*this.sin_p12+i.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-_t,Math.abs(a)<=Lt?this.lat0>=0?s=zt(this.long0+Math.atan2(i.x,-i.y)):s=zt(this.long0-Math.atan2(-i.x,i.y)):s=zt(this.long0+Math.atan2(i.x*r,e*this.cos_p12*n-i.y*this.sin_p12*r))),i.x=s,i.y=o,i)):(l=rw(this.es),u=nw(this.es),c=sw(this.es),h=ow(this.es),Math.abs(this.sin_p12-1)<=Lt?(d=this.a*Ca(l,u,c,h,_t),e=Math.sqrt(i.x*i.x+i.y*i.y),p=d-e,o=MS(p/this.a,l,u,c,h),s=zt(this.long0+Math.atan2(i.x,-1*i.y)),i.x=s,i.y=o,i):Math.abs(this.sin_p12+1)<=Lt?(d=this.a*Ca(l,u,c,h,_t),e=Math.sqrt(i.x*i.x+i.y*i.y),p=e-d,o=MS(p/this.a,l,u,c,h),s=zt(this.long0+Math.atan2(i.x,i.y)),i.x=s,i.y=o,i):(e=Math.sqrt(i.x*i.x+i.y*i.y),v=Math.atan2(i.x,i.y),m=Ay(this.a,this.e,this.sin_p12),b=Math.cos(v),_=this.e*this.cos_p12*b,E=-_*_/(1-this.es),C=3*this.es*(1-E)*this.sin_p12*this.cos_p12*b/(1-this.es),T=e/m,D=T-E*(1+E)*Math.pow(T,3)/6-C*(1+3*E)*Math.pow(T,4)/24,M=1-E*D*D/2-T*D*D*D/6,g=Math.asin(this.sin_p12*Math.cos(D)+this.cos_p12*Math.sin(D)*b),s=zt(this.long0+Math.asin(Math.sin(v)*Math.sin(D)/Math.cos(g))),A=Math.sin(g),o=Math.atan2((A-this.es*M*this.sin_p12)*Math.tan(g),A*(1-this.es)),i.x=s,i.y=o,i))}var k6e=["Azimuthal_Equidistant","aeqd"];const D6e={init:C6e,forward:T6e,inverse:A6e,names:k6e};function M6e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function L6e(i){var e,t,r,n,s,o,a,l,u=i.x,c=i.y;return r=zt(u-this.long0),e=Math.sin(c),t=Math.cos(c),n=Math.cos(r),o=this.sin_p14*e+this.cos_p14*t*n,s=1,(o>0||Math.abs(o)<=Lt)&&(a=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)),i.x=a,i.y=l,i}function R6e(i){var e,t,r,n,s,o,a;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),t=Hf(e/this.a),r=Math.sin(t),n=Math.cos(t),o=this.long0,Math.abs(e)<=Lt?(a=this.lat0,i.x=o,i.y=a,i):(a=Hf(n*this.sin_p14+i.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-_t,Math.abs(s)<=Lt?(this.lat0>=0?o=zt(this.long0+Math.atan2(i.x,-i.y)):o=zt(this.long0-Math.atan2(-i.x,i.y)),i.x=o,i.y=a,i):(o=zt(this.long0+Math.atan2(i.x*r,e*this.cos_p14*n-i.y*this.sin_p14*r)),i.x=o,i.y=a,i))}var I6e=["ortho"];const O6e={init:M6e,forward:L6e,inverse:R6e,names:I6e};var rs={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},fn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function P6e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=_t-dn/2?this.face=rs.TOP:this.lat0<=-(_t-dn/2)?this.face=rs.BOTTOM:Math.abs(this.long0)<=dn?this.face=rs.FRONT:Math.abs(this.long0)<=_t+dn?this.face=this.long0>0?rs.RIGHT:rs.LEFT:this.face=rs.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function F6e(i){var e={x:0,y:0},t,r,n,s,o,a,l={value:0};if(i.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):t=i.y,r=i.x,this.face===rs.TOP)s=_t-t,r>=dn&&r<=_t+dn?(l.value=fn.AREA_0,n=r-_t):r>_t+dn||r<=-(_t+dn)?(l.value=fn.AREA_1,n=r>0?r-Ts:r+Ts):r>-(_t+dn)&&r<=-dn?(l.value=fn.AREA_2,n=r+_t):(l.value=fn.AREA_3,n=r);else if(this.face===rs.BOTTOM)s=_t+t,r>=dn&&r<=_t+dn?(l.value=fn.AREA_0,n=-r+_t):r<dn&&r>=-dn?(l.value=fn.AREA_1,n=-r):r<-dn&&r>=-(_t+dn)?(l.value=fn.AREA_2,n=-r-_t):(l.value=fn.AREA_3,n=r>0?-r+Ts:-r-Ts);else{var u,c,h,d,p,m,g;this.face===rs.RIGHT?r=ny(r,+_t):this.face===rs.BACK?r=ny(r,+Ts):this.face===rs.LEFT&&(r=ny(r,-_t)),d=Math.sin(t),p=Math.cos(t),m=Math.sin(r),g=Math.cos(r),u=p*g,c=p*m,h=d,this.face===rs.FRONT?(s=Math.acos(u),n=jE(s,h,c,l)):this.face===rs.RIGHT?(s=Math.acos(c),n=jE(s,h,-u,l)):this.face===rs.BACK?(s=Math.acos(-u),n=jE(s,h,-c,l)):this.face===rs.LEFT?(s=Math.acos(-c),n=jE(s,h,u,l)):(s=n=0,l.value=fn.AREA_0)}return a=Math.atan(12/Ts*(n+Math.acos(Math.sin(n)*Math.cos(dn))-_t)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===fn.AREA_1?a+=_t:l.value===fn.AREA_2?a+=Ts:l.value===fn.AREA_3&&(a+=1.5*Ts),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,i.x=e.x,i.y=e.y,i}function N6e(i){var e={lam:0,phi:0},t,r,n,s,o,a,l,u,c,h={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,r=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),t=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?h.value=fn.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(h.value=fn.AREA_1,t-=_t):i.x<0&&-i.x>=Math.abs(i.y)?(h.value=fn.AREA_2,t=t<0?t+Ts:t-Ts):(h.value=fn.AREA_3,t+=_t),c=Ts/12*Math.tan(t),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),n=Math.cos(t),s=Math.tan(r),l=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===rs.TOP)u=Math.acos(l),e.phi=_t-u,h.value===fn.AREA_0?e.lam=a+_t:h.value===fn.AREA_1?e.lam=a<0?a+Ts:a-Ts:h.value===fn.AREA_2?e.lam=a-_t:e.lam=a;else if(this.face===rs.BOTTOM)u=Math.acos(l),e.phi=u-_t,h.value===fn.AREA_0?e.lam=-a+_t:h.value===fn.AREA_1?e.lam=-a:h.value===fn.AREA_2?e.lam=-a-_t:e.lam=a<0?-a-Ts:-a+Ts;else{var d,p,m;d=l,c=d*d,c>=1?m=0:m=Math.sqrt(1-c)*Math.sin(a),c+=m*m,c>=1?p=0:p=Math.sqrt(1-c),h.value===fn.AREA_1?(c=p,p=-m,m=c):h.value===fn.AREA_2?(p=-p,m=-m):h.value===fn.AREA_3&&(c=p,p=m,m=-c),this.face===rs.RIGHT?(c=d,d=-p,p=c):this.face===rs.BACK?(d=-d,p=-p):this.face===rs.LEFT&&(c=d,d=p,p=-c),e.phi=Math.acos(-m)-_t,e.lam=Math.atan2(p,d),this.face===rs.RIGHT?e.lam=ny(e.lam,-_t):this.face===rs.BACK?e.lam=ny(e.lam,-Ts):this.face===rs.LEFT&&(e.lam=ny(e.lam,+_t))}if(this.es!==0){var g,v,b;g=e.phi<0?1:0,v=Math.tan(e.phi),b=this.b/Math.sqrt(v*v+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-b*b)/(this.one_minus_f*b)),g&&(e.phi=-e.phi)}return e.lam+=this.long0,i.x=e.lam,i.y=e.phi,i}function jE(i,e,t,r){var n;return i<Lt?(r.value=fn.AREA_0,n=0):(n=Math.atan2(e,t),Math.abs(n)<=dn?r.value=fn.AREA_0:n>dn&&n<=_t+dn?(r.value=fn.AREA_1,n-=_t):n>_t+dn||n<=-(_t+dn)?(r.value=fn.AREA_2,n=n>=0?n-Ts:n+Ts):(r.value=fn.AREA_3,n+=_t)),n}function ny(i,e){var t=i+e;return t<-Ts?t+=X_:t>+Ts&&(t-=X_),t}var $6e=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const B6e={init:P6e,forward:F6e,inverse:N6e,names:$6e};var lM=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],K1=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Jve=.8487,Qve=1.3523,ebe=Tc/5,j6e=1/ebe,j0=18,LS=function(i,e){return i[0]+e*(i[1]+e*(i[2]+e*i[3]))},z6e=function(i,e){return i[1]+e*(2*i[2]+e*3*i[3])};function U6e(i,e,t,r){for(var n=e;r;--r){var s=i(n);if(n-=s,Math.abs(s)<t)break}return n}function G6e(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function q6e(i){var e=zt(i.x-this.long0),t=Math.abs(i.y),r=Math.floor(t*ebe);r<0?r=0:r>=j0&&(r=j0-1),t=Tc*(t-j6e*r);var n={x:LS(lM[r],t)*e,y:LS(K1[r],t)};return i.y<0&&(n.y=-n.y),n.x=n.x*this.a*Jve+this.x0,n.y=n.y*this.a*Qve+this.y0,n}function H6e(i){var e={x:(i.x-this.x0)/(this.a*Jve),y:Math.abs(i.y-this.y0)/(this.a*Qve)};if(e.y>=1)e.x/=lM[j0][0],e.y=i.y<0?-_t:_t;else{var t=Math.floor(e.y*j0);for(t<0?t=0:t>=j0&&(t=j0-1);;)if(K1[t][0]>e.y)--t;else if(K1[t+1][0]<=e.y)++t;else break;var r=K1[t],n=5*(e.y-r[0])/(K1[t+1][0]-r[0]);n=U6e(function(s){return(LS(r,s)-e.y)/z6e(r,s)},n,Lt,100),e.x/=LS(lM[t],n),e.y=(5*t+n)*Mo,i.y<0&&(e.y=-e.y)}return e.x=zt(e.x+this.long0),e}var V6e=["Robinson","robin"];const W6e={init:G6e,forward:q6e,inverse:H6e,names:V6e};function Y6e(){this.name="geocent"}function X6e(i){var e=Bve(i,this.es,this.a);return e}function Z6e(i){var e=jve(i,this.es,this.a,this.b);return e}var K6e=["Geocentric","geocentric","geocent","Geocent"];const J6e={init:Y6e,forward:X6e,inverse:Z6e,names:K6e};var ia={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},k1={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Q6e(){if(Object.keys(k1).forEach((function(t){if(typeof this[t]>"u")this[t]=k1[t].def;else{if(k1[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);k1[t].num&&(this[t]=parseFloat(this[t]))}k1[t].degrees&&(this[t]=this[t]*Mo)}).bind(this)),Math.abs(Math.abs(this.lat0)-_t)<Lt?this.mode=this.lat0<0?ia.S_POLE:ia.N_POLE:Math.abs(this.lat0)<Lt?this.mode=ia.EQUIT:(this.mode=ia.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(i),this.sw=Math.sin(i)}function e8e(i){i.x-=this.long0;var e=Math.sin(i.y),t=Math.cos(i.y),r=Math.cos(i.x),n,s;switch(this.mode){case ia.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case ia.EQUIT:s=t*r;break;case ia.S_POLE:s=-e;break;case ia.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),n=s*t*Math.sin(i.x),this.mode){case ia.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case ia.EQUIT:s*=e;break;case ia.N_POLE:s*=-(t*r);break;case ia.S_POLE:s*=t*r;break}var o,a;return o=s*this.cg+n*this.sg,a=1/(o*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*a,s=o*a,i.x=n*this.a,i.y=s*this.a,i}function t8e(i){i.x/=this.a,i.y/=this.a;var e={x:i.x,y:i.y},t,r,n;n=1/(this.pn1-i.y*this.sw),t=this.pn1*i.x*n,r=this.pn1*i.y*this.cw*n,i.x=t*this.cg+r*this.sg,i.y=r*this.cg-t*this.sg;var s=iu(i.x,i.y);if(Math.abs(s)<Lt)e.x=0,e.y=i.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case ia.OBLIQ:e.y=Math.asin(o*this.sinph0+i.y*a*this.cosph0/s),i.y=(o-this.sinph0*Math.sin(e.y))*s,i.x*=a*this.cosph0;break;case ia.EQUIT:e.y=Math.asin(i.y*a/s),i.y=o*s,i.x*=a;break;case ia.N_POLE:e.y=Math.asin(o),i.y=-i.y;break;case ia.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(i.x,i.y)}return i.x=e.x+this.long0,i.y=e.y,i}var i8e=["Tilted_Perspective","tpers"];const r8e={init:Q6e,forward:e8e,inverse:t8e,names:i8e};function n8e(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,e=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function s8e(i){var e=i.x,t=i.y,r,n,s,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/iu(this.radius_p*Math.cos(t),Math.sin(t));if(n=a*Math.cos(e)*Math.cos(t),s=a*Math.sin(e)*Math.cos(t),o=a*Math.sin(t),(this.radius_g-n)*n-s*s-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/iu(o,r)),i.y=this.radius_g_1*Math.atan(o/r)):(i.x=this.radius_g_1*Math.atan(s/r),i.y=this.radius_g_1*Math.atan(o/iu(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),n=Math.cos(e)*r,s=Math.sin(e)*r,o=Math.sin(t),r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/iu(o,r)),i.y=this.radius_g_1*Math.atan(o/r)):(i.x=this.radius_g_1*Math.atan(s/r),i.y=this.radius_g_1*Math.atan(o/iu(s,r))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function o8e(i){var e=-1,t=0,r=0,n,s,o,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*iu(1,r)):(t=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*iu(1,t));var l=r/this.radius_p;if(n=t*t+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*n*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*n),e=this.radius_g+a*e,t*=a,r*=a,i.x=Math.atan2(t,e),i.y=Math.atan(r*Math.cos(i.x)/e),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+t*t)),n=t*t+r*r+e*e,s=2*this.radius_g*e,o=s*s-4*n*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*n),e=this.radius_g+a*e,t*=a,r*=a,i.x=Math.atan2(t,e),i.y=Math.atan(r*Math.cos(i.x)/e)}return i.x=i.x+this.long0,i}var a8e=["Geostationary Satellite View","Geostationary_Satellite","geos"];const l8e={init:n8e,forward:s8e,inverse:o8e,names:a8e};var y_=1.340264,v_=-.081106,b_=893e-6,__=.003796,RS=Math.sqrt(3)/2;function u8e(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function c8e(i){var e=zt(i.x-this.long0),t=i.y,r=Math.asin(RS*Math.sin(t)),n=r*r,s=n*n*n;return i.x=e*Math.cos(r)/(RS*(y_+3*v_*n+s*(7*b_+9*__*n))),i.y=r*(y_+v_*n+s*(b_+__*n)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function h8e(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var e=1e-9,t=12,r=i.y,n,s,o,a,l,u;for(u=0;u<t&&(n=r*r,s=n*n*n,o=r*(y_+v_*n+s*(b_+__*n))-i.y,a=y_+3*v_*n+s*(7*b_+9*__*n),r-=l=o/a,!(Math.abs(l)<e));++u);return n=r*r,s=n*n*n,i.x=RS*i.x*(y_+3*v_*n+s*(7*b_+9*__*n))/Math.cos(r),i.y=Math.asin(Math.sin(r)/RS),i.x=zt(i.x+this.long0),i}var d8e=["eqearth","Equal Earth","Equal_Earth"];const f8e={init:u8e,forward:c8e,inverse:h8e,names:d8e};function p8e(i){i.Proj.projections.add(H2),i.Proj.projections.add(V2),i.Proj.projections.add(m5e),i.Proj.projections.add(C5e),i.Proj.projections.add(L5e),i.Proj.projections.add(F5e),i.Proj.projections.add(U5e),i.Proj.projections.add(W5e),i.Proj.projections.add(J5e),i.Proj.projections.add(r4e),i.Proj.projections.add(_4e),i.Proj.projections.add(T4e),i.Proj.projections.add(L4e),i.Proj.projections.add(N4e),i.Proj.projections.add(U4e),i.Proj.projections.add(W4e),i.Proj.projections.add(J4e),i.Proj.projections.add(r6e),i.Proj.projections.add(u6e),i.Proj.projections.add(p6e),i.Proj.projections.add(b6e),i.Proj.projections.add(S6e),i.Proj.projections.add(D6e),i.Proj.projections.add(O6e),i.Proj.projections.add(B6e),i.Proj.projections.add(W6e),i.Proj.projections.add(J6e),i.Proj.projections.add(r8e),i.Proj.projections.add(l8e),i.Proj.projections.add(f8e)}go.defaultDatum="WGS84";go.Proj=Nc;go.WGS84=new go.Proj("WGS84");go.Point=Ty;go.toPoint=zve;go.defs=_a;go.nadgrid=yNe;go.transform=DS;go.mgrs=INe;go.version="__VERSION__";p8e(go);var m8e="Expected a function",Phe=NaN,g8e="[object Symbol]",y8e=/^\s+|\s+$/g,v8e=/^[-+]0x[0-9a-f]+$/i,b8e=/^0b[01]+$/i,_8e=/^0o[0-7]+$/i,x8e=parseInt,w8e=typeof Rn=="object"&&Rn&&Rn.Object===Object&&Rn,E8e=typeof self=="object"&&self&&self.Object===Object&&self,S8e=w8e||E8e||Function("return this")(),C8e=Object.prototype,T8e=C8e.toString,A8e=Math.max,k8e=Math.min,_k=function(){return S8e.Date.now()};function D8e(i,e,t){var r,n,s,o,a,l,u=0,c=!1,h=!1,d=!0;if(typeof i!="function")throw new TypeError(m8e);e=Fhe(e)||0,uM(t)&&(c=!!t.leading,h="maxWait"in t,s=h?A8e(Fhe(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function p(D){var M=r,A=n;return r=n=void 0,u=D,o=i.apply(A,M),o}function m(D){return u=D,a=setTimeout(b,e),c?p(D):o}function g(D){var M=D-l,A=D-u,I=e-M;return h?k8e(I,s-A):I}function v(D){var M=D-l,A=D-u;return l===void 0||M>=e||M<0||h&&A>=s}function b(){var D=_k();if(v(D))return _(D);a=setTimeout(b,g(D))}function _(D){return a=void 0,d&&r?p(D):(r=n=void 0,o)}function E(){a!==void 0&&clearTimeout(a),u=0,r=l=n=a=void 0}function C(){return a===void 0?o:_(_k())}function T(){var D=_k(),M=v(D);if(r=arguments,n=this,l=D,M){if(a===void 0)return m(l);if(h)return a=setTimeout(b,e),p(l)}return a===void 0&&(a=setTimeout(b,e)),o}return T.cancel=E,T.flush=C,T}function uM(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function M8e(i){return!!i&&typeof i=="object"}function L8e(i){return typeof i=="symbol"||M8e(i)&&T8e.call(i)==g8e}function Fhe(i){if(typeof i=="number")return i;if(L8e(i))return Phe;if(uM(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=uM(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=i.replace(y8e,"");var t=b8e.test(i);return t||_8e.test(i)?x8e(i.slice(2),t?2:8):v8e.test(i)?Phe:+i}var R8e=D8e;const fv=$o(R8e),tbe=DDe`
  .geosearch {
    display: flex;
    flex-direction: row;
    align-items: start;
  }

  .search-container {
    display: flex;
    flex-direction: column;
    align-items: start;
  }
  .hidden {
    display: none;
    pointer-events: none;
  }
  .results-container {
    min-height: 100px;
    width: 332px;
    background: var(--results-bg, #eaf1f5);
    overflow: hidden;
    border-radius: 6px;
    box-shadow: 0px 3px 5px -2px rgba(0, 0, 0, 0.08),
      0px 2px 2px 0px rgba(0, 0, 0, 0.08), 0px 1px 5px 0px rgba(0, 0, 0, 0.08);
    padding: 0;
    margin: 0;
  }
  .results-container.too-short {
    height: 64px;
  }

  .results-container.too-short span {
    color: #00f;
    width: 100%;
    text-align: center;
  }

  input {
    background: var(--input-bg, #c6d4dd);
    color: var(--input-fg, #333);
    height: 48px;
    border-radius: 6px;
    padding: 0 16px;
    min-width: 300px;
    border: none;
    box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.05),
      0px 2px 2px 0px rgba(0, 0, 0, 0.05), 0px 1px 5px 0px rgba(0, 0, 0, 0.05);
  }
  input::before {
    background: url("_data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' color='%23999999' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
    width: 48px;
    height: 48px;
    display: inline-block;
  }
  button {
    height: auto;
    background: var(--button-bg, #004170);
  }

  .geosearch.small button {
    height: var(--button-size, 32px);
    width: var(--button-size, 32px);
    padding: 6px;
  }

  .geosearch.small button .icon {
    min-width: 20px;
    height: 20px;
    transform: translateX(1px);
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
  }

  .geosearch.small button .chevron {
    display: none;
  }

  .geosearch input {
    background: #fff;
  }

  .chevron {
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left%3C/title%3E%3Cpath d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/svg%3E");
    margin-right: 9px;
  }

  .chevron.right {
    transform: rotate(180deg);
    margin-left: 9px;
  }

  .chevron.top {
    transform: rotate(90deg);
    margin-bottom: 9px;
  }

  .chevron.bottom {
    transform: rotate(-90deg);
    margin-top: 9px;
  }

  .chevron.right.active {
    transform: rotate(180deg);
  }

  .search-result {
    padding: 10px;
    border-bottom: 1px solid var(--results-border-color, #aaa);
    color: var(--results-fg, #000);
    cursor: pointer;
    font-size: 0.9rem;
    list-style: none;
  }

  .search-result:hover {
    background: #0001;
  }

  .hint {
    display: flex;
    color: #0008;
    height: 40px;
    width: 100%;
    margin: 30px 0;
    text-align: center;
    justify-content: center;
    flex-direction: row;
    align-items: center;
  }
`;var vy;class I8e extends Lr{constructor(){super();ar(this,vy);this._data=[],this._isListVisible=!1,this._isInputVisible=!1,this._query="",this.for="eox-map",this.listDirection="right",this.resultsDirection="down"}static get properties(){return{_data:{attribute:!1},_isListVisible:{attribute:!1},_isInputVisible:{attribute:!1},_query:{attribute:!1},endpoint:{type:String},for:{type:String},queryParameter:{type:String,default:"q"},button:{type:Boolean},interval:{type:Number,default:200},small:{type:Boolean},label:{type:String},direction:{type:String,attribute:"list-direction"},resultsDirection:{type:String,attribute:"results-direction"},unstyled:{type:Boolean}}}async fetchRemoteData(t){const n=await(await fetch(encodeURI(t))).json();this._data=n.results}async onInput(t){if(this._query=t.target.value,this._query.length==0){this._isListVisible=!1;return}else this._isListVisible=!0;fv(async()=>{if(!(this._query.length<2))if(this.endpoint&&this.endpoint.length>0){const n=`${this.endpoint}${this.endpoint.includes("?")?"&":"?"}${this.queryParameter??"q"}=${this._query}`;await this.fetchRemoteData(n)}else console.error("No endpoint provided for GeoSearch element.")},this.interval)()}onInputBlur(){this._isInputVisible=!1,this._isListVisible=!1,this._query=""}onButtonClick(){this._isInputVisible=!this._isInputVisible,this._isInputVisible&&this.renderRoot.querySelector("#gazetteer").focus()}getFlexDirection(){return this.direction==="up"?"column-reverse":this.direction==="left"?"row-reverse":this.direction==="down"?"column":(this.direction==="right","row")}getResultsDirection(){return this.resultsDirection==="up"?"column-reverse":this.resultsDirection==="left"?"row-reverse":this.resultsDirection==="down"?"column":(this.resultsDirection==="right","row")}getVerticalAlign(){return this.resultsDirection==="up"?"end":"start"}getMarginDirection(t){return t==="up"?"top":t==="left"?"left":t==="down"?"bottom":t==="right"?"right":"row"}handleSelect(t){this._isListVisible=!1,this._query="";const r=_i(this,vy).map.getView().getProjection().getCode();let n=go("EPSG:4326",r,[t.bounds.southwest.lng,t.bounds.southwest.lat]),s=go("EPSG:4326",r,[t.bounds.northeast.lng,t.bounds.northeast.lat]);const o=[n[0],n[1],s[0],s[1]];_i(this,vy).zoomExtent=o,this.dispatchEvent(new CustomEvent("geosearchSelect",t))}firstUpdated(){ko(this,vy,document.querySelector(this.for))}render(){return Qe`
      <style>
        .hidden {
          display: none;
        }
        ${!this.unstyled&&PT}
        ${!this.unstyled&&Dve}
        ${!this.unstyled&&tbe}
      </style>
      <div
        class="geosearch ${this.small?"small":""}"
        style="
            flex-direction: ${this.getFlexDirection()};
            align-items: ${this.getVerticalAlign()};
        "
      >
        <button
          class="${this.button?"":"hidden"} ${this._isInputVisible?"active":""}"
          style="
            margin-${this.getMarginDirection(this.direction)}: 12px;
            flex-direction: ${this.getFlexDirection()};
          "
          @click="${this.onButtonClick}"
        >
          <span class="icon"></span>
          <span
            class="chevron ${this.direction??"right"} ${this._isInputVisible?"active":""}"
          ></span>
          <span
            style="display: ${this.small&&!this.unstyled?"none":"flex"}"
            >${(this.label||this.unstyled)??"Search"}</span
          >
        </button>
        <div
          class="search-container ${this.button?this._isInputVisible?"":"hidden":""}"
          style="flex-direction: ${this.getResultsDirection()};"
        >
          <input
            id="gazetteer"
            type="text"
            placeholder="Type to search"
            .value="${this._query}"
            style="margin-${this.getMarginDirection(this.resultsDirection)}: ${this._isListVisible?12:0}px"
            @input="${this.onInput}"
          />
          <ul class="results-container ${this._isListVisible?"":"hidden"}">
            ${this._query.length<2?Qe`<span class="hint"
                  >Enter at least two characters to search</span
                >`:Qe``}
            ${this._query.length>=2?this._data.map(t=>Qe`
                    <eox-geosearch-item
                      .item="${t}"
                      .onClick="${r=>{this.handleSelect(r)}}"
                      .unstyled=${this.unstyled}
                    />
                  `):Qe``}
          </ul>
        </div>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}vy=new WeakMap;class O8e extends Lr{static get properties(){return{item:{type:Object},onClick:{type:Function},unstyled:{type:Boolean}}}constructor(){super()}render(){return Qe`
      <style>
        ${!this.unstyled&&PT}
        ${!this.unstyled&&tbe}
      </style>
      <li class="search-result" @click="${()=>this.onClick(this.item)}">
        <span class="name">${this.item.formatted}</span>
      </li>
    `}}customElements.define("eox-geosearch",I8e);customElements.define("eox-geosearch-item",O8e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yo=i=>(e,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(i,e)}):customElements.define(i,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const P8e={attribute:!0,type:String,converter:MDe,reflect:!1,hasChanged:LDe},F8e=(i=P8e,e,t)=>{const{kind:r,metadata:n}=t;let s=globalThis.litPropertyMetadata.get(n);if(s===void 0&&globalThis.litPropertyMetadata.set(n,s=new Map),s.set(t.name,i),r==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(r==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+r)};function Pt(i){return(e,t)=>typeof t=="object"?F8e(i,e,t):((r,n,s)=>{const o=n.hasOwnProperty(s);return n.constructor.createProperty(s,o?{...r,wrapped:!0}:r),o?Object.getOwnPropertyDescriptor(n,s):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ds(i){return Pt({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Ka(i,e){if(i!==void 0){let t=0;for(const r of i)yield e(r,t++)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nhe=(i,e,t)=>{const r=new Map;for(let n=e;n<=t;n++)r.set(i[n],n);return r},kR=IT(class extends OT{constructor(i){if(super(i),i.type!==ff.CHILD)throw Error("repeat() can only be used in text expressions")}dt(i,e,t){let r;t===void 0?t=e:e!==void 0&&(r=e);const n=[],s=[];let o=0;for(const a of i)n[o]=r?r(a,o):o,s[o]=t(a,o),o++;return{values:s,keys:n}}render(i,e,t){return this.dt(i,e,t).values}update(i,[e,t,r]){const n=IDe(i),{values:s,keys:o}=this.dt(e,t,r);if(!Array.isArray(n))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let u,c,h=0,d=n.length-1,p=0,m=s.length-1;for(;h<=d&&p<=m;)if(n[h]===null)h++;else if(n[d]===null)d--;else if(a[h]===o[p])l[p]=Xp(n[h],s[p]),h++,p++;else if(a[d]===o[m])l[m]=Xp(n[d],s[m]),d--,m--;else if(a[h]===o[m])l[m]=Xp(n[h],s[m]),_1(i,l[m+1],n[h]),h++,m--;else if(a[d]===o[p])l[p]=Xp(n[d],s[p]),_1(i,n[h],n[d]),d--,p++;else if(u===void 0&&(u=Nhe(o,p,m),c=Nhe(a,h,d)),u.has(a[h]))if(u.has(a[d])){const g=c.get(o[p]),v=g!==void 0?n[g]:null;if(v===null){const b=_1(i,n[h]);Xp(b,s[p]),l[p]=b}else l[p]=Xp(v,s[p]),_1(i,n[h],v),n[g]=null;p++}else KA(n[d]),d--;else KA(n[h]),h++;for(;p<=m;){const g=_1(i,l[m+1]);Xp(g,s[p]),l[p++]=g}for(;h<=d;){const g=n[h++];g!==null&&KA(g)}return this.ut=o,WL(i,l),O0}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let cM=class extends OT{constructor(e){if(super(e),this.it=mr,e.type!==ff.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===mr||e==null)return this._t=void 0,this.it=e;if(e===O0)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}};cM.directiveName="unsafeHTML",cM.resultType=1;const _c=IT(cM);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ibe=Symbol.for(""),N8e=i=>{if((i==null?void 0:i.r)===ibe)return i==null?void 0:i._$litStatic$},Ac=i=>({_$litStatic$:i,r:ibe}),$he=new Map,$8e=i=>(e,...t)=>{const r=t.length;let n,s;const o=[],a=[];let l,u=0,c=!1;for(;u<r;){for(l=e[u];u<r&&(s=t[u],(n=N8e(s))!==void 0);)l+=n+e[++u],c=!0;u!==r&&a.push(s),o.push(l),u++}if(u===r&&o.push(e[r]),c){const h=o.join("$$lit$$");(e=$he.get(h))===void 0&&(o.raw=o,$he.set(h,e=o)),t=a}return i(e,...t)},sy=$8e(Qe);(()=>{var i=Object.defineProperty,e=Math.pow,t=(ye,ke,rt)=>ke in ye?i(ye,ke,{enumerable:!0,configurable:!0,writable:!0,value:rt}):ye[ke]=rt,r=(ye,ke,rt)=>(t(ye,typeof ke!="symbol"?ke+"":ke,rt),rt),n=(ye,ke)=>` ${ke&&ke.length>0?ke.map(rt=>`<link rel="stylesheet" href="${rt}" />`).join(""):""} <style> ${ye} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,s=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",u="range-dragging",c="data",h="min",d="max",p="step",m="round",g="type",v="theme",b="rtl",_="btt",E="disabled",C="keyboard-disabled",T="mousewheel-disabled",D="slider-width",M="slider-height",A="slider-radius",I="slider-bg",P="slider-bg-hover",U="slider-bg-fill",K="pointer-width",L="pointer-height",F="pointer-radius",$="pointer-bg",H="pointer-bg-hover",V="pointer-bg-focus",J="pointer-shadow",ee="pointer-shadow-hover",ie="pointer-shadow-focus",de="pointer-border",te="pointer-border-hover",z="pointer-border-focus",ne="animate-onclick",ve="css-links",$e="vertical",Xe="horizontal",ot=(ye,ke,rt,Ze,bt)=>{let ti=ke-ye;return ti===0?rt:(Ze-rt)*(bt-ye)/ti+rt},Be=ye=>!isNaN(parseFloat(ye))&&isFinite(ye),He=(ye,ke)=>Be(ye)?Number(ye):ke,st=(ye,ke)=>ke===0?0:Math.round(ye/ke)*ke,xt=(ye,ke=1/0)=>{if(ke===1/0)return ye;let rt=e(10,ke);return Math.round(ye*rt)/rt},kt=ye=>ye==null?!1:typeof ye=="boolean"?ye:ye.trim().toLowerCase()==="true",Tt=(ye,ke)=>{ye.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:ke}}))},Ei=(ye,ke)=>{ye.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:ke}}))},si=(ye,ke)=>{ye.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:ke}}))},ur=(ye,ke)=>{ye.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:ke}}))},Ve=(ye,ke)=>{if(!ke||ke.length<=0)return;let rt=ke.map(bt=>Be(bt)?He(bt,bt):bt),Ze={values:rt||[]};Ze.value=rt[0],Ze.value0=rt[0],Ze.value1=rt[0];for(let bt=1;bt<rt.length;bt++)Ze[`value${bt+1}`]=rt[bt];ye.dispatchEvent(new CustomEvent("change",{detail:Ze}))},fe=(ye,ke,rt)=>{let Ze=0,bt,ti,di,vt,Ke=!1,oi=(dt,Xi,un,Sr,Or,gr)=>{let Ft=Ze;un!==void 0&&dt>un&&(dt=un),Xi!==void 0&&dt<Xi&&(dt=Xi),Ze=dt;let _n=Ze;return(Sr===$e&&gr||Sr===Xe&&Or)&&(_n=100-_n),Sr===$e?ke.style.top=`${_n}%`:ke.style.left=`${_n}%`,Ft!==Ze},gi=dt=>dt===ke||ke.contains(dt),Ot=(dt,Xi,un,Sr)=>{bt=dt,ti=Xi,di=un,vt=Sr},jt=dt=>{Ke=dt,ke.classList.toggle("disabled",Ke),Ke?ke.setAttribute("aria-disabled","true"):ke.hasAttribute("aria-disabled")&&ke.removeAttribute("aria-disabled")},Er=(dt,Xi)=>{Xi==null?ke.removeAttribute(dt):ke.setAttribute(dt,Xi)},mn=dt=>ke.getAttribute(dt),ni=dt=>{if(!Ke){switch(dt.key){case"ArrowLeft":{dt.preventDefault(),typeof bt=="function"&&bt(rt);break}case"ArrowRight":{dt.preventDefault(),typeof ti=="function"&&ti(rt);break}case"ArrowUp":{dt.preventDefault(),typeof di=="function"&&di(rt);break}case"ArrowDown":{dt.preventDefault(),typeof vt=="function"&&vt(rt);break}}ur(ye,dt)}},qe=()=>{Ke||Tt(ye,ke)};return ke.className=`pointer pointer-${rt}`,ke.addEventListener("keydown",ni),ke.addEventListener("click",qe),{$pointer:ke,get percent(){return Ze},get disabled(){return Ke},set disabled(dt){jt(dt)},updatePosition:oi,isClicked:gi,setCallbacks:Ot,setAttr:Er,getAttr:mn,destroy:()=>{ke.removeEventListener("keydown",ni),ke.removeEventListener("click",qe),ke.remove()}}},oe=ye=>{if(ye==null)return;if(Array.isArray(ye))return ye;if(ye.trim()==="")return;let ke=ye.split(","),rt=[],Ze=!0;for(let bt=0;bt<ke.length;bt++){let ti=ke[bt].trim();ti!==""&&(rt.push(ti),Be(ti)||(Ze=!1))}return Ze?rt.map(bt=>Number(bt)):rt},se=(ye,ke)=>ke?ke.findIndex(rt=>rt===ye||rt.toString().trim()===ye.toString().trim()):-1,pe=ye=>({updatePosition:(ke,rt,Ze,bt)=>{if(rt.length<=0)return;let ti=rt.length===1,di=rt[0],vt=rt[rt.length-1];ke===$e?(ye.style.removeProperty("width"),ye.style.removeProperty("right"),ye.style.removeProperty("left"),ti?ye.style.height=`${di}%`:ye.style.height=`${Math.abs(di-vt)}%`,bt?(ye.style.bottom="0%",ti?ye.style.top="auto":ye.style.top=`${Math.min(100-vt,100-di)}%`):(ye.style.bottom="auto",ti?ye.style.top="0%":ye.style.top=`${Math.min(di,vt)}%`)):(ye.style.removeProperty("height"),ye.style.removeProperty("top"),ye.style.removeProperty("bottom"),ti?ye.style.width=`${di}%`:ye.style.width=`${Math.abs(di-vt)}%`,Ze?(ye.style.right="0%",ti?ye.style.left="auto":ye.style.left=`${Math.min(100-vt,100-di)}%`):(ye.style.right="auto",ti?ye.style.left="0%":ye.style.left=`${Math.min(di,vt)}%`))}}),R="--animate-onclick",j="--width",Z="--height",Q="--panel-bg-border-radius",ge="--panel-bg",be="--panel-bg-hover",Ce="--panel-bg-fill",G="--pointer-width",re="--pointer-height",he="--pointer-border-radius",ce="--pointer-bg",Te="--pointer-bg-hover",Ae="--pointer-bg-focus",Se="--pointer-shadow",De="--pointer-shadow-hover",Oe="--pointer-shadow-focus",Ge="--pointer-border",et="--pointer-border-hover",ht="--pointer-border-focus",Ut=(ye,ke,rt)=>{let Ze=new Map;for(let bt of ye.attributes){let ti=bt.nodeName.trim().toLowerCase();if(!ke.test(ti))continue;let di=ti.replace(/\D/g,"").trim(),vt=di===""||di==="0"||di==="1"?0:He(di,0)-1,Ke=rt&&typeof rt=="function"?rt(bt.value):bt.value;Ze.set(vt,Ke)}return Ze},gt=ye=>{if(!ye)return null;let ke=ye.getAttribute(ve);if(!ke)return null;let rt=ke.split(";"),Ze=[];for(let bt of rt)bt.trim()!==""&&Ze.push(bt.trim());return Ze},qt=[[j,D,"sliderWidth",null],[Z,M,"sliderHeight",null],[Q,A,"sliderRadius",null],[ge,I,"sliderBg",null],[be,P,"sliderBgHover",null],[Ce,U,"sliderBgFill",null],[G,K,"pointer#Width",/^pointer([0-9]*)-width$/],[re,L,"pointer#Height",/^pointer([0-9]*)-height$/],[he,F,"pointer#Radius",/^pointer([0-9]*)-radius$/],[ce,$,"pointer#Bg",/^pointer([0-9]*)-bg$/],[Te,H,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Ae,V,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Se,J,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[De,ee,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Oe,ie,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[Ge,de,"pointer#Border",/^pointer([0-9]*)-border$/],[et,te,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[ht,z,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],Kt=(ye,ke,rt)=>{let Ze=null,bt=[],ti=new Map,di=(ni,qe=ke)=>{let dt=[...qe.classList];for(let Xi of dt)Xi.startsWith(ni)&&ke.classList.remove(Xi)},vt=()=>{di("shape");let ni=ke.querySelectorAll(".pointer");for(let qe of ni)di("shape",qe)},Ke=ni=>{Ze=ni,di("theme-"),typeof ni=="string"&&ke.classList.add(`theme-${ni}`)},oi=()=>{if(vt(),!(bt.length<=0)){ke.classList.add("shape",`shape-${bt[0]}`);for(let ni=1;ni<bt.length;ni++){let qe=bt[ni];if(!qe)continue;let dt=ke.querySelector(`.pointer-${ni}`);!dt||dt.classList.add("shape",`shape-${qe}`)}}},gi=(ni,qe)=>{bt[ni]=qe,oi()},Ot=()=>{vt();let ni=Ut(ye,/^pointer([0-9]*)-shape$/);if(!(ni.size<=0)){for(let qe of ni){let dt=qe[0];bt[dt]=qe[1]}oi()}},jt=(ni,qe)=>`${ni}-${qe}`,Er=(ni,qe,dt)=>{let Xi=rt[dt];if(!Xi)return;let un=dt===0?ke:Xi.$pointer;if(qe==null){ti.has(jt(ni,dt))&&ti.delete(jt(ni,dt)),un.style.removeProperty(ni);return}ti.set(jt(ni,dt),qe),un.style.setProperty(ni,qe)},mn=(ni,qe)=>ti.get(jt(ni,qe));return(()=>{for(let ni of qt){let[qe,dt,Xi,un]=ni;if(un){let Or=Ut(ye,un);for(let gr of Or){let Ft=gr[0],_n=gr[1];Er(qe,_n,Ft)}}else{let Or=ye.getAttribute(dt);Er(qe,Or,0)}let Sr=[];if(Xi.indexOf("#")===-1)Sr.push([Xi,0]);else{Sr.push([Xi.replace("#",""),0]),Sr.push([Xi.replace("#","0"),0]),Sr.push([Xi.replace("#","1"),0]);for(let Or=1;Or<rt.length;Or++)Sr.push([Xi.replace("#",(Or+1).toString()),Or])}for(let Or of Sr)try{let gr=Or[0],Ft=Or[1];Object.prototype.hasOwnProperty.call(ye,gr)||Object.defineProperty(ye,gr,{get(){return mn(qe,Ft)},set:_n=>{Er(qe,_n,Ft)}})}catch(gr){console.error(gr)}}Ke(ye.getAttribute(v)),Ot()})(),{setStyle:Er,getStyle:mn,get theme(){return Ze},set theme(ni){Ke(ni)},get pointerShapes(){return bt},setPointerShape:gi}},It="animate-on-click",Vt="range-dragging",Yt=(ye,ke,rt,Ze)=>{let bt=[],ti=gi=>{for(let Ot of bt)Ot.update&&typeof Ot.update=="function"&&Ot.update(gi)},di=()=>{for(let gi of bt)gi.destroy&&typeof gi.destroy=="function"&&gi.destroy()},vt=(gi,Ot)=>{for(let jt of bt)jt.onAttrChange&&typeof jt.onAttrChange=="function"&&jt.onAttrChange(gi,Ot)},Ke=gi=>{if(gi.gettersAndSetters){for(let Ot of gi.gettersAndSetters)if(!(!Ot.name||!Ot.attributes))try{Object.prototype.hasOwnProperty.call(ye,Ot.name)||Object.defineProperty(ye,Ot.name,Ot.attributes)}catch(jt){console.error("defineSettersGetters error:",jt)}}},oi=gi=>{var Ot;if(!gi.css)return;let jt=(Ot=ye.shadowRoot)==null?void 0:Ot.querySelector("style");!jt||(jt.innerHTML+=gi.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let gi of window.tcRangeSliderPlugins){let Ot=gi();bt.push(Ot),Ot.init&&typeof Ot.init=="function"&&(Ot.init(ye,ke,rt,Ze),Ke(Ot),oi(Ot))}},update:ti,onAttrChange:vt,destroy:di}},Yi=10,vr=20,Jr=(ye,ke)=>{let rt=new Map,Ze=/^value([0-9]*)$/;for(let vt of ye.attributes){let Ke=vt.nodeName.trim().toLowerCase();if(!Ze.test(Ke))continue;let oi=Ke.replace("value","").trim(),gi=oi===""||oi==="0"||oi==="1"?0:He(oi,0)-1,Ot=Be(vt.value)?He(vt.value,0):vt.value;rt.set(gi,Ot)}let bt=Math.max(...Array.from(rt.keys())),ti=[];ti.push([fe(ye,ke,0),rt.get(0)]);let di=ke;for(let vt=1;vt<=bt;vt++){let Ke=ke.cloneNode(!0);di.after(Ke),di=Ke,ti.push([fe(ye,Ke,vt),rt.get(vt)])}return ti},Rr=(ye,ke,rt,Ze,bt,ti,di)=>{try{Object.defineProperty(ye,Ze,{configurable:!0,get(){if(!ke)return;let vt=ke.pointers[rt];if(!vt)return;let Ke=ke.getTextValue(vt.percent);return Be(Ke)?He(Ke,Ke):Ke},set:vt=>{ke.pointers[rt]?ke==null||ke.setValue(vt,rt):ke==null||ke.addPointer(vt)}}),Object.defineProperty(ye,bt,{configurable:!0,get(){var vt,Ke;return(Ke=(vt=ke==null?void 0:ke.pointers[rt])==null?void 0:vt.getAttr("aria-label"))!=null?Ke:void 0},set:vt=>{!ke||ke.setAriaLabel(rt,vt)}}),Object.defineProperty(ye,ti,{configurable:!0,get(){var vt,Ke;return(Ke=(vt=ke==null?void 0:ke.styles)==null?void 0:vt.pointerShapes[rt])!=null?Ke:null},set:vt=>{!ke||!ke.styles||ke.styles.setPointerShape(rt,vt)}}),Object.defineProperty(ye,di,{configurable:!0,get(){var vt;return(vt=ke==null?void 0:ke.pointers[rt].disabled)!=null?vt:!1},set:vt=>{if(!ke)return;let Ke=ke==null?void 0:ke.pointers[rt];!Ke||(Ke.disabled=vt)}})}catch(vt){console.error(vt)}},cr=(ye,ke)=>{let rt=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let Ze=2;Ze<Yi;Ze++)rt.push([`value${Ze}`,`ariaLabel${Ze}`,`pointer${Ze}Shape`,`pointer${Ze}Disabled`,Ze-1]);for(let Ze of rt)Rr(ye,ke,Ze[4],Ze[0],Ze[1],Ze[2],Ze[3])},Jt=(ye,ke,rt)=>{var Ze;let bt=(Ze=rt.shadowRoot)==null?void 0:Ze.querySelector(".container");if(bt)for(let ti of ye)ke?bt.prepend(ti.$pointer):bt.append(ti.$pointer)},ir=(ye,ke)=>{if(!(!ke||ye.length<=1)){for(let rt of ye)rt.$pointer.style.zIndex=vr.toString();ke.$pointer.style.zIndex=(vr*2).toString()}},Ir=0,hi=100,Fn=2,rr="0.3s",Nn=(ye,ke,rt)=>{let Ze=rt.map(Re=>Re[0]),bt=null,ti=null,di=null,vt=null,Ke=Ir,oi=hi,gi,Ot,jt=Xe,Er=Fn,mn=!1,ni=!1,qe=!1,dt=0,Xi=1/0,un=!1,Sr,Or,gr=!1,Ft=!1,_n=!1,Kn=rr,xn=[],_o=Re=>{gr||(Re.preventDefault&&Re.preventDefault(),xs(Re),window.addEventListener("mousemove",xs),window.addEventListener("mouseup",Ho),Ei(ye,Re))},Ho=Re=>{gr||(Sr=void 0,Or=void 0,window.removeEventListener("mousemove",xs),window.removeEventListener("mouseup",Ho),Kn&&ke.classList.add(It),si(ye,Re))},xo=(Re,pt)=>{if(Ze.length<=0)return;if(Ze.length===1)return Ze[0].isClicked(Re)&&Kn&&ke.classList.remove(It),Ze[0];let Wt=Ms(Re);if(un){let $i=pt,hs=Jn($i);hs!==void 0&&($i=st($i,hs)),Wt?(Sr=$i,Or=0,Kn&&ke.classList.remove(It)):Sr!==void 0&&(Or=$i-Sr,Sr=$i)}if(!js(Re)&&!Wt){for(let $i of Ze)if(!(!$i.isClicked(Re)||$i.disabled))return Kn&&ke.classList.remove(It),$i;for(let $i of Ze)if(bt===$i)return $i}let _r=1/0,Qr=null;for(let $i of Ze){if($i.disabled)continue;let hs=Math.abs(pt-$i.percent);hs<_r&&(_r=hs,Qr=$i)}return Qr},hl=()=>Ze.findIndex(Re=>bt===Re&&!Re.disabled),xs=Re=>{let pt;if(jt===$e){let{height:_r,top:Qr}=ke.getBoundingClientRect(),$i=Re.type.indexOf("mouse")!==-1?Re.clientY:Re.touches[0].clientY;pt=Math.min(Math.max(0,$i-Qr),_r)*100/_r}else{let{width:_r,left:Qr}=ke.getBoundingClientRect(),$i=Re.type.indexOf("mouse")!==-1?Re.clientX:Re.touches[0].clientX;pt=Math.min(Math.max(0,$i-Qr),_r)*100/_r}if((mn||ni)&&(pt=100-pt),bt=xo(Re.target,pt),bt&&ir(Ze,bt),un&&Ze.length>1&&Or!==void 0){let _r=Ze[0],Qr=Ze[Ze.length-1],$i=_r.percent+Or<0,hs=Qr.percent+Or>100;if($i||hs)return;for(let nc=0;nc<Ze.length;nc++)br(nc,Ze[nc].percent+Or);return}let Wt=hl();Wt!==-1&&(br(Wt,pt),bt==null||bt.$pointer.focus())},Vo=Re=>{if(gr||document.activeElement!==ye||bt!=null&&bt.disabled)return;Re.stopPropagation(),Re.preventDefault();let pt=Re.deltaY<0,Wt=mn||ni,_r=pt?!Wt:Wt,Qr=hl();Qr!==-1&&(_r?eo(Qr,Ze[Qr].percent):zs(Qr,Ze[Qr].percent))},ma=Re=>{gr||Ft||(jt===$e?ni?br(Re,100):br(Re,0):mn?zs(Re,Ze[Re].percent):eo(Re,Ze[Re].percent))},Pr=Re=>{gr||Ft||(jt===$e?ni?br(Re,0):br(Re,100):mn?eo(Re,Ze[Re].percent):zs(Re,Ze[Re].percent))},wo=Re=>{gr||Ft||(jt===$e?ni?zs(Re,Ze[Re].percent):eo(Re,Ze[Re].percent):mn?br(Re,100):br(Re,0))},jl=Re=>{gr||Ft||(jt===$e?ni?eo(Re,Ze[Re].percent):zs(Re,Ze[Re].percent):mn?br(Re,0):br(Re,100))},js=Re=>Re.classList.contains("panel"),Ms=Re=>Re.classList.contains("panel-fill"),eo=(Re,pt)=>{if(pt===void 0)return;let Wt=Jn(pt);Wt==null&&(Wt=1),pt-=Wt,pt<0&&(pt=0),br(Re,pt)},zs=(Re,pt)=>{if(pt===void 0)return;let Wt=Jn(pt);Wt==null&&(Wt=1),pt+=Wt,pt>100&&(pt=100),br(Re,pt)},Wo=()=>{!vt||vt.update({percents:pl(),values:So(),$pointers:Qn(),min:La(),max:Ul(),data:Rt(),step:Ma(),round:me(),type:X(),textMin:Eo(),textMax:io(),rightToLeft:Gt(),bottomToTop:Fi(),pointersOverlap:$n(),pointersMinDistance:Ne(),pointersMaxDistance:yt(),rangeDragging:es(),disabled:hr(),keyboardDisabled:Br(),mousewheelDisabled:Si()})},dl=()=>{Wo()},to=Re=>{if(!(qe||Ze.length<=1||oi===Ke))if(Re===0){let pt=Xi*100/(oi-Ke);return Math.max(0,Ze[Re+1].percent-pt)}else{let pt=dt*100/(oi-Ke);return Math.min(Ze[Re-1].percent+pt,100)}},zl=Re=>{if(!(qe||Ze.length<=1||oi===Ke))if(Re===Ze.length-1){let pt=Xi*100/(oi-Ke);return Math.min(Ze[Re-1].percent+pt,100)}else{let pt=dt*100/(oi-Ke);return Math.max(0,Ze[Re+1].percent-pt)}},Jn=Re=>{let pt;if(typeof gi=="function"){let Wt=ot(0,100,Ke,oi,Re);pt=gi(Wt,Re)}else pt=gi;if(Be(pt)){let Wt=oi-Ke;return pt=Wt===0?0:pt*100/Wt,pt}},Yn=Re=>{if(Re===void 0)return;let pt=ot(0,100,Ke,oi,Re);return Ot!==void 0?Ot[Math.round(pt)]:xt(pt,Er)},Eo=()=>Ot!==void 0?Ot[Ke]:Ke,io=()=>Ot!==void 0?Ot[oi]:oi,Ma=()=>gi,fl=Re=>{var pt;return Re<=0||qe?Eo():(pt=Yn(Ze[Re-1].percent))!=null?pt:""},ls=Re=>{var pt;return Ze.length<=1||Re>=Ze.length-1||qe?io():(pt=Yn(Ze[Re+1].percent))!=null?pt:""},pl=()=>Ze.map(Re=>Re.percent),So=()=>Ze.map(Re=>Yn(Re.percent)),Qn=()=>Ze.map(Re=>Re.$pointer),La=()=>Ke,Ul=()=>oi,Rt=()=>Ot,X=()=>jt,me=()=>Er,Ne=()=>dt,yt=()=>Xi,pi=Re=>xn[Re],Gt=()=>mn,Fi=()=>ni,hr=()=>gr,Br=()=>Ft,Si=()=>_n,$n=()=>qe,es=()=>un,br=(Re,pt)=>{if(pt===void 0)return;let Wt=Jn(pt);Wt!==void 0&&(pt=st(pt,Wt));let _r=Ze[Re];if(!_r)return;let Qr=_r.updatePosition(pt,to(Re),zl(Re),jt,mn,ni);ti==null||ti.updatePosition(jt,Ze.map($i=>$i.percent),mn,ni),Wo();for(let $i of Ze){let hs=Yn($i.percent);hs!==void 0&&($i.setAttr("aria-valuenow",hs.toString()),$i.setAttr("aria-valuetext",hs.toString()))}Yo(),Qr&&Ve(ye,Ze.map($i=>Yn($i.percent)))},gn=()=>{for(let Re=0;Re<Ze.length;Re++)br(Re,Ze[Re].percent)},Us=(Re,pt)=>{Ke=Ot!==void 0?0:He(Re,Ir),oi=Ot!==void 0?Ot.length-1:He(pt,hi),us(Ke),cs(oi)},Yo=()=>{var Re,pt;for(let Wt=0;Wt<Ze.length;Wt++){let _r=Ze[Wt];_r.setAttr("aria-valuemin",((Re=fl(Wt))!=null?Re:"").toString()),_r.setAttr("aria-valuemax",((pt=ls(Wt))!=null?pt:"").toString())}},us=Re=>{Ke=He(Re,Ir),Ke>oi&&(oi=Ke+hi),gn()},cs=Re=>{oi=He(Re,hi),oi<Ke&&(oi=Ke+hi),gn()},Ra=Re=>{qe=!0;for(let pt=0;pt<Re.length;pt++)Wr(Re[pt],pt);qe=!1;for(let pt=0;pt<Re.length;pt++)Wr(Re[pt],pt)},Wr=(Re,pt)=>{let Wt;Ot!==void 0?(Wt=Re==null?0:se(Re,Ot),Wt===-1&&(Wt=0)):(Wt=He(Re,Ke),Wt<Ke&&(Wt=Ke),Wt>oi&&(Wt=oi));let _r=ot(Ke,oi,0,100,Wt);br(pt,_r)},Ia=Re=>{if(Re==null){gi=void 0;return}if(typeof Re=="function"){gi=Re,gn();return}if(Be(Re)){gi=He(Re,1);let pt=Math.abs(oi-Ke);gi>pt&&(gi=void 0),gn();return}gi=void 0},oh=Re=>{qe=Re,gn()},Gl=Re=>{(!Be(Re)||Re<0)&&(Re=0),dt=Re},ah=Re=>{(!Be(Re)||Re<0)&&(Re=1/0),Xi=Re},Sd=Re=>{gr=Re,ke.classList.toggle("disabled",gr),gr?ke.setAttribute("aria-disabled","true"):ke.hasAttribute("aria-disabled")&&ke.removeAttribute("aria-disabled")},lh=Re=>{Ft=Re},Cd=Re=>{_n=Re,_n?document.removeEventListener("wheel",Vo):document.addEventListener("wheel",Vo,{passive:!1})},Td=Re=>{if(Re==null){Ot=void 0;return}if(Ot=oe(Re),Ot===void 0||Ot.length<=0){Ot=void 0;return}us(0),cs(Ot.length-1),gi===void 0&&Ia(1)},Ad=Re=>{var pt;typeof Re=="string"?jt=Re.trim().toLowerCase()===$e?$e:Xe:jt=Xe;let Wt=(pt=ye.shadowRoot)==null?void 0:pt.querySelector(".range-slider-box");if(!Wt)return;Wt.className=`range-slider-box type-${jt}`,gn();let _r=jt===$e?"vertical":"horizontal";for(let Qr of Ze)Qr.setAttr("aria-orientation",_r)},uh=Re=>{mn=Re,Ze.length>1&&Jt(Ze,mn,ye),gn(),Wo()},ch=Re=>{ni=Re,Ze.length>1&&Jt(Ze,ni,ye),gn(),Wo()},kd=Re=>{Er=He(Re,Fn),Er<0&&(Er=Fn),Wo()},vu=Re=>{Re==null||Re.toString().trim().toLowerCase()==="false"?(Kn=void 0,ke.style.removeProperty(R),ke.classList.remove(It)):(Kn=Re.toString(),ke.style.setProperty(R,Kn),ke.classList.add(It))},ga=(Re,pt)=>{let Wt=Ze[Re];!Wt||(Wt.setAttr("aria-label",pt),xn[Re]=pt)},ql=Re=>{if(Sr=void 0,Ze.length<=1){un=!1,ke.classList.remove(Vt);return}un=Re,ke.classList.toggle(Vt,un)},Dd=()=>{Sd(kt(ye.getAttribute(E))),Ft=kt(ye.getAttribute(C)),_n=kt(ye.getAttribute(T));let Re=Ut(ye,/^pointer([0-9]*)-disabled$/,pt=>kt(pt));for(let pt of Re){let Wt=pt[0];!Ze[Wt]||(Ze[Wt].disabled=pt[1])}},yp=()=>{let Re=Ut(ye,/^aria-label([0-9]*)$/);for(let pt of Re){let Wt=pt[0];ga(Wt,pt[1])}},ya=Re=>{let pt=Ze.length,Wt=Ze[pt-1].$pointer,_r=Wt.cloneNode(!0);Wt.after(_r);let Qr=fe(ye,_r,pt);return Qr.setCallbacks(ma,Pr,wo,jl),Ze.push(Qr),Wr(Re,pt),gn(),Wo(),pt},Hl=()=>{let Re=Ze.length,pt=Ze[Re-1];return pt?(pt.destroy(),Ze.pop(),Ze.length<=1&&ql(!1),gn(),Wo(),Re-1):-1};return(()=>{var Re,pt;for(let _r of Ze)_r.setCallbacks(ma,Pr,wo,jl);let Wt=(Re=ye.shadowRoot)==null?void 0:Re.querySelector(".panel-fill");Wt&&(ti=pe(Wt)),Ad(ye.getAttribute(g)),uh(kt(ye.getAttribute(b))),ch(kt(ye.getAttribute(_))),Us(ye.getAttribute(h),ye.getAttribute(d)),Ia(ye.getAttribute(p)),Td(ye.getAttribute(c)),Ra(rt.map(_r=>_r[1])),oh(kt(ye.getAttribute(o))),Gl(He(ye.getAttribute(a),0)),ah(He(ye.getAttribute(l),1/0)),ql(kt(ye.getAttribute(u))),kd(He(ye.getAttribute(m),Fn)),Dd(),yp(),di=Kt(ye,ke,Ze),vu((pt=ye.getAttribute(ne))!=null?pt:rr),ke.addEventListener("mousedown",_o),ke.addEventListener("mouseup",Ho),ke.addEventListener("touchmove",xs),ke.addEventListener("touchstart",xs),_n||document.addEventListener("wheel",Vo,{passive:!1}),vt=Yt(ye,dl,{setValues:Ra,setMin:us,setMax:cs,setStep:Ia,setPointersOverlap:oh,setPointersMinDistance:Gl,setPointersMaxDistance:ah,setDisabled:Sd,setType:Ad,setRightToLeft:uh,setBottomToTop:ch,setRound:kd,setKeyboardDisabled:lh,setMousewheelDisabled:Cd,setRangeDragging:ql,setData:Td},{getPercents:pl,getValues:So,getPointerElements:Qn,getMin:La,getMax:Ul,getStep:Ma,getData:Rt,getType:X,getRound:me,getTextMin:Eo,getTextMax:io,isRightToLeft:Gt,isBottomToTop:Fi,isDisabled:hr,isKeyboardDisabled:Br,isMousewheelDisabled:Si,isPointersOverlap:$n,isRangeDraggingEnabled:es,getPointersMinDistance:Ne,getPointersMaxDistance:yt}),vt.init()})(),{get pointers(){return Ze},get styles(){return di},get pluginsManager(){return vt},get min(){return Eo()},get max(){return io()},get step(){return Ma()},get pointersOverlap(){return $n()},set pointersOverlap(Re){oh(Re)},get pointersMinDistance(){return Ne()},set pointersMinDistance(Re){Gl(Re)},get pointersMaxDistance(){return yt()},set pointersMaxDistance(Re){ah(Re)},get disabled(){return hr()},set disabled(Re){Sd(Re)},get data(){return Rt()},get type(){return X()},set type(Re){Ad(Re)},get rightToLeft(){return Gt()},set rightToLeft(Re){uh(Re)},get bottomToTop(){return Fi()},set bottomToTop(Re){ch(Re)},get round(){return me()},set round(Re){kd(Re)},get animateOnClick(){return Kn},set animateOnClick(Re){vu(Re)},get keyboardDisabled(){return Br()},set keyboardDisabled(Re){lh(Re)},get mousewheelDisabled(){return Si()},set mousewheelDisabled(Re){Cd(Re)},get rangeDragging(){return es()},set rangeDragging(Re){ql(Re)},setMin:us,setMax:cs,setValue:Wr,setStep:Ia,setData:Td,getTextValue:Yn,setAriaLabel:ga,getAriaLabel:pi,addPointer:ya,removePointer:Hl,destroy:()=>{ke.removeEventListener("mousedown",_o),ke.removeEventListener("mouseup",Ho),ke.removeEventListener("touchmove",xs),ke.removeEventListener("touchstart",xs),document.removeEventListener("wheel",Vo);for(let Re of Ze)Re.destroy();vt==null||vt.destroy()}}},nr=(ye,ke,rt)=>{let Ze=qt.find(([vt,Ke,oi,gi])=>Ke.replace("#","")===ke.replace(/\d+/g,""));if(Ze&&ye.styles){let[vt,Ke,oi,gi]=Ze,Ot=ke.replace(/\D/g,"").trim(),jt=Ot===""||Ot==="0"||Ot==="1"?0:He(Ot,0)-1;ye.styles.setStyle(vt,rt,jt);return}switch(ye&&ye.pluginsManager&&ye.pluginsManager.onAttrChange(ke,rt),ke){case h:{ye.setMin(rt);break}case d:{ye.setMax(rt);break}case p:{ye.setStep(rt);break}case o:{ye.pointersOverlap=kt(rt);break}case a:{ye.pointersMinDistance=He(rt,0);break}case u:{ye.rangeDragging=kt(rt);break}case l:{ye.pointersMaxDistance=He(rt,1/0);break}case E:{ye.disabled=kt(rt);break}case C:{ye.keyboardDisabled=kt(rt);break}case T:{ye.mousewheelDisabled=kt(rt);break}case c:{ye.setData(rt);break}case g:{ye.type=rt;break}case b:{ye.rightToLeft=kt(rt);break}case _:{ye.bottomToTop=kt(rt);break}case m:{ye.round=He(rt,Fn);break}case v:{ye.styles&&(ye.styles.theme=rt);break}case ne:{ye.animateOnClick=rt;break}}let bt=null;if(/^value([0-9]*)$/.test(ke)&&(bt="value"),/^pointer([0-9]*)-disabled$/.test(ke)&&(bt="pointer-disabled"),/^aria-label([0-9]*)$/.test(ke)&&(bt="aria-label"),/^pointer([0-9]*)-shape$/.test(ke)&&(bt="pointer-shape"),!bt)return;let ti=ke.replace(/\D/g,"").trim(),di=ti===""||ti==="0"||ti==="1"?0:He(ti,0)-1;switch(bt){case"value":{ye.setValue(rt,di);break}case"pointer-disabled":{let vt=ye==null?void 0:ye.pointers[di];if(!vt)return;vt.disabled=kt(rt);break}case"aria-label":{ye.setAriaLabel(di,rt);break}case"pointer-shape":{ye.styles&&ye.styles.setPointerShape(di,rt);break}}},$r=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(ye){this.slider&&this.slider.setStep(ye)}get step(){var ye;return(ye=this.slider)==null?void 0:ye.step}set disabled(ye){this.slider&&(this.slider.disabled=ye)}get disabled(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.disabled)!=null?ke:!1}set data(ye){var ke;(ke=this.slider)==null||ke.setData(ye)}get data(){var ye;return(ye=this.slider)==null?void 0:ye.data}set min(ye){var ke;(ke=this.slider)==null||ke.setMin(ye)}get min(){var ye;return(ye=this.slider)==null?void 0:ye.min}set max(ye){var ke;(ke=this.slider)==null||ke.setMax(ye)}get max(){var ye;return(ye=this.slider)==null?void 0:ye.max}set round(ye){!this.slider||(this.slider.round=ye)}get round(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.round)!=null?ke:Fn}set type(ye){!this.slider||(this.slider.type=ye??Xe)}get type(){var ye;return((ye=this.slider)==null?void 0:ye.type)||Xe}set pointersOverlap(ye){!this.slider||(this.slider.pointersOverlap=ye)}get pointersOverlap(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.pointersOverlap)!=null?ke:!1}set pointersMinDistance(ye){!this.slider||(this.slider.pointersMinDistance=ye)}get pointersMinDistance(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.pointersMinDistance)!=null?ke:0}set pointersMaxDistance(ye){!this.slider||(this.slider.pointersMaxDistance=ye)}get pointersMaxDistance(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.pointersMaxDistance)!=null?ke:1/0}set theme(ye){!this.slider||!this.slider.styles||(this.slider.styles.theme=ye)}get theme(){var ye,ke,rt;return(rt=(ke=(ye=this.slider)==null?void 0:ye.styles)==null?void 0:ke.theme)!=null?rt:null}set rtl(ye){!this.slider||(this.slider.rightToLeft=ye)}get rtl(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.rightToLeft)!=null?ke:!1}set btt(ye){!this.slider||(this.slider.bottomToTop=ye)}get btt(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.bottomToTop)!=null?ke:!1}set keyboardDisabled(ye){!this.slider||(this.slider.keyboardDisabled=ye)}get keyboardDisabled(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.keyboardDisabled)!=null?ke:!1}set mousewheelDisabled(ye){!this.slider||(this.slider.mousewheelDisabled=ye)}get mousewheelDisabled(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.mousewheelDisabled)!=null?ke:!1}set animateOnClick(ye){!this.slider||(this.slider.animateOnClick=ye)}get animateOnClick(){var ye;return(ye=this.slider)==null?void 0:ye.animateOnClick}get rangeDragging(){var ye,ke;return(ke=(ye=this.slider)==null?void 0:ye.rangeDragging)!=null?ke:!1}set rangeDragging(ye){this.slider&&(this.slider.rangeDragging=kt(ye))}get externalCSSList(){return this._externalCSSList}addPointer(ye){var ke,rt;if(!this.slider)return;let Ze=(rt=(ke=this.slider)==null?void 0:ke.addPointer(ye))!=null?rt:0;Rr(this,this.slider,Ze,`value${Ze+1}`,`ariaLabel${Ze+1}`,`pointerShape${Ze+1}`,`pointer${Ze+1}Disabled`)}removePointer(){var ye;!this.slider||(ye=this.slider)==null||ye.removePointer()}addCSS(ye){if(!this.shadowRoot)return;let ke=document.createElement("style");ke.textContent=ye,this.shadowRoot.appendChild(ke)}connectedCallback(){var ye,ke;if(!this.shadowRoot)return;this._externalCSSList=gt(this),this.shadowRoot.innerHTML=n(s,this._externalCSSList);let rt=(ye=this.shadowRoot)==null?void 0:ye.querySelector(".pointer");if(!rt)return;let Ze=(ke=this.shadowRoot)==null?void 0:ke.getElementById("range-slider");if(!Ze)return;let bt=Jr(this,rt);this.slider=Nn(this,Ze,bt),cr(this,this.slider),this._observer=new MutationObserver(ti=>{ti.forEach(di=>{var vt;if(!this.slider||di.type!=="attributes")return;let Ke=di.attributeName;!Ke||nr(this.slider,Ke,(vt=this.getAttribute(Ke))!=null?vt:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},bo=$r;window.tcRangeSlider=bo,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",bo),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends bo{})})();var rbe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(Rn,function(){var t=1e3,r=6e4,n=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",h="month",d="quarter",p="year",m="date",g="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var $=["th","st","nd","rd"],H=F%100;return"["+F+($[(H-20)%10]||$[H]||$[0])+"]"}},E=function(F,$,H){var V=String(F);return!V||V.length>=$?F:""+Array($+1-V.length).join(H)+F},C={s:E,z:function(F){var $=-F.utcOffset(),H=Math.abs($),V=Math.floor(H/60),J=H%60;return($<=0?"+":"-")+E(V,2,"0")+":"+E(J,2,"0")},m:function F($,H){if($.date()<H.date())return-F(H,$);var V=12*(H.year()-$.year())+(H.month()-$.month()),J=$.clone().add(V,h),ee=H-J<0,ie=$.clone().add(V+(ee?-1:1),h);return+(-(V+(H-J)/(ee?J-ie:ie-J))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:h,y:p,w:c,d:u,D:m,h:l,m:a,s:o,ms:s,Q:d}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},T="en",D={};D[T]=_;var M="$isDayjsObject",A=function(F){return F instanceof K||!(!F||!F[M])},I=function F($,H,V){var J;if(!$)return T;if(typeof $=="string"){var ee=$.toLowerCase();D[ee]&&(J=ee),H&&(D[ee]=H,J=ee);var ie=$.split("-");if(!J&&ie.length>1)return F(ie[0])}else{var de=$.name;D[de]=$,J=de}return!V&&J&&(T=J),J||!V&&T},P=function(F,$){if(A(F))return F.clone();var H=typeof $=="object"?$:{};return H.date=F,H.args=arguments,new K(H)},U=C;U.l=I,U.i=A,U.w=function(F,$){return P(F,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var K=function(){function F(H){this.$L=I(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[M]=!0}var $=F.prototype;return $.parse=function(H){this.$d=function(V){var J=V.date,ee=V.utc;if(J===null)return new Date(NaN);if(U.u(J))return new Date;if(J instanceof Date)return new Date(J);if(typeof J=="string"&&!/Z$/i.test(J)){var ie=J.match(v);if(ie){var de=ie[2]-1||0,te=(ie[7]||"0").substring(0,3);return ee?new Date(Date.UTC(ie[1],de,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,te)):new Date(ie[1],de,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,te)}}return new Date(J)}(H),this.init()},$.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},$.$utils=function(){return U},$.isValid=function(){return this.$d.toString()!==g},$.isSame=function(H,V){var J=P(H);return this.startOf(V)<=J&&J<=this.endOf(V)},$.isAfter=function(H,V){return P(H)<this.startOf(V)},$.isBefore=function(H,V){return this.endOf(V)<P(H)},$.$g=function(H,V,J){return U.u(H)?this[V]:this.set(J,H)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(H,V){var J=this,ee=!!U.u(V)||V,ie=U.p(H),de=function(Be,He){var st=U.w(J.$u?Date.UTC(J.$y,He,Be):new Date(J.$y,He,Be),J);return ee?st:st.endOf(u)},te=function(Be,He){return U.w(J.toDate()[Be].apply(J.toDate("s"),(ee?[0,0,0,0]:[23,59,59,999]).slice(He)),J)},z=this.$W,ne=this.$M,ve=this.$D,$e="set"+(this.$u?"UTC":"");switch(ie){case p:return ee?de(1,0):de(31,11);case h:return ee?de(1,ne):de(0,ne+1);case c:var Xe=this.$locale().weekStart||0,ot=(z<Xe?z+7:z)-Xe;return de(ee?ve-ot:ve+(6-ot),ne);case u:case m:return te($e+"Hours",0);case l:return te($e+"Minutes",1);case a:return te($e+"Seconds",2);case o:return te($e+"Milliseconds",3);default:return this.clone()}},$.endOf=function(H){return this.startOf(H,!1)},$.$set=function(H,V){var J,ee=U.p(H),ie="set"+(this.$u?"UTC":""),de=(J={},J[u]=ie+"Date",J[m]=ie+"Date",J[h]=ie+"Month",J[p]=ie+"FullYear",J[l]=ie+"Hours",J[a]=ie+"Minutes",J[o]=ie+"Seconds",J[s]=ie+"Milliseconds",J)[ee],te=ee===u?this.$D+(V-this.$W):V;if(ee===h||ee===p){var z=this.clone().set(m,1);z.$d[de](te),z.init(),this.$d=z.set(m,Math.min(this.$D,z.daysInMonth())).$d}else de&&this.$d[de](te);return this.init(),this},$.set=function(H,V){return this.clone().$set(H,V)},$.get=function(H){return this[U.p(H)]()},$.add=function(H,V){var J,ee=this;H=Number(H);var ie=U.p(V),de=function(ne){var ve=P(ee);return U.w(ve.date(ve.date()+Math.round(ne*H)),ee)};if(ie===h)return this.set(h,this.$M+H);if(ie===p)return this.set(p,this.$y+H);if(ie===u)return de(1);if(ie===c)return de(7);var te=(J={},J[a]=r,J[l]=n,J[o]=t,J)[ie]||1,z=this.$d.getTime()+H*te;return U.w(z,this)},$.subtract=function(H,V){return this.add(-1*H,V)},$.format=function(H){var V=this,J=this.$locale();if(!this.isValid())return J.invalidDate||g;var ee=H||"YYYY-MM-DDTHH:mm:ssZ",ie=U.z(this),de=this.$H,te=this.$m,z=this.$M,ne=J.weekdays,ve=J.months,$e=J.meridiem,Xe=function(He,st,xt,kt){return He&&(He[st]||He(V,ee))||xt[st].slice(0,kt)},ot=function(He){return U.s(de%12||12,He,"0")},Be=$e||function(He,st,xt){var kt=He<12?"AM":"PM";return xt?kt.toLowerCase():kt};return ee.replace(b,function(He,st){return st||function(xt){switch(xt){case"YY":return String(V.$y).slice(-2);case"YYYY":return U.s(V.$y,4,"0");case"M":return z+1;case"MM":return U.s(z+1,2,"0");case"MMM":return Xe(J.monthsShort,z,ve,3);case"MMMM":return Xe(ve,z);case"D":return V.$D;case"DD":return U.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return Xe(J.weekdaysMin,V.$W,ne,2);case"ddd":return Xe(J.weekdaysShort,V.$W,ne,3);case"dddd":return ne[V.$W];case"H":return String(de);case"HH":return U.s(de,2,"0");case"h":return ot(1);case"hh":return ot(2);case"a":return Be(de,te,!0);case"A":return Be(de,te,!1);case"m":return String(te);case"mm":return U.s(te,2,"0");case"s":return String(V.$s);case"ss":return U.s(V.$s,2,"0");case"SSS":return U.s(V.$ms,3,"0");case"Z":return ie}return null}(He)||ie.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(H,V,J){var ee,ie=this,de=U.p(V),te=P(H),z=(te.utcOffset()-this.utcOffset())*r,ne=this-te,ve=function(){return U.m(ie,te)};switch(de){case p:ee=ve()/12;break;case h:ee=ve();break;case d:ee=ve()/3;break;case c:ee=(ne-z)/6048e5;break;case u:ee=(ne-z)/864e5;break;case l:ee=ne/n;break;case a:ee=ne/r;break;case o:ee=ne/t;break;default:ee=ne}return J?ee:U.a(ee)},$.daysInMonth=function(){return this.endOf(h).$D},$.$locale=function(){return D[this.$L]},$.locale=function(H,V){if(!H)return this.$L;var J=this.clone(),ee=I(H,V,!0);return ee&&(J.$L=ee),J},$.clone=function(){return U.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},F}(),L=K.prototype;return P.prototype=L,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",h],["$y",p],["$D",m]].forEach(function(F){L[F[1]]=function($){return this.$g($,F[0],F[1])}}),P.extend=function(F,$){return F.$i||(F($,K,P),F.$i=!0),P},P.locale=I,P.isDayjs=A,P.unix=function(F){return P(1e3*F)},P.en=D[T],P.Ls=D,P.p={},P})})(rbe);var B8e=rbe.exports;const Vh=$o(B8e);class DR extends Lr{constructor(){super(...arguments),this.templates={},this._renderedTemplates={}}setBindingSyntax(e,t){this._startExpression=e,this._endExpression=t;const r=this.escapeRegex(this._startExpression),n=this.escapeRegex(this._endExpression);this._expression=new RegExp(`${r}\\s*([$\\w\\.,'"\\s()\\[\\]]+)\\s*${n}`,"g")}hasTemplate(e){return this.templates&&!!this.templates[e]}renderTemplate(e,t,r){if(!this.hasTemplate(e))return null;r=r||e;const n=Qe` <slot name=${r}></slot> `,s={[e]:{...t}};if(this._renderedTemplates.hasOwnProperty(r)){const{slot:a}=this._renderedTemplates[r];this.contains(a)&&this.removeChild(a)}const o=document.createElement("div");return o.slot=r,o.dataset.generated="template",this._renderTemplate(o,this.templates[e],s),this.appendChild(o),this._renderedTemplates[r]={context:s,slot:o},n}getTemplates(){const e={};for(let t=0;t<this.children.length;t++){const r=this.children[t];if(r.nodeName==="RENDER-TEMPLATE"){const n=r;n.dataset.type?e[n.dataset.type]=n:e.default=n,n.templateOrder=t}}return e}_renderTemplate(e,t,r){let n;if(t&&t.childNodes.length){const s=t.cloneNode(!0);n=this.renderNode(s,e,r)}n&&e.appendChild(n)}expandExpressionsAsString(e,t){return e.replace(this.expression,(r,n)=>{const s=this.evalInContext(n||this.trimExpression(r),t);return s?typeof s=="object"?JSON.stringify(s):s.toString():""})}get expression(){return this._expression||this.setBindingSyntax("{{","}}"),this._expression}escapeRegex(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}evalInContext(e,t){t={...t};const r=new Function("with(this) { return "+e+";}");let n;try{n=r.call(t)}catch{}return n}trimExpression(e){return e=e.trim(),e.startsWith(this._startExpression)&&e.endsWith(this._endExpression)&&(e=e.substr(this._startExpression.length,e.length-this._startExpression.length-this._endExpression.length),e=e.trim()),e}renderNode(e,t,r){if(e.nodeName==="#text")return e.textContent=this.expandExpressionsAsString(e.textContent,r),e;if(e.nodeName==="TEMPLATE")return e.$parentTemplateContext=r,e;for(let n=0;n<e.childNodes.length;n++){const s=e.childNodes[n];this.renderNode(s,t,r)}return e}firstUpdated(){this.templates=this.getTemplates()}}const MR=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
details {
  width: 100%;
}
`,sg=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,$T=`
input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}
input[type=checkbox]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=checkbox]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");

}
`,LR=`
input[type=radio] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}

label span {
  font-size: small;
}

input[type=radio]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=radio]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");

}
`,RR=`
input[type="range"] {
  -webkit-appearance: none;
  width: 90%;
  margin-left: 5%;
  height: 6px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
}
input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider {
  margin: 60px 0 0 0;
}
.range-slider {
  width: 100%;
}
input[type="range"]::-webkit-slider-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-webkit-slider-thumb {
  background: #00416F;
}
input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
input[type="range"]::-moz-range-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-moz-range-thumb {
  background: #00416F;
}
input[type="range"]:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416F00;
}
.range-slider__value {
  display: inline-block;
  position: relative;
  width: 60px;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

input::-moz-focus-inner, input::-moz-focus-outer {
  border: 0;
}
`,IR=`
* {
  font-family: Roboto, sans-serif;
}

${sg}
${$T}
${LR}
${RR}

ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  position: absolute;
  right: 8px;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
}
[data-type=filter] .title,
details summary {
  text-transform: capitalize;
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid #0004;
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul li {
  padding: 5px 10px;
}
li.highlighted {
  background: #00417011;
}
section {
  position: relative;
}
button#filter-reset {
  position: absolute;
  top: 4px;
  right: 0;
}
.scroll {
  max-height: calc(100% - 30px);
  overflow-x: hidden;
  overflow-y: auto;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range {
  display: flex;
  align-items: center;
  padding: .5rem 0;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before {
  margin-right: .5rem;
}
.range-after {
  margin-left: .5rem;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: 1px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 16px;
  width: 16px;
}
  `;var j8e=Object.defineProperty,z8e=Object.getOwnPropertyDescriptor,OR=(i,e,t,r)=>{for(var n=r>1?void 0:r?z8e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&j8e(e,t,n),n};let IS=class extends Lr{handleDetailsToggle(i){this.dispatchEvent(new CustomEvent("details-toggled",{detail:i,bubbles:!0,composed:!0}))}_resetFilter(){this.querySelector("[slot='filter']").reset()}render(){return Qe`
      <style>
        ${MR}
        ${!this.unstyled&&IR}
      </style>
      <details
        @toggle="${this.handleDetailsToggle}"
        class="details-filter"
        part="details-filter"
        ?open=${this.filterObject.expanded||mr}
      >
        <summary>
          <span
            class="title"
            style="${!this.filterObject.title&&"text-transform: capitalize"}"
          >
            ${this.filterObject.title||this.filterObject.key||"Filter"}
            <slot name="reset-button"></slot>
          </span>
        </summary>
        <div class="scroll">
          <slot name="filter"></slot>
        </div>
      </details>
    `}};OR([Pt({attribute:!1})],IS.prototype,"filterObject",2);OR([Pt()],IS.prototype,"unstyled",2);IS=OR([yo("eox-itemfilter-expandcontainer")],IS);const pv=i=>{if(!i.dirty)return null;switch(i.type){case"multiselect":for(const t in i.state)i.state[t]=!1;break;case"range":i.state.min=i.min,i.state.max=i.max;break;case"select":for(const t in i.state)i.state[t]=!1;break;case"spatial":i.state.geometry=void 0;break;case"text":i.keys.forEach(t=>{i.state[t]=void 0});break}return delete i.stringifiedState,delete i.dirty,i},hM=Math.min,oy=Math.max,OS=Math.round,zE=Math.floor,Vf=i=>({x:i,y:i});function nbe(i){return i.split("-")[0]}function U8e(i){return i.split("-")[1]}function G8e(i){return i==="x"?"y":"x"}function q8e(i){return i==="y"?"height":"width"}function sbe(i){return["top","bottom"].includes(nbe(i))?"y":"x"}function H8e(i){return G8e(sbe(i))}function obe(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}function Bhe(i,e,t){let{reference:r,floating:n}=i;const s=sbe(e),o=H8e(e),a=q8e(o),l=nbe(e),u=s==="y",c=r.x+r.width/2-n.width/2,h=r.y+r.height/2-n.height/2,d=r[a]/2-n[a]/2;let p;switch(l){case"top":p={x:c,y:r.y-n.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-n.width,y:h};break;default:p={x:r.x,y:r.y}}switch(U8e(e)){case"start":p[o]-=d*(t&&u?-1:1);break;case"end":p[o]+=d*(t&&u?-1:1);break}return p}const V8e=async(i,e,t)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:i,floating:e,strategy:n}),{x:c,y:h}=Bhe(u,r,l),d=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:v,fn:b}=a[g],{x:_,y:E,data:C,reset:T}=await b({x:c,y:h,initialPlacement:r,placement:d,strategy:n,middlewareData:p,rects:u,platform:o,elements:{reference:i,floating:e}});c=_??c,h=E??h,p={...p,[v]:{...p[v],...C}},T&&m<=50&&(m++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:n}):T.rects),{x:c,y:h}=Bhe(u,d,l)),g=-1)}return{x:c,y:h,placement:d,strategy:n,middlewareData:p}};function mv(i){return abe(i)?(i.nodeName||"").toLowerCase():"#document"}function Ml(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function md(i){var e;return(e=(abe(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function abe(i){return i instanceof Node||i instanceof Ml(i).Node}function Gc(i){return i instanceof Element||i instanceof Ml(i).Element}function qc(i){return i instanceof HTMLElement||i instanceof Ml(i).HTMLElement}function jhe(i){return typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Ml(i).ShadowRoot}function aw(i){const{overflow:e,overflowX:t,overflowY:r,display:n}=Yu(i);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(n)}function W8e(i){return["table","td","th"].includes(mv(i))}function PR(i){const e=FR(),t=Yu(i);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Y8e(i){let e=Wf(i);for(;qc(e)&&!ky(e);){if(PR(e))return e;e=Wf(e)}return null}function FR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ky(i){return["html","body","#document"].includes(mv(i))}function Yu(i){return Ml(i).getComputedStyle(i)}function BT(i){return Gc(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function Wf(i){if(mv(i)==="html")return i;const e=i.assignedSlot||i.parentNode||jhe(i)&&i.host||md(i);return jhe(e)?e.host:e}function lbe(i){const e=Wf(i);return ky(e)?i.ownerDocument?i.ownerDocument.body:i.body:qc(e)&&aw(e)?e:lbe(e)}function J_(i,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const n=lbe(i),s=n===((r=i.ownerDocument)==null?void 0:r.body),o=Ml(n);return s?e.concat(o,o.visualViewport||[],aw(n)?n:[],o.frameElement&&t?J_(o.frameElement):[]):e.concat(n,J_(n,[],t))}function ube(i){const e=Yu(i);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=qc(i),s=n?i.offsetWidth:t,o=n?i.offsetHeight:r,a=OS(t)!==s||OS(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function NR(i){return Gc(i)?i:i.contextElement}function ay(i){const e=NR(i);if(!qc(e))return Vf(1);const t=e.getBoundingClientRect(),{width:r,height:n,$:s}=ube(e);let o=(s?OS(t.width):t.width)/r,a=(s?OS(t.height):t.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const X8e=Vf(0);function cbe(i){const e=Ml(i);return!FR()||!e.visualViewport?X8e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Z8e(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ml(i)?!1:e}function Gm(i,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=i.getBoundingClientRect(),s=NR(i);let o=Vf(1);e&&(r?Gc(r)&&(o=ay(r)):o=ay(i));const a=Z8e(s,t,r)?cbe(s):Vf(0);let l=(n.left+a.x)/o.x,u=(n.top+a.y)/o.y,c=n.width/o.x,h=n.height/o.y;if(s){const d=Ml(s),p=r&&Gc(r)?Ml(r):r;let m=d,g=m.frameElement;for(;g&&r&&p!==m;){const v=ay(g),b=g.getBoundingClientRect(),_=Yu(g),E=b.left+(g.clientLeft+parseFloat(_.paddingLeft))*v.x,C=b.top+(g.clientTop+parseFloat(_.paddingTop))*v.y;l*=v.x,u*=v.y,c*=v.x,h*=v.y,l+=E,u+=C,m=Ml(g),g=m.frameElement}}return obe({width:c,height:h,x:l,y:u})}const K8e=[":popover-open",":modal"];function $R(i){return K8e.some(e=>{try{return i.matches(e)}catch{return!1}})}function J8e(i){let{elements:e,rect:t,offsetParent:r,strategy:n}=i;const s=n==="fixed",o=md(r),a=e?$R(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Vf(1);const c=Vf(0),h=qc(r);if((h||!h&&!s)&&((mv(r)!=="body"||aw(o))&&(l=BT(r)),qc(r))){const d=Gm(r);u=ay(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function Q8e(i){return Array.from(i.getClientRects())}function hbe(i){return Gm(md(i)).left+BT(i).scrollLeft}function e$e(i){const e=md(i),t=BT(i),r=i.ownerDocument.body,n=oy(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=oy(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+hbe(i);const a=-t.scrollTop;return Yu(r).direction==="rtl"&&(o+=oy(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}function t$e(i,e){const t=Ml(i),r=md(i),n=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;const u=FR();(!u||u&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a,y:l}}function i$e(i,e){const t=Gm(i,!0,e==="fixed"),r=t.top+i.clientTop,n=t.left+i.clientLeft,s=qc(i)?ay(i):Vf(1),o=i.clientWidth*s.x,a=i.clientHeight*s.y,l=n*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function zhe(i,e,t){let r;if(e==="viewport")r=t$e(i,t);else if(e==="document")r=e$e(md(i));else if(Gc(e))r=i$e(e,t);else{const n=cbe(i);r={...e,x:e.x-n.x,y:e.y-n.y}}return obe(r)}function dbe(i,e){const t=Wf(i);return t===e||!Gc(t)||ky(t)?!1:Yu(t).position==="fixed"||dbe(t,e)}function r$e(i,e){const t=e.get(i);if(t)return t;let r=J_(i,[],!1).filter(a=>Gc(a)&&mv(a)!=="body"),n=null;const s=Yu(i).position==="fixed";let o=s?Wf(i):i;for(;Gc(o)&&!ky(o);){const a=Yu(o),l=PR(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||aw(o)&&!l&&dbe(i,o))?r=r.filter(c=>c!==o):n=a,o=Wf(o)}return e.set(i,r),r}function n$e(i){let{element:e,boundary:t,rootBoundary:r,strategy:n}=i;const o=[...t==="clippingAncestors"?$R(e)?[]:r$e(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((u,c)=>{const h=zhe(e,c,n);return u.top=oy(h.top,u.top),u.right=hM(h.right,u.right),u.bottom=hM(h.bottom,u.bottom),u.left=oy(h.left,u.left),u},zhe(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function s$e(i){const{width:e,height:t}=ube(i);return{width:e,height:t}}function o$e(i,e,t){const r=qc(e),n=md(e),s=t==="fixed",o=Gm(i,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Vf(0);if(r||!r&&!s)if((mv(e)!=="body"||aw(n))&&(a=BT(e)),r){const h=Gm(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else n&&(l.x=hbe(n));const u=o.left+a.scrollLeft-l.x,c=o.top+a.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function xk(i){return Yu(i).position==="static"}function Uhe(i,e){return!qc(i)||Yu(i).position==="fixed"?null:e?e(i):i.offsetParent}function fbe(i,e){const t=Ml(i);if($R(i))return t;if(!qc(i)){let n=Wf(i);for(;n&&!ky(n);){if(Gc(n)&&!xk(n))return n;n=Wf(n)}return t}let r=Uhe(i,e);for(;r&&W8e(r)&&xk(r);)r=Uhe(r,e);return r&&ky(r)&&xk(r)&&!PR(r)?t:r||Y8e(i)||t}const a$e=async function(i){const e=this.getOffsetParent||fbe,t=this.getDimensions,r=await t(i.floating);return{reference:o$e(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function l$e(i){return Yu(i).direction==="rtl"}const u$e={convertOffsetParentRelativeRectToViewportRelativeRect:J8e,getDocumentElement:md,getClippingRect:n$e,getOffsetParent:fbe,getElementRects:a$e,getClientRects:Q8e,getDimensions:s$e,getScale:ay,isElement:Gc,isRTL:l$e};function c$e(i,e){let t=null,r;const n=md(i);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:h,height:d}=i.getBoundingClientRect();if(a||e(),!h||!d)return;const p=zE(c),m=zE(n.clientWidth-(u+h)),g=zE(n.clientHeight-(c+d)),v=zE(u),_={rootMargin:-p+"px "+-m+"px "+-g+"px "+-v+"px",threshold:oy(0,hM(1,l))||1};let E=!0;function C(T){const D=T[0].intersectionRatio;if(D!==l){if(!E)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{t=new IntersectionObserver(C,{..._,root:n.ownerDocument})}catch{t=new IntersectionObserver(C,_)}t.observe(i)}return o(!0),s}function h$e(i,e,t,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=NR(i),c=n||s?[...u?J_(u):[],...J_(e)]:[];c.forEach(b=>{n&&b.addEventListener("scroll",t,{passive:!0}),s&&b.addEventListener("resize",t)});const h=u&&a?c$e(u,t):null;let d=-1,p=null;o&&(p=new ResizeObserver(b=>{let[_]=b;_&&_.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(e)})),t()}),u&&!l&&p.observe(u),p.observe(e));let m,g=l?Gm(i):null;l&&v();function v(){const b=Gm(i);g&&(b.x!==g.x||b.y!==g.y||b.width!==g.width||b.height!==g.height)&&t(),g=b,m=requestAnimationFrame(v)}return t(),()=>{var b;c.forEach(_=>{n&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),h==null||h(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const d$e=(i,e,t)=>{const r=new Map,n={platform:u$e,...t},s={...n.platform,_c:r};return V8e(i,e,{...n,platform:s})};var f$e=Object.defineProperty,p$e=Object.getOwnPropertyDescriptor,jT=(i,e,t,r)=>{for(var n=r>1?void 0:r?p$e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&f$e(e,t,n),n};let Q_=class extends Lr{constructor(){super(...arguments),this.open=!1,this.parent=null,this.unstyled=!1,this._clickEventListener=()=>{this.open=!1},this._keyboardEventListener=i=>{const{code:e}=i;["Escape"].includes(e)&&this._handleKeyboard(e)}}_handleKeyboard(i){this.clientHeight}_overlayCleanup(){}connectedCallback(){super.connectedCallback(),this.unstyled||setTimeout(()=>{const i=this.parent||this.renderRoot.querySelector("[name=trigger]").assignedNodes()[0],e=this.renderRoot.querySelector("#dropdown"),t=()=>{e.classList.contains("open")&&d$e(i,e,{strategy:"fixed"}).then(({x:r,y:n})=>{Object.assign(e.style,{left:`${r}px`,top:`${n}px`,width:`${i.getBoundingClientRect().width}px`})})};this._overlayCleanup=h$e(i,e,t)})}disconnectedCallback(){super.disconnectedCallback(),this._overlayCleanup(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener),window.removeEventListener("click",this._clickEventListener)}render(){return Qe`
      <style>
        #dropdown {
          display: none;
        }
        #dropdown.open {
          display: block;
        }
        ${this.unstyled?mr:Qe`
              eox-dropdown { height: 100%;} #dropdown { position: fixed; top:
              0px; left: 0; width: 100%; margin: 0; padding: 0; background:
              white; border-bottom-left-radius: 4px; border-bottom-right-radius:
              4px; box-shadow: 0 4px 4px #0007; cursor: default; max-height:
              200px; overflow-y: auto; z-index: 99;}
            `}
      </style>
      <slot name="trigger"></slot>
      <div id="dropdown">
        <slot name="content"></slot>
      </div>
    `}updated(i){if(i.has("open")){const e=this.renderRoot.querySelector("#dropdown");this.open?e.classList.add("open"):e.classList.remove("open"),this.requestUpdate()}}firstUpdated(){window.addEventListener("click",this._clickEventListener),this.getRootNode().addEventListener("keydown",this._keyboardEventListener),this.renderRoot.querySelector("[name=trigger]").assignedNodes()[0].addEventListener("focus",()=>{this.open=!0})}};jT([Pt({type:Boolean})],Q_.prototype,"open",2);jT([Pt()],Q_.prototype,"parent",2);jT([Pt({type:Boolean})],Q_.prototype,"unstyled",2);Q_=jT([yo("eox-dropdown")],Q_);var m$e=Object.defineProperty,g$e=Object.getOwnPropertyDescriptor,zT=(i,e,t,r)=>{for(var n=r>1?void 0:r?g$e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&m$e(e,t,n),n};let ex=class extends Lr{constructor(){super(...arguments),this.items=[],this.titleProperty="title",this.unstyled=!1,this._keyboardEventListener=i=>{const{code:e}=i;this.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(e)||(e==="Space"&&i.preventDefault(),["Escape","Space","Enter"].includes(e)||i.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(e)&&this._handleKeyboard(e,i.target.value??""))}}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}_handleKeyboard(i,e){const t=this.renderRoot.querySelector(".chip.highlighted");if((i==="Escape"||e)&&t&&t.classList.remove("highlighted"),i==="Backspace"&&!e){if(this.items.length){t&&this.items.splice(Array.from(this.renderRoot.querySelectorAll(".chip")).indexOf(t),1);const r=this.renderRoot.querySelectorAll(".chip")[this.renderRoot.querySelectorAll(".chip").length-1];r.classList.contains("highlighted")||r.classList.add("highlighted"),this.requestUpdate()}this._dispatchEvent()}if((i==="ArrowLeft"||i==="ArrowRight")&&!e){if(this.renderRoot.querySelectorAll(".chip").length<1)return;let r=0;const n=this.renderRoot.querySelector(".chip.highlighted");n&&(r=Array.from(this.renderRoot.querySelectorAll(".chip")).indexOf(n),n.classList.remove("highlighted")),r=r+(i==="ArrowLeft"?-1:1),i==="ArrowLeft"&&r<0&&(r=this.renderRoot.querySelectorAll(".chip").length-1),i==="ArrowRight"&&r>this.renderRoot.querySelectorAll(".chip").length-1&&(r=0),Array.from(this.renderRoot.querySelectorAll(".chip"))[r].classList.add("highlighted")}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}render(){return Qe`
      <style>
        .chip.highlighted {
          background: lightgrey;
        }
        .chip-title {
          pointer-events: none;
        }
        ${this.unstyled?mr:Qe`
              .chip-container { display: flex; flex: 0; } .chip { display: flex;
              align-items: center; background: #00417022; border-radius: 4px;
              margin-right: 4px; padding: 5px 10px; font-size: small; cursor:
              default; white-space: nowrap; } .chip.highlighted { background:
              #004170; color: white; } .chip-close { cursor: pointer;
              margin-left: 4px; }
            `}
      </style>
      <span class="chip-container">
        ${Ka(this.items,i=>Qe`
            <span
              class="chip"
              @click=${e=>{this.renderRoot.querySelectorAll(".chip").forEach(t=>{t.classList.remove("highlighted")}),e.target.classList.add("highlighted"),this.requestUpdate()}}
            >
              <span class="chip-title"
                >${i[this.titleProperty]}</span
              >
              ${Pi(i._inProgress,()=>i.stringifiedState?"":Qe` ... `)}
              ${Pi(i.stringifiedState,()=>Qe`: ${i.stringifiedState}`)}
              <span
                class="chip-close"
                @click=${e=>{e.stopPropagation(),this.items.splice(this.items.indexOf(i),1),this._dispatchEvent(),this.requestUpdate()}}
                ></span
              >
            </span>
          `)}
      </span>
    `}};zT([Pt({type:Array})],ex.prototype,"items",2);zT([Pt()],ex.prototype,"titleProperty",2);zT([Pt({type:Boolean})],ex.prototype,"unstyled",2);ex=zT([yo("eox-itemfilter-chips")],ex);var y$e=Object.defineProperty,v$e=Object.getOwnPropertyDescriptor,Kc=(i,e,t,r)=>{for(var n=r>1?void 0:r?v$e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&y$e(e,t,n),n};let Xu=class extends Lr{constructor(){super(...arguments),this.idProperty="id",this.items=[],this.titleProperty="title",this.itemTitleProperty=this.titleProperty,this.multiple=!1,this.unstyled=!1,this.multiStep=!1,this.inputText="",this.selectedItems=[],this._keyboardEventListener=i=>{const{code:e}=i;["ArrowUp","ArrowDown","Escape","Backspace"].includes(e)&&this._handleKeyboard(e)}}_handleKeyboard(i){var e,t,r,n;if(this.clientHeight!==0){if(i==="Escape"){if(this.selectedItems.length<1||this.multiple){this.renderRoot.querySelector("input").value!==""?this.renderRoot.querySelector("input").value="":this.renderRoot.querySelector("eox-dropdown").open=!1;return}this.multiple||(this.renderRoot.querySelector("input").value!==this.selectedItems[0][this.titleProperty]?this.renderRoot.querySelector("input").value=this.selectedItems[0][this.titleProperty]:this.renderRoot.querySelector("eox-dropdown").open=!1);return}(i==="ArrowDown"||i==="ArrowUp")&&(this.renderRoot.querySelector("eox-dropdown").open=!0,(e=this.parentElement)!=null&&e.inline&&this.renderRoot.querySelector("eox-selectionlist")._handleKeyboard(i)),this.renderRoot.querySelector("input").select(),(t=this.parentElement)!=null&&t.inline&&(["ArrowUp","ArrowDown"].includes(i)||((n=(r=this.parentElement.parentElement)==null?void 0:r.parentElement)==null?void 0:n.querySelector("#inline-input")).focus())}}_handleHighlight(i){i[0]._inProgress||(this.renderRoot.querySelector("input").value=i[0][this.titleProperty]||"",this.renderRoot.querySelector("input").select())}_handleSelect(i){var e;i.length>0&&this.multiStep&&i.forEach(t=>{this.selectedItems.includes(t)||(t._inProgress=!0)}),this.selectedItems=i,i.length>0?this.multiple?(this.renderRoot.querySelector("input").value="",this.renderRoot.querySelector("input").focus()):(this.renderRoot.querySelector("input").value=i[0][this.titleProperty],i[0]._inProgress||(this.renderRoot.querySelector("eox-dropdown").open=!1)):(this.renderRoot.querySelector("input").select(),this.renderRoot.querySelector("input").focus()),this._dispatchEvent(),this.requestUpdate(),(e=this.renderRoot.querySelector("eox-itemfilter-chips"))==null||e.requestUpdate()}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.selectedItems}))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}firstUpdated(){this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}updated(i){i.has("selectedItems")&&this._handleSelect(this.selectedItems)}render(){return Qe`
      <style>
        :host,
        .container {
          display: flex;
        }
        #dropdown {
          display: none;
        }
        ${this.unstyled?mr:Qe`
              ${sg} :host { position: relative; } .container { width: 100%;
              position: relative; border: 1px solid #00417066; border-radius:
              4px; height: 24px; padding: 5px; flex: 1; justify-content:
              space-between; cursor: text; overflow-x: auto; } .container:hover
              { border: 1px solid #004170; } .input-container { display: flex;
              flex: 1; align-items: center; } input, input:focus { height: 100%;
              border: none; outline: none; } .button-container { display: flex;
              align-items: center; justify-content: center; position: absolute;
              right: 1px; top: 5px; height: calc(100% - 10px); width: 34px;
              background: white; } button.icon { color: #004170; height: 24px;
              font-size: large; width: unset; } .container::-webkit-scrollbar {
              height: 2px; } .container::-webkit-scrollbar-thumb { background:
              lightgrey; border-radius: 2px;} .hidden {height: 1px; padding: 0;
              border: none;} .hidden:hover {border: none} .hidden input {
              opacity: 0% }
            `}
      </style>
      <div
        class="container"
        part="container"
        @click=${i=>{i.stopPropagation(),this.renderRoot.querySelector("input[type=text]").focus()}}
      >
        ${Pi(this.multiple,()=>Qe`
            <eox-itemfilter-chips
              .items=${this.selectedItems}
              .titleProperty=${this.titleProperty}
              .unstyled=${this.unstyled}
            ></eox-itemfilter-chips>
          `)}
        <div class="input-container">
          <eox-dropdown
            .parent=${this.parentNode.parentNode}
            .unstyled=${this.unstyled}
          >
            <input
              slot="trigger"
              type="text"
              @focus=${()=>{this.inputText="",this.requestUpdate()}}
              @input=${i=>{this.inputText=i.target.value.toLowerCase()}}
            />
            ${Pi(this.items.length>0,()=>Qe`
                <eox-selectionlist
                  slot="content"
                  .filter=${this.inputText}
                  .idProperty=${this.idProperty}
                  .titleProperty=${this.titleProperty}
                  .items=${this.items.filter(i=>this.multiStep?!i.stringifiedState:!0).filter(i=>this.inputText?i[this.titleProperty].toLowerCase().includes(this.inputText.toLowerCase()):!0)}
                  .multiple=${this.multiStep?!0:this.multiple}
                  .disableKeyboardEvents=${this.multiStep}
                  .selectedItems=${this.multiStep?this.selectedItems.filter(i=>i.stringifiedState):this.selectedItems}
                  .unstyled=${this.unstyled}
                  @items-highlighted=${i=>{this._handleHighlight(i.detail)}}
                  @items-selected=${i=>{this._handleSelect(i.detail)}}
                >
                </eox-selectionlist>
              `)}
          </eox-dropdown>
        </div>
      </div>
      ${Pi(this.selectedItems.length>0,()=>Qe`
          <div class="button-container">
            <button
              class="icon"
              @click=${()=>{this._handleSelect([])}}
            >
              
            </button>
          </div>
        `)}
    `}};Kc([Pt()],Xu.prototype,"idProperty",2);Kc([Pt()],Xu.prototype,"items",2);Kc([Pt()],Xu.prototype,"titleProperty",2);Kc([Pt()],Xu.prototype,"itemTitleProperty",2);Kc([Pt({type:Boolean})],Xu.prototype,"multiple",2);Kc([Pt({type:Boolean})],Xu.prototype,"unstyled",2);Kc([Pt({type:Boolean})],Xu.prototype,"multiStep",2);Kc([Ds()],Xu.prototype,"inputText",2);Kc([Ds()],Xu.prototype,"selectedItems",2);Xu=Kc([yo("eox-autocomplete")],Xu);var b$e=Object.defineProperty,_$e=Object.getOwnPropertyDescriptor,Jc=(i,e,t,r)=>{for(var n=r>1?void 0:r?_$e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&b$e(e,t,n),n};let Zu=class extends Lr{constructor(){super(...arguments),this.filter="",this.idProperty="id",this.items=[],this.titleProperty="title",this.multiple=!1,this.selectedItems=[],this.unstyled=!1,this.noShadow=!1,this._currentHighlight=null,this._keyboardEventListener=i=>{["ArrowDown","ArrowUp","Enter","Escape"].includes(i.code)&&this._handleKeyboard(i.code)}}_handleKeyboard(i){if(this.clientHeight===0)return;const e=this.renderRoot.querySelector("li.highlighted");if(i==="Escape"){this._currentHighlight&&(this._currentHighlight=null);return}if(i==="Enter"){if(e){const s=this.items.find(o=>o[this.idProperty]===e.dataset.identifier);this._handleSelect(s),this.requestUpdate()}return}const t=this.renderRoot.querySelectorAll("li");let r=-1;e&&(delete e.dataset.highlighted,r=Array.from(t).indexOf(e)),i==="ArrowDown"&&(r++,r>t.length-1&&(r=0)),i==="ArrowUp"&&(r--,r<0&&(r=t.length-1));const n=Array.from(t)[r];n&&(this._currentHighlight=this.items.find(s=>s[this.idProperty]===n.dataset.identifier)),this.dispatchEvent(new CustomEvent("items-highlighted",{detail:[this._currentHighlight]}))}_handleSelect(i){if(i)if(this.multiple){const e=this.selectedItems.find(t=>t[this.idProperty]===i[this.idProperty]);e?this.selectedItems.splice(this.selectedItems.indexOf(e),1):this.selectedItems.push(i)}else this.selectedItems=[i];else this.selectedItems=[],this._currentHighlight=null;this._dispatchEvent()}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.selectedItems}))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}firstUpdated(){this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}updated(i){i.has("filter")&&(this.filter.length>0?setTimeout(()=>{const e=this.renderRoot.querySelectorAll("li")[0];e&&(this._currentHighlight=this.items.find(t=>t[this.idProperty]===e.dataset.identifier))}):this._currentHighlight=null)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Qe`
      <style>
        ${MR}
        :host {
          height: auto;
        }
        ul {
          width: 100%;
        }
        li.highlighted {
          background: lightgrey;
        }
        ${!this.unstyled&&IR}
      </style>
      <ul>
        ${kR(this.items.filter(i=>this.filter?i[this.titleProperty].toLowerCase().includes(this.filter.toLowerCase()):!0),i=>i[this.idProperty],i=>Qe`
            <li
              class=${this._currentHighlight===i?"highlighted":mr}
              data-identifier=${i[this.idProperty]}
              data-title=${i[this.titleProperty]}
              @mouseenter=${()=>{this._currentHighlight=i}}
              @mouseleave=${()=>{this._currentHighlight=null}}
            >
              <label>
                <input
                  type="${this.multiple?"checkbox":"radio"}"
                  .checked=${!!this.selectedItems.find(e=>e[this.idProperty]===i[this.idProperty])||mr}
                  @change=${()=>this._handleSelect(i)}
                />
                <span class="title"
                  >${i[this.titleProperty]}</span
                >
              </label>
            </li>
          `)}
      </ul>
    `}};Jc([Pt()],Zu.prototype,"filter",2);Jc([Pt()],Zu.prototype,"idProperty",2);Jc([Pt()],Zu.prototype,"items",2);Jc([Pt()],Zu.prototype,"titleProperty",2);Jc([Pt({type:Boolean})],Zu.prototype,"multiple",2);Jc([Pt()],Zu.prototype,"selectedItems",2);Jc([Pt({type:Boolean})],Zu.prototype,"unstyled",2);Jc([Pt({type:Boolean})],Zu.prototype,"noShadow",2);Jc([Ds()],Zu.prototype,"_currentHighlight",2);Zu=Jc([yo("eox-selectionlist")],Zu);var x$e=Object.defineProperty,w$e=Object.getOwnPropertyDescriptor,UT=(i,e,t,r)=>{for(var n=r>1?void 0:r?w$e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&x$e(e,t,n),n};let tx=class extends Lr{constructor(){super(...arguments),this.inline=!1,this.unstyled=!1}reset(){this.renderRoot.querySelectorAll("input[type='checkbox']").forEach(i=>{i instanceof HTMLInputElement&&(i.checked=!1)}),pv(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}_getItems(){const i="sort"in this.filterObject?this.filterObject.sort:(e,t)=>e.localeCompare(t);return Object.keys(this.filterObject.state).sort(i).map(e=>({id:e,title:e.replace(/^./,e[0].toUpperCase())}))}_getSelectedItems(){return Object.keys(this.filterObject.state).filter(i=>this.filterObject.state[i]).map(i=>({id:i,title:i.replace(/^./,i[0].toUpperCase())}))}_handleSelected(i){var e;Object.keys(this.filterObject.state).forEach(t=>{this.filterObject.state[t]=i.map(r=>r.id).includes(t)}),this.filterObject.stringifiedState=Object.keys(this.filterObject.state).filter(t=>this.filterObject.state[t]).join(", "),((e=this.filterObject.stringifiedState)==null?void 0:e.length)>0&&(this.filterObject.dirty=!0),this.dispatchEvent(new CustomEvent("filter"))}render(){return Pi(this.filterObject,()=>Qe`
        ${Pi(this.inline||Object.keys(this.filterObject.state).length>10,()=>Qe`
            <eox-autocomplete
              multiple
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i.detail)}
            >
            </eox-autocomplete>
          `,()=>Qe`
            <eox-selectionlist
              .noShadow=${!this.inline}
              multiple
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i.detail)}
            ></eox-selectionlist>
          `)}
      `)}};UT([Pt()],tx.prototype,"filterObject",2);UT([Pt({type:Boolean})],tx.prototype,"inline",2);UT([Pt({type:Boolean})],tx.prototype,"unstyled",2);tx=UT([yo("eox-itemfilter-multiselect")],tx);var E$e=Object.defineProperty,S$e=Object.getOwnPropertyDescriptor,pbe=(i,e,t,r)=>{for(var n=r>1?void 0:r?S$e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&E$e(e,t,n),n};let dM=class extends Lr{constructor(){super(...arguments),this.inputHandler=i=>{const[e,t]=i.detail.values;(e!==this.filterObject.state.min||t!=this.filterObject.state.max)&&([this.filterObject.state.min,this.filterObject.state.max]=[e,t],this.filterObject.dirty=!0),this.filterObject.dirty&&(this.filterObject.stringifiedState=`${Vh(e)} - ${Vh(t)}`),this.dispatchEvent(new CustomEvent("filter")),this.requestUpdate()},this.debouncedInputHandler=fv(this.inputHandler,0,{leading:!0})}reset(){pv(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}render(){return Pi(this.filterObject,()=>Qe`
        <div class="range-before">
          ${this.filterObject.format==="date"?Vh.unix(this.filterObject.state.min):this.filterObject.state.min}
        </div>
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min}"
          value2="${this.filterObject.state.max}"
          step="1"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        <div class="range-after">
          ${this.filterObject.format==="date"?Vh.unix(this.filterObject.state.max):this.filterObject.state.max}
        </div>
      `)}};pbe([Pt()],dM.prototype,"filterObject",2);dM=pbe([yo("eox-itemfilter-range")],dM);var C$e=Object.defineProperty,T$e=Object.getOwnPropertyDescriptor,GT=(i,e,t,r)=>{for(var n=r>1?void 0:r?T$e(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&C$e(e,t,n),n};let ix=class extends Lr{constructor(){super(...arguments),this.inline=!1,this.unstyled=!1}reset(){this.renderRoot.querySelectorAll("input[type='radio']").forEach(i=>{i instanceof HTMLInputElement&&(i.checked=!1)}),pv(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}_getItems(){const i="sort"in this.filterObject?this.filterObject.sort:(e,t)=>e.localeCompare(t);return Object.keys(this.filterObject.state).sort(i).map(e=>({id:e,title:e.replace(/^./,e[0].toUpperCase())}))}_getSelectedItems(){return Object.keys(this.filterObject.state).filter(i=>this.filterObject.state[i]).map(i=>({id:i,title:i.replace(/^./,i[0].toUpperCase())}))}_handleSelected(i){var e;Object.keys(this.filterObject.state).forEach(t=>{this.filterObject.state[t]=i.detail.map(r=>r.id).includes(t)}),this.filterObject.stringifiedState=Object.keys(this.filterObject.state).filter(t=>this.filterObject.state[t])[0],((e=this.filterObject.stringifiedState)==null?void 0:e.length)>0&&(this.filterObject.dirty=!0),this.dispatchEvent(new CustomEvent("filter"))}render(){return Pi(this.filterObject,()=>Qe`
        ${Pi(this.inline||Object.keys(this.filterObject.state).length>10,()=>Qe`
            <eox-autocomplete
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i)}
            >
            </eox-autocomplete>
          `,()=>Qe`
            <eox-selectionlist
              .noShadow=${!this.inline}
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i)}
            ></eox-selectionlist>
          `)}
      `)}};GT([Pt()],ix.prototype,"filterObject",2);GT([Pt({type:Boolean})],ix.prototype,"inline",2);GT([Pt({type:Boolean})],ix.prototype,"unstyled",2);ix=GT([yo("eox-itemfilter-select")],ix);function A$e(i,e){var t=0,r=0,n=0,s=0,o=0,a=0,l=0,u=0,c=null,h=null,d=i[0],p=i[1],m=e.length;for(t;t<m;t++){r=0;var g=e[t].length-1,v=e[t];if(c=v[0],c[0]!==v[g][0]&&c[1]!==v[g][1])throw new Error("First and last coordinates in a ring must be the same");for(o=c[0]-d,a=c[1]-p,r;r<g;r++){if(h=v[r+1],u=h[1]-p,a<0&&u<0||a>0&&u>0){c=h,a=u,o=c[0]-d;continue}if(l=h[0]-i[0],u>0&&a<=0){if(s=o*u-l*a,s>0)n=n+1;else if(s===0)return 0}else if(a>0&&u<=0){if(s=o*u-l*a,s<0)n=n+1;else if(s===0)return 0}else if(u===0&&a<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u===0){if(l<=0&&o>=0)return 0;if(o<=0&&l>=0)return 0}c=h,a=u,o=l}}return n%2!==0}var Ghe=Object.prototype.toString,mbe=function(e){var t=Ghe.call(e),r=t==="[object Arguments]";return r||(r=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Ghe.call(e.callee)==="[object Function]"),r},wk,qhe;function k$e(){if(qhe)return wk;qhe=1;var i;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=mbe,n=Object.prototype.propertyIsEnumerable,s=!n.call({toString:null},"toString"),o=n.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(d){var p=d.constructor;return p&&p.prototype===d},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!u["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{l(window[d])}catch{return!0}}catch{return!0}return!1}(),h=function(d){if(typeof window>"u"||!c)return l(d);try{return l(d)}catch{return!1}};i=function(p){var m=p!==null&&typeof p=="object",g=t.call(p)==="[object Function]",v=r(p),b=m&&t.call(p)==="[object String]",_=[];if(!m&&!g&&!v)throw new TypeError("Object.keys called on a non-object");var E=o&&g;if(b&&p.length>0&&!e.call(p,0))for(var C=0;C<p.length;++C)_.push(String(C));if(v&&p.length>0)for(var T=0;T<p.length;++T)_.push(String(T));else for(var D in p)!(E&&D==="prototype")&&e.call(p,D)&&_.push(String(D));if(s)for(var M=h(p),A=0;A<a.length;++A)!(M&&a[A]==="constructor")&&e.call(p,a[A])&&_.push(a[A]);return _}}return wk=i,wk}var D$e=Array.prototype.slice,M$e=mbe,Hhe=Object.keys,W2=Hhe?function(e){return Hhe(e)}:k$e(),Vhe=Object.keys;W2.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(r){return M$e(r)?Vhe(D$e.call(r)):Vhe(r)})}else Object.keys=W2;return Object.keys||W2};var BR=W2,L$e=Error,R$e=EvalError,I$e=RangeError,O$e=ReferenceError,gbe=SyntaxError,np=TypeError,P$e=URIError,qT=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||o.enumerable!==!0)return!1}return!0},Whe=typeof Symbol<"u"&&Symbol,F$e=qT,jR=function(){return typeof Whe!="function"||typeof Symbol!="function"||typeof Whe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:F$e()},Yhe={foo:{}},N$e=Object,$$e=function(){return{__proto__:Yhe}.foo===Yhe.foo&&!({__proto__:null}instanceof N$e)},B$e="Function.prototype.bind called on incompatible ",j$e=Object.prototype.toString,z$e=Math.max,U$e="[object Function]",Xhe=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var s=0;s<t.length;s+=1)r[s+e.length]=t[s];return r},G$e=function(e,t){for(var r=[],n=t||0,s=0;n<e.length;n+=1,s+=1)r[s]=e[n];return r},q$e=function(i,e){for(var t="",r=0;r<i.length;r+=1)t+=i[r],r+1<i.length&&(t+=e);return t},H$e=function(e){var t=this;if(typeof t!="function"||j$e.apply(t)!==U$e)throw new TypeError(B$e+t);for(var r=G$e(arguments,1),n,s=function(){if(this instanceof n){var c=t.apply(this,Xhe(r,arguments));return Object(c)===c?c:this}return t.apply(e,Xhe(r,arguments))},o=z$e(0,t.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(n=Function("binder","return function ("+q$e(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,n.prototype=new u,u.prototype=null}return n},V$e=H$e,zR=Function.prototype.bind||V$e,W$e=Function.prototype.call,Y$e=Object.prototype.hasOwnProperty,X$e=zR,ybe=X$e.call(W$e,Y$e),xr,Z$e=L$e,K$e=R$e,J$e=I$e,Q$e=O$e,Dy=gbe,ly=np,eBe=P$e,vbe=Function,Ek=function(i){try{return vbe('"use strict"; return ('+i+").constructor;")()}catch{}},Dm=Object.getOwnPropertyDescriptor;if(Dm)try{Dm({},"")}catch{Dm=null}var Sk=function(){throw new ly},tBe=Dm?function(){try{return arguments.callee,Sk}catch{try{return Dm(arguments,"callee").get}catch{return Sk}}}():Sk,r0=jR(),iBe=$$e(),lo=Object.getPrototypeOf||(iBe?function(i){return i.__proto__}:null),E0={},rBe=typeof Uint8Array>"u"||!lo?xr:lo(Uint8Array),Mm={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?xr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?xr:ArrayBuffer,"%ArrayIteratorPrototype%":r0&&lo?lo([][Symbol.iterator]()):xr,"%AsyncFromSyncIteratorPrototype%":xr,"%AsyncFunction%":E0,"%AsyncGenerator%":E0,"%AsyncGeneratorFunction%":E0,"%AsyncIteratorPrototype%":E0,"%Atomics%":typeof Atomics>"u"?xr:Atomics,"%BigInt%":typeof BigInt>"u"?xr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?xr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?xr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?xr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Z$e,"%eval%":eval,"%EvalError%":K$e,"%Float32Array%":typeof Float32Array>"u"?xr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?xr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?xr:FinalizationRegistry,"%Function%":vbe,"%GeneratorFunction%":E0,"%Int8Array%":typeof Int8Array>"u"?xr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?xr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?xr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r0&&lo?lo(lo([][Symbol.iterator]())):xr,"%JSON%":typeof JSON=="object"?JSON:xr,"%Map%":typeof Map>"u"?xr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!r0||!lo?xr:lo(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?xr:Promise,"%Proxy%":typeof Proxy>"u"?xr:Proxy,"%RangeError%":J$e,"%ReferenceError%":Q$e,"%Reflect%":typeof Reflect>"u"?xr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?xr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!r0||!lo?xr:lo(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?xr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r0&&lo?lo(""[Symbol.iterator]()):xr,"%Symbol%":r0?Symbol:xr,"%SyntaxError%":Dy,"%ThrowTypeError%":tBe,"%TypedArray%":rBe,"%TypeError%":ly,"%Uint8Array%":typeof Uint8Array>"u"?xr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?xr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?xr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?xr:Uint32Array,"%URIError%":eBe,"%WeakMap%":typeof WeakMap>"u"?xr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?xr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?xr:WeakSet};if(lo)try{null.error}catch(i){var nBe=lo(lo(i));Mm["%Error.prototype%"]=nBe}var sBe=function i(e){var t;if(e==="%AsyncFunction%")t=Ek("async function () {}");else if(e==="%GeneratorFunction%")t=Ek("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Ek("async function* () {}");else if(e==="%AsyncGenerator%"){var r=i("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=i("%AsyncGenerator%");n&&lo&&(t=lo(n.prototype))}return Mm[e]=t,t},Zhe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},lw=zR,PS=ybe,oBe=lw.call(Function.call,Array.prototype.concat),aBe=lw.call(Function.apply,Array.prototype.splice),Khe=lw.call(Function.call,String.prototype.replace),FS=lw.call(Function.call,String.prototype.slice),lBe=lw.call(Function.call,RegExp.prototype.exec),uBe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,cBe=/\\(\\)?/g,hBe=function(e){var t=FS(e,0,1),r=FS(e,-1);if(t==="%"&&r!=="%")throw new Dy("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new Dy("invalid intrinsic syntax, expected opening `%`");var n=[];return Khe(e,uBe,function(s,o,a,l){n[n.length]=a?Khe(l,cBe,"$1"):o||s}),n},dBe=function(e,t){var r=e,n;if(PS(Zhe,r)&&(n=Zhe[r],r="%"+n[0]+"%"),PS(Mm,r)){var s=Mm[r];if(s===E0&&(s=sBe(r)),typeof s>"u"&&!t)throw new ly("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:s}}throw new Dy("intrinsic "+e+" does not exist!")},Qc=function(e,t){if(typeof e!="string"||e.length===0)throw new ly("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ly('"allowMissing" argument must be a boolean');if(lBe(/^%?[^%]*%?$/,e)===null)throw new Dy("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=hBe(e),n=r.length>0?r[0]:"",s=dBe("%"+n+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(n=u[0],aBe(r,oBe([0,1],u)));for(var c=1,h=!0;c<r.length;c+=1){var d=r[c],p=FS(d,0,1),m=FS(d,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Dy("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),n+="."+d,o="%"+n+"%",PS(Mm,o))a=Mm[o];else if(a!=null){if(!(d in a)){if(!t)throw new ly("base intrinsic for "+e+" exists, but the property is not available.");return}if(Dm&&c+1>=r.length){var g=Dm(a,d);h=!!g,h&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[d]}else h=PS(a,d),a=a[d];h&&!l&&(Mm[o]=a)}}return a},fBe=Qc,Y2=fBe("%Object.defineProperty%",!0)||!1;if(Y2)try{Y2({},"a",{value:1})}catch{Y2=!1}var UR=Y2,pBe=Qc,X2=pBe("%Object.getOwnPropertyDescriptor%",!0);if(X2)try{X2([],"length")}catch{X2=null}var GR=X2,Jhe=UR,mBe=gbe,n0=np,Qhe=GR,qR=function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new n0("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new n0("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n0("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n0("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n0("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n0("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!Qhe&&Qhe(e,t);if(Jhe)Jhe(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:n===null&&l?l.enumerable:!n,value:r,writable:s===null&&l?l.writable:!s});else if(a||!n&&!s&&!o)e[t]=r;else throw new mBe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},fM=UR,bbe=function(){return!!fM};bbe.hasArrayLengthDefineBug=function(){if(!fM)return null;try{return fM([],"length",{value:1}).length!==1}catch{return!0}};var HR=bbe,gBe=BR,yBe=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",vBe=Object.prototype.toString,bBe=Array.prototype.concat,ede=qR,_Be=function(i){return typeof i=="function"&&vBe.call(i)==="[object Function]"},_be=HR(),xBe=function(i,e,t,r){if(e in i){if(r===!0){if(i[e]===t)return}else if(!_Be(r)||!r())return}_be?ede(i,e,t,!0):ede(i,e,t)},xbe=function(i,e){var t=arguments.length>2?arguments[2]:{},r=gBe(e);yBe&&(r=bBe.call(r,Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n+=1)xBe(i,r[n],e[r[n]],t[r[n]])};xbe.supportsDescriptors=!!_be;var og=xbe,wbe={exports:{}},wBe=Qc,tde=qR,EBe=HR(),ide=GR,rde=np,SBe=wBe("%Math.floor%"),CBe=function(e,t){if(typeof e!="function")throw new rde("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||SBe(t)!==t)throw new rde("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,s=!0;if("length"in e&&ide){var o=ide(e,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(s=!1)}return(n||s||!r)&&(EBe?tde(e,"length",t,!0,!0):tde(e,"length",t)),e};(function(i){var e=zR,t=Qc,r=CBe,n=np,s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),l=UR,u=t("%Math.max%");i.exports=function(d){if(typeof d!="function")throw new n("a function is required");var p=a(e,o,arguments);return r(p,1+u(0,d.length-(arguments.length-1)),!0)};var c=function(){return a(e,s,arguments)};l?l(i.exports,"apply",{value:c}):i.exports.apply=c})(wbe);var gv=wbe.exports,Ebe=Qc,Sbe=gv,TBe=Sbe(Ebe("String.prototype.indexOf")),pu=function(e,t){var r=Ebe(e,!!t);return typeof r=="function"&&TBe(e,".prototype.")>-1?Sbe(r):r},ABe=BR,Cbe=qT(),Tbe=pu,nde=Object,kBe=Tbe("Array.prototype.push"),sde=Tbe("Object.prototype.propertyIsEnumerable"),DBe=Cbe?Object.getOwnPropertySymbols:null,Abe=function(e,t){if(e==null)throw new TypeError("target must be an object");var r=nde(e);if(arguments.length===1)return r;for(var n=1;n<arguments.length;++n){var s=nde(arguments[n]),o=ABe(s),a=Cbe&&(Object.getOwnPropertySymbols||DBe);if(a)for(var l=a(s),u=0;u<l.length;++u){var c=l[u];sde(s,c)&&kBe(o,c)}for(var h=0;h<o.length;++h){var d=o[h];if(sde(s,d)){var p=s[d];r[d]=p}}}return r},Ck=Abe,MBe=function(){if(!Object.assign)return!1;for(var i="abcdefghijklmnopqrst",e=i.split(""),t={},r=0;r<e.length;++r)t[e[r]]=e[r];var n=Object.assign({},t),s="";for(var o in n)s+=o;return i!==s},LBe=function(){if(!Object.assign||!Object.preventExtensions)return!1;var i=Object.preventExtensions({1:2});try{Object.assign(i,"xy")}catch{return i[1]==="y"}return!1},kbe=function(){return!Object.assign||MBe()||LBe()?Ck:Object.assign},RBe=og,IBe=kbe,OBe=function(){var e=IBe();return RBe(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},PBe=og,FBe=gv,NBe=Abe,Dbe=kbe,$Be=OBe,BBe=FBe.apply(Dbe()),Mbe=function(e,t){return BBe(Object,arguments)};PBe(Mbe,{getPolyfill:Dbe,implementation:NBe,shim:$Be});var jBe=Mbe,rx=function(){return typeof(function(){}).name=="string"},x_=Object.getOwnPropertyDescriptor;if(x_)try{x_([],"length")}catch{x_=null}rx.functionsHaveConfigurableNames=function(){if(!rx()||!x_)return!1;var e=x_(function(){},"name");return!!e&&!!e.configurable};var zBe=Function.prototype.bind;rx.boundFunctionsHaveNames=function(){return rx()&&typeof zBe=="function"&&(function(){}).bind().name!==""};var UBe=rx,ode=qR,GBe=HR(),qBe=UBe.functionsHaveConfigurableNames(),HBe=np,VBe=function(e,t){if(typeof e!="function")throw new HBe("`fn` is not a function");var r=arguments.length>2&&!!arguments[2];return(!r||qBe)&&(GBe?ode(e,"name",t,!0,!0):ode(e,"name",t)),e},WBe=VBe,YBe=np,XBe=Object,Lbe=WBe(function(){if(this==null||this!==XBe(this))throw new YBe("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),ZBe=Lbe,KBe=og.supportsDescriptors,JBe=Object.getOwnPropertyDescriptor,Rbe=function(){if(KBe&&/a/mig.flags==="gim"){var e=JBe(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var t="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(r,"sticky",{get:function(){t+="y"}}),t==="dy")return e.get}}return ZBe},QBe=og.supportsDescriptors,eje=Rbe,tje=Object.getOwnPropertyDescriptor,ije=Object.defineProperty,rje=TypeError,ade=Object.getPrototypeOf,nje=/a/,sje=function(){if(!QBe||!ade)throw new rje("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=eje(),t=ade(nje),r=tje(t,"flags");return(!r||r.get!==e)&&ije(t,"flags",{configurable:!0,enumerable:!1,get:e}),e},oje=og,aje=gv,lje=Lbe,Ibe=Rbe,uje=sje,Obe=aje(Ibe());oje(Obe,{getPolyfill:Ibe,implementation:lje,shim:uje});var cje=Obe,Z2={exports:{}},hje=qT,sp=function(){return hje()&&!!Symbol.toStringTag},dje=sp(),fje=pu,pM=fje("Object.prototype.toString"),HT=function(e){return dje&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:pM(e)==="[object Arguments]"},Pbe=function(e){return HT(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&pM(e)!=="[object Array]"&&pM(e.callee)==="[object Function]"},pje=function(){return HT(arguments)}();HT.isLegacyArguments=Pbe;var VR=pje?HT:Pbe;const K2={},mje=Object.freeze(Object.defineProperty({__proto__:null,default:K2},Symbol.toStringTag,{value:"Module"})),gje=VL(mje);var WR=typeof Map=="function"&&Map.prototype,Tk=Object.getOwnPropertyDescriptor&&WR?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,NS=WR&&Tk&&typeof Tk.get=="function"?Tk.get:null,lde=WR&&Map.prototype.forEach,YR=typeof Set=="function"&&Set.prototype,Ak=Object.getOwnPropertyDescriptor&&YR?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,$S=YR&&Ak&&typeof Ak.get=="function"?Ak.get:null,ude=YR&&Set.prototype.forEach,yje=typeof WeakMap=="function"&&WeakMap.prototype,w_=yje?WeakMap.prototype.has:null,vje=typeof WeakSet=="function"&&WeakSet.prototype,E_=vje?WeakSet.prototype.has:null,bje=typeof WeakRef=="function"&&WeakRef.prototype,cde=bje?WeakRef.prototype.deref:null,_je=Boolean.prototype.valueOf,xje=Object.prototype.toString,wje=Function.prototype.toString,Eje=String.prototype.match,XR=String.prototype.slice,kf=String.prototype.replace,Sje=String.prototype.toUpperCase,hde=String.prototype.toLowerCase,Fbe=RegExp.prototype.test,dde=Array.prototype.concat,xc=Array.prototype.join,Cje=Array.prototype.slice,fde=Math.floor,mM=typeof BigInt=="function"?BigInt.prototype.valueOf:null,kk=Object.getOwnPropertySymbols,gM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,My=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ca=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===My||!0)?Symbol.toStringTag:null,Nbe=Object.prototype.propertyIsEnumerable,pde=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(i){return i.__proto__}:null);function mde(i,e){if(i===1/0||i===-1/0||i!==i||i&&i>-1e3&&i<1e3||Fbe.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof i=="number"){var r=i<0?-fde(-i):fde(i);if(r!==i){var n=String(r),s=XR.call(e,n.length+1);return kf.call(n,t,"$&_")+"."+kf.call(kf.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return kf.call(e,t,"$&_")}var yM=gje,gde=yM.custom,yde=Bbe(gde)?gde:null,Tje=function i(e,t,r,n){var s=t||{};if(pf(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pf(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=pf(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pf(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pf(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return zbe(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?mde(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?mde(e,u):u}var c=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=c&&c>0&&typeof e=="object")return vM(e)?"[Array]":"[Object]";var h=qje(s,r);if(typeof n>"u")n=[];else if(jbe(n,e)>=0)return"[Circular]";function d(L,F,$){if(F&&(n=Cje.call(n),n.push(F)),$){var H={depth:s.depth};return pf(s,"quoteStyle")&&(H.quoteStyle=s.quoteStyle),i(L,H,r+1,n)}return i(L,s,r+1,n)}if(typeof e=="function"&&!vde(e)){var p=Pje(e),m=UE(e,d);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+xc.call(m,", ")+" }":"")}if(Bbe(e)){var g=My?kf.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):gM.call(e);return typeof e=="object"&&!My?D1(g):g}if(zje(e)){for(var v="<"+hde.call(String(e.nodeName)),b=e.attributes||[],_=0;_<b.length;_++)v+=" "+b[_].name+"="+$be(Aje(b[_].value),"double",s);return v+=">",e.childNodes&&e.childNodes.length&&(v+="..."),v+="</"+hde.call(String(e.nodeName))+">",v}if(vM(e)){if(e.length===0)return"[]";var E=UE(e,d);return h&&!Gje(E)?"["+bM(E,h)+"]":"[ "+xc.call(E,", ")+" ]"}if(Dje(e)){var C=UE(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Nbe.call(e,"cause")?"{ ["+String(e)+"] "+xc.call(dde.call("[cause]: "+d(e.cause),C),", ")+" }":C.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+xc.call(C,", ")+" }"}if(typeof e=="object"&&o){if(yde&&typeof e[yde]=="function"&&yM)return yM(e,{depth:c-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Fje(e)){var T=[];return lde&&lde.call(e,function(L,F){T.push(d(F,e,!0)+" => "+d(L,e))}),bde("Map",NS.call(e),T,h)}if(Bje(e)){var D=[];return ude&&ude.call(e,function(L){D.push(d(L,e))}),bde("Set",$S.call(e),D,h)}if(Nje(e))return Dk("WeakMap");if(jje(e))return Dk("WeakSet");if($je(e))return Dk("WeakRef");if(Lje(e))return D1(d(Number(e)));if(Ije(e))return D1(d(mM.call(e)));if(Rje(e))return D1(_je.call(e));if(Mje(e))return D1(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Rn)return"{ [object globalThis] }";if(!kje(e)&&!vde(e)){var M=UE(e,d),A=pde?pde(e)===Object.prototype:e instanceof Object||e.constructor===Object,I=e instanceof Object?"":"null prototype",P=!A&&ca&&Object(e)===e&&ca in e?XR.call(op(e),8,-1):I?"Object":"",U=A||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",K=U+(P||I?"["+xc.call(dde.call([],P||[],I||[]),": ")+"] ":"");return M.length===0?K+"{}":h?K+"{"+bM(M,h)+"}":K+"{ "+xc.call(M,", ")+" }"}return String(e)};function $be(i,e,t){var r=(t.quoteStyle||e)==="double"?'"':"'";return r+i+r}function Aje(i){return kf.call(String(i),/"/g,"&quot;")}function vM(i){return op(i)==="[object Array]"&&(!ca||!(typeof i=="object"&&ca in i))}function kje(i){return op(i)==="[object Date]"&&(!ca||!(typeof i=="object"&&ca in i))}function vde(i){return op(i)==="[object RegExp]"&&(!ca||!(typeof i=="object"&&ca in i))}function Dje(i){return op(i)==="[object Error]"&&(!ca||!(typeof i=="object"&&ca in i))}function Mje(i){return op(i)==="[object String]"&&(!ca||!(typeof i=="object"&&ca in i))}function Lje(i){return op(i)==="[object Number]"&&(!ca||!(typeof i=="object"&&ca in i))}function Rje(i){return op(i)==="[object Boolean]"&&(!ca||!(typeof i=="object"&&ca in i))}function Bbe(i){if(My)return i&&typeof i=="object"&&i instanceof Symbol;if(typeof i=="symbol")return!0;if(!i||typeof i!="object"||!gM)return!1;try{return gM.call(i),!0}catch{}return!1}function Ije(i){if(!i||typeof i!="object"||!mM)return!1;try{return mM.call(i),!0}catch{}return!1}var Oje=Object.prototype.hasOwnProperty||function(i){return i in this};function pf(i,e){return Oje.call(i,e)}function op(i){return xje.call(i)}function Pje(i){if(i.name)return i.name;var e=Eje.call(wje.call(i),/^function\s*([\w$]+)/);return e?e[1]:null}function jbe(i,e){if(i.indexOf)return i.indexOf(e);for(var t=0,r=i.length;t<r;t++)if(i[t]===e)return t;return-1}function Fje(i){if(!NS||!i||typeof i!="object")return!1;try{NS.call(i);try{$S.call(i)}catch{return!0}return i instanceof Map}catch{}return!1}function Nje(i){if(!w_||!i||typeof i!="object")return!1;try{w_.call(i,w_);try{E_.call(i,E_)}catch{return!0}return i instanceof WeakMap}catch{}return!1}function $je(i){if(!cde||!i||typeof i!="object")return!1;try{return cde.call(i),!0}catch{}return!1}function Bje(i){if(!$S||!i||typeof i!="object")return!1;try{$S.call(i);try{NS.call(i)}catch{return!0}return i instanceof Set}catch{}return!1}function jje(i){if(!E_||!i||typeof i!="object")return!1;try{E_.call(i,E_);try{w_.call(i,w_)}catch{return!0}return i instanceof WeakSet}catch{}return!1}function zje(i){return!i||typeof i!="object"?!1:typeof HTMLElement<"u"&&i instanceof HTMLElement?!0:typeof i.nodeName=="string"&&typeof i.getAttribute=="function"}function zbe(i,e){if(i.length>e.maxStringLength){var t=i.length-e.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return zbe(XR.call(i,0,e.maxStringLength),e)+r}var n=kf.call(kf.call(i,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Uje);return $be(n,"single",e)}function Uje(i){var e=i.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Sje.call(e.toString(16))}function D1(i){return"Object("+i+")"}function Dk(i){return i+" { ? }"}function bde(i,e,t,r){var n=r?bM(t,r):xc.call(t,", ");return i+" ("+e+") {"+n+"}"}function Gje(i){for(var e=0;e<i.length;e++)if(jbe(i[e],`
`)>=0)return!1;return!0}function qje(i,e){var t;if(i.indent==="	")t="	";else if(typeof i.indent=="number"&&i.indent>0)t=xc.call(Array(i.indent+1)," ");else return null;return{base:t,prev:xc.call(Array(e+1),t)}}function bM(i,e){if(i.length===0)return"";var t=`
`+e.prev+e.base;return t+xc.call(i,","+t)+`
`+e.prev}function UE(i,e){var t=vM(i),r=[];if(t){r.length=i.length;for(var n=0;n<i.length;n++)r[n]=pf(i,n)?e(i[n],i):""}var s=typeof kk=="function"?kk(i):[],o;if(My){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in i)pf(i,l)&&(t&&String(Number(l))===l&&l<i.length||My&&o["$"+l]instanceof Symbol||(Fbe.call(/[^\w$]/,l)?r.push(e(l,i)+": "+e(i[l],i)):r.push(l+": "+e(i[l],i))));if(typeof kk=="function")for(var u=0;u<s.length;u++)Nbe.call(i,s[u])&&r.push("["+e(s[u])+"]: "+e(i[s[u]],i));return r}var Ube=Qc,yv=pu,Hje=Tje,Vje=np,GE=Ube("%WeakMap%",!0),qE=Ube("%Map%",!0),Wje=yv("WeakMap.prototype.get",!0),Yje=yv("WeakMap.prototype.set",!0),Xje=yv("WeakMap.prototype.has",!0),Zje=yv("Map.prototype.get",!0),Kje=yv("Map.prototype.set",!0),Jje=yv("Map.prototype.has",!0),ZR=function(i,e){for(var t=i,r;(r=t.next)!==null;t=r)if(r.key===e)return t.next=r.next,r.next=i.next,i.next=r,r},Qje=function(i,e){var t=ZR(i,e);return t&&t.value},e9e=function(i,e,t){var r=ZR(i,e);r?r.value=t:i.next={key:e,next:i.next,value:t}},t9e=function(i,e){return!!ZR(i,e)},Gbe=function(){var e,t,r,n={assert:function(s){if(!n.has(s))throw new Vje("Side channel does not contain "+Hje(s))},get:function(s){if(GE&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Wje(e,s)}else if(qE){if(t)return Zje(t,s)}else if(r)return Qje(r,s)},has:function(s){if(GE&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Xje(e,s)}else if(qE){if(t)return Jje(t,s)}else if(r)return t9e(r,s);return!1},set:function(s,o){GE&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new GE),Yje(e,s,o)):qE?(t||(t=new qE),Kje(t,s,o)):(r||(r={key:{},next:null}),e9e(r,s,o))}};return n},i9e=ybe,M1=Gbe(),kh=np,KR={assert:function(i,e){if(!i||typeof i!="object"&&typeof i!="function")throw new kh("`O` is not an object");if(typeof e!="string")throw new kh("`slot` must be a string");if(M1.assert(i),!KR.has(i,e))throw new kh("`"+e+"` is not present on `O`")},get:function(i,e){if(!i||typeof i!="object"&&typeof i!="function")throw new kh("`O` is not an object");if(typeof e!="string")throw new kh("`slot` must be a string");var t=M1.get(i);return t&&t["$"+e]},has:function(i,e){if(!i||typeof i!="object"&&typeof i!="function")throw new kh("`O` is not an object");if(typeof e!="string")throw new kh("`slot` must be a string");var t=M1.get(i);return!!t&&i9e(t,"$"+e)},set:function(i,e,t){if(!i||typeof i!="object"&&typeof i!="function")throw new kh("`O` is not an object");if(typeof e!="string")throw new kh("`slot` must be a string");var r=M1.get(i);r||(r={},M1.set(i,r)),r["$"+e]=t}};Object.freeze&&Object.freeze(KR);var r9e=KR,L1=r9e,n9e=SyntaxError,_de=typeof StopIteration=="object"?StopIteration:null,s9e=function(e){if(!_de)throw new n9e("this environment lacks StopIteration");L1.set(e,"[[Done]]",!1);var t={next:function(){var n=L1.get(this,"[[Iterator]]"),s=L1.get(n,"[[Done]]");try{return{done:s,value:s?void 0:n.next()}}catch(o){if(L1.set(n,"[[Done]]",!0),o!==_de)throw o;return{done:!0,value:void 0}}}};return L1.set(t,"[[Iterator]]",e),t},Mk,xde;function o9e(){if(xde)return Mk;xde=1;var i={}.toString;return Mk=Array.isArray||function(e){return i.call(e)=="[object Array]"},Mk}var a9e=String.prototype.valueOf,l9e=function(e){try{return a9e.call(e),!0}catch{return!1}},u9e=Object.prototype.toString,c9e="[object String]",h9e=sp(),qbe=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:h9e?l9e(e):u9e.call(e)===c9e},JR=typeof Map=="function"&&Map.prototype?Map:null,d9e=typeof Set=="function"&&Set.prototype?Set:null,BS;JR||(BS=function(e){return!1});var Hbe=JR?Map.prototype.has:null,wde=d9e?Set.prototype.has:null;!BS&&!Hbe&&(BS=function(e){return!1});var Vbe=BS||function(e){if(!e||typeof e!="object")return!1;try{if(Hbe.call(e),wde)try{wde.call(e)}catch{return!0}return e instanceof JR}catch{}return!1},f9e=typeof Map=="function"&&Map.prototype?Map:null,QR=typeof Set=="function"&&Set.prototype?Set:null,jS;QR||(jS=function(e){return!1});var Ede=f9e?Map.prototype.has:null,Wbe=QR?Set.prototype.has:null;!jS&&!Wbe&&(jS=function(e){return!1});var Ybe=jS||function(e){if(!e||typeof e!="object")return!1;try{if(Wbe.call(e),Ede)try{Ede.call(e)}catch{return!0}return e instanceof QR}catch{}return!1},Sde=VR,Cde=s9e;if(jR()||qT()){var Lk=Symbol.iterator;Z2.exports=function(e){if(e!=null&&typeof e[Lk]<"u")return e[Lk]();if(Sde(e))return Array.prototype[Lk].call(e)}}else{var p9e=o9e(),m9e=qbe,Tde=Qc,g9e=Tde("%Map%",!0),y9e=Tde("%Set%",!0),Du=pu,Ade=Du("Array.prototype.push"),kde=Du("String.prototype.charCodeAt"),v9e=Du("String.prototype.slice"),b9e=function(e,t){var r=e.length;if(t+1>=r)return t+1;var n=kde(e,t);if(n<55296||n>56319)return t+1;var s=kde(e,t+1);return s<56320||s>57343?t+1:t+2},Rk=function(e){var t=0;return{next:function(){var n=t>=e.length,s;return n||(s=e[t],t+=1),{done:n,value:s}}}},Dde=function(e,t){if(p9e(e)||Sde(e))return Rk(e);if(m9e(e)){var r=0;return{next:function(){var s=b9e(e,r),o=v9e(e,r,s);return r=s,{done:s>e.length,value:o}}}}if(t&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!g9e&&!y9e)Z2.exports=function(e){if(e!=null)return Dde(e,!0)};else{var _9e=Vbe,x9e=Ybe,Mde=Du("Map.prototype.forEach",!0),Lde=Du("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var Rde=Du("Map.prototype.iterator",!0),Ide=Du("Set.prototype.iterator",!0);var Ode=Du("Map.prototype.@@iterator",!0)||Du("Map.prototype._es6-shim iterator_",!0),Pde=Du("Set.prototype.@@iterator",!0)||Du("Set.prototype._es6-shim iterator_",!0),w9e=function(e){if(_9e(e)){if(Rde)return Cde(Rde(e));if(Ode)return Ode(e);if(Mde){var t=[];return Mde(e,function(n,s){Ade(t,[s,n])}),Rk(t)}}if(x9e(e)){if(Ide)return Cde(Ide(e));if(Pde)return Pde(e);if(Lde){var r=[];return Lde(e,function(n){Ade(r,n)}),Rk(r)}}};Z2.exports=function(e){return w9e(e)||Dde(e)}}}var E9e=Z2.exports,Fde=function(i){return i!==i},Xbe=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||Fde(e)&&Fde(t))},S9e=Xbe,Zbe=function(){return typeof Object.is=="function"?Object.is:S9e},C9e=Zbe,T9e=og,A9e=function(){var e=C9e();return T9e(Object,{is:e},{is:function(){return Object.is!==e}}),e},k9e=og,D9e=gv,M9e=Xbe,Kbe=Zbe,L9e=A9e,Jbe=D9e(Kbe(),Object);k9e(Jbe,{getPolyfill:Kbe,implementation:M9e,shim:L9e});var R9e=Jbe,I9e={}.toString,O9e=Array.isArray||function(i){return I9e.call(i)=="[object Array]"},P9e=gv,Qbe=pu,F9e=Qc,_M=F9e("%ArrayBuffer%",!0),J2=Qbe("ArrayBuffer.prototype.byteLength",!0),N9e=Qbe("Object.prototype.toString"),Nde=!!_M&&!J2&&new _M(0).slice,$de=!!Nde&&P9e(Nde),e1e=J2||$de?function(e){if(!e||typeof e!="object")return!1;try{return J2?J2(e):$de(e,0),!0}catch{return!1}}:_M?function(e){return N9e(e)==="[object ArrayBuffer]"}:function(e){return!1},$9e=Date.prototype.getDay,B9e=function(e){try{return $9e.call(e),!0}catch{return!1}},j9e=Object.prototype.toString,z9e="[object Date]",U9e=sp(),G9e=function(e){return typeof e!="object"||e===null?!1:U9e?B9e(e):j9e.call(e)===z9e},xM=pu,t1e=sp(),i1e,r1e,wM,EM;if(t1e){i1e=xM("Object.prototype.hasOwnProperty"),r1e=xM("RegExp.prototype.exec"),wM={};var Ik=function(){throw wM};EM={toString:Ik,valueOf:Ik},typeof Symbol.toPrimitive=="symbol"&&(EM[Symbol.toPrimitive]=Ik)}var q9e=xM("Object.prototype.toString"),H9e=Object.getOwnPropertyDescriptor,V9e="[object RegExp]",W9e=t1e?function(e){if(!e||typeof e!="object")return!1;var t=H9e(e,"lastIndex"),r=t&&i1e(t,"value");if(!r)return!1;try{r1e(e,EM)}catch(n){return n===wM}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:q9e(e)===V9e},Y9e=pu,Bde=Y9e("SharedArrayBuffer.prototype.byteLength",!0),X9e=Bde?function(e){if(!e||typeof e!="object")return!1;try{return Bde(e),!0}catch{return!1}}:function(e){return!1},Z9e=Number.prototype.toString,K9e=function(e){try{return Z9e.call(e),!0}catch{return!1}},J9e=Object.prototype.toString,Q9e="[object Number]",eze=sp(),tze=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:eze?K9e(e):J9e.call(e)===Q9e},n1e=pu,ize=n1e("Boolean.prototype.toString"),rze=n1e("Object.prototype.toString"),nze=function(e){try{return ize(e),!0}catch{return!1}},sze="[object Boolean]",oze=sp(),aze=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:oze&&Symbol.toStringTag in e?nze(e):rze(e)===sze},SM={exports:{}},lze=Object.prototype.toString,uze=jR();if(uze){var cze=Symbol.prototype.toString,hze=/^Symbol\(.*\)$/,dze=function(e){return typeof e.valueOf()!="symbol"?!1:hze.test(cze.call(e))};SM.exports=function(e){if(typeof e=="symbol")return!0;if(lze.call(e)!=="[object Symbol]")return!1;try{return dze(e)}catch{return!1}}}else SM.exports=function(e){return!1};var fze=SM.exports,CM={exports:{}},jde=typeof BigInt<"u"&&BigInt,pze=function(){return typeof jde=="function"&&typeof BigInt=="function"&&typeof jde(42)=="bigint"&&typeof BigInt(42)=="bigint"},mze=pze();if(mze){var gze=BigInt.prototype.valueOf,yze=function(e){try{return gze.call(e),!0}catch{}return!1};CM.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:yze(e)}}else CM.exports=function(e){return!1};var vze=CM.exports,bze=qbe,_ze=tze,xze=aze,wze=fze,Eze=vze,Sze=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(bze(e))return"String";if(_ze(e))return"Number";if(xze(e))return"Boolean";if(wze(e))return"Symbol";if(Eze(e))return"BigInt"},zS=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,zde=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,US;zS||(US=function(e){return!1});var TM=zS?zS.prototype.has:null,Ok=zde?zde.prototype.has:null;!US&&!TM&&(US=function(e){return!1});var Cze=US||function(e){if(!e||typeof e!="object")return!1;try{if(TM.call(e,TM),Ok)try{Ok.call(e,Ok)}catch{return!0}return e instanceof zS}catch{}return!1},AM={exports:{}},Tze=Qc,s1e=pu,Aze=Tze("%WeakSet%",!0),Pk=s1e("WeakSet.prototype.has",!0);if(Pk){var Fk=s1e("WeakMap.prototype.has",!0);AM.exports=function(e){if(!e||typeof e!="object")return!1;try{if(Pk(e,Pk),Fk)try{Fk(e,Fk)}catch{return!0}return e instanceof Aze}catch{}return!1}}else AM.exports=function(e){return!1};var kze=AM.exports,Dze=Vbe,Mze=Ybe,Lze=Cze,Rze=kze,Ize=function(e){if(e&&typeof e=="object"){if(Dze(e))return"Map";if(Mze(e))return"Set";if(Lze(e))return"WeakMap";if(Rze(e))return"WeakSet"}return!1},o1e=Function.prototype.toString,z0=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,kM,Q2;if(typeof z0=="function"&&typeof Object.defineProperty=="function")try{kM=Object.defineProperty({},"length",{get:function(){throw Q2}}),Q2={},z0(function(){throw 42},null,kM)}catch(i){i!==Q2&&(z0=null)}else z0=null;var Oze=/^\s*class\b/,DM=function(e){try{var t=o1e.call(e);return Oze.test(t)}catch{return!1}},Nk=function(e){try{return DM(e)?!1:(o1e.call(e),!0)}catch{return!1}},eS=Object.prototype.toString,Pze="[object Object]",Fze="[object Function]",Nze="[object GeneratorFunction]",$ze="[object HTMLAllCollection]",Bze="[object HTML document.all class]",jze="[object HTMLCollection]",zze=typeof Symbol=="function"&&!!Symbol.toStringTag,Uze=!(0 in[,]),MM=function(){return!1};if(typeof document=="object"){var Gze=document.all;eS.call(Gze)===eS.call(document.all)&&(MM=function(e){if((Uze||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=eS.call(e);return(t===$ze||t===Bze||t===jze||t===Pze)&&e("")==null}catch{}return!1})}var qze=z0?function(e){if(MM(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{z0(e,null,kM)}catch(t){if(t!==Q2)return!1}return!DM(e)&&Nk(e)}:function(e){if(MM(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(zze)return Nk(e);if(DM(e))return!1;var t=eS.call(e);return t!==Fze&&t!==Nze&&!/^\[object HTML/.test(t)?!1:Nk(e)},Hze=qze,Vze=Object.prototype.toString,a1e=Object.prototype.hasOwnProperty,Wze=function(e,t,r){for(var n=0,s=e.length;n<s;n++)a1e.call(e,n)&&(r==null?t(e[n],n,e):t.call(r,e[n],n,e))},Yze=function(e,t,r){for(var n=0,s=e.length;n<s;n++)r==null?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},Xze=function(e,t,r){for(var n in e)a1e.call(e,n)&&(r==null?t(e[n],n,e):t.call(r,e[n],n,e))},Zze=function(e,t,r){if(!Hze(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),Vze.call(e)==="[object Array]"?Wze(e,t,n):typeof e=="string"?Yze(e,t,n):Xze(e,t,n)},Kze=Zze,$k=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Jze=typeof globalThis>"u"?Rn:globalThis,Qze=function(){for(var e=[],t=0;t<$k.length;t++)typeof Jze[$k[t]]=="function"&&(e[e.length]=$k[t]);return e},GS=Kze,e7e=Qze,Ude=gv,eI=pu,tS=GR,t7e=eI("Object.prototype.toString"),l1e=sp(),Gde=typeof globalThis>"u"?Rn:globalThis,LM=e7e(),tI=eI("String.prototype.slice"),Bk=Object.getPrototypeOf,i7e=eI("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},qS={__proto__:null};l1e&&tS&&Bk?GS(LM,function(i){var e=new Gde[i];if(Symbol.toStringTag in e){var t=Bk(e),r=tS(t,Symbol.toStringTag);if(!r){var n=Bk(t);r=tS(n,Symbol.toStringTag)}qS["$"+i]=Ude(r.get)}}):GS(LM,function(i){var e=new Gde[i],t=e.slice||e.set;t&&(qS["$"+i]=Ude(t))});var r7e=function(e){var t=!1;return GS(qS,function(r,n){if(!t)try{"$"+r(e)===n&&(t=tI(n,1))}catch{}}),t},n7e=function(e){var t=!1;return GS(qS,function(r,n){if(!t)try{r(e),t=tI(n,1)}catch{}}),t},iI=function(e){if(!e||typeof e!="object")return!1;if(!l1e){var t=tI(t7e(e),8,-1);return i7e(LM,t)>-1?t:t!=="Object"?!1:n7e(e)}return tS?r7e(e):null},s7e=pu,qde=s7e("ArrayBuffer.prototype.byteLength",!0),o7e=e1e,a7e=function(e){return o7e(e)?qde?qde(e):e.byteLength:NaN},u1e=jBe,eh=pu,Hde=cje,l7e=Qc,Ly=E9e,u7e=Gbe,Vde=R9e,Wde=VR,Yde=O9e,Xde=e1e,Zde=G9e,Kde=W9e,Jde=X9e,Qde=BR,efe=Sze,tfe=Ize,ife=iI,rfe=a7e,nfe=eh("SharedArrayBuffer.prototype.byteLength",!0),sfe=eh("Date.prototype.getTime"),jk=Object.getPrototypeOf,ofe=eh("Object.prototype.toString"),HS=l7e("%Set%",!0),RM=eh("Map.prototype.has",!0),VS=eh("Map.prototype.get",!0),afe=eh("Map.prototype.size",!0),WS=eh("Set.prototype.add",!0),c1e=eh("Set.prototype.delete",!0),YS=eh("Set.prototype.has",!0),iS=eh("Set.prototype.size",!0);function lfe(i,e,t,r){for(var n=Ly(i),s;(s=n.next())&&!s.done;)if(zu(e,s.value,t,r))return c1e(i,s.value),!0;return!1}function h1e(i){if(typeof i>"u")return null;if(typeof i!="object")return typeof i=="symbol"?!1:typeof i=="string"||typeof i=="number"?+i==+i:!0}function c7e(i,e,t,r,n,s){var o=h1e(t);if(o!=null)return o;var a=VS(e,o),l=u1e({},n,{strict:!1});return typeof a>"u"&&!RM(e,o)||!zu(r,a,l,s)?!1:!RM(i,o)&&zu(r,a,l,s)}function h7e(i,e,t){var r=h1e(t);return r??(YS(e,r)&&!YS(i,r))}function ufe(i,e,t,r,n,s){for(var o=Ly(i),a,l;(a=o.next())&&!a.done;)if(l=a.value,zu(t,l,n,s)&&zu(r,VS(e,l),n,s))return c1e(i,l),!0;return!1}function zu(i,e,t,r){var n=t||{};if(n.strict?Vde(i,e):i===e)return!0;var s=efe(i),o=efe(e);if(s!==o)return!1;if(!i||!e||typeof i!="object"&&typeof e!="object")return n.strict?Vde(i,e):i==e;var a=r.has(i),l=r.has(e),u;if(a&&l){if(r.get(i)===r.get(e))return!0}else u={};return a||r.set(i,u),l||r.set(e,u),p7e(i,e,n,r)}function cfe(i){return!i||typeof i!="object"||typeof i.length!="number"||typeof i.copy!="function"||typeof i.slice!="function"||i.length>0&&typeof i[0]!="number"?!1:!!(i.constructor&&i.constructor.isBuffer&&i.constructor.isBuffer(i))}function d7e(i,e,t,r){if(iS(i)!==iS(e))return!1;for(var n=Ly(i),s=Ly(e),o,a,l;(o=n.next())&&!o.done;)if(o.value&&typeof o.value=="object")l||(l=new HS),WS(l,o.value);else if(!YS(e,o.value)){if(t.strict||!h7e(i,e,o.value))return!1;l||(l=new HS),WS(l,o.value)}if(l){for(;(a=s.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!lfe(l,a.value,t.strict,r))return!1}else if(!t.strict&&!YS(i,a.value)&&!lfe(l,a.value,t.strict,r))return!1;return iS(l)===0}return!0}function f7e(i,e,t,r){if(afe(i)!==afe(e))return!1;for(var n=Ly(i),s=Ly(e),o,a,l,u,c,h;(o=n.next())&&!o.done;)if(u=o.value[0],c=o.value[1],u&&typeof u=="object")l||(l=new HS),WS(l,u);else if(h=VS(e,u),typeof h>"u"&&!RM(e,u)||!zu(c,h,t,r)){if(t.strict||!c7e(i,e,u,c,t,r))return!1;l||(l=new HS),WS(l,u)}if(l){for(;(a=s.next())&&!a.done;)if(u=a.value[0],h=a.value[1],u&&typeof u=="object"){if(!ufe(l,i,u,h,t,r))return!1}else if(!t.strict&&(!i.has(u)||!zu(VS(i,u),h,t,r))&&!ufe(l,i,u,h,u1e({},t,{strict:!1}),r))return!1;return iS(l)===0}return!0}function p7e(i,e,t,r){var n,s;if(typeof i!=typeof e||i==null||e==null||ofe(i)!==ofe(e)||Wde(i)!==Wde(e))return!1;var o=Yde(i),a=Yde(e);if(o!==a)return!1;var l=i instanceof Error,u=e instanceof Error;if(l!==u||(l||u)&&(i.name!==e.name||i.message!==e.message))return!1;var c=Kde(i),h=Kde(e);if(c!==h||(c||h)&&(i.source!==e.source||Hde(i)!==Hde(e)))return!1;var d=Zde(i),p=Zde(e);if(d!==p||(d||p)&&sfe(i)!==sfe(e)||t.strict&&jk&&jk(i)!==jk(e))return!1;var m=ife(i),g=ife(e);if(m!==g)return!1;if(m||g){if(i.length!==e.length)return!1;for(n=0;n<i.length;n++)if(i[n]!==e[n])return!1;return!0}var v=cfe(i),b=cfe(e);if(v!==b)return!1;if(v||b){if(i.length!==e.length)return!1;for(n=0;n<i.length;n++)if(i[n]!==e[n])return!1;return!0}var _=Xde(i),E=Xde(e);if(_!==E)return!1;if(_||E)return rfe(i)!==rfe(e)?!1:typeof Uint8Array=="function"&&zu(new Uint8Array(i),new Uint8Array(e),t,r);var C=Jde(i),T=Jde(e);if(C!==T)return!1;if(C||T)return nfe(i)!==nfe(e)?!1:typeof Uint8Array=="function"&&zu(new Uint8Array(i),new Uint8Array(e),t,r);if(typeof i!=typeof e)return!1;var D=Qde(i),M=Qde(e);if(D.length!==M.length)return!1;for(D.sort(),M.sort(),n=D.length-1;n>=0;n--)if(D[n]!=M[n])return!1;for(n=D.length-1;n>=0;n--)if(s=D[n],!zu(i[s],e[s],t,r))return!1;var A=tfe(i),I=tfe(e);return A!==I?!1:A==="Set"||I==="Set"?d7e(i,e,t,r):A==="Map"?f7e(i,e,t,r):!0}var m7e=function(e,t,r){return zu(e,t,r,u7e())};const g7e=$o(m7e);var y7e=Object.defineProperty,bn=(i,e)=>y7e(i,"name",{value:e,configurable:!0}),v7e=class{constructor(e){this.direction=!1,this.compareProperties=!0;var t,r,n;this.precision=10**-((t=e==null?void 0:e.precision)!=null?t:17),this.direction=(r=e==null?void 0:e.direction)!=null?r:!1,this.compareProperties=(n=e==null?void 0:e.compareProperties)!=null?n:!0}compare(e,t){if(e.type!==t.type||!J1(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){const r=IM(e),n=IM(t);return r.every(s=>n.some(o=>this.compare(s,o)))}}return!1}compareCoord(e,t){return e.length===t.length&&e.every((r,n)=>Math.abs(r-t[n])<this.precision)}compareLine(e,t,r=0,n=!1){if(!J1(e,t))return!1;const s=e;let o=t;if(n&&!this.compareCoord(s[0],o[0])){const l=this.fixStartIndex(o,s);if(l)o=l;else return!1}const a=this.compareCoord(s[r],o[r]);return this.direction||a?this.comparePath(s,o):this.compareCoord(s[r],o[o.length-(1+r)])?this.comparePath(s.slice().reverse(),o):!1}fixStartIndex(e,t){let r,n=-1;for(let s=0;s<e.length;s++)if(this.compareCoord(e[s],t[0])){n=s;break}return n>=0&&(r=[].concat(e.slice(n,e.length),e.slice(1,n+1))),r}comparePath(e,t){return e.every((r,n)=>this.compareCoord(r,t[n]))}comparePolygon(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){const r=e.coordinates.slice(1,e.coordinates.length),n=t.coordinates.slice(1,t.coordinates.length);return r.every(s=>n.some(o=>this.compareLine(s,o,1,!0)))}return!1}compareGeometryCollection(e,t){return J1(e.geometries,t.geometries)&&this.compareBBox(e,t)&&e.geometries.every((r,n)=>this.compare(r,t.geometries[n]))}compareFeature(e,t){return e.id===t.id&&(this.compareProperties?g7e(e.properties,t.properties):!0)&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}compareFeatureCollection(e,t){return J1(e.features,t.features)&&this.compareBBox(e,t)&&e.features.every((r,n)=>this.compare(r,t.features[n]))}compareBBox(e,t){return!e.bbox&&!t.bbox||(e.bbox&&t.bbox?this.compareCoord(e.bbox,t.bbox):!1)}};bn(v7e,"GeojsonEquality");function J1(i,e){return i.coordinates?i.coordinates.length===e.coordinates.length:i.length===e.length}bn(J1,"sameLength");function IM(i){return i.coordinates.map(e=>({type:i.type.replace("Multi",""),coordinates:e}))}bn(IM,"explode");var ml=63710088e-1,d1e={centimeters:ml*100,centimetres:ml*100,degrees:360/(2*Math.PI),feet:ml*3.28084,inches:ml*39.37,kilometers:ml/1e3,kilometres:ml/1e3,meters:ml,metres:ml,miles:ml/1609.344,millimeters:ml*1e3,millimetres:ml*1e3,nauticalmiles:ml/1852,radians:1,yards:ml*1.0936},hfe={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function uu(i,e,t={}){const r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=i,r}bn(uu,"feature");function b7e(i,e,t={}){switch(i){case"Point":return wc(e).geometry;case"LineString":return kc(e).geometry;case"Polygon":return rI(e).geometry;case"MultiPoint":return f1e(e).geometry;case"MultiLineString":return nI(e).geometry;case"MultiPolygon":return p1e(e).geometry;default:throw new Error(i+" is invalid")}}bn(b7e,"geometry");function wc(i,e,t={}){if(!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ry(i[0])||!Ry(i[1]))throw new Error("coordinates must contain numbers");return uu({type:"Point",coordinates:i},e,t)}bn(wc,"point");function _7e(i,e,t={}){return qm(i.map(r=>wc(r,e)),t)}bn(_7e,"points");function rI(i,e,t={}){for(const n of i){if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(n[n.length-1].length!==n[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<n[n.length-1].length;s++)if(n[n.length-1][s]!==n[0][s])throw new Error("First and last Position are not equivalent.")}return uu({type:"Polygon",coordinates:i},e,t)}bn(rI,"polygon");function x7e(i,e,t={}){return qm(i.map(r=>rI(r,e)),t)}bn(x7e,"polygons");function kc(i,e,t={}){if(i.length<2)throw new Error("coordinates must be an array of two or more positions");return uu({type:"LineString",coordinates:i},e,t)}bn(kc,"lineString");function w7e(i,e,t={}){return qm(i.map(r=>kc(r,e)),t)}bn(w7e,"lineStrings");function qm(i,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=i,t}bn(qm,"featureCollection");function nI(i,e,t={}){return uu({type:"MultiLineString",coordinates:i},e,t)}bn(nI,"multiLineString");function f1e(i,e,t={}){return uu({type:"MultiPoint",coordinates:i},e,t)}bn(f1e,"multiPoint");function p1e(i,e,t={}){return uu({type:"MultiPolygon",coordinates:i},e,t)}bn(p1e,"multiPolygon");function E7e(i,e,t={}){return uu({type:"GeometryCollection",geometries:i},e,t)}bn(E7e,"geometryCollection");function S7e(i,e=0){if(e&&!(e>=0))throw new Error("precision must be a positive number");const t=Math.pow(10,e||0);return Math.round(i*t)/t}bn(S7e,"round");function m1e(i,e="kilometers"){const t=d1e[e];if(!t)throw new Error(e+" units is invalid");return i*t}bn(m1e,"radiansToLength");function sI(i,e="kilometers"){const t=d1e[e];if(!t)throw new Error(e+" units is invalid");return i/t}bn(sI,"lengthToRadians");function C7e(i,e){return g1e(sI(i,e))}bn(C7e,"lengthToDegrees");function T7e(i){let e=i%360;return e<0&&(e+=360),e}bn(T7e,"bearingToAzimuth");function g1e(i){return i%(2*Math.PI)*180/Math.PI}bn(g1e,"radiansToDegrees");function A7e(i){return i%360*Math.PI/180}bn(A7e,"degreesToRadians");function k7e(i,e="kilometers",t="kilometers"){if(!(i>=0))throw new Error("length must be a positive number");return m1e(sI(i,e),t)}bn(k7e,"convertLength");function D7e(i,e="meters",t="kilometers"){if(!(i>=0))throw new Error("area must be a positive number");const r=hfe[e];if(!r)throw new Error("invalid original units");const n=hfe[t];if(!n)throw new Error("invalid final units");return i/r*n}bn(D7e,"convertArea");function Ry(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}bn(Ry,"isNumber");function oI(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}bn(oI,"isObject");function M7e(i){if(!i)throw new Error("bbox is required");if(!Array.isArray(i))throw new Error("bbox must be an Array");if(i.length!==4&&i.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");i.forEach(e=>{if(!Ry(e))throw new Error("bbox must only contain numbers")})}bn(M7e,"validateBBox");function L7e(i){if(!i)throw new Error("id is required");if(["string","number"].indexOf(typeof i)===-1)throw new Error("id must be a number or a string")}bn(L7e,"validateId");var R7e=Object.defineProperty,ap=(i,e)=>R7e(i,"name",{value:e,configurable:!0});function aI(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}ap(aI,"getCoord");function y1e(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}ap(y1e,"getCoords");function v1e(i){if(i.length>1&&Ry(i[0])&&Ry(i[1]))return!0;if(Array.isArray(i[0])&&i[0].length)return v1e(i[0]);throw new Error("coordinates must only contain numbers")}ap(v1e,"containsNumber");function I7e(i,e,t){if(!e||!t)throw new Error("type and name required");if(!i||i.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+i.type)}ap(I7e,"geojsonType");function O7e(i,e,t){if(!i)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!i||i.type!=="Feature"||!i.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+i.geometry.type)}ap(O7e,"featureOf");function P7e(i,e,t){if(!i)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!i||i.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(const r of i.features){if(!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+r.geometry.type)}}ap(P7e,"collectionOf");function Hm(i){return i.type==="Feature"?i.geometry:i}ap(Hm,"getGeom");function F7e(i,e){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}ap(F7e,"getType");var N7e=Object.defineProperty,b1e=(i,e)=>N7e(i,"name",{value:e,configurable:!0});function Ll(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const r=aI(i),n=Hm(e),s=n.type,o=e.bbox;let a=n.coordinates;if(o&&_1e(r,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const c=A$e(r,a[u]);if(c===0)return!t.ignoreBoundary;c&&(l=!0)}return l}b1e(Ll,"booleanPointInPolygon");function _1e(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}b1e(_1e,"inBBox");class x1e{constructor(e=[],t=$7e){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const s=e-1>>1,o=t[s];if(r(n,o)>=0)break;t[e]=o,e=s}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,s=t[e];for(;e<n;){let o=(e<<1)+1,a=t[o];const l=o+1;if(l<this.length&&r(t[l],a)<0&&(o=l,a=t[l]),r(a,s)>=0)break;t[e]=a,e=o}t[e]=s}}function $7e(i,e){return i<e?-1:i>e?1:0}function w1e(i,e){return i.p.x>e.p.x?1:i.p.x<e.p.x?-1:i.p.y!==e.p.y?i.p.y>e.p.y?1:-1:1}function B7e(i,e){return i.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:i.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:i.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?i.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}let dfe=class{constructor(e,t,r,n){this.p={x:e[0],y:e[1]},this.featureId=t,this.ringId=r,this.eventId=n,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}};function j7e(i,e){if(i.type==="FeatureCollection"){const t=i.features;for(let r=0;r<t.length;r++)ffe(t[r],e)}else ffe(i,e)}let HE=0,VE=0,WE=0;function ffe(i,e){const t=i.type==="Feature"?i.geometry:i;let r=t.coordinates;(t.type==="Polygon"||t.type==="MultiLineString")&&(r=[r]),t.type==="LineString"&&(r=[[r]]);for(let n=0;n<r.length;n++)for(let s=0;s<r[n].length;s++){let o=r[n][s][0],a=null;VE=VE+1;for(let l=0;l<r[n][s].length-1;l++){a=r[n][s][l+1];const u=new dfe(o,HE,VE,WE),c=new dfe(a,HE,VE,WE+1);u.otherEvent=c,c.otherEvent=u,w1e(u,c)>0?(c.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,c.isLeftEndpoint=!1),e.push(u),e.push(c),o=a,WE=WE+1}}HE=HE+1}class z7e{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function U7e(i,e){if(i===null||e===null||i.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(i.rightSweepEvent.isSamePoint(e.leftSweepEvent)||i.rightSweepEvent.isSamePoint(e.leftSweepEvent)||i.rightSweepEvent.isSamePoint(e.rightSweepEvent)||i.leftSweepEvent.isSamePoint(e.leftSweepEvent)||i.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const t=i.leftSweepEvent.p.x,r=i.leftSweepEvent.p.y,n=i.rightSweepEvent.p.x,s=i.rightSweepEvent.p.y,o=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,l=e.rightSweepEvent.p.x,u=e.rightSweepEvent.p.y,c=(u-a)*(n-t)-(l-o)*(s-r),h=(l-o)*(r-a)-(u-a)*(t-o),d=(n-t)*(r-a)-(s-r)*(t-o);if(c===0)return!1;const p=h/c,m=d/c;if(p>=0&&p<=1&&m>=0&&m<=1){const g=t+p*(n-t),v=r+p*(s-r);return[g,v]}return!1}function G7e(i,e){e=e||!1;const t=[],r=new x1e([],B7e);for(;i.length;){const n=i.pop();if(n.isLeftEndpoint){const s=new z7e(n);for(let o=0;o<r.data.length;o++){const a=r.data[o];if(e&&a.leftSweepEvent.featureId===n.featureId)continue;const l=U7e(s,a);l!==!1&&t.push(l)}r.push(s)}else n.isLeftEndpoint===!1&&r.pop()}return t}function q7e(i,e){const t=new x1e([],w1e);return j7e(i,t),G7e(t,e)}var H7e=Object.defineProperty,V7e=(i,e)=>H7e(i,"name",{value:e,configurable:!0}),W7e=q7e;function VT(i,e,t={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:n=!1}=t;let s=[];i.type==="FeatureCollection"?s=s.concat(i.features):i.type==="Feature"?s.push(i):(i.type==="LineString"||i.type==="Polygon"||i.type==="MultiLineString"||i.type==="MultiPolygon")&&s.push(uu(i)),e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(uu(e));const o=W7e(qm(s),n);let a=[];if(r){const l={};o.forEach(u=>{const c=u.join(",");l[c]||(l[c]=!0,a.push(u))})}else a=o;return qm(a.map(l=>wc(l)))}V7e(VT,"lineIntersect");var Y7e=Object.defineProperty,Bo=(i,e)=>Y7e(i,"name",{value:e,configurable:!0});function vv(i,e,t){if(i!==null)for(var r,n,s,o,a,l,u,c=0,h=0,d,p=i.type,m=p==="FeatureCollection",g=p==="Feature",v=m?i.features.length:1,b=0;b<v;b++){u=m?i.features[b].geometry:g?i.geometry:i,d=u?u.type==="GeometryCollection":!1,a=d?u.geometries.length:1;for(var _=0;_<a;_++){var E=0,C=0;if(o=d?u.geometries[_]:u,o!==null){l=o.coordinates;var T=o.type;switch(c=t&&(T==="Polygon"||T==="MultiPolygon")?1:0,T){case null:break;case"Point":if(e(l,h,b,E,C)===!1)return!1;h++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],h,b,E,C)===!1)return!1;h++,T==="MultiPoint"&&E++}T==="LineString"&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(n=0;n<l[r].length-c;n++){if(e(l[r][n],h,b,E,C)===!1)return!1;h++}T==="MultiLineString"&&E++,T==="Polygon"&&C++}T==="Polygon"&&E++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(C=0,n=0;n<l[r].length;n++){for(s=0;s<l[r][n].length-c;s++){if(e(l[r][n][s],h,b,E,C)===!1)return!1;h++}C++}E++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(vv(o.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}Bo(vv,"coordEach");function X7e(i,e,t,r){var n=t;return vv(i,function(s,o,a,l,u){o===0&&t===void 0?n=s:n=e(n,s,o,a,l,u)},r),n}Bo(X7e,"coordReduce");function E1e(i,e){var t;switch(i.type){case"FeatureCollection":for(t=0;t<i.features.length&&e(i.features[t].properties,t)!==!1;t++);break;case"Feature":e(i.properties,0);break}}Bo(E1e,"propEach");function Z7e(i,e,t){var r=t;return E1e(i,function(n,s){s===0&&t===void 0?r=n:r=e(r,n,s)}),r}Bo(Z7e,"propReduce");function S1e(i,e){if(i.type==="Feature")e(i,0);else if(i.type==="FeatureCollection")for(var t=0;t<i.features.length&&e(i.features[t],t)!==!1;t++);}Bo(S1e,"featureEach");function K7e(i,e,t){var r=t;return S1e(i,function(n,s){s===0&&t===void 0?r=n:r=e(r,n,s)}),r}Bo(K7e,"featureReduce");function J7e(i){var e=[];return vv(i,function(t){e.push(t)}),e}Bo(J7e,"coordAll");function lI(i,e){var t,r,n,s,o,a,l,u,c,h,d=0,p=i.type==="FeatureCollection",m=i.type==="Feature",g=p?i.features.length:1;for(t=0;t<g;t++){for(a=p?i.features[t].geometry:m?i.geometry:i,u=p?i.features[t].properties:m?i.properties:{},c=p?i.features[t].bbox:m?i.bbox:void 0,h=p?i.features[t].id:m?i.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,n=0;n<o;n++){if(s=l?a.geometries[n]:a,s===null){if(e(null,d,u,c,h)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,d,u,c,h)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],d,u,c,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}Bo(lI,"geomEach");function Q7e(i,e,t){var r=t;return lI(i,function(n,s,o,a,l){s===0&&t===void 0?r=n:r=e(r,n,s,o,a,l)}),r}Bo(Q7e,"geomReduce");function Yf(i,e){lI(i,function(t,r,n,s,o){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(uu(t,n,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],h={type:l,coordinates:c};if(e(uu(h,n),r,u)===!1)return!1}})}Bo(Yf,"flattenEach");function eUe(i,e,t){var r=t;return Yf(i,function(n,s,o){s===0&&o===0&&t===void 0?r=n:r=e(r,n,s,o)}),r}Bo(eUe,"flattenReduce");function C1e(i,e){Yf(i,function(t,r,n){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,u=0,c=0;if(vv(t,function(h,d,p,m,g){if(a===void 0||r>l||m>u||g>c){a=h,l=r,u=m,c=g,s=0;return}var v=kc([a,h],t.properties);if(e(v,r,n,g,s)===!1)return!1;s++,a=h})===!1)return!1}}})}Bo(C1e,"segmentEach");function tUe(i,e,t){var r=t,n=!1;return C1e(i,function(s,o,a,l,u){n===!1&&t===void 0?r=s:r=e(r,s,o,a,l,u),n=!0}),r}Bo(tUe,"segmentReduce");function T1e(i,e){if(!i)throw new Error("geojson is required");Yf(i,function(t,r,n){if(t.geometry!==null){var s=t.geometry.type,o=t.geometry.coordinates;switch(s){case"LineString":if(e(t,r,n,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(e(kc(o[a],t.properties),r,n,a)===!1)return!1;break}}})}Bo(T1e,"lineEach");function iUe(i,e,t){var r=t;return T1e(i,function(n,s,o,a){s===0&&t===void 0?r=n:r=e(r,n,s,o,a)}),r}Bo(iUe,"lineReduce");function rUe(i,e){if(e=e||{},!oI(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,n=e.geometryIndex||0,s=e.segmentIndex||0,o=e.properties,a;switch(i.type){case"FeatureCollection":t<0&&(t=i.features.length+t),o=o||i.features[t].properties,a=i.features[t].geometry;break;case"Feature":o=o||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),kc([l[s],l[s+1]],o,e);case"Polygon":return n<0&&(n=l.length+n),s<0&&(s=l[n].length+s-1),kc([l[n][s],l[n][s+1]],o,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s-1),kc([l[r][s],l[r][s+1]],o,e);case"MultiPolygon":return r<0&&(r=l.length+r),n<0&&(n=l[r].length+n),s<0&&(s=l[r][n].length-s-1),kc([l[r][n][s],l[r][n][s+1]],o,e)}throw new Error("geojson is invalid")}Bo(rUe,"findSegment");function nUe(i,e){if(e=e||{},!oI(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,n=e.geometryIndex||0,s=e.coordIndex||0,o=e.properties,a;switch(i.type){case"FeatureCollection":t<0&&(t=i.features.length+t),o=o||i.features[t].properties,a=i.features[t].geometry;break;case"Feature":o=o||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":return wc(l,o,e);case"MultiPoint":return r<0&&(r=l.length+r),wc(l[r],o,e);case"LineString":return s<0&&(s=l.length+s),wc(l[s],o,e);case"Polygon":return n<0&&(n=l.length+n),s<0&&(s=l[n].length+s),wc(l[n][s],o,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),wc(l[r][s],o,e);case"MultiPolygon":return r<0&&(r=l.length+r),n<0&&(n=l[r].length+n),s<0&&(s=l[r][n].length-s),wc(l[r][n][s],o,e)}throw new Error("geojson is invalid")}Bo(nUe,"findPoint");var sUe=Object.defineProperty,WT=(i,e)=>sUe(i,"name",{value:e,configurable:!0});function XS(i,e={}){const t=Hm(i);switch(!e.properties&&i.type==="Feature"&&(e.properties=i.properties),t.type){case"Polygon":return A1e(t,e);case"MultiPolygon":return k1e(t,e);default:throw new Error("invalid poly")}}WT(XS,"polygonToLine");function A1e(i,e={}){const r=Hm(i).coordinates,n=e.properties?e.properties:i.type==="Feature"?i.properties:{};return uI(r,n)}WT(A1e,"singlePolygonToLine");function k1e(i,e={}){const r=Hm(i).coordinates,n=e.properties?e.properties:i.type==="Feature"?i.properties:{},s=[];return r.forEach(o=>{s.push(uI(o,n))}),qm(s)}WT(k1e,"multiPolygonToLine");function uI(i,e){return i.length>1?nI(i,e):kc(i[0],e)}WT(uI,"coordsToLine");var oUe=Object.defineProperty,lp=(i,e)=>oUe(i,"name",{value:e,configurable:!0});function D1e(i,e){let t=!0;return Yf(i,r=>{Yf(e,n=>{if(t===!1)return!1;t=M1e(r.geometry,n.geometry)})}),t}lp(D1e,"booleanDisjoint");function M1e(i,e){switch(i.type){case"Point":switch(e.type){case"Point":return!O1e(i.coordinates,e.coordinates);case"LineString":return!OM(e,i);case"Polygon":return!Ll(i,e)}break;case"LineString":switch(e.type){case"Point":return!OM(i,e);case"LineString":return!L1e(i,e);case"Polygon":return!PM(e,i)}break;case"Polygon":switch(e.type){case"Point":return!Ll(e,i);case"LineString":return!PM(i,e);case"Polygon":return!R1e(e,i)}}return!1}lp(M1e,"disjoint");function OM(i,e){for(let t=0;t<i.coordinates.length-1;t++)if(I1e(i.coordinates[t],i.coordinates[t+1],e.coordinates))return!0;return!1}lp(OM,"isPointOnLine");function L1e(i,e){return VT(i,e).features.length>0}lp(L1e,"isLineOnLine");function PM(i,e){for(const r of e.coordinates)if(Ll(r,i))return!0;return VT(e,XS(i)).features.length>0}lp(PM,"isLineInPoly");function R1e(i,e){for(const r of i.coordinates[0])if(Ll(r,e))return!0;for(const r of e.coordinates[0])if(Ll(r,i))return!0;return VT(XS(i),XS(e)).features.length>0}lp(R1e,"isPolyInPoly");function I1e(i,e,t){const r=t[0]-i[0],n=t[1]-i[1],s=e[0]-i[0],o=e[1]-i[1];return r*o-n*s!==0?!1:Math.abs(s)>=Math.abs(o)?s>0?i[0]<=t[0]&&t[0]<=e[0]:e[0]<=t[0]&&t[0]<=i[0]:o>0?i[1]<=t[1]&&t[1]<=e[1]:e[1]<=t[1]&&t[1]<=i[1]}lp(I1e,"isPointOnLineSegment");function O1e(i,e){return i[0]===e[0]&&i[1]===e[1]}lp(O1e,"compareCoords");var aUe=Object.defineProperty,lUe=(i,e)=>aUe(i,"name",{value:e,configurable:!0});function P1e(i,e){let t=!1;return Yf(i,r=>{Yf(e,n=>{if(t===!0)return!0;t=!D1e(r.geometry,n.geometry)})}),t}lUe(P1e,"booleanIntersects");var uUe=Object.defineProperty,cUe=(i,e)=>uUe(i,"name",{value:e,configurable:!0});function nx(i,e={}){if(i.bbox!=null&&e.recompute!==!0)return i.bbox;const t=[1/0,1/0,-1/0,-1/0];return vv(i,r=>{t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}cUe(nx,"bbox");var hUe=Object.defineProperty,F1e=(i,e)=>hUe(i,"name",{value:e,configurable:!0});function sx(i,e,t={}){const r=aI(i),n=y1e(e);for(let s=0;s<n.length-1;s++){let o=!1;if(t.ignoreEndVertices&&(s===0&&(o="start"),s===n.length-2&&(o="end"),s===0&&s+1===n.length-1&&(o="both")),N1e(n[s],n[s+1],r,o,typeof t.epsilon>"u"?null:t.epsilon))return!0}return!1}F1e(sx,"booleanPointOnLine");function N1e(i,e,t,r,n){const s=t[0],o=t[1],a=i[0],l=i[1],u=e[0],c=e[1],h=t[0]-a,d=t[1]-l,p=u-a,m=c-l,g=h*m-d*p;if(n!==null){if(Math.abs(g)>n)return!1}else if(g!==0)return!1;if(r){if(r==="start")return Math.abs(p)>=Math.abs(m)?p>0?a<s&&s<=u:u<=s&&s<a:m>0?l<o&&o<=c:c<=o&&o<l;if(r==="end")return Math.abs(p)>=Math.abs(m)?p>0?a<=s&&s<u:u<s&&s<=a:m>0?l<=o&&o<c:c<o&&o<=l;if(r==="both")return Math.abs(p)>=Math.abs(m)?p>0?a<s&&s<u:u<s&&s<a:m>0?l<o&&o<c:c<o&&o<l}else return Math.abs(p)>=Math.abs(m)?p>0?a<=s&&s<=u:u<=s&&s<=a:m>0?l<=o&&o<=c:c<=o&&o<=l;return!1}F1e(N1e,"isPointOnLineSegment");var dUe=Object.defineProperty,Qu=(i,e)=>dUe(i,"name",{value:e,configurable:!0});function $1e(i,e){var t=Hm(i),r=Hm(e),n=t.type,s=r.type;switch(n){case"Point":switch(s){case"MultiPoint":return B1e(t,r);case"LineString":return sx(t,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Ll(t,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"MultiPoint":return j1e(t,r);case"LineString":return z1e(t,r);case"Polygon":case"MultiPolygon":return U1e(t,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"LineString":return G1e(t,r);case"Polygon":case"MultiPolygon":return q1e(t,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Polygon":case"MultiPolygon":return H1e(t,r);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}Qu($1e,"booleanWithin");function B1e(i,e){var t,r=!1;for(t=0;t<e.coordinates.length;t++)if(hI(e.coordinates[t],i.coordinates)){r=!0;break}return r}Qu(B1e,"isPointInMultiPoint");function j1e(i,e){for(var t=0;t<i.coordinates.length;t++){for(var r=!1,n=0;n<e.coordinates.length;n++)hI(i.coordinates[t],e.coordinates[n])&&(r=!0);if(!r)return!1}return!0}Qu(j1e,"isMultiPointInMultiPoint");function z1e(i,e){for(var t=!1,r=0;r<i.coordinates.length;r++){if(!sx(i.coordinates[r],e))return!1;t||(t=sx(i.coordinates[r],e,{ignoreEndVertices:!0}))}return t}Qu(z1e,"isMultiPointOnLine");function U1e(i,e){for(var t=!0,r=!1,n=0;n<i.coordinates.length;n++){if(r=Ll(i.coordinates[n],e),!r){t=!1;break}r=Ll(i.coordinates[n],e,{ignoreBoundary:!0})}return t&&r}Qu(U1e,"isMultiPointInPoly");function G1e(i,e){for(var t=0;t<i.coordinates.length;t++)if(!sx(i.coordinates[t],e))return!1;return!0}Qu(G1e,"isLineOnLine");function q1e(i,e){var t=nx(e),r=nx(i);if(!cI(t,r))return!1;for(var n=!1,s=0;s<i.coordinates.length;s++){if(!Ll(i.coordinates[s],e))return!1;if(n||(n=Ll(i.coordinates[s],e,{ignoreBoundary:!0})),!n&&s<i.coordinates.length-1){var o=V1e(i.coordinates[s],i.coordinates[s+1]);n=Ll(o,e,{ignoreBoundary:!0})}}return n}Qu(q1e,"isLineInPoly");function H1e(i,e){var t=nx(i),r=nx(e);if(!cI(r,t))return!1;for(var n=0;n<i.coordinates[0].length;n++)if(!Ll(i.coordinates[0][n],e))return!1;return!0}Qu(H1e,"isPolyInPoly");function cI(i,e){return!(i[0]>e[0]||i[2]<e[2]||i[1]>e[1]||i[3]<e[3])}Qu(cI,"doBBoxOverlap");function hI(i,e){return i[0]===e[0]&&i[1]===e[1]}Qu(hI,"compareCoords");function V1e(i,e){return[(i[0]+e[0])/2,(i[1]+e[1])/2]}Qu(V1e,"getMidpoint");var fUe=Object.defineProperty,pUe=Object.getOwnPropertyDescriptor,uw=(i,e,t,r)=>{for(var n=r>1?void 0:r?pUe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&fUe(e,t,n),n};const mUe=(i,e)=>e?P1e(i,e):!0,gUe=(i,e)=>e?$1e(i,e):!0;let FM=class extends Lr{reset(){pv(this.filterObject),this.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),this.requestUpdate()}createRenderRoot(){return this}render(){return Pi(this.filterObject,()=>{var i;return Qe`
      <form style="display: inline">
      ${Ka(["intersects","within"],e=>Qe`
          <label>
            <input
              type="radio"
              name="mode"
              .checked="${this.filterObject.state.mode===e||mr}
              "
              value="${e}"
              @click="${()=>{this.filterObject.state.mode=e;const t=new CustomEvent("filter",{detail:{[this.filterObject.key]:{}}});this.dispatchEvent(t)}}"
            />
            <small>${e} filter geometry</small>
          </label>
        `)}
      </form>
      <eox-itemfilter-spatial-filter
        exportparts="map: spatial-filter-map"
        .geometry=${(i=this.filterObject.state)==null?void 0:i.geometry}
        @filter="${e=>{this.filterObject.state.geometry=e.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
      ></eox-itemfilter-spatial>
    `})}};uw([Pt()],FM.prototype,"filterObject",2);FM=uw([yo("eox-itemfilter-spatial")],FM);let ZS=class extends Lr{render(){return Qe`<eox-map part="map" style="height: 400px"></eox-map>`}firstUpdated(){this.setup()}setup(){const i=[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...this.geometry&&{format:"GeoJSON"},...this.geometry&&{url:this.createFeatureUrl(this.geometry)}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://s2maps-tiles.eu/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}];this.eoxMap=this.renderRoot.querySelector("eox-map"),setTimeout(()=>{this.eoxMap.layers=i;const e=t=>{const r=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:t.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});this.dispatchEvent(r)};this.eoxMap.interactions.drawInteraction.on("drawend",t=>{e(t.feature),this.eoxMap.removeInteraction("drawInteraction")}),this.eoxMap.interactions.drawInteraction_modify.on("modifyend",t=>{e(t.features.getArray()[0])})},1e3)}createFeatureUrl(i){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:i}]}))}`}reset(){var e;const i=this.eoxMap.getLayerById("draw").getSource();((e=i.getFeatures())==null?void 0:e.length)>0&&(i.clear(),this.eoxMap.removeInteraction("drawInteraction_modify"),this.setup())}};uw([Pt()],ZS.prototype,"geometry",2);uw([Ds()],ZS.prototype,"eoxMap",2);ZS=uw([yo("eox-itemfilter-spatial-filter")],ZS);var yUe=Object.defineProperty,vUe=Object.getOwnPropertyDescriptor,W1e=(i,e,t,r)=>{for(var n=r>1?void 0:r?vUe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&yUe(e,t,n),n};let NM=class extends Lr{constructor(){super(...arguments),this.inputHandler=()=>{const i=this.renderRoot.querySelector("input[type='text']");this.filterObject.keys.forEach(e=>{this.filterObject.state[e]=i.value}),this.filterObject.dirty=!0,this.filterObject.stringifiedState=i.value,this.dispatchEvent(new CustomEvent("filter"))},this.debouncedInputHandler=fv(this.inputHandler,500,{leading:!0})}reset(){const i=this.renderRoot.querySelector("input[type='text']");i.value="",pv(this.filterObject),this.filterObject.dirty=!1,this.requestUpdate()}createRenderRoot(){return this}render(){return Pi(this.filterObject,()=>Qe`
        <style>
          input {
            max-height: 100%;
          }
        </style>
        <input
          type="text"
          placeholder="Type something..."
          data-cy="search"
          part="input-search"
          value="${Object.values(this.filterObject.state)[0]}"
          @input="${this.debouncedInputHandler}"
          @click=${i=>{i.stopPropagation()}}
        />
      `)}};W1e([Pt()],NM.prototype,"filterObject",2);NM=W1e([yo("eox-itemfilter-text")],NM);var bUe=Object.defineProperty,_Ue=Object.getOwnPropertyDescriptor,ag=(i,e,t,r)=>{for(var n=r>1?void 0:r?_Ue(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&bUe(e,t,n),n};let Xf=class extends Lr{constructor(){super(...arguments),this.idProperty="id",this.items=[],this.titleProperty="title",this.unstyled=!1,this.inputText="",this.replaceInput=null,this._clickOutsideListener=()=>{this.items.forEach(i=>{delete i._inProgress}),this.requestUpdate()},this._keyboardEventListener=i=>{["Enter","Escape","Space"].includes(i.code)&&this._handleKeyboard(i.code)}}_handleKeyboard(i){var s,o,a,l,u,c;if(this.clientHeight===0)return;const e=this.items.find(h=>h._inProgress),t=(e==null?void 0:e.type)==="text"&&(e==null?void 0:e.dirty),r=this.renderRoot.querySelector("#inline-input"),n=(c=(u=(l=(a=(o=(s=this.renderRoot)==null?void 0:s.querySelector("[data-filter]"))==null?void 0:o.querySelector("eox-autocomplete"))==null?void 0:a.renderRoot)==null?void 0:l.querySelector("eox-selectionlist"))==null?void 0:u.renderRoot)==null?void 0:c.querySelector("li.highlighted");if(i=="Enter"&&n&&r.selectionStart&&(n.querySelector("input[type=checkbox]").dispatchEvent(new Event("change")),r.selectionStart=0,r.value="",r.focus()),["Escape","Space"].includes(i)||i=="Enter"&&t){e&&(delete e._inProgress,this.requestUpdate(),this.inputText="",this.renderRoot.querySelector("input").value="",this.renderRoot.querySelector("input").focus()),this.renderRoot.querySelector("[slot=content]").classList.remove("hidden");return}}_handleReset(i){i.forEach(e=>{pv(e),delete e._inProgress,delete e.stringifiedState}),this.renderRoot.querySelector("[slot=content]").classList.remove("hidden"),this.requestUpdate(),this.dispatchEvent(new CustomEvent("filter"))}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",this._keyboardEventListener),window.addEventListener("click",this._clickOutsideListener)}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener),window.removeEventListener("click",this._clickOutsideListener)}render(){return Qe`
      <style>
        :host,
        .container {
          display: flex;
        }
        ${this.unstyled?mr:Qe`
              ${sg} :host { position: relative; } .container { width: 100%;
              position: relative; border: 1px solid #00417066; border-radius:
              4px; height: 24px; padding: 5px; flex: 1; justify-content:
              space-between; cursor: text; transition: all 0.2s ease-in-out;
              overflow-x: auto; } .container:hover { border: 1px solid #004170;
              } .input-container { display: flex; flex: 1; align-items: center;
              } input, input:focus { height: 100%; border: none; outline: none;
              } .button-container { display: flex; align-items: center;
              justify-content: center; position: absolute; right: 1px; top: 5px;
              height: calc(100% - 10px); width: 34px; background: white; }
              button.icon { color: #004170; height: 24px; font-size: large;
              width: unset; } .container::-webkit-scrollbar { height: 2px; }
              .container::-webkit-scrollbar-thumb { background: lightgrey;
              border-radius: 2px; } .hidden {height: 0; padding: 0; border:
              none;} .hidden:hover {border: none}
            `}
      </style>
      <div
        class="container"
        part="container"
        @click=${i=>{var e;i.stopPropagation(),(e=this.renderRoot.querySelector("input[type=text]"))==null||e.focus()}}
      >
        <eox-itemfilter-chips
          .items=${this.items.filter(i=>i._inProgress||i.stringifiedState)}
          .titleProperty=${this.titleProperty}
          .unstyled=${this.unstyled}
          @items-selected=${i=>{this.items.forEach(e=>{i.detail.find(t=>t.id===e.id)||this._handleReset([e])})}}
          @click=${i=>{i.stopPropagation()}}
        ></eox-itemfilter-chips>
        <div class="input-container">
          <eox-dropdown .parent=${this} .unstyled=${this.unstyled}>
            <input
              id="inline-input"
              slot="trigger"
              type="text"
              placeholder="Type something..."
              @focus=${()=>{this.inputText="",this.requestUpdate()}}
              @input=${i=>{if(this.inputText=i.target.value.toLowerCase(),this.replaceInput){const e=this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("input")||this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("eox-autocomplete").renderRoot.querySelector("input");e&&(e.value=this.inputText,e.dispatchEvent(new Event("input")))}}}
            />
            <div slot="content">
              ${Pi(!this.items.find(i=>i._inProgress),()=>Qe`
                  <eox-selectionlist
                    .filter=${this.inputText}
                    .idProperty=${this.idProperty}
                    .titleProperty=${this.titleProperty}
                    .items=${this.items.filter(i=>!i.stringifiedState)}
                    .multiple=${!1}
                    .selectedItems=${this.items.filter(i=>i.stringifiedState)}
                    .unstyled=${this.unstyled}
                    @click=${i=>{i.stopPropagation()}}
                    @items-highlighted=${()=>{}}
                    @items-selected=${i=>{const e=i.detail;e.length>0&&(e[e.length-1]._inProgress=!0,this.renderRoot.querySelector("input[slot=trigger]").value="",this.inputText="",this.requestUpdate());const t=this.items.find(r=>r._inProgress);(t&&t.type==="text"||t.type==="multiselect"||t.type==="select")&&(this.replaceInput=!0),this.replaceInput&&(setTimeout(()=>{if(t.type==="text")this.renderRoot.querySelector("[slot=content]").classList.add("hidden");else if(t.type==="multiselect"||t.type==="select"){const r=this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("eox-autocomplete");r.renderRoot.querySelector("eox-dropdown").open=!0,r.renderRoot.querySelector(".container").classList.add("hidden")}}),this.renderRoot.querySelector("input").select(),this.renderRoot.querySelector("input").focus())}}
                  >
                  </eox-selectionlist>
                `)}
              ${Pi(this.items.find(i=>i._inProgress),()=>sy`
            <eox-itemfilter-${Ac(this.items.find(i=>i._inProgress).type)}
              data-filter=${this.items.find(i=>i._inProgress).id}
              slot="dropdown"
              .filterObject=${this.items.find(i=>i._inProgress)}
              .unstyled=${this.unstyled}
              .inline=${!0}
              @filter=${()=>{this.dispatchEvent(new CustomEvent("filter"))}}
              @click=${i=>{i.stopPropagation()}}
            ></eox-itemfilter-${Ac(this.items.find(i=>i._inProgress).type)}>
  `)}
            </div>
          </eox-dropdown>
        </div>
      </div>
      ${Pi(this.items.filter(i=>i.stringifiedState||i._inProgress).length>0,()=>Qe`
          <div class="button-container">
            <button
              class="icon"
              @click=${()=>{this._handleReset(this.items.filter(i=>i.stringifiedState||i._inProgress))}}
            >
              
            </button>
          </div>
        `)}
    `}};ag([Pt()],Xf.prototype,"idProperty",2);ag([Pt()],Xf.prototype,"items",2);ag([Pt()],Xf.prototype,"titleProperty",2);ag([Pt()],Xf.prototype,"unstyled",2);ag([Ds()],Xf.prototype,"inputText",2);ag([Ds()],Xf.prototype,"replaceInput",2);Xf=ag([yo("eox-itemfilter-inline")],Xf);function od(i){return Array.isArray?Array.isArray(i):Z1e(i)==="[object Array]"}const xUe=1/0;function wUe(i){if(typeof i=="string")return i;let e=i+"";return e=="0"&&1/i==-xUe?"-0":e}function EUe(i){return i==null?"":wUe(i)}function Dc(i){return typeof i=="string"}function Y1e(i){return typeof i=="number"}function SUe(i){return i===!0||i===!1||CUe(i)&&Z1e(i)=="[object Boolean]"}function X1e(i){return typeof i=="object"}function CUe(i){return X1e(i)&&i!==null}function wl(i){return i!=null}function zk(i){return!i.trim().length}function Z1e(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const TUe="Incorrect 'index' type",AUe=i=>`Invalid value for key ${i}`,kUe=i=>`Pattern length exceeds max of ${i}.`,DUe=i=>`Missing ${i} property in key`,MUe=i=>`Property 'weight' in key '${i}' must be a positive integer`,pfe=Object.prototype.hasOwnProperty;class LUe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let n=K1e(r);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function K1e(i){let e=null,t=null,r=null,n=1,s=null;if(Dc(i)||od(i))r=i,e=mfe(i),t=$M(i);else{if(!pfe.call(i,"name"))throw new Error(DUe("name"));const o=i.name;if(r=o,pfe.call(i,"weight")&&(n=i.weight,n<=0))throw new Error(MUe(o));e=mfe(o),t=$M(o),s=i.getFn}return{path:e,id:t,weight:n,src:r,getFn:s}}function mfe(i){return od(i)?i:i.split(".")}function $M(i){return od(i)?i.join("."):i}function RUe(i,e){let t=[],r=!1;const n=(s,o,a)=>{if(wl(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!wl(u))return;if(a===o.length-1&&(Dc(u)||Y1e(u)||SUe(u)))t.push(EUe(u));else if(od(u)){r=!0;for(let c=0,h=u.length;c<h;c+=1)n(u[c],o,a+1)}else o.length&&n(u,o,a+1)}};return n(i,Dc(e)?e.split("."):e,0),r?t:t[0]}const IUe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},OUe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,e)=>i.score===e.score?i.idx<e.idx?-1:1:i.score<e.score?-1:1},PUe={location:0,threshold:.6,distance:100},FUe={useExtendedSearch:!1,getFn:RUe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ji={...OUe,...IUe,...PUe,...FUe};const NUe=/[^ ]+/g;function $Ue(i=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(n){const s=n.match(NUe).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*i),a=parseFloat(Math.round(o*r)/r);return t.set(s,a),a},clear(){t.clear()}}}class dI{constructor({getFn:e=ji.getFn,fieldNormWeight:t=ji.fieldNormWeight}={}){this.norm=$Ue(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Dc(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Dc(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!wl(e)||zk(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((n,s)=>{let o=n.getFn?n.getFn(e):this.getFn(e,n.path);if(wl(o)){if(od(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(wl(c))if(Dc(c)&&!zk(c)){let h={v:c,i:u,n:this.norm.get(c)};a.push(h)}else od(c)&&c.forEach((h,d)=>{l.push({nestedArrIndex:d,value:h})})}r.$[s]=a}else if(Dc(o)&&!zk(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function J1e(i,e,{getFn:t=ji.getFn,fieldNormWeight:r=ji.fieldNormWeight}={}){const n=new dI({getFn:t,fieldNormWeight:r});return n.setKeys(i.map(K1e)),n.setSources(e),n.create(),n}function BUe(i,{getFn:e=ji.getFn,fieldNormWeight:t=ji.fieldNormWeight}={}){const{keys:r,records:n}=i,s=new dI({getFn:e,fieldNormWeight:t});return s.setKeys(r),s.setIndexRecords(n),s}function YE(i,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:n=ji.distance,ignoreLocation:s=ji.ignoreLocation}={}){const o=e/i.length;if(s)return o;const a=Math.abs(r-t);return n?o+a/n:a?1:o}function jUe(i=[],e=ji.minMatchCharLength){let t=[],r=-1,n=-1,s=0;for(let o=i.length;s<o;s+=1){let a=i[s];a&&r===-1?r=s:!a&&r!==-1&&(n=s-1,n-r+1>=e&&t.push([r,n]),r=-1)}return i[s-1]&&s-r>=e&&t.push([r,s-1]),t}const mm=32;function zUe(i,e,t,{location:r=ji.location,distance:n=ji.distance,threshold:s=ji.threshold,findAllMatches:o=ji.findAllMatches,minMatchCharLength:a=ji.minMatchCharLength,includeMatches:l=ji.includeMatches,ignoreLocation:u=ji.ignoreLocation}={}){if(e.length>mm)throw new Error(kUe(mm));const c=e.length,h=i.length,d=Math.max(0,Math.min(r,h));let p=s,m=d;const g=a>1||l,v=g?Array(h):[];let b;for(;(b=i.indexOf(e,m))>-1;){let M=YE(e,{currentLocation:b,expectedLocation:d,distance:n,ignoreLocation:u});if(p=Math.min(M,p),m=b+c,g){let A=0;for(;A<c;)v[b+A]=1,A+=1}}m=-1;let _=[],E=1,C=c+h;const T=1<<c-1;for(let M=0;M<c;M+=1){let A=0,I=C;for(;A<I;)YE(e,{errors:M,currentLocation:d+I,expectedLocation:d,distance:n,ignoreLocation:u})<=p?A=I:C=I,I=Math.floor((C-A)/2+A);C=I;let P=Math.max(1,d-I+1),U=o?h:Math.min(d+I,h)+c,K=Array(U+2);K[U+1]=(1<<M)-1;for(let F=U;F>=P;F-=1){let $=F-1,H=t[i.charAt($)];if(g&&(v[$]=+!!H),K[F]=(K[F+1]<<1|1)&H,M&&(K[F]|=(_[F+1]|_[F])<<1|1|_[F+1]),K[F]&T&&(E=YE(e,{errors:M,currentLocation:$,expectedLocation:d,distance:n,ignoreLocation:u}),E<=p)){if(p=E,m=$,m<=d)break;P=Math.max(1,2*d-m)}}if(YE(e,{errors:M+1,currentLocation:d,expectedLocation:d,distance:n,ignoreLocation:u})>p)break;_=K}const D={isMatch:m>=0,score:Math.max(.001,E)};if(g){const M=jUe(v,a);M.length?l&&(D.indices=M):D.isMatch=!1}return D}function UUe(i){let e={};for(let t=0,r=i.length;t<r;t+=1){const n=i.charAt(t);e[n]=(e[n]||0)|1<<r-t-1}return e}class Q1e{constructor(e,{location:t=ji.location,threshold:r=ji.threshold,distance:n=ji.distance,includeMatches:s=ji.includeMatches,findAllMatches:o=ji.findAllMatches,minMatchCharLength:a=ji.minMatchCharLength,isCaseSensitive:l=ji.isCaseSensitive,ignoreLocation:u=ji.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(d,p)=>{this.chunks.push({pattern:d,alphabet:UUe(d),startIndex:p})},h=this.pattern.length;if(h>mm){let d=0;const p=h%mm,m=h-p;for(;d<m;)c(this.pattern.substr(d,mm),d),d+=mm;if(p){const g=h-mm;c(this.pattern.substr(g),g)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let m={isMatch:!0,score:0};return r&&(m.indices=[[0,e.length-1]]),m}const{location:n,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],h=0,d=!1;this.chunks.forEach(({pattern:m,alphabet:g,startIndex:v})=>{const{isMatch:b,score:_,indices:E}=zUe(e,m,g,{location:n+v,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});b&&(d=!0),h+=_,b&&E&&(c=[...c,...E])});let p={isMatch:d,score:d?h/this.chunks.length:1};return d&&r&&(p.indices=c),p}}class up{constructor(e){this.pattern=e}static isMultiMatch(e){return gfe(e,this.multiRegex)}static isSingleMatch(e){return gfe(e,this.singleRegex)}search(){}}function gfe(i,e){const t=i.match(e);return t?t[1]:null}class GUe extends up{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class qUe extends up{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class HUe extends up{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class VUe extends up{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class WUe extends up{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class YUe extends up{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class e_e extends up{constructor(e,{location:t=ji.location,threshold:r=ji.threshold,distance:n=ji.distance,includeMatches:s=ji.includeMatches,findAllMatches:o=ji.findAllMatches,minMatchCharLength:a=ji.minMatchCharLength,isCaseSensitive:l=ji.isCaseSensitive,ignoreLocation:u=ji.ignoreLocation}={}){super(e),this._bitapSearch=new Q1e(e,{location:t,threshold:r,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class t_e extends up{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r;const n=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+s,n.push([r,t-1]);const o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}}}const BM=[GUe,t_e,HUe,VUe,YUe,WUe,qUe,e_e],yfe=BM.length,XUe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ZUe="|";function KUe(i,e={}){return i.split(ZUe).map(t=>{let r=t.trim().split(XUe).filter(s=>s&&!!s.trim()),n=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,u=-1;for(;!l&&++u<yfe;){const c=BM[u];let h=c.isMultiMatch(a);h&&(n.push(new c(h,e)),l=!0)}if(!l)for(u=-1;++u<yfe;){const c=BM[u];let h=c.isSingleMatch(a);if(h){n.push(new c(h,e));break}}}return n})}const JUe=new Set([e_e.type,t_e.type]);class QUe{constructor(e,{isCaseSensitive:t=ji.isCaseSensitive,includeMatches:r=ji.includeMatches,minMatchCharLength:n=ji.minMatchCharLength,ignoreLocation:s=ji.ignoreLocation,findAllMatches:o=ji.findAllMatches,location:a=ji.location,threshold:l=ji.threshold,distance:u=ji.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:n,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?e:e.toLowerCase(),this.query=KUe(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const c=t[l];o.length=0,s=0;for(let h=0,d=c.length;h<d;h+=1){const p=c[h],{isMatch:m,indices:g,score:v}=p.search(e);if(m){if(s+=1,a+=v,r){const b=p.constructor.type;JUe.has(b)?o=[...o,...g]:o.push(g)}}else{a=0,s=0,o.length=0;break}}if(s){let h={isMatch:!0,score:a/s};return r&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const jM=[];function eGe(...i){jM.push(...i)}function zM(i,e){for(let t=0,r=jM.length;t<r;t+=1){let n=jM[t];if(n.condition(i,e))return new n(i,e)}return new Q1e(i,e)}const KS={AND:"$and",OR:"$or"},UM={PATH:"$path",PATTERN:"$val"},GM=i=>!!(i[KS.AND]||i[KS.OR]),tGe=i=>!!i[UM.PATH],iGe=i=>!od(i)&&X1e(i)&&!GM(i),vfe=i=>({[KS.AND]:Object.keys(i).map(e=>({[e]:i[e]}))});function i_e(i,e,{auto:t=!0}={}){const r=n=>{let s=Object.keys(n);const o=tGe(n);if(!o&&s.length>1&&!GM(n))return r(vfe(n));if(iGe(n)){const l=o?n[UM.PATH]:s[0],u=o?n[UM.PATTERN]:n[l];if(!Dc(u))throw new Error(AUe(l));const c={keyId:$M(l),pattern:u};return t&&(c.searcher=zM(u,e)),c}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=n[l];od(u)&&u.forEach(c=>{a.children.push(r(c))})}),a};return GM(i)||(i=vfe(i)),r(i)}function rGe(i,{ignoreFieldNorm:e=ji.ignoreFieldNorm}){i.forEach(t=>{let r=1;t.matches.forEach(({key:n,norm:s,score:o})=>{const a=n?n.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=r})}function nGe(i,e){const t=i.matches;e.matches=[],wl(t)&&t.forEach(r=>{if(!wl(r.indices)||!r.indices.length)return;const{indices:n,value:s}=r;let o={indices:n,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function sGe(i,e){e.score=i.score}function oGe(i,e,{includeMatches:t=ji.includeMatches,includeScore:r=ji.includeScore}={}){const n=[];return t&&n.push(nGe),r&&n.push(sGe),i.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return n.length&&n.forEach(l=>{l(s,a)}),a})}class bv{constructor(e,t={},r){this.options={...ji,...t},this.options.useExtendedSearch,this._keyStore=new LUe(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof dI))throw new Error(TUe);this._myIndex=t||J1e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){wl(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let r=0,n=this._docs.length;r<n;r+=1){const s=this._docs[r];e(s,r)&&(this.removeAt(r),r-=1,n-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:r,includeScore:n,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=Dc(e)?Dc(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return rGe(l,{ignoreFieldNorm:a}),s&&l.sort(o),Y1e(t)&&t>-1&&(l=l.slice(0,t)),oGe(l,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const t=zM(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:s,i:o,n:a})=>{if(!wl(s))return;const{isMatch:l,score:u,indices:c}=t.searchIn(s);l&&n.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:c}]})}),n}_searchLogical(e){const t=i_e(e,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:h,searcher:d}=a,p=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:d});return p&&p.length?[{idx:u,item:l,matches:p}]:[]}const c=[];for(let h=0,d=a.children.length;h<d;h+=1){const p=a.children[h],m=r(p,l,u);if(m.length)c.push(...m);else if(a.operator===KS.AND)return[]}return c},n=this._myIndex.records,s={},o=[];return n.forEach(({$:a,i:l})=>{if(wl(a)){let u=r(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:c})=>{s[l].matches.push(...c)}))}}),o}_searchObjectList(e){const t=zM(e,this.options),{keys:r,records:n}=this._myIndex,s=[];return n.forEach(({$:o,i:a})=>{if(!wl(o))return;let l=[];r.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:o[c],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:e,value:t,searcher:r}){if(!wl(t))return[];let n=[];if(od(t))t.forEach(({v:s,i:o,n:a})=>{if(!wl(s))return;const{isMatch:l,score:u,indices:c}=r.searchIn(s);l&&n.push({score:u,key:e,value:s,idx:o,norm:a,indices:c})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=r.searchIn(s);a&&n.push({score:l,key:e,value:s,norm:o,indices:u})}return n}}bv.version="7.0.0";bv.createIndex=J1e;bv.parseIndex=BUe;bv.config=ji;bv.parseQuery=i_e;eGe(QUe);const aGe=(i,e="highlight",t="title")=>{const r=(s,o,a)=>{const l=o.split(".");let u;for(u=0;u<l.length-1;u++)s=s[l[u]];s[l[u]]=a},n=(s,o=[])=>{let a="",l=0;return o.forEach(u=>{const c=u[1]+1;a+=[s.substring(l,u[0]),`<mark class="${e}">`,s.substring(u[0],c),"</mark>"].join(""),l=c}),a+=s.substring(l),a};return i.filter(({matches:s})=>s&&s.length).map(({item:s,matches:o})=>{const a={};for(const[l,u]of Object.entries(s))a[l]=u;return o.forEach(l=>{l.key===t&&r(a,l.key,n(l.value,l.indices))}),a})};let r_e;const lGe=(i,e)=>{r_e=new bv(i,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...e})},uGe=async(i,e,t)=>{const r=Object.entries(e).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,u])=>{const c="$or",h=[],d=(p,m)=>{const g={};u.type==="text"?g[p]=`${m}`:g[l]=`="${p}"`,h.push(g)};return Object.entries(u.state).filter(([,p])=>p).forEach(([p,m])=>d(p,m)),h.length>0&&a.push({[c]:h}),a},[]);let n;if(!(r.length>0)&&t.matchAllWhenEmpty!==!1)n=i;else{const a={$and:[...r]},l=r_e.search(a);n=t.enableHighlighting?aGe(l,"highlight",t.titleProperty):l.map(u=>u.item)}const s=Object.entries(e).filter(([,a])=>a.type==="range").reduce((a,[l,u])=>(a[l]={min:u.state.min,max:u.state.max,format:u.format},a),{});if(Object.keys(s).length>0){const a=[];for(let l=0;l<n.length;l++){const u={};for(const[c,h]of Object.entries(s)){const d=p=>h.format==="date"?Vh(p).unix():p;Object.prototype.hasOwnProperty.call(n[l],c)?Array.isArray(n[l][c])?u[c]=s[c].min<=d(n[l][c][1])&&d(n[l][c][0])<=s[c].max:d(n[l][c])>=s[c].min&&d(n[l][c])<=s[c].max?u[c]=!0:u[c]=!1:u[c]=!0}Object.values(u).every(c=>!!c)&&a.push(n[l])}n=[...a]}const o=Object.entries(e).filter(([,a])=>a.type==="spatial").reduce((a,[l,u])=>(a[l]={geometry:u.state.geometry,mode:u.state.mode},a),{});if(Object.values(o).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<n.length;l++){const u={};for(const c of Object.keys(o)){const h=o[c].mode||"within";Object.prototype.hasOwnProperty.call(n[l],c)&&(h==="within"?gUe(n[l][c],o[c].geometry):mUe(n[l][c],o[c].geometry))?u[c]=!0:u[c]=!1}Object.values(u).every(c=>!!c)&&a.push(n[l])}n=[...a]}return n},cGe=async(i,e,t)=>(await(await fetch(`${t.externalFilter(i,e)}`)).json()).features;var hGe=Object.defineProperty,dGe=Object.getOwnPropertyDescriptor,gd=(i,e,t,r)=>{for(var n=r>1?void 0:r?dGe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&hGe(e,t,n),n};class bfe{constructor(){this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.filterProperties=[],this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.onFilter=()=>{},this.onSelect=()=>{},this.showResults=!0,this.titleProperty="title",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0}}let Hc=class extends DR{constructor(){super(...arguments),this._resultAggregation=[],this._items=[],this.filters={},this._config=new bfe,this.apply=i=>{this._items=i.map((t,r)=>({id:`item-${r}`,...t})),this._config.filterProperties.length&&this._config.filterProperties.forEach(t=>{const r={},n=s=>t.format==="date"?Vh(s).unix():parseInt(s);this._items.forEach(s=>{if(t.type==="range"){if(Array.isArray(s[t.key])){const o=[n(s[t.key][0]),n(s[t.key][1])];r.min=r.min!==void 0?Math.min(r.min,o[0]):o[0],r.max=r.max!==void 0?Math.max(r.max,o[1]):o[1]}else{const o=n(s[t.key]);r.min=r.min!==void 0?Math.min(r.min,o):o,r.max=r.max!==void 0?Math.max(r.max,o):o}return}Array.isArray(s[t.key])?s[t.key].forEach(o=>{r[o]=void 0}):t.type==="spatial"?(r.geometry=void 0,r.mode=t.mode||"intersects"):r[s[t.key]]=void 0}),this.filters[t.key||t.keys.join("|")]={...t,type:t.type||"multiselect",state:{...r,...t.state},...t.state&&{dirty:!1},...t.type==="range"&&{min:r.min,max:r.max,format:t.format}}}),this._config.matchAllWhenEmpty!==!1&&(this.results=this.sortResults(this._items),this.requestUpdate()),this._config.aggregateResults&&(this._resultAggregation=[...new Set(this._items.reduce((t,r)=>t.concat(r[this._config.aggregateResults]),[]))].sort((t,r)=>t.localeCompare(r)));const e=[];Object.values(this.filters).forEach(t=>{t.type==="text"?t.keys.forEach(r=>{e.includes(r)||e.push(r)}):(t.type==="select"||t.type==="multiselect")&&(e.includes(t.key)||e.push(t.key))}),lGe(this._items,{keys:e,...this._config.fuseConfig}),this.search()}}set items(i){this.apply(i)}get items(){return this._items}set config(i){const e=this._config;this._config={...new bfe,...i},this.requestUpdate("config",e)}get config(){return this._config}async search(){let i;this.config.externalFilter?i=await cGe(this._items,this.filters,this._config):i=await uGe(this._items,this.filters,this._config),this.results=this.sortResults(i),this._config.onFilter(this.results,this.filters)}aggregateResults(i,e){return i.filter(t=>{const r=t[this._config.aggregateResults];let n;return this.filters[this._config.aggregateResults]&&(n=Object.keys(this.filters[this._config.aggregateResults]).filter(o=>this.filters[this._config.aggregateResults].state[o])),(n!=null&&n.length?n.includes(e):!0)&&Array.isArray(r)?r.includes(e):r===e})}createItemList(i){return Qe`
      <ul>
        ${kR(this.aggregateResults(this.results,i),e=>e.id,e=>{var t,r;return Qe`
            <li
              class=${((t=this.selectedResult)==null?void 0:t[this._config.titleProperty])===e[this._config.titleProperty]?"highlighted":mr}
            >
              <label>
                <input
                  data-cy="result-radio"
                  type="radio"
                  class="result-radio"
                  name="result"
                  id="${e.id}"
                  ?checked=${((r=this.selectedResult)==null?void 0:r[this._config.titleProperty])===e[this._config.titleProperty]||mr}
                  @click=${()=>{this.selectedResult=e,this._config.onSelect(e)}}
                />
                ${Pi(this.hasTemplate("result"),()=>this.renderTemplate("result",e,`result-${e.id}`),()=>Qe`
                    <span class="title"
                      >${_c(e[this._config.titleProperty])}</span
                    >
                  `)}
              </label>
            </li>
          `})}
      </ul>
    `}sortResults(i){return[...i].sort((e,t)=>e[this._config.titleProperty].localeCompare(t[this._config.titleProperty]))}resetFilters(){this.renderRoot.querySelectorAll("[data-type='filter']").forEach(i=>{i.reset()}),this.search()}toggleAccordion(i){let e;if(i.detail?e=i.detail.target:e=i.target,e.classList.contains("details-filter")){if(!e.open||this.config.expandMultipleFilters)return;this.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(t=>{const r=t.shadowRoot.querySelector(".details-filter");r&&r!==e&&r.removeAttribute("open")})}else{if(!e.open||this.config.expandMultipleResults)return;this.shadowRoot.querySelectorAll("details").forEach(t=>{t!==e&&t.removeAttribute("open")})}}render(){return Qe`
      <style>
        ${MR}
        ${!this.unstyled&&IR}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        @submit="${i=>i.preventDefault()}"
      >
        ${Pi(this._config.inlineMode,()=>Qe`
            <eox-itemfilter-inline
              .items=${Object.values(this.filters)}
              .unstyled=${this.unstyled}
              @filter=${()=>this.search()}
            >
            </eox-itemfilter-inline>
          `,()=>Qe`
            ${Pi(this._config.filterProperties.length,()=>Qe`
                <section
                  class="${this.config.inlineMode?"inline":mr}"
                >
                  ${Pi(!this.config.inlineMode,()=>Qe`
                        <slot name="filterstitle"
                          ><h4 style="margin-top: 8px">Filters</h4></slot
                        >
                      `)}
                  <ul id="filters">
                    ${Ka(Object.values(this.filters),i=>sy`
                    <li>
                      ${i.featured?sy`
                            <eox-itemfilter-${Ac(i.type)}
                              slot="filter"
                              data-type="filter"
                              .filterObject=${i}
                              .unstyled=${this.unstyled}
                              @filter="${()=>this.search()}"
                            ></eox-itemfilter-${Ac(i.type)}>
                          `:sy`
                            <eox-itemfilter-expandcontainer
                              .filterObject=${i}
                              .unstyled=${this.unstyled}
                              @details-toggled=${this.toggleAccordion}
                            >
                            ${Pi(i.dirty,()=>Qe`
                                <button
                                  slot="reset-button"
                                  class="reset-icon icon"
                                  @click=${e=>{e.target.parentElement.querySelector("[slot=filter]").reset(),this.search(),this.requestUpdate()}}
                                >
                                  ${this.unstyled?"Reset":mr}
                                </button>
                              `)}
                              <eox-itemfilter-${Ac(i.type)}
                                slot="filter"
                                data-type="filter"
                                data-filter="${i.key}"
                                .filterObject=${i}
                                .unstyled=${this.unstyled}
                                @filter="${()=>this.search()}"
                              ></eox-itemfilter-${Ac(i.type)}>
                            </eox-itemfilter-expandcontainer>
                        `}
                    </li>
                  `)}
                  </ul>
                  ${Pi(this._config.filterProperties&&Object.values(this.filters).map(i=>i.dirty).filter(i=>i).length>0,()=>Qe`
                    <button
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
                </section>
              `)}
            ${Pi(this.config.showResults&&this.results,()=>Qe`
                <section id="section-results">
                  <div>
                    <slot name="resultstitle"
                      ><h4 style="margin-top: 8px">Results</h4></slot
                    >
                  </div>
                  <div id="container-results" class="scroll">
                    ${this.results.length<1?Qe`
                          <small class="no-results">No matching items</small>
                        `:mr}
                    <ul id="results" part="results">
                      ${this._config.aggregateResults?Ka(this._resultAggregation.filter(i=>this.aggregateResults(this.results,i).length),i=>Qe` ${Pi(this.aggregateResults(this.results,i).length===1&&this.config.autoSpreadSingle,()=>Qe` <div style="margin-left: -8px">
                                  ${this.createItemList(i)}
                                </div>`,()=>Qe`
                                  <details
                                    class="details-results"
                                    @toggle=${this.toggleAccordion}
                                    ?open=${this._config.expandResults||mr}
                                  >
                                    <summary>
                                      <span class="title">
                                        ${i}
                                        <span class="count"
                                          >${this.aggregateResults(this.results,i).length}</span
                                        >
                                      </span>
                                    </summary>
                                    <div>
                                      ${this.createItemList(i)}
                                    </div>
                                  </details>
                                `)}`):Ka(this.results,i=>Qe`<li part="result">
                                <label>
                                  <input
                                    type="radio"
                                    name="result"
                                    id="${i.id}"
                                    @click=${()=>{this.selectedResult=i,this._config.onSelect(i)}}
                                  />
                                  ${Pi(this.hasTemplate("result"),()=>this.renderTemplate("result",i,`result-${i.id}`),()=>Qe`
                                      <span class="title"
                                        >${_c(i[this._config.titleProperty])}</span
                                      >
                                    `)}
                                </label>
                              </li>`)}
                    </ul>
                  </div>
                </section>
              `)}
          `)}
      </form>
    `}};gd([Ds()],Hc.prototype,"filters",2);gd([Ds()],Hc.prototype,"results",2);gd([Ds()],Hc.prototype,"selectedResult",2);gd([Pt({attribute:!1})],Hc.prototype,"items",1);gd([Pt({attribute:!1})],Hc.prototype,"config",1);gd([Pt()],Hc.prototype,"apply",2);gd([Pt({attribute:!1})],Hc.prototype,"styleOverride",2);gd([Pt({type:Boolean})],Hc.prototype,"unstyled",2);Hc=gd([yo("eox-itemfilter")],Hc);const fGe=i=>typeof i.type!="string"&&"multiple",pGe=i=>typeof i.type=="string"&&"string",mGe=i=>!i.type&&i.properties&&"object",gGe=i=>typeof i.type=="string"&&["string","number","integer","boolean","null","array","object"].includes(i.type)&&i.type,yGe=i=>i.type==="string"&&i.format==="signature"&&"signature",vGe=i=>{if(i.type==="boolean")return i.format==="checkbox"||i.options&&i.options.checkbox?"checkbox":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},bGe=i=>i.type==="any"&&"multiple",_Ge=i=>i.type==="string"&&i.media&&i.media.binaryEncoding==="base64"&&"base64",xGe=i=>i.type==="string"&&i.format==="url"&&window.FileReader&&i.options&&i.options.upload===Object(i.options.upload)&&"upload",wGe=i=>i.type==="array"&&i.format==="table"&&"table",EGe=i=>{if(i.enumSource)return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},SGe=i=>{if(i.enum){if(i.type==="array"||i.type==="object")return"enum";if(i.type==="number"||i.type==="integer"||i.type==="string")return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"}},CGe=(i,e)=>{if(i.items&&(i.items=e.expandSchema(i.items)),i.type==="array"&&i.items&&!Array.isArray(i.items)&&["string","number","integer"].includes(i.items.type)){if(i.format==="choices")return"arrayChoices";if(i.uniqueItems){if(i.format==="selectize")return"arraySelectize";if(i.format==="select2")return"arraySelect2";if(i.items.enum)return"multiselect"}}},TGe=i=>(i.oneOf||i.anyOf)&&"multiple",AGe=i=>i.if&&"multiple",kGe=i=>["string","integer"].includes(i.type)&&["date","time","datetime-local"].includes(i.format)&&"datetime",DGe=i=>["string","integer"].includes(i.type)&&["starrating","rating"].includes(i.format)&&"starrating",MGe=i=>{if(i.links){for(let e=0;e<i.links.length;e++)if(i.links[e].rel&&i.links[e].rel.toLowerCase()==="describedby")return"describedBy"}},LGe=i=>{if((i.type==="integer"||i.type==="number")&&i.format==="stepper")return"stepper"},RGe=i=>i.format==="button"&&"button",IGe=i=>i.format==="info"&&"info",OGe=i=>i.type==="string"&&i.format==="uuid"&&"uuid",PGe=i=>i.type==="string"&&i.format==="autocomplete"&&"autocomplete",FGe=i=>i.type==="string"&&i.format==="jodit"&&"jodit",NGe=i=>i.type==="string"&&i.format==="markdown"&&"simplemde",$Ge=i=>i.type==="string"&&["xhtml","bbcode"].includes(i.format)&&"sceditor",BGe=["actionscript","batchfile","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","prql","r","ruby","rust","sass","scala","scss","sh","smarty","sql","sqlserver","stylus","svg","typescript","twig","vbscript","xml","yaml","zig"],jGe=i=>i.type==="string"&&BGe.includes(i.format)&&"ace",zGe=i=>i.type==="string"&&["ip","ipv4","ipv6","hostname"].includes(i.format)&&"ip",UGe=i=>i.type==="string"&&i.format==="color"&&"colorpicker",GGe=[UGe,zGe,jGe,$Ge,NGe,FGe,PGe,OGe,IGe,RGe,LGe,MGe,DGe,kGe,TGe,AGe,CGe,SGe,EGe,wGe,xGe,_Ge,bGe,vGe,yGe,gGe,mGe,fGe,pGe];function n_e(i){return!(i===null||typeof i!="object"||i.nodeType||i===i.window||i.constructor&&!Rl(i.constructor.prototype,"isPrototypeOf"))}function s_e(i){return n_e(i)?ki({},i):Array.isArray(i)?i.map(s_e):i}function ki(i,...e){return e.forEach(t=>{t&&Object.keys(t).forEach(r=>{t[r]&&n_e(t[r])?(Rl(i,r)||(i[r]={}),ki(i[r],t[r])):Array.isArray(t[r])?i[r]=s_e(t[r]):i[r]=t[r]})}),i}function Uu(i,e){const t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),i.dispatchEvent(t)}function o_e(i){return i&&(i.toString()==="[object ShadowRoot]"?i:o_e(i.parentNode))}function Rl(i,e){return i&&Object.prototype.hasOwnProperty.call(i,e)}const qGe=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;function HGe(i){if(typeof i>"u"||i===null)return!1;const e=i.match(qGe),t=parseFloat(i);return e!==null&&!isNaN(t)&&isFinite(t)}const VGe=/^\s*(-|\+)?(\d+)\s*$/;function WGe(i){if(typeof i>"u"||i===null)return!1;const e=i.match(VGe),t=parseInt(i);return e!==null&&!isNaN(t)&&isFinite(t)}function ox(){let i=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(e==="x"?t:t&3|8).toString(16)})}function Uk(i){return i&&typeof i=="object"&&!Array.isArray(i)}function JS(i,...e){if(!e.length)return i;const t=e.shift();if(Uk(i)&&Uk(t))for(const r in t)Uk(t[r])?(i[r]||Object.assign(i,{[r]:{}}),JS(i[r],t[r])):Object.assign(i,{[r]:t[r]});return JS(i,...e)}function YGe(i,e){return Object.keys(e).forEach(function(t){t in i&&(i[t]=e[t])}),i}class fa{constructor(e,t){this.defaults=t,this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.translateProperty=this.jsoneditor.translateProperty||this.defaults.translateProperty,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.active=!0,this.isUiOnly=!1,this.options=ki({},this.options||{},this.schema.options||{},e.schema.options||{},e),this.enforceConst=this.options.enforce_const??this.jsoneditor.options.enforce_const,this.formname=this.jsoneditor.options.form_name_root||"root",!e.path&&!this.schema.id&&(this.schema.id=this.formname),this.path=e.path||this.formname,this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.parent=e.parent,this.key=this.parent!==void 0?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,e.container&&this.setContainer(e.container),this.registerDependencies()}onChildEditorChange(e,t){this.onChange(!0,!1,t)}notify(){this.path&&this.jsoneditor.notifyWatchers(this.path)}change(e){this.parent?this.parent.onChildEditorChange(this,e):this.jsoneditor&&this.jsoneditor.onChange(e)}onChange(e,t,r){this.notify(),t||this.watch_listener&&this.watch_listener(),e&&this.change(r)}register(){if(this.jsoneditor.registerEditor(this),this.input&&!this.label){const e=this.getTitle()||this.formname;this.input.setAttribute("aria-label",e)}this.onChange()}unregister(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)}getNumColumns(){return 12}isActive(){return this.active}activate(){this.active=!0,this.optInCheckbox.checked=!0,this.enable(),this.change()}deactivate(){this.isRequired()||(this.active=!1,this.optInCheckbox.checked=!1,this.disable(),this.change())}registerDependencies(){this.dependenciesFulfilled=!0;const e=this.options.dependencies;e&&Object.keys(e).forEach(t=>{let r;t.startsWith(this.jsoneditor.root.path)?r=t:(r=this.path.split("."),r[r.length-1]=t,r=r.join(".")),this.jsoneditor.watch(r,()=>{this.evaluateDependencies()})})}evaluateDependencies(){const e=this.container||this.control;if(!e||this.jsoneditor===null)return;const t=this.options.dependencies;if(!t)return;const r=this.dependenciesFulfilled;this.dependenciesFulfilled=!0,Object.keys(t).forEach(s=>{let o;s.startsWith(this.jsoneditor.root.path)?o=s:(o=this.path.split("."),o[o.length-1]=s,o=o.join("."));const l=t[s];this.checkDependency(o,l)}),this.dependenciesFulfilled!==r&&this.notify();let n=this.dependenciesFulfilled?"block":"none";this.options.hidden&&(n="none"),e.tagName==="TD"?Object.keys(e.childNodes).forEach(s=>e.childNodes[s].style.display=n):e.style.display=n}checkDependency(e,t){if(this.path===e||this.jsoneditor===null)return;const r=this.jsoneditor.getEditor(e),n=r?r.getValue():void 0;!r||!r.dependenciesFulfilled||!n?this.dependenciesFulfilled=!1:Array.isArray(t)?this.dependenciesFulfilled=t.some(s=>{if(JSON.stringify(n)===JSON.stringify(s))return!0}):typeof t=="object"?typeof n!="object"?this.dependenciesFulfilled=t===n:Object.keys(t).some(s=>{if(!Rl(t,s))return!1;if(!Rl(n,s)||t[s]!==n[s])return this.dependenciesFulfilled=!1,!0}):typeof t=="string"||typeof t=="number"?this.dependenciesFulfilled=this.dependenciesFulfilled&&n===t:typeof t=="boolean"&&(t?this.dependenciesFulfilled=this.dependenciesFulfilled&&(n||n.length>0):this.dependenciesFulfilled=this.dependenciesFulfilled&&(!n||n.length===0))}setContainer(e){this.container=e,this.setContainerAttributes(),this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&typeof this.schema.type=="string"&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)}setOptInCheckbox(e){this.optInLabel=this.theme.getHiddenLabel(this.formname+" opt-in"),this.optInLabel.setAttribute("for",this.formname+"-opt-in"),this.optInCheckbox=document.createElement("input"),this.optInCheckbox.setAttribute("type","checkbox"),this.optInCheckbox.setAttribute("style","margin: 0 10px 0 0;"),this.optInCheckbox.setAttribute("id",this.formname+"-opt-in"),this.optInCheckbox.classList.add("json-editor-opt-in"),this.optInCheckbox.addEventListener("click",()=>{this.isActive()?this.deactivate():this.activate()});const t=this.jsoneditor.options.show_opt_in,r=typeof this.parent.options.show_opt_in<"u",n=r&&this.parent.options.show_opt_in===!0,s=r&&this.parent.options.show_opt_in===!1;(n||!s&&t||!r&&t)&&this.parent&&this.parent.schema.type==="object"&&!this.isRequired()&&this.header&&(this.header.appendChild(this.optInLabel),this.header.appendChild(this.optInCheckbox),this.header.insertBefore(this.optInCheckbox,this.header.firstChild))}preBuild(){}build(){}postBuild(){this.setupWatchListeners(),this.addLinks(),this.register(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.onWatchedFieldChange(),this.options.titleHidden&&(this.theme.visuallyHidden(this.label),this.theme.visuallyHidden(this.header)),this.enforceConst&&this.schema.const&&this.disable()}setupWatchListeners(){if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=()=>{this.refreshWatchedFieldValues()&&this.onWatchedFieldChange()},Rl(this.schema,"watch")){let e,t,r,n,s;const o=this.container.getAttribute("data-schemapath");Object.keys(this.schema.watch).forEach(a=>{if(e=this.schema.watch[a],Array.isArray(e)){if(e.length<2)return;t=[e[0]].concat(e[1].split("."))}else t=e.split("."),this.theme.closest(this.container,`[data-schemaid="${t[0]}"]`)||t.unshift("#");if(r=t.shift(),r==="#"&&(r=this.jsoneditor.schema.id||this.jsoneditor.root.formname),n=this.theme.closest(this.container,`[data-schemaid="${r}"]`),!n)throw new Error(`Could not find ancestor node with id ${r}`);s=`${n.getAttribute("data-schemapath")}.${t.join(".")}`,o.startsWith(s)&&(this.watchLoop=!0),this.jsoneditor.watch(s,this.watch_listener),this.watched[a]=s})}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))}addLinks(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),typeof this.description<"u"?this.description.parentNode.insertBefore(this.link_holder,this.description):this.container.appendChild(this.link_holder),this.schema.links))for(let e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))}onMove(){}getButton(e,t,r,n=[]){const s=`json-editor-btn-${t}`;this.iconlib?t=this.iconlib.getIcon(t):t=null,e=this.translate(e,n),r=this.translate(r,n),!t&&r&&(e=r,r=null);const o=this.theme.getButton(e,t,r);return o.classList.add(s),o}setButtonText(e,t,r,n,s=[]){return this.iconlib?r=this.iconlib.getIcon(r):r=null,t=this.translate(t,s),n=this.translate(n,s),!r&&n&&(t=n,n=null),this.theme.setButtonText(e,t,r,n)}addLink(e){this.link_holder&&this.link_holder.appendChild(e)}getLink(e){let t,r;const s=(e.mediaType||"application/javascript").split("/")[0],o=this.jsoneditor.compileTemplate(e.href,this.template_engine),a=this.jsoneditor.compileTemplate(e.rel?e.rel:e.href,this.template_engine);let l=null;if(e.download&&(l=e.download),l&&l!==!0&&(l=this.jsoneditor.compileTemplate(l,this.template_engine)),s==="image"){t=this.theme.getBlockLinkHolder(),r=document.createElement("a"),r.setAttribute("target","_blank");const u=document.createElement("img");this.theme.createImageLink(t,r,u),this.link_watchers.push(c=>{const h=o(c),d=a(c);r.setAttribute("href",h),r.setAttribute("title",d||h),u.setAttribute("src",h)})}else if(["audio","video"].includes(s)){t=this.theme.getBlockLinkHolder(),r=this.theme.getBlockLink(),r.setAttribute("target","_blank");const u=document.createElement(s);u.setAttribute("controls","controls"),this.theme.createMediaLink(t,r,u),this.link_watchers.push(c=>{const h=o(c),d=a(c);r.setAttribute("href",h),r.textContent=d||h,u.setAttribute("src",h)})}else r=t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,t.style.display="none",this.link_watchers.push(u=>{const c=o(u),h=a(u);c&&(t.style.display=""),t.setAttribute("href",c),t.textContent=h||c});return l&&r&&(l===!0?r.setAttribute("download",""):this.link_watchers.push(u=>{r.setAttribute("download",l(u))})),e.class&&e.class.split(" ").forEach(c=>{r.classList.add(c)}),t}refreshWatchedFieldValues(){if(!this.watched_values)return;const e={};let t=!1;return this.watched&&Object.keys(this.watched).forEach(r=>{const n=this.jsoneditor.getEditor(this.watched[r]),s=n?n.getValue():null;this.watched_values[r]!==s&&(t=!0),e[r]=s}),e.self=this.getValue(),this.watched_values.self!==e.self&&(t=!0),this.watched_values=e,t}getWatchedFieldValues(){return this.watched_values}updateHeaderText(){if(this.header){const e=this.getHeaderText();if(this.header.children.length){for(let t=0;t<this.header.childNodes.length;t++)if(this.header.childNodes[t].nodeType===3){this.header.childNodes[t].nodeValue=this.cleanText(e);break}}else window.DOMPurify?this.header.innerHTML=window.DOMPurify.sanitize(e):this.header.textContent=this.cleanText(e)}}getHeaderText(e){return this.header_text?this.header_text:e?this.translateProperty(this.schema.title):this.getTitle()}getPathDepth(){return this.path.split(".").length}cleanText(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}onWatchedFieldChange(){let e;if(this.header_template){e=ki(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:this.key*1,i1:this.key*1+1,title:this.getTitle()}),this.editors&&Object.keys(this.editors).length&&(e.properties={},Object.keys(this.editors).forEach(r=>{const n=this.editors[r];if(n.schema&&n.schema.enum&&n.schema.options&&n.schema.options.enum_titles){const s=n.schema.enum.indexOf(n.value),o=n.options.enum_titles[s];e.properties[r]={enumTitle:o}}}));const t=this.header_template(e);t!==this.header_text&&(this.header_text=t,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(let t=0;t<this.link_watchers.length;t++)this.link_watchers[t](e)}}setValue(e){this.value=e}getValue(){if(this.dependenciesFulfilled)return this.value}refreshValue(){}getChildEditors(){return!1}destroy(){this.unregister(this),this.watched&&Object.values(this.watched).forEach(e=>this.jsoneditor.unwatch(e,this.watch_listener)),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null}isDefaultRequired(){return this.isRequired()||!!this.jsoneditor.options.use_default_values}getDefault(){if(this.enforceConst&&this.schema.const)return this.schema.const;if(typeof this.schema.default<"u")return this.schema.default;if(typeof this.schema.enum<"u")return this.schema.enum[0];let e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&typeof e=="object"&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),typeof e=="string"){if(e==="number")return this.isDefaultRequired()?0:void 0;if(e==="boolean")return this.isDefaultRequired()?!1:void 0;if(e==="integer")return this.isDefaultRequired()?0:void 0;if(e==="string")return this.isDefaultRequired()?"":void 0;if(e==="null")return null;if(e==="object")return{};if(e==="array")return[]}}getTitle(){return this.translateProperty(this.schema.title||this.key||this.formname)}enable(){this.disabled=!1}disable(){this.disabled=!0}isEnabled(){return!this.disabled}isRequired(){return typeof this.schema.required=="boolean"?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key):!!this.jsoneditor.options.required_by_default}getDisplayText(e){const t=[],r={};e.forEach(s=>{s.title&&(r[s.title]=r[s.title]||0,r[s.title]++),s.description&&(r[s.description]=r[s.description]||0,r[s.description]++),s.format&&(r[s.format]=r[s.format]||0,r[s.format]++),s.type&&(r[s.type]=r[s.type]||0,r[s.type]++)}),e.forEach(s=>{let o;typeof s=="string"?o=s:s.title&&r[s.title]<=1?o=s.title:s.format&&r[s.format]<=1?o=s.format:s.type&&r[s.type]<=1?o=s.type:s.description&&r[s.description]<=1?o=s.description:s.title?o=s.title:s.format?o=s.format:s.type?o=s.type:s.description?o=s.description:JSON.stringify(s).length<500?o=JSON.stringify(s):o="type",t.push(o)});const n={};return t.forEach((s,o)=>{n[s]=n[s]||0,n[s]++,r[s]>1&&(t[o]=`${s} ${n[s]}`)}),t}getValidId(e){return e=e===void 0?"":e.toString(),e.replace(/\s+/g,"-")}setInputAttributes(e,t){if(this.schema.options&&this.schema.options.inputAttributes){const r=this.schema.options.inputAttributes,n=["name","type"].concat(e),s=t||this.input;Object.keys(r).forEach(o=>{n.includes(o.toLowerCase())||s.setAttribute(o,r[o])})}}setContainerAttributes(){if(this.schema.options&&this.schema.options.containerAttributes){const e=this.schema.options.containerAttributes,t=["data-schemapath","data-schematype","data-schemaid"];Object.keys(e).forEach(r=>{t.includes(r.toLowerCase())||this.container.setAttribute(r,e[r])})}}expandCallbacks(e,t){const r=this.defaults.callbacks[e];return Object.entries(t).forEach(([n,s])=>{s===Object(s)?t[n]=this.expandCallbacks(e,s):typeof s=="string"&&typeof r=="object"&&typeof r[s]=="function"&&(t[n]=r[s].bind(null,this))}),t}showValidationErrors(e){}}class Bl extends fa{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&(this.input.removeAttribute("name"),this.input.removeAttribute("aria-label"))}setValue(e,t,r){if(this.template&&!r||(!this.shouldBeUnset()&&(e===null||typeof e>"u")?e="":typeof e=="object"?e=JSON.stringify(e):!this.shouldBeUnset()&&typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const n=this.sanitize(e);if(this.input.value===n)return;if(this.setValueToInputField(n),this.format==="range"){const o=this.control.querySelector("output");o&&(o.value=n)}const s=r||this.getValue()!==e;return this.refreshValue(),t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),s&&this.onChange(!0,r),{changed:s,value:n}}setValueToInputField(e){this.input.value=e===void 0?"":e}getNumColumns(){const e=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);let t;return this.input_type==="textarea"?t=6:["text","email"].includes(this.input_type)?t=4:t=2,Math.min(12,Math.max(e,t))}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if(this.format==="textarea")this.input_type="textarea",this.input=this.theme.getTextareaInput();else if(this.format==="range"){this.input_type="range";let n=this.schema.minimum||0,s=this.schema.maximum||Math.max(100,n+1),o=1;this.schema.multipleOf&&(n%this.schema.multipleOf&&(n=Math.ceil(n/this.schema.multipleOf)*this.schema.multipleOf),s%this.schema.multipleOf&&(s=Math.floor(s/this.schema.multipleOf)*this.schema.multipleOf),o=this.schema.multipleOf),this.input=this.theme.getRangeInput(n,s,o,this.description,this.formname),this.input.setAttribute("id",this.formname)}else this.input_type="text",["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","reset","search","submit","tel","text","time","url","week"].includes(this.format)&&(this.input_type=this.format),this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);typeof this.schema.maxLength<"u"&&this.input.setAttribute("maxlength",this.schema.maxLength),typeof this.schema.pattern<"u"?this.input.setAttribute("pattern",this.schema.pattern):typeof this.schema.minLength<"u"&&this.input.setAttribute("pattern",`.{${this.schema.minLength},}`),this.options.compact?this.container.classList.add("compact"):this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"]),this.input.addEventListener("change",n=>{if(n.preventDefault(),n.stopPropagation(),this.schema.template){n.currentTarget.value=this.value;return}const s=n.currentTarget.value,o=this.sanitize(s);s!==o&&(n.currentTarget.value=o),this.is_dirty=!0,this.refreshValue(),this.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=n=>{if(!n)return;let s,o=n.offsetHeight;if(n.offsetHeight<n.scrollHeight)for(s=0;n.offsetHeight<n.scrollHeight+3&&!(s>100);)s++,o++,n.style.height=`${o}px`;else{for(s=0;n.offsetHeight>=n.scrollHeight+3&&!(s>100);)s++,o--,n.style.height=`${o}px`;n.style.height=`${o+1}px`}},this.input.addEventListener("keyup",n=>{this.adjust_height(n.currentTarget)}),this.input.addEventListener("change",n=>{this.adjust_height(n.currentTarget)}),this.adjust_height());const e=this.options.prompt_paste_max_length_reached??this.jsoneditor.options.prompt_paste_max_length_reached,t=typeof this.schema.maxLength<"u";e&&t&&this.input.addEventListener("paste",n=>{(n.clipboardData||window.clipboardData).getData("text").length+this.input.value.length>this.schema.maxLength&&alert(this.translate("paste_max_length_reached",[this.schema.maxLength]))}),this.format&&this.input.setAttribute("data-schemaformat",this.format);let{input:r}=this;if(this.format==="range"&&(r=this.theme.getRangeControl(this.input,this.theme.getRangeOutput(this.input,this.schema.default||Math.max(this.schema.minimum||0,0)))),this.control=this.theme.getFormControl(this.label,r,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{if(this.input.parentNode&&this.afterInputReady(),this.adjust_height&&this.adjust_height(this.input),this.format==="range"){const n=this.control.querySelector("output");n.value=this.input.value}}),this.schema.template){const n=this.expandCallbacks("template",{template:this.schema.template});typeof n.template=="function"?this.template=n.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}setupCleave(e){const t=this.expandCallbacks("cleave",ki({},this.defaults.options.cleave||{},this.options.cleave||{}));typeof t=="object"&&Object.keys(t).length>0&&(this.cleave_instance=new window.Cleave(e,t))}setupImask(e){const t=this.expandCallbacks("imask",ki({},this.defaults.options.imask||{},this.options.imask||{}));typeof t=="object"&&Object.keys(t).length>0&&(this.imask_instance=window.IMask(e,this.ajustIMaskOptions(t)))}ajustIMaskOptions(e){return Object.keys(e).forEach(t=>{if(e[t]===Object(e[t]))e[t]=this.ajustIMaskOptions(e[t]);else if(t==="mask")if(e[t].substr(0,6)==="regex:"){const r=e[t].match(/^regex:\/(.*)\/([gimsuy]*)$/);if(r!==null)try{e[t]=new RegExp(r[1],r[2])}catch{}}else e[t]=this.getGlobalPropertyFromString(e[t])}),e}getGlobalPropertyFromString(e){if(e.includes(".")){const t=e.split("."),r=t[0],n=t[1];if(typeof window[r]<"u"&&typeof window[r][n]<"u")return window[r][n]}else if(typeof window[e]<"u")return window[e];return e}shouldBeUnset(){return!this.jsoneditor.options.use_default_values&&!this.is_dirty}getValue(){const e=!!(this.input&&this.input.value);if(!(this.shouldBeUnset()&&!e))return this.imask_instance&&this.dependenciesFulfilled&&this.options.imask.returnUnmasked?this.imask_instance.unmaskedValue:super.getValue()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}afterInputReady(){this.theme.afterInputReady(this.input),window.Cleave&&!this.cleave_instance?this.setupCleave(this.input):window.IMask&&!this.imask_instance&&this.setupImask(this.input)}refreshValue(){this.input&&(this.value=this.input.value,typeof this.value!="string"&&!this.shouldBeUnset()&&(this.value=""),this.serialized=this.value)}destroy(){this.cleave_instance&&this.cleave_instance.destroy(),this.imask_instance&&this.imask_instance.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}showValidationErrors(e){if(this.jsoneditor.options.show_errors!=="always"){if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return}this.previous_error_setting=this.jsoneditor.options.show_errors;const t=(n,s)=>(s.path===this.path&&n.push(s.message),n),r=e.reduce(t,[]);r.length?this.theme.addInputError(this.input,`${r.join(". ")}.`):this.theme.removeInputError(this.input)}}class XGe extends Bl{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.ace_editor_instance&&(this.ace_editor_instance.setValue(n.value),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize())}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;if(window.ace){let t=this.input_type;(t==="cpp"||t==="c++"||t==="c")&&(t="c_cpp"),e=this.expandCallbacks("ace",ki({},{selectionStyle:"text",minLines:30,maxLines:30},this.defaults.options.ace||{},this.options.ace||{},{mode:`ace/mode/${t}`})),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor_instance=window.ace.edit(this.ace_container,e),this.ace_editor_instance.setValue(this.getValue()),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize(),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.ace_editor_instance.setReadOnly(!0),this.ace_editor_instance.on("change",()=>{this.input.value=this.ace_editor_instance.getValue(),this.refreshValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!1),super.enable()}disable(e){this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!0),super.disable(e)}destroy(){this.ace_editor_instance&&(this.ace_editor_instance.destroy(),this.ace_editor_instance=null),super.destroy()}}const ZGe={".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-array-control-btn":"width:100%25;text-align:left;margin-bottom:3px"};class fI extends fa{askConfirmation(){return!(this.jsoneditor.options.prompt_before_delete===!0&&window.confirm(this.translate("button_delete_node_warning"))===!1)}register(){super.register(),this.rows&&this.rows.forEach(e=>e.register())}unregister(){super.unregister(),this.rows&&this.rows.forEach(e=>e.unregister())}getNumColumns(){const e=this.getItemInfo(0);return this.tabs_holder&&this.schema.format!=="tabs-top"?Math.max(Math.min(12,e.width+2),4):e.width}enable(){this.always_disabled||(this.setAvailability(this,!1),this.rows&&this.rows.forEach(e=>{e.enable(),this.setAvailability(e,!1)}),super.enable())}disable(e){e&&(this.always_disabled=!0),this.setAvailability(this,!0),this.rows&&this.rows.forEach(t=>{t.disable(e),this.setAvailability(t,!0)}),super.disable()}setAvailability(e,t){e.add_row_button&&(e.add_row_button.disabled=t),e.remove_all_rows_button&&(e.remove_all_rows_button.disabled=t),e.delete_last_row_button&&(e.delete_last_row_button.disabled=t),e.copy_button&&(e.copy_button.disabled=t),e.delete_button&&(e.delete_button.disabled=t),e.moveup_button&&(e.moveup_button.disabled=t),e.movedown_button&&(e.movedown_button.disabled=t)}preBuild(){super.preBuild(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add,this.show_copy_button=this.options.enable_array_copy||this.jsoneditor.options.enable_array_copy,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top}build(){this.options.compact?(this.title=this.theme.getHeader("",this.getPathDepth()),this.container.appendChild(this.title),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.schema.format==="tabs-top"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTopTabContentHolder(this.tabs_holder),this.active_tab=null):this.schema.format==="tabs"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls))),this.addControls()}postBuild(){super.postBuild(),(this.schema.readOnly||this.schema.readonly)&&this.disable()}onChildEditorChange(e,t){this.refreshValue(),this.refreshTabs(!0),super.onChildEditorChange(e,t)}getItemTitle(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){const e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=this.translateProperty(e.title)||this.translate("default_array_item_title")}else this.item_title=this.translate("default_array_item_title");return this.cleanText(this.item_title)}getItemSchema(e){if(Array.isArray(this.schema.items))if(e>=this.schema.items.length){if(this.schema.additionalItems===!0)return{};if(this.schema.additionalItems)return ki({},this.schema.additionalItems)}else return ki({},this.schema.items[e]);else return this.schema.items?ki({},this.schema.items):{}}getItemInfo(e){let t=this.getItemSchema(e);this.item_info=this.item_info||{};const r=JSON.stringify(t);return typeof this.item_info[r]<"u"?this.item_info[r]:(t=this.jsoneditor.expandRefs(t),this.item_info[r]={title:this.translateProperty(t.title)||this.translate("default_array_item_title"),default:t.default,width:12,child_editors:t.properties||t.items},this.item_info[r])}getElementEditor(e){const t=this.getItemInfo(e);let r=this.getItemSchema(e);r=this.jsoneditor.expandRefs(r),r.title=`${t.title} ${e+1}`;const n=this.jsoneditor.getEditorClass(r);let s;this.tabs_holder?(this.schema.format==="tabs-top"?s=this.theme.getTopTabContent():s=this.theme.getTabContent(),s.id=`${this.path}.${e}`):t.child_editors?s=this.theme.getChildEditorHolder():s=this.theme.getIndentedPanel(),this.row_holder.appendChild(s);const o=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:s,path:`${this.path}.${e}`,parent:this,required:!0});return o.preBuild(),o.build(),o.postBuild(),o.title_controls||(o.array_controls=this.theme.getButtonHolder(),s.appendChild(o.array_controls)),o}checkParent(e){return e&&e.parentNode}destroy(){this.empty(!0),this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.controls)&&this.controls.parentNode.removeChild(this.controls),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,super.destroy()}empty(e){if(this.rows!==null){if(this.rows.forEach((t,r)=>{e&&(this.checkParent(t.tab)&&t.tab.parentNode.removeChild(t.tab),this.destroyRow(t,!0),this.row_cache[r]=null),this.rows[r]=null}),e)for(let t=this.rows.length;t<this.row_cache.length;t++)this.destroyRow(this.row_cache[t],!0),this.row_cache[t]=null;this.rows=[],e&&(this.row_cache=[])}}destroyRow(e,t){const r=e.container;t?(e.destroy(),r.parentNode&&r.parentNode.removeChild(r),this.checkParent(e.tab)&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),r.style.display="none",e.unregister())}getMax(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0}refreshTabs(e){this.rows.forEach(t=>{t.tab&&(e?t.tab_text.textContent=t.getHeaderText():t.tab===this.active_tab?this.theme.markTabActive(t):this.theme.markTabInactive(t))})}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length).default);return this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax())),e}setValue(e=[],t){if(e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized){t&&this.refreshValue(t);return}e.forEach((o,a)=>{if(this.rows[a])this.rows[a].setValue(o,t);else if(this.row_cache[a])this.rows[a]=this.row_cache[a],this.rows[a].setValue(o,t),this.rows[a].container.style.display="",this.rows[a].tab&&(this.rows[a].tab.style.display=""),this.rows[a].register(),this.jsoneditor.trigger("addRow",this.rows[a]);else{const l=this.addRow(o,t);this.jsoneditor.trigger("addRow",l)}});for(let o=e.length;o<this.rows.length;o++)this.destroyRow(this.rows[o]),this.rows[o]=null;this.rows=this.rows.slice(0,e.length);const n=this.rows.find(o=>o.tab===this.active_tab);let s=typeof n<"u"?n.tab:null;!s&&this.rows.length&&(s=this.rows[0].tab),this.active_tab=s,this.refreshValue(t),this.refreshTabs(!0),this.refreshTabs(),this.onChange()}setButtonState(e,t){switch(this.options.button_state_mode||this.jsoneditor.options.button_state_mode){case 1:e.style.display=t?"":"none";break;case 2:e.disabled=!t;break;default:e.style.display=t?"":"none"}}setupButtons(e){const t=[];if(!this.value.length)this.setButtonState(this.delete_last_row_button,!1),this.setButtonState(this.remove_all_rows_button,!1);else if(this.value.length===1){this.setButtonState(this.remove_all_rows_button,!1);const n=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,n),t.push(n)}else{const n=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,n),t.push(n);const s=!(e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,s),t.push(s)}const r=!(this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button);return this.setButtonState(this.add_row_button,r),t.push(r),t.some(n=>n)}refreshValue(e){const t=this.value?this.value.length:0;if(this.value=this.rows.map(r=>r.getValue()),t!==this.value.length||e){const r=this.schema.minItems&&this.schema.minItems>=this.rows.length;this.rows.forEach((n,s)=>{if(n.movedown_button){const o=s!==this.rows.length-1;this.setButtonState(n.movedown_button,o)}n.delete_button&&this.setButtonState(n.delete_button,!r),this.value[s]=n.getValue()}),this.setupButtons(r)&&!this.collapsed?this.controls.style.display="inline-block":this.controls.style.display="none"}this.serialized=JSON.stringify(this.value)}addRow(e,t){const r=this.rows.length;this.rows[r]=this.getElementEditor(r),this.row_cache[r]=this.rows[r],this.tabs_holder&&(this.rows[r].tab_text=document.createElement("span"),this.rows[r].tab_text.textContent=this.rows[r].getHeaderText(),this.schema.format==="tabs-top"?(this.rows[r].tab=this.theme.getTopTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTopTab(this.tabs_holder,this.rows[r].tab)):(this.rows[r].tab=this.theme.getTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTab(this.tabs_holder,this.rows[r].tab)),this.rows[r].tab.addEventListener("click",s=>{this.active_tab=this.rows[r].tab,this.refreshTabs(),s.preventDefault(),s.stopPropagation()}));const n=this.rows[r].title_controls||this.rows[r].array_controls;return this.hide_delete_buttons||(this.rows[r].delete_button=this._createDeleteButton(r,n)),this.show_copy_button&&(this.rows[r].copy_button=this._createCopyButton(r,n)),r&&!this.hide_move_buttons&&(this.rows[r].moveup_button=this._createMoveUpButton(r,n)),this.hide_move_buttons||(this.rows[r].movedown_button=this._createMoveDownButton(r,n)),typeof e<"u"&&this.rows[r].setValue(e,t),this.refreshTabs(),this.rows[r]}_createDeleteButton(e,t){const r=this.getButton(this.getItemTitle(),"delete","button_delete_row_title",[this.getItemTitle()]);return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue().filter((c,h)=>h!==s);let a=null;const u=this.rows[s].getValue();this.setValue(o),this.rows[s]?a=this.rows[s].tab:this.rows[s-1]&&(a=this.rows[s-1].tab),a&&(this.active_tab=a,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",u)}),t&&t.appendChild(r),r}_createCopyButton(e,t){const r=this.getButton(this.getItemTitle(),"copy","button_copy_row_title",[this.getItemTitle()]),n=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",e),r.addEventListener("click",s=>{const o=this.getValue();s.preventDefault(),s.stopPropagation();const a=s.currentTarget.getAttribute("data-i")*1;o.forEach((l,u)=>{if(u===a){if(n.items.type==="string"&&n.items.format==="uuid")l=ox();else if(n.items.type==="object"&&n.items.properties)for(const c of Object.keys(l))n.items.properties&&n.items.properties[c]&&n.items.properties[c].format==="uuid"&&(l[c]=ox());o.push(l)}}),this.setValue(o),this.refreshValue(!0),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[a-1])}),t.appendChild(r),r}_createMoveUpButton(e,t){const r=this.getButton("",this.schema.format==="tabs-top"?"moveleft":"moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1;if(s<=0)return;const o=this.getValue(),a=o[s-1];o[s-1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s-1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),t&&t.appendChild(r),r}_createMoveDownButton(e,t){const r=this.getButton("",this.schema.format==="tabs-top"?"moveright":"movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue();if(s>=o.length-1)return;const a=o[s+1];o[s+1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s+1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),t&&t.appendChild(r),r}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.options.collapsed&&Uu(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton(),this.tabs&&(this.add_row_button.classList.add("je-array-control-btn"),this.delete_last_row_button.classList.add("je-array-control-btn"),this.remove_all_rows_button.classList.add("je-array-control-btn"))}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");e.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(e,this.title.childNodes[0]);const t=this.row_holder.style.display,r=this.controls.style.display;return e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.panel&&this.setButtonState(this.panel,this.collapsed),this.tabs_holder&&this.setButtonState(this.tabs_holder,this.collapsed),this.collapsed?(this.collapsed=!1,this.row_holder.style.display=t,this.controls.style.display=r,this.setButtonText(n.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.row_holder.style.display="none",this.controls.style.display="none",this.setButtonText(n.currentTarget,"","expand","button_expand"))}),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const r=this.rows.length;let n;this.row_cache[r]?(n=this.rows[r]=this.row_cache[r],this.rows[r].setValue(this.rows[r].getDefault(),!0),this.rows[r].container.style.display="",this.rows[r].tab&&(this.rows[r].tab.style.display=""),this.rows[r].register()):n=this.addRow(),this.active_tab=this.rows[r].tab,this.refreshTabs(),this.refreshValue(),this.onChange(!0),this.jsoneditor.trigger("addRow",n)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();let n=null;const s=r.pop();this.setValue(r),this.rows[this.rows.length-1]&&(n=this.rows[this.rows.length-1].tab),n&&(this.active_tab=n,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",s)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.empty(!0),this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(e),e}showValidationErrors(e){const t=[],r=[];e.forEach(n=>{n.path===this.path?t.push(n):r.push(n)}),this.error_holder&&(t.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",t.forEach(n=>{this.error_holder.appendChild(this.theme.getErrorMessage(n.message))})):this.error_holder.style.display="none"),this.rows.forEach(n=>n.showValidationErrors(r))}}fI.rules=ZGe;class YT extends fa{onInputChange(){this.value=this.input.value,this.onChange(!0)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){let e=this.getTitle().length;return Object.keys(this.select_values).forEach(t=>e=Math.max(e,`${this.select_values[t]}`.length+4)),Math.min(12,Math.max(e/7,2))}preBuild(){super.preBuild(),this.select_options={},this.select_values={},this.option_titles=[],this.option_keys=[],this.option_enum=[];let e;const t=this.jsoneditor.expandRefs(this.schema.items||{}),r=t.enum||[],n=t.options?t.options.enum||[]:[],s=t.options?t.options.enum_titles||[]:[];for(e=0;e<r.length;e++){if(this.sanitize(r[e])!==r[e])continue;const o=n[e]||{};"title"in o||(o.title=`${s[e]||r[e]}`),this.option_keys.push(`${r[e]}`),this.option_enum.push(o),this.select_values[`${r[e]}`]=r[e]}}build(){let e;if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),!this.schema.format&&this.option_keys.length<8||this.schema.format==="checkbox"){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){const t=this.formname+e.toString();this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.inputs[this.option_keys[e]].id=t,this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];const r=this.theme.getCheckboxLabel(this.option_enum[e].title);if(r.htmlFor=t,this.option_enum[e].infoText){const n=this.theme.getInfoButton(this.translateProperty(this.option_enum[e].infoText));r.appendChild(n)}this.controls["_"+this.option_keys[e]]=this.theme.getFormControl(r,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description,this.infoButton),this.inputs.controlgroup=this.inputs.controls=this.control}else{for(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys,!0),this.theme.setSelectOptions(this.input,this.option_keys,this.option_enum.map(t=>t.title)),this.input.setAttribute("multiple","multiple"),this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname)}(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.container.appendChild(this.control),this.multiselectChangeHandler=t=>{const r=[];for(e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]&&(this.select_options[this.option_keys[e]].selected||this.select_options[this.option_keys[e]].checked)&&r.push(this.select_values[this.option_keys[e]]);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1),window.requestAnimationFrame(()=>{this.afterInputReady()})}postBuild(){super.postBuild()}afterInputReady(){this.theme.afterInputReady(this.input||this.inputs)}setValue(e,t){e=e||[],Array.isArray(e)||(e=[e]),e=e.map(r=>`${r}`),Object.keys(this.select_options).forEach(r=>{this.select_options[r][this.input_type==="select"?"selected":"checked"]=e.includes(r)}),this.updateValue(e),this.onChange(!0)}removeValue(e){e=[].concat(e),this.setValue(this.getValue().filter(t=>!e.includes(t)))}addValue(e){this.setValue(this.getValue().concat(e))}updateValue(e){let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_options[`${e[n]}`]){t=!0;continue}const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}sanitize(e){return this.schema.items.type==="boolean"?!!e:this.schema.items.type==="number"?1*e||0:this.schema.items.type==="integer"?Math.floor(e*1||0):`${e}`}enable(){this.always_disabled||(this.input?this.input.disabled=!1:this.inputs&&Object.keys(this.inputs).forEach(e=>this.inputs[e].disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.input?this.input.disabled=!0:this.inputs&&Object.keys(this.inputs).forEach(t=>this.inputs[t].disabled=!0),super.disable()}destroy(){super.destroy()}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}showValidationErrors(e){const t=new RegExp(`^${this.escapeRegExp(this.path)}(\\.\\d+)?$`),r=(s,o)=>(o.path.match(t)&&s.push(o.message),s),n=e.reduce(r,[]);n.length?this.theme.addInputError(this.input||this.inputs,`${n.join(". ")}.`):this.theme.removeInputError(this.input||this.inputs)}}class KGe extends YT{setValue(e,t){this.choices_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.choices_instance.removeActiveItems(),this.choices_instance.setChoiceByValue(this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",ki({},{removeItems:!0,removeItemButton:!0},this.defaults.options.choices||{},this.options.choices||{},{addItems:!0,editItems:!1,duplicateItemsAllowed:!1}));this.newEnumAllowed=!1,this.choices_instance=new window.Choices(this.input,e),this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=t=>{const r=this.choices_instance.getValue(!0);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1)}super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_values[`${e[n]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[n]))continue}else continue;const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e),this.choices_instance.setChoices([{value:`${e}`,label:`${e}`}],"value","label",!1),!0}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}class JGe extends YT{setValue(e,t){this.select2_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.select2v4?this.select2_instance.val(this.value).change():this.select2_instance.select2("val",this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){let e;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance&&(e=this.expandCallbacks("select2",ki({},{tags:!0,width:"100%"},this.defaults.options.select2||{},this.options.select2||{})),this.newEnumAllowed=e.tags=!!e.tags&&this.schema.items&&this.schema.items.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=Rl(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const t=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(t),this.onChange(!0)},this.select2_instance.on("select2-blur",this.selectChangeHandler),this.select2_instance.on("change",this.selectChangeHandler)),super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_values[`${e[n]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[n]))continue}else continue;const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}addNewOption(e){this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e);const t=this.input.querySelector(`option[value="${e}"]`);return t?t.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(e,e,!1,!1)).trigger("change"),!0}enable(){!this.always_disabled&&this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable()}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class QGe extends YT{setValue(e,t){this.selectize_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.selectize_instance.setValue(this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){let e;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){e=this.expandCallbacks("selectize",ki({},{plugins:["remove_button"],delimiter:!1,createOnBlur:!0,create:!0},this.defaults.options.selectize||{},this.options.selectize||{})),this.newEnumAllowed=e.create=!!e.create&&this.schema.items&&this.schema.items.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=n=>{const s=this.selectize_instance.getValue();this.updateValue(s),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler);const t=this.theme.getHiddenLabel(this.formname);this.input.setAttribute("id",this.formname+"-hidden-input"),t.setAttribute("for",this.formname+"-hidden-input"),this.input.parentNode.insertBefore(t,this.input);const r=this.selectize_instance.$control[0];if(r){const n=this.theme.getHiddenLabel(this.formname);n.setAttribute("for",this.formname+"-selectized"),r.appendChild(n)}}super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_values[`${e[n]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[n]))continue}else continue;const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.selectize_instance.addOption({text:e,value:e}),!0}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class eqe extends Bl{postBuild(){window.Autocomplete&&(this.autocomplete_wrapper=document.createElement("div"),this.input.parentNode.insertBefore(this.autocomplete_wrapper,this.input.nextSibling),this.autocomplete_wrapper.appendChild(this.input),this.autocomplete_dropdown=document.createElement("ul"),this.input.parentNode.insertBefore(this.autocomplete_dropdown,this.input.nextSibling)),super.postBuild()}afterInputReady(){let e;window.Autocomplete&&!this.autocomplete_instance&&(e=this.expandCallbacks("autocomplete",ki({},{search:t=>(console.log(`No "search" callback defined for autocomplete in property "${t.key}"`),[]),onSubmit:()=>{this.input.blur()},baseClass:"autocomplete"},this.defaults.options.autocomplete||{},this.options.autocomplete||{})),this.autocomplete_wrapper.classList.add(e.baseClass),this.autocomplete_dropdown.classList.add(`${e.baseClass}-result-list`),this.autocomplete_instance=new window.Autocomplete(this.autocomplete_wrapper,e)),super.afterInputReady()}destroy(){this.autocomplete_instance&&(this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.autocomplete_dropdown&&this.autocomplete_dropdown.parentNode&&this.autocomplete_dropdown.parentNode.removeChild(this.autocomplete_dropdown),this.autocomplete_wrapper&&this.autocomplete_wrapper.parentNode&&this.autocomplete_wrapper.parentNode.removeChild(this.autocomplete_wrapper),this.autocomplete_instance=null),super.destroy()}}class tqe extends fa{getNumColumns(){return 4}setFileReaderListener(e){e.addEventListener("load",t=>{if(this.count===this.current_item_index)this.value[this.count][this.key]=t.target.result;else{const r={};for(const n in this.parent.schema.properties)r[n]="";r[this.key]=t.target.result,this.value.splice(this.count,0,r)}this.count+=1,this.count===this.total+this.current_item_index&&this.arrayEditor.setValue(this.value)})}build(){if(this.options.compact||(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw new Error("FileReader required for base64 editor");this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"&&this.uploader.setAttribute("multiple",""),this.uploader.addEventListener("change",t=>{if(t.preventDefault(),t.stopPropagation(),t.currentTarget.files&&t.currentTarget.files.length)if(t.currentTarget.files.length>1&&this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"){this.arrayEditor=this.jsoneditor.getEditor(this.parent.parent.path),this.value=this.arrayEditor.getValue(),this.total=t.currentTarget.files.length,this.current_item_index=parseInt(this.parent.key),this.count=this.current_item_index;for(let r=0;r<this.total;r++){const n=new FileReader;this.setFileReaderListener(n),n.readAsDataURL(t.currentTarget.files[r])}}else{let r=new FileReader;r.onload=n=>{this.value=n.target.result,this.refreshPreview(),this.onChange(!0),r=null},r.readAsDataURL(t.currentTarget.files[0])}})}this.preview=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton),this.container.appendChild(this.control);const e=this.getButton("button_upload","upload","button_upload");e.addEventListener("click",()=>{this.uploader.click()}),this.control.appendChild(e),this.setInputAttributes(["multiple"],e)}refreshPreview(){if(this.last_preview===this.value||(this.last_preview=this.value,this.preview.innerHTML="",!this.value))return;let e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),!e)this.preview.innerHTML="<em>Invalid data URI</em>";else if(this.preview.innerHTML=`<strong>Type:</strong> ${e}, <strong>Size:</strong> ${Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)} bytes`,e.substr(0,5)==="image"){this.preview.innerHTML+="<br>";const t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){this.value!==e&&(this.schema.readOnly&&this.schema.enum&&!this.schema.enum.includes(e)?this.value=this.schema.enum[0]:this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())}destroy(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),super.destroy()}}class a_e extends fa{constructor(e,t){super(e,t),this.active=!1,this.isUiOnly=!0,this.parent&&this.parent.schema&&(Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key)||this.parent.schema.required.push(this.key):this.parent.schema.required=[this.key])}build(){this.options.compact=!0;const e=this.expandCallbacks("button",ki({},{icon:"",validated:!1,align:"left",action:(r,n)=>{window.alert(`No button action defined for "${r.path}"`)}},this.defaults.options.button||{},this.options.button||{})),t=this.translateProperty(e.text||this.schema.title)||this.key;this.input=this.getButton(t,e.icon,t),typeof e.action!="function"?window.alert(`No button action defined for "${this.path}"`):this.input.addEventListener("click",e.action,!1),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["readonly"]),this.control=this.theme.getFormButtonHolder(e.align),this.control.appendChild(this.input),this.container.appendChild(this.control),this.changeHandler=()=>{this.jsoneditor.validate(this.jsoneditor.getValue()).length>0?this.disable():this.enable()},e.validated&&this.jsoneditor.on("change",this.changeHandler)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}getNumColumns(){return 2}activate(){this.active=!1,this.enable()}deactivate(){this.isRequired()||(this.active=!1,this.disable())}destroy(){this.jsoneditor.off("change",this.changeHandler),this.changeHandler=null,super.destroy()}}class iqe extends fa{setValue(e,t){e=!!e;const r=this.getValue()!==e;this.value=e,this.input.checked=this.value,t||(this.is_dirty=!0),this.onChange(r)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){return Math.min(12,Math.max(this.getTitle().length/7,2))}build(){this.parent.options.table_row||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle(),this.isRequired()),this.label.htmlFor=this.formname),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&!this.options.compact&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getCheckbox(),this.input.id=this.formname,this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.value=e.currentTarget.checked,this.is_dirty=!0,this.onChange(!0)}),this.container.appendChild(this.control)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const t=this.jsoneditor.options.show_errors,r=t==="change"||t==="interaction";if(t==="never"||r&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);this.input.controlgroup=this.control,o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}class cw extends fa{setValue(e,t){let r=this.typecast(e);const n=this.enum_options.length>0&&this.enum_values.includes(r),s=!!this.jsoneditor.options.use_default_values||typeof this.schema.default<"u";if(!this.hasPlaceholderOption&&(!n||t&&!this.isRequired()&&!s)&&(r=this.enum_values[0]),this.value===r)return;const o=this.enum_values.indexOf(r);n&&o!==-1?this.input.value=this.enum_options[o]:this.hasPlaceholderOption?this.input.value="_placeholder_":this.input.value=r,this.value=r,t||(this.is_dirty=!0),this.onChange(),this.change()}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){if(!this.enum_options)return 3;let e=this.getTitle().length;for(let t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))}typecast(e){return this.schema.type==="boolean"?e==="undefined"||e===void 0?void 0:!!e:this.schema.type==="number"?1*e||0:this.schema.type==="integer"?Math.floor(e*1||0):this.schema.enum&&e===void 0?void 0:`${e}`}getValue(){if(this.dependenciesFulfilled)return this.typecast(this.value)}preBuild(){var r,n,s,o;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];let e,t;if(this.hasPlaceholderOption=((n=(r=this.schema)==null?void 0:r.options)==null?void 0:n.has_placeholder_option)||!1,this.placeholderOptionText=((o=(s=this.schema)==null?void 0:s.options)==null?void 0:o.placeholder_option_text)||" ",this.enforceConst&&this.schema.const){const a=this.schema.const;this.enum_options=[`${a}`],this.enum_display=[`${this.translateProperty(a)||a}`],this.enum_values=[this.typecast(a)]}else if(this.schema.enum){const a=this.schema.options&&this.schema.options.enum_titles||[];this.schema.enum.forEach((l,u)=>{this.enum_options[u]=`${l}`,this.enum_display[u]=`${this.translateProperty(a[u])||l}`,this.enum_values[u]=this.typecast(l)})}else if(this.schema.type==="boolean")this.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],this.enum_options=["1",""],this.enum_values=[!0,!1],this.isRequired()||(this.enum_display.unshift(" "),this.enum_options.unshift("undefined"),this.enum_values.unshift(void 0));else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],!Array.isArray(this.schema.enumSource))this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];else for(e=0;e<this.schema.enumSource.length;e++)typeof this.schema.enumSource[e]=="string"?this.enumSource[e]={source:this.schema.enumSource[e]}:Array.isArray(this.schema.enumSource[e])?this.enumSource[e]=this.schema.enumSource[e]:this.enumSource[e]=ki({},this.schema.enumSource[e]);for(e=0;e<this.enumSource.length;e++)this.enumSource[e].value&&(t=this.expandCallbacks("template",{template:this.enumSource[e].value}),typeof t.template=="function"?this.enumSource[e].value=t.template:this.enumSource[e].value=this.jsoneditor.compileTemplate(this.enumSource[e].value,this.template_engine)),this.enumSource[e].title&&(t=this.expandCallbacks("template",{template:this.enumSource[e].title}),typeof t.template=="function"?this.enumSource[e].title=t.template:this.enumSource[e].title=this.jsoneditor.compileTemplate(this.enumSource[e].title,this.template_engine)),this.enumSource[e].filter&&this.enumSource[e].value&&(t=this.expandCallbacks("template",{template:this.enumSource[e].filter}),typeof t.template=="function"?this.enumSource[e].filter=t.template:this.enumSource[e].filter=this.jsoneditor.compileTemplate(this.enumSource[e].filter,this.template_engine))}else throw new Error("'select' editor requires the enum property to be set.")}build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getSelectInput(this.enum_options,!1),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display,this.hasPlaceholderOption,this.placeholderOptionText),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.setInputAttributes([]),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),this.value=this.enum_values[0],window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}afterInputReady(){this.theme.afterInputReady(this.input)}onInputChange(){const e=this.typecast(this.input.value);let t;this.enum_values.includes(e)?t=this.enum_values[this.enum_values.indexOf(e)]:t=this.enum_values[0],t!==this.value&&(this.is_dirty=!0,this.value=t,this.onChange(!0))}onWatchedFieldChange(){let e,t,r=[],n=[];if(this.enumSource){e=this.getWatchedFieldValues();for(let o=0;o<this.enumSource.length;o++)if(Array.isArray(this.enumSource[o]))r=r.concat(this.enumSource[o]),n=n.concat(this.enumSource[o]);else{let a=[];if(Array.isArray(this.enumSource[o].source)?a=this.enumSource[o].source:a=e[this.enumSource[o].source],a){if(this.enumSource[o].slice&&(a=Array.prototype.slice.apply(a,this.enumSource[o].slice)),this.enumSource[o].filter){const c=[];for(t=0;t<a.length;t++)this.enumSource[o].filter({i:t,item:a[t],watched:e})&&c.push(a[t]);a=c}const l=[],u=[];for(t=0;t<a.length;t++){const c=a[t];this.enumSource[o].value?u[t]=this.typecast(this.enumSource[o].value({i:t,item:c})):u[t]=a[t],this.enumSource[o].title?l[t]=this.enumSource[o].title({i:t,item:c}):l[t]=u[t]}this.enumSource[o].sort&&((c,h,d)=>{c.map((p,m)=>({v:p,t:h[m]})).sort((p,m)=>p.v<m.v?-d:p.v===m.v?0:d).forEach((p,m)=>{c[m]=p.v,h[m]=p.t})}).bind(null,u,l,this.enumSource[o].sort==="desc"?1:-1)(),r=r.concat(u),n=n.concat(l)}}const s=this.value;this.theme.setSelectOptions(this.input,r,n),this.enum_options=r,this.enum_display=n,this.enum_values=r,r.includes(s)||this.jsoneditor.options.enum_source_value_auto_select!==!1?(this.input.value=s,this.value=s):(this.input.value=r[0],this.value=this.typecast(r[0]||""),this.parent&&!this.watchLoop?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path))}super.onWatchedFieldChange()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable(e)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const t=this.jsoneditor.options.show_errors,r=t==="change"||t==="interaction";if(t==="never"||r&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}const rqe={".choices > *":"box-sizing:border-box"};class l_e extends cw{setValue(e,t){if(this.choices_instance){let r=this.typecast(e||"");if(this.enum_values.includes(r)||(r=this.enum_values[0]),this.value===r)return;t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.input.value=this.enum_options[this.enum_values.indexOf(r)],this.choices_instance.setChoiceByValue(this.input.value),this.value=r,this.onChange()}else super.setValue(e,t)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",ki({},this.defaults.options.choices||{},this.options.choices||{}));this.choices_instance=new window.Choices(this.input,e)}super.afterInputReady()}onWatchedFieldChange(){if(super.onWatchedFieldChange(),this.choices_instance){const e=this.enum_options.map((t,r)=>({value:t,label:this.enum_display[r]}));this.choices_instance.setChoices(e,"value","label",!0),this.choices_instance.setChoiceByValue(`${this.value}`)}}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}l_e.rules=rqe;class nqe extends Bl{build(){if(super.build(),!!this.input&&(this.schema.max&&typeof this.schema.max=="string"&&this.input.setAttribute("max",this.schema.max),this.schema.min&&typeof this.schema.max=="string"&&this.input.setAttribute("min",this.schema.min),window.flatpickr&&typeof this.options.flatpickr=="object")){this.options.flatpickr.enableTime=this.schema.format!=="date",this.options.flatpickr.noCalendar=this.schema.format==="time",this.schema.type==="integer"&&(this.options.flatpickr.mode="single"),this.input.setAttribute("data-input","");let{input:e}=this;if(this.options.flatpickr.wrap===!0){const t=[];if(this.options.flatpickr.showToggleButton!==!1){const o=this.getButton("",this.schema.format==="time"?"time":"calendar","flatpickr_toggle_button");o.setAttribute("data-toggle",""),t.push(o)}if(this.options.flatpickr.showClearButton!==!1){const o=this.getButton("","clear","flatpickr_clear_button");o.setAttribute("data-clear",""),t.push(o)}const{parentNode:r}=this.input,{nextSibling:n}=this.input,s=this.theme.getInputGroup(this.input,t);s!==void 0?(this.options.flatpickr.inline=!1,r.insertBefore(s,n),e=s):this.options.flatpickr.wrap=!1}this.flatpickr=window.flatpickr(e,this.options.flatpickr),this.options.flatpickr.inline===!0&&this.options.flatpickr.inlineHideInput===!0&&this.input.setAttribute("type","hidden")}}getValue(){if(!this.dependenciesFulfilled)return;if(this.schema.type==="string")return this.value;if(this.value===""||this.value===void 0)return;const e=this.schema.format==="time"?`1970-01-01 ${this.value}`:this.value;return parseInt(new Date(e).getTime()/1e3)}setValue(e,t,r){if(this.schema.type==="string")super.setValue(e,t,r),this.flatpickr&&this.flatpickr.setDate(e);else if(e>0){const n=new Date(e*1e3),s=n.getFullYear(),o=this.zeroPad(n.getMonth()+1),a=this.zeroPad(n.getDate()),l=this.zeroPad(n.getHours()),u=this.zeroPad(n.getMinutes()),c=this.zeroPad(n.getSeconds()),h=[s,o,a].join("-"),d=[l,u,c].join(":");let p=`${h}T${d}`;this.schema.format==="date"?p=h:this.schema.format==="time"&&(p=d),this.input.value=p,this.refreshValue(),this.flatpickr&&this.flatpickr.setDate(p)}}destroy(){this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=null,super.destroy()}zeroPad(e){return`0${e}`.slice(-2)}}class sqe extends fa{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.currentEditor]&&this.editors[this.currentEditor].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.currentEditor]?Math.max(this.editors[this.currentEditor].getNumColumns(),4):4}enable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();super.enable()}disable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();super.disable()}switchEditor(){const e=this.getWatchedFieldValues();if(!e)return;const t=document.location.origin+document.location.pathname+this.template(e);this.editors[this.refs[t]]||this.buildChildEditor(t),this.currentEditor=this.refs[t],this.register(),this.editors.forEach((r,n)=>{r&&(this.currentEditor===n?r.container.style.display="":r.container.style.display="none")}),this.refreshValue(),this.onChange(!0)}buildChildEditor(e){this.refs[e]=this.editors.length;const t=this.theme.getChildEditorHolder();this.editor_holder.appendChild(t);const r=ki({},this.schema,this.jsoneditor.refs[e]),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),s=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:t,path:this.path,parent:this,required:!0});this.editors.push(s),s.preBuild(),s.build(),s.postBuild()}preBuild(){this.refs={},this.editors=[],this.currentEditor="";let e;for(e=0;e<this.schema.links.length;e++)if(this.schema.links[e].rel.toLowerCase()==="describedby"){this.template=this.jsoneditor.compileTemplate(this.schema.links[e].href,this.template_engine);break}this.schema.links=this.schema.links.slice(0,e).concat(this.schema.links.slice(e+1)),this.schema.links.length===0&&delete this.schema.links,this.baseSchema=ki({},this.schema)}build(){this.editor_holder=document.createElement("div"),this.container.appendChild(this.editor_holder),this.switchEditor()}onWatchedFieldChange(){this.switchEditor()}onChildEditorChange(e,t){this.editors[this.currentEditor]&&this.refreshValue(),super.onChildEditorChange(e,t)}refreshValue(){this.editors[this.currentEditor]&&(this.value=this.editors[this.currentEditor].getValue())}setValue(e,t){this.editors[this.currentEditor]&&(this.editors[this.currentEditor].setValue(e,t),this.refreshValue(),this.onChange())}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),super.destroy()}showValidationErrors(e){this.editors.forEach(t=>{t&&t.showValidationErrors(e)})}}class oqe extends fa{getNumColumns(){return 4}build(){this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enforceConst&&this.schema.const?this.enum=[this.schema.const]:this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(let e=0;e<this.enum.length;e++)this.select_options[e]=this.options.enum_titles[e]||`Value ${e+1}`,this.html_values[e]=this.getHTML(this.enum[e]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",e=>{this.selected=this.select_options.indexOf(e.currentTarget.value),this.value=this.enum[this.selected],this.refreshValue(),this.onChange(!0)}),this.value=this.enum[0],this.refreshValue(),this.enum.length===1&&(this.switcher.style.display="none")}refreshValue(){if(!this.enum)return;this.selected=-1;const e=JSON.stringify(this.value);if(this.enum.forEach((t,r)=>{if(e===JSON.stringify(t))return this.selected=r,!1}),this.selected<0){this.setValue(this.enum[0]);return}this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected]}enable(){this.always_disabled||(this.switcher.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.switcher.disabled=!0,super.disable()}getHTML(e){const t=(r,n)=>{Array.isArray(r)||typeof r.length=="number"&&r.length>0&&r.length-1 in r?Array.from(r).forEach((s,o)=>n(o,s)):Object.entries(r).forEach(([s,o])=>n(s,o))};if(e===null)return"<em>null</em>";if(typeof e=="object"){let r="";return t(e,(s,o)=>{let a=this.getHTML(o);Array.isArray(e)||(a=`<div><em>${s}</em>: ${a}</div>`),r+=`<li>${a}</li>`}),Array.isArray(e)?r=`<ol>${r}</ol>`:r=`<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>${r}</ul>`,r}else{if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return e}setValue(e){this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())}destroy(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}}class aqe extends fa{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}setValue(e,t,r){if(this.template&&!r||(e===null||typeof e>"u"?e="":typeof e=="object"?e=JSON.stringify(e):typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const n=this.sanitize(e);if(this.input.value===n)return;this.input.value=n;const s=r||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(s)}getNumColumns(){return 2}enable(){super.enable()}disable(){super.disable()}refreshValue(){this.value=this.input.value,typeof this.value!="string"&&(this.value=""),this.serialized=this.value}destroy(){this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}build(){if(this.format=this.schema.format,!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.input_type="hidden",this.input=this.theme.getFormInputField(this.input_type),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.container.appendChild(this.input),this.schema.template){const e=this.expandCallbacks("template",{template:this.schema.template});typeof e.template=="function"?this.template=e.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}}class lqe extends a_e{build(){this.options.compact=!1,this.header=this.label=this.theme.getLabelLike(this.getTitle()),this.description=this.theme.getDescription(this.schema.description||""),this.control=this.theme.getFormControl(this.label,this.description,null),this.container.appendChild(this.control)}getTitle(){return this.translateProperty(this.schema.title)}getNumColumns(){return 12}disable(){return!1}enable(){return!1}}class u_e extends Bl{build(){if(super.build(),typeof this.schema.minimum<"u"){let{minimum:e}=this.schema;typeof this.schema.exclusiveMinimum<"u"&&(e+=1),this.input.setAttribute("min",e)}if(typeof this.schema.maximum<"u"){let{maximum:e}=this.schema;typeof this.schema.exclusiveMaximum<"u"&&(e-=1),this.input.setAttribute("max",e)}if(typeof this.schema.step<"u"){const e=this.schema.step||1;this.input.setAttribute("step",e)}this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"])}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset()){this.input.value="";return}}else return HGe(this.value)?parseFloat(this.value):this.value}}class c_e extends u_e{getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset())return}else return WGe(this.value)?parseInt(this.value):this.value}}class uqe extends Bl{preBuild(){if(super.preBuild(),this.schema.options||(this.schema.options={}),!this.schema.options.cleave)switch(this.format){case"ipv6":this.schema.options.cleave={delimiters:[":"],blocks:[4,4,4,4,4,4,4,4],uppercase:!0};break;case"ipv4":this.schema.options.cleave={delimiters:["."],blocks:[3,3,3,3],numericOnly:!0};break}this.options=ki(this.options,this.schema.options||{})}}class cqe extends Bl{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.jodit_instance&&this.jodit_instance.setEditorValue(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.Jodit?(e=this.expandCallbacks("jodit",ki({},{height:300},this.defaults.options.jodit||{},this.options.jodit||{})),this.jodit_instance=new window.Jodit(this.input,e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.jodit_instance.setReadOnly(!0),this.jodit_instance.events.on("change",()=>{this.value=this.jodit_instance.getEditorValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.jodit_instance&&this.jodit_instance.setReadOnly(!1),super.enable()}disable(e){this.jodit_instance&&this.jodit_instance.setReadOnly(!0),super.disable(e)}destroy(){this.jodit_instance&&(this.jodit_instance.destruct(),this.jodit_instance=null),super.destroy()}}const hqe=i=>{const e=i.split(".");if(e.length!==4)throw new Error("error_ipv4");e.forEach(t=>{if(isNaN(+t)||+t<0||+t>255)throw new Error("error_ipv4")})},dqe=i=>{if(!i.match("^(?:(?:(?:[a-fA-F0-9]{1,4}:){6}|(?=(?:[a-fA-F0-9]{0,4}:){2,6}(?:[0-9]{1,3}.){3}[0-9]{1,3}$)(([0-9a-fA-F]{1,4}:){1,5}|:)((:[0-9a-fA-F]{1,4}){1,5}:|:)|::(?:[a-fA-F0-9]{1,4}:){5})(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])|(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?=(?:[a-fA-F0-9]{0,4}:){0,7}[a-fA-F0-9]{0,4}$)(([0-9a-fA-F]{1,4}:){1,7}|:)((:[0-9a-fA-F]{1,4}){1,7}|:)|(?:[a-fA-F0-9]{1,4}:){7}:|:(:[a-fA-F0-9]{1,4}){7})$"))throw new Error("error_ipv6")},fqe=i=>{if(!i.match("(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9].)+[a-zA-Z]{2,63}$)"))throw new Error("error_hostname")};function pqe(i,e,t,r){try{switch(i.format){case"ipv4":hqe(e);break;case"ipv6":dqe(e);break;case"hostname":fqe(e);break}return[]}catch(n){return[{path:t,property:"format",message:r(n.message)}]}}class h_e{constructor(e,t,r,n){this.jsoneditor=e,this.schema=t||this.jsoneditor.schema,this.options=r||{},this.translate=this.jsoneditor.translate||n.translate,this.translateProperty=this.jsoneditor.translateProperty||n.translateProperty,this.defaults=n,this._validateSubSchema={dependentRequired(s,o,a){const l=[];if(typeof s.dependentRequired<"u"){let u=[];Object.keys(s.dependentRequired).forEach(h=>{typeof o[h]<"u"&&(u=s.dependentRequired[h].filter(p=>!Rl(o,p)))}),u.length>0&&l.push({message:"Must have the required properties: "+u.join(", "),path:a})}return l},dependentSchemas(s,o,a){let l=[];return Object.keys(s.dependentSchemas).forEach(u=>{if(typeof o[u]<"u"){const c=s.dependentSchemas[u],h=this._validateSchema(c,o,a);l=[...l,...h]}}),l},contains(s,o,a){const l=[];let u=0;o.forEach(h=>{this._validateSchema(s.contains,h,a).length===0&&u++});const c=u===0;return typeof s.minContains<"u"?u<s.minContains&&l.push({message:this.translate("error_minContains",[u,s.minContains],s),path:a}):c&&l.push({message:this.translate("error_contains",null,s),path:a}),typeof s.maxContains<"u"&&u>s.maxContains&&l.push({message:this.translate("error_maxContains",[u,s.maxContains],s),path:a}),l},if(s,o,a){if(typeof s.then>"u"&&typeof s.else>"u")return[];const l=this._validateSchema(s.if,o,a);let u=[],c=[];return typeof s.then<"u"&&(u=this._validateSchema(s.then,o,a)),typeof s.else<"u"&&(c=this._validateSchema(s.else,o,a)),s.if===!0?u:s.if===!1?c:l.length===0?u:l.length>0?c:[]},const(s,o,a){return JSON.stringify(s.const)===JSON.stringify(o)?[]:[{path:a,property:"const",message:this.translate("error_const",null,s)}]},enum(s,o,a){const l=JSON.stringify(o);return s.enum.some(c=>l===JSON.stringify(c))?[]:[{path:a,property:"enum",message:this.translate("error_enum",null,s)}]},extends(s,o,a){const l=(u,c)=>(u.push(...this._validateSchema(c,o,a)),u);return s.extends.reduce(l,[])},allOf(s,o,a){const l=(u,c)=>(u.push(...this._validateSchema(c,o,a)),u);return s.allOf.reduce(l,[])},anyOf(s,o,a){return s.anyOf.some(u=>!this._validateSchema(u,o,a).length)?[]:[{path:a,property:"anyOf",message:this.translate("error_anyOf",null,s)}]},oneOf(s,o,a){let l=0;const u=[];s.oneOf.forEach((h,d)=>{const p=this._validateSchema(h,o,a);p.length||l++,p.forEach(m=>{m.path=`${a}.oneOf[${d}]${m.path.substr(a.length)}`}),u.push(...p)});const c=[];return l!==1&&(c.push({path:a,property:"oneOf",message:this.translate("error_oneOf",[l],s)}),c.push(...u)),c},not(s,o,a){return this._validateSchema(s.not,o,a).length?[]:[{path:a,property:"not",message:this.translate("error_not",null,s)}]},type(s,o,a){if(Array.isArray(s.type)){if(!s.type.some(u=>this._checkType(u,o)))return[{path:a,property:"type",message:this.translate("error_type_union",null,s)}]}else if(["date","time","datetime-local"].includes(s.format)&&s.type==="integer"){if(!this._checkType("string",`${o}`))return[{path:a,property:"type",message:this.translate("error_type",[s.format],s)}]}else if(!this._checkType(s.type,o))return[{path:a,property:"type",message:this.translate("error_type",[s.type],s)}];return[]},disallow(s,o,a){if(Array.isArray(s.disallow)){if(s.disallow.some(u=>this._checkType(u,o)))return[{path:a,property:"disallow",message:this.translate("error_disallow_union",null,s)}]}else if(this._checkType(s.disallow,o))return[{path:a,property:"disallow",message:this.translate("error_disallow",[s.disallow],s)}];return[]}},this._validateNumberSubSchema={multipleOf(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},divisibleBy(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},maximum(s,o,a){let l=s.exclusiveMaximum?o<s.maximum:o<=s.maximum;return window.math?l=window.math[s.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(o),window.math.bignumber(s.maximum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMaximum?"lt":"lte"](new window.Decimal(s.maximum))),l?[]:[{path:a,property:"maximum",message:this.translate(s.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[s.maximum],s)}]},minimum(s,o,a){let l=s.exclusiveMinimum?o>s.minimum:o>=s.minimum;return window.math?l=window.math[s.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(o),window.math.bignumber(s.minimum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMinimum?"gt":"gte"](new window.Decimal(s.minimum))),l?[]:[{path:a,property:"minimum",message:this.translate(s.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[s.minimum],s)}]}},this._validateStringSubSchema={maxLength(s,o,a){const l=[];return`${o}`.length>s.maxLength&&l.push({path:a,property:"maxLength",message:this.translate("error_maxLength",[s.maxLength],s)}),l},minLength(s,o,a){return`${o}`.length<s.minLength?[{path:a,property:"minLength",message:this.translate(s.minLength===1?"error_notempty":"error_minLength",[s.minLength],s)}]:[]},pattern(s,o,a){return new RegExp(s.pattern).test(o)?[]:[{path:a,property:"pattern",message:s.options&&s.options.patternmessage?s.options.patternmessage:this.translate("error_pattern",[s.pattern],s)}]}},this._validateArraySubSchema={items(s,o,a){const l=[];if(Array.isArray(s.items))for(let u=0;u<o.length;u++)if(s.items[u])l.push(...this._validateSchema(s.items[u],o[u],`${a}.${u}`));else{if(s.additionalItems===!0)break;if(s.additionalItems)l.push(...this._validateSchema(s.additionalItems,o[u],`${a}.${u}`));else if(s.additionalItems===!1){l.push({path:a,property:"additionalItems",message:this.translate("error_additionalItems",null,s)});break}else break}else o.forEach((u,c)=>{l.push(...this._validateSchema(s.items,u,`${a}.${c}`))});return l},maxItems(s,o,a){return o.length>s.maxItems?[{path:a,property:"maxItems",message:this.translate("error_maxItems",[s.maxItems],s)}]:[]},minItems(s,o,a){return o.length<s.minItems?[{path:a,property:"minItems",message:this.translate("error_minItems",[s.minItems],s)}]:[]},uniqueItems(s,o,a){const l={};for(let u=0;u<o.length;u++){const c=JSON.stringify(o[u]);if(l[c])return[{path:a,property:"uniqueItems",message:this.translate("error_uniqueItems",null,s)}];l[c]=!0}return[]}},this._validateObjectSubSchema={maxProperties(s,o,a){return Object.keys(o).length>s.maxProperties?[{path:a,property:"maxProperties",message:this.translate("error_maxProperties",[s.maxProperties],s)}]:[]},minProperties(s,o,a){return Object.keys(o).length<s.minProperties?[{path:a,property:"minProperties",message:this.translate("error_minProperties",[s.minProperties],s)}]:[]},required(s,o,a){const l=[];return Array.isArray(s.required)&&s.required.forEach(u=>{if(typeof o[u]<"u")return;const c=this.jsoneditor.getEditor(`${a}.${u}`);c&&c.dependenciesFulfilled===!1||c&&["button","info"].includes(c.schema.format||c.schema.type)||l.push({path:a,property:"required",message:this.translate("error_required",[s&&s.properties&&s.properties[u]&&s.properties[u].title?s.properties[u].title:u],s)})}),l},properties(s,o,a,l){const u=[];return Object.entries(s.properties).forEach(([c,h])=>{l[c]=!0,u.push(...this._validateSchema(h,o[c],`${a}.${c}`))}),u},patternProperties(s,o,a,l){const u=[];return Object.entries(s.patternProperties).forEach(([c,h])=>{const d=new RegExp(c);Object.entries(o).forEach(([p,m])=>{d.test(p)&&(l[p]=!0,u.push(...this._validateSchema(h,m,`${a}.${p}`)))})}),u}},this._validateObjectSubSchema2={propertyNames(s,o,a,l){const u=[],c=Object.keys(o);let h=null;for(let d=0;d<c.length;d++){let p="",m=!1;if(h=c[d],typeof s.propertyNames=="boolean"){if(s.propertyNames===!0)continue;u.push({path:a,property:"propertyNames",message:this.translate("error_property_names_false",[h],s)});break}if(m=Object.entries(s.propertyNames).every(([g,v])=>{let b=!1,_=null;switch(g){case"maxLength":if(typeof v!="number"){p="error_property_names_maxlength";break}if(h.length>v){p="error_property_names_exceeds_maxlength";break}return!0;case"const":if(v!==h){p="error_property_names_const_mismatch";break}return!0;case"enum":if(!Array.isArray(v)){p="error_property_names_enum";break}if(v.forEach(E=>{E===h&&(b=!0)}),!b){p="error_property_names_enum_mismatch";break}return!0;case"pattern":if(typeof v!="string"){p="error_property_names_pattern";break}if(_=new RegExp(v),!_.test(h)){p="error_property_names_pattern_mismatch";break}return!0;default:return u.push({path:a,property:"propertyNames",message:this.translate("error_property_names_unsupported",[g],s)}),!1}return u.push({path:a,property:"propertyNames",message:this.translate(p,[h],s)}),!1}),!m)break}return u},additionalProperties(s,o,a,l){const u=[],c=Object.keys(o);for(let h=0;h<c.length;h++){const d=c[h];if(!l[d])if(s.additionalProperties){if(s.additionalProperties===!0)break;u.push(...this._validateSchema(s.additionalProperties,o[d],`${a}.${d}`))}else{u.push({path:a,property:"additionalProperties",message:this.translate("error_additional_properties",[d],s)});break}}return u},dependencies(s,o,a){const l=[];return Object.entries(s.dependencies).forEach(([u,c])=>{typeof o[u]>"u"||(Array.isArray(c)?c.forEach(h=>{typeof o[h]>"u"&&l.push({path:a,property:"dependencies",message:this.translate("error_dependency",[h],s)})}):l.push(...this._validateSchema(c,o,a)))}),l}}}fitTest(e,t,r=1e7){const n={match:0,extra:0};if(typeof e=="object"&&e!==null){const s=this._getSchema(t);if(s.anyOf){let o={...n};for(const a of s.anyOf){const l=this.fitTest(e,a,r);(l.match>o.match||l.match===o.match&&l.extra<o.extra)&&(o=l)}return o}else{const o=this._getSchema(t).properties;for(const a in o){if(!Rl(o,a)){n.extra+=r;continue}if(typeof e[a]=="object"&&typeof o[a]=="object"&&typeof o[a].properties=="object"){const l=this.fitTest(e[a],o[a],r/100);n.match+=l.match,n.extra+=l.extra}typeof e[a]<"u"&&(n.match+=r)}}}return n}_getSchema(e){return typeof e>"u"?ki({},this.jsoneditor.expandRefs(this.schema)):e}validate(e){return this._validateSchema(this.schema,e)}_validateSchema(e,t,r){const n=[];return r=r||this.jsoneditor.root.formname,e=ki({},this.jsoneditor.expandRefs(e)),typeof t>"u"?this._validateV3Required(e,t,r):(Object.keys(e).forEach(s=>{this._validateSubSchema[s]&&n.push(...this._validateSubSchema[s].call(this,e,t,r))}),n.push(...this._validateByValueType(e,t,r)),e.links&&e.links.forEach((s,o)=>{s.rel&&s.rel.toLowerCase()==="describedby"&&(e=this._expandSchemaLink(e,o),n.push(...this._validateSchema(e,t,r,this.translate)))}),["date","time","datetime-local"].includes(e.format)&&n.push(...this._validateDateTimeSubSchema(e,t,r)),["uuid"].includes(e.format)&&n.push(...this._validateUUIDSchema(e,t,r)),n.push(...this._validateCustomValidator(e,t,r)),this._removeDuplicateErrors(n))}_expandSchemaLink(e,t){const r=e.links[t].href,n=this.jsoneditor.root.getValue(),s=this.jsoneditor.compileTemplate(r,this.jsoneditor.template),o=document.location.origin+document.location.pathname+s(n);return e.links=e.links.slice(0,t).concat(e.links.slice(t+1)),ki({},e,this.jsoneditor.refs[o])}_validateV3Required(e,t,r){return(typeof e.required<"u"&&e.required===!0||typeof e.required>"u"&&this.jsoneditor.options.required_by_default===!0)&&e.type!=="info"?[{path:r,property:"required",message:this.translate("error_notset",null,e)}]:[]}_validateByValueType(e,t,r){const n=[];if(t===null)return n;if(typeof t=="number")Object.keys(e).forEach(s=>{this._validateNumberSubSchema[s]&&n.push(...this._validateNumberSubSchema[s].call(this,e,t,r))});else if(typeof t=="string")Object.keys(e).forEach(s=>{this._validateStringSubSchema[s]&&n.push(...this._validateStringSubSchema[s].call(this,e,t,r))});else if(Array.isArray(t))Object.keys(e).forEach(s=>{this._validateArraySubSchema[s]&&n.push(...this._validateArraySubSchema[s].call(this,e,t,r))});else if(typeof t=="object"){const s={};Object.keys(e).forEach(o=>{this._validateObjectSubSchema[o]&&n.push(...this._validateObjectSubSchema[o].call(this,e,t,r,s))}),typeof e.additionalProperties>"u"&&this.jsoneditor.options.no_additional_properties&&!e.oneOf&&!e.anyOf&&!e.allOf&&(e.additionalProperties=!1),Object.keys(e).forEach(o=>{typeof this._validateObjectSubSchema2[o]<"u"&&n.push(...this._validateObjectSubSchema2[o].call(this,e,t,r,s))})}return n}_validateUUIDSchema(e,t,r){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)?[]:[{path:r,property:"format",message:this.translate("error_pattern",["^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"],e)}]}_validateNumberSubSchemaMultipleDivisible(e,t,r){const n=e.multipleOf||e.divisibleBy;let s=t/n===Math.floor(t/n);return window.math?s=window.math.mod(window.math.bignumber(t),window.math.bignumber(n)).equals(0):window.Decimal&&(s=new window.Decimal(t).mod(new window.Decimal(n)).equals(0)),s?[]:[{path:r,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[n],e)}]}_validateDateTimeSubSchema(e,t,r){const n=(c,h,d)=>h*1<1?[{path:d,property:"format",message:this.translate("error_invalid_epoch",null,c)}]:h!==Math.abs(parseInt(h))?[{path:d,property:"format",message:this.translate(`error_${c.format.replace(/-/g,"_")}`,[u],c)}]:[],s=(c,h,d,p)=>{if(h!==""){let m;if(p.flatpickr.config.mode!=="single"){const g=p.flatpickr.config.mode==="range"?p.flatpickr.l10n.rangeSeparator:", ";m=p.flatpickr.selectedDates.map(b=>p.flatpickr.formatDate(b,p.flatpickr.config.dateFormat)).join(g)}try{if(m){if(m!==h)throw new Error(`${p.flatpickr.config.mode} mismatch`)}else if(p.flatpickr.formatDate(p.flatpickr.parseDate(h,p.flatpickr.config.dateFormat),p.flatpickr.config.dateFormat)!==h)throw new Error("mismatch")}catch{const v=p.flatpickr.config.errorDateFormat!==void 0?p.flatpickr.config.errorDateFormat:p.flatpickr.config.dateFormat;return[{path:d,property:"format",message:this.translate(`error_${p.format.replace(/-/g,"_")}`,[v],c)}]}}return[]},o={date:/^(\d{4}\D\d{2}\D\d{2})$/,time:/^(\d{2}:\d{2}(?::\d{2})?)$/,"datetime-local":/^(\d{4}\D\d{2}\D\d{2}[ T]\d{2}:\d{2}(?::\d{2})?)$/},a={date:'"YYYY-MM-DD"',time:'"HH:MM"',"datetime-local":'"YYYY-MM-DD HH:MM"'},l=this.jsoneditor.getEditor(r),u=l&&l.flatpickr?l.flatpickr.config.dateFormat:a[e.format];if(e.type==="integer")return n(e,t,r);if(!l||!l.flatpickr){if(!o[e.format].test(t))return[{path:r,property:"format",message:this.translate(`error_${e.format.replace(/-/g,"_")}`,[u],e)}]}else if(l)return s(e,t,r,l);return[]}_validateCustomValidator(e,t,r){const n=[];n.push(...pqe.call(this,e,t,r,this.translate));const s=o=>{n.push(...o.call(this,e,t,r))};return this.defaults.custom_validators.forEach(s),this.options.custom_validators&&this.options.custom_validators.forEach(s),n}_removeDuplicateErrors(e){return e.reduce((t,r)=>{let n=!0;return t||(t=[]),t.forEach(s=>{s.message===r.message&&s.path===r.path&&s.property===r.property&&(s.errorcount++,n=!1)}),n&&(r.errorcount=1,t.push(r)),t},[])}_checkType(e,t){const r={string:n=>typeof n=="string",number:n=>typeof n=="number",integer:n=>typeof n=="number"&&n===Math.floor(n),boolean:n=>typeof n=="boolean",array:n=>Array.isArray(n),object:n=>n!==null&&!Array.isArray(n)&&typeof n=="object",null:n=>n===null};return typeof e=="string"?r[e]?r[e](t):!0:!this._validateSchema(e,t).length}}class mqe extends fa{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4}enable(){if(!this.always_disabled){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,super.enable()}}disable(e){if(e&&(this.always_disabled=!0),this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].disable(e);this.switcher.disabled=!0,super.disable()}switchEditor(e){this.lastType=this.type,this.editors[e]||this.buildChildEditor(e);let t=this.getValue();this.type=e,this.register(),this.editors.forEach((r,n)=>{r&&(this.type===n?(this.keep_only_existing_values&&(t=YGe(r.getValue(),t)),(this.keep_values||this.if)&&r.setValue(t,!0),r.container.style.display=""):r.container.style.display="none")}),this.onChange(!0,!1,{event:"switch",data:{type:this.lastType,path:this.editors[e].path}}),this.refreshValue(),this.refreshHeaderText()}buildChildEditor(e){var o;const t=this.types[e],r=this.theme.getChildEditorHolder();this.editor_holder.appendChild(r);let n;typeof t=="string"?(n=ki({},this.schema),n.type=t):(n=ki({},this.schema,t),n=this.jsoneditor.expandRefs(n),t&&t.required&&Array.isArray(t.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(n.required=this.schema.required.concat(t.required))),(o=n==null?void 0:n.options)!=null&&o.dependencies&&delete n.options.dependencies;const s=this.jsoneditor.getEditorClass(n);this.editors[e]=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:n,container:r,path:this.path,parent:this,required:!0}),this.editors[e].preBuild(),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].header&&this.theme.visuallyHidden(this.editors[e].header),this.editors[e].option=this.switcher_options[e],r.addEventListener("change_header_text",()=>{this.refreshHeaderText()}),e!==this.type&&(r.style.display="none")}preBuild(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,typeof this.jsoneditor.options.keep_oneof_values<"u"&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),typeof this.options.keep_oneof_values<"u"&&(this.keep_values=this.options.keep_oneof_values),this.keep_only_existing_values=!1,typeof this.jsoneditor.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.jsoneditor.options.keep_only_existing_values),typeof this.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.options.keep_only_existing_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else if(this.schema.if)this.if=!0,this.ifSchema=JSON.parse(JSON.stringify(this.schema.if)),this.thenSchema={title:"then"},this.elseSchema={title:"else"},this.types=[],this.schema.then&&JS(this.thenSchema,this.schema,this.schema.then),this.schema.else&&JS(this.elseSchema,this.schema,this.schema.else),this.types.push(this.thenSchema),this.types.push(this.elseSchema),this.types.forEach(e=>{delete e.if,delete e.then,delete e.else}),delete this.schema.if;else{if(!this.schema.type||this.schema.type==="any"){if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){let{disallow:e}=this.schema;(typeof e!="object"||!Array.isArray(e))&&(e=[e]);const t=[];this.types.forEach(r=>{e.includes(r)||t.push(r)}),this.types=t}}else Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];delete this.schema.type}this.display_text=this.getDisplayText(this.types)}build(){const{container:e}=this;this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired()),this.switcher=this.theme.getSwitcher(this.display_text),this.switcher.setAttribute("id",this.formname+"switcher"),this.switcherLabel=this.theme.getHiddenLabel(this.formname+" switcher"),this.switcherLabel.setAttribute("for",this.formname+"switcher"),this.if||(this.container.appendChild(this.header),e.appendChild(this.switcherLabel),e.appendChild(this.switcher)),this.switcher.addEventListener("change",r=>{r.preventDefault(),r.stopPropagation(),this.switchEditor(this.display_text.indexOf(r.currentTarget.value)),this.onChange(!0)}),this.editor_holder=document.createElement("div"),e.appendChild(this.editor_holder);const t={};this.jsoneditor.options.custom_validators&&(t.custom_validators=this.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),this.types.forEach((r,n)=>{this.editors[n]=!1;let s;typeof r=="string"?(s=ki({},this.schema),s.type=r):(s=ki({},this.schema,r),r.required&&Array.isArray(r.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(s.required=this.schema.required.concat(r.required))),this.validators[n]=new h_e(this.jsoneditor,s,t,this.defaults)}),this.jsoneditor.on("change",()=>{this.switchIf()}),this.switchEditor(0)}onChildEditorChange(e,t){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),super.onChildEditorChange(e,t)}refreshHeaderText(){const e=this.getDisplayText(this.types);Array.from(this.switcher_options).forEach((t,r)=>{t.textContent=e[r]})}refreshValue(){this.editors[this.type]&&(this.value=this.editors[this.type].getValue())}switchIf(){if(this.ifSchema&&this.value){const e=this.getIfType(this.value);this.lastType!==e&&(this.switchEditor(e),this.editors[this.type].setValue(this.value,!0)),this.switcher.value=this.display_text[this.type]}}getIfType(e){return this.jsoneditor.validator._validateSchema(this.ifSchema,e).length===0?0:1}setValue(e,t){const r=this.type;let n={match:0,extra:0,i:this.type};const s={match:0,i:null};this.validators.forEach((l,u)=>{let c=null;typeof this.anyOf<"u"&&this.anyOf&&(c=l.fitTest(e),(n.match<c.match||n.match===c.match&&n.extra>c.extra)&&(n=c,n.i=u)),!l.validate(e).length&&s.i===null?(s.i=u,c!==null&&(s.match=c.match)):n=s});let o=s.i;typeof this.anyOf<"u"&&this.anyOf&&s.match<n.match&&(o=n.i),this.if&&(o=this.getIfType(e)),o===null&&(o=this.type),this.type=o,this.switcher.value=this.display_text[o];const a=this.type!==r;a&&(this.switchEditor(this.type),this.editors[this.type].setValue(e,t)),typeof e<"u"&&this.editors[this.type].setValue(e,t),this.refreshValue(),this.onChange(a)}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}showValidationErrors(e){if(this.oneOf||this.anyOf){const t=this.oneOf?"oneOf":"anyOf";this.editors.forEach((r,n)=>{if(!r)return;const s=`${this.path}.${t}[${n}]`,o=(a,l)=>{if(l.path.startsWith(s)||l.path===s.substr(0,l.path.length)){const u=ki({},l);l.path.startsWith(s)&&(u.path=this.path+u.path.substr(s.length)),a.push(u)}return a};r.showValidationErrors(e.reduce(o,[]))})}else this.editors.forEach(t=>{t&&t.showValidationErrors(e)})}addLinks(){}}class gqe extends fa{getValue(){if(this.dependenciesFulfilled)return null}setValue(){this.onChange()}getNumColumns(){return 2}}const yqe={".je-object__title":"display:inline-block",".je-object__controls":"margin:0%200%200%2010px",".je-object__container":"position:relative",".je-object__property-checkbox":"margin:0;height:auto",".property-selector":"width:295px;max-height:160px;padding:5px%200;overflow-y:auto;overflow-x:hidden;padding-left:5px",".property-selector-input":"width:220px;margin-bottom:0;display:inline-block",".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-edit-json--textarea":"height:170px;width:300px;display:block"};class d_e extends fa{constructor(e,t,r){super(e,t),this.currentDepth=r}getChildEditors(){return this.editors}register(){super.register(),this.editors&&Object.values(this.editors).forEach(e=>e.register())}unregister(){super.unregister(),this.editors&&Object.values(this.editors).forEach(e=>e.unregister())}getNumColumns(){return Math.max(Math.min(12,this.maxwidth),3)}enable(){this.always_disabled||(this.editjson_control&&(this.editjson_control.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),super.enable(),this.editors&&Object.values(this.editors).forEach(e=>{(e.isActive()||e.isUiOnly)&&e.enable(),e.optInCheckbox.disabled=!1}))}disable(e){e&&(this.always_disabled=!0),this.editjson_control&&(this.editjson_control.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),super.disable(),this.editors&&Object.values(this.editors).forEach(t=>{(t.isActive()||t.isUiOnly)&&t.disable(e),t.optInCheckbox.disabled=!0})}layoutEditors(){let e,t;if(!this.row_container)return;this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((u,c)=>{let h=this.editors[u].schema.propertyOrder,d=this.editors[c].schema.propertyOrder;return typeof h!="number"&&(h=1e3),typeof d!="number"&&(d=1e3),h-d});let r;const n=this.format==="categories",s=[];let o=null,a=null,l;if(this.format==="grid-strict"){let u=0;if(l=[],this.property_order.forEach(c=>{const h=this.editors[c];if(h.property_removed)return;const d=h.options.hidden?0:h.options.grid_columns||h.getNumColumns(),p=h.options.hidden?0:h.options.grid_offset||0,m=h.options.hidden?!1:h.options.grid_break||!1,g=h.options.hidden?0:h.container.offsetHeight,v={key:c,width:d,offset:p,height:g};l.push(v),s[u]=l,m&&(u++,l=[])}),this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),r=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),r.appendChild(l),t=0;t<s[e].length;t++)o=s[e][t].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e][t].width,s[e][t].offset),l.appendChild(a.container)}else if(this.format==="grid"){for(this.property_order.forEach(u=>{const c=this.editors[u];if(c.property_removed)return;let h=!1;const d=c.options.hidden?0:c.options.grid_columns||c.getNumColumns(),p=c.options.hidden?0:c.container.offsetHeight;for(let m=0;m<s.length;m++)s[m].width+d<=12&&(!p||s[m].minh*.5<p&&s[m].maxh*2>p)&&(h=m);h===!1&&(s.push({width:0,minh:999999,maxh:0,editors:[]}),h=s.length-1),s[h].editors.push({key:u,width:d,height:p}),s[h].width+=d,s[h].minh=Math.min(s[h].minh,p),s[h].maxh=Math.max(s[h].maxh,p)}),e=0;e<s.length;e++)if(s[e].width<12){let u=!1,c=0;for(t=0;t<s[e].editors.length;t++)(u===!1||s[e].editors[t].width>s[e].editors[u].width)&&(u=t),s[e].editors[t].width*=12/s[e].width,s[e].editors[t].width=Math.floor(s[e].editors[t].width),c+=s[e].editors[t].width;c<12&&(s[e].editors[u].width+=12-c),s[e].width=12}if(this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),r=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),r.appendChild(l),t=0;t<s[e].editors.length;t++)o=s[e].editors[t].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e].editors[t].width),l.appendChild(a.container)}else{if(r=document.createElement("div"),n){const u=document.createElement("div"),c=this.theme.getTopTabHolder(this.translateProperty(this.schema.title)),h=this.theme.getTopTabContentHolder(c);for(this.property_order.forEach(m=>{const g=this.editors[m];if(g.property_removed)return;const v=this.theme.getTabContent(),b=g.schema&&(g.schema.type==="object"||g.schema.type==="array");v.isObjOrArray=b;const _=this.theme.getGridRow();g.tab||(typeof this.basicPane>"u"?this.addRow(g,c,v):this.addRow(g,c,this.basicPane)),v.id=this.getValidId(g.tab_text.textContent),b?(v.appendChild(_),h.appendChild(v),this.theme.addTopTab(c,g.tab)):(u.appendChild(_),h.childElementCount>0?h.firstChild.isObjOrArray&&(v.appendChild(u),h.insertBefore(v,h.firstChild),this.theme.insertBasicTopTab(g.tab,c),g.basicPane=v):(v.appendChild(u),h.appendChild(v),this.theme.addTopTab(c,g.tab),g.basicPane=v)),g.options.hidden?g.container.style.display="none":this.theme.setGridColumnSize(g.container,12),_.appendChild(g.container),g.rowPane=v});this.tabPanesContainer.firstChild;)this.tabPanesContainer.removeChild(this.tabPanesContainer.firstChild);const d=this.tabs_holder.parentNode;d.removeChild(d.firstChild),d.appendChild(c),this.tabPanesContainer=h,this.tabs_holder=c;const p=this.theme.getFirstTab(this.tabs_holder);p&&Uu(p,"click");return}this.property_order.forEach(u=>{const c=this.editors[u];c.property_removed||(l=this.theme.getGridRow(),r.appendChild(l),c.options.hidden?c.container.style.display="none":this.theme.setGridColumnSize(c.container,12),l.appendChild(c.container))})}for(;this.row_container.firstChild;)this.row_container.removeChild(this.row_container.firstChild);this.row_container.appendChild(r)}getPropertySchema(e){let t=this.schema.properties[e]||{};t=ki({},t);let r=!!this.schema.properties[e];return this.schema.patternProperties&&Object.keys(this.schema.patternProperties).forEach(n=>{new RegExp(n).test(e)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[n]),r=!0)}),!r&&this.schema.additionalProperties&&typeof this.schema.additionalProperties=="object"&&(t=ki({},this.schema.additionalProperties)),t}preBuild(){if(super.preBuild(),this.editors={},this.cached_editors={},this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)Object.entries(this.schema.properties).forEach(([e,t])=>{const r=this.jsoneditor.getEditorClass(t);this.editors[e]=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:t,path:`${this.path}.${e}`,parent:this,compact:!0,required:!0},this.currentDepth+1),this.editors[e].preBuild();const n=this.editors[e].options.hidden?0:this.editors[e].options.grid_columns||this.editors[e].getNumColumns();this.minwidth+=n,this.maxwidth+=n}),this.no_link_holder=!0;else{if(this.options.table)throw new Error("Not supported yet");this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?this.schema.defaultProperties=Object.keys(this.schema.properties).filter(e=>this.isRequiredObject({key:e,schema:this.schema.properties[e]})):this.schema.defaultProperties=Object.keys(this.schema.properties)),this.maxwidth+=1,Array.isArray(this.schema.defaultProperties)&&this.schema.defaultProperties.forEach(e=>{this.addObjectProperty(e,!0),this.editors[e]&&(this.minwidth=Math.max(this.minwidth,this.editors[e].options.grid_columns||this.editors[e].getNumColumns()),this.maxwidth+=this.editors[e].options.grid_columns||this.editors[e].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((e,t)=>{let r=this.editors[e].schema.propertyOrder,n=this.editors[t].schema.propertyOrder;return typeof r!="number"&&(r=1e3),typeof n!="number"&&(n=1e3),r-n})}addTab(e){const t=this.rows[e].schema&&(this.rows[e].schema.type==="object"||this.rows[e].schema.type==="array");this.tabs_holder&&(this.rows[e].tab_text=document.createElement("span"),t?this.rows[e].tab_text.textContent=this.rows[e].getHeaderText():this.rows[e].tab_text.textContent=typeof this.schema.basicCategoryTitle>"u"?"Basic":this.schema.basicCategoryTitle,this.rows[e].tab=this.theme.getTopTab(this.rows[e].tab_text,this.getValidId(this.rows[e].tab_text.textContent)),this.rows[e].tab.addEventListener("click",r=>{this.active_tab=this.rows[e].tab,this.refreshTabs(),r.preventDefault(),r.stopPropagation()}))}addRow(e,t,r){const n=this.rows.length,s=e.schema.type==="object"||e.schema.type==="array";this.rows[n]=e,this.rows[n].rowPane=r,s?(this.addTab(n),this.theme.addTopTab(t,this.rows[n].tab)):typeof this.basicTab>"u"?(this.addTab(n),this.basicTab=n,this.basicPane=r,this.theme.addTopTab(t,this.rows[n].tab)):(this.rows[n].tab=this.rows[this.basicTab].tab,this.rows[n].tab_text=this.rows[this.basicTab].tab_text,this.rows[n].rowPane=this.rows[this.basicTab].rowPane)}refreshTabs(e){const t=typeof this.basicTab<"u";let r=!1;this.rows.forEach(n=>{!n.tab||!n.rowPane||!n.rowPane.parentNode||t&&n.tab===this.rows[this.basicTab].tab&&r||(e?n.tab_text.textContent=n.getHeaderText():(t&&n.tab===this.rows[this.basicTab].tab&&(r=!0),n.tab===this.active_tab?this.theme.markTabActive(n):this.theme.markTabInactive(n)))})}build(){const e=this.format==="categories";if(this.rows=[],this.active_tab=null,this.options.table_row)this.editor_holder=this.container,Object.entries(this.editors).forEach(([t,r])=>{const n=this.theme.getTableCell();this.editor_holder.appendChild(n),r.setContainer(n),r.build(),r.postBuild(),r.setOptInCheckbox(r.header),r.setValue(r.getDefault(),!0),this.editors[t].options.hidden&&(n.style.display="none"),this.editors[t].options.input_width&&(n.style.width=this.editors[t].options.input_width)});else{if(this.options.table)throw new Error("Not supported yet");{this.header="",this.options.compact||(this.header=document.createElement("span"),this.header.textContent=this.getTitle()),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.title.classList.add("je-object__title"),this.controls=this.theme.getButtonHolder(),this.controls.classList.add("je-object__controls"),this.container.appendChild(this.title),this.container.appendChild(this.controls),this.container.classList.add("je-object__container"),this.editjson_holder=this.theme.getModal(),this.editjson_textarea_label=this.theme.getHiddenLabel(this.translate("button_edit_json")),this.editjson_textarea_label.setAttribute("for",this.path+"-edit-json-textarea"),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.setAttribute("id",this.path+"-edit-json-textarea"),this.editjson_textarea.setAttribute("aria-labelledby",this.path+"-edit-json-textarea"),this.editjson_textarea.classList.add("je-edit-json--textarea"),this.editjson_save=this.getButton("button_save","save","button_save"),this.editjson_save.classList.add("json-editor-btntype-save"),this.editjson_save.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.saveJSON()}),this.editjson_copy=this.getButton("button_copy","copy","button_copy"),this.editjson_copy.classList.add("json-editor-btntype-copy"),this.editjson_copy.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.copyJSON()}),this.editjson_cancel=this.getButton("button_cancel","cancel","button_cancel"),this.editjson_cancel.classList.add("json-editor-btntype-cancel"),this.editjson_cancel.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea_label),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_copy),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.classList.add("property-selector"),this.addproperty_add=this.getButton("button_add","add","button_add"),this.addproperty_add.classList.add("json-editor-btntype-add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input_label=this.theme.getHiddenLabel(this.translate("button_properties")),this.addproperty_input_label.setAttribute("for",this.path+"-property-selector"),this.addproperty_input.classList.add("property-selector-input"),this.addproperty_input.setAttribute("id",this.path+"-property-selector"),this.addproperty_input.setAttribute("aria-labelledby",this.path+"-property-selector"),this.addproperty_add.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),this.addproperty_input.value){if(this.editors[this.addproperty_input.value]){window.alert("there is already a property with that name");return}this.addObjectProperty(this.addproperty_input.value),this.editors[this.addproperty_input.value]&&this.editors[this.addproperty_input.value].disable();const n=this.editors[this.addproperty_input.value].key,s=this.editors[this.addproperty_input.value].type,o=this.editors[this.addproperty_input.value].path;this.onChange(!0,!1,{event:"add",data:{key:n,type:s,path:o}})}}),this.addproperty_input.addEventListener("input",r=>{r.target.previousSibling.previousSibling.childNodes.forEach(n=>{let s=n.innerText,o=r.target.value;this.options.case_sensitive_property_search||this.jsoneditor.options.case_sensitive_property_search||(s=s.toLowerCase(),o=o.toLowerCase()),s.includes(o)?n.style.display="":n.style.display="none"})}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input_label),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);const t=document.createElement("div");t.style.clear="both",this.addproperty_holder.appendChild(t),this.onOutsideModalClickListener=this.onOutsideModalClick.bind(this),document.addEventListener("click",this.onOutsideModalClickListener,!0),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),e?(this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTopTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.tabs_holder)):(this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.row_container)),Object.values(this.editors).forEach(r=>{const n=this.theme.getTabContent(),s=this.theme.getGridColumn(),o=!!(r.schema&&(r.schema.type==="object"||r.schema.type==="array"));if(n.isObjOrArray=o,e){if(o){const a=this.theme.getGridContainer();a.appendChild(s),n.appendChild(a),this.tabPanesContainer.appendChild(n),this.row_container=a}else typeof this.row_container_basic>"u"&&(this.row_container_basic=this.theme.getGridContainer(),n.appendChild(this.row_container_basic),this.tabPanesContainer.childElementCount===0?this.tabPanesContainer.appendChild(n):this.tabPanesContainer.insertBefore(n,this.tabPanesContainer.childNodes[1])),this.row_container_basic.appendChild(s);this.addRow(r,this.tabs_holder,n),n.id=this.getValidId(r.schema.title)}else this.row_container.appendChild(s);r.setContainer(s),r.build(),r.postBuild(),r.setOptInCheckbox(r.header)}),this.rows[0]&&Uu(this.rows[0].tab,"click"),this.collapsed=!1,this.collapse_control=this.getButton("","collapse","button_collapse"),this.collapse_control.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(this.collapse_control,this.title.childNodes[0]),this.collapse_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.collapsed?(this.editor_holder.style.display="",this.collapsed=!1,this.setButtonText(this.collapse_control,"","collapse","button_collapse")):(this.editor_holder.style.display="none",this.collapsed=!0,this.setButtonText(this.collapse_control,"","expand","button_expand"))}),this.options.collapsed&&Uu(this.collapse_control,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.collapse_control.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.collapse_control.style.display="none"),this.editjson_control=this.getButton("JSON","edit","button_edit_json"),this.editjson_control.classList.add("json-editor-btntype-editjson"),this.editjson_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleEditJSON()}),this.controls.appendChild(this.editjson_control),this.controls.insertBefore(this.editjson_holder,this.controls.childNodes[0]),this.schema.options&&typeof this.schema.options.disable_edit_json<"u"?this.schema.options.disable_edit_json&&(this.editjson_control.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_control.style.display="none"),this.addproperty_button=this.getButton("properties","edit_properties","button_object_properties"),this.addproperty_button.classList.add("json-editor-btntype-properties"),this.addproperty_button.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleAddProperty()}),this.controls.appendChild(this.addproperty_button),this.controls.insertBefore(this.addproperty_holder,this.controls.childNodes[1]),this.refreshAddProperties(),this.deactivateNonRequiredProperties()}}this.options.table_row?(this.editor_holder=this.container,this.property_order.forEach(t=>{this.editor_holder.appendChild(this.editors[t].container)})):(this.layoutEditors(),this.layoutEditors()),(this.schema.readOnly||this.schema.readonly)&&this.disable()}deactivateNonRequiredProperties(){const e=this.jsoneditor.options.show_opt_in,t=typeof this.options.show_opt_in<"u",r=t&&this.options.show_opt_in===!0,n=t&&this.options.show_opt_in===!1;(r||!n&&e||!t&&e)&&Object.entries(this.editors).forEach(([s,o])=>{this.isRequiredObject(o)||this.editors[s].deactivate()})}showEditJSON(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=`${this.editjson_control.offsetLeft}px`,this.editjson_holder.style.top=`${this.editjson_control.offsetTop+this.editjson_control.offsetHeight}px`,this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_control.disabled=!1,this.editing_json=!0)}hideEditJSON(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)}copyJSON(){this.editjson_holder&&navigator.clipboard.writeText(this.editjson_textarea.value).catch(e=>window.alert(e))}saveJSON(){if(this.editjson_holder)try{const e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON(),this.onChange(!0)}catch(e){throw window.alert("invalid JSON"),e}}toggleEditJSON(){this.editing_json?this.hideEditJSON():this.showEditJSON()}insertPropertyControlUsingPropertyOrder(e,t,r){let n;this.schema.properties[e]&&(n=this.schema.properties[e].propertyOrder),typeof n!="number"&&(n=1e3),t.propertyOrder=n;for(let s=0;s<r.childNodes.length;s++){const o=r.childNodes[s];if(t.propertyOrder<o.propertyOrder){this.addproperty_list.insertBefore(t,o),t=null;break}}t&&this.addproperty_list.appendChild(t)}addPropertyCheckbox(e){let t;const r=this.theme.getCheckbox();this.schema.properties[e]&&this.schema.properties[e].title?t=this.schema.properties[e].title:t=e;const n=this.theme.getCheckboxLabel(t),s=this.theme.getFormControl(n,r,null,null,this.path+"-"+e);return s.style.paddingBottom=s.style.marginBottom=s.style.paddingTop=s.style.marginTop=0,s.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,s,this.addproperty_list),r.checked=e in this.editors,r.addEventListener("change",()=>{r.checked?this.addObjectProperty(e):this.removeObjectProperty(e),this.onChange(!0)}),this.addproperty_checkboxes[e]=r,r}showAddProperty(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=`${this.addproperty_button.offsetLeft}px`,this.addproperty_holder.style.top=`${this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight}px`,this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())}hideAddProperty(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)}toggleAddProperty(){this.adding_property?this.hideAddProperty():this.showAddProperty()}removeObjectProperty(e){var t,r;if(this.editors[e]){if((r=(t=this.editors[e].schema)==null?void 0:t.options)!=null&&r.dependencies)return;this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors()}}getSchemaOnMaxDepth(e){return Object.keys(e).reduce((t,r)=>{switch(r){case"$ref":return t;case"properties":case"items":return{...t,[r]:{}};case"additionalProperties":case"propertyNames":return{...t,[r]:!0};default:return{...t,[r]:e[r]}}},{})}addObjectProperty(e,t){if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!this.canHaveAdditionalProperties()&&(!this.schema.properties||!this.schema.properties[e])&&(!this.schema.patternProperties||!Object.keys(this.schema.patternProperties).find(o=>new RegExp(o).test(e))))return;const r=this.getPropertySchema(e);typeof r.propertyOrder!="number"&&(r.propertyOrder=Object.keys(this.editors).length+1e3);const n=this.jsoneditor.getEditorClass(r),{max_depth:s}=this.jsoneditor.options;if(this.editors[e]=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:s&&this.currentDepth>=s?this.getSchemaOnMaxDepth(r):r,path:`${this.path}.${e}`,parent:this},this.currentDepth+1),this.editors[e].preBuild(),!t){const o=this.theme.getChildEditorHolder();this.editor_holder.appendChild(o),this.editors[e].setContainer(o),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].setOptInCheckbox(n.header),this.editors[e].activate()}this.cached_editors[e]=this.editors[e]}t||(this.refreshValue(),this.layoutEditors())}}onOutsideModalClick(e){const t=e.path||e.composedPath&&e.composedPath();this.addproperty_holder&&!this.addproperty_holder.contains(t[0])&&this.adding_property&&(e.preventDefault(),e.stopPropagation(),this.toggleAddProperty())}onChildEditorChange(e,t){this.refreshValue(),super.onChildEditorChange(e,t)}canHaveAdditionalProperties(){return typeof this.schema.additionalProperties=="boolean"?this.schema.additionalProperties:typeof this.schema.additionalProperties=="object"&&this.schema.additionalProperties!==null?!0:typeof this.options.no_additional_properties=="boolean"?!this.options.no_additional_properties:typeof this.jsoneditor.options.no_additional_properties=="boolean"?!this.jsoneditor.options.no_additional_properties:!0}destroy(){Object.values(this.cached_editors).forEach(e=>e.destroy()),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,document.removeEventListener("click",this.onOutsideModalClickListener,!0),super.destroy()}getValue(){if(!this.dependenciesFulfilled)return;const e=super.getValue(),t=r=>typeof r>"u"||r===""||r===Object(r)&&Object.keys(r).length===0&&r.constructor===Object;return e&&(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)&&Object.keys(e).forEach(r=>{t(e[r])&&delete e[r]}),e&&(this.jsoneditor.options.remove_false_properties||this.options.remove_false_properties)&&Object.keys(e).forEach(r=>{e[r]===!1&&delete e[r]}),e}refreshValue(){this.value={},this.editors&&(Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&(this.editors[e].refreshValue(),this.value[e]=this.editors[e].getValue())}),Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&this.activateDependentRequired(this.editors[e].key)}),this.adding_property&&this.refreshAddProperties())}activateDependentRequired(e){this.getDependentRequired(e).forEach(r=>{let n;Object.entries(this.cached_editors).forEach(([s,o])=>{o.key===r&&(n=o)}),n&&!n.isActive()&&n.activate()})}getDependentRequired(e){return this.schema.dependentRequired&&Rl(this.schema.dependentRequired,e)?this.schema.dependentRequired[e]:[]}refreshAddProperties(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties){this.addproperty_button.style.display="none";return}let e=!1,t=0,r=!1;Object.keys(this.editors).forEach(n=>t++),e=this.canHaveAdditionalProperties()&&!(typeof this.schema.maxProperties<"u"&&t>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={},Object.keys(this.cached_editors).forEach(n=>{this.addPropertyCheckbox(n),this.isRequiredObject(this.cached_editors[n])&&n in this.editors&&(this.addproperty_checkboxes[n].disabled=!0),typeof this.schema.minProperties<"u"&&t<=this.schema.minProperties?(this.addproperty_checkboxes[n].disabled=this.addproperty_checkboxes[n].checked,this.addproperty_checkboxes[n].checked||(r=!0)):n in this.editors?r=!0:!e&&!Rl(this.schema.properties,n)?this.addproperty_checkboxes[n].disabled=!0:(this.addproperty_checkboxes[n].disabled=!1,r=!0)}),this.canHaveAdditionalProperties()&&(r=!0),Object.keys(this.schema.properties).forEach(n=>{this.cached_editors[n]||(r=!0,this.addPropertyCheckbox(n))}),r?this.canHaveAdditionalProperties()?e?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_button.style.display="none")}isRequiredObject(e){if(e)return typeof e.schema.required=="boolean"?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.includes(e.key):!!this.jsoneditor.options.required_by_default}setValue(e,t){e=e||{},(typeof e!="object"||Array.isArray(e))&&(e={}),Object.entries(this.cached_editors).forEach(([r,n])=>{typeof e[r]<"u"?(this.addObjectProperty(r),n.setValue(e[r],t),n.activate(),this.disabled&&n.disable()):!t&&!this.isRequiredObject(n)?this.jsoneditor.options.show_opt_in||this.options.show_opt_in?n.deactivate():this.removeObjectProperty(r):n.setValue(n.getDefault(),t)}),Object.entries(e).forEach(([r,n])=>{this.cached_editors[r]||(this.addObjectProperty(r),this.editors[r]&&this.editors[r].setValue(n,t,!!this.editors[r].template))}),this.refreshValue(),this.layoutEditors(),this.onChange()}showValidationErrors(e){const t=[],r=[];e.forEach(n=>{n.path===this.path?t.push(n):r.push(n)}),this.error_holder&&(t.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",t.forEach(n=>{n.errorcount&&n.errorcount>1&&(n.message+=` (${n.errorcount} errors)`),this.error_holder.appendChild(this.theme.getErrorMessage(n.message))})):this.error_holder.style.display="none"),this.options.table_row&&(t.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),Object.values(this.editors).forEach(n=>{n.showValidationErrors(r)})}}d_e.rules=yqe;class vqe extends cw{preBuild(){super.preBuild()}build(){this.label="",this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.radioContainer=document.createElement("div"),this.radioGroup=[];const e=r=>{this.setValue(r.currentTarget.value),this.onChange(!0),this.radioGroup.forEach(n=>{n.checked=n.value===this.getValue()})};for(let r=0;r<this.enum_values.length;r++){const n={id:`${this.formname}[${r}]`,value:this.enum_values[r]};this.jsoneditor.options.use_name_attributes&&(n.name=this.formname),this.input=this.theme.getFormRadio(n),this.setInputAttributes(["id","value","name"]),this.input.addEventListener("change",e,!1),this.radioGroup.push(this.input);const s=this.theme.getFormRadioLabel(this.enum_display[r]);s.htmlFor=this.input.id;const o=this.theme.getFormRadioControl(s,this.input,!!(this.options.layout==="horizontal"||this.options.compact));this.radioContainer.appendChild(o)}if(this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.radioContainer.classList.add("readonly")}const t=this.theme.getContainer();t.appendChild(this.radioContainer),t.dataset.containerFor="radio",this.input=t,this.control=this.theme.getFormControl(this.label,t,this.description,this.infoButton),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.radioContainer.classList.remove("readonly"),super.enable()}}disable(e){e&&(this.always_disabled=!0);for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.radioContainer.classList.add("readonly"),super.disable()}destroy(){this.radioContainer.parentNode&&this.radioContainer.parentNode.parentNode&&this.radioContainer.parentNode.parentNode.removeChild(this.radioContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}setValue(e){typeof e!="string"&&(e=String(e));for(let t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value===e){this.radioGroup[t].checked=!0;break}else this.radioGroup[t].checked=!1;this.value=e,this.onChange()}}class bqe extends Bl{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.sceditor_instance&&this.sceditor_instance.val(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){if(window.sceditor){const e=this.expandCallbacks("sceditor",ki({},{format:this.input_type,emoticonsEnabled:!1,width:"100%",height:300,readOnly:this.schema.readOnly||this.schema.readonly||this.schema.template},this.defaults.options.sceditor||{},this.options.sceditor||{},{element:this.input})),t=window.sceditor.instance(this.input);t===void 0&&window.sceditor.create(this.input,e),this.sceditor_instance=t||window.sceditor.instance(this.input),this.sceditor_instance.blur(()=>{this.value=this.sceditor_instance.val(),this.sceditor_instance.updateOriginal(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.sceditor_instance&&this.sceditor_instance.readOnly(!1),super.enable()}disable(e){this.sceditor_instance&&this.sceditor_instance.readOnly(!0),super.disable(e)}destroy(){this.sceditor_instance&&(this.sceditor_instance.destroy(),this.sceditor_instance=null),super.destroy()}}class _qe extends cw{setValue(e,t){if(this.select2_instance){t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(e);this.input.value=r,this.select2v4?this.select2_instance.val(r).trigger("change"):this.select2_instance.select2("val",r),this.onChange(!0)}else super.setValue(e,t)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance){const e=this.expandCallbacks("select2",ki({},this.defaults.options.select2||{},this.options.select2||{}));this.newEnumAllowed=e.tags=!!e.tags&&this.schema.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=Rl(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const t=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(t),this.onChange(!0)},this.select2_instance.on("change",this.selectChangeHandler),this.select2_instance.on("select2-blur",this.selectChangeHandler)}super.afterInputReady()}updateValue(e){let t=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?t=e:this.newEnumAllowed&&(t=this.addNewOption(e)?e:t),this.value=t,t}addNewOption(e){const t=this.typecast(e);let r=!1,n;return!this.enum_values.includes(t)&&t!==""&&(this.enum_options.push(`${t}`),this.enum_display.push(`${t}`),this.enum_values.push(t),this.schema.enum.push(t),n=this.input.querySelector(`option[value="${t}"]`),n?n.removeAttribute("data-select2-tag"):this.select2_instance.append(new Option(t,t,!1,!1)).trigger("change"),r=!0),r}enable(){this.always_disabled||this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable(e)}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class xqe extends cw{setValue(e,t){if(this.selectize_instance){t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(e);this.input.value=r,this.selectize_instance.clear(!0),this.selectize_instance.setValue(r),this.onChange(!0)}else super.setValue(e,t)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){const e=this.expandCallbacks("selectize",ki({},this.defaults.options.selectize||{},this.options.selectize||{}));this.newEnumAllowed=e.create=!!e.create&&this.schema.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=t=>{this.updateValue(t),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler)}super.afterInputReady()}updateValue(e){let t=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?t=e:this.newEnumAllowed&&(t=this.addNewOption(e)?e:t),this.value=t,t}addNewOption(e){const t=this.typecast(e);let r=!1;return!this.enum_values.includes(t)&&t!==""&&(this.enum_options.push(`${t}`),this.enum_display.push(`${t}`),this.enum_values.push(t),this.schema.enum.push(t),this.selectize_instance.addItem(t),this.selectize_instance.refreshOptions(!1),r=!0),r}onWatchedFieldChange(){super.onWatchedFieldChange(),this.selectize_instance&&(this.selectize_instance.clear(!0),this.selectize_instance.clearOptions(!0),this.enum_options.forEach((e,t)=>{this.selectize_instance.addOption({value:e,text:this.enum_display[t]})}),this.selectize_instance.addItem(`${this.value}`,!0))}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class wqe extends Bl{build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)));const e=this.formname.replace(/\W/g,"");if(typeof SignaturePad=="function"){this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input);const t=document.createElement("div");t.classList.add("signature-container");const r=document.createElement("canvas");this.jsoneditor.options.use_name_attributes&&r.setAttribute("name",e),r.classList.add("signature"),t.appendChild(r),this.signaturePad=new window.SignaturePad(r),this.signaturePad.onEnd=()=>{this.signaturePad.isEmpty()?this.input.value="":this.input.value=this.signaturePad.toDataURL(),this.is_dirty=!0,this.refreshValue(),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()};const n=document.createElement("div"),s=document.createElement("button");s.classList.add("tiny","button"),s.innerHTML="Clear signature",n.appendChild(s),t.appendChild(n),this.options.compact&&this.container.setAttribute("class",`${this.container.getAttribute("class")} compact`),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),Array.from(this.inputs).forEach(o=>{r.setAttribute("readOnly","readOnly"),o.disabled=!0})),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),this.signaturePad.clear(),this.signaturePad.strokeEnd()}),this.control=this.theme.getFormControl(this.label,t,this.description),this.container.appendChild(this.control),this.refreshValue(),r.width=t.offsetWidth,this.options&&this.options.canvas_height?r.height=this.options.canvas_height:r.height="300"}else{const t=document.createElement("p");t.innerHTML="Signature pad is not available, please include SignaturePad from https://github.com/szimek/signature_pad",this.container.appendChild(t)}}setValue(e){if(typeof SignaturePad=="function"){const t=this.sanitize(e);return this.value===t?void 0:(this.value=t,this.input.value=this.value,this.signaturePad.clear(),e&&e!==""&&this.signaturePad.fromDataURL(e),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),!1)}}destroy(){this.signaturePad.off(),delete this.signaturePad}}class f_e extends Bl{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.simplemde_instance&&this.simplemde_instance.value(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.SimpleMDE?(e=this.expandCallbacks("simplemde",ki({},{height:300},this.defaults.options.simplemde||{},this.options.simplemde||{},{element:this.input,forceSync:!0})),this.simplemde_instance=new window.SimpleMDE(e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.simplemde_instance.codemirror.options.readOnly=!0),this.simplemde_instance.codemirror.on("change",()=>{this.value=this.simplemde_instance.value(),this.is_dirty=!0,this.onChange(!0)}),e.autorefresh&&this.startListening(this.simplemde_instance.codemirror,this.simplemde_instance.codemirror.state.autoRefresh={delay:250}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!1),super.enable()}disable(e){this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!0),super.disable(e)}destroy(){this.simplemde_instance&&(this.simplemde_instance.toTextArea(),this.simplemde_instance=null),super.destroy()}startListening(e,t){function r(){e.display.wrapper.offsetHeight?(this.stopListening(e,t),e.display.lastWrapHeight!==e.display.wrapper.clientHeight&&e.refresh()):t.timeout=window.setTimeout(r,t.delay)}t.timeout=window.setTimeout(r,t.delay),t.hurry=()=>{window.clearTimeout(t.timeout),t.timeout=window.setTimeout(r,50)},e.on(window,"mouseup",t.hurry),e.on(window,"keyup",t.hurry)}stopListening(e,t){window.clearTimeout(t.timeout),e.off(window,"mouseup",t.hurry),e.off(window,"keyup",t.hurry)}}const Eqe={".starrating":"direction:rtl;display:inline-block;white-space:nowrap",".starrating > input":"display:none",".starrating > label:before":"content:'%5C2606';margin:1px;font-size:18px;font-style:normal;font-weight:400;line-height:1;font-family:'Arial';display:inline-block",".starrating > label":"color:%23888;cursor:pointer;margin:8px%200%202px%200",".starrating > label.starrating-display-enabled":"margin:1px%200%200%200",".starrating > input:checked ~ label":"color:%23ffca08",".starrating:not(.readonly) > input:hover ~ label":"color:%23ffca08",".starrating > input:checked ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating:not(.readonly) > input:hover ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating .starrating-display":"position:relative;direction:rtl;text-align:center;font-size:10px;line-height:0px"};class p_e extends Bl{build(){if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.ratingContainer=document.createElement("div"),this.ratingContainer.classList.add("starrating"),this.schema.enum===void 0){let r=this.schema.maximum?this.schema.maximum:5;this.schema.exclusiveMaximum&&r--,this.enum_values=[];for(let n=0;n<r;n++)this.enum_values.push(n+1)}else this.enum_values=this.schema.enum;this.radioGroup=[];const e=r=>{r.preventDefault(),r.stopPropagation(),this.setValue(r.currentTarget.value),this.onChange(!0)};for(let r=this.enum_values.length-1;r>-1;r--){const n=this.formname+(r+1),s=this.theme.getFormInputField("radio");s.name=`${this.formname}[starrating]`,s.value=this.enum_values[r],s.id=n,s.addEventListener("change",e,!1),this.radioGroup.push(s);const o=document.createElement("label");o.htmlFor=n,o.title=this.enum_values[r],this.options.displayValue&&o.classList.add("starrating-display-enabled");const a=this.theme.getHiddenText("label");a.textContent=r,o.appendChild(a),this.ratingContainer.appendChild(s),this.ratingContainer.appendChild(o)}if(this.options.displayValue&&(this.displayRating=document.createElement("div"),this.displayRating.classList.add("starrating-display"),this.displayRating.innerText=this.enum_values[0],this.ratingContainer.appendChild(this.displayRating)),this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.ratingContainer.classList.add("readonly")}const t=this.theme.getContainer();t.appendChild(this.ratingContainer),this.input=t,this.control=this.theme.getFormControl(this.label,t,this.description,this.infoButton),this.container.appendChild(this.control),this.refreshValue()}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.ratingContainer.classList.remove("readonly"),this.disabled=!1}}disable(e){e&&(this.always_disabled=!0);for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.ratingContainer.classList.add("readonly"),this.disabled=!0}destroy(){this.ratingContainer.parentNode&&this.ratingContainer.parentNode.parentNode&&this.ratingContainer.parentNode.parentNode.removeChild(this.ratingContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)return this.schema.type==="integer"?this.value===""?0:parseInt(this.value):this.value}setValue(e){this.value=e;for(let t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value===`${e}`){this.radioGroup[t].checked=!0,this.value=e,this.options.displayValue&&(this.displayRating.innerHTML=this.value);break}super.setValue(this.value)}}p_e.rules=Eqe;class Sqe extends c_e{build(){super.build(),this.input.setAttribute("type","number"),this.input.getAttribute("step")||this.input.setAttribute("step","1");const e=this.theme.getStepperButtons(this.input);this.control.appendChild(e),this.stepperDown=this.control.querySelector(".stepper-down"),this.stepperUp=this.control.querySelector(".stepper-up")}enable(){super.enable(),this.stepperDown.removeAttribute("disabled"),this.stepperUp.removeAttribute("disabled")}disable(){super.disable(),this.stepperDown.setAttribute("disabled",!0),this.stepperUp.setAttribute("disabled",!0)}}class Cqe extends fI{register(){if(super.register(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].register()}unregister(){if(super.unregister(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].unregister()}getNumColumns(){return Math.max(Math.min(12,this.width),3)}preBuild(){const e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e.default||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top,super.preBuild()}build(){this.tableContainer=this.theme.getTableContainer(),this.table=this.theme.getTable(),this.tableContainer.appendChild(this.table),this.container.appendChild(this.tableContainer),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);const e=this.getElementEditor(0,!0);if(this.item_default=e.getDefault(),this.width=e.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.tableContainer),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls),this.item_has_child_editors){const t=e.getChildEditors(),r=e.property_order||Object.keys(t);for(let n=0;n<r.length;n++){const s=this.theme.getTableHeaderCell(t[r[n]].getTitle());t[r[n]].options.hidden&&(s.style.display="none"),this.header_row.appendChild(s)}}else this.header_row.appendChild(this.theme.getTableHeaderCell(this.item_title));e.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=this.theme.getTableHeaderCell(this.translate("table_controls")),this.controls_header_cell.setAttribute("aria-hidden","true"),this.controls_header_cell.style.visibility="hidden",this.header_row.appendChild(this.controls_header_cell),this.addControls()}onChildEditorChange(e,t){this.refreshValue(),super.onChildEditorChange(e,t)}getItemDefault(){return ki({},{default:this.item_default}).default}getItemTitle(){return this.item_title}getElementEditor(e,t){const r=ki({},this.schema.items),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),s=this.row_holder.appendChild(this.theme.getTableRow());let o=s;this.item_has_child_editors||(o=this.theme.getTableCell(),s.appendChild(o));const a=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:o,path:`${this.path}.${e}`,parent:this,compact:!0,table_row:!0});return a.preBuild(),t||(a.build(),a.postBuild(),a.controls_cell=s.appendChild(this.theme.getTableCell()),a.row=s,a.table_controls=this.theme.getButtonHolder(),a.controls_cell.appendChild(a.table_controls),a.table_controls.style.margin=0,a.table_controls.style.padding=0),a}destroy(){this.innerHTML="",this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.table)&&this.table.parentNode.removeChild(this.table),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,super.destroy()}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());return this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems)),e}setValue(e=[],t){if(e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized)return;let n=!1;e.forEach((s,o)=>{this.rows[o]?this.rows[o].setValue(s):(this.addRow(s),n=!0)});for(let s=e.length;s<this.rows.length;s++){const o=this.rows[s].container;this.item_has_child_editors||this.rows[s].row.parentNode.removeChild(this.rows[s].row),this.rows[s].destroy(),o.parentNode&&o.parentNode.removeChild(o),this.rows[s]=null,n=!0}this.rows=this.rows.slice(0,e.length),this.refreshValue(),(n||t)&&this.refreshRowButtons(),this.onChange()}refreshRowButtons(){const e=this.schema.minItems&&this.schema.minItems>=this.rows.length,t=this.schema.maxItems&&this.schema.maxItems<=this.rows.length,r=[];this.rows.forEach((u,c)=>{if(u.delete_button){const h=!e;this.setButtonState(u.delete_button,h),r.push(h)}if(u.copy_button){const h=!t;this.setButtonState(u.copy_button,h),r.push(h)}if(u.moveup_button){const h=c!==0;this.setButtonState(u.moveup_button,h),r.push(h)}if(u.movedown_button){const h=c!==this.rows.length-1;this.setButtonState(u.movedown_button,h),r.push(h)}});const n=r.some(u=>u);this.rows.forEach(u=>this.setButtonState(u.controls_cell,n)),this.setButtonState(this.controls_header_cell,n),this.setButtonState(this.table,this.value.length);const s=!(t||this.hide_add_button);this.setButtonState(this.add_row_button,s);const o=!(!this.value.length||e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,o);const a=!(this.value.length<=1||e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,a);const l=s||o||a;this.setButtonState(this.controls,l)}refreshValue(){this.value=[],this.rows.forEach((e,t)=>{this.value[t]=e.getValue()}),this.serialized=JSON.stringify(this.value)}addRow(e){const t=this.rows.length;this.rows[t]=this.getElementEditor(t);const r=this.rows[t].table_controls;return this.hide_delete_buttons||(this.rows[t].delete_button=this._createDeleteButton(t,r)),this.show_copy_button&&(this.rows[t].copy_button=this._createCopyButton(t,r)),this.hide_move_buttons||(this.rows[t].moveup_button=this._createMoveUpButton(t,r)),this.hide_move_buttons||(this.rows[t].movedown_button=this._createMoveDownButton(t,r)),typeof e<"u"&&this.rows[t].setValue(e),this.rows[t]}_createDeleteButton(e,t){const r=this.getButton("","delete","button_delete_row_title_short");return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue(),l=this.getValue()[s];o.splice(s,1),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("deleteRow",l)}),t.appendChild(r),r}_createCopyButton(e,t){const r=this.getButton("","copy","button_copy_row_title_short"),n=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",e),r.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const o=s.currentTarget.getAttribute("data-i")*1,a=this.getValue();let l=a[o];n.items.type==="string"&&n.items.format==="uuid"?l=ox():n.items.type==="object"&&n.items.properties&&a.forEach((u,c)=>{if(o===c)for(const h of Object.keys(u))n.items.properties&&n.items.properties[h]&&n.items.properties[h].format==="uuid"&&(l=Object.assign({},a[o]),l[h]=ox())}),a.splice(o+1,0,l),this.setValue(a),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[o+1])}),t.appendChild(r),r}_createMoveUpButton(e,t){const r=this.getButton("","moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s-1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),t.appendChild(r),r}_createMoveDownButton(e,t){const r=this.getButton("","movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s+1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),t.appendChild(r),r}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.title_controls&&(this.title.insertBefore(this.toggle_button,this.title.childNodes[0]),this.toggle_button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.setButtonState(this.panel,this.collapsed),this.collapsed?(this.collapsed=!1,this.setButtonText(e.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.setButtonText(e.currentTarget,"","expand","button_expand"))}),this.options.collapsed&&Uu(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton()}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");return e.classList.add("json-editor-btntype-toggle"),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const r=this.addRow();this.refreshValue(),this.refreshRowButtons(),this.onChange(!0),this.jsoneditor.trigger("addRow",r)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue(),n=r.pop();this.setValue(r),this.onChange(!0),this.jsoneditor.trigger("deleteRow",n)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(e),e}}class Tqe extends fa{getNumColumns(){return 4}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.hidden&&(this.container.style.display="none"),this.options=this.expandCallbacks("upload",ki({},{title:"Browse",icon:"",auto_upload:!1,hide_input:!1,enable_drag_drop:!1,drop_zone_text:"Drag & Drop file here",drop_zone_top:!1,alt_drop_zone:"",mime_type:"",max_upload_size:0,upload_handler:(r,n,s,o)=>{window.alert(`No upload_handler defined for "${r.path}". You must create your own handler to enable upload to server`)}},this.defaults.options.upload||{},this.options.upload||{})),this.options.mime_type=this.options.mime_type?[].concat(this.options.mime_type):[],this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(typeof this.options.upload_handler!="function")throw new Error("Upload handler required for upload editor");if(this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.options.mime_type.length&&this.uploader.setAttribute("accept",this.options.mime_type),this.options.enable_drag_drop===!0&&this.options.hide_input===!0||(this.clickHandler=r=>{this.uploader.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},this.browseButton=this.getButton(this.options.title,this.options.icon,this.options.title),this.browseButton.addEventListener("click",this.clickHandler),this.fileDisplay=this.theme.getFormInputField("input"),this.fileDisplay.setAttribute("readonly",!0),this.fileDisplay.value="No file selected.",this.fileDisplay.addEventListener("dblclick",this.clickHandler),this.fileUploadGroup=this.theme.getInputGroup(this.fileDisplay,[this.browseButton]),this.fileUploadGroup||(this.fileUploadGroup=document.createElement("div"),this.fileUploadGroup.appendChild(this.fileDisplay),this.fileUploadGroup.appendChild(this.browseButton))),this.options.enable_drag_drop===!0){if(this.options.alt_drop_zone!=="")if(this.altDropZone=document.querySelector(this.options.alt_drop_zone),this.altDropZone)this.dropZone=this.altDropZone;else throw new Error(`Error: alt_drop_zone selector "${this.options.alt_drop_zone}" not found!`);else this.dropZone=this.theme.getDropZone(this.options.drop_zone_text);this.dropZone&&(this.dropZone.classList.add("upload-dropzone"),this.dropZone.addEventListener("dblclick",this.clickHandler))}this.uploadHandler=r=>{r.preventDefault(),r.stopPropagation();const n=r.target.files||r.dataTransfer.files;if(n&&n.length)if(this.options.max_upload_size!==0&&n[0].size>this.options.max_upload_size)this.theme.addInputError(this.uploader,`${this.translate("upload_max_size")} ${this.options.max_upload_size}`);else if(this.options.mime_type.length!==0&&!this.isValidMimeType(n[0].type,this.options.mime_type))this.theme.addInputError(this.uploader,`${this.translate("upload_wrong_file_format")} ${this.options.mime_type.toString()}`);else{this.fileDisplay&&(this.fileDisplay.value=n[0].name);let s=new window.FileReader;s.onload=o=>{this.preview_value=o.target.result,this.refreshPreview(n),this.onChange(!0),s=null},s.readAsDataURL(n[0])}},this.uploader.addEventListener("change",this.uploadHandler),this.dragHandler=r=>{const n=r.dataTransfer.items||r.dataTransfer.files,s=n&&n.length&&(this.options.mime_type.length===0||this.isValidMimeType(n[0].type,this.options.mime_type)),o=r.currentTarget.classList&&r.currentTarget.classList.contains("upload-dropzone")&&s;switch((r.currentTarget===window?"w_":"e_")+r.type){case"w_drop":case"w_dragover":o||(r.dataTransfer.dropEffect="none");break;case"e_dragenter":{o?(this.dropZone.classList.add("valid-dropzone"),r.dataTransfer.dropEffect="copy"):this.dropZone.classList.add("invalid-dropzone");break}case"e_dragover":{o&&(r.dataTransfer.dropEffect="copy");break}case"e_dragleave":this.dropZone.classList.remove("valid-dropzone","invalid-dropzone");break;case"e_drop":{this.dropZone.classList.remove("valid-dropzone","invalid-dropzone"),o&&this.uploadHandler(r);break}}o||r.preventDefault()},this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(r=>{window.addEventListener(r,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(r=>{this.dropZone.addEventListener(r,this.dragHandler,!0)}))}this.preview=document.createElement("div"),this.control=this.input.controlgroup=this.theme.getFormControl(this.label,this.uploader||this.input,this.description,this.infoButton),this.uploader&&(this.uploader.controlgroup=this.control);const e=this.uploader||this.input,t=document.createElement("div");this.dropZone&&!this.altDropZone&&this.options.drop_zone_top===!0&&t.appendChild(this.dropZone),this.fileUploadGroup&&t.appendChild(this.fileUploadGroup),this.dropZone&&!this.altDropZone&&this.options.drop_zone_top!==!0&&t.appendChild(this.dropZone),t.appendChild(this.preview),e.parentNode.insertBefore(t,e.nextSibling),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.afterInputReady()})}afterInputReady(){if(this.value){const e=document.createElement("img");e.style.maxWidth="100%",e.style.maxHeight="100px",e.onload=t=>{this.preview.appendChild(e)},e.onerror=t=>{console.error("upload error",t,t.currentTarget)},e.src=this.container.querySelector("a").href}this.theme.afterInputReady(this.input)}refreshPreview(e){if(this.last_preview===this.preview_value||(this.last_preview=this.preview_value,this.preview.innerHTML="",!this.preview_value))return;const t=e[0],r=this.preview_value.match(/^data:([^;,]+)[;,]/);if(t.mimeType=r?r[1]:"unknown",t.size>0){const s=Math.floor(Math.log(t.size)/Math.log(1024));t.formattedSize=`${parseFloat((t.size/1024**s).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`}else t.formattedSize="0 Bytes";const n=this.getButton("button_upload","upload","button_upload");n.addEventListener("click",s=>{s.preventDefault(),n.setAttribute("disabled","disabled"),this.theme.removeInputError(this.uploader),this.theme.getProgressBar&&(this.progressBar=this.theme.getProgressBar(),this.preview.appendChild(this.progressBar)),this.options.upload_handler(this.path,t,{success:o=>{this.setValue(o),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.progressBar&&this.preview.removeChild(this.progressBar),n.removeAttribute("disabled")},failure:o=>{this.theme.addInputError(this.uploader,o),this.progressBar&&this.preview.removeChild(this.progressBar),n.removeAttribute("disabled")},updateProgress:o=>{this.progressBar&&(o?this.theme.updateProgressBar(this.progressBar,o):this.theme.updateProgressBarUnknown(this.progressBar))}})}),this.preview.appendChild(this.theme.getUploadPreview(t,n,this.preview_value)),this.options.auto_upload&&(n.dispatchEvent(new window.MouseEvent("click")),n.parentNode.removeChild(n))}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())}destroy(){this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(e=>{window.removeEventListener(e,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(e=>{this.dropZone.removeEventListener(e,this.dragHandler,!0)}),this.dropZone.removeEventListener("dblclick",this.clickHandler),this.dropZone&&this.dropZone.parentNode&&this.dropZone.parentNode.removeChild(this.dropZone)),this.uploader&&this.uploader.parentNode&&(this.uploader.removeEventListener("change",this.uploadHandler),this.uploader.parentNode.removeChild(this.uploader)),this.browseButton&&this.browseButton.parentNode&&(this.browseButton.removeEventListener("click",this.clickHandler),this.browseButton.parentNode.removeChild(this.browseButton)),this.fileDisplay&&this.fileDisplay.parentNode&&(this.fileDisplay.removeEventListener("dblclick",this.clickHandler),this.fileDisplay.parentNode.removeChild(this.fileDisplay)),this.fileUploadGroup&&this.fileUploadGroup.parentNode&&this.fileUploadGroup.parentNode.removeChild(this.fileUploadGroup),this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.header&&this.header.parentNode&&this.header.parentNode.removeChild(this.header),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}isValidMimeType(e,t){return t.reduce((r,n)=>r||new RegExp(n.replace(/\*/g,".*"),"gi").test(e),!1)}}class Aqe extends Bl{preBuild(){super.preBuild(),this.schema.default=this.uuid=this.getUuid(),this.schema.options||(this.schema.options={}),this.schema.options.cleave||(this.schema.options.cleave={delimiters:["-"],blocks:[8,4,4,4,12]})}build(){super.build(),this.disable(!0),this.input.setAttribute("readonly","true")}sanitize(e){return this.testUuid(e)||(e=this.uuid),e}setValue(e,t,r){this.testUuid(e)||(e=this.uuid),this.uuid=e,super.setValue(e,t,r)}getUuid(){return ox()}testUuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class kqe extends Bl{postBuild(){window.Picker&&(this.input.type="text"),this.input.style.padding="3px"}setValue(e,t,r){const n=super.setValue(e,t,r);return this.picker_instance&&this.picker_instance.domElement&&n&&n.changed&&this.picker_instance.setColor(n.value,!0),n}getNumColumns(){return 2}afterInputReady(){super.afterInputReady(),this.createPicker(!0)}disable(){if(super.disable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="none";const e=this.picker_instance.domElement.querySelectorAll("button");for(let t=0;t<e.length;t++)e[t].disabled=!0}}enable(){if(super.enable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="auto";const e=this.picker_instance.domElement.querySelectorAll("button");for(let t=0;t<e.length;t++)e[t].disabled=!1}}destroy(){this.createPicker(!1),super.destroy()}createPicker(e){if(e){if(window.Picker&&!this.picker_instance){const t=this.expandCallbacks("colorpicker",ki({},{editor:!1,alpha:!1,color:this.value,popup:"bottom"},this.defaults.options.colorpicker||{},this.options.colorpicker||{},{parent:this.container})),r=n=>{const s=this.picker_instance.settings.editorFormat,o=this.picker_instance.settings.alpha;this.setValue(s==="hex"?o?n.hex:n.hex.slice(0,7):n[`${s+(o?"a":"")}String`])};!t.popup&&typeof t.onChange!="function"?t.onChange=r:t.popup&&typeof t.onDone!="function"&&(t.onDone=r),this.picker_instance=new window.Picker(t),t.popup||(this.input.style.display="none",this.theme.afterInputReady(this.picker_instance.domElement))}}else this.picker_instance&&(this.picker_instance.destroy(),this.picker_instance=null,this.input.style.display="")}}const QS={ace:XGe,array:fI,arrayChoices:KGe,arraySelect2:JGe,arraySelectize:QGe,autocomplete:eqe,base64:tqe,button:a_e,checkbox:iqe,choices:l_e,datetime:nqe,describedBy:sqe,enum:oqe,hidden:aqe,info:lqe,integer:c_e,ip:uqe,jodit:cqe,multiple:mqe,multiselect:YT,null:gqe,number:u_e,object:d_e,radio:vqe,sceditor:bqe,select:cw,select2:_qe,selectize:xqe,signature:wqe,simplemde:f_e,starrating:p_e,stepper:Sqe,string:Bl,table:Cqe,upload:Tqe,uuid:Aqe,colorpicker:kqe},Dqe="html",Mqe="default",Lqe={},Rqe={},Iqe={},Oqe={},m_e={},Pqe=[],pI="en",Fqe=pI;m_e.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_const:"Value must be the constant value",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_contains:"No items match contains",error_minContains:"Contains match count {{0}} is less than minimum contains count of {{1}}",error_maxContains:"Contains match count {{0}} exceeds maximum contains count of {{1}}",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_property_names_exceeds_maxlength:"Property name {{0}} exceeds maxLength",error_property_names_enum_mismatch:"Property name {{0}} does not match any enum values",error_property_names_const_mismatch:"Property name {{0}} does not match the const value",error_property_names_pattern_mismatch:"Property name {{0}} does not match pattern",error_property_names_false:"Property name {{0}} fails when propertyName is false",error_property_names_maxlength:"Property name {{0}} cannot match invalid maxLength",error_property_names_enum:"Property name {{0}} cannot match invalid enum",error_property_names_pattern:"Property name {{0}} cannot match invalid pattern",error_property_names_unsupported:"Unsupported propertyName {{0}}",error_dependency:"Must have property {{0}}",error_date:"Date must be in the format {{0}}",error_time:"Time must be in the format {{0}}",error_datetime_local:"Datetime must be in the format {{0}}",error_invalid_epoch:"Date must be greater than 1 January 1970",error_ipv4:"Value must be a valid IPv4 address in the form of 4 numbers between 0 and 255, separated by dots",error_ipv6:"Value must be a valid IPv6 address",error_hostname:"The hostname has the wrong format",upload_max_size:"Filesize too large. Max size is ",upload_wrong_file_format:"Wrong file format. Allowed format(s): ",button_save:"Save",button_copy:"Copy",button_cancel:"Cancel",button_add:"Add",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_properties:"Properties",button_object_properties:"Object Properties",button_copy_row_title:"Copy {{0}}",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_copy_row_title_short:"Copy",button_collapse:"Collapse",button_expand:"Expand",button_edit_json:"Edit JSON",button_upload:"Upload",flatpickr_toggle_button:"Toggle",flatpickr_clear_button:"Clear",choices_placeholder_text:"Start typing to add value",default_array_item_title:"item",button_delete_node_warning:"Are you sure you want to remove this item?",table_controls:"Controls",paste_max_length_reached:"Pasted text exceeded maximum length of {{0}} and will be clipped."};Object.entries(QS).forEach(([i,e])=>{QS[i].options=e.options||{}});function Nqe(i,e,t){console.log("Upload handler required for upload editor")}function $qe(i,e,t){let r={};t&&t.options&&t.options.error_messages&&t.options.error_messages[hm.language]&&(r=t.options.error_messages[hm.language]);const n=hm.languages[hm.language];if(!n)throw new Error(`Unknown language ${hm.language}`);let s=r[i]||n[i]||hm.languages[pI][i]||i;if(e)for(let o=0;o<e.length;o++)s=s.replace(new RegExp(`\\{\\{${o}}}`,"g"),e[o]);return s}function Bqe(i,e){return i}const jqe={upload:Nqe,use_name_attributes:!0,prompt_before_delete:!0,use_default_values:!0,max_depth:0,button_state_mode:1,case_sensitive_property_search:!0,show_errors:"interaction",prompt_paste_max_length_reached:!1,remove_false_properties:!1,enforce_const:!1},hm={options:jqe,theme:Dqe,template:Mqe,themes:Rqe,callbacks:Lqe,templates:Iqe,iconlibs:Oqe,editors:QS,languages:m_e,resolvers:GGe,custom_validators:Pqe,default_language:pI,language:Fqe,translate:$qe,translateProperty:Bqe};class zqe{constructor(e){this.options=e||{},this.schema={},this.refs=this.options.refs||{},this.refs_with_info={},this.refs_prefix="#/counter/",this.refs_counter=1,this._subSchema1={type(t){typeof t.type=="object"&&(t.type=this._expandSubSchema(t.type))},disallow(t){typeof t.disallow=="object"&&(t.disallow=this._expandSubSchema(t.disallow))},anyOf(t){Object.entries(t.anyOf).forEach(([r,n])=>{t.anyOf[r]=this.expandSchema(n)})},dependencies(t){Object.entries(t.dependencies).forEach(([r,n])=>{typeof n=="object"&&!Array.isArray(n)&&(t.dependencies[r]=this.expandSchema(n))})},not(t){t.not=this.expandSchema(t.not)}},this._subSchema2={allOf(t,r){let n=ki({},r);return Object.entries(t.allOf).forEach(([s,o])=>{t.allOf[s]=this.expandRefs(o,!0),n=this.extendSchemas(n,this.expandSchema(o))}),delete n.allOf,n},extends(t,r){let n;return Array.isArray(t.extends)?n=t.extends.reduce((s,o,a)=>this.extendSchemas(s,this.expandSchema(o)),r):n=this.extendSchemas(r,this.expandSchema(t.extends)),delete n.extends,n},oneOf(t,r){const n=ki({},r);return delete n.oneOf,t.oneOf.reduce((s,o,a)=>(s.oneOf[a]=this.extendSchemas(this.expandSchema(o),n),s),r),r}}}async load(e,t,r){return this.schema=e,await this._asyncloadExternalRefs(e,t,this._getFileBase(r),!0),this.expandRefs(e)}expandRefs(e,t){const r=ki({},e);if(!r.$ref)return r;const n=r.$ref.split("#");if(n.length===2&&!this.refs_with_info[r.$ref]){const l=this.expandRecursivePointer(this.schema,n[1]),u=this.extendSchemas(r,this.expandSchema(l));return delete u.$ref,u}const s=n.length>2?this.refs_with_info["#"+n[1]]:this.refs_with_info[r.$ref];delete r.$ref;const o=s.$ref.startsWith("#")?s.fetchUrl:"",a=this._getRef(o,s);if(!this.refs[a])console.warn(`reference:'${a}' not found!`);else if(t&&Rl(this.refs[a],"allOf")){const l=this.refs[a].allOf;Object.keys(l).forEach(u=>{l[u]=this.expandRefs(l[u],!0)})}return n.length>2?this.extendSchemas(r,this.expandSchema(this.expandRecursivePointer(this.refs[a],n[2]))):this.extendSchemas(r,this.expandSchema(this.refs[a]))}expandRecursivePointer(e,t){let r=e;return t.split("/").slice(1).forEach(n=>{r[n]&&(r=r[n])}),r.$refs&&r.$refs.startsWith("#")?this.expandRecursivePointer(e,r.$refs):r}expandSchema(e){Object.entries(this._subSchema1).forEach(([r,n])=>{e[r]&&n.call(this,e)});let t=ki({},e);return Object.entries(this._subSchema2).forEach(([r,n])=>{e[r]&&(t=n.call(this,e,t))}),this.expandRefs(t)}_getRef(e,t){const r=e+t;return this.refs[r]?r:e+decodeURIComponent(t.$ref)}_expandSubSchema(e){return Array.isArray(e)?e.map(t=>typeof t=="object"?this.expandSchema(t):t):this.expandSchema(e)}_manageRecursivePointer(e,t){Object.keys(e).forEach(r=>{e[r]!==null&&e[r].$ref&&e[r].$ref.indexOf("#")===0&&(e[r].$ref=t+e[r].$ref)})}_getExternalRefs(e,t,r=!1){r||this._manageRecursivePointer(e,t);const n={},s=o=>Object.keys(o).forEach(a=>{n[a]=!0});if(e.$ref&&typeof e.$ref!="object"&&!(e.$ref.indexOf("#")===0&&r)){let o=e.$ref,a="";o.indexOf("#")>0&&(o=o.substr(0,o.indexOf("#"))),o!==e.$ref&&(a=e.$ref.substr(e.$ref.indexOf("#")));const l=this.refs_prefix+this.refs_counter++,u=l+a;e.$ref.substr(0,1)!=="#"&&!this.refs[e.$ref]&&(n[o]=!0),this.refs_with_info[l]={fetchUrl:t,$ref:o},e.$ref=u}return Object.values(e).forEach(o=>{!o||typeof o!="object"||(Array.isArray(o)?Object.values(o).forEach(a=>{a&&typeof a=="object"&&s(this._getExternalRefs(a,t,r))}):(!o.$ref||!(typeof o.$ref=="string"&&o.$ref.startsWith("#")))&&s(this._getExternalRefs(o,t,r)))}),e.id&&typeof e.id=="string"&&e.id.substr(0,4)==="urn:"?this.refs[e.id]=e:e.$id&&typeof e.$id=="string"&&e.$id.substr(0,4)==="urn:"&&(this.refs[e.$id]=e),n}_getFileBase(e){if(!e)return"/";const{ajaxBase:t}=this.options;return typeof t>"u"?this._getFileBaseFromFileLocation(e):t}_getFileBaseFromFileLocation(e){const t=e.split("/");return t.pop(),`${t.join("/")}/`}_joinUrl(e,t){let r=e;return e.substr(0,7)!=="http://"&&e.substr(0,8)!=="https://"&&e.substr(0,5)!=="blob:"&&e.substr(0,5)!=="data:"&&e.substr(0,1)!=="#"&&e.substr(0,1)!=="/"&&(r=t+e),r.indexOf("#")>0&&(r=r.substr(0,r.indexOf("#"))),r}_isUniformResourceName(e){return e.substr(0,4)==="urn:"}async _asyncloadExternalRefs(e,t,r,n=!1){const s=this._getExternalRefs(e,t,n);let o=0;for(const a of Object.keys(s)){if(typeof a>"u"||this.refs[a])continue;if(this._isUniformResourceName(a)){this.refs[a]="loading",o++;const h=this.options.urn_resolver;let d=a;if(typeof h!="function")throw console.log(`No "urn_resolver" callback defined to resolve "${d}"`),new Error(`Must set urn_resolver option to a callback to resolve ${d}`);d.indexOf("#")>0&&(d=d.substr(0,d.indexOf("#")));let p;try{let m;p=await h(d);try{m=JSON.parse(p)}catch(g){throw console.log(g),new Error(`Failed to parse external ref ${d}`)}if(!(typeof m=="boolean"||typeof m=="object")||m===null||Array.isArray(m))throw new Error(`External ref does not contain a valid schema - ${d}`);this.refs[a]=m,await this._asyncloadExternalRefs(m,a,r)}catch(m){throw console.log(m),new Error(`Failed to parse external ref ${d}`)}if(typeof p=="boolean")throw new Error(`External ref does not contain a valid schema - ${d}`);continue}if(!this.options.ajax)throw new Error(`Must set ajax option to true to load external ref ${a}`);o++;let l=this._joinUrl(a,r),u;if(this.options.ajax_cache_responses){const h=this.cacheGet(l);h&&(u=h)}if(!u){const h=await new Promise(d=>{const p=new XMLHttpRequest;this.options.ajaxCredentials&&(p.withCredentials=this.options.ajaxCredentials),p.overrideMimeType("application/json"),p.open("GET",l,!0),p.onload=()=>{d(p)},p.onerror=m=>{d(void 0)},p.send()});if(typeof h>"u")throw new Error(`Failed to fetch ref via ajax - ${a}`);try{u=JSON.parse(h.responseText),this.onSchemaLoaded({schema:u,schemaUrl:l}),this.options.ajax_cache_responses&&this.cacheSet(l,u)}catch(d){throw console.log(d),new Error(`Failed to parse external ref ${l}`)}}if(!(typeof u=="boolean"||typeof u=="object")||u===null||Array.isArray(u))throw new Error(`External ref does not contain a valid schema - ${l}`);this.refs[a]=u;const c=this._getFileBaseFromFileLocation(l);if(l!==a){const h=l.split("/");l=(a.substr(0,1)==="/"?"/":"")+h.pop()}await this._asyncloadExternalRefs(u,l,c)}if(!o)return!0;this.onAllSchemasLoaded()}onSchemaLoaded(e){}onAllSchemasLoaded(){}extendSchemas(e,t){e=ki({},e),t=ki({},t);const r={},n=(a,l)=>(a==="required"||a==="defaultProperties")&&typeof l=="object"&&Array.isArray(l),s=(a,l)=>{n(a,l)?r[a]=l.concat(t[a]).reduce((u,c)=>(u.includes(c)||u.push(c),u),[]):a==="type"&&(typeof l=="string"||Array.isArray(l))?o(l):typeof l=="object"&&!Array.isArray(l)&&l!==null?r[a]=this.extendSchemas(l,t[a]):r[a]=l},o=a=>{typeof a=="string"&&(a=[a]),typeof t.type=="string"&&(t.type=[t.type]),!t.type||!t.type.length?r.type=a:r.type=a.filter(l=>t.type.includes(l)),r.type.length===1&&typeof r.type[0]=="string"?r.type=r.type[0]:r.type.length===0&&delete r.type};return Object.entries(e).forEach(([a,l])=>{typeof t[a]<"u"?s(a,l):r[a]=l}),Object.entries(t).forEach(([a,l])=>{typeof e[a]>"u"&&(r[a]=l)}),r}getCacheKey(e){return["je-cache",e].join("::")}getCacheBuster(){return this.options.ajax_cache_buster||new Date().toISOString().slice(0,10)}cacheSet(e,t){try{window.localStorage.setItem(this.getCacheKey(e),JSON.stringify({cacheBuster:this.getCacheBuster(),schema:t}))}catch(r){console.error(r)}}cacheGet(e){try{const t=window.localStorage.getItem(this.getCacheKey(e));if(t){const r=JSON.parse(t);if(r.cacheBuster&&r.schema&&r.cacheBuster===this.getCacheBuster())return r.schema;this.cacheDelete(e)}}catch(t){console.error(t)}}cacheDelete(e){window.localStorage.removeItem(this.getCacheKey(e))}}const Uqe=()=>({compile(i){const e=i.match(/{{\s*([a-zA-Z0-9\-_ .]+)\s*}}/g),t=e&&e.length;if(!t)return()=>i;const r=[],n=s=>{let o=e[s].replace(/[{}]+/g,"").trim().split(".");const a=o.length;let l;if(a>1){let u;l=c=>{for(u=c,s=0;s<a&&(u=u[o[s]],!!u);s++);return u}}else o=o[0],l=u=>u[o];r.push({s:e[s],r:l})};for(let s=0;s<t;s++)n(s);return s=>{let o=`${i}`,a;for(let l=0;l<t;l++)a=r[l],o=o.replace(a.s,a.r(s));return o}}}),Gqe=()=>window.EJS?{compile(i){const e=new window.EJS({text:i});return t=>e.render(t)}}:!1,qqe=()=>window.Handlebars,Hqe=()=>window.Hogan?{compile(i){const e=window.Hogan.compile(i);return t=>e.render(t)}}:!1,Vqe=()=>window._?{compile(i){return e=>window._.template(i)(e)}}:!1,Wqe=()=>!window.Mark||!window.Mark.up?!1:{compile(i){return e=>window.Mark.up(i,e)}},Yqe=()=>window.Mustache?{compile(i){return e=>window.Mustache.render(i,e)}}:!1,Xqe=()=>window.swig,Zqe=()=>window._?{compile(i){return e=>window._.template(i)(e)}}:!1,Kqe={default:Uqe,ejs:Gqe,handlebars:qqe,hogan:Hqe,lodash:Vqe,markup:Wqe,mustache:Yqe,swig:Xqe,underscore:Zqe},Jqe={collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""};class yd{constructor(e="",t=Jqe){this.mapping=t,this.icon_prefix=e}getIconClass(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:this.icon_prefix+e}getIcon(e){const t=this.getIconClass(e);if(!t)return null;const r=document.createElement("i");return r.classList.add(...t.split(" ")),r}}const Qqe="glyphicon glyphicon-",eHe={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class tHe extends yd{constructor(){super(Qqe,eHe)}}const iHe="icon-",rHe={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class nHe extends yd{constructor(){super(iHe,rHe)}}const sHe="fa fa-",oHe={collapse:"caret-square-o-down",expand:"caret-square-o-right",delete:"times",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"files-o",clear:"times-circle-o",time:"clock-o",calendar:"calendar",edit_properties:"list"};class aHe extends yd{constructor(){super(sHe,oHe)}}const lHe="fas fa-",uHe={collapse:"caret-down",expand:"caret-right",delete:"trash",edit:"pen",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"times-circle",time:"clock",calendar:"calendar",edit_properties:"list"};class cHe extends yd{constructor(){super(lHe,uHe)}}const hHe="ui-icon ui-icon-",dHe={collapse:"triangle-1-s",expand:"triangle-1-e",delete:"trash",edit:"pencil",add:"plusthick",subtract:"minusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",moveright:"arrowthick-1-e",movedown:"arrowthick-1-s",moveleft:"arrowthick-1-w",copy:"copy",clear:"circle-close",time:"time",calendar:"calendar",edit_properties:"note"};class fHe extends yd{constructor(){super(hHe,dHe)}}const pHe="oi oi-",mHe={collapse:"collapse-down",expand:"expand-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"file",moveup:"arrow-thick-top",moveright:"arrow-thick-right",movedown:"arrow-thick-bottom",moveleft:"arrow-thick-left",copy:"clipboard",clear:"circle-x",time:"clock",calendar:"calendar",edit_properties:"list"};class gHe extends yd{constructor(){super(pHe,mHe)}}const yHe="icon icon-",vHe={collapse:"arrow-down",expand:"arrow-right",delete:"delete",edit:"edit",add:"plus",subtract:"minus",cancel:"cross",save:"check",moveup:"upward",moveright:"forward",movedown:"downward",moveleft:"back",copy:"copy",clear:"close",time:"time",calendar:"bookmark",edit_properties:"menu"};class bHe extends yd{constructor(){super(yHe,vHe)}}const _He="bi bi-",xHe={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"dash",cancel:"x-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"clipboard",clear:"x-circle",time:"clock",calendar:"calendar",edit_properties:"list-ul"};class wHe extends yd{constructor(){super(_He,xHe)}}const EHe={bootstrap:wHe,bootstrap3:tHe,fontawesome3:nHe,fontawesome4:aHe,fontawesome5:cHe,jqueryui:fHe,openiconic:gHe,spectre:bHe},_fe=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(i=>i in document.documentElement);class vd{constructor(e,t={disable_theme_rules:!1}){this.jsoneditor=e,Object.keys(t).forEach(r=>{typeof e.options[r]<"u"&&(t[r]=e.options[r])}),this.options=t}getContainer(){return document.createElement("div")}getFloatRightLinkHolder(){const e=document.createElement("div");return e.classList.add("je-float-right-linkholder"),e}getModal(){const e=document.createElement("div");return e.style.display="none",e.classList.add("je-modal"),e}getGridContainer(){return document.createElement("div")}getGridRow(){const e=document.createElement("div");return e.classList.add("row"),e}getGridColumn(){return document.createElement("div")}setGridColumnSize(e,t){}getLink(e){const t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t}disableHeader(e){e.style.color="#ccc"}disableLabel(e){e.style.color="#ccc"}enableHeader(e){e.style.color=""}enableLabel(e){e.style.color=""}getInfoButton(e){const t=document.createElement("span");t.innerText="",t.classList.add("je-infobutton-icon");const r=document.createElement("span");return r.classList.add("je-infobutton-tooltip"),r.innerText=e,t.onmouseover=()=>{r.style.visibility="visible"},t.onmouseleave=()=>{r.style.visibility="hidden"},t.appendChild(r),t}getFormInputLabel(e,t){const r=document.createElement("label");return r.appendChild(document.createTextNode(e)),t&&r.classList.add("required"),r}getLabelLike(e,t){const r=document.createElement("b");return r.appendChild(document.createTextNode(e)),t&&r.classList.add("required"),r}getHeader(e,t){const r=document.createElement("span");return typeof e=="string"?r.textContent=e:r.appendChild(e),r.classList.add("je-header"),r}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("je-checkbox"),e}getCheckboxLabel(e,t){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${e}`)),t&&r.classList.add("required"),r}getMultiCheckboxHolder(e,t,r,n){const s=document.createElement("div");return s.classList.add("control-group"),t&&(t.style.display="block",s.appendChild(t),n&&t.appendChild(n)),Object.values(e).forEach(o=>{o.style.display="inline-block",o.style.marginRight="20px",s.appendChild(o)}),r&&s.appendChild(r),s}getFormCheckboxControl(e,t,r){const n=document.createElement("div");return n.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),r&&n.classList.add("je-checkbox-control--compact"),n}getFormRadio(e){const t=this.getFormInputField("radio");return Object.keys(e).forEach(r=>t.setAttribute(r,e[r])),t.classList.add("je-radio"),t}getFormRadioLabel(e,t){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${e}`)),t&&r.classList.add("required"),r}getFormRadioControl(e,t,r,n){const s=document.createElement("div");return s.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),r&&s.classList.add("je-radio-control--compact"),t.tagName.toLowerCase()!=="div"&&n&&e&&t&&(t.setAttribute("id",n),t.setAttribute("aria-labelledby",n),e.setAttribute("for",n)),s}getSelectInput(e,t,r=!1){const n=document.createElement("select");return e&&this.setSelectOptions(n,e,[],r),n}getSwitcher(e){const t=this.getSelectInput(e,!1);return t.classList.add("je-switcher"),t}getSwitcherOptions(e){return e.getElementsByTagName("option")}setSwitcherOptions(e,t,r){this.setSelectOptions(e,t,r)}setSelectOptions(e,t,r=[],n=!1,s=" "){if(e.innerHTML="",n){const o=document.createElement("option");o.setAttribute("value","_placeholder_"),o.textContent=s,o.setAttribute("disabled",""),o.setAttribute("hidden",""),e.appendChild(o)}for(let o=0;o<t.length;o++){const a=document.createElement("option");a.setAttribute("value",t[o]),a.textContent=r[o]||t[o],e.appendChild(a)}}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("je-textarea"),e}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),t}visuallyHidden(e){e&&e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),t}getRangeInput(e,t,r,n,s){const o=this.getFormInputField("range");return o.setAttribute("min",e),o.setAttribute("max",t),o.setAttribute("step",r),n&&(n.setAttribute("id",s+"-description"),o.setAttribute("aria-describedby",s+"-description")),o}getStepperButtons(e){const t=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("stepper-down");const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("stepper-up"),e.getAttribute("readonly")&&(r.setAttribute("disabled",!0),n.setAttribute("disabled",!0)),r.textContent="-",n.textContent="+";const o=(u,c)=>{c?u.value=Number(c):u.value=Number(u.value),u.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return r.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),Uu(e,"change")}),n.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),Uu(e,"change")}),t.appendChild(r),t.appendChild(n),t}getRangeOutput(e){const t=document.createElement("output"),r=n=>{t.value=n.currentTarget.value};return e.addEventListener("change",r,!1),e.addEventListener("input",r,!1),t}getRangeControl(e,t){const r=document.createElement("div");return r.classList.add("je-range-control"),t&&r.appendChild(t),r.appendChild(e),r}getFormInputField(e){const t=document.createElement("input");return t.setAttribute("type",e),t}afterInputReady(e){}getFormControl(e,t,r,n,s){const o=document.createElement("div");return o.classList.add("form-control"),e&&(o.appendChild(e),s&&e.setAttribute("for",s)),(t.type==="checkbox"||t.type==="radio")&&e?(t.style.width="auto",e.insertBefore(t,e.firstChild),n&&e.appendChild(n)):(n&&e&&e.appendChild(n),o.appendChild(t)),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),r&&o.appendChild(r),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel--top"),e}getChildEditorHolder(){return document.createElement("div")}getDescription(e){const t=document.createElement("p");return window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getCheckboxDescription(e){return this.getDescription(e)}getFormInputDescription(e){return this.getDescription(e)}getButtonHolder(){return document.createElement("span")}getHeaderButtonHolder(){return this.getButtonHolder()}getFormButtonHolder(e){return this.getButtonHolder()}getButton(e,t,r){const n=document.createElement("button");return n.type="button",this.setButtonText(n,e,t,r),n}getFormButton(e,t,r){return this.getButton(e,t,r)}setButtonText(e,t,r,n){for(;e.firstChild;)e.removeChild(e.firstChild);if(r&&(e.appendChild(r),t=` ${t}`),!this.jsoneditor.options.iconlib||!this.jsoneditor.options.remove_button_labels||!r){const s=document.createElement("span");s.appendChild(document.createTextNode(t)),e.appendChild(s)}n&&e.setAttribute("title",n)}getTableContainer(){return document.createElement("div")}getTable(){return document.createElement("table")}getTableRow(){return document.createElement("tr")}getTableHead(){return document.createElement("thead")}getTableBody(){return document.createElement("tbody")}getTableHeaderCell(e){const t=document.createElement("th");return t.textContent=e,t}getTableCell(){return document.createElement("td")}getErrorMessage(e){const t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.errmsg.setAttribute("role","alert")}removeInputError(e){}addTableRowError(e){}removeTableRowError(e){}getTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<div class='je-tabholder tabs'></div><div class='content' id='${t}'></div><div class='je-tabholder--clear'></div>`,r}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<div class='tabs je-tabholder--top'></div><div class='je-tabholder--clear'></div><div class='content' id='${t}'></div>`,r}applyStyles(e,t){Object.keys(t).forEach(r=>e.style[r]=t[r])}closest(e,t){for(;e&&e!==document;)if(e[_fe]){if(e[_fe](t))return e;e=e.parentNode}else return!1;return!1}insertBasicTopTab(e,t){t.firstChild.insertBefore(e,t.firstChild.firstChild)}getTab(e,t){const r=document.createElement("div");return r.appendChild(e),r.id=t,r.classList.add("je-tab"),r}getTopTab(e,t){const r=document.createElement("div");return r.appendChild(e),r.id=t,r.classList.add("je-tab--top"),r}getTabContentHolder(e){return e.children[1]}getTopTabContentHolder(e){return e.children[1]}getTabContent(){return this.getIndentedPanel()}getTopTabContent(){return this.getTopIndentedPanel()}markTabActive(e){this.applyStyles(e.tab,{opacity:1,background:"white"}),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){this.applyStyles(e.tab,{opacity:.5,background:""}),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}addTab(e,t){e.children[0].appendChild(t)}addTopTab(e,t){e.children[0].appendChild(t)}getBlockLink(){const e=document.createElement("a");return e.classList.add("je-block-link"),e}getBlockLinkHolder(){return document.createElement("div")}getLinksHolder(){return document.createElement("div")}createMediaLink(e,t,r){e.appendChild(t),r.classList.add("je-media"),e.appendChild(r)}createImageLink(e,t,r){e.appendChild(t),t.appendChild(r)}getFirstTab(e){return e.firstChild.firstChild}getInputGroup(e,t){}cleanText(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}getDropZone(e){const t=document.createElement("div");return t.setAttribute("data-text",e),t.classList.add("je-dropzone"),t}getUploadPreview(e,t,r){const n=document.createElement("div");if(n.classList.add("je-upload-preview"),e.mimeType.substr(0,5)==="image"){const a=document.createElement("img");a.src=r,n.appendChild(a)}const s=document.createElement("div");s.innerHTML+=`<strong>Name:</strong> ${e.name}<br><strong>Type:</strong> ${e.type}<br><strong>Size:</strong> ${e.formattedSize}`,n.appendChild(s),n.appendChild(t);const o=document.createElement("div");return o.style.clear="left",n.appendChild(o),n}getProgressBar(){const r=document.createElement("progress");return r.setAttribute("max",100),r.setAttribute("value",0),r}updateProgressBar(e,t){e&&e.setAttribute("value",t)}updateProgressBarUnknown(e){e&&e.removeAttribute("value")}}const SHe={".je-form-input-label":"display:block;margin-bottom:3px;font-weight:bold",".je-form-input-description":"display:inline-block;margin:0;font-size:0.8em;font-style:italic",".je-indented-panel":"padding:5px;margin:10px;border-radius:3px;border:1px%20solid%20%23ddd",".je-child-editor-holder":"margin-bottom:8px",".je-header-button-holder":"display:inline-block;margin-left:10px;font-size:0.8em;vertical-align:middle",".je-table":"margin-bottom:5px;border-bottom:1px%20solid%20%23ccc",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class g_e extends vd{getFormInputLabel(e,t){const r=super.getFormInputLabel(e,t);return r.classList.add("je-form-input-label"),r}getFormInputDescription(e){const t=super.getFormInputDescription(e);return t.classList.add("je-form-input-label"),t}getIndentedPanel(){const e=super.getIndentedPanel();return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){return this.getIndentedPanel()}getChildEditorHolder(){const e=super.getChildEditorHolder();return e.classList.add("je-child-editor-holder"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("je-header-button-holder"),e}getTable(){const e=super.getTable();return e.classList.add("je-table"),e}addInputError(e,t){const r=this.closest(e,".form-control")||e.controlgroup;e.errmsg?e.errmsg.style.display="block":(e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",r.appendChild(e.errmsg)),e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}g_e.rules=SHe;const CHe={};class y_e extends vd{getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-control"),r}setGridColumnSize(e,t,r){e.classList.add(`col-md-${t}`),r&&e.classList.add(`col-md-offset-${r}`)}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),e}getRangeInput(e,t,r,n,s){return super.getRangeInput(e,t,r,n,s)}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&t.classList.add("form-control"),t}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("sr-only"),t}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getFormControl(e,t,r,n,s){const o=document.createElement("div");return e&&(t.type==="checkbox"||t.type==="radio")?(o.classList.add(t.type),n&&e.appendChild(n),e.insertBefore(t,e.firstChild),o.appendChild(e)):(o.classList.add("form-group"),e&&(e.classList.add("control-label"),o.appendChild(e),n&&e.appendChild(n)),o.appendChild(t)),r&&o.appendChild(r),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("well","well-sm"),e.style.paddingBottom=0,e}getInfoButton(e){const t=document.createElement("span");t.classList.add("glyphicon","glyphicon-info-sign","pull-right"),t.style.padding=".25rem",t.style.position="relative",t.style.display="inline-block";const r=document.createElement("span");return r.style["font-family"]="sans-serif",r.style.visibility="hidden",r.style["background-color"]="rgba(50, 50, 50, .75)",r.style.margin="0 .25rem",r.style.color="#FAFAFA",r.style.padding=".5rem 1rem",r.style["border-radius"]=".25rem",r.style.width="25rem",r.style.position="absolute",r.innerText=e,t.onmouseover=()=>{r.style.visibility="visible"},t.onmouseleave=()=>{r.style.visibility="hidden"},t.appendChild(r),t}getFormInputDescription(e){const t=document.createElement("p");return t.classList.add("help-block"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const r=document.createElement("span");return r.classList.add("h3"),typeof e=="string"?r.textContent=e:r.appendChild(e),r}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-default"),n}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-bordered"),e.style.width="auto",e.style.maxWidth="none",e}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("help-block","errormsg"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='col-md-2 nav nav-pills nav-stacked' id='${t}' role='tablist'></ul><div class='col-md-10 tab-content active well well-small'  id='${t}'></div>`,r}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='nav nav-tabs' id='${t}' role='tablist'></ul><div class='tab-content active well well-small'  id='${t}'></div>`,r}getTab(e,t){const r=document.createElement("li");r.setAttribute("role","presentation");const n=document.createElement("a");return n.setAttribute("href",`#${t}`),n.appendChild(e),n.setAttribute("aria-controls",t),n.setAttribute("role","tab"),n.setAttribute("data-toggle","tab"),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.setAttribute("role","presentation");const n=document.createElement("a");return n.setAttribute("href",`#${t}`),n.appendChild(e),n.setAttribute("aria-controls",t),n.setAttribute("role","tab"),n.setAttribute("data-toggle","tab"),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);const n=document.createElement("div");n.classList.add("input-group-btn"),r.appendChild(n);for(let s=0;s<t.length;s++)n.appendChild(t[s]);return r}}y_e.rules=CHe;const THe={".jsoneditor-twbs4-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},AHe={disable_theme_rules:!1,input_size:"normal",custom_forms:!1,object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class v_e extends vd{constructor(e){super(e,AHe)}getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-control"),this.options.custom_forms===!1?(this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg")):(r.classList.remove("form-control"),r.classList.add("custom-select"),this.options.input_size==="small"&&r.classList.add("custom-select-sm"),this.options.input_size==="large"&&r.classList.add("custom-select-lg")),r}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}setGridColumnSize(e,t,r){e.classList.add(`col-md-${t}`),r&&e.classList.add(`offset-md-${r}`)}afterInputReady(e){if(e.controlgroup)return;const t=e.name;e.id=t;const r=e.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.htmlFor=t),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,t,r,n,s){const o=super.getRangeInput(e,t,r,n,s);return this.options.custom_forms===!0&&(o.classList.remove("form-control"),o.classList.add("custom-range")),o}getStepperButtons(e){const t=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div"),s=document.createElement("button");s.setAttribute("type","button");const o=document.createElement("button");o.setAttribute("type","button"),t.appendChild(r),t.appendChild(e),t.appendChild(n),r.appendChild(s),n.appendChild(o),t.classList.add("input-group"),r.classList.add("input-group-prepend"),n.classList.add("input-group-append"),s.classList.add("btn"),s.classList.add("btn-secondary"),s.classList.add("stepper-down"),o.classList.add("btn"),o.classList.add("btn-secondary"),o.classList.add("stepper-up"),e.getAttribute("readonly")&&(s.setAttribute("disabled",!0),o.setAttribute("disabled",!0)),s.textContent="-",o.textContent="+";const l=(h,d)=>{d?h.value=Number(d):h.value=Number(h.value),h.setAttribute("initialized","1")},u=e.getAttribute("min"),c=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),s.addEventListener("click",()=>{e.getAttribute("initialized")?u?Number(e.value)>Number(u)&&e.stepDown():e.stepDown():l(e,u),Uu(e,"change")}),o.addEventListener("click",()=>{e.getAttribute("initialized")?c?Number(e.value)<Number(c)&&e.stepUp():e.stepUp():l(e,u),Uu(e,"change")}),t}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&e!=="file"&&(t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg")),e==="file"&&t.classList.add("form-control-file"),t}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("sr-only"),t}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getFormControl(e,t,r,n,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")){const a=document.createElement("div");this.options.custom_forms===!1?(a.classList.add("form-check"),t.classList.add("form-check-input"),e.classList.add("form-check-label")):(a.classList.add("custom-control"),t.classList.add("custom-control-input"),e.classList.add("custom-control-label"),t.type==="checkbox"?a.classList.add("custom-checkbox"):a.classList.add("custom-radio")),a.appendChild(t),a.appendChild(e),n&&a.appendChild(n),o.appendChild(a)}else e&&(o.appendChild(e),n&&o.appendChild(n)),o.appendChild(t);return r&&o.appendChild(r),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getInfoButton(e){const t=document.createElement("button");t.type="button",t.classList.add("ml-3","jsoneditor-twbs4-text-button"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("data-placement","auto"),t.title=e;const r=document.createTextNode("");return t.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(t).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&t.classList.add("je-tooltip"),t}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,t,r,n){const s=document.createElement("div");s.classList.add("form-group"),t&&(s.appendChild(t),n&&t.appendChild(n));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),r&&s.appendChild(r),s}getFormRadio(e){const t=this.getFormInputField("radio");for(const r in e)t.setAttribute(r,e[r]);return this.options.custom_forms===!1?t.classList.add("form-check-input"):t.classList.add("custom-control-input"),t}getFormRadioLabel(e,t){const r=document.createElement("label");return this.options.custom_forms===!1?r.classList.add("form-check-label"):r.classList.add("custom-control-label"),r.appendChild(document.createTextNode(e)),r}getFormRadioControl(e,t,r){const n=document.createElement("div");return this.options.custom_forms===!1?n.classList.add("form-check"):n.classList.add("custom-control","custom-radio"),n.appendChild(t),n.appendChild(e),r&&(this.options.custom_forms===!1?n.classList.add("form-check-inline"):n.classList.add("custom-control-inline")),n}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","mb-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const t=document.createElement("small");return t.classList.add("form-text"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+t),typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=this.getButtonHolder();return t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"&&t.classList.add("text-right"),t}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-secondary","btn-sm"),n}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const t=document.createElement("div");return t.classList.add("alert","alert-danger"),t.setAttribute("role","alert"),t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const t=document.createElement("div"),r=typeof e>"u"?"":e;return t.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,t.classList.add("row"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${t}'></ul></div><div class='card-body'><div class='tab-content' id='${t}'></div></div>`,r}getTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,t){t.children[0].children[0].insertBefore(e,t.children[0].children[0].firstChild)}addTopTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);const n=document.createElement("div");n.classList.add("input-group-append"),r.appendChild(n);for(let s=0;s<t.length;s++)t[s].classList.remove("mr-2","btn-secondary"),t[s].classList.add("btn-outline-secondary"),n.appendChild(t[s]);return r}}v_e.rules=THe;const kHe={".form-group":"margin-bottom:1rem",".form-text":"display:block",".jsoneditor-twbs5-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},DHe={disable_theme_rules:!1,input_size:"normal",object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class b_e extends vd{constructor(e){super(e,DHe)}getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-control"),r.classList.add("form-select"),this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg"),r}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}setGridColumnSize(e,t,r){e.classList.add(`col-md-${t}`),r&&e.classList.add(`offset-md-${r}`)}afterInputReady(e){if(e.controlgroup)return;const t=e.name;e.id=t;const r=e.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.classList.add("form-label"),r.htmlFor=t),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,t,r,n,s){const o=super.getRangeInput(e,t,r,n,s);return o.classList.remove("form-control"),o.classList.add("form-range"),o}getStepperButtons(e){const t=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button");const n=document.createElement("button");n.setAttribute("type","button"),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.classList.add("input-group"),r.classList.add("btn"),r.classList.add("btn-secondary"),r.classList.add("stepper-down"),n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("stepper-up"),e.getAttribute("readonly")&&(r.setAttribute("disabled",!0),n.setAttribute("disabled",!0)),r.textContent="-",n.textContent="+";const o=(u,c)=>{c?u.value=Number(c):u.value=Number(u.value),u.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),r.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),Uu(e,"change")}),n.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),Uu(e,"change")}),t}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&(t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg")),t}getFormControl(e,t,r,n,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")){const a=document.createElement("div");a.classList.add("form-check"),t.classList.add("form-check-input"),e.classList.add("form-check-label"),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),a.appendChild(t),a.appendChild(e),n&&a.appendChild(n),o.appendChild(a)}else e&&(e.classList.add("form-label"),o.appendChild(e),n&&o.appendChild(n)),o.appendChild(t);return r&&o.appendChild(r),o}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("visually-hidden"),t}visuallyHidden(e){e&&e.classList.add("visually-hidden")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getInfoButton(e){const t=document.createElement("button");t.type="button",t.classList.add("ms-3","jsoneditor-twbs5-text-button"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("data-placement","auto"),t.title=e;const r=document.createTextNode("");return t.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(t).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&t.classList.add("je-tooltip"),t}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,t,r,n){const s=document.createElement("div");s.classList.add("form-group"),t&&(s.appendChild(t),n&&t.appendChild(n));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),r&&s.appendChild(r),s}getFormRadio(e){const t=this.getFormInputField("radio");for(const r in e)t.setAttribute(r,e[r]);return t.classList.add("form-check-input"),t}getFormRadioLabel(e,t){const r=document.createElement("label");return r.classList.add("form-check-label"),r.appendChild(document.createTextNode(e)),r}getFormRadioControl(e,t,r){const n=document.createElement("div");return n.classList.add("form-check"),n.appendChild(t),n.appendChild(e),r&&n.classList.add("form-check-inline"),n}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","my-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const t=document.createElement("small");return t.classList.add("form-text"),t.classList.add("d-block"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+t),typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=this.getButtonHolder();return t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"&&t.classList.add("text-end"),t}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-secondary","btn-sm"),n}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const t=document.createElement("div");return t.classList.add("alert","alert-danger"),t.setAttribute("role","alert"),t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const t=document.createElement("div"),r=typeof e>"u"?"":e;return t.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,t.classList.add("row"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${t}'></ul></div><div class='card-body'><div class='tab-content' id='${t}'></div></div>`,r}getTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,t){t.children[0].children[0].insertBefore(e,t.children[0].children[0].firstChild)}addTopTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);for(let n=0;n<t.length;n++)t[n].classList.remove("me-2","btn-secondary"),t[n].classList.add("btn-outline-secondary"),r.appendChild(t[n]);return r}}b_e.rules=kHe;class __e extends vd{getTable(){const e=super.getTable();return e.setAttribute("cellpadding",5),e.setAttribute("cellspacing",0),e}getTableHeaderCell(e){const t=super.getTableHeaderCell(e);return t.classList.add("ui-state-active"),t.style.fontWeight="bold",t}getTableCell(){const e=super.getTableCell();return e.classList.add("ui-widget-content"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e.style.fontSize=".6em",e.style.display="inline-block",e}getFormInputDescription(e){const t=this.getDescription(e);return t.style.marginLeft="10px",t.style.display="inline-block",t}getFormControl(e,t,r,n){const s=super.getFormControl(e,t,r,n);return t.type==="checkbox"?(s.style.lineHeight="25px",s.style.padding="3px 0"):s.style.padding="4px 0 8px 0",s}getDescription(e){const t=document.createElement("span");return t.style.fontSize=".8em",t.style.fontStyle="italic",window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getButtonHolder(){const e=document.createElement("div");return e.classList.add("ui-buttonset"),e.style.fontSize=".7em",e}getFormInputLabel(e,t){const r=document.createElement("label");return r.style.fontWeight="bold",r.style.display="block",r.textContent=e,t&&r.classList.add("required"),r}getButton(e,t,r){const n=document.createElement("button");n.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),t&&!e?(n.classList.add("ui-button-icon-only"),t.classList.add("ui-button-icon-primary","ui-icon-primary"),n.appendChild(t)):t?(n.classList.add("ui-button-text-icon-primary"),t.classList.add("ui-button-icon-primary","ui-icon-primary"),n.appendChild(t)):n.classList.add("ui-button-text-only");const s=document.createElement("span");return s.classList.add("ui-button-text"),s.textContent=e||r||".",n.appendChild(s),n.setAttribute("title",r),n}setButtonText(e,t,r,n){e.innerHTML="",e.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),r&&!t?(e.classList.add("ui-button-icon-only"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(r)):r?(e.classList.add("ui-button-text-icon-primary"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(r)):e.classList.add("ui-button-text-only");const s=document.createElement("span");s.classList.add("ui-button-text"),s.textContent=t||n||".",e.appendChild(s),e.setAttribute("title",n)}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("ui-widget-content","ui-corner-all"),e.style.padding="1em 1.4em",e.style.marginBottom="20px",e}afterInputReady(e){if(!e.controls&&(e.controls=this.closest(e,".form-control"),this.queuedInputErrorText)){const t=this.queuedInputErrorText;delete this.queuedInputErrorText,this.addInputError(e,t)}}addInputError(e,t){if(!e.controls){this.queuedInputErrorText=t;return}e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("div"),e.errmsg.classList.add("ui-state-error"),e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t}removeInputError(e){e.controls||delete this.queuedInputErrorText,e.errmsg&&(e.errmsg.style.display="none")}markTabActive(e){e.tab.classList.remove("ui-widget-header"),e.tab.classList.add("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.add("ui-widget-header"),e.tab.classList.remove("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}}__e.rules={'div[data-schemaid="root"]:after':'position:relative;color:red;margin:10px 0;font-weight:600;display:block;width:100%;text-align:center;content:"This is an old JSON-Editor 1.x Theme and might not display elements correctly when used with the 2.x version"'};const MHe={".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class x_e extends vd{addInputError(e,t){if(e.errmsg)e.errmsg.style.display="block";else{const r=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),r.nodeName&&r.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}x_e.rules=MHe;const LHe={"*":"--primary-color:%235755d9;--gray-color:%23bcc3ce;--light-color:%23fff",".slider:focus":"box-shadow:none","h4 > label + .btn-group":"margin-left:1rem",".text-right > button":"margin-right:0%20!important",".text-left > button":"margin-left:0%20!important",".property-selector":"font-size:0.7rem;font-weight:normal;max-height:260px%20!important;width:395px%20!important",".property-selector .form-checkbox":"margin:0",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"border-collapse:collapse",".table td":"padding:0.4rem%200.4rem",".mr-5":"margin-right:1rem%20!important","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23eee",".je-table-border td":"border:0.05rem%20solid%20%23dadee4%20!important",".btn-info":"font-size:0.5rem;font-weight:bold;height:0.8rem;padding:0.15rem%200;line-height:0.8;margin:0.3rem%200%200.3rem%200.1rem",".je-label + select":"min-width:5rem",".je-label":"font-weight:600",".btn-action.btn-info":"width:0.8rem",".je-border":"border:0.05rem%20solid%20%23dadee4",".je-panel":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit",".je-align-bottom":"margin-top:auto",".je-desc":"font-size:smaller;margin:0.2rem%200",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem;border:3px%20solid%20white;box-shadow:0px%200px%208px%20rgba(0%2C%200%2C%200%2C%200.3);box-sizing:border-box",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red",".columns .container.je-noindent":"padding-left:0;padding-right:0",".selectize-control.multi .item":"background:var(--primary-color)%20!important",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"display:none",".select2-container--default .select2-selection--single":"border:none",".select2-container .select2-selection--single .select2-selection__rendered":"padding:0",".select2-container .select2-search--inline .select2-search__field":"margin-top:0",".select2-container--default.select2-container--focus   .select2-selection--multiple":"border:0.05rem%20solid%20var(--gray-color)",".select2-container--default   .select2-selection--multiple   .select2-selection__choice":"margin:0.4rem%200.2rem%200.2rem%200;padding:2px%205px;background-color:var(--primary-color);color:var(--light-color)",".select2-container--default .select2-search--inline .select2-search__field":"line-height:normal",".choices":"margin-bottom:auto",".choices__list--multiple .choices__item":"border:none;background-color:var(--primary-color);color:var(--light-color)",".choices[data-type*='select-multiple'] .choices__button":"border-left:0.05rem%20solid%20%232826a6",".choices__inner":"font-size:inherit;min-height:20px;padding:4px%207.5px%204px%203.75px",".choices[data-type*='select-one'] .choices__inner":"padding-bottom:4px",".choices__list--dropdown .choices__item":"font-size:inherit"},RHe={disable_theme_rules:!1,label_bold:!0,align_bottom:!1,object_indent:!1,object_border:!1,table_border:!1,table_zebrastyle:!1,input_size:"normal"};class w_e extends vd{constructor(e){super(e,RHe)}setGridColumnSize(e,t,r){e.classList.add(`col-${t}`),r&&e.classList.add("col-mx-auto")}getGridContainer(){const e=document.createElement("div");return e.classList.add("container"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("columns"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("column"),this.options.align_bottom&&e.classList.add("je-align-bottom"),e}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel-top"),this.options.object_border&&e.classList.add("je-border"),e}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=super.getButtonHolder();return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=super.getFormButtonHolder();return t.classList.remove("btn-group"),t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"?t.classList.add("text-right"):t.classList.add("text-left"),t}getFormButton(e,t,r){const n=super.getFormButton(e,t,r);return n.classList.add("btn","btn-primary","mx-2","my-1"),this.options.input_size!=="small"&&n.classList.remove("btn-sm"),this.options.input_size==="large"&&n.classList.add("btn-lg"),n}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-sm","btn-primary","mr-2","my-1"),n}getHeader(e,t){const r=document.createElement("span");return typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getFormInputDescription(e){const t=super.getFormInputDescription(e);return t.classList.add("je-desc","hide-sm"),t}getFormInputLabel(e,t){const r=super.getFormInputLabel(e,t);return this.options.label_bold&&r.classList.add("je-label"),r}getCheckbox(){return this.getFormInputField("checkbox")}getCheckboxLabel(e,t){const r=super.getCheckboxLabel(e,t),n=document.createElement("i");return n.classList.add("form-icon"),r.classList.add("form-checkbox","pr-0"),r.insertBefore(n,r.firstChild),r}getFormCheckboxControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("form-inline"),e}getMultiCheckboxHolder(e,t,r,n){return super.getMultiCheckboxHolder(e,t,r,n)}getFormRadio(e){const t=this.getFormInputField("radio");for(const r in e)t.setAttribute(r,e[r]);return t}getFormRadioLabel(e,t){const r=super.getFormRadioLabel(e,t),n=document.createElement("i");return n.classList.add("form-icon"),r.classList.add("form-radio"),r.insertBefore(n,r.firstChild),r}getFormRadioControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("form-inline"),e}getFormInputField(e){const t=super.getFormInputField(e);return["checkbox","radio"].includes(e)||t.classList.add("form-input"),t}getRangeInput(e,t,r,n,s){const o=super.getRangeInput(e,t,r,n,s);return o.classList.add("slider"),o.classList.remove("form-input"),o.setAttribute("oninput",'this.setAttribute("value", this.value)'),o}getRangeControl(e,t){const r=super.getRangeControl(e,t);return r.classList.add("text-center"),r}getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-select"),r}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-input"),e}getFormControl(e,t,r,n,s){const o=document.createElement("div");return o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")?(o.classList.add(t.type),n&&e.appendChild(n),e.insertBefore(t,e.firstChild),o.appendChild(e)):(e&&(e.classList.add("form-label"),o.appendChild(e),n&&e.appendChild(n)),o.appendChild(t)),this.options.input_size==="small"?t.classList.add("input-sm","select-sm"):this.options.input_size==="large"&&t.classList.add("input-lg","select-lg"),t.type!=="checkbox"&&o.appendChild(t),r&&o.appendChild(r),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);for(let n=0;n<t.length;n++)t[n].classList.add("input-group-btn"),t[n].classList.remove("btn-sm","mr-2","my-1"),r.appendChild(t[n]);return r}getInfoButton(e){const t=document.createElement("div");t.classList.add("popover","popover-left","float-right");const r=document.createElement("button");r.classList.add("btn","btn-secondary","btn-info","btn-action","s-circle"),r.setAttribute("tabindex","-1"),t.appendChild(r);const n=document.createTextNode("I");r.appendChild(n);const s=document.createElement("div");s.classList.add("popover-container"),t.appendChild(s);const o=document.createElement("div");o.classList.add("card"),s.appendChild(o);const a=document.createElement("div");return a.classList.add("card-body"),a.innerHTML=e,o.appendChild(a),t}getTable(){const e=super.getTable();return e.classList.add("table","table-scroll"),this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getProgressBar(){const e=super.getProgressBar();return e.classList.add("progress"),e}getTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("columns"),r.innerHTML=`<div class="column col-2"></div><div class="column col-10 content" id="${t}"></div>`,r}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class="tab"></ul><div class="content" id="${t}"></div>`,r}getTab(e,t){const r=document.createElement("a");return r.classList.add("btn","btn-secondary","btn-block"),r.setAttribute("href",`#${t}`),r.appendChild(e),r}getTopTab(e,t){const r=document.createElement("li");r.id=t,r.classList.add("tab-item");const n=document.createElement("a");return n.setAttribute("href",`#${t}`),n.appendChild(e),r.appendChild(n),r}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}afterInputReady(e){if(e.localName==="select"){if(e.classList.contains("selectized")){const t=e.nextSibling;t&&(t.classList.remove("form-select"),Array.from(t.querySelectorAll(".form-select")).forEach(r=>{r.classList.remove("form-select")}))}else if(e.classList.contains("select2-hidden-accessible")){const t=e.nextSibling;t&&t.querySelector(".select2-selection--single")&&t.classList.add("form-select")}}e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("form-input-hint"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.classList.remove("d-hide"),e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.classList.add("d-hide"),e.controlgroup.classList.remove("has-error"))}}w_e.rules=LHe;const IHe={".slider":"-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;display:block;border:none;height:1.2rem;width:100%25",".slider:focus":"box-shadow:0%200%200%200%20rgba(87%2C%2085%2C%20217%2C%200.2);outline:none",".slider.tooltip:not([data-tooltip])::after":"content:attr(value)",".slider::-webkit-slider-thumb":"-webkit-appearance:none;background:%23f17405;border-radius:100%25;height:0.6rem;margin-top:-0.25rem;transition:transform%200.2s;width:0.6rem",".slider:active::-webkit-slider-thumb":"transform:scale(1.25);outline:none",".slider::-webkit-slider-runnable-track":"background:%23b2b4b6;border-radius:0.1rem;height:0.1rem;width:100%25","a.tooltips":"position:relative;display:inline","a.tooltips span":"position:absolute;white-space:nowrap;width:auto;padding-left:1rem;padding-right:1rem;color:%23ffffff;background:rgba(56%2C%2056%2C%2056%2C%200.85);height:1.5rem;line-height:1.5rem;text-align:center;visibility:hidden;border-radius:3px","a.tooltips span:after":"content:%22%22;position:absolute;top:50%25;left:100%25;margin-top:-5px;width:0;height:0;border-left:5px%20solid%20rgba(56%2C%2056%2C%2056%2C%200.85);border-top:5px%20solid%20transparent;border-bottom:5px%20solid%20transparent","a:hover.tooltips span":"visibility:visible;opacity:0.9;font-size:0.8rem;right:100%25;top:50%25;margin-top:-12px;margin-right:10px;z-index:999",".json-editor-btntype-properties + div":"font-size:0.8rem;font-weight:normal",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"width:100%25;border-collapse:collapse",".table td":"padding:0rem%200rem","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23e6f4fe","div[data-schemaid='root']":"position:relative;width:inherit;display:inherit;overflow-x:hidden;z-index:10","select[multiple]":"height:auto","select[multiple].from-select":"height:auto",".je-table-zebra:nth-child(even)":"background-color:%23f2f2f2",".je-table-border":"border:0.5px%20solid%20black",".je-table-hdiv":"border-bottom:1px%20solid%20black",".je-border":"border:0.05rem%20solid%20%233182ce",".je-panel":"width:inherit;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"width:100%25;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit;font-weight:bold",".je-desc":"font-size:smaller;margin:0.2rem%200",".container-xl.je-noindent":"padding-left:0;padding-right:0",".json-editor-btntype-add":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%234299e1;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deletelast":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23e53e3e;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deleteall":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23000000;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-save":"float:right;color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-back":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-delete":"color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btntype-move":"color:%23000000;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btn-collapse":"padding:0em%200.8rem;font-size:1.3rem;color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},OHe={disable_theme_rules:!1,label_bold:!1,object_panel_default:!0,object_indent:!0,object_border:!1,table_border:!1,table_hdiv:!1,table_zebrastyle:!1,input_size:"small",enable_compact:!1};class E_e extends vd{constructor(e){super(e,OHe)}getGridContainer(){const e=document.createElement("div");return e.classList.add("flex","flex-col","w-full"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("flex","flex-wrap","w-full"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("flex","flex-col"),e}setGridColumnSize(e,t,r){t>0&&t<12?e.classList.add(`w-${t}/12`,"px-1"):e.classList.add("w-full","px-1"),r&&(e.style.marginLeft=`${100/12*r}%`)}getIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","p-1"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","m-2"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTitle(){return this.translateProperty(this.schema.title)}getSelectInput(e,t){const r=super.getSelectInput(e);return t?r.classList.add("form-multiselect","block","py-0","h-auto","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"):r.classList.add("form-select","block","py-0","h-6","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&r.classList.add("compact"),r}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=super.getTextareaInput();return e.classList.add("block","w-full","px-1","text-sm","leading-normal","bg-white","text-black","border","border-grey","rounded"),this.options.enable_compact&&e.classList.add("compact"),e.style.height=0,e}getRangeInput(e,t,r){const n=this.getFormInputField("range");return n.classList.add("slider"),this.options.enable_compact&&n.classList.add("compact"),n.setAttribute("oninput",'this.setAttribute("value", this.value)'),n.setAttribute("min",e),n.setAttribute("max",t),n.setAttribute("step",r),n}getRangeControl(e,t){const r=super.getRangeControl(e,t);return r.classList.add("text-center","text-black"),r}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("form-checkbox","text-red-600"),e}getCheckboxLabel(e,t){const r=super.getCheckboxLabel(e,t);return r.classList.add("inline-flex","items-center"),r}getFormCheckboxControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("inline-flex flex-row"),e}getMultiCheckboxHolder(e,t,r,n){const s=super.getMultiCheckboxHolder(e,t,r,n);return s.classList.add("inline-flex","flex-col"),s}getFormRadio(e){const t=this.getFormInputField("radio");t.classList.add("form-radio","text-red-600");for(const r in e)t.setAttribute(r,e[r]);return t}getFormRadioLabel(e,t){const r=super.getFormRadioLabel(e,t);return r.classList.add("inline-flex","items-center","mr-2"),r}getFormRadioControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("form-radio"),e}getRadioHolder(e,t,r,n,s){const o=super.getRadioHolder(t,r,n,s);return e.options.layout==="h"?o.classList.add("inline-flex","flex-row"):o.classList.add("inline-flex","flex-col"),o}getFormInputLabel(e,t){const r=super.getFormInputLabel(e,t);return this.options.label_bold?r.classList.add("font-bold"):r.classList.add("required"),r}getFormInputField(e){const t=super.getFormInputField(e);return["checkbox","radio"].includes(e)||t.classList.add("block","w-full","px-1","text-black","text-sm","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&t.classList.add("compact"),t}getFormInputDescription(e){const t=document.createElement("p");return t.classList.add("block","mt-1","text-xs"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getFormControl(e,t,r,n){const s=document.createElement("div");return s.classList.add("form-group","mb-1","w-full"),e&&(e.classList.add("text-xs"),t.type==="checkbox"&&(t.classList.add("form-checkbox","text-xs","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormCheckboxControl(e,t,!1,n)),t.type==="radio"&&(t.classList.add("form-radio","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormRadioControl(e,t,!1,n)),s.appendChild(e),!["checkbox","radio"].includes(t.type)&&n&&s.appendChild(n)),["checkbox","radio"].includes(t.type)||(this.options.input_size==="small"?t.classList.add("text-xs"):this.options.input_size==="normal"?t.classList.add("text-base"):this.options.input_size==="large"&&t.classList.add("text-xl"),s.appendChild(t)),r&&s.appendChild(r),s}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("text-sm"),e}getButtonHolder(){const e=document.createElement("div");return e.classList.add("flex","relative","inline-flex","align-middle"),e}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("inline-block","align-middle","text-center","text-sm","bg-blue-700","text-white","py-1","pr-1","m-2","shadow","select-none","whitespace-no-wrap","rounded"),n}getInfoButton(e){const t=document.createElement("a");t.classList.add("tooltips","float-right"),t.innerHTML="";const r=document.createElement("span");return r.innerHTML=e,t.appendChild(r),t}getTable(){const e=super.getTable();return this.options.table_border?e.classList.add("je-table-border"):e.classList.add("table","border","p-0"),e}getTableRow(){const e=super.getTableRow();return this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("je-table-zebra"),e}getTableHeaderCell(e){const t=super.getTableHeaderCell(e);return this.options.table_border?t.classList.add("je-table-border"):this.options.table_hdiv?t.classList.add("je-table-hdiv"):t.classList.add("text-xs","border","p-0","m-0"),t}getTableCell(){const e=super.getTableCell();return this.options.table_border?e.classList.add("je-table-border"):this.options.table_hdiv?e.classList.add("je-table-hdiv"):e.classList.add("border-0","p-0","m-0"),e}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.controlgroup.classList.add("text-red-600"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("block","mt-1","text-xs","text-red"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t)}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("text-red-600"),e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const t=document.createElement("div"),r=typeof e>"u"?"":e;return t.innerHTML=`<div class='w-2/12' id='${r}'><ul class='list-reset pl-0 mb-0'></ul></div><div class='w-10/12' id='${r}'></div>`,t.classList.add("flex"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='nav-tabs flex list-reset pl-0 mb-0 border-b border-grey-light' id='${t}'></ul><div class='p-6 block' id='${t}'></div>`,r}getTab(e,t){const r=document.createElement("li");r.classList.add("nav-item","flex-col","text-center","text-white","bg-blue-500","shadow-md","border","p-2","mb-2","mr-2","hover:bg-blue-400","rounded");const n=document.createElement("a");return n.classList.add("nav-link","text-center"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.classList.add("nav-item","flex","border-l","border-t","border-r");const n=document.createElement("a");return n.classList.add("nav-link","-mb-px","flex-row","text-center","bg-white","p-2","hover:bg-blue-400","rounded-t"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("block"),e.tab.firstChild.classList.contains("border-b")===!0?(e.tab.firstChild.classList.add("border-b-0"),e.tab.firstChild.classList.remove("border-b")):e.tab.firstChild.classList.add("border-b-0"),e.container.classList.contains("hidden")===!0&&e.container.classList.remove("hidden"),e.container.classList.add("block")}markTabInactive(e){e.tab.firstChild.classList.contains("border-b-0")===!0?(e.tab.firstChild.classList.add("border-b"),e.tab.firstChild.classList.remove("border-b-0")):e.tab.firstChild.classList.add("border-b"),e.container.classList.contains("block")===!0&&(e.container.classList.remove("block"),e.container.classList.add("hidden"))}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("bg-blue","leading-none","py-1","text-xs","text-center","text-white"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","bg-blue","leading-none","py-1","text-xs","text-center","text-white","block"),t.removeAttribute("aria-valuenow"),t.classList.add("w-full"),t.innerHTML=""}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("relative","items-stretch","w-full"),r.appendChild(e);const n=document.createElement("div");n.classList.add("-mr-1"),r.appendChild(n);for(let s=0;s<t.length;s++)n.appendChild(t[s]);return r}}E_e.rules=IHe;const PHe={html:g_e,bootstrap3:y_e,bootstrap4:v_e,bootstrap5:b_e,jqueryui:__e,barebones:x_e,spectre:w_e,tailwind:E_e},FHe={".table-responsive .autocomplete-result-list":"position:relative%20!important",".je-float-right-linkholder":"float:right;margin-left:10px",".je-modal":"background-color:white;border:1px%20solid%20black;box-shadow:3px%203px%20black;position:absolute;z-index:10",".je-infobutton-icon":"font-size:16px;font-weight:bold;padding:0.25rem;position:relative;display:inline-block",".je-infobutton-tooltip":"font-size:12px;font-weight:normal;font-family:sans-serif;visibility:hidden;background-color:rgba(50%2C%2050%2C%2050%2C%200.75);margin:0%200.25rem;color:%23fafafa;padding:0.5rem%201rem;border-radius:0.25rem;width:20rem;position:absolute",".je-not-loaded":"pointer-events:none",".je-header":"display:inline-block",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-checkbox":"display:inline-block;width:auto",".je-checkbox-control--compact":"display:inline-block;margin-right:1rem",".je-radio":"display:inline-block;width:auto",".je-radio-control--compact":"display:inline-block;margin-right:1rem",".je-switcher":"background-color:transparent;display:inline-block;font-style:italic;font-weight:normal;height:auto;width:auto;margin-bottom:0;margin-left:5px;padding:0%200%200%203px",".je-textarea":"width:100%25;height:300px;box-sizing:border-box",".je-range-control":"text-align:center",".je-indented-panel":"padding-left:10px;margin-left:10px;border-left:1px%20solid%20%23ccc",".je-indented-panel--top":"padding-left:10px;margin-left:10px",".je-tabholder":"float:left;width:130px",".je-tabholder .content":"margin-left:120px",".je-tabholder--top":"margin-left:10px",".je-tabholder--clear":"clear:both",".je-tab":"border:1px%20solid%20%23ccc;border-width:1px%200%201px%201px;text-align:center;line-height:30px;border-radius:5px;border-bottom-right-radius:0;border-top-right-radius:0;font-weight:bold;cursor:pointer",".je-tab--top":"float:left;border:1px%20solid%20%23ccc;border-width:1px%201px%200px%201px;text-align:center;line-height:30px;border-radius:5px;padding-left:5px;padding-right:5px;border-bottom-right-radius:0;border-bottom-left-radius:0;font-weight:bold;cursor:pointer",".je-block-link":"display:block",".je-media":"width:100%25"};class hn{constructor(e,t={}){if(!(e instanceof Element))throw new Error("element should be an instance of Element");this.element=e,this.options=ki({},hn.defaults.options,t),this.ready=!1,this.copyClipboard=null,this.schema=this.options.schema,this.template=this.options.template,this.translate=this.options.translate||hn.defaults.translate,this.translateProperty=this.options.translateProperty||hn.defaults.translateProperty,this.uuid=0,this.__data={};const r=this.options.theme||hn.defaults.theme,n=hn.defaults.themes[r];if(!n)throw new Error(`Unknown theme ${r}`);this.element.setAttribute("data-theme",r),this.element.classList.add("je-not-loaded"),this.element.classList.remove("je-ready"),this.theme=new n(this);const s=ki(FHe,this.getEditorsRules()),o=(l,u,c)=>c?this.addNewStyleRulesToShadowRoot(l,u,c):this.addNewStyleRules(l,u);if(!this.theme.options.disable_theme_rules){const l=o_e(this.element);o("default",s,l),typeof n.rules<"u"&&o(r,n.rules,l)}const a=hn.defaults.iconlibs[this.options.iconlib||hn.defaults.iconlib];a&&(this.iconlib=new a),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.promise=this.load()}async load(){const e=document.location.origin+document.location.pathname.toString(),t=new zqe(this.options);t.onSchemaLoaded=a=>{this.trigger("schemaLoaded",a)},t.onAllSchemasLoaded=()=>{this.trigger("allSchemasLoaded")},this.expandSchema=a=>t.expandSchema(a),this.expandRefs=(a,l)=>t.expandRefs(a,l);const r=document.location.toString(),n=await t.load(this.schema,e,r),s=this.options.custom_validators?{custom_validators:this.options.custom_validators}:{};this.validator=new h_e(this,null,s,hn.defaults);const o=this.getEditorClass(n);this.root=this.createEditor(o,{jsoneditor:this,schema:n,required:!0,container:this.root_container}),this.root.preBuild(),this.root.build(),this.root.postBuild(),Rl(this.options,"startval")&&this.root.setValue(this.options.startval),this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.ready=!0,this.element.classList.remove("je-not-loaded"),this.element.classList.add("je-ready"),window.requestAnimationFrame(()=>{this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.trigger("ready"),this.trigger("change"))})}getValue(){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.getValue()}setValue(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.setValue(e),this}validate(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return arguments.length===1?this.validator.validate(e):this.validation_results}destroy(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.element.removeAttribute("data-theme"),this.destroyed=!0)}on(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this}off(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];const r=[];for(let n=0;n<this.callbacks[e].length;n++)this.callbacks[e][n]!==t&&r.push(this.callbacks[e][n]);this.callbacks[e]=r}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this}trigger(e,t){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(let r=0;r<this.callbacks[e].length;r++)this.callbacks[e][r].apply(this,[t]);return this}setOption(e,t){if(e==="show_errors")this.options.show_errors=t,this.onChange();else throw new Error(`Option ${e} must be set during instantiation and cannot be changed later`);return this}getEditorsRules(){const e=(t,r)=>r.rules?ki(t,r.rules):t;return Object.values(hn.defaults.editors).reduce(e,{})}getEditorClass(e){let t;if(e=this.expandSchema(e),hn.defaults.resolvers.find(r=>(t=r(e,this),t&&hn.defaults.editors[t])),!t)throw new Error(`Unknown editor for schema ${JSON.stringify(e)}`);if(!hn.defaults.editors[t])throw new Error(`Unknown editor ${t}`);return hn.defaults.editors[t]}createEditor(e,t,r=1){return t=ki({},e.options||{},t),new e(t,hn.defaults,r)}onChange(e){if(this.ready&&(e&&this.trigger(e.event,e.data),!this.firing_change))return this.firing_change=!0,window.requestAnimationFrame(()=>{this.firing_change=!1,this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.options.show_errors!=="never"?this.root.showValidationErrors(this.validation_results):this.root.showValidationErrors([]),this.trigger("change"))}),this}compileTemplate(e,t=hn.defaults.template){let r;if(typeof t=="string"){if(!hn.defaults.templates[t])throw new Error(`Unknown template engine ${t}`);if(r=hn.defaults.templates[t](),!r)throw new Error(`Template engine ${t} missing required library.`)}else r=t;if(!r)throw new Error("No template engine set");if(!r.compile)throw new Error("Invalid template engine set");return r.compile(e)}_data(e,t,r){if(arguments.length===3){let n;e.hasAttribute(`data-jsoneditor-${t}`)?n=e.getAttribute(`data-jsoneditor-${t}`):(n=this.uuid++,e.setAttribute(`data-jsoneditor-${t}`,n)),this.__data[n]=r}else return e.hasAttribute(`data-jsoneditor-${t}`)?this.__data[e.getAttribute(`data-jsoneditor-${t}`)]:null}registerEditor(e){return this.editors=this.editors||{},this.editors[e.path]=e,this}unregisterEditor(e){return this.editors=this.editors||{},this.editors[e.path]=null,this}getEditor(e){if(this.editors)return this.editors[e]}watch(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this}unwatch(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;const r=[];for(let n=0;n<this.watchlist[e].length;n++)this.watchlist[e][n]!==t&&r.push(this.watchlist[e][n]);return this.watchlist[e]=r.length?r:null,this}notifyWatchers(e){if(!this.watchlist||!this.watchlist[e])return this;for(let t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()}isEnabled(){return!this.root||this.root.isEnabled()}enable(){this.root.enable()}disable(){this.root.disable()}setCopyClipboardContents(e){this.copyClipboard=e}getCopyClipboardContents(){return this.copyClipboard}addNewStyleRules(e,t){let r=document.querySelector(`#theme-${e}`);r||(r=document.createElement("style"),r.setAttribute("id",`theme-${e}`),r.appendChild(document.createTextNode("")),document.head.appendChild(r));const n=r.sheet?r.sheet:r.styleSheet,s=this.element.nodeName.toLowerCase();for(;n.cssRules.length>0;)n.deleteRule(0);Object.keys(t).forEach(o=>{const a=e==="default"?o:`${s}[data-theme="${e}"] ${o}`;n.insertRule?n.insertRule(a+" {"+decodeURIComponent(t[o])+"}",0):n.addRule&&n.addRule(a,decodeURIComponent(t[o]),0)})}addNewStyleRulesToShadowRoot(e,t,r){const n=this.element.nodeName.toLowerCase();let s="";Object.keys(t).forEach(a=>{const l=e==="default"?a:`${n}[data-theme="${e}"] ${a}`;s+=l+" {"+decodeURIComponent(t[a])+`}
`});const o=new CSSStyleSheet;o.replaceSync(s),r.adoptedStyleSheets=[...r.adoptedStyleSheets,o]}}hn.defaults=hm;hn.AbstractEditor=fa;hn.AbstractTheme=vd;hn.AbstractIconLib=yd;Object.assign(hn.defaults.themes,PHe);Object.assign(hn.defaults.editors,QS);Object.assign(hn.defaults.templates,Kqe);Object.assign(hn.defaults.iconlibs,EHe);var S_e={exports:{}};/**
 * easymde v2.18.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */(function(i,e){(function(t){i.exports=t()})(function(){return function t(r,n,s){function o(u,c){if(!n[u]){if(!r[u]){var h=typeof yE=="function"&&yE;if(!c&&h)return h(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var p=n[u]={exports:{}};r[u][0].call(p.exports,function(m){return o(r[u][1][m]||m)},p,p.exports,t,r,n,s)}return n[u].exports}for(var a=typeof yE=="function"&&yE,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,n){},{}],2:[function(t,r,n){var s=t("typo-js");function o(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!o.aff_loading){o.aff_loading=!0;var u=new XMLHttpRequest;u.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),u.onload=function(){u.readyState===4&&u.status===200&&(o.aff_data=u.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},u.send(null)}if(!o.dic_loading){o.dic_loading=!0;var c=new XMLHttpRequest;c.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),c.onload=function(){c.readyState===4&&c.status===200&&(o.dic_data=c.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},c.send(null)}var h='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(m){var g=m.peek(),v="";if(h.includes(g))return m.next(),null;for(;(g=m.peek())!=null&&!h.includes(g);)v+=g,m.next();return o.typo&&!o.typo.check(v)?"spell-error":null}},p=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(p,d,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}o.num_loaded=0,o.aff_loading=!1,o.dic_loading=!1,o.aff_data="",o.dic_data="",o.typo,r.exports=o},{"typo-js":16}],3:[function(t,r,n){(function(s){function o(a,l){clearTimeout(l.timeout),s.off(window,"mouseup",l.hurry),s.off(window,"keyup",l.hurry)}s.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(o(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(u,c){function h(){u.display.wrapper.offsetHeight?(o(0,c),u.display.lastWrapHeight!=u.display.wrapper.clientHeight&&u.refresh()):c.timeout=setTimeout(h,c.delay)}c.timeout=setTimeout(h,c.delay),c.hurry=function(){clearTimeout(c.timeout),c.timeout=setTimeout(h,50)},s.on(window,"mouseup",c.hurry),s.on(window,"keyup",c.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(t,r,n){(function(s){s.defineOption("fullScreen",!1,function(o,a,l){l==s.Init&&(l=!1),!l!=!a&&(a?function(u){var c=u.getWrapperElement();u.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:c.style.width,height:c.style.height},c.style.width="",c.style.height="auto",c.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",u.refresh()}(o):function(u){var c=u.getWrapperElement();c.className=c.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var h=u.state.fullScreenRestore;c.style.width=h.width,c.style.height=h.height,window.scrollTo(h.scrollLeft,h.scrollTop),u.refresh()}(o))})})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(t,r,n){(function(s){function o(h){h.state.placeholder&&(h.state.placeholder.parentNode.removeChild(h.state.placeholder),h.state.placeholder=null)}function a(h){o(h);var d=h.state.placeholder=document.createElement("pre");d.style.cssText="height: 0; overflow: visible",d.style.direction=h.getOption("direction"),d.className="CodeMirror-placeholder CodeMirror-line-like";var p=h.getOption("placeholder");typeof p=="string"&&(p=document.createTextNode(p)),d.appendChild(p),h.display.lineSpace.insertBefore(d,h.display.lineSpace.firstChild)}function l(h){c(h)&&a(h)}function u(h){var d=h.getWrapperElement(),p=c(h);d.className=d.className.replace(" CodeMirror-empty","")+(p?" CodeMirror-empty":""),p?a(h):o(h)}function c(h){return h.lineCount()===1&&h.getLine(0)===""}s.defineOption("placeholder","",function(h,d,p){var m=p&&p!=s.Init;if(d&&!m)h.on("blur",l),h.on("change",u),h.on("swapDoc",u),s.on(h.getInputField(),"compositionupdate",h.state.placeholderCompose=function(){(function(v){setTimeout(function(){var b=!1;if(v.lineCount()==1){var _=v.getInputField();b=_.nodeName=="TEXTAREA"?!v.getLine(0).length:!/[^\u200b]/.test(_.querySelector(".CodeMirror-line").textContent)}b?a(v):o(v)},20)})(h)}),u(h);else if(!d&&m){h.off("blur",l),h.off("change",u),h.off("swapDoc",u),s.off(h.getInputField(),"compositionupdate",h.state.placeholderCompose),o(h);var g=h.getWrapperElement();g.className=g.className.replace(" CodeMirror-empty","")}d&&!h.hasFocus()&&l(h)})})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(t,r,n){(function(s){var o=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function u(c,h){var d=h.line,p=0,m=0,g=o.exec(c.getLine(d)),v=g[1];do{var b=d+(p+=1),_=c.getLine(b),E=o.exec(_);if(E){var C=E[1],T=parseInt(g[3],10)+p-m,D=parseInt(E[3],10),M=D;if(v!==C||isNaN(D)){if(v.length>C.length||v.length<C.length&&p===1)return;m+=1}else T===D&&(M=D+1),T>D&&(M=T+1),c.replaceRange(_.replace(o,C+M+E[4]+E[5]),{line:b,ch:0},{line:b,ch:_.length})}}while(E)}s.commands.newlineAndIndentContinueMarkdownList=function(c){if(c.getOption("disableInput"))return s.Pass;for(var h=c.listSelections(),d=[],p=0;p<h.length;p++){var m=h[p].head,g=c.getStateAfter(m.line),v=s.innerMode(c.getMode(),g);if(v.mode.name!=="markdown"&&v.mode.helperType!=="markdown")return void c.execCommand("newlineAndIndent");var b=(g=v.state).list!==!1,_=g.quote!==0,E=c.getLine(m.line),C=o.exec(E),T=/^\s*$/.test(E.slice(0,m.ch));if(!h[p].empty()||!b&&!_||!C||T)return void c.execCommand("newlineAndIndent");if(a.test(E)){var D=_&&/>\s*$/.test(E),M=!/>\s*$/.test(E);(D||M)&&c.replaceRange("",{line:m.line,ch:0},{line:m.line,ch:m.ch+1}),d[p]=`
`}else{var A=C[1],I=C[5],P=!(l.test(C[2])||C[2].indexOf(">")>=0),U=P?parseInt(C[3],10)+1+C[4]:C[2].replace("x"," ");d[p]=`
`+A+U+I,P&&u(c,m)}}c.replaceSelections(d)}})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(t,r,n){(function(s){s.overlayMode=function(o,a,l){return{startState:function(){return{base:s.startState(o),overlay:s.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(u){return{base:s.copyState(o,u.base),overlay:s.copyState(a,u.overlay),basePos:u.basePos,baseCur:null,overlayPos:u.overlayPos,overlayCur:null}},token:function(u,c){return(u!=c.streamSeen||Math.min(c.basePos,c.overlayPos)<u.start)&&(c.streamSeen=u,c.basePos=c.overlayPos=u.start),u.start==c.basePos&&(c.baseCur=o.token(u,c.base),c.basePos=u.pos),u.start==c.overlayPos&&(u.pos=u.start,c.overlayCur=a.token(u,c.overlay),c.overlayPos=u.pos),u.pos=Math.min(c.basePos,c.overlayPos),c.overlayCur==null?c.baseCur:c.baseCur!=null&&c.overlay.combineTokens||l&&c.overlay.combineTokens==null?c.baseCur+" "+c.overlayCur:c.overlayCur},indent:o.indent&&function(u,c,h){return o.indent(u.base,c,h)},electricChars:o.electricChars,innerMode:function(u){return{state:u.base,mode:o}},blankLine:function(u){var c,h;return o.blankLine&&(c=o.blankLine(u.base)),a.blankLine&&(h=a.blankLine(u.overlay)),h==null?c:l&&c!=null?c+" "+h:h}}}})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(t,r,n){(function(s){var o,a,l=s.Pos;function u(C,T){for(var D=function(I){var P=I.flags;return P??(I.ignoreCase?"i":"")+(I.global?"g":"")+(I.multiline?"m":"")}(C),M=D,A=0;A<T.length;A++)M.indexOf(T.charAt(A))==-1&&(M+=T.charAt(A));return D==M?C:new RegExp(C.source,M)}function c(C){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(C.source)}function h(C,T,D){T=u(T,"g");for(var M=D.line,A=D.ch,I=C.lastLine();M<=I;M++,A=0){T.lastIndex=A;var P=C.getLine(M),U=T.exec(P);if(U)return{from:l(M,U.index),to:l(M,U.index+U[0].length),match:U}}}function d(C,T,D){if(!c(T))return h(C,T,D);T=u(T,"gm");for(var M,A=1,I=D.line,P=C.lastLine();I<=P;){for(var U=0;U<A&&!(I>P);U++){var K=C.getLine(I++);M=M==null?K:M+`
`+K}A*=2,T.lastIndex=D.ch;var L=T.exec(M);if(L){var F=M.slice(0,L.index).split(`
`),$=L[0].split(`
`),H=D.line+F.length-1,V=F[F.length-1].length;return{from:l(H,V),to:l(H+$.length-1,$.length==1?V+$[0].length:$[$.length-1].length),match:L}}}}function p(C,T,D){for(var M,A=0;A<=C.length;){T.lastIndex=A;var I=T.exec(C);if(!I)break;var P=I.index+I[0].length;if(P>C.length-D)break;(!M||P>M.index+M[0].length)&&(M=I),A=I.index+1}return M}function m(C,T,D){T=u(T,"g");for(var M=D.line,A=D.ch,I=C.firstLine();M>=I;M--,A=-1){var P=C.getLine(M),U=p(P,T,A<0?0:P.length-A);if(U)return{from:l(M,U.index),to:l(M,U.index+U[0].length),match:U}}}function g(C,T,D){if(!c(T))return m(C,T,D);T=u(T,"gm");for(var M,A=1,I=C.getLine(D.line).length-D.ch,P=D.line,U=C.firstLine();P>=U;){for(var K=0;K<A&&P>=U;K++){var L=C.getLine(P--);M=M==null?L:L+`
`+M}A*=2;var F=p(M,T,I);if(F){var $=M.slice(0,F.index).split(`
`),H=F[0].split(`
`),V=P+$.length,J=$[$.length-1].length;return{from:l(V,J),to:l(V+H.length-1,H.length==1?J+H[0].length:H[H.length-1].length),match:F}}}}function v(C,T,D,M){if(C.length==T.length)return D;for(var A=0,I=D+Math.max(0,C.length-T.length);;){if(A==I)return A;var P=A+I>>1,U=M(C.slice(0,P)).length;if(U==D)return P;U>D?I=P:A=P+1}}function b(C,T,D,M){if(!T.length)return null;var A=M?o:a,I=A(T).split(/\r|\n\r?/);e:for(var P=D.line,U=D.ch,K=C.lastLine()+1-I.length;P<=K;P++,U=0){var L=C.getLine(P).slice(U),F=A(L);if(I.length==1){var $=F.indexOf(I[0]);if($==-1)continue e;return D=v(L,F,$,A)+U,{from:l(P,v(L,F,$,A)+U),to:l(P,v(L,F,$+I[0].length,A)+U)}}var H=F.length-I[0].length;if(F.slice(H)==I[0]){for(var V=1;V<I.length-1;V++)if(A(C.getLine(P+V))!=I[V])continue e;var J=C.getLine(P+I.length-1),ee=A(J),ie=I[I.length-1];if(ee.slice(0,ie.length)==ie)return{from:l(P,v(L,F,H,A)+U),to:l(P+I.length-1,v(J,ee,ie.length,A))}}}}function _(C,T,D,M){if(!T.length)return null;var A=M?o:a,I=A(T).split(/\r|\n\r?/);e:for(var P=D.line,U=D.ch,K=C.firstLine()-1+I.length;P>=K;P--,U=-1){var L=C.getLine(P);U>-1&&(L=L.slice(0,U));var F=A(L);if(I.length==1){var $=F.lastIndexOf(I[0]);if($==-1)continue e;return{from:l(P,v(L,F,$,A)),to:l(P,v(L,F,$+I[0].length,A))}}var H=I[I.length-1];if(F.slice(0,H.length)==H){var V=1;for(D=P-I.length+1;V<I.length-1;V++)if(A(C.getLine(D+V))!=I[V])continue e;var J=C.getLine(P+1-I.length),ee=A(J);if(ee.slice(ee.length-I[0].length)==I[0])return{from:l(P+1-I.length,v(J,ee,J.length-I[0].length,A)),to:l(P,v(L,F,H.length,A))}}}}function E(C,T,D,M){var A;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=C,D=D?C.clipPos(D):l(0,0),this.pos={from:D,to:D},typeof M=="object"?A=M.caseFold:(A=M,M=null),typeof T=="string"?(A==null&&(A=!1),this.matches=function(I,P){return(I?_:b)(C,T,P,A)}):(T=u(T,"gm"),M&&M.multiline===!1?this.matches=function(I,P){return(I?m:h)(C,T,P)}:this.matches=function(I,P){return(I?g:d)(C,T,P)})}String.prototype.normalize?(o=function(C){return C.normalize("NFD").toLowerCase()},a=function(C){return C.normalize("NFD")}):(o=function(C){return C.toLowerCase()},a=function(C){return C}),E.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(C){var T=this.doc.clipPos(C?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(T=l(T.line,T.ch),C?(T.ch--,T.ch<0&&(T.line--,T.ch=(this.doc.getLine(T.line)||"").length)):(T.ch++,T.ch>(this.doc.getLine(T.line)||"").length&&(T.ch=0,T.line++)),s.cmpPos(T,this.doc.clipPos(T))!=0))return this.atOccurrence=!1;var D=this.matches(C,T);if(this.afterEmptyMatch=D&&s.cmpPos(D.from,D.to)==0,D)return this.pos=D,this.atOccurrence=!0,this.pos.match||!0;var M=l(C?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:M,to:M},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(C,T){if(this.atOccurrence){var D=s.splitLines(C);this.doc.replaceRange(D,this.pos.from,this.pos.to,T),this.pos.to=l(this.pos.from.line+D.length-1,D[D.length-1].length+(D.length==1?this.pos.from.ch:0))}}},s.defineExtension("getSearchCursor",function(C,T,D){return new E(this.doc,C,T,D)}),s.defineDocExtension("getSearchCursor",function(C,T,D){return new E(this,C,T,D)}),s.defineExtension("selectMatches",function(C,T){for(var D=[],M=this.getSearchCursor(C,this.getCursor("from"),T);M.findNext()&&!(s.cmpPos(M.to(),this.getCursor("to"))>0);)D.push({anchor:M.from(),head:M.to()});D.length&&this.setSelections(D,0)})})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(t,r,n){(function(s){function o(p){p.state.markedSelection&&p.operation(function(){(function(m){if(!m.somethingSelected())return h(m);if(m.listSelections().length>1)return d(m);var g=m.getCursor("start"),v=m.getCursor("end"),b=m.state.markedSelection;if(!b.length)return c(m,g,v);var _=b[0].find(),E=b[b.length-1].find();if(!_||!E||v.line-g.line<=8||u(g,E.to)>=0||u(v,_.from)<=0)return d(m);for(;u(g,_.from)>0;)b.shift().clear(),_=b[0].find();for(u(g,_.from)<0&&(_.to.line-g.line<8?(b.shift().clear(),c(m,g,_.to,0)):c(m,g,_.from,0));u(v,E.to)<0;)b.pop().clear(),E=b[b.length-1].find();u(v,E.to)>0&&(v.line-E.from.line<8?(b.pop().clear(),c(m,E.from,v)):c(m,E.to,v))})(p)})}function a(p){p.state.markedSelection&&p.state.markedSelection.length&&p.operation(function(){h(p)})}s.defineOption("styleSelectedText",!1,function(p,m,g){var v=g&&g!=s.Init;m&&!v?(p.state.markedSelection=[],p.state.markedSelectionStyle=typeof m=="string"?m:"CodeMirror-selectedtext",d(p),p.on("cursorActivity",o),p.on("change",a)):!m&&v&&(p.off("cursorActivity",o),p.off("change",a),h(p),p.state.markedSelection=p.state.markedSelectionStyle=null)});var l=s.Pos,u=s.cmpPos;function c(p,m,g,v){if(u(m,g)!=0)for(var b=p.state.markedSelection,_=p.state.markedSelectionStyle,E=m.line;;){var C=E==m.line?m:l(E,0),T=E+8,D=T>=g.line,M=D?g:l(T,0),A=p.markText(C,M,{className:_});if(v==null?b.push(A):b.splice(v++,0,A),D)break;E=T}}function h(p){for(var m=p.state.markedSelection,g=0;g<m.length;++g)m[g].clear();m.length=0}function d(p){h(p);for(var m=p.listSelections(),g=0;g<m.length;g++)c(p,m[g].from(),m[g].to())}})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(t,r,n){(function(s,o){typeof n=="object"&&r!==void 0?r.exports=o():(s=s||self).CodeMirror=o()})(this,function(){var s=navigator.userAgent,o=navigator.platform,a=/gecko\/\d/i.test(s),l=/MSIE \d/.test(s),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(s),c=/Edge\/(\d+)/.exec(s),h=l||u||c,d=h&&(l?document.documentMode||6:+(c||u)[1]),p=!c&&/WebKit\//.test(s),m=p&&/Qt\/\d+\.\d+/.test(s),g=!c&&/Chrome\/(\d+)/.exec(s),v=g&&+g[1],b=/Opera\//.test(s),_=/Apple Computer/.test(navigator.vendor),E=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(s),C=/PhantomJS/.test(s),T=_&&(/Mobile\/\w+/.test(s)||navigator.maxTouchPoints>2),D=/Android/.test(s),M=T||D||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(s),A=T||/Mac/.test(o),I=/\bCrOS\b/.test(s),P=/win/i.test(o),U=b&&s.match(/Version\/(\d*\.\d*)/);U&&(U=Number(U[1])),U&&U>=15&&(b=!1,p=!0);var K=A&&(m||b&&(U==null||U<12.11)),L=a||h&&d>=9;function F(f){return new RegExp("(^|\\s)"+f+"(?:$|\\s)\\s*")}var $,H=function(f,y){var w=f.className,x=F(y).exec(w);if(x){var S=w.slice(x.index+x[0].length);f.className=w.slice(0,x.index)+(S?x[1]+S:"")}};function V(f){for(var y=f.childNodes.length;y>0;--y)f.removeChild(f.firstChild);return f}function J(f,y){return V(f).appendChild(y)}function ee(f,y,w,x){var S=document.createElement(f);if(w&&(S.className=w),x&&(S.style.cssText=x),typeof y=="string")S.appendChild(document.createTextNode(y));else if(y)for(var O=0;O<y.length;++O)S.appendChild(y[O]);return S}function ie(f,y,w,x){var S=ee(f,y,w,x);return S.setAttribute("role","presentation"),S}function de(f,y){if(y.nodeType==3&&(y=y.parentNode),f.contains)return f.contains(y);do if(y.nodeType==11&&(y=y.host),y==f)return!0;while(y=y.parentNode)}function te(f){var y;try{y=f.activeElement}catch{y=f.body||null}for(;y&&y.shadowRoot&&y.shadowRoot.activeElement;)y=y.shadowRoot.activeElement;return y}function z(f,y){var w=f.className;F(y).test(w)||(f.className+=(w?" ":"")+y)}function ne(f,y){for(var w=f.split(" "),x=0;x<w.length;x++)w[x]&&!F(w[x]).test(y)&&(y+=" "+w[x]);return y}$=document.createRange?function(f,y,w,x){var S=document.createRange();return S.setEnd(x||f,w),S.setStart(f,y),S}:function(f,y,w){var x=document.body.createTextRange();try{x.moveToElementText(f.parentNode)}catch{return x}return x.collapse(!0),x.moveEnd("character",w),x.moveStart("character",y),x};var ve=function(f){f.select()};function $e(f){return f.display.wrapper.ownerDocument}function Xe(f){return $e(f).defaultView}function ot(f){var y=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,y)}}function Be(f,y,w){for(var x in y||(y={}),f)!f.hasOwnProperty(x)||w===!1&&y.hasOwnProperty(x)||(y[x]=f[x]);return y}function He(f,y,w,x,S){y==null&&(y=f.search(/[^\s\u00a0]/))==-1&&(y=f.length);for(var O=x||0,N=S||0;;){var B=f.indexOf("	",O);if(B<0||B>=y)return N+(y-O);N+=B-O,N+=w-N%w,O=B+1}}T?ve=function(f){f.selectionStart=0,f.selectionEnd=f.value.length}:h&&(ve=function(f){try{f.select()}catch{}});var st=function(){this.id=null,this.f=null,this.time=0,this.handler=ot(this.onTimeout,this)};function xt(f,y){for(var w=0;w<f.length;++w)if(f[w]==y)return w;return-1}st.prototype.onTimeout=function(f){f.id=0,f.time<=+new Date?f.f():setTimeout(f.handler,f.time-+new Date)},st.prototype.set=function(f,y){this.f=y;var w=+new Date+f;(!this.id||w<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,f),this.time=w)};var kt={toString:function(){return"CodeMirror.Pass"}},Tt={scroll:!1},Ei={origin:"*mouse"},si={origin:"+move"};function ur(f,y,w){for(var x=0,S=0;;){var O=f.indexOf("	",x);O==-1&&(O=f.length);var N=O-x;if(O==f.length||S+N>=y)return x+Math.min(N,y-S);if(S+=O-x,x=O+1,(S+=w-S%w)>=y)return x}}var Ve=[""];function fe(f){for(;Ve.length<=f;)Ve.push(oe(Ve)+" ");return Ve[f]}function oe(f){return f[f.length-1]}function se(f,y){for(var w=[],x=0;x<f.length;x++)w[x]=y(f[x],x);return w}function pe(){}function R(f,y){var w;return Object.create?w=Object.create(f):(pe.prototype=f,w=new pe),y&&Be(y,w),w}var j=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(f){return/\w/.test(f)||f>""&&(f.toUpperCase()!=f.toLowerCase()||j.test(f))}function Q(f,y){return y?!!(y.source.indexOf("\\w")>-1&&Z(f))||y.test(f):Z(f)}function ge(f){for(var y in f)if(f.hasOwnProperty(y)&&f[y])return!1;return!0}var be=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ce(f){return f.charCodeAt(0)>=768&&be.test(f)}function G(f,y,w){for(;(w<0?y>0:y<f.length)&&Ce(f.charAt(y));)y+=w;return y}function re(f,y,w){for(var x=y>w?-1:1;;){if(y==w)return y;var S=(y+w)/2,O=x<0?Math.ceil(S):Math.floor(S);if(O==y)return f(O)?y:w;f(O)?w=O:y=O+x}}var he=null;function ce(f,y,w){var x;he=null;for(var S=0;S<f.length;++S){var O=f[S];if(O.from<y&&O.to>y)return S;O.to==y&&(O.from!=O.to&&w=="before"?x=S:he=S),O.from==y&&(O.from!=O.to&&w!="before"?x=S:he=S)}return x??he}var Te=function(){var f=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,y=/[stwN]/,w=/[LRr]/,x=/[Lb1n]/,S=/[1n]/;function O(N,B,W){this.level=N,this.from=B,this.to=W}return function(N,B){var W=B=="ltr"?"L":"R";if(N.length==0||B=="ltr"&&!f.test(N))return!1;for(var Y,le=N.length,ue=[],xe=0;xe<le;++xe)ue.push((Y=N.charCodeAt(xe))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Y):1424<=Y&&Y<=1524?"R":1536<=Y&&Y<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Y-1536):1774<=Y&&Y<=2220?"r":8192<=Y&&Y<=8203?"w":Y==8204?"b":"L");for(var _e=0,Pe=W;_e<le;++_e){var Fe=ue[_e];Fe=="m"?ue[_e]=Pe:Pe=Fe}for(var Ie=0,ze=W;Ie<le;++Ie){var Je=ue[Ie];Je=="1"&&ze=="r"?ue[Ie]="n":w.test(Je)&&(ze=Je,Je=="r"&&(ue[Ie]="R"))}for(var Ye=1,ct=ue[0];Ye<le-1;++Ye){var lt=ue[Ye];lt=="+"&&ct=="1"&&ue[Ye+1]=="1"?ue[Ye]="1":lt!=","||ct!=ue[Ye+1]||ct!="1"&&ct!="n"||(ue[Ye]=ct),ct=lt}for(var ft=0;ft<le;++ft){var li=ue[ft];if(li==",")ue[ft]="N";else if(li=="%"){var Ct=void 0;for(Ct=ft+1;Ct<le&&ue[Ct]=="%";++Ct);for(var Oi=ft&&ue[ft-1]=="!"||Ct<le&&ue[Ct]=="1"?"1":"N",ii=ft;ii<Ct;++ii)ue[ii]=Oi;ft=Ct-1}}for(var Ki=0,Tr=W;Ki<le;++Ki){var Ji=ue[Ki];Tr=="L"&&Ji=="1"?ue[Ki]="L":w.test(Ji)&&(Tr=Ji)}for(var Ui=0;Ui<le;++Ui)if(y.test(ue[Ui])){var Qi=void 0;for(Qi=Ui+1;Qi<le&&y.test(ue[Qi]);++Qi);for(var Ci=(Ui?ue[Ui-1]:W)=="L",Ar=Ci==((Qi<le?ue[Qi]:W)=="L")?Ci?"L":"R":W,vi=Ui;vi<Qi;++vi)ue[vi]=Ar;Ui=Qi-1}for(var Vi,Di=[],dr=0;dr<le;)if(x.test(ue[dr])){var qs=dr;for(++dr;dr<le&&x.test(ue[dr]);++dr);Di.push(new O(0,qs,dr))}else{var kr=dr,Rs=Di.length,Is=B=="rtl"?1:0;for(++dr;dr<le&&ue[dr]!="L";++dr);for(var yn=kr;yn<dr;)if(S.test(ue[yn])){kr<yn&&(Di.splice(Rs,0,new O(1,kr,yn)),Rs+=Is);var Hs=yn;for(++yn;yn<dr&&S.test(ue[yn]);++yn);Di.splice(Rs,0,new O(2,Hs,yn)),Rs+=Is,kr=yn}else++yn;kr<dr&&Di.splice(Rs,0,new O(1,kr,dr))}return B=="ltr"&&(Di[0].level==1&&(Vi=N.match(/^\s+/))&&(Di[0].from=Vi[0].length,Di.unshift(new O(0,0,Vi[0].length))),oe(Di).level==1&&(Vi=N.match(/\s+$/))&&(oe(Di).to-=Vi[0].length,Di.push(new O(0,le-Vi[0].length,le)))),B=="rtl"?Di.reverse():Di}}();function Ae(f,y){var w=f.order;return w==null&&(w=f.order=Te(f.text,y)),w}var Se=[],De=function(f,y,w){if(f.addEventListener)f.addEventListener(y,w,!1);else if(f.attachEvent)f.attachEvent("on"+y,w);else{var x=f._handlers||(f._handlers={});x[y]=(x[y]||Se).concat(w)}};function Oe(f,y){return f._handlers&&f._handlers[y]||Se}function Ge(f,y,w){if(f.removeEventListener)f.removeEventListener(y,w,!1);else if(f.detachEvent)f.detachEvent("on"+y,w);else{var x=f._handlers,S=x&&x[y];if(S){var O=xt(S,w);O>-1&&(x[y]=S.slice(0,O).concat(S.slice(O+1)))}}}function et(f,y){var w=Oe(f,y);if(w.length)for(var x=Array.prototype.slice.call(arguments,2),S=0;S<w.length;++S)w[S].apply(null,x)}function ht(f,y,w){return typeof y=="string"&&(y={type:y,preventDefault:function(){this.defaultPrevented=!0}}),et(f,w||y.type,f,y),Vt(y)||y.codemirrorIgnore}function Ut(f){var y=f._handlers&&f._handlers.cursorActivity;if(y)for(var w=f.curOp.cursorActivityHandlers||(f.curOp.cursorActivityHandlers=[]),x=0;x<y.length;++x)xt(w,y[x])==-1&&w.push(y[x])}function gt(f,y){return Oe(f,y).length>0}function qt(f){f.prototype.on=function(y,w){De(this,y,w)},f.prototype.off=function(y,w){Ge(this,y,w)}}function Kt(f){f.preventDefault?f.preventDefault():f.returnValue=!1}function It(f){f.stopPropagation?f.stopPropagation():f.cancelBubble=!0}function Vt(f){return f.defaultPrevented!=null?f.defaultPrevented:f.returnValue==0}function Yt(f){Kt(f),It(f)}function Yi(f){return f.target||f.srcElement}function vr(f){var y=f.which;return y==null&&(1&f.button?y=1:2&f.button?y=3:4&f.button&&(y=2)),A&&f.ctrlKey&&y==1&&(y=3),y}var Jr,Rr,cr=function(){if(h&&d<9)return!1;var f=ee("div");return"draggable"in f||"dragDrop"in f}();function Jt(f){if(Jr==null){var y=ee("span","");J(f,ee("span",[y,document.createTextNode("x")])),f.firstChild.offsetHeight!=0&&(Jr=y.offsetWidth<=1&&y.offsetHeight>2&&!(h&&d<8))}var w=Jr?ee("span",""):ee("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return w.setAttribute("cm-text",""),w}function ir(f){if(Rr!=null)return Rr;var y=J(f,document.createTextNode("AA")),w=$(y,0,1).getBoundingClientRect(),x=$(y,1,2).getBoundingClientRect();return V(f),!(!w||w.left==w.right)&&(Rr=x.right-w.right<3)}var Ir,hi=`

b`.split(/\n/).length!=3?function(f){for(var y=0,w=[],x=f.length;y<=x;){var S=f.indexOf(`
`,y);S==-1&&(S=f.length);var O=f.slice(y,f.charAt(S-1)=="\r"?S-1:S),N=O.indexOf("\r");N!=-1?(w.push(O.slice(0,N)),y+=N+1):(w.push(O),y=S+1)}return w}:function(f){return f.split(/\r\n?|\n/)},Fn=window.getSelection?function(f){try{return f.selectionStart!=f.selectionEnd}catch{return!1}}:function(f){var y;try{y=f.ownerDocument.selection.createRange()}catch{}return!(!y||y.parentElement()!=f)&&y.compareEndPoints("StartToEnd",y)!=0},rr="oncopy"in(Ir=ee("div"))||(Ir.setAttribute("oncopy","return;"),typeof Ir.oncopy=="function"),Nn=null,nr={},$r={};function bo(f,y){arguments.length>2&&(y.dependencies=Array.prototype.slice.call(arguments,2)),nr[f]=y}function ye(f){if(typeof f=="string"&&$r.hasOwnProperty(f))f=$r[f];else if(f&&typeof f.name=="string"&&$r.hasOwnProperty(f.name)){var y=$r[f.name];typeof y=="string"&&(y={name:y}),(f=R(y,f)).name=y.name}else{if(typeof f=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(f))return ye("application/xml");if(typeof f=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(f))return ye("application/json")}return typeof f=="string"?{name:f}:f||{name:"null"}}function ke(f,y){y=ye(y);var w=nr[y.name];if(!w)return ke(f,"text/plain");var x=w(f,y);if(rt.hasOwnProperty(y.name)){var S=rt[y.name];for(var O in S)S.hasOwnProperty(O)&&(x.hasOwnProperty(O)&&(x["_"+O]=x[O]),x[O]=S[O])}if(x.name=y.name,y.helperType&&(x.helperType=y.helperType),y.modeProps)for(var N in y.modeProps)x[N]=y.modeProps[N];return x}var rt={};function Ze(f,y){Be(y,rt.hasOwnProperty(f)?rt[f]:rt[f]={})}function bt(f,y){if(y===!0)return y;if(f.copyState)return f.copyState(y);var w={};for(var x in y){var S=y[x];S instanceof Array&&(S=S.concat([])),w[x]=S}return w}function ti(f,y){for(var w;f.innerMode&&(w=f.innerMode(y))&&w.mode!=f;)y=w.state,f=w.mode;return w||{mode:f,state:y}}function di(f,y,w){return!f.startState||f.startState(y,w)}var vt=function(f,y,w){this.pos=this.start=0,this.string=f,this.tabSize=y||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=w};function Ke(f,y){if((y-=f.first)<0||y>=f.size)throw new Error("There is no line "+(y+f.first)+" in the document.");for(var w=f;!w.lines;)for(var x=0;;++x){var S=w.children[x],O=S.chunkSize();if(y<O){w=S;break}y-=O}return w.lines[y]}function oi(f,y,w){var x=[],S=y.line;return f.iter(y.line,w.line+1,function(O){var N=O.text;S==w.line&&(N=N.slice(0,w.ch)),S==y.line&&(N=N.slice(y.ch)),x.push(N),++S}),x}function gi(f,y,w){var x=[];return f.iter(y,w,function(S){x.push(S.text)}),x}function Ot(f,y){var w=y-f.height;if(w)for(var x=f;x;x=x.parent)x.height+=w}function jt(f){if(f.parent==null)return null;for(var y=f.parent,w=xt(y.lines,f),x=y.parent;x;y=x,x=x.parent)for(var S=0;x.children[S]!=y;++S)w+=x.children[S].chunkSize();return w+y.first}function Er(f,y){var w=f.first;e:do{for(var x=0;x<f.children.length;++x){var S=f.children[x],O=S.height;if(y<O){f=S;continue e}y-=O,w+=S.chunkSize()}return w}while(!f.lines);for(var N=0;N<f.lines.length;++N){var B=f.lines[N].height;if(y<B)break;y-=B}return w+N}function mn(f,y){return y>=f.first&&y<f.first+f.size}function ni(f,y){return String(f.lineNumberFormatter(y+f.firstLineNumber))}function qe(f,y,w){if(w===void 0&&(w=null),!(this instanceof qe))return new qe(f,y,w);this.line=f,this.ch=y,this.sticky=w}function dt(f,y){return f.line-y.line||f.ch-y.ch}function Xi(f,y){return f.sticky==y.sticky&&dt(f,y)==0}function un(f){return qe(f.line,f.ch)}function Sr(f,y){return dt(f,y)<0?y:f}function Or(f,y){return dt(f,y)<0?f:y}function gr(f,y){return Math.max(f.first,Math.min(y,f.first+f.size-1))}function Ft(f,y){if(y.line<f.first)return qe(f.first,0);var w=f.first+f.size-1;return y.line>w?qe(w,Ke(f,w).text.length):function(x,S){var O=x.ch;return O==null||O>S?qe(x.line,S):O<0?qe(x.line,0):x}(y,Ke(f,y.line).text.length)}function _n(f,y){for(var w=[],x=0;x<y.length;x++)w[x]=Ft(f,y[x]);return w}vt.prototype.eol=function(){return this.pos>=this.string.length},vt.prototype.sol=function(){return this.pos==this.lineStart},vt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},vt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},vt.prototype.eat=function(f){var y=this.string.charAt(this.pos);if(typeof f=="string"?y==f:y&&(f.test?f.test(y):f(y)))return++this.pos,y},vt.prototype.eatWhile=function(f){for(var y=this.pos;this.eat(f););return this.pos>y},vt.prototype.eatSpace=function(){for(var f=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>f},vt.prototype.skipToEnd=function(){this.pos=this.string.length},vt.prototype.skipTo=function(f){var y=this.string.indexOf(f,this.pos);if(y>-1)return this.pos=y,!0},vt.prototype.backUp=function(f){this.pos-=f},vt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=He(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?He(this.string,this.lineStart,this.tabSize):0)},vt.prototype.indentation=function(){return He(this.string,null,this.tabSize)-(this.lineStart?He(this.string,this.lineStart,this.tabSize):0)},vt.prototype.match=function(f,y,w){if(typeof f!="string"){var x=this.string.slice(this.pos).match(f);return x&&x.index>0?null:(x&&y!==!1&&(this.pos+=x[0].length),x)}var S=function(O){return w?O.toLowerCase():O};if(S(this.string.substr(this.pos,f.length))==S(f))return y!==!1&&(this.pos+=f.length),!0},vt.prototype.current=function(){return this.string.slice(this.start,this.pos)},vt.prototype.hideFirstChars=function(f,y){this.lineStart+=f;try{return y()}finally{this.lineStart-=f}},vt.prototype.lookAhead=function(f){var y=this.lineOracle;return y&&y.lookAhead(f)},vt.prototype.baseToken=function(){var f=this.lineOracle;return f&&f.baseToken(this.pos)};var Kn=function(f,y){this.state=f,this.lookAhead=y},xn=function(f,y,w,x){this.state=y,this.doc=f,this.line=w,this.maxLookAhead=x||0,this.baseTokens=null,this.baseTokenPos=1};function _o(f,y,w,x){var S=[f.state.modeGen],O={};jl(f,y.text,f.doc.mode,w,function(Y,le){return S.push(Y,le)},O,x);for(var N=w.state,B=function(Y){w.baseTokens=S;var le=f.state.overlays[Y],ue=1,xe=0;w.state=!0,jl(f,y.text,le.mode,w,function(_e,Pe){for(var Fe=ue;xe<_e;){var Ie=S[ue];Ie>_e&&S.splice(ue,1,_e,S[ue+1],Ie),ue+=2,xe=Math.min(_e,Ie)}if(Pe)if(le.opaque)S.splice(Fe,ue-Fe,_e,"overlay "+Pe),ue=Fe+2;else for(;Fe<ue;Fe+=2){var ze=S[Fe+1];S[Fe+1]=(ze?ze+" ":"")+"overlay "+Pe}},O),w.state=N,w.baseTokens=null,w.baseTokenPos=1},W=0;W<f.state.overlays.length;++W)B(W);return{styles:S,classes:O.bgClass||O.textClass?O:null}}function Ho(f,y,w){if(!y.styles||y.styles[0]!=f.state.modeGen){var x=xo(f,jt(y)),S=y.text.length>f.options.maxHighlightLength&&bt(f.doc.mode,x.state),O=_o(f,y,x);S&&(x.state=S),y.stateAfter=x.save(!S),y.styles=O.styles,O.classes?y.styleClasses=O.classes:y.styleClasses&&(y.styleClasses=null),w===f.doc.highlightFrontier&&(f.doc.modeFrontier=Math.max(f.doc.modeFrontier,++f.doc.highlightFrontier))}return y.styles}function xo(f,y,w){var x=f.doc,S=f.display;if(!x.mode.startState)return new xn(x,!0,y);var O=function(W,Y,le){for(var ue,xe,_e=W.doc,Pe=le?-1:Y-(W.doc.mode.innerMode?1e3:100),Fe=Y;Fe>Pe;--Fe){if(Fe<=_e.first)return _e.first;var Ie=Ke(_e,Fe-1),ze=Ie.stateAfter;if(ze&&(!le||Fe+(ze instanceof Kn?ze.lookAhead:0)<=_e.modeFrontier))return Fe;var Je=He(Ie.text,null,W.options.tabSize);(xe==null||ue>Je)&&(xe=Fe-1,ue=Je)}return xe}(f,y,w),N=O>x.first&&Ke(x,O-1).stateAfter,B=N?xn.fromSaved(x,N,O):new xn(x,di(x.mode),O);return x.iter(O,y,function(W){hl(f,W.text,B);var Y=B.line;W.stateAfter=Y==y-1||Y%5==0||Y>=S.viewFrom&&Y<S.viewTo?B.save():null,B.nextLine()}),w&&(x.modeFrontier=B.line),B}function hl(f,y,w,x){var S=f.doc.mode,O=new vt(y,f.options.tabSize,w);for(O.start=O.pos=x||0,y==""&&xs(S,w.state);!O.eol();)Vo(S,O,w.state),O.start=O.pos}function xs(f,y){if(f.blankLine)return f.blankLine(y);if(f.innerMode){var w=ti(f,y);return w.mode.blankLine?w.mode.blankLine(w.state):void 0}}function Vo(f,y,w,x){for(var S=0;S<10;S++){x&&(x[0]=ti(f,w).mode);var O=f.token(y,w);if(y.pos>y.start)return O}throw new Error("Mode "+f.name+" failed to advance stream.")}xn.prototype.lookAhead=function(f){var y=this.doc.getLine(this.line+f);return y!=null&&f>this.maxLookAhead&&(this.maxLookAhead=f),y},xn.prototype.baseToken=function(f){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=f;)this.baseTokenPos+=2;var y=this.baseTokens[this.baseTokenPos+1];return{type:y&&y.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-f}},xn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},xn.fromSaved=function(f,y,w){return y instanceof Kn?new xn(f,bt(f.mode,y.state),w,y.lookAhead):new xn(f,bt(f.mode,y),w)},xn.prototype.save=function(f){var y=f!==!1?bt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Kn(y,this.maxLookAhead):y};var ma=function(f,y,w){this.start=f.start,this.end=f.pos,this.string=f.current(),this.type=y||null,this.state=w};function Pr(f,y,w,x){var S,O,N=f.doc,B=N.mode,W=Ke(N,(y=Ft(N,y)).line),Y=xo(f,y.line,w),le=new vt(W.text,f.options.tabSize,Y);for(x&&(O=[]);(x||le.pos<y.ch)&&!le.eol();)le.start=le.pos,S=Vo(B,le,Y.state),x&&O.push(new ma(le,S,bt(N.mode,Y.state)));return x?O:new ma(le,S,Y.state)}function wo(f,y){if(f)for(;;){var w=f.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!w)break;f=f.slice(0,w.index)+f.slice(w.index+w[0].length);var x=w[1]?"bgClass":"textClass";y[x]==null?y[x]=w[2]:new RegExp("(?:^|\\s)"+w[2]+"(?:$|\\s)").test(y[x])||(y[x]+=" "+w[2])}return f}function jl(f,y,w,x,S,O,N){var B=w.flattenSpans;B==null&&(B=f.options.flattenSpans);var W,Y=0,le=null,ue=new vt(y,f.options.tabSize,x),xe=f.options.addModeClass&&[null];for(y==""&&wo(xs(w,x.state),O);!ue.eol();){if(ue.pos>f.options.maxHighlightLength?(B=!1,N&&hl(f,y,x,ue.pos),ue.pos=y.length,W=null):W=wo(Vo(w,ue,x.state,xe),O),xe){var _e=xe[0].name;_e&&(W="m-"+(W?_e+" "+W:_e))}if(!B||le!=W){for(;Y<ue.start;)S(Y=Math.min(ue.start,Y+5e3),le);le=W}ue.start=ue.pos}for(;Y<ue.pos;){var Pe=Math.min(ue.pos,Y+5e3);S(Pe,le),Y=Pe}}var js=!1,Ms=!1;function eo(f,y,w){this.marker=f,this.from=y,this.to=w}function zs(f,y){if(f)for(var w=0;w<f.length;++w){var x=f[w];if(x.marker==y)return x}}function Wo(f,y){for(var w,x=0;x<f.length;++x)f[x]!=y&&(w||(w=[])).push(f[x]);return w}function dl(f,y){if(y.full)return null;var w=mn(f,y.from.line)&&Ke(f,y.from.line).markedSpans,x=mn(f,y.to.line)&&Ke(f,y.to.line).markedSpans;if(!w&&!x)return null;var S=y.from.ch,O=y.to.ch,N=dt(y.from,y.to)==0,B=function(lt,ft,li){var Ct;if(lt)for(var Oi=0;Oi<lt.length;++Oi){var ii=lt[Oi],Ki=ii.marker;if(ii.from==null||(Ki.inclusiveLeft?ii.from<=ft:ii.from<ft)||ii.from==ft&&Ki.type=="bookmark"&&(!li||!ii.marker.insertLeft)){var Tr=ii.to==null||(Ki.inclusiveRight?ii.to>=ft:ii.to>ft);(Ct||(Ct=[])).push(new eo(Ki,ii.from,Tr?null:ii.to))}}return Ct}(w,S,N),W=function(lt,ft,li){var Ct;if(lt)for(var Oi=0;Oi<lt.length;++Oi){var ii=lt[Oi],Ki=ii.marker;if(ii.to==null||(Ki.inclusiveRight?ii.to>=ft:ii.to>ft)||ii.from==ft&&Ki.type=="bookmark"&&(!li||ii.marker.insertLeft)){var Tr=ii.from==null||(Ki.inclusiveLeft?ii.from<=ft:ii.from<ft);(Ct||(Ct=[])).push(new eo(Ki,Tr?null:ii.from-ft,ii.to==null?null:ii.to-ft))}}return Ct}(x,O,N),Y=y.text.length==1,le=oe(y.text).length+(Y?S:0);if(B)for(var ue=0;ue<B.length;++ue){var xe=B[ue];if(xe.to==null){var _e=zs(W,xe.marker);_e?Y&&(xe.to=_e.to==null?null:_e.to+le):xe.to=S}}if(W)for(var Pe=0;Pe<W.length;++Pe){var Fe=W[Pe];Fe.to!=null&&(Fe.to+=le),Fe.from==null?zs(B,Fe.marker)||(Fe.from=le,Y&&(B||(B=[])).push(Fe)):(Fe.from+=le,Y&&(B||(B=[])).push(Fe))}B&&(B=to(B)),W&&W!=B&&(W=to(W));var Ie=[B];if(!Y){var ze,Je=y.text.length-2;if(Je>0&&B)for(var Ye=0;Ye<B.length;++Ye)B[Ye].to==null&&(ze||(ze=[])).push(new eo(B[Ye].marker,null,null));for(var ct=0;ct<Je;++ct)Ie.push(ze);Ie.push(W)}return Ie}function to(f){for(var y=0;y<f.length;++y){var w=f[y];w.from!=null&&w.from==w.to&&w.marker.clearWhenEmpty!==!1&&f.splice(y--,1)}return f.length?f:null}function zl(f){var y=f.markedSpans;if(y){for(var w=0;w<y.length;++w)y[w].marker.detachLine(f);f.markedSpans=null}}function Jn(f,y){if(y){for(var w=0;w<y.length;++w)y[w].marker.attachLine(f);f.markedSpans=y}}function Yn(f){return f.inclusiveLeft?-1:0}function Eo(f){return f.inclusiveRight?1:0}function io(f,y){var w=f.lines.length-y.lines.length;if(w!=0)return w;var x=f.find(),S=y.find(),O=dt(x.from,S.from)||Yn(f)-Yn(y);if(O)return-O;var N=dt(x.to,S.to)||Eo(f)-Eo(y);return N||y.id-f.id}function Ma(f,y){var w,x=Ms&&f.markedSpans;if(x)for(var S=void 0,O=0;O<x.length;++O)(S=x[O]).marker.collapsed&&(y?S.from:S.to)==null&&(!w||io(w,S.marker)<0)&&(w=S.marker);return w}function fl(f){return Ma(f,!0)}function ls(f){return Ma(f,!1)}function pl(f,y){var w,x=Ms&&f.markedSpans;if(x)for(var S=0;S<x.length;++S){var O=x[S];O.marker.collapsed&&(O.from==null||O.from<y)&&(O.to==null||O.to>y)&&(!w||io(w,O.marker)<0)&&(w=O.marker)}return w}function So(f,y,w,x,S){var O=Ke(f,y),N=Ms&&O.markedSpans;if(N)for(var B=0;B<N.length;++B){var W=N[B];if(W.marker.collapsed){var Y=W.marker.find(0),le=dt(Y.from,w)||Yn(W.marker)-Yn(S),ue=dt(Y.to,x)||Eo(W.marker)-Eo(S);if(!(le>=0&&ue<=0||le<=0&&ue>=0)&&(le<=0&&(W.marker.inclusiveRight&&S.inclusiveLeft?dt(Y.to,w)>=0:dt(Y.to,w)>0)||le>=0&&(W.marker.inclusiveRight&&S.inclusiveLeft?dt(Y.from,x)<=0:dt(Y.from,x)<0)))return!0}}}function Qn(f){for(var y;y=fl(f);)f=y.find(-1,!0).line;return f}function La(f,y){var w=Ke(f,y),x=Qn(w);return w==x?y:jt(x)}function Ul(f,y){if(y>f.lastLine())return y;var w,x=Ke(f,y);if(!Rt(f,x))return y;for(;w=ls(x);)x=w.find(1,!0).line;return jt(x)+1}function Rt(f,y){var w=Ms&&y.markedSpans;if(w){for(var x=void 0,S=0;S<w.length;++S)if((x=w[S]).marker.collapsed&&(x.from==null||!x.marker.widgetNode&&x.from==0&&x.marker.inclusiveLeft&&X(f,y,x)))return!0}}function X(f,y,w){if(w.to==null){var x=w.marker.find(1,!0);return X(f,x.line,zs(x.line.markedSpans,w.marker))}if(w.marker.inclusiveRight&&w.to==y.text.length)return!0;for(var S=void 0,O=0;O<y.markedSpans.length;++O)if((S=y.markedSpans[O]).marker.collapsed&&!S.marker.widgetNode&&S.from==w.to&&(S.to==null||S.to!=w.from)&&(S.marker.inclusiveLeft||w.marker.inclusiveRight)&&X(f,y,S))return!0}function me(f){for(var y=0,w=(f=Qn(f)).parent,x=0;x<w.lines.length;++x){var S=w.lines[x];if(S==f)break;y+=S.height}for(var O=w.parent;O;O=(w=O).parent)for(var N=0;N<O.children.length;++N){var B=O.children[N];if(B==w)break;y+=B.height}return y}function Ne(f){if(f.height==0)return 0;for(var y,w=f.text.length,x=f;y=fl(x);){var S=y.find(0,!0);x=S.from.line,w+=S.from.ch-S.to.ch}for(x=f;y=ls(x);){var O=y.find(0,!0);w-=x.text.length-O.from.ch,w+=(x=O.to.line).text.length-O.to.ch}return w}function yt(f){var y=f.display,w=f.doc;y.maxLine=Ke(w,w.first),y.maxLineLength=Ne(y.maxLine),y.maxLineChanged=!0,w.iter(function(x){var S=Ne(x);S>y.maxLineLength&&(y.maxLineLength=S,y.maxLine=x)})}var pi=function(f,y,w){this.text=f,Jn(this,y),this.height=w?w(this):1};function Gt(f){f.parent=null,zl(f)}pi.prototype.lineNo=function(){return jt(this)},qt(pi);var Fi={},hr={};function Br(f,y){if(!f||/^\s*$/.test(f))return null;var w=y.addModeClass?hr:Fi;return w[f]||(w[f]=f.replace(/\S+/g,"cm-$&"))}function Si(f,y){var w=ie("span",null,null,p?"padding-right: .1px":null),x={pre:ie("pre",[w],"CodeMirror-line"),content:w,col:0,pos:0,cm:f,trailingSpace:!1,splitSpaces:f.getOption("lineWrapping")};y.measure={};for(var S=0;S<=(y.rest?y.rest.length:0);S++){var O=S?y.rest[S-1]:y.line,N=void 0;x.pos=0,x.addToken=es,ir(f.display.measure)&&(N=Ae(O,f.doc.direction))&&(x.addToken=br(x.addToken,N)),x.map=[],Us(O,x,Ho(f,O,y!=f.display.externalMeasured&&jt(O))),O.styleClasses&&(O.styleClasses.bgClass&&(x.bgClass=ne(O.styleClasses.bgClass,x.bgClass||"")),O.styleClasses.textClass&&(x.textClass=ne(O.styleClasses.textClass,x.textClass||""))),x.map.length==0&&x.map.push(0,0,x.content.appendChild(Jt(f.display.measure))),S==0?(y.measure.map=x.map,y.measure.cache={}):((y.measure.maps||(y.measure.maps=[])).push(x.map),(y.measure.caches||(y.measure.caches=[])).push({}))}if(p){var B=x.content.lastChild;(/\bcm-tab\b/.test(B.className)||B.querySelector&&B.querySelector(".cm-tab"))&&(x.content.className="cm-tab-wrap-hack")}return et(f,"renderLine",f,y.line,x.pre),x.pre.className&&(x.textClass=ne(x.pre.className,x.textClass||"")),x}function $n(f){var y=ee("span","","cm-invalidchar");return y.title="\\u"+f.charCodeAt(0).toString(16),y.setAttribute("aria-label",y.title),y}function es(f,y,w,x,S,O,N){if(y){var B,W=f.splitSpaces?function(lt,ft){if(lt.length>1&&!/  /.test(lt))return lt;for(var li=ft,Ct="",Oi=0;Oi<lt.length;Oi++){var ii=lt.charAt(Oi);ii!=" "||!li||Oi!=lt.length-1&&lt.charCodeAt(Oi+1)!=32||(ii=""),Ct+=ii,li=ii==" "}return Ct}(y,f.trailingSpace):y,Y=f.cm.state.specialChars,le=!1;if(Y.test(y)){B=document.createDocumentFragment();for(var ue=0;;){Y.lastIndex=ue;var xe=Y.exec(y),_e=xe?xe.index-ue:y.length-ue;if(_e){var Pe=document.createTextNode(W.slice(ue,ue+_e));h&&d<9?B.appendChild(ee("span",[Pe])):B.appendChild(Pe),f.map.push(f.pos,f.pos+_e,Pe),f.col+=_e,f.pos+=_e}if(!xe)break;ue+=_e+1;var Fe=void 0;if(xe[0]=="	"){var Ie=f.cm.options.tabSize,ze=Ie-f.col%Ie;(Fe=B.appendChild(ee("span",fe(ze),"cm-tab"))).setAttribute("role","presentation"),Fe.setAttribute("cm-text","	"),f.col+=ze}else xe[0]=="\r"||xe[0]==`
`?((Fe=B.appendChild(ee("span",xe[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",xe[0]),f.col+=1):((Fe=f.cm.options.specialCharPlaceholder(xe[0])).setAttribute("cm-text",xe[0]),h&&d<9?B.appendChild(ee("span",[Fe])):B.appendChild(Fe),f.col+=1);f.map.push(f.pos,f.pos+1,Fe),f.pos++}}else f.col+=y.length,B=document.createTextNode(W),f.map.push(f.pos,f.pos+y.length,B),h&&d<9&&(le=!0),f.pos+=y.length;if(f.trailingSpace=W.charCodeAt(y.length-1)==32,w||x||S||le||O||N){var Je=w||"";x&&(Je+=x),S&&(Je+=S);var Ye=ee("span",[B],Je,O);if(N)for(var ct in N)N.hasOwnProperty(ct)&&ct!="style"&&ct!="class"&&Ye.setAttribute(ct,N[ct]);return f.content.appendChild(Ye)}f.content.appendChild(B)}}function br(f,y){return function(w,x,S,O,N,B,W){S=S?S+" cm-force-border":"cm-force-border";for(var Y=w.pos,le=Y+x.length;;){for(var ue=void 0,xe=0;xe<y.length&&!((ue=y[xe]).to>Y&&ue.from<=Y);xe++);if(ue.to>=le)return f(w,x,S,O,N,B,W);f(w,x.slice(0,ue.to-Y),S,O,null,B,W),O=null,x=x.slice(ue.to-Y),Y=ue.to}}}function gn(f,y,w,x){var S=!x&&w.widgetNode;S&&f.map.push(f.pos,f.pos+y,S),!x&&f.cm.display.input.needsContentAttribute&&(S||(S=f.content.appendChild(document.createElement("span"))),S.setAttribute("cm-marker",w.id)),S&&(f.cm.display.input.setUneditable(S),f.content.appendChild(S)),f.pos+=y,f.trailingSpace=!1}function Us(f,y,w){var x=f.markedSpans,S=f.text,O=0;if(x)for(var N,B,W,Y,le,ue,xe,_e=S.length,Pe=0,Fe=1,Ie="",ze=0;;){if(ze==Pe){W=Y=le=B="",xe=null,ue=null,ze=1/0;for(var Je=[],Ye=void 0,ct=0;ct<x.length;++ct){var lt=x[ct],ft=lt.marker;if(ft.type=="bookmark"&&lt.from==Pe&&ft.widgetNode)Je.push(ft);else if(lt.from<=Pe&&(lt.to==null||lt.to>Pe||ft.collapsed&&lt.to==Pe&&lt.from==Pe)){if(lt.to!=null&&lt.to!=Pe&&ze>lt.to&&(ze=lt.to,Y=""),ft.className&&(W+=" "+ft.className),ft.css&&(B=(B?B+";":"")+ft.css),ft.startStyle&&lt.from==Pe&&(le+=" "+ft.startStyle),ft.endStyle&&lt.to==ze&&(Ye||(Ye=[])).push(ft.endStyle,lt.to),ft.title&&((xe||(xe={})).title=ft.title),ft.attributes)for(var li in ft.attributes)(xe||(xe={}))[li]=ft.attributes[li];ft.collapsed&&(!ue||io(ue.marker,ft)<0)&&(ue=lt)}else lt.from>Pe&&ze>lt.from&&(ze=lt.from)}if(Ye)for(var Ct=0;Ct<Ye.length;Ct+=2)Ye[Ct+1]==ze&&(Y+=" "+Ye[Ct]);if(!ue||ue.from==Pe)for(var Oi=0;Oi<Je.length;++Oi)gn(y,0,Je[Oi]);if(ue&&(ue.from||0)==Pe){if(gn(y,(ue.to==null?_e+1:ue.to)-Pe,ue.marker,ue.from==null),ue.to==null)return;ue.to==Pe&&(ue=!1)}}if(Pe>=_e)break;for(var ii=Math.min(_e,ze);;){if(Ie){var Ki=Pe+Ie.length;if(!ue){var Tr=Ki>ii?Ie.slice(0,ii-Pe):Ie;y.addToken(y,Tr,N?N+W:W,le,Pe+Tr.length==ze?Y:"",B,xe)}if(Ki>=ii){Ie=Ie.slice(ii-Pe),Pe=ii;break}Pe=Ki,le=""}Ie=S.slice(O,O=w[Fe++]),N=Br(w[Fe++],y.cm.options)}}else for(var Ji=1;Ji<w.length;Ji+=2)y.addToken(y,S.slice(O,O=w[Ji]),Br(w[Ji+1],y.cm.options))}function Yo(f,y,w){this.line=y,this.rest=function(x){for(var S,O;S=ls(x);)x=S.find(1,!0).line,(O||(O=[])).push(x);return O}(y),this.size=this.rest?jt(oe(this.rest))-w+1:1,this.node=this.text=null,this.hidden=Rt(f,y)}function us(f,y,w){for(var x,S=[],O=y;O<w;O=x){var N=new Yo(f.doc,Ke(f.doc,O),O);x=O+N.size,S.push(N)}return S}var cs=null,Ra=null;function Wr(f,y){var w=Oe(f,y);if(w.length){var x,S=Array.prototype.slice.call(arguments,2);cs?x=cs.delayedCallbacks:Ra?x=Ra:(x=Ra=[],setTimeout(Ia,0));for(var O=function(B){x.push(function(){return w[B].apply(null,S)})},N=0;N<w.length;++N)O(N)}}function Ia(){var f=Ra;Ra=null;for(var y=0;y<f.length;++y)f[y]()}function oh(f,y,w,x){for(var S=0;S<y.changes.length;S++){var O=y.changes[S];O=="text"?Sd(f,y):O=="gutter"?Cd(f,y,w,x):O=="class"?lh(f,y):O=="widget"&&Td(f,y,x)}y.changes=null}function Gl(f){return f.node==f.text&&(f.node=ee("div",null,null,"position: relative"),f.text.parentNode&&f.text.parentNode.replaceChild(f.node,f.text),f.node.appendChild(f.text),h&&d<8&&(f.node.style.zIndex=2)),f.node}function ah(f,y){var w=f.display.externalMeasured;return w&&w.line==y.line?(f.display.externalMeasured=null,y.measure=w.measure,w.built):Si(f,y)}function Sd(f,y){var w=y.text.className,x=ah(f,y);y.text==y.node&&(y.node=x.pre),y.text.parentNode.replaceChild(x.pre,y.text),y.text=x.pre,x.bgClass!=y.bgClass||x.textClass!=y.textClass?(y.bgClass=x.bgClass,y.textClass=x.textClass,lh(f,y)):w&&(y.text.className=w)}function lh(f,y){(function(x,S){var O=S.bgClass?S.bgClass+" "+(S.line.bgClass||""):S.line.bgClass;if(O&&(O+=" CodeMirror-linebackground"),S.background)O?S.background.className=O:(S.background.parentNode.removeChild(S.background),S.background=null);else if(O){var N=Gl(S);S.background=N.insertBefore(ee("div",null,O),N.firstChild),x.display.input.setUneditable(S.background)}})(f,y),y.line.wrapClass?Gl(y).className=y.line.wrapClass:y.node!=y.text&&(y.node.className="");var w=y.textClass?y.textClass+" "+(y.line.textClass||""):y.line.textClass;y.text.className=w||""}function Cd(f,y,w,x){if(y.gutter&&(y.node.removeChild(y.gutter),y.gutter=null),y.gutterBackground&&(y.node.removeChild(y.gutterBackground),y.gutterBackground=null),y.line.gutterClass){var S=Gl(y);y.gutterBackground=ee("div",null,"CodeMirror-gutter-background "+y.line.gutterClass,"left: "+(f.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px; width: "+x.gutterTotalWidth+"px"),f.display.input.setUneditable(y.gutterBackground),S.insertBefore(y.gutterBackground,y.text)}var O=y.line.gutterMarkers;if(f.options.lineNumbers||O){var N=Gl(y),B=y.gutter=ee("div",null,"CodeMirror-gutter-wrapper","left: "+(f.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px");if(B.setAttribute("aria-hidden","true"),f.display.input.setUneditable(B),N.insertBefore(B,y.text),y.line.gutterClass&&(B.className+=" "+y.line.gutterClass),!f.options.lineNumbers||O&&O["CodeMirror-linenumbers"]||(y.lineNumber=B.appendChild(ee("div",ni(f.options,w),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+x.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f.display.lineNumInnerWidth+"px"))),O)for(var W=0;W<f.display.gutterSpecs.length;++W){var Y=f.display.gutterSpecs[W].className,le=O.hasOwnProperty(Y)&&O[Y];le&&B.appendChild(ee("div",[le],"CodeMirror-gutter-elt","left: "+x.gutterLeft[Y]+"px; width: "+x.gutterWidth[Y]+"px"))}}}function Td(f,y,w){y.alignable&&(y.alignable=null);for(var x=F("CodeMirror-linewidget"),S=y.node.firstChild,O=void 0;S;S=O)O=S.nextSibling,x.test(S.className)&&y.node.removeChild(S);uh(f,y,w)}function Ad(f,y,w,x){var S=ah(f,y);return y.text=y.node=S.pre,S.bgClass&&(y.bgClass=S.bgClass),S.textClass&&(y.textClass=S.textClass),lh(f,y),Cd(f,y,w,x),uh(f,y,x),y.node}function uh(f,y,w){if(ch(f,y.line,y,w,!0),y.rest)for(var x=0;x<y.rest.length;x++)ch(f,y.rest[x],y,w,!1)}function ch(f,y,w,x,S){if(y.widgets)for(var O=Gl(w),N=0,B=y.widgets;N<B.length;++N){var W=B[N],Y=ee("div",[W.node],"CodeMirror-linewidget"+(W.className?" "+W.className:""));W.handleMouseEvents||Y.setAttribute("cm-ignore-events","true"),kd(W,Y,w,x),f.display.input.setUneditable(Y),S&&W.above?O.insertBefore(Y,w.gutter||w.text):O.appendChild(Y),Wr(W,"redraw")}}function kd(f,y,w,x){if(f.noHScroll){(w.alignable||(w.alignable=[])).push(y);var S=x.wrapperWidth;y.style.left=x.fixedPos+"px",f.coverGutter||(S-=x.gutterTotalWidth,y.style.paddingLeft=x.gutterTotalWidth+"px"),y.style.width=S+"px"}f.coverGutter&&(y.style.zIndex=5,y.style.position="relative",f.noHScroll||(y.style.marginLeft=-x.gutterTotalWidth+"px"))}function vu(f){if(f.height!=null)return f.height;var y=f.doc.cm;if(!y)return 0;if(!de(document.body,f.node)){var w="position: relative;";f.coverGutter&&(w+="margin-left: -"+y.display.gutters.offsetWidth+"px;"),f.noHScroll&&(w+="width: "+y.display.wrapper.clientWidth+"px;"),J(y.display.measure,ee("div",[f.node],null,w))}return f.height=f.node.parentNode.offsetHeight}function ga(f,y){for(var w=Yi(y);w!=f.wrapper;w=w.parentNode)if(!w||w.nodeType==1&&w.getAttribute("cm-ignore-events")=="true"||w.parentNode==f.sizer&&w!=f.mover)return!0}function ql(f){return f.lineSpace.offsetTop}function Dd(f){return f.mover.offsetHeight-f.lineSpace.offsetHeight}function yp(f){if(f.cachedPaddingH)return f.cachedPaddingH;var y=J(f.measure,ee("pre","x","CodeMirror-line-like")),w=window.getComputedStyle?window.getComputedStyle(y):y.currentStyle,x={left:parseInt(w.paddingLeft),right:parseInt(w.paddingRight)};return isNaN(x.left)||isNaN(x.right)||(f.cachedPaddingH=x),x}function ya(f){return 50-f.display.nativeBarWidth}function Hl(f){return f.display.scroller.clientWidth-ya(f)-f.display.barWidth}function Re(f){return f.display.scroller.clientHeight-ya(f)-f.display.barHeight}function pt(f,y,w){if(f.line==y)return{map:f.measure.map,cache:f.measure.cache};if(f.rest){for(var x=0;x<f.rest.length;x++)if(f.rest[x]==y)return{map:f.measure.maps[x],cache:f.measure.caches[x]};for(var S=0;S<f.rest.length;S++)if(jt(f.rest[S])>w)return{map:f.measure.maps[S],cache:f.measure.caches[S],before:!0}}}function Wt(f,y,w,x){return $i(f,Qr(f,y),w,x)}function _r(f,y){if(y>=f.display.viewFrom&&y<f.display.viewTo)return f.display.view[oc(f,y)];var w=f.display.externalMeasured;return w&&y>=w.lineN&&y<w.lineN+w.size?w:void 0}function Qr(f,y){var w=jt(y),x=_r(f,w);x&&!x.text?x=null:x&&x.changes&&(oh(f,x,w,xg(f)),f.curOp.forceUpdate=!0),x||(x=function(O,N){var B=jt(N=Qn(N)),W=O.display.externalMeasured=new Yo(O.doc,N,B);W.lineN=B;var Y=W.built=Si(O,W);return W.text=Y.pre,J(O.display.lineMeasure,Y.pre),W}(f,y));var S=pt(x,y,w);return{line:y,view:x,rect:null,map:S.map,cache:S.cache,before:S.before,hasHeights:!1}}function $i(f,y,w,x,S){y.before&&(w=-1);var O,N=w+(x||"");return y.cache.hasOwnProperty(N)?O=y.cache[N]:(y.rect||(y.rect=y.view.text.getBoundingClientRect()),y.hasHeights||(function(B,W,Y){var le=B.options.lineWrapping,ue=le&&Hl(B);if(!W.measure.heights||le&&W.measure.width!=ue){var xe=W.measure.heights=[];if(le){W.measure.width=ue;for(var _e=W.text.firstChild.getClientRects(),Pe=0;Pe<_e.length-1;Pe++){var Fe=_e[Pe],Ie=_e[Pe+1];Math.abs(Fe.bottom-Ie.bottom)>2&&xe.push((Fe.bottom+Ie.top)/2-Y.top)}}xe.push(Y.bottom-Y.top)}}(f,y.view,y.rect),y.hasHeights=!0),O=function(B,W,Y,le){var ue,xe=qv(W.map,Y,le),_e=xe.node,Pe=xe.start,Fe=xe.end,Ie=xe.collapse;if(_e.nodeType==3){for(var ze=0;ze<4;ze++){for(;Pe&&Ce(W.line.text.charAt(xe.coverStart+Pe));)--Pe;for(;xe.coverStart+Fe<xe.coverEnd&&Ce(W.line.text.charAt(xe.coverStart+Fe));)++Fe;if((ue=h&&d<9&&Pe==0&&Fe==xe.coverEnd-xe.coverStart?_e.parentNode.getBoundingClientRect():$w($(_e,Pe,Fe).getClientRects(),le)).left||ue.right||Pe==0)break;Fe=Pe,Pe-=1,Ie="right"}h&&d<11&&(ue=function(Tr,Ji){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function(Ci){if(Nn!=null)return Nn;var Ar=J(Ci,ee("span","x")),vi=Ar.getBoundingClientRect(),Vi=$(Ar,0,1).getBoundingClientRect();return Nn=Math.abs(vi.left-Vi.left)>1}(Tr))return Ji;var Ui=screen.logicalXDPI/screen.deviceXDPI,Qi=screen.logicalYDPI/screen.deviceYDPI;return{left:Ji.left*Ui,right:Ji.right*Ui,top:Ji.top*Qi,bottom:Ji.bottom*Qi}}(B.display.measure,ue))}else{var Je;Pe>0&&(Ie=le="right"),ue=B.options.lineWrapping&&(Je=_e.getClientRects()).length>1?Je[le=="right"?Je.length-1:0]:_e.getBoundingClientRect()}if(h&&d<9&&!Pe&&(!ue||!ue.left&&!ue.right)){var Ye=_e.parentNode.getClientRects()[0];ue=Ye?{left:Ye.left,right:Ye.left+dh(B.display),top:Ye.top,bottom:Ye.bottom}:nc}for(var ct=ue.top-W.rect.top,lt=ue.bottom-W.rect.top,ft=(ct+lt)/2,li=W.view.measure.heights,Ct=0;Ct<li.length-1&&!(ft<li[Ct]);Ct++);var Oi=Ct?li[Ct-1]:0,ii=li[Ct],Ki={left:(Ie=="right"?ue.right:ue.left)-W.rect.left,right:(Ie=="left"?ue.left:ue.right)-W.rect.left,top:Oi,bottom:ii};return ue.left||ue.right||(Ki.bogus=!0),B.options.singleCursorHeightPerLine||(Ki.rtop=ct,Ki.rbottom=lt),Ki}(f,y,w,x),O.bogus||(y.cache[N]=O)),{left:O.left,right:O.right,top:S?O.rtop:O.top,bottom:S?O.rbottom:O.bottom}}var hs,nc={left:0,right:0,top:0,bottom:0};function qv(f,y,w){for(var x,S,O,N,B,W,Y=0;Y<f.length;Y+=3)if(B=f[Y],W=f[Y+1],y<B?(S=0,O=1,N="left"):y<W?O=(S=y-B)+1:(Y==f.length-3||y==W&&f[Y+3]>y)&&(S=(O=W-B)-1,y>=W&&(N="right")),S!=null){if(x=f[Y+2],B==W&&w==(x.insertLeft?"left":"right")&&(N=w),w=="left"&&S==0)for(;Y&&f[Y-2]==f[Y-3]&&f[Y-1].insertLeft;)x=f[2+(Y-=3)],N="left";if(w=="right"&&S==W-B)for(;Y<f.length-3&&f[Y+3]==f[Y+4]&&!f[Y+5].insertLeft;)x=f[(Y+=3)+2],N="right";break}return{node:x,start:S,end:O,collapse:N,coverStart:B,coverEnd:W}}function $w(f,y){var w=nc;if(y=="left")for(var x=0;x<f.length&&(w=f[x]).left==w.right;x++);else for(var S=f.length-1;S>=0&&(w=f[S]).left==w.right;S--);return w}function Hv(f){if(f.measure&&(f.measure.cache={},f.measure.heights=null,f.rest))for(var y=0;y<f.rest.length;y++)f.measure.caches[y]={}}function Vv(f){f.display.externalMeasure=null,V(f.display.lineMeasure);for(var y=0;y<f.display.view.length;y++)Hv(f.display.view[y])}function Md(f){Vv(f),f.display.cachedCharWidth=f.display.cachedTextHeight=f.display.cachedPaddingH=null,f.options.lineWrapping||(f.display.maxLineChanged=!0),f.display.lineNumChars=null}function Wv(f){return g&&D?-(f.body.getBoundingClientRect().left-parseInt(getComputedStyle(f.body).marginLeft)):f.defaultView.pageXOffset||(f.documentElement||f.body).scrollLeft}function Yv(f){return g&&D?-(f.body.getBoundingClientRect().top-parseInt(getComputedStyle(f.body).marginTop)):f.defaultView.pageYOffset||(f.documentElement||f.body).scrollTop}function yg(f){var y=Qn(f).widgets,w=0;if(y)for(var x=0;x<y.length;++x)y[x].above&&(w+=vu(y[x]));return w}function vp(f,y,w,x,S){if(!S){var O=yg(y);w.top+=O,w.bottom+=O}if(x=="line")return w;x||(x="local");var N=me(y);if(x=="local"?N+=ql(f.display):N-=f.display.viewOffset,x=="page"||x=="window"){var B=f.display.lineSpace.getBoundingClientRect();N+=B.top+(x=="window"?0:Yv($e(f)));var W=B.left+(x=="window"?0:Wv($e(f)));w.left+=W,w.right+=W}return w.top+=N,w.bottom+=N,w}function Xv(f,y,w){if(w=="div")return y;var x=y.left,S=y.top;if(w=="page")x-=Wv($e(f)),S-=Yv($e(f));else if(w=="local"||!w){var O=f.display.sizer.getBoundingClientRect();x+=O.left,S+=O.top}var N=f.display.lineSpace.getBoundingClientRect();return{left:x-N.left,top:S-N.top}}function bp(f,y,w,x,S){return x||(x=Ke(f.doc,y.line)),vp(f,x,Wt(f,x,y.ch,S),w)}function Oa(f,y,w,x,S,O){function N(Pe,Fe){var Ie=$i(f,S,Pe,Fe?"right":"left",O);return Fe?Ie.left=Ie.right:Ie.right=Ie.left,vp(f,x,Ie,w)}x=x||Ke(f.doc,y.line),S||(S=Qr(f,x));var B=Ae(x,f.doc.direction),W=y.ch,Y=y.sticky;if(W>=x.text.length?(W=x.text.length,Y="before"):W<=0&&(W=0,Y="after"),!B)return N(Y=="before"?W-1:W,Y=="before");function le(Pe,Fe,Ie){return N(Ie?Pe-1:Pe,B[Fe].level==1!=Ie)}var ue=ce(B,W,Y),xe=he,_e=le(W,ue,Y=="before");return xe!=null&&(_e.other=le(W,xe,Y!="before")),_e}function Zv(f,y){var w=0;y=Ft(f.doc,y),f.options.lineWrapping||(w=dh(f.display)*y.ch);var x=Ke(f.doc,y.line),S=me(x)+ql(f.display);return{left:w,right:w,top:S,bottom:S+x.height}}function vg(f,y,w,x,S){var O=qe(f,y,w);return O.xRel=S,x&&(O.outside=x),O}function bg(f,y,w){var x=f.doc;if((w+=f.display.viewOffset)<0)return vg(x.first,0,null,-1,-1);var S=Er(x,w),O=x.first+x.size-1;if(S>O)return vg(x.first+x.size-1,Ke(x,O).text.length,null,1,1);y<0&&(y=0);for(var N=Ke(x,S);;){var B=Bw(f,N,S,y,w),W=pl(N,B.ch+(B.xRel>0||B.outside>0?1:0));if(!W)return B;var Y=W.find(1);if(Y.line==S)return Y;N=Ke(x,S=Y.line)}}function Kv(f,y,w,x){x-=yg(y);var S=y.text.length,O=re(function(N){return $i(f,w,N-1).bottom<=x},S,0);return{begin:O,end:S=re(function(N){return $i(f,w,N).top>x},O,S)}}function Jv(f,y,w,x){return w||(w=Qr(f,y)),Kv(f,y,w,vp(f,y,$i(f,w,x),"line").top)}function _g(f,y,w,x){return!(f.bottom<=w)&&(f.top>w||(x?f.left:f.right)>y)}function Bw(f,y,w,x,S){S-=me(y);var O=Qr(f,y),N=yg(y),B=0,W=y.text.length,Y=!0,le=Ae(y,f.doc.direction);if(le){var ue=(f.options.lineWrapping?zw:jw)(f,y,w,O,le,x,S);B=(Y=ue.level!=1)?ue.from:ue.to-1,W=Y?ue.to:ue.from-1}var xe,_e,Pe=null,Fe=null,Ie=re(function(lt){var ft=$i(f,O,lt);return ft.top+=N,ft.bottom+=N,!!_g(ft,x,S,!1)&&(ft.top<=S&&ft.left<=x&&(Pe=lt,Fe=ft),!0)},B,W),ze=!1;if(Fe){var Je=x-Fe.left<Fe.right-x,Ye=Je==Y;Ie=Pe+(Ye?0:1),_e=Ye?"after":"before",xe=Je?Fe.left:Fe.right}else{Y||Ie!=W&&Ie!=B||Ie++,_e=Ie==0?"after":Ie==y.text.length?"before":$i(f,O,Ie-(Y?1:0)).bottom+N<=S==Y?"after":"before";var ct=Oa(f,qe(w,Ie,_e),"line",y,O);xe=ct.left,ze=S<ct.top?-1:S>=ct.bottom?1:0}return vg(w,Ie=G(y.text,Ie,1),_e,ze,x-xe)}function jw(f,y,w,x,S,O,N){var B=re(function(ue){var xe=S[ue],_e=xe.level!=1;return _g(Oa(f,qe(w,_e?xe.to:xe.from,_e?"before":"after"),"line",y,x),O,N,!0)},0,S.length-1),W=S[B];if(B>0){var Y=W.level!=1,le=Oa(f,qe(w,Y?W.from:W.to,Y?"after":"before"),"line",y,x);_g(le,O,N,!0)&&le.top>N&&(W=S[B-1])}return W}function zw(f,y,w,x,S,O,N){var B=Kv(f,y,x,N),W=B.begin,Y=B.end;/\s/.test(y.text.charAt(Y-1))&&Y--;for(var le=null,ue=null,xe=0;xe<S.length;xe++){var _e=S[xe];if(!(_e.from>=Y||_e.to<=W)){var Pe=$i(f,x,_e.level!=1?Math.min(Y,_e.to)-1:Math.max(W,_e.from)).right,Fe=Pe<O?O-Pe+1e9:Pe-O;(!le||ue>Fe)&&(le=_e,ue=Fe)}}return le||(le=S[S.length-1]),le.from<W&&(le={from:W,to:le.to,level:le.level}),le.to>Y&&(le={from:le.from,to:Y,level:le.level}),le}function hh(f){if(f.cachedTextHeight!=null)return f.cachedTextHeight;if(hs==null){hs=ee("pre",null,"CodeMirror-line-like");for(var y=0;y<49;++y)hs.appendChild(document.createTextNode("x")),hs.appendChild(ee("br"));hs.appendChild(document.createTextNode("x"))}J(f.measure,hs);var w=hs.offsetHeight/50;return w>3&&(f.cachedTextHeight=w),V(f.measure),w||1}function dh(f){if(f.cachedCharWidth!=null)return f.cachedCharWidth;var y=ee("span","xxxxxxxxxx"),w=ee("pre",[y],"CodeMirror-line-like");J(f.measure,w);var x=y.getBoundingClientRect(),S=(x.right-x.left)/10;return S>2&&(f.cachedCharWidth=S),S||10}function xg(f){for(var y=f.display,w={},x={},S=y.gutters.clientLeft,O=y.gutters.firstChild,N=0;O;O=O.nextSibling,++N){var B=f.display.gutterSpecs[N].className;w[B]=O.offsetLeft+O.clientLeft+S,x[B]=O.clientWidth}return{fixedPos:wg(y),gutterTotalWidth:y.gutters.offsetWidth,gutterLeft:w,gutterWidth:x,wrapperWidth:y.wrapper.clientWidth}}function wg(f){return f.scroller.getBoundingClientRect().left-f.sizer.getBoundingClientRect().left}function Qv(f){var y=hh(f.display),w=f.options.lineWrapping,x=w&&Math.max(5,f.display.scroller.clientWidth/dh(f.display)-3);return function(S){if(Rt(f.doc,S))return 0;var O=0;if(S.widgets)for(var N=0;N<S.widgets.length;N++)S.widgets[N].height&&(O+=S.widgets[N].height);return w?O+(Math.ceil(S.text.length/x)||1)*y:O+y}}function Eg(f){var y=f.doc,w=Qv(f);y.iter(function(x){var S=w(x);S!=x.height&&Ot(x,S)})}function sc(f,y,w,x){var S=f.display;if(!w&&Yi(y).getAttribute("cm-not-content")=="true")return null;var O,N,B=S.lineSpace.getBoundingClientRect();try{O=y.clientX-B.left,N=y.clientY-B.top}catch{return null}var W,Y=bg(f,O,N);if(x&&Y.xRel>0&&(W=Ke(f.doc,Y.line).text).length==Y.ch){var le=He(W,W.length,f.options.tabSize)-W.length;Y=qe(Y.line,Math.max(0,Math.round((O-yp(f.display).left)/dh(f.display))-le))}return Y}function oc(f,y){if(y>=f.display.viewTo||(y-=f.display.viewFrom)<0)return null;for(var w=f.display.view,x=0;x<w.length;x++)if((y-=w[x].size)<0)return x}function ro(f,y,w,x){y==null&&(y=f.doc.first),w==null&&(w=f.doc.first+f.doc.size),x||(x=0);var S=f.display;if(x&&w<S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>y)&&(S.updateLineNumbers=y),f.curOp.viewChanged=!0,y>=S.viewTo)Ms&&La(f.doc,y)<S.viewTo&&_u(f);else if(w<=S.viewFrom)Ms&&Ul(f.doc,w+x)>S.viewFrom?_u(f):(S.viewFrom+=x,S.viewTo+=x);else if(y<=S.viewFrom&&w>=S.viewTo)_u(f);else if(y<=S.viewFrom){var O=_p(f,w,w+x,1);O?(S.view=S.view.slice(O.index),S.viewFrom=O.lineN,S.viewTo+=x):_u(f)}else if(w>=S.viewTo){var N=_p(f,y,y,-1);N?(S.view=S.view.slice(0,N.index),S.viewTo=N.lineN):_u(f)}else{var B=_p(f,y,y,-1),W=_p(f,w,w+x,1);B&&W?(S.view=S.view.slice(0,B.index).concat(us(f,B.lineN,W.lineN)).concat(S.view.slice(W.index)),S.viewTo+=x):_u(f)}var Y=S.externalMeasured;Y&&(w<Y.lineN?Y.lineN+=x:y<Y.lineN+Y.size&&(S.externalMeasured=null))}function bu(f,y,w){f.curOp.viewChanged=!0;var x=f.display,S=f.display.externalMeasured;if(S&&y>=S.lineN&&y<S.lineN+S.size&&(x.externalMeasured=null),!(y<x.viewFrom||y>=x.viewTo)){var O=x.view[oc(f,y)];if(O.node!=null){var N=O.changes||(O.changes=[]);xt(N,w)==-1&&N.push(w)}}}function _u(f){f.display.viewFrom=f.display.viewTo=f.doc.first,f.display.view=[],f.display.viewOffset=0}function _p(f,y,w,x){var S,O=oc(f,y),N=f.display.view;if(!Ms||w==f.doc.first+f.doc.size)return{index:O,lineN:w};for(var B=f.display.viewFrom,W=0;W<O;W++)B+=N[W].size;if(B!=y){if(x>0){if(O==N.length-1)return null;S=B+N[O].size-y,O++}else S=B-y;y+=S,w+=S}for(;La(f.doc,w)!=w;){if(O==(x<0?0:N.length-1))return null;w+=x*N[O-(x<0?1:0)].size,O+=x}return{index:O,lineN:w}}function eb(f){for(var y=f.display.view,w=0,x=0;x<y.length;x++){var S=y[x];S.hidden||S.node&&!S.changes||++w}return w}function Ld(f){f.display.input.showSelection(f.display.input.prepareSelection())}function tb(f,y){y===void 0&&(y=!0);var w=f.doc,x={},S=x.cursors=document.createDocumentFragment(),O=x.selection=document.createDocumentFragment(),N=f.options.$customCursor;N&&(y=!0);for(var B=0;B<w.sel.ranges.length;B++)if(y||B!=w.sel.primIndex){var W=w.sel.ranges[B];if(!(W.from().line>=f.display.viewTo||W.to().line<f.display.viewFrom)){var Y=W.empty();if(N){var le=N(f,W);le&&Sg(f,le,S)}else(Y||f.options.showCursorWhenSelecting)&&Sg(f,W.head,S);Y||Uw(f,W,O)}}return x}function Sg(f,y,w){var x=Oa(f,y,"div",null,null,!f.options.singleCursorHeightPerLine),S=w.appendChild(ee("div","","CodeMirror-cursor"));if(S.style.left=x.left+"px",S.style.top=x.top+"px",S.style.height=Math.max(0,x.bottom-x.top)*f.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(f.getWrapperElement().className)){var O=bp(f,y,"div",null,null),N=O.right-O.left;S.style.width=(N>0?N:f.defaultCharWidth())+"px"}if(x.other){var B=w.appendChild(ee("div","","CodeMirror-cursor CodeMirror-secondarycursor"));B.style.display="",B.style.left=x.other.left+"px",B.style.top=x.other.top+"px",B.style.height=.85*(x.other.bottom-x.other.top)+"px"}}function xp(f,y){return f.top-y.top||f.left-y.left}function Uw(f,y,w){var x=f.display,S=f.doc,O=document.createDocumentFragment(),N=yp(f.display),B=N.left,W=Math.max(x.sizerWidth,Hl(f)-x.sizer.offsetLeft)-N.right,Y=S.direction=="ltr";function le(Ye,ct,lt,ft){ct<0&&(ct=0),ct=Math.round(ct),ft=Math.round(ft),O.appendChild(ee("div",null,"CodeMirror-selected","position: absolute; left: "+Ye+`px;
                             top: `+ct+"px; width: "+(lt??W-Ye)+`px;
                             height: `+(ft-ct)+"px"))}function ue(Ye,ct,lt){var ft,li,Ct=Ke(S,Ye),Oi=Ct.text.length;function ii(Ji,Ui){return bp(f,qe(Ye,Ji),"div",Ct,Ui)}function Ki(Ji,Ui,Qi){var Ci=Jv(f,Ct,null,Ji),Ar=Ui=="ltr"==(Qi=="after")?"left":"right";return ii(Qi=="after"?Ci.begin:Ci.end-(/\s/.test(Ct.text.charAt(Ci.end-1))?2:1),Ar)[Ar]}var Tr=Ae(Ct,S.direction);return function(Ji,Ui,Qi,Ci){if(!Ji)return Ci(Ui,Qi,"ltr",0);for(var Ar=!1,vi=0;vi<Ji.length;++vi){var Vi=Ji[vi];(Vi.from<Qi&&Vi.to>Ui||Ui==Qi&&Vi.to==Ui)&&(Ci(Math.max(Vi.from,Ui),Math.min(Vi.to,Qi),Vi.level==1?"rtl":"ltr",vi),Ar=!0)}Ar||Ci(Ui,Qi,"ltr")}(Tr,ct||0,lt??Oi,function(Ji,Ui,Qi,Ci){var Ar=Qi=="ltr",vi=ii(Ji,Ar?"left":"right"),Vi=ii(Ui-1,Ar?"right":"left"),Di=ct==null&&Ji==0,dr=lt==null&&Ui==Oi,qs=Ci==0,kr=!Tr||Ci==Tr.length-1;if(Vi.top-vi.top<=3){var Rs=(Y?dr:Di)&&kr,Is=(Y?Di:dr)&&qs?B:(Ar?vi:Vi).left,yn=Rs?W:(Ar?Vi:vi).right;le(Is,vi.top,yn-Is,vi.bottom)}else{var Hs,va,ws,Na;Ar?(Hs=Y&&Di&&qs?B:vi.left,va=Y?W:Ki(Ji,Qi,"before"),ws=Y?B:Ki(Ui,Qi,"after"),Na=Y&&dr&&kr?W:Vi.right):(Hs=Y?Ki(Ji,Qi,"before"):B,va=!Y&&Di&&qs?W:vi.right,ws=!Y&&dr&&kr?B:Vi.left,Na=Y?Ki(Ui,Qi,"after"):W),le(Hs,vi.top,va-Hs,vi.bottom),vi.bottom<Vi.top&&le(B,vi.bottom,null,Vi.top),le(ws,Vi.top,Na-ws,Vi.bottom)}(!ft||xp(vi,ft)<0)&&(ft=vi),xp(Vi,ft)<0&&(ft=Vi),(!li||xp(vi,li)<0)&&(li=vi),xp(Vi,li)<0&&(li=Vi)}),{start:ft,end:li}}var xe=y.from(),_e=y.to();if(xe.line==_e.line)ue(xe.line,xe.ch,_e.ch);else{var Pe=Ke(S,xe.line),Fe=Ke(S,_e.line),Ie=Qn(Pe)==Qn(Fe),ze=ue(xe.line,xe.ch,Ie?Pe.text.length+1:null).end,Je=ue(_e.line,Ie?0:null,_e.ch).start;Ie&&(ze.top<Je.top-2?(le(ze.right,ze.top,null,ze.bottom),le(B,Je.top,Je.left,Je.bottom)):le(ze.right,ze.top,Je.left-ze.right,ze.bottom)),ze.bottom<Je.top&&le(B,ze.bottom,null,Je.top)}w.appendChild(O)}function Cg(f){if(f.state.focused){var y=f.display;clearInterval(y.blinker);var w=!0;y.cursorDiv.style.visibility="",f.options.cursorBlinkRate>0?y.blinker=setInterval(function(){f.hasFocus()||fh(f),y.cursorDiv.style.visibility=(w=!w)?"":"hidden"},f.options.cursorBlinkRate):f.options.cursorBlinkRate<0&&(y.cursorDiv.style.visibility="hidden")}}function ib(f){f.hasFocus()||(f.display.input.focus(),f.state.focused||Ag(f))}function Tg(f){f.state.delayingBlurEvent=!0,setTimeout(function(){f.state.delayingBlurEvent&&(f.state.delayingBlurEvent=!1,f.state.focused&&fh(f))},100)}function Ag(f,y){f.state.delayingBlurEvent&&!f.state.draggingText&&(f.state.delayingBlurEvent=!1),f.options.readOnly!="nocursor"&&(f.state.focused||(et(f,"focus",f,y),f.state.focused=!0,z(f.display.wrapper,"CodeMirror-focused"),f.curOp||f.display.selForContextMenu==f.doc.sel||(f.display.input.reset(),p&&setTimeout(function(){return f.display.input.reset(!0)},20)),f.display.input.receivedFocus()),Cg(f))}function fh(f,y){f.state.delayingBlurEvent||(f.state.focused&&(et(f,"blur",f,y),f.state.focused=!1,H(f.display.wrapper,"CodeMirror-focused")),clearInterval(f.display.blinker),setTimeout(function(){f.state.focused||(f.display.shift=!1)},150))}function wp(f){for(var y=f.display,w=y.lineDiv.offsetTop,x=Math.max(0,y.scroller.getBoundingClientRect().top),S=y.lineDiv.getBoundingClientRect().top,O=0,N=0;N<y.view.length;N++){var B=y.view[N],W=f.options.lineWrapping,Y=void 0,le=0;if(!B.hidden){if(S+=B.line.height,h&&d<8){var ue=B.node.offsetTop+B.node.offsetHeight;Y=ue-w,w=ue}else{var xe=B.node.getBoundingClientRect();Y=xe.bottom-xe.top,!W&&B.text.firstChild&&(le=B.text.firstChild.getBoundingClientRect().right-xe.left-1)}var _e=B.line.height-Y;if((_e>.005||_e<-.005)&&(S<x&&(O-=_e),Ot(B.line,Y),rb(B.line),B.rest))for(var Pe=0;Pe<B.rest.length;Pe++)rb(B.rest[Pe]);if(le>f.display.sizerWidth){var Fe=Math.ceil(le/dh(f.display));Fe>f.display.maxLineLength&&(f.display.maxLineLength=Fe,f.display.maxLine=B.line,f.display.maxLineChanged=!0)}}}Math.abs(O)>2&&(y.scroller.scrollTop+=O)}function rb(f){if(f.widgets)for(var y=0;y<f.widgets.length;++y){var w=f.widgets[y],x=w.node.parentNode;x&&(w.height=x.offsetHeight)}}function Ep(f,y,w){var x=w&&w.top!=null?Math.max(0,w.top):f.scroller.scrollTop;x=Math.floor(x-ql(f));var S=w&&w.bottom!=null?w.bottom:x+f.wrapper.clientHeight,O=Er(y,x),N=Er(y,S);if(w&&w.ensure){var B=w.ensure.from.line,W=w.ensure.to.line;B<O?(O=B,N=Er(y,me(Ke(y,B))+f.wrapper.clientHeight)):Math.min(W,y.lastLine())>=N&&(O=Er(y,me(Ke(y,W))-f.wrapper.clientHeight),N=W)}return{from:O,to:Math.max(N,O+1)}}function kg(f,y){var w=f.display,x=hh(f.display);y.top<0&&(y.top=0);var S=f.curOp&&f.curOp.scrollTop!=null?f.curOp.scrollTop:w.scroller.scrollTop,O=Re(f),N={};y.bottom-y.top>O&&(y.bottom=y.top+O);var B=f.doc.height+Dd(w),W=y.top<x,Y=y.bottom>B-x;if(y.top<S)N.scrollTop=W?0:y.top;else if(y.bottom>S+O){var le=Math.min(y.top,(Y?B:y.bottom)-O);le!=S&&(N.scrollTop=le)}var ue=f.options.fixedGutter?0:w.gutters.offsetWidth,xe=f.curOp&&f.curOp.scrollLeft!=null?f.curOp.scrollLeft:w.scroller.scrollLeft-ue,_e=Hl(f)-w.gutters.offsetWidth,Pe=y.right-y.left>_e;return Pe&&(y.right=y.left+_e),y.left<10?N.scrollLeft=0:y.left<xe?N.scrollLeft=Math.max(0,y.left+ue-(Pe?0:10)):y.right>_e+xe-3&&(N.scrollLeft=y.right+(Pe?0:10)-_e),N}function Dg(f,y){y!=null&&(Sp(f),f.curOp.scrollTop=(f.curOp.scrollTop==null?f.doc.scrollTop:f.curOp.scrollTop)+y)}function ph(f){Sp(f);var y=f.getCursor();f.curOp.scrollToPos={from:y,to:y,margin:f.options.cursorScrollMargin}}function Rd(f,y,w){y==null&&w==null||Sp(f),y!=null&&(f.curOp.scrollLeft=y),w!=null&&(f.curOp.scrollTop=w)}function Sp(f){var y=f.curOp.scrollToPos;y&&(f.curOp.scrollToPos=null,nb(f,Zv(f,y.from),Zv(f,y.to),y.margin))}function nb(f,y,w,x){var S=kg(f,{left:Math.min(y.left,w.left),top:Math.min(y.top,w.top)-x,right:Math.max(y.right,w.right),bottom:Math.max(y.bottom,w.bottom)+x});Rd(f,S.scrollLeft,S.scrollTop)}function Id(f,y){Math.abs(f.doc.scrollTop-y)<2||(a||Lg(f,{top:y}),sb(f,y,!0),a&&Lg(f),Fd(f,100))}function sb(f,y,w){y=Math.max(0,Math.min(f.display.scroller.scrollHeight-f.display.scroller.clientHeight,y)),(f.display.scroller.scrollTop!=y||w)&&(f.doc.scrollTop=y,f.display.scrollbars.setScrollTop(y),f.display.scroller.scrollTop!=y&&(f.display.scroller.scrollTop=y))}function ac(f,y,w,x){y=Math.max(0,Math.min(y,f.display.scroller.scrollWidth-f.display.scroller.clientWidth)),(w?y==f.doc.scrollLeft:Math.abs(f.doc.scrollLeft-y)<2)&&!x||(f.doc.scrollLeft=y,cb(f),f.display.scroller.scrollLeft!=y&&(f.display.scroller.scrollLeft=y),f.display.scrollbars.setScrollLeft(y))}function Od(f){var y=f.display,w=y.gutters.offsetWidth,x=Math.round(f.doc.height+Dd(f.display));return{clientHeight:y.scroller.clientHeight,viewHeight:y.wrapper.clientHeight,scrollWidth:y.scroller.scrollWidth,clientWidth:y.scroller.clientWidth,viewWidth:y.wrapper.clientWidth,barLeft:f.options.fixedGutter?w:0,docHeight:x,scrollHeight:x+ya(f)+y.barHeight,nativeBarWidth:y.nativeBarWidth,gutterWidth:w}}var lc=function(f,y,w){this.cm=w;var x=this.vert=ee("div",[ee("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),S=this.horiz=ee("div",[ee("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");x.tabIndex=S.tabIndex=-1,f(x),f(S),De(x,"scroll",function(){x.clientHeight&&y(x.scrollTop,"vertical")}),De(S,"scroll",function(){S.clientWidth&&y(S.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,h&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};lc.prototype.update=function(f){var y=f.scrollWidth>f.clientWidth+1,w=f.scrollHeight>f.clientHeight+1,x=f.nativeBarWidth;if(w){this.vert.style.display="block",this.vert.style.bottom=y?x+"px":"0";var S=f.viewHeight-(y?x:0);this.vert.firstChild.style.height=Math.max(0,f.scrollHeight-f.clientHeight+S)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(y){this.horiz.style.display="block",this.horiz.style.right=w?x+"px":"0",this.horiz.style.left=f.barLeft+"px";var O=f.viewWidth-f.barLeft-(w?x:0);this.horiz.firstChild.style.width=Math.max(0,f.scrollWidth-f.clientWidth+O)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&f.clientHeight>0&&(x==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:w?x:0,bottom:y?x:0}},lc.prototype.setScrollLeft=function(f){this.horiz.scrollLeft!=f&&(this.horiz.scrollLeft=f),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},lc.prototype.setScrollTop=function(f){this.vert.scrollTop!=f&&(this.vert.scrollTop=f),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},lc.prototype.zeroWidthHack=function(){var f=A&&!E?"12px":"18px";this.horiz.style.height=this.vert.style.width=f,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new st,this.disableVert=new st},lc.prototype.enableZeroWidthBar=function(f,y,w){f.style.visibility="",y.set(1e3,function x(){var S=f.getBoundingClientRect();(w=="vert"?document.elementFromPoint(S.right-1,(S.top+S.bottom)/2):document.elementFromPoint((S.right+S.left)/2,S.bottom-1))!=f?f.style.visibility="hidden":y.set(1e3,x)})},lc.prototype.clear=function(){var f=this.horiz.parentNode;f.removeChild(this.horiz),f.removeChild(this.vert)};var Pd=function(){};function mh(f,y){y||(y=Od(f));var w=f.display.barWidth,x=f.display.barHeight;ob(f,y);for(var S=0;S<4&&w!=f.display.barWidth||x!=f.display.barHeight;S++)w!=f.display.barWidth&&f.options.lineWrapping&&wp(f),ob(f,Od(f)),w=f.display.barWidth,x=f.display.barHeight}function ob(f,y){var w=f.display,x=w.scrollbars.update(y);w.sizer.style.paddingRight=(w.barWidth=x.right)+"px",w.sizer.style.paddingBottom=(w.barHeight=x.bottom)+"px",w.heightForcer.style.borderBottom=x.bottom+"px solid transparent",x.right&&x.bottom?(w.scrollbarFiller.style.display="block",w.scrollbarFiller.style.height=x.bottom+"px",w.scrollbarFiller.style.width=x.right+"px"):w.scrollbarFiller.style.display="",x.bottom&&f.options.coverGutterNextToScrollbar&&f.options.fixedGutter?(w.gutterFiller.style.display="block",w.gutterFiller.style.height=x.bottom+"px",w.gutterFiller.style.width=y.gutterWidth+"px"):w.gutterFiller.style.display=""}Pd.prototype.update=function(){return{bottom:0,right:0}},Pd.prototype.setScrollLeft=function(){},Pd.prototype.setScrollTop=function(){},Pd.prototype.clear=function(){};var ab={native:lc,null:Pd};function lb(f){f.display.scrollbars&&(f.display.scrollbars.clear(),f.display.scrollbars.addClass&&H(f.display.wrapper,f.display.scrollbars.addClass)),f.display.scrollbars=new ab[f.options.scrollbarStyle](function(y){f.display.wrapper.insertBefore(y,f.display.scrollbarFiller),De(y,"mousedown",function(){f.state.focused&&setTimeout(function(){return f.display.input.focus()},0)}),y.setAttribute("cm-not-content","true")},function(y,w){w=="horizontal"?ac(f,y):Id(f,y)},f),f.display.scrollbars.addClass&&z(f.display.wrapper,f.display.scrollbars.addClass)}var Gw=0;function uc(f){var y;f.curOp={cm:f,viewChanged:!1,startHeight:f.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Gw,markArrays:null},y=f.curOp,cs?cs.ops.push(y):y.ownsGroup=cs={ops:[y],delayedCallbacks:[]}}function cc(f){var y=f.curOp;y&&function(w,x){var S=w.ownsGroup;if(S)try{(function(O){var N=O.delayedCallbacks,B=0;do{for(;B<N.length;B++)N[B].call(null);for(var W=0;W<O.ops.length;W++){var Y=O.ops[W];if(Y.cursorActivityHandlers)for(;Y.cursorActivityCalled<Y.cursorActivityHandlers.length;)Y.cursorActivityHandlers[Y.cursorActivityCalled++].call(null,Y.cm)}}while(B<N.length)})(S)}finally{cs=null,x(S)}}(y,function(w){for(var x=0;x<w.ops.length;x++)w.ops[x].cm.curOp=null;(function(S){for(var O=S.ops,N=0;N<O.length;N++)qw(O[N]);for(var B=0;B<O.length;B++)Hw(O[B]);for(var W=0;W<O.length;W++)Vw(O[W]);for(var Y=0;Y<O.length;Y++)Ww(O[Y]);for(var le=0;le<O.length;le++)Yw(O[le])})(w)})}function qw(f){var y=f.cm,w=y.display;(function(x){var S=x.display;!S.scrollbarsClipped&&S.scroller.offsetWidth&&(S.nativeBarWidth=S.scroller.offsetWidth-S.scroller.clientWidth,S.heightForcer.style.height=ya(x)+"px",S.sizer.style.marginBottom=-S.nativeBarWidth+"px",S.sizer.style.borderRightWidth=ya(x)+"px",S.scrollbarsClipped=!0)})(y),f.updateMaxLine&&yt(y),f.mustUpdate=f.viewChanged||f.forceUpdate||f.scrollTop!=null||f.scrollToPos&&(f.scrollToPos.from.line<w.viewFrom||f.scrollToPos.to.line>=w.viewTo)||w.maxLineChanged&&y.options.lineWrapping,f.update=f.mustUpdate&&new Cp(y,f.mustUpdate&&{top:f.scrollTop,ensure:f.scrollToPos},f.forceUpdate)}function Hw(f){f.updatedDisplay=f.mustUpdate&&Mg(f.cm,f.update)}function Vw(f){var y=f.cm,w=y.display;f.updatedDisplay&&wp(y),f.barMeasure=Od(y),w.maxLineChanged&&!y.options.lineWrapping&&(f.adjustWidthTo=Wt(y,w.maxLine,w.maxLine.text.length).left+3,y.display.sizerWidth=f.adjustWidthTo,f.barMeasure.scrollWidth=Math.max(w.scroller.clientWidth,w.sizer.offsetLeft+f.adjustWidthTo+ya(y)+y.display.barWidth),f.maxScrollLeft=Math.max(0,w.sizer.offsetLeft+f.adjustWidthTo-Hl(y))),(f.updatedDisplay||f.selectionChanged)&&(f.preparedSelection=w.input.prepareSelection())}function Ww(f){var y=f.cm;f.adjustWidthTo!=null&&(y.display.sizer.style.minWidth=f.adjustWidthTo+"px",f.maxScrollLeft<y.doc.scrollLeft&&ac(y,Math.min(y.display.scroller.scrollLeft,f.maxScrollLeft),!0),y.display.maxLineChanged=!1);var w=f.focus&&f.focus==te($e(y));f.preparedSelection&&y.display.input.showSelection(f.preparedSelection,w),(f.updatedDisplay||f.startHeight!=y.doc.height)&&mh(y,f.barMeasure),f.updatedDisplay&&Ig(y,f.barMeasure),f.selectionChanged&&Cg(y),y.state.focused&&f.updateInput&&y.display.input.reset(f.typing),w&&ib(f.cm)}function Yw(f){var y=f.cm,w=y.display,x=y.doc;if(f.updatedDisplay&&ub(y,f.update),w.wheelStartX==null||f.scrollTop==null&&f.scrollLeft==null&&!f.scrollToPos||(w.wheelStartX=w.wheelStartY=null),f.scrollTop!=null&&sb(y,f.scrollTop,f.forceScroll),f.scrollLeft!=null&&ac(y,f.scrollLeft,!0,!0),f.scrollToPos){var S=function(Y,le,ue,xe){var _e;xe==null&&(xe=0),Y.options.lineWrapping||le!=ue||(ue=le.sticky=="before"?qe(le.line,le.ch+1,"before"):le,le=le.ch?qe(le.line,le.sticky=="before"?le.ch-1:le.ch,"after"):le);for(var Pe=0;Pe<5;Pe++){var Fe=!1,Ie=Oa(Y,le),ze=ue&&ue!=le?Oa(Y,ue):Ie,Je=kg(Y,_e={left:Math.min(Ie.left,ze.left),top:Math.min(Ie.top,ze.top)-xe,right:Math.max(Ie.left,ze.left),bottom:Math.max(Ie.bottom,ze.bottom)+xe}),Ye=Y.doc.scrollTop,ct=Y.doc.scrollLeft;if(Je.scrollTop!=null&&(Id(Y,Je.scrollTop),Math.abs(Y.doc.scrollTop-Ye)>1&&(Fe=!0)),Je.scrollLeft!=null&&(ac(Y,Je.scrollLeft),Math.abs(Y.doc.scrollLeft-ct)>1&&(Fe=!0)),!Fe)break}return _e}(y,Ft(x,f.scrollToPos.from),Ft(x,f.scrollToPos.to),f.scrollToPos.margin);(function(Y,le){if(!ht(Y,"scrollCursorIntoView")){var ue=Y.display,xe=ue.sizer.getBoundingClientRect(),_e=null,Pe=ue.wrapper.ownerDocument;if(le.top+xe.top<0?_e=!0:le.bottom+xe.top>(Pe.defaultView.innerHeight||Pe.documentElement.clientHeight)&&(_e=!1),_e!=null&&!C){var Fe=ee("div","",null,`position: absolute;
                         top: `+(le.top-ue.viewOffset-ql(Y.display))+`px;
                         height: `+(le.bottom-le.top+ya(Y)+ue.barHeight)+`px;
                         left: `+le.left+"px; width: "+Math.max(2,le.right-le.left)+"px;");Y.display.lineSpace.appendChild(Fe),Fe.scrollIntoView(_e),Y.display.lineSpace.removeChild(Fe)}}})(y,S)}var O=f.maybeHiddenMarkers,N=f.maybeUnhiddenMarkers;if(O)for(var B=0;B<O.length;++B)O[B].lines.length||et(O[B],"hide");if(N)for(var W=0;W<N.length;++W)N[W].lines.length&&et(N[W],"unhide");w.wrapper.offsetHeight&&(x.scrollTop=y.display.scroller.scrollTop),f.changeObjs&&et(y,"changes",y,f.changeObjs),f.update&&f.update.finish()}function Co(f,y){if(f.curOp)return y();uc(f);try{return y()}finally{cc(f)}}function ds(f,y){return function(){if(f.curOp)return y.apply(f,arguments);uc(f);try{return y.apply(f,arguments)}finally{cc(f)}}}function Gs(f){return function(){if(this.curOp)return f.apply(this,arguments);uc(this);try{return f.apply(this,arguments)}finally{cc(this)}}}function fs(f){return function(){var y=this.cm;if(!y||y.curOp)return f.apply(this,arguments);uc(y);try{return f.apply(this,arguments)}finally{cc(y)}}}function Fd(f,y){f.doc.highlightFrontier<f.display.viewTo&&f.state.highlight.set(y,ot(Xw,f))}function Xw(f){var y=f.doc;if(!(y.highlightFrontier>=f.display.viewTo)){var w=+new Date+f.options.workTime,x=xo(f,y.highlightFrontier),S=[];y.iter(x.line,Math.min(y.first+y.size,f.display.viewTo+500),function(O){if(x.line>=f.display.viewFrom){var N=O.styles,B=O.text.length>f.options.maxHighlightLength?bt(y.mode,x.state):null,W=_o(f,O,x,!0);B&&(x.state=B),O.styles=W.styles;var Y=O.styleClasses,le=W.classes;le?O.styleClasses=le:Y&&(O.styleClasses=null);for(var ue=!N||N.length!=O.styles.length||Y!=le&&(!Y||!le||Y.bgClass!=le.bgClass||Y.textClass!=le.textClass),xe=0;!ue&&xe<N.length;++xe)ue=N[xe]!=O.styles[xe];ue&&S.push(x.line),O.stateAfter=x.save(),x.nextLine()}else O.text.length<=f.options.maxHighlightLength&&hl(f,O.text,x),O.stateAfter=x.line%5==0?x.save():null,x.nextLine();if(+new Date>w)return Fd(f,f.options.workDelay),!0}),y.highlightFrontier=x.line,y.modeFrontier=Math.max(y.modeFrontier,x.line),S.length&&Co(f,function(){for(var O=0;O<S.length;O++)bu(f,S[O],"text")})}}var Cp=function(f,y,w){var x=f.display;this.viewport=y,this.visible=Ep(x,f.doc,y),this.editorIsHidden=!x.wrapper.offsetWidth,this.wrapperHeight=x.wrapper.clientHeight,this.wrapperWidth=x.wrapper.clientWidth,this.oldDisplayWidth=Hl(f),this.force=w,this.dims=xg(f),this.events=[]};function Zw(f){if(f.hasFocus())return null;var y=te($e(f));if(!y||!de(f.display.lineDiv,y))return null;var w={activeElt:y};if(window.getSelection){var x=Xe(f).getSelection();x.anchorNode&&x.extend&&de(f.display.lineDiv,x.anchorNode)&&(w.anchorNode=x.anchorNode,w.anchorOffset=x.anchorOffset,w.focusNode=x.focusNode,w.focusOffset=x.focusOffset)}return w}function Mg(f,y){var w=f.display,x=f.doc;if(y.editorIsHidden)return _u(f),!1;if(!y.force&&y.visible.from>=w.viewFrom&&y.visible.to<=w.viewTo&&(w.updateLineNumbers==null||w.updateLineNumbers>=w.viewTo)&&w.renderedView==w.view&&eb(f)==0)return!1;hb(f)&&(_u(f),y.dims=xg(f));var S=x.first+x.size,O=Math.max(y.visible.from-f.options.viewportMargin,x.first),N=Math.min(S,y.visible.to+f.options.viewportMargin);w.viewFrom<O&&O-w.viewFrom<20&&(O=Math.max(x.first,w.viewFrom)),w.viewTo>N&&w.viewTo-N<20&&(N=Math.min(S,w.viewTo)),Ms&&(O=La(f.doc,O),N=Ul(f.doc,N));var B=O!=w.viewFrom||N!=w.viewTo||w.lastWrapHeight!=y.wrapperHeight||w.lastWrapWidth!=y.wrapperWidth;(function(le,ue,xe){var _e=le.display;_e.view.length==0||ue>=_e.viewTo||xe<=_e.viewFrom?(_e.view=us(le,ue,xe),_e.viewFrom=ue):(_e.viewFrom>ue?_e.view=us(le,ue,_e.viewFrom).concat(_e.view):_e.viewFrom<ue&&(_e.view=_e.view.slice(oc(le,ue))),_e.viewFrom=ue,_e.viewTo<xe?_e.view=_e.view.concat(us(le,_e.viewTo,xe)):_e.viewTo>xe&&(_e.view=_e.view.slice(0,oc(le,xe)))),_e.viewTo=xe})(f,O,N),w.viewOffset=me(Ke(f.doc,w.viewFrom)),f.display.mover.style.top=w.viewOffset+"px";var W=eb(f);if(!B&&W==0&&!y.force&&w.renderedView==w.view&&(w.updateLineNumbers==null||w.updateLineNumbers>=w.viewTo))return!1;var Y=Zw(f);return W>4&&(w.lineDiv.style.display="none"),function(le,ue,xe){var _e=le.display,Pe=le.options.lineNumbers,Fe=_e.lineDiv,Ie=Fe.firstChild;function ze(Ct){var Oi=Ct.nextSibling;return p&&A&&le.display.currentWheelTarget==Ct?Ct.style.display="none":Ct.parentNode.removeChild(Ct),Oi}for(var Je=_e.view,Ye=_e.viewFrom,ct=0;ct<Je.length;ct++){var lt=Je[ct];if(!lt.hidden)if(lt.node&&lt.node.parentNode==Fe){for(;Ie!=lt.node;)Ie=ze(Ie);var ft=Pe&&ue!=null&&ue<=Ye&&lt.lineNumber;lt.changes&&(xt(lt.changes,"gutter")>-1&&(ft=!1),oh(le,lt,Ye,xe)),ft&&(V(lt.lineNumber),lt.lineNumber.appendChild(document.createTextNode(ni(le.options,Ye)))),Ie=lt.node.nextSibling}else{var li=Ad(le,lt,Ye,xe);Fe.insertBefore(li,Ie)}Ye+=lt.size}for(;Ie;)Ie=ze(Ie)}(f,w.updateLineNumbers,y.dims),W>4&&(w.lineDiv.style.display=""),w.renderedView=w.view,function(le){if(le&&le.activeElt&&le.activeElt!=te(le.activeElt.ownerDocument)&&(le.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(le.activeElt.nodeName)&&le.anchorNode&&de(document.body,le.anchorNode)&&de(document.body,le.focusNode))){var ue=le.activeElt.ownerDocument,xe=ue.defaultView.getSelection(),_e=ue.createRange();_e.setEnd(le.anchorNode,le.anchorOffset),_e.collapse(!1),xe.removeAllRanges(),xe.addRange(_e),xe.extend(le.focusNode,le.focusOffset)}}(Y),V(w.cursorDiv),V(w.selectionDiv),w.gutters.style.height=w.sizer.style.minHeight=0,B&&(w.lastWrapHeight=y.wrapperHeight,w.lastWrapWidth=y.wrapperWidth,Fd(f,400)),w.updateLineNumbers=null,!0}function ub(f,y){for(var w=y.viewport,x=!0;;x=!1){if(x&&f.options.lineWrapping&&y.oldDisplayWidth!=Hl(f))x&&(y.visible=Ep(f.display,f.doc,w));else if(w&&w.top!=null&&(w={top:Math.min(f.doc.height+Dd(f.display)-Re(f),w.top)}),y.visible=Ep(f.display,f.doc,w),y.visible.from>=f.display.viewFrom&&y.visible.to<=f.display.viewTo)break;if(!Mg(f,y))break;wp(f);var S=Od(f);Ld(f),mh(f,S),Ig(f,S),y.force=!1}y.signal(f,"update",f),f.display.viewFrom==f.display.reportedViewFrom&&f.display.viewTo==f.display.reportedViewTo||(y.signal(f,"viewportChange",f,f.display.viewFrom,f.display.viewTo),f.display.reportedViewFrom=f.display.viewFrom,f.display.reportedViewTo=f.display.viewTo)}function Lg(f,y){var w=new Cp(f,y);if(Mg(f,w)){wp(f),ub(f,w);var x=Od(f);Ld(f),mh(f,x),Ig(f,x),w.finish()}}function Rg(f){var y=f.gutters.offsetWidth;f.sizer.style.marginLeft=y+"px",Wr(f,"gutterChanged",f)}function Ig(f,y){f.display.sizer.style.minHeight=y.docHeight+"px",f.display.heightForcer.style.top=y.docHeight+"px",f.display.gutters.style.height=y.docHeight+f.display.barHeight+ya(f)+"px"}function cb(f){var y=f.display,w=y.view;if(y.alignWidgets||y.gutters.firstChild&&f.options.fixedGutter){for(var x=wg(y)-y.scroller.scrollLeft+f.doc.scrollLeft,S=y.gutters.offsetWidth,O=x+"px",N=0;N<w.length;N++)if(!w[N].hidden){f.options.fixedGutter&&(w[N].gutter&&(w[N].gutter.style.left=O),w[N].gutterBackground&&(w[N].gutterBackground.style.left=O));var B=w[N].alignable;if(B)for(var W=0;W<B.length;W++)B[W].style.left=O}f.options.fixedGutter&&(y.gutters.style.left=x+S+"px")}}function hb(f){if(!f.options.lineNumbers)return!1;var y=f.doc,w=ni(f.options,y.first+y.size-1),x=f.display;if(w.length!=x.lineNumChars){var S=x.measure.appendChild(ee("div",[ee("div",w)],"CodeMirror-linenumber CodeMirror-gutter-elt")),O=S.firstChild.offsetWidth,N=S.offsetWidth-O;return x.lineGutter.style.width="",x.lineNumInnerWidth=Math.max(O,x.lineGutter.offsetWidth-N)+1,x.lineNumWidth=x.lineNumInnerWidth+N,x.lineNumChars=x.lineNumInnerWidth?w.length:-1,x.lineGutter.style.width=x.lineNumWidth+"px",Rg(f.display),!0}return!1}function Og(f,y){for(var w=[],x=!1,S=0;S<f.length;S++){var O=f[S],N=null;if(typeof O!="string"&&(N=O.style,O=O.className),O=="CodeMirror-linenumbers"){if(!y)continue;x=!0}w.push({className:O,style:N})}return y&&!x&&w.push({className:"CodeMirror-linenumbers",style:null}),w}function db(f){var y=f.gutters,w=f.gutterSpecs;V(y),f.lineGutter=null;for(var x=0;x<w.length;++x){var S=w[x],O=S.className,N=S.style,B=y.appendChild(ee("div",null,"CodeMirror-gutter "+O));N&&(B.style.cssText=N),O=="CodeMirror-linenumbers"&&(f.lineGutter=B,B.style.width=(f.lineNumWidth||1)+"px")}y.style.display=w.length?"":"none",Rg(f)}function Nd(f){db(f.display),ro(f),cb(f)}function Kw(f,y,w,x){var S=this;this.input=w,S.scrollbarFiller=ee("div",null,"CodeMirror-scrollbar-filler"),S.scrollbarFiller.setAttribute("cm-not-content","true"),S.gutterFiller=ee("div",null,"CodeMirror-gutter-filler"),S.gutterFiller.setAttribute("cm-not-content","true"),S.lineDiv=ie("div",null,"CodeMirror-code"),S.selectionDiv=ee("div",null,null,"position: relative; z-index: 1"),S.cursorDiv=ee("div",null,"CodeMirror-cursors"),S.measure=ee("div",null,"CodeMirror-measure"),S.lineMeasure=ee("div",null,"CodeMirror-measure"),S.lineSpace=ie("div",[S.measure,S.lineMeasure,S.selectionDiv,S.cursorDiv,S.lineDiv],null,"position: relative; outline: none");var O=ie("div",[S.lineSpace],"CodeMirror-lines");S.mover=ee("div",[O],null,"position: relative"),S.sizer=ee("div",[S.mover],"CodeMirror-sizer"),S.sizerWidth=null,S.heightForcer=ee("div",null,null,"position: absolute; height: 50px; width: 1px;"),S.gutters=ee("div",null,"CodeMirror-gutters"),S.lineGutter=null,S.scroller=ee("div",[S.sizer,S.heightForcer,S.gutters],"CodeMirror-scroll"),S.scroller.setAttribute("tabIndex","-1"),S.wrapper=ee("div",[S.scrollbarFiller,S.gutterFiller,S.scroller],"CodeMirror"),g&&v>=105&&(S.wrapper.style.clipPath="inset(0px)"),S.wrapper.setAttribute("translate","no"),h&&d<8&&(S.gutters.style.zIndex=-1,S.scroller.style.paddingRight=0),p||a&&M||(S.scroller.draggable=!0),f&&(f.appendChild?f.appendChild(S.wrapper):f(S.wrapper)),S.viewFrom=S.viewTo=y.first,S.reportedViewFrom=S.reportedViewTo=y.first,S.view=[],S.renderedView=null,S.externalMeasured=null,S.viewOffset=0,S.lastWrapHeight=S.lastWrapWidth=0,S.updateLineNumbers=null,S.nativeBarWidth=S.barHeight=S.barWidth=0,S.scrollbarsClipped=!1,S.lineNumWidth=S.lineNumInnerWidth=S.lineNumChars=null,S.alignWidgets=!1,S.cachedCharWidth=S.cachedTextHeight=S.cachedPaddingH=null,S.maxLine=null,S.maxLineLength=0,S.maxLineChanged=!1,S.wheelDX=S.wheelDY=S.wheelStartX=S.wheelStartY=null,S.shift=!1,S.selForContextMenu=null,S.activeTouch=null,S.gutterSpecs=Og(x.gutters,x.lineNumbers),db(S),w.init(S)}Cp.prototype.signal=function(f,y){gt(f,y)&&this.events.push(arguments)},Cp.prototype.finish=function(){for(var f=0;f<this.events.length;f++)et.apply(null,this.events[f])};var Tp=0,Vl=null;function fb(f){var y=f.wheelDeltaX,w=f.wheelDeltaY;return y==null&&f.detail&&f.axis==f.HORIZONTAL_AXIS&&(y=f.detail),w==null&&f.detail&&f.axis==f.VERTICAL_AXIS?w=f.detail:w==null&&(w=f.wheelDelta),{x:y,y:w}}function Jw(f){var y=fb(f);return y.x*=Vl,y.y*=Vl,y}function pb(f,y){g&&v==102&&(f.display.chromeScrollHack==null?f.display.sizer.style.pointerEvents="none":clearTimeout(f.display.chromeScrollHack),f.display.chromeScrollHack=setTimeout(function(){f.display.chromeScrollHack=null,f.display.sizer.style.pointerEvents=""},100));var w=fb(y),x=w.x,S=w.y,O=Vl;y.deltaMode===0&&(x=y.deltaX,S=y.deltaY,O=1);var N=f.display,B=N.scroller,W=B.scrollWidth>B.clientWidth,Y=B.scrollHeight>B.clientHeight;if(x&&W||S&&Y){if(S&&A&&p){e:for(var le=y.target,ue=N.view;le!=B;le=le.parentNode)for(var xe=0;xe<ue.length;xe++)if(ue[xe].node==le){f.display.currentWheelTarget=le;break e}}if(x&&!a&&!b&&O!=null)return S&&Y&&Id(f,Math.max(0,B.scrollTop+S*O)),ac(f,Math.max(0,B.scrollLeft+x*O)),(!S||S&&Y)&&Kt(y),void(N.wheelStartX=null);if(S&&O!=null){var _e=S*O,Pe=f.doc.scrollTop,Fe=Pe+N.wrapper.clientHeight;_e<0?Pe=Math.max(0,Pe+_e-50):Fe=Math.min(f.doc.height,Fe+_e+50),Lg(f,{top:Pe,bottom:Fe})}Tp<20&&y.deltaMode!==0&&(N.wheelStartX==null?(N.wheelStartX=B.scrollLeft,N.wheelStartY=B.scrollTop,N.wheelDX=x,N.wheelDY=S,setTimeout(function(){if(N.wheelStartX!=null){var Ie=B.scrollLeft-N.wheelStartX,ze=B.scrollTop-N.wheelStartY,Je=ze&&N.wheelDY&&ze/N.wheelDY||Ie&&N.wheelDX&&Ie/N.wheelDX;N.wheelStartX=N.wheelStartY=null,Je&&(Vl=(Vl*Tp+Je)/(Tp+1),++Tp)}},200)):(N.wheelDX+=x,N.wheelDY+=S))}}h?Vl=-.53:a?Vl=15:g?Vl=-.7:_&&(Vl=-1/3);var Xo=function(f,y){this.ranges=f,this.primIndex=y};Xo.prototype.primary=function(){return this.ranges[this.primIndex]},Xo.prototype.equals=function(f){if(f==this)return!0;if(f.primIndex!=this.primIndex||f.ranges.length!=this.ranges.length)return!1;for(var y=0;y<this.ranges.length;y++){var w=this.ranges[y],x=f.ranges[y];if(!Xi(w.anchor,x.anchor)||!Xi(w.head,x.head))return!1}return!0},Xo.prototype.deepCopy=function(){for(var f=[],y=0;y<this.ranges.length;y++)f[y]=new Cr(un(this.ranges[y].anchor),un(this.ranges[y].head));return new Xo(f,this.primIndex)},Xo.prototype.somethingSelected=function(){for(var f=0;f<this.ranges.length;f++)if(!this.ranges[f].empty())return!0;return!1},Xo.prototype.contains=function(f,y){y||(y=f);for(var w=0;w<this.ranges.length;w++){var x=this.ranges[w];if(dt(y,x.from())>=0&&dt(f,x.to())<=0)return w}return-1};var Cr=function(f,y){this.anchor=f,this.head=y};function Pa(f,y,w){var x=f&&f.options.selectionsMayTouch,S=y[w];y.sort(function(xe,_e){return dt(xe.from(),_e.from())}),w=xt(y,S);for(var O=1;O<y.length;O++){var N=y[O],B=y[O-1],W=dt(B.to(),N.from());if(x&&!N.empty()?W>0:W>=0){var Y=Or(B.from(),N.from()),le=Sr(B.to(),N.to()),ue=B.empty()?N.from()==N.head:B.from()==B.head;O<=w&&--w,y.splice(--O,2,new Cr(ue?le:Y,ue?Y:le))}}return new Xo(y,w)}function xu(f,y){return new Xo([new Cr(f,y||f)],0)}function wu(f){return f.text?qe(f.from.line+f.text.length-1,oe(f.text).length+(f.text.length==1?f.from.ch:0)):f.to}function mb(f,y){if(dt(f,y.from)<0)return f;if(dt(f,y.to)<=0)return wu(y);var w=f.line+y.text.length-(y.to.line-y.from.line)-1,x=f.ch;return f.line==y.to.line&&(x+=wu(y).ch-y.to.ch),qe(w,x)}function Pg(f,y){for(var w=[],x=0;x<f.sel.ranges.length;x++){var S=f.sel.ranges[x];w.push(new Cr(mb(S.anchor,y),mb(S.head,y)))}return Pa(f.cm,w,f.sel.primIndex)}function gb(f,y,w){return f.line==y.line?qe(w.line,f.ch-y.ch+w.ch):qe(w.line+(f.line-y.line),f.ch)}function Fg(f){f.doc.mode=ke(f.options,f.doc.modeOption),$d(f)}function $d(f){f.doc.iter(function(y){y.stateAfter&&(y.stateAfter=null),y.styles&&(y.styles=null)}),f.doc.modeFrontier=f.doc.highlightFrontier=f.doc.first,Fd(f,100),f.state.modeGen++,f.curOp&&ro(f)}function yb(f,y){return y.from.ch==0&&y.to.ch==0&&oe(y.text)==""&&(!f.cm||f.cm.options.wholeLineUpdateBefore)}function Ng(f,y,w,x){function S(Je){return w?w[Je]:null}function O(Je,Ye,ct){(function(lt,ft,li,Ct){lt.text=ft,lt.stateAfter&&(lt.stateAfter=null),lt.styles&&(lt.styles=null),lt.order!=null&&(lt.order=null),zl(lt),Jn(lt,li);var Oi=Ct?Ct(lt):1;Oi!=lt.height&&Ot(lt,Oi)})(Je,Ye,ct,x),Wr(Je,"change",Je,y)}function N(Je,Ye){for(var ct=[],lt=Je;lt<Ye;++lt)ct.push(new pi(Y[lt],S(lt),x));return ct}var B=y.from,W=y.to,Y=y.text,le=Ke(f,B.line),ue=Ke(f,W.line),xe=oe(Y),_e=S(Y.length-1),Pe=W.line-B.line;if(y.full)f.insert(0,N(0,Y.length)),f.remove(Y.length,f.size-Y.length);else if(yb(f,y)){var Fe=N(0,Y.length-1);O(ue,ue.text,_e),Pe&&f.remove(B.line,Pe),Fe.length&&f.insert(B.line,Fe)}else if(le==ue)if(Y.length==1)O(le,le.text.slice(0,B.ch)+xe+le.text.slice(W.ch),_e);else{var Ie=N(1,Y.length-1);Ie.push(new pi(xe+le.text.slice(W.ch),_e,x)),O(le,le.text.slice(0,B.ch)+Y[0],S(0)),f.insert(B.line+1,Ie)}else if(Y.length==1)O(le,le.text.slice(0,B.ch)+Y[0]+ue.text.slice(W.ch),S(0)),f.remove(B.line+1,Pe);else{O(le,le.text.slice(0,B.ch)+Y[0],S(0)),O(ue,xe+ue.text.slice(W.ch),_e);var ze=N(1,Y.length-1);Pe>1&&f.remove(B.line+1,Pe-1),f.insert(B.line+1,ze)}Wr(f,"change",f,y)}function Eu(f,y,w){(function x(S,O,N){if(S.linked)for(var B=0;B<S.linked.length;++B){var W=S.linked[B];if(W.doc!=O){var Y=N&&W.sharedHist;w&&!Y||(y(W.doc,Y),x(W.doc,S,Y))}}})(f,null,!0)}function vb(f,y){if(y.cm)throw new Error("This document is already in use.");f.doc=y,y.cm=f,Eg(f),Fg(f),bb(f),f.options.direction=y.direction,f.options.lineWrapping||yt(f),f.options.mode=y.modeOption,ro(f)}function bb(f){(f.doc.direction=="rtl"?z:H)(f.display.lineDiv,"CodeMirror-rtl")}function Ap(f){this.done=[],this.undone=[],this.undoDepth=f?f.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=f?f.maxGeneration:1}function $g(f,y){var w={from:un(y.from),to:wu(y),text:oi(f,y.from,y.to)};return wb(f,w,y.from.line,y.to.line+1),Eu(f,function(x){return wb(x,w,y.from.line,y.to.line+1)},!0),w}function _b(f){for(;f.length&&oe(f).ranges;)f.pop()}function xb(f,y,w,x){var S=f.history;S.undone.length=0;var O,N,B=+new Date;if((S.lastOp==x||S.lastOrigin==y.origin&&y.origin&&(y.origin.charAt(0)=="+"&&S.lastModTime>B-(f.cm?f.cm.options.historyEventDelay:500)||y.origin.charAt(0)=="*"))&&(O=function(Y,le){return le?(_b(Y.done),oe(Y.done)):Y.done.length&&!oe(Y.done).ranges?oe(Y.done):Y.done.length>1&&!Y.done[Y.done.length-2].ranges?(Y.done.pop(),oe(Y.done)):void 0}(S,S.lastOp==x)))N=oe(O.changes),dt(y.from,y.to)==0&&dt(y.from,N.to)==0?N.to=wu(y):O.changes.push($g(f,y));else{var W=oe(S.done);for(W&&W.ranges||kp(f.sel,S.done),O={changes:[$g(f,y)],generation:S.generation},S.done.push(O);S.done.length>S.undoDepth;)S.done.shift(),S.done[0].ranges||S.done.shift()}S.done.push(w),S.generation=++S.maxGeneration,S.lastModTime=S.lastSelTime=B,S.lastOp=S.lastSelOp=x,S.lastOrigin=S.lastSelOrigin=y.origin,N||et(f,"historyAdded")}function Qw(f,y,w,x){var S=f.history,O=x&&x.origin;w==S.lastSelOp||O&&S.lastSelOrigin==O&&(S.lastModTime==S.lastSelTime&&S.lastOrigin==O||function(N,B,W,Y){var le=B.charAt(0);return le=="*"||le=="+"&&W.ranges.length==Y.ranges.length&&W.somethingSelected()==Y.somethingSelected()&&new Date-N.history.lastSelTime<=(N.cm?N.cm.options.historyEventDelay:500)}(f,O,oe(S.done),y))?S.done[S.done.length-1]=y:kp(y,S.done),S.lastSelTime=+new Date,S.lastSelOrigin=O,S.lastSelOp=w,x&&x.clearRedo!==!1&&_b(S.undone)}function kp(f,y){var w=oe(y);w&&w.ranges&&w.equals(f)||y.push(f)}function wb(f,y,w,x){var S=y["spans_"+f.id],O=0;f.iter(Math.max(f.first,w),Math.min(f.first+f.size,x),function(N){N.markedSpans&&((S||(S=y["spans_"+f.id]={}))[O]=N.markedSpans),++O})}function eE(f){if(!f)return null;for(var y,w=0;w<f.length;++w)f[w].marker.explicitlyCleared?y||(y=f.slice(0,w)):y&&y.push(f[w]);return y?y.length?y:null:f}function Eb(f,y){var w=function(le,ue){var xe=ue["spans_"+le.id];if(!xe)return null;for(var _e=[],Pe=0;Pe<ue.text.length;++Pe)_e.push(eE(xe[Pe]));return _e}(f,y),x=dl(f,y);if(!w)return x;if(!x)return w;for(var S=0;S<w.length;++S){var O=w[S],N=x[S];if(O&&N)e:for(var B=0;B<N.length;++B){for(var W=N[B],Y=0;Y<O.length;++Y)if(O[Y].marker==W.marker)continue e;O.push(W)}else N&&(w[S]=N)}return w}function gh(f,y,w){for(var x=[],S=0;S<f.length;++S){var O=f[S];if(O.ranges)x.push(w?Xo.prototype.deepCopy.call(O):O);else{var N=O.changes,B=[];x.push({changes:B});for(var W=0;W<N.length;++W){var Y=N[W],le=void 0;if(B.push({from:Y.from,to:Y.to,text:Y.text}),y)for(var ue in Y)(le=ue.match(/^spans_(\d+)$/))&&xt(y,Number(le[1]))>-1&&(oe(B)[ue]=Y[ue],delete Y[ue])}}}return x}function Bg(f,y,w,x){if(x){var S=f.anchor;if(w){var O=dt(y,S)<0;O!=dt(w,S)<0?(S=y,y=w):O!=dt(y,w)<0&&(y=w)}return new Cr(S,y)}return new Cr(w||y,y)}function Dp(f,y,w,x,S){S==null&&(S=f.cm&&(f.cm.display.shift||f.extend)),Ls(f,new Xo([Bg(f.sel.primary(),y,w,S)],0),x)}function Sb(f,y,w){for(var x=[],S=f.cm&&(f.cm.display.shift||f.extend),O=0;O<f.sel.ranges.length;O++)x[O]=Bg(f.sel.ranges[O],y[O],null,S);Ls(f,Pa(f.cm,x,f.sel.primIndex),w)}function jg(f,y,w,x){var S=f.sel.ranges.slice(0);S[y]=w,Ls(f,Pa(f.cm,S,f.sel.primIndex),x)}function Cb(f,y,w,x){Ls(f,xu(y,w),x)}function Tb(f,y,w){var x=f.history.done,S=oe(x);S&&S.ranges?(x[x.length-1]=y,Mp(f,y,w)):Ls(f,y,w)}function Ls(f,y,w){Mp(f,y,w),Qw(f,f.sel,f.cm?f.cm.curOp.id:NaN,w)}function Mp(f,y,w){(gt(f,"beforeSelectionChange")||f.cm&&gt(f.cm,"beforeSelectionChange"))&&(y=function(S,O,N){var B={ranges:O.ranges,update:function(W){this.ranges=[];for(var Y=0;Y<W.length;Y++)this.ranges[Y]=new Cr(Ft(S,W[Y].anchor),Ft(S,W[Y].head))},origin:N&&N.origin};return et(S,"beforeSelectionChange",S,B),S.cm&&et(S.cm,"beforeSelectionChange",S.cm,B),B.ranges!=O.ranges?Pa(S.cm,B.ranges,B.ranges.length-1):O}(f,y,w));var x=w&&w.bias||(dt(y.primary().head,f.sel.primary().head)<0?-1:1);Ab(f,Db(f,y,x,!0)),w&&w.scroll===!1||!f.cm||f.cm.getOption("readOnly")=="nocursor"||ph(f.cm)}function Ab(f,y){y.equals(f.sel)||(f.sel=y,f.cm&&(f.cm.curOp.updateInput=1,f.cm.curOp.selectionChanged=!0,Ut(f.cm)),Wr(f,"cursorActivity",f))}function kb(f){Ab(f,Db(f,f.sel,null,!1))}function Db(f,y,w,x){for(var S,O=0;O<y.ranges.length;O++){var N=y.ranges[O],B=y.ranges.length==f.sel.ranges.length&&f.sel.ranges[O],W=Lp(f,N.anchor,B&&B.anchor,w,x),Y=N.head==N.anchor?W:Lp(f,N.head,B&&B.head,w,x);(S||W!=N.anchor||Y!=N.head)&&(S||(S=y.ranges.slice(0,O)),S[O]=new Cr(W,Y))}return S?Pa(f.cm,S,y.primIndex):y}function yh(f,y,w,x,S){var O=Ke(f,y.line);if(O.markedSpans)for(var N=0;N<O.markedSpans.length;++N){var B=O.markedSpans[N],W=B.marker,Y="selectLeft"in W?!W.selectLeft:W.inclusiveLeft,le="selectRight"in W?!W.selectRight:W.inclusiveRight;if((B.from==null||(Y?B.from<=y.ch:B.from<y.ch))&&(B.to==null||(le?B.to>=y.ch:B.to>y.ch))){if(S&&(et(W,"beforeCursorEnter"),W.explicitlyCleared)){if(O.markedSpans){--N;continue}break}if(!W.atomic)continue;if(w){var ue=W.find(x<0?1:-1),xe=void 0;if((x<0?le:Y)&&(ue=Mb(f,ue,-x,ue&&ue.line==y.line?O:null)),ue&&ue.line==y.line&&(xe=dt(ue,w))&&(x<0?xe<0:xe>0))return yh(f,ue,y,x,S)}var _e=W.find(x<0?-1:1);return(x<0?Y:le)&&(_e=Mb(f,_e,x,_e.line==y.line?O:null)),_e?yh(f,_e,y,x,S):null}}return y}function Lp(f,y,w,x,S){var O=x||1,N=yh(f,y,w,O,S)||!S&&yh(f,y,w,O,!0)||yh(f,y,w,-O,S)||!S&&yh(f,y,w,-O,!0);return N||(f.cantEdit=!0,qe(f.first,0))}function Mb(f,y,w,x){return w<0&&y.ch==0?y.line>f.first?Ft(f,qe(y.line-1)):null:w>0&&y.ch==(x||Ke(f,y.line)).text.length?y.line<f.first+f.size-1?qe(y.line+1,0):null:new qe(y.line,y.ch+w)}function Lb(f){f.setSelection(qe(f.firstLine(),0),qe(f.lastLine()),Tt)}function Rb(f,y,w){var x={canceled:!1,from:y.from,to:y.to,text:y.text,origin:y.origin,cancel:function(){return x.canceled=!0}};return w&&(x.update=function(S,O,N,B){S&&(x.from=Ft(f,S)),O&&(x.to=Ft(f,O)),N&&(x.text=N),B!==void 0&&(x.origin=B)}),et(f,"beforeChange",f,x),f.cm&&et(f.cm,"beforeChange",f.cm,x),x.canceled?(f.cm&&(f.cm.curOp.updateInput=2),null):{from:x.from,to:x.to,text:x.text,origin:x.origin}}function vh(f,y,w){if(f.cm){if(!f.cm.curOp)return ds(f.cm,vh)(f,y,w);if(f.cm.state.suppressEdits)return}if(!(gt(f,"beforeChange")||f.cm&&gt(f.cm,"beforeChange"))||(y=Rb(f,y,!0))){var x=js&&!w&&function(O,N,B){var W=null;if(O.iter(N.line,B.line+1,function(Je){if(Je.markedSpans)for(var Ye=0;Ye<Je.markedSpans.length;++Ye){var ct=Je.markedSpans[Ye].marker;!ct.readOnly||W&&xt(W,ct)!=-1||(W||(W=[])).push(ct)}}),!W)return null;for(var Y=[{from:N,to:B}],le=0;le<W.length;++le)for(var ue=W[le],xe=ue.find(0),_e=0;_e<Y.length;++_e){var Pe=Y[_e];if(!(dt(Pe.to,xe.from)<0||dt(Pe.from,xe.to)>0)){var Fe=[_e,1],Ie=dt(Pe.from,xe.from),ze=dt(Pe.to,xe.to);(Ie<0||!ue.inclusiveLeft&&!Ie)&&Fe.push({from:Pe.from,to:xe.from}),(ze>0||!ue.inclusiveRight&&!ze)&&Fe.push({from:xe.to,to:Pe.to}),Y.splice.apply(Y,Fe),_e+=Fe.length-3}}return Y}(f,y.from,y.to);if(x)for(var S=x.length-1;S>=0;--S)Ib(f,{from:x[S].from,to:x[S].to,text:S?[""]:y.text,origin:y.origin});else Ib(f,y)}}function Ib(f,y){if(y.text.length!=1||y.text[0]!=""||dt(y.from,y.to)!=0){var w=Pg(f,y);xb(f,y,w,f.cm?f.cm.curOp.id:NaN),Bd(f,y,w,dl(f,y));var x=[];Eu(f,function(S,O){O||xt(x,S.history)!=-1||(Nb(S.history,y),x.push(S.history)),Bd(S,y,null,dl(S,y))})}}function Rp(f,y,w){var x=f.cm&&f.cm.state.suppressEdits;if(!x||w){for(var S,O=f.history,N=f.sel,B=y=="undo"?O.done:O.undone,W=y=="undo"?O.undone:O.done,Y=0;Y<B.length&&(S=B[Y],w?!S.ranges||S.equals(f.sel):S.ranges);Y++);if(Y!=B.length){for(O.lastOrigin=O.lastSelOrigin=null;;){if(!(S=B.pop()).ranges){if(x)return void B.push(S);break}if(kp(S,W),w&&!S.equals(f.sel))return void Ls(f,S,{clearRedo:!1});N=S}var le=[];kp(N,W),W.push({changes:le,generation:O.generation}),O.generation=S.generation||++O.maxGeneration;for(var ue=gt(f,"beforeChange")||f.cm&&gt(f.cm,"beforeChange"),xe=function(Fe){var Ie=S.changes[Fe];if(Ie.origin=y,ue&&!Rb(f,Ie,!1))return B.length=0,{};le.push($g(f,Ie));var ze=Fe?Pg(f,Ie):oe(B);Bd(f,Ie,ze,Eb(f,Ie)),!Fe&&f.cm&&f.cm.scrollIntoView({from:Ie.from,to:wu(Ie)});var Je=[];Eu(f,function(Ye,ct){ct||xt(Je,Ye.history)!=-1||(Nb(Ye.history,Ie),Je.push(Ye.history)),Bd(Ye,Ie,null,Eb(Ye,Ie))})},_e=S.changes.length-1;_e>=0;--_e){var Pe=xe(_e);if(Pe)return Pe.v}}}}function Ob(f,y){if(y!=0&&(f.first+=y,f.sel=new Xo(se(f.sel.ranges,function(S){return new Cr(qe(S.anchor.line+y,S.anchor.ch),qe(S.head.line+y,S.head.ch))}),f.sel.primIndex),f.cm)){ro(f.cm,f.first,f.first-y,y);for(var w=f.cm.display,x=w.viewFrom;x<w.viewTo;x++)bu(f.cm,x,"gutter")}}function Bd(f,y,w,x){if(f.cm&&!f.cm.curOp)return ds(f.cm,Bd)(f,y,w,x);if(y.to.line<f.first)Ob(f,y.text.length-1-(y.to.line-y.from.line));else if(!(y.from.line>f.lastLine())){if(y.from.line<f.first){var S=y.text.length-1-(f.first-y.from.line);Ob(f,S),y={from:qe(f.first,0),to:qe(y.to.line+S,y.to.ch),text:[oe(y.text)],origin:y.origin}}var O=f.lastLine();y.to.line>O&&(y={from:y.from,to:qe(O,Ke(f,O).text.length),text:[y.text[0]],origin:y.origin}),y.removed=oi(f,y.from,y.to),w||(w=Pg(f,y)),f.cm?function(N,B,W){var Y=N.doc,le=N.display,ue=B.from,xe=B.to,_e=!1,Pe=ue.line;N.options.lineWrapping||(Pe=jt(Qn(Ke(Y,ue.line))),Y.iter(Pe,xe.line+1,function(Ye){if(Ye==le.maxLine)return _e=!0,!0})),Y.sel.contains(B.from,B.to)>-1&&Ut(N),Ng(Y,B,W,Qv(N)),N.options.lineWrapping||(Y.iter(Pe,ue.line+B.text.length,function(Ye){var ct=Ne(Ye);ct>le.maxLineLength&&(le.maxLine=Ye,le.maxLineLength=ct,le.maxLineChanged=!0,_e=!1)}),_e&&(N.curOp.updateMaxLine=!0)),function(Ye,ct){if(Ye.modeFrontier=Math.min(Ye.modeFrontier,ct),!(Ye.highlightFrontier<ct-10)){for(var lt=Ye.first,ft=ct-1;ft>lt;ft--){var li=Ke(Ye,ft).stateAfter;if(li&&(!(li instanceof Kn)||ft+li.lookAhead<ct)){lt=ft+1;break}}Ye.highlightFrontier=Math.min(Ye.highlightFrontier,lt)}}(Y,ue.line),Fd(N,400);var Fe=B.text.length-(xe.line-ue.line)-1;B.full?ro(N):ue.line!=xe.line||B.text.length!=1||yb(N.doc,B)?ro(N,ue.line,xe.line+1,Fe):bu(N,ue.line,"text");var Ie=gt(N,"changes"),ze=gt(N,"change");if(ze||Ie){var Je={from:ue,to:xe,text:B.text,removed:B.removed,origin:B.origin};ze&&Wr(N,"change",N,Je),Ie&&(N.curOp.changeObjs||(N.curOp.changeObjs=[])).push(Je)}N.display.selForContextMenu=null}(f.cm,y,x):Ng(f,y,x),Mp(f,w,Tt),f.cantEdit&&Lp(f,qe(f.firstLine(),0))&&(f.cantEdit=!1)}}function bh(f,y,w,x,S){var O;x||(x=w),dt(x,w)<0&&(w=(O=[x,w])[0],x=O[1]),typeof y=="string"&&(y=f.splitLines(y)),vh(f,{from:w,to:x,text:y,origin:S})}function Pb(f,y,w,x){w<f.line?f.line+=x:y<f.line&&(f.line=y,f.ch=0)}function Fb(f,y,w,x){for(var S=0;S<f.length;++S){var O=f[S],N=!0;if(O.ranges){O.copied||((O=f[S]=O.deepCopy()).copied=!0);for(var B=0;B<O.ranges.length;B++)Pb(O.ranges[B].anchor,y,w,x),Pb(O.ranges[B].head,y,w,x)}else{for(var W=0;W<O.changes.length;++W){var Y=O.changes[W];if(w<Y.from.line)Y.from=qe(Y.from.line+x,Y.from.ch),Y.to=qe(Y.to.line+x,Y.to.ch);else if(y<=Y.to.line){N=!1;break}}N||(f.splice(0,S+1),S=0)}}}function Nb(f,y){var w=y.from.line,x=y.to.line,S=y.text.length-(x-w)-1;Fb(f.done,w,x,S),Fb(f.undone,w,x,S)}function jd(f,y,w,x){var S=y,O=y;return typeof y=="number"?O=Ke(f,gr(f,y)):S=jt(y),S==null?null:(x(O,S)&&f.cm&&bu(f.cm,S,w),O)}function zd(f){this.lines=f,this.parent=null;for(var y=0,w=0;w<f.length;++w)f[w].parent=this,y+=f[w].height;this.height=y}function Ud(f){this.children=f;for(var y=0,w=0,x=0;x<f.length;++x){var S=f[x];y+=S.chunkSize(),w+=S.height,S.parent=this}this.size=y,this.height=w,this.parent=null}Cr.prototype.from=function(){return Or(this.anchor,this.head)},Cr.prototype.to=function(){return Sr(this.anchor,this.head)},Cr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},zd.prototype={chunkSize:function(){return this.lines.length},removeInner:function(f,y){for(var w=f,x=f+y;w<x;++w){var S=this.lines[w];this.height-=S.height,Gt(S),Wr(S,"delete")}this.lines.splice(f,y)},collapse:function(f){f.push.apply(f,this.lines)},insertInner:function(f,y,w){this.height+=w,this.lines=this.lines.slice(0,f).concat(y).concat(this.lines.slice(f));for(var x=0;x<y.length;++x)y[x].parent=this},iterN:function(f,y,w){for(var x=f+y;f<x;++f)if(w(this.lines[f]))return!0}},Ud.prototype={chunkSize:function(){return this.size},removeInner:function(f,y){this.size-=y;for(var w=0;w<this.children.length;++w){var x=this.children[w],S=x.chunkSize();if(f<S){var O=Math.min(y,S-f),N=x.height;if(x.removeInner(f,O),this.height-=N-x.height,S==O&&(this.children.splice(w--,1),x.parent=null),(y-=O)==0)break;f=0}else f-=S}if(this.size-y<25&&(this.children.length>1||!(this.children[0]instanceof zd))){var B=[];this.collapse(B),this.children=[new zd(B)],this.children[0].parent=this}},collapse:function(f){for(var y=0;y<this.children.length;++y)this.children[y].collapse(f)},insertInner:function(f,y,w){this.size+=y.length,this.height+=w;for(var x=0;x<this.children.length;++x){var S=this.children[x],O=S.chunkSize();if(f<=O){if(S.insertInner(f,y,w),S.lines&&S.lines.length>50){for(var N=S.lines.length%25+25,B=N;B<S.lines.length;){var W=new zd(S.lines.slice(B,B+=25));S.height-=W.height,this.children.splice(++x,0,W),W.parent=this}S.lines=S.lines.slice(0,N),this.maybeSpill()}break}f-=O}},maybeSpill:function(){if(!(this.children.length<=10)){var f=this;do{var y=new Ud(f.children.splice(f.children.length-5,5));if(f.parent){f.size-=y.size,f.height-=y.height;var w=xt(f.parent.children,f);f.parent.children.splice(w+1,0,y)}else{var x=new Ud(f.children);x.parent=f,f.children=[x,y],f=x}y.parent=f.parent}while(f.children.length>10);f.parent.maybeSpill()}},iterN:function(f,y,w){for(var x=0;x<this.children.length;++x){var S=this.children[x],O=S.chunkSize();if(f<O){var N=Math.min(y,O-f);if(S.iterN(f,N,w))return!0;if((y-=N)==0)break;f=0}else f-=O}}};var Gd=function(f,y,w){if(w)for(var x in w)w.hasOwnProperty(x)&&(this[x]=w[x]);this.doc=f,this.node=y};function $b(f,y,w){me(y)<(f.curOp&&f.curOp.scrollTop||f.doc.scrollTop)&&Dg(f,w)}Gd.prototype.clear=function(){var f=this.doc.cm,y=this.line.widgets,w=this.line,x=jt(w);if(x!=null&&y){for(var S=0;S<y.length;++S)y[S]==this&&y.splice(S--,1);y.length||(w.widgets=null);var O=vu(this);Ot(w,Math.max(0,w.height-O)),f&&(Co(f,function(){$b(f,w,-O),bu(f,x,"widget")}),Wr(f,"lineWidgetCleared",f,this,x))}},Gd.prototype.changed=function(){var f=this,y=this.height,w=this.doc.cm,x=this.line;this.height=null;var S=vu(this)-y;S&&(Rt(this.doc,x)||Ot(x,x.height+S),w&&Co(w,function(){w.curOp.forceUpdate=!0,$b(w,x,S),Wr(w,"lineWidgetChanged",w,f,jt(x))}))},qt(Gd);var Bb=0,Su=function(f,y){this.lines=[],this.type=y,this.doc=f,this.id=++Bb};function _h(f,y,w,x,S){if(x&&x.shared)return function(ue,xe,_e,Pe,Fe){(Pe=Be(Pe)).shared=!1;var Ie=[_h(ue,xe,_e,Pe,Fe)],ze=Ie[0],Je=Pe.widgetNode;return Eu(ue,function(Ye){Je&&(Pe.widgetNode=Je.cloneNode(!0)),Ie.push(_h(Ye,Ft(Ye,xe),Ft(Ye,_e),Pe,Fe));for(var ct=0;ct<Ye.linked.length;++ct)if(Ye.linked[ct].isParent)return;ze=oe(Ie)}),new qd(Ie,ze)}(f,y,w,x,S);if(f.cm&&!f.cm.curOp)return ds(f.cm,_h)(f,y,w,x,S);var O=new Su(f,S),N=dt(y,w);if(x&&Be(x,O,!1),N>0||N==0&&O.clearWhenEmpty!==!1)return O;if(O.replacedWith&&(O.collapsed=!0,O.widgetNode=ie("span",[O.replacedWith],"CodeMirror-widget"),x.handleMouseEvents||O.widgetNode.setAttribute("cm-ignore-events","true"),x.insertLeft&&(O.widgetNode.insertLeft=!0)),O.collapsed){if(So(f,y.line,y,w,O)||y.line!=w.line&&So(f,w.line,y,w,O))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ms=!0}O.addToHistory&&xb(f,{from:y,to:w,origin:"markText"},f.sel,NaN);var B,W=y.line,Y=f.cm;if(f.iter(W,w.line+1,function(ue){Y&&O.collapsed&&!Y.options.lineWrapping&&Qn(ue)==Y.display.maxLine&&(B=!0),O.collapsed&&W!=y.line&&Ot(ue,0),function(xe,_e,Pe){var Fe=Pe&&window.WeakSet&&(Pe.markedSpans||(Pe.markedSpans=new WeakSet));Fe&&xe.markedSpans&&Fe.has(xe.markedSpans)?xe.markedSpans.push(_e):(xe.markedSpans=xe.markedSpans?xe.markedSpans.concat([_e]):[_e],Fe&&Fe.add(xe.markedSpans)),_e.marker.attachLine(xe)}(ue,new eo(O,W==y.line?y.ch:null,W==w.line?w.ch:null),f.cm&&f.cm.curOp),++W}),O.collapsed&&f.iter(y.line,w.line+1,function(ue){Rt(f,ue)&&Ot(ue,0)}),O.clearOnEnter&&De(O,"beforeCursorEnter",function(){return O.clear()}),O.readOnly&&(js=!0,(f.history.done.length||f.history.undone.length)&&f.clearHistory()),O.collapsed&&(O.id=++Bb,O.atomic=!0),Y){if(B&&(Y.curOp.updateMaxLine=!0),O.collapsed)ro(Y,y.line,w.line+1);else if(O.className||O.startStyle||O.endStyle||O.css||O.attributes||O.title)for(var le=y.line;le<=w.line;le++)bu(Y,le,"text");O.atomic&&kb(Y.doc),Wr(Y,"markerAdded",Y,O)}return O}Su.prototype.clear=function(){if(!this.explicitlyCleared){var f=this.doc.cm,y=f&&!f.curOp;if(y&&uc(f),gt(this,"clear")){var w=this.find();w&&Wr(this,"clear",w.from,w.to)}for(var x=null,S=null,O=0;O<this.lines.length;++O){var N=this.lines[O],B=zs(N.markedSpans,this);f&&!this.collapsed?bu(f,jt(N),"text"):f&&(B.to!=null&&(S=jt(N)),B.from!=null&&(x=jt(N))),N.markedSpans=Wo(N.markedSpans,B),B.from==null&&this.collapsed&&!Rt(this.doc,N)&&f&&Ot(N,hh(f.display))}if(f&&this.collapsed&&!f.options.lineWrapping)for(var W=0;W<this.lines.length;++W){var Y=Qn(this.lines[W]),le=Ne(Y);le>f.display.maxLineLength&&(f.display.maxLine=Y,f.display.maxLineLength=le,f.display.maxLineChanged=!0)}x!=null&&f&&this.collapsed&&ro(f,x,S+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,f&&kb(f.doc)),f&&Wr(f,"markerCleared",f,this,x,S),y&&cc(f),this.parent&&this.parent.clear()}},Su.prototype.find=function(f,y){var w,x;f==null&&this.type=="bookmark"&&(f=1);for(var S=0;S<this.lines.length;++S){var O=this.lines[S],N=zs(O.markedSpans,this);if(N.from!=null&&(w=qe(y?O:jt(O),N.from),f==-1))return w;if(N.to!=null&&(x=qe(y?O:jt(O),N.to),f==1))return x}return w&&{from:w,to:x}},Su.prototype.changed=function(){var f=this,y=this.find(-1,!0),w=this,x=this.doc.cm;y&&x&&Co(x,function(){var S=y.line,O=jt(y.line),N=_r(x,O);if(N&&(Hv(N),x.curOp.selectionChanged=x.curOp.forceUpdate=!0),x.curOp.updateMaxLine=!0,!Rt(w.doc,S)&&w.height!=null){var B=w.height;w.height=null;var W=vu(w)-B;W&&Ot(S,S.height+W)}Wr(x,"markerChanged",x,f)})},Su.prototype.attachLine=function(f){if(!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;y.maybeHiddenMarkers&&xt(y.maybeHiddenMarkers,this)!=-1||(y.maybeUnhiddenMarkers||(y.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(f)},Su.prototype.detachLine=function(f){if(this.lines.splice(xt(this.lines,f),1),!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(y.maybeHiddenMarkers||(y.maybeHiddenMarkers=[])).push(this)}},qt(Su);var qd=function(f,y){this.markers=f,this.primary=y;for(var w=0;w<f.length;++w)f[w].parent=this};function jb(f){return f.findMarks(qe(f.first,0),f.clipPos(qe(f.lastLine())),function(y){return y.parent})}function tE(f){for(var y=function(x){var S=f[x],O=[S.primary.doc];Eu(S.primary.doc,function(W){return O.push(W)});for(var N=0;N<S.markers.length;N++){var B=S.markers[N];xt(O,B.doc)==-1&&(B.parent=null,S.markers.splice(N--,1))}},w=0;w<f.length;w++)y(w)}qd.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var f=0;f<this.markers.length;++f)this.markers[f].clear();Wr(this,"clear")}},qd.prototype.find=function(f,y){return this.primary.find(f,y)},qt(qd);var iE=0,no=function(f,y,w,x,S){if(!(this instanceof no))return new no(f,y,w,x,S);w==null&&(w=0),Ud.call(this,[new zd([new pi("",null)])]),this.first=w,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=w;var O=qe(w,0);this.sel=xu(O),this.history=new Ap(null),this.id=++iE,this.modeOption=y,this.lineSep=x,this.direction=S=="rtl"?"rtl":"ltr",this.extend=!1,typeof f=="string"&&(f=this.splitLines(f)),Ng(this,{from:O,to:O,text:f}),Ls(this,xu(O),Tt)};no.prototype=R(Ud.prototype,{constructor:no,iter:function(f,y,w){w?this.iterN(f-this.first,y-f,w):this.iterN(this.first,this.first+this.size,f)},insert:function(f,y){for(var w=0,x=0;x<y.length;++x)w+=y[x].height;this.insertInner(f-this.first,y,w)},remove:function(f,y){this.removeInner(f-this.first,y)},getValue:function(f){var y=gi(this,this.first,this.first+this.size);return f===!1?y:y.join(f||this.lineSeparator())},setValue:fs(function(f){var y=qe(this.first,0),w=this.first+this.size-1;vh(this,{from:y,to:qe(w,Ke(this,w).text.length),text:this.splitLines(f),origin:"setValue",full:!0},!0),this.cm&&Rd(this.cm,0,0),Ls(this,xu(y),Tt)}),replaceRange:function(f,y,w,x){bh(this,f,y=Ft(this,y),w=w?Ft(this,w):y,x)},getRange:function(f,y,w){var x=oi(this,Ft(this,f),Ft(this,y));return w===!1?x:w===""?x.join(""):x.join(w||this.lineSeparator())},getLine:function(f){var y=this.getLineHandle(f);return y&&y.text},getLineHandle:function(f){if(mn(this,f))return Ke(this,f)},getLineNumber:function(f){return jt(f)},getLineHandleVisualStart:function(f){return typeof f=="number"&&(f=Ke(this,f)),Qn(f)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(f){return Ft(this,f)},getCursor:function(f){var y=this.sel.primary();return f==null||f=="head"?y.head:f=="anchor"?y.anchor:f=="end"||f=="to"||f===!1?y.to():y.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:fs(function(f,y,w){Cb(this,Ft(this,typeof f=="number"?qe(f,y||0):f),null,w)}),setSelection:fs(function(f,y,w){Cb(this,Ft(this,f),Ft(this,y||f),w)}),extendSelection:fs(function(f,y,w){Dp(this,Ft(this,f),y&&Ft(this,y),w)}),extendSelections:fs(function(f,y){Sb(this,_n(this,f),y)}),extendSelectionsBy:fs(function(f,y){Sb(this,_n(this,se(this.sel.ranges,f)),y)}),setSelections:fs(function(f,y,w){if(f.length){for(var x=[],S=0;S<f.length;S++)x[S]=new Cr(Ft(this,f[S].anchor),Ft(this,f[S].head||f[S].anchor));y==null&&(y=Math.min(f.length-1,this.sel.primIndex)),Ls(this,Pa(this.cm,x,y),w)}}),addSelection:fs(function(f,y,w){var x=this.sel.ranges.slice(0);x.push(new Cr(Ft(this,f),Ft(this,y||f))),Ls(this,Pa(this.cm,x,x.length-1),w)}),getSelection:function(f){for(var y,w=this.sel.ranges,x=0;x<w.length;x++){var S=oi(this,w[x].from(),w[x].to());y=y?y.concat(S):S}return f===!1?y:y.join(f||this.lineSeparator())},getSelections:function(f){for(var y=[],w=this.sel.ranges,x=0;x<w.length;x++){var S=oi(this,w[x].from(),w[x].to());f!==!1&&(S=S.join(f||this.lineSeparator())),y[x]=S}return y},replaceSelection:function(f,y,w){for(var x=[],S=0;S<this.sel.ranges.length;S++)x[S]=f;this.replaceSelections(x,y,w||"+input")},replaceSelections:fs(function(f,y,w){for(var x=[],S=this.sel,O=0;O<S.ranges.length;O++){var N=S.ranges[O];x[O]={from:N.from(),to:N.to(),text:this.splitLines(f[O]),origin:w}}for(var B=y&&y!="end"&&function(Y,le,ue){for(var xe=[],_e=qe(Y.first,0),Pe=_e,Fe=0;Fe<le.length;Fe++){var Ie=le[Fe],ze=gb(Ie.from,_e,Pe),Je=gb(wu(Ie),_e,Pe);if(_e=Ie.to,Pe=Je,ue=="around"){var Ye=Y.sel.ranges[Fe],ct=dt(Ye.head,Ye.anchor)<0;xe[Fe]=new Cr(ct?Je:ze,ct?ze:Je)}else xe[Fe]=new Cr(ze,ze)}return new Xo(xe,Y.sel.primIndex)}(this,x,y),W=x.length-1;W>=0;W--)vh(this,x[W]);B?Tb(this,B):this.cm&&ph(this.cm)}),undo:fs(function(){Rp(this,"undo")}),redo:fs(function(){Rp(this,"redo")}),undoSelection:fs(function(){Rp(this,"undo",!0)}),redoSelection:fs(function(){Rp(this,"redo",!0)}),setExtending:function(f){this.extend=f},getExtending:function(){return this.extend},historySize:function(){for(var f=this.history,y=0,w=0,x=0;x<f.done.length;x++)f.done[x].ranges||++y;for(var S=0;S<f.undone.length;S++)f.undone[S].ranges||++w;return{undo:y,redo:w}},clearHistory:function(){var f=this;this.history=new Ap(this.history),Eu(this,function(y){return y.history=f.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(f){return f&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(f){return this.history.generation==(f||this.cleanGeneration)},getHistory:function(){return{done:gh(this.history.done),undone:gh(this.history.undone)}},setHistory:function(f){var y=this.history=new Ap(this.history);y.done=gh(f.done.slice(0),null,!0),y.undone=gh(f.undone.slice(0),null,!0)},setGutterMarker:fs(function(f,y,w){return jd(this,f,"gutter",function(x){var S=x.gutterMarkers||(x.gutterMarkers={});return S[y]=w,!w&&ge(S)&&(x.gutterMarkers=null),!0})}),clearGutter:fs(function(f){var y=this;this.iter(function(w){w.gutterMarkers&&w.gutterMarkers[f]&&jd(y,w,"gutter",function(){return w.gutterMarkers[f]=null,ge(w.gutterMarkers)&&(w.gutterMarkers=null),!0})})}),lineInfo:function(f){var y;if(typeof f=="number"){if(!mn(this,f)||(y=f,!(f=Ke(this,f))))return null}else if((y=jt(f))==null)return null;return{line:y,handle:f,text:f.text,gutterMarkers:f.gutterMarkers,textClass:f.textClass,bgClass:f.bgClass,wrapClass:f.wrapClass,widgets:f.widgets}},addLineClass:fs(function(f,y,w){return jd(this,f,y=="gutter"?"gutter":"class",function(x){var S=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass";if(x[S]){if(F(w).test(x[S]))return!1;x[S]+=" "+w}else x[S]=w;return!0})}),removeLineClass:fs(function(f,y,w){return jd(this,f,y=="gutter"?"gutter":"class",function(x){var S=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass",O=x[S];if(!O)return!1;if(w==null)x[S]=null;else{var N=O.match(F(w));if(!N)return!1;var B=N.index+N[0].length;x[S]=O.slice(0,N.index)+(N.index&&B!=O.length?" ":"")+O.slice(B)||null}return!0})}),addLineWidget:fs(function(f,y,w){return function(x,S,O,N){var B=new Gd(x,O,N),W=x.cm;return W&&B.noHScroll&&(W.display.alignWidgets=!0),jd(x,S,"widget",function(Y){var le=Y.widgets||(Y.widgets=[]);if(B.insertAt==null?le.push(B):le.splice(Math.min(le.length,Math.max(0,B.insertAt)),0,B),B.line=Y,W&&!Rt(x,Y)){var ue=me(Y)<x.scrollTop;Ot(Y,Y.height+vu(B)),ue&&Dg(W,B.height),W.curOp.forceUpdate=!0}return!0}),W&&Wr(W,"lineWidgetAdded",W,B,typeof S=="number"?S:jt(S)),B}(this,f,y,w)}),removeLineWidget:function(f){f.clear()},markText:function(f,y,w){return _h(this,Ft(this,f),Ft(this,y),w,w&&w.type||"range")},setBookmark:function(f,y){var w={replacedWith:y&&(y.nodeType==null?y.widget:y),insertLeft:y&&y.insertLeft,clearWhenEmpty:!1,shared:y&&y.shared,handleMouseEvents:y&&y.handleMouseEvents};return _h(this,f=Ft(this,f),f,w,"bookmark")},findMarksAt:function(f){var y=[],w=Ke(this,(f=Ft(this,f)).line).markedSpans;if(w)for(var x=0;x<w.length;++x){var S=w[x];(S.from==null||S.from<=f.ch)&&(S.to==null||S.to>=f.ch)&&y.push(S.marker.parent||S.marker)}return y},findMarks:function(f,y,w){f=Ft(this,f),y=Ft(this,y);var x=[],S=f.line;return this.iter(f.line,y.line+1,function(O){var N=O.markedSpans;if(N)for(var B=0;B<N.length;B++){var W=N[B];W.to!=null&&S==f.line&&f.ch>=W.to||W.from==null&&S!=f.line||W.from!=null&&S==y.line&&W.from>=y.ch||w&&!w(W.marker)||x.push(W.marker.parent||W.marker)}++S}),x},getAllMarks:function(){var f=[];return this.iter(function(y){var w=y.markedSpans;if(w)for(var x=0;x<w.length;++x)w[x].from!=null&&f.push(w[x].marker)}),f},posFromIndex:function(f){var y,w=this.first,x=this.lineSeparator().length;return this.iter(function(S){var O=S.text.length+x;if(O>f)return y=f,!0;f-=O,++w}),Ft(this,qe(w,y))},indexFromPos:function(f){var y=(f=Ft(this,f)).ch;if(f.line<this.first||f.ch<0)return 0;var w=this.lineSeparator().length;return this.iter(this.first,f.line,function(x){y+=x.text.length+w}),y},copy:function(f){var y=new no(gi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return y.scrollTop=this.scrollTop,y.scrollLeft=this.scrollLeft,y.sel=this.sel,y.extend=!1,f&&(y.history.undoDepth=this.history.undoDepth,y.setHistory(this.getHistory())),y},linkedDoc:function(f){f||(f={});var y=this.first,w=this.first+this.size;f.from!=null&&f.from>y&&(y=f.from),f.to!=null&&f.to<w&&(w=f.to);var x=new no(gi(this,y,w),f.mode||this.modeOption,y,this.lineSep,this.direction);return f.sharedHist&&(x.history=this.history),(this.linked||(this.linked=[])).push({doc:x,sharedHist:f.sharedHist}),x.linked=[{doc:this,isParent:!0,sharedHist:f.sharedHist}],function(S,O){for(var N=0;N<O.length;N++){var B=O[N],W=B.find(),Y=S.clipPos(W.from),le=S.clipPos(W.to);if(dt(Y,le)){var ue=_h(S,Y,le,B.primary,B.primary.type);B.markers.push(ue),ue.parent=B}}}(x,jb(this)),x},unlinkDoc:function(f){if(f instanceof wn&&(f=f.doc),this.linked){for(var y=0;y<this.linked.length;++y)if(this.linked[y].doc==f){this.linked.splice(y,1),f.unlinkDoc(this),tE(jb(this));break}}if(f.history==this.history){var w=[f.id];Eu(f,function(x){return w.push(x.id)},!0),f.history=new Ap(null),f.history.done=gh(this.history.done,w),f.history.undone=gh(this.history.undone,w)}},iterLinkedDocs:function(f){Eu(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(f){return this.lineSep?f.split(this.lineSep):hi(f)},lineSeparator:function(){return this.lineSep||`
`},setDirection:fs(function(f){var y;f!="rtl"&&(f="ltr"),f!=this.direction&&(this.direction=f,this.iter(function(w){return w.order=null}),this.cm&&Co(y=this.cm,function(){bb(y),ro(y)}))})}),no.prototype.eachLine=no.prototype.iter;var zb=0;function rE(f){var y=this;if(Ub(y),!ht(y,f)&&!ga(y.display,f)){Kt(f),h&&(zb=+new Date);var w=sc(y,f,!0),x=f.dataTransfer.files;if(w&&!y.isReadOnly())if(x&&x.length&&window.FileReader&&window.File)for(var S=x.length,O=Array(S),N=0,B=function(){++N==S&&ds(y,function(){var _e={from:w=Ft(y.doc,w),to:w,text:y.doc.splitLines(O.filter(function(Pe){return Pe!=null}).join(y.doc.lineSeparator())),origin:"paste"};vh(y.doc,_e),Tb(y.doc,xu(Ft(y.doc,w),Ft(y.doc,wu(_e))))})()},W=function(_e,Pe){if(y.options.allowDropFileTypes&&xt(y.options.allowDropFileTypes,_e.type)==-1)B();else{var Fe=new FileReader;Fe.onerror=function(){return B()},Fe.onload=function(){var Ie=Fe.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Ie)||(O[Pe]=Ie),B()},Fe.readAsText(_e)}},Y=0;Y<x.length;Y++)W(x[Y],Y);else{if(y.state.draggingText&&y.doc.sel.contains(w)>-1)return y.state.draggingText(f),void setTimeout(function(){return y.display.input.focus()},20);try{var le=f.dataTransfer.getData("Text");if(le){var ue;if(y.state.draggingText&&!y.state.draggingText.copy&&(ue=y.listSelections()),Mp(y.doc,xu(w,w)),ue)for(var xe=0;xe<ue.length;++xe)bh(y.doc,"",ue[xe].anchor,ue[xe].head,"drag");y.replaceSelection(le,"around","paste"),y.display.input.focus()}}catch{}}}}function Ub(f){f.display.dragCursor&&(f.display.lineSpace.removeChild(f.display.dragCursor),f.display.dragCursor=null)}function Gb(f){if(document.getElementsByClassName){for(var y=document.getElementsByClassName("CodeMirror"),w=[],x=0;x<y.length;x++){var S=y[x].CodeMirror;S&&w.push(S)}w.length&&w[0].operation(function(){for(var O=0;O<w.length;O++)f(w[O])})}}var qb=!1;function nE(){var f;qb||(De(window,"resize",function(){f==null&&(f=setTimeout(function(){f=null,Gb(sE)},100))}),De(window,"blur",function(){return Gb(fh)}),qb=!0)}function sE(f){var y=f.display;y.cachedCharWidth=y.cachedTextHeight=y.cachedPaddingH=null,y.scrollbarsClipped=!1,f.setSize()}for(var Cu={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Hd=0;Hd<10;Hd++)Cu[Hd+48]=Cu[Hd+96]=String(Hd);for(var Ip=65;Ip<=90;Ip++)Cu[Ip]=String.fromCharCode(Ip);for(var Vd=1;Vd<=12;Vd++)Cu[Vd+111]=Cu[Vd+63235]="F"+Vd;var Wl={};function oE(f){var y,w,x,S,O=f.split(/-(?!$)/);f=O[O.length-1];for(var N=0;N<O.length-1;N++){var B=O[N];if(/^(cmd|meta|m)$/i.test(B))S=!0;else if(/^a(lt)?$/i.test(B))y=!0;else if(/^(c|ctrl|control)$/i.test(B))w=!0;else{if(!/^s(hift)?$/i.test(B))throw new Error("Unrecognized modifier name: "+B);x=!0}}return y&&(f="Alt-"+f),w&&(f="Ctrl-"+f),S&&(f="Cmd-"+f),x&&(f="Shift-"+f),f}function aE(f){var y={};for(var w in f)if(f.hasOwnProperty(w)){var x=f[w];if(/^(name|fallthrough|(de|at)tach)$/.test(w))continue;if(x=="..."){delete f[w];continue}for(var S=se(w.split(" "),oE),O=0;O<S.length;O++){var N=void 0,B=void 0;O==S.length-1?(B=S.join(" "),N=x):(B=S.slice(0,O+1).join(" "),N="...");var W=y[B];if(W){if(W!=N)throw new Error("Inconsistent bindings for "+B)}else y[B]=N}delete f[w]}for(var Y in y)f[Y]=y[Y];return f}function xh(f,y,w,x){var S=(y=Op(y)).call?y.call(f,x):y[f];if(S===!1)return"nothing";if(S==="...")return"multi";if(S!=null&&w(S))return"handled";if(y.fallthrough){if(Object.prototype.toString.call(y.fallthrough)!="[object Array]")return xh(f,y.fallthrough,w,x);for(var O=0;O<y.fallthrough.length;O++){var N=xh(f,y.fallthrough[O],w,x);if(N)return N}}}function Hb(f){var y=typeof f=="string"?f:Cu[f.keyCode];return y=="Ctrl"||y=="Alt"||y=="Shift"||y=="Mod"}function Vb(f,y,w){var x=f;return y.altKey&&x!="Alt"&&(f="Alt-"+f),(K?y.metaKey:y.ctrlKey)&&x!="Ctrl"&&(f="Ctrl-"+f),(K?y.ctrlKey:y.metaKey)&&x!="Mod"&&(f="Cmd-"+f),!w&&y.shiftKey&&x!="Shift"&&(f="Shift-"+f),f}function Wb(f,y){if(b&&f.keyCode==34&&f.char)return!1;var w=Cu[f.keyCode];return w!=null&&!f.altGraphKey&&(f.keyCode==3&&f.code&&(w=f.code),Vb(w,f,y))}function Op(f){return typeof f=="string"?Wl[f]:f}function wh(f,y){for(var w=f.doc.sel.ranges,x=[],S=0;S<w.length;S++){for(var O=y(w[S]);x.length&&dt(O.from,oe(x).to)<=0;){var N=x.pop();if(dt(N.from,O.from)<0){O.from=N.from;break}}x.push(O)}Co(f,function(){for(var B=x.length-1;B>=0;B--)bh(f.doc,"",x[B].from,x[B].to,"+delete");ph(f)})}function zg(f,y,w){var x=G(f.text,y+w,w);return x<0||x>f.text.length?null:x}function Ug(f,y,w){var x=zg(f,y.ch,w);return x==null?null:new qe(y.line,x,w<0?"after":"before")}function Gg(f,y,w,x,S){if(f){y.doc.direction=="rtl"&&(S=-S);var O=Ae(w,y.doc.direction);if(O){var N,B=S<0?oe(O):O[0],W=S<0==(B.level==1)?"after":"before";if(B.level>0||y.doc.direction=="rtl"){var Y=Qr(y,w);N=S<0?w.text.length-1:0;var le=$i(y,Y,N).top;N=re(function(ue){return $i(y,Y,ue).top==le},S<0==(B.level==1)?B.from:B.to-1,N),W=="before"&&(N=zg(w,N,1))}else N=S<0?B.to:B.from;return new qe(x,N,W)}}return new qe(x,S<0?w.text.length:0,S<0?"before":"after")}Wl.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wl.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wl.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wl.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wl.default=A?Wl.macDefault:Wl.pcDefault;var Wd={selectAll:Lb,singleSelection:function(f){return f.setSelection(f.getCursor("anchor"),f.getCursor("head"),Tt)},killLine:function(f){return wh(f,function(y){if(y.empty()){var w=Ke(f.doc,y.head.line).text.length;return y.head.ch==w&&y.head.line<f.lastLine()?{from:y.head,to:qe(y.head.line+1,0)}:{from:y.head,to:qe(y.head.line,w)}}return{from:y.from(),to:y.to()}})},deleteLine:function(f){return wh(f,function(y){return{from:qe(y.from().line,0),to:Ft(f.doc,qe(y.to().line+1,0))}})},delLineLeft:function(f){return wh(f,function(y){return{from:qe(y.from().line,0),to:y.from()}})},delWrappedLineLeft:function(f){return wh(f,function(y){var w=f.charCoords(y.head,"div").top+5;return{from:f.coordsChar({left:0,top:w},"div"),to:y.from()}})},delWrappedLineRight:function(f){return wh(f,function(y){var w=f.charCoords(y.head,"div").top+5,x=f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:w},"div");return{from:y.from(),to:x}})},undo:function(f){return f.undo()},redo:function(f){return f.redo()},undoSelection:function(f){return f.undoSelection()},redoSelection:function(f){return f.redoSelection()},goDocStart:function(f){return f.extendSelection(qe(f.firstLine(),0))},goDocEnd:function(f){return f.extendSelection(qe(f.lastLine()))},goLineStart:function(f){return f.extendSelectionsBy(function(y){return Yb(f,y.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(f){return f.extendSelectionsBy(function(y){return Xb(f,y.head)},{origin:"+move",bias:1})},goLineEnd:function(f){return f.extendSelectionsBy(function(y){return function(w,x){var S=Ke(w.doc,x),O=function(N){for(var B;B=ls(N);)N=B.find(1,!0).line;return N}(S);return O!=S&&(x=jt(O)),Gg(!0,w,S,x,-1)}(f,y.head.line)},{origin:"+move",bias:-1})},goLineRight:function(f){return f.extendSelectionsBy(function(y){var w=f.cursorCoords(y.head,"div").top+5;return f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:w},"div")},si)},goLineLeft:function(f){return f.extendSelectionsBy(function(y){var w=f.cursorCoords(y.head,"div").top+5;return f.coordsChar({left:0,top:w},"div")},si)},goLineLeftSmart:function(f){return f.extendSelectionsBy(function(y){var w=f.cursorCoords(y.head,"div").top+5,x=f.coordsChar({left:0,top:w},"div");return x.ch<f.getLine(x.line).search(/\S/)?Xb(f,y.head):x},si)},goLineUp:function(f){return f.moveV(-1,"line")},goLineDown:function(f){return f.moveV(1,"line")},goPageUp:function(f){return f.moveV(-1,"page")},goPageDown:function(f){return f.moveV(1,"page")},goCharLeft:function(f){return f.moveH(-1,"char")},goCharRight:function(f){return f.moveH(1,"char")},goColumnLeft:function(f){return f.moveH(-1,"column")},goColumnRight:function(f){return f.moveH(1,"column")},goWordLeft:function(f){return f.moveH(-1,"word")},goGroupRight:function(f){return f.moveH(1,"group")},goGroupLeft:function(f){return f.moveH(-1,"group")},goWordRight:function(f){return f.moveH(1,"word")},delCharBefore:function(f){return f.deleteH(-1,"codepoint")},delCharAfter:function(f){return f.deleteH(1,"char")},delWordBefore:function(f){return f.deleteH(-1,"word")},delWordAfter:function(f){return f.deleteH(1,"word")},delGroupBefore:function(f){return f.deleteH(-1,"group")},delGroupAfter:function(f){return f.deleteH(1,"group")},indentAuto:function(f){return f.indentSelection("smart")},indentMore:function(f){return f.indentSelection("add")},indentLess:function(f){return f.indentSelection("subtract")},insertTab:function(f){return f.replaceSelection("	")},insertSoftTab:function(f){for(var y=[],w=f.listSelections(),x=f.options.tabSize,S=0;S<w.length;S++){var O=w[S].from(),N=He(f.getLine(O.line),O.ch,x);y.push(fe(x-N%x))}f.replaceSelections(y)},defaultTab:function(f){f.somethingSelected()?f.indentSelection("add"):f.execCommand("insertTab")},transposeChars:function(f){return Co(f,function(){for(var y=f.listSelections(),w=[],x=0;x<y.length;x++)if(y[x].empty()){var S=y[x].head,O=Ke(f.doc,S.line).text;if(O){if(S.ch==O.length&&(S=new qe(S.line,S.ch-1)),S.ch>0)S=new qe(S.line,S.ch+1),f.replaceRange(O.charAt(S.ch-1)+O.charAt(S.ch-2),qe(S.line,S.ch-2),S,"+transpose");else if(S.line>f.doc.first){var N=Ke(f.doc,S.line-1).text;N&&(S=new qe(S.line,1),f.replaceRange(O.charAt(0)+f.doc.lineSeparator()+N.charAt(N.length-1),qe(S.line-1,N.length-1),S,"+transpose"))}}w.push(new Cr(S,S))}f.setSelections(w)})},newlineAndIndent:function(f){return Co(f,function(){for(var y=f.listSelections(),w=y.length-1;w>=0;w--)f.replaceRange(f.doc.lineSeparator(),y[w].anchor,y[w].head,"+input");y=f.listSelections();for(var x=0;x<y.length;x++)f.indentLine(y[x].from().line,null,!0);ph(f)})},openLine:function(f){return f.replaceSelection(`
`,"start")},toggleOverwrite:function(f){return f.toggleOverwrite()}};function Yb(f,y){var w=Ke(f.doc,y),x=Qn(w);return x!=w&&(y=jt(x)),Gg(!0,f,x,y,1)}function Xb(f,y){var w=Yb(f,y.line),x=Ke(f.doc,w.line),S=Ae(x,f.doc.direction);if(!S||S[0].level==0){var O=Math.max(w.ch,x.text.search(/\S/)),N=y.line==w.line&&y.ch<=O&&y.ch;return qe(w.line,N?0:O,w.sticky)}return w}function Pp(f,y,w){if(typeof y=="string"&&!(y=Wd[y]))return!1;f.display.input.ensurePolled();var x=f.display.shift,S=!1;try{f.isReadOnly()&&(f.state.suppressEdits=!0),w&&(f.display.shift=!1),S=y(f)!=kt}finally{f.display.shift=x,f.state.suppressEdits=!1}return S}var lE=new st;function Yd(f,y,w,x){var S=f.state.keySeq;if(S){if(Hb(y))return"handled";if(/\'$/.test(y)?f.state.keySeq=null:lE.set(50,function(){f.state.keySeq==S&&(f.state.keySeq=null,f.display.input.reset())}),Zb(f,S+" "+y,w,x))return!0}return Zb(f,y,w,x)}function Zb(f,y,w,x){var S=function(O,N,B){for(var W=0;W<O.state.keyMaps.length;W++){var Y=xh(N,O.state.keyMaps[W],B,O);if(Y)return Y}return O.options.extraKeys&&xh(N,O.options.extraKeys,B,O)||xh(N,O.options.keyMap,B,O)}(f,y,x);return S=="multi"&&(f.state.keySeq=y),S=="handled"&&Wr(f,"keyHandled",f,y,w),S!="handled"&&S!="multi"||(Kt(w),Cg(f)),!!S}function Kb(f,y){var w=Wb(y,!0);return!!w&&(y.shiftKey&&!f.state.keySeq?Yd(f,"Shift-"+w,y,function(x){return Pp(f,x,!0)})||Yd(f,w,y,function(x){if(typeof x=="string"?/^go[A-Z]/.test(x):x.motion)return Pp(f,x)}):Yd(f,w,y,function(x){return Pp(f,x)}))}var qg=null;function Jb(f){var y=this;if(!(f.target&&f.target!=y.display.input.getField()||(y.curOp.focus=te($e(y)),ht(y,f)))){h&&d<11&&f.keyCode==27&&(f.returnValue=!1);var w=f.keyCode;y.display.shift=w==16||f.shiftKey;var x=Kb(y,f);b&&(qg=x?w:null,x||w!=88||rr||!(A?f.metaKey:f.ctrlKey)||y.replaceSelection("",null,"cut")),a&&!A&&!x&&w==46&&f.shiftKey&&!f.ctrlKey&&document.execCommand&&document.execCommand("cut"),w!=18||/\bCodeMirror-crosshair\b/.test(y.display.lineDiv.className)||function(S){var O=S.display.lineDiv;function N(B){B.keyCode!=18&&B.altKey||(H(O,"CodeMirror-crosshair"),Ge(document,"keyup",N),Ge(document,"mouseover",N))}z(O,"CodeMirror-crosshair"),De(document,"keyup",N),De(document,"mouseover",N)}(y)}}function Qb(f){f.keyCode==16&&(this.doc.sel.shift=!1),ht(this,f)}function e1(f){var y=this;if(!(f.target&&f.target!=y.display.input.getField()||ga(y.display,f)||ht(y,f)||f.ctrlKey&&!f.altKey||A&&f.metaKey)){var w=f.keyCode,x=f.charCode;if(b&&w==qg)return qg=null,void Kt(f);if(!b||f.which&&!(f.which<10)||!Kb(y,f)){var S=String.fromCharCode(x??w);S!="\b"&&(function(O,N,B){return Yd(O,"'"+B+"'",N,function(W){return Pp(O,W,!0)})}(y,f,S)||y.display.input.onKeyPress(f))}}}var Xd,Zd,Hg=function(f,y,w){this.time=f,this.pos=y,this.button=w};function t1(f){var y=this,w=y.display;if(!(ht(y,f)||w.activeTouch&&w.input.supportsTouch())){if(w.input.ensurePolled(),w.shift=f.shiftKey,ga(w,f))p||(w.scroller.draggable=!1,setTimeout(function(){return w.scroller.draggable=!0},100));else if(!Vg(y,f)){var x=sc(y,f),S=vr(f),O=x?function(N,B){var W=+new Date;return Zd&&Zd.compare(W,N,B)?(Xd=Zd=null,"triple"):Xd&&Xd.compare(W,N,B)?(Zd=new Hg(W,N,B),Xd=null,"double"):(Xd=new Hg(W,N,B),Zd=null,"single")}(x,S):"single";Xe(y).focus(),S==1&&y.state.selectingText&&y.state.selectingText(f),x&&function(N,B,W,Y,le){var ue="Click";return Y=="double"?ue="Double"+ue:Y=="triple"&&(ue="Triple"+ue),Yd(N,Vb(ue=(B==1?"Left":B==2?"Middle":"Right")+ue,le),le,function(xe){if(typeof xe=="string"&&(xe=Wd[xe]),!xe)return!1;var _e=!1;try{N.isReadOnly()&&(N.state.suppressEdits=!0),_e=xe(N,W)!=kt}finally{N.state.suppressEdits=!1}return _e})}(y,S,x,O,f)||(S==1?x?function(N,B,W,Y){h?setTimeout(ot(ib,N),0):N.curOp.focus=te($e(N));var le,ue=function(_e,Pe,Fe){var Ie=_e.getOption("configureMouse"),ze=Ie?Ie(_e,Pe,Fe):{};if(ze.unit==null){var Je=I?Fe.shiftKey&&Fe.metaKey:Fe.altKey;ze.unit=Je?"rectangle":Pe=="single"?"char":Pe=="double"?"word":"line"}return(ze.extend==null||_e.doc.extend)&&(ze.extend=_e.doc.extend||Fe.shiftKey),ze.addNew==null&&(ze.addNew=A?Fe.metaKey:Fe.ctrlKey),ze.moveOnDrag==null&&(ze.moveOnDrag=!(A?Fe.altKey:Fe.ctrlKey)),ze}(N,W,Y),xe=N.doc.sel;N.options.dragDrop&&cr&&!N.isReadOnly()&&W=="single"&&(le=xe.contains(B))>-1&&(dt((le=xe.ranges[le]).from(),B)<0||B.xRel>0)&&(dt(le.to(),B)>0||B.xRel<0)?function(_e,Pe,Fe,Ie){var ze=_e.display,Je=!1,Ye=ds(_e,function(ft){p&&(ze.scroller.draggable=!1),_e.state.draggingText=!1,_e.state.delayingBlurEvent&&(_e.hasFocus()?_e.state.delayingBlurEvent=!1:Tg(_e)),Ge(ze.wrapper.ownerDocument,"mouseup",Ye),Ge(ze.wrapper.ownerDocument,"mousemove",ct),Ge(ze.scroller,"dragstart",lt),Ge(ze.scroller,"drop",Ye),Je||(Kt(ft),Ie.addNew||Dp(_e.doc,Fe,null,null,Ie.extend),p&&!_||h&&d==9?setTimeout(function(){ze.wrapper.ownerDocument.body.focus({preventScroll:!0}),ze.input.focus()},20):ze.input.focus())}),ct=function(ft){Je=Je||Math.abs(Pe.clientX-ft.clientX)+Math.abs(Pe.clientY-ft.clientY)>=10},lt=function(){return Je=!0};p&&(ze.scroller.draggable=!0),_e.state.draggingText=Ye,Ye.copy=!Ie.moveOnDrag,De(ze.wrapper.ownerDocument,"mouseup",Ye),De(ze.wrapper.ownerDocument,"mousemove",ct),De(ze.scroller,"dragstart",lt),De(ze.scroller,"drop",Ye),_e.state.delayingBlurEvent=!0,setTimeout(function(){return ze.input.focus()},20),ze.scroller.dragDrop&&ze.scroller.dragDrop()}(N,Y,B,ue):function(_e,Pe,Fe,Ie){h&&Tg(_e);var ze=_e.display,Je=_e.doc;Kt(Pe);var Ye,ct,lt=Je.sel,ft=lt.ranges;if(Ie.addNew&&!Ie.extend?(ct=Je.sel.contains(Fe),Ye=ct>-1?ft[ct]:new Cr(Fe,Fe)):(Ye=Je.sel.primary(),ct=Je.sel.primIndex),Ie.unit=="rectangle")Ie.addNew||(Ye=new Cr(Fe,Fe)),Fe=sc(_e,Pe,!0,!0),ct=-1;else{var li=i1(_e,Fe,Ie.unit);Ye=Ie.extend?Bg(Ye,li.anchor,li.head,Ie.extend):li}Ie.addNew?ct==-1?(ct=ft.length,Ls(Je,Pa(_e,ft.concat([Ye]),ct),{scroll:!1,origin:"*mouse"})):ft.length>1&&ft[ct].empty()&&Ie.unit=="char"&&!Ie.extend?(Ls(Je,Pa(_e,ft.slice(0,ct).concat(ft.slice(ct+1)),0),{scroll:!1,origin:"*mouse"}),lt=Je.sel):jg(Je,ct,Ye,Ei):(ct=0,Ls(Je,new Xo([Ye],0),Ei),lt=Je.sel);var Ct=Fe;function Oi(Ci){if(dt(Ct,Ci)!=0)if(Ct=Ci,Ie.unit=="rectangle"){for(var Ar=[],vi=_e.options.tabSize,Vi=He(Ke(Je,Fe.line).text,Fe.ch,vi),Di=He(Ke(Je,Ci.line).text,Ci.ch,vi),dr=Math.min(Vi,Di),qs=Math.max(Vi,Di),kr=Math.min(Fe.line,Ci.line),Rs=Math.min(_e.lastLine(),Math.max(Fe.line,Ci.line));kr<=Rs;kr++){var Is=Ke(Je,kr).text,yn=ur(Is,dr,vi);dr==qs?Ar.push(new Cr(qe(kr,yn),qe(kr,yn))):Is.length>yn&&Ar.push(new Cr(qe(kr,yn),qe(kr,ur(Is,qs,vi))))}Ar.length||Ar.push(new Cr(Fe,Fe)),Ls(Je,Pa(_e,lt.ranges.slice(0,ct).concat(Ar),ct),{origin:"*mouse",scroll:!1}),_e.scrollIntoView(Ci)}else{var Hs,va=Ye,ws=i1(_e,Ci,Ie.unit),Na=va.anchor;dt(ws.anchor,Na)>0?(Hs=ws.head,Na=Or(va.from(),ws.anchor)):(Hs=ws.anchor,Na=Sr(va.to(),ws.head));var jp=lt.ranges.slice(0);jp[ct]=function(p1,hc){var To=hc.anchor,Tu=hc.head,fE=Ke(p1.doc,To.line);if(dt(To,Tu)==0&&To.sticky==Tu.sticky)return hc;var Ch=Ae(fE);if(!Ch)return hc;var Zg=ce(Ch,To.ch,To.sticky),Jd=Ch[Zg];if(Jd.from!=To.ch&&Jd.to!=To.ch)return hc;var zp,Qd=Zg+(Jd.from==To.ch==(Jd.level!=1)?0:1);if(Qd==0||Qd==Ch.length)return hc;if(Tu.line!=To.line)zp=(Tu.line-To.line)*(p1.doc.direction=="ltr"?1:-1)>0;else{var Kg=ce(Ch,Tu.ch,Tu.sticky),m1=Kg-Zg||(Tu.ch-To.ch)*(Jd.level==1?-1:1);zp=Kg==Qd-1||Kg==Qd?m1<0:m1>0}var Jg=Ch[Qd+(zp?-1:0)],g1=zp==(Jg.level==1),y1=g1?Jg.from:Jg.to,v1=g1?"after":"before";return To.ch==y1&&To.sticky==v1?hc:new Cr(new qe(To.line,y1,v1),Tu)}(_e,new Cr(Ft(Je,Na),Hs)),Ls(Je,Pa(_e,jp,ct),Ei)}}var ii=ze.wrapper.getBoundingClientRect(),Ki=0;function Tr(Ci){var Ar=++Ki,vi=sc(_e,Ci,!0,Ie.unit=="rectangle");if(vi)if(dt(vi,Ct)!=0){_e.curOp.focus=te($e(_e)),Oi(vi);var Vi=Ep(ze,Je);(vi.line>=Vi.to||vi.line<Vi.from)&&setTimeout(ds(_e,function(){Ki==Ar&&Tr(Ci)}),150)}else{var Di=Ci.clientY<ii.top?-20:Ci.clientY>ii.bottom?20:0;Di&&setTimeout(ds(_e,function(){Ki==Ar&&(ze.scroller.scrollTop+=Di,Tr(Ci))}),50)}}function Ji(Ci){_e.state.selectingText=!1,Ki=1/0,Ci&&(Kt(Ci),ze.input.focus()),Ge(ze.wrapper.ownerDocument,"mousemove",Ui),Ge(ze.wrapper.ownerDocument,"mouseup",Qi),Je.history.lastSelOrigin=null}var Ui=ds(_e,function(Ci){Ci.buttons!==0&&vr(Ci)?Tr(Ci):Ji(Ci)}),Qi=ds(_e,Ji);_e.state.selectingText=Qi,De(ze.wrapper.ownerDocument,"mousemove",Ui),De(ze.wrapper.ownerDocument,"mouseup",Qi)}(N,Y,B,ue)}(y,x,O,f):Yi(f)==w.scroller&&Kt(f):S==2?(x&&Dp(y.doc,x),setTimeout(function(){return w.input.focus()},20)):S==3&&(L?y.display.input.onContextMenu(f):Tg(y)))}}}function i1(f,y,w){if(w=="char")return new Cr(y,y);if(w=="word")return f.findWordAt(y);if(w=="line")return new Cr(qe(y.line,0),Ft(f.doc,qe(y.line+1,0)));var x=w(f,y);return new Cr(x.from,x.to)}function r1(f,y,w,x){var S,O;if(y.touches)S=y.touches[0].clientX,O=y.touches[0].clientY;else try{S=y.clientX,O=y.clientY}catch{return!1}if(S>=Math.floor(f.display.gutters.getBoundingClientRect().right))return!1;x&&Kt(y);var N=f.display,B=N.lineDiv.getBoundingClientRect();if(O>B.bottom||!gt(f,w))return Vt(y);O-=B.top-N.viewOffset;for(var W=0;W<f.display.gutterSpecs.length;++W){var Y=N.gutters.childNodes[W];if(Y&&Y.getBoundingClientRect().right>=S)return et(f,w,f,Er(f.doc,O),f.display.gutterSpecs[W].className,y),Vt(y)}}function Vg(f,y){return r1(f,y,"gutterClick",!0)}function n1(f,y){ga(f.display,y)||function(w,x){return gt(w,"gutterContextMenu")?r1(w,x,"gutterContextMenu",!1):!1}(f,y)||ht(f,y,"contextmenu")||L||f.display.input.onContextMenu(y)}function s1(f){f.display.wrapper.className=f.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+f.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Md(f)}Hg.prototype.compare=function(f,y,w){return this.time+400>f&&dt(y,this.pos)==0&&w==this.button};var Eh={toString:function(){return"CodeMirror.Init"}},o1={},Fp={};function uE(f,y,w){if(!y!=!(w&&w!=Eh)){var x=f.display.dragFunctions,S=y?De:Ge;S(f.display.scroller,"dragstart",x.start),S(f.display.scroller,"dragenter",x.enter),S(f.display.scroller,"dragover",x.over),S(f.display.scroller,"dragleave",x.leave),S(f.display.scroller,"drop",x.drop)}}function cE(f){f.options.lineWrapping?(z(f.display.wrapper,"CodeMirror-wrap"),f.display.sizer.style.minWidth="",f.display.sizerWidth=null):(H(f.display.wrapper,"CodeMirror-wrap"),yt(f)),Eg(f),ro(f),Md(f),setTimeout(function(){return mh(f)},100)}function wn(f,y){var w=this;if(!(this instanceof wn))return new wn(f,y);this.options=y=y?Be(y):{},Be(o1,y,!1);var x=y.value;typeof x=="string"?x=new no(x,y.mode,null,y.lineSeparator,y.direction):y.mode&&(x.modeOption=y.mode),this.doc=x;var S=new wn.inputStyles[y.inputStyle](this),O=this.display=new Kw(f,x,S,y);for(var N in O.wrapper.CodeMirror=this,s1(this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),lb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new st,keySeq:null,specialChars:null},y.autofocus&&!M&&O.input.focus(),h&&d<11&&setTimeout(function(){return w.display.input.reset(!0)},20),function(W){var Y=W.display;De(Y.scroller,"mousedown",ds(W,t1)),De(Y.scroller,"dblclick",h&&d<11?ds(W,function(Ie){if(!ht(W,Ie)){var ze=sc(W,Ie);if(ze&&!Vg(W,Ie)&&!ga(W.display,Ie)){Kt(Ie);var Je=W.findWordAt(ze);Dp(W.doc,Je.anchor,Je.head)}}}):function(Ie){return ht(W,Ie)||Kt(Ie)}),De(Y.scroller,"contextmenu",function(Ie){return n1(W,Ie)}),De(Y.input.getField(),"contextmenu",function(Ie){Y.scroller.contains(Ie.target)||n1(W,Ie)});var le,ue={end:0};function xe(){Y.activeTouch&&(le=setTimeout(function(){return Y.activeTouch=null},1e3),(ue=Y.activeTouch).end=+new Date)}function _e(Ie){if(Ie.touches.length!=1)return!1;var ze=Ie.touches[0];return ze.radiusX<=1&&ze.radiusY<=1}function Pe(Ie,ze){if(ze.left==null)return!0;var Je=ze.left-Ie.left,Ye=ze.top-Ie.top;return Je*Je+Ye*Ye>400}De(Y.scroller,"touchstart",function(Ie){if(!ht(W,Ie)&&!_e(Ie)&&!Vg(W,Ie)){Y.input.ensurePolled(),clearTimeout(le);var ze=+new Date;Y.activeTouch={start:ze,moved:!1,prev:ze-ue.end<=300?ue:null},Ie.touches.length==1&&(Y.activeTouch.left=Ie.touches[0].pageX,Y.activeTouch.top=Ie.touches[0].pageY)}}),De(Y.scroller,"touchmove",function(){Y.activeTouch&&(Y.activeTouch.moved=!0)}),De(Y.scroller,"touchend",function(Ie){var ze=Y.activeTouch;if(ze&&!ga(Y,Ie)&&ze.left!=null&&!ze.moved&&new Date-ze.start<300){var Je,Ye=W.coordsChar(Y.activeTouch,"page");Je=!ze.prev||Pe(ze,ze.prev)?new Cr(Ye,Ye):!ze.prev.prev||Pe(ze,ze.prev.prev)?W.findWordAt(Ye):new Cr(qe(Ye.line,0),Ft(W.doc,qe(Ye.line+1,0))),W.setSelection(Je.anchor,Je.head),W.focus(),Kt(Ie)}xe()}),De(Y.scroller,"touchcancel",xe),De(Y.scroller,"scroll",function(){Y.scroller.clientHeight&&(Id(W,Y.scroller.scrollTop),ac(W,Y.scroller.scrollLeft,!0),et(W,"scroll",W))}),De(Y.scroller,"mousewheel",function(Ie){return pb(W,Ie)}),De(Y.scroller,"DOMMouseScroll",function(Ie){return pb(W,Ie)}),De(Y.wrapper,"scroll",function(){return Y.wrapper.scrollTop=Y.wrapper.scrollLeft=0}),Y.dragFunctions={enter:function(Ie){ht(W,Ie)||Yt(Ie)},over:function(Ie){ht(W,Ie)||(function(ze,Je){var Ye=sc(ze,Je);if(Ye){var ct=document.createDocumentFragment();Sg(ze,Ye,ct),ze.display.dragCursor||(ze.display.dragCursor=ee("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),ze.display.lineSpace.insertBefore(ze.display.dragCursor,ze.display.cursorDiv)),J(ze.display.dragCursor,ct)}}(W,Ie),Yt(Ie))},start:function(Ie){return function(ze,Je){if(h&&(!ze.state.draggingText||+new Date-zb<100))Yt(Je);else if(!ht(ze,Je)&&!ga(ze.display,Je)&&(Je.dataTransfer.setData("Text",ze.getSelection()),Je.dataTransfer.effectAllowed="copyMove",Je.dataTransfer.setDragImage&&!_)){var Ye=ee("img",null,null,"position: fixed; left: 0; top: 0;");Ye.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",b&&(Ye.width=Ye.height=1,ze.display.wrapper.appendChild(Ye),Ye._top=Ye.offsetTop),Je.dataTransfer.setDragImage(Ye,0,0),b&&Ye.parentNode.removeChild(Ye)}}(W,Ie)},drop:ds(W,rE),leave:function(Ie){ht(W,Ie)||Ub(W)}};var Fe=Y.input.getField();De(Fe,"keyup",function(Ie){return Qb.call(W,Ie)}),De(Fe,"keydown",ds(W,Jb)),De(Fe,"keypress",ds(W,e1)),De(Fe,"focus",function(Ie){return Ag(W,Ie)}),De(Fe,"blur",function(Ie){return fh(W,Ie)})}(this),nE(),uc(this),this.curOp.forceUpdate=!0,vb(this,x),y.autofocus&&!M||this.hasFocus()?setTimeout(function(){w.hasFocus()&&!w.state.focused&&Ag(w)},20):fh(this),Fp)Fp.hasOwnProperty(N)&&Fp[N](this,y[N],Eh);hb(this),y.finishInit&&y.finishInit(this);for(var B=0;B<Wg.length;++B)Wg[B](this);cc(this),p&&y.lineWrapping&&getComputedStyle(O.lineDiv).textRendering=="optimizelegibility"&&(O.lineDiv.style.textRendering="auto")}wn.defaults=o1,wn.optionHandlers=Fp;var Wg=[];function Kd(f,y,w,x){var S,O=f.doc;w==null&&(w="add"),w=="smart"&&(O.mode.indent?S=xo(f,y).state:w="prev");var N=f.options.tabSize,B=Ke(O,y),W=He(B.text,null,N);B.stateAfter&&(B.stateAfter=null);var Y,le=B.text.match(/^\s*/)[0];if(x||/\S/.test(B.text)){if(w=="smart"&&((Y=O.mode.indent(S,B.text.slice(le.length),B.text))==kt||Y>150)){if(!x)return;w="prev"}}else Y=0,w="not";w=="prev"?Y=y>O.first?He(Ke(O,y-1).text,null,N):0:w=="add"?Y=W+f.options.indentUnit:w=="subtract"?Y=W-f.options.indentUnit:typeof w=="number"&&(Y=W+w),Y=Math.max(0,Y);var ue="",xe=0;if(f.options.indentWithTabs)for(var _e=Math.floor(Y/N);_e;--_e)xe+=N,ue+="	";if(xe<Y&&(ue+=fe(Y-xe)),ue!=le)return bh(O,ue,qe(y,0),qe(y,le.length),"+input"),B.stateAfter=null,!0;for(var Pe=0;Pe<O.sel.ranges.length;Pe++){var Fe=O.sel.ranges[Pe];if(Fe.head.line==y&&Fe.head.ch<le.length){var Ie=qe(y,le.length);jg(O,Pe,new Cr(Ie,Ie));break}}}wn.defineInitHook=function(f){return Wg.push(f)};var Fa=null;function Np(f){Fa=f}function Yg(f,y,w,x,S){var O=f.doc;f.display.shift=!1,x||(x=O.sel);var N=+new Date-200,B=S=="paste"||f.state.pasteIncoming>N,W=hi(y),Y=null;if(B&&x.ranges.length>1)if(Fa&&Fa.text.join(`
`)==y){if(x.ranges.length%Fa.text.length==0){Y=[];for(var le=0;le<Fa.text.length;le++)Y.push(O.splitLines(Fa.text[le]))}}else W.length==x.ranges.length&&f.options.pasteLinesPerSelection&&(Y=se(W,function(ze){return[ze]}));for(var ue=f.curOp.updateInput,xe=x.ranges.length-1;xe>=0;xe--){var _e=x.ranges[xe],Pe=_e.from(),Fe=_e.to();_e.empty()&&(w&&w>0?Pe=qe(Pe.line,Pe.ch-w):f.state.overwrite&&!B?Fe=qe(Fe.line,Math.min(Ke(O,Fe.line).text.length,Fe.ch+oe(W).length)):B&&Fa&&Fa.lineWise&&Fa.text.join(`
`)==W.join(`
`)&&(Pe=Fe=qe(Pe.line,0)));var Ie={from:Pe,to:Fe,text:Y?Y[xe%Y.length]:W,origin:S||(B?"paste":f.state.cutIncoming>N?"cut":"+input")};vh(f.doc,Ie),Wr(f,"inputRead",f,Ie)}y&&!B&&l1(f,y),ph(f),f.curOp.updateInput<2&&(f.curOp.updateInput=ue),f.curOp.typing=!0,f.state.pasteIncoming=f.state.cutIncoming=-1}function a1(f,y){var w=f.clipboardData&&f.clipboardData.getData("Text");if(w)return f.preventDefault(),y.isReadOnly()||y.options.disableInput||!y.hasFocus()||Co(y,function(){return Yg(y,w,0,null,"paste")}),!0}function l1(f,y){if(f.options.electricChars&&f.options.smartIndent)for(var w=f.doc.sel,x=w.ranges.length-1;x>=0;x--){var S=w.ranges[x];if(!(S.head.ch>100||x&&w.ranges[x-1].head.line==S.head.line)){var O=f.getModeAt(S.head),N=!1;if(O.electricChars){for(var B=0;B<O.electricChars.length;B++)if(y.indexOf(O.electricChars.charAt(B))>-1){N=Kd(f,S.head.line,"smart");break}}else O.electricInput&&O.electricInput.test(Ke(f.doc,S.head.line).text.slice(0,S.head.ch))&&(N=Kd(f,S.head.line,"smart"));N&&Wr(f,"electricInput",f,S.head.line)}}}function u1(f){for(var y=[],w=[],x=0;x<f.doc.sel.ranges.length;x++){var S=f.doc.sel.ranges[x].head.line,O={anchor:qe(S,0),head:qe(S+1,0)};w.push(O),y.push(f.getRange(O.anchor,O.head))}return{text:y,ranges:w}}function c1(f,y,w,x){f.setAttribute("autocorrect",w?"":"off"),f.setAttribute("autocapitalize",x?"":"off"),f.setAttribute("spellcheck",!!y)}function h1(){var f=ee("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),y=ee("div",[f],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return p?f.style.width="1000px":f.setAttribute("wrap","off"),T&&(f.style.border="1px solid black"),c1(f),y}function Xg(f,y,w,x,S){var O=y,N=w,B=Ke(f,y.line),W=S&&f.direction=="rtl"?-w:w;function Y(ze){var Je,Ye;if(x=="codepoint"){var ct=B.text.charCodeAt(y.ch+(w>0?0:-1));if(isNaN(ct))Je=null;else{var lt=w>0?ct>=55296&&ct<56320:ct>=56320&&ct<57343;Je=new qe(y.line,Math.max(0,Math.min(B.text.length,y.ch+w*(lt?2:1))),-w)}}else Je=S?function(ft,li,Ct,Oi){var ii=Ae(li,ft.doc.direction);if(!ii)return Ug(li,Ct,Oi);Ct.ch>=li.text.length?(Ct.ch=li.text.length,Ct.sticky="before"):Ct.ch<=0&&(Ct.ch=0,Ct.sticky="after");var Ki=ce(ii,Ct.ch,Ct.sticky),Tr=ii[Ki];if(ft.doc.direction=="ltr"&&Tr.level%2==0&&(Oi>0?Tr.to>Ct.ch:Tr.from<Ct.ch))return Ug(li,Ct,Oi);var Ji,Ui=function(kr,Rs){return zg(li,kr instanceof qe?kr.ch:kr,Rs)},Qi=function(kr){return ft.options.lineWrapping?(Ji=Ji||Qr(ft,li),Jv(ft,li,Ji,kr)):{begin:0,end:li.text.length}},Ci=Qi(Ct.sticky=="before"?Ui(Ct,-1):Ct.ch);if(ft.doc.direction=="rtl"||Tr.level==1){var Ar=Tr.level==1==Oi<0,vi=Ui(Ct,Ar?1:-1);if(vi!=null&&(Ar?vi<=Tr.to&&vi<=Ci.end:vi>=Tr.from&&vi>=Ci.begin)){var Vi=Ar?"before":"after";return new qe(Ct.line,vi,Vi)}}var Di=function(kr,Rs,Is){for(var yn=function(Na,jp){return jp?new qe(Ct.line,Ui(Na,1),"before"):new qe(Ct.line,Na,"after")};kr>=0&&kr<ii.length;kr+=Rs){var Hs=ii[kr],va=Rs>0==(Hs.level!=1),ws=va?Is.begin:Ui(Is.end,-1);if(Hs.from<=ws&&ws<Hs.to||(ws=va?Hs.from:Ui(Hs.to,-1),Is.begin<=ws&&ws<Is.end))return yn(ws,va)}},dr=Di(Ki+Oi,Oi,Ci);if(dr)return dr;var qs=Oi>0?Ci.end:Ui(Ci.begin,-1);return qs==null||Oi>0&&qs==li.text.length||!(dr=Di(Oi>0?0:ii.length-1,Oi,Qi(qs)))?null:dr}(f.cm,B,y,w):Ug(B,y,w);if(Je==null){if(ze||(Ye=y.line+W)<f.first||Ye>=f.first+f.size||(y=new qe(Ye,y.ch,y.sticky),!(B=Ke(f,Ye))))return!1;y=Gg(S,f.cm,B,y.line,W)}else y=Je;return!0}if(x=="char"||x=="codepoint")Y();else if(x=="column")Y(!0);else if(x=="word"||x=="group")for(var le=null,ue=x=="group",xe=f.cm&&f.cm.getHelper(y,"wordChars"),_e=!0;!(w<0)||Y(!_e);_e=!1){var Pe=B.text.charAt(y.ch)||`
`,Fe=Q(Pe,xe)?"w":ue&&Pe==`
`?"n":!ue||/\s/.test(Pe)?null:"p";if(!ue||_e||Fe||(Fe="s"),le&&le!=Fe){w<0&&(w=1,Y(),y.sticky="after");break}if(Fe&&(le=Fe),w>0&&!Y(!_e))break}var Ie=Lp(f,y,O,N,!0);return Xi(O,Ie)&&(Ie.hitSide=!0),Ie}function d1(f,y,w,x){var S,O,N=f.doc,B=y.left;if(x=="page"){var W=Math.min(f.display.wrapper.clientHeight,Xe(f).innerHeight||N(f).documentElement.clientHeight),Y=Math.max(W-.5*hh(f.display),3);S=(w>0?y.bottom:y.top)+w*Y}else x=="line"&&(S=w>0?y.bottom+3:y.top-3);for(;(O=bg(f,B,S)).outside;){if(w<0?S<=0:S>=N.height){O.hitSide=!0;break}S+=5*w}return O}var jr=function(f){this.cm=f,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new st,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function f1(f,y){var w=_r(f,y.line);if(!w||w.hidden)return null;var x=Ke(f.doc,y.line),S=pt(w,x,y.line),O=Ae(x,f.doc.direction),N="left";O&&(N=ce(O,y.ch)%2?"right":"left");var B=qv(S.map,y.ch,N);return B.offset=B.collapse=="right"?B.end:B.start,B}function Sh(f,y){return y&&(f.bad=!0),f}function $p(f,y,w){var x;if(y==f.display.lineDiv){if(!(x=f.display.lineDiv.childNodes[w]))return Sh(f.clipPos(qe(f.display.viewTo-1)),!0);y=null,w=0}else for(x=y;;x=x.parentNode){if(!x||x==f.display.lineDiv)return null;if(x.parentNode&&x.parentNode==f.display.lineDiv)break}for(var S=0;S<f.display.view.length;S++){var O=f.display.view[S];if(O.node==x)return hE(O,y,w)}}function hE(f,y,w){var x=f.text.firstChild,S=!1;if(!y||!de(x,y))return Sh(qe(jt(f.line),0),!0);if(y==x&&(S=!0,y=x.childNodes[w],w=0,!y)){var O=f.rest?oe(f.rest):f.line;return Sh(qe(jt(O),O.text.length),S)}var N=y.nodeType==3?y:null,B=y;for(N||y.childNodes.length!=1||y.firstChild.nodeType!=3||(N=y.firstChild,w&&(w=N.nodeValue.length));B.parentNode!=x;)B=B.parentNode;var W=f.measure,Y=W.maps;function le(Ie,ze,Je){for(var Ye=-1;Ye<(Y?Y.length:0);Ye++)for(var ct=Ye<0?W.map:Y[Ye],lt=0;lt<ct.length;lt+=3){var ft=ct[lt+2];if(ft==Ie||ft==ze){var li=jt(Ye<0?f.line:f.rest[Ye]),Ct=ct[lt]+Je;return(Je<0||ft!=Ie)&&(Ct=ct[lt+(Je?1:0)]),qe(li,Ct)}}}var ue=le(N,B,w);if(ue)return Sh(ue,S);for(var xe=B.nextSibling,_e=N?N.nodeValue.length-w:0;xe;xe=xe.nextSibling){if(ue=le(xe,xe.firstChild,0))return Sh(qe(ue.line,ue.ch-_e),S);_e+=xe.textContent.length}for(var Pe=B.previousSibling,Fe=w;Pe;Pe=Pe.previousSibling){if(ue=le(Pe,Pe.firstChild,-1))return Sh(qe(ue.line,ue.ch+Fe),S);Fe+=Pe.textContent.length}}jr.prototype.init=function(f){var y=this,w=this,x=w.cm,S=w.div=f.lineDiv;function O(B){for(var W=B.target;W;W=W.parentNode){if(W==S)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(W.className))break}return!1}function N(B){if(O(B)&&!ht(x,B)){if(x.somethingSelected())Np({lineWise:!1,text:x.getSelections()}),B.type=="cut"&&x.replaceSelection("",null,"cut");else{if(!x.options.lineWiseCopyCut)return;var W=u1(x);Np({lineWise:!0,text:W.text}),B.type=="cut"&&x.operation(function(){x.setSelections(W.ranges,0,Tt),x.replaceSelection("",null,"cut")})}if(B.clipboardData){B.clipboardData.clearData();var Y=Fa.text.join(`
`);if(B.clipboardData.setData("Text",Y),B.clipboardData.getData("Text")==Y)return void B.preventDefault()}var le=h1(),ue=le.firstChild;x.display.lineSpace.insertBefore(le,x.display.lineSpace.firstChild),ue.value=Fa.text.join(`
`);var xe=te(S.ownerDocument);ve(ue),setTimeout(function(){x.display.lineSpace.removeChild(le),xe.focus(),xe==S&&w.showPrimarySelection()},50)}}S.contentEditable=!0,c1(S,x.options.spellcheck,x.options.autocorrect,x.options.autocapitalize),De(S,"paste",function(B){!O(B)||ht(x,B)||a1(B,x)||d<=11&&setTimeout(ds(x,function(){return y.updateFromDOM()}),20)}),De(S,"compositionstart",function(B){y.composing={data:B.data,done:!1}}),De(S,"compositionupdate",function(B){y.composing||(y.composing={data:B.data,done:!1})}),De(S,"compositionend",function(B){y.composing&&(B.data!=y.composing.data&&y.readFromDOMSoon(),y.composing.done=!0)}),De(S,"touchstart",function(){return w.forceCompositionEnd()}),De(S,"input",function(){y.composing||y.readFromDOMSoon()}),De(S,"copy",N),De(S,"cut",N)},jr.prototype.screenReaderLabelChanged=function(f){f?this.div.setAttribute("aria-label",f):this.div.removeAttribute("aria-label")},jr.prototype.prepareSelection=function(){var f=tb(this.cm,!1);return f.focus=te(this.div.ownerDocument)==this.div,f},jr.prototype.showSelection=function(f,y){f&&this.cm.display.view.length&&((f.focus||y)&&this.showPrimarySelection(),this.showMultipleSelections(f))},jr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},jr.prototype.showPrimarySelection=function(){var f=this.getSelection(),y=this.cm,w=y.doc.sel.primary(),x=w.from(),S=w.to();if(y.display.viewTo==y.display.viewFrom||x.line>=y.display.viewTo||S.line<y.display.viewFrom)f.removeAllRanges();else{var O=$p(y,f.anchorNode,f.anchorOffset),N=$p(y,f.focusNode,f.focusOffset);if(!O||O.bad||!N||N.bad||dt(Or(O,N),x)!=0||dt(Sr(O,N),S)!=0){var B=y.display.view,W=x.line>=y.display.viewFrom&&f1(y,x)||{node:B[0].measure.map[2],offset:0},Y=S.line<y.display.viewTo&&f1(y,S);if(!Y){var le=B[B.length-1].measure,ue=le.maps?le.maps[le.maps.length-1]:le.map;Y={node:ue[ue.length-1],offset:ue[ue.length-2]-ue[ue.length-3]}}if(W&&Y){var xe,_e=f.rangeCount&&f.getRangeAt(0);try{xe=$(W.node,W.offset,Y.offset,Y.node)}catch{}xe&&(!a&&y.state.focused?(f.collapse(W.node,W.offset),xe.collapsed||(f.removeAllRanges(),f.addRange(xe))):(f.removeAllRanges(),f.addRange(xe)),_e&&f.anchorNode==null?f.addRange(_e):a&&this.startGracePeriod()),this.rememberSelection()}else f.removeAllRanges()}}},jr.prototype.startGracePeriod=function(){var f=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){f.gracePeriod=!1,f.selectionChanged()&&f.cm.operation(function(){return f.cm.curOp.selectionChanged=!0})},20)},jr.prototype.showMultipleSelections=function(f){J(this.cm.display.cursorDiv,f.cursors),J(this.cm.display.selectionDiv,f.selection)},jr.prototype.rememberSelection=function(){var f=this.getSelection();this.lastAnchorNode=f.anchorNode,this.lastAnchorOffset=f.anchorOffset,this.lastFocusNode=f.focusNode,this.lastFocusOffset=f.focusOffset},jr.prototype.selectionInEditor=function(){var f=this.getSelection();if(!f.rangeCount)return!1;var y=f.getRangeAt(0).commonAncestorContainer;return de(this.div,y)},jr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&te(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},jr.prototype.blur=function(){this.div.blur()},jr.prototype.getField=function(){return this.div},jr.prototype.supportsTouch=function(){return!0},jr.prototype.receivedFocus=function(){var f=this,y=this;this.selectionInEditor()?setTimeout(function(){return f.pollSelection()},20):Co(this.cm,function(){return y.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function w(){y.cm.state.focused&&(y.pollSelection(),y.polling.set(y.cm.options.pollInterval,w))})},jr.prototype.selectionChanged=function(){var f=this.getSelection();return f.anchorNode!=this.lastAnchorNode||f.anchorOffset!=this.lastAnchorOffset||f.focusNode!=this.lastFocusNode||f.focusOffset!=this.lastFocusOffset},jr.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var f=this.getSelection(),y=this.cm;if(D&&g&&this.cm.display.gutterSpecs.length&&function(S){for(var O=S;O;O=O.parentNode)if(/CodeMirror-gutter-wrapper/.test(O.className))return!0;return!1}(f.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var w=$p(y,f.anchorNode,f.anchorOffset),x=$p(y,f.focusNode,f.focusOffset);w&&x&&Co(y,function(){Ls(y.doc,xu(w,x),Tt),(w.bad||x.bad)&&(y.curOp.selectionChanged=!0)})}}},jr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var f,y,w,x=this.cm,S=x.display,O=x.doc.sel.primary(),N=O.from(),B=O.to();if(N.ch==0&&N.line>x.firstLine()&&(N=qe(N.line-1,Ke(x.doc,N.line-1).length)),B.ch==Ke(x.doc,B.line).text.length&&B.line<x.lastLine()&&(B=qe(B.line+1,0)),N.line<S.viewFrom||B.line>S.viewTo-1)return!1;N.line==S.viewFrom||(f=oc(x,N.line))==0?(y=jt(S.view[0].line),w=S.view[0].node):(y=jt(S.view[f].line),w=S.view[f-1].node.nextSibling);var W,Y,le=oc(x,B.line);if(le==S.view.length-1?(W=S.viewTo-1,Y=S.lineDiv.lastChild):(W=jt(S.view[le+1].line)-1,Y=S.view[le+1].node.previousSibling),!w)return!1;for(var ue=x.doc.splitLines(function(li,Ct,Oi,ii,Ki){var Tr="",Ji=!1,Ui=li.doc.lineSeparator(),Qi=!1;function Ci(Di){return function(dr){return dr.id==Di}}function Ar(){Ji&&(Tr+=Ui,Qi&&(Tr+=Ui),Ji=Qi=!1)}function vi(Di){Di&&(Ar(),Tr+=Di)}function Vi(Di){if(Di.nodeType==1){var dr=Di.getAttribute("cm-text");if(dr)return void vi(dr);var qs,kr=Di.getAttribute("cm-marker");if(kr){var Rs=li.findMarks(qe(ii,0),qe(Ki+1,0),Ci(+kr));return void(Rs.length&&(qs=Rs[0].find(0))&&vi(oi(li.doc,qs.from,qs.to).join(Ui)))}if(Di.getAttribute("contenteditable")=="false")return;var Is=/^(pre|div|p|li|table|br)$/i.test(Di.nodeName);if(!/^br$/i.test(Di.nodeName)&&Di.textContent.length==0)return;Is&&Ar();for(var yn=0;yn<Di.childNodes.length;yn++)Vi(Di.childNodes[yn]);/^(pre|p)$/i.test(Di.nodeName)&&(Qi=!0),Is&&(Ji=!0)}else Di.nodeType==3&&vi(Di.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Vi(Ct),Ct!=Oi;)Ct=Ct.nextSibling,Qi=!1;return Tr}(x,w,Y,y,W)),xe=oi(x.doc,qe(y,0),qe(W,Ke(x.doc,W).text.length));ue.length>1&&xe.length>1;)if(oe(ue)==oe(xe))ue.pop(),xe.pop(),W--;else{if(ue[0]!=xe[0])break;ue.shift(),xe.shift(),y++}for(var _e=0,Pe=0,Fe=ue[0],Ie=xe[0],ze=Math.min(Fe.length,Ie.length);_e<ze&&Fe.charCodeAt(_e)==Ie.charCodeAt(_e);)++_e;for(var Je=oe(ue),Ye=oe(xe),ct=Math.min(Je.length-(ue.length==1?_e:0),Ye.length-(xe.length==1?_e:0));Pe<ct&&Je.charCodeAt(Je.length-Pe-1)==Ye.charCodeAt(Ye.length-Pe-1);)++Pe;if(ue.length==1&&xe.length==1&&y==N.line)for(;_e&&_e>N.ch&&Je.charCodeAt(Je.length-Pe-1)==Ye.charCodeAt(Ye.length-Pe-1);)_e--,Pe++;ue[ue.length-1]=Je.slice(0,Je.length-Pe).replace(/^\u200b+/,""),ue[0]=ue[0].slice(_e).replace(/\u200b+$/,"");var lt=qe(y,_e),ft=qe(W,xe.length?oe(xe).length-Pe:0);return ue.length>1||ue[0]||dt(lt,ft)?(bh(x.doc,ue,lt,ft,"+input"),!0):void 0},jr.prototype.ensurePolled=function(){this.forceCompositionEnd()},jr.prototype.reset=function(){this.forceCompositionEnd()},jr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},jr.prototype.readFromDOMSoon=function(){var f=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(f.readDOMTimeout=null,f.composing){if(!f.composing.done)return;f.composing=null}f.updateFromDOM()},80))},jr.prototype.updateFromDOM=function(){var f=this;!this.cm.isReadOnly()&&this.pollContent()||Co(this.cm,function(){return ro(f.cm)})},jr.prototype.setUneditable=function(f){f.contentEditable="false"},jr.prototype.onKeyPress=function(f){f.charCode==0||this.composing||(f.preventDefault(),this.cm.isReadOnly()||ds(this.cm,Yg)(this.cm,String.fromCharCode(f.charCode==null?f.keyCode:f.charCode),0))},jr.prototype.readOnlyChanged=function(f){this.div.contentEditable=String(f!="nocursor")},jr.prototype.onContextMenu=function(){},jr.prototype.resetPosition=function(){},jr.prototype.needsContentAttribute=!0;var Bn=function(f){this.cm=f,this.prevInput="",this.pollingFast=!1,this.polling=new st,this.hasSelection=!1,this.composing=null,this.resetting=!1};Bn.prototype.init=function(f){var y=this,w=this,x=this.cm;this.createField(f);var S=this.textarea;function O(N){if(!ht(x,N)){if(x.somethingSelected())Np({lineWise:!1,text:x.getSelections()});else{if(!x.options.lineWiseCopyCut)return;var B=u1(x);Np({lineWise:!0,text:B.text}),N.type=="cut"?x.setSelections(B.ranges,null,Tt):(w.prevInput="",S.value=B.text.join(`
`),ve(S))}N.type=="cut"&&(x.state.cutIncoming=+new Date)}}f.wrapper.insertBefore(this.wrapper,f.wrapper.firstChild),T&&(S.style.width="0px"),De(S,"input",function(){h&&d>=9&&y.hasSelection&&(y.hasSelection=null),w.poll()}),De(S,"paste",function(N){ht(x,N)||a1(N,x)||(x.state.pasteIncoming=+new Date,w.fastPoll())}),De(S,"cut",O),De(S,"copy",O),De(f.scroller,"paste",function(N){if(!ga(f,N)&&!ht(x,N)){if(!S.dispatchEvent)return x.state.pasteIncoming=+new Date,void w.focus();var B=new Event("paste");B.clipboardData=N.clipboardData,S.dispatchEvent(B)}}),De(f.lineSpace,"selectstart",function(N){ga(f,N)||Kt(N)}),De(S,"compositionstart",function(){var N=x.getCursor("from");w.composing&&w.composing.range.clear(),w.composing={start:N,range:x.markText(N,x.getCursor("to"),{className:"CodeMirror-composing"})}}),De(S,"compositionend",function(){w.composing&&(w.poll(),w.composing.range.clear(),w.composing=null)})},Bn.prototype.createField=function(f){this.wrapper=h1(),this.textarea=this.wrapper.firstChild},Bn.prototype.screenReaderLabelChanged=function(f){f?this.textarea.setAttribute("aria-label",f):this.textarea.removeAttribute("aria-label")},Bn.prototype.prepareSelection=function(){var f=this.cm,y=f.display,w=f.doc,x=tb(f);if(f.options.moveInputWithCursor){var S=Oa(f,w.sel.primary().head,"div"),O=y.wrapper.getBoundingClientRect(),N=y.lineDiv.getBoundingClientRect();x.teTop=Math.max(0,Math.min(y.wrapper.clientHeight-10,S.top+N.top-O.top)),x.teLeft=Math.max(0,Math.min(y.wrapper.clientWidth-10,S.left+N.left-O.left))}return x},Bn.prototype.showSelection=function(f){var y=this.cm.display;J(y.cursorDiv,f.cursors),J(y.selectionDiv,f.selection),f.teTop!=null&&(this.wrapper.style.top=f.teTop+"px",this.wrapper.style.left=f.teLeft+"px")},Bn.prototype.reset=function(f){if(!(this.contextMenuPending||this.composing&&f)){var y=this.cm;if(this.resetting=!0,y.somethingSelected()){this.prevInput="";var w=y.getSelection();this.textarea.value=w,y.state.focused&&ve(this.textarea),h&&d>=9&&(this.hasSelection=w)}else f||(this.prevInput=this.textarea.value="",h&&d>=9&&(this.hasSelection=null));this.resetting=!1}},Bn.prototype.getField=function(){return this.textarea},Bn.prototype.supportsTouch=function(){return!1},Bn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!M||te(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Bn.prototype.blur=function(){this.textarea.blur()},Bn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Bn.prototype.receivedFocus=function(){this.slowPoll()},Bn.prototype.slowPoll=function(){var f=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){f.poll(),f.cm.state.focused&&f.slowPoll()})},Bn.prototype.fastPoll=function(){var f=!1,y=this;y.pollingFast=!0,y.polling.set(20,function w(){y.poll()||f?(y.pollingFast=!1,y.slowPoll()):(f=!0,y.polling.set(60,w))})},Bn.prototype.poll=function(){var f=this,y=this.cm,w=this.textarea,x=this.prevInput;if(this.contextMenuPending||this.resetting||!y.state.focused||Fn(w)&&!x&&!this.composing||y.isReadOnly()||y.options.disableInput||y.state.keySeq)return!1;var S=w.value;if(S==x&&!y.somethingSelected())return!1;if(h&&d>=9&&this.hasSelection===S||A&&/[\uf700-\uf7ff]/.test(S))return y.display.input.reset(),!1;if(y.doc.sel==y.display.selForContextMenu){var O=S.charCodeAt(0);if(O!=8203||x||(x=""),O==8666)return this.reset(),this.cm.execCommand("undo")}for(var N=0,B=Math.min(x.length,S.length);N<B&&x.charCodeAt(N)==S.charCodeAt(N);)++N;return Co(y,function(){Yg(y,S.slice(N),x.length-N,null,f.composing?"*compose":null),S.length>1e3||S.indexOf(`
`)>-1?w.value=f.prevInput="":f.prevInput=S,f.composing&&(f.composing.range.clear(),f.composing.range=y.markText(f.composing.start,y.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Bn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Bn.prototype.onKeyPress=function(){h&&d>=9&&(this.hasSelection=null),this.fastPoll()},Bn.prototype.onContextMenu=function(f){var y=this,w=y.cm,x=w.display,S=y.textarea;y.contextMenuPending&&y.contextMenuPending();var O=sc(w,f),N=x.scroller.scrollTop;if(O&&!b){w.options.resetSelectionOnContextMenu&&w.doc.sel.contains(O)==-1&&ds(w,Ls)(w.doc,xu(O),Tt);var B,W=S.style.cssText,Y=y.wrapper.style.cssText,le=y.wrapper.offsetParent.getBoundingClientRect();if(y.wrapper.style.cssText="position: static",S.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(f.clientY-le.top-5)+"px; left: "+(f.clientX-le.left-5)+`px;
      z-index: 1000; background: `+(h?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,p&&(B=S.ownerDocument.defaultView.scrollY),x.input.focus(),p&&S.ownerDocument.defaultView.scrollTo(null,B),x.input.reset(),w.somethingSelected()||(S.value=y.prevInput=" "),y.contextMenuPending=_e,x.selForContextMenu=w.doc.sel,clearTimeout(x.detectingSelectAll),h&&d>=9&&xe(),L){Yt(f);var ue=function(){Ge(window,"mouseup",ue),setTimeout(_e,20)};De(window,"mouseup",ue)}else setTimeout(_e,50)}function xe(){if(S.selectionStart!=null){var Pe=w.somethingSelected(),Fe=""+(Pe?S.value:"");S.value="",S.value=Fe,y.prevInput=Pe?"":"",S.selectionStart=1,S.selectionEnd=Fe.length,x.selForContextMenu=w.doc.sel}}function _e(){if(y.contextMenuPending==_e&&(y.contextMenuPending=!1,y.wrapper.style.cssText=Y,S.style.cssText=W,h&&d<9&&x.scrollbars.setScrollTop(x.scroller.scrollTop=N),S.selectionStart!=null)){(!h||h&&d<9)&&xe();var Pe=0,Fe=function(){x.selForContextMenu==w.doc.sel&&S.selectionStart==0&&S.selectionEnd>0&&y.prevInput==""?ds(w,Lb)(w):Pe++<10?x.detectingSelectAll=setTimeout(Fe,500):(x.selForContextMenu=null,x.input.reset())};x.detectingSelectAll=setTimeout(Fe,200)}}},Bn.prototype.readOnlyChanged=function(f){f||this.reset(),this.textarea.disabled=f=="nocursor",this.textarea.readOnly=!!f},Bn.prototype.setUneditable=function(){},Bn.prototype.needsContentAttribute=!1,function(f){var y=f.optionHandlers;function w(x,S,O,N){f.defaults[x]=S,O&&(y[x]=N?function(B,W,Y){Y!=Eh&&O(B,W,Y)}:O)}f.defineOption=w,f.Init=Eh,w("value","",function(x,S){return x.setValue(S)},!0),w("mode",null,function(x,S){x.doc.modeOption=S,Fg(x)},!0),w("indentUnit",2,Fg,!0),w("indentWithTabs",!1),w("smartIndent",!0),w("tabSize",4,function(x){$d(x),Md(x),ro(x)},!0),w("lineSeparator",null,function(x,S){if(x.doc.lineSep=S,S){var O=[],N=x.doc.first;x.doc.iter(function(W){for(var Y=0;;){var le=W.text.indexOf(S,Y);if(le==-1)break;Y=le+S.length,O.push(qe(N,le))}N++});for(var B=O.length-1;B>=0;B--)bh(x.doc,S,O[B],qe(O[B].line,O[B].ch+S.length))}}),w("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(x,S,O){x.state.specialChars=new RegExp(S.source+(S.test("	")?"":"|	"),"g"),O!=Eh&&x.refresh()}),w("specialCharPlaceholder",$n,function(x){return x.refresh()},!0),w("electricChars",!0),w("inputStyle",M?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),w("spellcheck",!1,function(x,S){return x.getInputField().spellcheck=S},!0),w("autocorrect",!1,function(x,S){return x.getInputField().autocorrect=S},!0),w("autocapitalize",!1,function(x,S){return x.getInputField().autocapitalize=S},!0),w("rtlMoveVisually",!P),w("wholeLineUpdateBefore",!0),w("theme","default",function(x){s1(x),Nd(x)},!0),w("keyMap","default",function(x,S,O){var N=Op(S),B=O!=Eh&&Op(O);B&&B.detach&&B.detach(x,N),N.attach&&N.attach(x,B||null)}),w("extraKeys",null),w("configureMouse",null),w("lineWrapping",!1,cE,!0),w("gutters",[],function(x,S){x.display.gutterSpecs=Og(S,x.options.lineNumbers),Nd(x)},!0),w("fixedGutter",!0,function(x,S){x.display.gutters.style.left=S?wg(x.display)+"px":"0",x.refresh()},!0),w("coverGutterNextToScrollbar",!1,function(x){return mh(x)},!0),w("scrollbarStyle","native",function(x){lb(x),mh(x),x.display.scrollbars.setScrollTop(x.doc.scrollTop),x.display.scrollbars.setScrollLeft(x.doc.scrollLeft)},!0),w("lineNumbers",!1,function(x,S){x.display.gutterSpecs=Og(x.options.gutters,S),Nd(x)},!0),w("firstLineNumber",1,Nd,!0),w("lineNumberFormatter",function(x){return x},Nd,!0),w("showCursorWhenSelecting",!1,Ld,!0),w("resetSelectionOnContextMenu",!0),w("lineWiseCopyCut",!0),w("pasteLinesPerSelection",!0),w("selectionsMayTouch",!1),w("readOnly",!1,function(x,S){S=="nocursor"&&(fh(x),x.display.input.blur()),x.display.input.readOnlyChanged(S)}),w("screenReaderLabel",null,function(x,S){S=S===""?null:S,x.display.input.screenReaderLabelChanged(S)}),w("disableInput",!1,function(x,S){S||x.display.input.reset()},!0),w("dragDrop",!0,uE),w("allowDropFileTypes",null),w("cursorBlinkRate",530),w("cursorScrollMargin",0),w("cursorHeight",1,Ld,!0),w("singleCursorHeightPerLine",!0,Ld,!0),w("workTime",100),w("workDelay",100),w("flattenSpans",!0,$d,!0),w("addModeClass",!1,$d,!0),w("pollInterval",100),w("undoDepth",200,function(x,S){return x.doc.history.undoDepth=S}),w("historyEventDelay",1250),w("viewportMargin",10,function(x){return x.refresh()},!0),w("maxHighlightLength",1e4,$d,!0),w("moveInputWithCursor",!0,function(x,S){S||x.display.input.resetPosition()}),w("tabindex",null,function(x,S){return x.display.input.getField().tabIndex=S||""}),w("autofocus",null),w("direction","ltr",function(x,S){return x.doc.setDirection(S)},!0),w("phrases",null)}(wn),function(f){var y=f.optionHandlers,w=f.helpers={};f.prototype={constructor:f,focus:function(){Xe(this).focus(),this.display.input.focus()},setOption:function(x,S){var O=this.options,N=O[x];O[x]==S&&x!="mode"||(O[x]=S,y.hasOwnProperty(x)&&ds(this,y[x])(this,S,N),et(this,"optionChange",this,x))},getOption:function(x){return this.options[x]},getDoc:function(){return this.doc},addKeyMap:function(x,S){this.state.keyMaps[S?"push":"unshift"](Op(x))},removeKeyMap:function(x){for(var S=this.state.keyMaps,O=0;O<S.length;++O)if(S[O]==x||S[O].name==x)return S.splice(O,1),!0},addOverlay:Gs(function(x,S){var O=x.token?x:f.getMode(this.options,x);if(O.startState)throw new Error("Overlays may not be stateful.");(function(N,B,W){for(var Y=0,le=W(B);Y<N.length&&W(N[Y])<=le;)Y++;N.splice(Y,0,B)})(this.state.overlays,{mode:O,modeSpec:x,opaque:S&&S.opaque,priority:S&&S.priority||0},function(N){return N.priority}),this.state.modeGen++,ro(this)}),removeOverlay:Gs(function(x){for(var S=this.state.overlays,O=0;O<S.length;++O){var N=S[O].modeSpec;if(N==x||typeof x=="string"&&N.name==x)return S.splice(O,1),this.state.modeGen++,void ro(this)}}),indentLine:Gs(function(x,S,O){typeof S!="string"&&typeof S!="number"&&(S=S==null?this.options.smartIndent?"smart":"prev":S?"add":"subtract"),mn(this.doc,x)&&Kd(this,x,S,O)}),indentSelection:Gs(function(x){for(var S=this.doc.sel.ranges,O=-1,N=0;N<S.length;N++){var B=S[N];if(B.empty())B.head.line>O&&(Kd(this,B.head.line,x,!0),O=B.head.line,N==this.doc.sel.primIndex&&ph(this));else{var W=B.from(),Y=B.to(),le=Math.max(O,W.line);O=Math.min(this.lastLine(),Y.line-(Y.ch?0:1))+1;for(var ue=le;ue<O;++ue)Kd(this,ue,x);var xe=this.doc.sel.ranges;W.ch==0&&S.length==xe.length&&xe[N].from().ch>0&&jg(this.doc,N,new Cr(W,xe[N].to()),Tt)}}}),getTokenAt:function(x,S){return Pr(this,x,S)},getLineTokens:function(x,S){return Pr(this,qe(x),S,!0)},getTokenTypeAt:function(x){x=Ft(this.doc,x);var S,O=Ho(this,Ke(this.doc,x.line)),N=0,B=(O.length-1)/2,W=x.ch;if(W==0)S=O[2];else for(;;){var Y=N+B>>1;if((Y?O[2*Y-1]:0)>=W)B=Y;else{if(!(O[2*Y+1]<W)){S=O[2*Y+2];break}N=Y+1}}var le=S?S.indexOf("overlay "):-1;return le<0?S:le==0?null:S.slice(0,le-1)},getModeAt:function(x){var S=this.doc.mode;return S.innerMode?f.innerMode(S,this.getTokenAt(x).state).mode:S},getHelper:function(x,S){return this.getHelpers(x,S)[0]},getHelpers:function(x,S){var O=[];if(!w.hasOwnProperty(S))return O;var N=w[S],B=this.getModeAt(x);if(typeof B[S]=="string")N[B[S]]&&O.push(N[B[S]]);else if(B[S])for(var W=0;W<B[S].length;W++){var Y=N[B[S][W]];Y&&O.push(Y)}else B.helperType&&N[B.helperType]?O.push(N[B.helperType]):N[B.name]&&O.push(N[B.name]);for(var le=0;le<N._global.length;le++){var ue=N._global[le];ue.pred(B,this)&&xt(O,ue.val)==-1&&O.push(ue.val)}return O},getStateAfter:function(x,S){var O=this.doc;return xo(this,(x=gr(O,x??O.first+O.size-1))+1,S).state},cursorCoords:function(x,S){var O=this.doc.sel.primary();return Oa(this,x==null?O.head:typeof x=="object"?Ft(this.doc,x):x?O.from():O.to(),S||"page")},charCoords:function(x,S){return bp(this,Ft(this.doc,x),S||"page")},coordsChar:function(x,S){return bg(this,(x=Xv(this,x,S||"page")).left,x.top)},lineAtHeight:function(x,S){return x=Xv(this,{top:x,left:0},S||"page").top,Er(this.doc,x+this.display.viewOffset)},heightAtLine:function(x,S,O){var N,B=!1;if(typeof x=="number"){var W=this.doc.first+this.doc.size-1;x<this.doc.first?x=this.doc.first:x>W&&(x=W,B=!0),N=Ke(this.doc,x)}else N=x;return vp(this,N,{top:0,left:0},S||"page",O||B).top+(B?this.doc.height-me(N):0)},defaultTextHeight:function(){return hh(this.display)},defaultCharWidth:function(){return dh(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(x,S,O,N,B){var W,Y,le,ue=this.display,xe=(x=Oa(this,Ft(this.doc,x))).bottom,_e=x.left;if(S.style.position="absolute",S.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(S),ue.sizer.appendChild(S),N=="over")xe=x.top;else if(N=="above"||N=="near"){var Pe=Math.max(ue.wrapper.clientHeight,this.doc.height),Fe=Math.max(ue.sizer.clientWidth,ue.lineSpace.clientWidth);(N=="above"||x.bottom+S.offsetHeight>Pe)&&x.top>S.offsetHeight?xe=x.top-S.offsetHeight:x.bottom+S.offsetHeight<=Pe&&(xe=x.bottom),_e+S.offsetWidth>Fe&&(_e=Fe-S.offsetWidth)}S.style.top=xe+"px",S.style.left=S.style.right="",B=="right"?(_e=ue.sizer.clientWidth-S.offsetWidth,S.style.right="0px"):(B=="left"?_e=0:B=="middle"&&(_e=(ue.sizer.clientWidth-S.offsetWidth)/2),S.style.left=_e+"px"),O&&(W=this,Y={left:_e,top:xe,right:_e+S.offsetWidth,bottom:xe+S.offsetHeight},(le=kg(W,Y)).scrollTop!=null&&Id(W,le.scrollTop),le.scrollLeft!=null&&ac(W,le.scrollLeft))},triggerOnKeyDown:Gs(Jb),triggerOnKeyPress:Gs(e1),triggerOnKeyUp:Qb,triggerOnMouseDown:Gs(t1),execCommand:function(x){if(Wd.hasOwnProperty(x))return Wd[x].call(null,this)},triggerElectric:Gs(function(x){l1(this,x)}),findPosH:function(x,S,O,N){var B=1;S<0&&(B=-1,S=-S);for(var W=Ft(this.doc,x),Y=0;Y<S&&!(W=Xg(this.doc,W,B,O,N)).hitSide;++Y);return W},moveH:Gs(function(x,S){var O=this;this.extendSelectionsBy(function(N){return O.display.shift||O.doc.extend||N.empty()?Xg(O.doc,N.head,x,S,O.options.rtlMoveVisually):x<0?N.from():N.to()},si)}),deleteH:Gs(function(x,S){var O=this.doc.sel,N=this.doc;O.somethingSelected()?N.replaceSelection("",null,"+delete"):wh(this,function(B){var W=Xg(N,B.head,x,S,!1);return x<0?{from:W,to:B.head}:{from:B.head,to:W}})}),findPosV:function(x,S,O,N){var B=1,W=N;S<0&&(B=-1,S=-S);for(var Y=Ft(this.doc,x),le=0;le<S;++le){var ue=Oa(this,Y,"div");if(W==null?W=ue.left:ue.left=W,(Y=d1(this,ue,B,O)).hitSide)break}return Y},moveV:Gs(function(x,S){var O=this,N=this.doc,B=[],W=!this.display.shift&&!N.extend&&N.sel.somethingSelected();if(N.extendSelectionsBy(function(le){if(W)return x<0?le.from():le.to();var ue=Oa(O,le.head,"div");le.goalColumn!=null&&(ue.left=le.goalColumn),B.push(ue.left);var xe=d1(O,ue,x,S);return S=="page"&&le==N.sel.primary()&&Dg(O,bp(O,xe,"div").top-ue.top),xe},si),B.length)for(var Y=0;Y<N.sel.ranges.length;Y++)N.sel.ranges[Y].goalColumn=B[Y]}),findWordAt:function(x){var S=Ke(this.doc,x.line).text,O=x.ch,N=x.ch;if(S){var B=this.getHelper(x,"wordChars");x.sticky!="before"&&N!=S.length||!O?++N:--O;for(var W=S.charAt(O),Y=Q(W,B)?function(le){return Q(le,B)}:/\s/.test(W)?function(le){return/\s/.test(le)}:function(le){return!/\s/.test(le)&&!Q(le)};O>0&&Y(S.charAt(O-1));)--O;for(;N<S.length&&Y(S.charAt(N));)++N}return new Cr(qe(x.line,O),qe(x.line,N))},toggleOverwrite:function(x){x!=null&&x==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):H(this.display.cursorDiv,"CodeMirror-overwrite"),et(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==te($e(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Gs(function(x,S){Rd(this,x,S)}),getScrollInfo:function(){var x=this.display.scroller;return{left:x.scrollLeft,top:x.scrollTop,height:x.scrollHeight-ya(this)-this.display.barHeight,width:x.scrollWidth-ya(this)-this.display.barWidth,clientHeight:Re(this),clientWidth:Hl(this)}},scrollIntoView:Gs(function(x,S){x==null?(x={from:this.doc.sel.primary().head,to:null},S==null&&(S=this.options.cursorScrollMargin)):typeof x=="number"?x={from:qe(x,0),to:null}:x.from==null&&(x={from:x,to:null}),x.to||(x.to=x.from),x.margin=S||0,x.from.line!=null?function(O,N){Sp(O),O.curOp.scrollToPos=N}(this,x):nb(this,x.from,x.to,x.margin)}),setSize:Gs(function(x,S){var O=this,N=function(W){return typeof W=="number"||/^\d+$/.test(String(W))?W+"px":W};x!=null&&(this.display.wrapper.style.width=N(x)),S!=null&&(this.display.wrapper.style.height=N(S)),this.options.lineWrapping&&Vv(this);var B=this.display.viewFrom;this.doc.iter(B,this.display.viewTo,function(W){if(W.widgets){for(var Y=0;Y<W.widgets.length;Y++)if(W.widgets[Y].noHScroll){bu(O,B,"widget");break}}++B}),this.curOp.forceUpdate=!0,et(this,"refresh",this)}),operation:function(x){return Co(this,x)},startOperation:function(){return uc(this)},endOperation:function(){return cc(this)},refresh:Gs(function(){var x=this.display.cachedTextHeight;ro(this),this.curOp.forceUpdate=!0,Md(this),Rd(this,this.doc.scrollLeft,this.doc.scrollTop),Rg(this.display),(x==null||Math.abs(x-hh(this.display))>.5||this.options.lineWrapping)&&Eg(this),et(this,"refresh",this)}),swapDoc:Gs(function(x){var S=this.doc;return S.cm=null,this.state.selectingText&&this.state.selectingText(),vb(this,x),Md(this),this.display.input.reset(),Rd(this,x.scrollLeft,x.scrollTop),this.curOp.forceScroll=!0,Wr(this,"swapDoc",this,S),S}),phrase:function(x){var S=this.options.phrases;return S&&Object.prototype.hasOwnProperty.call(S,x)?S[x]:x},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},qt(f),f.registerHelper=function(x,S,O){w.hasOwnProperty(x)||(w[x]=f[x]={_global:[]}),w[x][S]=O},f.registerGlobalHelper=function(x,S,O,N){f.registerHelper(x,S,N),w[x]._global.push({pred:O,val:N})}}(wn);var dE="iter insert remove copy getEditor constructor".split(" ");for(var Bp in no.prototype)no.prototype.hasOwnProperty(Bp)&&xt(dE,Bp)<0&&(wn.prototype[Bp]=function(f){return function(){return f.apply(this.doc,arguments)}}(no.prototype[Bp]));return qt(no),wn.inputStyles={textarea:Bn,contenteditable:jr},wn.defineMode=function(f){wn.defaults.mode||f=="null"||(wn.defaults.mode=f),bo.apply(this,arguments)},wn.defineMIME=function(f,y){$r[f]=y},wn.defineMode("null",function(){return{token:function(f){return f.skipToEnd()}}}),wn.defineMIME("text/plain","null"),wn.defineExtension=function(f,y){wn.prototype[f]=y},wn.defineDocExtension=function(f,y){no.prototype[f]=y},wn.fromTextArea=function(f,y){if((y=y?Be(y):{}).value=f.value,!y.tabindex&&f.tabIndex&&(y.tabindex=f.tabIndex),!y.placeholder&&f.placeholder&&(y.placeholder=f.placeholder),y.autofocus==null){var w=te(f.ownerDocument);y.autofocus=w==f||f.getAttribute("autofocus")!=null&&w==document.body}function x(){f.value=B.getValue()}var S;if(f.form&&(De(f.form,"submit",x),!y.leaveSubmitMethodAlone)){var O=f.form;S=O.submit;try{var N=O.submit=function(){x(),O.submit=S,O.submit(),O.submit=N}}catch{}}y.finishInit=function(W){W.save=x,W.getTextArea=function(){return f},W.toTextArea=function(){W.toTextArea=isNaN,x(),f.parentNode.removeChild(W.getWrapperElement()),f.style.display="",f.form&&(Ge(f.form,"submit",x),y.leaveSubmitMethodAlone||typeof f.form.submit!="function"||(f.form.submit=S))}},f.style.display="none";var B=wn(function(W){return f.parentNode.insertBefore(W,f.nextSibling)},y);return B},function(f){f.off=Ge,f.on=De,f.wheelEventPixels=Jw,f.Doc=no,f.splitLines=hi,f.countColumn=He,f.findColumn=ur,f.isWordChar=Z,f.Pass=kt,f.signal=et,f.Line=pi,f.changeEnd=wu,f.scrollbarModel=ab,f.Pos=qe,f.cmpPos=dt,f.modes=nr,f.mimeModes=$r,f.resolveMode=ye,f.getMode=ke,f.modeExtensions=rt,f.extendMode=Ze,f.copyState=bt,f.startState=di,f.innerMode=ti,f.commands=Wd,f.keyMap=Wl,f.keyName=Wb,f.isModifierKey=Hb,f.lookupKey=xh,f.normalizeKeyMap=aE,f.StringStream=vt,f.SharedTextMarker=qd,f.TextMarker=Su,f.LineWidget=Gd,f.e_preventDefault=Kt,f.e_stopPropagation=It,f.e_stop=Yt,f.addClass=z,f.contains=de,f.rmClass=H,f.keyNames=Cu}(wn),wn.version="5.65.9",wn})},{}],11:[function(t,r,n){var s;s=function(o){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;o.defineMode("gfm",function(l,u){var c=0,h={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(m){return{code:m.code,codeBlock:m.codeBlock,ateSpace:m.ateSpace}},token:function(m,g){if(g.combineTokens=null,g.codeBlock)return m.match(/^```+/)?(g.codeBlock=!1,null):(m.skipToEnd(),null);if(m.sol()&&(g.code=!1),m.sol()&&m.match(/^```+/))return m.skipToEnd(),g.codeBlock=!0,null;if(m.peek()==="`"){m.next();var v=m.pos;m.eatWhile("`");var b=1+m.pos-v;return g.code?b===c&&(g.code=!1):(c=b,g.code=!0),null}return g.code?(m.next(),null):m.eatSpace()?(g.ateSpace=!0,null):(m.sol()||g.ateSpace)&&(g.ateSpace=!1,u.gitHubSpice!==!1)&&(m.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||m.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||m.match(a)&&m.string.slice(m.start-2,m.start)!="]("&&(m.start==0||/\W/.test(m.string.charAt(m.start-1)))?(g.combineTokens=!0,"link"):(m.next(),null)},blankLine:function(m){return m.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var p in u)d[p]=u[p];return d.name="markdown",o.overlayMode(o.getMode(l,d),h)},"markdown"),o.defineMIME("text/x-gfm","gfm")},typeof n=="object"&&typeof r=="object"?s(t("../../lib/codemirror"),t("../markdown/markdown"),t("../../addon/mode/overlay")):s(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(t,r,n){var s;s=function(o){o.defineMode("markdown",function(a,l){var u=o.getMode(a,"text/html"),c=u.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var h={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var d in h)h.hasOwnProperty(d)&&l.tokenTypeOverrides[d]&&(h[d]=l.tokenTypeOverrides[d]);var p=/^([*\-_])(?:\s*\1){2,}\s*$/,m=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,g=/^\[(x| )\](?=\s)/i,v=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,b=/^ {0,3}(?:\={1,}|-{2,})\s*$/,_=/^[^#!\[\]*_\\<>` "'(~:]+/,E=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,C=/^\s*\[[^\]]+?\]:.*$/,T=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function D(te,z,ne){return z.f=z.inline=ne,ne(te,z)}function M(te,z,ne){return z.f=z.block=ne,ne(te,z)}function A(te){if(te.linkTitle=!1,te.linkHref=!1,te.linkText=!1,te.em=!1,te.strong=!1,te.strikethrough=!1,te.quote=0,te.indentedCode=!1,te.f==P){var z=c;if(!z){var ne=o.innerMode(u,te.htmlState);z=ne.mode.name=="xml"&&ne.state.tagStart===null&&!ne.state.context&&ne.state.tokenize.isInText}z&&(te.f=F,te.block=I,te.htmlState=null)}return te.trailingSpace=0,te.trailingSpaceNewLine=!1,te.prevLine=te.thisLine,te.thisLine={stream:null},null}function I(te,z){var ne,ve=te.column()===z.indentation,$e=!(ne=z.prevLine.stream)||!/\S/.test(ne.string),Xe=z.indentedCode,ot=z.prevLine.hr,Be=z.list!==!1,He=(z.listStack[z.listStack.length-1]||0)+3;z.indentedCode=!1;var st=z.indentation;if(z.indentationDiff===null&&(z.indentationDiff=z.indentation,Be)){for(z.list=null;st<z.listStack[z.listStack.length-1];)z.listStack.pop(),z.listStack.length?z.indentation=z.listStack[z.listStack.length-1]:z.list=!1;z.list!==!1&&(z.indentationDiff=st-z.listStack[z.listStack.length-1])}var xt=!($e||ot||z.prevLine.header||Be&&Xe||z.prevLine.fencedCodeEnd),kt=(z.list===!1||ot||$e)&&z.indentation<=He&&te.match(p),Tt=null;if(z.indentationDiff>=4&&(Xe||z.prevLine.fencedCodeEnd||z.prevLine.header||$e))return te.skipToEnd(),z.indentedCode=!0,h.code;if(te.eatSpace())return null;if(ve&&z.indentation<=He&&(Tt=te.match(v))&&Tt[1].length<=6)return z.quote=0,z.header=Tt[1].length,z.thisLine.header=!0,l.highlightFormatting&&(z.formatting="header"),z.f=z.inline,K(z);if(z.indentation<=He&&te.eat(">"))return z.quote=ve?1:z.quote+1,l.highlightFormatting&&(z.formatting="quote"),te.eatSpace(),K(z);if(!kt&&!z.setext&&ve&&z.indentation<=He&&(Tt=te.match(m))){var Ei=Tt[1]?"ol":"ul";return z.indentation=st+te.current().length,z.list=!0,z.quote=0,z.listStack.push(z.indentation),z.em=!1,z.strong=!1,z.code=!1,z.strikethrough=!1,l.taskLists&&te.match(g,!1)&&(z.taskList=!0),z.f=z.inline,l.highlightFormatting&&(z.formatting=["list","list-"+Ei]),K(z)}return ve&&z.indentation<=He&&(Tt=te.match(E,!0))?(z.quote=0,z.fencedEndRE=new RegExp(Tt[1]+"+ *$"),z.localMode=l.fencedCodeBlockHighlighting&&function(si){if(o.findModeByName){var ur=o.findModeByName(si);ur&&(si=ur.mime||ur.mimes[0])}var Ve=o.getMode(a,si);return Ve.name=="null"?null:Ve}(Tt[2]||l.fencedCodeBlockDefaultMode),z.localMode&&(z.localState=o.startState(z.localMode)),z.f=z.block=U,l.highlightFormatting&&(z.formatting="code-block"),z.code=-1,K(z)):z.setext||!(xt&&Be||z.quote||z.list!==!1||z.code||kt||C.test(te.string))&&(Tt=te.lookAhead(1))&&(Tt=Tt.match(b))?(z.setext?(z.header=z.setext,z.setext=0,te.skipToEnd(),l.highlightFormatting&&(z.formatting="header")):(z.header=Tt[0].charAt(0)=="="?1:2,z.setext=z.header),z.thisLine.header=!0,z.f=z.inline,K(z)):kt?(te.skipToEnd(),z.hr=!0,z.thisLine.hr=!0,h.hr):te.peek()==="["?D(te,z,J):D(te,z,z.inline)}function P(te,z){var ne=u.token(te,z.htmlState);if(!c){var ve=o.innerMode(u,z.htmlState);(ve.mode.name=="xml"&&ve.state.tagStart===null&&!ve.state.context&&ve.state.tokenize.isInText||z.md_inside&&te.current().indexOf(">")>-1)&&(z.f=F,z.block=I,z.htmlState=null)}return ne}function U(te,z){var ne,ve=z.listStack[z.listStack.length-1]||0,$e=z.indentation<ve,Xe=ve+3;return z.fencedEndRE&&z.indentation<=Xe&&($e||te.match(z.fencedEndRE))?(l.highlightFormatting&&(z.formatting="code-block"),$e||(ne=K(z)),z.localMode=z.localState=null,z.block=I,z.f=F,z.fencedEndRE=null,z.code=0,z.thisLine.fencedCodeEnd=!0,$e?M(te,z,z.block):ne):z.localMode?z.localMode.token(te,z.localState):(te.skipToEnd(),h.code)}function K(te){var z=[];if(te.formatting){z.push(h.formatting),typeof te.formatting=="string"&&(te.formatting=[te.formatting]);for(var ne=0;ne<te.formatting.length;ne++)z.push(h.formatting+"-"+te.formatting[ne]),te.formatting[ne]==="header"&&z.push(h.formatting+"-"+te.formatting[ne]+"-"+te.header),te.formatting[ne]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=te.quote?z.push(h.formatting+"-"+te.formatting[ne]+"-"+te.quote):z.push("error"))}if(te.taskOpen)return z.push("meta"),z.length?z.join(" "):null;if(te.taskClosed)return z.push("property"),z.length?z.join(" "):null;if(te.linkHref?z.push(h.linkHref,"url"):(te.strong&&z.push(h.strong),te.em&&z.push(h.em),te.strikethrough&&z.push(h.strikethrough),te.emoji&&z.push(h.emoji),te.linkText&&z.push(h.linkText),te.code&&z.push(h.code),te.image&&z.push(h.image),te.imageAltText&&z.push(h.imageAltText,"link"),te.imageMarker&&z.push(h.imageMarker)),te.header&&z.push(h.header,h.header+"-"+te.header),te.quote&&(z.push(h.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=te.quote?z.push(h.quote+"-"+te.quote):z.push(h.quote+"-"+l.maxBlockquoteDepth)),te.list!==!1){var ve=(te.listStack.length-1)%3;ve?ve===1?z.push(h.list2):z.push(h.list3):z.push(h.list1)}return te.trailingSpaceNewLine?z.push("trailing-space-new-line"):te.trailingSpace&&z.push("trailing-space-"+(te.trailingSpace%2?"a":"b")),z.length?z.join(" "):null}function L(te,z){if(te.match(_,!0))return K(z)}function F(te,z){var ne=z.text(te,z);if(ne!==void 0)return ne;if(z.list)return z.list=null,K(z);if(z.taskList)return te.match(g,!0)[1]===" "?z.taskOpen=!0:z.taskClosed=!0,l.highlightFormatting&&(z.formatting="task"),z.taskList=!1,K(z);if(z.taskOpen=!1,z.taskClosed=!1,z.header&&te.match(/^#+$/,!0))return l.highlightFormatting&&(z.formatting="header"),K(z);var ve=te.next();if(z.linkTitle){z.linkTitle=!1;var $e=ve;ve==="("&&($e=")");var Xe="^\\s*(?:[^"+($e=($e+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+$e;if(te.match(new RegExp(Xe),!0))return h.linkHref}if(ve==="`"){var ot=z.formatting;l.highlightFormatting&&(z.formatting="code"),te.eatWhile("`");var Be=te.current().length;if(z.code!=0||z.quote&&Be!=1){if(Be==z.code){var He=K(z);return z.code=0,He}return z.formatting=ot,K(z)}return z.code=Be,K(z)}if(z.code)return K(z);if(ve==="\\"&&(te.next(),l.highlightFormatting)){var st=K(z),xt=h.formatting+"-escape";return st?st+" "+xt:xt}if(ve==="!"&&te.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return z.imageMarker=!0,z.image=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(ve==="["&&z.imageMarker&&te.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return z.imageMarker=!1,z.imageAltText=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(ve==="]"&&z.imageAltText){l.highlightFormatting&&(z.formatting="image");var st=K(z);return z.imageAltText=!1,z.image=!1,z.inline=z.f=H,st}if(ve==="["&&!z.image)return z.linkText&&te.match(/^.*?\]/)||(z.linkText=!0,l.highlightFormatting&&(z.formatting="link")),K(z);if(ve==="]"&&z.linkText){l.highlightFormatting&&(z.formatting="link");var st=K(z);return z.linkText=!1,z.inline=z.f=te.match(/\(.*?\)| ?\[.*?\]/,!1)?H:F,st}if(ve==="<"&&te.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=$,l.highlightFormatting&&(z.formatting="link"),(st=K(z))?st+=" ":st="",st+h.linkInline;if(ve==="<"&&te.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=$,l.highlightFormatting&&(z.formatting="link"),(st=K(z))?st+=" ":st="",st+h.linkEmail;if(l.xml&&ve==="<"&&te.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var kt=te.string.indexOf(">",te.pos);if(kt!=-1){var Tt=te.string.substring(te.start,kt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Tt)&&(z.md_inside=!0)}return te.backUp(1),z.htmlState=o.startState(u),M(te,z,P)}if(l.xml&&ve==="<"&&te.match(/^\/\w*?>/))return z.md_inside=!1,"tag";if(ve==="*"||ve==="_"){for(var Ei=1,si=te.pos==1?" ":te.string.charAt(te.pos-2);Ei<3&&te.eat(ve);)Ei++;var ur=te.peek()||" ",Ve=!/\s/.test(ur)&&(!T.test(ur)||/\s/.test(si)||T.test(si)),fe=!/\s/.test(si)&&(!T.test(si)||/\s/.test(ur)||T.test(ur)),oe=null,se=null;if(Ei%2&&(z.em||!Ve||ve!=="*"&&fe&&!T.test(si)?z.em!=ve||!fe||ve!=="*"&&Ve&&!T.test(ur)||(oe=!1):oe=!0),Ei>1&&(z.strong||!Ve||ve!=="*"&&fe&&!T.test(si)?z.strong!=ve||!fe||ve!=="*"&&Ve&&!T.test(ur)||(se=!1):se=!0),se!=null||oe!=null)return l.highlightFormatting&&(z.formatting=oe==null?"strong":se==null?"em":"strong em"),oe===!0&&(z.em=ve),se===!0&&(z.strong=ve),He=K(z),oe===!1&&(z.em=!1),se===!1&&(z.strong=!1),He}else if(ve===" "&&(te.eat("*")||te.eat("_"))){if(te.peek()===" ")return K(z);te.backUp(1)}if(l.strikethrough){if(ve==="~"&&te.eatWhile(ve)){if(z.strikethrough)return l.highlightFormatting&&(z.formatting="strikethrough"),He=K(z),z.strikethrough=!1,He;if(te.match(/^[^\s]/,!1))return z.strikethrough=!0,l.highlightFormatting&&(z.formatting="strikethrough"),K(z)}else if(ve===" "&&te.match("~~",!0)){if(te.peek()===" ")return K(z);te.backUp(2)}}if(l.emoji&&ve===":"&&te.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){z.emoji=!0,l.highlightFormatting&&(z.formatting="emoji");var pe=K(z);return z.emoji=!1,pe}return ve===" "&&(te.match(/^ +$/,!1)?z.trailingSpace++:z.trailingSpace&&(z.trailingSpaceNewLine=!0)),K(z)}function $(te,z){if(te.next()===">"){z.f=z.inline=F,l.highlightFormatting&&(z.formatting="link");var ne=K(z);return ne?ne+=" ":ne="",ne+h.linkInline}return te.match(/^[^>]+/,!0),h.linkInline}function H(te,z){if(te.eatSpace())return null;var ne,ve=te.next();return ve==="("||ve==="["?(z.f=z.inline=(ne=ve==="("?")":"]",function($e,Xe){if($e.next()===ne){Xe.f=Xe.inline=F,l.highlightFormatting&&(Xe.formatting="link-string");var ot=K(Xe);return Xe.linkHref=!1,ot}return $e.match(V[ne]),Xe.linkHref=!0,K(Xe)}),l.highlightFormatting&&(z.formatting="link-string"),z.linkHref=!0,K(z)):"error"}var V={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function J(te,z){return te.match(/^([^\]\\]|\\.)*\]:/,!1)?(z.f=ee,te.next(),l.highlightFormatting&&(z.formatting="link"),z.linkText=!0,K(z)):D(te,z,F)}function ee(te,z){if(te.match("]:",!0)){z.f=z.inline=ie,l.highlightFormatting&&(z.formatting="link");var ne=K(z);return z.linkText=!1,ne}return te.match(/^([^\]\\]|\\.)+/,!0),h.linkText}function ie(te,z){return te.eatSpace()?null:(te.match(/^[^\s]+/,!0),te.peek()===void 0?z.linkTitle=!0:te.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),z.f=z.inline=F,h.linkHref+" url")}var de={startState:function(){return{f:I,prevLine:{stream:null},thisLine:{stream:null},block:I,htmlState:null,indentation:0,inline:F,text:L,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(te){return{f:te.f,prevLine:te.prevLine,thisLine:te.thisLine,block:te.block,htmlState:te.htmlState&&o.copyState(u,te.htmlState),indentation:te.indentation,localMode:te.localMode,localState:te.localMode?o.copyState(te.localMode,te.localState):null,inline:te.inline,text:te.text,formatting:!1,linkText:te.linkText,linkTitle:te.linkTitle,linkHref:te.linkHref,code:te.code,em:te.em,strong:te.strong,strikethrough:te.strikethrough,emoji:te.emoji,header:te.header,setext:te.setext,hr:te.hr,taskList:te.taskList,list:te.list,listStack:te.listStack.slice(0),quote:te.quote,indentedCode:te.indentedCode,trailingSpace:te.trailingSpace,trailingSpaceNewLine:te.trailingSpaceNewLine,md_inside:te.md_inside,fencedEndRE:te.fencedEndRE}},token:function(te,z){if(z.formatting=!1,te!=z.thisLine.stream){if(z.header=0,z.hr=!1,te.match(/^\s*$/,!0))return A(z),null;if(z.prevLine=z.thisLine,z.thisLine={stream:te},z.taskList=!1,z.trailingSpace=0,z.trailingSpaceNewLine=!1,!z.localState&&(z.f=z.block,z.f!=P)){var ne=te.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(z.indentation=ne,z.indentationDiff=null,ne>0)return null}}return z.f(te,z)},innerMode:function(te){return te.block==P?{state:te.htmlState,mode:u}:te.localState?{state:te.localState,mode:te.localMode}:{state:te,mode:de}},indent:function(te,z,ne){return te.block==P&&u.indent?u.indent(te.htmlState,z,ne):te.localState&&te.localMode.indent?te.localMode.indent(te.localState,z,ne):o.Pass},blankLine:A,getType:K,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return de},"xml"),o.defineMIME("text/markdown","markdown"),o.defineMIME("text/x-markdown","markdown")},typeof n=="object"&&typeof r=="object"?s(t("../../lib/codemirror"),t("../xml/xml"),t("../meta")):s(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(t,r,n){(function(s){s.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var o=0;o<s.modeInfo.length;o++){var a=s.modeInfo[o];a.mimes&&(a.mime=a.mimes[0])}s.findModeByMIME=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.mime==l)return c;if(c.mimes){for(var h=0;h<c.mimes.length;h++)if(c.mimes[h]==l)return c}}return/\+xml$/.test(l)?s.findModeByMIME("application/xml"):/\+json$/.test(l)?s.findModeByMIME("application/json"):void 0},s.findModeByExtension=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.ext){for(var h=0;h<c.ext.length;h++)if(c.ext[h]==l)return c}}},s.findModeByFileName=function(l){for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.file&&c.file.test(l))return c}var h=l.lastIndexOf("."),d=h>-1&&l.substring(h+1,l.length);if(d)return s.findModeByExtension(d)},s.findModeByName=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.name.toLowerCase()==l)return c;if(c.alias){for(var h=0;h<c.alias.length;h++)if(c.alias[h].toLowerCase()==l)return c}}}})(typeof n=="object"&&typeof r=="object"?t("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(t,r,n){(function(s){var o={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};s.defineMode("xml",function(l,u){var c,h,d=l.indentUnit,p={},m=u.htmlMode?o:a;for(var g in m)p[g]=m[g];for(var g in u)p[g]=u[g];function v(V,J){function ee(de){return J.tokenize=de,de(V,J)}var ie=V.next();return ie=="<"?V.eat("!")?V.eat("[")?V.match("CDATA[")?ee(_("atom","]]>")):null:V.match("--")?ee(_("comment","-->")):V.match("DOCTYPE",!0,!0)?(V.eatWhile(/[\w\._\-]/),ee(E(1))):null:V.eat("?")?(V.eatWhile(/[\w\._\-]/),J.tokenize=_("meta","?>"),"meta"):(c=V.eat("/")?"closeTag":"openTag",J.tokenize=b,"tag bracket"):ie=="&"?(V.eat("#")?V.eat("x")?V.eatWhile(/[a-fA-F\d]/)&&V.eat(";"):V.eatWhile(/[\d]/)&&V.eat(";"):V.eatWhile(/[\w\.\-:]/)&&V.eat(";"))?"atom":"error":(V.eatWhile(/[^&<]/),null)}function b(V,J){var ee,ie,de=V.next();if(de==">"||de=="/"&&V.eat(">"))return J.tokenize=v,c=de==">"?"endTag":"selfcloseTag","tag bracket";if(de=="=")return c="equals",null;if(de=="<"){J.tokenize=v,J.state=A,J.tagName=J.tagStart=null;var te=J.tokenize(V,J);return te?te+" tag error":"tag error"}return/[\'\"]/.test(de)?(J.tokenize=(ee=de,ie=function(z,ne){for(;!z.eol();)if(z.next()==ee){ne.tokenize=b;break}return"string"},ie.isInAttribute=!0,ie),J.stringStartCol=V.column(),J.tokenize(V,J)):(V.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function _(V,J){return function(ee,ie){for(;!ee.eol();){if(ee.match(J)){ie.tokenize=v;break}ee.next()}return V}}function E(V){return function(J,ee){for(var ie;(ie=J.next())!=null;){if(ie=="<")return ee.tokenize=E(V+1),ee.tokenize(J,ee);if(ie==">"){if(V==1){ee.tokenize=v;break}return ee.tokenize=E(V-1),ee.tokenize(J,ee)}}return"meta"}}function C(V){return V&&V.toLowerCase()}function T(V,J,ee){this.prev=V.context,this.tagName=J||"",this.indent=V.indented,this.startOfLine=ee,(p.doNotIndent.hasOwnProperty(J)||V.context&&V.context.noIndent)&&(this.noIndent=!0)}function D(V){V.context&&(V.context=V.context.prev)}function M(V,J){for(var ee;;){if(!V.context||(ee=V.context.tagName,!p.contextGrabbers.hasOwnProperty(C(ee))||!p.contextGrabbers[C(ee)].hasOwnProperty(C(J))))return;D(V)}}function A(V,J,ee){return V=="openTag"?(ee.tagStart=J.column(),I):V=="closeTag"?P:A}function I(V,J,ee){return V=="word"?(ee.tagName=J.current(),h="tag",L):p.allowMissingTagName&&V=="endTag"?(h="tag bracket",L(V,0,ee)):(h="error",I)}function P(V,J,ee){if(V=="word"){var ie=J.current();return ee.context&&ee.context.tagName!=ie&&p.implicitlyClosed.hasOwnProperty(C(ee.context.tagName))&&D(ee),ee.context&&ee.context.tagName==ie||p.matchClosing===!1?(h="tag",U):(h="tag error",K)}return p.allowMissingTagName&&V=="endTag"?(h="tag bracket",U(V,0,ee)):(h="error",K)}function U(V,J,ee){return V!="endTag"?(h="error",U):(D(ee),A)}function K(V,J,ee){return h="error",U(V,0,ee)}function L(V,J,ee){if(V=="word")return h="attribute",F;if(V=="endTag"||V=="selfcloseTag"){var ie=ee.tagName,de=ee.tagStart;return ee.tagName=ee.tagStart=null,V=="selfcloseTag"||p.autoSelfClosers.hasOwnProperty(C(ie))?M(ee,ie):(M(ee,ie),ee.context=new T(ee,ie,de==ee.indented)),A}return h="error",L}function F(V,J,ee){return V=="equals"?$:(p.allowMissing||(h="error"),L(V,0,ee))}function $(V,J,ee){return V=="string"?H:V=="word"&&p.allowUnquoted?(h="string",L):(h="error",L(V,0,ee))}function H(V,J,ee){return V=="string"?H:L(V,0,ee)}return v.isInText=!0,{startState:function(V){var J={tokenize:v,state:A,indented:V||0,tagName:null,tagStart:null,context:null};return V!=null&&(J.baseIndent=V),J},token:function(V,J){if(!J.tagName&&V.sol()&&(J.indented=V.indentation()),V.eatSpace())return null;c=null;var ee=J.tokenize(V,J);return(ee||c)&&ee!="comment"&&(h=null,J.state=J.state(c||ee,V,J),h&&(ee=h=="error"?ee+" error":h)),ee},indent:function(V,J,ee){var ie=V.context;if(V.tokenize.isInAttribute)return V.tagStart==V.indented?V.stringStartCol+1:V.indented+d;if(ie&&ie.noIndent)return s.Pass;if(V.tokenize!=b&&V.tokenize!=v)return ee?ee.match(/^(\s*)/)[0].length:0;if(V.tagName)return p.multilineTagIndentPastTag!==!1?V.tagStart+V.tagName.length+2:V.tagStart+d*(p.multilineTagIndentFactor||1);if(p.alignCDATA&&/<!\[CDATA\[/.test(J))return 0;var de=J&&/^<(\/)?([\w_:\.-]*)/.exec(J);if(de&&de[1])for(;ie;){if(ie.tagName==de[2]){ie=ie.prev;break}if(!p.implicitlyClosed.hasOwnProperty(C(ie.tagName)))break;ie=ie.prev}else if(de)for(;ie;){var te=p.contextGrabbers[C(ie.tagName)];if(!te||!te.hasOwnProperty(C(de[2])))break;ie=ie.prev}for(;ie&&ie.prev&&!ie.startOfLine;)ie=ie.prev;return ie?ie.indent+d:V.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:p.htmlMode?"html":"xml",helperType:p.htmlMode?"html":"xml",skipAttribute:function(V){V.state==$&&(V.state=L)},xmlCurrentTag:function(V){return V.tagName?{name:V.tagName,close:V.type=="closeTag"}:null},xmlCurrentContext:function(V){for(var J=[],ee=V.context;ee;ee=ee.prev)J.push(ee.tagName);return J.reverse()}}}),s.defineMIME("text/xml","xml"),s.defineMIME("application/xml","xml"),s.mimeModes.hasOwnProperty("text/html")||s.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof n=="object"&&typeof r=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(t,r,n){(function(s,o){o(typeof n=="object"&&r!==void 0?n:(s=typeof globalThis<"u"?globalThis:s||self).marked={})})(this,function(s){function o(Ve,fe){for(var oe=0;oe<fe.length;oe++){var se=fe[oe];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Ve,se.key,se)}}function a(Ve,fe){(fe==null||fe>Ve.length)&&(fe=Ve.length);for(var oe=0,se=new Array(fe);oe<fe;oe++)se[oe]=Ve[oe];return se}function l(Ve,fe){var oe=typeof Symbol<"u"&&Ve[Symbol.iterator]||Ve["@@iterator"];if(oe)return(oe=oe.call(Ve)).next.bind(oe);if(Array.isArray(Ve)||(oe=function(pe,R){if(pe){if(typeof pe=="string")return a(pe,R);var j=Object.prototype.toString.call(pe).slice(8,-1);return j==="Object"&&pe.constructor&&(j=pe.constructor.name),j==="Map"||j==="Set"?Array.from(pe):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?a(pe,R):void 0}}(Ve))||fe&&Ve&&typeof Ve.length=="number"){oe&&(Ve=oe);var se=0;return function(){return se>=Ve.length?{done:!0}:{done:!1,value:Ve[se++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}s.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var c=/[&<>"']/,h=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(Ve){return m[Ve]};function v(Ve,fe){if(fe){if(c.test(Ve))return Ve.replace(h,g)}else if(d.test(Ve))return Ve.replace(p,g);return Ve}var b=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function _(Ve){return Ve.replace(b,function(fe,oe){return(oe=oe.toLowerCase())==="colon"?":":oe.charAt(0)==="#"?oe.charAt(1)==="x"?String.fromCharCode(parseInt(oe.substring(2),16)):String.fromCharCode(+oe.substring(1)):""})}var E=/(^|[^\[])\^/g;function C(Ve,fe){Ve=typeof Ve=="string"?Ve:Ve.source,fe=fe||"";var oe={replace:function(se,pe){return pe=(pe=pe.source||pe).replace(E,"$1"),Ve=Ve.replace(se,pe),oe},getRegex:function(){return new RegExp(Ve,fe)}};return oe}var T=/[^\w:]/g,D=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function M(Ve,fe,oe){if(Ve){var se;try{se=decodeURIComponent(_(oe)).replace(T,"").toLowerCase()}catch{return null}if(se.indexOf("javascript:")===0||se.indexOf("vbscript:")===0||se.indexOf("data:")===0)return null}fe&&!D.test(oe)&&(oe=function(pe,R){A[" "+pe]||(I.test(pe)?A[" "+pe]=pe+"/":A[" "+pe]=$(pe,"/",!0));var j=(pe=A[" "+pe]).indexOf(":")===-1;return R.substring(0,2)==="//"?j?R:pe.replace(P,"$1")+R:R.charAt(0)==="/"?j?R:pe.replace(U,"$1")+R:pe+R}(fe,oe));try{oe=encodeURI(oe).replace(/%25/g,"%")}catch{return null}return oe}var A={},I=/^[^:]+:\/*[^/]*$/,P=/^([^:]+:)[\s\S]*$/,U=/^([^:]+:\/*[^/]*)[\s\S]*$/,K={exec:function(){}};function L(Ve){for(var fe,oe,se=1;se<arguments.length;se++)for(oe in fe=arguments[se])Object.prototype.hasOwnProperty.call(fe,oe)&&(Ve[oe]=fe[oe]);return Ve}function F(Ve,fe){var oe=Ve.replace(/\|/g,function(pe,R,j){for(var Z=!1,Q=R;--Q>=0&&j[Q]==="\\";)Z=!Z;return Z?"|":" |"}).split(/ \|/),se=0;if(oe[0].trim()||oe.shift(),oe.length>0&&!oe[oe.length-1].trim()&&oe.pop(),oe.length>fe)oe.splice(fe);else for(;oe.length<fe;)oe.push("");for(;se<oe.length;se++)oe[se]=oe[se].trim().replace(/\\\|/g,"|");return oe}function $(Ve,fe,oe){var se=Ve.length;if(se===0)return"";for(var pe=0;pe<se;){var R=Ve.charAt(se-pe-1);if(R!==fe||oe){if(R===fe||!oe)break;pe++}else pe++}return Ve.slice(0,se-pe)}function H(Ve){Ve&&Ve.sanitize&&!Ve.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function V(Ve,fe){if(fe<1)return"";for(var oe="";fe>1;)1&fe&&(oe+=Ve),fe>>=1,Ve+=Ve;return oe+Ve}function J(Ve,fe,oe,se){var pe=fe.href,R=fe.title?v(fe.title):null,j=Ve[1].replace(/\\([\[\]])/g,"$1");if(Ve[0].charAt(0)!=="!"){se.state.inLink=!0;var Z={type:"link",raw:oe,href:pe,title:R,text:j,tokens:se.inlineTokens(j)};return se.state.inLink=!1,Z}return{type:"image",raw:oe,href:pe,title:R,text:v(j)}}var ee=function(){function Ve(oe){this.options=oe||s.defaults}var fe=Ve.prototype;return fe.space=function(oe){var se=this.rules.block.newline.exec(oe);if(se&&se[0].length>0)return{type:"space",raw:se[0]}},fe.code=function(oe){var se=this.rules.block.code.exec(oe);if(se){var pe=se[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:se[0],codeBlockStyle:"indented",text:this.options.pedantic?pe:$(pe,`
`)}}},fe.fences=function(oe){var se=this.rules.block.fences.exec(oe);if(se){var pe=se[0],R=function(j,Z){var Q=j.match(/^(\s+)(?:```)/);if(Q===null)return Z;var ge=Q[1];return Z.split(`
`).map(function(be){var Ce=be.match(/^\s+/);return Ce===null?be:Ce[0].length>=ge.length?be.slice(ge.length):be}).join(`
`)}(pe,se[3]||"");return{type:"code",raw:pe,lang:se[2]?se[2].trim():se[2],text:R}}},fe.heading=function(oe){var se=this.rules.block.heading.exec(oe);if(se){var pe=se[2].trim();if(/#$/.test(pe)){var R=$(pe,"#");this.options.pedantic?pe=R.trim():R&&!/ $/.test(R)||(pe=R.trim())}return{type:"heading",raw:se[0],depth:se[1].length,text:pe,tokens:this.lexer.inline(pe)}}},fe.hr=function(oe){var se=this.rules.block.hr.exec(oe);if(se)return{type:"hr",raw:se[0]}},fe.blockquote=function(oe){var se=this.rules.block.blockquote.exec(oe);if(se){var pe=se[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:se[0],tokens:this.lexer.blockTokens(pe,[]),text:pe}}},fe.list=function(oe){var se=this.rules.block.list.exec(oe);if(se){var pe,R,j,Z,Q,ge,be,Ce,G,re,he,ce,Te=se[1].trim(),Ae=Te.length>1,Se={type:"list",raw:"",ordered:Ae,start:Ae?+Te.slice(0,-1):"",loose:!1,items:[]};Te=Ae?"\\d{1,9}\\"+Te.slice(-1):"\\"+Te,this.options.pedantic&&(Te=Ae?Te:"[*+-]");for(var De=new RegExp("^( {0,3}"+Te+")((?:[	 ][^\\n]*)?(?:\\n|$))");oe&&(ce=!1,se=De.exec(oe))&&!this.rules.block.hr.test(oe);){if(pe=se[0],oe=oe.substring(pe.length),Ce=se[2].split(`
`,1)[0],G=oe.split(`
`,1)[0],this.options.pedantic?(Z=2,he=Ce.trimLeft()):(Z=(Z=se[2].search(/[^ ]/))>4?1:Z,he=Ce.slice(Z),Z+=se[1].length),ge=!1,!Ce&&/^ *$/.test(G)&&(pe+=G+`
`,oe=oe.substring(G.length+1),ce=!0),!ce)for(var Oe=new RegExp("^ {0,"+Math.min(3,Z-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),Ge=new RegExp("^ {0,"+Math.min(3,Z-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),et=new RegExp("^ {0,"+Math.min(3,Z-1)+"}(?:```|~~~)"),ht=new RegExp("^ {0,"+Math.min(3,Z-1)+"}#");oe&&(Ce=re=oe.split(`
`,1)[0],this.options.pedantic&&(Ce=Ce.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!et.test(Ce))&&!ht.test(Ce)&&!Oe.test(Ce)&&!Ge.test(oe);){if(Ce.search(/[^ ]/)>=Z||!Ce.trim())he+=`
`+Ce.slice(Z);else{if(ge)break;he+=`
`+Ce}ge||Ce.trim()||(ge=!0),pe+=re+`
`,oe=oe.substring(re.length+1)}Se.loose||(be?Se.loose=!0:/\n *\n *$/.test(pe)&&(be=!0)),this.options.gfm&&(R=/^\[[ xX]\] /.exec(he))&&(j=R[0]!=="[ ] ",he=he.replace(/^\[[ xX]\] +/,"")),Se.items.push({type:"list_item",raw:pe,task:!!R,checked:j,loose:!1,text:he}),Se.raw+=pe}Se.items[Se.items.length-1].raw=pe.trimRight(),Se.items[Se.items.length-1].text=he.trimRight(),Se.raw=Se.raw.trimRight();var Ut=Se.items.length;for(Q=0;Q<Ut;Q++){this.lexer.state.top=!1,Se.items[Q].tokens=this.lexer.blockTokens(Se.items[Q].text,[]);var gt=Se.items[Q].tokens.filter(function(Kt){return Kt.type==="space"}),qt=gt.every(function(Kt){for(var It,Vt=0,Yt=l(Kt.raw.split(""));!(It=Yt()).done;)if(It.value===`
`&&(Vt+=1),Vt>1)return!0;return!1});!Se.loose&&gt.length&&qt&&(Se.loose=!0,Se.items[Q].loose=!0)}return Se}},fe.html=function(oe){var se=this.rules.block.html.exec(oe);if(se){var pe={type:"html",raw:se[0],pre:!this.options.sanitizer&&(se[1]==="pre"||se[1]==="script"||se[1]==="style"),text:se[0]};if(this.options.sanitize){var R=this.options.sanitizer?this.options.sanitizer(se[0]):v(se[0]);pe.type="paragraph",pe.text=R,pe.tokens=this.lexer.inline(R)}return pe}},fe.def=function(oe){var se=this.rules.block.def.exec(oe);if(se)return se[3]&&(se[3]=se[3].substring(1,se[3].length-1)),{type:"def",tag:se[1].toLowerCase().replace(/\s+/g," "),raw:se[0],href:se[2],title:se[3]}},fe.table=function(oe){var se=this.rules.block.table.exec(oe);if(se){var pe={type:"table",header:F(se[1]).map(function(be){return{text:be}}),align:se[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:se[3]&&se[3].trim()?se[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(pe.header.length===pe.align.length){pe.raw=se[0];var R,j,Z,Q,ge=pe.align.length;for(R=0;R<ge;R++)/^ *-+: *$/.test(pe.align[R])?pe.align[R]="right":/^ *:-+: *$/.test(pe.align[R])?pe.align[R]="center":/^ *:-+ *$/.test(pe.align[R])?pe.align[R]="left":pe.align[R]=null;for(ge=pe.rows.length,R=0;R<ge;R++)pe.rows[R]=F(pe.rows[R],pe.header.length).map(function(be){return{text:be}});for(ge=pe.header.length,j=0;j<ge;j++)pe.header[j].tokens=this.lexer.inline(pe.header[j].text);for(ge=pe.rows.length,j=0;j<ge;j++)for(Q=pe.rows[j],Z=0;Z<Q.length;Z++)Q[Z].tokens=this.lexer.inline(Q[Z].text);return pe}}},fe.lheading=function(oe){var se=this.rules.block.lheading.exec(oe);if(se)return{type:"heading",raw:se[0],depth:se[2].charAt(0)==="="?1:2,text:se[1],tokens:this.lexer.inline(se[1])}},fe.paragraph=function(oe){var se=this.rules.block.paragraph.exec(oe);if(se){var pe=se[1].charAt(se[1].length-1)===`
`?se[1].slice(0,-1):se[1];return{type:"paragraph",raw:se[0],text:pe,tokens:this.lexer.inline(pe)}}},fe.text=function(oe){var se=this.rules.block.text.exec(oe);if(se)return{type:"text",raw:se[0],text:se[0],tokens:this.lexer.inline(se[0])}},fe.escape=function(oe){var se=this.rules.inline.escape.exec(oe);if(se)return{type:"escape",raw:se[0],text:v(se[1])}},fe.tag=function(oe){var se=this.rules.inline.tag.exec(oe);if(se)return!this.lexer.state.inLink&&/^<a /i.test(se[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(se[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(se[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(se[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:se[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(se[0]):v(se[0]):se[0]}},fe.link=function(oe){var se=this.rules.inline.link.exec(oe);if(se){var pe=se[2].trim();if(!this.options.pedantic&&/^</.test(pe)){if(!/>$/.test(pe))return;var R=$(pe.slice(0,-1),"\\");if((pe.length-R.length)%2==0)return}else{var j=function(Ce,G){if(Ce.indexOf(G[1])===-1)return-1;for(var re=Ce.length,he=0,ce=0;ce<re;ce++)if(Ce[ce]==="\\")ce++;else if(Ce[ce]===G[0])he++;else if(Ce[ce]===G[1]&&--he<0)return ce;return-1}(se[2],"()");if(j>-1){var Z=(se[0].indexOf("!")===0?5:4)+se[1].length+j;se[2]=se[2].substring(0,j),se[0]=se[0].substring(0,Z).trim(),se[3]=""}}var Q=se[2],ge="";if(this.options.pedantic){var be=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Q);be&&(Q=be[1],ge=be[3])}else ge=se[3]?se[3].slice(1,-1):"";return Q=Q.trim(),/^</.test(Q)&&(Q=this.options.pedantic&&!/>$/.test(pe)?Q.slice(1):Q.slice(1,-1)),J(se,{href:Q&&Q.replace(this.rules.inline._escapes,"$1"),title:ge&&ge.replace(this.rules.inline._escapes,"$1")},se[0],this.lexer)}},fe.reflink=function(oe,se){var pe;if((pe=this.rules.inline.reflink.exec(oe))||(pe=this.rules.inline.nolink.exec(oe))){var R=(pe[2]||pe[1]).replace(/\s+/g," ");if(!(R=se[R.toLowerCase()])||!R.href){var j=pe[0].charAt(0);return{type:"text",raw:j,text:j}}return J(pe,R,pe[0],this.lexer)}},fe.emStrong=function(oe,se,pe){pe===void 0&&(pe="");var R=this.rules.inline.emStrong.lDelim.exec(oe);if(R&&(!R[3]||!pe.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var j=R[1]||R[2]||"";if(!j||j&&(pe===""||this.rules.inline.punctuation.exec(pe))){var Z,Q,ge=R[0].length-1,be=ge,Ce=0,G=R[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(G.lastIndex=0,se=se.slice(-1*oe.length+ge);(R=G.exec(se))!=null;)if(Z=R[1]||R[2]||R[3]||R[4]||R[5]||R[6])if(Q=Z.length,R[3]||R[4])be+=Q;else if(!((R[5]||R[6])&&ge%3)||(ge+Q)%3){if(!((be-=Q)>0)){if(Q=Math.min(Q,Q+be+Ce),Math.min(ge,Q)%2){var re=oe.slice(1,ge+R.index+Q);return{type:"em",raw:oe.slice(0,ge+R.index+Q+1),text:re,tokens:this.lexer.inlineTokens(re)}}var he=oe.slice(2,ge+R.index+Q-1);return{type:"strong",raw:oe.slice(0,ge+R.index+Q+1),text:he,tokens:this.lexer.inlineTokens(he)}}}else Ce+=Q}}},fe.codespan=function(oe){var se=this.rules.inline.code.exec(oe);if(se){var pe=se[2].replace(/\n/g," "),R=/[^ ]/.test(pe),j=/^ /.test(pe)&&/ $/.test(pe);return R&&j&&(pe=pe.substring(1,pe.length-1)),pe=v(pe,!0),{type:"codespan",raw:se[0],text:pe}}},fe.br=function(oe){var se=this.rules.inline.br.exec(oe);if(se)return{type:"br",raw:se[0]}},fe.del=function(oe){var se=this.rules.inline.del.exec(oe);if(se)return{type:"del",raw:se[0],text:se[2],tokens:this.lexer.inlineTokens(se[2])}},fe.autolink=function(oe,se){var pe,R,j=this.rules.inline.autolink.exec(oe);if(j)return R=j[2]==="@"?"mailto:"+(pe=v(this.options.mangle?se(j[1]):j[1])):pe=v(j[1]),{type:"link",raw:j[0],text:pe,href:R,tokens:[{type:"text",raw:pe,text:pe}]}},fe.url=function(oe,se){var pe;if(pe=this.rules.inline.url.exec(oe)){var R,j;if(pe[2]==="@")j="mailto:"+(R=v(this.options.mangle?se(pe[0]):pe[0]));else{var Z;do Z=pe[0],pe[0]=this.rules.inline._backpedal.exec(pe[0])[0];while(Z!==pe[0]);R=v(pe[0]),j=pe[1]==="www."?"http://"+R:R}return{type:"link",raw:pe[0],text:R,href:j,tokens:[{type:"text",raw:R,text:R}]}}},fe.inlineText=function(oe,se){var pe,R=this.rules.inline.text.exec(oe);if(R)return pe=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(R[0]):v(R[0]):R[0]:v(this.options.smartypants?se(R[0]):R[0]),{type:"text",raw:R[0],text:pe}},Ve}(),ie={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:K,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ie.def=C(ie.def).replace("label",ie._label).replace("title",ie._title).getRegex(),ie.bullet=/(?:[*+-]|\d{1,9}[.)])/,ie.listItemStart=C(/^( *)(bull) */).replace("bull",ie.bullet).getRegex(),ie.list=C(ie.list).replace(/bull/g,ie.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ie.def.source+")").getRegex(),ie._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ie._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ie.html=C(ie.html,"i").replace("comment",ie._comment).replace("tag",ie._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ie.paragraph=C(ie._paragraph).replace("hr",ie.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ie._tag).getRegex(),ie.blockquote=C(ie.blockquote).replace("paragraph",ie.paragraph).getRegex(),ie.normal=L({},ie),ie.gfm=L({},ie.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ie.gfm.table=C(ie.gfm.table).replace("hr",ie.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ie._tag).getRegex(),ie.gfm.paragraph=C(ie._paragraph).replace("hr",ie.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ie.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ie._tag).getRegex(),ie.pedantic=L({},ie.normal,{html:C(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ie._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:K,paragraph:C(ie.normal._paragraph).replace("hr",ie.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ie.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var de={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:K,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:K,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function te(Ve){return Ve.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function z(Ve){var fe,oe,se="",pe=Ve.length;for(fe=0;fe<pe;fe++)oe=Ve.charCodeAt(fe),Math.random()>.5&&(oe="x"+oe.toString(16)),se+="&#"+oe+";";return se}de._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",de.punctuation=C(de.punctuation).replace(/punctuation/g,de._punctuation).getRegex(),de.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,de.escapedEmSt=/\\\*|\\_/g,de._comment=C(ie._comment).replace("(?:-->|$)","-->").getRegex(),de.emStrong.lDelim=C(de.emStrong.lDelim).replace(/punct/g,de._punctuation).getRegex(),de.emStrong.rDelimAst=C(de.emStrong.rDelimAst,"g").replace(/punct/g,de._punctuation).getRegex(),de.emStrong.rDelimUnd=C(de.emStrong.rDelimUnd,"g").replace(/punct/g,de._punctuation).getRegex(),de._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,de._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,de._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,de.autolink=C(de.autolink).replace("scheme",de._scheme).replace("email",de._email).getRegex(),de._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,de.tag=C(de.tag).replace("comment",de._comment).replace("attribute",de._attribute).getRegex(),de._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,de._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,de._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,de.link=C(de.link).replace("label",de._label).replace("href",de._href).replace("title",de._title).getRegex(),de.reflink=C(de.reflink).replace("label",de._label).replace("ref",ie._label).getRegex(),de.nolink=C(de.nolink).replace("ref",ie._label).getRegex(),de.reflinkSearch=C(de.reflinkSearch,"g").replace("reflink",de.reflink).replace("nolink",de.nolink).getRegex(),de.normal=L({},de),de.pedantic=L({},de.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:C(/^!?\[(label)\]\((.*?)\)/).replace("label",de._label).getRegex(),reflink:C(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",de._label).getRegex()}),de.gfm=L({},de.normal,{escape:C(de.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),de.gfm.url=C(de.gfm.url,"i").replace("email",de.gfm._extended_email).getRegex(),de.breaks=L({},de.gfm,{br:C(de.br).replace("{2,}","*").getRegex(),text:C(de.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var ne=function(){function Ve(R){this.tokens=[],this.tokens.links=Object.create(null),this.options=R||s.defaults,this.options.tokenizer=this.options.tokenizer||new ee,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var j={block:ie.normal,inline:de.normal};this.options.pedantic?(j.block=ie.pedantic,j.inline=de.pedantic):this.options.gfm&&(j.block=ie.gfm,this.options.breaks?j.inline=de.breaks:j.inline=de.gfm),this.tokenizer.rules=j}Ve.lex=function(R,j){return new Ve(j).lex(R)},Ve.lexInline=function(R,j){return new Ve(j).inlineTokens(R)};var fe,oe,se,pe=Ve.prototype;return pe.lex=function(R){var j;for(R=R.replace(/\r\n|\r/g,`
`),this.blockTokens(R,this.tokens);j=this.inlineQueue.shift();)this.inlineTokens(j.src,j.tokens);return this.tokens},pe.blockTokens=function(R,j){var Z,Q,ge,be,Ce=this;for(j===void 0&&(j=[]),R=this.options.pedantic?R.replace(/\t/g,"    ").replace(/^ +$/gm,""):R.replace(/^( *)(\t+)/gm,function(re,he,ce){return he+"    ".repeat(ce.length)});R;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(re){return!!(Z=re.call({lexer:Ce},R,j))&&(R=R.substring(Z.raw.length),j.push(Z),!0)}))){if(Z=this.tokenizer.space(R))R=R.substring(Z.raw.length),Z.raw.length===1&&j.length>0?j[j.length-1].raw+=`
`:j.push(Z);else if(Z=this.tokenizer.code(R))R=R.substring(Z.raw.length),!(Q=j[j.length-1])||Q.type!=="paragraph"&&Q.type!=="text"?j.push(Z):(Q.raw+=`
`+Z.raw,Q.text+=`
`+Z.text,this.inlineQueue[this.inlineQueue.length-1].src=Q.text);else if(Z=this.tokenizer.fences(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.heading(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.hr(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.blockquote(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.list(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.html(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.def(R))R=R.substring(Z.raw.length),!(Q=j[j.length-1])||Q.type!=="paragraph"&&Q.type!=="text"?this.tokens.links[Z.tag]||(this.tokens.links[Z.tag]={href:Z.href,title:Z.title}):(Q.raw+=`
`+Z.raw,Q.text+=`
`+Z.raw,this.inlineQueue[this.inlineQueue.length-1].src=Q.text);else if(Z=this.tokenizer.table(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.lheading(R))R=R.substring(Z.raw.length),j.push(Z);else if(ge=R,this.options.extensions&&this.options.extensions.startBlock&&function(){var re=1/0,he=R.slice(1),ce=void 0;Ce.options.extensions.startBlock.forEach(function(Te){typeof(ce=Te.call({lexer:this},he))=="number"&&ce>=0&&(re=Math.min(re,ce))}),re<1/0&&re>=0&&(ge=R.substring(0,re+1))}(),this.state.top&&(Z=this.tokenizer.paragraph(ge)))Q=j[j.length-1],be&&Q.type==="paragraph"?(Q.raw+=`
`+Z.raw,Q.text+=`
`+Z.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Q.text):j.push(Z),be=ge.length!==R.length,R=R.substring(Z.raw.length);else if(Z=this.tokenizer.text(R))R=R.substring(Z.raw.length),(Q=j[j.length-1])&&Q.type==="text"?(Q.raw+=`
`+Z.raw,Q.text+=`
`+Z.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Q.text):j.push(Z);else if(R){var G="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(G);break}throw new Error(G)}}return this.state.top=!0,j},pe.inline=function(R,j){return j===void 0&&(j=[]),this.inlineQueue.push({src:R,tokens:j}),j},pe.inlineTokens=function(R,j){var Z,Q,ge,be=this;j===void 0&&(j=[]);var Ce,G,re,he=R;if(this.tokens.links){var ce=Object.keys(this.tokens.links);if(ce.length>0)for(;(Ce=this.tokenizer.rules.inline.reflinkSearch.exec(he))!=null;)ce.includes(Ce[0].slice(Ce[0].lastIndexOf("[")+1,-1))&&(he=he.slice(0,Ce.index)+"["+V("a",Ce[0].length-2)+"]"+he.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ce=this.tokenizer.rules.inline.blockSkip.exec(he))!=null;)he=he.slice(0,Ce.index)+"["+V("a",Ce[0].length-2)+"]"+he.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ce=this.tokenizer.rules.inline.escapedEmSt.exec(he))!=null;)he=he.slice(0,Ce.index)+"++"+he.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;R;)if(G||(re=""),G=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ae){return!!(Z=Ae.call({lexer:be},R,j))&&(R=R.substring(Z.raw.length),j.push(Z),!0)})))if(Z=this.tokenizer.escape(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.tag(R))R=R.substring(Z.raw.length),(Q=j[j.length-1])&&Z.type==="text"&&Q.type==="text"?(Q.raw+=Z.raw,Q.text+=Z.text):j.push(Z);else if(Z=this.tokenizer.link(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.reflink(R,this.tokens.links))R=R.substring(Z.raw.length),(Q=j[j.length-1])&&Z.type==="text"&&Q.type==="text"?(Q.raw+=Z.raw,Q.text+=Z.text):j.push(Z);else if(Z=this.tokenizer.emStrong(R,he,re))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.codespan(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.br(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.del(R))R=R.substring(Z.raw.length),j.push(Z);else if(Z=this.tokenizer.autolink(R,z))R=R.substring(Z.raw.length),j.push(Z);else if(this.state.inLink||!(Z=this.tokenizer.url(R,z))){if(ge=R,this.options.extensions&&this.options.extensions.startInline&&function(){var Ae=1/0,Se=R.slice(1),De=void 0;be.options.extensions.startInline.forEach(function(Oe){typeof(De=Oe.call({lexer:this},Se))=="number"&&De>=0&&(Ae=Math.min(Ae,De))}),Ae<1/0&&Ae>=0&&(ge=R.substring(0,Ae+1))}(),Z=this.tokenizer.inlineText(ge,te))R=R.substring(Z.raw.length),Z.raw.slice(-1)!=="_"&&(re=Z.raw.slice(-1)),G=!0,(Q=j[j.length-1])&&Q.type==="text"?(Q.raw+=Z.raw,Q.text+=Z.text):j.push(Z);else if(R){var Te="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(Te);break}throw new Error(Te)}}else R=R.substring(Z.raw.length),j.push(Z);return j},fe=Ve,se=[{key:"rules",get:function(){return{block:ie,inline:de}}}],(oe=null)&&o(fe.prototype,oe),se&&o(fe,se),Object.defineProperty(fe,"prototype",{writable:!1}),Ve}(),ve=function(){function Ve(oe){this.options=oe||s.defaults}var fe=Ve.prototype;return fe.code=function(oe,se,pe){var R=(se||"").match(/\S*/)[0];if(this.options.highlight){var j=this.options.highlight(oe,R);j!=null&&j!==oe&&(pe=!0,oe=j)}return oe=oe.replace(/\n$/,"")+`
`,R?'<pre><code class="'+this.options.langPrefix+v(R,!0)+'">'+(pe?oe:v(oe,!0))+`</code></pre>
`:"<pre><code>"+(pe?oe:v(oe,!0))+`</code></pre>
`},fe.blockquote=function(oe){return`<blockquote>
`+oe+`</blockquote>
`},fe.html=function(oe){return oe},fe.heading=function(oe,se,pe,R){return this.options.headerIds?"<h"+se+' id="'+(this.options.headerPrefix+R.slug(pe))+'">'+oe+"</h"+se+`>
`:"<h"+se+">"+oe+"</h"+se+`>
`},fe.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},fe.list=function(oe,se,pe){var R=se?"ol":"ul";return"<"+R+(se&&pe!==1?' start="'+pe+'"':"")+`>
`+oe+"</"+R+`>
`},fe.listitem=function(oe){return"<li>"+oe+`</li>
`},fe.checkbox=function(oe){return"<input "+(oe?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},fe.paragraph=function(oe){return"<p>"+oe+`</p>
`},fe.table=function(oe,se){return se&&(se="<tbody>"+se+"</tbody>"),`<table>
<thead>
`+oe+`</thead>
`+se+`</table>
`},fe.tablerow=function(oe){return`<tr>
`+oe+`</tr>
`},fe.tablecell=function(oe,se){var pe=se.header?"th":"td";return(se.align?"<"+pe+' align="'+se.align+'">':"<"+pe+">")+oe+"</"+pe+`>
`},fe.strong=function(oe){return"<strong>"+oe+"</strong>"},fe.em=function(oe){return"<em>"+oe+"</em>"},fe.codespan=function(oe){return"<code>"+oe+"</code>"},fe.br=function(){return this.options.xhtml?"<br/>":"<br>"},fe.del=function(oe){return"<del>"+oe+"</del>"},fe.link=function(oe,se,pe){if((oe=M(this.options.sanitize,this.options.baseUrl,oe))===null)return pe;var R='<a href="'+v(oe)+'"';return se&&(R+=' title="'+se+'"'),R+=">"+pe+"</a>"},fe.image=function(oe,se,pe){if((oe=M(this.options.sanitize,this.options.baseUrl,oe))===null)return pe;var R='<img src="'+oe+'" alt="'+pe+'"';return se&&(R+=' title="'+se+'"'),R+=this.options.xhtml?"/>":">"},fe.text=function(oe){return oe},Ve}(),$e=function(){function Ve(){}var fe=Ve.prototype;return fe.strong=function(oe){return oe},fe.em=function(oe){return oe},fe.codespan=function(oe){return oe},fe.del=function(oe){return oe},fe.html=function(oe){return oe},fe.text=function(oe){return oe},fe.link=function(oe,se,pe){return""+pe},fe.image=function(oe,se,pe){return""+pe},fe.br=function(){return""},Ve}(),Xe=function(){function Ve(){this.seen={}}var fe=Ve.prototype;return fe.serialize=function(oe){return oe.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},fe.getNextSafeSlug=function(oe,se){var pe=oe,R=0;if(this.seen.hasOwnProperty(pe)){R=this.seen[oe];do pe=oe+"-"+ ++R;while(this.seen.hasOwnProperty(pe))}return se||(this.seen[oe]=R,this.seen[pe]=0),pe},fe.slug=function(oe,se){se===void 0&&(se={});var pe=this.serialize(oe);return this.getNextSafeSlug(pe,se.dryrun)},Ve}(),ot=function(){function Ve(oe){this.options=oe||s.defaults,this.options.renderer=this.options.renderer||new ve,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new $e,this.slugger=new Xe}Ve.parse=function(oe,se){return new Ve(se).parse(oe)},Ve.parseInline=function(oe,se){return new Ve(se).parseInline(oe)};var fe=Ve.prototype;return fe.parse=function(oe,se){se===void 0&&(se=!0);var pe,R,j,Z,Q,ge,be,Ce,G,re,he,ce,Te,Ae,Se,De,Oe,Ge,et,ht="",Ut=oe.length;for(pe=0;pe<Ut;pe++)if(re=oe[pe],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[re.type])||(et=this.options.extensions.renderers[re.type].call({parser:this},re))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(re.type))switch(re.type){case"space":continue;case"hr":ht+=this.renderer.hr();continue;case"heading":ht+=this.renderer.heading(this.parseInline(re.tokens),re.depth,_(this.parseInline(re.tokens,this.textRenderer)),this.slugger);continue;case"code":ht+=this.renderer.code(re.text,re.lang,re.escaped);continue;case"table":for(Ce="",be="",Z=re.header.length,R=0;R<Z;R++)be+=this.renderer.tablecell(this.parseInline(re.header[R].tokens),{header:!0,align:re.align[R]});for(Ce+=this.renderer.tablerow(be),G="",Z=re.rows.length,R=0;R<Z;R++){for(be="",Q=(ge=re.rows[R]).length,j=0;j<Q;j++)be+=this.renderer.tablecell(this.parseInline(ge[j].tokens),{header:!1,align:re.align[j]});G+=this.renderer.tablerow(be)}ht+=this.renderer.table(Ce,G);continue;case"blockquote":G=this.parse(re.tokens),ht+=this.renderer.blockquote(G);continue;case"list":for(he=re.ordered,ce=re.start,Te=re.loose,Z=re.items.length,G="",R=0;R<Z;R++)De=(Se=re.items[R]).checked,Oe=Se.task,Ae="",Se.task&&(Ge=this.renderer.checkbox(De),Te?Se.tokens.length>0&&Se.tokens[0].type==="paragraph"?(Se.tokens[0].text=Ge+" "+Se.tokens[0].text,Se.tokens[0].tokens&&Se.tokens[0].tokens.length>0&&Se.tokens[0].tokens[0].type==="text"&&(Se.tokens[0].tokens[0].text=Ge+" "+Se.tokens[0].tokens[0].text)):Se.tokens.unshift({type:"text",text:Ge}):Ae+=Ge),Ae+=this.parse(Se.tokens,Te),G+=this.renderer.listitem(Ae,Oe,De);ht+=this.renderer.list(G,he,ce);continue;case"html":ht+=this.renderer.html(re.text);continue;case"paragraph":ht+=this.renderer.paragraph(this.parseInline(re.tokens));continue;case"text":for(G=re.tokens?this.parseInline(re.tokens):re.text;pe+1<Ut&&oe[pe+1].type==="text";)G+=`
`+((re=oe[++pe]).tokens?this.parseInline(re.tokens):re.text);ht+=se?this.renderer.paragraph(G):G;continue;default:var gt='Token with "'+re.type+'" type was not found.';if(this.options.silent)return void console.error(gt);throw new Error(gt)}else ht+=et||"";return ht},fe.parseInline=function(oe,se){se=se||this.renderer;var pe,R,j,Z="",Q=oe.length;for(pe=0;pe<Q;pe++)if(R=oe[pe],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[R.type])||(j=this.options.extensions.renderers[R.type].call({parser:this},R))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(R.type))switch(R.type){case"escape":case"text":Z+=se.text(R.text);break;case"html":Z+=se.html(R.text);break;case"link":Z+=se.link(R.href,R.title,this.parseInline(R.tokens,se));break;case"image":Z+=se.image(R.href,R.title,R.text);break;case"strong":Z+=se.strong(this.parseInline(R.tokens,se));break;case"em":Z+=se.em(this.parseInline(R.tokens,se));break;case"codespan":Z+=se.codespan(R.text);break;case"br":Z+=se.br();break;case"del":Z+=se.del(this.parseInline(R.tokens,se));break;default:var ge='Token with "'+R.type+'" type was not found.';if(this.options.silent)return void console.error(ge);throw new Error(ge)}else Z+=j||"";return Z},Ve}();function Be(Ve,fe,oe){if(Ve==null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ve!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ve)+", string expected");if(typeof fe=="function"&&(oe=fe,fe=null),H(fe=L({},Be.defaults,fe||{})),oe){var se,pe=fe.highlight;try{se=ne.lex(Ve,fe)}catch(ge){return oe(ge)}var R=function(ge){var be;if(!ge)try{fe.walkTokens&&Be.walkTokens(se,fe.walkTokens),be=ot.parse(se,fe)}catch(Ce){ge=Ce}return fe.highlight=pe,ge?oe(ge):oe(null,be)};if(!pe||pe.length<3||(delete fe.highlight,!se.length))return R();var j=0;return Be.walkTokens(se,function(ge){ge.type==="code"&&(j++,setTimeout(function(){pe(ge.text,ge.lang,function(be,Ce){if(be)return R(be);Ce!=null&&Ce!==ge.text&&(ge.text=Ce,ge.escaped=!0),--j===0&&R()})},0))}),void(j===0&&R())}function Z(ge){if(ge.message+=`
Please report this to https://github.com/markedjs/marked.`,fe.silent)return"<p>An error occurred:</p><pre>"+v(ge.message+"",!0)+"</pre>";throw ge}try{var Q=ne.lex(Ve,fe);if(fe.walkTokens){if(fe.async)return Promise.all(Be.walkTokens(Q,fe.walkTokens)).then(function(){return ot.parse(Q,fe)}).catch(Z);Be.walkTokens(Q,fe.walkTokens)}return ot.parse(Q,fe)}catch(ge){Z(ge)}}Be.options=Be.setOptions=function(Ve){var fe;return L(Be.defaults,Ve),fe=Be.defaults,s.defaults=fe,Be},Be.getDefaults=u,Be.defaults=s.defaults,Be.use=function(){for(var Ve=arguments.length,fe=new Array(Ve),oe=0;oe<Ve;oe++)fe[oe]=arguments[oe];var se,pe=L.apply(void 0,[{}].concat(fe)),R=Be.defaults.extensions||{renderers:{},childTokens:{}};fe.forEach(function(j){if(j.extensions&&(se=!0,j.extensions.forEach(function(Q){if(!Q.name)throw new Error("extension name required");if(Q.renderer){var ge=R.renderers?R.renderers[Q.name]:null;R.renderers[Q.name]=ge?function(){for(var be=arguments.length,Ce=new Array(be),G=0;G<be;G++)Ce[G]=arguments[G];var re=Q.renderer.apply(this,Ce);return re===!1&&(re=ge.apply(this,Ce)),re}:Q.renderer}if(Q.tokenizer){if(!Q.level||Q.level!=="block"&&Q.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");R[Q.level]?R[Q.level].unshift(Q.tokenizer):R[Q.level]=[Q.tokenizer],Q.start&&(Q.level==="block"?R.startBlock?R.startBlock.push(Q.start):R.startBlock=[Q.start]:Q.level==="inline"&&(R.startInline?R.startInline.push(Q.start):R.startInline=[Q.start]))}Q.childTokens&&(R.childTokens[Q.name]=Q.childTokens)})),j.renderer&&function(){var Q=Be.defaults.renderer||new ve,ge=function(Ce){var G=Q[Ce];Q[Ce]=function(){for(var re=arguments.length,he=new Array(re),ce=0;ce<re;ce++)he[ce]=arguments[ce];var Te=j.renderer[Ce].apply(Q,he);return Te===!1&&(Te=G.apply(Q,he)),Te}};for(var be in j.renderer)ge(be);pe.renderer=Q}(),j.tokenizer&&function(){var Q=Be.defaults.tokenizer||new ee,ge=function(Ce){var G=Q[Ce];Q[Ce]=function(){for(var re=arguments.length,he=new Array(re),ce=0;ce<re;ce++)he[ce]=arguments[ce];var Te=j.tokenizer[Ce].apply(Q,he);return Te===!1&&(Te=G.apply(Q,he)),Te}};for(var be in j.tokenizer)ge(be);pe.tokenizer=Q}(),j.walkTokens){var Z=Be.defaults.walkTokens;pe.walkTokens=function(Q){var ge=[];return ge.push(j.walkTokens.call(this,Q)),Z&&(ge=ge.concat(Z.call(this,Q))),ge}}se&&(pe.extensions=R),Be.setOptions(pe)})},Be.walkTokens=function(Ve,fe){for(var oe,se=[],pe=function(){var j=oe.value;switch(se=se.concat(fe.call(Be,j)),j.type){case"table":for(var Z,Q=l(j.header);!(Z=Q()).done;){var ge=Z.value;se=se.concat(Be.walkTokens(ge.tokens,fe))}for(var be,Ce=l(j.rows);!(be=Ce()).done;)for(var G,re=l(be.value);!(G=re()).done;){var he=G.value;se=se.concat(Be.walkTokens(he.tokens,fe))}break;case"list":se=se.concat(Be.walkTokens(j.items,fe));break;default:Be.defaults.extensions&&Be.defaults.extensions.childTokens&&Be.defaults.extensions.childTokens[j.type]?Be.defaults.extensions.childTokens[j.type].forEach(function(ce){se=se.concat(Be.walkTokens(j[ce],fe))}):j.tokens&&(se=se.concat(Be.walkTokens(j.tokens,fe)))}},R=l(Ve);!(oe=R()).done;)pe();return se},Be.parseInline=function(Ve,fe){if(Ve==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ve!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ve)+", string expected");H(fe=L({},Be.defaults,fe||{}));try{var oe=ne.lexInline(Ve,fe);return fe.walkTokens&&Be.walkTokens(oe,fe.walkTokens),ot.parseInline(oe,fe)}catch(se){if(se.message+=`
Please report this to https://github.com/markedjs/marked.`,fe.silent)return"<p>An error occurred:</p><pre>"+v(se.message+"",!0)+"</pre>";throw se}},Be.Parser=ot,Be.parser=ot.parse,Be.Renderer=ve,Be.TextRenderer=$e,Be.Lexer=ne,Be.lexer=ne.lex,Be.Tokenizer=ee,Be.Slugger=Xe,Be.parse=Be;var He=Be.options,st=Be.setOptions,xt=Be.use,kt=Be.walkTokens,Tt=Be.parseInline,Ei=Be,si=ot.parse,ur=ne.lex;s.Lexer=ne,s.Parser=ot,s.Renderer=ve,s.Slugger=Xe,s.TextRenderer=$e,s.Tokenizer=ee,s.getDefaults=u,s.lexer=ur,s.marked=Be,s.options=He,s.parse=Ei,s.parseInline=Tt,s.parser=si,s.setOptions=st,s.use=xt,s.walkTokens=kt,Object.defineProperty(s,"__esModule",{value:!0})})},{}],16:[function(t,r,n){(function(s){(function(){var o;(function(){(o=function(a,l,u,c){c=c||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=c.flags||{},this.memoized={},this.loaded=!1;var h,d,p,m,g,v=this;function b(T,D){var M=v._readFile(T,null,c.asyncLoad);c.asyncLoad?M.then(function(A){D(A)}):D(M)}function _(T){l=T,u&&C()}function E(T){u=T,l&&C()}function C(){for(v.rules=v._parseAFF(l),v.compoundRuleCodes={},d=0,m=v.compoundRules.length;d<m;d++){var T=v.compoundRules[d];for(p=0,g=T.length;p<g;p++)v.compoundRuleCodes[T[p]]=[]}for(d in"ONLYINCOMPOUND"in v.flags&&(v.compoundRuleCodes[v.flags.ONLYINCOMPOUND]=[]),v.dictionaryTable=v._parseDIC(u),v.compoundRuleCodes)v.compoundRuleCodes[d].length===0&&delete v.compoundRuleCodes[d];for(d=0,m=v.compoundRules.length;d<m;d++){var D=v.compoundRules[d],M="";for(p=0,g=D.length;p<g;p++){var A=D[p];A in v.compoundRuleCodes?M+="("+v.compoundRuleCodes[A].join("|")+")":M+=A}v.compoundRules[d]=new RegExp(M,"i")}v.loaded=!0,c.asyncLoad&&c.loadedCallback&&c.loadedCallback(v)}return a&&(v.dictionary=a,l&&u?C():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(h=c.dictionaryPath?c.dictionaryPath:"typo/dictionaries",l||b(chrome.extension.getURL(h+"/"+a+"/"+a+".aff"),_),u||b(chrome.extension.getURL(h+"/"+a+"/"+a+".dic"),E)):(h=c.dictionaryPath?c.dictionaryPath:s!==void 0?s+"/dictionaries":"./dictionaries",l||b(h+"/"+a+"/"+a+".aff",_),u||b(h+"/"+a+"/"+a+".dic",E))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,u){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var c,h=new XMLHttpRequest;return h.open("GET",a,u),u&&(c=new Promise(function(p,m){h.onload=function(){h.status===200?p(h.responseText):m(h.statusText)},h.onerror=function(){m(h.statusText)}})),h.overrideMimeType&&h.overrideMimeType("text/plain; charset="+l),h.send(null),u?c:h.responseText}if(t!==void 0){var d=t("fs");try{if(d.existsSync(a))return d.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(p){return console.log(p),""}}},_parseAFF:function(a){var l,u,c,h,d,p,m,g={},v=a.split(/\r?\n/);for(h=0,p=v.length;h<p;h++)if(l=(l=this._removeAffixComments(v[h])).trim()){var b=l.split(/\s+/),_=b[0];if(_=="PFX"||_=="SFX"){var E=b[1],C=b[2],T=[];for(d=h+1,m=h+1+(u=parseInt(b[3],10));d<m;d++){var D=(c=v[d].split(/\s+/))[2],M=c[3].split("/"),A=M[0];A==="0"&&(A="");var I=this.parseRuleCodes(M[1]),P=c[4],U={};U.add=A,I.length>0&&(U.continuationClasses=I),P!=="."&&(U.match=_==="SFX"?new RegExp(P+"$"):new RegExp("^"+P)),D!="0"&&(U.remove=_==="SFX"?new RegExp(D+"$"):D),T.push(U)}g[E]={type:_,combineable:C=="Y",entries:T},h+=u}else if(_==="COMPOUNDRULE"){for(d=h+1,m=h+1+(u=parseInt(b[1],10));d<m;d++)c=(l=v[d]).split(/\s+/),this.compoundRules.push(c[1]);h+=u}else _==="REP"?(c=l.split(/\s+/)).length===3&&this.replacementTable.push([c[1],c[2]]):this.flags[_]=b[1]}return g},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),u={};function c($,H){u.hasOwnProperty($)||(u[$]=null),H.length>0&&(u[$]===null&&(u[$]=[]),u[$].push(H))}for(var h=1,d=l.length;h<d;h++){var p=l[h];if(p){var m=p.split("/",2),g=m[0];if(m.length>1){var v=this.parseRuleCodes(m[1]);"NEEDAFFIX"in this.flags&&v.indexOf(this.flags.NEEDAFFIX)!=-1||c(g,v);for(var b=0,_=v.length;b<_;b++){var E=v[b],C=this.rules[E];if(C)for(var T=this._applyRule(g,C),D=0,M=T.length;D<M;D++){var A=T[D];if(c(A,[]),C.combineable)for(var I=b+1;I<_;I++){var P=v[I],U=this.rules[P];if(U&&U.combineable&&C.type!=U.type)for(var K=this._applyRule(A,U),L=0,F=K.length;L<F;L++)c(K[L],[])}}E in this.compoundRuleCodes&&this.compoundRuleCodes[E].push(g)}}else c(g.trim(),[])}}return u},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],u=0,c=a.length;u<c;u+=2)l.push(a.substr(u,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var u=l.entries,c=[],h=0,d=u.length;h<d;h++){var p=u[h];if(!p.match||a.match(p.match)){var m=a;if(p.remove&&(m=m.replace(p.remove,"")),l.type==="SFX"?m+=p.add:m=p.add+m,c.push(m),"continuationClasses"in p)for(var g=0,v=p.continuationClasses.length;g<v;g++){var b=this.rules[p.continuationClasses[g]];b&&(c=c.concat(this._applyRule(m,b)))}}}return c},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var u=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(u,"KEEPCASE"))return!1;if(this.checkExact(u)||this.checkExact(l.toLowerCase()))return!0}var c=l[0].toLowerCase()+l.substring(1);if(c!==l){if(this.hasFlag(c,"KEEPCASE"))return!1;if(this.checkExact(c))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,u,c=this.dictionaryTable[a];if(c===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,u=this.compoundRules.length;l<u;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(c===null)return!0;if(typeof c=="object"){for(l=0,u=c.length;l<u;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",c[l]))return!0}}return!1},hasFlag:function(a,l,u){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(u===void 0&&(u=Array.prototype.concat.apply([],this.dictionaryTable[a])),!u||u.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var u=this.memoized[a].limit;if(l<=u||this.memoized[a].suggestions.length<u)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var c=0,h=this.replacementTable.length;c<h;c++){var d=this.replacementTable[c];if(a.indexOf(d[0])!==-1){var p=a.replace(d[0],d[1]);if(this.check(p))return[p]}}var m=this;function g(v,b){var _,E,C,T,D={},M=m.alphabet.length;if(typeof v=="string"){var A=v;(v={})[A]=!0}for(var A in v)for(_=0,C=A.length+1;_<C;_++){var I=[A.substring(0,_),A.substring(_)];if(I[1]&&(T=I[0]+I[1].substring(1),b&&!m.check(T)||(T in D?D[T]+=1:D[T]=1)),I[1].length>1&&I[1][1]!==I[1][0]&&(T=I[0]+I[1][1]+I[1][0]+I[1].substring(2),b&&!m.check(T)||(T in D?D[T]+=1:D[T]=1)),I[1]){var P=I[1].substring(0,1).toUpperCase()===I[1].substring(0,1)?"uppercase":"lowercase";for(E=0;E<M;E++){var U=m.alphabet[E];P==="uppercase"&&(U=U.toUpperCase()),U!=I[1].substring(0,1)&&(T=I[0]+U+I[1].substring(1),b&&!m.check(T)||(T in D?D[T]+=1:D[T]=1))}}if(I[1])for(E=0;E<M;E++)P=I[0].substring(-1).toUpperCase()===I[0].substring(-1)&&I[1].substring(0,1).toUpperCase()===I[1].substring(0,1)?"uppercase":"lowercase",U=m.alphabet[E],P==="uppercase"&&(U=U.toUpperCase()),T=I[0]+U+I[1],b&&!m.check(T)||(T in D?D[T]+=1:D[T]=1)}return D}return m.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(v){var b,_=g(v),E=g(_,!0);for(var C in _)m.check(C)&&(C in E?E[C]+=_[C]:E[C]=_[C]);var T=[];for(b in E)E.hasOwnProperty(b)&&T.push([b,E[b]]);T.sort(function(I,P){var U=I[1],K=P[1];return U<K?-1:U>K?1:P[0].localeCompare(I[0])}).reverse();var D=[],M="lowercase";v.toUpperCase()===v?M="uppercase":v.substr(0,1).toUpperCase()+v.substr(1).toLowerCase()===v&&(M="capitalized");var A=l;for(b=0;b<Math.min(A,T.length);b++)M==="uppercase"?T[b][0]=T[b][0].toUpperCase():M==="capitalized"&&(T[b][0]=T[b][0].substr(0,1).toUpperCase()+T[b][0].substr(1)),m.hasFlag(T[b][0],"NOSUGGEST")||D.indexOf(T[b][0])!=-1?A++:D.push(T[b][0]);return D}(a),limit:l},this.memoized[a].suggestions}}})(),r!==void 0&&(r.exports=o)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(t,r,n){var s=t("codemirror");s.commands.tabAndIndentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentMore");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}},s.commands.shiftTabAndUnindentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentLess");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}}},{codemirror:10}],18:[function(t,r,n){var s=t("codemirror");t("codemirror/addon/edit/continuelist.js"),t("./codemirror/tablist"),t("codemirror/addon/display/fullscreen.js"),t("codemirror/mode/markdown/markdown.js"),t("codemirror/addon/mode/overlay.js"),t("codemirror/addon/display/placeholder.js"),t("codemirror/addon/display/autorefresh.js"),t("codemirror/addon/selection/mark-selection.js"),t("codemirror/addon/search/searchcursor.js"),t("codemirror/mode/gfm/gfm.js"),t("codemirror/mode/xml/xml.js");var o=t("codemirror-spell-checker"),a=t("marked").marked,l=/Mac/.test(navigator.platform),u=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),c={toggleBold:C,toggleItalic:T,drawLink:ie,toggleHeadingSmaller:I,toggleHeadingBigger:P,drawImage:de,toggleBlockquote:A,toggleOrderedList:J,toggleUnorderedList:V,toggleCodeBlock:M,togglePreview:He,toggleStrikethrough:D,toggleHeading1:U,toggleHeading2:K,toggleHeading3:L,toggleHeading4:F,toggleHeading5:$,toggleHeading6:H,cleanBlock:ee,drawTable:ve,drawHorizontalRule:$e,undo:Xe,redo:ot,toggleSideBySide:Be,toggleFullScreen:E},h={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(){var G,re=!1;return G=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(G)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(G.substr(0,4)))&&(re=!0),re};function p(G){return G=l?G.replace("Ctrl","Cmd"):G.replace("Cmd","Ctrl")}function m(G,re,he,ce){var Te=g(G,!1,re,he,"button",ce);Te.classList.add("easymde-dropdown"),Te.onclick=function(){Te.focus()};var Ae=document.createElement("div");Ae.className="easymde-dropdown-content";for(var Se=0;Se<G.children.length;Se++){var De,Oe=G.children[Se];(De=g(typeof Oe=="string"&&Oe in se?se[Oe]:Oe,!0,re,he,"button",ce)).addEventListener("click",function(Ge){Ge.stopPropagation()},!1),Ae.appendChild(De)}return Te.appendChild(Ae),Te}function g(G,re,he,ce,Te,Ae){G=G||{};var Se=document.createElement(Te);if(G.attributes)for(var De in G.attributes)Object.prototype.hasOwnProperty.call(G.attributes,De)&&Se.setAttribute(De,G.attributes[De]);var Oe=Ae.options.toolbarButtonClassPrefix?Ae.options.toolbarButtonClassPrefix+"-":"";Se.className=Oe+G.name,Se.setAttribute("type",Te),he=he==null||he,G.text&&(Se.innerText=G.text),G.name&&G.name in ce&&(c[G.name]=G.action),G.title&&he&&(Se.title=function(It,Vt,Yt){var Yi,vr=It;return Vt&&Yt[Yi=function(Jr){for(var Rr in c)if(c[Rr]===Jr)return Rr;return null}(Vt)]&&(vr+=" ("+p(Yt[Yi])+")"),vr}(G.title,G.action,ce),l&&(Se.title=Se.title.replace("Ctrl",""),Se.title=Se.title.replace("Alt",""))),G.title&&Se.setAttribute("aria-label",G.title),G.noDisable&&Se.classList.add("no-disable"),G.noMobile&&Se.classList.add("no-mobile");var Ge=[];G.className!==void 0&&(Ge=G.className.split(" "));for(var et=[],ht=0;ht<Ge.length;ht++){var Ut=Ge[ht];Ut.match(/^fa([srlb]|(-[\w-]*)|$)/)?et.push(Ut):Se.classList.add(Ut)}if(Se.tabIndex=-1,et.length>0){for(var gt=document.createElement("i"),qt=0;qt<et.length;qt++){var Kt=et[qt];gt.classList.add(Kt)}Se.appendChild(gt)}return G.icon!==void 0&&(Se.innerHTML=G.icon),G.action&&re&&(typeof G.action=="function"?Se.onclick=function(It){It.preventDefault(),G.action(Ae)}:typeof G.action=="string"&&(Se.onclick=function(It){It.preventDefault(),window.open(G.action,"_blank")})),Se}function v(){var G=document.createElement("i");return G.className="separator",G.innerHTML="|",G}function b(G,re){re=re||G.getCursor("start");var he=G.getTokenAt(re);if(!he.type)return{};for(var ce,Te,Ae=he.type.split(" "),Se={},De=0;De<Ae.length;De++)(ce=Ae[De])==="strong"?Se.bold=!0:ce==="variable-2"?(Te=G.getLine(re.line),/^\s*\d+\.\s/.test(Te)?Se["ordered-list"]=!0:Se["unordered-list"]=!0):ce==="atom"?Se.quote=!0:ce==="em"?Se.italic=!0:ce==="quote"?Se.quote=!0:ce==="strikethrough"?Se.strikethrough=!0:ce==="comment"?Se.code=!0:ce!=="link"||Se.image?ce==="image"?Se.image=!0:ce.match(/^header(-[1-6])?$/)&&(Se[ce.replace("header","heading")]=!0):Se.link=!0;return Se}var _="";function E(G){var re=G.codemirror;re.setOption("fullScreen",!re.getOption("fullScreen")),re.getOption("fullScreen")?(_=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=_;var he=re.getWrapperElement(),ce=he.nextSibling;if(ce.classList.contains("editor-preview-active-side"))if(G.options.sideBySideFullscreen===!1){var Te=he.parentNode;re.getOption("fullScreen")?Te.classList.remove("sided--no-fullscreen"):Te.classList.add("sided--no-fullscreen")}else Be(G);G.options.onToggleFullScreen&&G.options.onToggleFullScreen(re.getOption("fullScreen")||!1),G.options.maxHeight!==void 0&&(re.getOption("fullScreen")?(re.getScrollerElement().style.removeProperty("height"),ce.style.removeProperty("height")):(re.getScrollerElement().style.height=G.options.maxHeight,G.setPreviewMaxHeight())),G.toolbar_div.classList.toggle("fullscreen"),G.toolbarElements&&G.toolbarElements.fullscreen&&G.toolbarElements.fullscreen.classList.toggle("active")}function C(G){Ei(G,"bold",G.options.blockStyles.bold)}function T(G){Ei(G,"italic",G.options.blockStyles.italic)}function D(G){Ei(G,"strikethrough","~~")}function M(G){var re=G.options.blockStyles.code;function he(hi){if(typeof hi!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof hi+": "+hi;return hi.styles&&hi.styles[2]&&hi.styles[2].indexOf("formatting-code-block")!==-1}function ce(hi){return hi.state.base.base||hi.state.base}function Te(hi,Fn,rr,Nn,nr){rr=rr||hi.getLineHandle(Fn),Nn=Nn||hi.getTokenAt({line:Fn,ch:1}),nr=nr||!!rr.text&&hi.getTokenAt({line:Fn,ch:rr.text.length-1});var $r=Nn.type?Nn.type.split(" "):[];return nr&&ce(nr).indentedCode?"indented":$r.indexOf("comment")!==-1&&(ce(Nn).fencedChars||ce(nr).fencedChars||he(rr)?"fenced":"single")}var Ae,Se,De,Oe=G.codemirror,Ge=Oe.getCursor("start"),et=Oe.getCursor("end"),ht=Oe.getTokenAt({line:Ge.line,ch:Ge.ch||1}),Ut=Oe.getLineHandle(Ge.line),gt=Te(Oe,Ge.line,Ut,ht);if(gt==="single"){var qt=Ut.text.slice(0,Ge.ch).replace("`",""),Kt=Ut.text.slice(Ge.ch).replace("`","");Oe.replaceRange(qt+Kt,{line:Ge.line,ch:0},{line:Ge.line,ch:99999999999999}),Ge.ch--,Ge!==et&&et.ch--,Oe.setSelection(Ge,et),Oe.focus()}else if(gt==="fenced")if(Ge.line!==et.line||Ge.ch!==et.ch){for(Ae=Ge.line;Ae>=0&&!he(Ut=Oe.getLineHandle(Ae));Ae--);var It,Vt,Yt,Yi,vr=ce(Oe.getTokenAt({line:Ae,ch:1})).fencedChars;he(Oe.getLineHandle(Ge.line))?(It="",Vt=Ge.line):he(Oe.getLineHandle(Ge.line-1))?(It="",Vt=Ge.line-1):(It=vr+`
`,Vt=Ge.line),he(Oe.getLineHandle(et.line))?(Yt="",Yi=et.line,et.ch===0&&(Yi+=1)):et.ch!==0&&he(Oe.getLineHandle(et.line+1))?(Yt="",Yi=et.line+1):(Yt=vr+`
`,Yi=et.line+1),et.ch===0&&(Yi-=1),Oe.operation(function(){Oe.replaceRange(Yt,{line:Yi,ch:0},{line:Yi+(Yt?0:1),ch:0}),Oe.replaceRange(It,{line:Vt,ch:0},{line:Vt+(It?0:1),ch:0})}),Oe.setSelection({line:Vt+(It?1:0),ch:0},{line:Yi+(It?1:-1),ch:0}),Oe.focus()}else{var Jr=Ge.line;if(he(Oe.getLineHandle(Ge.line))&&(Te(Oe,Ge.line+1)==="fenced"?(Ae=Ge.line,Jr=Ge.line+1):(Se=Ge.line,Jr=Ge.line-1)),Ae===void 0)for(Ae=Jr;Ae>=0&&!he(Ut=Oe.getLineHandle(Ae));Ae--);if(Se===void 0)for(De=Oe.lineCount(),Se=Jr;Se<De&&!he(Ut=Oe.getLineHandle(Se));Se++);Oe.operation(function(){Oe.replaceRange("",{line:Ae,ch:0},{line:Ae+1,ch:0}),Oe.replaceRange("",{line:Se-1,ch:0},{line:Se,ch:0})}),Oe.focus()}else if(gt==="indented"){if(Ge.line!==et.line||Ge.ch!==et.ch)Ae=Ge.line,Se=et.line,et.ch===0&&Se--;else{for(Ae=Ge.line;Ae>=0;Ae--)if(!(Ut=Oe.getLineHandle(Ae)).text.match(/^\s*$/)&&Te(Oe,Ae,Ut)!=="indented"){Ae+=1;break}for(De=Oe.lineCount(),Se=Ge.line;Se<De;Se++)if(!(Ut=Oe.getLineHandle(Se)).text.match(/^\s*$/)&&Te(Oe,Se,Ut)!=="indented"){Se-=1;break}}var Rr=Oe.getLineHandle(Se+1),cr=Rr&&Oe.getTokenAt({line:Se+1,ch:Rr.text.length-1});cr&&ce(cr).indentedCode&&Oe.replaceRange(`
`,{line:Se+1,ch:0});for(var Jt=Ae;Jt<=Se;Jt++)Oe.indentLine(Jt,"subtract");Oe.focus()}else{var ir=Ge.line===et.line&&Ge.ch===et.ch&&Ge.ch===0,Ir=Ge.line!==et.line;ir||Ir?function(hi,Fn,rr,Nn){var nr=Fn.line+1,$r=rr.line+1,bo=Fn.line!==rr.line,ye=Nn+`
`,ke=`
`+Nn;bo&&$r++,bo&&rr.ch===0&&(ke=Nn+`
`,$r--),st(hi,!1,[ye,ke]),hi.setSelection({line:nr,ch:0},{line:$r,ch:0})}(Oe,Ge,et,re):st(Oe,!1,["`","`"])}}function A(G){kt(G.codemirror,"quote")}function I(G){xt(G.codemirror,"smaller")}function P(G){xt(G.codemirror,"bigger")}function U(G){xt(G.codemirror,void 0,1)}function K(G){xt(G.codemirror,void 0,2)}function L(G){xt(G.codemirror,void 0,3)}function F(G){xt(G.codemirror,void 0,4)}function $(G){xt(G.codemirror,void 0,5)}function H(G){xt(G.codemirror,void 0,6)}function V(G){var re=G.codemirror,he="*";["-","+","*"].includes(G.options.unorderedListStyle)&&(he=G.options.unorderedListStyle),kt(re,"unordered-list",he)}function J(G){kt(G.codemirror,"ordered-list")}function ee(G){(function(re){if(!re.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var he,ce=re.getCursor("start"),Te=re.getCursor("end"),Ae=ce.line;Ae<=Te.line;Ae++)he=(he=re.getLine(Ae)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),re.replaceRange(he,{line:Ae,ch:0},{line:Ae,ch:99999999999999})})(G.codemirror)}function ie(G){var re=G.options,he="https://";if(re.promptURLs){var ce=prompt(re.promptTexts.link,he);if(!ce)return!1;he=te(ce)}Tt(G,"link",re.insertTexts.link,he)}function de(G){var re=G.options,he="https://";if(re.promptURLs){var ce=prompt(re.promptTexts.image,he);if(!ce)return!1;he=te(ce)}Tt(G,"image",re.insertTexts.image,he)}function te(G){return encodeURI(G).replace(/([\\()])/g,"\\$1")}function z(G){G.openBrowseFileWindow()}function ne(G,re){var he=G.codemirror,ce=b(he),Te=G.options,Ae=re.substr(re.lastIndexOf("/")+1),Se=Ae.substring(Ae.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Se))st(he,ce.image,Te.insertTexts.uploadedImage,re);else{var De=Te.insertTexts.link;De[0]="["+Ae,st(he,ce.link,De,re)}G.updateStatusBar("upload-image",G.options.imageTexts.sbOnUploaded.replace("#image_name#",Ae)),setTimeout(function(){G.updateStatusBar("upload-image",G.options.imageTexts.sbInit)},1e3)}function ve(G){var re=G.codemirror,he=b(re),ce=G.options;st(re,he.table,ce.insertTexts.table)}function $e(G){var re=G.codemirror,he=b(re),ce=G.options;st(re,he.image,ce.insertTexts.horizontalRule)}function Xe(G){var re=G.codemirror;re.undo(),re.focus()}function ot(G){var re=G.codemirror;re.redo(),re.focus()}function Be(G){var re=G.codemirror,he=re.getWrapperElement(),ce=he.nextSibling,Te=G.toolbarElements&&G.toolbarElements["side-by-side"],Ae=!1,Se=he.parentNode;ce.classList.contains("editor-preview-active-side")?(G.options.sideBySideFullscreen===!1&&Se.classList.remove("sided--no-fullscreen"),ce.classList.remove("editor-preview-active-side"),Te&&Te.classList.remove("active"),he.classList.remove("CodeMirror-sided")):(setTimeout(function(){re.getOption("fullScreen")||(G.options.sideBySideFullscreen===!1?Se.classList.add("sided--no-fullscreen"):E(G)),ce.classList.add("editor-preview-active-side")},1),Te&&Te.classList.add("active"),he.classList.add("CodeMirror-sided"),Ae=!0);var De=he.lastChild;if(De.classList.contains("editor-preview-active")){De.classList.remove("editor-preview-active");var Oe=G.toolbarElements.preview,Ge=G.toolbar_div;Oe.classList.remove("active"),Ge.classList.remove("disabled-for-preview")}if(re.sideBySideRenderingFunction||(re.sideBySideRenderingFunction=function(){var ht=G.options.previewRender(G.value(),ce);ht!=null&&(ce.innerHTML=ht)}),Ae){var et=G.options.previewRender(G.value(),ce);et!=null&&(ce.innerHTML=et),re.on("update",re.sideBySideRenderingFunction)}else re.off("update",re.sideBySideRenderingFunction);re.refresh()}function He(G){var re=G.codemirror,he=re.getWrapperElement(),ce=G.toolbar_div,Te=!!G.options.toolbar&&G.toolbarElements.preview,Ae=he.lastChild;if(re.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&Be(G),!Ae||!Ae.classList.contains("editor-preview-full")){if((Ae=document.createElement("div")).className="editor-preview-full",G.options.previewClass)if(Array.isArray(G.options.previewClass))for(var Se=0;Se<G.options.previewClass.length;Se++)Ae.classList.add(G.options.previewClass[Se]);else typeof G.options.previewClass=="string"&&Ae.classList.add(G.options.previewClass);he.appendChild(Ae)}Ae.classList.contains("editor-preview-active")?(Ae.classList.remove("editor-preview-active"),Te&&(Te.classList.remove("active"),ce.classList.remove("disabled-for-preview"))):(setTimeout(function(){Ae.classList.add("editor-preview-active")},1),Te&&(Te.classList.add("active"),ce.classList.add("disabled-for-preview")));var De=G.options.previewRender(G.value(),Ae);De!==null&&(Ae.innerHTML=De)}function st(G,re,he,ce){if(!G.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var Te,Ae=he[0],Se=he[1],De={},Oe={};Object.assign(De,G.getCursor("start")),Object.assign(Oe,G.getCursor("end")),ce&&(Ae=Ae.replace("#url#",ce),Se=Se.replace("#url#",ce)),re?(Ae=(Te=G.getLine(De.line)).slice(0,De.ch),Se=Te.slice(De.ch),G.replaceRange(Ae+Se,{line:De.line,ch:0})):(Te=G.getSelection(),G.replaceSelection(Ae+Te+Se),De.ch+=Ae.length,De!==Oe&&(Oe.ch+=Ae.length)),G.setSelection(De,Oe),G.focus()}}function xt(G,re,he){if(!G.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ce=G.getCursor("start"),Te=G.getCursor("end"),Ae=ce.line;Ae<=Te.line;Ae++)(function(Se){var De=G.getLine(Se),Oe=De.search(/[^#]/);De=re!==void 0?Oe<=0?re=="bigger"?"###### "+De:"# "+De:Oe==6&&re=="smaller"?De.substr(7):Oe==1&&re=="bigger"?De.substr(2):re=="bigger"?De.substr(1):"#"+De:Oe<=0?"#".repeat(he)+" "+De:Oe==he?De.substr(Oe+1):"#".repeat(he)+" "+De.substr(Oe+1),G.replaceRange(De,{line:Se,ch:0},{line:Se,ch:99999999999999})})(Ae);G.focus()}}function kt(G,re,he){if(!G.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ce=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,Te=/^\s*/,Ae=b(G),Se=G.getCursor("start"),De=G.getCursor("end"),Oe={quote:/^(\s*)>\s+/,"unordered-list":ce,"ordered-list":ce},Ge=function(Ut,gt,qt){var Kt=ce.exec(gt),It=function(Vt,Yt){return{quote:">","unordered-list":he,"ordered-list":"%%i."}[Vt].replace("%%i",Yt)}(Ut,et);return Kt!==null?(function(Vt,Yt){var Yi=new RegExp({quote:">","unordered-list":"\\"+he,"ordered-list":"\\d+."}[Vt]);return Yt&&Yi.test(Yt)}(Ut,Kt[2])&&(It=""),gt=Kt[1]+It+Kt[3]+gt.replace(Te,"").replace(Oe[Ut],"$1")):qt==0&&(gt=It+" "+gt),gt},et=1,ht=Se.line;ht<=De.line;ht++)(function(Ut){var gt=G.getLine(Ut);Ae[re]?gt=gt.replace(Oe[re],"$1"):(re=="unordered-list"&&(gt=Ge("ordered-list",gt,!0)),gt=Ge(re,gt,!1),et+=1),G.replaceRange(gt,{line:Ut,ch:0},{line:Ut,ch:99999999999999})})(ht);G.focus()}}function Tt(G,re,he,ce){if(G.codemirror&&!G.isPreviewActive()){var Te=G.codemirror,Ae=b(Te)[re];if(Ae){var Se=Te.getCursor("start"),De=Te.getCursor("end"),Oe=Te.getLine(Se.line),Ge=Oe.slice(0,Se.ch),et=Oe.slice(Se.ch);re=="link"?Ge=Ge.replace(/(.*)[^!]\[/,"$1"):re=="image"&&(Ge=Ge.replace(/(.*)!\[$/,"$1")),et=et.replace(/]\(.*?\)/,""),Te.replaceRange(Ge+et,{line:Se.line,ch:0},{line:Se.line,ch:99999999999999}),Se.ch-=he[0].length,Se!==De&&(De.ch-=he[0].length),Te.setSelection(Se,De),Te.focus()}else st(Te,Ae,he,ce)}}function Ei(G,re,he,ce){if(G.codemirror&&!G.isPreviewActive()){ce=ce===void 0?he:ce;var Te,Ae=G.codemirror,Se=b(Ae),De=he,Oe=ce,Ge=Ae.getCursor("start"),et=Ae.getCursor("end");Se[re]?(De=(Te=Ae.getLine(Ge.line)).slice(0,Ge.ch),Oe=Te.slice(Ge.ch),re=="bold"?(De=De.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),Oe=Oe.replace(/(\*\*|__)/,"")):re=="italic"?(De=De.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),Oe=Oe.replace(/(\*|_)/,"")):re=="strikethrough"&&(De=De.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),Oe=Oe.replace(/(\*\*|~~)/,"")),Ae.replaceRange(De+Oe,{line:Ge.line,ch:0},{line:Ge.line,ch:99999999999999}),re=="bold"||re=="strikethrough"?(Ge.ch-=2,Ge!==et&&(et.ch-=2)):re=="italic"&&(Ge.ch-=1,Ge!==et&&(et.ch-=1))):(Te=Ae.getSelection(),re=="bold"?Te=(Te=Te.split("**").join("")).split("__").join(""):re=="italic"?Te=(Te=Te.split("*").join("")).split("_").join(""):re=="strikethrough"&&(Te=Te.split("~~").join("")),Ae.replaceSelection(De+Te+Oe),Ge.ch+=he.length,et.ch=Ge.ch+Te.length),Ae.setSelection(Ge,et),Ae.focus()}}function si(G,re){if(Math.abs(G)<1024)return""+G+re[0];var he=0;do G/=1024,++he;while(Math.abs(G)>=1024&&he<re.length);return""+G.toFixed(1)+re[he]}function ur(G,re){for(var he in re)Object.prototype.hasOwnProperty.call(re,he)&&(re[he]instanceof Array?G[he]=re[he].concat(G[he]instanceof Array?G[he]:[]):re[he]!==null&&typeof re[he]=="object"&&re[he].constructor===Object?G[he]=ur(G[he]||{},re[he]):G[he]=re[he]);return G}function Ve(G){for(var re=1;re<arguments.length;re++)G=ur(G,arguments[re]);return G}function fe(G){var re=G.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),he=0;if(re===null)return he;for(var ce=0;ce<re.length;ce++)re[ce].charCodeAt(0)>=19968?he+=re[ce].length:he+=1;return he}var oe={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},se={bold:{name:"bold",action:C,className:oe.bold,title:"Bold",default:!0},italic:{name:"italic",action:T,className:oe.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:D,className:oe.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:I,className:oe.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:I,className:oe["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:P,className:oe["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:U,className:oe["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:K,className:oe["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:L,className:oe["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:M,className:oe.code,title:"Code"},quote:{name:"quote",action:A,className:oe.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:V,className:oe["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:J,className:oe["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:ee,className:oe["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:ie,className:oe.link,title:"Create Link",default:!0},image:{name:"image",action:de,className:oe.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:z,className:oe["upload-image"],title:"Import an image"},table:{name:"table",action:ve,className:oe.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:$e,className:oe["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:He,className:oe.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:Be,className:oe["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:E,className:oe.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:oe.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:Xe,className:oe.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:ot,className:oe.redo,noDisable:!0,title:"Redo"}},pe={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},R={link:"URL for the link:",image:"URL of the image:"},j={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},Z={bold:"**",code:"```",italic:"*"},Q={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},ge={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function be(G){(G=G||{}).parent=this;var re=!0;if(G.autoDownloadFontAwesome===!1&&(re=!1),G.autoDownloadFontAwesome!==!0)for(var he=document.styleSheets,ce=0;ce<he.length;ce++)he[ce].href&&he[ce].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(re=!1);if(re){var Te=document.createElement("link");Te.rel="stylesheet",Te.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(Te)}if(G.element)this.element=G.element;else if(G.element===null)return void console.log("EasyMDE: Error. No element was found.");if(G.toolbar===void 0)for(var Ae in G.toolbar=[],se)Object.prototype.hasOwnProperty.call(se,Ae)&&(Ae.indexOf("separator-")!=-1&&G.toolbar.push("|"),(se[Ae].default===!0||G.showIcons&&G.showIcons.constructor===Array&&G.showIcons.indexOf(Ae)!=-1)&&G.toolbar.push(Ae));if(Object.prototype.hasOwnProperty.call(G,"previewClass")||(G.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(G,"status")||(G.status=["autosave","lines","words","cursor"],G.uploadImage&&G.status.unshift("upload-image")),G.previewRender||(G.previewRender=function(De){return this.parent.markdown(De)}),G.parsingConfig=Ve({highlightFormatting:!0},G.parsingConfig||{}),G.insertTexts=Ve({},pe,G.insertTexts||{}),G.promptTexts=Ve({},R,G.promptTexts||{}),G.blockStyles=Ve({},Z,G.blockStyles||{}),G.autosave!=null&&(G.autosave.timeFormat=Ve({},j,G.autosave.timeFormat||{})),G.iconClassMap=Ve({},oe,G.iconClassMap||{}),G.shortcuts=Ve({},h,G.shortcuts||{}),G.maxHeight=G.maxHeight||void 0,G.direction=G.direction||"ltr",G.maxHeight!==void 0?G.minHeight=G.maxHeight:G.minHeight=G.minHeight||"300px",G.errorCallback=G.errorCallback||function(De){alert(De)},G.uploadImage=G.uploadImage||!1,G.imageMaxSize=G.imageMaxSize||2097152,G.imageAccept=G.imageAccept||"image/png, image/jpeg, image/gif, image/avif",G.imageTexts=Ve({},Q,G.imageTexts||{}),G.errorMessages=Ve({},ge,G.errorMessages||{}),G.imagePathAbsolute=G.imagePathAbsolute||!1,G.imageCSRFName=G.imageCSRFName||"csrfmiddlewaretoken",G.imageCSRFHeader=G.imageCSRFHeader||!1,G.autosave!=null&&G.autosave.unique_id!=null&&G.autosave.unique_id!=""&&(G.autosave.uniqueId=G.autosave.unique_id),G.overlayMode&&G.overlayMode.combine===void 0&&(G.overlayMode.combine=!0),this.options=G,this.render(),!G.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(G.initialValue),G.uploadImage){var Se=this;this.codemirror.on("dragenter",function(De,Oe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragend",function(De,Oe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragleave",function(De,Oe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragover",function(De,Oe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("drop",function(De,Oe){Oe.stopPropagation(),Oe.preventDefault(),G.imageUploadFunction?Se.uploadImagesUsingCustomFunction(G.imageUploadFunction,Oe.dataTransfer.files):Se.uploadImages(Oe.dataTransfer.files)}),this.codemirror.on("paste",function(De,Oe){G.imageUploadFunction?Se.uploadImagesUsingCustomFunction(G.imageUploadFunction,Oe.clipboardData.files):Se.uploadImages(Oe.clipboardData.files)})}}function Ce(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}be.prototype.uploadImages=function(G,re,he){if(G.length!==0){for(var ce=[],Te=0;Te<G.length;Te++)ce.push(G[Te].name),this.uploadImage(G[Te],re,he);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",ce.join(", ")))}},be.prototype.uploadImagesUsingCustomFunction=function(G,re){if(re.length!==0){for(var he=[],ce=0;ce<re.length;ce++)he.push(re[ce].name),this.uploadImageUsingCustomFunction(G,re[ce]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",he.join(", ")))}},be.prototype.updateStatusBar=function(G,re){if(this.gui.statusbar){var he=this.gui.statusbar.getElementsByClassName(G);he.length===1?this.gui.statusbar.getElementsByClassName(G)[0].textContent=re:he.length===0?console.log("EasyMDE: status bar item "+G+" was not found."):console.log("EasyMDE: Several status bar items named "+G+" was found.")}},be.prototype.markdown=function(G){if(a){var re;if(re=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?re.breaks=!1:re.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var he=this.options.renderingConfig.hljs||window.hljs;he&&(re.highlight=function(Te,Ae){return Ae&&he.getLanguage(Ae)?he.highlight(Ae,Te).value:he.highlightAuto(Te).value})}a.setOptions(re);var ce=a.parse(G);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(ce=this.options.renderingConfig.sanitizerFunction.call(this,ce)),ce=function(Te){for(var Ae=new DOMParser().parseFromString(Te,"text/html"),Se=Ae.getElementsByTagName("li"),De=0;De<Se.length;De++)for(var Oe=Se[De],Ge=0;Ge<Oe.children.length;Ge++){var et=Oe.children[Ge];et instanceof HTMLInputElement&&et.type==="checkbox"&&(Oe.style.marginLeft="-1.5em",Oe.style.listStyleType="none")}return Ae.documentElement.innerHTML}(ce=function(Te){for(var Ae;(Ae=u.exec(Te))!==null;){var Se=Ae[0];if(Se.indexOf("target=")===-1){var De=Se.replace(/>$/,' target="_blank">');Te=Te.replace(Se,De)}}return Te}(ce))}},be.prototype.render=function(G){if(G||(G=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==G){this.element=G;var re,he,ce=this.options,Te=this,Ae={};for(var Se in ce.shortcuts)ce.shortcuts[Se]!==null&&c[Se]!==null&&function(gt){Ae[p(ce.shortcuts[gt])]=function(){var qt=c[gt];typeof qt=="function"?qt(Te):typeof qt=="string"&&window.open(qt,"_blank")}}(Se);if(Ae.Enter="newlineAndIndentContinueMarkdownList",Ae.Tab="tabAndIndentMarkdownList",Ae["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Ae.Esc=function(gt){gt.getOption("fullScreen")&&E(Te)},this.documentOnKeyDown=function(gt){(gt=gt||window.event).keyCode==27&&Te.codemirror.getOption("fullScreen")&&E(Te)},document.addEventListener("keydown",this.documentOnKeyDown,!1),ce.overlayMode?(s.defineMode("overlay-mode",function(gt){return s.overlayMode(s.getMode(gt,ce.spellChecker!==!1?"spell-checker":"gfm"),ce.overlayMode.mode,ce.overlayMode.combine)}),re="overlay-mode",(he=ce.parsingConfig).gitHubSpice=!1):((re=ce.parsingConfig).name="gfm",re.gitHubSpice=!1),ce.spellChecker!==!1&&(re="spell-checker",(he=ce.parsingConfig).name="gfm",he.gitHubSpice=!1,typeof ce.spellChecker=="function"?ce.spellChecker({codeMirrorInstance:s}):o({codeMirrorInstance:s})),this.codemirror=s.fromTextArea(G,{mode:re,backdrop:he,theme:ce.theme!=null?ce.theme:"easymde",tabSize:ce.tabSize!=null?ce.tabSize:2,indentUnit:ce.tabSize!=null?ce.tabSize:2,indentWithTabs:ce.indentWithTabs!==!1,lineNumbers:ce.lineNumbers===!0,autofocus:ce.autofocus===!0,extraKeys:Ae,direction:ce.direction,lineWrapping:ce.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:ce.placeholder||G.getAttribute("placeholder")||"",styleSelectedText:ce.styleSelectedText!=null?ce.styleSelectedText:!d(),scrollbarStyle:ce.scrollbarStyle!=null?ce.scrollbarStyle:"native",configureMouse:function(gt,qt,Kt){return{addNew:!1}},inputStyle:ce.inputStyle!=null?ce.inputStyle:d()?"contenteditable":"textarea",spellcheck:ce.nativeSpellcheck==null||ce.nativeSpellcheck,autoRefresh:ce.autoRefresh!=null&&ce.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=ce.minHeight,ce.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=ce.maxHeight),ce.forceSync===!0){var De=this.codemirror;De.on("change",function(){De.save()})}this.gui={};var Oe=document.createElement("div");Oe.classList.add("EasyMDEContainer"),Oe.setAttribute("role","application");var Ge=this.codemirror.getWrapperElement();Ge.parentNode.insertBefore(Oe,Ge),Oe.appendChild(Ge),ce.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),ce.status!==!1&&(this.gui.statusbar=this.createStatusbar()),ce.autosave!=null&&ce.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(Te._autosave_timeout),Te._autosave_timeout=setTimeout(function(){Te.autosave()},Te.options.autosave.submit_delay||Te.options.autosave.delay||1e3)}));var et=this;this.codemirror.on("update",function(){ce.previewImagesInEditor&&Oe.querySelectorAll(".cm-image-marker").forEach(function(gt){var qt=gt.parentElement;if(qt.innerText.match(/^!\[.*?\]\(.*\)/g)&&!qt.hasAttribute("data-img-src")){var Kt=qt.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),Kt&&Kt.length>=2){var It=Kt[1];if(ce.imagesPreviewHandler){var Vt=ce.imagesPreviewHandler(Kt[1]);typeof Vt=="string"&&(It=Vt)}if(window.EMDEimagesCache[It])Ut(qt,window.EMDEimagesCache[It]);else{var Yt=document.createElement("img");Yt.onload=function(){window.EMDEimagesCache[It]={naturalWidth:Yt.naturalWidth,naturalHeight:Yt.naturalHeight,url:It},Ut(qt,window.EMDEimagesCache[It])},Yt.src=It}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(ce.autofocus===!0||G.autofocus)&&this.codemirror.focus();var ht=this.codemirror;setTimeout((function(){ht.refresh()}).bind(ht),0)}function Ut(gt,qt){var Kt,It;gt.setAttribute("data-img-src",qt.url),gt.setAttribute("style","--bg-image:url("+qt.url+");--width:"+qt.naturalWidth+"px;--height:"+(Kt=qt.naturalWidth,It=qt.naturalHeight,Kt<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?It+"px":It/Kt*100+"%")),et.codemirror.setSize()}},be.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},be.prototype.autosave=function(){if(Ce()){var G=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(G.element.form!=null&&G.element.form!=null&&G.element.form.addEventListener("submit",function(){clearTimeout(G.autosaveTimeoutId),G.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+G.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var re=G.value();re!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,re):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var he=document.getElementById("autosaved");if(he!=null&&he!=null&&he!=""){var ce=new Date,Te=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(ce),Ae=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;he.innerHTML=Ae+Te}}else console.log("EasyMDE: localStorage not available, cannot autosave")},be.prototype.clearAutosavedValue=function(){if(Ce()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},be.prototype.openBrowseFileWindow=function(G,re){var he=this,ce=this.gui.toolbar.getElementsByClassName("imageInput")[0];ce.click(),ce.addEventListener("change",function Te(Ae){he.options.imageUploadFunction?he.uploadImagesUsingCustomFunction(he.options.imageUploadFunction,Ae.target.files):he.uploadImages(Ae.target.files,G,re),ce.removeEventListener("change",Te)})},be.prototype.uploadImage=function(G,re,he){var ce=this;function Te(Oe){ce.updateStatusBar("upload-image",Oe),setTimeout(function(){ce.updateStatusBar("upload-image",ce.options.imageTexts.sbInit)},1e4),he&&typeof he=="function"&&he(Oe),ce.options.errorCallback(Oe)}function Ae(Oe){var Ge=ce.options.imageTexts.sizeUnits.split(",");return Oe.replace("#image_name#",G.name).replace("#image_size#",si(G.size,Ge)).replace("#image_max_size#",si(ce.options.imageMaxSize,Ge))}if(re=re||function(Oe){ne(ce,Oe)},G.size>this.options.imageMaxSize)Te(Ae(this.options.errorMessages.fileTooLarge));else{var Se=new FormData;Se.append("image",G),ce.options.imageCSRFToken&&!ce.options.imageCSRFHeader&&Se.append(ce.options.imageCSRFName,ce.options.imageCSRFToken);var De=new XMLHttpRequest;De.upload.onprogress=function(Oe){if(Oe.lengthComputable){var Ge=""+Math.round(100*Oe.loaded/Oe.total);ce.updateStatusBar("upload-image",ce.options.imageTexts.sbProgress.replace("#file_name#",G.name).replace("#progress#",Ge))}},De.open("POST",this.options.imageUploadEndpoint),ce.options.imageCSRFToken&&ce.options.imageCSRFHeader&&De.setRequestHeader(ce.options.imageCSRFName,ce.options.imageCSRFToken),De.onload=function(){try{var Oe=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void Te(Ae(ce.options.errorMessages.importError))}this.status===200&&Oe&&!Oe.error&&Oe.data&&Oe.data.filePath?re((ce.options.imagePathAbsolute?"":window.location.origin+"/")+Oe.data.filePath):Oe.error&&Oe.error in ce.options.errorMessages?Te(Ae(ce.options.errorMessages[Oe.error])):Oe.error?Te(Ae(Oe.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),Te(Ae(ce.options.errorMessages.importError)))},De.onerror=function(Oe){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+Oe.target.status+" ("+Oe.target.statusText+")"),Te(ce.options.errorMessages.importError)},De.send(Se)}},be.prototype.uploadImageUsingCustomFunction=function(G,re){var he=this;G.apply(this,[re,function(ce){ne(he,ce)},function(ce){var Te=function(Ae){var Se=he.options.imageTexts.sizeUnits.split(",");return Ae.replace("#image_name#",re.name).replace("#image_size#",si(re.size,Se)).replace("#image_max_size#",si(he.options.imageMaxSize,Se))}(ce);he.updateStatusBar("upload-image",Te),setTimeout(function(){he.updateStatusBar("upload-image",he.options.imageTexts.sbInit)},1e4),he.options.errorCallback(Te)}])},be.prototype.setPreviewMaxHeight=function(){var G=this.codemirror.getWrapperElement(),re=G.nextSibling,he=parseInt(window.getComputedStyle(G).paddingTop),ce=parseInt(window.getComputedStyle(G).borderTopWidth),Te=(parseInt(this.options.maxHeight)+2*he+2*ce).toString()+"px";re.style.height=Te},be.prototype.createSideBySide=function(){var G=this.codemirror,re=G.getWrapperElement(),he=re.nextSibling;if(!he||!he.classList.contains("editor-preview-side")){if((he=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var ce=0;ce<this.options.previewClass.length;ce++)he.classList.add(this.options.previewClass[ce]);else typeof this.options.previewClass=="string"&&he.classList.add(this.options.previewClass);re.parentNode.insertBefore(he,re.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return he;var Te=!1,Ae=!1;return G.on("scroll",function(Se){if(Te)Te=!1;else{Ae=!0;var De=Se.getScrollInfo().height-Se.getScrollInfo().clientHeight,Oe=parseFloat(Se.getScrollInfo().top)/De,Ge=(he.scrollHeight-he.clientHeight)*Oe;he.scrollTop=Ge}}),he.onscroll=function(){if(Ae)Ae=!1;else{Te=!0;var Se=he.scrollHeight-he.clientHeight,De=parseFloat(he.scrollTop)/Se,Oe=(G.getScrollInfo().height-G.getScrollInfo().clientHeight)*De;G.scrollTo(0,Oe)}},he},be.prototype.createToolbar=function(G){if((G=G||this.options.toolbar)&&G.length!==0){var re;for(re=0;re<G.length;re++)se[G[re]]!=null&&(G[re]=se[G[re]]);var he=document.createElement("div");he.className="editor-toolbar",he.setAttribute("role","toolbar");var ce=this,Te={};for(ce.toolbar=G,re=0;re<G.length;re++)if((G[re].name!="guide"||ce.options.toolbarGuideIcon!==!1)&&!(ce.options.hideIcons&&ce.options.hideIcons.indexOf(G[re].name)!=-1||(G[re].name=="fullscreen"||G[re].name=="side-by-side")&&d())){if(G[re]==="|"){for(var Ae=!1,Se=re+1;Se<G.length;Se++)G[Se]==="|"||ce.options.hideIcons&&ce.options.hideIcons.indexOf(G[Se].name)!=-1||(Ae=!0);if(!Ae)continue}(function(Ge){var et;if(et=Ge==="|"?v():Ge.children?m(Ge,ce.options.toolbarTips,ce.options.shortcuts,ce):g(Ge,!0,ce.options.toolbarTips,ce.options.shortcuts,"button",ce),Te[Ge.name||Ge]=et,he.appendChild(et),Ge.name==="upload-image"){var ht=document.createElement("input");ht.className="imageInput",ht.type="file",ht.multiple=!0,ht.name="image",ht.accept=ce.options.imageAccept,ht.style.display="none",ht.style.opacity=0,he.appendChild(ht)}})(G[re])}ce.toolbar_div=he,ce.toolbarElements=Te;var De=this.codemirror;De.on("cursorActivity",function(){var Ge=b(De);for(var et in Te)(function(ht){var Ut=Te[ht];Ge[ht]?Ut.classList.add("active"):ht!="fullscreen"&&ht!="side-by-side"&&Ut.classList.remove("active")})(et)});var Oe=De.getWrapperElement();return Oe.parentNode.insertBefore(he,Oe),he}},be.prototype.createStatusbar=function(G){G=G||this.options.status;var re=this.options,he=this.codemirror;if(G&&G.length!==0){var ce,Te,Ae,Se,De=[];for(ce=0;ce<G.length;ce++)if(Te=void 0,Ae=void 0,Se=void 0,typeof G[ce]=="object")De.push({className:G[ce].className,defaultValue:G[ce].defaultValue,onUpdate:G[ce].onUpdate,onActivity:G[ce].onActivity});else{var Oe=G[ce];Oe==="words"?(Se=function(gt){gt.innerHTML=fe(he.getValue())},Te=function(gt){gt.innerHTML=fe(he.getValue())}):Oe==="lines"?(Se=function(gt){gt.innerHTML=he.lineCount()},Te=function(gt){gt.innerHTML=he.lineCount()}):Oe==="cursor"?(Se=function(gt){gt.innerHTML="1:1"},Ae=function(gt){var qt=he.getCursor(),Kt=qt.line+1,It=qt.ch+1;gt.innerHTML=Kt+":"+It}):Oe==="autosave"?Se=function(gt){re.autosave!=null&&re.autosave.enabled===!0&&gt.setAttribute("id","autosaved")}:Oe==="upload-image"&&(Se=function(gt){gt.innerHTML=re.imageTexts.sbInit}),De.push({className:Oe,defaultValue:Se,onUpdate:Te,onActivity:Ae})}var Ge=document.createElement("div");for(Ge.className="editor-statusbar",ce=0;ce<De.length;ce++){var et=De[ce],ht=document.createElement("span");ht.className=et.className,typeof et.defaultValue=="function"&&et.defaultValue(ht),typeof et.onUpdate=="function"&&this.codemirror.on("update",function(gt,qt){return function(){qt.onUpdate(gt)}}(ht,et)),typeof et.onActivity=="function"&&this.codemirror.on("cursorActivity",function(gt,qt){return function(){qt.onActivity(gt)}}(ht,et)),Ge.appendChild(ht)}var Ut=this.codemirror.getWrapperElement();return Ut.parentNode.insertBefore(Ge,Ut.nextSibling),Ge}},be.prototype.value=function(G){var re=this.codemirror;if(G===void 0)return re.getValue();if(re.getDoc().setValue(G),this.isPreviewActive()){var he=re.getWrapperElement().lastChild,ce=this.options.previewRender(G,he);ce!==null&&(he.innerHTML=ce)}return this},be.toggleBold=C,be.toggleItalic=T,be.toggleStrikethrough=D,be.toggleBlockquote=A,be.toggleHeadingSmaller=I,be.toggleHeadingBigger=P,be.toggleHeading1=U,be.toggleHeading2=K,be.toggleHeading3=L,be.toggleHeading4=F,be.toggleHeading5=$,be.toggleHeading6=H,be.toggleCodeBlock=M,be.toggleUnorderedList=V,be.toggleOrderedList=J,be.cleanBlock=ee,be.drawLink=ie,be.drawImage=de,be.drawUploadedImage=z,be.drawTable=ve,be.drawHorizontalRule=$e,be.undo=Xe,be.redo=ot,be.togglePreview=He,be.toggleSideBySide=Be,be.toggleFullScreen=E,be.prototype.toggleBold=function(){C(this)},be.prototype.toggleItalic=function(){T(this)},be.prototype.toggleStrikethrough=function(){D(this)},be.prototype.toggleBlockquote=function(){A(this)},be.prototype.toggleHeadingSmaller=function(){I(this)},be.prototype.toggleHeadingBigger=function(){P(this)},be.prototype.toggleHeading1=function(){U(this)},be.prototype.toggleHeading2=function(){K(this)},be.prototype.toggleHeading3=function(){L(this)},be.prototype.toggleHeading4=function(){F(this)},be.prototype.toggleHeading5=function(){$(this)},be.prototype.toggleHeading6=function(){H(this)},be.prototype.toggleCodeBlock=function(){M(this)},be.prototype.toggleUnorderedList=function(){V(this)},be.prototype.toggleOrderedList=function(){J(this)},be.prototype.cleanBlock=function(){ee(this)},be.prototype.drawLink=function(){ie(this)},be.prototype.drawImage=function(){de(this)},be.prototype.drawUploadedImage=function(){z(this)},be.prototype.drawTable=function(){ve(this)},be.prototype.drawHorizontalRule=function(){$e(this)},be.prototype.undo=function(){Xe(this)},be.prototype.redo=function(){ot(this)},be.prototype.togglePreview=function(){He(this)},be.prototype.toggleSideBySide=function(){Be(this)},be.prototype.toggleFullScreen=function(){E(this)},be.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},be.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},be.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},be.prototype.getState=function(){return b(this.codemirror)},be.prototype.toTextArea=function(){var G=this.codemirror,re=G.getWrapperElement(),he=re.parentNode;he&&(this.gui.toolbar&&he.removeChild(this.gui.toolbar),this.gui.statusbar&&he.removeChild(this.gui.statusbar),this.gui.sideBySide&&he.removeChild(this.gui.sideBySide)),he.parentNode.insertBefore(re,he),he.remove(),G.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},r.exports=be},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})})(S_e);var NHe=S_e.exports;const $He=$o(NHe);(()=>{var i=s=>s==null?!1:typeof s=="boolean"?s:s.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var e="min-label",t="max-label",r="#1E293B",n=()=>{let s=null,o=null,a=null,l,u=!1,c=r,h="",d,p=null,m=null,g=null,v=[],b=()=>{var P;let U=(P=s==null?void 0:s.shadowRoot)==null?void 0:P.querySelector(".range-slider-box");p=document.createElement("div"),p.classList.add("labels-row"),U.prepend(p)},_=P=>{let U=document.createElement("label");return U.className=P,U.setAttribute("for","range-slider"),U},E=()=>{m=_(e),m.textContent=I(a==null?void 0:a.getTextMin(),h),g=_(t),g.textContent=I(a==null?void 0:a.getTextMax(),h),o==null||o.before(m),o==null||o.after(g);let P=a==null?void 0:a.getValues();if(P)for(let U=0;U<P.length;U++){let K=_(`value${U+1}-label generated-label`);K.textContent=I(P[U],h),v.push(K),p==null||p.append(K)}},C=()=>{for(let P of v)!P||P.remove();m==null||m.remove(),g==null||g.remove(),p==null||p.remove(),v=[]},T=P=>{u=P,u?(b(),E()):C()},D=P=>{c=P;for(let U of v)!U||(U.style.color=c??r);m&&(m.style.color=c??r),g&&(g.style.color=c??r)},M=P=>{h=P,l&&l()},A=()=>{!a||!p||p.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},I=(P,U)=>{let K=`${(P??"").toString()}${U}`;return d&&typeof d=="function"?d(P):K};return{get name(){return"Generated Labels"},init:(P,U,K,L)=>{var F,$,H;s=P,a=L,o=(F=P.shadowRoot)==null?void 0:F.getElementById("range-slider"),l=U,c=($=s.getAttribute("generate-labels-text-color"))!=null?$:r,h=(H=s.getAttribute("generate-labels-units"))!=null?H:"",T(i(s.getAttribute("generate-labels"))),A(),D(c)},update:P=>{if(!(!u||!P.values)){A();for(let U=0;U<P.values.length;U++){let K=P.values[U],L=v[U];if(K===void 0&&L){L.remove(),v[U]=void 0;continue}if(K!==void 0&&!L){let F=_(`value${U+1}-label generated-label`);if(F.textContent=I(K,h),v[U]=F,P.values.length<=0)p==null||p.append(F);else if(U===0)p==null||p.append(F);else{let $=v[U-1];$==null||$.after(F)}continue}!L||(L.textContent=I(K,h))}m&&(m.textContent=I(P.textMin,h)),g&&(g.textContent=I(P.textMax,h)),D(c)}},onAttrChange:(P,U)=>{P==="generate-labels"&&T(i(U)),P==="generate-labels-text-color"&&D(U),P==="generate-labels-units"&&M(U)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return u??!1},set:P=>{T(i(P))}}},{name:"textColor",attributes:{get(){return c??""},set:P=>{D(P)}}},{name:"generateLabelsTextColor",attributes:{get(){return c??""},set:P=>{D(P)}}},{name:"units",attributes:{get(){return h??""},set:P=>{M(P)}}},{name:"generateLabelsUnits",attributes:{get(){return h??""},set:P=>{M(P)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:P=>{d=P,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:C}};window.tcRangeSliderPlugins.push(n)})();function BHe(i,e){Object.keys(e).forEach(t=>{i.setAttribute(t,e[t])})}class jHe extends fa{register(){super.register()}unregister(){super.unregister()}build(){const e=this.schema.properties,t=this.options,r=this.schema.description,n=this.theme,s=this.defaults.startVals[this.key];t.compact||(this.header=this.label=n.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=n.getFormInputDescription(this.translateProperty(r))),t.infoText&&(this.infoButton=n.getInfoButton(this.translateProperty(t.infoText)));const o=document.createElement("tc-range-slider"),a=Object.keys(e).find(c=>c.includes("min")),l=Object.keys(e).find(c=>c.includes("max")),u={min:e[a].minimum,max:e[l].maximum,value1:(s==null?void 0:s[a])||e[a].default,value2:(s==null?void 0:s[l])||e[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};BHe(o,u),this.input=o,this.input.id=this.formname,this.control=n.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",c=>{c.preventDefault(),c.stopPropagation(),this.value={[a]:c.detail.value1,[l]:c.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const zHe=[{type:"object",format:"minmax",func:jHe}],UHe=i=>{zHe.map(({type:e,format:t,func:r})=>{hn.defaults.startVals=i,hn.defaults.editors[t]=r,hn.defaults.resolvers.unshift(n=>{if(n.type===e&&n.format===t)return t})})};window.SimpleMDE=$He;const GHe=i=>{UHe(i.value||{});const e=i.renderRoot.querySelector("form");let r=new hn(e,{schema:i.schema,...i.value?{startval:i.value}:{},theme:"html",ajax:!0,...i.options});return r.on("ready",()=>{if(Object.values(r.editors).some(n=>n instanceof f_e)){const n=document.createElement("style");n.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,i.renderRoot.insertBefore(n,i.renderRoot.firstChild)}}),r};async function xfe(i){if(i&&typeof i!="object")try{const e=await fetch(i);if(e.ok)return await e.json();console.error("Failed to fetch schema from URL: ",e.status)}catch(e){console.error("Error fetching schema: ",e)}return i}const qHe=`
  * {
    font-family: Roboto, sans-serif;
  }
`,HHe=`
  [data-schemaid=root] > .je-header {
    display: none;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
  .je-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #0002;
    padding: 0.5rem 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
  }
  .je-indented-panel span {
    display: flex;
    align-items: center;
  }
  .je-header span:first-of-type, form[data-theme="html"] .je-form-input-label {
    font-size: 14px;
    font-weight: 600;
  }
  form[data-theme="html"] .je-indented-panel {
    border: none;
    margin: 0.4rem;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    text-indent: 0px;
    margin: 0px;
    display: flex;
  }
  .json-editor-btntype-toggle::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
   .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
    margin: 0px 0.5rem !important;
  }
  .json-editor-btntype-add:hover,
   .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }
  .je-indented-panel .row {
    margin-top: 10px;
  }
  .EasyMDEContainer span {
    display: unset;
  }
  .editor-toolbar button {
    box-shadow: none;
    color: #2c3e50 !important;
  }
  .editor-toolbar button:hover:not([disabled]):not(.icon),
  .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
  }
  .editor-toolbar button i {
    font-size: 17px;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }
`;var eC={exports:{}};eC.exports;(function(i,e){var t=200,r="__lodash_hash_undefined__",n=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",m="[object GeneratorFunction]",g="[object Map]",v="[object Number]",b="[object Null]",_="[object Object]",E="[object Promise]",C="[object Proxy]",T="[object RegExp]",D="[object Set]",M="[object String]",A="[object Symbol]",I="[object Undefined]",P="[object WeakMap]",U="[object ArrayBuffer]",K="[object DataView]",L="[object Float32Array]",F="[object Float64Array]",$="[object Int8Array]",H="[object Int16Array]",V="[object Int32Array]",J="[object Uint8Array]",ee="[object Uint8ClampedArray]",ie="[object Uint16Array]",de="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,ve={};ve[L]=ve[F]=ve[$]=ve[H]=ve[V]=ve[J]=ve[ee]=ve[ie]=ve[de]=!0,ve[a]=ve[l]=ve[U]=ve[c]=ve[K]=ve[h]=ve[d]=ve[p]=ve[g]=ve[v]=ve[_]=ve[T]=ve[D]=ve[M]=ve[P]=!1;var $e=typeof Rn=="object"&&Rn&&Rn.Object===Object&&Rn,Xe=typeof self=="object"&&self&&self.Object===Object&&self,ot=$e||Xe||Function("return this")(),Be=e&&!e.nodeType&&e,He=Be&&!0&&i&&!i.nodeType&&i,st=He&&He.exports===Be,xt=st&&$e.process,kt=function(){try{return xt&&xt.binding&&xt.binding("util")}catch{}}(),Tt=kt&&kt.isTypedArray;function Ei(X,me){for(var Ne=-1,yt=X==null?0:X.length,pi=0,Gt=[];++Ne<yt;){var Fi=X[Ne];me(Fi,Ne,X)&&(Gt[pi++]=Fi)}return Gt}function si(X,me){for(var Ne=-1,yt=me.length,pi=X.length;++Ne<yt;)X[pi+Ne]=me[Ne];return X}function ur(X,me){for(var Ne=-1,yt=X==null?0:X.length;++Ne<yt;)if(me(X[Ne],Ne,X))return!0;return!1}function Ve(X,me){for(var Ne=-1,yt=Array(X);++Ne<X;)yt[Ne]=me(Ne);return yt}function fe(X){return function(me){return X(me)}}function oe(X,me){return X.has(me)}function se(X,me){return X==null?void 0:X[me]}function pe(X){var me=-1,Ne=Array(X.size);return X.forEach(function(yt,pi){Ne[++me]=[pi,yt]}),Ne}function R(X,me){return function(Ne){return X(me(Ne))}}function j(X){var me=-1,Ne=Array(X.size);return X.forEach(function(yt){Ne[++me]=yt}),Ne}var Z=Array.prototype,Q=Function.prototype,ge=Object.prototype,be=ot["__core-js_shared__"],Ce=Q.toString,G=ge.hasOwnProperty,re=function(){var X=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}(),he=ge.toString,ce=RegExp("^"+Ce.call(G).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=st?ot.Buffer:void 0,Ae=ot.Symbol,Se=ot.Uint8Array,De=ge.propertyIsEnumerable,Oe=Z.splice,Ge=Ae?Ae.toStringTag:void 0,et=Object.getOwnPropertySymbols,ht=Te?Te.isBuffer:void 0,Ut=R(Object.keys,Object),gt=Pr(ot,"DataView"),qt=Pr(ot,"Map"),Kt=Pr(ot,"Promise"),It=Pr(ot,"Set"),Vt=Pr(ot,"WeakMap"),Yt=Pr(Object,"create"),Yi=to(gt),vr=to(qt),Jr=to(Kt),Rr=to(It),cr=to(Vt),Jt=Ae?Ae.prototype:void 0,ir=Jt?Jt.valueOf:void 0;function Ir(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var yt=X[me];this.set(yt[0],yt[1])}}function hi(){this.__data__=Yt?Yt(null):{},this.size=0}function Fn(X){var me=this.has(X)&&delete this.__data__[X];return this.size-=me?1:0,me}function rr(X){var me=this.__data__;if(Yt){var Ne=me[X];return Ne===r?void 0:Ne}return G.call(me,X)?me[X]:void 0}function Nn(X){var me=this.__data__;return Yt?me[X]!==void 0:G.call(me,X)}function nr(X,me){var Ne=this.__data__;return this.size+=this.has(X)?0:1,Ne[X]=Yt&&me===void 0?r:me,this}Ir.prototype.clear=hi,Ir.prototype.delete=Fn,Ir.prototype.get=rr,Ir.prototype.has=Nn,Ir.prototype.set=nr;function $r(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var yt=X[me];this.set(yt[0],yt[1])}}function bo(){this.__data__=[],this.size=0}function ye(X){var me=this.__data__,Ne=Sr(me,X);if(Ne<0)return!1;var yt=me.length-1;return Ne==yt?me.pop():Oe.call(me,Ne,1),--this.size,!0}function ke(X){var me=this.__data__,Ne=Sr(me,X);return Ne<0?void 0:me[Ne][1]}function rt(X){return Sr(this.__data__,X)>-1}function Ze(X,me){var Ne=this.__data__,yt=Sr(Ne,X);return yt<0?(++this.size,Ne.push([X,me])):Ne[yt][1]=me,this}$r.prototype.clear=bo,$r.prototype.delete=ye,$r.prototype.get=ke,$r.prototype.has=rt,$r.prototype.set=Ze;function bt(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var yt=X[me];this.set(yt[0],yt[1])}}function ti(){this.size=0,this.__data__={hash:new Ir,map:new(qt||$r),string:new Ir}}function di(X){var me=ma(this,X).delete(X);return this.size-=me?1:0,me}function vt(X){return ma(this,X).get(X)}function Ke(X){return ma(this,X).has(X)}function oi(X,me){var Ne=ma(this,X),yt=Ne.size;return Ne.set(X,me),this.size+=Ne.size==yt?0:1,this}bt.prototype.clear=ti,bt.prototype.delete=di,bt.prototype.get=vt,bt.prototype.has=Ke,bt.prototype.set=oi;function gi(X){var me=-1,Ne=X==null?0:X.length;for(this.__data__=new bt;++me<Ne;)this.add(X[me])}function Ot(X){return this.__data__.set(X,r),this}function jt(X){return this.__data__.has(X)}gi.prototype.add=gi.prototype.push=Ot,gi.prototype.has=jt;function Er(X){var me=this.__data__=new $r(X);this.size=me.size}function mn(){this.__data__=new $r,this.size=0}function ni(X){var me=this.__data__,Ne=me.delete(X);return this.size=me.size,Ne}function qe(X){return this.__data__.get(X)}function dt(X){return this.__data__.has(X)}function Xi(X,me){var Ne=this.__data__;if(Ne instanceof $r){var yt=Ne.__data__;if(!qt||yt.length<t-1)return yt.push([X,me]),this.size=++Ne.size,this;Ne=this.__data__=new bt(yt)}return Ne.set(X,me),this.size=Ne.size,this}Er.prototype.clear=mn,Er.prototype.delete=ni,Er.prototype.get=qe,Er.prototype.has=dt,Er.prototype.set=Xi;function un(X,me){var Ne=Yn(X),yt=!Ne&&Jn(X),pi=!Ne&&!yt&&io(X),Gt=!Ne&&!yt&&!pi&&Qn(X),Fi=Ne||yt||pi||Gt,hr=Fi?Ve(X.length,String):[],Br=hr.length;for(var Si in X)(me||G.call(X,Si))&&!(Fi&&(Si=="length"||pi&&(Si=="offset"||Si=="parent")||Gt&&(Si=="buffer"||Si=="byteLength"||Si=="byteOffset")||Ms(Si,Br)))&&hr.push(Si);return hr}function Sr(X,me){for(var Ne=X.length;Ne--;)if(zl(X[Ne][0],me))return Ne;return-1}function Or(X,me,Ne){var yt=me(X);return Yn(X)?yt:si(yt,Ne(X))}function gr(X){return X==null?X===void 0?I:b:Ge&&Ge in Object(X)?wo(X):dl(X)}function Ft(X){return So(X)&&gr(X)==a}function _n(X,me,Ne,yt,pi){return X===me?!0:X==null||me==null||!So(X)&&!So(me)?X!==X&&me!==me:Kn(X,me,Ne,yt,_n,pi)}function Kn(X,me,Ne,yt,pi,Gt){var Fi=Yn(X),hr=Yn(me),Br=Fi?l:js(X),Si=hr?l:js(me);Br=Br==a?_:Br,Si=Si==a?_:Si;var $n=Br==_,es=Si==_,br=Br==Si;if(br&&io(X)){if(!io(me))return!1;Fi=!0,$n=!1}if(br&&!$n)return Gt||(Gt=new Er),Fi||Qn(X)?xo(X,me,Ne,yt,pi,Gt):hl(X,me,Br,Ne,yt,pi,Gt);if(!(Ne&n)){var gn=$n&&G.call(X,"__wrapped__"),Us=es&&G.call(me,"__wrapped__");if(gn||Us){var Yo=gn?X.value():X,us=Us?me.value():me;return Gt||(Gt=new Er),pi(Yo,us,Ne,yt,Gt)}}return br?(Gt||(Gt=new Er),xs(X,me,Ne,yt,pi,Gt)):!1}function xn(X){if(!pl(X)||zs(X))return!1;var me=fl(X)?ce:z;return me.test(to(X))}function _o(X){return So(X)&&ls(X.length)&&!!ve[gr(X)]}function Ho(X){if(!Wo(X))return Ut(X);var me=[];for(var Ne in Object(X))G.call(X,Ne)&&Ne!="constructor"&&me.push(Ne);return me}function xo(X,me,Ne,yt,pi,Gt){var Fi=Ne&n,hr=X.length,Br=me.length;if(hr!=Br&&!(Fi&&Br>hr))return!1;var Si=Gt.get(X);if(Si&&Gt.get(me))return Si==me;var $n=-1,es=!0,br=Ne&s?new gi:void 0;for(Gt.set(X,me),Gt.set(me,X);++$n<hr;){var gn=X[$n],Us=me[$n];if(yt)var Yo=Fi?yt(Us,gn,$n,me,X,Gt):yt(gn,Us,$n,X,me,Gt);if(Yo!==void 0){if(Yo)continue;es=!1;break}if(br){if(!ur(me,function(us,cs){if(!oe(br,cs)&&(gn===us||pi(gn,us,Ne,yt,Gt)))return br.push(cs)})){es=!1;break}}else if(!(gn===Us||pi(gn,Us,Ne,yt,Gt))){es=!1;break}}return Gt.delete(X),Gt.delete(me),es}function hl(X,me,Ne,yt,pi,Gt,Fi){switch(Ne){case K:if(X.byteLength!=me.byteLength||X.byteOffset!=me.byteOffset)return!1;X=X.buffer,me=me.buffer;case U:return!(X.byteLength!=me.byteLength||!Gt(new Se(X),new Se(me)));case c:case h:case v:return zl(+X,+me);case d:return X.name==me.name&&X.message==me.message;case T:case M:return X==me+"";case g:var hr=pe;case D:var Br=yt&n;if(hr||(hr=j),X.size!=me.size&&!Br)return!1;var Si=Fi.get(X);if(Si)return Si==me;yt|=s,Fi.set(X,me);var $n=xo(hr(X),hr(me),yt,pi,Gt,Fi);return Fi.delete(X),$n;case A:if(ir)return ir.call(X)==ir.call(me)}return!1}function xs(X,me,Ne,yt,pi,Gt){var Fi=Ne&n,hr=Vo(X),Br=hr.length,Si=Vo(me),$n=Si.length;if(Br!=$n&&!Fi)return!1;for(var es=Br;es--;){var br=hr[es];if(!(Fi?br in me:G.call(me,br)))return!1}var gn=Gt.get(X);if(gn&&Gt.get(me))return gn==me;var Us=!0;Gt.set(X,me),Gt.set(me,X);for(var Yo=Fi;++es<Br;){br=hr[es];var us=X[br],cs=me[br];if(yt)var Ra=Fi?yt(cs,us,br,me,X,Gt):yt(us,cs,br,X,me,Gt);if(!(Ra===void 0?us===cs||pi(us,cs,Ne,yt,Gt):Ra)){Us=!1;break}Yo||(Yo=br=="constructor")}if(Us&&!Yo){var Wr=X.constructor,Ia=me.constructor;Wr!=Ia&&"constructor"in X&&"constructor"in me&&!(typeof Wr=="function"&&Wr instanceof Wr&&typeof Ia=="function"&&Ia instanceof Ia)&&(Us=!1)}return Gt.delete(X),Gt.delete(me),Us}function Vo(X){return Or(X,La,jl)}function ma(X,me){var Ne=X.__data__;return eo(me)?Ne[typeof me=="string"?"string":"hash"]:Ne.map}function Pr(X,me){var Ne=se(X,me);return xn(Ne)?Ne:void 0}function wo(X){var me=G.call(X,Ge),Ne=X[Ge];try{X[Ge]=void 0;var yt=!0}catch{}var pi=he.call(X);return yt&&(me?X[Ge]=Ne:delete X[Ge]),pi}var jl=et?function(X){return X==null?[]:(X=Object(X),Ei(et(X),function(me){return De.call(X,me)}))}:Ul,js=gr;(gt&&js(new gt(new ArrayBuffer(1)))!=K||qt&&js(new qt)!=g||Kt&&js(Kt.resolve())!=E||It&&js(new It)!=D||Vt&&js(new Vt)!=P)&&(js=function(X){var me=gr(X),Ne=me==_?X.constructor:void 0,yt=Ne?to(Ne):"";if(yt)switch(yt){case Yi:return K;case vr:return g;case Jr:return E;case Rr:return D;case cr:return P}return me});function Ms(X,me){return me=me??o,!!me&&(typeof X=="number"||ne.test(X))&&X>-1&&X%1==0&&X<me}function eo(X){var me=typeof X;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?X!=="__proto__":X===null}function zs(X){return!!re&&re in X}function Wo(X){var me=X&&X.constructor,Ne=typeof me=="function"&&me.prototype||ge;return X===Ne}function dl(X){return he.call(X)}function to(X){if(X!=null){try{return Ce.call(X)}catch{}try{return X+""}catch{}}return""}function zl(X,me){return X===me||X!==X&&me!==me}var Jn=Ft(function(){return arguments}())?Ft:function(X){return So(X)&&G.call(X,"callee")&&!De.call(X,"callee")},Yn=Array.isArray;function Eo(X){return X!=null&&ls(X.length)&&!fl(X)}var io=ht||Rt;function Ma(X,me){return _n(X,me)}function fl(X){if(!pl(X))return!1;var me=gr(X);return me==p||me==m||me==u||me==C}function ls(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=o}function pl(X){var me=typeof X;return X!=null&&(me=="object"||me=="function")}function So(X){return X!=null&&typeof X=="object"}var Qn=Tt?fe(Tt):_o;function La(X){return Eo(X)?un(X):Ho(X)}function Ul(){return[]}function Rt(){return!1}i.exports=Ma})(eC,eC.exports);var VHe=eC.exports;const wfe=$o(VHe),WHe=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;var Ga,rv,T_e,A_e;class C_e extends Lr{constructor(){super();ar(this,rv);ar(this,Ga,null);this.schema,this.value,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1}get editor(){return _i(this,Ga)}get schema(){return this._schema}set schema(t){_i(this,Ga)&&!wfe(this._schema,t)&&_i(this,Ga).destroy(),this._schema=t}get value(){return this._value}set value(t){_i(this,Ga)&&_i(this,Ga).ready&&!wfe(this._value,t)&&_i(this,Ga).setValue(this.value),this._value=t}async updated(t){this._value=await xfe(this.value),t.has("schema")&&(this._schema=await xfe(this.schema),(!_i(this,Ga)||_i(this,Ga).destroyed)&&(ko(this,Ga,await GHe(this)),Es(this,rv,A_e).call(this)))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Qe`
      <style>
        ${qHe}
        ${!this.unstyled&&WHe}
        ${!this.unstyled&&HHe}
      </style>
      <form></form>
    `}}Ga=new WeakMap,rv=new WeakSet,T_e=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},A_e=function(){["ready","change"].map(r=>{_i(this,Ga).on(r,()=>{this._value=_i(this,Ga).getValue(),Es(this,rv,T_e).call(this)})})},We(C_e,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",C_e);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var yr=i=>i!==void 0,k_e=(i,e,t)=>e in i?i[e]:i[e]=t;const ax={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};class YHe{constructor(e){this._parser=new e}toDocument(e){return this._parser.parseFromString(e,"application/xml")}getAllTextContent(e,t){return XT(e,t).join("")}}function XT(i,e){return D_e(i,e,[]).join("")}function D_e(i,e,t){if(i.nodeType===ax.CDATA_SECTION||i.nodeType===ax.TEXT)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{var r;for(r=i.firstChild;r;r=r.nextSibling)D_e(r,e,t)}return t}function XHe(i,e,t,r){for(var n=ZHe(e);n;n=KHe(n)){var s=n.namespaceURI||null,o=i[s];if(yr(o)){var a=o[n.localName];yr(a)&&a.call(r,n,t)}}}function ZHe(i){let e=i.firstElementChild||i.firstChild;for(;e&&e.nodeType!==ax.ELEMENT;)e=e.nextSibling;return e}function KHe(i){let e=i.nextElementSibling||i.nextSibling;for(;e&&e.nodeType!==ax.ELEMENT;)e=e.nextSibling;return e}function jo(i,e,t){return JHe(i,e,t)}function JHe(i,e,t){var r=yr(t)?t:{},n,s;for(n=0,s=i.length;n<s;++n)r[i[n]]=e;return r}function M_e(i,e){return function(t,r){var n=i.call(yr(e)?e:this,t,r);if(yr(n)){var s=r[r.length-1];s.push(n)}}}function vo(i,e,t,r,n){return r.push(i),XHe(e,t,r,n),r.pop()}function ri(i,e,t){return function(r,n){let s=i.call(yr(t)?t:this,r,n);if(yr(s)){var o=n[n.length-1],a=yr(e)?e:r.localName;o[a]=s}}}function Ua(i,e,t){return function(r,n){var s=i.call(yr(t)?t:this,r,n);if(yr(s)){var o=n[n.length-1],a=yr(e)?e:r.localName,l=k_e(o,a,[]);l.push(s)}}}const QHe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function eVe(i){return i.replace(QHe,"")}function Lm(i){const e=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(e)return yr(e[1])||!1}function U0(i){return Wh(XT(i,!1))}function Wh(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function Gk(i){return tC(XT(i,!1))}function tC(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function Xr(i){return eVe(XT(i,!1))}const tVe="http://www.w3.org/1999/xlink";function mI(i){return i.getAttributeNS(tVe,"href")}function iVe(i,e){return vo({},DVe,i,e)}function L_e(i){return[Wh(i.getAttribute("minx")),Wh(i.getAttribute("miny")),Wh(i.getAttribute("maxx")),Wh(i.getAttribute("maxy"))]}function rVe(i,e){const t=L_e(i),r=[Wh(i.getAttribute("resx")),Wh(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS")||i.getAttribute("SRS"),extent:t,res:r}}function nVe(i,e){const t=L_e(i);if(!(!yr(t[0])||!yr(t[1])||!yr(t[2])||!yr(t[3])))return t}function sVe(i,e){const t=parseFloat(i.getAttribute("min")),r=parseFloat(i.getAttribute("max"));return{min:t,max:r}}function oVe(i,e){const t=vo({},MVe,i,e);if(!yr(t))return;const r=t.westBoundLongitude,n=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(!yr(r)||!yr(n)||!yr(s)||!yr(o)))return[r,n,s,o]}function aVe(i,e){return vo({},EVe,i,e)}function lVe(i,e){return vo({},SVe,i,e)}function uVe(i,e){return vo({},CVe,i,e)}function cVe(i,e){return vo({},TVe,i,e)}function hVe(i,e){return vo({},AVe,i,e)}function dVe(i,e){return vo([],kVe,i,e)}function fVe(i,e){const t=Lm(i.getAttribute("queryable"));return vo({queryable:yr(t)?t:!1},O_e,i,e)}function pVe(i,e){var t=e[e.length-1];const r=vo({},O_e,i,e);if(!yr(r))return;let n=Lm(i.getAttribute("queryable"));yr(n)||(n=t.queryable),r.queryable=yr(n)?n:!1;let s=tC(i.getAttribute("cascaded"));yr(s)||(s=t.cascaded),r.cascaded=s;let o=Lm(i.getAttribute("opaque"));yr(o)||(o=t.opaque),r.opaque=yr(o)?o:!1;let a=Lm(i.getAttribute("noSubsets"));yr(a)||(a=t.noSubsets),r.noSubsets=yr(a)?a:!1;let l=Wh(i.getAttribute("fixedWidth"));yr(l)||(l=t.fixedWidth),r.fixedWidth=l;let u=Wh(i.getAttribute("fixedHeight"));yr(u)||(u=t.fixedHeight),r.fixedHeight=u;const c=["Style","CRS","AuthorityURL"];for(let d=0,p=c.length;d<p;d++){const m=c[d],g=t[m];if(yr(g)){let v=k_e(r,m,[]);v=v.concat(g),r[m]=v}}const h=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,p=h.length;d<p;d++){const m=h[d],g=r[m];if(!yr(g)){const v=t[m];r[m]=v}}return r}function mVe(i,e){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:Lm(i.getAttribute("multipleValues")),nearestValue:Lm(i.getAttribute("nearestValue")),current:Lm(i.getAttribute("current")),values:Xr(i)}}function ad(i,e){return vo({},FVe,i,e)}function gVe(i,e){return vo({},LVe,i,e)}function yVe(i,e){return vo({},IVe,i,e)}function vVe(i,e){return vo({},OVe,i,e)}function qk(i,e){return vo({},RVe,i,e)}function R_e(i,e){var t=ad(i,e);if(yr(t)){const r=[tC(i.getAttribute("width")),tC(i.getAttribute("height"))];return t.size=r,t}}function bVe(i,e){var t=ad(i,e);if(yr(t))return t.name=i.getAttribute("name"),t}function _Ve(i,e){var t=ad(i,e);if(yr(t))return t.type=i.getAttribute("type"),t}function xVe(i,e){return vo({},PVe,i,e)}function I_e(i,e){return vo([],NVe,i,e)}const zo=[null,"http://www.opengis.net/wms"],wVe=jo(zo,{Service:ri(lVe),Capability:ri(aVe)}),EVe=jo(zo,{Request:ri(gVe),Exception:ri(dVe),Layer:ri(fVe)}),SVe=jo(zo,{Name:ri(Xr),Title:ri(Xr),Abstract:ri(Xr),KeywordList:ri(I_e),OnlineResource:ri(mI),ContactInformation:ri(uVe),Fees:ri(Xr),AccessConstraints:ri(Xr),LayerLimit:ri(Gk),MaxWidth:ri(Gk),MaxHeight:ri(Gk)}),CVe=jo(zo,{ContactPersonPrimary:ri(cVe),ContactPosition:ri(Xr),ContactAddress:ri(hVe),ContactVoiceTelephone:ri(Xr),ContactFacsimileTelephone:ri(Xr),ContactElectronicMailAddress:ri(Xr)}),TVe=jo(zo,{ContactPerson:ri(Xr),ContactOrganization:ri(Xr)}),AVe=jo(zo,{AddressType:ri(Xr),Address:ri(Xr),City:ri(Xr),StateOrProvince:ri(Xr),PostCode:ri(Xr),Country:ri(Xr)}),kVe=jo(zo,{Format:M_e(Xr)}),O_e=jo(zo,{Name:ri(Xr),Title:ri(Xr),Abstract:ri(Xr),KeywordList:ri(I_e),CRS:Ua(Xr),SRS:Ua(Xr),EX_GeographicBoundingBox:ri(oVe),LatLonBoundingBox:ri(nVe),BoundingBox:Ua(rVe),Dimension:Ua(mVe),Attribution:ri(iVe),AuthorityURL:Ua(bVe),Identifier:Ua(Xr),MetadataURL:Ua(_Ve),DataURL:Ua(ad),FeatureListURL:Ua(ad),Style:Ua(xVe),MinScaleDenominator:ri(U0),MaxScaleDenominator:ri(U0),ScaleHint:ri(sVe),Layer:Ua(pVe)}),DVe=jo(zo,{Title:ri(Xr),OnlineResource:ri(mI),LogoURL:ri(R_e)}),MVe=jo(zo,{westBoundLongitude:ri(U0),eastBoundLongitude:ri(U0),southBoundLatitude:ri(U0),northBoundLatitude:ri(U0)}),LVe=jo(zo,{GetCapabilities:ri(qk),GetMap:ri(qk),GetFeatureInfo:ri(qk)}),RVe=jo(zo,{Format:Ua(Xr),DCPType:Ua(yVe)}),IVe=jo(zo,{HTTP:ri(vVe)}),OVe=jo(zo,{Get:ri(ad),Post:ri(ad)}),PVe=jo(zo,{Name:ri(Xr),Title:ri(Xr),Abstract:ri(Xr),LegendURL:Ua(R_e),StyleSheetURL:ri(ad),StyleURL:ri(ad)}),FVe=jo(zo,{Format:ri(Xr),OnlineResource:ri(mI)}),NVe=jo(zo,{Keyword:M_e(Xr)});class $Ve{constructor(e,t){!t&&typeof window<"u"&&(t=window.DOMParser),this.version=void 0,this._parser=new YHe(t),this._data=e}data(e){return this._data=e,this}toJSON(e){return e=e||this._data,this.parse(e)}parse(e){return this.readFromDocument(this._parser.toDocument(e))}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==ax.ELEMENT)return this.readFromNode(t);return null}readFromNode(e){return this.version=e.getAttribute("version"),vo({version:this.version},wVe,e,[])||null}}async function BVe(i){let e=new URL(i),t=e.searchParams;t.set("SERVICE","WMS"),t.set("REQUEST","GetCapabilities");let r=e.toString();const n=await fetch(r);if(n.ok){const s=await n.text();return new $Ve(s).toJSON()}else throw new Error(`Error: ${n.status}`)}function gI(i){const e=/\b(?:wms|ows)\b/i,t=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return e.test(i)?"TileWMS":t.test(i)?"XYZ":!1}function jVe(i){const t=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(i),r=gI(i);return!!(i&&t&&r)}function P_e(i){return i.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function zVe(i){try{return JSON.parse(P_e(i)),!!i}catch{return!1}}function UVe(i,e){const t=new URL(i).searchParams;Object.entries(e).forEach(([o,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{t.set(l,a[l])}):t.set(o,a)});const r=i.split("?")[0],n=t.toString();return`${r}?${n}`}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Efe(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function Vc(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Efe(Object(t),!0).forEach(function(r){GVe(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Efe(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function rS(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rS=function(e){return typeof e}:rS=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rS(i)}function GVe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ld(){return ld=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},ld.apply(this,arguments)}function qVe(i,e){if(i==null)return{};var t={},r=Object.keys(i),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(t[n]=i[n]);return t}function HVe(i,e){if(i==null)return{};var t=qVe(i,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(t[r]=i[r])}return t}var VVe="1.15.2";function Qh(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var bd=Qh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),hw=Qh(/Edge/i),Sfe=Qh(/firefox/i),S_=Qh(/safari/i)&&!Qh(/chrome/i)&&!Qh(/android/i),F_e=Qh(/iP(ad|od|hone)/i),N_e=Qh(/chrome/i)&&Qh(/android/i),$_e={capture:!1,passive:!1};function sn(i,e,t){i.addEventListener(e,t,!bd&&$_e)}function qr(i,e,t){i.removeEventListener(e,t,!bd&&$_e)}function iC(i,e){if(e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function WVe(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function Pu(i,e,t,r){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&iC(i,e):iC(i,e))||r&&i===t)return i;if(i===t)break}while(i=WVe(i))}return null}var Cfe=/\s+/g;function gl(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var r=(" "+i.className+" ").replace(Cfe," ").replace(" "+e+" "," ");i.className=(r+(t?" "+e:"")).replace(Cfe," ")}}function Mi(i,e,t){var r=i&&i.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function uy(i,e){var t="";if(typeof i=="string")t=i;else do{var r=Mi(i,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(i=i.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function B_e(i,e,t){if(i){var r=i.getElementsByTagName(e),n=0,s=r.length;if(t)for(;n<s;n++)t(r[n],n);return r}return[]}function $c(){var i=document.scrollingElement;return i||document.documentElement}function Fs(i,e,t,r,n){if(!(!i.getBoundingClientRect&&i!==window)){var s,o,a,l,u,c,h;if(i!==window&&i.parentNode&&i!==$c()?(s=i.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||t)&&i!==window&&(n=n||i.parentNode,!bd))do if(n&&n.getBoundingClientRect&&(Mi(n,"transform")!=="none"||t&&Mi(n,"position")!=="static")){var d=n.getBoundingClientRect();o-=d.top+parseInt(Mi(n,"border-top-width")),a-=d.left+parseInt(Mi(n,"border-left-width")),l=o+s.height,u=a+s.width;break}while(n=n.parentNode);if(r&&i!==window){var p=uy(n||i),m=p&&p.a,g=p&&p.d;p&&(o/=g,a/=m,h/=m,c/=g,l=o+c,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:c}}}function Tfe(i,e,t){for(var r=Df(i,!0),n=Fs(i)[e];r;){var s=Fs(r)[t],o=void 0;if(t==="top"||t==="left"?o=n>=s:o=n<=s,!o)return r;if(r===$c())break;r=Df(r,!1)}return!1}function Iy(i,e,t,r){for(var n=0,s=0,o=i.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Li.ghost&&(r||o[s]!==Li.dragged)&&Pu(o[s],t.draggable,i,!1)){if(n===e)return o[s];n++}s++}return null}function yI(i,e){for(var t=i.lastElementChild;t&&(t===Li.ghost||Mi(t,"display")==="none"||e&&!iC(t,e));)t=t.previousElementSibling;return t||null}function eu(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==Li.clone&&(!e||iC(i,e))&&t++;return t}function Afe(i){var e=0,t=0,r=$c();if(i)do{var n=uy(i),s=n.a,o=n.d;e+=i.scrollLeft*s,t+=i.scrollTop*o}while(i!==r&&(i=i.parentNode));return[e,t]}function YVe(i,e){for(var t in i)if(i.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===i[t][r])return Number(t)}return-1}function Df(i,e){if(!i||!i.getBoundingClientRect)return $c();var t=i,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=Mi(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return $c();if(r||e)return t;r=!0}}while(t=t.parentNode);return $c()}function XVe(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function Hk(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var C_;function j_e(i,e){return function(){if(!C_){var t=arguments,r=this;t.length===1?i.call(r,t[0]):i.apply(r,t),C_=setTimeout(function(){C_=void 0},e)}}}function ZVe(){clearTimeout(C_),C_=void 0}function z_e(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function U_e(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}function G_e(i,e,t){var r={};return Array.from(i.children).forEach(function(n){var s,o,a,l;if(!(!Pu(n,e.draggable,i,!1)||n.animated||n===t)){var u=Fs(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,u.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,u.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Sl="Sortable"+new Date().getTime();function KVe(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(Mi(n,"display")==="none"||n===Li.ghost)){i.push({target:n,rect:Fs(n)});var s=Vc({},i[i.length-1].rect);if(n.thisAnimationDuration){var o=uy(n,!0);o&&(s.top-=o.f,s.left-=o.e)}n.fromRect=s}})}},addAnimationState:function(r){i.push(r)},removeAnimationState:function(r){i.splice(YVe(i,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;i.forEach(function(a){var l=0,u=a.target,c=u.fromRect,h=Fs(u),d=u.prevFromRect,p=u.prevToRect,m=a.rect,g=uy(u,!0);g&&(h.top-=g.f,h.left-=g.e),u.toRect=h,u.thisAnimationDuration&&Hk(d,h)&&!Hk(c,h)&&(m.top-h.top)/(m.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(l=QVe(m,d,p,n.options)),Hk(h,c)||(u.prevFromRect=c,u.prevToRect=h,l||(l=n.options.animation),n.animate(u,m,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),i=[]},animate:function(r,n,s,o){if(o){Mi(r,"transition",""),Mi(r,"transform","");var a=uy(this.el),l=a&&a.a,u=a&&a.d,c=(n.left-s.left)/(l||1),h=(n.top-s.top)/(u||1);r.animatingX=!!c,r.animatingY=!!h,Mi(r,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=JVe(r),Mi(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Mi(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Mi(r,"transition",""),Mi(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function JVe(i){return i.offsetWidth}function QVe(i,e,t,r){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var s0=[],Vk={initializeByDefault:!0},dw={mount:function(e){for(var t in Vk)Vk.hasOwnProperty(t)&&!(t in e)&&(e[t]=Vk[t]);s0.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),s0.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=e+"Global";s0.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](Vc({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Vc({sortable:t},r)))})},initializePlugins:function(e,t,r,n){s0.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,ld(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var r={};return s0.forEach(function(n){typeof n.eventProperties=="function"&&ld(r,n.eventProperties.call(t[n.pluginName],e))}),r},modifyOption:function(e,t,r){var n;return s0.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(n=s.optionListeners[t].call(e[s.pluginName],r))}),n}};function eWe(i){var e=i.sortable,t=i.rootEl,r=i.name,n=i.targetEl,s=i.cloneEl,o=i.toEl,a=i.fromEl,l=i.oldIndex,u=i.newIndex,c=i.oldDraggableIndex,h=i.newDraggableIndex,d=i.originalEvent,p=i.putSortable,m=i.extraEventProperties;if(e=e||t&&t[Sl],!!e){var g,v=e.options,b="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!bd&&!hw?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||t,g.from=a||t,g.item=n||t,g.clone=s,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=h,g.originalEvent=d,g.pullMode=p?p.lastPutMode:void 0;var _=Vc(Vc({},m),dw.getEventProperties(r,e));for(var E in _)g[E]=_[E];t&&t.dispatchEvent(g),v[b]&&v[b].call(e,g)}}var tWe=["evt"],Ba=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=HVe(r,tWe);dw.pluginEvent.bind(Li)(e,t,Vc({dragEl:St,parentEl:ps,ghostEl:Gi,rootEl:Xn,nextEl:dm,lastDownEl:nS,cloneEl:is,cloneHidden:bf,dragStarted:Q1,putSortable:Do,activeSortable:Li.active,originalEvent:n,oldIndex:G0,oldDraggableIndex:T_,newIndex:yl,newDraggableIndex:mf,hideGhostForTarget:W_e,unhideGhostForTarget:Y_e,cloneNowHidden:function(){bf=!0},cloneNowShown:function(){bf=!1},dispatchSortableEvent:function(a){ba({sortable:t,name:a,originalEvent:n})}},s))};function ba(i){eWe(Vc({putSortable:Do,cloneEl:is,targetEl:St,rootEl:Xn,oldIndex:G0,oldDraggableIndex:T_,newIndex:yl,newDraggableIndex:mf},i))}var St,ps,Gi,Xn,dm,nS,is,bf,G0,yl,T_,mf,XE,Do,S0=!1,rC=!1,nC=[],im,Mu,Wk,Yk,kfe,Dfe,Q1,o0,A_,k_=!1,ZE=!1,sS,Ko,Xk=[],qM=!1,sC=[],ZT=typeof document<"u",KE=F_e,Mfe=hw||bd?"cssFloat":"float",iWe=ZT&&!N_e&&!F_e&&"draggable"in document.createElement("div"),q_e=function(){if(ZT){if(bd)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),H_e=function(e,t){var r=Mi(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Iy(e,0,t),o=Iy(e,1,t),a=s&&Mi(s),l=o&&Mi(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Fs(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Fs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=n&&r[Mfe]==="none"||o&&r[Mfe]==="none"&&u+c>n)?"vertical":"horizontal"},rWe=function(e,t,r){var n=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,u=r?t.width:t.height;return n===a||s===l||n+o/2===a+u/2},nWe=function(e,t){var r;return nC.some(function(n){var s=n[Sl].options.emptyInsertThreshold;if(!(!s||yI(n))){var o=Fs(n),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return r=n}}),r},V_e=function(e){function t(s,o){return function(a,l,u,c){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,c),o)(a,l,u,c);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},n=e.group;(!n||rS(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=t(n.pull,!0),r.checkPut=t(n.put),r.revertClone=n.revertClone,e.group=r},W_e=function(){!q_e&&Gi&&Mi(Gi,"display","none")},Y_e=function(){!q_e&&Gi&&Mi(Gi,"display","")};ZT&&!N_e&&document.addEventListener("click",function(i){if(rC)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),rC=!1,!1},!0);var rm=function(e){if(St){e=e.touches?e.touches[0]:e;var t=nWe(e.clientX,e.clientY);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[Sl]._onDragOver(r)}}},sWe=function(e){St&&St.parentNode[Sl]._isOutsideThisEl(e.target)};function Li(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=ld({},e),i[Sl]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return H_e(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Li.supportPointer!==!1&&"PointerEvent"in window&&!S_,emptyInsertThreshold:5};dw.initializePlugins(this,i,t);for(var r in t)!(r in e)&&(e[r]=t[r]);V_e(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:iWe,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?sn(i,"pointerdown",this._onTapStart):(sn(i,"mousedown",this._onTapStart),sn(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(sn(i,"dragover",this),sn(i,"dragenter",this)),nC.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ld(this,KVe())}Li.prototype={constructor:Li,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(o0=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,St):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,s=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=n.filter;if(fWe(r),!St&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||n.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&S_&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Pu(l,n.draggable,r,!1),!(l&&l.animated)&&nS!==l)){if(G0=eu(l),T_=eu(l,n.draggable),typeof c=="function"){if(c.call(this,e,l,this)){ba({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),Ba("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=Pu(u,h.trim(),r,!1),h)return ba({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Ba("filter",t,{evt:e}),!0}),c)){s&&e.cancelable&&e.preventDefault();return}n.handle&&!Pu(u,n.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var n=this,s=n.el,o=n.options,a=s.ownerDocument,l;if(r&&!St&&r.parentNode===s){var u=Fs(r);if(Xn=s,St=r,ps=St.parentNode,dm=St.nextSibling,nS=r,XE=o.group,Li.dragged=St,im={target:St,clientX:(t||e).clientX,clientY:(t||e).clientY},kfe=im.clientX-u.left,Dfe=im.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,St.style["will-change"]="all",l=function(){if(Ba("delayEnded",n,{evt:e}),Li.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Sfe&&n.nativeDraggable&&(St.draggable=!0),n._triggerDragStart(e,t),ba({sortable:n,name:"choose",originalEvent:e}),gl(St,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){B_e(St,c.trim(),Zk)}),sn(a,"dragover",rm),sn(a,"mousemove",rm),sn(a,"touchmove",rm),sn(a,"mouseup",n._onDrop),sn(a,"touchend",n._onDrop),sn(a,"touchcancel",n._onDrop),Sfe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,St.draggable=!0),Ba("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(hw||bd))){if(Li.eventCanceled){this._onDrop();return}sn(a,"mouseup",n._disableDelayedDrag),sn(a,"touchend",n._disableDelayedDrag),sn(a,"touchcancel",n._disableDelayedDrag),sn(a,"mousemove",n._delayedDragTouchMoveHandler),sn(a,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&sn(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){St&&Zk(St),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;qr(e,"mouseup",this._disableDelayedDrag),qr(e,"touchend",this._disableDelayedDrag),qr(e,"touchcancel",this._disableDelayedDrag),qr(e,"mousemove",this._delayedDragTouchMoveHandler),qr(e,"touchmove",this._delayedDragTouchMoveHandler),qr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?sn(document,"pointermove",this._onTouchMove):t?sn(document,"touchmove",this._onTouchMove):sn(document,"mousemove",this._onTouchMove):(sn(St,"dragend",this),sn(Xn,"dragstart",this._onDragStart));try{document.selection?oS(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(S0=!1,Xn&&St){Ba("dragStarted",this,{evt:t}),this.nativeDraggable&&sn(document,"dragover",sWe);var r=this.options;!e&&gl(St,r.dragClass,!1),gl(St,r.ghostClass,!0),Li.active=this,e&&this._appendGhost(),ba({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Mu){this._lastX=Mu.clientX,this._lastY=Mu.clientY,W_e();for(var e=document.elementFromPoint(Mu.clientX,Mu.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Mu.clientX,Mu.clientY),e!==t);)t=e;if(St.parentNode[Sl]._isOutsideThisEl(e),t)do{if(t[Sl]){var r=void 0;if(r=t[Sl]._onDragOver({clientX:Mu.clientX,clientY:Mu.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Y_e()}},_onTouchMove:function(e){if(im){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=Gi&&uy(Gi,!0),a=Gi&&o&&o.a,l=Gi&&o&&o.d,u=KE&&Ko&&Afe(Ko),c=(s.clientX-im.clientX+n.x)/(a||1)+(u?u[0]-Xk[0]:0)/(a||1),h=(s.clientY-im.clientY+n.y)/(l||1)+(u?u[1]-Xk[1]:0)/(l||1);if(!Li.active&&!S0){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Gi){o?(o.e+=c-(Wk||0),o.f+=h-(Yk||0)):o={a:1,b:0,c:0,d:1,e:c,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Mi(Gi,"webkitTransform",d),Mi(Gi,"mozTransform",d),Mi(Gi,"msTransform",d),Mi(Gi,"transform",d),Wk=c,Yk=h,Mu=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Gi){var e=this.options.fallbackOnBody?document.body:Xn,t=Fs(St,!0,KE,!0,e),r=this.options;if(KE){for(Ko=e;Mi(Ko,"position")==="static"&&Mi(Ko,"transform")==="none"&&Ko!==document;)Ko=Ko.parentNode;Ko!==document.body&&Ko!==document.documentElement?(Ko===document&&(Ko=$c()),t.top+=Ko.scrollTop,t.left+=Ko.scrollLeft):Ko=$c(),Xk=Afe(Ko)}Gi=St.cloneNode(!0),gl(Gi,r.ghostClass,!1),gl(Gi,r.fallbackClass,!0),gl(Gi,r.dragClass,!0),Mi(Gi,"transition",""),Mi(Gi,"transform",""),Mi(Gi,"box-sizing","border-box"),Mi(Gi,"margin",0),Mi(Gi,"top",t.top),Mi(Gi,"left",t.left),Mi(Gi,"width",t.width),Mi(Gi,"height",t.height),Mi(Gi,"opacity","0.8"),Mi(Gi,"position",KE?"absolute":"fixed"),Mi(Gi,"zIndex","100000"),Mi(Gi,"pointerEvents","none"),Li.ghost=Gi,e.appendChild(Gi),Mi(Gi,"transform-origin",kfe/parseInt(Gi.style.width)*100+"% "+Dfe/parseInt(Gi.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,s=r.options;if(Ba("dragStart",this,{evt:e}),Li.eventCanceled){this._onDrop();return}Ba("setupClone",this),Li.eventCanceled||(is=U_e(St),is.removeAttribute("id"),is.draggable=!1,is.style["will-change"]="",this._hideClone(),gl(is,this.options.chosenClass,!1),Li.clone=is),r.cloneId=oS(function(){Ba("clone",r),!Li.eventCanceled&&(r.options.removeCloneOnHide||Xn.insertBefore(is,St),r._hideClone(),ba({sortable:r,name:"clone"}))}),!t&&gl(St,s.dragClass,!0),t?(rC=!0,r._loopId=setInterval(r._emulateDragOver,50)):(qr(document,"mouseup",r._onDrop),qr(document,"touchend",r._onDrop),qr(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,St)),sn(document,"drop",r),Mi(St,"transform","translateZ(0)")),S0=!0,r._dragStartId=oS(r._dragStarted.bind(r,t,e)),sn(document,"selectstart",r),Q1=!0,S_&&Mi(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,n,s,o,a=this.options,l=a.group,u=Li.active,c=XE===l,h=a.sort,d=Do||u,p,m=this,g=!1;if(qM)return;function v(J,ee){Ba(J,m,Vc({evt:e,isOwner:c,axis:p?"vertical":"horizontal",revert:o,dragRect:n,targetRect:s,canSort:h,fromSortable:d,target:r,completed:_,onMove:function(de,te){return JE(Xn,t,St,n,de,Fs(de),e,te)},changed:E},ee))}function b(){v("dragOverAnimationCapture"),m.captureAnimationState(),m!==d&&d.captureAnimationState()}function _(J){return v("dragOverCompleted",{insertion:J}),J&&(c?u._hideClone():u._showClone(m),m!==d&&(gl(St,Do?Do.options.ghostClass:u.options.ghostClass,!1),gl(St,a.ghostClass,!0)),Do!==m&&m!==Li.active?Do=m:m===Li.active&&Do&&(Do=null),d===m&&(m._ignoreWhileAnimating=r),m.animateAll(function(){v("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===St&&!St.animated||r===t&&!r.animated)&&(o0=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(St.parentNode[Sl]._isOutsideThisEl(e.target),!J&&rm(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function E(){yl=eu(St),mf=eu(St,a.draggable),ba({sortable:m,name:"change",toEl:t,newIndex:yl,newDraggableIndex:mf,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Pu(r,a.draggable,t,!0),v("dragOver"),Li.eventCanceled)return g;if(St.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||m._ignoreWhileAnimating===r)return _(!1);if(rC=!1,u&&!a.disabled&&(c?h||(o=ps!==Xn):Do===this||(this.lastPutMode=XE.checkPull(this,u,St,e))&&l.checkPut(this,u,St,e))){if(p=this._getDirection(e,r)==="vertical",n=Fs(St),v("dragOverValid"),Li.eventCanceled)return g;if(o)return ps=Xn,b(),this._hideClone(),v("revert"),Li.eventCanceled||(dm?Xn.insertBefore(St,dm):Xn.appendChild(St)),_(!0);var C=yI(t,a.draggable);if(!C||uWe(e,p,this)&&!C.animated){if(C===St)return _(!1);if(C&&t===e.target&&(r=C),r&&(s=Fs(r)),JE(Xn,t,St,n,r,s,e,!!r)!==!1)return b(),C&&C.nextSibling?t.insertBefore(St,C.nextSibling):t.appendChild(St),ps=t,E(),_(!0)}else if(C&&lWe(e,p,this)){var T=Iy(t,0,a,!0);if(T===St)return _(!1);if(r=T,s=Fs(r),JE(Xn,t,St,n,r,s,e,!1)!==!1)return b(),t.insertBefore(St,T),ps=t,E(),_(!0)}else if(r.parentNode===t){s=Fs(r);var D=0,M,A=St.parentNode!==t,I=!rWe(St.animated&&St.toRect||n,r.animated&&r.toRect||s,p),P=p?"top":"left",U=Tfe(r,"top","top")||Tfe(St,"top","top"),K=U?U.scrollTop:void 0;o0!==r&&(M=s[P],k_=!1,ZE=!I&&a.invertSwap||A),D=cWe(e,r,s,p,I?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,ZE,o0===r);var L;if(D!==0){var F=eu(St);do F-=D,L=ps.children[F];while(L&&(Mi(L,"display")==="none"||L===Gi))}if(D===0||L===r)return _(!1);o0=r,A_=D;var $=r.nextElementSibling,H=!1;H=D===1;var V=JE(Xn,t,St,n,r,s,e,H);if(V!==!1)return(V===1||V===-1)&&(H=V===1),qM=!0,setTimeout(aWe,30),b(),H&&!$?t.appendChild(St):r.parentNode.insertBefore(St,H?$:r),U&&z_e(U,0,K-U.scrollTop),ps=St.parentNode,M!==void 0&&!ZE&&(sS=Math.abs(M-Fs(r)[P])),E(),_(!0)}if(t.contains(St))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){qr(document,"mousemove",this._onTouchMove),qr(document,"touchmove",this._onTouchMove),qr(document,"pointermove",this._onTouchMove),qr(document,"dragover",rm),qr(document,"mousemove",rm),qr(document,"touchmove",rm)},_offUpEvents:function(){var e=this.el.ownerDocument;qr(e,"mouseup",this._onDrop),qr(e,"touchend",this._onDrop),qr(e,"pointerup",this._onDrop),qr(e,"touchcancel",this._onDrop),qr(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(yl=eu(St),mf=eu(St,r.draggable),Ba("drop",this,{evt:e}),ps=St&&St.parentNode,yl=eu(St),mf=eu(St,r.draggable),Li.eventCanceled){this._nulling();return}S0=!1,ZE=!1,k_=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),HM(this.cloneId),HM(this._dragStartId),this.nativeDraggable&&(qr(document,"drop",this),qr(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),S_&&Mi(document.body,"user-select",""),Mi(St,"transform",""),e&&(Q1&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Gi&&Gi.parentNode&&Gi.parentNode.removeChild(Gi),(Xn===ps||Do&&Do.lastPutMode!=="clone")&&is&&is.parentNode&&is.parentNode.removeChild(is),St&&(this.nativeDraggable&&qr(St,"dragend",this),Zk(St),St.style["will-change"]="",Q1&&!S0&&gl(St,Do?Do.options.ghostClass:this.options.ghostClass,!1),gl(St,this.options.chosenClass,!1),ba({sortable:this,name:"unchoose",toEl:ps,newIndex:null,newDraggableIndex:null,originalEvent:e}),Xn!==ps?(yl>=0&&(ba({rootEl:ps,name:"add",toEl:ps,fromEl:Xn,originalEvent:e}),ba({sortable:this,name:"remove",toEl:ps,originalEvent:e}),ba({rootEl:ps,name:"sort",toEl:ps,fromEl:Xn,originalEvent:e}),ba({sortable:this,name:"sort",toEl:ps,originalEvent:e})),Do&&Do.save()):yl!==G0&&yl>=0&&(ba({sortable:this,name:"update",toEl:ps,originalEvent:e}),ba({sortable:this,name:"sort",toEl:ps,originalEvent:e})),Li.active&&((yl==null||yl===-1)&&(yl=G0,mf=T_),ba({sortable:this,name:"end",toEl:ps,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ba("nulling",this),Xn=St=ps=Gi=dm=is=nS=bf=im=Mu=Q1=yl=mf=G0=T_=o0=A_=Do=XE=Li.dragged=Li.ghost=Li.clone=Li.active=null,sC.forEach(function(e){e.checked=!0}),sC.length=Wk=Yk=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":St&&(this._onDragOver(e),oWe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,n=0,s=r.length,o=this.options;n<s;n++)t=r[n],Pu(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||dWe(t));return e},sort:function(e,t){var r={},n=this.el;this.toArray().forEach(function(s,o){var a=n.children[o];Pu(a,this.options.draggable,n,!1)&&(r[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Pu(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var n=dw.modifyOption(this,e,t);typeof n<"u"?r[e]=n:r[e]=t,e==="group"&&V_e(r)},destroy:function(){Ba("destroy",this);var e=this.el;e[Sl]=null,qr(e,"mousedown",this._onTapStart),qr(e,"touchstart",this._onTapStart),qr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(qr(e,"dragover",this),qr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),nC.splice(nC.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!bf){if(Ba("hideClone",this),Li.eventCanceled)return;Mi(is,"display","none"),this.options.removeCloneOnHide&&is.parentNode&&is.parentNode.removeChild(is),bf=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(bf){if(Ba("showClone",this),Li.eventCanceled)return;St.parentNode==Xn&&!this.options.group.revertClone?Xn.insertBefore(is,St):dm?Xn.insertBefore(is,dm):Xn.appendChild(is),this.options.group.revertClone&&this.animate(St,is),Mi(is,"display",""),bf=!1}}};function oWe(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function JE(i,e,t,r,n,s,o,a){var l,u=i[Sl],c=u.options.onMove,h;return window.CustomEvent&&!bd&&!hw?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=i,l.dragged=t,l.draggedRect=r,l.related=n||e,l.relatedRect=s||Fs(e),l.willInsertAfter=a,l.originalEvent=o,i.dispatchEvent(l),c&&(h=c.call(u,l,o)),h}function Zk(i){i.draggable=!1}function aWe(){qM=!1}function lWe(i,e,t){var r=Fs(Iy(t.el,0,t.options,!0)),n=G_e(t.el,t.options,Gi),s=10;return e?i.clientX<n.left-s||i.clientY<r.top&&i.clientX<r.right:i.clientY<n.top-s||i.clientY<r.bottom&&i.clientX<r.left}function uWe(i,e,t){var r=Fs(yI(t.el,t.options.draggable)),n=G_e(t.el,t.options,Gi),s=10;return e?i.clientX>n.right+s||i.clientY>r.bottom&&i.clientX>r.left:i.clientY>n.bottom+s||i.clientX>r.right&&i.clientY>r.top}function cWe(i,e,t,r,n,s,o,a){var l=r?i.clientY:i.clientX,u=r?t.height:t.width,c=r?t.top:t.left,h=r?t.bottom:t.right,d=!1;if(!o){if(a&&sS<u*n){if(!k_&&(A_===1?l>c+u*s/2:l<h-u*s/2)&&(k_=!0),k_)d=!0;else if(A_===1?l<c+sS:l>h-sS)return-A_}else if(l>c+u*(1-n)/2&&l<h-u*(1-n)/2)return hWe(e)}return d=d||o,d&&(l<c+u*s/2||l>h-u*s/2)?l>c+u/2?1:-1:0}function hWe(i){return eu(St)<eu(i)?1:-1}function dWe(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function fWe(i){sC.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&sC.push(r)}}function oS(i){return setTimeout(i,0)}function HM(i){return clearTimeout(i)}ZT&&sn(document,"touchmove",function(i){(Li.active||S0)&&i.cancelable&&i.preventDefault()});Li.utils={on:sn,off:qr,css:Mi,find:B_e,is:function(e,t){return!!Pu(e,t,e,!1)},extend:XVe,throttle:j_e,closest:Pu,toggleClass:gl,clone:U_e,index:eu,nextTick:oS,cancelNextTick:HM,detectDirection:H_e,getChild:Iy};Li.get=function(i){return i[Sl]};Li.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Li.utils=Vc(Vc({},Li.utils),r.utils)),dw.mount(r)})};Li.create=function(i,e){return new Li(i,e)};Li.version=VVe;var Os=[],e_,VM,WM=!1,Kk,Jk,oC,t_;function pWe(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?sn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?sn(document,"pointermove",this._handleFallbackAutoScroll):r.touches?sn(document,"touchmove",this._handleFallbackAutoScroll):sn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?qr(document,"dragover",this._handleAutoScroll):(qr(document,"pointermove",this._handleFallbackAutoScroll),qr(document,"touchmove",this._handleFallbackAutoScroll),qr(document,"mousemove",this._handleFallbackAutoScroll)),Lfe(),aS(),ZVe()},nulling:function(){oC=VM=e_=WM=t_=Kk=Jk=null,Os.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var n=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(oC=t,r||this.options.forceAutoScrollFallback||hw||bd||S_){Qk(t,this.options,a,r);var l=Df(a,!0);WM&&(!t_||s!==Kk||o!==Jk)&&(t_&&Lfe(),t_=setInterval(function(){var u=Df(document.elementFromPoint(s,o),!0);u!==l&&(l=u,aS()),Qk(t,n.options,u,r)},10),Kk=s,Jk=o)}else{if(!this.options.bubbleScroll||Df(a,!0)===$c()){aS();return}Qk(t,this.options,Df(a,!1),!1)}}},ld(i,{pluginName:"scroll",initializeByDefault:!0})}function aS(){Os.forEach(function(i){clearInterval(i.pid)}),Os=[]}function Lfe(){clearInterval(t_)}var Qk=j_e(function(i,e,t,r){if(e.scroll){var n=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=$c(),u=!1,c;VM!==t&&(VM=t,aS(),e_=e.scroll,c=e.scrollFn,e_===!0&&(e_=Df(t,!0)));var h=0,d=e_;do{var p=d,m=Fs(p),g=m.top,v=m.bottom,b=m.left,_=m.right,E=m.width,C=m.height,T=void 0,D=void 0,M=p.scrollWidth,A=p.scrollHeight,I=Mi(p),P=p.scrollLeft,U=p.scrollTop;p===l?(T=E<M&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),D=C<A&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(T=E<M&&(I.overflowX==="auto"||I.overflowX==="scroll"),D=C<A&&(I.overflowY==="auto"||I.overflowY==="scroll"));var K=T&&(Math.abs(_-n)<=o&&P+E<M)-(Math.abs(b-n)<=o&&!!P),L=D&&(Math.abs(v-s)<=o&&U+C<A)-(Math.abs(g-s)<=o&&!!U);if(!Os[h])for(var F=0;F<=h;F++)Os[F]||(Os[F]={});(Os[h].vx!=K||Os[h].vy!=L||Os[h].el!==p)&&(Os[h].el=p,Os[h].vx=K,Os[h].vy=L,clearInterval(Os[h].pid),(K!=0||L!=0)&&(u=!0,Os[h].pid=setInterval((function(){r&&this.layer===0&&Li.active._onTouchMove(oC);var $=Os[this.layer].vy?Os[this.layer].vy*a:0,H=Os[this.layer].vx?Os[this.layer].vx*a:0;typeof c=="function"&&c.call(Li.dragged.parentNode[Sl],H,$,i,oC,Os[this.layer].el)!=="continue"||z_e(Os[this.layer].el,H,$)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Df(d,!1)));WM=u}},30),X_e=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=r||s;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(h)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function vI(){}vI.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=Iy(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:X_e};ld(vI,{pluginName:"revertOnSpill"});function bI(){}bI.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:X_e};ld(bI,{pluginName:"removeOnSpill"});Li.mount(new pWe);Li.mount(bI,vI);const mWe=i=>{const e=i.item;let t=Array.prototype.slice.call(e.parentNode.childNodes);return t=t.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),t},gWe=(i,e,t,r,n,s)=>{const a=i.item.parentNode;for(const g of t)a.appendChild(g);if(i.oldIndex==i.newIndex)return;const l=r.getArray(),u=i.item.querySelector("eox-layercontrol-layer").layer.get(n),c=l.find(g=>g.get(n)===u),h=s.dataset.layer,d=l.find(g=>g.get(n)==h);let p,m;for(p=0;p<l.length;p++)if(l[p]==c){r.removeAt(p);break}for(m=0;m<l.length;m++)if(l[m]===d){p>m?r.insertAt(m,c):r.insertAt(m+1,c);break}e.requestUpdate()};function yWe(i,e,t,r){let n=[],s=null;i._sortable=Li.create(i,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:o=>n=mWe(o),onMove:o=>{s=o.related},onEnd:o=>gWe(o,r,n,e,t,s)})}function vWe(i,e,t,r){const n=i.getArray();let s=!1;n.forEach(o=>{const a=o.ol_uid;o.get(e)||(o.set(e,a),s=!0),o.get(t)||(o.set(t,`layer ${a}`),s=!0),s&&r.requestUpdate()})}function _I(i,e,t){let r=[];const n=(s,o,a)=>{r=[...r,...s.filter(u=>u.get(o)===a)];const l=s.filter(u=>u.getLayers);return l.length>0&&l.forEach(u=>n(u.getLayers().getArray(),o,a)),r};return n(i,e,t),r}function bWe(i,e,t){if(!i||!e)return!1;if(!Z_e(i,t))return!0;const r=i.get("minZoom"),n=i.get("maxZoom"),s=e.getView().getZoom();return s>r&&s<n}function Z_e(i,e){const t=i.get("minZoom"),r=i.get("maxZoom");return!!(e&&(t!==-1/0||r!==1/0))}function _We(i,e){var n,s,o;return!i||!e?void 0:i.getLayers?"group":((o=(n=e.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:n.ol_uid)==null?void 0:o.includes(i.getSource?(s=i.getSource())==null?void 0:s.ol_uid:void 0))?"draw":i.declutter_!==void 0?"vector":"raster"}function K_e(i,e){var r;let t={};for(const n in i){const s=i[n].type;if(s&&s!=="object")t[n]=s==="number"?Number(e[n]):e[n];else if(typeof i[n]=="object"&&((r=i[n])!=null&&r.properties)){const o=K_e(i[n].properties,e);Object.keys(o).length>0&&(t[n]=o)}}return t}function xWe(i,e){var s;if(!e||!i.getSource().getTileUrlFunction())return null;const t=new URL(i.getSource().getTileUrlFunction()([0,0,0])),r=Object.fromEntries(t.searchParams.entries()),n=K_e(((s=e.schema)==null?void 0:s.properties)||e.schema,r);return Object.keys(n).length?n:null}const wWe=(i,e)=>i==null?void 0:i.filter(t=>["remove","sort"].filter(r=>e!=null&&e.get("layerControlDisable")?r!=="sort":!0).includes(t)),EWe=(i,e)=>i==null?void 0:i.filter(t=>{let r=!0;return["remove","sort"].includes(t)&&(r=!1),t==="info"&&(r=e.get("description")),t==="config"&&(r=e.get("layerConfig")),r}),SWe=(i,e)=>Qe`
  <button slot="${i}-icon" class="icon">${e?i:mr}</button>
`,CWe=i=>Qe`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:e}=i;e==null||e.set("layerControlOptional",!0),e==null||e.setVisible(!1),i.dispatchEvent(new CustomEvent("changed",{detail:e,bubbles:!0}))}}
  >
    ${i.unstyled?"x":mr}
  </button>
`,TWe=i=>Qe`
  <span class="button sort-icon icon drag-handle">
    ${i?"":mr}
  </span>
`,J_e=i=>{var t;const e=["layerControlHide","layerControlOptional"];return(t=i==null?void 0:i.getArray())==null?void 0:t.filter(r=>e.every(n=>!r.get(n)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Q_e=IT(class extends OT{constructor(i){if(super(i),i.type!==ff.PROPERTY&&i.type!==ff.ATTRIBUTE&&i.type!==ff.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!ODe(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[e]){if(e===O0||e===mr)return e;const t=i.element,r=i.name;if(i.type===ff.PROPERTY){if(e===t[r])return O0}else if(i.type===ff.BOOLEAN_ATTRIBUTE){if(!!e===t.hasAttribute(r))return O0}else if(i.type===ff.ATTRIBUTE&&t.getAttribute(r)===e+"")return O0;return WL(i),e}}),AWe=(i,e,t)=>{let r=e;return t.layer.getSource().getTileUrlFunction()&&(r||(r=t.layer.getSource().getTileUrlFunction()),t.layer.getSource().setTileUrlFunction((...n)=>UVe(r(...n),i)),t.layer.getSource().setKey(new Date)),r};var qx,Hx,Vx,QC,txe,eT,tT;class exe extends Lr{constructor(){super();ar(this,QC);ar(this,qx,{});ar(this,Hx,null);ar(this,Vx);ar(this,eT,"");ar(this,tT,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.debouncedDataChange=fv(Es(this,QC,txe),1e3,{leading:!0})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){ko(this,Hx,xWe(this.layer,this.layerConfig)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const t={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return Qe`
      <style>
        ${_i(this,eT)}
        ${!this.unstyled&&_i(this,tT)}
      </style>
      ${Pi(this.layerConfig,()=>Qe`
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${_i(this,Hx)}
            .options=${t}
            @change=${this.debouncedDataChange}
          ></eox-jsonform>
        `)}
    `}}qx=new WeakMap,Hx=new WeakMap,Vx=new WeakMap,QC=new WeakSet,txe=function(t){ko(this,qx,t.detail),ko(this,Vx,AWe(_i(this,qx),_i(this,Vx),this)),this.requestUpdate()},eT=new WeakMap,tT=new WeakMap,We(exe,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",exe);var Wx,iT,rT;class ixe extends Lr{constructor(){super();ar(this,Wx,t=>this.selectedTab===t&&"highlighted");ar(this,iT,`
    .tabbed figure {
      margin: 0;
    }
    .tabbed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div {
      display: flex;
    }
    .tabbed .tab {
      display: none;
    }
    .tabbed .tab.highlighted {
      display: block;
    }
    .tabbed label.highlighted {
      background: lightgrey;
    }
  `);ar(this,rT,`
    .tabbed {
      font-size: small;
    }
    .tabbed label.highlighted {
      background: #00417011;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: #00417011;
      border-top: 1px solid #0041701a;
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.tabs,r=this.actions,n=r.length+t.length>1;return Qe`
      <style>
        ${_i(this,iT)}
        ${!this.unstyled&&_i(this,rT)}
      </style>
      <div class="tabbed">
        <!-- Navigation for tabs and actions -->
        ${Pi(n,()=>Qe`
            <nav>
              <div>
                <!-- Labels for tabs -->
                ${Ka(t,(s,o)=>Qe`
                      <label
                        class=${_i(this,Wx).call(this,o)}
                        @click=${()=>this.selectedTab=o}
                      >
                        <!-- Customizable icon for each tab -->
                        <slot name=${`${s}-icon`}>${s}</slot>
                      </label>
                    `)}
              </div>
              <div>
                <!-- Icons for actions -->
                ${Ka(r,s=>Qe`
                      <span>
                        <!-- Customizable icon for each action -->
                        <slot name=${`${s}-icon`}>${s}</slot>
                      </span>
                    `)}
              </div>
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${Ka(t,(s,o)=>Qe`
              <div class="tab ${_i(this,Wx).call(this,o)}">
                <!-- Content slot for each tab -->
                <slot name=${`${s}-content`}>${s}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}Wx=new WeakMap,iT=new WeakMap,rT=new WeakMap,We(ixe,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-tabs",ixe);var nT,sT;class rxe extends Lr{constructor(){super();We(this,"_removeButton",()=>CWe(this));We(this,"_sortButton",()=>TWe(this.unstyled));We(this,"_button",t=>SWe(t,this.unstyled));ar(this,nT,"");ar(this,sT,`
    ${sg}  
    ${LR}
    ${$T}
    ${RR}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      display: flex;
      border-radius: 4px;
      cursor: pointer;
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tabs button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tabs button.icon {
      opacity: .7;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tabs button.icon:hover {
      opacity: 1;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
    }
    eox-layercontrol-tabs button.icon,
    eox-layercontrol-tabs .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tabs button.icon::before,
    eox-layercontrol-tabs .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content] {
      padding: 12px 6px;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const t=wWe(this.tools,this.layer),r=EWe(this.tools,this.layer),n=this[`_${t==null?void 0:t[0]}Button`]?this[`_${t==null?void 0:t[0]}Button`]():mr,s=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",o=t==null?void 0:t.length,a=r==null?void 0:r.length;return Qe`
      <style>
        ${_i(this,nT)}
        ${!this.unstyled&&_i(this,sT)}
      </style>
      ${Pi(o+a>0,()=>Qe`
          ${Pi(o===1&&a===0,()=>Qe`
              <div class="single-action-container">
                <div class="single-action">${n}</div>
              </div>
            `,()=>{var u;return Qe`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||mr}
              >
                <summary>
                  <button class="icon ${s}">Tools</button>
                </summary>
                <eox-layercontrol-tabs
                  .noShadow=${!1}
                  .actions=${t}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                >
                  <!-- Rendering tabs and content -->
                  ${Ka(r,c=>this._button(c))}

                  <div slot="info-content">
                    ${_c(this.layer.get("description"))}
                  </div>
                  <div slot="opacity-content">
                    <!-- Input for opacity -->
                    <input
                      type="range"
                      min="0"
                      max="1"
                      step="0.01"
                      value=${Q_e((u=this.layer)==null?void 0:u.getOpacity())}
                      @input=${c=>this.layer.setOpacity(parseFloat(c.target.value))}
                    />
                  </div>
                  <div slot="config-content">
                    <!-- Layer configuration -->
                    ${Pi(this.layer.get("layerConfig"),()=>Qe`
                        <eox-layercontrol-layerconfig
                          slot="config-content"
                          .layer=${this.layer}
                          .noShadow=${!0}
                          .layerConfig=${this.layer.get("layerConfig")}
                          .unstyled=${this.unstyled}
                          @changed=${()=>this.requestUpdate()}
                        ></eox-layercontrol-layerconfig>
                      `)}
                  </div>
                  <div slot="remove-icon">${this._removeButton()}</div>
                  <div slot="sort-icon">${this._sortButton()}</div>
                </eox-layercontrol-tabs>
              </details>
            `})}
        `)}
    `}}nT=new WeakMap,sT=new WeakMap,We(rxe,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",rxe);const kWe=i=>{const e=()=>{const t=bWe(i.layer,i.map,i.showLayerZoomState);let r=!1;!t&&i.currLayerVisibilityBasedOnZoom?(i.currLayerVisibilityBasedOnZoom=!1,r=!0):t&&!i.currLayerVisibilityBasedOnZoom&&(i.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(i.requestUpdate(),i.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};Z_e(i.layer,i.showLayerZoomState)&&(e(),i.map.getView().on("change:resolution",()=>e()))},DWe=(i,e)=>{const t=e.layer;t.setVisible(i.target.checked),i.target.checked&&t.get("layerControlExclusive")&&e.parentNode.parentNode.querySelectorAll("li > eox-layercontrol-layer").forEach(n=>{var s;n.layer!==t&&((s=n.layer)!=null&&s.get("layerControlExclusive"))&&(n.layer.setVisible(!1),n.requestUpdate())}),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:t})),e.requestUpdate()};var zf,lS,sxe,oT,aT;class nxe extends Lr{constructor(){super();ar(this,zf);We(this,"currLayerVisibilityBasedOnZoom",!0);ar(this,oT,"");ar(this,aT,`
    ${$T}
    eox-layercontrol-layer {
      width: 100%;
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){kWe(this)}render(){var l;const t=this.layer.getVisible(),r=t?"visible":"",n=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",s=Es(this,zf,lS).call(this,"layerControlDisable")?"disabled":"",o=Es(this,zf,lS).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return Qe`
      <style>
        ${_i(this,oT)}
        ${!this.unstyled&&_i(this,aT)}
      </style>
      ${Pi(this.layer,()=>Qe`
          <!-- Render the layer -->
          <div class="layer ${r} ${n}">
            <label class="drag-handle ${s}">
              <!-- Input element for layer visibility -->
              <input
                type=${o}
                .checked=${Q_e(t)}
                @click=${Es(this,zf,sxe)}
              />

              <!-- Layer title -->
              <span class="title">${Es(this,zf,lS).call(this,this.titleProperty)}</span>
              ${Pi(a,()=>Qe`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}zf=new WeakSet,lS=function(t){var r;return(r=this.layer)==null?void 0:r.get(t)},sxe=function(t){DWe(t,this)},oT=new WeakMap,aT=new WeakMap,We(nxe,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer",nxe);var lT,uT;class oxe extends Lr{constructor(){super();ar(this,lT,"");ar(this,uT,`
    details summary {
      cursor: pointer;
      display: flex;
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: block;
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var n,s;const t=!!((n=this.group)!=null&&n.get("layerControlExpand")),r=(s=J_e(this.group.getLayers()))==null?void 0:s.length;return Qe`
      <style>
        ${_i(this,lT)}
        ${!this.unstyled&&_i(this,uT)}
      </style>
      ${Pi(this.group,()=>Qe`
          <!-- Render the details element with the layer control -->
          <details
            open=${t||mr}
            data-children-length=${r}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}lT=new WeakMap,uT=new WeakMap,We(oxe,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",oxe);const MWe=i=>{const{layers:e,idProperty:t,titleProperty:r,renderRoot:n}=i,s=fv(()=>{i.requestUpdate(),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),o=()=>s();if(e&&(e.hasListener("change:length")&&(e==null||e.un("change:length",o)),e.on("change:length",o),e)){const a=n.querySelector("ul");vWe(e,t,r,i),yWe(a,e,t,i)}};var cT,hT;class axe extends Lr{constructor(){super();ar(this,cT,"");ar(this,hT,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: 48px;
    }
    li {
      list-style: none;
    }
    li {
      border-bottom: 1px solid #0041703a;
    }
    li:first-child {
      border-top: 1px solid #0041703a;
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1}firstUpdated(){MWe(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.layers?J_e(this.layers).reverse():[];return Qe`
      <style>
        ${_i(this,cT)}
        ${!this.unstyled&&_i(this,hT)}
      </style>
      <ul>
        ${Pi(this.layers,()=>Qe`
            ${kR(t,r=>r,r=>Qe`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${_We(r,this.map)}"
                >
                  ${r.getLayers?Qe`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:Qe`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}cT=new WeakMap,hT=new WeakMap,We(axe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",axe);const LWe=i=>{const e=i.querySelector("select[name=optional]"),t=e?e.value:null,r=_I(i.layers.getArray(),"layerControlOptional",!0).find(n=>(n.get(i.idProperty)||n.ol_uid)===t);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),i.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(n=>n.requestUpdate()),i.requestUpdate()};var dT,uxe;class lxe extends Lr{constructor(){super();ar(this,dT);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=_I(this.layers.getArray(),"layerControlOptional",!0);return Qe`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${t.map(r=>{const n=r.get(this.idProperty)||r.ol_uid,s=r.get(this.titleProperty),o=`layer ${r.get(this.idProperty)}`;return Qe` <option value="${n}">${s||o}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${Es(this,dT,uxe)}">add</button>
    `}}dT=new WeakSet,uxe=function(){LWe(this)},We(lxe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",lxe);const RWe=(i,e)=>{e.jsonInput=i.target.value,e.requestUpdate()},Rfe=i=>{const e=JSON.parse(`{"data":${P_e(i.jsonInput)}}`);Array.isArray(e.data)?e.data.forEach(t=>{i.eoxMap.addOrUpdateLayer(t)}):i.eoxMap.addOrUpdateLayer(e.data),i.jsonInput=null,i.requestUpdate()},IWe=(i,e)=>{e.urlInput=i.target.value,e.requestUpdate()};async function OWe(i){const e=i.urlInput;if(i.wmsCapabilities=null,i.searchLoad=!0,i.requestUpdate(),!e)return!1;if(gI(e)==="XYZ")return{Name:e};try{const t=await BVe(e);i.wmsCapabilities=t}catch{}finally{i.searchLoad=!1,i.requestUpdate()}return!1}const PWe=(i,e)=>{const{Name:t}=i,r=gI(e.urlInput)||"XYZ",n={type:"Tile",properties:{id:t,title:t},source:{type:r,url:e.urlInput,params:{LAYERS:t}}};e.jsonInput=JSON.stringify(n)},FWe=(i,e)=>{e.open=i||null,e.urlInput=null,e.jsonInput=null,e.wmsCapabilities=null,e.requestUpdate()};var No,hxe,dxe,YM,fxe,pxe,uS,fT,pT;class cxe extends Lr{constructor(){super();ar(this,No);We(this,"urlInput",null);We(this,"jsonInput",null);We(this,"open",null);We(this,"searchLoad",!1);We(this,"wmsCapabilities",null);ar(this,fT,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);ar(this,pT,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.open?"open":"close",r=this.open==="url",n=this.open==="json",s=!jVe(this.urlInput)||this.searchLoad?!0:mr;return Qe`
      <style>
        ${_i(this,fT)}
        ${!this.unstyled&&_i(this,pT)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${t}">
            <li
              @click=${()=>Es(this,No,uS).call(this,"url")}
              class="${r?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>Es(this,No,uS).call(this,"json")}
              class="${n?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>Es(this,No,uS).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${t}">
          ${r?Qe`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${Es(this,No,hxe)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${s} 
                  @click=${Es(this,No,dxe)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?Qe`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(o=>{const a=o.Name;return Qe`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>Es(this,No,YM).call(this,o)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:mr}
            `:Qe`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${Es(this,No,pxe)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${zVe(this.jsonInput)?mr:!0}
                  @click=${Es(this,No,fxe)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}No=new WeakSet,hxe=function(t){IWe(t,this)},dxe=async function(){const t=await OWe(this);t&&Es(this,No,YM).call(this,t)},YM=function(t){PWe(t,this),Rfe(this)},fxe=function(){Rfe(this)},pxe=function(t){RWe(t,this)},uS=function(t){FWe(t,this)},fT=new WeakMap,pT=new WeakMap,We(cxe,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",cxe);const NWe=(i,e)=>{if(e.requestUpdate(),i.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const t=e.renderRoot.querySelector("eox-layercontrol-optional-list");t==null||t.requestUpdate()}},$We=i=>{const e=i.for,t=document.querySelector(e);return t&&t.map!==i.map&&(i.map=t.map),t};var by,mT,gxe,gT;class mxe extends Lr{constructor(){super();ar(this,mT);ar(this,by);ar(this,gT,"* { font-family: Roboto, sans-serif; }");this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride=""}firstUpdated(){ko(this,by,$We(this))}render(){var n,s,o;const t=(n=this.map)==null?void 0:n.getLayers().getArray(),r=t&&((s=_I(t,"layerControlOptional",!0))==null?void 0:s.length)>0;return Qe`
      <style>
        ${!this.unstyled&&_i(this,gT)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${Pi(this.addExternalLayers&&((o=_i(this,by))==null?void 0:o.addOrUpdateLayer),()=>Qe`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${_i(this,by)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${Pi(this.map,()=>Qe`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            @changed=${Es(this,mT,gxe)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${Pi(r,()=>Qe`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}by=new WeakMap,mT=new WeakSet,gxe=function(t){NWe(t,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:t.detail}))},gT=new WeakMap,We(mxe,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String}});customElements.define("eox-layercontrol",mxe);class BWe extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(12, 1fr);
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(e,t,r){t!==r&&(this[e]=r),this.render()}}class jWe extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          background: lightgrey;
          border: 1px solid darkgrey;
          border-radius: 4px;
          padding: 4px 8px;
          overflow: hidden;


          grid-column: ${parseInt(this.getAttribute("x"))+1} / span ${this.getAttribute("w")};
          grid-row: ${parseInt(this.getAttribute("y"))+1} / span ${this.getAttribute("h")};
        }
      </style>
      <slot></slot>
    `}attributeChangedCallback(e,t,r){t!==r&&(this[e]=r),this.render()}}customElements.define("eox-layout",BWe);customElements.define("eox-layout-item",jWe);class ka{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function zWe(i){i.stopPropagation()}const Vm={PROPERTYCHANGE:"propertychange"};class fw{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function UWe(i,e,t){let r,n;t=t||Bc;let s=0,o=i.length,a=!1;for(;s<o;)r=s+(o-s>>1),n=+t(i[r],e),n<0?s=r+1:(o=r,a=!n);return a?s:~s}function Bc(i,e){return i>e?1:i<e?-1:0}function GWe(i,e){return i<e?1:i>e?-1:0}function KT(i,e,t){if(i[0]<=e)return 0;const r=i.length;if(e<=i[r-1])return r-1;if(typeof t=="function"){for(let n=1;n<r;++n){const s=i[n];if(s===e)return n;if(s<e)return t(e,i[n-1],s)>0?n-1:n}return r-1}if(t>0){for(let n=1;n<r;++n)if(i[n]<e)return n-1;return r-1}if(t<0){for(let n=1;n<r;++n)if(i[n]<=e)return n;return r-1}for(let n=1;n<r;++n){if(i[n]==e)return n;if(i[n]<e)return i[n-1]-e<e-i[n]?n-1:n}return r-1}function qWe(i,e,t){for(;e<t;){const r=i[e];i[e]=i[t],i[t]=r,++e,--t}}function Dr(i,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let n=0;n<r;n++)i[i.length]=t[n]}function th(i,e){const t=i.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(i[r]!==e[r])return!1;return!0}function HWe(i,e,t){const r=e||Bc;return i.every(function(n,s){if(s===0)return!0;const o=r(i[s-1],n);return!(o>0||t&&o===0)})}function Oy(){return!0}function _v(){return!1}function Py(){}function yxe(i){let e=!1,t,r,n;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==n||!th(s,r))&&(e=!0,n=this,r=s,t=i.apply(this,arguments)),t}}function xI(i){function e(){let t;try{t=i()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function xv(i){for(const e in i)delete i[e]}function ud(i){let e;for(e in i)return!1;return!e}class wv extends fw{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),n=r[e]||(r[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,n=this.listeners_&&this.listeners_[r];if(!n)return;const s=t?new ka(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let l;for(let u=0,c=n.length;u<c;++u)if("handleEvent"in n[u]?l=n[u].handleEvent(s):l=n[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[r]===0){let u=a[r];for(delete a[r];u--;)this.removeEventListener(r,Py);delete o[r]}return l}disposeInternal(){this.listeners_&&xv(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const n=r.indexOf(t);n!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[n]=Py,++this.pendingRemovals_[e]):(r.splice(n,1),r.length===0&&delete this.listeners_[e]))}}const Bt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ni(i,e,t,r,n){if(r&&r!==i&&(t=t.bind(r)),n){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function Fy(i,e,t,r){return Ni(i,e,t,r,!0)}function Zr(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),xv(i))}class pw extends wv{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Bt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Ni(this,e[s],t);return n}return Ni(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const n=e.length;r=new Array(n);for(let s=0;s<n;++s)r[s]=Fy(this,e[s],t)}else r=Fy(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)VWe(r);else if(Array.isArray(e))for(let n=0,s=e.length;n<s;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}pw.prototype.on;pw.prototype.once;pw.prototype.un;function VWe(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)Zr(i[e]);else Zr(i)}function ai(){throw new Error("Unimplemented abstract method.")}let WWe=0;function Nt(i){return i.ol_uid||(i.ol_uid=String(++WWe))}class Ife extends ka{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class mu extends pw{constructor(e){super(),this.on,this.once,this.un,Nt(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new Ife(r,e,t)),r=Vm.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new Ife(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const n=this.values_||(this.values_={});if(r)n[e]=t;else{const s=n[e];n[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],ud(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const na={ADD:"add",REMOVE:"remove"},Ofe={LENGTH:"length"};class QE extends ka{constructor(e,t,r){super(e),this.element=t,this.index=r}}let aa=class extends mu{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,n=this.array_.length;r<n;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,n=t.length;r<n;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Ofe.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new QE(na.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,n=t.length;r<n;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new QE(na.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new QE(na.REMOVE,n,e)),this.dispatchEvent(new QE(na.ADD,t,e))}updateLength_(){this.set(Ofe.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}};const nn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function Hi(i,e){if(!i)throw new Error(e)}function Ti(i,e,t){return Math.min(Math.max(i,e),t)}function vxe(i,e,t,r,n,s){const o=n-t,a=s-r;if(o!==0||a!==0){const l=((i-t)*o+(e-r)*a)/(o*o+a*a);l>1?(t=n,r=s):l>0&&(t+=o*l,r+=a*l)}return ed(i,e,t,r)}function ed(i,e,t,r){const n=t-i,s=r-e;return n*n+s*s}function YWe(i){const e=i.length;for(let r=0;r<e;r++){let n=r,s=Math.abs(i[r][r]);for(let a=r+1;a<e;a++){const l=Math.abs(i[a][r]);l>s&&(s=l,n=a)}if(s===0)return null;const o=i[n];i[n]=i[r],i[r]=o;for(let a=r+1;a<e;a++){const l=-i[a][r]/i[r][r];for(let u=r;u<e+1;u++)r==u?i[a][u]=0:i[a][u]+=l*i[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=i[r][e]/i[r][r];for(let n=r-1;n>=0;n--)i[n][e]-=i[n][r]*t[r]}return t}function Pfe(i){return i*180/Math.PI}function Gu(i){return i*Math.PI/180}function jc(i,e){const t=i%e;return t*e<0?t+e:t}function El(i,e,t){return i+t*(e-i)}function Ev(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function aC(i,e){return Math.round(Ev(i,e))}function q0(i,e){return Math.floor(Ev(i,e))}function Mf(i,e){return Math.ceil(Ev(i,e))}class bxe extends mu{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[nn.OPACITY]=e.opacity!==void 0?e.opacity:1,Hi(typeof t[nn.OPACITY]=="number","Layer opacity must be a number"),t[nn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[nn.Z_INDEX]=e.zIndex,t[nn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[nn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[nn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[nn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Ti(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ai()}getLayerStatesArray(e){return ai()}getExtent(){return this.get(nn.EXTENT)}getMaxResolution(){return this.get(nn.MAX_RESOLUTION)}getMinResolution(){return this.get(nn.MIN_RESOLUTION)}getMinZoom(){return this.get(nn.MIN_ZOOM)}getMaxZoom(){return this.get(nn.MAX_ZOOM)}getOpacity(){return this.get(nn.OPACITY)}getSourceState(){return ai()}getVisible(){return this.get(nn.VISIBLE)}getZIndex(){return this.get(nn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(nn.EXTENT,e)}setMaxResolution(e){this.set(nn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(nn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(nn.MAX_ZOOM,e)}setMinZoom(e){this.set(nn.MIN_ZOOM,e)}setOpacity(e){Hi(typeof e=="number","Layer opacity must be a number"),this.set(nn.OPACITY,e)}setVisible(e){this.set(nn.VISIBLE,e)}setZIndex(e){this.set(nn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Ws={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},pn={ANIMATING:0,INTERACTING:1},vl={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},_xe=42,Ny=256,XWe={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function Ffe(i){return XWe[i]}const $y={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class By{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||$y[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const mw=6378137,H0=Math.PI*mw,ZWe=[-H0,-H0,H0,H0],KWe=[-180,-85,180,85],e2=mw*Math.log(Math.tan(Math.PI/2));class a0 extends By{constructor(e){super({code:e,units:"m",extent:ZWe,global:!0,worldExtent:KWe,getPointResolution:function(t,r){return t/Math.cosh(r[1]/mw)}})}}const Nfe=[new a0("EPSG:3857"),new a0("EPSG:102100"),new a0("EPSG:102113"),new a0("EPSG:900913"),new a0("http://www.opengis.net/def/crs/EPSG/0/3857"),new a0("http://www.opengis.net/gml/srs/epsg.xml#3857")];function JWe(i,e,t){const r=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let n=0;n<r;n+=t){e[n]=H0*i[n]/180;let s=mw*Math.log(Math.tan(Math.PI*(+i[n+1]+90)/360));s>e2?s=e2:s<-e2&&(s=-e2),e[n+1]=s}return e}function QWe(i,e,t){const r=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let n=0;n<r;n+=t)e[n]=180*i[n]/H0,e[n+1]=360*Math.atan(Math.exp(i[n+1]/mw))/Math.PI-90;return e}const eYe=6378137,$fe=[-180,-90,180,90],tYe=Math.PI*eYe/180;class nm extends By{constructor(e,t){super({code:e,units:"degrees",extent:$fe,axisOrientation:t,global:!0,metersPerUnit:tYe,worldExtent:$fe})}}const Bfe=[new nm("CRS:84"),new nm("EPSG:4326","neu"),new nm("urn:ogc:def:crs:OGC:1.3:CRS84"),new nm("urn:ogc:def:crs:OGC:2:84"),new nm("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new nm("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new nm("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let XM={};function iYe(i){return XM[i]||XM[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function rYe(i,e){XM[i]=e}let cy={};function jy(i,e,t){const r=i.getCode(),n=e.getCode();r in cy||(cy[r]={}),cy[r][n]=t}function xxe(i,e){let t;return i in cy&&e in cy[i]&&(t=cy[i][e]),t}const uo={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Lo(i){const e=ha();for(let t=0,r=i.length;t<r;++t)D_(e,i[t]);return e}function nYe(i,e,t){const r=Math.min.apply(null,i),n=Math.min.apply(null,e),s=Math.max.apply(null,i),o=Math.max.apply(null,e);return cu(r,n,s,o,t)}function il(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function wxe(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function lg(i,e,t){let r,n;return e<i[0]?r=i[0]-e:i[2]<e?r=e-i[2]:r=0,t<i[1]?n=i[1]-t:i[3]<t?n=t-i[3]:n=0,r*r+n*n}function Al(i,e){return wI(i,e[0],e[1])}function Io(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function wI(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function ZM(i,e){const t=i[0],r=i[1],n=i[2],s=i[3],o=e[0],a=e[1];let l=uo.UNKNOWN;return o<t?l=l|uo.LEFT:o>n&&(l=l|uo.RIGHT),a<r?l=l|uo.BELOW:a>s&&(l=l|uo.ABOVE),l===uo.UNKNOWN&&(l=uo.INTERSECTING),l}function ha(){return[1/0,1/0,-1/0,-1/0]}function cu(i,e,t,r,n){return n?(n[0]=i,n[1]=e,n[2]=t,n[3]=r,n):[i,e,t,r]}function Sv(i){return cu(1/0,1/0,-1/0,-1/0,i)}function hy(i,e){const t=i[0],r=i[1];return cu(t,r,t,r,e)}function EI(i,e,t,r,n){const s=Sv(n);return Sxe(s,i,e,t,r)}function hu(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function sYe(i,e,t){return Math.abs(i[0]-e[0])<t&&Math.abs(i[2]-e[2])<t&&Math.abs(i[1]-e[1])<t&&Math.abs(i[3]-e[3])<t}function Exe(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function D_(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function Sxe(i,e,t,r,n){for(;t<r;t+=n)oYe(i,e[t],e[t+1]);return i}function oYe(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function SI(i,e){let t;return t=e(Wm(i)),t||(t=e(Cv(i)),t)||(t=e(Tv(i)),t)||(t=e(ec(i)),t)?t:!1}function lx(i){let e=0;return ih(i)||(e=wi(i)*Sn(i)),e}function Wm(i){return[i[0],i[1]]}function Cv(i){return[i[2],i[1]]}function fo(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function aYe(i,e){let t;if(e==="bottom-left")t=Wm(i);else if(e==="bottom-right")t=Cv(i);else if(e==="top-left")t=ec(i);else if(e==="top-right")t=Tv(i);else throw new Error("Invalid corner");return t}function ux(i,e,t,r,n){const[s,o,a,l,u,c,h,d]=KM(i,e,t,r);return cu(Math.min(s,a,u,h),Math.min(o,l,c,d),Math.max(s,a,u,h),Math.max(o,l,c,d),n)}function KM(i,e,t,r){const n=e*r[0]/2,s=e*r[1]/2,o=Math.cos(t),a=Math.sin(t),l=n*o,u=n*a,c=s*o,h=s*a,d=i[0],p=i[1];return[d-l+h,p-u-c,d-l-h,p-u+c,d+l-h,p+u+c,d+l+h,p+u-c,d-l+h,p-u-c]}function Sn(i){return i[3]-i[1]}function Bs(i,e,t){const r=t||ha();return Cn(i,e)?(i[0]>e[0]?r[0]=i[0]:r[0]=e[0],i[1]>e[1]?r[1]=i[1]:r[1]=e[1],i[2]<e[2]?r[2]=i[2]:r[2]=e[2],i[3]<e[3]?r[3]=i[3]:r[3]=e[3]):Sv(r),r}function ec(i){return[i[0],i[3]]}function Tv(i){return[i[2],i[3]]}function wi(i){return i[2]-i[0]}function Cn(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function ih(i){return i[2]<i[0]||i[3]<i[1]}function lYe(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function CI(i,e){const t=(i[2]-i[0])/2*(e-1),r=(i[3]-i[1])/2*(e-1);i[0]-=t,i[2]+=t,i[1]-=r,i[3]+=r}function uYe(i,e,t){let r=!1;const n=ZM(i,e),s=ZM(i,t);if(n===uo.INTERSECTING||s===uo.INTERSECTING)r=!0;else{const o=i[0],a=i[1],l=i[2],u=i[3],c=e[0],h=e[1],d=t[0],p=t[1],m=(p-h)/(d-c);let g,v;s&uo.ABOVE&&!(n&uo.ABOVE)&&(g=d-(p-u)/m,r=g>=o&&g<=l),!r&&s&uo.RIGHT&&!(n&uo.RIGHT)&&(v=p-(d-l)*m,r=v>=a&&v<=u),!r&&s&uo.BELOW&&!(n&uo.BELOW)&&(g=d-(p-a)/m,r=g>=o&&g<=l),!r&&s&uo.LEFT&&!(n&uo.LEFT)&&(v=p-(d-o)*m,r=v>=a&&v<=u)}return r}function zy(i,e,t,r){if(ih(i))return Sv(t);let n=[];if(r>1){const a=i[2]-i[0],l=i[3]-i[1];for(let u=0;u<r;++u)n.push(i[0]+a*u/r,i[1],i[2],i[1]+l*u/r,i[2]-a*u/r,i[3],i[0],i[3]-l*u/r)}else n=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];e(n,n,2);const s=[],o=[];for(let a=0,l=n.length;a<l;a+=2)s.push(n[a]),o.push(n[a+1]);return nYe(s,o,t)}function TI(i,e){const t=e.getExtent(),r=fo(i);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const n=wi(t),o=Math.floor((r[0]-t[0])/n)*n;i[0]-=o,i[2]-=o}return i}function AI(i,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[r[0],i[1],r[2],i[3]]];TI(i,e);const n=wi(r);if(wi(i)>n&&!t)return[[r[0],i[1],r[2],i[3]]];if(i[0]<r[0])return[[i[0]+n,i[1],r[2],i[3]],[r[0],i[1],i[2],i[3]]];if(i[2]>r[2])return[[i[0],i[1],r[2],i[3]],[r[0],i[1],i[2]-n,i[3]]]}return[i]}function gm(i,e,t){const r=t!==void 0?i.toFixed(t):""+i;let n=r.indexOf(".");return n=n===-1?r.length:n,n>e?r:new Array(1+e-n).join("0")+r}function kI(i,e){const t=(""+i).split("."),r=(""+e).split(".");for(let n=0;n<Math.max(t.length,r.length);n++){const s=parseInt(t[n]||"0",10),o=parseInt(r[n]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function Cxe(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function Txe(i,e){const t=i[0],r=i[1],n=e[0],s=e[1],o=n[0],a=n[1],l=s[0],u=s[1],c=l-o,h=u-a,d=c===0&&h===0?0:(c*(t-o)+h*(r-a))/(c*c+h*h||0);let p,m;return d<=0?(p=o,m=a):d>=1?(p=l,m=u):(p=o+d*c,m=a+d*h),[p,m]}function jfe(i,e,t){const r=jc(e+180,360)-180,n=Math.abs(3600*r),s=t||0;let o=Math.floor(n/3600),a=Math.floor((n-o*3600)/60),l=Ev(n-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let u=o+"";return(a!==0||l!==0)&&(u+=" "+gm(a,2)+""),l!==0&&(u+=" "+gm(l,2,s)+""),r!==0&&(u+=" "+i.charAt(r<0?1:0)),u}function tu(i,e){let t=!0;for(let r=i.length-1;r>=0;--r)if(i[r]!=e[r]){t=!1;break}return t}function DI(i,e){const t=Math.cos(e),r=Math.sin(e),n=i[0]*t-i[1]*r,s=i[1]*t+i[0]*r;return i[0]=n,i[1]=s,i}function Axe(i,e){return i[0]*=e,i[1]*=e,i}function Uy(i,e){const t=i[0]-e[0],r=i[1]-e[1];return t*t+r*r}function lC(i,e){return Math.sqrt(Uy(i,e))}function cYe(i,e){return Uy(i,Txe(i,e))}function JT(i,e){if(e.canWrapX()){const t=wi(e.getExtent()),r=kxe(i,e,t);r&&(i[0]-=r*t)}return i}function kxe(i,e,t){const r=e.getExtent();let n=0;return e.canWrapX()&&(i[0]<r[0]||i[0]>r[2])&&(t=t||wi(r),n=Math.floor((i[0]-r[0])/t)),n}const QT=63710088e-1;function JM(i,e,t){t=t||QT;const r=Gu(i[1]),n=Gu(e[1]),s=(n-r)/2,o=Gu(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(n);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function eD(i,e){let t=0;for(let r=0,n=i.length;r<n-1;++r)t+=JM(i[r],i[r+1],e);return t}function Dxe(i,e){e=e||{};const t=e.radius||QT,r=e.projection||"EPSG:3857",n=i.getType();n!=="GeometryCollection"&&(i=i.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,u,c,h;switch(n){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=i.getCoordinates(),s=eD(o,t);break}case"MultiLineString":case"Polygon":{for(o=i.getCoordinates(),l=0,u=o.length;l<u;++l)s+=eD(o[l],t);break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,u=o.length;l<u;++l)for(a=o[l],c=0,h=a.length;c<h;++c)s+=eD(a[c],t);break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,u=d.length;l<u;++l)s+=Dxe(d[l],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function t2(i,e){let t=0;const r=i.length;let n=i[r-1][0],s=i[r-1][1];for(let o=0;o<r;o++){const a=i[o][0],l=i[o][1];t+=Gu(a-n)*(2+Math.sin(Gu(s))+Math.sin(Gu(l))),n=a,s=l}return t*e*e/2}function Mxe(i,e){e=e||{};const t=e.radius||QT,r=e.projection||"EPSG:3857",n=i.getType();n!=="GeometryCollection"&&(i=i.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,u,c,h;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=i.getCoordinates(),s=Math.abs(t2(o[0],t)),l=1,u=o.length;l<u;++l)s-=Math.abs(t2(o[l],t));break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,u=o.length;l<u;++l)for(a=o[l],s+=Math.abs(t2(a[0],t)),c=1,h=a.length;c<h;++c)s-=Math.abs(t2(a[c],t));break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,u=d.length;l<u;++l)s+=Mxe(d[l],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function hYe(i,e,t,r){r=r||QT;const n=Gu(i[1]),s=Gu(i[0]),o=e/r,a=Math.asin(Math.sin(n)*Math.cos(o)+Math.cos(n)*Math.sin(o)*Math.cos(t)),l=s+Math.atan2(Math.sin(t)*Math.sin(o)*Math.cos(n),Math.cos(o)-Math.sin(n)*Math.sin(a));return[Pfe(l),Pfe(a)]}function Lxe(...i){console.warn(...i)}function cx(...i){console.error(...i)}let QM=!0;function Rxe(i){QM=!(i===void 0?!0:i)}function MI(i,e){if(e!==void 0){for(let t=0,r=i.length;t<r;++t)e[t]=i[t];e=e}else e=i.slice();return e}function eA(i,e){if(e!==void 0&&i!==e){for(let t=0,r=i.length;t<r;++t)e[t]=i[t];i=e}return i}function Ixe(i){rYe(i.getCode(),i),jy(i,i,MI)}function dYe(i){i.forEach(Ixe)}function At(i){return typeof i=="string"?iYe(i):i||null}function Gy(i,e,t,r){i=At(i);let n;const s=i.getPointResolutionFunc();if(s){if(n=s(e,t),r&&r!==i.getUnits()){const o=i.getMetersPerUnit();o&&(n=n*o/$y[r])}}else{const o=i.getUnits();if(o=="degrees"&&!r||r=="degrees")n=e;else{const a=_d(i,At("EPSG:4326"));if(a===eA&&o!=="degrees")n=e*i.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const c=JM(u.slice(0,2),u.slice(2,4)),h=JM(u.slice(4,6),u.slice(6,8));n=(c+h)/2}const l=r?$y[r]:i.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function eL(i){dYe(i),i.forEach(function(e){i.forEach(function(t){e!==t&&jy(e,t,MI)})})}function fYe(i,e,t,r){i.forEach(function(n){e.forEach(function(s){jy(n,s,t),jy(s,n,r)})})}function LI(i,e){return i?typeof i=="string"?At(i):i:At(e)}function zfe(i){return function(e,t,r){const n=e.length;r=r!==void 0?r:2,t=t!==void 0?t:new Array(n);for(let s=0;s<n;s+=r){const o=i(e.slice(s,s+r)),a=o.length;for(let l=0,u=r;l<u;++l)t[s+l]=l>=a?e[s+l]:o[l]}return t}}function pYe(i,e,t,r){const n=At(i),s=At(e);jy(n,s,zfe(t)),jy(s,n,zfe(r))}function mYe(i,e){return Rxe(),Av(i,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Ufe(i,e){const t=Av(i,e!==void 0?e:"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=jc(r+180,360)-180),t}function Ro(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||_d(i,e)===MI)&&t}function _d(i,e){const t=i.getCode(),r=e.getCode();let n=xxe(t,r);return n||(n=eA),n}function Wc(i,e){const t=At(i),r=At(e);return _d(t,r)}function Av(i,e,t){return Wc(e,t)(i,void 0,i.length)}function RI(i,e,t,r){const n=Wc(e,t);return zy(i,n,void 0,r)}let gYe=null;function yYe(){return gYe}function Ym(i,e){return i}function gs(i,e){return QM&&!tu(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(QM=!1,Lxe("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function gw(i,e){return i}function kl(i,e){return i}function Gfe(i,e,t){return function(r){let n,s;if(i.canWrapX()){const o=i.getExtent(),a=wi(o);r=r.slice(0),s=kxe(r,i,a),s&&(r[0]=r[0]-s*a),r[0]=Ti(r[0],o[0],o[2]),r[1]=Ti(r[1],o[1],o[3]),n=t(r)}else n=t(r);return s&&e.canWrapX()&&(n[0]+=s*wi(e.getExtent())),n}}function vYe(){eL(Nfe),eL(Bfe),fYe(Bfe,Nfe,JWe,QWe)}vYe();function qfe(i,e,t){return function(r,n,s,o,a){if(!r)return;if(!n&&!e)return r;const l=e?0:s[0]*n,u=e?0:s[1]*n,c=a?a[0]:0,h=a?a[1]:0;let d=i[0]+l/2+c,p=i[2]-l/2+c,m=i[1]+u/2+h,g=i[3]-u/2+h;d>p&&(d=(p+d)/2,p=d),m>g&&(m=(g+m)/2,g=m);let v=Ti(r[0],d,p),b=Ti(r[1],m,g);if(o&&t&&n){const _=30*n;v+=-_*Math.log(1+Math.max(0,d-r[0])/_)+_*Math.log(1+Math.max(0,r[0]-p)/_),b+=-_*Math.log(1+Math.max(0,m-r[1])/_)+_*Math.log(1+Math.max(0,r[1]-g)/_)}return[v,b]}}function bYe(i){return i}function II(i,e,t,r){const n=wi(e)/t[0],s=Sn(e)/t[1];return r?Math.min(i,Math.max(n,s)):Math.min(i,Math.min(n,s))}function OI(i,e,t){let r=Math.min(i,e);const n=50;return r*=Math.log(1+n*Math.max(0,i/e-1))/n+1,t&&(r=Math.max(r,t),r/=Math.log(1+n*Math.max(0,t/i-1))/n+1),Ti(r,t/2,e*2)}function _Ye(i,e,t,r){return e=e!==void 0?e:!0,function(n,s,o,a){if(n!==void 0){const l=i[0],u=i[i.length-1],c=t?II(l,t,o,r):l;if(a)return e?OI(n,c,u):Ti(n,u,c);const h=Math.min(c,n),d=Math.floor(KT(i,h,s));return i[d]>c&&d<i.length-1?i[d+1]:i[d]}}}function xYe(i,e,t,r,n,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(o,a,l,u){if(o!==void 0){const c=n?II(e,n,l,s):e;if(u)return r?OI(o,c,t):Ti(o,t,c);const h=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(i)-h),p=-a*(.5-h)+.5,m=Math.min(c,o),g=Math.floor(Math.log(e/m)/Math.log(i)+p),v=Math.max(d,g),b=e/Math.pow(i,v);return Ti(b,t,c)}}}function Hfe(i,e,t,r,n){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const u=r?II(i,r,a,n):i;return!t||!l?Ti(s,e,u):OI(s,u,e)}}}function PI(i){if(i!==void 0)return 0}function Vfe(i){if(i!==void 0)return i}function wYe(i){const e=2*Math.PI/i;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function EYe(i){const e=i===void 0?Gu(5):i;return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}function Oxe(i){return Math.pow(i,3)}function ug(i){return 1-Oxe(1-i)}function SYe(i){return 3*i*i-2*i*i*i}function CYe(i){return i}const FI=new Array(6);function ss(){return[1,0,0,1,0,0]}function tL(i){return tA(i,1,0,0,1,0,0)}function kv(i,e){const t=i[0],r=i[1],n=i[2],s=i[3],o=i[4],a=i[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],p=e[5];return i[0]=t*l+n*u,i[1]=r*l+s*u,i[2]=t*c+n*h,i[3]=r*c+s*h,i[4]=t*d+n*p+o,i[5]=r*d+s*p+a,i}function tA(i,e,t,r,n,s,o){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i[4]=s,i[5]=o,i}function TYe(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Zn(i,e){const t=e[0],r=e[1];return e[0]=i[0]*t+i[2]*r+i[4],e[1]=i[1]*t+i[3]*r+i[5],e}function AYe(i,e){const t=Math.cos(e),r=Math.sin(e);return kv(i,tA(FI,t,r,-r,t,0,0))}function M_(i,e,t){return kv(i,tA(FI,e,0,0,t,0,0))}function NI(i,e,t){return kv(i,tA(FI,1,0,0,1,e,t))}function Pl(i,e,t,r,n,s,o,a){const l=Math.sin(s),u=Math.cos(s);return i[0]=r*u,i[1]=n*l,i[2]=-r*l,i[3]=n*u,i[4]=o*r*u-a*r*l+e,i[5]=o*n*l+a*n*u+t,i}function $I(i,e){const t=kYe(e);Hi(t!==0,"Transformation matrix cannot be inverted");const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-n/t,i[2]=-s/t,i[3]=r/t,i[4]=(s*l-o*a)/t,i[5]=-(r*l-n*a)/t,i}function kYe(i){return i[0]*i[3]-i[1]*i[2]}const Wfe=[1e6,1e6,1e6,1e6,2,2];function DYe(i){return"matrix("+i.map((t,r)=>Math.round(t*Wfe[r])/Wfe[r]).join(", ")+")"}function $f(i,e,t,r,n,s){s=s||[];let o=0;for(let a=e;a<t;a+=r){const l=i[a],u=i[a+1];s[o++]=n[0]*l+n[2]*u+n[4],s[o++]=n[1]*l+n[3]*u+n[5]}return s&&s.length!=o&&(s.length=o),s}function BI(i,e,t,r,n,s,o){o=o||[];const a=Math.cos(n),l=Math.sin(n),u=s[0],c=s[1];let h=0;for(let d=e;d<t;d+=r){const p=i[d]-u,m=i[d+1]-c;o[h++]=u+p*a-m*l,o[h++]=c+p*l+m*a;for(let g=d+2;g<d+r;++g)o[h++]=i[g]}return o&&o.length!=h&&(o.length=h),o}function MYe(i,e,t,r,n,s,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let h=e;h<t;h+=r){const d=i[h]-l,p=i[h+1]-u;a[c++]=l+n*d,a[c++]=u+s*p;for(let m=h+2;m<h+r;++m)a[c++]=i[m]}return a&&a.length!=c&&(a.length=c),a}function LYe(i,e,t,r,n,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=r){o[a++]=i[l]+n,o[a++]=i[l+1]+s;for(let u=l+2;u<l+r;++u)o[a++]=i[u]}return o&&o.length!=a&&(o.length=a),o}const Yfe=ss();class jI extends mu{constructor(){super(),this.extent_=ha(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=yxe((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ai()}closestPointXY(e,t,r,n){return ai()}containsXY(e,t){const r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ai()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Sv(t),this.extentRevision_=this.getRevision()}return lYe(this.extent_,e)}rotate(e,t){ai()}scale(e,t,r){ai()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ai()}getType(){return ai()}applyTransform(e){ai()}intersectsExtent(e){return ai()}translate(e,t){ai()}transform(e,t){const r=At(e),n=r.getUnits()=="tile-pixels"?function(s,o,a){const l=r.getExtent(),u=r.getWorldExtent(),c=Sn(u)/Sn(l);return Pl(Yfe,u[0],u[3],c,-c,0,0,0),$f(s,0,s.length,a,Yfe,o),Wc(r,t)(s,o,a)}:Wc(r,t);return this.applyTransform(n),this}}class RYe extends jI{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return EI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ai()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=hx(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ai()}setLayout(e,t,r){let n;if(e)n=hx(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}n=t.length,e=cg(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const n=this.getStride();BI(r,0,r.length,n,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=fo(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();MYe(n,0,n.length,s,e,t,r,n),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const n=this.getStride();LYe(r,0,r.length,n,e,t,r),this.changed()}}}function cg(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function hx(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function IYe(i,e,t){const r=i.getFlatCoordinates();if(!r)return null;const n=i.getStride();return $f(r,0,r.length,n,e,t)}const Yc=RYe;function Xfe(i,e,t,r,n,s,o){const a=i[e],l=i[e+1],u=i[t]-a,c=i[t+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((n-a)*u+(s-l)*c)/(u*u+c*c);if(d>1)h=t;else if(d>0){for(let p=0;p<r;++p)o[p]=El(i[e+p],i[t+p],d);o.length=r;return}else h=e}for(let d=0;d<r;++d)o[d]=i[h+d];o.length=r}function zI(i,e,t,r,n){let s=i[e],o=i[e+1];for(e+=r;e<t;e+=r){const a=i[e],l=i[e+1],u=ed(s,o,a,l);u>n&&(n=u),s=a,o=l}return n}function UI(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];n=zI(i,e,a,r,n),e=a}return n}function OYe(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];n=UI(i,e,a,r,n),e=a[a.length-1]}return n}function GI(i,e,t,r,n,s,o,a,l,u,c){if(e==t)return u;let h,d;if(n===0){if(d=ed(o,a,i[e],i[e+1]),d<u){for(h=0;h<r;++h)l[h]=i[e+h];return l.length=r,d}return u}c=c||[NaN,NaN];let p=e+r;for(;p<t;)if(Xfe(i,p-r,p,r,o,a,c),d=ed(o,a,c[0],c[1]),d<u){for(u=d,h=0;h<r;++h)l[h]=c[h];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(d)-Math.sqrt(u))/n|0,1);if(s&&(Xfe(i,t-r,e,r,o,a,c),d=ed(o,a,c[0],c[1]),d<u)){for(u=d,h=0;h<r;++h)l[h]=c[h];l.length=r}return u}function qI(i,e,t,r,n,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const p=t[h];u=GI(i,e,p,r,n,s,o,a,l,u,c),e=p}return u}function PYe(i,e,t,r,n,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const p=t[h];u=qI(i,e,p,r,n,s,o,a,l,u,c),e=p[p.length-1]}return u}function Pxe(i,e,t,r){for(let n=0,s=t.length;n<s;++n)i[e++]=t[n];return e}function yw(i,e,t,r){for(let n=0,s=t.length;n<s;++n){const o=t[n];for(let a=0;a<r;++a)i[e++]=o[a]}return e}function vw(i,e,t,r,n){n=n||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=yw(i,e,t[o],r);n[s++]=l,e=l}return n.length=s,n}function Fxe(i,e,t,r,n){n=n||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=vw(i,e,t[o],r,n[s]);l.length===0&&(l[0]=e),n[s++]=l,e=l[l.length-1]}return n.length=s,n}function iA(i,e,t,r,n,s,o){const a=(t-e)/r;if(a<3){for(;e<t;e+=r)s[o++]=i[e],s[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,t-r];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let p=0;const m=i[d],g=i[d+1],v=i[h],b=i[h+1];for(let _=d+r;_<h;_+=r){const E=i[_],C=i[_+1],T=vxe(E,C,m,g,v,b);T>p&&(c=_,p=T)}p>n&&(l[(c-e)/r]=1,d+r<c&&u.push(d,c),c+r<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=i[e+h*r],s[o++]=i[e+h*r+1]);return o}function Nxe(i,e,t,r,n,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=iA(i,e,c,r,n,s,o),a.push(o),e=c}return o}function fm(i,e){return e*Math.round(i/e)}function FYe(i,e,t,r,n,s,o){if(e==t)return o;let a=fm(i[e],n),l=fm(i[e+1],n);e+=r,s[o++]=a,s[o++]=l;let u,c;do if(u=fm(i[e],n),c=fm(i[e+1],n),e+=r,e==t)return s[o++]=u,s[o++]=c,o;while(u==a&&c==l);for(;e<t;){const h=fm(i[e],n),d=fm(i[e+1],n);if(e+=r,h==u&&d==c)continue;const p=u-a,m=c-l,g=h-a,v=d-l;if(p*v==m*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(m<0&&v<m||m==v||m>0&&v>m)){u=h,c=d;continue}s[o++]=u,s[o++]=c,a=u,l=c,u=h,c=d}return s[o++]=u,s[o++]=c,o}function HI(i,e,t,r,n,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=FYe(i,e,c,r,n,s,o),a.push(o),e=c}return o}function NYe(i,e,t,r,n,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l],h=[];o=HI(i,e,c,r,n,s,o,h),a.push(h),e=c[c.length-1]}return o}function Yh(i,e,t,r,n){n=n!==void 0?n:[];let s=0;for(let o=e;o<t;o+=r)n[s++]=i.slice(o,o+r);return n.length=s,n}function dx(i,e,t,r,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];n[s++]=Yh(i,e,l,r,n[s]),e=l}return n.length=s,n}function iL(i,e,t,r,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];n[s++]=l.length===1&&l[0]===e?[]:dx(i,e,l,r,n[s]),e=l[l.length-1]}return n.length=s,n}function $xe(i,e,t,r){let n=0,s=i[t-r],o=i[t-r+1];for(;e<t;e+=r){const a=i[e],l=i[e+1];n+=o*a-s*l,s=a,o=l}return n/2}function Bxe(i,e,t,r){let n=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];n+=$xe(i,e,a,r),e=a}return n}function $Ye(i,e,t,r){let n=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];n+=Bxe(i,e,a,r),e=a[a.length-1]}return n}class Zf extends Yc{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Zf(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,n){return n<lg(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),GI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,n))}getArea(){return $xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=iA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Zf(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yw(this.flatCoordinates,0,e,this.stride),this.changed()}}class In extends Yc{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new In(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){const s=this.flatCoordinates,o=ed(e,t,s[0],s[1]);if(o<n){const a=this.stride;for(let l=0;l<a;++l)r[l]=s[l];return r.length=a,o}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return hy(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return wI(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pxe(this.flatCoordinates,0,e,this.stride),this.changed()}}function BYe(i,e,t,r,n){return!SI(n,function(o){return!bm(i,e,t,r,o[0],o[1])})}function bm(i,e,t,r,n,s){let o=0,a=i[t-r],l=i[t-r+1];for(;e<t;e+=r){const u=i[e],c=i[e+1];l<=s?c>s&&(u-a)*(s-l)-(n-a)*(c-l)>0&&o++:c<=s&&(u-a)*(s-l)-(n-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function VI(i,e,t,r,n,s){if(t.length===0||!bm(i,e,t[0],r,n,s))return!1;for(let o=1,a=t.length;o<a;++o)if(bm(i,t[o-1],t[o],r,n,s))return!1;return!0}function jYe(i,e,t,r,n,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(VI(i,e,l,r,n,s))return!0;e=l[l.length-1]}return!1}function WI(i,e,t,r,n,s,o){let a,l,u,c,h,d,p;const m=n[s+1],g=[];for(let _=0,E=t.length;_<E;++_){const C=t[_];for(c=i[C-r],d=i[C-r+1],a=e;a<C;a+=r)h=i[a],p=i[a+1],(m<=d&&p<=m||d<=m&&m<=p)&&(u=(m-d)/(p-d)*(h-c)+c,g.push(u)),c=h,d=p}let v=NaN,b=-1/0;for(g.sort(Bc),c=g[0],a=1,l=g.length;a<l;++a){h=g[a];const _=Math.abs(h-c);_>b&&(u=(c+h)/2,VI(i,e,t,r,u,m)&&(v=u,b=_)),c=h}return isNaN(v)&&(v=n[s]),o?(o.push(v,m,b),o):[v,m,b]}function jxe(i,e,t,r,n){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=WI(i,e,l,r,n,2*o,s),e=l[l.length-1]}return s}function zxe(i,e,t,r,n){let s;for(e+=r;e<t;e+=r)if(s=n(i.slice(e-r,e),i.slice(e,e+r)),s)return s;return!1}function rA(i,e,t,r,n){const s=Sxe(ha(),i,e,t,r);return Cn(n,s)?Io(n,s)||s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:zxe(i,e,t,r,function(o,a){return uYe(n,o,a)}):!1}function zYe(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){if(rA(i,e,t[s],r,n))return!0;e=t[s]}return!1}function Uxe(i,e,t,r,n){return!!(rA(i,e,t,r,n)||bm(i,e,t,r,n[0],n[1])||bm(i,e,t,r,n[0],n[3])||bm(i,e,t,r,n[2],n[1])||bm(i,e,t,r,n[2],n[3]))}function Gxe(i,e,t,r,n){if(!Uxe(i,e,t[0],r,n))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(BYe(i,t[s-1],t[s],r,n)&&!rA(i,t[s-1],t[s],r,n))return!1;return!0}function UYe(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(Gxe(i,e,a,r,n))return!0;e=a[a.length-1]}return!1}function GYe(i,e,t,r){for(;e<t-r;){for(let n=0;n<r;++n){const s=i[e+n];i[e+n]=i[t-r+n],i[t-r+n]=s}e+=r,t-=r}}function nA(i,e,t,r){let n=0,s=i[t-r],o=i[t-r+1];for(;e<t;e+=r){const a=i[e],l=i[e+1];n+=(a-s)*(l+o),s=a,o=l}return n===0?void 0:n>0}function YI(i,e,t,r,n){n=n!==void 0?n:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=nA(i,e,a,r);if(s===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;e=a}return!0}function qxe(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!YI(i,e,a,r,n))return!1;a.length&&(e=a[a.length-1])}return!0}function uC(i,e,t,r,n){n=n!==void 0?n:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=nA(i,e,a,r);(s===0?n&&l||!n&&!l:n&&!l||!n&&l)&&GYe(i,e,a,r),e=a}return e}function rL(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s)e=uC(i,e,t[s],r,n);return e}function Hxe(i,e){const t=[];let r=0,n=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=nA(i,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(n,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[n])}n=o+1,r=l}return t}class _s extends Yc{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Dr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new _s(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,n){return n<lg(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(UI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,n))}containsXY(e,t){return VI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Bxe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),uC(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,dx(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=fo(this.getExtent());this.flatInteriorPoint_=WI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new In(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Zf(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,n=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=new Zf(t.slice(s,l),e);n.push(u),s=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;YI(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=uC(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=HI(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new _s(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Gxe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=vw(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function qYe(i,e,t,r){t=t||32;const n=[];for(let s=0;s<t;++s)Dr(n,hYe(i,e,2*Math.PI*s/t,r));return n.push(n[0],n[1]),new _s(n,"XY",[n.length])}function cC(i){if(ih(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],r=i[2],n=i[3],s=[e,t,e,n,r,n,r,t,e,t];return new _s(s,"XY",[s.length])}const tD=0;class ru extends mu{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=LI(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Rxe(),e.center&&(e.center=gs(e.center,this.projection_)),e.extent&&(e.extent=kl(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in vl)delete t[a];this.setProperties(t,!0);const r=VYe(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const n=HYe(e),s=r.constraint,o=WYe(e);this.constraints_={center:n,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const n=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-t[3]+t[1]-n[1]),a=s/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let n=arguments[r];n.center&&(n=Object.assign({},n),n.center=gs(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=gs(n.anchor,this.getProjection())),t[r]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let n=0;for(;n<t&&!this.isDef();++n){const c=arguments[n];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(n===t){r&&i2(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;n<t;++n){const c=arguments[n],h={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||SYe,callback:r};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=jc(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}YYe(h)?h.complete=!0:s+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(pn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[pn.ANIMATING]>0}getInteracting(){return this.hints_[pn.INTERACTING]>0}cancelAnimations(){this.setHint(pn.ANIMATING,-this.hints_[pn.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const n=this.animations_[t];if(n[0].callback&&i2(n[0].callback,!1),!e)for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const n=this.animations_[r];let s=!0;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],p=l.sourceCenter[1],m=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;const v=d+h*(m-d),b=p+h*(g-p);this.targetCenter_=[v,b]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(m,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?jc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(pn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=n[0].callback;o&&i2(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const n=this.getCenterInternal();return n!==void 0&&(r=[n[0]-t[0],n[1]-t[1]],DI(r,e-this.getRotation()),Cxe(r,t)),r}calculateCenterZoom(e,t){let r;const n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-n[0])/s,a=t[1]-e*(t[1]-n[1])/s;r=[o,a]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],n=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Ym(e,this.getProjection())}getCenterInternal(){return this.get(vl.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return gw(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Hi(t,"The view center is not defined");const r=this.getResolution();Hi(r!==void 0,"The view resolution is not defined");const n=this.getRotation();return Hi(n!==void 0,"The view rotation is not defined"),ux(t,r,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(vl.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(kl(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=wi(e)/t[0],n=Sn(e)/t[1];return Math.max(r,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*n)}}getRotation(){return this.get(vl.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(r/n)/t;return function(o){return Math.log(r/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();n=iD(n,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,r)}return{center:n.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,n;if(this.resolutions_){const s=KT(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=r/this.resolutions_[s+1]}else r=this.maxResolution_,n=this.zoomFactor_;return t+Math.log(r/e)/Math.log(n)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Ti(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Ti(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(Hi(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Hi(!ih(e),"Cannot fit empty extent provided as `geometry`");const n=kl(e,this.getProjection());r=cC(n)}else if(e.getType()==="Circle"){const n=kl(e.getExtent(),this.getProjection());r=cC(n),r.rotate(this.getRotation(),fo(n))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),n=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=s.length;h<d;h+=o){const p=s[h]*r-s[h+1]*n,m=s[h]*n+s[h+1]*r;a=Math.min(a,p),l=Math.min(l,m),u=Math.max(u,p),c=Math.max(c,m)}return[a,l,u,c]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const n=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=fo(a);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;const p=d[0]*h-d[1]*c,m=d[1]*h+d[0]*c,g=this.getConstrainedCenter([p,m],l),v=t.callback?t.callback:Py;t.duration!==void 0?this.animateInternal({resolution:l,center:g,duration:t.duration,easing:t.easing},v):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),i2(v,!0))}centerOn(e,t,r){this.centerOnInternal(gs(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(iD(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,n){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),l=iD(e,n,[a[0]/2+o[3],a[1]/2+o[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Ym(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&gs(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,n,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=gs(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&gs(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,n,s));this.get(vl.ROTATION)!==n&&this.set(vl.ROTATION,n),this.get(vl.RESOLUTION)!==o&&(this.set(vl.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(vl.CENTER)||!tu(this.get(vl.CENTER),a))&&this.set(vl.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const n=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,n,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!tu(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:ug,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(pn.INTERACTING,1)}endInteraction(e,t,r){r=r&&gs(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(pn.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function i2(i,e){setTimeout(function(){i(e)},0)}function HYe(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return qfe(i.extent,i.constrainOnlyCenter,t)}const e=LI(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,qfe(t,!1,!1)}return bYe}function VYe(i){let e,t,r,o=i.minZoom!==void 0?i.minZoom:tD,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,u=i.multiWorld!==void 0?i.multiWorld:!1,c=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=LI(i.projection,"EPSG:3857"),p=d.getExtent();let m=i.constrainOnlyCenter,g=i.extent;if(!u&&!g&&d.isGlobal()&&(m=!1,g=p),i.resolutions!==void 0){const v=i.resolutions;t=v[o],r=v[a]!==void 0?v[a]:v[v.length-1],i.constrainResolution?e=_Ye(v,c,!m&&g,h):e=Hfe(t,r,c,!m&&g,h)}else{const b=(p?Math.max(wi(p),Sn(p)):360*$y.degrees/d.getMetersPerUnit())/Ny/Math.pow(2,tD),_=b/Math.pow(2,28-tD);t=i.maxResolution,t!==void 0?o=0:t=b/Math.pow(l,o),r=i.minResolution,r===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?r=t/Math.pow(l,a):r=b/Math.pow(l,a):r=_),a=o+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,a-o),i.constrainResolution?e=xYe(l,t,r,c,!m&&g,h):e=Hfe(t,r,c,!m&&g,h)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:o,zoomFactor:l}}function WYe(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?EYe():t===!1?Vfe:typeof t=="number"?wYe(t):Vfe}return PI}function YYe(i){return!(i.sourceCenter&&i.targetCenter&&!tu(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function iD(i,e,t,r,n){const s=Math.cos(-n);let o=Math.sin(-n),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,o=-o;const u=a*s-l*o,c=l*s+a*o;return[u,c]}class XYe extends bxe{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(nn.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(nn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Zr(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ni(e,Bt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof ru?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let n;t.layerStatesArray?n=t.layerStatesArray.find(o=>o.layer===this):n=this.getLayerState();const s=this.getExtent();return XI(n,t.viewState)&&(!s||Cn(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const r=this.getSource();if(r&&(t=r.getAttributions()),!t)return[];const n=e instanceof ru?e.getViewStateAndExtent():e;let s=t(n);return Array.isArray(s)||(s=[s]),s}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(nn.MAP,e)}getMapInternal(){return this.get(nn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Zr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Zr(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ni(e,Ws.PRECOMPOSE,function(t){const n=t.frameState.layerStatesArray,s=this.getLayerState(!1);Hi(!n.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(s)},this),this.mapRenderKey_=Ni(this,Bt.CHANGE,e.render,e),this.changed())}setSource(e){this.set(nn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function XI(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const r=e.zoom;return r>i.minZoom&&r<=i.maxZoom}const hg=XYe;function ZYe(i,e,t,r,n){Vxe(i,e,t||0,r||i.length-1,n||KYe)}function Vxe(i,e,t,r,n){for(;r>t;){if(r-t>600){var s=r-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),c=Math.max(t,Math.floor(e-o*l/s+u)),h=Math.min(r,Math.floor(e+(s-o)*l/s+u));Vxe(i,e,c,h,n)}var d=i[e],p=t,m=r;for(R1(i,t,e),n(i[r],d)>0&&R1(i,t,r);p<m;){for(R1(i,p,m),p++,m--;n(i[p],d)<0;)p++;for(;n(i[m],d)>0;)m--}n(i[t],d)===0?R1(i,t,m):(m++,R1(i,m,r)),m<=e&&(t=m+1),e<=m&&(r=m-1)}}function R1(i,e,t){var r=i[e];i[e]=i[t],i[t]=r}function KYe(i,e){return i<e?-1:i>e?1:0}let ZI=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!n2(e,t))return r;const n=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?n(a):a;n2(e,l)&&(t.leaf?r.push(a):nD(e,l)?this._all(a,r):s.push(a))}t=s.pop()}return r}collides(e){let t=this.data;if(!n2(e,t))return!1;const r=[];for(;t;){for(let n=0;n<t.children.length;n++){const s=t.children[n],o=t.leaf?this.toBBox(s):s;if(n2(e,o)){if(t.leaf||nD(e,o))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=C0([]),this}remove(e,t){if(!e)return this;let r=this.data;const n=this.toBBox(e),s=[],o=[];let a,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),u=!0),r.leaf){const c=JYe(e,r.children,t);if(c!==-1)return r.children.splice(c,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&nD(r,n)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,n){const s=r-t+1;let o=this._maxEntries,a;if(s<=o)return a=C0(e.slice(t,r+1)),l0(a,this.toBBox),a;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),a=C0([]),a.leaf=!1,a.height=n;const l=Math.ceil(s/o),u=l*Math.ceil(Math.sqrt(o));Zfe(e,t,r,u,this.compareMinX);for(let c=t;c<=r;c+=u){const h=Math.min(c+u-1,r);Zfe(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const p=Math.min(d+l-1,h);a.children.push(this._build(e,d,p,n-1))}}return l0(a,this.toBBox),a}_chooseSubtree(e,t,r,n){for(;n.push(t),!(t.leaf||n.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const u=t.children[l],c=rD(u),h=tXe(e,u)-c;h<o?(o=h,s=c<s?c:s,a=u):h===o&&c<s&&(s=c,a=u)}t=a||t.children[0]}return t}_insert(e,t,r){const n=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),r_(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)}_split(e,t){const r=e[t],n=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,n);const o=this._chooseSplitIndex(r,s,n),a=C0(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,l0(r,this.toBBox),l0(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,t){this.data=C0([e,t]),this.data.height=e.height+1,this.data.leaf=!1,l0(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let n,s=1/0,o=1/0;for(let a=t;a<=r-t;a++){const l=i_(e,0,a,this.toBBox),u=i_(e,a,r,this.toBBox),c=iXe(l,u),h=rD(l)+rD(u);c<s?(s=c,n=a,o=h<o?h:o):c===s&&h<o&&(o=h,n=a)}return n||r-t}_chooseSplitAxis(e,t,r){const n=e.leaf?this.compareMinX:QYe,s=e.leaf?this.compareMinY:eXe,o=this._allDistMargin(e,t,r,n),a=this._allDistMargin(e,t,r,s);o<a&&e.children.sort(n)}_allDistMargin(e,t,r,n){e.children.sort(n);const s=this.toBBox,o=i_(e,0,t,s),a=i_(e,r-t,r,s);let l=r2(o)+r2(a);for(let u=t;u<r-t;u++){const c=e.children[u];r_(o,e.leaf?s(c):c),l+=r2(o)}for(let u=r-t-1;u>=t;u--){const c=e.children[u];r_(a,e.leaf?s(c):c),l+=r2(a)}return l}_adjustParentBBoxes(e,t,r){for(let n=r;n>=0;n--)r_(t[n],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():l0(e[t],this.toBBox)}};function JYe(i,e,t){if(!t)return e.indexOf(i);for(let r=0;r<e.length;r++)if(t(i,e[r]))return r;return-1}function l0(i,e){i_(i,0,i.children.length,e,i)}function i_(i,e,t,r,n){n||(n=C0(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=e;s<t;s++){const o=i.children[s];r_(n,i.leaf?r(o):o)}return n}function r_(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function QYe(i,e){return i.minX-e.minX}function eXe(i,e){return i.minY-e.minY}function rD(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function r2(i){return i.maxX-i.minX+(i.maxY-i.minY)}function tXe(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function iXe(i,e){const t=Math.max(i.minX,e.minX),r=Math.max(i.minY,e.minY),n=Math.min(i.maxX,e.maxX),s=Math.min(i.maxY,e.maxY);return Math.max(0,n-t)*Math.max(0,s-r)}function nD(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function n2(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function C0(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Zfe(i,e,t,r,n){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const o=e+Math.ceil((t-e)/r/2)*r;ZYe(i,o,e,t,n),s.push(e,o,o,t)}}const $t={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Kfe(i){return i[0]>0&&i[1]>0}function Wxe(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function On(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class sA{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=On(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new sA({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ai()}getImage(e){return ai()}getHitDetectionImage(){return ai()}getPixelRatio(e){return 1}getImageState(){return ai()}getImageSize(){return ai()}getOrigin(){return ai()}getSize(){return ai()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=On(e)}listenImageChange(e){ai()}load(){ai()}unlistenImageChange(e){ai()}ready(){return Promise.resolve()}}const fx={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Oo={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Oo.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Oo.max=Oo.whitepoint[2].D65;Oo.rgb=function(i,e){e=e||Oo.whitepoint[2].E;var t=i[0]/e[0],r=i[1]/e[1],n=i[2]/e[2],s,o,a;return s=t*3.240969941904521+r*-1.537383177570093+n*-.498610760293,o=t*-.96924363628087+r*1.87596750150772+n*.041555057407175,a=t*.055630079696993+r*-.20397695888897+n*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};fx.xyz=function(i,e){var t=i[0]/255,r=i[1]/255,n=i[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var s=t*.41239079926595+r*.35758433938387+n*.18048078840183,o=t*.21263900587151+r*.71516867876775+n*.072192315360733,a=t*.019330818715591+r*.11919477979462+n*.95053215224966;return e=e||Oo.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const KI={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,t){var r,n,s,o,a,l,u,c,h,d,p,m,g;if(s=i[0],o=i[1],a=i[2],s===0)return[0,0,0];var v=.0011070564598794539;return e=e||"D65",t=t||2,h=Oo.whitepoint[t][e][0],d=Oo.whitepoint[t][e][1],p=Oo.whitepoint[t][e][2],m=4*h/(h+15*d+3*p),g=9*d/(h+15*d+3*p),r=o/(13*s)+m||0,n=a/(13*s)+g||0,u=s>8?d*Math.pow((s+16)/116,3):d*s*v,l=u*9*r/(4*n)||0,c=u*(12-3*r-20*n)/(4*n)||0,[l,u,c]}};Oo.luv=function(i,e,t){var r,n,s,o,a,l,u,c,h,d,p,m,g,v=.008856451679035631,b=903.2962962962961;e=e||"D65",t=t||2,h=Oo.whitepoint[t][e][0],d=Oo.whitepoint[t][e][1],p=Oo.whitepoint[t][e][2],m=4*h/(h+15*d+3*p),g=9*d/(h+15*d+3*p),l=i[0],u=i[1],c=i[2],r=4*l/(l+15*u+3*c)||0,n=9*u/(l+15*u+3*c)||0;var _=u/d;return s=_<=v?b*_:116*Math.pow(_,1/3)-16,o=13*s*(r-m),a=13*s*(n-g),[s,o,a]};var Yxe={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],t=i[1],r=i[2],n,s,o;return o=r/360*2*Math.PI,n=t*Math.cos(o),s=t*Math.sin(o),[e,n,s]},xyz:function(i){return KI.xyz(Yxe.luv(i))}};KI.lchuv=function(i){var e=i[0],t=i[1],r=i[2],n=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,n,o]};Oo.lchuv=function(i){return KI.lchuv(Oo.luv(i))};var Jfe={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function rXe(i){var c,h;var e,t=[],r=1,n;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),uue[i])t=uue[i].slice(),n="rgb";else if(i==="transparent")r=0,n="rgb",t=[0,0,0];else if(i[0]==="#"){var s=i.slice(1),o=s.length,a=o<=4;r=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var l=e[1];n=l.replace(/a$/,"");var u=n==="cmyk"?4:n==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),n==="color"&&(n=t.shift()),t=t.map(function(d,p){if(d[d.length-1]==="%")return d=parseFloat(d)/100,p===3?d:n==="rgb"?d*255:n[0]==="h"||n[0]==="l"&&!p?d*100:n==="lab"?d*125:n==="lch"?p<2?d*150:d*360:n[0]==="o"&&!p?d:n==="oklab"?d*.4:n==="oklch"?p<2?d*.4:d*360:d;if(n[p]==="h"||p===2&&n[n.length-1]==="h"){if(Jfe[d]!==void 0)return Jfe[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),r=t.length>u?t.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),n=((h=(c=i.match(/([a-z])/ig))==null?void 0:c.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:n,values:t,alpha:r}}const sD={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,t=i[1]/100,r=i[2]/100,n,s,o,a,l,u=0;if(t===0)return l=r*255,[l,l,l];for(s=r<.5?r*(1+t):r+t-r*t,n=2*r-s,a=[0,0,0];u<3;)o=e+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?n+(s-n)*6*o:2*o<1?s:3*o<2?n+(s-n)*(2/3-o)*6:n,a[u++]=l*255;return a}};fx.hsl=function(i){var e=i[0]/255,t=i[1]/255,r=i[2]/255,n=Math.min(e,t,r),s=Math.max(e,t,r),o=s-n,a,l,u;return s===n?a=0:e===s?a=(t-r)/o:t===s?a=2+(r-e)/o:r===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(n+s)/2,s===n?l=0:u<=.5?l=o/(s+n):l=o/(2-s-n),[a,l*100,u*100]};function nXe(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,t=rXe(i);if(!t.space)return[];const r=t.space[0]==="h"?sD.min:fx.min,n=t.space[0]==="h"?sD.max:fx.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),n[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),n[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),n[2]),t.space[0]==="h"&&(e=sD.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function sXe(i){return typeof i=="string"?i:QI(i)}const oXe=1024,I1={};let oD=0;function aXe(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function Qfe(i){const e=Oo.lchuv(fx.xyz(i));return e[3]=i[3],e}function lXe(i){const e=Oo.rgb(Yxe.xyz(i));return e[3]=i[3],e}function JI(i){if(I1.hasOwnProperty(i))return I1[i];if(oD>=oXe){let t=0;for(const r in I1)t++&3||(delete I1[r],--oD)}const e=nXe(i);if(e.length!==4)throw new Error('Failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+i+'" as color');return Xxe(e),I1[i]=e,++oD,e}function Ku(i){return Array.isArray(i)?i:JI(i)}function Xxe(i){return i[0]=Ti(i[0]+.5|0,0,255),i[1]=Ti(i[1]+.5|0,0,255),i[2]=Ti(i[2]+.5|0,0,255),i[3]=Ti(i[3],0,1),i}function QI(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let r=i[2];r!=(r|0)&&(r=r+.5|0);const n=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+n+")"}function uXe(i){try{return JI(i),!0}catch{return!1}}const Kf=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",cXe=Kf.includes("firefox"),hXe=Kf.includes("safari")&&!Kf.includes("chrom"),dXe=hXe&&(Kf.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Kf)),fXe=Kf.includes("webkit")&&!Kf.includes("edge"),eO=Kf.includes("macintosh"),Zxe=typeof devicePixelRatio<"u"?devicePixelRatio:1,Kxe=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,tO=typeof Image<"u"&&Image.prototype.decode,pXe=typeof createImageBitmap=="function",Jxe=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function kn(i,e,t,r){let n;return t&&t.length?n=t.shift():Kxe?n=new OffscreenCanvas(i||300,e||300):n=document.createElement("canvas"),i&&(n.width=i),e&&(n.height=e),n.getContext("2d",r)}let aD;function hC(){return aD||(aD=kn(1,1)),aD}function Xm(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function mXe(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function gXe(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function qy(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function dC(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Qxe(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function yXe(i,e){const t=i.childNodes;for(let r=0;;++r){const n=t[r],s=e[r];if(!n&&!s)break;if(n!==s){if(!n){i.appendChild(s);continue}if(!s){i.removeChild(n),--r;continue}i.insertBefore(s,n)}}}class oA extends wv{constructor(e,t,r,n){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof n=="function"?$t.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(Bt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==$t.IDLE&&this.loader){this.state=$t.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;xI(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=$t.LOADED}).catch(r=>{this.state=$t.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function vXe(i,e,t){const r=i;let n=!0,s=!1,o=!1;const a=[Fy(r,Bt.LOAD,function(){o=!0,s||e()})];return r.src&&tO?(s=!0,r.decode().then(function(){n&&e()}).catch(function(l){n&&(o?e():t())})):a.push(Fy(r,Bt.ERROR,t)),function(){n=!1,a.forEach(Zr)}}function bXe(i,e){return new Promise((t,r)=>{function n(){o(),t(i)}function s(){o(),r(new Error("Image load error"))}function o(){i.removeEventListener("load",n),i.removeEventListener("error",s)}i.addEventListener("load",n),i.addEventListener("error",s),e&&(i.src=e)})}function ewe(i,e){return e&&(i.src=e),i.src&&tO?new Promise((t,r)=>i.decode().then(()=>t(i)).catch(n=>i.complete&&i.width?t(i):r(n))):bXe(i)}function cp(i,e){return e&&(i.src=e),i.src&&tO&&pXe?i.decode().then(()=>createImageBitmap(i)).catch(t=>{if(i.complete&&i.width)return i;throw t}):ewe(i)}class _Xe{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const n=lD(e,t,r);return n in this.cache_?this.cache_[n]:null}getPattern(e,t,r){const n=lD(e,t,r);return n in this.patternCache_?this.patternCache_[n]:null}set(e,t,r,n,s){const o=lD(e,t,r),a=o in this.cache_;this.cache_[o]=n,s&&(n.getImageState()===$t.IDLE&&n.load(),n.getImageState()===$t.LOADING?n.ready().then(()=>{this.patternCache_[o]=hC().createPattern(n.getImage(1),"repeat")}):this.patternCache_[o]=hC().createPattern(n.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function lD(i,e,t){const r=t?Ku(t):"null";return e+":"+i+":"+r}const Mc=new _Xe;let O1=null;class xXe extends wv{constructor(e,t,r,n,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=n===void 0?$t.IDLE:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===$t.LOADED){O1||(O1=kn(1,1,void 0,{willReadFrequently:!0})),O1.drawImage(this.image_,0,0);try{O1.getImageData(0,0,1,1),this.tainted_=!1}catch{O1=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Bt.CHANGE)}handleImageError_(){this.imageState_=$t.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=$t.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=kn(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===$t.IDLE){this.image_||this.initializeImage_(),this.imageState_=$t.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ewe(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==$t.LOADED)return;const t=this.image_,r=document.createElement("canvas");r.width=Math.ceil(t.width*e),r.height=Math.ceil(t.height*e);const n=r.getContext("2d");n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=sXe(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===$t.LOADED||this.imageState_===$t.ERROR?e():this.addEventListener(Bt.CHANGE,function t(){(this.imageState_===$t.LOADED||this.imageState_===$t.ERROR)&&(this.removeEventListener(Bt.CHANGE,t),e())})})),this.ready_}}function iO(i,e,t,r,n,s){let o=e===void 0?void 0:Mc.get(e,t,n);return o||(o=new xXe(i,i&&"src"in i?i.src||void 0:e,t,r,n),Mc.set(e,t,n,o,s)),s&&o&&!Mc.getPattern(e,t,n)&&Mc.set(e,t,n,o,s),o}function Lc(i){return i?Array.isArray(i)?QI(i):typeof i=="object"&&"src"in i?wXe(i):i:null}function wXe(i){if(!i.offset||!i.size)return Mc.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=Mc.getPattern(e,void 0,i.color);if(t)return t;const r=Mc.get(i.src,"anonymous",null);if(r.getImageState()!==$t.LOADED)return null;const n=kn(i.size[0],i.size[1]);return n.drawImage(r.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),iO(n.canvas,e,void 0,$t.LOADED,i.color,!0),Mc.getPattern(e,void 0,i.color)}const s2="ol-hidden",EXe="ol-selectable",Xc="ol-unselectable",epe="ol-unsupported",dg="ol-control",fC="ol-collapsed",SXe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),tpe=["style","variant","weight","size","lineHeight","family"],twe=function(i){const e=i.match(SXe);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,n=tpe.length;r<n;++r){const s=e[r+1];s!==void 0&&(t[tpe[r]]=s)}return t.families=t.family.split(/,\s?/),t},iwe="10px sans-serif",Xa="#000",Hy="round",td=[],id=0,Vy="round",px=10,mx="#000",gx="center",pC="middle",_m=[0,0,0,0],yx=1,Ph=new mu;let T0=null,nL;const sL={},CXe=function(){const e="32px ",t=["monospace","serif"],r=t.length,n="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(u,c,h){let d=!0;for(let p=0;p<r;++p){const m=t[p];if(o=mC(u+" "+c+" "+e+m,n),h!=m){const g=mC(u+" "+c+" "+e+h+","+m,n);d=d&&g!=o}}return!!d}function l(){let u=!0;const c=Ph.getKeys();for(let h=0,d=c.length;h<d;++h){const p=c[h];Ph.get(p)<100&&(a.apply(this,p.split(`
`))?(xv(sL),T0=null,nL=void 0,Ph.set(p,100)):(Ph.set(p,Ph.get(p)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const c=twe(u);if(!c)return;const h=c.families;for(let d=0,p=h.length;d<p;++d){const m=h[d],g=c.style+`
`+c.weight+`
`+m;Ph.get(g)===void 0&&(Ph.set(g,100,!0),a(c.style,c.weight,m)||(Ph.set(g,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),TXe=function(){let i;return function(e){let t=sL[e];if(t==null){if(Kxe){const r=twe(e),n=rwe(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);sL[e]=t}return t}}();function rwe(i,e){return T0||(T0=kn(1,1)),i!=nL&&(T0.font=i,nL=T0.font),T0.measureText(e)}function mC(i,e){return rwe(i,e).width}function ipe(i,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((n,s)=>Math.max(n,mC(i,s)),0);return t[e]=r,r}function AXe(i,e){const t=[],r=[],n=[];let s=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){s=Math.max(s,o),n.push(o),o=0,a+=l,l=0;continue}const d=e[u+1]||i.font,p=mC(d,h);t.push(p),o+=p;const m=TXe(d);r.push(m),l=Math.max(l,m)}return{width:s,height:a,widths:t,heights:r,lineWidths:n}}function kXe(i,e,t,r,n,s,o,a,l,u,c){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=h=>h.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),r.contextInstructions?(i.translate(l,u),i.scale(c[0],c[1]),DXe(r,i)):c[0]<0||c[1]<0?(i.translate(l,u),i.scale(c[0],c[1]),i.drawImage(r,n,s,o,a,0,0,o,a)):i.drawImage(r,n,s,o,a,l,u,o*c[0],a*c[1]),i.restore()}function DXe(i,e){const t=i.contextInstructions;for(let r=0,n=t.length;r<n;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class aA extends sA{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?$t.LOADING:$t.LOADED,this.imageState_===$t.LOADING&&this.ready().then(()=>this.imageState_=$t.LOADED),this.render()}clone(){const e=this.getScale(),t=new aA({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const r=this.renderOptions_,n=kn(r.size*e,r.size*e);this.draw_(r,n,e),t=n.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let n=this.radius_,s=this.radius2_===void 0?n:this.radius2_;if(n<s){const D=n;n=s,s=D}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),c=n-u,h=Math.sqrt(l*l+c*c),d=h/l;if(e==="miter"&&d<=r)return d*t;const p=t/2/d,m=t/2*(c/h),v=Math.sqrt((n+p)*(n+p)+m*m)-n;if(this.radius2_===void 0||e==="bevel")return v*2;const b=n*Math.sin(a),_=Math.sqrt(n*n-b*b),E=s-_,T=Math.sqrt(b*b+E*E)/b;if(T<=r){const D=T*t/2-s-n;return 2*Math.max(v,D)}return v*2}createRenderOptions(){let e=Hy,t=Vy,r=0,n=null,s=0,o,a=0;this.stroke_&&(o=Lc(this.stroke_.getColor()??mx),a=this.stroke_.getWidth()??yx,n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Vy,e=this.stroke_.getLineCap()??Hy,r=this.stroke_.getMiterLimit()??px);const l=this.calculateLineJoinSize_(t,a,r),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:e,lineDash:n,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let n=this.fill_.getColor();n===null&&(n=Xa),t.fillStyle=Lc(n),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),n=0;typeof r=="string"&&(r=Ku(r)),r===null?n=1:Array.isArray(r)&&(n=r.length===4?r[3]:1),n===0&&(t=kn(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius_;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const n=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,u=a%2===0?r:n;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Xa,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class bw extends aA{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new bw({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class nl{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new nl({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=iO(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===$t.IDLE&&t.load(),t.getImageState()===$t.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class la{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new la({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class os{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=rpe,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new os({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=rpe,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function MXe(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(Hi(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let uD=null;function nwe(i,e){if(!uD){const t=new nl({color:"rgba(255,255,255,0.4)"}),r=new la({color:"#3399CC",width:1.25});uD=[new os({image:new bw({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return uD}function swe(){const i={},e=[255,255,255,1],t=[0,153,255,1],r=3;return i.Polygon=[new os({fill:new nl({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new os({stroke:new la({color:e,width:r+2})}),new os({stroke:new la({color:t,width:r})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new os({image:new bw({radius:r*2,fill:new nl({color:t}),stroke:new la({color:e,width:r/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function rpe(i){return i.getGeometry()}function npe(i,e,t,r){return t!==void 0&&r!==void 0?[t/i,r/e]:t!==void 0?t/i:r!==void 0?r/e:1}class rO extends sA{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,n=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:n,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;Hi(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Nt(o)),Hi(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Hi(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=$t.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?$t.LOADED:$t.IDLE:l=$t.LOADING:l=$t.LOADED),this.color_=e.color!==void 0?Ku(e.color):null,this.iconImage_=iO(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(npe(p[0],p[1],e.width,e.height))};this.listenImageChange(d);return}}u!==void 0&&this.setScale(npe(u,c,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new rO({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=n[0]),this.anchorYUnits_=="fraction"&&(e[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==$t.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==$t.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Bt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Bt.CHANGE,e)}ready(){return this.iconImage_.ready()}}const lA=rO,LXe="#333";class Zm{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=On(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new nl({color:LXe}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Zm({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=On(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let fg=0;const pg=0,Dn=1<<fg++,wt=1<<fg++,Ys=1<<fg++,an=1<<fg++,po=1<<fg++,qu=1<<fg++,Qo=Math.pow(2,fg)-1,owe={[Dn]:"boolean",[wt]:"number",[Ys]:"string",[an]:"color",[po]:"number[]",[qu]:"size"},RXe=Object.keys(owe).map(Number).sort(Bc);function Ks(i){const e=[];for(const t of RXe)IXe(i,t)&&e.push(owe[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function IXe(i,e){return(i&e)===e}function Hu(i,e){return!!(i&e)}function _w(i,e){return i===e}class Lf{constructor(e,t){this.type=e,this.value=t}}class awe{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function nO(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function OXe(i){switch(i){case"string":return Ys;case"color":return an;case"number":return wt;case"boolean":return Dn;case"number[]":return po;default:throw new Error(`Unrecognized type hint: ${i}`)}}function on(i,e,t){switch(typeof i){case"boolean":return new Lf(Dn,i);case"number":return new Lf(t===qu?qu:wt,i);case"string":{let n=Ys;return uXe(i)&&(n|=an),_w(n&t,pg)||(n&=t),new Lf(n,i)}}if(!Array.isArray(i))throw new Error("Expression must be an array or a primitive value");if(i.length===0)throw new Error("Empty expression");if(typeof i[0]=="string")return VXe(i,e,t);for(const n of i)if(typeof n!="number")throw new Error("Expected an array of numbers");let r=po;return i.length===2?r|=qu:(i.length===3||i.length===4)&&(r|=an),t&&(r&=t),new Lf(r,i)}const Ue={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},PXe={[Ue.Get]:Bi(([i,e])=>e!==void 0?OXe(e.value):Qo,sr(1,2),FXe),[Ue.Var]:Bi(([i])=>i.type,sr(1,1),NXe),[Ue.Id]:Bi(wt|Ys,P1,$Xe),[Ue.Concat]:Bi(Ys,sr(2,1/0),Gr(Qo)),[Ue.GeometryType]:Bi(Ys,P1,BXe),[Ue.Resolution]:Bi(wt,P1),[Ue.Zoom]:Bi(wt,P1),[Ue.Time]:Bi(wt,P1),[Ue.Any]:Bi(Dn,sr(2,1/0),Gr(Dn)),[Ue.All]:Bi(Dn,sr(2,1/0),Gr(Dn)),[Ue.Not]:Bi(Dn,sr(1,1),Gr(Dn)),[Ue.Equal]:Bi(Dn,sr(2,2),Gr(Qo),sf),[Ue.NotEqual]:Bi(Dn,sr(2,2),Gr(Qo),sf),[Ue.GreaterThan]:Bi(Dn,sr(2,2),Gr(Qo),sf),[Ue.GreaterThanOrEqualTo]:Bi(Dn,sr(2,2),Gr(Qo),sf),[Ue.LessThan]:Bi(Dn,sr(2,2),Gr(Qo),sf),[Ue.LessThanOrEqualTo]:Bi(Dn,sr(2,2),Gr(Qo),sf),[Ue.Multiply]:Bi(i=>{let e=wt|an;for(let t=0;t<i.length;t++)e&=i[t].type;return e},sr(2,1/0),Gr(wt|an),sf),[Ue.Coalesce]:Bi(i=>{let e=Qo;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},sr(2,1/0),Gr(Qo),sf),[Ue.Divide]:Bi(wt,sr(2,2),Gr(wt)),[Ue.Add]:Bi(wt,sr(2,1/0),Gr(wt)),[Ue.Subtract]:Bi(wt,sr(2,2),Gr(wt)),[Ue.Clamp]:Bi(wt,sr(3,3),Gr(wt)),[Ue.Mod]:Bi(wt,sr(2,2),Gr(wt)),[Ue.Pow]:Bi(wt,sr(2,2),Gr(wt)),[Ue.Abs]:Bi(wt,sr(1,1),Gr(wt)),[Ue.Floor]:Bi(wt,sr(1,1),Gr(wt)),[Ue.Ceil]:Bi(wt,sr(1,1),Gr(wt)),[Ue.Round]:Bi(wt,sr(1,1),Gr(wt)),[Ue.Sin]:Bi(wt,sr(1,1),Gr(wt)),[Ue.Cos]:Bi(wt,sr(1,1),Gr(wt)),[Ue.Atan]:Bi(wt,sr(1,2),Gr(wt)),[Ue.Sqrt]:Bi(wt,sr(1,1),Gr(wt)),[Ue.Match]:Bi(i=>{let e=Qo;for(let t=2;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},sr(4,1/0),spe,zXe),[Ue.Between]:Bi(Dn,sr(3,3),Gr(wt)),[Ue.Interpolate]:Bi(i=>{let e=an|wt;for(let t=3;t<i.length;t+=2)e&=i[t].type;return e},sr(6,1/0),spe,UXe),[Ue.Case]:Bi(i=>{let e=Qo;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},sr(3,1/0),jXe,GXe),[Ue.In]:Bi(Dn,sr(2,2),qXe),[Ue.Number]:Bi(wt,sr(1,1/0),Gr(Qo)),[Ue.String]:Bi(Ys,sr(1,1/0),Gr(Qo)),[Ue.Array]:Bi(i=>i.length===2?po|qu:i.length===3||i.length===4?po|an:po,sr(1,1/0),Gr(wt)),[Ue.Color]:Bi(an,sr(1,4),Gr(wt)),[Ue.Band]:Bi(wt,sr(1,3),Gr(wt)),[Ue.Palette]:Bi(an,sr(2,2),HXe),[Ue.ToString]:Bi(Ys,sr(1,1),Gr(Dn|wt|Ys|an))};function FXe(i,e){const t=on(i[1],e);if(!(t instanceof Lf))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),i.length===3){const r=on(i[2],e);return[t,r]}return[t]}function NXe(i,e,t,r){const n=i[1];if(typeof n!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(n),!("variables"in e.style)||e.style.variables[n]===void 0)return[new Lf(Qo,n)];const s=e.style.variables[n],o=on(s,e);if(o.value=n,r&&!Hu(r,o.type))throw new Error(`The variable ${n} has type ${Ks(o.type)} but the following type was expected: ${Ks(r)}`);return[o]}function $Xe(i,e){e.featureId=!0}function BXe(i,e){e.geometryType=!0}function P1(i,e){const t=i[0];if(i.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function sr(i,e){return function(t,r){const n=t[0],s=t.length-1;if(i===e){if(s!==i){const o=i===1?"":"s";throw new Error(`Expected ${i} argument${o} for ${n}, got ${s}`)}}else if(s<i||s>e){const o=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`Expected ${o} arguments for ${n}, got ${s}`)}}}function Gr(i){return function(e,t){const r=e[0],n=e.length-1,s=new Array(n);for(let o=0;o<n;++o){const a=on(e[o+1],t);if(!Hu(i,a.type)){const l=Ks(i),u=Ks(a.type);throw new Error(`Unexpected type for argument ${o} of ${r} operation, got ${l} but expected ${u}`)}a.type&=i,s[o]=a}return s}}function sf(i,e,t){const r=i[0],n=i.length-1;let s=Qo;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===pg)throw new Error(`No common type could be found for arguments of ${r} operation`);const o=new Array(n);for(let a=0;a<n;++a)o[a]=on(i[a+1],e,s);return o}function jXe(i,e){const t=i[0],r=i.length-1;if(r%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(r)} instead`)}function spe(i,e){const t=i[0],r=i.length-1;if(r%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(r)} instead`)}function zXe(i,e,t,r){const n=i.length-1;let o=on(i[1],e).type;const a=on(i[i.length-1],e);let l=r!==void 0?r&a.type:a.type;const u=new Array(n-2);for(let h=0;h<n-2;h+=2){const d=on(i[h+2],e),p=on(i[h+3],e);o&=d.type,l&=p.type,u[h]=d,u[h+1]=p}const c=Ys|wt|Dn;if(!Hu(c,o))throw new Error(`Expected an input of type ${Ks(c)} for the interpolate operation, got ${Ks(o)} instead`);if(o&=c,_w(l,pg))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(i));for(let h=0;h<n-2;h+=2){const d=on(i[h+2],e,o),p=on(i[h+3],e,l);u[h]=d,u[h+1]=p}return[on(i[1],e,o),...u,on(i[i.length-1],e,l)]}function UXe(i,e,t,r){const n=i[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":if(s=n[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(n)}`);s=on(s,e);let o=on(i[2],e);if(!Hu(wt,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Ks(o.type)} instead`);o=on(i[2],e,wt);const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){let u=on(i[l+3],e);if(!Hu(wt,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Ks(u.type)} at position ${l+2} instead`);let c=on(i[l+4],e);if(!Hu(wt|an,c.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Ks(c.type)} at position ${l+3} instead`);u=on(i[l+3],e,wt),c=on(i[l+4],e,wt|an),a[l]=u,a[l+1]=c}return[s,o,...a]}function GXe(i,e,t,r){const n=on(i[i.length-1],e,r);let s=r!==void 0?r&n.type:n.type;const o=new Array(i.length-1);for(let a=0;a<o.length-1;a+=2){const l=on(i[a+1],e),u=on(i[a+2],e,r);if(!Hu(Dn,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Ks(l.type)} at position ${a} instead`);s&=u.type,o[a]=l,o[a+1]=u}if(_w(s,pg))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(i));for(let a=0;a<o.length-1;a+=2)o[a+1]=on(i[a+2],e,s);return o[o.length-1]=on(i[i.length-1],e,s),o}function qXe(i,e){let t=i[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let r=Ys|wt;const n=new Array(t.length);for(let o=0;o<n.length;o++){const a=on(t[o],e);r&=a.type,n[o]=a}if(_w(r,pg))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(i));return[on(i[1],e,r),...n]}function HXe(i,e){const t=on(i[1],e,wt);if(t.type!==wt)throw new Error(`The first argument of palette must be an number, got ${Ks(t.type)} instead`);const r=i[2];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");const n=new Array(r.length);for(let s=0;s<n.length;s++){const o=on(r[s],e,an);if(!(o instanceof Lf))throw new Error(`The palette color at index ${s} must be a literal value`);if(!Hu(o.type,an))throw new Error(`The palette color at index ${s} should be of type color, got ${Ks(o.type)} instead`);n[s]=o}return[t,...n]}function Bi(i,...e){return function(t,r,n){const s=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,r,o,n)||o;let a=typeof i=="function"?i(o):i;if(n!==void 0){if(!Hu(a,n))throw new Error(`The following expression was expected to return ${Ks(n)}, but returns ${Ks(a)} instead: ${JSON.stringify(t)}`);a&=n}if(a===pg)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new awe(a,s,...o)}}function VXe(i,e,t){const r=i[0],n=PXe[r];if(!n)throw new Error(`Unknown operator: ${r}`);return n(i,e,t)}function sO(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return sO(i.getGeometries()[0]);default:return""}}function lwe(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function xd(i,e,t){const r=on(i,t);if(!Hu(e,r.type)){const n=Ks(e),s=Ks(r.type);throw new Error(`Expected expression to be of type ${n}, got ${s}`)}return Ju(r)}function Ju(i,e){if(i instanceof Lf){if(i.type===an&&typeof i.value=="string"){const r=JI(i.value);return function(){return r}}return function(){return i.value}}const t=i.operator;switch(t){case Ue.Number:case Ue.String:case Ue.Coalesce:return WXe(i);case Ue.Get:case Ue.Var:return YXe(i);case Ue.Id:return r=>r.featureId;case Ue.GeometryType:return r=>r.geometryType;case Ue.Concat:{const r=i.args.map(n=>Ju(n));return n=>"".concat(...r.map(s=>s(n).toString()))}case Ue.Resolution:return r=>r.resolution;case Ue.Any:case Ue.All:case Ue.Between:case Ue.In:case Ue.Not:return ZXe(i);case Ue.Equal:case Ue.NotEqual:case Ue.LessThan:case Ue.LessThanOrEqualTo:case Ue.GreaterThan:case Ue.GreaterThanOrEqualTo:return XXe(i);case Ue.Multiply:case Ue.Divide:case Ue.Add:case Ue.Subtract:case Ue.Clamp:case Ue.Mod:case Ue.Pow:case Ue.Abs:case Ue.Floor:case Ue.Ceil:case Ue.Round:case Ue.Sin:case Ue.Cos:case Ue.Atan:case Ue.Sqrt:return KXe(i);case Ue.Case:return JXe(i);case Ue.Match:return QXe(i);case Ue.Interpolate:return eZe(i);case Ue.ToString:return tZe(i);default:throw new Error(`Unsupported operator ${t}`)}}function WXe(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Ju(i.args[s]);switch(t){case Ue.Coalesce:return s=>{for(let o=0;o<r;++o){const a=n[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Ue.Number:case Ue.String:return s=>{for(let o=0;o<r;++o){const a=n[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function YXe(i,e){const r=i.args[0].value;switch(i.operator){case Ue.Get:return n=>n.properties[r];case Ue.Var:return n=>n.variables[r];default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function XXe(i,e){const t=i.operator,r=Ju(i.args[0]),n=Ju(i.args[1]);switch(t){case Ue.Equal:return s=>r(s)===n(s);case Ue.NotEqual:return s=>r(s)!==n(s);case Ue.LessThan:return s=>r(s)<n(s);case Ue.LessThanOrEqualTo:return s=>r(s)<=n(s);case Ue.GreaterThan:return s=>r(s)>n(s);case Ue.GreaterThanOrEqualTo:return s=>r(s)>=n(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function ZXe(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Ju(i.args[s]);switch(t){case Ue.Any:return s=>{for(let o=0;o<r;++o)if(n[o](s))return!0;return!1};case Ue.All:return s=>{for(let o=0;o<r;++o)if(!n[o](s))return!1;return!0};case Ue.Between:return s=>{const o=n[0](s),a=n[1](s),l=n[2](s);return o>=a&&o<=l};case Ue.In:return s=>{const o=n[0](s);for(let a=1;a<r;++a)if(o===n[a](s))return!0;return!1};case Ue.Not:return s=>!n[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function KXe(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Ju(i.args[s]);switch(t){case Ue.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=n[a](s);return o};case Ue.Divide:return s=>n[0](s)/n[1](s);case Ue.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=n[a](s);return o};case Ue.Subtract:return s=>n[0](s)-n[1](s);case Ue.Clamp:return s=>{const o=n[0](s),a=n[1](s);if(o<a)return a;const l=n[2](s);return o>l?l:o};case Ue.Mod:return s=>n[0](s)%n[1](s);case Ue.Pow:return s=>Math.pow(n[0](s),n[1](s));case Ue.Abs:return s=>Math.abs(n[0](s));case Ue.Floor:return s=>Math.floor(n[0](s));case Ue.Ceil:return s=>Math.ceil(n[0](s));case Ue.Round:return s=>Math.round(n[0](s));case Ue.Sin:return s=>Math.sin(n[0](s));case Ue.Cos:return s=>Math.cos(n[0](s));case Ue.Atan:return r===2?s=>Math.atan2(n[0](s),n[1](s)):s=>Math.atan(n[0](s));case Ue.Sqrt:return s=>Math.sqrt(n[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function JXe(i,e){const t=i.args.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=Ju(i.args[n]);return n=>{for(let s=0;s<t-1;s+=2)if(r[s](n))return r[s+1](n);return r[t-1](n)}}function QXe(i,e){const t=i.args.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=Ju(i.args[n]);return n=>{const s=r[0](n);for(let o=1;o<t;o+=2)if(s===r[o](n))return r[o+1](n);return r[t-1](n)}}function eZe(i,e){const t=i.args.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=Ju(i.args[n]);return n=>{const s=r[0](n),o=r[1](n);let a,l;for(let u=2;u<t;u+=2){const c=r[u](n);let h=r[u+1](n);const d=Array.isArray(h);if(d&&(h=aXe(h)),c>=o)return u===2?h:d?iZe(s,o,a,l,c,h):n_(s,o,a,l,c,h);a=c,l=h}return l}}function tZe(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Ju(i.args[s]);switch(t){case Ue.ToString:return s=>{const o=n[0](s);return i.args[0].type===an?QI(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function n_(i,e,t,r,n,s){const o=n-t;if(o===0)return r;const a=e-t,l=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return r+l*(s-r)}function iZe(i,e,t,r,n,s){if(n-t===0)return r;const a=Qfe(r),l=Qfe(s);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[n_(i,e,t,a[0],n,l[0]),n_(i,e,t,a[1],n,l[1]),a[2]+n_(i,e,t,0,n,u),n_(i,e,t,r[3],n,s[3])];return Xxe(lXe(c))}function rZe(i){return!0}function nZe(i){const e=nO(),t=sZe(i,e),r=lwe();return function(n,s){if(r.properties=n.getPropertiesInternal(),r.resolution=s,e.featureId){const o=n.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=sO(n.getGeometry())),t(r)}}function ope(i){const e=nO(),t=i.length,r=new Array(t);for(let o=0;o<t;++o)r[o]=oL(i[o],e);const n=lwe(),s=new Array(t);return function(o,a){if(n.properties=o.getPropertiesInternal(),n.resolution=a,e.featureId){const u=o.getId();u!==void 0?n.featureId=u:n.featureId=null}let l=0;for(let u=0;u<t;++u){const c=r[u](n);c&&(s[l]=c,l+=1)}return s.length=l,s}}function sZe(i,e){const t=i.length,r=new Array(t);for(let n=0;n<t;++n){const s=i[n],o="filter"in s?xd(s.filter,Dn,e):rZe;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=oL(s.style[u],e)}else a=[oL(s.style,e)];r[n]={filter:o,styles:a}}return function(n){const s=[];let o=!1;for(let a=0;a<t;++a){const l=r[a].filter;if(l(n)&&!(i[a].else&&o)){o=!0;for(const u of r[a].styles){const c=u(n);c&&s.push(c)}}}return s}}function oL(i,e){const t=vx(i,"",e),r=bx(i,"",e),n=oZe(i,e),s=aZe(i,e),o=Ja(i,"z-index",e);if(!t&&!r&&!n&&!s&&!ud(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new os;return function(l){let u=!0;if(t){const c=t(l);c&&(u=!1),a.setFill(c)}if(r){const c=r(l);c&&(u=!1),a.setStroke(c)}if(n){const c=n(l);c&&(u=!1),a.setText(c)}if(s){const c=s(l);c&&(u=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),u?null:a}}function vx(i,e,t){let r;if(e+"fill-pattern-src"in i?r=hZe(i,e+"fill-",t):r=oO(i,e+"fill-color",t),!r)return null;const n=new nl;return function(s){const o=r(s);return o==="none"?null:(n.setColor(o),n)}}function bx(i,e,t){const r=Ja(i,e+"stroke-width",t),n=oO(i,e+"stroke-color",t);if(!r&&!n)return null;const s=Bh(i,e+"stroke-line-cap",t),o=Bh(i,e+"stroke-line-join",t),a=uwe(i,e+"stroke-line-dash",t),l=Ja(i,e+"stroke-line-dash-offset",t),u=Ja(i,e+"stroke-miter-limit",t),c=new la;return function(h){if(n){const d=n(h);if(d==="none")return null;c.setColor(d)}if(r&&c.setWidth(r(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function oZe(i,e){const t="text-",r=Bh(i,t+"value",e);if(!r)return null;const n=vx(i,t,e),s=vx(i,t+"background-",e),o=bx(i,t,e),a=bx(i,t+"background-",e),l=Bh(i,t+"font",e),u=Ja(i,t+"max-angle",e),c=Ja(i,t+"offset-x",e),h=Ja(i,t+"offset-y",e),d=_x(i,t+"overflow",e),p=Bh(i,t+"placement",e),m=Ja(i,t+"repeat",e),g=uA(i,t+"scale",e),v=_x(i,t+"rotate-with-view",e),b=Ja(i,t+"rotation",e),_=Bh(i,t+"align",e),E=Bh(i,t+"justify",e),C=Bh(i,t+"baseline",e),T=uwe(i,t+"padding",e),D=cA(i,t+"declutter-mode"),M=new Zm({declutterMode:D});return function(A){if(M.setText(r(A)),n&&M.setFill(n(A)),s&&M.setBackgroundFill(s(A)),o&&M.setStroke(o(A)),a&&M.setBackgroundStroke(a(A)),l&&M.setFont(l(A)),u&&M.setMaxAngle(u(A)),c&&M.setOffsetX(c(A)),h&&M.setOffsetY(h(A)),d&&M.setOverflow(d(A)),p){const I=p(A);if(I!=="point"&&I!=="line")throw new Error("Expected point or line for text-placement");M.setPlacement(I)}if(m&&M.setRepeat(m(A)),g&&M.setScale(g(A)),v&&M.setRotateWithView(v(A)),b&&M.setRotation(b(A)),_){const I=_(A);if(I!=="left"&&I!=="center"&&I!=="right"&&I!=="end"&&I!=="start")throw new Error("Expected left, right, center, start, or end for text-align");M.setTextAlign(I)}if(E){const I=E(A);if(I!=="left"&&I!=="right"&&I!=="center")throw new Error("Expected left, right, or center for text-justify");M.setJustify(I)}if(C){const I=C(A);if(I!=="bottom"&&I!=="top"&&I!=="middle"&&I!=="alphabetic"&&I!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");M.setTextBaseline(I)}return T&&M.setPadding(T(A)),M}}function aZe(i,e){return"icon-src"in i?lZe(i,e):"shape-points"in i?uZe(i,e):"circle-radius"in i?cZe(i,e):null}function lZe(i,e){const t="icon-",r=t+"src",n=cwe(i[r],r),s=gC(i,t+"anchor",e),o=uA(i,t+"scale",e),a=Ja(i,t+"opacity",e),l=gC(i,t+"displacement",e),u=Ja(i,t+"rotation",e),c=_x(i,t+"rotate-with-view",e),h=lpe(i,t+"anchor-origin"),d=upe(i,t+"anchor-x-units"),p=upe(i,t+"anchor-y-units"),m=mZe(i,t+"color"),g=fZe(i,t+"cross-origin"),v=pZe(i,t+"offset"),b=lpe(i,t+"offset-origin"),_=yC(i,t+"width"),E=yC(i,t+"height"),C=dZe(i,t+"size"),T=cA(i,t+"declutter-mode"),D=new lA({src:n,anchorOrigin:h,anchorXUnits:d,anchorYUnits:p,color:m,crossOrigin:g,offset:v,offsetOrigin:b,height:E,width:_,size:C,declutterMode:T});return function(M){return a&&D.setOpacity(a(M)),l&&D.setDisplacement(l(M)),u&&D.setRotation(u(M)),c&&D.setRotateWithView(c(M)),o&&D.setScale(o(M)),s&&D.setAnchor(s(M)),D}}function uZe(i,e){const t="shape-",r=t+"points",n=t+"radius",s=aL(i[r],r),o=aL(i[n],n),a=vx(i,t,e),l=bx(i,t,e),u=uA(i,t+"scale",e),c=gC(i,t+"displacement",e),h=Ja(i,t+"rotation",e),d=_x(i,t+"rotate-with-view",e),p=yC(i,t+"radius2"),m=yC(i,t+"angle"),g=cA(i,t+"declutter-mode"),v=new aA({points:s,radius:o,radius2:p,angle:m,declutterMode:g});return function(b){return a&&v.setFill(a(b)),l&&v.setStroke(l(b)),c&&v.setDisplacement(c(b)),h&&v.setRotation(h(b)),d&&v.setRotateWithView(d(b)),u&&v.setScale(u(b)),v}}function cZe(i,e){const t="circle-",r=vx(i,t,e),n=bx(i,t,e),s=Ja(i,t+"radius",e),o=uA(i,t+"scale",e),a=gC(i,t+"displacement",e),l=Ja(i,t+"rotation",e),u=_x(i,t+"rotate-with-view",e),c=cA(i,t+"declutter-mode"),h=new bw({radius:5,declutterMode:c});return function(d){return s&&h.setRadius(s(d)),r&&h.setFill(r(d)),n&&h.setStroke(n(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),u&&h.setRotateWithView(u(d)),o&&h.setScale(o(d)),h}}function Ja(i,e,t){if(!(e in i))return;const r=xd(i[e],wt,t);return function(n){return aL(r(n),e)}}function Bh(i,e,t){if(!(e in i))return null;const r=xd(i[e],Ys,t);return function(n){return cwe(r(n),e)}}function hZe(i,e,t){const r=Bh(i,e+"pattern-src",t),n=ape(i,e+"pattern-offset",t),s=ape(i,e+"pattern-size",t),o=oO(i,e+"color",t);return function(a){return{src:r(a),offset:n&&n(a),size:s&&s(a),color:o&&o(a)}}}function _x(i,e,t){if(!(e in i))return null;const r=xd(i[e],Dn,t);return function(n){const s=r(n);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function oO(i,e,t){if(!(e in i))return null;const r=xd(i[e],an|Ys,t);return function(n){return hwe(r(n),e)}}function uwe(i,e,t){if(!(e in i))return null;const r=xd(i[e],po,t);return function(n){return xw(r(n),e)}}function gC(i,e,t){if(!(e in i))return null;const r=xd(i[e],po,t);return function(n){const s=xw(r(n),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function ape(i,e,t){if(!(e in i))return null;const r=xd(i[e],po,t);return function(n){return dwe(r(n),e)}}function uA(i,e,t){if(!(e in i))return null;const r=xd(i[e],po|wt,t);return function(n){return gZe(r(n),e)}}function yC(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function dZe(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return On(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function fZe(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function lpe(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function upe(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function pZe(i,e){const t=i[e];if(t!==void 0)return xw(t,e)}function cA(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function mZe(i,e){const t=i[e];if(t!==void 0)return hwe(t,e)}function xw(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let r=0;r<t;++r)if(typeof i[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function cwe(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function aL(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function hwe(i,e){if(typeof i=="string")return i;const t=xw(i,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function dwe(i,e){const t=xw(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function gZe(i,e){return typeof i=="number"?i:dwe(i,e)}const cpe={RENDER_ORDER:"renderOrder"};class Dv extends hg{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(cpe.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new ZI(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(cpe.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?nwe:e;const t=yZe(e);this.styleFunction_=e===null?void 0:MXe(t),this.changed()}}function yZe(i){if(i===void 0)return nwe;if(!i)return null;if(typeof i=="function"||i instanceof os)return i;if(!Array.isArray(i))return ope([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof os){const n=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof os))throw new Error("Expected a list of style instances");n[s]=o}return n}if("style"in t){const n=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");n[s]=o}return nZe(n)}return ope(i)}class vZe extends fw{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ai()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;Pl(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),$I(n,r)}forEachFeatureAtCoordinate(e,t,r,n,s,o,a,l){let u;const c=t.viewState;function h(C,T,D,M){return s.call(o,T,C?D:null,M)}const d=c.projection,p=JT(e.slice(),d),m=[[0,0]];if(d.canWrapX()&&n){const C=d.getExtent(),T=wi(C);m.push([-T,0],[T,0])}const g=t.layerStatesArray,v=g.length,b=[],_=[];for(let C=0;C<m.length;C++)for(let T=v-1;T>=0;--T){const D=g[T],M=D.layer;if(M.hasRenderer()&&XI(D,c)&&a.call(l,M)){const A=M.getRenderer(),I=M.getSource();if(A&&I){const P=I.getWrapX()?p:e,U=h.bind(null,D.managed);_[0]=P[0]+m[C][0],_[1]=P[1]+m[C][1],u=A.forEachFeatureAtCoordinate(_,t,r,U,b)}if(u)return u}}if(b.length===0)return;const E=1/b.length;return b.forEach((C,T)=>C.distanceSq+=T*E),b.sort((C,T)=>C.distanceSq-T.distanceSq),b.some(C=>u=C.callback(C.feature,C.layer,C.geometry)),u}hasFeatureAtCoordinate(e,t,r,n,s,o){return this.forEachFeatureAtCoordinate(e,t,r,n,Oy,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ai()}scheduleExpireIconCache(e){Mc.canExpireCache()&&e.postRenderFunctions.push(bZe)}}function bZe(i,e){Mc.expire()}class L_ extends ka{constructor(e,t,r,n){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=n}}class _Ze extends vZe{constructor(e){super(e),this.fontChangeListenerKey_=Ni(Ph,Vm.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Xc+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const n=new L_(e,void 0,t);r.dispatchEvent(n)}}disposeInternal(){Zr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ws.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});t.some(a=>a.layer instanceof Dv&&a.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=t.length;a<l;++a){const u=t[a];e.layerIndex=a;const c=u.layer,h=c.getSourceState();if(!XI(u,n)||h!="ready"&&h!="undefined"){c.unrender();continue}const d=c.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),s.push(u))}this.declutter(e,s),yXe(this.element_,this.children_),this.dispatchRenderEvent(Ws.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const n=t[r],s=n.layer;s.getDeclutter()&&s.renderDeclutter(e,n)}t.forEach(r=>r.layer.renderDeferred(e))}}}class gf extends ka{constructor(e,t){super(e),this.layer=t}}const cD={LAYERS:"layers"};class Fl extends bxe{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(cD.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new aa(r.slice(),{unique:!0}):Hi(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new aa(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Zr),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ni(e,na.ADD,this.handleLayersAdd_,this),Ni(e,na.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Zr);xv(this.listenerKeys_);const t=e.getArray();for(let r=0,n=t.length;r<n;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new gf("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ni(e,Vm.PROPERTYCHANGE,this.handleLayerChange_,this),Ni(e,Bt.CHANGE,this.handleLayerChange_,this)];e instanceof Fl&&t.push(Ni(e,"addlayer",this.handleLayerGroupAdd_,this),Ni(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Nt(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new gf("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new gf("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new gf("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Nt(t);this.listenerKeys_[r].forEach(Zr),delete this.listenerKeys_[r],this.dispatchEvent(new gf("removelayer",t)),this.changed()}getLayers(){return this.get(cD.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let n=0,s=r.length;n<s;++n)this.dispatchEvent(new gf("removelayer",r[n]))}this.set(cD.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const n=this.getLayerState();let s=n.zIndex;!e&&n.zIndex===void 0&&(s=0);for(let o=r,a=t.length;o<a;o++){const l=t[o];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=Bs(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class A0 extends ka{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class Nh extends A0{constructor(e,t,r,n,s,o){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Mr={SINGLECLICK:"singleclick",CLICK:Bt.CLICK,DBLCLICK:Bt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ec={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class xZe extends wv{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ni(r,Ec.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ni(r,Ec.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Bt.TOUCHMOVE,this.boundHandleTouchMove_,Jxe?{passive:!1}:!1)}emulateClick_(e){let t=new Nh(Mr.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Nh(Mr.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Nh(Mr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Mr.POINTERUP||t.type==Mr.POINTERCANCEL){delete this.trackedTouches_[r];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else(t.type==Mr.POINTERDOWN||t.type==Mr.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Nh(Mr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Zr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Nh(Mr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ni(r,Mr.POINTERMOVE,this.handlePointerMove_,this),Ni(r,Mr.POINTERUP,this.handlePointerUp_,this),Ni(this.element_,Mr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ni(this.element_.getRootNode(),Mr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Nh(Mr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Nh(Mr.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Zr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Bt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Zr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Zr),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const bc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ss={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},vC=1/0;class wZe{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,xv(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(r);return delete this.queuedElements_[n],r}enqueue(e){Hi(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=vC?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,n=t.length,s=t[e],o=r[e],a=e;for(;e<n>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<n&&r[u]<r[l]?u:l;t[e]=t[c],r[e]=r[c],e=c}t[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const r=this.elements_,n=this.priorities_,s=r[t],o=n[t];for(;t>e;){const a=this.getParentIndex_(t);if(n[a]>o)r[t]=r[a],n[t]=n[a],t=a;else break}r[t]=s,n[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let n=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==vC?delete this.queuedElements_[this.keyFunction_(o)]:(r[n]=l,t[n++]=o);t.length=n,r.length=n,this.heapify_()}}const tt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class fwe extends wZe{constructor(e,t){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Bt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===tt.LOADED||r===tt.ERROR||r===tt.EMPTY){r!==tt.ERROR&&t.removeEventListener(Bt.CHANGE,this.boundHandleTileChange_);const n=t.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0,n,s,o;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),n=s.getState(),n===tt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,s.load())}}function EZe(i,e,t,r,n){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return vC;const s=i.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n}class tc extends mu{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){dC(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&dC(this.element);for(let t=0,r=this.listenerKeys.length;t<r;++t)Zr(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Py&&this.listenerKeys.push(Ni(e,bc.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class SZe extends tc{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",n=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Xc+" "+dg+(this.collapsed_&&this.collapsible_?" "+fC:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(n=>n.getAttributions(e)))),r=!this.getMap().getAllLayers().some(n=>n.getSource()&&n.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(r),t}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(n=>xI(()=>n))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!th(t,this.renderedAttributions_)){Qxe(this.ulElement_);for(let n=0,s=t.length;n<s;++n){const o=document.createElement("li");o.innerHTML=t[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fC),this.collapsed_?qy(this.collapseLabel_,this.label_):qy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const pwe=SZe;class CZe extends tc{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",n=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(n));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Xc+" "+dg,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(s2)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:ug}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const n="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(s2);!s&&r===0?this.element.classList.add(s2):s&&r!==0&&this.element.classList.remove(s2)}this.label_.style.transform=n}this.rotation_=r}}const mwe=CZe;class TZe extends tc{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,n=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=n,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(Bt.CLICK,this.handleClick_.bind(this,r),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Bt.CLICK,this.handleClick_.bind(this,-r),!1);const d=t+" "+Xc+" "+dg,p=this.element;p.className=d,p.appendChild(c),p.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const n=r.getZoom();if(n!==void 0){const s=r.getConstrainedZoom(n+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:ug})):r.setZoom(s)}}}const gwe=TZe;function ywe(i){i=i||{};const e=new aa;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new gwe(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new mwe(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new pwe(i.attributionOptions)),e}const lL={ACTIVE:"active"};class ww extends mu{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(lL.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(lL.ACTIVE,e)}setMap(e){this.map_=e}}function AZe(i,e,t){const r=i.getCenterInternal();if(r){const n=[r[0]+e[0],r[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:CYe,center:i.getConstrainedCenter(n)})}}function aO(i,e,t,r){const n=i.getZoom();if(n===void 0)return;const s=i.getConstrainedZoom(n+e),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:r!==void 0?r:250,easing:ug})}class kZe extends ww{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Mr.DBLCLICK){const r=e.originalEvent,n=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=n.getView();aO(a,o,s,this.duration_),r.preventDefault(),t=!0}return!t}}const DZe=kZe;class mg extends ww{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Mr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Mr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Mr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Mr.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function lO(i){const e=i.length;let t=0,r=0;for(let n=0;n<e;n++)t+=i[n].clientX,r+=i[n].clientY;return{clientX:t/e,clientY:r/e}}function uL(i){const e=arguments;return function(t){let r=!0;for(let n=0,s=e.length;n<s&&(r=r&&e[n](t),!!r);++n);return r}}const MZe=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},LZe=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},RZe=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},vwe=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?RZe(i):!0},bC=Oy,bwe=function(i){const e=i.originalEvent;return e.button==0&&!(fXe&&eO&&e.ctrlKey)},IZe=_v,OZe=function(i){return i.type==Mr.SINGLECLICK},uO=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},hpe=function(i){const e=i.originalEvent;return!e.altKey&&(eO?e.metaKey:e.ctrlKey)&&!e.shiftKey},PZe=function(i){const e=i.originalEvent;return eO?e.metaKey:e.ctrlKey},_we=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},xwe=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},hD=function(i){const e=i.originalEvent;return Hi(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},wwe=function(i){const e=i.originalEvent;return Hi(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class R_ extends mg{constructor(e){super({stopDown:_v}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:uL(uO,wwe);this.condition_=e.onFocusOnly?uL(vwe,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,n=t.getEventPixel(lO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const s=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],a=e.map.getView();Axe(s,a.getResolution()),DI(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-n*Math.cos(s),a[1]-n*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:ug})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class FZe extends mg{constructor(e){e=e||{},super({stopDown:_v}),this.condition_=e.condition?e.condition:LZe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!hD(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===PI)return;const n=t.getSize(),s=e.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return hD(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return hD(e)&&bwe(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class NZe extends fw{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+r,n.top=Math.min(e[1],t[1])+r,n.width=Math.abs(t[0]-e[0])+r,n.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new _s([n])}getGeometry(){return this.geometry_}}const F1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class o2 extends ka{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class $Ze extends mg{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new NZe(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:bwe,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const n=r[0]-t[0],s=r[1]-t[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new o2(F1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new o2(t?F1.BOXEND:F1.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new o2(F1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new o2(F1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}}class BZe extends $Ze{constructor(e){e=e||{};const t=e.condition?e.condition:_we;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(n),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;n=n.clone(),n.scale(a*a)}r.fitInternal(n,{duration:this.duration_,easing:ug})}}const jZe=BZe,sm={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class zZe extends ww{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return uO(t)&&xwe(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Bt.KEYDOWN){const r=e.originalEvent,n=r.key;if(this.condition_(e)&&(n==sm.DOWN||n==sm.LEFT||n==sm.RIGHT||n==sm.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;n==sm.DOWN?u=-a:n==sm.LEFT?l=-a:n==sm.RIGHT?l=a:u=a;const c=[l,u];DI(c,o.getRotation()),AZe(o,c,this.duration_),r.preventDefault(),t=!0}}return!t}}class UZe extends ww{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!PZe(t)&&xwe(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Bt.KEYDOWN||e.type==Bt.KEYPRESS){const r=e.originalEvent,n=r.key;if(this.condition_(e)&&(n==="+"||n==="-")){const s=e.map,o=n==="+"?this.delta_:-this.delta_,a=s.getView();aO(a,o,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const GZe=UZe;class qZe{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const n=this.points_[t+2]-this.points_[r+2];if(n<1e3/60)return!1;const s=this.points_[t]-this.points_[r],o=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class _C extends ww{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:bC;this.condition_=e.onFocusOnly?uL(vwe,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Bt.WHEEL)return!0;const r=e.map,n=e.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==Bt.WHEEL&&(s=n.deltaY,cXe&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Zxe),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Ti(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),aO(t,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class HZe extends mg{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=_v),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==PI&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(lO(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class VZe extends mg{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=_v),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],n=this.targetPointers[1],s=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(lO(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const WZe=VZe;function YZe(i){i=i||{};const e=new aa,t=new qZe(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new FZe),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new DZe({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new R_({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new HZe),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new WZe({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new zZe),e.push(new GZe({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new _C({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new jZe({duration:i.zoomDuration})),e}function Ewe(i){if(i instanceof hg){i.setMapInternal(null);return}i instanceof Fl&&i.getLayers().forEach(Ewe)}function Swe(i,e){if(i instanceof hg){i.setMapInternal(e);return}if(i instanceof Fl){const t=i.getLayers().getArray();for(let r=0,n=t.length;r<n;++r)Swe(t[r],e)}}let Cwe=class extends mu{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=XZe(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Zxe,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ss(),this.pixelToCoordinateTransform_=ss(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||ywe(),this.interactions=t.interactions||YZe({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new fwe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ss.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ss.VIEW,this.handleViewChanged_),this.addChangeListener(Ss.SIZE,this.handleSizeChanged_),this.addChangeListener(Ss.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof ru)&&e.view.then(function(n){r.setView(new ru(n))}),this.controls.addEventListener(na.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(na.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(na.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(na.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(na.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(na.REMOVE,n=>{const s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Swe(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Oy,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(n){r.push(n)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(n){n instanceof Fl?t(n.getLayers()):e.push(n)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const n=t.layerFilter!==void 0?t.layerFilter:Oy,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=r.width/n[0],o=r.height/n[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(Ss.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Ym(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Zn(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ss.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof aa){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const n=e[t];if(!n.visible)continue;const s=n.layer.getRenderer();if(s&&!s.ready)return!0;const o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=gs(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Zn(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ss.SIZE)}getView(){return this.get(Ss.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,n){return EZe(this.frameState_,e,t,r,n)}handleBrowserEvent(e,t){t=t||e.type;const r=new Nh(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===Ec.POINTERDOWN||r===Bt.WHEEL||r===Bt.KEYDOWN){const n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===n?n.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let n=this.maxTilesLoading_,s=n;if(e){const o=e.viewHints;if(o[pn.ANIMATING]||o[pn.INTERACTING]){const a=Date.now()-e.time>8;n=a?0:8,s=a?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(Ws.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ws.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new A0(bc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new A0(bc.LOADSTART,this,e))));const r=this.postRenderFunctions_;for(let n=0,s=r.length;n<s;++n)r[n](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)Zr(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Bt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Bt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,dC(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new _Ze(this)),this.mapBrowserEventHandler_=new xZe(this,this.moveTolerance_);for(const s in Mr)this.mapBrowserEventHandler_.addEventListener(Mr[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Bt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Bt.WHEEL,this.boundHandleBrowserEvent_,Jxe?{passive:!1}:!1);const r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Ni(r,Bt.KEYDOWN,this.handleBrowserEvent,this),Ni(r,Bt.KEYPRESS,this.handleBrowserEvent,this)];const n=t.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Zr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Zr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ni(e,Vm.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ni(e,Bt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Zr),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new gf("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ni(e,Vm.PROPERTYCHANGE,this.render,this),Ni(e,Bt.CHANGE,this.render,this),Ni(e,"addlayer",this.handleLayerAdd_,this),Ni(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Ewe(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),n=this.frameState_;let s=null;if(t!==void 0&&Kfe(t)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:ux(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Nt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=ux(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!ih(this.previousExtent_)&&!hu(s.extent,this.previousExtent_))&&(this.dispatchEvent(new A0(bc.MOVESTART,this,n)),this.previousExtent_=Sv(this.previousExtent_)),this.previousExtent_&&!s.viewHints[pn.ANIMATING]&&!s.viewHints[pn.INTERACTING]&&!hu(s.extent,this.previousExtent_)&&(this.dispatchEvent(new A0(bc.MOVEEND,this,s)),wxe(s.extent,this.previousExtent_))),this.dispatchEvent(new A0(bc.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(bc.LOADSTART)||this.hasListener(bc.LOADEND)||this.hasListener(Ws.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new gf("removelayer",t)),this.set(Ss.LAYERGROUP,e)}setSize(e){this.set(Ss.SIZE,e)}setTarget(e){this.set(Ss.TARGET,e)}setView(e){if(!e||e instanceof ru){this.set(Ss.VIEW,e);return}this.set(Ss.VIEW,new ru);const t=this;e.then(function(r){t.setView(new ru(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const n=getComputedStyle(e),s=e.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=e.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!Kfe(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Lxe("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!th(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function XZe(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},r=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Fl({layers:i.layers});t[Ss.LAYERGROUP]=r,t[Ss.TARGET]=i.target,t[Ss.VIEW]=i.view instanceof ru?i.view:new ru;let n;i.controls!==void 0&&(Array.isArray(i.controls)?n=new aa(i.controls.slice()):(Hi(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new aa(i.interactions.slice()):(Hi(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new aa(i.overlays.slice()):(Hi(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new aa,{controls:n,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const ZZe=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}',KZe=".geolocation{top:65px;left:.5em}.ol-touch .geolocation{top:80px}";class Tn extends mu{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Tn(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Zr(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ni(e,Bt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?JZe(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function JZe(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(Hi(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}class hA extends Yc{constructor(e,t,r){super(),r!==void 0&&t===void 0?this.setFlatCoordinates(r,e):(t=t||0,this.setCenterAndRadius(e,t,r))}clone(){const e=new hA(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],l=o*o+a*a;if(l<n){if(l===0)for(let u=0;u<this.stride;++u)r[u]=s[u];else{const u=this.getRadius()/Math.sqrt(l);r[0]=s[0]+u*o,r[1]=s[1]+u*a;for(let c=2;c<this.stride;++c)r[c]=s[c]}return r.length=this.stride,l}return n}containsXY(e,t){const r=this.flatCoordinates,n=e-r[0],s=t-r[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,r=t[this.stride]-t[0];return cu(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Cn(e,t)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:SI(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+r;for(let s=1;s<t;++s)n[t+s]=e[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=Pxe(n,0,e,this.stride);n[s++]=n[0]+t;for(let o=1,a=this.stride;o<a;++o)n[s++]=n[o];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const r=this.getCenter(),n=this.getStride();this.setCenter(BI(r,0,r.length,n,e,t,r)),this.changed()}}hA.prototype.transform;class xC extends jI{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Zr),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ni(e[t],Bt.CHANGE,this.changed,this))}clone(){const e=new xC(dD(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,n){if(n<lg(this.getExtent(),e,t))return n;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)n=s[o].closestPointXY(e,t,r,n);return n}containsXY(e,t){const r=this.geometries_;for(let n=0,s=r.length;n<s;++n)if(r[n].containsXY(e,t))return!0;return!1}computeExtent(e){Sv(e);const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)Exe(e,t[r].getExtent());return e}getGeometries(){return dD(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let n=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(n=!0)}return n?new xC(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let n=0,s=r.length;n<s;++n)r[n].rotate(e,t);this.changed()}scale(e,t,r){r||(r=fo(this.getExtent()));const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)n[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(dD(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let n=0,s=r.length;n<s;++n)r[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function dD(i){return i.map(e=>e.clone())}const Po=xC;function wC(i,e,t,r,n,s,o){let a,l;const u=(t-e)/r;if(u===1)a=e;else if(u===2)a=e,l=n;else if(u!==0){let c=i[e],h=i[e+1],d=0;const p=[0];for(let v=e+r;v<t;v+=r){const b=i[v],_=i[v+1];d+=Math.sqrt((b-c)*(b-c)+(_-h)*(_-h)),p.push(d),c=b,h=_}const m=n*d,g=UWe(p,m);g<0?(l=(m-p[-g-2])/(p[-g-1]-p[-g-2]),a=e+(-g-2)*r):a=e+g*r}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?i[a+c]:El(i[a+c],i[a+r+c],l);return s}function cL(i,e,t,r,n,s){if(t==e)return null;let o;if(n<i[e+r-1])return s?(o=i.slice(e,e+r),o[r-1]=n,o):null;if(i[t-1]<n)return s?(o=i.slice(t-r,t),o[r-1]=n,o):null;if(n==i[e+r-1])return i.slice(e,e+r);let a=e/r,l=t/r;for(;a<l;){const d=a+l>>1;n<i[(d+1)*r-1]?l=d:a=d+1}const u=i[a*r-1];if(n==u)return i.slice((a-1)*r,(a-1)*r+r);const c=i[(a+1)*r-1],h=(n-u)/(c-u);o=[];for(let d=0;d<r-1;++d)o.push(El(i[(a-1)*r+d],i[a*r+d],h));return o.push(n),o}function QZe(i,e,t,r,n,s,o){if(o)return cL(i,e,t[t.length-1],r,n,s);let a;if(n<i[r-1])return s?(a=i.slice(0,r),a[r-1]=n,a):null;if(i[i.length-1]<n)return s?(a=i.slice(i.length-r),a[r-1]=n,a):null;for(let l=0,u=t.length;l<u;++l){const c=t[l];if(e!=c){if(n<i[e+r-1])return null;if(n<=i[c-1])return cL(i,e,c,r,n,!1);e=c}}return null}function Twe(i,e,t,r){let n=i[e],s=i[e+1],o=0;for(let a=e+r;a<t;a+=r){const l=i[a],u=i[a+1];o+=Math.sqrt((l-n)*(l-n)+(u-s)*(u-s)),n=l,s=u}return o}class Vn extends Yc{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Dr(this.flatCoordinates,e),this.changed()}clone(){const e=new Vn(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){return n<lg(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),GI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,n))}forEachSegment(e){return zxe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,cL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return wC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Twe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=iA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Vn(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return rA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yw(this.flatCoordinates,0,e,this.stride),this.changed()}}class da extends Yc{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const n=e,s=[],o=[];for(let l=0,u=n.length;l<u;++l){const c=n[l];Dr(s,c.getFlatCoordinates()),o.push(s.length)}const a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Dr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new da(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,n){return n<lg(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(UI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,n))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,QZe(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return dx(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Vn(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,n=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],u=new Vn(e.slice(s,l),r);n.push(u),s=l}return n}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const n=this.ends_,s=this.stride;for(let o=0,a=n.length;o<a;++o){const l=n[o],u=wC(t,r,l,s,.5);Dr(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=Nxe(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new da(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return zYe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=vw(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class gu extends Yc{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Dr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new gu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){if(n<lg(this.getExtent(),e,t))return n;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=ed(e,t,s[a],s[a+1]);if(u<n){n=u;for(let c=0;c<o;++c)r[c]=s[a+c];r.length=o}}return n}getCoordinates(){return Yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new In(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,n=[];for(let s=0,o=e.length;s<o;s+=r){const a=new In(e.slice(s,s+r),t);n.push(a)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let n=0,s=t.length;n<s;n+=r){const o=t[n],a=t[n+1];if(wI(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yw(this.flatCoordinates,0,e,this.stride),this.changed()}}function Awe(i,e,t,r){const n=[];let s=ha();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=EI(i,e,l[0],r),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return n}class sl extends Yc{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const n=e,s=[],o=[];for(let a=0,l=n.length;a<l;++a){const u=n[a],c=s.length,h=u.getEnds();for(let d=0,p=h.length;d<p;++d)h[d]+=c;Dr(s,u.getFlatCoordinates()),o.push(h)}t=n.length===0?this.getLayout():n[0].getLayout(),e=s,r=o}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Dr(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,s=t.length;n<s;++n)t[n]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const r=new sl(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,n){return n<lg(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(OYe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),PYe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,n))}containsXY(e,t){return jYe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return $Ye(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),rL(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,iL(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Awe(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=jxe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new gu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;qxe(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=rL(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=NYe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new sl(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),n=r[r.length-1];if(t!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=t;return new _s(this.flatCoordinates.slice(t,n),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,n=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),u=l[l.length-1];if(s!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=s;const c=new _s(t.slice(s,u),e,l);n.push(c),s=u}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return UYe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=Fxe(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const n=r[r.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const dpe=ss();class ra{constructor(e,t,r,n,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?hy(this.flatCoordinates_):EI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=fo(this.getExtent());this.flatInteriorPoints_=WI(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Hxe(this.flatCoordinates_,this.ends_),t=Awe(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=jxe(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=wC(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let n=0,s=r.length;n<s;++n){const o=r[n],a=wC(e,t,o,2,.5);Dr(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=At(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const n=Sn(r)/Sn(t);Pl(dpe,r[0],r[3],n,-n,0,0,0),$f(this.flatCoordinates_,0,this.flatCoordinates_.length,2,dpe,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new ra(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=yxe((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":r.length=iA(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),n=[r.length];break;case"MultiLineString":n=[],r.length=Nxe(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,n);break;case"Polygon":n=[],r.length=HI(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,n);break}return n&&(this.simplifiedGeometry_=new ra(this.type_,r,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}ra.prototype.getFlatCoordinates=ra.prototype.getOrientedFlatCoordinates;class eKe{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Tn,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?At(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=At(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ai()}readFeature(e,t){return ai()}readFeatures(e,t){return ai()}readGeometry(e,t){return ai()}readProjection(e){return ai()}writeFeature(e,t){return ai()}writeFeatures(e,t){return ai()}writeGeometry(e,t){return ai()}}const Ew=eKe;function Wn(i,e,t){const r=t?At(t.featureProjection):null,n=t?At(t.dataProjection):null;let s=i;if(r&&n&&!Ro(r,n)){e&&(s=i.clone());const o=e?r:n,a=e?n:r;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(Wc(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*o)/o;return l};s===i&&(s=i.clone()),s.applyTransform(a)}return s}function cO(i,e){const t=e?At(e.featureProjection):null,r=e?At(e.dataProjection):null;return t&&r&&!Ro(t,r)?RI(i,r,t):i}const tKe={Point:In,LineString:Vn,Polygon:_s,MultiPoint:gu,MultiLineString:da,MultiPolygon:sl};function iKe(i,e,t){return Array.isArray(e[0])?(qxe(i,0,e,t)||(i=i.slice(),rL(i,0,e,t)),i):(YI(i,0,e,t)||(i=i.slice(),uC(i,0,e,t)),i)}function kwe(i,e){var s;const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>kwe({...i,geometry:o})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const n=t.layout.length;return Wn(new ra(r,r==="Polygon"?iKe(t.flatCoordinates,t.ends,n):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),n,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function hO(i,e){if(!i)return null;if(Array.isArray(i)){const r=i.map(n=>hO(n,e));return new Po(r)}const t=tKe[i.type];return Wn(new t(i.flatCoordinates,i.layout,i.ends),!1,e)}class dO extends Ew{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(a2(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(a2(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ai()}readFeaturesFromObject(e,t){return ai()}readGeometry(e,t){return this.readGeometryFromObject(a2(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ai()}readProjection(e){return this.readProjectionFromObject(a2(e))}readProjectionFromObject(e){return ai()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ai()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ai()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ai()}}function a2(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}const rKe={Point:aKe,LineString:lKe,Polygon:dKe,MultiPoint:cKe,MultiLineString:uKe,MultiPolygon:hKe},nKe={Point:fKe,LineString:pKe,Polygon:mKe,MultiPoint:yKe,MultiLineString:gKe,MultiPolygon:vKe};class sKe extends dO{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,t,r){const n=e,s=fpe(n.geometry,t),o=new Tn;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),n.attributes){o.setProperties(n.attributes,!0);const a=n.attributes[r];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(e,t){if(t=t||{},e.features){const r=e,n=[],s=r.features;for(let o=0,a=s.length;o<a;++o)n.push(this.readFeatureFromObject(s[o],t,e.objectIdFieldName));return n}return[this.readFeatureFromObject(e,t)]}readGeometryFromObject(e,t){return fpe(e,t)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const r=e.spatialReference.wkid;return At("EPSG:"+r)}return null}writeGeometryObject(e,t){return ppe(e,this.adaptOptions(t))}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={};if(!e.hasProperties())return r.attributes={},r;const n=e.getProperties(),s=e.getGeometry();if(s){r.geometry=ppe(s,t);const o=t&&(t.dataProjection||t.featureProjection);o&&(r.geometry.spatialReference={wkid:Number(At(o).getCode().split(":").pop())}),delete n[e.getGeometryName()]}return ud(n)?r.attributes={}:r.attributes=n,r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let n=0,s=e.length;n<s;++n)r.push(this.writeFeatureObject(e[n],t));return{features:r}}}function fpe(i,e){if(!i)return null;let t;if(typeof i.x=="number"&&typeof i.y=="number")t="Point";else if(i.points)t="MultiPoint";else if(i.paths)i.paths.length===1?t="LineString":t="MultiLineString";else if(i.rings){const n=i,s=Mv(n),o=oKe(n.rings,s);o.length===1?(t="Polygon",i=Object.assign({},i,{rings:o[0]})):(t="MultiPolygon",i=Object.assign({},i,{rings:o}))}const r=rKe[t];return Wn(r(i),!1,e)}function oKe(i,e){const t=[],r=[],n=[];let s,o;for(s=0,o=i.length;s<o;++s)t.length=0,yw(t,0,i[s],e.length),nA(t,0,t.length,e.length)?r.push([i[s]]):n.push(i[s]);for(;n.length;){const a=n.shift();let l=!1;for(s=r.length-1;s>=0;s--){const u=r[s][0];if(Io(new Zf(u).getExtent(),new Zf(a).getExtent())){r[s].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function aKe(i){let e;return i.m!==void 0&&i.z!==void 0?e=new In([i.x,i.y,i.z,i.m],"XYZM"):i.z!==void 0?e=new In([i.x,i.y,i.z],"XYZ"):i.m!==void 0?e=new In([i.x,i.y,i.m],"XYM"):e=new In([i.x,i.y]),e}function lKe(i){const e=Mv(i);return new Vn(i.paths[0],e)}function uKe(i){const e=Mv(i);return new da(i.paths,e)}function Mv(i){let e="XY";return i.hasZ===!0&&i.hasM===!0?e="XYZM":i.hasZ===!0?e="XYZ":i.hasM===!0&&(e="XYM"),e}function cKe(i){const e=Mv(i);return new gu(i.points,e)}function hKe(i){const e=Mv(i);return new sl(i.rings,e)}function dKe(i){const e=Mv(i);return new _s(i.rings,e)}function fKe(i,e){const t=i.getCoordinates();let r;const n=i.getLayout();if(n==="XYZ")r={x:t[0],y:t[1],z:t[2]};else if(n==="XYM")r={x:t[0],y:t[1],m:t[2]};else if(n==="XYZM")r={x:t[0],y:t[1],z:t[2],m:t[3]};else if(n==="XY")r={x:t[0],y:t[1]};else throw new Error("Invalid geometry layout");return r}function Sw(i){const e=i.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function pKe(i,e){const t=Sw(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:[i.getCoordinates()]}}function mKe(i,e){const t=Sw(i);return{hasZ:t.hasZ,hasM:t.hasM,rings:i.getCoordinates(!1)}}function gKe(i,e){const t=Sw(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:i.getCoordinates()}}function yKe(i,e){const t=Sw(i);return{hasZ:t.hasZ,hasM:t.hasM,points:i.getCoordinates()}}function vKe(i,e){const t=Sw(i),r=i.getCoordinates(!1),n=[];for(let s=0;s<r.length;s++)for(let o=r[s].length-1;o>=0;o--)n.push(r[s][o]);return{hasZ:t.hasZ,hasM:t.hasM,rings:n}}function ppe(i,e){const t=nKe[i.getType()];return t(Wn(i,!0,e),e)}const bKe=sKe;class Lv extends dO{constructor(e){e=e||{},super(),this.dataProjection=At(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=At(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const n=fO(r.geometry);if(this.featureClass===ra)return kwe({geometry:n,id:r.id,properties:r.properties},t);const s=new Tn;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(hO(n,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let n=null;if(r.type==="FeatureCollection"){const s=e;n=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const u=this.readFeatureFromObject(o[a],t);u&&n.push(u)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return _Ke(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=At(t.properties.name);else if(t.type==="EPSG")r=At("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(r.id=n),!e.hasProperties())return r;const s=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=hL(o,t),delete s[e.getGeometryName()]),ud(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let n=0,s=e.length;n<s;++n)r.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return hL(e,this.adaptOptions(t))}}function fO(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=wKe(i);break}case"LineString":{t=EKe(i);break}case"Polygon":{t=AKe(i);break}case"MultiPoint":{t=CKe(i);break}case"MultiLineString":{t=SKe(i);break}case"MultiPolygon":{t=TKe(i);break}case"GeometryCollection":{t=xKe(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function _Ke(i,e){const t=fO(i);return hO(t,e)}function xKe(i,e){return i.geometries.map(function(r){return fO(r)})}function wKe(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:cg(e.length)}}function EKe(i){var r;const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:cg(((r=e[0])==null?void 0:r.length)||2)}}function SKe(i){var s,o;const e=i.coordinates,t=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,r=[],n=vw(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:n,layout:cg(t)}}function CKe(i){var t;const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:cg(((t=e[0])==null?void 0:t.length)||2)}}function TKe(i){var s,o;const e=i.coordinates,t=[],r=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,n=Fxe(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:cg(r)}}function AKe(i){var s,o;const e=i.coordinates,t=[],r=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,n=vw(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:n,layout:cg(r)}}function hL(i,e){i=Wn(i,!0,e);const t=i.getType();let r;switch(t){case"Point":{r=IKe(i);break}case"LineString":{r=DKe(i);break}case"Polygon":{r=OKe(i,e);break}case"MultiPoint":{r=LKe(i);break}case"MultiLineString":{r=MKe(i);break}case"MultiPolygon":{r=RKe(i,e);break}case"GeometryCollection":{r=kKe(i,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function kKe(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(r){return hL(r,e)})}}function DKe(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function MKe(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function LKe(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function RKe(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function IKe(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function OKe(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}const Km="http://www.w3.org/2001/XMLSchema-instance";function Ri(i,e){return Rv().createElementNS(i,e)}function Ta(i,e){return Dwe(i,e,[]).join("")}function Dwe(i,e,t){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{let r;for(r=i.firstChild;r;r=r.nextSibling)Dwe(r,e,t)}return t}function ou(i){return"documentElement"in i}function PKe(i,e,t){return i.getAttributeNS(e,t)||""}function au(i){return new DOMParser().parseFromString(i,"application/xml")}function EC(i,e){return function(t,r){const n=i.call(e!==void 0?e:this,t,r);if(n!==void 0){const s=r[r.length-1];Dr(s,n)}}}function Zt(i,e){return function(t,r){const n=i.call(e!==void 0?e:this,t,r);n!==void 0&&r[r.length-1].push(n)}}function fi(i,e){return function(t,r){const n=i.call(e!==void 0?e:this,t,r);n!==void 0&&(r[r.length-1]=n)}}function An(i,e,t){return function(r,n){const s=i.call(t!==void 0?t:this,r,n);if(s!==void 0){const o=n[n.length-1],a=e!==void 0?e:r.localName;let l;a in o?l=o[a]:(l=[],o[a]=l),l.push(s)}}}function Ee(i,e,t){return function(r,n){const s=i.call(t!==void 0?t:this,r,n);if(s!==void 0){const o=n[n.length-1],a=e!==void 0?e:r.localName;o[a]=s}}}function Me(i,e){return function(t,r,n){i.call(e!==void 0?e:this,t,r,n),n[n.length-1].node.appendChild(t)}}function Mwe(i,e){let t,r;return function(n,s,o){if(t===void 0){t={};const a={};a[n.localName]=i,t[n.namespaceURI]=a,r=as(n.localName)}Lwe(t,r,s,o)}}function as(i,e){return function(t,r,n){const o=r[r.length-1].node;let a=i;a===void 0&&(a=n);const l=e!==void 0?e:o.namespaceURI;return Ri(l,a)}}const mo=as();function ol(i,e){const t=e.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=i[e[n]];return r}function it(i,e,t){t=t!==void 0?t:{};let r,n;for(r=0,n=i.length;r<n;++r)t[i[r]]=e;return t}function rl(i,e,t,r){let n;for(n=e.firstElementChild;n;n=n.nextElementSibling){const s=i[n.namespaceURI];if(s!==void 0){const o=s[n.localName];o!==void 0&&o.call(r,n,t)}}}function at(i,e,t,r,n){return r.push(i),rl(e,t,r,n),r.pop()}function Lwe(i,e,t,r,n,s){const o=(n!==void 0?n:t).length;let a,l;for(let u=0;u<o;++u)a=t[u],a!==void 0&&(l=e.call(s!==void 0?s:this,a,r,n!==void 0?n[u]:void 0),l!==void 0&&i[l.namespaceURI][l.localName].call(s,l,a,r))}function Ai(i,e,t,r,n,s,o){return n.push(i),Lwe(e,t,r,n,s,o),n.pop()}let fD;function FKe(){return fD===void 0&&typeof XMLSerializer<"u"&&(fD=new XMLSerializer),fD}let pD;function Rv(){return pD===void 0&&typeof document<"u"&&(pD=document.implementation.createDocument("","",null)),pD}class Cw extends Ew{constructor(){super(),this.xmlSerializer_=FKe()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=au(e);return this.readFeatureFromDocument(r,t)}return ou(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=au(e);return this.readFeaturesFromDocument(r,t)}return ou(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Dr(r,this.readFeaturesFromNode(n,t));return r}readFeaturesFromNode(e,t){return ai()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=au(e);return this.readGeometryFromDocument(r,t)}return ou(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=au(e);return this.readProjectionFromDocument(t)}return ou(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}const rd="http://www.opengis.net/gml",NKe=/^\s*$/;class Xt extends Cw{constructor(e){super(),e=e||{},this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Zt(this.readFeaturesInternal),featureMembers:fi(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,t){const r=e.localName;let n=null;if(r=="FeatureCollection")n=at([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const s=t[0];let o=s.featureType,a=s.featureNS;const l="p",u="p0";if(!o&&e.childNodes){o=[],a={};for(let d=0,p=e.childNodes.length;d<p;++d){const m=e.childNodes[d];if(m.nodeType===1){const g=m.nodeName.split(":").pop();if(!o.includes(g)){let v="",b=0;const _=m.namespaceURI;for(const E in a){if(a[E]===_){v=E;break}++b}v||(v=l+b,a[v]=_),o.push(v+":"+g)}}}r!="featureMember"&&(s.featureType=o,s.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[u]=d}const c={},h=Array.isArray(o)?o:[o];for(const d in a){const p={};for(let m=0,g=h.length;m<g;++m)(h[m].includes(":")?h[m].split(":")[0]:u)===d&&(p[h[m].split(":").pop()]=r=="featureMembers"?Zt(this.readFeatureElement,this):fi(this.readFeatureElement,this));c[a[d]]=p}r=="featureMember"||r=="member"?n=at(void 0,c,e,t):n=at([],c,e,t)}return n===null&&(n=[]),n}readGeometryOrExtent(e,t){const r=t[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),at(null,this.GEOMETRY_PARSERS,e,t,this)}readExtentElement(e,t){const r=t[0],n=this.readGeometryOrExtent(e,t);return n?cO(n,r):void 0}readGeometryElement(e,t){const r=t[0],n=this.readGeometryOrExtent(e,t);return n?Wn(n,!1,r):void 0}readFeatureElementInternal(e,t,r){let n;const s={};for(let l=e.firstElementChild;l;l=l.nextElementSibling){let u;const c=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=Ta(l,!1),NKe.test(u)&&(u=void 0)):(r&&(u=c==="boundedBy"?this.readExtentElement(l,t):this.readGeometryElement(l,t)),u?c!=="boundedBy"&&(n=c):u=this.readFeatureElementInternal(l,t,!1));const h=l.attributes.length;if(h>0&&!(u instanceof jI)){u={_content_:u};for(let d=0;d<h;d++){const p=l.attributes[d].name;u[p]=l.attributes[d].value}}s[c]?(s[c]instanceof Array||(s[c]=[s[c]]),s[c].push(u)):s[c]=u}if(!r)return s;const o=new Tn(s);n&&o.setGeometryName(n);const a=e.getAttribute("fid")||PKe(e,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(e,t){return this.readFeatureElementInternal(e,t,!0)}readPoint(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new In(r,"XYZ")}readMultiPoint(e,t){const r=at([],this.MULTIPOINT_PARSERS,e,t,this);if(r)return new gu(r)}readMultiLineString(e,t){const r=at([],this.MULTILINESTRING_PARSERS,e,t,this);if(r)return new da(r)}readMultiPolygon(e,t){const r=at([],this.MULTIPOLYGON_PARSERS,e,t,this);if(r)return new sl(r)}pointMemberParser(e,t){rl(this.POINTMEMBER_PARSERS,e,t,this)}lineStringMemberParser(e,t){rl(this.LINESTRINGMEMBER_PARSERS,e,t,this)}polygonMemberParser(e,t){rl(this.POLYGONMEMBER_PARSERS,e,t,this)}readLineString(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new Vn(r,"XYZ")}readFlatLinearRing(e,t){const r=at(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);if(r)return r}readLinearRing(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new Zf(r,"XYZ")}readPolygon(e,t){const r=at([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(r&&r[0]){const n=r[0],s=[n.length];let o,a;for(o=1,a=r.length;o<a;++o)Dr(n,r[o]),s.push(n.length);return new _s(n,"XYZ",s)}}readFlatCoordinatesFromNode(e,t){return at(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}readGeometryFromNode(e,t){const r=this.readGeometryElement(e,[this.getReadOptions(e,t||{})]);return r||null}readFeaturesFromNode(e,t){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[r])||[]}readProjectionFromNode(e){return At(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}Xt.prototype.namespace=rd;Xt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};Xt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};Xt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};Xt.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Zt(Xt.prototype.pointMemberParser),pointMembers:Zt(Xt.prototype.pointMemberParser)}};Xt.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Zt(Xt.prototype.lineStringMemberParser),lineStringMembers:Zt(Xt.prototype.lineStringMemberParser)}};Xt.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Zt(Xt.prototype.polygonMemberParser),polygonMembers:Zt(Xt.prototype.polygonMemberParser)}};Xt.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Zt(Xt.prototype.readFlatCoordinatesFromNode)}};Xt.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Zt(Xt.prototype.readLineString)}};Xt.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Zt(Xt.prototype.readPolygon)}};Xt.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:fi(Xt.prototype.readFlatLinearRing)}};function Jf(i){const e=Ta(i,!1);return Rm(e)}function Rm(i){const e=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(e)return e[1]!==void 0||!1}function dA(i){const e=Ta(i,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function lr(i){const e=Ta(i,!1);return jh(e)}function jh(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function ys(i){const e=Ta(i,!1);return Xh(e)}function Xh(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function mt(i){return Ta(i,!1).trim()}function Wy(i,e){xi(i,e?"1":"0")}function $Ke(i,e){i.appendChild(Rv().createCDATASection(e))}function BKe(i,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+gm(t.getUTCMonth()+1,2)+"-"+gm(t.getUTCDate(),2)+"T"+gm(t.getUTCHours(),2)+":"+gm(t.getUTCMinutes(),2)+":"+gm(t.getUTCSeconds(),2)+"Z";i.appendChild(Rv().createTextNode(r))}function Ha(i,e){const t=e.toPrecision();i.appendChild(Rv().createTextNode(t))}function SC(i,e){const t=e.toString();i.appendChild(Rv().createTextNode(t))}function xi(i,e){i.appendChild(Rv().createTextNode(e))}const jKe=rd+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",zKe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class or extends Xt{constructor(e){e=e||{},super(e),this.FEATURE_COLLECTION_PARSERS[rd].featureMember=Zt(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:jKe}readFlatCoordinates(e,t){const r=Ta(e,!1).replace(/^\s*|\s*$/g,""),s=t[0].srsName;let o="enu";if(s){const u=At(s);u&&(o=u.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let u=0,c=a.length;u<c;u++){const h=a[u].split(/,+/),d=parseFloat(h[0]),p=parseFloat(h[1]),m=h.length===3?parseFloat(h[2]):0;o.substr(0,2)==="en"?l.push(d,p,m):l.push(p,d,m)}return l}readBox(e,t){const r=at([null],this.BOX_PARSERS_,e,t,this);return cu(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(e,t){const r=at(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}outerBoundaryIsParser(e,t){const r=at(void 0,this.RING_PARSERS,e,t,this);if(r){const n=t[t.length-1];n[0]=r}}GEOMETRY_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.multiSurface,o=n.surface,a=n.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),Ri("http://www.opengis.net/gml",r)}writeFeatureElement(e,t,r){const n=t.getId();n&&e.setAttribute("fid",n);const s=r[r.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(t.hasProperties()){const h=t.getProperties();for(const d in h){const p=h[d];p!==null&&(l.push(d),u.push(p),d==a||typeof p.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=Me(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=Me(xi)))}}const c=Object.assign({},s);c.node=e,Ai(c,s.serializers,as(void 0,o),u,r,l)}writeCurveOrLineString(e,t,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,r)}else if(e.nodeName==="Curve"){const o=Ri(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,r)}}writeLineStringOrCurveMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}writeMultiCurveOrLineString(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();Ai({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(e,t,r){const n=r[r.length-1],s=Object.assign({},n);s.node=e;let o;Array.isArray(t)?o=cO(t,n):o=Wn(t,!0,n),Ai(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}createCoordinatesNode_(e){const t=Ri(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}writeCoordinates_(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=t.getCoordinates(),l=a.length,u=new Array(l);for(let c=0;c<l;++c){const h=a[c];u[c]=this.getCoords_(h,o,s)}xi(e,u.join(" "))}writeCurveSegments_(e,t,r){const n=Ri(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}writeSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();Ai({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(e.nodeName==="Surface"){const a=Ri(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,r)}}RING_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.node,o=n.exteriorWritten;return o===void 0&&(n.exteriorWritten=!0),Ri(s.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,t,r){const n=Ri(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}writeRing(e,t,r){const n=Ri(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}getCoords_(e,t,r){let n="enu";t&&(n=At(t).getAxisOrientation());let s=n.substr(0,2)==="en"?e[0]+","+e[1]:e[1]+","+e[0];if(r){const o=e[2]||0;s+=","+o}return s}writePoint(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;o&&e.setAttribute("srsName",o);const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);const l=t.getCoordinates(),u=this.getCoords_(l,o,s);xi(a,u)}writeMultiPoint(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;o&&e.setAttribute("srsName",o);const a=t.getPoints();Ai({node:e,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,as("pointMember"),a,r,void 0,this)}writePointMember(e,t,r){const n=Ri(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}writeLinearRing(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,r)}writeMultiSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();Ai({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}writeEnvelope(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];Ai({node:e},this.ENVELOPE_SERIALIZERS,mo,a,r,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,r){const n=t[t.length-1].node;return Ri("http://www.opengis.net/gml",zKe[n.nodeName])}}or.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:fi(or.prototype.readFlatCoordinates)}};or.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:or.prototype.innerBoundaryIsParser,outerBoundaryIs:or.prototype.outerBoundaryIsParser}};or.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Zt(or.prototype.readFlatCoordinates)}};or.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:fi(Xt.prototype.readPoint),MultiPoint:fi(Xt.prototype.readMultiPoint),LineString:fi(Xt.prototype.readLineString),MultiLineString:fi(Xt.prototype.readMultiLineString),LinearRing:fi(Xt.prototype.readLinearRing),Polygon:fi(Xt.prototype.readPolygon),MultiPolygon:fi(Xt.prototype.readMultiPolygon),Box:fi(or.prototype.readBox)}};or.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Me(or.prototype.writeCurveOrLineString),MultiCurve:Me(or.prototype.writeMultiCurveOrLineString),Point:Me(or.prototype.writePoint),MultiPoint:Me(or.prototype.writeMultiPoint),LineString:Me(or.prototype.writeCurveOrLineString),MultiLineString:Me(or.prototype.writeMultiCurveOrLineString),LinearRing:Me(or.prototype.writeLinearRing),Polygon:Me(or.prototype.writeSurfaceOrPolygon),MultiPolygon:Me(or.prototype.writeMultiSurfaceOrPolygon),Surface:Me(or.prototype.writeSurfaceOrPolygon),MultiSurface:Me(or.prototype.writeMultiSurfaceOrPolygon),Envelope:Me(or.prototype.writeEnvelope)}};or.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Me(or.prototype.writeLineStringOrCurveMember),curveMember:Me(or.prototype.writeLineStringOrCurveMember)}};or.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Me(or.prototype.writeRing),innerBoundaryIs:Me(or.prototype.writeRing)}};or.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Me(or.prototype.writePointMember)}};or.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Me(or.prototype.writeSurfaceOrPolygonMember),polygonMember:Me(or.prototype.writeSurfaceOrPolygonMember)}};or.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Me(xi),upperCorner:Me(xi)}};const UKe=rd+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",GKe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Qt extends Xt{constructor(e){e=e||{},super(e),this.surface_=e.surface!==void 0?e.surface:!1,this.curve_=e.curve!==void 0?e.curve:!1,this.multiCurve_=e.multiCurve!==void 0?e.multiCurve:!0,this.multiSurface_=e.multiSurface!==void 0?e.multiSurface:!0,this.schemaLocation=e.schemaLocation?e.schemaLocation:UKe,this.hasZ=e.hasZ!==void 0?e.hasZ:!1}readMultiCurve(e,t){const r=at([],this.MULTICURVE_PARSERS,e,t,this);if(r)return new da(r)}readFlatCurveRing(e,t){const r=at([],this.MULTICURVE_PARSERS,e,t,this),n=[];for(let s=0,o=r.length;s<o;++s)Dr(n,r[s].getFlatCoordinates());return n}readMultiSurface(e,t){const r=at([],this.MULTISURFACE_PARSERS,e,t,this);if(r)return new sl(r)}curveMemberParser(e,t){rl(this.CURVEMEMBER_PARSERS,e,t,this)}surfaceMemberParser(e,t){rl(this.SURFACEMEMBER_PARSERS,e,t,this)}readPatch(e,t){return at([null],this.PATCHES_PARSERS,e,t,this)}readSegment(e,t){return at([],this.SEGMENTS_PARSERS,e,t,this)}readPolygonPatch(e,t){return at([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}readLineStringSegment(e,t){return at([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}interiorParser(e,t){const r=at(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}exteriorParser(e,t){const r=at(void 0,this.RING_PARSERS,e,t,this);if(r){const n=t[t.length-1];n[0]=r}}readSurface(e,t){const r=at([null],this.SURFACE_PARSERS,e,t,this);if(r&&r[0]){const n=r[0],s=[n.length];let o,a;for(o=1,a=r.length;o<a;++o)Dr(n,r[o]),s.push(n.length);return new _s(n,"XYZ",s)}}readCurve(e,t){const r=at([null],this.CURVE_PARSERS,e,t,this);if(r)return new Vn(r,"XYZ")}readEnvelope(e,t){const r=at([null],this.ENVELOPE_PARSERS,e,t,this);return cu(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(e,t){let r=Ta(e,!1);const n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let o;for(;o=n.exec(r);)s.push(parseFloat(o[1])),r=r.substr(o[0].length);if(r!=="")return;const l=t[0].srsName;let u="enu";if(l&&(u=At(l).getAxisOrientation()),u==="neu"){let h,d;for(h=0,d=s.length;h<d;h+=3){const p=s[h],m=s[h+1];s[h]=m,s[h+1]=p}}const c=s.length;if(c==2&&s.push(0),c!==0)return s}readFlatPosList(e,t){const r=Ta(e,!1).replace(/^\s*|\s*$/g,""),n=t[0],s=n.srsName,o=n.srsDimension;let a="enu";s&&(a=At(s).getAxisOrientation());const l=r.split(/\s+/);let u=2;e.getAttribute("srsDimension")?u=Xh(e.getAttribute("srsDimension")):e.getAttribute("dimension")?u=Xh(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?u=Xh(e.parentNode.getAttribute("srsDimension")):o&&(u=Xh(o));let c,h,d;const p=[];for(let m=0,g=l.length;m<g;m+=u)c=parseFloat(l[m]),h=parseFloat(l[m+1]),d=u===3?parseFloat(l[m+2]):0,a.substr(0,2)==="en"?p.push(c,h,d):p.push(h,c,d);return p}writePos_(e,t,r){const n=r[r.length-1],s=n.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=n.srsName;let l="enu";a&&(l=At(a).getAxisOrientation());const u=t.getCoordinates();let c;if(l.substr(0,2)==="en"?c=u[0]+" "+u[1]:c=u[1]+" "+u[0],s){const h=u[2]||0;c+=" "+h}xi(e,c)}getCoords_(e,t,r){let n="enu";t&&(n=At(t).getAxisOrientation());let s=n.substr(0,2)==="en"?e[0]+" "+e[1]:e[1]+" "+e[0];if(r){const o=e[2]||0;s+=" "+o}return s}writePosList_(e,t,r){const n=r[r.length-1],s=n.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=n.srsName,l=t.getCoordinates(),u=l.length,c=new Array(u);let h;for(let d=0;d<u;++d)h=l[d],c[d]=this.getCoords_(h,a,s);xi(e,c.join(" "))}writePoint(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=Ri(e.namespaceURI,"pos");e.appendChild(o),this.writePos_(o,t,r)}writeEnvelope(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];Ai({node:e},this.ENVELOPE_SERIALIZERS,mo,a,r,o,this)}writeLinearRing(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=Ri(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,r)}RING_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.node,o=n.exteriorWritten;return o===void 0&&(n.exteriorWritten=!0),Ri(s.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();Ai({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(e.nodeName==="Surface"){const a=Ri(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,r)}}writeCurveOrLineString(e,t,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=Ri(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,r)}else if(e.nodeName==="Curve"){const o=Ri(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,r)}}writeMultiSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();Ai({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(e,t,r){const n=r[r.length-1],s=n.srsName,o=n.hasZ;s&&e.setAttribute("srsName",s);const a=t.getPoints();Ai({node:e,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,as("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();Ai({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(e,t,r){const n=Ri(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}writeSurfaceOrPolygonMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}writePointMember(e,t,r){const n=Ri(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}writeLineStringOrCurveMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}writeSurfacePatches_(e,t,r){const n=Ri(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}writeCurveSegments_(e,t,r){const n=Ri(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}writeGeometryElement(e,t,r){const n=r[r.length-1],s=Object.assign({},n);s.node=e;let o;Array.isArray(t)?o=cO(t,n):o=Wn(t,!0,n),Ai(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}writeFeatureElement(e,t,r){const n=t.getId();n&&e.setAttribute("fid",n);const s=r[r.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(t.hasProperties()){const h=t.getProperties();for(const d in h){const p=h[d];p!==null&&(l.push(d),u.push(p),d==a||typeof p.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=Me(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=Me(xi)))}}const c=Object.assign({},s);c.node=e,Ai(c,s.serializers,as(void 0,o),u,r,l)}writeFeatureMembers_(e,t,r){const n=r[r.length-1],s=n.featureType,o=n.featureNS,a={};a[o]={},a[o][s]=Me(this.writeFeatureElement,this);const l=Object.assign({},n);l.node=e,Ai(l,a,as(s,o),t,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,r){const n=t[t.length-1].node;return Ri(this.namespace,GKe[n.nodeName])}GEOMETRY_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.multiSurface,o=n.surface,a=n.curve,l=n.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),Ri(this.namespace,r)}writeGeometryNode(e,t){t=this.adaptOptions(t);const r=Ri(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(n,t),this.writeGeometryElement(r,e,[n]),r}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=Ri(this.namespace,"featureMembers");r.setAttributeNS(Km,"xsi:schemaLocation",this.schemaLocation);const n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object.assign(n,t),this.writeFeatureMembers_(r,e,[n]),r}}Qt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:fi(Qt.prototype.readFlatPos),posList:fi(Qt.prototype.readFlatPosList),coordinates:fi(or.prototype.readFlatCoordinates)}};Qt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Qt.prototype.interiorParser,exterior:Qt.prototype.exteriorParser}};Qt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:fi(Xt.prototype.readPoint),MultiPoint:fi(Xt.prototype.readMultiPoint),LineString:fi(Xt.prototype.readLineString),MultiLineString:fi(Xt.prototype.readMultiLineString),LinearRing:fi(Xt.prototype.readLinearRing),Polygon:fi(Xt.prototype.readPolygon),MultiPolygon:fi(Xt.prototype.readMultiPolygon),Surface:fi(Qt.prototype.readSurface),MultiSurface:fi(Qt.prototype.readMultiSurface),Curve:fi(Qt.prototype.readCurve),MultiCurve:fi(Qt.prototype.readMultiCurve),Envelope:fi(Qt.prototype.readEnvelope)}};Qt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Zt(Qt.prototype.curveMemberParser),curveMembers:Zt(Qt.prototype.curveMemberParser)}};Qt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Zt(Qt.prototype.surfaceMemberParser),surfaceMembers:Zt(Qt.prototype.surfaceMemberParser)}};Qt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Zt(Xt.prototype.readLineString),Curve:Zt(Qt.prototype.readCurve)}};Qt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Zt(Xt.prototype.readPolygon),Surface:Zt(Qt.prototype.readSurface)}};Qt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:fi(Qt.prototype.readPatch)}};Qt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:fi(Qt.prototype.readSegment)}};Qt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Zt(Qt.prototype.readFlatPosList),upperCorner:Zt(Qt.prototype.readFlatPosList)}};Qt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:fi(Qt.prototype.readPolygonPatch)}};Qt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:EC(Qt.prototype.readLineStringSegment)}};Xt.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:fi(Xt.prototype.readFlatLinearRing),Ring:fi(Qt.prototype.readFlatCurveRing)}};Qt.prototype.writeFeatures;Qt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Me(Qt.prototype.writeRing),interior:Me(Qt.prototype.writeRing)}};Qt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Me(xi),upperCorner:Me(xi)}};Qt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Me(Qt.prototype.writeSurfaceOrPolygonMember),polygonMember:Me(Qt.prototype.writeSurfaceOrPolygonMember)}};Qt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Me(Qt.prototype.writePointMember)}};Qt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Me(Qt.prototype.writeLineStringOrCurveMember),curveMember:Me(Qt.prototype.writeLineStringOrCurveMember)}};Qt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Me(Qt.prototype.writeCurveOrLineString),MultiCurve:Me(Qt.prototype.writeMultiCurveOrLineString),Point:Me(Qt.prototype.writePoint),MultiPoint:Me(Qt.prototype.writeMultiPoint),LineString:Me(Qt.prototype.writeCurveOrLineString),MultiLineString:Me(Qt.prototype.writeMultiCurveOrLineString),LinearRing:Me(Qt.prototype.writeLinearRing),Polygon:Me(Qt.prototype.writeSurfaceOrPolygon),MultiPolygon:Me(Qt.prototype.writeMultiSurfaceOrPolygon),Surface:Me(Qt.prototype.writeSurfaceOrPolygon),MultiSurface:Me(Qt.prototype.writeMultiSurfaceOrPolygon),Envelope:Me(Qt.prototype.writeEnvelope)}};const tr=Qt,pO=tr;pO.prototype.writeFeatures;pO.prototype.writeFeaturesNode;const qKe=pO,qn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],HKe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",VKe={rte:Rwe,trk:Iwe,wpt:Owe},WKe=it(qn,{rte:Zt(Rwe),trk:Zt(Iwe),wpt:Zt(Owe)}),YKe=it(qn,{text:Ee(mt,"linkText"),type:Ee(mt,"linkType")}),XKe=it(qn,{name:Ee(mt),email:wJe,link:Tw}),ZKe=it(qn,{name:Ee(mt),desc:Ee(mt),author:Ee(bJe),copyright:Ee(_Je),link:Tw,time:Ee(dA),keywords:Ee(mt),bounds:xJe,extensions:fA}),KKe=it(qn,{year:Ee(ys),license:Ee(mt)}),JKe=it(qn,{rte:Me(TJe),trk:Me(AJe),wpt:Me(DJe)});class QKe extends Cw{constructor(e){super(),e=e||{},this.dataProjection=At("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const n=e[t];if(this.readExtensions_){const s=n.get("extensionsNode_")||null;this.readExtensions_(n,s)}n.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(au(e)):ou(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!qn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(qn.includes(t.namespaceURI)&&t.localName==="metadata")return at({},ZKe,t,[]);return null}readFeatureFromNode(e,t){if(!qn.includes(e.namespaceURI))return null;const r=VKe[e.localName];if(!r)return null;const n=r(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null}readFeaturesFromNode(e,t){if(!qn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=at([],WKe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=Ri("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Km),r.setAttributeNS(Km,"xsi:schemaLocation",HKe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Ai({node:r},JKe,vJe,e,[t]),r}}const eJe=it(qn,{name:Ee(mt),cmt:Ee(mt),desc:Ee(mt),src:Ee(mt),link:Tw,number:Ee(ys),extensions:fA,type:Ee(mt),rtept:EJe}),tJe=it(qn,{ele:Ee(lr),time:Ee(dA)}),iJe=it(qn,{name:Ee(mt),cmt:Ee(mt),desc:Ee(mt),src:Ee(mt),link:Tw,number:Ee(ys),type:Ee(mt),extensions:fA,trkseg:CJe}),rJe=it(qn,{trkpt:SJe}),nJe=it(qn,{ele:Ee(lr),time:Ee(dA)}),sJe=it(qn,{ele:Ee(lr),time:Ee(dA),magvar:Ee(lr),geoidheight:Ee(lr),name:Ee(mt),cmt:Ee(mt),desc:Ee(mt),src:Ee(mt),link:Tw,sym:Ee(mt),type:Ee(mt),fix:Ee(mt),sat:Ee(ys),hdop:Ee(lr),vdop:Ee(lr),pdop:Ee(lr),ageofdgpsdata:Ee(lr),dgpsid:Ee(ys),extensions:fA}),oJe=["text","type"],aJe=it(qn,{text:Me(xi),type:Me(xi)}),lJe=it(qn,["name","cmt","desc","src","link","number","type","rtept"]),uJe=it(qn,{name:Me(xi),cmt:Me(xi),desc:Me(xi),src:Me(xi),link:Me(yO),number:Me(SC),type:Me(xi),rtept:Mwe(Me(vO))}),cJe=it(qn,["ele","time"]),hJe=it(qn,["name","cmt","desc","src","link","number","type","trkseg"]),dJe=it(qn,{name:Me(xi),cmt:Me(xi),desc:Me(xi),src:Me(xi),link:Me(yO),number:Me(SC),type:Me(xi),trkseg:Mwe(Me(kJe))}),fJe=as("trkpt"),pJe=it(qn,{trkpt:Me(vO)}),mJe=it(qn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),gJe=it(qn,{ele:Me(Ha),time:Me(BKe),magvar:Me(Ha),geoidheight:Me(Ha),name:Me(xi),cmt:Me(xi),desc:Me(xi),src:Me(xi),link:Me(yO),sym:Me(xi),type:Me(xi),fix:Me(xi),sat:Me(SC),hdop:Me(Ha),vdop:Me(Ha),pdop:Me(Ha),ageofdgpsdata:Me(Ha),dgpsid:Me(SC)}),yJe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function vJe(i,e,t){const r=i.getGeometry();if(r){const n=yJe[r.getType()];if(n){const s=e[e.length-1].node;return Ri(s.namespaceURI,n)}}}function mO(i,e,t,r){return i.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(i.push(r.ele),delete r.ele,e.hasZ=!0):i.push(0),"time"in r?(i.push(r.time),delete r.time,e.hasM=!0):i.push(0),i}function gO(i,e,t){let r="XY",n=2;if(i.hasZ&&i.hasM?(r="XYZM",n=4):i.hasZ?(r="XYZ",n=3):i.hasM&&(r="XYM",n=3),n!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*n]=e[s*4],e[s*n+1]=e[s*4+1],i.hasZ&&(e[s*n+2]=e[s*4+2]),i.hasM&&(e[s*n+2]=e[s*4+3]);if(e.length=e.length/4*n,t)for(let s=0,o=t.length;s<o;s++)t[s]=t[s]/4*n}return r}function bJe(i,e){const t=at({},XKe,i,e);if(t)return t}function _Je(i,e){const t=at({},KKe,i,e);if(t){const r=i.getAttribute("author");return r!==null&&(t.author=r),t}}function xJe(i,e){const t=e[e.length-1],r=i.getAttribute("minlat"),n=i.getAttribute("minlon"),s=i.getAttribute("maxlat"),o=i.getAttribute("maxlon");n!==null&&r!==null&&o!==null&&s!==null&&(t.bounds=[[parseFloat(n),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function wJe(i,e){const t=e[e.length-1],r=i.getAttribute("id"),n=i.getAttribute("domain");r!==null&&n!==null&&(t.email=`${r}@${n}`)}function Tw(i,e){const t=e[e.length-1],r=i.getAttribute("href");r!==null&&(t.link=r),rl(YKe,i,e)}function fA(i,e){const t=e[e.length-1];t.extensionsNode_=i}function EJe(i,e){const t=at({},tJe,i,e);if(t){const r=e[e.length-1],n=r.flatCoordinates,s=r.layoutOptions;mO(n,s,i,t)}}function SJe(i,e){const t=at({},nJe,i,e);if(t){const r=e[e.length-1],n=r.flatCoordinates,s=r.layoutOptions;mO(n,s,i,t)}}function CJe(i,e){const t=e[e.length-1];rl(rJe,i,e);const r=t.flatCoordinates;t.ends.push(r.length)}function Rwe(i,e){const t=e[0],r=at({flatCoordinates:[],layoutOptions:{}},eJe,i,e);if(!r)return;const n=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=gO(s,n),a=new Vn(n,o);Wn(a,!1,t);const l=new Tn(a);return l.setProperties(r,!0),l}function Iwe(i,e){const t=e[0],r=at({flatCoordinates:[],ends:[],layoutOptions:{}},iJe,i,e);if(!r)return;const n=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=gO(o,n,s),l=new da(n,a,s);Wn(l,!1,t);const u=new Tn(l);return u.setProperties(r,!0),u}function Owe(i,e){const t=e[0],r=at({},sJe,i,e);if(!r)return;const n={},s=mO([],n,i,r),o=gO(n,s),a=new In(s,o);Wn(a,!1,t);const l=new Tn(a);return l.setProperties(r,!0),l}function yO(i,e,t){i.setAttribute("href",e);const n=t[t.length-1].properties,s=[n.linkText,n.linkType];Ai({node:i},aJe,mo,s,t,oJe)}function vO(i,e,t){const r=t[t.length-1],s=r.node.namespaceURI,o=r.properties;switch(i.setAttributeNS(null,"lat",String(e[1])),i.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=i.nodeName=="rtept"?cJe[s]:mJe[s],u=ol(o,l);Ai({node:i,properties:o},gJe,mo,u,t,l)}function TJe(i,e,t){const r=t[0],n=e.getProperties(),s={node:i};s.properties=n;const o=e.getGeometry();if(o.getType()=="LineString"){const c=Wn(o,!0,r);s.geometryLayout=c.getLayout(),n.rtept=c.getCoordinates()}const a=t[t.length-1].node,l=lJe[a.namespaceURI],u=ol(n,l);Ai(s,uJe,mo,u,t,l)}function AJe(i,e,t){const r=t[0],n=e.getProperties(),s={node:i};s.properties=n;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const c=Wn(o,!0,r);n.trkseg=c.getLineStrings()}const a=t[t.length-1].node,l=hJe[a.namespaceURI],u=ol(n,l);Ai(s,dJe,mo,u,t,l)}function kJe(i,e,t){const r={node:i};r.geometryLayout=e.getLayout(),r.properties={},Ai(r,pJe,fJe,e.getCoordinates(),t)}function DJe(i,e,t){const r=t[0],n=t[t.length-1];n.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=Wn(s,!0,r);n.geometryLayout=o.getLayout(),vO(i,o.getCoordinates(),t)}}const MJe=QKe;class bO extends Ew{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(l2(e),this.adaptOptions(t))}readFeatureFromText(e,t){return ai()}readFeatures(e,t){return this.readFeaturesFromText(l2(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return ai()}readGeometry(e,t){return this.readGeometryFromText(l2(e),this.adaptOptions(t))}readGeometryFromText(e,t){return ai()}readProjection(e){return this.readProjectionFromText(l2(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return ai()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return ai()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return ai()}}function l2(i){return typeof i=="string"?i:""}const LJe=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,RJe=/^H.([A-Z]{3}).*?:(.*)/,IJe=/^HFDTE(\d{2})(\d{2})(\d{2})/,OJe=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,PJe=/\r\n|\r|\n/;class FJe extends bO{constructor(e){super(),e=e||{},this.dataProjection=At("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(e,t){const r=this.altitudeMode_,n=e.split(PJe),s={},o=[];let a=2e3,l=0,u=1,c=-1,h,d;for(h=0,d=n.length;h<d;++h){const v=n[h];let b;if(v.charAt(0)=="B"){if(b=LJe.exec(v),b){const _=parseInt(b[1],10),E=parseInt(b[2],10),C=parseInt(b[3],10);let T=parseInt(b[4],10)+parseInt(b[5],10)/6e4;this.lad_&&(T+=parseInt(v.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),b[6]=="S"&&(T=-T);let D=parseInt(b[7],10)+parseInt(b[8],10)/6e4;if(this.lod_&&(D+=parseInt(v.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),b[9]=="W"&&(D=-D),o.push(D,T),r!="none"){let A;r=="gps"?A=parseInt(b[11],10):r=="barometric"?A=parseInt(b[12],10):A=0,o.push(A)}let M=Date.UTC(a,l,u,_,E,C);M<c&&(M=Date.UTC(a,l,u+1,_,E,C)),o.push(M/1e3),c=M}}else if(v.charAt(0)=="H")b=OJe.exec(v),b?(u=parseInt(b[1],10),l=parseInt(b[2],10)-1,a=2e3+parseInt(b[3],10)):(b=IJe.exec(v),b?(u=parseInt(b[1],10),l=parseInt(b[2],10)-1,a=2e3+parseInt(b[3],10)):(b=RJe.exec(v),b&&(s[b[1]]=b[2].trim())));else if(v.charAt(0)=="I"){const _=parseInt(v.slice(1,3),10);for(let E=0;E<_;E++){const C=v.slice(7+E*7,10+E*7);if(C==="LAD"||C==="LOD"){const T=parseInt(v.slice(3+E*7,5+E*7),10)-1,D=parseInt(v.slice(5+E*7,7+E*7),10);C==="LAD"?(this.lad_=!0,this.ladStart_=T,this.ladStop_=D):C==="LOD"&&(this.lod_=!0,this.lodStart_=T,this.lodStop_=D)}}}}if(o.length===0)return null;const p=r=="none"?"XYM":"XYZM",m=new Vn(o,p),g=new Tn(Wn(m,!1,t));return g.setProperties(s,!0),g}readFeaturesFromText(e,t){const r=this.readFeatureFromText(e,t);return r?[r]:[]}}const NJe=FJe,Ns={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},Jm={};Jm[Ns.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};Jm[Ns.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};Jm[Ns.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};Jm.none={none:{supports:[],formats:[],qualities:[]}};const $Je=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,mpe=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,BJe=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function jJe(i){let e=i.getComplianceLevelSupportedFeatures();return e===void 0&&(e=Jm[Ns.VERSION1].level0),{url:i.imageInfo["@id"]===void 0?void 0:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,i.imageInfo.formats===void 0?[]:i.imageInfo.formats],qualities:[...e.qualities,i.imageInfo.qualities===void 0?[]:i.imageInfo.qualities],resolutions:i.imageInfo.scale_factors,tileSize:i.imageInfo.tile_width!==void 0?i.imageInfo.tile_height!==void 0?[i.imageInfo.tile_width,i.imageInfo.tile_height]:[i.imageInfo.tile_width,i.imageInfo.tile_width]:i.imageInfo.tile_height!=null?[i.imageInfo.tile_height,i.imageInfo.tile_height]:void 0}}function zJe(i){const e=i.getComplianceLevelSupportedFeatures(),t=Array.isArray(i.imageInfo.profile)&&i.imageInfo.profile.length>1,r=t&&i.imageInfo.profile[1].supports?i.imageInfo.profile[1].supports:[],n=t&&i.imageInfo.profile[1].formats?i.imageInfo.profile[1].formats:[],s=t&&i.imageInfo.profile[1].qualities?i.imageInfo.profile[1].qualities:[];return{url:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(o){return o.width})[0],i.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...e.supports,...r],formats:[...e.formats,...n],qualities:[...e.qualities,...s]}}function UJe(i){const e=i.getComplianceLevelSupportedFeatures(),t=i.imageInfo.extraFormats===void 0?e.formats:[...e.formats,...i.imageInfo.extraFormats],r=i.imageInfo.preferredFormats!==void 0&&Array.isArray(i.imageInfo.preferredFormats)&&i.imageInfo.preferredFormats.length>0?i.imageInfo.preferredFormats.filter(function(n){return["jpg","png","gif"].includes(n)}).reduce(function(n,s){return n===void 0&&t.includes(s)?s:n},void 0):void 0;return{url:i.imageInfo.id,sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(n){return[n.width,n.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(n){return n.width})[0],i.imageInfo.tiles.map(function(n){return n.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(n){return n.scaleFactors})[0],supports:i.imageInfo.extraFeatures===void 0?e.supports:[...e.supports,...i.imageInfo.extraFeatures],formats:t,qualities:i.imageInfo.extraQualities===void 0?e.qualities:[...e.qualities,...i.imageInfo.extraQualities],preferredFormat:r}}const pA={};pA[Ns.VERSION1]=jJe;pA[Ns.VERSION2]=zJe;pA[Ns.VERSION3]=UJe;class GJe{constructor(e){this.setImageInfo(e)}setImageInfo(e){typeof e=="string"?this.imageInfo=JSON.parse(e):this.imageInfo=e}getImageApiVersion(){if(this.imageInfo===void 0)return;let e=this.imageInfo["@context"]||"ol-no-context";typeof e=="string"&&(e=[e]);for(let t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Ns.VERSION1;case"http://iiif.io/api/image/2/context.json":return Ns.VERSION2;case"http://iiif.io/api/image/3/context.json":return Ns.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Ns.VERSION1)&&this.imageInfo.identifier)return Ns.VERSION1;break}Hi(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(e){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(e===void 0&&(e=this.getImageApiVersion()),e){case Ns.VERSION1:if($Je.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ns.VERSION3:if(BJe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ns.VERSION2:if(typeof this.imageInfo.profile=="string"&&mpe.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&mpe.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(e){const t=this.getComplianceLevelEntryFromProfile(e);if(t===void 0)return;const r=t.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const e=this.getImageApiVersion(),t=this.getComplianceLevelFromProfile(e);return t===void 0?Jm.none.none:Jm[e][t]}getTileSourceOptions(e){const t=e||{},r=this.getImageApiVersion();if(r===void 0)return;const n=r===void 0?void 0:pA[r](this);if(n!==void 0)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:t.format!==void 0&&n.formats.includes(t.format)?t.format:n.preferredFormat!==void 0?n.preferredFormat:"jpg",supports:n.supports,quality:t.quality&&n.qualities.includes(t.quality)?t.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(s,o){return o-s}):void 0,tileSize:n.tileSize}}}const qJe=GJe,wd=["http://www.google.com/kml/ext/2.2"],ei=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],HJe="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",gpe={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},VJe=it(ei,{ExtendedData:Xwe,Region:Zwe,MultiGeometry:Ee(Vwe,"geometry"),LineString:Ee(qwe,"geometry"),LinearRing:Ee(Hwe,"geometry"),Point:Ee(Wwe,"geometry"),Polygon:Ee(Ywe,"geometry"),Style:Ee(wO),StyleMap:DQe,address:Ee(mt),description:Ee(mt),name:Ee(mt),open:Ee(Jf),phoneNumber:Ee(mt),styleUrl:Ee(Bwe),visibility:Ee(Jf)},it(wd,{MultiTrack:Ee(gQe,"geometry"),Track:Ee(Gwe,"geometry")})),WJe=it(ei,{ExtendedData:Xwe,Region:Zwe,Link:zQe,address:Ee(mt),description:Ee(mt),name:Ee(mt),open:Ee(Jf),phoneNumber:Ee(mt),visibility:Ee(Jf)}),YJe=it(ei,{href:Ee($we)}),XJe=it(ei,{Altitude:Ee(lr),Longitude:Ee(lr),Latitude:Ee(lr),Tilt:Ee(lr),AltitudeMode:Ee(mt),Heading:Ee(lr),Roll:Ee(lr)}),Pwe=it(ei,{LatLonAltBox:OQe,Lod:FQe}),ZJe=it(ei,["Document","Placemark"]),KJe=it(ei,{Document:Me(XQe),Placemark:Me(Qwe)});let dy,cS=null,dL,I_,O_,P_,CC,fL=null,_O,pL=null,mL,xm=null,ype=null,gL=null;function TC(i){return 32/Math.min(i[0],i[1])}function JJe(){dy=[255,255,255,1],cS=new nl({color:dy}),dL=[20,2],I_="pixels",O_="pixels",P_=[64,64],CC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",fL=new lA({anchor:dL,anchorOrigin:"bottom-left",anchorXUnits:I_,anchorYUnits:O_,crossOrigin:"anonymous",rotation:0,scale:TC(P_),size:P_,src:CC}),_O="NO_IMAGE",pL=new la({color:dy,width:1}),mL=new la({color:[51,51,51,1],width:2}),xm=new Zm({font:"bold 16px Helvetica",fill:cS,stroke:mL,scale:.8}),ype=new os({fill:cS,image:fL,text:xm,stroke:pL,zIndex:0}),gL=[ype]}let u2;function QJe(i){return i}class eQe extends Cw{constructor(e){super(),e=e||{},gL||JJe(),this.dataProjection=At("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:gL,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:QJe,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=it(ei,{Document:EC(this.readDocumentOrFolder_,this),Folder:EC(this.readDocumentOrFolder_,this),Placemark:Zt(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=at([],r,e,t,this);if(n)return n}readPlacemark_(e,t){const r=at({geometry:null},VJe,e,t,this);if(!r)return;const n=new Tn,s=e.getAttribute("id");s!==null&&n.setId(s);const o=t[0],a=r.geometry;if(a&&Wn(a,!1,o),n.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,u=r.styleUrl,c=iQe(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(c)}return delete r.Style,n.setProperties(r,!0),n}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const n=wO.call(this,e,t);if(n){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=n}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const n=zwe.call(this,e,t);if(!n)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=n}readFeatureFromNode(e,t){if(!ei.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!ei.includes(e.namespaceURI))return[];let r;const n=e.localName;if(n=="Document"||n=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(n=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(n=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,t);o&&Dr(r,o)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=au(e);return this.readNameFromDocument(t)}return ou(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(ei.includes(t.namespaceURI)&&t.localName=="name")return mt(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if(ei.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const n=this.readNameFromNode(t);if(n)return n}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=au(e);Dr(t,this.readNetworkLinksFromDocument(r))}else ou(e)?Dr(t,this.readNetworkLinksFromDocument(e)):Dr(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Dr(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(ei.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const n=at({},WJe,r,[]);t.push(n)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;ei.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Dr(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=au(e);Dr(t,this.readRegionFromDocument(r))}else ou(e)?Dr(t,this.readRegionFromDocument(e)):Dr(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Dr(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(ei.includes(r.namespaceURI)&&r.localName=="Region"){const n=at({},Pwe,r,[]);t.push(n)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;ei.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Dr(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=au(e);Dr(t,this.readCameraFromDocument(r))}else ou(e)?Dr(t,this.readCameraFromDocument(e)):Dr(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&Dr(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(ei.includes(r.namespaceURI)&&r.localName==="Camera"){const n=at({},XJe,r,[]);t.push(n)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;ei.includes(r.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&Dr(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=Ri(ei[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",wd[0]),r.setAttributeNS(n,"xmlns:xsi",Km),r.setAttributeNS(Km,"xsi:schemaLocation",HJe);const s={node:r},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=ZJe[r.namespaceURI],l=ol(o,a);return Ai(s,KJe,mo,l,[t],a,this),r}}function tQe(i,e){const t=[0,0];let r="start";const n=i.getImage();if(n){const a=n.getSize();if(a&&a.length==2){const l=n.getScaleArray(),u=n.getAnchor();t[0]=l[0]*(a[0]-u[0]),t[1]=l[1]*(a[1]/2-u[1]),r="left"}}let s=i.getText();return s?(s=s.clone(),s.setFont(s.getFont()||xm.getFont()),s.setScale(s.getScale()||xm.getScale()),s.setFill(s.getFill()||xm.getFill()),s.setStroke(s.getStroke()||mL)):s=xm.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new os({image:n,text:s})}function iQe(i,e,t,r,n){return function(s,o){let a=n,l="",u=[];if(a){const h=s.getGeometry();if(h)if(h instanceof Po)u=h.getGeometriesArrayRecursive().filter(function(d){const p=d.getType();return p==="Point"||p==="MultiPoint"}),a=u.length>0;else{const d=h.getType();a=d==="Point"||d==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(u2||(u2=document.createElement("textarea")),u2.innerHTML=l,l=u2.value));let c=t;if(i?c=i:e&&(c=Fwe(e,t,r)),a){const h=tQe(c[0],l);if(u.length>0){h.setGeometry(new Po(u));const d=new os({geometry:c[0].getGeometry(),image:null,fill:c[0].getFill(),stroke:c[0].getStroke(),text:null});return[h,d].concat(c.slice(1))}return h}return c}}function Fwe(i,e,t){return Array.isArray(i)?i:typeof i=="string"?Fwe(t[i],e,t):e}function mA(i){const e=Ta(i,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function Nwe(i){let e=Ta(i,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=r.exec(e);){const s=parseFloat(n[1]),o=parseFloat(n[2]),a=n[3]?parseFloat(n[3]):0;t.push(s,o,a),e=e.substr(n[0].length)}if(e==="")return t}function $we(i){const e=Ta(i,!1).trim();let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Bwe(i){const e=Ta(i,!1).trim().replace(/^(?!.*#)/,"#");let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function rQe(i){const e=i.getAttribute("xunits"),t=i.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(i.getAttribute("x")),xunits:gpe[e],y:parseFloat(i.getAttribute("y")),yunits:gpe[t],origin:r}}function jwe(i){return lr(i)}const nQe=it(ei,{Pair:kQe});function zwe(i,e){return at(void 0,nQe,i,e,this)}const sQe=it(ei,{Icon:Ee(bQe),color:Ee(mA),heading:Ee(lr),hotSpot:Ee(rQe),scale:Ee(jwe)});function oQe(i,e){const t=at({},sQe,i,e);if(!t)return;const r=e[e.length-1],n="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(n).length>0;let o;const a=n.href;a?o=a:s&&(o=CC);let l,u,c,h="bottom-left";const d=t.hotSpot;d?(l=[d.x,d.y],u=d.xunits,c=d.yunits,h=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=dL,u=I_,c=O_):o.includes("arrow-reverse")?(l=[54,42],u=I_,c=O_):o.includes("paddle")&&(l=[32,1],u=I_,c=O_));let p;const m=n.x,g=n.y;m!==void 0&&g!==void 0&&(p=[m,g]);let v;const b=n.w,_=n.h;b!==void 0&&_!==void 0&&(v=[b,_]);let E;const C=t.heading;C!==void 0&&(E=Gu(C));const T=t.scale,D=t.color;if(s){o==CC&&(v=P_);const M=new lA({anchor:l,anchorOrigin:h,anchorXUnits:u,anchorYUnits:c,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:E,scale:T,size:v,src:this.iconUrlFunction_(o),color:D}),A=M.getScaleArray()[0],I=M.getSize();if(I===null){const P=M.getImageState();if(P===$t.IDLE||P===$t.LOADING){const U=function(){const K=M.getImageState();if(!(K===$t.IDLE||K===$t.LOADING)){const L=M.getSize();if(L&&L.length==2){const F=TC(L);M.setScale(A*F)}M.unlistenImageChange(U)}};M.listenImageChange(U),P===$t.IDLE&&M.load()}}else if(I.length==2){const P=TC(I);M.setScale(A*P)}r.imageStyle=M}else r.imageStyle=_O}const aQe=it(ei,{color:Ee(mA),scale:Ee(jwe)});function lQe(i,e){const t=at({},aQe,i,e);if(!t)return;const r=e[e.length-1],n=new Zm({fill:new nl({color:"color"in t?t.color:dy}),scale:t.scale});r.textStyle=n}const uQe=it(ei,{color:Ee(mA),width:Ee(lr)});function cQe(i,e){const t=at({},uQe,i,e);if(!t)return;const r=e[e.length-1],n=new la({color:"color"in t?t.color:dy,width:"width"in t?t.width:1});r.strokeStyle=n}const hQe=it(ei,{color:Ee(mA),fill:Ee(Jf),outline:Ee(Jf)});function dQe(i,e){const t=at({},hQe,i,e);if(!t)return;const r=e[e.length-1],n=new nl({color:"color"in t?t.color:dy});r.fillStyle=n;const s=t.fill;s!==void 0&&(r.fill=s);const o=t.outline;o!==void 0&&(r.outline=o)}const fQe=it(ei,{coordinates:fi(Nwe)});function Uwe(i,e){return at(null,fQe,i,e)}function pQe(i,e){const r=e[e.length-1].coordinates,n=Ta(i,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),u=parseFloat(o[3]);r.push([a,l,u])}else r.push([])}const mQe=it(wd,{Track:Zt(Gwe)});function gQe(i,e){const t=at([],mQe,i,e);if(t)return new da(t)}const yQe=it(ei,{when:UQe},it(wd,{coord:pQe}));function Gwe(i,e){const t=at({coordinates:[],whens:[]},yQe,i,e);if(!t)return;const r=[],n=t.coordinates,s=t.whens;for(let o=0,a=Math.min(n.length,s.length);o<a;++o)n[o].length==3&&r.push(n[o][0],n[o][1],n[o][2],s[o]);return new Vn(r,"XYZM")}const vQe=it(ei,{href:Ee($we)},it(wd,{x:Ee(lr),y:Ee(lr),w:Ee(lr),h:Ee(lr)}));function bQe(i,e){const t=at({},vQe,i,e);return t||null}const _Qe=it(ei,{coordinates:fi(Nwe)});function xO(i,e){return at(null,_Qe,i,e)}const gA=it(ei,{extrude:Ee(Jf),tessellate:Ee(Jf),altitudeMode:Ee(mt)});function qwe(i,e){const t=at({},gA,i,e),r=xO(i,e);if(r){const n=new Vn(r,"XYZ");return n.setProperties(t,!0),n}}function Hwe(i,e){const t=at({},gA,i,e),r=xO(i,e);if(r){const n=new _s(r,"XYZ",[r.length]);return n.setProperties(t,!0),n}}const xQe=it(ei,{LineString:Zt(qwe),LinearRing:Zt(Hwe),MultiGeometry:Zt(Vwe),Point:Zt(Wwe),Polygon:Zt(Ywe)});function Vwe(i,e){const t=at([],xQe,i,e);if(!t)return null;if(t.length===0)return new Po(t);let r,n=!0;const s=t[0].getType();let o;for(let a=1,l=t.length;a<l;++a)if(o=t[a],o.getType()!=s){n=!1;break}if(n){let a,l;if(s=="Point"){const u=t[0];a=u.getLayout(),l=u.getFlatCoordinates();for(let c=1,h=t.length;c<h;++c)o=t[c],Dr(l,o.getFlatCoordinates());r=new gu(l,a),mD(r,t)}else if(s=="LineString")r=new da(t),mD(r,t);else if(s=="Polygon")r=new sl(t),mD(r,t);else if(s=="GeometryCollection")r=new Po(t);else throw new Error("Unknown geometry type found")}else r=new Po(t);return r}function Wwe(i,e){const t=at({},gA,i,e),r=xO(i,e);if(r){const n=new In(r,"XYZ");return n.setProperties(t,!0),n}}const wQe=it(ei,{innerBoundaryIs:$Qe,outerBoundaryIs:jQe});function Ywe(i,e){const t=at({},gA,i,e),r=at([null],wQe,i,e);if(r&&r[0]){const n=r[0],s=[n.length];for(let a=1,l=r.length;a<l;++a)Dr(n,r[a]),s.push(n.length);const o=new _s(n,"XYZ",s);return o.setProperties(t,!0),o}}const EQe=it(ei,{IconStyle:oQe,LabelStyle:lQe,LineStyle:cQe,PolyStyle:dQe});function wO(i,e){const t=at({},EQe,i,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:cS;const n=t.fill;n!==void 0&&!n&&(r=null);let s;"imageStyle"in t?t.imageStyle!=_O&&(s=t.imageStyle):s=fL;const o="textStyle"in t?t.textStyle:xm,a="strokeStyle"in t?t.strokeStyle:pL,l=t.outline;return l!==void 0&&!l?[new os({geometry:function(u){const c=u.getGeometry(),h=c.getType();if(h==="GeometryCollection"){const d=c;return new Po(d.getGeometriesArrayRecursive().filter(function(p){const m=p.getType();return m!=="Polygon"&&m!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return c},fill:r,image:s,stroke:a,text:o,zIndex:void 0}),new os({geometry:function(u){const c=u.getGeometry(),h=c.getType();if(h==="GeometryCollection"){const d=c;return new Po(d.getGeometriesArrayRecursive().filter(function(p){const m=p.getType();return m==="Polygon"||m==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return c},fill:r,stroke:null,zIndex:void 0})]:[new os({fill:r,image:s,stroke:a,text:o,zIndex:void 0})]}function mD(i,e){const t=e.length,r=new Array(e.length),n=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let u=0;u<t;++u){const c=e[u];r[u]=c.get("extrude"),n[u]=c.get("tessellate"),s[u]=c.get("altitudeMode"),o=o||r[u]!==void 0,a=a||n[u]!==void 0,l=l||s[u]}o&&i.set("extrude",r),a&&i.set("tessellate",n),l&&i.set("altitudeMode",s)}const SQe=it(ei,{displayName:Ee(mt),value:Ee(mt)});function CQe(i,e){const t=i.getAttribute("name");rl(SQe,i,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const TQe=it(ei,{Data:CQe,SchemaData:LQe});function Xwe(i,e){rl(TQe,i,e)}function Zwe(i,e){rl(Pwe,i,e)}const AQe=it(ei,{Style:Ee(wO),key:Ee(mt),styleUrl:Ee(Bwe)});function kQe(i,e){const t=at({},AQe,i,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const n=t.styleUrl;n&&(e[e.length-1]=n);const s=t.Style;s&&(e[e.length-1]=s)}}function DQe(i,e){const t=zwe.call(this,i,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const MQe=it(ei,{SimpleData:RQe});function LQe(i,e){rl(MQe,i,e)}function RQe(i,e){const t=i.getAttribute("name");if(t!==null){const r=mt(i),n=e[e.length-1];n[t]=r}}const IQe=it(ei,{altitudeMode:Ee(mt),minAltitude:Ee(lr),maxAltitude:Ee(lr),north:Ee(lr),south:Ee(lr),east:Ee(lr),west:Ee(lr)});function OQe(i,e){const t=at({},IQe,i,e);if(!t)return;const r=e[e.length-1],n=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=n,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const PQe=it(ei,{minLodPixels:Ee(lr),maxLodPixels:Ee(lr),minFadeExtent:Ee(lr),maxFadeExtent:Ee(lr)});function FQe(i,e){const t=at({},PQe,i,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const NQe=it(ei,{LinearRing:Zt(Uwe)});function $Qe(i,e){const t=at([],NQe,i,e);t.length>0&&e[e.length-1].push(...t)}const BQe=it(ei,{LinearRing:fi(Uwe)});function jQe(i,e){const t=at(void 0,BQe,i,e);if(t){const r=e[e.length-1];r[0]=t}}function zQe(i,e){rl(YJe,i,e)}function UQe(i,e){const r=e[e.length-1].whens,n=Ta(i,!1),s=Date.parse(n);r.push(isNaN(s)?0:s)}function yA(i,e){const t=Ku(e),n=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const o=Math.floor(n[s]).toString(16);n[s]=o.length==1?"0"+o:o}xi(i,n.join(""))}function GQe(i,e,t){const r=t[t.length-1],n=r.layout,s=r.stride;let o;if(n=="XY"||n=="XYM")o=2;else if(n=="XYZ"||n=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let u=1;u<o;++u)l+=","+e[u];for(let u=s;u<a;u+=s){l+=" "+e[u];for(let c=1;c<o;++c)l+=","+e[u+c]}}xi(i,l)}const hS=it(ei,{Data:Me(qQe),value:Me(VQe),displayName:Me(HQe)});function qQe(i,e,t){i.setAttribute("name",e.name);const r={node:i},n=e.value;typeof n=="object"?(n!==null&&n.displayName&&Ai(r,hS,mo,[n.displayName],t,["displayName"]),n!==null&&n.value&&Ai(r,hS,mo,[n.value],t,["value"])):Ai(r,hS,mo,[n],t,["value"])}function HQe(i,e){$Ke(i,e)}function VQe(i,e){xi(i,e)}const WQe=it(ei,{Placemark:Me(Qwe)}),YQe=function(i,e,t){const r=e[e.length-1].node;return Ri(r.namespaceURI,"Placemark")};function XQe(i,e,t){Ai({node:i},WQe,YQe,e,t,void 0,this)}const ZQe=as("Data");function KQe(i,e,t){const r={node:i},n=e.names,s=e.values,o=n.length;for(let a=0;a<o;a++)Ai(r,hS,ZQe,[{name:n[a],value:s[a]}],t)}const vpe=it(ei,["href"],it(wd,["x","y","w","h"])),bpe=it(ei,{href:Me(xi)},it(wd,{x:Me(Ha),y:Me(Ha),w:Me(Ha),h:Me(Ha)})),JQe=function(i,e,t){return Ri(wd[0],"gx:"+t)};function QQe(i,e,t){const r={node:i},n=t[t.length-1].node;let s=vpe[n.namespaceURI],o=ol(e,s);Ai(r,bpe,mo,o,t,s),s=vpe[wd[0]],o=ol(e,s),Ai(r,bpe,JQe,o,t,s)}const eet=it(ei,["scale","heading","Icon","color","hotSpot"]),tet=it(ei,{Icon:Me(QQe),color:Me(yA),heading:Me(Ha),hotSpot:Me(Met),scale:Me(tEe)});function iet(i,e,t){const r={node:i},n={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const v=e.getAnchor(),b=e.getOrigin();if(b&&a&&b[0]!==0&&b[1]!==o[1]&&(l.x=b[0],l.y=a[1]-(b[1]+o[1])),v&&(v[0]!==o[0]/2||v[1]!==o[1]/2)){const _={x:v[0],xunits:"pixels",y:o[1]-v[1],yunits:"pixels"};n.hotSpot=_}}n.Icon=l;let u=e.getScaleArray()[0],c=o;if(c===null&&(c=P_),c.length==2){const v=TC(c);u=u/v}u!==1&&(n.scale=u);const h=e.getRotation();h!==0&&(n.heading=h);const d=e.getColor();d&&(n.color=d);const p=t[t.length-1].node,m=eet[p.namespaceURI],g=ol(n,m);Ai(r,tet,mo,g,t,m)}const ret=it(ei,["color","scale"]),net=it(ei,{color:Me(yA),scale:Me(tEe)});function set(i,e,t){const r={node:i},n={},s=e.getFill();s&&(n.color=s.getColor());const o=e.getScale();o&&o!==1&&(n.scale=o);const a=t[t.length-1].node,l=ret[a.namespaceURI],u=ol(n,l);Ai(r,net,mo,u,t,l)}const oet=it(ei,["color","width"]),aet=it(ei,{color:Me(yA),width:Me(Ha)});function uet(i,e,t){const r={node:i},n={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,o=oet[s.namespaceURI],a=ol(n,o);Ai(r,aet,mo,a,t,o)}const cet={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Kwe=function(i,e,t){if(i){const r=e[e.length-1].node;return Ri(r.namespaceURI,cet[i.getType()])}},het=as("Point"),det=as("LineString"),fet=as("LinearRing"),pet=as("Polygon"),met=it(ei,{LineString:Me(fy),Point:Me(fy),Polygon:Me(eEe),GeometryCollection:Me(Jwe)});function Jwe(i,e,t){const r={node:i},n=e.getType();let s=[],o;if(n==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=Kwe;else if(n==="MultiPoint")s=e.getPoints(),o=het;else if(n==="MultiLineString")s=e.getLineStrings(),o=det;else if(n==="MultiPolygon")s=e.getPolygons(),o=pet;else throw new Error("Unknown geometry type");Ai(r,met,o,s,t)}const get=it(ei,{LinearRing:Me(fy)});function _pe(i,e,t){Ai({node:i},get,fet,[e],t)}const gD=it(ei,{ExtendedData:Me(KQe),MultiGeometry:Me(Jwe),LineString:Me(fy),LinearRing:Me(fy),Point:Me(fy),Polygon:Me(eEe),Style:Me(Det),address:Me(xi),description:Me(xi),name:Me(xi),open:Me(Wy),phoneNumber:Me(xi),styleUrl:Me(xi),visibility:Me(Wy)}),yet=it(ei,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),vet=as("ExtendedData");function Qwe(i,e,t){const r={node:i};e.getId()&&i.setAttribute("id",e.getId());const n=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(n||{}).sort().filter(function(p){return!s[p]}),a=e.getStyleFunction();if(a){const p=a(e,0);if(p){const m=Array.isArray(p)?p:[p];let g=m;if(e.getGeometry()&&(g=m.filter(function(v){const b=v.getGeometryFunction()(e);if(b){const _=b.getType();return _==="GeometryCollection"?b.getGeometriesArrayRecursive().filter(function(E){const C=E.getType();return C==="Point"||C==="MultiPoint"}).length:_==="Point"||_==="MultiPoint"}})),this.writeStyles_){let v=m,b=m;e.getGeometry()&&(v=m.filter(function(_){const E=_.getGeometryFunction()(e);if(E){const C=E.getType();return C==="GeometryCollection"?E.getGeometriesArrayRecursive().filter(function(T){const D=T.getType();return D==="LineString"||D==="MultiLineString"}).length:C==="LineString"||C==="MultiLineString"}}),b=m.filter(function(_){const E=_.getGeometryFunction()(e);if(E){const C=E.getType();return C==="GeometryCollection"?E.getGeometriesArrayRecursive().filter(function(T){const D=T.getType();return D==="Polygon"||D==="MultiPolygon"}).length:C==="Polygon"||C==="MultiPolygon"}})),n.Style={pointStyles:g,lineStyles:v,polyStyles:b}}if(g.length&&n.name===void 0){const v=g[0].getText();v&&(n.name=v.getText())}}}const l=t[t.length-1].node,u=yet[l.namespaceURI],c=ol(n,u);if(Ai(r,gD,mo,c,t,u),o.length>0){const p=ol(n,o);Ai(r,gD,vet,[{names:o,values:p}],t)}const h=t[0];let d=e.getGeometry();d&&(d=Wn(d,!0,h)),Ai(r,gD,Kwe,[d],t)}const bet=it(ei,["extrude","tessellate","altitudeMode","coordinates"]),_et=it(ei,{extrude:Me(Wy),tessellate:Me(Wy),altitudeMode:Me(xi),coordinates:Me(GQe)});function fy(i,e,t){const r=e.getFlatCoordinates(),n={node:i};n.layout=e.getLayout(),n.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const o=t[t.length-1].node,a=bet[o.namespaceURI],l=ol(s,a);Ai(n,_et,mo,l,t,a)}const xet=it(ei,["color","fill","outline"]),xpe=it(ei,{outerBoundaryIs:Me(_pe),innerBoundaryIs:Me(_pe)}),wet=as("innerBoundaryIs"),Eet=as("outerBoundaryIs");function eEe(i,e,t){const r=e.getLinearRings(),n=r.shift(),s={node:i};Ai(s,xpe,wet,r,t),Ai(s,xpe,Eet,[n],t)}const Cet=it(ei,{color:Me(yA),fill:Me(Wy),outline:Me(Wy)});function Tet(i,e,t){const r={node:i},n=e.getFill(),s=e.getStroke(),o={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:s?void 0:!1},a=t[t.length-1].node,l=xet[a.namespaceURI],u=ol(o,l);Ai(r,Cet,mo,u,t,l)}function tEe(i,e){Ha(i,Math.round(e*1e6)/1e6)}const Aet=it(ei,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ket=it(ei,{IconStyle:Me(iet),LabelStyle:Me(set),LineStyle:Me(uet),PolyStyle:Me(Tet)});function Det(i,e,t){const r={node:i},n={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(n.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(n.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(n.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!n.LineStyle&&(n.LineStyle=l),n.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,o=Aet[s.namespaceURI],a=ol(n,o);Ai(r,ket,mo,a,t,o)}function Met(i,e){i.setAttribute("x",String(e.x)),i.setAttribute("y",String(e.y)),i.setAttribute("xunits",e.xunits),i.setAttribute("yunits",e.yunits)}const iEe=eQe;var EO={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */EO.read=function(i,e,t,r,n){var s,o,a=n*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,h=t?n-1:0,d=t?-1:1,p=i[e+h];for(h+=d,s=p&(1<<-c)-1,p>>=-c,c+=a;c>0;s=s*256+i[e+h],h+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+i[e+h],h+=d,c-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(p?-1:1)*o*Math.pow(2,s-r)};EO.write=function(i,e,t,r,n,s){var o,a,l,u=s*8-n-1,c=(1<<u)-1,h=c>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,m=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(e*l-1)*Math.pow(2,n),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;i[t+p]=a&255,p+=m,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;i[t+p]=o&255,p+=m,o/=256,u-=8);i[t+p-m]|=g*128};var Let=tn,c2=EO;function tn(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}tn.Varint=0;tn.Fixed64=1;tn.Bytes=2;tn.Fixed32=5;var yL=65536*65536,wpe=1/yL,Ret=12,rEe=typeof TextDecoder>"u"?null:new TextDecoder("utf8");tn.prototype={destroy:function(){this.buf=null},readFields:function(i,e,t){for(t=t||this.length;this.pos<t;){var r=this.readVarint(),n=r>>3,s=this.pos;this.type=r&7,i(n,e,this),this.pos===s&&this.skip(r)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=h2(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Spe(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=h2(this.buf,this.pos)+h2(this.buf,this.pos+4)*yL;return this.pos+=8,i},readSFixed64:function(){var i=h2(this.buf,this.pos)+Spe(this.buf,this.pos+4)*yL;return this.pos+=8,i},readFloat:function(){var i=c2.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=c2.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e=this.buf,t,r;return r=e[this.pos++],t=r&127,r<128||(r=e[this.pos++],t|=(r&127)<<7,r<128)||(r=e[this.pos++],t|=(r&127)<<14,r<128)||(r=e[this.pos++],t|=(r&127)<<21,r<128)?t:(r=e[this.pos],t|=(r&15)<<28,Iet(t,i,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2===1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=Ret&&rEe?Wet(this.buf,e,i):Vet(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==tn.Bytes)return i.push(this.readVarint(e));var t=Dh(this);for(i=i||[];this.pos<t;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==tn.Bytes)return i.push(this.readSVarint());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==tn.Bytes)return i.push(this.readBoolean());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==tn.Bytes)return i.push(this.readFloat());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==tn.Bytes)return i.push(this.readDouble());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==tn.Bytes)return i.push(this.readFixed32());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==tn.Bytes)return i.push(this.readSFixed32());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==tn.Bytes)return i.push(this.readFixed64());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==tn.Bytes)return i.push(this.readSFixed64());var e=Dh(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=i&7;if(e===tn.Varint)for(;this.buf[this.pos++]>127;);else if(e===tn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===tn.Fixed32)this.pos+=4;else if(e===tn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),c0(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),c0(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),c0(this.buf,i&-1,this.pos),c0(this.buf,Math.floor(i*wpe),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),c0(this.buf,i&-1,this.pos),c0(this.buf,Math.floor(i*wpe),this.pos+4),this.pos+=8},writeVarint:function(i){if(i=+i||0,i>268435455||i<0){Oet(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))},writeSVarint:function(i){this.writeVarint(i<0?-i*2-1:i*2)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(i.length*4),this.pos++;var e=this.pos;this.pos=Yet(this.buf,i,this.pos);var t=this.pos-e;t>=128&&Epe(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(i){this.realloc(4),c2.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),c2.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var t=0;t<e;t++)this.buf[this.pos++]=i[t]},writeRawMessage:function(i,e){this.pos++;var t=this.pos;i(e,this);var r=this.pos-t;r>=128&&Epe(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeMessage:function(i,e,t){this.writeTag(i,tn.Bytes),this.writeRawMessage(e,t)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,Net,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,$et,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,zet,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,Bet,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,jet,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,Uet,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,Get,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,qet,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,Het,e)},writeBytesField:function(i,e){this.writeTag(i,tn.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,tn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,tn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,tn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,tn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,tn.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,tn.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,tn.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,tn.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,tn.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,!!e)}};function Iet(i,e,t){var r=t.buf,n,s;if(s=r[t.pos++],n=(s&112)>>4,s<128||(s=r[t.pos++],n|=(s&127)<<3,s<128)||(s=r[t.pos++],n|=(s&127)<<10,s<128)||(s=r[t.pos++],n|=(s&127)<<17,s<128)||(s=r[t.pos++],n|=(s&127)<<24,s<128)||(s=r[t.pos++],n|=(s&1)<<31,s<128))return u0(i,n,e);throw new Error("Expected varint not more than 10 bytes")}function Dh(i){return i.type===tn.Bytes?i.readVarint()+i.pos:i.pos+1}function u0(i,e,t){return t?e*4294967296+(i>>>0):(e>>>0)*4294967296+(i>>>0)}function Oet(i,e){var t,r;if(i>=0?(t=i%4294967296|0,r=i/4294967296|0):(t=~(-i%4294967296),r=~(-i/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Pet(t,r,e),Fet(r,e)}function Pet(i,e,t){t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos]=i&127}function Fet(i,e){var t=(i&7)<<4;e.buf[e.pos++]|=t|((i>>>=3)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127)))))}function Epe(i,e,t){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(var n=t.pos-1;n>=i;n--)t.buf[n+r]=t.buf[n]}function Net(i,e){for(var t=0;t<i.length;t++)e.writeVarint(i[t])}function $et(i,e){for(var t=0;t<i.length;t++)e.writeSVarint(i[t])}function Bet(i,e){for(var t=0;t<i.length;t++)e.writeFloat(i[t])}function jet(i,e){for(var t=0;t<i.length;t++)e.writeDouble(i[t])}function zet(i,e){for(var t=0;t<i.length;t++)e.writeBoolean(i[t])}function Uet(i,e){for(var t=0;t<i.length;t++)e.writeFixed32(i[t])}function Get(i,e){for(var t=0;t<i.length;t++)e.writeSFixed32(i[t])}function qet(i,e){for(var t=0;t<i.length;t++)e.writeFixed64(i[t])}function Het(i,e){for(var t=0;t<i.length;t++)e.writeSFixed64(i[t])}function h2(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+i[e+3]*16777216}function c0(i,e,t){i[t]=e,i[t+1]=e>>>8,i[t+2]=e>>>16,i[t+3]=e>>>24}function Spe(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function Vet(i,e,t){for(var r="",n=e;n<t;){var s=i[n],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n+a>t)break;var l,u,c;a===1?s<128&&(o=s):a===2?(l=i[n+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=i[n+1],u=i[n+2],(l&192)===128&&(u&192)===128&&(o=(s&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=i[n+1],u=i[n+2],c=i[n+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(o=(s&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),r+=String.fromCharCode(o),n+=a}return r}function Wet(i,e,t){return rEe.decode(i.subarray(e,t))}function Yet(i,e,t){for(var r=0,n,s;r<e.length;r++){if(n=e.charCodeAt(r),n>55295&&n<57344)if(s)if(n<56320){i[t++]=239,i[t++]=191,i[t++]=189,s=n;continue}else n=s-55296<<10|n-56320|65536,s=null;else{n>56319||r+1===e.length?(i[t++]=239,i[t++]=191,i[t++]=189):s=n;continue}else s&&(i[t++]=239,i[t++]=191,i[t++]=189,s=null);n<128?i[t++]=n:(n<2048?i[t++]=n>>6|192:(n<65536?i[t++]=n>>12|224:(i[t++]=n>>18|240,i[t++]=n>>12&63|128),i[t++]=n>>6&63|128),i[t++]=n&63|128)}return t}const Xet=$o(Let);class Zet extends Ew{constructor(e){super(),e=e||{},this.dataProjection=new By({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:ra,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,n){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,u=0,c=0,h=0;for(;e.pos<s;){if(!a){const d=e.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=e.readSVarint(),u+=e.readSVarint(),o===1&&c>h&&(n.push(c),h=c),r.push(l,u),c+=2;else if(o===7)c>h&&(r.push(r[h],r[h+1]),c+=2);else throw new Error("Invalid command found in the PBF")}c>h&&(n.push(c),h=c)}createFeature_(e,t,r){const n=t.type;if(n===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],u=[];this.readRawGeometry_(e,t,l,u);const c=ttt(n,u.length);if(this.featureClass===ra)s=new this.featureClass(c,l,u,2,o,a),s.transform(r.dataProjection);else{let h;if(c=="Polygon"){const m=Hxe(l,u);h=m.length>1?new sl(l,"XY",m):new _s(l,"XY",u)}else h=c==="Point"?new In(l,"XY"):c==="LineString"?new Vn(l,"XY"):c==="MultiPoint"?new gu(l,"XY"):c==="MultiLineString"?new da(l,"XY",u):null;const d=this.featureClass;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const p=Wn(h,!1,r);s.setGeometry(p),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const n=At(t.dataProjection);n.setWorldExtent(t.extent),t.dataProjection=n;const s=new Xet(e),o=s.readFields(Ket,{}),a=[];for(const l in o){if(r&&!r.includes(l))continue;const u=o[l],c=u?[0,0,u.extent,u.extent]:null;n.setExtent(c);for(let h=0,d=u.length;h<d;++h){const p=ett(s,u,h),m=this.createFeature_(s,p,t);m!==null&&a.push(m)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Ket(i,e,t){if(i===3){const r={keys:[],values:[],features:[]},n=t.readVarint()+t.pos;t.readFields(Jet,r,n),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Jet(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let r=null;const n=t.readVarint()+t.pos;for(;t.pos<n;)i=t.readVarint()>>3,r=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(r)}}function Qet(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const n=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[n]=s}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function ett(i,e,t){i.pos=e.features[t];const r=i.readVarint()+i.pos,n={layer:e,type:0,properties:{}};return i.readFields(Qet,n,r),n}function ttt(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}const SO=Zet;class CO{read(e){if(!e)return null;if(typeof e=="string"){const t=au(e);return this.readFromDocument(t)}return ou(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){ai()}}const itt="http://www.w3.org/1999/xlink";function Iv(i){return i.getAttributeNS(itt,"href")}const ul=[null,"http://www.opengis.net/ows/1.1"],rtt=it(ul,{ServiceIdentification:Ee(ktt),ServiceProvider:Ee(Mtt),OperationsMetadata:Ee(Ttt)});class ntt extends CO{constructor(){super()}readFromNode(e){const t=at({},rtt,e,[]);return t||null}}const stt=it(ul,{DeliveryPoint:Ee(mt),City:Ee(mt),AdministrativeArea:Ee(mt),PostalCode:Ee(mt),Country:Ee(mt),ElectronicMailAddress:Ee(mt)}),ott=it(ul,{Value:An(Ltt)}),att=it(ul,{AllowedValues:Ee(btt)}),ltt=it(ul,{Phone:Ee(Att),Address:Ee(vtt)}),utt=it(ul,{HTTP:Ee(Stt)}),ctt=it(ul,{Get:An(Ett),Post:void 0}),htt=it(ul,{DCP:Ee(wtt)}),dtt=it(ul,{Operation:Ctt}),ftt=it(ul,{Voice:Ee(mt),Facsimile:Ee(mt)}),ptt=it(ul,{Constraint:An(_tt)}),mtt=it(ul,{IndividualName:Ee(mt),PositionName:Ee(mt),ContactInfo:Ee(xtt)}),gtt=it(ul,{Abstract:Ee(mt),AccessConstraints:Ee(mt),Fees:Ee(mt),Title:Ee(mt),ServiceTypeVersion:Ee(mt),ServiceType:Ee(mt)}),ytt=it(ul,{ProviderName:Ee(mt),ProviderSite:Ee(Iv),ServiceContact:Ee(Dtt)});function vtt(i,e){return at({},stt,i,e)}function btt(i,e){return at({},ott,i,e)}function _tt(i,e){const t=i.getAttribute("name");if(t)return at({name:t},att,i,e)}function xtt(i,e){return at({},ltt,i,e)}function wtt(i,e){return at({},utt,i,e)}function Ett(i,e){const t=Iv(i);if(t)return at({href:t},ptt,i,e)}function Stt(i,e){return at({},ctt,i,e)}function Ctt(i,e){const t=i.getAttribute("name"),r=at({},htt,i,e);if(!r)return;const n=e[e.length-1];n[t]=r}function Ttt(i,e){return at({},dtt,i,e)}function Att(i,e){return at({},ftt,i,e)}function ktt(i,e){return at({},gtt,i,e)}function Dtt(i,e){return at({},mtt,i,e)}function Mtt(i,e){return at({},ytt,i,e)}function Ltt(i,e){return mt(i)}const nEe=ntt;function Cpe(i,e,t,r,n,s){n!==void 0?(n=n,s=s!==void 0?s:0):(n=[],s=0);let o=e;for(;o<t;){const a=i[o++];n[s++]=i[o++],n[s++]=a;for(let l=2;l<r;++l)n[s++]=i[o++]}return n.length=s,n}class Rtt extends bO{constructor(e){super(),e=e||{},this.dataProjection=At("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t);return new Tn(r)}readFeaturesFromText(e,t){return[this.readFeatureFromText(e,t)]}readGeometryFromText(e,t){const r=hx(this.geometryLayout_),n=Ott(e,r,this.factor_);Cpe(n,0,n.length,r,n);const s=Yh(n,0,n.length,r),o=new Vn(s,this.geometryLayout_);return Wn(o,!1,this.adaptOptions(t))}writeFeatureText(e,t){const r=e.getGeometry();if(r)return this.writeGeometryText(r,t);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,t){return this.writeFeatureText(e[0],t)}writeGeometryText(e,t){e=Wn(e,!0,this.adaptOptions(t));const r=e.getFlatCoordinates(),n=e.getStride();return Cpe(r,0,r.length,n,r),Itt(r,n,this.factor_)}}function Itt(i,e,t){t=t||1e5;let r;const n=new Array(e);for(r=0;r<e;++r)n[r]=0;for(let s=0,o=i.length;s<o;)for(r=0;r<e;++r,++s){const a=i[s],l=a-n[r];n[r]=a,i[s]=l}return Ptt(i,t)}function Ott(i,e,t){t=t||1e5;let r;const n=new Array(e);for(r=0;r<e;++r)n[r]=0;const s=Ftt(i,t);for(let o=0,a=s.length;o<a;)for(r=0;r<e;++r,++o)n[r]+=s[o],s[o]=n[r];return s}function Ptt(i,e){e=e||1e5;for(let t=0,r=i.length;t<r;++t)i[t]=Math.round(i[t]*e);return Ntt(i)}function Ftt(i,e){e=e||1e5;const t=$tt(i);for(let r=0,n=t.length;r<n;++r)t[r]/=e;return t}function Ntt(i){for(let e=0,t=i.length;e<t;++e){const r=i[e];i[e]=r<0?~(r<<1):r<<1}return Btt(i)}function $tt(i){const e=jtt(i);for(let t=0,r=e.length;t<r;++t){const n=e[t];e[t]=n&1?~(n>>1):n>>1}return e}function Btt(i){let e="";for(let t=0,r=i.length;t<r;++t)e+=ztt(i[t]);return e}function jtt(i){const e=[];let t=0,r=0;for(let n=0,s=i.length;n<s;++n){const o=i.charCodeAt(n)-63;t|=(o&31)<<r,o<32?(e.push(t),t=0,r=0):r+=5}return e}function ztt(i){let e,t="";for(;i>=32;)e=(32|i&31)+63,t+=String.fromCharCode(e),i>>=5;return e=i+63,t+=String.fromCharCode(e),t}const Utt=Rtt;class Gtt extends dO{constructor(e){super(),e=e||{},this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=At(e.dataProjection?e.dataProjection:"EPSG:4326")}readFeaturesFromObject(e,t){if(e.type=="Topology"){const r=e;let n,s=null,o=null;r.transform&&(n=r.transform,s=n.scale,o=n.translate);const a=r.arcs;n&&Jtt(a,s,o);const l=[],u=r.objects,c=this.layerName_;let h;for(const d in u)this.layers_&&!this.layers_.includes(d)||(u[d].type==="GeometryCollection"?(h=u[d],l.push.apply(l,Ktt(h,a,s,o,c,d,t))):(h=u[d],l.push(sEe(h,a,s,o,c,d,t))));return l}return[]}readProjectionFromObject(e){return this.dataProjection}}const qtt={Point:Htt,LineString:Wtt,Polygon:Xtt,MultiPoint:Vtt,MultiLineString:Ytt,MultiPolygon:Ztt};function vA(i,e){const t=[];let r;for(let n=0,s=i.length;n<s;++n)if(r=i[n],n>0&&t.pop(),r>=0){const o=e[r];for(let a=0,l=o.length;a<l;++a)t.push(o[a].slice(0))}else{const o=e[~r];for(let a=o.length-1;a>=0;--a)t.push(o[a].slice(0))}return t}function Htt(i,e,t){const r=i.coordinates;return e&&t&&TO(r,e,t),new In(r)}function Vtt(i,e,t){const r=i.coordinates;if(e&&t)for(let n=0,s=r.length;n<s;++n)TO(r[n],e,t);return new gu(r)}function Wtt(i,e){const t=vA(i.arcs,e);return new Vn(t)}function Ytt(i,e){const t=[];for(let r=0,n=i.arcs.length;r<n;++r)t[r]=vA(i.arcs[r],e);return new da(t)}function Xtt(i,e){const t=[];for(let r=0,n=i.arcs.length;r<n;++r)t[r]=vA(i.arcs[r],e);return new _s(t)}function Ztt(i,e){const t=[];for(let r=0,n=i.arcs.length;r<n;++r){const s=i.arcs[r],o=[];for(let a=0,l=s.length;a<l;++a)o[a]=vA(s[a],e);t[r]=o}return new sl(t)}function Ktt(i,e,t,r,n,s,o){const a=i.geometries,l=[];for(let u=0,c=a.length;u<c;++u)l[u]=sEe(a[u],e,t,r,n,s,o);return l}function sEe(i,e,t,r,n,s,o){let a=null;const l=i.type;if(l){const h=qtt[l];l==="Point"||l==="MultiPoint"?a=h(i,t,r):a=h(i,e),a=Wn(a,!1,o)}const u=new Tn({geometry:a});i.id!==void 0&&u.setId(i.id);let c=i.properties;return n&&(c||(c={}),c[n]=s),c&&u.setProperties(c,!0),u}function Jtt(i,e,t){for(let r=0,n=i.length;r<n;++r)Qtt(i[r],e,t)}function Qtt(i,e,t){let r=0,n=0;for(let s=0,o=i.length;s<o;++s){const a=i[s];r+=a[0],n+=a[1],a[0]=r,a[1]=n,TO(a,e,t)}}function TO(i,e,t){i[0]=i[0]*e[0]+t[0],i[1]=i[1]*e[1]+t[1]}const oEe=Gtt;class Kr extends tr{constructor(e){e=e||{},super(e),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,t,r){const n=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},n),super.writeGeometryElement(e,t,r)}}Kr.prototype.namespace="http://www.opengis.net/gml/3.2";Kr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:fi(tr.prototype.readFlatPos),posList:fi(tr.prototype.readFlatPosList),coordinates:fi(or.prototype.readFlatCoordinates)}};Kr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:tr.prototype.interiorParser,exterior:tr.prototype.exteriorParser}};Kr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:fi(Xt.prototype.readPoint),MultiPoint:fi(Xt.prototype.readMultiPoint),LineString:fi(Xt.prototype.readLineString),MultiLineString:fi(Xt.prototype.readMultiLineString),LinearRing:fi(Xt.prototype.readLinearRing),Polygon:fi(Xt.prototype.readPolygon),MultiPolygon:fi(Xt.prototype.readMultiPolygon),Surface:fi(Kr.prototype.readSurface),MultiSurface:fi(tr.prototype.readMultiSurface),Curve:fi(Kr.prototype.readCurve),MultiCurve:fi(tr.prototype.readMultiCurve),Envelope:fi(Kr.prototype.readEnvelope)}};Kr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Zt(tr.prototype.curveMemberParser),curveMembers:Zt(tr.prototype.curveMemberParser)}};Kr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Zt(tr.prototype.surfaceMemberParser),surfaceMembers:Zt(tr.prototype.surfaceMemberParser)}};Kr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Zt(Xt.prototype.readLineString),Curve:Zt(tr.prototype.readCurve)}};Kr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Zt(Xt.prototype.readPolygon),Surface:Zt(tr.prototype.readSurface)}};Kr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:fi(tr.prototype.readPatch)}};Kr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:fi(tr.prototype.readSegment)}};Kr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Zt(tr.prototype.readFlatPosList),upperCorner:Zt(tr.prototype.readFlatPosList)}};Kr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:fi(tr.prototype.readPolygonPatch)}};Kr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:EC(tr.prototype.readLineStringSegment)}};Kr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Zt(Xt.prototype.pointMemberParser),pointMembers:Zt(Xt.prototype.pointMemberParser)}};Kr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Zt(Xt.prototype.lineStringMemberParser),lineStringMembers:Zt(Xt.prototype.lineStringMemberParser)}};Kr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Zt(Xt.prototype.polygonMemberParser),polygonMembers:Zt(Xt.prototype.polygonMemberParser)}};Kr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Zt(Xt.prototype.readFlatCoordinatesFromNode)}};Kr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Zt(Xt.prototype.readLineString)}};Kr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Zt(Xt.prototype.readPolygon)}};Kr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:fi(Xt.prototype.readFlatLinearRing),Ring:fi(Kr.prototype.readFlatCurveRing)}};Kr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Me(tr.prototype.writeRing),interior:Me(tr.prototype.writeRing)}};Kr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Me(xi),upperCorner:Me(xi)}};Kr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Me(tr.prototype.writeSurfaceOrPolygonMember),polygonMember:Me(tr.prototype.writeSurfaceOrPolygonMember)}};Kr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Me(tr.prototype.writePointMember)}};Kr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Me(tr.prototype.writeLineStringOrCurveMember),curveMember:Me(tr.prototype.writeLineStringOrCurveMember)}};Kr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Me(tr.prototype.writeCurveOrLineString),MultiCurve:Me(tr.prototype.writeMultiCurveOrLineString),Point:Me(Kr.prototype.writePoint),MultiPoint:Me(tr.prototype.writeMultiPoint),LineString:Me(tr.prototype.writeCurveOrLineString),MultiLineString:Me(tr.prototype.writeMultiCurveOrLineString),LinearRing:Me(tr.prototype.writeLinearRing),Polygon:Me(tr.prototype.writeSurfaceOrPolygon),MultiPolygon:Me(tr.prototype.writeMultiSurfaceOrPolygon),Surface:Me(tr.prototype.writeSurfaceOrPolygon),MultiSurface:Me(tr.prototype.writeMultiSurfaceOrPolygon),Envelope:Me(tr.prototype.writeEnvelope)}};const AO=Kr;class aEe{constructor(e){this.tagName_=e}getTagName(){return this.tagName_}}class eit extends aEe{constructor(e,t){super(e),this.conditions=t,Hi(this.conditions.length>=2,"At least 2 conditions are required")}}class tit extends eit{constructor(e){super("And",Array.prototype.slice.call(arguments))}}const iit=tit;class rit extends aEe{constructor(e,t,r){if(super("BBOX"),this.geometryName=e,this.extent=t,t.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function nit(i){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(iit,e))}function sit(i,e,t){return new rit(i,e,t)}const Tpe={"http://www.opengis.net/gml":{boundedBy:Ee(Xt.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Zt(Xt.prototype.readFeaturesInternal)}},oit={"http://www.opengis.net/wfs":{totalInserted:Ee(ys),totalUpdated:Ee(ys),totalDeleted:Ee(ys)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ee(ys),totalUpdated:Ee(ys),totalDeleted:Ee(ys)}},ait={"http://www.opengis.net/wfs":{TransactionSummary:Ee(kpe,"transactionSummary"),InsertResults:Ee(Mpe,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ee(kpe,"transactionSummary"),InsertResults:Ee(Mpe,"insertIds")}},lit={"http://www.opengis.net/wfs":{PropertyName:Me(xi)},"http://www.opengis.net/wfs/2.0":{PropertyName:Me(xi)}},lEe={"http://www.opengis.net/wfs":{Insert:Me(Lpe),Update:Me(Ipe),Delete:Me(Rpe),Property:Me(Ope),Native:Me(Ppe)},"http://www.opengis.net/wfs/2.0":{Insert:Me(Lpe),Update:Me(Ipe),Delete:Me(Rpe),Property:Me(Ope),Native:Me(Ppe)}},uEe="feature",kO="http://www.w3.org/2000/xmlns/",DO={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},vL={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},MO={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},Ape={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},LO={"2.0.0":AO,"1.1.0":tr,"1.0.0":or},uit="1.1.0";class cit extends Cw{constructor(e){super(),e=e||{},this.version_=e.version?e.version:uit,this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new LO[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:Ape[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,t){const r={node:e};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(e,t||{}));const n=[r];let s;this.version_==="2.0.0"?s=Tpe:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=at([],s,e,n,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(e){if(e){if(typeof e=="string"){const t=au(e);return this.readTransactionResponseFromDocument(t)}return ou(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(e){if(typeof e=="string"){const t=au(e);return this.readFeatureCollectionMetadataFromDocument(t)}return ou(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}readFeatureCollectionMetadataFromNode(e){const t={},r=Xh(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=r,at(t,Tpe,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}readTransactionResponseFromNode(e){return at({},ait,e,[])}writeGetFeature(e){const t=Ri(vL[this.version_],"GetFeature");t.setAttribute("service","WFS"),t.setAttribute("version",this.version_),e.handle&&t.setAttribute("handle",e.handle),e.outputFormat&&t.setAttribute("outputFormat",e.outputFormat),e.maxFeatures!==void 0&&t.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&t.setAttribute("resultType",e.resultType),e.startIndex!==void 0&&t.setAttribute("startIndex",String(e.startIndex)),e.count!==void 0&&t.setAttribute("count",String(e.count)),e.viewParams!==void 0&&t.setAttribute("viewParams",e.viewParams),t.setAttributeNS(Km,"xsi:schemaLocation",this.schemaLocation_);const r={node:t};if(Object.assign(r,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),Hi(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),typeof e.featureTypes[0]=="string"){let n=e.filter;e.bbox&&(Hi(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),n=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,n)),Object.assign(r,{geometryName:e.geometryName,filter:n}),Hpe(t,e.featureTypes,[r])}else e.featureTypes.forEach(n=>{const s=this.combineBboxAndFilter(n.geometryName,n.bbox,e.srsName,e.filter);Object.assign(r,{geometryName:n.geometryName,filter:s}),Hpe(t,[n.name],[r])});return t}combineBboxAndFilter(e,t,r,n){const s=sit(e,t,r);return n?nit(n,s):s}writeTransaction(e,t,r,n){const s=[],o=n.version?n.version:this.version_,a=Ri(vL[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let l;n&&(l=n.gmlOptions?n.gmlOptions:{},n.handle&&a.setAttribute("handle",n.handle)),a.setAttributeNS(Km,"xsi:schemaLocation",Ape[o]);const u=hit(a,l,o,n);return e&&d2("Insert",e,s,u),t&&d2("Update",t,s,u),r&&d2("Delete",r,s,u),n.nativeElements&&d2("Native",n.nativeElements,s,u),a}readProjectionFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(!(t.childNodes.length===0||t.childNodes.length===1&&t.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(t,r),At(r.pop().srsName)}}return null}}function hit(i,e,t,r){const n=r.featurePrefix?r.featurePrefix:uEe;let s;return t==="1.0.0"?s=2:t==="1.1.0"?s=3:t==="2.0.0"&&(s=3.2),Object.assign({node:i},{version:t,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:n,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},e)}function d2(i,e,t,r){Ai(r,lEe,as(i),e,t)}function kpe(i,e){return at({},oit,i,e)}const dit={"http://www.opengis.net/ogc":{FeatureId:Zt(function(i,e){return i.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:Zt(function(i,e){return i.getAttribute("fid")})}};function Dpe(i,e){rl(dit,i,e)}const fit={"http://www.opengis.net/wfs":{Feature:Dpe},"http://www.opengis.net/wfs/2.0":{Feature:Dpe}};function Mpe(i,e){return at([],fit,i,e)}function Lpe(i,e,t){const r=t[t.length-1],n=r.featureType,s=r.featureNS,o=r.gmlVersion,a=Ri(s,n);i.appendChild(a),o===2?or.prototype.writeFeatureElement(a,e,t):o===3?tr.prototype.writeFeatureElement(a,e,t):AO.prototype.writeFeatureElement(a,e,t)}function cEe(i,e,t){const n=t[t.length-1].version,s=DO[n],o=Ri(s,"Filter"),a=Ri(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),i.appendChild(o)}function RO(i,e){i=i||uEe;const t=i+":";return e.startsWith(t)?e:t+e}function Rpe(i,e,t){const r=t[t.length-1];Hi(e.getId()!==void 0,"Features must have an id set");const n=r.featureType,s=r.featurePrefix,o=r.featureNS,a=RO(s,n);i.setAttribute("typeName",a),i.setAttributeNS(kO,"xmlns:"+s,o);const l=e.getId();l!==void 0&&cEe(i,l,t)}function Ipe(i,e,t){const r=t[t.length-1];Hi(e.getId()!==void 0,"Features must have an id set");const n=r.version,s=r.featureType,o=r.featurePrefix,a=r.featureNS,l=RO(o,s),u=e.getGeometryName();i.setAttribute("typeName",l),i.setAttributeNS(kO,"xmlns:"+o,a);const c=e.getId();if(c!==void 0){const h=e.getKeys(),d=[];for(let p=0,m=h.length;p<m;p++){const g=e.get(h[p]);if(g!==void 0){let v=h[p];g&&typeof g.getSimplifiedGeometry=="function"&&(v=u),d.push({name:v,value:g})}}Ai({version:n,gmlVersion:r.gmlVersion,node:i,hasZ:r.hasZ,srsName:r.srsName},lEe,as("Property"),d,t),cEe(i,c,t)}}function Ope(i,e,t){const r=t[t.length-1],n=r.version,s=vL[n],a=Ri(s,n==="2.0.0"?"ValueReference":"Name"),l=r.gmlVersion;if(i.appendChild(a),xi(a,e.name),e.value!==void 0&&e.value!==null){const u=Ri(s,"Value");i.appendChild(u),e.value&&typeof e.value.getSimplifiedGeometry=="function"?l===2?or.prototype.writeGeometryElement(u,e.value,t):l===3?tr.prototype.writeGeometryElement(u,e.value,t):AO.prototype.writeGeometryElement(u,e.value,t):xi(u,e.value)}}function Ppe(i,e,t){e.vendorId&&i.setAttribute("vendorId",e.vendorId),e.safeToIgnore!==void 0&&i.setAttribute("safeToIgnore",String(e.safeToIgnore)),e.value!==void 0&&xi(i,e.value)}const bA={"http://www.opengis.net/wfs":{Query:Me(Fpe)},"http://www.opengis.net/wfs/2.0":{Query:Me(Fpe)},"http://www.opengis.net/ogc":{During:Me(Bpe),And:Me(f2),Or:Me(f2),Not:Me(jpe),BBOX:Me(Npe),Contains:Me(hf),Intersects:Me(hf),Within:Me(hf),DWithin:Me($pe),PropertyIsEqualTo:Me(Kl),PropertyIsNotEqualTo:Me(Kl),PropertyIsLessThan:Me(Kl),PropertyIsLessThanOrEqualTo:Me(Kl),PropertyIsGreaterThan:Me(Kl),PropertyIsGreaterThanOrEqualTo:Me(Kl),PropertyIsNull:Me(zpe),PropertyIsBetween:Me(Upe),PropertyIsLike:Me(Gpe)},"http://www.opengis.net/fes/2.0":{During:Me(Bpe),And:Me(f2),Or:Me(f2),Not:Me(jpe),BBOX:Me(Npe),Contains:Me(hf),Disjoint:Me(hf),Intersects:Me(hf),ResourceId:Me(mit),Within:Me(hf),DWithin:Me($pe),PropertyIsEqualTo:Me(Kl),PropertyIsNotEqualTo:Me(Kl),PropertyIsLessThan:Me(Kl),PropertyIsLessThanOrEqualTo:Me(Kl),PropertyIsGreaterThan:Me(Kl),PropertyIsGreaterThanOrEqualTo:Me(Kl),PropertyIsNull:Me(zpe),PropertyIsBetween:Me(Upe),PropertyIsLike:Me(Gpe)}};function Fpe(i,e,t){const r=t[t.length-1],n=r.version,s=r.featurePrefix,o=r.featureNS,a=r.propertyNames,l=r.srsName;let u;s?u=RO(s,e):u=e;let c;n==="2.0.0"?c="typeNames":c="typeName",i.setAttribute(c,u),l&&i.setAttribute("srsName",l),o&&i.setAttributeNS(kO,"xmlns:"+s,o);const h=Object.assign({},r);h.node=i,Ai(h,lit,as("PropertyName"),a,t);const d=r.filter;if(d){const p=Ri(_A(n),"Filter");i.appendChild(p),pit(p,d,t)}}function pit(i,e,t){const r=t[t.length-1],n={node:i};Object.assign(n,{context:r}),Ai(n,bA,as(e.getTagName()),[e],t)}function Npe(i,e,t){const r=t[t.length-1],s=r.context.version;r.srsName=e.srsName;const o=LO[s];Ov(s,i,e.geometryName),o.prototype.writeGeometryElement(i,e.extent,t)}function mit(i,e,t){i.setAttribute("rid",e.rid)}function hf(i,e,t){const r=t[t.length-1],s=r.context.version;r.srsName=e.srsName;const o=LO[s];Ov(s,i,e.geometryName),o.prototype.writeGeometryElement(i,e.geometry,t)}function $pe(i,e,t){const s=t[t.length-1].context.version;hf(i,e,t);const o=Ri(_A(s),"Distance");xi(o,e.distance.toString()),s==="2.0.0"?o.setAttribute("uom",e.unit):o.setAttribute("units",e.unit),i.appendChild(o)}function Bpe(i,e,t){const s=t[t.length-1].context.version;AC(MO[s],"ValueReference",i,e.propertyName);const o=Ri(rd,"TimePeriod");i.appendChild(o);const a=Ri(rd,"begin");o.appendChild(a),qpe(a,e.begin);const l=Ri(rd,"end");o.appendChild(l),qpe(l,e.end)}function f2(i,e,t){const n=t[t.length-1].context,s={node:i};Object.assign(s,{context:n});const o=e.conditions;for(let a=0,l=o.length;a<l;++a){const u=o[a];Ai(s,bA,as(u.getTagName()),[u],t)}}function jpe(i,e,t){const n=t[t.length-1].context,s={node:i};Object.assign(s,{context:n});const o=e.condition;Ai(s,bA,as(o.getTagName()),[o],t)}function Kl(i,e,t){const s=t[t.length-1].context.version;e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),Ov(s,i,e.propertyName),kC(s,i,""+e.expression)}function zpe(i,e,t){const s=t[t.length-1].context.version;Ov(s,i,e.propertyName)}function Upe(i,e,t){const s=t[t.length-1].context.version,o=_A(s);Ov(s,i,e.propertyName);const a=Ri(o,"LowerBoundary");i.appendChild(a),kC(s,a,""+e.lowerBoundary);const l=Ri(o,"UpperBoundary");i.appendChild(l),kC(s,l,""+e.upperBoundary)}function Gpe(i,e,t){const s=t[t.length-1].context.version;i.setAttribute("wildCard",e.wildCard),i.setAttribute("singleChar",e.singleChar),i.setAttribute("escapeChar",e.escapeChar),e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),Ov(s,i,e.propertyName),kC(s,i,""+e.pattern)}function AC(i,e,t,r){const n=Ri(i,e);xi(n,r),t.appendChild(n)}function kC(i,e,t){AC(_A(i),"Literal",e,t)}function Ov(i,e,t){i==="2.0.0"?AC(MO[i],"ValueReference",e,t):AC(DO[i],"PropertyName",e,t)}function qpe(i,e){const t=Ri(rd,"TimeInstant");i.appendChild(t);const r=Ri(rd,"timePosition");t.appendChild(r),xi(r,e)}function Hpe(i,e,t){const r=t[t.length-1],n=Object.assign({},r);n.node=i,Ai(n,bA,as("Query"),e,t)}function _A(i){let e;return i==="2.0.0"?e=MO[i]:e=DO[i],e}const git=cit,cn={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class Vpe{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),t=[];for(let r=0;r<e;r++)t.push(this.readPoint());return t}readPolygon(){const e=this.readUint32(),t=[];for(let r=0;r<e;r++)t.push(this.readLineString());return t}readWkbHeader(e){const r=this.readUint8()>0,n=this.readUint32(r),s=Math.floor((n&268435455)/1e3),o=!!(n&2147483648)||s===1||s===3,a=!!(n&1073741824)||s===2||s===3,l=!!(n&536870912),u=(n&268435455)%1e3,c=["XY",o?"Z":"",a?"M":""].join(""),h=l?this.readUint32(r):null;if(e!==void 0&&e!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==c)throw new Error("Inconsistent geometry layout");if(h&&this.srid_!==h)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=o,this.hasM_=a,this.layout_=c,this.srid_=h,this.initialized_=!0;return u}readWkbPayload(e){switch(e){case cn.POINT:return this.readPoint();case cn.LINE_STRING:return this.readLineString();case cn.POLYGON:case cn.TRIANGLE:return this.readPolygon();case cn.MULTI_POINT:return this.readMultiPoint();case cn.MULTI_LINE_STRING:return this.readMultiLineString();case cn.MULTI_POLYGON:case cn.POLYHEDRAL_SURFACE:case cn.TIN:return this.readMultiPolygon();case cn.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,t){const r=this.readUint32(),n=[];for(let s=0;s<r;s++){const o=e.call(this,t);o&&n.push(o)}return n}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,cn.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,cn.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,cn.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case cn.POINT:return new In(t,this.layout_);case cn.LINE_STRING:return new Vn(t,this.layout_);case cn.POLYGON:case cn.TRIANGLE:return new _s(t,this.layout_);case cn.MULTI_POINT:return new gu(t,this.layout_);case cn.MULTI_LINE_STRING:return new da(t,this.layout_);case cn.MULTI_POLYGON:case cn.POLYHEDRAL_SURFACE:case cn.TIN:return new sl(t,this.layout_);case cn.GEOMETRY_COLLECTION:return new Po(t);default:return null}}getSrid(){return this.srid_}}class yit{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,t){const r=Object.assign.apply(null,t.split("").map((n,s)=>({[n]:e[s]})));for(const n of this.layout_)this.writeDouble(n in r?r[n]:this.nodata_[n])}writeLineString(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writePoint(e[r],t)}writePolygon(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeLineString(e[r],t)}writeWkbHeader(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}writeMultiPoint(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(1),this.writePoint(e[r],t)}writeMultiLineString(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(2),this.writeLineString(e[r],t)}writeMultiPolygon(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(3),this.writePolygon(e[r],t)}writeGeometryCollection(e){this.writeUint32(e.length);for(let t=0;t<e.length;t++)this.writeGeometry(e[t])}findMinimumLayout(e,t="XYZM"){const r=(n,s)=>n===s?n:n==="XYZM"?s:s==="XYZM"?n:"XY";if(e instanceof Yc)return r(e.getLayout(),t);if(e instanceof Po){const n=e.getGeometriesArray();for(let s=0;s<n.length&&t!=="XY";s++)t=this.findMinimumLayout(n[s],t)}return t}writeGeometry(e,t){const r={Point:cn.POINT,LineString:cn.LINE_STRING,Polygon:cn.POLYGON,MultiPoint:cn.MULTI_POINT,MultiLineString:cn.MULTI_LINE_STRING,MultiPolygon:cn.MULTI_POLYGON,GeometryCollection:cn.GEOMETRY_COLLECTION},n=e.getType(),s=r[n];if(!s)throw new Error("GeometryType "+n+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(s,t),e instanceof Yc?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[n].call(this,e.getCoordinates(),e.getLayout()):e instanceof Po&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((s,o)=>s+o[0],0),t=new ArrayBuffer(e),r=new DataView(t);let n=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:r.setUint8(n,s[1]);break;case 4:r.setUint32(n,s[1],this.isLittleEndian_);break;case 8:r.setFloat64(n,s[1],this.isLittleEndian_);break}n+=s[0]}),t}}class vit extends Ew{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,t){return new Tn({geometry:this.readGeometry(e,t)})}readFeatures(e,t){let r=[];const n=this.readGeometry(e,t);return this.splitCollection&&n instanceof Po?r=n.getGeometriesArray():r=[n],r.map(s=>new Tn({geometry:s}))}readGeometry(e,t){const r=Wpe(e);if(!r)return null;const s=new Vpe(r).readGeometry();return this.viewCache_=r,t=this.getReadOptions(e,t),this.viewCache_=null,Wn(s,!1,t)}readProjection(e){const t=this.viewCache_||Wpe(e);if(!t)return;const r=new Vpe(t);return r.readWkbHeader(),r.getSrid()&&At("EPSG:"+r.getSrid())||void 0}writeFeature(e,t){return this.writeGeometry(e.getGeometry(),t)}writeFeatures(e,t){return this.writeGeometry(new Po(e.map(r=>r.getGeometry())),t)}writeGeometry(e,t){t=this.adaptOptions(t);const r=new yit({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let n=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=t.dataProjection&&At(t.dataProjection);if(o){const a=o.getCode();a.startsWith("EPSG:")&&(n=Number(a.substring(5)))}}r.writeGeometry(Wn(e,!0,t),n);const s=r.getBuffer();return this.hex_?bit(s):s}}function bit(i){const e=new Uint8Array(i);return Array.from(e.values()).map(t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase()).join("")}function _it(i){const e=new Uint8Array(i.length/2);for(let t=0;t<i.length/2;t++)e[t]=parseInt(i.substr(t*2,2),16);return new DataView(e.buffer)}function Wpe(i){return typeof i=="string"?_it(i):ArrayBuffer.isView(i)?i instanceof DataView?i:new DataView(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?new DataView(i):null}const xit=vit,wit={POINT:In,LINESTRING:Vn,POLYGON:_s,MULTIPOINT:gu,MULTILINESTRING:da,MULTIPOLYGON:sl},hEe="EMPTY",dEe="Z",fEe="M",Eit="ZM",rn={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},Sit={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class Cit{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let r=e,n;if(e=="(")n=rn.LEFT_PAREN;else if(e==",")n=rn.COMMA;else if(e==")")n=rn.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")n=rn.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))n=rn.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")n=rn.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:r,type:n}}readNumber_(){let e;const t=this.index_;let r=!1,n=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(n=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!n&&(e=="e"||e=="E")||n&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}class Tit{constructor(e){this.lexer_=e,this.token_={position:0,type:rn.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const t=this.token_;if(this.isTokenType(rn.TEXT)){const r=t.value;r===dEe?e="XYZ":r===fEe?e="XYM":r===Eit&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(rn.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(rn.COMMA));if(this.match(rn.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(rn.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(rn.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(rn.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(rn.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(rn.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(rn.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(rn.LEFT_PAREN)){let e;if(this.token_.type==rn.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(rn.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(rn.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(rn.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(rn.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(rn.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let r=0;r<t;++r){const n=this.token_;if(this.match(rn.NUMBER))e.push(n.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(rn.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(rn.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(rn.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(rn.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(rn.TEXT)&&this.token_.value==hEe;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(rn.TEXT)){const t=e.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(r)return new Po([]);const o=this.parseGeometryCollectionText_();return new Po(o)}const n=wit[t];if(!n)throw new Error("Invalid geometry type: "+t);let s;if(r)t=="POINT"?s=[NaN,NaN]:s=[];else switch(t){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new n(s,this.layout_)}throw new Error(this.formatErrorMessage_())}}class Ait extends bO{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const t=new Cit(e);return new Tit(t).parse()}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t),n=new Tn;return n.setGeometry(r),n}readFeaturesFromText(e,t){let r=[];const n=this.readGeometryFromText(e,t);this.splitCollection_&&n.getType()=="GeometryCollection"?r=n.getGeometriesArray():r=[n];const s=[];for(let o=0,a=r.length;o<a;++o){const l=new Tn;l.setGeometry(r[o]),s.push(l)}return s}readGeometryFromText(e,t){const r=this.parse_(e);return Wn(r,!1,t)}writeFeatureText(e,t){const r=e.getGeometry();return r?this.writeGeometryText(r,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);const r=[];for(let s=0,o=e.length;s<o;++s)r.push(e[s].getGeometry());const n=new Po(r);return this.writeGeometryText(n,t)}writeGeometryText(e,t){return gEe(Wn(e,!0,t))}}function pEe(i){const e=i.getCoordinates();return e.length===0?"":e.join(" ")}function kit(i){const e=[],t=i.getPoints();for(let r=0,n=t.length;r<n;++r)e.push("("+pEe(t[r])+")");return e.join(",")}function Dit(i){const e=[],t=i.getGeometries();for(let r=0,n=t.length;r<n;++r)e.push(gEe(t[r]));return e.join(",")}function IO(i){const e=i.getCoordinates(),t=[];for(let r=0,n=e.length;r<n;++r)t.push(e[r].join(" "));return t.join(",")}function Mit(i){const e=[],t=i.getLineStrings();for(let r=0,n=t.length;r<n;++r)e.push("("+IO(t[r])+")");return e.join(",")}function mEe(i){const e=[],t=i.getLinearRings();for(let r=0,n=t.length;r<n;++r)e.push("("+IO(t[r])+")");return e.join(",")}function Lit(i){const e=[],t=i.getPolygons();for(let r=0,n=t.length;r<n;++r)e.push("("+mEe(t[r])+")");return e.join(",")}function Rit(i){const e=i.getLayout();let t="";return(e==="XYZ"||e==="XYZM")&&(t+=dEe),(e==="XYM"||e==="XYZM")&&(t+=fEe),t}const Iit={Point:pEe,LineString:IO,Polygon:mEe,MultiPoint:kit,MultiLineString:Mit,MultiPolygon:Lit,GeometryCollection:Dit};function gEe(i){const e=i.getType(),t=Iit[e],r=t(i);let n=Sit[e];if(typeof i.getFlatCoordinates=="function"){const s=Rit(i);s.length>0&&(n+=" "+s)}return r.length===0?n+" "+hEe:n+"("+r+")"}const Oit=Ait,Uo=[null,"http://www.opengis.net/wms"],Pit=it(Uo,{Service:Ee(irt),Capability:Ee(trt)}),Fit=it(Uo,{Request:Ee(urt),Exception:Ee(ort),Layer:Ee(art)});class Nit extends CO{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=at({version:this.version},Pit,e,[]);return t||null}}const $it=it(Uo,{Name:Ee(mt),Title:Ee(mt),Abstract:Ee(mt),KeywordList:Ee(_Ee),OnlineResource:Ee(Iv),ContactInformation:Ee(rrt),Fees:Ee(mt),AccessConstraints:Ee(mt),LayerLimit:Ee(ys),MaxWidth:Ee(ys),MaxHeight:Ee(ys)}),Bit=it(Uo,{ContactPersonPrimary:Ee(nrt),ContactPosition:Ee(mt),ContactAddress:Ee(srt),ContactVoiceTelephone:Ee(mt),ContactFacsimileTelephone:Ee(mt),ContactElectronicMailAddress:Ee(mt)}),jit=it(Uo,{ContactPerson:Ee(mt),ContactOrganization:Ee(mt)}),zit=it(Uo,{AddressType:Ee(mt),Address:Ee(mt),City:Ee(mt),StateOrProvince:Ee(mt),PostCode:Ee(mt),Country:Ee(mt)}),Uit=it(Uo,{Format:Zt(mt)}),yEe=it(Uo,{Name:Ee(mt),Title:Ee(mt),Abstract:Ee(mt),KeywordList:Ee(_Ee),CRS:An(mt),EX_GeographicBoundingBox:Ee(ert),BoundingBox:An(Qit),Dimension:An(lrt),Attribution:Ee(Jit),AuthorityURL:An(drt),Identifier:An(mt),MetadataURL:An(frt),DataURL:An(cd),FeatureListURL:An(cd),Style:An(prt),MinScaleDenominator:Ee(lr),MaxScaleDenominator:Ee(lr),Layer:An(vEe)}),Git=it(Uo,{Title:Ee(mt),OnlineResource:Ee(Iv),LogoURL:Ee(bEe)}),qit=it(Uo,{westBoundLongitude:Ee(lr),eastBoundLongitude:Ee(lr),southBoundLatitude:Ee(lr),northBoundLatitude:Ee(lr)}),Hit=it(Uo,{GetCapabilities:Ee(yD),GetMap:Ee(yD),GetFeatureInfo:Ee(yD)}),Vit=it(Uo,{Format:An(mt),DCPType:An(crt)}),Wit=it(Uo,{HTTP:Ee(hrt)}),Yit=it(Uo,{Get:Ee(cd),Post:Ee(cd)}),Xit=it(Uo,{Name:Ee(mt),Title:Ee(mt),Abstract:Ee(mt),LegendURL:An(bEe),StyleSheetURL:Ee(cd),StyleURL:Ee(cd)}),Zit=it(Uo,{Format:Ee(mt),OnlineResource:Ee(Iv)}),Kit=it(Uo,{Keyword:Zt(mt)});function Jit(i,e){return at({},Git,i,e)}function Qit(i,e){const t=[jh(i.getAttribute("minx")),jh(i.getAttribute("miny")),jh(i.getAttribute("maxx")),jh(i.getAttribute("maxy"))],r=[jh(i.getAttribute("resx")),jh(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS"),extent:t,res:r}}function ert(i,e){const t=at({},qit,i,e);if(!t)return;const r=t.westBoundLongitude,n=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(r===void 0||n===void 0||s===void 0||o===void 0))return[r,n,s,o]}function trt(i,e){return at({},Fit,i,e)}function irt(i,e){return at({},$it,i,e)}function rrt(i,e){return at({},Bit,i,e)}function nrt(i,e){return at({},jit,i,e)}function srt(i,e){return at({},zit,i,e)}function ort(i,e){return at([],Uit,i,e)}function art(i,e){const t=at({},yEe,i,e);return t.Layer===void 0?Object.assign(t,vEe(i,e)):t}function vEe(i,e){const t=e[e.length-1],r=at({},yEe,i,e);if(!r)return;let n=Rm(i.getAttribute("queryable"));n===void 0&&(n=t.queryable),r.queryable=n!==void 0?n:!1;let s=Xh(i.getAttribute("cascaded"));s===void 0&&(s=t.cascaded),r.cascaded=s;let o=Rm(i.getAttribute("opaque"));o===void 0&&(o=t.opaque),r.opaque=o!==void 0?o:!1;let a=Rm(i.getAttribute("noSubsets"));a===void 0&&(a=t.noSubsets),r.noSubsets=a!==void 0?a:!1;let l=jh(i.getAttribute("fixedWidth"));l||(l=t.fixedWidth),r.fixedWidth=l;let u=jh(i.getAttribute("fixedHeight"));return u||(u=t.fixedHeight),r.fixedHeight=u,["Style","CRS","AuthorityURL"].forEach(function(d){if(d in t){const p=r[d]||[];r[d]=p.concat(t[d])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(d){if(!(d in r)){const p=t[d];r[d]=p}}),r}function lrt(i,e){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:Rm(i.getAttribute("multipleValues")),nearestValue:Rm(i.getAttribute("nearestValue")),current:Rm(i.getAttribute("current")),values:mt(i)}}function cd(i,e){return at({},Zit,i,e)}function urt(i,e){return at({},Hit,i,e)}function crt(i,e){return at({},Wit,i,e)}function hrt(i,e){return at({},Yit,i,e)}function yD(i,e){return at({},Vit,i,e)}function bEe(i,e){const t=cd(i,e);if(t){const r=[Xh(i.getAttribute("width")),Xh(i.getAttribute("height"))];return t.size=r,t}}function drt(i,e){const t=cd(i,e);if(t)return t.name=i.getAttribute("name"),t}function frt(i,e){const t=cd(i,e);if(t)return t.type=i.getAttribute("type"),t}function prt(i,e){return at({},Xit,i,e)}function _Ee(i,e){return at([],Kit,i,e)}const mrt=Nit,grt="_feature",yrt="_layer";class vrt extends Cw{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new or,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,t){e.setAttribute("namespaceURI",this.featureNS_);const r=e.localName;let n=[];if(e.childNodes.length===0)return n;if(r=="msGMLOutput")for(let s=0,o=e.childNodes.length;s<o;s++){const a=e.childNodes[s];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,u=t[0],c=yrt,h=l.localName.replace(c,"");if(this.layers_&&!this.layers_.includes(h))continue;const d=h+grt;u.featureType=d,u.featureNS=this.featureNS_;const p={};p[d]=Zt(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const m=it([u.featureNS,null],p);l.setAttribute("namespaceURI",this.featureNS_);const g=at([],m,l,t,this.gmlFormat_);g&&Dr(n,g)}if(r=="FeatureCollection"){const s=at([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);s&&(n=s)}return n}readFeaturesFromNode(e,t){const r={};return t&&Object.assign(r,this.getReadOptions(e,t)),this.readFeatures_(e,[r])}}const brt=vrt,rh=[null,"http://www.opengis.net/wmts/1.0"],Pv=[null,"http://www.opengis.net/ows/1.1"],_rt=it(rh,{Contents:Ee(Lrt)});let xrt=class extends CO{constructor(){super(),this.owsParser_=new nEe}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=t,r=at(r,_rt,e,[]),r||null):null}};const wrt=it(rh,{Layer:An(Rrt),TileMatrixSet:An(Irt)}),Ert=it(rh,{Style:An(Ort),Format:An(mt),TileMatrixSetLink:An(Prt),Dimension:An(Frt),ResourceURL:An(Nrt)},it(Pv,{Title:Ee(mt),Abstract:Ee(mt),WGS84BoundingBox:Ee(wEe),BoundingBox:An($rt),Identifier:Ee(mt)})),Srt=it(rh,{LegendURL:An(Brt)},it(Pv,{Title:Ee(mt),Identifier:Ee(mt)})),Crt=it(rh,{TileMatrixSet:Ee(mt),TileMatrixSetLimits:Ee(zrt)}),Trt=it(rh,{TileMatrixLimits:Zt(Urt)}),Art=it(rh,{TileMatrix:Ee(mt),MinTileRow:Ee(ys),MaxTileRow:Ee(ys),MinTileCol:Ee(ys),MaxTileCol:Ee(ys)}),krt=it(rh,{Default:Ee(mt),Value:An(mt)},it(Pv,{Identifier:Ee(mt)})),xEe=it(Pv,{LowerCorner:Zt(bL),UpperCorner:Zt(bL)}),Drt=it(rh,{WellKnownScaleSet:Ee(mt),TileMatrix:An(jrt)},it(Pv,{SupportedCRS:Ee(mt),Identifier:Ee(mt),BoundingBox:Ee(wEe)})),Mrt=it(rh,{TopLeftCorner:Ee(bL),ScaleDenominator:Ee(lr),TileWidth:Ee(ys),TileHeight:Ee(ys),MatrixWidth:Ee(ys),MatrixHeight:Ee(ys)},it(Pv,{Identifier:Ee(mt)}));function Lrt(i,e){return at({},wrt,i,e)}function Rrt(i,e){return at({},Ert,i,e)}function Irt(i,e){return at({},Drt,i,e)}function Ort(i,e){const t=at({},Srt,i,e);if(!t)return;const r=i.getAttribute("isDefault")==="true";return t.isDefault=r,t}function Prt(i,e){return at({},Crt,i,e)}function Frt(i,e){return at({},krt,i,e)}function Nrt(i,e){const t=i.getAttribute("format"),r=i.getAttribute("template"),n=i.getAttribute("resourceType"),s={};return t&&(s.format=t),r&&(s.template=r),n&&(s.resourceType=n),s}function wEe(i,e){const t=at([],xEe,i,e);if(t.length==2)return Lo(t)}function $rt(i,e){const t=i.getAttribute("crs"),r=at([],xEe,i,e);if(r.length==2)return{extent:Lo(r),crs:t}}function Brt(i,e){const t={};return t.format=i.getAttribute("format"),t.href=Iv(i),t}function bL(i,e){const t=mt(i).split(/\s+/);if(!t||t.length!=2)return;const r=+t[0],n=+t[1];if(!(isNaN(r)||isNaN(n)))return[r,n]}function jrt(i,e){return at({},Mrt,i,e)}function zrt(i,e){return at([],Trt,i,e)}function Urt(i,e){return at({},Art,i,e)}const OO=xrt,Grt=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:bKe,GML:qKe,GPX:MJe,GeoJSON:Lv,IGC:NJe,IIIFInfo:qJe,KML:iEe,MVT:SO,OWS:nEe,Polyline:Utt,TopoJSON:oEe,WFS:git,WKB:xit,WKT:Oit,WMSCapabilities:mrt,WMSGetFeatureInfo:brt,WMTSCapabilities:OO},Symbol.toStringTag,{value:"Module"})),mi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},p2=[mi.FILL],Rf=[mi.STROKE],wm=[mi.BEGIN_PATH],Ype=[mi.CLOSE_PATH];class EEe{drawCustom(e,t,r,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Aw extends EEe{constructor(e,t,r,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)n[0]=e[a],n[1]=e[a+1],Al(r,n)&&(s[o++]=n[0],s[o++]=n[1]);return o}appendFlatLineCoordinates(e,t,r,n,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(t+=n);let c=e[t],h=e[t+1];const d=this.tmpCoordinate_;let p=!0,m,g,v;for(m=t+n;m<r;m+=n)d[0]=e[m],d[1]=e[m+1],v=ZM(u,d),v!==g?(p&&(a[l++]=c,a[l++]=h,p=!1),a[l++]=d[0],a[l++]=d[1]):v===uo.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],p=!1):p=!0,c=d[0],h=d[1],g=v;return(s&&p||m===t+n)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,t,r,n,s){for(let o=0,a=r.length;o<a;++o){const l=r[o],u=this.appendFlatLineCoordinates(e,t,l,n,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,n,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,c,h,d,p;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const m=e.getEndss();p=0;for(let g=0,v=m.length;g<v;++g){const b=[];p=this.drawCustomCoordinates_(u,p,m[g],a,b),d.push(b)}this.instructions.push([mi.CUSTOM,l,d,e,r,iL,s]),this.hitDetectionInstructions.push([mi.CUSTOM,l,d,e,n||r,iL,s]);break;case"Polygon":case"MultiLineString":h=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),a,h),this.instructions.push([mi.CUSTOM,l,h,e,r,dx,s]),this.hitDetectionInstructions.push([mi.CUSTOM,l,h,e,n||r,dx,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([mi.CUSTOM,l,c,e,r,Yh,s]),this.hitDetectionInstructions.push([mi.CUSTOM,l,c,e,n||r,Yh,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([mi.CUSTOM,l,c,e,r,Yh,s]),this.hitDetectionInstructions.push([mi.CUSTOM,l,c,e,n||r,Yh,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([mi.CUSTOM,l,c,e,r,void 0,s]),this.hitDetectionInstructions.push([mi.CUSTOM,l,c,e,n||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[mi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[mi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let n,s,o=-1;for(t=0;t<r;++t)n=e[t],s=n[0],s==mi.END_GEOMETRY?o=t:s==mi.BEGIN_GEOMETRY&&(n[2]=t,qWe(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const r=this.state;if(e){const n=e.getColor();r.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,r.fillStyle=Lc(n||Xa)}else r.fillStyle=void 0;if(t){const n=t.getColor();r.strokeStyle=Lc(n||mx);const s=t.getLineCap();r.lineCap=s!==void 0?s:Hy;const o=t.getLineDash();r.lineDash=o?o.slice():td;const a=t.getLineDashOffset();r.lineDashOffset=a||id;const l=t.getLineJoin();r.lineJoin=l!==void 0?l:Vy;const u=t.getWidth();r.lineWidth=u!==void 0?u:yx;const c=t.getMiterLimit();r.miterLimit=c!==void 0?c:px,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const t=e.fillStyle,r=[mi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[mi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,n=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=n||s!=e.currentLineDash&&!th(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=n,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[mi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=wxe(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;il(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class qrt extends Aw{constructor(e,t,r,n){super(e,t,r,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Al(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const n=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(n,s);this.instructions.push([mi.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([mi.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const n=e.getFlatCoordinates(),s=[];for(let l=0,u=n.length;l<u;l+=e.getStride())(!this.maxExtent||Al(this.maxExtent,n.slice(l,l+2)))&&s.push(n[l],n[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([mi.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([mi.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),n=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Hrt=qrt;class Vrt extends Aw{constructor(e,t,r,n){super(e,t,r,n)}drawFlatCoordinates_(e,t,r,n){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,r,n,!1,!1),a=[mi.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,t,r){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([mi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,td,id],wm);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Rf),this.endGeometry(t)}drawMultiLineString(e,t,r){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([mi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,td,id],wm);const a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinates_(l,c,a[h],u);this.hitDetectionInstructions.push(Rf),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Rf),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Rf),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(wm)}}const Wrt=Vrt;class Yrt extends Aw{constructor(e,t,r,n){super(e,t,r,n)}drawFlatCoordinatess_(e,t,r,n){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=r.length;this.instructions.push(wm),this.hitDetectionInstructions.push(wm);for(let u=0;u<l;++u){const c=r[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,c,n,!0,!a),p=[mi.MOVE_TO_LINE_TO,h,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(Ype),this.hitDetectionInstructions.push(Ype)),t=c}return o&&(this.instructions.push(p2),this.hitDetectionInstructions.push(p2)),a&&(this.instructions.push(Rf),this.hitDetectionInstructions.push(Rf)),t}drawCircle(e,t,r){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([mi.SET_FILL_STYLE,Xa]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([mi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,td,id]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[mi.CIRCLE,u];this.instructions.push(wm,c),this.hitDetectionInstructions.push(wm,c),n.fillStyle!==void 0&&(this.instructions.push(p2),this.hitDetectionInstructions.push(p2)),n.strokeStyle!==void 0&&(this.instructions.push(Rf),this.hitDetectionInstructions.push(Rf)),this.endGeometry(t)}drawPolygon(e,t,r){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([mi.SET_FILL_STYLE,Xa]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([mi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,td,id]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([mi.SET_FILL_STYLE,Xa]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([mi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,td,id]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,a[h],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,n=t.length;r<n;++r)t[r]=fm(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const Xpe=Yrt;function Xrt(i,e,t,r,n){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+n<r;){const[u,c]=l.slice(-2),h=e[o+n],d=e[o+n+1],p=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(a+=p,a>=i){const m=(i-a+p)/p,g=El(u,h,m),v=El(c,d,m);l.push(g,v),s.push(l),l=[g,v],a==i&&(o+=n),a=0}else if(a<i)l.push(e[o+n],e[o+n+1]),o+=n;else{const m=p-a,g=El(u,h,m/p),v=El(c,d,m/p);l.push(g,v),s.push(l),l=[g,v],a=0,o+=n}}return a>0&&s.push(l),s}function Zrt(i,e,t,r,n){let s=t,o=t,a=0,l=0,u=t,c,h,d,p,m,g,v,b,_,E;for(h=t;h<r;h+=n){const C=e[h],T=e[h+1];m!==void 0&&(_=C-m,E=T-g,p=Math.sqrt(_*_+E*E),v!==void 0&&(l+=d,c=Math.acos((v*_+b*E)/(d*p)),c>i&&(l>a&&(a=l,s=u,o=h),l=0,u=h-n)),d=p,v=_,b=E),m=C,g=T}return l+=p,l>a?[u,h]:[s,o]}const DC={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Krt extends Aw{constructor(e,t,r,n){super(e,t,r,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Xa]={fillStyle:Xa},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const n=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!n&&!s)return;const a=this.coordinates;let l=a.length;const u=e.getType();let c=null,h=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Cn(this.maxExtent,e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),u=="LineString")d=[c.length];else if(u=="MultiLineString")d=e.getEnds();else if(u=="Polygon")d=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const v=e.getEndss();d=[];for(let b=0,_=v.length;b<_;++b)d.push(v[b][0])}this.beginGeometry(e,t,r);const p=o.repeat,m=p?void 0:o.textAlign;let g=0;for(let v=0,b=d.length;v<b;++v){let _;p?_=Xrt(p*this.resolution,c,g,d[v],h):_=[c.slice(g,d[v])];for(let E=0,C=_.length;E<C;++E){const T=_[E];let D=0,M=T.length;if(m==null){const I=Zrt(o.maxAngle,T,0,T.length,2);D=I[0],M=I[1]}for(let I=D;I<M;I+=h)a.push(T[I],T[I+1]);const A=a.length;g=d[v],this.drawChars_(l,A),l=A}}this.endGeometry(t)}else{let d=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),o.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const _=e.getFlatInteriorPoints();c=[];for(let E=0,C=_.length;E<C;E+=3)o.overflow||d.push(_[E+2]/this.resolution),c.push(_[E],_[E+1]);if(c.length===0)return;h=2;break}const p=this.appendFlatPointCoordinates(c,h);if(p===l)return;if(d&&(p-l)/2!==c.length/h){let _=l/2;d=d.filter((E,C)=>{const T=a[(_+C)*2]===c[C*h]&&a[(_+C)*2+1]===c[C*h+1];return T||--_,T})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,r);let m=o.padding;if(m!=_m&&(o.scale[0]<0||o.scale[1]<0)){let _=o.padding[0],E=o.padding[1],C=o.padding[2],T=o.padding[3];o.scale[0]<0&&(E=-E,T=-T),o.scale[1]<0&&(_=-_,C=-C),m=[_,E,C,T]}const g=this.pixelRatio;this.instructions.push([mi.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,m==_m?_m:m.map(function(_){return _*g}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const v=1/g,b=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Xa,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([mi.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterMode_,this.declutterImageWithText_,m,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Xa:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),o.backgroundFill&&(this.state.fillStyle=b,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||gx,justify:t.justify,textBaseline:t.textBaseline||pC,scale:t.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=DC[n.textBaseline],c=this.textOffsetY_*l,h=this.text_,d=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([mi.DRAW_CHARS,e,t,u,n.overflow,a,n.maxAngle,l,c,s,d*l,h,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([mi.DRAW_CHARS,e,t,u,n.overflow,a&&Xa,n.maxAngle,l,c,s,d*l,h,o,1/l,this.declutterMode_])}setTextStyle(e,t){let r,n,s;if(!e)this.text_="";else{const o=e.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Lc(o.getColor()||Xa)):(n=null,this.textFillState_=n);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=a.getLineDash(),g=a.getLineDashOffset(),v=a.getWidth(),b=a.getMiterLimit();s.lineCap=a.getLineCap()||Hy,s.lineDash=m?m.slice():td,s.lineDashOffset=g===void 0?id:g,s.lineJoin=a.getLineJoin()||Vy,s.lineWidth=v===void 0?yx:v,s.miterLimit=b===void 0?px:b,s.strokeStyle=Lc(a.getColor()||mx)}r=this.textState_;const l=e.getFont()||iwe;CXe(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||pC,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||_m,r.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),p=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=p===void 0?0:p,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Nt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+Nt(n.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Jrt={Circle:Xpe,Default:Aw,Image:Hrt,LineString:Wrt,Polygon:Xpe,Text:Krt};class SEe{constructor(e,t,r,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const n in r){const s=r[n].finish();e[t][n]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let n=this.buildersByZIndex_[r];n===void 0&&(n={},this.buildersByZIndex_[r]=n);let s=n[t];if(s===void 0){const o=Jrt[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=s}return s}}class CEe extends pw{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return ai()}getData(e){return null}prepareFrame(e){return ai()}renderFrame(e,t){return ai()}loadedTileCallback(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}createLoadedTileFinder(e,t,r){return(n,s)=>{const o=this.loadedTileCallback.bind(this,r,n);return e.forEachLoadedTile(t,n,s,o)}}forEachFeatureAtCoordinate(e,t,r,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===$t.LOADED||t.getState()===$t.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=$t.LOADED&&t!=$t.ERROR&&e.addEventListener(Bt.CHANGE,this.boundHandleImageChange_),t==$t.IDLE&&(e.load(),t=e.getState()),t==$t.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class PO{constructor(){We(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(hC(),{get:(e,t)=>{if(typeof hC()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,n=t.length;r<n;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const o=t[++r];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Zpe=[];let k0=null;function Qrt(){k0=kn(1,1,void 0,{willReadFrequently:!0})}class FO extends CEe{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ss(),this.pixelTransform=ss(),this.inversePixelTransform=ss(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,r){k0||Qrt(),k0.clearRect(0,0,1,1);let n;try{k0.drawImage(e,t,r,1,1,0,0,1,1),n=k0.getImageData(0,0,1,1).data}catch{return k0=null,null}return n}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const n=this.getLayer().getClassName();let s,o;if(e&&e.className===n&&(!r||e&&e.style.backgroundColor&&th(Ku(e.style.backgroundColor),Ku(r)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=n;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=kn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const n=ec(r),s=Tv(r),o=Cv(r),a=Wm(r);Zn(t.coordinateToPixelTransform,n),Zn(t.coordinateToPixelTransform,s),Zn(t.coordinateToPixelTransform,o),Zn(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Zn(l,n),Zn(l,s),Zn(l,o),Zn(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const r=e.extent,n=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(wi(r)/n*o),l=Math.round(Sn(r)/n*o);Pl(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),$I(this.inversePixelTransform,this.pixelTransform);const u=DYe(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=a||c.height!=l?(c.width=a,c.height=l):this.context.clearRect(0,0,a,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,t,r){const n=this.getLayer();if(n.hasListener(e)){const s=new L_(e,this.inversePixelTransform,r,t);n.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ws.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ws.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new PO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ws.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ws.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,n,s,o,a){const l=s/2,u=o/2,c=n/t,h=-c,d=-e[0]+a,p=-e[1];return Pl(this.tempTransform,l,u,c,h,-r,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function ent(i,e,t,r,n,s,o,a,l,u,c,h){let d=i[e],p=i[e+1],m=0,g=0,v=0,b=0;function _(){m=d,g=p,e+=r,d=i[e],p=i[e+1],b+=v,v=Math.sqrt((d-m)*(d-m)+(p-g)*(p-g))}do _();while(e<t-r&&b+v<s);let E=v===0?0:(s-b)/v;const C=El(m,d,E),T=El(g,p,E),D=e-r,M=b,A=s+a*l(u,n,c);for(;e<t-r&&b+v<A;)_();E=v===0?0:(A-b)/v;const I=El(m,d,E),P=El(g,p,E);let U;if(h){const H=[C,T,I,P];BI(H,0,4,2,h,H,H),U=H[0]>H[2]}else U=C>I;const K=Math.PI,L=[],F=D+r===e;e=D,v=0,b=M,d=i[e],p=i[e+1];let $;if(F){_(),$=Math.atan2(p-g,d-m),U&&($+=$>0?-K:K);const H=(I+C)/2,V=(P+T)/2;return L[0]=[H,V,(A-s)/2,$,n],L}n=n.replace(/\n/g," ");for(let H=0,V=n.length;H<V;){_();let J=Math.atan2(p-g,d-m);if(U&&(J+=J>0?-K:K),$!==void 0){let ne=J-$;if(ne+=ne>K?-2*K:ne<-K?2*K:0,Math.abs(ne)>o)return null}$=J;const ee=H;let ie=0;for(;H<V;++H){const ne=U?V-H-1:H,ve=a*l(u,n[ne],c);if(e+r<t&&b+v<s+ie+ve/2)break;ie+=ve}if(H===ee)continue;const de=U?n.substring(V-ee,V-H):n.substring(ee,H);E=v===0?0:(s+ie/2-b)/v;const te=El(m,d,E),z=El(g,p,E);L.push([te,z,ie/2,J,de]),s+=ie}return L}const h0=ha(),of=[],Mh=[],Lh=[],af=[];function Kpe(i){return i[3].declutterBox}const Jpe=new RegExp("[-----]");function vD(i,e){return e==="start"?e=Jpe.test(i)?"right":"left":e==="end"&&(e=Jpe.test(i)?"left":"right"),DC[e]}function tnt(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class int{constructor(e,t,r,n,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=ss(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new PO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,n){const s=e+t+r+n;if(this.labels_[s])return this.labels_[s];const o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Array.isArray(e),d=l.justify?DC[l.justify]:vD(Array.isArray(e)?e[0]:e,l.textAlign||gx),p=n&&o.lineWidth?o.lineWidth:0,m=h?e:e.split(`
`).reduce(tnt,[]),{width:g,height:v,widths:b,heights:_,lineWidths:E}=AXe(l,m),C=g+p,T=[],D=(C+2)*c[0],M=(v+p)*c[1],A={width:D<0?Math.floor(D):Math.ceil(D),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:T};(c[0]!=1||c[1]!=1)&&T.push("scale",c),n&&(T.push("strokeStyle",o.strokeStyle),T.push("lineWidth",p),T.push("lineCap",o.lineCap),T.push("lineJoin",o.lineJoin),T.push("miterLimit",o.miterLimit),T.push("setLineDash",[o.lineDash]),T.push("lineDashOffset",o.lineDashOffset)),r&&T.push("fillStyle",a.fillStyle),T.push("textBaseline","middle"),T.push("textAlign","center");const I=.5-d;let P=d*C+I*p;const U=[],K=[];let L=0,F=0,$=0,H=0,V;for(let J=0,ee=m.length;J<ee;J+=2){const ie=m[J];if(ie===`
`){F+=L,L=0,P=d*C+I*p,++H;continue}const de=m[J+1]||l.font;de!==V&&(n&&U.push("font",de),r&&K.push("font",de),V=de),L=Math.max(L,_[$]);const te=[ie,P+I*b[$]+d*(b[$]-E[H]),.5*(p+L)+F];P+=b[$],n&&U.push("strokeText",te),r&&K.push("fillText",te),++$}return Array.prototype.push.apply(T,U),Array.prototype.push.apply(T,K),this.labels_[s]=A,A}replayTextBackground_(e,t,r,n,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,n,s,o,a,l,u,c,h,d,p,m,g,v){a*=d[0],l*=d[1];let b=r-a,_=n-l;const E=s+u>e?e-u:s,C=o+c>t?t-c:o,T=m[3]+E*d[0]+m[1],D=m[0]+C*d[1]+m[2],M=b-m[3],A=_-m[0];(g||h!==0)&&(of[0]=M,af[0]=M,of[1]=A,Mh[1]=A,Mh[0]=M+T,Lh[0]=Mh[0],Lh[1]=A+D,af[1]=Lh[1]);let I;return h!==0?(I=Pl(ss(),r,n,1,1,h,-r,-n),Zn(I,of),Zn(I,Mh),Zn(I,Lh),Zn(I,af),cu(Math.min(of[0],Mh[0],Lh[0],af[0]),Math.min(of[1],Mh[1],Lh[1],af[1]),Math.max(of[0],Mh[0],Lh[0],af[0]),Math.max(of[1],Mh[1],Lh[1],af[1]),h0)):cu(Math.min(M,M+T),Math.min(A,A+D),Math.max(M,M+T),Math.max(A,A+D),h0),p&&(b=Math.round(b),_=Math.round(_)),{drawImageX:b,drawImageY:_,drawImageW:E,drawImageH:C,originX:u,originY:c,declutterBox:{minX:h0[0],minY:h0[1],maxX:h0[2],maxY:h0[3],value:v},canvasTransform:I,scale:d}}replayImageOrLabel_(e,t,r,n,s,o,a){const l=!!(o||a),u=n.declutterBox,c=a?a[2]*n.scale[0]/2:0;return u.minX-c<=t[0]&&u.maxX+c>=0&&u.minY-c<=t[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,of,Mh,Lh,af,o,a),kXe(e,n.canvasTransform,s,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Zn(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(r[0]%n,r[1]%n),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,n){const s=this.textStates[t],o=this.createLabel(e,t,n,r),a=this.strokeStates[r],l=this.pixelRatio,u=vD(Array.isArray(e)?e[0]:e,s.textAlign||gx),c=DC[s.textBaseline||pC],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],p=u*d+2*(.5-u)*h,m=c*o.height/l+2*(.5-c)*h;return{label:o,anchorX:p,anchorY:m}}execute_(e,t,r,n,s,o,a,l){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&th(r,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=$f(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),TYe(this.renderedTransform_,r));let h=0;const d=n.length;let p=0,m,g,v,b,_,E,C,T,D,M,A,I,P,U=0,K=0,L=null,F=null;const $=this.coordinateCache_,H=this.viewRotation_,V=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,J={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:H},ee=this.instructions!=n||this.overlaps?0:200;let ie,de,te,z;for(;h<d;){const ne=n[h];switch(ne[0]){case mi.BEGIN_GEOMETRY:ie=ne[1],z=ne[3],ie.getGeometry()?a!==void 0&&!Cn(a,z.getExtent())?h=ne[2]+1:++h:h=ne[2],u&&(u.zIndex=ne[4]);break;case mi.BEGIN_PATH:U>ee&&(this.fill_(e),U=0),K>ee&&(e.stroke(),K=0),!U&&!K&&(e.beginPath(),_=NaN,E=NaN),++h;break;case mi.CIRCLE:p=ne[1];const $e=c[p],Xe=c[p+1],ot=c[p+2],Be=c[p+3],He=ot-$e,st=Be-Xe,xt=Math.sqrt(He*He+st*st);e.moveTo($e+xt,Xe),e.arc($e,Xe,xt,0,2*Math.PI,!0),++h;break;case mi.CLOSE_PATH:e.closePath(),++h;break;case mi.CUSTOM:p=ne[1],m=ne[2];const kt=ne[3],Tt=ne[4],Ei=ne[5];J.geometry=kt,J.feature=ie,h in $||($[h]=[]);const si=$[h];Ei?Ei(c,p,m,2,si):(si[0]=c[p],si[1]=c[p+1],si.length=2),u&&(u.zIndex=ne[6]),Tt(si,J),++h;break;case mi.DRAW_IMAGE:p=ne[1],m=ne[2],D=ne[3],g=ne[4],v=ne[5];let ur=ne[6];const Ve=ne[7],fe=ne[8],oe=ne[9],se=ne[10];let pe=ne[11];const R=ne[12];let j=ne[13];b=ne[14]||"declutter";const Z=ne[15];if(!D&&ne.length>=20){M=ne[19],A=ne[20],I=ne[21],P=ne[22];const It=this.drawLabelWithPointPlacement_(M,A,I,P);D=It.label,ne[3]=D;const Vt=ne[23];g=(It.anchorX-Vt)*this.pixelRatio,ne[4]=g;const Yt=ne[24];v=(It.anchorY-Yt)*this.pixelRatio,ne[5]=v,ur=D.height,ne[6]=ur,j=D.width,ne[13]=j}let Q;ne.length>25&&(Q=ne[25]);let ge,be,Ce;ne.length>17?(ge=ne[16],be=ne[17],Ce=ne[18]):(ge=_m,be=!1,Ce=!1),se&&V?pe+=H:!se&&!V&&(pe-=H);let G=0;for(;p<m;p+=2){if(Q&&Q[G++]<j/this.pixelRatio)continue;const It=this.calculateImageOrLabelDimensions_(D.width,D.height,c[p],c[p+1],j,ur,g,v,fe,oe,pe,R,s,ge,be||Ce,ie),Vt=[e,t,D,It,Ve,be?L:null,Ce?F:null];if(l){let Yt,Yi,vr;if(Z){const cr=m-p;if(!Z[cr]){Z[cr]={args:Vt,declutterMode:b};continue}const Jt=Z[cr];Yt=Jt.args,Yi=Jt.declutterMode,delete Z[cr],vr=Kpe(Yt)}let Jr,Rr;if(Yt&&(Yi!=="declutter"||!l.collides(vr))&&(Jr=!0),(b!=="declutter"||!l.collides(It.declutterBox))&&(Rr=!0),Yi==="declutter"&&b==="declutter"){const cr=Jr&&Rr;Jr=cr,Rr=cr}Jr&&(Yi!=="none"&&l.insert(vr),this.replayImageOrLabel_.apply(this,Yt)),Rr&&(b!=="none"&&l.insert(It.declutterBox),this.replayImageOrLabel_.apply(this,Vt))}else this.replayImageOrLabel_.apply(this,Vt)}++h;break;case mi.DRAW_CHARS:const re=ne[1],he=ne[2],ce=ne[3],Te=ne[4];P=ne[5];const Ae=ne[6],Se=ne[7],De=ne[8];I=ne[9];const Oe=ne[10];M=ne[11],A=ne[12];const Ge=[ne[13],ne[13]];b=ne[14]||"declutter";const et=this.textStates[A],ht=et.font,Ut=[et.scale[0]*Se,et.scale[1]*Se];let gt;ht in this.widths_?gt=this.widths_[ht]:(gt={},this.widths_[ht]=gt);const qt=Twe(c,re,he,2),Kt=Math.abs(Ut[0])*ipe(ht,M,gt);if(Te||Kt<=qt){const It=this.textStates[A].textAlign,Vt=(qt-Kt)*vD(M,It),Yt=ent(c,re,he,2,M,Vt,Ae,Math.abs(Ut[0]),ipe,ht,gt,V?0:this.viewRotation_);e:if(Yt){const Yi=[];let vr,Jr,Rr,cr,Jt;if(I)for(vr=0,Jr=Yt.length;vr<Jr;++vr){Jt=Yt[vr],Rr=Jt[4],cr=this.createLabel(Rr,A,"",I),g=Jt[2]+(Ut[0]<0?-Oe:Oe),v=ce*cr.height+(.5-ce)*2*Oe*Ut[1]/Ut[0]-De;const ir=this.calculateImageOrLabelDimensions_(cr.width,cr.height,Jt[0],Jt[1],cr.width,cr.height,g,v,0,0,Jt[3],Ge,!1,_m,!1,ie);if(l&&b==="declutter"&&l.collides(ir.declutterBox))break e;Yi.push([e,t,cr,ir,1,null,null])}if(P)for(vr=0,Jr=Yt.length;vr<Jr;++vr){Jt=Yt[vr],Rr=Jt[4],cr=this.createLabel(Rr,A,P,""),g=Jt[2],v=ce*cr.height-De;const ir=this.calculateImageOrLabelDimensions_(cr.width,cr.height,Jt[0],Jt[1],cr.width,cr.height,g,v,0,0,Jt[3],Ge,!1,_m,!1,ie);if(l&&b==="declutter"&&l.collides(ir.declutterBox))break e;Yi.push([e,t,cr,ir,1,null,null])}l&&b!=="none"&&l.load(Yi.map(Kpe));for(let ir=0,Ir=Yi.length;ir<Ir;++ir)this.replayImageOrLabel_.apply(this,Yi[ir])}}++h;break;case mi.END_GEOMETRY:if(o!==void 0){ie=ne[1];const It=o(ie,z,b);if(It)return It}++h;break;case mi.FILL:ee?U++:this.fill_(e),++h;break;case mi.MOVE_TO_LINE_TO:for(p=ne[1],m=ne[2],de=c[p],te=c[p+1],e.moveTo(de,te),_=de+.5|0,E=te+.5|0,p+=2;p<m;p+=2)de=c[p],te=c[p+1],C=de+.5|0,T=te+.5|0,(p==m-2||C!==_||T!==E)&&(e.lineTo(de,te),_=C,E=T);++h;break;case mi.SET_FILL_STYLE:L=ne,this.alignAndScaleFill_=ne[2],U&&(this.fill_(e),U=0,K&&(e.stroke(),K=0)),e.fillStyle=ne[1],++h;break;case mi.SET_STROKE_STYLE:F=ne,K&&(e.stroke(),K=0),this.setStrokeStyle_(e,ne),++h;break;case mi.STROKE:ee?K++:e.stroke(),++h;break;default:++h;break}}U&&this.fill_(e),K&&e.stroke()}execute(e,t,r,n,s,o){this.viewRotation_=n,this.execute_(e,t,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,r,n,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,s)}}const V0=["Polygon","Circle","LineString","Image","Text","Default"],MC=["Image","Text"],rnt=V0.filter(i=>!MC.includes(i));class TEe{constructor(e,t,r,n,s,o,a){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ss(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let n=this.executorsByZIndex_[r];n===void 0&&(n={},this.executorsByZIndex_[r]=n);const s=e[r];for(const o in s){const a=s[o];n[o]=new int(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let n=0,s=e.length;n<s;++n)if(e[n]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,n,s,o){n=Math.round(n);const a=n*2+1,l=Pl(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=kn(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=ha(),D_(h,e),il(h,t*(this.renderBuffer_+n),h));const d=nnt(n);let p;function m(T,D,M){const A=c.getImageData(0,0,a,a).data;for(let I=0,P=d.length;I<P;I++)if(A[d[I]]>0){if(!o||M==="none"||p!=="Image"&&p!=="Text"||o.includes(T)){const U=(d[I]-3)/4,K=n-U%a,L=n-(U/a|0),F=s(T,D,K*K+L*L);if(F)return F}c.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(Bc);let v,b,_,E,C;for(v=g.length-1;v>=0;--v){const T=g[v].toString();for(_=this.executorsByZIndex_[T],b=V0.length-1;b>=0;--b)if(p=V0[b],E=_[p],E!==void 0&&(C=E.executeHitDetection(c,l,r,m,h),C))return C}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],n=t[1],s=t[2],o=t[3],a=[r,n,r,o,s,o,s,n];return $f(a,0,8,2,e,a),a}isEmpty(){return ud(this.executorsByZIndex_)}execute(e,t,r,n,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Bc),o=o||V0;const u=V0.length;let c,h,d,p,m;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const g=l[c].toString();for(m=this.executorsByZIndex_[g],d=0,p=o.length;d<p;++d){const v=o[d],b=m[v];if(b!==void 0){const _=a===null?void 0:b.getZIndexContext(),E=_?_.getContext():e,C=this.maxExtent_&&v!=="Image"&&v!=="Text";if(C&&(E.save(),this.clip(E,r)),!_||v==="Text"||v==="Image"?b.execute(E,t,r,n,s,a):_.pushFunction(T=>b.execute(T,t,r,n,s,a)),C&&E.restore(),_){_.offset();const T=l[c]*u+d;this.deferredZIndexContexts_[T]||(this.deferredZIndexContexts_[T]=[]),this.deferredZIndexContexts_[T].push(_)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Bc);for(let r=0,n=t.length;r<n;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const bD={};function nnt(i){if(bD[i]!==void 0)return bD[i];const e=i*2+1,t=i*i,r=new Array(t+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>t)break;let l=r[a];l||(l=[],r[a]=l),l.push(((i+s)*e+(i+o))*4+3),s>0&&l.push(((i-s)*e+(i+o))*4+3),o>0&&(l.push(((i+s)*e+(i-o))*4+3),s>0&&l.push(((i-s)*e+(i-o))*4+3))}const n=[];for(let s=0,o=r.length;s<o;++s)r[s]&&n.push(...r[s]);return bD[i]=n,n}class snt extends EEe{constructor(e,t,r,n,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=n,this.transformRotation_=n?Ev(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ss()}drawImages_(e,t,r,n){if(!this.image_)return;const s=$f(e,t,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=s.length;c<h;c+=2){const d=s[c]-this.imageAnchorX_,p=s[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const m=d+this.imageAnchorX_,g=p+this.imageAnchorY_;Pl(a,m,g,1,1,u,-m,-g),o.save(),o.transform.apply(o,a),o.translate(m,g),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,r,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=$f(e,t,r,n,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=n){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,n,s){const o=this.context_,a=$f(e,t,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),r}drawRings_(e,t,r,n){for(let s=0,o=r.length;s<o;++s)t=this.moveToLineTo_(e,t,r[s],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cn(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=IYe(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],n=t[3]-t[1],s=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,n=t.length;r<n;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cn(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Cn(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(n,s,o[l],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let n=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];n=this.drawRings_(r,n,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),th(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,n=e.textAlign?e.textAlign:gx;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=n&&(r.textAlign=n,t.textAlign=n),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Lc(r||Xa)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),n=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),c=s||td;this.strokeState_={lineCap:n!==void 0?n:Hy,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||id)*this.pixelRatio_,lineJoin:a!==void 0?a:Vy,lineWidth:(l!==void 0?l:yx)*this.pixelRatio_,miterLimit:u!==void 0?u:px,strokeStyle:Lc(r||mx)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:Lc(p||Xa)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),m=r.getLineCap(),g=r.getLineDash(),v=r.getLineDashOffset(),b=r.getLineJoin(),_=r.getWidth(),E=r.getMiterLimit();this.textStrokeState_={lineCap:m!==void 0?m:Hy,lineDash:g||td,lineDashOffset:v||id,lineJoin:b!==void 0?b:Vy,lineWidth:_!==void 0?_:yx,miterLimit:E!==void 0?E:px,strokeStyle:Lc(p||mx)}}const n=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:n!==void 0?n:iwe,textAlign:h!==void 0?h:gx,textBaseline:d!==void 0?d:pC},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,m,g)=>p+=g%2?" ":m,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const AEe=snt,Cl=.5;function kEe(i,e,t,r,n,s,o,a,l){const u=l?gw(n):n,c=i[0]*Cl,h=i[1]*Cl,d=kn(c,h);d.imageSmoothingEnabled=!1;const p=d.canvas,m=new AEe(d,Cl,n,null,o,a,l?_d(yYe(),l):null),g=t.length,v=Math.floor((256*256*256-1)/g),b={};for(let E=1;E<=g;++E){const C=t[E-1],T=C.getStyleFunction()||r;if(!T)continue;let D=T(C,s);if(!D)continue;Array.isArray(D)||(D=[D]);const A=(E*v).toString(16).padStart(7,"#00000");for(let I=0,P=D.length;I<P;++I){const U=D[I],K=U.getGeometryFunction()(C);if(!K||!Cn(u,K.getExtent()))continue;const L=U.clone(),F=L.getFill();F&&F.setColor(A);const $=L.getStroke();$&&($.setColor(A),$.setLineDash(null)),L.setText(void 0);const H=U.getImage();if(H){const ie=H.getImageSize();if(!ie)continue;const de=kn(ie[0],ie[1],void 0,{alpha:!1}),te=de.canvas;de.fillStyle=A,de.fillRect(0,0,te.width,te.height),L.setImage(new lA({img:te,anchor:H.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:H.getOrigin(),opacity:1,size:H.getSize(),scale:H.getScale(),rotation:H.getRotation(),rotateWithView:H.getRotateWithView()}))}const V=L.getZIndex()||0;let J=b[V];J||(J={},b[V]=J,J.Polygon=[],J.Circle=[],J.LineString=[],J.Point=[]);const ee=K.getType();if(ee==="GeometryCollection"){const ie=K.getGeometriesArrayRecursive();for(let de=0,te=ie.length;de<te;++de){const z=ie[de];J[z.getType().replace("Multi","")].push(z,L)}}else J[ee.replace("Multi","")].push(K,L)}}const _=Object.keys(b).map(Number).sort(Bc);for(let E=0,C=_.length;E<C;++E){const T=b[_[E]];for(const D in T){const M=T[D];for(let A=0,I=M.length;A<I;A+=2){m.setStyle(M[A+1]);for(let P=0,U=e.length;P<U;++P)m.setTransform(e[P]),m.drawGeometry(M[A])}}}return d.getImageData(0,0,p.width,p.height)}function DEe(i,e,t){const r=[];if(t){const n=Math.floor(Math.round(i[0])*Cl),s=Math.floor(Math.round(i[1])*Cl),o=(Ti(n,0,t.width-1)+Ti(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],c=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&r.push(e[c/h-1])}return r}const ont=.5,MEe={Point:pnt,LineString:hnt,Polygon:gnt,MultiPoint:mnt,MultiLineString:dnt,MultiPolygon:fnt,GeometryCollection:cnt,Circle:lnt};function ant(i,e){return parseInt(Nt(i),10)-parseInt(Nt(e),10)}function LC(i,e){const t=LEe(i,e);return t*t}function LEe(i,e){return ont*i/e}function lnt(i,e,t,r,n){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,r,n)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function RC(i,e,t,r,n,s,o,a){const l=[],u=t.getImage();if(u){let d=!0;const p=u.getImageState();p==$t.LOADED||p==$t.ERROR?d=!1:p==$t.IDLE&&u.load(),d&&l.push(u.ready())}const c=t.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>n(null)),unt(i,e,t,r,s,o,a),h}function unt(i,e,t,r,n,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(r,n);if(t.getRenderer())REe(i,l,t,e,o);else{const c=MEe[l.getType()];c(i,l,t,e,o,s)}}function REe(i,e,t,r,n){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)REe(i,o[a],t,r,n);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),n)}function cnt(i,e,t,r,n,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const u=MEe[o[a].getType()];u(i,o[a],t,r,n,s)}}function hnt(i,e,t,r,n){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,n)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,n)}}function dnt(i,e,t,r,n){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,n)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,n)}}function fnt(i,e,t,r,n){const s=t.getFill(),o=t.getStroke();if(o||s){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,r,n)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,n)}}function pnt(i,e,t,r,n,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),u=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=$t.LOADED)return;const c=i.getBuilder(t.getZIndex(),"Image");c.setImageStyle(o,u),c.drawPoint(e,r,n)}if(l){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,r,n)}}function mnt(i,e,t,r,n,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),c=s&&a&&u?{}:void 0;if(a){if(o.getImageState()!=$t.LOADED)return;const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,c),h.drawMultiPoint(e,r,n)}if(u){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,r,n)}}function gnt(i,e,t,r,n){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,r,n)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,n)}}class IEe extends FO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ha(),this.wrappedRenderedExtent_=ha(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const n=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),p=t.pixelRatio,m=t.viewHints,g=!(m[pn.ANIMATING]||m[pn.INTERACTING]),v=this.context,b=Math.round(wi(n)/a*p),_=Math.round(Sn(n)/a*p),E=h.getWrapX()&&l.canWrapX(),C=E?wi(c):null,T=E?Math.ceil((n[2]-c[2])/C)+1:1;let D=E?Math.floor((n[0]-c[0])/C):0;do{let M=this.getRenderTransform(o,a,0,p,b,_,D*C);t.declutter&&(M=M.slice(0)),e.execute(v,[v.canvas.width,v.canvas.height],M,u,g,r===void 0?V0:r?MC:rnt,r?d&&t.declutter[d]:void 0)}while(++D<T)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=kn(this.context.canvas.width,this.context.canvas.height,Zpe))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Xm(this.context),Zpe.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const n=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(Ws.PRERENDER)||this.getLayer().hasListener(Ws.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),n.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=kl(r.extent);a=Cn(l,e.extent),this.clipped_=a&&!Io(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),n=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=r[0]*Cl,d=r[1]*Cl;c.push(this.getRenderTransform(n,s,o,Cl,h,d,0).slice());const p=u.getSource(),m=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!Io(m,l)){let g=l[0];const v=wi(m);let b=0,_;for(;g<m[0];)--b,_=v*b,c.push(this.getRenderTransform(n,s,o,Cl,h,d,_).slice()),g+=v;for(b=0,g=l[2];g>m[2];)++b,_=v*b,c.push(this.getRenderTransform(n,s,o,Cl,h,d,_).slice()),g-=v}this.hitDetectionImageData_=kEe(r,c,this.renderedFeatures_,u.getStyleFunction(),l,s,o,LC(s,this.renderedPixelRatio_),null)}t(DEe(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,n,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),u={},c=function(m,g,v){const b=Nt(m),_=u[b];if(_){if(_!==!0&&v<_.distanceSq){if(v===0)return u[b]=!0,s.splice(s.lastIndexOf(_),1),n(m,l,g);_.geometry=g,_.distanceSq=v}}else{if(v===0)return u[b]=!0,n(m,l,g);s.push(u[b]={feature:m,layer:l,geometry:g,distanceSq:v,callback:n})}};let h;const d=[this.replayGroup_],p=this.getLayer().getDeclutter();return d.some(m=>h=m.forEachFeatureAtCoordinate(e,o,a,r,c,p&&t.declutter[p]?t.declutter[p].all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const n=e.viewHints[pn.ANIMATING],s=e.viewHints[pn.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&n||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,p=t.getRevision(),m=t.getRenderBuffer();let g=t.getRenderOrder();g===void 0&&(g=ant);const v=u.center.slice(),b=il(l,m*h),_=b.slice(),E=[b.slice()],C=c.getExtent();if(r.getWrapX()&&c.canWrapX()&&!Io(C,e.extent)){const F=wi(C),$=Math.max(wi(b)/2,F);b[0]=C[0]-$,b[2]=C[2]+$,JT(v,c);const H=TI(E[0],c);H[0]<C[0]&&H[2]<C[2]?E.push([H[0]+F,H[1],H[2]+F,H[3]]):H[0]>C[0]&&H[2]>C[2]&&E.push([H[0]-F,H[1],H[2]-F,H[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!e.declutter&&Io(this.wrappedRenderedExtent_,b))return th(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const T=new SEe(LEe(h,d),b,h,d);let D;for(let F=0,$=E.length;F<$;++F)r.loadFeatures(E[F],h,c);const M=LC(h,d);let A=!0;const I=(F,$)=>{let H;const V=F.getStyleFunction()||t.getStyleFunction();if(V&&(H=V(F,h)),H){const J=this.renderFeature(F,M,H,T,D,this.getLayer().getDeclutter(),$);A=A&&!J}},P=gw(b),U=r.getFeaturesInExtent(P);g&&U.sort(g);for(let F=0,$=U.length;F<$;++F)I(U[F],F);this.renderedFeatures_=U,this.ready=A;const K=T.finish(),L=new TEe(b,h,d,r.getOverlaps(),K,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=_,this.wrappedRenderedExtent_=b,this.renderedCenter_=v,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=L,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,n,s,o,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,c=r.length;u<c;++u)l=RC(n,e,r[u],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=RC(n,e,r,t,this.boundHandleStyleImageChange_,s,o,a);return l}}class hp extends Dv{constructor(e){super(e)}createRenderer(){return new IEe(this)}}class _L{constructor(e){this.rbush_=new ZI(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Nt(t)]=r}load(e,t){const r=new Array(t.length);for(let n=0,s=t.length;n<s;n++){const o=e[n],a=t[n],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=l,this.items_[Nt(a)]=l}this.rbush_.load(r)}remove(e){const t=Nt(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Nt(t)],n=[r.minX,r.minY,r.maxX,r.maxY];hu(n,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let n=0,s=e.length;n<s;n++)if(r=t(e[n]),r)return r;return r}isEmpty(){return ud(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return cu(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class ynt extends mu{constructor(e){super(),this.projection=At(e.projection),this.attributions_=Qpe(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,n){t.viewResolver=r,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Qpe(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Qpe(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}const Fv=ynt,ao={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function vnt(i,e){return[[-1/0,-1/0,1/0,1/0]]}let bnt=!1;function OEe(i,e,t,r,n,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,r,n):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=bnt,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=a.responseText:u=="xml"?c=a.responseXML||a.responseText:u=="arraybuffer"&&(c=a.response),c?s(e.readFeatures(c,{extent:t,featureProjection:n}),e.readProjection(c)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function eme(i,e){return function(t,r,n,s,o){const a=this;OEe(i,e,t,r,n,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||Py)}}class lf extends ka{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class dp extends Fv{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Py,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Hi(this.format_,"`format` must be set when `url` is set"),this.loader_=eme(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:vnt;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new _L:null,this.loadedExtentsRtree_=new _L,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,n;Array.isArray(e.features)?n=e.features:e.features&&(r=e.features,n=r.getArray()),!t&&r===void 0&&(r=new aa(n)),n!==void 0&&this.addFeaturesInternal(n),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Nt(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new lf(ao.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof ra||(this.featureChangeKeys_[e]=[Ni(t,Bt.CHANGE,this.handleFeatureChange_,this),Ni(t,Vm.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const n=String(t.getId());if(!(n in this.idIndex_))this.idIndex_[n]=t;else if(t instanceof ra){const s=this.idIndex_[n];s instanceof ra?Array.isArray(s)?s.push(t):this.idIndex_[n]=[s,t]:r=!1}else r=!1}return r&&(Hi(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],n=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=Nt(a);this.addToIndex_(l,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],l=Nt(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();t.push(c),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(ao.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new lf(ao.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ao.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(ao.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(na.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(na.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Zr);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const r=n=>{this.removeFeatureInternal(n)};this.featuresRtree_.forEach(r);for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new lf(ao.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(n){const s=n.getGeometry();if(s instanceof ra||s.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const n=r.getGeometry();if(n instanceof ra||n.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ud(this.nullGeometryFeatures_)||Dr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=AI(e,t);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],n=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Oy,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const c=u.getGeometry(),h=a;if(a=c instanceof ra?0:c.closestPointXY(r,n,o,a),a<h){s=u;const d=Math.sqrt(a);l[0]=r-d,l[1]=n-d,l[2]=r+d,l[3]=n+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Nt(t),n=t.getGeometry();if(!n)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const o=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new lf(ao.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Nt(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ud(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const n=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let o=0,a=s.length;o<a;++o){const l=s[o];n.forEachInExtent(l,function(c){return Io(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new lf(ao.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new lf(ao.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new lf(ao.FEATURESLOADERROR))}),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let r;t.forEachInExtent(e,function(n){if(hu(n.extent,e))return r=n,!0}),r&&t.remove(r)}removeFeatures(e){const t=[];for(let r=0,n=e.length;r<n;++r){const s=e[r],o=this.removeFeatureInternal(s);o&&t.push(o)}t.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Nt(e);if(!(t in this.uidIndex_))return;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(Zr),delete this.featureChangeKeys_[t];const n=e.getId();if(n!==void 0){const s=n.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(ao.REMOVEFEATURE)&&this.dispatchEvent(new lf(ao.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const r in this.idIndex_){const n=this.idIndex_[r];if(e instanceof ra&&Array.isArray(n)&&n.includes(e))n.splice(n.indexOf(e),1);else if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){Hi(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(eme(e,this.format_))}}function _nt(i){if(!(i.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=i.inversePixelTransform[0],t=i.inversePixelTransform[1],r=Math.sqrt(e*e+t*t),n=i.frameState,s=kv(i.inversePixelTransform.slice(),n.coordinateToPixelTransform),o=LC(n.viewState.resolution,r);let a;return new AEe(i.context,r,n.extent,s,n.viewState.rotation,o,a)}function PEe(i,e,t){const r=[];let n=i(0),s=i(1),o=e(n),a=e(s);const l=[s,n],u=[a,o],c=[1,0],h={};let d=1e5,p,m,g,v,b,_;for(;--d>0&&c.length>0;)g=c.pop(),n=l.pop(),o=u.pop(),_=g.toString(),_ in h||(r.push(o[0],o[1]),h[_]=!0),v=c.pop(),s=l.pop(),a=u.pop(),b=(g+v)/2,p=i(b),m=e(p),vxe(m[0],m[1],o[0],o[1],a[0],a[1])<t?(r.push(a[0],a[1]),_=v.toString(),h[_]=!0):(c.push(v,b,b,g),u.push(a,m,m,o),l.push(s,p,p,n));return r}function xnt(i,e,t,r,n){const s=At("EPSG:4326");return PEe(function(o){return[i,e+(t-e)*o]},Wc(s,r),n)}function wnt(i,e,t,r,n){const s=At("EPSG:4326");return PEe(function(o){return[e+(t-e)*o,i]},Wc(s,r),n)}const Ent=new la({color:"rgba(0,0,0,0.2)"}),Snt=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class Cnt extends hp{constructor(e){e=e||{};const t=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);delete t.maxLines,delete t.strokeStyle,delete t.targetSize,delete t.showLabels,delete t.lonLabelFormatter,delete t.latLabelFormatter,delete t.lonLabelPosition,delete t.latLabelPosition,delete t.lonLabelStyle,delete t.latLabelStyle,delete t.intervals,super(t),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=e.targetSize!==void 0?e.targetSize:100,this.maxLines_=e.maxLines!==void 0?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=e.strokeStyle!==void 0?e.strokeStyle:Ent,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,e.showLabels&&(this.lonLabelFormatter_=e.lonLabelFormatter==null?jfe.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=e.latLabelFormatter==null?jfe.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=e.lonLabelPosition==null?0:e.lonLabelPosition,this.latLabelPosition_=e.latLabelPosition==null?1:e.latLabelPosition,this.lonLabelStyleBase_=new os({text:e.lonLabelStyle!==void 0?e.lonLabelStyle.clone():new Zm({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new nl({color:"rgba(0,0,0,1)"}),stroke:new la({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const n=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(n),this.lonLabelStyleBase_},this.latLabelStyleBase_=new os({text:e.latLabelStyle!==void 0?e.latLabelStyle.clone():new Zm({font:"12px Calibri,sans-serif",textAlign:"right",fill:new nl({color:"rgba(0,0,0,1)"}),stroke:new la({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const n=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(n),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(Ws.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=e.intervals!==void 0?e.intervals:Snt,this.setSource(new dp({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new aa,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),this.featurePool_=[],this.lineStyle_=new os({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(e,t){let r=e.slice();return this.projection_&&this.getSource().getWrapX()&&TI(r,this.projection_),this.loadedExtent_&&(sYe(this.loadedExtent_,r,t)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(e,t,r){this.loadedExtent_=e;const n=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=Bs(s,e);if(this.renderedExtent_&&hu(this.renderedExtent_,o)&&this.renderedResolution_===t||(this.renderedExtent_=o,this.renderedResolution_=t,ih(o)))return;const a=fo(o),l=t*t/4;(!this.projection_||!Ro(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,t,l);let c=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);let h;for(;c>this.featurePool_.length;)h=new Tn,this.featurePool_.push(h);const d=n.getFeaturesCollection();d.clear();let p=0,m,g;for(m=0,g=this.meridians_.length;m<g;++m)h=this.featurePool_[p++],h.setGeometry(this.meridians_[m]),h.setStyle(this.lineStyle_),d.push(h);for(m=0,g=this.parallels_.length;m<g;++m)h=this.featurePool_[p++],h.setGeometry(this.parallels_[m]),h.setStyle(this.lineStyle_),d.push(h)}addMeridian_(e,t,r,n,s,o){const a=this.getMeridian_(e,t,r,n,o);if(Cn(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(e);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new In([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(e,t,r,n,s,o){const a=this.getParallel_(e,t,r,n,o);if(Cn(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(e);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new In([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(e){const t=e.frameState.viewState.rotation,r=e.frameState.viewState.resolution,n=e.frameState.size,s=e.frameState.extent,o=fo(s);let a=s;if(t){const m=n[0]*r,g=n[1]*r;a=[o[0]-m/2,o[1]-g/2,o[0]+m/2,o[1]+g/2]}let l=0,u=0,c=this.latLabelPosition_<.5;const h=this.projection_.getExtent(),d=wi(h);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Io(h,s)){l=Math.floor((s[0]-h[0])/d),u=Math.ceil((s[2]-h[2])/d);const m=Math.abs(t)>Math.PI/2;c=c!==m}const p=_nt(e);for(let m=l;m<=u;++m){let g=this.meridians_.length+this.parallels_.length,v,b,_,E;if(this.meridiansLabels_)for(b=0,_=this.meridiansLabels_.length;b<_;++b){const C=this.meridians_[b];if(!t&&m===0)E=this.getMeridianPoint_(C,s,b);else{const T=C.clone();T.translate(m*d,0),T.rotate(-t,o),E=this.getMeridianPoint_(T,a,b),E.rotate(t,o)}v=this.featurePool_[g++],v.setGeometry(E),v.set("graticule_label",this.meridiansLabels_[b].text),p.drawFeature(v,this.lonLabelStyle_(v))}if(this.parallelsLabels_&&(m===l&&c||m===u&&!c))for(b=0,_=this.parallels_.length;b<_;++b){const C=this.parallels_[b];if(!t&&m===0)E=this.getParallelPoint_(C,s,b);else{const T=C.clone();T.translate(m*d,0),T.rotate(-t,o),E=this.getParallelPoint_(T,a,b),E.rotate(t,o)}v=this.featurePool_[g++],v.setGeometry(E),v.set("graticule_label",this.parallelsLabels_[b].text),p.drawFeature(v,this.latLabelStyle_(v))}}}createGraticule_(e,t,r,n){const s=this.getInterval_(r);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=wi(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Io(a,e)&&(wi(e)>=l?(e[0]=a[0],e[2]=a[2]):o=!0);const u=[Ti(t[0],this.minX_,this.maxX_),Ti(t[1],this.minY_,this.maxY_)],c=this.toLonLatTransform_(u);isNaN(c[1])&&(c[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let h=Ti(c[0],this.minLon_,this.maxLon_),d=Ti(c[1],this.minLat_,this.maxLat_);const p=this.maxLines_;let m,g,v,b,_=e;o||(_=[Ti(e[0],this.minX_,this.maxX_),Ti(e[1],this.minY_,this.maxY_),Ti(e[2],this.minX_,this.maxX_),Ti(e[3],this.minY_,this.maxY_)]);const E=zy(_,this.toLonLatTransform_,void 0,8);let C=E[3],T=E[2],D=E[1],M=E[0];if(o||(Al(_,this.bottomLeft_)&&(M=this.minLon_,D=this.minLat_),Al(_,this.bottomRight_)&&(T=this.maxLon_,D=this.minLat_),Al(_,this.topLeft_)&&(M=this.minLon_,C=this.maxLat_),Al(_,this.topRight_)&&(T=this.maxLon_,C=this.maxLat_),C=Ti(C,d,this.maxLat_),T=Ti(T,h,this.maxLon_),D=Ti(D,this.minLat_,d),M=Ti(M,this.minLon_,h)),h=Math.floor(h/s)*s,b=Ti(h,this.minLon_,this.maxLon_),g=this.addMeridian_(b,D,C,n,e,0),m=0,o)for(;(b-=s)>=M&&m++<p;)g=this.addMeridian_(b,D,C,n,e,g);else for(;b!=this.minLon_&&m++<p;)b=Math.max(b-s,this.minLon_),g=this.addMeridian_(b,D,C,n,e,g);if(b=Ti(h,this.minLon_,this.maxLon_),m=0,o)for(;(b+=s)<=T&&m++<p;)g=this.addMeridian_(b,D,C,n,e,g);else for(;b!=this.maxLon_&&m++<p;)b=Math.min(b+s,this.maxLon_),g=this.addMeridian_(b,D,C,n,e,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),d=Math.floor(d/s)*s,v=Ti(d,this.minLat_,this.maxLat_),g=this.addParallel_(v,M,T,n,e,0),m=0;v!=this.minLat_&&m++<p;)v=Math.max(v-s,this.minLat_),g=this.addParallel_(v,M,T,n,e,g);for(v=Ti(d,this.minLat_,this.maxLat_),m=0;v!=this.maxLat_&&m++<p;)v=Math.min(v+s,this.maxLat_),g=this.addParallel_(v,M,T,n,e,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(e){const t=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let n=-1;const s=Math.pow(this.targetSize_*e,2),o=[],a=[];for(let l=0,u=this.intervals_.length;l<u;++l){const c=Ti(this.intervals_[l]/2,0,90),h=Ti(r,-90+c,90-c);if(o[0]=t-c,o[1]=h-c,a[0]=t+c,a[1]=h+c,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;n=this.intervals_[l]}return n}getMeridian_(e,t,r,n,s){const o=xnt(e,t,r,this.projection_,n);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new Vn(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(e,t,r){const n=e.getFlatCoordinates();let s=1,o=n.length-1;n[s]>n[o]&&(s=o,o=1);const a=Math.max(t[1],n[s]),l=Math.min(t[3],n[o]),u=Ti(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,a,l),h=[n[s-1]+(n[o-1]-n[s-1])*(u-n[s])/(n[o]-n[s]),u],d=this.meridiansLabels_[r].geom;return d.setCoordinates(h),d}getMeridians(){return this.meridians_}getParallel_(e,t,r,n,s){const o=wnt(e,t,r,this.projection_,n);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new Vn(o,"XY"),a}getParallelPoint_(e,t,r){const n=e.getFlatCoordinates();let s=0,o=n.length-2;n[s]>n[o]&&(s=o,o=0);const a=Math.max(t[0],n[s]),l=Math.min(t[2],n[o]),u=Ti(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,a,l),c=n[s+1]+(n[o+1]-n[s+1])*(u-n[s])/(n[o]-n[s]),h=[u,c],d=this.parallelsLabels_[r].geom;return d.setCoordinates(h),d}getParallels(){return this.parallels_}updateProjectionInfo_(e){const t=At("EPSG:4326"),r=e.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const n=Wc(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,u){u=u||2;const c=n(a,l,u);for(let h=0,d=c.length;h<d;h+=u)c[h]<o&&(c[h]+=360);return c}}this.fromLonLatTransform_=Wc(t,e);const s=zy([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(fo(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}const Tnt=Cnt,xA=34962,wA=34963,Ant=35040,NO=35044,xL=35048,knt=5121,Dnt=5123,Mnt=5125,FEe=5126,tme=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Lnt(i,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!dXe},e);const t=tme.length;for(let r=0;r<t;++r)try{const n=i.getContext(tme[r],e);if(n)return n}catch{}return null}const Rnt={STATIC_DRAW:NO,STREAM_DRAW:Ant,DYNAMIC_DRAW:xL};class IC{constructor(e,t){this.array_=null,this.type_=e,Hi(e===xA||e===wA,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:Rnt.STATIC_DRAW}ofSize(e){return this.array_=new(_D(this.type_))(e),this}fromArray(e){return this.array_=_D(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(_D(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function _D(i){switch(i){case xA:return Float32Array;case wA:return Uint32Array;default:return Float32Array}}const m2={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Int=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Ont=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class ime{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e.vertexShader||Int),t.compileShader(r);const n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,e.fragmentShader||Ont),t.compileShader(n),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,r),t.attachShader(this.renderTargetProgram_,n),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})})}getGL(){return this.gl_}init(e){const t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const n=0,s=t.RGBA,o=0,a=t.RGBA,l=t.UNSIGNED_BYTE,u=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,n,s,r[0],r[1],o,a,l,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r[0],r[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,r,n){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const l=Nt(s.canvas);if(!e.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),n&&n(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let r,n=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(s.location,n++);else if(Array.isArray(r))switch(r.length){case 2:t.uniform2f(s.location,r[0],r[1]);return;case 3:t.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:t.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(s.location,r)})}}function NEe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $Ee(i,e){return i[0]=e[0],i[1]=e[1],i[4]=e[2],i[5]=e[3],i[12]=e[4],i[13]=e[5],i}const Fh={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Sc={UNSIGNED_BYTE:knt,UNSIGNED_SHORT:Dnt,UNSIGNED_INT:Mnt,FLOAT:FEe},OC={};function rme(i){return"shared/"+i}let nme=0;function Pnt(){const i="unique/"+nme;return nme+=1,i}function Fnt(i){let e=OC[i];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:Lnt(t)},OC[i]=e}return e.users+=1,e.context}function Nnt(i){const e=OC[i];if(!e||(e.users-=1,e.users>0))return;const t=e.context,r=t.getExtension("WEBGL_lose_context");r&&r.loseContext();const n=t.canvas;n.width=1,n.height=1,delete OC[i]}class $nt extends fw{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?rme(e.canvasCacheKey):Pnt(),this.gl_=Fnt(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(m2.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(m2.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=ss(),this.offsetScaleMatrix_=ss(),this.tmpMat4_=NEe(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new ime({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new ime({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===rme(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,r=Nt(e);let n=this.bufferCache_[r];if(!n){const s=t.createBuffer();n={buffer:e,webGlBuffer:s},this.bufferCache_[r]=n}t.bindBuffer(e.getType(),n.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.gl_,r=Nt(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(m2.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(m2.RESTORED,this.boundHandleWebGLContextRestored_),Nnt(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,r){const n=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,t?n.ZERO:n.ONE_MINUS_SRC_ALPHA),r?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}bindTexture(e,t,r){const n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(r),t)}prepareDrawToRenderTarget(e,t,r,n){const s=this.gl_,o=t.getSize();s.bindFramebuffer(s.FRAMEBUFFER,t.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,t.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,t.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),n?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,t){const r=this.gl_;this.getExtension("OES_element_index_uint");const n=r.UNSIGNED_INT,s=4,o=t-e,a=e*s;r.drawElements(r.TRIANGLES,o,n,a)}finalizeDraw(e,t,r){for(let n=0,s=this.postProcessPasses_.length;n<s;n++)n===s-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,r=e.viewState.rotation,n=e.pixelRatio;this.setUniformFloatValue(Fh.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Fh.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Fh.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Fh.PIXEL_RATIO,n),this.setUniformFloatVec2(Fh.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(Fh.ROTATION,r)}applyHitDetectionUniform(e){const t=this.getUniformLocation(Fh.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(Fh.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let r,n=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),this.bindTexture(s.texture,n,s.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),n++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,$Ee(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:t.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:t.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:t.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const r=this.gl_,n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}getProgram(e,t){const r=this.gl_,n=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(t,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(n,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(n)}`;throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const t=Nt(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=Nt(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const r=e.size,n=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return Pl(t,0,0,2/(s*r[0]),2/(s*r[1]),-n,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,r,n,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,r,!1,n,s))}enableAttributes(e){const t=Bnt(e);let r=0;for(let n=0;n<e.length;n++){const s=e[n];this.enableAttributeArray_(s.name,s.size,s.type||FEe,t,r),r+=s.size*BEe(s.type)}}handleWebGLContextLost(e){xv(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,r){const n=this.gl_;r=r||n.createTexture();const s=0,o=n.RGBA,a=0,l=n.RGBA,u=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,s,o,l,u,t):n.texImage2D(n.TEXTURE_2D,s,o,e[0],e[1],a,l,u,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r}}function Bnt(i){let e=0;for(let t=0;t<i.length;t++){const r=i[t];e+=r.size*BEe(r.type)}return e}function BEe(i){switch(i){case Sc.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Sc.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Sc.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Sc.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class EA extends CEe{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=ss(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(nn.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(Ws.PRECOMPOSE)){const n=new L_(Ws.PRECOMPOSE,void 0,t,e);r.dispatchEvent(n)}}dispatchPostComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(Ws.POSTCOMPOSE)){const n=new L_(Ws.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(n)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,r=-1,n;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof EA)){t=!0;continue}const c=l.getClassName();if((t||c!==n)&&(r+=1,t=!1),n=c,u===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new $nt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),n&&(this.helper.getCanvas().className=n),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,r){const n=this.getLayer();if(n.hasListener(e)){Pl(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new L_(e,this.inversePixelTransform_,r,t);n.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_(Ws.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(Ws.POSTRENDER,e,t)}}const pc=new Uint8Array(4);class jnt{constructor(e,t){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){th(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return pc[0]=0,pc[1]=0,pc[2]=0,pc[3]=0,pc;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return pc[0]=this.data_[r*4],pc[1]=this.data_[r*4+1],pc[2]=this.data_[r*4+2],pc[3]=this.data_[r*4+3],pc}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}const sme={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};var jEe={exports:{}};jEe.exports=SA;jEe.exports.default=SA;function SA(i,e,t){t=t||2;var r=e&&e.length,n=r?e[0]*t:i.length,s=zEe(i,0,n,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,c,h,d,p;if(r&&(s=Hnt(i,e,s,t)),i.length>80*t){a=u=i[0],l=c=i[1];for(var m=t;m<n;m+=t)h=i[m],d=i[m+1],h<a&&(a=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);p=Math.max(u-a,c-l),p=p!==0?32767/p:0}return xx(s,o,t,a,l,p,0),o}function zEe(i,e,t,r,n){var s,o;if(n===SL(i,e,t,r)>0)for(s=e;s<t;s+=r)o=ome(s,i[s],i[s+1],o);else for(s=t-r;s>=e;s-=r)o=ome(s,i[s],i[s+1],o);return o&&CA(o,o.next)&&(Ex(o),o=o.next),o}function Qm(i,e){if(!i)return i;e||(e=i);var t=i,r;do if(r=!1,!t.steiner&&(CA(t,t.next)||ns(t.prev,t,t.next)===0)){if(Ex(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function xx(i,e,t,r,n,s,o){if(i){!o&&s&&Znt(i,r,n,s);for(var a=i,l,u;i.prev!==i.next;){if(l=i.prev,u=i.next,s?Unt(i,r,n,s):znt(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),Ex(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=Gnt(Qm(i),e,t),xx(i,e,t,r,n,s,2)):o===2&&qnt(i,e,t,r,n,s):xx(Qm(i),e,t,r,n,s,1);break}}}}function znt(i){var e=i.prev,t=i,r=i.next;if(ns(e,t,r)>=0)return!1;for(var n=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=n<s?n<o?n:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,d=n>s?n>o?n:o:s>o?s:o,p=a>l?a>u?a:u:l>u?l:u,m=r.next;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=h&&m.y<=p&&W0(n,a,s,l,o,u,m.x,m.y)&&ns(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Unt(i,e,t,r){var n=i.prev,s=i,o=i.next;if(ns(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,u=o.x,c=n.y,h=s.y,d=o.y,p=a<l?a<u?a:u:l<u?l:u,m=c<h?c<d?c:d:h<d?h:d,g=a>l?a>u?a:u:l>u?l:u,v=c>h?c>d?c:d:h>d?h:d,b=wL(p,m,e,t,r),_=wL(g,v,e,t,r),E=i.prevZ,C=i.nextZ;E&&E.z>=b&&C&&C.z<=_;){if(E.x>=p&&E.x<=g&&E.y>=m&&E.y<=v&&E!==n&&E!==o&&W0(a,c,l,h,u,d,E.x,E.y)&&ns(E.prev,E,E.next)>=0||(E=E.prevZ,C.x>=p&&C.x<=g&&C.y>=m&&C.y<=v&&C!==n&&C!==o&&W0(a,c,l,h,u,d,C.x,C.y)&&ns(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=b;){if(E.x>=p&&E.x<=g&&E.y>=m&&E.y<=v&&E!==n&&E!==o&&W0(a,c,l,h,u,d,E.x,E.y)&&ns(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=_;){if(C.x>=p&&C.x<=g&&C.y>=m&&C.y<=v&&C!==n&&C!==o&&W0(a,c,l,h,u,d,C.x,C.y)&&ns(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Gnt(i,e,t){var r=i;do{var n=r.prev,s=r.next.next;!CA(n,s)&&UEe(n,r,r.next,s)&&wx(n,s)&&wx(s,n)&&(e.push(n.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Ex(r),Ex(r.next),r=i=s),r=r.next}while(r!==i);return Qm(r)}function qnt(i,e,t,r,n,s){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Qnt(o,a)){var l=GEe(o,a);o=Qm(o,o.next),l=Qm(l,l.next),xx(o,e,t,r,n,s,0),xx(l,e,t,r,n,s,0);return}a=a.next}o=o.next}while(o!==i)}function Hnt(i,e,t,r){var n=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:i.length,u=zEe(i,a,l,r,!1),u===u.next&&(u.steiner=!0),n.push(Jnt(u));for(n.sort(Vnt),s=0;s<n.length;s++)t=Wnt(n[s],t);return t}function Vnt(i,e){return i.x-e.x}function Wnt(i,e){var t=Ynt(i,e);if(!t)return e;var r=GEe(t,i);return Qm(r,r.next),Qm(t,t.next)}function Ynt(i,e){var t=e,r=i.x,n=i.y,s=-1/0,o;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var a=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=r&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===r))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,c=o.y,h=1/0,d;t=o;do r>=t.x&&t.x>=u&&r!==t.x&&W0(n<c?r:s,n,u,c,n<c?s:r,n,t.x,t.y)&&(d=Math.abs(n-t.y)/(r-t.x),wx(t,i)&&(d<h||d===h&&(t.x>o.x||t.x===o.x&&Xnt(o,t)))&&(o=t,h=d)),t=t.next;while(t!==l);return o}function Xnt(i,e){return ns(i.prev,i,e.prev)<0&&ns(e.next,i,i.next)<0}function Znt(i,e,t,r){var n=i;do n.z===0&&(n.z=wL(n.x,n.y,e,t,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==i);n.prevZ.nextZ=null,n.prevZ=null,Knt(n)}function Knt(i){var e,t,r,n,s,o,a,l,u=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(n=t,t=t.nextZ,a--):(n=r,r=r.nextZ,l--),s?s.nextZ=n:i=n,n.prevZ=s,s=n;t=r}s.nextZ=null,u*=2}while(o>1);return i}function wL(i,e,t,r,n){return i=(i-t)*n|0,e=(e-r)*n|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function Jnt(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function W0(i,e,t,r,n,s,o,a){return(n-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(n-o)*(r-a)}function Qnt(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!est(i,e)&&(wx(i,e)&&wx(e,i)&&tst(i,e)&&(ns(i.prev,i,e.prev)||ns(i,e.prev,e))||CA(i,e)&&ns(i.prev,i,i.next)>0&&ns(e.prev,e,e.next)>0)}function ns(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function CA(i,e){return i.x===e.x&&i.y===e.y}function UEe(i,e,t,r){var n=y2(ns(i,e,t)),s=y2(ns(i,e,r)),o=y2(ns(t,r,i)),a=y2(ns(t,r,e));return!!(n!==s&&o!==a||n===0&&g2(i,t,e)||s===0&&g2(i,r,e)||o===0&&g2(t,i,r)||a===0&&g2(t,e,r))}function g2(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function y2(i){return i>0?1:i<0?-1:0}function est(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&UEe(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function wx(i,e){return ns(i.prev,i,i.next)<0?ns(i,e,i.next)>=0&&ns(i,i.prev,e)>=0:ns(i,e,i.prev)<0||ns(i,i.next,e)<0}function tst(i,e){var t=i,r=!1,n=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&n<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==i);return r}function GEe(i,e){var t=new EL(i.i,i.x,i.y),r=new EL(e.i,e.x,e.y),n=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=n,n.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function ome(i,e,t,r){var n=new EL(i,e,t);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Ex(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function EL(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}SA.deviation=function(i,e,t,r){var n=e&&e.length,s=n?e[0]*t:i.length,o=Math.abs(SL(i,0,s,t));if(n)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,c=a<l-1?e[a+1]*t:i.length;o-=Math.abs(SL(i,u,c,t))}var h=0;for(a=0;a<r.length;a+=3){var d=r[a]*t,p=r[a+1]*t,m=r[a+2]*t;h+=Math.abs((i[d]-i[m])*(i[p+1]-i[d+1])-(i[d]-i[p])*(i[m+1]-i[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function SL(i,e,t,r){for(var n=0,s=e,o=t-r;s<t;s+=r)n+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return n}SA.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},r=0,n=0;n<i.length;n++){for(var s=0;s<i[n].length;s++)for(var o=0;o<e;o++)t.vertices.push(i[n][s][o]);n>0&&(r+=i[n-1].length,t.holes.push(r))}return t};const ame=.985;function ist(i,e){e=e||[];const t=256,r=t-1;return e[0]=Math.floor(i/t/t/t)/r,e[1]=Math.floor(i/t/t)%t/r,e[2]=Math.floor(i/t)%t/r,e[3]=i%t/r,e}function rst(i){let e=0;const t=256,r=t-1;return e+=Math.round(i[0]*t*t*t*r),e+=Math.round(i[1]*t*t*r),e+=Math.round(i[2]*t*r),e+=Math.round(i[3]*r),e}function nst(){const i='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(i,"binary").toString("base64"):URL.createObjectURL(new Blob([i],{type:"application/javascript"})))}function sst(i,e){const t=i.viewState.projection,n=e.getSource().getWrapX()&&t.canWrapX(),s=t.getExtent(),o=i.extent,a=n?wi(s):null,l=n?Math.ceil((o[2]-s[2])/a)+1:1;return[n?Math.floor((o[0]-s[0])/a):0,l,a]}class qEe extends EA{constructor(e,t){const r=t.uniforms||{},n=ss();r[Fh.PROJECTION_MATRIX]=n,super(e,{uniforms:r,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new IC(xA,xL),this.indicesBuffer_=new IC(wA,xL),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=t.hitDetectionEnabled??!0;const s=t.attributes?t.attributes.map(function(a){return{name:"a_prop_"+a.name,size:1,type:Sc.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Sc.FLOAT},{name:"a_index",size:1,type:Sc.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:Sc.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Sc.FLOAT})),this.attributes.push(...s),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=ha(),this.currentTransform_=n,this.renderTransform_=ss(),this.invertRenderTransform_=ss(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=nst(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===sme.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,$I(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[Ni(o,ao.ADDFEATURE,this.handleSourceFeatureAdded_,this),Ni(o,ao.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Ni(o,ao.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Ni(o,ao.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{this.featureCache_[Nt(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new jnt(this.helper))}handleSourceFeatureAdded_(e){const t=e.feature;this.featureCache_[Nt(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const t=e.feature;this.featureCache_[Nt(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}handleSourceFeatureDelete_(e){const t=e.feature;delete this.featureCache_[Nt(t)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[r,n,s]=sst(e,this.getLayer());return this.renderWorlds(e,!1,r,n,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,n,s),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}prepareFrameInternal(e){const t=this.getLayer(),r=t.getSource(),n=e.viewState,s=!e.viewHints[pn.ANIMATING]&&!e.viewHints[pn.INTERACTING],o=!hu(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=n.projection,u=n.resolution,c=t instanceof Dv?t.getRenderBuffer():0,h=il(e.extent,c*u);r.loadFeatures(h,u,l),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const t=ss();this.helper.makeProjectionTransform(e,t);const n=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=n*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let o,a;const l=[],u=[];let c=-1;for(const d in this.featureCache_)if(o=this.featureCache_[d],a=o.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],Zn(t,l),this.renderInstructions_[++c]=l[0],this.renderInstructions_[++c]=l[1],this.hitDetectionEnabled_){const p=ist(c+5,u);this.renderInstructions_[++c]=p[0],this.renderInstructions_[++c]=p[1],this.renderInstructions_[++c]=p[2],this.renderInstructions_[++c]=p[3],this.renderInstructions_[++c]=Number(d)}for(let p=0;p<this.customAttributes.length;p++){const m=this.customAttributes[p].callback(o.feature,o.properties);this.renderInstructions_[++c]=m}}const h={id:++this.lastSentId,type:sme.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:n-2};h.projectionTransform=t,this.ready=!1,this.worker_.postMessage(h,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(e,t,r,n,s){if(Hi(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=Zn(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=rst(l),c=this.renderInstructions_[u],h=Math.floor(c).toString(),p=this.getLayer().getSource().getFeatureByUid(h);if(p)return n(p,this.getLayer(),null)}renderWorlds(e,t,r,n,s){let o=r;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),NI(this.currentTransform_,o*s,0),kv(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<n)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){Zr(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class ost{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}const $O=.5;class Nv extends wv{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Bt.CHANGE)}release(){this.state===tt.ERROR&&this.setState(tt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==tt.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==tt.LOADED){e.interimTile=null;break}e.getState()==tt.LOADING?t=e:e.getState()==tt.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==tt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ai()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const n=t-r+1e3/60;return n>=this.transition_?1:Oxe(n/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}function PC(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function CL(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}let d0=null;function ast(i){d0||(d0=kn(i.width,i.height,void 0,{willReadFrequently:!0}));const e=d0.canvas,t=i.width;e.width!==t&&(e.width=t);const r=i.height;return e.height!==r&&(e.height=r),d0.clearRect(0,0,t,r),d0.drawImage(i,0,0),d0.getImageData(0,0,t,r).data}const lst=[256,256];class BO extends Nv{constructor(e){const t=tt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null}getSize(){if(this.size_)return this.size_;const e=PC(this.data_);return e?[e.width,e.height]:lst}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==tt.IDLE&&this.state!==tt.ERROR)return;this.state=tt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=tt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=tt.ERROR,e.changed()})}}const ust=10,lme=.25;class jO{constructor(e,t,r,n,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Wc(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){const E=_[0]+"/"+_[1];return a[E]||(a[E]=l(_)),a[E]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&wi(n)>=wi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?wi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?wi(this.targetProj_.getExtent()):null;const u=ec(r),c=Tv(r),h=Cv(r),d=Wm(r),p=this.transformInv_(u),m=this.transformInv_(c),g=this.transformInv_(h),v=this.transformInv_(d),b=ust+(o?Math.max(0,Math.ceil(Math.log2(lx(r)/(o*o*256*256)))):0);if(this.addQuad_(u,c,h,d,p,m,g,v,b),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(E,C,T){_=Math.min(_,E.source[0][0],E.source[1][0],E.source[2][0])}),this.triangles_.forEach(E=>{if(Math.max(E.source[0][0],E.source[1][0],E.source[2][0])-_>this.sourceWorldWidth_/2){const C=[[E.source[0][0],E.source[0][1]],[E.source[1][0],E.source[1][1]],[E.source[2][0],E.source[2][1]]];C[0][0]-_>this.sourceWorldWidth_/2&&(C[0][0]-=this.sourceWorldWidth_),C[1][0]-_>this.sourceWorldWidth_/2&&(C[1][0]-=this.sourceWorldWidth_),C[2][0]-_>this.sourceWorldWidth_/2&&(C[2][0]-=this.sourceWorldWidth_);const T=Math.min(C[0][0],C[1][0],C[2][0]);Math.max(C[0][0],C[1][0],C[2][0])-T<this.sourceWorldWidth_/2&&(E.source=C)}})}a={}}addTriangle_(e,t,r,n,s,o){this.triangles_.push({source:[n,s,o],target:[e,t,r]})}addQuad_(e,t,r,n,s,o,a,l,u){const c=Lo([s,o,a,l]),h=this.sourceWorldWidth_?wi(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1;let m=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=Lo([e,t,r,n]);m=wi(v)/this.targetWorldWidth_>lme||m}!p&&this.sourceProj_.isGlobal()&&h&&(m=h>lme||m)}if(!m&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Cn(c,this.maxSourceExtent_))return;let g=0;if(!m&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)m=!0;else if(g=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(u>0){if(!m){const v=[(e[0]+r[0])/2,(e[1]+r[1])/2],b=this.transformInv_(v);let _;p?_=(jc(s[0],d)+jc(a[0],d))/2-jc(b[0],d):_=(s[0]+a[0])/2-b[0];const E=(s[1]+a[1])/2-b[1];m=_*_+E*E>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const v=[(t[0]+r[0])/2,(t[1]+r[1])/2],b=this.transformInv_(v),_=[(n[0]+e[0])/2,(n[1]+e[1])/2],E=this.transformInv_(_);this.addQuad_(e,t,v,_,s,o,b,E,u-1),this.addQuad_(_,v,r,n,E,b,a,l,u-1)}else{const v=[(e[0]+t[0])/2,(e[1]+t[1])/2],b=this.transformInv_(v),_=[(r[0]+n[0])/2,(r[1]+n[1])/2],E=this.transformInv_(_);this.addQuad_(e,v,_,n,s,b,E,l,u-1),this.addQuad_(v,t,r,_,b,o,a,E,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}g&11||this.addTriangle_(e,r,n,s,a,l),g&14||this.addTriangle_(e,r,t,s,a,o),g&&(g&13||this.addTriangle_(t,n,e,o,l,s),g&7||this.addTriangle_(t,n,r,o,l,a))}calculateSourceExtent(){const e=ha();return this.triangles_.forEach(function(t,r,n){const s=t.source;D_(e,s[0]),D_(e,s[1]),D_(e,s[2])}),e}getTriangles(){return this.triangles_}}let xD;const nd=[];function ume(i,e,t,r,n){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(r,n),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,r)+1,Math.max(t,n)),i.restore()}function wD(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function cst(){if(xD===void 0){const i=kn(6,6,nd);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",ume(i,4,5,4,0),ume(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;xD=wD(e,0)||wD(e,4)||wD(e,8),Xm(i),nd.push(i.canvas)}return xD}function Sx(i,e,t,r){const n=Av(t,e,i);let s=Gy(e,r,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||Al(l,n)){const u=Gy(i,s,n)/s;isFinite(u)&&u>0&&(s/=u)}return s}function HEe(i,e,t,r){const n=fo(t);let s=Sx(i,e,n,r);return(!isFinite(s)||s<=0)&&SI(t,function(o){return s=Sx(i,e,o,r),isFinite(s)&&s>0}),s}function zO(i,e,t,r,n,s,o,a,l,u,c,h,d,p){const m=kn(Math.round(t*i),Math.round(t*e),nd);if(h||(m.imageSmoothingEnabled=!1),l.length===0)return m.canvas;m.scale(t,t);function g(T){return Math.round(T*t)/t}m.globalCompositeOperation="lighter";const v=ha();l.forEach(function(T,D,M){Exe(v,T.extent)});let b;const _=t/r,E=(h?1:1+Math.pow(2,-24))/_;if(!d||l.length!==1||u!==0){if(b=kn(Math.round(wi(v)*_),Math.round(Sn(v)*_),nd),h||(b.imageSmoothingEnabled=!1),n&&p){const T=(n[0]-v[0])*_,D=-(n[3]-v[3])*_,M=wi(n)*_,A=Sn(n)*_;b.rect(T,D,M,A),b.clip()}l.forEach(function(T,D,M){if(T.image.width>0&&T.image.height>0){if(T.clipExtent){b.save();const K=(T.clipExtent[0]-v[0])*_,L=-(T.clipExtent[3]-v[3])*_,F=wi(T.clipExtent)*_,$=Sn(T.clipExtent)*_;b.rect(h?K:Math.round(K),h?L:Math.round(L),h?F:Math.round(K+F)-Math.round(K),h?$:Math.round(L+$)-Math.round(L)),b.clip()}const A=(T.extent[0]-v[0])*_,I=-(T.extent[3]-v[3])*_,P=wi(T.extent)*_,U=Sn(T.extent)*_;b.drawImage(T.image,u,u,T.image.width-2*u,T.image.height-2*u,h?A:Math.round(A),h?I:Math.round(I),h?P:Math.round(A+P)-Math.round(A),h?U:Math.round(I+U)-Math.round(I)),T.clipExtent&&b.restore()}})}const C=ec(o);return a.getTriangles().forEach(function(T,D,M){const A=T.source,I=T.target;let P=A[0][0],U=A[0][1],K=A[1][0],L=A[1][1],F=A[2][0],$=A[2][1];const H=g((I[0][0]-C[0])/s),V=g(-(I[0][1]-C[1])/s),J=g((I[1][0]-C[0])/s),ee=g(-(I[1][1]-C[1])/s),ie=g((I[2][0]-C[0])/s),de=g(-(I[2][1]-C[1])/s),te=P,z=U;P=0,U=0,K-=te,L-=z,F-=te,$-=z;const ne=[[K,L,0,0,J-H],[F,$,0,0,ie-H],[0,0,K,L,ee-V],[0,0,F,$,de-V]],ve=YWe(ne);if(!ve)return;if(m.save(),m.beginPath(),cst()||!h){m.moveTo(J,ee);const Xe=4,ot=H-J,Be=V-ee;for(let He=0;He<Xe;He++)m.lineTo(J+g((He+1)*ot/Xe),ee+g(He*Be/(Xe-1))),He!=Xe-1&&m.lineTo(J+g((He+1)*ot/Xe),ee+g((He+1)*Be/(Xe-1)));m.lineTo(ie,de)}else m.moveTo(J,ee),m.lineTo(H,V),m.lineTo(ie,de);m.clip(),m.transform(ve[0],ve[2],ve[1],ve[3],H,V),m.translate(v[0]-te,v[3]-z);let $e;if(b)$e=b.canvas,m.scale(E,-E);else{const Xe=l[0],ot=Xe.extent;$e=Xe.image,m.scale(wi(ot)/$e.width,-Sn(ot)/$e.height)}m.drawImage($e,0,0),m.restore()}),b&&(Xm(b),nd.push(b.canvas)),c&&(m.save(),m.globalCompositeOperation="source-over",m.strokeStyle="black",m.lineWidth=1,a.getTriangles().forEach(function(T,D,M){const A=T.target,I=(A[0][0]-C[0])/s,P=-(A[0][1]-C[1])/s,U=(A[1][0]-C[0])/s,K=-(A[1][1]-C[1])/s,L=(A[2][0]-C[0])/s,F=-(A[2][1]-C[1])/s;m.beginPath(),m.moveTo(U,K),m.lineTo(I,P),m.lineTo(L,F),m.closePath(),m.stroke()}),m.restore()),m.canvas}class UO extends BO{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,r=t.getExtent(),n=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?n?Bs(r,n):r:n;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?Bs(s,o):s;if(lx(l)===0){this.state=tt.EMPTY;return}r&&(a?a=Bs(a,r):a=r);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=HEe(t,c,l,u);if(!isFinite(h)||h<=0){this.state=tt.EMPTY;return}const d=e.errorThreshold!==void 0?e.errorThreshold:$O;if(this.triangulation_=new jO(t,c,l,a,h*d,u),this.triangulation_.getTriangles().length===0){this.state=tt.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let p=this.triangulation_.calculateSourceExtent();if(a&&(t.canWrapX()?(p[1]=Ti(p[1],a[1],a[3]),p[3]=Ti(p[3],a[1],a[3])):p=Bs(p,a)),!lx(p))this.state=tt.EMPTY;else{let m=0,g=0;t.canWrapX()&&(m=wi(r),g=Math.floor((p[0]-r[0])/m)),AI(p.slice(),t,!0).forEach(b=>{const _=this.sourceTileGrid_.getTileRangeForExtentAndZ(b,this.sourceZ_),E=e.getTileFunction;for(let C=_.minX;C<=_.maxX;C++)for(let T=_.minY;T<=_.maxY;T++){const D=E(this.sourceZ_,C,T,this.pixelRatio_);if(D){const M=g*m;this.sourceTiles_.push({tile:D,offset:M})}}++g}),this.sourceTiles_.length===0&&(this.state=tt.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var T;const r=t.tile;if(!r||r.getState()!==tt.LOADED)return;const n=r.getSize(),s=this.gutter_;let o;const a=CL(r.getData());a?o=a:o=ast(PC(r.getData()));const l=[n[0]+2*s,n[1]+2*s],u=o instanceof Float32Array,c=l[0]*l[1],h=u?Float32Array:Uint8Array,d=new h(o.buffer),p=h.BYTES_PER_ELEMENT,m=p*d.length/c,g=d.byteLength/l[1],v=Math.floor(g/p/l[0]),b=c*v;let _=d;if(d.length!==b){_=new h(b);let D=0,M=0;const A=l[0]*v;for(let I=0;I<l[1];++I){for(let P=0;P<A;++P)_[D++]=d[M+P];M+=g/p}}const E=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);E[0]+=t.offset,E[2]+=t.offset;const C=(T=this.clipExtent_)==null?void 0:T.slice();C&&(C[0]+=t.offset,C[2]+=t.offset),e.push({extent:E,clipExtent:C,data:new Uint8Array(_.buffer),dataType:h,bytesPerPixel:m,pixelSize:l})}),this.sourceTiles_.length=0,e.length===0)this.state=tt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),n=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let u,c;const h=e[0].bytesPerPixel,d=Math.ceil(h/3);for(let p=d-1;p>=0;--p){const m=[];for(let C=0,T=e.length;C<T;++C){const D=e[C],M=D.data,A=D.pixelSize,I=A[0],P=A[1],U=kn(I,P,nd),K=U.createImageData(I,P),L=K.data;let F=p*3;for(let $=0,H=L.length;$<H;$+=4)L[$]=M[F],L[$+1]=M[F+1],L[$+2]=M[F+2],L[$+3]=255,F+=h;U.putImageData(K,0,0),m.push({extent:D.extent,clipExtent:D.clipExtent,image:U.canvas})}const g=zO(n,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,m,this.gutter_,!1,!1,!1);for(let C=0,T=m.length;C<T;++C){const M=m[C].image.getContext("2d");Xm(M),nd.push(M.canvas)}const v=g.getContext("2d"),b=v.getImageData(0,0,g.width,g.height);Xm(v),nd.push(g),u||(c=new Uint8Array(h*b.width*b.height),u=new e[0].dataType(c.buffer));const _=b.data;let E=p*3;for(let C=0,T=_.length;C<T;C+=4)_[C+3]===255?(c[E]=_[C],c[E+1]=_[C+1],c[E+2]=_[C+2]):(c[E]=0,c[E+1]=0,c[E+2]=0),E+=h}this.reprojData_=u,this.reprojSize_=[Math.round(n*this.pixelRatio_),Math.round(s*this.pixelRatio_)],this.state=tt.LOADED}this.changed()}load(){if(this.state!==tt.IDLE&&this.state!==tt.ERROR)return;this.state=tt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r!==tt.IDLE&&r!==tt.LOADING)return;e++;const n=Ni(t,Bt.CHANGE,function(){const s=t.getState();(s==tt.LOADED||s==tt.ERROR||s==tt.EMPTY)&&(Zr(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(n)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==tt.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Zr),this.sourcesListenerKeys_=null}}class Yy extends Nv{constructor(e,t,r,n,s,o,a,l,u,c,h,d){super(s,tt.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=n.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const v=m?Bs(p,m):p;if(lx(v)===0){this.state=tt.EMPTY;return}const b=e.getExtent();b&&(g?g=Bs(g,b):g=b);const _=n.getResolution(this.wrappedTileCoord_[0]),E=HEe(e,r,v,_);if(!isFinite(E)||E<=0){this.state=tt.EMPTY;return}const C=c!==void 0?c:$O;if(this.triangulation_=new jO(e,r,v,g,E*C,_),this.triangulation_.getTriangles().length===0){this.state=tt.EMPTY;return}this.sourceZ_=t.getZForResolution(E);let T=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(T[1]=Ti(T[1],g[1],g[3]),T[3]=Ti(T[3],g[1],g[3])):T=Bs(T,g)),!lx(T))this.state=tt.EMPTY;else{let D=0,M=0;e.canWrapX()&&(D=wi(b),M=Math.floor((T[0]-b[0])/D)),AI(T.slice(),e,!0).forEach(I=>{const P=t.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let U=P.minX;U<=P.maxX;U++)for(let K=P.minY;K<=P.maxY;K++){const L=u(this.sourceZ_,U,K,a);if(L){const F=M*D;this.sourceTiles_.push({tile:L,offset:F})}}++M}),this.sourceTiles_.length===0&&(this.state=tt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var n;const r=t.tile;if(r&&r.getState()==tt.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const o=(n=this.clipExtent_)==null?void 0:n.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:s,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=tt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),n=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=zO(n,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=tt.LOADED}this.changed()}load(){if(this.state==tt.IDLE){this.state=tt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==tt.IDLE||r==tt.LOADING){e++;const n=Ni(t,Bt.CHANGE,function(s){const o=t.getState();(o==tt.LOADED||o==tt.ERROR||o==tt.EMPTY)&&(Zr(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(n)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,n){t.getState()==tt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Zr),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Xm(this.canvas_.getContext("2d")),nd.push(this.canvas_),this.canvas_=null),super.release()}}class kw extends Nv{constructor(e,t,r,n,s,o){super(e,t,o),this.crossOrigin_=n,this.src_=r,this.key=r,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=tt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=tt.ERROR,this.unlistenImage_(),this.image_=hst(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=tt.LOADED:this.state=tt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==tt.ERROR&&(this.state=tt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==tt.IDLE&&(this.state=tt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=vXe(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function hst(){const i=kn(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class dst extends wv{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=e.gutter||0,this.helper_=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(Bt.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===tt.LOADED,this.loaded)this.uploadTile();else{if(e instanceof kw){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(Bt.CHANGE,this.handleTileChange_)}}uploadTile(){ai()}setReady(){this.ready=!0,this.dispatchEvent(Bt.CHANGE)}handleTileChange_(){this.tile.getState()===tt.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(Bt.CHANGE,this.handleTileChange_)}}function VEe(i,e,t){const r=t?i.LINEAR:i.NEAREST;i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r)}function fst(i,e,t,r){VEe(i,e,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)}function cme(i,e,t,r,n,s){const o=i.getGL();let a,l;t instanceof Float32Array?(a=o.FLOAT,i.getExtension("OES_texture_float"),l=i.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),VEe(o,e,s&&l);const u=t.byteLength/r[1];let c=1;u%8===0?c=8:u%4===0?c=4:u%2===0&&(c=2);let h;switch(n){case 1:{h=o.LUMINANCE;break}case 2:{h=o.LUMINANCE_ALPHA;break}case 3:{h=o.RGB;break}case 4:{h=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${n}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,c),o.texImage2D(o.TEXTURE_2D,0,h,r[0],r[1],0,h,a,t),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let D0=null;function pst(){D0=kn(1,1,void 0,{willReadFrequently:!0})}class mst extends dst{constructor(e){super(e),this.textures=[],this.renderSize_=On(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const t=new IC(xA,NO);t.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(t),this.coords=t,this.setTile(e.tile)}uploadTile(){const e=this.helper_,t=e.getGL(),r=this.tile;this.textures.length=0;let n;r instanceof kw||r instanceof Yy?n=r.getImage():n=r.getData();const s=PC(n);if(s){const _=t.createTexture();this.textures.push(_),this.bandCount=4,fst(t,_,s,r.interpolate),this.setReady();return}n=CL(n);const o=r.getSize(),a=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],l=n instanceof Float32Array,u=a[0]*a[1],c=l?Float32Array:Uint8Array,h=c.BYTES_PER_ELEMENT,d=n.byteLength/a[1];this.bandCount=Math.floor(d/h/a[0]);const p=Math.ceil(this.bandCount/4);if(p===1){const _=t.createTexture();this.textures.push(_),cme(e,_,n,a,this.bandCount,r.interpolate),this.setReady();return}const m=new Array(p);for(let _=0;_<p;++_){const E=t.createTexture();this.textures.push(E);const C=_<p-1?4:(this.bandCount-1)%4+1;m[_]=new c(u*C)}let g=0,v=0;const b=a[0]*this.bandCount;for(let _=0;_<a[1];++_){for(let E=0;E<b;++E){const C=n[v+E],T=Math.floor(g/this.bandCount),D=E%this.bandCount,M=Math.floor(D/4),A=m[M],I=A.length/u,P=D%4;A[T*I+P]=C,++g}v+=d/h}for(let _=0;_<p;++_){const E=this.textures[_],C=m[_],T=C.length/u;cme(e,E,C,a,T,r.interpolate)}this.setReady()}disposeInternal(){const e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(Bt.CHANGE,this.handleTileChange_)}getImagePixelData_(e,t,r){const n=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1];D0||pst(),D0.clearRect(0,0,1,1);const a=e.width,l=e.height,u=a-2*n,c=l-2*n,h=n+Math.floor(u*(t/s)),d=n+Math.floor(c*(r/o));let p;try{D0.drawImage(e,h,d,1,1,0,0,1,1),p=D0.getImageData(0,0,1,1).data}catch{return D0=null,null}return p}getArrayPixelData_(e,t,r,n){const s=this.gutter_,o=this.renderSize_[0],a=this.renderSize_[1],l=t[0],u=t[1],c=l+2*s,h=u+2*s,d=s+Math.floor(l*(r/o)),p=s+Math.floor(u*(n/a));if(e instanceof DataView){const g=e.byteLength/(c*h),v=g*(p*c+d),b=e.buffer.slice(v,v+g);return new DataView(b)}const m=this.bandCount*(p*c+d);return e.slice(m,m+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof BO){const r=this.tile.getData(),n=CL(r);if(n){const s=this.tile.getSize();return this.getArrayPixelData_(n,s,e,t)}return this.getImagePixelData_(PC(r),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}}class GO{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return Hi(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return Hi(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Hi(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}class TA{constructor(e,t,r,n){this.minX=e,this.maxX=t,this.minY=r,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function f0(i,e,t,r,n){return n!==void 0?(n.minX=i,n.maxX=e,n.minY=t,n.maxY=r,n):new TA(i,e,t,r)}function Cx(i,e,t,r){return r!==void 0?(r[0]=i,r[1]=e,r[2]=t,r):[i,e,t]}function Zc(i,e,t){return i+"/"+e+"/"+t}function _f(i){return Zc(i[0],i[1],i[2])}function gst(i){const[e,t,r]=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number);return Zc(e,t,r)}function WEe(i){return i.split("/").map(Number)}function qO(i){return(i[1]<<i[0])+i[2]}function yst(i,e){const t=i[0],r=i[1],n=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,n):!0}const vst={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},bst={};function hme(i){return 1/(i+2)}function _st(){return{tileIds:new Set,representationsByZ:{}}}function dme(i,e){return i.tileIds.has(Nt(e))}function fme(i,e,t){const r=i.representationsByZ;t in r||(r[t]=new Set),r[t].add(e),i.tileIds.add(Nt(e.tile))}function ED(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=Bs(e,kl(t.extent,i.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const n=r.getTileGridForProjection(i.viewState.projection).getExtent();n&&(e=Bs(e,n))}return e}function TL(i,e){return`${i.getKey()},${_f(e)}`}class xst extends EA{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=ss(),this.tempMat4=NEe(),this.tempTileRange_=new TA(0,0,0,0),this.tempTileCoord_=Cx(0,0,0),this.tempSize_=[0,0];const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new GO(r),this.frameState=null,this.projection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}isDrawableTile_(e){const t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==tt.LOADED||r==tt.EMPTY||r==tt.ERROR&&!n}prepareFrameInternal(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;const r=this.getLayer().getRenderSource();return!r||ih(ED(e,e.extent))?!1:r.getState()==="ready"}createTileRepresentation(e){return ai()}enqueueTiles(e,t,r,n,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),c=l.getGutterForProjection(o.projection),h=Nt(l);h in e.wantedTiles||(e.wantedTiles[h]={});const d=e.wantedTiles[h],p=this.tileRepresentationCache,m=a.getMapInternal(),g=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),m?m.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let v=r;v>=g;--v){const b=u.getTileRangeForExtentAndZ(t,v,this.tempTileRange_),_=u.getResolution(v);for(let E=b.minX;E<=b.maxX;++E)for(let C=b.minY;C<=b.maxY;++C){const T=Cx(v,E,C,this.tempTileCoord_),D=TL(l,T);let M,A;if(p.containsKey(D)&&(M=p.get(D),A=M.tile),(!M||M.tile.key!==l.getKey())&&(A=l.getTile(v,E,C,e.pixelRatio,o.projection)),dme(n,A))continue;if(!M)M=this.createTileRepresentation({tile:A,grid:u,helper:this.helper,gutter:c}),p.set(D,M);else if(this.isDrawableTile_(A))M.setTile(A);else{const P=A.getInterimTile();M.setTile(P)}fme(n,M,v);const I=A.getKey();d[I]=!0,A.getState()===tt.IDLE&&(e.tileQueue.isKeyQueued(I)||e.tileQueue.enqueue([A,h,u.getTileCoordCenter(T),_]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,r,n,s,o,a,l,u,c,h){}renderTileMask(e,t,r,n){}drawTile_(e,t,r,n,s,o,a){if(!t.ready)return;const u=t.tile.tileCoord,c=_f(u),h=c in o?o[c]:1,d=a.getResolution(r),p=On(a.getTileSize(r),this.tempSize_),m=a.getOrigin(r),g=a.getTileCoordExtent(u),v=h<1?-1:hme(r);h<1&&(e.animate=!0);const b=e.viewState,_=b.center[0],E=b.center[1],C=p[0]+2*n,T=p[1]+2*n,D=C/T,M=(_-m[0])/(p[0]*d),A=(m[1]-E)/(p[1]*d),I=b.resolution/d,P=u[1],U=u[2];tL(this.tileTransform_),M_(this.tileTransform_,2/(e.size[0]*I/C),-2/(e.size[1]*I/C)),AYe(this.tileTransform_,b.rotation),M_(this.tileTransform_,1,1/D),NI(this.tileTransform_,(p[0]*(P-M)-n)/C,(p[1]*(U-A)-n)/T),this.renderTile(t,this.tileTransform_,e,s,d,p,m,g,v,n,h)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const r=e.viewState,n=this.getLayer(),s=n.getRenderSource(),o=s.getTileGridForProjection(r.projection),a=s.getGutterForProjection(r.projection),l=ED(e,e.extent),u=o.getZForResolution(r.resolution,s.zDirection),c=_st(),h=n.getPreload();if(e.nextExtent){const D=o.getZForResolution(r.nextResolution,s.zDirection),M=ED(e,e.nextExtent);this.enqueueTiles(e,M,D,c,h)}this.enqueueTiles(e,l,u,c,0),h>0&&setTimeout(()=>{this.enqueueTiles(e,l,u-1,c,h-1)},0);const d={},p=Nt(this),m=e.time;let g=!1;for(const D of c.representationsByZ[u]){const M=D.tile;if((M instanceof Yy||M instanceof UO)&&M.getState()===tt.EMPTY)continue;const A=M.tileCoord;if(D.ready){const U=M.getAlpha(p,m);if(U===1){M.endTransition(p);continue}g=!0;const K=_f(A);d[K]=U}if(this.renderComplete=!1,this.findAltTiles_(o,A,u+1,c))continue;const P=o.getMinZoom();for(let U=u-1;U>=P&&!this.findAltTiles_(o,A,U,c);--U);}const v=c.representationsByZ,b=Object.keys(v).map(Number).sort(GWe);if(this.beforeTilesMaskRender(e))for(let D=0,M=b.length;D<M;++D){const A=b[D];for(const I of v[A]){const P=I.tile.tileCoord;if(_f(P)in d)continue;const K=o.getTileCoordExtent(P);this.renderTileMask(I,A,K,hme(A))}}this.beforeTilesRender(e,g);for(let D=0,M=b.length;D<M;++D){const A=b[D];for(const I of v[A]){const P=I.tile.tileCoord;_f(P)in d||this.drawTile_(e,I,A,a,l,d,o)}}for(const D of v[u]){const M=D.tile.tileCoord;_f(M)in d&&this.drawTile_(e,D,u,a,l,d,o)}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const E=this.helper.getCanvas(),C=this.tileRepresentationCache;for(;C.canExpireCache();)C.pop().dispose();const T=function(D,M){s.updateCacheSize(.1,M.viewState.projection),s.expireCache(M.viewState.projection,bst)};return e.postRenderFunctions.push(T),this.postRender(t,e),E}findAltTiles_(e,t,r,n){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=s.minX;u<=s.maxX;++u)for(let c=s.minY;c<=s.maxY;++c){const h=TL(l,[r,u,c]);let d=!1;if(a.containsKey(h)){const p=a.get(h);p.ready&&!dme(n,p.tile)&&(fme(n,p,r),d=!0)}d||(o=!1)}return o}clearCache(){const e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}const Wi={...vst,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},dS={TEXTURE_COORD:"a_textureCoord"},wst=[{name:dS.TEXTURE_COORD,size:2,type:Sc.FLOAT}];class Est extends xst{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new IC(wA,NO),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const t=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(t)}this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new mst(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,r,n,s,o,a,l,u,c,h){const d=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(wst);let p=0;for(;p<e.textures.length;){const D=`${Wi.TILE_TEXTURE_ARRAY}[${p}]`;this.helper.bindTexture(e.textures[p],p,D),++p}for(let D=0;D<this.paletteTextures_.length;++D){const M=this.paletteTextures_[D],A=M.getTexture(d);this.helper.bindTexture(A,p,M.name),++p}const m=r.viewState,g=o[0]+2*c,v=o[1]+2*c,_=e.tile.tileCoord,E=_[1],C=_[2];this.helper.setUniformMatrixValue(Wi.TILE_TRANSFORM,$Ee(this.tempMat4,t)),this.helper.setUniformFloatValue(Wi.TRANSITION_ALPHA,h),this.helper.setUniformFloatValue(Wi.DEPTH,u);let T=n;c>0&&(T=l,Bs(T,n,T)),this.helper.setUniformFloatVec4(Wi.RENDER_EXTENT,T),this.helper.setUniformFloatValue(Wi.RESOLUTION,m.resolution),this.helper.setUniformFloatValue(Wi.ZOOM,m.zoom),this.helper.setUniformFloatValue(Wi.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(Wi.TEXTURE_PIXEL_HEIGHT,v),this.helper.setUniformFloatValue(Wi.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(Wi.TEXTURE_ORIGIN_X,a[0]+E*o[0]*s-c*s),this.helper.setUniformFloatValue(Wi.TEXTURE_ORIGIN_Y,a[1]-C*o[1]*s+c*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const n=this.getLayer(),s=Zn(r.pixelToCoordinateTransform,e.slice()),o=r.viewState,a=n.getExtent();if(a&&!Al(kl(a,o.projection),s))return null;const l=n.getSources(Lo([s]),o.resolution);let u,c,h;for(u=l.length-1;u>=0;--u)if(c=l[u],c.getState()==="ready"){if(h=c.getTileGridForProjection(o.projection),c.getWrapX())break;const p=h.getExtent();if(!p||Al(p,s))break}if(u<0)return null;const d=this.tileRepresentationCache;for(let p=h.getZForResolution(o.resolution);p>=h.getMinZoom();--p){const m=h.getTileCoordForCoordAndZ(s,p),g=TL(c,m);if(!d.containsKey(g))continue;const v=d.get(g),b=v.tile;if((b instanceof Yy||b instanceof UO)&&b.getState()===tt.EMPTY)return null;if(!v.loaded)continue;const _=h.getOrigin(p),E=On(h.getTileSize(p)),C=h.getResolution(p),T=(s[0]-_[0])/C-m[1]*E[0],D=(_[1]-s[1])/C-m[2]*E[1];return v.getPixelData(T,D)}return null}disposeInternal(){const e=this.helper;if(e){const t=e.getGL();for(const r of this.paletteTextures_)r.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}function Sst(i,e){return`operator_${i}_${Object.keys(e.functions).length}`}function Im(i){const e=i.toString();return e.includes(".")?e:e+".0"}function AA(i){if(i.length<2||i.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${i.length}(${i.map(Im).join(", ")})`}function fS(i){const e=Ku(i),t=e.length>3?e[3]:1;return AA([e[0]/255*t,e[1]/255*t,e[2]/255*t,t])}function Cst(i){const e=On(i);return AA(e)}const SD={};let Tst=0;function FC(i){return i in SD||(SD[i]=Tst++),SD[i]}function zh(i){return Im(FC(i))}function HO(i){return"u_var_"+i}function Ast(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}const CD="getBandValue",YEe="u_paletteTextures";function kst(i,e,t,r){const n=on(i,t,e);if(_w(n.type,pg))throw new Error("No matching type was found");if(!Hu(e,n.type)){const s=Ks(e),o=Ks(n.type);throw new Error(`Expected expression to be of type ${s}, got ${o}`)}return VO(n,e,r)}function Yr(i){return(e,t,r)=>{const n=t.args.length,s=new Array(n);for(let o=0;o<n;++o)s[o]=VO(t.args[o],r,e);return i(s,e)}}const Dst={[Ue.Get]:(i,e)=>{const r=e.args[0].value;return r in i.properties||(i.properties[r]={name:r,type:e.type}),(i.inFragmentShader?"v_prop_":"a_prop_")+r},[Ue.GeometryType]:(i,e,t)=>{const r="geometryType";return r in i.properties||(i.properties[r]={name:r,type:Ys,evaluator:o=>sO(o.getGeometry())}),(i.inFragmentShader?"v_prop_":"a_prop_")+r},[Ue.Var]:(i,e)=>{const r=e.args[0].value;return r in i.variables||(i.variables[r]={name:r,type:e.type}),HO(r)},[Ue.Resolution]:()=>"u_resolution",[Ue.Zoom]:()=>"u_zoom",[Ue.Time]:()=>"u_time",[Ue.Any]:Yr(i=>`(${i.join(" || ")})`),[Ue.All]:Yr(i=>`(${i.join(" && ")})`),[Ue.Not]:Yr(([i])=>`(!${i})`),[Ue.Equal]:Yr(([i,e])=>`(${i} == ${e})`),[Ue.NotEqual]:Yr(([i,e])=>`(${i} != ${e})`),[Ue.GreaterThan]:Yr(([i,e])=>`(${i} > ${e})`),[Ue.GreaterThanOrEqualTo]:Yr(([i,e])=>`(${i} >= ${e})`),[Ue.LessThan]:Yr(([i,e])=>`(${i} < ${e})`),[Ue.LessThanOrEqualTo]:Yr(([i,e])=>`(${i} <= ${e})`),[Ue.Multiply]:Yr(i=>`(${i.join(" * ")})`),[Ue.Divide]:Yr(([i,e])=>`(${i} / ${e})`),[Ue.Add]:Yr(i=>`(${i.join(" + ")})`),[Ue.Subtract]:Yr(([i,e])=>`(${i} - ${e})`),[Ue.Clamp]:Yr(([i,e,t])=>`clamp(${i}, ${e}, ${t})`),[Ue.Mod]:Yr(([i,e])=>`mod(${i}, ${e})`),[Ue.Pow]:Yr(([i,e])=>`pow(${i}, ${e})`),[Ue.Abs]:Yr(([i])=>`abs(${i})`),[Ue.Floor]:Yr(([i])=>`floor(${i})`),[Ue.Ceil]:Yr(([i])=>`ceil(${i})`),[Ue.Round]:Yr(([i])=>`floor(${i} + 0.5)`),[Ue.Sin]:Yr(([i])=>`sin(${i})`),[Ue.Cos]:Yr(([i])=>`cos(${i})`),[Ue.Atan]:Yr(([i,e])=>e!==void 0?`atan(${i}, ${e})`:`atan(${i})`),[Ue.Sqrt]:Yr(([i])=>`sqrt(${i})`),[Ue.Match]:Yr(i=>{const e=i[0],t=i[i.length-1];let r=null;for(let n=i.length-3;n>=1;n-=2){const s=i[n],o=i[n+1];r=`(${e} == ${s} ? ${o} : ${r||t})`}return r}),[Ue.Between]:Yr(([i,e,t])=>`(${i} >= ${e} && ${i} <= ${t})`),[Ue.Interpolate]:Yr(([i,e,...t])=>{let r="";for(let n=0;n<t.length-2;n+=2){const s=t[n],o=r||t[n+1],a=t[n+2],l=t[n+3];let u;i===Im(1)?u=`(${e} - ${s}) / (${a} - ${s})`:u=`(pow(${i}, (${e} - ${s})) - 1.0) / (pow(${i}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return r}),[Ue.Case]:Yr(i=>{const e=i[i.length-1];let t=null;for(let r=i.length-3;r>=0;r-=2){const n=i[r],s=i[r+1];t=`(${n} ? ${s} : ${t||e})`}return t}),[Ue.In]:Yr(([i,...e],t)=>{const r=Sst("in",t),n=[];for(let s=0;s<e.length;s+=1)n.push(`  if (inputValue == ${e[s]}) { return true; }`);return t.functions[r]=`bool ${r}(float inputValue) {
${n.join(`
`)}
  return false;
}`,`${r}(${i})`}),[Ue.Array]:Yr(i=>`vec${i.length}(${i.join(", ")})`),[Ue.Color]:Yr(i=>{if(i.length===1)return`vec4(vec3(${i[0]} / 255.0), 1.0)`;if(i.length===2)return`(${i[1]} * vec4(vec3(${i[0]} / 255.0), 1.0))`;const e=i.slice(0,3).map(r=>`${r} / 255.0`);return i.length===3?`vec4(${e.join(", ")}, 1.0)`:`(${i[3]} * vec4(${e.join(", ")}, 1.0))`}),[Ue.Band]:Yr(([i,e,t],r)=>{if(!(CD in r.functions)){let n="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const u=`${Wi.TILE_TEXTURE_ARRAY}[${a}]`;n+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[CD]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${Wi.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${Wi.TEXTURE_PIXEL_HEIGHT};
${n}
}`}return`${CD}(${i}, ${e??"0.0"}, ${t??"0.0"})`}),[Ue.Palette]:(i,e)=>{const[t,...r]=e.args,n=r.length,s=new Uint8Array(n*4);for(let u=0;u<r.length;u++){const c=r[u].value,h=Ku(c),d=u*4;s[d]=h[0],s[d+1]=h[1],s[d+2]=h[2],s[d+3]=h[3]*255}i.paletteTextures||(i.paletteTextures=[]);const o=`${YEe}[${i.paletteTextures.length}]`,a=new ost(o,s);i.paletteTextures.push(a);const l=VO(t,wt,i);return`texture2D(${o}, vec2((${l} + 0.5) / ${n}.0, 0.5))`}};function VO(i,e,t){if(i instanceof awe){const r=Dst[i.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(i.operator)}`);return r(t,i,e)}if((i.type&wt)>0)return Im(i.value);if((i.type&Dn)>0)return i.value.toString();if((i.type&Ys)>0)return zh(i.value.toString());if((i.type&an)>0)return fS(i.value);if((i.type&po)>0)return AA(i.value);if((i.type&qu)>0)return Cst(i.value);throw new Error(`Unexpected expression ${i.value} (expected type ${Ks(e)})`)}function Mst(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const p0=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;

// this used to produce an alpha-premultiplied color from a texture
vec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {
  vec4 color = texture2D(sampler, texCoord);
  return vec4(color.rgb * color.a, color.a);
}
`,m0=Mst();class XEe{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Im(m0["circle-radius"])} + ${Im(m0["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=fS(m0["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Im(m0["stroke-width"]),this.strokeColorExpression_=fS(m0["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=zh("round"),this.strokeJoinExpression_=zh("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=fS(m0["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e){return this.uniforms_.push(e),this}addAttribute(e){return this.attributes_.push(e),this}addVarying(e,t,r){return this.varyings_.push({name:e,type:t,expression:r}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}addFragmentShaderFunction(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}getSymbolVertexShader(){return this.hasSymbol_?`${p0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_prop_hitColor = a_prop_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${p0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${p0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${ame} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_prop_hitColor = a_prop_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${p0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${ame}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${zh("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${zh("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${zh("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${zh("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  gl_FragColor = color * smoothstep(0.5, -0.5, distance);
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${p0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_prop_hitColor = a_prop_hitColor;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${p0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}}const Lu={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},Lst=["#00f","#0ff","#0f0","#ff0","#f00"];class Rst extends Dv{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(Lu.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:Lst),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";typeof r=="string"?this.weightFunction_=function(n){return n.get(r)}:this.weightFunction_=r,this.setRenderOrder(null)}getBlur(){return this.get(Lu.BLUR)}getGradient(){return this.get(Lu.GRADIENT)}getRadius(){return this.get(Lu.RADIUS)}handleGradientChanged_(){this.gradient_=Ist(this.getGradient())}setBlur(e){this.set(Lu.BLUR,e)}setGradient(e){this.set(Lu.GRADIENT,e)}setRadius(e){this.set(Lu.RADIUS,e)}createRenderer(){const e=new XEe().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new qEe(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const r=this.weightFunction_(t);return r!==void 0?Ti(r,0,1):1}}],uniforms:{u_size:()=>(this.get(Lu.RADIUS)+this.get(Lu.BLUR))*2,u_blurSlope:()=>this.get(Lu.RADIUS)/Math.max(1,this.get(Lu.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function Ist(i){const r=kn(1,256),n=r.createLinearGradient(0,0,1,256),s=1/(i.length-1);for(let o=0,a=i.length;o<a;++o)n.addColorStop(o*s,i[o]);return r.fillStyle=n,r.fillRect(0,0,1,256),r.canvas}const Ost=Rst;class Pst extends hg{constructor(e){e=e||{},super(e)}}class ZEe extends FO{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,s=n.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=Bs(l,kl(t.extent,n.projection))),!a[pn.ANIMATING]&&!a[pn.INTERACTING]&&!ih(l))if(o){const u=n.projection,c=o.getImage(l,s,r,u);c&&(this.loadImage(c)?this.image_=c:c.getState()===$t.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),n=Zn(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Al(s,n))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=wi(o),u=Math.floor(a.width*((n[0]-o[0])/l));if(u<0||u>=a.width)return null;const c=Sn(o),h=Math.floor(a.height*((o[3]-n[1])/c));return h<0||h>=a.height?null:this.getImageData(a,u,h)}renderFrame(e,t){const r=this.image_,n=r.getExtent(),s=r.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,h=e.viewState,d=h.center,p=h.resolution,m=c*o/(p*l),g=c*a/(p*l);this.prepareContainer(e,t);const v=this.context.canvas.width,b=this.context.canvas.height,_=this.getRenderContext(e);let E=!1,C=!0;if(u.extent){const I=kl(u.extent,h.projection);C=Cn(I,e.extent),E=C&&!Io(I,e.extent),E&&this.clipUnrotated(_,e,I)}const T=r.getImage(),D=Pl(this.tempTransform,v/2,b/2,m,g,0,l*(n[0]-d[0])/o,l*(d[1]-n[3])/a);this.renderedResolution=a*c/l;const M=T.width*D[0],A=T.height*D[3];if(this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1),this.preRender(_,e),C&&M>=.5&&A>=.5){const I=D[4],P=D[5],U=u.opacity;U!==1&&(_.save(),_.globalAlpha=U),_.drawImage(T,0,0,+T.width,+T.height,I,P,M,A),U!==1&&_.restore()}return this.postRender(this.context,e),E&&_.restore(),_.imageSmoothingEnabled=!0,this.container}}class kA extends Pst{constructor(e){super(e)}createRenderer(){return new ZEe(this)}getData(e){return super.getData(e)}}const If={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class KEe extends hg{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(If.PRELOAD)}setPreload(e){this.set(If.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(If.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(If.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class JEe extends FO{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=ha(),this.tmpTileRange_=new TA(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==tt.LOADED||r==tt.EMPTY||r==tt.ERROR&&!n}getTile(e,t,r,n){const s=n.pixelRatio,o=n.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,r,s,o);return u.getState()==tt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),n=Zn(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Al(s,n))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,u=r.getRenderSource(),c=u.getTileGridForProjection(l.projection),h=u.getTilePixelRatio(t.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){const p=c.getTileCoordForCoordAndZ(n,d),m=u.getTile(d,p[1],p[2],o,a);if(!(m instanceof kw||m instanceof Yy)||m instanceof Yy&&m.getState()===tt.EMPTY)return null;if(m.getState()!==tt.LOADED)continue;const g=c.getOrigin(d),v=On(c.getTileSize(d)),b=c.getResolution(d),_=Math.floor(h*((n[0]-g[0])/b-p[1]*v[0])),E=Math.floor(h*((g[1]-n[1])/b-p[2]*v[1])),C=Math.round(h*u.getGutterForProjection(l.projection));return this.getImageData(m.getImage(),_+C,E+C)}return null}loadedTileCallback(e,t,r){return this.isDrawableTile(r)?super.loadedTileCallback(e,t,r):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex],n=e.viewState,s=n.projection,o=n.resolution,a=n.center,l=n.rotation,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),p=h.getTileGridForProjection(s),m=p.getZForResolution(o,h.zDirection),g=p.getResolution(m);let v=e.extent;const b=e.viewState.resolution,_=h.getTilePixelRatio(u);this.prepareContainer(e,t);const E=this.context.canvas.width,C=this.context.canvas.height,T=r.extent&&kl(r.extent);T&&(v=Bs(v,kl(r.extent)));const D=g*E/2/_,M=g*C/2/_,A=[a[0]-D,a[1]-M,a[0]+D,a[1]+M],I=p.getTileRangeForExtentAndZ(v,m),P={};P[m]={};const U=this.createLoadedTileFinder(h,s,P),K=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;const F=l?KM(n.center,b,l,e.size):void 0;for(let de=I.minX;de<=I.maxX;++de)for(let te=I.minY;te<=I.maxY;++te){if(l&&!p.tileCoordIntersectsViewport([m,de,te],F))continue;const z=this.getTile(m,de,te,e);if(this.isDrawableTile(z)){const $e=Nt(this);if(z.getState()==tt.LOADED){P[m][z.tileCoord.toString()]=z;let Xe=z.inTransition($e);Xe&&r.opacity!==1&&(z.endTransition($e),Xe=!1),!this.newTiles_&&(Xe||!this.renderedTiles.includes(z))&&(this.newTiles_=!0)}if(z.getAlpha($e,e.time)===1)continue}const ne=p.getTileCoordChildTileRange(z.tileCoord,L,K);let ve=!1;ne&&(ve=U(m+1,ne)),ve||p.forEachTileCoordParentTileRange(z.tileCoord,U,L,K)}const $=g/o*u/_,H=this.getRenderContext(e);Pl(this.tempTransform,E/2,C/2,$,$,0,-E/2,-C/2),T&&this.clipUnrotated(H,e,T),h.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e),this.renderedTiles.length=0;let V=Object.keys(P).map(Number);V.sort(Bc);let J,ee,ie;r.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?V=V.reverse():(J=[],ee=[]);for(let de=V.length-1;de>=0;--de){const te=V[de],z=h.getTilePixelSize(te,u,s),ve=p.getResolution(te)/g,$e=z[0]*ve*$,Xe=z[1]*ve*$,ot=p.getTileCoordForCoordAndZ(ec(A),te),Be=p.getTileCoordExtent(ot),He=Zn(this.tempTransform,[_*(Be[0]-A[0])/g,_*(A[3]-Be[3])/g]),st=_*h.getGutterForProjection(s),xt=P[te];for(const kt in xt){const Tt=xt[kt],Ei=Tt.tileCoord,si=ot[1]-Ei[1],ur=Math.round(He[0]-(si-1)*$e),Ve=ot[2]-Ei[2],fe=Math.round(He[1]-(Ve-1)*Xe),oe=Math.round(He[0]-si*$e),se=Math.round(He[1]-Ve*Xe),pe=ur-oe,R=fe-se,j=m===te,Z=j&&Tt.getAlpha(Nt(this),e.time)!==1;let Q=!1;if(!Z)if(J){ie=[oe,se,oe+pe,se,oe+pe,se+R,oe,se+R];for(let ge=0,be=J.length;ge<be;++ge)if(m!==te&&te<ee[ge]){const Ce=J[ge];Cn([oe,se,oe+pe,se+R],[Ce[0],Ce[3],Ce[4],Ce[7]])&&(Q||(H.save(),Q=!0),H.beginPath(),H.moveTo(ie[0],ie[1]),H.lineTo(ie[2],ie[3]),H.lineTo(ie[4],ie[5]),H.lineTo(ie[6],ie[7]),H.moveTo(Ce[6],Ce[7]),H.lineTo(Ce[4],Ce[5]),H.lineTo(Ce[2],Ce[3]),H.lineTo(Ce[0],Ce[1]),H.clip())}J.push(ie),ee.push(te)}else H.clearRect(oe,se,pe,R);this.drawTileImage(Tt,e,oe,se,pe,R,st,j),J&&!Z?(Q&&H.restore(),this.renderedTiles.unshift(Tt)):this.renderedTiles.push(Tt),this.updateUsedTiles(e.usedTiles,h,Tt)}}return this.renderedRevision=d,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!hu(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(e,h,p,u,s,v,m,c.getPreload()),this.scheduleExpireCache(e,h),this.postRender(this.context,e),r.extent&&H.restore(),H.imageSmoothingEnabled=!0,this.container}drawTileImage(e,t,r,n,s,o,a,l){const u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(t),h=Nt(this),d=t.layerStatesArray[t.layerIndex],p=d.opacity*(l?e.getAlpha(h,t.time):1),m=p!==c.globalAlpha;m&&(c.save(),c.globalAlpha=p),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,n,s,o),m&&c.restore(),p!==d.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const r=(function(n,s,o){const a=Nt(n);a in o.usedTiles&&n.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(r)}}updateUsedTiles(e,t,r){const n=Nt(t);n in e||(e[n]={}),e[n][r.getKey()]=!0}manageTilePyramid(e,t,r,n,s,o,a,l,u){const c=Nt(t);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=e.tileQueue,p=r.getMinZoom(),m=e.viewState.rotation,g=m?KM(e.viewState.center,e.viewState.resolution,m,e.size):void 0;let v=0,b,_,E,C,T,D;for(D=p;D<=a;++D)for(_=r.getTileRangeForExtentAndZ(o,D,_),E=r.getResolution(D),C=_.minX;C<=_.maxX;++C)for(T=_.minY;T<=_.maxY;++T)m&&!r.tileCoordIntersectsViewport([D,C,T],g)||(a-D<=l?(++v,b=t.getTile(D,C,T,n,s),b.getState()==tt.IDLE&&(h[b.getKey()]=!0,d.isKeyQueued(b.getKey())||d.enqueue([b,c,r.getTileCoordCenter(b.tileCoord),E])),u!==void 0&&u(b)):t.useTile(D,C,T,s));t.updateCacheSize(v,s)}}class Tx extends KEe{constructor(e){super(e)}createRenderer(){return new JEe(this)}}class WO extends oA{constructor(e,t,r,n,s){const o=s!==void 0?$t.IDLE:$t.LOADED;super(e,t,r,o),this.loader_=s!==void 0?s:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=$t.ERROR):this.state=$t.LOADED,this.changed()}load(){this.state==$t.IDLE&&(this.state=$t.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}function NC(i){return Array.isArray(i)?Math.min(...i):i}class Fst extends ZEe{constructor(e){super(e),this.vectorRenderer_=new IEe(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=ss(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const t=Zn(this.coordinateToVectorPixelTransform_,Zn(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const t=e.pixelRatio,r=e.viewState,n=r.resolution,s=e.viewHints,o=this.vectorRenderer_;let a=e.extent;this.layerImageRatio_!==1&&(a=a.slice(0),CI(a,this.layerImageRatio_));const l=wi(a)/n,u=Sn(a)/n;if(!s[pn.ANIMATING]&&!s[pn.INTERACTING]&&!ih(a)){o.useContainer(null,null);const c=o.context,h=e.layerStatesArray[e.layerIndex],d=Object.assign({},h,{opacity:1}),p=Object.assign({},e,{extent:a,size:[l,u],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),m=this.getLayer().getDeclutter();m&&(p.declutter={[m]:new ZI(9)});let g=!0;const v=new WO(a,n,t,c.canvas,function(b){o.prepareFrame(p)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(p,null)&&(o.renderDeclutter(p),o.renderDeferred(p),g=!1),b())});v.addEventListener(Bt.CHANGE,()=>{if(v.getState()!==$t.LOADED)return;this.image_=g?null:v;const b=v.getPixelRatio(),_=NC(v.getResolution())*t/b;this.renderedResolution=_,this.coordinateToVectorPixelTransform_=Pl(this.coordinateToVectorPixelTransform_,l/2,u/2,1/_,-1/_,0,-r.center[0],-r.center[1])}),v.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,t,r,n,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,n,s):super.forEachFeatureAtCoordinate(e,t,r,n,s)}}class Nst extends Dv{constructor(e){e=e||{};const t=Object.assign({},e);delete t.imageRatio,super(t),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Fst(this)}}const $st=Nst,Bst={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},pme={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class jst extends JEe{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=ss(),this.tileClipContexts_=null}prepareTile(e,t,r){let n;const s=e.getState();return(s===tt.LOADED||s===tt.ERROR)&&(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e)&&(n=!0)),n}getTile(e,t,r,n){const s=n.pixelRatio,o=n.viewState,a=o.resolution,l=o.projection,u=this.getLayer(),c=u.getSource().getTile(e,t,r,s,l),h=n.viewHints,d=!(h[pn.ANIMATING]||h[pn.INTERACTING]);return(d||!c.wantedResolution)&&(c.wantedResolution=a),this.prepareTile(c,s,l)&&(d||Date.now()-n.time<8)&&u.getRenderMode()!=="vector"&&this.renderTileImage_(c,n),super.getTile(e,t,r,n)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?Nt(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const n=this.getLayer(),s=n.getRevision(),o=n.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(n);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const u=n.getSource(),c=!!n.getDeclutter(),h=u.getTileGrid(),p=u.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),m=u.getSourceTiles(t,r,e),g=Nt(n);delete e.hitDetectionImageData[g],e.executorGroups[g]=[],l.dirty=!1;for(let v=0,b=m.length;v<b;++v){const _=m[v];if(_.getState()!=tt.LOADED)continue;const E=_.tileCoord,C=h.getTileCoordExtent(E),T=Bs(p,C),D=il(T,n.getRenderBuffer()*a,this.tmpExtent),M=hu(C,T)?null:D,A=new SEe(0,T,a,t),I=LC(a,t),P=function($,H){let V;const J=$.getStyleFunction()||n.getStyleFunction();if(J&&(V=J($,a)),V){const ee=this.renderFeature($,I,V,A,c,H);l.dirty=l.dirty||ee}},U=_.getFeatures();o&&o!==l.renderedRenderOrder&&U.sort(o);for(let $=0,H=U.length;$<H;++$){const V=U[$];(!M||Cn(M,V.getGeometry().getExtent()))&&P.call(this,V,$)}const K=A.finish(),L=n.getRenderMode()!=="vector"&&c&&m.length===1?null:T,F=new TEe(L,a,t,u.getOverlaps(),K,n.getRenderBuffer(),!0);e.executorGroups[g].push(F)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,r,n,s){const o=t.viewState.resolution,a=t.viewState.rotation;r=r??0;const l=this.getLayer(),c=l.getSource().getTileGridForProjection(t.viewState.projection),h=Lo([e]);il(h,o*r,h);const d={},p=function(v,b,_){let E=v.getId();E===void 0&&(E=Nt(v));const C=d[E];if(C){if(C!==!0&&_<C.distanceSq){if(_===0)return d[E]=!0,s.splice(s.lastIndexOf(C),1),n(v,l,b);C.geometry=b,C.distanceSq=_}}else{if(_===0)return d[E]=!0,n(v,l,b);s.push(d[E]={feature:v,layer:l,geometry:b,distanceSq:_,callback:n})}},m=this.renderedTiles;let g;for(let v=0,b=m.length;!g&&v<b;++v){const _=m[v],E=c.getTileCoordExtent(_.wrappedTileCoord);if(!Cn(E,h))continue;const C=Nt(l),T=[_.executorGroups[C]],D=l.getDeclutter();T.some(M=>{const A=D?t.declutter[D].all().map(I=>I.value):null;for(let I=0,P=M.length;I<P;++I)if(g=M[I].forEachFeatureAtCoordinate(e,o,a,r,p,A),g)return!0})}return g}getFeatures(e){return new Promise((t,r)=>{const n=this.getLayer(),s=Nt(n),o=n.getSource(),a=this.renderedProjection,l=a.getExtent(),u=this.renderedResolution,c=o.getTileGridForProjection(a),h=Zn(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(h,u);let p;for(let E=0,C=this.renderedTiles.length;E<C;++E)if(d.toString()===this.renderedTiles[E].tileCoord.toString()){if(p=this.renderedTiles[E],p.getState()===tt.LOADED){const T=c.getTileCoordExtent(p.tileCoord);o.getWrapX()&&a.canWrapX()&&!Io(l,T)&&JT(h,a);break}p=void 0}if(!p||p.loadingSourceTiles>0){t([]);return}const m=c.getTileCoordExtent(p.wrappedTileCoord),g=ec(m),v=[(h[0]-g[0])/u,(g[1]-h[1])/u],b=p.getSourceTiles().reduce(function(E,C){return E.concat(C.getFeatures())},[]);let _=p.hitDetectionImageData[s];if(!_){const E=On(c.getTileSize(c.getZForResolution(u,o.zDirection))),C=this.renderedRotation_,T=[this.getRenderTransform(c.getTileCoordCenter(p.wrappedTileCoord),u,0,Cl,E[0]*Cl,E[1]*Cl,0)];_=kEe(E,T,b,n.getStyleFunction(),c.getTileCoordExtent(p.wrappedTileCoord),p.getReplayState(n).renderedResolution,C),p.hitDetectionImageData[s]=_}t(DEe(v,b,_))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,n=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,o=!(s[pn.ANIMATING]||s[pn.INTERACTING]),a=this.renderedTiles;for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.executorGroups[Nt(this.getLayer())],d=this.getLayer().getDeclutter();if(h)for(let p=h.length-1;p>=0;--p)h[p].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(c,e),e.viewState.rotation,o,MC,d?e.declutter[d]:void 0)}r.globalAlpha=n}renderDeferredInternal(e){const r=this.renderedTiles.reduce((a,l,u)=>(l.executorGroups[Nt(this.getLayer())].forEach(c=>a.push({executorGroup:c,index:u})),a),[]),n=r.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,l=r.length;a<l;++a){const u=r[a].executorGroup.getDeferredZIndexContexts();for(const c in u)s[c]=!0}Object.keys(s).sort(Bc).map(Number).forEach(a=>{n.forEach((l,u)=>{l[a]&&(l[a].forEach(c=>{const{executorGroup:h,index:d}=r[u],p=h.getRenderedContext(),m=p.globalAlpha;p.globalAlpha=this.renderedOpacity_;const g=this.tileClipContexts_[d];g&&g.draw(p),c.draw(p),g&&p.restore(),p.globalAlpha=m,c.clear()}),l[a].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,n=t.viewState,s=n.center,o=n.resolution,a=n.rotation,l=t.size,u=Math.round(l[0]*r),c=Math.round(l[1]*r),d=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),p=e.tileCoord,m=d.getTileCoordExtent(e.wrappedTileCoord),g=d.getTileCoordExtent(p,this.tmpExtent)[0]-m[0];return kv(M_(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,o,a,r,u,c,g))}postRender(e,t){var C;const r=t.viewHints,n=!(r[pn.ANIMATING]||r[pn.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),u=l?pme[o].filter(T=>!MC.includes(T)):pme[o],c=t.viewState,h=c.rotation,d=s.getSource(),m=d.getTileGridForProjection(c.projection).getZForResolution(c.resolution,d.zDirection),g=this.renderedTiles,v=[],b=[],_=[];let E=!0;for(let T=g.length-1;T>=0;--T){const D=g[T];E=E&&!D.getReplayState(s).dirty;const M=D.executorGroups[Nt(s)].filter(F=>F.hasExecutors(u));if(M.length===0)continue;const A=this.getTileRenderTransform(D,t),I=D.tileCoord[0];let P=!1;const U=M[0].getClipCoords(A);let K=e,L;if(U){L=new PO,K=L.getContext();for(let F=0,$=v.length;F<$;++F)if(m!==I&&I<b[F]){const H=v[F];Cn([U[0],U[3],U[4],U[7]],[H[0],H[3],H[4],H[7]])&&(P||(K.save(),P=!0),K.beginPath(),K.moveTo(U[0],U[1]),K.lineTo(U[2],U[3]),K.lineTo(U[4],U[5]),K.lineTo(U[6],U[7]),K.moveTo(H[6],H[7]),K.lineTo(H[4],H[5]),K.lineTo(H[2],H[3]),K.lineTo(H[0],H[1]),K.clip())}v.push(U),b.push(I)}for(let F=0,$=M.length;F<$;++F)M[F].execute(e,[e.canvas.width,e.canvas.height],A,h,n,u,(C=t.declutter)==null?void 0:C[l]);P&&(K===e?K.restore():_[T]=L)}e.globalAlpha=a,this.ready=E,this.tileClipContexts_=_,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,n,s,o){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,u=r.length;l<u;++l)a=RC(n,e,r[l],t,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=RC(n,e,r,t,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),n=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==n}renderTileImage_(e,t){const r=this.getLayer(),n=e.getReplayState(r),s=r.getRevision(),o=e.executorGroups[Nt(r)];n.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],u=r.getSource();let c=t.pixelRatio;const d=t.viewState.projection,p=u.getTileGridForProjection(d),m=p.getResolution(e.tileCoord[0]),g=t.pixelRatio/e.wantedResolution*m,v=p.getResolution(l),b=e.getContext(r);c=Math.round(Math.max(c,g/c));const _=u.getTilePixelSize(l,c,d);b.canvas.width=_[0],b.canvas.height=_[1];const E=c/g;if(E!==1){const M=tL(this.tmpTransform_);M_(M,E,E),b.setTransform.apply(b,M)}const C=p.getTileCoordExtent(a,this.tmpExtent),T=g/v,D=tL(this.tmpTransform_);M_(D,T,-T),NI(D,-C[0],-C[3]);for(let M=0,A=o.length;M<A;++M)o[M].execute(b,[b.canvas.width*E,b.canvas.height*E],D,0,!0,Bst[r.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}class YO extends Dv{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const r=e.renderMode||"hybrid";Hi(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new jst(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(If.PRELOAD)}getUseInterimTilesOnError(){return this.get(If.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(If.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(If.USE_INTERIM_TILES_ON_ERROR,e)}}function Ii(i,e,t){const r=nO();return r.style=i.style,kst(e,t,r,i)}function mme(i){const e=Ku(i),t=e[0]*256,r=e[1],n=e[2]*256,s=Math.round(e[3]*255);return[t+r,n+s]}const zst=`vec4 unpackColor(vec2 packedColor) {
  return fract(packedColor[1] / 256.0) * vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    1.0
  );
}`;function QEe(i){return i===an||i===qu?2:i===po?4:1}function TD(i){const e=QEe(i);return e>1?`vec${e}`:"float"}function $C(i){return(JSON.stringify(i).split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0),0)>>>0).toString()}function XO(i,e,t,r){if(`${r}radius`in i&&r!=="icon-"){let n=Ii(t,i[`${r}radius`],wt);if(`${r}radius2`in i){const s=Ii(t,i[`${r}radius2`],wt);n=`max(${n}, ${s})`}`${r}stroke-width`in i&&(n=`(${n} + ${Ii(t,i[`${r}stroke-width`],wt)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${n} * 2. + 0.5)`)}if(`${r}scale`in i){const n=Ii(t,i[`${r}scale`],qu);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${n}`)}`${r}displacement`in i&&e.setSymbolOffsetExpression(Ii(t,i[`${r}displacement`],po)),`${r}rotation`in i&&e.setSymbolRotationExpression(Ii(t,i[`${r}rotation`],wt)),`${r}rotate-with-view`in i&&e.setSymbolRotateWithView(!!i[`${r}rotate-with-view`])}function e2e(i,e,t,r,n){let s="vec4(0.)";if(e!==null&&(s=e),t!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${i})`;s=`mix(${t}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${i}))`;let a=`${s} * ${o}`;return n!==null&&(a=`${a} * ${n}`),a}function ZO(i,e,t,r,n){const s=new Image;let o;return s.crossOrigin=i[`${r}cross-origin`]===void 0?"anonymous":i[`${r}cross-origin`],s.src=i[`${r}src`],s.complete&&s.width&&s.height?o=AA([s.width,s.height]):(t[`u_texture${n}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`vec2 u_texture${n}_size`),o=`u_texture${n}_size`),t[`u_texture${n}`]=s,e.addUniform(`sampler2D u_texture${n}`),o}function KO(i,e,t,r,n){let s=Ii(t,i[`${e}offset`],po);if(`${e}offset-origin`in i)switch(i[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${n} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${n} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${n} - ${s}`;break}return s}function Ust(i,e,t,r,n){n.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,XO(i,e,r,"circle-");let s=null;"circle-opacity"in i&&(s=Ii(n,i["circle-opacity"],wt));let o="coordsPx";"circle-scale"in i&&(o=`coordsPx / ${Ii(n,i["circle-scale"],qu)}`);let a=null;"circle-fill-color"in i&&(a=Ii(n,i["circle-fill-color"],an));let l=null;"circle-stroke-color"in i&&(l=Ii(n,i["circle-stroke-color"],an));let u=Ii(n,i["circle-radius"],wt),c=null;"circle-stroke-width"in i&&(c=Ii(n,i["circle-stroke-width"],wt),u=`(${u} + ${c} * 0.5)`);const h=`circleDistanceField(${o}, ${u})`,d=e2e(h,a,l,c,s);e.setSymbolColorExpression(d)}function Gst(i,e,t,r,n){n.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,n.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,n.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,XO(i,e,r,"shape-");let s=null;"shape-opacity"in i&&(s=Ii(n,i["shape-opacity"],wt));let o="coordsPx";"shape-scale"in i&&(o=`coordsPx / ${Ii(n,i["shape-scale"],qu)}`);let a=null;"shape-fill-color"in i&&(a=Ii(n,i["shape-fill-color"],an));let l=null;"shape-stroke-color"in i&&(l=Ii(n,i["shape-stroke-color"],an));let u=null;"shape-stroke-width"in i&&(u=Ii(n,i["shape-stroke-width"],wt));const c=Ii(n,i["shape-points"],wt);let h="0.";"shape-angle"in i&&(h=Ii(n,i["shape-angle"],wt));let d,p=Ii(n,i["shape-radius"],wt);if(u!==null&&(p=`${p} + ${u} * 0.5`),"shape-radius2"in i){let g=Ii(n,i["shape-radius2"],wt);u!==null&&(g=`${g} + ${u} * 0.5`),d=`starDistanceField(${o}, ${c}, ${p}, ${g}, ${h})`}else d=`regularDistanceField(${o}, ${c}, ${p}, ${h})`;const m=e2e(d,a,l,u,s);e.setSymbolColorExpression(m)}function qst(i,e,t,r,n){let s="vec4(1.0)";"icon-color"in i&&(s=Ii(n,i["icon-color"],an)),"icon-opacity"in i&&(s=`${s} * ${Ii(n,i["icon-opacity"],wt)}`);const o=$C(i["icon-src"]),a=ZO(i,e,t,"icon-",o);if(e.setSymbolColorExpression(`${s} * samplePremultiplied(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in i&&"icon-height"in i&&e.setSymbolSizeExpression(`vec2(${Ii(r,i["icon-width"],wt)}, ${Ii(r,i["icon-height"],wt)})`),"icon-offset"in i&&"icon-size"in i){const l=Ii(r,i["icon-size"],po),u=e.getSymbolSizeExpression();e.setSymbolSizeExpression(l);const c=KO(i,"icon-",r,"v_quadSizePx",l);e.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${l})) / (${u}).xyxy`)}if(XO(i,e,r,"icon-"),"icon-anchor"in i){const l=Ii(r,i["icon-anchor"],po);let u="1.0";"icon-scale"in i&&(u=Ii(r,i["icon-scale"],qu));let c;i["icon-anchor-x-units"]==="pixels"&&i["icon-anchor-y-units"]==="pixels"?c=`${l} * ${u}`:i["icon-anchor-x-units"]==="pixels"?c=`${l} * vec2(vec2(${u}).x, v_quadSizePx.y)`:i["icon-anchor-y-units"]==="pixels"?c=`${l} * vec2(v_quadSizePx.x, vec2(${u}).x)`:c=`${l} * v_quadSizePx`;let h=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in i)switch(i["icon-anchor-origin"]){case"top-right":h=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":h=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":h=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${h}`)}}function Hst(i,e,t,r,n){if("stroke-color"in i&&e.setStrokeColorExpression(Ii(n,i["stroke-color"],an)),"stroke-pattern-src"in i){const s=$C(i["stroke-pattern-src"]),o=ZO(i,e,t,"stroke-pattern-",s);let a=o,l="vec2(0.)";"stroke-pattern-offset"in i&&"stroke-pattern-size"in i&&(a=Ii(n,i["stroke-pattern-size"],po),l=KO(i,"stroke-pattern-",n,o,a));let u="0.";"stroke-pattern-spacing"in i&&(u=Ii(n,i["stroke-pattern-spacing"],wt)),n.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return samplePremultiplied(texture, texCoord);
}`;const c=`u_texture${s}`;let h="1.";"stroke-color"in i&&(h=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${h} * sampleStrokePattern(${c}, ${o}, ${l}, ${a}, ${u}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in i&&e.setStrokeWidthExpression(Ii(r,i["stroke-width"],wt)),"stroke-offset"in i&&e.setStrokeOffsetExpression(Ii(r,i["stroke-offset"],wt)),"stroke-line-cap"in i&&e.setStrokeCapExpression(Ii(r,i["stroke-line-cap"],Ys)),"stroke-line-join"in i&&e.setStrokeJoinExpression(Ii(r,i["stroke-line-join"],Ys)),"stroke-miter-limit"in i&&e.setStrokeMiterLimitExpression(Ii(r,i["stroke-miter-limit"],wt)),"stroke-line-dash"in i){n.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${zh("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${zh("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let s=i["stroke-line-dash"].map(p=>Ii(n,p,wt));s.length%2===1&&(s=[...s,...s]);let o="0.";"stroke-line-dash-offset"in i&&(o=Ii(r,i["stroke-line-dash-offset"],wt));const l=`dashDistanceField_${$C(i["stroke-line-dash"])}`,u=s.map((p,m)=>`float dashLength${m} = ${p};`),c=s.map((p,m)=>`dashLength${m}`).join(" + ");let h="0.",d=`getSingleDashDistance(distance, radius, ${h}, dashLength0, totalDashLength, capType)`;for(let p=2;p<s.length;p+=2)h=`${h} + dashLength${p-2} + dashLength${p-1}`,d=`min(${d}, getSingleDashDistance(distance, radius, ${h}, dashLength${p}, totalDashLength, capType))`;n.functions[l]=`float ${l}(float distance, float radius, float capType) {
  ${u.join(`
  `)}
  float totalDashLength = ${c};
  return ${d};
}`,e.setStrokeDistanceFieldExpression(`${l}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}function Vst(i,e,t,r,n){if("fill-color"in i&&e.setFillColorExpression(Ii(n,i["fill-color"],an)),"fill-pattern-src"in i){const s=$C(i["fill-pattern-src"]),o=ZO(i,e,t,"fill-pattern-",s);let a=o,l="vec2(0.)";"fill-pattern-offset"in i&&"fill-pattern-size"in i&&(a=Ii(n,i["fill-pattern-size"],po),l=KO(i,"fill-pattern-",n,o,a)),n.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);
}`;const u=`u_texture${s}`;let c="1.";"fill-color"in i&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${u}, ${o}, ${l}, ${a}, pxOrigin, pxPos)`)}}function Wst(i){const e={inFragmentShader:!1,properties:{},variables:{},functions:{},style:i},t={inFragmentShader:!0,variables:e.variables,properties:{},functions:{},style:i},r=new XEe,n={};if("icon-src"in i?qst(i,r,n,e,t):"shape-points"in i?Gst(i,r,n,e,t):"circle-radius"in i&&Ust(i,r,n,e,t),Hst(i,r,n,e,t),Vst(i,r,n,e,t),i.filter){const o=Ii(t,i.filter,Dn);r.setFragmentDiscardExpression(`!${o}`)}Object.keys(t.variables).forEach(function(o){const a=t.variables[o],l=HO(a.name);r.addUniform(`${TD(a.type)} ${l}`);let u;a.type===Ys?u=()=>FC(i.variables[a.name]):a.type===an?u=()=>mme([...Ku(i.variables[a.name]||"#eee")]):a.type===Dn?u=()=>i.variables[a.name]?1:0:u=()=>i.variables[a.name],n[l]=u}),Object.keys(t.properties).forEach(function(o){const a=t.properties[o];e.properties[o]||(e.properties[o]=a);let l=TD(a.type),u=`a_prop_${a.name}`;a.type===an&&(l="vec4",u=`unpackColor(${u})`,r.addVertexShaderFunction(zst)),r.addVarying(`v_prop_${a.name}`,l,u)}),Object.keys(e.properties).forEach(function(o){const a=e.properties[o];r.addAttribute(`${TD(a.type)} a_prop_${a.name}`)});const s=Object.keys(e.properties).map(function(o){const a=e.properties[o];let l;return a.evaluator?l=a.evaluator:a.type===Ys?l=u=>FC(u.get(a.name)):a.type===an?l=u=>mme([...Ku(u.get(a.name)||"#eee")]):a.type===Dn?l=u=>u.get(a.name)?1:0:l=u=>u.get(a.name),{name:a.name,size:QEe(a.type),callback:l}});for(const o in e.functions)r.addVertexShaderFunction(e.functions[o]);for(const o in t.functions)r.addFragmentShaderFunction(t.functions[o]);return{builder:r,attributes:s.reduce((o,a)=>({...o,[a.name]:{callback:a.callback,size:a.size}}),{}),uniforms:n}}class Yst extends hg{constructor(e){const t=Object.assign({},e);super(t),this.parseResult_=Wst(e.style),this.styleVariables_=e.style.variables||{},this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){const e=Object.keys(this.parseResult_.attributes).map(t=>({name:t,...this.parseResult_.attributes[t]}));return new qEe(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:e})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}const Xst=Yst;function gme(i,e){const t=`
    attribute vec2 ${dS.TEXTURE_COORD};
    uniform mat4 ${Wi.TILE_TRANSFORM};
    uniform float ${Wi.TEXTURE_PIXEL_WIDTH};
    uniform float ${Wi.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Wi.TEXTURE_RESOLUTION};
    uniform float ${Wi.TEXTURE_ORIGIN_X};
    uniform float ${Wi.TEXTURE_ORIGIN_Y};
    uniform float ${Wi.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${dS.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Wi.TEXTURE_ORIGIN_X} + ${Wi.TEXTURE_RESOLUTION} * ${Wi.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Wi.TEXTURE_ORIGIN_Y} - ${Wi.TEXTURE_RESOLUTION} * ${Wi.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Wi.TILE_TRANSFORM} * vec4(${dS.TEXTURE_COORD}, ${Wi.DEPTH}, 1.0);
    }
  `,r={...Ast(),inFragmentShader:!0,bandCount:e,style:i},n=[];if(i.color!==void 0){const h=Ii(r,i.color,an);n.push(`color = ${h};`)}if(i.contrast!==void 0){const h=Ii(r,i.contrast,wt);n.push(`color.rgb = clamp((${h} + 1.0) * color.rgb - (${h} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.exposure!==void 0){const h=Ii(r,i.exposure,wt);n.push(`color.rgb = clamp((${h} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.saturation!==void 0){const h=Ii(r,i.saturation,wt);n.push(`
      float saturation = ${h} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(i.gamma!==void 0){const h=Ii(r,i.gamma,wt);n.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${h}));`)}if(i.brightness!==void 0){const h=Ii(r,i.brightness,wt);n.push(`color.rgb = clamp(color.rgb + ${h}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(r.variables).length;if(o>1&&!i.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let h=0;h<o;++h){const d=r.variables[Object.keys(r.variables)[h]];if(!(d.name in i.variables))throw new Error(`Missing '${d.name}' in style variables`);const p=HO(d.name);s[p]=function(){let m=i.variables[d.name];return typeof m=="string"&&(m=FC(m)),m!==void 0?m:-9999999}}const a=Object.keys(s).map(function(h){return`uniform float ${h};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${Wi.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${YEe}[${r.paletteTextures.length}];`);const u=Object.keys(r.functions).map(function(h){return r.functions[h]}),c=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Wi.RENDER_EXTENT};
    uniform float ${Wi.TRANSITION_ALPHA};
    uniform float ${Wi.TEXTURE_PIXEL_WIDTH};
    uniform float ${Wi.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Wi.RESOLUTION};
    uniform float ${Wi.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Wi.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Wi.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Wi.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Wi.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Wi.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${n.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Wi.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:c,uniforms:s,paletteTextures:r.paletteTextures}}class BC extends KEe{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style;const r=e.cacheSize;delete e.cacheSize,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.cacheSize_=r,this.styleVariables_=this.style_.variables||{},this.addChangeListener(nn.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=gme(this.style_,this.getSourceBandCount_());return new Est(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}renderSources(e,t){const r=this.getRenderer();let n;for(let s=0,o=t.length;s<o;++s)this.renderedSource_=t[s],r.prepareFrame(e)&&(n=r.renderFrame(e));return n}render(e,t){this.rendered=!0;const r=e.viewState,n=this.getSources(e.extent,r.resolution);let s=!0;for(let a=0,l=n.length;a<l;++a){const u=n[a],c=u.getState();if(c=="loading"){const h=()=>{u.getState()=="ready"&&(u.removeEventListener("change",h),this.changed())};u.addEventListener("change",h)}s=s&&c=="ready"}const o=this.renderSources(e,n);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=r.resolution,o;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!n.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){this.styleVariables_=e.variables||{},this.style_=e;const t=gme(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}BC.prototype.dispose;const Zst=Object.freeze(Object.defineProperty({__proto__:null,Graticule:Tnt,Group:Fl,Heatmap:Ost,Image:kA,Layer:hg,Tile:Tx,Vector:hp,VectorImage:$st,VectorTile:YO,WebGLPoints:Xst,WebGLTile:BC},Symbol.toStringTag,{value:"Module"}));class DA extends GO{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),r=WEe(e)[0];this.forEach(n=>{n.tileCoord[0]!==r&&(this.remove(_f(n.tileCoord)),n.release())})}}const py={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},g0=[0,0,0],uf=5;class fp{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Hi(HWe(this.resolutions_,(n,s)=>s-n,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Hi(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ec(r)),Hi(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Hi(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Ny,Hi(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((n,s)=>{const o=new TA(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const n=this.getTileRangeForExtentAndZ(e,t);for(let s=n.minX,o=n.maxX;s<=o;++s)for(let a=n.minY,l=n.maxY;a<=l;++a)r([t,s,a])}forEachTileCoordParentTileRange(e,t,r,n){let s,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,n);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=f0(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return f0(s,s+1,o,o+1,t)}const n=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const n=e[0],s=e[1],o=e[2];if(t===n)return f0(s,o,s,o,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-n),u=Math.floor(s*l),c=Math.floor(o*l);if(t<n)return f0(u,u,c,c,r);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return f0(u,h,c,d,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,g0);const n=g0[1],s=g0[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,g0);const o=g0[1],a=g0[2];return f0(n,o,s,a,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=On(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*r,t[1]-(e[2]+.5)*n[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=On(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*n,a=r[1]-(e[2]+1)*s[1]*n,l=o+s[0]*n,u=a+s[1]*n;return cu(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,n,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),l=this.getOrigin(o),u=On(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/r/u[0],h=a*(l[1]-t)/r/u[1];return n?(c=Mf(c,uf)-1,h=Mf(h,uf)-1):(c=q0(c,uf),h=q0(h,uf)),Cx(o,c,h,s)}getTileCoordForXYAndZ_(e,t,r,n,s){const o=this.getOrigin(r),a=this.getResolution(r),l=On(this.getTileSize(r),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-t)/a/l[1];return n?(u=Mf(u,uf)-1,c=Mf(c,uf)-1):(u=q0(u,uf),c=q0(c,uf)),Cx(r,u,c,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=KT(this.resolutions_,e,t||0);return Ti(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Uxe(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let n=this.minZoom;n<t;++n)r[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=r}}class Kst extends fp{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function Jst(i,e,t){const r=[],n=[],s=[],o=[],a=[];t=t!==void 0?t:[];const l="SupportedCRS",u="TileMatrix",c="Identifier",h="ScaleDenominator",d="TopLeftCorner",p="TileWidth",m="TileHeight",g=i[l],v=At(g),b=v.getMetersPerUnit(),_=v.getAxisOrientation().substr(0,2)=="ne";return i[u].sort(function(E,C){return C[h]-E[h]}),i[u].forEach(function(E){let C;if(t.length>0?C=t.find(function(T){return E[c]==T[u]?!0:E[c].includes(":")?!1:i[c]+":"+E[c]===T[u]}):C=!0,C){n.push(E[c]);const T=E[h]*28e-5/b,D=E[p],M=E[m];_?s.push([E[d][1],E[d][0]]):s.push(E[d]),r.push(T),o.push(D==M?D:[D,M]),a.push([E.MatrixWidth,E.MatrixHeight])}}),new Kst({extent:e,origins:s,resolutions:r,matrixIds:n,tileSizes:o,sizes:a})}function JO(i){let e=i.getDefaultTileGrid();return e||(e=tot(i),i.setDefaultTileGrid(e)),e}function Qst(i,e,t){const r=e[0],n=i.getTileCoordCenter(e),s=Ed(t);if(!Al(s,n)){const o=wi(s),a=Math.ceil((s[0]-n[0])/o);return n[0]+=o*a,i.getTileCoordForCoordAndZ(n,r)}return e}function eot(i,e,t,r){r=r!==void 0?r:"top-left";const n=t2e(i,e,t);return new fp({extent:i,origin:aYe(i,r),resolutions:n,tileSize:t})}function pp(i){const e=i||{},t=e.extent||At("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:t2e(t,e.maxZoom,e.tileSize,e.maxResolution)};return new fp(r)}function t2e(i,e,t,r){e=e!==void 0?e:_xe,t=On(t!==void 0?t:Ny);const n=Sn(i),s=wi(i);r=r>0?r:Math.max(s/t[0],n/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=r/Math.pow(2,l);return a}function tot(i,e,t,r){const n=Ed(i);return eot(n,e,t,r)}function Ed(i){i=At(i);let e=i.getExtent();if(!e){const t=180*$y.degrees/i.getMetersPerUnit();e=cu(-t,-t,t,t)}return e}class iot extends Fv{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&On(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new DA(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const r=this.getTileCacheForProjection(e);r&&r.expireCache(t)}forEachLoadedTile(e,t,r,n){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,u;for(let c=r.minX;c<=r.maxX;++c)for(let h=r.minY;h<=r.maxY;++h)l=Zc(t,c,h),u=!1,s.containsKey(l)&&(a=s.get(l),u=a.getState()===tt.LOADED,u&&(u=n(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,n,s){return ai()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:JO(e)}getTileCacheForProjection(e){const t=this.getProjection();return Hi(t===null||Ro(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const n=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),o=On(n.getTileSize(e),this.tmpSize);return s==1?o:Wxe(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=Qst(r,e,t)),yst(e,r)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const r=this.getTileCacheForProjection(t);e>r.highWaterMark&&(r.highWaterMark=e)}useTile(e,t,r,n){}}class i2e extends ka{constructor(e,t){super(e),this.tile=t}}const $v=iot;function rot(i,e){const t=/\{z\}/g,r=/\{x\}/g,n=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(t,o[0].toString()).replace(r,o[1].toString()).replace(n,o[2].toString()).replace(s,function(){const u=o[0],c=e.getFullTileRange(u);if(!c)throw new Error("The {-y} placeholder requires a tile grid with extent");return(c.getHeight()-o[2]-1).toString()})}}function QO(i,e){const t=i.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=rot(i[n],e);return Xy(r)}function Xy(i){return i.length===1?i[0]:function(e,t,r){if(!e)return;const n=qO(e),s=jc(n,i.length);return i[s](e,t,r)}}function not(i,e,t){}function eP(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const r=t[1].charCodeAt(0),n=t[2].charCodeAt(0);let s;for(s=r;s<=n;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const r=parseInt(t[2],10);for(let n=parseInt(t[1],10);n<=r;n++)e.push(i.replace(t[0],n.toString()));return e}return e.push(i),e}class tP extends $v{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===tP.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Nt(t),n=t.getState();let s;n==tt.LOADING?(this.tileLoadingKeys_[r]=!0,s=py.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=n==tt.ERROR?py.TILELOADERROR:n==tt.LOADED?py.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new i2e(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=eP(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(QO(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}useTile(e,t,r){const n=Zc(e,t,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const iP=tP;class yu extends iP{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:sot,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:kw,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?t:{});for(const n in this.tileCacheForProjection){const s=this.tileCacheForProjection[n];s.expireCache(s==r?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Ro(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Ro(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Ro(t,e)))return this.tileGrid;const r=Nt(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=JO(e)),this.tileGridForProjection[r]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Ro(t,e))return this.tileCache;const r=Nt(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new DA(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}createTile_(e,t,r,n,s,o){const a=[e,t,r],l=this.getTileCoordForTileUrlFunction(a,s),u=l?this.tileUrlFunction(l,n,s):void 0,c=new this.tileClass(a,u!==void 0?tt.IDLE:tt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(Bt.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,t,r,n,s){const o=this.getProjection();if(!o||!s||Ro(o,s))return this.getTileInternal(e,t,r,n,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,r];let u;const c=_f(l);a.containsKey(c)&&(u=a.get(c));const h=this.getKey();if(u&&u.key==h)return u;const d=this.getTileGridForProjection(o),p=this.getTileGridForProjection(s),m=this.getTileCoordForTileUrlFunction(l,s),g=new Yy(o,d,s,p,l,m,this.getTilePixelRatio(n),this.getGutter(),(v,b,_,E)=>this.getTileInternal(v,b,_,E,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=h,u?(g.interimTile=u,g.refreshInterimChain(),a.replace(c,g)):a.set(c,g),g}getTileInternal(e,t,r,n,s){let o=null;const a=Zc(e,t,r),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,r,n,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,t,r,n,s,l),u.getState()==tt.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const r=At(e);if(r){const n=Nt(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function sot(i,e){i.getImage().src=e}function oot(i){const e=i[0],t=new Array(e);let r=1<<e-1,n,s;for(n=0;n<e;++n)s=48,i[1]&r&&(s+=1),i[2]&r&&(s+=2),t[n]=String.fromCharCode(s),r>>=1;return t.join("")}const aot='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class lot extends yu{constructor(e){const t=e.hidpi!==void 0?e.hidpi:!1;super({cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:!0,projection:At("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.hidpi_=t,this.culture_=e.culture!==void 0?e.culture:"en-us",this.maxZoom_=e.maxZoom!==void 0?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,this.placeholderTiles_=e.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(n=>n.json()).then(n=>this.handleImageryMetadataResponse(n))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState("error");return}const t=e.resourceSets[0].resources[0],r=this.maxZoom_==-1?t.zoomMax:this.maxZoom_,n=this.getProjection(),s=Ed(n),o=this.hidpi_?2:1,a=t.imageWidth==t.imageHeight?t.imageWidth/o:[t.imageWidth/o,t.imageHeight/o],l=pp({extent:s,minZoom:t.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const u=this.culture_,c=this.hidpi_,h=this.placeholderTiles_;if(this.tileUrlFunction=Xy(t.imageUrlSubdomains.map(function(d){const p=[0,0,0],m=t.imageUrl.replace("{subdomain}",d).replace("{culture}",u);return function(g,v,b){if(!g)return;Cx(g[0],g[1],g[2],p);const _=new URL(m.replace("{quadkey}",oot(p))),E=_.searchParams;return c&&(E.set("dpi","d1"),E.set("device","mobile")),h===!0?E.delete("n"):h===!1&&E.set("n","z"),_.toString()}})),t.imageryProviders){const d=_d(At("EPSG:4326"),this.getProjection());this.setAttributions(p=>{const m=[],g=p.viewState,v=this.getTileGrid(),b=v.getZForResolution(g.resolution,this.zDirection),E=v.getTileCoordForCoordAndZ(g.center,b)[0];return t.imageryProviders.map(function(C){let T=!1;const D=C.coverageAreas;for(let M=0,A=D.length;M<A;++M){const I=D[M];if(E>=I.zoomMin&&E<=I.zoomMax){const P=I.bbox,U=[P[1],P[0],P[3],P[2]],K=zy(U,d);if(Cn(K,p.extent)){T=!0;break}}}T&&m.push(C.attribution)}),m.push(aot),m})}this.setState("ready")}}const uot=lot;class Qf extends yu{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:pp({extent:Ed(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class cot extends Qf{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:e.maxZoom!==void 0?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(e){Object.assign(this.config_,e),this.initializeMap_()}setConfig(e){this.config_=e||{},this.initializeMap_()}initializeMap_(){const e=JSON.stringify(this.config_);if(this.templateCache_[e]){this.applyTemplate_(this.templateCache_[e]);return}let t="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,e)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",t),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(e,t){const r=t.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(n),this.templateCache_[e]=n,this.setState("ready")}else this.setState("error")}handleInitError_(e){this.setState("error")}applyTemplate_(e){const t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)}}const hot=cot;class dot extends dp{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const r=t.getGeometry();return Hi(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,r){var n;(n=this.source)==null||n.loadFeatures(e,t,r),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(Bt.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(Bt.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const r=e===0?0:Math.min(t,e)/e,n=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=t,this.interpolationRatio=r,n&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=ha(),t=this.distance*this.resolution,r=this.source.getFeatures(),n={};for(let s=0,o=r.length;s<o;s++){const a=r[s];if(!(Nt(a)in n)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();hy(u,e),il(e,t,e);const c=this.source.getFeaturesInExtent(e).filter(function(h){const d=Nt(h);return d in n?!1:(n[d]=!0,!0)});this.features.push(this.createCluster(c,e))}}}}createCluster(e,t){const r=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?Cxe(r,l.getCoordinates()):e.splice(a,1)}Axe(r,1/e.length);const n=fo(t),s=this.interpolationRatio,o=new In([r[0]*(1-s)+n[0]*s,r[1]*(1-s)+n[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new Tn({geometry:o,features:e})}}const fot=dot;class rP extends $v{constructor(e){const t=e.projection===void 0?"EPSG:3857":e.projection;let r=e.tileGrid;r===void 0&&t&&(r=pp({extent:Ed(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:r,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?On(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?On(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return!t||Ro(t,e)?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,r,n,s){const o=this.getTileCacheForProjection(n),a=Zc(e,t,r);if(o.containsKey(a)){const v=o.get(a);if(v&&v.key==this.getKey())return v}const l=this.getTileGrid(),u=Math.max.apply(null,l.getResolutions().map((v,b)=>{const _=On(l.getTileSize(b)),E=this.getTileSize(b);return Math.max(E[0]/_[0],E[1]/_[1])})),c=this.getTileGridForProjection(s),h=this.getTileGridForProjection(n),d=[e,t,r],p=this.getTileCoordForTileUrlFunction(d,n),m=Object.assign({sourceProj:s,sourceTileGrid:c,targetProj:n,targetTileGrid:h,tileCoord:d,wrappedTileCoord:p,pixelRatio:u,gutter:this.getGutterForProjection(s),getTileFunction:(v,b,_,E)=>this.getTile(v,b,_,E,s)},this.tileOptions),g=new UO(m);return g.key=this.getKey(),g}getTile(e,t,r,n,s){const o=this.getProjection();if(o&&s&&!Ro(o,s))return this.getReprojTile_(e,t,r,s,o);const a=this.getTileSize(e),l=Zc(e,t,r);if(this.tileCache.containsKey(l))return this.tileCache.get(l);const u=this.loader_;function c(){return xI(function(){return u(e,t,r)})}const h=Object.assign({tileCoord:[e,t,r],loader:c,size:a},this.tileOptions),d=new BO(h);return d.key=this.getKey(),d.addEventListener(Bt.CHANGE,this.handleTileChange_),this.tileCache.set(l,d),d}handleTileChange_(e){const t=e.target,r=Nt(t),n=t.getState();let s;n==tt.LOADING?(this.tileLoadingKeys_[r]=!0,s=py.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=n==tt.ERROR?py.TILELOADERROR:n==tt.LOADED?py.TILELOADEND:void 0),s&&this.dispatchEvent(new i2e(s,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Ro(t,e)))return this.tileGrid;const r=Nt(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=JO(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,t){const r=At(e);if(r){const n=Nt(r);n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=t)}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Ro(t,e))return this.tileCache;const r=Nt(e);return r in this.tileCacheForProjection_||(this.tileCacheForProjection_[r]=new DA(.1)),this.tileCacheForProjection_[r]}expireCache(e,t){const r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?t:{});for(const n in this.tileCacheForProjection_){const s=this.tileCacheForProjection_[n];s.expireCache(s==r?t:{})}}clear(){super.clear();for(const e in this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}}function Go(i){return(e,...t)=>pot(i,e,t)}function Bv(i,e){return Go(r2e(i,e).get)}const{apply:pot,construct:PEt,defineProperty:FEt,get:NEt,getOwnPropertyDescriptor:r2e,getPrototypeOf:nP,has:$Et,ownKeys:mot,set:BEt,setPrototypeOf:jEt}=Reflect,{iterator:Dw,species:zEt,toStringTag:got,for:UEt}=Symbol,yot=Object,{create:sP,defineProperty:vot,freeze:GEt,is:qEt}=yot,bot=Array,_ot=bot.prototype,n2e=_ot[Dw],xot=Go(n2e),s2e=ArrayBuffer,wot=s2e.prototype;Bv(wot,"byteLength");const yme=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;yme&&Bv(yme.prototype,"byteLength");const o2e=nP(Uint8Array);o2e.from;const Da=o2e.prototype;Da[Dw];Go(Da.keys);Go(Da.values);Go(Da.entries);Go(Da.set);Go(Da.reverse);Go(Da.fill);Go(Da.copyWithin);Go(Da.sort);Go(Da.slice);Go(Da.subarray);Bv(Da,"buffer");Bv(Da,"byteOffset");Bv(Da,"length");Bv(Da,got);const Eot=Uint8Array,a2e=Uint16Array,oP=Uint32Array,Sot=Float32Array,Ax=nP([][Dw]()),l2e=Go(Ax.next),Cot=Go(function*(){}().next),Tot=nP(Ax),Aot=DataView.prototype,kot=Go(Aot.getUint16),aP=WeakMap,u2e=aP.prototype,c2e=Go(u2e.get),Dot=Go(u2e.set),h2e=new aP,Mot=sP(null,{next:{value:function(){const e=c2e(h2e,this);return l2e(e)}},[Dw]:{value:function(){return this}}});function Lot(i){if(i[Dw]===n2e&&Ax.next===l2e)return i;const e=sP(Mot);return Dot(h2e,e,xot(i)),e}const Rot=new aP,Iot=sP(Tot,{next:{value:function(){const e=c2e(Rot,this);return Cot(e)},writable:!0,configurable:!0}});for(const i of mot(Ax))i!=="next"&&vot(Iot,i,r2e(Ax,i));const d2e=new s2e(4),Oot=new Sot(d2e),Pot=new oP(d2e),mc=new a2e(512),gc=new Eot(512);for(let i=0;i<256;++i){const e=i-127;e<-27?(mc[i]=0,mc[i|256]=32768,gc[i]=24,gc[i|256]=24):e<-14?(mc[i]=1024>>-e-14,mc[i|256]=1024>>-e-14|32768,gc[i]=-e-1,gc[i|256]=-e-1):e<=15?(mc[i]=e+15<<10,mc[i|256]=e+15<<10|32768,gc[i]=13,gc[i|256]=13):e<128?(mc[i]=31744,mc[i|256]=64512,gc[i]=24,gc[i|256]=24):(mc[i]=31744,mc[i|256]=64512,gc[i]=13,gc[i|256]=13)}const lP=new oP(2048);for(let i=1;i<1024;++i){let e=i<<13,t=0;for(;!(e&8388608);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,lP[i]=e|t}for(let i=1024;i<2048;++i)lP[i]=939524096+(i-1024<<13);const jv=new oP(64);for(let i=1;i<31;++i)jv[i]=i<<23;jv[31]=1199570944;jv[32]=2147483648;for(let i=33;i<63;++i)jv[i]=2147483648+(i-32<<23);jv[63]=3347054592;const f2e=new a2e(64);for(let i=1;i<64;++i)i!==32&&(f2e[i]=1024);function Fot(i){const e=i>>10;return Pot[0]=lP[f2e[e]+(i&1023)]+jv[e],Oot[0]}function p2e(i,e,...t){return Fot(kot(i,e,...Lot(t)))}var uP={exports:{}};function m2e(i,e,t){const r=t&&t.debug||!1;r&&console.log("[xml-utils] getting "+e+" in "+i);const n=typeof i=="object"?i.outer:i,s=n.slice(0,n.indexOf(">")+1),o=['"',"'"];for(let a=0;a<o.length;a++){const l=o[a],u=e+"\\="+l+"([^"+l+"]*)"+l;r&&console.log("[xml-utils] pattern:",u);const h=new RegExp(u).exec(s);if(r&&console.log("[xml-utils] match:",h),h)return h[1]}}uP.exports=m2e;uP.exports.default=m2e;var Not=uP.exports;const AD=$o(Not);var cP={exports:{}},hP={exports:{}},dP={exports:{}};function g2e(i,e,t){const n=new RegExp(e).exec(i.slice(t));return n?t+n.index:-1}dP.exports=g2e;dP.exports.default=g2e;var $ot=dP.exports,fP={exports:{}};function y2e(i,e,t){const n=new RegExp(e).exec(i.slice(t));return n?t+n.index+n[0].length-1:-1}fP.exports=y2e;fP.exports.default=y2e;var Bot=fP.exports,pP={exports:{}};function v2e(i,e){const t=new RegExp(e,"g"),r=i.match(t);return r?r.length:0}pP.exports=v2e;pP.exports.default=v2e;var jot=pP.exports;const zot=$ot,kD=Bot,vme=jot;function b2e(i,e,t){const r=t&&t.debug||!1,n=!(t&&typeof t.nested===!1),s=t&&t.startIndex||0;r&&console.log("[xml-utils] starting findTagByName with",e," and ",t);const o=zot(i,`<${e}[ 
>/]`,s);if(r&&console.log("[xml-utils] start:",o),o===-1)return;const a=i.slice(o+e.length);let l=kD(a,"^[^<]*[ /]>",0);const u=l!==-1&&a[l-1]==="/";if(r&&console.log("[xml-utils] selfClosing:",u),u===!1)if(n){let p=0,m=1,g=0;for(;(l=kD(a,"[ /]"+e+">",p))!==-1;){const v=a.substring(p,l+1);if(m+=vme(v,"<"+e+`[ 
	>]`),g+=vme(v,"</"+e+">"),g>=m)break;p=l}}else l=kD(a,"[ /]"+e+">",0);const c=o+e.length+l+1;if(r&&console.log("[xml-utils] end:",c),c===-1)return;const h=i.slice(o,c);let d;return u?d=null:d=h.slice(h.indexOf(">")+1,h.lastIndexOf("<")),{inner:d,outer:h,start:o,end:c}}hP.exports=b2e;hP.exports.default=b2e;var Uot=hP.exports;const Got=Uot;function _2e(i,e,t){const r=[],n=t&&t.debug||!1,s=t&&typeof t.nested=="boolean"?t.nested:!0;let o=t&&t.startIndex||0,a;for(;a=Got(i,e,{debug:n,startIndex:o});)s?o=a.start+1+e.length:o=a.end,r.push(a);return n&&console.log("findTagsByName found",r.length,"tags"),r}cP.exports=_2e;cP.exports.default=_2e;var qot=cP.exports;const Hot=$o(qot),F_={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},vc={};for(const i in F_)F_.hasOwnProperty(i)&&(vc[F_[i]]=parseInt(i,10));const Vot=[vc.BitsPerSample,vc.ExtraSamples,vc.SampleFormat,vc.StripByteCounts,vc.StripOffsets,vc.StripRowCounts,vc.TileByteCounts,vc.TileOffsets,vc.SubIFDs],DD={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},er={};for(const i in DD)DD.hasOwnProperty(i)&&(er[DD[i]]=parseInt(i,10));const ja={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},Wot={Unspecified:0,Assocalpha:1,Unassalpha:2},HEt={Version:0,AddCompression:1},VEt={None:0,Deflate:1,Zstandard:2},Yot={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function Xot(i,e){const{width:t,height:r}=i,n=new Uint8Array(t*r*3);let s;for(let o=0,a=0;o<i.length;++o,a+=3)s=256-i[o]/e*256,n[a]=s,n[a+1]=s,n[a+2]=s;return n}function Zot(i,e){const{width:t,height:r}=i,n=new Uint8Array(t*r*3);let s;for(let o=0,a=0;o<i.length;++o,a+=3)s=i[o]/e*256,n[a]=s,n[a+1]=s,n[a+2]=s;return n}function Kot(i,e){const{width:t,height:r}=i,n=new Uint8Array(t*r*3),s=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<i.length;++a,l+=3){const u=i[a];n[l]=e[u]/65536*256,n[l+1]=e[u+s]/65536*256,n[l+2]=e[u+o]/65536*256}return n}function Jot(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let n=0,s=0;n<i.length;n+=4,s+=3){const o=i[n],a=i[n+1],l=i[n+2],u=i[n+3];r[s]=255*((255-o)/256)*((255-u)/256),r[s+1]=255*((255-a)/256)*((255-u)/256),r[s+2]=255*((255-l)/256)*((255-u)/256)}return r}function Qot(i){const{width:e,height:t}=i,r=new Uint8ClampedArray(e*t*3);for(let n=0,s=0;n<i.length;n+=3,s+=3){const o=i[n],a=i[n+1],l=i[n+2];r[s]=o+1.402*(l-128),r[s+1]=o-.34414*(a-128)-.71414*(l-128),r[s+2]=o+1.772*(a-128)}return r}const eat=.95047,tat=1,iat=1.08883;function rat(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let n=0,s=0;n<i.length;n+=3,s+=3){const o=i[n+0],a=i[n+1]<<24>>24,l=i[n+2]<<24>>24;let u=(o+16)/116,c=a/500+u,h=u-l/200,d,p,m;c=eat*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=tat*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),h=iat*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),d=c*3.2406+u*-1.5372+h*-.4986,p=c*-.9689+u*1.8758+h*.0415,m=c*.0557+u*-.204+h*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,m=m>.0031308?1.055*m**(1/2.4)-.055:12.92*m,r[s]=Math.max(0,Math.min(1,d))*255,r[s+1]=Math.max(0,Math.min(1,p))*255,r[s+2]=Math.max(0,Math.min(1,m))*255}return r}const x2e=new Map;function mp(i,e){Array.isArray(i)||(i=[i]),i.forEach(t=>x2e.set(t,e))}async function w2e(i){const e=x2e.get(i.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${i.Compression}`);const t=await e();return new t(i)}mp([void 0,1],()=>ip(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1]),import.meta.url).then(i=>i.default));mp(5,()=>ip(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1]),import.meta.url).then(i=>i.default));mp(6,()=>{throw new Error("old style JPEG compression is not supported.")});mp(7,()=>ip(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1]),import.meta.url).then(i=>i.default));mp([8,32946],()=>ip(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(i=>i.default));mp(32773,()=>ip(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1]),import.meta.url).then(i=>i.default));mp(34887,()=>ip(()=>import("./lerc-CemBEwqn.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url).then(async i=>(await i.zstd.init(),i)).then(i=>i.default));mp(50001,()=>ip(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([20,1]),import.meta.url).then(i=>i.default));function MA(i,e,t,r=1){return new(Object.getPrototypeOf(i)).constructor(e*t*r)}function nat(i,e,t,r,n){const s=e/r,o=t/n;return i.map(a=>{const l=MA(a,r,n);for(let u=0;u<n;++u){const c=Math.min(Math.round(o*u),t-1);for(let h=0;h<r;++h){const d=Math.min(Math.round(s*h),e-1),p=a[c*e+d];l[u*r+h]=p}}return l})}function my(i,e,t){return(1-t)*i+t*e}function sat(i,e,t,r,n){const s=e/r,o=t/n;return i.map(a=>{const l=MA(a,r,n);for(let u=0;u<n;++u){const c=o*u,h=Math.floor(c),d=Math.min(Math.ceil(c),t-1);for(let p=0;p<r;++p){const m=s*p,g=m%1,v=Math.floor(m),b=Math.min(Math.ceil(m),e-1),_=a[h*e+v],E=a[h*e+b],C=a[d*e+v],T=a[d*e+b],D=my(my(_,E,g),my(C,T,g),c%1);l[u*r+p]=D}}return l})}function oat(i,e,t,r,n,s="nearest"){switch(s.toLowerCase()){case"nearest":return nat(i,e,t,r,n);case"bilinear":case"linear":return sat(i,e,t,r,n);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function aat(i,e,t,r,n,s){const o=e/r,a=t/n,l=MA(i,r,n,s);for(let u=0;u<n;++u){const c=Math.min(Math.round(a*u),t-1);for(let h=0;h<r;++h){const d=Math.min(Math.round(o*h),e-1);for(let p=0;p<s;++p){const m=i[c*e*s+d*s+p];l[u*r*s+h*s+p]=m}}}return l}function lat(i,e,t,r,n,s){const o=e/r,a=t/n,l=MA(i,r,n,s);for(let u=0;u<n;++u){const c=a*u,h=Math.floor(c),d=Math.min(Math.ceil(c),t-1);for(let p=0;p<r;++p){const m=o*p,g=m%1,v=Math.floor(m),b=Math.min(Math.ceil(m),e-1);for(let _=0;_<s;++_){const E=i[h*e*s+v*s+_],C=i[h*e*s+b*s+_],T=i[d*e*s+v*s+_],D=i[d*e*s+b*s+_],M=my(my(E,C,g),my(T,D,g),c%1);l[u*r*s+p*s+_]=M}}}return l}function uat(i,e,t,r,n,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return aat(i,e,t,r,n,s);case"bilinear":case"linear":return lat(i,e,t,r,n,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function cat(i,e,t){let r=0;for(let n=e;n<t;++n)r+=i[n];return r}function AL(i,e,t){switch(i){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function hat(i,e){return(i===1||i===2)&&e<=32&&e%8===0?!1:!(i===3&&(e===16||e===32||e===64))}function dat(i,e,t,r,n,s,o){const a=new DataView(i),l=t===2?o*s:o*s*r,u=t===2?1:r,c=AL(e,n,l),h=parseInt("1".repeat(n),2);if(e===1){let d;t===1?d=r*n:d=n;let p=s*d;p&7&&(p=p+7&-8);for(let m=0;m<o;++m){const g=m*p;for(let v=0;v<s;++v){const b=g+v*u*n;for(let _=0;_<u;++_){const E=b+_*n,C=(m*s+v)*u+_,T=Math.floor(E/8),D=E%8;if(D+n<=8)c[C]=a.getUint8(T)>>8-n-D&h;else if(D+n<=16)c[C]=a.getUint16(T)>>16-n-D&h;else if(D+n<=24){const M=a.getUint16(T)<<8|a.getUint8(T+2);c[C]=M>>24-n-D&h}else c[C]=a.getUint32(T)>>32-n-D&h}}}}return c.buffer}class E2e{constructor(e,t,r,n,s,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=n,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(n,s){return p2e(this,n,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const r=this.getSampleFormat(e),n=this.getBitsPerSample(e);return AL(r,n,t)}async getTileOrStrip(e,t,r,n,s){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=t*o+e:this.planarConfiguration===2&&(l=r*o*a+t*o+e);let c,h;this.isTiled?(c=this.fileDirectory.TileOffsets[l],h=this.fileDirectory.TileByteCounts[l]):(c=this.fileDirectory.StripOffsets[l],h=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:c,length:h}],s))[0];let p;return u===null||!u[l]?(p=(async()=>{let m=await n.decode(this.fileDirectory,d);const g=this.getSampleFormat(),v=this.getBitsPerSample();return hat(g,v)&&(m=dat(m,g,this.planarConfiguration,this.getSamplesPerPixel(),v,this.getTileWidth(),this.getBlockHeight(t))),m})(),u!==null&&(u[l]=p)):p=u[l],{x:e,y:t,sample:r,data:await p}}async _readRaster(e,t,r,n,s,o,a,l,u){const c=this.getTileWidth(),h=this.getTileHeight(),d=this.getWidth(),p=this.getHeight(),m=Math.max(Math.floor(e[0]/c),0),g=Math.min(Math.ceil(e[2]/c),Math.ceil(d/c)),v=Math.max(Math.floor(e[1]/h),0),b=Math.min(Math.ceil(e[3]/h),Math.ceil(p/h)),_=e[2]-e[0];let E=this.getBytesPerPixel();const C=[],T=[];for(let A=0;A<t.length;++A)this.planarConfiguration===1?C.push(cat(this.fileDirectory.BitsPerSample,0,t[A])/8):C.push(0),T.push(this.getReaderForSample(t[A]));const D=[],{littleEndian:M}=this;for(let A=v;A<b;++A)for(let I=m;I<g;++I){let P;this.planarConfiguration===1&&(P=this.getTileOrStrip(I,A,0,s,u));for(let U=0;U<t.length;++U){const K=U,L=t[U];this.planarConfiguration===2&&(E=this.getSampleByteSize(L),P=this.getTileOrStrip(I,A,L,s,u));const F=P.then($=>{const H=$.data,V=new DataView(H),J=this.getBlockHeight($.y),ee=$.y*h,ie=$.x*c,de=ee+J,te=($.x+1)*c,z=T[K],ne=Math.min(J,J-(de-e[3]),p-ee),ve=Math.min(c,c-(te-e[2]),d-ie);for(let $e=Math.max(0,e[1]-ee);$e<ne;++$e)for(let Xe=Math.max(0,e[0]-ie);Xe<ve;++Xe){const ot=($e*c+Xe)*E,Be=z.call(V,ot+C[K],M);let He;n?(He=($e+ee-e[1])*_*t.length+(Xe+ie-e[0])*t.length+K,r[He]=Be):(He=($e+ee-e[1])*_+Xe+ie-e[0],r[K][He]=Be)}});D.push(F)}}if(await Promise.all(D),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let A;return n?A=uat(r,e[2]-e[0],e[3]-e[1],o,a,t.length,l):A=oat(r,e[2]-e[0],e[3]-e[1],o,a,l),A.width=o,A.height=a,A}return r.width=o||e[2]-e[0],r.height=a||e[3]-e[1],r}async readRasters({window:e,samples:t=[],interleave:r,pool:n=null,width:s,height:o,resampleMethod:a,fillValue:l,signal:u}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const h=c[2]-c[0],d=c[3]-c[1],p=h*d,m=this.getSamplesPerPixel();if(!t||!t.length)for(let _=0;_<m;++_)t.push(_);else for(let _=0;_<t.length;++_)if(t[_]>=m)return Promise.reject(new RangeError(`Invalid sample index '${t[_]}'.`));let g;if(r){const _=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,E=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=AL(_,E,p*t.length),l&&g.fill(l)}else{g=[];for(let _=0;_<t.length;++_){const E=this.getArrayForSample(t[_],p);Array.isArray(l)&&_<l.length?E.fill(l[_]):l&&!Array.isArray(l)&&E.fill(l),g.push(E)}}const v=n||await w2e(this.fileDirectory);return await this._readRaster(c,t,g,r,v,s,o,a,u)}async readRGB({window:e,interleave:t=!0,pool:r=null,width:n,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const u=e||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===ja.RGB){let b=[0,1,2];if(this.fileDirectory.ExtraSamples!==Wot.Unspecified&&a){b=[];for(let _=0;_<this.fileDirectory.BitsPerSample.length;_+=1)b.push(_)}return this.readRasters({window:e,interleave:t,samples:b,pool:r,width:n,height:s,resampleMethod:o,signal:l})}let h;switch(c){case ja.WhiteIsZero:case ja.BlackIsZero:case ja.Palette:h=[0];break;case ja.CMYK:h=[0,1,2,3];break;case ja.YCbCr:case ja.CIELab:h=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:u,interleave:!0,samples:h,pool:r,width:n,height:s,resampleMethod:o,signal:l},{fileDirectory:p}=this,m=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let v;switch(c){case ja.WhiteIsZero:v=Xot(m,g);break;case ja.BlackIsZero:v=Zot(m,g);break;case ja.Palette:v=Kot(m,p.ColorMap);break;case ja.CMYK:v=Jot(m);break;case ja.YCbCr:v=Qot(m);break;case ja.CIELab:v=rat(m);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const b=new Uint8Array(v.length/3),_=new Uint8Array(v.length/3),E=new Uint8Array(v.length/3);for(let C=0,T=0;C<v.length;C+=3,++T)b[T]=v[C],_[T]=v[C+1],E[T]=v[C+2];v=[b,_,E]}return v.width=m.width,v.height=m.height,v}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let n=Hot(r,"Item");e===null?n=n.filter(s=>AD(s,"sample")===void 0):n=n.filter(s=>Number(AD(s,"sample"))===e);for(let s=0;s<n.length;++s){const o=n[s];t[AD(o,"name")]=o.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return[r[0],-r[5],r[10]];if(e){const[n,s,o]=e.getResolution();return[n*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),o*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(){const e=this.getHeight(),t=this.getWidth();if(this.fileDirectory.ModelTransformation){const[r,n,s,o,a,l,u,c]=this.fileDirectory.ModelTransformation,d=[[0,0],[0,e],[t,0],[t,e]].map(([g,v])=>[o+r*g+n*v,c+a*g+l*v]),p=d.map(g=>g[0]),m=d.map(g=>g[1]);return[Math.min(...p),Math.min(...m),Math.max(...p),Math.max(...m)]}else{const r=this.getOrigin(),n=this.getResolution(),s=r[0],o=r[1],a=s+n[0]*this.getWidth(),l=o+n[1]*this.getHeight();return[Math.min(s,a),Math.min(o,l),Math.max(s,a),Math.max(o,l)]}}}class fat{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const r=this.getUint32(e,t),n=this.getUint32(e+4,t);let s;if(t){if(s=r+2**32*n,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*r+n,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,t){let r=0;const n=(this._dataView.getUint8(e+(t?7:0))&128)>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));n&&(s?a!==0&&(a=~(a-1)&255,s=!1):a=~a&255),r+=a*256**o}return n&&(r=-r),r}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return p2e(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class pat{constructor(e,t,r,n){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),r=this.readUint32(e+4);let n;if(this._littleEndian){if(n=t+2**32*r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*t+r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}readInt64(e){let t=0;const r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let n=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(this._littleEndian?s:7-s));r&&(n?o!==0&&(o=~(o-1)&255,n=!1):o=~o&255),t+=o*256**s}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const mat=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class gat{constructor(e=mat,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(r=>{ip(()=>import("./decoder-Ddo2r026.js"),__vite__mapDeps([21,8]),import.meta.url).then(n=>{r(n.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let n=0;n<e;n++)this.workers.push({worker:r(),idle:!0})}))}async decode(e,t){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?w2e(e).then(r=>r.decode(e,t)):new Promise(r=>{const n=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];n.idle=!1;const s=this.messageId++,o=a=>{a.data.id===s&&(n.idle=!0,r(a.data.decoded),n.worker.removeEventListener("message",o))};n.worker.addEventListener("message",o),n.worker.postMessage({fileDirectory:e,buffer:t,id:s},[t])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}const bme=`\r
\r
`;function S2e(i){if(typeof Object.fromEntries<"u")return Object.fromEntries(i);const e={};for(const[t,r]of i)e[t.toLowerCase()]=r;return e}function yat(i){const e=i.split(`\r
`).map(t=>{const r=t.split(":").map(n=>n.trim());return r[0]=r[0].toLowerCase(),r});return S2e(e)}function vat(i){const[e,...t]=i.split(";").map(n=>n.trim()),r=t.map(n=>n.split("="));return{type:e,params:S2e(r)}}function kL(i){let e,t,r;return i&&([,e,t,r]=i.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),r=parseInt(r,10)),{start:e,end:t,total:r}}function bat(i,e){let t=null;const r=new TextDecoder("ascii"),n=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(i,a,s.length))===s&&(t=a);if(t===null)throw new Error("Could not find initial boundary");for(;t<i.byteLength;){const a=r.decode(new Uint8Array(i,t,Math.min(s.length+1024,i.byteLength-t)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const l=a.substr(s.length+2);if(l.length===0)break;const u=l.indexOf(bme),c=yat(l.substr(0,u)),{start:h,end:d,total:p}=kL(c["content-range"]),m=t+s.length+u+bme.length,g=parseInt(d,10)+1-parseInt(h,10);n.push({headers:c,data:i.slice(m,m+g),offset:h,length:g,fileSize:p}),t=m+g+4}return n}class mP{async fetch(e,t=void 0){return Promise.all(e.map(r=>this.fetchSlice(r,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class _at extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){const n=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:n}):this._set(e,{value:t,expiry:n}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,s]=r;this._deleteIfExpired(n,s)===!1&&(yield[n,s.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,s]=r;this.cache.has(n)||this._deleteIfExpired(n,s)===!1&&(yield[n,s.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[r,n]of this.entriesAscending())e.call(t,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function xat(i){return new Promise(e=>setTimeout(e,i))}function wat(i,e){const t=Array.isArray(i)?i:Array.from(i),r=Array.isArray(e)?e:Array.from(e);return t.map((n,s)=>[n,r[s]])}class Zy extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Zy),this.name="AbortError"}}class Eat extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const Sat=Eat;class Cat{constructor(e,t,r=null){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}}class _me{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}}class Tat extends mP{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new _at({maxSize:r,onEviction:(n,s)=>{this.evictedBlocks.set(n,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const r=[],n=[],s=[];this.evictedBlocks.clear();for(const{offset:d,length:p}of e){let m=d+p;const{fileSize:g}=this;g!==null&&(m=Math.min(m,g));const v=Math.floor(d/this.blockSize)*this.blockSize;for(let b=v;b<m;b+=this.blockSize){const _=Math.floor(b/this.blockSize);!this.blockCache.has(_)&&!this.blockRequests.has(_)&&(this.blockIdsToFetch.add(_),n.push(_)),this.blockRequests.has(_)&&r.push(this.blockRequests.get(_)),s.push(_)}}await xat(),this.fetchBlocks(t);const o=[];for(const d of n)this.blockRequests.has(d)&&o.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(o);const a=[],l=s.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const d of l){const p=this.blockRequests.get(d);if(!p)throw new Error(`Block ${d} is not in the block requests`);a.push(p)}await Promise.allSettled(a)}if(t&&t.aborted)throw new Zy("Request was aborted");const u=s.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),c=u.filter(d=>!d);if(c.length)throw new Sat(c,"Request failed");const h=new Map(wat(s,u));return this.readSliceData(e,h)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let n=0;n<t.length;++n){const s=t[n];for(const o of s.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await r)[n],l=o*this.blockSize,u=l-a.offset,c=Math.min(u+this.blockSize,a.data.byteLength),h=a.data.slice(u,c),d=new Cat(l,h.byteLength,h,o);this.blockCache.set(o,d),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((o,a)=>o-a);if(t.length===0)return[];let r=[],n=null;const s=[];for(const o of t)n===null||n+1===o?(r.push(o),n=o):(s.push(new _me(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[o],n=o);return s.push(new _me(r[0]*this.blockSize,r.length*this.blockSize,r)),s}readSliceData(e,t){return e.map(r=>{let n=r.offset+r.length;this.fileSize!==null&&(n=Math.min(this.fileSize,n));const s=Math.floor(r.offset/this.blockSize),o=Math.floor(n/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let u=s;u<=o;++u){const c=t.get(u),h=c.offset-r.offset,d=c.top-n;let p=0,m=0,g;h<0?p=-h:h>0&&(m=h),d<0?g=c.length-p:g=n-c.offset-p;const v=new Uint8Array(c.data,p,g);l.set(v,m)}return a})}}class gP{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class yP{constructor(e){this.url=e}async request({headers:e,credentials:t,signal:r}={}){throw new Error("request is not implemented")}}class Aat extends gP{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class kat extends yP{constructor(e,t){super(e),this.credentials=t}async request({headers:e,credentials:t,signal:r}={}){const n=await fetch(this.url,{headers:e,credentials:t,signal:r});return new Aat(n)}}class Dat extends gP{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class Mat extends yP{constructRequest(e,t){return new Promise((r,n)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(e))s.setRequestHeader(o,a);s.onload=()=>{const o=s.response;r(new Dat(s,o))},s.onerror=n,s.onabort=()=>n(new Zy("Request aborted")),s.send(),t&&(t.aborted&&s.abort(),t.addEventListener("abort",()=>s.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class Lat extends gP{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class Rat extends yP{constructor(e){super(e),this.parsedUrl=K2.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",K2)}constructRequest(e,t){return new Promise((r,n)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},o=>{const a=new Promise(l=>{const u=[];o.on("data",c=>{u.push(c)}),o.on("end",()=>{const c=Buffer.concat(u).buffer;l(c)}),o.on("error",n)});r(new Lat(o,a))});s.on("error",n),t&&(t.aborted&&s.destroy(new Zy("Request aborted")),t.addEventListener("abort",()=>s.destroy(new Zy("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class vP extends mP{constructor(e,t,r,n){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=n,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,t))))}async fetchSlices(e,t){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:n,length:s})=>`${n}-${n+s}`).join(",")}`},signal:t});if(r.ok)if(r.status===206){const{type:n,params:s}=vat(r.getHeader("content-type"));if(n==="multipart/byteranges"){const h=bat(await r.getData(),s.boundary);return this._fileSize=h[0].fileSize||null,h}const o=await r.getData(),{start:a,end:l,total:u}=kL(r.getHeader("content-range"));this._fileSize=u||null;const c=[{data:o,offset:a,length:l-a}];if(e.length>1){const h=await Promise.all(e.slice(1).map(d=>this.fetchSlice(d,t)));return c.concat(h)}return c}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const n=await r.getData();return this._fileSize=n.byteLength,[{data:n,offset:0,length:n.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:r,length:n}=e,s=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+n}`},signal:t});if(s.ok)if(s.status===206){const o=await s.getData(),{total:a}=kL(s.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:r,length:n}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await s.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function bP(i,{blockSize:e,cacheSize:t}){return e===null?i:new Tat(i,{blockSize:e,cacheSize:t})}function Iat(i,{headers:e={},credentials:t,maxRanges:r=0,allowFullFile:n=!1,...s}={}){const o=new kat(i,t),a=new vP(o,e,r,n);return bP(a,s)}function Oat(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...n}={}){const s=new Mat(i),o=new vP(s,e,t,r);return bP(o,n)}function Pat(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...n}={}){const s=new Rat(i),o=new vP(s,e,t,r);return bP(o,n)}function DL(i,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?Iat(i,t):typeof XMLHttpRequest<"u"?Oat(i,t):Pat(i,t)}class Fat extends mP{constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise((r,n)=>{const s=this.file.slice(e.offset,e.offset+e.length),o=new FileReader;o.onload=a=>r(a.target.result),o.onerror=n,o.onabort=n,o.readAsArrayBuffer(s),t&&t.addEventListener("abort",()=>o.abort())})}}function Nat(i){return new Fat(i)}function ML(i){switch(i){case er.BYTE:case er.ASCII:case er.SBYTE:case er.UNDEFINED:return 1;case er.SHORT:case er.SSHORT:return 2;case er.LONG:case er.SLONG:case er.FLOAT:case er.IFD:return 4;case er.RATIONAL:case er.SRATIONAL:case er.DOUBLE:case er.LONG8:case er.SLONG8:case er.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${i}`)}}function $at(i){const e=i.GeoKeyDirectory;if(!e)return null;const t={};for(let r=4;r<=e[3]*4;r+=4){const n=Yot[e[r]],s=e[r+1]?F_[e[r+1]]:null,o=e[r+2],a=e[r+3];let l=null;if(!s)l=a;else{if(l=i[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${n}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}t[n]=l}return t}function y0(i,e,t,r){let n=null,s=null;const o=ML(e);switch(e){case er.BYTE:case er.ASCII:case er.UNDEFINED:n=new Uint8Array(t),s=i.readUint8;break;case er.SBYTE:n=new Int8Array(t),s=i.readInt8;break;case er.SHORT:n=new Uint16Array(t),s=i.readUint16;break;case er.SSHORT:n=new Int16Array(t),s=i.readInt16;break;case er.LONG:case er.IFD:n=new Uint32Array(t),s=i.readUint32;break;case er.SLONG:n=new Int32Array(t),s=i.readInt32;break;case er.LONG8:case er.IFD8:n=new Array(t),s=i.readUint64;break;case er.SLONG8:n=new Array(t),s=i.readInt64;break;case er.RATIONAL:n=new Uint32Array(t*2),s=i.readUint32;break;case er.SRATIONAL:n=new Int32Array(t*2),s=i.readInt32;break;case er.FLOAT:n=new Float32Array(t),s=i.readFloat32;break;case er.DOUBLE:n=new Float64Array(t),s=i.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===er.RATIONAL||e===er.SRATIONAL)for(let a=0;a<t;a+=2)n[a]=s.call(i,r+a*o),n[a+1]=s.call(i,r+(a*o+4));else for(let a=0;a<t;++a)n[a]=s.call(i,r+a*o);return e===er.ASCII?new TextDecoder("utf-8").decode(n):n}class Bat{constructor(e,t,r){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=r}}class v2 extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class C2e{async readRasters(e={}){const{window:t,width:r,height:n}=e;let{resX:s,resY:o,bbox:a}=e;const l=await this.getImage();let u=l;const c=await this.getImageCount(),h=l.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(r||n){if(t){const[m,g]=l.getOrigin(),[v,b]=l.getResolution();a=[m+t[0]*v,g+t[1]*b,m+t[2]*v,g+t[3]*b]}const p=a||h;if(r){if(s)throw new Error("Both width and resX passed");s=(p[2]-p[0])/r}if(n){if(o)throw new Error("Both width and resY passed");o=(p[3]-p[1])/n}}if(s||o){const p=[];for(let m=0;m<c;++m){const g=await this.getImage(m),{SubfileType:v,NewSubfileType:b}=g.fileDirectory;(m===0||v===2||b&1)&&p.push(g)}p.sort((m,g)=>m.getWidth()-g.getWidth());for(let m=0;m<p.length;++m){const g=p[m],v=(h[2]-h[0])/g.getWidth(),b=(h[3]-h[1])/g.getHeight();if(u=g,s&&s>v||o&&o>b)break}}let d=t;if(a){const[p,m]=l.getOrigin(),[g,v]=u.getResolution(l);d=[Math.round((a[0]-p)/g),Math.round((a[1]-m)/v),Math.round((a[2]-p)/g),Math.round((a[3]-m)/v)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return u.readRasters({...e,window:d})}}class Ky extends C2e{constructor(e,t,r,n,s={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=n,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const r=this.bigTiff?4048:1024;return new pat((await this.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,r=this.bigTiff?8:2;let n=await this.getSlice(e);const s=this.bigTiff?n.readUint64(e):n.readUint16(e),o=s*t+(this.bigTiff?16:6);n.covers(e,o)||(n=await this.getSlice(e,o));const a={};let l=e+(this.bigTiff?8:2);for(let h=0;h<s;l+=t,++h){const d=n.readUint16(l),p=n.readUint16(l+2),m=this.bigTiff?n.readUint64(l+4):n.readUint32(l+4);let g,v;const b=ML(p),_=l+(this.bigTiff?12:8);if(b*m<=(this.bigTiff?8:4))g=y0(n,p,m,_);else{const E=n.readOffset(_),C=ML(p)*m;if(n.covers(E,C))g=y0(n,p,m,E);else{const T=await this.getSlice(E,C);g=y0(T,p,m,E)}}m===1&&Vot.indexOf(d)===-1&&!(p===er.RATIONAL||p===er.SRATIONAL)?v=g[0]:v=g,a[F_[d]]=v}const u=$at(a),c=n.readOffset(e+r+t*s);return new Bat(a,u,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof v2?new v2(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new v2(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new E2e(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(r){if(r instanceof v2)t=!1;else throw r}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",r=t.length+100;let n=await this.getSlice(e,r);if(t===y0(n,er.ASCII,t.length,e)){const o=y0(n,er.ASCII,r,e).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>r&&(n=await this.getSlice(e,a));const l=y0(n,er.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,c])=>{this.ghostValues[u]=c})}return this.ghostValues}static async fromSource(e,t,r){const n=(await e.fetch([{offset:0,length:1024}],r))[0],s=new fat(n),o=s.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,s.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const c=u?s.getUint64(8,a):s.getUint32(4,a);return new Ky(e,a,u,c,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class jat extends C2e{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,r=0;for(let n=0;n<this.imageFiles.length;n++){const s=this.imageFiles[n];for(let o=0;o<this.imageCounts[n];o++){if(e===t){const a=await s.requestIFD(r);return new E2e(a.fileDirectory,a.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}t++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((t,r)=>t+r,0),this.imageCount}}async function zat(i,e={},t){return Ky.fromSource(DL(i,e),t)}async function Uat(i,e){return Ky.fromSource(Nat(i),e)}async function Gat(i,e=[],t={},r){const n=await Ky.fromSource(DL(i,t),r),s=await Promise.all(e.map(o=>Ky.fromSource(DL(o,t))));return new jat(n,s)}function qat(i){return((i.fileDirectory.NewSubfileType||0)&4)===4}function Hat(i,e){if(!i)return!1;if(i===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,r=ja;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}const xme="STATISTICS_MAXIMUM",wme="STATISTICS_MINIMUM",MD=256;let LD;function Vat(){return LD||(LD=new gat),LD}function Wat(i){try{return i.getBoundingBox()}catch{return[0,0,i.getWidth(),i.getHeight()]}}function Yat(i){try{return i.getOrigin().slice(0,2)}catch{return[0,i.getHeight()]}}function Xat(i,e){try{return i.getResolution(e)}catch{return[e.getWidth()/i.getWidth(),e.getHeight()/i.getHeight()]}}function Zat(i){const e=i.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let r=At(t);if(!r){const n=Ffe(e.ProjLinearUnitsGeoKey);n&&(r=new By({code:t,units:n}))}return r}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const t="EPSG:"+e.GeographicTypeGeoKey;let r=At(t);if(!r){const n=Ffe(e.GeogAngularUnitsGeoKey);n&&(r=new By({code:t,units:n}))}return r}return null}function Kat(i){return i.getImageCount().then(function(e){const t=new Array(e);for(let r=0;r<e;++r)t[r]=i.getImage(r);return Promise.all(t)})}function Jat(i,e){let t;return i.blob?t=Uat(i.blob):i.overviews?t=Gat(i.url,i.overviews,e):t=zat(i.url,e),t.then(Kat)}function s_(i,e,t,r,n){if(Array.isArray(i)){const s=i.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(r);throw n(o),o}for(let o=0;o<s;++o)s_(i[o],e[o],t,r,n);return}if(e=e,Math.abs(i-e)>t*i)throw new Error(r)}function Qat(i){return i instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0}function elt(i){return i instanceof Int8Array?127:i instanceof Uint8Array||i instanceof Uint8ClampedArray?255:i instanceof Int16Array?32767:i instanceof Uint16Array?65535:i instanceof Int32Array?2147483647:i instanceof Uint32Array?4294967295:i instanceof Float32Array?34e37:255}class _P extends rP{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,opaque:e.opaque,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const r=this,n=new Array(t);for(let s=0;s<t;++s)n[s]=Jat(this.sourceInfo_[s],this.sourceOptions_);Promise.all(n).then(function(s){r.configure_(s)}).catch(function(s){cx(s),r.error_=s,r.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const n=t[r],s=Zat(n);if(s){this.projection=s;break}}}configure_(e){let t,r,n,s,o;const a=new Array(e.length),l=new Array(e.length),u=new Array(e.length);let c=0;const h=e.length;for(let g=0;g<h;++g){const v=[],b=[];e[g].forEach(A=>{qat(A)?b.push(A):v.push(A)});const _=v.length;if(b.length>0&&b.length!==_)throw new Error(`Expected one mask per image found ${b.length} masks and ${_} images`);let E,C;const T=new Array(_),D=new Array(_),M=new Array(_);l[g]=new Array(_),u[g]=new Array(_);for(let A=0;A<_;++A){const I=v[A],P=I.getGDALNoData();u[g][A]=I.getGDALMetadata(0),l[g][A]=P;const U=this.sourceInfo_[g].bands;a[g]=U?U.length:I.getSamplesPerPixel();const K=_-(A+1);E||(E=Wat(I)),C||(C=Yat(I));const L=Xat(I,v[0]);M[K]=L[0];const F=[I.getTileWidth(),I.getTileHeight()];F[0]!==F[1]&&F[1]<MD&&(F[0]=MD,F[1]=MD),T[K]=F;const $=L[0]/Math.abs(L[1]);D[K]=[F[0],F[1]/$]}if(t?Bs(t,E,t):t=E,!r)r=C;else{const A=`Origin mismatch for source ${g}, got [${C}] but expected [${r}]`;s_(r,C,0,A,this.viewRejector)}if(!o)o=M,this.resolutionFactors_[g]=1;else{o.length-c>M.length&&(c=o.length-M.length);const A=o[o.length-1]/M[M.length-1];this.resolutionFactors_[g]=A;const I=M.map(U=>U*=A),P=`Resolution mismatch for source ${g}, got [${I}] but expected [${o}]`;s_(o.slice(c,o.length),I,.02,P,this.viewRejector)}n?s_(n.slice(c,n.length),D,.01,`Tile size mismatch for source ${g}`,this.viewRejector):n=D,s?s_(s.slice(c,s.length),T,0,`Tile size mismatch for source ${g}`,this.viewRejector):s=T,this.sourceImagery_[g]=v.reverse(),this.sourceMasks_[g]=b.reverse()}for(let g=0,v=this.sourceImagery_.length;g<v;++g){const b=this.sourceImagery_[g];for(;b.length<o.length;)b.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let g=0;g<h;++g){if(this.sourceInfo_[g].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[g].length){this.addAlpha_=!0;break}const v=l[g],b=this.sourceInfo_[g].bands;if(b){for(let _=0;_<b.length;++_)if(v[b[_]-1]!==null){this.addAlpha_=!0;break e}continue}for(let _=0;_<v.length;++_)if(v[_]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let g=0;g<h;++g)d+=a[g];this.bandCount=d;const p=new fp({extent:t,minZoom:c,origin:r,resolutions:o,tileSizes:n});this.tileGrid=p,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const m=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:Ym(fo(t),this.projection),extent:gw(t,this.projection),zoom:m})}loadTile_(e,t,r){const n=this.getTileSize(e),s=this.sourceImagery_.length,o=new Array(s*2),a=this.nodataValues_,l=this.sourceInfo_,u=Vat();for(let c=0;c<s;++c){const h=l[c],d=this.resolutionFactors_[c],p=[Math.round(t*(n[0]*d)),Math.round(r*(n[1]*d)),Math.round((t+1)*(n[0]*d)),Math.round((r+1)*(n[1]*d))],m=this.sourceImagery_[c][e];let g;h.bands&&(g=h.bands.map(function(C){return C-1}));let v;"nodata"in h&&h.nodata!==null?v=h.nodata:g?v=g.map(function(C){return a[c][C]}):v=a[c];const b={window:p,width:n[0],height:n[1],samples:g,fillValue:v,pool:u,interleave:!1};Hat(this.convertToRGB_,m)?o[c]=m.readRGB(b):o[c]=m.readRasters(b);const _=s+c,E=this.sourceMasks_[c][e];if(!E){o[_]=Promise.resolve(null);continue}o[_]=E.readRasters({window:p,width:n[0],height:n[1],samples:[0],pool:u,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,n)).catch(function(c){throw cx(c),c})}composeTile_(e,t){const r=this.metadata_,n=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,c=this.addAlpha_,h=e[0]*e[1],d=h*o;let p;u?p=new Uint8Array(d):p=new Float32Array(d);let m=0;for(let g=0;g<h;++g){let v=c;for(let b=0;b<s;++b){const _=n[b];let E=_.min,C=_.max,T,D;if(u){const M=r[b][0];E===void 0&&(M&&wme in M?E=parseFloat(M[wme]):E=Qat(t[b][0])),C===void 0&&(M&&xme in M?C=parseFloat(M[xme]):C=elt(t[b][0])),T=255/(C-E),D=-E*T}for(let M=0;M<a[b];++M){const A=t[b][M][g];let I;if(u?I=Ti(T*A+D,0,255):I=A,!c)p[m]=I;else{let P=_.nodata;if(P===void 0){let K;_.bands?K=_.bands[M]-1:K=M,P=l[b][K]}const U=isNaN(P);(!U&&A!==P||U&&!isNaN(A))&&(v=!1,p[m]=I)}m++}if(!v){const M=s+b,A=t[M];A&&!A[0][g]&&(v=!0)}}c&&(v||(p[m]=255),m++)}return p}}_P.prototype.getView;const tlt="https://tile.googleapis.com/v1/createSession",ilt="https://tile.googleapis.com/v1/2dtiles",rlt="https://tile.googleapis.com/tile/v1/viewport",nlt=22;class slt extends yu{constructor(e){const t=!!e.highDpi,r=e.overlay!==!0;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:r,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const n={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(n.imageFormat=e.imageFormat),e.scale&&(n.scale=e.scale),t&&(n.highDpi=!0),e.layerTypes&&(n.layerTypes=e.layerTypes),e.styles&&(n.styles=e.styles),e.overlay===!0&&(n.overlay=!0),this.sessionTokenRequest_=n,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e=tlt+"?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(e,t);if(!r.ok){try{const h=await r.json();this.error_=new Error(h.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const n=await r.json(),s=this.getTilePixelRatio(1),o=[n.tileWidth/s,n.tileHeight/s];this.tileGrid=pp({extent:Ed(this.getProjection()),maxZoom:nlt,tileSize:o});const a=n.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(h,d,p){const m=h[0],g=h[1],v=h[2];return`${ilt}/${m}/${g}/${v}?session=${a}&key=${l}`};const u=parseInt(n.expiry,10)*1e3,c=Math.max(u-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),c),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[pn.ANIMATING]||e.viewHints[pn.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,r]=Ufe(Wm(e.extent),e.viewState.projection),[n,s]=Ufe(Tv(e.extent),e.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${s}&south=${r}&east=${n}&west=${t}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const u=this.sessionTokenValue_,c=this.apiKey_,h=`${rlt}?session=${u}&key=${c}&${l}`;return this.previousViewportAttribution_=await fetch(h).then(d=>d.json()).then(d=>d.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}const olt=slt;let T2e=class extends kw{constructor(e,t,r,n,s,o,a){super(t,r,n,s,o,a),this.zoomifyImage_=null,this.tileSize_=e}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const e=super.getImage();if(this.state==tt.LOADED){const t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;const r=kn(t[0],t[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e}};class alt extends yu{constructor(e){const t=e.size,r=e.tierSizeCalculation!==void 0?e.tierSizeCalculation:"default",n=e.tilePixelRatio||1,s=t[0],o=t[1],a=[],l=e.tileSize||Ny;let u=l*n;switch(r){case"default":for(;s>u||o>u;)a.push([Math.ceil(s/u),Math.ceil(o/u)]),u+=u;break;case"truncated":let D=s,M=o;for(;D>u||M>u;)a.push([Math.ceil(D/u),Math.ceil(M/u)]),D>>=1,M>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const c=[n],h=[0];for(let D=1,M=a.length;D<M;D++)c.push(n<<D),h.push(a[D-1][0]*a[D-1][1]+h[D-1]);c.reverse();const d=new fp({tileSize:l,extent:e.extent||[0,-o,s,0],resolutions:c});let p=e.url;p&&!p.includes("{TileGroup}")&&!p.includes("{tileIndex}")&&(p+="{TileGroup}/{z}-{x}-{y}.jpg");const m=eP(p);let g=l*n;function v(D){return function(M,A,I){if(!M)return;const P=M[0],U=M[1],K=M[2],L=U+K*a[P][0],F=(L+h[P])/g|0,$={z:P,x:U,y:K,tileIndex:L,TileGroup:"TileGroup"+F};return D.replace(/\{(\w+?)\}/g,function(H,V){return $[V]})}}const b=Xy(m.map(v)),_=T2e.bind(null,On(l*n));super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:_,tileGrid:d,tileUrlFunction:b,transition:e.transition}),this.zDirection=e.zDirection;const E=d.getTileCoordForCoordAndResolution(fo(d.getExtent()),c[c.length-1]),C=b(E,1,null),T=new Image;T.addEventListener("error",()=>{g=l,this.changed()}),T.src=C}}const llt=alt;function N1(i){return i.toLocaleString("en",{maximumFractionDigits:10})}class ult extends yu{constructor(e){const t=e||{};let r=t.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const n=t.version||Ns.VERSION2,s=t.sizes||[],o=t.size;Hi(o!=null&&Array.isArray(o)&&o.length==2&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,"Missing or invalid `size`");const a=o[0],l=o[1],u=t.tileSize,c=t.tilePixelRatio||1,h=t.format||"jpg",d=t.quality||(t.version==Ns.VERSION1?"native":"default");let p=t.resolutions||[];const m=t.supports||[],g=t.extent||[0,-l,a,0],v=s!=null&&Array.isArray(s)&&s.length>0,b=u!==void 0&&(typeof u=="number"&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),_=m!=null&&Array.isArray(m)&&(m.includes("regionByPx")||m.includes("regionByPct"))&&(m.includes("sizeByWh")||m.includes("sizeByH")||m.includes("sizeByW")||m.includes("sizeByPct"));let E,C,T;if(p.sort(function(I,P){return P-I}),b||_)if(u!=null&&(typeof u=="number"&&Number.isInteger(u)&&u>0?(E=u,C=u):Array.isArray(u)&&u.length>0&&((u.length==1||u[1]==null&&Number.isInteger(u[0]))&&(E=u[0],C=u[0]),u.length==2&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(E=u[0],C=u[1]):u[0]==null&&Number.isInteger(u[1])&&(E=u[1],C=u[1])))),(E===void 0||C===void 0)&&(E=Ny,C=Ny),p.length==0){T=Math.max(Math.ceil(Math.log(a/E)/Math.LN2),Math.ceil(Math.log(l/C)/Math.LN2));for(let I=T;I>=0;I--)p.push(Math.pow(2,I))}else{const I=Math.max(...p);T=Math.round(Math.log(I)/Math.LN2)}else if(E=a,C=l,p=[],v){s.sort(function(P,U){return P[0]-U[0]}),T=-1;const I=[];for(let P=0;P<s.length;P++){const U=a/s[P][0];if(p.length>0&&p[p.length-1]==U){I.push(P);continue}p.push(U),T++}if(I.length>0)for(let P=0;P<I.length;P++)s.splice(I[P]-P,1)}else p.push(1),s.push([a,l]),T=0;const D=new fp({tileSize:[E,C],extent:g,origin:ec(g),resolutions:p}),M=function(I,P,U){let K,L;const F=I[0];if(F>T)return;const $=I[1],H=I[2],V=p[F];if(!($===void 0||H===void 0||V===void 0||$<0||Math.ceil(a/V/E)<=$||H<0||Math.ceil(l/V/C)<=H)){if(_||b){const J=$*E*V,ee=H*C*V;let ie=E*V,de=C*V,te=E,z=C;if(J+ie>a&&(ie=a-J),ee+de>l&&(de=l-ee),J+E*V>a&&(te=Math.floor((a-J+V-1)/V)),ee+C*V>l&&(z=Math.floor((l-ee+V-1)/V)),J==0&&ie==a&&ee==0&&de==l)K="full";else if(!_||m.includes("regionByPx"))K=J+","+ee+","+ie+","+de;else if(m.includes("regionByPct")){const ne=N1(J/a*100),ve=N1(ee/l*100),$e=N1(ie/a*100),Xe=N1(de/l*100);K="pct:"+ne+","+ve+","+$e+","+Xe}n==Ns.VERSION3&&(!_||m.includes("sizeByWh"))?L=te+","+z:!_||m.includes("sizeByW")?L=te+",":m.includes("sizeByH")?L=","+z:m.includes("sizeByWh")?L=te+","+z:m.includes("sizeByPct")&&(L="pct:"+N1(100/V))}else if(K="full",v){const J=s[F][0],ee=s[F][1];n==Ns.VERSION3?J==a&&ee==l?L="max":L=J+","+ee:J==a?L="full":L=J+","}else L=n==Ns.VERSION3?"max":"full";return r+K+"/"+L+"/0/"+d+"."+h}},A=T2e.bind(null,On(u||256).map(function(I){return I*c}));super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:t.state,tileClass:A,tileGrid:D,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:M,transition:t.transition}),this.zDirection=t.zDirection}}const clt=ult;class hlt extends oA{constructor(e,t,r,n,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?Bs(r,u):r,h=fo(c),d=Sx(e,t,h,n),p=$O,m=new jO(e,t,c,l,d*p,n),g=m.calculateSourceExtent(),v=ih(g)?null:o(g,d,s),b=v?$t.IDLE:$t.EMPTY,_=v?v.getPixelRatio():1;super(r,n,_,b),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=m,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=v,this.sourcePixelRatio_=_,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==$t.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==$t.LOADED){const t=wi(this.targetExtent_)/this.targetResolution_,r=Sn(this.targetExtent_)/this.targetResolution_;this.canvas_=zO(t,r,this.sourcePixelRatio_,NC(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==$t.IDLE){this.state=$t.LOADING,this.changed();const e=this.sourceImage_.getState();e==$t.LOADED||e==$t.ERROR?this.reproject_():(this.sourceListenerKey_=Ni(this.sourceImage_,Bt.CHANGE,function(t){const r=this.sourceImage_.getState();(r==$t.LOADED||r==$t.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Zr(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Rc=4,RD={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class dlt extends ka{constructor(e,t){super(e),this.image=t}}class flt extends Fv{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=KT(t,e,0);e=t[r]}return e}getImage(e,t,r,n){const s=this.getProjection();if(!s||!n||Ro(s,n))return s&&(n=s),this.getImageInternal(e,t,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Ro(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&hu(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new hlt(s,n,e,t,r,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,n){if(this.loader){const s=RA(e,t,r,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&Io(this.wantedExtent_,s)||Io(this.image.getExtent(),s))&&(this.wantedResolution_&&NC(this.wantedResolution_)===o||NC(this.image.getResolution())===o)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new oA(s,o,r,this.loader),this.image.addEventListener(Bt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case $t.LOADING:this.loading=!0,r=RD.IMAGELOADSTART;break;case $t.LOADED:this.loading=!1,r=RD.IMAGELOADEND;break;case $t.ERROR:this.loading=!1,r=RD.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new dlt(r,t))}}function LA(i,e){i.getImage().src=e}function RA(i,e,t,r){const n=e/t,s=fo(i),o=Mf(wi(i)/n,Rc),a=Mf(Sn(i)/n,Rc),l=Mf((r-1)*o/2,Rc),u=o+2*l,c=Mf((r-1)*a/2,Rc),h=a+2*c;return ux(s,n,0,[u,h])}const gp=flt;function hd(i,e){const t=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&t.push(n+"="+encodeURIComponent(e[n]))});const r=t.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+r}function A2e(i,e,t,r,n,s){const o=n.getCode().split(/:(?=\d+$)/).pop(),a=t/r,l=[aC(wi(e)/a,Rc),aC(Sn(e)/a,Rc)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return hd(u,s)}function k2e(i){const e=i.load?i.load:cp,t=At(i.projection||"EPSG:3857");return function(r,n,s){s=i.hidpi?s:1;const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(o,i.params),r=RA(r,n,s,i.ratio);const a=A2e(i.url,r,n,s,t,o),l=new Image;return i.crossOrigin!==null&&(l.crossOrigin=i.crossOrigin),e(l,a).then(u=>{const c=wi(r)/u.width*s;return{image:u,extent:r,resolution:c,pixelRatio:s}})}}class plt extends gp{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:LA,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=k2e({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),cp(s))})),super.getImageInternal(e,t,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const mlt=plt;class glt extends gp{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,t,r,n){t=this.findNearestResolution(t);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==t&&s.getPixelRatio()==r&&Io(s.getExtent(),e))return s;e=e.slice(),CI(e,this.ratio_);const o=wi(e)/t,a=Sn(e)/t,l=[o*r,a*r],u=this.canvasFunction_.call(this,e,t,r,l,n);return u&&(s=new WO(e,t,r,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}const ylt=glt;function vlt(i,e,t,r){const n=wi(i),s=Sn(i),o=e[0],a=e[1],l=.0254/r;return a*n>o*s?n*t/(o*l):s*t/(a*l)}function blt(i,e,t,r,n,s,o){const a=vlt(t,r,s,o),l=fo(t),u={OPERATION:n?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:o,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,e),hd(i,u)}function D2e(i){const e=i.load||cp;return function(t,r,n){const s=new Image;i.crossOrigin!==null&&(s.crossOrigin=i.crossOrigin),t=RA(t,r,n,i.ratio);const o=wi(t)/r,a=Sn(t)/r,l=[o*n,a*n],u=blt(i.url,i.params,t,l,i.useOverlay,i.metersPerUnit||1,i.displayDpi||96);return e(s,u).then(c=>({image:c,extent:t,pixelRatio:n}))}}class _lt extends gp{constructor(e){super({interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.displayDpi_=e.displayDpi!==void 0?e.displayDpi:96,this.params_=Object.assign({},e.params),this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:LA,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.metersPerUnit_=e.metersPerUnit!==void 0?e.metersPerUnit:1,this.ratio_=e.ratio!==void 0?e.ratio:1,this.useOverlay_=e.useOverlay!==void 0?e.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=D2e({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),cp(s))})),super.getImageInternal(e,t,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(e){Object.assign(this.params_,e),this.changed()}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}changed(){this.image=null,super.changed()}}const xlt=_lt;function M2e(i){const e=i.load||cp,t=i.imageExtent,r=new Image;return i.crossOrigin!==null&&(r.crossOrigin=i.crossOrigin),()=>e(r,i.url).then(n=>{const s=wi(t)/n.width,o=Sn(t)/n.height;return{image:n,extent:t,resolution:s!==o?[s,o]:o,pixelRatio:1}})}class L2e extends gp{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:LA;super({attributions:e.attributions,interpolate:e.interpolate,projection:At(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new oA(this.imageExtent_,void 0,1,M2e({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(n,s)=>(this.image.setImage(n),r(this.image,s),cp(n))})),this.image.addEventListener(Bt.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,r,n){return Cn(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const jC="1.3.0",Eme=[101,101];function R2e(i,e,t,r,n){n.WIDTH=t[0],n.HEIGHT=t[1];const s=r.getAxisOrientation();let o;const a=kI(n.VERSION,"1.3")>=0;return n[a?"CRS":"SRS"]=r.getCode(),a&&s.substr(0,2)=="ne"?o=[e[1],e[0],e[3],e[2]]:o=e,n.BBOX=o.join(","),hd(i,n)}function I2e(i,e,t,r,n,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,l=[aC(wi(i)/a,Rc),aC(Sn(i)/a,Rc)];if(t!=1)switch(o){case"geoserver":const c=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+c:s.FORMAT_OPTIONS="dpi:"+c;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return R2e(n,i,l,r,s)}function zC(i,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:jC,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},i)}function O2e(i){const e=i.hidpi===void 0?!0:i.hidpi,t=At(i.projection||"EPSG:3857"),r=i.ratio||1.5,n=i.load||cp;return(s,o,a)=>{s=RA(s,o,a,r),a!=1&&(!e||i.serverType===void 0)&&(a=1);const l=I2e(s,o,a,t,i.url,zC(i.params,"GetMap"),i.serverType),u=new Image;return i.crossOrigin!==null&&(u.crossOrigin=i.crossOrigin),n(u,l).then(c=>({image:c,extent:s,pixelRatio:a}))}}function wlt(i,e,t){if(i.url===void 0)return;const r=At(i.projection||"EPSG:3857"),n=ux(e,t,0,Eme),s={QUERY_LAYERS:i.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,zC(i.params,"GetFeatureInfo"),i.params);const o=q0((e[0]-n[0])/t,Rc),a=q0((n[3]-e[1])/t,Rc),l=kI(s.VERSION,"1.3")>=0;return s[l?"I":"X"]=o,s[l?"J":"Y"]=a,R2e(i.url,n,Eme,r,s)}function Elt(i,e){if(i.url===void 0)return;const t={SERVICE:"WMS",VERSION:jC,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i.params===void 0||i.params.LAYER===void 0){const r=i.params.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;t.LAYER=r}if(e!==void 0){const r=At(i.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;t.SCALE=e*r/n}return Object.assign(t,i.params),hd(i.url,t)}class Slt extends gp{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:LA,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,r,n){const s=At(r),o=this.getProjection();o&&o!==s&&(t=Sx(o,s,e,t),e=Av(e,s,o));const a={url:this.url_,params:{...this.params_,...n},projection:o||s};return wlt(a,e,t)}getLegendUrl(e,t){return Elt({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=O2e({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),cp(s))})),super.getImageInternal(e,t,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const P2e=Slt;function xP(i,e,t,r){const n=document.createElement("script"),s="olc_"+Nt(e);function o(){delete window[s],n.parentNode.removeChild(n)}n.async=!0,n.src=i+(i.includes("?")?"&":"?")+(r||"callback")+"="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(n)}class Clt extends Error{constructor(e){const t="Unexpected response status: "+e.status;super(t),this.name="ResponseError",this.response=e}}class Tlt extends Error{constructor(e){super("Failed to issue request"),this.name="ClientError",this.client=e}}function F2e(i){return new Promise(function(e,t){function r(o){const a=o.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(u){const c="Error parsing response text as JSON: "+u.message;t(new Error(c));return}e(l);return}t(new Clt(a))}function n(o){t(new Tlt(o.target))}const s=new XMLHttpRequest;s.addEventListener("load",r),s.addEventListener("error",n),s.open("GET",i),s.setRequestHeader("Accept","application/json"),s.send()})}function N2e(i,e){return e.includes("://")?e:new URL(e,i).href}const Alt={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},klt={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function $2e(i,e){if(!e.length)return i;const t=new URL(i,"file:/");if(t.pathname.split("/").includes("collections"))return cx('The "collections" query parameter cannot be added to collection endpoints'),i;const r=e.map(o=>encodeURIComponent(o)).join(",");t.searchParams.append("collections",r);const n=i.split("?")[0],s=decodeURIComponent(t.searchParams.toString());return`${n}?${s}`}function Dlt(i,e,t){let r,n;for(let s=0;s<i.length;++s){const o=i[s];if(o.rel==="item"){if(o.type===e){r=o.href;break}(Alt[o.type]||!n&&o.type.startsWith("image/"))&&(n=o.href)}}if(!r)if(n)r=n;else throw new Error('Could not find "item" link');return t&&(r=$2e(r,t)),r}function Mlt(i,e,t,r){let n,s;const o={};for(let a=0;a<i.length;++a){const l=i[a];if(o[l.type]=l.href,l.rel==="item"){if(l.type===e){n=l.href;break}klt[l.type]&&(s=l.href)}}if(!n&&t)for(let a=0;a<t.length;++a){const l=t[a];if(o[l]){n=o[l];break}}if(!n)if(s)n=s;else throw new Error('Could not find "item" link');return r&&(n=$2e(n,r)),n}function Sme(i,e,t,r){let n=i.projection;if(!n&&(n=At(e.crs),!n))throw new Error(`Unsupported CRS: ${e.crs}`);const s=e.orderedAxes,o=(s?s.slice(0,2).map(T=>T.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):n.getAxisOrientation().substr(0,2))!=="en",a=e.tileMatrices,l={};for(let T=0;T<a.length;++T){const D=a[T];l[D.id]=D}const u={},c=[];if(r)for(let T=0;T<r.length;++T){const D=r[T],M=D.tileMatrix;c.push(M),u[M]=D}else for(let T=0;T<a.length;++T){const D=a[T].id;c.push(D)}const h=c.length,d=new Array(h),p=new Array(h),m=new Array(h),g=new Array(h),v=[-1/0,-1/0,1/0,1/0];for(let T=0;T<h;++T){const D=c[T],M=l[D],A=M.pointOfOrigin;o?d[T]=[A[1],A[0]]:d[T]=A,p[T]=M.cellSize,m[T]=[M.matrixWidth,M.matrixHeight],g[T]=[M.tileWidth,M.tileHeight];const I=u[D];if(I){const P=M.cellSize*M.tileWidth,U=d[T][0]+I.minTileCol*P,K=d[T][0]+(I.maxTileCol+1)*P,L=M.cellSize*M.tileHeight,F=M.cornerOfOrigin==="bottomLeft";let $,H;F?($=d[T][1]+I.minTileRow*L,H=d[T][1]+(I.maxTileRow+1)*L):($=d[T][1]-(I.maxTileRow+1)*L,H=d[T][1]-I.minTileRow*L),Bs(v,[U,$,K,H],v)}}const b=new fp({origins:d,resolutions:p,sizes:m,tileSizes:g,extent:r?v:void 0}),_=i.context,E=i.url;function C(T,D,M){if(!T)return;const A=c[T[0]],I=l[A],P=I.cornerOfOrigin==="bottomLeft",U={tileMatrix:A,tileCol:T[1],tileRow:P?-T[2]-1:T[2]};if(r){const L=u[I.id];if(U.tileCol<L.minTileCol||U.tileCol>L.maxTileCol||U.tileRow<L.minTileRow||U.tileRow>L.maxTileRow)return}Object.assign(U,_);const K=t.replace(/\{(\w+?)\}/g,function(L,F){return U[F]});return N2e(E,K)}return{grid:b,urlTemplate:t,urlFunction:C}}function Llt(i,e){const t=e.tileMatrixSetLimits;let r;if(e.dataType==="map")r=Dlt(e.links,i.mediaType,i.collections);else if(e.dataType==="vector")r=Mlt(e.links,i.mediaType,i.supportedMediaTypes,i.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(e.tileMatrixSet)return Sme(i,e.tileMatrixSet,r,t);const n=e.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!n)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const s=n.href,o=N2e(i.url,s);return F2e(o).then(function(a){return Sme(i,a,r,t)})}function B2e(i){return F2e(i.url).then(function(e){return Llt(i,e)})}class Rlt extends yu{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,context:e.context||null,collections:e.collections};B2e(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){cx(e),this.setState("error")}}const Ilt=Rlt;let Olt=class extends Nv{constructor(e,t,r,n,s,o){super(e,t,o),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==tt.IDLE&&(this.setState(tt.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(tt.ERROR)}setFeatures(e){this.features_=e,this.setState(tt.LOADED)}setLoader(e){this.loader_=e}};const Cme=[];class Plt extends Nv{constructor(e,t,r,n){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.wrappedTileCoord=r}getContext(e){const t=Nt(e);return t in this.context_||(this.context_[t]=kn(1,1,Cme)),this.context_[t]}hasContext(e){return Nt(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=Nt(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];Xm(t),Cme.push(t.canvas),delete this.context_[e]}super.release()}}class Mw extends iP{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Ed(t),n=e.tileGrid||pp({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:n,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Flt,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new DA(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Olt,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],r=this.tileCache;if(r.getCount()===0)return t;const n=WEe(r.peekFirstKey())[0],s=this.tileGrid;return r.forEach(function(o){if(o.tileCoord[0]!==n||o.getState()!==tt.LOADED)return;const a=o.getSourceTiles();for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.tileCoord;if(Cn(e,s.getTileCoordExtent(h))){const d=c.getFeatures();if(d)for(let p=0,m=d.length;p<m;++p){const g=d[p],v=g.getGeometry();Cn(e,v.getExtent())&&t.push(g)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const r=this.getTileCacheForProjection(e),n=Object.keys(t).reduce((s,o)=>{const a=gst(o),l=r.peek(a);if(l){const u=l.sourceTiles;for(let c=0,h=u.length;c<h;++c)s[u[c].getKey()]=!0}return s},{});super.expireCache(e,t),this.sourceTileCache.expireCache(n)}getSourceTiles(e,t,r){if(r.getState()===tt.IDLE){r.setState(tt.LOADING);const n=r.wrappedTileCoord,s=this.getTileGridForProjection(t),o=s.getTileCoordExtent(n),a=n[0],l=s.getResolution(a);il(o,-l,o);const u=this.tileGrid,c=u.getExtent();c&&Bs(o,c,o);const h=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(o,h,d=>{const p=this.tileUrlFunction(d,e,t),m=this.sourceTileCache.containsKey(p)?this.sourceTileCache.get(p):new this.tileClass(d,p?tt.IDLE:tt.EMPTY,p,this.format_,this.tileLoadFunction);r.sourceTiles.push(m);const g=m.getState();if(g<tt.LOADED){const v=b=>{this.handleTileChange(b);const _=m.getState();if(_===tt.LOADED||_===tt.ERROR){const E=m.getKey();E in r.errorTileKeys?m.getState()===tt.LOADED&&delete r.errorTileKeys[E]:r.loadingSourceTiles--,_===tt.ERROR?r.errorTileKeys[E]=!0:m.removeEventListener(Bt.CHANGE,v),r.loadingSourceTiles===0&&r.setState(ud(r.errorTileKeys)?tt.LOADED:tt.ERROR)}};m.addEventListener(Bt.CHANGE,v),r.loadingSourceTiles++}g===tt.IDLE&&(m.extent=u.getTileCoordExtent(d),m.projection=t,m.resolution=u.getResolution(d[0]),this.sourceTileCache.set(p,m),m.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(d=>d.getState()===tt.ERROR)?tt.ERROR:tt.LOADED)}return r.sourceTiles}getTile(e,t,r,n,s){const o=Zc(e,t,r),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const u=[e,t,r];let c=this.getTileCoordForTileUrlFunction(u,s);const h=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(s);if(c&&h){const g=d.getTileCoordExtent(c);il(g,-d.getResolution(e),g),Cn(h,g)||(c=null)}let p=!0;if(c!==null){const g=this.tileGrid,v=d.getResolution(e),b=g.getZForResolution(v,1),_=d.getTileCoordExtent(c);il(_,-v,_),g.forEachTileCoord(_,b,E=>{p=p&&!this.tileUrlFunction(E,n,s)})}const m=new Plt(u,p?tt.EMPTY:tt.IDLE,c,this.getSourceTiles.bind(this,n,s));return m.key=a,l?(m.interimTile=l,m.refreshInterimChain(),this.tileCache.replace(o,m)):this.tileCache.set(o,m),m}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const n=this.tileGrid,s=n.getResolutions().slice(),o=s.map(function(u,c){return n.getOrigin(c)}),a=s.map(function(u,c){return n.getTileSize(c)}),l=_xe+1;for(let u=s.length;u<l;++u)s.push(s[u-1]/2),o.push(o[u-1]),a.push(a[u-1]);r=new fp({extent:n.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const n=this.getTileGridForProjection(r),s=On(n.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}function Flt(i,e){i.setLoader(function(t,r,n){OEe(e,i.getFormat(),t,r,n,i.onLoad.bind(i),i.onError.bind(i))})}class Nlt extends Mw{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null,collections:e.collections};B2e(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){cx(e),this.setState("error")}}const $lt=Nlt,j2e='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Blt extends Qf{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[j2e];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",n=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}const z2e=Blt;let U2e=!0;try{new ImageData(10,10)}catch{U2e=!1}let ID;function jlt(i,e,t){if(U2e)return new ImageData(i,e,t);ID||(ID=document.createElement("canvas").getContext("2d"));const r=ID.createImageData(e,t);return r.data.set(i),r}function G2e(i){let e=!0;try{new ImageData(10,10)}catch{e=!1}function t(r,n,s){return e?new ImageData(r,n,s):{data:r,width:n,height:s}}return function(r){const n=r.buffers,s=r.meta,o=r.imageOps,a=r.width,l=r.height,u=n.length,c=n[0].byteLength;if(o){const m=new Array(u);for(let v=0;v<u;++v)m[v]=t(new Uint8ClampedArray(n[v]),a,l);return i(m,s).data.buffer}const h=new Uint8ClampedArray(c),d=new Array(u),p=new Array(u);for(let m=0;m<u;++m)d[m]=new Uint8ClampedArray(n[m]),p[m]=[0,0,0,0];for(let m=0;m<c;m+=4){for(let v=0;v<u;++v){const b=d[v];p[v][0]=b[m],p[v][1]=b[m+1],p[v][2]=b[m+2],p[v][3]=b[m+3]}const g=i(p,s);h[m]=g[0],h[m+1]=g[1],h[m+2]=g[2],h[m+3]=g[3]}return h.buffer}}function zlt(i,e){const r=Object.keys(i.lib||{}).map(function(s){return"const "+s+" = "+i.lib[s].toString()+";"}).concat(["const __minion__ = ("+G2e.toString()+")(",i.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return n.addEventListener("message",e),n}function Ult(i,e){const t=G2e(i.operation);let r=!1;return{postMessage:function(n){setTimeout(function(){r||e({data:{buffer:t(n),meta:n.meta}})},0)},terminate:function(){r=!0}}}class Glt extends fw{constructor(e){super(),this._imageOps=!!e.imageOps;let t;e.threads===0?t=0:this._imageOps?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let n=0;n<t;++n)r[n]=zlt(e,this._onWorkerMessage.bind(this,n));else r[0]=Ult(e,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()}_enqueue(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||this._queue.length===0)return;const e=this._queue.shift();this._job=e;const t=e.inputs[0].width,r=e.inputs[0].height,n=e.inputs.map(function(l){return l.data.buffer}),s=this._workers.length;if(this._running=s,s===1){this._workers[0].postMessage({buffers:n,meta:e.meta,imageOps:this._imageOps,width:t,height:r},n);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const u=l*a,c=[];for(let h=0,d=n.length;h<d;++h)c.push(n[h].slice(u,u+a));this._workers[l].postMessage({buffers:c,meta:e.meta,imageOps:this._imageOps,width:t,height:r},c)}}_onWorkerMessage(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,this._running===0&&this._resolveJob())}_resolveJob(){const e=this._job,t=this._workers.length;let r,n;if(t===1)r=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),n=new Array(t);const o=4*Math.ceil(s/4/t);for(let a=0;a<t;++a){const l=this._dataLookup[a].buffer,u=a*o;r.set(new Uint8ClampedArray(l),u),n[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},e.callback(null,jlt(r,e.inputs[0].width,e.inputs[0].height),n),this._dispatch()}disposeInternal(){for(let e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}const Tme={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Ame extends ka{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class q2e extends gp{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Vlt(e.sources);const t=this.changed.bind(this);for(let r=0,n=this.layers_.length;r<n;++r)this.layers_[r].addEventListener(Bt.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new fwe(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:ss(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:Hlt(this.layers_),pixelRatio:1,pixelToCoordinateTransform:ss(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Nt(this),renderTargets:{}},this.setAttributions(function(r){const n=[];for(let s=0,o=e.sources.length;s<o;++s){const a=e.sources[s],l=a instanceof Fv?a:a.getSource();if(!l)continue;const u=l.getAttributions();if(typeof u=="function"){const c=u(r);n.push.apply(n,c)}}return n.length!==0?n:null}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Glt({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);const s=fo(e);n.size[0]=Math.ceil(wi(e)/t),n.size[1]=Math.ceil(Sn(e)/t),n.extent=[s[0]-n.size[0]*t/2,s[1]-n.size[1]*t/2,s[0]+n.size[0]*t/2,s[1]+n.size[1]*t/2],n.time=Date.now();const o=n.viewState;return o.center=s,o.projection=r,o.resolution=t,n}allSourcesReady_(){let e=!0,t;for(let r=0,n=this.layers_.length;r<n;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==o||!hu(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const o=qlt(this.layers_[s],e);if(o)r[s]=o;else return}const n={};this.dispatchEvent(new Ame(Tme.BEFOREOPERATIONS,e,n)),this.processor_.process(r,n,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,n){if(t||!r)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!hu(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(wi(s)/o),u=Math.round(Sn(s)/o);a=kn(l,u),this.renderedImageCanvas_=new WO(s,o,1,a.canvas)}a.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Ame(Tme.AFTEROPERATIONS,e,n))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,n=this.layers_.length;r<n&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}q2e.prototype.dispose;let om=null;function qlt(i,e){const t=i.getRenderer();if(!t)throw new Error("Unsupported layer type: "+i);if(!t.prepareFrame(e))return null;const r=e.size[0],n=e.size[1];if(r===0||n===0)return null;const s=t.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===n)return o.getContext("2d").getImageData(0,0,r,n)}if(!om)om=kn(r,n,void 0,{willReadFrequently:!0});else{const a=om.canvas;a.width!==r||a.height!==n?om=kn(r,n,void 0,{willReadFrequently:!0}):om.clearRect(0,0,r,n)}return om.drawImage(o,0,0,r,n),om.getImageData(0,0,r,n)}function Hlt(i){return i.map(function(e){return e.getLayerState()})}function Vlt(i){const e=i.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=Wlt(i[r]);return t}function Wlt(i){let e;return i instanceof Fv?i instanceof $v?e=new Tx({source:i}):i instanceof gp&&(e=new kA({source:i})):e=i,e}const Ylt=q2e,Xlt='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',Zlt='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',Klt='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',Jlt={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},alidade_satellite:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},Qlt={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class eut extends Qf{constructor(e){const t=e.layer.indexOf("-"),r=t==-1?e.layer:e.layer.slice(0,t),n=Qlt[r]||{minZoom:0,maxZoom:20,retina:!0},s=Jlt[e.layer],o=e.apiKey?"?api_key="+e.apiKey:"",a=n.retina&&e.retina?"@2x":"",l=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+a+"."+s.extension+o,u=[Xlt,Zlt,j2e];e.layer.startsWith("stamen_")&&u.splice(1,0,Klt),super({attributions:u,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:n.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:n.minZoom,opaque:s.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:l,tilePixelRatio:a?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}const tut=eut;class iut extends yu{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=ha(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,r,n,s,o){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const u=jc(qO(e),a.length);l=a[u]}return A2e(l,r,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(e[0]),n,s,o)}getTilePixelRatio(e){return this.hidpi_?e:1}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,r){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),n.getResolutions().length<=e[0])return;t!=1&&!this.hidpi_&&(t=1);const s=n.getTileCoordExtent(e,this.tmpExtent_);let o=On(n.getTileSize(e[0]),this.tmpSize);t!=1&&(o=Wxe(o,t,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,o,s,t,r,a)}}const rut=iut;class nut extends Qf{constructor(e){e=e||{},super({opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection,url:e.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,r)=>{const n=t.getTileCoord()[0],s=On(this.tileGrid.getTileSize(n)),o=kn(s[0],s[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,s[0]+.5,s[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(r,s[0]/2,s[1]/2,s[0]),o.fillText(r,s[0]/2,s[1]/2,s[0]),t.setImage(o.canvas)}})}}const sut=nut;class H2e extends yu{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:At("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)xP(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=At("EPSG:4326"),r=this.getProjection();let n;if(e.bounds!==void 0){const u=_d(t,r);n=zy(e.bounds,u)}const s=Ed(r),o=e.minzoom||0,a=e.maxzoom||22,l=pp({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=QO(e.tiles,l),e.attribution&&!this.getAttributions()){const u=n!==void 0?n:s;this.setAttributions(function(c){return Cn(u,c.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class wP extends yu{constructor(e){e=e||{};const t=Object.assign({},e.params),r="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=ha(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,n){const s=At(r),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=Av(e,s,o),u=Sx(o,s,e,t),c=a.getZForResolution(u,this.zDirection),h=a.getResolution(c),d=a.getTileCoordForCoordAndZ(l,c);if(a.getResolutions().length<=d[0])return;let p=a.getTileCoordExtent(d,this.tmpExtent_);const m=this.gutter_;m!==0&&(p=il(p,h*m,p));const g={QUERY_LAYERS:this.params_.LAYERS};Object.assign(g,zC(this.params_,"GetFeatureInfo"),n);const v=Math.floor((l[0]-p[0])/h),b=Math.floor((p[3]-l[1])/h);return g[this.v13_?"I":"X"]=v,g[this.v13_?"J":"Y"]=b,this.getRequestUrl_(d,p,1,o||s,g)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:jC,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;r.LAYER=n}if(e!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*n/s}return Object.assign(r,t),hd(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,n,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=jc(qO(e),o.length);a=o[l]}return I2e(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),r,n,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||jC;this.v13_=kI(e,"1.3")>=0}tileUrlFunction(e,t,r){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),n.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=n.getResolution(e[0]);let o=n.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=il(o,s*a,o));const l=Object.assign({},zC(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,r,l)}}class out extends Nv{constructor(e,t,r,n,s,o){super(e,t),this.src_=r,this.extent_=n,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(e){if(!this.grid_||!this.keys_)return null;const t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof n!="string")return null;let s=n.charCodeAt(Math.floor(t*n.length));s>=93&&s--,s>=35&&s--,s-=32;let o=null;if(s in this.keys_){const a=this.keys_[s];this.data_&&a in this.data_?o=this.data_[a]:o=a}return o}forDataAtCoordinate(e,t,r){this.state==tt.EMPTY&&r===!0?(this.state=tt.IDLE,Fy(this,Bt.CHANGE,function(n){t(this.getData(e))},this),this.loadInternal_()):r===!0?setTimeout(()=>{t(this.getData(e))},0):t(this.getData(e))}getKey(){return this.src_}handleError_(){this.state=tt.ERROR,this.changed()}handleLoad_(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=tt.LOADED,this.changed()}loadInternal_(){if(this.state==tt.IDLE)if(this.state=tt.LOADING,this.jsonp_)xP(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(e){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(tt.EMPTY)}}class aut extends $v{constructor(e){if(super({projection:At("EPSG:3857"),state:"loading",wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection}),this.preemptive_=e.preemptive!==void 0?e.preemptive:!0,this.tileUrlFunction_=not,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)xP(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(e,t,r,n){if(this.tileGrid){const s=this.tileGrid.getZForResolution(t,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(e,s);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(e,r,n)}else n===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(e){const t=At("EPSG:4326"),r=this.getProjection();let n;if(e.bounds!==void 0){const c=_d(t,r);n=zy(e.bounds,c)}const s=Ed(r),o=e.minzoom||0,a=e.maxzoom||22,l=pp({extent:s,maxZoom:a,minZoom:o});this.tileGrid=l,this.template_=e.template;const u=e.grids;if(!u){this.setState("error");return}if(this.tileUrlFunction_=QO(u,l),e.attribution){const c=n!==void 0?n:s;this.setAttributions(function(h){return Cn(c,h.extent)?[e.attribution]:null})}this.setState("ready")}getTile(e,t,r,n,s){const o=Zc(e,t,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);const a=[e,t,r],l=this.getTileCoordForTileUrlFunction(a,s),u=this.tileUrlFunction_(l,n,s),c=new out(a,u!==void 0?tt.IDLE:tt.EMPTY,u!==void 0?u:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,c),c}useTile(e,t,r){const n=Zc(e,t,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const lut=aut;class EP extends yu{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=eP(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=Xy(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(Xy(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?hd(e,r):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in r?r[a.toLowerCase()]:o});const n=this.tileGrid,s=this.dimensions_;return function(o,a,l){if(!o)return;const u={TileMatrix:n.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(u,s);let c=e;return t=="KVP"?c=hd(c,u):c=c.replace(/\{(\w+?)\}/g,function(h,d){return u[d]}),c}}}function V2e(i,e){const t=i.Contents.Layer,r=t==null?void 0:t.find(function(K){return K.Identifier==e.layer});if(!r)return null;const n=i.Contents.TileMatrixSet;let s;r.TileMatrixSetLink.length>1?"projection"in e?s=r.TileMatrixSetLink.findIndex(function(K){const F=n.find(function(V){return V.Identifier==K.TileMatrixSet}).SupportedCRS,$=At(F),H=At(e.projection);return $&&H?Ro($,H):F==e.projection}):s=r.TileMatrixSetLink.findIndex(function(K){return K.TileMatrixSet==e.matrixSet}):s=0,s<0&&(s=0);const o=r.TileMatrixSetLink[s].TileMatrixSet,a=r.TileMatrixSetLink[s].TileMatrixSetLimits;let l=r.Format[0];"format"in e&&(l=e.format),s=r.Style.findIndex(function(K){return"style"in e?K.Title==e.style:K.isDefault}),s<0&&(s=0);const u=r.Style[s].Identifier,c={};"Dimension"in r&&r.Dimension.forEach(function(K,L,F){const $=K.Identifier;let H=K.Default;H===void 0&&(H=K.Value[0]),c[$]=H});const d=i.Contents.TileMatrixSet.find(function(K){return K.Identifier==o});let p;const m=d.SupportedCRS;if(m&&(p=At(m)),"projection"in e){const K=At(e.projection);K&&(!p||Ro(K,p))&&(p=K)}let g=!1;const v=p.getAxisOrientation().substr(0,2)=="ne";let b=d.TileMatrix[0],_={MinTileCol:0,MinTileRow:0,MaxTileCol:b.MatrixWidth-1,MaxTileRow:b.MatrixHeight-1};if(a){_=a[a.length-1];const K=d.TileMatrix.find(L=>L.Identifier===_.TileMatrix||d.Identifier+":"+L.Identifier===_.TileMatrix);K&&(b=K)}const E=b.ScaleDenominator*28e-5/p.getMetersPerUnit(),C=v?[b.TopLeftCorner[1],b.TopLeftCorner[0]]:b.TopLeftCorner,T=b.TileWidth*E,D=b.TileHeight*E;let M=d.BoundingBox;M&&v&&(M=[M[1],M[0],M[3],M[2]]);let A=[C[0]+T*_.MinTileCol,C[1]-D*(1+_.MaxTileRow),C[0]+T*(1+_.MaxTileCol),C[1]-D*_.MinTileRow];if(M!==void 0&&!Io(M,A)){const K=r.WGS84BoundingBox,L=At("EPSG:4326").getExtent();if(A=M,K)g=K[0]===L[0]&&K[2]===L[2];else{const F=RI(M,d.SupportedCRS,"EPSG:4326");g=F[0]-1e-10<=L[0]&&F[2]+1e-10>=L[2]}}const I=Jst(d,A,a),P=[];let U=e.requestEncoding;if(U=U!==void 0?U:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const K=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let L=0,F=K.length;L<F;++L)if(K[L].Constraint){const H=K[L].Constraint.find(function(V){return V.name=="GetEncoding"}).AllowedValues.Value;if(U===""&&(U=H[0]),U==="KVP")H.includes("KVP")&&P.push(K[L].href);else break}else K[L].href&&(U="KVP",P.push(K[L].href))}return P.length===0&&(U="REST",r.ResourceURL.forEach(function(K){K.resourceType==="tile"&&(l=K.format,P.push(K.template))})),{urls:P,layer:e.layer,matrixSet:o,format:l,projection:p,requestEncoding:U,tileGrid:I,style:u,dimensions:c,wrapX:g,crossOrigin:e.crossOrigin}}function uut(i,e){const t=new GO(32),r=i.getExtent();return function(n,s){t.expireCache(),r&&(n=Bs(r,n));const o=i.getZForResolution(s),a=[];return i.forEachTileCoord(n,o,l=>{const u=l.toString();if(!t.containsKey(u)){const c=e(l);t.set(u,c)}a.push(t.get(u))}),a}}const cut=Object.freeze(Object.defineProperty({__proto__:null,BingMaps:uot,CartoDB:hot,Cluster:fot,DataTile:rP,GeoTIFF:_P,Google:olt,IIIF:clt,Image:gp,ImageArcGISRest:mlt,ImageCanvas:ylt,ImageMapGuide:xlt,ImageStatic:L2e,ImageWMS:P2e,OGCMapTile:Ilt,OGCVectorTile:$lt,OSM:z2e,Raster:Ylt,Source:Fv,StadiaMaps:tut,Tile:$v,TileArcGISRest:rut,TileDebug:sut,TileImage:yu,TileJSON:H2e,TileWMS:wP,UTFGrid:lut,UrlTile:iP,Vector:dp,VectorTile:Mw,WMTS:EP,XYZ:Qf,Zoomify:llt,createArcGISRestLoader:k2e,createMapGuideLoader:D2e,createStaticLoader:M2e,createWMSLoader:O2e,sourcesFromTileGrid:uut},Symbol.toStringTag,{value:"Module"})),ts={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},hut={ERROR:"error"};class dut extends ka{constructor(e){super(hut.ERROR),this.code=e.code,this.message=e.message}}class fut extends mu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=eA,this.watchId_=void 0,this.addChangeListener(ts.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(ts.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=_d(At("EPSG:4326"),e),this.position_&&this.set(ts.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(ts.ACCURACY,t.accuracy),this.set(ts.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(ts.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(ts.HEADING,t.heading===null?void 0:Gu(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const r=this.transform_(this.position_);this.set(ts.POSITION,r.slice()),this.set(ts.SPEED,t.speed===null?void 0:t.speed);const n=qYe(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(ts.ACCURACY_GEOMETRY,n),this.changed()}positionError_(e){this.dispatchEvent(new dut(e))}getAccuracy(){return this.get(ts.ACCURACY)}getAccuracyGeometry(){return this.get(ts.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(ts.ALTITUDE)}getAltitudeAccuracy(){return this.get(ts.ALTITUDE_ACCURACY)}getHeading(){return this.get(ts.HEADING)}getPosition(){return this.get(ts.POSITION)}getProjection(){return this.get(ts.PROJECTION)}getSpeed(){return this.get(ts.SPEED)}getTracking(){return this.get(ts.TRACKING)}getTrackingOptions(){return this.get(ts.TRACKING_OPTIONS)}setProjection(e){this.set(ts.PROJECTION,At(e))}setTracking(e){this.set(ts.TRACKING,e)}setTrackingOptions(e){this.set(ts.TRACKING_OPTIONS,e)}}const Jo={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class W2e extends mu{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+EXe,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Jo.ELEMENT,this.handleElementChanged),this.addChangeListener(Jo.MAP,this.handleMapChanged),this.addChangeListener(Jo.OFFSET,this.handleOffsetChanged),this.addChangeListener(Jo.POSITION,this.handlePositionChanged),this.addChangeListener(Jo.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Jo.ELEMENT)}getId(){return this.id}getMap(){return this.get(Jo.MAP)||null}getOffset(){return this.get(Jo.OFFSET)}getPosition(){return this.get(Jo.POSITION)}getPositioning(){return this.get(Jo.POSITIONING)}handleElementChanged(){Qxe(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(dC(this.element),Zr(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ni(e,bc.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Jo.ELEMENT,e)}setMap(e){this.set(Jo.MAP,e)}setOffset(e){this.set(Jo.OFFSET,e)}setPosition(e){this.set(Jo.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Jo.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),s=this.getRect(n,[mXe(n),gXe(n)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Io(r,s)){const a=s[0]-r[0],l=r[2]-s[2],u=s[1]-r[1],c=r[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),u<0?h[1]=u-o:c<0&&(h[1]=Math.abs(c)+o),h[0]!==0||h[1]!==0){const d=t.getView().getCenterInternal(),p=t.getPixelFromCoordinateInternal(d);if(!p)return;const m=[p[0]+h[0],p[1]+h[1]],g=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(m),duration:g.duration,easing:g.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),n=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(Jo.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(r,n)}updateRenderedPosition(e,t){const r=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+n[0])+"px",a=Math.round(e[1]+n[1])+"px";let l="0%",u="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?u="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(u="-50%");const c=`translate(${l}, ${u}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,r.transform=c)}getOptions(){return this.options}}const kme=0,N_=1,Dme=[0,0,0,0],gy=[],OD={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class PD extends ka{constructor(e,t,r){super(e),this.features=t,this.mapBrowserEvent=r}}class put extends mg{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:wwe,this.defaultDeleteCondition_=function(r){return MZe(r)&&OZe(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:bC,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new _L,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new hp({source:new dp({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:gut(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new aa(this.source_.getFeatures()),this.source_.addEventListener(ao.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(ao.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(na.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(na.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const n=this.SEGMENT_WRITERS_[t.getType()];n&&n(e,t)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),e.addEventListener(Bt.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new aa;const r=this.featuresBeingModified_.getArray();for(let n=0,s=t.length;n<s;++n){const o=t[n];for(let a=0,l=o.length;a<l;++a){const u=o[a].feature;u&&!r.includes(u)&&this.featuresBeingModified_.push(u)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new PD(OD.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(Bt.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,r=[];t.forEach(function(n){e===n.feature&&r.push(n)});for(let n=r.length-1;n>=0;--n){const s=r[n];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const r=t.getCoordinates(),n={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)}writeMultiPointGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n],a={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length-1;n<s;++n){const o=r.slice(n,n+2),a={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert(Lo(o),a)}}writeMultiLineStringGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length-1;a<l;++a){const u=o.slice(a,a+2),c={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert(Lo(u),c)}}}writePolygonGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length-1;a<l;++a){const u=o.slice(a,a+2),c={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert(Lo(u),c)}}}writeMultiPolygonGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length;a<l;++a){const u=o[a];for(let c=0,h=u.length-1;c<h;++c){const d=u.slice(c,c+2),p={feature:e,geometry:t,depth:[a,n],index:c,segment:d};this.rBush_.insert(Lo(d),p)}}}}writeCircleGeometry_(e,t){const r=t.getCenter(),n={feature:e,geometry:t,index:kme,segment:[r,r]},s={feature:e,geometry:t,index:N_,segment:[r,r]},o=[n,s];n.featureSegments=o,s.featureSegments=o,this.rBush_.insert(hy(r),n);let a=t;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const r=t.getGeometriesArray();for(let n=0;n<r.length;++n){const s=r[n],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,t,r){let n=this.vertexFeature_;return n?n.getGeometry().setCoordinates(e):(n=new Tn(new In(e)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n)),n.set("features",t),n.set("geometries",r),n}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Mr.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Mr.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Mr.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],n=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],l=a[0],u=l.feature;r.includes(u)||r.push(u);const c=l.geometry;n.includes(c)||n.push(c);const h=l.depth;let d;const p=l.segment,m=a[1];for(;t.length<c.getStride();)t.push(p[m][t.length]);switch(c.getType()){case"Point":d=t,p[0]=t,p[1]=t;break;case"MultiPoint":d=c.getCoordinates(),d[l.index]=t,p[0]=t,p[1]=t;break;case"LineString":d=c.getCoordinates(),d[l.index+m]=t,p[m]=t;break;case"MultiLineString":d=c.getCoordinates(),d[h[0]][l.index+m]=t,p[m]=t;break;case"Polygon":d=c.getCoordinates(),d[h[0]][l.index+m]=t,p[m]=t;break;case"MultiPolygon":d=c.getCoordinates(),d[h[1]][h[0]][l.index+m]=t,p[m]=t;break;case"Circle":if(p[0]=t,p[1]=t,l.index===kme)this.changingFeature_=!0,c.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let g=lC(gs(c.getCenter()),gs(t));c.setRadius(g),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(c,d)}this.createOrUpdateVertexFeature_(t,r,n)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const r=this.vertexFeature_;if(r){e.map.getView().getProjection();const n=[],s=r.getGeometry().getCoordinates(),o=Lo([s]),a=this.rBush_.getInExtent(o),l={};a.sort(mut);for(let u=0,c=a.length;u<c;++u){const h=a[u],d=h.segment;let p=Nt(h.geometry);const m=h.depth;if(m&&(p+="-"+m.join("-")),l[p]||(l[p]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===N_){const g=Lme(t,h);tu(g,s)&&!l[p][0]&&(this.dragSegments_.push([h,0]),l[p][0]=h);continue}if(tu(d[0],s)&&!l[p][0]){this.dragSegments_.push([h,0]),l[p][0]=h;continue}if(tu(d[1],s)&&!l[p][1]){if(l[p][0]&&l[p][0].index===0){let g=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":g=g[m[1]];case"Polygon":if(h.index!==g[m[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),l[p][1]=h;continue}Nt(d)in this.vertexSegments_&&!l[p][0]&&!l[p][1]&&this.insertVertexCondition_(e)&&n.push(h)}n.length&&this.willModifyFeatures_(e,[n]);for(let u=n.length-1;u>=0;--u)this.insertVertex_(n[u],s)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const r=this.dragSegments_[t][0],n=r.geometry;if(n.getType()==="Circle"){const s=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(hy(s),o);let l=n;this.rBush_.update(l.getExtent(),a)}else this.rBush_.update(Lo(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new PD(OD.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,r){const n=r||t.getCoordinateFromPixel(e);t.getView().getProjection();const s=function(l,u){return Mme(n,l)-Mme(n,u)};let o,a;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,c,h)=>{h&&h.getType()==="Point"&&(h=new In(Ym(h.getCoordinates())));const d=h||u.getGeometry();if(u instanceof Tn&&this.features_.getArray().includes(u)){a=d;const p=u.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:u,geometry:a,segment:[p,p]}]}return!0},{layerFilter:l})}if(!o){const l=kl(hy(n,Dme)),u=t.getView().getResolution()*this.pixelTolerance_,c=gw(il(l,u,Dme));o=this.rBush_.getInExtent(c)}if(o&&o.length>0){const l=o.sort(s)[0],u=l.segment;let c=Lme(n,l);const h=t.getPixelFromCoordinate(c);let d=lC(e,h);if(a||d<=this.pixelTolerance_){const p={};if(p[Nt(u)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-n[0],this.delta_[1]=c[1]-n[1]),l.geometry.getType()==="Circle"&&l.index===N_)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);else{const m=t.getPixelFromCoordinate(u[0]),g=t.getPixelFromCoordinate(u[1]),v=Uy(h,m),b=Uy(h,g);d=Math.sqrt(Math.min(v,b)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(c=v>b?u[1]:u[0]),this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);const _={};_[Nt(l.geometry)]=!0;for(let E=1,C=o.length;E<C;++E){const T=o[E].segment;if(tu(u[0],T[0])&&tu(u[1],T[1])||tu(u[0],T[1])&&tu(u[1],T[0])){const D=Nt(o[E].geometry);D in _||(_[D]=!0,p[Nt(T)]=!0)}else break}}this.vertexSegments_=p;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const r=e.segment,n=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,l);const u=this.rBush_;u.remove(e),this.updateSegmentIndices_(s,a,o,1);const c={segment:[r[0],t],feature:n,geometry:s,depth:o,index:a};u.insert(Lo(c.segment),c),this.dragSegments_.push([c,1]);const h={segment:[t,r[1]],feature:n,geometry:s,depth:o,index:a+1};u.insert(Lo(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Mr.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new PD(OD.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let r=!1,n,s,o,a,l,u,c,h,d,p,m;for(l=e.length-1;l>=0;--l)o=e[l],p=o[0],m=Nt(p.feature),p.depth&&(m+="-"+p.depth.join("-")),m in t||(t[m]={}),o[1]===0?(t[m].right=p,t[m].index=p.index):o[1]==1&&(t[m].left=p,t[m].index=p.index+1);for(m in t){switch(d=t[m].right,c=t[m].left,u=t[m].index,h=u-1,c!==void 0?p=c:p=d,h<0&&(h=0),a=p.geometry,s=a.getCoordinates(),n=s,r=!1,a.getType()){case"MultiLineString":s[p.depth[0]].length>2&&(s[p.depth[0]].splice(u,1),r=!0);break;case"LineString":s.length>2&&(s.splice(u,1),r=!0);break;case"MultiPolygon":n=n[p.depth[1]];case"Polygon":n=n[p.depth[0]],n.length>4&&(u==n.length-1&&(u=0),n.splice(u,1),r=!0,u===0&&(n.pop(),n.push(n[0]),h=n.length-1));break}if(r){this.setGeometryCoordinates_(a,s);const g=[];if(c!==void 0&&(this.rBush_.remove(c),g.push(c.segment[0])),d!==void 0&&(this.rBush_.remove(d),g.push(d.segment[1])),c!==void 0&&d!==void 0){const v={depth:p.depth,feature:p.feature,geometry:p.geometry,index:h,segment:g};this.rBush_.insert(Lo(v.segment),v)}this.updateSegmentIndices_(a,u,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,r,n){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(r===void 0||s.depth===void 0||th(s.depth,r))&&s.index>t&&(s.index+=n)})}}function mut(i,e){return i.index-e.index}function Mme(i,e,t){const r=e.geometry;if(r.getType()==="Circle"){let s=r;if(e.index===N_){const o=Uy(s.getCenter(),gs(i)),a=Math.sqrt(o)-s.getRadius();return a*a}}const n=gs(i);return gy[0]=gs(e.segment[0]),gy[1]=gs(e.segment[1]),cYe(n,gy)}function Lme(i,e,t){const r=e.geometry;if(r.getType()==="Circle"&&e.index===N_)return Ym(r.getClosestPoint(gs(i)));const n=gs(i);return gy[0]=gs(e.segment[0]),gy[1]=gs(e.segment[1]),Ym(Txe(n,gy))}function gut(){const i=swe();return function(e,t){return i.Point}}const b2={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class _2 extends ka{constructor(e,t){super(e),this.feature=t}}function yut(i,e){const t=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();Y2e(i,s,t)}return t}function x2(i,e){return ed(i[0],i[1],e[0],e[1])}function Y0(i,e){const t=i.length;return e<0?i[e+t]:e>=t?i[e-t]:i[e]}function w2(i,e,t){let r,n;e<t?(r=e,n=t):(r=t,n=e);const s=Math.ceil(r),o=Math.floor(n);if(s>o){const l=X0(i,r),u=X0(i,n);return x2(l,u)}let a=0;if(r<s){const l=X0(i,r),u=Y0(i,s);a+=x2(l,u)}if(o<n){const l=Y0(i,o),u=X0(i,n);a+=x2(l,u)}for(let l=s;l<o-1;++l){const u=Y0(i,l),c=Y0(i,l+1);a+=x2(u,c)}return a}function Y2e(i,e,t){if(e instanceof Vn){E2(i,e.getCoordinates(),!1,t);return}if(e instanceof da){const r=e.getCoordinates();for(let n=0,s=r.length;n<s;++n)E2(i,r[n],!1,t);return}if(e instanceof _s){const r=e.getCoordinates();for(let n=0,s=r.length;n<s;++n)E2(i,r[n],!0,t);return}if(e instanceof sl){const r=e.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length;a<l;++a)E2(i,o[a],!0,t)}return}if(e instanceof Po){const r=e.getGeometries();for(let n=0;n<r.length;++n)Y2e(i,r[n],t);return}}const FD={index:-1,endIndex:NaN};function vut(i,e,t,r){const n=i[0],s=i[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const d=e.targets[h],p=d.coordinates;let m=1/0,g;for(let v=0;v<p.length-1;++v){const b=p[v],_=p[v+1],E=X2e(n,s,b,_);E.squaredDistance<m&&(m=E.squaredDistance,g=v+E.along)}m<o&&(o=m,d.ring&&e.targetIndex===h&&(d.endIndex>d.startIndex?g<d.startIndex&&(g+=p.length):d.endIndex<d.startIndex&&g>d.startIndex&&(g-=p.length)),l=g,a=h)}const u=e.targets[a];let c=u.ring;if(e.targetIndex===a&&c){const h=X0(u.coordinates,l),d=t.getPixelFromCoordinate(h);lC(d,e.startPx)>r&&(c=!1)}if(c){const h=u.coordinates,d=h.length,p=u.startIndex,m=l;if(p<m){const g=w2(h,p,m);w2(h,p,m-d)<g&&(l-=d)}else{const g=w2(h,p,m);w2(h,p,m+d)<g&&(l+=d)}}return FD.index=a,FD.endIndex=l,FD}function E2(i,e,t,r){const n=i[0],s=i[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],u=e[o+1],c=X2e(n,s,l,u);if(c.squaredDistance===0){const h=o+c.along;r.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const ND={along:0,squaredDistance:0};function X2e(i,e,t,r){const n=t[0],s=t[1],o=r[0],a=r[1],l=o-n,u=a-s;let c=0,h=n,d=s;return(l!==0||u!==0)&&(c=Ti(((i-n)*l+(e-s)*u)/(l*l+u*u),0,1),h+=l*c,d+=u*c),ND.along=c,ND.squaredDistance=Ev(ed(i,e,h,d),10),ND}function X0(i,e){const t=i.length;let r=Math.floor(e);const n=e-r;r>=t?r-=t:r<0&&(r+=t);let s=r+1;s>=t&&(s-=t);const o=i[r],a=o[0],l=o[1],u=i[s],c=u[0]-a,h=u[1]-l;return[a+c*n,l+h*n]}class but extends mg{constructor(e){const t=e;t.stopDown||(t.stopDown=_v),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=wut(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Oy,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const n=this.mode_;if(n==="Circle")r=function(s,o,a){const l=o||new hA([NaN,NaN]),u=gs(s[0]),c=Uy(u,gs(s[s.length-1]));return l.setCenterAndRadius(u,Math.sqrt(c),this.geometryLayout_),l};else{let s;n==="Point"?s=In:n==="LineString"?s=Vn:n==="Polygon"&&(s=_s),r=function(o,a,l){return a?n==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new hp({source:new dp({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:_ut(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:uO,this.freehandCondition_,e.freehand?this.freehandCondition_=bC:this.freehandCondition_=e.freehandCondition?e.freehandCondition:_we,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(lL.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=bC:t=e:t=IZe,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===Bt.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Mr.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Mr.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Mr.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===Mr.POINTERDOWN?r=!1:t&&this.getPointerCount()<2?(r=e.type===Mr.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Mr.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Mr.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Nh(Mr.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),r=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Lo([r,n]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=yut(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const r=e.startIndex<=e.endIndex,n=e.startIndex<=t;r===n?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let r=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),r=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),r=n-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,t,r){if(t===r)return;const n=[];if(t<r){const s=Math.ceil(t);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)n.push(Y0(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)n.push(Y0(e.coordinates,a))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&lC(t.startPx,e.pixel)<this.snapTolerance_)return;const r=vut(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==r.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}t.targetIndex=r.index;const n=t.targets[t.targetIndex];n.endIndex=r.endIndex;const s=X0(n.coordinates,n.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,r=e.pixel,n=t[0]-r[0],s=t[1]-r[1],o=n*n+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let r=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")n=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;n=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(n){const a=this.getMap();for(let l=0,u=s.length;l<u;l++){const c=s[l],h=a.getPixelFromCoordinate(c),d=e[0]-h[0],p=e[1]-h[1],m=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(d*d+p*p)<=m,r){this.finishCoordinate_=c;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Tn(new In(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Tn);const t=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),r.changed()):(r=new Vn(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const t=this.getMap().getView().getProjection(),r=hx(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Tn(new Vn(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Tn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new _2(b2.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),r=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),s=hx(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let n,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),this.geometryFunction_(s,t,r)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<e;++s){let o;if(n==="LineString"||n==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,r),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const r=e.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,r,n)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,r,n),t=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new gu([t])):this.type_==="MultiLineString"?e.setGeometry(new da([t])):this.type_==="MultiPolygon"&&e.setGeometry(new sl([t])),this.dispatchEvent(new _2(b2.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new _2(b2.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let n;if(t==="LineString"||t==="Circle")n=this.sketchCoords_;else if(t==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&n.shift(),n.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new Tn(new In(n)),this.updateSketchFeatures_(),this.dispatchEvent(new _2(b2.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function _ut(){const i=swe();return function(e,t){return i[e.getGeometry().getType()]}}function xut(){return function(i,e,t){const r=Lo([i[0],i[i.length-1]].map(function(s){return gs(s)})),n=[[Wm(r),Cv(r),Tv(r),ec(r),Wm(r)]];return e?e.setCoordinates(n):e=new _s(n),e}}function wut(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const Eut=but;let SP=null;function Sut(){return!!SP}function IA(i){SP=i;const e=Object.keys(i.defs),t=e.length;let r,n;for(r=0;r<t;++r){const s=e[r];if(!At(s)){const o=i.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),Ixe(new By({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(r=0;r<t;++r){const s=e[r],o=At(s);for(n=0;n<t;++n){const a=e[n],l=At(a);if(!xxe(s,a))if(i.defs[s]===i.defs[a])eL([o,l]);else{const u=i(s,a);pYe(o,l,Gfe(o,l,u.forward),Gfe(l,o,u.inverse))}}}}let Cut=async function(i){const e=await fetch(`https://epsg.io/${i}.proj4`);if(!e.ok)throw new Error(`Unexpected response from epsg.io: ${e.status}`);return e.text()};async function Z2e(i){typeof i=="string"&&(i=parseInt(i.split(":").pop(),10));const e=SP;if(!e)throw new Error("Proj4 must be registered first with register(proj4)");const t="EPSG:"+i;return e.defs(t)||(e.defs(t,await Cut(i)),IA(e)),At(t)}const CP={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};function Rme(i,e,t,r){const n=new CustomEvent(e,{detail:{originalEvent:t,geoJSON:r}});i.dispatchEvent(n)}function K2e(i,e,t,r=!1,n=!1){const s=r?[i.feature]:i.features;n&&e.getSource().clear();const o=e.getSource().getFeatures();if(!e.get("multipleFeatures")&&(o.length||s.length>1))return console.error("Multiple features detected!");s.forEach(u=>{const c=u.getGeometry();if(c instanceof Vn){const d=Dxe(c,{radius:6378137,projection:"EPSG:3857"});u.set("measure",d)}else if(c instanceof _s){const d=Mxe(c,{radius:6378137,projection:"EPSG:3857"});u.set("measure",d)}const h=Nt(u);u.set("id",h),u.setId(h)}),!r&&s.length&&(e.getSource().addFeatures(s),t.map.getView().fit(e.getSource().getExtent(),{duration:750}));const a=new Lv,l=JSON.parse(a.writeFeatures(s,CP));(r||n)&&Rme(t,"drawend",i,l),Rme(t,"addfeatures",i,l)}function Tut(i,e,t,r=!1){try{const n=Aut(i);if(!n){console.error("Unsupported format or invalid data");return}const s=n.readFeatures(i,CP);K2e({features:s},e,t,!1,r)}catch(n){console.error("Error parsing data:",n)}}function Aut(i){return kut(i)?new Lv:Dut(i)?new iEe({extractStyles:!1}):Mut(i)?new oEe:null}function kut(i){try{const e=JSON.parse(i);return e.type==="FeatureCollection"||e.type==="Feature"}catch{return!1}}function Dut(i){return i.includes("<kml")&&i.includes("</kml>")}function Mut(i){try{const e=JSON.parse(i);return e.type==="Topology"&&e.objects}catch{return!1}}async function Lut(i){return IA(go),await Z2e(i)}function Rut(i,e){go.defs(i,e),IA(go)}function Ime(i){i.setRotation(i.getRotation())}function Iut(i,e,t){const r=Object.assign({},t);if(i.interactions[r.id])throw Error(`Interaction with id: ${r.id} already exists.`);r.modify=typeof r.modify=="boolean"?r.modify:!0;const n=e.getSource();r.type==="Box"&&(r.geometryFunction=xut(),r.type="Circle");const s=new Eut({...r,source:n});r.active===!1&&s.setActive(!1),s.on("drawend",l=>{e.get("isDrawingEnabled")&&K2e(l,e,i,!0)}),i.map.addInteraction(s),i.interactions[r.id]=s;const o=new put({source:n});o.setActive(r.modify),i.map.addInteraction(o),i.interactions[`${r.id}_modify`]=o;const a=()=>{i.getLayerById(e.get("id"))||(i.removeInteraction(r.id),i.removeInteraction(`${r.id}_modify`),i.map.getLayerGroup().un("change",a))};i.map.getLayerGroup().on("change",a)}var Out=Object.defineProperty,Put=Object.getOwnPropertyDescriptor,Fut=(i,e,t,r)=>{for(var n=r>1?void 0:r?Put(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&Out(e,t,n),n};class J2e extends DR{constructor(){super(),this.propertyTransform=(e,t)=>e}renderContent(e){RDe(this.hasTemplate("properties")?Qe`${this.renderTemplate("properties",e.getProperties(),"tooltip-1")}`:Qe` <style>
              ul {
                margin: 0;
                padding: 15px 15px 15px 30px;
                background: #0008;
                border-radius: 15px;
                color: white;
                max-width: 250px;
                font-size: small;
              }
              span {
                font-weight: bold;
              }
            </style>
            <ul>
              ${Object.entries(e.getProperties()).map(([t,r])=>this.propertyTransform({key:t,value:r},e)).filter(t=>t).map(({key:t,value:r})=>Qe`<li><span>${t}</span>: ${r}</li>`)}
            </ul>`,this.shadowRoot)}}Fut([Pt()],J2e.prototype,"propertyTransform",2);customElements.define("eox-map-tooltip",J2e);class Nut{constructor(e,t,r){var d,p;this.eoxMap=e,this.selectLayer=t,this.options=r,this.active=r.active||t.getVisible(),this.panIn=r.panIn||!1;const n=this.eoxMap.map.getOverlayById("eox-map-tooltip");let s;this.selectedFids=[],n?(this.tooltip=n.getElement(),s=n):(this.tooltip=this.eoxMap.querySelector("eox-map-tooltip")||((d=r.overlay)==null?void 0:d.element),this.tooltip&&(s=new W2e({element:this.tooltip,position:void 0,offset:[0,0],positioning:"top-left",className:"eox-map-tooltip",id:"eox-map-tooltip",...r.overlay}),this.eoxMap.map.addOverlay(s)));const o=()=>{s&&r.condition==="pointermove"&&s.setPosition(void 0)};e.map.on("change:target",m=>{var g,v;(g=m.oldValue)==null||g.removeEventListener("pointerleave",o),(v=m.target.getTargetElement())==null||v.addEventListener("pointerleave",o)}),(p=e.map.getTargetElement())==null||p.addEventListener("pointerleave",o);let a;if(this.options.layer)a=this.options.layer;else{const m=this.selectLayer.get("_jsonDefinition");a={...m,style:r.style,properties:{id:this.selectLayer.get("id")+"_select"},source:{type:m.type}}}a.renderMode="vector",delete a.interactions,this.selectStyleLayer=Jy(e,a),this.selectStyleLayer.setSource(this.selectLayer.getSource()),this.selectStyleLayer.setMap(this.eoxMap.map);const l=this.selectStyleLayer.getStyleFunction();this.selectStyleLayer.setStyle((m,g)=>this.selectedFids.length&&this.selectedFids.includes(this.getId(m))?l(m,g):null);const u=m=>{this.panIn&&this.eoxMap.map.getView().fit(m.getGeometry().getExtent(),{duration:750})},c=m=>{if(!this.active)return;const g=this.eoxMap.map.getView().getZoom();m.dragging||!this.active||g<this.selectLayer.getMinZoom()||g>this.selectLayer.getMaxZoom()||this.selectLayer.getFeatures(m.pixel).then(v=>{const b=v.length?v[0]:null,_=b?[this.getId(b)]:[],E=this.selectedFids[0]!==_[0];if(this.selectedFids=_,E&&(this.selectStyleLayer.changed(),b&&u(b)),s){const T=m.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",D=m.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${D}-${T}`),s.setPosition(b?m.coordinate:null),b&&this.tooltip.renderContent&&this.tooltip.renderContent(b)}const C=new CustomEvent("select",{detail:{id:r.id,originalEvent:m,feature:b}});this.eoxMap.dispatchEvent(C)})};this.eoxMap.map.on(r.condition||"click",c),this.selectLayer.on("change:opacity",()=>{this.selectStyleLayer.setOpacity(this.selectLayer.getOpacity())}),this.selectLayer.on("change:visible",()=>{const m=this.selectLayer.getVisible();this.selectStyleLayer.setVisible(m),this.setActive(m)}),this.changeSourceListener=()=>{this.selectStyleLayer.setSource(this.selectLayer.getSource())},this.selectLayer.on("change:source",this.changeSourceListener),this.removeListener=()=>{},this.eoxMap.map.getLayers().on("remove",this.removeListener);const h=()=>{e.getLayerById(t.get("id"))||(e.selectInteractions[r.id].remove(),e.map.getLayerGroup().un("change",h))};e.map.getLayerGroup().on("change",h)}setActive(e){this.active=e}highlightById(e){this.selectedFids=e,this.selectStyleLayer.changed()}remove(){this.selectStyleLayer.setMap(null),delete this.eoxMap.selectInteractions[this.options.id],this.selectLayer.un("change:source",this.changeSourceListener),this.eoxMap.map.getLayers().un("remove",this.removeListener)}getId(e){if(this.options.idProperty)return e.get(this.options.idProperty);if(e.getId()!==void 0)return e.getId();if(e.get("id")!==void 0)return e.get("id");throw Error("No feature id found. Please provide which feature property should be taken instead using idProperty.")}}function $ut(i,e,t){if(i.interactions[t.id])throw Error(`Interaction with id: ${t.id} already exists.`);return i.selectInteractions[t.id]=new Nut(i,e,t),i.selectInteractions[t.id]}const But={GeoJSON:Lv,MVT:SO},jut={Group:Fl,Image:kA,Tile:Tx,Vector:hp,VectorTile:YO},zut={ImageWMS:P2e,OSM:z2e,Tile:$v,TileWMS:wP,Vector:dp,VectorTile:Mw,WMTS:EP,XYZ:Qf};function Jy(i,e,t=!0){var u,c;e=JSON.parse(JSON.stringify(e));const r={...But,...window.eoxMapAdvancedOlFormats},n={...jut,...window.eoxMapAdvancedOlLayers},s={...zut,...window.eoxMapAdvancedOlSources},o=n[e.type],a=s[(u=e.source)==null?void 0:u.type];if(!o)throw window.eoxMapAdvancedOlLayers?new Error(`Layer type ${e.type} not supported!`):new Error(`Layer type ${e.type} not created! Forgot to import advanced layers & sources plugin from @eox/map/dist/eox-map-advanced-layers-and-sources.js?`);if(e.source&&!a)throw window.eoxMapAdvancedOlSources?new Error(`Source type ${e.source.type} not supported!`):new Error(`Source type ${e.source.type} not created! Forgot to import advanced layers & sources plugin from @eox/map/dist/eox-map-advanced-layers-and-sources.js?`);const l=new o({...e,...e.source&&{source:new a({...e.source,...e.source.format&&{format:new r[typeof e.source.format=="object"?e.source.format.type:e.source.format]({...typeof e.source.format=="object"&&{...e.source.format}})},...e.source.tileGrid&&{tileGrid:pp({...e.source.tileGrid})}})},...e.type==="Group"&&{layers:[]},...e.properties,style:void 0});if(l.set("_jsonDefinition",e,!0),e.type==="Group"){const h=e.layers.reverse().map(d=>Jy(i,d));h.forEach(d=>d.set("_group",l,!0)),l.setLayers(new aa(h))}if(e.style&&l.setStyle(e.style),t&&((c=e.interactions)!=null&&c.length))for(let h=0,d=e.interactions.length;h<d;h++){const p=e.interactions[h];Q2e(i,l,p)}return tSe(l,e),l}function Q2e(i,e,t){t.type==="draw"?Iut(i,e,t.options):t.type==="select"&&$ut(i,e,t.options)}function eSe(i,e,t){var s,o,a,l;const r=t.get("_jsonDefinition");if(e.type!==r.type||((s=e.source)==null?void 0:s.type)!==((o=r.source)==null?void 0:o.type))throw new Error("Layers are not compatible to be updated");const n=Jy(i,e,!1);if(JSON.stringify(e.source)!==JSON.stringify(r.source)&&t.setSource(n.getSource()),["Vector","VectorTile"].includes(e.type)&&JSON.stringify(e.style)!==JSON.stringify(r.style)&&t.setStyle(n.getStyle()),JSON.stringify(e.properties)!==JSON.stringify(r.properties)&&t.setProperties(e.properties),e.visible!==r.visible&&t.setVisible(e.visible),e.opacity!==r.opacity&&t.setOpacity(e.opacity),JSON.stringify(e.interactions)!==JSON.stringify(r.interactions)&&((a=r.interactions)==null||a.forEach(u=>{const c=e.interactions.find(h=>h.type===u.type);c?c.type==="draw"?(i.interactions[c.options.id].setActive(c.options.active),i.interactions[`${c.options.id}_modify`].setActive(c.options.modify)):i.selectInteractions[c.options.id].setActive(c.options.active):i.removeInteraction(u.options.id)}),(l=e.interactions)==null||l.forEach(u=>{r.interactions.find(h=>h.type===u.type)||Q2e(i,t,u)})),e.type==="Group"){const u=e.layers.map(h=>{var d;return(d=h.properties)==null?void 0:d.id}),c=t.getLayers();c.forEach(h=>{u.includes(h.get("id"))||c.remove(h)}),e.layers.forEach(h=>{const d=h.properties.id;if(c.getArray().map(p=>p.get("id")).includes(d))eSe(i,h,i.getLayerById(d));else{const p=Jy(i,h);c.push(p)}}),c.getArray().sort((h,d)=>u.indexOf(h.get("id"))-u.indexOf(d.get("id"))),c.changed()}return tSe(t,e),t.set("_jsonDefinition",e,!0),t}const Uut=(i,e)=>e?[...e].reverse().map(t=>Jy(i,t)):[];function tSe(i,e){i.on("change:opacity",()=>{e.opacity=i.getOpacity()}),i.on("change:visible",()=>{e.visible=i.getVisible()}),i.on("change:zIndex",()=>{e.zIndex=i.getZIndex()}),i.on("propertychange",t=>{t.key!=="map"&&(e.properties[t.key]=t.target.get(t.key))})}function $D(i,e){return iSe(i.map.getLayers().getArray()).find(r=>r.get("id")===e)}function iSe(i){const e=[];e.push(...i);let t=e.filter(r=>r instanceof Fl);for(;t.length;){const r=[];for(let n=0,s=t.length;n<s;n++){const o=t[n].getLayers().getArray();e.push(...o),r.push(...o.filter(a=>a instanceof Fl))}t=r}return e}function Ome(i){if(i){const e=i;return!tu(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90?mYe(e):e}return[0,0]}const Pme=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Fme={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Gut extends tc{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const r=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof r=="string"?document.createTextNode(r):r;const n=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Xc} ${dg}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(Nme(t))if($me(t))Hut(t);else{let r;this.source_?r=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:r=e.getTargetElement(),this.keys_?qut(r):rSe(r)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=$me(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(qy(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Fme.ENTERFULLSCREEN)):(qy(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Fme.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(Ss.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(Ss.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let r=0,n=e.length;r<n;++r)Zr(e[r]);e.length=0;const t=this.getMap();if(t){const r=t.getOwnerDocument();Nme(r)?this.element.classList.remove(epe):this.element.classList.add(epe);for(let n=0,s=Pme.length;n<s;++n)e.push(Ni(r,Pme[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Nme(i){const e=i.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&i.fullscreenEnabled)}function $me(i){return!!(i.webkitIsFullScreen||i.fullscreenElement)}function rSe(i){i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen()}function qut(i){i.webkitRequestFullscreen?i.webkitRequestFullscreen():rSe(i)}function Hut(i){i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()}const Vut=Gut,BD="projection",Bme="coordinateFormat";class Wut extends tc{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(BD,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Bme)}getProjection(){return this.get(BD)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(Ni(t,Ec.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Ni(t,Ec.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(Bme,e)}setProjection(e){this.set(BD,At(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=_d(this.mapProjection_,s):this.transform_=eA}const n=this.getMap().getCoordinateFromPixelInternal(e);if(n){if(this.transform_(n,n),this.wrapX_){const o=this.getProjection()||this.mapProjection_;JT(n,o)}const s=this.getCoordinateFormat();s?t=s(n):t=n.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const Yut=Wut,jD=.75,S2=.1;class Xut extends tc{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",r=e.tipLabel!==void 0?e.tipLabel:"Overview map",n=e.collapseLabel!==void 0?e.collapseLabel:"";typeof n=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const s=e.label!==void 0?e.label:"";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=r,a.appendChild(o),a.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const l=new Cwe({view:e.view,controls:new aa,interactions:new aa});this.ovmap_=l,e.layers&&e.layers.forEach(function(_){l.addLayer(_)});const u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new W2e({position:[0,0],positioning:"center-center",element:u}),this.ovmap_.addOverlay(this.boxOverlay_);const c=t+" "+Xc+" "+dg+(this.collapsed_&&this.collapsible_?" "+fC:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.ovmapDiv_),h.appendChild(a);const d=this,p=this.boxOverlay_,m=this.boxOverlay_.getElement(),g=function(_){return{clientX:_.clientX,clientY:_.clientY}},v=function(_){const E=g(_),C=l.getEventCoordinateInternal(E);p.setPosition(C)},b=function(_){const E=l.getEventCoordinateInternal(_);d.getMap().getView().setCenterInternal(E),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",b)};m.addEventListener("mousedown",function(){window.addEventListener("mousemove",v),window.addEventListener("mouseup",b)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const r=t.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Ni(e,Vm.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const r=e.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===Ss.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const r=this.getMap().getView();this.bindView_(r)}else!this.ovmap_.isRendered()&&(e.key===Ss.TARGET||e.key===Ss.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new ru({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(vl.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(vl.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const r=e.getSize(),s=e.getView().calculateExtentInternal(r);if(this.viewExtent_&&hu(s,this.viewExtent_))return;this.viewExtent_=s;const o=t.getSize(),l=t.getView().calculateExtentInternal(o),u=t.getPixelFromCoordinateInternal(ec(s)),c=t.getPixelFromCoordinateInternal(Cv(s)),h=Math.abs(u[0]-c[0]),d=Math.abs(u[1]-c[1]),p=o[0],m=o[1];h<p*S2||d<m*S2||h>p*jD||d>m*jD?this.resetExtent_():Io(l,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,r=e.getSize(),s=e.getView().calculateExtentInternal(r),o=t.getView(),a=Math.log(jD/S2)/Math.LN2,l=1/(Math.pow(2,a/2)*S2);CI(s,l),o.fitInternal(cC(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,r=e.getView();t.getView().setCenterInternal(r.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const r=e.getSize(),n=e.getView(),s=t.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),u=n.getCenterInternal(),c=n.getResolution(),h=s.getResolution(),d=r[0]*c/h,p=r[1]*c/h;if(a.setPosition(u),l){l.style.width=d+"px",l.style.height=p+"px";const m="rotate("+o+"rad)";l.style.transform=m}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Fy(this.ovmap_,bc.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(fC),this.collapsed_?qy(this.collapseLabel_,this.label_):qy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}const Zut=Xut,zD="units",Kut=[1,2,5],$1=25.4/.28;class Jut extends tc{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Xc,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(zD,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(zD)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(zD,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,n=this.getUnits(),s=n=="degrees"?"degrees":"m";let o=Gy(r,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||$1)/$1,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||$1)/$1:void 0;let u=a*o,c="";if(n=="degrees"){const E=$y.degrees;u*=E,u<E/60?(c="",o*=3600):u<E?(c="",o*=60):c=""}else if(n=="imperial")u<.9144?(c="in",o/=.0254):u<1609.344?(c="ft",o/=.3048):(c="mi",o/=1609.344);else if(n=="nautical")o/=1852,c="NM";else if(n=="metric")u<1e-6?(c="nm",o*=1e9):u<.001?(c="m",o*=1e6):u<1?(c="mm",o*=1e3):u<1e3?c="m":(c="km",o/=1e3);else if(n=="us")u<.9144?(c="in",o*=39.37):u<1609.344?(c="ft",o/=.30480061):(c="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),d,p,m,g,v,b;for(;;){m=Math.floor(h/3);const E=Math.pow(10,m);if(d=Kut[(h%3+3)%3]*E,p=Math.round(d/o),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){d=g,p=v,m=b;break}else if(p>=a)break;g=d,v=p,b=m,++h}const _=this.scaleBar_?this.createScaleBar(p,d,c):d.toFixed(m<0?-m:0)+" "+c;this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const n=this.getScaleForResolution(),s=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let c=0;c<o;++c){const h=c%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(c%2===0||o===2?this.createStepText(c,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,n,s){const a=(e===0?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=Gy(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||$1,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const Qut=Jut,B1={VERTICAL:0,HORIZONTAL:1};class ect extends tc{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=B1.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=t+"-thumb "+Xc;const n=this.element;n.className=t+" "+Xc+" "+dg,n.appendChild(r),n.addEventListener(Ec.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),n.addEventListener(Ec.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),n.addEventListener(Ec.POINTERUP,this.handleDraggerEnd_.bind(this),!1),n.addEventListener(Bt.CLICK,this.handleContainerClick_.bind(this),!1),r.addEventListener(Bt.CLICK,zWe,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,r=e.offsetHeight;if(t===0&&r===0)return this.sliderInitialized_=!1;const n=getComputedStyle(e);t-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),r-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);const s=e.firstElementChild,o=getComputedStyle(s),a=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,l],t>r?(this.direction_=B1.HORIZONTAL,this.widthLimit_=t-a):(this.direction_=B1.VERTICAL,this.heightLimit_=r-l),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),r=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),s=t.getConstrainedZoom(t.getZoomForResolution(n));t.animateInternal({zoom:s,duration:this.duration_,easing:ug})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const r=this.handleDraggerDrag_,n=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(Ni(s,Ec.POINTERMOVE,r,this),Ni(s,Ec.POINTERUP,n,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,r=e.clientY-this.startY_,n=this.getRelativePosition_(t,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Zr),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),r=this.element.firstElementChild;this.direction_==B1.HORIZONTAL?r.style.left=this.widthLimit_*t+"px":r.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let r;return this.direction_===B1.HORIZONTAL?r=e/this.widthLimit_:r=t/this.heightLimit_,Ti(r,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return Ti(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}const tct=ect;class ict extends tc{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",r=e.label!==void 0?e.label:"E",n=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=n,s.appendChild(typeof r=="string"?document.createTextNode(r):r),s.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Xc+" "+dg,a=this.element;a.className=o,a.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),r=this.extent?kl(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(cC(r))}}const rct=ict,nct=Object.freeze(Object.defineProperty({__proto__:null,Attribution:pwe,Control:tc,FullScreen:Vut,MousePosition:Yut,OverviewMap:Zut,Rotate:mwe,ScaleLine:Qut,Zoom:gwe,ZoomSlider:tct,ZoomToExtent:rct,defaults:ywe},Symbol.toStringTag,{value:"Module"}));class sct extends tc{constructor(e){const t=e||{},r=document.createElement("div");r.className="geolocation ol-unselectable ol-control";const n=document.createElement("button");n.title="Show your location";const s=document.createElement("img");if(t.buttonIcon)s.src=t.buttonIcon;else{const o=`url(
        "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-6 -6 36 36'%3E %3Cpath d='M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z' /%3E%3C/svg%3E"
      )`;s.style.background="var(--ol-subtle-foreground-color)",s.style.maskImage=o,s.style.webkitMaskImage=o}s.style.height="100%",s.style.width="100%",s.style.position="absolute",s.style.pointerEvents="none",r.appendChild(s),r.appendChild(n),super({element:r}),this._centerWhenReady=t.centerWhenReady,this._highAccuracy=t.highAccuracy,this._trackAccuracy=t.trackAccuracy,this._trackHeading=t.trackHeading,this._positionFeature=new Tn({geometry:new In([NaN,NaN]),heading:0}),this._source=new dp({features:[this._positionFeature]}),this._trackAccuracy&&(this._accuracyFeature=new Tn,this._accuracyFeature.setStyle(new os({fill:new nl({color:"rgba(0, 0, 0, 0.2)"}),stroke:new la({width:2,color:"rgba(0, 0, 0, 0.7)"})})),this._source.addFeature(this._accuracyFeature)),this._layer=new hp({source:this._source}),t.style&&this._layer.setStyle(t.style),n.addEventListener("click",this.centerOnPosition.bind(this),!1)}setMap(e){this._layer.setMap(e),super.setMap(e),e&&this._centerWhenReady&&this.initGeolocation()}initGeolocation(){return new Promise((e,t)=>{const r=this.getMap();r&&(this._geolocation=new fut({tracking:!0,trackingOptions:{enableHighAccuracy:this._highAccuracy},projection:r.getView().getProjection()})),this._centerWhenReady&&this._geolocation.once("change:position",n=>{r.getView().setCenter(n.target.getPosition())}),this._geolocation.on("error",function(n){t(n)}),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())}),this._geolocation.on("change:heading",n=>{this._trackHeading&&this._highAccuracy&&this._positionFeature.set("heading",n.target.getHeading())}),this._geolocation.on("change:position",()=>{const n=this._geolocation.getPosition();this._positionFeature.getGeometry().setCoordinates(n||null),e(n)}),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())})})}getElement(){return this.element}async centerOnPosition(){var e,t;try{await this.initGeolocation();const r=(e=this._geolocation)==null?void 0:e.getPosition();r&&((t=this.getMap())==null||t.getView().setCenter(r))}catch(r){console.error(r)}}}const oct={...nct,Geolocation:sct};function act(i,e,t,r){e&&e[t]?JSON.stringify(e[t])!==JSON.stringify(r)&&(i.removeControl(t),jme(i,t,r)):jme(i,t,r)}function jme(i,e,t){const r=Object.assign({},t);t&&t.layers&&(r.layers=Uut(i,t.layers));const n=new oct[e](r);i.map.addControl(n),i.mapControls[e]=n}var lct=Object.defineProperty,uct=Object.getOwnPropertyDescriptor,cct=(i,e,t,r)=>{for(var n=r>1?void 0:r?uct(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&lct(e,t,n),n};class nSe extends DR{constructor(){super(...arguments),this.value=50}render(){return Qe`
      <style>
        :host {
          display: block;
        }
        /* Inspired by https://www.codehim.com/html5-css3/html-css-image-comparison-slider/ */
        .eox-map-compare {
          --thumb-bgc: #fff;
          --thumb-w: 0.2rem;

          position: relative;
        }
        .eox-map-compare::after {
          content: "";
          display: block;
          padding-bottom: 50%;
        }
        .eox-map-compare__first,
        .eox-map-compare__second {
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          width: 100%;
        }
        .eox-map-compare__first {
          clip-path: polygon(
            0% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            0% 100%
          );
        }
        .eox-map-compare__second {
          clip-path: polygon(
            100% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            100% 100%
          );
        }
        .eox-map-compare__range {
          background-color: transparent;
          box-sizing: border-box;
          font-family: inherit;
          height: 100%;
          margin: 0;
          outline: none;
          position: absolute;
          top: 0;
          width: 100%;
          pointer-events: none;
        }
        .eox-map-compare__range::-moz-range-thumb {
          background-color: var(--thumb-bgc);
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          box-shadow: 0 0 5px black;
          clip-path: inset(0 -5px 0 -5px);
        }
        .eox-map-compare__range::-webkit-slider-thumb {
          background-color: var(--thumb-bgc);
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          position: relative;
          box-shadow: 0 0 5px black;
          -webkit-clip-path: inset(0 -5px 0 -5px);
          clip-path: inset(0 -5px 0 -5px);
        }
        .eox-map-compare__range::-moz-range-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
        }
        .eox-map-compare__range::-webkit-slider-runnable-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
          height: 100%;
        }
        .eox-map-compare__range,
        .eox-map-compare__range::-webkit-slider-runnable-track,
        .eox-map-compare__range::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
        }
      </style>
      <div class="eox-map-compare">
        <div class="eox-map-compare__first">
          <slot name="first"></slot>
        </div>
        <div class="eox-map-compare__second">
          <slot name="second"></slot>
        </div>
        <input
          type="range"
          class="eox-map-compare__range"
          min="0"
          max="100"
          value=${this.value}
          @input=${e=>this.value=parseInt(e.target.value)}
        />
      </div>
    `}}cct([Pt()],nSe.prototype,"value",2);customElements.define("eox-map-compare",nSe);function hct(i,e,t=.001){let r=!0;for(let n=i.length-1;n>=0;--n)if(!dct(i[n],e[n],t)){r=!1;break}return r}function dct(i,e,t=.001){return Math.abs(i-e)<t}function zme(i,e=!1){e?(i.addInteraction(new _C({condition:hpe})),"ontouchstart"in window||navigator.maxTouchPoints>0?i.addInteraction(new R_({condition:function(r){return this.getPointerCount()===2||hpe(r)}})):i.addInteraction(new R_)):(i.addInteraction(new _C),i.addInteraction(new R_))}function fct(i){i.getInteractions().getArray().forEach(e=>{(e instanceof _C||e instanceof R_)&&i.removeInteraction(e)})}var pct=Object.defineProperty,mct=Object.getOwnPropertyDescriptor,ic=(i,e,t,r)=>{for(var n=r>1?void 0:r?mct(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&pct(e,t,n),n};let du=class extends Lr{constructor(){super(...arguments),this._center=[0,0],this._zoom=0,this._animationOptions={},this.map=new Cwe({controls:[],layers:[],view:new ru({center:[0,0],zoom:0,projection:this.projection})}),this.interactions={},this.selectInteractions={},this.mapControls={},this.addOrUpdateLayer=i=>{var n;i.interactions||(i.interactions=[]);const e=(n=i.properties)==null?void 0:n.id,t=e?$D(this,e):!1;let r;return t?(eSe(this,i,t),r=t):(r=Jy(this,i),this.map.addLayer(r)),r},this.removeInteraction=i=>{this.map.removeInteraction(this.interactions[i]),delete this.interactions[i],this.interactions[`${i}_modify`]&&(this.map.removeInteraction(this.interactions[`${i}_modify`]),delete this.interactions[`${i}_modify`])},this.removeSelect=i=>{this.selectInteractions[i].remove(),delete this.selectInteractions[i]},this.removeControl=i=>{this.map.removeControl(this.mapControls[i]),delete this.mapControls[i]},this.getLayerById=i=>$D(this,i),this.parseFeature=i=>new Lv().writeFeaturesObject(i,CP),this.parseTextToFeature=(i,e,t=!1)=>{Tut(i,e,this,t)},this.registerProjectionFromCode=Lut,this.registerProjection=Rut,this.getFlatLayersArray=iSe}set center(i){const e=(i==null?void 0:i.length)&&hct(i,this.map.getView().getCenter());if(i&&!e){if(!this.projection||this.projection==="EPSG:3857"){const t=Ome(i);this._center=t}else this._center=i;this._animateToState()}}get center(){return this._center}set zoom(i){i!==void 0&&(this._zoom=i,this._animateToState())}get zoom(){return this._zoom}set zoomExtent(i){if(!i||!i.length){this._zoomExtent=void 0;return}const e=this.map.getView();Ime(e),setTimeout(()=>{e.fit(i,this.animationOptions)},0),this._zoomExtent=i}set controls(i){const e=this._controls,t=i;if(e){const r=Object.keys(e),n=Object.keys(t);for(let s=0,o=r.length;s<o;s++){const a=r[s];n.includes(a)||this.removeControl(a)}}if(t){const r=Object.keys(i);for(let n=0,s=r.length;n<s;n++){const o=r[n];act(this,e,o,i[o])}}this._controls=t}get controls(){return this._controls}set layers(i){const e=this._layers,t=JSON.parse(JSON.stringify(i)).reverse();e&&e.forEach(n=>{var s,o;if(!((s=n.properties)!=null&&s.id)||!t.find(a=>a.properties.id===n.properties.id)){const a=$D(this,(o=n.properties)==null?void 0:o.id);this.map.removeLayer(a)}}),t.forEach(n=>{this.addOrUpdateLayer(n)});const r=t.map(n=>{var s;return(s=n.properties)==null?void 0:s.id});this.map.getLayers().getArray().sort((n,s)=>r.indexOf(n.get("id"))-r.indexOf(s.get("id"))),this._layers=t}get layers(){return this._layers}set preventScroll(i){i?(fct(this.map),zme(this.map,!0)):zme(this.map),this._preventScroll=i}get preventScroll(){return this._preventScroll}set config(i){var e,t,r,n;this._config=i,(i==null?void 0:i.animationOptions)!==void 0&&(this.animationOptions=i.animationOptions),this.projection=((e=i==null?void 0:i.view)==null?void 0:e.projection)||"EPSG:3857",this.layers=(i==null?void 0:i.layers)||[],this.controls=(i==null?void 0:i.controls)||{},this.preventScroll===void 0&&(this.preventScroll=i==null?void 0:i.preventScroll),this.zoom=((t=i==null?void 0:i.view)==null?void 0:t.zoom)||0,this.center=((r=i==null?void 0:i.view)==null?void 0:r.center)||[0,0],this.zoomExtent=(n=i==null?void 0:i.view)==null?void 0:n.zoomExtent}set animationOptions(i){this._animationOptions=i}get animationOptions(){return this._animationOptions}get config(){return this._config}get projection(){return this._projection}set projection(i){const e=this.map.getView();if(i&&At(i)&&i!==e.getProjection().getCode()){const t=Av(e.getCenter(),e.getProjection().getCode(),i),r=At(i),n=e.getResolution(),s=e.getProjection().getMetersPerUnit(),o=r.getMetersPerUnit(),a=Gy(e.getProjection(),1/s,e.getCenter(),"m")*s,l=Gy(r,1/o,t,"m")*o,u=n*a/l,c=new ru({zoom:e.getZoom(),center:t,resolution:u,rotation:e.getRotation(),projection:i});["change:center","change:resolution","change:rotation","propertychange"].forEach(d=>{const p=e.getListeners(d);if(p!=null&&p.length)for(let m=p.length-1;m>=0;m--){const g=p[m];e.un(d,g),c.on(d,g)}}),this.map.setView(c),this.getFlatLayersArray(this.map.getLayers().getArray()).filter(d=>d instanceof hp).forEach(d=>d.getSource().refresh()),this._projection=i,this.center=t}}_animateToState(){const i=Object.assign({},this.animationOptions),e=this.map.getView();if(Ime(e),!i||!Object.keys(i).length){e.setCenter(this.center),e.setZoom(this.zoom);return}i.center=Ome(this.center),i.zoom=this.zoom,e.animate(i)}render(){return Qe`
      <style>
        ${`
      :host {
        display: block;
      }
      .eox-map-tooltip {
        pointer-events: none !important;
      }
    `}
        ${ZZe}
        ${KZe}
      </style>
      <div style="width: 100%; height: 100%"></div>
      <slot></slot>
    `}buffer(i,e){return il(i,e)}firstUpdated(){if(this.sync){const i=document.querySelector(this.sync);i&&this.map.setView(i.map.getView())}this.map.once("change:target",i=>{i.target.getView().setCenter(this.center)}),this.map.setTarget(this.renderRoot.querySelector("div")),this._zoomExtent?this.map.getView().fit(this._zoomExtent,this.animationOptions):this._animateToState(),this.map.on("loadend",()=>{this.dispatchEvent(new CustomEvent("loadend",{detail:this.map}))}),this.dispatchEvent(new CustomEvent("mapmounted",{detail:this.map}))}updated(i){}};ic([Pt({attribute:!1,type:Array})],du.prototype,"center",1);ic([Pt({attribute:!1,type:Array})],du.prototype,"layers",1);ic([Pt({attribute:"prevent-scroll",type:Boolean})],du.prototype,"preventScroll",1);ic([Pt({attribute:!1,type:Object})],du.prototype,"config",1);ic([Pt({attribute:"projection",type:String})],du.prototype,"projection",1);ic([Pt()],du.prototype,"sync",2);ic([Ds()],du.prototype,"map",2);ic([Ds()],du.prototype,"interactions",2);ic([Ds()],du.prototype,"selectInteractions",2);ic([Ds()],du.prototype,"mapControls",2);du=ic([yo("eox-map")],du);window.eoxMapAdvancedOlFormats=Grt;var wa=(i,e,t)=>new Promise((r,n)=>{var s=l=>{try{a(t.next(l))}catch(u){n(u)}},o=l=>{try{a(t.throw(l))}catch(u){n(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(i,e)).next())}),Tl=Uint8Array,Z0=Uint16Array,gct=Int32Array,sSe=new Tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oSe=new Tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yct=new Tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aSe=function(i,e){for(var t=new Z0(31),r=0;r<31;++r)t[r]=e+=1<<i[r-1];for(var n=new gct(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)n[s]=s-t[r]<<5|r;return{b:t,r:n}},lSe=aSe(sSe,2),uSe=lSe.b,vct=lSe.r;uSe[28]=258,vct[258]=28;var bct=aSe(oSe,0),_ct=bct.b,LL=new Z0(32768);for(ln=0;ln<32768;++ln)Rh=(ln&43690)>>1|(ln&21845)<<1,Rh=(Rh&52428)>>2|(Rh&13107)<<2,Rh=(Rh&61680)>>4|(Rh&3855)<<4,LL[ln]=((Rh&65280)>>8|(Rh&255)<<8)>>1;var Rh,ln,$_=function(i,e,t){for(var r=i.length,n=0,s=new Z0(e);n<r;++n)i[n]&&++s[i[n]-1];var o=new Z0(e);for(n=1;n<e;++n)o[n]=o[n-1]+s[n-1]<<1;var a;if(t){a=new Z0(1<<e);var l=15-e;for(n=0;n<r;++n)if(i[n])for(var u=n<<4|i[n],c=e-i[n],h=o[i[n]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)a[LL[h]>>l]=u}else for(a=new Z0(r),n=0;n<r;++n)i[n]&&(a[n]=LL[o[i[n]-1]++]>>15-i[n]);return a},Lw=new Tl(288);for(ln=0;ln<144;++ln)Lw[ln]=8;var ln;for(ln=144;ln<256;++ln)Lw[ln]=9;var ln;for(ln=256;ln<280;++ln)Lw[ln]=7;var ln;for(ln=280;ln<288;++ln)Lw[ln]=8;var ln,cSe=new Tl(32);for(ln=0;ln<32;++ln)cSe[ln]=5;var ln,xct=$_(Lw,9,1),wct=$_(cSe,5,1),UD=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Ru=function(i,e,t){var r=e/8|0;return(i[r]|i[r+1]<<8)>>(e&7)&t},GD=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},Ect=function(i){return(i+7)/8|0},Sct=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var r=new Tl(t-e);return r.set(i.subarray(e,t)),r},Cct=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_l=function(i,e,t){var r=new Error(e||Cct[i]);if(r.code=i,Error.captureStackTrace&&Error.captureStackTrace(r,_l),!t)throw r;return r},TP=function(i,e,t,r){var n=i.length,s=r?r.length:0;if(!n||e.f&&!e.l)return t||new Tl(0);var o=!t||e.i!=2,a=e.i;t||(t=new Tl(n*3));var l=function(He){var st=t.length;if(He>st){var xt=new Tl(Math.max(st*2,He));xt.set(t),t=xt}},u=e.f||0,c=e.p||0,h=e.b||0,d=e.l,p=e.d,m=e.m,g=e.n,v=n*8;do{if(!d){u=Ru(i,c,1);var b=Ru(i,c+1,3);if(c+=3,b)if(b==1)d=xct,p=wct,m=9,g=5;else if(b==2){var T=Ru(i,c,31)+257,D=Ru(i,c+10,15)+4,M=T+Ru(i,c+5,31)+1;c+=14;for(var A=new Tl(M),I=new Tl(19),P=0;P<D;++P)I[yct[P]]=Ru(i,c+P*3,7);c+=D*3;for(var U=UD(I),K=(1<<U)-1,L=$_(I,U,1),P=0;P<M;){var F=L[Ru(i,c,K)];c+=F&15;var _=F>>4;if(_<16)A[P++]=_;else{var $=0,H=0;for(_==16?(H=3+Ru(i,c,3),c+=2,$=A[P-1]):_==17?(H=3+Ru(i,c,7),c+=3):_==18&&(H=11+Ru(i,c,127),c+=7);H--;)A[P++]=$}}var V=A.subarray(0,T),J=A.subarray(T);m=UD(V),g=UD(J),d=$_(V,m,1),p=$_(J,g,1)}else _l(1);else{var _=Ect(c)+4,E=i[_-4]|i[_-3]<<8,C=_+E;if(C>n){a&&_l(0);break}o&&l(h+E),t.set(i.subarray(_,C),h),e.b=h+=E,e.p=c=C*8,e.f=u;continue}if(c>v){a&&_l(0);break}}o&&l(h+131072);for(var ee=(1<<m)-1,ie=(1<<g)-1,de=c;;de=c){var $=d[GD(i,c)&ee],te=$>>4;if(c+=$&15,c>v){a&&_l(0);break}if($||_l(2),te<256)t[h++]=te;else if(te==256){de=c,d=null;break}else{var z=te-254;if(te>264){var P=te-257,ne=sSe[P];z=Ru(i,c,(1<<ne)-1)+uSe[P],c+=ne}var ve=p[GD(i,c)&ie],$e=ve>>4;ve||_l(3),c+=ve&15;var J=_ct[$e];if($e>3){var ne=oSe[$e];J+=GD(i,c)&(1<<ne)-1,c+=ne}if(c>v){a&&_l(0);break}o&&l(h+131072);var Xe=h+z;if(h<J){var ot=s-J,Be=Math.min(J,Xe);for(ot+h<0&&_l(3);h<Be;++h)t[h]=r[ot+h]}for(;h<Xe;h+=4)t[h]=t[h-J],t[h+1]=t[h+1-J],t[h+2]=t[h+2-J],t[h+3]=t[h+3-J];h=Xe}}e.l=d,e.p=de,e.b=h,e.f=u,d&&(u=1,e.m=m,e.d=p,e.n=g)}while(!u);return h==t.length?t:Sct(t,0,h)},Tct=new Tl(0),Act=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&_l(6,"invalid gzip data");var e=i[3],t=10;e&4&&(t+=(i[10]|i[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!i[t++]);return t+(e&2)},kct=function(i){var e=i.length;return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0},Dct=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&_l(6,"invalid zlib data"),(i[1]>>5&1)==+!e&&_l(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function Mct(i,e){return TP(i,{i:2},e&&e.out,e&&e.dictionary)}function Lct(i,e){var t=Act(i);return t+8>i.length&&_l(6,"invalid gzip data"),TP(i.subarray(t,-8),{i:2},e&&e.out||new Tl(kct(i)),e&&e.dictionary)}function Rct(i,e){return TP(i.subarray(Dct(i,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function RL(i,e){return i[0]==31&&i[1]==139&&i[2]==8?Lct(i,e):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?Mct(i,e):Rct(i,e)}var Ict=typeof TextDecoder<"u"&&new TextDecoder,Oct=0;try{Ict.decode(Tct,{stream:!0}),Oct=1}catch{}var hSe=(i,e)=>i*Math.pow(2,e),j1=(i,e)=>Math.floor(i/Math.pow(2,e)),UC=(i,e)=>hSe(i.getUint16(e+1,!0),8)+i.getUint8(e),dSe=(i,e)=>hSe(i.getUint32(e+2,!0),16)+i.getUint16(e,!0),Pct=(i,e,t,r,n)=>{if(i!=r.getUint8(n))return i-r.getUint8(n);const s=UC(r,n+1);if(e!=s)return e-s;const o=UC(r,n+4);return t!=o?t-o:0},Fct=(i,e,t,r)=>{const n=fSe(i,e|128,t,r);return n?{z:e,x:t,y:r,offset:n[0],length:n[1],is_dir:!0}:null},Ume=(i,e,t,r)=>{const n=fSe(i,e,t,r);return n?{z:e,x:t,y:r,offset:n[0],length:n[1],is_dir:!1}:null},fSe=(i,e,t,r)=>{let n=0,s=i.byteLength/17-1;for(;n<=s;){const o=s+n>>1,a=Pct(e,t,r,i,o*17);if(a>0)n=o+1;else if(a<0)s=o-1;else return[dSe(i,o*17+7),i.getUint32(o*17+13,!0)]}return null},Nct=(i,e)=>i.is_dir&&!e.is_dir?1:!i.is_dir&&e.is_dir?-1:i.z!==e.z?i.z-e.z:i.x!==e.x?i.x-e.x:i.y-e.y,pSe=(i,e)=>{const t=i.getUint8(e*17);return{z:t&127,x:UC(i,e*17+1),y:UC(i,e*17+4),offset:dSe(i,e*17+7),length:i.getUint32(e*17+13,!0),is_dir:t>>7===1}},Gme=i=>{const e=[],t=new DataView(i);for(let r=0;r<t.byteLength/17;r++)e.push(pSe(t,r));return $ct(e)},$ct=i=>{i.sort(Nct);const e=new ArrayBuffer(17*i.length),t=new Uint8Array(e);for(let r=0;r<i.length;r++){const n=i[r];let s=n.z;n.is_dir&&(s=s|128),t[r*17]=s,t[r*17+1]=n.x&255,t[r*17+2]=n.x>>8&255,t[r*17+3]=n.x>>16&255,t[r*17+4]=n.y&255,t[r*17+5]=n.y>>8&255,t[r*17+6]=n.y>>16&255,t[r*17+7]=n.offset&255,t[r*17+8]=j1(n.offset,8)&255,t[r*17+9]=j1(n.offset,16)&255,t[r*17+10]=j1(n.offset,24)&255,t[r*17+11]=j1(n.offset,32)&255,t[r*17+12]=j1(n.offset,48)&255,t[r*17+13]=n.length&255,t[r*17+14]=n.length>>8&255,t[r*17+15]=n.length>>16&255,t[r*17+16]=n.length>>24&255}return e},Bct=(i,e)=>{if(i.byteLength<17)return null;const t=i.byteLength/17,r=pSe(i,t-1);if(r.is_dir){const n=r.z,s=e.z-n,o=Math.trunc(e.x/(1<<s)),a=Math.trunc(e.y/(1<<s));return{z:n,x:o,y:a}}return null};function jct(i){return wa(this,null,function*(){const e=yield i.getBytes(0,512e3),t=new DataView(e.data),r=t.getUint32(4,!0),n=t.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(e.data,10,r)));let a=0;o.compression==="gzip"&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let u=0;"maxzoom"in o&&(u=+o.maxzoom);let c=0,h=0,d=0,p=-180,m=-85,g=180,v=85;if(o.bounds){const _=o.bounds.split(",");p=+_[0],m=+_[1],g=+_[2],v=+_[3]}if(o.center){const _=o.center.split(",");c=+_[0],h=+_[1],d=+_[2]}return{specVersion:t.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:n*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:p,minLat:m,maxLon:g,maxLat:v,centerZoom:d,centerLon:c,centerLat:h,etag:e.etag}})}function zct(i,e,t,r,n,s,o){return wa(this,null,function*(){let a=yield t.getArrayBuffer(e,i.rootDirectoryOffset,i.rootDirectoryLength,i);i.specVersion===1&&(a=Gme(a));const l=Ume(new DataView(a),r,n,s);if(l){let h=(yield e.getBytes(l.offset,l.length,o)).data;const d=new DataView(h);return d.getUint8(0)==31&&d.getUint8(1)==139&&(h=RL(new Uint8Array(h))),{data:h}}const u=Bct(new DataView(a),{z:r,x:n,y:s});if(u){const c=Fct(new DataView(a),u.z,u.x,u.y);if(c){let h=yield t.getArrayBuffer(e,c.offset,c.length,i);i.specVersion===1&&(h=Gme(h));const d=Ume(new DataView(h),r,n,s);if(d){let m=(yield e.getBytes(d.offset,d.length,o)).data;const g=new DataView(m);return g.getUint8(0)==31&&g.getUint8(1)==139&&(m=RL(new Uint8Array(m))),{data:m}}}}})}var mSe={getHeader:jct,getZxy:zct};function v0(i,e){return(e>>>0)*4294967296+(i>>>0)}function Uct(i,e){const t=e.buf;let r,n;if(n=t[e.pos++],r=(n&112)>>4,n<128||(n=t[e.pos++],r|=(n&127)<<3,n<128)||(n=t[e.pos++],r|=(n&127)<<10,n<128)||(n=t[e.pos++],r|=(n&127)<<17,n<128)||(n=t[e.pos++],r|=(n&127)<<24,n<128)||(n=t[e.pos++],r|=(n&1)<<31,n<128))return v0(i,r);throw new Error("Expected varint not more than 10 bytes")}function z1(i){const e=i.buf;let t,r;return r=e[i.pos++],t=r&127,r<128||(r=e[i.pos++],t|=(r&127)<<7,r<128)||(r=e[i.pos++],t|=(r&127)<<14,r<128)||(r=e[i.pos++],t|=(r&127)<<21,r<128)?t:(r=e[i.pos],t|=(r&15)<<28,Uct(t,i))}function Gct(i,e,t,r){if(r==0){t==1&&(e[0]=i-1-e[0],e[1]=i-1-e[1]);const n=e[0];e[0]=e[1],e[1]=n}}var qct=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Hct(i,e,t){if(i>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,i)-1||t>Math.pow(2,i)-1)throw Error("tile x/y outside zoom level bounds");const r=qct[i],n=Math.pow(2,i);let s=0,o=0,a=0;const l=[e,t];let u=n/2;for(;u>0;)s=(l[0]&u)>0?1:0,o=(l[1]&u)>0?1:0,a+=u*u*(3*s^o),Gct(u,l,s,o),u=u/2;return r+a}function gSe(i,e){return wa(this,null,function*(){if(e===1||e===0)return i;if(e===2){if(typeof globalThis.DecompressionStream>"u")return RL(new Uint8Array(i));{let r=new Response(i).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var M0=(i=>(i[i.Unknown=0]="Unknown",i[i.Mvt=1]="Mvt",i[i.Png=2]="Png",i[i.Jpeg=3]="Jpeg",i[i.Webp=4]="Webp",i[i.Avif=5]="Avif",i))(M0||{}),Vct=127;function Wct(i,e){let t=0,r=i.length-1;for(;t<=r;){const n=r+t>>1,s=e-i[n].tileId;if(s>0)t=n+1;else if(s<0)r=n-1;else return i[n]}return r>=0&&(i[r].runLength===0||e-i[r].tileId<i[r].runLength)?i[r]:null}var Yct=class{constructor(i,e=new Headers){this.url=i,this.customHeaders=e}getKey(){return this.url}setHeaders(i){this.customHeaders=i}getBytes(i,e,t){return wa(this,null,function*(){let r;t||(r=new AbortController,t=r.signal);const n=new Headers(this.customHeaders);n.set("Range","bytes="+i+"-"+(i+e-1));let s=yield fetch(this.url,{signal:t,headers:n});if(s.status===416&&i===0){const l=s.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const u=+l.substr(8);s=yield fetch(this.url,{signal:t,headers:{Range:"bytes=0-"+(u-1)}})}if(s.status>=300)throw Error("Bad response code: "+s.status);const o=s.headers.get("Content-Length");if(s.status===200&&(!o||+o>e))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield s.arrayBuffer(),etag:s.headers.get("ETag")||void 0,cacheControl:s.headers.get("Cache-Control")||void 0,expires:s.headers.get("Expires")||void 0}})}};function Iu(i,e){const t=i.getUint32(e+4,!0),r=i.getUint32(e+0,!0);return t*Math.pow(2,32)+r}function Xct(i,e){const t=new DataView(i),r=t.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Iu(t,8),rootDirectoryLength:Iu(t,16),jsonMetadataOffset:Iu(t,24),jsonMetadataLength:Iu(t,32),leafDirectoryOffset:Iu(t,40),leafDirectoryLength:Iu(t,48),tileDataOffset:Iu(t,56),tileDataLength:Iu(t,64),numAddressedTiles:Iu(t,72),numTileEntries:Iu(t,80),numTileContents:Iu(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}function ySe(i){const e={buf:new Uint8Array(i),pos:0},t=z1(e),r=[];let n=0;for(let s=0;s<t;s++){const o=z1(e);r.push({tileId:n+o,offset:0,length:0,runLength:1}),n+=o}for(let s=0;s<t;s++)r[s].runLength=z1(e);for(let s=0;s<t;s++)r[s].length=z1(e);for(let s=0;s<t;s++){const o=z1(e);o===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=o-1}return r}function Zct(i){const e=new DataView(i);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var K0=class extends Error{};function Kct(i,e,t,r){return wa(this,null,function*(){const n=yield i.getBytes(0,16384);if(new DataView(n.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Zct(n.data)<3)return[yield mSe.getHeader(i)];const o=n.data.slice(0,Vct);let a=n.etag;r&&n.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+i.getKey()),a=void 0);const l=Xct(o,a);if(t){const u=n.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),c=i.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,h=ySe(yield e(u,l.internalCompression));return[l,[c,h.length,h]]}return[l,void 0]})}function Jct(i,e,t,r,n){return wa(this,null,function*(){const s=yield i.getBytes(t,r);if(n.etag&&n.etag!==s.etag)throw new K0(s.etag);const o=yield e(s.data,n.internalCompression),a=ySe(o);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var Qct=class{constructor(i=100,e=!0,t=gSe){this.cache=new Map,this.maxCacheEntries=i,this.counter=1,this.prefetch=e,this.decompress=t}getHeader(i,e){return wa(this,null,function*(){const t=i.getKey();if(this.cache.has(t))return this.cache.get(t).lastUsed=this.counter++,yield this.cache.get(t).data;const r=new Promise((n,s)=>{Kct(i,this.decompress,this.prefetch,e).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),n(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(i,e,t,r){return wa(this,null,function*(){const n=i.getKey()+"|"+(r.etag||"")+"|"+e+"|"+t;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const s=new Promise((o,a)=>{Jct(i,this.decompress,e,t,r).then(l=>{o(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(n,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(i,e,t,r){return wa(this,null,function*(){const n=i.getKey()+"|"+(r.etag||"")+"|"+e+"|"+t;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const s=new Promise((o,a)=>{i.getBytes(e,t).then(l=>{if(r.etag&&r.etag!==l.etag)throw new K0(l.etag);o(l.data),this.cache.has(n),this.prune()}).catch(l=>{a(l)})});return this.cache.set(n,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let i=1/0,e;this.cache.forEach((t,r)=>{t.lastUsed<i&&(i=t.lastUsed,e=r)}),e&&this.cache.delete(e)}}invalidate(i,e){return wa(this,null,function*(){this.cache.delete(i.getKey()),yield this.getHeader(i,e)})}},AP=class{constructor(i,e,t){typeof i=="string"?this.source=new Yct(i):this.source=i,t?this.decompress=t:this.decompress=gSe,e?this.cache=e:this.cache=new Qct}getHeader(){return wa(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(i,e,t,r){return wa(this,null,function*(){const n=Hct(i,e,t),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return mSe.getZxy(s,this.source,this.cache,i,e,t,r);if(i<s.minZoom||i>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,o,a,s),c=Wct(u,n);if(c)if(c.runLength>0){const h=yield this.source.getBytes(s.tileDataOffset+c.offset,c.length,r);if(s.etag&&s.etag!==h.etag)throw new K0(h.etag);return{data:yield this.decompress(h.data,s.tileCompression),cacheControl:h.cacheControl,expires:h.expires}}else o=s.leafDirectoryOffset+c.offset,a=c.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(i,e,t,r){return wa(this,null,function*(){try{return yield this.getZxyAttempt(i,e,t,r)}catch(n){if(n instanceof K0)return this.cache.invalidate(this.source,n.message),yield this.getZxyAttempt(i,e,t,r);throw n}})}getMetadataAttempt(){return wa(this,null,function*(){const i=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(i.jsonMetadataOffset,i.jsonMetadataLength);if(i.etag&&i.etag!==e.etag)throw new K0(e.etag);const t=yield this.decompress(e.data,i.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(t))})}getMetadata(){return wa(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(i){if(i instanceof K0)return this.cache.invalidate(this.source,i.message),yield this.getMetadataAttempt();throw i}})}};class eht extends ka{constructor(e){super(Bt.ERROR),this.error=e}}class zn{constructor(e){this.name=e}toString(){return this.name}}zn.GeoTIFF=new zn("GeoTIFF");zn.ImageStatic=new zn("ImageStatic");zn.PMTilesRaster=new zn("PMTilesRaster");zn.PMTilesVector=new zn("PMTilesVector");zn.TileJSON=new zn("TileJSON");zn.TileWMS=new zn("TileWMS");zn.WMTS=new zn("WMTS");zn.XYZ=new zn("XYZ");var vSe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(Rn,function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(h,d){return h.indexOf(d)===-1?h.length:h.indexOf(d)}function n(h){var d=h.replace(/^v/,"").replace(/\+.*$/,""),p=r(d,"-"),m=d.substring(0,p).split(".");return m.push(d.substring(p+1)),m}function s(h){return isNaN(Number(h))?h:Number(h)}function o(h){if(typeof h!="string")throw new TypeError("Invalid argument expected string");if(!t.test(h))throw new Error("Invalid argument not valid semver ('"+h+"' received)")}function a(h,d){[h,d].forEach(o);for(var p=n(h),m=n(d),g=0;g<Math.max(p.length-1,m.length-1);g++){var v=parseInt(p[g]||0,10),b=parseInt(m[g]||0,10);if(v>b)return 1;if(b>v)return-1}var _=p[p.length-1],E=m[m.length-1];if(_&&E){var C=_.split(".").map(s),T=E.split(".").map(s);for(g=0;g<Math.max(C.length,T.length);g++){if(C[g]===void 0||typeof T[g]=="string"&&typeof C[g]=="number")return-1;if(T[g]===void 0||typeof C[g]=="string"&&typeof T[g]=="number"||C[g]>T[g])return 1;if(T[g]>C[g])return-1}}else if(_||E)return _?-1:1;return 0}var l=[">",">=","=","<","<="],u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function c(h){if(typeof h!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof h);if(l.indexOf(h)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(h){return typeof h=="string"&&t.test(h)},a.compare=function(h,d,p){c(p);var m=a(h,d);return u[p].indexOf(m)>-1},a})})(vSe);var tht=vSe.exports,IL=tht;const kP="1.0.0",Et=!0,yi={classification:"https://stac-extensions.github.io/classification/v1.1.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.1.0/schema.json",eo:"https://stac-extensions.github.io/eo/v1.0.0/schema.json",file:"https://stac-extensions.github.io/file/v1.0.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.1.0/schema.json",projection:"https://stac-extensions.github.io/projection/v1.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v1.1.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.0.0/schema.json",version:"https://stac-extensions.github.io/version/v1.0.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},Om={itemAndCollection:{"cube:":yi.datacube,"eo:":yi.eo,"file:":yi.file,"label:":yi.label,"pc:":yi.pointcloud,"processing:":yi.processing,"proj:":yi.projection,"raster:":yi.raster,"sar:":yi.sar,"sat:":yi.sat,"sci:":yi.scientific,"view:":yi.view,version:yi.version,deprecated:yi.version,published:yi.timestamps,expires:yi.timestamps,unpublished:yi.timestamps},catalog:{},collection:{item_assets:yi["item-assets"]},item:{}};Om.collection=Object.assign(Om.collection,Om.itemAndCollection);Om.item=Object.assign(Om.item,Om.itemAndCollection);var o_={parseUrl(i){let e=i.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(e)return{id:e[1],version:e[2]}}},Nr={version:kP,extensions:{},set(i){if(typeof i.stac_version!="string"?Nr.version="0.6.0":Nr.version=i.stac_version,Array.isArray(i.stac_extensions))for(let e of i.stac_extensions){let t=o_.parseUrl(e);t&&(Nr.extensions[t.id]=t.version)}},before(i,e=null){let t=e?Nr.extensions[e]:Nr.version;return typeof t>"u"?!1:IL.compare(t,i,"<")}},je={type(i){let e=typeof i;if(e==="object"){if(i===null)return"null";if(Array.isArray(i))return"array"}return e},is(i,e){return je.type(i)===e},isDefined(i){return typeof i<"u"},isObject(i){return typeof i=="object"&&i===Object(i)&&!Array.isArray(i)},rename(i,e,t){return typeof i[e]<"u"&&typeof i[t]>"u"?(i[t]=i[e],delete i[e],!0):!1},forAll(i,e,t){if(i[e]&&typeof i[e]=="object")for(let r in i[e])t(i[e][r])},toArray(i,e){return typeof i[e]<"u"&&!Array.isArray(i[e])?(i[e]=[i[e]],!0):!1},flattenArray(i,e,t,r=!1){if(Array.isArray(i[e])){for(let n in i[e])if(typeof t[n]=="string"){let s=i[e][n];i[t[n]]=r?[s]:s}return delete i[e],!0}return!1},flattenOneElementArray(i,e,t=!1){return!t&&Array.isArray(i[e])?i[e].length===1?(i[e]=i[e][0],!0):!1:!0},removeFromArray(i,e,t){if(Array.isArray(i[e])){let r=i[e].indexOf(t);return r>-1&&i[e].splice(r,1),!0}return!1},ensure(i,e,t){return je.type(t)!==je.type(i[e])&&(i[e]=t),!0},upgradeExtension(i,e){let{id:t,version:r}=o_.parseUrl(e),n=i.stac_extensions.findIndex(s=>{let o=o_.parseUrl(s);return o&&o.id===t&&IL.compare(o.version,r,"<")});return n!==-1?(i.stac_extensions[n]=e,!0):!1},addExtension(i,e){let{id:t,version:r}=o_.parseUrl(e),n=i.stac_extensions.findIndex(s=>{if(s===e)return!0;let o=o_.parseUrl(s);return!!(o&&o.id===t&&IL.compare(o.version,r,"<"))});return n===-1?i.stac_extensions.push(e):i.stac_extensions[n]=e,i.stac_extensions.sort(),!0},removeExtension(i,e){return je.removeFromArray(i,"stac_extensions",e)},migrateExtensionShortnames(i){let e=Object.keys(yi),t=Object.values(yi);return je.mapValues(i,"stac_extensions",e,t)},populateExtensions(i,e){let t=[];(e=="catalog"||e=="collection")&&t.push(i),(e=="item"||e=="collection")&&je.isObject(i.assets)&&(t=t.concat(Object.values(i.assets))),e=="collection"&&je.isObject(i.item_assets)&&(t=t.concat(Object.values(i.item_assets))),e=="collection"&&je.isObject(i.summaries)&&t.push(i.summaries),e=="item"&&je.isObject(i.properties)&&t.push(i.properties);for(let r of t)Object.keys(r).forEach(n=>{let s=n.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(s)){let o=Om[e][s[0]];je.is(o,"string")&&je.addExtension(i,o)}})},mapValues(i,e,t,r){let n=s=>{let o=t.indexOf(s);return o>=0?r[o]:s};return Array.isArray(i[e])?i[e]=i[e].map(n):typeof i[e]<"u"&&(i[e]=n(i[e])),!0},mapObject(i,e){for(let t in i)i[t]=e(i[t],t)},moveTo(i,e,t,r=!1,n=!1){let s;return r?n?s=o=>Array.isArray(o):s=o=>Array.isArray(o)&&o.length===1:s=je.isDefined,s(i[e])?(t[e]=r&&!n?i[e][0]:i[e],delete i[e],!0):!1},runAll(i,e,t,r){for(let n in i)n.startsWith("migrate")||i[n](e,t,r)},toUTC(i,e){if(typeof i[e]=="string")try{return i[e]=this.toISOString(i[e]),!0}catch{}return delete i[e],!1},toISOString(i){return i instanceof Date||(i=new Date(i)),i.toISOString().replace(".000","")}},Cc={multihash:null,hexToUint8(i){if(i.length===0||i.length%2!==0)throw new Error(`The string "${i}" is not valid hex.`);return new Uint8Array(i.match(/.{1,2}/g).map(e=>parseInt(e,16)))},uint8ToHex(i){return i.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")},toMultihash(i,e,t){if(!Cc.multihash||!je.is(i[e],"string"))return!1;try{const r=Cc.multihash.encode(Cc.hexToUint8(i[e]),t);return i[e]=Cc.uint8ToHex(r),!0}catch(r){return console.warn(r),!1}}},DP={migrate(i,e=!0){return Nr.set(i),e&&(i.stac_version=kP),i.type="Catalog",je.ensure(i,"stac_extensions",[]),Nr.before("1.0.0-rc.1")&&je.migrateExtensionShortnames(i),je.ensure(i,"id",""),je.ensure(i,"description",""),je.ensure(i,"links",[]),je.runAll(DP,i,i),Nr.before("0.8.0")&&je.populateExtensions(i,"catalog"),i}},MP={migrate(i,e=!0){return DP.migrate(i,e),i.type="Collection",Nr.before("1.0.0-rc.1")&&je.migrateExtensionShortnames(i),je.ensure(i,"license","proprietary"),je.ensure(i,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),je.runAll(MP,i,i),je.isObject(i.properties)&&(je.removeFromArray(i,"stac_extensions","commons"),delete i.properties),Nr.before("0.8.0")&&je.populateExtensions(i,"collection"),Nr.before("1.0.0-beta.1")&&je.mapValues(i,"stac_extensions",["assets"],["item-assets"]),i},extent(i){if(je.ensure(i,"extent",{}),Nr.before("0.8.0")&&(Array.isArray(i.extent.spatial)&&(i.extent.spatial={bbox:[i.extent.spatial]}),Array.isArray(i.extent.temporal)&&(i.extent.temporal={interval:[i.extent.temporal]})),je.ensure(i.extent,"spatial",{}),je.ensure(i.extent.spatial,"bbox",[]),je.ensure(i.extent,"temporal",{}),je.ensure(i.extent.temporal,"interval",[]),Nr.before("1.0.0-rc.3")){if(i.extent.temporal.interval.length>1){let e,t;for(let r of i.extent.temporal.interval){if(r[0]===null)e=null;else if(typeof r[0]=="string"&&e!==null)try{let n=new Date(r[0]);(typeof e>"u"||n<e)&&(e=n)}catch{}if(r[1]===null)t=null;else if(typeof r[1]=="string"&&t!==null)try{let n=new Date(r[1]);(typeof t>"u"||n>t)&&(t=n)}catch{}}i.extent.temporal.interval.unshift([e?je.toISOString(e):null,t?je.toISOString(t):null])}if(i.extent.spatial.bbox.length>1){let e=i.extent.spatial.bbox.reduce((t,r)=>Array.isArray(r)?Math.max(r.length,t):t,4);if(e>=4){let t=new Array(e).fill(null),r=e/2;for(let n of i.extent.spatial.bbox){if(!Array.isArray(n)||n.length<4)break;for(let s in n){let o=n[s];t[s]===null?t[s]=o:s<r?t[s]=Math.min(o,t[s]):t[s]=Math.max(o,t[s])}}t.findIndex(n=>n===null)===-1&&i.extent.spatial.bbox.unshift(t)}}}},collectionAssets(i){Nr.before("1.0.0-rc.1")&&je.removeExtension(i,"collection-assets"),kx.migrateAll(i)},itemAsset(i){Nr.before("1.0.0-beta.2")&&je.rename(i,"item_assets","assets"),kx.migrateAll(i,"item_assets")},summaries(i){if(je.ensure(i,"summaries",{}),Nr.before("0.8.0")&&je.isObject(i.other_properties)){for(let e in i.other_properties){let t=i.other_properties[e];Array.isArray(t.extent)&&t.extent.length===2?i.summaries[e]={minimum:t.extent[0],maximum:t.extent[1]}:Array.isArray(t.values)&&(t.values.filter(r=>Array.isArray(r)).length===t.values.length?i.summaries[e]=t.values.reduce((r,n)=>r.concat(n),[]):i.summaries[e]=t.values)}delete i.other_properties}if(Nr.before("1.0.0-beta.1")&&je.isObject(i.properties)&&!i.links.find(e=>["child","item"].includes(e.rel)))for(let e in i.properties){let t=i.properties[e];Array.isArray(t)||(t=[t]),i.summaries[e]=t}Nr.before("1.0.0-rc.1")&&je.mapObject(i.summaries,e=>(je.rename(e,"min","minimum"),je.rename(e,"max","maximum"),e)),OA.migrate(i.summaries,i,!0),je.moveTo(i.summaries,"sci:doi",i,!0)&&je.addExtension(i,yi.scientific),je.moveTo(i.summaries,"sci:publications",i,!0,!0)&&je.addExtension(i,yi.scientific),je.moveTo(i.summaries,"sci:citation",i,!0)&&je.addExtension(i,yi.scientific),je.moveTo(i.summaries,"cube:dimensions",i,!0)&&je.addExtension(i,yi.datacube),Object.keys(i.summaries).length===0&&delete i.summaries}},LP={migrate(i,e=null,t=!0){Nr.set(i),t&&(i.stac_version=kP),je.ensure(i,"stac_extensions",[]),Nr.before("1.0.0-rc.1")&&je.migrateExtensionShortnames(i),je.ensure(i,"id",""),je.ensure(i,"type","Feature"),je.isObject(i.geometry)||(i.geometry=null),i.geometry!==null&&je.ensure(i,"bbox",[]),je.ensure(i,"properties",{}),je.ensure(i,"links",[]),je.ensure(i,"assets",{});let r=!1;return je.isObject(e)&&je.isObject(e.properties)&&(je.removeFromArray(i,"stac_extensions","commons"),i.properties=Object.assign({},e.properties,i.properties),r=!0),je.runAll(LP,i,i),OA.migrate(i.properties,i),kx.migrateAll(i),(Nr.before("0.8.0")||r)&&je.populateExtensions(i,"item"),i}},bSe={migrate(i,e=!0){return je.ensure(i,"collections",[]),je.ensure(i,"links",[]),je.runAll(bSe,i,i),i.collections=i.collections.map(t=>MP.migrate(t,e)),i}},_Se={migrate(i,e=!0){return je.ensure(i,"type","FeatureCollection"),je.ensure(i,"features",[]),je.ensure(i,"links",[]),je.runAll(_Se,i,i),i.features=i.features.map(t=>LP.migrate(t,null,e)),i}},kx={migrateAll(i,e="assets"){for(let t in i[e])kx.migrate(i[e][t],i)},migrate(i,e){return je.runAll(kx,i,e),OA.migrate(i,e),i},mediaTypes(i){je.is(i.type,"string")&&je.mapValues(i,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])},eo(i,e){let t=je.isObject(e.properties)&&Array.isArray(e.properties["eo:bands"])?e.properties["eo:bands"]:[];if(Array.isArray(i["eo:bands"]))for(let r in i["eo:bands"]){let n=i["eo:bands"][r];je.is(n,"number")&&je.isObject(t[n])?n=t[n]:je.isObject(n)||(n={}),i["eo:bands"][r]=n}}},OA={migrate(i,e,t=!1){return je.runAll(OA,i,e,t),i},_commonMetadata(i){Nr.before("1.0.0-rc.3")&&(je.toUTC(i,"created"),je.toUTC(i,"updated"))},_timestamps(i,e){je.toUTC(i,"published"),je.toUTC(i,"expires"),je.toUTC(i,"unpublished"),je.upgradeExtension(e,yi.timestamps)},_versioningIndicator(i,e){je.upgradeExtension(e,yi.version)},checksum(i,e){Nr.before("0.9.0")&&Cc.multihash&&(je.rename(i,"checksum:md5","checksum:multihash")&&Cc.toMultihash(i,"checksum:multihash","md5"),je.rename(i,"checksum:sha1","checksum:multihash")&&Cc.toMultihash(i,"checksum:multihash","sha1"),je.rename(i,"checksum:sha2","checksum:multihash")&&Cc.toMultihash(i,"checksum:multihash","sha2-256"),je.rename(i,"checksum:sha3","checksum:multihash")&&Cc.toMultihash(i,"checksum:multihash","sha3-256")),Nr.before("1.0.0-rc.1")&&je.rename(i,"checksum:multihash","file:checksum")&&je.addExtension(e,yi.file),je.removeExtension(e,"checksum")},classification(i,e){Nr.before("1.1.0","classification")&&je.forAll(i,"classification:classes",t=>je.rename(t,"color-hint","color_hint")),je.upgradeExtension(e,yi.classification)},cube(i,e){je.upgradeExtension(e,yi.datacube)},dtr(i,e){Nr.before("0.9.0")&&(je.rename(i,"dtr:start_datetime","start_datetime"),je.rename(i,"dtr:end_datetime","end_datetime"),je.removeExtension(e,"datetime-range"))},eo(i,e){Nr.before("0.9.0")&&(je.rename(i,"eo:epsg","proj:epsg")&&je.addExtension(e,yi.projection),je.rename(i,"eo:platform","platform"),je.rename(i,"eo:instrument","instruments")&&je.toArray(i,"instruments"),je.rename(i,"eo:constellation","constellation"),je.rename(i,"eo:off_nadir","view:off_nadir")&&je.addExtension(e,yi.view),je.rename(i,"eo:azimuth","view:azimuth")&&je.addExtension(e,yi.view),je.rename(i,"eo:incidence_angle","view:incidence_angle")&&je.addExtension(e,yi.view),je.rename(i,"eo:sun_azimuth","view:sun_azimuth")&&je.addExtension(e,yi.view),je.rename(i,"eo:sun_elevation","view:sun_elevation")&&je.addExtension(e,yi.view)),Nr.before("1.0.0-beta.1")&&je.rename(i,"eo:gsd","gsd"),je.upgradeExtension(e,yi.eo)},file(i,e){je.upgradeExtension(e,yi.file)},label(i,e){Nr.before("0.8.0")&&(je.rename(i,"label:property","label:properties"),je.rename(i,"label:task","label:tasks"),je.rename(i,"label:overview","label:overviews")&&je.toArray(i,"label:overviews"),je.rename(i,"label:method","label:methods"),je.toArray(i,"label:classes")),je.upgradeExtension(e,yi.label)},pc(i,e){Nr.before("0.8.0")&&je.rename(i,"pc:schema","pc:schemas"),je.upgradeExtension(e,yi.pointcloud)},processing(i,e){je.upgradeExtension(e,yi.processing)},proj(i,e){je.upgradeExtension(e,yi.projection)},raster(i,e){je.upgradeExtension(e,yi.raster)},sar(i,e,t){je.rename(i,"sar:incidence_angle","view:incidence_angle")&&je.addExtension(e,yi.view),je.rename(i,"sar:pass_direction","sat:orbit_state")&&je.mapValues(i,"sat:orbit_state",[null],["geostationary"])&&je.addExtension(e,yi.sat),Nr.before("0.7.0")&&(je.flattenArray(i,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],t),je.flattenArray(i,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],t),je.flattenArray(i,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],t),je.rename(i,"sar:off_nadir","view:off_nadir")&&je.addExtension(e,yi.view)),Nr.before("0.9.0")&&(je.rename(i,"sar:platform","platform"),je.rename(i,"sar:instrument","instruments")&&je.toArray(i,"instruments"),je.rename(i,"sar:constellation","constellation"),je.rename(i,"sar:type","sar:product_type"),je.rename(i,"sar:polarization","sar:polarizations"),je.flattenOneElementArray(i,"sar:absolute_orbit",t)&&je.rename(i,"sar:absolute_orbit","sat:absolute_orbit")&&je.addExtension(e,yi.sat),je.flattenOneElementArray(i,"sar:relative_orbit",t)&&je.rename(i,"sar:relative_orbit","sat:relative_orbit")&&je.addExtension(e,yi.sat)),je.upgradeExtension(e,yi.sar)},sat(i,e){Nr.before("0.9.0")&&(je.rename(i,"sat:off_nadir_angle","sat:off_nadir"),je.rename(i,"sat:azimuth_angle","sat:azimuth"),je.rename(i,"sat:sun_azimuth_angle","sat:sun_azimuth"),je.rename(i,"sat:sun_elevation_angle","sat:sun_elevation")),je.upgradeExtension(e,yi.sat)},sci(i,e){je.upgradeExtension(e,yi.scientific)},item(i){Nr.before("0.8.0")&&(je.rename(i,"item:license","license"),je.rename(i,"item:providers","providers"))},table(i,e){je.upgradeExtension(e,yi.table)},view(i,e){je.upgradeExtension(e,yi.view)}},L0={item(i,e=null,t=!0){return LP.migrate(i,e,t)},catalog(i,e=!0){return DP.migrate(i,e)},collection(i,e=!0){return MP.migrate(i,e)},collectionCollection(i,e=!0){return bSe.migrate(i,e)},itemCollection(i,e=!0){return _Se.migrate(i,e)},stac(i,e=!0){return i.type==="Feature"?L0.item(i,null,e):i.type==="FeatureCollection"?L0.itemCollection(i,e):i.type==="Collection"||!i.type&&je.isDefined(i.extent)&&je.isDefined(i.license)?L0.collection(i,e):!i.type&&Array.isArray(i.collections)?L0.collectionCollection(i,e):L0.catalog(i,e)},enableMultihash(i){Cc.multihash=i}},iht=L0;const rht=$o(iht);function zv(i){let e=i.length>=6,t=i[0],r=i[e?3:2],n=i[1],s=i[e?4:3],o={west:t,east:r,south:n,north:s};return e&&(o.base=i[2],o.height=i[5]),o}function qD(i){let{west:e,east:t,south:r,north:n}=zv(i);return[[[e,n],[e,r],[t,r],[t,n],[e,n]]]}function nht(i){if(!Vu(i))return null;let e=zv(i),t=[];if(wSe(i)){let r=(e.west+360+e.east)/2;r>180&&(r-=360),t.push(r)}else t.push((e.west+e.east)/2);return t.push((e.south+e.north)/2),typeof e.base<"u"&&t.push((e.base+e.height)/2),t}function xSe(i){if(Vu(i)?i=[i]:Array.isArray(i)&&(i=i.filter(r=>Vu(r))),!Array.isArray(i)||i.length===0)return null;let e=i.reduce((r,n)=>{if(wSe(n)){let{west:s,east:o,south:a,north:l}=zv(n);r.push(qD([-180,a,o,l])),r.push(qD([s,a,180,l]))}else r.push(qD(n));return r},[]),t=null;if(e.length===1?t={type:"Polygon",coordinates:e[0]}:e.length>1&&(t={type:"MultiPolygon",coordinates:e}),t)return{type:"Feature",geometry:t,properties:{}}}function Vu(i){if(!Array.isArray(i)||![4,6].includes(i.length)||i.some(s=>typeof s!="number"))return!1;let{west:e,east:t,south:r,north:n}=zv(i);return r<=n&&e>=-180&&e<=180&&r>=-90&&t<=180&&t>=-180&&n<=90}function wSe(i){if(!Vu(i))return!1;let{west:e,east:t}=zv(i);return e>t}function ESe(i){if(!Array.isArray(i)||i.length===0)return null;let e={west:180,south:90,east:-180,north:-90};i.forEach(r=>{if(!Vu(r))return;let n=zv(r),s=["west","south"];for(let o in n){let a=s.includes(o)?Math.min:Math.max;e[o]=a(e[o],n[o])}});let t=[e.west,e.south,e.east,e.north];return Vu(t)?t:null}function Qa(i){return typeof i=="string"&&i.length>0}function qa(i){return typeof i=="object"&&i===Object(i)&&!Array.isArray(i)}function SSe(...i){if(i=i.filter(e=>Array.isArray(e)),i.length>1){let e=Math.max(...i.map(r=>r.length)),t=[];for(let r=0;r<e;r++)t.push(Object.assign({},...i.map(n=>n[r])));return t}else if(i.length===1)return i[0];return[]}function sht(i){switch(i){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return i.startsWith("u")?0:null}function oht(i){switch(i){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}class PA{constructor(e,t={},r=[]){if(!qa(e))throw new Error("Given data is not an object");if(e instanceof PA){for(let n of r)this[n]=e[n];e=e.toJSON()}this._keyMap=t,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let n in e)typeof this[n]>"u"&&(n in t?this[n]=t[n](e[n],this):this[n]=e[n])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(e){return this[e]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return nht(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let e={};return Object.keys(this).forEach(t=>{if(typeof this[t]=="function"||this._privateKeys.includes(t))return;let r=this[t];if(t in this._keyMap){let n=Array.isArray(r)?[]:{};for(let s in r)n[s]=r[s].toJSON();r=n}e[t]=r}),e}}var CSe={exports:{}},a_={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */a_.exports;var qme;function aht(){return qme||(qme=1,function(i,e){(function(t){var r=e&&!e.nodeType&&e,n=i&&!i.nodeType&&i,s=typeof Rn=="object"&&Rn;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,u=1,c=26,h=38,d=700,p=72,m=128,g="-",v=/^xn--/,b=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-u,T=Math.floor,D=String.fromCharCode,M;function A(ie){throw new RangeError(E[ie])}function I(ie,de){for(var te=ie.length,z=[];te--;)z[te]=de(ie[te]);return z}function P(ie,de){var te=ie.split("@"),z="";te.length>1&&(z=te[0]+"@",ie=te[1]),ie=ie.replace(_,".");var ne=ie.split("."),ve=I(ne,de).join(".");return z+ve}function U(ie){for(var de=[],te=0,z=ie.length,ne,ve;te<z;)ne=ie.charCodeAt(te++),ne>=55296&&ne<=56319&&te<z?(ve=ie.charCodeAt(te++),(ve&64512)==56320?de.push(((ne&1023)<<10)+(ve&1023)+65536):(de.push(ne),te--)):de.push(ne);return de}function K(ie){return I(ie,function(de){var te="";return de>65535&&(de-=65536,te+=D(de>>>10&1023|55296),de=56320|de&1023),te+=D(de),te}).join("")}function L(ie){return ie-48<10?ie-22:ie-65<26?ie-65:ie-97<26?ie-97:l}function F(ie,de){return ie+22+75*(ie<26)-((de!=0)<<5)}function $(ie,de,te){var z=0;for(ie=te?T(ie/d):ie>>1,ie+=T(ie/de);ie>C*c>>1;z+=l)ie=T(ie/C);return T(z+(C+1)*ie/(ie+h))}function H(ie){var de=[],te=ie.length,z,ne=0,ve=m,$e=p,Xe,ot,Be,He,st,xt,kt,Tt,Ei;for(Xe=ie.lastIndexOf(g),Xe<0&&(Xe=0),ot=0;ot<Xe;++ot)ie.charCodeAt(ot)>=128&&A("not-basic"),de.push(ie.charCodeAt(ot));for(Be=Xe>0?Xe+1:0;Be<te;){for(He=ne,st=1,xt=l;Be>=te&&A("invalid-input"),kt=L(ie.charCodeAt(Be++)),(kt>=l||kt>T((a-ne)/st))&&A("overflow"),ne+=kt*st,Tt=xt<=$e?u:xt>=$e+c?c:xt-$e,!(kt<Tt);xt+=l)Ei=l-Tt,st>T(a/Ei)&&A("overflow"),st*=Ei;z=de.length+1,$e=$(ne-He,z,He==0),T(ne/z)>a-ve&&A("overflow"),ve+=T(ne/z),ne%=z,de.splice(ne++,0,ve)}return K(de)}function V(ie){var de,te,z,ne,ve,$e,Xe,ot,Be,He,st,xt=[],kt,Tt,Ei,si;for(ie=U(ie),kt=ie.length,de=m,te=0,ve=p,$e=0;$e<kt;++$e)st=ie[$e],st<128&&xt.push(D(st));for(z=ne=xt.length,ne&&xt.push(g);z<kt;){for(Xe=a,$e=0;$e<kt;++$e)st=ie[$e],st>=de&&st<Xe&&(Xe=st);for(Tt=z+1,Xe-de>T((a-te)/Tt)&&A("overflow"),te+=(Xe-de)*Tt,de=Xe,$e=0;$e<kt;++$e)if(st=ie[$e],st<de&&++te>a&&A("overflow"),st==de){for(ot=te,Be=l;He=Be<=ve?u:Be>=ve+c?c:Be-ve,!(ot<He);Be+=l)si=ot-He,Ei=l-He,xt.push(D(F(He+si%Ei,0))),ot=T(si/Ei);xt.push(D(F(ot,0))),ve=$(te,Tt,z==ne),te=0,++z}++te,++de}return xt.join("")}function J(ie){return P(ie,function(de){return v.test(de)?H(de.slice(4).toLowerCase()):de})}function ee(ie){return P(ie,function(de){return b.test(de)?"xn--"+V(de):de})}if(o={version:"1.3.2",ucs2:{decode:U,encode:K},decode:H,encode:V,toASCII:ee,toUnicode:J},r&&n)if(i.exports==r)n.exports=o;else for(M in o)o.hasOwnProperty(M)&&(r[M]=o[M]);else t.punycode=o})(Rn)}(a_,a_.exports)),a_.exports}var HD={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var Hme;function lht(){return Hme||(Hme=1,function(i){(function(e,t){i.exports?i.exports=t():e.IPv6=t(e)})(Rn,function(e){var t=e&&e.IPv6;function r(s){var o=s.toLowerCase(),a=o.split(":"),l=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(u=7);var c;for(c=0;c<l&&a[c]!=="";c++);if(c<u)for(a.splice(c,1,"0000");a.length<u;)a.splice(c,0,"0000");for(var h,d=0;d<u;d++){h=a[d].split("");for(var p=0;p<3&&(h[0]==="0"&&h.length>1);p++)h.splice(0,1);a[d]=h.join("")}var m=-1,g=0,v=0,b=-1,_=!1;for(d=0;d<u;d++)_?a[d]==="0"?v+=1:(_=!1,v>g&&(m=b,g=v)):a[d]==="0"&&(_=!0,b=d,v=1);v>g&&(m=b,g=v),g>1&&a.splice(m,g,""),l=a.length;var E="";for(a[0]===""&&(E=":"),d=0;d<l&&(E+=a[d],d!==l-1);d++)E+=":";return a[l-1]===""&&(E+=":"),E}function n(){return e.IPv6===this&&(e.IPv6=t),this}return{best:r,noConflict:n}})}(HD)),HD.exports}var VD={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var Vme;function uht(){return Vme||(Vme=1,function(i){(function(e,t){i.exports?i.exports=t():e.SecondLevelDomains=t(e)})(Rn,function(e){var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(n){var s=n.lastIndexOf(".");if(s<=0||s>=n.length-1)return!1;var o=n.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return!1;var a=r.list[n.slice(s+1)];return a?a.indexOf(" "+n.slice(o+1,s)+" ")>=0:!1},is:function(n){var s=n.lastIndexOf(".");if(s<=0||s>=n.length-1)return!1;var o=n.lastIndexOf(".",s-1);if(o>=0)return!1;var a=r.list[n.slice(s+1)];return a?a.indexOf(" "+n.slice(0,s)+" ")>=0:!1},get:function(n){var s=n.lastIndexOf(".");if(s<=0||s>=n.length-1)return null;var o=n.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return null;var a=r.list[n.slice(s+1)];return!a||a.indexOf(" "+n.slice(o+1,s)+" ")<0?null:n.slice(o+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r})}(VD)),VD.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(i){(function(e,t){i.exports?i.exports=t(aht(),lht(),uht()):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(Rn,function(e,t,r,n){var s=n&&n.URI;function o(L,F){var $=arguments.length>=1,H=arguments.length>=2;if(!(this instanceof o))return $?H?new o(L,F):new o(L):new o;if(L===void 0){if($)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?L=location.href+"":L=""}if(L===null&&$)throw new TypeError("null is not a valid argument for URI");return this.href(L),F!==void 0?this.absoluteTo(F):this}function a(L){return/^[0-9]+$/.test(L)}o.version="1.19.11";var l=o.prototype,u=Object.prototype.hasOwnProperty;function c(L){return L.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function h(L){return L===void 0?"Undefined":String(Object.prototype.toString.call(L)).slice(8,-1)}function d(L){return h(L)==="Array"}function p(L,F){var $={},H,V;if(h(F)==="RegExp")$=null;else if(d(F))for(H=0,V=F.length;H<V;H++)$[F[H]]=!0;else $[F]=!0;for(H=0,V=L.length;H<V;H++){var J=$&&$[L[H]]!==void 0||!$&&F.test(L[H]);J&&(L.splice(H,1),V--,H--)}return L}function m(L,F){var $,H;if(d(F)){for($=0,H=F.length;$<H;$++)if(!m(L,F[$]))return!1;return!0}var V=h(F);for($=0,H=L.length;$<H;$++)if(V==="RegExp"){if(typeof L[$]=="string"&&L[$].match(F))return!0}else if(L[$]===F)return!0;return!1}function g(L,F){if(!d(L)||!d(F)||L.length!==F.length)return!1;L.sort(),F.sort();for(var $=0,H=L.length;$<H;$++)if(L[$]!==F[$])return!1;return!0}function v(L){var F=/^\/+|\/+$/g;return L.replace(F,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(L){if(!(!L||!L.nodeName)){var F=L.nodeName.toLowerCase();if(!(F==="input"&&L.type!=="image"))return o.domAttributes[F]}};function b(L){return escape(L)}function _(L){return encodeURIComponent(L).replace(/[!'()*]/g,b).replace(/\*/g,"%2A")}o.encode=_,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=_,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(L,F){var $=o.encode(L+"");return F===void 0&&(F=o.escapeQuerySpace),F?$.replace(/%20/g,"+"):$},o.decodeQuery=function(L,F){L+="",F===void 0&&(F=o.escapeQuerySpace);try{return o.decode(F?L.replace(/\+/g,"%20"):L)}catch{return L}};var E={encode:"encode",decode:"decode"},C,T=function(L,F){return function($){try{return o[F]($+"").replace(o.characters[L][F].expression,function(H){return o.characters[L][F].map[H]})}catch{return $}}};for(C in E)o[C+"PathSegment"]=T("pathname",E[C]),o[C+"UrnPathSegment"]=T("urnpath",E[C]);var D=function(L,F,$){return function(H){var V;$?V=function(de){return o[F](o[$](de))}:V=o[F];for(var J=(H+"").split(L),ee=0,ie=J.length;ee<ie;ee++)J[ee]=V(J[ee]);return J.join(L)}};o.decodePath=D("/","decodePathSegment"),o.decodeUrnPath=D(":","decodeUrnPathSegment"),o.recodePath=D("/","encodePathSegment","decode"),o.recodeUrnPath=D(":","encodeUrnPathSegment","decode"),o.encodeReserved=T("reserved","encode"),o.parse=function(L,F){var $;return F||(F={preventInvalidHostname:o.preventInvalidHostname}),L=L.replace(o.leading_whitespace_expression,""),L=L.replace(o.ascii_tab_whitespace,""),$=L.indexOf("#"),$>-1&&(F.fragment=L.substring($+1)||null,L=L.substring(0,$)),$=L.indexOf("?"),$>-1&&(F.query=L.substring($+1)||null,L=L.substring(0,$)),L=L.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),L=L.replace(/^[/\\]{2,}/i,"//"),L.substring(0,2)==="//"?(F.protocol=null,L=L.substring(2),L=o.parseAuthority(L,F)):($=L.indexOf(":"),$>-1&&(F.protocol=L.substring(0,$)||null,F.protocol&&!F.protocol.match(o.protocol_expression)?F.protocol=void 0:L.substring($+1,$+3).replace(/\\/g,"/")==="//"?(L=L.substring($+3),L=o.parseAuthority(L,F)):(L=L.substring($+1),F.urn=!0))),F.path=L,F},o.parseHost=function(L,F){L||(L=""),L=L.replace(/\\/g,"/");var $=L.indexOf("/"),H,V;if($===-1&&($=L.length),L.charAt(0)==="[")H=L.indexOf("]"),F.hostname=L.substring(1,H)||null,F.port=L.substring(H+2,$)||null,F.port==="/"&&(F.port=null);else{var J=L.indexOf(":"),ee=L.indexOf("/"),ie=L.indexOf(":",J+1);ie!==-1&&(ee===-1||ie<ee)?(F.hostname=L.substring(0,$)||null,F.port=null):(V=L.substring(0,$).split(":"),F.hostname=V[0]||null,F.port=V[1]||null)}return F.hostname&&L.substring($).charAt(0)!=="/"&&($++,L="/"+L),F.preventInvalidHostname&&o.ensureValidHostname(F.hostname,F.protocol),F.port&&o.ensureValidPort(F.port),L.substring($)||"/"},o.parseAuthority=function(L,F){return L=o.parseUserinfo(L,F),o.parseHost(L,F)},o.parseUserinfo=function(L,F){var $=L,H=L.indexOf("\\");H!==-1&&(L=L.replace(/\\/g,"/"));var V=L.indexOf("/"),J=L.lastIndexOf("@",V>-1?V:L.length-1),ee;return J>-1&&(V===-1||J<V)?(ee=L.substring(0,J).split(":"),F.username=ee[0]?o.decode(ee[0]):null,ee.shift(),F.password=ee[0]?o.decode(ee.join(":")):null,L=$.substring(J+1)):(F.username=null,F.password=null),L},o.parseQuery=function(L,F){if(!L)return{};if(L=L.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!L)return{};for(var $={},H=L.split("&"),V=H.length,J,ee,ie,de=0;de<V;de++)J=H[de].split("="),ee=o.decodeQuery(J.shift(),F),ie=J.length?o.decodeQuery(J.join("="),F):null,ee!=="__proto__"&&(u.call($,ee)?((typeof $[ee]=="string"||$[ee]===null)&&($[ee]=[$[ee]]),$[ee].push(ie)):$[ee]=ie);return $},o.build=function(L){var F="",$=!1;return L.protocol&&(F+=L.protocol+":"),!L.urn&&(F||L.hostname)&&(F+="//",$=!0),F+=o.buildAuthority(L)||"",typeof L.path=="string"&&(L.path.charAt(0)!=="/"&&$&&(F+="/"),F+=L.path),typeof L.query=="string"&&L.query&&(F+="?"+L.query),typeof L.fragment=="string"&&L.fragment&&(F+="#"+L.fragment),F},o.buildHost=function(L){var F="";if(L.hostname)o.ip6_expression.test(L.hostname)?F+="["+L.hostname+"]":F+=L.hostname;else return"";return L.port&&(F+=":"+L.port),F},o.buildAuthority=function(L){return o.buildUserinfo(L)+o.buildHost(L)},o.buildUserinfo=function(L){var F="";return L.username&&(F+=o.encode(L.username)),L.password&&(F+=":"+o.encode(L.password)),F&&(F+="@"),F},o.buildQuery=function(L,F,$){var H="",V,J,ee,ie;for(J in L)if(J!=="__proto__"&&u.call(L,J))if(d(L[J]))for(V={},ee=0,ie=L[J].length;ee<ie;ee++)L[J][ee]!==void 0&&V[L[J][ee]+""]===void 0&&(H+="&"+o.buildQueryParameter(J,L[J][ee],$),F!==!0&&(V[L[J][ee]+""]=!0));else L[J]!==void 0&&(H+="&"+o.buildQueryParameter(J,L[J],$));return H.substring(1)},o.buildQueryParameter=function(L,F,$){return o.encodeQuery(L,$)+(F!==null?"="+o.encodeQuery(F,$):"")},o.addQuery=function(L,F,$){if(typeof F=="object")for(var H in F)u.call(F,H)&&o.addQuery(L,H,F[H]);else if(typeof F=="string"){if(L[F]===void 0){L[F]=$;return}else typeof L[F]=="string"&&(L[F]=[L[F]]);d($)||($=[$]),L[F]=(L[F]||[]).concat($)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(L,F,$){if(typeof F=="object")for(var H in F)u.call(F,H)&&o.setQuery(L,H,F[H]);else if(typeof F=="string")L[F]=$===void 0?null:$;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(L,F,$){var H,V,J;if(d(F))for(H=0,V=F.length;H<V;H++)L[F[H]]=void 0;else if(h(F)==="RegExp")for(J in L)F.test(J)&&(L[J]=void 0);else if(typeof F=="object")for(J in F)u.call(F,J)&&o.removeQuery(L,J,F[J]);else if(typeof F=="string")$!==void 0?h($)==="RegExp"?!d(L[F])&&$.test(L[F])?L[F]=void 0:L[F]=p(L[F],$):L[F]===String($)&&(!d($)||$.length===1)?L[F]=void 0:d(L[F])&&(L[F]=p(L[F],$)):L[F]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(L,F,$,H){switch(h(F)){case"String":break;case"RegExp":for(var V in L)if(u.call(L,V)&&F.test(V)&&($===void 0||o.hasQuery(L,V,$)))return!0;return!1;case"Object":for(var J in F)if(u.call(F,J)&&!o.hasQuery(L,J,F[J]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(h($)){case"Undefined":return F in L;case"Boolean":var ee=!!(d(L[F])?L[F].length:L[F]);return $===ee;case"Function":return!!$(L[F],F,L);case"Array":if(!d(L[F]))return!1;var ie=H?m:g;return ie(L[F],$);case"RegExp":return d(L[F])?H?m(L[F],$):!1:!!(L[F]&&L[F].match($));case"Number":$=String($);case"String":return d(L[F])?H?m(L[F],$):!1:L[F]===$;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var L=[],F=[],$=0,H=0;H<arguments.length;H++){var V=new o(arguments[H]);L.push(V);for(var J=V.segment(),ee=0;ee<J.length;ee++)typeof J[ee]=="string"&&F.push(J[ee]),J[ee]&&$++}if(!F.length||!$)return new o("");var ie=new o("").segment(F);return(L[0].path()===""||L[0].path().slice(0,1)==="/")&&ie.path("/"+ie.path()),ie.normalize()},o.commonPath=function(L,F){var $=Math.min(L.length,F.length),H;for(H=0;H<$;H++)if(L.charAt(H)!==F.charAt(H)){H--;break}return H<1?L.charAt(0)===F.charAt(0)&&L.charAt(0)==="/"?"/":"":((L.charAt(H)!=="/"||F.charAt(H)!=="/")&&(H=L.substring(0,H).lastIndexOf("/")),L.substring(0,H+1))},o.withinString=function(L,F,$){$||($={});var H=$.start||o.findUri.start,V=$.end||o.findUri.end,J=$.trim||o.findUri.trim,ee=$.parens||o.findUri.parens,ie=/[a-z0-9-]=["']?$/i;for(H.lastIndex=0;;){var de=H.exec(L);if(!de)break;var te=de.index;if($.ignoreHtml){var z=L.slice(Math.max(te-3,0),te);if(z&&ie.test(z))continue}for(var ne=te+L.slice(te).search(V),ve=L.slice(te,ne),$e=-1;;){var Xe=ee.exec(ve);if(!Xe)break;var ot=Xe.index+Xe[0].length;$e=Math.max($e,ot)}if($e>-1?ve=ve.slice(0,$e)+ve.slice($e).replace(J,""):ve=ve.replace(J,""),!(ve.length<=de[0].length)&&!($.ignore&&$.ignore.test(ve))){ne=te+ve.length;var Be=F(ve,te,ne,L);if(Be===void 0){H.lastIndex=ne;continue}Be=String(Be),L=L.slice(0,te)+Be+L.slice(ne),H.lastIndex=te+Be.length}}return H.lastIndex=0,L},o.ensureValidHostname=function(L,F){var $=!!L,H=!!F,V=!1;if(H&&(V=m(o.hostProtocols,F)),V&&!$)throw new TypeError("Hostname cannot be empty, if protocol is "+F);if(L&&L.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(L).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(L){if(L){var F=Number(L);if(!(a(F)&&F>0&&F<65536))throw new TypeError('Port "'+L+'" is not a valid port')}},o.noConflict=function(L){if(L){var F={URI:this.noConflict()};return n.URITemplate&&typeof n.URITemplate.noConflict=="function"&&(F.URITemplate=n.URITemplate.noConflict()),n.IPv6&&typeof n.IPv6.noConflict=="function"&&(F.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&typeof n.SecondLevelDomains.noConflict=="function"&&(F.SecondLevelDomains=n.SecondLevelDomains.noConflict()),F}else n.URI===this&&(n.URI=s);return this},l.build=function(L){return L===!0?this._deferred_build=!0:(L===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new o(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function M(L){return function(F,$){return F===void 0?this._parts[L]||"":(this._parts[L]=F||null,this.build(!$),this)}}function A(L,F){return function($,H){return $===void 0?this._parts[L]||"":($!==null&&($=$+"",$.charAt(0)===F&&($=$.substring(1))),this._parts[L]=$,this.build(!H),this)}}l.protocol=M("protocol"),l.username=M("username"),l.password=M("password"),l.hostname=M("hostname"),l.port=M("port"),l.query=A("query","?"),l.fragment=A("fragment","#"),l.search=function(L,F){var $=this.query(L,F);return typeof $=="string"&&$.length?"?"+$:$},l.hash=function(L,F){var $=this.fragment(L,F);return typeof $=="string"&&$.length?"#"+$:$},l.pathname=function(L,F){if(L===void 0||L===!0){var $=this._parts.path||(this._parts.hostname?"/":"");return L?(this._parts.urn?o.decodeUrnPath:o.decodePath)($):$}else return this._parts.urn?this._parts.path=L?o.recodeUrnPath(L):"":this._parts.path=L?o.recodePath(L):"/",this.build(!F),this},l.path=l.pathname,l.href=function(L,F){var $;if(L===void 0)return this.toString();this._string="",this._parts=o._parts();var H=L instanceof o,V=typeof L=="object"&&(L.hostname||L.path||L.pathname);if(L.nodeName){var J=o.getDomAttribute(L);L=L[J]||"",V=!1}if(!H&&V&&L.pathname!==void 0&&(L=L.toString()),typeof L=="string"||L instanceof String)this._parts=o.parse(String(L),this._parts);else if(H||V){var ee=H?L._parts:L;for($ in ee)$!=="query"&&u.call(this._parts,$)&&(this._parts[$]=ee[$]);ee.query&&this.query(ee.query,!1)}else throw new TypeError("invalid input");return this.build(!F),this},l.is=function(L){var F=!1,$=!1,H=!1,V=!1,J=!1,ee=!1,ie=!1,de=!this._parts.urn;switch(this._parts.hostname&&(de=!1,$=o.ip4_expression.test(this._parts.hostname),H=o.ip6_expression.test(this._parts.hostname),F=$||H,V=!F,J=V&&r&&r.has(this._parts.hostname),ee=V&&o.idn_expression.test(this._parts.hostname),ie=V&&o.punycode_expression.test(this._parts.hostname)),L.toLowerCase()){case"relative":return de;case"absolute":return!de;case"domain":case"name":return V;case"sld":return J;case"ip":return F;case"ip4":case"ipv4":case"inet4":return $;case"ip6":case"ipv6":case"inet6":return H;case"idn":return ee;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return ie}return null};var I=l.protocol,P=l.port,U=l.hostname;l.protocol=function(L,F){if(L&&(L=L.replace(/:(\/\/)?$/,""),!L.match(o.protocol_expression)))throw new TypeError('Protocol "'+L+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return I.call(this,L,F)},l.scheme=l.protocol,l.port=function(L,F){return this._parts.urn?L===void 0?"":this:(L!==void 0&&(L===0&&(L=null),L&&(L+="",L.charAt(0)===":"&&(L=L.substring(1)),o.ensureValidPort(L))),P.call(this,L,F))},l.hostname=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L!==void 0){var $={preventInvalidHostname:this._parts.preventInvalidHostname},H=o.parseHost(L,$);if(H!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');L=$.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(L,this._parts.protocol)}return U.call(this,L,F)},l.origin=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var $=this.protocol(),H=this.authority();return H?($?$+"://":"")+this.authority():""}else{var V=o(L);return this.protocol(V.protocol()).authority(V.authority()).build(!F),this}},l.host=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var $=o.parseHost(L,this._parts);if($!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!F),this},l.authority=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var $=o.parseAuthority(L,this._parts);if($!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!F),this},l.userinfo=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var $=o.buildUserinfo(this._parts);return $&&$.substring(0,$.length-1)}else return L[L.length-1]!=="@"&&(L+="@"),o.parseUserinfo(L,this._parts),this.build(!F),this},l.resource=function(L,F){var $;return L===void 0?this.path()+this.search()+this.hash():($=o.parse(L),this._parts.path=$.path,this._parts.query=$.query,this._parts.fragment=$.fragment,this.build(!F),this)},l.subdomain=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var $=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,$)||""}else{var H=this._parts.hostname.length-this.domain().length,V=this._parts.hostname.substring(0,H),J=new RegExp("^"+c(V));if(L&&L.charAt(L.length-1)!=="."&&(L+="."),L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return L&&o.ensureValidHostname(L,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(J,L),this.build(!F),this}},l.domain=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&(F=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var $=this._parts.hostname.match(/\./g);if($&&$.length<2)return this._parts.hostname;var H=this._parts.hostname.length-this.tld(F).length-1;return H=this._parts.hostname.lastIndexOf(".",H-1)+1,this._parts.hostname.substring(H)||""}else{if(!L)throw new TypeError("cannot set domain empty");if(L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(L,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=L;else{var V=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(V,L)}return this.build(!F),this}},l.tld=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&(F=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var $=this._parts.hostname.lastIndexOf("."),H=this._parts.hostname.substring($+1);return F!==!0&&r&&r.list[H.toLowerCase()]&&r.get(this._parts.hostname)||H}else{var V;if(L)if(L.match(/[^a-zA-Z0-9-]/))if(r&&r.is(L))V=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(V,L);else throw new TypeError('TLD "'+L+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");V=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(V,L)}else throw new TypeError("cannot set TLD empty");return this.build(!F),this}},l.directory=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var $=this._parts.path.length-this.filename().length-1,H=this._parts.path.substring(0,$)||(this._parts.hostname?"/":"");return L?o.decodePath(H):H}else{var V=this._parts.path.length-this.filename().length,J=this._parts.path.substring(0,V),ee=new RegExp("^"+c(J));return this.is("relative")||(L||(L="/"),L.charAt(0)!=="/"&&(L="/"+L)),L&&L.charAt(L.length-1)!=="/"&&(L+="/"),L=o.recodePath(L),this._parts.path=this._parts.path.replace(ee,L),this.build(!F),this}},l.filename=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(typeof L!="string"){if(!this._parts.path||this._parts.path==="/")return"";var $=this._parts.path.lastIndexOf("/"),H=this._parts.path.substring($+1);return L?o.decodePathSegment(H):H}else{var V=!1;L.charAt(0)==="/"&&(L=L.substring(1)),L.match(/\.?\//)&&(V=!0);var J=new RegExp(c(this.filename())+"$");return L=o.recodePath(L),this._parts.path=this._parts.path.replace(J,L),V?this.normalizePath(F):this.build(!F),this}},l.suffix=function(L,F){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path||this._parts.path==="/")return"";var $=this.filename(),H=$.lastIndexOf("."),V,J;return H===-1?"":(V=$.substring(H+1),J=/^[a-z0-9%]+$/i.test(V)?V:"",L?o.decodePathSegment(J):J)}else{L.charAt(0)==="."&&(L=L.substring(1));var ee=this.suffix(),ie;if(ee)L?ie=new RegExp(c(ee)+"$"):ie=new RegExp(c("."+ee)+"$");else{if(!L)return this;this._parts.path+="."+o.recodePath(L)}return ie&&(L=o.recodePath(L),this._parts.path=this._parts.path.replace(ie,L)),this.build(!F),this}},l.segment=function(L,F,$){var H=this._parts.urn?":":"/",V=this.path(),J=V.substring(0,1)==="/",ee=V.split(H);if(L!==void 0&&typeof L!="number"&&($=F,F=L,L=void 0),L!==void 0&&typeof L!="number")throw new Error('Bad segment "'+L+'", must be 0-based integer');if(J&&ee.shift(),L<0&&(L=Math.max(ee.length+L,0)),F===void 0)return L===void 0?ee:ee[L];if(L===null||ee[L]===void 0)if(d(F)){ee=[];for(var ie=0,de=F.length;ie<de;ie++)!F[ie].length&&(!ee.length||!ee[ee.length-1].length)||(ee.length&&!ee[ee.length-1].length&&ee.pop(),ee.push(v(F[ie])))}else(F||typeof F=="string")&&(F=v(F),ee[ee.length-1]===""?ee[ee.length-1]=F:ee.push(F));else F?ee[L]=v(F):ee.splice(L,1);return J&&ee.unshift(""),this.path(ee.join(H),$)},l.segmentCoded=function(L,F,$){var H,V,J;if(typeof L!="number"&&($=F,F=L,L=void 0),F===void 0){if(H=this.segment(L,F,$),!d(H))H=H!==void 0?o.decode(H):void 0;else for(V=0,J=H.length;V<J;V++)H[V]=o.decode(H[V]);return H}if(!d(F))F=typeof F=="string"||F instanceof String?o.encode(F):F;else for(V=0,J=F.length;V<J;V++)F[V]=o.encode(F[V]);return this.segment(L,F,$)};var K=l.query;return l.query=function(L,F){if(L===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="function"){var $=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),H=L.call(this,$);return this._parts.query=o.buildQuery(H||$,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!F),this}else return L!==void 0&&typeof L!="string"?(this._parts.query=o.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!F),this):K.call(this,L,F)},l.setQuery=function(L,F,$){var H=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="string"||L instanceof String)H[L]=F!==void 0?F:null;else if(typeof L=="object")for(var V in L)u.call(L,V)&&(H[V]=L[V]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(H,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&($=F),this.build(!$),this},l.addQuery=function(L,F,$){var H=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(H,L,F===void 0?null:F),this._parts.query=o.buildQuery(H,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&($=F),this.build(!$),this},l.removeQuery=function(L,F,$){var H=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(H,L,F),this._parts.query=o.buildQuery(H,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&($=F),this.build(!$),this},l.hasQuery=function(L,F,$){var H=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(H,L,F,$)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(L){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!L)),this},l.normalizeHostname=function(L){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!L)),this},l.normalizePort=function(L){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!L)),this},l.normalizePath=function(L){var F=this._parts.path;if(!F)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!L),this;if(this._parts.path==="/")return this;F=o.recodePath(F);var $,H="",V,J;for(F.charAt(0)!=="/"&&($=!0,F="/"+F),(F.slice(-3)==="/.."||F.slice(-2)==="/.")&&(F+="/"),F=F.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),$&&(H=F.substring(1).match(/^(\.\.\/)+/)||"",H&&(H=H[0]));V=F.search(/\/\.\.(\/|$)/),V!==-1;){if(V===0){F=F.substring(3);continue}J=F.substring(0,V).lastIndexOf("/"),J===-1&&(J=V),F=F.substring(0,J)+F.substring(V+3)}return $&&this.is("relative")&&(F=H+F.substring(1)),this._parts.path=F,this.build(!L),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(L){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!L)),this},l.normalizeFragment=function(L){return this._parts.fragment||(this._parts.fragment=null,this.build(!L)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var L=o.encode,F=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=L,o.decode=F}return this},l.unicode=function(){var L=o.encode,F=o.decode;o.encode=_,o.decode=unescape;try{this.normalize()}finally{o.encode=L,o.decode=F}return this},l.readable=function(){var L=this.clone();L.username("").password("").normalize();var F="";if(L._parts.protocol&&(F+=L._parts.protocol+"://"),L._parts.hostname&&(L.is("punycode")&&e?(F+=e.toUnicode(L._parts.hostname),L._parts.port&&(F+=":"+L._parts.port)):F+=L.host()),L._parts.hostname&&L._parts.path&&L._parts.path.charAt(0)!=="/"&&(F+="/"),F+=L.path(!0),L._parts.query){for(var $="",H=0,V=L._parts.query.split("&"),J=V.length;H<J;H++){var ee=(V[H]||"").split("=");$+="&"+o.decodeQuery(ee[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),ee[1]!==void 0&&($+="="+o.decodeQuery(ee[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}F+="?"+$.substring(1)}return F+=o.decodeQuery(L.hash(),!0),F},l.absoluteTo=function(L){var F=this.clone(),$=["protocol","username","password","hostname","port"],H,V,J;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L instanceof o||(L=new o(L)),F._parts.protocol||(F._parts.protocol=L._parts.protocol,this._parts.hostname))return F;for(V=0;J=$[V];V++)F._parts[J]=L._parts[J];return F._parts.path?(F._parts.path.substring(-2)===".."&&(F._parts.path+="/"),F.path().charAt(0)!=="/"&&(H=L.directory(),H=H||(L.path().indexOf("/")===0?"/":""),F._parts.path=(H?H+"/":"")+F._parts.path,F.normalizePath())):(F._parts.path=L._parts.path,F._parts.query||(F._parts.query=L._parts.query)),F.build(),F},l.relativeTo=function(L){var F=this.clone().normalize(),$,H,V,J,ee;if(F._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L=new o(L).normalize(),$=F._parts,H=L._parts,J=F.path(),ee=L.path(),J.charAt(0)!=="/")throw new Error("URI is already relative");if(ee.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if($.protocol===H.protocol&&($.protocol=null),$.username!==H.username||$.password!==H.password||$.protocol!==null||$.username!==null||$.password!==null)return F.build();if($.hostname===H.hostname&&$.port===H.port)$.hostname=null,$.port=null;else return F.build();if(J===ee)return $.path="",F.build();if(V=o.commonPath(J,ee),!V)return F.build();var ie=H.path.substring(V.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return $.path=ie+$.path.substring(V.length)||"./",F.build()},l.equals=function(L){var F=this.clone(),$=new o(L),H={},V={},J={},ee,ie,de;if(F.normalize(),$.normalize(),F.toString()===$.toString())return!0;if(ee=F.query(),ie=$.query(),F.query(""),$.query(""),F.toString()!==$.toString()||ee.length!==ie.length)return!1;H=o.parseQuery(ee,this._parts.escapeQuerySpace),V=o.parseQuery(ie,this._parts.escapeQuerySpace);for(de in H)if(u.call(H,de)){if(d(H[de])){if(!g(H[de],V[de]))return!1}else if(H[de]!==V[de])return!1;J[de]=!0}for(de in V)if(u.call(V,de)&&!J[de])return!1;return!0},l.preventInvalidHostname=function(L){return this._parts.preventInvalidHostname=!!L,this},l.duplicateQueryParameters=function(L){return this._parts.duplicateQueryParameters=!!L,this},l.escapeQuerySpace=function(L){return this._parts.escapeQuerySpace=!!L,this},o})})(CSe);var cht=CSe.exports;const OL=$o(cht),Wme=["http","https"];function hht(i){return typeof i=="string"&&i.startsWith("/vsi")&&!i.startsWith("/vsicurl/")}function dht(i,e,t=!0){return fht(i,e,!1,t)}function fht(i,e=null,t=!1,r=!0){typeof i=="string"&&i.startsWith("/vsicurl/")&&(i=i.replace(/^\/vsicurl\//,""));let n=OL(i);if(e&&n.is("relative")&&!hht(i)){let s=OL(e),o=s.path();!o.endsWith("/")&&!o.endsWith(".json")&&s.path(o+"/"),n=n.absoluteTo(s)}return n.normalize(),t&&(n.query(""),n.fragment("")),r?n.toString():n}const pht="application/geo+json",mht=["application/json",pht,"text/json"],Yme=["image/gif","image/jpeg","image/apng","image/png","image/webp"],TSe=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],ASe=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(TSe);function RP(i,e,t=!1){return Array.isArray(e)||(e=[e]),t&&typeof i>"u"?!0:typeof i!="string"?!1:(e=e.map(r=>r.toLowerCase()),e.includes(i.toLowerCase()))}function ght(i,e=!1){return RP(i,mht,e)}class kSe extends PA{constructor(e,t=null,r={},n=[]){super(e,r,["_context"].concat(n)),this._context||(this._context=t)}getAbsoluteUrl(e=!0){return this._context?dht(this.href,this._context.getAbsoluteUrl(),e):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(e=!1){if(typeof this.href!="string")return!1;if(!e&&typeof this.type>"u")return!1;let t=new OL(this.href),r=t.protocol().toLowerCase(),n=t.suffix().toLowerCase();return Qa(r)&&!Wme.includes(r)?!1:Qa(this.type)&&Yme.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&Qa(n)&&(n==="jpg"||Yme.includes("image/"+n)))}isType(e){return Qa(this.type)&&RP(this.type,e)}isGeoTIFF(){return this.isType(ASe)}isCOG(){return this.isType(TSe)}isHTTP(){let t=this.getAbsoluteUrl(!1).protocol().toLowerCase();return Qa(t)&&Wme.includes(t)}}class IP extends kSe{constructor(e,t=null){super(e,t)}isLink(){return!0}getObjectType(){return"Link"}static fromLinks(e,t=null){return Array.isArray(e)?e.map(r=>qa(r)?new IP(r,t):r):[]}}class DSe extends PA{constructor(e,t=null,r={},n=[]){if(super(e,Object.assign({links:IP.fromLinks},r),["_url"].concat(n)),!this._url&&(this._url=t,!this._url)){let s=this.getSelfLink();s&&(this._url=s.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(e){this._url=e}getStacLinksWithRel(e,t=!0){return this.getLinksWithRels([e]).filter(r=>ght(r.type,t))}getStacLinkWithRel(e,t=!0){const r=this.getStacLinksWithRel(e,t);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(e=>qa(e)&&Qa(e.href)):[]}getLinkWithRel(e){return this.getLinks().find(t=>t.rel===e)||null}getLinksWithRels(e){return this.getLinks().filter(t=>e.includes(t.rel))}getLinksWithOtherRels(e){return this.getLinks().filter(t=>!e.includes(t.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class MSe extends DSe{constructor(e,t=null,r={},n=[]){super(e,t,r,n)}getAll(){return[]}}class Bf extends kSe{constructor(e,t=null,r=null){super(e,r,{},["_key"]),this._key||(this._key=t)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(e=!0){return this.isDefinition()?null:super.getAbsoluteUrl(e)}getKey(){return this._key}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context)return this._context.getMetadata(e)}getBands(){return SSe(this["eo:bands"],this["raster:bands"])}findVisualBands(){let e={red:null,green:null,blue:null},t=this.getBands();for(let n in t){let s=parseInt(n,10),o=t[s];qa(o)&&Qa(o.common_name)&&o.common_name in e&&(e[o.common_name]={index:s,band:o})}return Object.values(e).every(n=>n!==null)?e:null}findBand(e,t="name",r=null){Array.isArray(e)||(e=[e]),qa(r)||(r=this.getBands());let n=r.findIndex(s=>qa(s)&&e.includes(s[t]));return n>=0?{index:n,band:r[n]}:null}getBand(e){return qa(e)||e===null?e:this.getBands()[e]||null}getMinMaxValues(e=null){e=this.getBand(e);const t={minimum:null,maximum:null},r=a=>a.minimum!==null&&a.maximum!==null;if(e&&(qa(e.statistics)&&(typeof e.statistics.minimum=="number"&&(t.minimum=e.statistics.minimum),typeof e.statistics.maximum=="number"&&(t.maximum=e.statistics.maximum),r(t))||qa(e.histogram)&&(typeof e.histogram.min=="number"&&(t.minimum=e.histogram.min),typeof e.histogram.max=="number"&&(t.maximum=e.histogram.max),r(t))))return t;let n=this.getMetadata("classification:classes");if(Array.isArray(n)&&(n.reduce((a,l)=>(a.minimum=Math.min(a.minimum,l.value),a.maximum=Math.max(a.maximum,l.value),a),t),r(t)))return t;let s=this.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((a,l)=>(a.minimum=Math.min(a.minimum,...l.values),a.maximum=Math.max(a.maximum,...l.values),a),t),r(t)))return t;let o=qa(e)&&e.data_type||this.getMetadata("file:data_type");return o&&(t.minimum=sht(o),t.maximum=oht(o)),t}getNoDataValues(e=null){e=this.getBand(e);let t=[];if(e&&typeof e.nodata<"u")t.push(e.nodata);else{let r=this.getMetadata("file:nodata");if(typeof r<"u")t=r;else{let n=this.getMetadata("classification:classes");Array.isArray(n)&&(t=n.filter(s=>!!s.nodata).map(s=>s.value))}}return t.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}isDefinition(){return!Qa(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}hasRole(e,t=!1){return Array.isArray(e)||(e=[e]),t&&e.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>e.includes(r))}static fromAssets(e,t=null){let r={};if(qa(e))for(let n in e)r[n]=new Bf(e[n],n,t);return r}}class Rw extends DSe{constructor(e,t=null,r={},n=[]){super(e,t,r,n)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(e=!0){return this.getLinksWithRels(["icon"]).filter(t=>t.canBrowserDisplayImage(e))}getThumbnails(e=!0,t=null){let r=this.getAssetsWithRoles(["thumbnail","overview"],!0);if(r.length===0&&(r=this.getLinksWithRels(["preview"])),e&&(r=r.filter(n=>n.canBrowserDisplayImage())),t&&r.length>1){let n=s=>Array.isArray(s.roles)&&s.roles.includes(t)||s.getKey()===t;r=r.filter(n).concat(r.filter(s=>!n(s)))}return r}getDefaultGeoTIFF(e=!0,t=!1){var n;return(n=this.rankGeoTIFFs(e,t)[0])==null?void 0:n.asset}rankGeoTIFFs(e=!0,t=!1,r=null,n=null){qa(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let s=[],o=this.getAssetsByTypes(ASe);e&&(o=o.filter(l=>l.isHTTP()&&(!t||l.isCOG())));let a=Object.entries(r);for(let l of o){let u=0;if(a.length>0){let c=a.filter(([h])=>l.hasRole(h,!0)).map(([,h])=>h);c.length>0&&(u+=Math.max(...c))}!t&&l.isCOG()&&(u+=2),l.findVisualBands()&&(u+=1),typeof n=="function"&&(u+=n(l)),s.push({asset:l,score:u})}return s.sort((l,u)=>u.score-l.score),s}findVisualAssets(){let e={red:null,green:null,blue:null},t=Object.keys(e),r=this.getAssets();for(let s of r){let o=s.getBands();if(o.length!==1)continue;let a=s.findBand(t,"common_name",o);a&&(e[a.band.common_name]=s)}return Object.values(e).every(s=>s!==null)?e:null}getAsset(e){return qa(this.assets)&&this.assets[e]||null}getAssets(){return qa(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(e,t=!1){return this.getAssets().filter(r=>r.hasRole(e,t))}getAssetWithRole(e,t=!1){return this.getAssetsWithRoles([e],t)[0]||null}getAssetsByTypes(e){return this.getAssets().filter(t=>RP(t.type,e))}equals(e){return this===e?!0:!(e instanceof Rw)||this.getObjectType()!==e.getObjectType()?!1:!!(this.id&&this.id===e.id)}}class LSe extends Rw{constructor(e,t=null,r={},n=[]){super(e,t,r,n)}getObjectType(){return this.type}getSearchLink(e=null){let t=this.getStacLinksWithRel("search");return e?t[0]||null:t.find(r=>r.method===e||!e&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class yht extends LSe{constructor(e,t=null){super(e,t)}}function l_(i){if(Qa(i)&&i.length>=10)try{let t=i.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6]||0))}catch{return null}return null}function vht(i,e){return new Date(i.valueOf()+(e-i)/2)}function RSe(i){if(!Array.isArray(i)||i.length===0)return null;let e,t;const r=(n,s,o)=>typeof n>"u"?s:n===null||s===null?null:o(n,s);return i.forEach(([n,s])=>{e=r(e,n,Math.min),t=r(t,s,Math.max)}),[e===null?null:new Date(e),t===null?null:new Date(t)]}class ISe extends LSe{constructor(e,t=null){const r={assets:Bf.fromAssets,item_assets:Bf.fromAssets};super(e,t,r)}toGeoJSON(){let e=xSe(this.getBoundingBoxes());return e&&(e.id=this.id),e}getBoundingBox(){let e=this.getRawBoundingBoxes();return e.length>0&&Vu(e[0])?e[0]:null}getBoundingBoxes(){let e=this.getRawBoundingBoxes();return e.length===1&&Vu(e[0])?e:e.length>1?e.filter((t,r)=>r>0&&Vu(t)):[]}getRawBoundingBoxes(){var t,r;let e=(r=(t=this.extent)==null?void 0:t.spatial)==null?void 0:r.bbox;return Array.isArray(e)&&e.length>0?e:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var t,r;let e=(r=(t=this.extent)==null?void 0:t.temporal)==null?void 0:r.interval;return Array.isArray(e)&&e.length>0?e.filter(n=>Array.isArray(n)&&(Qa(n[0])||Qa(n[1]))).map(n=>n.map(s=>l_(s))):[]}getSummary(e){return this.summaries[e]}getBands(){let e=this.getSummary("eo:bands"),t=this.getSummary("raster:bands"),r=[e,t].filter(n=>Array.isArray(n));return r.length>=2?SSe(...r):r.length===1?r[0]:[]}}class bht extends MSe{constructor(e,t=null){const r={collections:n=>n.map(s=>new ISe(s))};super(e,t,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(t=>t.toGeoJSON()).filter(t=>t!==null)}}getBoundingBox(){return ESe(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(e=>e.getBoundingBox())}getTemporalExtent(){return RSe(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(e=>e.getTemporalExtent())}}class OSe extends Rw{constructor(e,t=null){super(e,t,{assets:Bf.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Vu(this.bbox)?this.bbox:null}getBoundingBoxes(){return Vu(this.bbox)?[this.bbox]:[]}getDateTime(){let e=l_(this.properties.datetime);if(!e){let t=l_(this.properties.start_datetime),r=l_(this.properties.end_datetime);return t&&r?vht(t,r):t||r}return e}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=[];return Qa(this.properties.start_datetime)||Qa(this.properties.end_datetime)?e=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:Qa(this.properties.datetime)&&(e=[[this.properties.datetime,this.properties.datetime]]),e.map(t=>t.map(r=>l_(r)))}getMetadata(e){return this.properties[e]}getBands(){let e=this.getMetadata("eo:bands");return Array.isArray(e)?e:[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class _ht extends MSe{constructor(e,t=null){const r={features:n=>n.map(s=>new OSe(s))};super(e,t,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return ESe(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(e=>e.getBoundingBox())}getTemporalExtent(){return RSe(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(e=>e.getTemporalExtent())}}function xht(i,e=!0,t=!1){return e&&(i=rht.stac(i,t)),i.type==="Feature"?new OSe(i):i.type==="FeatureCollection"?new _ht(i):i.type==="Collection"||!i.type&&typeof i.extent<"u"&&typeof i.license<"u"?new ISe(i):!i.type&&Array.isArray(i.collections)?new bht(i):new yht(i)}class Xme extends rP{constructor(t){super({...t,state:"loading"});We(this,"loadImage",t=>new Promise((r,n)=>{const s=new Image;s.addEventListener("load",()=>r(s)),s.addEventListener("error",()=>n(new Error("load failed"))),s.src=t}));const r=new AP(t.url);r.getHeader().then(n=>{this.tileGrid.minZoom=n.minZoom,this.tileGrid.maxZoom=n.maxZoom,this.setLoader(async(s,o,a)=>{const l=await r.getZxy(s,o,a),u=URL.createObjectURL(new Blob([l.data])),c=await this.loadImage(u);return URL.revokeObjectURL(u),c}),this.setState("ready")})}}class wht extends Mw{constructor(t){super({...t,state:"loading",url:"pmtiles://"+t.url+"/{z}/{x}/{y}",format:new SO});We(this,"tileLoadFunction",(t,r)=>{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=r.match(n),o=+s[2],a=+s[3],l=+s[4];t.setLoader((u,c,h)=>{t.setState(tt.LOADING),this.pmtiles_.getZxy(o,a,l).then(d=>{if(d){const p=t.getFormat();t.setFeatures(p.readFeatures(d.data,{extent:u,featureProjection:h})),t.setState(tt.LOADED)}else t.setFeatures([]),t.setState(tt.EMPTY)}).catch(d=>{t.setFeatures([]),t.setState(tt.ERROR)})})});this.pmtiles_=new AP(t.url),this.pmtiles_.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}const Eht=new os({fill:new nl({color:"rgba(255,255,255,0.4)"}),stroke:new la({color:"#3399CC",width:3})}),Sht=new os({stroke:new la({color:"#ff9933",width:1})});function Cht(i,e){const t={url:i.getAbsoluteUrl()};let r=null;i.getBands().length===1&&(r=0);const{minimum:n,maximum:s}=i.getMinMaxValues(r);typeof n=="number"&&(t.min=n),typeof s=="number"&&(t.max=s);const o=i.getNoDataValues(r);return o.length>0&&(t.nodata=o[0]),e.length>0&&(t.bands=e),t}async function Zme(i,e=void 0){let t=e;if(Sut()){const r=i.getMetadata("proj:epsg");if(r)try{t=await Z2e(r)}catch{}}return t}function Kme(i,e){const t=i.clone();return e.hasOnlyBounds()||t.setFill(null),t}function Tht(i){let e=i.href;if(e.includes("{s}"))if(Array.isArray(i["href:servers"])&&i["href:servers"].length>0){const t=Math.random()*i["href:servers"].length|0;e=e.replace("{s}",i["href:servers"][t])}else return null;return e}async function Aht(i){try{const e=new URL(i);e.searchParams.set("service","wmts"),e.searchParams.set("request","GetCapabilities");const t=await fetch(e);return new OO().read(await t.text())}catch{return null}}class OP extends Fl{constructor(e){const t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>t[r]=e[r]),super(t),this.getSourceOptions_=e.getSourceOptions,this.data_,this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||Eht,this.collectionStyle_=e.collectionStyle||Sht,this.boundsLayer_=null,e.data){try{this.configure_(e.data,e.url,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");fetch(e.url).then(r=>r.json()).then(r=>this.configure_(r,e.url,e.assets,e.bands)).catch(r=>this.handleError_(r))}getBoundsLayer(){return this.boundsLayer_}handleError_(e){this.dispatchEvent(new eht(e))}configure_(e,t=null,r=null,n=[]){e instanceof Bf||e instanceof Rw?this.data_=e:this.data_=xht(e),t&&t.includes("://")&&this.data_.setAbsoluteUrl(t),this.bands_=n,this.boundsLayer_=this.addFootprint_();const s=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(Kme(this.boundsStyle_,this))};this.getLayers().on("add",s),this.getLayers().on("remove",s),this.setAssets(r).then(()=>this.dispatchEvent("assetsready")).catch(o=>this.handleError_(o)),this.dispatchEvent("sourceready")}async addApiCollection_(){const e=this.getData().getAll().map(t=>{const r=new OP({data:t,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_});return this.addLayer_(r),r});return await Promise.all(e)}async addStacAssets_(){let e=this.getAssets();if(e===null){e=[];const r=this.getData().getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);if(r)e.push(r);else{const n=this.getData().getThumbnails().filter(s=>!Array.isArray(s.roles)||!s.roles.includes("example"));n.length>0&&e.push(n[0])}}const t=e.map(r=>this.addImagery_(r));return await Promise.all(t)}async addImagery_(e){if(e){if(e.isGeoTIFF())return await this.addGeoTiff_(e);if(e.canBrowserDisplayImage())return await this.addThumbnail_(e)}}async addThumbnail_(e){if(!this.displayPreview_)return;let t={url:e.getAbsoluteUrl(),projection:await Zme(e,"EPSG:4326"),imageExtent:e.getContext().getBoundingBox(),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(t=await this.getSourceOptions_(zn.ImageStatic,t,e));const r=new kA({source:new L2e(t)});return this.addLayer_(r,e),r}async addWebMapLinks_(){const e=this.getWebMapLinks();if(e.length>0)return await this.addLayerForLink(e[0])}async addLayerForLink(e){const t=Tht(e);if(!t)return;const r={attributions:e.getMetadata("attribution")||this.data_.getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},n=async(o,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(o,a,e)),a),s=[];switch(e.rel){case"pmtiles":const a=await new AP(r.url).getHeader();let l;switch(a.tileType){case M0.Mvt:l=new wht(await n(zn.PMTilesVector,r));break;case M0.Avif:case M0.Jpeg:case M0.Png:case M0.Webp:l=new Xme(await n(zn.PMTilesRaster,r));break;default:return}s.push(l);break;case"tilejson":s.push(new H2e(await n(zn.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(const h in e["wms:layers"]){const d=e["wms:layers"][h]||"";let p="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][h]=="string"&&(p=e["wms:styles"][h]);const m=Object.assign({LAYERS:d,STYLES:p},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(m.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(m.FORMAT=e.type);const g=await n(zn.TileWMS,Object.assign({},r,{params:m}));s.push(new wP(g))}break;case"wmts":const u=await Aht(t);if(!u)return;const c=Array.isArray(e["wmts:layer"])?e["wmts:layer"]:[e["wmts:layer"]];for(const h of c){let d=Object.assign({},r,{layer:h});typeof e.type=="string"&&e.type.startsWith("image/")&&(d.format=e.type),d=await n(zn.WMTS,d),s.push(new EP(V2e(u,d)))}break;case"xyz":s.push(new Qf(await n(zn.XYZ,r)));break;default:return}return s.map(o=>{let a;return o instanceof Mw?a=new YO({source:o,declutter:!0}):o instanceof Xme?a=new BC({source:o}):a=new Tx({source:o}),this.addLayer_(a,e),a})}async addGeoTiff_(e){if(!this.displayOverview_)return;if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);let r={sources:[Cht(e,this.bands_)]};const n=await Zme(e);n&&(r.projection=n),this.getSourceOptions_&&(r=await this.getSourceOptions_(zn.GeoTIFF,r,e));const s=async(o,a)=>(a&&this.getLayers().remove(a),await this.addTileLayerForImagery_(o));try{const o=new _P(r),a=new BC({source:o});if(this.useTileLayerAsFallback_){const l=()=>s(e,a);o.on("error",l),o.on("tileloaderror",l),o.on("change",()=>{o.getState()==="error"&&s(e,a)}),a.on("error",l),await o.getView()}return this.addLayer_(a,e),a}catch(o){if(this.useTileLayerAsFallback_)return await s(e,null);this.handleError_(o)}}async addTileLayerForImagery_(e){let t={crossOrigin:this.crossOrigin_,url:this.buildTileUrlTemplate_(e)};this.getSourceOptions_&&(t=await this.getSourceOptions_(zn.XYZ,t,e));const r=new Tx({source:new Qf(t)});return this.addLayer_(r,e),r}addLayer_(e,t,r=0){e.set("stac",t),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null;const t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=xSe(t.getBoundingBox()):e=t.toGeoJSON(),e){const r=new Lv,n=new dp({format:r,loader:(o,a,l)=>{const u=r.readFeatures(e,{featureProjection:l});n.addFeatures(u)}}),s=new hp({source:n,style:Kme(this.boundsStyle_,this),visible:this.displayFootprint_});return s.set("bounds",!0),this.addLayer_(s,t,1),s}return null}async updateLayers_(){const e=this.getLayers();for(let r=e.getLength()-1;r>=0;r--){const s=e.item(r).get("stac");s&&(s.isLink()||s.isAsset())&&e.removeAt(r)}const t=this.getData();t.isItemCollection()||t.isCollectionCollection()?await this.addApiCollection_():(t.isItem()||t.isCollection())&&await this.addStacAssets_(),this.displayWebMapLink_&&(Array.isArray(this.displayWebMapLink_)||this.hasOnlyBounds())&&await this.addWebMapLinks_()}hasOnlyBounds(){const e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){let e=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(e=[this.displayWebMapLink_]);let t=this.data_.getLinksWithRels(e);return Array.isArray(this.displayWebMapLink_)?t=this.displayWebMapLink_.map(r=>{if(typeof r=="string"){const n=t.find(s=>s.id===r);return n||null}return r}).filter(r=>!!r):t.sort((r,n)=>{const s=e.indexOf(r.rel),o=e.indexOf(n.rel);return s-o}),t}async setAssets(e){Array.isArray(e)?this.assets_=e.map(t=>typeof t=="string"?this.getData().getAsset(t):t instanceof Bf?t:new Bf(t)):this.assets_=null,await this.updateLayers_()}getData(){return this.data_}getAssets(){return this.assets_}getExtent(){if(!this.boundsLayer_)return;const e=this.boundsLayer_.getMapInternal();if(!e)return;const t=e.getView();if(!t)return;const r=this.getData();if(!r)return;const n=r.getBoundingBox();if(n)return RI(n,"EPSG:4326",t.getProjection())}}IA(go);window.eoxMapAdvancedOlLayers={...Zst,STAC:OP};class kht extends yu{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,tilePixelRatio:e.tilePixelRatio,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection,wrapX:e.wrapX}),this.version_=e.version!==void 0?e==null?void 0:e.version:"1.0.0",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,fetch(e.url).then(t=>t.text()).then(t=>new window.DOMParser().parseFromString(t,"application/xml")).then(t=>{this.handleCapabilitiesResponse(t,e)})}handleCapabilitiesResponse(e,t){const n=new OO().read(e),s=V2e(n,t);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=Xy(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(e){const t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?hd(e,r):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in r?r[a.toLowerCase()]:o});const n=this.tileGrid,s=this.dimensions_;return function(o){if(!o)return;const a={TileMatrix:n.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(a,s);let l=e;return t=="KVP"?l=hd(l,a):l=l.replace(/\{(\w+?)\}/g,function(u,c){return a[c]}),l}}}window.eoxMapAdvancedOlSources={...cut,WMTSCapabilities:kht};const Dht=(i,e="property")=>i.map(([t,r])=>{var s,o;if(t==="extent"&&((o=(s=r.value)==null?void 0:s.temporal)==null?void 0:o.interval.length)>0){const a=r.value.temporal.interval[0];Array.isArray(a)&&(typeof a[0]=="string"||typeof a[1]=="string")&&(r.formatted=`${new Date(a[0]).toISOString().substring(0,10)} - ${new Date(a[1]).toISOString().substring(0,10)}`)}r.formatted=r.formatted.replaceAll(new RegExp('(?<!href="|src=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),a=>`<a target="_blank" href="${a}">${a}</a>`);const n=a=>Object.entries(a).filter(([l,u])=>{let c=!0;return u.roles&&(c=u.roles.includes("metadata")),u.rel&&(c=u.rel==="example"),c});return(t==="assets"||t==="links"||t==="providers")&&(e==="property"?r.formatted=`<ul>${n(r.value).map(([a,l])=>`<li>
                <a target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}</a
                >
              </li>`).join("")}</ul>`:e==="featured"&&(r.formatted=n(r.value).map(([a,l])=>`<div class="button-container">
                ${l.description?`<div><p>${l.description}</p></div>`:""}
                <a class="button icon-text small block" target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}
                  </a>
              </div>`).join(""))),["providers","assets","links"].includes(t)&&(r.length=n(r.value).length),[t,r]}),Mht=`
:host {
  display: block;
}
`,Lht=`
${sg}

:host {
  --color-primary: #004170;
  --color-primary-lighter: color-mix(in srgb, var(--color-primary), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
header h1 {
  font-size: 24px;
  color: var(--color-primary);
}
header h2 {
  font-size: 22px;
  color: var(--color-primary);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#properties ul {
  padding: 0;
}
section#properties > ul:not(.single-property) {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#properties slot > li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#properties slot:not([name=description]) ul li {
  list-style: none;
}
section#properties .colon {
  margin-right: 4px;
}
section#properties .label {
  font-weight: bold;
}
section#properties ul li,
section#properties ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#properties ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--color-primary);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`;var WD,Jme;function Uv(){if(Jme)return WD;Jme=1;const i={collatorOptions:{},numberFormatterOptions:{maximumFractionDigits:10},dateFormatterOptions:{day:"numeric",month:"numeric",year:"numeric"},dateTimeFormatterOptions:{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC",timeZoneName:"short"}};return WD={locales:[],collator:new Intl.Collator(i.collatorOptions),dateFormatter:new Intl.DateTimeFormat(i.dateFormatterOptions),dateTimeFormatter:new Intl.DateTimeFormat(i.dateTimeFormatterOptions),numberFormatter:new Intl.NumberFormat(i.numberFormatterOptions),translate:null,getDefaults(){return i},setLocales(t,r={},n={},s={},o={}){this.locales=t,o=Object.assign({},i.collatorOptions,o),this.collator=new Intl.Collator(t,o),r=Object.assign({},i.dateFormatterOptions,r),this.dateFormatter=new Intl.DateTimeFormat(t,r),n=Object.assign({},i.dateTimeFormatterOptions,n),this.dateTimeFormatter=new Intl.DateTimeFormat(t,n),s=Object.assign({},i.numberFormatterOptions,s),this.numberFormatter=new Intl.NumberFormat(t,s)},setTranslator(t){this.translate=t},format(t,r=null){if(r)for(let n in r)t=t.replaceAll(`{${n}}`,r[n]);return t}},WD}var YD,Qme;function Iw(){if(Qme)return YD;Qme=1;const i=Uv(),e={e(t){return typeof t!="string"&&(t=String(t)),t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(t,r=null){return typeof i.translate=="function"?i.translate(t,r):i.format(t,r)},toNothing(t=null){return t===null&&(t=e.t("n/a")),`<i class="null">${t}</i>`},toList(t,r=!1,n=null,s=null){let o=s===!0?"ol":"ul";return Array.isArray(t)||(t=[t]),r&&(t=t.slice(0),typeof r=="function"?t.sort(r):t.sort(),s===null&&(o="ol")),typeof n=="function"&&(t=t.map(n)),t.length===0?e.toNothing():t.length===1?t[0]:`<${o}><li>${t.join("</li><li>")}</li></${o}>`},toLink(t,r="",n="",s="_blank"){return r||(t.length>50?r=t.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...o){return o[4]?o[1]+"/[]/"+o[4]:o[1]}):r=t.replace(/^\w+:\/\//i,"")),`<a href="${e.e(t)}" rel="${e.e(n)}" target="${e.e(s)}">${e.e(r)}</a>`},toObject(t,r=null,n=null,s=[],o=null,a=[]){let l="<dl>",u=Array.isArray(s)&&s.length>=2?s:Object.keys(t);for(let c of u){if(!(c in t)||typeof o=="function"&&a.length>0&&!o(a[0],a.concat([c])))continue;let h;typeof n=="function"?h=n(c,t):h=e.formatKey(c,!0);let d=t[c];typeof r=="function"&&(d=r(d,c,t)),l+=`<dt>${h}</dt><dd>${d}</dd>`}return l+="</dl>",l},abbrev(t,r){return`<abbr title="${e.e(r)}">${e.e(t)}</abbr>`},isObject(t){return typeof t=="object"&&t===Object(t)&&!Array.isArray(t)},formatKey(t,r=!1){if(t.includes("/"))return e.e(e.t(t));r===!1&&(t=t.replace(/^[\w-]+:/i,""));let n=t.split(/[:_\-\s]/g).map(s=>s.substr(0,1).toUpperCase()+s.substr(1)).join(" ");return e.e(e.t(n))},hexToUint8(t){if(t.length===0||t.length%2!==0)throw new Error(`The string "${t}" is not valid hex.`);return new Uint8Array(t.match(/.{1,2}/g).map(r=>parseInt(r,16)))},uint8ToHex(t){return t.reduce((r,n)=>r+n.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(t){return t.reduce((r,n)=>Object.keys(n).reduce((s,o)=>(s.indexOf(o)==-1&&s.push(o),s),r),[])},unit(t,r=""){return typeof r=="string"&&r.length>0?(r=e.t(r),`${t}&nbsp;<span class="unit">${r}</unit>`):t}};return YD=e,YD}const C2=Iw(),Rht=Uv(),u_={fields(i){let e=["extensions","metadata","links","assets"];for(let t of e)for(let r in i[t])i[t][r]=u_.field(i[t][r],i[t],i);return i},field(i,e={},t={}){if(typeof i=="string")return{label:i};if(typeof i.alias=="string"){let r=e[i.alias]||t.metadata[i.alias];if(!r)throw new Error("Alias is invalid: "+i.alias);return Object.assign(i,u_.field(r,e,t))}if(C2.isObject(i.items)){let r=[];for(let n in i.items)i.items[n]=u_.field(i.items[n],e,t),r.push(Object.assign({key:n},i.items[n]));i.itemOrder=r.sort((n,s)=>n.id===!0?-1:s.id===!0?1:typeof n.order=="number"&&typeof s.order=="number"?n.order-s.order:Rht.collator.compare(C2.t(n.label),C2.t(s.label))).map(n=>n.key)}if(C2.isObject(i.properties))for(let r in i.properties)i.properties[r]=u_.field(i.properties[r],e,t);return i}};var Iht=u_;const U1=Iht,PSe={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(i){i=U1.fields(i);for(let e in this.fields)Object.assign(this.fields[e],i[e])},getDependency(i){return this.dependencies[i]||console.warn(`Dependency '${i}' not registered.`),this.dependencies[i]},addDependency(i,e){this.dependencies[i]=e},addExtension(i,e){this.fields.extensions[i]=U1.field(e,this.fields.extensions)},addMetadataField(i,e){this.fields.metadata[i]=U1.field(e,this.fields.metadata)},addLinkField(i,e){this.fields.links[i]=U1.field(e,this.fields.links)},addAssetField(i,e){this.fields.assets[i]=U1.field(e,this.fields.assets)},addMetadataFields(i){for(var e in i)PSe.addMetadataField(e,i[e])},getExtension(i){return this.fields.extensions[i]?this.fields.extensions[i]:{}},getSpecification(i,e=null){let t={};return e==="assets"&&this.fields.assets[i]?t=this.fields.assets[i]:e==="links"&&this.fields.links[i]?t=this.fields.links[i]:this.fields.metadata[i]&&(t=this.fields.metadata[i]),t}};var PP=PSe;const Oht={alternate:"Alternative Access Methods",anon:"Anonymized Location",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",product:"Product",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},Pht={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"}},Fht={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},Nht={id:"Identifier",keywords:"Keywords",datetime:{label:"Time of Data",format:"Timestamp",summary:!1},title:{label:"Title",summary:!1},description:{label:"Description",format:"CommonMark",summary:!1},start_datetime:{label:"Time of Data begins",format:"Timestamp",summary:!1},end_datetime:{label:"Time of Data ends",format:"Timestamp",summary:!1},created:{label:"Created",format:"Timestamp",summary:"r"},updated:{label:"Updated",format:"Timestamp",summary:"r"},published:{label:"Published",format:"Timestamp",summary:"r"},expires:{label:"Expires",format:"Timestamp",summary:"r"},unpublished:{label:"Unpublished",format:"Timestamp",summary:"r"},license:{label:"License",format:"License",summary:!1},providers:{label:"Providers",format:"Providers",summary:!1},platform:"Platform",instruments:{label:"Instruments",format:"CSV"},constellation:"Constellation",mission:"Mission",gsd:{label:"GSD",explain:"Ground Sample Distance",unit:"m"},version:{label:"Data Version",summary:!1},deprecated:{label:"Deprecated",summary:!1},experimental:{label:"Experimental",summary:!1},language:{label:"Current Language",ext:"language",summary:"v",properties:{name:{label:"Name"},alternate:{label:"Alternate Name"},code:{label:"Code"},dir:{label:"Direction",explain:"Reading and writing direction",mapping:{ltr:"left-to-right",rtl:"right-to-left"},default:"ltr"}}},languages:{label:"Available Languages",ext:"language",summary:!1,items:{name:{label:"Name",sortable:!0,order:0},alternate:{label:"Alternate Name",sortable:!0,order:1},code:{label:"Code",sortable:!0,order:2},dir:{label:"Direction",explain:"Reading and writing direction",sortable:!0,order:3,mapping:{ltr:"left-to-right",rtl:"right-to-left"},default:"ltr"}}},contacts:{label:"Contacts",ext:"contacts",summary:"v",items:{name:{label:"Name"},identifier:{label:"Identifier"},position:{label:"Position"},organization:{label:"Organization"},logo:{label:"Logo",format:"Image"},phones:{label:"Phone",items:{value:{label:"Number",format:"Phone",order:0},roles:{label:"Used For",order:1,mapping:{work:"Work",home:"Personal",fax:"Fax"}}}},emails:{label:"Email",items:{value:{label:"Address",format:"Email",order:0},roles:{label:"Used For",order:1,mapping:{work:"Work",home:"Personal"}}}},addresses:{label:"Postal Addresses",format:"Address",items:{deliveryPoint:{label:"Street / House",order:0},city:{label:"City",order:1},administrativeArea:{label:"State / Province",order:2},postalCode:{label:"Postal Code",order:3},country:{label:"Country",order:4}}},links:{label:"Additional Resources",format:"Link"},contactInstructions:"Further Instructions",roles:{label:"Types",format:"CSV"}}},themes:{label:"Themes",ext:"themes",summary:!1,items:{scheme:{label:"Vocabulary",order:0,format:"Url"},concepts:{label:"Terms",order:1,format:"Concepts",items:{id:{label:"Identifier",order:0},title:{label:"Title",order:1},description:{label:"Description",order:2},url:{label:"URL",order:3,format:"Url"}}}}},crs:{label:"CRS",format:"CRS",explain:"Coordinate Reference System"},"anon:size":{label:"Uncertainty",unit:"",explain:"The size of one side of the anonymized bounding box"},"anon:warning":{label:"Warning",summary:!1},"classification:classes":{summary:!1,label:"Classes",items:{color_hint:{label:"Color",order:0,format:"HexColor"},value:{label:"Value",sortable:!0,order:1},title:{label:"Title",sortable:!0,order:2},name:{label:"Identifier",sortable:!0,order:3},description:{label:"Description",order:4,format:"CommonMark"},percentage:{label:"Percentage of samples",sortable:!0,order:5,unit:"%"},count:{label:"Number of samples",sortable:!0,order:6},nodata:{label:"No-data value",order:7,default:!1}}},"classification:bitfields":{summary:!1,label:"Bit Mask",items:{name:{label:"Name",sortable:!0,order:0},offset:{label:"Offset",explain:"Offset to the first bit",order:1},length:{label:"Number of bits",order:2},description:{label:"Description",order:3,format:"CommonMark"},classes:{alias:"classification:classes"},roles:{label:"Purpose"}}},"cube:dimensions":{label:"Dimensions",summary:!1,listWithKeys:!0,items:{type:{label:"Type",order:0},axis:{label:"Axis",order:1},description:{label:"Description",format:"CommonMark",order:2},extent:{label:"Extent",format:"Extent",order:3},bbox:{alias:"proj:bbox",order:3},values:{label:"Values",order:4},step:{label:"Step",order:5},unit:{alias:"file:unit",order:5},geometry_types:{label:"Geometry Types",order:5},reference_system:{label:"Reference System",explain:"Coordinate / Temporal / Other Reference System",order:6}}},"cube:variables":{label:"Variables",summary:!1,listWithKeys:!0,items:{dimensions:{label:"Dimensions",order:0},type:{label:"Type",order:1,mapping:{data:"Measured values",auxiliary:"Coordinate data"}},description:{label:"Description",format:"CommonMark",order:2},extent:{label:"Extent",format:"Extent",order:3},values:{label:"Values",order:4},step:{label:"Step",order:5},unit:{alias:"file:unit",order:6}}},"eo:bands":{label:"Spectral Bands",items:{name:{label:"Name",sortable:!0,id:!0,order:0},common_name:{label:"Common Name",sortable:!0,order:1},description:{label:"Description",format:"CommonMark",order:2},center_wavelength:{label:"Wavelength",explain:"The center wavelength of the band",unit:"m",sortable:!0,order:5},full_width_half_max:{label:"FWHM",explain:"Full Width Half Max",unit:"m",sortable:!0,order:6},gsd:{alias:"gsd",sortable:!0,order:3},cloud_cover:{alias:"eo:cloud_cover",sortable:!0,order:4},solar_illumination:{label:"Solar Illumination",sortable:!0,order:7,unit:"W/m/m"},"classification:classes":{alias:"classification:classes"},"classification:bitfields":{alias:"classification:bitfields"}}},"eo:cloud_cover":{label:"Cloud Cover",unit:"%"},"eo:snow_cover":{label:"Snow/Ice Cover",unit:"%"},"forecast:reference_datetime":{label:"Reference Time",format:"Timestamp",summary:"r"},"forecast:horizon":{label:"Forecast Horizon",explain:"The time between the reference time and the forecast time",format:"Duration"},"forecast:duration":{label:"Forecast Length",format:"Duration"},"file:bits_per_sample":"Bits per Sample","file:byte_order":"Byte Order","file:checksum":{label:"Checksum",format:"Checksum",summary:!1},"file:data_type":{label:"Data Type of Values",format:"FileDataType"},"file:header_size":{label:"Header Size",format:"FileSize",summary:!1},"file:nodata":{label:"No-Data Values",format:"CSV",summary:!1},"file:size":{label:"Size",format:"FileSize",summary:!1},"file:unit":"Unit of Values","file:values":{label:"Map of Values",summary:!1,items:{values:{label:"Values",format:"CSV",order:1},summary:{label:"Summary",order:0}}},"file:local_path":{label:"Local Path",summary:!1},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{label:"System Environment",mapping:{OR:"Operational system, real-time data",OT:"Operational system, test data",IR:"Test system, real-time data",IT:"Test system, test data",IP:"Test system, playback data",IS:"Test system, simulated data"}},"goes:image_type":{label:"Area",mapping:{"FULL DISK":"The Americas (full disk)",CONUS:"North America (continental US)",MESOSCALE:"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{label:"Area in Central/South America",mapping:{1:"Region 1",2:"Region 2"}},"goes:mode":{label:"Capture Mode",mapping:{3:"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)",4:"4: 1x full disk (every 5 minutes)",6:"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{label:"Time Threshold in a Group",explain:"Lightning group maximum time difference among lightning events in a group",unit:"s"},"goes:flash_time_threshold":{label:"Time Threshold in a Flash",explain:"Lightning flash maximum time difference among lightning events in a flash",unit:"s"},"goes:lightning_wavelength":{label:"Central Wavelength",unit:"nm"},"goes:yaw_flip_flag":{label:"Yaw Flip Configuration",explain:"Flag indicating that the spacecraft is operating in yaw flip configuration.",mapping:{0:"Upright",1:"Neither",2:"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{label:"Satellite Subpoint Latitude",unit:"N"},"goes:nominal_satellite_subpoint_lon":{label:"Satellite Subpoint Longitude",unit:"E"},"goes:nominal_satellite_height":{label:"Satellite Height",explain:"Nominal satellite height above GRS 80 ellipsoid",unit:"km"},"goes:percent_navigated_L1b_events":{label:"Events navigated by Instrument",format:"Percent0to1",unit:"%"},"goes:percent_uncorrectable_L0_errors":{label:"Data Lost",format:"Percent0to1",unit:"%"},"grid:code":{label:"Grid",format:"GridCode"},"raster:bands":{label:"Bands",items:{nodata:{alias:"file:nodata"},sampling:{label:"Sampling",mapping:{area:"Area",point:"Point (at pixel center)"}},data_type:{alias:"file:data_type"},bits_per_sample:{alias:"file:bits_per_sample"},spatial_resolution:{label:"Resolution",explain:"Average spatial resolution",unit:"m"},statistics:{label:"Statistics",items:{mean:"Average",maximum:{label:"Max.",explain:"Maxmimum value"},minimum:{label:"Min.",explain:"Minimum value"},stdev:{label:"Std. Dev.",explain:"Standard Deviation"},valid_percent:{label:"Valid",explain:"Percentage of valid pixels",unit:"%"}}},unit:{alias:"file:unit"},scale:"Scale",offset:"Offset",histogram:{label:"Histogram",custom:!0},"classification:classes":{alias:"classification:classes"},"classification:bitfields":{alias:"classification:bitfields"}}},"label:properties":{label:"Properties",null:"raster data"},"label:classes":{label:"Classes",items:{name:{label:"Name",null:"raster-formatted",sortable:!0,id:!0},classes:"Classes"}},"label:description":{label:"Description",format:"CommonMark",summary:!1},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{label:"Overviews",summary:!1,items:{property_key:{label:"Property Key",id:!0},counts:{label:"Counts",custom:!0},statistics:{label:"Statistics",custom:!0}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{label:"Pass Number",mapping:{1:"1 (less latency / less gauges)",2:"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{label:"Accumulation Period",unit:"h"},"noaa_mrms_qpe:region":{label:"Region",mapping:{CONUS:"Continental US",HAWAII:"Hawaii",GUAM:"Guam",ALASKA:"Alaska",CARIB:"Caribbean Islands"}},"openeo:status":"Processing Status",api_version:{label:"API Version",ext:"openeo"},backend_version:{label:"Back-End Version",ext:"openeo"},production:{label:"Production-Ready",ext:"openeo"},endpoints:{label:"Supported Endpoints",ext:"openeo",summary:!1,items:{path:{label:"Path Template",order:0},methods:{label:"HTTP Methods",order:1,format:"CSV"}}},billing:{label:"Billing",ext:"openeo",custom:!0,summary:!1},"order:status":{label:"Status",mapping:{orderable:"Orderable (data can be ordered)",ordered:"Ordered (preparing to deliver data)",pending:"Pending (waiting for activation)",shipping:"Shipping (data is getting processed)",succeeded:"Delivered (data is available)",failed:"Failed (unable to deliver)",canceled:"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{label:"Submitted",format:"Timestamp",summary:"r"},"order:expiration_date":{alias:"expires"},"pc:count":{label:"Points",explain:"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{label:"Schemas",summary:!1,items:{name:{label:"Name",sortable:!0,id:!0},size:{label:"Size",unit:"bytes",sortable:!0},type:{label:"Type",sortable:!0}}},"pc:density":"Density","pc:statistics":{label:"Statistics",summary:"s",items:{name:{label:"Name",id:!0},position:"Position",average:"Average",count:"Count",maximum:{label:"Max.",explain:"Maxmimum value"},minimum:{label:"Min.",explain:"Minimum value"},stddev:{label:"Std. Dev.",explain:"Standard Deviation"},variance:"Variance"}},"processing:expression":{label:"Processing Instructions",summary:!1},"processing:lineage":{label:"Lineage",format:"CommonMark",summary:!1},"processing:level":"Level","processing:facility":"Facility","processing:software":{label:"Software",format:"Software",summary:!1},"processing:version":"Processor Version","processing:datetime":{label:"Processing Time",format:"Timestamp",summary:"r"},"product:type":"Product Type","product:timeliness":{label:"Timeliness",format:"Duration"},"product:timeliness_category":"Timeliness Category","proj:epsg":{label:"EPSG Code",format:"EPSG",summary:"v"},"proj:wkt2":{label:"WKT2",explain:"Well-Known Text, version 2",format:"WKT2",summary:!1},"proj:projjson":{label:"PROJJSON",explain:"JSON encoding of WKT2",format:"PROJJSON",summary:!1},"proj:geometry":{label:"Footprint",custom:!0,summary:!1},"proj:bbox":{label:"Bounding Box",custom:!0,summary:!1},"proj:centroid":{label:"Centroid",custom:!0,summary:!1},"proj:shape":{label:"Image Dimensions",format:"Shape",summary:!1},"proj:transform":{label:"Transformation Matrix",format:"Transform",summary:!1},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{label:"Center Frequency",unit:"GHz"},"sar:polarizations":{label:"Polarizations",format:"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{label:"Range Resolution",unit:"m"},"sar:resolution_azimuth":{label:"Azimuth Resolution",unit:"m"},"sar:pixel_spacing_range":{label:"Range Pixel Spacing",unit:"m"},"sar:pixel_spacing_azimuth":{label:"Azimuth Pixel Spacing",unit:"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{label:"ENL",explain:"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{label:"Int. Designator",explain:"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{label:"Abs. Orbit Number",explain:"Absolute Orbit Number"},"sat:relative_orbit":{label:"Rel. Orbit Number",explain:"Relative Orbit Number"},"sat:anx_datetime":{label:"ANX Time",format:"Timestamp",explain:"Ascending Node Crossing time",summary:"r"},"sci:doi":{label:"DOI",format:"DOI"},"sci:citation":"Citation","sci:publications":{label:"Publications",summary:!1,items:{citation:{label:"Publication",sortable:!0,order:0},doi:{label:"DOI",format:"DOI",sortable:!0,order:1}}},"ssys:targets":"Target Body","storage:platform":{label:"Provider",mapping:{ALIBABA:"Alibaba Cloud",AWS:"Amazon AWS",AZURE:"Microsoft Azure",GCP:"Google Cloud Platform",IBM:"IBM Cloud",ORACLE:"Oracle Cloud"}},"storage:region":"Region","storage:requester_pays":"Requester Pays","storage:tier":"Tier Type","table:columns":{label:"Columns",items:{name:{label:"Name",sortable:!0,id:!0,order:0},type:{label:"Data Type",sortable:!0,order:1},description:{label:"Description",format:"CommonMark",order:2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{label:"Tables",summary:!1,listWithKeys:!0,items:{name:{label:"Name",sortable:!0,id:!0,order:0},description:{label:"Description",format:"CommonMark",order:1}}},"tiles:tile_matrix_sets":{label:"Tile Matrix Sets",custom:!0,summary:!1},"tiles:tile_matrix_set_links":{label:"Tile Matrix Set Links",custom:!0,summary:!1},"view:off_nadir":{label:"Off-Nadir Angle",unit:""},"view:incidence_angle":{label:"Incidence Angle",unit:""},"view:azimuth":{label:"Viewing Azimuth",unit:""},"view:sun_azimuth":{label:"Sun Azimuth",unit:""},"view:sun_elevation":{label:"Sun Elevation",unit:""},"pl:black_fill":{label:"Unfilled Image Parts",unit:"%"},"pl:clear_percent":{label:"Clear Sky",unit:"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{label:"Spatial Resolution",unit:"m"},"pl:publishing_stage":{label:"Publishing Stage",mapping:{preview:"Preview",standard:"Standard",finalized:"Finalized"}},"pl:quality_category":{label:"Quality Category",mapping:{standard:"Standard",test:"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{label:"Type",mapping:{image:"Single image",image_collection:"Image collection",table:"Table"}},"gee:cadence":"Cadence","gee:schema":{label:"Variables",items:{name:"Name",description:"Description",type:"Data Type"},summary:!1},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{label:"Terms of Use",format:"CommonMark",summary:!1},"gee:visualizations":{label:"Visualizations",custom:!0,summary:!1},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{label:"WRS Type",explain:"Worldwide Reference System Type"},"landsat:wrs_path":{label:"WRS Path",explain:"Worldwide Reference System Path"},"landsat:wrs_row":{label:"WRS Row",explain:"Worldwide Reference System Row"},"landsat:cloud_cover_land":{label:"Land Cloud Cover",unit:"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{label:"Summary",summary:!1},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{label:"Product ID",summary:"s"},"sentinel:data_coverage":{label:"Data Coverage",unit:"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{label:"Processing Level",explain:"Geolocation precision level",mapping:{L2:"Geolocation using only satellite telemetry",L3:"Control points used to geolocate image, no terrain correction",L4:"Control points used to geolocate image, orthorectified"},summary:"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{label:"Specification",mapping:{SR:"Surface Reflectance (Optical)",ST:"Surface Temperature (Optical)",NRB:"Normalized Radar Backscatter (SAR)",POL:"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{label:"Platform Altitude",unit:"m"},"card4l:incidence_angle_near_range":{label:"Incidence Angle (near)",unit:""},"card4l:incidence_angle_far_range":{label:"Incidence Angle (far)",unit:""},"card4l:noise_equivalent_intensity":{label:"Noise Equivalent Intensity",unit:"dB"},"card4l:mean_faraday_rotation_angle":{label:"Mean Faraday Rotation",unit:""},"card4l:speckle_filtering":{label:"Speckle Filtering",custom:!0,summary:!1,null:"not applied"},"card4l:relative_rtc_accuracy":{label:"Rel. RTC Accuracy",explain:"Relative accuracy of the Radiometric Terrain Correction",unit:"dB"},"card4l:absolute_rtc_accuracy":{label:"Abs. RTC Accuracy",explain:"Absolute accuracy of the Radiometric Terrain Correction",unit:"dB"},"card4l:northern_geometric_accuracy":{label:"Northern Geometric Accuracy",unit:"m"},"card4l:eastern_geometric_accuracy":{label:"Eastern Geometric Accuracy",unit:"m"},"card4l:ellipsoidal_height":{label:"Ellipsoidal Height",unit:"m"},"geoadmin:variant":{label:"Product Variant",mapping:{krel:"RGB color with relief",komb:"RGB color without relief",kgrel:"Grayscale with relief",kgrs:"Grayscale without relief"}},"href:servers":{label:"Servers",ext:"web-map-links"},"pmtiles:layers":{label:"Layers",ext:"web-map-links"},"wms:layers":{label:"Layers",ext:"web-map-links"},"wms:styles":{label:"Styles",ext:"web-map-links"},"wms:dimensions":{label:"Dimensions",ext:"web-map-links"},"wms:transparent":{label:"Transparency",ext:"web-map-links"},"wmts:layer":{label:"Layers",ext:"web-map-links"},"wmts:dimensions":{label:"Dimensions",ext:"web-map-links"}},$ht={extensions:Oht,links:Pht,assets:Fht,metadata:Nht};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Zh=function(){return Zh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Zh.apply(this,arguments)},Pm="\\d+(?:[\\.,]\\d+)?",Bht="("+Pm+"W)",jht="("+Pm+"Y)?("+Pm+"M)?("+Pm+"D)?",zht="T("+Pm+"H)?("+Pm+"M)?("+Pm+"S)?",Uht="^P(?:"+Bht+"|"+jht+"(?:"+zht+")?)$",Ght=new RegExp(Uht),FSe=["weeks","years","months","days","hours","minutes","seconds"],NSe={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},qht=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),Hht=function(i){var e=i.match(Ght);if(!e)throw new Error("Invalid duration string");var t=e.slice(1).reduce(function(r,n,s){return r[FSe[s]]=parseFloat(n)||0,r},{});return t},Vht=function(i){return i.weeks&&i.weeks>0?Object.assign({},qht,{weeks:i.weeks}):FSe.reduce(function(e,t){var r;return Zh(Zh({},e),(r={},r[t]=i[t]||0,r))},{})},FP={locales:{},options:{},setLocales:function(i,e){this.locales=Zh(Zh({},this.locales),i),e&&(this.options=Zh(Zh({},this.options),e))},getLangConfig:function(i){var e=this.locales[i];if(!e&&this.options.fallbackLocale&&(e=this.locales[this.options.fallbackLocale]),!e)throw new Error("isoDuration: Translations for language: "+i+" are not provided");return e}},Wht=function(i){for(var e=["years","months","days"],t="",r=0,n=e;r<n.length;r++){var s=n[r];i[s]&&(t+=""+i[s]+NSe[s])}return t},Yht=function(i){for(var e=["hours","minutes","seconds"],t="",r=0,n=e;r<n.length;r++){var s=n[r];i[s]&&(t+=""+i[s]+NSe[s])}return t},Xht=function(i){if(i.weeks>0)return"P"+i.weeks+"W";var e="P",t=Wht(i);t&&(e+=t);var r=Yht(i);return r&&(e+="T"+r),!t&&!r&&(e+="0D"),e},Zht=function(i,e){var t=FP.getLangConfig(e);return i.weeks+" "+t.weeks(i.weeks)},Kht=function(i,e,t){for(var r=FP.getLangConfig(e),n="",s=["years","months","days","hours","minutes","seconds"],o=0,a=0;a<s.length;a++){var l=s[a],u=i[l];if(u&&(n!==""&&(n+=" "),n+=u+" "+r[l](u),o++,t&&t.largest&&t.largest<=o))break}return n},Jht=function(i,e,t){return i.weeks>0?Zht(i,e):Kht(i,e,t)},XD=["seconds","minutes","hours","days","months"],T2=function(i){return function(e){return{nextUnitValue:Math.floor(e/i),value:e%i}}},ege=function(i,e){return new Date(e,i+1,0).getDate()},Qht={seconds:T2(60),minutes:T2(60),hours:T2(24),days:function(i,e){for(var t=e?new Date(e.getTime()):new Date,r=i,n=0,s=ege(t.getMonth(),t.getFullYear());r>s;)r=r-s,n++,t.setMonth(t.getMonth()+1),s=ege(t.getMonth(),t.getFullYear());return{nextUnitValue:n,value:r}},months:T2(12)},edt=function(i,e){for(var t=Zh({},i),r=0;r<XD.length;r++){var n=XD[r],s=t[n];if(s>0){var o=Qht[n](s,e);if(t[n]=o.value,o.nextUnitValue){var a=n==="months"?"years":XD[r+1];t[a]=t[a]+o.nextUnitValue}}}return t},tge=function(){function i(e){this.durationObj=e}return i.prototype.parse=function(){return this.durationObj},i.prototype.toString=function(){return Xht(this.durationObj)},i.prototype.humanize=function(e,t){return Jht(this.durationObj,e,t)},i.prototype.normalize=function(e){return this.durationObj=edt(this.durationObj,e),this},i.prototype.isEmpty=function(){var e=this;return Object.keys(this.durationObj).every(function(t){return e.durationObj[t]===0})},i}();function tdt(i){return i<=2?0:i>2&&i<11?1:0}var idt={years:function(i){return i===1?"":""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(i){return i===1?"":""},hours:function(i){return i===1?"":""},minutes:function(i){return["",""][tdt(i)]},seconds:function(i){return i===1?"":""},decimal:","};function As(i){return Math.floor(i)!==i?2:i%100>=5&&i%100<=20||i%10>=5&&i%10<=9||i%10===0?0:i%10===1?1:i>1?2:0}var rdt={years:function(i){return["","",""][As(i)]},months:function(i){return["","",""][As(i)]},weeks:function(i){return["","",""][As(i)]},days:function(i){return["","",""][As(i)]},hours:function(i){return["","",""][As(i)]},minutes:function(i){return["","",""][As(i)]},seconds:function(i){return["","",""][As(i)]},decimal:","},ndt={years:function(i){return"any"+(i===1?"":"s")},months:function(i){return"mes"+(i===1?"":"os")},weeks:function(i){return"setman"+(i===1?"a":"es")},days:function(i){return"di"+(i===1?"a":"es")},hours:function(i){return"hor"+(i===1?"a":"es")},minutes:function(i){return"minut"+(i===1?"":"s")},seconds:function(i){return"segon"+(i===1?"":"s")},decimal:","};function Va(i){return i===1?0:Math.floor(i)!==i?1:i%10>=2&&i%10<=4&&i%100<10?2:3}var sdt={years:function(i){return["rok","roku","roky","let"][Va(i)]},months:function(i){return["msc","msce","msce","msc"][Va(i)]},weeks:function(i){return["tden","tdne","tdny","tdn"][Va(i)]},days:function(i){return["den","dne","dny","dn"][Va(i)]},hours:function(i){return["hodina","hodiny","hodiny","hodin"][Va(i)]},minutes:function(i){return["minuta","minuty","minuty","minut"][Va(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","sekund"][Va(i)]},decimal:","},odt={years:function(){return"r"},months:function(i){return"mned"+(i===1?"":"er")},weeks:function(i){return"uge"+(i===1?"":"r")},days:function(i){return"dag"+(i===1?"":"e")},hours:function(i){return"time"+(i===1?"":"r")},minutes:function(i){return"minut"+(i===1?"":"ter")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","},adt={years:function(i){return"Jahr"+(i===1?"":"e")},months:function(i){return"Monat"+(i===1?"":"e")},weeks:function(i){return"Woche"+(i===1?"":"n")},days:function(i){return"Tag"+(i===1?"":"e")},hours:function(i){return"Stunde"+(i===1?"":"n")},minutes:function(i){return"Minute"+(i===1?"":"n")},seconds:function(i){return"Sekunde"+(i===1?"":"n")},decimal:","},ldt={years:function(i){return"year"+(i===1?"":"s")},months:function(i){return"month"+(i===1?"":"s")},weeks:function(i){return"week"+(i===1?"":"s")},days:function(i){return"day"+(i===1?"":"s")},hours:function(i){return"hour"+(i===1?"":"s")},minutes:function(i){return"minute"+(i===1?"":"s")},seconds:function(i){return"second"+(i===1?"":"s")},decimal:"."},udt={years:function(i){return"ao"+(i===1?"":"s")},months:function(i){return"mes"+(i===1?"":"es")},weeks:function(i){return"semana"+(i===1?"":"s")},days:function(i){return"da"+(i===1?"":"s")},hours:function(i){return"hora"+(i===1?"":"s")},minutes:function(i){return"minuto"+(i===1?"":"s")},seconds:function(i){return"segundo"+(i===1?"":"s")},decimal:","},cdt={years:function(i){return"aasta"+(i===1?"":"t")},months:function(i){return"kuu"+(i===1?"":"d")},weeks:function(i){return"ndal"+(i===1?"":"at")},days:function(i){return"pev"+(i===1?"":"a")},hours:function(i){return"tund"+(i===1?"":"i")},minutes:function(i){return"minut"+(i===1?"":"it")},seconds:function(i){return"sekund"+(i===1?"":"it")},decimal:","},hdt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},ddt={years:function(i){return i===1?"vuosi":"vuotta"},months:function(i){return i===1?"kuukausi":"kuukautta"},weeks:function(i){return"viikko"+(i===1?"":"a")},days:function(i){return"piv"+(i===1?"":"")},hours:function(i){return"tunti"+(i===1?"":"a")},minutes:function(i){return"minuutti"+(i===1?"":"a")},seconds:function(i){return"sekunti"+(i===1?"":"a")},decimal:","},fdt={years:function(){return"r"},months:function(i){return i===1?"mnaur":"mnair"},weeks:function(i){return i===1?"vika":"vikur"},days:function(i){return i===1?"dagur":"dagar"},hours:function(i){return i===1?"tmi":"tmar"},minutes:function(i){return i===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},pdt={years:function(i){return"an"+(i>=2?"s":"")},months:function(){return"mois"},weeks:function(i){return"semaine"+(i>=2?"s":"")},days:function(i){return"jour"+(i>=2?"s":"")},hours:function(i){return"heure"+(i>=2?"s":"")},minutes:function(i){return"minute"+(i>=2?"s":"")},seconds:function(i){return"seconde"+(i>=2?"s":"")},decimal:","},mdt={years:function(i){return i===1?"":""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(i){return i===1?"":""},hours:function(i){return i===1?"":""},minutes:function(i){return i===1?"":""},seconds:function(i){return i===1?"":""},decimal:","},gdt={years:function(i){return i===1?"":""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(i){return i===1?"":""},hours:function(i){return i===1?"":""},minutes:function(i){return i===1?"":""},seconds:function(i){return i===1?"":""},decimal:"."},ydt={years:function(i){return i%10===2||i%10===3||i%10===4?"godine":"godina"},months:function(i){return i===1?"mjesec":i===2||i===3||i===4?"mjeseca":"mjeseci"},weeks:function(i){return i%10===1&&i!==11?"tjedan":"tjedna"},days:function(i){return i===1?"dan":"dana"},hours:function(i){return i===1?"sat":i===2||i===3||i===4?"sata":"sati"},minutes:function(i){var e=i%10;return(e===2||e===3||e===4)&&(i<10||i>14)?"minute":"minuta"},seconds:function(i){return i===10||i===11||i===12||i===13||i===14||i===16||i===17||i===18||i===19||i%10===5?"sekundi":i%10===1?"sekunda":i%10===2||i%10===3||i%10===4?"sekunde":"sekundi"},decimal:","},vdt={years:function(){return"v"},months:function(){return"hnap"},weeks:function(){return"ht"},days:function(){return"nap"},hours:function(){return"ra"},minutes:function(){return"perc"},seconds:function(){return"msodperc"},decimal:","},bdt={years:function(){return"r"},months:function(i){return"mnu"+(i===1?"ur":"ir")},weeks:function(i){return"vik"+(i===1?"a":"ur")},days:function(i){return"dag"+(i===1?"ur":"ar")},hours:function(i){return"klukkutm"+(i===1?"i":"ar")},minutes:function(i){return"mnt"+(i===1?"a":"ur")},seconds:function(i){return"seknd"+(i===1?"a":"ur")},decimal:"."},_dt={years:function(i){return"ann"+(i===1?"o":"i")},months:function(i){return"mes"+(i===1?"e":"i")},weeks:function(i){return"settiman"+(i===1?"a":"e")},days:function(i){return"giorn"+(i===1?"o":"i")},hours:function(i){return"or"+(i===1?"a":"e")},minutes:function(i){return"minut"+(i===1?"o":"i")},seconds:function(i){return"second"+(i===1?"o":"i")},decimal:","},xdt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},wdt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},Edt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:","};function b0(i){return i===1||i%10===1&&i%100>20?0:Math.floor(i)!==i||i%10>=2&&i%100>20||i%10>=2&&i%100<10?1:2}var Sdt={years:function(i){return i%10===0||i%100>=10&&i%100<=20?"met":"metai"},months:function(i){return["mnuo","mnesiai","mnesi"][b0(i)]},weeks:function(i){return["savait","savaits","savaii"][b0(i)]},days:function(i){return["diena","dienos","dien"][b0(i)]},hours:function(i){return["valanda","valandos","valand"][b0(i)]},minutes:function(i){return["minut","minuts","minui"][b0(i)]},seconds:function(i){return["sekund","sekunds","sekundi"][b0(i)]},decimal:","};function am(i){return i===1||i%10===1&&i%100!==11?0:1}var Cdt={years:function(i){return["gads","gadi"][am(i)]},months:function(i){return["mnesis","mnei"][am(i)]},weeks:function(i){return["neda","nedas"][am(i)]},days:function(i){return["diena","dienas"][am(i)]},hours:function(i){return["stunda","stundas"][am(i)]},minutes:function(i){return["minte","mintes"][am(i)]},seconds:function(i){return["sekunde","sekundes"][am(i)]},decimal:","},Tdt={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},Adt={years:function(){return"jaar"},months:function(i){return i===1?"maand":"maanden"},weeks:function(i){return i===1?"week":"weken"},days:function(i){return i===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(i){return i===1?"minuut":"minuten"},seconds:function(i){return i===1?"seconde":"seconden"},decimal:","},kdt={years:function(){return"r"},months:function(i){return"mned"+(i===1?"":"er")},weeks:function(i){return"uke"+(i===1?"":"r")},days:function(i){return"dag"+(i===1?"":"er")},hours:function(i){return"time"+(i===1?"":"r")},minutes:function(i){return"minutt"+(i===1?"":"er")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","};function lm(i){return i===1?0:Math.floor(i)!==i?1:i%10>=2&&i%10<=4&&!(i%100>10&&i%100<20)?2:3}var Ddt={years:function(i){return["rok","roku","lata","lat"][lm(i)]},months:function(i){return["miesic","miesica","miesice","miesicy"][lm(i)]},weeks:function(i){return["tydzie","tygodnia","tygodnie","tygodni"][lm(i)]},days:function(i){return["dzie","dnia","dni","dni"][lm(i)]},hours:function(i){return["godzina","godziny","godziny","godzin"][lm(i)]},minutes:function(i){return["minuta","minuty","minuty","minut"][lm(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","sekund"][lm(i)]},decimal:","},Mdt={years:function(i){return"ano"+(i===1?"":"s")},months:function(i){return i===1?"ms":"meses"},weeks:function(i){return"semana"+(i===1?"":"s")},days:function(i){return"dia"+(i===1?"":"s")},hours:function(i){return"hora"+(i===1?"":"s")},minutes:function(i){return"minuto"+(i===1?"":"s")},seconds:function(i){return"segundo"+(i===1?"":"s")},decimal:","},Ldt={years:function(i){return i===1?"an":"ani"},months:function(i){return i===1?"lun":"luni"},weeks:function(i){return i===1?"sptmn":"sptmni"},days:function(i){return i===1?"zi":"zile"},hours:function(i){return i===1?"or":"ore"},minutes:function(i){return i===1?"minut":"minute"},seconds:function(i){return i===1?"secund":"secunde"},decimal:","},Rdt={years:function(i){return["","",""][As(i)]},months:function(i){return["","",""][As(i)]},weeks:function(i){return["","",""][As(i)]},days:function(i){return["","",""][As(i)]},hours:function(i){return["","",""][As(i)]},minutes:function(i){return["","",""][As(i)]},seconds:function(i){return["","",""][As(i)]},decimal:","},Idt={years:function(i){return["rok","roky","roky","rokov"][Va(i)]},months:function(i){return["mesiac","mesiace","mesiace","mesiacov"][Va(i)]},weeks:function(i){return["tde","tdne","tdne","tdov"][Va(i)]},days:function(i){return["de","dni","dni","dn"][Va(i)]},hours:function(i){return["hodina","hodiny","hodiny","hodn"][Va(i)]},minutes:function(i){return["minta","minty","minty","mint"][Va(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","seknd"][Va(i)]},decimal:","},Odt={years:function(){return"r"},months:function(i){return"mnad"+(i===1?"":"er")},weeks:function(i){return"veck"+(i===1?"a":"or")},days:function(i){return"dag"+(i===1?"":"ar")},hours:function(i){return"timm"+(i===1?"e":"ar")},minutes:function(i){return"minut"+(i===1?"":"er")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","},Pdt={years:function(){return"yl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gn"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},Fdt={years:function(i){return["","",""][As(i)]},months:function(i){return["","",""][As(i)]},weeks:function(i){return["","",""][As(i)]},days:function(i){return["","",""][As(i)]},hours:function(i){return["","",""][As(i)]},minutes:function(i){return["","",""][As(i)]},seconds:function(i){return["","",""][As(i)]},decimal:","},Ndt={years:function(){return""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(){return""},hours:function(i){return i===1?"":""},minutes:function(){return""},seconds:function(){return""},decimal:"."},$dt={years:function(){return"nm"},months:function(){return"thng"},weeks:function(){return"tun"},days:function(){return"ngy"},hours:function(){return"gi"},minutes:function(){return"pht"},seconds:function(){return"giy"},decimal:","},Bdt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},jdt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."};function $Se(i){return typeof i=="string"?new tge(Hht(i)):new tge(Vht(i))}$Se.setLocales=function(i,e){FP.setLocales(i,e)};const zdt=Object.freeze(Object.defineProperty({__proto__:null,ar:idt,bg:rdt,ca:ndt,cs:sdt,da:odt,de:adt,en:ldt,es:udt,et:cdt,fa:hdt,fi:ddt,fo:fdt,fr:pdt,gr:mdt,he:gdt,hr:ydt,hu:vdt,is:bdt,isoDuration:$Se,it:_dt,ja:xdt,ko:wdt,lo:Edt,lt:Sdt,lv:Cdt,ms:Tdt,nl:Adt,no:kdt,pl:Ddt,pt:Mdt,ro:Ldt,ru:Rdt,sk:Idt,sv:Odt,tr:Pdt,uk:Fdt,ur:Ndt,vi:$dt,zhCN:Bdt,zhTW:jdt},Symbol.toStringTag,{value:"Module"})),Udt=VL(zdt);var A2={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var ige;function Gdt(){if(ige)return A2;ige=1;var i=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,n=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;A2.format=o,A2.parse=a;function o(h){if(!h||typeof h!="object")throw new TypeError("argument obj is required");var d=h.parameters,p=h.type;if(!p||!s.test(p))throw new TypeError("invalid type");var m=p;if(d&&typeof d=="object")for(var g,v=Object.keys(d).sort(),b=0;b<v.length;b++){if(g=v[b],!t.test(g))throw new TypeError("invalid parameter name");m+="; "+g+"="+u(d[g])}return m}function a(h){if(!h)throw new TypeError("argument string is required");var d=typeof h=="object"?l(h):h;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var p=d.indexOf(";"),m=p!==-1?d.slice(0,p).trim():d.trim();if(!s.test(m))throw new TypeError("invalid media type");var g=new c(m.toLowerCase());if(p!==-1){var v,b,_;for(i.lastIndex=p;b=i.exec(d);){if(b.index!==p)throw new TypeError("invalid parameter format");p+=b[0].length,v=b[1].toLowerCase(),_=b[2],_.charCodeAt(0)===34&&(_=_.slice(1,-1),_.indexOf("\\")!==-1&&(_=_.replace(r,"$1"))),g.parameters[v]=_}if(p!==d.length)throw new TypeError("invalid parameter format")}return g}function l(h){var d;if(typeof h.getHeader=="function"?d=h.getHeader("content-type"):typeof h.headers=="object"&&(d=h.headers&&h.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function u(h){var d=String(h);if(t.test(d))return d;if(d.length>0&&!e.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(n,"\\$1")+'"'}function c(h){this.parameters=Object.create(null),this.type=h}return A2}var k2={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var rge;function qdt(){return rge||(rge=1,function(i,e){(function(t,r){r(e)})(Rn,function(t){function r(q){switch(q._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var n=function(q,ae){this.current=q,this.entering=ae===!0},s=function(){var q=this.current,ae=this.entering;if(q===null)return null;var we=r(q);return ae&&we?q._firstChild?(this.current=q._firstChild,this.entering=!0):this.entering=!1:q===this.root?this.current=null:q._next===null?(this.current=q._parent,this.entering=!1):(this.current=q._next,this.entering=!0),{entering:ae,node:q}},o=function(q){return{current:q,root:q,entering:!0,next:s,resumeAt:n}},a=function(q,ae){this._type=q,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=ae,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(q){this._literal=q}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(q){this._destination=q}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(q){this._title=q}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(q){this._info=q}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(q){this._level=q}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(q){this._listData.type=q}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(q){this._listData.tight=q}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(q){this._listData.start=q}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(q){this._listData.delimiter=q}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(q){this._onEnter=q}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(q){this._onExit=q}}),a.prototype.appendChild=function(q){q.unlink(),q._parent=this,this._lastChild?(this._lastChild._next=q,q._prev=this._lastChild,this._lastChild=q):(this._firstChild=q,this._lastChild=q)},a.prototype.prependChild=function(q){q.unlink(),q._parent=this,this._firstChild?(this._firstChild._prev=q,q._next=this._firstChild,this._firstChild=q):(this._firstChild=q,this._lastChild=q)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(q){q.unlink(),q._next=this._next,q._next&&(q._next._prev=q),q._prev=this,this._next=q,q._parent=this._parent,q._next||(q._parent._lastChild=q)},a.prototype.insertBefore=function(q){q.unlink(),q._prev=this._prev,q._prev&&(q._prev._next=q),q._next=this,this._prev=q,q._parent=this._parent,q._prev||(q._parent._firstChild=q)},a.prototype.walker=function(){var q=new o(this);return q};var u={};function c(q){var ae,we,Le=u[q];if(Le)return Le;for(Le=u[q]=[],ae=0;ae<128;ae++)we=String.fromCharCode(ae),/^[0-9a-z]$/i.test(we)?Le.push(we):Le.push("%"+("0"+ae.toString(16).toUpperCase()).slice(-2));for(ae=0;ae<q.length;ae++)Le[q.charCodeAt(ae)]=q[ae];return Le}function h(q,ae,we){var Le,ut,nt,ui,Dt,bi="";for(typeof ae!="string"&&(we=ae,ae=h.defaultChars),typeof we>"u"&&(we=!0),Dt=c(ae),Le=0,ut=q.length;Le<ut;Le++){if(nt=q.charCodeAt(Le),we&&nt===37&&Le+2<ut&&/^[0-9a-f]{2}$/i.test(q.slice(Le+1,Le+3))){bi+=q.slice(Le,Le+3),Le+=2;continue}if(nt<128){bi+=Dt[nt];continue}if(nt>=55296&&nt<=57343){if(nt>=55296&&nt<=56319&&Le+1<ut&&(ui=q.charCodeAt(Le+1),ui>=56320&&ui<=57343)){bi+=encodeURIComponent(q[Le]+q[Le+1]),Le++;continue}bi+="%EF%BF%BD";continue}bi+=encodeURIComponent(q[Le])}return bi}h.defaultChars=";/?:@&=+$,-_.!~*'()#",h.componentChars="-_.!~*'()";var d=h,p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Rn<"u"?Rn:typeof self<"u"?self:{};function m(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}function g(q,ae){return ae={exports:{}},q(ae,ae.exports),ae.exports}function v(q){return q&&q.default||q}var b="",_="",E="",C="",T="",D="",M="",A="",I="",P="",U="",K="",L="",F="",$="",H="",V="",J="",ee="",ie="",de="",te="",z="",ne="",ve="",$e="",Xe="&",ot="&",Be="",He="",st="",xt="",kt="",Tt="",Ei="",si="",ur="",Ve="",fe="",oe="",se="",pe="",R="",j="",Z="",Q="",ge="",be="",Ce="",G="",re="",he="",ce="",Te="",Ae="",Se="",De="",Oe="",Ge="",et="",ht="",Ut="'",gt="",qt="",Kt="",It="",Vt="",Yt="",Yi="",vr="",Jr="*",Rr="",cr="",Jt="",ir="",Ir="",hi="",Fn="",rr="",Nn="",nr="",$r="",bo="",ye="",ke="",rt="",Ze="",bt="",ti="",di="",vt="",Ke="",oi="",gi="",Ot="",jt="",Er="",mn="",ni="",qe="",dt="",Xi="",un="",Sr="",Or="",gr="",Ft="",_n="",Kn="",xn="",_o="",Ho="",xo="",hl="",xs="",Vo="",ma="",Pr="",wo="",jl="",js="",Ms="",eo="",zs="",Wo="",dl="",to="",zl="",Jn="",Yn="",Eo="",io="",Ma="",fl="",ls="=",pl="",So="",Qn="",La="",Ul="",Rt="",X="",me="",Ne="",yt="",pi="",Gt="",Fi="",hr="",Br="",Si="",$n="",es="",br="",gn="",Us="",Yo="",us="",cs="",Ra="",Wr="",Ia="",oh="",Gl="",ah="",Sd="",lh="",Cd="",Td="",Ad="",uh="",ch="",kd="",vu="",ga="",ql="",Dd="",yp="",ya="",Hl="",Re="",pt="",Wt="",_r="",Qr="",$i="",hs="",nc="",qv="",$w="",Hv="",Vv="",Md="",Wv="",Yv="",yg="",vp="",Xv="\\",bp="",Oa="",Zv="",vg="",bg="",Kv="",Jv="",_g="",Bw="",jw="",zw="",hh="",dh="",xg="",wg="",Qv="",Eg="",sc="",oc="",ro="",bu="",_u="",_p="",eb="",Ld="",tb="",Sg="",xp="",Uw="",Cg="",ib="",Tg="",Ag="",fh="",wp="",rb="",Ep="",kg="",Dg="",ph="",Rd="",Sp="",nb="",Id="",sb="",ac="",Od="",lc="",Pd="",mh="",ob="",ab="",lb="",Gw="",uc="",cc="",qw="",Hw="",Vw="",Ww="",Yw="",Co="",ds="",Gs="",fs="",Fd="",Xw="",Cp="",Zw="",Mg="",ub="",Lg="",Rg=":",Ig="",cb="",hb="",Og="",db=",",Nd="@",Kw="",Tp="",Vl="",fb="",Jw="",pb="",Xo="",Cr="",Pa="",xu="",wu="",mb="",Pg="",gb="",Fg="",$d="",yb="",Ng="",Eu="",vb="",bb="",Ap="",$g="",_b="",xb="",Qw="",kp="",wb="",eE="",Eb="",gh="",Bg="",Dp="",Sb="",jg="",Cb="",Tb="",Ls="",Mp="",Ab="",kb="",Db="",yh="",Lp="",Mb="",Lb="",Rb="",vh="",Ib="",Rp="",Ob="",Bd="",bh="",Pb="",Fb="",Nb="",jd="",zd="",Ud="",Gd="",$b="",Bb="",Su="",_h="",qd="",jb="",tE="",iE="",no="",zb="",rE="",Ub="",Gb="",qb="",nE="",sE="",Cu="",Hd="",Ip="",Vd="",Wl="",oE="",aE="",xh="",Hb="",Vb="",Wb="",Op="",wh="",zg="",Ug="",Gg="",Wd="`",Yb="",Xb="",Pp="",lE="",Yd="",Zb="",Kb="",qg="",Jb="",Qb="",e1="",Xd="",Zd="",Hg="",t1="",i1="",r1="",Vg="",n1="$",s1="",Eh="",o1="",Fp="",uE="",cE="",wn="",Wg="",Kd="",Fa="",Np="",Yg="",a1="",l1="",u1="",c1="",h1="",Xg="",d1="",jr="",f1="",Sh="",$p="",hE="",Bn="",dE="",Bp="",f="",y="",w="",x="",S="",O="",N="",B="",W="",Y="",le="",ue="",xe="",_e="",Pe="",Fe="",Ie="",ze="",Je="",Ye="",ct="",lt="",ft="",li="",Ct="",Oi="",ii="",Ki="",Tr="",Ji="",Ui="",Qi="",Ci="",Ar="",vi="",Vi="",Di="",dr="",qs="",kr="",Rs="",Is="",yn="",Hs="",va="",ws="",Na="",jp="",p1="",hc="",To="",Tu="",fE="",Ch="",Zg="",Jd="",zp="",Qd="",Kg="",m1="",Jg="",g1="",y1="",v1="",iF="",rF="",nF="",sF="",oF="",aF="",lF="",uF="",cF="",hF="",dF="",fF="",pF="",mF="",gF="",yF="",vF="",bF="",_F="",xF="",wF="",EF="",SF="",CF="",TF="",AF="",kF="",DF="",MF="",LF="",RF="",IF="",OF="=",PF="",FF="",NF="",$F="",BF="",jF="",zF="",UF="",GF="",qF="",HF="",VF="",WF="",YF="",XF="",ZF="",KF="",JF="",QF="",eN="",tN="!",iN="",rN="",nN="",sN="",oN="",aN="",lN="",uN="",cN="",hN="",dN="",fN="",pN="",mN="",gN="",yN="",vN="",bN="fj",_N="",xN="",wN="",EN="",SN="",CN="",TN="",AN="",kN="",DN="",MN="",LN="",RN="",IN="",ON="",PN="",FN="",NN="",$N="",BN="",jN="",zN="",UN="",GN="",qN="",HN="",VN="",WN="",YN="",XN="",ZN="",KN="",JN="",QN="",e5="",t5="",i5="",r5="",n5="",s5="",o5="",a5="",l5="",u5="",c5="",h5="",d5="",f5="",p5="",m5="",g5="",y5="",v5="",b5="",_5="",x5="",w5="",E5="",S5="",C5="",T5="",A5="",k5="",D5="",M5="",L5="",R5="",I5="",O5="",P5="",F5="",N5="",$5="",B5="",j5="",z5="",U5="",G5="",q5="",H5="",V5="",W5="`",Y5="",X5="",Z5="",K5="",J5="",Q5="",e4="",t4="",i4="",r4="",n4="",s4="",o4="",a4="",l4=">",u4=">",c4="",h4="",d4="",f4="",p4="",m4="",g4="",y4="",v4="",b4="",_4="",x4="",w4="",E4="",S4="",C4="",T4="",A4="",k4="",D4="",M4="",L4="",R4="",I4="^",O4="",P4="",F4="",N4="",$4="",B4="",j4="",z4="",U4="",G4="",q4="",H4="",V4="",W4="",Y4="",X4="",Z4="",K4="",J4="",Q4="",e6="",t6="",i6="",r6="",n6="",s6="",o6="",a6="",l6="",u6="",c6="",h6="",d6="",f6="",p6="",m6="",g6="",y6="",v6="",b6="",_6="",x6="",w6="",E6="",S6="",C6="",T6="",A6="",k6="",D6="",M6="",L6="",R6="",I6="",O6="",P6="",F6="",N6="",$6="",B6="",j6="",z6="",U6="",G6="",q6="",H6="",V6="",W6="",Y6="",X6="",Z6="",K6="",J6="",Q6="",e8="",t8="",i8="",r8="",n8="",s8="",o8="",a8="",l8="",u8="",c8="",h8="",d8="",f8="",p8="",m8="",g8="",y8="",v8="",b8="",_8="",x8="",w8="",E8="",S8="",C8="",T8="",A8="",k8="",D8="",M8="",L8="",R8="",I8="",O8="",P8="",F8="",N8="",$8="",B8="",j8="",z8="",U8="",G8="",q8="",H8="",V8="",W8="",Y8="",X8="",Z8="",K8="",J8="",Q8="",e$="",t$="",i$="",r$="",n$="",s$="",o$="",a$="",l$="",u$="",c$="",h$="",d$="",f$="",p$="",m$="",g$="",y$="",v$="",b$="",_$="",x$="",w$="",E$="",S$="",C$="",T$="",A$="",k$="",D$="",M$="",L$="",R$="",I$="",O$="",P$="",F$="",N$="",$$="",B$="",j$="",z$="{",U$="[",G$="",q$="",H$="",V$="",W$="",Y$="",X$="",Z$="",K$="{",J$="",Q$="",eB="",tB="",iB="",rB="",nB="",sB="",oB="",aB="",lB="",uB="",cB="",hB="",dB="",fB="",pB="",mB="",gB="",yB="",vB="",bB="",_B="",xB="",wB="",EB="",SB="",CB="",TB="",AB="",kB="",DB="",MB="",LB="",RB="",IB="",OB="",PB="",FB="",NB="",$B="",BB="",jB="",zB="",UB="",GB="",qB="",HB="",VB="",WB="",YB="",XB="",ZB="",KB="",JB="",QB="",ej="",tj="",ij="",rj="",nj="",sj="",oj="",aj="",lj="",uj="",cj="",hj="",dj="",fj="",pj="",mj="",gj="",yj="",vj="",bj="",_j="",xj="",wj="",Ej="",Sj="",Cj="",Tj="",Aj="",kj="",Dj="",Mj="",Lj="",Rj="",Ij="",Oj="",Pj="",Fj="",Nj="",$j="",Bj="",jj="",zj="",Uj="",Gj="",qj="",Hj="",Vj="",Wj="",Yj="",Xj="",Zj="",Kj="",Jj="",Qj="",e9="",t9="",i9="",r9="",n9="",s9="",o9="",a9="",l9="",u9="",c9="",h9="",d9="_",f9="",p9="",m9="",g9="",y9="",v9="(",b9="",_9="",x9="",w9="",E9="",S9="",C9="",T9="",A9="",k9="",D9="",M9="",L9="",R9="",I9="",O9="[",P9="",F9="",N9="",$9="",B9="",j9="",z9="<",U9="<",G9="",q9="",H9="",V9="",W9="",Y9="",X9="",Z9="",K9="",J9="",Q9="",ez="",tz="",iz="",rz="",nz="",sz="",oz="",az="",lz="",uz="",cz="",hz="",dz="",fz="",pz="",mz="",gz="",yz="",vz="",bz="",_z="",xz="",wz="",Ez="",Sz="",Cz="*",Tz="",Az="",kz="",Dz="",Mz="",Lz="",Rz="",Iz="",Oz="",Pz="",Fz="",Nz="",$z="",Bz="",jz="",zz="",Uz="",Gz="",qz="",Hz="",Vz="",Wz="",Yz="",Xz="",Zz="",Kz="",Jz="",Qz="",e7="",t7="",i7="",r7="",n7="",s7="",o7="",a7="",l7="",u7="",c7="",h7="",d7="",f7="",p7="",m7="",g7="",y7="",v7="",b7="",_7="",x7="",w7="",E7="",S7="",C7="",T7="",A7="",k7="",D7="",M7="",L7="",R7="",I7="",O7="",P7=`
`,F7="",N7="",$7="",B7="",j7="",z7="",U7="",G7="",q7="",H7="",V7="",W7="",Y7="",X7="",Z7="",K7="",J7="",Q7="",eU="",tU="",iU="",rU="",nU="",sU="",oU="",aU="",lU="",uU="",cU="",hU="",dU="",fU="",pU="",mU="",gU="",yU="",vU="",bU="",_U="",xU="",wU="",EU="",SU="",CU="",TU="",AU="",kU="",DU="",MU="",LU="",RU="",IU="",OU="",PU="",FU="",NU="",$U="",BU="",jU="",zU="",UU="",GU="",qU="",HU="",VU="",WU="",YU="",XU="",ZU="",KU="",JU="",QU="",eG="",tG="",iG="",rG="",nG="",sG="",oG="",aG="",lG="",uG="",cG="",hG="",dG="",fG="",pG="",mG="",gG="",yG="",vG="",bG="",_G="",xG="",wG="",EG="",SG="",CG="",TG="",AG="",kG="",DG="",MG="",LG="",RG="",IG="",OG="",PG="",FG="",NG="",$G="",BG="",jG="",zG="",UG="",GG="",qG="",HG="",VG="",WG="",YG="",XG="",ZG="",KG="",JG="",QG="",eq="",tq="",iq="",rq="",nq="",sq="",oq="",aq="",lq="",uq="",cq="",hq="",dq="",fq="",pq="",mq="",gq="",yq="",vq="",bq="",_q="",xq="",wq="",Eq="",Sq="",Cq="",Tq="",Aq="",kq="",Dq="",Mq="",Lq="",Rq="",Iq="",Oq="",Pq="",Fq="",Nq="",$q="",Bq="",jq="",zq="",Uq="",Gq="",qq="#",Hq="",Vq="",Wq="",Yq="",Xq="",Zq="",Kq="",Jq="",Qq=">",eH="",tH="",iH="",rH="",nH="<",sH="",oH="",aH="",lH="",uH="",cH="",hH="",dH="",fH="",pH="",mH="",gH="",yH="",vH="",bH="",_H="",xH="",wH="",EH="",SH="",CH="",TH="",AH="",kH="",DH="",MH="",LH="",RH="",IH="",OH="",PH="",FH="",NH="",$H="",BH="",jH="",zH="",UH="",GH="",qH="",HH="",VH="",WH="",YH="",XH="",ZH="",KH="",JH="",QH="",eV="",tV="",iV="",rV="",nV="",sV="",oV="",aV="",lV="",uV="",cV="",hV="",dV="",fV="",pV="",mV="",gV="",yV="",vV="",bV="",_V="",xV="",wV="",EV="",SV="",CV="",TV="",AV="",kV="",DV="",MV="",LV="",RV="",IV="",OV="",PV="",FV="",NV="",$V="",BV="",jV="",zV="",UV="",GV="",qV="",HV="%",VV=".",WV="",YV="",XV="",ZV="",KV="",JV="",QV="",eW="",tW="",iW="",rW="",nW="",sW="",oW="",aW="",lW="",uW="",cW="",hW="",dW="",fW="+",pW="",mW="",gW="",yW="",vW="",bW="",_W="",xW="",wW="",EW="",SW="",CW="",TW="",AW="",kW="",DW="",MW="",LW="",RW="",IW="",OW="",PW="",FW="",NW="",$W="",BW="",jW="",zW="",UW="",GW="",qW="",HW="",VW="",WW="",YW="",XW="",ZW="",KW="",JW="",QW="",eY="",tY="",iY="",rY="",nY="",sY="",oY="",aY="",lY="",uY="",cY="",hY="",dY="",fY="",pY="",mY="",gY="",yY="",vY="",bY="",_Y="",xY="",wY="",EY="?",SY="",CY='"',TY='"',AY="",kY="",DY="",MY="",LY="",RY="",IY="",OY="",PY="",FY="",NY="",$Y="",BY="",jY="",zY="",UY="",GY="",qY="",HY="",VY="",WY="",YY="",XY="",ZY="",KY="",JY="",QY="",eX="",tX="",iX="",rX="",nX="",sX="",oX="",aX="",lX="}",uX="]",cX="",hX="",dX="",fX="",pX="",mX="",gX="",yX="",vX="}",bX="",_X="",xX="",wX="",EX="",SX="",CX="",TX="",AX="",kX="",DX="",MX="",LX="",RX="",IX="",OX="",PX="",FX="",NX="",$X="",BX="",jX="",zX="",UX="",GX="",qX="",HX="",VX="",WX="",YX="",XX="",ZX="",KX="",JX="",QX="",eZ="",tZ="",iZ="",rZ="",nZ="",sZ="",oZ="",aZ="",lZ="",uZ="",cZ="",hZ="",dZ="",fZ="",pZ="",mZ="",gZ="",yZ="",vZ="",bZ="",_Z="",xZ="",wZ="",EZ="",SZ="",CZ="",TZ="",AZ="",kZ="",DZ="",MZ="",LZ="",RZ="",IZ="",OZ="",PZ="",FZ="",NZ="",$Z="",BZ="",jZ="",zZ="",UZ="",GZ=")",qZ="",HZ="",VZ="",WZ="",YZ="",XZ="",ZZ="",KZ="",JZ="",QZ="]",eK="",tK="",iK="",rK="",nK="",sK="",oK="",aK="",lK="",uK="",cK="",hK="",dK="",fK="",pK="",mK="",gK="",yK="",vK="",bK="",_K="",xK="",wK="",EK="",SK="",CK="",TK="",AK="",kK="",DK="",MK="",LK="",RK="",IK="",OK="",PK="",FK="",NK="",$K="",BK="",jK="",zK=";",UK="",GK="",qK="",HK="",VK="",WK="",YK="",XK="",ZK="",KK="",JK="",QK="",eJ="",tJ="",iJ="",rJ="",nJ="",sJ="",oJ="",aJ="",lJ="",uJ="",cJ="",hJ="",dJ="",fJ="",pJ="",mJ="",gJ="",yJ="",vJ="",bJ="",_J="",xJ="",wJ="",EJ="",SJ="",CJ="",TJ="",AJ="",kJ="",DJ="",MJ="",LJ="",RJ="",IJ="",OJ="",PJ="",FJ="/",NJ="",$J="",BJ="",jJ="",zJ="",UJ="",GJ="",qJ="",HJ="",VJ="",WJ="",YJ="",XJ="",ZJ="",KJ="",JJ="",QJ="",eQ="",tQ="",iQ="",rQ="",nQ="",sQ="",oQ="",aQ="",lQ="",uQ="",cQ="",hQ="",dQ="",fQ="",pQ="",mQ="",gQ="",yQ="",vQ="",bQ="",_Q="",xQ="",wQ="",EQ="",SQ="",CQ="",TQ="",AQ="",kQ="",DQ="",MQ="",LQ="",RQ="",IQ="",OQ="",PQ="",FQ="",NQ="",$Q="",BQ="",jQ="",zQ="",UQ="",GQ="",qQ="",HQ="",VQ="",WQ="",YQ="",XQ="",ZQ="",KQ="",JQ="",QQ="",eee="",tee="",iee="",ree="",nee="",see="",oee="",aee="",lee="",uee="",cee="",hee="",dee="",fee="",pee="",mee="",gee="",yee="",vee="",bee="",_ee="",xee="",wee="",Eee="",See="",Cee="",Tee="",Aee="",kee="",Dee="",Mee="",Lee="",Ree="",Iee="",Oee="",Pee="",Fee="",Nee="",$ee="",Bee="",jee="",zee="	",Uee="",Gee="",qee="",Hee="",Vee="",Wee="",Yee="",Xee="",Zee="",Kee="",Jee="",Qee="",ete="",tte="",ite="",rte="",nte="",ste="",ote="",ate="",lte="",ute="",cte="",hte="",dte="",fte="",pte="",mte="",gte="",yte="",vte="",bte="",_te="",xte="",wte="",Ete="",Ste="",Cte="",Tte="",Ate="",kte="",Dte="",Mte="",Lte="",Rte="",Ite="",Ote="",Pte="",Fte="",Nte="",$te="",Bte="",jte="",zte="",Ute="",Gte="",qte="",Hte="",Vte="",Wte="",Yte="",Xte="",Zte="",Kte="",Jte="",Qte="",eie="",tie="",iie="",rie="",nie="",sie="",oie="",aie="",lie="",uie="",cie="",hie="",die="",fie="",pie="",mie="",gie="",yie="",vie="",bie="",_ie="",xie="",wie="",Eie="",Sie="",Cie="",Tie="",Aie="",kie="",Die="",Mie="",Lie="",Rie="",Iie="",Oie="",Pie="",Fie="",Nie="",$ie="",Bie="",jie="",zie="",Uie="",Gie="",qie="",Hie="_",Vie="",Wie="",Yie="",Xie="",Zie="",Kie="",Jie="",Qie="",ere="",tre="",ire="",rre="",nre="",sre="",ore="",are="",lre="",ure="",cre="",hre="",dre="",fre="",pre="",mre="",gre="",yre="",vre="",bre="",_re="",xre="",wre="",Ere="",Sre="",Cre="",Tre="",Are="",kre="",Dre="",Mre="",Lre="",Rre="",Ire="",Ore="",Pre="",Fre="",Nre="",$re="",Bre="",jre="",zre="",Ure="",Gre="",qre="",Hre="",Vre="",Wre="",Yre="",Xre="",Zre="",Kre="",Jre="",Qre="",ene="",tne="",ine="",rne="",nne="",sne="",one="",ane="",lne="",une="",cne="",hne="",dne="",fne="",pne="",mne="",gne="",yne="",vne="",bne="|",_ne="",xne="|",wne="",Ene="",Sne="|",Cne="",Tne="",Ane="",kne="",Dne="",Mne="",Lne="",Rne="",Ine="",One="",Pne="",Fne="",Nne="",$ne="",Bne="",jne="",zne="",Une="",Gne="",qne="",Hne="",Vne="",Wne="",Yne="",Xne="",Zne="",Kne="",Jne="",Qne="",ese="",tse="",ise="",rse="",nse="",sse="",ose="",ase="",lse="",use="",cse="",hse="",dse="",fse="",pse="",mse="",gse="",yse="",vse="",bse="",_se="",xse="",wse="",Ese="",Sse="",Cse="",Tse="",Ase="",kse="",Dse="",Mse="",Lse="",Rse="",Ise="",Ose="",Pse="",Fse="",Nse="",$se="",Bse="",jse="",zse="",Use="",Gse="",qse="",Hse="",Vse="",Wse="",Yse="",Xse="",Zse="",Kse="",Jse="",Qse="",eoe="",toe="",ioe="",roe="",noe="",soe="",ooe="",aoe="",loe="",uoe="",coe="",hoe="",doe="",foe="",poe="",moe="",goe="",yoe="",voe="",boe="",_oe="",xoe="",woe="",Eoe="",Soe="",NTe={Aacute:b,aacute:_,Abreve:E,abreve:C,ac:T,acd:D,acE:M,Acirc:A,acirc:I,acute:P,Acy:U,acy:K,AElig:L,aelig:F,af:$,Afr:H,afr:V,Agrave:J,agrave:ee,alefsym:ie,aleph:de,Alpha:te,alpha:z,Amacr:ne,amacr:ve,amalg:$e,amp:Xe,AMP:ot,andand:Be,And:He,and:st,andd:xt,andslope:kt,andv:Tt,ang:Ei,ange:si,angle:ur,angmsdaa:Ve,angmsdab:fe,angmsdac:oe,angmsdad:se,angmsdae:pe,angmsdaf:R,angmsdag:j,angmsdah:Z,angmsd:Q,angrt:ge,angrtvb:be,angrtvbd:Ce,angsph:G,angst:re,angzarr:he,Aogon:ce,aogon:Te,Aopf:Ae,aopf:Se,apacir:De,ap:Oe,apE:Ge,ape:et,apid:ht,apos:Ut,ApplyFunction:gt,approx:qt,approxeq:Kt,Aring:It,aring:Vt,Ascr:Yt,ascr:Yi,Assign:vr,ast:Jr,asymp:Rr,asympeq:cr,Atilde:Jt,atilde:ir,Auml:Ir,auml:hi,awconint:Fn,awint:rr,backcong:Nn,backepsilon:nr,backprime:$r,backsim:bo,backsimeq:ye,Backslash:ke,Barv:rt,barvee:Ze,barwed:bt,Barwed:ti,barwedge:di,bbrk:vt,bbrktbrk:Ke,bcong:oi,Bcy:gi,bcy:Ot,bdquo:jt,becaus:Er,because:mn,Because:ni,bemptyv:qe,bepsi:dt,bernou:Xi,Bernoullis:un,Beta:Sr,beta:Or,beth:gr,between:Ft,Bfr:_n,bfr:Kn,bigcap:xn,bigcirc:_o,bigcup:Ho,bigodot:xo,bigoplus:hl,bigotimes:xs,bigsqcup:Vo,bigstar:ma,bigtriangledown:Pr,bigtriangleup:wo,biguplus:jl,bigvee:js,bigwedge:Ms,bkarow:eo,blacklozenge:zs,blacksquare:Wo,blacktriangle:dl,blacktriangledown:to,blacktriangleleft:zl,blacktriangleright:Jn,blank:Yn,blk12:Eo,blk14:io,blk34:Ma,block:fl,bne:ls,bnequiv:pl,bNot:So,bnot:Qn,Bopf:La,bopf:Ul,bot:Rt,bottom:X,bowtie:me,boxbox:Ne,boxdl:yt,boxdL:pi,boxDl:Gt,boxDL:Fi,boxdr:hr,boxdR:Br,boxDr:Si,boxDR:$n,boxh:es,boxH:br,boxhd:gn,boxHd:Us,boxhD:Yo,boxHD:us,boxhu:cs,boxHu:Ra,boxhU:Wr,boxHU:Ia,boxminus:oh,boxplus:Gl,boxtimes:ah,boxul:Sd,boxuL:lh,boxUl:Cd,boxUL:Td,boxur:Ad,boxuR:uh,boxUr:ch,boxUR:kd,boxv:vu,boxV:ga,boxvh:ql,boxvH:Dd,boxVh:yp,boxVH:ya,boxvl:Hl,boxvL:Re,boxVl:pt,boxVL:Wt,boxvr:_r,boxvR:Qr,boxVr:$i,boxVR:hs,bprime:nc,breve:qv,Breve:$w,brvbar:Hv,bscr:Vv,Bscr:Md,bsemi:Wv,bsim:Yv,bsime:yg,bsolb:vp,bsol:Xv,bsolhsub:bp,bull:Oa,bullet:Zv,bump:vg,bumpE:bg,bumpe:Kv,Bumpeq:Jv,bumpeq:_g,Cacute:Bw,cacute:jw,capand:zw,capbrcup:hh,capcap:dh,cap:xg,Cap:wg,capcup:Qv,capdot:Eg,CapitalDifferentialD:sc,caps:oc,caret:ro,caron:bu,Cayleys:_u,ccaps:_p,Ccaron:eb,ccaron:Ld,Ccedil:tb,ccedil:Sg,Ccirc:xp,ccirc:Uw,Cconint:Cg,ccups:ib,ccupssm:Tg,Cdot:Ag,cdot:fh,cedil:wp,Cedilla:rb,cemptyv:Ep,cent:kg,centerdot:Dg,CenterDot:ph,cfr:Rd,Cfr:Sp,CHcy:nb,chcy:Id,check:sb,checkmark:ac,Chi:Od,chi:lc,circ:Pd,circeq:mh,circlearrowleft:ob,circlearrowright:ab,circledast:lb,circledcirc:Gw,circleddash:uc,CircleDot:cc,circledR:qw,circledS:Hw,CircleMinus:Vw,CirclePlus:Ww,CircleTimes:Yw,cir:Co,cirE:ds,cire:Gs,cirfnint:fs,cirmid:Fd,cirscir:Xw,ClockwiseContourIntegral:Cp,CloseCurlyDoubleQuote:Zw,CloseCurlyQuote:Mg,clubs:ub,clubsuit:Lg,colon:Rg,Colon:Ig,Colone:cb,colone:hb,coloneq:Og,comma:db,commat:Nd,comp:Kw,compfn:Tp,complement:Vl,complexes:fb,cong:Jw,congdot:pb,Congruent:Xo,conint:Cr,Conint:Pa,ContourIntegral:xu,copf:wu,Copf:mb,coprod:Pg,Coproduct:gb,copy:Fg,COPY:$d,copysr:yb,CounterClockwiseContourIntegral:Ng,crarr:Eu,cross:vb,Cross:bb,Cscr:Ap,cscr:$g,csub:_b,csube:xb,csup:Qw,csupe:kp,ctdot:wb,cudarrl:eE,cudarrr:Eb,cuepr:gh,cuesc:Bg,cularr:Dp,cularrp:Sb,cupbrcap:jg,cupcap:Cb,CupCap:Tb,cup:Ls,Cup:Mp,cupcup:Ab,cupdot:kb,cupor:Db,cups:yh,curarr:Lp,curarrm:Mb,curlyeqprec:Lb,curlyeqsucc:Rb,curlyvee:vh,curlywedge:Ib,curren:Rp,curvearrowleft:Ob,curvearrowright:Bd,cuvee:bh,cuwed:Pb,cwconint:Fb,cwint:Nb,cylcty:jd,dagger:zd,Dagger:Ud,daleth:Gd,darr:$b,Darr:Bb,dArr:Su,dash:_h,Dashv:qd,dashv:jb,dbkarow:tE,dblac:iE,Dcaron:no,dcaron:zb,Dcy:rE,dcy:Ub,ddagger:Gb,ddarr:qb,DD:nE,dd:sE,DDotrahd:Cu,ddotseq:Hd,deg:Ip,Del:Vd,Delta:Wl,delta:oE,demptyv:aE,dfisht:xh,Dfr:Hb,dfr:Vb,dHar:Wb,dharl:Op,dharr:wh,DiacriticalAcute:zg,DiacriticalDot:Ug,DiacriticalDoubleAcute:Gg,DiacriticalGrave:Wd,DiacriticalTilde:Yb,diam:Xb,diamond:Pp,Diamond:lE,diamondsuit:Yd,diams:Zb,die:Kb,DifferentialD:qg,digamma:Jb,disin:Qb,div:e1,divide:Xd,divideontimes:Zd,divonx:Hg,DJcy:t1,djcy:i1,dlcorn:r1,dlcrop:Vg,dollar:n1,Dopf:s1,dopf:Eh,Dot:o1,dot:Fp,DotDot:uE,doteq:cE,doteqdot:wn,DotEqual:Wg,dotminus:Kd,dotplus:Fa,dotsquare:Np,doublebarwedge:Yg,DoubleContourIntegral:a1,DoubleDot:l1,DoubleDownArrow:u1,DoubleLeftArrow:c1,DoubleLeftRightArrow:h1,DoubleLeftTee:Xg,DoubleLongLeftArrow:d1,DoubleLongLeftRightArrow:jr,DoubleLongRightArrow:f1,DoubleRightArrow:Sh,DoubleRightTee:$p,DoubleUpArrow:hE,DoubleUpDownArrow:Bn,DoubleVerticalBar:dE,DownArrowBar:Bp,downarrow:f,DownArrow:y,Downarrow:w,DownArrowUpArrow:x,DownBreve:S,downdownarrows:O,downharpoonleft:N,downharpoonright:B,DownLeftRightVector:W,DownLeftTeeVector:Y,DownLeftVectorBar:le,DownLeftVector:ue,DownRightTeeVector:xe,DownRightVectorBar:_e,DownRightVector:Pe,DownTeeArrow:Fe,DownTee:Ie,drbkarow:ze,drcorn:Je,drcrop:Ye,Dscr:ct,dscr:lt,DScy:ft,dscy:li,dsol:Ct,Dstrok:Oi,dstrok:ii,dtdot:Ki,dtri:Tr,dtrif:Ji,duarr:Ui,duhar:Qi,dwangle:Ci,DZcy:Ar,dzcy:vi,dzigrarr:Vi,Eacute:Di,eacute:dr,easter:qs,Ecaron:kr,ecaron:Rs,Ecirc:Is,ecirc:yn,ecir:Hs,ecolon:va,Ecy:ws,ecy:Na,eDDot:jp,Edot:p1,edot:hc,eDot:To,ee:Tu,efDot:fE,Efr:Ch,efr:Zg,eg:Jd,Egrave:zp,egrave:Qd,egs:Kg,egsdot:m1,el:Jg,Element:g1,elinters:y1,ell:v1,els:iF,elsdot:rF,Emacr:nF,emacr:sF,empty:oF,emptyset:aF,EmptySmallSquare:lF,emptyv:uF,EmptyVerySmallSquare:cF,emsp13:hF,emsp14:dF,emsp:fF,ENG:pF,eng:mF,ensp:gF,Eogon:yF,eogon:vF,Eopf:bF,eopf:_F,epar:xF,eparsl:wF,eplus:EF,epsi:SF,Epsilon:CF,epsilon:TF,epsiv:AF,eqcirc:kF,eqcolon:DF,eqsim:MF,eqslantgtr:LF,eqslantless:RF,Equal:IF,equals:OF,EqualTilde:PF,equest:FF,Equilibrium:NF,equiv:$F,equivDD:BF,eqvparsl:jF,erarr:zF,erDot:UF,escr:GF,Escr:qF,esdot:HF,Esim:VF,esim:WF,Eta:YF,eta:XF,ETH:ZF,eth:KF,Euml:JF,euml:QF,euro:eN,excl:tN,exist:iN,Exists:rN,expectation:nN,exponentiale:sN,ExponentialE:oN,fallingdotseq:aN,Fcy:lN,fcy:uN,female:cN,ffilig:hN,fflig:dN,ffllig:fN,Ffr:pN,ffr:mN,filig:gN,FilledSmallSquare:yN,FilledVerySmallSquare:vN,fjlig:bN,flat:_N,fllig:xN,fltns:wN,fnof:EN,Fopf:SN,fopf:CN,forall:TN,ForAll:AN,fork:kN,forkv:DN,Fouriertrf:MN,fpartint:LN,frac12:RN,frac13:IN,frac14:ON,frac15:PN,frac16:FN,frac18:NN,frac23:$N,frac25:BN,frac34:jN,frac35:zN,frac38:UN,frac45:GN,frac56:qN,frac58:HN,frac78:VN,frasl:WN,frown:YN,fscr:XN,Fscr:ZN,gacute:KN,Gamma:JN,gamma:QN,Gammad:e5,gammad:t5,gap:i5,Gbreve:r5,gbreve:n5,Gcedil:s5,Gcirc:o5,gcirc:a5,Gcy:l5,gcy:u5,Gdot:c5,gdot:h5,ge:d5,gE:f5,gEl:p5,gel:m5,geq:g5,geqq:y5,geqslant:v5,gescc:b5,ges:_5,gesdot:x5,gesdoto:w5,gesdotol:E5,gesl:S5,gesles:C5,Gfr:T5,gfr:A5,gg:k5,Gg:D5,ggg:M5,gimel:L5,GJcy:R5,gjcy:I5,gla:O5,gl:P5,glE:F5,glj:N5,gnap:$5,gnapprox:B5,gne:j5,gnE:z5,gneq:U5,gneqq:G5,gnsim:q5,Gopf:H5,gopf:V5,grave:W5,GreaterEqual:Y5,GreaterEqualLess:X5,GreaterFullEqual:Z5,GreaterGreater:K5,GreaterLess:J5,GreaterSlantEqual:Q5,GreaterTilde:e4,Gscr:t4,gscr:i4,gsim:r4,gsime:n4,gsiml:s4,gtcc:o4,gtcir:a4,gt:l4,GT:u4,Gt:c4,gtdot:h4,gtlPar:d4,gtquest:f4,gtrapprox:p4,gtrarr:m4,gtrdot:g4,gtreqless:y4,gtreqqless:v4,gtrless:b4,gtrsim:_4,gvertneqq:x4,gvnE:w4,Hacek:E4,hairsp:S4,half:C4,hamilt:T4,HARDcy:A4,hardcy:k4,harrcir:D4,harr:M4,hArr:L4,harrw:R4,Hat:I4,hbar:O4,Hcirc:P4,hcirc:F4,hearts:N4,heartsuit:$4,hellip:B4,hercon:j4,hfr:z4,Hfr:U4,HilbertSpace:G4,hksearow:q4,hkswarow:H4,hoarr:V4,homtht:W4,hookleftarrow:Y4,hookrightarrow:X4,hopf:Z4,Hopf:K4,horbar:J4,HorizontalLine:Q4,hscr:e6,Hscr:t6,hslash:i6,Hstrok:r6,hstrok:n6,HumpDownHump:s6,HumpEqual:o6,hybull:a6,hyphen:l6,Iacute:u6,iacute:c6,ic:h6,Icirc:d6,icirc:f6,Icy:p6,icy:m6,Idot:g6,IEcy:y6,iecy:v6,iexcl:b6,iff:_6,ifr:x6,Ifr:w6,Igrave:E6,igrave:S6,ii:C6,iiiint:T6,iiint:A6,iinfin:k6,iiota:D6,IJlig:M6,ijlig:L6,Imacr:R6,imacr:I6,image:O6,ImaginaryI:P6,imagline:F6,imagpart:N6,imath:$6,Im:B6,imof:j6,imped:z6,Implies:U6,incare:G6,in:"",infin:q6,infintie:H6,inodot:V6,intcal:W6,int:Y6,Int:X6,integers:Z6,Integral:K6,intercal:J6,Intersection:Q6,intlarhk:e8,intprod:t8,InvisibleComma:i8,InvisibleTimes:r8,IOcy:n8,iocy:s8,Iogon:o8,iogon:a8,Iopf:l8,iopf:u8,Iota:c8,iota:h8,iprod:d8,iquest:f8,iscr:p8,Iscr:m8,isin:g8,isindot:y8,isinE:v8,isins:b8,isinsv:_8,isinv:x8,it:w8,Itilde:E8,itilde:S8,Iukcy:C8,iukcy:T8,Iuml:A8,iuml:k8,Jcirc:D8,jcirc:M8,Jcy:L8,jcy:R8,Jfr:I8,jfr:O8,jmath:P8,Jopf:F8,jopf:N8,Jscr:$8,jscr:B8,Jsercy:j8,jsercy:z8,Jukcy:U8,jukcy:G8,Kappa:q8,kappa:H8,kappav:V8,Kcedil:W8,kcedil:Y8,Kcy:X8,kcy:Z8,Kfr:K8,kfr:J8,kgreen:Q8,KHcy:e$,khcy:t$,KJcy:i$,kjcy:r$,Kopf:n$,kopf:s$,Kscr:o$,kscr:a$,lAarr:l$,Lacute:u$,lacute:c$,laemptyv:h$,lagran:d$,Lambda:f$,lambda:p$,lang:m$,Lang:g$,langd:y$,langle:v$,lap:b$,Laplacetrf:_$,laquo:x$,larrb:w$,larrbfs:E$,larr:S$,Larr:C$,lArr:T$,larrfs:A$,larrhk:k$,larrlp:D$,larrpl:M$,larrsim:L$,larrtl:R$,latail:I$,lAtail:O$,lat:P$,late:F$,lates:N$,lbarr:$$,lBarr:B$,lbbrk:j$,lbrace:z$,lbrack:U$,lbrke:G$,lbrksld:q$,lbrkslu:H$,Lcaron:V$,lcaron:W$,Lcedil:Y$,lcedil:X$,lceil:Z$,lcub:K$,Lcy:J$,lcy:Q$,ldca:eB,ldquo:tB,ldquor:iB,ldrdhar:rB,ldrushar:nB,ldsh:sB,le:oB,lE:aB,LeftAngleBracket:lB,LeftArrowBar:uB,leftarrow:cB,LeftArrow:hB,Leftarrow:dB,LeftArrowRightArrow:fB,leftarrowtail:pB,LeftCeiling:mB,LeftDoubleBracket:gB,LeftDownTeeVector:yB,LeftDownVectorBar:vB,LeftDownVector:bB,LeftFloor:_B,leftharpoondown:xB,leftharpoonup:wB,leftleftarrows:EB,leftrightarrow:SB,LeftRightArrow:CB,Leftrightarrow:TB,leftrightarrows:AB,leftrightharpoons:kB,leftrightsquigarrow:DB,LeftRightVector:MB,LeftTeeArrow:LB,LeftTee:RB,LeftTeeVector:IB,leftthreetimes:OB,LeftTriangleBar:PB,LeftTriangle:FB,LeftTriangleEqual:NB,LeftUpDownVector:$B,LeftUpTeeVector:BB,LeftUpVectorBar:jB,LeftUpVector:zB,LeftVectorBar:UB,LeftVector:GB,lEg:qB,leg:HB,leq:VB,leqq:WB,leqslant:YB,lescc:XB,les:ZB,lesdot:KB,lesdoto:JB,lesdotor:QB,lesg:ej,lesges:tj,lessapprox:ij,lessdot:rj,lesseqgtr:nj,lesseqqgtr:sj,LessEqualGreater:oj,LessFullEqual:aj,LessGreater:lj,lessgtr:uj,LessLess:cj,lesssim:hj,LessSlantEqual:dj,LessTilde:fj,lfisht:pj,lfloor:mj,Lfr:gj,lfr:yj,lg:vj,lgE:bj,lHar:_j,lhard:xj,lharu:wj,lharul:Ej,lhblk:Sj,LJcy:Cj,ljcy:Tj,llarr:Aj,ll:kj,Ll:Dj,llcorner:Mj,Lleftarrow:Lj,llhard:Rj,lltri:Ij,Lmidot:Oj,lmidot:Pj,lmoustache:Fj,lmoust:Nj,lnap:$j,lnapprox:Bj,lne:jj,lnE:zj,lneq:Uj,lneqq:Gj,lnsim:qj,loang:Hj,loarr:Vj,lobrk:Wj,longleftarrow:Yj,LongLeftArrow:Xj,Longleftarrow:Zj,longleftrightarrow:Kj,LongLeftRightArrow:Jj,Longleftrightarrow:Qj,longmapsto:e9,longrightarrow:t9,LongRightArrow:i9,Longrightarrow:r9,looparrowleft:n9,looparrowright:s9,lopar:o9,Lopf:a9,lopf:l9,loplus:u9,lotimes:c9,lowast:h9,lowbar:d9,LowerLeftArrow:f9,LowerRightArrow:p9,loz:m9,lozenge:g9,lozf:y9,lpar:v9,lparlt:b9,lrarr:_9,lrcorner:x9,lrhar:w9,lrhard:E9,lrm:S9,lrtri:C9,lsaquo:T9,lscr:A9,Lscr:k9,lsh:D9,Lsh:M9,lsim:L9,lsime:R9,lsimg:I9,lsqb:O9,lsquo:P9,lsquor:F9,Lstrok:N9,lstrok:$9,ltcc:B9,ltcir:j9,lt:z9,LT:U9,Lt:G9,ltdot:q9,lthree:H9,ltimes:V9,ltlarr:W9,ltquest:Y9,ltri:X9,ltrie:Z9,ltrif:K9,ltrPar:J9,lurdshar:Q9,luruhar:ez,lvertneqq:tz,lvnE:iz,macr:rz,male:nz,malt:sz,maltese:oz,Map:"",map:az,mapsto:lz,mapstodown:uz,mapstoleft:cz,mapstoup:hz,marker:dz,mcomma:fz,Mcy:pz,mcy:mz,mdash:gz,mDDot:yz,measuredangle:vz,MediumSpace:bz,Mellintrf:_z,Mfr:xz,mfr:wz,mho:Ez,micro:Sz,midast:Cz,midcir:Tz,mid:Az,middot:kz,minusb:Dz,minus:Mz,minusd:Lz,minusdu:Rz,MinusPlus:Iz,mlcp:Oz,mldr:Pz,mnplus:Fz,models:Nz,Mopf:$z,mopf:Bz,mp:jz,mscr:zz,Mscr:Uz,mstpos:Gz,Mu:qz,mu:Hz,multimap:Vz,mumap:Wz,nabla:Yz,Nacute:Xz,nacute:Zz,nang:Kz,nap:Jz,napE:Qz,napid:e7,napos:t7,napprox:i7,natural:r7,naturals:n7,natur:s7,nbsp:o7,nbump:a7,nbumpe:l7,ncap:u7,Ncaron:c7,ncaron:h7,Ncedil:d7,ncedil:f7,ncong:p7,ncongdot:m7,ncup:g7,Ncy:y7,ncy:v7,ndash:b7,nearhk:_7,nearr:x7,neArr:w7,nearrow:E7,ne:S7,nedot:C7,NegativeMediumSpace:T7,NegativeThickSpace:A7,NegativeThinSpace:k7,NegativeVeryThinSpace:D7,nequiv:M7,nesear:L7,nesim:R7,NestedGreaterGreater:I7,NestedLessLess:O7,NewLine:P7,nexist:F7,nexists:N7,Nfr:$7,nfr:B7,ngE:j7,nge:z7,ngeq:U7,ngeqq:G7,ngeqslant:q7,nges:H7,nGg:V7,ngsim:W7,nGt:Y7,ngt:X7,ngtr:Z7,nGtv:K7,nharr:J7,nhArr:Q7,nhpar:eU,ni:tU,nis:iU,nisd:rU,niv:nU,NJcy:sU,njcy:oU,nlarr:aU,nlArr:lU,nldr:uU,nlE:cU,nle:hU,nleftarrow:dU,nLeftarrow:fU,nleftrightarrow:pU,nLeftrightarrow:mU,nleq:gU,nleqq:yU,nleqslant:vU,nles:bU,nless:_U,nLl:xU,nlsim:wU,nLt:EU,nlt:SU,nltri:CU,nltrie:TU,nLtv:AU,nmid:kU,NoBreak:DU,NonBreakingSpace:MU,nopf:LU,Nopf:RU,Not:IU,not:OU,NotCongruent:PU,NotCupCap:FU,NotDoubleVerticalBar:NU,NotElement:$U,NotEqual:BU,NotEqualTilde:jU,NotExists:zU,NotGreater:UU,NotGreaterEqual:GU,NotGreaterFullEqual:qU,NotGreaterGreater:HU,NotGreaterLess:VU,NotGreaterSlantEqual:WU,NotGreaterTilde:YU,NotHumpDownHump:XU,NotHumpEqual:ZU,notin:KU,notindot:JU,notinE:QU,notinva:eG,notinvb:tG,notinvc:iG,NotLeftTriangleBar:rG,NotLeftTriangle:nG,NotLeftTriangleEqual:sG,NotLess:oG,NotLessEqual:aG,NotLessGreater:lG,NotLessLess:uG,NotLessSlantEqual:cG,NotLessTilde:hG,NotNestedGreaterGreater:dG,NotNestedLessLess:fG,notni:pG,notniva:mG,notnivb:gG,notnivc:yG,NotPrecedes:vG,NotPrecedesEqual:bG,NotPrecedesSlantEqual:_G,NotReverseElement:xG,NotRightTriangleBar:wG,NotRightTriangle:EG,NotRightTriangleEqual:SG,NotSquareSubset:CG,NotSquareSubsetEqual:TG,NotSquareSuperset:AG,NotSquareSupersetEqual:kG,NotSubset:DG,NotSubsetEqual:MG,NotSucceeds:LG,NotSucceedsEqual:RG,NotSucceedsSlantEqual:IG,NotSucceedsTilde:OG,NotSuperset:PG,NotSupersetEqual:FG,NotTilde:NG,NotTildeEqual:$G,NotTildeFullEqual:BG,NotTildeTilde:jG,NotVerticalBar:zG,nparallel:UG,npar:GG,nparsl:qG,npart:HG,npolint:VG,npr:WG,nprcue:YG,nprec:XG,npreceq:ZG,npre:KG,nrarrc:JG,nrarr:QG,nrArr:eq,nrarrw:tq,nrightarrow:iq,nRightarrow:rq,nrtri:nq,nrtrie:sq,nsc:oq,nsccue:aq,nsce:lq,Nscr:uq,nscr:cq,nshortmid:hq,nshortparallel:dq,nsim:fq,nsime:pq,nsimeq:mq,nsmid:gq,nspar:yq,nsqsube:vq,nsqsupe:bq,nsub:_q,nsubE:xq,nsube:wq,nsubset:Eq,nsubseteq:Sq,nsubseteqq:Cq,nsucc:Tq,nsucceq:Aq,nsup:kq,nsupE:Dq,nsupe:Mq,nsupset:Lq,nsupseteq:Rq,nsupseteqq:Iq,ntgl:Oq,Ntilde:Pq,ntilde:Fq,ntlg:Nq,ntriangleleft:$q,ntrianglelefteq:Bq,ntriangleright:jq,ntrianglerighteq:zq,Nu:Uq,nu:Gq,num:qq,numero:Hq,numsp:Vq,nvap:Wq,nvdash:Yq,nvDash:Xq,nVdash:Zq,nVDash:Kq,nvge:Jq,nvgt:Qq,nvHarr:eH,nvinfin:tH,nvlArr:iH,nvle:rH,nvlt:nH,nvltrie:sH,nvrArr:oH,nvrtrie:aH,nvsim:lH,nwarhk:uH,nwarr:cH,nwArr:hH,nwarrow:dH,nwnear:fH,Oacute:pH,oacute:mH,oast:gH,Ocirc:yH,ocirc:vH,ocir:bH,Ocy:_H,ocy:xH,odash:wH,Odblac:EH,odblac:SH,odiv:CH,odot:TH,odsold:AH,OElig:kH,oelig:DH,ofcir:MH,Ofr:LH,ofr:RH,ogon:IH,Ograve:OH,ograve:PH,ogt:FH,ohbar:NH,ohm:$H,oint:BH,olarr:jH,olcir:zH,olcross:UH,oline:GH,olt:qH,Omacr:HH,omacr:VH,Omega:WH,omega:YH,Omicron:XH,omicron:ZH,omid:KH,ominus:JH,Oopf:QH,oopf:eV,opar:tV,OpenCurlyDoubleQuote:iV,OpenCurlyQuote:rV,operp:nV,oplus:sV,orarr:oV,Or:aV,or:lV,ord:uV,order:cV,orderof:hV,ordf:dV,ordm:fV,origof:pV,oror:mV,orslope:gV,orv:yV,oS:vV,Oscr:bV,oscr:_V,Oslash:xV,oslash:wV,osol:EV,Otilde:SV,otilde:CV,otimesas:TV,Otimes:AV,otimes:kV,Ouml:DV,ouml:MV,ovbar:LV,OverBar:RV,OverBrace:IV,OverBracket:OV,OverParenthesis:PV,para:FV,parallel:NV,par:$V,parsim:BV,parsl:jV,part:zV,PartialD:UV,Pcy:GV,pcy:qV,percnt:HV,period:VV,permil:WV,perp:YV,pertenk:XV,Pfr:ZV,pfr:KV,Phi:JV,phi:QV,phiv:eW,phmmat:tW,phone:iW,Pi:rW,pi:nW,pitchfork:sW,piv:oW,planck:aW,planckh:lW,plankv:uW,plusacir:cW,plusb:hW,pluscir:dW,plus:fW,plusdo:pW,plusdu:mW,pluse:gW,PlusMinus:yW,plusmn:vW,plussim:bW,plustwo:_W,pm:xW,Poincareplane:wW,pointint:EW,popf:SW,Popf:CW,pound:TW,prap:AW,Pr:kW,pr:DW,prcue:MW,precapprox:LW,prec:RW,preccurlyeq:IW,Precedes:OW,PrecedesEqual:PW,PrecedesSlantEqual:FW,PrecedesTilde:NW,preceq:$W,precnapprox:BW,precneqq:jW,precnsim:zW,pre:UW,prE:GW,precsim:qW,prime:HW,Prime:VW,primes:WW,prnap:YW,prnE:XW,prnsim:ZW,prod:KW,Product:JW,profalar:QW,profline:eY,profsurf:tY,prop:iY,Proportional:rY,Proportion:nY,propto:sY,prsim:oY,prurel:aY,Pscr:lY,pscr:uY,Psi:cY,psi:hY,puncsp:dY,Qfr:fY,qfr:pY,qint:mY,qopf:gY,Qopf:yY,qprime:vY,Qscr:bY,qscr:_Y,quaternions:xY,quatint:wY,quest:EY,questeq:SY,quot:CY,QUOT:TY,rAarr:AY,race:kY,Racute:DY,racute:MY,radic:LY,raemptyv:RY,rang:IY,Rang:OY,rangd:PY,range:FY,rangle:NY,raquo:$Y,rarrap:BY,rarrb:jY,rarrbfs:zY,rarrc:UY,rarr:GY,Rarr:qY,rArr:HY,rarrfs:VY,rarrhk:WY,rarrlp:YY,rarrpl:XY,rarrsim:ZY,Rarrtl:KY,rarrtl:JY,rarrw:QY,ratail:eX,rAtail:tX,ratio:iX,rationals:rX,rbarr:nX,rBarr:sX,RBarr:oX,rbbrk:aX,rbrace:lX,rbrack:uX,rbrke:cX,rbrksld:hX,rbrkslu:dX,Rcaron:fX,rcaron:pX,Rcedil:mX,rcedil:gX,rceil:yX,rcub:vX,Rcy:bX,rcy:_X,rdca:xX,rdldhar:wX,rdquo:EX,rdquor:SX,rdsh:CX,real:TX,realine:AX,realpart:kX,reals:DX,Re:MX,rect:LX,reg:RX,REG:IX,ReverseElement:OX,ReverseEquilibrium:PX,ReverseUpEquilibrium:FX,rfisht:NX,rfloor:$X,rfr:BX,Rfr:jX,rHar:zX,rhard:UX,rharu:GX,rharul:qX,Rho:HX,rho:VX,rhov:WX,RightAngleBracket:YX,RightArrowBar:XX,rightarrow:ZX,RightArrow:KX,Rightarrow:JX,RightArrowLeftArrow:QX,rightarrowtail:eZ,RightCeiling:tZ,RightDoubleBracket:iZ,RightDownTeeVector:rZ,RightDownVectorBar:nZ,RightDownVector:sZ,RightFloor:oZ,rightharpoondown:aZ,rightharpoonup:lZ,rightleftarrows:uZ,rightleftharpoons:cZ,rightrightarrows:hZ,rightsquigarrow:dZ,RightTeeArrow:fZ,RightTee:pZ,RightTeeVector:mZ,rightthreetimes:gZ,RightTriangleBar:yZ,RightTriangle:vZ,RightTriangleEqual:bZ,RightUpDownVector:_Z,RightUpTeeVector:xZ,RightUpVectorBar:wZ,RightUpVector:EZ,RightVectorBar:SZ,RightVector:CZ,ring:TZ,risingdotseq:AZ,rlarr:kZ,rlhar:DZ,rlm:MZ,rmoustache:LZ,rmoust:RZ,rnmid:IZ,roang:OZ,roarr:PZ,robrk:FZ,ropar:NZ,ropf:$Z,Ropf:BZ,roplus:jZ,rotimes:zZ,RoundImplies:UZ,rpar:GZ,rpargt:qZ,rppolint:HZ,rrarr:VZ,Rrightarrow:WZ,rsaquo:YZ,rscr:XZ,Rscr:ZZ,rsh:KZ,Rsh:JZ,rsqb:QZ,rsquo:eK,rsquor:tK,rthree:iK,rtimes:rK,rtri:nK,rtrie:sK,rtrif:oK,rtriltri:aK,RuleDelayed:lK,ruluhar:uK,rx:cK,Sacute:hK,sacute:dK,sbquo:fK,scap:pK,Scaron:mK,scaron:gK,Sc:yK,sc:vK,sccue:bK,sce:_K,scE:xK,Scedil:wK,scedil:EK,Scirc:SK,scirc:CK,scnap:TK,scnE:AK,scnsim:kK,scpolint:DK,scsim:MK,Scy:LK,scy:RK,sdotb:IK,sdot:OK,sdote:PK,searhk:FK,searr:NK,seArr:$K,searrow:BK,sect:jK,semi:zK,seswar:UK,setminus:GK,setmn:qK,sext:HK,Sfr:VK,sfr:WK,sfrown:YK,sharp:XK,SHCHcy:ZK,shchcy:KK,SHcy:JK,shcy:QK,ShortDownArrow:eJ,ShortLeftArrow:tJ,shortmid:iJ,shortparallel:rJ,ShortRightArrow:nJ,ShortUpArrow:sJ,shy:oJ,Sigma:aJ,sigma:lJ,sigmaf:uJ,sigmav:cJ,sim:hJ,simdot:dJ,sime:fJ,simeq:pJ,simg:mJ,simgE:gJ,siml:yJ,simlE:vJ,simne:bJ,simplus:_J,simrarr:xJ,slarr:wJ,SmallCircle:EJ,smallsetminus:SJ,smashp:CJ,smeparsl:TJ,smid:AJ,smile:kJ,smt:DJ,smte:MJ,smtes:LJ,SOFTcy:RJ,softcy:IJ,solbar:OJ,solb:PJ,sol:FJ,Sopf:NJ,sopf:$J,spades:BJ,spadesuit:jJ,spar:zJ,sqcap:UJ,sqcaps:GJ,sqcup:qJ,sqcups:HJ,Sqrt:VJ,sqsub:WJ,sqsube:YJ,sqsubset:XJ,sqsubseteq:ZJ,sqsup:KJ,sqsupe:JJ,sqsupset:QJ,sqsupseteq:eQ,square:tQ,Square:iQ,SquareIntersection:rQ,SquareSubset:nQ,SquareSubsetEqual:sQ,SquareSuperset:oQ,SquareSupersetEqual:aQ,SquareUnion:lQ,squarf:uQ,squ:cQ,squf:hQ,srarr:dQ,Sscr:fQ,sscr:pQ,ssetmn:mQ,ssmile:gQ,sstarf:yQ,Star:vQ,star:bQ,starf:_Q,straightepsilon:xQ,straightphi:wQ,strns:EQ,sub:SQ,Sub:CQ,subdot:TQ,subE:AQ,sube:kQ,subedot:DQ,submult:MQ,subnE:LQ,subne:RQ,subplus:IQ,subrarr:OQ,subset:PQ,Subset:FQ,subseteq:NQ,subseteqq:$Q,SubsetEqual:BQ,subsetneq:jQ,subsetneqq:zQ,subsim:UQ,subsub:GQ,subsup:qQ,succapprox:HQ,succ:VQ,succcurlyeq:WQ,Succeeds:YQ,SucceedsEqual:XQ,SucceedsSlantEqual:ZQ,SucceedsTilde:KQ,succeq:JQ,succnapprox:QQ,succneqq:eee,succnsim:tee,succsim:iee,SuchThat:ree,sum:nee,Sum:see,sung:oee,sup1:aee,sup2:lee,sup3:uee,sup:cee,Sup:hee,supdot:dee,supdsub:fee,supE:pee,supe:mee,supedot:gee,Superset:yee,SupersetEqual:vee,suphsol:bee,suphsub:_ee,suplarr:xee,supmult:wee,supnE:Eee,supne:See,supplus:Cee,supset:Tee,Supset:Aee,supseteq:kee,supseteqq:Dee,supsetneq:Mee,supsetneqq:Lee,supsim:Ree,supsub:Iee,supsup:Oee,swarhk:Pee,swarr:Fee,swArr:Nee,swarrow:$ee,swnwar:Bee,szlig:jee,Tab:zee,target:Uee,Tau:Gee,tau:qee,tbrk:Hee,Tcaron:Vee,tcaron:Wee,Tcedil:Yee,tcedil:Xee,Tcy:Zee,tcy:Kee,tdot:Jee,telrec:Qee,Tfr:ete,tfr:tte,there4:ite,therefore:rte,Therefore:nte,Theta:ste,theta:ote,thetasym:ate,thetav:lte,thickapprox:ute,thicksim:cte,ThickSpace:hte,ThinSpace:dte,thinsp:fte,thkap:pte,thksim:mte,THORN:gte,thorn:yte,tilde:vte,Tilde:bte,TildeEqual:_te,TildeFullEqual:xte,TildeTilde:wte,timesbar:Ete,timesb:Ste,times:Cte,timesd:Tte,tint:Ate,toea:kte,topbot:Dte,topcir:Mte,top:Lte,Topf:Rte,topf:Ite,topfork:Ote,tosa:Pte,tprime:Fte,trade:Nte,TRADE:$te,triangle:Bte,triangledown:jte,triangleleft:zte,trianglelefteq:Ute,triangleq:Gte,triangleright:qte,trianglerighteq:Hte,tridot:Vte,trie:Wte,triminus:Yte,TripleDot:Xte,triplus:Zte,trisb:Kte,tritime:Jte,trpezium:Qte,Tscr:eie,tscr:tie,TScy:iie,tscy:rie,TSHcy:nie,tshcy:sie,Tstrok:oie,tstrok:aie,twixt:lie,twoheadleftarrow:uie,twoheadrightarrow:cie,Uacute:hie,uacute:die,uarr:fie,Uarr:pie,uArr:mie,Uarrocir:gie,Ubrcy:yie,ubrcy:vie,Ubreve:bie,ubreve:_ie,Ucirc:xie,ucirc:wie,Ucy:Eie,ucy:Sie,udarr:Cie,Udblac:Tie,udblac:Aie,udhar:kie,ufisht:Die,Ufr:Mie,ufr:Lie,Ugrave:Rie,ugrave:Iie,uHar:Oie,uharl:Pie,uharr:Fie,uhblk:Nie,ulcorn:$ie,ulcorner:Bie,ulcrop:jie,ultri:zie,Umacr:Uie,umacr:Gie,uml:qie,UnderBar:Hie,UnderBrace:Vie,UnderBracket:Wie,UnderParenthesis:Yie,Union:Xie,UnionPlus:Zie,Uogon:Kie,uogon:Jie,Uopf:Qie,uopf:ere,UpArrowBar:tre,uparrow:ire,UpArrow:rre,Uparrow:nre,UpArrowDownArrow:sre,updownarrow:ore,UpDownArrow:are,Updownarrow:lre,UpEquilibrium:ure,upharpoonleft:cre,upharpoonright:hre,uplus:dre,UpperLeftArrow:fre,UpperRightArrow:pre,upsi:mre,Upsi:gre,upsih:yre,Upsilon:vre,upsilon:bre,UpTeeArrow:_re,UpTee:xre,upuparrows:wre,urcorn:Ere,urcorner:Sre,urcrop:Cre,Uring:Tre,uring:Are,urtri:kre,Uscr:Dre,uscr:Mre,utdot:Lre,Utilde:Rre,utilde:Ire,utri:Ore,utrif:Pre,uuarr:Fre,Uuml:Nre,uuml:$re,uwangle:Bre,vangrt:jre,varepsilon:zre,varkappa:Ure,varnothing:Gre,varphi:qre,varpi:Hre,varpropto:Vre,varr:Wre,vArr:Yre,varrho:Xre,varsigma:Zre,varsubsetneq:Kre,varsubsetneqq:Jre,varsupsetneq:Qre,varsupsetneqq:ene,vartheta:tne,vartriangleleft:ine,vartriangleright:rne,vBar:nne,Vbar:sne,vBarv:one,Vcy:ane,vcy:lne,vdash:une,vDash:cne,Vdash:hne,VDash:dne,Vdashl:fne,veebar:pne,vee:mne,Vee:gne,veeeq:yne,vellip:vne,verbar:bne,Verbar:_ne,vert:xne,Vert:wne,VerticalBar:Ene,VerticalLine:Sne,VerticalSeparator:Cne,VerticalTilde:Tne,VeryThinSpace:Ane,Vfr:kne,vfr:Dne,vltri:Mne,vnsub:Lne,vnsup:Rne,Vopf:Ine,vopf:One,vprop:Pne,vrtri:Fne,Vscr:Nne,vscr:$ne,vsubnE:Bne,vsubne:jne,vsupnE:zne,vsupne:Une,Vvdash:Gne,vzigzag:qne,Wcirc:Hne,wcirc:Vne,wedbar:Wne,wedge:Yne,Wedge:Xne,wedgeq:Zne,weierp:Kne,Wfr:Jne,wfr:Qne,Wopf:ese,wopf:tse,wp:ise,wr:rse,wreath:nse,Wscr:sse,wscr:ose,xcap:ase,xcirc:lse,xcup:use,xdtri:cse,Xfr:hse,xfr:dse,xharr:fse,xhArr:pse,Xi:mse,xi:gse,xlarr:yse,xlArr:vse,xmap:bse,xnis:_se,xodot:xse,Xopf:wse,xopf:Ese,xoplus:Sse,xotime:Cse,xrarr:Tse,xrArr:Ase,Xscr:kse,xscr:Dse,xsqcup:Mse,xuplus:Lse,xutri:Rse,xvee:Ise,xwedge:Ose,Yacute:Pse,yacute:Fse,YAcy:Nse,yacy:$se,Ycirc:Bse,ycirc:jse,Ycy:zse,ycy:Use,yen:Gse,Yfr:qse,yfr:Hse,YIcy:Vse,yicy:Wse,Yopf:Yse,yopf:Xse,Yscr:Zse,yscr:Kse,YUcy:Jse,yucy:Qse,yuml:eoe,Yuml:toe,Zacute:ioe,zacute:roe,Zcaron:noe,zcaron:soe,Zcy:ooe,zcy:aoe,Zdot:loe,zdot:uoe,zeetrf:coe,ZeroWidthSpace:hoe,Zeta:doe,zeta:foe,zfr:poe,Zfr:moe,ZHcy:goe,zhcy:yoe,zigrarr:voe,zopf:boe,Zopf:_oe,Zscr:xoe,zscr:woe,zwj:Eoe,zwnj:Soe},$Te=Object.freeze({__proto__:null,Aacute:b,aacute:_,Abreve:E,abreve:C,ac:T,acd:D,acE:M,Acirc:A,acirc:I,acute:P,Acy:U,acy:K,AElig:L,aelig:F,af:$,Afr:H,afr:V,Agrave:J,agrave:ee,alefsym:ie,aleph:de,Alpha:te,alpha:z,Amacr:ne,amacr:ve,amalg:$e,amp:Xe,AMP:ot,andand:Be,And:He,and:st,andd:xt,andslope:kt,andv:Tt,ang:Ei,ange:si,angle:ur,angmsdaa:Ve,angmsdab:fe,angmsdac:oe,angmsdad:se,angmsdae:pe,angmsdaf:R,angmsdag:j,angmsdah:Z,angmsd:Q,angrt:ge,angrtvb:be,angrtvbd:Ce,angsph:G,angst:re,angzarr:he,Aogon:ce,aogon:Te,Aopf:Ae,aopf:Se,apacir:De,ap:Oe,apE:Ge,ape:et,apid:ht,apos:Ut,ApplyFunction:gt,approx:qt,approxeq:Kt,Aring:It,aring:Vt,Ascr:Yt,ascr:Yi,Assign:vr,ast:Jr,asymp:Rr,asympeq:cr,Atilde:Jt,atilde:ir,Auml:Ir,auml:hi,awconint:Fn,awint:rr,backcong:Nn,backepsilon:nr,backprime:$r,backsim:bo,backsimeq:ye,Backslash:ke,Barv:rt,barvee:Ze,barwed:bt,Barwed:ti,barwedge:di,bbrk:vt,bbrktbrk:Ke,bcong:oi,Bcy:gi,bcy:Ot,bdquo:jt,becaus:Er,because:mn,Because:ni,bemptyv:qe,bepsi:dt,bernou:Xi,Bernoullis:un,Beta:Sr,beta:Or,beth:gr,between:Ft,Bfr:_n,bfr:Kn,bigcap:xn,bigcirc:_o,bigcup:Ho,bigodot:xo,bigoplus:hl,bigotimes:xs,bigsqcup:Vo,bigstar:ma,bigtriangledown:Pr,bigtriangleup:wo,biguplus:jl,bigvee:js,bigwedge:Ms,bkarow:eo,blacklozenge:zs,blacksquare:Wo,blacktriangle:dl,blacktriangledown:to,blacktriangleleft:zl,blacktriangleright:Jn,blank:Yn,blk12:Eo,blk14:io,blk34:Ma,block:fl,bne:ls,bnequiv:pl,bNot:So,bnot:Qn,Bopf:La,bopf:Ul,bot:Rt,bottom:X,bowtie:me,boxbox:Ne,boxdl:yt,boxdL:pi,boxDl:Gt,boxDL:Fi,boxdr:hr,boxdR:Br,boxDr:Si,boxDR:$n,boxh:es,boxH:br,boxhd:gn,boxHd:Us,boxhD:Yo,boxHD:us,boxhu:cs,boxHu:Ra,boxhU:Wr,boxHU:Ia,boxminus:oh,boxplus:Gl,boxtimes:ah,boxul:Sd,boxuL:lh,boxUl:Cd,boxUL:Td,boxur:Ad,boxuR:uh,boxUr:ch,boxUR:kd,boxv:vu,boxV:ga,boxvh:ql,boxvH:Dd,boxVh:yp,boxVH:ya,boxvl:Hl,boxvL:Re,boxVl:pt,boxVL:Wt,boxvr:_r,boxvR:Qr,boxVr:$i,boxVR:hs,bprime:nc,breve:qv,Breve:$w,brvbar:Hv,bscr:Vv,Bscr:Md,bsemi:Wv,bsim:Yv,bsime:yg,bsolb:vp,bsol:Xv,bsolhsub:bp,bull:Oa,bullet:Zv,bump:vg,bumpE:bg,bumpe:Kv,Bumpeq:Jv,bumpeq:_g,Cacute:Bw,cacute:jw,capand:zw,capbrcup:hh,capcap:dh,cap:xg,Cap:wg,capcup:Qv,capdot:Eg,CapitalDifferentialD:sc,caps:oc,caret:ro,caron:bu,Cayleys:_u,ccaps:_p,Ccaron:eb,ccaron:Ld,Ccedil:tb,ccedil:Sg,Ccirc:xp,ccirc:Uw,Cconint:Cg,ccups:ib,ccupssm:Tg,Cdot:Ag,cdot:fh,cedil:wp,Cedilla:rb,cemptyv:Ep,cent:kg,centerdot:Dg,CenterDot:ph,cfr:Rd,Cfr:Sp,CHcy:nb,chcy:Id,check:sb,checkmark:ac,Chi:Od,chi:lc,circ:Pd,circeq:mh,circlearrowleft:ob,circlearrowright:ab,circledast:lb,circledcirc:Gw,circleddash:uc,CircleDot:cc,circledR:qw,circledS:Hw,CircleMinus:Vw,CirclePlus:Ww,CircleTimes:Yw,cir:Co,cirE:ds,cire:Gs,cirfnint:fs,cirmid:Fd,cirscir:Xw,ClockwiseContourIntegral:Cp,CloseCurlyDoubleQuote:Zw,CloseCurlyQuote:Mg,clubs:ub,clubsuit:Lg,colon:Rg,Colon:Ig,Colone:cb,colone:hb,coloneq:Og,comma:db,commat:Nd,comp:Kw,compfn:Tp,complement:Vl,complexes:fb,cong:Jw,congdot:pb,Congruent:Xo,conint:Cr,Conint:Pa,ContourIntegral:xu,copf:wu,Copf:mb,coprod:Pg,Coproduct:gb,copy:Fg,COPY:$d,copysr:yb,CounterClockwiseContourIntegral:Ng,crarr:Eu,cross:vb,Cross:bb,Cscr:Ap,cscr:$g,csub:_b,csube:xb,csup:Qw,csupe:kp,ctdot:wb,cudarrl:eE,cudarrr:Eb,cuepr:gh,cuesc:Bg,cularr:Dp,cularrp:Sb,cupbrcap:jg,cupcap:Cb,CupCap:Tb,cup:Ls,Cup:Mp,cupcup:Ab,cupdot:kb,cupor:Db,cups:yh,curarr:Lp,curarrm:Mb,curlyeqprec:Lb,curlyeqsucc:Rb,curlyvee:vh,curlywedge:Ib,curren:Rp,curvearrowleft:Ob,curvearrowright:Bd,cuvee:bh,cuwed:Pb,cwconint:Fb,cwint:Nb,cylcty:jd,dagger:zd,Dagger:Ud,daleth:Gd,darr:$b,Darr:Bb,dArr:Su,dash:_h,Dashv:qd,dashv:jb,dbkarow:tE,dblac:iE,Dcaron:no,dcaron:zb,Dcy:rE,dcy:Ub,ddagger:Gb,ddarr:qb,DD:nE,dd:sE,DDotrahd:Cu,ddotseq:Hd,deg:Ip,Del:Vd,Delta:Wl,delta:oE,demptyv:aE,dfisht:xh,Dfr:Hb,dfr:Vb,dHar:Wb,dharl:Op,dharr:wh,DiacriticalAcute:zg,DiacriticalDot:Ug,DiacriticalDoubleAcute:Gg,DiacriticalGrave:Wd,DiacriticalTilde:Yb,diam:Xb,diamond:Pp,Diamond:lE,diamondsuit:Yd,diams:Zb,die:Kb,DifferentialD:qg,digamma:Jb,disin:Qb,div:e1,divide:Xd,divideontimes:Zd,divonx:Hg,DJcy:t1,djcy:i1,dlcorn:r1,dlcrop:Vg,dollar:n1,Dopf:s1,dopf:Eh,Dot:o1,dot:Fp,DotDot:uE,doteq:cE,doteqdot:wn,DotEqual:Wg,dotminus:Kd,dotplus:Fa,dotsquare:Np,doublebarwedge:Yg,DoubleContourIntegral:a1,DoubleDot:l1,DoubleDownArrow:u1,DoubleLeftArrow:c1,DoubleLeftRightArrow:h1,DoubleLeftTee:Xg,DoubleLongLeftArrow:d1,DoubleLongLeftRightArrow:jr,DoubleLongRightArrow:f1,DoubleRightArrow:Sh,DoubleRightTee:$p,DoubleUpArrow:hE,DoubleUpDownArrow:Bn,DoubleVerticalBar:dE,DownArrowBar:Bp,downarrow:f,DownArrow:y,Downarrow:w,DownArrowUpArrow:x,DownBreve:S,downdownarrows:O,downharpoonleft:N,downharpoonright:B,DownLeftRightVector:W,DownLeftTeeVector:Y,DownLeftVectorBar:le,DownLeftVector:ue,DownRightTeeVector:xe,DownRightVectorBar:_e,DownRightVector:Pe,DownTeeArrow:Fe,DownTee:Ie,drbkarow:ze,drcorn:Je,drcrop:Ye,Dscr:ct,dscr:lt,DScy:ft,dscy:li,dsol:Ct,Dstrok:Oi,dstrok:ii,dtdot:Ki,dtri:Tr,dtrif:Ji,duarr:Ui,duhar:Qi,dwangle:Ci,DZcy:Ar,dzcy:vi,dzigrarr:Vi,Eacute:Di,eacute:dr,easter:qs,Ecaron:kr,ecaron:Rs,Ecirc:Is,ecirc:yn,ecir:Hs,ecolon:va,Ecy:ws,ecy:Na,eDDot:jp,Edot:p1,edot:hc,eDot:To,ee:Tu,efDot:fE,Efr:Ch,efr:Zg,eg:Jd,Egrave:zp,egrave:Qd,egs:Kg,egsdot:m1,el:Jg,Element:g1,elinters:y1,ell:v1,els:iF,elsdot:rF,Emacr:nF,emacr:sF,empty:oF,emptyset:aF,EmptySmallSquare:lF,emptyv:uF,EmptyVerySmallSquare:cF,emsp13:hF,emsp14:dF,emsp:fF,ENG:pF,eng:mF,ensp:gF,Eogon:yF,eogon:vF,Eopf:bF,eopf:_F,epar:xF,eparsl:wF,eplus:EF,epsi:SF,Epsilon:CF,epsilon:TF,epsiv:AF,eqcirc:kF,eqcolon:DF,eqsim:MF,eqslantgtr:LF,eqslantless:RF,Equal:IF,equals:OF,EqualTilde:PF,equest:FF,Equilibrium:NF,equiv:$F,equivDD:BF,eqvparsl:jF,erarr:zF,erDot:UF,escr:GF,Escr:qF,esdot:HF,Esim:VF,esim:WF,Eta:YF,eta:XF,ETH:ZF,eth:KF,Euml:JF,euml:QF,euro:eN,excl:tN,exist:iN,Exists:rN,expectation:nN,exponentiale:sN,ExponentialE:oN,fallingdotseq:aN,Fcy:lN,fcy:uN,female:cN,ffilig:hN,fflig:dN,ffllig:fN,Ffr:pN,ffr:mN,filig:gN,FilledSmallSquare:yN,FilledVerySmallSquare:vN,fjlig:bN,flat:_N,fllig:xN,fltns:wN,fnof:EN,Fopf:SN,fopf:CN,forall:TN,ForAll:AN,fork:kN,forkv:DN,Fouriertrf:MN,fpartint:LN,frac12:RN,frac13:IN,frac14:ON,frac15:PN,frac16:FN,frac18:NN,frac23:$N,frac25:BN,frac34:jN,frac35:zN,frac38:UN,frac45:GN,frac56:qN,frac58:HN,frac78:VN,frasl:WN,frown:YN,fscr:XN,Fscr:ZN,gacute:KN,Gamma:JN,gamma:QN,Gammad:e5,gammad:t5,gap:i5,Gbreve:r5,gbreve:n5,Gcedil:s5,Gcirc:o5,gcirc:a5,Gcy:l5,gcy:u5,Gdot:c5,gdot:h5,ge:d5,gE:f5,gEl:p5,gel:m5,geq:g5,geqq:y5,geqslant:v5,gescc:b5,ges:_5,gesdot:x5,gesdoto:w5,gesdotol:E5,gesl:S5,gesles:C5,Gfr:T5,gfr:A5,gg:k5,Gg:D5,ggg:M5,gimel:L5,GJcy:R5,gjcy:I5,gla:O5,gl:P5,glE:F5,glj:N5,gnap:$5,gnapprox:B5,gne:j5,gnE:z5,gneq:U5,gneqq:G5,gnsim:q5,Gopf:H5,gopf:V5,grave:W5,GreaterEqual:Y5,GreaterEqualLess:X5,GreaterFullEqual:Z5,GreaterGreater:K5,GreaterLess:J5,GreaterSlantEqual:Q5,GreaterTilde:e4,Gscr:t4,gscr:i4,gsim:r4,gsime:n4,gsiml:s4,gtcc:o4,gtcir:a4,gt:l4,GT:u4,Gt:c4,gtdot:h4,gtlPar:d4,gtquest:f4,gtrapprox:p4,gtrarr:m4,gtrdot:g4,gtreqless:y4,gtreqqless:v4,gtrless:b4,gtrsim:_4,gvertneqq:x4,gvnE:w4,Hacek:E4,hairsp:S4,half:C4,hamilt:T4,HARDcy:A4,hardcy:k4,harrcir:D4,harr:M4,hArr:L4,harrw:R4,Hat:I4,hbar:O4,Hcirc:P4,hcirc:F4,hearts:N4,heartsuit:$4,hellip:B4,hercon:j4,hfr:z4,Hfr:U4,HilbertSpace:G4,hksearow:q4,hkswarow:H4,hoarr:V4,homtht:W4,hookleftarrow:Y4,hookrightarrow:X4,hopf:Z4,Hopf:K4,horbar:J4,HorizontalLine:Q4,hscr:e6,Hscr:t6,hslash:i6,Hstrok:r6,hstrok:n6,HumpDownHump:s6,HumpEqual:o6,hybull:a6,hyphen:l6,Iacute:u6,iacute:c6,ic:h6,Icirc:d6,icirc:f6,Icy:p6,icy:m6,Idot:g6,IEcy:y6,iecy:v6,iexcl:b6,iff:_6,ifr:x6,Ifr:w6,Igrave:E6,igrave:S6,ii:C6,iiiint:T6,iiint:A6,iinfin:k6,iiota:D6,IJlig:M6,ijlig:L6,Imacr:R6,imacr:I6,image:O6,ImaginaryI:P6,imagline:F6,imagpart:N6,imath:$6,Im:B6,imof:j6,imped:z6,Implies:U6,incare:G6,infin:q6,infintie:H6,inodot:V6,intcal:W6,int:Y6,Int:X6,integers:Z6,Integral:K6,intercal:J6,Intersection:Q6,intlarhk:e8,intprod:t8,InvisibleComma:i8,InvisibleTimes:r8,IOcy:n8,iocy:s8,Iogon:o8,iogon:a8,Iopf:l8,iopf:u8,Iota:c8,iota:h8,iprod:d8,iquest:f8,iscr:p8,Iscr:m8,isin:g8,isindot:y8,isinE:v8,isins:b8,isinsv:_8,isinv:x8,it:w8,Itilde:E8,itilde:S8,Iukcy:C8,iukcy:T8,Iuml:A8,iuml:k8,Jcirc:D8,jcirc:M8,Jcy:L8,jcy:R8,Jfr:I8,jfr:O8,jmath:P8,Jopf:F8,jopf:N8,Jscr:$8,jscr:B8,Jsercy:j8,jsercy:z8,Jukcy:U8,jukcy:G8,Kappa:q8,kappa:H8,kappav:V8,Kcedil:W8,kcedil:Y8,Kcy:X8,kcy:Z8,Kfr:K8,kfr:J8,kgreen:Q8,KHcy:e$,khcy:t$,KJcy:i$,kjcy:r$,Kopf:n$,kopf:s$,Kscr:o$,kscr:a$,lAarr:l$,Lacute:u$,lacute:c$,laemptyv:h$,lagran:d$,Lambda:f$,lambda:p$,lang:m$,Lang:g$,langd:y$,langle:v$,lap:b$,Laplacetrf:_$,laquo:x$,larrb:w$,larrbfs:E$,larr:S$,Larr:C$,lArr:T$,larrfs:A$,larrhk:k$,larrlp:D$,larrpl:M$,larrsim:L$,larrtl:R$,latail:I$,lAtail:O$,lat:P$,late:F$,lates:N$,lbarr:$$,lBarr:B$,lbbrk:j$,lbrace:z$,lbrack:U$,lbrke:G$,lbrksld:q$,lbrkslu:H$,Lcaron:V$,lcaron:W$,Lcedil:Y$,lcedil:X$,lceil:Z$,lcub:K$,Lcy:J$,lcy:Q$,ldca:eB,ldquo:tB,ldquor:iB,ldrdhar:rB,ldrushar:nB,ldsh:sB,le:oB,lE:aB,LeftAngleBracket:lB,LeftArrowBar:uB,leftarrow:cB,LeftArrow:hB,Leftarrow:dB,LeftArrowRightArrow:fB,leftarrowtail:pB,LeftCeiling:mB,LeftDoubleBracket:gB,LeftDownTeeVector:yB,LeftDownVectorBar:vB,LeftDownVector:bB,LeftFloor:_B,leftharpoondown:xB,leftharpoonup:wB,leftleftarrows:EB,leftrightarrow:SB,LeftRightArrow:CB,Leftrightarrow:TB,leftrightarrows:AB,leftrightharpoons:kB,leftrightsquigarrow:DB,LeftRightVector:MB,LeftTeeArrow:LB,LeftTee:RB,LeftTeeVector:IB,leftthreetimes:OB,LeftTriangleBar:PB,LeftTriangle:FB,LeftTriangleEqual:NB,LeftUpDownVector:$B,LeftUpTeeVector:BB,LeftUpVectorBar:jB,LeftUpVector:zB,LeftVectorBar:UB,LeftVector:GB,lEg:qB,leg:HB,leq:VB,leqq:WB,leqslant:YB,lescc:XB,les:ZB,lesdot:KB,lesdoto:JB,lesdotor:QB,lesg:ej,lesges:tj,lessapprox:ij,lessdot:rj,lesseqgtr:nj,lesseqqgtr:sj,LessEqualGreater:oj,LessFullEqual:aj,LessGreater:lj,lessgtr:uj,LessLess:cj,lesssim:hj,LessSlantEqual:dj,LessTilde:fj,lfisht:pj,lfloor:mj,Lfr:gj,lfr:yj,lg:vj,lgE:bj,lHar:_j,lhard:xj,lharu:wj,lharul:Ej,lhblk:Sj,LJcy:Cj,ljcy:Tj,llarr:Aj,ll:kj,Ll:Dj,llcorner:Mj,Lleftarrow:Lj,llhard:Rj,lltri:Ij,Lmidot:Oj,lmidot:Pj,lmoustache:Fj,lmoust:Nj,lnap:$j,lnapprox:Bj,lne:jj,lnE:zj,lneq:Uj,lneqq:Gj,lnsim:qj,loang:Hj,loarr:Vj,lobrk:Wj,longleftarrow:Yj,LongLeftArrow:Xj,Longleftarrow:Zj,longleftrightarrow:Kj,LongLeftRightArrow:Jj,Longleftrightarrow:Qj,longmapsto:e9,longrightarrow:t9,LongRightArrow:i9,Longrightarrow:r9,looparrowleft:n9,looparrowright:s9,lopar:o9,Lopf:a9,lopf:l9,loplus:u9,lotimes:c9,lowast:h9,lowbar:d9,LowerLeftArrow:f9,LowerRightArrow:p9,loz:m9,lozenge:g9,lozf:y9,lpar:v9,lparlt:b9,lrarr:_9,lrcorner:x9,lrhar:w9,lrhard:E9,lrm:S9,lrtri:C9,lsaquo:T9,lscr:A9,Lscr:k9,lsh:D9,Lsh:M9,lsim:L9,lsime:R9,lsimg:I9,lsqb:O9,lsquo:P9,lsquor:F9,Lstrok:N9,lstrok:$9,ltcc:B9,ltcir:j9,lt:z9,LT:U9,Lt:G9,ltdot:q9,lthree:H9,ltimes:V9,ltlarr:W9,ltquest:Y9,ltri:X9,ltrie:Z9,ltrif:K9,ltrPar:J9,lurdshar:Q9,luruhar:ez,lvertneqq:tz,lvnE:iz,macr:rz,male:nz,malt:sz,maltese:oz,map:az,mapsto:lz,mapstodown:uz,mapstoleft:cz,mapstoup:hz,marker:dz,mcomma:fz,Mcy:pz,mcy:mz,mdash:gz,mDDot:yz,measuredangle:vz,MediumSpace:bz,Mellintrf:_z,Mfr:xz,mfr:wz,mho:Ez,micro:Sz,midast:Cz,midcir:Tz,mid:Az,middot:kz,minusb:Dz,minus:Mz,minusd:Lz,minusdu:Rz,MinusPlus:Iz,mlcp:Oz,mldr:Pz,mnplus:Fz,models:Nz,Mopf:$z,mopf:Bz,mp:jz,mscr:zz,Mscr:Uz,mstpos:Gz,Mu:qz,mu:Hz,multimap:Vz,mumap:Wz,nabla:Yz,Nacute:Xz,nacute:Zz,nang:Kz,nap:Jz,napE:Qz,napid:e7,napos:t7,napprox:i7,natural:r7,naturals:n7,natur:s7,nbsp:o7,nbump:a7,nbumpe:l7,ncap:u7,Ncaron:c7,ncaron:h7,Ncedil:d7,ncedil:f7,ncong:p7,ncongdot:m7,ncup:g7,Ncy:y7,ncy:v7,ndash:b7,nearhk:_7,nearr:x7,neArr:w7,nearrow:E7,ne:S7,nedot:C7,NegativeMediumSpace:T7,NegativeThickSpace:A7,NegativeThinSpace:k7,NegativeVeryThinSpace:D7,nequiv:M7,nesear:L7,nesim:R7,NestedGreaterGreater:I7,NestedLessLess:O7,NewLine:P7,nexist:F7,nexists:N7,Nfr:$7,nfr:B7,ngE:j7,nge:z7,ngeq:U7,ngeqq:G7,ngeqslant:q7,nges:H7,nGg:V7,ngsim:W7,nGt:Y7,ngt:X7,ngtr:Z7,nGtv:K7,nharr:J7,nhArr:Q7,nhpar:eU,ni:tU,nis:iU,nisd:rU,niv:nU,NJcy:sU,njcy:oU,nlarr:aU,nlArr:lU,nldr:uU,nlE:cU,nle:hU,nleftarrow:dU,nLeftarrow:fU,nleftrightarrow:pU,nLeftrightarrow:mU,nleq:gU,nleqq:yU,nleqslant:vU,nles:bU,nless:_U,nLl:xU,nlsim:wU,nLt:EU,nlt:SU,nltri:CU,nltrie:TU,nLtv:AU,nmid:kU,NoBreak:DU,NonBreakingSpace:MU,nopf:LU,Nopf:RU,Not:IU,not:OU,NotCongruent:PU,NotCupCap:FU,NotDoubleVerticalBar:NU,NotElement:$U,NotEqual:BU,NotEqualTilde:jU,NotExists:zU,NotGreater:UU,NotGreaterEqual:GU,NotGreaterFullEqual:qU,NotGreaterGreater:HU,NotGreaterLess:VU,NotGreaterSlantEqual:WU,NotGreaterTilde:YU,NotHumpDownHump:XU,NotHumpEqual:ZU,notin:KU,notindot:JU,notinE:QU,notinva:eG,notinvb:tG,notinvc:iG,NotLeftTriangleBar:rG,NotLeftTriangle:nG,NotLeftTriangleEqual:sG,NotLess:oG,NotLessEqual:aG,NotLessGreater:lG,NotLessLess:uG,NotLessSlantEqual:cG,NotLessTilde:hG,NotNestedGreaterGreater:dG,NotNestedLessLess:fG,notni:pG,notniva:mG,notnivb:gG,notnivc:yG,NotPrecedes:vG,NotPrecedesEqual:bG,NotPrecedesSlantEqual:_G,NotReverseElement:xG,NotRightTriangleBar:wG,NotRightTriangle:EG,NotRightTriangleEqual:SG,NotSquareSubset:CG,NotSquareSubsetEqual:TG,NotSquareSuperset:AG,NotSquareSupersetEqual:kG,NotSubset:DG,NotSubsetEqual:MG,NotSucceeds:LG,NotSucceedsEqual:RG,NotSucceedsSlantEqual:IG,NotSucceedsTilde:OG,NotSuperset:PG,NotSupersetEqual:FG,NotTilde:NG,NotTildeEqual:$G,NotTildeFullEqual:BG,NotTildeTilde:jG,NotVerticalBar:zG,nparallel:UG,npar:GG,nparsl:qG,npart:HG,npolint:VG,npr:WG,nprcue:YG,nprec:XG,npreceq:ZG,npre:KG,nrarrc:JG,nrarr:QG,nrArr:eq,nrarrw:tq,nrightarrow:iq,nRightarrow:rq,nrtri:nq,nrtrie:sq,nsc:oq,nsccue:aq,nsce:lq,Nscr:uq,nscr:cq,nshortmid:hq,nshortparallel:dq,nsim:fq,nsime:pq,nsimeq:mq,nsmid:gq,nspar:yq,nsqsube:vq,nsqsupe:bq,nsub:_q,nsubE:xq,nsube:wq,nsubset:Eq,nsubseteq:Sq,nsubseteqq:Cq,nsucc:Tq,nsucceq:Aq,nsup:kq,nsupE:Dq,nsupe:Mq,nsupset:Lq,nsupseteq:Rq,nsupseteqq:Iq,ntgl:Oq,Ntilde:Pq,ntilde:Fq,ntlg:Nq,ntriangleleft:$q,ntrianglelefteq:Bq,ntriangleright:jq,ntrianglerighteq:zq,Nu:Uq,nu:Gq,num:qq,numero:Hq,numsp:Vq,nvap:Wq,nvdash:Yq,nvDash:Xq,nVdash:Zq,nVDash:Kq,nvge:Jq,nvgt:Qq,nvHarr:eH,nvinfin:tH,nvlArr:iH,nvle:rH,nvlt:nH,nvltrie:sH,nvrArr:oH,nvrtrie:aH,nvsim:lH,nwarhk:uH,nwarr:cH,nwArr:hH,nwarrow:dH,nwnear:fH,Oacute:pH,oacute:mH,oast:gH,Ocirc:yH,ocirc:vH,ocir:bH,Ocy:_H,ocy:xH,odash:wH,Odblac:EH,odblac:SH,odiv:CH,odot:TH,odsold:AH,OElig:kH,oelig:DH,ofcir:MH,Ofr:LH,ofr:RH,ogon:IH,Ograve:OH,ograve:PH,ogt:FH,ohbar:NH,ohm:$H,oint:BH,olarr:jH,olcir:zH,olcross:UH,oline:GH,olt:qH,Omacr:HH,omacr:VH,Omega:WH,omega:YH,Omicron:XH,omicron:ZH,omid:KH,ominus:JH,Oopf:QH,oopf:eV,opar:tV,OpenCurlyDoubleQuote:iV,OpenCurlyQuote:rV,operp:nV,oplus:sV,orarr:oV,Or:aV,or:lV,ord:uV,order:cV,orderof:hV,ordf:dV,ordm:fV,origof:pV,oror:mV,orslope:gV,orv:yV,oS:vV,Oscr:bV,oscr:_V,Oslash:xV,oslash:wV,osol:EV,Otilde:SV,otilde:CV,otimesas:TV,Otimes:AV,otimes:kV,Ouml:DV,ouml:MV,ovbar:LV,OverBar:RV,OverBrace:IV,OverBracket:OV,OverParenthesis:PV,para:FV,parallel:NV,par:$V,parsim:BV,parsl:jV,part:zV,PartialD:UV,Pcy:GV,pcy:qV,percnt:HV,period:VV,permil:WV,perp:YV,pertenk:XV,Pfr:ZV,pfr:KV,Phi:JV,phi:QV,phiv:eW,phmmat:tW,phone:iW,Pi:rW,pi:nW,pitchfork:sW,piv:oW,planck:aW,planckh:lW,plankv:uW,plusacir:cW,plusb:hW,pluscir:dW,plus:fW,plusdo:pW,plusdu:mW,pluse:gW,PlusMinus:yW,plusmn:vW,plussim:bW,plustwo:_W,pm:xW,Poincareplane:wW,pointint:EW,popf:SW,Popf:CW,pound:TW,prap:AW,Pr:kW,pr:DW,prcue:MW,precapprox:LW,prec:RW,preccurlyeq:IW,Precedes:OW,PrecedesEqual:PW,PrecedesSlantEqual:FW,PrecedesTilde:NW,preceq:$W,precnapprox:BW,precneqq:jW,precnsim:zW,pre:UW,prE:GW,precsim:qW,prime:HW,Prime:VW,primes:WW,prnap:YW,prnE:XW,prnsim:ZW,prod:KW,Product:JW,profalar:QW,profline:eY,profsurf:tY,prop:iY,Proportional:rY,Proportion:nY,propto:sY,prsim:oY,prurel:aY,Pscr:lY,pscr:uY,Psi:cY,psi:hY,puncsp:dY,Qfr:fY,qfr:pY,qint:mY,qopf:gY,Qopf:yY,qprime:vY,Qscr:bY,qscr:_Y,quaternions:xY,quatint:wY,quest:EY,questeq:SY,quot:CY,QUOT:TY,rAarr:AY,race:kY,Racute:DY,racute:MY,radic:LY,raemptyv:RY,rang:IY,Rang:OY,rangd:PY,range:FY,rangle:NY,raquo:$Y,rarrap:BY,rarrb:jY,rarrbfs:zY,rarrc:UY,rarr:GY,Rarr:qY,rArr:HY,rarrfs:VY,rarrhk:WY,rarrlp:YY,rarrpl:XY,rarrsim:ZY,Rarrtl:KY,rarrtl:JY,rarrw:QY,ratail:eX,rAtail:tX,ratio:iX,rationals:rX,rbarr:nX,rBarr:sX,RBarr:oX,rbbrk:aX,rbrace:lX,rbrack:uX,rbrke:cX,rbrksld:hX,rbrkslu:dX,Rcaron:fX,rcaron:pX,Rcedil:mX,rcedil:gX,rceil:yX,rcub:vX,Rcy:bX,rcy:_X,rdca:xX,rdldhar:wX,rdquo:EX,rdquor:SX,rdsh:CX,real:TX,realine:AX,realpart:kX,reals:DX,Re:MX,rect:LX,reg:RX,REG:IX,ReverseElement:OX,ReverseEquilibrium:PX,ReverseUpEquilibrium:FX,rfisht:NX,rfloor:$X,rfr:BX,Rfr:jX,rHar:zX,rhard:UX,rharu:GX,rharul:qX,Rho:HX,rho:VX,rhov:WX,RightAngleBracket:YX,RightArrowBar:XX,rightarrow:ZX,RightArrow:KX,Rightarrow:JX,RightArrowLeftArrow:QX,rightarrowtail:eZ,RightCeiling:tZ,RightDoubleBracket:iZ,RightDownTeeVector:rZ,RightDownVectorBar:nZ,RightDownVector:sZ,RightFloor:oZ,rightharpoondown:aZ,rightharpoonup:lZ,rightleftarrows:uZ,rightleftharpoons:cZ,rightrightarrows:hZ,rightsquigarrow:dZ,RightTeeArrow:fZ,RightTee:pZ,RightTeeVector:mZ,rightthreetimes:gZ,RightTriangleBar:yZ,RightTriangle:vZ,RightTriangleEqual:bZ,RightUpDownVector:_Z,RightUpTeeVector:xZ,RightUpVectorBar:wZ,RightUpVector:EZ,RightVectorBar:SZ,RightVector:CZ,ring:TZ,risingdotseq:AZ,rlarr:kZ,rlhar:DZ,rlm:MZ,rmoustache:LZ,rmoust:RZ,rnmid:IZ,roang:OZ,roarr:PZ,robrk:FZ,ropar:NZ,ropf:$Z,Ropf:BZ,roplus:jZ,rotimes:zZ,RoundImplies:UZ,rpar:GZ,rpargt:qZ,rppolint:HZ,rrarr:VZ,Rrightarrow:WZ,rsaquo:YZ,rscr:XZ,Rscr:ZZ,rsh:KZ,Rsh:JZ,rsqb:QZ,rsquo:eK,rsquor:tK,rthree:iK,rtimes:rK,rtri:nK,rtrie:sK,rtrif:oK,rtriltri:aK,RuleDelayed:lK,ruluhar:uK,rx:cK,Sacute:hK,sacute:dK,sbquo:fK,scap:pK,Scaron:mK,scaron:gK,Sc:yK,sc:vK,sccue:bK,sce:_K,scE:xK,Scedil:wK,scedil:EK,Scirc:SK,scirc:CK,scnap:TK,scnE:AK,scnsim:kK,scpolint:DK,scsim:MK,Scy:LK,scy:RK,sdotb:IK,sdot:OK,sdote:PK,searhk:FK,searr:NK,seArr:$K,searrow:BK,sect:jK,semi:zK,seswar:UK,setminus:GK,setmn:qK,sext:HK,Sfr:VK,sfr:WK,sfrown:YK,sharp:XK,SHCHcy:ZK,shchcy:KK,SHcy:JK,shcy:QK,ShortDownArrow:eJ,ShortLeftArrow:tJ,shortmid:iJ,shortparallel:rJ,ShortRightArrow:nJ,ShortUpArrow:sJ,shy:oJ,Sigma:aJ,sigma:lJ,sigmaf:uJ,sigmav:cJ,sim:hJ,simdot:dJ,sime:fJ,simeq:pJ,simg:mJ,simgE:gJ,siml:yJ,simlE:vJ,simne:bJ,simplus:_J,simrarr:xJ,slarr:wJ,SmallCircle:EJ,smallsetminus:SJ,smashp:CJ,smeparsl:TJ,smid:AJ,smile:kJ,smt:DJ,smte:MJ,smtes:LJ,SOFTcy:RJ,softcy:IJ,solbar:OJ,solb:PJ,sol:FJ,Sopf:NJ,sopf:$J,spades:BJ,spadesuit:jJ,spar:zJ,sqcap:UJ,sqcaps:GJ,sqcup:qJ,sqcups:HJ,Sqrt:VJ,sqsub:WJ,sqsube:YJ,sqsubset:XJ,sqsubseteq:ZJ,sqsup:KJ,sqsupe:JJ,sqsupset:QJ,sqsupseteq:eQ,square:tQ,Square:iQ,SquareIntersection:rQ,SquareSubset:nQ,SquareSubsetEqual:sQ,SquareSuperset:oQ,SquareSupersetEqual:aQ,SquareUnion:lQ,squarf:uQ,squ:cQ,squf:hQ,srarr:dQ,Sscr:fQ,sscr:pQ,ssetmn:mQ,ssmile:gQ,sstarf:yQ,Star:vQ,star:bQ,starf:_Q,straightepsilon:xQ,straightphi:wQ,strns:EQ,sub:SQ,Sub:CQ,subdot:TQ,subE:AQ,sube:kQ,subedot:DQ,submult:MQ,subnE:LQ,subne:RQ,subplus:IQ,subrarr:OQ,subset:PQ,Subset:FQ,subseteq:NQ,subseteqq:$Q,SubsetEqual:BQ,subsetneq:jQ,subsetneqq:zQ,subsim:UQ,subsub:GQ,subsup:qQ,succapprox:HQ,succ:VQ,succcurlyeq:WQ,Succeeds:YQ,SucceedsEqual:XQ,SucceedsSlantEqual:ZQ,SucceedsTilde:KQ,succeq:JQ,succnapprox:QQ,succneqq:eee,succnsim:tee,succsim:iee,SuchThat:ree,sum:nee,Sum:see,sung:oee,sup1:aee,sup2:lee,sup3:uee,sup:cee,Sup:hee,supdot:dee,supdsub:fee,supE:pee,supe:mee,supedot:gee,Superset:yee,SupersetEqual:vee,suphsol:bee,suphsub:_ee,suplarr:xee,supmult:wee,supnE:Eee,supne:See,supplus:Cee,supset:Tee,Supset:Aee,supseteq:kee,supseteqq:Dee,supsetneq:Mee,supsetneqq:Lee,supsim:Ree,supsub:Iee,supsup:Oee,swarhk:Pee,swarr:Fee,swArr:Nee,swarrow:$ee,swnwar:Bee,szlig:jee,Tab:zee,target:Uee,Tau:Gee,tau:qee,tbrk:Hee,Tcaron:Vee,tcaron:Wee,Tcedil:Yee,tcedil:Xee,Tcy:Zee,tcy:Kee,tdot:Jee,telrec:Qee,Tfr:ete,tfr:tte,there4:ite,therefore:rte,Therefore:nte,Theta:ste,theta:ote,thetasym:ate,thetav:lte,thickapprox:ute,thicksim:cte,ThickSpace:hte,ThinSpace:dte,thinsp:fte,thkap:pte,thksim:mte,THORN:gte,thorn:yte,tilde:vte,Tilde:bte,TildeEqual:_te,TildeFullEqual:xte,TildeTilde:wte,timesbar:Ete,timesb:Ste,times:Cte,timesd:Tte,tint:Ate,toea:kte,topbot:Dte,topcir:Mte,top:Lte,Topf:Rte,topf:Ite,topfork:Ote,tosa:Pte,tprime:Fte,trade:Nte,TRADE:$te,triangle:Bte,triangledown:jte,triangleleft:zte,trianglelefteq:Ute,triangleq:Gte,triangleright:qte,trianglerighteq:Hte,tridot:Vte,trie:Wte,triminus:Yte,TripleDot:Xte,triplus:Zte,trisb:Kte,tritime:Jte,trpezium:Qte,Tscr:eie,tscr:tie,TScy:iie,tscy:rie,TSHcy:nie,tshcy:sie,Tstrok:oie,tstrok:aie,twixt:lie,twoheadleftarrow:uie,twoheadrightarrow:cie,Uacute:hie,uacute:die,uarr:fie,Uarr:pie,uArr:mie,Uarrocir:gie,Ubrcy:yie,ubrcy:vie,Ubreve:bie,ubreve:_ie,Ucirc:xie,ucirc:wie,Ucy:Eie,ucy:Sie,udarr:Cie,Udblac:Tie,udblac:Aie,udhar:kie,ufisht:Die,Ufr:Mie,ufr:Lie,Ugrave:Rie,ugrave:Iie,uHar:Oie,uharl:Pie,uharr:Fie,uhblk:Nie,ulcorn:$ie,ulcorner:Bie,ulcrop:jie,ultri:zie,Umacr:Uie,umacr:Gie,uml:qie,UnderBar:Hie,UnderBrace:Vie,UnderBracket:Wie,UnderParenthesis:Yie,Union:Xie,UnionPlus:Zie,Uogon:Kie,uogon:Jie,Uopf:Qie,uopf:ere,UpArrowBar:tre,uparrow:ire,UpArrow:rre,Uparrow:nre,UpArrowDownArrow:sre,updownarrow:ore,UpDownArrow:are,Updownarrow:lre,UpEquilibrium:ure,upharpoonleft:cre,upharpoonright:hre,uplus:dre,UpperLeftArrow:fre,UpperRightArrow:pre,upsi:mre,Upsi:gre,upsih:yre,Upsilon:vre,upsilon:bre,UpTeeArrow:_re,UpTee:xre,upuparrows:wre,urcorn:Ere,urcorner:Sre,urcrop:Cre,Uring:Tre,uring:Are,urtri:kre,Uscr:Dre,uscr:Mre,utdot:Lre,Utilde:Rre,utilde:Ire,utri:Ore,utrif:Pre,uuarr:Fre,Uuml:Nre,uuml:$re,uwangle:Bre,vangrt:jre,varepsilon:zre,varkappa:Ure,varnothing:Gre,varphi:qre,varpi:Hre,varpropto:Vre,varr:Wre,vArr:Yre,varrho:Xre,varsigma:Zre,varsubsetneq:Kre,varsubsetneqq:Jre,varsupsetneq:Qre,varsupsetneqq:ene,vartheta:tne,vartriangleleft:ine,vartriangleright:rne,vBar:nne,Vbar:sne,vBarv:one,Vcy:ane,vcy:lne,vdash:une,vDash:cne,Vdash:hne,VDash:dne,Vdashl:fne,veebar:pne,vee:mne,Vee:gne,veeeq:yne,vellip:vne,verbar:bne,Verbar:_ne,vert:xne,Vert:wne,VerticalBar:Ene,VerticalLine:Sne,VerticalSeparator:Cne,VerticalTilde:Tne,VeryThinSpace:Ane,Vfr:kne,vfr:Dne,vltri:Mne,vnsub:Lne,vnsup:Rne,Vopf:Ine,vopf:One,vprop:Pne,vrtri:Fne,Vscr:Nne,vscr:$ne,vsubnE:Bne,vsubne:jne,vsupnE:zne,vsupne:Une,Vvdash:Gne,vzigzag:qne,Wcirc:Hne,wcirc:Vne,wedbar:Wne,wedge:Yne,Wedge:Xne,wedgeq:Zne,weierp:Kne,Wfr:Jne,wfr:Qne,Wopf:ese,wopf:tse,wp:ise,wr:rse,wreath:nse,Wscr:sse,wscr:ose,xcap:ase,xcirc:lse,xcup:use,xdtri:cse,Xfr:hse,xfr:dse,xharr:fse,xhArr:pse,Xi:mse,xi:gse,xlarr:yse,xlArr:vse,xmap:bse,xnis:_se,xodot:xse,Xopf:wse,xopf:Ese,xoplus:Sse,xotime:Cse,xrarr:Tse,xrArr:Ase,Xscr:kse,xscr:Dse,xsqcup:Mse,xuplus:Lse,xutri:Rse,xvee:Ise,xwedge:Ose,Yacute:Pse,yacute:Fse,YAcy:Nse,yacy:$se,Ycirc:Bse,ycirc:jse,Ycy:zse,ycy:Use,yen:Gse,Yfr:qse,yfr:Hse,YIcy:Vse,yicy:Wse,Yopf:Yse,yopf:Xse,Yscr:Zse,yscr:Kse,YUcy:Jse,yucy:Qse,yuml:eoe,Yuml:toe,Zacute:ioe,zacute:roe,Zcaron:noe,zcaron:soe,Zcy:ooe,zcy:aoe,Zdot:loe,zdot:uoe,zeetrf:coe,ZeroWidthSpace:hoe,Zeta:doe,zeta:foe,zfr:poe,Zfr:moe,ZHcy:goe,zhcy:yoe,zigrarr:voe,zopf:boe,Zopf:_oe,Zscr:xoe,zscr:woe,zwj:Eoe,zwnj:Soe,default:NTe}),Coe="",Toe="",Aoe="",koe="",Doe="",Moe="",Loe="",Roe="",Ioe="",Ooe="&",Poe="&",Foe="",Noe="",$oe="",Boe="",joe="",zoe="",Uoe="",Goe="",qoe="",Hoe="",Voe="",Woe="",Yoe="",Xoe="",Zoe="",Koe="",Joe="",Qoe="",eae="",tae="",iae="",rae="",nae="",sae="",oae="",aae="",lae="",uae="",cae="",hae=">",dae=">",fae="",pae="",mae="",gae="",yae="",vae="",bae="",_ae="",xae="",wae="",Eae="",Sae="<",Cae="<",Tae="",Aae="",kae="",Dae="",Mae="",Lae="",Rae="",Iae="",Oae="",Pae="",Fae="",Nae="",$ae="",Bae="",jae="",zae="",Uae="",Gae="",qae="",Hae="",Vae="",Wae="",Yae="",Xae="",Zae='"',Kae='"',Jae="",Qae="",ele="",tle="",ile="",rle="",nle="",sle="",ole="",ale="",lle="",ule="",cle="",hle="",dle="",fle="",ple="",mle="",gle="",yle="",vle="",ble="",_le="",xle="",wle="",BTe={Aacute:Coe,aacute:Toe,Acirc:Aoe,acirc:koe,acute:Doe,AElig:Moe,aelig:Loe,Agrave:Roe,agrave:Ioe,amp:Ooe,AMP:Poe,Aring:Foe,aring:Noe,Atilde:$oe,atilde:Boe,Auml:joe,auml:zoe,brvbar:Uoe,Ccedil:Goe,ccedil:qoe,cedil:Hoe,cent:Voe,copy:Woe,COPY:Yoe,curren:Xoe,deg:Zoe,divide:Koe,Eacute:Joe,eacute:Qoe,Ecirc:eae,ecirc:tae,Egrave:iae,egrave:rae,ETH:nae,eth:sae,Euml:oae,euml:aae,frac12:lae,frac14:uae,frac34:cae,gt:hae,GT:dae,Iacute:fae,iacute:pae,Icirc:mae,icirc:gae,iexcl:yae,Igrave:vae,igrave:bae,iquest:_ae,Iuml:xae,iuml:wae,laquo:Eae,lt:Sae,LT:Cae,macr:Tae,micro:Aae,middot:kae,nbsp:Dae,not:Mae,Ntilde:Lae,ntilde:Rae,Oacute:Iae,oacute:Oae,Ocirc:Pae,ocirc:Fae,Ograve:Nae,ograve:$ae,ordf:Bae,ordm:jae,Oslash:zae,oslash:Uae,Otilde:Gae,otilde:qae,Ouml:Hae,ouml:Vae,para:Wae,plusmn:Yae,pound:Xae,quot:Zae,QUOT:Kae,raquo:Jae,reg:Qae,REG:ele,sect:tle,shy:ile,sup1:rle,sup2:nle,sup3:sle,szlig:ole,THORN:ale,thorn:lle,times:ule,Uacute:cle,uacute:hle,Ucirc:dle,ucirc:fle,Ugrave:ple,ugrave:mle,uml:gle,Uuml:yle,uuml:vle,Yacute:ble,yacute:_le,yen:xle,yuml:wle},jTe=Object.freeze({__proto__:null,Aacute:Coe,aacute:Toe,Acirc:Aoe,acirc:koe,acute:Doe,AElig:Moe,aelig:Loe,Agrave:Roe,agrave:Ioe,amp:Ooe,AMP:Poe,Aring:Foe,aring:Noe,Atilde:$oe,atilde:Boe,Auml:joe,auml:zoe,brvbar:Uoe,Ccedil:Goe,ccedil:qoe,cedil:Hoe,cent:Voe,copy:Woe,COPY:Yoe,curren:Xoe,deg:Zoe,divide:Koe,Eacute:Joe,eacute:Qoe,Ecirc:eae,ecirc:tae,Egrave:iae,egrave:rae,ETH:nae,eth:sae,Euml:oae,euml:aae,frac12:lae,frac14:uae,frac34:cae,gt:hae,GT:dae,Iacute:fae,iacute:pae,Icirc:mae,icirc:gae,iexcl:yae,Igrave:vae,igrave:bae,iquest:_ae,Iuml:xae,iuml:wae,laquo:Eae,lt:Sae,LT:Cae,macr:Tae,micro:Aae,middot:kae,nbsp:Dae,not:Mae,Ntilde:Lae,ntilde:Rae,Oacute:Iae,oacute:Oae,Ocirc:Pae,ocirc:Fae,Ograve:Nae,ograve:$ae,ordf:Bae,ordm:jae,Oslash:zae,oslash:Uae,Otilde:Gae,otilde:qae,Ouml:Hae,ouml:Vae,para:Wae,plusmn:Yae,pound:Xae,quot:Zae,QUOT:Kae,raquo:Jae,reg:Qae,REG:ele,sect:tle,shy:ile,sup1:rle,sup2:nle,sup3:sle,szlig:ole,THORN:ale,thorn:lle,times:ule,Uacute:cle,uacute:hle,Ucirc:dle,ucirc:fle,Ugrave:ple,ugrave:mle,uml:gle,Uuml:yle,uuml:vle,Yacute:ble,yacute:_le,yen:xle,yuml:wle,default:BTe}),Ele="&",Sle="'",Cle=">",Tle="<",Ale='"',zTe={amp:Ele,apos:Sle,gt:Cle,lt:Tle,quot:Ale},UTe=Object.freeze({__proto__:null,amp:Ele,apos:Sle,gt:Cle,lt:Tle,quot:Ale,default:zTe}),GTe={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},qTe=Object.freeze({__proto__:null,default:GTe}),HTe=v(qTe),kle=g(function(q,ae){var we=p&&p.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(ae,"__esModule",{value:!0});var Le=we(HTe);function ut(nt){if(nt>=55296&&nt<=57343||nt>1114111)return"";nt in Le.default&&(nt=Le.default[nt]);var ui="";return nt>65535&&(nt-=65536,ui+=String.fromCharCode(nt>>>10&1023|55296),nt=56320|nt&1023),ui+=String.fromCharCode(nt),ui}ae.default=ut});m(kle);var Dle=v($Te),VTe=v(jTe),Mle=v(UTe),Th=g(function(q,ae){var we=p&&p.__importDefault||function(fr){return fr&&fr.__esModule?fr:{default:fr}};Object.defineProperty(ae,"__esModule",{value:!0});var Le=we(Dle),ut=we(VTe),nt=we(Mle),ui=we(kle);ae.decodeXML=Dt(nt.default),ae.decodeHTMLStrict=Dt(Le.default);function Dt(fr){var pr=Object.keys(fr).join("|"),zr=Fr(fr);pr+="|#[xX][\\da-fA-F]+|#\\d+";var Ur=new RegExp("&(?:"+pr+");","g");return function(Vs){return String(Vs).replace(Ur,zr)}}var bi=function(fr,pr){return fr<pr?1:-1};ae.decodeHTML=function(){for(var fr=Object.keys(ut.default).sort(bi),pr=Object.keys(Le.default).sort(bi),zr=0,Ur=0;zr<pr.length;zr++)fr[Ur]===pr[zr]?(pr[zr]+=";?",Ur++):pr[zr]+=";";var Vs=new RegExp("&(?:"+pr.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Vp=Fr(Le.default);function XA(Wp){return Wp.substr(-1)!==";"&&(Wp+=";"),Vp(Wp)}return function(Wp){return String(Wp).replace(Vs,XA)}}();function Fr(fr){return function(zr){return zr.charAt(1)==="#"?zr.charAt(2)==="X"||zr.charAt(2)==="x"?ui.default(parseInt(zr.substr(3),16)):ui.default(parseInt(zr.substr(2),10)):fr[zr.slice(1,-1)]}}});m(Th),Th.decodeXML,Th.decodeHTMLStrict,Th.decodeHTML;var Up=g(function(q,ae){var we=p&&p.__importDefault||function(so){return so&&so.__esModule?so:{default:so}};Object.defineProperty(ae,"__esModule",{value:!0});var Le=we(Mle),ut=Fr(Le.default),nt=fr(ut);ae.encodeXML=Vp(ut,nt);var ui=we(Dle),Dt=Fr(ui.default),bi=fr(Dt);ae.encodeHTML=Vp(Dt,bi);function Fr(so){return Object.keys(so).sort().reduce(function(tf,dc){return tf[so[dc]]="&"+dc+";",tf},{})}function fr(so){var tf=[],dc=[];return Object.keys(so).forEach(function(Yp){return Yp.length===1?tf.push("\\"+Yp):dc.push(Yp)}),dc.unshift("["+tf.join("")+"]"),new RegExp(dc.join("|"),"g")}var pr=/[^\0-\x7F]/g,zr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function Ur(so){return"&#x"+so.charCodeAt(0).toString(16).toUpperCase()+";"}function Vs(so,tf){var dc=so.charCodeAt(0),Yp=so.charCodeAt(1),vDe=(dc-55296)*1024+Yp-56320+65536;return"&#x"+vDe.toString(16).toUpperCase()+";"}function Vp(so,tf){return function(dc){return dc.replace(tf,function(Yp){return so[Yp]}).replace(zr,Vs).replace(pr,Ur)}}var XA=fr(ut);function Wp(so){return so.replace(XA,Ur).replace(zr,Vs).replace(pr,Ur)}ae.escape=Wp});m(Up),Up.encodeXML,Up.encodeHTML,Up.escape;var Ao=g(function(q,ae){Object.defineProperty(ae,"__esModule",{value:!0});function we(Dt,bi){return(!bi||bi<=0?Th.decodeXML:Th.decodeHTML)(Dt)}ae.decode=we;function Le(Dt,bi){return(!bi||bi<=0?Th.decodeXML:Th.decodeHTMLStrict)(Dt)}ae.decodeStrict=Le;function ut(Dt,bi){return(!bi||bi<=0?Up.encodeXML:Up.encodeHTML)(Dt)}ae.encode=ut;var nt=Up;ae.encodeXML=nt.encodeXML,ae.encodeHTML=nt.encodeHTML,ae.escape=nt.escape,ae.encodeHTML4=nt.encodeHTML,ae.encodeHTML5=nt.encodeHTML;var ui=Th;ae.decodeXML=ui.decodeXML,ae.decodeHTML=ui.decodeHTML,ae.decodeHTMLStrict=ui.decodeHTMLStrict,ae.decodeHTML4=ui.decodeHTML,ae.decodeHTML5=ui.decodeHTML,ae.decodeHTML4Strict=ui.decodeHTMLStrict,ae.decodeHTML5Strict=ui.decodeHTMLStrict,ae.decodeXMLStrict=ui.decodeXML});m(Ao),Ao.decode,Ao.decodeStrict,Ao.encode,Ao.encodeXML,Ao.encodeHTML,Ao.escape,Ao.encodeHTML4,Ao.encodeHTML5,Ao.decodeXML;var Lle=Ao.decodeHTML;Ao.decodeHTMLStrict,Ao.decodeHTML4,Ao.decodeHTML5,Ao.decodeHTML4Strict,Ao.decodeHTML5Strict,Ao.decodeXMLStrict;var WTe=92,Rle="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",Ile="[A-Za-z][A-Za-z0-9-]*",YTe="[a-zA-Z_:][a-zA-Z0-9:._-]*",XTe="[^\"'=<>`\\x00-\\x20]+",ZTe="'[^']*'",KTe='"[^"]*"',JTe="(?:"+XTe+"|"+ZTe+"|"+KTe+")",QTe="(?:\\s*=\\s*"+JTe+")",eAe="(?:\\s+"+YTe+QTe+"?)",Ole="<"+Ile+eAe+"*\\s*/?>",Ple="</"+Ile+"\\s*[>]",tAe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",iAe="[<][?][\\s\\S]*?[?][>]",rAe="<![A-Z]+\\s+[^>]*>",nAe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",sAe="(?:"+Ole+"|"+Ple+"|"+tAe+"|"+iAe+"|"+rAe+"|"+nAe+")",oAe=new RegExp("^"+sAe),aAe=/[\\&]/,Fle="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",lAe=new RegExp("\\\\"+Fle+"|"+Rle,"gi"),uAe='[&<>"]',Nle=new RegExp(uAe,"g"),cAe=function(q){return q.charCodeAt(0)===WTe?q.charAt(1):Lle(q)},$le=function(q){return aAe.test(q)?q.replace(lAe,cAe):q},hAe=function(q){try{return d(q)}catch{return q}},dAe=function(q){switch(q){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return q}},Ble=function(q){return Nle.test(q)?q.replace(Nle,dAe):q};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var GA;function qA(q){return GA(q)}if(String.fromCodePoint)GA=function(q){try{return String.fromCodePoint(q)}catch(ae){if(ae instanceof RangeError)return"";throw ae}};else{var fAe=String.fromCharCode,pAe=Math.floor;GA=function(){var q=16384,ae=[],we,Le,ut=-1,nt=arguments.length;if(!nt)return"";for(var ui="";++ut<nt;){var Dt=Number(arguments[ut]);if(!isFinite(Dt)||Dt<0||Dt>1114111||pAe(Dt)!==Dt)return"";Dt<=65535?ae.push(Dt):(Dt-=65536,we=(Dt>>10)+55296,Le=Dt%1024+56320,ae.push(we,Le)),(ut+1===nt||ae.length>q)&&(ui+=fAe.apply(null,ae),ae.length=0)}return ui}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var q=function(){try{var we={},Le=Object.defineProperty,ut=Le(we,we,we)&&Le}catch{}return ut}(),ae=function(we){if(this==null)throw TypeError();var Le=String(this),ut=we?Number(we):0;if(ut!=ut&&(ut=0),ut<0||ut==1/0)throw RangeError();for(var nt="";ut;)ut%2==1&&(nt+=Le),ut>1&&(Le+=Le),ut>>=1;return nt};q?q(String.prototype,"repeat",{value:ae,configurable:!0,writable:!0}):String.prototype.repeat=ae}();var pE=hAe,HA=$le,jle=10,VA=42,mE=95,mAe=96,zle=91,gAe=93,Ule=60,yAe=33,Gle=92,vAe=38,qle=40,WA=41,bAe=58,Gp=39,qp=34,Hle=Fle,YA="\\\\"+Hle,_Ae=Rle,xAe=oAe,Vle=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),wAe=new RegExp('^(?:"('+YA+`|[^"\\x00])*"|'(`+YA+"|[^'\\x00])*'|\\(("+YA+"|[^()\\x00])*\\))"),EAe=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,Wle=new RegExp("^"+Hle),SAe=new RegExp("^"+_Ae,"i"),CAe=/`+/,TAe=/^`+/,AAe=/\.\.\./g,kAe=/--+/g,DAe=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,MAe=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,LAe=/^ *(?:\n *)?/,Yle=/^[ \t\n\x0b\x0c\x0d]/,Xle=/^\s/,RAe=/ *$/,IAe=/^ */,Zle=/^ *(?:\n|$)/,OAe=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,PAe=/^[^\n`\[\]\\!<&*_'"]+/m,Zo=function(q){var ae=new a("text");return ae._literal=q,ae},Kle=function(q){return q.slice(1,q.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},FAe=function(q){var ae=q.exec(this.subject.slice(this.pos));return ae===null?null:(this.pos+=ae.index+ae[0].length,ae[0])},NAe=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},$Ae=function(){return this.match(LAe),!0},BAe=function(q){var ae=this.match(TAe);if(ae===null)return!1;for(var we=this.pos,Le,ut,nt;(Le=this.match(CAe))!==null;)if(Le===ae)return ut=new a("code"),nt=this.subject.slice(we,this.pos-ae.length).replace(/\n/gm," "),nt.length>0&&nt.match(/[^ ]/)!==null&&nt[0]==" "&&nt[nt.length-1]==" "?ut._literal=nt.slice(1,nt.length-1):ut._literal=nt,q.appendChild(ut),!0;return this.pos=we,q.appendChild(Zo(ae)),!0},jAe=function(q){var ae=this.subject,we;return this.pos+=1,this.peek()===jle?(this.pos+=1,we=new a("linebreak"),q.appendChild(we)):Wle.test(ae.charAt(this.pos))?(q.appendChild(Zo(ae.charAt(this.pos))),this.pos+=1):q.appendChild(Zo("\\")),!0},zAe=function(q){var ae,we,Le;return(ae=this.match(DAe))?(we=ae.slice(1,ae.length-1),Le=new a("link"),Le._destination=pE("mailto:"+we),Le._title="",Le.appendChild(Zo(we)),q.appendChild(Le),!0):(ae=this.match(MAe))?(we=ae.slice(1,ae.length-1),Le=new a("link"),Le._destination=pE(we),Le._title="",Le.appendChild(Zo(we)),q.appendChild(Le),!0):!1},UAe=function(q){var ae=this.match(xAe);if(ae===null)return!1;var we=new a("html_inline");return we._literal=ae,q.appendChild(we),!0},GAe=function(q){var ae=0,we,Le,ut,nt=this.pos,ui,Dt,bi,Fr,fr,pr,zr,Ur;if(q===Gp||q===qp)ae++,this.pos++;else for(;this.peek()===q;)ae++,this.pos++;return ae===0?null:(we=nt===0?`
`:this.subject.charAt(nt-1),ut=this.peek(),ut===-1?Le=`
`:Le=qA(ut),fr=Xle.test(Le),pr=Vle.test(Le),zr=Xle.test(we),Ur=Vle.test(we),ui=!fr&&(!pr||zr||Ur),Dt=!zr&&(!Ur||fr||pr),q===mE?(bi=ui&&(!Dt||Ur),Fr=Dt&&(!ui||pr)):q===Gp||q===qp?(bi=ui&&!Dt,Fr=Dt):(bi=ui,Fr=Dt),this.pos=nt,{numdelims:ae,can_open:bi,can_close:Fr})},qAe=function(q,ae){var we=this.scanDelims(q);if(!we)return!1;var Le=we.numdelims,ut=this.pos,nt;this.pos+=Le,q===Gp?nt="":q===qp?nt="":nt=this.subject.slice(ut,this.pos);var ui=Zo(nt);return ae.appendChild(ui),(we.can_open||we.can_close)&&(this.options.smart||q!==Gp&&q!==qp)&&(this.delimiters={cc:q,numdelims:Le,origdelims:Le,node:ui,previous:this.delimiters,next:null,can_open:we.can_open,can_close:we.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},HAe=function(q){q.previous!==null&&(q.previous.next=q.next),q.next===null?this.delimiters=q.previous:q.next.previous=q.previous},VAe=function(q,ae){q.next!==ae&&(q.next=ae,ae.previous=q)},WAe=function(q){for(var ae,we,Le,ut,nt,ui,Dt,bi,Fr,fr,pr=[[],[],[]],zr=!1,Ur=0;Ur<3;Ur++)pr[Ur][mE]=q,pr[Ur][VA]=q,pr[Ur][Gp]=q,pr[Ur][qp]=q;for(we=this.delimiters;we!==null&&we.previous!==q;)we=we.previous;for(;we!==null;){var Vs=we.cc;if(!we.can_close)we=we.next;else{for(ae=we.previous,fr=!1;ae!==null&&ae!==q&&ae!==pr[we.origdelims%3][Vs];){if(zr=(we.can_open||ae.can_close)&&we.origdelims%3!==0&&(ae.origdelims+we.origdelims)%3===0,ae.cc===we.cc&&ae.can_open&&!zr){fr=!0;break}ae=ae.previous}if(Le=we,Vs===VA||Vs===mE)if(!fr)we=we.next;else{Dt=we.numdelims>=2&&ae.numdelims>=2?2:1,ut=ae.node,nt=we.node,ae.numdelims-=Dt,we.numdelims-=Dt,ut._literal=ut._literal.slice(0,ut._literal.length-Dt),nt._literal=nt._literal.slice(0,nt._literal.length-Dt);var Vp=new a(Dt===1?"emph":"strong");for(bi=ut._next;bi&&bi!==nt;)Fr=bi._next,bi.unlink(),Vp.appendChild(bi),bi=Fr;ut.insertAfter(Vp),VAe(ae,we),ae.numdelims===0&&(ut.unlink(),this.removeDelimiter(ae)),we.numdelims===0&&(nt.unlink(),ui=we.next,this.removeDelimiter(we),we=ui)}else Vs===Gp?(we.node._literal="",fr&&(ae.node._literal=""),we=we.next):Vs===qp&&(we.node._literal="",fr&&(ae.node.literal=""),we=we.next);fr||(pr[Le.origdelims%3][Vs]=Le.previous,Le.can_open||this.removeDelimiter(Le))}}for(;this.delimiters!==null&&this.delimiters!==q;)this.removeDelimiter(this.delimiters)},YAe=function(){var q=this.match(wAe);return q===null?null:HA(q.substr(1,q.length-2))},XAe=function(){var q=this.match(EAe);if(q===null){if(this.peek()===Ule)return null;for(var ae=this.pos,we=0,Le;(Le=this.peek())!==-1;)if(Le===Gle&&Wle.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(Le===qle)this.pos+=1,we+=1;else if(Le===WA){if(we<1)break;this.pos+=1,we-=1}else{if(Yle.exec(qA(Le))!==null)break;this.pos+=1}return this.pos===ae&&Le!==WA||we!==0?null:(q=this.subject.substr(ae,this.pos-ae),pE(HA(q)))}else return pE(HA(q.substr(1,q.length-2)))},ZAe=function(){var q=this.match(OAe);return q===null||q.length>1001?0:q.length},KAe=function(q){var ae=this.pos;this.pos+=1;var we=Zo("[");return q.appendChild(we),this.addBracket(we,ae,!1),!0},JAe=function(q){var ae=this.pos;if(this.pos+=1,this.peek()===zle){this.pos+=1;var we=Zo("![");q.appendChild(we),this.addBracket(we,ae+1,!0)}else q.appendChild(Zo("!"));return!0},QAe=function(q){var ae,we,Le,ut,nt=!1,ui,Dt;if(this.pos+=1,ae=this.pos,Dt=this.brackets,Dt===null)return q.appendChild(Zo("]")),!0;if(!Dt.active)return q.appendChild(Zo("]")),this.removeBracket(),!0;we=Dt.image;var bi=this.pos;if(this.peek()===qle&&(this.pos++,this.spnl()&&(Le=this.parseLinkDestination())!==null&&this.spnl()&&(Yle.test(this.subject.charAt(this.pos-1))&&(ut=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===WA?(this.pos+=1,nt=!0):this.pos=bi),!nt){var Fr=this.pos,fr=this.parseLinkLabel();if(fr>2?ui=this.subject.slice(Fr,Fr+fr):Dt.bracketAfter||(ui=this.subject.slice(Dt.index,ae)),fr===0&&(this.pos=bi),ui){var pr=this.refmap[Kle(ui)];pr&&(Le=pr.destination,ut=pr.title,nt=!0)}}if(nt){var zr=new a(we?"image":"link");zr._destination=Le,zr._title=ut||"";var Ur,Vs;for(Ur=Dt.node._next;Ur;)Vs=Ur._next,Ur.unlink(),zr.appendChild(Ur),Ur=Vs;if(q.appendChild(zr),this.processEmphasis(Dt.previousDelimiter),this.removeBracket(),Dt.node.unlink(),!we)for(Dt=this.brackets;Dt!==null;)Dt.image||(Dt.active=!1),Dt=Dt.previous;return!0}else return this.removeBracket(),this.pos=ae,q.appendChild(Zo("]")),!0},eke=function(q,ae,we){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:q,previous:this.brackets,previousDelimiter:this.delimiters,index:ae,image:we,active:!0}},tke=function(){this.brackets=this.brackets.previous},ike=function(q){var ae;return(ae=this.match(SAe))?(q.appendChild(Zo(Lle(ae))),!0):!1},rke=function(q){var ae;return(ae=this.match(PAe))?(this.options.smart?q.appendChild(Zo(ae.replace(AAe,"").replace(kAe,function(we){var Le=0,ut=0;return we.length%3===0?ut=we.length/3:we.length%2===0?Le=we.length/2:we.length%3===2?(Le=1,ut=(we.length-2)/3):(Le=2,ut=(we.length-4)/3),"".repeat(ut)+"".repeat(Le)}))):q.appendChild(Zo(ae)),!0):!1},nke=function(q){this.pos+=1;var ae=q._lastChild;if(ae&&ae.type==="text"&&ae._literal[ae._literal.length-1]===" "){var we=ae._literal[ae._literal.length-2]===" ";ae._literal=ae._literal.replace(RAe,""),q.appendChild(new a(we?"linebreak":"softbreak"))}else q.appendChild(new a("softbreak"));return this.match(IAe),!0},ske=function(q,ae){this.subject=q,this.pos=0;var we,Le,ut,nt,ui=this.pos;if(nt=this.parseLinkLabel(),nt===0)return 0;if(we=this.subject.substr(0,nt),this.peek()===bAe)this.pos++;else return this.pos=ui,0;if(this.spnl(),Le=this.parseLinkDestination(),Le===null)return this.pos=ui,0;var Dt=this.pos;this.spnl(),this.pos!==Dt&&(ut=this.parseLinkTitle()),ut===null&&(ut="",this.pos=Dt);var bi=!0;if(this.match(Zle)===null&&(ut===""?bi=!1:(ut="",this.pos=Dt,bi=this.match(Zle)!==null)),!bi)return this.pos=ui,0;var Fr=Kle(we);return Fr===""?(this.pos=ui,0):(ae[Fr]||(ae[Fr]={destination:Le,title:ut}),this.pos-ui)},oke=function(q){var ae=!1,we=this.peek();if(we===-1)return!1;switch(we){case jle:ae=this.parseNewline(q);break;case Gle:ae=this.parseBackslash(q);break;case mAe:ae=this.parseBackticks(q);break;case VA:case mE:ae=this.handleDelim(we,q);break;case Gp:case qp:ae=this.options.smart&&this.handleDelim(we,q);break;case zle:ae=this.parseOpenBracket(q);break;case yAe:ae=this.parseBang(q);break;case gAe:ae=this.parseCloseBracket(q);break;case Ule:ae=this.parseAutolink(q)||this.parseHtmlTag(q);break;case vAe:ae=this.parseEntity(q);break;default:ae=this.parseString(q);break}return ae||(this.pos+=1,q.appendChild(Zo(qA(we)))),!0},ake=function(q){for(this.subject=q._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(q););q._string_content=null,this.processEmphasis(null)};function lke(q){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:FAe,peek:NAe,spnl:$Ae,parseBackticks:BAe,parseBackslash:jAe,parseAutolink:zAe,parseHtmlTag:UAe,scanDelims:GAe,handleDelim:qAe,parseLinkTitle:YAe,parseLinkDestination:XAe,parseLinkLabel:ZAe,parseOpenBracket:KAe,parseBang:JAe,parseCloseBracket:QAe,addBracket:eke,removeBracket:tke,parseEntity:ike,parseString:rke,parseNewline:nke,parseReference:ske,parseInline:oke,processEmphasis:WAe,removeDelimiter:HAe,options:q||{},parse:ake}}var gE=4,Jle=9,uke=10,Qle=62,cke=60,eue=32,tue=91,hke=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+Ole+"|"+Ple+")\\s*$","i")],dke=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],fke=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,pke=/^[#`~*+_=<>0-9-]/,iue=/[^ \t\f\v\r\n]/,mke=/^[*+-]/,gke=/^(\d{1,9})([.)])/,yke=/^#{1,6}(?:[ \t]+|$)/,vke=/^`{3,}(?!.*`)|^~{3,}/,bke=/^(?:`{3,}|~{3,})(?= *$)/,_ke=/^(?:=+|-+)[ \t]*$/,xke=/\r\n|\n|\r/,wke=function(q){return!iue.test(q)},b1=function(q){return q===eue||q===Jle},Yl=function(q,ae){return ae<q.length?q.charCodeAt(ae):-1},rue=function(q){for(;q;){if(q._lastLineBlank)return!0;var ae=q.type;if(!q._lastLineChecked&&(ae==="list"||ae==="item"))q._lastLineChecked=!0,q=q._lastChild;else{q._lastLineChecked=!0;break}}return!1},Eke=function(){if(this.partiallyConsumedTab){this.offset+=1;var q=4-this.column%4;this.tip._string_content+=" ".repeat(q)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},Ske=function(q,ae){for(;!this.blocks[this.tip.type].canContain(q);)this.finalize(this.tip,this.lineNumber-1);var we=ae+1,Le=new a(q,[[this.lineNumber,we],[0,0]]);return Le._string_content="",this.tip.appendChild(Le),this.tip=Le,Le},Cke=function(q,ae){var we=q.currentLine.slice(q.nextNonspace),Le,ut,nt,ui,Dt={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:q.indent};if(q.indent>=4)return null;if(Le=we.match(mke))Dt.type="bullet",Dt.bulletChar=Le[0][0];else if((Le=we.match(gke))&&(ae.type!=="paragraph"||Le[1]==="1"))Dt.type="ordered",Dt.start=parseInt(Le[1]),Dt.delimiter=Le[2];else return null;if(ut=Yl(q.currentLine,q.nextNonspace+Le[0].length),!(ut===-1||ut===Jle||ut===eue)||ae.type==="paragraph"&&!q.currentLine.slice(q.nextNonspace+Le[0].length).match(iue))return null;q.advanceNextNonspace(),q.advanceOffset(Le[0].length,!0),nt=q.column,ui=q.offset;do q.advanceOffset(1,!0),ut=Yl(q.currentLine,q.offset);while(q.column-nt<5&&b1(ut));var bi=Yl(q.currentLine,q.offset)===-1,Fr=q.column-nt;return Fr>=5||Fr<1||bi?(Dt.padding=Le[0].length+1,q.column=nt,q.offset=ui,b1(Yl(q.currentLine,q.offset))&&q.advanceOffset(1,!0)):Dt.padding=Le[0].length+Fr,Dt},Tke=function(q,ae){return q.type===ae.type&&q.delimiter===ae.delimiter&&q.bulletChar===ae.bulletChar},Ake=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var q=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=q}this.allClosed=!0}},nue={document:{continue:function(){return 0},finalize:function(){},canContain:function(q){return q!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(q,ae){for(var we=ae._firstChild;we;){if(rue(we)&&we._next){ae._listData.tight=!1;break}for(var Le=we._firstChild;Le;){if(rue(Le)&&(we._next||Le._next)){ae._listData.tight=!1;break}Le=Le._next}we=we._next}},canContain:function(q){return q==="item"},acceptsLines:!1},block_quote:{continue:function(q){var ae=q.currentLine;if(!q.indented&&Yl(ae,q.nextNonspace)===Qle)q.advanceNextNonspace(),q.advanceOffset(1,!1),b1(Yl(ae,q.offset))&&q.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(q){return q!=="item"},acceptsLines:!1},item:{continue:function(q,ae){if(q.blank){if(ae._firstChild==null)return 1;q.advanceNextNonspace()}else if(q.indent>=ae._listData.markerOffset+ae._listData.padding)q.advanceOffset(ae._listData.markerOffset+ae._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(q){return q!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(q,ae){var we=q.currentLine,Le=q.indent;if(ae._isFenced){var ut=Le<=3&&we.charAt(q.nextNonspace)===ae._fenceChar&&we.slice(q.nextNonspace).match(bke);if(ut&&ut[0].length>=ae._fenceLength)return q.lastLineLength=q.offset+Le+ut[0].length,q.finalize(ae,q.lineNumber),2;for(var nt=ae._fenceOffset;nt>0&&b1(Yl(we,q.offset));)q.advanceOffset(1,!0),nt--}else if(Le>=gE)q.advanceOffset(gE,!0);else if(q.blank)q.advanceNextNonspace();else return 1;return 0},finalize:function(q,ae){if(ae._isFenced){var we=ae._string_content,Le=we.indexOf(`
`),ut=we.slice(0,Le),nt=we.slice(Le+1);ae.info=$le(ut.trim()),ae._literal=nt}else ae._literal=ae._string_content.replace(/(\n *)+$/,`
`);ae._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(q,ae){return q.blank&&(ae._htmlBlockType===6||ae._htmlBlockType===7)?1:0},finalize:function(q,ae){ae._literal=ae._string_content.replace(/(\n *)+$/,""),ae._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(q){return q.blank?1:0},finalize:function(q,ae){for(var we,Le=!1;Yl(ae._string_content,0)===tue&&(we=q.inlineParser.parseReference(ae._string_content,q.refmap));)ae._string_content=ae._string_content.slice(we),Le=!0;Le&&wke(ae._string_content)&&ae.unlink()},canContain:function(){return!1},acceptsLines:!0}},kke=[function(q){return!q.indented&&Yl(q.currentLine,q.nextNonspace)===Qle?(q.advanceNextNonspace(),q.advanceOffset(1,!1),b1(Yl(q.currentLine,q.offset))&&q.advanceOffset(1,!0),q.closeUnmatchedBlocks(),q.addChild("block_quote",q.nextNonspace),1):0},function(q){var ae;if(!q.indented&&(ae=q.currentLine.slice(q.nextNonspace).match(yke))){q.advanceNextNonspace(),q.advanceOffset(ae[0].length,!1),q.closeUnmatchedBlocks();var we=q.addChild("heading",q.nextNonspace);return we.level=ae[0].trim().length,we._string_content=q.currentLine.slice(q.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),q.advanceOffset(q.currentLine.length-q.offset),2}else return 0},function(q){var ae;if(!q.indented&&(ae=q.currentLine.slice(q.nextNonspace).match(vke))){var we=ae[0].length;q.closeUnmatchedBlocks();var Le=q.addChild("code_block",q.nextNonspace);return Le._isFenced=!0,Le._fenceLength=we,Le._fenceChar=ae[0][0],Le._fenceOffset=q.indent,q.advanceNextNonspace(),q.advanceOffset(we,!1),2}else return 0},function(q,ae){if(!q.indented&&Yl(q.currentLine,q.nextNonspace)===cke){var we=q.currentLine.slice(q.nextNonspace),Le;for(Le=1;Le<=7;Le++)if(hke[Le].test(we)&&(Le<7||ae.type!=="paragraph")){q.closeUnmatchedBlocks();var ut=q.addChild("html_block",q.offset);return ut._htmlBlockType=Le,2}}return 0},function(q,ae){var we;if(!q.indented&&ae.type==="paragraph"&&(we=q.currentLine.slice(q.nextNonspace).match(_ke))){q.closeUnmatchedBlocks();for(var Le;Yl(ae._string_content,0)===tue&&(Le=q.inlineParser.parseReference(ae._string_content,q.refmap));)ae._string_content=ae._string_content.slice(Le);if(ae._string_content.length>0){var ut=new a("heading",ae.sourcepos);return ut.level=we[0][0]==="="?1:2,ut._string_content=ae._string_content,ae.insertAfter(ut),ae.unlink(),q.tip=ut,q.advanceOffset(q.currentLine.length-q.offset,!1),2}else return 0}else return 0},function(q){return!q.indented&&fke.test(q.currentLine.slice(q.nextNonspace))?(q.closeUnmatchedBlocks(),q.addChild("thematic_break",q.nextNonspace),q.advanceOffset(q.currentLine.length-q.offset,!1),2):0},function(q,ae){var we;return(!q.indented||ae.type==="list")&&(we=Cke(q,ae))?(q.closeUnmatchedBlocks(),(q.tip.type!=="list"||!Tke(ae._listData,we))&&(ae=q.addChild("list",q.nextNonspace),ae._listData=we),ae=q.addChild("item",q.nextNonspace),ae._listData=we,1):0},function(q){return q.indented&&q.tip.type!=="paragraph"&&!q.blank?(q.advanceOffset(gE,!0),q.closeUnmatchedBlocks(),q.addChild("code_block",q.offset),2):0}],Dke=function(q,ae){for(var we=this.currentLine,Le,ut,nt;q>0&&(nt=we[this.offset]);)nt==="	"?(Le=4-this.column%4,ae?(this.partiallyConsumedTab=Le>q,ut=Le>q?q:Le,this.column+=ut,this.offset+=this.partiallyConsumedTab?0:1,q-=ut):(this.partiallyConsumedTab=!1,this.column+=Le,this.offset+=1,q-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,q-=1)},Mke=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},Lke=function(){for(var q=this.currentLine,ae=this.offset,we=this.column,Le;(Le=q.charAt(ae))!=="";)if(Le===" ")ae++,we++;else if(Le==="	")ae++,we+=4-we%4;else break;this.blank=Le===`
`||Le==="\r"||Le==="",this.nextNonspace=ae,this.nextNonspaceColumn=we,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=gE},Rke=function(q){var ae=!0,we,Le=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,q.indexOf("\0")!==-1&&(q=q.replace(/\0/g,"")),this.currentLine=q;for(var ut;(ut=Le._lastChild)&&ut._open;){switch(Le=ut,this.findNextNonspace(),this.blocks[Le.type].continue(this,Le)){case 0:break;case 1:ae=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!ae){Le=Le._parent;break}}this.allClosed=Le===this.oldtip,this.lastMatchedContainer=Le;for(var nt=Le.type!=="paragraph"&&nue[Le.type].acceptsLines,ui=this.blockStarts,Dt=ui.length;!nt;){if(this.findNextNonspace(),!this.indented&&!pke.test(q.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var bi=0;bi<Dt;){var Fr=ui[bi](this,Le);if(Fr===1){Le=this.tip;break}else if(Fr===2){Le=this.tip,nt=!0;break}else bi++}if(bi===Dt){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&Le.lastChild&&(Le.lastChild._lastLineBlank=!0),we=Le.type;for(var fr=this.blank&&!(we==="block_quote"||we==="code_block"&&Le._isFenced||we==="item"&&!Le._firstChild&&Le.sourcepos[0][0]===this.lineNumber),pr=Le;pr;)pr._lastLineBlank=fr,pr=pr._parent;this.blocks[we].acceptsLines?(this.addLine(),we==="html_block"&&Le._htmlBlockType>=1&&Le._htmlBlockType<=5&&dke[Le._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=q.length,this.finalize(Le,this.lineNumber))):this.offset<q.length&&!this.blank&&(Le=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=q.length},Ike=function(q,ae){var we=q._parent;q._open=!1,q.sourcepos[1]=[ae,this.lastLineLength],this.blocks[q.type].finalize(this,q),this.tip=we},Oke=function(q){var ae,we,Le,ut=q.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;we=ut.next();)ae=we.node,Le=ae.type,!we.entering&&(Le==="paragraph"||Le==="heading")&&this.inlineParser.parse(ae)},sue=function(){var q=new a("document",[[1,1],[0,0]]);return q},Pke=function(q){this.doc=new sue,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var ae=q.split(xke),we=ae.length;q.charCodeAt(q.length-1)===uke&&(we-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var Le=0;Le<we;Le++)this.incorporateLine(ae[Le]);for(;this.tip;)this.finalize(this.tip,we);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function Fke(q){return{doc:new sue,blocks:nue,blockStarts:kke,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new lke(q),findNextNonspace:Lke,advanceOffset:Dke,advanceNextNonspace:Mke,addLine:Eke,addChild:Ske,incorporateLine:Rke,finalize:Ike,processInlines:Oke,closeUnmatchedBlocks:Ake,parse:Pke,options:q||{}}}function ef(){}function Nke(q){var ae=q.walker(),we,Le;for(this.buffer="",this.lastOut=`
`;we=ae.next();)Le=we.node.type,this[Le]&&this[Le](we.node,we.entering);return this.buffer}function $ke(q){this.buffer+=q,this.lastOut=q}function Bke(){this.lastOut!==`
`&&this.lit(`
`)}function jke(q){this.lit(q)}function zke(q){return q}ef.prototype.render=Nke,ef.prototype.out=jke,ef.prototype.lit=$ke,ef.prototype.cr=Bke,ef.prototype.esc=zke;var Uke=/^javascript:|vbscript:|file:|data:/i,Gke=/^data:image\/(?:png|gif|jpeg|webp)/i,oue=function(q){return Uke.test(q)&&!Gke.test(q)};function qke(q,ae,we){if(!(this.disableTags>0)){if(this.buffer+="<"+q,ae&&ae.length>0)for(var Le=0,ut;(ut=ae[Le])!==void 0;)this.buffer+=" "+ut[0]+'="'+ut[1]+'"',Le++;we&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function jn(q){q=q||{},q.softbreak=q.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=q}function Hke(q){this.out(q.literal)}function Vke(){this.lit(this.options.softbreak)}function Wke(){this.tag("br",[],!0),this.cr()}function Yke(q,ae){var we=this.attrs(q);ae?(this.options.safe&&oue(q.destination)||we.push(["href",this.esc(q.destination)]),q.title&&we.push(["title",this.esc(q.title)]),this.tag("a",we)):this.tag("/a")}function Xke(q,ae){ae?(this.disableTags===0&&(this.options.safe&&oue(q.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(q.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(q.title&&this.lit('" title="'+this.esc(q.title)),this.lit('" />')))}function Zke(q,ae){this.tag(ae?"em":"/em")}function Kke(q,ae){this.tag(ae?"strong":"/strong")}function Jke(q,ae){var we=q.parent.parent,Le=this.attrs(q);we!==null&&we.type==="list"&&we.listTight||(ae?(this.cr(),this.tag("p",Le)):(this.tag("/p"),this.cr()))}function Qke(q,ae){var we="h"+q.level,Le=this.attrs(q);ae?(this.cr(),this.tag(we,Le)):(this.tag("/"+we),this.cr())}function eDe(q){this.tag("code"),this.out(q.literal),this.tag("/code")}function tDe(q){var ae=q.info?q.info.split(/\s+/):[],we=this.attrs(q);ae.length>0&&ae[0].length>0&&we.push(["class","language-"+this.esc(ae[0])]),this.cr(),this.tag("pre"),this.tag("code",we),this.out(q.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function iDe(q){var ae=this.attrs(q);this.cr(),this.tag("hr",ae,!0),this.cr()}function rDe(q,ae){var we=this.attrs(q);ae?(this.cr(),this.tag("blockquote",we),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function nDe(q,ae){var we=q.listType==="bullet"?"ul":"ol",Le=this.attrs(q);if(ae){var ut=q.listStart;ut!==null&&ut!==1&&Le.push(["start",ut.toString()]),this.cr(),this.tag(we,Le),this.cr()}else this.cr(),this.tag("/"+we),this.cr()}function sDe(q,ae){var we=this.attrs(q);ae?this.tag("li",we):(this.tag("/li"),this.cr())}function oDe(q){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(q.literal)}function aDe(q){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(q.literal),this.cr()}function lDe(q,ae){ae&&q.onEnter?this.lit(q.onEnter):!ae&&q.onExit&&this.lit(q.onExit)}function uDe(q,ae){this.cr(),ae&&q.onEnter?this.lit(q.onEnter):!ae&&q.onExit&&this.lit(q.onExit),this.cr()}function cDe(q){this.lit(this.esc(q))}function hDe(q){var ae=[];if(this.options.sourcepos){var we=q.sourcepos;we&&ae.push(["data-sourcepos",String(we[0][0])+":"+String(we[0][1])+"-"+String(we[1][0])+":"+String(we[1][1])])}return ae}jn.prototype=Object.create(ef.prototype),jn.prototype.text=Hke,jn.prototype.html_inline=oDe,jn.prototype.html_block=aDe,jn.prototype.softbreak=Vke,jn.prototype.linebreak=Wke,jn.prototype.link=Yke,jn.prototype.image=Xke,jn.prototype.emph=Zke,jn.prototype.strong=Kke,jn.prototype.paragraph=Jke,jn.prototype.heading=Qke,jn.prototype.code=eDe,jn.prototype.code_block=tDe,jn.prototype.thematic_break=iDe,jn.prototype.block_quote=rDe,jn.prototype.list=nDe,jn.prototype.item=sDe,jn.prototype.custom_inline=lDe,jn.prototype.custom_block=uDe,jn.prototype.esc=Ble,jn.prototype.out=cDe,jn.prototype.tag=qke,jn.prototype.attrs=hDe;var dDe=/\<[^>]*\>/;function fDe(q){return q.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function Hp(q){q=q||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=q}function pDe(q){this.buffer="";var ae,we,Le=q.walker(),ut,nt,ui,Dt,bi,Fr,fr=this.options;for(fr.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;ut=Le.next();)if(ui=ut.entering,nt=ut.node,Fr=nt.type,Dt=nt.isContainer,bi=Fr==="thematic_break"||Fr==="linebreak"||Fr==="softbreak",we=fDe(Fr),ui){switch(ae=[],Fr){case"document":ae.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":nt.listType!==null&&ae.push(["type",nt.listType.toLowerCase()]),nt.listStart!==null&&ae.push(["start",String(nt.listStart)]),nt.listTight!==null&&ae.push(["tight",nt.listTight?"true":"false"]);var pr=nt.listDelimiter;if(pr!==null){var zr="";pr==="."?zr="period":zr="paren",ae.push(["delimiter",zr])}break;case"code_block":nt.info&&ae.push(["info",nt.info]);break;case"heading":ae.push(["level",String(nt.level)]);break;case"link":case"image":ae.push(["destination",nt.destination]),ae.push(["title",nt.title]);break;case"custom_inline":case"custom_block":ae.push(["on_enter",nt.onEnter]),ae.push(["on_exit",nt.onExit]);break}if(fr.sourcepos){var Ur=nt.sourcepos;Ur&&ae.push(["sourcepos",String(Ur[0][0])+":"+String(Ur[0][1])+"-"+String(Ur[1][0])+":"+String(Ur[1][1])])}if(this.cr(),this.out(this.tag(we,ae,bi)),Dt)this.indentLevel+=1;else if(!Dt&&!bi){var Vs=nt.literal;Vs&&this.out(this.esc(Vs)),this.out(this.tag("/"+we))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+we));return fr.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function mDe(q){this.disableTags>0?this.buffer+=q.replace(dDe,""):this.buffer+=q,this.lastOut=q}function gDe(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var q=this.indentLevel;q>0;q--)this.buffer+=this.indent}}function yDe(q,ae,we){var Le="<"+q;if(ae&&ae.length>0)for(var ut=0,nt;(nt=ae[ut])!==void 0;)Le+=" "+nt[0]+'="'+this.esc(nt[1])+'"',ut++;return we&&(Le+=" /"),Le+=">",Le}Hp.prototype=Object.create(ef.prototype),Hp.prototype.render=pDe,Hp.prototype.out=mDe,Hp.prototype.cr=gDe,Hp.prototype.tag=yDe,Hp.prototype.esc=Ble,t.HtmlRenderer=jn,t.Node=a,t.Parser=Fke,t.Renderer=ef,t.XmlRenderer=Hp,Object.defineProperty(t,"__esModule",{value:!0})})}(k2,k2.exports)),k2.exports}var D2={exports:{}},ZD,nge;function Hdt(){if(nge)return ZD;nge=1;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=n}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,v=0,b=0,_=m.length;b!==_&&m[b]===0;)b++,g++;for(var E=(_-b)*c+1>>>0,C=new Uint8Array(E);b!==_;){for(var T=m[b],D=0,M=E-1;(T!==0||D<v)&&M!==-1;M--,D++)T+=256*C[M]>>>0,C[M]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");v=D,b++}for(var A=E-v;A!==E&&C[A]===0;)A++;for(var I=l.repeat(g);A<E;++A)I+=e.charAt(C[A]);return I}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var g=0;if(m[g]!==" "){for(var v=0,b=0;m[g]===l;)v++,g++;for(var _=(m.length-g)*u+1>>>0,E=new Uint8Array(_);m[g];){var C=t[m.charCodeAt(g)];if(C===255)return;for(var T=0,D=_-1;(C!==0||T<b)&&D!==-1;D--,T++)C+=a*E[D]>>>0,E[D]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=T,g++}if(m[g]!==" "){for(var M=_-b;M!==_&&E[M]===0;)M++;for(var A=new Uint8Array(v+(_-M)),I=v;M!==_;)A[I++]=E[M++];return A}}}function p(m){var g=d(m);if(g)return g;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:d,decode:p}}return ZD=i,ZD}var M2={},KD={},JD={},QD,sge;function Vdt(){if(sge)return QD;sge=1;var i=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,r=sp(),n=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return QD=function(l){if(typeof l!="function")return!1;if(t.test(e.call(l)))return!0;if(!r){var u=i.call(l);return u==="[object GeneratorFunction]"}if(!n)return!1;if(typeof o>"u"){var c=s();o=c?n(c):!1}return n(l)===o},QD}var e3,oge;function Wdt(){if(oge)return e3;oge=1;var i=iI;return e3=function(t){return!!i(t)},e3}var age;function Ydt(){return age||(age=1,function(i){var e=VR,t=Vdt(),r=iI,n=Wdt();function s(fe){return fe.call.bind(fe)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),u=s(Number.prototype.valueOf),c=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(o)var d=s(BigInt.prototype.valueOf);if(a)var p=s(Symbol.prototype.valueOf);function m(fe,oe){if(typeof fe!="object")return!1;try{return oe(fe),!0}catch{return!1}}i.isArgumentsObject=e,i.isGeneratorFunction=t,i.isTypedArray=n;function g(fe){return typeof Promise<"u"&&fe instanceof Promise||fe!==null&&typeof fe=="object"&&typeof fe.then=="function"&&typeof fe.catch=="function"}i.isPromise=g;function v(fe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(fe):n(fe)||z(fe)}i.isArrayBufferView=v;function b(fe){return r(fe)==="Uint8Array"}i.isUint8Array=b;function _(fe){return r(fe)==="Uint8ClampedArray"}i.isUint8ClampedArray=_;function E(fe){return r(fe)==="Uint16Array"}i.isUint16Array=E;function C(fe){return r(fe)==="Uint32Array"}i.isUint32Array=C;function T(fe){return r(fe)==="Int8Array"}i.isInt8Array=T;function D(fe){return r(fe)==="Int16Array"}i.isInt16Array=D;function M(fe){return r(fe)==="Int32Array"}i.isInt32Array=M;function A(fe){return r(fe)==="Float32Array"}i.isFloat32Array=A;function I(fe){return r(fe)==="Float64Array"}i.isFloat64Array=I;function P(fe){return r(fe)==="BigInt64Array"}i.isBigInt64Array=P;function U(fe){return r(fe)==="BigUint64Array"}i.isBigUint64Array=U;function K(fe){return l(fe)==="[object Map]"}K.working=typeof Map<"u"&&K(new Map);function L(fe){return typeof Map>"u"?!1:K.working?K(fe):fe instanceof Map}i.isMap=L;function F(fe){return l(fe)==="[object Set]"}F.working=typeof Set<"u"&&F(new Set);function $(fe){return typeof Set>"u"?!1:F.working?F(fe):fe instanceof Set}i.isSet=$;function H(fe){return l(fe)==="[object WeakMap]"}H.working=typeof WeakMap<"u"&&H(new WeakMap);function V(fe){return typeof WeakMap>"u"?!1:H.working?H(fe):fe instanceof WeakMap}i.isWeakMap=V;function J(fe){return l(fe)==="[object WeakSet]"}J.working=typeof WeakSet<"u"&&J(new WeakSet);function ee(fe){return J(fe)}i.isWeakSet=ee;function ie(fe){return l(fe)==="[object ArrayBuffer]"}ie.working=typeof ArrayBuffer<"u"&&ie(new ArrayBuffer);function de(fe){return typeof ArrayBuffer>"u"?!1:ie.working?ie(fe):fe instanceof ArrayBuffer}i.isArrayBuffer=de;function te(fe){return l(fe)==="[object DataView]"}te.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&te(new DataView(new ArrayBuffer(1),0,1));function z(fe){return typeof DataView>"u"?!1:te.working?te(fe):fe instanceof DataView}i.isDataView=z;var ne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ve(fe){return l(fe)==="[object SharedArrayBuffer]"}function $e(fe){return typeof ne>"u"?!1:(typeof ve.working>"u"&&(ve.working=ve(new ne)),ve.working?ve(fe):fe instanceof ne)}i.isSharedArrayBuffer=$e;function Xe(fe){return l(fe)==="[object AsyncFunction]"}i.isAsyncFunction=Xe;function ot(fe){return l(fe)==="[object Map Iterator]"}i.isMapIterator=ot;function Be(fe){return l(fe)==="[object Set Iterator]"}i.isSetIterator=Be;function He(fe){return l(fe)==="[object Generator]"}i.isGeneratorObject=He;function st(fe){return l(fe)==="[object WebAssembly.Module]"}i.isWebAssemblyCompiledModule=st;function xt(fe){return m(fe,u)}i.isNumberObject=xt;function kt(fe){return m(fe,c)}i.isStringObject=kt;function Tt(fe){return m(fe,h)}i.isBooleanObject=Tt;function Ei(fe){return o&&m(fe,d)}i.isBigIntObject=Ei;function si(fe){return a&&m(fe,p)}i.isSymbolObject=si;function ur(fe){return xt(fe)||kt(fe)||Tt(fe)||Ei(fe)||si(fe)}i.isBoxedPrimitive=ur;function Ve(fe){return typeof Uint8Array<"u"&&(de(fe)||$e(fe))}i.isAnyArrayBuffer=Ve,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(fe){Object.defineProperty(i,fe,{enumerable:!1,value:function(){throw new Error(fe+" is not supported in userland")}})})}(JD)),JD}var t3,lge;function Xdt(){return lge||(lge=1,t3=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),t3}var L2={exports:{}},uge;function Zdt(){return uge||(uge=1,typeof Object.create=="function"?L2.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:L2.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),L2.exports}var cge;function hge(){return cge||(cge=1,function(i){var e={},t=Object.getOwnPropertyDescriptors||function(ne){for(var ve=Object.keys(ne),$e={},Xe=0;Xe<ve.length;Xe++)$e[ve[Xe]]=Object.getOwnPropertyDescriptor(ne,ve[Xe]);return $e},r=/%[sdj%]/g;i.format=function(z){if(!D(z)){for(var ne=[],ve=0;ve<arguments.length;ve++)ne.push(a(arguments[ve]));return ne.join(" ")}for(var ve=1,$e=arguments,Xe=$e.length,ot=String(z).replace(r,function(He){if(He==="%%")return"%";if(ve>=Xe)return He;switch(He){case"%s":return String($e[ve++]);case"%d":return Number($e[ve++]);case"%j":try{return JSON.stringify($e[ve++])}catch{return"[Circular]"}default:return He}}),Be=$e[ve];ve<Xe;Be=$e[++ve])E(Be)||!P(Be)?ot+=" "+Be:ot+=" "+a(Be);return ot},i.deprecate=function(z,ne){if(typeof process<"u"&&process.noDeprecation===!0)return z;if(typeof process>"u")return function(){return i.deprecate(z,ne).apply(this,arguments)};var ve=!1;function $e(){if(!ve){if(process.throwDeprecation)throw new Error(ne);process.traceDeprecation?console.trace(ne):console.error(ne),ve=!0}return z.apply(this,arguments)}return $e};var n={},s=/^$/;if(e.NODE_DEBUG){var o=e.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}i.debuglog=function(z){if(z=z.toUpperCase(),!n[z])if(s.test(z)){var ne=process.pid;n[z]=function(){var ve=i.format.apply(i,arguments);console.error("%s %d: %s",z,ne,ve)}}else n[z]=function(){};return n[z]};function a(z,ne){var ve={seen:[],stylize:u};return arguments.length>=3&&(ve.depth=arguments[2]),arguments.length>=4&&(ve.colors=arguments[3]),_(ne)?ve.showHidden=ne:ne&&i._extend(ve,ne),A(ve.showHidden)&&(ve.showHidden=!1),A(ve.depth)&&(ve.depth=2),A(ve.colors)&&(ve.colors=!1),A(ve.customInspect)&&(ve.customInspect=!0),ve.colors&&(ve.stylize=l),h(ve,z,ve.depth)}i.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(z,ne){var ve=a.styles[ne];return ve?"\x1B["+a.colors[ve][0]+"m"+z+"\x1B["+a.colors[ve][1]+"m":z}function u(z,ne){return z}function c(z){var ne={};return z.forEach(function(ve,$e){ne[ve]=!0}),ne}function h(z,ne,ve){if(z.customInspect&&ne&&L(ne.inspect)&&ne.inspect!==i.inspect&&!(ne.constructor&&ne.constructor.prototype===ne)){var $e=ne.inspect(ve,z);return D($e)||($e=h(z,$e,ve)),$e}var Xe=d(z,ne);if(Xe)return Xe;var ot=Object.keys(ne),Be=c(ot);if(z.showHidden&&(ot=Object.getOwnPropertyNames(ne)),K(ne)&&(ot.indexOf("message")>=0||ot.indexOf("description")>=0))return p(ne);if(ot.length===0){if(L(ne)){var He=ne.name?": "+ne.name:"";return z.stylize("[Function"+He+"]","special")}if(I(ne))return z.stylize(RegExp.prototype.toString.call(ne),"regexp");if(U(ne))return z.stylize(Date.prototype.toString.call(ne),"date");if(K(ne))return p(ne)}var st="",xt=!1,kt=["{","}"];if(b(ne)&&(xt=!0,kt=["[","]"]),L(ne)){var Tt=ne.name?": "+ne.name:"";st=" [Function"+Tt+"]"}if(I(ne)&&(st=" "+RegExp.prototype.toString.call(ne)),U(ne)&&(st=" "+Date.prototype.toUTCString.call(ne)),K(ne)&&(st=" "+p(ne)),ot.length===0&&(!xt||ne.length==0))return kt[0]+st+kt[1];if(ve<0)return I(ne)?z.stylize(RegExp.prototype.toString.call(ne),"regexp"):z.stylize("[Object]","special");z.seen.push(ne);var Ei;return xt?Ei=m(z,ne,ve,Be,ot):Ei=ot.map(function(si){return g(z,ne,ve,Be,si,xt)}),z.seen.pop(),v(Ei,st,kt)}function d(z,ne){if(A(ne))return z.stylize("undefined","undefined");if(D(ne)){var ve="'"+JSON.stringify(ne).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(ve,"string")}if(T(ne))return z.stylize(""+ne,"number");if(_(ne))return z.stylize(""+ne,"boolean");if(E(ne))return z.stylize("null","null")}function p(z){return"["+Error.prototype.toString.call(z)+"]"}function m(z,ne,ve,$e,Xe){for(var ot=[],Be=0,He=ne.length;Be<He;++Be)ee(ne,String(Be))?ot.push(g(z,ne,ve,$e,String(Be),!0)):ot.push("");return Xe.forEach(function(st){st.match(/^\d+$/)||ot.push(g(z,ne,ve,$e,st,!0))}),ot}function g(z,ne,ve,$e,Xe,ot){var Be,He,st;if(st=Object.getOwnPropertyDescriptor(ne,Xe)||{value:ne[Xe]},st.get?st.set?He=z.stylize("[Getter/Setter]","special"):He=z.stylize("[Getter]","special"):st.set&&(He=z.stylize("[Setter]","special")),ee($e,Xe)||(Be="["+Xe+"]"),He||(z.seen.indexOf(st.value)<0?(E(ve)?He=h(z,st.value,null):He=h(z,st.value,ve-1),He.indexOf(`
`)>-1&&(ot?He=He.split(`
`).map(function(xt){return"  "+xt}).join(`
`).slice(2):He=`
`+He.split(`
`).map(function(xt){return"   "+xt}).join(`
`))):He=z.stylize("[Circular]","special")),A(Be)){if(ot&&Xe.match(/^\d+$/))return He;Be=JSON.stringify(""+Xe),Be.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Be=Be.slice(1,-1),Be=z.stylize(Be,"name")):(Be=Be.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Be=z.stylize(Be,"string"))}return Be+": "+He}function v(z,ne,ve){var $e=z.reduce(function(Xe,ot){return ot.indexOf(`
`)>=0,Xe+ot.replace(/\u001b\[\d\d?m/g,"").length+1},0);return $e>60?ve[0]+(ne===""?"":ne+`
 `)+" "+z.join(`,
  `)+" "+ve[1]:ve[0]+ne+" "+z.join(", ")+" "+ve[1]}i.types=Ydt();function b(z){return Array.isArray(z)}i.isArray=b;function _(z){return typeof z=="boolean"}i.isBoolean=_;function E(z){return z===null}i.isNull=E;function C(z){return z==null}i.isNullOrUndefined=C;function T(z){return typeof z=="number"}i.isNumber=T;function D(z){return typeof z=="string"}i.isString=D;function M(z){return typeof z=="symbol"}i.isSymbol=M;function A(z){return z===void 0}i.isUndefined=A;function I(z){return P(z)&&$(z)==="[object RegExp]"}i.isRegExp=I,i.types.isRegExp=I;function P(z){return typeof z=="object"&&z!==null}i.isObject=P;function U(z){return P(z)&&$(z)==="[object Date]"}i.isDate=U,i.types.isDate=U;function K(z){return P(z)&&($(z)==="[object Error]"||z instanceof Error)}i.isError=K,i.types.isNativeError=K;function L(z){return typeof z=="function"}i.isFunction=L;function F(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}i.isPrimitive=F,i.isBuffer=Xdt();function $(z){return Object.prototype.toString.call(z)}function H(z){return z<10?"0"+z.toString(10):z.toString(10)}var V=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function J(){var z=new Date,ne=[H(z.getHours()),H(z.getMinutes()),H(z.getSeconds())].join(":");return[z.getDate(),V[z.getMonth()],ne].join(" ")}i.log=function(){console.log("%s - %s",J(),i.format.apply(i,arguments))},i.inherits=Zdt(),i._extend=function(z,ne){if(!ne||!P(ne))return z;for(var ve=Object.keys(ne),$e=ve.length;$e--;)z[ve[$e]]=ne[ve[$e]];return z};function ee(z,ne){return Object.prototype.hasOwnProperty.call(z,ne)}var ie=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;i.promisify=function(ne){if(typeof ne!="function")throw new TypeError('The "original" argument must be of type Function');if(ie&&ne[ie]){var ve=ne[ie];if(typeof ve!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ve,ie,{value:ve,enumerable:!1,writable:!1,configurable:!0}),ve}function ve(){for(var $e,Xe,ot=new Promise(function(st,xt){$e=st,Xe=xt}),Be=[],He=0;He<arguments.length;He++)Be.push(arguments[He]);Be.push(function(st,xt){st?Xe(st):$e(xt)});try{ne.apply(this,Be)}catch(st){Xe(st)}return ot}return Object.setPrototypeOf(ve,Object.getPrototypeOf(ne)),ie&&Object.defineProperty(ve,ie,{value:ve,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ve,t(ne))},i.promisify.custom=ie;function de(z,ne){if(!z){var ve=new Error("Promise was rejected with a falsy value");ve.reason=z,z=ve}return ne(z)}function te(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function ne(){for(var ve=[],$e=0;$e<arguments.length;$e++)ve.push(arguments[$e]);var Xe=ve.pop();if(typeof Xe!="function")throw new TypeError("The last argument must be of type Function");var ot=this,Be=function(){return Xe.apply(ot,arguments)};z.apply(this,ve).then(function(He){process.nextTick(Be.bind(null,null,He))},function(He){process.nextTick(de.bind(null,He,Be))})}return Object.setPrototypeOf(ne,Object.getPrototypeOf(z)),Object.defineProperties(ne,t(z)),ne}i.callbackify=te}(KD)),KD}var dge;function Kdt(){return dge||(dge=1,M2.TextEncoder=typeof TextEncoder<"u"?TextEncoder:hge().TextEncoder,M2.TextDecoder=typeof TextDecoder<"u"?TextDecoder:hge().TextDecoder),M2}var i3,fge;function NP(){if(fge)return i3;fge=1;const{TextEncoder:i,TextDecoder:e}=Kdt(),t=new e,r=a=>t.decode(a),n=new i,s=a=>n.encode(a);function o(a,l){const u=new Uint8Array(l);let c=0;for(const h of a)u.set(h,c),c+=h.length;return u}return i3={decodeText:r,encodeText:s,concat:o},i3}var r3,pge;function Jdt(){if(pge)return r3;pge=1;const{encodeText:i}=NP();class e{constructor(r,n,s,o){this.name=r,this.code=n,this.codeBuf=i(this.code),this.alphabet=o,this.codec=s(o)}encode(r){return this.codec.encode(r)}decode(r){for(const n of r)if(this.alphabet&&this.alphabet.indexOf(n)<0)throw new Error(`invalid character '${n}' in '${r}'`);return this.codec.decode(r)}}return r3=e,r3}var n3,mge;function Qdt(){if(mge)return n3;mge=1;const i=(r,n,s)=>{const o={};for(let d=0;d<n.length;++d)o[n[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*s/8|0);let u=0,c=0,h=0;for(let d=0;d<a;++d){const p=o[r[d]];if(p===void 0)throw new SyntaxError("Invalid character "+r[d]);c=c<<s|p,u+=s,u>=8&&(u-=8,l[h++]=255&c>>u)}if(u>=s||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return l},e=(r,n,s)=>{const o=n[n.length-1]==="=",a=(1<<s)-1;let l="",u=0,c=0;for(let h=0;h<r.length;++h)for(c=c<<8|r[h],u+=8;u>s;)u-=s,l+=n[a&c>>u];if(u&&(l+=n[a&c<<s-u]),o)for(;l.length*s&7;)l+="=";return l};return n3={rfc4648:r=>n=>({encode(s){return e(s,n,r)},decode(s){return i(s,n,r)}})},n3}var s3,gge;function eft(){if(gge)return s3;gge=1;const i=Hdt(),e=Jdt(),{rfc4648:t}=Qdt(),{decodeText:r,encodeText:n}=NP(),o=[["identity","\0",()=>({encode:r,decode:n}),""],["base2","0",t(1),"01"],["base8","7",t(3),"01234567"],["base10","9",i,"0123456789"],["base16","f",t(4),"0123456789abcdef"],["base16upper","F",t(4),"0123456789ABCDEF"],["base32hex","v",t(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",t(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",t(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",t(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",t(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",i,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",i,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",i,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",i,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=o.reduce((u,c)=>(u[c[0]]=new e(c[0],c[1],c[2],c[3]),u),{}),l=o.reduce((u,c)=>(u[c[1]]=a[c[0]],u),{});return s3={names:a,codes:l},s3}var yge;function tft(){return yge||(yge=1,function(i,e){const t=eft(),{encodeText:r,decodeText:n,concat:s}=NP();function o(p,m){if(!m)throw new Error("requires an encoded Uint8Array");const{name:g,codeBuf:v}=h(p);return c(g,m),s([v,m],v.length+m.length)}function a(p,m){const g=h(p),v=r(g.encode(m));return s([g.codeBuf,v],g.codeBuf.length+v.length)}function l(p){p instanceof Uint8Array&&(p=n(p));const m=p[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(m)&&(p=p.toLowerCase()),h(p[0]).decode(p.substring(1))}function u(p){if(p instanceof Uint8Array&&(p=n(p)),Object.prototype.toString.call(p)!=="[object String]")return!1;try{return h(p[0]).name}catch{return!1}}function c(p,m){h(p).decode(n(m))}function h(p){if(Object.prototype.hasOwnProperty.call(t.names,p))return t.names[p];if(Object.prototype.hasOwnProperty.call(t.codes,p))return t.codes[p];throw new Error(`Unsupported encoding: ${p}`)}function d(p){return p instanceof Uint8Array&&(p=n(p)),h(p[0])}e=i.exports=o,e.encode=a,e.decode=l,e.isEncoded=u,e.encoding=h,e.encodingFromData=d,e.names=Object.freeze(t.names),e.codes=Object.freeze(t.codes)}(D2,D2.exports)),D2.exports}var o3,vge;function ift(){if(vge)return o3;vge=1,o3=n;var i=128,e=127,t=~e,r=Math.pow(2,31);function n(s,o,a){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw n.bytes=0,new RangeError("Could not encode varint");o=o||[],a=a||0;for(var l=a;s>=r;)o[a++]=s&255|i,s/=128;for(;s&t;)o[a++]=s&255|i,s>>>=7;return o[a]=s|0,n.bytes=a-l+1,o}return o3}var a3,bge;function rft(){if(bge)return a3;bge=1,a3=t;var i=128,e=127;function t(r,o){var s=0,o=o||0,a=0,l=o,u,c=r.length;do{if(l>=c||a>49)throw t.bytes=0,new RangeError("Could not decode varint");u=r[l++],s+=a<28?(u&e)<<a:(u&e)*Math.pow(2,a),a+=7}while(u>=i);return t.bytes=l-o,s}return a3}var l3,_ge;function nft(){if(_ge)return l3;_ge=1;var i=Math.pow(2,7),e=Math.pow(2,14),t=Math.pow(2,21),r=Math.pow(2,28),n=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return l3=function(u){return u<i?1:u<e?2:u<t?3:u<r?4:u<n?5:u<s?6:u<o?7:u<a?8:u<l?9:10},l3}var u3,xge;function sft(){return xge||(xge=1,u3={encode:ift(),decode:rft(),encodingLength:nft()}),u3}var c3,wge;function oft(){return wge||(wge=1,c3={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),c3}function aft(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<i.length;n++){var s=i.charAt(n),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=n}var a=i.length,l=i.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,v=0,b=0,_=m.length;b!==_&&m[b]===0;)b++,g++;for(var E=(_-b)*c+1>>>0,C=new Uint8Array(E);b!==_;){for(var T=m[b],D=0,M=E-1;(T!==0||D<v)&&M!==-1;M--,D++)T+=256*C[M]>>>0,C[M]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");v=D,b++}for(var A=E-v;A!==E&&C[A]===0;)A++;for(var I=l.repeat(g);A<E;++A)I+=i.charAt(C[A]);return I}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var g=0;if(m[g]!==" "){for(var v=0,b=0;m[g]===l;)v++,g++;for(var _=(m.length-g)*u+1>>>0,E=new Uint8Array(_);m[g];){var C=t[m.charCodeAt(g)];if(C===255)return;for(var T=0,D=_-1;(C!==0||T<b)&&D!==-1;D--,T++)C+=a*E[D]>>>0,E[D]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=T,g++}if(m[g]!==" "){for(var M=_-b;M!==_&&E[M]===0;)M++;for(var A=new Uint8Array(v+(_-M)),I=v;M!==_;)A[I++]=E[M++];return A}}}function p(m){var g=d(m);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var lft=aft,uft=lft;const BSe=new Uint8Array(0),cft=i=>i.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),hft=i=>{const e=i.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):BSe},jSe=(i,e)=>{if(i===e)return!0;if(i.byteLength!==e.byteLength)return!1;for(let t=0;t<i.byteLength;t++)if(i[t]!==e[t])return!1;return!0},gg=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},dft=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),zSe=i=>new TextEncoder().encode(i),USe=i=>new TextDecoder().decode(i),fft=Object.freeze(Object.defineProperty({__proto__:null,coerce:gg,empty:BSe,equals:jSe,fromHex:hft,fromString:zSe,isBinary:dft,toHex:cft,toString:USe},Symbol.toStringTag,{value:"Module"}));class pft{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class mft{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return GSe(this,e)}}class gft{constructor(e){this.decoders=e}or(e){return GSe(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const GSe=(i,e)=>new gft({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class yft{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new pft(e,t,r),this.decoder=new mft(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const FA=({name:i,prefix:e,encode:t,decode:r})=>new yft(i,e,t,r),Ow=({prefix:i,name:e,alphabet:t})=>{const{encode:r,decode:n}=uft(t,e);return FA({prefix:i,name:e,encode:r,decode:s=>gg(n(s))})},vft=(i,e,t,r)=>{const n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let s=i.length;for(;i[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let a=0,l=0,u=0;for(let c=0;c<s;++c){const h=n[i[c]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<t|h,a+=t,a>=8&&(a-=8,o[u++]=255&l>>a)}if(a>=t||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},bft=(i,e,t)=>{const r=e[e.length-1]==="=",n=(1<<t)-1;let s="",o=0,a=0;for(let l=0;l<i.length;++l)for(a=a<<8|i[l],o+=8;o>t;)o-=t,s+=e[n&a>>o];if(o&&(s+=e[n&a<<t-o]),r)for(;s.length*t&7;)s+="=";return s},qo=({name:i,prefix:e,bitsPerChar:t,alphabet:r})=>FA({prefix:e,name:i,encode(n){return bft(n,r,t)},decode(n){return vft(n,r,t,i)}}),_ft=FA({prefix:"\0",name:"identity",encode:i=>USe(i),decode:i=>zSe(i)}),xft=Object.freeze(Object.defineProperty({__proto__:null,identity:_ft},Symbol.toStringTag,{value:"Module"})),wft=qo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Eft=Object.freeze(Object.defineProperty({__proto__:null,base2:wft},Symbol.toStringTag,{value:"Module"})),Sft=qo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Cft=Object.freeze(Object.defineProperty({__proto__:null,base8:Sft},Symbol.toStringTag,{value:"Module"})),Tft=Ow({prefix:"9",name:"base10",alphabet:"0123456789"}),Aft=Object.freeze(Object.defineProperty({__proto__:null,base10:Tft},Symbol.toStringTag,{value:"Module"})),kft=qo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Dft=qo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Mft=Object.freeze(Object.defineProperty({__proto__:null,base16:kft,base16upper:Dft},Symbol.toStringTag,{value:"Module"})),B_=qo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lft=qo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Rft=qo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ift=qo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Oft=qo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pft=qo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Fft=qo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nft=qo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$ft=qo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Bft=Object.freeze(Object.defineProperty({__proto__:null,base32:B_,base32hex:Oft,base32hexpad:Fft,base32hexpadupper:Nft,base32hexupper:Pft,base32pad:Rft,base32padupper:Ift,base32upper:Lft,base32z:$ft},Symbol.toStringTag,{value:"Module"})),jft=Ow({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zft=Ow({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Uft=Object.freeze(Object.defineProperty({__proto__:null,base36:jft,base36upper:zft},Symbol.toStringTag,{value:"Module"})),Uh=Ow({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gft=Ow({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),qft=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Uh,base58flickr:Gft},Symbol.toStringTag,{value:"Module"})),Hft=qo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Vft=qo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wft=qo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Yft=qo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Xft=Object.freeze(Object.defineProperty({__proto__:null,base64:Hft,base64pad:Vft,base64url:Wft,base64urlpad:Yft},Symbol.toStringTag,{value:"Module"})),qSe=Array.from(""),Zft=qSe.reduce((i,e,t)=>(i[t]=e,i),[]),Kft=qSe.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Jft(i){return i.reduce((e,t)=>(e+=Zft[t],e),"")}function Qft(i){const e=[];for(const t of i){const r=Kft[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const ept=FA({prefix:"",name:"base256emoji",encode:Jft,decode:Qft}),tpt=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ept},Symbol.toStringTag,{value:"Module"}));var ipt=HSe,Ege=128,rpt=127,npt=~rpt,spt=Math.pow(2,31);function HSe(i,e,t){e=e||[],t=t||0;for(var r=t;i>=spt;)e[t++]=i&255|Ege,i/=128;for(;i&npt;)e[t++]=i&255|Ege,i>>>=7;return e[t]=i|0,HSe.bytes=t-r+1,e}var opt=PL,apt=128,Sge=127;function PL(i,r){var t=0,r=r||0,n=0,s=r,o,a=i.length;do{if(s>=a)throw PL.bytes=0,new RangeError("Could not decode varint");o=i[s++],t+=n<28?(o&Sge)<<n:(o&Sge)*Math.pow(2,n),n+=7}while(o>=apt);return PL.bytes=s-r,t}var lpt=Math.pow(2,7),upt=Math.pow(2,14),cpt=Math.pow(2,21),hpt=Math.pow(2,28),dpt=Math.pow(2,35),fpt=Math.pow(2,42),ppt=Math.pow(2,49),mpt=Math.pow(2,56),gpt=Math.pow(2,63),ypt=function(i){return i<lpt?1:i<upt?2:i<cpt?3:i<hpt?4:i<dpt?5:i<fpt?6:i<ppt?7:i<mpt?8:i<gpt?9:10},vpt={encode:ipt,decode:opt,encodingLength:ypt},GC=vpt;const qC=(i,e=0)=>[GC.decode(i,e),GC.decode.bytes],Dx=(i,e,t=0)=>(GC.encode(i,e,t),e),Mx=i=>GC.encodingLength(i),bpt=Object.freeze(Object.defineProperty({__proto__:null,decode:qC,encodeTo:Dx,encodingLength:Mx},Symbol.toStringTag,{value:"Module"})),Lx=(i,e)=>{const t=e.byteLength,r=Mx(i),n=r+Mx(t),s=new Uint8Array(n+t);return Dx(i,s,0),Dx(t,s,r),s.set(e,n),new NA(i,t,e,s)},VSe=i=>{const e=gg(i),[t,r]=qC(e),[n,s]=qC(e.subarray(r)),o=e.subarray(r+s);if(o.byteLength!==n)throw new Error("Incorrect length");return new NA(t,n,o,e)},WSe=(i,e)=>i===e?!0:i.code===e.code&&i.size===e.size&&jSe(i.bytes,e.bytes);class NA{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const _pt=Object.freeze(Object.defineProperty({__proto__:null,Digest:NA,create:Lx,decode:VSe,equals:WSe},Symbol.toStringTag,{value:"Module"})),$P=({name:i,code:e,encode:t})=>new YSe(i,e,t);class YSe{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Lx(this.code,t):t.then(r=>Lx(this.code,r))}else throw Error("Unknown type, must be binary type")}}const xpt=Object.freeze(Object.defineProperty({__proto__:null,Hasher:YSe,from:$P},Symbol.toStringTag,{value:"Module"})),XSe=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),wpt=$P({name:"sha2-256",code:18,encode:XSe("SHA-256")}),Ept=$P({name:"sha2-512",code:19,encode:XSe("SHA-512")}),Spt=Object.freeze(Object.defineProperty({__proto__:null,sha256:wpt,sha512:Ept},Symbol.toStringTag,{value:"Module"})),ZSe=0,Cpt="identity",KSe=gg,Tpt=i=>Lx(ZSe,KSe(i)),Apt={code:ZSe,name:Cpt,encode:KSe,digest:Tpt},kpt=Object.freeze(Object.defineProperty({__proto__:null,identity:Apt},Symbol.toStringTag,{value:"Module"})),Dpt="raw",Mpt=85,Lpt=i=>gg(i),Rpt=i=>gg(i),Ipt=Object.freeze(Object.defineProperty({__proto__:null,code:Mpt,decode:Rpt,encode:Lpt,name:Dpt},Symbol.toStringTag,{value:"Module"})),Opt=new TextEncoder,Ppt=new TextDecoder,Fpt="json",Npt=512,$pt=i=>Opt.encode(JSON.stringify(i)),Bpt=i=>JSON.parse(Ppt.decode(i)),jpt=Object.freeze(Object.defineProperty({__proto__:null,code:Npt,decode:Bpt,encode:$pt,name:Fpt},Symbol.toStringTag,{value:"Module"}));class ea{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:I2,byteLength:I2,code:R2,version:R2,multihash:R2,bytes:R2,_baseCache:I2,asCID:I2})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==G1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==qpt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ea.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Lx(e,t);return ea.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&WSe(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return Upt(t,n,e||Uh.encoder);default:return Gpt(t,n,e||B_.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Vpt(/^0\.0/,Wpt),!!(e&&(e[Tge]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof ea)return e;if(e!=null&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:s}=e;return new ea(t,r,n,s||Cge(t,r,n.bytes))}else if(e!=null&&e[Tge]===!0){const{version:t,multihash:r,code:n}=e,s=VSe(r);return ea.create(t,n,s)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==G1)throw new Error(`Version 0 CID must use dag-pb (code: ${G1}) block encoding`);return new ea(e,t,r,r.bytes)}case 1:{const n=Cge(e,t,r.bytes);return new ea(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return ea.create(0,G1,e)}static createV1(e,t){return ea.create(1,e,t)}static decode(e){const[t,r]=ea.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=ea.inspectBytes(e),r=t.size-t.multihashSize,n=gg(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=n.subarray(t.multihashSize-t.digestSize),o=new NA(t.multihashCode,t.digestSize,s,n);return[t.version===0?ea.createV0(o):ea.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[h,d]=qC(e.subarray(t));return t+=d,h};let n=r(),s=G1;if(n===18?(n=0,t=0):n===1&&(s=r()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);const o=t,a=r(),l=r(),u=t+l,c=u-o;return{version:n,codec:s,multihashCode:a,digestSize:l,multihashSize:c,size:u}}static parse(e,t){const[r,n]=zpt(e,t),s=ea.decode(n);return s._baseCache.set(r,e),s}}const zpt=(i,e)=>{switch(i[0]){case"Q":{const t=e||Uh;return[Uh.prefix,t.decode(`${Uh.prefix}${i}`)]}case Uh.prefix:{const t=e||Uh;return[Uh.prefix,t.decode(i)]}case B_.prefix:{const t=e||B_;return[B_.prefix,t.decode(i)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[i[0],e.decode(i)]}}},Upt=(i,e,t)=>{const{prefix:r}=t;if(r!==Uh.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const n=e.get(r);if(n==null){const s=t.encode(i).slice(1);return e.set(r,s),s}else return n},Gpt=(i,e,t)=>{const{prefix:r}=t,n=e.get(r);if(n==null){const s=t.encode(i);return e.set(r,s),s}else return n},G1=112,qpt=18,Cge=(i,e,t)=>{const r=Mx(i),n=r+Mx(e),s=new Uint8Array(n+t.byteLength);return Dx(i,s,0),Dx(e,s,r),s.set(t,n),s},Tge=Symbol.for("@ipld/js-cid/CID"),R2={writable:!1,configurable:!1,enumerable:!0},I2={writable:!1,enumerable:!1,configurable:!1},Hpt="0.0.0-dev",Vpt=(i,e)=>{if(i.test(Hpt))console.warn(e);else throw new Error(e)},Wpt=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,Ypt={...xft,...Eft,...Cft,...Aft,...Mft,...Bft,...Uft,...qft,...Xft,...tpt},Xpt={...Spt,...kpt},Zpt={raw:Ipt,json:jpt},Kpt=Object.freeze(Object.defineProperty({__proto__:null,CID:ea,bases:Ypt,bytes:fft,codecs:Zpt,digest:_pt,hasher:xpt,hashes:Xpt,varint:bpt},Symbol.toStringTag,{value:"Module"})),Jpt=VL(Kpt);var h3,Age;function JSe(){if(Age)return h3;Age=1;const{bases:i}=Jpt;function e(s,o,a,l){return{name:s,prefix:o,encoder:{name:s,prefix:o,encode:a},decoder:{decode:l}}}const t=e("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),r=e("ascii","a",s=>{let o="a";for(let a=0;a<s.length;a++)o+=String.fromCharCode(s[a]);return o},s=>{s=s.substring(1);const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o});return h3={utf8:t,"utf-8":t,hex:i.base16,latin1:r,ascii:r,binary:r,...i},h3}var d3,kge;function Qpt(){if(kge)return d3;kge=1;const i=JSe();function e(t,r="utf8"){const n=i[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return n.encoder.encode(t).substring(1)}return d3=e,d3}var f3,Dge;function emt(){if(Dge)return f3;Dge=1;const i=JSe();function e(t,r="utf8"){const n=i[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return n.decoder.decode(`${n.prefix}${t}`)}return f3=e,f3}var p3,Mge;function tmt(){if(Mge)return p3;Mge=1;function i(e,t){t||(t=e.reduce((s,o)=>s+o.length,0));const r=new Uint8Array(t);let n=0;for(const s of e)r.set(s,n),n+=s.length;return r}return p3=i,p3}var m3,Lge;function imt(){if(Lge)return m3;Lge=1;const i=tft(),e=sft(),{names:t}=oft(),r=Qpt(),n=emt(),s=tmt(),o={};for(const _ in t){const E=_;o[t[E]]=E}function a(_){if(!(_ instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(_,"base16")}function l(_){return n(_,"base16")}function u(_){if(!(_ instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(i.encode("base58btc",_)).slice(1)}function c(_){const E=_ instanceof Uint8Array?r(_):_;return i.decode("z"+E)}function h(_){if(!(_ instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(_.length<2)throw new Error("multihash too short. must be > 2 bytes.");const E=e.decode(_);if(!g(E))throw new Error(`multihash unknown function code: 0x${E.toString(16)}`);_=_.slice(e.decode.bytes);const C=e.decode(_);if(C<0)throw new Error(`multihash invalid length: ${C}`);if(_=_.slice(e.decode.bytes),_.length!==C)throw new Error(`multihash length inconsistent: 0x${r(_,"base16")}`);return{code:E,name:o[E],length:C,digest:_}}function d(_,E,C){if(!_||E===void 0)throw new Error("multihash encode requires at least two args: digest, code");const T=p(E);if(!(_ instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(C==null&&(C=_.length),C&&_.length!==C)throw new Error("digest length should be equal to specified length.");const D=e.encode(T),M=e.encode(C);return s([D,M,_],D.length+M.length+_.length)}function p(_){let E=_;if(typeof _=="string"){if(t[_]===void 0)throw new Error(`Unrecognized hash function named: ${_}`);E=t[_]}if(typeof E!="number")throw new Error(`Hash function code should be a number. Got: ${E}`);if(o[E]===void 0&&!m(E))throw new Error(`Unrecognized function code: ${E}`);return E}function m(_){return _>0&&_<16}function g(_){return!!(m(_)||o[_])}function v(_){h(_)}function b(_){return v(_),_.subarray(0,2)}return m3={names:t,codes:Object.freeze(o),toHexString:a,fromHexString:l,toB58String:u,fromB58String:c,decode:h,encode:d,coerceCode:p,isAppCode:m,validate:v,prefix:b,isValidCode:g},m3}var g3,Rge;function BP(){if(Rge)return g3;Rge=1;const i=Iw(),e=Uv(),t={array(r,n=!1,s=""){return i.toList(r,n,o=>t.format(o,s))},object(r){return i.toObject(r,n=>t.format(n))},null(r=null){return r===null&&(r=i.t("n/a")),i.toNothing(r)},number(r,n=""){return typeof r!="number"&&(r=parseFloat(r)),i.unit(e.numberFormatter.format(r),n)},string(r,n=""){return i.unit(i.e(r).replace(/(\r\n|\r|\n){2,}/g,"<br>"),n)},boolean(r){return r?"":""},format(r,n=""){return typeof r=="boolean"?t.boolean(r):typeof r=="number"?t.number(r,n):typeof r=="string"?t.string(r,n):Array.isArray(r)?t.array(r,n):i.isObject(r)?t.object(r):t.null()}};return g3=t,g3}const rmt="Afar",nmt="Abkhazian",smt="Afrikaans",omt="Akan",amt="Amharic",lmt="Aragonese",umt="Arabic",cmt="Assamese",hmt="Avar",dmt="Aymara",fmt="Azerbaijani",pmt="Bashkir",mmt="Belarusian",gmt="Bulgarian",ymt="Bihari",vmt="Bislama",bmt="Bambara",_mt="Bengali",xmt="Tibetan",wmt="Breton",Emt="Bosnian",Smt="Catalan",Cmt="Chechen",Tmt="Chamorro",Amt="Corsican",kmt="Cree",Dmt="Czech",Mmt="Old Bulgarian",Lmt="Chuvash",Rmt="Welsh",Imt="Danish",Omt="German",Pmt="Divehi",Fmt="Dzongkha",Nmt="Ewe",$mt="Greek",Bmt="English",jmt="Esperanto",zmt="Spanish",Umt="Estonian",Gmt="Basque",qmt="Persian",Hmt="Peul",Vmt="Finnish",Wmt="Fijian",Ymt="Faroese",Xmt="French",Zmt="West Frisian",Kmt="Irish",Jmt="Scottish Gaelic",Qmt="Galician",egt="Guarani",tgt="Gujarati",igt="Manx",rgt="Hausa",ngt="Hebrew",sgt="Hindi",ogt="Hiri Motu",agt="Croatian",lgt="Haitian",ugt="Hungarian",cgt="Armenian",hgt="Herero",dgt="Interlingua",fgt="Indonesian",pgt="Interlingue",mgt="Igbo",ggt="Sichuan Yi",ygt="Inupiak",vgt="Ido",bgt="Icelandic",_gt="Italian",xgt="Inuktitut",wgt="Japanese",Egt="Javanese",Sgt="Georgian",Cgt="Kongo",Tgt="Kikuyu",Agt="Kuanyama",kgt="Kazakh",Dgt="Greenlandic",Mgt="Cambodian",Lgt="Kannada",Rgt="Korean",Igt="Kanuri",Ogt="Kashmiri",Pgt="Kurdish",Fgt="Komi",Ngt="Cornish",$gt="Kirghiz",Bgt="Latin",jgt="Luxembourgish",zgt="Ganda",Ugt="Limburgian",Ggt="Lingala",qgt="Laotian",Hgt="Lithuanian",Vgt="Latvian",Wgt="Malagasy",Ygt="Marshallese",Xgt="Maori",Zgt="Macedonian",Kgt="Malayalam",Jgt="Mongolian",Qgt="Moldovan",e0t="Marathi",t0t="Malay",i0t="Maltese",r0t="Burmese",n0t="Nauruan",s0t="North Ndebele",o0t="Nepali",a0t="Ndonga",l0t="Dutch",u0t="Norwegian Nynorsk",c0t="Norwegian",h0t="South Ndebele",d0t="Navajo",f0t="Chichewa",p0t="Occitan",m0t="Ojibwa",g0t="Oromo",y0t="Oriya",v0t="Ossetian",b0t="Punjabi",_0t="Pali",x0t="Polish",w0t="Pashto",E0t="Portuguese",S0t="Quechua",C0t="Raeto Romance",T0t="Kirundi",A0t="Romanian",k0t="Russian",D0t="Rwandi",M0t="Sanskrit",L0t="Sardinian",R0t="Sindhi",I0t="Sango",O0t="Serbo-Croatian",P0t="Sinhalese",F0t="Slovak",N0t="Slovenian",$0t="Samoan",B0t="Shona",j0t="Somalia",z0t="Albanian",U0t="Serbian",G0t="Swati",q0t="Southern Sotho",H0t="Sundanese",V0t="Swedish",W0t="Swahili",Y0t="Tamil",X0t="Telugu",Z0t="Tajik",K0t="Thai",J0t="Tigrinya",Q0t="Turkmen",eyt="Tagalog",tyt="Tswana",iyt="Tonga",ryt="Turkish",nyt="Tsonga",syt="Tatar",oyt="Twi",ayt="Tahitian",lyt="Uyghur",uyt="Ukrainian",cyt="Urdu",hyt="Venda",dyt="Vietnamese",fyt="Volapk",pyt="Walloon",myt="Wolof",gyt="Xhosa",yyt="Yiddish",vyt="Yoruba",byt="Zhuang",_yt="Chinese",xyt="Zulu",wyt={aa:rmt,ab:nmt,af:smt,ak:omt,am:amt,an:lmt,ar:umt,as:cmt,av:hmt,ay:dmt,az:fmt,ba:pmt,be:mmt,bg:gmt,bh:ymt,bi:vmt,bm:bmt,bn:_mt,bo:xmt,br:wmt,bs:Emt,ca:Smt,ce:Cmt,ch:Tmt,co:Amt,cr:kmt,cs:Dmt,cu:Mmt,cv:Lmt,cy:Rmt,da:Imt,de:Omt,dv:Pmt,dz:Fmt,ee:Nmt,el:$mt,en:Bmt,eo:jmt,es:zmt,et:Umt,eu:Gmt,fa:qmt,ff:Hmt,fi:Vmt,fj:Wmt,fo:Ymt,fr:Xmt,fy:Zmt,ga:Kmt,gd:Jmt,gl:Qmt,gn:egt,gu:tgt,gv:igt,ha:rgt,he:ngt,hi:sgt,ho:ogt,hr:agt,ht:lgt,hu:ugt,hy:cgt,hz:hgt,ia:dgt,id:fgt,ie:pgt,ig:mgt,ii:ggt,ik:ygt,io:vgt,is:bgt,it:_gt,iu:xgt,ja:wgt,jv:Egt,ka:Sgt,kg:Cgt,ki:Tgt,kj:Agt,kk:kgt,kl:Dgt,km:Mgt,kn:Lgt,ko:Rgt,kr:Igt,ks:Ogt,ku:Pgt,kv:Fgt,kw:Ngt,ky:$gt,la:Bgt,lb:jgt,lg:zgt,li:Ugt,ln:Ggt,lo:qgt,lt:Hgt,lv:Vgt,mg:Wgt,mh:Ygt,mi:Xgt,mk:Zgt,ml:Kgt,mn:Jgt,mo:Qgt,mr:e0t,ms:t0t,mt:i0t,my:r0t,na:n0t,nd:s0t,ne:o0t,ng:a0t,nl:l0t,nn:u0t,no:c0t,nr:h0t,nv:d0t,ny:f0t,oc:p0t,oj:m0t,om:g0t,or:y0t,os:v0t,pa:b0t,pi:_0t,pl:x0t,ps:w0t,pt:E0t,qu:S0t,rm:C0t,rn:T0t,ro:A0t,ru:k0t,rw:D0t,sa:M0t,sc:L0t,sd:R0t,sg:I0t,sh:O0t,si:P0t,sk:F0t,sl:N0t,sm:$0t,sn:B0t,so:j0t,sq:z0t,sr:U0t,ss:G0t,st:q0t,su:H0t,sv:V0t,sw:W0t,ta:Y0t,te:X0t,tg:Z0t,th:K0t,ti:J0t,tk:Q0t,tl:eyt,tn:tyt,to:iyt,tr:ryt,ts:nyt,tt:syt,tw:oyt,ty:ayt,ug:lyt,uk:uyt,ur:cyt,ve:hyt,vi:dyt,vo:fyt,wa:pyt,wo:myt,xh:gyt,yi:yyt,yo:vyt,za:byt,zh:_yt,zu:xyt};var y3,Ige;function QSe(){if(Ige)return y3;Ige=1;const i=Iw(),e=BP(),t=Uv(),r=PP,n={allowHtmlInCommonMark:!1,formatUrl(s,o,a={},l=null,u=null){let c=i.isObject(u)&&typeof u=="string"?u.title:s;return i.toLink(s,c,u.rel||"")},formatLink(s){return i.toList(s,!1,o=>i.toLink(o.href,o.title,o.rel))},formatMediaType(s,o,a={}){return i.e(i.t(n._formatMediaType(s,o,a)))},_formatMediaType(s,o,a={}){let l=!!a.shorten;const u=r.getDependency("content-type");if(!u)return l?"":i.e(s);let c;try{c=u.parse(s)}catch(h){return console.warn(h),l?"":i.e(s)}switch(c.type){case"image/tiff":return c.parameters.application==="geotiff"?c.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB2";case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";default:{let[h,d]=c.type.split("/");if(d=i.formatKey(d.replace(/^(vnd|x)[.+-]/,"")),l)return d;switch(h){case"audio":return`${d} audio`;case"image":return`${d} image`;case"font":return"Font";case"model":return`${d} 3D model`;case"video":return`${d} video`;case"text":case"application":return d;default:return s}}}},formatTimestamp(s){if(typeof s=="string")try{return t.dateTimeFormatter.format(new Date(s))}catch{}return e.null()},formatPercent0to1(s,o,a={}){return e.number(s*100,a.unit)},formatDate(s){if(typeof s=="string")try{return t.dateFormatter.format(new Date(s))}catch{}return e.null()},formatDuration(s){if(typeof s=="string"){const o=r.getDependency("@musement/iso-duration");if(!o)return i.e(s);const{isoDuration:a,en:l}=o;a.setLocales({en:l},{fallbackLocale:"en"});let u=a(s).humanize("en");return u.length===0?i.e(i.t("none")):i.e(u)}return e.null()},formatLanguageCode(s){if(Array.isArray(s))return i.toList(s,!0,n.formatLanguageCode,!1);if(typeof s!="string"||s.length<2)return e.null();const o=wyt,[a,...l]=s.split("-");if(a in o){const u=o[a];return l.length>0?i.e(i.t(`${u} (${l.join(" ")})`)):i.e(i.t(u))}return i.e(i.t(s))},formatLicense(s,o,a={},l=null){if(typeof s!="string"||s.length===0)return e.null();if(s!=="proprietary"&&s!=="various"&&s.match(/^[\w\.\-]+$/i))return i.toLink(`https://spdx.org/licenses/${s}.html`,s,"license");let u=Array.isArray(l.links)?l.links.filter(c=>i.isObject(c)&&typeof c.href=="string"&&c.rel==="license"):[];return u.length>0?i.toList(u,!1,c=>i.toLink(c.href,c.title||s,"license")):e.string(s)},formatProviders(s){return i.toList(s,!1,o=>{let a=o.name,l="",u="";return typeof o.url=="string"&&o.url.length>0&&(a=i.toLink(o.url,a)),Array.isArray(o.roles)&&o.roles.length>0&&(l=o.roles.map(c=>e.format(c)).join(", "),l=` (<em>${l}</em>)`),typeof o.description=="string"&&o.description.length>0&&(u=n.formatCommonMark(o.description)),`${a}${l}${u}`})},formatCommonMark(s){if(typeof s!="string"||s.length===0)return e.null();const o=r.getDependency("commonmark");let a;if(o){let l=new o.Parser;a=new o.HtmlRenderer({safe:!n.allowHtmlInCommonMark,smart:!0}).render(l.parse(s))}else n.allowHtmlInCommonMark?a=s:a=i.e(s);return`<div class="description">${a}</div>`},formatSoftware(s){if(!i.isObject(s))return e.null();let o=[];for(let a in s){let l=s[a];typeof l=="string"&&l.length>0||typeof l=="number"?o.push(`${a} (${l})`):o.push(a)}return i.toList(o,!0,null,!1)},formatDOI(s){return s=e.format(s),i.toLink(`http://doi.org/${s}`,s)},formatCRS(s){return i.toList(s,!1,o=>{if(typeof o=="string"){let a=o.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return i.toLink(o,a)}return e.format(o)})},formatEPSG(s){return typeof s=="string"&&(s=s.replace(/^epsg:/i,"")),s=parseInt(s,10),s>0?i.toLink(`http://epsg.io/${s}`,s):e.null()},formatExtent(s,o,a={}){return!Array.isArray(s)||s.length<2?e.null():s[0]===s[1]?e.format(s[0],a.unit):s[0]===null?`< ${e.format(s[1],a.unit)}`:s[1]===null?`> ${e.format(s[0],a.unit)}`:s.map(l=>e.format(l,a.unit)).join("  ")},formatHexColor(s){return typeof s!="string"||!s.match(/^#?[\dA-F]{3,8}$/i)?e.null():(s.startsWith("#")&&(s=s.substring(1)),`<div class="color" style="background-color: #${s}"><code class="color-code">#${s}</code></div>`)},formatPROJJSON(s){return i.isObject(s)?i.isObject(s.id)&&s.id.authority==="EPSG"&&typeof s.code=="number"&&s.code>0?"EPSG "+n.formatEPSG(s):typeof s.name=="string"?e.string(s.name):e.object(s):e.null()},formatTemporalExtent(s,o,a={}){if(!Array.isArray(s)||s.length!==2)return e.null();s=s.map(l=>{try{return l?new Date(l):null}catch{return null}});try{const[l,u]=s;if(l||u){const c=a.shorten?t.dateFormatter:t.dateTimeFormatter;return l?u?c.formatRange(l,u):i.t("{0} until present",[c.format(l)]):i.t("Until {0}",[c.format(u)])}}catch{}return e.null()},formatTemporalExtents(s,o,a={}){let l=(u,c)=>u[0]===null?-1:t.collator.compare(u[0],c[0]);return i.toList(s,l,u=>n.formatTemporalExtent(u,o,a))},formatWKT2(s){if(typeof s!="string")return e.null();let o=-1,a;try{a=s.replace(/([A-Z]+)\[|\]/ig,(l,u)=>l==="]"?(o--,l):(o++,`
${"  ".repeat(o)}${u}[`))}catch{a=s}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(s){if(typeof s!="number")return e.format(s);var o=s==0?0:Math.floor(Math.log(s)/Math.log(1024));return i.unit((s/Math.pow(1024,o)).toFixed(2)*1,n.fileSizeUnits[o])},formatChecksum(s){if(typeof s!="string")return e.null();const o=r.getDependency("multihashes");if(!o)return i.e(s);try{const a=o.decode(i.hexToUint8(s)),l=i.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${i.e(i.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${i.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return e.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(s){return s==="other"?i.t("non-standard"):typeof s=="string"&&s in n.fileDataTypes?i.abbrev(i.t(s),i.t(n.fileDataTypes[s])):e.null()},formatTransform(s){if(Array.isArray(s)&&s.length%3===0){let o=[];for(let a=0;a<s.length;a=a+3){let l=s.slice(a,a+3);o.push(`[${n.formatCSV(l)}]`)}return o.join("<br>")}else return n.formatCSV(s)},formatShape(s,o,a={}){return Array.isArray(s)?s.map(l=>e.format(l,a.unit)).join("  "):e.format(s,a.unit)},formatCSV(s){if(Array.isArray(s)){let o=s.find(a=>typeof a=="number")!==void 0;return s.map(e.format).join(o?"; ":", ")}else return e.format(s)},formatImage(s,o){let a="",l=null;if(i.isObject(s))l=s.href,a=s.title||"";else if(typeof s=="string")l=s;else return e.format(l);return`<img src="${i.e(l)}" title="${i.e(a)}" class="${i.e(o.replace(":","_"))}">`},formatPhone(s){return i.toLink(`tel:${s}`,s)},formatEmail(s){return i.toLink(`mailto:${s}`,s)},formatConcepts(s){return i.toList(s,!1,o=>{if(!i.isObject(o))return e.format(o);let a="";if(o.title){let l=o.title;o.url&&(l=i.toLink(o.url,o.title)),a+=`<strong>${l}</strong> (<code>${i.e(o.id)}</code>)`}else{let l=o.id;o.url&&(l=i.toLink(o.url,o.id)),a+=`<strong><code>${l}</code></strong>`}return o.description&&(a+=`<br><small>${i.e(o.description)}</small>`),a})},formatAddress(s){return i.toList(s,!1,o=>{if(!i.isObject(o))return e.format(o);let a=Array.isArray(o.deliveryPoint)?o.deliveryPoint.slice(0):[];if(o.postalCode&&o.city){let l=`${o.postalCode} ${o.city}`;o.administrativeArea&&(l+=` (${o.administrativeArea})`),typeof o.country=="string"&&o.country.length>0&&(o.country.length===2&&o.country.toUpperCase()===o.country?(l=o.country+"-"+l,a.push(l)):(a.push(l),a.push(o.country.toUpperCase())))}else o.city&&a.push(o.city),o.administrativeArea&&a.push(o.administrativeArea),o.postalCode&&a.push(o.postalCode),typeof o.country=="string"&&o.country.length>0&&a.push(o.country.toUpperCase());return e.string(a.join(`

`))})},formatGridCode(s){if(typeof s!="string")return e.format(s);let o=function(c,h,d,p){let m=h.length;if(m%2===1)c.push(`Code: ${h}`);else{let g=m/2,v=h.substring(0,g);c.push(`${d}: ${v}`);let b=h.substring(g,m);c.push(`${p}: ${b}`)}},[a,l]=s.split(/-(.*)/),u=[];switch(a){case"MGRS":u.push(i.abbrev(i.t(a),i.t("Military Grid Reference System")));let[,c,h,d,p]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);u.push(`${i.t("UTM Zone")}: ${c}`),u.push(`${i.t("Latitude Band")}: ${h}`),u.push(`${i.t("Square Identifier")}: ${d}`),p&&o(u,p,i.t("Easting"),i.t("Northing"));break;case"MSIN":u.push(i.t("MODIS Sinusoidal Tile Grid")),o(u,l,i.t("Horizontal"),i.t("Vertical"));break;case"WRS1":case"WRS2":let m=a.substring(3,4);u.push(i.abbrev(i.t("WRS-"+m),i.t("Worldwide Reference System "+m))),o(u,l,i.t("Path"),i.t("Row"));break;case"DOQ":u.push(_abbrev(i.t(a),i.t("Digital Orthophoto Quadrangle"))),u.push(`${i.t("Quadrangle")}: ${l}`);break;case"DOQQ":u.push(_abbrev(i.t(a),i.t("Digital Orthophoto Quarter Quadrangle")));let g=l.substr(0,l.length-2);u.push(`${i.t("Quadrangle")}: ${g}`);let v=l.substr(-2),b=v[0]==="N"?i.t("North"):i.t("South"),_=v[1]==="E"?i.t("East"):i.t("West");u.push(`${i.t("Quarter")}: ${b} ${_}`);break;case"MXRA":u.push(i.t("Maxar ARD Tile Grid"));let[E,C]=l.split(/-(.*)/);E.startsWith("Z")&&(E=E.substring(1)),u.push(`${i.t("UTM Zone")}: ${E}`),u.push(`${i.t("Quadkey")}: ${C}`);break;case"EASE":let[T,D]=l.split("-");if(T==="DGGS"){u.push(i.t("EASE-DGGS"));let[I,P,...U]=D.split(".");if(u.push(`${i.t("Level")}: ${I}`),P.length===6){u.push(`${i.t("Level 0 row cell")}: ${P.substring(0,3)}`),u.push(`${i.t("Level 0 column cell")}: ${P.substring(3,6)}`);for(let K in U){let L=U[K];L.length===2&&(u.push(`${i.t("Fraction of level {i} row cell",{i:K})}: ${L[0]}`),u.push(`${i.t("Fraction of level {i} column cell",{i:K})}: ${L[1]}`))}}break}case"CDEM":let[,M,A]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);u.push(i.t("Copernicus Digital Elevation Model Grid")),u.push(`${i.t("Easting")}: ${A}`),u.push(`${i.t("Northing")}: ${M}`);default:u.push(s)}return u.join("<br>")}};return y3=n,y3}var v3,Oge;function Eyt(){if(Oge)return v3;Oge=1;const i=PP,e=Iw(),t=Uv(),r=BP(),n=QSe();function s(v,b,_,E,C){let T={};for(let D in b){let M;try{let A=D.split(/:(.*)/);A.length===1&&A.unshift(C);let I=A[0];if(typeof E=="function"&&!E(D,[D]))continue;M=b[D];let P=i.getSpecification(D,_);P.ext&&(I=P.ext);let U=!1;_==="summaries"&&P.listWithKeys&&Array.isArray(M)&&M.length>0&&(M=M[0],U=!0);let K=null,L=[];if(e.isObject(P.items)){let $=M;P.listWithKeys&&($=Object.values($));let H=[];Array.isArray($)?H=e.keysFromListOfObjects($):e.isObject($)&&(H=Object.keys($)),K={},L=P.itemOrder.filter(V=>H.includes(V)),H.forEach(V=>{typeof P.items[V]>"u"?(K[V]={label:e.formatKey(V),explain:V},L.push(V)):(K[V]=Object.assign({},P.items[V]),K[V].label=m(V,P.items[V]))})}let F;if(_==="summaries")if(!U&&e.isObject(M))if(typeof M.minimum<"u"&&typeof M.maximum<"u"){const $=H=>p(H,D,v,b,P,E,[D]);M.minimum===M.maximum?F=$(M.minimum):M.minimum===null?F=`< ${$(M.maximum)}`:M.maximum===null?F=`> ${$(M.minimum)}`:F=`${$(M.minimum)}  ${$(M.maximum)}`}else F=r.object(M);else if(i.externalRenderer&&K){let $=U?Object.assign({},M):M.slice(0);for(let H in $){let V=e.isObject($[H])?{}:[];for(let J in K)V[J]=p($[H][J],J,v,b,K[J]);$[H]=V}}else Array.isArray(M)?F=e.toList(M,!P.custom&&!P.items,$=>p($,D,v,b,P)):console.warn(`Invalid summary value: ${M}`);typeof F>"u"&&(F=p(M,D,v,b,P,E,[D])),e.isObject(T[I])||(T[I]={extension:I,label:g(I),properties:{}}),T[I].properties[D]={label:m(D,P),value:M,formatted:F,items:K,itemOrder:L,spec:P}}catch(A){console.error(`Field '${D}' with value '${M}' resulted in an error`,A)}}return Object.values(T).sort((D,M)=>t.collator.compare(D.extension,M.extension))}function o(v,b,_=null,E=""){return s(b,v,"assets",_,E)}function a(v,b,_=null,E=""){return s(b,v,"links",_,E)}function l(v,b,_=null,E=""){return s(b,v,"providers",_,E)}function u(v,b=null,_=""){return s(v,v.summaries,"summaries",b,_)}function c(v,b=null,_=""){return s(v,v,"collection",b,_)}function h(v,b=null,_=""){return s(v,v,"catalog",b,_)}function d(v,b=null,_=""){return s(v,v.properties,"metadata",b,_)}function p(v,b,_=null,E=null,C=null,T=null,D=[]){if(e.isObject(C)||(C=i.getSpecification(b)),typeof C.format=="string"){let M=n[`format${C.format}`];return M||console.warn(`Formatter '${C.format}' not available.`),M(v,b,C,_,E)}else{if(typeof C.formatter=="function")return C.formatter(v,b,C,_,E);if(e.isObject(C.mapping)){let M=String(v);return typeof C.mapping[M]<"u"?v=C.mapping[M]:typeof C.mapping[M.toLowerCase()]<"u"?v=C.mapping[M.toLowerCase()]:typeof C.mapping[M.toUpperCase()]<"u"&&(v=C.mapping[M.toUpperCase()]),r.format(e.t(v),C.unit)}else{if(v===null&&C.null)return r.null(C.null);if(Array.isArray(v)){let M=(A,I)=>p(A,b,_,E,C,T,D.concat([I]));return typeof T=="function"&&D.length>0&&(v=v.filter((A,I)=>T(D[0],D.concat([I])))),i.externalRenderer&&(C.custom||C.items)?v.map(M):e.toList(v,!1,M)}else if(e.isObject(v)){let M=I=>e.isObject(C.items)?C.listWithKeys?{items:C.items,itemOrder:C.itemOrder}:C.items[I]:e.isObject(C.properties)?C.properties[I]:{},A=(I,P,U)=>p(I,P,_,U,M(P),T,D.concat([P]));if(i.externalRenderer&&(C.custom||C.items||C.properties)){let I={};for(let P in v)typeof T=="function"&&D.length>0&&!T(D[0],D.concat([k]))||(I[P]=A(v[P],P,v));return I}else{let I=U=>m(U,M(U)),P=C.listWithKeys?[]:C.itemOrder;return e.toObject(v,A,I,P,T,D)}}else return r.format(v,C.unit)}}}function m(v,b=null){if(e.isObject(b)||(b=i.getSpecification(v)),e.isObject(b)&&typeof b.label=="string"){if(typeof b.explain=="string")return b.explain.match(/^https?:\/\//i)?e.toLink(b.explain,e.t(b.label),"about"):e.abbrev(e.t(b.label),e.t(b.explain));if(typeof b.label=="string")return e.t(b.label)}return e.formatKey(v)}function g(v){return m(v,i.getExtension(v))}return v3={format:p,label:m,extension:g,formatCatalog:h,formatCollection:c,formatSummaries:u,formatItemProperties:d,formatAsset:o,formatLink:a,formatProvider:l,formatGrouped:s},v3}const eg=PP;eg.importFields($ht);eg.addDependency("@musement/iso-duration",Udt);eg.addDependency("content-type",Gdt());eg.addDependency("commonmark",qdt());eg.addDependency("multihashes",imt());var eCe={...Eyt(),Fields:eg.exportFields(),Registry:eg,Helper:Iw(),DataTypes:BP(),Formatters:QSe(),I18N:Uv()};const b3=$o(eCe);var Syt=Object.defineProperty,Cyt=Object.getOwnPropertyDescriptor,cl=(i,e,t,r)=>{for(var n=r>1?void 0:r?Cyt(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&Syt(e,t,n),n};let Nl=class extends Lr{constructor(){super(...arguments),this.header=[],this.tags=[],this.properties=[],this.featured=[],this.footer=[],this.styleOverride="",this.stacInfo=[],this.fetchStac=async i=>{const t=await(await fetch(`${i}?ts=${Date.now()}`)).json();this.stacInfo=await this.parseStac(t),this.dispatchEvent(new CustomEvent("loaded"))},this.parseStac=async i=>{if(i.type==="Catalog")return b3.formatCatalog(i);if(i.type==="Collection")return b3.formatCollection(i);if(i.type==="Feature")return b3.formatItemProperties(i)}}buildProperties(i){eCe.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0;const e=(t,r)=>Dht(Object.entries(this.stacProperties).filter(([n])=>t===this.properties&&(!t||t.length<1)?!0:t==null?void 0:t.includes(n)).reverse().sort(([n],[s])=>(t==null?void 0:t.indexOf(n))>(t==null?void 0:t.indexOf(s))?1:-1),r);return i.length<1?null:(this.stacProperties=i.reduce((t,r)=>({...t,...r.properties}),{}),Qe`
      ${e(this.header).length>0?Qe`
            <header part="header">
              <slot name="header">
                ${Ka(e(this.header),([,t],r)=>sy`
              <h${Ac((r+1).toString())}>${_c(t.formatted)}</h${Ac((r+1).toString())}>
              `)}
              </slot>
            </header>
          `:mr}
      <main>
        ${e(this.tags).length+e(this.properties).length>0?Qe`
              <section id="tags" part="tags">
                <ul>
                  ${Ka(e(this.tags),([,t])=>Qe`<slot name=${t.label.toLowerCase()}
                      ><li>
                        <span class="label"
                          >${_c(t.formatted)}</span
                        >
                      </li></slot
                    >`)}
                </ul>
              </section>
              <section id="properties" part="properties">
                <ul
                  class=${e(this.properties).length===1?"single-property":mr}
                >
                  ${Ka(e(this.properties),([,t])=>Qe`
                      <slot name=${t.label.toLowerCase()}>
                        <li>
                          ${Pi(e(this.properties).length>1,()=>Qe` <span class="label">
                                ${t.label}</span
                              ><span class="colon">:</span>`)}
                          <span class="value">
                            ${Pi(t.label.toLowerCase()==="description",()=>Qe`
                                <eox-stacinfo-shadow
                                  .content=${t.formatted}
                                >
                                </eox-stacinfo-shadow>
                              `,()=>Qe`${_c(t.formatted)}`)}
                          </span>
                        </li>
                      </slot>
                    `)}
                </ul>
              </section>
            `:mr}
        ${e(this.featured,"featured").length>0?Qe`
              <section id="featured" part="featured">
                ${Ka(e(this.featured,"featured").filter(([t,r])=>r.length!==void 0?r.length>0:!0),([,t])=>Qe`
                    <details>
                      <summary>
                        <slot
                          name="featured-${t.label.toLowerCase()}-summary"
                          class="title"
                        >
                          ${t.label}
                          ${Pi(t.length,()=>Qe`
                              <span class="count">${t.length}</span>
                            `)}
                        </slot>
                      </summary>
                      <div class="featured-container">
                        <slot name="featured-${t.label.toLowerCase()}">
                          ${Pi(t.label.toLowerCase()==="description",()=>Qe`
                              <eox-stacinfo-shadow .content=${t.formatted}>
                              </eox-stacinfo-shadow>
                            `,()=>Qe`${_c(t.formatted)}`)}
                        </slot>
                      </div>
                    </details>
                  `)}
              </section>
            `:mr}
      </main>
      ${e(this.footer).length>0?Qe`
            <footer part="footer">
              <slot name="footer">
                ${Ka(e(this.footer),([t,r],n)=>sy`
                <div class="footer-container">
                  <h${Ac((n+1).toString())}>
                    ${_c(r.label)}
                  </h${Ac((n+1).toString())}>
                  <small>${_c(r.formatted)}</small>
                </div>
                ${Pi(t==="sci:citation",()=>Qe`
                    <button
                      class="copy icon"
                      @click=${()=>navigator.clipboard.writeText(r.formatted)}
                    >
                      copy
                    </button>
                  `)}
              `)}
              </slot>
            </footer>
          `:mr}
    `)}render(){return Qe`
      <style>
        ${Mht}
        ${!this.unstyled&&Lht}
        ${this.styleOverride}
      </style>
      <slot></slot>
      ${this.buildProperties(this.stacInfo)}
    `}updated(i){i.has("for")&&this.fetchStac(this.for)}};cl([Pt({attribute:"allow-html"})],Nl.prototype,"allowHtml",2);cl([Pt({type:Boolean})],Nl.prototype,"unstyled",2);cl([Pt()],Nl.prototype,"for",2);cl([Pt({type:Array})],Nl.prototype,"header",2);cl([Pt({type:Array})],Nl.prototype,"tags",2);cl([Pt({type:Array})],Nl.prototype,"properties",2);cl([Pt({type:Array})],Nl.prototype,"featured",2);cl([Pt({type:Array})],Nl.prototype,"footer",2);cl([Pt({attribute:"style-override"})],Nl.prototype,"styleOverride",2);cl([Ds()],Nl.prototype,"stacInfo",2);cl([Ds()],Nl.prototype,"stacProperties",2);Nl=cl([yo("eox-stacinfo")],Nl);let FL=class extends Lr{render(){return Qe`<style>
        img,
        video,
        iframe {
          max-width: 100%;
        }
      </style>
      <div>${_c(this.content)}</div>`}};cl([Pt()],FL.prototype,"content",2);FL=cl([yo("eox-stacinfo-shadow")],FL);const Pge={};function Tyt(i){let e=Pge[i];if(e)return e;e=Pge[i]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<i.length;t++){const r=i.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function Qy(i,e){typeof e!="string"&&(e=Qy.defaultChars);const t=Tyt(e);return i.replace(/(%[a-f0-9]{2})+/gi,function(r){let n="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){n+=t[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?n+="":n+=String.fromCharCode(u),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(u&192)===128){const c=a<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?n+="":n+=String.fromCharCode(c),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16),c=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let h=a<<18&1835008|l<<12&258048|u<<6&4032|c&63;h<65536||h>1114111?n+="":(h-=65536,n+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),s+=9;continue}}n+=""}return n})}Qy.defaultChars=";/?:@&=+$,#";Qy.componentChars="";const Fge={};function Ayt(i){let e=Fge[i];if(e)return e;e=Fge[i]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<i.length;t++)e[i.charCodeAt(t)]=i[t];return e}function Pw(i,e,t){typeof e!="string"&&(t=e,e=Pw.defaultChars),typeof t>"u"&&(t=!0);const r=Ayt(e);let n="";for(let s=0,o=i.length;s<o;s++){const a=i.charCodeAt(s);if(t&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(i.slice(s+1,s+3))){n+=i.slice(s,s+3),s+=2;continue}if(a<128){n+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=i.charCodeAt(s+1);if(l>=56320&&l<=57343){n+=encodeURIComponent(i[s]+i[s+1]),s++;continue}}n+="%EF%BF%BD";continue}n+=encodeURIComponent(i[s])}return n}Pw.defaultChars=";/?:@&=+$,-_.!~*'()#";Pw.componentChars="-_.!~*'()";function jP(i){let e="";return e+=i.protocol||"",e+=i.slashes?"//":"",e+=i.auth?i.auth+"@":"",i.hostname&&i.hostname.indexOf(":")!==-1?e+="["+i.hostname+"]":e+=i.hostname||"",e+=i.port?":"+i.port:"",e+=i.pathname||"",e+=i.search||"",e+=i.hash||"",e}function HC(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const kyt=/^([a-z0-9.+-]+:)/i,Dyt=/:[0-9]*$/,Myt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Lyt=["<",">",'"',"`"," ","\r",`
`,"	"],Ryt=["{","}","|","\\","^","`"].concat(Lyt),Iyt=["'"].concat(Ryt),Nge=["%","/","?",";","#"].concat(Iyt),$ge=["/","?","#"],Oyt=255,Bge=/^[+a-z0-9A-Z_-]{0,63}$/,Pyt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,jge={javascript:!0,"javascript:":!0},zge={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function zP(i,e){if(i&&i instanceof HC)return i;const t=new HC;return t.parse(i,e),t}HC.prototype.parse=function(i,e){let t,r,n,s=i;if(s=s.trim(),!e&&i.split("#").length===1){const u=Myt.exec(s);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=kyt.exec(s);if(o&&(o=o[0],t=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(e||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(n=s.substr(0,2)==="//",n&&!(o&&jge[o])&&(s=s.substr(2),this.slashes=!0)),!jge[o]&&(n||o&&!zge[o])){let u=-1;for(let m=0;m<$ge.length;m++)r=s.indexOf($ge[m]),r!==-1&&(u===-1||r<u)&&(u=r);let c,h;u===-1?h=s.lastIndexOf("@"):h=s.lastIndexOf("@",u),h!==-1&&(c=s.slice(0,h),s=s.slice(h+1),this.auth=c),u=-1;for(let m=0;m<Nge.length;m++)r=s.indexOf(Nge[m]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=s.length),s[u-1]===":"&&u--;const d=s.slice(0,u);s=s.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const p=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!p){const m=this.hostname.split(/\./);for(let g=0,v=m.length;g<v;g++){const b=m[g];if(b&&!b.match(Bge)){let _="";for(let E=0,C=b.length;E<C;E++)b.charCodeAt(E)>127?_+="x":_+=b[E];if(!_.match(Bge)){const E=m.slice(0,g),C=m.slice(g+1),T=b.match(Pyt);T&&(E.push(T[1]),C.unshift(T[2])),C.length&&(s=C.join(".")+s),this.hostname=E.join(".");break}}}}this.hostname.length>Oyt&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),zge[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};HC.prototype.parseHost=function(i){let e=Dyt.exec(i);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),i=i.substr(0,i.length-e.length)),i&&(this.hostname=i)};const Fyt=Object.freeze(Object.defineProperty({__proto__:null,decode:Qy,encode:Pw,format:jP,parse:zP},Symbol.toStringTag,{value:"Module"})),tCe=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,iCe=/[\0-\x1F\x7F-\x9F]/,Nyt=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,UP=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,rCe=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,nCe=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,$yt=Object.freeze(Object.defineProperty({__proto__:null,Any:tCe,Cc:iCe,Cf:Nyt,P:UP,S:rCe,Z:nCe},Symbol.toStringTag,{value:"Module"})),Byt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(i=>i.charCodeAt(0))),jyt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(i=>i.charCodeAt(0)));var _3;const zyt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Uyt=(_3=String.fromCodePoint)!==null&&_3!==void 0?_3:function(i){let e="";return i>65535&&(i-=65536,e+=String.fromCharCode(i>>>10&1023|55296),i=56320|i&1023),e+=String.fromCharCode(i),e};function Gyt(i){var e;return i>=55296&&i<=57343||i>1114111?65533:(e=zyt.get(i))!==null&&e!==void 0?e:i}var co;(function(i){i[i.NUM=35]="NUM",i[i.SEMI=59]="SEMI",i[i.EQUALS=61]="EQUALS",i[i.ZERO=48]="ZERO",i[i.NINE=57]="NINE",i[i.LOWER_A=97]="LOWER_A",i[i.LOWER_F=102]="LOWER_F",i[i.LOWER_X=120]="LOWER_X",i[i.LOWER_Z=122]="LOWER_Z",i[i.UPPER_A=65]="UPPER_A",i[i.UPPER_F=70]="UPPER_F",i[i.UPPER_Z=90]="UPPER_Z"})(co||(co={}));const qyt=32;var Of;(function(i){i[i.VALUE_LENGTH=49152]="VALUE_LENGTH",i[i.BRANCH_LENGTH=16256]="BRANCH_LENGTH",i[i.JUMP_TABLE=127]="JUMP_TABLE"})(Of||(Of={}));function NL(i){return i>=co.ZERO&&i<=co.NINE}function Hyt(i){return i>=co.UPPER_A&&i<=co.UPPER_F||i>=co.LOWER_A&&i<=co.LOWER_F}function Vyt(i){return i>=co.UPPER_A&&i<=co.UPPER_Z||i>=co.LOWER_A&&i<=co.LOWER_Z||NL(i)}function Wyt(i){return i===co.EQUALS||Vyt(i)}var oo;(function(i){i[i.EntityStart=0]="EntityStart",i[i.NumericStart=1]="NumericStart",i[i.NumericDecimal=2]="NumericDecimal",i[i.NumericHex=3]="NumericHex",i[i.NamedEntity=4]="NamedEntity"})(oo||(oo={}));var xf;(function(i){i[i.Legacy=0]="Legacy",i[i.Strict=1]="Strict",i[i.Attribute=2]="Attribute"})(xf||(xf={}));class Yyt{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=oo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=xf.Strict}startEntity(e){this.decodeMode=e,this.state=oo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case oo.EntityStart:return e.charCodeAt(t)===co.NUM?(this.state=oo.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=oo.NamedEntity,this.stateNamedEntity(e,t));case oo.NumericStart:return this.stateNumericStart(e,t);case oo.NumericDecimal:return this.stateNumericDecimal(e,t);case oo.NumericHex:return this.stateNumericHex(e,t);case oo.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|qyt)===co.LOWER_X?(this.state=oo.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=oo.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,n){if(t!==r){const s=r-t;this.result=this.result*Math.pow(n,s)+parseInt(e.substr(t,s),n),this.consumed+=s}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(NL(n)||Hyt(n))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(NL(n))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===co.SEMI)this.consumed+=1;else if(this.decodeMode===xf.Strict)return 0;return this.emitCodePoint(Gyt(this.result),this.consumed),this.errors&&(e!==co.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let n=r[this.treeIndex],s=(n&Of.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=Xyt(r,n,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===xf.Attribute&&(s===0||Wyt(o))?0:this.emitNotTerminatedNamedEntity();if(n=r[this.treeIndex],s=(n&Of.VALUE_LENGTH)>>14,s!==0){if(o===co.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==xf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,n=(r[t]&Of.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:n}=this;return this.emitCodePoint(t===1?n[e]&~Of.VALUE_LENGTH:n[e+1],r),t===3&&this.emitCodePoint(n[e+2],r),r}end(){var e;switch(this.state){case oo.NamedEntity:return this.result!==0&&(this.decodeMode!==xf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case oo.NumericDecimal:return this.emitNumericEntity(0,2);case oo.NumericHex:return this.emitNumericEntity(0,3);case oo.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case oo.EntityStart:return 0}}}function sCe(i){let e="";const t=new Yyt(i,r=>e+=Uyt(r));return function(n,s){let o=0,a=0;for(;(a=n.indexOf("&",a))>=0;){e+=n.slice(o,a),t.startEntity(s);const u=t.write(n,a+1);if(u<0){o=a+t.end();break}o=a+u,a=u===0?o+1:o}const l=e+n.slice(o);return e="",l}}function Xyt(i,e,t,r){const n=(e&Of.BRANCH_LENGTH)>>7,s=e&Of.JUMP_TABLE;if(n===0)return s!==0&&r===s?t:-1;if(s){const l=r-s;return l<0||l>=n?-1:i[t+l]-1}let o=t,a=o+n-1;for(;o<=a;){const l=o+a>>>1,u=i[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return i[l+n]}return-1}const Zyt=sCe(Byt);sCe(jyt);function oCe(i,e=xf.Legacy){return Zyt(i,e)}function Kyt(i){return Object.prototype.toString.call(i)}function GP(i){return Kyt(i)==="[object String]"}const Jyt=Object.prototype.hasOwnProperty;function Qyt(i,e){return Jyt.call(i,e)}function $A(i){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){i[r]=t[r]})}}),i}function aCe(i,e,t){return[].concat(i.slice(0,e),t,i.slice(e+1))}function qP(i){return!(i>=55296&&i<=57343||i>=64976&&i<=65007||(i&65535)===65535||(i&65535)===65534||i>=0&&i<=8||i===11||i>=14&&i<=31||i>=127&&i<=159||i>1114111)}function VC(i){if(i>65535){i-=65536;const e=55296+(i>>10),t=56320+(i&1023);return String.fromCharCode(e,t)}return String.fromCharCode(i)}const lCe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,evt=/&([a-z#][a-z0-9]{1,31});/gi,tvt=new RegExp(lCe.source+"|"+evt.source,"gi"),ivt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function rvt(i,e){if(e.charCodeAt(0)===35&&ivt.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return qP(r)?VC(r):i}const t=oCe(i);return t!==i?t:i}function nvt(i){return i.indexOf("\\")<0?i:i.replace(lCe,"$1")}function ev(i){return i.indexOf("\\")<0&&i.indexOf("&")<0?i:i.replace(tvt,function(e,t,r){return t||rvt(e,r)})}const svt=/[&<>"]/,ovt=/[&<>"]/g,avt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function lvt(i){return avt[i]}function ep(i){return svt.test(i)?i.replace(ovt,lvt):i}const uvt=/[.?*+^$[\]\\(){}|-]/g;function cvt(i){return i.replace(uvt,"\\$&")}function Pn(i){switch(i){case 9:case 32:return!0}return!1}function Rx(i){if(i>=8192&&i<=8202)return!0;switch(i){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Ix(i){return UP.test(i)||rCe.test(i)}function Ox(i){switch(i){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function BA(i){return i=i.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(i=i.replace(//g,"")),i.toLowerCase().toUpperCase()}const hvt={mdurl:Fyt,ucmicro:$yt},dvt=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:aCe,assign:$A,escapeHtml:ep,escapeRE:cvt,fromCodePoint:VC,has:Qyt,isMdAsciiPunct:Ox,isPunctChar:Ix,isSpace:Pn,isString:GP,isValidEntityCode:qP,isWhiteSpace:Rx,lib:hvt,normalizeReference:BA,unescapeAll:ev,unescapeMd:nvt},Symbol.toStringTag,{value:"Module"}));function fvt(i,e,t){let r,n,s,o;const a=i.posMax,l=i.pos;for(i.pos=e+1,r=1;i.pos<a;){if(s=i.src.charCodeAt(i.pos),s===93&&(r--,r===0)){n=!0;break}if(o=i.pos,i.md.inline.skipToken(i),s===91){if(o===i.pos-1)r++;else if(t)return i.pos=l,-1}}let u=-1;return n&&(u=i.pos),i.pos=l,u}function pvt(i,e,t){let r,n=e;const s={ok:!1,pos:0,str:""};if(i.charCodeAt(n)===60){for(n++;n<t;){if(r=i.charCodeAt(n),r===10||r===60)return s;if(r===62)return s.pos=n+1,s.str=ev(i.slice(e+1,n)),s.ok=!0,s;if(r===92&&n+1<t){n+=2;continue}n++}return s}let o=0;for(;n<t&&(r=i.charCodeAt(n),!(r===32||r<32||r===127));){if(r===92&&n+1<t){if(i.charCodeAt(n+1)===32)break;n+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}n++}return e===n||o!==0||(s.str=ev(i.slice(e,n)),s.pos=n,s.ok=!0),s}function mvt(i,e,t,r){let n,s=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=t)return o;let a=i.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;e++,s++,a===40&&(a=41),o.marker=a}for(;s<t;){if(n=i.charCodeAt(s),n===o.marker)return o.pos=s+1,o.str+=ev(i.slice(e,s)),o.ok=!0,o;if(n===40&&o.marker===41)return o;n===92&&s+1<t&&s++,s++}return o.can_continue=!0,o.str+=ev(i.slice(e,s)),o}const gvt=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:pvt,parseLinkLabel:fvt,parseLinkTitle:mvt},Symbol.toStringTag,{value:"Module"})),nh={};nh.code_inline=function(i,e,t,r,n){const s=i[e];return"<code"+n.renderAttrs(s)+">"+ep(s.content)+"</code>"};nh.code_block=function(i,e,t,r,n){const s=i[e];return"<pre"+n.renderAttrs(s)+"><code>"+ep(i[e].content)+`</code></pre>
`};nh.fence=function(i,e,t,r,n){const s=i[e],o=s.info?ev(s.info).trim():"";let a="",l="";if(o){const c=o.split(/(\s+)/g);a=c[0],l=c.slice(2).join("")}let u;if(t.highlight?u=t.highlight(s.content,a,l)||ep(s.content):u=ep(s.content),u.indexOf("<pre")===0)return u+`
`;if(o){const c=s.attrIndex("class"),h=s.attrs?s.attrs.slice():[];c<0?h.push(["class",t.langPrefix+a]):(h[c]=h[c].slice(),h[c][1]+=" "+t.langPrefix+a);const d={attrs:h};return`<pre><code${n.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${n.renderAttrs(s)}>${u}</code></pre>
`};nh.image=function(i,e,t,r,n){const s=i[e];return s.attrs[s.attrIndex("alt")][1]=n.renderInlineAsText(s.children,t,r),n.renderToken(i,e,t)};nh.hardbreak=function(i,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};nh.softbreak=function(i,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};nh.text=function(i,e){return ep(i[e].content)};nh.html_block=function(i,e){return i[e].content};nh.html_inline=function(i,e){return i[e].content};function Gv(){this.rules=$A({},nh)}Gv.prototype.renderAttrs=function(e){let t,r,n;if(!e.attrs)return"";for(n="",t=0,r=e.attrs.length;t<r;t++)n+=" "+ep(e.attrs[t][0])+'="'+ep(e.attrs[t][1])+'"';return n};Gv.prototype.renderToken=function(e,t,r){const n=e[t];let s="";if(n.hidden)return"";n.block&&n.nesting!==-1&&t&&e[t-1].hidden&&(s+=`
`),s+=(n.nesting===-1?"</":"<")+n.tag,s+=this.renderAttrs(n),n.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(n.block&&(o=!0,n.nesting===1&&t+1<e.length)){const a=e[t+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===n.tag)&&(o=!1)}return s+=o?`>
`:">",s};Gv.prototype.renderInline=function(i,e,t){let r="";const n=this.rules;for(let s=0,o=i.length;s<o;s++){const a=i[s].type;typeof n[a]<"u"?r+=n[a](i,s,e,t,this):r+=this.renderToken(i,s,e)}return r};Gv.prototype.renderInlineAsText=function(i,e,t){let r="";for(let n=0,s=i.length;n<s;n++)switch(i[n].type){case"text":r+=i[n].content;break;case"image":r+=this.renderInlineAsText(i[n].children,e,t);break;case"html_inline":case"html_block":r+=i[n].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Gv.prototype.render=function(i,e,t){let r="";const n=this.rules;for(let s=0,o=i.length;s<o;s++){const a=i[s].type;a==="inline"?r+=this.renderInline(i[s].children,e,t):typeof n[a]<"u"?r+=n[a](i,s,e,t,this):r+=this.renderToken(i,s,e,t)}return r};function al(){this.__rules__=[],this.__cache__=null}al.prototype.__find__=function(i){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===i)return e;return-1};al.prototype.__compile__=function(){const i=this,e=[""];i.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),i.__cache__={},e.forEach(function(t){i.__cache__[t]=[],i.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||i.__cache__[t].push(r.fn))})})};al.prototype.at=function(i,e,t){const r=this.__find__(i),n=t||{};if(r===-1)throw new Error("Parser rule not found: "+i);this.__rules__[r].fn=e,this.__rules__[r].alt=n.alt||[],this.__cache__=null};al.prototype.before=function(i,e,t,r){const n=this.__find__(i),s=r||{};if(n===-1)throw new Error("Parser rule not found: "+i);this.__rules__.splice(n,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};al.prototype.after=function(i,e,t,r){const n=this.__find__(i),s=r||{};if(n===-1)throw new Error("Parser rule not found: "+i);this.__rules__.splice(n+1,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};al.prototype.push=function(i,e,t){const r=t||{};this.__rules__.push({name:i,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};al.prototype.enable=function(i,e){Array.isArray(i)||(i=[i]);const t=[];return i.forEach(function(r){const n=this.__find__(r);if(n<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[n].enabled=!0,t.push(r)},this),this.__cache__=null,t};al.prototype.enableOnly=function(i,e){Array.isArray(i)||(i=[i]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(i,e)};al.prototype.disable=function(i,e){Array.isArray(i)||(i=[i]);const t=[];return i.forEach(function(r){const n=this.__find__(r);if(n<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[n].enabled=!1,t.push(r)},this),this.__cache__=null,t};al.prototype.getRules=function(i){return this.__cache__===null&&this.__compile__(),this.__cache__[i]||[]};function rc(i,e,t){this.type=i,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}rc.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,n=t.length;r<n;r++)if(t[r][0]===e)return r;return-1};rc.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};rc.prototype.attrSet=function(e,t){const r=this.attrIndex(e),n=[e,t];r<0?this.attrPush(n):this.attrs[r]=n};rc.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};rc.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function uCe(i,e,t){this.src=i,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}uCe.prototype.Token=rc;const yvt=/\r\n?|\n/g,vvt=/\0/g;function bvt(i){let e;e=i.src.replace(yvt,`
`),e=e.replace(vvt,""),i.src=e}function _vt(i){let e;i.inlineMode?(e=new i.Token("inline","",0),e.content=i.src,e.map=[0,1],e.children=[],i.tokens.push(e)):i.md.block.parse(i.src,i.md,i.env,i.tokens)}function xvt(i){const e=i.tokens;for(let t=0,r=e.length;t<r;t++){const n=e[t];n.type==="inline"&&i.md.inline.parse(n.content,i.md,i.env,n.children)}}function wvt(i){return/^<a[>\s]/i.test(i)}function Evt(i){return/^<\/a\s*>/i.test(i)}function Svt(i){const e=i.tokens;if(i.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!i.md.linkify.pretest(e[t].content))continue;let n=e[t].children,s=0;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type==="link_close"){for(o--;n[o].level!==a.level&&n[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(wvt(a.content)&&s>0&&s--,Evt(a.content)&&s++),!(s>0)&&a.type==="text"&&i.md.linkify.test(a.content)){const l=a.content;let u=i.md.linkify.match(l);const c=[];let h=a.level,d=0;u.length>0&&u[0].index===0&&o>0&&n[o-1].type==="text_special"&&(u=u.slice(1));for(let p=0;p<u.length;p++){const m=u[p].url,g=i.md.normalizeLink(m);if(!i.md.validateLink(g))continue;let v=u[p].text;u[p].schema?u[p].schema==="mailto:"&&!/^mailto:/i.test(v)?v=i.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=i.md.normalizeLinkText(v):v=i.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const b=u[p].index;if(b>d){const T=new i.Token("text","",0);T.content=l.slice(d,b),T.level=h,c.push(T)}const _=new i.Token("link_open","a",1);_.attrs=[["href",g]],_.level=h++,_.markup="linkify",_.info="auto",c.push(_);const E=new i.Token("text","",0);E.content=v,E.level=h,c.push(E);const C=new i.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",c.push(C),d=u[p].lastIndex}if(d<l.length){const p=new i.Token("text","",0);p.content=l.slice(d),p.level=h,c.push(p)}e[t].children=n=aCe(n,o,c)}}}}const cCe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Cvt=/\((c|tm|r)\)/i,Tvt=/\((c|tm|r)\)/ig,Avt={c:"",r:"",tm:""};function kvt(i,e){return Avt[e.toLowerCase()]}function Dvt(i){let e=0;for(let t=i.length-1;t>=0;t--){const r=i[t];r.type==="text"&&!e&&(r.content=r.content.replace(Tvt,kvt)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function Mvt(i){let e=0;for(let t=i.length-1;t>=0;t--){const r=i[t];r.type==="text"&&!e&&cCe.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function Lvt(i){let e;if(i.md.options.typographer)for(e=i.tokens.length-1;e>=0;e--)i.tokens[e].type==="inline"&&(Cvt.test(i.tokens[e].content)&&Dvt(i.tokens[e].children),cCe.test(i.tokens[e].content)&&Mvt(i.tokens[e].children))}const Rvt=/['"]/,Uge=/['"]/g,Gge="";function O2(i,e,t){return i.slice(0,e)+t+i.slice(e+1)}function Ivt(i,e){let t;const r=[];for(let n=0;n<i.length;n++){const s=i[n],o=i[n].level;for(t=r.length-1;t>=0&&!(r[t].level<=o);t--);if(r.length=t+1,s.type!=="text")continue;let a=s.content,l=0,u=a.length;e:for(;l<u;){Uge.lastIndex=l;const c=Uge.exec(a);if(!c)break;let h=!0,d=!0;l=c.index+1;const p=c[0]==="'";let m=32;if(c.index-1>=0)m=a.charCodeAt(c.index-1);else for(t=n-1;t>=0&&!(i[t].type==="softbreak"||i[t].type==="hardbreak");t--)if(i[t].content){m=i[t].content.charCodeAt(i[t].content.length-1);break}let g=32;if(l<u)g=a.charCodeAt(l);else for(t=n+1;t<i.length&&!(i[t].type==="softbreak"||i[t].type==="hardbreak");t++)if(i[t].content){g=i[t].content.charCodeAt(0);break}const v=Ox(m)||Ix(String.fromCharCode(m)),b=Ox(g)||Ix(String.fromCharCode(g)),_=Rx(m),E=Rx(g);if(E?h=!1:b&&(_||v||(h=!1)),_?d=!1:v&&(E||b||(d=!1)),g===34&&c[0]==='"'&&m>=48&&m<=57&&(d=h=!1),h&&d&&(h=v,d=b),!h&&!d){p&&(s.content=O2(s.content,c.index,Gge));continue}if(d)for(t=r.length-1;t>=0;t--){let C=r[t];if(r[t].level<o)break;if(C.single===p&&r[t].level===o){C=r[t];let T,D;p?(T=e.md.options.quotes[2],D=e.md.options.quotes[3]):(T=e.md.options.quotes[0],D=e.md.options.quotes[1]),s.content=O2(s.content,c.index,D),i[C.token].content=O2(i[C.token].content,C.pos,T),l+=D.length-1,C.token===n&&(l+=T.length-1),a=s.content,u=a.length,r.length=t;continue e}}h?r.push({token:n,pos:c.index,single:p,level:o}):d&&p&&(s.content=O2(s.content,c.index,Gge))}}}function Ovt(i){if(i.md.options.typographer)for(let e=i.tokens.length-1;e>=0;e--)i.tokens[e].type!=="inline"||!Rvt.test(i.tokens[e].content)||Ivt(i.tokens[e].children,i)}function Pvt(i){let e,t;const r=i.tokens,n=r.length;for(let s=0;s<n;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=t=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==t&&(o[t]=o[e]),t++);e!==t&&(o.length=t)}}const x3=[["normalize",bvt],["block",_vt],["inline",xvt],["linkify",Svt],["replacements",Lvt],["smartquotes",Ovt],["text_join",Pvt]];function HP(){this.ruler=new al;for(let i=0;i<x3.length;i++)this.ruler.push(x3[i][0],x3[i][1])}HP.prototype.process=function(i){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](i)};HP.prototype.State=uCe;function sh(i,e,t,r){this.src=i,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const n=this.src;for(let s=0,o=0,a=0,l=0,u=n.length,c=!1;o<u;o++){const h=n.charCodeAt(o);if(!c)if(Pn(h)){a++,h===9?l+=4-l%4:l++;continue}else c=!0;(h===10||o===u-1)&&(h!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),c=!1,a=0,l=0,s=o+1)}this.bMarks.push(n.length),this.eMarks.push(n.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}sh.prototype.push=function(i,e,t){const r=new rc(i,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};sh.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};sh.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};sh.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!Pn(r))break}return e};sh.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Pn(this.src.charCodeAt(--e)))return e+1;return e};sh.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};sh.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};sh.prototype.getLines=function(e,t,r,n){if(e>=t)return"";const s=new Array(t-e);for(let o=0,a=e;a<t;a++,o++){let l=0;const u=this.bMarks[a];let c=u,h;for(a+1<t||n?h=this.eMarks[a]+1:h=this.eMarks[a];c<h&&l<r;){const d=this.src.charCodeAt(c);if(Pn(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(c-u<this.tShift[a])l++;else break;c++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(c,h):s[o]=this.src.slice(c,h)}return s.join("")};sh.prototype.Token=rc;const Fvt=65536;function w3(i,e){const t=i.bMarks[e]+i.tShift[e],r=i.eMarks[e];return i.src.slice(t,r)}function qge(i){const e=[],t=i.length;let r=0,n=i.charCodeAt(r),s=!1,o=0,a="";for(;r<t;)n===124&&(s?(a+=i.substring(o,r-1),o=r):(e.push(a+i.substring(o,r)),a="",o=r+1)),s=n===92,r++,n=i.charCodeAt(r);return e.push(a+i.substring(o)),e}function Nvt(i,e,t,r){if(e+2>t)return!1;let n=e+1;if(i.sCount[n]<i.blkIndent||i.sCount[n]-i.blkIndent>=4)return!1;let s=i.bMarks[n]+i.tShift[n];if(s>=i.eMarks[n])return!1;const o=i.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=i.eMarks[n])return!1;const a=i.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Pn(a)||o===45&&Pn(a))return!1;for(;s<i.eMarks[n];){const C=i.src.charCodeAt(s);if(C!==124&&C!==45&&C!==58&&!Pn(C))return!1;s++}let l=w3(i,e+1),u=l.split("|");const c=[];for(let C=0;C<u.length;C++){const T=u[C].trim();if(!T){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(T))return!1;T.charCodeAt(T.length-1)===58?c.push(T.charCodeAt(0)===58?"center":"right"):T.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=w3(i,e).trim(),l.indexOf("|")===-1||i.sCount[e]-i.blkIndent>=4)return!1;u=qge(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==c.length)return!1;if(r)return!0;const d=i.parentType;i.parentType="table";const p=i.md.block.ruler.getRules("blockquote"),m=i.push("table_open","table",1),g=[e,0];m.map=g;const v=i.push("thead_open","thead",1);v.map=[e,e+1];const b=i.push("tr_open","tr",1);b.map=[e,e+1];for(let C=0;C<u.length;C++){const T=i.push("th_open","th",1);c[C]&&(T.attrs=[["style","text-align:"+c[C]]]);const D=i.push("inline","",0);D.content=u[C].trim(),D.children=[],i.push("th_close","th",-1)}i.push("tr_close","tr",-1),i.push("thead_close","thead",-1);let _,E=0;for(n=e+2;n<t&&!(i.sCount[n]<i.blkIndent);n++){let C=!1;for(let D=0,M=p.length;D<M;D++)if(p[D](i,n,t,!0)){C=!0;break}if(C||(l=w3(i,n).trim(),!l)||i.sCount[n]-i.blkIndent>=4||(u=qge(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>Fvt))break;if(n===e+2){const D=i.push("tbody_open","tbody",1);D.map=_=[e+2,0]}const T=i.push("tr_open","tr",1);T.map=[n,n+1];for(let D=0;D<h;D++){const M=i.push("td_open","td",1);c[D]&&(M.attrs=[["style","text-align:"+c[D]]]);const A=i.push("inline","",0);A.content=u[D]?u[D].trim():"",A.children=[],i.push("td_close","td",-1)}i.push("tr_close","tr",-1)}return _&&(i.push("tbody_close","tbody",-1),_[1]=n),i.push("table_close","table",-1),g[1]=n,i.parentType=d,i.line=n,!0}function $vt(i,e,t){if(i.sCount[e]-i.blkIndent<4)return!1;let r=e+1,n=r;for(;r<t;){if(i.isEmpty(r)){r++;continue}if(i.sCount[r]-i.blkIndent>=4){r++,n=r;continue}break}i.line=n;const s=i.push("code_block","code",0);return s.content=i.getLines(e,n,4+i.blkIndent,!1)+`
`,s.map=[e,i.line],!0}function Bvt(i,e,t,r){let n=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||n+3>s)return!1;const o=i.src.charCodeAt(n);if(o!==126&&o!==96)return!1;let a=n;n=i.skipChars(n,o);let l=n-a;if(l<3)return!1;const u=i.src.slice(a,n),c=i.src.slice(n,s);if(o===96&&c.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=e,d=!1;for(;h++,!(h>=t||(n=a=i.bMarks[h]+i.tShift[h],s=i.eMarks[h],n<s&&i.sCount[h]<i.blkIndent));)if(i.src.charCodeAt(n)===o&&!(i.sCount[h]-i.blkIndent>=4)&&(n=i.skipChars(n,o),!(n-a<l)&&(n=i.skipSpaces(n),!(n<s)))){d=!0;break}l=i.sCount[e],i.line=h+(d?1:0);const p=i.push("fence","code",0);return p.info=c,p.content=i.getLines(e+1,h,l,!0),p.markup=u,p.map=[e,i.line],!0}function jvt(i,e,t,r){let n=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];const o=i.lineMax;if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(n)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],c=[],h=i.md.block.ruler.getRules("blockquote"),d=i.parentType;i.parentType="blockquote";let p=!1,m;for(m=e;m<t;m++){const E=i.sCount[m]<i.blkIndent;if(n=i.bMarks[m]+i.tShift[m],s=i.eMarks[m],n>=s)break;if(i.src.charCodeAt(n++)===62&&!E){let T=i.sCount[m]+1,D,M;i.src.charCodeAt(n)===32?(n++,T++,M=!1,D=!0):i.src.charCodeAt(n)===9?(D=!0,(i.bsCount[m]+T)%4===3?(n++,T++,M=!1):M=!0):D=!1;let A=T;for(a.push(i.bMarks[m]),i.bMarks[m]=n;n<s;){const I=i.src.charCodeAt(n);if(Pn(I))I===9?A+=4-(A+i.bsCount[m]+(M?1:0))%4:A++;else break;n++}p=n>=s,l.push(i.bsCount[m]),i.bsCount[m]=i.sCount[m]+1+(D?1:0),u.push(i.sCount[m]),i.sCount[m]=A-T,c.push(i.tShift[m]),i.tShift[m]=n-i.bMarks[m];continue}if(p)break;let C=!1;for(let T=0,D=h.length;T<D;T++)if(h[T](i,m,t,!0)){C=!0;break}if(C){i.lineMax=m,i.blkIndent!==0&&(a.push(i.bMarks[m]),l.push(i.bsCount[m]),c.push(i.tShift[m]),u.push(i.sCount[m]),i.sCount[m]-=i.blkIndent);break}a.push(i.bMarks[m]),l.push(i.bsCount[m]),c.push(i.tShift[m]),u.push(i.sCount[m]),i.sCount[m]=-1}const g=i.blkIndent;i.blkIndent=0;const v=i.push("blockquote_open","blockquote",1);v.markup=">";const b=[e,0];v.map=b,i.md.block.tokenize(i,e,m);const _=i.push("blockquote_close","blockquote",-1);_.markup=">",i.lineMax=o,i.parentType=d,b[1]=i.line;for(let E=0;E<c.length;E++)i.bMarks[E+e]=a[E],i.tShift[E+e]=c[E],i.sCount[E+e]=u[E],i.bsCount[E+e]=l[E];return i.blkIndent=g,!0}function zvt(i,e,t,r){const n=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4)return!1;let s=i.bMarks[e]+i.tShift[e];const o=i.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<n;){const u=i.src.charCodeAt(s++);if(u!==o&&!Pn(u))return!1;u===o&&a++}if(a<3)return!1;if(r)return!0;i.line=e+1;const l=i.push("hr","hr",0);return l.map=[e,i.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function Hge(i,e){const t=i.eMarks[e];let r=i.bMarks[e]+i.tShift[e];const n=i.src.charCodeAt(r++);if(n!==42&&n!==45&&n!==43)return-1;if(r<t){const s=i.src.charCodeAt(r);if(!Pn(s))return-1}return r}function Vge(i,e){const t=i.bMarks[e]+i.tShift[e],r=i.eMarks[e];let n=t;if(n+1>=r)return-1;let s=i.src.charCodeAt(n++);if(s<48||s>57)return-1;for(;;){if(n>=r)return-1;if(s=i.src.charCodeAt(n++),s>=48&&s<=57){if(n-t>=10)return-1;continue}if(s===41||s===46)break;return-1}return n<r&&(s=i.src.charCodeAt(n),!Pn(s))?-1:n}function Uvt(i,e){const t=i.level+2;for(let r=e+2,n=i.tokens.length-2;r<n;r++)i.tokens[r].level===t&&i.tokens[r].type==="paragraph_open"&&(i.tokens[r+2].hidden=!0,i.tokens[r].hidden=!0,r+=2)}function Gvt(i,e,t,r){let n,s,o,a,l=e,u=!0;if(i.sCount[l]-i.blkIndent>=4||i.listIndent>=0&&i.sCount[l]-i.listIndent>=4&&i.sCount[l]<i.blkIndent)return!1;let c=!1;r&&i.parentType==="paragraph"&&i.sCount[l]>=i.blkIndent&&(c=!0);let h,d,p;if((p=Vge(i,l))>=0){if(h=!0,o=i.bMarks[l]+i.tShift[l],d=Number(i.src.slice(o,p-1)),c&&d!==1)return!1}else if((p=Hge(i,l))>=0)h=!1;else return!1;if(c&&i.skipSpaces(p)>=i.eMarks[l])return!1;if(r)return!0;const m=i.src.charCodeAt(p-1),g=i.tokens.length;h?(a=i.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=i.push("bullet_list_open","ul",1);const v=[l,0];a.map=v,a.markup=String.fromCharCode(m);let b=!1;const _=i.md.block.ruler.getRules("list"),E=i.parentType;for(i.parentType="list";l<t;){s=p,n=i.eMarks[l];const C=i.sCount[l]+p-(i.bMarks[l]+i.tShift[l]);let T=C;for(;s<n;){const $=i.src.charCodeAt(s);if($===9)T+=4-(T+i.bsCount[l])%4;else if($===32)T++;else break;s++}const D=s;let M;D>=n?M=1:M=T-C,M>4&&(M=1);const A=C+M;a=i.push("list_item_open","li",1),a.markup=String.fromCharCode(m);const I=[l,0];a.map=I,h&&(a.info=i.src.slice(o,p-1));const P=i.tight,U=i.tShift[l],K=i.sCount[l],L=i.listIndent;if(i.listIndent=i.blkIndent,i.blkIndent=A,i.tight=!0,i.tShift[l]=D-i.bMarks[l],i.sCount[l]=T,D>=n&&i.isEmpty(l+1)?i.line=Math.min(i.line+2,t):i.md.block.tokenize(i,l,t,!0),(!i.tight||b)&&(u=!1),b=i.line-l>1&&i.isEmpty(i.line-1),i.blkIndent=i.listIndent,i.listIndent=L,i.tShift[l]=U,i.sCount[l]=K,i.tight=P,a=i.push("list_item_close","li",-1),a.markup=String.fromCharCode(m),l=i.line,I[1]=l,l>=t||i.sCount[l]<i.blkIndent||i.sCount[l]-i.blkIndent>=4)break;let F=!1;for(let $=0,H=_.length;$<H;$++)if(_[$](i,l,t,!0)){F=!0;break}if(F)break;if(h){if(p=Vge(i,l),p<0)break;o=i.bMarks[l]+i.tShift[l]}else if(p=Hge(i,l),p<0)break;if(m!==i.src.charCodeAt(p-1))break}return h?a=i.push("ordered_list_close","ol",-1):a=i.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(m),v[1]=l,i.line=l,i.parentType=E,u&&Uvt(i,g),!0}function qvt(i,e,t,r){let n=i.bMarks[e]+i.tShift[e],s=i.eMarks[e],o=e+1;if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(n)!==91)return!1;function a(_){const E=i.lineMax;if(_>=E||i.isEmpty(_))return null;let C=!1;if(i.sCount[_]-i.blkIndent>3&&(C=!0),i.sCount[_]<0&&(C=!0),!C){const M=i.md.block.ruler.getRules("reference"),A=i.parentType;i.parentType="reference";let I=!1;for(let P=0,U=M.length;P<U;P++)if(M[P](i,_,E,!0)){I=!0;break}if(i.parentType=A,I)return null}const T=i.bMarks[_]+i.tShift[_],D=i.eMarks[_];return i.src.slice(T,D+1)}let l=i.src.slice(n,s+1);s=l.length;let u=-1;for(n=1;n<s;n++){const _=l.charCodeAt(n);if(_===91)return!1;if(_===93){u=n;break}else if(_===10){const E=a(o);E!==null&&(l+=E,s=l.length,o++)}else if(_===92&&(n++,n<s&&l.charCodeAt(n)===10)){const E=a(o);E!==null&&(l+=E,s=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(n=u+2;n<s;n++){const _=l.charCodeAt(n);if(_===10){const E=a(o);E!==null&&(l+=E,s=l.length,o++)}else if(!Pn(_))break}const c=i.md.helpers.parseLinkDestination(l,n,s);if(!c.ok)return!1;const h=i.md.normalizeLink(c.str);if(!i.md.validateLink(h))return!1;n=c.pos;const d=n,p=o,m=n;for(;n<s;n++){const _=l.charCodeAt(n);if(_===10){const E=a(o);E!==null&&(l+=E,s=l.length,o++)}else if(!Pn(_))break}let g=i.md.helpers.parseLinkTitle(l,n,s);for(;g.can_continue;){const _=a(o);if(_===null)break;l+=_,n=s,s=l.length,o++,g=i.md.helpers.parseLinkTitle(l,n,s,g)}let v;for(n<s&&m!==n&&g.ok?(v=g.str,n=g.pos):(v="",n=d,o=p);n<s;){const _=l.charCodeAt(n);if(!Pn(_))break;n++}if(n<s&&l.charCodeAt(n)!==10&&v)for(v="",n=d,o=p;n<s;){const _=l.charCodeAt(n);if(!Pn(_))break;n++}if(n<s&&l.charCodeAt(n)!==10)return!1;const b=BA(l.slice(1,u));return b?(r||(typeof i.env.references>"u"&&(i.env.references={}),typeof i.env.references[b]>"u"&&(i.env.references[b]={title:v,href:h}),i.line=o),!0):!1}const Hvt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Vvt="[a-zA-Z_:][a-zA-Z0-9:._-]*",Wvt="[^\"'=<>`\\x00-\\x20]+",Yvt="'[^']*'",Xvt='"[^"]*"',Zvt="(?:"+Wvt+"|"+Yvt+"|"+Xvt+")",Kvt="(?:\\s+"+Vvt+"(?:\\s*=\\s*"+Zvt+")?)",hCe="<[A-Za-z][A-Za-z0-9\\-]*"+Kvt+"*\\s*\\/?>",dCe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Jvt="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Qvt="<[?][\\s\\S]*?[?]>",ebt="<![A-Za-z][^>]*>",tbt="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",ibt=new RegExp("^(?:"+hCe+"|"+dCe+"|"+Jvt+"|"+Qvt+"|"+ebt+"|"+tbt+")"),rbt=new RegExp("^(?:"+hCe+"|"+dCe+")"),_0=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Hvt.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(rbt.source+"\\s*$"),/^$/,!1]];function nbt(i,e,t,r){let n=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||!i.md.options.html||i.src.charCodeAt(n)!==60)return!1;let o=i.src.slice(n,s),a=0;for(;a<_0.length&&!_0[a][0].test(o);a++);if(a===_0.length)return!1;if(r)return _0[a][2];let l=e+1;if(!_0[a][1].test(o)){for(;l<t&&!(i.sCount[l]<i.blkIndent);l++)if(n=i.bMarks[l]+i.tShift[l],s=i.eMarks[l],o=i.src.slice(n,s),_0[a][1].test(o)){o.length!==0&&l++;break}}i.line=l;const u=i.push("html_block","",0);return u.map=[e,l],u.content=i.getLines(e,l,i.blkIndent,!0),!0}function sbt(i,e,t,r){let n=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4)return!1;let o=i.src.charCodeAt(n);if(o!==35||n>=s)return!1;let a=1;for(o=i.src.charCodeAt(++n);o===35&&n<s&&a<=6;)a++,o=i.src.charCodeAt(++n);if(a>6||n<s&&!Pn(o))return!1;if(r)return!0;s=i.skipSpacesBack(s,n);const l=i.skipCharsBack(s,35,n);l>n&&Pn(i.src.charCodeAt(l-1))&&(s=l),i.line=e+1;const u=i.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,i.line];const c=i.push("inline","",0);c.content=i.src.slice(n,s).trim(),c.map=[e,i.line],c.children=[];const h=i.push("heading_close","h"+String(a),-1);return h.markup="########".slice(0,a),!0}function obt(i,e,t){const r=i.md.block.ruler.getRules("paragraph");if(i.sCount[e]-i.blkIndent>=4)return!1;const n=i.parentType;i.parentType="paragraph";let s=0,o,a=e+1;for(;a<t&&!i.isEmpty(a);a++){if(i.sCount[a]-i.blkIndent>3)continue;if(i.sCount[a]>=i.blkIndent){let p=i.bMarks[a]+i.tShift[a];const m=i.eMarks[a];if(p<m&&(o=i.src.charCodeAt(p),(o===45||o===61)&&(p=i.skipChars(p,o),p=i.skipSpaces(p),p>=m))){s=o===61?1:2;break}}if(i.sCount[a]<0)continue;let d=!1;for(let p=0,m=r.length;p<m;p++)if(r[p](i,a,t,!0)){d=!0;break}if(d)break}if(!s)return!1;const l=i.getLines(e,a,i.blkIndent,!1).trim();i.line=a+1;const u=i.push("heading_open","h"+String(s),1);u.markup=String.fromCharCode(o),u.map=[e,i.line];const c=i.push("inline","",0);c.content=l,c.map=[e,i.line-1],c.children=[];const h=i.push("heading_close","h"+String(s),-1);return h.markup=String.fromCharCode(o),i.parentType=n,!0}function abt(i,e,t){const r=i.md.block.ruler.getRules("paragraph"),n=i.parentType;let s=e+1;for(i.parentType="paragraph";s<t&&!i.isEmpty(s);s++){if(i.sCount[s]-i.blkIndent>3||i.sCount[s]<0)continue;let u=!1;for(let c=0,h=r.length;c<h;c++)if(r[c](i,s,t,!0)){u=!0;break}if(u)break}const o=i.getLines(e,s,i.blkIndent,!1).trim();i.line=s;const a=i.push("paragraph_open","p",1);a.map=[e,i.line];const l=i.push("inline","",0);return l.content=o,l.map=[e,i.line],l.children=[],i.push("paragraph_close","p",-1),i.parentType=n,!0}const P2=[["table",Nvt,["paragraph","reference"]],["code",$vt],["fence",Bvt,["paragraph","reference","blockquote","list"]],["blockquote",jvt,["paragraph","reference","blockquote","list"]],["hr",zvt,["paragraph","reference","blockquote","list"]],["list",Gvt,["paragraph","reference","blockquote"]],["reference",qvt],["html_block",nbt,["paragraph","reference","blockquote"]],["heading",sbt,["paragraph","reference","blockquote"]],["lheading",obt],["paragraph",abt]];function jA(){this.ruler=new al;for(let i=0;i<P2.length;i++)this.ruler.push(P2[i][0],P2[i][1],{alt:(P2[i][2]||[]).slice()})}jA.prototype.tokenize=function(i,e,t){const r=this.ruler.getRules(""),n=r.length,s=i.md.options.maxNesting;let o=e,a=!1;for(;o<t&&(i.line=o=i.skipEmptyLines(o),!(o>=t||i.sCount[o]<i.blkIndent));){if(i.level>=s){i.line=t;break}const l=i.line;let u=!1;for(let c=0;c<n;c++)if(u=r[c](i,o,t,!1),u){if(l>=i.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");i.tight=!a,i.isEmpty(i.line-1)&&(a=!0),o=i.line,o<t&&i.isEmpty(o)&&(a=!0,o++,i.line=o)}};jA.prototype.parse=function(i,e,t,r){if(!i)return;const n=new this.State(i,e,t,r);this.tokenize(n,n.line,n.lineMax)};jA.prototype.State=sh;function Fw(i,e,t,r){this.src=i,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Fw.prototype.pushPending=function(){const i=new rc("text","",0);return i.content=this.pending,i.level=this.pendingLevel,this.tokens.push(i),this.pending="",i};Fw.prototype.push=function(i,e,t){this.pending&&this.pushPending();const r=new rc(i,e,t);let n=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],n={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(n),r};Fw.prototype.scanDelims=function(i,e){const t=this.posMax,r=this.src.charCodeAt(i),n=i>0?this.src.charCodeAt(i-1):32;let s=i;for(;s<t&&this.src.charCodeAt(s)===r;)s++;const o=s-i,a=s<t?this.src.charCodeAt(s):32,l=Ox(n)||Ix(String.fromCharCode(n)),u=Ox(a)||Ix(String.fromCharCode(a)),c=Rx(n),h=Rx(a),d=!h&&(!u||c||l),p=!c&&(!l||h||u);return{can_open:d&&(e||!p||l),can_close:p&&(e||!d||u),length:o}};Fw.prototype.Token=rc;function lbt(i){switch(i){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function ubt(i,e){let t=i.pos;for(;t<i.posMax&&!lbt(i.src.charCodeAt(t));)t++;return t===i.pos?!1:(e||(i.pending+=i.src.slice(i.pos,t)),i.pos=t,!0)}const cbt=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function hbt(i,e){if(!i.md.options.linkify||i.linkLevel>0)return!1;const t=i.pos,r=i.posMax;if(t+3>r||i.src.charCodeAt(t)!==58||i.src.charCodeAt(t+1)!==47||i.src.charCodeAt(t+2)!==47)return!1;const n=i.pending.match(cbt);if(!n)return!1;const s=n[1],o=i.md.linkify.matchAtStart(i.src.slice(t-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=i.md.normalizeLink(a);if(!i.md.validateLink(l))return!1;if(!e){i.pending=i.pending.slice(0,-s.length);const u=i.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const c=i.push("text","",0);c.content=i.md.normalizeLinkText(a);const h=i.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return i.pos+=a.length-s.length,!0}function dbt(i,e){let t=i.pos;if(i.src.charCodeAt(t)!==10)return!1;const r=i.pending.length-1,n=i.posMax;if(!e)if(r>=0&&i.pending.charCodeAt(r)===32)if(r>=1&&i.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&i.pending.charCodeAt(s-1)===32;)s--;i.pending=i.pending.slice(0,s),i.push("hardbreak","br",0)}else i.pending=i.pending.slice(0,-1),i.push("softbreak","br",0);else i.push("softbreak","br",0);for(t++;t<n&&Pn(i.src.charCodeAt(t));)t++;return i.pos=t,!0}const VP=[];for(let i=0;i<256;i++)VP.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(i){VP[i.charCodeAt(0)]=1});function fbt(i,e){let t=i.pos;const r=i.posMax;if(i.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let n=i.src.charCodeAt(t);if(n===10){for(e||i.push("hardbreak","br",0),t++;t<r&&(n=i.src.charCodeAt(t),!!Pn(n));)t++;return i.pos=t,!0}let s=i.src[t];if(n>=55296&&n<=56319&&t+1<r){const a=i.src.charCodeAt(t+1);a>=56320&&a<=57343&&(s+=i.src[t+1],t++)}const o="\\"+s;if(!e){const a=i.push("text_special","",0);n<256&&VP[n]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return i.pos=t+1,!0}function pbt(i,e){let t=i.pos;if(i.src.charCodeAt(t)!==96)return!1;const n=t;t++;const s=i.posMax;for(;t<s&&i.src.charCodeAt(t)===96;)t++;const o=i.src.slice(n,t),a=o.length;if(i.backticksScanned&&(i.backticks[a]||0)<=n)return e||(i.pending+=o),i.pos+=a,!0;let l=t,u;for(;(u=i.src.indexOf("`",l))!==-1;){for(l=u+1;l<s&&i.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===a){if(!e){const h=i.push("code_inline","code",0);h.markup=o,h.content=i.src.slice(t,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return i.pos=l,!0}i.backticks[c]=u}return i.backticksScanned=!0,e||(i.pending+=o),i.pos+=a,!0}function mbt(i,e){const t=i.pos,r=i.src.charCodeAt(t);if(e||r!==126)return!1;const n=i.scanDelims(i.pos,!0);let s=n.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=i.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=i.push("text","",0),a.content=o+o,i.delimiters.push({marker:r,length:0,token:i.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return i.pos+=n.length,!0}function Wge(i,e){let t;const r=[],n=e.length;for(let s=0;s<n;s++){const o=e[s];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];t=i.tokens[o.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=i.tokens[a.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",i.tokens[a.token-1].type==="text"&&i.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<i.tokens.length&&i.tokens[o].type==="s_close";)o++;o--,s!==o&&(t=i.tokens[o],i.tokens[o]=i.tokens[s],i.tokens[s]=t)}}function gbt(i){const e=i.tokens_meta,t=i.tokens_meta.length;Wge(i,i.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&Wge(i,e[r].delimiters)}const fCe={tokenize:mbt,postProcess:gbt};function ybt(i,e){const t=i.pos,r=i.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const n=i.scanDelims(i.pos,r===42);for(let s=0;s<n.length;s++){const o=i.push("text","",0);o.content=String.fromCharCode(r),i.delimiters.push({marker:r,length:n.length,token:i.tokens.length-1,end:-1,open:n.can_open,close:n.can_close})}return i.pos+=n.length,!0}function Yge(i,e){const t=e.length;for(let r=t-1;r>=0;r--){const n=e[r];if(n.marker!==95&&n.marker!==42||n.end===-1)continue;const s=e[n.end],o=r>0&&e[r-1].end===n.end+1&&e[r-1].marker===n.marker&&e[r-1].token===n.token-1&&e[n.end+1].token===s.token+1,a=String.fromCharCode(n.marker),l=i.tokens[n.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const u=i.tokens[s.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?a+a:a,u.content="",o&&(i.tokens[e[r-1].token].content="",i.tokens[e[n.end+1].token].content="",r--)}}function vbt(i){const e=i.tokens_meta,t=i.tokens_meta.length;Yge(i,i.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&Yge(i,e[r].delimiters)}const pCe={tokenize:ybt,postProcess:vbt};function bbt(i,e){let t,r,n,s,o="",a="",l=i.pos,u=!0;if(i.src.charCodeAt(i.pos)!==91)return!1;const c=i.pos,h=i.posMax,d=i.pos+1,p=i.md.helpers.parseLinkLabel(i,i.pos,!0);if(p<0)return!1;let m=p+1;if(m<h&&i.src.charCodeAt(m)===40){for(u=!1,m++;m<h&&(t=i.src.charCodeAt(m),!(!Pn(t)&&t!==10));m++);if(m>=h)return!1;if(l=m,n=i.md.helpers.parseLinkDestination(i.src,m,i.posMax),n.ok){for(o=i.md.normalizeLink(n.str),i.md.validateLink(o)?m=n.pos:o="",l=m;m<h&&(t=i.src.charCodeAt(m),!(!Pn(t)&&t!==10));m++);if(n=i.md.helpers.parseLinkTitle(i.src,m,i.posMax),m<h&&l!==m&&n.ok)for(a=n.str,m=n.pos;m<h&&(t=i.src.charCodeAt(m),!(!Pn(t)&&t!==10));m++);}(m>=h||i.src.charCodeAt(m)!==41)&&(u=!0),m++}if(u){if(typeof i.env.references>"u")return!1;if(m<h&&i.src.charCodeAt(m)===91?(l=m+1,m=i.md.helpers.parseLinkLabel(i,m),m>=0?r=i.src.slice(l,m++):m=p+1):m=p+1,r||(r=i.src.slice(d,p)),s=i.env.references[BA(r)],!s)return i.pos=c,!1;o=s.href,a=s.title}if(!e){i.pos=d,i.posMax=p;const g=i.push("link_open","a",1),v=[["href",o]];g.attrs=v,a&&v.push(["title",a]),i.linkLevel++,i.md.inline.tokenize(i),i.linkLevel--,i.push("link_close","a",-1)}return i.pos=m,i.posMax=h,!0}function _bt(i,e){let t,r,n,s,o,a,l,u,c="";const h=i.pos,d=i.posMax;if(i.src.charCodeAt(i.pos)!==33||i.src.charCodeAt(i.pos+1)!==91)return!1;const p=i.pos+2,m=i.md.helpers.parseLinkLabel(i,i.pos+1,!1);if(m<0)return!1;if(s=m+1,s<d&&i.src.charCodeAt(s)===40){for(s++;s<d&&(t=i.src.charCodeAt(s),!(!Pn(t)&&t!==10));s++);if(s>=d)return!1;for(u=s,a=i.md.helpers.parseLinkDestination(i.src,s,i.posMax),a.ok&&(c=i.md.normalizeLink(a.str),i.md.validateLink(c)?s=a.pos:c=""),u=s;s<d&&(t=i.src.charCodeAt(s),!(!Pn(t)&&t!==10));s++);if(a=i.md.helpers.parseLinkTitle(i.src,s,i.posMax),s<d&&u!==s&&a.ok)for(l=a.str,s=a.pos;s<d&&(t=i.src.charCodeAt(s),!(!Pn(t)&&t!==10));s++);else l="";if(s>=d||i.src.charCodeAt(s)!==41)return i.pos=h,!1;s++}else{if(typeof i.env.references>"u")return!1;if(s<d&&i.src.charCodeAt(s)===91?(u=s+1,s=i.md.helpers.parseLinkLabel(i,s),s>=0?n=i.src.slice(u,s++):s=m+1):s=m+1,n||(n=i.src.slice(p,m)),o=i.env.references[BA(n)],!o)return i.pos=h,!1;c=o.href,l=o.title}if(!e){r=i.src.slice(p,m);const g=[];i.md.inline.parse(r,i.md,i.env,g);const v=i.push("image","img",0),b=[["src",c],["alt",""]];v.attrs=b,v.children=g,v.content=r,l&&b.push(["title",l])}return i.pos=s,i.posMax=d,!0}const xbt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,wbt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Ebt(i,e){let t=i.pos;if(i.src.charCodeAt(t)!==60)return!1;const r=i.pos,n=i.posMax;for(;;){if(++t>=n)return!1;const o=i.src.charCodeAt(t);if(o===60)return!1;if(o===62)break}const s=i.src.slice(r+1,t);if(wbt.test(s)){const o=i.md.normalizeLink(s);if(!i.md.validateLink(o))return!1;if(!e){const a=i.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=i.push("text","",0);l.content=i.md.normalizeLinkText(s);const u=i.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return i.pos+=s.length+2,!0}if(xbt.test(s)){const o=i.md.normalizeLink("mailto:"+s);if(!i.md.validateLink(o))return!1;if(!e){const a=i.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=i.push("text","",0);l.content=i.md.normalizeLinkText(s);const u=i.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return i.pos+=s.length+2,!0}return!1}function Sbt(i){return/^<a[>\s]/i.test(i)}function Cbt(i){return/^<\/a\s*>/i.test(i)}function Tbt(i){const e=i|32;return e>=97&&e<=122}function Abt(i,e){if(!i.md.options.html)return!1;const t=i.posMax,r=i.pos;if(i.src.charCodeAt(r)!==60||r+2>=t)return!1;const n=i.src.charCodeAt(r+1);if(n!==33&&n!==63&&n!==47&&!Tbt(n))return!1;const s=i.src.slice(r).match(ibt);if(!s)return!1;if(!e){const o=i.push("html_inline","",0);o.content=s[0],Sbt(o.content)&&i.linkLevel++,Cbt(o.content)&&i.linkLevel--}return i.pos+=s[0].length,!0}const kbt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Dbt=/^&([a-z][a-z0-9]{1,31});/i;function Mbt(i,e){const t=i.pos,r=i.posMax;if(i.src.charCodeAt(t)!==38||t+1>=r)return!1;if(i.src.charCodeAt(t+1)===35){const s=i.src.slice(t).match(kbt);if(s){if(!e){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=i.push("text_special","",0);a.content=qP(o)?VC(o):VC(65533),a.markup=s[0],a.info="entity"}return i.pos+=s[0].length,!0}}else{const s=i.src.slice(t).match(Dbt);if(s){const o=oCe(s[0]);if(o!==s[0]){if(!e){const a=i.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return i.pos+=s[0].length,!0}}}return!1}function Xge(i){const e={},t=i.length;if(!t)return;let r=0,n=-2;const s=[];for(let o=0;o<t;o++){const a=i[o];if(s.push(0),(i[r].marker!==a.marker||n!==a.token-1)&&(r=o),n=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let u=r-s[r]-1,c=u;for(;u>l;u-=s[u]+1){const h=i[u];if(h.marker===a.marker&&h.open&&h.end<0){let d=!1;if((h.close||a.open)&&(h.length+a.length)%3===0&&(h.length%3!==0||a.length%3!==0)&&(d=!0),!d){const p=u>0&&!i[u-1].open?s[u-1]+1:0;s[o]=o-u+p,s[u]=p,a.open=!1,h.end=o,h.close=!1,c=-1,n=-2;break}}}c!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=c)}}function Lbt(i){const e=i.tokens_meta,t=i.tokens_meta.length;Xge(i.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&Xge(e[r].delimiters)}function Rbt(i){let e,t,r=0;const n=i.tokens,s=i.tokens.length;for(e=t=0;e<s;e++)n[e].nesting<0&&r--,n[e].level=r,n[e].nesting>0&&r++,n[e].type==="text"&&e+1<s&&n[e+1].type==="text"?n[e+1].content=n[e].content+n[e+1].content:(e!==t&&(n[t]=n[e]),t++);e!==t&&(n.length=t)}const E3=[["text",ubt],["linkify",hbt],["newline",dbt],["escape",fbt],["backticks",pbt],["strikethrough",fCe.tokenize],["emphasis",pCe.tokenize],["link",bbt],["image",_bt],["autolink",Ebt],["html_inline",Abt],["entity",Mbt]],S3=[["balance_pairs",Lbt],["strikethrough",fCe.postProcess],["emphasis",pCe.postProcess],["fragments_join",Rbt]];function Nw(){this.ruler=new al;for(let i=0;i<E3.length;i++)this.ruler.push(E3[i][0],E3[i][1]);this.ruler2=new al;for(let i=0;i<S3.length;i++)this.ruler2.push(S3[i][0],S3[i][1])}Nw.prototype.skipToken=function(i){const e=i.pos,t=this.ruler.getRules(""),r=t.length,n=i.md.options.maxNesting,s=i.cache;if(typeof s[e]<"u"){i.pos=s[e];return}let o=!1;if(i.level<n){for(let a=0;a<r;a++)if(i.level++,o=t[a](i,!0),i.level--,o){if(e>=i.pos)throw new Error("inline rule didn't increment state.pos");break}}else i.pos=i.posMax;o||i.pos++,s[e]=i.pos};Nw.prototype.tokenize=function(i){const e=this.ruler.getRules(""),t=e.length,r=i.posMax,n=i.md.options.maxNesting;for(;i.pos<r;){const s=i.pos;let o=!1;if(i.level<n){for(let a=0;a<t;a++)if(o=e[a](i,!1),o){if(s>=i.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(i.pos>=r)break;continue}i.pending+=i.src[i.pos++]}i.pending&&i.pushPending()};Nw.prototype.parse=function(i,e,t,r){const n=new this.State(i,e,t,r);this.tokenize(n);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](n)};Nw.prototype.State=Fw;function Ibt(i){const e={};i=i||{},e.src_Any=tCe.source,e.src_Cc=iCe.source,e.src_Z=nCe.source,e.src_P=UP.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(i["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(i["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function $L(i){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){i[r]=t[r]})}),i}function zA(i){return Object.prototype.toString.call(i)}function Obt(i){return zA(i)==="[object String]"}function Pbt(i){return zA(i)==="[object Object]"}function Fbt(i){return zA(i)==="[object RegExp]"}function Zge(i){return zA(i)==="[object Function]"}function Nbt(i){return i.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const mCe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function $bt(i){return Object.keys(i||{}).reduce(function(e,t){return e||mCe.hasOwnProperty(t)},!1)}const Bbt={"http:":{validate:function(i,e,t){const r=i.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(i,e,t){const r=i.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&i[e-3]===":"||e>=3&&i[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(i,e,t){const r=i.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},jbt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",zbt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Ubt(i){i.__index__=-1,i.__text_cache__=""}function Gbt(i){return function(e,t){const r=e.slice(t);return i.test(r)?r.match(i)[0].length:0}}function Kge(){return function(i,e){e.normalize(i)}}function WC(i){const e=i.re=Ibt(i.__opts__),t=i.__tlds__.slice();i.onCompile(),i.__tlds_replaced__||t.push(jbt),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const n=[];i.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(i.__schemas__).forEach(function(a){const l=i.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(i.__compiled__[a]=u,Pbt(l)){Fbt(l.validate)?u.validate=Gbt(l.validate):Zge(l.validate)?u.validate=l.validate:s(a,l),Zge(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=Kge();return}if(Obt(l)){n.push(a);return}s(a,l)}),n.forEach(function(a){i.__compiled__[i.__schemas__[a]]&&(i.__compiled__[a].validate=i.__compiled__[i.__schemas__[a]].validate,i.__compiled__[a].normalize=i.__compiled__[i.__schemas__[a]].normalize)}),i.__compiled__[""]={validate:null,normalize:Kge()};const o=Object.keys(i.__compiled__).filter(function(a){return a.length>0&&i.__compiled__[a]}).map(Nbt).join("|");i.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),i.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),i.re.schema_at_start=RegExp("^"+i.re.schema_search.source,"i"),i.re.pretest=RegExp("("+i.re.schema_test.source+")|("+i.re.host_fuzzy_test.source+")|@","i"),Ubt(i)}function qbt(i,e){const t=i.__index__,r=i.__last_index__,n=i.__text_cache__.slice(t,r);this.schema=i.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=n,this.text=n,this.url=n}function BL(i,e){const t=new qbt(i,e);return i.__compiled__[t.schema].normalize(t,i),t}function $l(i,e){if(!(this instanceof $l))return new $l(i,e);e||$bt(i)&&(e=i,i={}),this.__opts__=$L({},mCe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=$L({},Bbt,i),this.__compiled__={},this.__tlds__=zbt,this.__tlds_replaced__=!1,this.re={},WC(this)}$l.prototype.add=function(e,t){return this.__schemas__[e]=t,WC(this),this};$l.prototype.set=function(e){return this.__opts__=$L(this.__opts__,e),this};$l.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,n,s,o,a,l,u,c;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(t=l.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],l.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(n=e.match(this.re.email_fuzzy))!==null&&(o=n.index+n[1].length,a=n.index+n[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};$l.prototype.pretest=function(e){return this.re.pretest.test(e)};$l.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};$l.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(BL(this,r)),r=this.__last_index__);let n=r?e.slice(r):e;for(;this.test(n);)t.push(BL(this,r)),n=n.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};$l.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,BL(this,0)):null};$l.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,n,s){return r!==s[n-1]}).reverse(),WC(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,WC(this),this)};$l.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};$l.prototype.onCompile=function(){};const yy=2147483647,Ic=36,WP=1,Px=26,Hbt=38,Vbt=700,gCe=72,yCe=128,vCe="-",Wbt=/^xn--/,Ybt=/[^\0-\x7F]/,Xbt=/[\x2E\u3002\uFF0E\uFF61]/g,Zbt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C3=Ic-WP,Oc=Math.floor,T3=String.fromCharCode;function yf(i){throw new RangeError(Zbt[i])}function Kbt(i,e){const t=[];let r=i.length;for(;r--;)t[r]=e(i[r]);return t}function bCe(i,e){const t=i.split("@");let r="";t.length>1&&(r=t[0]+"@",i=t[1]),i=i.replace(Xbt,".");const n=i.split("."),s=Kbt(n,e).join(".");return r+s}function _Ce(i){const e=[];let t=0;const r=i.length;for(;t<r;){const n=i.charCodeAt(t++);if(n>=55296&&n<=56319&&t<r){const s=i.charCodeAt(t++);(s&64512)==56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),t--)}else e.push(n)}return e}const Jbt=i=>String.fromCodePoint(...i),Qbt=function(i){return i>=48&&i<58?26+(i-48):i>=65&&i<91?i-65:i>=97&&i<123?i-97:Ic},Jge=function(i,e){return i+22+75*(i<26)-((e!=0)<<5)},xCe=function(i,e,t){let r=0;for(i=t?Oc(i/Vbt):i>>1,i+=Oc(i/e);i>C3*Px>>1;r+=Ic)i=Oc(i/C3);return Oc(r+(C3+1)*i/(i+Hbt))},wCe=function(i){const e=[],t=i.length;let r=0,n=yCe,s=gCe,o=i.lastIndexOf(vCe);o<0&&(o=0);for(let a=0;a<o;++a)i.charCodeAt(a)>=128&&yf("not-basic"),e.push(i.charCodeAt(a));for(let a=o>0?o+1:0;a<t;){const l=r;for(let c=1,h=Ic;;h+=Ic){a>=t&&yf("invalid-input");const d=Qbt(i.charCodeAt(a++));d>=Ic&&yf("invalid-input"),d>Oc((yy-r)/c)&&yf("overflow"),r+=d*c;const p=h<=s?WP:h>=s+Px?Px:h-s;if(d<p)break;const m=Ic-p;c>Oc(yy/m)&&yf("overflow"),c*=m}const u=e.length+1;s=xCe(r-l,u,l==0),Oc(r/u)>yy-n&&yf("overflow"),n+=Oc(r/u),r%=u,e.splice(r++,0,n)}return String.fromCodePoint(...e)},ECe=function(i){const e=[];i=_Ce(i);const t=i.length;let r=yCe,n=0,s=gCe;for(const l of i)l<128&&e.push(T3(l));const o=e.length;let a=o;for(o&&e.push(vCe);a<t;){let l=yy;for(const c of i)c>=r&&c<l&&(l=c);const u=a+1;l-r>Oc((yy-n)/u)&&yf("overflow"),n+=(l-r)*u,r=l;for(const c of i)if(c<r&&++n>yy&&yf("overflow"),c===r){let h=n;for(let d=Ic;;d+=Ic){const p=d<=s?WP:d>=s+Px?Px:d-s;if(h<p)break;const m=h-p,g=Ic-p;e.push(T3(Jge(p+m%g,0))),h=Oc(m/g)}e.push(T3(Jge(h,0))),s=xCe(n,u,a===o),n=0,++a}++n,++r}return e.join("")},e1t=function(i){return bCe(i,function(e){return Wbt.test(e)?wCe(e.slice(4).toLowerCase()):e})},t1t=function(i){return bCe(i,function(e){return Ybt.test(e)?"xn--"+ECe(e):e})},SCe={version:"2.3.1",ucs2:{decode:_Ce,encode:Jbt},decode:wCe,encode:ECe,toASCII:t1t,toUnicode:e1t},i1t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},r1t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},n1t={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},s1t={default:i1t,zero:r1t,commonmark:n1t},o1t=/^(vbscript|javascript|file|data):/,a1t=/^data:image\/(gif|png|jpeg|webp);/;function l1t(i){const e=i.trim().toLowerCase();return o1t.test(e)?a1t.test(e):!0}const CCe=["http:","https:","mailto:"];function u1t(i){const e=zP(i,!0);if(e.hostname&&(!e.protocol||CCe.indexOf(e.protocol)>=0))try{e.hostname=SCe.toASCII(e.hostname)}catch{}return Pw(jP(e))}function c1t(i){const e=zP(i,!0);if(e.hostname&&(!e.protocol||CCe.indexOf(e.protocol)>=0))try{e.hostname=SCe.toUnicode(e.hostname)}catch{}return Qy(jP(e),Qy.defaultChars+"%")}function fu(i,e){if(!(this instanceof fu))return new fu(i,e);e||GP(i)||(e=i||{},i="default"),this.inline=new Nw,this.block=new jA,this.core=new HP,this.renderer=new Gv,this.linkify=new $l,this.validateLink=l1t,this.normalizeLink=u1t,this.normalizeLinkText=c1t,this.utils=dvt,this.helpers=$A({},gvt),this.options={},this.configure(i),e&&this.set(e)}fu.prototype.set=function(i){return $A(this.options,i),this};fu.prototype.configure=function(i){const e=this;if(GP(i)){const t=i;if(i=s1t[t],!i)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!i)throw new Error("Wrong `markdown-it` preset, can't be empty");return i.options&&e.set(i.options),i.components&&Object.keys(i.components).forEach(function(t){i.components[t].rules&&e[t].ruler.enableOnly(i.components[t].rules),i.components[t].rules2&&e[t].ruler2.enableOnly(i.components[t].rules2)}),this};fu.prototype.enable=function(i,e){let t=[];Array.isArray(i)||(i=[i]),["core","block","inline"].forEach(function(n){t=t.concat(this[n].ruler.enable(i,!0))},this),t=t.concat(this.inline.ruler2.enable(i,!0));const r=i.filter(function(n){return t.indexOf(n)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};fu.prototype.disable=function(i,e){let t=[];Array.isArray(i)||(i=[i]),["core","block","inline"].forEach(function(n){t=t.concat(this[n].ruler.disable(i,!0))},this),t=t.concat(this.inline.ruler2.disable(i,!0));const r=i.filter(function(n){return t.indexOf(n)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};fu.prototype.use=function(i){const e=[this].concat(Array.prototype.slice.call(arguments,1));return i.apply(i,e),this};fu.prototype.parse=function(i,e){if(typeof i!="string")throw new Error("Input data should be a String");const t=new this.core.State(i,this,e);return this.core.process(t),t.tokens};fu.prototype.render=function(i,e){return e=e||{},this.renderer.render(this.parse(i,e),this.options,e)};fu.prototype.parseInline=function(i,e){const t=new this.core.State(i,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};fu.prototype.renderInline=function(i,e){return e=e||{},this.renderer.render(this.parseInline(i,e),this.options,e)};async function h1t(i){try{const e=await fetch(i);if(!e.ok)throw new Error("Network response was not ok");return await e.text()}catch(e){return console.error("There has been a problem with your fetch operation:",e),null}}const TCe=/^<!-- ?\{(?:([a-z0-9]+)(\^[0-9]*)?: ?)?(.*)} ?-->\n?$/,d1t={li:["list_item"],ul:["bullet_list"],p:["paragraph"],ol:["ordered_list"],blockquote:["blockquote"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],code:["code_inline","code_block","fence"]},ACe={hr:!0,image:!0},f1t={"eox-map":{tour:[["prevent-scroll",!0]]},img:{hero:[["position","center"],["data-parallax",!0]]},video:{hero:[["position","center"],["loop",!0],["muted",!0],["autoplay",!0],["data-parallax",!0]]}},p1t=["img","video"],A3={1:["0.0.0"]},m1t=["tour"],g1t=["iframe"];function kCe(){document.body.style.userSelect="none"}function y1t(){document.body.style.userSelect=""}function v1t(i,e,t){i.target===e&&(kCe(),t.dragging=!0,t.lastX=i.clientX,t.lastY=i.clientY)}function b1t(i,e,t){if(t.dragging){let r=i.clientX-t.lastX,n=i.clientY-t.lastY,{top:s,left:o}=e.getBoundingClientRect();e.style.top=`${s+n}px`,e.style.left=`${o+r}px`,t.lastX=i.clientX,t.lastY=i.clientY}if(t.dragging||t.resizing){let r=t.lastX-i.clientX,n=i.clientY-t.lastY,{width:s,height:o,left:a,top:l}=e.getBoundingClientRect();t.resizing&&(e.style.width=`${s+r}px`,e.style.height=`${o+n}px`,e.style.top=`${l}px`),e.style.left=`${a-r}px`,t.lastX=i.clientX,t.lastY=i.clientY}}function _1t(i){y1t(),i.dragging=!1,i.resizing=!1}function x1t(i,e){i.stopPropagation(),kCe(),e.resizing=!0,e.lastX=i.clientX,e.lastY=i.clientY}async function w1t(i,e,t){i.addEventListener("mousedown",r=>v1t(r,i,t)),window.addEventListener("mousemove",r=>b1t(r,i,t)),window.addEventListener("mouseup",()=>_1t(t)),e.addEventListener("mousedown",r=>x1t(r,t))}function E1t(i){const e=document.querySelector("eox-storytelling"),{y:t}=e.getBoundingClientRect(),r=i.querySelector(".editor-wrapper"),n=c=>Number(c.replace("px","")),s=window.getComputedStyle(r),o=n(s.bottom),a=n(s.padding)*2,l=r.classList.contains("partial-height")?80:0,u=window.innerHeight-t-o-a-l;r.style.height=`${u}px`}function S1t(i){const e=document.createElement("input");e.type="file",e.accept=".md",e.onchange=t=>{const r=t.target.files[0];if(!r)return;const n=new FileReader;n.onload=s=>{const o=s.target.result;i.value(o)},n.readAsText(r)},e.click()}function C1t(i){const e=i.value(),t=new Blob([e],{type:"text/markdown"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`${document.title}.md`,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function DCe(i){const e=[];return i.forEach((t,r)=>{(t.startsWith("## ")||t.startsWith("# ")&&e.length)&&e.push(r)}),e}function Qge(i,e,t,r,n,s){const o=i.split(`
`),a=s.shadowRoot||s,l=a.querySelector("eox-storytelling-editor"),c=DCe(o)[e];if(r)if(n){const d=a.querySelector("eox-jsonform#storytelling-editor-fields").editor.getValue();Object.keys(d).forEach(p=>{const m=d[p];t=t.replaceAll(`{${p}}`,m)}),s.selectedCustomElement=null}else{s.selectedCustomElement={markdown:t,fields:r},s.requestUpdate();return}c>=0?o.splice(c,0,t):o.push(t),l.editor.editor.editors["root.Story"].setValue(o.join(`
`)),setTimeout(()=>{const h=a.querySelector(`div[data-section="${e+1}"]`);h&&window.scrollTo(0,h.offsetTop)},200),s.addCustomSectionIndex=-1,s.requestUpdate()}function T1t(i,e,t){let r=null;t==null||t.codemirror.on("change",function(){const n=i.querySelector(".editor-saver");n.innerText="Auto Saving...",r&&clearTimeout(r),r=setTimeout(()=>{n.innerText="Saved";const s=JSON.parse(localStorage.getItem("markdown")||"{}");localStorage.setItem("markdown",JSON.stringify({...s,[e||"default"]:t.value()})),r=null},2500)})}function A1t(i){var e;(e=(i.shadowRoot||i).querySelector(".CodeMirror-scroll"))==null||e.addEventListener("wheel",function(t){const r=t.deltaY,n=this.scrollHeight,s=this.clientHeight;(this.scrollTop===0&&r<0||this.scrollTop+s>=n&&r>0)&&t.preventDefault()},{passive:!1})}function k1t(i){if(i.showEditor!==void 0){let e=JSON.parse(localStorage.getItem("markdown")||"{}");const t=i.id||"default",r=e[t];r&&r!==i.markdown&&(confirm("Recover your Story from the last time you edited?")?i.markdown=r:(delete e[t],localStorage.setItem("markdown",JSON.stringify(e))))}}function MCe(i){var e,t;if((t=(e=i.editor.editor)==null?void 0:e.editors)!=null&&t["root.Story"]){const r=i.editor.editor.editors["root.Story"].simplemde_instance;T1t(i,i.storyId,r),A1t(i)}else setTimeout(()=>MCe(i),100)}function LCe(i){var t;i.renderRoot.querySelector(".editor-wrapper").classList.add("editor-opacity-none"),i.editor&&i.editor.editor&&i.editor.editor.ready&&((t=i.editor.editor)!=null&&t.editors["root.Story"].simplemde_instance)?i.querySelector(".switch-input").click():setTimeout(()=>LCe(i),100)}const k3=(i,e,t,r,n)=>({name:i,action:n||function({codemirror:o}){const a=o.getCursor("start"),l=o.getCursor("end");o.replaceRange(e,a,l)},className:t,title:r}),D1t={properties:{Story:{type:"string",format:"markdown",options:{simplemde:{toolbar:["bold","italic","strikethrough","heading","|","unordered-list","ordered-list","link","|",k3("import",null,"fa fa-upload","Import Markdown File",S1t),k3("export",null,"fa fa-download","Export Markdown File",C1t),"|",k3("add-custom-section",null,"fa fa-plus","Add custom section",()=>{const i=document.querySelector("eox-storytelling"),e=i.markdown.split(`
`),t=DCe(e);i&&(i.addCustomSectionIndex=t.length,i.requestUpdate())})],spellChecker:!1}}}}},M1t=`## What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
`,L1t=`## Table <!--{ as="div" }-->
| Number | Random Name | Lorem Ipsum                                       |
|--------|-------------|---------------------------------------------------|
| 1      | Alice       | Lorem ipsum dolor sit amet, consectetur adipiscing |
| 2      | Bob         | elit. Sed do eiusmod tempor incididunt ut labore  |
| 3      | Charlie     | et dolore magna aliqua. Ut enim ad minim veniam,  |
| 4      | Dana        | quis nostrud exercitation ullamco laboris nisi ut |
| 5      | Eve         | aliquip ex ea commodo consequat. Duis aute irure  |
`,R1t=`## List <!--{ as="div" }-->
1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. **Sed do eiusmod tempor** incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
2. _Duis aute irure_ dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
3. **Lorem ipsum dolor sit amet,** consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. _Ut enim ad minim veniam, quis nostrud exercitation ullamco_ laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
4. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
5. _Ut enim ad minim veniam, quis nostrud_ exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. **Duis aute irure dolor** in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
6. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,I1t=`## {title} <!--{as="eox-map" style="width: 100%; height: 500px;" layers='{layers}' zoom="{zoom}" center=[{longitude},{latitude}] }-->
`,O1t={title:"Simple Map",type:"object",required:["title","layers"],properties:{title:{type:"string",default:"Map Example",format:"text"},layers:{type:"string",default:'[ { "type": "Tile", "properties": { "id": "TOPO-WMS" }, "source": { "type": "TileWMS", "url": "https://ows.mundialis.de/services/service", "params": { "LAYERS": "TOPO-WMS" } } } ]',format:"textarea"},zoom:{type:"integer",default:2,minimum:1,maximum:28,format:"number"},longitude:{type:"integer",default:15,format:"number"},latitude:{type:"integer",default:48,format:"number"}}},P1t=`## {title} <!--{ as="eox-map" mode="tour" }-->

### <!--{ layers='{layers}' center=[{longitude},{latitude}] zoom="{zoom}" animationOptions="{duration:500}" }-->
#### {tourTitle}
{description}
`,F1t={title:"Tour",type:"object",required:["title"],properties:{title:{type:"string",default:"Map Tour Example",format:"text"},layers:{title:"Layers (Tour 1)",type:"string",default:'[{"type":"Tile","properties":{"id":"osm"},"source":{"type":"OSM"}}]',format:"textarea"},zoom:{title:"Zoom (Tour 1)",type:"integer",default:5,minimum:1,maximum:28,format:"number"},longitude:{title:"Longitude (Tour 1)",type:"integer",default:15,format:"number"},latitude:{title:"Longitude (Tour 1)",type:"integer",default:48,format:"number"},tourTitle:{title:"Title (Tour 1)",type:"string",default:"Tour Title",format:"text"},description:{title:"Description (Tour 1)",type:"string",default:"Some description for tour 1",format:"text"}}},N1t=`## {title} <!--{as="img" src="{src}" style="width: 100%; height: 600px;"}-->
`,$1t={title:"Simple Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Simple Image Example",format:"text"},src:{type:"string",default:"https://images.unsplash.com/photo-1461880234904-751a2f54f1c7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",format:"text"}}},B1t=`# {title} <!--{ as="img" mode="hero" src="{src}" }-->
### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,j1t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Image Example",format:"text"},src:{type:"string",default:"https://www.gstatic.com/prettyearth/assets/full/14617.jpg",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},z1t=`# {title} <!--{ as="video" mode="hero" src="{src}" }-->
#### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,U1t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Video Example",format:"text"},src:{type:"string",default:"https://dlmultimedia.esa.int/download/public/videos/2023/06/010/2306_010_AR_EN.mp4",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},G1t=[{name:"Basic",elements:[{name:"Textual",id:"ele-textual",markdown:M1t,icon:"data:image/svg+xml,%3Csvg fill='none' viewBox='0 0 138 112' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23f7f7f7' rx='4' height='112' width='138'/%3E%3Crect x='27' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='70' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='82' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3C/svg%3E"},{name:"Table",id:"ele-table",markdown:L1t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 137 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='137' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='26' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='73' width='84' height='14' rx='7' fill='%23D9D9D9'/%3E%3C/svg%3E%0A"},{name:"List",id:"ele-list",markdown:R1t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='38' y='22' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='34' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='46' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='58' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='70' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='82' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Ccircle cx='30.5' cy='25.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='37.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='49.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='61.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='73.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='85.5' r='3.5' fill='%23BFBFBF'/%3E%3C/svg%3E%0A"}]},{name:"Map",elements:[{name:"Simple Map",id:"ele-simple-map",markdown:I1t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M54.08 42.873L56.58 52.373C57.83 57.123 65.08 59.373 69.58 59.373C73.18 59.373 74.7467 63.0397 75.08 64.873C74.08 68.0397 73.48 74.373 79.08 74.373C84.68 74.373 85.08 70.7064 84.58 68.873L80.58 59.373C78.2467 56.5397 73.58 49.473 73.58 43.873C73.58 38.2729 69.9134 37.873 68.08 38.373C64.08 42.373 60.4134 40.0397 59.08 38.373C54.28 36.773 53.7467 40.7063 54.08 42.873Z' fill='%235E5E5E'/%3E%3Cpath d='M59.0891 62.4676C58.5923 65.8092 60.2794 68.2359 61.5214 68.4348C66.4893 71.7763 70.4738 69.4293 71.5088 68.4348C72.9992 66.5253 71.7634 63.0643 70.5214 62.4676C68.5343 62.945 64.5564 63.661 63.5214 62.4676C62.031 60.5581 60.0214 60.4641 59.0891 62.4676Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:O1t},{name:"Tour",id:"ele-map-tour",markdown:P1t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M65.08 35.873L67.58 45.373C68.83 50.123 76.08 52.373 80.58 52.373C84.18 52.373 85.7467 56.0397 86.08 57.873C85.08 61.0397 84.48 67.373 90.08 67.373C95.68 67.373 96.08 63.7064 95.58 61.873L91.58 52.373C89.2467 49.5397 84.58 42.473 84.58 36.873C84.58 31.2729 80.9134 30.873 79.08 31.373C75.08 35.373 71.4134 33.0397 70.08 31.373C65.28 29.773 64.7467 33.7063 65.08 35.873Z' fill='%235E5E5E'/%3E%3Cpath d='M70.0891 55.4676C69.5923 58.8092 71.2794 61.2359 72.5214 61.4348C77.4893 64.7763 81.4738 62.4293 82.5088 61.4348C83.9992 59.5253 82.7634 56.0643 81.5214 55.4676C79.5343 55.945 75.5564 56.661 74.5214 55.4676C73.031 53.5581 71.0214 53.4641 70.0891 55.4676Z' fill='%235E5E5E'/%3E%3Crect x='34' y='67' width='26' height='16' rx='2' fill='%23f7f7f7'/%3E%3C/svg%3E%0A",fields:F1t}]},{name:"Media",elements:[{name:"Simple",id:"ele-simple-media",markdown:N1t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M69.5 39L73.2045 50.4012H85.1924L75.494 57.4476L79.1985 68.8488L69.5 61.8024L59.8015 68.8488L63.506 57.4476L53.8076 50.4012H65.7955L69.5 39Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:$1t},{name:"Hero Image",id:"ele-hero-image",markdown:B1t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3C/svg%3E%0A",fields:j1t},{name:"Hero Video",id:"ele-hero-video",markdown:z1t,icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 138 112' fill='none'%3E%3Crect width='138' height='112' rx='4' fill='%23F2F2F2'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23D8D8D8'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3Cline x1='20.6233' y1='87.6712' x2='75.6233' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3Cline x1='64.6233' y1='87.6712' x2='119.623' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3C/svg%3E",fields:U1t}]}];var RCe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(Rn,function(){function t(R){var j=function(Z,Q){if(typeof Z!="object"||!Z)return Z;var ge=Z[Symbol.toPrimitive];if(ge!==void 0){var be=ge.call(Z,Q||"default");if(typeof be!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Q==="string"?String:Number)(Z)}(R,"string");return typeof j=="symbol"?j:j+""}function r(R){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(R)}function n(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")}function s(R,j){for(var Z=0;Z<j.length;Z++){var Q=j[Z];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(R,t(Q.key),Q)}}function o(R,j,Z){return j&&s(R.prototype,j),Z&&s(R,Z),Object.defineProperty(R,"prototype",{writable:!1}),R}var a=Date.now();function l(){var R={},j=!0,Z=0,Q=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(j=arguments[0],Z++);for(var ge=function(Ce){for(var G in Ce)Object.prototype.hasOwnProperty.call(Ce,G)&&(j&&Object.prototype.toString.call(Ce[G])==="[object Object]"?R[G]=l(!0,R[G],Ce[G]):R[G]=Ce[G])};Z<Q;Z++){var be=arguments[Z];ge(be)}return R}function u(R,j){if((K(R)||R===window||R===document)&&(R=[R]),F(R)||$(R)||(R=[R]),J(R)!=0){if(F(R)&&!$(R))for(var Z=R.length,Q=0;Q<Z&&j.call(R[Q],R[Q],Q,R)!==!1;Q++);else if($(R)){for(var ge in R)if(V(R,ge)&&j.call(R[ge],R[ge],ge,R)===!1)break}}}function c(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Q=R[a]=R[a]||[],ge={all:Q,evt:null,found:null};return j&&Z&&J(Q)>0&&u(Q,function(be,Ce){if(be.eventName==j&&be.fn.toString()==Z.toString())return ge.found=!0,ge.evt=Ce,!1}),ge}function h(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=j.onElement,Q=j.withCallback,ge=j.avoidDuplicate,be=ge===void 0||ge,Ce=j.once,G=Ce!==void 0&&Ce,re=j.useCapture,he=re!==void 0&&re,ce=arguments.length>2?arguments[2]:void 0,Te=Z||[];function Ae(Se){P(Q)&&Q.call(ce,Se,this),G&&Ae.destroy()}return U(Te)&&(Te=document.querySelectorAll(Te)),Ae.destroy=function(){u(Te,function(Se){var De=c(Se,R,Ae);De.found&&De.all.splice(De.evt,1),Se.removeEventListener&&Se.removeEventListener(R,Ae,he)})},u(Te,function(Se){var De=c(Se,R,Ae);(Se.addEventListener&&be&&!De.found||!be)&&(Se.addEventListener(R,Ae,he),De.all.push({eventName:R,fn:Ae}))}),Ae}function d(R,j){u(j.split(" "),function(Z){return R.classList.add(Z)})}function p(R,j){u(j.split(" "),function(Z){return R.classList.remove(Z)})}function m(R,j){return R.classList.contains(j)}function g(R,j){for(;R!==document.body;){if(!(R=R.parentElement))return!1;if(typeof R.matches=="function"?R.matches(j):R.msMatchesSelector(j))return R}}function v(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Z=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!R||j==="")return!1;if(j==="none")return P(Z)&&Z(),!1;var Q=D(),ge=j.split(" ");u(ge,function(be){d(R,"g"+be)}),h(Q,{onElement:R,avoidDuplicate:!1,once:!0,withCallback:function(be,Ce){u(ge,function(G){p(Ce,"g"+G)}),P(Z)&&Z()}})}function b(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(j==="")return R.style.webkitTransform="",R.style.MozTransform="",R.style.msTransform="",R.style.OTransform="",R.style.transform="",!1;R.style.webkitTransform=j,R.style.MozTransform=j,R.style.msTransform=j,R.style.OTransform=j,R.style.transform=j}function _(R){R.style.display="block"}function E(R){R.style.display="none"}function C(R){var j=document.createDocumentFragment(),Z=document.createElement("div");for(Z.innerHTML=R;Z.firstChild;)j.appendChild(Z.firstChild);return j}function T(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function D(){var R,j=document.createElement("fakeelement"),Z={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(R in Z)if(j.style[R]!==void 0)return Z[R]}function M(R,j,Z,Q){if(R())j();else{var ge;Z||(Z=100);var be=setInterval(function(){R()&&(clearInterval(be),ge&&clearTimeout(ge),j())},Z);Q&&(ge=setTimeout(function(){clearInterval(be)},Q))}}function A(R,j,Z){if(H(R))console.error("Inject assets error");else if(P(j)&&(Z=j,j=!1),U(j)&&j in window)P(Z)&&Z();else{var Q;if(R.indexOf(".css")!==-1){if((Q=document.querySelectorAll('link[href="'+R+'"]'))&&Q.length>0)return void(P(Z)&&Z());var ge=document.getElementsByTagName("head")[0],be=ge.querySelectorAll('link[rel="stylesheet"]'),Ce=document.createElement("link");return Ce.rel="stylesheet",Ce.type="text/css",Ce.href=R,Ce.media="all",be?ge.insertBefore(Ce,be[0]):ge.appendChild(Ce),void(P(Z)&&Z())}if((Q=document.querySelectorAll('script[src="'+R+'"]'))&&Q.length>0){if(P(Z)){if(U(j))return M(function(){return window[j]!==void 0},function(){Z()}),!1;Z()}}else{var G=document.createElement("script");G.type="text/javascript",G.src=R,G.onload=function(){if(P(Z)){if(U(j))return M(function(){return window[j]!==void 0},function(){Z()}),!1;Z()}},document.body.appendChild(G)}}}function I(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function P(R){return typeof R=="function"}function U(R){return typeof R=="string"}function K(R){return!(!R||!R.nodeType||R.nodeType!=1)}function L(R){return Array.isArray(R)}function F(R){return R&&R.length&&isFinite(R.length)}function $(R){return r(R)==="object"&&R!=null&&!P(R)&&!L(R)}function H(R){return R==null}function V(R,j){return R!==null&&hasOwnProperty.call(R,j)}function J(R){if($(R)){if(R.keys)return R.keys().length;var j=0;for(var Z in R)V(R,Z)&&j++;return j}return R.length}function ee(R){return!isNaN(parseFloat(R))&&isFinite(R)}function ie(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,j=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!j.length)return!1;if(j.length==1)return j[0];typeof R=="string"&&(R=parseInt(R));var Z=[];u(j,function(G){Z.push(G.getAttribute("data-taborder"))});var Q=Math.max.apply(Math,Z.map(function(G){return parseInt(G)})),ge=R<0?1:R+1;ge>Q&&(ge="1");var be=Z.filter(function(G){return G>=parseInt(ge)}),Ce=be.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(Ce,'"]'))}function de(R){if(R.events.hasOwnProperty("keyboard"))return!1;R.events.keyboard=h("keydown",{onElement:window,withCallback:function(j,Z){var Q=(j=j||window.event).keyCode;if(Q==9){var ge=document.querySelector(".gbtn.focused");if(!ge){var be=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(be=="input"||be=="textarea"||be=="button")return}j.preventDefault();var Ce=document.querySelectorAll(".gbtn[data-taborder]");if(!Ce||Ce.length<=0)return;if(!ge){var G=ie();return void(G&&(G.focus(),d(G,"focused")))}var re=ie(ge.getAttribute("data-taborder"));p(ge,"focused"),re&&(re.focus(),d(re,"focused"))}Q==39&&R.nextSlide(),Q==37&&R.prevSlide(),Q==27&&R.close()}})}var te=o(function R(j,Z){var Q=this,ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(n(this,R),this.img=j,this.slide=Z,this.onclose=ge,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(be){return Q.dragStart(be)},!1),this.img.addEventListener("mouseup",function(be){return Q.dragEnd(be)},!1),this.img.addEventListener("mousemove",function(be){return Q.drag(be)},!1),this.img.addEventListener("click",function(be){return Q.slide.classList.contains("dragging-nav")?(Q.zoomOut(),!1):Q.zoomedIn?void(Q.zoomedIn&&!Q.dragging&&Q.zoomOut()):Q.zoomIn()},!1),this.img.setZoomEvents=!0},[{key:"zoomIn",value:function(){var R=this.widowWidth();if(!(this.zoomedIn||R<=768)){var j=this.img;if(j.setAttribute("data-style",j.getAttribute("style")),j.style.maxWidth=j.naturalWidth+"px",j.style.maxHeight=j.naturalHeight+"px",j.naturalWidth>R){var Z=R/2-j.naturalWidth/2;this.setTranslate(this.img.parentNode,Z,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(R){R.preventDefault(),this.zoomedIn?(R.type==="touchstart"?(this.initialX=R.touches[0].clientX-this.xOffset,this.initialY=R.touches[0].clientY-this.yOffset):(this.initialX=R.clientX-this.xOffset,this.initialY=R.clientY-this.yOffset),R.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(R){var j=this;R.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){j.dragging=!1,j.img.isDragging=!1,j.img.classList.remove("dragging")},100)}},{key:"drag",value:function(R){this.active&&(R.preventDefault(),R.type==="touchmove"?(this.currentX=R.touches[0].clientX-this.initialX,this.currentY=R.touches[0].clientY-this.initialY):(this.currentX=R.clientX-this.initialX,this.currentY=R.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(R){if(this.zoomedIn){var j=R.clientX-this.img.naturalWidth/2,Z=R.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,j,Z)}}},{key:"setTranslate",value:function(R,j,Z){R.style.transform="translate3d("+j+"px, "+Z+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),z=o(function R(){var j=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,R);var Q=Z.dragEl,ge=Z.toleranceX,be=ge===void 0?40:ge,Ce=Z.toleranceY,G=Ce===void 0?65:Ce,re=Z.slide,he=re===void 0?null:re,ce=Z.instance,Te=ce===void 0?null:ce;this.el=Q,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=be,this.toleranceY=G,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=he,this.instance=Te,this.el.addEventListener("mousedown",function(Ae){return j.dragStart(Ae)},!1),this.el.addEventListener("mouseup",function(Ae){return j.dragEnd(Ae)},!1),this.el.addEventListener("mousemove",function(Ae){return j.drag(Ae)},!1)},[{key:"dragStart",value:function(R){if(this.slide.classList.contains("zoomed"))this.active=!1;else{R.type==="touchstart"?(this.initialX=R.touches[0].clientX-this.xOffset,this.initialY=R.touches[0].clientY-this.yOffset):(this.initialX=R.clientX-this.xOffset,this.initialY=R.clientY-this.yOffset);var j=R.target.nodeName.toLowerCase();R.target.classList.contains("nodrag")||g(R.target,".nodrag")||["input","select","textarea","button","a"].indexOf(j)!==-1?this.active=!1:(R.preventDefault(),(R.target===this.el||j!=="img"&&g(R.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=g(R.target,".ginner-container")))}}},{key:"dragEnd",value:function(R){var j=this;R&&R.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){j.instance.preventOutsideClick=!1,j.toleranceReached=!1,j.lastDirection=null,j.dragging=!1,j.el.isDragging=!1,j.el.classList.remove("dragging"),j.slide.classList.remove("dragging-nav"),j.dragContainer.style.transform="",j.dragContainer.style.transition=""},100)}},{key:"drag",value:function(R){if(this.active){R.preventDefault(),this.slide.classList.add("dragging-nav"),R.type==="touchmove"?(this.currentX=R.touches[0].clientX-this.initialX,this.currentY=R.touches[0].clientY-this.initialY):(this.currentX=R.clientX-this.initialX,this.currentY=R.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var j=Math.abs(this.currentX),Z=Math.abs(this.currentY);if(j>0&&j>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var Q=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&Q&&(this.doSlideChange=Q),this.instance.settings.dragAutoSnap&&Q)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),Q=="right"&&this.instance.prevSlide(),void(Q=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&Z>0&&Z>=j&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var ge=this.shouldClose();return!this.instance.settings.dragAutoSnap&&ge&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&ge&&this.instance.close())}}}},{key:"shouldChange",value:function(){var R=!1;if(Math.abs(this.currentX)>=this.toleranceX){var j=this.currentX>0?"right":"left";(j=="left"&&this.slide!==this.slide.parentNode.lastChild||j=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(R=j)}return R}},{key:"shouldClose",value:function(){var R=!1;return Math.abs(this.currentY)>=this.toleranceY&&(R=!0),R}},{key:"setTranslate",value:function(R,j,Z){var Q=arguments.length>3&&arguments[3]!==void 0&&arguments[3];R.style.transition=Q?"all .2s ease":"",R.style.transform="translate3d(".concat(j,"px, ").concat(Z,"px, 0)")}}]);function ne(R,j,Z,Q){var ge=R.querySelector(".gslide-media"),be=new Image,Ce="gSlideTitle_"+Z,G="gSlideDesc_"+Z;be.addEventListener("load",function(){P(Q)&&Q()},!1),be.src=j.href,j.sizes!=""&&j.srcset!=""&&(be.sizes=j.sizes,be.srcset=j.srcset),be.alt="",H(j.alt)||j.alt===""||(be.alt=j.alt),j.title!==""&&be.setAttribute("aria-labelledby",Ce),j.description!==""&&be.setAttribute("aria-describedby",G),j.hasOwnProperty("_hasCustomWidth")&&j._hasCustomWidth&&(be.style.width=j.width),j.hasOwnProperty("_hasCustomHeight")&&j._hasCustomHeight&&(be.style.height=j.height),ge.insertBefore(be,ge.firstChild)}function ve(R,j,Z,Q){var ge=this,be=R.querySelector(".ginner-container"),Ce="gvideo"+Z,G=R.querySelector(".gslide-media"),re=this.getAllPlayers();d(be,"gvideo-container"),G.insertBefore(C('<div class="gvideo-wrapper"></div>'),G.firstChild);var he=R.querySelector(".gvideo-wrapper");A(this.settings.plyr.css,"Plyr");var ce=j.href,Te=j==null?void 0:j.videoProvider,Ae=!1;G.style.maxWidth=j.width,A(this.settings.plyr.js,"Plyr",function(){if(!Te&&ce.match(/vimeo\.com\/([0-9]*)/)&&(Te="vimeo"),!Te&&(ce.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||ce.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||ce.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||ce.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(Te="youtube"),Te==="local"||!Te){Te="local";var Se='<video id="'+Ce+'" ';Se+='style="background:#000; max-width: '.concat(j.width,';" '),Se+='preload="metadata" ',Se+='x-webkit-airplay="allow" ',Se+="playsinline ",Se+="controls ",Se+='class="gvideo-local">',Se+='<source src="'.concat(ce,'">'),Ae=C(Se+="</video>")}var De=Ae||C('<div id="'.concat(Ce,'" data-plyr-provider="').concat(Te,'" data-plyr-embed-id="').concat(ce,'"></div>'));d(he,"".concat(Te,"-video gvideo")),he.appendChild(De),he.setAttribute("data-id",Ce),he.setAttribute("data-index",Z);var Oe=V(ge.settings.plyr,"config")?ge.settings.plyr.config:{},Ge=new Plyr("#"+Ce,Oe);Ge.on("ready",function(et){re[Ce]=et.detail.plyr,P(Q)&&Q()}),M(function(){return R.querySelector("iframe")&&R.querySelector("iframe").dataset.ready=="true"},function(){ge.resize(R)}),Ge.on("enterfullscreen",$e),Ge.on("exitfullscreen",$e)})}function $e(R){var j=g(R.target,".gslide-media");R.type==="enterfullscreen"&&d(j,"fullscreen"),R.type==="exitfullscreen"&&p(j,"fullscreen")}function Xe(R,j,Z,Q){var ge,be=this,Ce=R.querySelector(".gslide-media"),G=!(!V(j,"href")||!j.href)&&j.href.split("#").pop().trim(),re=!(!V(j,"content")||!j.content)&&j.content;if(re&&(U(re)&&(ge=C('<div class="ginlined-content">'.concat(re,"</div>"))),K(re))){re.style.display=="none"&&(re.style.display="block");var he=document.createElement("div");he.className="ginlined-content",he.appendChild(re),ge=he}if(G){var ce=document.getElementById(G);if(!ce)return!1;var Te=ce.cloneNode(!0);Te.style.height=j.height,Te.style.maxWidth=j.width,d(Te,"ginlined-content"),ge=Te}if(!ge)return console.error("Unable to append inline slide content",j),!1;Ce.style.height=j.height,Ce.style.width=j.width,Ce.appendChild(ge),this.events["inlineclose"+G]=h("click",{onElement:Ce.querySelectorAll(".gtrigger-close"),withCallback:function(Ae){Ae.preventDefault(),be.close()}}),P(Q)&&Q()}function ot(R,j,Z,Q){var ge=R.querySelector(".gslide-media"),be=function(Ce){var G=Ce.url,re=Ce.allow,he=Ce.callback,ce=Ce.appendTo,Te=document.createElement("iframe");return Te.className="vimeo-video gvideo",Te.src=G,Te.style.width="100%",Te.style.height="100%",re&&Te.setAttribute("allow",re),Te.onload=function(){Te.onload=null,d(Te,"node-ready"),P(he)&&he()},ce&&ce.appendChild(Te),Te}({url:j.href,callback:Q});ge.parentNode.style.maxWidth=j.width,ge.parentNode.style.height=j.height,ge.appendChild(be)}var Be=o(function R(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,R),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},$(j)&&(this.defaults=l(this.defaults,j))},[{key:"sourceType",value:function(R){var j=R;return(R=R.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":R.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||R.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||R.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||R.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||R.match(/vimeo\.com\/([0-9]*)/)||R.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":R.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":R.indexOf("#")>-1&&j.split("#").pop().trim()!==""?"inline":R.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(R,j){var Z=this,Q=l({descPosition:j.descPosition},this.defaults);if($(R)&&!K(R)){V(R,"type")||(V(R,"content")&&R.content?R.type="inline":V(R,"href")&&(R.type=this.sourceType(R.href)));var ge=l(Q,R);return this.setSize(ge,j),ge}var be="",Ce=R.getAttribute("data-glightbox"),G=R.nodeName.toLowerCase();if(G==="a"&&(be=R.href),G==="img"&&(be=R.src,Q.alt=R.alt),Q.href=be,u(Q,function(Se,De){V(j,De)&&De!=="width"&&(Q[De]=j[De]);var Oe=R.dataset[De];H(Oe)||(Q[De]=Z.sanitizeValue(Oe))}),Q.content&&(Q.type="inline"),!Q.type&&be&&(Q.type=this.sourceType(be)),H(Ce)){if(!Q.title&&G=="a"){var re=R.title;H(re)||re===""||(Q.title=re)}if(!Q.title&&G=="img"){var he=R.alt;H(he)||he===""||(Q.title=he)}}else{var ce=[];u(Q,function(Se,De){ce.push(";\\s?"+De)}),ce=ce.join("\\s?:|"),Ce.trim()!==""&&u(Q,function(Se,De){var Oe=Ce,Ge=new RegExp("s?"+De+"s?:s?(.*?)("+ce+"s?:|$)"),et=Oe.match(Ge);if(et&&et.length&&et[1]){var ht=et[1].trim().replace(/;\s*$/,"");Q[De]=Z.sanitizeValue(ht)}})}if(Q.description&&Q.description.substring(0,1)==="."){var Te;try{Te=document.querySelector(Q.description).innerHTML}catch(Se){if(!(Se instanceof DOMException))throw Se}Te&&(Q.description=Te)}if(!Q.description){var Ae=R.querySelector(".glightbox-desc");Ae&&(Q.description=Ae.innerHTML)}return this.setSize(Q,j,R),this.slideConfig=Q,Q}},{key:"setSize",value:function(R,j){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Q=R.type=="video"?this.checkSize(j.videosWidth):this.checkSize(j.width),ge=this.checkSize(j.height);return R.width=V(R,"width")&&R.width!==""?this.checkSize(R.width):Q,R.height=V(R,"height")&&R.height!==""?this.checkSize(R.height):ge,Z&&R.type=="image"&&(R._hasCustomWidth=!!Z.dataset.width,R._hasCustomHeight=!!Z.dataset.height),R}},{key:"checkSize",value:function(R){return ee(R)?"".concat(R,"px"):R}},{key:"sanitizeValue",value:function(R){return R!=="true"&&R!=="false"?R:R==="true"}}]),He=o(function R(j,Z,Q){n(this,R),this.element=j,this.instance=Z,this.index=Q},[{key:"setContent",value:function(){var R=this,j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Z=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(m(j,"loaded"))return!1;var Q=this.instance.settings,ge=this.slideConfig,be=I();P(Q.beforeSlideLoad)&&Q.beforeSlideLoad({index:this.index,slide:j,player:!1});var Ce=ge.type,G=ge.descPosition,re=j.querySelector(".gslide-media"),he=j.querySelector(".gslide-title"),ce=j.querySelector(".gslide-desc"),Te=j.querySelector(".gdesc-inner"),Ae=Z,Se="gSlideTitle_"+this.index,De="gSlideDesc_"+this.index;if(P(Q.afterSlideLoad)&&(Ae=function(){P(Z)&&Z(),Q.afterSlideLoad({index:R.index,slide:j,player:R.instance.getSlidePlayerInstance(R.index)})}),ge.title==""&&ge.description==""?Te&&Te.parentNode.parentNode.removeChild(Te.parentNode):(he&&ge.title!==""?(he.id=Se,he.innerHTML=ge.title):he.parentNode.removeChild(he),ce&&ge.description!==""?(ce.id=De,be&&Q.moreLength>0?(ge.smallDescription=this.slideShortDesc(ge.description,Q.moreLength,Q.moreText),ce.innerHTML=ge.smallDescription,this.descriptionEvents(ce,ge)):ce.innerHTML=ge.description):ce.parentNode.removeChild(ce),d(re.parentNode,"desc-".concat(G)),d(Te.parentNode,"description-".concat(G))),d(re,"gslide-".concat(Ce)),d(j,"loaded"),Ce!=="video"){if(Ce!=="external")return Ce==="inline"?(Xe.apply(this.instance,[j,ge,this.index,Ae]),void(ge.draggable&&new z({dragEl:j.querySelector(".gslide-inline"),toleranceX:Q.dragToleranceX,toleranceY:Q.dragToleranceY,slide:j,instance:this.instance}))):void(Ce!=="image"?P(Ae)&&Ae():ne(j,ge,this.index,function(){var Oe=j.querySelector("img");ge.draggable&&new z({dragEl:Oe,toleranceX:Q.dragToleranceX,toleranceY:Q.dragToleranceY,slide:j,instance:R.instance}),ge.zoomable&&Oe.naturalWidth>Oe.offsetWidth&&(d(Oe,"zoomable"),new te(Oe,j,function(){R.instance.resize()})),P(Ae)&&Ae()}));ot.apply(this,[j,ge,this.index,Ae])}else ve.apply(this.instance,[j,ge,this.index,Ae])}},{key:"slideShortDesc",value:function(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,Z=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Q=document.createElement("div");Q.innerHTML=R;var ge=Q.innerText,be=Z;if((R=ge.trim()).length<=j)return R;var Ce=R.substr(0,j-1);return be?(Q=null,Ce+'... <a href="#" class="desc-more">'+Z+"</a>"):Ce}},{key:"descriptionEvents",value:function(R,j){var Z=this,Q=R.querySelector(".desc-more");if(!Q)return!1;h("click",{onElement:Q,withCallback:function(ge,be){ge.preventDefault();var Ce=document.body,G=g(be,".gslide-desc");if(!G)return!1;G.innerHTML=j.description,d(Ce,"gdesc-open");var re=h("click",{onElement:[Ce,g(G,".gslide-description")],withCallback:function(he,ce){he.target.nodeName.toLowerCase()!=="a"&&(p(Ce,"gdesc-open"),d(Ce,"gdesc-closed"),G.innerHTML=j.smallDescription,Z.descriptionEvents(G,j),setTimeout(function(){p(Ce,"gdesc-closed")},400),re.destroy())}})}})}},{key:"create",value:function(){return C(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){K(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var R=new Be(this.instance.settings.slideExtraAttributes);return this.slideConfig=R.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function st(R){return Math.sqrt(R.x*R.x+R.y*R.y)}function xt(R,j){var Z=function(Q,ge){var be=st(Q)*st(ge);if(be===0)return 0;var Ce=function(G,re){return G.x*re.x+G.y*re.y}(Q,ge)/be;return Ce>1&&(Ce=1),Math.acos(Ce)}(R,j);return function(Q,ge){return Q.x*ge.y-ge.x*Q.y}(R,j)>0&&(Z*=-1),180*Z/Math.PI}var kt=o(function R(j){n(this,R),this.handlers=[],this.el=j},[{key:"add",value:function(R){this.handlers.push(R)}},{key:"del",value:function(R){R||(this.handlers=[]);for(var j=this.handlers.length;j>=0;j--)this.handlers[j]===R&&this.handlers.splice(j,1)}},{key:"dispatch",value:function(){for(var R=0,j=this.handlers.length;R<j;R++){var Z=this.handlers[R];typeof Z=="function"&&Z.apply(this.el,arguments)}}}]);function Tt(R,j){var Z=new kt(R);return Z.add(j),Z}var Ei=o(function R(j,Z){n(this,R),this.element=typeof j=="string"?document.querySelector(j):j,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var Q=function(){};this.rotate=Tt(this.element,Z.rotate||Q),this.touchStart=Tt(this.element,Z.touchStart||Q),this.multipointStart=Tt(this.element,Z.multipointStart||Q),this.multipointEnd=Tt(this.element,Z.multipointEnd||Q),this.pinch=Tt(this.element,Z.pinch||Q),this.swipe=Tt(this.element,Z.swipe||Q),this.tap=Tt(this.element,Z.tap||Q),this.doubleTap=Tt(this.element,Z.doubleTap||Q),this.longTap=Tt(this.element,Z.longTap||Q),this.singleTap=Tt(this.element,Z.singleTap||Q),this.pressMove=Tt(this.element,Z.pressMove||Q),this.twoFingerPressMove=Tt(this.element,Z.twoFingerPressMove||Q),this.touchMove=Tt(this.element,Z.touchMove||Q),this.touchEnd=Tt(this.element,Z.touchEnd||Q),this.touchCancel=Tt(this.element,Z.touchCancel||Q),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}},[{key:"start",value:function(R){if(R.touches)if(R.target&&R.target.nodeName&&["a","button","input"].indexOf(R.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",R.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=R.touches[0].pageX,this.y1=R.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(R,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var j=this.preV;if(R.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var Z={x:R.touches[1].pageX-this.x1,y:R.touches[1].pageY-this.y1};j.x=Z.x,j.y=Z.y,this.pinchStartLen=st(j),this.multipointStart.dispatch(R,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){this.longTap.dispatch(R,this.element),this._preventTap=!0}).bind(this),750)}}},{key:"move",value:function(R){if(R.touches){var j=this.preV,Z=R.touches.length,Q=R.touches[0].pageX,ge=R.touches[0].pageY;if(this.isDoubleTap=!1,Z>1){var be=R.touches[1].pageX,Ce=R.touches[1].pageY,G={x:R.touches[1].pageX-Q,y:R.touches[1].pageY-ge};j.x!==null&&(this.pinchStartLen>0&&(R.zoom=st(G)/this.pinchStartLen,this.pinch.dispatch(R,this.element)),R.angle=xt(G,j),this.rotate.dispatch(R,this.element)),j.x=G.x,j.y=G.y,this.x2!==null&&this.sx2!==null?(R.deltaX=(Q-this.x2+be-this.sx2)/2,R.deltaY=(ge-this.y2+Ce-this.sy2)/2):(R.deltaX=0,R.deltaY=0),this.twoFingerPressMove.dispatch(R,this.element),this.sx2=be,this.sy2=Ce}else{if(this.x2!==null){R.deltaX=Q-this.x2,R.deltaY=ge-this.y2;var re=Math.abs(this.x1-this.x2),he=Math.abs(this.y1-this.y2);(re>10||he>10)&&(this._preventTap=!0)}else R.deltaX=0,R.deltaY=0;this.pressMove.dispatch(R,this.element)}this.touchMove.dispatch(R,this.element),this._cancelLongTap(),this.x2=Q,this.y2=ge,Z>1&&R.preventDefault()}}},{key:"end",value:function(R){if(R.changedTouches){this._cancelLongTap();var j=this;R.touches.length<2&&(this.multipointEnd.dispatch(R,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(R.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){j.swipe.dispatch(R,j.element)},0)):(this.tapTimeout=setTimeout(function(){j._preventTap||j.tap.dispatch(R,j.element),j.isDoubleTap&&(j.doubleTap.dispatch(R,j.element),j.isDoubleTap=!1)},0),j.isDoubleTap||(j.singleTapTimeout=setTimeout(function(){j.singleTap.dispatch(R,j.element)},250))),this.touchEnd.dispatch(R,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(R){this.cancelAll(),this.touchCancel.dispatch(R,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(R,j,Z,Q){return Math.abs(R-j)>=Math.abs(Z-Q)?R-j>0?"Left":"Right":Z-Q>0?"Up":"Down"}},{key:"on",value:function(R,j){this[R]&&this[R].add(j)}},{key:"off",value:function(R,j){this[R]&&this[R].del(j)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function si(R){var j=function(){var Ce,G=document.createElement("fakeelement"),re={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(Ce in re)if(G.style[Ce]!==void 0)return re[Ce]}(),Z=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,Q=m(R,"gslide-media")?R:R.querySelector(".gslide-media"),ge=g(Q,".ginner-container"),be=R.querySelector(".gslide-description");Z>769&&(Q=ge),d(Q,"greset"),b(Q,"translate3d(0, 0, 0)"),h(j,{onElement:Q,once:!0,withCallback:function(Ce,G){p(Q,"greset")}}),Q.style.opacity="",be&&(be.style.opacity="")}function ur(R){if(R.events.hasOwnProperty("touch"))return!1;var j,Z,Q,ge=T(),be=ge.width,Ce=ge.height,G=!1,re=null,he=null,ce=null,Te=!1,Ae=1,Se=1,De=!1,Oe=!1,Ge=null,et=null,ht=null,Ut=null,gt=0,qt=0,Kt=!1,It=!1,Vt={},Yt={},Yi=0,vr=0,Jr=document.getElementById("glightbox-slider"),Rr=document.querySelector(".goverlay"),cr=new Ei(Jr,{touchStart:function(Jt){if(G=!0,(m(Jt.targetTouches[0].target,"ginner-container")||g(Jt.targetTouches[0].target,".gslide-desc")||Jt.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(G=!1),g(Jt.targetTouches[0].target,".gslide-inline")&&!m(Jt.targetTouches[0].target.parentNode,"gslide-inline")&&(G=!1),G){if(Yt=Jt.targetTouches[0],Vt.pageX=Jt.targetTouches[0].pageX,Vt.pageY=Jt.targetTouches[0].pageY,Yi=Jt.targetTouches[0].clientX,vr=Jt.targetTouches[0].clientY,re=R.activeSlide,he=re.querySelector(".gslide-media"),Q=re.querySelector(".gslide-inline"),ce=null,m(he,"gslide-image")&&(ce=he.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(he=re.querySelector(".ginner-container")),p(Rr,"greset"),Jt.pageX>20&&Jt.pageX<window.innerWidth-20)return;Jt.preventDefault()}},touchMove:function(Jt){if(G&&(Yt=Jt.targetTouches[0],!De&&!Oe)){if(Q&&Q.offsetHeight>Ce){var ir=Vt.pageX-Yt.pageX;if(Math.abs(ir)<=13)return!1}Te=!0;var Ir,hi=Jt.targetTouches[0].clientX,Fn=Jt.targetTouches[0].clientY,rr=Yi-hi,Nn=vr-Fn;if(Math.abs(rr)>Math.abs(Nn)?(Kt=!1,It=!0):(It=!1,Kt=!0),j=Yt.pageX-Vt.pageX,gt=100*j/be,Z=Yt.pageY-Vt.pageY,qt=100*Z/Ce,Kt&&ce&&(Ir=1-Math.abs(Z)/Ce,Rr.style.opacity=Ir,R.settings.touchFollowAxis&&(gt=0)),It&&(Ir=1-Math.abs(j)/be,he.style.opacity=Ir,R.settings.touchFollowAxis&&(qt=0)),!ce)return b(he,"translate3d(".concat(gt,"%, 0, 0)"));b(he,"translate3d(".concat(gt,"%, ").concat(qt,"%, 0)"))}},touchEnd:function(){if(G){if(Te=!1,Oe||De)return ht=Ge,void(Ut=et);var Jt=Math.abs(parseInt(qt)),ir=Math.abs(parseInt(gt));if(!(Jt>29&&ce))return Jt<29&&ir<25?(d(Rr,"greset"),Rr.style.opacity=1,si(he)):void 0;R.close()}},multipointEnd:function(){setTimeout(function(){De=!1},50)},multipointStart:function(){De=!0,Ae=Se||1},pinch:function(Jt){if(!ce||Te)return!1;De=!0,ce.scaleX=ce.scaleY=Ae*Jt.zoom;var ir=Ae*Jt.zoom;if(Oe=!0,ir<=1)return Oe=!1,ir=1,Ut=null,ht=null,Ge=null,et=null,void ce.setAttribute("style","");ir>4.5&&(ir=4.5),ce.style.transform="scale3d(".concat(ir,", ").concat(ir,", 1)"),Se=ir},pressMove:function(Jt){if(Oe&&!De){var ir=Yt.pageX-Vt.pageX,Ir=Yt.pageY-Vt.pageY;ht&&(ir+=ht),Ut&&(Ir+=Ut),Ge=ir,et=Ir;var hi="translate3d(".concat(ir,"px, ").concat(Ir,"px, 0)");Se&&(hi+=" scale3d(".concat(Se,", ").concat(Se,", 1)")),b(ce,hi)}},swipe:function(Jt){if(!Oe)if(De)De=!1;else{if(Jt.direction=="Left"){if(R.index==R.elements.length-1)return si(he);R.nextSlide()}if(Jt.direction=="Right"){if(R.index==0)return si(he);R.prevSlide()}}}});R.events.touch=cr}var Ve=I(),fe=I()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,oe=document.getElementsByTagName("html")[0],se={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},pe=o(function R(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,R),this.customOptions=j,this.settings=l(se,j),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1},[{key:"init",value:function(){var R=this,j=this.getSelector();j&&(this.baseEvents=h("click",{onElement:j,withCallback:function(Z,Q){Z.preventDefault(),R.open(Q)}})),this.elements=this.getElements()}},{key:"open",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var Z=ee(j)?j:this.settings.startAt;if(K(R)){var Q=R.getAttribute("data-gallery");Q&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,Q)),H(Z)&&(Z=this.getElementIndex(R))<0&&(Z=0)}ee(Z)||(Z=0),this.build(),v(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var ge=document.body,be=window.innerWidth-document.documentElement.clientWidth;if(be>0){var Ce=document.createElement("style");Ce.type="text/css",Ce.className="gcss-styles",Ce.innerText=".gscrollbar-fixer {margin-right: ".concat(be,"px}"),document.head.appendChild(Ce),d(ge,"gscrollbar-fixer")}d(ge,"glightbox-open"),d(oe,"glightbox-open"),Ve&&(d(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(Z,!0),this.elements.length===1?(d(this.prevButton,"glightbox-button-hidden"),d(this.nextButton,"glightbox-button-hidden")):(p(this.prevButton,"glightbox-button-hidden"),p(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),P(this.settings.onOpen)&&this.settings.onOpen(),fe&&this.settings.touchNavigation&&ur(this),this.settings.keyboardNavigation&&de(this)}},{key:"openAt",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,R)}},{key:"showSlide",value:function(){var R=this,j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Z=arguments.length>1&&arguments[1]!==void 0&&arguments[1];_(this.loader),this.index=parseInt(j);var Q=this.slidesContainer.querySelector(".current");Q&&p(Q,"current"),this.slideAnimateOut();var ge=this.slidesContainer.querySelectorAll(".gslide")[j];if(m(ge,"loaded"))this.slideAnimateIn(ge,Z),E(this.loader);else{_(this.loader);var be=this.elements[j],Ce={index:this.index,slide:ge,slideNode:ge,slideConfig:be.slideConfig,slideIndex:this.index,trigger:be.node,player:null};this.trigger("slide_before_load",Ce),be.instance.setContent(ge,function(){E(R.loader),R.resize(),R.slideAnimateIn(ge,Z),R.trigger("slide_after_load",Ce)})}this.slideDescription=ge.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&m(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(j+1),this.preloadSlide(j-1)),this.updateNavigationClasses(),this.activeSlide=ge}},{key:"preloadSlide",value:function(R){var j=this;if(R<0||R>this.elements.length-1||H(this.elements[R]))return!1;var Z=this.slidesContainer.querySelectorAll(".gslide")[R];if(m(Z,"loaded"))return!1;var Q=this.elements[R],ge=Q.type,be={index:R,slide:Z,slideNode:Z,slideConfig:Q.slideConfig,slideIndex:R,trigger:Q.node,player:null};this.trigger("slide_before_load",be),ge==="video"||ge==="external"?setTimeout(function(){Q.instance.setContent(Z,function(){j.trigger("slide_after_load",be)})},200):Q.instance.setContent(Z,function(){j.trigger("slide_after_load",be)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var R=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(R<0||R>this.elements.length-1))return!1;R<0?R=this.elements.length-1:R>=this.elements.length&&(R=0),this.showSlide(R)}},{key:"insertSlide",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;j<0&&(j=this.elements.length);var Z=new He(R,this,j),Q=Z.getConfig(),ge=l({},Q),be=Z.create(),Ce=this.elements.length-1;ge.index=j,ge.node=!1,ge.instance=Z,ge.slideConfig=Q,this.elements.splice(j,0,ge);var G=null,re=null;if(this.slidesContainer){if(j>Ce)this.slidesContainer.appendChild(be);else{var he=this.slidesContainer.querySelectorAll(".gslide")[j];this.slidesContainer.insertBefore(be,he)}(this.settings.preload&&this.index==0&&j==0||this.index-1==j||this.index+1==j)&&this.preloadSlide(j),this.index===0&&j===0&&(this.index=1),this.updateNavigationClasses(),G=this.slidesContainer.querySelectorAll(".gslide")[j],re=this.getSlidePlayerInstance(j),ge.slideNode=G}this.trigger("slide_inserted",{index:j,slide:G,slideNode:G,slideConfig:Q,slideIndex:j,trigger:null,player:re}),P(this.settings.slideInserted)&&this.settings.slideInserted({index:j,slide:G,player:re})}},{key:"removeSlide",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(R<0||R>this.elements.length-1)return!1;var j=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[R];j&&(this.getActiveSlideIndex()==R&&(R==this.elements.length-1?this.prevSlide():this.nextSlide()),j.parentNode.removeChild(j)),this.elements.splice(R,1),this.trigger("slide_removed",R),P(this.settings.slideRemoved)&&this.settings.slideRemoved(R)}},{key:"slideAnimateIn",value:function(R,j){var Z=this,Q=R.querySelector(".gslide-media"),ge=R.querySelector(".gslide-description"),be={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},Ce={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(Q.offsetWidth>0&&ge&&(E(ge),ge.style.display=""),p(R,this.effectsClasses),j)v(R,this.settings.cssEfects[this.settings.openEffect].in,function(){Z.settings.autoplayVideos&&Z.slidePlayerPlay(R),Z.trigger("slide_changed",{prev:be,current:Ce}),P(Z.settings.afterSlideChange)&&Z.settings.afterSlideChange.apply(Z,[be,Ce])});else{var G=this.settings.slideEffect,re=G!=="none"?this.settings.cssEfects[G].in:G;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(re=this.settings.cssEfects.slideBack.in),v(R,re,function(){Z.settings.autoplayVideos&&Z.slidePlayerPlay(R),Z.trigger("slide_changed",{prev:be,current:Ce}),P(Z.settings.afterSlideChange)&&Z.settings.afterSlideChange.apply(Z,[be,Ce])})}setTimeout(function(){Z.resize(R)},100),d(R,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var R=this.prevActiveSlide;p(R,this.effectsClasses),d(R,"prev");var j=this.settings.slideEffect,Z=j!=="none"?this.settings.cssEfects[j].out:j;this.slidePlayerPause(R),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),P(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(Z=this.settings.cssEfects.slideBack.out),v(R,Z,function(){var Q=R.querySelector(".ginner-container"),ge=R.querySelector(".gslide-media"),be=R.querySelector(".gslide-description");Q.style.transform="",ge.style.transform="",p(ge,"greset"),ge.style.opacity="",be&&(be.style.opacity=""),p(R,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(R){var j="gvideo"+R,Z=this.getAllPlayers();return!(!V(Z,j)||!Z[j])&&Z[j]}},{key:"stopSlideVideo",value:function(R){if(K(R)){var j=R.querySelector(".gvideo-wrapper");j&&(R=j.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var Z=this.getSlidePlayerInstance(R);Z&&Z.playing&&Z.pause()}},{key:"slidePlayerPause",value:function(R){if(K(R)){var j=R.querySelector(".gvideo-wrapper");j&&(R=j.getAttribute("data-index"))}var Z=this.getSlidePlayerInstance(R);Z&&Z.playing&&Z.pause()}},{key:"playSlideVideo",value:function(R){if(K(R)){var j=R.querySelector(".gvideo-wrapper");j&&(R=j.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var Z=this.getSlidePlayerInstance(R);Z&&!Z.playing&&Z.play()}},{key:"slidePlayerPlay",value:function(R){var j;if(!Ve||(j=this.settings.plyr.config)!==null&&j!==void 0&&j.muted){if(K(R)){var Z=R.querySelector(".gvideo-wrapper");Z&&(R=Z.getAttribute("data-index"))}var Q=this.getSlidePlayerInstance(R);Q&&!Q.playing&&(Q.play(),this.settings.autofocusVideos&&Q.elements.container.focus())}}},{key:"setElements",value:function(R){var j=this;this.settings.elements=!1;var Z=[];R&&R.length&&u(R,function(Q,ge){var be=new He(Q,j,ge),Ce=be.getConfig(),G=l({},Ce);G.slideConfig=Ce,G.instance=be,G.index=ge,Z.push(G)}),this.elements=Z,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(u(this.elements,function(){var Q=C(j.settings.slideHTML);j.slidesContainer.appendChild(Q)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(R){var j=!1;return u(this.elements,function(Z,Q){if(V(Z,"node")&&Z.node==R)return j=Q,!0}),j}},{key:"getElements",value:function(){var R=this,j=[];this.elements=this.elements?this.elements:[],!H(this.settings.elements)&&L(this.settings.elements)&&this.settings.elements.length&&u(this.settings.elements,function(Q,ge){var be=new He(Q,R,ge),Ce=be.getConfig(),G=l({},Ce);G.node=!1,G.index=ge,G.instance=be,G.slideConfig=Ce,j.push(G)});var Z=!1;return this.getSelector()&&(Z=document.querySelectorAll(this.getSelector())),Z&&u(Z,function(Q,ge){var be=new He(Q,R,ge),Ce=be.getConfig(),G=l({},Ce);G.node=Q,G.index=ge,G.instance=be,G.slideConfig=Ce,G.gallery=Q.getAttribute("data-gallery"),j.push(G)}),j}},{key:"getGalleryElements",value:function(R,j){return R.filter(function(Z){return Z.gallery==j})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var R=[];for(var j in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(j)){var Z=this.settings.cssEfects[j];R.push("g".concat(Z.in)),R.push("g".concat(Z.out))}return R.join(" ")}},{key:"build",value:function(){var R=this;if(this.built)return!1;var j=document.body.childNodes,Z=[];u(j,function(he){he.parentNode==document.body&&he.nodeName.charAt(0)!=="#"&&he.hasAttribute&&!he.hasAttribute("aria-hidden")&&(Z.push(he),he.setAttribute("aria-hidden","true"))});var Q=V(this.settings.svg,"next")?this.settings.svg.next:"",ge=V(this.settings.svg,"prev")?this.settings.svg.prev:"",be=V(this.settings.svg,"close")?this.settings.svg.close:"",Ce=this.settings.lightboxHTML;Ce=C(Ce=(Ce=(Ce=Ce.replace(/{nextSVG}/g,Q)).replace(/{prevSVG}/g,ge)).replace(/{closeSVG}/g,be)),document.body.appendChild(Ce);var G=document.getElementById("glightbox-body");this.modal=G;var re=G.querySelector(".gclose");this.prevButton=G.querySelector(".gprev"),this.nextButton=G.querySelector(".gnext"),this.overlay=G.querySelector(".goverlay"),this.loader=G.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=Z,this.events={},d(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&re&&(this.events.close=h("click",{onElement:re,withCallback:function(he,ce){he.preventDefault(),R.close()}})),re&&!this.settings.closeButton&&re.parentNode.removeChild(re),this.nextButton&&(this.events.next=h("click",{onElement:this.nextButton,withCallback:function(he,ce){he.preventDefault(),R.nextSlide()}})),this.prevButton&&(this.events.prev=h("click",{onElement:this.prevButton,withCallback:function(he,ce){he.preventDefault(),R.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=h("click",{onElement:G,withCallback:function(he,ce){R.preventOutsideClick||m(document.body,"glightbox-mobile")||g(he.target,".ginner-container")||g(he.target,".gbtn")||m(he.target,"gnext")||m(he.target,"gprev")||R.close()}})),u(this.elements,function(he,ce){R.slidesContainer.appendChild(he.instance.create()),he.slideNode=R.slidesContainer.querySelectorAll(".gslide")[ce]}),fe&&d(document.body,"glightbox-touch"),this.events.resize=h("resize",{onElement:window,withCallback:function(){R.resize()}}),this.built=!0}},{key:"resize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((R=R||this.activeSlide)&&!m(R,"zoomed")){var j=T(),Z=R.querySelector(".gvideo-wrapper"),Q=R.querySelector(".gslide-image"),ge=this.slideDescription,be=j.width,Ce=j.height;if(be<=768?d(document.body,"glightbox-mobile"):p(document.body,"glightbox-mobile"),Z||Q){var G=!1;if(ge&&(m(ge,"description-bottom")||m(ge,"description-top"))&&!m(ge,"gabsolute")&&(G=!0),Q){if(be<=768)Q.querySelector("img");else if(G){var re,he=ge.offsetHeight,ce=Q.querySelector("img"),Te=this.elements[this.index].node,Ae=(re=Te.getAttribute("data-height"))!==null&&re!==void 0?re:"100vh";ce.setAttribute("style","max-height: calc(".concat(Ae," - ").concat(he,"px)")),ge.setAttribute("style","max-width: ".concat(ce.offsetWidth,"px;"))}}if(Z){var Se=V(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!Se){var De=Z.clientWidth,Oe=Z.clientHeight,Ge=De/Oe;Se="".concat(De/Ge,":").concat(Oe/Ge)}var et=Se.split(":"),ht=this.settings.videosWidth,Ut=this.settings.videosWidth,gt=(Ut=ee(ht)||ht.indexOf("px")!==-1?parseInt(ht):ht.indexOf("vw")!==-1?be*parseInt(ht)/100:ht.indexOf("vh")!==-1?Ce*parseInt(ht)/100:ht.indexOf("%")!==-1?be*parseInt(ht)/100:parseInt(Z.clientWidth))/(parseInt(et[0])/parseInt(et[1]));if(gt=Math.floor(gt),G&&(Ce-=ge.offsetHeight),Ut>be||gt>Ce||Ce<gt&&be>Ut){var qt=Z.offsetWidth,Kt=Z.offsetHeight,It=Ce/Kt,Vt={width:qt*It,height:Kt*It};Z.parentNode.setAttribute("style","max-width: ".concat(Vt.width,"px")),G&&ge.setAttribute("style","max-width: ".concat(Vt.width,"px;"))}else Z.parentNode.style.maxWidth="".concat(ht),G&&ge.setAttribute("style","max-width: ".concat(ht,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var R=this.loop();p(this.nextButton,"disabled"),p(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(d(this.prevButton,"disabled"),d(this.nextButton,"disabled")):this.index!==0||R?this.index!==this.elements.length-1||R||d(this.nextButton,"disabled"):d(this.prevButton,"disabled")}},{key:"loop",value:function(){var R=V(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return R=V(this.settings,"loop")?this.settings.loop:R,R}},{key:"close",value:function(){var R=this;if(!this.lightboxOpen){if(this.events){for(var j in this.events)this.events.hasOwnProperty(j)&&this.events[j].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&u(this.bodyHiddenChildElms,function(Z){Z.removeAttribute("aria-hidden")}),d(this.modal,"glightbox-closing"),v(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),v(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(R.activeSlide=null,R.prevActiveSlideIndex=null,R.prevActiveSlide=null,R.built=!1,R.events){for(var Z in R.events)R.events.hasOwnProperty(Z)&&R.events[Z].destroy();R.events=null}var Q=document.body;p(oe,"glightbox-open"),p(Q,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),R.modal.parentNode.removeChild(R.modal),R.trigger("close"),P(R.settings.onClose)&&R.settings.onClose();var ge=document.querySelector(".gcss-styles");ge&&ge.parentNode.removeChild(ge),R.lightboxOpen=!1,R.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(R,j){var Z=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!R||!P(j))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:R,once:Z,callback:j})}},{key:"once",value:function(R,j){this.on(R,j,!0)}},{key:"trigger",value:function(R){var j=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Q=[];u(this.apiEvents,function(ge,be){var Ce=ge.evt,G=ge.once,re=ge.callback;Ce==R&&(re(Z),G&&Q.push(be))}),Q.length&&u(Q,function(ge){return j.apiEvents.splice(ge,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.0"}}]);return function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=new pe(R);return j.init(),j}})})(RCe);var q1t=RCe.exports;const H1t=$o(q1t);let D3=[],M3=[];function V1t(i,e,t,r){const s=new DOMParser().parseFromString(i,"text/html"),o=r.shadowRoot||r,a=!!(r.showNav&&r.nav.length);s.querySelectorAll("a").forEach(c=>c.target="_blank"),D3.forEach(c=>c==null?void 0:c.disconnect()),D3=[],M3.forEach(c=>c==null?void 0:c.disconnect()),M3=[],a&&r.nav.forEach(c=>{const h=new IntersectionObserver(d=>{d.forEach(p=>{const m=p.isIntersecting,g=p.target.getAttribute("id");m&&o.querySelectorAll(".navigation li").forEach(v=>{v.classList.contains(`nav-${g}`)?v.classList.add("active"):v.classList.remove("active")})})},{rootMargin:"-50% 0px"});setTimeout(()=>{const d=o.querySelector(`#${c.id}`);d&&(h.observe(d),D3.push(h))},200)}),Object.keys(e).forEach(c=>{const h=e[c];if(m1t.includes(h.mode)&&h.steps){const d=`${h.as}#${h.id}`,p=new IntersectionObserver(m=>{m.forEach(g=>{const v=g.isIntersecting,b=Number(g.target.getAttribute("key"));v&&e0e(h,b,d,o)})});setTimeout(()=>{if(!o.querySelector(`#${c}`))return;o.querySelectorAll(`#${c} section-step`).forEach((v,b)=>{v.setAttribute("key",`${b}`),p.observe(v)}),M3.push(p),e0e(h,0,d,o)},100)}});function u(){o.querySelectorAll(".story-telling .hero img, .story-telling .hero video").forEach(function(h){h.getAttribute("data-parallax")==="true"&&(h.style.transform="translateY("+h.getBoundingClientRect().top*.1+"px)")})}return window.removeEventListener("scroll",u),window.addEventListener("scroll",u),Array.from(s.body.childNodes).map(c=>W1t(c,t))}function e0e(i,e,t,r){const n=r.querySelector(t);Object.keys(i.steps[e]).forEach(s=>{n[s]=i.steps[e][s]})}function W1t(i,e){if(i.nodeType===Node.ELEMENT_NODE&&i.querySelectorAll("*").forEach(r=>{/^[a-z]+(-[a-z0-9]+)*$/.test(r.tagName.toLowerCase())&&i.classList.contains("section-custom")&&Array.from(r.attributes).forEach(n=>r[n.name]=YP(r,n.name)),setTimeout(()=>e(r),100)}),i.querySelectorAll){const t=H1t({autoplayVideos:!0}),r=[];i.querySelectorAll("img").forEach(s=>{const o=s.getAttribute("mode");s.parentNode.tagName!=="A"&&o!=="hero"&&(s.style.cursor="zoom-in",s.addEventListener("click",()=>{t.open()}),r.push({type:"image",href:s.src}))}),t.setElements(r)}return i}function YP(i,e=void 0){const t=e?i.getAttribute(e):i;return ICe(t)}function ICe(i){let e;try{e=JSON.parse(i)}catch{!isNaN(i)&&i.trim()!==""?e=Number(i):i==="true"?e=!0:i==="false"?e=!1:e=i}return e}function Y1t(i,e,t,r){const n=t.getBoundingClientRect(),s=(n.right+n.left)/2,o=25/2,a=e?n.top-o:void 0,l=e?n.top+o:void 0,u=n.bottom-o,c=n.bottom+o,h=s-o,d=s+o,{clientX:p,clientY:m}=i;if(p>=h&&p<=d&&(m>=u||m>=a)&&(m<=c||m<=l)&&r.showEditor!=="closed"){const v=e?m>=a&&m<=l:!1,b=Number(t.getAttribute("data-section"));r.addCustomSectionIndex=v?b-1:b,r.requestUpdate()}}function X1t(i,e,t,r,n){const s=new DOMParser;let o=-1;if(t&&e.length&&i.length){o=0;const a=`
    <div class="navigation">
      <div class="container">
        <ul>
          ${e.map(({id:u,title:c})=>`<li class="nav-${u}"><a href="#${u}">${c}</a></li>`).join("")}
        </ul>
      </div>
    </div>
  `,l=s.parseFromString(a,"text/html").body.firstChild;i[0].classList.contains("hero")&&(o=1),i.splice(o,0,l)}if(i.length){const a=o+1;i[a].classList.add("section-start"),i.slice(a).forEach((l,u)=>{if(l.classList.add("section-item"),l.setAttribute("data-section",`${u+1}`),r!==void 0){const c=l.classList.contains("section-start");l.addEventListener("click",function(h){Y1t(h,c,this,n)})}})}return i}const Z1t="@eox/storytelling",K1t="1.0.4",J1t="module",Q1t={"@eox/eslint-config":"^1.0.0","@typescript-eslint/eslint-plugin":"^7.0.1","@typescript-eslint/parser":"^7.0.1","eslint-plugin-typescript":"^0.14.0",typescript:"^5.2.2",vite:"^5.0.2"},e_t={npm:">=8.0.0",node:">=18.0.0"},t_t=["dist","test"],i_t="./dist/eox-storytelling.js",r_t={build:"vite build",watch:"vite build --watch",format:"prettier --write .",lint:"eslint --ext .js,.ts .","lint:fix":"eslint --ext .js,.ts . --fix",typecheck:"tsc"},n_t={"@sindresorhus/slugify":"^2.2.1",glightbox:"^3.3.0","isomorphic-dompurify":"^2.4.0",joi:"^17.12.3","js-yaml":"^4.1.0",lit:"^3.0.2","lodash.debounce":"^4.0.8","markdown-it":"^14.0.0"},F2={name:Z1t,version:K1t,type:J1t,devDependencies:Q1t,engines:e_t,files:t_t,main:i_t,scripts:r_t,dependencies:n_t};function s_t(i,e){(i.shadowRoot||i).querySelectorAll(e).forEach(t=>{t.addEventListener("click",r=>{r.preventDefault(),window.parent.location.hash=r.target.hash.replace("#",""),OCe(i)})})}function OCe(i){const e=window.parent.location.hash,t=e?i.shadowRoot.querySelector(e):null;t&&t.scrollIntoView({behavior:"smooth"})}function o_t(i){return{tagNameCheck:r=>r.match(new RegExp(/^[a-z]+(-[a-z0-9]+)*$/)),attributeNameCheck:r=>r.match(new RegExp(i.attrs.keys.join("|"))),allowCustomizedBuiltInElements:!0}}function a_t(){const i=document.createElement("style");i.innerHTML=`
      @import url("https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css");
    `,document.body.appendChild(i)}function L3(i){const e=i.split("-")[0].split(".").map(Number);let t=0;const r=1e3;for(let n=0;n<e.length;n++)t+=e[n]*Math.pow(r,e.length-n-1);return t}function l_t(i){const e=Number(Object.keys(A3).find(r=>A3[r].length===1)),t=A3[i];if(!i||!t)return console.warn(`Version not (or wrongly) specified in markdown frontmatter. Assuming latest markdown syntax version (v${e}).`),e;if(e===i)return i;{const r=[L3(t[0]),L3(t[1])],n=L3(F2.version);return n>=r[0]&&n<=r[1]||console.error(`You are using an older or newer version of ${F2.name} package, which is not compatible with the version defined in the markdown frontmatter. Please update the ${F2.name} package to (>=${t[0]} and <=${t[1]}) or change the markdown syntax version to ${F2.version}`),i}}var PCe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(self,()=>{return t={7629:(n,s,o)=>{const a=o(375),l=o(8571),u=o(9474),c=o(1687),h=o(8652),d=o(8160),p=o(3292),m=o(6354),g=o(8901),v=o(9708),b=o(6914),_=o(2294),E=o(6133),C=o(1152),T=o(8863),D=o(2036),M={Base:class{constructor(A){this.type=A,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new _.Ids,this._preferences=null,this._refs=new E.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof v.describe=="function","Manifest functionality disabled"),v.describe(this)}allow(...A){return d.verifyFlat(A,"allow"),this._values(A,"_valids")}alter(A){a(A&&typeof A=="object"&&!Array.isArray(A),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const I=this.clone();I.$_terms.alterations=I.$_terms.alterations||[];for(const P in A){const U=A[P];a(typeof U=="function","Alteration adjuster for",P,"must be a function"),I.$_terms.alterations.push({target:P,adjuster:U})}return I.$_temp.ruleset=!1,I}artifact(A){return a(A!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",A)}cast(A){return a(A===!1||typeof A=="string","Invalid to value"),a(A===!1||this._definition.cast[A],"Type",this.type,"does not support casting to",A),this.$_setFlag("cast",A===!1?void 0:A)}default(A,I){return this._default("default",A,I)}description(A){return a(A&&typeof A=="string","Description must be a non-empty string"),this.$_setFlag("description",A)}empty(A){const I=this.clone();return A!==void 0&&(A=I.$_compile(A,{override:!1})),I.$_setFlag("empty",A,{clone:!1})}error(A){return a(A,"Missing error"),a(A instanceof Error||typeof A=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",A)}example(A,I={}){return a(A!==void 0,"Missing example"),d.assertOptions(I,["override"]),this._inner("examples",A,{single:!0,override:I.override})}external(A,I){return typeof A=="object"&&(a(!I,"Cannot combine options with description"),I=A.description,A=A.method),a(typeof A=="function","Method must be a function"),a(I===void 0||I&&typeof I=="string","Description must be a non-empty string"),this._inner("externals",{method:A,description:I},{single:!0})}failover(A,I){return this._default("failover",A,I)}forbidden(){return this.presence("forbidden")}id(A){return A?(a(typeof A=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(A),"id cannot contain period character"),this.$_setFlag("id",A)):this.$_setFlag("id",void 0)}invalid(...A){return this._values(A,"_invalids")}label(A){return a(A&&typeof A=="string","Label name must be a non-empty string"),this.$_setFlag("label",A)}meta(A){return a(A!==void 0,"Meta cannot be undefined"),this._inner("metas",A,{single:!0})}note(...A){a(A.length,"Missing notes");for(const I of A)a(I&&typeof I=="string","Notes must be non-empty strings");return this._inner("notes",A)}only(A=!0){return a(typeof A=="boolean","Invalid mode:",A),this.$_setFlag("only",A)}optional(){return this.presence("optional")}prefs(A){a(A,"Missing preferences"),a(A.context===void 0,"Cannot override context"),a(A.externals===void 0,"Cannot override externals"),a(A.warnings===void 0,"Cannot override warnings"),a(A.debug===void 0,"Cannot override debug"),d.checkPreferences(A);const I=this.clone();return I._preferences=d.preferences(I._preferences,A),I}presence(A){return a(["optional","required","forbidden"].includes(A),"Unknown presence mode",A),this.$_setFlag("presence",A)}raw(A=!0){return this.$_setFlag("result",A?"raw":void 0)}result(A){return a(["raw","strip"].includes(A),"Unknown result mode",A),this.$_setFlag("result",A)}required(){return this.presence("required")}strict(A){const I=this.clone(),P=A!==void 0&&!A;return I._preferences=d.preferences(I._preferences,{convert:P}),I}strip(A=!0){return this.$_setFlag("result",A?"strip":void 0)}tag(...A){a(A.length,"Missing tags");for(const I of A)a(I&&typeof I=="string","Tags must be non-empty strings");return this._inner("tags",A)}unit(A){return a(A&&typeof A=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",A)}valid(...A){d.verifyFlat(A,"valid");const I=this.allow(...A);return I.$_setFlag("only",!!I._valids,{clone:!1}),I}when(A,I){const P=this.clone();P.$_terms.whens||(P.$_terms.whens=[]);const U=p.when(P,A,I);if(!["any","link"].includes(P.type)){const K=U.is?[U]:U.switch;for(const L of K)a(!L.then||L.then.type==="any"||L.then.type===P.type,"Cannot combine",P.type,"with",L.then&&L.then.type),a(!L.otherwise||L.otherwise.type==="any"||L.otherwise.type===P.type,"Cannot combine",P.type,"with",L.otherwise&&L.otherwise.type)}return P.$_terms.whens.push(U),P.$_mutateRebuild()}cache(A){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const I=this.clone();return I._cache=A||h.provider.provision(),I.$_temp.ruleset=!1,I}clone(){const A=Object.create(Object.getPrototypeOf(this));return this._assign(A)}concat(A){a(d.isSchema(A),"Invalid schema object"),a(this.type==="any"||A.type==="any"||A.type===this.type,"Cannot merge type",this.type,"with another type:",A.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!A._inRuleset(),"Cannot concatenate a schema with open ruleset");let I=this.clone();if(this.type==="any"&&A.type!=="any"){const P=A.clone();for(const U of Object.keys(I))U!=="type"&&(P[U]=I[U]);I=P}I._ids.concat(A._ids),I._refs.register(A,E.toSibling),I._preferences=I._preferences?d.preferences(I._preferences,A._preferences):A._preferences,I._valids=D.merge(I._valids,A._valids,A._invalids),I._invalids=D.merge(I._invalids,A._invalids,A._valids);for(const P of A._singleRules.keys())I._singleRules.has(P)&&(I._rules=I._rules.filter(U=>U.keep||U.name!==P),I._singleRules.delete(P));for(const P of A._rules)A._definition.rules[P.method].multi||I._singleRules.set(P.name,P),I._rules.push(P);if(I._flags.empty&&A._flags.empty){I._flags.empty=I._flags.empty.concat(A._flags.empty);const P=Object.assign({},A._flags);delete P.empty,c(I._flags,P)}else if(A._flags.empty){I._flags.empty=A._flags.empty;const P=Object.assign({},A._flags);delete P.empty,c(I._flags,P)}else c(I._flags,A._flags);for(const P in A.$_terms){const U=A.$_terms[P];U?I.$_terms[P]?I.$_terms[P]=I.$_terms[P].concat(U):I.$_terms[P]=U.slice():I.$_terms[P]||(I.$_terms[P]=U)}return this.$_root._tracer&&this.$_root._tracer._combine(I,[this,A]),I.$_mutateRebuild()}extend(A){return a(!A.base,"Cannot extend type with another base"),g.type(this,A)}extract(A){return A=Array.isArray(A)?A:A.split("."),this._ids.reach(A)}fork(A,I){a(!this._inRuleset(),"Cannot fork inside a ruleset");let P=this;for(let U of[].concat(A))U=Array.isArray(U)?U:U.split("."),P=P._ids.fork(U,I,P);return P.$_temp.ruleset=!1,P}rule(A){const I=this._definition;d.assertOptions(A,Object.keys(I.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const P=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(P>=0&&P<this._rules.length,"Cannot apply rules to empty ruleset");const U=this.clone();for(let K=P;K<U._rules.length;++K){const L=U._rules[K],F=l(L);for(const $ in A)I.modifiers[$](F,A[$]),a(F.name===L.name,"Cannot change rule name");U._rules[K]=F,U._singleRules.get(F.name)===L&&U._singleRules.set(F.name,F)}return U.$_temp.ruleset=!1,U.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const A=this.clone();return A.$_temp.ruleset=A._rules.length,A}get $(){return this.ruleset}tailor(A){A=[].concat(A),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let I=this;if(this.$_terms.alterations)for(const{target:P,adjuster:U}of this.$_terms.alterations)A.includes(P)&&(I=U(I),a(d.isSchema(I),"Alteration adjuster for",P,"failed to return a schema object"));return I=I.$_modify({each:P=>P.tailor(A),ref:!1}),I.$_temp.ruleset=!1,I.$_mutateRebuild()}tracer(){return C.location?C.location(this):this}validate(A,I){return T.entry(A,this,I)}validateAsync(A,I){return T.entryAsync(A,this,I)}$_addRule(A){typeof A=="string"&&(A={name:A}),a(A&&typeof A=="object","Invalid options"),a(A.name&&typeof A.name=="string","Invalid rule name");for(const L in A)a(L[0]!=="_","Cannot set private rule properties");const I=Object.assign({},A);I._resolve=[],I.method=I.method||I.name;const P=this._definition.rules[I.method],U=I.args;a(P,"Unknown rule",I.method);const K=this.clone();if(U){a(Object.keys(U).length===1||Object.keys(U).length===this._definition.rules[I.name].args.length,"Invalid rule definition for",this.type,I.name);for(const L in U){let F=U[L];if(P.argsByName){const $=P.argsByName.get(L);if($.ref&&d.isResolvable(F))I._resolve.push(L),K.$_mutateRegister(F);else if($.normalize&&(F=$.normalize(F),U[L]=F),$.assert){const H=d.validateArg(F,L,$);a(!H,H,"or reference")}}F!==void 0?U[L]=F:delete U[L]}}return P.multi||(K._ruleRemove(I.name,{clone:!1}),K._singleRules.set(I.name,I)),K.$_temp.ruleset===!1&&(K.$_temp.ruleset=null),P.priority?K._rules.unshift(I):K._rules.push(I),K}$_compile(A,I){return p.schema(this.$_root,A,I)}$_createError(A,I,P,U,K,L={}){const F=L.flags!==!1?this._flags:{},$=L.messages?b.merge(this._definition.messages,L.messages):this._definition.messages;return new m.Report(A,I,P,F,$,U,K)}$_getFlag(A){return this._flags[A]}$_getRule(A){return this._singleRules.get(A)}$_mapLabels(A){return A=Array.isArray(A)?A:A.split("."),this._ids.labels(A)}$_match(A,I,P,U){(P=Object.assign({},P)).abortEarly=!0,P._externals=!1,I.snapshot();const K=!T.validate(A,this,I,P,U).errors;return I.restore(),K}$_modify(A){return d.assertOptions(A,["each","once","ref","schema"]),_.schema(this,A)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(A,{source:I,name:P,path:U,key:K})=>{const L=this._definition[I][P]&&this._definition[I][P].register;L!==!1&&this.$_mutateRegister(A,{family:L,key:K})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(A,{family:I,key:P}={}){this._refs.register(A,I),this._ids.register(A,{key:P})}$_property(A){return this._definition.properties[A]}$_reach(A){return this._ids.reach(A)}$_rootReferences(){return this._refs.roots()}$_setFlag(A,I,P={}){a(A[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const U=this._definition.flags[A]||{};if(u(I,U.default)&&(I=void 0),u(I,this._flags[A]))return this;const K=P.clone!==!1?this.clone():this;return I!==void 0?(K._flags[A]=I,K.$_mutateRegister(I)):delete K._flags[A],A[0]!=="_"&&(K.$_temp.ruleset=!1),K}$_parent(A,...I){return this[A][d.symbols.parent].call(this,...I)}$_validate(A,I,P){return T.validate(A,this,I,P)}_assign(A){A.type=this.type,A.$_root=this.$_root,A.$_temp=Object.assign({},this.$_temp),A.$_temp.whens={},A._ids=this._ids.clone(),A._preferences=this._preferences,A._valids=this._valids&&this._valids.clone(),A._invalids=this._invalids&&this._invalids.clone(),A._rules=this._rules.slice(),A._singleRules=l(this._singleRules,{shallow:!0}),A._refs=this._refs.clone(),A._flags=Object.assign({},this._flags),A._cache=null,A.$_terms={};for(const I in this.$_terms)A.$_terms[I]=this.$_terms[I]?this.$_terms[I].slice():null;A.$_super={};for(const I in this.$_super)A.$_super[I]=this._super[I].bind(A);return A}_bare(){const A=this.clone();A._reset();const I=A._definition.terms;for(const P in I){const U=I[P];A.$_terms[P]=U.init}return A.$_mutateRebuild()}_default(A,I,P={}){return d.assertOptions(P,"literal"),a(I!==void 0,"Missing",A,"value"),a(typeof I=="function"||!P.literal,"Only function value supports literal option"),typeof I=="function"&&P.literal&&(I={[d.symbols.literal]:!0,literal:I}),this.$_setFlag(A,I)}_generate(A,I,P){if(!this.$_terms.whens)return{schema:this};const U=[],K=[];for(let $=0;$<this.$_terms.whens.length;++$){const H=this.$_terms.whens[$];if(H.concat){U.push(H.concat),K.push(`${$}.concat`);continue}const V=H.ref?H.ref.resolve(A,I,P):A,J=H.is?[H]:H.switch,ee=K.length;for(let ie=0;ie<J.length;++ie){const{is:de,then:te,otherwise:z}=J[ie],ne=`${$}${H.switch?"."+ie:""}`;if(de.$_match(V,I.nest(de,`${ne}.is`),P)){if(te){const ve=I.localize([...I.path,`${ne}.then`],I.ancestors,I.schemas),{schema:$e,id:Xe}=te._generate(A,ve,P);U.push($e),K.push(`${ne}.then${Xe?`(${Xe})`:""}`);break}}else if(z){const ve=I.localize([...I.path,`${ne}.otherwise`],I.ancestors,I.schemas),{schema:$e,id:Xe}=z._generate(A,ve,P);U.push($e),K.push(`${ne}.otherwise${Xe?`(${Xe})`:""}`);break}}if(H.break&&K.length>ee)break}const L=K.join(", ");if(I.mainstay.tracer.debug(I,"rule","when",L),!L)return{schema:this};if(!I.mainstay.tracer.active&&this.$_temp.whens[L])return{schema:this.$_temp.whens[L],id:L};let F=this;this._definition.generate&&(F=this._definition.generate(this,A,I,P));for(const $ of U)F=F.concat($);return this.$_root._tracer&&this.$_root._tracer._combine(F,[this,...U]),this.$_temp.whens[L]=F,{schema:F,id:L}}_inner(A,I,P={}){a(!this._inRuleset(),`Cannot set ${A} inside a ruleset`);const U=this.clone();return U.$_terms[A]&&!P.override||(U.$_terms[A]=[]),P.single?U.$_terms[A].push(I):U.$_terms[A].push(...I),U.$_temp.ruleset=!1,U}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(A,I={}){if(!this._singleRules.has(A))return this;const P=I.clone!==!1?this.clone():this;P._singleRules.delete(A);const U=[];for(let K=0;K<P._rules.length;++K){const L=P._rules[K];L.name!==A||L.keep?U.push(L):P._inRuleset()&&K<P.$_temp.ruleset&&--P.$_temp.ruleset}return P._rules=U,P}_values(A,I){d.verifyFlat(A,I.slice(1,-1));const P=this.clone(),U=A[0]===d.symbols.override;if(U&&(A=A.slice(1)),!P[I]&&A.length?P[I]=new D:U&&(P[I]=A.length?new D:null,P.$_mutateRebuild()),!P[I])return P;U&&P[I].override();for(const K of A){a(K!==void 0,"Cannot call allow/valid/invalid with undefined"),a(K!==d.symbols.override,"Override must be the first value");const L=I==="_invalids"?"_valids":"_invalids";P[L]&&(P[L].remove(K),P[L].length||(a(I==="_valids"||!P._flags.only,"Setting invalid value",K,"leaves schema rejecting all values due to previous valid rule"),P[L]=null)),P[I].add(K,P._refs)}return P}}};M.Base.prototype[d.symbols.any]={version:d.version,compile:p.compile,root:"$_root"},M.Base.prototype.isImmutable=!0,M.Base.prototype.deny=M.Base.prototype.invalid,M.Base.prototype.disallow=M.Base.prototype.invalid,M.Base.prototype.equal=M.Base.prototype.valid,M.Base.prototype.exist=M.Base.prototype.required,M.Base.prototype.not=M.Base.prototype.invalid,M.Base.prototype.options=M.Base.prototype.prefs,M.Base.prototype.preferences=M.Base.prototype.prefs,n.exports=new M.Base},8652:(n,s,o)=>{const a=o(375),l=o(8571),u=o(8160),c={max:1e3,supported:new Set(["undefined","boolean","number","string"])};s.provider={provision:h=>new c.Cache(h)},c.Cache=class{constructor(h={}){u.assertOptions(h,["max"]),a(h.max===void 0||h.max&&h.max>0&&isFinite(h.max),"Invalid max cache size"),this._max=h.max||c.max,this._map=new Map,this._list=new c.List}get length(){return this._map.size}set(h,d){if(h!==null&&!c.supported.has(typeof h))return;let p=this._map.get(h);if(p)return p.value=d,void this._list.first(p);p=this._list.unshift({key:h,value:d}),this._map.set(h,p),this._compact()}get(h){const d=this._map.get(h);if(d)return this._list.first(d),l(d.value)}_compact(){if(this._map.size>this._max){const h=this._list.pop();this._map.delete(h.key)}}},c.List=class{constructor(){this.tail=null,this.head=null}unshift(h){return h.next=null,h.prev=this.head,this.head&&(this.head.next=h),this.head=h,this.tail||(this.tail=h),h}first(h){h!==this.head&&(this._remove(h),this.unshift(h))}pop(){return this._remove(this.tail)}_remove(h){const{next:d,prev:p}=h;return d.prev=p,p&&(p.next=d),h===this.tail&&(this.tail=d),h.prev=null,h.next=null,h}}},8160:(n,s,o)=>{const a=o(375),l=o(7916),u=o(5934);let c,h;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};s.version=u.version,s.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},s.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},s.assertOptions=function(p,m,g="Options"){a(p&&typeof p=="object"&&!Array.isArray(p),"Options must be of type object");const v=Object.keys(p).filter(b=>!m.includes(b));a(v.length===0,`${g} contain unknown keys: ${v}`)},s.checkPreferences=function(p){h=h||o(3378);const m=h.preferences.validate(p);if(m.error)throw new l([m.error.details[0].message])},s.compare=function(p,m,g){switch(g){case"=":return p===m;case">":return p>m;case"<":return p<m;case">=":return p>=m;case"<=":return p<=m}},s.default=function(p,m){return p===void 0?m:p},s.isIsoDate=function(p){return d.isoDate.test(p)},s.isNumber=function(p){return typeof p=="number"&&!isNaN(p)},s.isResolvable=function(p){return!!p&&(p[s.symbols.ref]||p[s.symbols.template])},s.isSchema=function(p,m={}){const g=p&&p[s.symbols.any];return!!g&&(a(m.legacy||g.version===s.version,"Cannot mix different versions of joi schemas"),!0)},s.isValues=function(p){return p[s.symbols.values]},s.limit=function(p){return Number.isSafeInteger(p)&&p>=0},s.preferences=function(p,m){c=c||o(6914),p=p||{},m=m||{};const g=Object.assign({},p,m);return m.errors&&p.errors&&(g.errors=Object.assign({},p.errors,m.errors),g.errors.wrap=Object.assign({},p.errors.wrap,m.errors.wrap)),m.messages&&(g.messages=c.compile(m.messages,p.messages)),delete g[s.symbols.prefs],g},s.tryWithPath=function(p,m,g={}){try{return p()}catch(v){throw v.path!==void 0?v.path=m+"."+v.path:v.path=m,g.append&&(v.message=`${v.message} (${v.path})`),v}},s.validateArg=function(p,m,{assert:g,message:v}){if(s.isSchema(g)){const b=g.validate(p);return b.error?b.error.message:void 0}if(!g(p))return m?`${m} ${v}`:v},s.verifyFlat=function(p,m){for(const g of p)a(!Array.isArray(g),"Method no longer accepts array arguments:",m)}},3292:(n,s,o)=>{const a=o(375),l=o(8160),u=o(6133),c={};s.schema=function(h,d,p={}){l.assertOptions(p,["appendPath","override"]);try{return c.schema(h,d,p)}catch(m){throw p.appendPath&&m.path!==void 0&&(m.message=`${m.message} (${m.path})`),m}},c.schema=function(h,d,p){a(d!==void 0,"Invalid undefined schema"),Array.isArray(d)&&(a(d.length,"Invalid empty array schema"),d.length===1&&(d=d[0]));const m=(g,...v)=>p.override!==!1?g.valid(h.override,...v):g.valid(...v);if(c.simple(d))return m(h,d);if(typeof d=="function")return h.custom(d);if(a(typeof d=="object","Invalid schema content:",typeof d),l.isResolvable(d))return m(h,d);if(l.isSchema(d))return d;if(Array.isArray(d)){for(const g of d)if(!c.simple(g))return h.alternatives().try(...d);return m(h,...d)}return d instanceof RegExp?h.string().regex(d):d instanceof Date?m(h.date(),d):(a(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),h.object().keys(d))},s.ref=function(h,d){return u.isRef(h)?h:u.create(h,d)},s.compile=function(h,d,p={}){l.assertOptions(p,["legacy"]);const m=d&&d[l.symbols.any];if(m)return a(p.legacy||m.version===l.version,"Cannot mix different versions of joi schemas:",m.version,l.version),d;if(typeof d!="object"||!p.legacy)return s.schema(h,d,{appendPath:!0});const g=c.walk(d);return g?g.compile(g.root,d):s.schema(h,d,{appendPath:!0})},c.walk=function(h){if(typeof h!="object")return null;if(Array.isArray(h)){for(const p of h){const m=c.walk(p);if(m)return m}return null}const d=h[l.symbols.any];if(d)return{root:h[d.root],compile:d.compile};a(Object.getPrototypeOf(h)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const p in h){const m=c.walk(h[p]);if(m)return m}return null},c.simple=function(h){return h===null||["boolean","string","number"].includes(typeof h)},s.when=function(h,d,p){if(p===void 0&&(a(d&&typeof d=="object","Missing options"),p=d,d=u.create(".")),Array.isArray(p)&&(p={switch:p}),l.assertOptions(p,["is","not","then","otherwise","switch","break"]),l.isSchema(d))return a(p.is===void 0,'"is" can not be used with a schema condition'),a(p.not===void 0,'"not" can not be used with a schema condition'),a(p.switch===void 0,'"switch" can not be used with a schema condition'),c.condition(h,{is:d,then:p.then,otherwise:p.otherwise,break:p.break});if(a(u.isRef(d)||typeof d=="string","Invalid condition:",d),a(p.not===void 0||p.is===void 0,'Cannot combine "is" with "not"'),p.switch===void 0){let g=p;p.not!==void 0&&(g={is:p.not,then:p.otherwise,otherwise:p.then,break:p.break});let v=g.is!==void 0?h.$_compile(g.is):h.$_root.invalid(null,!1,0,"").required();return a(g.then!==void 0||g.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(g.break===void 0||g.then===void 0||g.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),p.is===void 0||u.isRef(p.is)||l.isSchema(p.is)||(v=v.required()),c.condition(h,{ref:s.ref(d),is:v,then:g.then,otherwise:g.otherwise,break:g.break})}a(Array.isArray(p.switch),'"switch" must be an array'),a(p.is===void 0,'Cannot combine "switch" with "is"'),a(p.not===void 0,'Cannot combine "switch" with "not"'),a(p.then===void 0,'Cannot combine "switch" with "then"');const m={ref:s.ref(d),switch:[],break:p.break};for(let g=0;g<p.switch.length;++g){const v=p.switch[g],b=g===p.switch.length-1;l.assertOptions(v,b?["is","then","otherwise"]:["is","then"]),a(v.is!==void 0,'Switch statement missing "is"'),a(v.then!==void 0,'Switch statement missing "then"');const _={is:h.$_compile(v.is),then:h.$_compile(v.then)};if(u.isRef(v.is)||l.isSchema(v.is)||(_.is=_.is.required()),b){a(p.otherwise===void 0||v.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const E=p.otherwise!==void 0?p.otherwise:v.otherwise;E!==void 0&&(a(m.break===void 0,"Cannot specify both otherwise and break"),_.otherwise=h.$_compile(E))}m.switch.push(_)}return m},c.condition=function(h,d){for(const p of["then","otherwise"])d[p]===void 0?delete d[p]:d[p]=h.$_compile(d[p]);return d}},6354:(n,s,o)=>{const a=o(5688),l=o(8160),u=o(3328);s.Report=class{constructor(c,h,d,p,m,g,v){if(this.code=c,this.flags=p,this.messages=m,this.path=g.path,this.prefs=v,this.state=g,this.value=h,this.message=null,this.template=null,this.local=d||{},this.local.label=s.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const b=this.path[this.path.length-1];typeof b!="object"&&(this.local.key=b)}}_setTemplate(c){if(this.template=c,!this.flags.label&&this.path.length===0){const h=this._template(this.template,"root");h&&(this.local.label=h)}}toString(){if(this.message)return this.message;const c=this.code;if(!this.prefs.errors.render)return this.code;const h=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return h===void 0?`Error code "${c}" is not defined, your custom type is missing the correct messages definition`:(this.message=h.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(c,h){return s.template(this.value,c,h||this.code,this.state,this.prefs)}},s.path=function(c){let h="";for(const d of c)typeof d!="object"&&(typeof d=="string"?(h&&(h+="."),h+=d):h+=`[${d}]`);return h},s.template=function(c,h,d,p,m){if(!h)return;if(u.isTemplate(h))return d!=="root"?h:null;let g=m.errors.language;if(l.isResolvable(g)&&(g=g.resolve(c,p,m)),g&&h[g]){if(h[g][d]!==void 0)return h[g][d];if(h[g]["*"]!==void 0)return h[g]["*"]}return h[d]?h[d]:h["*"]},s.label=function(c,h,d,p){if(!d.errors.label)return"";if(c.label)return c.label;let m=h.path;return d.errors.label==="key"&&h.path.length>1&&(m=h.path.slice(-1)),s.path(m)||s.template(null,d.messages,"root",h,d)||p&&s.template(null,p,"root",h,d)||"value"},s.process=function(c,h,d){if(!c)return null;const{override:p,message:m,details:g}=s.details(c);if(p)return p;if(d.errors.stack)return new s.ValidationError(m,g,h);const v=Error.stackTraceLimit;Error.stackTraceLimit=0;const b=new s.ValidationError(m,g,h);return Error.stackTraceLimit=v,b},s.details=function(c,h={}){let d=[];const p=[];for(const m of c){if(m instanceof Error){if(h.override!==!1)return{override:m};const v=m.toString();d.push(v),p.push({message:v,type:"override",context:{error:m}});continue}const g=m.toString();d.push(g),p.push({message:g,path:m.path.filter(v=>typeof v!="object"),type:m.code,context:m.local})}return d.length>1&&(d=[...new Set(d)]),{message:d.join(". "),details:p}},s.ValidationError=class extends Error{constructor(c,h,d){super(c),this._original=d,this.details=h}static isError(c){return c instanceof s.ValidationError}},s.ValidationError.prototype.isJoi=!0,s.ValidationError.prototype.name="ValidationError",s.ValidationError.prototype.annotate=a.error},8901:(n,s,o)=>{const a=o(375),l=o(8571),u=o(8160),c=o(6914),h={};s.type=function(d,p){const m=Object.getPrototypeOf(d),g=l(m),v=d._assign(Object.create(g)),b=Object.assign({},p);delete b.base,g._definition=b;const _=m._definition||{};b.messages=c.merge(_.messages,b.messages),b.properties=Object.assign({},_.properties,b.properties),v.type=b.type,b.flags=Object.assign({},_.flags,b.flags);const E=Object.assign({},_.terms);if(b.terms)for(const M in b.terms){const A=b.terms[M];a(v.$_terms[M]===void 0,"Invalid term override for",b.type,M),v.$_terms[M]=A.init,E[M]=A}b.terms=E,b.args||(b.args=_.args),b.prepare=h.prepare(b.prepare,_.prepare),b.coerce&&(typeof b.coerce=="function"&&(b.coerce={method:b.coerce}),b.coerce.from&&!Array.isArray(b.coerce.from)&&(b.coerce={method:b.coerce.method,from:[].concat(b.coerce.from)})),b.coerce=h.coerce(b.coerce,_.coerce),b.validate=h.validate(b.validate,_.validate);const C=Object.assign({},_.rules);if(b.rules)for(const M in b.rules){const A=b.rules[M];a(typeof A=="object","Invalid rule definition for",b.type,M);let I=A.method;if(I===void 0&&(I=function(){return this.$_addRule(M)}),I&&(a(!g[M],"Rule conflict in",b.type,M),g[M]=I),a(!C[M],"Rule conflict in",b.type,M),C[M]=A,A.alias){const P=[].concat(A.alias);for(const U of P)g[U]=A.method}A.args&&(A.argsByName=new Map,A.args=A.args.map(P=>(typeof P=="string"&&(P={name:P}),a(!A.argsByName.has(P.name),"Duplicated argument name",P.name),u.isSchema(P.assert)&&(P.assert=P.assert.strict().label(P.name)),A.argsByName.set(P.name,P),P)))}b.rules=C;const T=Object.assign({},_.modifiers);if(b.modifiers)for(const M in b.modifiers){a(!g[M],"Rule conflict in",b.type,M);const A=b.modifiers[M];a(typeof A=="function","Invalid modifier definition for",b.type,M);const I=function(P){return this.rule({[M]:P})};g[M]=I,T[M]=A}if(b.modifiers=T,b.overrides){g._super=m,v.$_super={};for(const M in b.overrides)a(m[M],"Cannot override missing",M),b.overrides[M][u.symbols.parent]=m[M],v.$_super[M]=m[M].bind(v);Object.assign(g,b.overrides)}b.cast=Object.assign({},_.cast,b.cast);const D=Object.assign({},_.manifest,b.manifest);return D.build=h.build(b.manifest&&b.manifest.build,_.manifest&&_.manifest.build),b.manifest=D,b.rebuild=h.rebuild(b.rebuild,_.rebuild),v},h.build=function(d,p){return d&&p?function(m,g){return p(d(m,g),g)}:d||p},h.coerce=function(d,p){return d&&p?{from:d.from&&p.from?[...new Set([...d.from,...p.from])]:null,method(m,g){let v;if((!p.from||p.from.includes(typeof m))&&(v=p.method(m,g),v)){if(v.errors||v.value===void 0)return v;m=v.value}if(!d.from||d.from.includes(typeof m)){const b=d.method(m,g);if(b)return b}return v}}:d||p},h.prepare=function(d,p){return d&&p?function(m,g){const v=d(m,g);if(v){if(v.errors||v.value===void 0)return v;m=v.value}return p(m,g)||v}:d||p},h.rebuild=function(d,p){return d&&p?function(m){p(m),d(m)}:d||p},h.validate=function(d,p){return d&&p?function(m,g){const v=p(m,g);if(v){if(v.errors&&(!Array.isArray(v.errors)||v.errors.length))return v;m=v.value}return d(m,g)||v}:d||p}},5107:(n,s,o)=>{const a=o(375),l=o(8571),u=o(8652),c=o(8160),h=o(3292),d=o(6354),p=o(8901),m=o(9708),g=o(6133),v=o(3328),b=o(1152);let _;const E={types:{alternatives:o(4946),any:o(8068),array:o(546),boolean:o(4937),date:o(7500),function:o(390),link:o(8785),number:o(3832),object:o(8966),string:o(7417),symbol:o(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const C={_types:new Set(Object.keys(E.types))};for(const T of C._types)C[T]=function(...D){return a(!D.length||["alternatives","link","object"].includes(T),"The",T,"type does not allow arguments"),E.generate(this,E.types[T],D)};for(const T of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])C[T]=function(...D){return this.any()[T](...D)};Object.assign(C,E.methods);for(const T in E.aliases){const D=E.aliases[T];C[T]=C[D]}return C.x=C.expression,b.setup&&b.setup(C),C}};E.methods={ValidationError:d.ValidationError,version:c.version,cache:u.provider,assert(C,T,...D){E.assert(C,T,!0,D)},attempt:(C,T,...D)=>E.assert(C,T,!1,D),build(C){return a(typeof m.build=="function","Manifest functionality disabled"),m.build(this,C)},checkPreferences(C){c.checkPreferences(C)},compile(C,T){return h.compile(this,C,T)},defaults(C){a(typeof C=="function","modifier must be a function");const T=Object.assign({},this);for(const D of T._types){const M=C(T[D]());a(c.isSchema(M),"modifier must return a valid schema object"),T[D]=function(...A){return E.generate(this,M,A)}}return T},expression:(...C)=>new v(...C),extend(...C){c.verifyFlat(C,"extend"),_=_||o(3378),a(C.length,"You need to provide at least one extension"),this.assert(C,_.extensions);const T=Object.assign({},this);T._types=new Set(T._types);for(let D of C){typeof D=="function"&&(D=D(T)),this.assert(D,_.extension);const M=E.expandExtension(D,T);for(const A of M){a(T[A.type]===void 0||T._types.has(A.type),"Cannot override name",A.type);const I=A.base||this.any(),P=p.type(I,A);T._types.add(A.type),T[A.type]=function(...U){return E.generate(this,P,U)}}}return T},isError:d.ValidationError.isError,isExpression:v.isTemplate,isRef:g.isRef,isSchema:c.isSchema,in:(...C)=>g.in(...C),override:c.symbols.override,ref:(...C)=>g.create(...C),types(){const C={};for(const T of this._types)C[T]=this[T]();for(const T in E.aliases)C[T]=this[T]();return C}},E.assert=function(C,T,D,M){const A=M[0]instanceof Error||typeof M[0]=="string"?M[0]:null,I=A!==null?M[1]:M[0],P=T.validate(C,c.preferences({errors:{stack:!0}},I||{}));let U=P.error;if(!U)return P.value;if(A instanceof Error)throw A;const K=D&&typeof U.annotate=="function"?U.annotate():U.message;throw U instanceof d.ValidationError==0&&(U=l(U)),U.message=A?`${A} ${K}`:K,U},E.generate=function(C,T,D){return a(C,"Must be invoked on a Joi instance."),T.$_root=C,T._definition.args&&D.length?T._definition.args(T,...D):T},E.expandExtension=function(C,T){if(typeof C.type=="string")return[C];const D=[];for(const M of T._types)if(C.type.test(M)){const A=Object.assign({},C);A.type=M,A.base=T[M](),D.push(A)}return D},n.exports=E.root()},6914:(n,s,o)=>{const a=o(375),l=o(8571),u=o(3328);s.compile=function(c,h){if(typeof c=="string")return a(!h,"Cannot set single message string"),new u(c);if(u.isTemplate(c))return a(!h,"Cannot set single message template"),c;a(typeof c=="object"&&!Array.isArray(c),"Invalid message options"),h=h?l(h):{};for(let d in c){const p=c[d];if(d==="root"||u.isTemplate(p)){h[d]=p;continue}if(typeof p=="string"){h[d]=new u(p);continue}a(typeof p=="object"&&!Array.isArray(p),"Invalid message for",d);const m=d;for(d in h[m]=h[m]||{},p){const g=p[d];d==="root"||u.isTemplate(g)?h[m][d]=g:(a(typeof g=="string","Invalid message for",d,"in",m),h[m][d]=new u(g))}}return h},s.decompile=function(c){const h={};for(let d in c){const p=c[d];if(d==="root"){h.root=p;continue}if(u.isTemplate(p)){h[d]=p.describe({compact:!0});continue}const m=d;for(d in h[m]={},p){const g=p[d];d!=="root"?h[m][d]=g.describe({compact:!0}):h[m].root=g}}return h},s.merge=function(c,h){if(!c)return s.compile(h);if(!h)return c;if(typeof h=="string")return new u(h);if(u.isTemplate(h))return h;const d=l(c);for(let p in h){const m=h[p];if(p==="root"||u.isTemplate(m)){d[p]=m;continue}if(typeof m=="string"){d[p]=new u(m);continue}a(typeof m=="object"&&!Array.isArray(m),"Invalid message for",p);const g=p;for(p in d[g]=d[g]||{},m){const v=m[p];p==="root"||u.isTemplate(v)?d[g][p]=v:(a(typeof v=="string","Invalid message for",p,"in",g),d[g][p]=new u(v))}}return d}},2294:(n,s,o)=>{const a=o(375),l=o(8160),u=o(6133),c={};s.Ids=c.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const h=new c.Ids;return h._byId=new Map(this._byId),h._byKey=new Map(this._byKey),h._schemaChain=this._schemaChain,h}concat(h){h._schemaChain&&(this._schemaChain=!0);for(const[d,p]of h._byId.entries())a(!this._byKey.has(d),"Schema id conflicts with existing key:",d),this._byId.set(d,p);for(const[d,p]of h._byKey.entries())a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,p)}fork(h,d,p){const m=this._collect(h);m.push({schema:p});const g=m.shift();let v={id:g.id,schema:d(g.schema)};a(l.isSchema(v.schema),"adjuster function failed to return a joi schema type");for(const b of m)v={id:b.id,schema:c.fork(b.schema,v.id,v.schema)};return v.schema}labels(h,d=[]){const p=h[0],m=this._get(p);if(!m)return[...d,...h].join(".");const g=h.slice(1);return d=[...d,m.schema._flags.label||p],g.length?m.schema._ids.labels(g,d):d.join(".")}reach(h,d=[]){const p=h[0],m=this._get(p);a(m,"Schema does not contain path",[...d,...h].join("."));const g=h.slice(1);return g.length?m.schema._ids.reach(g,[...d,p]):m.schema}register(h,{key:d}={}){if(!h||!l.isSchema(h))return;(h.$_property("schemaChain")||h._ids._schemaChain)&&(this._schemaChain=!0);const p=h._flags.id;if(p){const m=this._byId.get(p);a(!m||m.schema===h,"Cannot add different schemas with the same id:",p),a(!this._byKey.has(p),"Schema id conflicts with existing key:",p),this._byId.set(p,{schema:h,id:p})}d&&(a(!this._byKey.has(d),"Schema already contains key:",d),a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,{schema:h,id:d}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(h,d=[],p=[]){const m=h[0],g=this._get(m);a(g,"Schema does not contain path",[...d,...h].join(".")),p=[g,...p];const v=h.slice(1);return v.length?g.schema._ids._collect(v,[...d,m],p):p}_get(h){return this._byId.get(h)||this._byKey.get(h)}},c.fork=function(h,d,p){const m=s.schema(h,{each:(g,{key:v})=>{if(d===(g._flags.id||v))return p},ref:!1});return m?m.$_mutateRebuild():h},s.schema=function(h,d){let p;for(const m in h._flags){if(m[0]==="_")continue;const g=c.scan(h._flags[m],{source:"flags",name:m},d);g!==void 0&&(p=p||h.clone(),p._flags[m]=g)}for(let m=0;m<h._rules.length;++m){const g=h._rules[m],v=c.scan(g.args,{source:"rules",name:g.name},d);if(v!==void 0){p=p||h.clone();const b=Object.assign({},g);b.args=v,p._rules[m]=b,p._singleRules.get(g.name)===g&&p._singleRules.set(g.name,b)}}for(const m in h.$_terms){if(m[0]==="_")continue;const g=c.scan(h.$_terms[m],{source:"terms",name:m},d);g!==void 0&&(p=p||h.clone(),p.$_terms[m]=g)}return p},c.scan=function(h,d,p,m,g){const v=m||[];if(h===null||typeof h!="object")return;let b;if(Array.isArray(h)){for(let _=0;_<h.length;++_){const E=d.source==="terms"&&d.name==="keys"&&h[_].key,C=c.scan(h[_],d,p,[_,...v],E);C!==void 0&&(b=b||h.slice(),b[_]=C)}return b}if(p.schema!==!1&&l.isSchema(h)||p.ref!==!1&&u.isRef(h)){const _=p.each(h,{...d,path:v,key:g});return _===h?void 0:_}for(const _ in h){if(_[0]==="_")continue;const E=c.scan(h[_],d,p,[_,...v],g);E!==void 0&&(b=b||Object.assign({},h),b[_]=E)}return b}},6133:(n,s,o)=>{const a=o(375),l=o(8571),u=o(9621),c=o(8160);let h;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};s.create=function(p,m={}){a(typeof p=="string","Invalid reference key:",p),c.assertOptions(m,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!m.prefix||typeof m.prefix=="object","options.prefix must be of type object");const g=Object.assign({},d.defaults,m);delete g.prefix;const v=g.separator,b=d.context(p,v,m.prefix);if(g.type=b.type,p=b.key,g.type==="value")if(b.root&&(a(!v||p[0]!==v,"Cannot specify relative path with root prefix"),g.ancestor="root",p||(p=null)),v&&v===p)p=null,g.ancestor=0;else if(g.ancestor!==void 0)a(!v||!p||p[0]!==v,"Cannot combine prefix with ancestor option");else{const[_,E]=d.ancestor(p,v);E&&(p=p.slice(E))===""&&(p=null),g.ancestor=_}return g.path=v?p===null?[]:p.split(v):[p],new d.Ref(g)},s.in=function(p,m={}){return s.create(p,{...m,in:!0})},s.isRef=function(p){return!!p&&!!p[c.symbols.ref]},d.Ref=class{constructor(p){a(typeof p=="object","Invalid reference construction"),c.assertOptions(p,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(p.separator)||typeof p.separator=="string"&&p.separator.length===1,"Invalid separator"),a(!p.adjust||typeof p.adjust=="function","options.adjust must be a function"),a(!p.map||Array.isArray(p.map),"options.map must be an array"),a(!p.map||!p.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,p),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(p,m,g,v,b={}){return a(!this.in||b.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(g.context,m,b):this.type==="local"?this._resolve(v,m,b):this.ancestor?this.ancestor==="root"?this._resolve(m.ancestors[m.ancestors.length-1],m,b):(a(this.ancestor<=m.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(m.ancestors[this.ancestor-1],m,b)):this._resolve(p,m,b)}_resolve(p,m,g){let v;if(this.type==="value"&&m.mainstay.shadow&&g.shadow!==!1&&(v=m.mainstay.shadow.get(this.absolute(m))),v===void 0&&(v=u(p,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(v=this.adjust(v)),this.map){const b=this.map.get(v);b!==void 0&&(v=b)}return m.mainstay&&m.mainstay.tracer.resolve(m,this,v),v}toString(){return this.display}absolute(p){return[...p.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const p={path:this.path};this.type!=="value"&&(p.type=this.type),this.separator!=="."&&(p.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(p.ancestor=this.ancestor),this.map&&(p.map=[...this.map]);for(const m of["adjust","iterables","render"])this[m]!==null&&this[m]!==void 0&&(p[m]=this[m]);return this.in!==!1&&(p.in=!0),{ref:p}}updateDisplay(){const p=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${p}`);if(!this.separator)return void(this.display=`ref:${p}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${p}`);if(this.ancestor==="root")return void(this.display=`ref:root:${p}`);if(this.ancestor===1)return void(this.display=`ref:${p||".."}`);const m=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${m}${p||""}`}},d.Ref.prototype[c.symbols.ref]=!0,s.build=function(p){return(p=Object.assign({},d.defaults,p)).type==="value"&&p.ancestor===void 0&&(p.ancestor=1),new d.Ref(p)},d.context=function(p,m,g={}){if(p=p.trim(),g){const v=g.global===void 0?"$":g.global;if(v!==m&&p.startsWith(v))return{key:p.slice(v.length),type:"global"};const b=g.local===void 0?"#":g.local;if(b!==m&&p.startsWith(b))return{key:p.slice(b.length),type:"local"};const _=g.root===void 0?"/":g.root;if(_!==m&&p.startsWith(_))return{key:p.slice(_.length),type:"value",root:!0}}return{key:p,type:"value"}},d.ancestor=function(p,m){if(!m)return[1,0];if(p[0]!==m)return[1,0];if(p[1]!==m)return[0,1];let g=2;for(;p[g]===m;)++g;return[g-1,g]},s.toSibling=0,s.toParent=1,s.Manager=class{constructor(){this.refs=[]}register(p,m){if(p)if(m=m===void 0?s.toParent:m,Array.isArray(p))for(const g of p)this.register(g,m);else if(c.isSchema(p))for(const g of p._refs.refs)g.ancestor-m>=0&&this.refs.push({ancestor:g.ancestor-m,root:g.root});else s.isRef(p)&&p.type==="value"&&p.ancestor-m>=0&&this.refs.push({ancestor:p.ancestor-m,root:p.root}),h=h||o(3328),h.isTemplate(p)&&this.register(p.refs(),m)}get length(){return this.refs.length}clone(){const p=new s.Manager;return p.refs=l(this.refs),p}reset(){this.refs=[]}roots(){return this.refs.filter(p=>!p.ancestor).map(p=>p.root)}}},3378:(n,s,o)=>{const a=o(5107),l={};l.wrap=a.string().min(1).max(2).allow(!1),s.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=a.object({alias:a.array().items(a.string().pattern(l.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(l.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),s.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(l.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(l.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(l.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(l.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(l.nameRx,l.rule),terms:a.object().pattern(l.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),s.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),l.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},l.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,a.link("/")]),l.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=a.object().pattern(/.+/,[a.string(),l.desc.template,a.object().pattern(/.+/,[a.string(),l.desc.template])]),s.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:l.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:a.boolean(),messages:l.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),l.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(n,s,o)=>{const a=o(8571),l=o(9621),u=o(8160),c={value:Symbol("value")};n.exports=c.State=class{constructor(h,d,p){this.path=h,this.ancestors=d,this.mainstay=p.mainstay,this.schemas=p.schemas,this.debug=null}localize(h,d=null,p=null){const m=new c.State(h,d,this);return p&&m.schemas&&(m.schemas=[c.schemas(p),...m.schemas]),m}nest(h,d){const p=new c.State(this.path,this.ancestors,this);return p.schemas=p.schemas&&[c.schemas(h),...p.schemas],p.debug=d,p}shadow(h,d){this.mainstay.shadow=this.mainstay.shadow||new c.Shadow,this.mainstay.shadow.set(this.path,h,d)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},c.schemas=function(h){return u.isSchema(h)?{schema:h}:h},c.Shadow=class{constructor(){this._values=null}set(h,d,p){if(!h.length||p==="strip"&&typeof h[h.length-1]=="number")return;this._values=this._values||new Map;let m=this._values;for(let g=0;g<h.length;++g){const v=h[g];let b=m.get(v);b||(b=new Map,m.set(v,b)),m=b}m[c.value]=d}get(h){const d=this.node(h);if(d)return d[c.value]}node(h){if(this._values)return l(this._values,h,{iterables:!0})}override(h,d){if(!this._values)return;const p=h.slice(0,-1),m=h[h.length-1],g=l(this._values,p,{iterables:!0});d?g.set(m,d):g&&g.delete(m)}}},3328:(n,s,o)=>{const a=o(375),l=o(8571),u=o(5277),c=o(1447),h=o(8160),d=o(6354),p=o(6133),m={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};n.exports=m.Template=class{constructor(g,v){if(a(typeof g=="string","Template source must be a string"),a(!g.includes("\0")&&!g.includes(""),"Template source cannot contain reserved control characters"),this.source=g,this.rendered=g,this._template=null,v){const{functions:b,..._}=v;this._settings=Object.keys(_).length?l(_):void 0,this._functions=b,this._functions&&(a(Object.keys(this._functions).every(E=>typeof E=="string"),"Functions keys must be strings"),a(Object.values(this._functions).every(E=>typeof E=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const g=m.encode(this.source),v=m.split(g);let b=!1;const _=[],E=v.shift();E&&_.push(E);for(const C of v){const T=C[0]!=="{",D=T?"}":"}}",M=C.indexOf(D);if(M===-1||C[1]==="{"){_.push(`{${m.decode(C)}`);continue}let A=C.slice(T?0:1,M);const I=A[0]===":";I&&(A=A.slice(1));const P=this._ref(m.decode(A),{raw:T,wrapped:I});_.push(P),typeof P!="string"&&(b=!0);const U=C.slice(M+D.length);U&&_.push(m.decode(U))}b?this._template=_:this.rendered=_.join("")}static date(g,v){return m.dateFormat[v.dateFormat].call(g)}describe(g={}){if(!this._settings&&g.compact)return this.source;const v={template:this.source};return this._settings&&(v.options=this._settings),this._functions&&(v.functions=this._functions),v}static build(g){return new m.Template(g.template,g.options||g.functions?{...g.options,functions:g.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(g){return!!g&&!!g[h.symbols.template]}refs(){if(!this._template)return;const g=[];for(const v of this._template)typeof v!="string"&&g.push(...v.refs);return g}resolve(g,v,b,_){return this._template&&this._template.length===1?this._part(this._template[0],g,v,b,_,{}):this.render(g,v,b,_)}_part(g,...v){return g.ref?g.ref.resolve(...v):g.formula.evaluate(v)}render(g,v,b,_,E={}){if(!this.isDynamic())return this.rendered;const C=[];for(const T of this._template)if(typeof T=="string")C.push(T);else{const D=this._part(T,g,v,b,_,E),M=m.stringify(D,g,v,b,_,E);if(M!==void 0){const A=T.raw||(E.errors&&E.errors.escapeHtml)===!1?M:u(M);C.push(m.wrap(A,T.wrapped&&b.errors.wrap.label))}}return C.join("")}_ref(g,{raw:v,wrapped:b}){const _=[],E=T=>{const D=p.create(T,this._settings);return _.push(D),M=>{const A=D.resolve(...M);return A!==void 0?A:null}};try{const T=this._functions?{...m.functions,...this._functions}:m.functions;var C=new c.Parser(g,{reference:E,functions:T,constants:m.constants})}catch(T){throw T.message=`Invalid template variable "${g}" fails due to: ${T.message}`,T}if(C.single){if(C.single.type==="reference"){const T=_[0];return{ref:T,raw:v,refs:_,wrapped:b||T.type==="local"&&T.key==="label"}}return m.stringify(C.single.value)}return{formula:C,raw:v,refs:_}}toString(){return this.source}},m.Template.prototype[h.symbols.template]=!0,m.Template.prototype.isImmutable=!0,m.encode=function(g){return g.replace(/\\(\{+)/g,(v,b)=>m.opens.slice(0,b.length)).replace(/\\(\}+)/g,(v,b)=>m.closes.slice(0,b.length))},m.decode=function(g){return g.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},m.split=function(g){const v=[];let b="";for(let _=0;_<g.length;++_){const E=g[_];if(E==="{"){let C="";for(;_+1<g.length&&g[_+1]==="{";)C+="{",++_;v.push(b),b=C}else b+=E}return v.push(b),v},m.wrap=function(g,v){return v?v.length===1?`${v}${g}${v}`:`${v[0]}${g}${v[1]}`:g},m.stringify=function(g,v,b,_,E,C={}){const T=typeof g,D=_&&_.errors&&_.errors.wrap||{};let M=!1;if(p.isRef(g)&&g.render&&(M=g.in,g=g.resolve(v,b,_,E,{in:g.in,...C})),g===null)return"null";if(T==="string")return m.wrap(g,C.arrayItems&&D.string);if(T==="number"||T==="function"||T==="symbol")return g.toString();if(T!=="object")return JSON.stringify(g);if(g instanceof Date)return m.Template.date(g,_);if(g instanceof Map){const I=[];for(const[P,U]of g.entries())I.push(`${P.toString()} -> ${U.toString()}`);g=I}if(!Array.isArray(g))return g.toString();const A=[];for(const I of g)A.push(m.stringify(I,v,b,_,E,{arrayItems:!0,...C}));return m.wrap(A.join(", "),!M&&D.array)},m.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},m.functions={if:(g,v,b)=>g?v:b,length:g=>typeof g=="string"?g.length:g&&typeof g=="object"?Array.isArray(g)?g.length:Object.keys(g).length:null,msg(g){const[v,b,_,E,C]=this,T=C.messages;if(!T)return"";const D=d.template(v,T[0],g,b,_)||d.template(v,T[1],g,b,_);return D?D.render(v,b,_,E,C):""},number:g=>typeof g=="number"?g:typeof g=="string"?parseFloat(g):typeof g=="boolean"?g?1:0:g instanceof Date?g.getTime():null}},4946:(n,s,o)=>{const a=o(375),l=o(1687),u=o(8068),c=o(8160),h=o(3292),d=o(6354),p=o(6133),m={};n.exports=u.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:p.toSibling}},args:(g,...v)=>v.length===1&&Array.isArray(v[0])?g.try(...v[0]):g.try(...v),validate(g,v){const{schema:b,error:_,state:E,prefs:C}=v;if(b._flags.match){const D=[],M=[];for(let I=0;I<b.$_terms.matches.length;++I){const P=b.$_terms.matches[I],U=E.nest(P.schema,`match.${I}`);U.snapshot();const K=P.schema.$_validate(g,U,C);K.errors?(M.push(K.errors),U.restore()):(D.push(K.value),U.commit())}if(D.length===0)return{errors:_("alternatives.any",{details:M.map(I=>d.details(I,{override:!1}))})};if(b._flags.match==="one")return D.length===1?{value:D[0]}:{errors:_("alternatives.one")};if(D.length!==b.$_terms.matches.length)return{errors:_("alternatives.all",{details:M.map(I=>d.details(I,{override:!1}))})};const A=I=>I.$_terms.matches.some(P=>P.schema.type==="object"||P.schema.type==="alternatives"&&A(P.schema));return A(b)?{value:D.reduce((I,P)=>l(I,P,{mergeArrays:!1}))}:{value:D[D.length-1]}}const T=[];for(let D=0;D<b.$_terms.matches.length;++D){const M=b.$_terms.matches[D];if(M.schema){const P=E.nest(M.schema,`match.${D}`);P.snapshot();const U=M.schema.$_validate(g,P,C);if(!U.errors)return P.commit(),U;P.restore(),T.push({schema:M.schema,reports:U.errors});continue}const A=M.ref?M.ref.resolve(g,E,C):g,I=M.is?[M]:M.switch;for(let P=0;P<I.length;++P){const U=I[P],{is:K,then:L,otherwise:F}=U,$=`match.${D}${M.switch?"."+P:""}`;if(K.$_match(A,E.nest(K,`${$}.is`),C)){if(L)return L.$_validate(g,E.nest(L,`${$}.then`),C)}else if(F)return F.$_validate(g,E.nest(F,`${$}.otherwise`),C)}}return m.errors(T,v)},rules:{conditional:{method(g,v){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(v.break===void 0,"Cannot use break option with alternatives conditional");const b=this.clone(),_=h.when(b,g,v),E=_.is?[_]:_.switch;for(const C of E)if(C.then&&C.otherwise){b.$_setFlag("_endedSwitch",!0,{clone:!1});break}return b.$_terms.matches.push(_),b.$_mutateRebuild()}},match:{method(g){if(a(["any","one","all"].includes(g),"Invalid alternatives match mode",g),g!=="any")for(const v of this.$_terms.matches)a(v.schema,"Cannot combine match mode",g,"with conditional rules");return this.$_setFlag("match",g)}},try:{method(...g){a(g.length,"Missing alternative schemas"),c.verifyFlat(g,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const v=this.clone();for(const b of g)v.$_terms.matches.push({schema:v.$_compile(b)});return v.$_mutateRebuild()}}},overrides:{label(g){return this.$_parent("label",g).$_modify({each:(v,b)=>b.path[0]!=="is"&&typeof v._flags.label!="string"?v.label(g):void 0,ref:!1})}},rebuild(g){g.$_modify({each:v=>{c.isSchema(v)&&v.type==="array"&&g.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(g,v){if(v.matches)for(const b of v.matches){const{schema:_,ref:E,is:C,not:T,then:D,otherwise:M}=b;g=_?g.try(_):E?g.conditional(E,{is:C,then:D,not:T,otherwise:M,switch:b.switch}):g.conditional(C,{then:D,otherwise:M})}return g}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),m.errors=function(g,{error:v,state:b}){if(!g.length)return{errors:v("alternatives.any")};if(g.length===1)return{errors:g[0].reports};const _=new Set,E=[];for(const{reports:C,schema:T}of g){if(C.length>1)return m.unmatched(g,v);const D=C[0];if(D instanceof d.Report==0)return m.unmatched(g,v);if(D.state.path.length!==b.path.length){E.push({type:T.type,report:D});continue}if(D.code==="any.only"){for(const I of D.local.valids)_.add(I);continue}const[M,A]=D.code.split(".");A==="base"?_.add(M):E.push({type:T.type,report:D})}return E.length?E.length===1?{errors:E[0].report}:m.unmatched(g,v):{errors:v("alternatives.types",{types:[..._]})}},m.unmatched=function(g,v){const b=[];for(const _ of g)b.push(..._.reports);return{errors:v("alternatives.match",d.details(b,{override:!1}))}}},8068:(n,s,o)=>{const a=o(375),l=o(7629),u=o(8160),c=o(6914);n.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(h,d){return a(typeof h=="function","Method must be a function"),a(d===void 0||d&&typeof d=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:h,description:d}})},validate(h,d,{method:p}){try{return p(h,d)}catch(m){return d.error("any.custom",{error:m})}},args:["method","description"],multi:!0},messages:{method(h){return this.prefs({messages:h})}},shared:{method(h){a(u.isSchema(h)&&h._flags.id,"Schema must be a schema with an id");const d=this.clone();return d.$_terms.shared=d.$_terms.shared||[],d.$_terms.shared.push(h),d.$_mutateRegister(h),d}},warning:{method(h,d){return a(h&&typeof h=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:h,local:d},warn:!0})},validate:(h,d,{code:p,local:m})=>d.error(p,m),args:["code","local"],multi:!0}},modifiers:{keep(h,d=!0){h.keep=d},message(h,d){h.message=c.compile(d)},warn(h,d=!0){h.warn=d}},manifest:{build(h,d){for(const p in d){const m=d[p];if(["examples","externals","metas","notes","tags"].includes(p))for(const g of m)h=h[p.slice(0,-1)](g);else if(p!=="alterations")if(p!=="whens"){if(p==="shared")for(const g of m)h=h.shared(g)}else for(const g of m){const{ref:v,is:b,not:_,then:E,otherwise:C,concat:T}=g;h=T?h.concat(T):v?h.when(v,{is:b,not:_,then:E,otherwise:C,switch:g.switch,break:g.break}):h.when(b,{then:E,otherwise:C,break:g.break})}else{const g={};for(const{target:v,adjuster:b}of m)g[v]=b;h=h.alter(g)}}return h}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(n,s,o)=>{const a=o(375),l=o(9474),u=o(9621),c=o(8068),h=o(8160),d=o(3292),p={};n.exports=c.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(m,{schema:g,state:v,prefs:b}){if(!Array.isArray(m))return;const _=g.$_getRule("sort");return _?p.sort(g,m,_.args.options,v,b):void 0}},validate(m,{schema:g,error:v}){if(!Array.isArray(m)){if(g._flags.single){const b=[m];return b[h.symbols.arraySingle]=!0,{value:b}}return{errors:v("array.base")}}if(g.$_getRule("items")||g.$_terms.externals)return{value:m.slice()}},rules:{has:{method(m){m=this.$_compile(m,{appendPath:!0});const g=this.$_addRule({name:"has",args:{schema:m}});return g.$_mutateRegister(m),g},validate(m,{state:g,prefs:v,error:b},{schema:_}){const E=[m,...g.ancestors];for(let T=0;T<m.length;++T){const D=g.localize([...g.path,T],E,_);if(_.$_match(m[T],D,v))return m}const C=_._flags.label;return C?b("array.hasKnown",{patternLabel:C}):b("array.hasUnknown",null)},multi:!0},items:{method(...m){h.verifyFlat(m,"items");const g=this.$_addRule("items");for(let v=0;v<m.length;++v){const b=h.tryWithPath(()=>this.$_compile(m[v]),v,{append:!0});g.$_terms.items.push(b)}return g.$_mutateRebuild()},validate(m,{schema:g,error:v,state:b,prefs:_,errorsArray:E}){const C=g.$_terms._requireds.slice(),T=g.$_terms.ordered.slice(),D=[...g.$_terms._inclusions,...C],M=!m[h.symbols.arraySingle];delete m[h.symbols.arraySingle];const A=E();let I=m.length;for(let P=0;P<I;++P){const U=m[P];let K=!1,L=!1;const F=M?P:new Number(P),$=[...b.path,F];if(!g._flags.sparse&&U===void 0){if(A.push(v("array.sparse",{key:F,path:$,pos:P,value:void 0},b.localize($))),_.abortEarly)return A;T.shift();continue}const H=[m,...b.ancestors];for(const ie of g.$_terms._exclusions)if(ie.$_match(U,b.localize($,H,ie),_,{presence:"ignore"})){if(A.push(v("array.excludes",{pos:P,value:U},b.localize($))),_.abortEarly)return A;K=!0,T.shift();break}if(K)continue;if(g.$_terms.ordered.length){if(T.length){const ie=T.shift(),de=ie.$_validate(U,b.localize($,H,ie),_);if(de.errors){if(A.push(...de.errors),_.abortEarly)return A}else if(ie._flags.result==="strip")p.fastSplice(m,P),--P,--I;else{if(!g._flags.sparse&&de.value===void 0){if(A.push(v("array.sparse",{key:F,path:$,pos:P,value:void 0},b.localize($))),_.abortEarly)return A;continue}m[P]=de.value}continue}if(!g.$_terms.items.length){if(A.push(v("array.orderedLength",{pos:P,limit:g.$_terms.ordered.length})),_.abortEarly)return A;break}}const V=[];let J=C.length;for(let ie=0;ie<J;++ie){const de=b.localize($,H,C[ie]);de.snapshot();const te=C[ie].$_validate(U,de,_);if(V[ie]=te,!te.errors){if(de.commit(),m[P]=te.value,L=!0,p.fastSplice(C,ie),--ie,--J,!g._flags.sparse&&te.value===void 0&&(A.push(v("array.sparse",{key:F,path:$,pos:P,value:void 0},b.localize($))),_.abortEarly))return A;break}de.restore()}if(L)continue;const ee=_.stripUnknown&&!!_.stripUnknown.arrays||!1;J=D.length;for(const ie of D){let de;const te=C.indexOf(ie);if(te!==-1)de=V[te];else{const z=b.localize($,H,ie);if(z.snapshot(),de=ie.$_validate(U,z,_),!de.errors){z.commit(),ie._flags.result==="strip"?(p.fastSplice(m,P),--P,--I):g._flags.sparse||de.value!==void 0?m[P]=de.value:(A.push(v("array.sparse",{key:F,path:$,pos:P,value:void 0},b.localize($))),K=!0),L=!0;break}z.restore()}if(J===1){if(ee){p.fastSplice(m,P),--P,--I,L=!0;break}if(A.push(...de.errors),_.abortEarly)return A;K=!0;break}}if(!K&&(g.$_terms._inclusions.length||g.$_terms._requireds.length)&&!L){if(ee){p.fastSplice(m,P),--P,--I;continue}if(A.push(v("array.includes",{pos:P,value:U},b.localize($))),_.abortEarly)return A}}return C.length&&p.fillMissedErrors(g,A,C,m,b,_),T.length&&(p.fillOrderedErrors(g,A,T,m,b,_),A.length||p.fillDefault(T,m,b,_)),A.length?A:m},priority:!0,manifest:!1},length:{method(m){return this.$_addRule({name:"length",args:{limit:m},operator:"="})},validate:(m,g,{limit:v},{name:b,operator:_,args:E})=>h.compare(m.length,v,_)?m:g.error("array."+b,{limit:E.limit,value:m}),args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(m){return this.$_addRule({name:"max",method:"length",args:{limit:m},operator:"<="})}},min:{method(m){return this.$_addRule({name:"min",method:"length",args:{limit:m},operator:">="})}},ordered:{method(...m){h.verifyFlat(m,"ordered");const g=this.$_addRule("items");for(let v=0;v<m.length;++v){const b=h.tryWithPath(()=>this.$_compile(m[v]),v,{append:!0});p.validateSingle(b,g),g.$_mutateRegister(b),g.$_terms.ordered.push(b)}return g.$_mutateRebuild()}},single:{method(m){const g=m===void 0||!!m;return a(!g||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",g)}},sort:{method(m={}){h.assertOptions(m,["by","order"]);const g={order:m.order||"ascending"};return m.by&&(g.by=d.ref(m.by,{ancestor:0}),a(!g.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:g}})},validate(m,{error:g,state:v,prefs:b,schema:_},{options:E}){const{value:C,errors:T}=p.sort(_,m,E,v,b);if(T)return T;for(let D=0;D<m.length;++D)if(m[D]!==C[D])return g("array.sort",{order:E.order,by:E.by?E.by.key:"value"});return m},convert:!0},sparse:{method(m){const g=m===void 0||!!m;return this._flags.sparse===g?this:(g?this.clone():this.$_addRule("items")).$_setFlag("sparse",g,{clone:!1})}},unique:{method(m,g={}){a(!m||typeof m=="function"||typeof m=="string","comparator must be a function or a string"),h.assertOptions(g,["ignoreUndefined","separator"]);const v={name:"unique",args:{options:g,comparator:m}};if(m)if(typeof m=="string"){const b=h.default(g.separator,".");v.path=b?m.split(b):[m]}else v.comparator=m;return this.$_addRule(v)},validate(m,{state:g,error:v,schema:b},{comparator:_,options:E},{comparator:C,path:T}){const D={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},M=C||l,A=E.ignoreUndefined;for(let I=0;I<m.length;++I){const P=T?u(m[I],T):m[I],U=C?D.custom:D[typeof P];if(a(U,"Failed to find unique map container for type",typeof P),U instanceof Map){const K=U.entries();let L;for(;!(L=K.next()).done;)if(M(L.value[0],P)){const F=g.localize([...g.path,I],[m,...g.ancestors]),$={pos:I,value:m[I],dupePos:L.value[1],dupeValue:m[L.value[1]]};return T&&($.path=_),v("array.unique",$,F)}U.set(P,I)}else{if((!A||P!==void 0)&&U[P]!==void 0){const K={pos:I,value:m[I],dupePos:U[P],dupeValue:m[U[P]]};return T&&(K.path=_),v("array.unique",K,g.localize([...g.path,I],[m,...g.ancestors]))}U[P]=I}}return m},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(m,g)=>new Set(m)}},rebuild(m){m.$_terms._inclusions=[],m.$_terms._exclusions=[],m.$_terms._requireds=[];for(const g of m.$_terms.items)p.validateSingle(g,m),g._flags.presence==="required"?m.$_terms._requireds.push(g):g._flags.presence==="forbidden"?m.$_terms._exclusions.push(g):m.$_terms._inclusions.push(g);for(const g of m.$_terms.ordered)p.validateSingle(g,m)},manifest:{build:(m,g)=>(g.items&&(m=m.items(...g.items)),g.ordered&&(m=m.ordered(...g.ordered)),m)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),p.fillMissedErrors=function(m,g,v,b,_,E){const C=[];let T=0;for(const D of v){const M=D._flags.label;M?C.push(M):++T}C.length?T?g.push(m.$_createError("array.includesRequiredBoth",b,{knownMisses:C,unknownMisses:T},_,E)):g.push(m.$_createError("array.includesRequiredKnowns",b,{knownMisses:C},_,E)):g.push(m.$_createError("array.includesRequiredUnknowns",b,{unknownMisses:T},_,E))},p.fillOrderedErrors=function(m,g,v,b,_,E){const C=[];for(const T of v)T._flags.presence==="required"&&C.push(T);C.length&&p.fillMissedErrors(m,g,C,b,_,E)},p.fillDefault=function(m,g,v,b){const _=[];let E=!0;for(let C=m.length-1;C>=0;--C){const T=m[C],D=[g,...v.ancestors],M=T.$_validate(void 0,v.localize(v.path,D,T),b).value;if(E){if(M===void 0)continue;E=!1}_.unshift(M)}_.length&&g.push(..._)},p.fastSplice=function(m,g){let v=g;for(;v<m.length;)m[v++]=m[v];--m.length},p.validateSingle=function(m,g){(m.type==="array"||m._flags._arrayItems)&&(a(!g._flags.single,"Cannot specify array item with single rule enabled"),g.$_setFlag("_arrayItems",!0,{clone:!1}))},p.sort=function(m,g,v,b,_){const E=v.order==="ascending"?1:-1,C=-1*E,T=E,D=(M,A)=>{let I=p.compare(M,A,C,T);if(I!==null||(v.by&&(M=v.by.resolve(M,b,_),A=v.by.resolve(A,b,_)),I=p.compare(M,A,C,T),I!==null))return I;const P=typeof M;if(P!==typeof A)throw m.$_createError("array.sort.mismatching",g,null,b,_);if(P!=="number"&&P!=="string")throw m.$_createError("array.sort.unsupported",g,{type:P},b,_);return P==="number"?(M-A)*E:M<A?C:T};try{return{value:g.slice().sort(D)}}catch(M){return{errors:M}}},p.compare=function(m,g,v,b){return m===g?0:m===void 0?1:g===void 0?-1:m===null?b:g===null?v:null}},4937:(n,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c=o(2036),h={isBool:function(d){return typeof d=="boolean"}};n.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(d,{schema:p}){if(typeof d!="boolean"){if(typeof d=="string"){const m=p._flags.sensitive?d:d.toLowerCase();d=m==="true"||m!=="false"&&d}return typeof d!="boolean"&&(d=p.$_terms.truthy&&p.$_terms.truthy.has(d,null,null,!p._flags.sensitive)||(!p.$_terms.falsy||!p.$_terms.falsy.has(d,null,null,!p._flags.sensitive))&&d),{value:d}}},validate(d,{error:p}){if(typeof d!="boolean")return{value:d,errors:p("boolean.base")}},rules:{truthy:{method(...d){u.verifyFlat(d,"truthy");const p=this.clone();p.$_terms.truthy=p.$_terms.truthy||new c;for(let m=0;m<d.length;++m){const g=d[m];a(g!==void 0,"Cannot call truthy with undefined"),p.$_terms.truthy.add(g)}return p}},falsy:{method(...d){u.verifyFlat(d,"falsy");const p=this.clone();p.$_terms.falsy=p.$_terms.falsy||new c;for(let m=0;m<d.length;++m){const g=d[m];a(g!==void 0,"Cannot call falsy with undefined"),p.$_terms.falsy.add(g)}return p}},sensitive:{method(d=!0){return this.$_setFlag("sensitive",d)}}},cast:{number:{from:h.isBool,to:(d,p)=>d?1:0},string:{from:h.isBool,to:(d,p)=>d?"true":"false"}},manifest:{build:(d,p)=>(p.truthy&&(d=d.truthy(...p.truthy)),p.falsy&&(d=d.falsy(...p.falsy)),d)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(n,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c=o(3328),h={isDate:function(d){return d instanceof Date}};n.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(d,{schema:p})=>({value:h.parse(d,p._flags.format)||d})},validate(d,{schema:p,error:m,prefs:g}){if(d instanceof Date&&!isNaN(d.getTime()))return;const v=p._flags.format;return g.convert&&v&&typeof d=="string"?{value:d,errors:m("date.format",{format:v})}:{value:d,errors:m("date.base")}},rules:{compare:{method:!1,validate(d,p,{date:m},{name:g,operator:v,args:b}){const _=m==="now"?Date.now():m.getTime();return u.compare(d.getTime(),_,v)?d:p.error("date."+g,{limit:b.date,value:d})},args:[{name:"date",ref:!0,normalize:d=>d==="now"?d:h.parse(d),assert:d=>d!==null,message:"must have a valid date format"}]},format:{method(d){return a(["iso","javascript","unix"].includes(d),"Unknown date format",d),this.$_setFlag("format",d)}},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{date:d},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{date:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{date:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{date:d},operator:">="})}},timestamp:{method(d="javascript"){return a(["javascript","unix"].includes(d),'"type" must be one of "javascript, unix"'),this.format(d)}}},cast:{number:{from:h.isDate,to:(d,p)=>d.getTime()},string:{from:h.isDate,to:(d,{prefs:p})=>c.date(d,p)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(d,p){if(d instanceof Date)return d;if(typeof d!="string"&&(isNaN(d)||!isFinite(d))||/^\s*$/.test(d))return null;if(p==="iso")return u.isIsoDate(d)?h.date(d.toString()):null;const m=d;if(typeof d=="string"&&/^[+-]?\d+(\.\d+)?$/.test(d)&&(d=parseFloat(d)),p){if(p==="javascript")return h.date(1*d);if(p==="unix")return h.date(1e3*d);if(typeof m=="string")return null}return h.date(d)},h.date=function(d){const p=new Date(d);return isNaN(p.getTime())?null:p}},390:(n,s,o)=>{const a=o(375),l=o(7824);n.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:u}})},validate:(u,c,{n:h})=>u.length===h?u:c.error("function.arity",{n:h})},class:{method(){return this.$_addRule("class")},validate:(u,c)=>/^\s*class\s/.test(u.toString())?u:c.error("function.class",{value:u})},minArity:{method(u){return a(Number.isSafeInteger(u)&&u>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:u}})},validate:(u,c,{n:h})=>u.length>=h?u:c.error("function.minArity",{n:h})},maxArity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:u}})},validate:(u,c,{n:h})=>u.length<=h?u:c.error("function.maxArity",{n:h})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(n,s,o)=>{const a=o(978),l=o(375),u=o(8571),c=o(3652),h=o(8068),d=o(8160),p=o(3292),m=o(6354),g=o(6133),v=o(3328),b={renameDefaults:{alias:!1,multiple:!1,override:!1}};n.exports=h.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(_,E)=>_.keys(E),validate(_,{schema:E,error:C,state:T,prefs:D}){if(!_||typeof _!==E.$_property("typeof")||Array.isArray(_))return{value:_,errors:C("object.base",{type:E.$_property("typeof")})};if(!(E.$_terms.renames||E.$_terms.dependencies||E.$_terms.keys||E.$_terms.patterns||E.$_terms.externals))return;_=b.clone(_,D);const M=[];if(E.$_terms.renames&&!b.rename(E,_,T,D,M))return{value:_,errors:M};if(!E.$_terms.keys&&!E.$_terms.patterns&&!E.$_terms.dependencies)return{value:_,errors:M};const A=new Set(Object.keys(_));if(E.$_terms.keys){const I=[_,...T.ancestors];for(const P of E.$_terms.keys){const U=P.key,K=_[U];A.delete(U);const L=T.localize([...T.path,U],I,P),F=P.schema.$_validate(K,L,D);if(F.errors){if(D.abortEarly)return{value:_,errors:F.errors};F.value!==void 0&&(_[U]=F.value),M.push(...F.errors)}else P.schema._flags.result==="strip"||F.value===void 0&&K!==void 0?delete _[U]:F.value!==void 0&&(_[U]=F.value)}}if(A.size||E._flags._hasPatternMatch){const I=b.unknown(E,_,A,M,T,D);if(I)return I}if(E.$_terms.dependencies)for(const I of E.$_terms.dependencies){if(I.key!==null&&b.isPresent(I.options)(I.key.resolve(_,T,D,null,{shadow:!1}))===!1)continue;const P=b.dependencies[I.rel](E,I,_,T,D);if(P){const U=E.$_createError(P.code,_,P.context,T,D);if(D.abortEarly)return{value:_,errors:U};M.push(U)}}return{value:_,errors:M}},rules:{and:{method(..._){return d.verifyFlat(_,"and"),b.dependency(this,"and",null,_)}},append:{method(_){return _==null||Object.keys(_).length===0?this:this.keys(_)}},assert:{method(_,E,C){v.isTemplate(_)||(_=p.ref(_)),l(C===void 0||typeof C=="string","Message must be a string"),E=this.$_compile(E,{appendPath:!0});const T=this.$_addRule({name:"assert",args:{subject:_,schema:E,message:C}});return T.$_mutateRegister(_),T.$_mutateRegister(E),T},validate(_,{error:E,prefs:C,state:T},{subject:D,schema:M,message:A}){const I=D.resolve(_,T,C),P=g.isRef(D)?D.absolute(T):[];return M.$_match(I,T.localize(P,[_,...T.ancestors],M),C)?_:E("object.assert",{subject:D,message:A})},args:["subject","schema","message"],multi:!0},instance:{method(_,E){return l(typeof _=="function","constructor must be a function"),E=E||_.name,this.$_addRule({name:"instance",args:{constructor:_,name:E}})},validate:(_,E,{constructor:C,name:T})=>_ instanceof C?_:E.error("object.instance",{type:T,value:_}),args:["constructor","name"]},keys:{method(_){l(_===void 0||typeof _=="object","Object schema must be a valid object"),l(!d.isSchema(_),"Object schema cannot be a joi schema");const E=this.clone();if(_)if(Object.keys(_).length){E.$_terms.keys=E.$_terms.keys?E.$_terms.keys.filter(C=>!_.hasOwnProperty(C.key)):new b.Keys;for(const C in _)d.tryWithPath(()=>E.$_terms.keys.push({key:C,schema:this.$_compile(_[C])}),C)}else E.$_terms.keys=new b.Keys;else E.$_terms.keys=null;return E.$_mutateRebuild()}},length:{method(_){return this.$_addRule({name:"length",args:{limit:_},operator:"="})},validate:(_,E,{limit:C},{name:T,operator:D,args:M})=>d.compare(Object.keys(_).length,C,D)?_:E.error("object."+T,{limit:M.limit,value:_}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(_){return this.$_addRule({name:"max",method:"length",args:{limit:_},operator:"<="})}},min:{method(_){return this.$_addRule({name:"min",method:"length",args:{limit:_},operator:">="})}},nand:{method(..._){return d.verifyFlat(_,"nand"),b.dependency(this,"nand",null,_)}},or:{method(..._){return d.verifyFlat(_,"or"),b.dependency(this,"or",null,_)}},oxor:{method(..._){return b.dependency(this,"oxor",null,_)}},pattern:{method(_,E,C={}){const T=_ instanceof RegExp;T||(_=this.$_compile(_,{appendPath:!0})),l(E!==void 0,"Invalid rule"),d.assertOptions(C,["fallthrough","matches"]),T&&l(!_.flags.includes("g")&&!_.flags.includes("y"),"pattern should not use global or sticky mode"),E=this.$_compile(E,{appendPath:!0});const D=this.clone();D.$_terms.patterns=D.$_terms.patterns||[];const M={[T?"regex":"schema"]:_,rule:E};return C.matches&&(M.matches=this.$_compile(C.matches),M.matches.type!=="array"&&(M.matches=M.matches.$_root.array().items(M.matches)),D.$_mutateRegister(M.matches),D.$_setFlag("_hasPatternMatch",!0,{clone:!1})),C.fallthrough&&(M.fallthrough=!0),D.$_terms.patterns.push(M),D.$_mutateRegister(E),D}},ref:{method(){return this.$_addRule("ref")},validate:(_,E)=>g.isRef(_)?_:E.error("object.refType",{value:_})},regex:{method(){return this.$_addRule("regex")},validate:(_,E)=>_ instanceof RegExp?_:E.error("object.regex",{value:_})},rename:{method(_,E,C={}){l(typeof _=="string"||_ instanceof RegExp,"Rename missing the from argument"),l(typeof E=="string"||E instanceof v,"Invalid rename to argument"),l(E!==_,"Cannot rename key to same name:",_),d.assertOptions(C,["alias","ignoreUndefined","override","multiple"]);const T=this.clone();T.$_terms.renames=T.$_terms.renames||[];for(const D of T.$_terms.renames)l(D.from!==_,"Cannot rename the same key multiple times");return E instanceof v&&T.$_mutateRegister(E),T.$_terms.renames.push({from:_,to:E,options:a(b.renameDefaults,C)}),T}},schema:{method(_="any"){return this.$_addRule({name:"schema",args:{type:_}})},validate:(_,E,{type:C})=>!d.isSchema(_)||C!=="any"&&_.type!==C?E.error("object.schema",{type:C}):_},unknown:{method(_){return this.$_setFlag("unknown",_!==!1)}},with:{method(_,E,C={}){return b.dependency(this,"with",_,E,C)}},without:{method(_,E,C={}){return b.dependency(this,"without",_,E,C)}},xor:{method(..._){return d.verifyFlat(_,"xor"),b.dependency(this,"xor",null,_)}}},overrides:{default(_,E){return _===void 0&&(_=d.symbols.deepDefault),this.$_parent("default",_,E)}},rebuild(_){if(_.$_terms.keys){const E=new c.Sorter;for(const C of _.$_terms.keys)d.tryWithPath(()=>E.add(C,{after:C.schema.$_rootReferences(),group:C.key}),C.key);_.$_terms.keys=new b.Keys(...E.nodes)}},manifest:{build(_,E){if(E.keys&&(_=_.keys(E.keys)),E.dependencies)for(const{rel:C,key:T=null,peers:D,options:M}of E.dependencies)_=b.dependency(_,C,T,D,M);if(E.patterns)for(const{regex:C,schema:T,rule:D,fallthrough:M,matches:A}of E.patterns)_=_.pattern(C||T,D,{fallthrough:M,matches:A});if(E.renames)for(const{from:C,to:T,options:D}of E.renames)_=_.rename(C,T,D);return _}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),b.clone=function(_,E){if(typeof _=="object"){if(E.nonEnumerables)return u(_,{shallow:!0});const T=Object.create(Object.getPrototypeOf(_));return Object.assign(T,_),T}const C=function(...T){return _.apply(this,T)};return C.prototype=u(_.prototype),Object.defineProperty(C,"name",{value:_.name,writable:!1}),Object.defineProperty(C,"length",{value:_.length,writable:!1}),Object.assign(C,_),C},b.dependency=function(_,E,C,T,D){l(C===null||typeof C=="string",E,"key must be a strings"),D||(D=T.length>1&&typeof T[T.length-1]=="object"?T.pop():{}),d.assertOptions(D,["separator","isPresent"]),T=[].concat(T);const M=d.default(D.separator,"."),A=[];for(const P of T)l(typeof P=="string",E,"peers must be strings"),A.push(p.ref(P,{separator:M,ancestor:0,prefix:!1}));C!==null&&(C=p.ref(C,{separator:M,ancestor:0,prefix:!1}));const I=_.clone();return I.$_terms.dependencies=I.$_terms.dependencies||[],I.$_terms.dependencies.push(new b.Dependency(E,C,A,T,D)),I},b.dependencies={and(_,E,C,T,D){const M=[],A=[],I=E.peers.length,P=b.isPresent(E.options);for(const U of E.peers)P(U.resolve(C,T,D,null,{shadow:!1}))===!1?M.push(U.key):A.push(U.key);if(M.length!==I&&A.length!==I)return{code:"object.and",context:{present:A,presentWithLabels:b.keysToLabels(_,A),missing:M,missingWithLabels:b.keysToLabels(_,M)}}},nand(_,E,C,T,D){const M=[],A=b.isPresent(E.options);for(const U of E.peers)A(U.resolve(C,T,D,null,{shadow:!1}))&&M.push(U.key);if(M.length!==E.peers.length)return;const I=E.paths[0],P=E.paths.slice(1);return{code:"object.nand",context:{main:I,mainWithLabel:b.keysToLabels(_,I),peers:P,peersWithLabels:b.keysToLabels(_,P)}}},or(_,E,C,T,D){const M=b.isPresent(E.options);for(const A of E.peers)if(M(A.resolve(C,T,D,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:E.paths,peersWithLabels:b.keysToLabels(_,E.paths)}}},oxor(_,E,C,T,D){const M=[],A=b.isPresent(E.options);for(const P of E.peers)A(P.resolve(C,T,D,null,{shadow:!1}))&&M.push(P.key);if(!M.length||M.length===1)return;const I={peers:E.paths,peersWithLabels:b.keysToLabels(_,E.paths)};return I.present=M,I.presentWithLabels=b.keysToLabels(_,M),{code:"object.oxor",context:I}},with(_,E,C,T,D){const M=b.isPresent(E.options);for(const A of E.peers)if(M(A.resolve(C,T,D,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:E.key.key,mainWithLabel:b.keysToLabels(_,E.key.key),peer:A.key,peerWithLabel:b.keysToLabels(_,A.key)}}},without(_,E,C,T,D){const M=b.isPresent(E.options);for(const A of E.peers)if(M(A.resolve(C,T,D,null,{shadow:!1})))return{code:"object.without",context:{main:E.key.key,mainWithLabel:b.keysToLabels(_,E.key.key),peer:A.key,peerWithLabel:b.keysToLabels(_,A.key)}}},xor(_,E,C,T,D){const M=[],A=b.isPresent(E.options);for(const P of E.peers)A(P.resolve(C,T,D,null,{shadow:!1}))&&M.push(P.key);if(M.length===1)return;const I={peers:E.paths,peersWithLabels:b.keysToLabels(_,E.paths)};return M.length===0?{code:"object.missing",context:I}:(I.present=M,I.presentWithLabels=b.keysToLabels(_,M),{code:"object.xor",context:I})}},b.keysToLabels=function(_,E){return Array.isArray(E)?E.map(C=>_.$_mapLabels(C)):_.$_mapLabels(E)},b.isPresent=function(_){return typeof _.isPresent=="function"?_.isPresent:E=>E!==void 0},b.rename=function(_,E,C,T,D){const M={};for(const A of _.$_terms.renames){const I=[],P=typeof A.from!="string";if(P)for(const U in E){if(E[U]===void 0&&A.options.ignoreUndefined||U===A.to)continue;const K=A.from.exec(U);K&&I.push({from:U,to:A.to,match:K})}else!Object.prototype.hasOwnProperty.call(E,A.from)||E[A.from]===void 0&&A.options.ignoreUndefined||I.push(A);for(const U of I){const K=U.from;let L=U.to;if(L instanceof v&&(L=L.render(E,C,T,U.match)),K!==L){if(!A.options.multiple&&M[L]&&(D.push(_.$_createError("object.rename.multiple",E,{from:K,to:L,pattern:P},C,T)),T.abortEarly)||Object.prototype.hasOwnProperty.call(E,L)&&!A.options.override&&!M[L]&&(D.push(_.$_createError("object.rename.override",E,{from:K,to:L,pattern:P},C,T)),T.abortEarly))return!1;E[K]===void 0?delete E[L]:E[L]=E[K],M[L]=!0,A.options.alias||delete E[K]}}}return!0},b.unknown=function(_,E,C,T,D,M){if(_.$_terms.patterns){let A=!1;const I=_.$_terms.patterns.map(U=>{if(U.matches)return A=!0,[]}),P=[E,...D.ancestors];for(const U of C){const K=E[U],L=[...D.path,U];for(let F=0;F<_.$_terms.patterns.length;++F){const $=_.$_terms.patterns[F];if($.regex){const J=$.regex.test(U);if(D.mainstay.tracer.debug(D,"rule",`pattern.${F}`,J?"pass":"error"),!J)continue}else if(!$.schema.$_match(U,D.nest($.schema,`pattern.${F}`),M))continue;C.delete(U);const H=D.localize(L,P,{schema:$.rule,key:U}),V=$.rule.$_validate(K,H,M);if(V.errors){if(M.abortEarly)return{value:E,errors:V.errors};T.push(...V.errors)}if($.matches&&I[F].push(U),E[U]=V.value,!$.fallthrough)break}}if(A)for(let U=0;U<I.length;++U){const K=I[U];if(!K)continue;const L=_.$_terms.patterns[U].matches,F=D.localize(D.path,P,L),$=L.$_validate(K,F,M);if($.errors){const H=m.details($.errors,{override:!1});H.matches=K;const V=_.$_createError("object.pattern.match",E,H,D,M);if(M.abortEarly)return{value:E,errors:V};T.push(V)}}}if(C.size&&(_.$_terms.keys||_.$_terms.patterns)){if(M.stripUnknown&&!_._flags.unknown||M.skipFunctions){const A=!(!M.stripUnknown||M.stripUnknown!==!0&&!M.stripUnknown.objects);for(const I of C)A?(delete E[I],C.delete(I)):typeof E[I]=="function"&&C.delete(I)}if(!d.default(_._flags.unknown,M.allowUnknown))for(const A of C){const I=D.localize([...D.path,A],[]),P=_.$_createError("object.unknown",E[A],{child:A},I,M,{flags:!1});if(M.abortEarly)return{value:E,errors:P};T.push(P)}}},b.Dependency=class{constructor(_,E,C,T,D){this.rel=_,this.key=E,this.peers=C,this.paths=T,this.options=D}describe(){const _={rel:this.rel,peers:this.paths};return this.key!==null&&(_.key=this.key.key),this.peers[0].separator!=="."&&(_.options={..._.options,separator:this.peers[0].separator}),this.options.isPresent&&(_.options={..._.options,isPresent:this.options.isPresent}),_}},b.Keys=class extends Array{concat(_){const E=this.slice(),C=new Map;for(let T=0;T<E.length;++T)C.set(E[T].key,T);for(const T of _){const D=T.key,M=C.get(D);M!==void 0?E[M]={key:D,schema:E[M].schema.concat(T.schema)}:E.push(T)}return E}}},8785:(n,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c=o(3292),h=o(6354),d={};n.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(p,m)=>p.ref(m),validate(p,{schema:m,state:g,prefs:v}){a(m.$_terms.link,"Uninitialized link schema");const b=d.generate(m,p,g,v),_=m.$_terms.link[0].ref;return b.$_validate(p,g.nest(b,`link:${_.display}:${b.type}`),v)},generate:(p,m,g,v)=>d.generate(p,m,g,v),rules:{ref:{method(p){a(!this.$_terms.link,"Cannot reinitialize schema"),p=c.ref(p),a(p.type==="value"||p.type==="local","Invalid reference type:",p.type),a(p.type==="local"||p.ancestor==="root"||p.ancestor>0,"Link cannot reference itself");const m=this.clone();return m.$_terms.link=[{ref:p}],m}},relative:{method(p=!0){return this.$_setFlag("relative",p)}}},overrides:{concat(p){a(this.$_terms.link,"Uninitialized link schema"),a(u.isSchema(p),"Invalid schema object"),a(p.type!=="link","Cannot merge type link with another link");const m=this.clone();return m.$_terms.whens||(m.$_terms.whens=[]),m.$_terms.whens.push({concat:p}),m.$_mutateRebuild()}},manifest:{build:(p,m)=>(a(m.link,"Invalid link description missing link"),p.ref(m.link))}}),d.generate=function(p,m,g,v){let b=g.mainstay.links.get(p);if(b)return b._generate(m,g,v).schema;const _=p.$_terms.link[0].ref,{perspective:E,path:C}=d.perspective(_,g);d.assert(E,"which is outside of schema boundaries",_,p,g,v);try{b=C.length?E.$_reach(C):E}catch{d.assert(!1,"to non-existing schema",_,p,g,v)}return d.assert(b.type!=="link","which is another link",_,p,g,v),p._flags.relative||g.mainstay.links.set(p,b),b._generate(m,g,v).schema},d.perspective=function(p,m){if(p.type==="local"){for(const{schema:g,key:v}of m.schemas){if((g._flags.id||v)===p.path[0])return{perspective:g,path:p.path.slice(1)};if(g.$_terms.shared){for(const b of g.$_terms.shared)if(b._flags.id===p.path[0])return{perspective:b,path:p.path.slice(1)}}}return{perspective:null,path:null}}return p.ancestor==="root"?{perspective:m.schemas[m.schemas.length-1].schema,path:p.path}:{perspective:m.schemas[p.ancestor]&&m.schemas[p.ancestor].schema,path:p.path}},d.assert=function(p,m,g,v,b,_){p||a(!1,`"${h.label(v._flags,b,_)}" contains link reference "${g.display}" ${m}`)}},3832:(n,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(h){const d=h.toString(),p=d.indexOf("."),m=d.indexOf("e");return(p<0?0:(m<0?d.length:m)-p-1)+(m<0?0:Math.max(0,-parseInt(d.slice(m+1))))}};n.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(h,{schema:d,error:p}){if(!h.match(c.numberRx))return;h=h.trim();const m={value:parseFloat(h)};if(m.value===0&&(m.value=0),!d._flags.unsafe)if(h.match(/e/i)){if(c.extractSignificantDigits(h)!==c.extractSignificantDigits(String(m.value)))return m.errors=p("number.unsafe"),m}else{const g=m.value.toString();if(g.match(/e/i))return m;if(g!==c.normalizeDecimal(h))return m.errors=p("number.unsafe"),m}return m}},validate(h,{schema:d,error:p,prefs:m}){if(h===1/0||h===-1/0)return{value:h,errors:p("number.infinity")};if(!u.isNumber(h))return{value:h,errors:p("number.base")};const g={value:h};if(m.convert){const v=d.$_getRule("precision");if(v){const b=Math.pow(10,v.args.limit);g.value=Math.round(g.value*b)/b}}return g.value===0&&(g.value=0),!d._flags.unsafe&&(h>Number.MAX_SAFE_INTEGER||h<Number.MIN_SAFE_INTEGER)&&(g.errors=p("number.unsafe")),g},rules:{compare:{method:!1,validate:(h,d,{limit:p},{name:m,operator:g,args:v})=>u.compare(h,p,g)?h:d.error("number."+m,{limit:v.limit,value:h}),args:[{name:"limit",ref:!0,assert:u.isNumber,message:"must be a number"}]},greater:{method(h){return this.$_addRule({name:"greater",method:"compare",args:{limit:h},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(h,d)=>Math.trunc(h)-h==0?h:d.error("number.integer")},less:{method(h){return this.$_addRule({name:"less",method:"compare",args:{limit:h},operator:"<"})}},max:{method(h){return this.$_addRule({name:"max",method:"compare",args:{limit:h},operator:"<="})}},min:{method(h){return this.$_addRule({name:"min",method:"compare",args:{limit:h},operator:">="})}},multiple:{method(h){const d=typeof h=="number"?c.decimalPlaces(h):null,p=Math.pow(10,d);return this.$_addRule({name:"multiple",args:{base:h,baseDecimalPlace:d,pfactor:p}})},validate:(h,d,{base:p,baseDecimalPlace:m,pfactor:g},v)=>c.decimalPlaces(h)>m?d.error("number.multiple",{multiple:v.args.base,value:h}):Math.round(g*h)%Math.round(g*p)==0?h:d.error("number.multiple",{multiple:v.args.base,value:h}),args:[{name:"base",ref:!0,assert:h=>typeof h=="number"&&isFinite(h)&&h>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(h,d)=>Number.isSafeInteger(h)&&h>=0&&h<=65535?h:d.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(h){return a(Number.isSafeInteger(h),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:h}})},validate(h,d,{limit:p}){const m=h.toString().match(c.precisionRx);return Math.max((m[1]?m[1].length:0)-(m[2]?parseInt(m[2],10):0),0)<=p?h:d.error("number.precision",{limit:p,value:h})},convert:!0},sign:{method(h){return a(["negative","positive"].includes(h),"Invalid sign",h),this.$_addRule({name:"sign",args:{sign:h}})},validate:(h,d,{sign:p})=>p==="negative"&&h<0||p==="positive"&&h>0?h:d.error(`number.${p}`)},unsafe:{method(h=!0){return a(typeof h=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",h)}}},cast:{string:{from:h=>typeof h=="number",to:(h,d)=>h.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),c.extractSignificantDigits=function(h){return h.replace(c.exponentialPartRegex,"").replace(c.dotRegex,"").replace(c.trailingZerosRegex,"").replace(c.leadingSignAndZerosRegex,"")},c.normalizeDecimal=function(h){return(h=h.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&h.endsWith("0")&&(h=h.replace(/0+$/,"")),h==="-0"?"0":h}},8966:(n,s,o)=>{const a=o(7824);n.exports=a.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,u)=>new Map(Object.entries(l))}}})},7417:(n,s,o)=>{const a=o(375),l=o(5380),u=o(1745),c=o(9959),h=o(6064),d=o(9926),p=o(5752),m=o(8068),g=o(8160),v={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:c.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};n.exports=m.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(b,{schema:_,state:E,prefs:C}){const T=_.$_getRule("normalize");T&&(b=b.normalize(T.args.form));const D=_.$_getRule("case");D&&(b=D.args.direction==="upper"?b.toLocaleUpperCase():b.toLocaleLowerCase());const M=_.$_getRule("trim");if(M&&M.args.enabled&&(b=b.trim()),_.$_terms.replacements)for(const I of _.$_terms.replacements)b=b.replace(I.pattern,I.replacement);const A=_.$_getRule("hex");if(A&&A.args.options.byteAligned&&b.length%2!=0&&(b=`0${b}`),_.$_getRule("isoDate")){const I=v.isoDate(b);I&&(b=I)}if(_._flags.truncate){const I=_.$_getRule("max");if(I){let P=I.args.limit;if(g.isResolvable(P)&&(P=P.resolve(b,E,C),!g.limit(P)))return{value:b,errors:_.$_createError("any.ref",P,{ref:I.args.limit,arg:"limit",reason:"must be a positive integer"},E,C)};b=b.slice(0,P)}}return{value:b}}},validate(b,{schema:_,error:E}){if(typeof b!="string")return{value:b,errors:E("string.base")};if(b===""){const C=_.$_getRule("min");return C&&C.args.limit===0?void 0:{value:b,errors:E("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(b,_)=>/^[a-zA-Z0-9]+$/.test(b)?b:_.error("string.alphanum")},base64:{method(b={}){return g.assertOptions(b,["paddingRequired","urlSafe"]),b={urlSafe:!1,paddingRequired:!0,...b},a(typeof b.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof b.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:b}})},validate:(b,_,{options:E})=>v.base64Regex[E.paddingRequired][E.urlSafe].test(b)?b:_.error("string.base64")},case:{method(b){return a(["lower","upper"].includes(b),"Invalid case:",b),this.$_addRule({name:"case",args:{direction:b}})},validate:(b,_,{direction:E})=>E==="lower"&&b===b.toLocaleLowerCase()||E==="upper"&&b===b.toLocaleUpperCase()?b:_.error(`string.${E}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(b,_){let E=b.length,C=0,T=1;for(;E--;){const D=b.charAt(E)*T;C+=D-9*(D>9),T^=3}return C>0&&C%10==0?b:_.error("string.creditCard")}},dataUri:{method(b={}){return g.assertOptions(b,["paddingRequired"]),b={paddingRequired:!0,...b},a(typeof b.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:b}})},validate(b,_,{options:E}){const C=b.match(v.dataUriRegex);return C&&(!C[2]||C[2]!=="base64"||v.base64Regex[E.paddingRequired].false.test(C[3]))?b:_.error("string.dataUri")}},domain:{method(b){b&&g.assertOptions(b,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const _=v.addressOptions(b);return this.$_addRule({name:"domain",args:{options:b},address:_})},validate:(b,_,E,{address:C})=>l.isValid(b,C)?b:_.error("string.domain")},email:{method(b={}){g.assertOptions(b,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(b.multiple===void 0||typeof b.multiple=="boolean","multiple option must be an boolean");const _=v.addressOptions(b),E=new RegExp(`\\s*[${b.separator?h(b.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:b},regex:E,address:_})},validate(b,_,{options:E},{regex:C,address:T}){const D=E.multiple?b.split(C):[b],M=[];for(const A of D)u.isValid(A,T)||M.push(A);return M.length?_.error("string.email",{value:b,invalids:M}):b}},guid:{alias:"uuid",method(b={}){g.assertOptions(b,["version","separator"]);let _="";if(b.version){const T=[].concat(b.version);a(T.length>=1,"version must have at least 1 valid version specified");const D=new Set;for(let M=0;M<T.length;++M){const A=T[M];a(typeof A=="string","version at position "+M+" must be a string");const I=v.guidVersions[A.toLowerCase()];a(I,"version at position "+M+" must be one of "+Object.keys(v.guidVersions).join(", ")),a(!D.has(I),"version at position "+M+" must not be a duplicate"),_+=I,D.add(I)}}a(v.guidSeparators.has(b.separator),'separator must be one of true, false, "-", or ":"');const E=b.separator===void 0?"[:-]?":b.separator===!0?"[:-]":b.separator===!1?"[]?":`\\${b.separator}`,C=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${E})[0-9A-F]{4}\\2?[${_||"0-9A-F"}][0-9A-F]{3}\\2?[${_?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:b},regex:C})},validate(b,_,E,{regex:C}){const T=C.exec(b);return T?v.guidBrackets[T[1]]!==T[T.length-1]?_.error("string.guid"):b:_.error("string.guid")}},hex:{method(b={}){return g.assertOptions(b,["byteAligned","prefix"]),b={byteAligned:!1,prefix:!1,...b},a(typeof b.byteAligned=="boolean","byteAligned must be boolean"),a(typeof b.prefix=="boolean"||b.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:b}})},validate:(b,_,{options:E})=>(E.prefix==="optional"?v.hexRegex.withOptionalPrefix:E.prefix===!0?v.hexRegex.withPrefix:v.hexRegex.withoutPrefix).test(b)?E.byteAligned&&b.length%2!=0?_.error("string.hexAlign"):b:_.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(b,_)=>l.isValid(b,{minDomainSegments:1})||v.ipRegex.test(b)?b:_.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(b={}){g.assertOptions(b,["cidr","version"]);const{cidr:_,versions:E,regex:C}=c.regex(b),T=b.version?E:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:_,version:T}},regex:C})},validate:(b,_,{options:E},{regex:C})=>C.test(b)?b:E.version?_.error("string.ipVersion",{value:b,cidr:E.cidr,version:E.version}):_.error("string.ip",{value:b,cidr:E.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(b,{error:_})=>v.isoDate(b)?b:_("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(b,_)=>v.isoDurationRegex.test(b)?b:_.error("string.isoDuration")},length:{method(b,_){return v.length(this,"length",b,"=",_)},validate(b,_,{limit:E,encoding:C},{name:T,operator:D,args:M}){const A=!C&&b.length;return g.compare(A,E,D)?b:_.error("string."+T,{limit:M.limit,value:b,encoding:C})},args:[{name:"limit",ref:!0,assert:g.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(b,_){return v.length(this,"max",b,"<=",_)},args:["limit","encoding"]},min:{method(b,_){return v.length(this,"min",b,">=",_)},args:["limit","encoding"]},normalize:{method(b="NFC"){return a(v.normalizationForms.includes(b),"normalization form must be one of "+v.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:b}})},validate:(b,{error:_},{form:E})=>b===b.normalize(E)?b:_("string.normalize",{value:b,form:E}),convert:!0},pattern:{alias:"regex",method(b,_={}){a(b instanceof RegExp,"regex must be a RegExp"),a(!b.flags.includes("g")&&!b.flags.includes("y"),"regex should not use global or sticky mode"),typeof _=="string"&&(_={name:_}),g.assertOptions(_,["invert","name"]);const E=["string.pattern",_.invert?".invert":"",_.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:b,options:_},errorCode:E})},validate:(b,_,{regex:E,options:C},{errorCode:T})=>E.test(b)^C.invert?b:_.error(T,{name:C.name,regex:E,value:b}),args:["regex","options"],multi:!0},replace:{method(b,_){typeof b=="string"&&(b=new RegExp(h(b),"g")),a(b instanceof RegExp,"pattern must be a RegExp"),a(typeof _=="string","replacement must be a String");const E=this.clone();return E.$_terms.replacements||(E.$_terms.replacements=[]),E.$_terms.replacements.push({pattern:b,replacement:_}),E}},token:{method(){return this.$_addRule("token")},validate:(b,_)=>/^\w+$/.test(b)?b:_.error("string.token")},trim:{method(b=!0){return a(typeof b=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:b}})},validate:(b,_,{enabled:E})=>E&&b!==b.trim()?_.error("string.trim"):b,convert:!0},truncate:{method(b=!0){return a(typeof b=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",b)}},uppercase:{method(){return this.case("upper")}},uri:{method(b={}){g.assertOptions(b,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),b.domain&&g.assertOptions(b.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:_,scheme:E}=p.regex(b),C=b.domain?v.addressOptions(b.domain):null;return this.$_addRule({name:"uri",args:{options:b},regex:_,domain:C,scheme:E})},validate(b,_,{options:E},{regex:C,domain:T,scheme:D}){if(["http:/","https:/"].includes(b))return _.error("string.uri");let M=C.exec(b);if(!M&&_.prefs.convert&&E.encodeUri){const A=encodeURI(b);M=C.exec(A),M&&(b=A)}if(M){const A=M[1]||M[2];return!T||E.allowRelative&&!A||l.isValid(A,T)?b:_.error("string.domain",{value:A})}return E.relativeOnly?_.error("string.uriRelativeOnly"):E.scheme?_.error("string.uriCustomScheme",{scheme:D,value:b}):_.error("string.uri")}}},manifest:{build(b,_){if(_.replacements)for(const{pattern:E,replacement:C}of _.replacements)b=b.replace(E,C);return b}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),v.addressOptions=function(b){if(!b)return v.tlds||b;if(a(b.minDomainSegments===void 0||Number.isSafeInteger(b.minDomainSegments)&&b.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(b.maxDomainSegments===void 0||Number.isSafeInteger(b.maxDomainSegments)&&b.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),b.tlds===!1)return b;if(b.tlds===!0||b.tlds===void 0)return a(v.tlds,"Built-in TLD list disabled"),Object.assign({},b,v.tlds);a(typeof b.tlds=="object","tlds must be true, false, or an object");const _=b.tlds.deny;if(_)return Array.isArray(_)&&(b=Object.assign({},b,{tlds:{deny:new Set(_)}})),a(b.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!b.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),v.validateTlds(b.tlds.deny,"tlds.deny"),b;const E=b.tlds.allow;return E?E===!0?(a(v.tlds,"Built-in TLD list disabled"),Object.assign({},b,v.tlds)):(Array.isArray(E)&&(b=Object.assign({},b,{tlds:{allow:new Set(E)}})),a(b.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),v.validateTlds(b.tlds.allow,"tlds.allow"),b):b},v.validateTlds=function(b,_){for(const E of b)a(l.isValid(E,{minDomainSegments:1,maxDomainSegments:1}),`${_} must contain valid top level domain names`)},v.isoDate=function(b){if(!g.isIsoDate(b))return null;/.*T.*[+-]\d\d$/.test(b)&&(b+="00");const _=new Date(b);return isNaN(_.getTime())?null:_.toISOString()},v.length=function(b,_,E,C,T){return a(!T||!1,"Invalid encoding:",T),b.$_addRule({name:_,method:"length",args:{limit:E,encoding:T},operator:C})}},8826:(n,s,o)=>{const a=o(375),l=o(8068),u={};u.Map=class extends Map{slice(){return new u.Map(this)}},n.exports=l.extend({type:"symbol",terms:{map:{init:new u.Map}},coerce:{method(c,{schema:h,error:d}){const p=h.$_terms.map.get(c);return p&&(c=p),h._flags.only&&typeof c!="symbol"?{value:c,errors:d("symbol.map",{map:h.$_terms.map})}:{value:c}}},validate(c,{error:h}){if(typeof c!="symbol")return{value:c,errors:h("symbol.base")}},rules:{map:{method(c){c&&!c[Symbol.iterator]&&typeof c=="object"&&(c=Object.entries(c)),a(c&&c[Symbol.iterator],"Iterable must be an iterable or object");const h=this.clone(),d=[];for(const p of c){a(p&&p[Symbol.iterator],"Entry must be an iterable");const[m,g]=p;a(typeof m!="object"&&typeof m!="function"&&typeof m!="symbol","Key must not be of type object, function, or Symbol"),a(typeof g=="symbol","Value must be a Symbol"),h.$_terms.map.set(m,g),d.push(g)}return h.valid(...d)}}},manifest:{build:(c,h)=>(h.map&&(c=c.map(h.map)),c)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(n,s,o)=>{const a=o(375),l=o(8571),u=o(738),c=o(9621),h=o(8160),d=o(6354),p=o(493),m={result:Symbol("result")};s.entry=function(g,v,b){let _=h.defaults;b&&(a(b.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(b.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),_=h.preferences(h.defaults,b));const E=m.entry(g,v,_);a(!E.mainstay.externals.length,"Schema with external rules must use validateAsync()");const C={value:E.value};return E.error&&(C.error=E.error),E.mainstay.warnings.length&&(C.warning=d.details(E.mainstay.warnings)),E.mainstay.debug&&(C.debug=E.mainstay.debug),E.mainstay.artifacts&&(C.artifacts=E.mainstay.artifacts),C},s.entryAsync=async function(g,v,b){let _=h.defaults;b&&(_=h.preferences(h.defaults,b));const E=m.entry(g,v,_),C=E.mainstay;if(E.error)throw C.debug&&(E.error.debug=C.debug),E.error;if(C.externals.length){let D=E.value;const M=[];for(const A of C.externals){const I=A.state.path,P=A.schema.type==="link"?C.links.get(A.schema):null;let U,K,L=D;const F=I.length?[D]:[],$=I.length?c(g,I):g;if(I.length){U=I[I.length-1];let H=D;for(const V of I.slice(0,-1))H=H[V],F.unshift(H);K=F[0],L=K[U]}try{const H=(J,ee)=>(P||A.schema).$_createError(J,L,ee,A.state,_),V=await A.method(L,{schema:A.schema,linked:P,state:A.state,prefs:b,original:$,error:H,errorsArray:m.errorsArray,warn:(J,ee)=>C.warnings.push((P||A.schema).$_createError(J,L,ee,A.state,_)),message:(J,ee)=>(P||A.schema).$_createError("external",L,ee,A.state,_,{messages:J})});if(V===void 0||V===L)continue;if(V instanceof d.Report){if(C.tracer.log(A.schema,A.state,"rule","external","error"),M.push(V),_.abortEarly)break;continue}if(Array.isArray(V)&&V[h.symbols.errors]){if(C.tracer.log(A.schema,A.state,"rule","external","error"),M.push(...V),_.abortEarly)break;continue}K?(C.tracer.value(A.state,"rule",L,V,"external"),K[U]=V):(C.tracer.value(A.state,"rule",D,V,"external"),D=V)}catch(H){throw _.errors.label&&(H.message+=` (${A.label})`),H}}if(E.value=D,M.length)throw E.error=d.process(M,g,_),C.debug&&(E.error.debug=C.debug),E.error}if(!_.warnings&&!_.debug&&!_.artifacts)return E.value;const T={value:E.value};return C.warnings.length&&(T.warning=d.details(C.warnings)),C.debug&&(T.debug=C.debug),C.artifacts&&(T.artifacts=C.artifacts),T},m.Mainstay=class{constructor(g,v,b){this.externals=[],this.warnings=[],this.tracer=g,this.debug=v,this.links=b,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const g=this._snapshots.pop();this.externals=g.externals,this.warnings=g.warnings}commit(){this._snapshots.pop()}},m.entry=function(g,v,b){const{tracer:_,cleanup:E}=m.tracer(v,b),C=b.debug?[]:null,T=v._ids._schemaChain?new Map:null,D=new m.Mainstay(_,C,T),M=v._ids._schemaChain?[{schema:v}]:null,A=new p([],[],{mainstay:D,schemas:M}),I=s.validate(g,v,A,b);E&&v.$_root.untrace();const P=d.process(I.errors,g,b);return{value:I.value,error:P,mainstay:D}},m.tracer=function(g,v){return g.$_root._tracer?{tracer:g.$_root._tracer._register(g)}:v.debug?(a(g.$_root.trace,"Debug mode not supported"),{tracer:g.$_root.trace()._register(g),cleanup:!0}):{tracer:m.ignore}},s.validate=function(g,v,b,_,E={}){if(v.$_terms.whens&&(v=v._generate(g,b,_).schema),v._preferences&&(_=m.prefs(v,_)),v._cache&&_.cache){const P=v._cache.get(g);if(b.mainstay.tracer.debug(b,"validate","cached",!!P),P)return P}const C=(P,U,K)=>v.$_createError(P,g,U,K||b,_),T={original:g,prefs:_,schema:v,state:b,error:C,errorsArray:m.errorsArray,warn:(P,U,K)=>b.mainstay.warnings.push(C(P,U,K)),message:(P,U)=>v.$_createError("custom",g,U,b,_,{messages:P})};b.mainstay.tracer.entry(v,b);const D=v._definition;if(D.prepare&&g!==void 0&&_.convert){const P=D.prepare(g,T);if(P){if(b.mainstay.tracer.value(b,"prepare",g,P.value),P.errors)return m.finalize(P.value,[].concat(P.errors),T);g=P.value}}if(D.coerce&&g!==void 0&&_.convert&&(!D.coerce.from||D.coerce.from.includes(typeof g))){const P=D.coerce.method(g,T);if(P){if(b.mainstay.tracer.value(b,"coerced",g,P.value),P.errors)return m.finalize(P.value,[].concat(P.errors),T);g=P.value}}const M=v._flags.empty;M&&M.$_match(m.trim(g,v),b.nest(M),h.defaults)&&(b.mainstay.tracer.value(b,"empty",g,void 0),g=void 0);const A=E.presence||v._flags.presence||(v._flags._endedSwitch?null:_.presence);if(g===void 0){if(A==="forbidden")return m.finalize(g,null,T);if(A==="required")return m.finalize(g,[v.$_createError("any.required",g,null,b,_)],T);if(A==="optional"){if(v._flags.default!==h.symbols.deepDefault)return m.finalize(g,null,T);b.mainstay.tracer.value(b,"default",g,{}),g={}}}else if(A==="forbidden")return m.finalize(g,[v.$_createError("any.unknown",g,null,b,_)],T);const I=[];if(v._valids){const P=v._valids.get(g,b,_,v._flags.insensitive);if(P)return _.convert&&(b.mainstay.tracer.value(b,"valids",g,P.value),g=P.value),b.mainstay.tracer.filter(v,b,"valid",P),m.finalize(g,null,T);if(v._flags.only){const U=v.$_createError("any.only",g,{valids:v._valids.values({display:!0})},b,_);if(_.abortEarly)return m.finalize(g,[U],T);I.push(U)}}if(v._invalids){const P=v._invalids.get(g,b,_,v._flags.insensitive);if(P){b.mainstay.tracer.filter(v,b,"invalid",P);const U=v.$_createError("any.invalid",g,{invalids:v._invalids.values({display:!0})},b,_);if(_.abortEarly)return m.finalize(g,[U],T);I.push(U)}}if(D.validate){const P=D.validate(g,T);if(P&&(b.mainstay.tracer.value(b,"base",g,P.value),g=P.value,P.errors)){if(!Array.isArray(P.errors))return I.push(P.errors),m.finalize(g,I,T);if(P.errors.length)return I.push(...P.errors),m.finalize(g,I,T)}}return v._rules.length?m.rules(g,I,T):m.finalize(g,I,T)},m.rules=function(g,v,b){const{schema:_,state:E,prefs:C}=b;for(const T of _._rules){const D=_._definition.rules[T.method];if(D.convert&&C.convert){E.mainstay.tracer.log(_,E,"rule",T.name,"full");continue}let M,A=T.args;if(T._resolve.length){A=Object.assign({},A);for(const P of T._resolve){const U=D.argsByName.get(P),K=A[P].resolve(g,E,C),L=U.normalize?U.normalize(K):K,F=h.validateArg(L,null,U);if(F){M=_.$_createError("any.ref",K,{arg:P,ref:A[P],reason:F},E,C);break}A[P]=L}}M=M||D.validate(g,b,A,T);const I=m.rule(M,T);if(I.errors){if(E.mainstay.tracer.log(_,E,"rule",T.name,"error"),T.warn){E.mainstay.warnings.push(...I.errors);continue}if(C.abortEarly)return m.finalize(g,I.errors,b);v.push(...I.errors)}else E.mainstay.tracer.log(_,E,"rule",T.name,"pass"),E.mainstay.tracer.value(E,"rule",g,I.value,T.name),g=I.value}return m.finalize(g,v,b)},m.rule=function(g,v){return g instanceof d.Report?(m.error(g,v),{errors:[g],value:null}):Array.isArray(g)&&g[h.symbols.errors]?(g.forEach(b=>m.error(b,v)),{errors:g,value:null}):{errors:null,value:g}},m.error=function(g,v){return v.message&&g._setTemplate(v.message),g},m.finalize=function(g,v,b){v=v||[];const{schema:_,state:E,prefs:C}=b;if(v.length){const D=m.default("failover",void 0,v,b);D!==void 0&&(E.mainstay.tracer.value(E,"failover",g,D),g=D,v=[])}if(v.length&&_._flags.error)if(typeof _._flags.error=="function"){v=_._flags.error(v),Array.isArray(v)||(v=[v]);for(const D of v)a(D instanceof Error||D instanceof d.Report,"error() must return an Error object")}else v=[_._flags.error];if(g===void 0){const D=m.default("default",g,v,b);E.mainstay.tracer.value(E,"default",g,D),g=D}if(_._flags.cast&&g!==void 0){const D=_._definition.cast[_._flags.cast];if(D.from(g)){const M=D.to(g,b);E.mainstay.tracer.value(E,"cast",g,M,_._flags.cast),g=M}}if(_.$_terms.externals&&C.externals&&C._externals!==!1)for(const{method:D}of _.$_terms.externals)E.mainstay.externals.push({method:D,schema:_,state:E,label:d.label(_._flags,E,C)});const T={value:g,errors:v.length?v:null};return _._flags.result&&(T.value=_._flags.result==="strip"?void 0:b.original,E.mainstay.tracer.value(E,_._flags.result,g,T.value),E.shadow(g,_._flags.result)),_._cache&&C.cache!==!1&&!_._refs.length&&_._cache.set(b.original,T),g===void 0||T.errors||_._flags.artifact===void 0||(E.mainstay.artifacts=E.mainstay.artifacts||new Map,E.mainstay.artifacts.has(_._flags.artifact)||E.mainstay.artifacts.set(_._flags.artifact,[]),E.mainstay.artifacts.get(_._flags.artifact).push(E.path)),T},m.prefs=function(g,v){const b=v===h.defaults;return b&&g._preferences[h.symbols.prefs]?g._preferences[h.symbols.prefs]:(v=h.preferences(v,g._preferences),b&&(g._preferences[h.symbols.prefs]=v),v)},m.default=function(g,v,b,_){const{schema:E,state:C,prefs:T}=_,D=E._flags[g];if(T.noDefaults||D===void 0)return v;if(C.mainstay.tracer.log(E,C,"rule",g,"full"),!D)return D;if(typeof D=="function"){const M=D.length?[l(C.ancestors[0]),_]:[];try{return D(...M)}catch(A){return void b.push(E.$_createError(`any.${g}`,null,{error:A},C,T))}}return typeof D!="object"?D:D[h.symbols.literal]?D.literal:h.isResolvable(D)?D.resolve(v,C,T):l(D)},m.trim=function(g,v){if(typeof g!="string")return g;const b=v.$_getRule("trim");return b&&b.args.enabled?g.trim():g},m.ignore={active:!1,debug:u,entry:u,filter:u,log:u,resolve:u,value:u},m.errorsArray=function(){const g=[];return g[h.symbols.errors]=!0,g}},2036:(n,s,o)=>{const a=o(375),l=o(9474),u=o(8160),c={};n.exports=c.Values=class{constructor(h,d){this._values=new Set(h),this._refs=new Set(d),this._lowercase=c.lowercases(h),this._override=!1}get length(){return this._values.size+this._refs.size}add(h,d){u.isResolvable(h)?this._refs.has(h)||(this._refs.add(h),d&&d.register(h)):this.has(h,null,null,!1)||(this._values.add(h),typeof h=="string"&&this._lowercase.set(h.toLowerCase(),h))}static merge(h,d,p){if(h=h||new c.Values,d){if(d._override)return d.clone();for(const m of[...d._values,...d._refs])h.add(m)}if(p)for(const m of[...p._values,...p._refs])h.remove(m);return h.length?h:null}remove(h){u.isResolvable(h)?this._refs.delete(h):(this._values.delete(h),typeof h=="string"&&this._lowercase.delete(h.toLowerCase()))}has(h,d,p,m){return!!this.get(h,d,p,m)}get(h,d,p,m){if(!this.length)return!1;if(this._values.has(h))return{value:h};if(typeof h=="string"&&h&&m){const g=this._lowercase.get(h.toLowerCase());if(g)return{value:g}}if(!this._refs.size&&typeof h!="object")return!1;if(typeof h=="object"){for(const g of this._values)if(l(g,h))return{value:g}}if(d)for(const g of this._refs){const v=g.resolve(h,d,p,null,{in:!0});if(v===void 0)continue;const b=g.in&&typeof v=="object"?Array.isArray(v)?v:Object.keys(v):[v];for(const _ of b)if(typeof _==typeof h){if(m&&h&&typeof h=="string"){if(_.toLowerCase()===h.toLowerCase())return{value:_,ref:g}}else if(l(_,h))return{value:_,ref:g}}}return!1}override(){this._override=!0}values(h){if(h&&h.display){const d=[];for(const p of[...this._values,...this._refs])p!==void 0&&d.push(p);return d}return Array.from([...this._values,...this._refs])}clone(){const h=new c.Values(this._values,this._refs);return h._override=this._override,h}concat(h){a(!h._override,"Cannot concat override set of values");const d=new c.Values([...this._values,...h._values],[...this._refs,...h._refs]);return d._override=this._override,d}describe(){const h=[];this._override&&h.push({override:!0});for(const d of this._values.values())h.push(d&&typeof d=="object"?{value:d}:d);for(const d of this._refs.values())h.push(d.describe());return h}},c.Values.prototype[u.symbols.values]=!0,c.Values.prototype.slice=c.Values.prototype.clone,c.lowercases=function(h){const d=new Map;if(h)for(const p of h)typeof p=="string"&&d.set(p.toLowerCase(),p);return d}},978:(n,s,o)=>{const a=o(375),l=o(8571),u=o(1687),c=o(9621),h={};n.exports=function(d,p,m={}){if(a(d&&typeof d=="object","Invalid defaults value: must be an object"),a(!p||p===!0||typeof p=="object","Invalid source value: must be true, falsy or an object"),a(typeof m=="object","Invalid options: must be an object"),!p)return null;if(m.shallow)return h.applyToDefaultsWithShallow(d,p,m);const g=l(d);if(p===!0)return g;const v=m.nullOverride!==void 0&&m.nullOverride;return u(g,p,{nullOverride:v,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(d,p,m){const g=m.shallow;a(Array.isArray(g),"Invalid keys");const v=new Map,b=p===!0?null:new Set;for(let C of g){C=Array.isArray(C)?C:C.split(".");const T=c(d,C);T&&typeof T=="object"?v.set(T,b&&c(p,C)||T):b&&b.add(C)}const _=l(d,{},v);if(!b)return _;for(const C of b)h.reachCopy(_,p,C);const E=m.nullOverride!==void 0&&m.nullOverride;return u(_,p,{nullOverride:E,mergeArrays:!1})},h.reachCopy=function(d,p,m){for(const b of m){if(!(b in p))return;const _=p[b];if(typeof _!="object"||_===null)return;p=_}const g=p;let v=d;for(let b=0;b<m.length-1;++b){const _=m[b];typeof v[_]!="object"&&(v[_]={}),v=v[_]}v[m[m.length-1]]=g}},375:(n,s,o)=>{const a=o(7916);n.exports=function(l,...u){if(!l)throw u.length===1&&u[0]instanceof Error?u[0]:new a(u)}},8571:(n,s,o)=>{const a=o(9621),l=o(4277),u=o(7043),c={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};n.exports=c.clone=function(h,d={},p=null){if(typeof h!="object"||h===null)return h;let m=c.clone,g=p;if(d.shallow){if(d.shallow!==!0)return c.cloneWithShallow(h,d);m=E=>E}else if(g){const E=g.get(h);if(E)return E}else g=new Map;const v=l.getInternalProto(h);if(v===l.buffer)return!1;if(v===l.date)return new Date(h.getTime());if(v===l.regex)return new RegExp(h);const b=c.base(h,v,d);if(b===h)return h;if(g&&g.set(h,b),v===l.set)for(const E of h)b.add(m(E,d,g));else if(v===l.map)for(const[E,C]of h)b.set(E,m(C,d,g));const _=u.keys(h,d);for(const E of _){if(E==="__proto__")continue;if(v===l.array&&E==="length"){b.length=h.length;continue}const C=Object.getOwnPropertyDescriptor(h,E);C?C.get||C.set?Object.defineProperty(b,E,C):C.enumerable?b[E]=m(h[E],d,g):Object.defineProperty(b,E,{enumerable:!1,writable:!0,configurable:!0,value:m(h[E],d,g)}):Object.defineProperty(b,E,{enumerable:!0,writable:!0,configurable:!0,value:m(h[E],d,g)})}return b},c.cloneWithShallow=function(h,d){const p=d.shallow;(d=Object.assign({},d)).shallow=!1;const m=new Map;for(const g of p){const v=a(h,g);typeof v!="object"&&typeof v!="function"||m.set(v,v)}return c.clone(h,d,m)},c.base=function(h,d,p){if(p.prototype===!1)return c.needsProtoHack.has(d)?new d.constructor:d===l.array?[]:{};const m=Object.getPrototypeOf(h);if(m&&m.isImmutable)return h;if(d===l.array){const g=[];return m!==d&&Object.setPrototypeOf(g,m),g}if(c.needsProtoHack.has(d)){const g=new m.constructor;return m!==d&&Object.setPrototypeOf(g,m),g}return Object.create(m)}},9474:(n,s,o)=>{const a=o(4277),l={mismatched:null};n.exports=function(u,c,h){return h=Object.assign({prototype:!0},h),!!l.isDeepEqual(u,c,h,[])},l.isDeepEqual=function(u,c,h,d){if(u===c)return u!==0||1/u==1/c;const p=typeof u;if(p!==typeof c||u===null||c===null)return!1;if(p==="function"){if(!h.deepFunction||u.toString()!==c.toString())return!1}else if(p!=="object")return u!=u&&c!=c;const m=l.getSharedType(u,c,!!h.prototype);switch(m){case a.buffer:return!1;case a.promise:return u===c;case a.regex:return u.toString()===c.toString();case l.mismatched:return!1}for(let g=d.length-1;g>=0;--g)if(d[g].isSame(u,c))return!0;d.push(new l.SeenEntry(u,c));try{return!!l.isDeepEqualObj(m,u,c,h,d)}finally{d.pop()}},l.getSharedType=function(u,c,h){if(h)return Object.getPrototypeOf(u)!==Object.getPrototypeOf(c)?l.mismatched:a.getInternalProto(u);const d=a.getInternalProto(u);return d!==a.getInternalProto(c)?l.mismatched:d},l.valueOf=function(u){const c=u.valueOf;if(c===void 0)return u;try{return c.call(u)}catch(h){return h}},l.hasOwnEnumerableProperty=function(u,c){return Object.prototype.propertyIsEnumerable.call(u,c)},l.isSetSimpleEqual=function(u,c){for(const h of Set.prototype.values.call(u))if(!Set.prototype.has.call(c,h))return!1;return!0},l.isDeepEqualObj=function(u,c,h,d,p){const{isDeepEqual:m,valueOf:g,hasOwnEnumerableProperty:v}=l,{keys:b,getOwnPropertySymbols:_}=Object;if(u===a.array){if(!d.part){if(c.length!==h.length)return!1;for(let M=0;M<c.length;++M)if(!m(c[M],h[M],d,p))return!1;return!0}for(const M of c)for(const A of h)if(m(M,A,d,p))return!0}else if(u===a.set){if(c.size!==h.size)return!1;if(!l.isSetSimpleEqual(c,h)){const M=new Set(Set.prototype.values.call(h));for(const A of Set.prototype.values.call(c)){if(M.delete(A))continue;let I=!1;for(const P of M)if(m(A,P,d,p)){M.delete(P),I=!0;break}if(!I)return!1}}}else if(u===a.map){if(c.size!==h.size)return!1;for(const[M,A]of Map.prototype.entries.call(c))if(A===void 0&&!Map.prototype.has.call(h,M)||!m(A,Map.prototype.get.call(h,M),d,p))return!1}else if(u===a.error&&(c.name!==h.name||c.message!==h.message))return!1;const E=g(c),C=g(h);if((c!==E||h!==C)&&!m(E,C,d,p))return!1;const T=b(c);if(!d.part&&T.length!==b(h).length&&!d.skip)return!1;let D=0;for(const M of T)if(d.skip&&d.skip.includes(M))h[M]===void 0&&++D;else if(!v(h,M)||!m(c[M],h[M],d,p))return!1;if(!d.part&&T.length-D!==b(h).length)return!1;if(d.symbols!==!1){const M=_(c),A=new Set(_(h));for(const I of M){if(!d.skip||!d.skip.includes(I)){if(v(c,I)){if(!v(h,I)||!m(c[I],h[I],d,p))return!1}else if(v(h,I))return!1}A.delete(I)}for(const I of A)if(v(h,I))return!1}return!0},l.SeenEntry=class{constructor(u,c){this.obj=u,this.ref=c}isSame(u,c){return this.obj===u&&this.ref===c}}},7916:(n,s,o)=>{const a=o(8761);n.exports=class extends Error{constructor(l){super(l.filter(u=>u!=="").map(u=>typeof u=="string"?u:u instanceof Error?u.message:a(u)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,s.assert)}}},5277:n=>{const s={};n.exports=function(o){if(!o)return"";let a="";for(let l=0;l<o.length;++l){const u=o.charCodeAt(l);s.isSafe(u)?a+=o[l]:a+=s.escapeHtmlChar(u)}return a},s.escapeHtmlChar=function(o){return s.namedHtml.get(o)||(o>=256?"&#"+o+";":`&#x${o.toString(16).padStart(2,"0")};`)},s.isSafe=function(o){return s.safeCharCodes.has(o)},s.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),s.safeCharCodes=function(){const o=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&o.add(a);return o}()},6064:n=>{n.exports=function(s){return s.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:n=>{n.exports=function(){}},1687:(n,s,o)=>{const a=o(375),l=o(8571),u=o(7043),c={};n.exports=c.merge=function(h,d,p){if(a(h&&typeof h=="object","Invalid target value: must be an object"),a(d==null||typeof d=="object","Invalid source value: must be null, undefined, or an object"),!d)return h;if(p=Object.assign({nullOverride:!0,mergeArrays:!0},p),Array.isArray(d)){a(Array.isArray(h),"Cannot merge array onto an object"),p.mergeArrays||(h.length=0);for(let g=0;g<d.length;++g)h.push(l(d[g],{symbols:p.symbols}));return h}const m=u.keys(d,p);for(let g=0;g<m.length;++g){const v=m[g];if(v==="__proto__"||!Object.prototype.propertyIsEnumerable.call(d,v))continue;const b=d[v];if(b&&typeof b=="object"){if(h[v]===b)continue;!h[v]||typeof h[v]!="object"||Array.isArray(h[v])!==Array.isArray(b)||b instanceof Date||b instanceof RegExp?h[v]=l(b,{symbols:p.symbols}):c.merge(h[v],b,p)}else(b!=null||p.nullOverride)&&(h[v]=b)}return h}},9621:(n,s,o)=>{const a=o(375),l={};n.exports=function(u,c,h){if(c===!1||c==null)return u;typeof(h=h||{})=="string"&&(h={separator:h});const d=Array.isArray(c);a(!d||!h.separator,"Separator option is not valid for array-based chain");const p=d?c:c.split(h.separator||".");let m=u;for(let g=0;g<p.length;++g){let v=p[g];const b=h.iterables&&l.iterables(m);if(Array.isArray(m)||b==="set"){const _=Number(v);Number.isInteger(_)&&(v=_<0?m.length+_:_)}if(!m||typeof m=="function"&&h.functions===!1||!b&&m[v]===void 0){a(!h.strict||g+1===p.length,"Missing segment",v,"in reach path ",c),a(typeof m=="object"||h.functions===!0||typeof m!="function","Invalid segment",v,"in reach path ",c),m=h.default;break}m=b?b==="set"?[...m][v]:m.get(v):m[v]}return m},l.iterables=function(u){return u instanceof Set?"set":u instanceof Map?"map":void 0}},8761:n=>{n.exports=function(...s){try{return JSON.stringify(...s)}catch(o){return"[Cannot display object: "+o.message+"]"}}},4277:(n,s)=>{const o={};s=n.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},o.typeMap=new Map([["[object Error]",s.error],["[object Map]",s.map],["[object Promise]",s.promise],["[object Set]",s.set],["[object WeakMap]",s.weakMap],["[object WeakSet]",s.weakSet]]),s.getInternalProto=function(a){if(Array.isArray(a))return s.array;if(a instanceof Date)return s.date;if(a instanceof RegExp)return s.regex;if(a instanceof Error)return s.error;const l=Object.prototype.toString.call(a);return o.typeMap.get(l)||s.generic}},7043:(n,s)=>{s.keys=function(o,a={}){return a.symbols!==!1?Reflect.ownKeys(o):Object.getOwnPropertyNames(o)}},3652:(n,s,o)=>{const a=o(375),l={};s.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(u,c){const h=[].concat((c=c||{}).before||[]),d=[].concat(c.after||[]),p=c.group||"?",m=c.sort||0;a(!h.includes(p),`Item cannot come before itself: ${p}`),a(!h.includes("?"),"Item cannot come before unassociated items"),a(!d.includes(p),`Item cannot come after itself: ${p}`),a(!d.includes("?"),"Item cannot come after unassociated items"),Array.isArray(u)||(u=[u]);for(const g of u){const v={seq:this._items.length,sort:m,before:h,after:d,group:p,node:g};this._items.push(v)}if(!c.manual){const g=this._sort();a(g,"item",p!=="?"?`added into group ${p}`:"","created a dependencies error")}return this.nodes}merge(u){Array.isArray(u)||(u=[u]);for(const h of u)if(h)for(const d of h._items)this._items.push(Object.assign({},d));this._items.sort(l.mergeSort);for(let h=0;h<this._items.length;++h)this._items[h].seq=h;const c=this._sort();return a(c,"merge created a dependencies error"),this.nodes}sort(){const u=this._sort();return a(u,"sort created a dependencies error"),this.nodes}_sort(){const u={},c=Object.create(null),h=Object.create(null);for(const v of this._items){const b=v.seq,_=v.group;h[_]=h[_]||[],h[_].push(b),u[b]=v.before;for(const E of v.after)c[E]=c[E]||[],c[E].push(b)}for(const v in u){const b=[];for(const _ in u[v]){const E=u[v][_];h[E]=h[E]||[],b.push(...h[E])}u[v]=b}for(const v in c)if(h[v])for(const b of h[v])u[b].push(...c[v]);const d={};for(const v in u){const b=u[v];for(const _ of b)d[_]=d[_]||[],d[_].push(v)}const p={},m=[];for(let v=0;v<this._items.length;++v){let b=v;if(d[v]){b=null;for(let _=0;_<this._items.length;++_){if(p[_]===!0)continue;d[_]||(d[_]=[]);const E=d[_].length;let C=0;for(let T=0;T<E;++T)p[d[_][T]]&&++C;if(C===E){b=_;break}}}b!==null&&(p[b]=!0,m.push(b))}if(m.length!==this._items.length)return!1;const g={};for(const v of this._items)g[v.seq]=v;this._items=[],this.nodes=[];for(const v of m){const b=g[v];this.nodes.push(b.node),this._items.push(b)}return!0}},l.mergeSort=(u,c)=>u.sort===c.sort?0:u.sort<c.sort?-1:1},5380:(n,s,o)=>{const a=o(443),l=o(2178),u={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};s.analyze=function(c,h={}){if(!c)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof c!="string")throw new Error("Invalid input: domain must be a string");if(c.length>256)return l.code("DOMAIN_TOO_LONG");if(u.nonAsciiRx.test(c)){if(h.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");c=c.normalize("NFC")}if(u.domainControlRx.test(c))return l.code("DOMAIN_INVALID_CHARS");c=u.punycode(c),h.allowFullyQualified&&c[c.length-1]==="."&&(c=c.slice(0,-1));const d=h.minDomainSegments||u.minDomainSegments,p=c.split(".");if(p.length<d)return l.code("DOMAIN_SEGMENTS_COUNT");if(h.maxDomainSegments&&p.length>h.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const m=h.tlds;if(m){const g=p[p.length-1].toLowerCase();if(m.deny&&m.deny.has(g)||m.allow&&!m.allow.has(g))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let g=0;g<p.length;++g){const v=p[g];if(!v.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(v.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(g<p.length-1){if(!u.domainSegmentRx.test(v))return l.code("DOMAIN_INVALID_CHARS")}else if(!u.tldSegmentRx.test(v))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},s.isValid=function(c,h){return!s.analyze(c,h)},u.punycode=function(c){c.includes("%")&&(c=c.replace(/%/g,"%25"));try{return new u.URL(`http://${c}`).host}catch{return c}}},1745:(n,s,o)=>{const a=o(9848),l=o(5380),u=o(2178),c={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};s.analyze=function(h,d){return c.email(h,d)},s.isValid=function(h,d){return!c.email(h,d)},c.email=function(h,d={}){if(typeof h!="string")throw new Error("Invalid input: email must be a string");if(!h)return u.code("EMPTY_STRING");const p=!c.nonAsciiRx.test(h);if(!p){if(d.allowUnicode===!1)return u.code("FORBIDDEN_UNICODE");h=h.normalize("NFC")}const m=h.split("@");if(m.length!==2)return m.length>2?u.code("MULTIPLE_AT_CHAR"):u.code("MISSING_AT_CHAR");const[g,v]=m;if(!g)return u.code("EMPTY_LOCAL");if(!d.ignoreLength){if(h.length>254)return u.code("ADDRESS_TOO_LONG");if(c.encoder.encode(g).length>64)return u.code("LOCAL_TOO_LONG")}return c.local(g,p)||l.analyze(v,d)},c.local=function(h,d){const p=h.split(".");for(const m of p){if(!m.length)return u.code("EMPTY_LOCAL_SEGMENT");if(d){if(!c.atextRx.test(m))return u.code("INVALID_LOCAL_CHARS")}else for(const g of m){if(c.atextRx.test(g))continue;const v=c.binary(g);if(!c.atomRx.test(v))return u.code("INVALID_LOCAL_CHARS")}}},c.binary=function(h){return Array.from(c.encoder.encode(h)).map(d=>String.fromCharCode(d)).join("")},c.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,c.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(n,s)=>{s.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},s.code=function(o){return{code:o,error:s.codes[o]}}},9959:(n,s,o)=>{const a=o(375),l=o(5752);s.regex=function(u={}){a(u.cidr===void 0||typeof u.cidr=="string","options.cidr must be a string");const c=u.cidr?u.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(c),"options.cidr must be one of required, optional, forbidden"),a(u.version===void 0||typeof u.version=="string"||Array.isArray(u.version),"options.version must be a string or an array of string");let h=u.version||["ipv4","ipv6","ipvfuture"];Array.isArray(h)||(h=[h]),a(h.length>=1,"options.version must have at least 1 version specified");for(let m=0;m<h.length;++m)a(typeof h[m]=="string","options.version must only contain strings"),h[m]=h[m].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(h[m]),"options.version contains unknown version "+h[m]+" - must be one of ipv4, ipv6, ipvfuture");h=Array.from(new Set(h));const d=`(?:${h.map(m=>{if(c==="forbidden")return l.ip[m];const g=`\\/${m==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return c==="required"?`${l.ip[m]}${g}`:`${l.ip[m]}(?:${g})?`}).join("|")})`,p=new RegExp(`^${d}$`);return{cidr:c,versions:h,regex:p,raw:d}}},5752:(n,s,o)=>{const a=o(375),l=o(6064),u={generate:function(){const c={},h="\\dA-Fa-f",d="["+h+"]",p="\\w-\\.~",m="!\\$&'\\(\\)\\*\\+,;=",g="%"+h,v=p+g+m+":@",b="["+v+"]",_="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";c.ipv4address="(?:"+_+"\\.){3}"+_;const E=d+"{1,4}",C="(?:"+E+":"+E+"|"+c.ipv4address+")",T="(?:"+E+":){6}"+C,D="::(?:"+E+":){5}"+C,M="(?:"+E+")?::(?:"+E+":){4}"+C,A="(?:(?:"+E+":){0,1}"+E+")?::(?:"+E+":){3}"+C,I="(?:(?:"+E+":){0,2}"+E+")?::(?:"+E+":){2}"+C,P="(?:(?:"+E+":){0,3}"+E+")?::"+E+":"+C,U="(?:(?:"+E+":){0,4}"+E+")?::"+C,K="(?:(?:"+E+":){0,5}"+E+")?::"+E,L="(?:(?:"+E+":){0,6}"+E+")?::";c.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",c.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",c.ipv6address="(?:"+T+"|"+D+"|"+M+"|"+A+"|"+I+"|"+P+"|"+U+"|"+K+"|"+L+")",c.ipvFuture="v"+d+"+\\.["+p+m+":]+",c.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",c.schemeRegex=new RegExp(c.scheme);const F="["+p+g+m+":]*",$="["+p+g+m+"]{1,255}",H="(?:\\[(?:"+c.ipv6address+"|"+c.ipvFuture+")\\]|"+c.ipv4address+"|"+$+")",V="(?:"+F+"@)?"+H+"(?::\\d*)?",J="(?:"+F+"@)?("+H+")(?::\\d*)?",ee=b+"*",ie=b+"+",de="(?:\\/"+ee+")*",te="\\/(?:"+ie+de+")?",z=ie+de,ne="["+p+g+m+"@]+"+de,ve="(?:\\/\\/\\/"+ee+de+")";return c.hierPart="(?:(?:\\/\\/"+V+de+")|"+te+"|"+z+"|"+ve+")",c.hierPartCapture="(?:(?:\\/\\/"+J+de+")|"+te+"|"+z+")",c.relativeRef="(?:(?:\\/\\/"+V+de+")|"+te+"|"+ne+"|)",c.relativeRefCapture="(?:(?:\\/\\/"+J+de+")|"+te+"|"+ne+"|)",c.query="["+v+"\\/\\?]*(?=#|$)",c.queryWithSquareBrackets="["+v+"\\[\\]\\/\\?]*(?=#|$)",c.fragment="["+v+"\\/\\?]*",c}};u.rfc3986=u.generate(),s.ip={v4Cidr:u.rfc3986.ipv4Cidr,v6Cidr:u.rfc3986.ipv6Cidr,ipv4:u.rfc3986.ipv4address,ipv6:u.rfc3986.ipv6address,ipvfuture:u.rfc3986.ipvFuture},u.createRegex=function(c){const h=u.rfc3986,d="(?:\\?"+(c.allowQuerySquareBrackets?h.queryWithSquareBrackets:h.query)+")?(?:#"+h.fragment+")?",p=c.domain?h.relativeRefCapture:h.relativeRef;if(c.relativeOnly)return u.wrap(p+d);let m="";if(c.scheme){a(c.scheme instanceof RegExp||typeof c.scheme=="string"||Array.isArray(c.scheme),"scheme must be a RegExp, String, or Array");const b=[].concat(c.scheme);a(b.length>=1,"scheme must have at least 1 scheme specified");const _=[];for(let E=0;E<b.length;++E){const C=b[E];a(C instanceof RegExp||typeof C=="string","scheme at position "+E+" must be a RegExp or String"),C instanceof RegExp?_.push(C.source.toString()):(a(h.schemeRegex.test(C),"scheme at position "+E+" must be a valid scheme"),_.push(l(C)))}m=_.join("|")}const g="(?:"+(m?"(?:"+m+")":h.scheme)+":"+(c.domain?h.hierPartCapture:h.hierPart)+")",v=c.allowRelative?"(?:"+g+"|"+p+")":g;return u.wrap(v+d,m)},u.wrap=function(c,h){return{raw:c=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${c}`,regex:new RegExp(`^${c}$`),scheme:h}},u.uriRegex=u.createRegex({}),s.regex=function(c={}){return c.scheme||c.allowRelative||c.relativeOnly||c.allowQuerySquareBrackets||c.domain?u.createRegex(c):u.uriRegex}},1447:(n,s)=>{const o={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};s.Parser=class{constructor(a,l={}){if(!l[o.settings]&&l.constants)for(const u in l.constants){const c=l.constants[u];if(c!==null&&!["boolean","number","string"].includes(typeof c))throw new Error(`Formula constant ${u} contains invalid ${typeof c} value type`)}this.settings=l[o.settings]?l:Object.assign({[o.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(a)}_parse(a){let l=[],u="",c=0,h=!1;const d=m=>{if(c)throw new Error("Formula missing closing parenthesis");const g=l.length?l[l.length-1]:null;if(h||u||m){if(g&&g.type==="reference"&&m===")")return g.type="function",g.value=this._subFormula(u,g.value),void(u="");if(m===")"){const v=new s.Parser(u,this.settings);l.push({type:"segment",value:v})}else if(h){if(h==="]")return l.push({type:"reference",value:u}),void(u="");l.push({type:"literal",value:u})}else if(o.operatorCharacters.includes(u))g&&g.type==="operator"&&o.operators.includes(g.value+u)?g.value+=u:l.push({type:"operator",value:u});else if(u.match(o.numberRx))l.push({type:"constant",value:parseFloat(u)});else if(this.settings.constants[u]!==void 0)l.push({type:"constant",value:this.settings.constants[u]});else{if(!u.match(o.tokenRx))throw new Error(`Formula contains invalid token: ${u}`);l.push({type:"reference",value:u})}u=""}};for(const m of a)h?m===h?(d(),h=!1):u+=m:c?m==="("?(u+=m,++c):m===")"?(--c,c?u+=m:d(m)):u+=m:m in o.literals?h=o.literals[m]:m==="("?(d(),++c):o.operatorCharacters.includes(m)?(d(),u=m,d()):m!==" "?u+=m:d();d(),l=l.map((m,g)=>m.type!=="operator"||m.value!=="-"||g&&l[g-1].type!=="operator"?m:{type:"operator",value:"n"});let p=!1;for(const m of l){if(m.type==="operator"){if(o.operatorsPrefix.includes(m.value))continue;if(!p)throw new Error("Formula contains an operator in invalid position");if(!o.operators.includes(m.value))throw new Error(`Formula contains an unknown operator ${m.value}`)}else if(p)throw new Error("Formula missing expected operator");p=!p}if(!p)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(m=>{if(m.type==="operator")return o.operatorsPrefix.includes(m.value)?m:m.value;if(m.type!=="reference")return m.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(m.value))throw new Error(`Formula contains invalid reference ${m.value}`);return this.settings.reference?this.settings.reference(m.value):o.reference(m.value)})}_subFormula(a,l){const u=this.settings.functions[l];if(typeof u!="function")throw new Error(`Formula contains unknown function ${l}`);let c=[];if(a){let h="",d=0,p=!1;const m=()=>{if(!h)throw new Error(`Formula contains function ${l} with invalid arguments ${a}`);c.push(h),h=""};for(let g=0;g<a.length;++g){const v=a[g];p?(h+=v,v===p&&(p=!1)):v in o.literals&&!d?(h+=v,p=o.literals[v]):v!==","||d?(h+=v,v==="("?++d:v===")"&&--d):m()}m()}return c=c.map(h=>new s.Parser(h,this.settings)),function(h){const d=[];for(const p of c)d.push(p.evaluate(h));return u.call(h,...d)}}evaluate(a){const l=this._parts.slice();for(let u=l.length-2;u>=0;--u){const c=l[u];if(c&&c.type==="operator"){const h=l[u+1];l.splice(u+1,1);const d=o.evaluate(h,a);l[u]=o.single(c.value,d)}}return o.operatorsOrder.forEach(u=>{for(let c=1;c<l.length-1;)if(u.includes(l[c])){const h=l[c],d=o.evaluate(l[c-1],a),p=o.evaluate(l[c+1],a);l.splice(c,2);const m=o.calculate(h,d,p);l[c-1]=m===0?0:m}else c+=2}),o.evaluate(l[0],a)}},s.Parser.prototype[o.symbol]=!0,o.reference=function(a){return function(l){return l&&l[a]!==void 0?l[a]:null}},o.evaluate=function(a,l){return a===null?null:typeof a=="function"?a(l):a[o.symbol]?a.evaluate(l):a},o.single=function(a,l){if(a==="!")return!l;const u=-l;return u===0?0:u},o.calculate=function(a,l,u){if(a==="??")return o.exists(l)?l:u;if(typeof l=="string"||typeof u=="string"){if(a==="+")return(l=o.exists(l)?l:"")+(o.exists(u)?u:"")}else switch(a){case"^":return Math.pow(l,u);case"*":return l*u;case"/":return l/u;case"%":return l%u;case"+":return l+u;case"-":return l-u}switch(a){case"<":return l<u;case"<=":return l<=u;case">":return l>u;case">=":return l>=u;case"==":return l===u;case"!=":return l!==u;case"&&":return l&&u;case"||":return l||u}return null},o.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:n=>{n.exports=JSON.parse('{"version":"17.13.1"}')}},r={},function n(s){var o=r[s];if(o!==void 0)return o.exports;var a=r[s]={exports:{}};return t[s](a,a.exports,n),a.exports}(5107);var t,r})})(PCe);var u_t=PCe.exports;const Ln=$o(u_t),FCe={id:Ln.string().required()},t0e={...FCe,as:Ln.string().valid("img","video").required(),src:Ln.string().uri().required(),position:Ln.string().valid("center","left","right"),"data-parallax":Ln.boolean().required()},i0e={layers:Ln.array().items(Ln.object({type:Ln.string().required(),properties:Ln.object({id:Ln.string().required()}).unknown().required(),source:Ln.object({type:Ln.string().required()}).unknown().required()}).unknown().required())},XP={layers:Ln.alternatives().try(i0e.layers,Ln.array().items(Ln.object({type:Ln.string().valid("group","Group"),properties:Ln.object({id:Ln.string().required()}).unknown().required(),layers:i0e.layers}))).optional(),center:Ln.array().items(Ln.number()).min(2).max(2).optional(),zoom:Ln.number().optional()},NCe={config:Ln.object({...XP}).unknown().optional()},$Ce={"eox-map":Ln.object({...FCe,...XP,...NCe}).unknown()},c_t={hero:{img:Ln.object({...t0e}).unknown(),video:Ln.object({...t0e}).unknown()},tour:{"eox-map":$Ce["eox-map"],"section-step":Ln.object({...XP,...NCe}).unknown()}};function h_t(i,e){var n,s;let t=[];for(const o of Object.keys(i)){const a=i[o];if(a.as){const l=a.mode?(n=c_t[a.mode])==null?void 0:n[a.as]:$Ce[a.as];l&&((s=l.validate(a,{abortEarly:!1}).error)==null||s.details.forEach(c=>{t.push({ref:`#${o}`,message:c.message}),console.error(`#${o}`,c.message)}))}}const r=(e.shadowRoot||e).querySelector("eox-storytelling-editor");setTimeout(()=>r==null?void 0:r.updateErrors(t),300)}var R3={exports:{}};/*! @license DOMPurify 3.1.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.5/LICENSE */var r0e;function n0e(){return r0e||(r0e=1,function(i,e){(function(t,r){i.exports=r()})(Rn,function(){const{entries:t,setPrototypeOf:r,isFrozen:n,getPrototypeOf:s,getOwnPropertyDescriptor:o}=Object;let{freeze:a,seal:l,create:u}=Object,{apply:c,construct:h}=typeof Reflect<"u"&&Reflect;a||(a=function(pe){return pe}),l||(l=function(pe){return pe}),c||(c=function(pe,R,j){return pe.apply(R,j)}),h||(h=function(pe,R){return new pe(...R)});const d=A(Array.prototype.forEach),p=A(Array.prototype.pop),m=A(Array.prototype.push),g=A(String.prototype.toLowerCase),v=A(String.prototype.toString),b=A(String.prototype.match),_=A(String.prototype.replace),E=A(String.prototype.indexOf),C=A(String.prototype.trim),T=A(Object.prototype.hasOwnProperty),D=A(RegExp.prototype.test),M=I(TypeError);function A(se){return function(pe){for(var R=arguments.length,j=new Array(R>1?R-1:0),Z=1;Z<R;Z++)j[Z-1]=arguments[Z];return c(se,pe,j)}}function I(se){return function(){for(var pe=arguments.length,R=new Array(pe),j=0;j<pe;j++)R[j]=arguments[j];return h(se,R)}}function P(se,pe){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g;r&&r(se,null);let j=pe.length;for(;j--;){let Z=pe[j];if(typeof Z=="string"){const Q=R(Z);Q!==Z&&(n(pe)||(pe[j]=Q),Z=Q)}se[Z]=!0}return se}function U(se){for(let pe=0;pe<se.length;pe++)T(se,pe)||(se[pe]=null);return se}function K(se){const pe=u(null);for(const[R,j]of t(se))T(se,R)&&(Array.isArray(j)?pe[R]=U(j):j&&typeof j=="object"&&j.constructor===Object?pe[R]=K(j):pe[R]=j);return pe}function L(se,pe){for(;se!==null;){const j=o(se,pe);if(j){if(j.get)return A(j.get);if(typeof j.value=="function")return A(j.value)}se=s(se)}function R(){return null}return R}const F=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),H=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),V=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),J=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ee=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ie=a(["#text"]),de=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),te=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ne=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ve=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$e=l(/<%[\w\W]*|[\w\W]*%>/gm),Xe=l(/\${[\w\W]*}/gm),ot=l(/^data-[\-\w.\u00B7-\uFFFF]/),Be=l(/^aria-[\-\w]+$/),He=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),st=l(/^(?:\w+script|data):/i),xt=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kt=l(/^html$/i),Tt=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ei=Object.freeze({__proto__:null,MUSTACHE_EXPR:ve,ERB_EXPR:$e,TMPLIT_EXPR:Xe,DATA_ATTR:ot,ARIA_ATTR:Be,IS_ALLOWED_URI:He,IS_SCRIPT_OR_DATA:st,ATTR_WHITESPACE:xt,DOCTYPE_NAME:kt,CUSTOM_ELEMENT:Tt});const si={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},ur=function(){return typeof window>"u"?null:window},Ve=function(pe,R){if(typeof pe!="object"||typeof pe.createPolicy!="function")return null;let j=null;const Z="data-tt-policy-suffix";R&&R.hasAttribute(Z)&&(j=R.getAttribute(Z));const Q="dompurify"+(j?"#"+j:"");try{return pe.createPolicy(Q,{createHTML(ge){return ge},createScriptURL(ge){return ge}})}catch{return console.warn("TrustedTypes policy "+Q+" could not be created."),null}};function fe(){let se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ur();const pe=Rt=>fe(Rt);if(pe.version="3.1.5",pe.removed=[],!se||!se.document||se.document.nodeType!==si.document)return pe.isSupported=!1,pe;let{document:R}=se;const j=R,Z=j.currentScript,{DocumentFragment:Q,HTMLTemplateElement:ge,Node:be,Element:Ce,NodeFilter:G,NamedNodeMap:re=se.NamedNodeMap||se.MozNamedAttrMap,HTMLFormElement:he,DOMParser:ce,trustedTypes:Te}=se,Ae=Ce.prototype,Se=L(Ae,"cloneNode"),De=L(Ae,"nextSibling"),Oe=L(Ae,"childNodes"),Ge=L(Ae,"parentNode");if(typeof ge=="function"){const Rt=R.createElement("template");Rt.content&&Rt.content.ownerDocument&&(R=Rt.content.ownerDocument)}let et,ht="";const{implementation:Ut,createNodeIterator:gt,createDocumentFragment:qt,getElementsByTagName:Kt}=R,{importNode:It}=j;let Vt={};pe.isSupported=typeof t=="function"&&typeof Ge=="function"&&Ut&&Ut.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Yt,ERB_EXPR:Yi,TMPLIT_EXPR:vr,DATA_ATTR:Jr,ARIA_ATTR:Rr,IS_SCRIPT_OR_DATA:cr,ATTR_WHITESPACE:Jt,CUSTOM_ELEMENT:ir}=Ei;let{IS_ALLOWED_URI:Ir}=Ei,hi=null;const Fn=P({},[...F,...$,...H,...J,...ie]);let rr=null;const Nn=P({},[...de,...te,...z,...ne]);let nr=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$r=null,bo=null,ye=!0,ke=!0,rt=!1,Ze=!0,bt=!1,ti=!0,di=!1,vt=!1,Ke=!1,oi=!1,gi=!1,Ot=!1,jt=!0,Er=!1;const mn="user-content-";let ni=!0,qe=!1,dt={},Xi=null;const un=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Sr=null;const Or=P({},["audio","video","img","source","image","track"]);let gr=null;const Ft=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_n="http://www.w3.org/1998/Math/MathML",Kn="http://www.w3.org/2000/svg",xn="http://www.w3.org/1999/xhtml";let _o=xn,Ho=!1,xo=null;const hl=P({},[_n,Kn,xn],v);let xs=null;const Vo=["application/xhtml+xml","text/html"],ma="text/html";let Pr=null,wo=null;const jl=R.createElement("form"),js=function(X){return X instanceof RegExp||X instanceof Function},Ms=function(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(wo&&wo===X)){if((!X||typeof X!="object")&&(X={}),X=K(X),xs=Vo.indexOf(X.PARSER_MEDIA_TYPE)===-1?ma:X.PARSER_MEDIA_TYPE,Pr=xs==="application/xhtml+xml"?v:g,hi=T(X,"ALLOWED_TAGS")?P({},X.ALLOWED_TAGS,Pr):Fn,rr=T(X,"ALLOWED_ATTR")?P({},X.ALLOWED_ATTR,Pr):Nn,xo=T(X,"ALLOWED_NAMESPACES")?P({},X.ALLOWED_NAMESPACES,v):hl,gr=T(X,"ADD_URI_SAFE_ATTR")?P(K(Ft),X.ADD_URI_SAFE_ATTR,Pr):Ft,Sr=T(X,"ADD_DATA_URI_TAGS")?P(K(Or),X.ADD_DATA_URI_TAGS,Pr):Or,Xi=T(X,"FORBID_CONTENTS")?P({},X.FORBID_CONTENTS,Pr):un,$r=T(X,"FORBID_TAGS")?P({},X.FORBID_TAGS,Pr):{},bo=T(X,"FORBID_ATTR")?P({},X.FORBID_ATTR,Pr):{},dt=T(X,"USE_PROFILES")?X.USE_PROFILES:!1,ye=X.ALLOW_ARIA_ATTR!==!1,ke=X.ALLOW_DATA_ATTR!==!1,rt=X.ALLOW_UNKNOWN_PROTOCOLS||!1,Ze=X.ALLOW_SELF_CLOSE_IN_ATTR!==!1,bt=X.SAFE_FOR_TEMPLATES||!1,ti=X.SAFE_FOR_XML!==!1,di=X.WHOLE_DOCUMENT||!1,oi=X.RETURN_DOM||!1,gi=X.RETURN_DOM_FRAGMENT||!1,Ot=X.RETURN_TRUSTED_TYPE||!1,Ke=X.FORCE_BODY||!1,jt=X.SANITIZE_DOM!==!1,Er=X.SANITIZE_NAMED_PROPS||!1,ni=X.KEEP_CONTENT!==!1,qe=X.IN_PLACE||!1,Ir=X.ALLOWED_URI_REGEXP||He,_o=X.NAMESPACE||xn,nr=X.CUSTOM_ELEMENT_HANDLING||{},X.CUSTOM_ELEMENT_HANDLING&&js(X.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nr.tagNameCheck=X.CUSTOM_ELEMENT_HANDLING.tagNameCheck),X.CUSTOM_ELEMENT_HANDLING&&js(X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nr.attributeNameCheck=X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),X.CUSTOM_ELEMENT_HANDLING&&typeof X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nr.allowCustomizedBuiltInElements=X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bt&&(ke=!1),gi&&(oi=!0),dt&&(hi=P({},ie),rr=[],dt.html===!0&&(P(hi,F),P(rr,de)),dt.svg===!0&&(P(hi,$),P(rr,te),P(rr,ne)),dt.svgFilters===!0&&(P(hi,H),P(rr,te),P(rr,ne)),dt.mathMl===!0&&(P(hi,J),P(rr,z),P(rr,ne))),X.ADD_TAGS&&(hi===Fn&&(hi=K(hi)),P(hi,X.ADD_TAGS,Pr)),X.ADD_ATTR&&(rr===Nn&&(rr=K(rr)),P(rr,X.ADD_ATTR,Pr)),X.ADD_URI_SAFE_ATTR&&P(gr,X.ADD_URI_SAFE_ATTR,Pr),X.FORBID_CONTENTS&&(Xi===un&&(Xi=K(Xi)),P(Xi,X.FORBID_CONTENTS,Pr)),ni&&(hi["#text"]=!0),di&&P(hi,["html","head","body"]),hi.table&&(P(hi,["tbody"]),delete $r.tbody),X.TRUSTED_TYPES_POLICY){if(typeof X.TRUSTED_TYPES_POLICY.createHTML!="function")throw M('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof X.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw M('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');et=X.TRUSTED_TYPES_POLICY,ht=et.createHTML("")}else et===void 0&&(et=Ve(Te,Z)),et!==null&&typeof ht=="string"&&(ht=et.createHTML(""));a&&a(X),wo=X}},eo=P({},["mi","mo","mn","ms","mtext"]),zs=P({},["foreignobject","annotation-xml"]),Wo=P({},["title","style","font","a","script"]),dl=P({},[...$,...H,...V]),to=P({},[...J,...ee]),zl=function(X){let me=Ge(X);(!me||!me.tagName)&&(me={namespaceURI:_o,tagName:"template"});const Ne=g(X.tagName),yt=g(me.tagName);return xo[X.namespaceURI]?X.namespaceURI===Kn?me.namespaceURI===xn?Ne==="svg":me.namespaceURI===_n?Ne==="svg"&&(yt==="annotation-xml"||eo[yt]):!!dl[Ne]:X.namespaceURI===_n?me.namespaceURI===xn?Ne==="math":me.namespaceURI===Kn?Ne==="math"&&zs[yt]:!!to[Ne]:X.namespaceURI===xn?me.namespaceURI===Kn&&!zs[yt]||me.namespaceURI===_n&&!eo[yt]?!1:!to[Ne]&&(Wo[Ne]||!dl[Ne]):!!(xs==="application/xhtml+xml"&&xo[X.namespaceURI]):!1},Jn=function(X){m(pe.removed,{element:X});try{X.parentNode.removeChild(X)}catch{X.remove()}},Yn=function(X,me){try{m(pe.removed,{attribute:me.getAttributeNode(X),from:me})}catch{m(pe.removed,{attribute:null,from:me})}if(me.removeAttribute(X),X==="is"&&!rr[X])if(oi||gi)try{Jn(me)}catch{}else try{me.setAttribute(X,"")}catch{}},Eo=function(X){let me=null,Ne=null;if(Ke)X="<remove></remove>"+X;else{const Gt=b(X,/^[\r\n\t ]+/);Ne=Gt&&Gt[0]}xs==="application/xhtml+xml"&&_o===xn&&(X='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+X+"</body></html>");const yt=et?et.createHTML(X):X;if(_o===xn)try{me=new ce().parseFromString(yt,xs)}catch{}if(!me||!me.documentElement){me=Ut.createDocument(_o,"template",null);try{me.documentElement.innerHTML=Ho?ht:yt}catch{}}const pi=me.body||me.documentElement;return X&&Ne&&pi.insertBefore(R.createTextNode(Ne),pi.childNodes[0]||null),_o===xn?Kt.call(me,di?"html":"body")[0]:di?me.documentElement:pi},io=function(X){return gt.call(X.ownerDocument||X,X,G.SHOW_ELEMENT|G.SHOW_COMMENT|G.SHOW_TEXT|G.SHOW_PROCESSING_INSTRUCTION|G.SHOW_CDATA_SECTION,null)},Ma=function(X){return X instanceof he&&(typeof X.nodeName!="string"||typeof X.textContent!="string"||typeof X.removeChild!="function"||!(X.attributes instanceof re)||typeof X.removeAttribute!="function"||typeof X.setAttribute!="function"||typeof X.namespaceURI!="string"||typeof X.insertBefore!="function"||typeof X.hasChildNodes!="function")},fl=function(X){return typeof be=="function"&&X instanceof be},ls=function(X,me,Ne){Vt[X]&&d(Vt[X],yt=>{yt.call(pe,me,Ne,wo)})},pl=function(X){let me=null;if(ls("beforeSanitizeElements",X,null),Ma(X))return Jn(X),!0;const Ne=Pr(X.nodeName);if(ls("uponSanitizeElement",X,{tagName:Ne,allowedTags:hi}),X.hasChildNodes()&&!fl(X.firstElementChild)&&D(/<[/\w]/g,X.innerHTML)&&D(/<[/\w]/g,X.textContent)||X.nodeType===si.progressingInstruction||ti&&X.nodeType===si.comment&&D(/<[/\w]/g,X.data))return Jn(X),!0;if(!hi[Ne]||$r[Ne]){if(!$r[Ne]&&Qn(Ne)&&(nr.tagNameCheck instanceof RegExp&&D(nr.tagNameCheck,Ne)||nr.tagNameCheck instanceof Function&&nr.tagNameCheck(Ne)))return!1;if(ni&&!Xi[Ne]){const yt=Ge(X)||X.parentNode,pi=Oe(X)||X.childNodes;if(pi&&yt){const Gt=pi.length;for(let Fi=Gt-1;Fi>=0;--Fi){const hr=Se(pi[Fi],!0);hr.__removalCount=(X.__removalCount||0)+1,yt.insertBefore(hr,De(X))}}}return Jn(X),!0}return X instanceof Ce&&!zl(X)||(Ne==="noscript"||Ne==="noembed"||Ne==="noframes")&&D(/<\/no(script|embed|frames)/i,X.innerHTML)?(Jn(X),!0):(bt&&X.nodeType===si.text&&(me=X.textContent,d([Yt,Yi,vr],yt=>{me=_(me,yt," ")}),X.textContent!==me&&(m(pe.removed,{element:X.cloneNode()}),X.textContent=me)),ls("afterSanitizeElements",X,null),!1)},So=function(X,me,Ne){if(jt&&(me==="id"||me==="name")&&(Ne in R||Ne in jl))return!1;if(!(ke&&!bo[me]&&D(Jr,me))){if(!(ye&&D(Rr,me))){if(!rr[me]||bo[me]){if(!(Qn(X)&&(nr.tagNameCheck instanceof RegExp&&D(nr.tagNameCheck,X)||nr.tagNameCheck instanceof Function&&nr.tagNameCheck(X))&&(nr.attributeNameCheck instanceof RegExp&&D(nr.attributeNameCheck,me)||nr.attributeNameCheck instanceof Function&&nr.attributeNameCheck(me))||me==="is"&&nr.allowCustomizedBuiltInElements&&(nr.tagNameCheck instanceof RegExp&&D(nr.tagNameCheck,Ne)||nr.tagNameCheck instanceof Function&&nr.tagNameCheck(Ne))))return!1}else if(!gr[me]){if(!D(Ir,_(Ne,Jt,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&X!=="script"&&E(Ne,"data:")===0&&Sr[X])){if(!(rt&&!D(cr,_(Ne,Jt,"")))){if(Ne)return!1}}}}}}return!0},Qn=function(X){return X!=="annotation-xml"&&b(X,ir)},La=function(X){ls("beforeSanitizeAttributes",X,null);const{attributes:me}=X;if(!me)return;const Ne={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:rr};let yt=me.length;for(;yt--;){const pi=me[yt],{name:Gt,namespaceURI:Fi,value:hr}=pi,Br=Pr(Gt);let Si=Gt==="value"?hr:C(hr);if(Ne.attrName=Br,Ne.attrValue=Si,Ne.keepAttr=!0,Ne.forceKeepAttr=void 0,ls("uponSanitizeAttribute",X,Ne),Si=Ne.attrValue,Ne.forceKeepAttr||(Yn(Gt,X),!Ne.keepAttr))continue;if(!Ze&&D(/\/>/i,Si)){Yn(Gt,X);continue}if(ti&&D(/((--!?|])>)|<\/(style|title)/i,Si)){Yn(Gt,X);continue}bt&&d([Yt,Yi,vr],es=>{Si=_(Si,es," ")});const $n=Pr(X.nodeName);if(So($n,Br,Si)){if(Er&&(Br==="id"||Br==="name")&&(Yn(Gt,X),Si=mn+Si),et&&typeof Te=="object"&&typeof Te.getAttributeType=="function"&&!Fi)switch(Te.getAttributeType($n,Br)){case"TrustedHTML":{Si=et.createHTML(Si);break}case"TrustedScriptURL":{Si=et.createScriptURL(Si);break}}try{Fi?X.setAttributeNS(Fi,Gt,Si):X.setAttribute(Gt,Si),Ma(X)?Jn(X):p(pe.removed)}catch{}}}ls("afterSanitizeAttributes",X,null)},Ul=function Rt(X){let me=null;const Ne=io(X);for(ls("beforeSanitizeShadowDOM",X,null);me=Ne.nextNode();)ls("uponSanitizeShadowNode",me,null),!pl(me)&&(me.content instanceof Q&&Rt(me.content),La(me));ls("afterSanitizeShadowDOM",X,null)};return pe.sanitize=function(Rt){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Ne=null,yt=null,pi=null;if(Ho=!Rt,Ho&&(Rt="<!-->"),typeof Rt!="string"&&!fl(Rt))if(typeof Rt.toString=="function"){if(Rt=Rt.toString(),typeof Rt!="string")throw M("dirty is not a string, aborting")}else throw M("toString is not a function");if(!pe.isSupported)return Rt;if(vt||Ms(X),pe.removed=[],typeof Rt=="string"&&(qe=!1),qe){if(Rt.nodeName){const hr=Pr(Rt.nodeName);if(!hi[hr]||$r[hr])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(Rt instanceof be)me=Eo("<!---->"),Ne=me.ownerDocument.importNode(Rt,!0),Ne.nodeType===si.element&&Ne.nodeName==="BODY"||Ne.nodeName==="HTML"?me=Ne:me.appendChild(Ne);else{if(!oi&&!bt&&!di&&Rt.indexOf("<")===-1)return et&&Ot?et.createHTML(Rt):Rt;if(me=Eo(Rt),!me)return oi?null:Ot?ht:""}me&&Ke&&Jn(me.firstChild);const Gt=io(qe?Rt:me);for(;yt=Gt.nextNode();)pl(yt)||(yt.content instanceof Q&&Ul(yt.content),La(yt));if(qe)return Rt;if(oi){if(gi)for(pi=qt.call(me.ownerDocument);me.firstChild;)pi.appendChild(me.firstChild);else pi=me;return(rr.shadowroot||rr.shadowrootmode)&&(pi=It.call(j,pi,!0)),pi}let Fi=di?me.outerHTML:me.innerHTML;return di&&hi["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&D(kt,me.ownerDocument.doctype.name)&&(Fi="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+Fi),bt&&d([Yt,Yi,vr],hr=>{Fi=_(Fi,hr," ")}),et&&Ot?et.createHTML(Fi):Fi},pe.setConfig=function(){let Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ms(Rt),vt=!0},pe.clearConfig=function(){wo=null,vt=!1},pe.isValidAttribute=function(Rt,X,me){wo||Ms({});const Ne=Pr(Rt),yt=Pr(X);return So(Ne,yt,me)},pe.addHook=function(Rt,X){typeof X=="function"&&(Vt[Rt]=Vt[Rt]||[],m(Vt[Rt],X))},pe.removeHook=function(Rt){if(Vt[Rt])return p(Vt[Rt])},pe.removeHooks=function(Rt){Vt[Rt]&&(Vt[Rt]=[])},pe.removeAllHooks=function(){Vt={}},pe}var oe=fe();return oe})}(R3)),R3.exports}var d_t=window.DOMPurify||(window.DOMPurify=n0e().default||n0e());const f_t=$o(d_t);function BCe(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function p_t(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const m_t=[["","ss"],["","Ss"],["","ae"],["","Ae"],["","oe"],["","Oe"],["","ue"],["","Ue"],["","A"],["","A"],["","A"],["","A"],["","Ae"],["","A"],["","AE"],["","C"],["","E"],["","E"],["","E"],["","E"],["","I"],["","I"],["","I"],["","I"],["","D"],["","N"],["","O"],["","O"],["","O"],["","O"],["","Oe"],["","O"],["","O"],["","U"],["","U"],["","U"],["","Ue"],["","U"],["","Y"],["","TH"],["","ss"],["","a"],["","a"],["","a"],["","a"],["","ae"],["","a"],["","ae"],["","c"],["","e"],["","e"],["","e"],["","e"],["","i"],["","i"],["","i"],["","i"],["","d"],["","n"],["","o"],["","o"],["","o"],["","o"],["","oe"],["","o"],["","o"],["","u"],["","u"],["","u"],["","ue"],["","u"],["","y"],["","th"],["","y"],["","SS"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","a"],["","A"],["","D"],["","d"],["","i"],["","I"],["","u"],["","U"],["","o"],["","O"],["","u"],["","U"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","p"],["","z"],["","c"],["","d"],["","d"],["","r"],["","r"],["","z"],["","g"],["","x"],["","g"],["","n"],["","e"],["","e"],["","ai"],["","t"],["","d"],["","r"],["","n"],["","h"],["","h"],["","e"],["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"],["","a"],["","A"],["","s"],["","S"],["","t"],["","T"],["","t"],["","T"],["","s"],["","S"],["","c"],["","C"],["","g"],["","G"],["","i"],["","I"],["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"],["","a"],["","b"],["","g"],["","d"],["","e"],["","v"],["","z"],["","t"],["","i"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","zh"],["","r"],["","s"],["","t"],["","u"],["","ph"],["","q"],["","gh"],["","k"],["","sh"],["","ch"],["","ts"],["","dz"],["","ts"],["","tch"],["","kh"],["","j"],["","h"],["","c"],["","d"],["","e"],["","n"],["","r"],["","s"],["","t"],["","u"],["","z"],["","C"],["","D"],["","E"],["","N"],["","R"],["","S"],["","T"],["","U"],["","Z"],["","h"],["","sh"],["","n"],["","r"],["","b"],["","lh"],["","k"],["","a"],["","v"],["","m"],["","f"],["","dh"],["","th"],["","l"],["","g"],["","gn"],["","s"],["","d"],["","z"],["","t"],["","y"],["","p"],["","j"],["","ch"],["","tt"],["","hh"],["","kh"],["","th"],["","z"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","a"],["","gh"],["","q"],["","w"],["","a"],["","aa"],["","i"],["","ee"],["","u"],["","oo"],["","e"],["","ey"],["","o"],["","oa"],["",""],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"],["","a"],["","e"],["","g"],["","i"],["","k"],["","l"],["","n"],["","u"],["","A"],["","E"],["","G"],["","I"],["","K"],["","L"],["","N"],["","U"],["","c"],["","s"],["","z"],["","C"],["","S"],["","Z"],["","a"],["","c"],["","e"],["","e"],["","i"],["","s"],["","u"],["","u"],["","z"],["","A"],["","C"],["","E"],["","E"],["","I"],["","S"],["","U"],["","U"],["","Kj"],["","kj"],["","Lj"],["","lj"],["","Nj"],["","nj"],["","Ts"],["","ts"],["","a"],["","c"],["","e"],["","l"],["","n"],["","s"],["","z"],["","z"],["","A"],["","C"],["","E"],["","L"],["","N"],["","S"],["","Z"],["","Z"],["","Ye"],["","I"],["","Yi"],["","G"],["","ye"],["","i"],["","yi"],["","g"],["","IJ"],["","ij"],["","c"],["","Y"],["","b"],["","t"],["","Bo"],["","B"],["","CE"],["","C"],["","Cr"],["","F"],["","m"],["","N"],["","Pt"],["","Rs"],["","W"],["","s"],["","E"],["","K"],["","T"],["","Dp"],["","S"],["","P"],["","G"],["","A"],["","S"],["","C"],["","tt"],["","S"],["","T"],["","R"],["","L"],["","P"],["","B"],["","$"],["","c"],["","Y"],["","W"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","C"],["","D"],["","g"],["","J"],["","K"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","f"],["","h"],["","i"],["","j"],["","h"],["","l"],["","m"],["","n"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","l"],["","j"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","x"],["","PS"],["","O"],["","D"],["","a"],["","b"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","d"],["","E"],["","TH"],["","K"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","av"],["","g"],["","d"],["","e"],["","z"],["","i"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","F"],["","f"],["","(a)"],["","(b)"],["","(c)"],["","(d)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","(A)"],["","(B)"],["","(C)"],["","(D)"],["","(E)"],["","(F)"],["","(G)"],["","(H)"],["","(I)"],["","(J)"],["","(K)"],["","(L)"],["","(N)"],["","(O)"],["","(P)"],["","(Q)"],["","(R)"],["","(S)"],["","(T)"],["","(U)"],["","(V)"],["","(W)"],["","(X)"],["","(Y)"],["","(Z)"],["","(a)"],["","(b)"],["","(b)"],["","(c)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","C"],["","c"],["","G"],["","g"],["","H"],["","h"],["","Z"],["","z"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1."],["","2."],["","3."],["","4."],["","5."],["","6."],["","7."],["","8."],["","9."],["","10."],["","11."],["","12."],["","13."],["","14."],["","15."],["","16."],["","17."],["","18."],["","19."],["","20."],["","0"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","0"],["","&"],["","&"],["","&"],["","&"],["","&"],["","&"],["",'"'],["",'"'],["",'"'],["","?!"],["","?!"],["","?!"],["","?!"],["","/"],["","\\"],["","AR"],["","V"],["","V"],["","VR"],["","VF"],["","2"],["","5"],["","f"],["","W"],["","U"],["","V"],["","T"],["","V"],["","MB"],["","VB"],["","3B"],["","3B"],["","100"],["","BACK"],["","END"],["","ON!"],["","SOON"],["","TOP"],["","18"],["","abc"],["","ABCD"],["","abcd"],["","1234"],["","T&@%"],["#","#"],["*","*"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["","10"],["","A"],["","B"],["","AB"],["","CL"],["","O"],["","P"],["","SOS"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"]],g_t=(i,e)=>{for(const[t,r]of e)i=i.replace(new RegExp(p_t(t),"g"),r);return i};function y_t(i,e){if(typeof i!="string")throw new TypeError(`Expected a string, got \`${typeof i}\``);e={customReplacements:[],...e};const t=new Map([...m_t,...e.customReplacements]);return i=i.normalize(),i=g_t(i,t),i=i.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),i}const v_t=[["&"," and "],[""," unicorn "],[""," love "]],b_t=i=>i.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),__t=(i,e)=>{const t=BCe(e);return i.replace(new RegExp(`${t}{2,}`,"g"),e).replace(new RegExp(`^${t}|${t}$`,"g"),"")},x_t=i=>{let e="a-z\\d";if(e+=i.lowercase?"":"A-Z",i.preserveCharacters.length>0)for(const t of i.preserveCharacters){if(t===i.separator)throw new Error(`The separator character \`${i.separator}\` cannot be included in preserved characters: ${i.preserveCharacters}`);e+=BCe(t)}return new RegExp(`[^${e}]+`,"g")};function w_t(i,e){if(typeof i!="string")throw new TypeError(`Expected a string, got \`${typeof i}\``);e={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...e};const t=e.preserveLeadingUnderscore&&i.startsWith("_"),r=e.preserveTrailingDash&&i.endsWith("-"),n=new Map([...v_t,...e.customReplacements]);i=y_t(i,{customReplacements:n}),e.decamelize&&(i=b_t(i));const s=x_t(e);return e.lowercase&&(i=i.toLowerCase()),i=i.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),i=i.replace(s,e.separator),i=i.replace(/\\/g,""),e.separator&&(i=__t(i,e.separator)),t&&(i=`_${i}`),r&&(i=`${i}-`),i}function E_t(i){i.core.ruler.push("curly_attributes",S_t)}function S_t(i){i.md.nav=[],i.md.attrs={keys:[],sections:{}},i.md.sections={};const e=i.tokens,t=[];let r;const n={len:0,contents:[],types:{}},s=[];let o=[],a=!1,l=0,u=!1,c=0;for(let h=0;h<e.length;h++){const d=e[h];if(d.tag==="p"){const{shouldContinue:m}=C_t(e,e[h+1]);if(m){h=h+2;continue}}if((jCe(d.type)||ACe[d.type])&&GCe(n,d),d.tag==="h1"||d.tag==="h2"){const m=A_t(h,e,o,a,l,u,c,i,n);a=m.sectionStart,u=m.sectionSteps,l=m.sectionStartIndex,c=m.sectionStepsIndex}if(d.tag==="h3"){const m=k_t(h,e,o,a,l,u,c,i,n);a=m.sectionStart,u=m.sectionSteps,l=m.sectionStartIndex,c=m.sectionStepsIndex}if(d.type==="html_block"){const m=d.content.match(TCe);if(!m){d.level=d.level+1,o.push(d);continue}r=UCe(n,m[1],m[2]),r&&R0(r,m[3])&&t.unshift(h)}d.type==="inline"&&(o=T_t(d,n,s,o,l,c,u)),d.level=d.level+1,o.push(d);const p=$u(n.last.attrs,"as");n.last.markup==="#"&&p1t.includes(p)&&(o=D_t(o,i,n),h++)}a&&(zCe(o,l),jL(o,l,i)),u&&jL(o,c,i),L_t(o,i.md),t.forEach(h=>e.splice(h,1)),i.tokens=o,i.md.nav=s||[]}function Kh(i,e,t,r,n,s=null){const o=new i.Token(n,e,t);return o.attrs=s,o.nesting=r,o}function jCe(i){return i.match(/_(open|start)$/)||i==="fence"||i==="code_block"}function C_t(i,e){const t=/\r\n|\r|\n/,r=/mode\s*=\s*(['"])fallback\1/g;let n=!1;if(r.test((e==null?void 0:e.content)||""))if(t.test(e.content)){const s=e.content.split(t);s.shift(),e.content=s.join(/\n/),e.children[0].type==="text"&&e.children.shift(),e.children.shift()}else n=!0;return{shouldContinue:n}}function T_t(i,e,t,r,n,s,o){let a;const l=[];if(i.children.forEach((u,c)=>{(jCe(u.type)||ACe[u.type]||u.type==="code_inline")&&GCe(e,u);const h=u.content.match(TCe);if(h){const d=UCe(e,h[1],h[2]);d&&R0(d,h[3])&&(l.unshift(c),a&&M_t(a,"content"))}u.type==="text"&&(a=u)}),e.last.tag==="h3"&&o&&s!==-1){const u=r[s];u.section=r[n].id,R0(u,e.last.attrStr)}if(e.last.tag==="h1"||e.last.tag==="h2"){const u=a&&a.content,c=$u(e.last.attrs,"id"),h=$u(e.last.attrs,"as"),d=$u(e.last.attrs,"mode")||"container",p=$u(e.last.attrs,"position")||"left",m=w_t(u||""),g=c||m,v=`section-${g}`;e.last.tag==="h2"&&u&&t.push({title:u,id:v});const b=r[n],_=r[r.length-1],E=`.${d} .${p}`;b.attrs.push(["id",v]),b.id=v,h&&(_.tag=h,_.type="html_open",_.as=h,_.section=v,i.type="html_inline",i.content="",i.children=null,R0(_,`${a?`title='${a.content}'`:""}${e.last.attrStr} #${g}`),b.mode=d,b.position=p,R0(b,`#${v} .${b.attrs[0][1]} .section-custom`)),R0(b,E)}return i.children&&l.forEach(u=>i.children.splice(u,1)),r}function A_t(i,e,t,r,n,s,o,a,l){const u=e[i];if(u.type==="heading_close"&&(u.tag=t[t.length-2].tag,u.type=t[t.length-2].type.replace("_open","_close")),u.type==="heading_open"){if(r){s&&(jL(t,o,a),s=!1,o=-1);const c=t[n].tag;zCe(t,n),t.push(Kh(a,c,-1,-1,"html_close")),r=!1,n=-1}r||(t.push(Kh(a,"div",0,1,"html_open",[["class","section-wrap"]])),r=!0,n=t.length-1,l.last.as=!!e[i+1].content.includes("as="))}return{sectionStart:r,sectionStartIndex:n,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:t}}function k_t(i,e,t,r,n,s,o,a,l){return e[i].type==="heading_open"&&r&&t[n].mode==="tour"&&(s&&(t.push(Kh(a,"section-step",-1,-1,"html_close")),s=!1,o=-1),s||(t.push(Kh(a,"section-step",0,1,"html_open")),s=!0,o=t.length-1,l.last.as=!!e[i+1].content.includes("as="))),{sectionStart:r,sectionStartIndex:n,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:t}}function D_t(i,e,t){return i.push(Kh(e,t.last.tag,1,-1,"html_close",null)),i.push(Kh(e,"h1",1,1,"html_open",null)),i.push(Kh(e,"h1",2,0,"html_inline",null)),i[i.length-1].content=$u(t.last.attrs,"title"),i.push(Kh(e,"h1",1,-1,"html_close",null)),i}function zCe(i,e){const t=i[e+1],r=$u(t.attrs,"as"),n=$u(t.attrs,"mode");r&&!n&&(i.splice(e+2,1),i.slice(e+3).forEach(s=>{s.level=1}),i.push(i[e+2]),i.splice(e+2,1))}function jL(i,e,t){const r=i[e].tag;i.push(Kh(t,r,-1,-1,"html_close"))}function $u(i,e){var t;return((t=(i||[]).find(r=>r[0]===e))==null?void 0:t[1])||null}function UCe(i,e,t){if(!e)return i.last;t==="^"?t=1:typeof t=="string"?t=+t.slice(1):t=0;const n=(d1t[e.toLowerCase()]||[e.toLowerCase()]).find(o=>i.types[o]),s=i.types[n];if(s)return s[s.length-1-t]}function R0(i,e=""){var s,o;let t;for(i.attrStr=e;e.length>0;)if(t=e.match(/^\s*\.([a-zA-Z0-9\-_]+)/))cf(i,"class",t[1],{append:!0}),e=e.slice(t[0].length);else if(t=e.match(/^\s*#([a-zA-Z0-9\-_]+)/))cf(i,"id",t[1]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)="([^"]*)"/))cf(i,t[1],t[2]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)='([^']*)'/))cf(i,t[1],t[2]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)=([^ ]*)/))cf(i,t[1],t[2]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)/))cf(i,t[1],""),e=e.slice(t[0].length);else if(t=e.match(/^\s+/))e=e.slice(t[0].length);else if(t=e.match(/^\s*as="([a-zA-Z0-9\-_]+)"/))cf(i,"as",t[1]),e=e.slice(t[0].length);else break;const r=$u(i.attrs,"as"),n=$u(i.attrs,"mode");return(o=(s=f1t[r])==null?void 0:s[n])==null||o.forEach(a=>{$u(i.attrs,a[0])||(cf(i,a[0],a[1]),e=e.slice(a[0].length))}),!0}function cf(i,e,t,r={}){const n=i.attrIndex(e);e==="class"&&r.append&&n!==-1?i.attrs[n][1].includes(t)||(i.attrs[n][1]+=` ${t}`):n===-1?i.attrPush([e,t]):r.append?i.attrs[n][1]+=` ${t}`:i.attrs[n][1]=t}function GCe(i,e){const t=e.type.replace(/_(open|start)$/,"");i.types[t]||(i.types[t]=[]),i.types[t].push(e),i.last=e}function M_t(i,e){i[e]=i[e].replace(/\s*$/,"")}function L_t(i,e){i.forEach(t=>{const r=t.attrs||[];let n={};if(R_t(t,e),r.forEach(s=>{e.attrs.keys.includes(s[0])||e.attrs.keys.push(s[0]),n={...n,[s[0]]:ICe(s[1])},t.section&&(I_t(t,s,e),O_t(t,s,e))}),r.length&&t.section){const s=t.tag==="section-step",o=s?` ${t.tag} `:"",a=t.section+o,l=Object.keys(e.attrs.sections).filter(h=>!!h.startsWith(a)).length+1,c=a+(s?l:"");e.attrs.sections={...e.attrs.sections,[c]:{...n,...s?{as:t.tag,mode:"tour"}:{}}}}})}function R_t(i,e){var t,r;i.section&&(i.tag==="section-step"&&!e.sections[i.section].steps&&(e.sections[i.section].steps=[]),(i.markup==="#"||i.markup==="##")&&(e.sections[i.section]=e.sections[i.section]||{}),(r=(t=e.sections[i.section])==null?void 0:t.steps)==null||r.push({}))}function I_t(i,e,t){i.markup==="##"&&(t.sections[i.section]={[e[0]]:YP(e[1]),...t.sections[i.section]})}function O_t(i,e,t){if(i.tag==="section-step"){const r=t.sections[i.section].steps,n=r.length-1,s=r[n];r[n]={[e[0]]:YP(e[1]),...s}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function qCe(i){return typeof i>"u"||i===null}function P_t(i){return typeof i=="object"&&i!==null}function F_t(i){return Array.isArray(i)?i:qCe(i)?[]:[i]}function N_t(i,e){var t,r,n,s;if(e)for(s=Object.keys(e),t=0,r=s.length;t<r;t+=1)n=s[t],i[n]=e[n];return i}function $_t(i,e){var t="",r;for(r=0;r<e;r+=1)t+=i;return t}function B_t(i){return i===0&&Number.NEGATIVE_INFINITY===1/i}var j_t=qCe,z_t=P_t,U_t=F_t,G_t=$_t,q_t=B_t,H_t=N_t,Xs={isNothing:j_t,isObject:z_t,toArray:U_t,repeat:G_t,isNegativeZero:q_t,extend:H_t};function HCe(i,e){var t="",r=i.reason||"(unknown reason)";return i.mark?(i.mark.name&&(t+='in "'+i.mark.name+'" '),t+="("+(i.mark.line+1)+":"+(i.mark.column+1)+")",!e&&i.mark.snippet&&(t+=`

`+i.mark.snippet),r+" "+t):r}function Fx(i,e){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=e,this.message=HCe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Fx.prototype=Object.create(Error.prototype);Fx.prototype.constructor=Fx;Fx.prototype.toString=function(e){return this.name+": "+HCe(this,e)};var Ea=Fx;function I3(i,e,t,r,n){var s="",o="",a=Math.floor(n/2)-1;return r-e>a&&(s=" ... ",e=r-a+s.length),t-r>a&&(o=" ...",t=r+a-o.length),{str:s+i.slice(e,t).replace(/\t/g,"")+o,pos:r-e+s.length}}function O3(i,e){return Xs.repeat(" ",e-i.length)+i}function V_t(i,e){if(e=Object.create(e||null),!i.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,r=[0],n=[],s,o=-1;s=t.exec(i.buffer);)n.push(s.index),r.push(s.index+s[0].length),i.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,u,c=Math.min(i.line+e.linesAfter,n.length).toString().length,h=e.maxLength-(e.indent+c+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)u=I3(i.buffer,r[o-l],n[o-l],i.position-(r[o]-r[o-l]),h),a=Xs.repeat(" ",e.indent)+O3((i.line-l+1).toString(),c)+" | "+u.str+`
`+a;for(u=I3(i.buffer,r[o],n[o],i.position,h),a+=Xs.repeat(" ",e.indent)+O3((i.line+1).toString(),c)+" | "+u.str+`
`,a+=Xs.repeat("-",e.indent+c+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=n.length);l++)u=I3(i.buffer,r[o+l],n[o+l],i.position-(r[o]-r[o+l]),h),a+=Xs.repeat(" ",e.indent)+O3((i.line+l+1).toString(),c)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var W_t=V_t,Y_t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],X_t=["scalar","sequence","mapping"];function Z_t(i){var e={};return i!==null&&Object.keys(i).forEach(function(t){i[t].forEach(function(r){e[String(r)]=t})}),e}function K_t(i,e){if(e=e||{},Object.keys(e).forEach(function(t){if(Y_t.indexOf(t)===-1)throw new Ea('Unknown option "'+t+'" is met in definition of "'+i+'" YAML type.')}),this.options=e,this.tag=i,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Z_t(e.styleAliases||null),X_t.indexOf(this.kind)===-1)throw new Ea('Unknown kind "'+this.kind+'" is specified for "'+i+'" YAML type.')}var Fo=K_t;function s0e(i,e){var t=[];return i[e].forEach(function(r){var n=t.length;t.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(n=o)}),t[n]=r}),t}function J_t(){var i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function r(n){n.multi?(i.multi[n.kind].push(n),i.multi.fallback.push(n)):i[n.kind][n.tag]=i.fallback[n.tag]=n}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return i}function zL(i){return this.extend(i)}zL.prototype.extend=function(e){var t=[],r=[];if(e instanceof Fo)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Ea("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof Fo))throw new Ea("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Ea("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Ea("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof Fo))throw new Ea("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(zL.prototype);return n.implicit=(this.implicit||[]).concat(t),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=s0e(n,"implicit"),n.compiledExplicit=s0e(n,"explicit"),n.compiledTypeMap=J_t(n.compiledImplicit,n.compiledExplicit),n};var VCe=zL,WCe=new Fo("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}}),YCe=new Fo("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}}),XCe=new Fo("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}}),ZCe=new VCe({explicit:[WCe,YCe,XCe]});function Q_t(i){if(i===null)return!0;var e=i.length;return e===1&&i==="~"||e===4&&(i==="null"||i==="Null"||i==="NULL")}function ext(){return null}function txt(i){return i===null}var KCe=new Fo("tag:yaml.org,2002:null",{kind:"scalar",resolve:Q_t,construct:ext,predicate:txt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function ixt(i){if(i===null)return!1;var e=i.length;return e===4&&(i==="true"||i==="True"||i==="TRUE")||e===5&&(i==="false"||i==="False"||i==="FALSE")}function rxt(i){return i==="true"||i==="True"||i==="TRUE"}function nxt(i){return Object.prototype.toString.call(i)==="[object Boolean]"}var JCe=new Fo("tag:yaml.org,2002:bool",{kind:"scalar",resolve:ixt,construct:rxt,predicate:nxt,represent:{lowercase:function(i){return i?"true":"false"},uppercase:function(i){return i?"TRUE":"FALSE"},camelcase:function(i){return i?"True":"False"}},defaultStyle:"lowercase"});function sxt(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function oxt(i){return 48<=i&&i<=55}function axt(i){return 48<=i&&i<=57}function lxt(i){if(i===null)return!1;var e=i.length,t=0,r=!1,n;if(!e)return!1;if(n=i[t],(n==="-"||n==="+")&&(n=i[++t]),n==="0"){if(t+1===e)return!0;if(n=i[++t],n==="b"){for(t++;t<e;t++)if(n=i[t],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(t++;t<e;t++)if(n=i[t],n!=="_"){if(!sxt(i.charCodeAt(t)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(t++;t<e;t++)if(n=i[t],n!=="_"){if(!oxt(i.charCodeAt(t)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;t<e;t++)if(n=i[t],n!=="_"){if(!axt(i.charCodeAt(t)))return!1;r=!0}return!(!r||n==="_")}function uxt(i){var e=i,t=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(t=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function cxt(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!Xs.isNegativeZero(i)}var QCe=new Fo("tag:yaml.org,2002:int",{kind:"scalar",resolve:lxt,construct:uxt,predicate:cxt,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),hxt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function dxt(i){return!(i===null||!hxt.test(i)||i[i.length-1]==="_")}function fxt(i){var e,t;return e=i.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var pxt=/^[-+]?[0-9]+e/;function mxt(i,e){var t;if(isNaN(i))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Xs.isNegativeZero(i))return"-0.0";return t=i.toString(10),pxt.test(t)?t.replace("e",".e"):t}function gxt(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||Xs.isNegativeZero(i))}var eTe=new Fo("tag:yaml.org,2002:float",{kind:"scalar",resolve:dxt,construct:fxt,predicate:gxt,represent:mxt,defaultStyle:"lowercase"}),tTe=ZCe.extend({implicit:[KCe,JCe,QCe,eTe]}),iTe=tTe,rTe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),nTe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yxt(i){return i===null?!1:rTe.exec(i)!==null||nTe.exec(i)!==null}function vxt(i){var e,t,r,n,s,o,a,l=0,u=null,c,h,d;if(e=rTe.exec(i),e===null&&(e=nTe.exec(i)),e===null)throw new Error("Date resolve error");if(t=+e[1],r=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(t,r,n));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],h=+(e[11]||0),u=(c*60+h)*6e4,e[9]==="-"&&(u=-u)),d=new Date(Date.UTC(t,r,n,s,o,a,l)),u&&d.setTime(d.getTime()-u),d}function bxt(i){return i.toISOString()}var sTe=new Fo("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yxt,construct:vxt,instanceOf:Date,represent:bxt});function _xt(i){return i==="<<"||i===null}var oTe=new Fo("tag:yaml.org,2002:merge",{kind:"scalar",resolve:_xt}),ZP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function xxt(i){if(i===null)return!1;var e,t,r=0,n=i.length,s=ZP;for(t=0;t<n;t++)if(e=s.indexOf(i.charAt(t)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function wxt(i){var e,t,r=i.replace(/[\r\n=]/g,""),n=r.length,s=ZP,o=0,a=[];for(e=0;e<n;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return t=n%4*6,t===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):t===18?(a.push(o>>10&255),a.push(o>>2&255)):t===12&&a.push(o>>4&255),new Uint8Array(a)}function Ext(i){var e="",t=0,r,n,s=i.length,o=ZP;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+i[r];return n=s%3,n===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):n===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):n===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}function Sxt(i){return Object.prototype.toString.call(i)==="[object Uint8Array]"}var aTe=new Fo("tag:yaml.org,2002:binary",{kind:"scalar",resolve:xxt,construct:wxt,predicate:Sxt,represent:Ext}),Cxt=Object.prototype.hasOwnProperty,Txt=Object.prototype.toString;function Axt(i){if(i===null)return!0;var e=[],t,r,n,s,o,a=i;for(t=0,r=a.length;t<r;t+=1){if(n=a[t],o=!1,Txt.call(n)!=="[object Object]")return!1;for(s in n)if(Cxt.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function kxt(i){return i!==null?i:[]}var lTe=new Fo("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Axt,construct:kxt}),Dxt=Object.prototype.toString;function Mxt(i){if(i===null)return!0;var e,t,r,n,s,o=i;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(r=o[e],Dxt.call(r)!=="[object Object]"||(n=Object.keys(r),n.length!==1))return!1;s[e]=[n[0],r[n[0]]]}return!0}function Lxt(i){if(i===null)return[];var e,t,r,n,s,o=i;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1)r=o[e],n=Object.keys(r),s[e]=[n[0],r[n[0]]];return s}var uTe=new Fo("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Mxt,construct:Lxt}),Rxt=Object.prototype.hasOwnProperty;function Ixt(i){if(i===null)return!0;var e,t=i;for(e in t)if(Rxt.call(t,e)&&t[e]!==null)return!1;return!0}function Oxt(i){return i!==null?i:{}}var cTe=new Fo("tag:yaml.org,2002:set",{kind:"mapping",resolve:Ixt,construct:Oxt}),KP=iTe.extend({implicit:[sTe,oTe],explicit:[aTe,lTe,uTe,cTe]}),tp=Object.prototype.hasOwnProperty,YC=1,hTe=2,dTe=3,XC=4,P3=1,Pxt=2,o0e=3,Fxt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Nxt=/[\x85\u2028\u2029]/,$xt=/[,\[\]\{\}]/,fTe=/^(?:!|!!|![a-z\-]+!)$/i,pTe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function a0e(i){return Object.prototype.toString.call(i)}function zc(i){return i===10||i===13}function Fm(i){return i===9||i===32}function tl(i){return i===9||i===32||i===10||i===13}function J0(i){return i===44||i===91||i===93||i===123||i===125}function Bxt(i){var e;return 48<=i&&i<=57?i-48:(e=i|32,97<=e&&e<=102?e-97+10:-1)}function jxt(i){return i===120?2:i===117?4:i===85?8:0}function zxt(i){return 48<=i&&i<=57?i-48:-1}function l0e(i){return i===48?"\0":i===97?"\x07":i===98?"\b":i===116||i===9?"	":i===110?`
`:i===118?"\v":i===102?"\f":i===114?"\r":i===101?"\x1B":i===32?" ":i===34?'"':i===47?"/":i===92?"\\":i===78?"":i===95?"":i===76?"\u2028":i===80?"\u2029":""}function Uxt(i){return i<=65535?String.fromCharCode(i):String.fromCharCode((i-65536>>10)+55296,(i-65536&1023)+56320)}var mTe=new Array(256),gTe=new Array(256);for(var x0=0;x0<256;x0++)mTe[x0]=l0e(x0)?1:0,gTe[x0]=l0e(x0);function Gxt(i,e){this.input=i,this.filename=e.filename||null,this.schema=e.schema||KP,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=i.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function yTe(i,e){var t={name:i.filename,buffer:i.input.slice(0,-1),position:i.position,line:i.line,column:i.position-i.lineStart};return t.snippet=W_t(t),new Ea(e,t)}function ci(i,e){throw yTe(i,e)}function ZC(i,e){i.onWarning&&i.onWarning.call(null,yTe(i,e))}var u0e={YAML:function(e,t,r){var n,s,o;e.version!==null&&ci(e,"duplication of %YAML directive"),r.length!==1&&ci(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),n===null&&ci(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&ci(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&ZC(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,s;r.length!==2&&ci(e,"TAG directive accepts exactly two arguments"),n=r[0],s=r[1],fTe.test(n)||ci(e,"ill-formed tag handle (first argument) of the TAG directive"),tp.call(e.tagMap,n)&&ci(e,'there is a previously declared suffix for "'+n+'" tag handle'),pTe.test(s)||ci(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ci(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s}};function jf(i,e,t,r){var n,s,o,a;if(e<t){if(a=i.input.slice(e,t),r)for(n=0,s=a.length;n<s;n+=1)o=a.charCodeAt(n),o===9||32<=o&&o<=1114111||ci(i,"expected valid JSON character");else Fxt.test(a)&&ci(i,"the stream contains non-printable characters");i.result+=a}}function c0e(i,e,t,r){var n,s,o,a;for(Xs.isObject(t)||ci(i,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(t),o=0,a=n.length;o<a;o+=1)s=n[o],tp.call(e,s)||(e[s]=t[s],r[s]=!0)}function Q0(i,e,t,r,n,s,o,a,l){var u,c;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),u=0,c=n.length;u<c;u+=1)Array.isArray(n[u])&&ci(i,"nested arrays are not supported inside keys"),typeof n=="object"&&a0e(n[u])==="[object Object]"&&(n[u]="[object Object]");if(typeof n=="object"&&a0e(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)c0e(i,e,s[u],t);else c0e(i,e,s,t);else!i.json&&!tp.call(t,n)&&tp.call(e,n)&&(i.line=o||i.line,i.lineStart=a||i.lineStart,i.position=l||i.position,ci(i,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete t[n];return e}function JP(i){var e;e=i.input.charCodeAt(i.position),e===10?i.position++:e===13?(i.position++,i.input.charCodeAt(i.position)===10&&i.position++):ci(i,"a line break is expected"),i.line+=1,i.lineStart=i.position,i.firstTabInLine=-1}function $s(i,e,t){for(var r=0,n=i.input.charCodeAt(i.position);n!==0;){for(;Fm(n);)n===9&&i.firstTabInLine===-1&&(i.firstTabInLine=i.position),n=i.input.charCodeAt(++i.position);if(e&&n===35)do n=i.input.charCodeAt(++i.position);while(n!==10&&n!==13&&n!==0);if(zc(n))for(JP(i),n=i.input.charCodeAt(i.position),r++,i.lineIndent=0;n===32;)i.lineIndent++,n=i.input.charCodeAt(++i.position);else break}return t!==-1&&r!==0&&i.lineIndent<t&&ZC(i,"deficient indentation"),r}function UA(i){var e=i.position,t;return t=i.input.charCodeAt(e),!!((t===45||t===46)&&t===i.input.charCodeAt(e+1)&&t===i.input.charCodeAt(e+2)&&(e+=3,t=i.input.charCodeAt(e),t===0||tl(t)))}function QP(i,e){e===1?i.result+=" ":e>1&&(i.result+=Xs.repeat(`
`,e-1))}function qxt(i,e,t){var r,n,s,o,a,l,u,c,h=i.kind,d=i.result,p;if(p=i.input.charCodeAt(i.position),tl(p)||J0(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(n=i.input.charCodeAt(i.position+1),tl(n)||t&&J0(n)))return!1;for(i.kind="scalar",i.result="",s=o=i.position,a=!1;p!==0;){if(p===58){if(n=i.input.charCodeAt(i.position+1),tl(n)||t&&J0(n))break}else if(p===35){if(r=i.input.charCodeAt(i.position-1),tl(r))break}else{if(i.position===i.lineStart&&UA(i)||t&&J0(p))break;if(zc(p))if(l=i.line,u=i.lineStart,c=i.lineIndent,$s(i,!1,-1),i.lineIndent>=e){a=!0,p=i.input.charCodeAt(i.position);continue}else{i.position=o,i.line=l,i.lineStart=u,i.lineIndent=c;break}}a&&(jf(i,s,o,!1),QP(i,i.line-l),s=o=i.position,a=!1),Fm(p)||(o=i.position+1),p=i.input.charCodeAt(++i.position)}return jf(i,s,o,!1),i.result?!0:(i.kind=h,i.result=d,!1)}function Hxt(i,e){var t,r,n;if(t=i.input.charCodeAt(i.position),t!==39)return!1;for(i.kind="scalar",i.result="",i.position++,r=n=i.position;(t=i.input.charCodeAt(i.position))!==0;)if(t===39)if(jf(i,r,i.position,!0),t=i.input.charCodeAt(++i.position),t===39)r=i.position,i.position++,n=i.position;else return!0;else zc(t)?(jf(i,r,n,!0),QP(i,$s(i,!1,e)),r=n=i.position):i.position===i.lineStart&&UA(i)?ci(i,"unexpected end of the document within a single quoted scalar"):(i.position++,n=i.position);ci(i,"unexpected end of the stream within a single quoted scalar")}function Vxt(i,e){var t,r,n,s,o,a;if(a=i.input.charCodeAt(i.position),a!==34)return!1;for(i.kind="scalar",i.result="",i.position++,t=r=i.position;(a=i.input.charCodeAt(i.position))!==0;){if(a===34)return jf(i,t,i.position,!0),i.position++,!0;if(a===92){if(jf(i,t,i.position,!0),a=i.input.charCodeAt(++i.position),zc(a))$s(i,!1,e);else if(a<256&&mTe[a])i.result+=gTe[a],i.position++;else if((o=jxt(a))>0){for(n=o,s=0;n>0;n--)a=i.input.charCodeAt(++i.position),(o=Bxt(a))>=0?s=(s<<4)+o:ci(i,"expected hexadecimal character");i.result+=Uxt(s),i.position++}else ci(i,"unknown escape sequence");t=r=i.position}else zc(a)?(jf(i,t,r,!0),QP(i,$s(i,!1,e)),t=r=i.position):i.position===i.lineStart&&UA(i)?ci(i,"unexpected end of the document within a double quoted scalar"):(i.position++,r=i.position)}ci(i,"unexpected end of the stream within a double quoted scalar")}function Wxt(i,e){var t=!0,r,n,s,o=i.tag,a,l=i.anchor,u,c,h,d,p,m=Object.create(null),g,v,b,_;if(_=i.input.charCodeAt(i.position),_===91)c=93,p=!1,a=[];else if(_===123)c=125,p=!0,a={};else return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=a),_=i.input.charCodeAt(++i.position);_!==0;){if($s(i,!0,e),_=i.input.charCodeAt(i.position),_===c)return i.position++,i.tag=o,i.anchor=l,i.kind=p?"mapping":"sequence",i.result=a,!0;t?_===44&&ci(i,"expected the node content, but found ','"):ci(i,"missed comma between flow collection entries"),v=g=b=null,h=d=!1,_===63&&(u=i.input.charCodeAt(i.position+1),tl(u)&&(h=d=!0,i.position++,$s(i,!0,e))),r=i.line,n=i.lineStart,s=i.position,tv(i,e,YC,!1,!0),v=i.tag,g=i.result,$s(i,!0,e),_=i.input.charCodeAt(i.position),(d||i.line===r)&&_===58&&(h=!0,_=i.input.charCodeAt(++i.position),$s(i,!0,e),tv(i,e,YC,!1,!0),b=i.result),p?Q0(i,a,m,v,g,b,r,n,s):h?a.push(Q0(i,null,m,v,g,b,r,n,s)):a.push(g),$s(i,!0,e),_=i.input.charCodeAt(i.position),_===44?(t=!0,_=i.input.charCodeAt(++i.position)):t=!1}ci(i,"unexpected end of the stream within a flow collection")}function Yxt(i,e){var t,r,n=P3,s=!1,o=!1,a=e,l=0,u=!1,c,h;if(h=i.input.charCodeAt(i.position),h===124)r=!1;else if(h===62)r=!0;else return!1;for(i.kind="scalar",i.result="";h!==0;)if(h=i.input.charCodeAt(++i.position),h===43||h===45)P3===n?n=h===43?o0e:Pxt:ci(i,"repeat of a chomping mode identifier");else if((c=zxt(h))>=0)c===0?ci(i,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ci(i,"repeat of an indentation width identifier"):(a=e+c-1,o=!0);else break;if(Fm(h)){do h=i.input.charCodeAt(++i.position);while(Fm(h));if(h===35)do h=i.input.charCodeAt(++i.position);while(!zc(h)&&h!==0)}for(;h!==0;){for(JP(i),i.lineIndent=0,h=i.input.charCodeAt(i.position);(!o||i.lineIndent<a)&&h===32;)i.lineIndent++,h=i.input.charCodeAt(++i.position);if(!o&&i.lineIndent>a&&(a=i.lineIndent),zc(h)){l++;continue}if(i.lineIndent<a){n===o0e?i.result+=Xs.repeat(`
`,s?1+l:l):n===P3&&s&&(i.result+=`
`);break}for(r?Fm(h)?(u=!0,i.result+=Xs.repeat(`
`,s?1+l:l)):u?(u=!1,i.result+=Xs.repeat(`
`,l+1)):l===0?s&&(i.result+=" "):i.result+=Xs.repeat(`
`,l):i.result+=Xs.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,t=i.position;!zc(h)&&h!==0;)h=i.input.charCodeAt(++i.position);jf(i,t,i.position,!1)}return!0}function h0e(i,e){var t,r=i.tag,n=i.anchor,s=[],o,a=!1,l;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=s),l=i.input.charCodeAt(i.position);l!==0&&(i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,ci(i,"tab characters must not be used in indentation")),!(l!==45||(o=i.input.charCodeAt(i.position+1),!tl(o))));){if(a=!0,i.position++,$s(i,!0,-1)&&i.lineIndent<=e){s.push(null),l=i.input.charCodeAt(i.position);continue}if(t=i.line,tv(i,e,dTe,!1,!0),s.push(i.result),$s(i,!0,-1),l=i.input.charCodeAt(i.position),(i.line===t||i.lineIndent>e)&&l!==0)ci(i,"bad indentation of a sequence entry");else if(i.lineIndent<e)break}return a?(i.tag=r,i.anchor=n,i.kind="sequence",i.result=s,!0):!1}function Xxt(i,e,t){var r,n,s,o,a,l,u=i.tag,c=i.anchor,h={},d=Object.create(null),p=null,m=null,g=null,v=!1,b=!1,_;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=h),_=i.input.charCodeAt(i.position);_!==0;){if(!v&&i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,ci(i,"tab characters must not be used in indentation")),r=i.input.charCodeAt(i.position+1),s=i.line,(_===63||_===58)&&tl(r))_===63?(v&&(Q0(i,h,d,p,m,null,o,a,l),p=m=g=null),b=!0,v=!0,n=!0):v?(v=!1,n=!0):ci(i,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),i.position+=1,_=r;else{if(o=i.line,a=i.lineStart,l=i.position,!tv(i,t,hTe,!1,!0))break;if(i.line===s){for(_=i.input.charCodeAt(i.position);Fm(_);)_=i.input.charCodeAt(++i.position);if(_===58)_=i.input.charCodeAt(++i.position),tl(_)||ci(i,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Q0(i,h,d,p,m,null,o,a,l),p=m=g=null),b=!0,v=!1,n=!1,p=i.tag,m=i.result;else if(b)ci(i,"can not read an implicit mapping pair; a colon is missed");else return i.tag=u,i.anchor=c,!0}else if(b)ci(i,"can not read a block mapping entry; a multiline key may not be an implicit key");else return i.tag=u,i.anchor=c,!0}if((i.line===s||i.lineIndent>e)&&(v&&(o=i.line,a=i.lineStart,l=i.position),tv(i,e,XC,!0,n)&&(v?m=i.result:g=i.result),v||(Q0(i,h,d,p,m,g,o,a,l),p=m=g=null),$s(i,!0,-1),_=i.input.charCodeAt(i.position)),(i.line===s||i.lineIndent>e)&&_!==0)ci(i,"bad indentation of a mapping entry");else if(i.lineIndent<e)break}return v&&Q0(i,h,d,p,m,null,o,a,l),b&&(i.tag=u,i.anchor=c,i.kind="mapping",i.result=h),b}function Zxt(i){var e,t=!1,r=!1,n,s,o;if(o=i.input.charCodeAt(i.position),o!==33)return!1;if(i.tag!==null&&ci(i,"duplication of a tag property"),o=i.input.charCodeAt(++i.position),o===60?(t=!0,o=i.input.charCodeAt(++i.position)):o===33?(r=!0,n="!!",o=i.input.charCodeAt(++i.position)):n="!",e=i.position,t){do o=i.input.charCodeAt(++i.position);while(o!==0&&o!==62);i.position<i.length?(s=i.input.slice(e,i.position),o=i.input.charCodeAt(++i.position)):ci(i,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!tl(o);)o===33&&(r?ci(i,"tag suffix cannot contain exclamation marks"):(n=i.input.slice(e-1,i.position+1),fTe.test(n)||ci(i,"named tag handle cannot contain such characters"),r=!0,e=i.position+1)),o=i.input.charCodeAt(++i.position);s=i.input.slice(e,i.position),$xt.test(s)&&ci(i,"tag suffix cannot contain flow indicator characters")}s&&!pTe.test(s)&&ci(i,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ci(i,"tag name is malformed: "+s)}return t?i.tag=s:tp.call(i.tagMap,n)?i.tag=i.tagMap[n]+s:n==="!"?i.tag="!"+s:n==="!!"?i.tag="tag:yaml.org,2002:"+s:ci(i,'undeclared tag handle "'+n+'"'),!0}function Kxt(i){var e,t;if(t=i.input.charCodeAt(i.position),t!==38)return!1;for(i.anchor!==null&&ci(i,"duplication of an anchor property"),t=i.input.charCodeAt(++i.position),e=i.position;t!==0&&!tl(t)&&!J0(t);)t=i.input.charCodeAt(++i.position);return i.position===e&&ci(i,"name of an anchor node must contain at least one character"),i.anchor=i.input.slice(e,i.position),!0}function Jxt(i){var e,t,r;if(r=i.input.charCodeAt(i.position),r!==42)return!1;for(r=i.input.charCodeAt(++i.position),e=i.position;r!==0&&!tl(r)&&!J0(r);)r=i.input.charCodeAt(++i.position);return i.position===e&&ci(i,"name of an alias node must contain at least one character"),t=i.input.slice(e,i.position),tp.call(i.anchorMap,t)||ci(i,'unidentified alias "'+t+'"'),i.result=i.anchorMap[t],$s(i,!0,-1),!0}function tv(i,e,t,r,n){var s,o,a,l=1,u=!1,c=!1,h,d,p,m,g,v;if(i.listener!==null&&i.listener("open",i),i.tag=null,i.anchor=null,i.kind=null,i.result=null,s=o=a=XC===t||dTe===t,r&&$s(i,!0,-1)&&(u=!0,i.lineIndent>e?l=1:i.lineIndent===e?l=0:i.lineIndent<e&&(l=-1)),l===1)for(;Zxt(i)||Kxt(i);)$s(i,!0,-1)?(u=!0,a=s,i.lineIndent>e?l=1:i.lineIndent===e?l=0:i.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=u||n),(l===1||XC===t)&&(YC===t||hTe===t?g=e:g=e+1,v=i.position-i.lineStart,l===1?a&&(h0e(i,v)||Xxt(i,v,g))||Wxt(i,g)?c=!0:(o&&Yxt(i,g)||Hxt(i,g)||Vxt(i,g)?c=!0:Jxt(i)?(c=!0,(i.tag!==null||i.anchor!==null)&&ci(i,"alias node should not have any properties")):qxt(i,g,YC===t)&&(c=!0,i.tag===null&&(i.tag="?")),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):l===0&&(c=a&&h0e(i,v))),i.tag===null)i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);else if(i.tag==="?"){for(i.result!==null&&i.kind!=="scalar"&&ci(i,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+i.kind+'"'),h=0,d=i.implicitTypes.length;h<d;h+=1)if(m=i.implicitTypes[h],m.resolve(i.result)){i.result=m.construct(i.result),i.tag=m.tag,i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);break}}else if(i.tag!=="!"){if(tp.call(i.typeMap[i.kind||"fallback"],i.tag))m=i.typeMap[i.kind||"fallback"][i.tag];else for(m=null,p=i.typeMap.multi[i.kind||"fallback"],h=0,d=p.length;h<d;h+=1)if(i.tag.slice(0,p[h].tag.length)===p[h].tag){m=p[h];break}m||ci(i,"unknown tag !<"+i.tag+">"),i.result!==null&&m.kind!==i.kind&&ci(i,"unacceptable node kind for !<"+i.tag+'> tag; it should be "'+m.kind+'", not "'+i.kind+'"'),m.resolve(i.result,i.tag)?(i.result=m.construct(i.result,i.tag),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):ci(i,"cannot resolve a node with !<"+i.tag+"> explicit tag")}return i.listener!==null&&i.listener("close",i),i.tag!==null||i.anchor!==null||c}function Qxt(i){var e=i.position,t,r,n,s=!1,o;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);(o=i.input.charCodeAt(i.position))!==0&&($s(i,!0,-1),o=i.input.charCodeAt(i.position),!(i.lineIndent>0||o!==37));){for(s=!0,o=i.input.charCodeAt(++i.position),t=i.position;o!==0&&!tl(o);)o=i.input.charCodeAt(++i.position);for(r=i.input.slice(t,i.position),n=[],r.length<1&&ci(i,"directive name must not be less than one character in length");o!==0;){for(;Fm(o);)o=i.input.charCodeAt(++i.position);if(o===35){do o=i.input.charCodeAt(++i.position);while(o!==0&&!zc(o));break}if(zc(o))break;for(t=i.position;o!==0&&!tl(o);)o=i.input.charCodeAt(++i.position);n.push(i.input.slice(t,i.position))}o!==0&&JP(i),tp.call(u0e,r)?u0e[r](i,r,n):ZC(i,'unknown document directive "'+r+'"')}if($s(i,!0,-1),i.lineIndent===0&&i.input.charCodeAt(i.position)===45&&i.input.charCodeAt(i.position+1)===45&&i.input.charCodeAt(i.position+2)===45?(i.position+=3,$s(i,!0,-1)):s&&ci(i,"directives end mark is expected"),tv(i,i.lineIndent-1,XC,!1,!0),$s(i,!0,-1),i.checkLineBreaks&&Nxt.test(i.input.slice(e,i.position))&&ZC(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&UA(i)){i.input.charCodeAt(i.position)===46&&(i.position+=3,$s(i,!0,-1));return}if(i.position<i.length-1)ci(i,"end of the stream or a document separator is expected");else return}function vTe(i,e){i=String(i),e=e||{},i.length!==0&&(i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i.charCodeAt(0)===65279&&(i=i.slice(1)));var t=new Gxt(i,e),r=i.indexOf("\0");for(r!==-1&&(t.position=r,ci(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Qxt(t);return t.documents}function ewt(i,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var r=vTe(i,t);if(typeof e!="function")return r;for(var n=0,s=r.length;n<s;n+=1)e(r[n])}function twt(i,e){var t=vTe(i,e);if(t.length!==0){if(t.length===1)return t[0];throw new Ea("expected a single document in the stream, but found more")}}var iwt=ewt,rwt=twt,bTe={loadAll:iwt,load:rwt},_Te=Object.prototype.toString,xTe=Object.prototype.hasOwnProperty,eF=65279,nwt=9,Nx=10,swt=13,owt=32,awt=33,lwt=34,UL=35,uwt=37,cwt=38,hwt=39,dwt=42,wTe=44,fwt=45,KC=58,pwt=61,mwt=62,gwt=63,ywt=64,ETe=91,STe=93,vwt=96,CTe=123,bwt=124,TTe=125,pa={};pa[0]="\\0";pa[7]="\\a";pa[8]="\\b";pa[9]="\\t";pa[10]="\\n";pa[11]="\\v";pa[12]="\\f";pa[13]="\\r";pa[27]="\\e";pa[34]='\\"';pa[92]="\\\\";pa[133]="\\N";pa[160]="\\_";pa[8232]="\\L";pa[8233]="\\P";var _wt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],xwt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function wwt(i,e){var t,r,n,s,o,a,l;if(e===null)return{};for(t={},r=Object.keys(e),n=0,s=r.length;n<s;n+=1)o=r[n],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=i.compiledTypeMap.fallback[o],l&&xTe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),t[o]=a;return t}function Ewt(i){var e,t,r;if(e=i.toString(16).toUpperCase(),i<=255)t="x",r=2;else if(i<=65535)t="u",r=4;else if(i<=4294967295)t="U",r=8;else throw new Ea("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Xs.repeat("0",r-e.length)+e}var Swt=1,$x=2;function Cwt(i){this.schema=i.schema||KP,this.indent=Math.max(1,i.indent||2),this.noArrayIndent=i.noArrayIndent||!1,this.skipInvalid=i.skipInvalid||!1,this.flowLevel=Xs.isNothing(i.flowLevel)?-1:i.flowLevel,this.styleMap=wwt(this.schema,i.styles||null),this.sortKeys=i.sortKeys||!1,this.lineWidth=i.lineWidth||80,this.noRefs=i.noRefs||!1,this.noCompatMode=i.noCompatMode||!1,this.condenseFlow=i.condenseFlow||!1,this.quotingType=i.quotingType==='"'?$x:Swt,this.forceQuotes=i.forceQuotes||!1,this.replacer=typeof i.replacer=="function"?i.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function d0e(i,e){for(var t=Xs.repeat(" ",e),r=0,n=-1,s="",o,a=i.length;r<a;)n=i.indexOf(`
`,r),n===-1?(o=i.slice(r),r=a):(o=i.slice(r,n+1),r=n+1),o.length&&o!==`
`&&(s+=t),s+=o;return s}function GL(i,e){return`
`+Xs.repeat(" ",i.indent*e)}function Twt(i,e){var t,r,n;for(t=0,r=i.implicitTypes.length;t<r;t+=1)if(n=i.implicitTypes[t],n.resolve(e))return!0;return!1}function JC(i){return i===owt||i===nwt}function Bx(i){return 32<=i&&i<=126||161<=i&&i<=55295&&i!==8232&&i!==8233||57344<=i&&i<=65533&&i!==eF||65536<=i&&i<=1114111}function f0e(i){return Bx(i)&&i!==eF&&i!==swt&&i!==Nx}function p0e(i,e,t){var r=f0e(i),n=r&&!JC(i);return(t?r:r&&i!==wTe&&i!==ETe&&i!==STe&&i!==CTe&&i!==TTe)&&i!==UL&&!(e===KC&&!n)||f0e(e)&&!JC(e)&&i===UL||e===KC&&n}function Awt(i){return Bx(i)&&i!==eF&&!JC(i)&&i!==fwt&&i!==gwt&&i!==KC&&i!==wTe&&i!==ETe&&i!==STe&&i!==CTe&&i!==TTe&&i!==UL&&i!==cwt&&i!==dwt&&i!==awt&&i!==bwt&&i!==pwt&&i!==mwt&&i!==hwt&&i!==lwt&&i!==uwt&&i!==ywt&&i!==vwt}function kwt(i){return!JC(i)&&i!==KC}function c_(i,e){var t=i.charCodeAt(e),r;return t>=55296&&t<=56319&&e+1<i.length&&(r=i.charCodeAt(e+1),r>=56320&&r<=57343)?(t-55296)*1024+r-56320+65536:t}function ATe(i){var e=/^\n* /;return e.test(i)}var kTe=1,qL=2,DTe=3,MTe=4,I0=5;function Dwt(i,e,t,r,n,s,o,a){var l,u=0,c=null,h=!1,d=!1,p=r!==-1,m=-1,g=Awt(c_(i,0))&&kwt(c_(i,i.length-1));if(e||o)for(l=0;l<i.length;u>=65536?l+=2:l++){if(u=c_(i,l),!Bx(u))return I0;g=g&&p0e(u,c,a),c=u}else{for(l=0;l<i.length;u>=65536?l+=2:l++){if(u=c_(i,l),u===Nx)h=!0,p&&(d=d||l-m-1>r&&i[m+1]!==" ",m=l);else if(!Bx(u))return I0;g=g&&p0e(u,c,a),c=u}d=d||p&&l-m-1>r&&i[m+1]!==" "}return!h&&!d?g&&!o&&!n(i)?kTe:s===$x?I0:qL:t>9&&ATe(i)?I0:o?s===$x?I0:qL:d?MTe:DTe}function Mwt(i,e,t,r,n){i.dump=function(){if(e.length===0)return i.quotingType===$x?'""':"''";if(!i.noCompatMode&&(_wt.indexOf(e)!==-1||xwt.test(e)))return i.quotingType===$x?'"'+e+'"':"'"+e+"'";var s=i.indent*Math.max(1,t),o=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-s),a=r||i.flowLevel>-1&&t>=i.flowLevel;function l(u){return Twt(i,u)}switch(Dwt(e,a,i.indent,o,l,i.quotingType,i.forceQuotes&&!r,n)){case kTe:return e;case qL:return"'"+e.replace(/'/g,"''")+"'";case DTe:return"|"+m0e(e,i.indent)+g0e(d0e(e,s));case MTe:return">"+m0e(e,i.indent)+g0e(d0e(Lwt(e,o),s));case I0:return'"'+Rwt(e)+'"';default:throw new Ea("impossible error: invalid scalar style")}}()}function m0e(i,e){var t=ATe(i)?String(e):"",r=i[i.length-1]===`
`,n=r&&(i[i.length-2]===`
`||i===`
`),s=n?"+":r?"":"-";return t+s+`
`}function g0e(i){return i[i.length-1]===`
`?i.slice(0,-1):i}function Lwt(i,e){for(var t=/(\n+)([^\n]*)/g,r=function(){var u=i.indexOf(`
`);return u=u!==-1?u:i.length,t.lastIndex=u,y0e(i.slice(0,u),e)}(),n=i[0]===`
`||i[0]===" ",s,o;o=t.exec(i);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!n&&!s&&l!==""?`
`:"")+y0e(l,e),n=s}return r}function y0e(i,e){if(i===""||i[0]===" ")return i;for(var t=/ [^ ]/g,r,n=0,s,o=0,a=0,l="";r=t.exec(i);)a=r.index,a-n>e&&(s=o>n?o:a,l+=`
`+i.slice(n,s),n=s+1),o=a;return l+=`
`,i.length-n>e&&o>n?l+=i.slice(n,o)+`
`+i.slice(o+1):l+=i.slice(n),l.slice(1)}function Rwt(i){for(var e="",t=0,r,n=0;n<i.length;t>=65536?n+=2:n++)t=c_(i,n),r=pa[t],!r&&Bx(t)?(e+=i[n],t>=65536&&(e+=i[n+1])):e+=r||Ewt(t);return e}function Iwt(i,e,t){var r="",n=i.tag,s,o,a;for(s=0,o=t.length;s<o;s+=1)a=t[s],i.replacer&&(a=i.replacer.call(t,String(s),a)),(dd(i,e,a,!1,!1)||typeof a>"u"&&dd(i,e,null,!1,!1))&&(r!==""&&(r+=","+(i.condenseFlow?"":" ")),r+=i.dump);i.tag=n,i.dump="["+r+"]"}function v0e(i,e,t,r){var n="",s=i.tag,o,a,l;for(o=0,a=t.length;o<a;o+=1)l=t[o],i.replacer&&(l=i.replacer.call(t,String(o),l)),(dd(i,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&dd(i,e+1,null,!0,!0,!1,!0))&&((!r||n!=="")&&(n+=GL(i,e)),i.dump&&Nx===i.dump.charCodeAt(0)?n+="-":n+="- ",n+=i.dump);i.tag=s,i.dump=n||"[]"}function Owt(i,e,t){var r="",n=i.tag,s=Object.keys(t),o,a,l,u,c;for(o=0,a=s.length;o<a;o+=1)c="",r!==""&&(c+=", "),i.condenseFlow&&(c+='"'),l=s[o],u=t[l],i.replacer&&(u=i.replacer.call(t,l,u)),dd(i,e,l,!1,!1)&&(i.dump.length>1024&&(c+="? "),c+=i.dump+(i.condenseFlow?'"':"")+":"+(i.condenseFlow?"":" "),dd(i,e,u,!1,!1)&&(c+=i.dump,r+=c));i.tag=n,i.dump="{"+r+"}"}function Pwt(i,e,t,r){var n="",s=i.tag,o=Object.keys(t),a,l,u,c,h,d;if(i.sortKeys===!0)o.sort();else if(typeof i.sortKeys=="function")o.sort(i.sortKeys);else if(i.sortKeys)throw new Ea("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!r||n!=="")&&(d+=GL(i,e)),u=o[a],c=t[u],i.replacer&&(c=i.replacer.call(t,u,c)),dd(i,e+1,u,!0,!0,!0)&&(h=i.tag!==null&&i.tag!=="?"||i.dump&&i.dump.length>1024,h&&(i.dump&&Nx===i.dump.charCodeAt(0)?d+="?":d+="? "),d+=i.dump,h&&(d+=GL(i,e)),dd(i,e+1,c,!0,h)&&(i.dump&&Nx===i.dump.charCodeAt(0)?d+=":":d+=": ",d+=i.dump,n+=d));i.tag=s,i.dump=n||"{}"}function b0e(i,e,t){var r,n,s,o,a,l;for(n=t?i.explicitTypes:i.implicitTypes,s=0,o=n.length;s<o;s+=1)if(a=n[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(t?a.multi&&a.representName?i.tag=a.representName(e):i.tag=a.tag:i.tag="?",a.represent){if(l=i.styleMap[a.tag]||a.defaultStyle,_Te.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(xTe.call(a.represent,l))r=a.represent[l](e,l);else throw new Ea("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');i.dump=r}return!0}return!1}function dd(i,e,t,r,n,s,o){i.tag=null,i.dump=t,b0e(i,t,!1)||b0e(i,t,!0);var a=_Te.call(i.dump),l=r,u;r&&(r=i.flowLevel<0||i.flowLevel>e);var c=a==="[object Object]"||a==="[object Array]",h,d;if(c&&(h=i.duplicates.indexOf(t),d=h!==-1),(i.tag!==null&&i.tag!=="?"||d||i.indent!==2&&e>0)&&(n=!1),d&&i.usedDuplicates[h])i.dump="*ref_"+h;else{if(c&&d&&!i.usedDuplicates[h]&&(i.usedDuplicates[h]=!0),a==="[object Object]")r&&Object.keys(i.dump).length!==0?(Pwt(i,e,i.dump,n),d&&(i.dump="&ref_"+h+i.dump)):(Owt(i,e,i.dump),d&&(i.dump="&ref_"+h+" "+i.dump));else if(a==="[object Array]")r&&i.dump.length!==0?(i.noArrayIndent&&!o&&e>0?v0e(i,e-1,i.dump,n):v0e(i,e,i.dump,n),d&&(i.dump="&ref_"+h+i.dump)):(Iwt(i,e,i.dump),d&&(i.dump="&ref_"+h+" "+i.dump));else if(a==="[object String]")i.tag!=="?"&&Mwt(i,i.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(i.skipInvalid)return!1;throw new Ea("unacceptable kind of an object to dump "+a)}i.tag!==null&&i.tag!=="?"&&(u=encodeURI(i.tag[0]==="!"?i.tag.slice(1):i.tag).replace(/!/g,"%21"),i.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",i.dump=u+" "+i.dump)}return!0}function Fwt(i,e){var t=[],r=[],n,s;for(HL(i,t,r),n=0,s=r.length;n<s;n+=1)e.duplicates.push(t[r[n]]);e.usedDuplicates=new Array(s)}function HL(i,e,t){var r,n,s;if(i!==null&&typeof i=="object")if(n=e.indexOf(i),n!==-1)t.indexOf(n)===-1&&t.push(n);else if(e.push(i),Array.isArray(i))for(n=0,s=i.length;n<s;n+=1)HL(i[n],e,t);else for(r=Object.keys(i),n=0,s=r.length;n<s;n+=1)HL(i[r[n]],e,t)}function Nwt(i,e){e=e||{};var t=new Cwt(e);t.noRefs||Fwt(i,t);var r=i;return t.replacer&&(r=t.replacer.call({"":r},"",r)),dd(t,0,r,!0,!0)?t.dump+`
`:""}var $wt=Nwt,Bwt={dump:$wt};function tF(i,e){return function(){throw new Error("Function yaml."+i+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var jwt=Fo,zwt=VCe,Uwt=ZCe,Gwt=tTe,qwt=iTe,Hwt=KP,Vwt=bTe.load,Wwt=bTe.loadAll,Ywt=Bwt.dump,Xwt=Ea,Zwt={binary:aTe,float:eTe,map:XCe,null:KCe,pairs:uTe,set:cTe,timestamp:sTe,bool:JCe,int:QCe,merge:oTe,omap:lTe,seq:YCe,str:WCe},Kwt=tF("safeLoad","load"),Jwt=tF("safeLoadAll","loadAll"),Qwt=tF("safeDump","dump"),eEt={Type:jwt,Schema:zwt,FAILSAFE_SCHEMA:Uwt,JSON_SCHEMA:Gwt,CORE_SCHEMA:qwt,DEFAULT_SCHEMA:Hwt,load:Vwt,loadAll:Wwt,dump:Ywt,YAMLException:Xwt,types:Zwt,safeLoad:Kwt,safeLoadAll:Jwt,safeDump:Qwt};function tEt(i){i.core.ruler.before("normalize","extract-config",e=>{var n;const t=/^\s*---\s*\n([\s\S]+?)\n\s*---\s*/,r=e.src.match(t);if(i.config={versionCheck:((n=i.config)==null?void 0:n.versionCheck)||!1},r)try{i.config=eEt.load(r[1]),e.src=e.src.replace(r[0],"")}catch(s){return console.error("Error parsing frontmatter:",s),null}i.config.versionCheck||(i.config.version=Number(l_t(i.config.version)),i.config.versionCheck=!0)})}const iEt=`
${sg}
${$T}
${LR}
${RR}

  iframe,
  img,
  video {
    max-width: 100%;
  }
  .navigation {
    width: 100%;
    background: white;
    padding: 10px 0px;
    color: black;
    box-shadow: 0px 0px 13px 3px #8080802e;
    max-height: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .navigation .container {
    padding: 0px;
  }
  .navigation .container ul {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0px;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    margin: 0;
    padding: 0;
  }
  .navigation .container ul::-webkit-scrollbar { 
    display: none;
  }
  .navigation .container ul li {
    list-style: none;
    margin: 0px 10px;
  }
  .navigation li a {
    color: black;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    display: inline-grid;
  }
  .navigation li a:after {
    content: "";
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: transparent;
  }
  .navigation li a:hover:after {
    background: black;
  }
  .navigation li.active a {
    font-weight: 700;
  }
  .navigation li.active a:after {
    background: black;
  }
  .navigation li a:hover {
    --primary-background-hover: transparent;
  }
  .section-wrap {
    scroll-margin: 120px;
  }
  .story-telling p {
    display: block;
    --font-size: 1.1rem;
    font-weight: 400;
    line-height: 170%;
    margin-top: 0.8rem;
    margin-bottom: 1.6rem;
  }
  .story-telling a {
    --font-size: 1.1rem;
    --color: var(--primary-color);
    --background-color: transparent;
    outline: 0;
    background-color: var(--background-color);
    color: var(--color);
    text-underline-offset: 4px;
    font-size: var(--font-size)
  }
  .story-telling a:hover {
    --bg-hover-transparency: 10%;
    background-color: color-mix(
      in srgb,
      var(--primary-color) var(--bg-hover-transparency),
      transparent
    );
  }
  .story-telling li {
    margin-bottom: 1rem;
  }
  .story-telling table {
    width:100%;
    color: var(--color);
    font-style: normal;
    font-weight: 400;
    font-size: 1rem;
    margin: 2rem 0rem;
  }
  .story-telling td, 
  .story-telling th {
    padding: 1rem;
    color: var(--color);
    font-weight: 400;
    font-size: 1rem;
    text-align: left;
    text-align: start;
    border-bottom: 1px solid var(--color);
  }
  .story-telling th {
    font-weight: 600;
    border-bottom: 3px solid var(--color);
  }
  .story-telling .container {
    width: 90%;
    --block-spacing-vertical: 2rem;
  }
  .story-telling.editor-enabled .section-wrap.section-item {
    position: relative;
    border-bottom: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start {
    border-top: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item::after, 
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    content: "+";
    background: white;
    width: 25px;
    height: 25px;
    display: flex;
    position: absolute;
    bottom: -12px;
    left: calc(50% - 12.5px);
    z-index: 1;
    border-radius: 100%;
    box-shadow: 1px 1px 10px #80808094;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: larger;
    cursor: pointer;
  }
  .story-telling.editor-enabled.editor-close .section-wrap.section-item::after, 
  .story-telling.editor-enabled.editor-close .section-wrap.section-item.section-start::before {
    display: none;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    top: -12px;
  }
  .story-telling .section-wrap.container.section-start {
    padding-top: 4rem;
  }
  .story-telling p:last-child {
    margin-bottom: 0;
  }
  .story-telling .section-wrap.container:last-child {
    padding-bottom: 4rem; 
  }
  .story-telling .tour {
    width: 100%;
    justify-items: start;
    display: grid;
  }
  .story-telling .hero {
    position: relative;      
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .story-telling .hero * {
    color: white;
    margin: 0rem 0.8rem;
  }
  .story-telling .hero.center {
    align-items: center;
    text-align: center;
  }
  .story-telling .hero.left {
    align-items: start;
    text-align: left;
  }
  .story-telling .hero.right {
    align-items: end;
    text-align: right;
  }
  .story-telling .hero img, 
  .story-telling .hero video {
    position: absolute;
    top: -17.5%;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 135%;
    object-fit: cover;
    margin: 0rem;
    will-change: transform;
    backface-visibility: hidden;
    filter: brightness(60%) contrast(100%);
  }
  .story-telling .tour.left {
    justify-items: start;
  }
  .story-telling .tour.right {
    justify-items: end;
  }
  .story-telling .tour.center {
    justify-items: center;
  }
  .story-telling .tour eox-map {
    width: 100%;
    height: 100vh;
    position: sticky;
    top:0;
    z-index: 0;
  }
  .story-telling .tour section-step {
    background: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    min-height: 8vh;
    margin: 1rem;
    margin-bottom: calc(120vh);
    display: block;
    z-index: 1;
    max-width: 40%;
  }
  @media screen and (max-width: 1024px) {
    .story-telling .tour section-step {
      max-width: 100%;
    }
  }
  .editor-wrapper {
    z-index: 4;
    width: 35%;
    position: fixed;
    bottom: 20px;
    right: 20px;
    border-radius: 10px;
    background: #f2f2f2;
    cursor: move;
    box-shadow: 0px 0px 3px 2px #80808026;
    box-sizing: border-box;
  }
  .resize-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 4px;
    left: 4px;
    background-color: black;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    transform: rotate(90deg);
    cursor: sw-resize;
    z-index: 2;
  }
  #editor {
    width: 100%;
    height: 100%;
    border: 2px solid #ebebeb;
    cursor: auto;
  }
  @media screen and (max-width: 1024px) {
    .editor-wrapper {
      right: 2.5%;
      width: 95%;
    }
  }
  .editor-opacity-none {
    opacity: 0;
  }
  .editor-hide {
    display: none;
  }
  .editor-error {
    display: none;
    cursor: auto;
    position: absolute;
    bottom: 39px;
    left: 9px;
    width: calc(100% - 20px);
    height: 105px;
    background: #ffc7d3;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border: 2px solid #ff7b9640;
    z-index: 1;
  }
  .editor-error .editor-error-wrapper {
    padding: 0.5rem;
    height: 85%;
  }
  .editor-error .editor-error-wrapper .overflow {
    height: 100%;
    overflow-y: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 85%;
  }
  .editor-error .editor-error-wrapper .overflow::-webkit-scrollbar { 
    display: none;
  }
  .editor-error .editor-error-wrapper h6 {
    margin: 0;
    padding: 0;
    font-size: 0.7rem;
    color: #dd264c;
  }
  .editor-error .editor-error-wrapper ul {
    margin-top: 0.25rem;
    padding-inline-start: 20px;
  }
  .editor-error .editor-error-wrapper li {
    color: #dd264c;
    font-size: 0.7rem;
    font-weight: 400;
    margin-bottom: 0;
    margin-left: 0.2rem;
  }
  .editor-saver {
    position: absolute;    
    bottom: 18px;
    left: 17px;
    font-size: 12px;
    color: #959694;
    text-align: right;
  }
  @keyframes rotate {
    100% {transform: rotate(360deg)}
  }
  @keyframes spin {
    0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
    25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
    50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
    75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
    100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
  }
  .switch-button {
    position: fixed;
    bottom: 70px;
    right: 60px;
    display: inline-block;
    font-size: 0;
    z-index: 5;
    border: 5px white solid;
    border-radius: 34px;
    box-shadow: 1px 2px 10px 1px #7e7e7e59;
    cursor: pointer;
  }
  .switch {
    position: relative;
    display: flex;
    align-items: center;
    width: 65px;
    height: 34px;
    font-size: 16px;
    justify-content: space-around;
    margin-bottom: 0px;
  }
  .switch .switch-input { 
    opacity: 0;
    width: 0;
    height: 0;
  }
  .switch .icon {
    z-index: 2;
    width: 30px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .switch .icon::before {
    cursor: pointer;
    display: block;
    width: 18px;
    height: 18px;
  }
  .view-icon {
    padding-left: 8px;
  }
  .editor-icon {
    padding-right: 8px;
  }
  .switch .view-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath fill='white' d='M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z' /%3E%3C/svg%3E");
  }
  .switch .icon.editor-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epencil%3C/title%3E%3Cpath fill='white' d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' /%3E%3C/svg%3E");
  }
  .switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 20px;
    right: 20px;
    bottom: 0;
    z-index: 1;
    background-color: #727272;
    transition: .4s;
    border-radius: 34px;
    left: 0px;
    right: 0px;
    width: 65px;
  }
  .switch-slider:before {
    cursor: pointer;
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  .switch-input:checked + .switch-slider {
    background-color: #2196F3;
  }
  .switch-input:checked + .switch-slider:before {
    transform: translateX(30px);
  }
  .switch .icon.editor-view {
    opacity: 0;
  }
  .story-telling-custom-section-list {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000000b5;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .story-telling-custom-section-list .overlay-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    cursor: pointer;
  }
  .story-telling-custom-section-list .story-telling-popup {
    width: 450px;
    height: 500px;
    background: white;
    border-radius: 0.5rem;
    padding: 20px;
    position: relative;
  }
  .story-telling-section-fields-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #000000c9;
    height: 100%;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  .story-telling-section-fields-wrapper {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    background: white;
    height: 100%;
    border-bottom-right-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
    box-shadow: -14px 3px 20px 0px #0e0e0e26;
  }
  .story-telling-popup-wrapper {
    overflow-y: auto;
    height: 100%;
  }
  .story-telling-custom-section-list .story-telling-popup .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
  }
  .story-telling-custom-section-list .story-telling-popup .header:first-child {
    margin-top:0px;
  }
  .story-telling-custom-section-list .story-telling-popup .header h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
  }
  .story-telling-custom-section-list .story-telling-popup .header p {
    background: #2273EC;
    border-radius: 20px;
    padding: 0px 15px;
    color: white;
    height: 1.1rem;
    display: flex;
    align-items: center;
    margin: 0;
    font-size: 0.75rem;
  }
  .story-telling-custom-section-list .story-telling-popup hr {
    border-top: 2.5px solid #e5eaf0;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item {
    text-align: center;
    cursor: pointer;
    padding: 0px;
    border: 1px solid #e1e6eb;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item:hover {
    border-color: #2273EC;
    background-color: #f7f7f7;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon {
    font-size: 0px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon::before {
    width: 100%;
    color: black;
    display: inline-block;
    border-radius: 6px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item p {
    padding: 0px;
    margin: 0px;
    font-size: 0.8rem;
    color: #555555;
    font-weight: 500;
    padding: 4px 0px;
  }
  eox-jsonform#storytelling-editor-fields {
    padding-bottom: 80px;
    height: auto;
    display: block;
  }
  eox-jsonform#storytelling-editor-fields div {
    height: auto;
  }
  .story-telling-section-fields-overflow {
    overflow-y: auto;
    height: calc(100% - 60px);
    padding: 20px;
  }
  .story-telling-section-submit-wrapper {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: 10px 0px;
    background: white;
    display: flex;
    justify-content: center;
    box-shadow: -2px -10px 10px #00000017;
    border-bottom-right-radius: 0.5rem;
  }
  .story-telling-section-submit-wrapper button {
    width: 92%;
    justify-content: center;
  }
  eox-jsonform#storytelling-editor-fields .je-form-input-label {
    text-transform: capitalize;
  }
  eox-jsonform#storytelling-editor-fields .je-object__controls {
    display: none; 
  }
  @media screen and (max-width: 1024px) {
    .switch-button {
      right: 20px;
    }
  }
  .section-line-decoration {
    background: #757575;
    z-index: 1;
    align-items: center;
    justify-content: center;
    display: flex;
    color: #ffffff;
    font-size: 12px;
    font-weight: 700;
  }
  .margin-view-overlays {
    background: #e6e6e6;
  }
`;var yT,RTe;class LTe extends Lr{constructor(){super();ar(this,yT);this.markdown="",this.storyId=null,this.isNavigation=!1,this.dragging=!1,this.resizing=!1,this.showEditor=void 0,this.disableTextSelection=this.disableTextSelection.bind(this),this.enableTextSelection=this.enableTextSelection.bind(this)}disableTextSelection(){document.body.style.userSelect="none"}enableTextSelection(){document.body.style.userSelect=""}firstUpdated(){const t=this.querySelector(".editor-wrapper"),r=this.querySelector(".resize-handle");this.editor=this.renderRoot.querySelector("eox-jsonform#storytelling-editor"),this.showEditor==="closed"&&LCe(this),E1t(this),MCe(this),w1t(t,r,this)}updateErrors(t){const r=this.renderRoot.querySelector(".editor-error");r&&(t.length?(r.style.display="block",r.querySelector("ul").innerHTML=t.map(n=>`<li><strong>${n.ref}</strong>: ${n.message}</li>`).join("")):r.style.display="none")}createRenderRoot(){return this}render(){customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use StoryTelling Editor");const t=this.isNavigation?"partial-height":"";return Qe`
      <div class="editor-wrapper ${t}">
        <eox-jsonform
          id="storytelling-editor"
          no-shadow
          .schema=${D1t}
          .value=${{Story:this.markdown}}
        ></eox-jsonform>
        <div class="resize-handle"></div>
        <span class="editor-saver">Saved</span>
        <div class="editor-error">
          <div class="editor-error-wrapper">
            <div class="overflow">
              <h6> Error</h6>
              <ul></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="switch-button">
        <label class="switch">
          <i class="icon view-icon"></i>
          <input
            class="switch-input"
            type="checkbox"
            @change=${Es(this,yT,RTe)}
            checked
          />
          <span class="switch-slider round"></span>
          <i class="icon editor-icon"></i>
        </label>
      </div>
      <style>
        eox-jsonform#storytelling-editor {
          display: block;
          height: 100%;
          cursor: default;
        }
        .editor-wrapper {
          padding: 0.5rem;
        }
        .editor-toolbar:hover {
          opacity: 1;
        }
        form[data-theme="html"] .je-indented-panel {
          padding: 0 !important;
          margin: 0 !important;
          border: none !important;
        }
        .editor-wrapper .CodeMirror {
          height: 100%;
          min-height: unset;
        }
        .editor-wrapper .EasyMDEContainer {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .editor-wrapper .EasyMDEContainer .CodeMirror-scroll {
          min-height: 1000px;
        }
        .editor-toolbar button {
          box-shadow: none;
          color: #2c3e50 !important;
        }
        .editor-toolbar button:hover:not([disabled]):not(.icon),
        .editor-toolbar button:hover:not([disabled]):not(.icon) {
          box-shadow: none;
          background: #fcfcfc;
          border-color: #95a5a6;
        }
        .editor-toolbar button i {
          font-size: 17px;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
          line-height: 200%;
        }
        .editor-wrapper .cm-header-2 {
          font-size: 160%;
          line-height: 160%;
        }
        .editor-wrapper .cm-header-3 {
          font-size: 125%;
          line-height: 125%;
        }
        .editor-wrapper .cm-header-4 {
          font-size: 110%;
          line-height: 110%;
        }
        .editor-wrapper .cm-comment {
          background: rgba(0, 0, 0, 0.05);
          border-radius: 2px;
        }
        eox-jsonform form[data-theme="html"],
        eox-jsonform div[data-schemaid="root"],
        eox-jsonform div.je-indented-panel,
        eox-jsonform div.je-indented-panel > div,
        eox-jsonform div.je-indented-panel > div > div,
        eox-jsonform div.row,
        eox-jsonform div[data-schematype="string"],
        eox-jsonform div.form-control {
          height: 100%;
        }
        eox-jsonform div.form-control {
          display: flex;
          flex-direction: column;
        }
        eox-jsonform div.editor-toolbar,
        eox-jsonform div.editor-statusbar {
          flex-shrink: 1;
        }
        eox-jsonform .CodeMirror-sizer {
          padding-bottom: 100px !important;
        }
        eox-jsonform#storytelling-editor .je-form-input-label,
        eox-jsonform#storytelling-editor .je-object__controls {
          display: none !important;
        }
      </style>
    `}}yT=new WeakSet,RTe=function(t){const r=this.renderRoot.querySelector(".editor-wrapper"),n=this.storyId?`#${this.storyId}`:"",s=document.querySelector(`eox-storytelling${n}`);t.target.checked?(r.classList.remove("editor-opacity-none"),r.classList.remove("editor-hide"),s.setAttribute("show-editor","open")):(r.classList.add("editor-hide"),s.setAttribute("show-editor","close"))},We(LTe,"properties",{markdown:{attribute:"markdown",type:String},storyId:{attribute:"story-id",type:String},showEditor:{attribute:"show-editor",type:String},isNavigation:{attribute:"markdown",type:Boolean}});customElements.define("eox-storytelling-editor",LTe);const pm=fu({html:!0});pm.use(E_t).use(tEt);var Ou,_y,Yx,vT,ITe;class rEt extends Lr{constructor(){super();ar(this,vT);ar(this,Ou);ar(this,_y,{});ar(this,Yx,null);ko(this,Ou,void 0),this.markdown="",this.markdownURL=null,this.unstyled=!1,this.noShadow=!1,this.showEditor=void 0,this.showNav=!1,this.nav=[],this.addCustomSectionIndex=-1,this.selectedCustomElement=null}static get properties(){return{markdown:{attribute:"markdown",type:String},markdownURL:{attribute:"markdown-url",type:String},nav:{state:!0,attribute:!1,type:Array},showNav:{attribute:"show-nav",type:Boolean},showEditor:{attribute:"show-editor",type:String},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean},addCustomSectionIndex:{type:Number,state:!0},selectedCustomElement:{type:Object,state:!0}}}async updated(t){if(t.has("markdownURL")&&this.markdownURL&&(this.markdown=await h1t(this.markdownURL)||this.markdown,this.requestUpdate()),t.has("markdown")){const r=pm.render(this.markdown);if(h_t(pm.attrs.sections,this),ko(this,_y,pm.config),typeof _i(this,_y).nav=="boolean"&&(this.showNav=_i(this,_y).nav),this.showNav&&(this.nav=pm.nav),ko(this,Ou,V1t(f_t.sanitize(r,{CUSTOM_ELEMENT_HANDLING:o_t(pm),ADD_TAGS:g1t}),pm.sections,Es(this,vT,ITe).bind(this),this)),ko(this,Ou,X1t(_i(this,Ou),this.nav,this.showNav,this.showEditor,this)),this.showEditor!==void 0){const s=(this.shadowRoot||this).querySelector("eox-storytelling-editor"),o=s.querySelector("eox-jsonform");this.markdown!==(o==null?void 0:o.value.Story)&&(s.markdown=this.markdown)}this.requestUpdate()}t.has("nav")&&s_t(this,".navigation a")}handleSlotChange(){const t=this.shadowRoot.querySelector("slot");if(t){const r=t.assignedNodes({flatten:!0});this.markdown=r.map(n=>n.textContent?n.textContent:"").join(""),this.requestUpdate()}}async firstUpdated(){ko(this,Yx,fv(t=>{t.detail&&(this.markdown=t.detail.Story,this.requestUpdate())},1e3)),k1t(this),a_t(),_i(this,Ou)===void 0&&await this.waitForHtmlInitialization(),OCe(this)}async waitForHtmlInitialization(){const t=r=>new Promise(n=>setTimeout(n,r));for(;_i(this,Ou)===void 0;)await t(100)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=`${this.showEditor!==void 0?"editor-enabled":""} editor-${this.showEditor}`;return Qe`
      <slot class="slot-hide" @slotchange=${this.handleSlotChange}></slot>
      <style>
        :host { display: block; }
        .slot-hide { display: none; }
        ${!this.unstyled&&iEt}
        ${!this.unstyled&&PT}
      </style>

      <div class="story-telling ${t}">
        <div>${Pi(_i(this,Ou),()=>Qe`${_i(this,Ou)}`)}</div>
        ${Pi(this.showEditor!==void 0,()=>Qe`
            <eox-storytelling-editor
              .isNavigation=${!!this.showNav}
              .storyId=${this.id}
              show-editor=${this.showEditor}
              @change=${_i(this,Yx)}
              }
            ></eox-storytelling-editor>
          `)}
      </div>

      ${Pi(this.addCustomSectionIndex>-1,()=>Qe`
          <div class="story-telling-custom-section-list">
            <div
              class="overlay-popup"
              @click=${()=>{this.addCustomSectionIndex=-1,this.selectedCustomElement=null,this.requestUpdate()}}
            ></div>
            <div class="story-telling-popup">
              ${Pi(this.selectedCustomElement,()=>Qe`
                  <div class="story-telling-section-fields">
                    <div
                      class="story-telling-section-fields-overlay"
                      @click=${()=>{this.selectedCustomElement=null,this.requestUpdate()}}
                    ></div>
                    <div class="story-telling-section-fields-wrapper">
                      <div class="story-telling-section-fields-overflow">
                        <eox-jsonform
                          id="storytelling-editor-fields"
                          no-shadow
                          .schema=${this.selectedCustomElement.fields}
                        ></eox-jsonform>
                      </div>
                      <div class="story-telling-section-submit-wrapper">
                        <button
                          @click=${()=>Qge(this.markdown,this.addCustomSectionIndex,this.selectedCustomElement.markdown,this.selectedCustomElement.fields,!0,this)}
                        >
                          Add Section
                        </button>
                      </div>
                    </div>
                  </div>
                `)}
              <div class="story-telling-popup-wrapper">
                ${G1t.map(r=>Qe`
                    <div class="header">
                      <h4>${r.name}</h4>
                      <p>${r.elements.length}</p>
                    </div>
                    <hr />
                    <div class="grid-container">
                      ${r.elements.map(n=>Qe`<div
                          @click=${()=>Qge(this.markdown,this.addCustomSectionIndex,n.markdown,n.fields,!1,this)}
                          class="grid-item"
                        >
                          <icon id="${n.id}"></icon>
                          <p>${n.name}</p>
                          <style>
                            icon#${n.id}::before {
                              content: url("${n.icon}");
                            }
                          </style>
                        </div>`)}
                    </div>
                  `)}
              </div>
            </div>
          </div>
        `)}
    `}}Ou=new WeakMap,_y=new WeakMap,Yx=new WeakMap,vT=new WeakSet,ITe=function(t){this.dispatchEvent(new CustomEvent("init",{detail:t}))};customElements.define("eox-storytelling",rEt);const nEt=`
:host {
  display: block;
}
`,sEt=`
* {
  font-family: Roboto, sans-serif;
}

${sg}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-left-drop-circle%3C/title%3E%3Cpath d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M14,7L9,12L14,17V7Z' fill='%23004170' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-right-drop-circle%3C/title%3E%3Cpath d='M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M10,17L15,12L10,7V17Z' fill='%23004170' /%3E%3C/svg%3E");
}
`;var OTe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(Rn,function(){return function(t,r,n){r.prototype.dayOfYear=function(s){var o=Math.round((n(this).startOf("day")-n(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})})(OTe);var oEt=OTe.exports;const aEt=$o(oEt);var PTe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(Rn,function(){var t="day";return function(r,n,s){var o=function(u){return u.add(4-u.isoWeekday(),t)},a=n.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),t);var c,h,d,p,m=o(this),g=(c=this.isoWeekYear(),h=this.$u,d=(h?s.utc:s)().year(c).startOf("year"),p=4-d.isoWeekday(),d.isoWeekday()>4&&(p+=7),d.add(p,t));return m.diff(g,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,c){var h=this.$utils(),d=!!h.u(c)||c;return h.p(u)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,c)}}})})(PTe);var lEt=PTe.exports;const uEt=$o(lEt);var cEt=Object.defineProperty,hEt=Object.getOwnPropertyDescriptor,Qs=(i,e,t,r)=>{for(var n=r>1?void 0:r?hEt(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&cEt(e,t,n),n};Vh.extend(aEt);Vh.extend(uEt);let Aa=class extends Lr{constructor(){super(...arguments),this.controlValues=[],this._newStepIndex=0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(i){i?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=i,this.requestUpdate()}setConfig(i){this.layer=i.layer??this.layer,this.controlProperty=i.controlProperty??this.controlProperty,this.controlValues=i.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(i){const e=this.controlValues.findIndex(t=>t===i);e>-1?this._newStepIndex=e:console.error(`Unable to find step "${i}" in available times!`)}_updateStep(i=1){var e;this._newStepIndex=this._newStepIndex+i,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),(e=this._controlSource)==null||e.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]}),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}}))}getFlatLayersArray(i){const e=[];e.push(...i);let t=e.filter(r=>r instanceof Fl);for(;t.length;){const r=[];for(let n=0,s=t.length;n<s;n++){const o=t[n].getLayers().getArray();e.push(...o),r.push(...o.filter(a=>a instanceof Fl))}t=r}return e}render(){const i=document.querySelector(this.for),e=i.map||i;return e.once("loadend",()=>{if(!this._originalParams){const r=this.getFlatLayersArray(e.getLayers().getArray()).find(n=>n.get("id")===this.layer);this._controlSource=r.getSource(),this._originalParams=this._controlSource.getParams()}}),Qe`
      <style>
        ${nEt}
        ${!this.unstyled&&sEt}
      </style>
      <main>
        <div id="controls" part="controls">
          <button
            part="previous"
            class="icon previous"
            @click="${()=>this.previous()}"
          >
            <
          </button>
          <button part="next" class="icon next" @click="${()=>this.next()}">
            >
          </button>
          ${this.disablePlay?mr:Qe`
                <button
                  part="play"
                  class="icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `}
          ${this.slider?Qe`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${t=>this._updateStep(this.controlValues.findIndex(r=>r===t.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    width="300"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}

          <span part="current">${this.controlValues[this._newStepIndex]}</span>
        </div>
      </main>
    `}};Qs([Pt({attribute:"control-property"})],Aa.prototype,"controlProperty",2);Qs([Pt({attribute:"control-values",type:Array})],Aa.prototype,"controlValues",2);Qs([Pt()],Aa.prototype,"for",2);Qs([Pt()],Aa.prototype,"layer",2);Qs([Pt({type:Boolean})],Aa.prototype,"slider",2);Qs([Pt()],Aa.prototype,"_originalParams",2);Qs([Pt({attribute:"disable-play",type:Boolean})],Aa.prototype,"disablePlay",2);Qs([Pt({attribute:"current-step"})],Aa.prototype,"currentStep",1);Qs([Ds()],Aa.prototype,"_animationInterval",2);Qs([Ds()],Aa.prototype,"_controlSource",2);Qs([Ds()],Aa.prototype,"_isAnimationPlaying",2);Qs([Ds()],Aa.prototype,"_newStepIndex",2);Qs([Pt({type:Boolean})],Aa.prototype,"unstyled",2);Aa=Qs([yo("eox-timecontrol")],Aa);let iv=class extends Lr{constructor(){super(...arguments),this.width=0,this.steps=[],this.height=6,this.svgWidth=0}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.handleResize()}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}get lines(){const i=this.numLines>this.width/2?this.width/2:this.numLines,e=this.width/(i-1);return Array.from({length:this.numLines},(t,r)=>r*e)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){const i=[];let e=null;return this.lines.forEach((t,r)=>{const s=Vh(this.steps[r]).year();(r===0||s!==e)&&i.push({label:s,position:t}),e=s}),i.filter((t,r)=>{const n=i[r+1];return!(n&&n.position-t.position<25)})}isYearLine(i){return this.yearMarks.some(t=>Math.abs(t.position-i)<1)}render(){return Qe`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.lines.map((i,e)=>lue`
            <line
              key=${e}
              x1=${i}
              y1="0"
              x2=${i}
              y2=${this.isYearLine(i)?12:6}
              stroke=${this.isYearLine(i)?"#222":"#7596A2"}
              stroke-width=${this.isYearLine(i),1}
            ></line>
          `)}
          ${this.yearMarks.map((i,e)=>lue`
            <text
              key=${`y${e}`}
              x=${i.position}
              y=${this.height-1}
              fill="#555"
              font-size="13"
              font-weight="500"
            >
              ${i.label}
            </text>
          `)}
        </svg>
      </div>
    `}};Qs([Pt({type:Number})],iv.prototype,"width",2);Qs([Pt({type:Array})],iv.prototype,"steps",2);Qs([Ds()],iv.prototype,"height",2);Qs([Ds()],iv.prototype,"svgWidth",2);iv=Qs([yo("eox-sliderticks")],iv);const FTe=(i,e)=>{var r;let{privateFields:t=!0}=e;return t||(r=i==null?void 0:i.modules)==null||r.forEach(n=>{var s;(s=n==null?void 0:n.declarations)==null||s.forEach(o=>{Object.keys(o).forEach(a=>{Array.isArray(o[a])&&(o[a]=o[a].filter(l=>{var u;return!((u=l.privacy)!=null&&u.includes("private"))}))})})}),xDe(i)};FTe($De,{privateFields:!1});const dEt={parameters:{docs:{toc:!0,page:BDe,source:{transform:(i,e)=>{const t=e.undecoratedStoryFn(e);let r;const n={};return t.strings.map((s,o)=>{var c,h;const a=s.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(r=`eox-${a}`);const l=(h=(c=s.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:c[0])==null?void 0:h.replaceAll(" ",""),u=t.values[o];l&&u&&(n[r]||(n[r]={}),n[r][l]=u)}).filter(s=>s),Object.keys(n).forEach(s=>{i=i.replace(`<${s}`,`<${s}
  ${Object.keys(n[s]).map((o,a)=>`.${o}='\${${typeof n[s][o]=="string"?n[s][o]:JSON.stringify(n[s][o])}}'`).join(`
  `)}
  `)}),i}}}}},XEt=Object.freeze(Object.defineProperty({__proto__:null,default:dEt,setCustomElementsManifestWithOptions:FTe},Symbol.toStringTag,{value:"Module"}));export{HEt as L,VEt as a,XEt as p};
